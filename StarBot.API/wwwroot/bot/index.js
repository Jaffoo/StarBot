var mM=Object.defineProperty;var gM=(t,r,e)=>r in t?mM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var Eu=(t,r,e)=>(gM(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))n(g);new MutationObserver(g=>{for(const y of g)if(y.type==="childList")for(const i of y.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(g){const y={};return g.integrity&&(y.integrity=g.integrity),g.referrerPolicy&&(y.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?y.credentials="include":g.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function n(g){if(g.ep)return;g.ep=!0;const y=e(g);fetch(g.href,y)}})();/**
* @vue/shared v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t,r){const e=new Set(t.split(","));return r?n=>e.has(n.toLowerCase()):n=>e.has(n)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},hasOwnProperty$f=Object.prototype.hasOwnProperty,hasOwn=(t,r)=>hasOwnProperty$f.call(t,r),isArray$3=Array.isArray,isMap$2=t=>toTypeString(t)==="[object Map]",isSet$2=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isFunction$3=t=>typeof t=="function",isString$2=t=>typeof t=="string",isSymbol$1=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject$2(t)||isFunction$3(t))&&isFunction$3(t.then)&&isFunction$3(t.catch),objectToString$1=Object.prototype.toString,toTypeString=t=>objectToString$1.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$2=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$2(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(r,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,r)=>!Object.is(t,r),invokeArrayFns=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},def=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},looseToNumber=t=>{const r=parseFloat(t);return isNaN(r)?t:r},toNumber$1=t=>{const r=isString$2(t)?Number(t):NaN;return isNaN(r)?t:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray$3(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],g=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(g)for(const y in g)r[y]=g[y]}return r}else if(isString$2(t)||isObject$2(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const r={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(t){let r="";if(isString$2(t))r=t;else if(isArray$3(t))for(let e=0;e<t.length;e++){const n=normalizeClass(t[e]);n&&(r+=n+" ")}else if(isObject$2(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,r){if(t.length!==r.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=looseEqual(t[n],r[n]);return e}function looseEqual(t,r){if(t===r)return!0;let e=isDate$1(t),n=isDate$1(r);if(e||n)return e&&n?t.getTime()===r.getTime():!1;if(e=isSymbol$1(t),n=isSymbol$1(r),e||n)return t===r;if(e=isArray$3(t),n=isArray$3(r),e||n)return e&&n?looseCompareArrays(t,r):!1;if(e=isObject$2(t),n=isObject$2(r),e||n){if(!e||!n)return!1;const g=Object.keys(t).length,y=Object.keys(r).length;if(g!==y)return!1;for(const i in t){const k=t.hasOwnProperty(i),$=r.hasOwnProperty(i);if(k&&!$||!k&&$||!looseEqual(t[i],r[i]))return!1}}return String(t)===String(r)}function looseIndexOf(t,r){return t.findIndex(e=>looseEqual(e,r))}const toDisplayString=t=>isString$2(t)?t:t==null?"":isArray$3(t)||isObject$2(t)&&(t.toString===objectToString$1||!isFunction$3(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,r)=>r&&r.__v_isRef?replacer(t,r.value):isMap$2(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,g],y)=>(e[stringifySymbol(n,y)+" =>"]=g,e),{})}:isSet$2(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>stringifySymbol(e))}:isSymbol$1(r)?stringifySymbol(r):isObject$2(r)&&!isArray$3(r)&&!isPlainObject$2(r)?String(r):r,stringifySymbol=(t,r="")=>{var e;return isSymbol$1(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=e}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,r=activeEffectScope){r&&r.active&&r.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeEffect;class ReactiveEffect{constructor(r,e,n,g){this.fn=r,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,g)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let r=0;r<this._depsLength;r++){const e=this.deps[r];if(e.computed&&(triggerComputed(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(r){this._dirtyLevel=r?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=shouldTrack,e=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=e,shouldTrack=r}}stop(){var r;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(r=this.onStop)==null||r.call(this),this.active=!1)}}function triggerComputed(t){return t.value}function preCleanupEffect(t){t._trackId++,t._depsLength=0}function postCleanupEffect(t){if(t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)cleanupDepEffect(t.deps[r],t);t.deps.length=t._depsLength}}function cleanupDepEffect(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const n=t.deps[t._depsLength];n!==r?(n&&cleanupDepEffect(n,t),t.deps[t._depsLength++]=r):t._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(t,r,e){pauseScheduling();for(const n of t.keys()){let g;n._dirtyLevel<r&&(g??(g=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=r),n._shouldSchedule&&(g??(g=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&queueEffectSchedulers.push(n.scheduler)))}resetScheduling()}const createDep=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(t,r,e){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let g=n.get(e);g||n.set(e,g=createDep(()=>n.delete(e))),trackEffect(activeEffect,g)}}function trigger(t,r,e,n,g,y){const i=targetMap.get(t);if(!i)return;let k=[];if(r==="clear")k=[...i.values()];else if(e==="length"&&isArray$3(t)){const $=Number(n);i.forEach((L,V)=>{(V==="length"||!isSymbol$1(V)&&V>=$)&&k.push(L)})}else switch(e!==void 0&&k.push(i.get(e)),r){case"add":isArray$3(t)?isIntegerKey(e)&&k.push(i.get("length")):(k.push(i.get(ITERATE_KEY)),isMap$2(t)&&k.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(t)||(k.push(i.get(ITERATE_KEY)),isMap$2(t)&&k.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(t)&&k.push(i.get(ITERATE_KEY));break}pauseScheduling();for(const $ of k)$&&triggerEffects($,4);resetScheduling()}function getDepFromReactive(t,r){var e;return(e=targetMap.get(t))==null?void 0:e.get(r)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$1)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=toRaw(this);for(let y=0,i=this.length;y<i;y++)track(n,"get",y+"");const g=n[r](...e);return g===-1||g===!1?n[r](...e.map(toRaw)):g}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){pauseTracking(),pauseScheduling();const n=toRaw(this)[r].apply(this,e);return resetScheduling(),resetTracking(),n}}),t}function hasOwnProperty$e(t){const r=toRaw(this);return track(r,"has",t),r.hasOwnProperty(t)}class BaseReactiveHandler{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const g=this._isReadonly,y=this._isShallow;if(e==="__v_isReactive")return!g;if(e==="__v_isReadonly")return g;if(e==="__v_isShallow")return y;if(e==="__v_raw")return n===(g?y?shallowReadonlyMap:readonlyMap:y?shallowReactiveMap:reactiveMap).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const i=isArray$3(r);if(!g){if(i&&hasOwn(arrayInstrumentations,e))return Reflect.get(arrayInstrumentations,e,n);if(e==="hasOwnProperty")return hasOwnProperty$e}const k=Reflect.get(r,e,n);return(isSymbol$1(e)?builtInSymbols.has(e):isNonTrackableKeys(e))||(g||track(r,"get",e),y)?k:isRef(k)?i&&isIntegerKey(e)?k:k.value:isObject$2(k)?g?readonly(k):reactive(k):k}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,e,n,g){let y=r[e];if(!this._isShallow){const $=isReadonly(y);if(!isShallow(n)&&!isReadonly(n)&&(y=toRaw(y),n=toRaw(n)),!isArray$3(r)&&isRef(y)&&!isRef(n))return $?!1:(y.value=n,!0)}const i=isArray$3(r)&&isIntegerKey(e)?Number(e)<r.length:hasOwn(r,e),k=Reflect.set(r,e,n,g);return r===toRaw(g)&&(i?hasChanged(n,y)&&trigger(r,"set",e,n):trigger(r,"add",e,n)),k}deleteProperty(r,e){const n=hasOwn(r,e);r[e];const g=Reflect.deleteProperty(r,e);return g&&n&&trigger(r,"delete",e,void 0),g}has(r,e){const n=Reflect.has(r,e);return(!isSymbol$1(e)||!builtInSymbols.has(e))&&track(r,"has",e),n}ownKeys(r){return track(r,"iterate",isArray$3(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,r,e=!1,n=!1){t=t.__v_raw;const g=toRaw(t),y=toRaw(r);e||(hasChanged(r,y)&&track(g,"get",r),track(g,"get",y));const{has:i}=getProto(g),k=n?toShallow:e?toReadonly:toReactive;if(i.call(g,r))return k(t.get(r));if(i.call(g,y))return k(t.get(y));t!==g&&t.get(r)}function has(t,r=!1){const e=this.__v_raw,n=toRaw(e),g=toRaw(t);return r||(hasChanged(t,g)&&track(n,"has",t),track(n,"has",g)),t===g?e.has(t):e.has(t)||e.has(g)}function size(t,r=!1){return t=t.__v_raw,!r&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const r=toRaw(this);return getProto(r).has.call(r,t)||(r.add(t),trigger(r,"add",t,t)),this}function set$1(t,r){r=toRaw(r);const e=toRaw(this),{has:n,get:g}=getProto(e);let y=n.call(e,t);y||(t=toRaw(t),y=n.call(e,t));const i=g.call(e,t);return e.set(t,r),y?hasChanged(r,i)&&trigger(e,"set",t,r):trigger(e,"add",t,r),this}function deleteEntry(t){const r=toRaw(this),{has:e,get:n}=getProto(r);let g=e.call(r,t);g||(t=toRaw(t),g=e.call(r,t)),n&&n.call(r,t);const y=r.delete(t);return g&&trigger(r,"delete",t,void 0),y}function clear(){const t=toRaw(this),r=t.size!==0,e=t.clear();return r&&trigger(t,"clear",void 0,void 0),e}function createForEach(t,r){return function(n,g){const y=this,i=y.__v_raw,k=toRaw(i),$=r?toShallow:t?toReadonly:toReactive;return!t&&track(k,"iterate",ITERATE_KEY),i.forEach((L,V)=>n.call(g,$(L),$(V),y))}}function createIterableMethod(t,r,e){return function(...n){const g=this.__v_raw,y=toRaw(g),i=isMap$2(y),k=t==="entries"||t===Symbol.iterator&&i,$=t==="keys"&&i,L=g[t](...n),V=e?toShallow:r?toReadonly:toReactive;return!r&&track(y,"iterate",$?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:z,done:re}=L.next();return re?{value:z,done:re}:{value:k?[V(z[0]),V(z[1])]:V(z),done:re}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(){const t={get(y){return get$1(this,y)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(y){return get$1(this,y,!1,!0)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},e={get(y){return get$1(this,y,!0)},get size(){return size(this,!0)},has(y){return has.call(this,y,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(y){return get$1(this,y,!0,!0)},get size(){return size(this,!0)},has(y){return has.call(this,y,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=createIterableMethod(y,!1,!1),e[y]=createIterableMethod(y,!0,!1),r[y]=createIterableMethod(y,!1,!0),n[y]=createIterableMethod(y,!0,!0)}),[t,e,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,r){const e=r?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,g,y)=>g==="__v_isReactive"?!t:g==="__v_isReadonly"?t:g==="__v_raw"?n:Reflect.get(hasOwn(e,g)&&g in n?e:n,g,y)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,r,e,n,g){if(!isObject$2(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const y=g.get(t);if(y)return y;const i=getTargetType(t);if(i===0)return t;const k=new Proxy(t,i===2?n:e);return g.set(t,k),k}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const r=t&&t.__v_raw;return r?toRaw(r):t}function markRaw(t){return Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;class ComputedRefImpl{constructor(r,e,n,g){this.getter=r,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>r(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!g,this.__v_isReadonly=n}get value(){const r=toRaw(this);return(!r._cacheable||r.effect.dirty)&&hasChanged(r._value,r._value=r.effect.run())&&triggerRefValue(r,4),trackRefValue(r),r.effect._dirtyLevel>=2&&triggerRefValue(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function computed$1(t,r,e=!1){let n,g;const y=isFunction$3(t);return y?(n=t,g=NOOP):(n=t.get,g=t.set),new ComputedRefImpl(n,g,y||!g,e)}function trackRefValue(t){var r;shouldTrack&&activeEffect&&(t=toRaw(t),trackEffect(activeEffect,(r=t.dep)!=null?r:t.dep=createDep(()=>t.dep=void 0,t instanceof ComputedRefImpl?t:void 0)))}function triggerRefValue(t,r=4,e){t=toRaw(t);const n=t.dep;n&&triggerEffects(n,r)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,r){return isRef(t)?t:new RefImpl(t,r)}class RefImpl{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:toRaw(r),this._value=e?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const e=this.__v_isShallow||isShallow(r)||isReadonly(r);r=e?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:toReactive(r),triggerRefValue(this,4))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,r,e)=>unref(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const g=t[r];return isRef(g)&&!isRef(e)?(g.value=e,!0):Reflect.set(t,r,e,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const r=isArray$3(t)?new Array(t.length):{};for(const e in t)r[e]=propertyToRef(t,e);return r}class ObjectRefImpl{constructor(r,e,n){this._object=r,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,r,e){return isRef(t)?t:isFunction$3(t)?new GetterRefImpl(t):isObject$2(t)&&arguments.length>1?propertyToRef(t,r,e):ref(t)}function propertyToRef(t,r,e){const n=t[r];return isRef(n)?n:new ObjectRefImpl(t,r,e)}/**
* @vue/runtime-core v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(t,...r){pauseTracking();const e=stack.length?stack[stack.length-1].component:null,n=e&&e.appContext.config.warnHandler,g=getComponentTrace();if(n)callWithErrorHandling(n,e,11,[t+r.join(""),e&&e.proxy,g.map(({vnode:y})=>`at <${formatComponentName(e,y.type)}>`).join(`
`),g]);else{const y=[`[Vue warn]: ${t}`,...r];g.length&&y.push(`
`,...formatTrace(g)),console.warn(...y)}resetTracking()}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const r=[];for(;t;){const e=r[0];e&&e.vnode===t?e.recurseCount++:r.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return r}function formatTrace(t){const r=[];return t.forEach((e,n)=>{r.push(...n===0?[]:[`
`],...formatTraceEntry(e))}),r}function formatTraceEntry({vnode:t,recurseCount:r}){const e=r>0?`... (${r} recursive calls)`:"",n=t.component?t.component.parent==null:!1,g=` at <${formatComponentName(t.component,t.type,n)}`,y=">"+e;return t.props?[g,...formatProps(t.props),y]:[g+y]}function formatProps(t){const r=[],e=Object.keys(t);return e.slice(0,3).forEach(n=>{r.push(...formatProp(n,t[n]))}),e.length>3&&r.push(" ..."),r}function formatProp(t,r,e){return isString$2(r)?(r=JSON.stringify(r),e?r:[`${t}=${r}`]):typeof r=="number"||typeof r=="boolean"||r==null?e?r:[`${t}=${r}`]:isRef(r)?(r=formatProp(t,toRaw(r.value),!0),e?r:[`${t}=Ref<`,r,">"]):isFunction$3(r)?[`${t}=fn${r.name?`<${r.name}>`:""}`]:(r=toRaw(r),e?r:[`${t}=`,r])}function callWithErrorHandling(t,r,e,n){try{return n?t(...n):t()}catch(g){handleError(g,r,e)}}function callWithAsyncErrorHandling(t,r,e,n){if(isFunction$3(t)){const y=callWithErrorHandling(t,r,e,n);return y&&isPromise(y)&&y.catch(i=>{handleError(i,r,e)}),y}const g=[];for(let y=0;y<t.length;y++)g.push(callWithAsyncErrorHandling(t[y],r,e,n));return g}function handleError(t,r,e,n=!0){const g=r?r.vnode:null;if(r){let y=r.parent;const i=r.proxy,k=`https://vuejs.org/error-reference/#runtime-${e}`;for(;y;){const L=y.ec;if(L){for(let V=0;V<L.length;V++)if(L[V](t,i,k)===!1)return}y=y.parent}const $=r.appContext.config.errorHandler;if($){callWithErrorHandling($,null,10,[t,i,k]);return}}logError(t,e,g,n)}function logError(t,r,e,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const r=currentFlushPromise||resolvedPromise;return t?r.then(this?t.bind(this):t):r}function findInsertionIndex(t){let r=flushIndex+1,e=queue.length;for(;r<e;){const n=r+e>>>1,g=queue[n],y=getId(g);y<t||y===t&&g.pre?r=n+1:e=n}return r}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const r=queue.indexOf(t);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(t){isArray$3(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,r,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const n=queue[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;queue.splice(e,1),e--,n()}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)].sort((e,n)=>getId(e)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,r)=>{const e=getId(t)-getId(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let g=e;const y=r.startsWith("update:"),i=y&&r.slice(7);if(i&&i in n){const V=`${i==="modelValue"?"model":i}Modifiers`,{number:z,trim:re}=n[V]||EMPTY_OBJ;re&&(g=e.map(ie=>isString$2(ie)?ie.trim():ie)),z&&(g=e.map(looseToNumber))}let k,$=n[k=toHandlerKey(r)]||n[k=toHandlerKey(camelize(r))];!$&&y&&($=n[k=toHandlerKey(hyphenate(r))]),$&&callWithAsyncErrorHandling($,t,6,g);const L=n[k+"Once"];if(L){if(!t.emitted)t.emitted={};else if(t.emitted[k])return;t.emitted[k]=!0,callWithAsyncErrorHandling(L,t,6,g)}}function normalizeEmitsOptions(t,r,e=!1){const n=r.emitsCache,g=n.get(t);if(g!==void 0)return g;const y=t.emits;let i={},k=!1;if(!isFunction$3(t)){const $=L=>{const V=normalizeEmitsOptions(L,r,!0);V&&(k=!0,extend$1(i,V))};!e&&r.mixins.length&&r.mixins.forEach($),t.extends&&$(t.extends),t.mixins&&t.mixins.forEach($)}return!y&&!k?(isObject$2(t)&&n.set(t,null),null):(isArray$3(y)?y.forEach($=>i[$]=null):extend$1(i,y),isObject$2(t)&&n.set(t,i),i)}function isEmitListener(t,r){return!t||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(t,r[0].toLowerCase()+r.slice(1))||hasOwn(t,hyphenate(r))||hasOwn(t,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const r=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,r}function withCtx(t,r=currentRenderingInstance,e){if(!r||t._n)return t;const n=(...g)=>{n._d&&setBlockTracking(-1);const y=setCurrentRenderingInstance(r);let i;try{i=t(...g)}finally{setCurrentRenderingInstance(y),n._d&&setBlockTracking(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:r,vnode:e,proxy:n,withProxy:g,props:y,propsOptions:[i],slots:k,attrs:$,emit:L,render:V,renderCache:z,data:re,setupState:ie,ctx:ue,inheritAttrs:le}=t;let oe,ae;const Ue=setCurrentRenderingInstance(t);try{if(e.shapeFlag&4){const _e=g||n,Ve=_e;oe=normalizeVNode(V.call(Ve,_e,z,y,ie,re,ue)),ae=$}else{const _e=r;oe=normalizeVNode(_e.length>1?_e(y,{attrs:$,slots:k,emit:L}):_e(y,null)),ae=r.props?$:getFunctionalFallthrough($)}}catch(_e){blockStack.length=0,handleError(_e,t,1),oe=createVNode(Comment)}let de=oe;if(ae&&le!==!1){const _e=Object.keys(ae),{shapeFlag:Ve}=de;_e.length&&Ve&7&&(i&&_e.some(isModelListener)&&(ae=filterModelListeners(ae,i)),de=cloneVNode(de,ae))}return e.dirs&&(de=cloneVNode(de),de.dirs=de.dirs?de.dirs.concat(e.dirs):e.dirs),e.transition&&(de.transition=e.transition),oe=de,setCurrentRenderingInstance(Ue),oe}const getFunctionalFallthrough=t=>{let r;for(const e in t)(e==="class"||e==="style"||isOn(e))&&((r||(r={}))[e]=t[e]);return r},filterModelListeners=(t,r)=>{const e={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function shouldUpdateComponent(t,r,e){const{props:n,children:g,component:y}=t,{props:i,children:k,patchFlag:$}=r,L=y.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&$>=0){if($&1024)return!0;if($&16)return n?hasPropsChanged(n,i,L):!!i;if($&8){const V=r.dynamicProps;for(let z=0;z<V.length;z++){const re=V[z];if(i[re]!==n[re]&&!isEmitListener(L,re))return!0}}}else return(g||k)&&(!k||!k.$stable)?!0:n===i?!1:n?i?hasPropsChanged(n,i,L):!0:!!i;return!1}function hasPropsChanged(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let g=0;g<n.length;g++){const y=n[g];if(r[y]!==t[y]&&!isEmitListener(e,y))return!0}return!1}function updateHOCHostEl({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,r){return resolveAsset(COMPONENTS,t,!0,r)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$2(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,r,e=!0,n=!1){const g=currentRenderingInstance||currentInstance;if(g){const y=g.type;if(t===COMPONENTS){const k=getComponentName(y,!1);if(k&&(k===r||k===camelize(r)||k===capitalize$1(camelize(r))))return y}const i=resolve(g[t]||y[t],r)||resolve(g.appContext[t],r);return!i&&n?y:i}}function resolve(t,r){return t&&(t[r]||t[camelize(r)]||t[capitalize$1(camelize(r))])}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,r){r&&r.pendingBranch?isArray$3(t)?r.effects.push(...t):r.effects.push(t):queuePostFlushCb(t)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,r){return doWatch(t,null,r)}const INITIAL_WATCHER_VALUE={};function watch(t,r,e){return doWatch(t,r,e)}function doWatch(t,r,{immediate:e,deep:n,flush:g,once:y,onTrack:i,onTrigger:k}=EMPTY_OBJ){if(r&&y){const $e=r;r=(...Lt)=>{$e(...Lt),Ve()}}const $=currentInstance,L=$e=>n===!0?$e:traverse($e,n===!1?1:void 0);let V,z=!1,re=!1;if(isRef(t)?(V=()=>t.value,z=isShallow(t)):isReactive(t)?(V=()=>L(t),z=!0):isArray$3(t)?(re=!0,z=t.some($e=>isReactive($e)||isShallow($e)),V=()=>t.map($e=>{if(isRef($e))return $e.value;if(isReactive($e))return L($e);if(isFunction$3($e))return callWithErrorHandling($e,$,2)})):isFunction$3(t)?r?V=()=>callWithErrorHandling(t,$,2):V=()=>(ie&&ie(),callWithAsyncErrorHandling(t,$,3,[ue])):V=NOOP,r&&n){const $e=V;V=()=>traverse($e())}let ie,ue=$e=>{ie=de.onStop=()=>{callWithErrorHandling($e,$,4),ie=de.onStop=void 0}},le;if(isInSSRComponentSetup)if(ue=NOOP,r?e&&callWithAsyncErrorHandling(r,$,3,[V(),re?[]:void 0,ue]):V(),g==="sync"){const $e=useSSRContext();le=$e.__watcherHandles||($e.__watcherHandles=[])}else return NOOP;let oe=re?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const ae=()=>{if(!(!de.active||!de.dirty))if(r){const $e=de.run();(n||z||(re?$e.some((Lt,jt)=>hasChanged(Lt,oe[jt])):hasChanged($e,oe)))&&(ie&&ie(),callWithAsyncErrorHandling(r,$,3,[$e,oe===INITIAL_WATCHER_VALUE?void 0:re&&oe[0]===INITIAL_WATCHER_VALUE?[]:oe,ue]),oe=$e)}else de.run()};ae.allowRecurse=!!r;let Ue;g==="sync"?Ue=ae:g==="post"?Ue=()=>queuePostRenderEffect(ae,$&&$.suspense):(ae.pre=!0,$&&(ae.id=$.uid),Ue=()=>queueJob(ae));const de=new ReactiveEffect(V,NOOP,Ue),_e=getCurrentScope(),Ve=()=>{de.stop(),_e&&remove(_e.effects,de)};return r?e?ae():oe=de.run():g==="post"?queuePostRenderEffect(de.run.bind(de),$&&$.suspense):de.run(),le&&le.push(Ve),Ve}function instanceWatch(t,r,e){const n=this.proxy,g=isString$2(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let y;isFunction$3(r)?y=r:(y=r.handler,e=r);const i=setCurrentInstance(this),k=doWatch(g,y.bind(n),e);return i(),k}function createPathGetter(t,r){const e=r.split(".");return()=>{let n=t;for(let g=0;g<e.length&&n;g++)n=n[e[g]];return n}}function traverse(t,r,e=0,n){if(!isObject$2(t)||t.__v_skip)return t;if(r&&r>0){if(e>=r)return t;e++}if(n=n||new Set,n.has(t))return t;if(n.add(t),isRef(t))traverse(t.value,r,e,n);else if(isArray$3(t))for(let g=0;g<t.length;g++)traverse(t[g],r,e,n);else if(isSet$2(t)||isMap$2(t))t.forEach(g=>{traverse(g,r,e,n)});else if(isPlainObject$2(t))for(const g in t)traverse(t[g],r,e,n);return t}function withDirectives(t,r){if(currentRenderingInstance===null)return t;const e=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,n=t.dirs||(t.dirs=[]);for(let g=0;g<r.length;g++){let[y,i,k,$=EMPTY_OBJ]=r[g];y&&(isFunction$3(y)&&(y={mounted:y,updated:y}),y.deep&&traverse(i),n.push({dir:y,instance:e,value:i,oldValue:void 0,arg:k,modifiers:$}))}return t}function invokeDirectiveHook(t,r,e,n){const g=t.dirs,y=r&&r.dirs;for(let i=0;i<g.length;i++){const k=g[i];y&&(k.oldValue=y[i].value);let $=k.dir[n];$&&(pauseTracking(),callWithAsyncErrorHandling($,e,8,[t.el,k,t,r]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();return()=>{const g=r.default&&getTransitionRawChildren(r.default(),!0);if(!g||!g.length)return;let y=g[0];if(g.length>1){for(const re of g)if(re.type!==Comment){y=re;break}}const i=toRaw(t),{mode:k}=i;if(n.isLeaving)return emptyPlaceholder(y);const $=getKeepAliveChild(y);if(!$)return emptyPlaceholder(y);const L=resolveTransitionHooks($,i,n,e);setTransitionHooks($,L);const V=e.subTree,z=V&&getKeepAliveChild(V);if(z&&z.type!==Comment&&!isSameVNodeType($,z)){const re=resolveTransitionHooks(z,i,n,e);if(setTransitionHooks(z,re),k==="out-in")return n.isLeaving=!0,re.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},emptyPlaceholder(y);k==="in-out"&&$.type!==Comment&&(re.delayLeave=(ie,ue,le)=>{const oe=getLeavingNodesForType(n,z);oe[String(z.key)]=z,ie[leaveCbKey]=()=>{ue(),ie[leaveCbKey]=void 0,delete L.delayedLeave},L.delayedLeave=le})}return y}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function resolveTransitionHooks(t,r,e,n){const{appear:g,mode:y,persisted:i=!1,onBeforeEnter:k,onEnter:$,onAfterEnter:L,onEnterCancelled:V,onBeforeLeave:z,onLeave:re,onAfterLeave:ie,onLeaveCancelled:ue,onBeforeAppear:le,onAppear:oe,onAfterAppear:ae,onAppearCancelled:Ue}=r,de=String(t.key),_e=getLeavingNodesForType(e,t),Ve=(jt,Et)=>{jt&&callWithAsyncErrorHandling(jt,n,9,Et)},$e=(jt,Et)=>{const ir=Et[1];Ve(jt,Et),isArray$3(jt)?jt.every(ur=>ur.length<=1)&&ir():jt.length<=1&&ir()},Lt={mode:y,persisted:i,beforeEnter(jt){let Et=k;if(!e.isMounted)if(g)Et=le||k;else return;jt[leaveCbKey]&&jt[leaveCbKey](!0);const ir=_e[de];ir&&isSameVNodeType(t,ir)&&ir.el[leaveCbKey]&&ir.el[leaveCbKey](),Ve(Et,[jt])},enter(jt){let Et=$,ir=L,ur=V;if(!e.isMounted)if(g)Et=oe||$,ir=ae||L,ur=Ue||V;else return;let Dt=!1;const lr=jt[enterCbKey$1]=sr=>{Dt||(Dt=!0,sr?Ve(ur,[jt]):Ve(ir,[jt]),Lt.delayedLeave&&Lt.delayedLeave(),jt[enterCbKey$1]=void 0)};Et?$e(Et,[jt,lr]):lr()},leave(jt,Et){const ir=String(t.key);if(jt[enterCbKey$1]&&jt[enterCbKey$1](!0),e.isUnmounting)return Et();Ve(z,[jt]);let ur=!1;const Dt=jt[leaveCbKey]=lr=>{ur||(ur=!0,Et(),lr?Ve(ue,[jt]):Ve(ie,[jt]),jt[leaveCbKey]=void 0,_e[ir]===t&&delete _e[ir])};_e[ir]=t,re?$e(re,[jt,Dt]):Dt()},clone(jt){return resolveTransitionHooks(jt,r,e,n)}};return Lt}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,r){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function getTransitionRawChildren(t,r=!1,e){let n=[],g=0;for(let y=0;y<t.length;y++){let i=t[y];const k=e==null?i.key:String(e)+String(i.key!=null?i.key:y);i.type===Fragment?(i.patchFlag&128&&g++,n=n.concat(getTransitionRawChildren(i.children,r,k))):(r||i.type!==Comment)&&n.push(k!=null?cloneVNode(i,{key:k}):i)}if(g>1)for(let y=0;y<n.length;y++)n[y].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,r){return isFunction$3(t)?(()=>extend$1({name:t.name},r,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,r){registerKeepAliveHook(t,"a",r)}function onDeactivated(t,r){registerKeepAliveHook(t,"da",r)}function registerKeepAliveHook(t,r,e=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let g=e;for(;g;){if(g.isDeactivated)return;g=g.parent}return t()});if(injectHook(r,n,e),e){let g=e.parent;for(;g&&g.parent;)isKeepAlive(g.parent.vnode)&&injectToKeepAliveRoot(n,r,e,g),g=g.parent}}function injectToKeepAliveRoot(t,r,e,n){const g=injectHook(r,t,n,!0);onUnmounted(()=>{remove(n[r],g)},e)}function injectHook(t,r,e=currentInstance,n=!1){if(e){const g=e[t]||(e[t]=[]),y=r.__weh||(r.__weh=(...i)=>{if(e.isUnmounted)return;pauseTracking();const k=setCurrentInstance(e),$=callWithAsyncErrorHandling(r,e,t,i);return k(),resetTracking(),$});return n?g.unshift(y):g.push(y),y}}const createHook=t=>(r,e=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>r(...n),e),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,r=currentInstance){injectHook("ec",t,r)}function renderList(t,r,e,n){let g;const y=e&&e[n];if(isArray$3(t)||isString$2(t)){g=new Array(t.length);for(let i=0,k=t.length;i<k;i++)g[i]=r(t[i],i,void 0,y&&y[i])}else if(typeof t=="number"){g=new Array(t);for(let i=0;i<t;i++)g[i]=r(i+1,i,void 0,y&&y[i])}else if(isObject$2(t))if(t[Symbol.iterator])g=Array.from(t,(i,k)=>r(i,k,void 0,y&&y[k]));else{const i=Object.keys(t);g=new Array(i.length);for(let k=0,$=i.length;k<$;k++){const L=i[k];g[k]=r(t[L],L,k,y&&y[k])}}else g=[];return e&&(e[n]=g),g}function createSlots(t,r){for(let e=0;e<r.length;e++){const n=r[e];if(isArray$3(n))for(let g=0;g<n.length;g++)t[n[g].name]=n[g].fn;else n&&(t[n.name]=n.key?(...g)=>{const y=n.fn(...g);return y&&(y.key=n.key),y}:n.fn)}return t}function renderSlot(t,r,e={},n,g){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return r!=="default"&&(e.name=r),createVNode("slot",e,n&&n());let y=t[r];y&&y._c&&(y._d=!1),openBlock();const i=y&&ensureValidVNode(y(e)),k=createBlock(Fragment,{key:e.key||i&&i.key||`_${r}`},i||(n?n():[]),i&&t._===1?64:-2);return!g&&k.scopeId&&(k.slotScopeIds=[k.scopeId+"-s"]),y&&y._c&&(y._d=!0),k}function ensureValidVNode(t){return t.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?t:null}function toHandlers(t,r){const e={};for(const n in t)e[r&&/[A-Z]/.test(n)?`on:${n}`:toHandlerKey(n)]=t[n];return e}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,r)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,r),PublicInstanceProxyHandlers={get({_:t},r){const{ctx:e,setupState:n,data:g,props:y,accessCache:i,type:k,appContext:$}=t;let L;if(r[0]!=="$"){const ie=i[r];if(ie!==void 0)switch(ie){case 1:return n[r];case 2:return g[r];case 4:return e[r];case 3:return y[r]}else{if(hasSetupBinding(n,r))return i[r]=1,n[r];if(g!==EMPTY_OBJ&&hasOwn(g,r))return i[r]=2,g[r];if((L=t.propsOptions[0])&&hasOwn(L,r))return i[r]=3,y[r];if(e!==EMPTY_OBJ&&hasOwn(e,r))return i[r]=4,e[r];shouldCacheAccess&&(i[r]=0)}}const V=publicPropertiesMap[r];let z,re;if(V)return r==="$attrs"&&track(t,"get",r),V(t);if((z=k.__cssModules)&&(z=z[r]))return z;if(e!==EMPTY_OBJ&&hasOwn(e,r))return i[r]=4,e[r];if(re=$.config.globalProperties,hasOwn(re,r))return re[r]},set({_:t},r,e){const{data:n,setupState:g,ctx:y}=t;return hasSetupBinding(g,r)?(g[r]=e,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=e,!0):hasOwn(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(y[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:g,propsOptions:y}},i){let k;return!!e[i]||t!==EMPTY_OBJ&&hasOwn(t,i)||hasSetupBinding(r,i)||(k=y[0])&&hasOwn(k,i)||hasOwn(n,i)||hasOwn(publicPropertiesMap,i)||hasOwn(g.config.globalProperties,i)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:hasOwn(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function normalizePropsOrEmits(t){return isArray$3(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const r=resolveMergedOptions(t),e=t.proxy,n=t.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,t,"bc");const{data:g,computed:y,methods:i,watch:k,provide:$,inject:L,created:V,beforeMount:z,mounted:re,beforeUpdate:ie,updated:ue,activated:le,deactivated:oe,beforeDestroy:ae,beforeUnmount:Ue,destroyed:de,unmounted:_e,render:Ve,renderTracked:$e,renderTriggered:Lt,errorCaptured:jt,serverPrefetch:Et,expose:ir,inheritAttrs:ur,components:Dt,directives:lr,filters:sr}=r;if(L&&resolveInjections(L,n,null),i)for(const or in i){const hr=i[or];isFunction$3(hr)&&(n[or]=hr.bind(e))}if(g){const or=g.call(e,e);isObject$2(or)&&(t.data=reactive(or))}if(shouldCacheAccess=!0,y)for(const or in y){const hr=y[or],pr=isFunction$3(hr)?hr.bind(e,e):isFunction$3(hr.get)?hr.get.bind(e,e):NOOP,Tr=!isFunction$3(hr)&&isFunction$3(hr.set)?hr.set.bind(e):NOOP,Pr=computed({get:pr,set:Tr});Object.defineProperty(n,or,{enumerable:!0,configurable:!0,get:()=>Pr.value,set:_r=>Pr.value=_r})}if(k)for(const or in k)createWatcher(k[or],n,e,or);if($){const or=isFunction$3($)?$.call(e):$;Reflect.ownKeys(or).forEach(hr=>{provide(hr,or[hr])})}V&&callHook$1(V,t,"c");function cr(or,hr){isArray$3(hr)?hr.forEach(pr=>or(pr.bind(e))):hr&&or(hr.bind(e))}if(cr(onBeforeMount,z),cr(onMounted,re),cr(onBeforeUpdate,ie),cr(onUpdated,ue),cr(onActivated,le),cr(onDeactivated,oe),cr(onErrorCaptured,jt),cr(onRenderTracked,$e),cr(onRenderTriggered,Lt),cr(onBeforeUnmount,Ue),cr(onUnmounted,_e),cr(onServerPrefetch,Et),isArray$3(ir))if(ir.length){const or=t.exposed||(t.exposed={});ir.forEach(hr=>{Object.defineProperty(or,hr,{get:()=>e[hr],set:pr=>e[hr]=pr})})}else t.exposed||(t.exposed={});Ve&&t.render===NOOP&&(t.render=Ve),ur!=null&&(t.inheritAttrs=ur),Dt&&(t.components=Dt),lr&&(t.directives=lr)}function resolveInjections(t,r,e=NOOP){isArray$3(t)&&(t=normalizeInject(t));for(const n in t){const g=t[n];let y;isObject$2(g)?"default"in g?y=inject(g.from||n,g.default,!0):y=inject(g.from||n):y=inject(g),isRef(y)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>y.value,set:i=>y.value=i}):r[n]=y}}function callHook$1(t,r,e){callWithAsyncErrorHandling(isArray$3(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function createWatcher(t,r,e,n){const g=n.includes(".")?createPathGetter(e,n):()=>e[n];if(isString$2(t)){const y=r[t];isFunction$3(y)&&watch(g,y)}else if(isFunction$3(t))watch(g,t.bind(e));else if(isObject$2(t))if(isArray$3(t))t.forEach(y=>createWatcher(y,r,e,n));else{const y=isFunction$3(t.handler)?t.handler.bind(e):r[t.handler];isFunction$3(y)&&watch(g,y,t)}}function resolveMergedOptions(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:g,optionsCache:y,config:{optionMergeStrategies:i}}=t.appContext,k=y.get(r);let $;return k?$=k:!g.length&&!e&&!n?$=r:($={},g.length&&g.forEach(L=>mergeOptions$1($,L,i,!0)),mergeOptions$1($,r,i)),isObject$2(r)&&y.set(r,$),$}function mergeOptions$1(t,r,e,n=!1){const{mixins:g,extends:y}=r;y&&mergeOptions$1(t,y,e,!0),g&&g.forEach(i=>mergeOptions$1(t,i,e,!0));for(const i in r)if(!(n&&i==="expose")){const k=internalOptionMergeStrats[i]||e&&e[i];t[i]=k?k(t[i],r[i]):r[i]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,r){return r?t?function(){return extend$1(isFunction$3(t)?t.call(this,this):t,isFunction$3(r)?r.call(this,this):r)}:r:t}function mergeInject(t,r){return mergeObjectOptions(normalizeInject(t),normalizeInject(r))}function normalizeInject(t){if(isArray$3(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function mergeAsArray(t,r){return t?[...new Set([].concat(t,r))]:r}function mergeObjectOptions(t,r){return t?extend$1(Object.create(null),t,r):r}function mergeEmitsOrPropsOptions(t,r){return t?isArray$3(t)&&isArray$3(r)?[...new Set([...t,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(t,r){if(!t)return r;if(!r)return t;const e=extend$1(Object.create(null),t);for(const n in r)e[n]=mergeAsArray(t[n],r[n]);return e}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,r){return function(n,g=null){isFunction$3(n)||(n=extend$1({},n)),g!=null&&!isObject$2(g)&&(g=null);const y=createAppContext(),i=new WeakSet;let k=!1;const $=y.app={_uid:uid$1++,_component:n,_props:g,_container:null,_context:y,_instance:null,version,get config(){return y.config},set config(L){},use(L,...V){return i.has(L)||(L&&isFunction$3(L.install)?(i.add(L),L.install($,...V)):isFunction$3(L)&&(i.add(L),L($,...V))),$},mixin(L){return y.mixins.includes(L)||y.mixins.push(L),$},component(L,V){return V?(y.components[L]=V,$):y.components[L]},directive(L,V){return V?(y.directives[L]=V,$):y.directives[L]},mount(L,V,z){if(!k){const re=createVNode(n,g);return re.appContext=y,z===!0?z="svg":z===!1&&(z=void 0),V&&r?r(re,L):t(re,L,z),k=!0,$._container=L,L.__vue_app__=$,getExposeProxy(re.component)||re.component.proxy}},unmount(){k&&(t(null,$._container),delete $._container.__vue_app__)},provide(L,V){return y.provides[L]=V,$},runWithContext(L){const V=currentApp;currentApp=$;try{return L()}finally{currentApp=V}}};return $}}let currentApp=null;function provide(t,r){if(currentInstance){let e=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===e&&(e=currentInstance.provides=Object.create(n)),e[t]=r}}function inject(t,r,e=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const g=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(g&&t in g)return g[t];if(arguments.length>1)return e&&isFunction$3(r)?r.call(n&&n.proxy):r}}function initProps(t,r,e,n=!1){const g={},y={};def(y,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,r,g,y);for(const i in t.propsOptions[0])i in g||(g[i]=void 0);e?t.props=n?g:shallowReactive(g):t.type.props?t.props=g:t.props=y,t.attrs=y}function updateProps(t,r,e,n){const{props:g,attrs:y,vnode:{patchFlag:i}}=t,k=toRaw(g),[$]=t.propsOptions;let L=!1;if((n||i>0)&&!(i&16)){if(i&8){const V=t.vnode.dynamicProps;for(let z=0;z<V.length;z++){let re=V[z];if(isEmitListener(t.emitsOptions,re))continue;const ie=r[re];if($)if(hasOwn(y,re))ie!==y[re]&&(y[re]=ie,L=!0);else{const ue=camelize(re);g[ue]=resolvePropValue($,k,ue,ie,t,!1)}else ie!==y[re]&&(y[re]=ie,L=!0)}}}else{setFullProps(t,r,g,y)&&(L=!0);let V;for(const z in k)(!r||!hasOwn(r,z)&&((V=hyphenate(z))===z||!hasOwn(r,V)))&&($?e&&(e[z]!==void 0||e[V]!==void 0)&&(g[z]=resolvePropValue($,k,z,void 0,t,!0)):delete g[z]);if(y!==k)for(const z in y)(!r||!hasOwn(r,z))&&(delete y[z],L=!0)}L&&trigger(t,"set","$attrs")}function setFullProps(t,r,e,n){const[g,y]=t.propsOptions;let i=!1,k;if(r)for(let $ in r){if(isReservedProp($))continue;const L=r[$];let V;g&&hasOwn(g,V=camelize($))?!y||!y.includes(V)?e[V]=L:(k||(k={}))[V]=L:isEmitListener(t.emitsOptions,$)||(!($ in n)||L!==n[$])&&(n[$]=L,i=!0)}if(y){const $=toRaw(e),L=k||EMPTY_OBJ;for(let V=0;V<y.length;V++){const z=y[V];e[z]=resolvePropValue(g,$,z,L[z],t,!hasOwn(L,z))}}return i}function resolvePropValue(t,r,e,n,g,y){const i=t[e];if(i!=null){const k=hasOwn(i,"default");if(k&&n===void 0){const $=i.default;if(i.type!==Function&&!i.skipFactory&&isFunction$3($)){const{propsDefaults:L}=g;if(e in L)n=L[e];else{const V=setCurrentInstance(g);n=L[e]=$.call(null,r),V()}}else n=$}i[0]&&(y&&!k?n=!1:i[1]&&(n===""||n===hyphenate(e))&&(n=!0))}return n}function normalizePropsOptions(t,r,e=!1){const n=r.propsCache,g=n.get(t);if(g)return g;const y=t.props,i={},k=[];let $=!1;if(!isFunction$3(t)){const V=z=>{$=!0;const[re,ie]=normalizePropsOptions(z,r,!0);extend$1(i,re),ie&&k.push(...ie)};!e&&r.mixins.length&&r.mixins.forEach(V),t.extends&&V(t.extends),t.mixins&&t.mixins.forEach(V)}if(!y&&!$)return isObject$2(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$3(y))for(let V=0;V<y.length;V++){const z=camelize(y[V]);validatePropName(z)&&(i[z]=EMPTY_OBJ)}else if(y)for(const V in y){const z=camelize(V);if(validatePropName(z)){const re=y[V],ie=i[z]=isArray$3(re)||isFunction$3(re)?{type:re}:extend$1({},re);if(ie){const ue=getTypeIndex(Boolean,ie.type),le=getTypeIndex(String,ie.type);ie[0]=ue>-1,ie[1]=le<0||ue<le,(ue>-1||hasOwn(ie,"default"))&&k.push(z)}}}const L=[i,k];return isObject$2(t)&&n.set(t,L),L}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}function getType(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function isSameType(t,r){return getType(t)===getType(r)}function getTypeIndex(t,r){return isArray$3(r)?r.findIndex(e=>isSameType(e,t)):isFunction$3(r)&&isSameType(r,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$3(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,r,e)=>{if(r._n)return r;const n=withCtx((...g)=>normalizeSlotValue(r(...g)),e);return n._c=!1,n},normalizeObjectSlots=(t,r,e)=>{const n=t._ctx;for(const g in t){if(isInternalKey(g))continue;const y=t[g];if(isFunction$3(y))r[g]=normalizeSlot(g,y,n);else if(y!=null){const i=normalizeSlotValue(y);r[g]=()=>i}}},normalizeVNodeSlots=(t,r)=>{const e=normalizeSlotValue(r);t.slots.default=()=>e},initSlots=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=toRaw(r),def(r,"_",e)):normalizeObjectSlots(r,t.slots={})}else t.slots={},r&&normalizeVNodeSlots(t,r);def(t.slots,InternalObjectKey,1)},updateSlots=(t,r,e)=>{const{vnode:n,slots:g}=t;let y=!0,i=EMPTY_OBJ;if(n.shapeFlag&32){const k=r._;k?e&&k===1?y=!1:(extend$1(g,r),!e&&k===1&&delete g._):(y=!r.$stable,normalizeObjectSlots(r,g)),i=r}else r&&(normalizeVNodeSlots(t,r),i={default:1});if(y)for(const k in g)!isInternalKey(k)&&i[k]==null&&delete g[k]};function setRef(t,r,e,n,g=!1){if(isArray$3(t)){t.forEach((re,ie)=>setRef(re,r&&(isArray$3(r)?r[ie]:r),e,n,g));return}if(isAsyncWrapper(n)&&!g)return;const y=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,i=g?null:y,{i:k,r:$}=t,L=r&&r.r,V=k.refs===EMPTY_OBJ?k.refs={}:k.refs,z=k.setupState;if(L!=null&&L!==$&&(isString$2(L)?(V[L]=null,hasOwn(z,L)&&(z[L]=null)):isRef(L)&&(L.value=null)),isFunction$3($))callWithErrorHandling($,k,12,[i,V]);else{const re=isString$2($),ie=isRef($);if(re||ie){const ue=()=>{if(t.f){const le=re?hasOwn(z,$)?z[$]:V[$]:$.value;g?isArray$3(le)&&remove(le,y):isArray$3(le)?le.includes(y)||le.push(y):re?(V[$]=[y],hasOwn(z,$)&&(z[$]=V[$])):($.value=[y],t.k&&(V[t.k]=$.value))}else re?(V[$]=i,hasOwn(z,$)&&(z[$]=i)):ie&&($.value=i,t.k&&(V[t.k]=i))};i?(ue.id=-1,queuePostRenderEffect(ue,e)):ue()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,r){const e=getGlobalThis();e.__VUE__=!0;const{insert:n,remove:g,patchProp:y,createElement:i,createText:k,createComment:$,setText:L,setElementText:V,parentNode:z,nextSibling:re,setScopeId:ie=NOOP,insertStaticContent:ue}=t,le=(fr,Sr,Br,$r=null,Lr=null,Gr=null,qr=void 0,Yr=null,bn=!!Sr.dynamicChildren)=>{if(fr===Sr)return;fr&&!isSameVNodeType(fr,Sr)&&($r=xr(fr),_r(fr,Lr,Gr,!0),fr=null),Sr.patchFlag===-2&&(bn=!1,Sr.dynamicChildren=null);const{type:wn,ref:Xr,shapeFlag:qn}=Sr;switch(wn){case Text:oe(fr,Sr,Br,$r);break;case Comment:ae(fr,Sr,Br,$r);break;case Static:fr==null&&Ue(Sr,Br,$r,qr);break;case Fragment:Dt(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn);break;default:qn&1?Ve(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn):qn&6?lr(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn):(qn&64||qn&128)&&wn.process(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn,Or)}Xr!=null&&Lr&&setRef(Xr,fr&&fr.ref,Gr,Sr||fr,!Sr)},oe=(fr,Sr,Br,$r)=>{if(fr==null)n(Sr.el=k(Sr.children),Br,$r);else{const Lr=Sr.el=fr.el;Sr.children!==fr.children&&L(Lr,Sr.children)}},ae=(fr,Sr,Br,$r)=>{fr==null?n(Sr.el=$(Sr.children||""),Br,$r):Sr.el=fr.el},Ue=(fr,Sr,Br,$r)=>{[fr.el,fr.anchor]=ue(fr.children,Sr,Br,$r,fr.el,fr.anchor)},de=({el:fr,anchor:Sr},Br,$r)=>{let Lr;for(;fr&&fr!==Sr;)Lr=re(fr),n(fr,Br,$r),fr=Lr;n(Sr,Br,$r)},_e=({el:fr,anchor:Sr})=>{let Br;for(;fr&&fr!==Sr;)Br=re(fr),g(fr),fr=Br;g(Sr)},Ve=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn)=>{Sr.type==="svg"?qr="svg":Sr.type==="math"&&(qr="mathml"),fr==null?$e(Sr,Br,$r,Lr,Gr,qr,Yr,bn):Et(fr,Sr,Lr,Gr,qr,Yr,bn)},$e=(fr,Sr,Br,$r,Lr,Gr,qr,Yr)=>{let bn,wn;const{props:Xr,shapeFlag:qn,transition:Zr,dirs:Nn}=fr;if(bn=fr.el=i(fr.type,Gr,Xr&&Xr.is,Xr),qn&8?V(bn,fr.children):qn&16&&jt(fr.children,bn,null,$r,Lr,resolveChildrenNamespace(fr,Gr),qr,Yr),Nn&&invokeDirectiveHook(fr,null,$r,"created"),Lt(bn,fr,fr.scopeId,qr,$r),Xr){for(const Mn in Xr)Mn!=="value"&&!isReservedProp(Mn)&&y(bn,Mn,null,Xr[Mn],Gr,fr.children,$r,Lr,Er);"value"in Xr&&y(bn,"value",null,Xr.value,Gr),(wn=Xr.onVnodeBeforeMount)&&invokeVNodeHook(wn,$r,fr)}Nn&&invokeDirectiveHook(fr,null,$r,"beforeMount");const Qr=needTransition(Lr,Zr);Qr&&Zr.beforeEnter(bn),n(bn,Sr,Br),((wn=Xr&&Xr.onVnodeMounted)||Qr||Nn)&&queuePostRenderEffect(()=>{wn&&invokeVNodeHook(wn,$r,fr),Qr&&Zr.enter(bn),Nn&&invokeDirectiveHook(fr,null,$r,"mounted")},Lr)},Lt=(fr,Sr,Br,$r,Lr)=>{if(Br&&ie(fr,Br),$r)for(let Gr=0;Gr<$r.length;Gr++)ie(fr,$r[Gr]);if(Lr){let Gr=Lr.subTree;if(Sr===Gr){const qr=Lr.vnode;Lt(fr,qr,qr.scopeId,qr.slotScopeIds,Lr.parent)}}},jt=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn=0)=>{for(let wn=bn;wn<fr.length;wn++){const Xr=fr[wn]=Yr?cloneIfMounted(fr[wn]):normalizeVNode(fr[wn]);le(null,Xr,Sr,Br,$r,Lr,Gr,qr,Yr)}},Et=(fr,Sr,Br,$r,Lr,Gr,qr)=>{const Yr=Sr.el=fr.el;let{patchFlag:bn,dynamicChildren:wn,dirs:Xr}=Sr;bn|=fr.patchFlag&16;const qn=fr.props||EMPTY_OBJ,Zr=Sr.props||EMPTY_OBJ;let Nn;if(Br&&toggleRecurse(Br,!1),(Nn=Zr.onVnodeBeforeUpdate)&&invokeVNodeHook(Nn,Br,Sr,fr),Xr&&invokeDirectiveHook(Sr,fr,Br,"beforeUpdate"),Br&&toggleRecurse(Br,!0),wn?ir(fr.dynamicChildren,wn,Yr,Br,$r,resolveChildrenNamespace(Sr,Lr),Gr):qr||hr(fr,Sr,Yr,null,Br,$r,resolveChildrenNamespace(Sr,Lr),Gr,!1),bn>0){if(bn&16)ur(Yr,Sr,qn,Zr,Br,$r,Lr);else if(bn&2&&qn.class!==Zr.class&&y(Yr,"class",null,Zr.class,Lr),bn&4&&y(Yr,"style",qn.style,Zr.style,Lr),bn&8){const Qr=Sr.dynamicProps;for(let Mn=0;Mn<Qr.length;Mn++){const Ln=Qr[Mn],xn=qn[Ln],Pn=Zr[Ln];(Pn!==xn||Ln==="value")&&y(Yr,Ln,xn,Pn,Lr,fr.children,Br,$r,Er)}}bn&1&&fr.children!==Sr.children&&V(Yr,Sr.children)}else!qr&&wn==null&&ur(Yr,Sr,qn,Zr,Br,$r,Lr);((Nn=Zr.onVnodeUpdated)||Xr)&&queuePostRenderEffect(()=>{Nn&&invokeVNodeHook(Nn,Br,Sr,fr),Xr&&invokeDirectiveHook(Sr,fr,Br,"updated")},$r)},ir=(fr,Sr,Br,$r,Lr,Gr,qr)=>{for(let Yr=0;Yr<Sr.length;Yr++){const bn=fr[Yr],wn=Sr[Yr],Xr=bn.el&&(bn.type===Fragment||!isSameVNodeType(bn,wn)||bn.shapeFlag&70)?z(bn.el):Br;le(bn,wn,Xr,null,$r,Lr,Gr,qr,!0)}},ur=(fr,Sr,Br,$r,Lr,Gr,qr)=>{if(Br!==$r){if(Br!==EMPTY_OBJ)for(const Yr in Br)!isReservedProp(Yr)&&!(Yr in $r)&&y(fr,Yr,Br[Yr],null,qr,Sr.children,Lr,Gr,Er);for(const Yr in $r){if(isReservedProp(Yr))continue;const bn=$r[Yr],wn=Br[Yr];bn!==wn&&Yr!=="value"&&y(fr,Yr,wn,bn,qr,Sr.children,Lr,Gr,Er)}"value"in $r&&y(fr,"value",Br.value,$r.value,qr)}},Dt=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn)=>{const wn=Sr.el=fr?fr.el:k(""),Xr=Sr.anchor=fr?fr.anchor:k("");let{patchFlag:qn,dynamicChildren:Zr,slotScopeIds:Nn}=Sr;Nn&&(Yr=Yr?Yr.concat(Nn):Nn),fr==null?(n(wn,Br,$r),n(Xr,Br,$r),jt(Sr.children||[],Br,Xr,Lr,Gr,qr,Yr,bn)):qn>0&&qn&64&&Zr&&fr.dynamicChildren?(ir(fr.dynamicChildren,Zr,Br,Lr,Gr,qr,Yr),(Sr.key!=null||Lr&&Sr===Lr.subTree)&&traverseStaticChildren(fr,Sr,!0)):hr(fr,Sr,Br,Xr,Lr,Gr,qr,Yr,bn)},lr=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn)=>{Sr.slotScopeIds=Yr,fr==null?Sr.shapeFlag&512?Lr.ctx.activate(Sr,Br,$r,qr,bn):sr(Sr,Br,$r,Lr,Gr,qr,bn):er(fr,Sr,bn)},sr=(fr,Sr,Br,$r,Lr,Gr,qr)=>{const Yr=fr.component=createComponentInstance(fr,$r,Lr);if(isKeepAlive(fr)&&(Yr.ctx.renderer=Or),setupComponent(Yr),Yr.asyncDep){if(Lr&&Lr.registerDep(Yr,cr),!fr.el){const bn=Yr.subTree=createVNode(Comment);ae(null,bn,Sr,Br)}}else cr(Yr,fr,Sr,Br,Lr,Gr,qr)},er=(fr,Sr,Br)=>{const $r=Sr.component=fr.component;if(shouldUpdateComponent(fr,Sr,Br))if($r.asyncDep&&!$r.asyncResolved){or($r,Sr,Br);return}else $r.next=Sr,invalidateJob($r.update),$r.effect.dirty=!0,$r.update();else Sr.el=fr.el,$r.vnode=Sr},cr=(fr,Sr,Br,$r,Lr,Gr,qr)=>{const Yr=()=>{if(fr.isMounted){let{next:Xr,bu:qn,u:Zr,parent:Nn,vnode:Qr}=fr;{const vn=locateNonHydratedAsyncRoot(fr);if(vn){Xr&&(Xr.el=Qr.el,or(fr,Xr,qr)),vn.asyncDep.then(()=>{fr.isUnmounted||Yr()});return}}let Mn=Xr,Ln;toggleRecurse(fr,!1),Xr?(Xr.el=Qr.el,or(fr,Xr,qr)):Xr=Qr,qn&&invokeArrayFns(qn),(Ln=Xr.props&&Xr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ln,Nn,Xr,Qr),toggleRecurse(fr,!0);const xn=renderComponentRoot(fr),Pn=fr.subTree;fr.subTree=xn,le(Pn,xn,z(Pn.el),xr(Pn),fr,Lr,Gr),Xr.el=xn.el,Mn===null&&updateHOCHostEl(fr,xn.el),Zr&&queuePostRenderEffect(Zr,Lr),(Ln=Xr.props&&Xr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ln,Nn,Xr,Qr),Lr)}else{let Xr;const{el:qn,props:Zr}=Sr,{bm:Nn,m:Qr,parent:Mn}=fr,Ln=isAsyncWrapper(Sr);if(toggleRecurse(fr,!1),Nn&&invokeArrayFns(Nn),!Ln&&(Xr=Zr&&Zr.onVnodeBeforeMount)&&invokeVNodeHook(Xr,Mn,Sr),toggleRecurse(fr,!0),qn&&yr){const xn=()=>{fr.subTree=renderComponentRoot(fr),yr(qn,fr.subTree,fr,Lr,null)};Ln?Sr.type.__asyncLoader().then(()=>!fr.isUnmounted&&xn()):xn()}else{const xn=fr.subTree=renderComponentRoot(fr);le(null,xn,Br,$r,fr,Lr,Gr),Sr.el=xn.el}if(Qr&&queuePostRenderEffect(Qr,Lr),!Ln&&(Xr=Zr&&Zr.onVnodeMounted)){const xn=Sr;queuePostRenderEffect(()=>invokeVNodeHook(Xr,Mn,xn),Lr)}(Sr.shapeFlag&256||Mn&&isAsyncWrapper(Mn.vnode)&&Mn.vnode.shapeFlag&256)&&fr.a&&queuePostRenderEffect(fr.a,Lr),fr.isMounted=!0,Sr=Br=$r=null}},bn=fr.effect=new ReactiveEffect(Yr,NOOP,()=>queueJob(wn),fr.scope),wn=fr.update=()=>{bn.dirty&&bn.run()};wn.id=fr.uid,toggleRecurse(fr,!0),wn()},or=(fr,Sr,Br)=>{Sr.component=fr;const $r=fr.vnode.props;fr.vnode=Sr,fr.next=null,updateProps(fr,Sr.props,$r,Br),updateSlots(fr,Sr.children,Br),pauseTracking(),flushPreFlushCbs(fr),resetTracking()},hr=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn=!1)=>{const wn=fr&&fr.children,Xr=fr?fr.shapeFlag:0,qn=Sr.children,{patchFlag:Zr,shapeFlag:Nn}=Sr;if(Zr>0){if(Zr&128){Tr(wn,qn,Br,$r,Lr,Gr,qr,Yr,bn);return}else if(Zr&256){pr(wn,qn,Br,$r,Lr,Gr,qr,Yr,bn);return}}Nn&8?(Xr&16&&Er(wn,Lr,Gr),qn!==wn&&V(Br,qn)):Xr&16?Nn&16?Tr(wn,qn,Br,$r,Lr,Gr,qr,Yr,bn):Er(wn,Lr,Gr,!0):(Xr&8&&V(Br,""),Nn&16&&jt(qn,Br,$r,Lr,Gr,qr,Yr,bn))},pr=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn)=>{fr=fr||EMPTY_ARR,Sr=Sr||EMPTY_ARR;const wn=fr.length,Xr=Sr.length,qn=Math.min(wn,Xr);let Zr;for(Zr=0;Zr<qn;Zr++){const Nn=Sr[Zr]=bn?cloneIfMounted(Sr[Zr]):normalizeVNode(Sr[Zr]);le(fr[Zr],Nn,Br,null,Lr,Gr,qr,Yr,bn)}wn>Xr?Er(fr,Lr,Gr,!0,!1,qn):jt(Sr,Br,$r,Lr,Gr,qr,Yr,bn,qn)},Tr=(fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn)=>{let wn=0;const Xr=Sr.length;let qn=fr.length-1,Zr=Xr-1;for(;wn<=qn&&wn<=Zr;){const Nn=fr[wn],Qr=Sr[wn]=bn?cloneIfMounted(Sr[wn]):normalizeVNode(Sr[wn]);if(isSameVNodeType(Nn,Qr))le(Nn,Qr,Br,null,Lr,Gr,qr,Yr,bn);else break;wn++}for(;wn<=qn&&wn<=Zr;){const Nn=fr[qn],Qr=Sr[Zr]=bn?cloneIfMounted(Sr[Zr]):normalizeVNode(Sr[Zr]);if(isSameVNodeType(Nn,Qr))le(Nn,Qr,Br,null,Lr,Gr,qr,Yr,bn);else break;qn--,Zr--}if(wn>qn){if(wn<=Zr){const Nn=Zr+1,Qr=Nn<Xr?Sr[Nn].el:$r;for(;wn<=Zr;)le(null,Sr[wn]=bn?cloneIfMounted(Sr[wn]):normalizeVNode(Sr[wn]),Br,Qr,Lr,Gr,qr,Yr,bn),wn++}}else if(wn>Zr)for(;wn<=qn;)_r(fr[wn],Lr,Gr,!0),wn++;else{const Nn=wn,Qr=wn,Mn=new Map;for(wn=Qr;wn<=Zr;wn++){const Ho=Sr[wn]=bn?cloneIfMounted(Sr[wn]):normalizeVNode(Sr[wn]);Ho.key!=null&&Mn.set(Ho.key,wn)}let Ln,xn=0;const Pn=Zr-Qr+1;let vn=!1,hn=0;const Zn=new Array(Pn);for(wn=0;wn<Pn;wn++)Zn[wn]=0;for(wn=Nn;wn<=qn;wn++){const Ho=fr[wn];if(xn>=Pn){_r(Ho,Lr,Gr,!0);continue}let Do;if(Ho.key!=null)Do=Mn.get(Ho.key);else for(Ln=Qr;Ln<=Zr;Ln++)if(Zn[Ln-Qr]===0&&isSameVNodeType(Ho,Sr[Ln])){Do=Ln;break}Do===void 0?_r(Ho,Lr,Gr,!0):(Zn[Do-Qr]=wn+1,Do>=hn?hn=Do:vn=!0,le(Ho,Sr[Do],Br,null,Lr,Gr,qr,Yr,bn),xn++)}const Oo=vn?getSequence(Zn):EMPTY_ARR;for(Ln=Oo.length-1,wn=Pn-1;wn>=0;wn--){const Ho=Qr+wn,Do=Sr[Ho],Eo=Ho+1<Xr?Sr[Ho+1].el:$r;Zn[wn]===0?le(null,Do,Br,Eo,Lr,Gr,qr,Yr,bn):vn&&(Ln<0||wn!==Oo[Ln]?Pr(Do,Br,Eo,2):Ln--)}}},Pr=(fr,Sr,Br,$r,Lr=null)=>{const{el:Gr,type:qr,transition:Yr,children:bn,shapeFlag:wn}=fr;if(wn&6){Pr(fr.component.subTree,Sr,Br,$r);return}if(wn&128){fr.suspense.move(Sr,Br,$r);return}if(wn&64){qr.move(fr,Sr,Br,Or);return}if(qr===Fragment){n(Gr,Sr,Br);for(let qn=0;qn<bn.length;qn++)Pr(bn[qn],Sr,Br,$r);n(fr.anchor,Sr,Br);return}if(qr===Static){de(fr,Sr,Br);return}if($r!==2&&wn&1&&Yr)if($r===0)Yr.beforeEnter(Gr),n(Gr,Sr,Br),queuePostRenderEffect(()=>Yr.enter(Gr),Lr);else{const{leave:qn,delayLeave:Zr,afterLeave:Nn}=Yr,Qr=()=>n(Gr,Sr,Br),Mn=()=>{qn(Gr,()=>{Qr(),Nn&&Nn()})};Zr?Zr(Gr,Qr,Mn):Mn()}else n(Gr,Sr,Br)},_r=(fr,Sr,Br,$r=!1,Lr=!1)=>{const{type:Gr,props:qr,ref:Yr,children:bn,dynamicChildren:wn,shapeFlag:Xr,patchFlag:qn,dirs:Zr}=fr;if(Yr!=null&&setRef(Yr,null,Br,fr,!0),Xr&256){Sr.ctx.deactivate(fr);return}const Nn=Xr&1&&Zr,Qr=!isAsyncWrapper(fr);let Mn;if(Qr&&(Mn=qr&&qr.onVnodeBeforeUnmount)&&invokeVNodeHook(Mn,Sr,fr),Xr&6)kr(fr.component,Br,$r);else{if(Xr&128){fr.suspense.unmount(Br,$r);return}Nn&&invokeDirectiveHook(fr,null,Sr,"beforeUnmount"),Xr&64?fr.type.remove(fr,Sr,Br,Lr,Or,$r):wn&&(Gr!==Fragment||qn>0&&qn&64)?Er(wn,Sr,Br,!1,!0):(Gr===Fragment&&qn&384||!Lr&&Xr&16)&&Er(bn,Sr,Br),$r&&Mr(fr)}(Qr&&(Mn=qr&&qr.onVnodeUnmounted)||Nn)&&queuePostRenderEffect(()=>{Mn&&invokeVNodeHook(Mn,Sr,fr),Nn&&invokeDirectiveHook(fr,null,Sr,"unmounted")},Br)},Mr=fr=>{const{type:Sr,el:Br,anchor:$r,transition:Lr}=fr;if(Sr===Fragment){rr(Br,$r);return}if(Sr===Static){_e(fr);return}const Gr=()=>{g(Br),Lr&&!Lr.persisted&&Lr.afterLeave&&Lr.afterLeave()};if(fr.shapeFlag&1&&Lr&&!Lr.persisted){const{leave:qr,delayLeave:Yr}=Lr,bn=()=>qr(Br,Gr);Yr?Yr(fr.el,Gr,bn):bn()}else Gr()},rr=(fr,Sr)=>{let Br;for(;fr!==Sr;)Br=re(fr),g(fr),fr=Br;g(Sr)},kr=(fr,Sr,Br)=>{const{bum:$r,scope:Lr,update:Gr,subTree:qr,um:Yr}=fr;$r&&invokeArrayFns($r),Lr.stop(),Gr&&(Gr.active=!1,_r(qr,fr,Sr,Br)),Yr&&queuePostRenderEffect(Yr,Sr),queuePostRenderEffect(()=>{fr.isUnmounted=!0},Sr),Sr&&Sr.pendingBranch&&!Sr.isUnmounted&&fr.asyncDep&&!fr.asyncResolved&&fr.suspenseId===Sr.pendingId&&(Sr.deps--,Sr.deps===0&&Sr.resolve())},Er=(fr,Sr,Br,$r=!1,Lr=!1,Gr=0)=>{for(let qr=Gr;qr<fr.length;qr++)_r(fr[qr],Sr,Br,$r,Lr)},xr=fr=>fr.shapeFlag&6?xr(fr.component.subTree):fr.shapeFlag&128?fr.suspense.next():re(fr.anchor||fr.el);let vr=!1;const Ir=(fr,Sr,Br)=>{fr==null?Sr._vnode&&_r(Sr._vnode,null,null,!0):le(Sr._vnode||null,fr,Sr,null,null,null,Br),vr||(vr=!0,flushPreFlushCbs(),flushPostFlushCbs(),vr=!1),Sr._vnode=fr},Or={p:le,um:_r,m:Pr,r:Mr,mt:sr,mc:jt,pc:hr,pbc:ir,n:xr,o:t};let Cr,yr;return r&&([Cr,yr]=r(Or)),{render:Ir,hydrate:Cr,createApp:createAppAPI(Ir,Cr)}}function resolveChildrenNamespace({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function toggleRecurse({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function needTransition(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(t,r,e=!1){const n=t.children,g=r.children;if(isArray$3(n)&&isArray$3(g))for(let y=0;y<n.length;y++){const i=n[y];let k=g[y];k.shapeFlag&1&&!k.dynamicChildren&&((k.patchFlag<=0||k.patchFlag===32)&&(k=g[y]=cloneIfMounted(g[y]),k.el=i.el),e||traverseStaticChildren(i,k)),k.type===Text&&(k.el=i.el)}}function getSequence(t){const r=t.slice(),e=[0];let n,g,y,i,k;const $=t.length;for(n=0;n<$;n++){const L=t[n];if(L!==0){if(g=e[e.length-1],t[g]<L){r[n]=g,e.push(n);continue}for(y=0,i=e.length-1;y<i;)k=y+i>>1,t[e[k]]<L?y=k+1:i=k;L<t[e[y]]&&(y>0&&(r[n]=e[y-1]),e[y]=n)}}for(y=e.length,i=e[y-1];y-- >0;)e[y]=i,i=r[i];return e}function locateNonHydratedAsyncRoot(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:locateNonHydratedAsyncRoot(r)}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,isTargetMathML=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,resolveTarget=(t,r)=>{const e=t&&t.to;return isString$2(e)?r?r(e):null:e},TeleportImpl={name:"Teleport",__isTeleport:!0,process(t,r,e,n,g,y,i,k,$,L){const{mc:V,pc:z,pbc:re,o:{insert:ie,querySelector:ue,createText:le,createComment:oe}}=L,ae=isTeleportDisabled(r.props);let{shapeFlag:Ue,children:de,dynamicChildren:_e}=r;if(t==null){const Ve=r.el=le(""),$e=r.anchor=le("");ie(Ve,e,n),ie($e,e,n);const Lt=r.target=resolveTarget(r.props,ue),jt=r.targetAnchor=le("");Lt&&(ie(jt,Lt),i==="svg"||isTargetSVG(Lt)?i="svg":(i==="mathml"||isTargetMathML(Lt))&&(i="mathml"));const Et=(ir,ur)=>{Ue&16&&V(de,ir,ur,g,y,i,k,$)};ae?Et(e,$e):Lt&&Et(Lt,jt)}else{r.el=t.el;const Ve=r.anchor=t.anchor,$e=r.target=t.target,Lt=r.targetAnchor=t.targetAnchor,jt=isTeleportDisabled(t.props),Et=jt?e:$e,ir=jt?Ve:Lt;if(i==="svg"||isTargetSVG($e)?i="svg":(i==="mathml"||isTargetMathML($e))&&(i="mathml"),_e?(re(t.dynamicChildren,_e,Et,g,y,i,k),traverseStaticChildren(t,r,!0)):$||z(t,r,Et,ir,g,y,i,k,!1),ae)jt?r.props&&t.props&&r.props.to!==t.props.to&&(r.props.to=t.props.to):moveTeleport(r,e,Ve,L,1);else if((r.props&&r.props.to)!==(t.props&&t.props.to)){const ur=r.target=resolveTarget(r.props,ue);ur&&moveTeleport(r,ur,null,L,0)}else jt&&moveTeleport(r,$e,Lt,L,1)}updateCssVars(r)},remove(t,r,e,n,{um:g,o:{remove:y}},i){const{shapeFlag:k,children:$,anchor:L,targetAnchor:V,target:z,props:re}=t;if(z&&y(V),i&&y(L),k&16){const ie=i||!isTeleportDisabled(re);for(let ue=0;ue<$.length;ue++){const le=$[ue];g(le,r,e,ie,!!le.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,r,e,{o:{insert:n},m:g},y=2){y===0&&n(t.targetAnchor,r,e);const{el:i,anchor:k,shapeFlag:$,children:L,props:V}=t,z=y===2;if(z&&n(i,r,e),(!z||isTeleportDisabled(V))&&$&16)for(let re=0;re<L.length;re++)g(L[re],r,e,2);z&&n(k,r,e)}function hydrateTeleport(t,r,e,n,g,y,{o:{nextSibling:i,parentNode:k,querySelector:$}},L){const V=r.target=resolveTarget(r.props,$);if(V){const z=V._lpa||V.firstChild;if(r.shapeFlag&16)if(isTeleportDisabled(r.props))r.anchor=L(i(t),r,k(t),e,n,g,y),r.targetAnchor=z;else{r.anchor=i(t);let re=z;for(;re;)if(re=i(re),re&&re.nodeType===8&&re.data==="teleport anchor"){r.targetAnchor=re,V._lpa=r.targetAnchor&&i(r.targetAnchor);break}L(z,r,V,e,n,g,y)}updateCssVars(r)}return r.anchor&&i(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const r=t.ctx;if(r&&r.ut){let e=t.children[0].el;for(;e&&e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",r.uid),e=e.nextSibling;r.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,r,e,n,g,y){return setupBlock(createBaseVNode(t,r,e,n,g,y,!0))}function createBlock(t,r,e,n,g){return setupBlock(createVNode(t,r,e,n,g,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,r){return t.type===r.type&&t.key===r.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?isString$2(t)||isRef(t)||isFunction$3(t)?{i:currentRenderingInstance,r:t,k:r,f:!!e}:t:null);function createBaseVNode(t,r=null,e=null,n=0,g=null,y=t===Fragment?0:1,i=!1,k=!1){const $={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:n,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return k?(normalizeChildren($,e),y&128&&t.normalize($)):e&&($.shapeFlag|=isString$2(e)?8:16),isBlockTreeEnabled>0&&!i&&currentBlock&&($.patchFlag>0||y&6)&&$.patchFlag!==32&&currentBlock.push($),$}const createVNode=_createVNode;function _createVNode(t,r=null,e=null,n=0,g=null,y=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const k=cloneVNode(t,r,!0);return e&&normalizeChildren(k,e),isBlockTreeEnabled>0&&!y&&currentBlock&&(k.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=k:currentBlock.push(k)),k.patchFlag|=-2,k}if(isClassComponent(t)&&(t=t.__vccOpts),r){r=guardReactiveProps(r);let{class:k,style:$}=r;k&&!isString$2(k)&&(r.class=normalizeClass(k)),isObject$2($)&&(isProxy($)&&!isArray$3($)&&($=extend$1({},$)),r.style=normalizeStyle($))}const i=isString$2(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction$3(t)?2:0;return createBaseVNode(t,r,e,n,g,i,y,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,r,e=!1){const{props:n,ref:g,patchFlag:y,children:i}=t,k=r?mergeProps(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:k,key:k&&normalizeKey(k),ref:r&&r.ref?e&&g?isArray$3(g)?g.concat(normalizeRef(r)):[g,normalizeRef(r)]:normalizeRef(r):g,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:i,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Fragment?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",r=0){return createVNode(Text,null,t,r)}function createCommentVNode(t="",r=!1){return r?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$3(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(isArray$3(r))e=16;else if(typeof r=="object")if(n&65){const g=r.default;g&&(g._c&&(g._d=!1),normalizeChildren(t,g()),g._c&&(g._d=!0));return}else{e=32;const g=r._;!g&&!(InternalObjectKey in r)?r._ctx=currentRenderingInstance:g===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else isFunction$3(r)?(r={default:r,_ctx:currentRenderingInstance},e=32):(r=String(r),n&64?(e=16,r=[createTextVNode(r)]):e=8);t.children=r,t.shapeFlag|=e}function mergeProps(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const g in n)if(g==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(g==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(g)){const y=r[g],i=n[g];i&&y!==i&&!(isArray$3(y)&&y.includes(i))&&(r[g]=y?[].concat(y,i):i)}else g!==""&&(r[g]=n[g])}return r}function invokeVNodeHook(t,r,e,n=null){callWithAsyncErrorHandling(t,r,7,[e,n])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(t,r,e){const n=t.type,g=(r?r.appContext:t.appContext)||emptyAppContext,y={uid:uid$2++,vnode:t,type:n,parent:r,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,g),emitsOptions:normalizeEmitsOptions(n,g),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=r?r.root:y,y.emit=emit.bind(null,y),t.ce&&t.ce(y),y}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),r=(e,n)=>{let g;return(g=t[e])||(g=t[e]=[]),g.push(n),y=>{g.length>1?g.forEach(i=>i(y)):g[0](y)}};internalSetCurrentInstance=r("__VUE_INSTANCE_SETTERS__",e=>currentInstance=e),setInSSRSetupState=r("__VUE_SSR_SETTERS__",e=>isInSSRComponentSetup=e)}const setCurrentInstance=t=>{const r=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(r)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,r=!1){r&&setInSSRSetupState(r);const{props:e,children:n}=t.vnode,g=isStatefulComponent(t);initProps(t,e,g,r),initSlots(t,n);const y=g?setupStatefulComponent(t,r):void 0;return r&&setInSSRSetupState(!1),y}function setupStatefulComponent(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=e;if(n){const g=t.setupContext=n.length>1?createSetupContext(t):null,y=setCurrentInstance(t);pauseTracking();const i=callWithErrorHandling(n,t,0,[t.props,g]);if(resetTracking(),y(),isPromise(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),r)return i.then(k=>{handleSetupResult(t,k,r)}).catch(k=>{handleError(k,t,0)});t.asyncDep=i}else handleSetupResult(t,i,r)}else finishComponentSetup(t,r)}function handleSetupResult(t,r,e){isFunction$3(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:isObject$2(r)&&(t.setupState=proxyRefs(r)),finishComponentSetup(t,e)}let compile;function finishComponentSetup(t,r,e){const n=t.type;if(!t.render){if(!r&&compile&&!n.render){const g=n.template||resolveMergedOptions(t).template;if(g){const{isCustomElement:y,compilerOptions:i}=t.appContext.config,{delimiters:k,compilerOptions:$}=n,L=extend$1(extend$1({isCustomElement:y,delimiters:k},i),$);n.render=compile(g,L)}}t.render=n.render||NOOP}{const g=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),g()}}}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return track(t,"get","$attrs"),r[e]}}))}function createSetupContext(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:r}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in publicPropertiesMap)return publicPropertiesMap[e](t)},has(r,e){return e in r||e in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,r=>r.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,r=!0){return isFunction$3(t)?t.displayName||t.name:t.name||r&&t.__name}function formatComponentName(t,r,e=!1){let n=getComponentName(r);if(!n&&r.__file){const g=r.__file.match(/([^/\\]+)\.\w+$/);g&&(n=g[1])}if(!n&&t&&t.parent){const g=y=>{for(const i in y)if(y[i]===r)return i};n=g(t.components||t.parent.type.components)||g(t.appContext.components)}return n?classify(n):e?"App":"Anonymous"}function isClassComponent(t){return isFunction$3(t)&&"__vccOpts"in t}const computed=(t,r)=>computed$1(t,r,isInSSRComponentSetup);function h$1(t,r,e){const n=arguments.length;return n===2?isObject$2(r)&&!isArray$3(r)?isVNode(r)?createVNode(t,null,[r]):createVNode(t,r):createVNode(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&isVNode(e)&&(e=[e]),createVNode(t,r,e))}const version="3.4.20",warn=NOOP;/**
* @vue/runtime-dom v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const g=r==="svg"?doc.createElementNS(svgNS,t):r==="mathml"?doc.createElementNS(mathmlNS,t):doc.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&g.setAttribute("multiple",n.multiple),g},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,g,y){const i=e?e.previousSibling:r.lastChild;if(g&&(g===y||g.nextSibling))for(;r.insertBefore(g.cloneNode(!0),e),!(g===y||!(g=g.nextSibling)););else{templateContainer.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const k=templateContainer.content;if(n==="svg"||n==="mathml"){const $=k.firstChild;for(;$.firstChild;)k.appendChild($.firstChild);k.removeChild($)}r.insertBefore(k,e)}return[i?i.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(t,{slots:r})=>h$1(BaseTransition,resolveTransitionProps(t),r);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(t,r=[])=>{isArray$3(t)?t.forEach(e=>e(...r)):t&&t(...r)},hasExplicitCallback=t=>t?isArray$3(t)?t.some(r=>r.length>1):t.length>1:!1;function resolveTransitionProps(t){const r={};for(const Dt in t)Dt in DOMTransitionPropsValidators||(r[Dt]=t[Dt]);if(t.css===!1)return r;const{name:e="v",type:n,duration:g,enterFromClass:y=`${e}-enter-from`,enterActiveClass:i=`${e}-enter-active`,enterToClass:k=`${e}-enter-to`,appearFromClass:$=y,appearActiveClass:L=i,appearToClass:V=k,leaveFromClass:z=`${e}-leave-from`,leaveActiveClass:re=`${e}-leave-active`,leaveToClass:ie=`${e}-leave-to`}=t,ue=normalizeDuration(g),le=ue&&ue[0],oe=ue&&ue[1],{onBeforeEnter:ae,onEnter:Ue,onEnterCancelled:de,onLeave:_e,onLeaveCancelled:Ve,onBeforeAppear:$e=ae,onAppear:Lt=Ue,onAppearCancelled:jt=de}=r,Et=(Dt,lr,sr)=>{removeTransitionClass(Dt,lr?V:k),removeTransitionClass(Dt,lr?L:i),sr&&sr()},ir=(Dt,lr)=>{Dt._isLeaving=!1,removeTransitionClass(Dt,z),removeTransitionClass(Dt,ie),removeTransitionClass(Dt,re),lr&&lr()},ur=Dt=>(lr,sr)=>{const er=Dt?Lt:Ue,cr=()=>Et(lr,Dt,sr);callHook(er,[lr,cr]),nextFrame(()=>{removeTransitionClass(lr,Dt?$:y),addTransitionClass(lr,Dt?V:k),hasExplicitCallback(er)||whenTransitionEnds(lr,n,le,cr)})};return extend$1(r,{onBeforeEnter(Dt){callHook(ae,[Dt]),addTransitionClass(Dt,y),addTransitionClass(Dt,i)},onBeforeAppear(Dt){callHook($e,[Dt]),addTransitionClass(Dt,$),addTransitionClass(Dt,L)},onEnter:ur(!1),onAppear:ur(!0),onLeave(Dt,lr){Dt._isLeaving=!0;const sr=()=>ir(Dt,lr);addTransitionClass(Dt,z),forceReflow(),addTransitionClass(Dt,re),nextFrame(()=>{Dt._isLeaving&&(removeTransitionClass(Dt,z),addTransitionClass(Dt,ie),hasExplicitCallback(_e)||whenTransitionEnds(Dt,n,oe,sr))}),callHook(_e,[Dt,sr])},onEnterCancelled(Dt){Et(Dt,!1),callHook(de,[Dt])},onAppearCancelled(Dt){Et(Dt,!0),callHook(jt,[Dt])},onLeaveCancelled(Dt){ir(Dt),callHook(Ve,[Dt])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$2(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const r=NumberOf(t);return[r,r]}}function NumberOf(t){return toNumber$1(t)}function addTransitionClass(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[vtcKey]||(t[vtcKey]=new Set)).add(r)}function removeTransitionClass(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[vtcKey];e&&(e.delete(r),e.size||(t[vtcKey]=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,r,e,n){const g=t._endId=++endId,y=()=>{g===t._endId&&n()};if(e)return setTimeout(y,e);const{type:i,timeout:k,propCount:$}=getTransitionInfo(t,r);if(!i)return n();const L=i+"end";let V=0;const z=()=>{t.removeEventListener(L,re),y()},re=ie=>{ie.target===t&&++V>=$&&z()};setTimeout(()=>{V<$&&z()},k+1),t.addEventListener(L,re)}function getTransitionInfo(t,r){const e=window.getComputedStyle(t),n=ue=>(e[ue]||"").split(", "),g=n(`${TRANSITION}Delay`),y=n(`${TRANSITION}Duration`),i=getTimeout(g,y),k=n(`${ANIMATION}Delay`),$=n(`${ANIMATION}Duration`),L=getTimeout(k,$);let V=null,z=0,re=0;r===TRANSITION?i>0&&(V=TRANSITION,z=i,re=y.length):r===ANIMATION?L>0&&(V=ANIMATION,z=L,re=$.length):(z=Math.max(i,L),V=z>0?i>L?TRANSITION:ANIMATION:null,re=V?V===TRANSITION?y.length:$.length:0);const ie=V===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:V,timeout:z,propCount:re,hasTransform:ie}}function getTimeout(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>toMs(e)+toMs(t[n])))}function toMs(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(t,r,e){const n=t[vtcKey];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(t,{value:r},{transition:e}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,e&&r?e.beforeEnter(t):setDisplay(t,r)},mounted(t,{value:r},{transition:e}){e&&r&&e.enter(t)},updated(t,{value:r,oldValue:e},{transition:n}){!r!=!e&&(n?r?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,r))},beforeUnmount(t,{value:r}){setDisplay(t,r)}};function setDisplay(t,r){t.style.display=r?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!r}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,r,e){const n=t.style,g=isString$2(e);let y=!1;if(e&&!g){if(r)if(isString$2(r))for(const i of r.split(";")){const k=i.slice(0,i.indexOf(":")).trim();e[k]==null&&setStyle(n,k,"")}else for(const i in r)e[i]==null&&setStyle(n,i,"");for(const i in e)i==="display"&&(y=!0),setStyle(n,i,e[i])}else if(g){if(r!==e){const i=n[CSS_VAR_TEXT];i&&(e+=";"+i),n.cssText=e,y=displayRE.test(e)}}else r&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=y?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,r,e){if(isArray$3(e))e.forEach(n=>setStyle(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=autoPrefix(t,r);importantRE.test(e)?t.setProperty(hyphenate(n),e.replace(importantRE,""),"important"):t[n]=e}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,r){const e=prefixCache[r];if(e)return e;let n=camelize(r);if(n!=="filter"&&n in t)return prefixCache[r]=n;n=capitalize$1(n);for(let g=0;g<prefixes.length;g++){const y=prefixes[g]+n;if(y in t)return prefixCache[r]=y}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,r,e,n,g){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(xlinkNS,r.slice(6,r.length)):t.setAttributeNS(xlinkNS,r,e);else{const y=isSpecialBooleanAttr(r);e==null||y&&!includeBooleanAttr(e)?t.removeAttribute(r):t.setAttribute(r,y?"":e)}}function patchDOMProp(t,r,e,n,g,y,i){if(r==="innerHTML"||r==="textContent"){n&&i(n,g,y),t[r]=e??"";return}const k=t.tagName;if(r==="value"&&k!=="PROGRESS"&&!k.includes("-")){t._value=e;const L=k==="OPTION"?t.getAttribute("value")||"":t.value,V=e??"";L!==V&&(t.value=V),e==null&&t.removeAttribute(r);return}let $=!1;if(e===""||e==null){const L=typeof t[r];L==="boolean"?e=includeBooleanAttr(e):e==null&&L==="string"?(e="",$=!0):L==="number"&&(e=0,$=!0)}try{t[r]=e}catch{}$&&t.removeAttribute(r)}function addEventListener(t,r,e,n){t.addEventListener(r,e,n)}function removeEventListener(t,r,e,n){t.removeEventListener(r,e,n)}const veiKey=Symbol("_vei");function patchEvent(t,r,e,n,g=null){const y=t[veiKey]||(t[veiKey]={}),i=y[r];if(n&&i)i.value=n;else{const[k,$]=parseName(r);if(n){const L=y[r]=createInvoker(n,g);addEventListener(t,k,L,$)}else i&&(removeEventListener(t,k,i,$),y[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let r;if(optionsModifierRE.test(t)){r={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),r]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,e.value),r,5,[n])};return e.value=t,e.attached=getNow(),e}function patchStopImmediatePropagation(t,r){if(isArray$3(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>g=>!g._stopped&&n&&n(g))}else return r}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,r,e,n,g,y,i,k,$)=>{const L=g==="svg";r==="class"?patchClass(t,n,L):r==="style"?patchStyle(t,e,n):isOn(r)?isModelListener(r)||patchEvent(t,r,e,n,i):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(t,r,n,L))?patchDOMProp(t,r,n,y,i,k,$):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),patchAttr(t,r,n,L))};function shouldSetAsProp(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&isNativeOn(r)&&isFunction$3(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const g=t.tagName;if(g==="IMG"||g==="VIDEO"||g==="CANVAS"||g==="SOURCE")return!1}return isNativeOn(r)&&isString$2(e)?!1:r in t}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let g,y;return onUpdated(()=>{if(!g.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(g[0].el,e.vnode.el,i))return;g.forEach(callPendingCbs),g.forEach(recordPosition);const k=g.filter(applyTranslation);forceReflow(),k.forEach($=>{const L=$.el,V=L.style;addTransitionClass(L,i),V.transform=V.webkitTransform=V.transitionDuration="";const z=L[moveCbKey]=re=>{re&&re.target!==L||(!re||/transform$/.test(re.propertyName))&&(L.removeEventListener("transitionend",z),L[moveCbKey]=null,removeTransitionClass(L,i))};L.addEventListener("transitionend",z)})}),()=>{const i=toRaw(t),k=resolveTransitionProps(i);let $=i.tag||Fragment;g=y,y=r.default?getTransitionRawChildren(r.default()):[];for(let L=0;L<y.length;L++){const V=y[L];V.key!=null&&setTransitionHooks(V,resolveTransitionHooks(V,k,n,e))}if(g)for(let L=0;L<g.length;L++){const V=g[L];setTransitionHooks(V,resolveTransitionHooks(V,k,n,e)),positionMap.set(V,V.el.getBoundingClientRect())}return createVNode($,null,y)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const r=t.el;r[moveCbKey]&&r[moveCbKey](),r[enterCbKey]&&r[enterCbKey]()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const r=positionMap.get(t),e=newPositionMap.get(t),n=r.left-e.left,g=r.top-e.top;if(n||g){const y=t.el.style;return y.transform=y.webkitTransform=`translate(${n}px,${g}px)`,y.transitionDuration="0s",t}}function hasCSSTransform(t,r,e){const n=t.cloneNode(),g=t[vtcKey];g&&g.forEach(k=>{k.split(/\s+/).forEach($=>$&&n.classList.remove($))}),e.split(/\s+/).forEach(k=>k&&n.classList.add(k)),n.style.display="none";const y=r.nodeType===1?r:r.parentNode;y.appendChild(n);const{hasTransform:i}=getTransitionInfo(n);return y.removeChild(n),i}const getModelAssigner=t=>{const r=t.props["onUpdate:modelValue"]||!1;return isArray$3(r)?e=>invokeArrayFns(r,e):r};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const r=t.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:r,trim:e,number:n}},g){t[assignKey]=getModelAssigner(g);const y=n||g.props&&g.props.type==="number";addEventListener(t,r?"change":"input",i=>{if(i.target.composing)return;let k=t.value;e&&(k=k.trim()),y&&(k=looseToNumber(k)),t[assignKey](k)}),e&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),r||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:r}){t.value=r??""},beforeUpdate(t,{value:r,modifiers:{lazy:e,trim:n,number:g}},y){if(t[assignKey]=getModelAssigner(y),t.composing)return;const i=g||t.type==="number"?looseToNumber(t.value):t.value,k=r??"";i!==k&&(document.activeElement===t&&t.type!=="range"&&(e||n&&t.value.trim()===k)||(t.value=k))}},vModelCheckbox={deep:!0,created(t,r,e){t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{const n=t._modelValue,g=getValue$2(t),y=t.checked,i=t[assignKey];if(isArray$3(n)){const k=looseIndexOf(n,g),$=k!==-1;if(y&&!$)i(n.concat(g));else if(!y&&$){const L=[...n];L.splice(k,1),i(L)}}else if(isSet$2(n)){const k=new Set(n);y?k.add(g):k.delete(g),i(k)}else i(getCheckboxValue(t,y))})},mounted:setChecked,beforeUpdate(t,r,e){t[assignKey]=getModelAssigner(e),setChecked(t,r,e)}};function setChecked(t,{value:r,oldValue:e},n){t._modelValue=r,isArray$3(r)?t.checked=looseIndexOf(r,n.props.value)>-1:isSet$2(r)?t.checked=r.has(n.props.value):r!==e&&(t.checked=looseEqual(r,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:r},e){t.checked=looseEqual(r,e.props.value),t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{t[assignKey](getValue$2(t))})},beforeUpdate(t,{value:r,oldValue:e},n){t[assignKey]=getModelAssigner(n),r!==e&&(t.checked=looseEqual(r,n.props.value))}};function getValue$2(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,r){const e=r?"_trueValue":"_falseValue";return e in t?t[e]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,r)=>systemModifiers.some(e=>t[`${e}Key`]&&!r.includes(e))},withModifiers=(t,r)=>{const e=t._withMods||(t._withMods={}),n=r.join(".");return e[n]||(e[n]=(g,...y)=>{for(let i=0;i<r.length;i++){const k=modifierGuards[r[i]];if(k&&k(g,r))return}return t(g,...y)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,r)=>{const e=t._withKeys||(t._withKeys={}),n=r.join(".");return e[n]||(e[n]=g=>{if(!("key"in g))return;const y=hyphenate(g.key);if(r.some(i=>i===y||keyNames[i]===y))return t(g)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...t)=>{ensureRenderer().render(...t)},createApp=(...t)=>{const r=ensureRenderer().createApp(...t),{mount:e}=r;return r.mount=n=>{const g=normalizeContainer(n);if(!g)return;const y=r._component;!isFunction$3(y)&&!y.render&&!y.template&&(y.template=g.innerHTML),g.innerHTML="";const i=e(g,!1,resolveRootNamespace(g));return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),i},r};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$2(t)?document.querySelector(t):t}const FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,obtainAllFocusableElements$1=t=>Array.from(t.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(r=>isFocusable(r)&&isVisible(r)),isFocusable=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},triggerEvent=function(t,r,...e){let n;r.includes("mouse")||r.includes("click")?n="MouseEvents":r.includes("key")?n="KeyboardEvent":n="HTMLEvents";const g=document.createEvent(n);return g.initEvent(r,...e),t.dispatchEvent(g),t},isLeaf=t=>!t.getAttribute("aria-owns"),getSibling=(t,r,e)=>{const{parentNode:n}=t;if(!n)return null;const g=n.querySelectorAll(e),y=Array.prototype.indexOf.call(g,t);return g[y+r]||null},focusNode=t=>{t&&(t.focus(),!isLeaf(t)&&t.click())},composeEventHandlers=(t,r,{checkForDefaultPrevented:e=!0}={})=>g=>{const y=t==null?void 0:t(g);if(e===!1||!y)return r==null?void 0:r(g)};var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction$2=t=>typeof t=="function",isString$1=t=>typeof t=="string",noop$1=()=>{},isIOS=isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,r){function e(...n){return new Promise((g,y)=>{Promise.resolve(t(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})).then(g).catch(y)})}return e}function debounceFilter(t,r={}){let e,n,g=noop$1;const y=k=>{clearTimeout(k),g(),g=noop$1};return k=>{const $=resolveUnref(t),L=resolveUnref(r.maxWait);return e&&y(e),$<=0||L!==void 0&&L<=0?(n&&(y(n),n=null),Promise.resolve(k())):new Promise((V,z)=>{g=r.rejectOnCancel?z:V,L&&!n&&(n=setTimeout(()=>{e&&y(e),n=null,V(k())},L)),e=setTimeout(()=>{n&&y(n),n=null,V(k())},$)})}}function throttleFilter(t,r=!0,e=!0,n=!1){let g=0,y,i=!0,k=noop$1,$;const L=()=>{y&&(clearTimeout(y),y=void 0,k(),k=noop$1)};return z=>{const re=resolveUnref(t),ie=Date.now()-g,ue=()=>$=z();return L(),re<=0?(g=Date.now(),ue()):(ie>re&&(e||!i)?(g=Date.now(),ue()):r&&($=new Promise((le,oe)=>{k=n?oe:le,y=setTimeout(()=>{g=Date.now(),i=!0,le(ue()),L()},Math.max(0,re-ie))})),!e&&!y&&(y=setTimeout(()=>i=!0,re)),i=!1,$)}}function identity$1(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function useDebounceFn(t,r=200,e={}){return createFilterWrapper(debounceFilter(r,e),t)}function refDebounced(t,r=200,e={}){const n=ref(t.value),g=useDebounceFn(()=>{n.value=t.value},r,e);return watch(t,()=>g()),n}function useThrottleFn(t,r=200,e=!1,n=!0,g=!1){return createFilterWrapper(throttleFilter(r,e,n,g),t)}function tryOnMounted(t,r=!0){getCurrentInstance()?onMounted(t):r?t():nextTick(t)}function useTimeoutFn(t,r,e={}){const{immediate:n=!0}=e,g=ref(!1);let y=null;function i(){y&&(clearTimeout(y),y=null)}function k(){g.value=!1,i()}function $(...L){i(),g.value=!0,y=setTimeout(()=>{g.value=!1,y=null,t(...L)},resolveUnref(r))}return n&&(g.value=!0,isClient&&$()),tryOnScopeDispose(k),{isPending:readonly(g),start:$,stop:k}}function unrefElement(t){var r;const e=resolveUnref(t);return(r=e==null?void 0:e.$el)!=null?r:e}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let r,e,n,g;if(isString$1(t[0])||Array.isArray(t[0])?([e,n,g]=t,r=defaultWindow):[r,e,n,g]=t,!r)return noop$1;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const y=[],i=()=>{y.forEach(V=>V()),y.length=0},k=(V,z,re,ie)=>(V.addEventListener(z,re,ie),()=>V.removeEventListener(z,re,ie)),$=watch(()=>[unrefElement(r),resolveUnref(g)],([V,z])=>{i(),V&&y.push(...e.flatMap(re=>n.map(ie=>k(V,re,ie,z))))},{immediate:!0,flush:"post"}),L=()=>{$(),i()};return tryOnScopeDispose(L),L}let _iOSWorkaround=!1;function onClickOutside(t,r,e={}){const{window:n=defaultWindow,ignore:g=[],capture:y=!0,detectIframe:i=!1}=e;if(!n)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(n.document.body.children).forEach(re=>re.addEventListener("click",noop$1)));let k=!0;const $=re=>g.some(ie=>{if(typeof ie=="string")return Array.from(n.document.querySelectorAll(ie)).some(ue=>ue===re.target||re.composedPath().includes(ue));{const ue=unrefElement(ie);return ue&&(re.target===ue||re.composedPath().includes(ue))}}),V=[useEventListener(n,"click",re=>{const ie=unrefElement(t);if(!(!ie||ie===re.target||re.composedPath().includes(ie))){if(re.detail===0&&(k=!$(re)),!k){k=!0;return}r(re)}},{passive:!0,capture:y}),useEventListener(n,"pointerdown",re=>{const ie=unrefElement(t);ie&&(k=!re.composedPath().includes(ie)&&!$(re))},{passive:!0}),i&&useEventListener(n,"blur",re=>{var ie;const ue=unrefElement(t);((ie=n.document.activeElement)==null?void 0:ie.tagName)==="IFRAME"&&!(ue!=null&&ue.contains(n.document.activeElement))&&r(re)})].filter(Boolean);return()=>V.forEach(re=>re())}function useSupported(t,r=!1){const e=ref(),n=()=>e.value=!!t();return n(),tryOnMounted(n,r),e}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global$1[globalKey]=_global$1[globalKey]||{};function useCssVar(t,r,{window:e=defaultWindow,initialValue:n=""}={}){const g=ref(n),y=computed(()=>{var i;return unrefElement(r)||((i=e==null?void 0:e.document)==null?void 0:i.documentElement)});return watch([y,()=>resolveUnref(t)],([i,k])=>{var $;if(i&&e){const L=($=e.getComputedStyle(i).getPropertyValue(k))==null?void 0:$.trim();g.value=L||n}},{immediate:!0}),watch(g,i=>{var k;(k=y.value)!=null&&k.style&&y.value.style.setProperty(resolveUnref(t),i)}),g}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(t,r)=>{var e={};for(var n in t)__hasOwnProp$g.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$g)for(var n of __getOwnPropSymbols$g(t))r.indexOf(n)<0&&__propIsEnum$g.call(t,n)&&(e[n]=t[n]);return e};function useResizeObserver(t,r,e={}){const n=e,{window:g=defaultWindow}=n,y=__objRest$2(n,["window"]);let i;const k=useSupported(()=>g&&"ResizeObserver"in g),$=()=>{i&&(i.disconnect(),i=void 0)},L=watch(()=>unrefElement(t),z=>{$(),k.value&&g&&z&&(i=new ResizeObserver(r),i.observe(z,y))},{immediate:!0,flush:"post"}),V=()=>{$(),L()};return tryOnScopeDispose(V),{isSupported:k,stop:V}}function useElementBounding(t,r={}){const{reset:e=!0,windowResize:n=!0,windowScroll:g=!0,immediate:y=!0}=r,i=ref(0),k=ref(0),$=ref(0),L=ref(0),V=ref(0),z=ref(0),re=ref(0),ie=ref(0);function ue(){const le=unrefElement(t);if(!le){e&&(i.value=0,k.value=0,$.value=0,L.value=0,V.value=0,z.value=0,re.value=0,ie.value=0);return}const oe=le.getBoundingClientRect();i.value=oe.height,k.value=oe.bottom,$.value=oe.left,L.value=oe.right,V.value=oe.top,z.value=oe.width,re.value=oe.x,ie.value=oe.y}return useResizeObserver(t,ue),watch(()=>unrefElement(t),le=>!le&&ue()),g&&useEventListener("scroll",ue,{capture:!0,passive:!0}),n&&useEventListener("resize",ue,{passive:!0}),tryOnMounted(()=>{y&&ue()}),{height:i,bottom:k,left:$,right:L,top:V,width:z,x:re,y:ie,update:ue}}var __getOwnPropSymbols$8=Object.getOwnPropertySymbols,__hasOwnProp$8=Object.prototype.hasOwnProperty,__propIsEnum$8=Object.prototype.propertyIsEnumerable,__objRest$1=(t,r)=>{var e={};for(var n in t)__hasOwnProp$8.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$8)for(var n of __getOwnPropSymbols$8(t))r.indexOf(n)<0&&__propIsEnum$8.call(t,n)&&(e[n]=t[n]);return e};function useMutationObserver(t,r,e={}){const n=e,{window:g=defaultWindow}=n,y=__objRest$1(n,["window"]);let i;const k=useSupported(()=>g&&"MutationObserver"in g),$=()=>{i&&(i.disconnect(),i=void 0)},L=watch(()=>unrefElement(t),z=>{$(),k.value&&g&&z&&(i=new MutationObserver(r),i.observe(z,y))},{immediate:!0}),V=()=>{$(),L()};return tryOnScopeDispose(V),{isSupported:k,stop:V}}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(t,r,e,n={}){var g,y,i;const{clone:k=!1,passive:$=!1,eventName:L,deep:V=!1,defaultValue:z}=n,re=getCurrentInstance(),ie=e||(re==null?void 0:re.emit)||((g=re==null?void 0:re.$emit)==null?void 0:g.bind(re))||((i=(y=re==null?void 0:re.proxy)==null?void 0:y.$emit)==null?void 0:i.bind(re==null?void 0:re.proxy));let ue=L;r||(r="modelValue"),ue=L||ue||`update:${r.toString()}`;const le=ae=>k?isFunction$2(k)?k(ae):cloneFnJSON(ae):ae,oe=()=>isDef(t[r])?le(t[r]):z;if($){const ae=oe(),Ue=ref(ae);return watch(()=>t[r],de=>Ue.value=le(de)),watch(Ue,de=>{(de!==t[r]||V)&&ie(ue,de)},{deep:V}),Ue}else return computed({get(){return oe()},set(ae){ie(ue,ae)}})}function useWindowSize(t={}){const{window:r=defaultWindow,initialWidth:e=1/0,initialHeight:n=1/0,listenOrientation:g=!0,includeScrollbar:y=!0}=t,i=ref(e),k=ref(n),$=()=>{r&&(y?(i.value=r.innerWidth,k.value=r.innerHeight):(i.value=r.document.documentElement.clientWidth,k.value=r.document.documentElement.clientHeight))};return $(),tryOnMounted($),useEventListener("resize",$,{passive:!0}),g&&useEventListener("orientationchange",$,{passive:!0}),{width:i,height:k}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(t,r)=>{if(!isClient||!t||!r)return!1;const e=t.getBoundingClientRect();let n;return r instanceof Element?n=r.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},e.top<n.bottom&&e.bottom>n.top&&e.right>n.left&&e.left<n.right};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var r=hasOwnProperty$d.call(t,symToStringTag$1),e=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var n=!0}catch{}var g=nativeObjectToString$1.call(t);return n&&(r?t[symToStringTag$1]=e:delete t[symToStringTag$1]),g}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag$3="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$3}function arrayMap(t,r){for(var e=-1,n=t==null?0:t.length,g=Array(n);++e<n;)g[e]=r(t[e],e,t);return g}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var r=t+"";return r=="0"&&1/t==-INFINITY$3?"-0":r}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var r=t.length;r--&&reWhitespace.test(t.charAt(r)););return r}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject$1(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$1(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$1(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){if(!t)return t===0?t:0;if(t=toNumber(t),t===INFINITY$2||t===-INFINITY$2){var r=t<0?-1:1;return r*MAX_INTEGER}return t===t?t:0}function toInteger(t){var r=toFinite(t),e=r%1;return r===r?e?r-e:r:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var r=baseGetTag(t);return r==funcTag$2||r==genTag$1||r==asyncTag||r==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(t){if(t!=null){try{return funcToString$2.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var r=isFunction$1(t)?reIsNative:reIsHostCtor;return r.test(toSource(t))}function getValue$1(t,r){return t==null?void 0:t[r]}function getNative(t,r){var e=getValue$1(t,r);return baseIsNative(e)?e:void 0}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function t(){}return function(r){if(!isObject$1(r))return{};if(objectCreate)return objectCreate(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();const baseCreate$1=baseCreate;function apply(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function copyArray(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var r=0,e=0;return function(){var n=nativeNow(),g=HOT_SPAN-(n-e);if(e=n,g>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(t,r){return defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function baseFindIndex(t,r,e,n){for(var g=t.length,y=e+(n?1:-1);n?y--:++y<g;)if(r(t[y],y,t))return y;return-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,r){var e=typeof t;return r=r??MAX_SAFE_INTEGER$1,!!r&&(e=="number"||e!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<r}function baseAssignValue(t,r,e){r=="__proto__"&&defineProperty$1?defineProperty$1(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function eq(t,r){return t===r||t!==t&&r!==r}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(t,r,e){var n=t[r];(!(hasOwnProperty$b.call(t,r)&&eq(n,e))||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function copyObject(t,r,e,n){var g=!e;e||(e={});for(var y=-1,i=r.length;++y<i;){var k=r[y],$=n?n(e[k],t[k],k,e,t):void 0;$===void 0&&($=t[k]),g?baseAssignValue(e,k,$):assignValue(e,k,$)}return e}var nativeMax$2=Math.max;function overRest(t,r,e){return r=nativeMax$2(r===void 0?t.length-1:r,0),function(){for(var n=arguments,g=-1,y=nativeMax$2(n.length-r,0),i=Array(y);++g<y;)i[g]=n[r+g];g=-1;for(var k=Array(r+1);++g<r;)k[g]=n[g];return k[r]=e(i),apply(t,this,k)}}function baseRest(t,r){return setToString$1(overRest(t,r,identity),t+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}function isIterateeCall(t,r,e){if(!isObject$1(e))return!1;var n=typeof r;return(n=="number"?isArrayLike(e)&&isIndex(r,e.length):n=="string"&&r in e)?eq(e[r],t):!1}function createAssigner(t){return baseRest(function(r,e){var n=-1,g=e.length,y=g>1?e[g-1]:void 0,i=g>2?e[2]:void 0;for(y=t.length>3&&typeof y=="function"?(g--,y):void 0,i&&isIterateeCall(e[0],e[1],i)&&(y=g<3?void 0:y,g=1),r=Object(r);++n<g;){var k=e[n];k&&t(r,k,n,y)}return r})}var objectProto$b=Object.prototype;function isPrototype(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||objectProto$b;return t===e}function baseTimes(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var argsTag$3="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$a.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(r){return t(r)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(t,r){var e=isArray$2(t),n=!e&&isArguments$1(t),g=!e&&!n&&isBuffer$2(t),y=!e&&!n&&!g&&isTypedArray$2(t),i=e||n||g||y,k=i?baseTimes(t.length,String):[],$=k.length;for(var L in t)(r||hasOwnProperty$9.call(t,L))&&!(i&&(L=="length"||g&&(L=="offset"||L=="parent")||y&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||isIndex(L,$)))&&k.push(L);return k}function overArg(t,r){return function(e){return t(r(e))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var r=[];for(var e in Object(t))hasOwnProperty$8.call(t,e)&&e!="constructor"&&r.push(e);return r}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function nativeKeysIn(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var r=isPrototype(t),e=[];for(var n in t)n=="constructor"&&(r||!hasOwnProperty$7.call(t,n))||e.push(n);return e}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,r){if(isArray$2(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||r!=null&&t in Object(r)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(t){var r=this.__data__;if(nativeCreate$1){var e=r[t];return e===HASH_UNDEFINED$2?void 0:e}return hasOwnProperty$6.call(r,t)?r[t]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(t){var r=this.__data__;return nativeCreate$1?r[t]!==void 0:hasOwnProperty$5.call(r,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nativeCreate$1&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(t,r){for(var e=t.length;e--;)if(eq(t[e][0],r))return e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var r=this.__data__,e=assocIndexOf(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():splice.call(r,e,1),--this.size,!0}function listCacheGet(t){var r=this.__data__,e=assocIndexOf(r,t);return e<0?void 0:r[e][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,r){var e=this.__data__,n=assocIndexOf(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function ListCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function getMapData(t,r){var e=t.__data__;return isKeyable(r)?e[typeof r=="string"?"string":"hash"]:e.map}function mapCacheDelete(t){var r=getMapData(this,t).delete(t);return this.size-=r?1:0,r}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,r){var e=getMapData(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function MapCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var e=function(){var n=arguments,g=r?r.apply(this,n):n[0],y=e.cache;if(y.has(g))return y.get(g);var i=t.apply(this,n);return e.cache=y.set(g,i)||y,i};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var r=memoize(t,function(n){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),n}),e=r.cache;return r}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(rePropName,function(e,n,g,y){r.push(g?y.replace(reEscapeChar,"$1"):n||e)}),r});const stringToPath$1=stringToPath;function toString$1(t){return t==null?"":baseToString(t)}function castPath(t,r){return isArray$2(t)?t:isKey(t,r)?[t]:stringToPath$1(toString$1(t))}var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var r=t+"";return r=="0"&&1/t==-INFINITY$1?"-0":r}function baseGet(t,r){r=castPath(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[toKey(r[e++])];return e&&e==n?t:void 0}function get(t,r,e){var n=t==null?void 0:baseGet(t,r);return n===void 0?e:n}function arrayPush(t,r){for(var e=-1,n=r.length,g=t.length;++e<n;)t[g+e]=r[e];return t}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(t){return isArray$2(t)||isArguments$1(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}function baseFlatten(t,r,e,n,g){var y=-1,i=t.length;for(e||(e=isFlattenable),g||(g=[]);++y<i;){var k=t[y];r>0&&e(k)?r>1?baseFlatten(k,r-1,e,n,g):arrayPush(g,k):n||(g[g.length]=k)}return g}function flatten(t){var r=t==null?0:t.length;return r?baseFlatten(t,1):[]}function flatRest(t){return setToString$1(overRest(t,void 0,flatten),t+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$3)return!1;var r=getPrototype$1(t);if(r===null)return!0;var e=hasOwnProperty$4.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&funcToString.call(e)==objectCtorString}function castArray$1(){if(!arguments.length)return[];var t=arguments[0];return isArray$2(t)?t:[t]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,r){var e=this.__data__;if(e instanceof ListCache){var n=e.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new MapCache(n)}return e.set(t,r),this.size=e.size,this}function Stack(t){var r=this.__data__=new ListCache(t);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(t,r){return t&&copyObject(r,keys(r),t)}function baseAssignIn(t,r){return t&&copyObject(r,keysIn(r),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,r){if(r)return t.slice();var e=t.length,n=allocUnsafe?allocUnsafe(e):new t.constructor(e);return t.copy(n),n}function arrayFilter(t,r){for(var e=-1,n=t==null?0:t.length,g=0,y=[];++e<n;){var i=t[e];r(i,e,t)&&(y[g++]=i)}return y}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(r){return propertyIsEnumerable.call(t,r)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,r){return copyObject(t,getSymbols$1(t),r)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var r=[];t;)arrayPush(r,getSymbols$1(t)),t=getPrototype$1(t);return r}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,r){return copyObject(t,getSymbolsIn$1(t),r)}function baseGetAllKeys(t,r,e){var n=r(t);return isArray$2(t)?n:arrayPush(n,e(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView=getNative(root$1,"DataView");const DataView$1=DataView;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var r=baseGetTag(t),e=r==objectTag$2?t.constructor:void 0,n=e?toSource(e):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return r});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&hasOwnProperty$3.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new Uint8Array$2(r).set(new Uint8Array$2(t)),r}function cloneDataView(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var r=new t.constructor(t.source,reFlags.exec(t));return r.lastIndex=t.lastIndex,r}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf$1?Object(symbolValueOf$1.call(t)):{}}function cloneTypedArray(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,r,e){var n=t.constructor;switch(r){case arrayBufferTag$2:return cloneArrayBuffer(t);case boolTag$2:case dateTag$2:return new n(+t);case dataViewTag$2:return cloneDataView(t,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,e);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(t);case regexpTag$2:return cloneRegExp(t);case setTag$3:return new n;case symbolTag$2:return cloneSymbol(t)}}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$2="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$2="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,r,e,n,g,y){var i,k=r&CLONE_DEEP_FLAG$1,$=r&CLONE_FLAT_FLAG,L=r&CLONE_SYMBOLS_FLAG$2;if(e&&(i=g?e(t,n,g,y):e(t)),i!==void 0)return i;if(!isObject$1(t))return t;var V=isArray$2(t);if(V){if(i=initCloneArray(t),!k)return copyArray(t,i)}else{var z=getTag$1(t),re=z==funcTag||z==genTag;if(isBuffer$2(t))return cloneBuffer(t,k);if(z==objectTag$1||z==argsTag$1||re&&!g){if(i=$||re?{}:initCloneObject(t),!k)return $?copySymbolsIn(t,baseAssignIn(i,t)):copySymbols(t,baseAssign(i,t))}else{if(!cloneableTags[z])return g?t:{};i=initCloneByTag(t,z,k)}}y||(y=new Stack);var ie=y.get(t);if(ie)return ie;y.set(t,i),isSet$1(t)?t.forEach(function(oe){i.add(baseClone(oe,r,e,oe,t,y))}):isMap$1(t)&&t.forEach(function(oe,ae){i.set(ae,baseClone(oe,r,e,ae,t,y))});var ue=L?$?getAllKeysIn:getAllKeys:$?keysIn:keys,le=V?void 0:ue(t);return arrayEach(le||t,function(oe,ae){le&&(ae=oe,oe=t[ae]),assignValue(i,ae,baseClone(oe,r,e,ae,t,y))}),i}var CLONE_SYMBOLS_FLAG$1=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new MapCache;++r<e;)this.add(t[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function cacheHas(t,r){return t.has(r)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,r,e,n,g,y){var i=e&COMPARE_PARTIAL_FLAG$5,k=t.length,$=r.length;if(k!=$&&!(i&&$>k))return!1;var L=y.get(t),V=y.get(r);if(L&&V)return L==r&&V==t;var z=-1,re=!0,ie=e&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(y.set(t,r),y.set(r,t);++z<k;){var ue=t[z],le=r[z];if(n)var oe=i?n(le,ue,z,r,t,y):n(ue,le,z,t,r,y);if(oe!==void 0){if(oe)continue;re=!1;break}if(ie){if(!arraySome(r,function(ae,Ue){if(!cacheHas(ie,Ue)&&(ue===ae||g(ue,ae,e,n,y)))return ie.push(Ue)})){re=!1;break}}else if(!(ue===le||g(ue,le,e,n,y))){re=!1;break}}return y.delete(t),y.delete(r),re}function mapToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n,g){e[++r]=[g,n]}),e}function setToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(t,r,e,n,g,y,i){switch(e){case dataViewTag:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case arrayBufferTag:return!(t.byteLength!=r.byteLength||!y(new Uint8Array$2(t),new Uint8Array$2(r)));case boolTag:case dateTag:case numberTag:return eq(+t,+r);case errorTag:return t.name==r.name&&t.message==r.message;case regexpTag:case stringTag:return t==r+"";case mapTag:var k=mapToArray;case setTag:var $=n&COMPARE_PARTIAL_FLAG$4;if(k||(k=setToArray),t.size!=r.size&&!$)return!1;var L=i.get(t);if(L)return L==r;n|=COMPARE_UNORDERED_FLAG$2,i.set(t,r);var V=equalArrays(k(t),k(r),n,g,y,i);return i.delete(t),V;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(r)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(t,r,e,n,g,y){var i=e&COMPARE_PARTIAL_FLAG$3,k=getAllKeys(t),$=k.length,L=getAllKeys(r),V=L.length;if($!=V&&!i)return!1;for(var z=$;z--;){var re=k[z];if(!(i?re in r:hasOwnProperty$2.call(r,re)))return!1}var ie=y.get(t),ue=y.get(r);if(ie&&ue)return ie==r&&ue==t;var le=!0;y.set(t,r),y.set(r,t);for(var oe=i;++z<$;){re=k[z];var ae=t[re],Ue=r[re];if(n)var de=i?n(Ue,ae,re,r,t,y):n(ae,Ue,re,t,r,y);if(!(de===void 0?ae===Ue||g(ae,Ue,e,n,y):de)){le=!1;break}oe||(oe=re=="constructor")}if(le&&!oe){var _e=t.constructor,Ve=r.constructor;_e!=Ve&&"constructor"in t&&"constructor"in r&&!(typeof _e=="function"&&_e instanceof _e&&typeof Ve=="function"&&Ve instanceof Ve)&&(le=!1)}return y.delete(t),y.delete(r),le}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(t,r,e,n,g,y){var i=isArray$2(t),k=isArray$2(r),$=i?arrayTag:getTag$1(t),L=k?arrayTag:getTag$1(r);$=$==argsTag?objectTag:$,L=L==argsTag?objectTag:L;var V=$==objectTag,z=L==objectTag,re=$==L;if(re&&isBuffer$2(t)){if(!isBuffer$2(r))return!1;i=!0,V=!1}if(re&&!V)return y||(y=new Stack),i||isTypedArray$2(t)?equalArrays(t,r,e,n,g,y):equalByTag(t,r,$,e,n,g,y);if(!(e&COMPARE_PARTIAL_FLAG$2)){var ie=V&&hasOwnProperty$1.call(t,"__wrapped__"),ue=z&&hasOwnProperty$1.call(r,"__wrapped__");if(ie||ue){var le=ie?t.value():t,oe=ue?r.value():r;return y||(y=new Stack),g(le,oe,e,n,y)}}return re?(y||(y=new Stack),equalObjects(t,r,e,n,g,y)):!1}function baseIsEqual(t,r,e,n,g){return t===r?!0:t==null||r==null||!isObjectLike(t)&&!isObjectLike(r)?t!==t&&r!==r:baseIsEqualDeep(t,r,e,n,baseIsEqual,g)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,r,e,n){var g=e.length,y=g,i=!n;if(t==null)return!y;for(t=Object(t);g--;){var k=e[g];if(i&&k[2]?k[1]!==t[k[0]]:!(k[0]in t))return!1}for(;++g<y;){k=e[g];var $=k[0],L=t[$],V=k[1];if(i&&k[2]){if(L===void 0&&!($ in t))return!1}else{var z=new Stack;if(n)var re=n(L,V,$,t,r,z);if(!(re===void 0?baseIsEqual(V,L,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,z):re))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var r=keys(t),e=r.length;e--;){var n=r[e],g=t[n];r[e]=[n,g,isStrictComparable(g)]}return r}function matchesStrictComparable(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function baseMatches(t){var r=getMatchData(t);return r.length==1&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(e){return e===t||baseIsMatch(e,t,r)}}function baseHasIn(t,r){return t!=null&&r in Object(t)}function hasPath(t,r,e){r=castPath(r,t);for(var n=-1,g=r.length,y=!1;++n<g;){var i=toKey(r[n]);if(!(y=t!=null&&e(t,i)))break;t=t[i]}return y||++n!=g?y:(g=t==null?0:t.length,!!g&&isLength(g)&&isIndex(i,g)&&(isArray$2(t)||isArguments$1(t)))}function hasIn(t,r){return t!=null&&hasPath(t,r,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,r){return isKey(t)&&isStrictComparable(r)?matchesStrictComparable(toKey(t),r):function(e){var n=get(e,t);return n===void 0&&n===r?hasIn(e,t):baseIsEqual(r,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(r){return r==null?void 0:r[t]}}function basePropertyDeep(t){return function(r){return baseGet(r,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$2(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(t){return function(r,e,n){for(var g=-1,y=Object(r),i=n(r),k=i.length;k--;){var $=i[t?k:++g];if(e(y[$],$,y)===!1)break}return r}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(t,r){return t&&baseFor$1(t,r,keys)}function createBaseEach(t,r){return function(e,n){if(e==null)return e;if(!isArrayLike(e))return t(e,n);for(var g=e.length,y=r?g:-1,i=Object(e);(r?y--:++y<g)&&n(i[y],y,i)!==!1;);return e}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(t,r,e){var n,g,y,i,k,$,L=0,V=!1,z=!1,re=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);r=toNumber(r)||0,isObject$1(e)&&(V=!!e.leading,z="maxWait"in e,y=z?nativeMax$1(toNumber(e.maxWait)||0,r):y,re="trailing"in e?!!e.trailing:re);function ie($e){var Lt=n,jt=g;return n=g=void 0,L=$e,i=t.apply(jt,Lt),i}function ue($e){return L=$e,k=setTimeout(ae,r),V?ie($e):i}function le($e){var Lt=$e-$,jt=$e-L,Et=r-Lt;return z?nativeMin$1(Et,y-jt):Et}function oe($e){var Lt=$e-$,jt=$e-L;return $===void 0||Lt>=r||Lt<0||z&&jt>=y}function ae(){var $e=now$1();if(oe($e))return Ue($e);k=setTimeout(ae,le($e))}function Ue($e){return k=void 0,re&&n?ie($e):(n=g=void 0,i)}function de(){k!==void 0&&clearTimeout(k),L=0,n=$=g=k=void 0}function _e(){return k===void 0?i:Ue(now$1())}function Ve(){var $e=now$1(),Lt=oe($e);if(n=arguments,g=this,$=$e,Lt){if(k===void 0)return ue($);if(z)return clearTimeout(k),k=setTimeout(ae,r),ie($)}return k===void 0&&(k=setTimeout(ae,r)),i}return Ve.cancel=de,Ve.flush=_e,Ve}function assignMergeValue(t,r,e){(e!==void 0&&!eq(t[r],e)||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function safeGet(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}function toPlainObject(t){return copyObject(t,keysIn(t))}function baseMergeDeep(t,r,e,n,g,y,i){var k=safeGet(t,e),$=safeGet(r,e),L=i.get($);if(L){assignMergeValue(t,e,L);return}var V=y?y(k,$,e+"",t,r,i):void 0,z=V===void 0;if(z){var re=isArray$2($),ie=!re&&isBuffer$2($),ue=!re&&!ie&&isTypedArray$2($);V=$,re||ie||ue?isArray$2(k)?V=k:isArrayLikeObject(k)?V=copyArray(k):ie?(z=!1,V=cloneBuffer($,!0)):ue?(z=!1,V=cloneTypedArray($,!0)):V=[]:isPlainObject$1($)||isArguments$1($)?(V=k,isArguments$1(k)?V=toPlainObject(k):(!isObject$1(k)||isFunction$1(k))&&(V=initCloneObject($))):z=!1}z&&(i.set($,V),g(V,$,n,y,i),i.delete($)),assignMergeValue(t,e,V)}function baseMerge(t,r,e,n,g){t!==r&&baseFor$1(r,function(y,i){if(g||(g=new Stack),isObject$1(y))baseMergeDeep(t,r,i,e,baseMerge,n,g);else{var k=n?n(safeGet(t,i),y,i+"",t,r,g):void 0;k===void 0&&(k=y),assignMergeValue(t,i,k)}},keysIn)}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var g=n-1;return e!==void 0&&(g=toInteger(e),g=e<0?nativeMax(n+g,0):nativeMin(g,n-1)),baseFindIndex(t,baseIteratee(r),g,!0)}function baseMap(t,r){var e=-1,n=isArrayLike(t)?Array(t.length):[];return baseEach$1(t,function(g,y,i){n[++e]=r(g,y,i)}),n}function map(t,r){var e=isArray$2(t)?arrayMap:baseMap;return e(t,baseIteratee(r))}function flatMap(t,r){return baseFlatten(map(t,r),1)}var INFINITY=1/0;function flattenDeep(t){var r=t==null?0:t.length;return r?baseFlatten(t,INFINITY):[]}function fromPairs(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var g=t[r];n[g[0]]=g[1]}return n}function isEqual(t,r){return baseIsEqual(t,r)}function isNil(t){return t==null}function isUndefined$2(t){return t===void 0}var merge$1=createAssigner(function(t,r,e){baseMerge(t,r,e)});const merge$2=merge$1;function baseSet(t,r,e,n){if(!isObject$1(t))return t;r=castPath(r,t);for(var g=-1,y=r.length,i=y-1,k=t;k!=null&&++g<y;){var $=toKey(r[g]),L=e;if($==="__proto__"||$==="constructor"||$==="prototype")return t;if(g!=i){var V=k[$];L=n?n(V,$,k):void 0,L===void 0&&(L=isObject$1(V)?V:isIndex(r[g+1])?[]:{})}assignValue(k,$,L),k=k[$]}return t}function basePickBy(t,r,e){for(var n=-1,g=r.length,y={};++n<g;){var i=r[n],k=baseGet(t,i);e(k,i)&&baseSet(y,castPath(i,t),k)}return y}function basePick(t,r){return basePickBy(t,r,function(e,n){return hasIn(t,n)})}var pick=flatRest(function(t,r){return t==null?{}:basePick(t,r)});const pick$1=pick;function set(t,r,e){return t==null?t:baseSet(t,r,e)}var FUNC_ERROR_TEXT="Expected a function";function throttle(t,r,e){var n=!0,g=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(e)&&(n="leading"in e?!!e.leading:n,g="trailing"in e?!!e.trailing:g),debounce(t,r,{leading:n,maxWait:r,trailing:g})}const isUndefined$1=t=>t===void 0,isBoolean$1=t=>typeof t=="boolean",isNumber$1=t=>typeof t=="number",isEmpty=t=>!t&&t!==0||isArray$3(t)&&t.length===0||isObject$2(t)&&!Object.keys(t).length,isElement=t=>typeof Element>"u"?!1:t instanceof Element,isStringNumber=t=>isString$2(t)?!Number.isNaN(Number(t)):!1,escapeStringRegexp=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize=t=>capitalize$1(t),keysOf=t=>Object.keys(t),entriesOf=t=>Object.entries(t),getProp=(t,r,e)=>({get value(){return get(t,r,e)},set value(n){set(t,r,n)}});class ElementPlusError extends Error{constructor(r){super(r),this.name="ElementPlusError"}}function throwError(t,r){throw new ElementPlusError(`[${t}] ${r}`)}function debugWarn(t,r){}const classNameToArray=(t="")=>t.split(" ").filter(r=>!!r.trim()),hasClass=(t,r)=>{if(!t||!r)return!1;if(r.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(r)},addClass=(t,r)=>{!t||!r.trim()||t.classList.add(...classNameToArray(r))},removeClass=(t,r)=>{!t||!r.trim()||t.classList.remove(...classNameToArray(r))},getStyle=(t,r)=>{var e;if(!isClient||!t||!r)return"";let n=camelize(r);n==="float"&&(n="cssFloat");try{const g=t.style[n];if(g)return g;const y=(e=document.defaultView)==null?void 0:e.getComputedStyle(t,"");return y?y[n]:""}catch{return t.style[n]}};function addUnit(t,r="px"){if(!t)return"";if(isNumber$1(t)||isStringNumber(t))return`${t}${r}`;if(isString$2(t))return t}const isScroll=(t,r)=>{if(!isClient)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(r)],n=getStyle(t,e);return["scroll","auto","overlay"].some(g=>n.includes(g))},getScrollContainer=(t,r)=>{if(!isClient)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(isScroll(e,r))return e;e=e.parentNode}return e};let scrollBarWidth;const getScrollBarWidth=t=>{var r;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const g=document.createElement("div");g.style.width="100%",e.appendChild(g);const y=g.offsetWidth;return(r=e.parentNode)==null||r.removeChild(e),scrollBarWidth=n-y,scrollBarWidth};function scrollIntoView(t,r){if(!isClient)return;if(!r){t.scrollTop=0;return}const e=[];let n=r.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const g=r.offsetTop+e.reduce(($,L)=>$+L.offsetTop,0),y=g+r.offsetHeight,i=t.scrollTop,k=i+t.clientHeight;g<i?t.scrollTop=g:y>k&&(t.scrollTop=y-t.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var arrow_down_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowDown",__name:"arrow-down",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),arrow_down_default=arrow_down_vue_vue_type_script_setup_true_lang_default,arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowLeft",__name:"arrow-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_left_default=arrow_left_vue_vue_type_script_setup_true_lang_default,arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowRight",__name:"arrow-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_right_default=arrow_right_vue_vue_type_script_setup_true_lang_default,arrow_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowUp",__name:"arrow-up",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),arrow_up_default=arrow_up_vue_vue_type_script_setup_true_lang_default,check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Check",__name:"check",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),check_default=check_vue_vue_type_script_setup_true_lang_default,circle_check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCheck",__name:"circle-check",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),circle_check_default=circle_check_vue_vue_type_script_setup_true_lang_default,circle_close_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),circle_close_filled_default=circle_close_filled_vue_vue_type_script_setup_true_lang_default,circle_close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleClose",__name:"circle-close",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),circle_close_default=circle_close_vue_vue_type_script_setup_true_lang_default,close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Close",__name:"close",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),close_default=close_vue_vue_type_script_setup_true_lang_default,cpu_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Cpu",__name:"cpu",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M320 256a64 64 0 0 0-64 64v384a64 64 0 0 0 64 64h384a64 64 0 0 0 64-64V320a64 64 0 0 0-64-64zm0-64h384a128 128 0 0 1 128 128v384a128 128 0 0 1-128 128H320a128 128 0 0 1-128-128V320a128 128 0 0 1 128-128"}),createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m-320 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 896a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m160 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m-320 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32M64 512a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0-160a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0 320a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m896-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0 320a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32"})]))}}),cpu_default=cpu_vue_vue_type_script_setup_true_lang_default,d_arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),d_arrow_left_default=d_arrow_left_vue_vue_type_script_setup_true_lang_default,d_arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),d_arrow_right_default=d_arrow_right_vue_vue_type_script_setup_true_lang_default,delete_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Delete",__name:"delete",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),delete_default=delete_vue_vue_type_script_setup_true_lang_default,document_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Document",__name:"document",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),document_default=document_vue_vue_type_script_setup_true_lang_default,edit_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Edit",__name:"edit",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),edit_default=edit_vue_vue_type_script_setup_true_lang_default,full_screen_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"FullScreen",__name:"full-screen",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),full_screen_default=full_screen_vue_vue_type_script_setup_true_lang_default,hide_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Hide",__name:"hide",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),hide_default=hide_vue_vue_type_script_setup_true_lang_default,house_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"House",__name:"house",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),house_default=house_vue_vue_type_script_setup_true_lang_default,info_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"InfoFilled",__name:"info-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),info_filled_default=info_filled_vue_vue_type_script_setup_true_lang_default,loading_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Loading",__name:"loading",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),loading_default=loading_vue_vue_type_script_setup_true_lang_default,minus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Minus",__name:"minus",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),minus_default=minus_vue_vue_type_script_setup_true_lang_default,more_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"MoreFilled",__name:"more-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),more_filled_default=more_filled_vue_vue_type_script_setup_true_lang_default,more_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"More",__name:"more",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),more_default=more_vue_vue_type_script_setup_true_lang_default,picture_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Picture",__name:"picture",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),createBaseVNode("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),picture_default=picture_vue_vue_type_script_setup_true_lang_default,plus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Plus",__name:"plus",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),plus_default=plus_vue_vue_type_script_setup_true_lang_default,refresh_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshLeft",__name:"refresh-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),refresh_left_default=refresh_left_vue_vue_type_script_setup_true_lang_default,refresh_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshRight",__name:"refresh-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),refresh_right_default=refresh_right_vue_vue_type_script_setup_true_lang_default,refresh_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Refresh",__name:"refresh",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),refresh_default=refresh_vue_vue_type_script_setup_true_lang_default,scale_to_original_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),scale_to_original_default=scale_to_original_vue_vue_type_script_setup_true_lang_default,set_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SetUp",__name:"set-up",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96"}),createBaseVNode("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),createBaseVNode("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32m160 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),createBaseVNode("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32"})]))}}),set_up_default=set_up_vue_vue_type_script_setup_true_lang_default,setting_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Setting",__name:"setting",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384m0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256"})]))}}),setting_default=setting_vue_vue_type_script_setup_true_lang_default,success_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SuccessFilled",__name:"success-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),success_filled_default=success_filled_vue_vue_type_script_setup_true_lang_default,switch_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Switch",__name:"switch",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32"})]))}}),switch_default=switch_vue_vue_type_script_setup_true_lang_default,tickets_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Tickets",__name:"tickets",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h192v64H320zm0 384h384v64H320z"})]))}}),tickets_default=tickets_vue_vue_type_script_setup_true_lang_default,upload_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Upload",__name:"upload",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248z"})]))}}),upload_default=upload_vue_vue_type_script_setup_true_lang_default,view_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"View",__name:"view",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),view_default=view_vue_vue_type_script_setup_true_lang_default,warning_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"WarningFilled",__name:"warning-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),warning_filled_default=warning_filled_vue_vue_type_script_setup_true_lang_default,zoom_in_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomIn",__name:"zoom-in",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),zoom_in_default=zoom_in_vue_vue_type_script_setup_true_lang_default,zoom_out_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomOut",__name:"zoom-out",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),zoom_out_default=zoom_out_vue_vue_type_script_setup_true_lang_default;const epPropKey="__epPropKey",definePropType=t=>t,isEpProp=t=>isObject$2(t)&&!!t[epPropKey],buildProp=(t,r)=>{if(!isObject$2(t)||isEpProp(t))return t;const{values:e,required:n,default:g,type:y,validator:i}=t,$={type:y,required:!!n,validator:e||i?L=>{let V=!1,z=[];if(e&&(z=Array.from(e),hasOwn(t,"default")&&z.push(g),V||(V=z.includes(L))),i&&(V||(V=i(L))),!V&&z.length>0){const re=[...new Set(z)].map(ie=>JSON.stringify(ie)).join(", ");warn(`Invalid prop: validation failed${r?` for prop "${r}"`:""}. Expected one of [${re}], got value ${JSON.stringify(L)}.`)}return V}:void 0,[epPropKey]:!0};return hasOwn(t,"default")&&($.default=g),$},buildProps=t=>fromPairs(Object.entries(t).map(([r,e])=>[r,buildProp(e,r)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(t,r)=>{if(t.install=e=>{for(const n of[t,...Object.values(r??{})])e.component(n.name,n)},r)for(const[e,n]of Object.entries(r))t[e]=n;return t},withInstallFunction=(t,r)=>(t.install=e=>{t._context=e._context,e.config.globalProperties[r]=t},t),withNoopInstall=t=>(t.install=NOOP,t),composeRefs=(...t)=>r=>{t.forEach(e=>{isFunction$3(e)?e(r):e.value=r})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",componentSizes=["","default","small","large"],isValidComponentSize=t=>["",...componentSizes].includes(t);var PatchFlags=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(PatchFlags||{});function isFragment(t){return isVNode(t)&&t.type===Fragment}function isComment(t){return isVNode(t)&&t.type===Comment}function isValidElementNode(t){return isVNode(t)&&!isFragment(t)&&!isComment(t)}const flattedChildren=t=>{const r=isArray$3(t)?t:[t],e=[];return r.forEach(n=>{var g;isArray$3(n)?e.push(...flattedChildren(n)):isVNode(n)&&isArray$3(n.children)?e.push(...flattedChildren(n.children)):(e.push(n),isVNode(n)&&((g=n.component)!=null&&g.subTree)&&e.push(...flattedChildren(n.component.subTree)))}),e},unique=t=>[...new Set(t)],castArray=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],isKorean=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),rAF=t=>isClient?window.requestAnimationFrame(t):setTimeout(t,16),mutable=t=>t,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(t={})=>{const{excludeListeners:r=!1,excludeKeys:e}=t,n=computed(()=>((e==null?void 0:e.value)||[]).concat(DEFAULT_EXCLUDE_KEYS)),g=getCurrentInstance();return computed(g?()=>{var y;return fromPairs(Object.entries((y=g.proxy)==null?void 0:y.$attrs).filter(([i])=>!n.value.includes(i)&&!(r&&LISTENER_PREFIX.test(i))))}:()=>({}))},useDeprecated=({from:t,replacement:r,scope:e,version:n,ref:g,type:y="API"},i)=>{watch(()=>unref(i),k=>{},{immediate:!0})},useDraggable=(t,r,e,n)=>{let g={offsetX:0,offsetY:0};const y=$=>{const L=$.clientX,V=$.clientY,{offsetX:z,offsetY:re}=g,ie=t.value.getBoundingClientRect(),ue=ie.left,le=ie.top,oe=ie.width,ae=ie.height,Ue=document.documentElement.clientWidth,de=document.documentElement.clientHeight,_e=-ue+z,Ve=-le+re,$e=Ue-ue-oe+z,Lt=de-le-ae+re,jt=ir=>{let ur=z+ir.clientX-L,Dt=re+ir.clientY-V;n!=null&&n.value||(ur=Math.min(Math.max(ur,_e),$e),Dt=Math.min(Math.max(Dt,Ve),Lt)),g={offsetX:ur,offsetY:Dt},t.value&&(t.value.style.transform=`translate(${addUnit(ur)}, ${addUnit(Dt)})`)},Et=()=>{document.removeEventListener("mousemove",jt),document.removeEventListener("mouseup",Et)};document.addEventListener("mousemove",jt),document.addEventListener("mouseup",Et)},i=()=>{r.value&&t.value&&r.value.addEventListener("mousedown",y)},k=()=>{r.value&&t.value&&r.value.removeEventListener("mousedown",y)};onMounted(()=>{watchEffect(()=>{e.value?i():k()})}),onBeforeUnmount(()=>{k()})};var English={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const buildTranslator=t=>(r,e)=>translate(r,e,unref(t)),translate=(t,r,e)=>get(e,t,t).replace(/\{(\w+)\}/g,(n,g)=>{var y;return`${(y=r==null?void 0:r[g])!=null?y:`{${g}}`}`}),buildLocaleContext=t=>{const r=computed(()=>unref(t).name),e=isRef(t)?t:ref(t);return{lang:r,locale:e,t:buildTranslator(t)}},localeContextKey=Symbol("localeContextKey"),useLocale=t=>{const r=t||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>r.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(t,r,e,n,g)=>{let y=`${t}-${r}`;return e&&(y+=`-${e}`),n&&(y+=`__${n}`),g&&(y+=`--${g}`),y},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=t=>{const r=t||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(r)||defaultNamespace)},useNamespace=(t,r)=>{const e=useGetDerivedNamespace(r);return{namespace:e,b:(le="")=>_bem(e.value,t,le,"",""),e:le=>le?_bem(e.value,t,"",le,""):"",m:le=>le?_bem(e.value,t,"","",le):"",be:(le,oe)=>le&&oe?_bem(e.value,t,le,oe,""):"",em:(le,oe)=>le&&oe?_bem(e.value,t,"",le,oe):"",bm:(le,oe)=>le&&oe?_bem(e.value,t,le,"",oe):"",bem:(le,oe,ae)=>le&&oe&&ae?_bem(e.value,t,le,oe,ae):"",is:(le,...oe)=>{const ae=oe.length>=1?oe[0]:!0;return le&&ae?`${statePrefix}${le}`:""},cssVar:le=>{const oe={};for(const ae in le)le[ae]&&(oe[`--${e.value}-${ae}`]=le[ae]);return oe},cssVarName:le=>`--${e.value}-${le}`,cssVarBlock:le=>{const oe={};for(const ae in le)le[ae]&&(oe[`--${e.value}-${t}-${ae}`]=le[ae]);return oe},cssVarBlockName:le=>`--${e.value}-${t}-${le}`}},useLockscreen=(t,r={})=>{isRef(t)||throwError("[useLockscreen]","You need to pass a ref param to this function");const e=r.ns||useNamespace("popup"),n=computed$1(()=>e.bm("parent","hidden"));if(!isClient||hasClass(document.body,n.value))return;let g=0,y=!1,i="0";const k=()=>{setTimeout(()=>{removeClass(document==null?void 0:document.body,n.value),y&&document&&(document.body.style.width=i)},200)};watch(t,$=>{if(!$){k();return}y=!hasClass(document.body,n.value),y&&(i=document.body.style.width),g=getScrollBarWidth(e.namespace.value);const L=document.documentElement.clientHeight<document.body.scrollHeight,V=getStyle(document.body,"overflowY");g>0&&(L||V==="scroll")&&y&&(document.body.style.width=`calc(100% - ${g}px)`),addClass(document.body,n.value)}),onScopeDispose(()=>k())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=t=>{const r=`update:${t}`,e=`onUpdate:${t}`,n=[r],g={[t]:_prop,[e]:_event};return{useModelToggle:({indicator:i,toggleReason:k,shouldHideWhenRouteChanges:$,shouldProceed:L,onShow:V,onHide:z})=>{const re=getCurrentInstance(),{emit:ie}=re,ue=re.props,le=computed(()=>isFunction$3(ue[e])),oe=computed(()=>ue[t]===null),ae=Lt=>{i.value!==!0&&(i.value=!0,k&&(k.value=Lt),isFunction$3(V)&&V(Lt))},Ue=Lt=>{i.value!==!1&&(i.value=!1,k&&(k.value=Lt),isFunction$3(z)&&z(Lt))},de=Lt=>{if(ue.disabled===!0||isFunction$3(L)&&!L())return;const jt=le.value&&isClient;jt&&ie(r,!0),(oe.value||!jt)&&ae(Lt)},_e=Lt=>{if(ue.disabled===!0||!isClient)return;const jt=le.value&&isClient;jt&&ie(r,!1),(oe.value||!jt)&&Ue(Lt)},Ve=Lt=>{isBoolean$1(Lt)&&(ue.disabled&&Lt?le.value&&ie(r,!1):i.value!==Lt&&(Lt?ae():Ue()))},$e=()=>{i.value?_e():de()};return watch(()=>ue[t],Ve),$&&re.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...re.proxy.$route}),()=>{$.value&&i.value&&_e()}),onMounted(()=>{Ve(ue[t])}),{hide:_e,show:de,toggle:$e,hasUpdateHandler:le}},useModelToggleProps:g,useModelToggleEmits:n}};createModelToggleComposable("modelValue");const useProp=t=>{const r=getCurrentInstance();return computed(()=>{var e,n;return(n=(e=r==null?void 0:r.proxy)==null?void 0:e.$props)==null?void 0:n[t]})};var E$1="top",R="bottom",W="right",P$1="left",me="auto",G=[E$1,R,W,P$1],U$1="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(t,r){return t.concat([r+"-"+U$1,r+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(t,r){return t.concat([r,r+"-"+U$1,r+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt$1="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt$1,nt,rt];function C(t){return t?(t.nodeName||"").toLowerCase():null}function H(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function Q(t){var r=H(t).Element;return t instanceof r||t instanceof Element}function B(t){var r=H(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function Pe(t){if(typeof ShadowRoot>"u")return!1;var r=H(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}function Mt(t){var r=t.state;Object.keys(r.elements).forEach(function(e){var n=r.styles[e]||{},g=r.attributes[e]||{},y=r.elements[e];!B(y)||!C(y)||(Object.assign(y.style,n),Object.keys(g).forEach(function(i){var k=g[i];k===!1?y.removeAttribute(i):y.setAttribute(i,k===!0?"":k)}))})}function Rt(t){var r=t.state,e={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,e.popper),r.styles=e,r.elements.arrow&&Object.assign(r.elements.arrow.style,e.arrow),function(){Object.keys(r.elements).forEach(function(n){var g=r.elements[n],y=r.attributes[n]||{},i=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:e[n]),k=i.reduce(function($,L){return $[L]="",$},{});!B(g)||!C(g)||(Object.assign(g.style,k),Object.keys(y).forEach(function($){g.removeAttribute($)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(t){return t.split("-")[0]}var X$1=Math.max,ve=Math.min,Z=Math.round;function ee(t,r){r===void 0&&(r=!1);var e=t.getBoundingClientRect(),n=1,g=1;if(B(t)&&r){var y=t.offsetHeight,i=t.offsetWidth;i>0&&(n=Z(e.width)/i||1),y>0&&(g=Z(e.height)/y||1)}return{width:e.width/n,height:e.height/g,top:e.top/g,right:e.right/n,bottom:e.bottom/g,left:e.left/n,x:e.left/n,y:e.top/g}}function ke(t){var r=ee(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(r.width-e)<=1&&(e=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}function it(t,r){var e=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(e&&Pe(e)){var n=r;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function N$1(t){return H(t).getComputedStyle(t)}function Wt(t){return["table","td","th"].indexOf(C(t))>=0}function I$1(t){return((Q(t)?t.ownerDocument:t.document)||window.document).documentElement}function ge(t){return C(t)==="html"?t:t.assignedSlot||t.parentNode||(Pe(t)?t.host:null)||I$1(t)}function at(t){return!B(t)||N$1(t).position==="fixed"?null:t.offsetParent}function Bt(t){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&B(t)){var n=N$1(t);if(n.position==="fixed")return null}var g=ge(t);for(Pe(g)&&(g=g.host);B(g)&&["html","body"].indexOf(C(g))<0;){var y=N$1(g);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||r&&y.willChange==="filter"||r&&y.filter&&y.filter!=="none")return g;g=g.parentNode}return null}function se(t){for(var r=H(t),e=at(t);e&&Wt(e)&&N$1(e).position==="static";)e=at(e);return e&&(C(e)==="html"||C(e)==="body"&&N$1(e).position==="static")?r:e||Bt(t)||r}function Le(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fe(t,r,e){return X$1(t,ve(r,e))}function St(t,r,e){var n=fe(t,r,e);return n>e?e:n}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(t){return Object.assign({},st(),t)}function ct(t,r){return r.reduce(function(e,n){return e[n]=t,e},{})}var Tt=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ft(typeof t!="number"?t:ct(t,G))};function Ht(t){var r,e=t.state,n=t.name,g=t.options,y=e.elements.arrow,i=e.modifiersData.popperOffsets,k=q(e.placement),$=Le(k),L=[P$1,W].indexOf(k)>=0,V=L?"height":"width";if(!(!y||!i)){var z=Tt(g.padding,e),re=ke(y),ie=$==="y"?E$1:P$1,ue=$==="y"?R:W,le=e.rects.reference[V]+e.rects.reference[$]-i[$]-e.rects.popper[V],oe=i[$]-e.rects.reference[$],ae=se(y),Ue=ae?$==="y"?ae.clientHeight||0:ae.clientWidth||0:0,de=le/2-oe/2,_e=z[ie],Ve=Ue-re[V]-z[ue],$e=Ue/2-re[V]/2+de,Lt=fe(_e,$e,Ve),jt=$;e.modifiersData[n]=(r={},r[jt]=Lt,r.centerOffset=Lt-$e,r)}}function Ct(t){var r=t.state,e=t.options,n=e.element,g=n===void 0?"[data-popper-arrow]":n;g!=null&&(typeof g=="string"&&(g=r.elements.popper.querySelector(g),!g)||!it(r.elements.popper,g)||(r.elements.arrow=g))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(t){return t.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(t){var r=t.x,e=t.y,n=window,g=n.devicePixelRatio||1;return{x:Z(r*g)/g||0,y:Z(e*g)/g||0}}function ut(t){var r,e=t.popper,n=t.popperRect,g=t.placement,y=t.variation,i=t.offsets,k=t.position,$=t.gpuAcceleration,L=t.adaptive,V=t.roundOffsets,z=t.isFixed,re=i.x,ie=re===void 0?0:re,ue=i.y,le=ue===void 0?0:ue,oe=typeof V=="function"?V({x:ie,y:le}):{x:ie,y:le};ie=oe.x,le=oe.y;var ae=i.hasOwnProperty("x"),Ue=i.hasOwnProperty("y"),de=P$1,_e=E$1,Ve=window;if(L){var $e=se(e),Lt="clientHeight",jt="clientWidth";if($e===H(e)&&($e=I$1(e),N$1($e).position!=="static"&&k==="absolute"&&(Lt="scrollHeight",jt="scrollWidth")),$e=$e,g===E$1||(g===P$1||g===W)&&y===J){_e=R;var Et=z&&$e===Ve&&Ve.visualViewport?Ve.visualViewport.height:$e[Lt];le-=Et-n.height,le*=$?1:-1}if(g===P$1||(g===E$1||g===R)&&y===J){de=W;var ir=z&&$e===Ve&&Ve.visualViewport?Ve.visualViewport.width:$e[jt];ie-=ir-n.width,ie*=$?1:-1}}var ur=Object.assign({position:k},L&&qt),Dt=V===!0?Vt({x:ie,y:le}):{x:ie,y:le};if(ie=Dt.x,le=Dt.y,$){var lr;return Object.assign({},ur,(lr={},lr[_e]=Ue?"0":"",lr[de]=ae?"0":"",lr.transform=(Ve.devicePixelRatio||1)<=1?"translate("+ie+"px, "+le+"px)":"translate3d("+ie+"px, "+le+"px, 0)",lr))}return Object.assign({},ur,(r={},r[_e]=Ue?le+"px":"",r[de]=ae?ie+"px":"",r.transform="",r))}function Nt(t){var r=t.state,e=t.options,n=e.gpuAcceleration,g=n===void 0?!0:n,y=e.adaptive,i=y===void 0?!0:y,k=e.roundOffsets,$=k===void 0?!0:k,L={placement:q(r.placement),variation:te(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:g,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,ut(Object.assign({},L,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:i,roundOffsets:$})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,ut(Object.assign({},L,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:$})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(t){var r=t.state,e=t.instance,n=t.options,g=n.scroll,y=g===void 0?!0:g,i=n.resize,k=i===void 0?!0:i,$=H(r.elements.popper),L=[].concat(r.scrollParents.reference,r.scrollParents.popper);return y&&L.forEach(function(V){V.addEventListener("scroll",e.update,ye)}),k&&$.addEventListener("resize",e.update,ye),function(){y&&L.forEach(function(V){V.removeEventListener("scroll",e.update,ye)}),k&&$.removeEventListener("resize",e.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(t){return t.replace(/left|right|bottom|top/g,function(r){return _t[r]})}var zt={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,function(r){return zt[r]})}function We(t){var r=H(t),e=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Be(t){return ee(I$1(t)).left+We(t).scrollLeft}function Ft(t){var r=H(t),e=I$1(t),n=r.visualViewport,g=e.clientWidth,y=e.clientHeight,i=0,k=0;return n&&(g=n.width,y=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=n.offsetLeft,k=n.offsetTop)),{width:g,height:y,x:i+Be(t),y:k}}function Ut(t){var r,e=I$1(t),n=We(t),g=(r=t.ownerDocument)==null?void 0:r.body,y=X$1(e.scrollWidth,e.clientWidth,g?g.scrollWidth:0,g?g.clientWidth:0),i=X$1(e.scrollHeight,e.clientHeight,g?g.scrollHeight:0,g?g.clientHeight:0),k=-n.scrollLeft+Be(t),$=-n.scrollTop;return N$1(g||e).direction==="rtl"&&(k+=X$1(e.clientWidth,g?g.clientWidth:0)-y),{width:y,height:i,x:k,y:$}}function Se(t){var r=N$1(t),e=r.overflow,n=r.overflowX,g=r.overflowY;return/auto|scroll|overlay|hidden/.test(e+g+n)}function dt(t){return["html","body","#document"].indexOf(C(t))>=0?t.ownerDocument.body:B(t)&&Se(t)?t:dt(ge(t))}function ce(t,r){var e;r===void 0&&(r=[]);var n=dt(t),g=n===((e=t.ownerDocument)==null?void 0:e.body),y=H(n),i=g?[y].concat(y.visualViewport||[],Se(n)?n:[]):n,k=r.concat(i);return g?k:k.concat(ce(ge(i)))}function Te(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Xt(t){var r=ee(t);return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function ht(t,r){return r===je?Te(Ft(t)):Q(r)?Xt(r):Te(Ut(I$1(t)))}function Yt(t){var r=ce(ge(t)),e=["absolute","fixed"].indexOf(N$1(t).position)>=0,n=e&&B(t)?se(t):t;return Q(n)?r.filter(function(g){return Q(g)&&it(g,n)&&C(g)!=="body"}):[]}function Gt(t,r,e){var n=r==="clippingParents"?Yt(t):[].concat(r),g=[].concat(n,[e]),y=g[0],i=g.reduce(function(k,$){var L=ht(t,$);return k.top=X$1(L.top,k.top),k.right=ve(L.right,k.right),k.bottom=ve(L.bottom,k.bottom),k.left=X$1(L.left,k.left),k},ht(t,y));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function mt(t){var r=t.reference,e=t.element,n=t.placement,g=n?q(n):null,y=n?te(n):null,i=r.x+r.width/2-e.width/2,k=r.y+r.height/2-e.height/2,$;switch(g){case E$1:$={x:i,y:r.y-e.height};break;case R:$={x:i,y:r.y+r.height};break;case W:$={x:r.x+r.width,y:k};break;case P$1:$={x:r.x-e.width,y:k};break;default:$={x:r.x,y:r.y}}var L=g?Le(g):null;if(L!=null){var V=L==="y"?"height":"width";switch(y){case U$1:$[L]=$[L]-(r[V]/2-e[V]/2);break;case J:$[L]=$[L]+(r[V]/2-e[V]/2);break}}return $}function ne(t,r){r===void 0&&(r={});var e=r,n=e.placement,g=n===void 0?t.placement:n,y=e.boundary,i=y===void 0?Xe:y,k=e.rootBoundary,$=k===void 0?je:k,L=e.elementContext,V=L===void 0?K:L,z=e.altBoundary,re=z===void 0?!1:z,ie=e.padding,ue=ie===void 0?0:ie,le=ft(typeof ue!="number"?ue:ct(ue,G)),oe=V===K?Ye:K,ae=t.rects.popper,Ue=t.elements[re?oe:V],de=Gt(Q(Ue)?Ue:Ue.contextElement||I$1(t.elements.popper),i,$),_e=ee(t.elements.reference),Ve=mt({reference:_e,element:ae,strategy:"absolute",placement:g}),$e=Te(Object.assign({},ae,Ve)),Lt=V===K?$e:_e,jt={top:de.top-Lt.top+le.top,bottom:Lt.bottom-de.bottom+le.bottom,left:de.left-Lt.left+le.left,right:Lt.right-de.right+le.right},Et=t.modifiersData.offset;if(V===K&&Et){var ir=Et[g];Object.keys(jt).forEach(function(ur){var Dt=[W,R].indexOf(ur)>=0?1:-1,lr=[E$1,R].indexOf(ur)>=0?"y":"x";jt[ur]+=ir[lr]*Dt})}return jt}function Jt(t,r){r===void 0&&(r={});var e=r,n=e.placement,g=e.boundary,y=e.rootBoundary,i=e.padding,k=e.flipVariations,$=e.allowedAutoPlacements,L=$===void 0?Ee:$,V=te(n),z=V?k?De:De.filter(function(ue){return te(ue)===V}):G,re=z.filter(function(ue){return L.indexOf(ue)>=0});re.length===0&&(re=z);var ie=re.reduce(function(ue,le){return ue[le]=ne(t,{placement:le,boundary:g,rootBoundary:y,padding:i})[q(le)],ue},{});return Object.keys(ie).sort(function(ue,le){return ie[ue]-ie[le]})}function Kt(t){if(q(t)===me)return[];var r=be(t);return[lt(t),r,lt(r)]}function Qt(t){var r=t.state,e=t.options,n=t.name;if(!r.modifiersData[n]._skip){for(var g=e.mainAxis,y=g===void 0?!0:g,i=e.altAxis,k=i===void 0?!0:i,$=e.fallbackPlacements,L=e.padding,V=e.boundary,z=e.rootBoundary,re=e.altBoundary,ie=e.flipVariations,ue=ie===void 0?!0:ie,le=e.allowedAutoPlacements,oe=r.options.placement,ae=q(oe),Ue=ae===oe,de=$||(Ue||!ue?[be(oe)]:Kt(oe)),_e=[oe].concat(de).reduce(function(rr,kr){return rr.concat(q(kr)===me?Jt(r,{placement:kr,boundary:V,rootBoundary:z,padding:L,flipVariations:ue,allowedAutoPlacements:le}):kr)},[]),Ve=r.rects.reference,$e=r.rects.popper,Lt=new Map,jt=!0,Et=_e[0],ir=0;ir<_e.length;ir++){var ur=_e[ir],Dt=q(ur),lr=te(ur)===U$1,sr=[E$1,R].indexOf(Dt)>=0,er=sr?"width":"height",cr=ne(r,{placement:ur,boundary:V,rootBoundary:z,altBoundary:re,padding:L}),or=sr?lr?W:P$1:lr?R:E$1;Ve[er]>$e[er]&&(or=be(or));var hr=be(or),pr=[];if(y&&pr.push(cr[Dt]<=0),k&&pr.push(cr[or]<=0,cr[hr]<=0),pr.every(function(rr){return rr})){Et=ur,jt=!1;break}Lt.set(ur,pr)}if(jt)for(var Tr=ue?3:1,Pr=function(rr){var kr=_e.find(function(Er){var xr=Lt.get(Er);if(xr)return xr.slice(0,rr).every(function(vr){return vr})});if(kr)return Et=kr,"break"},_r=Tr;_r>0;_r--){var Mr=Pr(_r);if(Mr==="break")break}r.placement!==Et&&(r.modifiersData[n]._skip=!0,r.placement=Et,r.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(t,r,e){return e===void 0&&(e={x:0,y:0}),{top:t.top-r.height-e.y,right:t.right-r.width+e.x,bottom:t.bottom-r.height+e.y,left:t.left-r.width-e.x}}function yt(t){return[E$1,W,R,P$1].some(function(r){return t[r]>=0})}function Zt(t){var r=t.state,e=t.name,n=r.rects.reference,g=r.rects.popper,y=r.modifiersData.preventOverflow,i=ne(r,{elementContext:"reference"}),k=ne(r,{altBoundary:!0}),$=gt(i,n),L=gt(k,g,y),V=yt($),z=yt(L);r.modifiersData[e]={referenceClippingOffsets:$,popperEscapeOffsets:L,isReferenceHidden:V,hasPopperEscaped:z},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":V,"data-popper-escaped":z})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(t,r,e){var n=q(t),g=[P$1,E$1].indexOf(n)>=0?-1:1,y=typeof e=="function"?e(Object.assign({},r,{placement:t})):e,i=y[0],k=y[1];return i=i||0,k=(k||0)*g,[P$1,W].indexOf(n)>=0?{x:k,y:i}:{x:i,y:k}}function tn(t){var r=t.state,e=t.options,n=t.name,g=e.offset,y=g===void 0?[0,0]:g,i=Ee.reduce(function(V,z){return V[z]=en(z,r.rects,y),V},{}),k=i[r.placement],$=k.x,L=k.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=$,r.modifiersData.popperOffsets.y+=L),r.modifiersData[n]=i}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(t){var r=t.state,e=t.name;r.modifiersData[e]=mt({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(t){return t==="x"?"y":"x"}function on(t){var r=t.state,e=t.options,n=t.name,g=e.mainAxis,y=g===void 0?!0:g,i=e.altAxis,k=i===void 0?!1:i,$=e.boundary,L=e.rootBoundary,V=e.altBoundary,z=e.padding,re=e.tether,ie=re===void 0?!0:re,ue=e.tetherOffset,le=ue===void 0?0:ue,oe=ne(r,{boundary:$,rootBoundary:L,padding:z,altBoundary:V}),ae=q(r.placement),Ue=te(r.placement),de=!Ue,_e=Le(ae),Ve=rn(_e),$e=r.modifiersData.popperOffsets,Lt=r.rects.reference,jt=r.rects.popper,Et=typeof le=="function"?le(Object.assign({},r.rects,{placement:r.placement})):le,ir=typeof Et=="number"?{mainAxis:Et,altAxis:Et}:Object.assign({mainAxis:0,altAxis:0},Et),ur=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,Dt={x:0,y:0};if($e){if(y){var lr,sr=_e==="y"?E$1:P$1,er=_e==="y"?R:W,cr=_e==="y"?"height":"width",or=$e[_e],hr=or+oe[sr],pr=or-oe[er],Tr=ie?-jt[cr]/2:0,Pr=Ue===U$1?Lt[cr]:jt[cr],_r=Ue===U$1?-jt[cr]:-Lt[cr],Mr=r.elements.arrow,rr=ie&&Mr?ke(Mr):{width:0,height:0},kr=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:st(),Er=kr[sr],xr=kr[er],vr=fe(0,Lt[cr],rr[cr]),Ir=de?Lt[cr]/2-Tr-vr-Er-ir.mainAxis:Pr-vr-Er-ir.mainAxis,Or=de?-Lt[cr]/2+Tr+vr+xr+ir.mainAxis:_r+vr+xr+ir.mainAxis,Cr=r.elements.arrow&&se(r.elements.arrow),yr=Cr?_e==="y"?Cr.clientTop||0:Cr.clientLeft||0:0,fr=(lr=ur==null?void 0:ur[_e])!=null?lr:0,Sr=or+Ir-fr-yr,Br=or+Or-fr,$r=fe(ie?ve(hr,Sr):hr,or,ie?X$1(pr,Br):pr);$e[_e]=$r,Dt[_e]=$r-or}if(k){var Lr,Gr=_e==="x"?E$1:P$1,qr=_e==="x"?R:W,Yr=$e[Ve],bn=Ve==="y"?"height":"width",wn=Yr+oe[Gr],Xr=Yr-oe[qr],qn=[E$1,P$1].indexOf(ae)!==-1,Zr=(Lr=ur==null?void 0:ur[Ve])!=null?Lr:0,Nn=qn?wn:Yr-Lt[bn]-jt[bn]-Zr+ir.altAxis,Qr=qn?Yr+Lt[bn]+jt[bn]-Zr-ir.altAxis:Xr,Mn=ie&&qn?St(Nn,Yr,Qr):fe(ie?Nn:wn,Yr,ie?Qr:Xr);$e[Ve]=Mn,Dt[Ve]=Mn-Yr}r.modifiersData[n]=Dt}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sn(t){return t===H(t)||!B(t)?We(t):an(t)}function fn(t){var r=t.getBoundingClientRect(),e=Z(r.width)/t.offsetWidth||1,n=Z(r.height)/t.offsetHeight||1;return e!==1||n!==1}function cn(t,r,e){e===void 0&&(e=!1);var n=B(r),g=B(r)&&fn(r),y=I$1(r),i=ee(t,g),k={scrollLeft:0,scrollTop:0},$={x:0,y:0};return(n||!n&&!e)&&((C(r)!=="body"||Se(y))&&(k=sn(r)),B(r)?($=ee(r,!0),$.x+=r.clientLeft,$.y+=r.clientTop):y&&($.x=Be(y))),{x:i.left+k.scrollLeft-$.x,y:i.top+k.scrollTop-$.y,width:i.width,height:i.height}}function pn(t){var r=new Map,e=new Set,n=[];t.forEach(function(y){r.set(y.name,y)});function g(y){e.add(y.name);var i=[].concat(y.requires||[],y.requiresIfExists||[]);i.forEach(function(k){if(!e.has(k)){var $=r.get(k);$&&g($)}}),n.push(y)}return t.forEach(function(y){e.has(y.name)||g(y)}),n}function un(t){var r=pn(t);return ot.reduce(function(e,n){return e.concat(r.filter(function(g){return g.phase===n}))},[])}function ln(t){var r;return function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(t())})})),r}}function dn(t){var r=t.reduce(function(e,n){var g=e[n.name];return e[n.name]=g?Object.assign({},g,n,{options:Object.assign({},g.options,n.options),data:Object.assign({},g.data,n.data)}):n,e},{});return Object.keys(r).map(function(e){return r[e]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function we(t){t===void 0&&(t={});var r=t,e=r.defaultModifiers,n=e===void 0?[]:e,g=r.defaultOptions,y=g===void 0?Ot:g;return function(i,k,$){$===void 0&&($=y);var L={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,y),modifiersData:{},elements:{reference:i,popper:k},attributes:{},styles:{}},V=[],z=!1,re={state:L,setOptions:function(le){var oe=typeof le=="function"?le(L.options):le;ue(),L.options=Object.assign({},y,L.options,oe),L.scrollParents={reference:Q(i)?ce(i):i.contextElement?ce(i.contextElement):[],popper:ce(k)};var ae=un(dn([].concat(n,L.options.modifiers)));return L.orderedModifiers=ae.filter(function(Ue){return Ue.enabled}),ie(),re.update()},forceUpdate:function(){if(!z){var le=L.elements,oe=le.reference,ae=le.popper;if($t(oe,ae)){L.rects={reference:cn(oe,se(ae),L.options.strategy==="fixed"),popper:ke(ae)},L.reset=!1,L.placement=L.options.placement,L.orderedModifiers.forEach(function(jt){return L.modifiersData[jt.name]=Object.assign({},jt.data)});for(var Ue=0;Ue<L.orderedModifiers.length;Ue++){if(L.reset===!0){L.reset=!1,Ue=-1;continue}var de=L.orderedModifiers[Ue],_e=de.fn,Ve=de.options,$e=Ve===void 0?{}:Ve,Lt=de.name;typeof _e=="function"&&(L=_e({state:L,options:$e,name:Lt,instance:re})||L)}}}},update:ln(function(){return new Promise(function(le){re.forceUpdate(),le(L)})}),destroy:function(){ue(),z=!0}};if(!$t(i,k))return re;re.setOptions($).then(function(le){!z&&$.onFirstUpdate&&$.onFirstUpdate(le)});function ie(){L.orderedModifiers.forEach(function(le){var oe=le.name,ae=le.options,Ue=ae===void 0?{}:ae,de=le.effect;if(typeof de=="function"){var _e=de({state:L,name:oe,instance:re,options:Ue}),Ve=function(){};V.push(_e||Ve)}})}function ue(){V.forEach(function(le){return le()}),V=[]}return re}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(t,r,e={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:$})=>{const L=deriveState($);Object.assign(i.value,L)},requires:["computeStyles"]},g=computed(()=>{const{onFirstUpdate:$,placement:L,strategy:V,modifiers:z}=unref(e);return{onFirstUpdate:$,placement:L||"bottom",strategy:V||"absolute",modifiers:[...z||[],n,{name:"applyStyles",enabled:!1}]}}),y=shallowRef(),i=ref({styles:{popper:{position:unref(g).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),k=()=>{y.value&&(y.value.destroy(),y.value=void 0)};return watch(g,$=>{const L=unref(y);L&&L.setOptions($)},{deep:!0}),watch([t,r],([$,L])=>{k(),!(!$||!L)&&(y.value=yn($,L,unref(g)))}),onBeforeUnmount(()=>{k()}),{state:computed(()=>{var $;return{...(($=unref(y))==null?void 0:$.state)||{}}}),styles:computed(()=>unref(i).styles),attributes:computed(()=>unref(i).attributes),update:()=>{var $;return($=unref(y))==null?void 0:$.update()},forceUpdate:()=>{var $;return($=unref(y))==null?void 0:$.forceUpdate()},instanceRef:computed(()=>unref(y))}};function deriveState(t){const r=Object.keys(t.elements),e=fromPairs(r.map(g=>[g,t.styles[g]||{}])),n=fromPairs(r.map(g=>[g,t.attributes[g]]));return{styles:e,attributes:n}}const useSameTarget=t=>{if(!t)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let r=!1,e=!1;return{onClick:i=>{r&&e&&t(i),r=e=!1},onMousedown:i=>{r=i.target===i.currentTarget},onMouseup:i=>{e=i.target===i.currentTarget}}};function useTimeout(){let t;const r=(n,g)=>{e(),t=window.setTimeout(n,g)},e=()=>window.clearTimeout(t);return tryOnScopeDispose(()=>e()),{registerTimeout:r,cancelTimeout:e}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=t=>{const r=useIdInjection(),e=useGetDerivedNamespace();return computed(()=>unref(t)||`${e.value}-id-${r.prefix}-${r.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=t=>{const r=t;r.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(e=>e(r))},useEscapeKeydown=t=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(t)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(r=>r!==t),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const t=useGetDerivedNamespace(),r=useIdInjection(),e=computed(()=>`${t.value}-popper-container-${r.prefix}`),n=computed(()=>`#${e.value}`);return{id:e,selector:n}},createContainer=t=>{const r=document.createElement("div");return r.id=t,document.body.appendChild(r),r},usePopperContainer=()=>{const{id:t,selector:r}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(r.value)&&(cachedContainer=createContainer(t.value))}),{id:t,selector:r}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:t,hideAfter:r,autoClose:e,open:n,close:g})=>{const{registerTimeout:y}=useTimeout(),{registerTimeout:i,cancelTimeout:k}=useTimeout();return{onOpen:V=>{y(()=>{n(V);const z=unref(e);isNumber$1(z)&&z>0&&i(()=>{g(V)},z)},unref(t))},onClose:V=>{k(),y(()=>{g(V)},unref(r))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=t=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:e=>{t.value=e}})},useForwardRefDirective=t=>({mounted(r){t(r)},updated(r){t(r)},unmounted(){t(null)}}),zIndex=ref(0),defaultInitialZIndex=2e3,zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=t=>{const r=t||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),e=computed(()=>{const y=unref(r);return isNumber$1(y)?y:defaultInitialZIndex}),n=computed(()=>e.value+zIndex.value);return{initialZIndex:e,currentZIndex:n,nextZIndex:()=>(zIndex.value++,n.value)}};function useCursor(t){const r=ref();function e(){if(t.value==null)return;const{selectionStart:g,selectionEnd:y,value:i}=t.value;if(g==null||y==null)return;const k=i.slice(0,Math.max(0,g)),$=i.slice(Math.max(0,y));r.value={selectionStart:g,selectionEnd:y,value:i,beforeTxt:k,afterTxt:$}}function n(){if(t.value==null||r.value==null)return;const{value:g}=t.value,{beforeTxt:y,afterTxt:i,selectionStart:k}=r.value;if(y==null||i==null||k==null)return;let $=g.length;if(g.endsWith(i))$=g.length-i.length;else if(g.startsWith(y))$=y.length;else{const L=y[k-1],V=g.indexOf(L,k-1);V!==-1&&($=V+1)}t.value.setSelectionRange($,$)}return[e,n]}const useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const t=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(t.size)||"")};function useFocusController(t,{afterFocus:r,beforeBlur:e,afterBlur:n}={}){const g=getCurrentInstance(),{emit:y}=g,i=shallowRef(),k=ref(!1),$=z=>{k.value||(k.value=!0,y("focus",z),r==null||r())},L=z=>{var re;isFunction$3(e)&&e(z)||z.relatedTarget&&((re=i.value)!=null&&re.contains(z.relatedTarget))||(k.value=!1,y("blur",z),n==null||n())},V=()=>{var z;(z=t.value)==null||z.focus()};return watch(i,z=>{z&&z.setAttribute("tabindex","-1")}),useEventListener(i,"click",V),{wrapperRef:i,isFocused:k,handleFocus:$,handleBlur:L}}const configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(t,r=void 0){const e=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return t?computed(()=>{var n,g;return(g=(n=e.value)==null?void 0:n[t])!=null?g:r}):e}function useGlobalComponentSettings(t,r){const e=useGlobalConfig(),n=useNamespace(t,computed(()=>{var k;return((k=e.value)==null?void 0:k.namespace)||defaultNamespace})),g=useLocale(computed(()=>{var k;return(k=e.value)==null?void 0:k.locale})),y=useZIndex(computed(()=>{var k;return((k=e.value)==null?void 0:k.zIndex)||defaultInitialZIndex})),i=computed(()=>{var k;return unref(r)||((k=e.value)==null?void 0:k.size)||""});return provideGlobalConfig(computed(()=>unref(e)||{})),{ns:n,locale:g,zIndex:y,size:i}}const provideGlobalConfig=(t,r,e=!1)=>{var n;const g=!!getCurrentInstance(),y=g?useGlobalConfig():void 0,i=(n=r==null?void 0:r.provide)!=null?n:g?provide:void 0;if(!i)return;const k=computed(()=>{const $=unref(t);return y!=null&&y.value?mergeConfig$1(y.value,$):$});return i(configProviderContextKey,k),i(localeContextKey,computed(()=>k.value.locale)),i(namespaceContextKey,computed(()=>k.value.namespace)),i(zIndexContextKey,computed(()=>k.value.zIndex)),i(SIZE_INJECTION_KEY,{size:computed(()=>k.value.size||"")}),(e||!globalConfig.value)&&(globalConfig.value=k.value),k},mergeConfig$1=(t,r)=>{var e;const n=[...new Set([...keysOf(t),...keysOf(r)])],g={};for(const y of n)g[y]=(e=r[y])!=null?e:t[y];return g},configProviderProps=buildProps({a11y:{type:Boolean,default:!0},locale:{type:definePropType(Object)},size:useSizeProp,button:{type:definePropType(Object)},experimentalFeatures:{type:definePropType(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:definePropType(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),messageConfig={},ConfigProvider=defineComponent({name:"ElConfigProvider",props:configProviderProps,setup(t,{slots:r}){watch(()=>t.message,n=>{Object.assign(messageConfig,n??{})},{immediate:!0,deep:!0});const e=provideGlobalConfig(t);return()=>renderSlot(r,"default",{config:e==null?void 0:e.value})}}),ElConfigProvider=withInstall(ConfigProvider),affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:t,fixed:r})=>isNumber$1(t)&&isBoolean$1(r),[CHANGE_EVENT]:t=>isBoolean$1(t)};var _export_sfc$1=(t,r)=>{const e=t.__vccOpts||t;for(const[n,g]of r)e[n]=g;return e};const COMPONENT_NAME$b="ElAffix",__default__$Q=defineComponent({name:COMPONENT_NAME$b}),_sfc_main$1j=defineComponent({...__default__$Q,props:affixProps,emits:affixEmits,setup(t,{expose:r,emit:e}){const n=t,g=useNamespace("affix"),y=shallowRef(),i=shallowRef(),k=shallowRef(),{height:$}=useWindowSize(),{height:L,width:V,top:z,bottom:re,update:ie}=useElementBounding(i,{windowScroll:!1}),ue=useElementBounding(y),le=ref(!1),oe=ref(0),ae=ref(0),Ue=computed(()=>({height:le.value?`${L.value}px`:"",width:le.value?`${V.value}px`:""})),de=computed(()=>{if(!le.value)return{};const $e=n.offset?addUnit(n.offset):0;return{height:`${L.value}px`,width:`${V.value}px`,top:n.position==="top"?$e:"",bottom:n.position==="bottom"?$e:"",transform:ae.value?`translateY(${ae.value}px)`:"",zIndex:n.zIndex}}),_e=()=>{if(k.value)if(oe.value=k.value instanceof Window?document.documentElement.scrollTop:k.value.scrollTop||0,n.position==="top")if(n.target){const $e=ue.bottom.value-n.offset-L.value;le.value=n.offset>z.value&&ue.bottom.value>0,ae.value=$e<0?$e:0}else le.value=n.offset>z.value;else if(n.target){const $e=$.value-ue.top.value-n.offset-L.value;le.value=$.value-n.offset<re.value&&$.value>ue.top.value,ae.value=$e<0?-$e:0}else le.value=$.value-n.offset<re.value},Ve=()=>{ie(),e("scroll",{scrollTop:oe.value,fixed:le.value})};return watch(le,$e=>e("change",$e)),onMounted(()=>{var $e;n.target?(y.value=($e=document.querySelector(n.target))!=null?$e:void 0,y.value||throwError(COMPONENT_NAME$b,`Target is not existed: ${n.target}`)):y.value=document.documentElement,k.value=getScrollContainer(i.value,!0),ie()}),useEventListener(k,"scroll",Ve),watchEffect(_e),r({update:_e,updateRoot:ie}),($e,Lt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:i,class:normalizeClass(unref(g).b()),style:normalizeStyle(unref(Ue))},[createBaseVNode("div",{class:normalizeClass({[unref(g).m("fixed")]:le.value}),style:normalizeStyle(unref(de))},[renderSlot($e.$slots,"default")],6)],6))}});var Affix=_export_sfc$1(_sfc_main$1j,[["__file","affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$P=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$1i=defineComponent({...__default__$P,props:iconProps,setup(t){const r=t,e=useNamespace("icon"),n=computed(()=>{const{size:g,color:y}=r;return!g&&!y?{}:{fontSize:isUndefined$1(g)?void 0:addUnit(g),"--color":y}});return(g,y)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(e).b(),style:unref(n)},g.$attrs),[renderSlot(g.$slots,"default")],16))}});var Icon=_export_sfc$1(_sfc_main$1i,[["__file","icon.vue"]]);const ElIcon=withInstall(Icon),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(t,r={})=>{const e=ref(void 0),n=r.prop?e:useProp("size"),g=r.global?e:useGlobalSize(),y=r.form?{size:void 0}:inject(formContextKey,void 0),i=r.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>n.value||unref(t)||(i==null?void 0:i.size)||(y==null?void 0:y.size)||g.value||"")},useFormDisabled=t=>{const r=useProp("disabled"),e=inject(formContextKey,void 0);return computed(()=>r.value||unref(t)||(e==null?void 0:e.disabled)||!1)},useFormItem=()=>{const t=inject(formContextKey,void 0),r=inject(formItemContextKey,void 0);return{form:t,formItem:r}},useFormItemInputId=(t,{formItemContext:r,disableIdGeneration:e,disableIdManagement:n})=>{e||(e=ref(!1)),n||(n=ref(!1));const g=ref();let y;const i=computed(()=>{var k;return!!(!t.label&&r&&r.inputIds&&((k=r.inputIds)==null?void 0:k.length)<=1)});return onMounted(()=>{y=watch([toRef(t,"id"),e],([k,$])=>{const L=k??($?void 0:useId().value);L!==g.value&&(r!=null&&r.removeInputId&&(g.value&&r.removeInputId(g.value),!(n!=null&&n.value)&&!$&&L&&r.addInputId(L)),g.value=L)},{immediate:!0})}),onUnmounted(()=>{y&&y(),r!=null&&r.removeInputId&&g.value&&r.removeInputId(g.value)}),{isLabeledByFormItem:i,inputId:g}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(t,r,e)=>(isArray$3(t)||isString$2(t))&&isBoolean$1(r)&&isString$2(e)};function useFormLabelWidth(){const t=ref([]),r=computed(()=>{if(!t.value.length)return"0";const y=Math.max(...t.value);return y?`${y}px`:""});function e(y){const i=t.value.indexOf(y);return i===-1&&r.value,i}function n(y,i){if(y&&i){const k=e(i);t.value.splice(k,1,y)}else y&&t.value.push(y)}function g(y){const i=e(y);i>-1&&t.value.splice(i,1)}return{autoLabelWidth:r,registerLabelWidth:n,deregisterLabelWidth:g}}const filterFields=(t,r)=>{const e=castArray$1(r);return e.length>0?t.filter(n=>n.prop&&e.includes(n.prop)):t},COMPONENT_NAME$a="ElForm",__default__$O=defineComponent({name:COMPONENT_NAME$a}),_sfc_main$1h=defineComponent({...__default__$O,props:formProps,emits:formEmits,setup(t,{expose:r,emit:e}){const n=t,g=[],y=useFormSize(),i=useNamespace("form"),k=computed(()=>{const{labelPosition:de,inline:_e}=n;return[i.b(),i.m(y.value||"default"),{[i.m(`label-${de}`)]:de,[i.m("inline")]:_e}]}),$=de=>g.find(_e=>_e.prop===de),L=de=>{g.push(de)},V=de=>{de.prop&&g.splice(g.indexOf(de),1)},z=(de=[])=>{n.model&&filterFields(g,de).forEach(_e=>_e.resetField())},re=(de=[])=>{filterFields(g,de).forEach(_e=>_e.clearValidate())},ie=computed(()=>!!n.model),ue=de=>{if(g.length===0)return[];const _e=filterFields(g,de);return _e.length?_e:[]},le=async de=>ae(void 0,de),oe=async(de=[])=>{if(!ie.value)return!1;const _e=ue(de);if(_e.length===0)return!0;let Ve={};for(const $e of _e)try{await $e.validate("")}catch(Lt){Ve={...Ve,...Lt}}return Object.keys(Ve).length===0?!0:Promise.reject(Ve)},ae=async(de=[],_e)=>{const Ve=!isFunction$3(_e);try{const $e=await oe(de);return $e===!0&&(_e==null||_e($e)),$e}catch($e){if($e instanceof Error)throw $e;const Lt=$e;return n.scrollToError&&Ue(Object.keys(Lt)[0]),_e==null||_e(!1,Lt),Ve&&Promise.reject(Lt)}},Ue=de=>{var _e;const Ve=filterFields(g,de)[0];Ve&&((_e=Ve.$el)==null||_e.scrollIntoView(n.scrollIntoViewOptions))};return watch(()=>n.rules,()=>{n.validateOnRuleChange&&le().catch(de=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(n),emit:e,resetFields:z,clearValidate:re,validateField:ae,getField:$,addField:L,removeField:V,...useFormLabelWidth()})),r({validate:le,validateField:ae,resetFields:z,clearValidate:re,scrollToField:Ue}),(de,_e)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(k))},[renderSlot(de.$slots,"default")],2))}});var Form=_export_sfc$1(_sfc_main$1h,[["__file","form.vue"]]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_extends.apply(this,arguments)}function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,g){return n.__proto__=g,n},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(t,r,e){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(g,y,i){var k=[null];k.push.apply(k,y);var $=Function.bind.apply(g,k),L=new $;return i&&_setPrototypeOf(L,i.prototype),L},_construct.apply(null,arguments)}function _isNativeFunction(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper(t){var r=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,g)}function g(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return g.prototype=Object.create(n.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(g,n)},_wrapNativeSuper(t)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u"&&process.env;function convertFieldsError(t){if(!t||!t.length)return null;var r={};return t.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function format(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var g=0,y=e.length;if(typeof t=="function")return t.apply(null,e);if(typeof t=="string"){var i=t.replace(formatRegExp,function(k){if(k==="%%")return"%";if(g>=y)return k;switch(k){case"%s":return String(e[g++]);case"%d":return Number(e[g++]);case"%j":try{return JSON.stringify(e[g++])}catch{return"[Circular]"}break;default:return k}});return i}return t}function isNativeStringType(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function isEmptyValue(t,r){return!!(t==null||r==="array"&&Array.isArray(t)&&!t.length||isNativeStringType(r)&&typeof t=="string"&&!t)}function asyncParallelArray(t,r,e){var n=[],g=0,y=t.length;function i(k){n.push.apply(n,k||[]),g++,g===y&&e(n)}t.forEach(function(k){r(k,i)})}function asyncSerialArray(t,r,e){var n=0,g=t.length;function y(i){if(i&&i.length){e(i);return}var k=n;n=n+1,k<g?r(t[k],y):e([])}y([])}function flattenObjArr(t){var r=[];return Object.keys(t).forEach(function(e){r.push.apply(r,t[e]||[])}),r}var AsyncValidationError=function(t){_inheritsLoose(r,t);function r(e,n){var g;return g=t.call(this,"Async Validation Error")||this,g.errors=e,g.fields=n,g}return r}(_wrapNativeSuper(Error));function asyncMap(t,r,e,n,g){if(r.first){var y=new Promise(function(re,ie){var ue=function(ae){return n(ae),ae.length?ie(new AsyncValidationError(ae,convertFieldsError(ae))):re(g)},le=flattenObjArr(t);asyncSerialArray(le,e,ue)});return y.catch(function(re){return re}),y}var i=r.firstFields===!0?Object.keys(t):r.firstFields||[],k=Object.keys(t),$=k.length,L=0,V=[],z=new Promise(function(re,ie){var ue=function(oe){if(V.push.apply(V,oe),L++,L===$)return n(V),V.length?ie(new AsyncValidationError(V,convertFieldsError(V))):re(g)};k.length||(n(V),re(g)),k.forEach(function(le){var oe=t[le];i.indexOf(le)!==-1?asyncSerialArray(oe,e,ue):asyncParallelArray(oe,e,ue)})});return z.catch(function(re){return re}),z}function isErrorObj(t){return!!(t&&t.message!==void 0)}function getValue(t,r){for(var e=t,n=0;n<r.length;n++){if(e==null)return e;e=e[r[n]]}return e}function complementError(t,r){return function(e){var n;return t.fullFields?n=getValue(r,t.fullFields):n=r[e.field||t.fullField],isErrorObj(e)?(e.field=e.field||t.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||t.fullField}}}function deepMerge(t,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];typeof n=="object"&&typeof t[e]=="object"?t[e]=_extends({},t[e],n):t[e]=n}}return t}var required$1=function(r,e,n,g,y,i){r.required&&(!n.hasOwnProperty(r.field)||isEmptyValue(e,i||r.type))&&g.push(format(y.messages.required,r.fullField))},whitespace=function(r,e,n,g,y){(/^\s+$/.test(e)||e==="")&&g.push(format(y.messages.whitespace,r.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var t="[a-fA-F\\d:]",r=function(_e){return _e&&_e.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",g=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+e+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+e+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+e+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+e+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+e+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+e+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+e+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),y=new RegExp("(?:^"+e+"$)|(?:^"+g+"$)"),i=new RegExp("^"+e+"$"),k=new RegExp("^"+g+"$"),$=function(_e){return _e&&_e.exact?y:new RegExp("(?:"+r(_e)+e+r(_e)+")|(?:"+r(_e)+g+r(_e)+")","g")};$.v4=function(de){return de&&de.exact?i:new RegExp(""+r(de)+e+r(de),"g")},$.v6=function(de){return de&&de.exact?k:new RegExp(""+r(de)+g+r(de),"g")};var L="(?:(?:[a-z]+:)?//)",V="(?:\\S+(?::\\S*)?@)?",z=$.v4().source,re=$.v6().source,ie="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",ue="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",le="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",oe="(?::\\d{2,5})?",ae='(?:[/?#][^\\s"]*)?',Ue="(?:"+L+"|www\\.)"+V+"(?:localhost|"+z+"|"+re+"|"+ie+ue+le+")"+oe+ae;return urlReg=new RegExp("(?:^"+Ue+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(r){return types.number(r)&&parseInt(r,10)===r},float:function(r){return types.number(r)&&!types.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!types.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(pattern$2.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(getUrlRegex())},hex:function(r){return typeof r=="string"&&!!r.match(pattern$2.hex)}},type$1=function(r,e,n,g,y){if(r.required&&e===void 0){required$1(r,e,n,g,y);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],k=r.type;i.indexOf(k)>-1?types[k](e)||g.push(format(y.messages.types[k],r.fullField,r.type)):k&&typeof e!==r.type&&g.push(format(y.messages.types[k],r.fullField,r.type))},range$1=function(r,e,n,g,y){var i=typeof r.len=="number",k=typeof r.min=="number",$=typeof r.max=="number",L=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V=e,z=null,re=typeof e=="number",ie=typeof e=="string",ue=Array.isArray(e);if(re?z="number":ie?z="string":ue&&(z="array"),!z)return!1;ue&&(V=e.length),ie&&(V=e.replace(L,"_").length),i?V!==r.len&&g.push(format(y.messages[z].len,r.fullField,r.len)):k&&!$&&V<r.min?g.push(format(y.messages[z].min,r.fullField,r.min)):$&&!k&&V>r.max?g.push(format(y.messages[z].max,r.fullField,r.max)):k&&$&&(V<r.min||V>r.max)&&g.push(format(y.messages[z].range,r.fullField,r.min,r.max))},ENUM$1="enum",enumerable$1=function(r,e,n,g,y){r[ENUM$1]=Array.isArray(r[ENUM$1])?r[ENUM$1]:[],r[ENUM$1].indexOf(e)===-1&&g.push(format(y.messages[ENUM$1],r.fullField,r[ENUM$1].join(", ")))},pattern$1=function(r,e,n,g,y){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||g.push(format(y.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var i=new RegExp(r.pattern);i.test(e)||g.push(format(y.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,g,i,y,"string"),isEmptyValue(e,"string")||(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y),rules.pattern(r,e,g,i,y),r.whitespace===!0&&rules.whitespace(r,e,g,i,y))}n(i)},method=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},number=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(e===""&&(e=void 0),isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},_boolean=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},regexp=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),isEmptyValue(e)||rules.type(r,e,g,i,y)}n(i)},integer=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},floatFn=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},array=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(e==null&&!r.required)return n();rules.required(r,e,g,i,y,"array"),e!=null&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},object=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},ENUM="enum",enumerable=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules[ENUM](r,e,g,i,y)}n(i)},pattern=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,g,i,y),isEmptyValue(e,"string")||rules.pattern(r,e,g,i,y)}n(i)},date=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"date")&&!r.required)return n();if(rules.required(r,e,g,i,y),!isEmptyValue(e,"date")){var $;e instanceof Date?$=e:$=new Date(e),rules.type(r,$,g,i,y),$&&rules.range(r,$.getTime(),g,i,y)}}n(i)},required=function(r,e,n,g,y){var i=[],k=Array.isArray(e)?"array":typeof e;rules.required(r,e,g,i,y,k),n(i)},type=function(r,e,n,g,y){var i=r.type,k=[],$=r.required||!r.required&&g.hasOwnProperty(r.field);if($){if(isEmptyValue(e,i)&&!r.required)return n();rules.required(r,e,g,k,y,i),isEmptyValue(e,i)||rules.type(r,e,g,k,y)}n(k)},any=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y)}n(i)},validators$2={string,method,number,boolean:_boolean,regexp,integer,float:floatFn,array,object,enum:enumerable,pattern,date,url:type,hex:type,email:type,required,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var messages=newMessages(),Schema=function(){function t(e){this.rules=null,this._messages=messages,this.define(e)}var r=t.prototype;return r.define=function(n){var g=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(y){var i=n[y];g.rules[y]=Array.isArray(i)?i:[i]})},r.messages=function(n){return n&&(this._messages=deepMerge(newMessages(),n)),this._messages},r.validate=function(n,g,y){var i=this;g===void 0&&(g={}),y===void 0&&(y=function(){});var k=n,$=g,L=y;if(typeof $=="function"&&(L=$,$={}),!this.rules||Object.keys(this.rules).length===0)return L&&L(null,k),Promise.resolve(k);function V(le){var oe=[],ae={};function Ue(_e){if(Array.isArray(_e)){var Ve;oe=(Ve=oe).concat.apply(Ve,_e)}else oe.push(_e)}for(var de=0;de<le.length;de++)Ue(le[de]);oe.length?(ae=convertFieldsError(oe),L(oe,ae)):L(null,k)}if($.messages){var z=this.messages();z===messages&&(z=newMessages()),deepMerge(z,$.messages),$.messages=z}else $.messages=this.messages();var re={},ie=$.keys||Object.keys(this.rules);ie.forEach(function(le){var oe=i.rules[le],ae=k[le];oe.forEach(function(Ue){var de=Ue;typeof de.transform=="function"&&(k===n&&(k=_extends({},k)),ae=k[le]=de.transform(ae)),typeof de=="function"?de={validator:de}:de=_extends({},de),de.validator=i.getValidationMethod(de),de.validator&&(de.field=le,de.fullField=de.fullField||le,de.type=i.getType(de),re[le]=re[le]||[],re[le].push({rule:de,value:ae,source:k,field:le}))})});var ue={};return asyncMap(re,$,function(le,oe){var ae=le.rule,Ue=(ae.type==="object"||ae.type==="array")&&(typeof ae.fields=="object"||typeof ae.defaultField=="object");Ue=Ue&&(ae.required||!ae.required&&le.value),ae.field=le.field;function de($e,Lt){return _extends({},Lt,{fullField:ae.fullField+"."+$e,fullFields:ae.fullFields?[].concat(ae.fullFields,[$e]):[$e]})}function _e($e){$e===void 0&&($e=[]);var Lt=Array.isArray($e)?$e:[$e];!$.suppressWarning&&Lt.length&&t.warning("async-validator:",Lt),Lt.length&&ae.message!==void 0&&(Lt=[].concat(ae.message));var jt=Lt.map(complementError(ae,k));if($.first&&jt.length)return ue[ae.field]=1,oe(jt);if(!Ue)oe(jt);else{if(ae.required&&!le.value)return ae.message!==void 0?jt=[].concat(ae.message).map(complementError(ae,k)):$.error&&(jt=[$.error(ae,format($.messages.required,ae.field))]),oe(jt);var Et={};ae.defaultField&&Object.keys(le.value).map(function(Dt){Et[Dt]=ae.defaultField}),Et=_extends({},Et,le.rule.fields);var ir={};Object.keys(Et).forEach(function(Dt){var lr=Et[Dt],sr=Array.isArray(lr)?lr:[lr];ir[Dt]=sr.map(de.bind(null,Dt))});var ur=new t(ir);ur.messages($.messages),le.rule.options&&(le.rule.options.messages=$.messages,le.rule.options.error=$.error),ur.validate(le.value,le.rule.options||$,function(Dt){var lr=[];jt&&jt.length&&lr.push.apply(lr,jt),Dt&&Dt.length&&lr.push.apply(lr,Dt),oe(lr.length?lr:null)})}}var Ve;if(ae.asyncValidator)Ve=ae.asyncValidator(ae,le.value,_e,le.source,$);else if(ae.validator){try{Ve=ae.validator(ae,le.value,_e,le.source,$)}catch($e){console.error==null||console.error($e),$.suppressValidatorError||setTimeout(function(){throw $e},0),_e($e.message)}Ve===!0?_e():Ve===!1?_e(typeof ae.message=="function"?ae.message(ae.fullField||ae.field):ae.message||(ae.fullField||ae.field)+" fails"):Ve instanceof Array?_e(Ve):Ve instanceof Error&&_e(Ve.message)}Ve&&Ve.then&&Ve.then(function(){return _e()},function($e){return _e($e)})},function(le){V(le)},k)},r.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!validators$2.hasOwnProperty(n.type))throw new Error(format("Unknown rule type %s",n.type));return n.type||"string"},r.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var g=Object.keys(n),y=g.indexOf("message");return y!==-1&&g.splice(y,1),g.length===1&&g[0]==="required"?validators$2.required:validators$2[this.getType(n)]||void 0},t}();Schema.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$2[r]=e};Schema.warning=warning;Schema.messages=messages;Schema.validators=validators$2;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$9="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$9,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:r}){const e=inject(formContextKey,void 0),n=inject(formItemContextKey);n||throwError(COMPONENT_NAME$9,"usage: <el-form-item><label-wrap /></el-form-item>");const g=useNamespace("form"),y=ref(),i=ref(0),k=()=>{var V;if((V=y.value)!=null&&V.firstElementChild){const z=window.getComputedStyle(y.value.firstElementChild).width;return Math.ceil(Number.parseFloat(z))}else return 0},$=(V="update")=>{nextTick(()=>{r.default&&t.isAutoWidth&&(V==="update"?i.value=k():V==="remove"&&(e==null||e.deregisterLabelWidth(i.value)))})},L=()=>$("update");return onMounted(()=>{L()}),onBeforeUnmount(()=>{$("remove")}),onUpdated(()=>L()),watch(i,(V,z)=>{t.updateAll&&(e==null||e.registerLabelWidth(V,z))}),useResizeObserver(computed(()=>{var V,z;return(z=(V=y.value)==null?void 0:V.firstElementChild)!=null?z:null}),L),()=>{var V,z;if(!r)return null;const{isAutoWidth:re}=t;if(re){const ie=e==null?void 0:e.autoLabelWidth,ue=n==null?void 0:n.hasLabel,le={};if(ue&&ie&&ie!=="auto"){const oe=Math.max(0,Number.parseInt(ie,10)-i.value),ae=e.labelPosition==="left"?"marginRight":"marginLeft";oe&&(le[ae]=`${oe}px`)}return createVNode("div",{ref:y,class:[g.be("item","label-wrap")],style:le},[(V=r.default)==null?void 0:V.call(r)])}else return createVNode(Fragment,{ref:y},[(z=r.default)==null?void 0:z.call(r)])}}});const _hoisted_1$G=["role","aria-labelledby"],__default__$N=defineComponent({name:"ElFormItem"}),_sfc_main$1g=defineComponent({...__default__$N,props:formItemProps,setup(t,{expose:r}){const e=t,n=useSlots(),g=inject(formContextKey,void 0),y=inject(formItemContextKey,void 0),i=useFormSize(void 0,{formItem:!1}),k=useNamespace("form-item"),$=useId().value,L=ref([]),V=ref(""),z=refDebounced(V,100),re=ref(""),ie=ref();let ue,le=!1;const oe=computed(()=>{if((g==null?void 0:g.labelPosition)==="top")return{};const xr=addUnit(e.labelWidth||(g==null?void 0:g.labelWidth)||"");return xr?{width:xr}:{}}),ae=computed(()=>{if((g==null?void 0:g.labelPosition)==="top"||g!=null&&g.inline)return{};if(!e.label&&!e.labelWidth&&Et)return{};const xr=addUnit(e.labelWidth||(g==null?void 0:g.labelWidth)||"");return!e.label&&!n.label?{marginLeft:xr}:{}}),Ue=computed(()=>[k.b(),k.m(i.value),k.is("error",V.value==="error"),k.is("validating",V.value==="validating"),k.is("success",V.value==="success"),k.is("required",sr.value||e.required),k.is("no-asterisk",g==null?void 0:g.hideRequiredAsterisk),(g==null?void 0:g.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[k.m("feedback")]:g==null?void 0:g.statusIcon}]),de=computed(()=>isBoolean$1(e.inlineMessage)?e.inlineMessage:(g==null?void 0:g.inlineMessage)||!1),_e=computed(()=>[k.e("error"),{[k.em("error","inline")]:de.value}]),Ve=computed(()=>e.prop?isString$2(e.prop)?e.prop:e.prop.join("."):""),$e=computed(()=>!!(e.label||n.label)),Lt=computed(()=>e.for||(L.value.length===1?L.value[0]:void 0)),jt=computed(()=>!Lt.value&&$e.value),Et=!!y,ir=computed(()=>{const xr=g==null?void 0:g.model;if(!(!xr||!e.prop))return getProp(xr,e.prop).value}),ur=computed(()=>{const{required:xr}=e,vr=[];e.rules&&vr.push(...castArray$1(e.rules));const Ir=g==null?void 0:g.rules;if(Ir&&e.prop){const Or=getProp(Ir,e.prop).value;Or&&vr.push(...castArray$1(Or))}if(xr!==void 0){const Or=vr.map((Cr,yr)=>[Cr,yr]).filter(([Cr])=>Object.keys(Cr).includes("required"));if(Or.length>0)for(const[Cr,yr]of Or)Cr.required!==xr&&(vr[yr]={...Cr,required:xr});else vr.push({required:xr})}return vr}),Dt=computed(()=>ur.value.length>0),lr=xr=>ur.value.filter(Ir=>!Ir.trigger||!xr?!0:Array.isArray(Ir.trigger)?Ir.trigger.includes(xr):Ir.trigger===xr).map(({trigger:Ir,...Or})=>Or),sr=computed(()=>ur.value.some(xr=>xr.required)),er=computed(()=>{var xr;return z.value==="error"&&e.showMessage&&((xr=g==null?void 0:g.showMessage)!=null?xr:!0)}),cr=computed(()=>`${e.label||""}${(g==null?void 0:g.labelSuffix)||""}`),or=xr=>{V.value=xr},hr=xr=>{var vr,Ir;const{errors:Or,fields:Cr}=xr;(!Or||!Cr)&&console.error(xr),or("error"),re.value=Or?(Ir=(vr=Or==null?void 0:Or[0])==null?void 0:vr.message)!=null?Ir:`${e.prop} is required`:"",g==null||g.emit("validate",e.prop,!1,re.value)},pr=()=>{or("success"),g==null||g.emit("validate",e.prop,!0,"")},Tr=async xr=>{const vr=Ve.value;return new Schema({[vr]:xr}).validate({[vr]:ir.value},{firstFields:!0}).then(()=>(pr(),!0)).catch(Or=>(hr(Or),Promise.reject(Or)))},Pr=async(xr,vr)=>{if(le||!e.prop)return!1;const Ir=isFunction$3(vr);if(!Dt.value)return vr==null||vr(!1),!1;const Or=lr(xr);return Or.length===0?(vr==null||vr(!0),!0):(or("validating"),Tr(Or).then(()=>(vr==null||vr(!0),!0)).catch(Cr=>{const{fields:yr}=Cr;return vr==null||vr(!1,yr),Ir?!1:Promise.reject(yr)}))},_r=()=>{or(""),re.value="",le=!1},Mr=async()=>{const xr=g==null?void 0:g.model;if(!xr||!e.prop)return;const vr=getProp(xr,e.prop);le=!0,vr.value=clone(ue),await nextTick(),_r(),le=!1},rr=xr=>{L.value.includes(xr)||L.value.push(xr)},kr=xr=>{L.value=L.value.filter(vr=>vr!==xr)};watch(()=>e.error,xr=>{re.value=xr||"",or(xr?"error":"")},{immediate:!0}),watch(()=>e.validateStatus,xr=>or(xr||""));const Er=reactive({...toRefs(e),$el:ie,size:i,validateState:V,labelId:$,inputIds:L,isGroup:jt,hasLabel:$e,fieldValue:ir,addInputId:rr,removeInputId:kr,resetField:Mr,clearValidate:_r,validate:Pr});return provide(formItemContextKey,Er),onMounted(()=>{e.prop&&(g==null||g.addField(Er),ue=clone(ir.value))}),onBeforeUnmount(()=>{g==null||g.removeField(Er)}),r({size:i,validateMessage:re,validateState:V,validate:Pr,clearValidate:_r,resetField:Mr}),(xr,vr)=>{var Ir;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:ie,class:normalizeClass(unref(Ue)),role:unref(jt)?"group":void 0,"aria-labelledby":unref(jt)?unref($):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(oe).width==="auto","update-all":((Ir=unref(g))==null?void 0:Ir.labelWidth)==="auto"},{default:withCtx(()=>[unref($e)?(openBlock(),createBlock(resolveDynamicComponent(unref(Lt)?"label":"div"),{key:0,id:unref($),for:unref(Lt),class:normalizeClass(unref(k).e("label")),style:normalizeStyle(unref(oe))},{default:withCtx(()=>[renderSlot(xr.$slots,"label",{label:unref(cr)},()=>[createTextVNode(toDisplayString(unref(cr)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(k).e("content")),style:normalizeStyle(unref(ae))},[renderSlot(xr.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(k).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(er)?renderSlot(xr.$slots,"error",{key:0,error:re.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(_e))},toDisplayString(re.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$G)}}});var FormItem=_export_sfc$1(_sfc_main$1g,[["__file","form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(t){const r=window.getComputedStyle(t),e=r.getPropertyValue("box-sizing"),n=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),g=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map(i=>`${i}:${r.getPropertyValue(i)}`).join(";"),paddingSize:n,borderSize:g,boxSizing:e}}function calcTextareaHeight(t,r=1,e){var n;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:g,borderSize:y,boxSizing:i,contextStyle:k}=calculateNodeStyling(t);hiddenTextarea.setAttribute("style",`${k};${HIDDEN_STYLE}`),hiddenTextarea.value=t.value||t.placeholder||"";let $=hiddenTextarea.scrollHeight;const L={};i==="border-box"?$=$+y:i==="content-box"&&($=$-g),hiddenTextarea.value="";const V=hiddenTextarea.scrollHeight-g;if(isNumber$1(r)){let z=V*r;i==="border-box"&&(z=z+g+y),$=Math.max(z,$),L.minHeight=`${z}px`}if(isNumber$1(e)){let z=V*e;i==="border-box"&&(z=z+g+y),$=Math.min(z,$)}return L.height=`${$}px`,(n=hiddenTextarea.parentNode)==null||n.removeChild(hiddenTextarea),hiddenTextarea=void 0,L}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})},autofocus:{type:Boolean,default:!1}}),inputEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t),input:t=>isString$2(t),change:t=>isString$2(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},_hoisted_1$F=["role"],_hoisted_2$p=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],_hoisted_3$d=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],__default__$M=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$1f=defineComponent({...__default__$M,props:inputProps,emits:inputEmits,setup(t,{expose:r,emit:e}){const n=t,g=useAttrs$1(),y=useSlots(),i=computed(()=>{const Zr={};return n.containerRole==="combobox"&&(Zr["aria-haspopup"]=g["aria-haspopup"],Zr["aria-owns"]=g["aria-owns"],Zr["aria-expanded"]=g["aria-expanded"]),Zr}),k=computed(()=>[n.type==="textarea"?oe.b():le.b(),le.m(ie.value),le.is("disabled",ue.value),le.is("exceed",rr.value),{[le.b("group")]:y.prepend||y.append,[le.bm("group","append")]:y.append,[le.bm("group","prepend")]:y.prepend,[le.m("prefix")]:y.prefix||n.prefixIcon,[le.m("suffix")]:y.suffix||n.suffixIcon||n.clearable||n.showPassword,[le.bm("suffix","password-clear")]:Tr.value&&Pr.value},g.class]),$=computed(()=>[le.e("wrapper"),le.is("focus",ir.value)]),L=useAttrs({excludeKeys:computed(()=>Object.keys(i.value))}),{form:V,formItem:z}=useFormItem(),{inputId:re}=useFormItemInputId(n,{formItemContext:z}),ie=useFormSize(),ue=useFormDisabled(),le=useNamespace("input"),oe=useNamespace("textarea"),ae=shallowRef(),Ue=shallowRef(),de=ref(!1),_e=ref(!1),Ve=ref(!1),$e=ref(),Lt=shallowRef(n.inputStyle),jt=computed(()=>ae.value||Ue.value),{wrapperRef:Et,isFocused:ir,handleFocus:ur,handleBlur:Dt}=useFocusController(jt,{afterBlur(){var Zr;n.validateEvent&&((Zr=z==null?void 0:z.validate)==null||Zr.call(z,"blur").catch(Nn=>void 0))}}),lr=computed(()=>{var Zr;return(Zr=V==null?void 0:V.statusIcon)!=null?Zr:!1}),sr=computed(()=>(z==null?void 0:z.validateState)||""),er=computed(()=>sr.value&&ValidateComponentsMap[sr.value]),cr=computed(()=>Ve.value?view_default:hide_default),or=computed(()=>[g.style]),hr=computed(()=>[n.inputStyle,Lt.value,{resize:n.resize}]),pr=computed(()=>isNil(n.modelValue)?"":String(n.modelValue)),Tr=computed(()=>n.clearable&&!ue.value&&!n.readonly&&!!pr.value&&(ir.value||de.value)),Pr=computed(()=>n.showPassword&&!ue.value&&!n.readonly&&!!pr.value&&(!!pr.value||ir.value)),_r=computed(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!ue.value&&!n.readonly&&!n.showPassword),Mr=computed(()=>pr.value.length),rr=computed(()=>!!_r.value&&Mr.value>Number(n.maxlength)),kr=computed(()=>!!y.suffix||!!n.suffixIcon||Tr.value||n.showPassword||_r.value||!!sr.value&&lr.value),[Er,xr]=useCursor(ae);useResizeObserver(Ue,Zr=>{if(Or(),!_r.value||n.resize!=="both")return;const Nn=Zr[0],{width:Qr}=Nn.contentRect;$e.value={right:`calc(100% - ${Qr+15+6}px)`}});const vr=()=>{const{type:Zr,autosize:Nn}=n;if(!(!isClient||Zr!=="textarea"||!Ue.value))if(Nn){const Qr=isObject$2(Nn)?Nn.minRows:void 0,Mn=isObject$2(Nn)?Nn.maxRows:void 0,Ln=calcTextareaHeight(Ue.value,Qr,Mn);Lt.value={overflowY:"hidden",...Ln},nextTick(()=>{Ue.value.offsetHeight,Lt.value=Ln})}else Lt.value={minHeight:calcTextareaHeight(Ue.value).minHeight}},Or=(Zr=>{let Nn=!1;return()=>{var Qr;if(Nn||!n.autosize)return;((Qr=Ue.value)==null?void 0:Qr.offsetParent)===null||(Zr(),Nn=!0)}})(vr),Cr=()=>{const Zr=jt.value,Nn=n.formatter?n.formatter(pr.value):pr.value;!Zr||Zr.value===Nn||(Zr.value=Nn)},yr=async Zr=>{Er();let{value:Nn}=Zr.target;if(n.formatter&&(Nn=n.parser?n.parser(Nn):Nn),!_e.value){if(Nn===pr.value){Cr();return}e(UPDATE_MODEL_EVENT,Nn),e("input",Nn),await nextTick(),Cr(),xr()}},fr=Zr=>{e("change",Zr.target.value)},Sr=Zr=>{e("compositionstart",Zr),_e.value=!0},Br=Zr=>{var Nn;e("compositionupdate",Zr);const Qr=(Nn=Zr.target)==null?void 0:Nn.value,Mn=Qr[Qr.length-1]||"";_e.value=!isKorean(Mn)},$r=Zr=>{e("compositionend",Zr),_e.value&&(_e.value=!1,yr(Zr))},Lr=()=>{Ve.value=!Ve.value,Gr()},Gr=async()=>{var Zr;await nextTick(),(Zr=jt.value)==null||Zr.focus()},qr=()=>{var Zr;return(Zr=jt.value)==null?void 0:Zr.blur()},Yr=Zr=>{de.value=!1,e("mouseleave",Zr)},bn=Zr=>{de.value=!0,e("mouseenter",Zr)},wn=Zr=>{e("keydown",Zr)},Xr=()=>{var Zr;(Zr=jt.value)==null||Zr.select()},qn=()=>{e(UPDATE_MODEL_EVENT,""),e("change",""),e("clear"),e("input","")};return watch(()=>n.modelValue,()=>{var Zr;nextTick(()=>vr()),n.validateEvent&&((Zr=z==null?void 0:z.validate)==null||Zr.call(z,"change").catch(Nn=>void 0))}),watch(pr,()=>Cr()),watch(()=>n.type,async()=>{await nextTick(),Cr(),vr()}),onMounted(()=>{!n.formatter&&n.parser,Cr(),nextTick(vr)}),r({input:ae,textarea:Ue,ref:jt,textareaStyle:hr,autosize:toRef(n,"autosize"),focus:Gr,blur:qr,select:Xr,clear:qn,resizeTextarea:vr}),(Zr,Nn)=>withDirectives((openBlock(),createElementBlock("div",mergeProps(unref(i),{class:unref(k),style:unref(or),role:Zr.containerRole,onMouseenter:bn,onMouseleave:Yr}),[createCommentVNode(" input "),Zr.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),Zr.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(le).be("group","prepend"))},[renderSlot(Zr.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:Et,class:normalizeClass(unref($))},[createCommentVNode(" prefix slot "),Zr.$slots.prefix||Zr.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("prefix-inner"))},[renderSlot(Zr.$slots,"prefix"),Zr.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(le).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Zr.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(re),ref_key:"input",ref:ae,class:unref(le).e("inner")},unref(L),{minlength:Zr.minlength,maxlength:Zr.maxlength,type:Zr.showPassword?Ve.value?"text":"password":Zr.type,disabled:unref(ue),readonly:Zr.readonly,autocomplete:Zr.autocomplete,tabindex:Zr.tabindex,"aria-label":Zr.label,placeholder:Zr.placeholder,style:Zr.inputStyle,form:Zr.form,autofocus:Zr.autofocus,onCompositionstart:Sr,onCompositionupdate:Br,onCompositionend:$r,onInput:yr,onFocus:Nn[0]||(Nn[0]=(...Qr)=>unref(ur)&&unref(ur)(...Qr)),onBlur:Nn[1]||(Nn[1]=(...Qr)=>unref(Dt)&&unref(Dt)(...Qr)),onChange:fr,onKeydown:wn}),null,16,_hoisted_2$p),createCommentVNode(" suffix slot "),unref(kr)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(le).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("suffix-inner"))},[!unref(Tr)||!unref(Pr)||!unref(_r)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(Zr.$slots,"suffix"),Zr.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(le).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Zr.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(Tr)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(le).e("icon"),unref(le).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:qn},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(Pr)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(le).e("icon"),unref(le).e("password")]),onClick:Lr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(cr))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(_r)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(le).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("count-inner"))},toDisplayString(unref(Mr))+" / "+toDisplayString(Zr.maxlength),3)],2)):createCommentVNode("v-if",!0),unref(sr)&&unref(er)&&unref(lr)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(le).e("icon"),unref(le).e("validateIcon"),unref(le).is("loading",unref(sr)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(er))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),Zr.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(le).be("group","append"))},[renderSlot(Zr.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(re),ref_key:"textarea",ref:Ue,class:unref(oe).e("inner")},unref(L),{minlength:Zr.minlength,maxlength:Zr.maxlength,tabindex:Zr.tabindex,disabled:unref(ue),readonly:Zr.readonly,autocomplete:Zr.autocomplete,style:unref(hr),"aria-label":Zr.label,placeholder:Zr.placeholder,form:Zr.form,autofocus:Zr.autofocus,onCompositionstart:Sr,onCompositionupdate:Br,onCompositionend:$r,onInput:yr,onFocus:Nn[2]||(Nn[2]=(...Qr)=>unref(ur)&&unref(ur)(...Qr)),onBlur:Nn[3]||(Nn[3]=(...Qr)=>unref(Dt)&&unref(Dt)(...Qr)),onChange:fr,onKeydown:wn}),null,16,_hoisted_3$d),unref(_r)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle($e.value),class:normalizeClass(unref(le).e("count"))},toDisplayString(unref(Mr))+" / "+toDisplayString(Zr.maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$F)),[[vShow,Zr.type!=="hidden"]])}});var Input=_export_sfc$1(_sfc_main$1f,[["__file","input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle=({move:t,size:r,bar:e})=>({[e.size]:r,transform:`translate${e.axis}(${t}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$8="Thumb",_sfc_main$1e=defineComponent({__name:"thumb",props:thumbProps,setup(t){const r=t,e=inject(scrollbarContextKey),n=useNamespace("scrollbar");e||throwError(COMPONENT_NAME$8,"can not inject scrollbar context");const g=ref(),y=ref(),i=ref({}),k=ref(!1);let $=!1,L=!1,V=isClient?document.onselectstart:null;const z=computed(()=>BAR_MAP[r.vertical?"vertical":"horizontal"]),re=computed(()=>renderThumbStyle({size:r.size,move:r.move,bar:z.value})),ie=computed(()=>g.value[z.value.offset]**2/e.wrapElement[z.value.scrollSize]/r.ratio/y.value[z.value.offset]),ue=$e=>{var Lt;if($e.stopPropagation(),$e.ctrlKey||[1,2].includes($e.button))return;(Lt=window.getSelection())==null||Lt.removeAllRanges(),oe($e);const jt=$e.currentTarget;jt&&(i.value[z.value.axis]=jt[z.value.offset]-($e[z.value.client]-jt.getBoundingClientRect()[z.value.direction]))},le=$e=>{if(!y.value||!g.value||!e.wrapElement)return;const Lt=Math.abs($e.target.getBoundingClientRect()[z.value.direction]-$e[z.value.client]),jt=y.value[z.value.offset]/2,Et=(Lt-jt)*100*ie.value/g.value[z.value.offset];e.wrapElement[z.value.scroll]=Et*e.wrapElement[z.value.scrollSize]/100},oe=$e=>{$e.stopImmediatePropagation(),$=!0,document.addEventListener("mousemove",ae),document.addEventListener("mouseup",Ue),V=document.onselectstart,document.onselectstart=()=>!1},ae=$e=>{if(!g.value||!y.value||$===!1)return;const Lt=i.value[z.value.axis];if(!Lt)return;const jt=(g.value.getBoundingClientRect()[z.value.direction]-$e[z.value.client])*-1,Et=y.value[z.value.offset]-Lt,ir=(jt-Et)*100*ie.value/g.value[z.value.offset];e.wrapElement[z.value.scroll]=ir*e.wrapElement[z.value.scrollSize]/100},Ue=()=>{$=!1,i.value[z.value.axis]=0,document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",Ue),Ve(),L&&(k.value=!1)},de=()=>{L=!1,k.value=!!r.size},_e=()=>{L=!0,k.value=$};onBeforeUnmount(()=>{Ve(),document.removeEventListener("mouseup",Ue)});const Ve=()=>{document.onselectstart!==V&&(document.onselectstart=V)};return useEventListener(toRef(e,"scrollbarElement"),"mousemove",de),useEventListener(toRef(e,"scrollbarElement"),"mouseleave",_e),($e,Lt)=>(openBlock(),createBlock(Transition,{name:unref(n).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:g,class:normalizeClass([unref(n).e("bar"),unref(n).is(unref(z).key)]),onMousedown:le},[createBaseVNode("div",{ref_key:"thumb",ref:y,class:normalizeClass(unref(n).e("thumb")),style:normalizeStyle(unref(re)),onMousedown:ue},null,38)],34),[[vShow,$e.always||k.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc$1(_sfc_main$1e,[["__file","thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),_sfc_main$1d=defineComponent({__name:"bar",props:barProps,setup(t,{expose:r}){const e=t,n=inject(scrollbarContextKey),g=ref(0),y=ref(0),i=ref(""),k=ref(""),$=ref(1),L=ref(1);return r({handleScroll:re=>{if(re){const ie=re.offsetHeight-GAP,ue=re.offsetWidth-GAP;y.value=re.scrollTop*100/ie*$.value,g.value=re.scrollLeft*100/ue*L.value}},update:()=>{const re=n==null?void 0:n.wrapElement;if(!re)return;const ie=re.offsetHeight-GAP,ue=re.offsetWidth-GAP,le=ie**2/re.scrollHeight,oe=ue**2/re.scrollWidth,ae=Math.max(le,e.minSize),Ue=Math.max(oe,e.minSize);$.value=le/(ie-le)/(ae/(ie-ae)),L.value=oe/(ue-oe)/(Ue/(ue-Ue)),k.value=ae+GAP<ie?`${ae}px`:"",i.value=Ue+GAP<ue?`${Ue}px`:""}}),(re,ie)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:g.value,ratio:L.value,size:i.value,always:re.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:y.value,ratio:$.value,size:k.value,vertical:"",always:re.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc$1(_sfc_main$1d,[["__file","bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),scrollbarEmits={scroll:({scrollTop:t,scrollLeft:r})=>[t,r].every(isNumber$1)},COMPONENT_NAME$7="ElScrollbar",__default__$L=defineComponent({name:COMPONENT_NAME$7}),_sfc_main$1c=defineComponent({...__default__$L,props:scrollbarProps,emits:scrollbarEmits,setup(t,{expose:r,emit:e}){const n=t,g=useNamespace("scrollbar");let y,i;const k=ref(),$=ref(),L=ref(),V=ref(),z=computed(()=>{const de={};return n.height&&(de.height=addUnit(n.height)),n.maxHeight&&(de.maxHeight=addUnit(n.maxHeight)),[n.wrapStyle,de]}),re=computed(()=>[n.wrapClass,g.e("wrap"),{[g.em("wrap","hidden-default")]:!n.native}]),ie=computed(()=>[g.e("view"),n.viewClass]),ue=()=>{var de;$.value&&((de=V.value)==null||de.handleScroll($.value),e("scroll",{scrollTop:$.value.scrollTop,scrollLeft:$.value.scrollLeft}))};function le(de,_e){isObject$2(de)?$.value.scrollTo(de):isNumber$1(de)&&isNumber$1(_e)&&$.value.scrollTo(de,_e)}const oe=de=>{isNumber$1(de)&&($.value.scrollTop=de)},ae=de=>{isNumber$1(de)&&($.value.scrollLeft=de)},Ue=()=>{var de;(de=V.value)==null||de.update()};return watch(()=>n.noresize,de=>{de?(y==null||y(),i==null||i()):({stop:y}=useResizeObserver(L,Ue),i=useEventListener("resize",Ue))},{immediate:!0}),watch(()=>[n.maxHeight,n.height],()=>{n.native||nextTick(()=>{var de;Ue(),$.value&&((de=V.value)==null||de.handleScroll($.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:k,wrapElement:$})),onMounted(()=>{n.native||nextTick(()=>{Ue()})}),onUpdated(()=>Ue()),r({wrapRef:$,update:Ue,scrollTo:le,setScrollTop:oe,setScrollLeft:ae,handleScroll:ue}),(de,_e)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:k,class:normalizeClass(unref(g).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:$,class:normalizeClass(unref(re)),style:normalizeStyle(unref(z)),onScroll:ue},[(openBlock(),createBlock(resolveDynamicComponent(de.tag),{id:de.id,ref_key:"resizeRef",ref:L,class:normalizeClass(unref(ie)),style:normalizeStyle(de.viewStyle),role:de.role,"aria-label":de.ariaLabel,"aria-orientation":de.ariaOrientation},{default:withCtx(()=>[renderSlot(de.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),de.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:V,always:de.always,"min-size":de.minSize},null,8,["always","min-size"]))],2))}});var Scrollbar=_export_sfc$1(_sfc_main$1c,[["__file","scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$K=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$1b=defineComponent({...__default__$K,props:popperProps,setup(t,{expose:r}){const e=t,n=ref(),g=ref(),y=ref(),i=ref(),k=computed(()=>e.role),$={triggerRef:n,popperInstanceRef:g,contentRef:y,referenceRef:i,role:k};return r($),provide(POPPER_INJECTION_KEY,$),(L,V)=>renderSlot(L.$slots,"default")}});var Popper=_export_sfc$1(_sfc_main$1b,[["__file","popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$J=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$1a=defineComponent({...__default__$J,props:popperArrowProps,setup(t,{expose:r}){const e=t,n=useNamespace("popper"),{arrowOffset:g,arrowRef:y,arrowStyle:i}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>e.arrowOffset,k=>{g.value=k}),onBeforeUnmount(()=>{y.value=void 0}),r({arrowRef:y}),(k,$)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:y,class:normalizeClass(unref(n).e("arrow")),style:normalizeStyle(unref(i)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc$1(_sfc_main$1a,[["__file","arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(t,{slots:r,attrs:e}){var n;const g=inject(FORWARD_REF_INJECTION_KEY),y=useForwardRefDirective((n=g==null?void 0:g.setForwardRef)!=null?n:NOOP);return()=>{var i;const k=(i=r.default)==null?void 0:i.call(r,e);if(!k||k.length>1)return null;const $=findFirstLegitChild(k);return $?withDirectives(cloneVNode($,e),[[y]]):null}}});function findFirstLegitChild(t){if(!t)return null;const r=t;for(const e of r){if(isObject$2(e))switch(e.type){case Comment:continue;case Text:case"svg":return wrapTextContent(e);case Fragment:return findFirstLegitChild(e.children);default:return e}return wrapTextContent(e)}return null}function wrapTextContent(t){const r=useNamespace("only-child");return createVNode("span",{class:r.e("content")},[t])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$I=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$19=defineComponent({...__default__$I,props:popperTriggerProps,setup(t,{expose:r}){const e=t,{role:n,triggerRef:g}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(g);const y=computed(()=>k.value?e.id:void 0),i=computed(()=>{if(n&&n.value==="tooltip")return e.open&&e.id?e.id:void 0}),k=computed(()=>{if(n&&n.value!=="tooltip")return n.value}),$=computed(()=>k.value?`${e.open}`:void 0);let L;return onMounted(()=>{watch(()=>e.virtualRef,V=>{V&&(g.value=unrefElement(V))},{immediate:!0}),watch(g,(V,z)=>{L==null||L(),L=void 0,isElement(V)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(re=>{var ie;const ue=e[re];ue&&(V.addEventListener(re.slice(2).toLowerCase(),ue),(ie=z==null?void 0:z.removeEventListener)==null||ie.call(z,re.slice(2).toLowerCase(),ue))}),L=watch([y,i,k,$],re=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((ie,ue)=>{isNil(re[ue])?V.removeAttribute(ie):V.setAttribute(ie,re[ue])})},{immediate:!0})),isElement(z)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(re=>z.removeAttribute(re))},{immediate:!0})}),onBeforeUnmount(()=>{L==null||L(),L=void 0}),r({triggerRef:g}),(V,z)=>V.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},V.$attrs,{"aria-controls":unref(y),"aria-describedby":unref(i),"aria-expanded":unref($),"aria-haspopup":unref(k)}),{default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc$1(_sfc_main$19,[["__file","trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=t=>{const r=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const g=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||g?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)r.push(e.currentNode);return r},getVisibleElement=(t,r)=>{for(const e of t)if(!isHidden(e,r))return e},isHidden=(t,r)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},getEdges=t=>{const r=obtainAllFocusableElements(t),e=getVisibleElement(r,t),n=getVisibleElement(r.reverse(),t);return[e,n]},isSelectable=t=>t instanceof HTMLInputElement&&"select"in t,tryFocus=(t,r)=>{if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),t!==e&&isSelectable(t)&&r&&t.select()}};function removeFromStack(t,r){const e=[...t],n=t.indexOf(r);return n!==-1&&e.splice(n,1),e}const createFocusableStack=()=>{let t=[];return{push:n=>{const g=t[0];g&&n!==g&&g.pause(),t=removeFromStack(t,n),t.unshift(n)},remove:n=>{var g,y;t=removeFromStack(t,n),(y=(g=t[0])==null?void 0:g.resume)==null||y.call(g)}}},focusFirstDescendant=(t,r=!1)=>{const e=document.activeElement;for(const n of t)if(tryFocus(n,r),document.activeElement!==e)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=t=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:t}),_sfc_main$18=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:r}){const e=ref();let n,g;const{focusReason:y}=useFocusReason();useEscapeKeydown(ue=>{t.trapped&&!i.paused&&r("release-requested",ue)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},k=ue=>{if(!t.loop&&!t.trapped||i.paused)return;const{key:le,altKey:oe,ctrlKey:ae,metaKey:Ue,currentTarget:de,shiftKey:_e}=ue,{loop:Ve}=t,$e=le===EVENT_CODE.tab&&!oe&&!ae&&!Ue,Lt=document.activeElement;if($e&&Lt){const jt=de,[Et,ir]=getEdges(jt);if(Et&&ir){if(!_e&&Lt===ir){const Dt=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",Dt),Dt.defaultPrevented||(ue.preventDefault(),Ve&&tryFocus(Et,!0))}else if(_e&&[Et,jt].includes(Lt)){const Dt=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",Dt),Dt.defaultPrevented||(ue.preventDefault(),Ve&&tryFocus(ir,!0))}}else if(Lt===jt){const Dt=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",Dt),Dt.defaultPrevented||ue.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:e,onKeydown:k}),watch(()=>t.focusTrapEl,ue=>{ue&&(e.value=ue)},{immediate:!0}),watch([e],([ue],[le])=>{ue&&(ue.addEventListener("keydown",k),ue.addEventListener("focusin",V),ue.addEventListener("focusout",z)),le&&(le.removeEventListener("keydown",k),le.removeEventListener("focusin",V),le.removeEventListener("focusout",z))});const $=ue=>{r(ON_TRAP_FOCUS_EVT,ue)},L=ue=>r(ON_RELEASE_FOCUS_EVT,ue),V=ue=>{const le=unref(e);if(!le)return;const oe=ue.target,ae=ue.relatedTarget,Ue=oe&&le.contains(oe);t.trapped||ae&&le.contains(ae)||(n=ae),Ue&&r("focusin",ue),!i.paused&&t.trapped&&(Ue?g=oe:tryFocus(g,!0))},z=ue=>{const le=unref(e);if(!(i.paused||!le))if(t.trapped){const oe=ue.relatedTarget;!isNil(oe)&&!le.contains(oe)&&setTimeout(()=>{if(!i.paused&&t.trapped){const ae=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",ae),ae.defaultPrevented||tryFocus(g,!0)}},0)}else{const oe=ue.target;oe&&le.contains(oe)||r("focusout",ue)}};async function re(){await nextTick();const ue=unref(e);if(ue){focusableStack.push(i);const le=ue.contains(document.activeElement)?n:document.activeElement;if(n=le,!ue.contains(le)){const ae=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);ue.addEventListener(FOCUS_AFTER_TRAPPED,$),ue.dispatchEvent(ae),ae.defaultPrevented||nextTick(()=>{let Ue=t.focusStartEl;isString$2(Ue)||(tryFocus(Ue),document.activeElement!==Ue&&(Ue="first")),Ue==="first"&&focusFirstDescendant(obtainAllFocusableElements(ue),!0),(document.activeElement===le||Ue==="container")&&tryFocus(ue)})}}}function ie(){const ue=unref(e);if(ue){ue.removeEventListener(FOCUS_AFTER_TRAPPED,$);const le=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:y.value}});ue.addEventListener(FOCUS_AFTER_RELEASED,L),ue.dispatchEvent(le),!le.defaultPrevented&&(y.value=="keyboard"||!isFocusCausedByUserEvent()||ue.contains(document.activeElement))&&tryFocus(n??document.body),ue.removeEventListener(FOCUS_AFTER_RELEASED,L),focusableStack.remove(i)}}return onMounted(()=>{t.trapped&&re(),watch(()=>t.trapped,ue=>{ue?re():ie()})}),onBeforeUnmount(()=>{t.trapped&&ie()}),{onKeydown:k}}});function _sfc_render$d(t,r,e,n,g,y){return renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var ElFocusTrap=_export_sfc$1(_sfc_main$18,[["render",_sfc_render$d],["__file","focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),popperContentEmits={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(t,r=[])=>{const{placement:e,strategy:n,popperOptions:g}=t,y={placement:e,strategy:n,...g,modifiers:[...genModifiers(t),...r]};return deriveExtraModifiers(y,g==null?void 0:g.modifiers),y},unwrapMeasurableEl=t=>{if(isClient)return unrefElement(t)};function genModifiers(t){const{offset:r,gpuAcceleration:e,fallbackPlacements:n}=t;return[{name:"offset",options:{offset:[0,r??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function deriveExtraModifiers(t,r){r&&(t.modifiers=[...t.modifiers,...r??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=t=>{const{popperInstanceRef:r,contentRef:e,triggerRef:n,role:g}=inject(POPPER_INJECTION_KEY,void 0),y=ref(),i=ref(),k=computed(()=>({name:"eventListeners",enabled:!!t.visible})),$=computed(()=>{var ae;const Ue=unref(y),de=(ae=unref(i))!=null?ae:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$2(Ue),options:{element:Ue,padding:de}}}),L=computed(()=>({onFirstUpdate:()=>{ue()},...buildPopperOptions(t,[unref($),unref(k)])})),V=computed(()=>unwrapMeasurableEl(t.referenceEl)||unref(n)),{attributes:z,state:re,styles:ie,update:ue,forceUpdate:le,instanceRef:oe}=usePopper(V,e,L);return watch(oe,ae=>r.value=ae),onMounted(()=>{watch(()=>{var ae;return(ae=unref(V))==null?void 0:ae.getBoundingClientRect()},()=>{ue()})}),{attributes:z,arrowRef:y,contentRef:e,instanceRef:oe,state:re,styles:ie,role:g,forceUpdate:le,update:ue}},usePopperContentDOM=(t,{attributes:r,styles:e,role:n})=>{const{nextZIndex:g}=useZIndex(),y=useNamespace("popper"),i=computed(()=>unref(r).popper),k=ref(isNumber$1(t.zIndex)?t.zIndex:g()),$=computed(()=>[y.b(),y.is("pure",t.pure),y.is(t.effect),t.popperClass]),L=computed(()=>[{zIndex:unref(k)},unref(e).popper,t.popperStyle||{}]),V=computed(()=>n.value==="dialog"?"false":void 0),z=computed(()=>unref(e).arrow||{});return{ariaModal:V,arrowStyle:z,contentAttrs:i,contentClass:$,contentStyle:L,contentZIndex:k,updateZIndex:()=>{k.value=isNumber$1(t.zIndex)?t.zIndex:g()}}},usePopperContentFocusTrap=(t,r)=>{const e=ref(!1),n=ref();return{focusStartRef:n,trapped:e,onFocusAfterReleased:L=>{var V;((V=L.detail)==null?void 0:V.focusReason)!=="pointer"&&(n.value="first",r("blur"))},onFocusAfterTrapped:()=>{r("focus")},onFocusInTrap:L=>{t.visible&&!e.value&&(L.target&&(n.value=L.target),e.value=!0)},onFocusoutPrevented:L=>{t.trapping||(L.detail.focusReason==="pointer"&&L.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,r("close")}}},__default__$H=defineComponent({name:"ElPopperContent"}),_sfc_main$17=defineComponent({...__default__$H,props:popperContentProps,emits:popperContentEmits,setup(t,{expose:r,emit:e}){const n=t,{focusStartRef:g,trapped:y,onFocusAfterReleased:i,onFocusAfterTrapped:k,onFocusInTrap:$,onFocusoutPrevented:L,onReleaseRequested:V}=usePopperContentFocusTrap(n,e),{attributes:z,arrowRef:re,contentRef:ie,styles:ue,instanceRef:le,role:oe,update:ae}=usePopperContent(n),{ariaModal:Ue,arrowStyle:de,contentAttrs:_e,contentClass:Ve,contentStyle:$e,updateZIndex:Lt}=usePopperContentDOM(n,{styles:ue,attributes:z,role:oe}),jt=inject(formItemContextKey,void 0),Et=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:de,arrowRef:re,arrowOffset:Et}),jt&&(jt.addInputId||jt.removeInputId)&&provide(formItemContextKey,{...jt,addInputId:NOOP,removeInputId:NOOP});let ir;const ur=(lr=!0)=>{ae(),lr&&Lt()},Dt=()=>{ur(!1),n.visible&&n.focusOnShow?y.value=!0:n.visible===!1&&(y.value=!1)};return onMounted(()=>{watch(()=>n.triggerTargetEl,(lr,sr)=>{ir==null||ir(),ir=void 0;const er=unref(lr||ie.value),cr=unref(sr||ie.value);isElement(er)&&(ir=watch([oe,()=>n.ariaLabel,Ue,()=>n.id],or=>{["role","aria-label","aria-modal","id"].forEach((hr,pr)=>{isNil(or[pr])?er.removeAttribute(hr):er.setAttribute(hr,or[pr])})},{immediate:!0})),cr!==er&&isElement(cr)&&["role","aria-label","aria-modal","id"].forEach(or=>{cr.removeAttribute(or)})},{immediate:!0}),watch(()=>n.visible,Dt,{immediate:!0})}),onBeforeUnmount(()=>{ir==null||ir(),ir=void 0}),r({popperContentRef:ie,popperInstanceRef:le,updatePopper:ur,contentStyle:$e}),(lr,sr)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:ie},unref(_e),{style:unref($e),class:unref(Ve),tabindex:"-1",onMouseenter:sr[0]||(sr[0]=er=>lr.$emit("mouseenter",er)),onMouseleave:sr[1]||(sr[1]=er=>lr.$emit("mouseleave",er))}),[createVNode(unref(ElFocusTrap),{trapped:unref(y),"trap-on-focus-in":!0,"focus-trap-el":unref(ie),"focus-start-el":unref(g),onFocusAfterTrapped:unref(k),onFocusAfterReleased:unref(i),onFocusin:unref($),onFocusoutPrevented:unref(L),onReleaseRequested:unref(V)},{default:withCtx(()=>[renderSlot(lr.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc$1(_sfc_main$17,[["__file","content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(t,r)=>isArray$3(t)?t.includes(r):t===r,whenTrigger=(t,r,e)=>n=>{isTriggerType(unref(t),r)&&e(n)},__default__$G=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$16=defineComponent({...__default__$G,props:useTooltipTriggerProps,setup(t,{expose:r}){const e=t,n=useNamespace("tooltip"),{controlled:g,id:y,open:i,onOpen:k,onClose:$,onToggle:L}=inject(TOOLTIP_INJECTION_KEY,void 0),V=ref(null),z=()=>{if(unref(g)||e.disabled)return!0},re=toRef(e,"trigger"),ie=composeEventHandlers(z,whenTrigger(re,"hover",k)),ue=composeEventHandlers(z,whenTrigger(re,"hover",$)),le=composeEventHandlers(z,whenTrigger(re,"click",_e=>{_e.button===0&&L(_e)})),oe=composeEventHandlers(z,whenTrigger(re,"focus",k)),ae=composeEventHandlers(z,whenTrigger(re,"focus",$)),Ue=composeEventHandlers(z,whenTrigger(re,"contextmenu",_e=>{_e.preventDefault(),L(_e)})),de=composeEventHandlers(z,_e=>{const{code:Ve}=_e;e.triggerKeys.includes(Ve)&&(_e.preventDefault(),L(_e))});return r({triggerRef:V}),(_e,Ve)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(y),"virtual-ref":_e.virtualRef,open:unref(i),"virtual-triggering":_e.virtualTriggering,class:normalizeClass(unref(n).e("trigger")),onBlur:unref(ae),onClick:unref(le),onContextmenu:unref(Ue),onFocus:unref(oe),onMouseenter:unref(ie),onMouseleave:unref(ue),onKeydown:unref(de)},{default:withCtx(()=>[renderSlot(_e.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc$1(_sfc_main$16,[["__file","trigger.vue"]]);const __default__$F=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$15=defineComponent({...__default__$F,props:useTooltipContentProps,setup(t,{expose:r}){const e=t,{selector:n}=usePopperContainerId(),g=useNamespace("tooltip"),y=ref(null),i=ref(!1),{controlled:k,id:$,open:L,trigger:V,onClose:z,onOpen:re,onShow:ie,onHide:ue,onBeforeShow:le,onBeforeHide:oe}=inject(TOOLTIP_INJECTION_KEY,void 0),ae=computed(()=>e.transition||`${g.namespace.value}-fade-in-linear`),Ue=computed(()=>e.persistent);onBeforeUnmount(()=>{i.value=!0});const de=computed(()=>unref(Ue)?!0:unref(L)),_e=computed(()=>e.disabled?!1:unref(L)),Ve=computed(()=>e.appendTo||n.value),$e=computed(()=>{var or;return(or=e.style)!=null?or:{}}),Lt=computed(()=>!unref(L)),jt=()=>{ue()},Et=()=>{if(unref(k))return!0},ir=composeEventHandlers(Et,()=>{e.enterable&&unref(V)==="hover"&&re()}),ur=composeEventHandlers(Et,()=>{unref(V)==="hover"&&z()}),Dt=()=>{var or,hr;(hr=(or=y.value)==null?void 0:or.updatePopper)==null||hr.call(or),le==null||le()},lr=()=>{oe==null||oe()},sr=()=>{ie(),cr=onClickOutside(computed(()=>{var or;return(or=y.value)==null?void 0:or.popperContentRef}),()=>{if(unref(k))return;unref(V)!=="hover"&&z()})},er=()=>{e.virtualTriggering||z()};let cr;return watch(()=>unref(L),or=>{or||cr==null||cr()},{flush:"post"}),watch(()=>e.content,()=>{var or,hr;(hr=(or=y.value)==null?void 0:or.updatePopper)==null||hr.call(or)}),r({contentRef:y}),(or,hr)=>(openBlock(),createBlock(Teleport,{disabled:!or.teleported,to:unref(Ve)},[createVNode(Transition,{name:unref(ae),onAfterLeave:jt,onBeforeEnter:Dt,onAfterEnter:sr,onBeforeLeave:lr},{default:withCtx(()=>[unref(de)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref($),ref_key:"contentRef",ref:y},or.$attrs,{"aria-label":or.ariaLabel,"aria-hidden":unref(Lt),"boundaries-padding":or.boundariesPadding,"fallback-placements":or.fallbackPlacements,"gpu-acceleration":or.gpuAcceleration,offset:or.offset,placement:or.placement,"popper-options":or.popperOptions,strategy:or.strategy,effect:or.effect,enterable:or.enterable,pure:or.pure,"popper-class":or.popperClass,"popper-style":[or.popperStyle,unref($e)],"reference-el":or.referenceEl,"trigger-target-el":or.triggerTargetEl,visible:unref(_e),"z-index":or.zIndex,onMouseenter:unref(ir),onMouseleave:unref(ur),onBlur:er,onClose:unref(z)}),{default:withCtx(()=>[i.value?createCommentVNode("v-if",!0):renderSlot(or.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(_e)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc$1(_sfc_main$15,[["__file","content.vue"]]);const _hoisted_1$E=["innerHTML"],_hoisted_2$o={key:1},__default__$E=defineComponent({name:"ElTooltip"}),_sfc_main$14=defineComponent({...__default__$E,props:useTooltipProps,emits:tooltipEmits,setup(t,{expose:r,emit:e}){const n=t;usePopperContainer();const g=useId(),y=ref(),i=ref(),k=()=>{var ae;const Ue=unref(y);Ue&&((ae=Ue.popperInstanceRef)==null||ae.update())},$=ref(!1),L=ref(),{show:V,hide:z,hasUpdateHandler:re}=useTooltipModelToggle({indicator:$,toggleReason:L}),{onOpen:ie,onClose:ue}=useDelayedToggle({showAfter:toRef(n,"showAfter"),hideAfter:toRef(n,"hideAfter"),autoClose:toRef(n,"autoClose"),open:V,close:z}),le=computed(()=>isBoolean$1(n.visible)&&!re.value);provide(TOOLTIP_INJECTION_KEY,{controlled:le,id:g,open:readonly($),trigger:toRef(n,"trigger"),onOpen:ae=>{ie(ae)},onClose:ae=>{ue(ae)},onToggle:ae=>{unref($)?ue(ae):ie(ae)},onShow:()=>{e("show",L.value)},onHide:()=>{e("hide",L.value)},onBeforeShow:()=>{e("before-show",L.value)},onBeforeHide:()=>{e("before-hide",L.value)},updatePopper:k}),watch(()=>n.disabled,ae=>{ae&&$.value&&($.value=!1)});const oe=ae=>{var Ue,de;const _e=(de=(Ue=i.value)==null?void 0:Ue.contentRef)==null?void 0:de.popperContentRef,Ve=(ae==null?void 0:ae.relatedTarget)||document.activeElement;return _e&&_e.contains(Ve)};return onDeactivated(()=>$.value&&z()),r({popperRef:y,contentRef:i,isFocusInsideContent:oe,updatePopper:k,onOpen:ie,onClose:ue,hide:z}),(ae,Ue)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:y,role:ae.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:ae.disabled,trigger:ae.trigger,"trigger-keys":ae.triggerKeys,"virtual-ref":ae.virtualRef,"virtual-triggering":ae.virtualTriggering},{default:withCtx(()=>[ae.$slots.default?renderSlot(ae.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:i,"aria-label":ae.ariaLabel,"boundaries-padding":ae.boundariesPadding,content:ae.content,disabled:ae.disabled,effect:ae.effect,enterable:ae.enterable,"fallback-placements":ae.fallbackPlacements,"hide-after":ae.hideAfter,"gpu-acceleration":ae.gpuAcceleration,offset:ae.offset,persistent:ae.persistent,"popper-class":ae.popperClass,"popper-style":ae.popperStyle,placement:ae.placement,"popper-options":ae.popperOptions,pure:ae.pure,"raw-content":ae.rawContent,"reference-el":ae.referenceEl,"trigger-target-el":ae.triggerTargetEl,"show-after":ae.showAfter,strategy:ae.strategy,teleported:ae.teleported,transition:ae.transition,"virtual-triggering":ae.virtualTriggering,"z-index":ae.zIndex,"append-to":ae.appendTo},{default:withCtx(()=>[renderSlot(ae.$slots,"content",{},()=>[ae.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:ae.content},null,8,_hoisted_1$E)):(openBlock(),createElementBlock("span",_hoisted_2$o,toDisplayString(ae.content),1))]),ae.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":ae.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc$1(_sfc_main$14,[["__file","tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),avatarProps=buildProps({size:{type:[Number,String],values:componentSizes,default:"",validator:t=>isNumber$1(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:iconPropType},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:definePropType(String),default:"cover"}}),avatarEmits={error:t=>t instanceof Event},_hoisted_1$D=["src","alt","srcset"],__default__$D=defineComponent({name:"ElAvatar"}),_sfc_main$13=defineComponent({...__default__$D,props:avatarProps,emits:avatarEmits,setup(t,{emit:r}){const e=t,n=useNamespace("avatar"),g=ref(!1),y=computed(()=>{const{size:L,icon:V,shape:z}=e,re=[n.b()];return isString$2(L)&&re.push(n.m(L)),V&&re.push(n.m("icon")),z&&re.push(n.m(z)),re}),i=computed(()=>{const{size:L}=e;return isNumber$1(L)?n.cssVarBlock({size:addUnit(L)||""}):void 0}),k=computed(()=>({objectFit:e.fit}));watch(()=>e.src,()=>g.value=!1);function $(L){g.value=!0,r("error",L)}return(L,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y)),style:normalizeStyle(unref(i))},[(L.src||L.srcSet)&&!g.value?(openBlock(),createElementBlock("img",{key:0,src:L.src,alt:L.alt,srcset:L.srcSet,style:normalizeStyle(unref(k)),onError:$},null,44,_hoisted_1$D)):L.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(L.icon)))]),_:1})):renderSlot(L.$slots,"default",{key:2})],6))}});var Avatar=_export_sfc$1(_sfc_main$13,[["__file","avatar.vue"]]);const ElAvatar=withInstall(Avatar),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_hoisted_1$C=["textContent"],__default__$C=defineComponent({name:"ElBadge"}),_sfc_main$12=defineComponent({...__default__$C,props:badgeProps,setup(t,{expose:r}){const e=t,n=useNamespace("badge"),g=computed(()=>e.isDot?"":isNumber$1(e.value)&&isNumber$1(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return r({content:g}),(y,i)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(n).b())},[renderSlot(y.$slots,"default"),createVNode(Transition,{name:`${unref(n).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(n).e("content"),unref(n).em("content",y.type),unref(n).is("fixed",!!y.$slots.default),unref(n).is("dot",y.isDot)]),textContent:toDisplayString(unref(g))},null,10,_hoisted_1$C),[[vShow,!y.hidden&&(unref(g)||y.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc$1(_sfc_main$12,[["__file","badge.vue"]]);const ElBadge=withInstall(Badge),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(t,r)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>t.type==="text"));const e=inject(buttonGroupContextKey,void 0),n=useGlobalConfig("button"),{form:g}=useFormItem(),y=useFormSize(computed(()=>e==null?void 0:e.size)),i=useFormDisabled(),k=ref(),$=useSlots(),L=computed(()=>t.type||(e==null?void 0:e.type)||""),V=computed(()=>{var ue,le,oe;return(oe=(le=t.autoInsertSpace)!=null?le:(ue=n.value)==null?void 0:ue.autoInsertSpace)!=null?oe:!1}),z=computed(()=>t.tag==="button"?{ariaDisabled:i.value||t.loading,disabled:i.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),re=computed(()=>{var ue;const le=(ue=$.default)==null?void 0:ue.call($);if(V.value&&(le==null?void 0:le.length)===1){const oe=le[0];if((oe==null?void 0:oe.type)===Text){const ae=oe.children;return/^\p{Unified_Ideograph}{2}$/u.test(ae.trim())}}return!1});return{_disabled:i,_size:y,_type:L,_ref:k,_props:z,shouldAddSpace:re,handleClick:ue=>{t.nativeType==="reset"&&(g==null||g.resetFields()),r("click",ue)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:t=>t instanceof MouseEvent};function bound01(t,r){isOnePointZero(t)&&(t="100%");var e=isPercentage(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),e&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function clamp01(t){return Math.min(1,Math.max(0,t))}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!==-1}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function convertToPercentage(t){return t<=1?"".concat(Number(t)*100,"%"):t}function pad2(t){return t.length===1?"0"+t:String(t)}function rgbToRgb(t,r,e){return{r:bound01(t,255)*255,g:bound01(r,255)*255,b:bound01(e,255)*255}}function rgbToHsl(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),g=Math.min(t,r,e),y=0,i=0,k=(n+g)/2;if(n===g)i=0,y=0;else{var $=n-g;switch(i=k>.5?$/(2-n-g):$/(n+g),n){case t:y=(r-e)/$+(r<e?6:0);break;case r:y=(e-t)/$+2;break;case e:y=(t-r)/$+4;break}y/=6}return{h:y,s:i,l:k}}function hue2rgb(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(r-t)*(6*e):e<1/2?r:e<2/3?t+(r-t)*(2/3-e)*6:t}function hslToRgb(t,r,e){var n,g,y;if(t=bound01(t,360),r=bound01(r,100),e=bound01(e,100),r===0)g=e,y=e,n=e;else{var i=e<.5?e*(1+r):e+r-e*r,k=2*e-i;n=hue2rgb(k,i,t+1/3),g=hue2rgb(k,i,t),y=hue2rgb(k,i,t-1/3)}return{r:n*255,g:g*255,b:y*255}}function rgbToHsv(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),g=Math.min(t,r,e),y=0,i=n,k=n-g,$=n===0?0:k/n;if(n===g)y=0;else{switch(n){case t:y=(r-e)/k+(r<e?6:0);break;case r:y=(e-t)/k+2;break;case e:y=(t-r)/k+4;break}y/=6}return{h:y,s:$,v:i}}function hsvToRgb(t,r,e){t=bound01(t,360)*6,r=bound01(r,100),e=bound01(e,100);var n=Math.floor(t),g=t-n,y=e*(1-r),i=e*(1-g*r),k=e*(1-(1-g)*r),$=n%6,L=[e,i,y,y,k,e][$],V=[k,e,e,i,y,y][$],z=[y,y,k,e,e,i][$];return{r:L*255,g:V*255,b:z*255}}function rgbToHex(t,r,e,n){var g=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16))];return n&&g[0].startsWith(g[0].charAt(1))&&g[1].startsWith(g[1].charAt(1))&&g[2].startsWith(g[2].charAt(1))?g[0].charAt(0)+g[1].charAt(0)+g[2].charAt(0):g.join("")}function rgbaToHex(t,r,e,n,g){var y=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16)),pad2(convertDecimalToHex(n))];return g&&y[0].startsWith(y[0].charAt(1))&&y[1].startsWith(y[1].charAt(1))&&y[2].startsWith(y[2].charAt(1))&&y[3].startsWith(y[3].charAt(1))?y[0].charAt(0)+y[1].charAt(0)+y[2].charAt(0)+y[3].charAt(0):y.join("")}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}function parseIntFromHex(t){return parseInt(t,16)}function numberInputToObject(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(t){var r={r:0,g:0,b:0},e=1,n=null,g=null,y=null,i=!1,k=!1;return typeof t=="string"&&(t=stringInputToObject(t)),typeof t=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(r=rgbToRgb(t.r,t.g,t.b),i=!0,k=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(n=convertToPercentage(t.s),g=convertToPercentage(t.v),r=hsvToRgb(t.h,n,g),i=!0,k="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(n=convertToPercentage(t.s),y=convertToPercentage(t.l),r=hslToRgb(t.h,n,y),i=!0,k="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(e=t.a)),e=boundAlpha(e),{ok:i,format:t.format||k,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:e}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if(names[t])t=names[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=matchers.rgb.exec(t);return e?{r:e[1],g:e[2],b:e[3]}:(e=matchers.rgba.exec(t),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=matchers.hsl.exec(t),e?{h:e[1],s:e[2],l:e[3]}:(e=matchers.hsla.exec(t),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=matchers.hsv.exec(t),e?{h:e[1],s:e[2],v:e[3]}:(e=matchers.hsva.exec(t),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=matchers.hex8.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),a:convertHexToDecimal(e[4]),format:r?"name":"hex8"}:(e=matchers.hex6.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),format:r?"name":"hex"}:(e=matchers.hex4.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),a:convertHexToDecimal(e[4]+e[4]),format:r?"name":"hex8"}:(e=matchers.hex3.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),format:r?"name":"hex"}:!1)))))))))}function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(String(t))}var TinyColor=function(){function t(r,e){r===void 0&&(r=""),e===void 0&&(e={});var n;if(r instanceof t)return r;typeof r=="number"&&(r=numberInputToObject(r)),this.originalInput=r;var g=inputToRGB(r);this.originalInput=r,this.r=g.r,this.g=g.g,this.b=g.b,this.a=g.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:g.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=g.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),e,n,g,y=r.r/255,i=r.g/255,k=r.b/255;return y<=.03928?e=y/12.92:e=Math.pow((y+.055)/1.055,2.4),i<=.03928?n=i/12.92:n=Math.pow((i+.055)/1.055,2.4),k<=.03928?g=k/12.92:g=Math.pow((k+.055)/1.055,2.4),.2126*e+.7152*n+.0722*g},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=boundAlpha(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=rgbToHsv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=rgbToHsv(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),g=Math.round(r.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(g,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=rgbToHsl(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=rgbToHsl(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),g=Math.round(r.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(g,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),rgbToHex(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),rgbaToHex(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(e,", ").concat(n,")"):"rgba(".concat(r,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(e){return"".concat(Math.round(bound01(e,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(e){return Math.round(bound01(e,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+rgbToHex(this.r,this.g,this.b,!1),e=0,n=Object.entries(names);e<n.length;e++){var g=n[e],y=g[0],i=g[1];if(r===i)return y}return!1},t.prototype.toString=function(r){var e=!!r;r=r??this.format;var n=!1,g=this.a<1&&this.a>=0,y=!e&&g&&(r.startsWith("hex")||r==="name");return y?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l+=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.brighten=function(r){r===void 0&&(r=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(r/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(r/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(r/100)))),new t(e)},t.prototype.darken=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l-=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s-=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.saturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s+=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var e=this.toHsl(),n=(e.h+r)%360;return e.h=n<0?360+n:n,new t(e)},t.prototype.mix=function(r,e){e===void 0&&(e=50);var n=this.toRgb(),g=new t(r).toRgb(),y=e/100,i={r:(g.r-n.r)*y+n.r,g:(g.g-n.g)*y+n.g,b:(g.b-n.b)*y+n.b,a:(g.a-n.a)*y+n.a};return new t(i)},t.prototype.analogous=function(r,e){r===void 0&&(r=6),e===void 0&&(e=30);var n=this.toHsl(),g=360/e,y=[this];for(n.h=(n.h-(g*r>>1)+720)%360;--r;)n.h=(n.h+g)%360,y.push(new t(n));return y},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var e=this.toHsv(),n=e.h,g=e.s,y=e.v,i=[],k=1/r;r--;)i.push(new t({h:n,s:g,v:y})),y=(y+k)%1;return i},t.prototype.splitcomplement=function(){var r=this.toHsl(),e=r.h;return[this,new t({h:(e+72)%360,s:r.s,l:r.l}),new t({h:(e+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var e=this.toRgb(),n=new t(r).toRgb(),g=e.a+n.a*(1-e.a);return new t({r:(e.r*e.a+n.r*n.a*(1-e.a))/g,g:(e.g*e.a+n.g*n.a*(1-e.a))/g,b:(e.b*e.a+n.b*n.a*(1-e.a))/g,a:g})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var e=this.toHsl(),n=e.h,g=[this],y=360/r,i=1;i<r;i++)g.push(new t({h:(n+i*y)%360,s:e.s,l:e.l}));return g},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}();function darken(t,r=20){return t.mix("#141414",r).toString()}function useButtonCustomStyle(t){const r=useFormDisabled(),e=useNamespace("button");return computed(()=>{let n={};const g=t.color;if(g){const y=new TinyColor(g),i=t.dark?y.tint(20).toString():darken(y,20);if(t.plain)n=e.cssVarBlock({"bg-color":t.dark?darken(y,90):y.tint(90).toString(),"text-color":g,"border-color":t.dark?darken(y,50):y.tint(50).toString(),"hover-text-color":`var(${e.cssVarName("color-white")})`,"hover-bg-color":g,"hover-border-color":g,"active-bg-color":i,"active-text-color":`var(${e.cssVarName("color-white")})`,"active-border-color":i}),r.value&&(n[e.cssVarBlockName("disabled-bg-color")]=t.dark?darken(y,90):y.tint(90).toString(),n[e.cssVarBlockName("disabled-text-color")]=t.dark?darken(y,50):y.tint(50).toString(),n[e.cssVarBlockName("disabled-border-color")]=t.dark?darken(y,80):y.tint(80).toString());else{const k=t.dark?darken(y,30):y.tint(30).toString(),$=y.isDark()?`var(${e.cssVarName("color-white")})`:`var(${e.cssVarName("color-black")})`;if(n=e.cssVarBlock({"bg-color":g,"text-color":$,"border-color":g,"hover-bg-color":k,"hover-text-color":$,"hover-border-color":k,"active-bg-color":i,"active-border-color":i}),r.value){const L=t.dark?darken(y,50):y.tint(50).toString();n[e.cssVarBlockName("disabled-bg-color")]=L,n[e.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${e.cssVarName("color-white")})`,n[e.cssVarBlockName("disabled-border-color")]=L}}}return n})}const __default__$B=defineComponent({name:"ElButton"}),_sfc_main$11=defineComponent({...__default__$B,props:buttonProps,emits:buttonEmits,setup(t,{expose:r,emit:e}){const n=t,g=useButtonCustomStyle(n),y=useNamespace("button"),{_ref:i,_size:k,_type:$,_disabled:L,_props:V,shouldAddSpace:z,handleClick:re}=useButton(n,e);return r({ref:i,size:k,type:$,disabled:L,shouldAddSpace:z}),(ie,ue)=>(openBlock(),createBlock(resolveDynamicComponent(ie.tag),mergeProps({ref_key:"_ref",ref:i},unref(V),{class:[unref(y).b(),unref(y).m(unref($)),unref(y).m(unref(k)),unref(y).is("disabled",unref(L)),unref(y).is("loading",ie.loading),unref(y).is("plain",ie.plain),unref(y).is("round",ie.round),unref(y).is("circle",ie.circle),unref(y).is("text",ie.text),unref(y).is("link",ie.link),unref(y).is("has-bg",ie.bg)],style:unref(g),onClick:unref(re)}),{default:withCtx(()=>[ie.loading?(openBlock(),createElementBlock(Fragment,{key:0},[ie.$slots.loading?renderSlot(ie.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(y).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ie.loadingIcon)))]),_:1},8,["class"]))],64)):ie.icon||ie.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[ie.icon?(openBlock(),createBlock(resolveDynamicComponent(ie.icon),{key:0})):renderSlot(ie.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),ie.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(y).em("text","expand")]:unref(z)})},[renderSlot(ie.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc$1(_sfc_main$11,[["__file","button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$A=defineComponent({name:"ElButtonGroup"}),_sfc_main$10=defineComponent({...__default__$A,props:buttonGroupProps,setup(t){const r=t;provide(buttonGroupContextKey,reactive({size:toRef(r,"size"),type:toRef(r,"type")}));const e=useNamespace("button");return(n,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(e).b("group")}`)},[renderSlot(n.$slots,"default")],2))}});var ButtonGroup=_export_sfc$1(_sfc_main$10,[["__file","button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup});withNoopInstall(ButtonGroup);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dayjs_min={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=1e3,n=6e4,g=36e5,y="millisecond",i="second",k="minute",$="hour",L="day",V="week",z="month",re="quarter",ie="year",ue="date",le="Invalid Date",oe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ae=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ue={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(sr){var er=["th","st","nd","rd"],cr=sr%100;return"["+sr+(er[(cr-20)%10]||er[cr]||er[0])+"]"}},de=function(sr,er,cr){var or=String(sr);return!or||or.length>=er?sr:""+Array(er+1-or.length).join(cr)+sr},_e={s:de,z:function(sr){var er=-sr.utcOffset(),cr=Math.abs(er),or=Math.floor(cr/60),hr=cr%60;return(er<=0?"+":"-")+de(or,2,"0")+":"+de(hr,2,"0")},m:function sr(er,cr){if(er.date()<cr.date())return-sr(cr,er);var or=12*(cr.year()-er.year())+(cr.month()-er.month()),hr=er.clone().add(or,z),pr=cr-hr<0,Tr=er.clone().add(or+(pr?-1:1),z);return+(-(or+(cr-hr)/(pr?hr-Tr:Tr-hr))||0)},a:function(sr){return sr<0?Math.ceil(sr)||0:Math.floor(sr)},p:function(sr){return{M:z,y:ie,w:V,d:L,D:ue,h:$,m:k,s:i,ms:y,Q:re}[sr]||String(sr||"").toLowerCase().replace(/s$/,"")},u:function(sr){return sr===void 0}},Ve="en",$e={};$e[Ve]=Ue;var Lt="$isDayjsObject",jt=function(sr){return sr instanceof Dt||!(!sr||!sr[Lt])},Et=function sr(er,cr,or){var hr;if(!er)return Ve;if(typeof er=="string"){var pr=er.toLowerCase();$e[pr]&&(hr=pr),cr&&($e[pr]=cr,hr=pr);var Tr=er.split("-");if(!hr&&Tr.length>1)return sr(Tr[0])}else{var Pr=er.name;$e[Pr]=er,hr=Pr}return!or&&hr&&(Ve=hr),hr||!or&&Ve},ir=function(sr,er){if(jt(sr))return sr.clone();var cr=typeof er=="object"?er:{};return cr.date=sr,cr.args=arguments,new Dt(cr)},ur=_e;ur.l=Et,ur.i=jt,ur.w=function(sr,er){return ir(sr,{locale:er.$L,utc:er.$u,x:er.$x,$offset:er.$offset})};var Dt=function(){function sr(cr){this.$L=Et(cr.locale,null,!0),this.parse(cr),this.$x=this.$x||cr.x||{},this[Lt]=!0}var er=sr.prototype;return er.parse=function(cr){this.$d=function(or){var hr=or.date,pr=or.utc;if(hr===null)return new Date(NaN);if(ur.u(hr))return new Date;if(hr instanceof Date)return new Date(hr);if(typeof hr=="string"&&!/Z$/i.test(hr)){var Tr=hr.match(oe);if(Tr){var Pr=Tr[2]-1||0,_r=(Tr[7]||"0").substring(0,3);return pr?new Date(Date.UTC(Tr[1],Pr,Tr[3]||1,Tr[4]||0,Tr[5]||0,Tr[6]||0,_r)):new Date(Tr[1],Pr,Tr[3]||1,Tr[4]||0,Tr[5]||0,Tr[6]||0,_r)}}return new Date(hr)}(cr),this.init()},er.init=function(){var cr=this.$d;this.$y=cr.getFullYear(),this.$M=cr.getMonth(),this.$D=cr.getDate(),this.$W=cr.getDay(),this.$H=cr.getHours(),this.$m=cr.getMinutes(),this.$s=cr.getSeconds(),this.$ms=cr.getMilliseconds()},er.$utils=function(){return ur},er.isValid=function(){return this.$d.toString()!==le},er.isSame=function(cr,or){var hr=ir(cr);return this.startOf(or)<=hr&&hr<=this.endOf(or)},er.isAfter=function(cr,or){return ir(cr)<this.startOf(or)},er.isBefore=function(cr,or){return this.endOf(or)<ir(cr)},er.$g=function(cr,or,hr){return ur.u(cr)?this[or]:this.set(hr,cr)},er.unix=function(){return Math.floor(this.valueOf()/1e3)},er.valueOf=function(){return this.$d.getTime()},er.startOf=function(cr,or){var hr=this,pr=!!ur.u(or)||or,Tr=ur.p(cr),Pr=function(Ir,Or){var Cr=ur.w(hr.$u?Date.UTC(hr.$y,Or,Ir):new Date(hr.$y,Or,Ir),hr);return pr?Cr:Cr.endOf(L)},_r=function(Ir,Or){return ur.w(hr.toDate()[Ir].apply(hr.toDate("s"),(pr?[0,0,0,0]:[23,59,59,999]).slice(Or)),hr)},Mr=this.$W,rr=this.$M,kr=this.$D,Er="set"+(this.$u?"UTC":"");switch(Tr){case ie:return pr?Pr(1,0):Pr(31,11);case z:return pr?Pr(1,rr):Pr(0,rr+1);case V:var xr=this.$locale().weekStart||0,vr=(Mr<xr?Mr+7:Mr)-xr;return Pr(pr?kr-vr:kr+(6-vr),rr);case L:case ue:return _r(Er+"Hours",0);case $:return _r(Er+"Minutes",1);case k:return _r(Er+"Seconds",2);case i:return _r(Er+"Milliseconds",3);default:return this.clone()}},er.endOf=function(cr){return this.startOf(cr,!1)},er.$set=function(cr,or){var hr,pr=ur.p(cr),Tr="set"+(this.$u?"UTC":""),Pr=(hr={},hr[L]=Tr+"Date",hr[ue]=Tr+"Date",hr[z]=Tr+"Month",hr[ie]=Tr+"FullYear",hr[$]=Tr+"Hours",hr[k]=Tr+"Minutes",hr[i]=Tr+"Seconds",hr[y]=Tr+"Milliseconds",hr)[pr],_r=pr===L?this.$D+(or-this.$W):or;if(pr===z||pr===ie){var Mr=this.clone().set(ue,1);Mr.$d[Pr](_r),Mr.init(),this.$d=Mr.set(ue,Math.min(this.$D,Mr.daysInMonth())).$d}else Pr&&this.$d[Pr](_r);return this.init(),this},er.set=function(cr,or){return this.clone().$set(cr,or)},er.get=function(cr){return this[ur.p(cr)]()},er.add=function(cr,or){var hr,pr=this;cr=Number(cr);var Tr=ur.p(or),Pr=function(rr){var kr=ir(pr);return ur.w(kr.date(kr.date()+Math.round(rr*cr)),pr)};if(Tr===z)return this.set(z,this.$M+cr);if(Tr===ie)return this.set(ie,this.$y+cr);if(Tr===L)return Pr(1);if(Tr===V)return Pr(7);var _r=(hr={},hr[k]=n,hr[$]=g,hr[i]=e,hr)[Tr]||1,Mr=this.$d.getTime()+cr*_r;return ur.w(Mr,this)},er.subtract=function(cr,or){return this.add(-1*cr,or)},er.format=function(cr){var or=this,hr=this.$locale();if(!this.isValid())return hr.invalidDate||le;var pr=cr||"YYYY-MM-DDTHH:mm:ssZ",Tr=ur.z(this),Pr=this.$H,_r=this.$m,Mr=this.$M,rr=hr.weekdays,kr=hr.months,Er=hr.meridiem,xr=function(Or,Cr,yr,fr){return Or&&(Or[Cr]||Or(or,pr))||yr[Cr].slice(0,fr)},vr=function(Or){return ur.s(Pr%12||12,Or,"0")},Ir=Er||function(Or,Cr,yr){var fr=Or<12?"AM":"PM";return yr?fr.toLowerCase():fr};return pr.replace(ae,function(Or,Cr){return Cr||function(yr){switch(yr){case"YY":return String(or.$y).slice(-2);case"YYYY":return ur.s(or.$y,4,"0");case"M":return Mr+1;case"MM":return ur.s(Mr+1,2,"0");case"MMM":return xr(hr.monthsShort,Mr,kr,3);case"MMMM":return xr(kr,Mr);case"D":return or.$D;case"DD":return ur.s(or.$D,2,"0");case"d":return String(or.$W);case"dd":return xr(hr.weekdaysMin,or.$W,rr,2);case"ddd":return xr(hr.weekdaysShort,or.$W,rr,3);case"dddd":return rr[or.$W];case"H":return String(Pr);case"HH":return ur.s(Pr,2,"0");case"h":return vr(1);case"hh":return vr(2);case"a":return Ir(Pr,_r,!0);case"A":return Ir(Pr,_r,!1);case"m":return String(_r);case"mm":return ur.s(_r,2,"0");case"s":return String(or.$s);case"ss":return ur.s(or.$s,2,"0");case"SSS":return ur.s(or.$ms,3,"0");case"Z":return Tr}return null}(Or)||Tr.replace(":","")})},er.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},er.diff=function(cr,or,hr){var pr,Tr=this,Pr=ur.p(or),_r=ir(cr),Mr=(_r.utcOffset()-this.utcOffset())*n,rr=this-_r,kr=function(){return ur.m(Tr,_r)};switch(Pr){case ie:pr=kr()/12;break;case z:pr=kr();break;case re:pr=kr()/3;break;case V:pr=(rr-Mr)/6048e5;break;case L:pr=(rr-Mr)/864e5;break;case $:pr=rr/g;break;case k:pr=rr/n;break;case i:pr=rr/e;break;default:pr=rr}return hr?pr:ur.a(pr)},er.daysInMonth=function(){return this.endOf(z).$D},er.$locale=function(){return $e[this.$L]},er.locale=function(cr,or){if(!cr)return this.$L;var hr=this.clone(),pr=Et(cr,or,!0);return pr&&(hr.$L=pr),hr},er.clone=function(){return ur.w(this.$d,this)},er.toDate=function(){return new Date(this.valueOf())},er.toJSON=function(){return this.isValid()?this.toISOString():null},er.toISOString=function(){return this.$d.toISOString()},er.toString=function(){return this.$d.toUTCString()},sr}(),lr=Dt.prototype;return ir.prototype=lr,[["$ms",y],["$s",i],["$m",k],["$H",$],["$W",L],["$M",z],["$y",ie],["$D",ue]].forEach(function(sr){lr[sr[1]]=function(er){return this.$g(er,sr[0],sr[1])}}),ir.extend=function(sr,er){return sr.$i||(sr(er,Dt,ir),sr.$i=!0),ir},ir.locale=Et,ir.isDayjs=jt,ir.unix=function(sr){return ir(1e3*sr)},ir.en=$e[Ve],ir.Ls=$e,ir.p={},ir})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",t=>startClick=t),document.addEventListener("mouseup",t=>{for(const r of nodeList.values())for(const{documentHandler:e}of r)e(t,startClick)}));function createDocumentHandler(t,r){let e=[];return Array.isArray(r.arg)?e=r.arg:isElement(r.arg)&&e.push(r.arg),function(n,g){const y=r.instance.popperRef,i=n.target,k=g==null?void 0:g.target,$=!r||!r.instance,L=!i||!k,V=t.contains(i)||t.contains(k),z=t===i,re=e.length&&e.some(ue=>ue==null?void 0:ue.contains(i))||e.length&&e.includes(k),ie=y&&(y.contains(i)||y.contains(k));$||L||V||z||re||ie||r.value(n,g)}}const ClickOutside={beforeMount(t,r){nodeList.has(t)||nodeList.set(t,[]),nodeList.get(t).push({documentHandler:createDocumentHandler(t,r),bindingFn:r.value})},updated(t,r){nodeList.has(t)||nodeList.set(t,[]);const e=nodeList.get(t),n=e.findIndex(y=>y.bindingFn===r.oldValue),g={documentHandler:createDocumentHandler(t,r),bindingFn:r.value};n>=0?e.splice(n,1,g):e.push(g)},unmounted(t){nodeList.delete(t)}},REPEAT_INTERVAL=100,REPEAT_DELAY=600,vRepeatClick={beforeMount(t,r){const e=r.value,{interval:n=REPEAT_INTERVAL,delay:g=REPEAT_DELAY}=isFunction$3(e)?{}:e;let y,i;const k=()=>isFunction$3(e)?e():e.handler(),$=()=>{i&&(clearTimeout(i),i=void 0),y&&(clearInterval(y),y=void 0)};t.addEventListener("mousedown",L=>{L.button===0&&($(),k(),document.addEventListener("mouseup",()=>$(),{once:!0}),i=setTimeout(()=>{y=setInterval(()=>{k()},n)},g))})}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=t=>{if(FOCUS_STACK.length===0)return;const r=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(r.length>0&&t.code===EVENT_CODE.tab){if(r.length===1){t.preventDefault(),document.activeElement!==r[0]&&r[0].focus();return}const e=t.shiftKey,n=t.target===r[0],g=t.target===r[r.length-1];n&&e&&(t.preventDefault(),r[r.length-1].focus()),g&&!e&&(t.preventDefault(),r[0].focus())}},TrapFocus={beforeMount(t){t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t),FOCUS_STACK.push(t),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(t){nextTick(()=>{t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}};var v=!1,o,f,s,u,d,N,l$1,p,m,w,D,x,E,M,F;function a(){if(!v){v=!0;var t=navigator.userAgent,r=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),e=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(x=/\b(iPhone|iP[ao]d)/.exec(t),E=/\b(iP[ao]d)/.exec(t),w=/Android/i.exec(t),M=/FBAN\/\w+;/i.exec(t),F=/Mobile/i.exec(t),D=!!/Win64/.exec(t),r){o=r[1]?parseFloat(r[1]):r[5]?parseFloat(r[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);N=n?parseFloat(n[1])+4:o,f=r[2]?parseFloat(r[2]):NaN,s=r[3]?parseFloat(r[3]):NaN,u=r[4]?parseFloat(r[4]):NaN,u?(r=/(?:Chrome\/(\d+\.\d+))/.exec(t),d=r&&r[1]?parseFloat(r[1]):NaN):d=NaN}else o=f=s=d=u=NaN;if(e){if(e[1]){var g=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);l$1=g?parseFloat(g[1].replace("_",".")):!0}else l$1=!1;p=!!e[2],m=!!e[3]}else l$1=p=m=!1}}var _={ie:function(){return a()||o},ieCompatibilityMode:function(){return a()||N>o},ie64:function(){return _.ie()&&D},firefox:function(){return a()||f},opera:function(){return a()||s},webkit:function(){return a()||u},safari:function(){return _.webkit()},chrome:function(){return a()||d},windows:function(){return a()||p},osx:function(){return a()||l$1},linux:function(){return a()||m},iphone:function(){return a()||x},mobile:function(){return a()||x||E||w||F},nativeApp:function(){return a()||M},android:function(){return a()||w},ipad:function(){return a()||E}},A=_,c=!!(typeof window<"u"&&window.document&&window.document.createElement),U={canUseDOM:c,canUseWorkers:typeof Worker<"u",canUseEventListeners:c&&!!(window.addEventListener||window.attachEvent),canUseViewport:c&&!!window.screen,isInWorker:!c},h=U,X;h.canUseDOM&&(X=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function S(t,r){if(!h.canUseDOM||r&&!("addEventListener"in document))return!1;var e="on"+t,n=e in document;if(!n){var g=document.createElement("div");g.setAttribute(e,"return;"),n=typeof g[e]=="function"}return!n&&X&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var b=S,O=10,I=40,P=800;function T(t){var r=0,e=0,n=0,g=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/120),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(r=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(r=e,e=0),n=r*O,g=e*O,"deltaY"in t&&(g=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||g)&&t.deltaMode&&(t.deltaMode==1?(n*=I,g*=I):(n*=P,g*=P)),n&&!r&&(r=n<1?-1:1),g&&!e&&(e=g<1?-1:1),{spinX:r,spinY:e,pixelX:n,pixelY:g}}T.getEventType=function(){return A.firefox()?"DOMMouseScroll":b("wheel")?"wheel":"mousewheel"};var Y=T;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mousewheel=function(t,r){if(t&&t.addEventListener){const e=function(n){const g=Y(n);r&&Reflect.apply(r,this,[n,g])};t.addEventListener("wheel",e,{passive:!0})}},Mousewheel={beforeMount(t,r){mousewheel(t,r.value)}},cardProps=buildProps({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:definePropType([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),__default__$z=defineComponent({name:"ElCard"}),_sfc_main$$=defineComponent({...__default__$z,props:cardProps,setup(t){const r=useNamespace("card");return(e,n)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(r).b(),unref(r).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("header"))},[renderSlot(e.$slots,"header",{},()=>[createTextVNode(toDisplayString(e.header),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([unref(r).e("body"),e.bodyClass]),style:normalizeStyle(e.bodyStyle)},[renderSlot(e.$slots,"default")],6),e.$slots.footer||e.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("footer"))},[renderSlot(e.$slots,"footer",{},()=>[createTextVNode(toDisplayString(e.footer),1)])],2)):createCommentVNode("v-if",!0)],2))}});var Card=_export_sfc$1(_sfc_main$$,[["__file","card.vue"]]);const ElCard=withInstall(Card),checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),change:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:t,isChecked:r})=>{const e=inject(checkboxGroupContextKey,void 0),n=computed(()=>{var y,i;const k=(y=e==null?void 0:e.max)==null?void 0:y.value,$=(i=e==null?void 0:e.min)==null?void 0:i.value;return!isUndefined$1(k)&&t.value.length>=k&&!r.value||!isUndefined$1($)&&t.value.length<=$&&r.value});return{isDisabled:useFormDisabled(computed(()=>(e==null?void 0:e.disabled.value)||n.value)),isLimitDisabled:n}},useCheckboxEvent=(t,{model:r,isLimitExceeded:e,hasOwnLabel:n,isDisabled:g,isLabeledByFormItem:y})=>{const i=inject(checkboxGroupContextKey,void 0),{formItem:k}=useFormItem(),{emit:$}=getCurrentInstance();function L(ue){var le,oe;return ue===t.trueLabel||ue===!0?(le=t.trueLabel)!=null?le:!0:(oe=t.falseLabel)!=null?oe:!1}function V(ue,le){$("change",L(ue),le)}function z(ue){if(e.value)return;const le=ue.target;$("change",L(le.checked),ue)}async function re(ue){e.value||!n.value&&!g.value&&y.value&&(ue.composedPath().some(ae=>ae.tagName==="LABEL")||(r.value=L([!1,t.falseLabel].includes(r.value)),await nextTick(),V(r.value,ue)))}const ie=computed(()=>(i==null?void 0:i.validateEvent)||t.validateEvent);return watch(()=>t.modelValue,()=>{ie.value&&(k==null||k.validate("change").catch(ue=>void 0))}),{handleChange:z,onClickRoot:re}},useCheckboxModel=t=>{const r=ref(!1),{emit:e}=getCurrentInstance(),n=inject(checkboxGroupContextKey,void 0),g=computed(()=>isUndefined$1(n)===!1),y=ref(!1),i=computed({get(){var k,$;return g.value?(k=n==null?void 0:n.modelValue)==null?void 0:k.value:($=t.modelValue)!=null?$:r.value},set(k){var $,L;g.value&&isArray$3(k)?(y.value=(($=n==null?void 0:n.max)==null?void 0:$.value)!==void 0&&k.length>(n==null?void 0:n.max.value)&&k.length>i.value.length,y.value===!1&&((L=n==null?void 0:n.changeEvent)==null||L.call(n,k))):(e(UPDATE_MODEL_EVENT,k),r.value=k)}});return{model:i,isGroup:g,isLimitExceeded:y}},useCheckboxStatus=(t,r,{model:e})=>{const n=inject(checkboxGroupContextKey,void 0),g=ref(!1),y=computed(()=>{const L=e.value;return isBoolean$1(L)?L:isArray$3(L)?isObject$2(t.label)?L.map(toRaw).some(V=>isEqual(V,t.label)):L.map(toRaw).includes(t.label):L!=null?L===t.trueLabel:!!L}),i=useFormSize(computed(()=>{var L;return(L=n==null?void 0:n.size)==null?void 0:L.value}),{prop:!0}),k=useFormSize(computed(()=>{var L;return(L=n==null?void 0:n.size)==null?void 0:L.value})),$=computed(()=>!!r.default||!isNil(t.label));return{checkboxButtonSize:i,isChecked:y,isFocused:g,checkboxSize:k,hasOwnLabel:$}},setStoreValue=(t,{model:r})=>{function e(){isArray$3(r.value)&&!r.value.includes(t.label)?r.value.push(t.label):r.value=t.trueLabel||!0}t.checked&&e()},useCheckbox=(t,r)=>{const{formItem:e}=useFormItem(),{model:n,isGroup:g,isLimitExceeded:y}=useCheckboxModel(t),{isFocused:i,isChecked:k,checkboxButtonSize:$,checkboxSize:L,hasOwnLabel:V}=useCheckboxStatus(t,r,{model:n}),{isDisabled:z}=useCheckboxDisabled({model:n,isChecked:k}),{inputId:re,isLabeledByFormItem:ie}=useFormItemInputId(t,{formItemContext:e,disableIdGeneration:V,disableIdManagement:g}),{handleChange:ue,onClickRoot:le}=useCheckboxEvent(t,{model:n,isLimitExceeded:y,hasOwnLabel:V,isDisabled:z,isLabeledByFormItem:ie});return setStoreValue(t,{model:n}),{inputId:re,isLabeledByFormItem:ie,isChecked:k,isDisabled:z,isFocused:i,checkboxButtonSize:$,checkboxSize:L,hasOwnLabel:V,model:n,handleChange:ue,onClickRoot:le}},_hoisted_1$B=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],_hoisted_2$n=["id","indeterminate","disabled","value","name","tabindex"],__default__$y=defineComponent({name:"ElCheckbox"}),_sfc_main$_=defineComponent({...__default__$y,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{inputId:n,isLabeledByFormItem:g,isChecked:y,isDisabled:i,isFocused:k,checkboxSize:$,hasOwnLabel:L,model:V,handleChange:z,onClickRoot:re}=useCheckbox(r,e),ie=useNamespace("checkbox"),ue=computed(()=>[ie.b(),ie.m($.value),ie.is("disabled",i.value),ie.is("bordered",r.border),ie.is("checked",y.value)]),le=computed(()=>[ie.e("input"),ie.is("disabled",i.value),ie.is("checked",y.value),ie.is("indeterminate",r.indeterminate),ie.is("focus",k.value)]);return(oe,ae)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(L)&&unref(g)?"span":"label"),{class:normalizeClass(unref(ue)),"aria-controls":oe.indeterminate?oe.controls:null,onClick:unref(re)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(le))},[oe.trueLabel||oe.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(n),"onUpdate:modelValue":ae[0]||(ae[0]=Ue=>isRef(V)?V.value=Ue:null),class:normalizeClass(unref(ie).e("original")),type:"checkbox",indeterminate:oe.indeterminate,name:oe.name,tabindex:oe.tabindex,disabled:unref(i),"true-value":oe.trueLabel,"false-value":oe.falseLabel,onChange:ae[1]||(ae[1]=(...Ue)=>unref(z)&&unref(z)(...Ue)),onFocus:ae[2]||(ae[2]=Ue=>k.value=!0),onBlur:ae[3]||(ae[3]=Ue=>k.value=!1),onClick:ae[4]||(ae[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$B)),[[vModelCheckbox,unref(V)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(n),"onUpdate:modelValue":ae[5]||(ae[5]=Ue=>isRef(V)?V.value=Ue:null),class:normalizeClass(unref(ie).e("original")),type:"checkbox",indeterminate:oe.indeterminate,disabled:unref(i),value:oe.label,name:oe.name,tabindex:oe.tabindex,onChange:ae[6]||(ae[6]=(...Ue)=>unref(z)&&unref(z)(...Ue)),onFocus:ae[7]||(ae[7]=Ue=>k.value=!0),onBlur:ae[8]||(ae[8]=Ue=>k.value=!1),onClick:ae[9]||(ae[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$n)),[[vModelCheckbox,unref(V)]]),createBaseVNode("span",{class:normalizeClass(unref(ie).e("inner"))},null,2)],2),unref(L)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(ie).e("label"))},[renderSlot(oe.$slots,"default"),oe.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(oe.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc$1(_sfc_main$_,[["__file","checkbox.vue"]]);const _hoisted_1$A=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$m=["name","tabindex","disabled","value"],__default__$x=defineComponent({name:"ElCheckboxButton"}),_sfc_main$Z=defineComponent({...__default__$x,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{isFocused:n,isChecked:g,isDisabled:y,checkboxButtonSize:i,model:k,handleChange:$}=useCheckbox(r,e),L=inject(checkboxGroupContextKey,void 0),V=useNamespace("checkbox"),z=computed(()=>{var ie,ue,le,oe;const ae=(ue=(ie=L==null?void 0:L.fill)==null?void 0:ie.value)!=null?ue:"";return{backgroundColor:ae,borderColor:ae,color:(oe=(le=L==null?void 0:L.textColor)==null?void 0:le.value)!=null?oe:"",boxShadow:ae?`-1px 0 0 0 ${ae}`:void 0}}),re=computed(()=>[V.b("button"),V.bm("button",i.value),V.is("disabled",y.value),V.is("checked",g.value),V.is("focus",n.value)]);return(ie,ue)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(re))},[ie.trueLabel||ie.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":ue[0]||(ue[0]=le=>isRef(k)?k.value=le:null),class:normalizeClass(unref(V).be("button","original")),type:"checkbox",name:ie.name,tabindex:ie.tabindex,disabled:unref(y),"true-value":ie.trueLabel,"false-value":ie.falseLabel,onChange:ue[1]||(ue[1]=(...le)=>unref($)&&unref($)(...le)),onFocus:ue[2]||(ue[2]=le=>n.value=!0),onBlur:ue[3]||(ue[3]=le=>n.value=!1),onClick:ue[4]||(ue[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$A)),[[vModelCheckbox,unref(k)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":ue[5]||(ue[5]=le=>isRef(k)?k.value=le:null),class:normalizeClass(unref(V).be("button","original")),type:"checkbox",name:ie.name,tabindex:ie.tabindex,disabled:unref(y),value:ie.label,onChange:ue[6]||(ue[6]=(...le)=>unref($)&&unref($)(...le)),onFocus:ue[7]||(ue[7]=le=>n.value=!0),onBlur:ue[8]||(ue[8]=le=>n.value=!1),onClick:ue[9]||(ue[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$m)),[[vModelCheckbox,unref(k)]]),ie.$slots.default||ie.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(V).be("button","inner")),style:normalizeStyle(unref(g)?unref(z):void 0)},[renderSlot(ie.$slots,"default",{},()=>[createTextVNode(toDisplayString(ie.label),1)])],6)):createCommentVNode("v-if",!0)],2))}});var CheckboxButton=_export_sfc$1(_sfc_main$Z,[["__file","checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:t=>isArray$3(t),change:t=>isArray$3(t)},__default__$w=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$Y=defineComponent({...__default__$w,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("checkbox"),{formItem:g}=useFormItem(),{inputId:y,isLabeledByFormItem:i}=useFormItemInputId(e,{formItemContext:g}),k=async L=>{r(UPDATE_MODEL_EVENT,L),await nextTick(),r("change",L)},$=computed({get(){return e.modelValue},set(L){k(L)}});return provide(checkboxGroupContextKey,{...pick$1(toRefs(e),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:$,changeEvent:k}),watch(()=>e.modelValue,()=>{e.validateEvent&&(g==null||g.validate("change").catch(L=>void 0))}),(L,V)=>{var z;return openBlock(),createBlock(resolveDynamicComponent(L.tag),{id:unref(y),class:normalizeClass(unref(n).b("group")),role:"group","aria-label":unref(i)?void 0:L.label||"checkbox-group","aria-labelledby":unref(i)?(z=unref(g))==null?void 0:z.labelId:void 0},{default:withCtx(()=>[renderSlot(L.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc$1(_sfc_main$Y,[["__file","checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup});withNoopInstall(CheckboxButton);const ElCheckboxGroup$1=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),radioProps=buildProps({...radioPropsBase,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),[CHANGE_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(t,r)=>{const e=ref(),n=inject(radioGroupKey,void 0),g=computed(()=>!!n),y=computed({get(){return g.value?n.modelValue:t.modelValue},set(V){g.value?n.changeEvent(V):r&&r(UPDATE_MODEL_EVENT,V),e.value.checked=t.modelValue===t.label}}),i=useFormSize(computed(()=>n==null?void 0:n.size)),k=useFormDisabled(computed(()=>n==null?void 0:n.disabled)),$=ref(!1),L=computed(()=>k.value||g.value&&y.value!==t.label?-1:0);return{radioRef:e,isGroup:g,radioGroup:n,focus:$,size:i,disabled:k,tabIndex:L,modelValue:y}},_hoisted_1$z=["value","name","disabled"],__default__$v=defineComponent({name:"ElRadio"}),_sfc_main$X=defineComponent({...__default__$v,props:radioProps,emits:radioEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),{radioRef:g,radioGroup:y,focus:i,size:k,disabled:$,modelValue:L}=useRadio(e,r);function V(){nextTick(()=>r("change",L.value))}return(z,re)=>{var ie;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(n).b(),unref(n).is("disabled",unref($)),unref(n).is("focus",unref(i)),unref(n).is("bordered",z.border),unref(n).is("checked",unref(L)===z.label),unref(n).m(unref(k))])},[createBaseVNode("span",{class:normalizeClass([unref(n).e("input"),unref(n).is("disabled",unref($)),unref(n).is("checked",unref(L)===z.label)])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:g,"onUpdate:modelValue":re[0]||(re[0]=ue=>isRef(L)?L.value=ue:null),class:normalizeClass(unref(n).e("original")),value:z.label,name:z.name||((ie=unref(y))==null?void 0:ie.name),disabled:unref($),type:"radio",onFocus:re[1]||(re[1]=ue=>i.value=!0),onBlur:re[2]||(re[2]=ue=>i.value=!1),onChange:V,onClick:re[3]||(re[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$z),[[vModelRadio,unref(L)]]),createBaseVNode("span",{class:normalizeClass(unref(n).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(n).e("label")),onKeydown:re[4]||(re[4]=withModifiers(()=>{},["stop"]))},[renderSlot(z.$slots,"default",{},()=>[createTextVNode(toDisplayString(z.label),1)])],34)],2)}}});var Radio=_export_sfc$1(_sfc_main$X,[["__file","radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase,name:{type:String,default:""}}),_hoisted_1$y=["value","name","disabled"],__default__$u=defineComponent({name:"ElRadioButton"}),_sfc_main$W=defineComponent({...__default__$u,props:radioButtonProps,setup(t){const r=t,e=useNamespace("radio"),{radioRef:n,focus:g,size:y,disabled:i,modelValue:k,radioGroup:$}=useRadio(r),L=computed(()=>({backgroundColor:($==null?void 0:$.fill)||"",borderColor:($==null?void 0:$.fill)||"",boxShadow:$!=null&&$.fill?`-1px 0 0 0 ${$.fill}`:"",color:($==null?void 0:$.textColor)||""}));return(V,z)=>{var re;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(e).b("button"),unref(e).is("active",unref(k)===V.label),unref(e).is("disabled",unref(i)),unref(e).is("focus",unref(g)),unref(e).bm("button",unref(y))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":z[0]||(z[0]=ie=>isRef(k)?k.value=ie:null),class:normalizeClass(unref(e).be("button","original-radio")),value:V.label,type:"radio",name:V.name||((re=unref($))==null?void 0:re.name),disabled:unref(i),onFocus:z[1]||(z[1]=ie=>g.value=!0),onBlur:z[2]||(z[2]=ie=>g.value=!1),onClick:z[3]||(z[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$y),[[vModelRadio,unref(k)]]),createBaseVNode("span",{class:normalizeClass(unref(e).be("button","inner")),style:normalizeStyle(unref(k)===V.label?unref(L):{}),onKeydown:z[4]||(z[4]=withModifiers(()=>{},["stop"]))},[renderSlot(V.$slots,"default",{},()=>[createTextVNode(toDisplayString(V.label),1)])],38)],2)}}});var RadioButton=_export_sfc$1(_sfc_main$W,[["__file","radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),radioGroupEmits=radioEmits,_hoisted_1$x=["id","aria-label","aria-labelledby"],__default__$t=defineComponent({name:"ElRadioGroup"}),_sfc_main$V=defineComponent({...__default__$t,props:radioGroupProps,emits:radioGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),g=useId(),y=ref(),{formItem:i}=useFormItem(),{inputId:k,isLabeledByFormItem:$}=useFormItemInputId(e,{formItemContext:i}),L=z=>{r(UPDATE_MODEL_EVENT,z),nextTick(()=>r("change",z))};onMounted(()=>{const z=y.value.querySelectorAll("[type=radio]"),re=z[0];!Array.from(z).some(ie=>ie.checked)&&re&&(re.tabIndex=0)});const V=computed(()=>e.name||g.value);return provide(radioGroupKey,reactive({...toRefs(e),changeEvent:L,name:V})),watch(()=>e.modelValue,()=>{e.validateEvent&&(i==null||i.validate("change").catch(z=>void 0))}),(z,re)=>(openBlock(),createElementBlock("div",{id:unref(k),ref_key:"radioGroupRef",ref:y,class:normalizeClass(unref(n).b("group")),role:"radiogroup","aria-label":unref($)?void 0:z.label||"radio-group","aria-labelledby":unref($)?unref(i).labelId:void 0},[renderSlot(z.$slots,"default")],10,_hoisted_1$x))}});var RadioGroup=_export_sfc$1(_sfc_main$V,[["__file","radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup}),ElRadioGroup=withNoopInstall(RadioGroup);withNoopInstall(RadioButton);var NodeContent=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:t}=this,{node:r,panel:e}=this.$parent,{data:n,label:g}=r,{renderLabelFn:y}=e;return h$1("span",{class:t.e("label")},y?y({node:r,data:n}):g)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$U=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:r}){const e=inject(CASCADER_PANEL_INJECTION_KEY),n=useNamespace("cascader-node"),g=computed(()=>e.isHoverMenu),y=computed(()=>e.config.multiple),i=computed(()=>e.config.checkStrictly),k=computed(()=>{var $e;return($e=e.checkedNodes[0])==null?void 0:$e.uid}),$=computed(()=>t.node.isDisabled),L=computed(()=>t.node.isLeaf),V=computed(()=>i.value&&!L.value||!$.value),z=computed(()=>ie(e.expandingNode)),re=computed(()=>i.value&&e.checkedNodes.some(ie)),ie=$e=>{var Lt;const{level:jt,uid:Et}=t.node;return((Lt=$e==null?void 0:$e.pathNodes[jt-1])==null?void 0:Lt.uid)===Et},ue=()=>{z.value||e.expandNode(t.node)},le=$e=>{const{node:Lt}=t;$e!==Lt.checked&&e.handleCheckChange(Lt,$e)},oe=()=>{e.lazyLoad(t.node,()=>{L.value||ue()})},ae=$e=>{g.value&&(Ue(),!L.value&&r("expand",$e))},Ue=()=>{const{node:$e}=t;!V.value||$e.loading||($e.loaded?ue():oe())},de=()=>{g.value&&!L.value||(L.value&&!$.value&&!i.value&&!y.value?Ve(!0):Ue())},_e=$e=>{i.value?(le($e),t.node.loaded&&ue()):Ve($e)},Ve=$e=>{t.node.loaded?(le($e),!i.value&&ue()):oe()};return{panel:e,isHoverMenu:g,multiple:y,checkStrictly:i,checkedNodeId:k,isDisabled:$,isLeaf:L,expandable:V,inExpandingPath:z,inCheckedPath:re,ns:n,handleHoverExpand:ae,handleExpand:Ue,handleClick:de,handleCheck:Ve,handleSelectCheck:_e}}}),_hoisted_1$w=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$l=createBaseVNode("span",null,null,-1);function _sfc_render$c(t,r,e,n,g,y){const i=resolveComponent("el-checkbox"),k=resolveComponent("el-radio"),$=resolveComponent("check"),L=resolveComponent("el-icon"),V=resolveComponent("node-content"),z=resolveComponent("loading"),re=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:normalizeClass([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:r[2]||(r[2]=(...ie)=>t.handleHoverExpand&&t.handleHoverExpand(...ie)),onFocus:r[3]||(r[3]=(...ie)=>t.handleHoverExpand&&t.handleHoverExpand(...ie)),onClick:r[4]||(r[4]=(...ie)=>t.handleClick&&t.handleClick(...ie))},[createCommentVNode(" prefix "),t.multiple?(openBlock(),createBlock(i,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:r[0]||(r[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(openBlock(),createBlock(k,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:r[1]||(r[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$l]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(openBlock(),createBlock(L,{key:2,class:normalizeClass(t.ns.e("prefix"))},{default:withCtx(()=>[createVNode($)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(V),createCommentVNode(" postfix "),t.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[t.node.loading?(openBlock(),createBlock(L,{key:0,class:normalizeClass([t.ns.is("loading"),t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(z)]),_:1},8,["class"])):(openBlock(),createBlock(L,{key:1,class:normalizeClass(["arrow-right",t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(re)]),_:1},8,["class"]))],64))],42,_hoisted_1$w)}var ElCascaderNode=_export_sfc$1(_sfc_main$U,[["render",_sfc_render$c],["__file","node.vue"]]);const _sfc_main$T=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const r=getCurrentInstance(),e=useNamespace("cascader-menu"),{t:n}=useLocale(),g=useId();let y=null,i=null;const k=inject(CASCADER_PANEL_INJECTION_KEY),$=ref(null),L=computed(()=>!t.nodes.length),V=computed(()=>!k.initialLoaded),z=computed(()=>`${g.value}-${t.index}`),re=oe=>{y=oe.target},ie=oe=>{if(!(!k.isHoverMenu||!y||!$.value))if(y.contains(oe.target)){ue();const ae=r.vnode.el,{left:Ue}=ae.getBoundingClientRect(),{offsetWidth:de,offsetHeight:_e}=ae,Ve=oe.clientX-Ue,$e=y.offsetTop,Lt=$e+y.offsetHeight;$.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${Ve} ${$e} L${de} 0 V${$e} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${Ve} ${Lt} L${de} ${_e} V${Lt} Z" />
        `}else i||(i=window.setTimeout(le,k.config.hoverThreshold))},ue=()=>{i&&(clearTimeout(i),i=null)},le=()=>{$.value&&($.value.innerHTML="",ue())};return{ns:e,panel:k,hoverZone:$,isEmpty:L,isLoading:V,menuId:z,t:n,handleExpand:re,handleMouseMove:ie,clearHoverZone:le}}});function _sfc_render$b(t,r,e,n,g,y){const i=resolveComponent("el-cascader-node"),k=resolveComponent("loading"),$=resolveComponent("el-icon"),L=resolveComponent("el-scrollbar");return openBlock(),createBlock(L,{key:t.menuId,tag:"ul",role:"menu",class:normalizeClass(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:withCtx(()=>{var V;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.nodes,z=>(openBlock(),createBlock(i,{key:z.uid,node:z,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.e("empty-text"))},[createVNode($,{size:"14",class:normalizeClass(t.ns.is("loading"))},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("empty-text"))},toDisplayString(t.t("el.cascader.noData")),3)):(V=t.panel)!=null&&V.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(t.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc$1(_sfc_main$T,[["render",_sfc_render$b],["__file","menu.vue"]]);let uid=0;const calculatePathNodes=t=>{const r=[t];let{parent:e}=t;for(;e;)r.unshift(e),e=e.parent;return r};class Node{constructor(r,e,n,g=!1){this.data=r,this.config=e,this.parent=n,this.root=g,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:y,label:i,children:k}=e,$=r[k],L=calculatePathNodes(this);this.level=g?0:n?n.level+1:1,this.value=r[y],this.label=r[i],this.pathNodes=L,this.pathValues=L.map(V=>V.value),this.pathLabels=L.map(V=>V.label),this.childrenData=$,this.children=($||[]).map(V=>new Node(V,e,this)),this.loaded=!e.lazy||this.isLeaf||!isEmpty($)}get isDisabled(){const{data:r,parent:e,config:n}=this,{disabled:g,checkStrictly:y}=n;return(isFunction$3(g)?g(r,this):!!r[g])||!y&&(e==null?void 0:e.isDisabled)}get isLeaf(){const{data:r,config:e,childrenData:n,loaded:g}=this,{lazy:y,leaf:i}=e,k=isFunction$3(i)?i(r,this):r[i];return isUndefined$1(k)?y&&!g?!1:!(Array.isArray(n)&&n.length):!!k}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(r){const{childrenData:e,children:n}=this,g=new Node(r,this.config,this);return Array.isArray(e)?e.push(r):this.childrenData=[r],n.push(g),g}calcText(r,e){const n=r?this.pathLabels.join(e):this.label;return this.text=n,n}broadcast(r,...e){const n=`onParent${capitalize(r)}`;this.children.forEach(g=>{g&&(g.broadcast(r,...e),g[n]&&g[n](...e))})}emit(r,...e){const{parent:n}=this,g=`onChild${capitalize(r)}`;n&&(n[g]&&n[g](...e),n.emit(r,...e))}onParentCheck(r){this.isDisabled||this.setCheckState(r)}onChildCheck(){const{children:r}=this,e=r.filter(g=>!g.isDisabled),n=e.length?e.every(g=>g.checked):!1;this.setCheckState(n)}setCheckState(r){const e=this.children.length,n=this.children.reduce((g,y)=>{const i=y.checked?1:y.indeterminate?.5:0;return g+i},0);this.checked=this.loaded&&this.children.filter(g=>!g.isDisabled).every(g=>g.loaded&&g.checked)&&r,this.indeterminate=this.loaded&&n!==e&&n>0}doCheck(r){if(this.checked===r)return;const{checkStrictly:e,multiple:n}=this.config;e||!n?this.checked=r:(this.broadcast("check",r),this.setCheckState(r),this.emit("check"))}}const flatNodes=(t,r)=>t.reduce((e,n)=>(n.isLeaf?e.push(n):(!r&&e.push(n),e=e.concat(flatNodes(n.children,r))),e),[]);class Store{constructor(r,e){this.config=e;const n=(r||[]).map(g=>new Node(g,this.config));this.nodes=n,this.allNodes=flatNodes(n,!1),this.leafNodes=flatNodes(n,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const n=e?e.appendChild(r):new Node(r,this.config);e||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(r,e){r.forEach(n=>this.appendNode(n,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(g=>isEqual(g.value,r)||isEqual(g.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:n,level:g})=>isEqual(r.value,n)&&r.level===g)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=t=>computed(()=>({...DefaultProps,...t.props})),getMenuIndex=t=>{if(!t)return 0;const r=t.id.split("-");return Number(r[r.length-2])},checkNode=t=>{if(!t)return;const r=t.querySelector("input");r?r.click():isLeaf(t)&&t.click()},sortByOriginalOrder=(t,r)=>{const e=r.slice(0),n=e.map(y=>y.uid),g=t.reduce((y,i)=>{const k=n.indexOf(i.uid);return k>-1&&(y.push(i),e.splice(k,1),n.splice(k,1)),y},[]);return g.push(...e),g},_sfc_main$S=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(t,{emit:r,slots:e}){let n=!1;const g=useNamespace("cascader"),y=useCascaderConfig(t);let i=null;const k=ref(!0),$=ref([]),L=ref(null),V=ref([]),z=ref(null),re=ref([]),ie=computed(()=>y.value.expandTrigger==="hover"),ue=computed(()=>t.renderLabel||e.default),le=()=>{const{options:Dt}=t,lr=y.value;n=!1,i=new Store(Dt,lr),V.value=[i.getNodes()],lr.lazy&&isEmpty(t.options)?(k.value=!1,oe(void 0,sr=>{sr&&(i=new Store(sr,lr),V.value=[i.getNodes()]),k.value=!0,jt(!1,!0)})):jt(!1,!0)},oe=(Dt,lr)=>{const sr=y.value;Dt=Dt||new Node({},sr,void 0,!0),Dt.loading=!0;const er=cr=>{const or=Dt,hr=or.root?null:or;cr&&(i==null||i.appendNodes(cr,hr)),or.loading=!1,or.loaded=!0,or.childrenData=or.childrenData||[],lr&&lr(cr)};sr.lazyLoad(Dt,er)},ae=(Dt,lr)=>{var sr;const{level:er}=Dt,cr=V.value.slice(0,er);let or;Dt.isLeaf?or=Dt.pathNodes[er-2]:(or=Dt,cr.push(Dt.children)),((sr=z.value)==null?void 0:sr.uid)!==(or==null?void 0:or.uid)&&(z.value=Dt,V.value=cr,!lr&&r("expand-change",(Dt==null?void 0:Dt.pathValues)||[]))},Ue=(Dt,lr,sr=!0)=>{const{checkStrictly:er,multiple:cr}=y.value,or=re.value[0];n=!0,!cr&&(or==null||or.doCheck(!1)),Dt.doCheck(lr),Lt(),sr&&!cr&&!er&&r("close"),!sr&&!cr&&!er&&de(Dt)},de=Dt=>{Dt&&(Dt=Dt.parent,de(Dt),Dt&&ae(Dt))},_e=Dt=>i==null?void 0:i.getFlattedNodes(Dt),Ve=Dt=>{var lr;return(lr=_e(Dt))==null?void 0:lr.filter(sr=>sr.checked!==!1)},$e=()=>{re.value.forEach(Dt=>Dt.doCheck(!1)),Lt(),V.value=V.value.slice(0,1),z.value=null,r("expand-change",[])},Lt=()=>{var Dt;const{checkStrictly:lr,multiple:sr}=y.value,er=re.value,cr=Ve(!lr),or=sortByOriginalOrder(er,cr),hr=or.map(pr=>pr.valueByOption);re.value=or,L.value=sr?hr:(Dt=hr[0])!=null?Dt:null},jt=(Dt=!1,lr=!1)=>{const{modelValue:sr}=t,{lazy:er,multiple:cr,checkStrictly:or}=y.value,hr=!or;if(!(!k.value||n||!lr&&isEqual(sr,L.value)))if(er&&!Dt){const Tr=unique(flattenDeep(castArray(sr))).map(Pr=>i==null?void 0:i.getNodeByValue(Pr)).filter(Pr=>!!Pr&&!Pr.loaded&&!Pr.loading);Tr.length?Tr.forEach(Pr=>{oe(Pr,()=>jt(!1,lr))}):jt(!0,lr)}else{const pr=cr?castArray(sr):[sr],Tr=unique(pr.map(Pr=>i==null?void 0:i.getNodeByValue(Pr,hr)));Et(Tr,lr),L.value=cloneDeep(sr)}},Et=(Dt,lr=!0)=>{const{checkStrictly:sr}=y.value,er=re.value,cr=Dt.filter(pr=>!!pr&&(sr||pr.isLeaf)),or=i==null?void 0:i.getSameNode(z.value),hr=lr&&or||cr[0];hr?hr.pathNodes.forEach(pr=>ae(pr,!0)):z.value=null,er.forEach(pr=>pr.doCheck(!1)),t.props.multiple?reactive(cr).forEach(pr=>pr.doCheck(!0)):cr.forEach(pr=>pr.doCheck(!0)),re.value=cr,nextTick(ir)},ir=()=>{isClient&&$.value.forEach(Dt=>{const lr=Dt==null?void 0:Dt.$el;if(lr){const sr=lr.querySelector(`.${g.namespace.value}-scrollbar__wrap`),er=lr.querySelector(`.${g.b("node")}.${g.is("active")}`)||lr.querySelector(`.${g.b("node")}.in-active-path`);scrollIntoView(sr,er)}})},ur=Dt=>{const lr=Dt.target,{code:sr}=Dt;switch(sr){case EVENT_CODE.up:case EVENT_CODE.down:{Dt.preventDefault();const er=sr===EVENT_CODE.up?-1:1;focusNode(getSibling(lr,er,`.${g.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{Dt.preventDefault();const er=$.value[getMenuIndex(lr)-1],cr=er==null?void 0:er.$el.querySelector(`.${g.b("node")}[aria-expanded="true"]`);focusNode(cr);break}case EVENT_CODE.right:{Dt.preventDefault();const er=$.value[getMenuIndex(lr)+1],cr=er==null?void 0:er.$el.querySelector(`.${g.b("node")}[tabindex="-1"]`);focusNode(cr);break}case EVENT_CODE.enter:checkNode(lr);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:y,expandingNode:z,checkedNodes:re,isHoverMenu:ie,initialLoaded:k,renderLabelFn:ue,lazyLoad:oe,expandNode:ae,handleCheckChange:Ue})),watch([y,()=>t.options],le,{deep:!0,immediate:!0}),watch(()=>t.modelValue,()=>{n=!1,jt()},{deep:!0}),watch(()=>L.value,Dt=>{isEqual(Dt,t.modelValue)||(r(UPDATE_MODEL_EVENT,Dt),r(CHANGE_EVENT,Dt))}),onBeforeUpdate(()=>$.value=[]),onMounted(()=>!isEmpty(t.modelValue)&&jt()),{ns:g,menuList:$,menus:V,checkedNodes:re,handleKeyDown:ur,handleCheckChange:Ue,getFlattedNodes:_e,getCheckedNodes:Ve,clearCheckedNodes:$e,calculateCheckedValue:Lt,scrollToExpandingNode:ir}}});function _sfc_render$a(t,r,e,n,g,y){const i=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:r[0]||(r[0]=(...k)=>t.handleKeyDown&&t.handleKeyDown(...k))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.menus,(k,$)=>(openBlock(),createBlock(i,{key:$,ref_for:!0,ref:L=>t.menuList[$]=L,index:$,nodes:[...k]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc$1(_sfc_main$S,[["render",_sfc_render$a],["__file","index.vue"]]);CascaderPanel.install=t=>{t.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,tagProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:componentSizes},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},__default__$s=defineComponent({name:"ElTag"}),_sfc_main$R=defineComponent({...__default__$s,props:tagProps,emits:tagEmits,setup(t,{emit:r}){const e=t,n=useFormSize(),g=useNamespace("tag"),y=computed(()=>{const{type:$,hit:L,effect:V,closable:z,round:re}=e;return[g.b(),g.is("closable",z),g.m($||"primary"),g.m(n.value),g.m(V),g.is("hit",L),g.is("round",re)]}),i=$=>{r("close",$)},k=$=>{r("click",$)};return($,L)=>$.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(y)),style:normalizeStyle({backgroundColor:$.color}),onClick:k},[createBaseVNode("span",{class:normalizeClass(unref(g).e("content"))},[renderSlot($.$slots,"default")],2),$.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("close")),onClick:withModifiers(i,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(g).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(y)),style:normalizeStyle({backgroundColor:$.color}),onClick:k},[createBaseVNode("span",{class:normalizeClass(unref(g).e("content"))},[renderSlot($.$slots,"default")],2),$.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("close")),onClick:withModifiers(i,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag=_export_sfc$1(_sfc_main$R,[["__file","tag.vue"]]);const ElTag=withInstall(Tag),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(t,r)=>t.text.includes(r)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),cascaderEmits={[UPDATE_MODEL_EVENT]:t=>!!t||t===null,[CHANGE_EVENT]:t=>!!t||t===null,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>isBoolean$1(t),expandChange:t=>!!t,removeTag:t=>!!t},_hoisted_1$v={key:0},_hoisted_2$k=["placeholder","onKeydown"],_hoisted_3$c=["onClick"],COMPONENT_NAME$6="ElCascader",__default__$r=defineComponent({name:COMPONENT_NAME$6}),_sfc_main$Q=defineComponent({...__default__$r,props:cascaderProps,emits:cascaderEmits,setup(t,{expose:r,emit:e}){const n=t,g={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:vn})=>{const{modifiersData:hn,placement:Zn}=vn;["right","left","bottom","top"].includes(Zn)||(hn.arrow.x=35)},requires:["arrow"]}]},y=useAttrs$1();let i=0,k=0;const $=useNamespace("cascader"),L=useNamespace("input"),{t:V}=useLocale(),{form:z,formItem:re}=useFormItem(),ie=ref(null),ue=ref(null),le=ref(null),oe=ref(null),ae=ref(null),Ue=ref(!1),de=ref(!1),_e=ref(!1),Ve=ref(!1),$e=ref(""),Lt=ref(""),jt=ref([]),Et=ref([]),ir=ref([]),ur=ref(!1),Dt=computed(()=>y.style),lr=computed(()=>n.disabled||(z==null?void 0:z.disabled)),sr=computed(()=>n.placeholder||V("el.cascader.placeholder")),er=computed(()=>Lt.value||jt.value.length>0||ur.value?"":sr.value),cr=useFormSize(),or=computed(()=>["small"].includes(cr.value)?"small":"default"),hr=computed(()=>!!n.props.multiple),pr=computed(()=>!n.filterable||hr.value),Tr=computed(()=>hr.value?Lt.value:$e.value),Pr=computed(()=>{var vn;return((vn=oe.value)==null?void 0:vn.checkedNodes)||[]}),_r=computed(()=>!n.clearable||lr.value||_e.value||!de.value?!1:!!Pr.value.length),Mr=computed(()=>{const{showAllLevels:vn,separator:hn}=n,Zn=Pr.value;return Zn.length?hr.value?"":Zn[0].calcText(vn,hn):""}),rr=computed({get(){return cloneDeep(n.modelValue)},set(vn){e(UPDATE_MODEL_EVENT,vn),e(CHANGE_EVENT,vn),n.validateEvent&&(re==null||re.validate("change").catch(hn=>void 0))}}),kr=computed(()=>[$.b(),$.m(cr.value),$.is("disabled",lr.value),y.class]),Er=computed(()=>[L.e("icon"),"icon-arrow-down",$.is("reverse",Ue.value)]),xr=computed(()=>$.is("focus",Ue.value||Ve.value)),vr=computed(()=>{var vn,hn;return(hn=(vn=ie.value)==null?void 0:vn.popperRef)==null?void 0:hn.contentRef}),Ir=vn=>{var hn,Zn,Oo;lr.value||(vn=vn??!Ue.value,vn!==Ue.value&&(Ue.value=vn,(Zn=(hn=ue.value)==null?void 0:hn.input)==null||Zn.setAttribute("aria-expanded",`${vn}`),vn?(Or(),nextTick((Oo=oe.value)==null?void 0:Oo.scrollToExpandingNode)):n.filterable&&Xr(),e("visibleChange",vn)))},Or=()=>{nextTick(()=>{var vn;(vn=ie.value)==null||vn.updatePopper()})},Cr=()=>{_e.value=!1},yr=vn=>{const{showAllLevels:hn,separator:Zn}=n;return{node:vn,key:vn.uid,text:vn.calcText(hn,Zn),hitState:!1,closable:!lr.value&&!vn.isDisabled,isCollapseTag:!1}},fr=vn=>{var hn;const Zn=vn.node;Zn.doCheck(!1),(hn=oe.value)==null||hn.calculateCheckedValue(),e("removeTag",Zn.valueByOption)},Sr=()=>{if(!hr.value)return;const vn=Pr.value,hn=[],Zn=[];if(vn.forEach(Oo=>Zn.push(yr(Oo))),Et.value=Zn,vn.length){vn.slice(0,n.maxCollapseTags).forEach(Do=>hn.push(yr(Do)));const Oo=vn.slice(n.maxCollapseTags),Ho=Oo.length;Ho&&(n.collapseTags?hn.push({key:-1,text:`+ ${Ho}`,closable:!1,isCollapseTag:!0}):Oo.forEach(Do=>hn.push(yr(Do))))}jt.value=hn},Br=()=>{var vn,hn;const{filterMethod:Zn,showAllLevels:Oo,separator:Ho}=n,Do=(hn=(vn=oe.value)==null?void 0:vn.getFlattedNodes(!n.props.checkStrictly))==null?void 0:hn.filter(Eo=>Eo.isDisabled?!1:(Eo.calcText(Oo,Ho),Zn(Eo,Tr.value)));hr.value&&(jt.value.forEach(Eo=>{Eo.hitState=!1}),Et.value.forEach(Eo=>{Eo.hitState=!1})),_e.value=!0,ir.value=Do,Or()},$r=()=>{var vn;let hn;_e.value&&ae.value?hn=ae.value.$el.querySelector(`.${$.e("suggestion-item")}`):hn=(vn=oe.value)==null?void 0:vn.$el.querySelector(`.${$.b("node")}[tabindex="-1"]`),hn&&(hn.focus(),!_e.value&&hn.click())},Lr=()=>{var vn,hn;const Zn=(vn=ue.value)==null?void 0:vn.input,Oo=le.value,Ho=(hn=ae.value)==null?void 0:hn.$el;if(!(!isClient||!Zn)){if(Ho){const Do=Ho.querySelector(`.${$.e("suggestion-list")}`);Do.style.minWidth=`${Zn.offsetWidth}px`}if(Oo){const{offsetHeight:Do}=Oo,Eo=jt.value.length>0?`${Math.max(Do+6,i)}px`:`${i}px`;Zn.style.height=Eo,Or()}}},Gr=vn=>{var hn;return(hn=oe.value)==null?void 0:hn.getCheckedNodes(vn)},qr=vn=>{Or(),e("expandChange",vn)},Yr=vn=>{var hn;const Zn=(hn=vn.target)==null?void 0:hn.value;if(vn.type==="compositionend")ur.value=!1,nextTick(()=>xn(Zn));else{const Oo=Zn[Zn.length-1]||"";ur.value=!isKorean(Oo)}},bn=vn=>{if(!ur.value)switch(vn.code){case EVENT_CODE.enter:Ir();break;case EVENT_CODE.down:Ir(!0),nextTick($r),vn.preventDefault();break;case EVENT_CODE.esc:Ue.value===!0&&(vn.preventDefault(),vn.stopPropagation(),Ir(!1));break;case EVENT_CODE.tab:Ir(!1);break}},wn=()=>{var vn;(vn=oe.value)==null||vn.clearCheckedNodes(),!Ue.value&&n.filterable&&Xr(),Ir(!1)},Xr=()=>{const{value:vn}=Mr;$e.value=vn,Lt.value=vn},qn=vn=>{var hn,Zn;const{checked:Oo}=vn;hr.value?(hn=oe.value)==null||hn.handleCheckChange(vn,!Oo,!1):(!Oo&&((Zn=oe.value)==null||Zn.handleCheckChange(vn,!0,!1)),Ir(!1))},Zr=vn=>{const hn=vn.target,{code:Zn}=vn;switch(Zn){case EVENT_CODE.up:case EVENT_CODE.down:{const Oo=Zn===EVENT_CODE.up?-1:1;focusNode(getSibling(hn,Oo,`.${$.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:hn.click();break}},Nn=()=>{const vn=jt.value,hn=vn[vn.length-1];k=Lt.value?0:k+1,!(!hn||!k||n.collapseTags&&vn.length>1)&&(hn.hitState?fr(hn):hn.hitState=!0)},Qr=vn=>{const hn=vn.target,Zn=$.e("search-input");hn.className===Zn&&(Ve.value=!0),e("focus",vn)},Mn=vn=>{Ve.value=!1,e("blur",vn)},Ln=debounce(()=>{const{value:vn}=Tr;if(!vn)return;const hn=n.beforeFilter(vn);isPromise(hn)?hn.then(Br).catch(()=>{}):hn!==!1?Br():Cr()},n.debounce),xn=(vn,hn)=>{!Ue.value&&Ir(!0),!(hn!=null&&hn.isComposing)&&(vn?Ln():Cr())},Pn=vn=>Number.parseFloat(useCssVar(L.cssVarName("input-height"),vn).value)-2;return watch(_e,Or),watch([Pr,lr],Sr),watch(jt,()=>{nextTick(()=>Lr())}),watch(cr,async()=>{await nextTick();const vn=ue.value.input;i=Pn(vn)||i,Lr()}),watch(Mr,Xr,{immediate:!0}),onMounted(()=>{const vn=ue.value.input,hn=Pn(vn);i=vn.offsetHeight||hn,useResizeObserver(vn,Lr)}),r({getCheckedNodes:Gr,cascaderPanelRef:oe,togglePopperVisible:Ir,contentRef:vr}),(vn,hn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:ie,visible:Ue.value,teleported:vn.teleported,"popper-class":[unref($).e("dropdown"),vn.popperClass],"popper-options":g,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref($).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Cr},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(kr)),style:normalizeStyle(unref(Dt)),onClick:hn[5]||(hn[5]=()=>Ir(unref(pr)?void 0:!0)),onKeydown:bn,onMouseenter:hn[6]||(hn[6]=Zn=>de.value=!0),onMouseleave:hn[7]||(hn[7]=Zn=>de.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:ue,modelValue:$e.value,"onUpdate:modelValue":hn[1]||(hn[1]=Zn=>$e.value=Zn),placeholder:unref(er),readonly:unref(pr),disabled:unref(lr),"validate-event":!1,size:unref(cr),class:normalizeClass(unref(xr)),tabindex:unref(hr)&&vn.filterable&&!unref(lr)?-1:void 0,onCompositionstart:Yr,onCompositionupdate:Yr,onCompositionend:Yr,onFocus:Qr,onBlur:Mn,onInput:xn},{suffix:withCtx(()=>[unref(_r)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref(L).e("icon"),"icon-circle-close"]),onClick:withModifiers(wn,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(Er)),onClick:hn[0]||(hn[0]=withModifiers(Zn=>Ir(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(hr)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:le,class:normalizeClass(unref($).e("tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(jt.value,Zn=>(openBlock(),createBlock(unref(ElTag),{key:Zn.key,type:vn.tagType,size:unref(or),hit:Zn.hitState,closable:Zn.closable,"disable-transitions":"",onClose:Oo=>fr(Zn)},{default:withCtx(()=>[Zn.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$v,toDisplayString(Zn.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:Ue.value||!vn.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Zn.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref($).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Et.value.slice(vn.maxCollapseTags),(Oo,Ho)=>(openBlock(),createElementBlock("div",{key:Ho,class:normalizeClass(unref($).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:Oo.key,class:"in-tooltip",type:vn.tagType,size:unref(or),hit:Oo.hitState,closable:Oo.closable,"disable-transitions":"",onClose:Do=>fr(Oo)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Oo.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),vn.filterable&&!unref(lr)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":hn[2]||(hn[2]=Zn=>Lt.value=Zn),type:"text",class:normalizeClass(unref($).e("search-input")),placeholder:unref(Mr)?"":unref(sr),onInput:hn[3]||(hn[3]=Zn=>xn(Lt.value,Zn)),onClick:hn[4]||(hn[4]=withModifiers(Zn=>Ir(!0),["stop"])),onKeydown:withKeys(Nn,["delete"]),onCompositionstart:Yr,onCompositionupdate:Yr,onCompositionend:Yr,onFocus:Qr,onBlur:Mn},null,42,_hoisted_2$k)),[[vModelText,Lt.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>Ir(!1),unref(vr)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:oe,modelValue:unref(rr),"onUpdate:modelValue":hn[8]||(hn[8]=Zn=>isRef(rr)?rr.value=Zn:null),options:vn.options,props:n.props,border:!1,"render-label":vn.$slots.default,onExpandChange:qr,onClose:hn[9]||(hn[9]=Zn=>vn.$nextTick(()=>Ir(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!_e.value]]),vn.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:ae,tag:"ul",class:normalizeClass(unref($).e("suggestion-panel")),"view-class":unref($).e("suggestion-list"),onKeydown:Zr},{default:withCtx(()=>[ir.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(ir.value,Zn=>(openBlock(),createElementBlock("li",{key:Zn.uid,class:normalizeClass([unref($).e("suggestion-item"),unref($).is("checked",Zn.checked)]),tabindex:-1,onClick:Oo=>qn(Zn)},[createBaseVNode("span",null,toDisplayString(Zn.text),1),Zn.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$c))),128)):renderSlot(vn.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref($).e("empty-text"))},toDisplayString(unref(V)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,_e.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc$1(_sfc_main$Q,[["__file","cascader.vue"]]);Cascader.install=t=>{t.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$q=defineComponent({name:"ElRow"}),_sfc_main$P=defineComponent({...__default__$q,props:rowProps,setup(t){const r=t,e=useNamespace("row"),n=computed(()=>r.gutter);provide(rowContextKey,{gutter:n});const g=computed(()=>{const i={};return r.gutter&&(i.marginRight=i.marginLeft=`-${r.gutter/2}px`),i}),y=computed(()=>[e.b(),e.is(`justify-${r.justify}`,r.justify!=="start"),e.is(`align-${r.align}`,!!r.align)]);return(i,k)=>(openBlock(),createBlock(resolveDynamicComponent(i.tag),{class:normalizeClass(unref(y)),style:normalizeStyle(unref(g))},{default:withCtx(()=>[renderSlot(i.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc$1(_sfc_main$P,[["__file","row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$p=defineComponent({name:"ElCol"}),_sfc_main$O=defineComponent({...__default__$p,props:colProps,setup(t){const r=t,{gutter:e}=inject(rowContextKey,{gutter:computed(()=>0)}),n=useNamespace("col"),g=computed(()=>{const i={};return e.value&&(i.paddingLeft=i.paddingRight=`${e.value/2}px`),i}),y=computed(()=>{const i=[];return["span","offset","pull","push"].forEach(L=>{const V=r[L];isNumber$1(V)&&(L==="span"?i.push(n.b(`${r[L]}`)):V>0&&i.push(n.b(`${L}-${r[L]}`)))}),["xs","sm","md","lg","xl"].forEach(L=>{isNumber$1(r[L])?i.push(n.b(`${L}-${r[L]}`)):isObject$2(r[L])&&Object.entries(r[L]).forEach(([V,z])=>{i.push(V!=="span"?n.b(`${L}-${V}-${z}`):n.b(`${L}-${z}`))})}),e.value&&i.push(n.is("guttered")),[n.b(),i]});return(i,k)=>(openBlock(),createBlock(resolveDynamicComponent(i.tag),{class:normalizeClass(unref(y)),style:normalizeStyle(unref(g))},{default:withCtx(()=>[renderSlot(i.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc$1(_sfc_main$O,[["__file","col.vue"]]);const ElCol=withInstall(Col),__default__$o=defineComponent({name:"ElCollapseTransition"}),_sfc_main$N=defineComponent({...__default__$o,setup(t){const r=useNamespace("collapse-transition"),e=g=>{g.style.maxHeight="",g.style.overflow=g.dataset.oldOverflow,g.style.paddingTop=g.dataset.oldPaddingTop,g.style.paddingBottom=g.dataset.oldPaddingBottom},n={beforeEnter(g){g.dataset||(g.dataset={}),g.dataset.oldPaddingTop=g.style.paddingTop,g.dataset.oldPaddingBottom=g.style.paddingBottom,g.style.height&&(g.dataset.elExistsHeight=g.style.height),g.style.maxHeight=0,g.style.paddingTop=0,g.style.paddingBottom=0},enter(g){requestAnimationFrame(()=>{g.dataset.oldOverflow=g.style.overflow,g.dataset.elExistsHeight?g.style.maxHeight=g.dataset.elExistsHeight:g.scrollHeight!==0?g.style.maxHeight=`${g.scrollHeight}px`:g.style.maxHeight=0,g.style.paddingTop=g.dataset.oldPaddingTop,g.style.paddingBottom=g.dataset.oldPaddingBottom,g.style.overflow="hidden"})},afterEnter(g){g.style.maxHeight="",g.style.overflow=g.dataset.oldOverflow},enterCancelled(g){e(g)},beforeLeave(g){g.dataset||(g.dataset={}),g.dataset.oldPaddingTop=g.style.paddingTop,g.dataset.oldPaddingBottom=g.style.paddingBottom,g.dataset.oldOverflow=g.style.overflow,g.style.maxHeight=`${g.scrollHeight}px`,g.style.overflow="hidden"},leave(g){g.scrollHeight!==0&&(g.style.maxHeight=0,g.style.paddingTop=0,g.style.paddingBottom=0)},afterLeave(g){e(g)},leaveCancelled(g){e(g)}};return(g,y)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(r).b()},toHandlers(n)),{default:withCtx(()=>[renderSlot(g.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc$1(_sfc_main$N,[["__file","collapse-transition.vue"]]);CollapseTransition.install=t=>{t.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,__default__$n=defineComponent({name:"ElContainer"}),_sfc_main$M=defineComponent({...__default__$n,props:{direction:{type:String}},setup(t){const r=t,e=useSlots(),n=useNamespace("container"),g=computed(()=>r.direction==="vertical"?!0:r.direction==="horizontal"?!1:e&&e.default?e.default().some(i=>{const k=i.type.name;return k==="ElHeader"||k==="ElFooter"}):!1);return(y,i)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(n).b(),unref(n).is("vertical",unref(g))])},[renderSlot(y.$slots,"default")],2))}});var Container=_export_sfc$1(_sfc_main$M,[["__file","container.vue"]]);const __default__$m=defineComponent({name:"ElAside"}),_sfc_main$L=defineComponent({...__default__$m,props:{width:{type:String,default:null}},setup(t){const r=t,e=useNamespace("aside"),n=computed(()=>r.width?e.cssVarBlock({width:r.width}):{});return(g,y)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Aside=_export_sfc$1(_sfc_main$L,[["__file","aside.vue"]]);const __default__$l=defineComponent({name:"ElFooter"}),_sfc_main$K=defineComponent({...__default__$l,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("footer"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(g,y)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Footer=_export_sfc$1(_sfc_main$K,[["__file","footer.vue"]]);const __default__$k=defineComponent({name:"ElHeader"}),_sfc_main$J=defineComponent({...__default__$k,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("header"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(g,y)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Header=_export_sfc$1(_sfc_main$J,[["__file","header.vue"]]);const __default__$j=defineComponent({name:"ElMain"}),_sfc_main$I=defineComponent({...__default__$j,setup(t){const r=useNamespace("main");return(e,n)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(r).b())},[renderSlot(e.$slots,"default")],2))}});var Main=_export_sfc$1(_sfc_main$I,[["__file","main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer,Header,Main}),ElAside=withNoopInstall(Aside);withNoopInstall(Footer);withNoopInstall(Header);const ElMain=withNoopInstall(Main),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:t=>t instanceof MouseEvent},BLOCK="overlay";var Overlay=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(t,{slots:r,emit:e}){const n=useNamespace(BLOCK),g=$=>{e("click",$)},{onClick:y,onMousedown:i,onMouseup:k}=useSameTarget(t.customMaskEvent?void 0:g);return()=>t.mask?createVNode("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:y,onMousedown:i,onMouseup:k},[renderSlot(r,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h$1("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(r,"default")])}});const ElOverlay=Overlay,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$u=["aria-level"],_hoisted_2$j=["aria-label"],_hoisted_3$b=["id"],__default__$i=defineComponent({name:"ElDialogContent"}),_sfc_main$H=defineComponent({...__default__$i,props:dialogContentProps,emits:dialogContentEmits,setup(t){const r=t,{t:e}=useLocale(),{Close:n}=CloseComponents,{dialogRef:g,headerRef:y,bodyId:i,ns:k,style:$}=inject(dialogInjectionKey),{focusTrapRef:L}=inject(FOCUS_TRAP_INJECTION_KEY),V=computed(()=>[k.b(),k.is("fullscreen",r.fullscreen),k.is("draggable",r.draggable),k.is("align-center",r.alignCenter),{[k.m("center")]:r.center}]),z=composeRefs(L,g),re=computed(()=>r.draggable),ie=computed(()=>r.overflow);return useDraggable(g,y,re,ie),(ue,le)=>(openBlock(),createElementBlock("div",{ref:unref(z),class:normalizeClass(unref(V)),style:normalizeStyle(unref($)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:y,class:normalizeClass([unref(k).e("header"),{"show-close":ue.showClose}])},[renderSlot(ue.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":ue.ariaLevel,class:normalizeClass(unref(k).e("title"))},toDisplayString(ue.title),11,_hoisted_1$u)]),ue.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(e)("el.dialog.close"),class:normalizeClass(unref(k).e("headerbtn")),type:"button",onClick:le[0]||(le[0]=oe=>ue.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(k).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ue.closeIcon||unref(n))))]),_:1},8,["class"])],10,_hoisted_2$j)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref(i),class:normalizeClass(unref(k).e("body"))},[renderSlot(ue.$slots,"default")],10,_hoisted_3$b),ue.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(k).e("footer"))},[renderSlot(ue.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc$1(_sfc_main$H,[["__file","dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,appendTo:{type:definePropType(String),default:"body"},beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(t,r)=>{var e;const g=getCurrentInstance().emit,{nextZIndex:y}=useZIndex();let i="";const k=useId(),$=useId(),L=ref(!1),V=ref(!1),z=ref(!1),re=ref((e=t.zIndex)!=null?e:y());let ie,ue;const le=useGlobalConfig("namespace",defaultNamespace),oe=computed(()=>{const er={},cr=`--${le.value}-dialog`;return t.fullscreen||(t.top&&(er[`${cr}-margin-top`]=t.top),t.width&&(er[`${cr}-width`]=addUnit(t.width))),er}),ae=computed(()=>t.alignCenter?{display:"flex"}:{});function Ue(){g("opened")}function de(){g("closed"),g(UPDATE_MODEL_EVENT,!1),t.destroyOnClose&&(z.value=!1)}function _e(){g("close")}function Ve(){ue==null||ue(),ie==null||ie(),t.openDelay&&t.openDelay>0?{stop:ie}=useTimeoutFn(()=>Et(),t.openDelay):Et()}function $e(){ie==null||ie(),ue==null||ue(),t.closeDelay&&t.closeDelay>0?{stop:ue}=useTimeoutFn(()=>ir(),t.closeDelay):ir()}function Lt(){function er(cr){cr||(V.value=!0,L.value=!1)}t.beforeClose?t.beforeClose(er):$e()}function jt(){t.closeOnClickModal&&Lt()}function Et(){isClient&&(L.value=!0)}function ir(){L.value=!1}function ur(){g("openAutoFocus")}function Dt(){g("closeAutoFocus")}function lr(er){var cr;((cr=er.detail)==null?void 0:cr.focusReason)==="pointer"&&er.preventDefault()}t.lockScroll&&useLockscreen(L);function sr(){t.closeOnPressEscape&&Lt()}return watch(()=>t.modelValue,er=>{er?(V.value=!1,Ve(),z.value=!0,re.value=isUndefined$2(t.zIndex)?y():re.value++,nextTick(()=>{g("open"),r.value&&(r.value.scrollTop=0)})):L.value&&$e()}),watch(()=>t.fullscreen,er=>{r.value&&(er?(i=r.value.style.transform,r.value.style.transform=""):r.value.style.transform=i)}),onMounted(()=>{t.modelValue&&(L.value=!0,z.value=!0,Ve())}),{afterEnter:Ue,afterLeave:de,beforeLeave:_e,handleClose:Lt,onModalClick:jt,close:$e,doClose:ir,onOpenAutoFocus:ur,onCloseAutoFocus:Dt,onCloseRequested:sr,onFocusoutPrevented:lr,titleId:k,bodyId:$,closed:V,style:oe,overlayDialogStyle:ae,rendered:z,visible:L,zIndex:re}},_hoisted_1$t=["aria-label","aria-labelledby","aria-describedby"],__default__$h=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$G=defineComponent({...__default__$h,props:dialogProps,emits:dialogEmits,setup(t,{expose:r}){const e=t,n=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!n.title));const g=useNamespace("dialog"),y=ref(),i=ref(),k=ref(),{visible:$,titleId:L,bodyId:V,style:z,overlayDialogStyle:re,rendered:ie,zIndex:ue,afterEnter:le,afterLeave:oe,beforeLeave:ae,handleClose:Ue,onModalClick:de,onOpenAutoFocus:_e,onCloseAutoFocus:Ve,onCloseRequested:$e,onFocusoutPrevented:Lt}=useDialog(e,y);provide(dialogInjectionKey,{dialogRef:y,headerRef:i,bodyId:V,ns:g,rendered:ie,style:z});const jt=useSameTarget(de),Et=computed(()=>e.draggable&&!e.fullscreen);return r({visible:$,dialogContentRef:k}),(ir,ur)=>(openBlock(),createBlock(Teleport,{to:ir.appendTo,disabled:ir.appendTo!=="body"?!1:!ir.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(le),onAfterLeave:unref(oe),onBeforeLeave:unref(ae),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:ir.modal,"overlay-class":ir.modalClass,"z-index":unref(ue)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":ir.title||void 0,"aria-labelledby":ir.title?void 0:unref(L),"aria-describedby":unref(V),class:normalizeClass(`${unref(g).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(re)),onClick:ur[0]||(ur[0]=(...Dt)=>unref(jt).onClick&&unref(jt).onClick(...Dt)),onMousedown:ur[1]||(ur[1]=(...Dt)=>unref(jt).onMousedown&&unref(jt).onMousedown(...Dt)),onMouseup:ur[2]||(ur[2]=(...Dt)=>unref(jt).onMouseup&&unref(jt).onMouseup(...Dt))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref($),"focus-start-el":"container",onFocusAfterTrapped:unref(_e),onFocusAfterReleased:unref(Ve),onFocusoutPrevented:unref(Lt),onReleaseRequested:unref($e)},{default:withCtx(()=>[unref(ie)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:k},ir.$attrs,{center:ir.center,"align-center":ir.alignCenter,"close-icon":ir.closeIcon,draggable:unref(Et),overflow:ir.overflow,fullscreen:ir.fullscreen,"show-close":ir.showClose,title:ir.title,"aria-level":ir.headerAriaLevel,onClose:unref(Ue)}),createSlots({header:withCtx(()=>[ir.$slots.title?renderSlot(ir.$slots,"title",{key:1}):renderSlot(ir.$slots,"header",{key:0,close:unref(Ue),titleId:unref(L),titleClass:unref(g).e("title")})]),default:withCtx(()=>[renderSlot(ir.$slots,"default")]),_:2},[ir.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(ir.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$t)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref($)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Dialog=_export_sfc$1(_sfc_main$G,[["__file","dialog.vue"]]);const ElDialog=withInstall(Dialog),dividerProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:definePropType(String),default:"solid"}}),__default__$g=defineComponent({name:"ElDivider"}),_sfc_main$F=defineComponent({...__default__$g,props:dividerProps,setup(t){const r=t,e=useNamespace("divider"),n=computed(()=>e.cssVar({"border-style":r.borderStyle}));return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(e).b(),unref(e).m(g.direction)]),style:normalizeStyle(unref(n)),role:"separator"},[g.$slots.default&&g.direction!=="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(e).e("text"),unref(e).is(g.contentPosition)])},[renderSlot(g.$slots,"default")],2)):createCommentVNode("v-if",!0)],6))}});var Divider=_export_sfc$1(_sfc_main$F,[["__file","divider.vue"]]);const ElDivider=withInstall(Divider),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageViewerEmits={close:()=>!0,switch:t=>isNumber$1(t),rotate:t=>isNumber$1(t)},_hoisted_1$s=["src","crossorigin"],__default__$f=defineComponent({name:"ElImageViewer"}),_sfc_main$E=defineComponent({...__default__$f,props:imageViewerProps,emits:imageViewerEmits,setup(t,{expose:r,emit:e}){var n;const g=t,y={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:i}=useLocale(),k=useNamespace("image-viewer"),{nextZIndex:$}=useZIndex(),L=ref(),V=ref([]),z=effectScope(),re=ref(!0),ie=ref(g.initialIndex),ue=shallowRef(y.CONTAIN),le=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),oe=ref((n=g.zIndex)!=null?n:$()),ae=computed(()=>{const{urlList:Tr}=g;return Tr.length<=1}),Ue=computed(()=>ie.value===0),de=computed(()=>ie.value===g.urlList.length-1),_e=computed(()=>g.urlList[ie.value]),Ve=computed(()=>[k.e("btn"),k.e("prev"),k.is("disabled",!g.infinite&&Ue.value)]),$e=computed(()=>[k.e("btn"),k.e("next"),k.is("disabled",!g.infinite&&de.value)]),Lt=computed(()=>{const{scale:Tr,deg:Pr,offsetX:_r,offsetY:Mr,enableTransition:rr}=le.value;let kr=_r/Tr,Er=Mr/Tr;switch(Pr%360){case 90:case-270:[kr,Er]=[Er,-kr];break;case 180:case-180:[kr,Er]=[-kr,-Er];break;case 270:case-90:[kr,Er]=[-Er,kr];break}const xr={transform:`scale(${Tr}) rotate(${Pr}deg) translate(${kr}px, ${Er}px)`,transition:rr?"transform .3s":""};return ue.value.name===y.CONTAIN.name&&(xr.maxWidth=xr.maxHeight="100%"),xr});function jt(){ir(),e("close")}function Et(){const Tr=throttle(_r=>{switch(_r.code){case EVENT_CODE.esc:g.closeOnPressEscape&&jt();break;case EVENT_CODE.space:er();break;case EVENT_CODE.left:or();break;case EVENT_CODE.up:pr("zoomIn");break;case EVENT_CODE.right:hr();break;case EVENT_CODE.down:pr("zoomOut");break}}),Pr=throttle(_r=>{const Mr=_r.deltaY||_r.deltaX;pr(Mr<0?"zoomIn":"zoomOut",{zoomRate:g.zoomRate,enableTransition:!1})});z.run(()=>{useEventListener(document,"keydown",Tr),useEventListener(document,"wheel",Pr)})}function ir(){z.stop()}function ur(){re.value=!1}function Dt(Tr){re.value=!1,Tr.target.alt=i("el.image.error")}function lr(Tr){if(re.value||Tr.button!==0||!L.value)return;le.value.enableTransition=!1;const{offsetX:Pr,offsetY:_r}=le.value,Mr=Tr.pageX,rr=Tr.pageY,kr=throttle(xr=>{le.value={...le.value,offsetX:Pr+xr.pageX-Mr,offsetY:_r+xr.pageY-rr}}),Er=useEventListener(document,"mousemove",kr);useEventListener(document,"mouseup",()=>{Er()}),Tr.preventDefault()}function sr(){le.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function er(){if(re.value)return;const Tr=keysOf(y),Pr=Object.values(y),_r=ue.value.name,rr=(Pr.findIndex(kr=>kr.name===_r)+1)%Tr.length;ue.value=y[Tr[rr]],sr()}function cr(Tr){const Pr=g.urlList.length;ie.value=(Tr+Pr)%Pr}function or(){Ue.value&&!g.infinite||cr(ie.value-1)}function hr(){de.value&&!g.infinite||cr(ie.value+1)}function pr(Tr,Pr={}){if(re.value)return;const{minScale:_r,maxScale:Mr}=g,{zoomRate:rr,rotateDeg:kr,enableTransition:Er}={zoomRate:g.zoomRate,rotateDeg:90,enableTransition:!0,...Pr};switch(Tr){case"zoomOut":le.value.scale>_r&&(le.value.scale=Number.parseFloat((le.value.scale/rr).toFixed(3)));break;case"zoomIn":le.value.scale<Mr&&(le.value.scale=Number.parseFloat((le.value.scale*rr).toFixed(3)));break;case"clockwise":le.value.deg+=kr,e("rotate",le.value.deg);break;case"anticlockwise":le.value.deg-=kr,e("rotate",le.value.deg);break}le.value.enableTransition=Er}return watch(_e,()=>{nextTick(()=>{const Tr=V.value[0];Tr!=null&&Tr.complete||(re.value=!0)})}),watch(ie,Tr=>{sr(),e("switch",Tr)}),onMounted(()=>{var Tr,Pr;Et(),(Pr=(Tr=L.value)==null?void 0:Tr.focus)==null||Pr.call(Tr)}),r({setActiveItem:cr}),(Tr,Pr)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!Tr.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:L,tabindex:-1,class:normalizeClass(unref(k).e("wrapper")),style:normalizeStyle({zIndex:oe.value})},[createBaseVNode("div",{class:normalizeClass(unref(k).e("mask")),onClick:Pr[0]||(Pr[0]=withModifiers(_r=>Tr.hideOnClickModal&&jt(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(k).e("btn"),unref(k).e("close")]),onClick:jt},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(ae)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(Ve)),onClick:or},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref($e)),onClick:hr},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(k).e("btn"),unref(k).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(k).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:Pr[1]||(Pr[1]=_r=>pr("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:Pr[2]||(Pr[2]=_r=>pr("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(k).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:er},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(k).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:Pr[3]||(Pr[3]=_r=>pr("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:Pr[4]||(Pr[4]=_r=>pr("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(k).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Tr.urlList,(_r,Mr)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:rr=>V.value[Mr]=rr,key:_r,src:_r,style:normalizeStyle(unref(Lt)),class:normalizeClass(unref(k).e("img")),crossorigin:Tr.crossorigin,onLoad:ur,onError:Dt,onMousedown:lr},null,46,_hoisted_1$s)),[[vShow,Mr===ie.value]])),128))],2),renderSlot(Tr.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc$1(_sfc_main$E,[["__file","image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageEmits={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>isNumber$1(t),close:()=>!0,show:()=>!0},_hoisted_1$r=["src","loading","crossorigin"],_hoisted_2$i={key:0},__default__$e=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$D=defineComponent({...__default__$e,props:imageProps,emits:imageEmits,setup(t,{emit:r}){const e=t;let n="";const{t:g}=useLocale(),y=useNamespace("image"),i=useAttrs$1(),k=useAttrs(),$=ref(),L=ref(!1),V=ref(!0),z=ref(!1),re=ref(),ie=ref(),ue=isClient&&"loading"in HTMLImageElement.prototype;let le,oe;const ae=computed(()=>[y.e("inner"),_e.value&&y.e("preview"),V.value&&y.is("loading")]),Ue=computed(()=>i.style),de=computed(()=>{const{fit:hr}=e;return isClient&&hr?{objectFit:hr}:{}}),_e=computed(()=>{const{previewSrcList:hr}=e;return Array.isArray(hr)&&hr.length>0}),Ve=computed(()=>{const{previewSrcList:hr,initialIndex:pr}=e;let Tr=pr;return pr>hr.length-1&&(Tr=0),Tr}),$e=computed(()=>e.loading==="eager"?!1:!ue&&e.loading==="lazy"||e.lazy),Lt=()=>{isClient&&(V.value=!0,L.value=!1,$.value=e.src)};function jt(hr){V.value=!1,L.value=!1,r("load",hr)}function Et(hr){V.value=!1,L.value=!0,r("error",hr)}function ir(){isInContainer(re.value,ie.value)&&(Lt(),lr())}const ur=useThrottleFn(ir,200,!0);async function Dt(){var hr;if(!isClient)return;await nextTick();const{scrollContainer:pr}=e;isElement(pr)?ie.value=pr:isString$2(pr)&&pr!==""?ie.value=(hr=document.querySelector(pr))!=null?hr:void 0:re.value&&(ie.value=getScrollContainer(re.value)),ie.value&&(le=useEventListener(ie,"scroll",ur),setTimeout(()=>ir(),100))}function lr(){!isClient||!ie.value||!ur||(le==null||le(),ie.value=void 0)}function sr(hr){if(hr.ctrlKey){if(hr.deltaY<0)return hr.preventDefault(),!1;if(hr.deltaY>0)return hr.preventDefault(),!1}}function er(){_e.value&&(oe=useEventListener("wheel",sr,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",z.value=!0,r("show"))}function cr(){oe==null||oe(),document.body.style.overflow=n,z.value=!1,r("close")}function or(hr){r("switch",hr)}return watch(()=>e.src,()=>{$e.value?(V.value=!0,L.value=!1,lr(),Dt()):Lt()}),onMounted(()=>{$e.value?Dt():Lt()}),(hr,pr)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:re,class:normalizeClass([unref(y).b(),hr.$attrs.class]),style:normalizeStyle(unref(Ue))},[L.value?renderSlot(hr.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("error"))},toDisplayString(unref(g)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[$.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(k),{src:$.value,loading:hr.loading,style:unref(de),class:unref(ae),crossorigin:hr.crossorigin,onClick:er,onLoad:jt,onError:Et}),null,16,_hoisted_1$r)):createCommentVNode("v-if",!0),V.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("wrapper"))},[renderSlot(hr.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(_e)?(openBlock(),createElementBlock(Fragment,{key:2},[z.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":hr.zIndex,"initial-index":unref(Ve),infinite:hr.infinite,"zoom-rate":hr.zoomRate,"min-scale":hr.minScale,"max-scale":hr.maxScale,"url-list":hr.previewSrcList,"hide-on-click-modal":hr.hideOnClickModal,teleported:hr.previewTeleported,"close-on-press-escape":hr.closeOnPressEscape,onClose:cr,onSwitch:or},{default:withCtx(()=>[hr.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$i,[renderSlot(hr.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$1=_export_sfc$1(_sfc_main$D,[["__file","image.vue"]]);const ElImage=withInstall(Image$1),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||isNumber$1(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),inputNumberEmits={[CHANGE_EVENT]:(t,r)=>r!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[INPUT_EVENT]:t=>isNumber$1(t)||isNil(t),[UPDATE_MODEL_EVENT]:t=>isNumber$1(t)||isNil(t)},_hoisted_1$q=["aria-label","onKeydown"],_hoisted_2$h=["aria-label","onKeydown"],__default__$d=defineComponent({name:"ElInputNumber"}),_sfc_main$C=defineComponent({...__default__$d,props:inputNumberProps,emits:inputNumberEmits,setup(t,{expose:r,emit:e}){const n=t,{t:g}=useLocale(),y=useNamespace("input-number"),i=ref(),k=reactive({currentValue:n.modelValue,userInput:null}),{formItem:$}=useFormItem(),L=computed(()=>isNumber$1(n.modelValue)&&n.modelValue<=n.min),V=computed(()=>isNumber$1(n.modelValue)&&n.modelValue>=n.max),z=computed(()=>{const er=ae(n.step);return isUndefined$1(n.precision)?Math.max(ae(n.modelValue),er):(er>n.precision,n.precision)}),re=computed(()=>n.controls&&n.controlsPosition==="right"),ie=useFormSize(),ue=useFormDisabled(),le=computed(()=>{if(k.userInput!==null)return k.userInput;let er=k.currentValue;if(isNil(er))return"";if(isNumber$1(er)){if(Number.isNaN(er))return"";isUndefined$1(n.precision)||(er=er.toFixed(n.precision))}return er}),oe=(er,cr)=>{if(isUndefined$1(cr)&&(cr=z.value),cr===0)return Math.round(er);let or=String(er);const hr=or.indexOf(".");if(hr===-1||!or.replace(".","").split("")[hr+cr])return er;const Pr=or.length;return or.charAt(Pr-1)==="5"&&(or=`${or.slice(0,Math.max(0,Pr-1))}6`),Number.parseFloat(Number(or).toFixed(cr))},ae=er=>{if(isNil(er))return 0;const cr=er.toString(),or=cr.indexOf(".");let hr=0;return or!==-1&&(hr=cr.length-or-1),hr},Ue=(er,cr=1)=>isNumber$1(er)?oe(er+n.step*cr):k.currentValue,de=()=>{if(n.readonly||ue.value||V.value)return;const er=Number(le.value)||0,cr=Ue(er);$e(cr),e(INPUT_EVENT,k.currentValue),lr()},_e=()=>{if(n.readonly||ue.value||L.value)return;const er=Number(le.value)||0,cr=Ue(er,-1);$e(cr),e(INPUT_EVENT,k.currentValue),lr()},Ve=(er,cr)=>{const{max:or,min:hr,step:pr,precision:Tr,stepStrictly:Pr,valueOnClear:_r}=n;or<hr&&throwError("InputNumber","min should not be greater than max.");let Mr=Number(er);if(isNil(er)||Number.isNaN(Mr))return null;if(er===""){if(_r===null)return null;Mr=isString$2(_r)?{min:hr,max:or}[_r]:_r}return Pr&&(Mr=oe(Math.round(Mr/pr)*pr,Tr)),isUndefined$1(Tr)||(Mr=oe(Mr,Tr)),(Mr>or||Mr<hr)&&(Mr=Mr>or?or:hr,cr&&e(UPDATE_MODEL_EVENT,Mr)),Mr},$e=(er,cr=!0)=>{var or;const hr=k.currentValue,pr=Ve(er);if(!cr){e(UPDATE_MODEL_EVENT,pr);return}hr!==pr&&(k.userInput=null,e(UPDATE_MODEL_EVENT,pr),e(CHANGE_EVENT,pr,hr),n.validateEvent&&((or=$==null?void 0:$.validate)==null||or.call($,"change").catch(Tr=>void 0)),k.currentValue=pr)},Lt=er=>{k.userInput=er;const cr=er===""?null:Number(er);e(INPUT_EVENT,cr),$e(cr,!1)},jt=er=>{const cr=er!==""?Number(er):"";(isNumber$1(cr)&&!Number.isNaN(cr)||er==="")&&$e(cr),lr(),k.userInput=null},Et=()=>{var er,cr;(cr=(er=i.value)==null?void 0:er.focus)==null||cr.call(er)},ir=()=>{var er,cr;(cr=(er=i.value)==null?void 0:er.blur)==null||cr.call(er)},ur=er=>{e("focus",er)},Dt=er=>{var cr;k.userInput=null,e("blur",er),n.validateEvent&&((cr=$==null?void 0:$.validate)==null||cr.call($,"blur").catch(or=>void 0))},lr=()=>{k.currentValue!==n.modelValue&&(k.currentValue=n.modelValue)},sr=er=>{document.activeElement===er.target&&er.preventDefault()};return watch(()=>n.modelValue,(er,cr)=>{const or=Ve(er,!0);k.userInput===null&&or!==cr&&(k.currentValue=or)},{immediate:!0}),onMounted(()=>{var er;const{min:cr,max:or,modelValue:hr}=n,pr=(er=i.value)==null?void 0:er.input;if(pr.setAttribute("role","spinbutton"),Number.isFinite(or)?pr.setAttribute("aria-valuemax",String(or)):pr.removeAttribute("aria-valuemax"),Number.isFinite(cr)?pr.setAttribute("aria-valuemin",String(cr)):pr.removeAttribute("aria-valuemin"),pr.setAttribute("aria-valuenow",k.currentValue||k.currentValue===0?String(k.currentValue):""),pr.setAttribute("aria-disabled",String(ue.value)),!isNumber$1(hr)&&hr!=null){let Tr=Number(hr);Number.isNaN(Tr)&&(Tr=null),e(UPDATE_MODEL_EVENT,Tr)}}),onUpdated(()=>{var er,cr;const or=(er=i.value)==null?void 0:er.input;or==null||or.setAttribute("aria-valuenow",`${(cr=k.currentValue)!=null?cr:""}`)}),r({focus:Et,blur:ir}),(er,cr)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(y).b(),unref(y).m(unref(ie)),unref(y).is("disabled",unref(ue)),unref(y).is("without-controls",!er.controls),unref(y).is("controls-right",unref(re))]),onDragstart:cr[0]||(cr[0]=withModifiers(()=>{},["prevent"]))},[er.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(g)("el.inputNumber.decrease"),class:normalizeClass([unref(y).e("decrease"),unref(y).is("disabled",unref(L))]),onKeydown:withKeys(_e,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})],42,_hoisted_1$q)),[[unref(vRepeatClick),_e]]):createCommentVNode("v-if",!0),er.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(g)("el.inputNumber.increase"),class:normalizeClass([unref(y).e("increase"),unref(y).is("disabled",unref(V))]),onKeydown:withKeys(de,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})],42,_hoisted_2$h)),[[unref(vRepeatClick),de]]):createCommentVNode("v-if",!0),createVNode(unref(ElInput),{id:er.id,ref_key:"input",ref:i,type:"number",step:er.step,"model-value":unref(le),placeholder:er.placeholder,readonly:er.readonly,disabled:unref(ue),size:unref(ie),max:er.max,min:er.min,name:er.name,label:er.label,"validate-event":!1,onWheel:sr,onKeydown:[withKeys(withModifiers(de,["prevent"]),["up"]),withKeys(withModifiers(_e,["prevent"]),["down"])],onBlur:Dt,onFocus:ur,onInput:Lt,onChange:jt},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var InputNumber=_export_sfc$1(_sfc_main$C,[["__file","input-number.vue"]]);const ElInputNumber=withInstall(InputNumber);let SubMenu$1=class{constructor(r,e){this.parent=r,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(r){r===this.subMenuItems.length?r=0:r<0&&(r=this.subMenuItems.length-1),this.subMenuItems[r].focus(),this.subIndex=r}addListeners(){const r=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,e=>{e.addEventListener("keydown",n=>{let g=!1;switch(n.code){case EVENT_CODE.down:{this.gotoSubIndex(this.subIndex+1),g=!0;break}case EVENT_CODE.up:{this.gotoSubIndex(this.subIndex-1),g=!0;break}case EVENT_CODE.tab:{triggerEvent(r,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{g=!0,n.currentTarget.click();break}}return g&&(n.preventDefault(),n.stopPropagation()),!1})})}},MenuItem$1=class{constructor(r,e){this.domNode=r,this.submenu=null,this.submenu=null,this.init(e)}init(r){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(`.${r}-menu`);e&&(this.submenu=new SubMenu$1(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",r=>{let e=!1;switch(r.code){case EVENT_CODE.down:{triggerEvent(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break}case EVENT_CODE.up:{triggerEvent(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break}case EVENT_CODE.tab:{triggerEvent(r.currentTarget,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{e=!0,r.currentTarget.click();break}}e&&r.preventDefault()})}},Menu$1=class{constructor(r,e){this.domNode=r,this.init(e)}init(r){const e=this.domNode.childNodes;Array.from(e).forEach(n=>{n.nodeType===1&&new MenuItem$1(n,r)})}};const _sfc_main$B=defineComponent({name:"ElMenuCollapseTransition",setup(){const t=useNamespace("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,n){addClass(e,`${t.namespace.value}-opacity-transition`),e.style.opacity="1",n()},onAfterEnter(e){removeClass(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),hasClass(e,t.m("collapse"))?(removeClass(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),addClass(e,t.m("collapse"))):(addClass(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),removeClass(e,t.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){addClass(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}});function _sfc_render$9(t,r,e,n,g,y){return openBlock(),createBlock(Transition,mergeProps({mode:"out-in"},t.listeners),{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},16)}var ElMenuCollapseTransition=_export_sfc$1(_sfc_main$B,[["render",_sfc_render$9],["__file","menu-collapse-transition.vue"]]);function useMenu(t,r){const e=computed(()=>{let g=t.parent;const y=[r.value];for(;g.type.name!=="ElMenu";)g.props.index&&y.unshift(g.props.index),g=g.parent;return y});return{parentMenu:computed(()=>{let g=t.parent;for(;g&&!["ElMenu","ElSubMenu"].includes(g.type.name);)g=g.parent;return g}),indexPath:e}}function useMenuColor(t){return computed(()=>{const e=t.backgroundColor;return e?new TinyColor(e).shade(20).toString():""})}const useMenuCssVar=(t,r)=>{const e=useNamespace("menu");return computed(()=>e.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":useMenuColor(t).value||"","active-color":t.activeTextColor||"",level:`${r}`}))},subMenuProps=buildProps({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:iconPropType},expandOpenIcon:{type:iconPropType},collapseCloseIcon:{type:iconPropType},collapseOpenIcon:{type:iconPropType}}),COMPONENT_NAME$5="ElSubMenu";var SubMenu=defineComponent({name:COMPONENT_NAME$5,props:subMenuProps,setup(t,{slots:r,expose:e}){useDeprecated({from:"popper-append-to-body",replacement:"teleported",scope:COMPONENT_NAME$5,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},computed(()=>t.popperAppendToBody!==void 0));const n=getCurrentInstance(),{indexPath:g,parentMenu:y}=useMenu(n,computed(()=>t.index)),i=useNamespace("menu"),k=useNamespace("sub-menu"),$=inject("rootMenu");$||throwError(COMPONENT_NAME$5,"can not inject root menu");const L=inject(`subMenu:${y.value.uid}`);L||throwError(COMPONENT_NAME$5,"can not inject sub menu");const V=ref({}),z=ref({});let re;const ie=ref(!1),ue=ref(),le=ref(null),oe=computed(()=>jt.value==="horizontal"&&Ue.value?"bottom-start":"right-start"),ae=computed(()=>jt.value==="horizontal"&&Ue.value||jt.value==="vertical"&&!$.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?$e.value?t.expandOpenIcon:t.expandCloseIcon:arrow_down_default:t.collapseCloseIcon&&t.collapseOpenIcon?$e.value?t.collapseOpenIcon:t.collapseCloseIcon:arrow_right_default),Ue=computed(()=>L.level===0),de=computed(()=>{var Tr;const Pr=(Tr=t.teleported)!=null?Tr:t.popperAppendToBody;return Pr===void 0?Ue.value:Pr}),_e=computed(()=>$.props.collapse?`${i.namespace.value}-zoom-in-left`:`${i.namespace.value}-zoom-in-top`),Ve=computed(()=>jt.value==="horizontal"&&Ue.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),$e=computed(()=>$.openedMenus.includes(t.index)),Lt=computed(()=>{let Tr=!1;return Object.values(V.value).forEach(Pr=>{Pr.active&&(Tr=!0)}),Object.values(z.value).forEach(Pr=>{Pr.active&&(Tr=!0)}),Tr}),jt=computed(()=>$.props.mode),Et=reactive({index:t.index,indexPath:g,active:Lt}),ir=useMenuCssVar($.props,L.level+1),ur=computed(()=>{var Tr;return(Tr=t.popperOffset)!=null?Tr:$.props.popperOffset}),Dt=computed(()=>{var Tr;return(Tr=t.popperClass)!=null?Tr:$.props.popperClass}),lr=computed(()=>{var Tr;return(Tr=t.showTimeout)!=null?Tr:$.props.showTimeout}),sr=computed(()=>{var Tr;return(Tr=t.hideTimeout)!=null?Tr:$.props.hideTimeout}),er=()=>{var Tr,Pr,_r;return(_r=(Pr=(Tr=le.value)==null?void 0:Tr.popperRef)==null?void 0:Pr.popperInstanceRef)==null?void 0:_r.destroy()},cr=Tr=>{Tr||er()},or=()=>{$.props.menuTrigger==="hover"&&$.props.mode==="horizontal"||$.props.collapse&&$.props.mode==="vertical"||t.disabled||$.handleSubMenuClick({index:t.index,indexPath:g.value,active:Lt.value})},hr=(Tr,Pr=lr.value)=>{var _r;if(Tr.type!=="focus"){if($.props.menuTrigger==="click"&&$.props.mode==="horizontal"||!$.props.collapse&&$.props.mode==="vertical"||t.disabled){L.mouseInChild.value=!0;return}L.mouseInChild.value=!0,re==null||re(),{stop:re}=useTimeoutFn(()=>{$.openMenu(t.index,g.value)},Pr),de.value&&((_r=y.value.vnode.el)==null||_r.dispatchEvent(new MouseEvent("mouseenter")))}},pr=(Tr=!1)=>{var Pr;if($.props.menuTrigger==="click"&&$.props.mode==="horizontal"||!$.props.collapse&&$.props.mode==="vertical"){L.mouseInChild.value=!1;return}re==null||re(),L.mouseInChild.value=!1,{stop:re}=useTimeoutFn(()=>!ie.value&&$.closeMenu(t.index,g.value),sr.value),de.value&&Tr&&((Pr=L.handleMouseleave)==null||Pr.call(L,!0))};watch(()=>$.props.collapse,Tr=>cr(!!Tr));{const Tr=_r=>{z.value[_r.index]=_r},Pr=_r=>{delete z.value[_r.index]};provide(`subMenu:${n.uid}`,{addSubMenu:Tr,removeSubMenu:Pr,handleMouseleave:pr,mouseInChild:ie,level:L.level+1})}return e({opened:$e}),onMounted(()=>{$.addSubMenu(Et),L.addSubMenu(Et)}),onBeforeUnmount(()=>{L.removeSubMenu(Et),$.removeSubMenu(Et)}),()=>{var Tr;const Pr=[(Tr=r.title)==null?void 0:Tr.call(r),h$1(ElIcon,{class:k.e("icon-arrow"),style:{transform:$e.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&$.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>isString$2(ae.value)?h$1(n.appContext.components[ae.value]):h$1(ae.value)})],_r=$.isMenuPopup?h$1(ElTooltip,{ref:le,visible:$e.value,effect:"light",pure:!0,offset:ur.value,showArrow:!1,persistent:!0,popperClass:Dt.value,placement:oe.value,teleported:de.value,fallbackPlacements:Ve.value,transition:_e.value,gpuAcceleration:!1},{content:()=>{var Mr;return h$1("div",{class:[i.m(jt.value),i.m("popup-container"),Dt.value],onMouseenter:rr=>hr(rr,100),onMouseleave:()=>pr(!0),onFocus:rr=>hr(rr,100)},[h$1("ul",{class:[i.b(),i.m("popup"),i.m(`popup-${oe.value}`)],style:ir.value},[(Mr=r.default)==null?void 0:Mr.call(r)])])},default:()=>h$1("div",{class:k.e("title"),onClick:or},Pr)}):h$1(Fragment,{},[h$1("div",{class:k.e("title"),ref:ue,onClick:or},Pr),h$1(_CollapseTransition,{},{default:()=>{var Mr;return withDirectives(h$1("ul",{role:"menu",class:[i.b(),i.m("inline")],style:ir.value},[(Mr=r.default)==null?void 0:Mr.call(r)]),[[vShow,$e.value]])}})]);return h$1("li",{class:[k.b(),k.is("active",Lt.value),k.is("opened",$e.value),k.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:$e.value,onMouseenter:hr,onMouseleave:()=>pr(),onFocus:hr},[_r])}}});const menuProps=buildProps({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:definePropType(Array),default:()=>mutable([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:iconPropType,default:()=>more_default},popperEffect:{type:String,values:["dark","light"],default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),checkIndexPath=t=>Array.isArray(t)&&t.every(r=>isString$2(r)),menuEmits={close:(t,r)=>isString$2(t)&&checkIndexPath(r),open:(t,r)=>isString$2(t)&&checkIndexPath(r),select:(t,r,e,n)=>isString$2(t)&&checkIndexPath(r)&&isObject$2(e)&&(n===void 0||n instanceof Promise)};var Menu=defineComponent({name:"ElMenu",props:menuProps,emits:menuEmits,setup(t,{emit:r,slots:e,expose:n}){const g=getCurrentInstance(),y=g.appContext.config.globalProperties.$router,i=ref(),k=useNamespace("menu"),$=useNamespace("sub-menu"),L=ref(-1),V=ref(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),z=ref(t.defaultActive),re=ref({}),ie=ref({}),ue=computed(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),le=()=>{const sr=z.value&&re.value[z.value];if(!sr||t.mode==="horizontal"||t.collapse)return;sr.indexPath.forEach(cr=>{const or=ie.value[cr];or&&oe(cr,or.indexPath)})},oe=(sr,er)=>{V.value.includes(sr)||(t.uniqueOpened&&(V.value=V.value.filter(cr=>er.includes(cr))),V.value.push(sr),r("open",sr,er))},ae=sr=>{const er=V.value.indexOf(sr);er!==-1&&V.value.splice(er,1)},Ue=(sr,er)=>{ae(sr),r("close",sr,er)},de=({index:sr,indexPath:er})=>{V.value.includes(sr)?Ue(sr,er):oe(sr,er)},_e=sr=>{(t.mode==="horizontal"||t.collapse)&&(V.value=[]);const{index:er,indexPath:cr}=sr;if(!(isNil(er)||isNil(cr)))if(t.router&&y){const or=sr.route||er,hr=y.push(or).then(pr=>(pr||(z.value=er),pr));r("select",er,cr,{index:er,indexPath:cr,route:or},hr)}else z.value=er,r("select",er,cr,{index:er,indexPath:cr})},Ve=sr=>{const er=re.value,cr=er[sr]||z.value&&er[z.value]||er[t.defaultActive];cr?z.value=cr.index:z.value=sr},$e=sr=>{const er=getComputedStyle(sr),cr=Number.parseInt(er.marginLeft,10),or=Number.parseInt(er.marginRight,10);return sr.offsetWidth+cr+or||0},Lt=()=>{var sr,er;if(!i.value)return-1;const cr=Array.from((er=(sr=i.value)==null?void 0:sr.childNodes)!=null?er:[]).filter(rr=>rr.nodeName!=="#comment"&&(rr.nodeName!=="#text"||rr.nodeValue)),or=64,hr=getComputedStyle(i.value),pr=Number.parseInt(hr.paddingLeft,10),Tr=Number.parseInt(hr.paddingRight,10),Pr=i.value.clientWidth-pr-Tr;let _r=0,Mr=0;return cr.forEach((rr,kr)=>{_r+=$e(rr),_r<=Pr-or&&(Mr=kr+1)}),Mr===cr.length?-1:Mr},jt=sr=>ie.value[sr].indexPath,Et=(sr,er=33.34)=>{let cr;return()=>{cr&&clearTimeout(cr),cr=setTimeout(()=>{sr()},er)}};let ir=!0;const ur=()=>{const sr=()=>{L.value=-1,nextTick(()=>{L.value=Lt()})};ir?sr():Et(sr)(),ir=!1};watch(()=>t.defaultActive,sr=>{re.value[sr]||(z.value=""),Ve(sr)}),watch(()=>t.collapse,sr=>{sr&&(V.value=[])}),watch(re.value,le);let Dt;watchEffect(()=>{t.mode==="horizontal"&&t.ellipsis?Dt=useResizeObserver(i,ur).stop:Dt==null||Dt()});const lr=ref(!1);{const sr=hr=>{ie.value[hr.index]=hr},er=hr=>{delete ie.value[hr.index]};provide("rootMenu",reactive({props:t,openedMenus:V,items:re,subMenus:ie,activeIndex:z,isMenuPopup:ue,addMenuItem:hr=>{re.value[hr.index]=hr},removeMenuItem:hr=>{delete re.value[hr.index]},addSubMenu:sr,removeSubMenu:er,openMenu:oe,closeMenu:Ue,handleMenuItemClick:_e,handleSubMenuClick:de})),provide(`subMenu:${g.uid}`,{addSubMenu:sr,removeSubMenu:er,mouseInChild:lr,level:0})}return onMounted(()=>{t.mode==="horizontal"&&new Menu$1(g.vnode.el,k.namespace.value)}),n({open:er=>{const{indexPath:cr}=ie.value[er];cr.forEach(or=>oe(or,cr))},close:ae,handleResize:ur}),()=>{var sr,er;let cr=(er=(sr=e.default)==null?void 0:sr.call(e))!=null?er:[];const or=[];if(t.mode==="horizontal"&&i.value){const Pr=flattedChildren(cr),_r=L.value===-1?Pr:Pr.slice(0,L.value),Mr=L.value===-1?[]:Pr.slice(L.value);Mr!=null&&Mr.length&&t.ellipsis&&(cr=_r,or.push(h$1(SubMenu,{index:"sub-menu-more",class:$.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>h$1(ElIcon,{class:$.e("icon-more")},{default:()=>h$1(t.ellipsisIcon)}),default:()=>Mr})))}const hr=useMenuCssVar(t,0),pr=t.closeOnClickOutside?[[ClickOutside,()=>{V.value.length&&(lr.value||(V.value.forEach(Pr=>r("close",Pr,jt(Pr))),V.value=[]))}]]:[],Tr=withDirectives(h$1("ul",{key:String(t.collapse),role:"menubar",ref:i,style:hr.value,class:{[k.b()]:!0,[k.m(t.mode)]:!0,[k.m("collapse")]:t.collapse}},[...cr,...or]),pr);return t.collapseTransition&&t.mode==="vertical"?h$1(ElMenuCollapseTransition,()=>Tr):Tr}}});const menuItemProps=buildProps({index:{type:definePropType([String,null]),default:null},route:{type:definePropType([String,Object])},disabled:Boolean}),menuItemEmits={click:t=>isString$2(t.index)&&Array.isArray(t.indexPath)},COMPONENT_NAME$4="ElMenuItem",_sfc_main$A=defineComponent({name:COMPONENT_NAME$4,components:{ElTooltip},props:menuItemProps,emits:menuItemEmits,setup(t,{emit:r}){const e=getCurrentInstance(),n=inject("rootMenu"),g=useNamespace("menu"),y=useNamespace("menu-item");n||throwError(COMPONENT_NAME$4,"can not inject root menu");const{parentMenu:i,indexPath:k}=useMenu(e,toRef(t,"index")),$=inject(`subMenu:${i.value.uid}`);$||throwError(COMPONENT_NAME$4,"can not inject sub menu");const L=computed(()=>t.index===n.activeIndex),V=reactive({index:t.index,indexPath:k,active:L}),z=()=>{t.disabled||(n.handleMenuItemClick({index:t.index,indexPath:k.value,route:t.route}),r("click",V))};return onMounted(()=>{$.addSubMenu(V),n.addMenuItem(V)}),onBeforeUnmount(()=>{$.removeSubMenu(V),n.removeMenuItem(V)}),{parentMenu:i,rootMenu:n,active:L,nsMenu:g,nsMenuItem:y,handleClick:z}}});function _sfc_render$8(t,r,e,n,g,y){const i=resolveComponent("el-tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:r[0]||(r[0]=(...k)=>t.handleClick&&t.handleClick(...k))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(openBlock(),createBlock(i,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:withCtx(()=>[renderSlot(t.$slots,"title")]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(t.nsMenu.be("tooltip","trigger"))},[renderSlot(t.$slots,"default")],2)]),_:3},8,["effect"])):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(t.$slots,"default"),renderSlot(t.$slots,"title")],64))],2)}var MenuItem=_export_sfc$1(_sfc_main$A,[["render",_sfc_render$8],["__file","menu-item.vue"]]);const menuItemGroupProps={title:String},COMPONENT_NAME$3="ElMenuItemGroup",_sfc_main$z=defineComponent({name:COMPONENT_NAME$3,props:menuItemGroupProps,setup(){return{ns:useNamespace("menu-item-group")}}});function _sfc_render$7(t,r,e,n,g,y){return openBlock(),createElementBlock("li",{class:normalizeClass(t.ns.b())},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.$slots.title?renderSlot(t.$slots,"title",{key:1}):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(t.title),1)],64))],2),createBaseVNode("ul",null,[renderSlot(t.$slots,"default")])],2)}var MenuItemGroup=_export_sfc$1(_sfc_main$z,[["render",_sfc_render$7],["__file","menu-item-group.vue"]]);const ElMenu=withInstall(Menu,{MenuItem,MenuItemGroup,SubMenu}),ElMenuItem=withNoopInstall(MenuItem);withNoopInstall(MenuItemGroup);const ElSubMenu=withNoopInstall(SubMenu),elPaginationKey=Symbol("elPaginationKey"),paginationPrevProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:iconPropType}}),paginationPrevEmits={click:t=>t instanceof MouseEvent},_hoisted_1$p=["disabled","aria-label","aria-disabled"],_hoisted_2$g={key:0},__default__$c=defineComponent({name:"ElPaginationPrev"}),_sfc_main$y=defineComponent({...__default__$c,props:paginationPrevProps,emits:paginationPrevEmits,setup(t){const r=t,{t:e}=useLocale(),n=computed(()=>r.disabled||r.currentPage<=1);return(g,y)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-prev",disabled:unref(n),"aria-label":g.prevText||unref(e)("el.pagination.prev"),"aria-disabled":unref(n),onClick:y[0]||(y[0]=i=>g.$emit("click",i))},[g.prevText?(openBlock(),createElementBlock("span",_hoisted_2$g,toDisplayString(g.prevText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.prevIcon)))]),_:1}))],8,_hoisted_1$p))}});var Prev=_export_sfc$1(_sfc_main$y,[["__file","prev.vue"]]);const paginationNextProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:iconPropType}}),_hoisted_1$o=["disabled","aria-label","aria-disabled"],_hoisted_2$f={key:0},__default__$b=defineComponent({name:"ElPaginationNext"}),_sfc_main$x=defineComponent({...__default__$b,props:paginationNextProps,emits:["click"],setup(t){const r=t,{t:e}=useLocale(),n=computed(()=>r.disabled||r.currentPage===r.pageCount||r.pageCount===0);return(g,y)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-next",disabled:unref(n),"aria-label":g.nextText||unref(e)("el.pagination.next"),"aria-disabled":unref(n),onClick:y[0]||(y[0]=i=>g.$emit("click",i))},[g.nextText?(openBlock(),createElementBlock("span",_hoisted_2$f,toDisplayString(g.nextText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.nextIcon)))]),_:1}))],8,_hoisted_1$o))}});var Next=_export_sfc$1(_sfc_main$x,[["__file","next.vue"]]);const selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption(t,r){const e=inject(selectKey),n=inject(selectGroupKey,{disabled:!1}),g=computed(()=>e.props.multiple?V(e.props.modelValue,t.value):V([e.props.modelValue],t.value)),y=computed(()=>{if(e.props.multiple){const ie=e.props.modelValue||[];return!g.value&&ie.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),i=computed(()=>t.label||(isObject$2(t.value)?"":t.value)),k=computed(()=>t.value||t.label||""),$=computed(()=>t.disabled||r.groupDisabled||y.value),L=getCurrentInstance(),V=(ie=[],ue)=>{if(isObject$2(t.value)){const le=e.props.valueKey;return ie&&ie.some(oe=>toRaw(get(oe,le))===get(ue,le))}else return ie&&ie.includes(ue)},z=()=>{!t.disabled&&!n.disabled&&(e.states.hoveringIndex=e.optionsArray.indexOf(L.proxy))},re=ie=>{const ue=new RegExp(escapeStringRegexp(ie),"i");r.visible=ue.test(i.value)||t.created};return watch(()=>i.value,()=>{!t.created&&!e.props.remote&&e.setSelected()}),watch(()=>t.value,(ie,ue)=>{const{remote:le,valueKey:oe}=e.props;if(isEqual(ie,ue)||(e.onOptionDestroy(ue,L.proxy),e.onOptionCreate(L.proxy)),!t.created&&!le){if(oe&&isObject$2(ie)&&isObject$2(ue)&&ie[oe]===ue[oe])return;e.setSelected()}}),watch(()=>n.disabled,()=>{r.groupDisabled=n.disabled},{immediate:!0}),{select:e,currentLabel:i,currentValue:k,itemSelected:g,isDisabled:$,hoverItem:z,updateOption:re}}const _sfc_main$w=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const r=useNamespace("select"),e=useId(),n=computed(()=>[r.be("dropdown","item"),r.is("disabled",unref(k)),r.is("selected",unref(i)),r.is("hovering",unref(re))]),g=reactive({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:y,itemSelected:i,isDisabled:k,select:$,hoverItem:L,updateOption:V}=useOption(t,g),{visible:z,hover:re}=toRefs(g),ie=getCurrentInstance().proxy;$.onOptionCreate(ie),onBeforeUnmount(()=>{const le=ie.value,{selected:oe}=$.states,Ue=($.props.multiple?oe:[oe]).some(de=>de.value===ie.value);nextTick(()=>{$.states.cachedOptions.get(le)===ie&&!Ue&&$.states.cachedOptions.delete(le)}),$.onOptionDestroy(le,ie)});function ue(){t.disabled!==!0&&g.groupDisabled!==!0&&$.handleOptionSelect(ie)}return{ns:r,id:e,containerKls:n,currentLabel:y,itemSelected:i,isDisabled:k,select:$,hoverItem:L,updateOption:V,visible:z,hover:re,selectOptionClick:ue,states:g}}}),_hoisted_1$n=["id","aria-disabled","aria-selected"];function _sfc_render$6(t,r,e,n,g,y){return withDirectives((openBlock(),createElementBlock("li",{id:t.id,class:normalizeClass(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:r[0]||(r[0]=(...i)=>t.hoverItem&&t.hoverItem(...i)),onClick:r[1]||(r[1]=withModifiers((...i)=>t.selectOptionClick&&t.selectOptionClick(...i),["stop"]))},[renderSlot(t.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(t.currentLabel),1)])],42,_hoisted_1$n)),[[vShow,t.visible]])}var Option=_export_sfc$1(_sfc_main$w,[["render",_sfc_render$6],["__file","option.vue"]]);const _sfc_main$v=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=inject(selectKey),r=useNamespace("select"),e=computed(()=>t.props.popperClass),n=computed(()=>t.props.multiple),g=computed(()=>t.props.fitInputWidth),y=ref("");function i(){var k;y.value=`${(k=t.selectRef)==null?void 0:k.offsetWidth}px`}return onMounted(()=>{i(),useResizeObserver(t.selectRef,i)}),{ns:r,minWidth:y,popperClass:e,isMultiple:n,isFitInputWidth:g}}});function _sfc_render$5(t,r,e,n,g,y){return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:normalizeStyle({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.be("dropdown","header"))},[renderSlot(t.$slots,"header")],2)):createCommentVNode("v-if",!0),renderSlot(t.$slots,"default"),t.$slots.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.be("dropdown","footer"))},[renderSlot(t.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6)}var ElSelectMenu=_export_sfc$1(_sfc_main$v,[["render",_sfc_render$5],["__file","select-dropdown.vue"]]);function useInput(t){const r=ref(!1);return{handleCompositionStart:()=>{r.value=!0},handleCompositionUpdate:y=>{const i=y.target.value,k=i[i.length-1]||"";r.value=!isKorean(k)},handleCompositionEnd:y=>{r.value&&(r.value=!1,isFunction$3(t)&&t(y))}}}const MINIMUM_INPUT_WIDTH=11,useSelect=(t,r)=>{const{t:e}=useLocale(),n=useId(),g=useNamespace("select"),y=useNamespace("input"),i=reactive({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1});useDeprecated({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},computed(()=>t.suffixTransition===!1));const k=ref(null),$=ref(null),L=ref(null),V=ref(null),z=ref(null),re=ref(null),ie=ref(null),ue=ref(null),le=ref(null),oe=ref(null),ae=ref(null),Ue=ref(null),{wrapperRef:de,isFocused:_e,handleFocus:Ve,handleBlur:$e}=useFocusController(z,{afterFocus(){t.automaticDropdown&&!Lt.value&&(Lt.value=!0,i.menuVisibleOnFocus=!0)},beforeBlur(Rn){var Xn,zo;return((Xn=L.value)==null?void 0:Xn.isFocusInsideContent(Rn))||((zo=V.value)==null?void 0:zo.isFocusInsideContent(Rn))},afterBlur(){Lt.value=!1,i.menuVisibleOnFocus=!1}}),Lt=ref(!1),jt=ref(),{form:Et,formItem:ir}=useFormItem(),{inputId:ur}=useFormItemInputId(t,{formItemContext:ir}),Dt=computed(()=>t.disabled||(Et==null?void 0:Et.disabled)),lr=computed(()=>t.multiple?isArray$3(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!==""),sr=computed(()=>t.clearable&&!Dt.value&&i.inputHovering&&lr.value),er=computed(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),cr=computed(()=>g.is("reverse",er.value&&Lt.value&&t.suffixTransition)),or=computed(()=>(ir==null?void 0:ir.validateState)||""),hr=computed(()=>ValidateComponentsMap[or.value]),pr=computed(()=>t.remote?300:0),Tr=computed(()=>t.loading?t.loadingText||e("el.select.loading"):t.remote&&!i.inputValue&&i.options.size===0?!1:t.filterable&&i.inputValue&&i.options.size>0&&Pr.value===0?t.noMatchText||e("el.select.noMatch"):i.options.size===0?t.noDataText||e("el.select.noData"):null),Pr=computed(()=>_r.value.filter(Rn=>Rn.visible).length),_r=computed(()=>{const Rn=Array.from(i.options.values()),Xn=[];return i.optionValues.forEach(zo=>{const Na=Rn.findIndex(vs=>vs.value===zo);Na>-1&&Xn.push(Rn[Na])}),Xn.length>=Rn.length?Xn:Rn}),Mr=computed(()=>Array.from(i.cachedOptions.values())),rr=computed(()=>{const Rn=_r.value.filter(Xn=>!Xn.created).some(Xn=>Xn.currentLabel===i.inputValue);return t.filterable&&t.allowCreate&&i.inputValue!==""&&!Rn}),kr=()=>{t.filterable&&isFunction$3(t.filterMethod)||t.filterable&&t.remote&&isFunction$3(t.remoteMethod)||_r.value.forEach(Rn=>{Rn.updateOption(i.inputValue)})},Er=useFormSize(),xr=computed(()=>["small"].includes(Er.value)?"small":"default"),vr=computed({get(){return Lt.value&&Tr.value!==!1},set(Rn){Lt.value=Rn}}),Ir=computed(()=>isArray$3(t.modelValue)?t.modelValue.length===0&&!i.inputValue:t.filterable?!i.inputValue:!0),Or=computed(()=>{var Rn;const Xn=(Rn=t.placeholder)!=null?Rn:e("el.select.placeholder");return t.multiple||!lr.value?Xn:i.selectedLabel});watch(()=>t.modelValue,(Rn,Xn)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(i.inputValue="",Cr("")),fr(),!isEqual(Rn,Xn)&&t.validateEvent&&(ir==null||ir.validate("change").catch(zo=>void 0))},{flush:"post",deep:!0}),watch(()=>Lt.value,Rn=>{Rn?Cr(i.inputValue):(i.inputValue="",i.previousQuery=null,i.isBeforeHide=!0),r("visible-change",Rn)}),watch(()=>i.options.entries(),()=>{var Rn;if(!isClient)return;const Xn=((Rn=k.value)==null?void 0:Rn.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!isUndefined$1(t.modelValue)||!Array.from(Xn).includes(document.activeElement))&&fr(),t.defaultFirstOption&&(t.filterable||t.remote)&&Pr.value&&yr()},{flush:"post"}),watch(()=>i.hoveringIndex,Rn=>{isNumber$1(Rn)&&Rn>-1?jt.value=_r.value[Rn]||{}:jt.value={},_r.value.forEach(Xn=>{Xn.hover=jt.value===Xn})}),watchEffect(()=>{i.isBeforeHide||kr()});const Cr=Rn=>{i.previousQuery!==Rn&&(i.previousQuery=Rn,t.filterable&&isFunction$3(t.filterMethod)?t.filterMethod(Rn):t.filterable&&t.remote&&isFunction$3(t.remoteMethod)&&t.remoteMethod(Rn),t.defaultFirstOption&&(t.filterable||t.remote)&&Pr.value?nextTick(yr):nextTick(Br))},yr=()=>{const Rn=_r.value.filter(Na=>Na.visible&&!Na.disabled&&!Na.states.groupDisabled),Xn=Rn.find(Na=>Na.created),zo=Rn[0];i.hoveringIndex=xn(_r.value,Xn||zo)},fr=()=>{if(t.multiple)i.selectedLabel="";else{const Xn=Sr(t.modelValue);i.selectedLabel=Xn.currentLabel,i.selected=Xn;return}const Rn=[];isArray$3(t.modelValue)&&t.modelValue.forEach(Xn=>{Rn.push(Sr(Xn))}),i.selected=Rn},Sr=Rn=>{let Xn;const zo=toRawType(Rn).toLowerCase()==="object",Na=toRawType(Rn).toLowerCase()==="null",vs=toRawType(Rn).toLowerCase()==="undefined";for(let Pi=i.cachedOptions.size-1;Pi>=0;Pi--){const Ti=Mr.value[Pi];if(zo?get(Ti.value,t.valueKey)===get(Rn,t.valueKey):Ti.value===Rn){Xn={value:Rn,currentLabel:Ti.currentLabel,isDisabled:Ti.isDisabled};break}}if(Xn)return Xn;const Us=zo?Rn.label:!Na&&!vs?Rn:"";return{value:Rn,currentLabel:Us}},Br=()=>{t.multiple?i.selected.length>0?i.hoveringIndex=Math.min(...i.selected.map(Rn=>_r.value.findIndex(Xn=>ca(Xn)===ca(Rn)))):i.hoveringIndex=-1:i.hoveringIndex=_r.value.findIndex(Rn=>ca(Rn)===ca(i.selected))},$r=()=>{i.selectionWidth=$.value.getBoundingClientRect().width},Lr=()=>{i.calculatorWidth=re.value.getBoundingClientRect().width},Gr=()=>{i.collapseItemWidth=ae.value.getBoundingClientRect().width},qr=()=>{var Rn,Xn;(Xn=(Rn=L.value)==null?void 0:Rn.updatePopper)==null||Xn.call(Rn)},Yr=()=>{var Rn,Xn;(Xn=(Rn=V.value)==null?void 0:Rn.updatePopper)==null||Xn.call(Rn)},bn=()=>{i.inputValue.length>0&&!Lt.value&&(Lt.value=!0),Cr(i.inputValue)},wn=Rn=>{if(i.inputValue=Rn.target.value,t.remote)Xr();else return bn()},Xr=debounce(()=>{bn()},pr.value),qn=Rn=>{isEqual(t.modelValue,Rn)||r(CHANGE_EVENT,Rn)},Zr=Rn=>findLastIndex(Rn,Xn=>!i.disabledOptions.has(Xn)),Nn=Rn=>{if(t.multiple&&Rn.code!==EVENT_CODE.delete&&Rn.target.value.length<=0){const Xn=t.modelValue.slice(),zo=Zr(Xn);if(zo<0)return;Xn.splice(zo,1),r(UPDATE_MODEL_EVENT,Xn),qn(Xn)}},Qr=(Rn,Xn)=>{const zo=i.selected.indexOf(Xn);if(zo>-1&&!Dt.value){const Na=t.modelValue.slice();Na.splice(zo,1),r(UPDATE_MODEL_EVENT,Na),qn(Na),r("remove-tag",Xn.value)}Rn.stopPropagation(),Ko()},Mn=Rn=>{Rn.stopPropagation();const Xn=t.multiple?[]:"";if(!isString$2(Xn))for(const zo of i.selected)zo.isDisabled&&Xn.push(zo.value);r(UPDATE_MODEL_EVENT,Xn),qn(Xn),i.hoveringIndex=-1,Lt.value=!1,r("clear"),Ko()},Ln=Rn=>{if(t.multiple){const Xn=(t.modelValue||[]).slice(),zo=xn(Xn,Rn.value);zo>-1?Xn.splice(zo,1):(t.multipleLimit<=0||Xn.length<t.multipleLimit)&&Xn.push(Rn.value),r(UPDATE_MODEL_EVENT,Xn),qn(Xn),Rn.created&&Cr(""),t.filterable&&!t.reserveKeyword&&(i.inputValue="")}else r(UPDATE_MODEL_EVENT,Rn.value),qn(Rn.value),Lt.value=!1;Ko(),!Lt.value&&nextTick(()=>{Pn(Rn)})},xn=(Rn=[],Xn)=>{if(!isObject$2(Xn))return Rn.indexOf(Xn);const zo=t.valueKey;let Na=-1;return Rn.some((vs,Us)=>toRaw(get(vs,zo))===get(Xn,zo)?(Na=Us,!0):!1),Na},Pn=Rn=>{var Xn,zo,Na,vs,Us;const Go=isArray$3(Rn)?Rn[0]:Rn;let Pi=null;if(Go!=null&&Go.value){const Ti=_r.value.filter(Mp=>Mp.value===Go.value);Ti.length>0&&(Pi=Ti[0].$el)}if(L.value&&Pi){const Ti=(vs=(Na=(zo=(Xn=L.value)==null?void 0:Xn.popperRef)==null?void 0:zo.contentRef)==null?void 0:Na.querySelector)==null?void 0:vs.call(Na,`.${g.be("dropdown","wrap")}`);Ti&&scrollIntoView(Ti,Pi)}(Us=Ue.value)==null||Us.handleScroll()},vn=Rn=>{i.options.set(Rn.value,Rn),i.cachedOptions.set(Rn.value,Rn),Rn.disabled&&i.disabledOptions.set(Rn.value,Rn)},hn=(Rn,Xn)=>{i.options.get(Rn)===Xn&&i.options.delete(Rn)},{handleCompositionStart:Zn,handleCompositionUpdate:Oo,handleCompositionEnd:Ho}=useInput(Rn=>wn(Rn)),Do=computed(()=>{var Rn,Xn;return(Xn=(Rn=L.value)==null?void 0:Rn.popperRef)==null?void 0:Xn.contentRef}),Eo=()=>{nextTick(()=>Pn(i.selected))},Ko=()=>{var Rn;(Rn=z.value)==null||Rn.focus()},Ha=()=>{To()},Ts=Rn=>{Mn(Rn)},To=Rn=>{if(Lt.value=!1,_e.value){const Xn=new FocusEvent("focus",Rn);nextTick(()=>$e(Xn))}},Os=()=>{i.inputValue.length>0?i.inputValue="":Lt.value=!1},to=()=>{Dt.value||(i.menuVisibleOnFocus?i.menuVisibleOnFocus=!1:Lt.value=!Lt.value)},ha=()=>{Lt.value?_r.value[i.hoveringIndex]&&Ln(_r.value[i.hoveringIndex]):to()},ca=Rn=>isObject$2(Rn.value)?get(Rn.value,t.valueKey):Rn.value,La=computed(()=>_r.value.filter(Rn=>Rn.visible).every(Rn=>Rn.disabled)),Ka=computed(()=>t.multiple?t.collapseTags?i.selected.slice(0,t.maxCollapseTags):i.selected:[]),Zo=computed(()=>t.multiple?t.collapseTags?i.selected.slice(t.maxCollapseTags):[]:[]),ko=Rn=>{if(!Lt.value){Lt.value=!0;return}if(!(i.options.size===0||Pr.value===0)&&!La.value){Rn==="next"?(i.hoveringIndex++,i.hoveringIndex===i.options.size&&(i.hoveringIndex=0)):Rn==="prev"&&(i.hoveringIndex--,i.hoveringIndex<0&&(i.hoveringIndex=i.options.size-1));const Xn=_r.value[i.hoveringIndex];(Xn.disabled===!0||Xn.states.groupDisabled===!0||!Xn.visible)&&ko(Rn),nextTick(()=>Pn(jt.value))}},za=()=>{if(!$.value)return 0;const Rn=window.getComputedStyle($.value);return Number.parseFloat(Rn.gap||"6px")},Qa=computed(()=>{const Rn=za();return{maxWidth:`${ae.value&&t.maxCollapseTags===1?i.selectionWidth-i.collapseItemWidth-Rn:i.selectionWidth}px`}}),Hc=computed(()=>({maxWidth:`${i.selectionWidth}px`})),Rs=computed(()=>({width:`${Math.max(i.calculatorWidth,MINIMUM_INPUT_WIDTH)}px`}));return t.multiple&&!isArray$3(t.modelValue)&&r(UPDATE_MODEL_EVENT,[]),!t.multiple&&isArray$3(t.modelValue)&&r(UPDATE_MODEL_EVENT,""),useResizeObserver($,$r),useResizeObserver(re,Lr),useResizeObserver(le,qr),useResizeObserver(de,qr),useResizeObserver(oe,Yr),useResizeObserver(ae,Gr),onMounted(()=>{fr()}),{inputId:ur,contentId:n,nsSelect:g,nsInput:y,states:i,isFocused:_e,expanded:Lt,optionsArray:_r,hoverOption:jt,selectSize:Er,filteredOptionsCount:Pr,resetCalculatorWidth:Lr,updateTooltip:qr,updateTagTooltip:Yr,debouncedOnInputChange:Xr,onInput:wn,deletePrevTag:Nn,deleteTag:Qr,deleteSelected:Mn,handleOptionSelect:Ln,scrollToOption:Pn,hasModelValue:lr,shouldShowPlaceholder:Ir,currentPlaceholder:Or,showClose:sr,iconComponent:er,iconReverse:cr,validateState:or,validateIcon:hr,showNewOption:rr,updateOptions:kr,collapseTagSize:xr,setSelected:fr,selectDisabled:Dt,emptyText:Tr,handleCompositionStart:Zn,handleCompositionUpdate:Oo,handleCompositionEnd:Ho,onOptionCreate:vn,onOptionDestroy:hn,handleMenuEnter:Eo,handleFocus:Ve,focus:Ko,blur:Ha,handleBlur:$e,handleClearClick:Ts,handleClickOutside:To,handleEsc:Os,toggleMenu:to,selectOption:ha,getValueKey:ca,navigateOptions:ko,dropdownMenuVisible:vr,showTagList:Ka,collapseTagList:Zo,tagStyle:Qa,collapseTagStyle:Hc,inputStyle:Rs,popperRef:Do,inputRef:z,tooltipRef:L,tagTooltipRef:V,calculatorRef:re,prefixRef:ie,suffixRef:ue,selectRef:k,wrapperRef:de,selectionRef:$,scrollbarRef:Ue,menuRef:le,tagMenuRef:oe,collapseItemRef:ae}};var ElOptions=defineComponent({name:"ElOptions",setup(t,{slots:r}){const e=inject(selectKey);let n=[];return()=>{var g,y;const i=(g=r.default)==null?void 0:g.call(r),k=[];function $(L){isArray$3(L)&&L.forEach(V=>{var z,re,ie,ue;const le=(z=(V==null?void 0:V.type)||{})==null?void 0:z.name;le==="ElOptionGroup"?$(!isString$2(V.children)&&!isArray$3(V.children)&&isFunction$3((re=V.children)==null?void 0:re.default)?(ie=V.children)==null?void 0:ie.default():V.children):le==="ElOption"?k.push((ue=V.props)==null?void 0:ue.value):isArray$3(V.children)&&$(V.children)})}return i.length&&$((y=i[0])==null?void 0:y.children),isEqual(k,n)||(n=k,e&&(e.states.optionValues=k)),i}}});const SelectProps=buildProps({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:useSizeProp,effect:{type:definePropType(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:definePropType(String),values:Ee,default:"bottom-start"},fallbackPlacements:{type:definePropType(Array),default:["bottom-start","top-start","right","left"]},ariaLabel:{type:String,default:void 0}}),COMPONENT_NAME$2="ElSelect",_sfc_main$u=defineComponent({name:COMPONENT_NAME$2,componentName:COMPONENT_NAME$2,components:{ElInput,ElSelectMenu,ElOption:Option,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:SelectProps,emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:r}){const e=useSelect(t,r);return provide(selectKey,reactive({props:t,states:e.states,optionsArray:e.optionsArray,handleOptionSelect:e.handleOptionSelect,onOptionCreate:e.onOptionCreate,onOptionDestroy:e.onOptionDestroy,selectRef:e.selectRef,setSelected:e.setSelected})),{...e}}}),_hoisted_1$m=["id","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],_hoisted_2$e=["textContent"];function _sfc_render$4(t,r,e,n,g,y){const i=resolveComponent("el-tag"),k=resolveComponent("el-tooltip"),$=resolveComponent("el-icon"),L=resolveComponent("el-option"),V=resolveComponent("el-options"),z=resolveComponent("el-scrollbar"),re=resolveComponent("el-select-menu"),ie=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:r[14]||(r[14]=ue=>t.states.inputHovering=!0),onMouseleave:r[15]||(r[15]=ue=>t.states.inputHovering=!1),onClick:r[16]||(r[16]=withModifiers((...ue)=>t.toggleMenu&&t.toggleMenu(...ue),["stop"]))},[createVNode(k,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:r[13]||(r[13]=ue=>t.states.isBeforeHide=!1)},{default:withCtx(()=>{var ue;return[createBaseVNode("div",{ref:"wrapperRef",class:normalizeClass([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,ref:"prefixRef",class:normalizeClass(t.nsSelect.e("prefix"))},[renderSlot(t.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?renderSlot(t.$slots,"tag",{key:0},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.showTagList,le=>(openBlock(),createElementBlock("div",{key:t.getValueKey(le),class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{closable:!t.selectDisabled&&!le.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:normalizeStyle(t.tagStyle),onClose:oe=>t.deleteTag(oe,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},toDisplayString(le.currentLabel),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(openBlock(),createBlock(k,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:withCtx(()=>[createBaseVNode("div",{ref:"collapseItemRef",class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:normalizeStyle(t.collapseTagStyle)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))}," + "+toDisplayString(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:withCtx(()=>[createBaseVNode("div",{ref:"tagMenuRef",class:normalizeClass(t.nsSelect.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.collapseTagList,le=>(openBlock(),createElementBlock("div",{key:t.getValueKey(le),class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{class:"in-tooltip",closable:!t.selectDisabled&&!le.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:oe=>t.deleteTag(oe,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},toDisplayString(le.currentLabel),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):createCommentVNode("v-if",!0)]):createCommentVNode("v-if",!0),t.selectDisabled?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[withDirectives(createBaseVNode("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":r[0]||(r[0]=le=>t.states.inputValue=le),type:"text",class:normalizeClass([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:normalizeStyle(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((ue=t.hoverOption)==null?void 0:ue.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:r[1]||(r[1]=(...le)=>t.handleFocus&&t.handleFocus(...le)),onBlur:r[2]||(r[2]=(...le)=>t.handleBlur&&t.handleBlur(...le)),onKeydown:[r[3]||(r[3]=withKeys(withModifiers(le=>t.navigateOptions("next"),["stop","prevent"]),["down"])),r[4]||(r[4]=withKeys(withModifiers(le=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),r[5]||(r[5]=withKeys(withModifiers((...le)=>t.handleEsc&&t.handleEsc(...le),["stop","prevent"]),["esc"])),r[6]||(r[6]=withKeys(withModifiers((...le)=>t.selectOption&&t.selectOption(...le),["stop","prevent"]),["enter"])),r[7]||(r[7]=withKeys(withModifiers((...le)=>t.deletePrevTag&&t.deletePrevTag(...le),["stop"]),["delete"]))],onCompositionstart:r[8]||(r[8]=(...le)=>t.handleCompositionStart&&t.handleCompositionStart(...le)),onCompositionupdate:r[9]||(r[9]=(...le)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...le)),onCompositionend:r[10]||(r[10]=(...le)=>t.handleCompositionEnd&&t.handleCompositionEnd(...le)),onInput:r[11]||(r[11]=(...le)=>t.onInput&&t.onInput(...le)),onClick:r[12]||(r[12]=withModifiers((...le)=>t.toggleMenu&&t.toggleMenu(...le),["stop"]))},null,46,_hoisted_1$m),[[vModelText,t.states.inputValue]]),t.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(t.nsSelect.e("input-calculator")),textContent:toDisplayString(t.states.inputValue)},null,10,_hoisted_2$e)):createCommentVNode("v-if",!0)],2)),t.shouldShowPlaceholder?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[createBaseVNode("span",null,toDisplayString(t.currentPlaceholder),1)],2)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{ref:"suffixRef",class:normalizeClass(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(openBlock(),createBlock($,{key:0,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.showClose&&t.clearIcon?(openBlock(),createBlock($,{key:1,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),t.validateState&&t.validateIcon?(openBlock(),createBlock($,{key:2,class:normalizeClass([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)]}),content:withCtx(()=>[createVNode(re,{ref:"menuRef"},{default:withCtx(()=>[t.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.nsSelect.be("dropdown","header"))},[renderSlot(t.$slots,"header")],2)):createCommentVNode("v-if",!0),withDirectives(createVNode(z,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:normalizeClass([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:withCtx(()=>[t.showNewOption?(openBlock(),createBlock(L,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(V,null,{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[vShow,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.nsSelect.be("dropdown","loading"))},[renderSlot(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.nsSelect.be("dropdown","empty"))},[renderSlot(t.$slots,"empty",{},()=>[createBaseVNode("span",null,toDisplayString(t.emptyText),1)])],2)):createCommentVNode("v-if",!0),t.$slots.footer?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(t.nsSelect.be("dropdown","footer"))},[renderSlot(t.$slots,"footer")],2)):createCommentVNode("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],34)),[[ie,t.handleClickOutside,t.popperRef]])}var Select=_export_sfc$1(_sfc_main$u,[["render",_sfc_render$4],["__file","select.vue"]]);const _sfc_main$t=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const r=useNamespace("select"),e=ref(null),n=getCurrentInstance(),g=ref([]);provide(selectGroupKey,reactive({...toRefs(t)}));const y=computed(()=>g.value.some($=>$.visible===!0)),i=$=>{const L=[];return isArray$3($.children)&&$.children.forEach(V=>{var z,re;V.type&&V.type.name==="ElOption"&&V.component&&V.component.proxy?L.push(V.component.proxy):(z=V.children)!=null&&z.length?L.push(...i(V)):(re=V.component)!=null&&re.subTree&&L.push(...i(V.component.subTree))}),L},k=()=>{g.value=i(n.subTree)};return onMounted(()=>{k()}),useMutationObserver(e,k,{attributes:!0,subtree:!0,childList:!0}),{groupRef:e,visible:y,ns:r}}});function _sfc_render$3(t,r,e,n,g,y){return withDirectives((openBlock(),createElementBlock("ul",{ref:"groupRef",class:normalizeClass(t.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(t.ns.be("group","title"))},toDisplayString(t.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(t.ns.b("group"))},[renderSlot(t.$slots,"default")],2)])],2)),[[vShow,t.visible]])}var OptionGroup=_export_sfc$1(_sfc_main$t,[["render",_sfc_render$3],["__file","option-group.vue"]]);const ElSelect=withInstall(Select,{Option,OptionGroup}),ElOption=withNoopInstall(Option);withNoopInstall(OptionGroup);const usePagination=()=>inject(elPaginationKey,{}),paginationSizesProps=buildProps({pageSize:{type:Number,required:!0},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:componentSizes}}),__default__$a=defineComponent({name:"ElPaginationSizes"}),_sfc_main$s=defineComponent({...__default__$a,props:paginationSizesProps,emits:["page-size-change"],setup(t,{emit:r}){const e=t,{t:n}=useLocale(),g=useNamespace("pagination"),y=usePagination(),i=ref(e.pageSize);watch(()=>e.pageSizes,(L,V)=>{if(!isEqual(L,V)&&Array.isArray(L)){const z=L.includes(e.pageSize)?e.pageSize:e.pageSizes[0];r("page-size-change",z)}}),watch(()=>e.pageSize,L=>{i.value=L});const k=computed(()=>e.pageSizes);function $(L){var V;L!==i.value&&(i.value=L,(V=y.handleSizeChange)==null||V.call(y,Number(L)))}return(L,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(g).e("sizes"))},[createVNode(unref(ElSelect),{"model-value":i.value,disabled:L.disabled,"popper-class":L.popperClass,size:L.size,teleported:L.teleported,"validate-event":!1,onChange:$},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(k),z=>(openBlock(),createBlock(unref(ElOption),{key:z,value:z,label:z+unref(n)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var Sizes=_export_sfc$1(_sfc_main$s,[["__file","sizes.vue"]]);const paginationJumperProps=buildProps({size:{type:String,values:componentSizes}}),_hoisted_1$l=["disabled"],__default__$9=defineComponent({name:"ElPaginationJumper"}),_sfc_main$r=defineComponent({...__default__$9,props:paginationJumperProps,setup(t){const{t:r}=useLocale(),e=useNamespace("pagination"),{pageCount:n,disabled:g,currentPage:y,changeEvent:i}=usePagination(),k=ref(),$=computed(()=>{var z;return(z=k.value)!=null?z:y==null?void 0:y.value});function L(z){k.value=z?+z:""}function V(z){z=Math.trunc(+z),i==null||i(z),k.value=void 0}return(z,re)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(e).e("jump")),disabled:unref(g)},[createBaseVNode("span",{class:normalizeClass([unref(e).e("goto")])},toDisplayString(unref(r)("el.pagination.goto")),3),createVNode(unref(ElInput),{size:z.size,class:normalizeClass([unref(e).e("editor"),unref(e).is("in-pagination")]),min:1,max:unref(n),disabled:unref(g),"model-value":unref($),"validate-event":!1,label:unref(r)("el.pagination.page"),type:"number","onUpdate:modelValue":L,onChange:V},null,8,["size","class","max","disabled","model-value","label"]),createBaseVNode("span",{class:normalizeClass([unref(e).e("classifier")])},toDisplayString(unref(r)("el.pagination.pageClassifier")),3)],10,_hoisted_1$l))}});var Jumper=_export_sfc$1(_sfc_main$r,[["__file","jumper.vue"]]);const paginationTotalProps=buildProps({total:{type:Number,default:1e3}}),_hoisted_1$k=["disabled"],__default__$8=defineComponent({name:"ElPaginationTotal"}),_sfc_main$q=defineComponent({...__default__$8,props:paginationTotalProps,setup(t){const{t:r}=useLocale(),e=useNamespace("pagination"),{disabled:n}=usePagination();return(g,y)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(e).e("total")),disabled:unref(n)},toDisplayString(unref(r)("el.pagination.total",{total:g.total})),11,_hoisted_1$k))}});var Total=_export_sfc$1(_sfc_main$q,[["__file","total.vue"]]);const paginationPagerProps=buildProps({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),_hoisted_1$j=["onKeyup"],_hoisted_2$d=["aria-current","aria-label","tabindex"],_hoisted_3$a=["tabindex","aria-label"],_hoisted_4$7=["aria-current","aria-label","tabindex"],_hoisted_5$6=["tabindex","aria-label"],_hoisted_6$2=["aria-current","aria-label","tabindex"],__default__$7=defineComponent({name:"ElPaginationPager"}),_sfc_main$p=defineComponent({...__default__$7,props:paginationPagerProps,emits:["change"],setup(t,{emit:r}){const e=t,n=useNamespace("pager"),g=useNamespace("icon"),{t:y}=useLocale(),i=ref(!1),k=ref(!1),$=ref(!1),L=ref(!1),V=ref(!1),z=ref(!1),re=computed(()=>{const _e=e.pagerCount,Ve=(_e-1)/2,$e=Number(e.currentPage),Lt=Number(e.pageCount);let jt=!1,Et=!1;Lt>_e&&($e>_e-Ve&&(jt=!0),$e<Lt-Ve&&(Et=!0));const ir=[];if(jt&&!Et){const ur=Lt-(_e-2);for(let Dt=ur;Dt<Lt;Dt++)ir.push(Dt)}else if(!jt&&Et)for(let ur=2;ur<_e;ur++)ir.push(ur);else if(jt&&Et){const ur=Math.floor(_e/2)-1;for(let Dt=$e-ur;Dt<=$e+ur;Dt++)ir.push(Dt)}else for(let ur=2;ur<Lt;ur++)ir.push(ur);return ir}),ie=computed(()=>["more","btn-quickprev",g.b(),n.is("disabled",e.disabled)]),ue=computed(()=>["more","btn-quicknext",g.b(),n.is("disabled",e.disabled)]),le=computed(()=>e.disabled?-1:0);watchEffect(()=>{const _e=(e.pagerCount-1)/2;i.value=!1,k.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-_e&&(i.value=!0),e.currentPage<e.pageCount-_e&&(k.value=!0))});function oe(_e=!1){e.disabled||(_e?$.value=!0:L.value=!0)}function ae(_e=!1){_e?V.value=!0:z.value=!0}function Ue(_e){const Ve=_e.target;if(Ve.tagName.toLowerCase()==="li"&&Array.from(Ve.classList).includes("number")){const $e=Number(Ve.textContent);$e!==e.currentPage&&r("change",$e)}else Ve.tagName.toLowerCase()==="li"&&Array.from(Ve.classList).includes("more")&&de(_e)}function de(_e){const Ve=_e.target;if(Ve.tagName.toLowerCase()==="ul"||e.disabled)return;let $e=Number(Ve.textContent);const Lt=e.pageCount,jt=e.currentPage,Et=e.pagerCount-2;Ve.className.includes("more")&&(Ve.className.includes("quickprev")?$e=jt-Et:Ve.className.includes("quicknext")&&($e=jt+Et)),Number.isNaN(+$e)||($e<1&&($e=1),$e>Lt&&($e=Lt)),$e!==jt&&r("change",$e)}return(_e,Ve)=>(openBlock(),createElementBlock("ul",{class:normalizeClass(unref(n).b()),onClick:de,onKeyup:withKeys(Ue,["enter"])},[_e.pageCount>0?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass([[unref(n).is("active",_e.currentPage===1),unref(n).is("disabled",_e.disabled)],"number"]),"aria-current":_e.currentPage===1,"aria-label":unref(y)("el.pagination.currentPage",{pager:1}),tabindex:unref(le)}," 1 ",10,_hoisted_2$d)):createCommentVNode("v-if",!0),i.value?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(unref(ie)),tabindex:unref(le),"aria-label":unref(y)("el.pagination.prevPages",{pager:_e.pagerCount-2}),onMouseenter:Ve[0]||(Ve[0]=$e=>oe(!0)),onMouseleave:Ve[1]||(Ve[1]=$e=>$.value=!1),onFocus:Ve[2]||(Ve[2]=$e=>ae(!0)),onBlur:Ve[3]||(Ve[3]=$e=>V.value=!1)},[($.value||V.value)&&!_e.disabled?(openBlock(),createBlock(unref(d_arrow_left_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_3$a)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),$e=>(openBlock(),createElementBlock("li",{key:$e,class:normalizeClass([[unref(n).is("active",_e.currentPage===$e),unref(n).is("disabled",_e.disabled)],"number"]),"aria-current":_e.currentPage===$e,"aria-label":unref(y)("el.pagination.currentPage",{pager:$e}),tabindex:unref(le)},toDisplayString($e),11,_hoisted_4$7))),128)),k.value?(openBlock(),createElementBlock("li",{key:2,class:normalizeClass(unref(ue)),tabindex:unref(le),"aria-label":unref(y)("el.pagination.nextPages",{pager:_e.pagerCount-2}),onMouseenter:Ve[4]||(Ve[4]=$e=>oe()),onMouseleave:Ve[5]||(Ve[5]=$e=>L.value=!1),onFocus:Ve[6]||(Ve[6]=$e=>ae()),onBlur:Ve[7]||(Ve[7]=$e=>z.value=!1)},[(L.value||z.value)&&!_e.disabled?(openBlock(),createBlock(unref(d_arrow_right_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_5$6)):createCommentVNode("v-if",!0),_e.pageCount>1?(openBlock(),createElementBlock("li",{key:3,class:normalizeClass([[unref(n).is("active",_e.currentPage===_e.pageCount),unref(n).is("disabled",_e.disabled)],"number"]),"aria-current":_e.currentPage===_e.pageCount,"aria-label":unref(y)("el.pagination.currentPage",{pager:_e.pageCount}),tabindex:unref(le)},toDisplayString(_e.pageCount),11,_hoisted_6$2)):createCommentVNode("v-if",!0)],42,_hoisted_1$j))}});var Pager=_export_sfc$1(_sfc_main$p,[["__file","pager.vue"]]);const isAbsent=t=>typeof t!="number",paginationProps=buildProps({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>isNumber$1(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:iconPropType,default:()=>arrow_left_default},nextText:{type:String,default:""},nextIcon:{type:iconPropType,default:()=>arrow_right_default},teleported:{type:Boolean,default:!0},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),paginationEmits={"update:current-page":t=>isNumber$1(t),"update:page-size":t=>isNumber$1(t),"size-change":t=>isNumber$1(t),change:(t,r)=>isNumber$1(t)&&isNumber$1(r),"current-change":t=>isNumber$1(t),"prev-click":t=>isNumber$1(t),"next-click":t=>isNumber$1(t)},componentName="ElPagination";var Pagination=defineComponent({name:componentName,props:paginationProps,emits:paginationEmits,setup(t,{emit:r,slots:e}){const{t:n}=useLocale(),g=useNamespace("pagination"),y=getCurrentInstance().vnode.props||{},i="onUpdate:currentPage"in y||"onUpdate:current-page"in y||"onCurrentChange"in y,k="onUpdate:pageSize"in y||"onUpdate:page-size"in y||"onSizeChange"in y,$=computed(()=>{if(isAbsent(t.total)&&isAbsent(t.pageCount)||!isAbsent(t.currentPage)&&!i)return!1;if(t.layout.includes("sizes")){if(isAbsent(t.pageCount)){if(!isAbsent(t.total)&&!isAbsent(t.pageSize)&&!k)return!1}else if(!k)return!1}return!0}),L=ref(isAbsent(t.defaultPageSize)?10:t.defaultPageSize),V=ref(isAbsent(t.defaultCurrentPage)?1:t.defaultCurrentPage),z=computed({get(){return isAbsent(t.pageSize)?L.value:t.pageSize},set(de){isAbsent(t.pageSize)&&(L.value=de),k&&(r("update:page-size",de),r("size-change",de))}}),re=computed(()=>{let de=0;return isAbsent(t.pageCount)?isAbsent(t.total)||(de=Math.max(1,Math.ceil(t.total/z.value))):de=t.pageCount,de}),ie=computed({get(){return isAbsent(t.currentPage)?V.value:t.currentPage},set(de){let _e=de;de<1?_e=1:de>re.value&&(_e=re.value),isAbsent(t.currentPage)&&(V.value=_e),i&&(r("update:current-page",_e),r("current-change",_e))}});watch(re,de=>{ie.value>de&&(ie.value=de)}),watch([ie,z],de=>{r("change",...de)},{flush:"post"});function ue(de){ie.value=de}function le(de){z.value=de;const _e=re.value;ie.value>_e&&(ie.value=_e)}function oe(){t.disabled||(ie.value-=1,r("prev-click",ie.value))}function ae(){t.disabled||(ie.value+=1,r("next-click",ie.value))}function Ue(de,_e){de&&(de.props||(de.props={}),de.props.class=[de.props.class,_e].join(" "))}return provide(elPaginationKey,{pageCount:re,disabled:computed(()=>t.disabled),currentPage:ie,changeEvent:ue,handleSizeChange:le}),()=>{var de,_e;if(!$.value)return n("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&re.value<=1)return null;const Ve=[],$e=[],Lt=h$1("div",{class:g.e("rightwrapper")},$e),jt={prev:h$1(Prev,{disabled:t.disabled,currentPage:ie.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:oe}),jumper:h$1(Jumper,{size:t.small?"small":"default"}),pager:h$1(Pager,{currentPage:ie.value,pageCount:re.value,pagerCount:t.pagerCount,onChange:ue,disabled:t.disabled}),next:h$1(Next,{disabled:t.disabled,currentPage:ie.value,pageCount:re.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:ae}),sizes:h$1(Sizes,{pageSize:z.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:t.small?"small":"default"}),slot:(_e=(de=e==null?void 0:e.default)==null?void 0:de.call(e))!=null?_e:null,total:h$1(Total,{total:isAbsent(t.total)?0:t.total})},Et=t.layout.split(",").map(ur=>ur.trim());let ir=!1;return Et.forEach(ur=>{if(ur==="->"){ir=!0;return}ir?$e.push(jt[ur]):Ve.push(jt[ur])}),Ue(Ve[0],g.is("first")),Ue(Ve[Ve.length-1],g.is("last")),ir&&$e.length>0&&(Ue($e[0],g.is("first")),Ue($e[$e.length-1],g.is("last")),Ve.push(Lt)),h$1("div",{class:[g.b(),g.is("background",t.background),{[g.m("small")]:t.small}]},Ve)}}});const ElPagination=withInstall(Pagination),progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:t=>`${t}%`}}),_hoisted_1$i=["aria-valuenow"],_hoisted_2$c={viewBox:"0 0 100 100"},_hoisted_3$9=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$6=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$5={key:0},__default__$6=defineComponent({name:"ElProgress"}),_sfc_main$o=defineComponent({...__default__$6,props:progressProps,setup(t){const r=t,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=useNamespace("progress"),g=computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:Ue(r.percentage)})),y=computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),i=computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(y.value)/2}`,10):0),k=computed(()=>{const de=i.value,_e=r.type==="dashboard";return`
          M 50 50
          m 0 ${_e?"":"-"}${de}
          a ${de} ${de} 0 1 1 0 ${_e?"-":""}${de*2}
          a ${de} ${de} 0 1 1 0 ${_e?"":"-"}${de*2}
          `}),$=computed(()=>2*Math.PI*i.value),L=computed(()=>r.type==="dashboard"?.75:1),V=computed(()=>`${-1*$.value*(1-L.value)/2}px`),z=computed(()=>({strokeDasharray:`${$.value*L.value}px, ${$.value}px`,strokeDashoffset:V.value})),re=computed(()=>({strokeDasharray:`${$.value*L.value*(r.percentage/100)}px, ${$.value}px`,strokeDashoffset:V.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),ie=computed(()=>{let de;return r.color?de=Ue(r.percentage):de=e[r.status]||e.default,de}),ue=computed(()=>r.status==="warning"?warning_filled_default:r.type==="line"?r.status==="success"?circle_check_default:circle_close_default:r.status==="success"?check_default:close_default),le=computed(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),oe=computed(()=>r.format(r.percentage));function ae(de){const _e=100/de.length;return de.map(($e,Lt)=>isString$2($e)?{color:$e,percentage:(Lt+1)*_e}:$e).sort(($e,Lt)=>$e.percentage-Lt.percentage)}const Ue=de=>{var _e;const{color:Ve}=r;if(isFunction$3(Ve))return Ve(de);if(isString$2(Ve))return Ve;{const $e=ae(Ve);for(const Lt of $e)if(Lt.percentage>de)return Lt.color;return(_e=$e[$e.length-1])==null?void 0:_e.color}};return(de,_e)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(de.type),unref(n).is(de.status),{[unref(n).m("without-text")]:!de.showText,[unref(n).m("text-inside")]:de.textInside}]),role:"progressbar","aria-valuenow":de.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[de.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(n).be("bar","outer")),style:normalizeStyle({height:`${de.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(n).be("bar","inner"),{[unref(n).bem("bar","inner","indeterminate")]:de.indeterminate},{[unref(n).bem("bar","inner","striped")]:de.striped},{[unref(n).bem("bar","inner","striped-flow")]:de.stripedFlow}]),style:normalizeStyle(unref(g))},[(de.showText||de.$slots.default)&&de.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).be("bar","innerText"))},[renderSlot(de.$slots,"default",{percentage:de.percentage},()=>[createBaseVNode("span",null,toDisplayString(unref(oe)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(n).b("circle")),style:normalizeStyle({height:`${de.width}px`,width:`${de.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$c,[createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","track")),d:unref(k),stroke:`var(${unref(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":de.strokeLinecap,"stroke-width":unref(y),fill:"none",style:normalizeStyle(unref(z))},null,14,_hoisted_3$9),createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","path")),d:unref(k),stroke:unref(ie),fill:"none",opacity:de.percentage?1:0,"stroke-linecap":de.strokeLinecap,"stroke-width":unref(y),style:normalizeStyle(unref(re))},null,14,_hoisted_4$6)]))],6)),(de.showText||de.$slots.default)&&!de.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(n).e("text")),style:normalizeStyle({fontSize:`${unref(le)}px`})},[renderSlot(de.$slots,"default",{percentage:de.percentage},()=>[de.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$5,toDisplayString(unref(oe)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$i))}});var Progress=_export_sfc$1(_sfc_main$o,[["__file","progress.vue"]]);const ElProgress=withInstall(Progress),spaceItemProps=buildProps({prefixCls:{type:String}}),SpaceItem=defineComponent({name:"ElSpaceItem",props:spaceItemProps,setup(t,{slots:r}){const e=useNamespace("space"),n=computed(()=>`${t.prefixCls||e.b()}__item`);return()=>h$1("div",{class:n.value},renderSlot(r,"default"))}}),SIZE_MAP={small:8,default:12,large:16};function useSpace(t){const r=useNamespace("space"),e=computed(()=>[r.b(),r.m(t.direction),t.class]),n=ref(0),g=ref(0),y=computed(()=>{const k=t.wrap||t.fill?{flexWrap:"wrap"}:{},$={alignItems:t.alignment},L={rowGap:`${g.value}px`,columnGap:`${n.value}px`};return[k,$,L,t.style]}),i=computed(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return watchEffect(()=>{const{size:k="small",wrap:$,direction:L,fill:V}=t;if(isArray$3(k)){const[z=0,re=0]=k;n.value=z,g.value=re}else{let z;isNumber$1(k)?z=k:z=SIZE_MAP[k||"small"]||SIZE_MAP.small,($||V)&&L==="horizontal"?n.value=g.value=z:L==="horizontal"?(n.value=z,g.value=0):(g.value=z,n.value=0)}}),{classes:e,containerStyle:y,itemStyle:i}}const spaceProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:definePropType([String,Object,Array]),default:""},style:{type:definePropType([String,Array,Object]),default:""},alignment:{type:definePropType(String),default:"center"},prefixCls:{type:String},spacer:{type:definePropType([Object,String,Number,Array]),default:null,validator:t=>isVNode(t)||isNumber$1(t)||isString$2(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:componentSizes,validator:t=>isNumber$1(t)||isArray$3(t)&&t.length===2&&t.every(isNumber$1)}}),Space=defineComponent({name:"ElSpace",props:spaceProps,setup(t,{slots:r}){const{classes:e,containerStyle:n,itemStyle:g}=useSpace(t);function y(i,k="",$=[]){const{prefixCls:L}=t;return i.forEach((V,z)=>{isFragment(V)?isArray$3(V.children)&&V.children.forEach((re,ie)=>{isFragment(re)&&isArray$3(re.children)?y(re.children,`${k+ie}-`,$):$.push(createVNode(SpaceItem,{style:g.value,prefixCls:L,key:`nested-${k+ie}`},{default:()=>[re]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}):isValidElementNode(V)&&$.push(createVNode(SpaceItem,{style:g.value,prefixCls:L,key:`LoopKey${k+z}`},{default:()=>[V]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}),$}return()=>{var i;const{spacer:k,direction:$}=t,L=renderSlot(r,"default",{key:0},()=>[]);if(((i=L.children)!=null?i:[]).length===0)return null;if(isArray$3(L.children)){let V=y(L.children);if(k){const z=V.length-1;V=V.reduce((re,ie,ue)=>{const le=[...re,ie];return ue!==z&&le.push(createVNode("span",{style:[g.value,$==="vertical"?"width: 100%":null],key:ue},[isVNode(k)?k:createTextVNode(k,PatchFlags.TEXT)],PatchFlags.STYLE)),le},[])}return createVNode("div",{class:e.value,style:n.value},V,PatchFlags.STYLE|PatchFlags.CLASS)}return L.children}}}),ElSpace=withInstall(Space),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1},label:{type:String,default:void 0}}),switchEmits={[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[CHANGE_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[INPUT_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t)},_hoisted_1$h=["onClick"],_hoisted_2$b=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$8=["aria-hidden"],_hoisted_4$5=["aria-hidden"],_hoisted_5$4=["aria-hidden"],COMPONENT_NAME$1="ElSwitch",__default__$5=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$n=defineComponent({...__default__$5,props:switchProps,emits:switchEmits,setup(t,{expose:r,emit:e}){const n=t,g=getCurrentInstance(),{formItem:y}=useFormItem(),i=useFormSize(),k=useNamespace("switch");(jt=>{jt.forEach(Et=>{useDeprecated({from:Et[0],replacement:Et[1],scope:COMPONENT_NAME$1,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},computed(()=>{var ir;return!!((ir=g.vnode.props)!=null&&ir[Et[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:L}=useFormItemInputId(n,{formItemContext:y}),V=useFormDisabled(computed(()=>n.loading)),z=ref(n.modelValue!==!1),re=ref(),ie=ref(),ue=computed(()=>[k.b(),k.m(i.value),k.is("disabled",V.value),k.is("checked",de.value)]),le=computed(()=>[k.e("label"),k.em("label","left"),k.is("active",!de.value)]),oe=computed(()=>[k.e("label"),k.em("label","right"),k.is("active",de.value)]),ae=computed(()=>({width:addUnit(n.width)}));watch(()=>n.modelValue,()=>{z.value=!0}),watch(()=>n.value,()=>{z.value=!1});const Ue=computed(()=>z.value?n.modelValue:n.value),de=computed(()=>Ue.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(Ue.value)||(e(UPDATE_MODEL_EVENT,n.inactiveValue),e(CHANGE_EVENT,n.inactiveValue),e(INPUT_EVENT,n.inactiveValue)),watch(de,jt=>{var Et;re.value.checked=jt,n.validateEvent&&((Et=y==null?void 0:y.validate)==null||Et.call(y,"change").catch(ir=>void 0))});const _e=()=>{const jt=de.value?n.inactiveValue:n.activeValue;e(UPDATE_MODEL_EVENT,jt),e(CHANGE_EVENT,jt),e(INPUT_EVENT,jt),nextTick(()=>{re.value.checked=de.value})},Ve=()=>{if(V.value)return;const{beforeChange:jt}=n;if(!jt){_e();return}const Et=jt();[isPromise(Et),isBoolean$1(Et)].includes(!0)||throwError(COMPONENT_NAME$1,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(Et)?Et.then(ur=>{ur&&_e()}).catch(ur=>{}):Et&&_e()},$e=computed(()=>k.cssVarBlock({...n.activeColor?{"on-color":n.activeColor}:null,...n.inactiveColor?{"off-color":n.inactiveColor}:null,...n.borderColor?{"border-color":n.borderColor}:null})),Lt=()=>{var jt,Et;(Et=(jt=re.value)==null?void 0:jt.focus)==null||Et.call(jt)};return onMounted(()=>{re.value.checked=de.value}),r({focus:Lt,checked:de}),(jt,Et)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue)),style:normalizeStyle(unref($e)),onClick:withModifiers(Ve,["prevent"])},[createBaseVNode("input",{id:unref(L),ref_key:"input",ref:re,class:normalizeClass(unref(k).e("input")),type:"checkbox",role:"switch","aria-checked":unref(de),"aria-disabled":unref(V),"aria-label":jt.label,name:jt.name,"true-value":jt.activeValue,"false-value":jt.inactiveValue,disabled:unref(V),tabindex:jt.tabindex,onChange:_e,onKeydown:withKeys(Ve,["enter"])},null,42,_hoisted_2$b),!jt.inlinePrompt&&(jt.inactiveIcon||jt.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le))},[jt.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(jt.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!jt.inactiveIcon&&jt.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(de)},toDisplayString(jt.inactiveText),9,_hoisted_3$8)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:ie,class:normalizeClass(unref(k).e("core")),style:normalizeStyle(unref(ae))},[jt.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).e("inner"))},[jt.activeIcon||jt.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(k).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(de)?jt.activeIcon:jt.inactiveIcon)))]),_:1},8,["class"])):jt.activeText||jt.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(k).is("text")),"aria-hidden":!unref(de)},toDisplayString(unref(de)?jt.activeText:jt.inactiveText),11,_hoisted_4$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).e("action"))},[jt.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(k).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):unref(de)?renderSlot(jt.$slots,"active-action",{key:1},()=>[jt.activeActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(jt.activeActionIcon)))]),_:1})):createCommentVNode("v-if",!0)]):unref(de)?createCommentVNode("v-if",!0):renderSlot(jt.$slots,"inactive-action",{key:2},()=>[jt.inactiveActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(jt.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)])],2)],6),!jt.inlinePrompt&&(jt.activeIcon||jt.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(oe))},[jt.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(jt.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!jt.activeIcon&&jt.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(de)},toDisplayString(jt.activeText),9,_hoisted_5$4)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$h))}});var Switch=_export_sfc$1(_sfc_main$n,[["__file","switch.vue"]]);const ElSwitch=withInstall(Switch),getCell=function(t){var r;return(r=t.target)==null?void 0:r.closest("td")},orderBy=function(t,r,e,n,g){if(!r&&!n&&(!g||Array.isArray(g)&&!g.length))return t;typeof e=="string"?e=e==="descending"?-1:1:e=e&&e<0?-1:1;const y=n?null:function(k,$){return g?(Array.isArray(g)||(g=[g]),g.map(L=>typeof L=="string"?get(k,L):L(k,$,t))):(r!=="$key"&&isObject$2(k)&&"$value"in k&&(k=k.$value),[isObject$2(k)?get(k,r):k])},i=function(k,$){if(n)return n(k.value,$.value);for(let L=0,V=k.key.length;L<V;L++){if(k.key[L]<$.key[L])return-1;if(k.key[L]>$.key[L])return 1}return 0};return t.map((k,$)=>({value:k,index:$,key:y?y(k,$):null})).sort((k,$)=>{let L=i(k,$);return L||(L=k.index-$.index),L*+e}).map(k=>k.value)},getColumnById=function(t,r){let e=null;return t.columns.forEach(n=>{n.id===r&&(e=n)}),e},getColumnByKey=function(t,r){let e=null;for(let n=0;n<t.columns.length;n++){const g=t.columns[n];if(g.columnKey===r){e=g;break}}return e||throwError("ElTable",`No column matching with column-key: ${r}`),e},getColumnByCell=function(t,r,e){const n=(r.className||"").match(new RegExp(`${e}-table_[^\\s]+`,"gm"));return n?getColumnById(t,n[0]):null},getRowIdentity=(t,r)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof r=="string"){if(!r.includes("."))return`${t[r]}`;const e=r.split(".");let n=t;for(const g of e)n=n[g];return`${n}`}else if(typeof r=="function")return r.call(null,t)},getKeysMap=function(t,r){const e={};return(t||[]).forEach((n,g)=>{e[getRowIdentity(n,r)]={row:n,index:g}}),e};function mergeOptions(t,r){const e={};let n;for(n in t)e[n]=t[n];for(n in r)if(hasOwn(r,n)){const g=r[n];typeof g<"u"&&(e[n]=g)}return e}function parseWidth(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function parseMinWidth(t){return t===""||t!==void 0&&(t=parseWidth(t),Number.isNaN(t)&&(t=80)),t}function parseHeight(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function compose(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,e)=>(...n)=>r(e(...n)))}function toggleRowStatus(t,r,e){let n=!1;const g=t.indexOf(r),y=g!==-1,i=k=>{k==="add"?t.push(r):t.splice(g,1),n=!0,isArray$3(r.children)&&r.children.forEach($=>{toggleRowStatus(t,$,e??!y)})};return isBoolean$1(e)?e&&!y?i("add"):!e&&y&&i("remove"):i(y?"remove":"add"),n}function walkTreeNode(t,r,e="children",n="hasChildren"){const g=i=>!(Array.isArray(i)&&i.length);function y(i,k,$){r(i,k,$),k.forEach(L=>{if(L[n]){r(L,null,$+1);return}const V=L[e];g(V)||y(L,V,$+1)})}t.forEach(i=>{if(i[n]){r(i,null,0);return}const k=i[e];g(k)||y(i,k,0)})}let removePopper=null;function createTablePopper(t,r,e,n){if((removePopper==null?void 0:removePopper.trigger)===e)return;removePopper==null||removePopper();const g=n==null?void 0:n.refs.tableWrapper,y=g==null?void 0:g.dataset.prefix,i={strategy:"fixed",...t.popperOptions},k=createVNode(ElTooltip,{content:r,virtualTriggering:!0,virtualRef:e,appendTo:g,placement:"top",transition:"none",offset:0,hideAfter:0,...t,popperOptions:i,onHide:()=>{removePopper==null||removePopper()}});k.appContext={...n.appContext,...n};const $=document.createElement("div");render(k,$),k.component.exposed.onOpen();const L=g==null?void 0:g.querySelector(`.${y}-scrollbar__wrap`);removePopper=()=>{render(null,$),L==null||L.removeEventListener("scroll",removePopper),removePopper=null},removePopper.trigger=e,L==null||L.addEventListener("scroll",removePopper)}function getCurrentColumns(t){return t.children?flatMap(t.children,getCurrentColumns):[t]}function getColSpan(t,r){return t+r.colSpan}const isFixedColumn=(t,r,e,n)=>{let g=0,y=t;const i=e.states.columns.value;if(n){const $=getCurrentColumns(n[t]);g=i.slice(0,i.indexOf($[0])).reduce(getColSpan,0),y=g+$.reduce(getColSpan,0)-1}else g=t;let k;switch(r){case"left":y<e.states.fixedLeafColumnsLength.value&&(k="left");break;case"right":g>=i.length-e.states.rightFixedLeafColumnsLength.value&&(k="right");break;default:y<e.states.fixedLeafColumnsLength.value?k="left":g>=i.length-e.states.rightFixedLeafColumnsLength.value&&(k="right")}return k?{direction:k,start:g,after:y}:{}},getFixedColumnsClass=(t,r,e,n,g,y=0)=>{const i=[],{direction:k,start:$,after:L}=isFixedColumn(r,e,n,g);if(k){const V=k==="left";i.push(`${t}-fixed-column--${k}`),V&&L+y===n.states.fixedLeafColumnsLength.value-1?i.push("is-last-column"):!V&&$-y===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&i.push("is-first-column")}return i};function getOffset(t,r){return t+(r.realWidth===null||Number.isNaN(r.realWidth)?Number(r.width):r.realWidth)}const getFixedColumnOffset=(t,r,e,n)=>{const{direction:g,start:y=0,after:i=0}=isFixedColumn(t,r,e,n);if(!g)return;const k={},$=g==="left",L=e.states.columns.value;return $?k.left=L.slice(0,y).reduce(getOffset,0):k.right=L.slice(i+1).reverse().reduce(getOffset,0),k},ensurePosition=(t,r)=>{t&&(Number.isNaN(t[r])||(t[r]=`${t[r]}px`))};function useExpand(t){const r=getCurrentInstance(),e=ref(!1),n=ref([]);return{updateExpandRows:()=>{const $=t.data.value||[],L=t.rowKey.value;if(e.value)n.value=$.slice();else if(L){const V=getKeysMap(n.value,L);n.value=$.reduce((z,re)=>{const ie=getRowIdentity(re,L);return V[ie]&&z.push(re),z},[])}else n.value=[]},toggleRowExpansion:($,L)=>{toggleRowStatus(n.value,$,L)&&r.emit("expand-change",$,n.value.slice())},setExpandRowKeys:$=>{r.store.assertRowKey();const L=t.data.value||[],V=t.rowKey.value,z=getKeysMap(L,V);n.value=$.reduce((re,ie)=>{const ue=z[ie];return ue&&re.push(ue.row),re},[])},isRowExpanded:$=>{const L=t.rowKey.value;return L?!!getKeysMap(n.value,L)[getRowIdentity($,L)]:n.value.includes($)},states:{expandRows:n,defaultExpandAll:e}}}function useCurrent(t){const r=getCurrentInstance(),e=ref(null),n=ref(null),g=L=>{r.store.assertRowKey(),e.value=L,i(L)},y=()=>{e.value=null},i=L=>{const{data:V,rowKey:z}=t;let re=null;z.value&&(re=(unref(V)||[]).find(ie=>getRowIdentity(ie,z.value)===L)),n.value=re,r.emit("current-change",n.value,null)};return{setCurrentRowKey:g,restoreCurrentRowKey:y,setCurrentRowByKey:i,updateCurrentRow:L=>{const V=n.value;if(L&&L!==V){n.value=L,r.emit("current-change",n.value,V);return}!L&&V&&(n.value=null,r.emit("current-change",null,V))},updateCurrentRowData:()=>{const L=t.rowKey.value,V=t.data.value||[],z=n.value;if(!V.includes(z)&&z){if(L){const re=getRowIdentity(z,L);i(re)}else n.value=null;n.value===null&&r.emit("current-change",null,z)}else e.value&&(i(e.value),y())},states:{_currentRowKey:e,currentRow:n}}}function useTree(t){const r=ref([]),e=ref({}),n=ref(16),g=ref(!1),y=ref({}),i=ref("hasChildren"),k=ref("children"),$=getCurrentInstance(),L=computed(()=>{if(!t.rowKey.value)return{};const ae=t.data.value||[];return z(ae)}),V=computed(()=>{const ae=t.rowKey.value,Ue=Object.keys(y.value),de={};return Ue.length&&Ue.forEach(_e=>{if(y.value[_e].length){const Ve={children:[]};y.value[_e].forEach($e=>{const Lt=getRowIdentity($e,ae);Ve.children.push(Lt),$e[i.value]&&!de[Lt]&&(de[Lt]={children:[]})}),de[_e]=Ve}}),de}),z=ae=>{const Ue=t.rowKey.value,de={};return walkTreeNode(ae,(_e,Ve,$e)=>{const Lt=getRowIdentity(_e,Ue);Array.isArray(Ve)?de[Lt]={children:Ve.map(jt=>getRowIdentity(jt,Ue)),level:$e}:g.value&&(de[Lt]={children:[],lazy:!0,level:$e})},k.value,i.value),de},re=(ae=!1,Ue=(de=>(de=$.store)==null?void 0:de.states.defaultExpandAll.value)())=>{var de;const _e=L.value,Ve=V.value,$e=Object.keys(_e),Lt={};if($e.length){const jt=unref(e),Et=[],ir=(Dt,lr)=>{if(ae)return r.value?Ue||r.value.includes(lr):!!(Ue||Dt!=null&&Dt.expanded);{const sr=Ue||r.value&&r.value.includes(lr);return!!(Dt!=null&&Dt.expanded||sr)}};$e.forEach(Dt=>{const lr=jt[Dt],sr={..._e[Dt]};if(sr.expanded=ir(lr,Dt),sr.lazy){const{loaded:er=!1,loading:cr=!1}=lr||{};sr.loaded=!!er,sr.loading=!!cr,Et.push(Dt)}Lt[Dt]=sr});const ur=Object.keys(Ve);g.value&&ur.length&&Et.length&&ur.forEach(Dt=>{const lr=jt[Dt],sr=Ve[Dt].children;if(Et.includes(Dt)){if(Lt[Dt].children.length!==0)throw new Error("[ElTable]children must be an empty array.");Lt[Dt].children=sr}else{const{loaded:er=!1,loading:cr=!1}=lr||{};Lt[Dt]={lazy:!0,loaded:!!er,loading:!!cr,expanded:ir(lr,Dt),children:sr,level:""}}})}e.value=Lt,(de=$.store)==null||de.updateTableScrollY()};watch(()=>r.value,()=>{re(!0)}),watch(()=>L.value,()=>{re()}),watch(()=>V.value,()=>{re()});const ie=ae=>{r.value=ae,re()},ue=(ae,Ue)=>{$.store.assertRowKey();const de=t.rowKey.value,_e=getRowIdentity(ae,de),Ve=_e&&e.value[_e];if(_e&&Ve&&"expanded"in Ve){const $e=Ve.expanded;Ue=typeof Ue>"u"?!Ve.expanded:Ue,e.value[_e].expanded=Ue,$e!==Ue&&$.emit("expand-change",ae,Ue),$.store.updateTableScrollY()}},le=ae=>{$.store.assertRowKey();const Ue=t.rowKey.value,de=getRowIdentity(ae,Ue),_e=e.value[de];g.value&&_e&&"loaded"in _e&&!_e.loaded?oe(ae,de,_e):ue(ae,void 0)},oe=(ae,Ue,de)=>{const{load:_e}=$.props;_e&&!e.value[Ue].loaded&&(e.value[Ue].loading=!0,_e(ae,de,Ve=>{if(!Array.isArray(Ve))throw new TypeError("[ElTable] data must be an array");e.value[Ue].loading=!1,e.value[Ue].loaded=!0,e.value[Ue].expanded=!0,Ve.length&&(y.value[Ue]=Ve),$.emit("expand-change",ae,!0)}))};return{loadData:oe,loadOrToggle:le,toggleTreeExpansion:ue,updateTreeExpandKeys:ie,updateTreeData:re,normalize:z,states:{expandRowKeys:r,treeData:e,indent:n,lazy:g,lazyTreeNodeMap:y,lazyColumnIdentifier:i,childrenColumnName:k}}}const sortData=(t,r)=>{const e=r.sortingColumn;return!e||typeof e.sortable=="string"?t:orderBy(t,r.sortProp,r.sortOrder,e.sortMethod,e.sortBy)},doFlattenColumns=t=>{const r=[];return t.forEach(e=>{e.children&&e.children.length>0?r.push.apply(r,doFlattenColumns(e.children)):r.push(e)}),r};function useWatcher$1(){var t;const r=getCurrentInstance(),{size:e}=toRefs((t=r.proxy)==null?void 0:t.$props),n=ref(null),g=ref([]),y=ref([]),i=ref(!1),k=ref([]),$=ref([]),L=ref([]),V=ref([]),z=ref([]),re=ref([]),ie=ref([]),ue=ref([]),le=[],oe=ref(0),ae=ref(0),Ue=ref(0),de=ref(!1),_e=ref([]),Ve=ref(!1),$e=ref(!1),Lt=ref(null),jt=ref({}),Et=ref(null),ir=ref(null),ur=ref(null),Dt=ref(null),lr=ref(null);watch(g,()=>r.state&&or(!1),{deep:!0});const sr=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},er=xn=>{var Pn;(Pn=xn.children)==null||Pn.forEach(vn=>{vn.fixed=xn.fixed,er(vn)})},cr=()=>{k.value.forEach(Zn=>{er(Zn)}),V.value=k.value.filter(Zn=>Zn.fixed===!0||Zn.fixed==="left"),z.value=k.value.filter(Zn=>Zn.fixed==="right"),V.value.length>0&&k.value[0]&&k.value[0].type==="selection"&&!k.value[0].fixed&&(k.value[0].fixed=!0,V.value.unshift(k.value[0]));const xn=k.value.filter(Zn=>!Zn.fixed);$.value=[].concat(V.value).concat(xn).concat(z.value);const Pn=doFlattenColumns(xn),vn=doFlattenColumns(V.value),hn=doFlattenColumns(z.value);oe.value=Pn.length,ae.value=vn.length,Ue.value=hn.length,L.value=[].concat(vn).concat(Pn).concat(hn),i.value=V.value.length>0||z.value.length>0},or=(xn,Pn=!1)=>{xn&&cr(),Pn?r.state.doLayout():r.state.debouncedUpdateLayout()},hr=xn=>_e.value.includes(xn),pr=()=>{de.value=!1,_e.value.length&&(_e.value=[],r.emit("selection-change",[]))},Tr=()=>{let xn;if(n.value){xn=[];const Pn=getKeysMap(_e.value,n.value),vn=getKeysMap(g.value,n.value);for(const hn in Pn)hasOwn(Pn,hn)&&!vn[hn]&&xn.push(Pn[hn].row)}else xn=_e.value.filter(Pn=>!g.value.includes(Pn));if(xn.length){const Pn=_e.value.filter(vn=>!xn.includes(vn));_e.value=Pn,r.emit("selection-change",Pn.slice())}},Pr=()=>(_e.value||[]).slice(),_r=(xn,Pn=void 0,vn=!0)=>{if(toggleRowStatus(_e.value,xn,Pn)){const Zn=(_e.value||[]).slice();vn&&r.emit("select",Zn,xn),r.emit("selection-change",Zn)}},Mr=()=>{var xn,Pn;const vn=$e.value?!de.value:!(de.value||_e.value.length);de.value=vn;let hn=!1,Zn=0;const Oo=(Pn=(xn=r==null?void 0:r.store)==null?void 0:xn.states)==null?void 0:Pn.rowKey.value;g.value.forEach((Ho,Do)=>{const Eo=Do+Zn;Lt.value?Lt.value.call(null,Ho,Eo)&&toggleRowStatus(_e.value,Ho,vn)&&(hn=!0):toggleRowStatus(_e.value,Ho,vn)&&(hn=!0),Zn+=Er(getRowIdentity(Ho,Oo))}),hn&&r.emit("selection-change",_e.value?_e.value.slice():[]),r.emit("select-all",_e.value)},rr=()=>{const xn=getKeysMap(_e.value,n.value);g.value.forEach(Pn=>{const vn=getRowIdentity(Pn,n.value),hn=xn[vn];hn&&(_e.value[hn.index]=Pn)})},kr=()=>{var xn,Pn,vn;if(((xn=g.value)==null?void 0:xn.length)===0){de.value=!1;return}let hn;n.value&&(hn=getKeysMap(_e.value,n.value));const Zn=function(Eo){return hn?!!hn[getRowIdentity(Eo,n.value)]:_e.value.includes(Eo)};let Oo=!0,Ho=0,Do=0;for(let Eo=0,Ko=(g.value||[]).length;Eo<Ko;Eo++){const Ha=(vn=(Pn=r==null?void 0:r.store)==null?void 0:Pn.states)==null?void 0:vn.rowKey.value,Ts=Eo+Do,To=g.value[Eo],Os=Lt.value&&Lt.value.call(null,To,Ts);if(Zn(To))Ho++;else if(!Lt.value||Os){Oo=!1;break}Do+=Er(getRowIdentity(To,Ha))}Ho===0&&(Oo=!1),de.value=Oo},Er=xn=>{var Pn;if(!r||!r.store)return 0;const{treeData:vn}=r.store.states;let hn=0;const Zn=(Pn=vn.value[xn])==null?void 0:Pn.children;return Zn&&(hn+=Zn.length,Zn.forEach(Oo=>{hn+=Er(Oo)})),hn},xr=(xn,Pn)=>{Array.isArray(xn)||(xn=[xn]);const vn={};return xn.forEach(hn=>{jt.value[hn.id]=Pn,vn[hn.columnKey||hn.id]=Pn}),vn},vr=(xn,Pn,vn)=>{ir.value&&ir.value!==xn&&(ir.value.order=null),ir.value=xn,ur.value=Pn,Dt.value=vn},Ir=()=>{let xn=unref(y);Object.keys(jt.value).forEach(Pn=>{const vn=jt.value[Pn];if(!vn||vn.length===0)return;const hn=getColumnById({columns:L.value},Pn);hn&&hn.filterMethod&&(xn=xn.filter(Zn=>vn.some(Oo=>hn.filterMethod.call(null,Oo,Zn,hn))))}),Et.value=xn},Or=()=>{g.value=sortData(Et.value,{sortingColumn:ir.value,sortProp:ur.value,sortOrder:Dt.value})},Cr=(xn=void 0)=>{xn&&xn.filter||Ir(),Or()},yr=xn=>{const{tableHeaderRef:Pn}=r.refs;if(!Pn)return;const vn=Object.assign({},Pn.filterPanels),hn=Object.keys(vn);if(hn.length)if(typeof xn=="string"&&(xn=[xn]),Array.isArray(xn)){const Zn=xn.map(Oo=>getColumnByKey({columns:L.value},Oo));hn.forEach(Oo=>{const Ho=Zn.find(Do=>Do.id===Oo);Ho&&(Ho.filteredValue=[])}),r.store.commit("filterChange",{column:Zn,values:[],silent:!0,multi:!0})}else hn.forEach(Zn=>{const Oo=L.value.find(Ho=>Ho.id===Zn);Oo&&(Oo.filteredValue=[])}),jt.value={},r.store.commit("filterChange",{column:{},values:[],silent:!0})},fr=()=>{ir.value&&(vr(null,null,null),r.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Sr,toggleRowExpansion:Br,updateExpandRows:$r,states:Lr,isRowExpanded:Gr}=useExpand({data:g,rowKey:n}),{updateTreeExpandKeys:qr,toggleTreeExpansion:Yr,updateTreeData:bn,loadOrToggle:wn,states:Xr}=useTree({data:g,rowKey:n}),{updateCurrentRowData:qn,updateCurrentRow:Zr,setCurrentRowKey:Nn,states:Qr}=useCurrent({data:g,rowKey:n});return{assertRowKey:sr,updateColumns:cr,scheduleLayout:or,isSelected:hr,clearSelection:pr,cleanSelection:Tr,getSelectionRows:Pr,toggleRowSelection:_r,_toggleAllSelection:Mr,toggleAllSelection:null,updateSelectionByRowKey:rr,updateAllSelected:kr,updateFilters:xr,updateCurrentRow:Zr,updateSort:vr,execFilter:Ir,execSort:Or,execQuery:Cr,clearFilter:yr,clearSort:fr,toggleRowExpansion:Br,setExpandRowKeysAdapter:xn=>{Sr(xn),qr(xn)},setCurrentRowKey:Nn,toggleRowExpansionAdapter:(xn,Pn)=>{L.value.some(({type:hn})=>hn==="expand")?Br(xn,Pn):Yr(xn,Pn)},isRowExpanded:Gr,updateExpandRows:$r,updateCurrentRowData:qn,loadOrToggle:wn,updateTreeData:bn,states:{tableSize:e,rowKey:n,data:g,_data:y,isComplex:i,_columns:k,originColumns:$,columns:L,fixedColumns:V,rightFixedColumns:z,leafColumns:re,fixedLeafColumns:ie,rightFixedLeafColumns:ue,updateOrderFns:le,leafColumnsLength:oe,fixedLeafColumnsLength:ae,rightFixedLeafColumnsLength:Ue,isAllSelected:de,selection:_e,reserveSelection:Ve,selectOnIndeterminate:$e,selectable:Lt,filters:jt,filteredData:Et,sortingColumn:ir,sortProp:ur,sortOrder:Dt,hoverRow:lr,...Lr,...Xr,...Qr}}}function replaceColumn(t,r){return t.map(e=>{var n;return e.id===r.id?r:((n=e.children)!=null&&n.length&&(e.children=replaceColumn(e.children,r)),e)})}function sortColumn(t){t.forEach(r=>{var e,n;r.no=(e=r.getColumnIndex)==null?void 0:e.call(r),(n=r.children)!=null&&n.length&&sortColumn(r.children)}),t.sort((r,e)=>r.no-e.no)}function useStore(){const t=getCurrentInstance(),r=useWatcher$1();return{ns:useNamespace("table"),...r,mutations:{setData(i,k){const $=unref(i._data)!==k;i.data.value=k,i._data.value=k,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),unref(i.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):$?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(i,k,$,L){const V=unref(i._columns);let z=[];$?($&&!$.children&&($.children=[]),$.children.push(k),z=replaceColumn(V,$)):(V.push(k),z=V),sortColumn(z),i._columns.value=z,i.updateOrderFns.push(L),k.type==="selection"&&(i.selectable.value=k.selectable,i.reserveSelection.value=k.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(i,k){var $;(($=k.getColumnIndex)==null?void 0:$.call(k))!==k.no&&(sortColumn(i._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(i,k,$,L){const V=unref(i._columns)||[];if($)$.children.splice($.children.findIndex(re=>re.id===k.id),1),nextTick(()=>{var re;((re=$.children)==null?void 0:re.length)===0&&delete $.children}),i._columns.value=replaceColumn(V,$);else{const re=V.indexOf(k);re>-1&&(V.splice(re,1),i._columns.value=V)}const z=i.updateOrderFns.indexOf(L);z>-1&&i.updateOrderFns.splice(z,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(i,k){const{prop:$,order:L,init:V}=k;if($){const z=unref(i.columns).find(re=>re.property===$);z&&(z.order=L,t.store.updateSort(z,$,L),t.store.commit("changeSortCondition",{init:V}))}},changeSortCondition(i,k){const{sortingColumn:$,sortProp:L,sortOrder:V}=i,z=unref($),re=unref(L),ie=unref(V);ie===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const ue={filter:!0};t.store.execQuery(ue),(!k||!(k.silent||k.init))&&t.emit("sort-change",{column:z,prop:re,order:ie}),t.store.updateTableScrollY()},filterChange(i,k){const{column:$,values:L,silent:V}=k,z=t.store.updateFilters($,L);t.store.execQuery(),V||t.emit("filter-change",z),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(i,k){t.store.toggleRowSelection(k),t.store.updateAllSelected()},setHoverRow(i,k){i.hoverRow.value=k},setCurrentRow(i,k){t.store.updateCurrentRow(k)}},commit:function(i,...k){const $=t.store.mutations;if($[i])$[i].apply(t,[t.store.states].concat(k));else throw new Error(`Action not found: ${i}`)},updateTableScrollY:function(){nextTick(()=>t.layout.updateScrollY.apply(t.layout))}}}const InitialStateMap={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function createStore(t,r){if(!t)throw new Error("Table is required.");const e=useStore();return e.toggleAllSelection=debounce(e._toggleAllSelection,10),Object.keys(InitialStateMap).forEach(n=>{handleValue(getArrKeysValue(r,n),n,e)}),proxyTableProps(e,r),e}function proxyTableProps(t,r){Object.keys(InitialStateMap).forEach(e=>{watch(()=>getArrKeysValue(r,e),n=>{handleValue(n,e,t)})})}function handleValue(t,r,e){let n=t,g=InitialStateMap[r];typeof InitialStateMap[r]=="object"&&(g=g.key,n=n||InitialStateMap[r].default),e.states[g].value=n}function getArrKeysValue(t,r){if(r.includes(".")){const e=r.split(".");let n=t;return e.forEach(g=>{n=n[g]}),n}else return t[r]}class TableLayout{constructor(r){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ref(null),this.scrollX=ref(!1),this.scrollY=ref(!1),this.bodyWidth=ref(null),this.fixedWidth=ref(null),this.rightFixedWidth=ref(null),this.gutterWidth=0;for(const e in r)hasOwn(r,e)&&(isRef(this[e])?this[e].value=r[e]:this[e]=r[e]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const e=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(e!=null&&e.wrapRef)){let n=!0;const g=this.scrollY.value;return n=e.wrapRef.scrollHeight>e.wrapRef.clientHeight,this.scrollY.value=n,g!==n}return!1}setHeight(r,e="height"){if(!isClient)return;const n=this.table.vnode.el;if(r=parseHeight(r),this.height.value=Number(r),!n&&(r||r===0))return nextTick(()=>this.setHeight(r,e));typeof r=="number"?(n.style[e]=`${r}px`,this.updateElsHeight()):typeof r=="string"&&(n.style[e]=r,this.updateElsHeight())}setMaxHeight(r){this.setHeight(r,"max-height")}getFlattenColumns(){const r=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?r.push.apply(r,n.columns):r.push(n)}),r}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(r){if(!r)return!0;let e=r;for(;e.tagName!=="DIV";){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}updateColumnsWidth(){if(!isClient)return;const r=this.fit,e=this.table.vnode.el.clientWidth;let n=0;const g=this.getFlattenColumns(),y=g.filter($=>typeof $.width!="number");if(g.forEach($=>{typeof $.width=="number"&&$.realWidth&&($.realWidth=null)}),y.length>0&&r){if(g.forEach($=>{n+=Number($.width||$.minWidth||80)}),n<=e){this.scrollX.value=!1;const $=e-n;if(y.length===1)y[0].realWidth=Number(y[0].minWidth||80)+$;else{const L=y.reduce((re,ie)=>re+Number(ie.minWidth||80),0),V=$/L;let z=0;y.forEach((re,ie)=>{if(ie===0)return;const ue=Math.floor(Number(re.minWidth||80)*V);z+=ue,re.realWidth=Number(re.minWidth||80)+ue}),y[0].realWidth=Number(y[0].minWidth||80)+$-z}}else this.scrollX.value=!0,y.forEach($=>{$.realWidth=Number($.minWidth)});this.bodyWidth.value=Math.max(n,e),this.table.state.resizeState.value.width=this.bodyWidth.value}else g.forEach($=>{!$.width&&!$.minWidth?$.realWidth=80:$.realWidth=Number($.width||$.minWidth),n+=$.realWidth}),this.scrollX.value=n>e,this.bodyWidth.value=n;const i=this.store.states.fixedColumns.value;if(i.length>0){let $=0;i.forEach(L=>{$+=Number(L.realWidth||L.width)}),this.fixedWidth.value=$}const k=this.store.states.rightFixedColumns.value;if(k.length>0){let $=0;k.forEach(L=>{$+=Number(L.realWidth||L.width)}),this.rightFixedWidth.value=$}this.notifyObservers("columns")}addObserver(r){this.observers.push(r)}removeObserver(r){const e=this.observers.indexOf(r);e!==-1&&this.observers.splice(e,1)}notifyObservers(r){this.observers.forEach(n=>{var g,y;switch(r){case"columns":(g=n.state)==null||g.onColumnsChange(this);break;case"scrollable":(y=n.state)==null||y.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${r}.`)}})}}const{CheckboxGroup:ElCheckboxGroup}=ElCheckbox,_sfc_main$m=defineComponent({name:"ElTableFilterPanel",components:{ElCheckbox,ElCheckboxGroup,ElScrollbar,ElTooltip,ElIcon,ArrowDown:arrow_down_default,ArrowUp:arrow_up_default},directives:{ClickOutside},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const r=getCurrentInstance(),{t:e}=useLocale(),n=useNamespace("table-filter"),g=r==null?void 0:r.parent;g.filterPanels.value[t.column.id]||(g.filterPanels.value[t.column.id]=r);const y=ref(!1),i=ref(null),k=computed(()=>t.column&&t.column.filters),$=computed(()=>t.column.filterClassName?`${n.b()} ${t.column.filterClassName}`:n.b()),L=computed({get:()=>{var Ve;return(((Ve=t.column)==null?void 0:Ve.filteredValue)||[])[0]},set:Ve=>{V.value&&(typeof Ve<"u"&&Ve!==null?V.value.splice(0,1,Ve):V.value.splice(0,1))}}),V=computed({get(){return t.column?t.column.filteredValue||[]:[]},set(Ve){t.column&&t.upDataColumn("filteredValue",Ve)}}),z=computed(()=>t.column?t.column.filterMultiple:!0),re=Ve=>Ve.value===L.value,ie=()=>{y.value=!1},ue=Ve=>{Ve.stopPropagation(),y.value=!y.value},le=()=>{y.value=!1},oe=()=>{de(V.value),ie()},ae=()=>{V.value=[],de(V.value),ie()},Ue=Ve=>{L.value=Ve,de(typeof Ve<"u"&&Ve!==null?V.value:[]),ie()},de=Ve=>{t.store.commit("filterChange",{column:t.column,values:Ve}),t.store.updateAllSelected()};watch(y,Ve=>{t.column&&t.upDataColumn("filterOpened",Ve)},{immediate:!0});const _e=computed(()=>{var Ve,$e;return($e=(Ve=i.value)==null?void 0:Ve.popperRef)==null?void 0:$e.contentRef});return{tooltipVisible:y,multiple:z,filterClassName:$,filteredValue:V,filterValue:L,filters:k,handleConfirm:oe,handleReset:ae,handleSelect:Ue,isActive:re,t:e,ns:n,showFilterPanel:ue,hideFilterPanel:le,popperPaneRef:_e,tooltip:i}}}),_hoisted_1$g={key:0},_hoisted_2$a=["disabled"],_hoisted_3$7=["label","onClick"];function _sfc_render$2(t,r,e,n,g,y){const i=resolveComponent("el-checkbox"),k=resolveComponent("el-checkbox-group"),$=resolveComponent("el-scrollbar"),L=resolveComponent("arrow-up"),V=resolveComponent("arrow-down"),z=resolveComponent("el-icon"),re=resolveComponent("el-tooltip"),ie=resolveDirective("click-outside");return openBlock(),createBlock(re,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:""},{content:withCtx(()=>[t.multiple?(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",{class:normalizeClass(t.ns.e("content"))},[createVNode($,{"wrap-class":t.ns.e("wrap")},{default:withCtx(()=>[createVNode(k,{modelValue:t.filteredValue,"onUpdate:modelValue":r[0]||(r[0]=ue=>t.filteredValue=ue),class:normalizeClass(t.ns.e("checkbox-group"))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.filters,ue=>(openBlock(),createBlock(i,{key:ue.value,label:ue.value},{default:withCtx(()=>[createTextVNode(toDisplayString(ue.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),createBaseVNode("div",{class:normalizeClass(t.ns.e("bottom"))},[createBaseVNode("button",{class:normalizeClass({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:r[1]||(r[1]=(...ue)=>t.handleConfirm&&t.handleConfirm(...ue))},toDisplayString(t.t("el.table.confirmFilter")),11,_hoisted_2$a),createBaseVNode("button",{type:"button",onClick:r[2]||(r[2]=(...ue)=>t.handleReset&&t.handleReset(...ue))},toDisplayString(t.t("el.table.resetFilter")),1)],2)])):(openBlock(),createElementBlock("ul",{key:1,class:normalizeClass(t.ns.e("list"))},[createBaseVNode("li",{class:normalizeClass([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:r[3]||(r[3]=ue=>t.handleSelect(null))},toDisplayString(t.t("el.table.clearFilter")),3),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.filters,ue=>(openBlock(),createElementBlock("li",{key:ue.value,class:normalizeClass([t.ns.e("list-item"),t.ns.is("active",t.isActive(ue))]),label:ue.value,onClick:le=>t.handleSelect(ue.value)},toDisplayString(ue.text),11,_hoisted_3$7))),128))],2))]),default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:r[4]||(r[4]=(...ue)=>t.showFilterPanel&&t.showFilterPanel(...ue))},[createVNode(z,null,{default:withCtx(()=>[t.column.filterOpened?(openBlock(),createBlock(L,{key:0})):(openBlock(),createBlock(V,{key:1}))]),_:1})],2)),[[ie,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var FilterPanel=_export_sfc$1(_sfc_main$m,[["render",_sfc_render$2],["__file","filter-panel.vue"]]);function useLayoutObserver(t){const r=getCurrentInstance();onBeforeMount(()=>{e.value.addObserver(r)}),onMounted(()=>{n(e.value),g(e.value)}),onUpdated(()=>{n(e.value),g(e.value)}),onUnmounted(()=>{e.value.removeObserver(r)});const e=computed(()=>{const y=t.layout;if(!y)throw new Error("Can not find table layout.");return y}),n=y=>{var i;const k=((i=t.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!k.length)return;const $=y.getFlattenColumns(),L={};$.forEach(V=>{L[V.id]=V});for(let V=0,z=k.length;V<z;V++){const re=k[V],ie=re.getAttribute("name"),ue=L[ie];ue&&re.setAttribute("width",ue.realWidth||ue.width)}},g=y=>{var i,k;const $=((i=t.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let V=0,z=$.length;V<z;V++)$[V].setAttribute("width",y.scrollY.value?y.gutterWidth:"0");const L=((k=t.vnode.el)==null?void 0:k.querySelectorAll("th.gutter"))||[];for(let V=0,z=L.length;V<z;V++){const re=L[V];re.style.width=y.scrollY.value?`${y.gutterWidth}px`:"0",re.style.display=y.scrollY.value?"":"none"}};return{tableLayout:e.value,onColumnsChange:n,onScrollableChange:g}}const TABLE_INJECTION_KEY=Symbol("ElTable");function useEvent(t,r){const e=getCurrentInstance(),n=inject(TABLE_INJECTION_KEY),g=le=>{le.stopPropagation()},y=(le,oe)=>{!oe.filters&&oe.sortable?ue(le,oe,!1):oe.filterable&&!oe.sortable&&g(le),n==null||n.emit("header-click",oe,le)},i=(le,oe)=>{n==null||n.emit("header-contextmenu",oe,le)},k=ref(null),$=ref(!1),L=ref({}),V=(le,oe)=>{if(isClient&&!(oe.children&&oe.children.length>0)&&k.value&&t.border){$.value=!0;const ae=n;r("set-drag-visible",!0);const de=(ae==null?void 0:ae.vnode.el).getBoundingClientRect().left,_e=e.vnode.el.querySelector(`th.${oe.id}`),Ve=_e.getBoundingClientRect(),$e=Ve.left-de+30;addClass(_e,"noclick"),L.value={startMouseLeft:le.clientX,startLeft:Ve.right-de,startColumnLeft:Ve.left-de,tableLeft:de};const Lt=ae==null?void 0:ae.refs.resizeProxy;Lt.style.left=`${L.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const jt=ir=>{const ur=ir.clientX-L.value.startMouseLeft,Dt=L.value.startLeft+ur;Lt.style.left=`${Math.max($e,Dt)}px`},Et=()=>{if($.value){const{startColumnLeft:ir,startLeft:ur}=L.value,lr=Number.parseInt(Lt.style.left,10)-ir;oe.width=oe.realWidth=lr,ae==null||ae.emit("header-dragend",oe.width,ur-ir,oe,le),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",$.value=!1,k.value=null,L.value={},r("set-drag-visible",!1)}document.removeEventListener("mousemove",jt),document.removeEventListener("mouseup",Et),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{removeClass(_e,"noclick")},0)};document.addEventListener("mousemove",jt),document.addEventListener("mouseup",Et)}},z=(le,oe)=>{if(oe.children&&oe.children.length>0)return;const ae=le.target;if(!isElement(ae))return;const Ue=ae==null?void 0:ae.closest("th");if(!(!oe||!oe.resizable)&&!$.value&&t.border){const de=Ue.getBoundingClientRect(),_e=document.body.style;de.width>12&&de.right-le.pageX<8?(_e.cursor="col-resize",hasClass(Ue,"is-sortable")&&(Ue.style.cursor="col-resize"),k.value=oe):$.value||(_e.cursor="",hasClass(Ue,"is-sortable")&&(Ue.style.cursor="pointer"),k.value=null)}},re=()=>{isClient&&(document.body.style.cursor="")},ie=({order:le,sortOrders:oe})=>{if(le==="")return oe[0];const ae=oe.indexOf(le||null);return oe[ae>oe.length-2?0:ae+1]},ue=(le,oe,ae)=>{var Ue;le.stopPropagation();const de=oe.order===ae?null:ae||ie(oe),_e=(Ue=le.target)==null?void 0:Ue.closest("th");if(_e&&hasClass(_e,"noclick")){removeClass(_e,"noclick");return}if(!oe.sortable)return;const Ve=t.store.states;let $e=Ve.sortProp.value,Lt;const jt=Ve.sortingColumn.value;(jt!==oe||jt===oe&&jt.order===null)&&(jt&&(jt.order=null),Ve.sortingColumn.value=oe,$e=oe.property),de?Lt=oe.order=de:Lt=oe.order=null,Ve.sortProp.value=$e,Ve.sortOrder.value=Lt,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:y,handleHeaderContextMenu:i,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:ue,handleFilterClick:g}}function useStyle$2(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table");return{getHeaderRowStyle:k=>{const $=r==null?void 0:r.props.headerRowStyle;return typeof $=="function"?$.call(null,{rowIndex:k}):$},getHeaderRowClass:k=>{const $=[],L=r==null?void 0:r.props.headerRowClassName;return typeof L=="string"?$.push(L):typeof L=="function"&&$.push(L.call(null,{rowIndex:k})),$.join(" ")},getHeaderCellStyle:(k,$,L,V)=>{var z;let re=(z=r==null?void 0:r.props.headerCellStyle)!=null?z:{};typeof re=="function"&&(re=re.call(null,{rowIndex:k,columnIndex:$,row:L,column:V}));const ie=getFixedColumnOffset($,V.fixed,t.store,L);return ensurePosition(ie,"left"),ensurePosition(ie,"right"),Object.assign({},re,ie)},getHeaderCellClass:(k,$,L,V)=>{const z=getFixedColumnsClass(e.b(),$,V.fixed,t.store,L),re=[V.id,V.order,V.headerAlign,V.className,V.labelClassName,...z];V.children||re.push("is-leaf"),V.sortable&&re.push("is-sortable");const ie=r==null?void 0:r.props.headerCellClassName;return typeof ie=="string"?re.push(ie):typeof ie=="function"&&re.push(ie.call(null,{rowIndex:k,columnIndex:$,row:L,column:V})),re.push(e.e("cell")),re.filter(ue=>!!ue).join(" ")}}}const getAllColumns=t=>{const r=[];return t.forEach(e=>{e.children?(r.push(e),r.push.apply(r,getAllColumns(e.children))):r.push(e)}),r},convertToRows=t=>{let r=1;const e=(y,i)=>{if(i&&(y.level=i.level+1,r<y.level&&(r=y.level)),y.children){let k=0;y.children.forEach($=>{e($,y),k+=$.colSpan}),y.colSpan=k}else y.colSpan=1};t.forEach(y=>{y.level=1,e(y,void 0)});const n=[];for(let y=0;y<r;y++)n.push([]);return getAllColumns(t).forEach(y=>{y.children?(y.rowSpan=1,y.children.forEach(i=>i.isSubColumn=!0)):y.rowSpan=r-y.level+1,n[y.level-1].push(y)}),n};function useUtils$1(t){const r=inject(TABLE_INJECTION_KEY),e=computed(()=>convertToRows(t.store.states.originColumns.value));return{isGroup:computed(()=>{const y=e.value.length>1;return y&&r&&(r.state.isGroup.value=!0),y}),toggleAllSelection:y=>{y.stopPropagation(),r==null||r.store.commit("toggleAllSelection")},columnRows:e}}var TableHeader=defineComponent({name:"ElTableHeader",components:{ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:r}){const e=getCurrentInstance(),n=inject(TABLE_INJECTION_KEY),g=useNamespace("table"),y=ref({}),{onColumnsChange:i,onScrollableChange:k}=useLayoutObserver(n);onMounted(async()=>{await nextTick(),await nextTick();const{prop:$e,order:Lt}=t.defaultSort;n==null||n.store.commit("sort",{prop:$e,order:Lt,init:!0})});const{handleHeaderClick:$,handleHeaderContextMenu:L,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:ie,handleFilterClick:ue}=useEvent(t,r),{getHeaderRowStyle:le,getHeaderRowClass:oe,getHeaderCellStyle:ae,getHeaderCellClass:Ue}=useStyle$2(t),{isGroup:de,toggleAllSelection:_e,columnRows:Ve}=useUtils$1(t);return e.state={onColumnsChange:i,onScrollableChange:k},e.filterPanels=y,{ns:g,filterPanels:y,onColumnsChange:i,onScrollableChange:k,columnRows:Ve,getHeaderRowClass:oe,getHeaderRowStyle:le,getHeaderCellClass:Ue,getHeaderCellStyle:ae,handleHeaderClick:$,handleHeaderContextMenu:L,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:ie,handleFilterClick:ue,isGroup:de,toggleAllSelection:_e}},render(){const{ns:t,isGroup:r,columnRows:e,getHeaderCellStyle:n,getHeaderCellClass:g,getHeaderRowClass:y,getHeaderRowStyle:i,handleHeaderClick:k,handleHeaderContextMenu:$,handleMouseDown:L,handleMouseMove:V,handleSortClick:z,handleMouseOut:re,store:ie,$parent:ue}=this;let le=1;return h$1("thead",{class:{[t.is("group")]:r}},e.map((oe,ae)=>h$1("tr",{class:y(ae),key:ae,style:i(ae)},oe.map((Ue,de)=>(Ue.rowSpan>le&&(le=Ue.rowSpan),h$1("th",{class:g(ae,de,oe,Ue),colspan:Ue.colSpan,key:`${Ue.id}-thead`,rowspan:Ue.rowSpan,style:n(ae,de,oe,Ue),onClick:_e=>k(_e,Ue),onContextmenu:_e=>$(_e,Ue),onMousedown:_e=>L(_e,Ue),onMousemove:_e=>V(_e,Ue),onMouseout:re},[h$1("div",{class:["cell",Ue.filteredValue&&Ue.filteredValue.length>0?"highlight":""]},[Ue.renderHeader?Ue.renderHeader({column:Ue,$index:de,store:ie,_self:ue}):Ue.label,Ue.sortable&&h$1("span",{onClick:_e=>z(_e,Ue),class:"caret-wrapper"},[h$1("i",{onClick:_e=>z(_e,Ue,"ascending"),class:"sort-caret ascending"}),h$1("i",{onClick:_e=>z(_e,Ue,"descending"),class:"sort-caret descending"})]),Ue.filterable&&h$1(FilterPanel,{store:ie,placement:Ue.filterPlacement||"bottom-start",column:Ue,upDataColumn:(_e,Ve)=>{Ue[_e]=Ve}})])]))))))}});function useEvents(t){const r=inject(TABLE_INJECTION_KEY),e=ref(""),n=ref(h$1("div")),g=(ue,le,oe)=>{var ae;const Ue=r,de=getCell(ue);let _e;const Ve=(ae=Ue==null?void 0:Ue.vnode.el)==null?void 0:ae.dataset.prefix;de&&(_e=getColumnByCell({columns:t.store.states.columns.value},de,Ve),_e&&(Ue==null||Ue.emit(`cell-${oe}`,le,_e,de,ue))),Ue==null||Ue.emit(`row-${oe}`,le,_e,ue)},y=(ue,le)=>{g(ue,le,"dblclick")},i=(ue,le)=>{t.store.commit("setCurrentRow",le),g(ue,le,"click")},k=(ue,le)=>{g(ue,le,"contextmenu")},$=debounce(ue=>{t.store.commit("setHoverRow",ue)},30),L=debounce(()=>{t.store.commit("setHoverRow",null)},30),V=ue=>{const le=window.getComputedStyle(ue,null),oe=Number.parseInt(le.paddingLeft,10)||0,ae=Number.parseInt(le.paddingRight,10)||0,Ue=Number.parseInt(le.paddingTop,10)||0,de=Number.parseInt(le.paddingBottom,10)||0;return{left:oe,right:ae,top:Ue,bottom:de}},z=(ue,le,oe)=>{let ae=le.target.parentNode;for(;ue>1&&(ae=ae==null?void 0:ae.nextSibling,!(!ae||ae.nodeName!=="TR"));)oe(ae,"hover-row hover-fixed-row"),ue--};return{handleDoubleClick:y,handleClick:i,handleContextMenu:k,handleMouseEnter:$,handleMouseLeave:L,handleCellMouseEnter:(ue,le,oe)=>{var ae;const Ue=r,de=getCell(ue),_e=(ae=Ue==null?void 0:Ue.vnode.el)==null?void 0:ae.dataset.prefix;if(de){const or=getColumnByCell({columns:t.store.states.columns.value},de,_e);de.rowSpan>1&&z(de.rowSpan,ue,addClass);const hr=Ue.hoverState={cell:de,column:or,row:le};Ue==null||Ue.emit("cell-mouse-enter",hr.row,hr.column,hr.cell,ue)}if(!oe)return;const Ve=ue.target.querySelector(".cell");if(!(hasClass(Ve,`${_e}-tooltip`)&&Ve.childNodes.length))return;const $e=document.createRange();$e.setStart(Ve,0),$e.setEnd(Ve,Ve.childNodes.length);let Lt=$e.getBoundingClientRect().width,jt=$e.getBoundingClientRect().height;Lt-Math.floor(Lt)<.001&&(Lt=Math.floor(Lt)),jt-Math.floor(jt)<.001&&(jt=Math.floor(jt));const{top:ur,left:Dt,right:lr,bottom:sr}=V(Ve),er=Dt+lr,cr=ur+sr;(Lt+er>Ve.offsetWidth||jt+cr>Ve.offsetHeight||Ve.scrollWidth>Ve.offsetWidth)&&createTablePopper(oe,de.innerText||de.textContent,de,Ue)},handleCellMouseLeave:ue=>{const le=getCell(ue);if(!le)return;le.rowSpan>1&&z(le.rowSpan,ue,removeClass);const oe=r==null?void 0:r.hoverState;r==null||r.emit("cell-mouse-leave",oe==null?void 0:oe.row,oe==null?void 0:oe.column,oe==null?void 0:oe.cell,ue)},tooltipContent:e,tooltipTrigger:n}}function useStyles(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table");return{getRowStyle:(L,V)=>{const z=r==null?void 0:r.props.rowStyle;return typeof z=="function"?z.call(null,{row:L,rowIndex:V}):z||null},getRowClass:(L,V)=>{const z=[e.e("row")];r!=null&&r.props.highlightCurrentRow&&L===t.store.states.currentRow.value&&z.push("current-row"),t.stripe&&V%2===1&&z.push(e.em("row","striped"));const re=r==null?void 0:r.props.rowClassName;return typeof re=="string"?z.push(re):typeof re=="function"&&z.push(re.call(null,{row:L,rowIndex:V})),z},getCellStyle:(L,V,z,re)=>{const ie=r==null?void 0:r.props.cellStyle;let ue=ie??{};typeof ie=="function"&&(ue=ie.call(null,{rowIndex:L,columnIndex:V,row:z,column:re}));const le=getFixedColumnOffset(V,t==null?void 0:t.fixed,t.store);return ensurePosition(le,"left"),ensurePosition(le,"right"),Object.assign({},ue,le)},getCellClass:(L,V,z,re,ie)=>{const ue=getFixedColumnsClass(e.b(),V,t==null?void 0:t.fixed,t.store,void 0,ie),le=[re.id,re.align,re.className,...ue],oe=r==null?void 0:r.props.cellClassName;return typeof oe=="string"?le.push(oe):typeof oe=="function"&&le.push(oe.call(null,{rowIndex:L,columnIndex:V,row:z,column:re})),le.push(e.e("cell")),le.filter(ae=>!!ae).join(" ")},getSpan:(L,V,z,re)=>{let ie=1,ue=1;const le=r==null?void 0:r.props.spanMethod;if(typeof le=="function"){const oe=le({row:L,column:V,rowIndex:z,columnIndex:re});Array.isArray(oe)?(ie=oe[0],ue=oe[1]):typeof oe=="object"&&(ie=oe.rowspan,ue=oe.colspan)}return{rowspan:ie,colspan:ue}},getColspanRealWidth:(L,V,z)=>{if(V<1)return L[z].realWidth;const re=L.map(({realWidth:ie,width:ue})=>ie||ue).slice(z,z+V);return Number(re.reduce((ie,ue)=>Number(ie)+Number(ue),-1))}}}function useRender$1(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table"),{handleDoubleClick:n,handleClick:g,handleContextMenu:y,handleMouseEnter:i,handleMouseLeave:k,handleCellMouseEnter:$,handleCellMouseLeave:L,tooltipContent:V,tooltipTrigger:z}=useEvents(t),{getRowStyle:re,getRowClass:ie,getCellStyle:ue,getCellClass:le,getSpan:oe,getColspanRealWidth:ae}=useStyles(t),Ue=computed(()=>t.store.states.columns.value.findIndex(({type:Lt})=>Lt==="default")),de=(Lt,jt)=>{const Et=r.props.rowKey;return Et?getRowIdentity(Lt,Et):jt},_e=(Lt,jt,Et,ir=!1)=>{const{tooltipEffect:ur,tooltipOptions:Dt,store:lr}=t,{indent:sr,columns:er}=lr.states,cr=ie(Lt,jt);let or=!0;return Et&&(cr.push(e.em("row",`level-${Et.level}`)),or=Et.display),h$1("tr",{style:[or?null:{display:"none"},re(Lt,jt)],class:cr,key:de(Lt,jt),onDblclick:pr=>n(pr,Lt),onClick:pr=>g(pr,Lt),onContextmenu:pr=>y(pr,Lt),onMouseenter:()=>i(jt),onMouseleave:k},er.value.map((pr,Tr)=>{const{rowspan:Pr,colspan:_r}=oe(Lt,pr,jt,Tr);if(!Pr||!_r)return null;const Mr=Object.assign({},pr);Mr.realWidth=ae(er.value,_r,Tr);const rr={store:t.store,_self:t.context||r,column:Mr,row:Lt,$index:jt,cellIndex:Tr,expanded:ir};Tr===Ue.value&&Et&&(rr.treeNode={indent:Et.level*sr.value,level:Et.level},typeof Et.expanded=="boolean"&&(rr.treeNode.expanded=Et.expanded,"loading"in Et&&(rr.treeNode.loading=Et.loading),"noLazyChildren"in Et&&(rr.treeNode.noLazyChildren=Et.noLazyChildren)));const kr=`${jt},${Tr}`,Er=Mr.columnKey||Mr.rawColumnKey||"",xr=Ve(Tr,pr,rr),vr=pr.showOverflowTooltip&&merge$2({effect:ur},Dt,pr.showOverflowTooltip);return h$1("td",{style:ue(jt,Tr,Lt,pr),class:le(jt,Tr,Lt,pr,_r-1),key:`${Er}${kr}`,rowspan:Pr,colspan:_r,onMouseenter:Ir=>$(Ir,Lt,vr),onMouseleave:L},[xr])}))},Ve=(Lt,jt,Et)=>jt.renderCell(Et);return{wrappedRowRender:(Lt,jt)=>{const Et=t.store,{isRowExpanded:ir,assertRowKey:ur}=Et,{treeData:Dt,lazyTreeNodeMap:lr,childrenColumnName:sr,rowKey:er}=Et.states,cr=Et.states.columns.value;if(cr.some(({type:hr})=>hr==="expand")){const hr=ir(Lt),pr=_e(Lt,jt,void 0,hr),Tr=r.renderExpanded;return hr?Tr?[[pr,h$1("tr",{key:`expanded-row__${pr.key}`},[h$1("td",{colspan:cr.length,class:`${e.e("cell")} ${e.e("expanded-cell")}`},[Tr({row:Lt,$index:jt,store:Et,expanded:hr})])])]]:(console.error("[Element Error]renderExpanded is required."),pr):[[pr]]}else if(Object.keys(Dt.value).length){ur();const hr=getRowIdentity(Lt,er.value);let pr=Dt.value[hr],Tr=null;pr&&(Tr={expanded:pr.expanded,level:pr.level,display:!0},typeof pr.lazy=="boolean"&&(typeof pr.loaded=="boolean"&&pr.loaded&&(Tr.noLazyChildren=!(pr.children&&pr.children.length)),Tr.loading=pr.loading));const Pr=[_e(Lt,jt,Tr)];if(pr){let _r=0;const Mr=(kr,Er)=>{kr&&kr.length&&Er&&kr.forEach(xr=>{const vr={display:Er.display&&Er.expanded,level:Er.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Ir=getRowIdentity(xr,er.value);if(Ir==null)throw new Error("For nested data item, row-key is required.");if(pr={...Dt.value[Ir]},pr&&(vr.expanded=pr.expanded,pr.level=pr.level||vr.level,pr.display=!!(pr.expanded&&vr.display),typeof pr.lazy=="boolean"&&(typeof pr.loaded=="boolean"&&pr.loaded&&(vr.noLazyChildren=!(pr.children&&pr.children.length)),vr.loading=pr.loading)),_r++,Pr.push(_e(xr,jt+_r,vr)),pr){const Or=lr.value[Ir]||xr[sr.value];Mr(Or,pr)}})};pr.display=!0;const rr=lr.value[hr]||Lt[sr.value];Mr(rr,pr)}return Pr}else return _e(Lt,jt,void 0)},tooltipContent:V,tooltipTrigger:z}}const defaultProps$2={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TableBody=defineComponent({name:"ElTableBody",props:defaultProps$2,setup(t){const r=getCurrentInstance(),e=inject(TABLE_INJECTION_KEY),n=useNamespace("table"),{wrappedRowRender:g,tooltipContent:y,tooltipTrigger:i}=useRender$1(t),{onColumnsChange:k,onScrollableChange:$}=useLayoutObserver(e),L=[];return watch(t.store.states.hoverRow,(V,z)=>{var re;const ie=r==null?void 0:r.vnode.el,ue=Array.from((ie==null?void 0:ie.children)||[]).filter(ae=>ae==null?void 0:ae.classList.contains(`${n.e("row")}`));let le=V;const oe=(re=ue[le])==null?void 0:re.childNodes;oe!=null&&oe.length?Array.from(oe).reduce((Ue,de,_e)=>{var Ve,$e;const Lt=((Ve=oe[_e-1])==null?void 0:Ve.colSpan)>1,jt=(($e=oe[_e+1])==null?void 0:$e.colSpan)>1;return de.nodeName!=="TD"&&!Lt&&!jt&&Ue.push(_e),Ue},[]).forEach(Ue=>{for(var de;le>0;){const _e=(de=ue[le-1])==null?void 0:de.childNodes;if(_e[Ue]&&_e[Ue].nodeName==="TD"){addClass(_e[Ue],"hover-cell"),L.push(_e[Ue]);break}le--}}):(L.forEach(ae=>removeClass(ae,"hover-cell")),L.length=0),!(!t.store.states.isComplex.value||!isClient)&&rAF(()=>{const ae=ue[z],Ue=ue[V];ae&&!ae.classList.contains("hover-fixed-row")&&removeClass(ae,"hover-row"),Ue&&addClass(Ue,"hover-row")})}),onUnmounted(()=>{var V;(V=removePopper)==null||V()}),{ns:n,onColumnsChange:k,onScrollableChange:$,wrappedRowRender:g,tooltipContent:y,tooltipTrigger:i}},render(){const{wrappedRowRender:t,store:r}=this,e=r.states.data.value||[];return h$1("tbody",{tabIndex:-1},[e.reduce((n,g)=>n.concat(t(g,n.length)),[])])}});function useMapState(){const t=inject(TABLE_INJECTION_KEY),r=t==null?void 0:t.store,e=computed(()=>r.states.fixedLeafColumnsLength.value),n=computed(()=>r.states.rightFixedColumns.value.length),g=computed(()=>r.states.columns.value.length),y=computed(()=>r.states.fixedColumns.value.length),i=computed(()=>r.states.rightFixedColumns.value.length);return{leftFixedLeafCount:e,rightFixedLeafCount:n,columnsCount:g,leftFixedCount:y,rightFixedCount:i,columns:r.states.columns}}function useStyle$1(t){const{columns:r}=useMapState(),e=useNamespace("table");return{getCellClasses:(y,i)=>{const k=y[i],$=[e.e("cell"),k.id,k.align,k.labelClassName,...getFixedColumnsClass(e.b(),i,k.fixed,t.store)];return k.className&&$.push(k.className),k.children||$.push(e.is("leaf")),$},getCellStyles:(y,i)=>{const k=getFixedColumnOffset(i,y.fixed,t.store);return ensurePosition(k,"left"),ensurePosition(k,"right"),k},columns:r}}var TableFooter=defineComponent({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:r,getCellStyles:e,columns:n}=useStyle$1(t);return{ns:useNamespace("table"),getCellClasses:r,getCellStyles:e,columns:n}},render(){const{columns:t,getCellStyles:r,getCellClasses:e,summaryMethod:n,sumText:g}=this,y=this.store.states.data.value;let i=[];return n?i=n({columns:t,data:y}):t.forEach((k,$)=>{if($===0){i[$]=g;return}const L=y.map(ie=>Number(ie[k.property])),V=[];let z=!0;L.forEach(ie=>{if(!Number.isNaN(+ie)){z=!1;const ue=`${ie}`.split(".")[1];V.push(ue?ue.length:0)}});const re=Math.max.apply(null,V);z?i[$]="":i[$]=L.reduce((ie,ue)=>{const le=Number(ue);return Number.isNaN(+le)?ie:Number.parseFloat((ie+ue).toFixed(Math.min(re,20)))},0)}),h$1(h$1("tfoot",[h$1("tr",{},[...t.map((k,$)=>h$1("td",{key:$,colspan:k.colSpan,rowspan:k.rowSpan,class:e(t,$),style:r(k,$)},[h$1("div",{class:["cell",k.labelClassName]},[i[$]])]))])]))}});function useUtils(t){return{setCurrentRow:V=>{t.commit("setCurrentRow",V)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(V,z)=>{t.toggleRowSelection(V,z,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:V=>{t.clearFilter(V)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(V,z)=>{t.toggleRowExpansionAdapter(V,z)},clearSort:()=>{t.clearSort()},sort:(V,z)=>{t.commit("sort",{prop:V,order:z})}}}function useStyle(t,r,e,n){const g=ref(!1),y=ref(null),i=ref(!1),k=pr=>{i.value=pr},$=ref({width:null,height:null,headerHeight:null}),L=ref(!1),V={display:"inline-block",verticalAlign:"middle"},z=ref(),re=ref(0),ie=ref(0),ue=ref(0),le=ref(0),oe=ref(0);watchEffect(()=>{r.setHeight(t.height)}),watchEffect(()=>{r.setMaxHeight(t.maxHeight)}),watch(()=>[t.currentRowKey,e.states.rowKey],([pr,Tr])=>{!unref(Tr)||!unref(pr)||e.setCurrentRowKey(`${pr}`)},{immediate:!0}),watch(()=>t.data,pr=>{n.store.commit("setData",pr)},{immediate:!0,deep:!0}),watchEffect(()=>{t.expandRowKeys&&e.setExpandRowKeysAdapter(t.expandRowKeys)});const ae=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},Ue=(pr,Tr)=>{const{pixelX:Pr,pixelY:_r}=Tr;Math.abs(Pr)>=Math.abs(_r)&&(n.refs.bodyWrapper.scrollLeft+=Tr.pixelX/5)},de=computed(()=>t.height||t.maxHeight||e.states.fixedColumns.value.length>0||e.states.rightFixedColumns.value.length>0),_e=computed(()=>({width:r.bodyWidth.value?`${r.bodyWidth.value}px`:""})),Ve=()=>{de.value&&r.updateElsHeight(),r.updateColumnsWidth(),requestAnimationFrame(Et)};onMounted(async()=>{await nextTick(),e.updateColumns(),ir(),requestAnimationFrame(Ve);const pr=n.vnode.el,Tr=n.refs.headerWrapper;t.flexible&&pr&&pr.parentElement&&(pr.parentElement.style.minWidth="0"),$.value={width:z.value=pr.offsetWidth,height:pr.offsetHeight,headerHeight:t.showHeader&&Tr?Tr.offsetHeight:null},e.states.columns.value.forEach(Pr=>{Pr.filteredValue&&Pr.filteredValue.length&&n.store.commit("filterChange",{column:Pr,values:Pr.filteredValue,silent:!0})}),n.$ready=!0});const $e=(pr,Tr)=>{if(!pr)return;const Pr=Array.from(pr.classList).filter(_r=>!_r.startsWith("is-scrolling-"));Pr.push(r.scrollX.value?Tr:"is-scrolling-none"),pr.className=Pr.join(" ")},Lt=pr=>{const{tableWrapper:Tr}=n.refs;$e(Tr,pr)},jt=pr=>{const{tableWrapper:Tr}=n.refs;return!!(Tr&&Tr.classList.contains(pr))},Et=function(){if(!n.refs.scrollBarRef)return;if(!r.scrollX.value){const Er="is-scrolling-none";jt(Er)||Lt(Er);return}const pr=n.refs.scrollBarRef.wrapRef;if(!pr)return;const{scrollLeft:Tr,offsetWidth:Pr,scrollWidth:_r}=pr,{headerWrapper:Mr,footerWrapper:rr}=n.refs;Mr&&(Mr.scrollLeft=Tr),rr&&(rr.scrollLeft=Tr);const kr=_r-Pr-1;Tr>=kr?Lt("is-scrolling-right"):Lt(Tr===0?"is-scrolling-left":"is-scrolling-middle")},ir=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&useEventListener(n.refs.scrollBarRef.wrapRef,"scroll",Et,{passive:!0}),t.fit?useResizeObserver(n.vnode.el,ur):useEventListener(window,"resize",ur),useResizeObserver(n.refs.bodyWrapper,()=>{var pr,Tr;ur(),(Tr=(pr=n.refs)==null?void 0:pr.scrollBarRef)==null||Tr.update()}))},ur=()=>{var pr,Tr,Pr,_r;const Mr=n.vnode.el;if(!n.$ready||!Mr)return;let rr=!1;const{width:kr,height:Er,headerHeight:xr}=$.value,vr=z.value=Mr.offsetWidth;kr!==vr&&(rr=!0);const Ir=Mr.offsetHeight;(t.height||de.value)&&Er!==Ir&&(rr=!0);const Or=t.tableLayout==="fixed"?n.refs.headerWrapper:(pr=n.refs.tableHeaderRef)==null?void 0:pr.$el;t.showHeader&&(Or==null?void 0:Or.offsetHeight)!==xr&&(rr=!0),re.value=((Tr=n.refs.tableWrapper)==null?void 0:Tr.scrollHeight)||0,ue.value=(Or==null?void 0:Or.scrollHeight)||0,le.value=((Pr=n.refs.footerWrapper)==null?void 0:Pr.offsetHeight)||0,oe.value=((_r=n.refs.appendWrapper)==null?void 0:_r.offsetHeight)||0,ie.value=re.value-ue.value-le.value-oe.value,rr&&($.value={width:vr,height:Ir,headerHeight:t.showHeader&&(Or==null?void 0:Or.offsetHeight)||0},Ve())},Dt=useFormSize(),lr=computed(()=>{const{bodyWidth:pr,scrollY:Tr,gutterWidth:Pr}=r;return pr.value?`${pr.value-(Tr.value?Pr:0)}px`:""}),sr=computed(()=>t.maxHeight?"fixed":t.tableLayout),er=computed(()=>{if(t.data&&t.data.length)return null;let pr="100%";t.height&&ie.value&&(pr=`${ie.value}px`);const Tr=z.value;return{width:Tr?`${Tr}px`:"",height:pr}}),cr=computed(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),or=computed(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${ue.value+le.value}px)`}:{maxHeight:`${t.maxHeight-ue.value-le.value}px`}:{});return{isHidden:g,renderExpanded:y,setDragVisible:k,isGroup:L,handleMouseLeave:ae,handleHeaderFooterMousewheel:Ue,tableSize:Dt,emptyBlockStyle:er,handleFixedMousewheel:(pr,Tr)=>{const Pr=n.refs.bodyWrapper;if(Math.abs(Tr.spinY)>0){const _r=Pr.scrollTop;Tr.pixelY<0&&_r!==0&&pr.preventDefault(),Tr.pixelY>0&&Pr.scrollHeight-Pr.clientHeight>_r&&pr.preventDefault(),Pr.scrollTop+=Math.ceil(Tr.pixelY/5)}else Pr.scrollLeft+=Math.ceil(Tr.pixelX/5)},resizeProxyVisible:i,bodyWidth:lr,resizeState:$,doLayout:Ve,tableBodyStyles:_e,tableLayout:sr,scrollbarViewStyle:V,tableInnerStyle:cr,scrollbarStyle:or}}function useKeyRender(t){const r=ref(),e=()=>{const g=t.vnode.el.querySelector(".hidden-columns"),y={childList:!0,subtree:!0},i=t.store.states.updateOrderFns;r.value=new MutationObserver(()=>{i.forEach(k=>k())}),r.value.observe(g,y)};onMounted(()=>{e()}),onUnmounted(()=>{var n;(n=r.value)==null||n.disconnect()})}var defaultProps$1={data:{type:Array,default:()=>[]},size:useSizeProp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function hColgroup(t){const r=t.tableLayout==="auto";let e=t.columns||[];r&&e.every(g=>g.width===void 0)&&(e=[]);const n=g=>{const y={key:`${t.tableLayout}_${g.id}`,style:{},name:void 0};return r?y.style={width:`${g.width}px`}:y.name=g.id,y};return h$1("colgroup",{},e.map(g=>h$1("col",n(g))))}hColgroup.props=["columns","tableLayout"];const useScrollbar=()=>{const t=ref(),r=(y,i)=>{const k=t.value;k&&k.scrollTo(y,i)},e=(y,i)=>{const k=t.value;k&&isNumber$1(i)&&["Top","Left"].includes(y)&&k[`setScroll${y}`](i)};return{scrollBarRef:t,scrollTo:r,setScrollTop:y=>e("Top",y),setScrollLeft:y=>e("Left",y)}};let tableIdSeed=1;const _sfc_main$l=defineComponent({name:"ElTable",directives:{Mousewheel},components:{TableHeader,TableBody,TableFooter,ElScrollbar,hColgroup},props:defaultProps$1,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:r}=useLocale(),e=useNamespace("table"),n=getCurrentInstance();provide(TABLE_INJECTION_KEY,n);const g=createStore(n,t);n.store=g;const y=new TableLayout({store:n.store,table:n,fit:t.fit,showHeader:t.showHeader});n.layout=y;const i=computed(()=>(g.states.data.value||[]).length===0),{setCurrentRow:k,getSelectionRows:$,toggleRowSelection:L,clearSelection:V,clearFilter:z,toggleAllSelection:re,toggleRowExpansion:ie,clearSort:ue,sort:le}=useUtils(g),{isHidden:oe,renderExpanded:ae,setDragVisible:Ue,isGroup:de,handleMouseLeave:_e,handleHeaderFooterMousewheel:Ve,tableSize:$e,emptyBlockStyle:Lt,handleFixedMousewheel:jt,resizeProxyVisible:Et,bodyWidth:ir,resizeState:ur,doLayout:Dt,tableBodyStyles:lr,tableLayout:sr,scrollbarViewStyle:er,tableInnerStyle:cr,scrollbarStyle:or}=useStyle(t,y,g,n),{scrollBarRef:hr,scrollTo:pr,setScrollLeft:Tr,setScrollTop:Pr}=useScrollbar(),_r=debounce(Dt,50),Mr=`${e.namespace.value}-table_${tableIdSeed++}`;n.tableId=Mr,n.state={isGroup:de,resizeState:ur,doLayout:Dt,debouncedUpdateLayout:_r};const rr=computed(()=>t.sumText||r("el.table.sumText")),kr=computed(()=>t.emptyText||r("el.table.emptyText"));return useKeyRender(n),{ns:e,layout:y,store:g,handleHeaderFooterMousewheel:Ve,handleMouseLeave:_e,tableId:Mr,tableSize:$e,isHidden:oe,isEmpty:i,renderExpanded:ae,resizeProxyVisible:Et,resizeState:ur,isGroup:de,bodyWidth:ir,tableBodyStyles:lr,emptyBlockStyle:Lt,debouncedUpdateLayout:_r,handleFixedMousewheel:jt,setCurrentRow:k,getSelectionRows:$,toggleRowSelection:L,clearSelection:V,clearFilter:z,toggleAllSelection:re,toggleRowExpansion:ie,clearSort:ue,doLayout:Dt,sort:le,t:r,setDragVisible:Ue,context:n,computedSumText:rr,computedEmptyText:kr,tableLayout:sr,scrollbarViewStyle:er,tableInnerStyle:cr,scrollbarStyle:or,scrollBarRef:hr,scrollTo:pr,setScrollLeft:Tr,setScrollTop:Pr}}}),_hoisted_1$f=["data-prefix"],_hoisted_2$9={ref:"hiddenColumns",class:"hidden-columns"};function _sfc_render$1(t,r,e,n,g,y){const i=resolveComponent("hColgroup"),k=resolveComponent("table-header"),$=resolveComponent("table-body"),L=resolveComponent("table-footer"),V=resolveComponent("el-scrollbar"),z=resolveDirective("mousewheel");return openBlock(),createElementBlock("div",{ref:"tableWrapper",class:normalizeClass([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:normalizeStyle(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:r[0]||(r[0]=(...re)=>t.handleMouseLeave&&t.handleMouseLeave(...re))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("inner-wrapper")),style:normalizeStyle(t.tableInnerStyle)},[createBaseVNode("div",_hoisted_2$9,[renderSlot(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"headerWrapper",class:normalizeClass(t.ns.e("header-wrapper"))},[createBaseVNode("table",{ref:"tableHeader",class:normalizeClass(t.ns.e("header")),style:normalizeStyle(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),createVNode(k,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[z,t.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"bodyWrapper",class:normalizeClass(t.ns.e("body-wrapper"))},[createVNode(V,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:withCtx(()=>[createBaseVNode("table",{ref:"tableBody",class:normalizeClass(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle({width:t.bodyWidth,tableLayout:t.tableLayout})},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(openBlock(),createBlock(k,{key:0,ref:"tableHeaderRef",class:normalizeClass(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):createCommentVNode("v-if",!0),createVNode($,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(openBlock(),createBlock(L,{key:1,class:normalizeClass(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):createCommentVNode("v-if",!0)],6),t.isEmpty?(openBlock(),createElementBlock("div",{key:0,ref:"emptyBlock",style:normalizeStyle(t.emptyBlockStyle),class:normalizeClass(t.ns.e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(t.ns.e("empty-text"))},[renderSlot(t.$slots,"empty",{},()=>[createTextVNode(toDisplayString(t.computedEmptyText),1)])],2)],6)):createCommentVNode("v-if",!0),t.$slots.append?(openBlock(),createElementBlock("div",{key:1,ref:"appendWrapper",class:normalizeClass(t.ns.e("append-wrapper"))},[renderSlot(t.$slots,"append")],2)):createCommentVNode("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary&&t.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:1,ref:"footerWrapper",class:normalizeClass(t.ns.e("footer-wrapper"))},[createBaseVNode("table",{class:normalizeClass(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle(t.tableBodyStyles)},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),createVNode(L,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[vShow,!t.isEmpty],[z,t.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),t.border||t.isGroup?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.ns.e("border-left-patch"))},null,2)):createCommentVNode("v-if",!0)],6),withDirectives(createBaseVNode("div",{ref:"resizeProxy",class:normalizeClass(t.ns.e("column-resize-proxy"))},null,2),[[vShow,t.resizeProxyVisible]])],46,_hoisted_1$f)}var Table=_export_sfc$1(_sfc_main$l,[["render",_sfc_render$1],["__file","table.vue"]]);const defaultClassNames={selection:"table-column--selection",expand:"table__expand-column"},cellStarts={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},getDefaultClassName=t=>defaultClassNames[t]||"",cellForced={selection:{renderHeader({store:t,column:r}){function e(){return t.states.data.value&&t.states.data.value.length===0}return h$1(ElCheckbox,{disabled:e(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:r.label})},renderCell({row:t,column:r,store:e,$index:n}){return h$1(ElCheckbox,{disabled:r.selectable?!r.selectable.call(null,t,n):!1,size:e.states.tableSize.value,onChange:()=>{e.commit("rowSelectedChanged",t)},onClick:g=>g.stopPropagation(),modelValue:e.isSelected(t),ariaLabel:r.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:r}){let e=r+1;const n=t.index;return typeof n=="number"?e=r+n:typeof n=="function"&&(e=n(r)),h$1("div",{},[e])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:r,expanded:e}){const{ns:n}=r,g=[n.e("expand-icon")];return e&&g.push(n.em("expand-icon","expanded")),h$1("div",{class:g,onClick:function(i){i.stopPropagation(),r.toggleRowExpansion(t)}},{default:()=>[h$1(ElIcon,null,{default:()=>[h$1(arrow_right_default)]})]})},sortable:!1,resizable:!1}};function defaultRenderCell({row:t,column:r,$index:e}){var n;const g=r.property,y=g&&getProp(t,g).value;return r&&r.formatter?r.formatter(t,r,y,e):((n=y==null?void 0:y.toString)==null?void 0:n.call(y))||""}function treeCellPrefix({row:t,treeNode:r,store:e},n=!1){const{ns:g}=e;if(!r)return n?[h$1("span",{class:g.e("placeholder")})]:null;const y=[],i=function(k){k.stopPropagation(),!r.loading&&e.loadOrToggle(t)};if(r.indent&&y.push(h$1("span",{class:g.e("indent"),style:{"padding-left":`${r.indent}px`}})),typeof r.expanded=="boolean"&&!r.noLazyChildren){const k=[g.e("expand-icon"),r.expanded?g.em("expand-icon","expanded"):""];let $=arrow_right_default;r.loading&&($=loading_default),y.push(h$1("div",{class:k,onClick:i},{default:()=>[h$1(ElIcon,{class:{[g.is("loading")]:r.loading}},{default:()=>[h$1($)]})]}))}else y.push(h$1("span",{class:g.e("placeholder")}));return y}function getAllAliases(t,r){return t.reduce((e,n)=>(e[n]=n,e),r)}function useWatcher(t,r){const e=getCurrentInstance();return{registerComplexWatchers:()=>{const y=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},k=getAllAliases(y,i);Object.keys(k).forEach($=>{const L=i[$];hasOwn(r,L)&&watch(()=>r[L],V=>{let z=V;L==="width"&&$==="realWidth"&&(z=parseWidth(V)),L==="minWidth"&&$==="realMinWidth"&&(z=parseMinWidth(V)),e.columnConfig.value[L]=z,e.columnConfig.value[$]=z;const re=L==="fixed";t.value.store.scheduleLayout(re)})})},registerNormalWatchers:()=>{const y=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},k=getAllAliases(y,i);Object.keys(k).forEach($=>{const L=i[$];hasOwn(r,L)&&watch(()=>r[L],V=>{e.columnConfig.value[$]=V})})}}}function useRender(t,r,e){const n=getCurrentInstance(),g=ref(""),y=ref(!1),i=ref(),k=ref(),$=useNamespace("table");watchEffect(()=>{i.value=t.align?`is-${t.align}`:null,i.value}),watchEffect(()=>{k.value=t.headerAlign?`is-${t.headerAlign}`:i.value,k.value});const L=computed(()=>{let _e=n.vnode.vParent||n.parent;for(;_e&&!_e.tableId&&!_e.columnId;)_e=_e.vnode.vParent||_e.parent;return _e}),V=computed(()=>{const{store:_e}=n.parent;if(!_e)return!1;const{treeData:Ve}=_e.states,$e=Ve.value;return $e&&Object.keys($e).length>0}),z=ref(parseWidth(t.width)),re=ref(parseMinWidth(t.minWidth)),ie=_e=>(z.value&&(_e.width=z.value),re.value&&(_e.minWidth=re.value),!z.value&&re.value&&(_e.width=void 0),_e.minWidth||(_e.minWidth=80),_e.realWidth=Number(_e.width===void 0?_e.minWidth:_e.width),_e),ue=_e=>{const Ve=_e.type,$e=cellForced[Ve]||{};Object.keys($e).forEach(jt=>{const Et=$e[jt];jt!=="className"&&Et!==void 0&&(_e[jt]=Et)});const Lt=getDefaultClassName(Ve);if(Lt){const jt=`${unref($.namespace)}-${Lt}`;_e.className=_e.className?`${_e.className} ${jt}`:jt}return _e},le=_e=>{Array.isArray(_e)?_e.forEach($e=>Ve($e)):Ve(_e);function Ve($e){var Lt;((Lt=$e==null?void 0:$e.type)==null?void 0:Lt.name)==="ElTableColumn"&&($e.vParent=n)}};return{columnId:g,realAlign:i,isSubColumn:y,realHeaderAlign:k,columnOrTableParent:L,setColumnWidth:ie,setColumnForcedProps:ue,setColumnRenders:_e=>{t.renderHeader||_e.type!=="selection"&&(_e.renderHeader=$e=>(n.columnConfig.value.label,renderSlot(r,"header",$e,()=>[_e.label])));let Ve=_e.renderCell;return _e.type==="expand"?(_e.renderCell=$e=>h$1("div",{class:"cell"},[Ve($e)]),e.value.renderExpanded=$e=>r.default?r.default($e):r.default):(Ve=Ve||defaultRenderCell,_e.renderCell=$e=>{let Lt=null;if(r.default){const lr=r.default($e);Lt=lr.some(sr=>sr.type!==Comment)?lr:Ve($e)}else Lt=Ve($e);const{columns:jt}=e.value.store.states,Et=jt.value.findIndex(lr=>lr.type==="default"),ir=V.value&&$e.cellIndex===Et,ur=treeCellPrefix($e,ir),Dt={class:"cell",style:{}};return _e.showOverflowTooltip&&(Dt.class=`${Dt.class} ${unref($.namespace)}-tooltip`,Dt.style={width:`${($e.column.realWidth||Number($e.column.width))-1}px`}),le(Lt),h$1("div",Dt,[ur,Lt])}),_e},getPropsData:(..._e)=>_e.reduce((Ve,$e)=>(Array.isArray($e)&&$e.forEach(Lt=>{Ve[Lt]=t[Lt]}),Ve),{}),getColumnElIndex:(_e,Ve)=>Array.prototype.indexOf.call(_e,Ve),updateColumnOrder:()=>{e.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var defaultProps={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(r=>["ascending","descending",null].includes(r))}};let columnIdSeed=1;var ElTableColumn$1=defineComponent({name:"ElTableColumn",components:{ElCheckbox},props:defaultProps,setup(t,{slots:r}){const e=getCurrentInstance(),n=ref({}),g=computed(()=>{let de=e.parent;for(;de&&!de.tableId;)de=de.parent;return de}),{registerNormalWatchers:y,registerComplexWatchers:i}=useWatcher(g,t),{columnId:k,isSubColumn:$,realHeaderAlign:L,columnOrTableParent:V,setColumnWidth:z,setColumnForcedProps:re,setColumnRenders:ie,getPropsData:ue,getColumnElIndex:le,realAlign:oe,updateColumnOrder:ae}=useRender(t,r,g),Ue=V.value;k.value=`${Ue.tableId||Ue.columnId}_column_${columnIdSeed++}`,onBeforeMount(()=>{$.value=g.value!==Ue;const de=t.type||"default",_e=t.sortable===""?!0:t.sortable,Ve=isUndefined$1(t.showOverflowTooltip)?Ue.props.showOverflowTooltip:t.showOverflowTooltip,$e={...cellStarts[de],id:k.value,type:de,property:t.prop||t.property,align:oe,headerAlign:L,showOverflowTooltip:Ve,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:_e,index:t.index,rawColumnKey:e.vnode.key};let ur=ue(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);ur=mergeOptions($e,ur),ur=compose(ie,z,re)(ur),n.value=ur,y(),i()}),onMounted(()=>{var de;const _e=V.value,Ve=$.value?_e.vnode.el.children:(de=_e.refs.hiddenColumns)==null?void 0:de.children,$e=()=>le(Ve||[],e.vnode.el);n.value.getColumnIndex=$e,$e()>-1&&g.value.store.commit("insertColumn",n.value,$.value?_e.columnConfig.value:null,ae)}),onBeforeUnmount(()=>{g.value.store.commit("removeColumn",n.value,$.value?Ue.columnConfig.value:null,ae)}),e.columnId=k.value,e.columnConfig=n},render(){var t,r,e;try{const n=(r=(t=this.$slots).default)==null?void 0:r.call(t,{row:{},column:{},$index:-1}),g=[];if(Array.isArray(n))for(const i of n)((e=i.type)==null?void 0:e.name)==="ElTableColumn"||i.shapeFlag&2?g.push(i):i.type===Fragment&&Array.isArray(i.children)&&i.children.forEach(k=>{(k==null?void 0:k.patchFlag)!==1024&&!isString$2(k==null?void 0:k.children)&&g.push(k)});return h$1("div",g)}catch{return h$1("div",[])}}});const ElTable=withInstall(Table,{TableColumn:ElTableColumn$1}),ElTableColumn=withNoopInstall(ElTableColumn$1),uploadContextKey=Symbol("uploadContextKey"),SCOPE$1="ElUpload";class UploadAjaxError extends Error{constructor(r,e,n,g){super(r),this.name="UploadAjaxError",this.status=e,this.method=n,this.url=g}}function getError(t,r,e){let n;return e.response?n=`${e.response.error||e.response}`:e.responseText?n=`${e.responseText}`:n=`fail to ${r.method} ${t} ${e.status}`,new UploadAjaxError(n,e.status,r.method,t)}function getBody(t){const r=t.responseText||t.response;if(!r)return r;try{return JSON.parse(r)}catch{return r}}const ajaxUpload=t=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$1,"XMLHttpRequest is undefined");const r=new XMLHttpRequest,e=t.action;r.upload&&r.upload.addEventListener("progress",y=>{const i=y;i.percent=y.total>0?y.loaded/y.total*100:0,t.onProgress(i)});const n=new FormData;if(t.data)for(const[y,i]of Object.entries(t.data))isArray$3(i)&&i.length?n.append(y,...i):n.append(y,i);n.append(t.filename,t.file,t.file.name),r.addEventListener("error",()=>{t.onError(getError(e,t,r))}),r.addEventListener("load",()=>{if(r.status<200||r.status>=300)return t.onError(getError(e,t,r));t.onSuccess(getBody(r))}),r.open(t.method,e,!0),t.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0);const g=t.headers||{};if(g instanceof Headers)g.forEach((y,i)=>r.setRequestHeader(i,y));else for(const[y,i]of Object.entries(g))isNil(i)||r.setRequestHeader(y,String(i));return r.send(n),r},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:definePropType([Object,Function,Promise]),default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP},crossorigin:{type:definePropType(String)}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"},crossorigin:{type:definePropType(String)}}),uploadListEmits={remove:t=>!!t},_hoisted_1$e=["onKeydown"],_hoisted_2$8=["src","crossorigin"],_hoisted_3$6=["onClick"],_hoisted_4$4=["title"],_hoisted_5$3=["onClick"],_hoisted_6$1=["onClick"],__default__$4=defineComponent({name:"ElUploadList"}),_sfc_main$k=defineComponent({...__default__$4,props:uploadListProps,emits:uploadListEmits,setup(t,{emit:r}){const e=t,{t:n}=useLocale(),g=useNamespace("upload"),y=useNamespace("icon"),i=useNamespace("list"),k=useFormDisabled(),$=ref(!1),L=computed(()=>[g.b("list"),g.bm("list",e.listType),g.is("disabled",e.disabled)]),V=z=>{r("remove",z)};return(z,re)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass(unref(L)),name:unref(i).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.files,ie=>(openBlock(),createElementBlock("li",{key:ie.uid||ie.name,class:normalizeClass([unref(g).be("list","item"),unref(g).is(ie.status),{focusing:$.value}]),tabindex:"0",onKeydown:withKeys(ue=>!unref(k)&&V(ie),["delete"]),onFocus:re[0]||(re[0]=ue=>$.value=!0),onBlur:re[1]||(re[1]=ue=>$.value=!1),onClick:re[2]||(re[2]=ue=>$.value=!1)},[renderSlot(z.$slots,"default",{file:ie},()=>[z.listType==="picture"||ie.status!=="uploading"&&z.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(g).be("list","item-thumbnail")),src:ie.url,crossorigin:z.crossorigin,alt:""},null,10,_hoisted_2$8)):createCommentVNode("v-if",!0),ie.status==="uploading"||z.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(g).be("list","item-name")),onClick:withModifiers(ue=>z.handlePreview(ie),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-file-name")),title:ie.name},toDisplayString(ie.name),11,_hoisted_4$4)],10,_hoisted_3$6),ie.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:z.listType==="picture-card"?"circle":"line","stroke-width":z.listType==="picture-card"?6:2,percentage:Number(ie.percentage),style:normalizeStyle(z.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(g).be("list","item-status-label"))},[z.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(z.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).m("close")),onClick:ue=>V(ie)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(y).m("close-tip"))},toDisplayString(unref(n)("el.upload.deleteTip")),3)),z.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(g).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-preview")),onClick:ue=>z.handlePreview(ie)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$3),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).be("list","item-delete")),onClick:ue=>V(ie)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$1))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$e))),128)),renderSlot(z.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc$1(_sfc_main$k,[["__file","upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:t=>isArray$3(t)},_hoisted_1$d=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$3=defineComponent({name:COMPONENT_NAME}),_sfc_main$j=defineComponent({...__default__$3,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(t,{emit:r}){const e=inject(uploadContextKey);e||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=useNamespace("upload"),g=ref(!1),y=useFormDisabled(),i=$=>{if(y.value)return;g.value=!1,$.stopPropagation();const L=Array.from($.dataTransfer.files),V=e.accept.value;if(!V){r("file",L);return}const z=L.filter(re=>{const{type:ie,name:ue}=re,le=ue.includes(".")?`.${ue.split(".").pop()}`:"",oe=ie.replace(/\/.*$/,"");return V.split(",").map(ae=>ae.trim()).filter(ae=>ae).some(ae=>ae.startsWith(".")?le===ae:/\/\*$/.test(ae)?oe===ae.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(ae)?ie===ae:!1)});r("file",z)},k=()=>{y.value||(g.value=!0)};return($,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b("dragger"),unref(n).is("dragover",g.value)]),onDrop:withModifiers(i,["prevent"]),onDragover:withModifiers(k,["prevent"]),onDragleave:L[0]||(L[0]=withModifiers(V=>g.value=!1,["prevent"]))},[renderSlot($.$slots,"default")],42,_hoisted_1$d))}});var UploadDragger=_export_sfc$1(_sfc_main$j,[["__file","upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$c=["onKeydown"],_hoisted_2$7=["name","multiple","accept"],__default__$2=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$i=defineComponent({...__default__$2,props:uploadContentProps,setup(t,{expose:r}){const e=t,n=useNamespace("upload"),g=useFormDisabled(),y=shallowRef({}),i=shallowRef(),k=le=>{if(le.length===0)return;const{autoUpload:oe,limit:ae,fileList:Ue,multiple:de,onStart:_e,onExceed:Ve}=e;if(ae&&Ue.length+le.length>ae){Ve(le,Ue);return}de||(le=le.slice(0,1));for(const $e of le){const Lt=$e;Lt.uid=genFileId(),_e(Lt),oe&&$(Lt)}},$=async le=>{if(i.value.value="",!e.beforeUpload)return V(le);let oe,ae={};try{const de=e.data,_e=e.beforeUpload(le);ae=isPlainObject$2(e.data)?cloneDeep(e.data):e.data,oe=await _e,isPlainObject$2(e.data)&&isEqual(de,ae)&&(ae=cloneDeep(e.data))}catch{oe=!1}if(oe===!1){e.onRemove(le);return}let Ue=le;oe instanceof Blob&&(oe instanceof File?Ue=oe:Ue=new File([oe],le.name,{type:le.type})),V(Object.assign(Ue,{uid:le.uid}),ae)},L=async(le,oe)=>isFunction$3(le)?le(oe):le,V=async(le,oe)=>{const{headers:ae,data:Ue,method:de,withCredentials:_e,name:Ve,action:$e,onProgress:Lt,onSuccess:jt,onError:Et,httpRequest:ir}=e;try{oe=await L(oe??Ue,le)}catch{e.onRemove(le);return}const{uid:ur}=le,Dt={headers:ae||{},withCredentials:_e,file:le,data:oe,method:de,filename:Ve,action:$e,onProgress:sr=>{Lt(sr,le)},onSuccess:sr=>{jt(sr,le),delete y.value[ur]},onError:sr=>{Et(sr,le),delete y.value[ur]}},lr=ir(Dt);y.value[ur]=lr,lr instanceof Promise&&lr.then(Dt.onSuccess,Dt.onError)},z=le=>{const oe=le.target.files;oe&&k(Array.from(oe))},re=()=>{g.value||(i.value.value="",i.value.click())},ie=()=>{re()};return r({abort:le=>{entriesOf(y.value).filter(le?([ae])=>String(le.uid)===ae:()=>!0).forEach(([ae,Ue])=>{Ue instanceof XMLHttpRequest&&Ue.abort(),delete y.value[ae]})},upload:$}),(le,oe)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(le.listType),unref(n).is("drag",le.drag)]),tabindex:"0",onClick:re,onKeydown:withKeys(withModifiers(ie,["self"]),["enter","space"])},[le.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(g),onFile:k},{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},8,["disabled"])):renderSlot(le.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:i,class:normalizeClass(unref(n).e("input")),name:le.name,multiple:le.multiple,accept:le.accept,type:"file",onChange:z,onClick:oe[0]||(oe[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$7)],42,_hoisted_1$c))}});var UploadContent=_export_sfc$1(_sfc_main$i,[["__file","upload-content.vue"]]);const SCOPE="ElUpload",revokeFileObjectURL=t=>{var r;(r=t.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(t.url)},useHandlers=(t,r)=>{const e=useVModel(t,"fileList",void 0,{passive:!0}),n=re=>e.value.find(ie=>ie.uid===re.uid);function g(re){var ie;(ie=r.value)==null||ie.abort(re)}function y(re=["ready","uploading","success","fail"]){e.value=e.value.filter(ie=>!re.includes(ie.status))}const i=(re,ie)=>{const ue=n(ie);ue&&(console.error(re),ue.status="fail",e.value.splice(e.value.indexOf(ue),1),t.onError(re,ue,e.value),t.onChange(ue,e.value))},k=(re,ie)=>{const ue=n(ie);ue&&(t.onProgress(re,ue,e.value),ue.status="uploading",ue.percentage=Math.round(re.percent))},$=(re,ie)=>{const ue=n(ie);ue&&(ue.status="success",ue.response=re,t.onSuccess(re,ue,e.value),t.onChange(ue,e.value))},L=re=>{isNil(re.uid)&&(re.uid=genFileId());const ie={name:re.name,percentage:0,status:"ready",size:re.size,raw:re,uid:re.uid};if(t.listType==="picture-card"||t.listType==="picture")try{ie.url=URL.createObjectURL(re)}catch(ue){ue.message,t.onError(ue,ie,e.value)}e.value=[...e.value,ie],t.onChange(ie,e.value)},V=async re=>{const ie=re instanceof File?n(re):re;ie||throwError(SCOPE,"file to be removed not found");const ue=le=>{g(le);const oe=e.value;oe.splice(oe.indexOf(le),1),t.onRemove(le,oe),revokeFileObjectURL(le)};t.beforeRemove?await t.beforeRemove(ie,e.value)!==!1&&ue(ie):ue(ie)};function z(){e.value.filter(({status:re})=>re==="ready").forEach(({raw:re})=>{var ie;return re&&((ie=r.value)==null?void 0:ie.upload(re))})}return watch(()=>t.listType,re=>{re!=="picture-card"&&re!=="picture"||(e.value=e.value.map(ie=>{const{raw:ue,url:le}=ie;if(!le&&ue)try{ie.url=URL.createObjectURL(ue)}catch(oe){t.onError(oe,ie,e.value)}return ie}))}),watch(e,re=>{for(const ie of re)ie.uid||(ie.uid=genFileId()),ie.status||(ie.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:g,clearFiles:y,handleError:i,handleProgress:k,handleStart:L,handleSuccess:$,handleRemove:V,submit:z,revokeFileObjectURL}},__default__$1=defineComponent({name:"ElUpload"}),_sfc_main$h=defineComponent({...__default__$1,props:uploadProps,setup(t,{expose:r}){const e=t,n=useFormDisabled(),g=shallowRef(),{abort:y,submit:i,clearFiles:k,uploadFiles:$,handleStart:L,handleError:V,handleRemove:z,handleSuccess:re,handleProgress:ie,revokeFileObjectURL:ue}=useHandlers(e,g),le=computed(()=>e.listType==="picture-card"),oe=computed(()=>({...e,fileList:$.value,onStart:L,onProgress:ie,onSuccess:re,onError:V,onRemove:z}));return onBeforeUnmount(()=>{$.value.forEach(ue)}),provide(uploadContextKey,{accept:toRef(e,"accept")}),r({abort:y,submit:i,clearFiles:k,handleStart:L,handleRemove:z}),(ae,Ue)=>(openBlock(),createElementBlock("div",null,[unref(le)&&ae.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(n),"list-type":ae.listType,files:unref($),crossorigin:ae.crossorigin,"handle-preview":ae.onPreview,onRemove:unref(z)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:g},unref(oe)),{default:withCtx(()=>[ae.$slots.trigger?renderSlot(ae.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!ae.$slots.trigger&&ae.$slots.default?renderSlot(ae.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[ae.$slots.file?{name:"default",fn:withCtx(({file:de})=>[renderSlot(ae.$slots,"file",{file:de})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(le)||unref(le)&&!ae.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:g},unref(oe)),{default:withCtx(()=>[ae.$slots.trigger?renderSlot(ae.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!ae.$slots.trigger&&ae.$slots.default?renderSlot(ae.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),ae.$slots.trigger?renderSlot(ae.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(ae.$slots,"tip"),!unref(le)&&ae.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(n),"list-type":ae.listType,files:unref($),crossorigin:ae.crossorigin,"handle-preview":ae.onPreview,onRemove:unref(z)},createSlots({_:2},[ae.$slots.file?{name:"default",fn:withCtx(({file:de})=>[renderSlot(ae.$slots,"file",{file:de})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc$1(_sfc_main$h,[["__file","upload.vue"]]);const ElUpload=withInstall(Upload),messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),required:!1},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=t=>{const r=instances.findIndex(g=>g.id===t),e=instances[r];let n;return r>0&&(n=instances[r-1]),{current:e,prev:n}},getLastOffset=t=>{const{prev:r}=getInstance(t);return r?r.vm.exposed.bottom.value:0},getOffsetOrSpace=(t,r)=>instances.findIndex(n=>n.id===t)>0?20:r,_hoisted_1$b=["id"],_hoisted_2$6=["innerHTML"],__default__=defineComponent({name:"ElMessage"}),_sfc_main$g=defineComponent({...__default__,props:messageProps,emits:messageEmits,setup(t,{expose:r}){const e=t,{Close:n}=TypeComponents,{ns:g,zIndex:y}=useGlobalComponentSettings("message"),{currentZIndex:i,nextZIndex:k}=y,$=ref(),L=ref(!1),V=ref(0);let z;const re=computed(()=>e.type?e.type==="error"?"danger":e.type:"info"),ie=computed(()=>{const Lt=e.type;return{[g.bm("icon",Lt)]:Lt&&TypeComponentsMap[Lt]}}),ue=computed(()=>e.icon||TypeComponentsMap[e.type]||""),le=computed(()=>getLastOffset(e.id)),oe=computed(()=>getOffsetOrSpace(e.id,e.offset)+le.value),ae=computed(()=>V.value+oe.value),Ue=computed(()=>({top:`${oe.value}px`,zIndex:i.value}));function de(){e.duration!==0&&({stop:z}=useTimeoutFn(()=>{Ve()},e.duration))}function _e(){z==null||z()}function Ve(){L.value=!1}function $e({code:Lt}){Lt===EVENT_CODE.esc&&Ve()}return onMounted(()=>{de(),k(),L.value=!0}),watch(()=>e.repeatNum,()=>{_e(),de()}),useEventListener(document,"keydown",$e),useResizeObserver($,()=>{V.value=$.value.getBoundingClientRect().height}),r({visible:L,bottom:ae,close:Ve}),(Lt,jt)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),onBeforeLeave:Lt.onClose,onAfterLeave:jt[0]||(jt[0]=Et=>Lt.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Lt.id,ref_key:"messageRef",ref:$,class:normalizeClass([unref(g).b(),{[unref(g).m(Lt.type)]:Lt.type},unref(g).is("center",Lt.center),unref(g).is("closable",Lt.showClose),Lt.customClass]),style:normalizeStyle(unref(Ue)),role:"alert",onMouseenter:_e,onMouseleave:de},[Lt.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:Lt.repeatNum,type:unref(re),class:normalizeClass(unref(g).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(ue)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(g).e("icon"),unref(ie)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(Lt.$slots,"default",{},()=>[Lt.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(g).e("content")),innerHTML:Lt.message},null,10,_hoisted_2$6)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(g).e("content"))},toDisplayString(Lt.message),3))]),Lt.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(g).e("closeBtn")),onClick:withModifiers(Ve,["stop"])},{default:withCtx(()=>[createVNode(unref(n))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$b),[[vShow,L.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc$1(_sfc_main$g,[["__file","message.vue"]]);let seed=1;const normalizeOptions=t=>{const r=!t||isString$2(t)||isVNode(t)||isFunction$3(t)?{message:t}:t,e={...messageDefaults,...r};if(!e.appendTo)e.appendTo=document.body;else if(isString$2(e.appendTo)){let n=document.querySelector(e.appendTo);isElement(n)||(n=document.body),e.appendTo=n}return e},closeMessage=t=>{const r=instances.indexOf(t);if(r===-1)return;instances.splice(r,1);const{handler:e}=t;e.close()},createMessage=({appendTo:t,...r},e)=>{const n=`message_${seed++}`,g=r.onClose,y=document.createElement("div"),i={...r,id:n,onClose:()=>{g==null||g(),closeMessage(V)},onDestroy:()=>{render(null,y)}},k=createVNode(MessageConstructor,i,isFunction$3(i.message)||isVNode(i.message)?{default:isFunction$3(i.message)?i.message:()=>i.message}:null);k.appContext=e||message._context,render(k,y),t.appendChild(y.firstElementChild);const $=k.component,V={id:n,vnode:k,vm:$,handler:{close:()=>{$.exposed.visible.value=!1}},props:k.component.props};return V},message=(t={},r)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const e=normalizeOptions(t);if(e.grouping&&instances.length){const g=instances.find(({vnode:y})=>{var i;return((i=y.props)==null?void 0:i.message)===e.message});if(g)return g.props.repeatNum+=1,g.props.type=e.type,g.handler}const n=createMessage(e,r);return instances.push(n),n.handler};messageTypes.forEach(t=>{message[t]=(r={},e)=>{const n=normalizeOptions(r);return message({...n,type:t},e)}});function closeAll(t){for(const r of instances)(!t||t===r.props.type)&&r.handler.close()}message.closeAll=closeAll;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$f=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:r}){const{locale:e,zIndex:n,ns:g,size:y}=useGlobalComponentSettings("message-box",computed(()=>t.buttonSize)),{t:i}=e,{nextZIndex:k}=n,$=ref(!1),L=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:k()}),V=computed(()=>{const cr=L.type;return{[g.bm("icon",cr)]:cr&&TypeComponentsMap[cr]}}),z=useId(),re=useId(),ie=computed(()=>L.icon||TypeComponentsMap[L.type]||""),ue=computed(()=>!!L.message),le=ref(),oe=ref(),ae=ref(),Ue=ref(),de=ref(),_e=computed(()=>L.confirmButtonClass);watch(()=>L.inputValue,async cr=>{await nextTick(),t.boxType==="prompt"&&cr!==null&&Dt()},{immediate:!0}),watch(()=>$.value,cr=>{var or,hr;cr&&(t.boxType!=="prompt"&&(L.autofocus?ae.value=(hr=(or=de.value)==null?void 0:or.$el)!=null?hr:le.value:ae.value=le.value),L.zIndex=k()),t.boxType==="prompt"&&(cr?nextTick().then(()=>{var pr;Ue.value&&Ue.value.$el&&(L.autofocus?ae.value=(pr=lr())!=null?pr:le.value:ae.value=le.value)}):(L.editorErrorMessage="",L.validateError=!1))});const Ve=computed(()=>t.draggable),$e=computed(()=>t.overflow);useDraggable(le,oe,Ve,$e),onMounted(async()=>{await nextTick(),t.closeOnHashChange&&window.addEventListener("hashchange",Lt)}),onBeforeUnmount(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",Lt)});function Lt(){$.value&&($.value=!1,nextTick(()=>{L.action&&r("action",L.action)}))}const jt=()=>{t.closeOnClickModal&&ur(L.distinguishCancelAndClose?"close":"cancel")},Et=useSameTarget(jt),ir=cr=>{if(L.inputType!=="textarea")return cr.preventDefault(),ur("confirm")},ur=cr=>{var or;t.boxType==="prompt"&&cr==="confirm"&&!Dt()||(L.action=cr,L.beforeClose?(or=L.beforeClose)==null||or.call(L,cr,L,Lt):Lt())},Dt=()=>{if(t.boxType==="prompt"){const cr=L.inputPattern;if(cr&&!cr.test(L.inputValue||""))return L.editorErrorMessage=L.inputErrorMessage||i("el.messagebox.error"),L.validateError=!0,!1;const or=L.inputValidator;if(typeof or=="function"){const hr=or(L.inputValue);if(hr===!1)return L.editorErrorMessage=L.inputErrorMessage||i("el.messagebox.error"),L.validateError=!0,!1;if(typeof hr=="string")return L.editorErrorMessage=hr,L.validateError=!0,!1}}return L.editorErrorMessage="",L.validateError=!1,!0},lr=()=>{const cr=Ue.value.$refs;return cr.input||cr.textarea},sr=()=>{ur("close")},er=()=>{t.closeOnPressEscape&&sr()};return t.lockScroll&&useLockscreen($),{...toRefs(L),ns:g,overlayEvent:Et,visible:$,hasMessage:ue,typeClass:V,contentId:z,inputId:re,btnSize:y,iconComponent:ie,confirmButtonClasses:_e,rootRef:le,focusStartRef:ae,headerRef:oe,inputRef:Ue,confirmRef:de,doClose:Lt,handleClose:sr,onCloseRequested:er,handleWrapperClick:jt,handleInputEnter:ir,handleAction:ur,t:i}}}),_hoisted_1$a=["aria-label","aria-describedby"],_hoisted_2$5=["aria-label"],_hoisted_3$5=["id"];function _sfc_render(t,r,e,n,g,y){const i=resolveComponent("el-icon"),k=resolveComponent("close"),$=resolveComponent("el-input"),L=resolveComponent("el-button"),V=resolveComponent("el-focus-trap"),z=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:r[11]||(r[11]=re=>t.$emit("vanish")),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(z,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:normalizeClass(`${t.ns.namespace.value}-overlay-message-box`),onClick:r[8]||(r[8]=(...re)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...re)),onMousedown:r[9]||(r[9]=(...re)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...re)),onMouseup:r[10]||(r[10]=(...re)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...re))},[createVNode(V,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:normalizeStyle(t.customStyle),tabindex:"-1",onClick:r[7]||(r[7]=withModifiers(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass([t.ns.e("header"),{"show-close":t.showClose}])},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.iconComponent&&t.center?(openBlock(),createBlock(i,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString(t.title),1)],2),t.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:r[0]||(r[0]=re=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:r[1]||(r[1]=withKeys(withModifiers(re=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[createVNode(i,{class:normalizeClass(t.ns.e("close"))},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class"])],42,_hoisted_2$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:t.contentId,class:normalizeClass(t.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(openBlock(),createBlock(i,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("message"))},[renderSlot(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(t.ns.e("input"))},[createVNode($,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":r[2]||(r[2]=re=>t.inputValue=re),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:normalizeClass({invalid:t.validateError}),onKeydown:withKeys(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(t.ns.e("errormsg")),style:normalizeStyle({visibility:t.editorErrorMessage?"visible":"hidden"})},toDisplayString(t.editorErrorMessage),7)],2),[[vShow,t.showInput]])],10,_hoisted_3$5),createBaseVNode("div",{class:normalizeClass(t.ns.e("btns"))},[t.showCancelButton?(openBlock(),createBlock(L,{key:0,loading:t.cancelButtonLoading,class:normalizeClass([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:r[3]||(r[3]=re=>t.handleAction("cancel")),onKeydown:r[4]||(r[4]=withKeys(withModifiers(re=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):createCommentVNode("v-if",!0),withDirectives(createVNode(L,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:normalizeClass([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:r[5]||(r[5]=re=>t.handleAction("confirm")),onKeydown:r[6]||(r[6]=withKeys(withModifiers(re=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vShow,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_hoisted_1$a)]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,t.visible]])]),_:3})}var MessageBoxConstructor=_export_sfc$1(_sfc_main$f,[["render",_sfc_render],["__file","index.vue"]]);const messageInstance=new Map,getAppendToElement=t=>{let r=document.body;return t.appendTo&&(isString$2(t.appendTo)&&(r=document.querySelector(t.appendTo)),isElement(t.appendTo)&&(r=t.appendTo),isElement(r)||(r=document.body)),r},initInstance=(t,r,e=null)=>{const n=createVNode(MessageBoxConstructor,t,isFunction$3(t.message)||isVNode(t.message)?{default:isFunction$3(t.message)?t.message:()=>t.message}:null);return n.appContext=e,render(n,r),getAppendToElement(t).appendChild(r.firstElementChild),n.component},genContainer=()=>document.createElement("div"),showMessage=(t,r)=>{const e=genContainer();t.onVanish=()=>{render(null,e),messageInstance.delete(g)},t.onAction=y=>{const i=messageInstance.get(g);let k;t.showInput?k={value:g.inputValue,action:y}:k=y,t.callback?t.callback(k,n.proxy):y==="cancel"||y==="close"?t.distinguishCancelAndClose&&y!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(k)};const n=initInstance(t,e,r),g=n.proxy;for(const y in t)hasOwn(t,y)&&!hasOwn(g.$props,y)&&(g[y]=t[y]);return g.visible=!0,g};function MessageBox(t,r=null){if(!isClient)return Promise.reject();let e;return isString$2(t)||isVNode(t)?t={message:t}:e=t.callback,new Promise((n,g)=>{const y=showMessage(t,r??MessageBox._context);messageInstance.set(y,{options:t,callback:e,resolve:n,reject:g})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(t=>{MessageBox[t]=messageBoxFactory(t)});function messageBoxFactory(t){return(r,e,n,g)=>{let y="";return isObject$2(e)?(n=e,y=""):isUndefined$1(e)?y="":y=e,MessageBox(Object.assign({title:y,message:r,type:"",...MESSAGE_BOX_DEFAULT_OPTS[t]},n,{boxType:t}),g)}}MessageBox.close=()=>{messageInstance.forEach((t,r)=>{r.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=t=>{_MessageBox._context=t._context,t.config.globalProperties.$msgbox=_MessageBox,t.config.globalProperties.$messageBox=_MessageBox,t.config.globalProperties.$alert=_MessageBox.alert,t.config.globalProperties.$confirm=_MessageBox.confirm,t.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,base="",elContainer="",elAside="",elFooter="",elHeader="",elMain="",elCard="",elScrollbar="",elMenu="",elTooltip="",elPopper="",elSubMenu="",elMenuItem="",elIcon="",elDivider="",elRow="",elCol="",_imports_0=""+new URL("rocket.gif",import.meta.url).href,_imports_1=""+new URL("rocket.png",import.meta.url).href,logApi=()=>({add:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,y.type=="link"&&(y.color="#409eff"),k.push(y),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},addRange:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,y.forEach($=>k.push($)),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},getLogs:()=>{try{var y=localStorage.getItem("localLog"),i;if(y)i=JSON.parse(y);else return;return i}catch{return}},addSystem:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,k.push({type:"system",time:new Date().toLocaleString(),content:y}),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},clearLog:()=>{localStorage.removeItem("localLog")}});function bind(t,r){return function(){return t.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>r=>{const e=toString.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),r=>kindOf(r)===t),typeOfTest=t=>r=>typeof r===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&isArrayBuffer(t.buffer),r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const r=getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((r=kindOf(t))==="formdata"||r==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,g;if(typeof t!="object"&&(t=[t]),isArray(t))for(n=0,g=t.length;n<g;n++)r.call(null,t[n],n,t);else{const y=e?Object.getOwnPropertyNames(t):Object.keys(t),i=y.length;let k;for(n=0;n<i;n++)k=y[n],r.call(null,t[k],k,t)}}function findKey(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,g;for(;n-- >0;)if(g=e[n],r===g.toLowerCase())return g;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},r={},e=(n,g)=>{const y=t&&findKey(r,g)||g;isPlainObject(r[y])&&isPlainObject(n)?r[y]=merge(r[y],n):isPlainObject(n)?r[y]=merge({},n):isArray(n)?r[y]=n.slice():r[y]=n};for(let n=0,g=arguments.length;n<g;n++)arguments[n]&&forEach(arguments[n],e);return r}const extend=(t,r,e,{allOwnKeys:n}={})=>(forEach(r,(g,y)=>{e&&isFunction(g)?t[y]=bind(g,e):t[y]=g},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},toFlatObject=(t,r,e,n)=>{let g,y,i;const k={};if(r=r||{},t==null)return r;do{for(g=Object.getOwnPropertyNames(t),y=g.length;y-- >0;)i=g[y],(!n||n(i,t,r))&&!k[i]&&(r[i]=t[i],k[i]=!0);t=e!==!1&&getPrototypeOf(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},endsWith=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},toArray=t=>{if(!t)return null;if(isArray(t))return t;let r=t.length;if(!isNumber(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},isTypedArray=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let g;for(;(g=n.next())&&!g.done;){const y=g.value;r.call(t,y[0],y[1])}},matchAll=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,g){return n.toUpperCase()+g}),hasOwnProperty=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};forEach(e,(g,y)=>{let i;(i=r(g,y,t))!==!1&&(n[y]=i||g)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(r,e)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(isFunction(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(t,r)=>{const e={},n=g=>{g.forEach(y=>{e[y]=!0})};return isArray(t)?n(t):n(String(t).split(r)),e},noop=()=>{},toFiniteNumber=(t,r)=>(t=+t,Number.isFinite(t)?t:r),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,r=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const r=new Array(10),e=(n,g)=>{if(isObject(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[g]=n;const y=isArray(n)?[]:{};return forEach(n,(i,k)=>{const $=e(i,g+1);!isUndefined($)&&(y[k]=$)}),r[g]=void 0,y}}return n};return e(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(t,r,e,n,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),g&&(this.response=g)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,r,e,n,g,y)=>{const i=Object.create(prototype$1);return utils$1.toFlatObject(t,i,function($){return $!==Error.prototype},k=>k!=="isAxiosError"),AxiosError.call(i,t.message,r,e,n,g),i.cause=t,i.name=t.name,y&&Object.assign(i,y),i};const httpAdapter=null;function isVisitable(t){return utils$1.isPlainObject(t)||utils$1.isArray(t)}function removeBrackets(t){return utils$1.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,r,e){return t?t.concat(r).map(function(g,y){return g=removeBrackets(g),!e&&y?"["+g+"]":g}).join(e?".":""):r}function isFlatArray(t){return utils$1.isArray(t)&&!t.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(t,r,e){if(!utils$1.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=utils$1.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(le,oe){return!utils$1.isUndefined(oe[le])});const n=e.metaTokens,g=e.visitor||V,y=e.dots,i=e.indexes,$=(e.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(r);if(!utils$1.isFunction(g))throw new TypeError("visitor must be a function");function L(ue){if(ue===null)return"";if(utils$1.isDate(ue))return ue.toISOString();if(!$&&utils$1.isBlob(ue))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(ue)||utils$1.isTypedArray(ue)?$&&typeof Blob=="function"?new Blob([ue]):Buffer.from(ue):ue}function V(ue,le,oe){let ae=ue;if(ue&&!oe&&typeof ue=="object"){if(utils$1.endsWith(le,"{}"))le=n?le:le.slice(0,-2),ue=JSON.stringify(ue);else if(utils$1.isArray(ue)&&isFlatArray(ue)||(utils$1.isFileList(ue)||utils$1.endsWith(le,"[]"))&&(ae=utils$1.toArray(ue)))return le=removeBrackets(le),ae.forEach(function(de,_e){!(utils$1.isUndefined(de)||de===null)&&r.append(i===!0?renderKey([le],_e,y):i===null?le:le+"[]",L(de))}),!1}return isVisitable(ue)?!0:(r.append(renderKey(oe,le,y),L(ue)),!1)}const z=[],re=Object.assign(predicates,{defaultVisitor:V,convertValue:L,isVisitable});function ie(ue,le){if(!utils$1.isUndefined(ue)){if(z.indexOf(ue)!==-1)throw Error("Circular reference detected in "+le.join("."));z.push(ue),utils$1.forEach(ue,function(ae,Ue){(!(utils$1.isUndefined(ae)||ae===null)&&g.call(r,ae,utils$1.isString(Ue)?Ue.trim():Ue,le,re))===!0&&ie(ae,le?le.concat(Ue):[Ue])}),z.pop()}}if(!utils$1.isObject(t))throw new TypeError("data must be an object");return ie(t),r}function encode$1(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function AxiosURLSearchParams(t,r){this._pairs=[],t&&toFormData(t,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,e){this._pairs.push([r,e])};prototype.toString=function(r){const e=r?function(n){return r.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(g){return e(g[0])+"="+e(g[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,r,e){if(!r)return t;const n=e&&e.encode||encode,g=e&&e.serialize;let y;if(g?y=g(r,e):y=utils$1.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,e).toString(n),y){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+y}return t}class InterceptorManager{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils$1.forEach(this.handlers,function(n){n!==null&&r(n)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(t=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(t,r){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,g,y){return platform.isNode&&utils$1.isBuffer(e)?(this.append(n,e.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(t){return utils$1.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(t){const r={},e=Object.keys(t);let n;const g=e.length;let y;for(n=0;n<g;n++)y=e[n],r[y]=t[y];return r}function formDataToJSON(t){function r(e,n,g,y){let i=e[y++];if(i==="__proto__")return!0;const k=Number.isFinite(+i),$=y>=e.length;return i=!i&&utils$1.isArray(g)?g.length:i,$?(utils$1.hasOwnProp(g,i)?g[i]=[g[i],n]:g[i]=n,!k):((!g[i]||!utils$1.isObject(g[i]))&&(g[i]=[]),r(e,n,g[i],y)&&utils$1.isArray(g[i])&&(g[i]=arrayToObject(g[i])),!k)}if(utils$1.isFormData(t)&&utils$1.isFunction(t.entries)){const e={};return utils$1.forEachEntry(t,(n,g)=>{r(parsePropPath(n),g,e,0)}),e}return null}function stringifySafely(t,r,e){if(utils$1.isString(t))try{return(r||JSON.parse)(t),utils$1.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(r,e){const n=e.getContentType()||"",g=n.indexOf("application/json")>-1,y=utils$1.isObject(r);if(y&&utils$1.isHTMLForm(r)&&(r=new FormData(r)),utils$1.isFormData(r))return g?JSON.stringify(formDataToJSON(r)):r;if(utils$1.isArrayBuffer(r)||utils$1.isBuffer(r)||utils$1.isStream(r)||utils$1.isFile(r)||utils$1.isBlob(r))return r;if(utils$1.isArrayBufferView(r))return r.buffer;if(utils$1.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let k;if(y){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((k=utils$1.isFileList(r))||n.indexOf("multipart/form-data")>-1){const $=this.env&&this.env.FormData;return toFormData(k?{"files[]":r}:r,$&&new $,this.formSerializer)}}return y||g?(e.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,g=this.responseType==="json";if(r&&utils$1.isString(r)&&(n&&!this.responseType||g)){const i=!(e&&e.silentJSONParsing)&&g;try{return JSON.parse(r)}catch(k){if(i)throw k.name==="SyntaxError"?AxiosError.from(k,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):k}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],t=>{defaults.headers[t]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const r={};let e,n,g;return t&&t.split(`
`).forEach(function(i){g=i.indexOf(":"),e=i.substring(0,g).trim().toLowerCase(),n=i.substring(g+1).trim(),!(!e||r[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils$1.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,r,e,n,g){if(utils$1.isFunction(n))return n.call(this,r,e);if(g&&(r=e),!!utils$1.isString(r)){if(utils$1.isString(n))return r.indexOf(n)!==-1;if(utils$1.isRegExp(n))return n.test(r)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function buildAccessors(t,r){const e=utils$1.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(g,y,i){return this[n].call(this,r,g,y,i)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,e,n){const g=this;function y(k,$,L){const V=normalizeHeader($);if(!V)throw new Error("header name must be a non-empty string");const z=utils$1.findKey(g,V);(!z||g[z]===void 0||L===!0||L===void 0&&g[z]!==!1)&&(g[z||$]=normalizeValue(k))}const i=(k,$)=>utils$1.forEach(k,(L,V)=>y(L,V,$));return utils$1.isPlainObject(r)||r instanceof this.constructor?i(r,e):utils$1.isString(r)&&(r=r.trim())&&!isValidHeaderName(r)?i(parseHeaders(r),e):r!=null&&y(e,r,n),this}get(r,e){if(r=normalizeHeader(r),r){const n=utils$1.findKey(this,r);if(n){const g=this[n];if(!e)return g;if(e===!0)return parseTokens(g);if(utils$1.isFunction(e))return e.call(this,g,n);if(utils$1.isRegExp(e))return e.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=normalizeHeader(r),r){const n=utils$1.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let g=!1;function y(i){if(i=normalizeHeader(i),i){const k=utils$1.findKey(n,i);k&&(!e||matchHeaderValue(n,n[k],k,e))&&(delete n[k],g=!0)}}return utils$1.isArray(r)?r.forEach(y):y(r),g}clear(r){const e=Object.keys(this);let n=e.length,g=!1;for(;n--;){const y=e[n];(!r||matchHeaderValue(this,this[y],y,r,!0))&&(delete this[y],g=!0)}return g}normalize(r){const e=this,n={};return utils$1.forEach(this,(g,y)=>{const i=utils$1.findKey(n,y);if(i){e[i]=normalizeValue(g),delete e[y];return}const k=r?formatHeader(y):String(y).trim();k!==y&&delete e[y],e[k]=normalizeValue(g),n[k]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return utils$1.forEach(this,(n,g)=>{n!=null&&n!==!1&&(e[g]=r&&utils$1.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(g=>n.set(g)),n}static accessor(r){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,g=this.prototype;function y(i){const k=normalizeHeader(i);n[k]||(buildAccessors(g,i),n[k]=!0)}return utils$1.isArray(r)?r.forEach(y):y(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[e]=n}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,r){const e=this||defaults$1,n=r||e,g=AxiosHeaders$1.from(n.headers);let y=n.data;return utils$1.forEach(t,function(k){y=k.call(e,y,g.normalize(),r?r.status:void 0)}),g.normalize(),y}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,r,e){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,r,e),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const cookies=platform.hasStandardBrowserEnv?{write(t,r,e,n,g,y){const i=[t+"="+encodeURIComponent(r)];utils$1.isNumber(e)&&i.push("expires="+new Date(e).toGMTString()),utils$1.isString(n)&&i.push("path="+n),utils$1.isString(g)&&i.push("domain="+g),y===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function buildFullPath(t,r){return t&&!isAbsoluteURL(r)?combineURLs(t,r):r}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function g(y){let i=y;return r&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=g(window.location.href),function(i){const k=utils$1.isString(i)?g(i):i;return k.protocol===n.protocol&&k.host===n.host}}():function(){return function(){return!0}}();function parseProtocol(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function speedometer(t,r){t=t||10;const e=new Array(t),n=new Array(t);let g=0,y=0,i;return r=r!==void 0?r:1e3,function($){const L=Date.now(),V=n[y];i||(i=L),e[g]=$,n[g]=L;let z=y,re=0;for(;z!==g;)re+=e[z++],z=z%t;if(g=(g+1)%t,g===y&&(y=(y+1)%t),L-i<r)return;const ie=V&&L-V;return ie?Math.round(re*1e3/ie):void 0}}function progressEventReducer(t,r){let e=0;const n=speedometer(50,250);return g=>{const y=g.loaded,i=g.lengthComputable?g.total:void 0,k=y-e,$=n(k),L=y<=i;e=y;const V={loaded:y,total:i,progress:i?y/i:void 0,bytes:k,rate:$||void 0,estimated:$&&i&&L?(i-y)/$:void 0,event:g};V[r?"download":"upload"]=!0,t(V)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(e,n){let g=t.data;const y=AxiosHeaders$1.from(t.headers).normalize();let{responseType:i,withXSRFToken:k}=t,$;function L(){t.cancelToken&&t.cancelToken.unsubscribe($),t.signal&&t.signal.removeEventListener("abort",$)}let V;if(utils$1.isFormData(g)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)y.setContentType(!1);else if((V=y.getContentType())!==!1){const[le,...oe]=V?V.split(";").map(ae=>ae.trim()).filter(Boolean):[];y.setContentType([le||"multipart/form-data",...oe].join("; "))}}let z=new XMLHttpRequest;if(t.auth){const le=t.auth.username||"",oe=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.set("Authorization","Basic "+btoa(le+":"+oe))}const re=buildFullPath(t.baseURL,t.url);z.open(t.method.toUpperCase(),buildURL(re,t.params,t.paramsSerializer),!0),z.timeout=t.timeout;function ie(){if(!z)return;const le=AxiosHeaders$1.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders()),ae={data:!i||i==="text"||i==="json"?z.responseText:z.response,status:z.status,statusText:z.statusText,headers:le,config:t,request:z};settle(function(de){e(de),L()},function(de){n(de),L()},ae),z=null}if("onloadend"in z?z.onloadend=ie:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(ie)},z.onabort=function(){z&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,z)),z=null)},z.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,z)),z=null},z.ontimeout=function(){let oe=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const ae=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(oe=t.timeoutErrorMessage),n(new AxiosError(oe,ae.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,z)),z=null},platform.hasStandardBrowserEnv&&(k&&utils$1.isFunction(k)&&(k=k(t)),k||k!==!1&&isURLSameOrigin(re))){const le=t.xsrfHeaderName&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);le&&y.set(t.xsrfHeaderName,le)}g===void 0&&y.setContentType(null),"setRequestHeader"in z&&utils$1.forEach(y.toJSON(),function(oe,ae){z.setRequestHeader(ae,oe)}),utils$1.isUndefined(t.withCredentials)||(z.withCredentials=!!t.withCredentials),i&&i!=="json"&&(z.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&z.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&z.upload&&z.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&($=le=>{z&&(n(!le||le.type?new CanceledError(null,t,z):le),z.abort(),z=null)},t.cancelToken&&t.cancelToken.subscribe($),t.signal&&(t.signal.aborted?$():t.signal.addEventListener("abort",$)));const ue=parseProtocol(re);if(ue&&platform.protocols.indexOf(ue)===-1){n(new AxiosError("Unsupported protocol "+ue+":",AxiosError.ERR_BAD_REQUEST,t));return}z.send(g||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils$1.isFunction(t)||t===null||t===!1,adapters={getAdapter:t=>{t=utils$1.isArray(t)?t:[t];const{length:r}=t;let e,n;const g={};for(let y=0;y<r;y++){e=t[y];let i;if(n=e,!isResolvedHandle(e)&&(n=knownAdapters[(i=String(e)).toLowerCase()],n===void 0))throw new AxiosError(`Unknown adapter '${i}'`);if(n)break;g[i||"#"+y]=n}if(!n){const y=Object.entries(g).map(([k,$])=>`adapter ${k} `+($===!1?"is not supported by the environment":"is not available in the build"));let i=r?y.length>1?`since :
`+y.map(renderReason).join(`
`):" "+renderReason(y[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,r){r=r||{};const e={};function n(L,V,z){return utils$1.isPlainObject(L)&&utils$1.isPlainObject(V)?utils$1.merge.call({caseless:z},L,V):utils$1.isPlainObject(V)?utils$1.merge({},V):utils$1.isArray(V)?V.slice():V}function g(L,V,z){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined(L))return n(void 0,L,z)}else return n(L,V,z)}function y(L,V){if(!utils$1.isUndefined(V))return n(void 0,V)}function i(L,V){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined(L))return n(void 0,L)}else return n(void 0,V)}function k(L,V,z){if(z in r)return n(L,V);if(z in t)return n(void 0,L)}const $={url:y,method:y,data:y,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:k,headers:(L,V)=>g(headersToObject(L),headersToObject(V),!0)};return utils$1.forEach(Object.keys(Object.assign({},t,r)),function(V){const z=$[V]||g,re=z(t[V],r[V],V);utils$1.isUndefined(re)&&z!==k||(e[V]=re)}),e}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(r,e,n){function g(y,i){return"[Axios v"+VERSION+"] Transitional option '"+y+"'"+i+(n?". "+n:"")}return(y,i,k)=>{if(r===!1)throw new AxiosError(g(i," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0,console.warn(g(i," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(y,i,k):!0}};function assertOptions(t,r,e){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let g=n.length;for(;g-- >0;){const y=n[g],i=r[y];if(i){const k=t[y],$=k===void 0||i(k,y,t);if($!==!0)throw new AxiosError("option "+y+" must be "+$,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+y,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(r,e){try{return await this._request(r,e)}catch(n){if(n instanceof Error){let g;Error.captureStackTrace?Error.captureStackTrace(g={}):g=new Error;const y=g.stack?g.stack.replace(/^.+\n/,""):"";n.stack?y&&!String(n.stack).endsWith(y.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+y):n.stack=y}throw n}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=mergeConfig(this.defaults,e);const{transitional:n,paramsSerializer:g,headers:y}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),g!=null&&(utils$1.isFunction(g)?e.paramsSerializer={serialize:g}:validator.assertOptions(g,{encode:validators.function,serialize:validators.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=y&&utils$1.merge(y.common,y[e.method]);y&&utils$1.forEach(["delete","get","head","post","put","patch","common"],ue=>{delete y[ue]}),e.headers=AxiosHeaders$1.concat(i,y);const k=[];let $=!0;this.interceptors.request.forEach(function(le){typeof le.runWhen=="function"&&le.runWhen(e)===!1||($=$&&le.synchronous,k.unshift(le.fulfilled,le.rejected))});const L=[];this.interceptors.response.forEach(function(le){L.push(le.fulfilled,le.rejected)});let V,z=0,re;if(!$){const ue=[dispatchRequest.bind(this),void 0];for(ue.unshift.apply(ue,k),ue.push.apply(ue,L),re=ue.length,V=Promise.resolve(e);z<re;)V=V.then(ue[z++],ue[z++]);return V}re=k.length;let ie=e;for(z=0;z<re;){const ue=k[z++],le=k[z++];try{ie=ue(ie)}catch(oe){le.call(this,oe);break}}try{V=dispatchRequest.call(this,ie)}catch(ue){return Promise.reject(ue)}for(z=0,re=L.length;z<re;)V=V.then(L[z++],L[z++]);return V}getUri(r){r=mergeConfig(this.defaults,r);const e=buildFullPath(r.baseURL,r.url);return buildURL(e,r.params,r.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,n){return this.request(mergeConfig(n||{},{method:r,url:e,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function(r){function e(n){return function(y,i,k){return this.request(mergeConfig(k||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:y,data:i}))}}Axios.prototype[r]=e(),Axios.prototype[r+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(y){e=y});const n=this;this.promise.then(g=>{if(!n._listeners)return;let y=n._listeners.length;for(;y-- >0;)n._listeners[y](g);n._listeners=null}),this.promise.then=g=>{let y;const i=new Promise(k=>{n.subscribe(k),y=k}).then(g);return i.cancel=function(){n.unsubscribe(y)},i},r(function(y,i,k){n.reason||(n.reason=new CanceledError(y,i,k),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new CancelToken(function(g){r=g}),cancel:r}}}const CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(t){return utils$1.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,r])=>{HttpStatusCode[r]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const r=new Axios$1(t),e=bind(Axios$1.prototype.request,r);return utils$1.extend(e,Axios$1.prototype,r,{allOwnKeys:!0}),utils$1.extend(e,r,null,{allOwnKeys:!0}),e.create=function(g){return createInstance(mergeConfig(t,g))},e}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(r){return Promise.all(r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils$1.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,_port=sessionStorage.getItem("HttpPort")||5266,_baseUrl=`http://154.201.76.32:${_port}/api/v1`,ApiPrefix=_baseUrl,startBot=async(t=!0)=>(await axios$1.get(`${_baseUrl}/startbot?botReady=${t}`)).data,getConfig=async()=>(await axios$1.get(`${_baseUrl}/getconfig`)).data,saveConfig=async t=>(await axios$1.post(`${_baseUrl}/saveconfig`,t)).data,postMsg=async(t,r=0)=>(await axios$1.post(`${_baseUrl}/postmsg?type=`+r,t)).data,getCache=async t=>(await axios$1.get(`${_baseUrl}/getCache?pageIndex=${t.pageIndex}&pageSize=${t.pageSize}`)).data,saveImg=async t=>(await axios$1.get(`${_baseUrl}/saveimg/${t}`)).data,delImg=async t=>(await axios$1.get(`${_baseUrl}/delimg/${t}`)).data,getFun=async()=>(await axios$1.get(`${_baseUrl}/getfun`)).data,startPlugin=async t=>(await axios$1.get(`${_baseUrl}/startplugin?name=${t}`)).data,stopPlugin=async t=>(await axios$1.get(`${_baseUrl}/stopplugin?name=${t}`)).data,delPlugin=async t=>(await axios$1.get(`${_baseUrl}/delplugin?name=${t}`)).data,startAliYunPan=async()=>(await axios$1.get(`${_baseUrl}/startaliyunpan`)).data,searchIdol=async(t,r)=>(await axios$1.get(`${_baseUrl}/searchidol?group=${t}&name=${r}`)).data,sendSmsCode=async(t,r="86")=>(await axios$1.get(`${_baseUrl}/sendsmscode?mobile=${t}&area=${r}`)).data,pocketLogin=async(t,r)=>(await axios$1.get(`${_baseUrl}/pocketlogin?mobile=${t}&code=${r}`)).data,kdUserInfo=async t=>(await axios$1.post(`${_baseUrl}/kduserinfo`,t)).data,openWindow=async t=>(await axios$1.get(`${_baseUrl}/openwindow?url=${t}`)).data,getLogs=async()=>(await axios$1.get(`${_baseUrl}/getlogs`)).data;var NIM_Web_SDK={exports:{}};/*!
 * 
 * VERSION: 9.14.4
 * Git Hash: 98d1c9786af772ff439f12534089825e2c3c6776
 * 
 * Create At: 2024/2/23 3:43:35
 * 
 * Target: NIM_Web_SDK
 */(function(module,exports){(function(t,r){module.exports=r()})(window,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var g=r[n]={i:n,l:!1,exports:{}};return t[n].call(g.exports,g,g.exports,e),g.l=!0,g.exports}return e.m=t,e.c=r,e.d=function(n,g,y){e.o(n,g)||Object.defineProperty(n,g,{enumerable:!0,get:y})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,g){if(1&g&&(n=e(n)),8&g||4&g&&typeof n=="object"&&n&&n.__esModule)return n;var y=Object.create(null);if(e.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:n}),2&g&&typeof n!="string")for(var i in n)e.d(y,i,(function(k){return n[k]}).bind(null,i));return y},e.n=function(n){var g=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(g,"a",g),g},e.o=function(n,g){return Object.prototype.hasOwnProperty.call(n,g)},e.p="",e(e.s=916)}([function(t,r,e){var n=e(51),g=e(2),y=e(7),i=e(15),k=e(4),$=e(121),L=e(71),V=e(122),z=e(32),re=e(6),ie=e(9),ue=e(8),le=e(123),oe=e(141),ae=e(24),Ue=e(16),de=e(462),_e=e(466),Ve=e(3),$e=e(88),Lt=e(89),jt=e(72),Et=e(52),ir=e(53),ur=e(54),Dt=e(55),lr=e(43),sr=e(22);function er(Cr,yr){var fr=k(Cr);if(Et){var Sr=Et(Cr);yr&&(Sr=Ue(Sr).call(Sr,function(Br){return ir(Cr,Br).enumerable})),fr.push.apply(fr,Sr)}return fr}function cr(Cr,yr){var fr=Lt!==void 0&&jt(Cr)||Cr["@@iterator"];if(!fr){if(z(Cr)||(fr=function(qr,Yr){var bn;if(qr){if(typeof qr=="string")return or(qr,Yr);var wn=i(bn=Object.prototype.toString.call(qr)).call(bn,8,-1);if(wn==="Object"&&qr.constructor&&(wn=qr.constructor.name),wn==="Map"||wn==="Set")return $e(qr);if(wn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(wn))return or(qr,Yr)}}(Cr))||yr&&Cr&&typeof Cr.length=="number"){fr&&(Cr=fr);var Sr=0,Br=function(){};return{s:Br,n:function(){return Sr>=Cr.length?{done:!0}:{done:!1,value:Cr[Sr++]}},e:function(qr){throw qr},f:Br}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $r,Lr=!0,Gr=!1;return{s:function(){fr=fr.call(Cr)},n:function(){var qr=fr.next();return Lr=qr.done,qr},e:function(qr){Gr=!0,$r=qr},f:function(){try{Lr||fr.return==null||fr.return()}finally{if(Gr)throw $r}}}}function or(Cr,yr){(yr==null||yr>Cr.length)&&(yr=Cr.length);for(var fr=0,Sr=new Array(yr);fr<yr;fr++)Sr[fr]=Cr[fr];return Sr}var hr=e(256),pr=e(200);function Tr(Cr){sr(Cr)==="object"?(this.callFunc=Cr.callFunc||null,this.message=Cr.message||"UNKNOW ERROR"):this.message=Cr,this.time=new Date,this.timetag=+this.time}e(490);var Pr,_r,Mr=e(62),rr=Mr.getGlobal(),kr=/\s+/;Mr.deduplicate=function(Cr){var yr=[];return g(Cr).call(Cr,function(fr){y(yr).call(yr,fr)===-1&&yr.push(fr)}),yr},Mr.capFirstLetter=function(Cr){return Cr?i(Cr=""+Cr).call(Cr,0,1).toUpperCase()+i(Cr).call(Cr,1):""},Mr.guid=(Pr=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Pr()+Pr()+Pr()+Pr()+Pr()+Pr()+Pr()+Pr()}),Mr.extend=function(Cr,yr,fr){for(var Sr in yr)Cr[Sr]!==void 0&&fr!==!0||(Cr[Sr]=yr[Sr])},Mr.filterObj=function(Cr,yr){var fr={};return Mr.isString(yr)&&(yr=yr.split(kr)),g(yr).call(yr,function(Sr){Cr.hasOwnProperty(Sr)&&(fr[Sr]=Cr[Sr])}),fr},Mr.copy=function(Cr,yr){var fr;return yr=yr||{},Cr&&g(fr=k(Cr)).call(fr,function(Sr){Mr.exist(Cr[Sr])&&(yr[Sr]=Cr[Sr])}),yr},Mr.copyWithNull=function(Cr,yr){var fr;return yr=yr||{},Cr&&g(fr=k(Cr)).call(fr,function(Sr){(Mr.exist(Cr[Sr])||Mr.isnull(Cr[Sr]))&&(yr[Sr]=Cr[Sr])}),yr},Mr.findObjIndexInArray=function(Cr,yr){Cr=Cr||[];var fr=yr.keyPath||"id",Sr=-1;return $(Cr).call(Cr,function(Br,$r){if(pr(Br,fr)===yr.value)return Sr=$r,!0}),Sr},Mr.findObjInArray=function(Cr,yr){var fr=Mr.findObjIndexInArray(Cr,yr);return fr===-1?null:Cr[fr]},Mr.mergeObjArray=function(){var Cr=[],yr=i([]).call(arguments,0,-1),fr=arguments[arguments.length-1];Mr.isArray(fr)&&(yr.push(fr),fr={});var Sr,Br=fr.keyPath=fr.keyPath||"id";for(fr.sortPath=fr.sortPath||Br;!Cr.length&&yr.length;)Cr=yr.shift()||[],Cr=i(Cr).call(Cr,0);return g(yr).call(yr,function($r){$r&&g($r).call($r,function(Lr){(Sr=Mr.findObjIndexInArray(Cr,{keyPath:Br,value:pr(Lr,Br)}))!==-1?Cr[Sr]=Mr.merge({},Cr[Sr],Lr):Cr.push(Lr)})}),fr.notSort||(Cr=Mr.sortObjArray(Cr,fr)),Cr},Mr.cutObjArray=function(Cr){var yr=i(Cr).call(Cr,0),fr=arguments.length,Sr=i([]).call(arguments,1,fr-1),Br=arguments[fr-1];Mr.isObject(Br)||(Sr.push(Br),Br={});var $r,Lr=Br.keyPath=Br.keyPath||"id";return g(Sr).call(Sr,function(Gr){Mr.isArray(Gr)||(Gr=[Gr]),g(Gr).call(Gr,function(qr){qr&&(Br.value=pr(qr,Lr),($r=Mr.findObjIndexInArray(yr,Br))!==-1&&L(yr).call(yr,$r,1))})}),yr},Mr.sortObjArray=function(Cr,yr){var fr=(yr=yr||{}).sortPath||"id";hr.insensitive=!!yr.insensitive;var Sr,Br,$r,Lr=!!yr.desc;return $r=Mr.isFunction(yr.compare)?yr.compare:function(Gr,qr){return Sr=pr(Gr,fr),Br=pr(qr,fr),Lr?hr(Br,Sr):hr(Sr,Br)},V(Cr).call(Cr,$r)},Mr.emptyFunc=function(){},Mr.isEmptyFunc=function(Cr){return Cr===Mr.emptyFunc},Mr.notEmptyFunc=function(Cr){return Cr!==Mr.emptyFunc},Mr.splice=function(Cr,yr,fr){return L([]).call(Cr,yr,fr)},Mr.reshape2d=function(Cr,yr){if(z(Cr)){Mr.verifyParamType("type",yr,"number","util::reshape2d");var fr=Cr.length;if(fr<=yr)return[Cr];for(var Sr=Math.ceil(fr/yr),Br=[],$r=0;$r<Sr;$r++)Br.push(i(Cr).call(Cr,$r*yr,($r+1)*yr));return Br}return Cr},Mr.flatten2d=function(Cr){if(z(Cr)){var yr=[];return g(Cr).call(Cr,function(fr){yr=re(yr).call(yr,fr)}),yr}return Cr},Mr.dropArrayDuplicates=function(Cr){if(z(Cr)){for(var yr={},fr=[];Cr.length>0;)yr[Cr.shift()]=!0;for(var Sr in yr)yr[Sr]===!0&&fr.push(Sr);return fr}return Cr},Mr.onError=function(Cr){throw new Tr(Cr)},Mr.verifyParamPresent=function(Cr,yr,fr,Sr){fr=fr||"";var Br=!1;switch(Mr.typeOf(yr)){case"undefined":case"null":Br=!0;break;case"string":yr===""&&(Br=!0);break;case"StrStrMap":case"object":k(yr).length||(Br=!0);break;case"array":yr.length?$(yr).call(yr,function($r){if(Mr.notexist($r))return Br=!0,!0}):Br=!0}Br&&Mr.onParamAbsent(fr+Cr,Sr)},Mr.onParamAbsent=function(Cr,yr){Mr.onParamError(" ".concat(Cr,",  nullundefined,  null/undefined"),yr)},Mr.verifyParamAbsent=function(Cr,yr,fr,Sr){fr=fr||"",yr!==void 0&&Mr.onParamPresent(fr+Cr,Sr)},Mr.onParamPresent=function(Cr,yr){Mr.onParamError(" ".concat(Cr),yr)},Mr.verifyParamType=function(Cr,yr,fr,Sr){var Br=Mr.typeOf(yr).toLowerCase();Mr.isArray(fr)||(fr=[fr]),fr=ie(fr).call(fr,function(Lr){return Lr.toLowerCase()});var $r=!0;switch(y(fr).call(fr,Br)===-1&&($r=!1),Br){case"number":isNaN(yr)&&($r=!1);break;case"string":fr.join("")==="numeric or numeric string"&&($r=!!/^[0-9]+$/.test(yr))}$r||Mr.onParamInvalidType(Cr,fr,"",Sr)},Mr.onParamInvalidType=function(Cr,yr,fr,Sr){fr=fr||"",yr=Mr.isArray(yr)?(yr=ie(yr).call(yr,function(Br){return'"'+Br+'"'})).join(", "):'"'+yr+'"',Mr.onParamError('"'+fr+Cr+'", : ['+yr+"]",Sr)},Mr.verifyParamValid=function(Cr,yr,fr,Sr){Mr.isArray(fr)||(fr=[fr]),y(fr).call(fr,yr)===-1&&Mr.onParamInvalidValue(Cr,fr,Sr)},Mr.onParamInvalidValue=function(Cr,yr,fr){var Sr;Mr.isArray(yr)||(yr=[yr]),yr=ie(yr).call(yr,function(Br){return'"'+Br+'"'}),Mr.isArray(yr)&&(yr=yr.join(", ")),Mr.onParamError(re(Sr=" ".concat(Cr,", : [")).call(Sr,ue(yr),"]"),fr)},Mr.verifyParamMin=function(Cr,yr,fr,Sr){yr<fr&&Mr.onParamError(""+Cr+""+fr,Sr)},Mr.verifyParamMax=function(Cr,yr,fr,Sr){yr>fr&&Mr.onParamError(""+Cr+""+fr,Sr)},Mr.verifyArrayMax=function(Cr,yr,fr,Sr){yr.length>fr&&Mr.onParamError(""+Cr+""+fr,Sr)},Mr.verifyEmail=(_r=/^\S+@\S+$/,function(Cr,yr,fr){_r.test(yr)||Mr.onParamError(""+Cr+", @, @",fr)}),Mr.verifyTel=function(){var Cr=/^[+\-()\d]+$/;return function(yr,fr,Sr){Cr.test(fr)||Mr.onParamError(""+yr+", +-",Sr)}}(),Mr.verifyBirth=function(){var Cr=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(yr,fr,Sr){Cr.test(fr)||Mr.onParamError(""+yr+', "yyyy-MM-dd"',Sr)}}(),Mr.onParamError=function(Cr,yr){Mr.onError({message:Cr,callFunc:yr})},Mr.verifyOptions=function(Cr,yr,fr,Sr,Br){if(Cr=Cr||{},yr&&(Mr.isString(yr)&&(yr=yr.split(kr)),Mr.isArray(yr))){typeof fr!="boolean"&&(Br=fr||null,fr=!0,Sr="");var $r=fr?Mr.verifyParamPresent:Mr.verifyParamAbsent;g(yr).call(yr,function(Lr){$r.call(Mr,Lr,Cr[Lr],Sr,Br)})}return Cr},Mr.verifyParamAtLeastPresentOne=function(Cr,yr,fr){yr&&(Mr.isString(yr)&&(yr=yr.split(kr)),Mr.isArray(yr)&&($(yr).call(yr,function(Sr){return Mr.exist(Cr[Sr])})||Mr.onParamError("["+yr.join(", ")+"]",fr)))},Mr.verifyParamPresentJustOne=function(Cr,yr,fr){yr&&(Mr.isString(yr)&&(yr=yr.split(kr)),Mr.isArray(yr)&&le(yr).call(yr,function(Sr,Br){return Mr.exist(Cr[Br])&&Sr++,Sr},0)!==1&&Mr.onParamError("["+yr.join(", ")+"]",fr))},Mr.verifyBooleanWithDefault=function(Cr,yr,fr,Sr,Br){Mr.undef(fr)&&(fr=!0),kr.test(yr)&&(yr=yr.split(kr)),Mr.isArray(yr)?g(yr).call(yr,function($r){Mr.verifyBooleanWithDefault(Cr,$r,fr,Sr,Br)}):Cr[yr]===void 0?Cr[yr]=fr:Mr.isBoolean(Cr[yr])||Mr.onParamInvalidType(yr,"boolean",Sr,Br)},Mr.verifyFileInput=function(Cr,yr){var fr;return Mr.verifyParamPresent("fileInput",Cr,"",yr),Mr.isString(Cr)&&((Cr=typeof document>"u"?void 0:document.getElementById(Cr))||Mr.onParamError("input, fileInput id ".concat(Cr),yr)),Cr.tagName&&Cr.tagName.toLowerCase()==="input"&&Cr.type.toLowerCase()==="file"||Mr.onParamError(re(fr=" fileInput,  file  input  tagname:".concat(Cr.tagName,", filetype:")).call(fr,Cr.type),yr),Cr},Mr.verifyFileType=function(Cr,yr){Mr.verifyParamValid("type",Cr,Mr.validFileTypes,yr)},Mr.verifyCallback=function(Cr,yr,fr){kr.test(yr)&&(yr=yr.split(kr)),Mr.isArray(yr)?g(yr).call(yr,function(Sr){Mr.verifyCallback(Cr,Sr,fr)}):Cr[yr]?Mr.isFunction(Cr[yr])||Mr.onParamInvalidType(yr,"function","",fr):Cr[yr]=Mr.emptyFunc},Mr.verifyFileUploadCallback=function(Cr,yr){Mr.verifyCallback(Cr,"uploadprogress uploaddone uploaderror uploadcancel",yr)},Mr.validFileTypes=["image","audio","video","file"],Mr.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg","mov"]},Mr.filterFiles=function(Cr,yr){var fr,Sr,Br=(yr=yr.toLowerCase())==="file",$r=[];return g([]).call(Cr,function(Lr){var Gr,qr;if(Br)$r.push(Lr);else if(fr=i(Gr=Lr.name).call(Gr,oe(qr=Lr.name).call(qr,".")+1),(Sr=Lr.type.split("/"))[0]&&Sr[1]){var Yr,bn=!1;Sr[0].toLowerCase()===yr?bn=!0:bn=y(Yr=Mr.validFileExts[yr]).call(Yr,fr)!==-1,bn&&$r.push(Lr)}}),$r};var Er,xr,vr=Mr.supportFormData=Mr.notundef(rr.FormData);Mr.getFileName=function(Cr){return Cr=Mr.verifyFileInput(Cr),vr?Cr.files[0].name:i(yr=Cr.value).call(yr,oe(fr=Cr.value).call(fr,"\\")+1);var yr,fr},Mr.getFileInfo=(Er={ppt:1,pptx:2,pdf:3,doc:6,docx:7},function(Cr){var yr={};if(!(Cr=Mr.verifyFileInput(Cr)).files)return yr;var fr=Cr.files[0];return vr&&(yr.name=fr.name,yr.size=fr.size,yr.type=fr.name.match(/\.(\w+)$/),yr.type=yr.type&&yr.type[1].toLowerCase(),yr.transcodeType=Er[yr.type]||0),yr}),Mr.sizeText=(xr=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(Cr){var yr,fr=0;do yr=(Cr=Math.floor(100*Cr)/100)+xr[fr],Cr/=1024,fr++;while(Cr>1);return yr}),Mr.promises2cmds=function(Cr){return ie(Cr).call(Cr,function(yr){return yr.cmd})},Mr.objs2accounts=function(Cr){return ie(Cr).call(Cr,function(yr){return yr.account})},Mr.teams2ids=function(Cr){return ie(Cr).call(Cr,function(yr){return yr.teamId})},Mr.objs2ids=function(Cr){return ie(Cr).call(Cr,function(yr){return yr.id})},Mr.getMaxUpdateTime=function(Cr){var yr=ie(Cr).call(Cr,function(fr){return+fr.updateTime});return Math.max.apply(Math,yr)},Mr.genCheckUniqueFunc=function(Cr){return Cr=Cr||"id",function(yr){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[Cr]=this.uniqueSet[Cr]||{};var fr=this.uniqueSet[Cr],Sr=yr[Cr];return!fr[Sr]&&(fr[Sr]=!0,!0)}},Mr.fillPropertyWithDefault=function(Cr,yr,fr){return!!Mr.undef(Cr[yr])&&(Cr[yr]=fr,!0)},Mr.throttle=function(Cr,yr,fr,Sr){var Br,$r,Lr=null,Gr=0;fr||(fr={});var qr=function(){Gr=fr.leading===!1?0:new Date().getTime(),Lr=null,Cr.apply(Br,$r),Lr||(Br=$r=null)};return function(){var Yr=new Date().getTime();Gr||fr.leading!==!1||(Gr=Yr);var bn=yr-(Yr-Gr);return Br=this,$r=arguments,bn<=0||bn>yr?(clearTimeout(Lr),Lr=null,Gr=Yr,Cr.apply(Br,$r),Lr||(Br=$r=null)):Lr||fr.trailing===!1?Lr&&Sr&&Sr.apply(Br,$r):(Lr=ae(qr,bn),Sr&&Sr.apply(Br,$r)),Lr}},Mr.get=function(Cr,yr){var fr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(sr(Cr)!=="object")return fr;var Sr,Br=yr.replace(/\[(\d+)\]/g,".$1").split("."),$r=Cr,Lr=cr(Br);try{for(Lr.s();!(Sr=Lr.n()).done;){var Gr=Sr.value;if(($r=Object($r)[Gr])===void 0)return fr}}catch(qr){Lr.e(qr)}finally{Lr.f()}return $r},Mr.pickAsString=function(Cr,yr){var fr;return Cr?ie(fr=Ue(yr).call(yr,function(Sr){return Cr[Sr]!==void 0})).call(fr,function(Sr){var Br;return re(Br="".concat(Sr,"=")).call(Br,Cr[Sr])}).join(","):""},Mr.omitAsString=function(Cr,yr){var fr,Sr;if(!Cr)return"";var Br={};return g(yr).call(yr,function($r){Br[$r]=!0}),ie(fr=Ue(Sr=k(Cr)).call(Sr,function($r){return!Br[$r]})).call(fr,function($r){var Lr;return re(Lr="".concat($r,"=")).call(Lr,Cr[$r])}).join(",")};var Ir={session:function(Cr){var yr=function(Sr){for(var Br=1;Br<arguments.length;Br++){var $r,Lr,Gr=arguments[Br]!=null?arguments[Br]:{};Br%2?g($r=er(Object(Gr),!0)).call($r,function(qr){n(Sr,qr,Gr[qr])}):ur?Dt(Sr,ur(Gr)):g(Lr=er(Object(Gr))).call(Lr,function(qr){lr(Sr,qr,ir(Gr,qr))})}return Sr}({},Cr),fr=["topCustom","localCustom","extra"];return g(fr).call(fr,function(Sr){yr[Sr]&&(yr[Sr]="***")}),yr.lastMsg&&(yr.lastMsg={idServer:yr.lastMsg.idServer,idClient:yr.lastMsg.idClient}),yr}};Mr.secureOutput=function(Cr,yr){z(yr)||(yr=[yr]);var fr=Ir[Cr];return(yr=ie(yr).call(yr,function(Sr){return fr(Sr)})).length===1?yr[0]:yr};var Or={string:function(Cr,yr,fr){var Sr=fr.required,Br=fr.allowEmpty,$r=Cr[yr];return Sr===!1&&$r===void 0||typeof $r=="string"&&!(!Br&&$r==="")},number:function(Cr,yr,fr){var Sr=fr.required,Br=fr.min,$r=Cr[yr];return Sr===!1&&$r===void 0||typeof $r=="number"&&!($r<Br)},enum:function(Cr,yr,fr){var Sr=fr.required,Br=de(fr),$r=Cr[yr];return Sr===!1&&$r===void 0||y(Br).call(Br,$r)>-1},array:function(Cr,yr,fr){var Sr=fr.itemType,Br=fr.min,$r=fr.max,Lr=fr.required,Gr=Cr[yr];return Lr===!1&&Gr===void 0||!!z(Gr)&&!(typeof $r=="number"&&Gr.length>$r)&&!(typeof Br=="number"&&Gr.length<Br)&&!(Sr&&Sr!=="enum"&&!_e(Gr).call(Gr,function(qr){return sr(qr)===Sr}))}};Mr.validate=function(Cr,yr,fr){var Sr,Br={};return g(Sr=k(Cr)).call(Sr,function($r){var Lr,Gr=Cr[$r].type,qr=Or[Gr];qr&&!qr(yr,$r,Cr[$r])?Mr.onError({message:re(Lr="Error in parameter verification, ".concat($r," expected value is ")).call(Lr,ue(Cr[$r])),callFunc:fr}):Br[$r]=yr[$r]}),Br},Mr.asyncPool=function(Cr,yr,fr){if(typeof Cr!="number"||typeof fr!="function"||!yr||!yr.length)return Ve.resolve();var Sr=0,Br=[],$r=[];return function Lr(){if(Sr===yr.length)return Ve.resolve();var Gr=yr[Sr++],qr=Ve.resolve().then(function(){return fr(Gr,yr)});Br.push(qr);var Yr=Ve.resolve();if(Cr<=yr.length){var bn=qr.then(function(){return L($r).call($r,y($r).call($r,bn),1)});$r.push(bn),$r.length>=Cr&&(Yr=Ve.race($r))}return Yr.then(function(){return Lr()})}().then(function(){return Ve.all(Br)})},Mr.getIdArray=function(Cr){if(!Cr||typeof Cr!="string")throw new Error("id type error");var yr=y(Cr).call(Cr,"-");if(yr<0||yr===Cr.length-1)throw new Error("id format error");return[i(Cr).call(Cr,0,yr),i(Cr).call(Cr,yr+1)]},t.exports=Mr},function(t,r,e){var n=e(14),g=e(79),y=e(159),i=e(17),k=e(95).f,$=e(211),L=e(13),V=e(34),z=e(61),re=e(30),ie=function(ue){var le=function(oe,ae,Ue){if(this instanceof le){switch(arguments.length){case 0:return new ue;case 1:return new ue(oe);case 2:return new ue(oe,ae)}return new ue(oe,ae,Ue)}return g(ue,this,arguments)};return le.prototype=ue.prototype,le};t.exports=function(ue,le){var oe,ae,Ue,de,_e,Ve,$e,Lt,jt,Et=ue.target,ir=ue.global,ur=ue.stat,Dt=ue.proto,lr=ir?n:ur?n[Et]:(n[Et]||{}).prototype,sr=ir?L:L[Et]||z(L,Et,{})[Et],er=sr.prototype;for(de in le)ae=!(oe=$(ir?de:Et+(ur?".":"#")+de,ue.forced))&&lr&&re(lr,de),Ve=sr[de],ae&&($e=ue.dontCallGetSet?(jt=k(lr,de))&&jt.value:lr[de]),_e=ae&&$e?$e:le[de],ae&&typeof Ve==typeof _e||(Lt=ue.bind&&ae?V(_e,n):ue.wrap&&ae?ie(_e):Dt&&i(_e)?y(_e):_e,(ue.sham||_e&&_e.sham||Ve&&Ve.sham)&&z(Lt,"sham",!0),z(sr,de,Lt),Dt&&(re(L,Ue=Et+"Prototype")||z(L,Ue,{}),z(L[Ue],de,_e),ue.real&&er&&(oe||!er[de])&&z(er,de,_e)))}},function(t,r,e){t.exports=e(230)},function(t,r,e){t.exports=e(232)},function(t,r,e){t.exports=e(231)},function(t,r){t.exports=function(e){try{return!!e()}catch{return!0}}},function(t,r,e){t.exports=e(323)},function(t,r,e){t.exports=e(207)},function(t,r,e){t.exports=e(384)},function(t,r,e){t.exports=e(440)},function(t,r,e){t.exports=e(276)},function(t,r,e){var n=e(7),g=e(6),y=!1;try{typeof localStorage.setItem=="function"&&typeof localStorage.getItem=="function"&&(localStorage.setItem("nim_localstorage_exist_test","1"),y=localStorage.getItem("nim_localstorage_exist_test")==="1",localStorage.removeItem("nim_localstorage_exist_test"))}catch{y=!1}var i={nodeEnv:"production",info:{hash:"98d1c9786af772ff439f12534089825e2c3c6776",shortHash:"98d1c978",version:"9.14.4",sdkVersion:"91404",sdkHumanVersion:"9.14.4",protocolVersion:1},lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",needToXHR:!0,connectTimeout:1e4,xhrTimeout:8e3,reconnectionDelay:1600,reconnectionDelayMax:8e3,reconnectionJitter:.01,reconnectiontimer:null,heartbeatInterval:3e4,cmdTimeout:8e3,hbCmdTimeout:5e3,isWeixinApp:!1,isNodejs:!1,isRN:!1,ipVersion:0,PUSHTOKEN:"",PUSHCONFIG:{},CLIENTTYPE:16,PushPermissionAsked:!1,iosPushConfig:null,androidPushConfig:null,optionDefaultLinkUrl:"",defaultLinkUrl:"weblink.netease.im",ipv6DefaultLinkUrl:"weblink.netease.im",optionIpv6DefaultLinkUrl:"",wxDefaultLinkUrl:"wlnimsc0.netease.im",serverNosConfig:y?{cdnDomain:localStorage.getItem("nim_cdn_domain")||"",objectPrefix:localStorage.getItem("nim_object_prefix")||""}:{},hasLocalStorage:y,privateConf:{isABTestEnable:!0,isDataReportEnable:!0,isMixStoreEnable:!0,reportConfigUrl:"https://statistic.live.126.net/dispatcher/req",reportUrl:"https://statistic.live.126.net/statics/report/common/form"},getDefaultLinkUrl:function(k){var $,L;i.ipVersion===1?($=i.optionIpv6DefaultLinkUrl,L=i.ipv6DefaultLinkUrl):($=i.optionDefaultLinkUrl,L=i.defaultLinkUrl);var V=$||(i.isWeixinApp?i.wxDefaultLinkUrl:L);if(!V)return!1;var z=k?"https":"http",re=k?"443":"80",ie=V;return n(V).call(V,"http")===-1&&(ie=z+"://"+ie),n(V).call(V,":")===-1&&(ie=ie+":"+re),ie},ipProbeAddr:{ipv4:"https://check-ipv4.netease.im/test/",ipv6:"https://check-ipv6.netease.im/test/"},formatSocketUrl:function(k){var $=k.url,L=k.secure?"https":"http";return n($).call($,"http")===-1?L+"://"+$:$},uploadUrl:"https://nos.netease.com",chunkUploadUrl:"https://wanproxy-web.127.net",commonMaxSize:104857600,chunkSize:4194304,chunkMaxSize:4194304e4,replaceUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHost:"nos.netease.com",downloadHostList:["nos.netease.com"],downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",nosCdnEnable:!0,httpsEnabled:!1,threshold:0,nosLbsUrls:[],edgeList:["https://wanproxy-web.127.net","https://nosup-hz1.127.net"],genUploadUrl:function(k){return i.uploadUrl+"/"+k},genChunkUploadUrl:function(k){return i.chunkUploadUrl?i.chunkUploadUrl+"/"+k.bucket+"/"+k.objectName:""},genDownloadUrl:function(k,$,L){var V,z,re,ie,ue,le=k.bucket,oe=k.expireSec,ae=+new Date,Ue=oe?"&survivalTime=".concat(oe):"";if(L)return g(re=g(ie=g(ue="https://".concat(L,"/")).call(ue,$,"?createTime=")).call(ie,ae)).call(re,Ue);var de=g(V=g(z="".concat(i.replaceUrl,"?createTime=")).call(z,ae)).call(V,Ue);return(de=i.genNosProtocolUrl(de)).replace("{bucket}",le).replace("{object}",$)},genFileUrl:function(k){var $=k.bucket,L=k.objectName;return i.genNosProtocolUrl(i.replaceUrl).replace("{bucket}",$).replace("{object}",L)},genNosProtocolUrl:function(k){return/^http/.test(k)?i.httpsEnabled&&n(k).call(k,"https://")!==0&&(k=k.replace("http","https")):k=i.httpsEnabled?"https://".concat(k):"http://".concat(k),k}};i.hostEnv="BROWSER",t.exports=i},function(t,r,e){var n=e(109),g=Function.prototype,y=g.call,i=n&&g.bind.bind(y,y);t.exports=n?i:function(k){return function(){return y.apply(k,arguments)}}},function(t,r){t.exports={}},function(t,r,e){(function(n){var g=function(y){return y&&y.Math==Math&&y};t.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof n=="object"&&n)||function(){return this}()||Function("return this")()}).call(this,e(73))},function(t,r,e){t.exports=e(251)},function(t,r,e){t.exports=e(458)},function(t,r,e){var n=e(208),g=n.all;t.exports=n.IS_HTMLDDA?function(y){return typeof y=="function"||y===g}:function(y){return typeof y=="function"}},function(t,r,e){t.exports=e(216)},function(t,r,e){var n=e(12);t.exports=n({}.isPrototypeOf)},function(t,r,e){var n=e(109),g=Function.prototype.call;t.exports=n?g.bind(g):function(){return g.apply(g,arguments)}},function(t,r,e){var n=e(14),g=e(111),y=e(30),i=e(130),k=e(97),$=e(209),L=g("wks"),V=n.Symbol,z=V&&V.for,re=$?V:V&&V.withoutSetter||i;t.exports=function(ie){if(!y(L,ie)||!k&&typeof L[ie]!="string"){var ue="Symbol."+ie;k&&y(V,ie)?L[ie]=V[ie]:L[ie]=$&&z?z(ue):re(ue)}return L[ie]}},function(t,r,e){var n=e(155),g=e(365);function y(i){return t.exports=y=typeof n=="function"&&typeof g=="symbol"?function(k){return typeof k}:function(k){return k&&typeof n=="function"&&k.constructor===n&&k!==n.prototype?"symbol":typeof k},t.exports.__esModule=!0,t.exports.default=t.exports,y(i)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(13),g=e(30),y=e(136),i=e(39).f;t.exports=function(k){var $=n.Symbol||(n.Symbol={});g($,k)||i($,k,{value:y.f(k)})}},function(t,r,e){t.exports=e(454)},function(t,r,e){var n=e(51),g=e(60),y=e(6),i=e(24),k=e(8),$=e(32),L=e(4),V=e(52),z=e(16),re=e(53),ie=e(2),ue=e(54),le=e(55),oe=e(43),ae=e(15),Ue=e(88),de=e(89),_e=e(72);function Ve(lr,sr){var er=de!==void 0&&_e(lr)||lr["@@iterator"];if(!er){if($(lr)||(er=function(Pr,_r){var Mr;if(Pr){if(typeof Pr=="string")return $e(Pr,_r);var rr=ae(Mr=Object.prototype.toString.call(Pr)).call(Mr,8,-1);if(rr==="Object"&&Pr.constructor&&(rr=Pr.constructor.name),rr==="Map"||rr==="Set")return Ue(Pr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return $e(Pr,_r)}}(lr))||sr&&lr&&typeof lr.length=="number"){er&&(lr=er);var cr=0,or=function(){};return{s:or,n:function(){return cr>=lr.length?{done:!0}:{done:!1,value:lr[cr++]}},e:function(Pr){throw Pr},f:or}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hr,pr=!0,Tr=!1;return{s:function(){er=er.call(lr)},n:function(){var Pr=er.next();return pr=Pr.done,Pr},e:function(Pr){Tr=!0,hr=Pr},f:function(){try{pr||er.return==null||er.return()}finally{if(Tr)throw hr}}}}function $e(lr,sr){(sr==null||sr>lr.length)&&(sr=lr.length);for(var er=0,cr=new Array(sr);er<sr;er++)cr[er]=lr[er];return cr}function Lt(lr,sr){var er=L(lr);if(V){var cr=V(lr);sr&&(cr=z(cr).call(cr,function(or){return re(lr,or).enumerable})),er.push.apply(er,cr)}return er}function jt(lr){for(var sr=1;sr<arguments.length;sr++){var er,cr,or=arguments[sr]!=null?arguments[sr]:{};sr%2?ie(er=Lt(Object(or),!0)).call(er,function(hr){n(lr,hr,or[hr])}):ue?le(lr,ue(or)):ie(cr=Lt(Object(or))).call(cr,function(hr){oe(lr,hr,re(or,hr))})}return lr}var Et=e(45),ir=e(0);function ur(lr){return ir.get(lr,"code")||ir.get(lr,"msg.code")||ir.get(lr,"statusCode")||ir.get(lr,"event.code")||0}function Dt(lr){var sr,er,cr=typeof lr=="string"?lr:ir.get(lr,"msg")||ir.get(lr,"message")||ir.get(lr,"error")||ir.get(lr,"event.msg")||ir.get(lr,"event.message")||ir.get(lr,"event")||"unknown",or="",hr="";lr&&typeof lr.toString=="function"&&(or=lr.toString());try{hr=k(lr)}catch{}return y(sr=y(er=`
errMsg: `.concat(cr,`
errStr: `)).call(er,or,`
errJsonStr: `)).call(sr,hr,`
  `)}t.exports={reportAPI:function(lr){var sr=lr.instance,er=lr.className,cr=lr.funcName,or=lr.hasCallback,hr=or===void 0||or,pr=lr.done;if(!function(_r){if(!_r||!$(_r.experiments))return!1;var Mr,rr=Ve(_r.experiments);try{for(rr.s();!(Mr=rr.n()).done;){var kr=Mr.value;if(kr.experimentKey==="api_trace_collection"&&kr.schemeKey==="open_flow"&&$(kr.variates)){var Er,xr=Ve(kr.variates);try{for(xr.s();!(Er=xr.n()).done;){var vr=Er.value;if(vr.key==="open"&&vr.value===!0)return!0}}catch(Ir){xr.e(Ir)}finally{xr.f()}}}}catch(Ir){rr.e(Ir)}finally{rr.f()}return!1}(sr.abtInfo)||!sr.reporter||!sr.reporter.isUploadEnable)return pr;var Tr,Pr={user_id:ir.get(sr,"options.account")||"",trace_id:ir.get(sr,"socket.socket.sessionid"),class_name:er,api_name:cr,action:hr?1:0,active_id:Et.deviceId,start_time:g()};return hr?(Tr=i(function(){sr&&sr.logger&&sr.logger.warn("API ",Pr),sr&&sr.reporter&&sr.reporter.report("nim_api_trace",jt(jt({},Pr),{},{state:1,error_code:408,error_msg:"API",duration:g()-Pr.start_time}))},1e4),function(_r){if(clearTimeout(Tr),typeof pr=="function"){for(var Mr,rr=arguments.length,kr=new Array(rr>1?rr-1:0),Er=1;Er<rr;Er++)kr[Er-1]=arguments[Er];pr.apply(void 0,y(Mr=[_r]).call(Mr,kr))}try{if(!sr||!sr.reporter)return;_r?sr.reporter.report("nim_api_trace",jt(jt({},Pr),{},{state:1,error_code:ur(_r),error_msg:Dt(_r),duration:g()-Pr.start_time})):sr.reporter.report("nim_api_trace",jt(jt({},Pr),{},{state:0,duration:g()-Pr.start_time}))}catch(xr){sr&&sr.logger&&sr.logger.error("api report error",xr)}}):(sr.reporter.report("nim_api_trace",jt(jt({},Pr),{},{state:0,duration:1})),pr)}}},function(t,r,e){t.exports=e(273)},function(t,r,e){var n=e(5);t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(t,r,e){var n=e(17),g=e(208),y=g.all;t.exports=g.IS_HTMLDDA?function(i){return typeof i=="object"?i!==null:n(i)||i===y}:function(i){return typeof i=="object"?i!==null:n(i)}},function(t,r,e){var n=e(13);t.exports=function(g){return n[g+"Prototype"]}},function(t,r,e){var n=e(12),g=e(42),y=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(i,k){return y(g(i),k)}},function(t,r,e){var n=e(17),g=e(81),y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not a function")}},function(t,r,e){t.exports=e(300)},function(t,r,e){var n=e(13),g=e(14),y=e(17),i=function(k){return y(k)?k:void 0};t.exports=function(k,$){return arguments.length<2?i(n[k])||i(g[k]):n[k]&&n[k][$]||g[k]&&g[k][$]}},function(t,r,e){var n=e(159),g=e(31),y=e(109),i=n(n.bind);t.exports=function(k,$){return g(k),$===void 0?k:y?i(k,$):function(){return k.apply($,arguments)}}},function(t,r,e){var n=e(18),g=e(26),y=e(3),i=e(75),k=e(78),$=e(11),L=e(0),V=e(291),z=L.undef,re=e(310),ie=e(149),ue=e(153),le=e(784),oe=e(785);function ae(_e){var Ve,$e,Lt,jt=this;L.verifyOptions(_e,"appKey account token","protocol::IMProtocol"),L.verifyCallback(_e,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onsyncsuperteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],"protocol::IMProtocol"),Ve=typeof L.get(_e,"privateConf.isDataReportEnable")=="boolean"?_e.privateConf.isDataReportEnable:$.privateConf.isDataReportEnable,$e=typeof L.get(_e,"privateConf.reportConfigUrl")=="string"?_e.privateConf.reportConfigUrl:$.privateConf.reportConfigUrl,Lt=typeof L.get(_e,"privateConf.reportUrl")=="string"?_e.privateConf.reportUrl:$.privateConf.reportUrl,jt.reporter=V.initReporter({isDataReportEnable:Ve,reportConfigUrl:$e,reportUrl:Lt,appKey:_e.appKey,logger:jt.logger}),jt.db=_e.api.db=new i({logger:_e.logger,reporter:jt.reporter,account:_e.account,core:jt,notifyError:function(Et){jt.notifyError&&jt.notifyError("DB error",Et)}}),this.processId=L.guid(),k.call(jt,_e)}var Ue=k.fn,de=ae.fn=ae.prototype=n(Ue);de.init=function(){var _e,Ve,$e;Ue.init.call(this),ie.IM.setProtocol(this),this.parser=ie.IM,g(_e=this.sendCmd).call(_e,this),this.socketUrls=[],this.syncing=!0,this.canHandleDeletedMsgInSyncing=!1,this.hasSynced=!1,this.hasSyncedTeamMembers=!1,this.syncPromiseArray=[],this.syncResult={},this.syncTeamMembersPromiseArray=[],this.syncSuperTeamMembersPromiseArray=[],this.syncTeamMembersResult={},this.syncSuperTeamMembersResult={},this.timetags={},this.superTeamMembersData={},this.saveAck={},this.sysMsgUnread=ue.completeUnread({}),this.resetUnsettledMsgs(),this.resetUnsettledSysMsgs(),this.msgPromise=y.resolve(),this.sysMsgPromise=y.resolve(),this.msgDelayArr=[],this.msgDelayTimer=null,this.msgStatEnable=!1,this.nosCdnHostTimer=null,this.relativeServerTime=0,this.sessionSet={},this.msgReceiptTasks={},this.userSet={},this.pushNotificationMultiportConfig=re.getDefaultConfig(),this.msgAckBufferManager=new le({processFn:g(Ve=this.handleMsgsAck).call(Ve,this),throttleTime:500}),this.roamingMsgSyncDoneBufferManager=new le({processFn:g($e=this.onSyncDone).call($e,this),throttleTime:1500}),this.reporterHookLBS=new oe(this)},de.reset=function(){Ue.reset.call(this);var _e=this.options;this.db.reset(_e.db),z(_e.lbsUrl)&&(_e.lbsUrl=$.lbsUrl),this.autoconnect=!!_e.autoconnect,this.resetAutoMarkRead()},de.resetAutoMarkRead=function(){var _e=this.options;L.verifyBooleanWithDefault(_e,"autoMarkRead",!0,"","protocol::resetAutoMarkRead")},de.resetUnsettledMsgs=function(){this.unhandledMsgs=[],this.unupdatedMsgs=[]},de.resetUnsettledSysMsgs=function(){this.unhandledSysMsgs=[],this.unhandledSysMsgsForDeletedMsgs=[],this.unupdatedSysMsgs=[]},de.packetFromSync=function(_e){return!_e.obj||!!_e.obj.sync},t.exports=ae,e(786),e(787),e(788),e(808),e(810),e(811),e(812),e(813),e(814),e(815),e(816),e(821),e(822),e(823),e(824),e(828),e(829),e(830),e(831),e(832),e(833)},function(t,r,e){var n=e(28),g=String,y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not an object")}},function(t,r,e){t.exports=e(305)},function(t,r,e){var n=e(81);t.exports=function(g){if(typeof g=="object"&&"size"in g&&"has"in g&&"get"in g&&"set"in g&&"delete"in g&&"entries"in g)return g;throw TypeError(n(g)+" is not a map")}},function(t,r,e){var n=e(27),g=e(210),y=e(212),i=e(36),k=e(128),$=TypeError,L=Object.defineProperty,V=Object.getOwnPropertyDescriptor;r.f=n?y?function(z,re,ie){if(i(z),re=k(re),i(ie),typeof z=="function"&&re==="prototype"&&"value"in ie&&"writable"in ie&&!ie.writable){var ue=V(z,re);ue&&ue.writable&&(z[re]=ie.value,ie={configurable:"configurable"in ie?ie.configurable:ue.configurable,enumerable:"enumerable"in ie?ie.enumerable:ue.enumerable,writable:!1})}return L(z,re,ie)}:L:function(z,re,ie){if(i(z),re=k(re),i(ie),g)try{return L(z,re,ie)}catch{}if("get"in ie||"set"in ie)throw $("Accessors not supported");return"value"in ie&&(z[re]=ie.value),z}},function(t,r,e){var n=e(18),g=e(77),y=e(35),i=e(11),k=e(834),$=e(149).IM,L=e(156);function V(re){var ie=L(re);return this.subType="im",this.nosScene=ie.nosScene||"im",this.nosSurvivalTime=ie.nosSurvivalTime,ie.Protocol=y,ie.Message=k,ie.constructor=V,this.init(ie)}V.Protocol=y,V.parser=$,V.use=g.use,V.getInstance=g.getInstance,V.rmAllInstances=g.rmAllInstances,V.genInstanceName=function(re){return"NIM-account-"+re.account};var z=V.fn=V.prototype=n(g.prototype);V.info=z.info=i.info,t.exports=V,e(845),e(846),e(847),e(848),e(849),e(850),e(851),e(852),e(853),e(863),e(874),e(875),e(876),e(877),e(878),e(879),e(880),e(881),e(882),e(885),e(886)},function(t,r,e){var n=e(18),g=e(2),y=e(22);function i(L,V){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},re=this;re.message=L||z.message||"",y(V)==="object"?(re.event=V,re.code="Other_Error"):V!==void 0&&(re.code=V),re.timetag=+new Date,z!==void 0&&(re.event=z),re.event&&(re.callFunc=re.event.callFunc||null,delete re.event.callFunc)}i.prototype=n(Error.prototype),i.prototype.name="NIMError";var k={201:", sdk",302:", appKeytoken, accounttoken",403:"",404:"(//)",405:"",408:"",414:"",415:"/",416:"",417:"",422:"",500:"",501:"",503:"",508:"",509:"",7101:"",700:"",801:"",802:"",803:"",804:"",805:"",806:"",807:"",809:"",811:"",812:"",813:"",814:"",815:"",816:"",997:"",998:"",999:"",9102:"",9103:"/",11001:", ",13002:"",13003:"",13004:"",13006:",",Connect_Failed:",  ping/telnet ; IE8/9,  HTTPS ",Error_Internet_Disconnected:"",Error_Connection_is_not_Established:"",Error_Connection_Socket_State_not_Match:"socket",Error_Timeout:"",Param_Error:"",No_File_Selected:"",Wrong_File_Type:"",File_Too_Large:"",Cross_Origin_Iframe:"Iframe",Not_Support:"",NO_DB:"",DB:"",Still_In_Team:"",Session_Exist:"",Session_Not_Exist:"",Error_Unknown:"",Operation_Canceled:"",Sync_Error:""},$=[200,406,808,810];g($).call($,function(L){k[L]=null}),i.genError=function(L){var V=k[L];return V===void 0&&(V=""),V===null?null:new i(V,L)},i.multiInstance=function(L){return new i("","Not_Allow_Multi_Instance",L)},i.newNetworkError=function(L){var V="Error_Internet_Disconnected";return new i(k[V],V,L)},i.newConnectError=function(L){var V="Connect_Failed";return new i(k[V]||null,V,L)},i.newConnectionError=function(L){var V="Error_Connection_is_not_Established";return new i(k[V],V,L)},i.newSocketStateError=function(L){var V="Error_Connection_Socket_State_not_Match";return new i(k[V],V,L)},i.newTimeoutError=function(L){var V="Error_Timeout";return new i(k[V],V,L)},i.newFrequencyControlError=function(L){var V=new i(k[416],416,L);return V.from="local",V},i.newParamError=function(L,V){return new i(L||k.Param_Error,"Param_Error",V)},i.newNoFileError=function(L,V){var z="No_File_Selected";return new i(L||k[z],z,V)},i.newWrongFileTypeError=function(L,V){var z="Wrong_File_Type";return new i(L||k[z],z,V)},i.newFileTooLargeError=function(L,V){var z="File_Too_Large";return new i(L||k[z],z,V)},i.newCORSIframeError=function(L){var V="Cross_Origin_Iframe";return new i(k[V],V,L)},i.newSupportError=function(L,V,z){return new i(""+L,"Not_Support_"+V,z)},i.newSupportDBError=function(L){return i.newSupportError("","DB",L)},i.noDBError=function(L){return new i(k.NO_DB,"NO_DB",L)},i.newDBError=function(L){return new i(k.DB,"DB",L)},i.newUnknownError=function(L){var V="Error_Unknown";return new i(k[V],V,L)},i.stillInTeamError=function(L){var V="Still_In_Team";return new i(k[V],V,L)},i.sessionExist=function(L){var V="Session_Exist";return new i(k[V],V,L)},i.sessionNotExist=function(L){var V="Session_Not_Exist";return new i(k[V],V,L)},i.cancel=function(L){var V="Operation_Canceled";return new i(k[V],V,L)},i.syncError=function(L){return new i(k.Sync_Error,"Sync_Error",L)},i.customError=function(L,V){L=L||"Other_Error";var z="";return(V=V||{}).message||(z=k[L]||L),y(L)!=="object"?new i(z,L,V):new i(z,"Other_Error",V===void 0?L:V)},t.exports=i},function(t,r,e){var n=e(110),g=Object;t.exports=function(y){return g(n(y))}},function(t,r,e){t.exports=e(249)},function(t,r,e){var n=e(127),g=e(110);t.exports=function(y){return n(g(y))}},function(t,r,e){var n=e(0),g={init:function(){g.deviceId=n.guid()}};g.init(),g.clientTypeMap={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"},g.db={open:function(){}},g.rnfs=null,t.exports=g},function(t,r,e){var n=e(322);t.exports=function(g){return n(g.length)}},function(t,r,e){var n=e(34),g=e(20),y=e(36),i=e(81),k=e(235),$=e(46),L=e(19),V=e(236),z=e(139),re=e(237),ie=TypeError,ue=function(oe,ae){this.stopped=oe,this.result=ae},le=ue.prototype;t.exports=function(oe,ae,Ue){var de,_e,Ve,$e,Lt,jt,Et,ir=Ue&&Ue.that,ur=!(!Ue||!Ue.AS_ENTRIES),Dt=!(!Ue||!Ue.IS_RECORD),lr=!(!Ue||!Ue.IS_ITERATOR),sr=!(!Ue||!Ue.INTERRUPTED),er=n(ae,ir),cr=function(hr){return de&&re(de,"normal",hr),new ue(!0,hr)},or=function(hr){return ur?(y(hr),sr?er(hr[0],hr[1],cr):er(hr[0],hr[1])):sr?er(hr,cr):er(hr)};if(Dt)de=oe.iterator;else if(lr)de=oe;else{if(!(_e=z(oe)))throw ie(i(oe)+" is not iterable");if(k(_e)){for(Ve=0,$e=$(oe);$e>Ve;Ve++)if((Lt=or(oe[Ve]))&&L(le,Lt))return Lt;return new ue(!1)}de=V(oe,_e)}for(jt=Dt?oe.next:de.next;!(Et=g(jt,de)).done;){try{Lt=or(Et.value)}catch(hr){re(de,"throw",hr)}if(typeof Lt=="object"&&Lt&&L(le,Lt))return Lt}return new ue(!1)}},function(t,r,e){t.exports=e(563)},function(t,r){t.exports=!0},function(t,r,e){var n=e(67),g=String;t.exports=function(y){if(n(y)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return g(y)}},function(t,r,e){var n=e(140),g=e(250);t.exports=function(y,i,k){return(i=g(i))in y?n(y,i,{value:k,enumerable:!0,configurable:!0,writable:!0}):y[i]=k,y},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(255)},function(t,r,e){t.exports=e(481)},function(t,r,e){t.exports=e(484)},function(t,r,e){t.exports=e(487)},function(t,r,e){var n=e(258),g=typeof self=="object"&&self&&self.Object===Object&&self,y=n||g||Function("return this")();t.exports=y},function(t,r,e){var n=e(650)();t.exports=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){var n=e(288);function g(y,i,k,$,L,V,z){try{var re=y[V](z),ie=re.value}catch(ue){return void k(ue)}re.done?i(ie):n.resolve(ie).then($,L)}t.exports=function(y){return function(){var i=this,k=arguments;return new n(function($,L){var V=y.apply(i,k);function z(ie){g(V,$,L,z,re,"next",ie)}function re(ie){g(V,$,L,z,re,"throw",ie)}z(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(721);t.exports=function(g,y,i){return i?n(g.entries(),function(k){return y(k[1],k[0])}):g.forEach(y)}},function(t,r,e){t.exports=e(585)},function(t,r,e){var n=e(27),g=e(39),y=e(80);t.exports=n?function(i,k,$){return g.f(i,k,y(1,$))}:function(i,k,$){return i[k]=$,i}},function(t,r,e){(function(n){var g=e(15),y=e(24),i=e(7),k=e(141),$=e(2),L=e(8),V=e(4),z=e(122),re=e(3),ie=e(88),ue=e(89),le=e(72),oe=e(32);function ae(yr,fr){var Sr=ue!==void 0&&le(yr)||yr["@@iterator"];if(!Sr){if(oe(yr)||(Sr=function(Yr,bn){var wn;if(Yr){if(typeof Yr=="string")return Ue(Yr,bn);var Xr=g(wn=Object.prototype.toString.call(Yr)).call(wn,8,-1);if(Xr==="Object"&&Yr.constructor&&(Xr=Yr.constructor.name),Xr==="Map"||Xr==="Set")return ie(Yr);if(Xr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xr))return Ue(Yr,bn)}}(yr))||fr&&yr&&typeof yr.length=="number"){Sr&&(yr=Sr);var Br=0,$r=function(){};return{s:$r,n:function(){return Br>=yr.length?{done:!0}:{done:!1,value:yr[Br++]}},e:function(Yr){throw Yr},f:$r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lr,Gr=!0,qr=!1;return{s:function(){Sr=Sr.call(yr)},n:function(){var Yr=Sr.next();return Gr=Yr.done,Yr},e:function(Yr){qr=!0,Lr=Yr},f:function(){try{Gr||Sr.return==null||Sr.return()}finally{if(qr)throw Lr}}}}function Ue(yr,fr){(fr==null||fr>yr.length)&&(fr=yr.length);for(var Sr=0,Br=new Array(fr);Sr<fr;Sr++)Br[Sr]=yr[Sr];return Br}var de=e(156);function _e(){return typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{}}function Ve(yr){var fr;return g(fr=Object.prototype.toString.call(yr)).call(fr,8,-1)}function $e(yr){return Ve(yr).toLowerCase()}function Lt(yr){return $e(yr)==="string"}function jt(yr){return $e(yr)==="number"}function Et(yr){return $e(yr)==="array"}function ir(yr){return typeof yr=="function"}function ur(yr){return $e(yr)==="date"}function Dt(yr){return yr===null}function lr(yr){return yr!==null}function sr(yr){return yr===void 0}function er(yr){return yr!==void 0}function cr(yr){return er(yr)&&lr(yr)}function or(yr){return sr(yr)||Dt(yr)}function hr(yr){return cr(yr)&&$e(yr)==="object"}var pr=function(yr,fr,Sr){yr.addEventListener?yr.addEventListener(fr,Sr,!1):yr.attachEvent&&yr.attachEvent("on"+fr,Sr)},Tr=pr,Pr=function(yr,fr,Sr){yr.removeEventListener?yr.removeEventListener(fr,Sr,!1):yr.detachEvent&&yr.detachEvent("on"+fr,Sr)},_r=Pr;function Mr(){var yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},Sr=arguments.length>2?arguments[2]:void 0;for(var Br in yr)yr.hasOwnProperty(Br)&&fr.call(Sr,Br,yr[Br])}function rr(yr,fr){Mr(fr,function(Sr,Br){yr[Sr]=Br})}var kr,Er=(kr=0,function(){return""+kr++});function xr(yr){return Lt(yr)&&i(yr).call(yr,"{")===0&&k(yr).call(yr,"}")===yr.length-1}function vr(yr,fr,Sr){if(!yr)return"";var Br=[];return Mr(yr,function($r,Lr){ir(Lr)||(ur(Lr)?Lr=Lr.getTime():Et(Lr)?Lr=Lr.join(","):hr(Lr)&&(Lr=L(Lr)),Sr&&(Lr=encodeURIComponent(Lr)),Br.push(encodeURIComponent($r)+"="+Lr))}),Br.join(fr||",")}var Ir,Or=(Ir=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(yr){return Ir.test(yr||"")?RegExp.$1.toLowerCase():""});function Cr(yr){var fr=_e();return yr.tagName&&yr.tagName.toUpperCase()==="INPUT"||fr.Blob&&yr instanceof fr.Blob}t.exports={o:{},emptyObj:{},f:function(){},emptyFunc:function(){},regBlank:/\s+/gi,regWhiteSpace:/\s+/gi,getGlobal:_e,getClass:Ve,typeOf:$e,isString:Lt,isNumber:jt,isInt:function(yr){return jt(yr)&&yr%1==0},isBoolean:function(yr){return $e(yr)==="boolean"},isArray:Et,isFunction:ir,isDate:ur,isRegExp:function(yr){return $e(yr)==="regexp"},isError:function(yr){return $e(yr)==="error"},isnull:Dt,notnull:lr,undef:sr,notundef:er,exist:cr,notexist:or,isObject:hr,isEmpty:function(yr){return or(yr)||(Lt(yr)||Et(yr))&&yr.length===0},remove:function(yr){yr.parentNode&&yr.parentNode.removeChild(yr)},dataset:function(yr,fr,Sr){if(!cr(Sr))return yr.getAttribute("data-"+fr);yr.setAttribute("data-"+fr,Sr)},addEventListener:pr,on:Tr,removeEventListener:Pr,off:_r,target:function(yr){return yr.target||yr.srcElement},createIframe:function(yr){if(typeof document<"u"){var fr;if((yr=yr||{}).name)try{(fr=document.createElement('<iframe name="'+yr.name+'"></iframe>')).frameBorder=0}catch{(fr=document.createElement("iframe")).name=yr.name}else fr=document.createElement("iframe");yr.visible||(fr.style.display="none"),ir(yr.onload)&&Tr(fr,"load",function Br($r){fr.src&&(yr.multi||_r(fr,"load",Br),yr.onload($r))}),(yr.parent||document.body).appendChild(fr);var Sr=yr.src||"about:blank";return y(function(){fr.src=Sr},0),fr}},html2node:function(yr){if(typeof document<"u"){var fr=document.createElement("div");fr.innerHTML=yr;var Sr,Br,$r=[];if(fr.children)for(Sr=0,Br=fr.children.length;Sr<Br;Sr++)$r.push(fr.children[Sr]);else for(Sr=0,Br=fr.childNodes.length;Sr<Br;Sr++){var Lr=fr.childNodes[Sr];Lr.nodeType===1&&$r.push(Lr)}return $r.length>1?fr:$r[0]}},forOwn:Mr,mixin:rr,uniqueID:Er,isJSON:xr,parseJSON:function yr(fr){try{xr(fr)&&(fr=JSON.parse(fr)),hr(fr)&&Mr(fr,function(Sr,Br){switch($e(Br)){case"string":case"object":fr[Sr]=yr(Br)}})}catch{}return fr},simpleClone:function(yr){return de(yr)},merge:function(){for(var yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fr=arguments.length,Sr=new Array(fr>1?fr-1:0),Br=1;Br<fr;Br++)Sr[Br-1]=arguments[Br];return $(Sr).call(Sr,function($r){rr(yr,$r)}),yr},fillUndef:function(yr,fr){return Mr(fr,function(Sr,Br){sr(yr[Sr])&&(yr[Sr]=Br)}),yr},checkWithDefault:function(yr,fr,Sr){var Br=yr[fr]||yr[fr.toLowerCase()];return or(Br)&&(Br=Sr,yr[fr]=Br),Br},fetch:function(yr,fr){return Mr(yr,function(Sr){cr(fr[Sr])&&(yr[Sr]=fr[Sr])}),yr},string2object:function(){var yr,fr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",",Br={};return $(yr=fr.split(Sr)).call(yr,function($r){var Lr=$r.split("="),Gr=Lr.shift();Gr&&(Br[decodeURIComponent(Gr)]=decodeURIComponent(Lr.join("=")))}),Br},object2string:vr,genUrlSep:function(yr){return i(yr).call(yr,"?")<0?"?":"&"},object2query:function(yr){return vr(yr,"&",!0)},url2origin:Or,isFileInput:Cr,getKeys:function(yr,fr){var Sr=V(yr);return fr&&z(Sr).call(Sr,function(Br,$r){var Lr=Cr(yr[Br]);return Lr===Cr(yr[$r])?0:Lr?1:-1}),Sr},_get:function(yr,fr){var Sr,Br=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,$r=fr.replace(/\[(\d+)\]/g,".$1").split("."),Lr=yr,Gr=ae($r);try{for(Gr.s();!(Sr=Gr.n()).done;){var qr=Sr.value;if((Lr=Object(Lr)[qr])===void 0)return Br}}catch(Yr){Gr.e(Yr)}finally{Gr.f()}return Lr},getPromiseWithAbort:function(yr){var fr={},Sr=new re(function(Br,$r){fr.abort=$r});return fr.promise=re.race([yr,Sr]),fr}}}).call(this,e(73))},function(t,r,e){var n=e(33),g=e(718),y=n("Map");t.exports={Map:y,set:g("set",2),get:g("get",1),has:g("has",1),remove:g("delete",1),proto:y.prototype}},function(t,r,e){(function(n){var g=e(15),y=e(7),i=e(303),k=e(48),$=e(22),L=function(){var V=(n===void 0?"undefined":$(n))==="object"?n:window,z=Math.pow(2,53)-1,re=/\bOpera/,ie=Object.prototype,ue=ie.hasOwnProperty,le=ie.toString;function oe(Lt){return(Lt=String(Lt)).charAt(0).toUpperCase()+g(Lt).call(Lt,1)}function ae(Lt){return Lt=$e(Lt),/^(?:webOS|i(?:OS|P))/.test(Lt)?Lt:oe(Lt)}function Ue(Lt,jt){for(var Et in Lt)ue.call(Lt,Et)&&jt(Lt[Et],Et,Lt)}function de(Lt){var jt;return Lt==null?oe(Lt):g(jt=le.call(Lt)).call(jt,8,-1)}function _e(Lt){return String(Lt).replace(/([ -])(?!$)/g,"$1?")}function Ve(Lt,jt){var Et=null;return function(ir,ur){var Dt=-1,lr=ir?ir.length:0;if(typeof lr=="number"&&lr>-1&&lr<=z)for(;++Dt<lr;)ur(ir[Dt],Dt,ir);else Ue(ir,ur)}(Lt,function(ir,ur){Et=jt(Et,ir,ur,Lt)}),Et}function $e(Lt){return String(Lt).replace(/^ +| +$/g,"")}return function Lt(jt){var Et=V,ir=jt&&$(jt)==="object"&&de(jt)!="String";ir&&(Et=jt,jt=null);var ur=Et.navigator||{},Dt=ur.userAgent||"";jt||(jt=Dt);var lr,sr,er,cr,or,hr=ir?!!ur.likeChrome:/\bChrome\b/.test(jt)&&!/internal|\n/i.test(le.toString()),pr=ir?"Object":"ScriptBridgingProxyObject",Tr=ir?"Object":"Environment",Pr=ir&&Et.java?"JavaPackage":de(Et.java),_r=ir?"Object":"RuntimeObject",Mr=/\bJava/.test(Pr)&&Et.java,rr=Mr&&de(Et.environment)==Tr,kr=Mr?"a":"",Er=Mr?"b":"",xr=Et.document||{},vr=Et.operamini||Et.opera,Ir=re.test(Ir=ir&&vr?vr["[[Class]]"]:de(vr))?Ir:vr=null,Or=jt,Cr=[],yr=null,fr=jt==Dt,Sr=fr&&vr&&typeof vr.version=="function"&&vr.version(),Br=Ve([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(qn,Zr){return qn||RegExp("\\b"+(Zr.pattern||_e(Zr))+"\\b","i").exec(jt)&&(Zr.label||Zr)}),$r=function(qn){return Ve(qn,function(Zr,Nn){return Zr||RegExp("\\b"+(Nn.pattern||_e(Nn))+"\\b","i").exec(jt)&&(Nn.label||Nn)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Lr=Yr([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Gr=function(qn){return Ve(qn,function(Zr,Nn,Qr){return Zr||(Nn[Lr]||Nn[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Lr)]||RegExp("\\b"+_e(Qr)+"(?:\\b|\\w*\\d)","i").exec(jt))&&Qr})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),qr=function(qn){return Ve(qn,function(Zr,Nn){var Qr=Nn.pattern||_e(Nn);return!Zr&&(Zr=RegExp("\\b"+Qr+"(?:/[\\d.]+|[ \\w.]*)","i").exec(jt))&&(Zr=function(Mn,Ln,xn){var Pn={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Ln&&xn&&/^Win/i.test(Mn)&&!/^Windows Phone /i.test(Mn)&&(Pn=Pn[/[\d.]+$/.exec(Mn)])&&(Mn="Windows "+Pn),Mn=String(Mn),Ln&&xn&&(Mn=Mn.replace(RegExp(Ln,"i"),xn)),Mn=ae(Mn.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Zr,Qr,Nn.label||Nn)),Zr})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Yr(qn){return Ve(qn,function(Zr,Nn){var Qr=Nn.pattern||_e(Nn);return!Zr&&(Zr=RegExp("\\b"+Qr+" *\\d+[.\\w_]*","i").exec(jt)||RegExp("\\b"+Qr+" *\\w+-[\\w]*","i").exec(jt)||RegExp("\\b"+Qr+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(jt))&&((Zr=String(Nn.label&&!RegExp(Qr,"i").test(Nn.label)?Nn.label:Zr).split("/"))[1]&&!/[\d.]+/.test(Zr[0])&&(Zr[0]+=" "+Zr[1]),Nn=Nn.label||Nn,Zr=ae(Zr[0].replace(RegExp(Qr,"i"),Nn).replace(RegExp("; *(?:"+Nn+"[_-])?","i")," ").replace(RegExp("("+Nn+")[-_.]?(\\w)","i"),"$1 $2"))),Zr})}if(Br&&(Br=[Br]),Gr&&!Lr&&(Lr=Yr([Gr])),(lr=/\bGoogle TV\b/.exec(Lr))&&(Lr=lr[0]),/\bSimulator\b/i.test(jt)&&(Lr=(Lr?Lr+" ":"")+"Simulator"),$r=="Opera Mini"&&/\bOPiOS\b/.test(jt)&&Cr.push("running in Turbo/Uncompressed mode"),$r=="IE"&&/\blike iPhone OS\b/.test(jt)?(Gr=(lr=Lt(jt.replace(/like iPhone OS/,""))).manufacturer,Lr=lr.product):/^iP/.test(Lr)?($r||($r="Safari"),qr="iOS"+((lr=/ OS ([\d_]+)/i.exec(jt))?" "+lr[1].replace(/_/g,"."):"")):$r!="Konqueror"||/buntu/i.test(qr)?Gr&&Gr!="Google"&&(/Chrome/.test($r)&&!/\bMobile Safari\b/i.test(jt)||/\bVita\b/.test(Lr))||/\bAndroid\b/.test(qr)&&/^Chrome/.test($r)&&/\bVersion\//i.test(jt)?($r="Android Browser",qr=/\bAndroid\b/.test(qr)?qr:"Android"):$r=="Silk"?(/\bMobi/i.test(jt)||(qr="Android",Cr.unshift("desktop mode")),/Accelerated *= *true/i.test(jt)&&Cr.unshift("accelerated")):$r=="PaleMoon"&&(lr=/\bFirefox\/([\d.]+)\b/.exec(jt))?Cr.push("identifying as Firefox "+lr[1]):$r=="Firefox"&&(lr=/\b(Mobile|Tablet|TV)\b/i.exec(jt))?(qr||(qr="Firefox OS"),Lr||(Lr=lr[1])):!$r||(lr=!/\bMinefield\b/i.test(jt)&&/\b(?:Firefox|Safari)\b/.exec($r))?($r&&!Lr&&/[\/,]|^[^(]+?\)/.test(g(jt).call(jt,y(jt).call(jt,lr+"/")+8))&&($r=null),(lr=Lr||Gr||qr)&&(Lr||Gr||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(qr))&&($r=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(qr)?qr:lr)+" Browser")):$r=="Electron"&&(lr=(/\bChrome\/([\d.]+)\b/.exec(jt)||0)[1])&&Cr.push("Chromium "+lr):qr="Kubuntu",Sr||(Sr=Ve(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version","HeadlessChrome",_e($r),"(?:Firefox|Minefield|NetFront)"],function(qn,Zr){return qn||(RegExp(Zr+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(jt)||0)[1]||null})),(lr=(Br=="iCab"&&i(Sr)>3?"WebKit":/\bOpera\b/.test($r)&&(/\bOPR\b/.test(jt)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(jt)&&!/^(?:Trident|EdgeHTML)$/.test(Br)&&"WebKit"||!Br&&/\bMSIE\b/i.test(jt)&&(qr=="Mac OS"?"Tasman":"Trident")||Br=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test($r)&&"NetFront")&&(Br=[lr]),$r=="IE"&&(lr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(jt)||0)[1])?($r+=" Mobile",qr="Windows Phone "+(/\+$/.test(lr)?lr:lr+".x"),Cr.unshift("desktop mode")):/\bWPDesktop\b/i.test(jt)?($r="IE Mobile",qr="Windows Phone 8.x",Cr.unshift("desktop mode"),Sr||(Sr=(/\brv:([\d.]+)/.exec(jt)||0)[1])):$r!="IE"&&Br=="Trident"&&(lr=/\brv:([\d.]+)/.exec(jt))&&($r&&Cr.push("identifying as "+$r+(Sr?" "+Sr:"")),$r="IE",Sr=lr[1]),fr){if(cr="global",or=(er=Et)!=null?$(er[cr]):"number",/^(?:boolean|number|string|undefined)$/.test(or)||or=="object"&&!er[cr])de(lr=Et.runtime)==pr?($r="Adobe AIR",qr=lr.flash.system.Capabilities.os):de(lr=Et.phantom)==_r?($r="PhantomJS",Sr=(lr=lr.version||null)&&lr.major+"."+lr.minor+"."+lr.patch):typeof xr.documentMode=="number"&&(lr=/\bTrident\/(\d+)/i.exec(jt))?(Sr=[Sr,xr.documentMode],(lr=+lr[1]+4)!=Sr[1]&&(Cr.push("IE "+Sr[1]+" mode"),Br&&(Br[1]=""),Sr[1]=lr),Sr=$r=="IE"?String(Sr[1].toFixed(1)):Sr[0]):typeof xr.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test($r)&&(Cr.push("masking as "+$r+" "+Sr),$r="IE",Sr="11.0",Br=["Trident"],qr="Windows");else if(Mr&&(Or=(lr=Mr.lang.System).getProperty("os.arch"),qr=qr||lr.getProperty("os.name")+" "+lr.getProperty("os.version")),rr){try{Sr=Et.require("ringo/engine").version.join("."),$r="RingoJS"}catch{(lr=Et.system)&&lr.global.system==Et.system&&($r="Narwhal",qr||(qr=lr[0].os||null))}$r||($r="Rhino")}else $(Et.process)==="object"&&!Et.process.browser&&(lr=Et.process)&&($(lr.versions)==="object"&&(typeof lr.versions.electron=="string"?(Cr.push("Node "+lr.versions.node),$r="Electron",Sr=lr.versions.electron):typeof lr.versions.nw=="string"&&(Cr.push("Chromium "+Sr,"Node "+lr.versions.node),$r="NW.js",Sr=lr.versions.nw)),$r||($r="Node.js",Or=lr.arch,qr=lr.platform,Sr=(Sr=/[\d.]+/.exec(lr.version))?Sr[0]:null));qr=qr&&ae(qr)}if(Sr&&(lr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Sr)||/(?:alpha|beta)(?: ?\d)?/i.exec(jt+";"+(fr&&ur.appMinorVersion))||/\bMinefield\b/i.test(jt)&&"a")&&(yr=/b/i.test(lr)?"beta":"alpha",Sr=Sr.replace(RegExp(lr+"\\+?$"),"")+(yr=="beta"?Er:kr)+(/\d+\+?/.exec(lr)||"")),$r=="Fennec"||$r=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(qr))$r="Firefox Mobile";else if($r=="Maxthon"&&Sr)Sr=Sr.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Lr))Lr=="Xbox 360"&&(qr=null),Lr=="Xbox 360"&&/\bIEMobile\b/.test(jt)&&Cr.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test($r)&&(!$r||Lr||/Browser|Mobi/.test($r))||qr!="Windows CE"&&!/Mobi/i.test(jt))if($r=="IE"&&fr)try{Et.external===null&&Cr.unshift("platform preview")}catch{Cr.unshift("embedded")}else(/\bBlackBerry\b/.test(Lr)||/\bBB10\b/.test(jt))&&(lr=(RegExp(Lr.replace(/ +/g," *")+"/([.\\d]+)","i").exec(jt)||0)[1]||Sr)?(qr=((lr=[lr,/BB10/.test(jt)])[1]?(Lr=null,Gr="BlackBerry"):"Device Software")+" "+lr[0],Sr=null):this!=Ue&&Lr!="Wii"&&(fr&&vr||/Opera/.test($r)&&/\b(?:MSIE|Firefox)\b/i.test(jt)||$r=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(qr)||$r=="IE"&&(qr&&!/^Win/.test(qr)&&Sr>5.5||/\bWindows XP\b/.test(qr)&&Sr>8||Sr==8&&!/\bTrident\b/.test(jt)))&&!re.test(lr=Lt.call(Ue,jt.replace(re,"")+";"))&&lr.name&&(lr="ing as "+lr.name+((lr=lr.version)?" "+lr:""),re.test($r)?(/\bIE\b/.test(lr)&&qr=="Mac OS"&&(qr=null),lr="identify"+lr):(lr="mask"+lr,$r=Ir?ae(Ir.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(lr)&&(qr=null),fr||(Sr=null)),Br=["Presto"],Cr.push(lr));else $r+=" Mobile";if(lr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(jt)||0)[1]){var bn,wn;lr=[i(lr.replace(/\.(\d)$/,".0$1")),lr],$r=="Safari"&&g(bn=lr[1]).call(bn,-1)=="+"?($r="WebKit Nightly",yr="alpha",Sr=g(wn=lr[1]).call(wn,0,-1)):Sr!=lr[1]&&Sr!=(lr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(jt)||0)[1])||(Sr=null),lr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(jt)||0)[1],lr[0]==537.36&&lr[2]==537.36&&i(lr[1])>=28&&Br=="WebKit"&&(Br=["Blink"]),fr&&(hr||lr[1])?(Br&&(Br[1]="like Chrome"),lr=lr[1]||((lr=lr[0])<530?1:lr<532?2:lr<532.05?3:lr<533?4:lr<534.03?5:lr<534.07?6:lr<534.1?7:lr<534.13?8:lr<534.16?9:lr<534.24?10:lr<534.3?11:lr<535.01?12:lr<535.02?"13+":lr<535.07?15:lr<535.11?16:lr<535.19?17:lr<536.05?18:lr<536.1?19:lr<537.01?20:lr<537.11?"21+":lr<537.13?23:lr<537.18?24:lr<537.24?25:lr<537.36?26:Br!="Blink"?"27":"28")):(Br&&(Br[1]="like Safari"),lr=(lr=lr[0])<400?1:lr<500?2:lr<526?3:lr<533?4:lr<534?"4+":lr<535?5:lr<537?6:lr<538?7:lr<601?8:"8"),Br&&(Br[1]+=" "+(lr+=typeof lr=="number"?".x":/[.+]/.test(lr)?"":"+")),$r=="Safari"&&(!Sr||k(Sr)>45)&&(Sr=lr)}$r=="Opera"&&(lr=/\bzbov|zvav$/.exec(qr))?($r+=" ",Cr.unshift("desktop mode"),lr=="zvav"?($r+="Mini",Sr=null):$r+="Mobile",qr=qr.replace(RegExp(" *"+lr+"$"),"")):$r=="Safari"&&/\bChrome\b/.exec(Br&&Br[1])&&(Cr.unshift("desktop mode"),$r="Chrome Mobile",Sr=null,/\bOS X\b/.test(qr)?(Gr="Apple",qr="iOS 4.3+"):qr=null),Sr&&y(Sr).call(Sr,lr=/[\d.]+$/.exec(qr))==0&&y(jt).call(jt,"/"+lr+"-")>-1&&(qr=$e(qr.replace(lr,""))),Br&&!/\b(?:Avant|Nook)\b/.test($r)&&(/Browser|Lunascape|Maxthon/.test($r)||$r!="Safari"&&/^iOS/.test(qr)&&/\bSafari\b/.test(Br[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test($r)&&Br[1])&&(lr=Br[Br.length-1])&&Cr.push(lr),Cr.length&&(Cr=["("+Cr.join("; ")+")"]),Gr&&Lr&&y(Lr).call(Lr,Gr)<0&&Cr.push("on "+Gr),Lr&&Cr.push((/^on /.test(Cr[Cr.length-1])?"":"on ")+Lr),qr&&(lr=/ ([\d.+]+)$/.exec(qr),sr=lr&&qr.charAt(qr.length-lr[0].length-1)=="/",qr={architecture:32,family:lr&&!sr?qr.replace(lr[0],""):qr,version:lr?lr[1]:null,toString:function(){var qn=this.version;return this.family+(qn&&!sr?" "+qn:"")+(this.architecture==64?" 64-bit":"")}}),(lr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Or))&&!/\bi686\b/i.test(Or)?(qr&&(qr.architecture=64,qr.family=qr.family.replace(RegExp(" *"+lr),"")),$r&&(/\bWOW64\b/i.test(jt)||fr&&/\w(?:86|32)$/.test(ur.cpuClass||ur.platform)&&!/\bWin64; x64\b/i.test(jt))&&Cr.unshift("32-bit")):qr&&/^OS X/.test(qr.family)&&$r=="Chrome"&&i(Sr)>=39&&(qr.architecture=64),jt||(jt=null);var Xr={};return Xr.description=jt,Xr.layout=Br&&Br[0],Xr.manufacturer=Gr,Xr.name=$r,Xr.prerelease=yr,Xr.product=Lr,Xr.ua=jt,Xr.version=$r&&Sr,Xr.os=qr||{architecture:null,family:null,version:null,toString:function(){return"null"}},Xr.parse=Lt,Xr.toString=function(){return this.description||""},Xr.version&&Cr.unshift(Sr),Xr.name&&Cr.unshift($r),qr&&$r&&(qr!=String(qr).split(" ")[0]||qr!=$r.split(" ")[0]&&!Lr)&&Cr.push(Lr?"("+qr+")":"on "+qr),Cr.length&&(Xr.description=Cr.join(" ")),Xr}()}();t.exports=L}).call(this,e(73))},function(t,r,e){var n=e(12),g=n({}.toString),y=n("".slice);t.exports=function(i){return y(g(i),8,-1)}},function(t,r,e){var n=e(33);t.exports=n("navigator","userAgent")||""},function(t,r,e){var n=e(165),g=e(17),y=e(65),i=e(21)("toStringTag"),k=Object,$=y(function(){return arguments}())=="Arguments";t.exports=n?y:function(L){var V,z,re;return L===void 0?"Undefined":L===null?"Null":typeof(z=function(ie,ue){try{return ie[ue]}catch{}}(V=k(L),i))=="string"?z:$?y(V):(re=y(V))=="Object"&&g(V.callee)?"Arguments":re}},function(t,r,e){var n=e(61);t.exports=function(g,y,i,k){return k&&k.enumerable?g[y]=i:n(g,y,i),g}},function(t,r,e){e(86);var n=e(356),g=e(14),y=e(67),i=e(61),k=e(103),$=e(21)("toStringTag");for(var L in n){var V=g[L],z=V&&V.prototype;z&&y(z)!==$&&i(z,$,L),k[L]=k.Array}},function(t,r,e){var n=e(31),g=TypeError,y=function(i){var k,$;this.promise=new i(function(L,V){if(k!==void 0||$!==void 0)throw g("Bad Promise constructor");k=L,$=V}),this.resolve=n(k),this.reject=n($)};t.exports.f=function(i){return new y(i)}},function(t,r,e){t.exports=e(427)},function(t,r,e){t.exports=e(475)},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}t.exports=e},function(t,r,e){var n=e(34),g=e(12),y=e(127),i=e(42),k=e(46),$=e(164),L=g([].push),V=function(z){var re=z==1,ie=z==2,ue=z==3,le=z==4,oe=z==6,ae=z==7,Ue=z==5||oe;return function(de,_e,Ve,$e){for(var Lt,jt,Et=i(de),ir=y(Et),ur=n(_e,Ve),Dt=k(ir),lr=0,sr=$e||$,er=re?sr(de,Dt):ie||ae?sr(de,0):void 0;Dt>lr;lr++)if((Ue||lr in ir)&&(jt=ur(Lt=ir[lr],lr,Et),z))if(re)er[lr]=jt;else if(jt)switch(z){case 3:return!0;case 5:return Lt;case 6:return lr;case 2:L(er,Lt)}else switch(z){case 4:return!1;case 7:L(er,Lt)}return oe?-1:ue||le?le:er}};t.exports={forEach:V(0),map:V(1),filter:V(2),some:V(3),every:V(4),find:V(5),findIndex:V(6),filterReject:V(7)}},function(t,r,e){var n=e(771);n.fn=n.prototype,t.exports=n,e(773),e(774),e(775),e(776),e(777),e(778),e(779),e(780),e(781),e(782),e(783)},function(t,r,e){var n=e(22),g=e(4),y=e(8),i=e(16),k=e(2),$=e(9),L=e(15),V=e(88),z=e(89),re=e(72),ie=e(32);function ue(Dt,lr){var sr=z!==void 0&&re(Dt)||Dt["@@iterator"];if(!sr){if(ie(Dt)||(sr=function(Tr,Pr){var _r;if(Tr){if(typeof Tr=="string")return le(Tr,Pr);var Mr=L(_r=Object.prototype.toString.call(Tr)).call(_r,8,-1);if(Mr==="Object"&&Tr.constructor&&(Mr=Tr.constructor.name),Mr==="Map"||Mr==="Set")return V(Tr);if(Mr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mr))return le(Tr,Pr)}}(Dt))||lr&&Dt&&typeof Dt.length=="number"){sr&&(Dt=sr);var er=0,cr=function(){};return{s:cr,n:function(){return er>=Dt.length?{done:!0}:{done:!1,value:Dt[er++]}},e:function(Tr){throw Tr},f:cr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var or,hr=!0,pr=!1;return{s:function(){sr=sr.call(Dt)},n:function(){var Tr=sr.next();return hr=Tr.done,Tr},e:function(Tr){pr=!0,or=Tr},f:function(){try{hr||sr.return==null||sr.return()}finally{if(pr)throw or}}}}function le(Dt,lr){(lr==null||lr>Dt.length)&&(lr=Dt.length);for(var sr=0,er=new Array(lr);sr<lr;sr++)er[sr]=Dt[sr];return er}var oe=e(0),ae=oe.undef,Ue=oe.notundef,de=oe.exist,_e=e(195),Ve=e(297),$e={p2p:0,team:1,superTeam:5},Lt={0:"p2p",1:"team",5:"superTeam"},jt=g($e),Et=Ve.typeMap,ir=Ve.validTypes;function ur(Dt){oe.verifyOptions(Dt,"scene to type","msg::Message"),oe.verifyParamValid("scene",Dt.scene,jt,"msg::Message"),this.scene=$e[Dt.scene],this.to=""+Dt.to,this.type=Et[Dt.type],this.resend=Dt.resend?1:0,Dt.resend?(oe.verifyOptions(Dt,"idClient","msg::Message"),this.idClient=Dt.idClient):this.idClient=oe.guid(),Ue(Dt.subType)&&(oe.isInt(+Dt.subType)&&+Dt.subType>0?this.subType=+Dt.subType:oe.onParamError("subType0","msg::Message"));var lr=Dt.replyMsg;lr&&lr.idServer&&lr.from&&lr.to&&lr.time&&(this.replyMsgFromAccount=lr.from,this.replyMsgToAccount=lr.to,this.replyMsgTime=lr.time,this.replyMsgIdServer=lr.idServer,this.replyMsgIdClient=lr.idClient,lr.threadMsgFromAccount&&lr.threadMsgIdServer&&lr.threadMsgTime&&lr.threadMsgToAccount?(this.threadMsgFromAccount=lr.threadMsgFromAccount,this.threadMsgToAccount=lr.threadMsgToAccount,this.threadMsgTime=lr.threadMsgTime,this.threadMsgIdServer=lr.threadMsgIdServer,this.threadMsgIdClient=lr.threadMsgIdClient):(this.threadMsgFromAccount=lr.from,this.threadMsgToAccount=lr.to,this.threadMsgTime=lr.time,this.threadMsgIdServer=lr.idServer,this.threadMsgIdClient=lr.idClient)),Ue(Dt.text)&&(this.body=""+Dt.text),Ue(Dt.custom)&&(n(Dt.custom)==="object"?this.custom=y(Dt.custom):this.custom=""+Dt.custom),Ue(Dt.body)&&(this.body=""+Dt.body),Ue(Dt.pushContent)&&(this.pushContent=""+Dt.pushContent),Ue(Dt.pushPayload)&&(this.pushPayload=""+Dt.pushPayload);var sr=Dt.apns;if(Ue(sr)&&Dt.scene==="team"){var er=sr.accounts;Ue(er)&&oe.verifyParamType("apns.accounts",er,"array","msg::Message"),this.apnsAccounts=er?y(er):"#%@all@%#",this.apnsContent=sr.content||Dt.pushContent||"",oe.verifyBooleanWithDefault(sr,"forcePush",!0,"options.apns","msg::Message"),this.apnsForcePush=sr.forcePush?1:0}var cr=Dt.robotInfo;Ue(cr)&&(Dt.scene==="team"&&oe.verifyOptions(Dt.robotInfo,"account","msg::Message::robotInfo scene === team"),cr.function&&(this.robotInfoFunction=cr.function),cr.topic&&(this.robotInfoTopic=cr.topic),cr.customContent&&(this.robotInfoCustomContent=cr.customContent),cr.account&&(this.robotInfoAccount=cr.account)),Ue(Dt.isHistoryable)&&(this.isHistoryable=Dt.isHistoryable?1:0),Ue(Dt.isRoamingable)&&(this.isRoamingable=Dt.isRoamingable?1:0),Ue(Dt.isSyncable)&&(this.isSyncable=Dt.isSyncable?1:0),Ue(Dt.cc)&&(this.cc=Dt.cc?1:0),Ue(Dt.env)&&(this.env=Dt.env),Ue(Dt.isPushable)&&(this.isPushable=Dt.isPushable?1:0),Ue(Dt.isOfflinable)&&(this.isOfflinable=Dt.isOfflinable?1:0),Ue(Dt.isUnreadable)&&(this.isUnreadable=Dt.isUnreadable?1:0),Ue(Dt.needPushNick)&&(this.needPushNick=Dt.needPushNick?1:0),Ue(Dt.needMsgReceipt)&&(this.needMsgReceipt=Dt.needMsgReceipt?1:0),Ue(Dt.yidunEnable)&&(this.yidunEnable=Dt.yidunEnable?1:0),this.needUpdateSession=Dt.needUpdateSession===!1?0:1,Ue(Dt.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=Dt.antiSpamUsingYidun?1:0),Ue(Dt.clientAntiSpam)&&(this.clientAntiSpam=Dt.clientAntiSpam?1:0),Ue(Dt.antiSpamContent)&&(n(Dt.antiSpamContent)==="object"?this.antiSpamContent=y(Dt.antiSpamContent):this.antiSpamContent=""+Dt.antiSpamContent),Ue(Dt.antiSpamBusinessId)&&(n(Dt.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=y(Dt.antiSpamBusinessId):this.antiSpamBusinessId=""+Dt.antiSpamBusinessId),Ue(Dt.yidunAntiCheating)&&(this.yidunAntiCheating=Dt.yidunAntiCheating),Ue(Dt.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=Dt.yidunAntiSpamExt)}oe.merge(ur.prototype,Ve.prototype),ur.prototype.getScene=function(){return Lt[this.scene]},ur.getType=Ve.getType,ur.setFlow=Ve.setFlow,ur.reverse=function(Dt){var lr,sr=Lt[Dt.scene];if(lr=Dt.delete==="1"?{delete:!0,scene:sr||Dt.scene,from:Dt.from,time:+Dt.time,to:""+Dt.to}:{scene:sr||Dt.scene,from:Dt.from,fromNick:Dt.fromNick,fromClientType:_e.reverseType(Dt.fromClientType),fromDeviceId:Dt.fromDeviceId,to:""+Dt.to,time:+Dt.time,type:ur.getType(Dt),text:de(Dt.body)?Dt.body:Dt.text||"",isHistoryable:ae(Dt.isHistoryable)||+Dt.isHistoryable==1,isRoamingable:ae(Dt.isRoamingable)||+Dt.isRoamingable==1,isSyncable:ae(Dt.isSyncable)||+Dt.isSyncable==1,cc:ae(Dt.cc)||+Dt.cc==1,isPushable:ae(Dt.isPushable)||+Dt.isPushable==1,isOfflinable:ae(Dt.isOfflinable)||+Dt.isOfflinable==1,isUnreadable:ae(Dt.isUnreadable)||+Dt.isUnreadable==1,isReplyMsg:ae(Dt.isReplyMsg)||+Dt.isReplyMsg==1,needPushNick:ae(Dt.needPushNick)||+Dt.needPushNick==1,needMsgReceipt:+Dt.needMsgReceipt==1,isLocal:!1},Dt.isInBlackList&&(lr.isInBlackList=+Dt.isInBlackList==1,lr.isInBlackList&&(Dt.status="fail")),Ue(Dt.isMuted)&&(lr.isMuted=+Dt.isMuted==1),Ue(Dt.resend)&&(lr.resend=+Dt.resend==1),Ue(Dt.idClient)&&(lr.idClient=Dt.idClient),Ue(Dt.idServer)&&(lr.idServer=""+Dt.idServer),Ue(Dt.userUpdateTime)&&(lr.userUpdateTime=+Dt.userUpdateTime),Ue(Dt.custom)&&(lr.custom=Dt.custom),Ue(Dt.callbackExt)&&(lr.callbackExt=Dt.callbackExt),Ue(Dt.subType)&&(lr.subType=+Dt.subType),Ue(Dt.pushContent)&&(lr.pushContent=Dt.pushContent),Ue(Dt.pushPayload)&&(lr.pushPayload=Dt.pushPayload),Ue(Dt.tempTeamMemberCount)&&(lr.tempTeamMemberCount=+Dt.tempTeamMemberCount),Ue(Dt.yidunAntiSpamRes)&&(lr.yidunAntiSpamRes=Dt.yidunAntiSpamRes),Ue(Dt.apnsAccounts)){if(lr.apns={},Dt.apnsAccounts!=="#%@all@%#"){var er=Dt.apnsAccounts;try{lr.apns.accounts=JSON.parse(er)}catch{lr.apns.accounts=[]}}lr.apns.content=Dt.apnsContent||"",lr.apns.forcePush=+Dt.apnsForcePush==1}if(Ue(Dt.robotInfoFunction)&&(lr.robotInfo=lr.robotInfo||{},Dt.robotInfoFunction&&(lr.robotInfo.function=Dt.robotInfoFunction)),Ue(Dt.robotInfoCustomContent)&&(lr.robotInfo=lr.robotInfo||{},Dt.robotInfoCustomContent&&(lr.robotInfo.customContent=Dt.robotInfoCustomContent)),Ue(Dt.robotInfoTopic)&&(lr.robotInfo=lr.robotInfo||{},Dt.robotInfoTopic&&(lr.robotInfo.topic=Dt.robotInfoTopic)),Ue(Dt.robotInfoAccount)&&(lr.robotInfo=lr.robotInfo||{},Dt.robotInfoAccount&&(lr.robotInfo.account=Dt.robotInfoAccount)),Ue(Dt.needUpdateSession)&&(lr.needUpdateSession=+Dt.needUpdateSession==1),lr.status=Dt.status||"success",Ue(i(Dt))&&(lr.filter=i(Dt)),Dt.replyMsgIdServer&&Dt.threadMsgIdServer){var cr=["replyMsgFromAccount","replyMsgToAccount","replyMsgTime","replyMsgIdServer","replyMsgIdClient","threadMsgFromAccount","threadMsgToAccount","threadMsgTime","threadMsgIdServer","threadMsgIdClient"];k(cr).call(cr,function(or){lr[or]=Dt[or]}),lr.replyMsgTime=+lr.replyMsgTime,lr.threadMsgTime=+lr.threadMsgTime}return lr},ur.setExtra=function(Dt,lr){Dt.target=ur.getMsgTarget(Dt,lr),Dt.sessionId=Dt.scene+"-"+Dt.target,Ve.setFlow(Dt,lr)},ur.getMsgTarget=function(Dt,lr){return Dt.scene==="p2p"?Dt.to===lr?Dt.from:Dt.to:Dt.scene==="team"||Dt.scene==="superTeam"?Dt.to:void 0},ur.deduplication=function(Dt){var lr,sr,er={},cr=ue(Dt);try{for(cr.s();!(sr=cr.n()).done;){var or=sr.value,hr=er[or.idClient];hr&&hr.time>or.time||(er[or.idClient]=or)}}catch(pr){cr.e(pr)}finally{cr.f()}return $(lr=g(er)).call(lr,function(pr){return er[pr]})},ur.sortMsgs=function(Dt){return Dt=L(Dt).call(Dt,0),oe.sortObjArray(Dt,{sortPath:"time"}),Dt},ur.getLastMsg=function(Dt){return(Dt=ur.sortMsgs(Dt))[Dt.length-1]},ur.getLastNotIgnoredMsg=function(Dt){for(var lr=null,sr=(Dt=ur.sortMsgs(Dt)).length-1;sr>=0;sr--)if(!(lr=Dt[sr]).ignore)return lr;return null},ur.getMaxTimetag=function(Dt){return ur.getLastMsg(Dt).time},ur.validScenes=jt,ur.validTypes=ir,ur.sceneMap=$e,ur.sceneReverseMap=Lt,t.exports=ur},function(t,r,e){var n=e(22),g=e(18),y=e(32),i=e(2),k=e(378),$=e(7),L=e(4),V=e(8),z=e(3),re=e(173),ie=e(0),ue=ie.notundef,le=e(558),oe=e(11),ae=(e(186),e(45)),Ue=e(584).wrapSafeCallback,de=e(25).reportAPI,_e=e(156);function Ve(){}var $e={};Ve.getInstance=function(ir){ir=jt(ir),ie.verifyOptions(ir,"account","api::Base.getInstance");var ur=this.genInstanceName(ir),Dt=$e[ur];return Dt?Ve.updateInstance(Dt,ir):Dt=$e[ur]=new this(ir),Dt},Ve.updateInstance=function(ir,ur){ir.setOptions(ur),ir.connect()};var Lt=Ve.fn=Ve.prototype=g(new re),jt=function(ir){return ir.nosSurvivalTime?(ie.verifyParamType("nosSurvivalTime",ir.nosSurvivalTime,"number","api::Base.getInstance"),ie.verifyParamMin("nosSurvivalTime",ir.nosSurvivalTime,86400,"api::Base.getInstance")):ir.nosSurvivalTime=1/0,ir};Lt.updatePrivateConf=function(ir){if(de({instance:this,className:"ApiBaseFn",funcName:"updatePrivateConf",hasCallback:!1}),ir&&n(ir.privateConf)==="object"){var ur=ir.privateConf;typeof ur.lbs_web=="string"&&(ir.lbsUrl=ur.lbs_web),typeof ur.link_ssl_web=="boolean"&&(ir.secure=ur.link_ssl_web),typeof ur.https_enabled=="boolean"&&(ir.httpsEnabled=ur.https_enabled),ir.uploadUrl=ur.nos_uploader_web?ur.nos_uploader_web:null,ir.chunkUploadUrl=ur.nos_uploader_web?ur.nos_uploader_web:null,ir.replaceUrl=ur.nos_downloader?ur.nos_downloader:null,ir.downloadUrl=ur.nos_accelerate?ur.nos_accelerate:null,ir.downloadHost=ur.nos_accelerate_host?ur.nos_accelerate_host:null,ir.downloadHostList=ur.nos_accelerate_host_list||[],ir.downloadHost&&ir.downloadHostList.push(ir.downloadHost),ir.nosCdnEnable=ur.nos_cdn_enable!==!1,ir.ntServerAddress=ur.nt_server||null,ir.kibanaServer=ur.kibana_server,ir.statisticServer=ur.statistic_server,ir.reportGlobalServer=ur.report_global_server,ir.ipVersion=ur.ip_protocol_version||ir.ipVersion,ir.defaultLink=ur.link_web||ir.defaultLink,ir.ipv6DefaultLink=ur.link_ipv6_web||ir.ipv6DefaultLink,typeof ur.nos_lbs=="string"?ir.nosLbsUrls=[ur.nos_lbs]:ir.nosLbsUrls=[],y(ur.nos_edge_list)&&(ir.edgeList=ur.nos_edge_list)}return ir.ntServerAddress===null||ir.ntServerAddress===""?oe.ntServerAddress=null:oe.ntServerAddress=ir.ntServerAddress,oe.uploadUrl=ir.uploadUrl||oe.uploadUrl,oe.chunkUploadUrl=ir.chunkUploadUrl||oe.chunkUploadUrl,oe.downloadUrl=ir.downloadUrl||oe.downloadUrl,oe.downloadHost=ir.downloadHost||oe.downloadHost,oe.downloadHostList=ir.downloadHostList&&ir.downloadHostList.length>0?ir.downloadHostList:oe.downloadHostList,oe.nosCdnEnable=ir.nosCdnEnable!==!1,oe.replaceUrl=ir.replaceUrl||oe.replaceUrl,oe.httpsEnabled=ir.httpsEnabled||oe.httpsEnabled,ir.probe_ipv4_url&&(oe.ipProbeAddr.ipv4=ir.probe_ipv4_url),ir.probe_ipv6_url&&(oe.ipProbeAddr.ipv6=ir.probe_ipv6_url),ir},Lt.init=function(ir){ie.verifyOptions(ir,"account","api::Base.init"),ir=this.updatePrivateConf(ir),ie.verifyBooleanWithDefault(ir,"exifOrientation",!0,"","api::Base.init"),ir.lbsBackup=ir.lbsBackup===void 0||ir.lbsBackup;var ur=this.account=ir.account=ir.account+"",Dt=ir.constructor.genInstanceName(ir),lr=$e[Dt];if(ir._disableSingleton&&(lr=null),lr)return Ve.updateInstance(lr,ir),lr;this.logger=ir.logger=new le({debug:ir.debug,logFunc:ir.logFunc,prefix:this.subType,dbLog:ir.dbLog!==!1,account:ir.account,expire:ir.expire,logLevel:ir.logLevel}),this.options=Ue(ir,this),ir.api=this;var sr=this.protocol=new ir.Protocol(ir);return sr.name="Protocol-"+Dt,sr.account=ur,sr.api=this,sr.message=this.message=new ir.Message({account:ur}),this.reporter=sr.reporter,this.statusProtector=sr.statusProtector,this.reporterHook=sr.reporterHook,this.abtInfo={},(typeof ie.get(ir,"privateConf.isABTestEnable")=="boolean"?ir.privateConf.isABTestEnable:oe.privateConf.isABTestEnable)&&this.abTestConfigRequset(),this.name=Dt,$e[Dt]=this,this},Lt.destroy=function(ir){var ur=this;(ir=ir||{}).done=de({instance:this,className:"ApiBaseFn",funcName:"destroy",done:ir.done});var Dt=this;if(!Dt.__beginDestroy){var lr;Dt.__beginDestroy=!0,ir=ir||{};var sr,er=this.name;if(this.logger.warn("destroy::start"),!er)return this.logger&&this.logger.warn&&this.logger.warn("destroy::no instanceName"),void(Dt.__beginDestroy=void 0);this.protocol&&(lr=this.protocol.connectTimer),this.protocol&&this.protocol.resetPush&&this.protocol.resetPush(),this.eventNames&&typeof this.eventNames=="function"&&i(sr=this.eventNames()).call(sr,function(cr){delete ur._events[cr]}),this.disconnect({done:function(cr){var or,hr,pr;Dt.logger.warn(`ApiBase::destroy: instance destroyed ...

`),Dt.__beginDestroy=void 0,Dt.reporter.destroy(),Dt.statusProtector.destroy(),Dt.reporterHook.destroy(),i(or=k(Dt.options)).call(or,function(Pr){$(Pr).call(Pr,"on")===0&&(Dt.options[Pr]=function(){},Dt.protocol.options[Pr]=function(){},Dt.protocol.api.options[Pr]=function(){})}),Dt.logger.destroy(),n(Dt.protocol.sessionSet)==="object"&&i(hr=L(Dt.protocol.sessionSet)).call(hr,function(Pr){Dt.protocol.sessionSet[Pr].unreadMsgs=[],Dt.protocol.sessionSet[Pr]=void 0}),Dt.protocol.syncResult={},Dt.db&&Dt.db.close();var Tr=Dt.protocol;i(pr=k(Dt)).call(pr,function(Pr){Dt[Pr]=void 0}),$e&&($e[er]=null,clearTimeout(lr)),Tr&&(Tr.__destroyed=!0),ir.done instanceof Function&&ir.done(cr)}})}},Lt.setOptions=function(ir){var ur=_e(ir);ur=Ue(ur,this),this.protocol.setOptions(ur)},Lt.abTestConfigRequset=function(){var ir=this,ur=ir.options.abTestUrl||"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",Dt={projectKey:"im1_sdk_abtest_web",appKey:ir.options.appKey,osType:"Web",sdkVersion:ir.info.version,deviceId:ae.deviceId},lr=V({clientInfo:Dt});this.protocol.adaptersRequest(ur,{method:"POST",timeout:5e3,headers:{"Content-Type":"application/json"},data:lr,onload:function(sr){var er=JSON.parse(sr);ir.abtInfo=er.data.abtInfo||{},ir.logger&&ir.logger.info("abTestConfigRequset::success",ir.abtInfo)},onerror:function(){ir.logger&&ir.logger.info("abTestConfigRequset::fail")}},{exception_service:7})},Lt.processCallback=function(ir,ur){Et(ir,ur)},Lt.processCallbackPromise=function(ir,ur){return new z(function(Dt,lr){Et(ir,ur,!0,Dt,lr)})};var Et=function(ir,ur,Dt,lr,sr){var er="api::processCallback";Dt&&(er="api::processCallbackPromise"),ie.verifyCallback(ir,"done",er),ir.callback=function(cr,or,hr){var pr=ir.callback.options;if(or=or||pr,ur&&(or=pr),ie.isFunction(ir.cbaop)){var Tr=ir.cbaop(cr,or);ue(Tr)&&(or=Tr)}var Pr=ir.done;ie.isObject(or)&&(delete or.done,delete or.cb,delete or.callback),Dt?cr?sr({message:"",callFunc:er,event:cr}):lr(or):Pr(cr,or,hr)},ir.callback.options=ie.copy(ir)};Lt.processPs=function(ir){ie.notexist(ir.ps)&&(ir.ps=""),ie.verifyArrayMax("ps",ir.ps,5e3)},Lt.processCustom=function(ir){ie.notexist(ir.custom)&&(ir.custom="")},Lt.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},Lt.sendCmdWithResp=function(ir,ur,Dt){this.sendCmd(ir,ur,function(lr,sr,er){ie.isFunction(Dt)&&(lr?Dt(lr,sr):Dt(null,er))})},Lt.cbAndSendCmd=function(ir,ur){var Dt=this.processCallbackPromise(ur);return this.sendCmd(ir,ur),Dt},Lt.sendCmdUsePromise=function(ir,ur){var Dt=this,lr=de({instance:this,className:"ApiBaseFn",funcName:ir,hasCallback:!0});return new z(function(sr,er){Dt.sendCmd(ir,ur,function(cr,or,hr){if(cr)typeof lr=="function"&&lr(cr),er(cr);else{var pr=ie.merge({},or,hr);typeof lr=="function"&&lr(void 0),sr(pr)}})})},Ve.use=function(ir,ur){ir&&ir.install&&ie.isFunction(ir.install)&&ir.install(this,ur)},Ve.rmAllInstances=function(){for(var ir in $e)$e[ir].destroy();$e={}},Lt.logout=function(){var ir=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ir.callback=de({instance:this,className:"ApiBaseFn",funcName:"logout",done:ir.callback}),ir=ir||{},this.protocol.shouldReconnect=!1,this.protocol.doLogout=!0,this.processCallback(ir),this.sendCmd("logout",ir,ir.callback),this.protocol.statusProtector.emit("auth/loginLifeCycleLogout")},t.exports=Ve,e(588),e(589),e(631),e(632),e(642),e(646)},function(t,r,e){var n=e(90),g=e(32),y=e(4),i=e(16),k=e(158),$=e(7),L=e(71),V=e(6),z=e(2),re=e(8),ie=e(60),ue=e(24),le=e(26),oe=e(0),ae=oe.undef,Ue=e(11),de=e(41),_e=e(157),Ve=_e.StatusProtector,$e=(_e.V2NIMLoginStatus,e(107)),Lt=$e.ReporterHook,jt=$e.EMSyncType,Et=e(647),ir=e(648),ur=e(649);function Dt(sr){oe.undef(sr.secure)&&(sr.secure=!0),this.options=sr,this.keepNosSafeUrl=this.options.keepNosSafeUrl||!1;var er=sr.defaultLink||sr.defaultLinkUrl;oe.notundef(er)&&oe.isString(er)&&(Ue.optionDefaultLinkUrl=n(er).call(er)),oe.notundef(sr.ipv6DefaultLink)&&oe.isString(sr.ipv6DefaultLink)&&(Ue.optionIpv6DefaultLinkUrl=sr.ipv6DefaultLink),typeof sr.heartbeatInterval=="number"&&(Ue.heartbeatInterval=sr.heartbeatInterval),g(sr.nosLbsUrls)&&(Ue.nosLbsUrls=sr.nosLbsUrls);var cr=this.options.socketConcurrent;cr=typeof cr=="number"&&cr>=1&&cr<=3?cr:1,this.options.socketConcurrent=cr,this.options.rollbackDelMsgUnread!==void 0&&typeof this.options.rollbackDelMsgUnread=="boolean"||(this.options.rollbackDelMsgUnread=!0),this.init(),this.connect()}var lr=Dt.fn=Dt.prototype;lr.init=function(){var sr=this;this.logger=this.options.logger,this.getNosOriginUrlReqNum=0,this.checkNosReqNum=0,this.timerMap={},this.cmdCallbackMap={},this.cmdContentMap={},this.initConnect(),this.reset(),this.statusProtector=new Ve(this),this.reporterHook=new Lt(this,this.options.reporterHookConfig),this.reporterHookLinkKeep=new Et(this),this.promiseAbortManager=new ir,this.imsocket=new ur(this,{socketConcurrent:this.options.socketConcurrent}),this.statusProtector.on("auth/loginLifeCycleLogout",function(){sr.promiseAbortManager.clear()}),this.statusProtector.on("auth/loginLifeCycleLoginSucc",function(){sr.reporterHook.reset(),sr.reporterHook.setOriginTimetick()})},lr.reset=function(){ae(this.options.thumbnailToStatic)&&(this.options.thumbnailToStatic=!0),this.resetConnect()},lr.setOptions=function(sr){var er=this.options,cr=y(er),or=y(sr),hr=["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onsyncsuperteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],pr=i(or).call(or,function(Pr){return k(hr).call(hr,Pr)}),Tr=$(cr).call(cr,"account");oe.verifyCallback(sr,pr,"protocol::IMProtocol"),this.logger.info("setOptions::",oe.omitAsString(sr,["appKey","token","loginExt","customTag"])),Tr!==-1&&L(cr).call(cr,Tr,1),sr=oe.filterObj(sr,cr),this.options=oe.merge(er,sr),this.reset()},lr.sendCmd=function(sr){var er,cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",or=arguments.length>2?arguments[2]:void 0,hr=this;hr.heartbeat();var pr,Tr=sr,Pr=(sr=hr.parser.createCmd(sr,cr)).SER;cr=cr||{},hr.cmdContentMap[Pr]=cr,cr.single&&(delete cr.single,(pr=y(cr)).length===1&&(hr.cmdContentMap[Pr]=cr[pr[0]])),cr.__exceptionInfo={target:V(er="".concat(sr.SID,"-")).call(er,sr.CID),context:Pr,startTime:hr.reporterHook.getSafeClock()},cr.NOTSTORE&&(pr=cr.NOTSTORE.split(" "),z(pr).call(pr,function(_r){delete cr[_r]}),delete cr.NOTSTORE),(or=or||cr.callback)&&(hr.cmdCallbackMap[Pr]=or),hr.executeCmdTask({cmdName:Tr,cmd:re(sr)})},lr.executeCmdTask=function(sr){var er=sr.cmdName,cr=sr.cmd,or=(cr=JSON.parse(cr)).SER;this.isFrequencyControlled(er)?(this.logger.warn("protocol::executeCmdTask: ".concat(er," hit freq control")),this.markCallbackInvalid(or,de.newFrequencyControlError({callFunc:"protocol::executeCmdTask",message:"".concat(er," hit freq control")}))):this.hasLogin?(er!=="heartbeat"&&(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(sr.cmd)):this.logger.info("protocol::sendCmd: ".concat(er))),this.doSendCmd(cr)):er==="login"&&this.isConnected()?(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(sr.cmd)):this.logger.info("protocol::sendCmd: ".concat(er)),this.doSendCmd(cr)):(this.logger.warn("protocol::executeCmdTask: ".concat(er," not connected or login")),this.markCallbackInvalid(or,de.newSocketStateError({callFunc:"protocol::executeCmdTask",message:"".concat(er," not connected or not login")})))},lr.isFrequencyControlled=function(sr){var er=this.frequencyControlMap&&this.frequencyControlMap[sr];if(er){if(ie()<er.from+er.duration)return!0;delete this.frequencyControlMap[sr]}},lr.doSendCmd=function(sr){var er=this,cr=sr.SER,or=cr===0?Ue.hbCmdTimeout:Ue.cmdTimeout,hr=new Date().getTime(),pr=er.cmdContentMap[cr];function Tr(){er.markCallbackInvalid(cr,de.newSocketStateError({callFunc:"protocol::doSendCmd",message:"ser ".concat(cr," socketSendJson Error")})),er.onDisconnect("protocol::doSendCmd:socketSendJson","broken")}pr&&pr.__exceptionInfo&&(pr.__exceptionInfo.startTime=er.reporterHook.getSafeClock()),sr.isAwaitable&&(er.timerMap[cr]=ue(function(){var Pr;sr.SID!==1&&sr.CID!==2&&er.detectHeartbeat(),er.markCallbackInvalid(cr,de.newTimeoutError({callFunc:"protocol::doSendCmd",message:"ser ".concat(cr," Timeout Error")})),er.reporter.reportTraceStart("exceptions",{user_id:oe.get(er,"options.account")||"",trace_id:oe.get(er,"socket.socket.sessionid"),start_time:hr,action:2,exception_service:6}),er.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:V(Pr="".concat(sr.SID,"-")).call(Pr,sr.CID),context:"".concat(sr.SER),net_connect:er.checkNetworkAvailable()}),er.reporter.reportTraceEnd("exceptions",1)},or));try{er.socket&&er.socket.send?er.socket.send(re(sr)):Tr()}catch{Tr()}},lr.getObjWithSer=function(sr){var er=this.cmdContentMap[sr];return er&&!er.isImSyncDataObj&&delete this.cmdContentMap[sr],er&&oe.copy(er)},lr.getCallbackWithSer=function(sr){var er=this.cmdCallbackMap[sr];return er&&!er.isImSyncDataCb&&delete this.cmdCallbackMap[sr],er},lr.getTimerWithSer=function(sr){var er=this.timerMap[sr];return delete this.timerMap[sr],er},lr.clearTimerWithSer=function(sr){var er=this.getTimerWithSer(sr);er&&clearTimeout(er)},lr.markCallbackInvalid=function(sr,er){this.getObjWithSer(sr),this.clearTimerWithSer(sr);var cr=this.getCallbackWithSer(sr);if(cr){var or=cr.options;ue(function(){cr(er||de.newUnknownError({ser:sr}),or)},0)}},lr.markAllCallbackInvalid=function(sr){var er=this;try{var cr,or;z(cr=y(this.cmdContentMap)).call(cr,function(hr){var pr=er.getObjWithSer(hr);if(pr&&pr.__exceptionInfo){var Tr=pr.__exceptionInfo.target,Pr=pr.__exceptionInfo.context,_r=oe.get(sr,"event.uploadCode")||sr&&sr.code;_r=typeof _r!="number"?415:_r;var Mr=oe.get(sr,"event.disconnectReason"),rr=Mr?re({disconnect_reason:Mr}):sr&&sr.message||"send cmd failed";er.reporter.reportTraceStart("exceptions",{user_id:oe.get(er,"options.account")||"",trace_id:oe.get(er,"socket.socket.sessionid"),start_time:er.reporterHook.getNTPTime(pr.__exceptionInfo.startTime),action:2,exception_service:6}),er.reporter.reportTraceUpdateV2("exceptions",{code:_r,description:rr,operation_type:1,target:Tr,context:Pr,net_connect:er.checkNetworkAvailable()}),er.reporter.reportTraceEnd("exceptions",1),delete pr.__exceptionInfo}}),z(or=y(this.cmdCallbackMap)).call(or,function(hr){er.markCallbackInvalid(hr,sr)})}catch(hr){er.logger&&er.logger.error("protocol::markAllCallbackInvalid error: ",hr)}},lr.getPacketObj=function(sr){var er=null;if(sr&&sr.raw){var cr=sr.raw.ser;oe.notundef(cr)&&(er=this.getObjWithSer(cr))}return er},lr.callPacketAckCallback=function(sr){var er=this;if(sr&&sr.raw){var cr=sr.raw.ser;if(oe.notundef(cr)){er.clearTimerWithSer(cr);var or=er.getCallbackWithSer(cr);if(or){var hr;or.originUrl&&sr.obj&&sr.obj.file&&(sr.obj.file._url_safe=sr.obj.file.url,sr.obj.file.url=or.originUrl,sr.obj.type==="audio"&&(sr.obj.file.mp3Url=or.originUrl+(~$(hr=or.originUrl).call(hr,"?")?"&":"?")+"audioTrans&type=mp3")),sr.promise?sr.promise.then(function(){or(sr.error,sr.obj)},function(pr){var Tr,Pr;pr.callFunc="protocol::callPacketAckCallback",pr.message=V(Tr=V(Pr="Resp Promoise Error: cmd: ".concat(sr.cmd,", ser: ")).call(Pr,cr,", reason: ")).call(Tr,pr.message);var _r=de.customError("CALLBACK_ACK_ERR",pr);er.logger.error(`protocol::callPacketAckCallback error stack: 
`.concat(pr.stack||pr.event&&pr.event.stack)),or(_r,sr.obj,sr.content)}):or(sr.error,sr.obj,sr.content)}}}},lr.onMessage=function(sr){var er=this;er.heartbeat(),er.parser.parseResponse(sr).then(function(cr){var or;if(cr.notFound&&er.logger.warn("protocol::onMessage: packet not found ".concat(re(cr))),cr.error){var hr,pr;cr.error.message=V(hr="".concat(cr.cmd," error: ")).call(hr,cr.error.message),er.logger.error(V(pr="protocol::onMessage: packet error ".concat(re(cr.error),"raw cmd ")).call(pr,cr.rawStr));var Tr=cr.raw||{};Tr.code!==408&&Tr.code!==415&&Tr.code!==500||er.reporter.report("nimErrEvent",{code:Tr.code,module:cr.cmd,accid:er.account})}cr.__receiveTime=er.reporterHook.getSafeClock();var Pr=jt[V(or="kSyncType".concat(cr.raw.sid,"_")).call(or,cr.raw.cid)];if(Pr){var _r=oe.get(cr,"raw.r"),Mr=1;if(_r&&_r.length>0){var rr=i(_r).call(_r,function(Cr){return g(Cr)}),kr=oe.get(rr,"0.length");Mr=typeof kr=="number"?kr:1}er.reporterHook.emit("reporter/syncItem",Pr,Mr)}cr.frequencyControlDuration&&(er.logger.error("protocol::onMessage: server freq control ".concat(re(cr.cmd))),er.frequencyControlMap=er.frequencyControlMap||{},er.frequencyControlMap[cr.cmd]={from:+new Date,duration:cr.frequencyControlDuration}),cr.obj=er.getPacketObj(cr),cr.obj&&cr.obj.__exceptionInfo&&delete cr.obj.__exceptionInfo,cr.cmd!=="heartbeat"&&(er.logger.debugEnable?er.logger.debug("protocol::recvCmd: ".concat(cr.rawStr)):er.logger.log("protocol::recvCmd: ".concat(cr.cmd)));var Er="process"+oe.capFirstLetter(cr.service);if(er[Er])if(cr.cmd==="syncDone"){if(er.cmdCallbackMap[cr.raw.ser]&&er.cmdCallbackMap[cr.raw.ser].isImSyncDataCb){var xr;er.cmdCallbackMap[cr.raw.ser].isImSyncDataCb=!1;var vr=le(xr=function(Cr,yr){this.checkNosReqNum++,this.getNosOriginUrlReqNum<=0||this.checkNosReqNum>=20?this[Cr](yr):ue(vr,300)}).call(xr,er,Er,cr);ue(function(){vr.call(er,Er,cr)},10)}}else{cr.cmd!=="syncTeamMembersDone"&&cr.cmd!=="syncSuperTeamMembersDone"||er.cmdCallbackMap[cr.raw.ser]&&er.cmdCallbackMap[cr.raw.ser].isImSyncDataCb&&(er.cmdCallbackMap[cr.raw.ser].isImSyncDataCb=!1);try{er[Er](cr)}catch(Cr){var Ir,Or;er.logger.warn(V(Ir=V(Or="protocol::onMessage: ".concat(Er,".")).call(Or,cr.cmd," excute failed ")).call(Ir,cr.obj?"":", maybe the packet timed out",": "),Cr.message)}}else er.logger.warn("protocol::onMessage: ".concat(Er," not found"));er.callPacketAckCallback(cr)})},lr.onMiscError=function(sr,er,cr){er&&this.notifyError(sr,er,cr)},lr.onCustomError=function(sr,er){var cr=de.customError(sr,er),or=er.message||"";this.onMiscError(or,cr)},lr.notifyError=function(sr,er,cr){var or;this.isConnected()&&(this.logger.error(V(or="".concat(sr||""," ")).call(or,this.name),er,cr),this.options.onerror(er,cr))},lr.emitAPI=function(sr){var er=sr.type,cr=sr.obj;this.api.emit(er,cr)},t.exports=Dt,e(669),e(685),e(686),e(687),e(688),e(689)},function(t,r,e){var n=e(109),g=Function.prototype,y=g.apply,i=g.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(n?i.bind(y):function(){return i.apply(y,arguments)})},function(t,r){t.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(t,r){var e=String;t.exports=function(n){try{return e(n)}catch{return"Object"}}},function(t,r,e){var n=e(5);t.exports=function(g,y){var i=[][g];return!!i&&n(function(){i.call(null,y||function(){return 1},1)})}},function(t,r,e){var n=e(65);t.exports=Array.isArray||function(g){return n(g)=="Array"}},function(t,r,e){var n,g=e(36),y=e(166),i=e(167),k=e(114),$=e(218),L=e(162),V=e(133),z=V("IE_PROTO"),re=function(){},ie=function(oe){return"<script>"+oe+"<\/script>"},ue=function(oe){oe.write(ie("")),oe.close();var ae=oe.parentWindow.Object;return oe=null,ae},le=function(){try{n=new ActiveXObject("htmlfile")}catch{}var oe,ae;le=typeof document<"u"?document.domain&&n?ue(n):((ae=L("iframe")).style.display="none",$.appendChild(ae),ae.src="javascript:",(oe=ae.contentWindow.document).open(),oe.write(ie("document.F=Object")),oe.close(),oe.F):ue(n);for(var Ue=i.length;Ue--;)delete le.prototype[i[Ue]];return le()};k[z]=!0,t.exports=Object.create||function(oe,ae){var Ue;return oe!==null?(re.prototype=g(oe),Ue=new re,re.prototype=null,Ue[z]=oe):Ue=le(),ae===void 0?Ue:y.f(Ue,ae)}},function(t,r,e){var n=e(165),g=e(39).f,y=e(61),i=e(30),k=e(334),$=e(21)("toStringTag");t.exports=function(L,V,z,re){if(L){var ie=z?L:L.prototype;i(ie,$)||g(ie,$,{configurable:!0,value:V}),re&&!n&&y(ie,"toString",k)}}},function(t,r,e){var n=e(44),g=e(199),y=e(103),i=e(101),k=e(39).f,$=e(169),L=e(170),V=e(49),z=e(27),re=i.set,ie=i.getterFor("Array Iterator");t.exports=$(Array,"Array",function(le,oe){re(this,{type:"Array Iterator",target:n(le),index:0,kind:oe})},function(){var le=ie(this),oe=le.target,ae=le.kind,Ue=le.index++;return!oe||Ue>=oe.length?(le.target=void 0,L(void 0,!0)):L(ae=="keys"?Ue:ae=="values"?oe[Ue]:[Ue,oe[Ue]],!1)},"values");var ue=y.Arguments=y.Array;if(g("keys"),g("values"),g("entries"),!V&&z&&ue.name!=="values")try{k(ue,"name",{value:"values"})}catch{}},function(t,r,e){var n=e(503),g=e(508);t.exports=function(y,i){var k=g(y,i);return n(k)?k:void 0}},function(t,r,e){t.exports=e(301)},function(t,r,e){t.exports=e(219)},function(t,r,e){t.exports=e(577)},function(t,r){t.exports=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}},function(t,r){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(140),g=e(250);function y(i,k){for(var $=0;$<k.length;$++){var L=k[$];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),n(i,g(L.key),L)}}t.exports=function(i,k,$){return k&&y(i.prototype,k),$&&y(i,$),n(i,"prototype",{writable:!1}),i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){(function(n){var g;t.exports=(g=g||function(y,i){var k;if(typeof window<"u"&&window.crypto&&(k=window.crypto),typeof self<"u"&&self.crypto&&(k=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(k=globalThis.crypto),!k&&typeof window<"u"&&window.msCrypto&&(k=window.msCrypto),!k&&n!==void 0&&n.crypto&&(k=n.crypto),!k)try{k=e(892)}catch{}var $=function(){if(k){if(typeof k.getRandomValues=="function")try{return k.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof k.randomBytes=="function")try{return k.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},L=Object.create||function(){function _e(){}return function(Ve){var $e;return _e.prototype=Ve,$e=new _e,_e.prototype=null,$e}}(),V={},z=V.lib={},re=z.Base={extend:function(_e){var Ve=L(this);return _e&&Ve.mixIn(_e),Ve.hasOwnProperty("init")&&this.init!==Ve.init||(Ve.init=function(){Ve.$super.init.apply(this,arguments)}),Ve.init.prototype=Ve,Ve.$super=this,Ve},create:function(){var _e=this.extend();return _e.init.apply(_e,arguments),_e},init:function(){},mixIn:function(_e){for(var Ve in _e)_e.hasOwnProperty(Ve)&&(this[Ve]=_e[Ve]);_e.hasOwnProperty("toString")&&(this.toString=_e.toString)},clone:function(){return this.init.prototype.extend(this)}},ie=z.WordArray=re.extend({init:function(_e,Ve){_e=this.words=_e||[],this.sigBytes=Ve??4*_e.length},toString:function(_e){return(_e||le).stringify(this)},concat:function(_e){var Ve=this.words,$e=_e.words,Lt=this.sigBytes,jt=_e.sigBytes;if(this.clamp(),Lt%4)for(var Et=0;Et<jt;Et++){var ir=$e[Et>>>2]>>>24-Et%4*8&255;Ve[Lt+Et>>>2]|=ir<<24-(Lt+Et)%4*8}else for(var ur=0;ur<jt;ur+=4)Ve[Lt+ur>>>2]=$e[ur>>>2];return this.sigBytes+=jt,this},clamp:function(){var _e=this.words,Ve=this.sigBytes;_e[Ve>>>2]&=4294967295<<32-Ve%4*8,_e.length=y.ceil(Ve/4)},clone:function(){var _e=re.clone.call(this);return _e.words=this.words.slice(0),_e},random:function(_e){for(var Ve=[],$e=0;$e<_e;$e+=4)Ve.push($());return new ie.init(Ve,_e)}}),ue=V.enc={},le=ue.Hex={stringify:function(_e){for(var Ve=_e.words,$e=_e.sigBytes,Lt=[],jt=0;jt<$e;jt++){var Et=Ve[jt>>>2]>>>24-jt%4*8&255;Lt.push((Et>>>4).toString(16)),Lt.push((15&Et).toString(16))}return Lt.join("")},parse:function(_e){for(var Ve=_e.length,$e=[],Lt=0;Lt<Ve;Lt+=2)$e[Lt>>>3]|=parseInt(_e.substr(Lt,2),16)<<24-Lt%8*4;return new ie.init($e,Ve/2)}},oe=ue.Latin1={stringify:function(_e){for(var Ve=_e.words,$e=_e.sigBytes,Lt=[],jt=0;jt<$e;jt++){var Et=Ve[jt>>>2]>>>24-jt%4*8&255;Lt.push(String.fromCharCode(Et))}return Lt.join("")},parse:function(_e){for(var Ve=_e.length,$e=[],Lt=0;Lt<Ve;Lt++)$e[Lt>>>2]|=(255&_e.charCodeAt(Lt))<<24-Lt%4*8;return new ie.init($e,Ve)}},ae=ue.Utf8={stringify:function(_e){try{return decodeURIComponent(escape(oe.stringify(_e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(_e){return oe.parse(unescape(encodeURIComponent(_e)))}},Ue=z.BufferedBlockAlgorithm=re.extend({reset:function(){this._data=new ie.init,this._nDataBytes=0},_append:function(_e){typeof _e=="string"&&(_e=ae.parse(_e)),this._data.concat(_e),this._nDataBytes+=_e.sigBytes},_process:function(_e){var Ve,$e=this._data,Lt=$e.words,jt=$e.sigBytes,Et=this.blockSize,ir=jt/(4*Et),ur=(ir=_e?y.ceil(ir):y.max((0|ir)-this._minBufferSize,0))*Et,Dt=y.min(4*ur,jt);if(ur){for(var lr=0;lr<ur;lr+=Et)this._doProcessBlock(Lt,lr);Ve=Lt.splice(0,ur),$e.sigBytes-=Dt}return new ie.init(Ve,Dt)},clone:function(){var _e=re.clone.call(this);return _e._data=this._data.clone(),_e},_minBufferSize:0}),de=(z.Hasher=Ue.extend({cfg:re.extend(),init:function(_e){this.cfg=this.cfg.extend(_e),this.reset()},reset:function(){Ue.reset.call(this),this._doReset()},update:function(_e){return this._append(_e),this._process(),this},finalize:function(_e){return _e&&this._append(_e),this._doFinalize()},blockSize:16,_createHelper:function(_e){return function(Ve,$e){return new _e.init($e).finalize(Ve)}},_createHmacHelper:function(_e){return function(Ve,$e){return new de.HMAC.init(_e,$e).finalize(Ve)}}}),V.algo={});return V}(Math),g)}).call(this,e(73))},function(t,r,e){var n=e(27),g=e(20),y=e(150),i=e(80),k=e(44),$=e(128),L=e(30),V=e(210),z=Object.getOwnPropertyDescriptor;r.f=n?z:function(re,ie){if(re=k(re),ie=$(ie),V)try{return z(re,ie)}catch{}if(L(re,ie))return i(!g(y.f,re,ie),re[ie])}},function(t,r){t.exports=function(e){return e==null}},function(t,r,e){var n=e(98),g=e(5);t.exports=!!Object.getOwnPropertySymbols&&!g(function(){var y=Symbol();return!String(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(t,r,e){var n,g,y=e(14),i=e(66),k=y.process,$=y.Deno,L=k&&k.versions||$&&$.version,V=L&&L.v8;V&&(g=(n=V.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!g&&i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(g=+n[1]),t.exports=g},function(t,r,e){var n=e(128),g=e(39),y=e(80);t.exports=function(i,k,$){var L=n(k);L in i?g.f(i,L,y(0,$)):i[L]=$}},function(t,r){},function(t,r,e){var n,g,y,i=e(335),k=e(14),$=e(28),L=e(61),V=e(30),z=e(161),re=e(133),ie=e(114),ue=k.TypeError,le=k.WeakMap;if(i||z.state){var oe=z.state||(z.state=new le);oe.get=oe.get,oe.has=oe.has,oe.set=oe.set,n=function(Ue,de){if(oe.has(Ue))throw ue("Object already initialized");return de.facade=Ue,oe.set(Ue,de),de},g=function(Ue){return oe.get(Ue)||{}},y=function(Ue){return oe.has(Ue)}}else{var ae=re("state");ie[ae]=!0,n=function(Ue,de){if(V(Ue,ae))throw ue("Object already initialized");return de.facade=Ue,L(Ue,ae,de),de},g=function(Ue){return V(Ue,ae)?Ue[ae]:{}},y=function(Ue){return V(Ue,ae)}}t.exports={set:n,get:g,has:y,enforce:function(Ue){return y(Ue)?g(Ue):n(Ue,{})},getterFor:function(Ue){return function(de){var _e;if(!$(de)||(_e=g(de)).type!==Ue)throw ue("Incompatible receiver, "+Ue+" required");return _e}}}},function(t,r,e){var n=e(12);t.exports=n([].slice)},function(t,r){t.exports={}},function(t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}}},function(t,r,e){var n=e(14);t.exports=n.Promise},function(t,r){t.exports=function(e){return e!=null&&typeof e=="object"}},function(t,r,e){var n=e(279),g=e(60),y=e(3),i=e(24),k=e(26),$=e(6),L=e(48),V=e(16),z=e(2),re=e(4),ie=e(9),ue=e(123),le=e(37),oe=e(92),ae=e(93),Ue=e(281),de=e(282),_e=e(192);function Ve(sr){var er=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var cr,or=_e(sr);if(er){var hr=_e(this).constructor;cr=n(or,arguments,hr)}else cr=or.apply(this,arguments);return de(this,cr)}}var $e=e(173),Lt=e(0),jt=e(11).heartbeatInterval,Et=e(157).V2NIMLoginStatus,ir=e(11),ur={kSyncAction5_1:0,kSyncAction5_2:1,kSyncAction5_3:2},Dt={kKnown:-1,kSucceed:0,kFailed:1,kAborted:2,kCanceled:3},lr=function(sr){Ue(cr,sr);var er=Ve(cr);function cr(or){var hr,pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oe(this,cr),(hr=er.call(this)).clientProto=or,hr.logger=or.logger,hr.reporter=or.reporter,hr.timer=null,hr.setClientOrigin(),hr.serverOrigin={timeStamp:null,rtt:null,baseTimeStamp:null},hr.tolerantRTT=pr.tolerantRTT||3e3,hr.bestRTT=pr.bestRTT||100,hr.maxChances=pr.maxChances||10,hr.isSettingNTP=!1,hr.currentChance=0,hr.syncTraceData={},hr.syncTraceMap={},hr.syncTraceLastItem={},hr.uploadTraceData={},hr.setMonitorForSync(),hr.setMonitorForResources(),hr}return ae(cr,[{key:"hasOriginTimetick",value:function(){return!!this.serverOrigin.timeStamp}},{key:"setOriginTimetick",value:function(){var or=this,hr=this.clientProto.options;if((typeof Lt.get(hr,"privateConf.isDataReportEnable")=="boolean"?hr.privateConf.isDataReportEnable:ir.privateConf.isDataReportEnable)&&ir.isBrowser&&performance&&performance.now&&!(this.isSettingNTP||this.currentChance>=this.maxChances)){this.isSettingNTP=!0,this.currentChance++,clearTimeout(this.timer),this.timer=null;var pr="ReporterHook::setOriginTimetick:",Tr=g();return this.logger.info("".concat(pr," getServerTime start, times ").concat(this.currentChance)),new y(function(Pr){or.clientProto.sendCmd("getServerTime",{},function(_r,Mr){if(or.isSettingNTP=!1,_r){var rr;or.logger.warn("".concat(pr," Calculate Delay time, getServerTime error"),_r),or.clientProto.statusProtector.getLoginStatus()===Et.V2NIM_LOGIN_STATUS_LOGINED&&(or.timer=i(k(rr=or.setOriginTimetick).call(rr,or),jt)),Pr()}else{if(!Mr)return or.logger.warn("".concat(pr," Calculate Delay time, getServerTime not correct")),void Pr();var kr,Er=g()-Tr;if(Er>or.tolerantRTT)or.logger.warn("".concat(pr," Denied, cause of exceeding the maximum tolerance range of RTT: ").concat(Er)),or.timer=i(k(kr=or.setOriginTimetick).call(kr,or),jt);else if(Er>or.bestRTT){var xr,vr,Ir;or.serverOrigin.rtt&&Er>=or.serverOrigin.rtt?or.logger.info("".concat(pr," Denied, cause of current.RTT >= serverOrigin.RTT: ").concat(Er)):(or.setServerOrigin(Er,Mr),or.logger.info($(vr=$(Ir="".concat(pr," Accept within maximum tolerance range of RTT: ").concat(Er,", ntpTimestamp: ")).call(Ir,or.serverOrigin.timeStamp,", localClock: ")).call(vr,or.serverOrigin.baseTimeStamp))),or.timer=i(k(xr=or.setOriginTimetick).call(xr,or),jt)}else{var Or,Cr;or.setServerOrigin(Er,Mr),or.logger.info($(Or=$(Cr="".concat(pr," Accept within best RTT: ").concat(Er,", ntpTimestamp: ")).call(Cr,or.serverOrigin.timeStamp,", localClock: ")).call(Or,or.serverOrigin.baseTimeStamp))}Pr()}})})}}},{key:"getNTPTime",value:function(or){if(typeof or!="number"&&(or=this.getSafeClock()),this.serverOrigin.timeStamp){var hr=L(or-this.serverOrigin.baseTimeStamp);return this.serverOrigin.timeStamp+hr}var pr=L(or-this.clientOrigin.baseTimeStamp);return this.clientOrigin.timeStamp+pr}},{key:"getSafeClock",value:function(){return ir.isBrowser&&performance&&performance.now?performance.now():g()}},{key:"setMonitorForSync",value:function(){var or=this,hr="ReporterHook::setMonitorForSync:";this.on("reporter/syncStart",function(){or.logger.info("".concat(hr," sync start")),or.syncTraceData={user_id:or.clientProto.account,trace_id:Lt.get(or.clientProto,"socket.socket.sessionid"),action:ur.kSyncAction5_1,sync_begin_time:or.getSafeClock(),sync_end_time:0,sync_duration:0,overall_duration:0,extension:[]}}),this.on("reporter/syncRecv",function(){or.syncTraceData.user_id&&(or.logger.info("".concat(hr," sync receive packet")),or.syncTraceData.sync_end_time=or.getSafeClock(),or.syncTraceData.sync_duration=L(or.syncTraceData.sync_end_time-or.syncTraceData.sync_begin_time))}),this.on("reporter/syncItem",function(pr,Tr){var Pr;if(typeof pr=="number"&&or.syncTraceData.user_id){or.logger.info($(Pr="".concat(hr," receive sync item: ").concat(pr,", total: ")).call(Pr,Tr));var _r=or.getSafeClock();or.syncTraceMap[pr]=or.syncTraceMap[pr]?or.syncTraceMap[pr]:{sync_type:pr,times:0,total:0,sync_duration:0,proc_duration:0,description:"",items:[]};var Mr={total:Tr,pre_item_recv_time:or.syncTraceLastItem.cur_item_recv_time?or.syncTraceLastItem.cur_item_recv_time:or.syncTraceData.sync_begin_time,cur_item_recv_time:_r};or.syncTraceMap[pr].items.push(Mr),or.syncTraceLastItem=Mr}}),this.on("reporter/syncItemComplete",function(pr){var Tr;if(typeof pr=="number"&&or.syncTraceData.user_id){var Pr=or.syncTraceMap[pr];if(Pr){or.logger.info("".concat(hr," sync item ").concat(pr," callback done"));var _r=V(Tr=Pr.items).call(Tr,function(Mr){return!Mr.callback_time});_r.length!==0&&(_r[0].callback_time=or.getSafeClock())}}}),this.on("reporter/syncComplete",function(){var pr;or.syncTraceData.user_id&&(or.logger.info("".concat(hr," sync complete")),z(pr=re(or.syncTraceMap)).call(pr,function(Tr){var Pr,_r=ie(Pr=or.syncTraceMap[Tr].items).call(Pr,function(rr){return{total:rr.total,pre_item_recv_time:or.getNTPTime(rr.pre_item_recv_time),cur_item_recv_time:or.getNTPTime(rr.cur_item_recv_time),callback_time:or.getNTPTime(rr.callback_time)}}),Mr=ue(_r).call(_r,function(rr,kr){return rr.times+=1,rr.total+=kr.total,rr.sync_duration+=kr.cur_item_recv_time-kr.pre_item_recv_time,rr.proc_duration+=kr.callback_time-kr.cur_item_recv_time,rr},{times:0,total:0,sync_duration:0,proc_duration:0});or.syncTraceMap[Tr].items=_r,le(or.syncTraceMap[Tr],Mr),or.syncTraceData.extension.push(or.syncTraceMap[Tr])}),or.syncTraceData.sync_begin_time=or.getNTPTime(or.syncTraceData.sync_begin_time),or.syncTraceData.sync_end_time=or.getNTPTime(or.syncTraceData.sync_end_time),or.syncTraceData.overall_duration=or.getNTPTime()-or.syncTraceData.sync_begin_time,or.reporter.report("nim_sdk_sync",or.syncTraceData),or.syncTraceData={},or.syncTraceMap={})})}},{key:"setMonitorForResources",value:function(){var or=this,hr="ReporterHook::setMonitorForResources:";this.on("reporter/uploadStart",function(){or.logger.info("".concat(hr," upload start")),or.uploadTraceData={user_id:or.clientProto.account,trace_id:Lt.get(or.clientProto,"socket.socket.sessionid"),action:0,duration:0,start_time:or.getSafeClock(),offset:0,full_size:0,transferred_size:0}}),this.on("reporter/uploadUpdate",function(){var pr,Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};or.uploadTraceData.user_id&&(or.logger.info("".concat(hr," upload update"),Tr),z(pr=re(Tr)).call(pr,function(Pr){or.uploadTraceData[Pr]=Tr[Pr]}))}),this.on("reporter/uploadEnd",function(){var pr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dt.kKnown;or.uploadTraceData.user_id&&(or.logger.info("".concat(hr," upload end cause of ").concat(pr)),or.uploadTraceData.state=pr,or.uploadTraceData.start_time=or.getNTPTime(or.uploadTraceData.start_time),or.uploadTraceData.duration=or.getNTPTime(or.getSafeClock())-or.uploadTraceData.start_time,or.reporter.report("nim_sdk_resources",or.uploadTraceData),or.uploadTraceData={})})}},{key:"destroy",value:function(){this.reset(),this.removeAllListeners(),this.logger.info("ReporterHook::destroy: complete")}},{key:"reset",value:function(){this.logger.info("ReporterHook::reset"),this.serverOrigin={},this.setClientOrigin(),this.currentChance=0,this.timer&&clearTimeout(this.timer),this.syncTraceData={},this.syncTraceMap={},this.syncTraceLastItem={},this.uploadTraceData={}}},{key:"setClientOrigin",value:function(){this.clientOrigin={timeStamp:g(),baseTimeStamp:this.getSafeClock()}}},{key:"setServerOrigin",value:function(or,hr){this.serverOrigin={timeStamp:hr+L(or/2),rtt:or,baseTimeStamp:this.getSafeClock()}}}]),cr}($e);t.exports={EMSyncAction:ur,EMSyncType:{kSyncType3_8:30008,kSyncType3_109:30109,kSyncType4_4:40004,kSyncType4_6:40006,kSyncType4_9:40009,kSyncType4_12:40012,kSyncType4_13:40013,kSyncType4_14:40014,kSyncType4_16:40016,kSyncType4_17:40017,kSyncType4_18:40018,kSyncType4_19:40019,kSyncType4_20:40020,kSyncType4_21:40021,kSyncType4_23:40023,kSyncType4_24:40024,kSyncType4_100:40100,kSyncType4_101:40101,kSyncType7_15:70015,kSyncType8_109:80109,kSyncType8_126:80126,kSyncType12_5:12005,kSyncType12_6:12006,kSyncType15_13:15013,kSyncType21_109:21109,kSyncType21_111:21111},ReporterHook:lr,EMExceptionState:Dt,EMResourceUploadWay:{kResourceUploadWayNOS:0,kResourceUploadWayAWSPlugin:1,kResourceUploadWayNOSPlugin:2}}},function(t,r,e){var n=e(7),g=e(15),y=e(2),i=e(6),k=e(158),$=e(16),L=e(88),V=e(89),z=e(72),re=e(32);function ie(ae,Ue){var de=V!==void 0&&z(ae)||ae["@@iterator"];if(!de){if(re(ae)||(de=function(Et,ir){var ur;if(Et){if(typeof Et=="string")return ue(Et,ir);var Dt=g(ur=Object.prototype.toString.call(Et)).call(ur,8,-1);if(Dt==="Object"&&Et.constructor&&(Dt=Et.constructor.name),Dt==="Map"||Dt==="Set")return L(Et);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return ue(Et,ir)}}(ae))||Ue&&ae&&typeof ae.length=="number"){de&&(ae=de);var _e=0,Ve=function(){};return{s:Ve,n:function(){return _e>=ae.length?{done:!0}:{done:!1,value:ae[_e++]}},e:function(Et){throw Et},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $e,Lt=!0,jt=!1;return{s:function(){de=de.call(ae)},n:function(){var Et=de.next();return Lt=Et.done,Et},e:function(Et){jt=!0,$e=Et},f:function(){try{Lt||de.return==null||de.return()}finally{if(jt)throw $e}}}}function ue(ae,Ue){(Ue==null||Ue>ae.length)&&(Ue=ae.length);for(var de=0,_e=new Array(Ue);de<Ue;de++)_e[de]=ae[de];return _e}var le=e(11),oe={genUrlSep:function(ae){return n(ae=""+ae).call(ae,"?")===-1?"?imageView&":"&"},urlQuery2Object:function(ae){if(Object.prototype.toString.call(ae)!=="[object String]"||ae==="")return{};var Ue=n(ae).call(ae,"?");if(Ue!==-1){var de=g(ae).call(ae,Ue+1).split("&"),_e={};return y(de).call(de,function(Ve){if(~n(Ve).call(Ve,"=")){var $e=Ve.split("=");_e[$e[0]]=decodeURIComponent($e[1])}else _e[Ve]=""}),_e}},url2object:function(ae){Object.prototype.toString.call(ae)!=="[object String]"&&(ae="");var Ue=n(ae=ae||"").call(ae,"https")>=0?"https://":"http://",de=ae.replace(Ue,"");n(de).call(de,"?")>=0&&(de=de.substring(0,n(de).call(de,"?")));var _e=de.split("/");de=_e[0];var Ve="";if(_e.length>0&&(Ve=g(_e).call(_e,1).join("/")),n(ae).call(ae,"?")===-1)return{protocol:Ue,hostname:de,path:Ve,query:{}};var $e=ae.substr(n(ae).call(ae,"?")+1).split("&"),Lt={};return y($e).call($e,function(jt){if(n(jt).call(jt,"=")>0){var Et=jt.split("=");Lt[Et[0]]=decodeURIComponent(Et[1])}else Lt[jt]=""}),{protocol:Ue,hostname:de,path:Ve,query:Lt}},object2url:function(ae){var Ue,de=ae.protocol,_e=ae.hostname,Ve=ae.path,$e=ae.query;de=de||"http://",_e=_e||"",Ve&&(_e=i(Ue="".concat(_e,"/")).call(Ue,Ve)),$e=$e||{};var Lt,jt,Et,ir=[];for(var ur in $e){var Dt;ur!=="imageView"&&ir.push(i(Dt="".concat(ur,"=")).call(Dt,encodeURIComponent($e[ur])))}return ir.length>0?i(Lt=i(jt="".concat(de)).call(jt,_e,"?imageView&")).call(Lt,ir.join("&")):i(Et="".concat(de)).call(Et,_e)},genPrivateUrl:function(ae,Ue,de){if(Ue&&Ue.length){var _e,Ve=ie(Ue);try{for(Ve.s();!(_e=Ve.n()).done;){var $e=_e.value;if(n(ae).call(ae,$e)>=0)return $e!==de&&(ae=ae.replace($e,de)),ae;if(n(ae).call(ae,$e)>=0&&$e===de)return ae}}catch(rr){Ve.e(rr)}finally{Ve.f()}}var Lt,jt,Et=oe.url2object(ae),ir=Et.hostname,ur=Et.path,Dt=le.downloadUrl,lr=le.downloadHostList,sr=le.nosCdnEnable,er=le.serverNosConfig.cdnDomain,cr=decodeURIComponent(le.serverNosConfig.objectPrefix),or=decodeURIComponent(ur),hr=n(or).call(or,cr);if(er&&hr>-1&&sr)return i(Lt=i(jt="".concat(Et.protocol)).call(jt,er,"/")).call(Lt,g(or).call(or,hr));if(k(lr).call(lr,ir)&&k(ur).call(ur,"/")){var pr=n(ur).call(ur,"/"),Tr=ur.substring(0,pr),Pr=ur.substring(pr+1);return Dt.replace("{bucket}",Tr).replace("{object}",Pr)}var _r=$(lr).call(lr,function(rr){return typeof ir=="string"&&k(ir).call(ir,rr)})[0],Mr=_r?ir.replace(_r,"").replace(/\W/g,""):null;return Mr?Dt.replace("{bucket}",Mr).replace("{object}",ur):ae}};t.exports=oe},function(t,r,e){var n=e(5);t.exports=!n(function(){var g=(function(){}).bind();return typeof g!="function"||g.hasOwnProperty("prototype")})},function(t,r,e){var n=e(96),g=TypeError;t.exports=function(y){if(n(y))throw g("Can't call method on "+y);return y}},function(t,r,e){var n=e(49),g=e(161);(t.exports=function(y,i){return g[y]||(g[y]=i!==void 0?i:{})})("versions",[]).push({version:"3.27.1",mode:n?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,r,e){var n=e(321);t.exports=function(g){var y=+g;return y!=y||y===0?0:n(y)}},function(t,r,e){var n=e(5),g=e(21),y=e(98),i=g("species");t.exports=function(k){return y>=51||!n(function(){var $=[];return($.constructor={})[i]=function(){return{foo:1}},$[k](Boolean).foo!==1})}},function(t,r){t.exports={}},function(t,r,e){var n=e(371).charAt,g=e(50),y=e(101),i=e(169),k=e(170),$=y.set,L=y.getterFor("String Iterator");i(String,"String",function(V){$(this,{type:"String Iterator",string:g(V),index:0})},function(){var V,z=L(this),re=z.string,ie=z.index;return ie>=re.length?k(void 0,!0):(V=n(re,ie),z.index+=V.length,k(V,!1))})},function(t,r,e){var n=e(65),g=e(14);t.exports=n(g.process)=="process"},function(t,r,e){var n=e(14),g=e(105),y=e(17),i=e(211),k=e(215),$=e(21),L=e(400),V=e(243),z=e(49),re=e(98),ie=g&&g.prototype,ue=$("species"),le=!1,oe=y(n.PromiseRejectionEvent),ae=i("Promise",function(){var Ue=k(g),de=Ue!==String(g);if(!de&&re===66||z&&(!ie.catch||!ie.finally))return!0;if(!re||re<51||!/native code/.test(Ue)){var _e=new g(function($e){$e(1)}),Ve=function($e){$e(function(){},function(){})};if((_e.constructor={})[ue]=Ve,!(le=_e.then(function(){})instanceof Ve))return!0}return!de&&(L||V)&&!oe});t.exports={CONSTRUCTOR:ae,REJECTION_EVENT:oe,SUBCLASSING:le}},function(t,r,e){var n=e(26),g=e(62),y=e(574),i=e(576),k=e(582),$={},L=g.f;function V(oe){var ae=oe.upload=(oe.headers||g.o)["Content-Type"]==="multipart/form-data",Ue=!1;try{Ue=(location.protocol+"//"+location.host).toLowerCase()!==g.url2origin(oe.url)}catch{}return oe.cors=Ue,ae||Ue||oe.mode?function(de){var _e=de.mode,Ve=y,$e=g.getGlobal();return!$e.FormData&&$e.document&&(_e="iframe"),_e==="iframe"&&(Ve=de.upload?i:k),new Ve(de)}(oe):new y(oe)}function z(oe,ae,Ue){var de=$[oe];if(de){ae==="onload"&&de.result&&(Ue=function(Ve,$e){$e={data:$e};var Lt=Ve.result.headers;return Lt&&($e.headers=Ve.req.header(Lt)),$e}(de,Ue)),function(Ve){var $e=$[Ve];$e&&($e.req.destroy(),delete $[Ve])}(oe);var _e={type:ae,result:Ue};L(_e),_e.stopped||de[ae](_e.result)}}function re(oe,ae){z(oe,"onload",ae)}function ie(oe,ae){z(oe,"onerror",ae)}function ue(oe,ae){var Ue=g.genUrlSep(oe);return ae=ae||"",g.isObject(ae)&&(ae=g.object2query(ae)),ae&&(oe+=Ue+ae),oe}function le(oe,ae){ae=ae||{};var Ue=g.uniqueID(),de={result:ae.result,onload:ae.onload||g.f,onerror:ae.onerror||g.f};$[Ue]=de,ae.onload=n(re).call(re,null,Ue),ae.onerror=n(ie).call(ie,null,Ue),ae.query&&(oe=ue(oe,ae.query));var _e=ae.method||"";return _e&&!/get/i.test(_e)||!ae.data||(oe=ue(oe,ae.data),ae.data=null),ae.url=oe,de.req=V(ae),Ue}le.filter=function(oe){g.isFunction(oe)&&(L=oe)},le.abort=function(oe){var ae=$[oe];ae&&ae.req&&ae.req.abort()},t.exports=le},function(t,r,e){var n=e(8),g=e(303),y=e(22),i=e(108).genPrivateUrl,k=e(0),$=k.notundef,L=k.exist,V=e(195),z=e(297),re=z.typeMap;function ie(ue){ue.resend?(k.verifyOptions(ue,"idClient","msg::Message"),this.idClient=ue.idClient):this.idClient=k.guid(),this.type=re[ue.type],this.resend=ue.resend?1:0,$(ue.subType)&&(k.isInt(+ue.subType)&&+ue.subType>0?this.subType=+ue.subType:k.onParamError("subType0","msg::Message")),$(ue.custom)&&(y(ue.custom)==="object"?this.custom=n(ue.custom):this.custom=""+ue.custom),$(ue.text)&&(this.body=""+ue.text),$(ue.body)&&(this.body=""+ue.body),$(ue.yidunEnable)&&(this.yidunEnable=ue.yidunEnable?1:0),$(ue.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=ue.antiSpamUsingYidun?1:0),$(ue.antiSpamContent)&&(y(ue.antiSpamContent)==="object"?this.antiSpamContent=n(ue.antiSpamContent):this.antiSpamContent=""+ue.antiSpamContent),$(ue.antiSpamBusinessId)&&(y(ue.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=n(ue.antiSpamBusinessId):this.antiSpamBusinessId=""+ue.antiSpamBusinessId),$(ue.yidunAntiCheating)&&(this.yidunAntiCheating=ue.yidunAntiCheating+""),$(ue.skipHistory)&&(this.skipHistory=ue.skipHistory?1:0),$(ue.highPriority)&&(this.highPriority=ue.highPriority?1:0),$(ue.clientAntiSpam)&&(this.clientAntiSpam=ue.clientAntiSpam?1:0),$(ue.env)&&(this.env=ue.env),$(ue.notifyTargetTags)&&(this.notifyTargetTags=ue.notifyTargetTags),$(ue.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=ue.yidunAntiSpamExt),($(ue.loc_x)||$(ue.loc_y)||$(ue.loc_z))&&(this.loc_x=ue.loc_x,this.loc_y=ue.loc_y,this.loc_z=ue.loc_z)}ie.validTypes=z.validTypes,k.merge(ie.prototype,z.prototype),ie.getType=z.getType,ie.setFlow=z.setFlow,ie.reverse=function(ue){var le=k.filterObj(ue,"chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");return $(le.fromAvatar)&&(le.fromAvatar=i(le.fromAvatar)),le=k.merge(le,{fromClientType:V.reverseType(ue.fromClientType),time:+ue.time,type:ie.getType(ue),text:L(ue.body)?ue.body:ue.text||"",resend:+ue.resend==1}),$(le.userUpdateTime)&&(le.userUpdateTime=+le.userUpdateTime),$(ue.callbackExt)&&(le.callbackExt=ue.callbackExt),$(ue.subType)&&(le.subType=+ue.subType),$(ue.yidunAntiSpamRes)&&(le.yidunAntiSpamRes=ue.yidunAntiSpamRes),$(ue.loc_x)&&(le.x=g(ue.loc_x),le.y=g(ue.loc_y),le.z=g(ue.loc_z)),$(ue.toAccids)&&(le.toAccids=ue.toAccids),le.status=le.status||"success",le},ie.setExtra=function(ue,le){z.setFlow(ue,le)},t.exports=ie},function(t,r,e){var n=e(217),g=e(167);t.exports=Object.keys||function(y){return n(y,g)}},function(t,r,e){t.exports=e(423)},function(t,r,e){t.exports=e(432)},function(t,r,e){t.exports=e(444)},function(t,r,e){var n=e(175),g=e(504),y=e(505),i=n?n.toStringTag:void 0;t.exports=function(k){return k==null?k===void 0?"[object Undefined]":"[object Null]":i&&i in Object(k)?g(k):y(k)}},function(t,r,e){var n=e(596),g=e(188),y=e(603);t.exports=function(i,k){if(i==null)return{};var $,L,V=y(i,k);if(n){var z=n(i);for(L=0;L<z.length;L++)$=z[L],g(k).call(k,$)>=0||Object.prototype.propertyIsEnumerable.call(i,$)&&(V[$]=i[$])}return V},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(570)},function(t,r,e){var n=e(12),g=e(5),y=e(65),i=Object,k=n("".split);t.exports=g(function(){return!i("z").propertyIsEnumerable(0)})?function($){return y($)=="String"?k($,""):i($)}:i},function(t,r,e){var n=e(318),g=e(129);t.exports=function(y){var i=n(y,"string");return g(i)?i:i+""}},function(t,r,e){var n=e(33),g=e(17),y=e(19),i=e(209),k=Object;t.exports=i?function($){return typeof $=="symbol"}:function($){var L=n("Symbol");return g(L)&&y(L.prototype,k($))}},function(t,r,e){var n=e(12),g=0,y=Math.random(),i=n(1 .toString);t.exports=function(k){return"Symbol("+(k===void 0?"":k)+")_"+i(++g+y,36)}},function(t,r,e){var n=e(112),g=Math.max,y=Math.min;t.exports=function(i,k){var $=n(i);return $<0?g($+k,0):y($,k)}},function(t,r,e){var n=e(12),g=e(5),y=e(17),i=e(67),k=e(33),$=e(215),L=function(){},V=[],z=k("Reflect","construct"),re=/^\s*(?:class|function)\b/,ie=n(re.exec),ue=!re.exec(L),le=function(ae){if(!y(ae))return!1;try{return z(L,V,ae),!0}catch{return!1}},oe=function(ae){if(!y(ae))return!1;switch(i(ae)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ue||!!ie(re,$(ae))}catch{return!0}};oe.sham=!0,t.exports=!z||g(function(){var ae;return le(le.call)||!le(Object)||!le(function(){ae=!0})||ae})?oe:le},function(t,r,e){var n=e(111),g=e(130),y=n("keys");t.exports=function(i){return y[i]||(y[i]=g(i))}},function(t,r,e){var n=e(217),g=e(167).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(y){return n(y,g)}},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,e){var n=e(21);r.f=n},function(t,r,e){var n=e(30),g=e(17),y=e(42),i=e(133),k=e(229),$=i("IE_PROTO"),L=Object,V=L.prototype;t.exports=k?L.getPrototypeOf:function(z){var re=y(z);if(n(re,$))return re[$];var ie=re.constructor;return g(ie)&&re instanceof ie?ie.prototype:re instanceof L?V:null}},function(t,r,e){var n=e(12),g=e(36),y=e(355);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,k=!1,$={};try{(i=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))($,[]),k=$ instanceof Array}catch{}return function(L,V){return g(L),y(V),k?i(L,V):L.__proto__=V,L}}():void 0)},function(t,r,e){var n=e(67),g=e(160),y=e(96),i=e(103),k=e(21)("iterator");t.exports=function($){if(!y($))return g($,k)||g($,"@@iterator")||i[n($)]}},function(t,r,e){t.exports=e(407)},function(t,r,e){t.exports=e(449)},function(t,r,e){var n=e(493),g=e(494),y=e(495),i=e(496),k=e(497);function $(L){var V=-1,z=L==null?0:L.length;for(this.clear();++V<z;){var re=L[V];this.set(re[0],re[1])}}$.prototype.clear=n,$.prototype.delete=g,$.prototype.get=y,$.prototype.has=i,$.prototype.set=k,t.exports=$},function(t,r,e){var n=e(201);t.exports=function(g,y){for(var i=g.length;i--;)if(n(g[i][0],y))return i;return-1}},function(t,r,e){var n=e(87)(Object,"create");t.exports=n},function(t,r,e){var n=e(517);t.exports=function(g,y){var i=g.__data__;return n(y)?i[typeof y=="string"?"string":"hash"]:i.map}},function(t,r,e){var n=e(261),g=e(262);t.exports=function(y,i,k,$){var L=!k;k||(k={});for(var V=-1,z=i.length;++V<z;){var re=i[V],ie=$?$(k[re],y[re],re,k,y):void 0;ie===void 0&&(ie=y[re]),L?g(k,re,ie):n(k,re,ie)}return k}},function(t,r){t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(t,r){t.exports=`	
\v\f\r \u2028\u2029\uFEFF`},function(t,r,e){var n,g=e(18),y=e(2),i=e(9),k=e(3),$=e(6),L=e(7),V=e(26),z=e(8),re=e(108).urlQuery2Object,ie=e(0),ue=e(41),le=e(744),oe=e(745),ae=e(746),Ue=e(747),de=e(748),_e=e(749);function Ve(Et){this.mixin(Et)}Ve.prototype=g((function(){}).prototype,{protocol:{value:null,writable:!0,enumerable:!0,configurable:!0}}),Ve.prototype.setProtocol=function(Et){this.protocol=Et},Ve.prototype.mixin=function(Et){var ir,ur,Dt=this;this.configMap=this.configMap||{},y(ir=["idMap","cmdConfig","packetConfig"]).call(ir,function(lr){Dt.configMap[lr]=ie.merge({},Dt.configMap[lr],Et.configMap&&Et.configMap[lr])}),y(ur=["serializeMap","unserializeMap"]).call(ur,function(lr){Dt[lr]=ie.merge({},Dt[lr],Et[lr])})},Ve.prototype.createCmd=(n=1,function(Et,ir){var ur,Dt=this,lr=this.configMap.cmdConfig[Et],sr=this.configMap.packetConfig[lr.sid+"_"+lr.cid],er=Et==="heartbeat"?0:n++;return er>32767&&(er=1,n=2),Et={SID:lr.sid,CID:lr.cid,SER:er,isAwaitable:typeof lr.isAwaitable=="boolean"?lr.isAwaitable:!(!sr||!sr.response)},lr.params&&(Et.Q=[],y(ur=lr.params).call(ur,function(cr){var or=cr.type,hr=cr.name,pr=cr.entity,Tr=ir[hr];if(!ie.undef(Tr)){switch(or){case"PropertyArray":or="ArrayMable",Tr=i(Tr).call(Tr,function(Pr){return{t:"Property",v:Dt.serialize(Pr,pr)}});break;case"Property":Tr=Dt.serialize(Tr,hr);break;case"bool":Tr=Tr?"true":"false"}Et.Q.push({t:or,v:Tr})}})),Et}),Ve.prototype.parseResponse=function(Et){var ir=this;return new k(function(ur){var Dt=JSON.parse(Et),lr={raw:Dt,rawStr:Et,error:ue.genError(Dt.code)},sr=ir.configMap.packetConfig[Dt.sid+"_"+Dt.cid];if(!sr)return lr.notFound={sid:Dt.sid,cid:Dt.cid},void ur(lr);var er=Dt.r,cr=sr.service==="notify"&&!sr.cmd;if(lr.isNotify=cr,cr){var or=Dt.r[1].headerPacket;if(sr=ir.configMap.packetConfig[or.sid+"_"+or.cid],er=Dt.r[1].body,!sr)return lr.notFound={sid:or.sid,cid:or.cid},void ur(lr)}if(lr.service=sr.service,lr.cmd=sr.cmd,lr.error){var hr,pr,Tr=$(hr="".concat(Dt.sid,"_")).call(hr,Dt.cid);if(cr&&(Tr=$(pr="".concat(or.sid,"_")).call(pr,or.cid)),lr.error.cmd=lr.cmd,lr.error.callFunc="protocol::parseResponse: ".concat(Tr),lr.error.code===416){var Pr=er[0];Pr&&(lr.frequencyControlDuration=1e3*Pr)}}var _r,Mr=!1;lr.error&&sr.trivialErrorCodes&&(Mr=L(_r=sr.trivialErrorCodes).call(_r,lr.error.code)!==-1);var rr=[];if((!lr.error||Mr)&&sr.response){var kr;lr.content={};var Er=function(xr,vr,Ir,Or){if(xr&&Or==="msg"||Or==="sysMsg"){var Cr=Ir.content[Or];ie.isObject(Cr)&&!Cr.idServer&&(Cr.idServer=""+vr.r[0])}};y(kr=sr.response).call(kr,function(xr,vr){var Ir,Or=er[vr];if(!ie.undef(Or)){var Cr=xr.type,yr=xr.name,fr=xr.entity||yr;switch(Cr){case"Property":rr.push(ir.unserialize(Or,fr).then(V(Ir=function(Sr,Br,$r,Lr,Gr){$r.content[Lr]=Gr,Er(Sr,Br,$r,Lr)}).call(Ir,this,cr,Dt,lr,yr)));break;case"PropertyArray":lr.content[yr]=[],y(Or).call(Or,function(Sr,Br){var $r;rr.push(ir.unserialize(Sr,fr).then(V($r=function(Lr,Gr,qr){Lr.content[Gr][Br]=qr}).call($r,this,lr,yr)))});break;case"KVArray":lr.content[yr]=Or,Er(cr,Dt,lr,yr);break;case"long":case"Long":case"byte":case"Byte":case"Number":lr.content[yr]=+Or;break;default:lr.content[yr]=Or,Er(cr,Dt,lr,yr)}}})}k.all(rr).then(function(){ur(lr)})})},Ve.prototype.serialize=function(Et,ir){var ur=this.serializeMap[ir],Dt={};for(var lr in ur)Et.hasOwnProperty(lr)&&(Dt[ur[lr]]=Et[lr]);return Dt},Ve.prototype.matchNosSafeUrl=function(Et){if(!ie.isString(Et)||!~L(Et).call(Et,"_im_url=1"))return!1;var ir=re(Et);return!(!ir||!ir._im_url||ir._im_url!=1)},Ve.prototype.getOneNosOriginUrl=function(Et,ir,ur){var Dt=this;return new k(function(lr){Dt.protocol.getNosOriginUrlReqNum++,Dt.protocol.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:Et}},function(sr,er,cr){Dt.protocol.getNosOriginUrlReqNum--,sr?Dt.protocol.logger.warn("error: get nos originUrl failed",sr):(ir["_"+ur+"_safe"]=ir[ur],ir[ur]=cr.nosFileUrlTag&&cr.nosFileUrlTag.originUrl),lr()})})},Ve.prototype.checkObjSafeUrl=function(Et,ir,ur){var Dt=this;for(var lr in Et)if(Et.hasOwnProperty(lr)){var sr=Et[lr];if(ie.isString(sr)){if(this.matchNosSafeUrl(sr)){var er=this.getOneNosOriginUrl(sr,Et,lr);ir.push(er),ur.push(er)}}else ie.isObject(sr)?this.checkObjSafeUrl(sr,ir,ur):ie.isArray(sr)&&y(sr).call(sr,function(cr){ie.isObject(cr)&&Dt.checkObjSafeUrl(cr,ir,ur)})}};var $e=["url","avatar","fromAvatar","chatroomAvatar"];Ve.prototype.unserialize=function(Et,ir){var ur=this;return new k(function(Dt){var lr=ur.unserializeMap[ir],sr={},er=[];if(Et)for(var cr in lr){var or,hr=[];if(Et.hasOwnProperty(cr)&&(sr[lr[cr]]=Et[cr],ur.protocol.hasLogin&&!ur.protocol.keepNosSafeUrl))if(lr[cr]==="attach"&&Et[cr]&&L(Et[cr])&&~L(or=Et[cr]).call(or,"_im_url=1"))try{var pr,Tr=JSON.parse(Et[cr]);Tr.isS3||ur.checkObjSafeUrl(Tr,hr,er),k.all(hr).then(V(pr=function(Pr,_r){Pr.attach=z(_r)}).call(pr,ur,sr,Tr))}catch(Pr){ur.logger.warn("unserialize",Pr&&Pr.message)}else~L($e).call($e,lr[cr])&&Et[cr]&&ur.matchNosSafeUrl(Et[cr])&&er.push(ur.getOneNosOriginUrl(Et[cr],sr,lr[cr]))}k.all(er).then(function(){Dt(sr)})})},Ve.prototype.syncUnserialize=function(Et,ir){var ur=this.unserializeMap[ir],Dt={};if(Et)for(var lr in ur)Et.hasOwnProperty(lr)&&(Dt[ur[lr]]=Et[lr]);return Dt};var Lt=new Ve({configMap:le,serializeMap:oe,unserializeMap:ae}),jt=new Ve({configMap:Ue,serializeMap:de,unserializeMap:_e});t.exports={IM:Lt,Chatroom:jt}},function(t,r,e){var n={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,y=g&&!n.call({1:2},1);r.f=y?function(i){var k=g(this,i);return!!k&&k.enumerable}:n},function(t,r,e){t.exports=e(622)},function(t,r,e){var n=e(9),g=e(10),y=e(0),i=y.notundef,k=y.fillPropertyWithDefault,$={0:"normal",1:"owner",2:"manager"};function L(V){y.verifyOptions(V,"teamId","team::TeamMember"),y.verifyParamAtLeastPresentOne(V,"nickInTeam muteTeam muteNotiType custom","team::TeamMember"),this.teamId=V.teamId,i(V.account)&&(this.account=V.account),i(V.nickInTeam)&&(this.nickInTeam=V.nickInTeam),i(V.muteNotiType)?this.bits=V.muteNotiType:i(V.muteTeam)&&(this.bits=0,V.muteTeam&&(this.bits+=1)),i(V.mute)&&(this.mute=V.mute?1:0),i(V.custom)&&(this.custom=""+V.custom)}L.reverse=function(V){var z=y.copy(V);if(i(z.teamId)&&(z.teamId=""+z.teamId),i(z.type)&&(z.type=$[z.type]),i(z.active)&&(z.active=+z.active==1),i(z.valid)&&(z.valid=+z.valid==1),i(z.mute)&&(z.mute=+z.mute==1),i(z.joinTime)&&(z.joinTime=+z.joinTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),i(z.bits)){var re=z.bits;delete z.bits,z.muteTeam=!!(1&re),z.muteNotiType=re}return i(z.teamId)&&i(z.account)&&(z.id=L.genId(z.teamId,z.account)),i(z.followAccountIds)&&(z.followAccountIds=JSON.parse(z.followAccountIds)),z},L.reverseMembers=function(V){return n(V).call(V,function(z){return g(L).call(L,z)})},L.fillProperties=function(V){var z=k(V,"mute",!1),re=k(V,"custom","");return z||re},L.genId=function(V,z){return V+"-"+z},L.accounts2ids=function(V,z){return n(z).call(z,function(re){return L.genId(V,re)})},L.assembleMembers=function(V,z){return y.isArray(z)||(z=[z]),n(z).call(z,function(re){return L.assembleMember(V,re)})},L.assembleMember=function(V,z){return{id:L.genId(V.teamId,z),account:z,teamId:V.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:V.memberUpdateTime,updateTime:V.memberUpdateTime,active:!0,valid:!0,invitorAccid:"",followAccountIds:[]}},L.assembleOwner=function(V){var z=L.assembleMember(V,V.owner);return z.type="owner",z},t.exports=L},function(t,r,e){var n,g=e(22),y=e(7),i=e(8),k=e(6),$=e(4),L=e(10),V=e(16),z=e(9),re=e(2),ie=e(0),ue=ie.undef,le=ie.notundef,oe=e(149).IM,ae=e(194),Ue=e(152),de={customP2p:100,customTeam:101,customSuperTeam:103,deleteMsgP2p:7,deleteMsgTeam:8,deleteMsgSuperTeam:12,deleteOnewayMsgP2p:13,deleteOnewayMsgTeam:14},_e={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",12:"deleteMsgSuperTeam",13:"deleteMsgP2pOneWay",14:"deleteMsgTeamOneWay",15:"applySuperTeam",16:"rejectSuperTeamApply",17:"superTeamInvite",18:"rejectSuperTeamInvite",100:"customP2p",101:"customTeam",103:"customSuperTeam",102:"customP2p"},Ve={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},$e=["team","superTeam","friend","msg"],Lt={applyTeam:"team",rejectTeamApply:"team",teamInvite:"team",rejectTeamInvite:"team",applySuperTeam:"superTeam",rejectSuperTeamApply:"superTeam",superTeamInvite:"superTeam",rejectSuperTeamInvite:"superTeam",addFriend:"friend",applyFriend:"friend",passFriendApply:"friend",rejectFriendApply:"friend",deleteFriend:"friend",deleteMsg:"msg"};function jt(Et){var ir,ur;ie.verifyOptions(Et,"type to","sysmsg::SystemMessage"),ie.verifyParamValid("type",Et.type,jt.validTypes,"sysmsg::SystemMessage"),y(ir=Et.type).call(ir,"custom")!==-1&&(ie.verifyOptions(Et,"content","sysmsg::SystemMessage"),this.attach=Et.content,le(Et.apnsText)&&(this.apnsText=""+Et.apnsText),le(Et.pushPayload)&&(g(Et.pushPayload)==="object"?this.pushPayload=i(Et.pushPayload):this.pushPayload=""+Et.pushPayload),le(Et.sendToOnlineUsersOnly)&&(this.sendToOnlineUsersOnly=Et.sendToOnlineUsersOnly?0:1),le(Et.cc)&&(this.cc=Et.cc?1:0),le(Et.isPushable)&&(this.isPushable=Et.isPushable?1:0),le(Et.isUnreadable)&&(this.isUnreadable=Et.isUnreadable?1:0),le(Et.needPushNick)&&(this.needPushNick=Et.needPushNick?1:0)),y(ur=Et.type).call(ur,"deleteMsg")===0&&(Et.apnsText&&(this.apnsText=Et.apnsText),Et.pushPayload&&(this.pushPayload=Et.pushPayload),Et.attach&&(this.attach=Et.attach)),this.time=Et.time||+new Date,this.type=de[Et.type],this.to=Et.to,le(Et.from)&&(this.from=Et.from),le(Et.ps)&&(this.ps=Et.ps),le(Et.deletedIdClient)&&(this.deletedIdClient=Et.deletedIdClient),le(Et.deletedIdServer)&&(this.deletedIdServer=Et.deletedIdServer),le(Et.opeAccount)&&(this.opeAccount=Et.opeAccount),le(Et.yidunEnable)&&(this.yidunEnable=Et.yidunEnable?1:0),le(Et.antiSpamContent)&&(g(Et.antiSpamContent)==="object"?this.antiSpamContent=i(Et.antiSpamContent):this.antiSpamContent=""+Et.antiSpamContent),le(Et.antiSpamBusinessId)&&(g(Et.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=i(Et.antiSpamBusinessId):this.antiSpamBusinessId=""+Et.antiSpamBusinessId),le(Et.env)&&(this.env=Et.env),this.idClient=Et.idClient||ie.guid()}jt.validTypes=k(n=$(de)).call(n,$(Lt)),jt.validCategories=["team","friend"],jt.isCustom=function(Et){return Et.type==="custom"},jt.reverse=function(Et){var ir,ur={time:+Et.time,to:Et.to,type:_e[Et.type]};if(le(Et.from)&&(ur.from=Et.from),le(Et.idClient)&&(ur.idClient=Et.idClient),le(Et.idServer)&&(ur.idServer=""+Et.idServer),le(Et.deletedIdClient)&&(ur.deletedIdClient=Et.deletedIdClient),le(Et.deletedIdServer)&&(ur.deletedIdServer=""+Et.deletedIdServer),le(Et.deletedMsgTime)&&(ur.deletedMsgTime=+Et.deletedMsgTime),le(Et.deletedMsgFromNick)&&(ur.deletedMsgFromNick=""+Et.deletedMsgFromNick),le(Et.opeAccount)&&(ur.opeAccount=Et.opeAccount),le(Et.ps)&&(ur.ps=Et.ps),le(Et.callbackExt)&&(ur.callbackExt=Et.callbackExt),Et.attach=Et.attach?""+Et.attach:"",ur.type==="customP2p"||ur.type==="customTeam"||ur.type==="customSuperTeam")ur.content=Et.attach,le(Et.apnsText)&&(ur.apnsText=Et.apnsText),le(Et.pushPayload)&&(ur.pushPayload=Et.pushPayload),ie.merge(ur,{sendToOnlineUsersOnly:ue(Et.sendToOnlineUsersOnly)||+Et.sendToOnlineUsersOnly==0,cc:ue(Et.cc)||+Et.cc==1,isPushable:ue(Et.isPushable)||+Et.isPushable==1,isUnreadable:ue(Et.isUnreadable)||+Et.isUnreadable==1,needPushNick:le(Et.needPushNick)&&+Et.needPushNick==1}),ur.type==="customP2p"?ur.scene="p2p":ur.type==="customSuperTeam"?ur.scene="superTeam":ur.type==="customTeam"&&(ur.scene="team"),ur.type="custom";else if(y(ir=ur.type).call(ir,"deleteMsg")===0){Et.apnsText&&(ur.apnsText=Et.apnsText),Et.pushPayload&&(ur.pushPayload=Et.pushPayload),Et.attach&&(ur.attach=Et.attach);var Dt=ur.type.toLowerCase();y(Dt).call(Dt,"p2p")>-1?ur.scene="p2p":y(Dt).call(Dt,"superteam")>-1?ur.scene="superTeam":y(Dt).call(Dt,"team")>-1&&(ur.scene="team"),ur.type="deleteMsg"}else{if(Et.attach){ur.attach={};var lr=JSON.parse(Et.attach);le(lr.vt)?(ur.type=Ve[lr.vt],lr.serverex&&lr.serverex[0]===1&&(ur.serverex=lr.serverex[1]),delete ur.attach):(le(lr.tinfo)&&(ur.attach.team=L(ae).call(ae,oe.syncUnserialize(lr.tinfo,"team"))),le(lr.tlist)&&(ur.attach.member=L(Ue).call(Ue,oe.syncUnserialize(lr.tlist,"teamMember"))),le(lr.attach)&&(ur.attach.custom=lr.attach))}ur.category=Lt[ur.type],ur.read=!1,ur.state="init"}return le(Et.cc)&&(ur.cc=+Et.cc==1),ur.status=Et.status||"success",le(V(Et))&&(ur.filter=V(Et)),ur},jt.reverseSysMsgs=function(Et,ir){var ur=(ir=ir||{}).mapper,Dt=ie.isFunction(ur);return z(Et).call(Et,function(lr){return lr=L(jt).call(jt,lr),Dt&&(lr=ur(lr)),lr})},jt.completeUnread=function(Et){var ir,ur;return Et=Et||{},re($e).call($e,function(Dt){delete Et[Dt]}),re(ir=$(Lt)).call(ir,function(Dt){Et[Dt]=Et[Dt]||0,Et[Dt]<0&&(Et[Dt]=0),Et[ur=Lt[Dt]]=Et[ur]||0,Et[ur]=Et[ur]+Et[Dt]}),Et.total=0,re($e).call($e,function(Dt){Et.total+=Et[Dt]}),Et},t.exports=jt},function(t,r,e){var n=e(125),g=["unreadMsgs"],y=e(0);function i(){}i.parse=function(k){var $=k.split("|");return{scene:$[0],to:$[1]}},i.genSessionByMsg=function(k){return{id:k.sessionId,scene:k.scene,to:k.target,updateTime:k.time,lastMsg:k}},i.appendLastMsg=function(k){var $=k.lastMsg;k["last"+y.capFirstLetter($.type)+"Msg"]=$,k["last"+y.capFirstLetter($.flow)+"Msg"]=$},i.genSessionByMsgs=function(k,$){var L=k.getLastNotIgnoredMsg($);return L?i.genSessionByMsg(L):null},i.trim=function(k){var $=k=y.simpleClone(k);return $.unreadMsgs,n($,g)},i.isComplete=function(k){return k.id&&k.scene&&k.to},t.exports=i},function(t,r,e){t.exports=e(329)},function(t,r,e){var n=e(491);t.exports=function(g){return n(g,5)}},function(t,r,e){var n=e(18),g=e(173),y={V2NIM_LOGIN_STATUS_LOGOUT:0,V2NIM_LOGIN_STATUS_LOGINED:1,V2NIM_LOGIN_STATUS_LOGINING:2},i={V2NIM_CONNECT_STATUS_DISCONNECTED:0,V2NIM_CONNECT_STATUS_CONNECTED:1,V2NIM_CONNECT_STATUS_CONNECTING:2,V2NIM_CONNECT_STATUS_WAITING:3};function k($){this.loginStatus=y.V2NIM_LOGIN_STATUS_LOGOUT,this.connectStatus=i.V2NIM_CONNECT_STATUS_DISCONNECTED,this.logger=$.logger,this.setMonitor()}k.prototype=n(new g),k.prototype.setMonitor=function(){var $=this;this.on("auth/loginLifeCycleAddressing",function(){$.logger.log("auth::life cycle addressing"),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGINING),$.setConnectStatus(i.V2NIM_CONNECT_STATUS_CONNECTING)}),this.on("auth/loginLifeCycleConnect",function(){$.logger.log("auth::life cycle connecting"),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGINING),$.setConnectStatus(i.V2NIM_CONNECT_STATUS_CONNECTING)}),this.on("auth/loginLifeCycleConnectSucc",function(){$.logger.log("auth::life cycle connect success"),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGINING),$.setConnectStatus(i.V2NIM_CONNECT_STATUS_CONNECTED)}),this.on("auth/loginLifeCycleConnectFail",function(L){$.logger.log("auth::life cycle connect fail"),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGOUT),$.setConnectStatus(i.V2NIM_CONNECT_STATUS_DISCONNECTED,L)}),this.on("auth/loginLifeCycleDisconnected",function(L){$.logger.log("auth::life cycle disconnected:",L&&L.message),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGOUT),$.setConnectStatus(i.V2NIM_CONNECT_STATUS_DISCONNECTED,L)}),this.on("auth/loginLifeCycleLoginSucc",function(){$.logger.log("auth::life cycle login success, verify authentication success"),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGINED)}),this.on("auth/loginLifeCycleLoginFail",function(L){$.logger.log("auth::life cycle login fail due to verify authentication failed:",L),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGOUT,L)}),this.on("auth/loginLifeCycleLogout",function(){$.logger.log("auth::life cycle logout"),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGOUT)}),this.on("auth/loginLifeCycleKicked",function(L){$.logger.log("auth::life cycle kicked",L),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGOUT)}),this.on("auth/loginLifeCycleWaiting",function(){$.logger.log("auth::life cycle waiting to reconnect"),$.getConnectStatus(),$.setLoginStatus(y.V2NIM_LOGIN_STATUS_LOGOUT),$.setConnectStatus(i.V2NIM_CONNECT_STATUS_WAITING)})},k.prototype.getConnectStatus=function(){return this.connectStatus},k.prototype.getLoginStatus=function(){return this.loginStatus},k.prototype.setLoginStatus=function($,L){if($!==this.loginStatus){var V=this.loginStatus;this.loginStatus=$,this.emit("loginStatus",$),this.delegateLoginEvent(V,$,L)}},k.prototype.delegateLoginEvent=function($,L,V){$===y.V2NIM_LOGIN_STATUS_LOGINING&&L===y.V2NIM_LOGIN_STATUS_LOGOUT&&this.emit("loginFailed",V)},k.prototype.setConnectStatus=function($,L){if($!==this.connectStatus){var V=this.connectStatus;this.connectStatus=$,this.emit("connectStatus",$),this.delegateConnectEvent(V,$,L)}},k.prototype.delegateConnectEvent=function($,L,V){$===i.V2NIM_CONNECT_STATUS_CONNECTED&&L===i.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("disconnected",V),$===i.V2NIM_CONNECT_STATUS_CONNECTING&&L===i.V2NIM_CONNECT_STATUS_CONNECTED&&this.emit("connectSuccess"),$===i.V2NIM_CONNECT_STATUS_CONNECTING&&L===i.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("connectFailed",V),$!==i.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.connectStatus!==i.V2NIM_CONNECT_STATUS_WAITING||L!==i.V2NIM_CONNECT_STATUS_CONNECTING||this.emit("connecting")},k.prototype.destroy=function(){this.removeAllListeners()},t.exports={V2NIMLoginStatus:y,V2NIMConnectStatus:i,StatusProtector:k}},function(t,r,e){t.exports=e(633)},function(t,r,e){var n=e(65),g=e(12);t.exports=function(y){if(n(y)==="Function")return g(y)}},function(t,r,e){var n=e(31),g=e(96);t.exports=function(y,i){var k=y[i];return g(k)?void 0:n(k)}},function(t,r,e){var n=e(14),g=e(320),y=n["__core-js_shared__"]||g("__core-js_shared__",{});t.exports=y},function(t,r,e){var n=e(14),g=e(28),y=n.document,i=g(y)&&g(y.createElement);t.exports=function(k){return i?y.createElement(k):{}}},function(t,r,e){var n=e(44),g=e(131),y=e(46),i=function(k){return function($,L,V){var z,re=n($),ie=y(re),ue=g(V,ie);if(k&&L!=L){for(;ie>ue;)if((z=re[ue++])!=z)return!0}else for(;ie>ue;ue++)if((k||ue in re)&&re[ue]===L)return k||ue||0;return!k&&-1}};t.exports={includes:i(!0),indexOf:i(!1)}},function(t,r,e){var n=e(326);t.exports=function(g,y){return new(n(g))(y===0?0:y)}},function(t,r,e){var n={};n[e(21)("toStringTag")]="z",t.exports=String(n)==="[object z]"},function(t,r,e){var n=e(27),g=e(212),y=e(39),i=e(36),k=e(44),$=e(120);r.f=n&&!g?Object.defineProperties:function(L,V){i(L);for(var z,re=k(V),ie=$(V),ue=ie.length,le=0;ue>le;)y.f(L,z=ie[le++],re[z]);return L}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r,e){var n=e(65),g=e(44),y=e(134).f,i=e(221),k=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function($){return k&&n($)=="Window"?function(L){try{return y(L)}catch{return i(k)}}($):y(g($))}},function(t,r,e){var n=e(1),g=e(20),y=e(49),i=e(227),k=e(17),$=e(354),L=e(137),V=e(138),z=e(85),re=e(61),ie=e(68),ue=e(21),le=e(103),oe=e(228),ae=i.PROPER,Ue=i.CONFIGURABLE,de=oe.IteratorPrototype,_e=oe.BUGGY_SAFARI_ITERATORS,Ve=ue("iterator"),$e=function(){return this};t.exports=function(Lt,jt,Et,ir,ur,Dt,lr){$(Et,jt,ir);var sr,er,cr,or=function(rr){if(rr===ur&&_r)return _r;if(!_e&&rr in Tr)return Tr[rr];switch(rr){case"keys":case"values":case"entries":return function(){return new Et(this,rr)}}return function(){return new Et(this)}},hr=jt+" Iterator",pr=!1,Tr=Lt.prototype,Pr=Tr[Ve]||Tr["@@iterator"]||ur&&Tr[ur],_r=!_e&&Pr||or(ur),Mr=jt=="Array"&&Tr.entries||Pr;if(Mr&&(sr=L(Mr.call(new Lt)))!==Object.prototype&&sr.next&&(y||L(sr)===de||(V?V(sr,de):k(sr[Ve])||ie(sr,Ve,$e)),z(sr,hr,!0,!0),y&&(le[hr]=$e)),ae&&ur=="values"&&Pr&&Pr.name!=="values"&&(!y&&Ue?re(Tr,"name","values"):(pr=!0,_r=function(){return g(Pr,this)})),ur)if(er={values:or("values"),keys:Dt?_r:or("keys"),entries:or("entries")},lr)for(cr in er)(_e||pr||!(cr in Tr))&&ie(Tr,cr,er[cr]);else n({target:jt,proto:!0,forced:_e||pr},er);return y&&!lr||Tr[Ve]===_r||ie(Tr,Ve,_r,{name:ur}),le[jt]=_r,er}},function(t,r){t.exports=function(e,n){return{value:e,done:n}}},function(t,r,e){var n=e(19),g=TypeError;t.exports=function(y,i){if(n(i,y))return y;throw g("Incorrect invocation")}},function(t,r,e){var n=e(132),g=e(81),y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not a constructor")}},function(t,r,e){var n=Object.prototype.hasOwnProperty,g="~";function y(){}function i(V,z,re){this.fn=V,this.context=z,this.once=re||!1}function k(V,z,re,ie,ue){if(typeof re!="function")throw new TypeError("The listener must be a function");var le=new i(re,ie||V,ue),oe=g?g+z:z;return V._events[oe]?V._events[oe].fn?V._events[oe]=[V._events[oe],le]:V._events[oe].push(le):(V._events[oe]=le,V._eventsCount++),V}function $(V,z){--V._eventsCount==0?V._events=new y:delete V._events[z]}function L(){this._events=new y,this._eventsCount=0}Object.create&&(y.prototype=Object.create(null),new y().__proto__||(g=!1)),L.prototype.eventNames=function(){var V,z,re=[];if(this._eventsCount===0)return re;for(z in V=this._events)n.call(V,z)&&re.push(g?z.slice(1):z);return Object.getOwnPropertySymbols?re.concat(Object.getOwnPropertySymbols(V)):re},L.prototype.listeners=function(V){var z=g?g+V:V,re=this._events[z];if(!re)return[];if(re.fn)return[re.fn];for(var ie=0,ue=re.length,le=new Array(ue);ie<ue;ie++)le[ie]=re[ie].fn;return le},L.prototype.listenerCount=function(V){var z=g?g+V:V,re=this._events[z];return re?re.fn?1:re.length:0},L.prototype.emit=function(V,z,re,ie,ue,le){var oe=g?g+V:V;if(!this._events[oe])return!1;var ae,Ue,de=this._events[oe],_e=arguments.length;if(de.fn){switch(de.once&&this.removeListener(V,de.fn,void 0,!0),_e){case 1:return de.fn.call(de.context),!0;case 2:return de.fn.call(de.context,z),!0;case 3:return de.fn.call(de.context,z,re),!0;case 4:return de.fn.call(de.context,z,re,ie),!0;case 5:return de.fn.call(de.context,z,re,ie,ue),!0;case 6:return de.fn.call(de.context,z,re,ie,ue,le),!0}for(Ue=1,ae=new Array(_e-1);Ue<_e;Ue++)ae[Ue-1]=arguments[Ue];de.fn.apply(de.context,ae)}else{var Ve,$e=de.length;for(Ue=0;Ue<$e;Ue++)switch(de[Ue].once&&this.removeListener(V,de[Ue].fn,void 0,!0),_e){case 1:de[Ue].fn.call(de[Ue].context);break;case 2:de[Ue].fn.call(de[Ue].context,z);break;case 3:de[Ue].fn.call(de[Ue].context,z,re);break;case 4:de[Ue].fn.call(de[Ue].context,z,re,ie);break;default:if(!ae)for(Ve=1,ae=new Array(_e-1);Ve<_e;Ve++)ae[Ve-1]=arguments[Ve];de[Ue].fn.apply(de[Ue].context,ae)}}return!0},L.prototype.on=function(V,z,re){return k(this,V,z,re,!1)},L.prototype.once=function(V,z,re){return k(this,V,z,re,!0)},L.prototype.removeListener=function(V,z,re,ie){var ue=g?g+V:V;if(!this._events[ue])return this;if(!z)return $(this,ue),this;var le=this._events[ue];if(le.fn)le.fn!==z||ie&&!le.once||re&&le.context!==re||$(this,ue);else{for(var oe=0,ae=[],Ue=le.length;oe<Ue;oe++)(le[oe].fn!==z||ie&&!le[oe].once||re&&le[oe].context!==re)&&ae.push(le[oe]);ae.length?this._events[ue]=ae.length===1?ae[0]:ae:$(this,ue)}return this},L.prototype.removeAllListeners=function(V){var z;return V?(z=g?g+V:V,this._events[z]&&$(this,z)):(this._events=new y,this._eventsCount=0),this},L.prototype.off=L.prototype.removeListener,L.prototype.addListener=L.prototype.on,L.prefixed=g,L.EventEmitter=L,t.exports=L},function(t,r,e){var n=e(87)(e(56),"Map");t.exports=n},function(t,r,e){var n=e(56).Symbol;t.exports=n},function(t,r,e){var n=e(263),g=e(530),y=e(202);t.exports=function(i){return y(i)?n(i):g(i)}},function(t,r){var e=Array.isArray;t.exports=e},function(t,r){t.exports=function(e){return function(n){return e(n)}}},function(t,r,e){(function(n){var g=e(258),y=r&&!r.nodeType&&r,i=y&&typeof n=="object"&&n&&!n.nodeType&&n,k=i&&i.exports===y&&g.process,$=function(){try{var L=i&&i.require&&i.require("util").types;return L||k&&k.binding&&k.binding("util")}catch{}}();n.exports=$}).call(this,e(147)(t))},function(t,r){var e=Object.prototype;t.exports=function(n){var g=n&&n.constructor;return n===(typeof g=="function"&&g.prototype||e)}},function(t,r,e){var n=e(263),g=e(533),y=e(202);t.exports=function(i){return y(i)?n(i,!0):g(i)}},function(t,r,e){var n=e(538),g=e(267),y=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,k=i?function($){return $==null?[]:($=Object($),n(i($),function(L){return y.call($,L)}))}:g;t.exports=k},function(t,r,e){var n=e(542),g=e(174),y=e(543),i=e(272),k=e(544),$=e(124),L=e(259),V=L(n),z=L(g),re=L(y),ie=L(i),ue=L(k),le=$;(n&&le(new n(new ArrayBuffer(1)))!="[object DataView]"||g&&le(new g)!="[object Map]"||y&&le(y.resolve())!="[object Promise]"||i&&le(new i)!="[object Set]"||k&&le(new k)!="[object WeakMap]")&&(le=function(oe){var ae=$(oe),Ue=ae=="[object Object]"?oe.constructor:void 0,de=Ue?L(Ue):"";if(de)switch(de){case V:return"[object DataView]";case z:return"[object Map]";case re:return"[object Promise]";case ie:return"[object Set]";case ue:return"[object WeakMap]"}return ae}),t.exports=le},function(t,r,e){var n=e(547);t.exports=function(g){var y=new g.constructor(g.byteLength);return new n(y).set(new n(g)),y}},function(t,r,e){var n=e(12),g=e(110),y=e(50),i=e(148),k=n("".replace),$="["+i+"]",L=RegExp("^"+$+$+"*"),V=RegExp($+$+"*$"),z=function(re){return function(ie){var ue=y(g(ie));return 1&re&&(ue=k(ue,L,"")),2&re&&(ue=k(ue,V,"")),ue}};t.exports={start:z(1),end:z(2),trim:z(3)}},function(t,r,e){var n=e(118),g=e(583);n.json=g,t.exports=n},function(t,r,e){var n=e(18),g=e(24),y=e(7),i=e(2),k=e(62),$=k.f,L=e(575);function V(re){re.onload&&this.once("load",re.onload),re.onerror&&this.once("error",re.onerror),re.onbeforesend&&this.once("beforesend",re.onbeforesend),re.onaftersend&&this.once("aftersend",re.onaftersend);var ie=(re=this.options=k.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},re)).headers;k.notexist(ie["Content-Type"])&&(ie["Content-Type"]="application/x-www-form-urlencoded"),this.send()}var z=V.prototype=n(L.prototype);z.send=function(){var re=this,ie=re.options;g(function(){try{try{re.emit("beforesend",ie)}catch{}re.doSend()}catch(ue){re.onError("serverError",":"+ue.message)}},0)},z.doSend=$,z.afterSend=function(){var re=this;g(function(){re.emit("aftersend",re.options)},0)},z.onLoad=function(re){var ie,ue=this.options,le=re.status,oe=re.result;if(typeof le!="number"||le!==0)if(y(ie=""+le).call(ie,"2")===0){if(ue.type==="json")try{oe=JSON.parse(oe)}catch{return void this.onError("parseError",oe)}this.emit("load",oe)}else this.onError("serverError","",{status:le,result:oe,date:re.date});else this.onError("netError","",{status:408})},z.onError=function(re,ie,ue){var le=k.isObject(ue)?ue:{};le.code=re||"error",le.message=ie||"",this.emit("error",le)},z.onTimeout=function(){this.onError("timeout","",{status:408})},z.abort=function(){this.onError("abort","",{status:415})},z.header=function(re){var ie=this;if(!k.isArray(re))return ie.getResponseHeader(re||"");var ue={};return i(re).call(re,function(le){ue[le]=ie.header(le)}),ue},z.getResponseHeader=$,z.destroy=$,t.exports=V},function(t,r,e){t.exports=e(600)},function(t,r,e){t.exports=e(613)},function(t,r,e){var n=e(191),g=e(151);function y(i,k){var $;return t.exports=y=n?g($=n).call($):function(L,V){return L.__proto__=V,L},t.exports.__esModule=!0,t.exports.default=t.exports,y(i,k)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(616)},function(t,r,e){var n=e(191),g=e(151),y=e(283);function i(k){var $;return t.exports=i=n?g($=y).call($):function(L){return L.__proto__||y(L)},t.exports.__esModule=!0,t.exports.default=t.exports,i(k)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){var e={link:{id:1,heartbeat:2,negotiateTransport:5,initTransport:6},sync:{id:5,sync:1,syncTeamMembers:2},misc:{id:6,getSimpleNosToken:1,getNosToken:2,notifyUploadLog:3,uploadSdkLogUrl:4,audioToText:5,processImage:6,getNosTokenTrans:7,notifyTransLog:8,fetchFile:9,fetchFileList:10,removeFile:11,getClientAntispam:17,fileQuickTransfer:18,getNosOriginUrl:22,getServerTime:23,getNosAccessToken:24,deleteNosAccessToken:25,getNosCdnHost:26,getGrayscaleConfig:27,getMixStorePolicy:28,getMixStoreToken:29,getBackSourceToken:30,uploadDetect:32},avSignal:{id:15,signalingCreate:1,signalingDelay:2,signalingClose:3,signalingJoin:4,signalingLeave:5,signalingInvite:6,signalingCancel:7,signalingReject:8,signalingAccept:9,signalingControl:10,signalingNotify:11,signalingMutilClientSyncNotify:12,signalingUnreadMessageSyncNotify:13,signalingChannelsSyncNotify:14,signalingGetChannelInfo:15,signalingCallEx:16,signalingJoinAndAccept:17}},n={heartbeat:{sid:e.link.id,cid:e.link.heartbeat},negotiateTransport:{sid:e.link.id,cid:e.link.negotiateTransport,params:[{type:"int",name:"sdkVersion"},{type:"Property",name:"negotiateTransportTag"}]},initTransport:{sid:e.link.id,cid:e.link.initTransport,params:[{type:"Property",name:"initTransportTag"}]},getGrayscaleConfig:{sid:e.misc.id,cid:e.misc.getGrayscaleConfig,params:[{type:"Property",name:"providers"}]},getMixStorePolicy:{sid:e.misc.id,cid:e.misc.getMixStorePolicy,params:[{type:"LongArray",name:"providers"}]},getMixStoreToken:{sid:e.misc.id,cid:e.misc.getMixStoreToken,params:[{type:"Property",name:"mixTokenReq"}]},getBackSourceToken:{sid:e.misc.id,cid:e.misc.getBackSourceToken,params:[{type:"Property",name:"mixAuthTokenReq"}]},uploadDetect:{sid:e.misc.id,cid:e.misc.uploadDetect,isAwaitable:!1,params:[{type:"Property",name:"notifyDetectTag"}]},getSimpleNosToken:{sid:e.misc.id,cid:e.misc.getSimpleNosToken,params:[{type:"int",name:"num"}]},getNosToken:{sid:e.misc.id,cid:e.misc.getNosToken,params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken"}]},uploadSdkLogUrl:{sid:e.misc.id,cid:e.misc.uploadSdkLogUrl,params:[{type:"string",name:"url"}]},audioToText:{sid:e.misc.id,cid:e.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:e.misc.id,cid:e.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]},getClientAntispam:{sid:e.misc.id,cid:e.misc.getClientAntispam,params:[{type:"Property",name:"clientAntispam"}]},fileQuickTransfer:{sid:e.misc.id,cid:e.misc.fileQuickTransfer,params:[{type:"Property",name:"fileQuickTransfer"}]},getNosOriginUrl:{sid:e.misc.id,cid:e.misc.getNosOriginUrl,params:[{type:"Property",name:"nosFileUrlTag"}]},getServerTime:{sid:e.misc.id,cid:e.misc.getServerTime,params:[]},getNosAccessToken:{sid:e.misc.id,cid:e.misc.getNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},deleteNosAccessToken:{sid:e.misc.id,cid:e.misc.deleteNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},getNosTokenTrans:{sid:e.misc.id,cid:e.misc.getNosTokenTrans,params:[{type:"Property",name:"transToken"}]},fetchFile:{sid:e.misc.id,cid:e.misc.fetchFile,params:[{type:"String",name:"docId"}]},fetchFileList:{sid:e.misc.id,cid:e.misc.fetchFileList,params:[{type:"Property",name:"fileListParam"}]},removeFile:{sid:e.misc.id,cid:e.misc.removeFile,params:[{type:"String",name:"docId"}]},getNosCdnHost:{sid:e.misc.id,cid:e.misc.getNosCdnHost,params:[]},signalingCreate:{sid:e.avSignal.id,cid:e.avSignal.signalingCreate,params:[{type:"Property",name:"avSignalTag"}]},signalingDelay:{sid:e.avSignal.id,cid:e.avSignal.signalingDelay,params:[{type:"Property",name:"avSignalTag"}]},signalingClose:{sid:e.avSignal.id,cid:e.avSignal.signalingClose,params:[{type:"Property",name:"avSignalTag"}]},signalingJoin:{sid:e.avSignal.id,cid:e.avSignal.signalingJoin,params:[{type:"Property",name:"avSignalTag"}]},signalingLeave:{sid:e.avSignal.id,cid:e.avSignal.signalingLeave,params:[{type:"Property",name:"avSignalTag"}]},signalingInvite:{sid:e.avSignal.id,cid:e.avSignal.signalingInvite,params:[{type:"Property",name:"avSignalTag"}]},signalingCancel:{sid:e.avSignal.id,cid:e.avSignal.signalingCancel,params:[{type:"Property",name:"avSignalTag"}]},signalingReject:{sid:e.avSignal.id,cid:e.avSignal.signalingReject,params:[{type:"Property",name:"avSignalTag"}]},signalingAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingAccept,params:[{type:"Property",name:"avSignalTag"}]},signalingControl:{sid:e.avSignal.id,cid:e.avSignal.signalingControl,params:[{type:"Property",name:"avSignalTag"}]},signalingGetChannelInfo:{sid:e.avSignal.id,cid:e.avSignal.signalingGetChannelInfo,params:[{type:"Property",name:"avSignalTag"}]},signalingCallEx:{sid:e.avSignal.id,cid:e.avSignal.signalingCallEx,params:[{type:"Property",name:"avSignalTag"}]},signalingJoinAndAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingJoinAndAccept,params:[{type:"Property",name:"avSignalTag"}]}};t.exports={idMap:e,cmdConfig:n,packetConfig:{"1_2":{service:"link",cmd:"heartbeat",response:[]},"1_5":{service:"link",cmd:"negotiateTransport",response:[{type:"Property",name:"negotiateTransportTag"}]},"1_6":{service:"link",cmd:"initTransport",response:[{type:"Property",name:"initTransportTag"}]},"6_1":{service:"misc",cmd:"getSimpleNosToken",response:[{type:"PropertyArray",name:"nosTokens",entity:"nosToken"}]},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_3":{service:"misc",cmd:"notifyUploadLog"},"6_4":{service:"misc",cmd:"uploadSdkLogUrl"},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]},"6_7":{service:"misc",cmd:"getNosTokenTrans",response:[{type:"Property",name:"nosToken"},{type:"String",name:"docId"}]},"6_8":{service:"misc",cmd:"notifyTransLog",response:[{type:"Property",name:"transInfo"}]},"6_9":{service:"misc",cmd:"fetchFile",response:[{type:"Property",name:"info",entity:"transInfo"}]},"6_10":{service:"misc",cmd:"fetchFileList",response:[{type:"PropertyArray",name:"list",entity:"transInfo"},{type:"Number",name:"totalCount"}]},"6_11":{service:"misc",cmd:"removeFile",response:[{type:"String",name:"res"}]},"6_17":{service:"misc",cmd:"getClientAntispam",response:[{type:"Property",name:"clientAntispam"}]},"6_18":{service:"misc",cmd:"fileQuickTransfer",response:[{type:"Property",name:"fileQuickTransfer"}]},"6_22":{service:"misc",cmd:"getNosOriginUrl",response:[{type:"Property",name:"nosFileUrlTag"}]},"6_23":{service:"misc",cmd:"getServerTime",response:[{type:"Number",name:"time"}]},"6_24":{service:"misc",cmd:"getNosAccessToken",response:[{type:"Property",name:"nosAccessTokenTag"}]},"6_25":{service:"misc",cmd:"deleteNosAccessToken"},"6_26":{service:"misc",cmd:"getNosCdnHost",response:[{type:"Property",name:"nosConfigTag"}]},"6_27":{service:"misc",cmd:"getGrayscaleConfig",response:[{type:"Property",name:"appGrayConfigTag"}]},"6_28":{service:"misc",cmd:"getMixStorePolicy",response:[{type:"Property",name:"mixStorePolicyTag"}]},"6_29":{service:"misc",cmd:"getMixStoreToken",response:[{type:"Property",name:"mixStoreTokenTag"}]},"6_30":{service:"misc",cmd:"getBackSourceToken",response:[{type:"Property",name:"backSourceTokenTag"}]},"6_31":{service:"link",cmd:"notifyDetect",response:[{type:"Property",name:"notifyDetectTag"}]},"6_32":{service:"link",cmd:"uploadDetect",response:[]},"15_1":{service:"avSignal",cmd:"signalingCreate",response:[{type:"Property",name:"avSignalTag"}]},"15_2":{service:"avSignal",cmd:"signalingDelay",response:[{type:"Property",name:"avSignalTag"}]},"15_3":{service:"avSignal",cmd:"signalingClose",response:[{type:"Property",name:"avSignalTag"}]},"15_4":{service:"avSignal",cmd:"signalingJoin",response:[{type:"Property",name:"avSignalTag"}]},"15_5":{service:"avSignal",cmd:"signalingLeave",response:[]},"15_6":{service:"avSignal",cmd:"signalingInvite",response:[]},"15_7":{service:"avSignal",cmd:"signalingCancel",response:[]},"15_8":{service:"avSignal",cmd:"signalingReject",response:[]},"15_9":{service:"avSignal",cmd:"signalingAccept",response:[]},"15_10":{service:"avSignal",cmd:"signalingControl",response:[]},"15_11":{service:"avSignal",cmd:"signalingNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_12":{service:"avSignal",cmd:"signalingMutilClientSyncNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_13":{service:"avSignal",cmd:"signalingUnreadMessageSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_14":{service:"avSignal",cmd:"signalingChannelsSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_15":{service:"avSignal",cmd:"signalingGetChannelInfo",response:[{type:"Property",name:"avSignalTag"}]},"15_16":{service:"avSignal",cmd:"signalingCallEx",response:[{type:"Property",name:"avSignalTag"}]},"15_17":{service:"avSignal",cmd:"signalingJoinAndAccept",response:[{type:"Property",name:"avSignalTag"}]}}}},function(t,r,e){var n=e(4),g=e(2),y=e(26),i=e(0),k=i.notundef,$=i.fillPropertyWithDefault,L=n,V={},z={},re=[],ie={},ue={normal:0,advanced:1},le={0:"normal",1:"advanced"},oe=L(ue),ae=V.joinMode={noVerify:0,needVerify:1,rejectAll:2};z.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},re.push("join"),ie.joinMode=L(ae);var Ue=V.beInviteMode={needVerify:0,noVerify:1};z.beInviteMode={0:"needVerify",1:"noVerify"},re.push("beInvite"),ie.beInviteMode=L(Ue);var de=V.inviteMode={manager:0,all:1};z.inviteMode={0:"manager",1:"all"},re.push("invite"),ie.inviteMode=L(de);var _e=V.updateTeamMode={manager:0,all:1};z.updateTeamMode={0:"manager",1:"all"},re.push("updateTeam"),ie.updateTeamMode=L(_e);var Ve=V.updateCustomMode={manager:0,all:1};function $e(jt){var Et;switch(i.verifyOptions(jt,"action","team::Team"),jt.action){case"create":i.verifyOptions(jt,"teamId",!1,"team::Team"),i.verifyOptions(jt,"type name","team::Team"),i.verifyParamValid("type",jt.type,oe,"team::Team"),k(jt.level)&&(i.verifyParamType("level",jt.level,"number","team::Team"),this.level=jt.level);break;case"update":i.verifyOptions(jt,"teamId","team::Team"),i.verifyOptions(jt,"type",!1,"team::Team")}k(jt.teamId)&&(this.teamId=jt.teamId),k(jt.type)&&(this.type=ue[jt.type]),k(jt.avatar)&&(this.avatar=""+jt.avatar),k(jt.name)&&(this.name=""+jt.name),k(jt.intro)&&(this.intro=""+jt.intro),k(jt.announcement)&&(this.announcement=""+jt.announcement),g(re).call(re,y(Et=this.setMode).call(Et,this,jt)),k(jt.custom)&&(this.custom=""+jt.custom)}function Lt(jt,Et){k(jt[Et+="Mode"])&&(jt[Et]=z[Et][jt[Et]])}z.updateCustomMode={0:"manager",1:"all"},re.push("updateCustom"),ie.updateCustomMode=L(Ve),$e.prototype.setMode=function(jt,Et){k(jt[Et+="Mode"])&&(i.verifyParamValid(Et,jt[Et],ie[Et],"team::Team"),this[Et]=V[Et][jt[Et]])},$e.reverse=function(jt,Et){var ir=i.copy(jt);if(k(ir.teamId)&&(ir.teamId=""+ir.teamId),k(ir.type)&&(ir.type=le[ir.type]),k(ir.level)&&(ir.level=+ir.level),k(ir.valid)&&(ir.valid=+ir.valid==1),k(ir.memberNum)&&(ir.memberNum=+ir.memberNum),k(ir.memberUpdateTime)&&(ir.memberUpdateTime=+ir.memberUpdateTime),k(ir.createTime)&&(ir.createTime=+ir.createTime),k(ir.updateTime)&&(ir.updateTime=+ir.updateTime),k(ir.validToCurrentUser)&&(ir.validToCurrentUser=ir.validToCurrentUser==="1"),k(ir.mute)&&(ir.mute=ir.mute==="1"),k(ir.muteType))switch(ir.muteType){case"0":ir.mute=!1,ir.muteType="none";break;case"1":ir.mute=!0,ir.muteType="normal";break;case"3":ir.mute=!0,ir.muteType="all"}else k(ir.mute)&&(ir.mute===1?(ir.mute=!0,ir.muteType="normal"):(ir.mute=!1,ir.muteType="none"));return g(re).call(re,y(Lt).call(Lt,null,ir)),delete ir.bits,Et||$e.fillProperties(ir),ir},$e.fillProperties=function(jt){var Et=$(jt,"beInviteMode","needVerify"),ir=$(jt,"inviteMode","manager"),ur=$(jt,"updateTeamMode","manager"),Dt=$(jt,"updateCustomMode","manager"),lr=$(jt,"avatar","");return Et||ir||ur||Dt||lr},t.exports=$e},function(t,r,e){var n=e(45).clientTypeMap;function g(){}g.reverse=function(y){var i=y;return i.type=n[i.type],i},g.reverseType=function(y){return n[y]||y},t.exports=g},function(t,r,e){var n=e(22),g=e(121),y=e(7),i=e(11),k=e(64);function $(){if(!navigator||!navigator.userAgent)return!1;var z=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return g(z).call(z,function(re){return navigator.userAgent.match(re)})}function L(){var z;return!(!navigator||!navigator.userAgent)&&(typeof navigator>"u"?"undefined":n(navigator))==="object"&&typeof navigator.userAgent=="string"&&y(z=navigator.userAgent).call(z,"Electron")>=0}function V(){return navigator&&navigator.userAgent}t.exports={getHostEnv:function(){return i.isBrowser?L()?"Electron":$()?"H5":V()?"BROWSER":"Unset":i.isRN?"RN":i.isWeixinApp?"Weixin":"Unset"},getHostEnvEnum:function(){return i.isBrowser?L()?5:$()?101:V()?100:0:i.isRN?2:i.isWeixinApp?6:0},getHostEnvVer:function(){if(!i.isBrowser)return"";if(!L())return k.version;try{return navigator.userAgent.match(/Electron\/([\d.]+\d+)/)[1]||k.version}catch{return k.version}},getLibEnv:function(){return"BROWSER"}}},function(t,r,e){var n=e(18),g=e(37),y=e(8),i=e(77),k=e(198),$=e(11),L=e(767),V=e(900),z=e(0),re=z.verifyOptions,ie=z.verifyParamType,ue=e(25).reportAPI,le=e(149).Chatroom,oe=e(156);function ae(de){var _e=oe(de);return this.subType="chatroom",this.nosScene=_e.nosScene||"chatroom",this.nosSurvivalTime=_e.nosSurvivalTime,_e.Protocol=k,_e.Message=V,_e.constructor=ae,_e.isAnonymous&&(_e.account=_e.account||"nimanon_".concat(z.guid()),_e.isAnonymous=1,z.verifyOptions(_e,"chatroomNick","api::Chatroom"),_e.chatroomAvatar=_e.chatroomAvatar||" "),this.init(_e)}ae.Protocol=k,ae.parser=le,ae.use=i.use,ae.getInstance=function(de){return de.isAnonymous&&(de.account=de.account||"nimanon_".concat(z.guid()),de.isAnonymous=1,z.verifyOptions(de,"chatroomNick","api::Chatroom.getInstance"),de.chatroomAvatar=de.chatroomAvatar||" "),i.getInstance.call(this,de)},ae.genInstanceName=function(de){return z.verifyOptions(de,"chatroomId","api::Chatroom.genInstanceName"),"Chatroom-account-"+de.account+"-chatroomId-"+de.chatroomId};var Ue=ae.fn=ae.prototype=n(i.prototype);ae.info=Ue.info=$.info,Ue.getChatroom=function(de){(de=de||{}).done=ue({instance:this,className:"ChatroomFn",funcName:"getChatroom",done:de.done}),this.processCallback(de),this.sendCmd("getChatroom",de)},Ue.updateChatroom=function(de){(de=de||{}).done=ue({instance:this,className:"ChatroomFn",funcName:"updateChatroom",done:de.done}),re(de,"chatroom needNotify","api::updateChatroom"),ie("needNotify",de.needNotify,"boolean"),this.processCustom(de),this.processCallback(de),de.chatroom=new L(de.chatroom),de.antispamTag={antiSpamBusinessId:de.antiSpamBusinessId},this.sendCmd("updateChatroom",de)},Ue.closeChatroom=function(de){(de=de||{}).done=ue({instance:this,className:"ChatroomFn",funcName:"closeChatroom",done:de.done}),this.processCustom(de),this.processCallback(de),this.sendCmd("closeChatroom",de)},Ue.updateTags=function(de){(de=de||{}).done=ue({instance:this,className:"ChatroomFn",funcName:"updateTags",done:de.done}),z.validate({tags:{type:"array",required:!1},notifyTargetTags:{type:"string",allowEmpty:!0,required:!1},needNotify:{type:"boolean",required:!1}},de,"chatroom::updateTags");var _e=g({},de);this.processCallback(_e),_e.tags&&(_e.tags=y(_e.tags)),_e.needNotify&&(_e.needNotify=_e.needNotify?1:0),this.sendCmd("updateChatroomTags",{chatRoomTagsUpdateTag:_e},_e.done)},t.exports=ae,e(910),e(911),e(912),e(913)},function(t,r,e){var n=e(18),g=e(26),y=e(9),i=e(10),k=e(78),$=e(0),L=$.undef,V=$.notundef,z=e(291),re=e(11),ie=e(149),ue=e(767),le=e(312);function oe(de){var _e,Ve,$e;$.verifyOptions(de,"appKey account chatroomId chatroomAddresses","protocol::ChatroomProtocol"),de.isAnonymous||$.verifyOptions(de,"token","protocol::ChatroomProtocol"),$.verifyParamType("chatroomAddresses",de.chatroomAddresses,"array","protocol::ChatroomProtocol"),$.verifyCallback(de,"onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots","protocol::ChatroomProtocol"),_e=typeof $.get(de,"privateConf.isDataReportEnable")=="boolean"?de.privateConf.isDataReportEnable:re.privateConf.isDataReportEnable,Ve=typeof $.get(de,"privateConf.reportConfigUrl")=="string"?de.privateConf.reportConfigUrl:re.privateConf.reportConfigUrl,$e=typeof $.get(de,"privateConf.reportUrl")=="string"?de.privateConf.reportUrl:re.privateConf.reportUrl,this.reporter=z.initReporter({isDataReportEnable:_e,reportConfigUrl:Ve,reportUrl:$e,appKey:de.appKey,logger:this.logger}),k.call(this,de)}var ae=k.fn,Ue=oe.fn=oe.prototype=n(ae);Ue.init=function(){var de;ae.init.call(this),ie.Chatroom.setProtocol(this),this.parser=ie.Chatroom,g(de=this.sendCmd).call(de,this),this.syncResult={},this.timetags={},this.msgBuffer=[]},Ue.reset=function(){var de=this;ae.reset.call(de);var _e,Ve=de.options;de.autoconnect=!!Ve.autoconnect,L(Ve.msgBufferInterval)&&(Ve.msgBufferInterval=300),$.verifyParamType("msgBufferInterval",Ve.msgBufferInterval,"number","protocol::ChatroomProtocol.reset"),L(Ve.msgBufferSize)&&(Ve.msgBufferSize=500),$.verifyParamType("msgBufferSize",Ve.msgBufferSize,"number","protocol::ChatroomProtocol.reset"),V(Ve.chatroomAddresses)&&(de.socketUrlsBackup=y(_e=Ve.chatroomAddresses).call(_e,function($e){return re.formatSocketUrl({url:$e,secure:de.options.secure})}))},Ue.processChatroom=function(de){switch(de.cmd){case"login":de.error||(de.obj={chatroom:i(ue).call(ue,de.content.chatroom),member:i(le).call(le,de.content.chatroomMember)},this.cdnInfo={},this.initCdnData(),clearTimeout(this.queryCdnTimer),this.onCdnMsgInfo(de.content.chatroomCdnInfo));break;case"kicked":this.onKicked(de);break;case"logout":break;case"sendMsg":this.onSendMsg(de);break;case"msg":this.onMsg(de),this.cdnInfo&&this.cdnInfo.enable&&this.correctCdnTime(+de.content.msg.time);break;case"getChatroomMembers":case"getChatroomMembersByTag":this.onChatroomMembers(de);break;case"getChatroomMemberCountByTag":this.onGetChatroomMemberCountByTag(de);break;case"getHistoryMsgs":case"getHistoryMsgsByTags":this.onHistoryMsgs(de);break;case"markChatroomMember":this.onMarkChatroomMember(de);break;case"closeChatroom":break;case"getChatroom":this.onChatroom(de);break;case"updateChatroom":break;case"updateMyChatroomMemberInfo":delete de.obj.chatroomMember;break;case"getChatroomMembersInfo":this.onChatroomMembersInfo(de);break;case"kickChatroomMember":case"updateChatroomMemberTempMute":break;case"queueList":de.error||(de.obj=de.content);break;case"syncRobot":this.onSyncRobot(de);break;case"notifyCdnInfo":this.onCdnMsgInfo(de.content&&de.content.chatroomCdnInfo);break;case"updateChatroomTag":this.onTagsUpdate(de.content)}},Ue.onChatroom=function(de){de.error||(de.obj.chatroom=i(ue).call(ue,de.content.chatroom))},Ue.onTagsUpdate=function(de){if(this.logger.info("onTagsUpdate:: ",de),this.options.onTagsUpdate&&typeof this.options.onTagsUpdate=="function"){var _e=de.updateTags&&de.updateTags.currentTags;try{_e=JSON.parse(_e)}catch(Ve){this.logger.error("onTagsUpdate:: parse tags failed",Ve)}this.options.onTagsUpdate(_e)}},t.exports=oe,e(888),e(889),e(890),e(899)},function(t,r){t.exports=function(){}},function(t,r){t.exports=function(e,n){for(var g=n.split(".");g.length;){var y=g.shift(),i=!1;if(y[y.length-1]=="?"&&(y=y.slice(0,-1),i=!0),!(e=e[y])&&i)return e}return e}},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(257),g=e(265);t.exports=function(y){return y!=null&&g(y.length)&&!n(y)}},function(t,r,e){var n=e(9),g=e(10),y=e(0),i=y.notundef,k=y.fillPropertyWithDefault,$={0:"normal",1:"owner",2:"manager"};function L(V){y.verifyOptions(V,"teamId","superTeam::TeamMember"),y.verifyParamAtLeastPresentOne(V,"nickInTeam muteTeam custom muteNotiType","superTeam::SuperTeamMember"),this.teamId=V.teamId,i(V.account)&&(this.account=V.account),i(V.nickInTeam)&&(this.nickInTeam=V.nickInTeam),i(V.muteNotiType)?this.bits=V.muteNotiType:i(V.muteTeam)&&(this.bits=0,V.muteTeam&&(this.bits+=1)),i(V.mute)&&(this.mute=V.mute?1:0),i(V.custom)&&(this.custom=""+V.custom)}L.reverse=function(V){var z=y.copy(V);if(i(z.teamId)&&(z.teamId=""+z.teamId),i(z.type)&&(z.type=$[z.type]),i(z.active)&&(z.active=+z.active==1),i(z.valid)&&(z.valid=+z.valid==1),i(z.mute)&&(z.mute=+z.mute==1),i(z.joinTime)&&(z.joinTime=+z.joinTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),i(z.bits)){var re=z.bits;delete z.bits,z.muteTeam=!!(1&re),z.muteNotiType=re}return i(z.teamId)&&i(z.account)&&(z.id=L.genId(z.teamId,z.account)),i(z.followAccountIds)&&(z.followAccountIds=JSON.parse(z.followAccountIds)),z},L.reverseMembers=function(V){return n(V).call(V,function(z){return g(L).call(L,z)})},L.fillProperties=function(V){var z=k(V,"mute",!1),re=k(V,"custom","");return z||re},L.genId=function(V,z){return V+"-"+z},L.accounts2ids=function(V,z){return n(z).call(z,function(re){return L.genId(V,re)})},L.assembleMembers=function(V,z){return y.isArray(z)||(z=[z]),n(z).call(z,function(re){return L.assembleMember(V,re)})},L.assembleMember=function(V,z){return{id:L.genId(V.teamId,z),account:z,teamId:V.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:V.memberUpdateTime,updateTime:V.memberUpdateTime,active:!0,valid:!0,followAccountIds:[]}},L.assembleOwner=function(V){var z=L.assembleMember(V,V.owner);return z.type="owner",z},t.exports=L},function(t,r,e){var n=e(9),g=e(10),y=e(4),i=e(108).genPrivateUrl,k=e(0),$={unknown:0,male:1,female:2},L={0:"unknown",1:"male",2:"female"};function V(z){k.merge(this,z),k.notundef(this.gender)&&(k.verifyParamValid("gender",this.gender,V.validGenders,"user::User"),this.gender=$[this.gender]),k.notundef(this.email)&&this.email!==""&&k.verifyEmail("email",this.email,"user::User"),k.notundef(this.birth)&&this.birth!==""&&k.verifyBirth("birth",this.birth,"user::User"),k.notundef(this.tel)&&this.tel!==""&&k.verifyTel("tel",this.tel,"user::User")}V.reverse=function(z,re,ie){var ue=k.filterObj(z,"account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");return k.notundef(ue.avatar)&&(ue.avatar=i(ue.avatar,re,ie)),k.notundef(ue.gender)&&(ue.gender=L[ue.gender]),k.notundef(ue.createTime)&&(ue.createTime=+ue.createTime),k.notundef(ue.updateTime)&&(ue.updateTime=+ue.updateTime),ue},V.reverseUsers=function(z){return n(z).call(z,function(re){return g(V).call(V,re)})},V.validGenders=y($),t.exports=V},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(7),k=e(108).genPrivateUrl,$=e(76),L=e(0),V=e(11);function z(le,oe){switch(L.notundef(le.type)?L.verifyFileType(le.type,"msg::FileMessage"):le.type="file",L.verifyOptions(le,"file","msg::FileMessage"),L.verifyOptions(le.file,"url ext size",!0,"file.","msg::FileMessage"),le.type){case"image":re.verifyFile(le.file,"msg::FileMessage");break;case"audio":ie.verifyFile(le.file,"msg::FileMessage");break;case"video":ue.verifyFile(le.file,"msg::FileMessage")}$.call(this,le),oe&&(this.idClient=oe),this.attach=n(le.file)}z.prototype=g($.prototype),z.reverse=function(le){var oe=y($).call($,le);if(le.attach=le.attach?""+le.attach:"",le.attach&&(oe.file=JSON.parse(le.attach),!oe.file.isS3)){var ae,Ue;oe.file.url=k(oe.file.url)||"",oe.type==="audio"&&oe.file.url&&!oe.file.mp3Url&&(oe.file.mp3Url=oe.file.url+(~i(Ue=oe.file.url).call(Ue,"?")?"&":"?")+"audioTrans&type=mp3"),V.httpsEnabled&&i(ae=oe.file.url).call(ae,"https://")!==0&&(oe.file.url=oe.file.url.replace("http","https"))}return oe},t.exports=z;var re=e(836),ie=e(837),ue=e(838)},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(7),k=e(108).genPrivateUrl,$=e(119),L=e(0),V=e(11);function z(le,oe){switch(L.notundef(le.type)?L.verifyFileType(le.type,"msg::FileMessage"):le.type="file",L.verifyOptions(le,"file","msg::FileMessage"),L.verifyOptions(le.file,"url ext size",!0,"file.","msg::FileMessage"),le.type){case"image":re.verifyFile(le.file,"msg::FileMessage");break;case"audio":ie.verifyFile(le.file,"msg::FileMessage");break;case"video":ue.verifyFile(le.file,"msg::FileMessage")}$.call(this,le),oe&&(this.idClient=oe),this.attach=n(le.file)}z.prototype=g($.prototype),z.reverse=function(le){var oe=y($).call($,le);if(le.attach=le.attach?""+le.attach:"",le.attach&&(oe.file=JSON.parse(le.attach),!oe.file.isS3)){var ae,Ue;oe.file.url=k(oe.file.url)||"",oe.type==="audio"&&oe.file.url&&!oe.file.mp3Url&&(oe.file.mp3Url=oe.file.url+(~i(Ue=oe.file.url).call(Ue,"?")?"&":"?")+"audioTrans&type=mp3"),V.httpsEnabled&&i(ae=oe.file.url).call(ae,"https://")!==0&&(oe.file.url=oe.file.url.replace("http","https"))}return oe},t.exports=z;var re=e(902),ie=e(903),ue=e(904)},function(t,r,e){var n=e(315);t.exports=n},function(t,r){var e=typeof document=="object"&&document.all,n=e===void 0&&e!==void 0;t.exports={all:e,IS_HTMLDDA:n}},function(t,r,e){var n=e(97);t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(t,r,e){var n=e(27),g=e(5),y=e(162);t.exports=!n&&!g(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},function(t,r,e){var n=e(5),g=e(17),y=/#|\.prototype\./,i=function(z,re){var ie=$[k(z)];return ie==V||ie!=L&&(g(re)?n(re):!!re)},k=i.normalize=function(z){return String(z).replace(y,".").toLowerCase()},$=i.data={},L=i.NATIVE="N",V=i.POLYFILL="P";t.exports=i},function(t,r,e){var n=e(27),g=e(5);t.exports=n&&g(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(t,r,e){var n=e(1),g=e(5),y=e(83),i=e(28),k=e(42),$=e(46),L=e(214),V=e(99),z=e(164),re=e(113),ie=e(21),ue=e(98),le=ie("isConcatSpreadable"),oe=ue>=51||!g(function(){var de=[];return de[le]=!1,de.concat()[0]!==de}),ae=re("concat"),Ue=function(de){if(!i(de))return!1;var _e=de[le];return _e!==void 0?!!_e:y(de)};n({target:"Array",proto:!0,arity:1,forced:!oe||!ae},{concat:function(de){var _e,Ve,$e,Lt,jt,Et=k(this),ir=z(Et,0),ur=0;for(_e=-1,$e=arguments.length;_e<$e;_e++)if(Ue(jt=_e===-1?Et:arguments[_e]))for(Lt=$(jt),L(ur+Lt),Ve=0;Ve<Lt;Ve++,ur++)Ve in jt&&V(ir,ur,jt[Ve]);else L(ur+1),V(ir,ur++,jt);return ir.length=ur,ir}})},function(t,r){var e=TypeError;t.exports=function(n){if(n>9007199254740991)throw e("Maximum allowed index exceeded");return n}},function(t,r,e){var n=e(12),g=e(17),y=e(161),i=n(Function.toString);g(y.inspectSource)||(y.inspectSource=function(k){return i(k)}),t.exports=y.inspectSource},function(t,r,e){var n=e(327);t.exports=n},function(t,r,e){var n=e(12),g=e(30),y=e(44),i=e(163).indexOf,k=e(114),$=n([].push);t.exports=function(L,V){var z,re=y(L),ie=0,ue=[];for(z in re)!g(k,z)&&g(re,z)&&$(ue,z);for(;V.length>ie;)g(re,z=V[ie++])&&(~i(ue,z)||$(ue,z));return ue}},function(t,r,e){var n=e(33);t.exports=n("document","documentElement")},function(t,r,e){var n=e(332);e(69),t.exports=n},function(t,r,e){e(333),e(336),e(337),e(224),e(338)},function(t,r,e){var n=e(131),g=e(46),y=e(99),i=Array,k=Math.max;t.exports=function($,L,V){for(var z=g($),re=n(L,z),ie=n(V===void 0?z:V,z),ue=i(k(ie-re,0)),le=0;re<ie;re++,le++)y(ue,le,$[re]);return ue.length=le,ue}},function(t,r,e){var n=e(20),g=e(33),y=e(21),i=e(68);t.exports=function(){var k=g("Symbol"),$=k&&k.prototype,L=$&&$.valueOf,V=y("toPrimitive");$&&!$[V]&&i($,V,function(z){return n(L,this)},{arity:1})}},function(t,r,e){var n=e(97);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},function(t,r,e){var n=e(1),g=e(33),y=e(79),i=e(20),k=e(12),$=e(5),L=e(83),V=e(17),z=e(28),re=e(129),ie=e(102),ue=e(97),le=g("JSON","stringify"),oe=k(/./.exec),ae=k("".charAt),Ue=k("".charCodeAt),de=k("".replace),_e=k(1 .toString),Ve=/[\uD800-\uDFFF]/g,$e=/^[\uD800-\uDBFF]$/,Lt=/^[\uDC00-\uDFFF]$/,jt=!ue||$(function(){var Dt=g("Symbol")();return le([Dt])!="[null]"||le({a:Dt})!="{}"||le(Object(Dt))!="{}"}),Et=$(function(){return le("\uDF06\uD834")!=='"\\udf06\\ud834"'||le("\uDEAD")!=='"\\udead"'}),ir=function(Dt,lr){var sr=ie(arguments),er=lr;if((z(lr)||Dt!==void 0)&&!re(Dt))return L(lr)||(lr=function(cr,or){if(V(er)&&(or=i(er,this,cr,or)),!re(or))return or}),sr[1]=lr,y(le,null,sr)},ur=function(Dt,lr,sr){var er=ae(sr,lr-1),cr=ae(sr,lr+1);return oe($e,Dt)&&!oe(Lt,cr)||oe(Lt,Dt)&&!oe($e,er)?"\\u"+_e(Ue(Dt,0),16):Dt};le&&n({target:"JSON",stat:!0,arity:3,forced:jt||Et},{stringify:function(Dt,lr,sr){var er=ie(arguments),cr=y(jt?ir:le,null,er);return Et&&typeof cr=="string"?de(cr,Ve,ur):cr}})},function(t,r,e){e(23)("iterator")},function(t,r,e){var n=e(23),g=e(222);n("toPrimitive"),g()},function(t,r,e){var n=e(27),g=e(30),y=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,k=g(y,"name"),$=k&&(function(){}).name==="something",L=k&&(!n||n&&i(y,"name").configurable);t.exports={EXISTS:k,PROPER:$,CONFIGURABLE:L}},function(t,r,e){var n,g,y,i=e(5),k=e(17),$=e(28),L=e(84),V=e(137),z=e(68),re=e(21),ie=e(49),ue=re("iterator"),le=!1;[].keys&&("next"in(y=[].keys())?(g=V(V(y)))!==Object.prototype&&(n=g):le=!0),!$(n)||i(function(){var oe={};return n[ue].call(oe)!==oe})?n={}:ie&&(n=L(n)),k(n[ue])||z(n,ue,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:le}},function(t,r,e){var n=e(5);t.exports=!n(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},function(t,r,e){e(69);var n=e(67),g=e(30),y=e(19),i=e(374),k=Array.prototype,$={DOMTokenList:!0,NodeList:!0};t.exports=function(L){var V=L.forEach;return L===k||y(k,L)&&V===k.forEach||g($,n(L))?i:V}},function(t,r,e){var n=e(382);t.exports=n},function(t,r,e){var n=e(386);e(69),t.exports=n},function(t,r,e){e(387)},function(t,r,e){var n=e(33),g=e(12),y=e(134),i=e(135),k=e(36),$=g([].concat);t.exports=n("Reflect","ownKeys")||function(L){var V=y.f(k(L)),z=i.f;return z?$(V,z(L)):V}},function(t,r,e){var n=e(21),g=e(103),y=n("iterator"),i=Array.prototype;t.exports=function(k){return k!==void 0&&(g.Array===k||i[y]===k)}},function(t,r,e){var n=e(20),g=e(31),y=e(36),i=e(81),k=e(139),$=TypeError;t.exports=function(L,V){var z=arguments.length<2?k(L):V;if(g(z))return y(n(z,L));throw $(i(L)+" is not iterable")}},function(t,r,e){var n=e(20),g=e(36),y=e(160);t.exports=function(i,k,$){var L,V;g(i);try{if(!(L=y(i,"return"))){if(k==="throw")throw $;return $}L=n(L,i)}catch(z){V=!0,L=z}if(k==="throw")throw $;if(V)throw L;return g(L),$}},function(t,r,e){var n=e(33),g=e(39),y=e(21),i=e(27),k=y("species");t.exports=function($){var L=n($),V=g.f;i&&L&&!L[k]&&V(L,k,{configurable:!0,get:function(){return this}})}},function(t,r,e){var n=e(36),g=e(172),y=e(96),i=e(21)("species");t.exports=function(k,$){var L,V=n(k).constructor;return V===void 0||y(L=n(V)[i])?$:g(L)}},function(t,r,e){var n,g,y,i,k=e(14),$=e(79),L=e(34),V=e(17),z=e(30),re=e(5),ie=e(218),ue=e(102),le=e(162),oe=e(241),ae=e(242),Ue=e(116),de=k.setImmediate,_e=k.clearImmediate,Ve=k.process,$e=k.Dispatch,Lt=k.Function,jt=k.MessageChannel,Et=k.String,ir=0,ur={};try{n=k.location}catch{}var Dt=function(cr){if(z(ur,cr)){var or=ur[cr];delete ur[cr],or()}},lr=function(cr){return function(){Dt(cr)}},sr=function(cr){Dt(cr.data)},er=function(cr){k.postMessage(Et(cr),n.protocol+"//"+n.host)};de&&_e||(de=function(cr){oe(arguments.length,1);var or=V(cr)?cr:Lt(cr),hr=ue(arguments,1);return ur[++ir]=function(){$(or,void 0,hr)},g(ir),ir},_e=function(cr){delete ur[cr]},Ue?g=function(cr){Ve.nextTick(lr(cr))}:$e&&$e.now?g=function(cr){$e.now(lr(cr))}:jt&&!ae?(i=(y=new jt).port2,y.port1.onmessage=sr,g=L(i.postMessage,i)):k.addEventListener&&V(k.postMessage)&&!k.importScripts&&n&&n.protocol!=="file:"&&!re(er)?(g=er,k.addEventListener("message",sr,!1)):g="onreadystatechange"in le("script")?function(cr){ie.appendChild(le("script")).onreadystatechange=function(){ie.removeChild(this),Dt(cr)}}:function(cr){setTimeout(lr(cr),0)}),t.exports={set:de,clear:_e}},function(t,r){var e=TypeError;t.exports=function(n,g){if(n<g)throw e("Not enough arguments");return n}},function(t,r,e){var n=e(66);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(t,r){t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},function(t,r,e){var n=e(105),g=e(245),y=e(117).CONSTRUCTOR;t.exports=y||!g(function(i){n.all(i).then(void 0,function(){})})},function(t,r,e){var n=e(21)("iterator"),g=!1;try{var y=0,i={next:function(){return{done:!!y++}},return:function(){g=!0}};i[n]=function(){return this},Array.from(i,function(){throw 2})}catch{}t.exports=function(k,$){if(!$&&!g)return!1;var L=!1;try{var V={};V[n]=function(){return{next:function(){return{done:L=!0}}}},k(V)}catch{}return L}},function(t,r,e){var n=e(36),g=e(28),y=e(70);t.exports=function(i,k){if(n(i),g(k)&&k.constructor===i)return k;var $=y.f(i);return(0,$.resolve)(k),$.promise}},function(t,r,e){var n=e(1),g=e(20),y=e(31),i=e(70),k=e(104),$=e(47);n({target:"Promise",stat:!0},{allSettled:function(L){var V=this,z=i.f(V),re=z.resolve,ie=z.reject,ue=k(function(){var le=y(V.resolve),oe=[],ae=0,Ue=1;$(L,function(de){var _e=ae++,Ve=!1;Ue++,g(le,V,de).then(function($e){Ve||(Ve=!0,oe[_e]={status:"fulfilled",value:$e},--Ue||re(oe))},function($e){Ve||(Ve=!0,oe[_e]={status:"rejected",reason:$e},--Ue||re(oe))})}),--Ue||re(oe)});return ue.error&&ie(ue.value),z.promise}})},function(t,r,e){var n=e(1),g=e(20),y=e(31),i=e(33),k=e(70),$=e(104),L=e(47);n({target:"Promise",stat:!0},{any:function(V){var z=this,re=i("AggregateError"),ie=k.f(z),ue=ie.resolve,le=ie.reject,oe=$(function(){var ae=y(z.resolve),Ue=[],de=0,_e=1,Ve=!1;L(V,function($e){var Lt=de++,jt=!1;_e++,g(ae,z,$e).then(function(Et){jt||Ve||(Ve=!0,ue(Et))},function(Et){jt||Ve||(jt=!0,Ue[Lt]=Et,--_e||le(new re(Ue,"No one promise resolved")))})}),--_e||le(new re(Ue,"No one promise resolved"))});return oe.error&&le(oe.value),ie.promise}})},function(t,r,e){var n=e(410);t.exports=n},function(t,r,e){var n=e(22).default,g=e(412);t.exports=function(y){var i=g(y,"string");return n(i)==="symbol"?i:String(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(420);t.exports=n},function(t,r,e){var n=e(81),g=TypeError;t.exports=function(y,i){if(!delete y[i])throw g("Cannot delete property "+n(i)+" of "+n(y))}},function(t,r,e){e(455),e(457)},function(t,r,e){var n,g=e(14),y=e(79),i=e(17),k=e(456),$=e(66),L=e(102),V=e(241),z=g.Function,re=/MSIE .\./.test($)||k&&((n=g.Bun.version.split(".")).length<3||n[0]==0&&(n[1]<3||n[1]==3&&n[2]==0));t.exports=function(ie,ue){var le=ue?2:1;return re?function(oe,ae){var Ue=V(arguments.length,1)>le,de=i(oe)?oe:z(oe),_e=Ue?L(arguments,le):[],Ve=Ue?function(){y(de,this,_e)}:de;return ue?ie(Ve,ae):ie(Ve)}:ie}},function(t,r,e){var n=e(480);t.exports=n},function(t,r){t.exports=function e(n,g){var y,i,k=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,$=/(^[ ]*|[ ]*$)/g,L=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,V=/^0x[0-9a-f]+$/i,z=/^0/,re=function(Ve){return e.insensitive&&(""+Ve).toLowerCase()||""+Ve},ie=re(n).replace($,"")||"",ue=re(g).replace($,"")||"",le=ie.replace(k,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),oe=ue.replace(k,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),ae=parseInt(ie.match(V),16)||le.length!==1&&ie.match(L)&&Date.parse(ie),Ue=parseInt(ue.match(V),16)||ae&&ue.match(L)&&Date.parse(ue)||null;if(Ue){if(ae<Ue)return-1;if(ae>Ue)return 1}for(var de=0,_e=Math.max(le.length,oe.length);de<_e;de++){if(y=!(le[de]||"").match(z)&&parseFloat(le[de])||le[de]||0,i=!(oe[de]||"").match(z)&&parseFloat(oe[de])||oe[de]||0,isNaN(y)!==isNaN(i))return isNaN(y)?1:-1;if(typeof y!=typeof i&&(y+="",i+=""),y<i)return-1;if(y>i)return 1}return 0}},function(t,r,e){var n=e(124),g=e(91);t.exports=function(y){if(!g(y))return!1;var i=n(y);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"}},function(t,r,e){(function(n){var g=typeof n=="object"&&n&&n.Object===Object&&n;t.exports=g}).call(this,e(73))},function(t,r){var e=Function.prototype.toString;t.exports=function(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}},function(t,r,e){var n=e(509),g=e(516),y=e(518),i=e(519),k=e(520);function $(L){var V=-1,z=L==null?0:L.length;for(this.clear();++V<z;){var re=L[V];this.set(re[0],re[1])}}$.prototype.clear=n,$.prototype.delete=g,$.prototype.get=y,$.prototype.has=i,$.prototype.set=k,t.exports=$},function(t,r,e){var n=e(262),g=e(201),y=Object.prototype.hasOwnProperty;t.exports=function(i,k,$){var L=i[k];y.call(i,k)&&g(L,$)&&($!==void 0||k in i)||n(i,k,$)}},function(t,r,e){var n=e(522);t.exports=function(g,y,i){y=="__proto__"&&n?n(g,y,{configurable:!0,enumerable:!0,value:i,writable:!0}):g[y]=i}},function(t,r,e){var n=e(524),g=e(525),y=e(177),i=e(264),k=e(302),$=e(528),L=Object.prototype.hasOwnProperty;t.exports=function(V,z){var re=y(V),ie=!re&&g(V),ue=!re&&!ie&&i(V),le=!re&&!ie&&!ue&&$(V),oe=re||ie||ue||le,ae=oe?n(V.length,String):[],Ue=ae.length;for(var de in V)!z&&!L.call(V,de)||oe&&(de=="length"||ue&&(de=="offset"||de=="parent")||le&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||k(de,Ue))||ae.push(de);return ae}},function(t,r,e){(function(n){var g=e(56),y=e(527),i=r&&!r.nodeType&&r,k=i&&typeof n=="object"&&n&&!n.nodeType&&n,$=k&&k.exports===i?g.Buffer:void 0,L=($?$.isBuffer:void 0)||y;n.exports=L}).call(this,e(147)(t))},function(t,r){t.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(t,r){t.exports=function(e,n){return function(g){return e(n(g))}}},function(t,r){t.exports=function(){return[]}},function(t,r,e){var n=e(269),g=e(270),y=e(182),i=e(267),k=Object.getOwnPropertySymbols?function($){for(var L=[];$;)n(L,y($)),$=g($);return L}:i;t.exports=k},function(t,r){t.exports=function(e,n){for(var g=-1,y=n.length,i=e.length;++g<y;)e[i+g]=n[g];return e}},function(t,r,e){var n=e(266)(Object.getPrototypeOf,Object);t.exports=n},function(t,r,e){var n=e(269),g=e(177);t.exports=function(y,i,k){var $=i(y);return g(y)?$:n($,k(y))}},function(t,r,e){var n=e(87)(e(56),"Set");t.exports=n},function(t,r,e){var n=e(571);t.exports=n},function(t,r,e){var n=e(12),g=e(31),y=e(28),i=e(30),k=e(102),$=e(109),L=Function,V=n([].concat),z=n([].join),re={},ie=function(ue,le,oe){if(!i(re,le)){for(var ae=[],Ue=0;Ue<le;Ue++)ae[Ue]="a["+Ue+"]";re[le]=L("C,a","return new C("+z(ae,",")+")")}return re[le](ue,oe)};t.exports=$?L.bind:function(ue){var le=g(this),oe=le.prototype,ae=k(arguments,1),Ue=function(){var de=V(ae,k(arguments));return this instanceof Ue?ie(le,de.length,de):le.apply(ue,de)};return y(oe)&&(Ue.prototype=oe),Ue}},function(t,r,e){var n=e(90),g=e(7),y=e(71),i=e(126),k=e(8),$=e(62),L=$.getGlobal(),V={},z=L.name||"_parent",re=[],ie=[];V.addMsgListener=function($e){re.push($e)};var ue,le,oe,ae,Ue=(ue=/^([\w]+?:\/\/.*?(?=\/|$))/i,function($e){return $e=$e||"",ue.test($e)?RegExp.$1:"*"}),de=function(){var $e,Lt,jt=n($e=unescape(L.name||"")).call($e);if(jt&&g(jt).call(jt,"MSG|")===0){L.name="";var Et=$.string2object(jt.replace("MSG|",""),"|"),ir=(Et.origin||"").toLowerCase();ir&&ir!=="*"&&g(Lt=location.href.toLowerCase()).call(Lt,ir)!==0||function(ur){for(var Dt=0,lr=re.length;Dt<lr;Dt++)try{re[Dt].call(null,ur)}catch{}}({data:JSON.parse(Et.data||"null"),source:L.frames[Et.self]||Et.self,origin:Ue(Et.ref||(typeof document>"u"?"":document.referrer))})}},_e=(oe=function($e,Lt){for(var jt=0,Et=$e.length;jt<Et;jt++)if($e[jt]===Lt)return!0;return!1},function(){if(ie.length){le=[];for(var $e,Lt=ie.length-1;Lt>=0;Lt--)$e=ie[Lt],oe(le,$e.w)||(le.push($e.w),y(ie).call(ie,Lt,1),$e.w.name=$e.d);le=null}}),Ve=V.startTimer=(ae=!1,function(){ae||(ae=!0,L.postMessage||(i(_e,100),i(de,20)))});V.postMessage=function($e){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($.fillUndef(Lt,{origin:"*",source:z}),L.postMessage){var jt=Lt.data;L.FormData||(jt=k(jt)),$e.postMessage(jt,Lt.origin)}else{if(Ve(),$.isObject(Lt)){var Et={};Et.origin=Lt.origin||"",Et.ref=location.href,Et.self=Lt.source,Et.data=k(Lt.data),Lt="MSG|"+$.object2string(Et,"|",!0)}ie.unshift({w:$e,d:escape(Lt)})}},t.exports=V},function(t,r,e){var n=e(593);t.exports=n},function(t,r,e){var n=e(0),g={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},y={genResponseBody:function(i){return g[i=i||"file"]},parseResponse:function(i,k){n.notundef(i.size)&&(i.size=+i.size),n.notundef(i.w)&&(i.w=+i.w),n.notundef(i.h)&&(i.h=+i.h),n.notundef(i.dur)&&(i.dur=+i.dur);var $=i.orientation;if(n.notundef($)&&(delete i.orientation,k&&($==="right, top"||$==="left, bottom"))){var L=i.w;i.w=i.h,i.h=L}return i}};t.exports=y},function(t,r,e){var n=e(125),g=e(15),y=e(7),i=e(60),k=e(48),$=e(24),L=["Code","code","Message","message"],V=e(11),z=e(0),re=e(41),ie=e(609),ue=e(610),le=e(107),oe=le.EMResourceUploadWay,ae=le.EMExceptionState,Ue=e(186).abort,de=z.supportFormData;function _e($e,Lt){var jt=this,Et=$e.uploadprogress,ir=$e.uploaddone,ur=$e.beginupload;return{beginupload:typeof ur=="function"?function(Dt){try{ur(Dt,Lt)}catch(lr){jt.logger.error("Upload::options.beginupload execute error",lr)}}:function(){},uploadprogress:typeof Et=="function"?function(Dt){jt.reporterHook.emit("reporter/uploadUpdate",{transferred_size:Dt.loaded});try{Et(Dt,Lt)}catch(lr){jt.logger.error("Upload::options.uploadprogress execute error",lr)}}:function(Dt){jt.reporterHook.emit("reporter/uploadUpdate",{transferred_size:Dt.loaded})},uploaddone:function(Dt,lr){Dt?jt.reporterHook.emit("reporter/uploadEnd",Dt.code==="RequestAbortedError"||Dt.code==="abort"?ae.kCanceled:ae.kFailed):jt.reporterHook.emit("reporter/uploadEnd",ae.kSucceed);try{ir(Dt,lr,null,Lt)}catch(sr){jt.logger.error("Upload::options.uploaddone execute error",sr)}}}}function Ve($e,Lt,jt){var Et=this;Et.options=z.copy($e),$e=Et.options,z.verifyOptions($e,"url fileName"),z.verifyParamPresentJustOne($e,"blob fileInput"),z.verifyCallback($e,"beginupload uploadprogress uploaddone"),Et.reporterHook=Lt.reporterHook,Et.logger=Lt.logger,Et.message=jt;var ir=_e.call(this,$e,jt),ur=ir.beginupload,Dt=ir.uploadprogress,lr=ir.uploaddone;Et.options.beginupload=ur,Et.options.uploadprogress=Dt,Et.options.uploaddone=lr,$e.fileInput&&($e.fileInput=z.verifyFileInput($e.fileInput)),$e.type&&z.verifyFileType($e.type),$e.timeout?z.verifyParamType("timeout",$e.timeout,"number"):$e.timeout=6e5,z.verifyFileUploadCallback($e),$e.data={},$e.params&&z.merge($e.data,$e.params);var sr,er,cr=$e.fileName,or=$e.fileInput;if(de){if(or){if(!(er=$e.type?z.filterFiles(or.files,$e.type):g([]).call(or.files,0))||!er.length)return void $e.uploaddone(re.newWrongFileTypeError(""+$e.type+", , "+$e.type+""));$e.data[cr]=er[0],sr=or.files[0].size}else if($e.blob){var hr;if($e.data[cr]=$e.blob,$e.type!=="file"&&$e.blob.type&&y(hr=$e.blob.type).call(hr,$e.type)===-1)return void $e.uploaddone(re.newWrongFileTypeError(""+$e.type+", "+$e.type+""));sr=$e.blob.size}if(Et.reporterHook.emit("reporter/uploadUpdate",{full_size:sr}),$e.maxSize&&sr>$e.maxSize)return void $e.uploaddone(re.newFileTooLargeError("".concat($e.maxSize,"")))}function pr(){if(Et.logger.info("Upload:enter aws upload"),sr){if(sr>V.chunkMaxSize)$e.uploaddone(re.newFileTooLargeError("".concat(V.commonMaxSize,"")));else if($e.s3Policy&&$e.s3Policy.uploadConfig&&$e.s3Policy.uploadConfig.retryPolicy){var _r=$e.s3Policy.uploadConfig.retryPolicy,Mr={accessKeyId:$e.mixStoreToken.accessKeyId,secretAccessKey:$e.mixStoreToken.secretAccessKey,sessionToken:$e.mixStoreToken.sessionToken,region:$e.mixStoreToken.region,maxRetries:_r.retry},rr=new $e.s3;rr.config.update(Mr);var kr=Et.reporterHook.getNTPTime();rr.config.systemClockOffset=kr-i();var Er=decodeURIComponent($e.mixStoreToken.bucket),xr=decodeURIComponent($e.mixStoreToken.objectName),vr=$e.data[cr],Ir=rr.upload({Bucket:Er,Key:xr,Body:vr,Metadata:{token:$e.mixStoreToken.token},ContentType:vr.type||"application/octet-stream"});Ir.on("httpUploadProgress",function(Or){var Cr=Math.floor(1e4*Or.loaded/Or.total)/100,yr={docId:$e.docId,total:Or.total,loaded:Or.loaded,percentage:Cr,percentageText:Cr+"%"};$e.fileInput&&(yr.fileInput=$e.fileInput),$e.blob&&(yr.blob=$e.blob),$e.uploadprogress(yr)}),Ir.send(function(Or,Cr){if($e.errorHook({bucket:Er,object:xr},{provider:"s3"}),$e.docId&&(Cr.docId=$e.docId),Or&&Or.code==="RequestAbortedError")Et.logger.error("uploadFile:","api::s3:upload file abort",Or),Et.onError(Or);else if(Or){var yr;$e.logger.error("error:","api::s3:upload file failed",Or);var fr=$e.providers[(y(yr=$e.providers).call(yr,$e.curProvider)+1)%$e.providers.length];_r.retryNext&&fr?(Et.addCircuitTimer($e,fr),fr===1&&$e.getMixStoreToken(1,function(Br){$e.mixStoreToken=Br,Tr()})):Et.onError(Cr),$e.errorHook(Or,{provider:"s3"})}else{var Sr=Et.options.s3Policy.cdnSchema;Sr=(Sr=Sr.replace("{cdnDomain}",Et.options.s3Policy.dlcdn)).replace("{objectName}",Cr.Key),$e.uploaddone(null,{size:vr.size,name:vr.name,url:Sr,ext:vr.name&&vr.name.split(".")[1]||"unknown",_url_safe:$e.mixStoreToken.shortUrl,isS3:!0}),$e.logger.info("s3 Upload done: fileObj is",{size:vr.size,name:vr.name,url:Sr,ext:vr.name&&vr.name.split(".")[1]||"unknown",_url_safe:$e.mixStoreToken.shortUrl,isS3:!0})}}),typeof $e.beginupload=="function"&&$e.beginupload(Ir)}}else $e.uploaddone(re.newFileTooLargeError("Browser version is too low"))}function Tr(){if(Et.logger.info("Upload:enter nos upload"),sr&&!$e.commonUpload)return Et.logger.info("Upload:use chunk upload, url ".concat($e.url)),sr>V.chunkMaxSize?void $e.uploaddone(re.newFileTooLargeError("".concat(V.chunkMaxSize,""))):void(Et.sn=ue($e,cr,Et,-1));if(Et.logger.info("Upload:use common upload, url ".concat($e.url)),sr&&sr>V.commonMaxSize)$e.uploaddone(re.newFileTooLargeError("".concat(V.commonMaxSize,"")));else{sr||(z.dataset(or,"name",cr),$e.data.input=or);var _r=0,Mr={data:$e.data,onaftersend:function(){$e.beginupload(Et,Et.message)},onuploading:function(rr){if(_r!==100){var kr=Math.floor(1e4*rr.loaded/rr.total)/100;k(kr)>=100&&(_r=kr=100);var Er={docId:$e.docId,total:rr.total,loaded:rr.loaded,percentage:kr,percentageText:kr+"%"};$e.fileInput&&(Er.fileInput=$e.fileInput),$e.blob&&(Er.blob=$e.blob),$e.uploadprogress(Er)}},onload:function(rr){var kr;if($e.docId&&(rr.docId=$e.docId),!rr.Error)return $e.uploaddone(null,rr),void $e.logger.info("nos Upload done: fileObj is",rr);if($e.mixEnable&&$e.curProvider===1){var Er=$e.nosPolicy.uploadConfig.retryPolicy,xr=$e.providers[(y(kr=$e.providers).call(kr,$e.curProvider)+1)%$e.providers.length];Er.retryNext&&xr?(Et.addCircuitTimer($e,xr),xr===2&&$e.getMixStoreToken(2,function(vr){$e.mixStoreToken=vr,pr()})):Et.onError(rr)}else Et.onError(rr)},onerror:function(rr){var kr;if($e.mixEnable&&$e.curProvider===1){var Er,xr=$e.nosPolicy.uploadConfig.retryPolicy,vr=$e.providers[(y(Er=$e.providers).call(Er,$e.curProvider)+1)%$e.providers.length];if(xr.retryNext&&vr)Et.addCircuitTimer($e,vr),vr===2&&$e.getMixStoreToken(2,function(Ir){$e.mixStoreToken=Ir,pr()});else try{kr=rr.result?JSON.parse(rr.result):rr,Et.onError(kr)}catch{$e.uploaddone(new re(rr.message,rr.code),Et.options)}}else try{kr=rr.result?JSON.parse(rr.result):rr,Et.onError(kr)}catch{$e.uploaddone(new re(rr.message,rr.code),Et.options)}$e.errorHook(rr,{provider:"nos"})}};de||(Mr.mode="iframe"),Mr.putFileAtEnd=!0,Et.sn=ie($e.url,Mr)}}if($e.mixEnable&&$e.curProvider===2){var Pr=Et.options.s3Policy.cdnSchema;Pr=Pr.replace("{cdnDomain}",Et.options.s3Policy.dlcdn),Et.reporterHook.emit("reporter/uploadUpdate",{remote_addr:Pr,operation_type:oe.kResourceUploadWayAWSPlugin}),pr()}else $e.mixEnable&&$e.curProvider===1?(Et.reporterHook.emit("reporter/uploadUpdate",{remote_addr:$e.url,operation_type:oe.kResourceUploadWayNOSPlugin}),Tr()):(Et.reporterHook.emit("reporter/uploadUpdate",{remote_addr:$e.url,operation_type:oe.kResourceUploadWayNOS}),Tr())}Ve.prototype.addCircuitTimer=function($e,Lt){var jt=this;if($e.curProvider=Lt,$e.s3Policy&&$e.nosPolicy){var Et=$e[$e.curProvider===1?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!Et||Et===0)return;jt.circuitTimer&&clearTimeout(jt.circuitTimer),jt.circuitTimer=$(function(){$e.curProvider=$e.providers[0],jt.circuitTimer=void 0},1e3*Et)}},Ve.prototype.onError=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Lt=this,jt=Lt.options,Et=$e.Error||$e||{},ir=Et.Code,ur=Et.code,Dt=Et.Message,lr=Et.message,sr=n(Et,L),er=ir||ur||"unknown",cr=Dt||lr||"";jt.uploaddone(new re(er+"("+cr+")",er,sr))},Ve.prototype.abort=function(){Ue(this.sn)},t.exports=Ve},function(t,r,e){t.exports=e(280)},function(t,r,e){var n=e(611);t.exports=n},function(t,r,e){var n=e(189),g=e(140),y=e(190);t.exports=function(i,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=n(k&&k.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),g(i,"prototype",{writable:!1}),k&&y(i,k)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(22).default,g=e(625);t.exports=function(y,i){if(i&&(n(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(626)},function(t,r,e){var n=e(629);t.exports=n},function(t,r,e){var n=e(7),g=e(0),y={fromDataURL:function(i){var k,$,L=g.getGlobal();$=n(k=i.split(",")[0]).call(k,"base64")>=0?L.atob(i.split(",")[1]):L.decodeURIComponent(i.split(",")[1]);for(var V=i.split(",")[0].split(":")[1].split(";")[0],z=new Uint8Array($.length),re=0;re<$.length;re++)z[re]=$.charCodeAt(re);return new L.Blob([z],{type:V})}};t.exports=y},function(t,r,e){var n=e(4),g=e(9),y=e(10),i=e(0),k={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},$={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};function L(V){i.verifyOptions(V,"type","image::ImageOp"),i.verifyParamValid("type",V.type,L.validTypes,"image::ImageOp"),i.merge(this,V),this.type=k[V.type]}L.validTypes=n(k),L.reverse=function(V){var z=i.copy(V);return z.type=$[z.type],z},L.reverseImageOps=function(V){return g(V).call(V,function(z){return y(L).call(L,z)})},t.exports=L},function(t,r,e){var n=e(2),g=e(4),y={1:"ROOM_CLOSE",2:"ROOM_JOIN",3:"INVITE",4:"CANCEL_INVITE",5:"REJECT",6:"ACCEPT",7:"LEAVE",8:"CONTROL"},i={1:"accid",2:"uid",3:"createTime",4:"expireTime",5:"web_uid"},k={10404:"ROOM_NOT_EXISTS",10405:"ROOM_HAS_EXISTS",10406:"ROOM_MEMBER_NOT_EXISTS",10407:"ROOM_MEMBER_HAS_EXISTS",10408:"INVITE_NOT_EXISTS",10409:"INVITE_HAS_REJECT",10410:"INVITE_HAS_ACCEPT",10201:"PEER_NIM_OFFLINE",10202:"PEER_PUSH_OFFLINE",10419:"ROOM_MEMBER_EXCEED",10420:"ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT",10417:"UID_CONFLICT"};t.exports={parseAvSignalType:function($){return y[$]||$},parseAvSignalMember:function($){var L,V={};return n(L=g($)).call(L,function(z){V[i[z]]=$[z]}),V},parseAvSignalError:function($){return $.message=k[$.code]||$.message||$,$}}},function(t,r,e){t.exports=e(655)},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */function getGlobal(){return typeof window<"u"?window:typeof self<"u"?self:global!==void 0?global:{}}var root=getGlobal(),io=module.exports;root.location===void 0&&(root.location=null),root.io?module&&(module.exports=io=root.io):root.io=io,function(){(function(t,r){var e=t;e.version="0.9.11",e.protocol=1,e.transports=[],e.j=[],e.sockets={},e.connect=function(n,g){var y,i,k=e.util.parseUri(n);r&&r.location&&(k.protocol=k.protocol||r.location.protocol.slice(0,-1),k.host=k.host||(r.document?r.document.domain:r.location.hostname),k.port=k.port||r.location.port),y=e.util.uniqueUri(k);var $={host:k.ipv6uri?"["+k.host+"]":k.host,secure:k.protocol==="https",port:k.port||(k.protocol==="https"?443:80),query:k.query||""};return e.util.merge($,g),!$["force new connection"]&&e.sockets[y]||(i=new e.Socket($)),!$["force new connection"]&&i&&(e.sockets[y]=i),(i=i||e.sockets[y]).of(k.path.length>1?k.path:"")}})(module.exports,root),function(t,r){var e=t.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(i){var k=i,$=i.indexOf("["),L=i.indexOf("]");$!=-1&&L!=-1&&(i=i.substring(0,$)+i.substring($,L).replace(/:/g,";")+i.substring(L,i.length));for(var V=n.exec(i||""),z={},re=14;re--;)z[g[re]]=V[re]||"";return $!=-1&&L!=-1&&(z.source=k,z.host=z.host.substring(1,z.host.length-1).replace(/;/g,":"),z.authority=z.authority.replace("[","").replace("]","").replace(/;/g,":"),z.ipv6uri=!0),z},e.uniqueUri=function(i){var k=i.protocol,$=i.host,L=i.port;return"document"in r&&r.document?($=$||document.domain,L=L||(k=="https"&&document.location.protocol!=="https:"?443:document.location.port)):($=$||"localhost",L||k!="https"||(L=443)),(k||"http")+"://"+$+":"+(L||80)},e.query=function(i,k){var $=e.chunkQuery(i||""),L=[];for(var V in e.merge($,e.chunkQuery(k||"")),$)$.hasOwnProperty(V)&&L.push(V+"="+$[V]);return L.length?"?"+L.join("&"):""},e.chunkQuery=function(i){for(var k,$={},L=i.split("&"),V=0,z=L.length;V<z;++V)(k=L[V].split("="))[0]&&($[k[0]]=k[1]);return $};var y=!1;e.load=function(i){if(typeof document<"u"&&document&&document.readyState==="complete"||y)return i();e.on(r,"load",i,!1)},e.on=function(i,k,$,L){i.attachEvent?i.attachEvent("on"+k,$):i.addEventListener&&i.addEventListener(k,$,L)},e.request=function(i){if(i&&typeof XDomainRequest<"u"&&!e.ua.hasCORS)return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!i||e.ua.hasCORS))return new XMLHttpRequest;if(!i)try{return new root[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},root!==void 0&&e.load(function(){y=!0}),e.defer=function(i){if(!e.ua.webkit||typeof importScripts<"u")return i();e.load(function(){setTimeout(i,100)})},e.merge=function(i,k,$,L){var V,z=L||[],re=$===void 0?2:$;for(V in k)k.hasOwnProperty(V)&&e.indexOf(z,V)<0&&(typeof i[V]=="object"&&re?e.merge(i[V],k[V],re-1,z):(i[V]=k[V],z.push(k[V])));return i},e.mixin=function(i,k){e.merge(i.prototype,k.prototype)},e.inherit=function(i,k){function $(){}$.prototype=k.prototype,i.prototype=new $},e.isArray=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},e.intersect=function(i,k){for(var $=[],L=i.length>k.length?i:k,V=i.length>k.length?k:i,z=0,re=V.length;z<re;z++)~e.indexOf(L,V[z])&&$.push(V[z]);return $},e.indexOf=function(i,k,$){var L=i.length;for($=$<0?$+L<0?0:$+L:$||0;$<L&&i[$]!==k;$++);return L<=$?-1:$},e.toArray=function(i){for(var k=[],$=0,L=i.length;$<L;$++)k.push(i[$]);return k},e.ua={},e.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var i=new XMLHttpRequest}catch{return!1}return i.withCredentials!=null}(),e.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent),e.ua.iDevice=typeof navigator<"u"&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(io!==void 0?io:module.exports,root),function(t,r){function e(){}t.EventEmitter=e,e.prototype.on=function(n,g){return this.$events||(this.$events={}),this.$events[n]?r.util.isArray(this.$events[n])?this.$events[n].push(g):this.$events[n]=[this.$events[n],g]:this.$events[n]=g,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(n,g){var y=this;function i(){y.removeListener(n,i),g.apply(this,arguments)}return i.listener=g,this.on(n,i),this},e.prototype.removeListener=function(n,g){if(this.$events&&this.$events[n]){var y=this.$events[n];if(r.util.isArray(y)){for(var i=-1,k=0,$=y.length;k<$;k++)if(y[k]===g||y[k].listener&&y[k].listener===g){i=k;break}if(i<0)return this;y.splice(i,1),y.length||delete this.$events[n]}else(y===g||y.listener&&y.listener===g)&&delete this.$events[n]}return this},e.prototype.removeAllListeners=function(n){return n===void 0?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)},e.prototype.removeAllListenersX=function(n){if(n===void 0)return this.$events={},this;for(let g in this.$events)g!==n&&(this.$events[g]=null);return this},e.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),r.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]},e.prototype.emit=function(n){if(!this.$events)return!1;var g=this.$events[n];if(!g)return!1;var y=Array.prototype.slice.call(arguments,1);if(typeof g=="function")g.apply(this,y);else{if(!r.util.isArray(g))return!1;for(var i=g.slice(),k=0,$=i.length;k<$;k++)i[k].apply(this,y)}return!0}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,r){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(r){var e=meta[r];return typeof e=="string"?e:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,r){var e,n,g,y,i,k=gap,$=r[t];switch($ instanceof Date&&($=date(t)),typeof rep=="function"&&($=rep.call(r,t,$)),typeof $){case"string":return quote($);case"number":return isFinite($)?String($):"null";case"boolean":case"null":return String($);case"object":if(!$)return"null";if(gap+=indent,i=[],Object.prototype.toString.apply($)==="[object Array]"){for(y=$.length,e=0;e<y;e+=1)i[e]=str(e,$)||"null";return g=i.length===0?"[]":gap?`[
`+gap+i.join(`,
`+gap)+`
`+k+"]":"["+i.join(",")+"]",gap=k,g}if(rep&&typeof rep=="object")for(y=rep.length,e=0;e<y;e+=1)typeof rep[e]=="string"&&(g=str(n=rep[e],$))&&i.push(quote(n)+(gap?": ":":")+g);else for(n in $)Object.prototype.hasOwnProperty.call($,n)&&(g=str(n,$))&&i.push(quote(n)+(gap?": ":":")+g);return g=i.length===0?"{}":gap?`{
`+gap+i.join(`,
`+gap)+`
`+k+"}":"{"+i.join(",")+"}",gap=k,g}}JSON.stringify=function(t,r,e){var n;if(gap="",indent="",typeof e=="number")for(n=0;n<e;n+=1)indent+=" ";else typeof e=="string"&&(indent=e);if(rep=r,r&&typeof r!="function"&&(typeof r!="object"||typeof r.length!="number"))throw new Error("socket.io:: replacer cannot JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){var j;function walk(t,r){var e,n,g=t[r];if(g&&typeof g=="object")for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&((n=walk(g,e))!==void 0?g[e]=n:delete g[e]);return reviver.call(t,r,g)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("socket.io:: reviver cannot JSON.parse")}}(io!==void 0?io:module.exports,typeof JSON<"u"?JSON:void 0),function(t,r){var e=t.parser={},n=e.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],g=e.reasons=["transport not supported","client not handshaken","unauthorized"],y=e.advice=["reconnect"],i=r.JSON,k=r.util.indexOf;e.encodePacket=function(L){var V=k(n,L.type),z=L.id||"",re=L.endpoint||"",ie=L.ack,ue=null;switch(L.type){case"error":var le=L.reason?k(g,L.reason):"",oe=L.advice?k(y,L.advice):"";le===""&&oe===""||(ue=le+(oe!==""?"+"+oe:""));break;case"message":L.data!==""&&(ue=L.data);break;case"event":var ae={name:L.name};L.args&&L.args.length&&(ae.args=L.args),ue=i.stringify(ae);break;case"json":ue=i.stringify(L.data);break;case"connect":L.qs&&(ue=L.qs);break;case"ack":ue=L.ackId+(L.args&&L.args.length?"+"+i.stringify(L.args):"")}var Ue=[V,z+(ie=="data"?"+":""),re];return ue!=null&&Ue.push(ue),Ue.join(":")},e.encodePayload=function(L){var V="";if(L.length==1)return L[0];for(var z=0,re=L.length;z<re;z++)V+=""+L[z].length+""+L[z];return V};var $=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;e.decodePacket=function(L){if(!(re=L.match($)))return{};var V=re[2]||"",z=(L=re[5]||"",{type:n[re[1]],endpoint:re[4]||""});switch(V&&(z.id=V,re[3]?z.ack="data":z.ack=!0),z.type){case"error":var re=L.split("+");z.reason=g[re[0]]||"",z.advice=y[re[1]]||"";break;case"message":z.data=L||"";break;case"event":try{var ie=i.parse(L);z.name=ie.name,z.args=ie.args}catch{}z.args=z.args||[];break;case"json":try{z.data=i.parse(L)}catch{}break;case"connect":z.qs=L||"";break;case"ack":if((re=L.match(/^([0-9]+)(\+)?(.*)/))&&(z.ackId=re[1],z.args=[],re[3]))try{z.args=re[3]?i.parse(re[3]):[]}catch{}}return z},e.decodePayload=function(L){var V=function(oe,ae){for(var Ue=0,de=oe;de<ae.length;de++){if(ae.charAt(de)=="")return Ue;Ue++}return Ue};if(L.charAt(0)==""){for(var z=[],re=1,ie="";re<L.length;re++)if(L.charAt(re)==""){var ue=L.substr(re+1).substr(0,ie);if(L.charAt(re+1+Number(ie))!=""&&re+1+Number(ie)!=L.length){var le=Number(ie);l=V(re+le+1,L),ue=L.substr(re+1).substr(0,le+l),re+=l}z.push(e.decodePacket(ue)),re+=Number(ie)+1,ie=""}else ie+=L.charAt(re);return z}return[e.decodePacket(L)]}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r){function e(n,g){this.socket=n,this.sessid=g}t.Transport=e,r.util.mixin(e,r.EventEmitter),e.prototype.heartbeats=function(){return!0},e.prototype.onData=function(n){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""){var g=r.parser.decodePayload(n);if(g&&g.length)for(var y=0,i=g.length;y<i;y++)this.onPacket(g[y])}return this},e.prototype.onPacket=function(n){return this.socket.setHeartbeatTimeout(),n.type=="heartbeat"?this.onHeartbeat():(n.type=="connect"&&n.endpoint==""&&this.onConnect(),n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(n),this)},e.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.socket&&n.socket.publish("info","socket disconnected by setCloseTimeout"),n.onDisconnect()},this.socket.closeTimeout)}},e.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket?(this.socket.transport===this?this.socket.onDisconnect():this.socket.setBuffer(!1),this):this},e.prototype.onConnect=function(){return this.socket.onConnect(),this},e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},e.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},e.prototype.packet=function(n){this.send(r.parser.encodePacket(n))},e.prototype.onHeartbeat=function(n){this.packet({type:"heartbeat"})},e.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},e.prototype.onClose=function(){this.socket.publish("info","transport onClose"),this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect(),this.onDisconnectDone instanceof Function&&this.onDisconnectDone(null),this.onConnectionOver instanceof Function&&this.onConnectionOver(null)},e.prototype.onDisconnectDone=function(){},e.prototype.onConnectionOver=function(){},e.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+r.protocol+"/"+this.name+"/"+this.sessid},e.prototype.ready=function(n,g){g.call(this)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(y){if(this.options={port:80,secure:!1,document:"document"in e&&document,resource:"socket.io",transports:y.transports||r.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,needToXHR:!0,manualFlush:!1},r.util.merge(this.options,y),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||r.util.ua.hasCORS)){var i=this;r.util.on(e,"beforeunload",function(){i.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function g(){}t.Socket=n,r.util.mixin(n,r.EventEmitter),n.prototype.of=function(y){return this.namespaces[y]||(this.namespaces[y]=new r.SocketNamespace(this,y),y!==""&&this.namespaces[y].packet({type:"connect"})),this.namespaces[y]},n.prototype.publish=function(){var y;for(var i in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(i)&&(y=this.of(i)).$emit.apply(y,arguments)},n.prototype.guid=function(){var y=root.crypto||root.msCrypto;if(y){var i=new Uint8Array(16);y.getRandomValues(i),i[6]&=15,i[6]|=64,i[8]&=63,i[8]|=128;for(var k="",$=0;$<i.length;$++){var L=i[$].toString(16);L.length===1&&(L="0"+L),k+=L}return k.substring(0,8)+"-"+k.substring(8,12)+"-"+k.substring(12,16)+"-"+k.substring(16,20)+"-"+k.substring(20)}},n.prototype.handshake=function(y){var i=this,k=this.options;if(!this.options.needToXHR&&this.options.transports.length===1&&this.options.transports[0]==="websocket"){var $=this.guid();if($)return void setTimeout(function(){i.publish("info","xhr, skip and get:"+$),y.apply(null,[$,"90","60","websocket"])},0)}function L(ue){ue instanceof Error?(i.connecting=!1,i.publish("info","xhr, status:200, but got error:",ue),i.onError("xhr, status:200, but got error:"+ue.message,ue)):y.apply(null,ue.split(":"))}var V=["http"+(k.secure?"s":"")+":/",k.host+":"+k.port,k.resource,r.protocol,r.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!r.util.ua.hasCORS&&typeof document<"u"&&document){var z=document.getElementsByTagName("script")[0],re=document.createElement("script");re.src=V+"&jsonp="+r.j.length,re.onreadystatechange=function(){this.readyState=="loaded"&&re.parentNode&&(re.parentNode.removeChild(re),i.connecting=!1,i.publish("info","xhr, jsonp:Server down or port not open"),!i.reconnecting&&i.onError("Server down or port not open",new Error("xhr, jsonp:server down or port not open")),i.publish("handshake_failed"))},z.parentNode.insertBefore(re,z),r.j.push(function(ue){L(ue),re.parentNode.removeChild(re)})}else{var ie=r.util.request();ie.open("GET",V,!0),ie.timeout=8e3,this.isXDomain()&&(ie.withCredentials=!0),ie.onreadystatechange=function(){i.publish("info","xhr, readyState:"+ie.readyState+" status:"+ie.status),ie.readyState==4&&(i.publish("info","xhr, responseText:"+ie.responseText),ie.onreadystatechange=g,ie.status==200?L(ie.responseText):ie.status==403?(i.connecting=!1,i.onError(ie.responseText,new Error("xhr, status:403"+ie.responseText)),i.publish("handshake_failed")):(i.connecting=!1,!i.reconnecting&&i.onError(ie.responseText,new Error("xhr, status:"+ie.status+" "+ie.responseText)),i.publish("handshake_failed")))},ie.ontimeout=function(ue){i.publish("info","xhr, timeout"),i.connecting=!1,!i.reconnecting&&i.onError(ie.responseText,new Error("xhr, timeout")),i.publish("handshake_failed")},ie.send(null)}},n.prototype.connect=function(y){if(this.connecting)return this;var i=this;return i.connecting=!0,this.handshake(function(k,$,L,V){i.publish("info","SocketIO handshake parameter: sid: "+k+", transports: "+V+", close: "+L+", heartbeat: "+$),i.sessionid=k,i.closeTimeout=1e3*L,i.heartbeatTimeout=1e3*$,i.transports||(i.transports=i.origTransports=V?r.util.intersect(V.split(","),i.options.transports):i.options.transports),i.setHeartbeatTimeout(),i.once("connect",function(){i.publish("info","tcp, clear connect timeout due to recv connect event"),clearTimeout(i.connectTimeoutTimer),i.connectTimeoutTimer=null,y&&typeof y=="function"&&y()}),i.doConnect()}),this},n.prototype.doConnect=function(){var y=this;if(y.transport&&y.transport.clearTimeouts(),y.transport=y.getTransport(y.transports),!y.transport)return y.publish("connect_failed");y.transport.ready(y,function(){y.connecting=!0,y.publish("info","tcp, connecting, transport ready in "+y.transport.name),y.publish("connecting",y.transport.name),y.transport.open(),y.options["connect timeout"]&&(y.connectTimeoutTimer&&clearTimeout(y.connectTimeoutTimer),y.publish("info","set new connect timeout"),y.connectTimeoutTimer=setTimeout(function(){y.publish("info","trigger connect timeout due to setTimeout"),y.transport.close(),y.tryNextTransport()},y.options["connect timeout"]))})},n.prototype.getTransport=function(y){const i=this;for(var k,$=y||this.transports,L=0;k=$[L];L++)if(i.publish("info","check transport: "+k),r.Transport[k]&&r.Transport[k].check(this)&&(!this.isXDomain()||r.Transport[k].xdomainCheck(this)))return i.publish("info","use transport: "+k),new r.Transport[k](this,this.sessionid);return null},n.prototype.tryNextTransport=function(){if(!this.connected&&(this.connecting=!1,this.options["try multiple transports"])){for(var y=this.transports;y.length>0&&y.splice(0,1)[0]!=this.transport.name;);y.length?this.doConnect():this.publish("connect_failed")}},n.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var y=this;this.heartbeatTimeoutTimer=setTimeout(function(){y.transport&&(y.publish("info","transport closed by setHeartbeatTimeout"),y.transport.onClose())},this.heartbeatTimeout)}},n.prototype.packet=function(y){return this.connected&&!this.doBuffer?this.transport.packet(y):this.buffer.push(y),this},n.prototype.setBuffer=function(y){this.doBuffer=y,!y&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},n.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},n.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.publish("info","socket disconnected by IM SDK"),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var y=r.util.request(),i=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,r.protocol,"",this.sessionid].join("/")+"/?disconnect=1";y.open("GET",i,!1),y.send(null),this.publish("info","socket disconnected by disconnectSync before page unload"),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var y=e&&e.location||{},i=y.port||(y.protocol=="https:"?443:80);return this.options.host!==y.hostname||this.options.port!=i},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.publish("info","tcp, websocket onOpen"),this.open=!0},n.prototype.onClose=function(){this.publish("info","tcp, websocket onClose"),this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},n.prototype.onPacket=function(y){this.of(y.endpoint).onPacket(y)},n.prototype.onError=function(y,i){y&&y.advice&&y.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",y&&y.reason?y.reason:y,i)},n.prototype.onDisconnect=function(y){var i=this.connected,k=this.connecting;this.publish("info",y?"tcp, onDisconnect reason:"+y:"tcp, onDisconnect"),this.connected=!1,this.connecting=!1,this.open=!1,(i||k)&&this.transport&&(this.transport.close(),this.transport.clearTimeouts(),i&&(this.publish("disconnect",y),y!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),k&&(this.connectTimeoutTimer&&(this.publish("info","clear connect timeout due to onDisconnect"),clearTimeout(this.connectTimeoutTimer)),this.tryNextTransport()))},n.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var y=this,i=this.options["max reconnection attempts"],k=this.options["try multiple transports"],$=this.options["reconnection limit"];function L(){if(y.connected){for(var z in y.namespaces)y.namespaces.hasOwnProperty(z)&&z!==""&&y.namespaces[z].packet({type:"connect"});y.publish("reconnect",y.transport.name,y.reconnectionAttempts)}clearTimeout(y.reconnectionTimer),y.removeListener("connect_failed",V),y.removeListener("connect",V),y.reconnecting=!1,delete y.reconnectionAttempts,delete y.reconnectionDelay,delete y.reconnectionTimer,delete y.redoTransports,y.options["try multiple transports"]=k}function V(){if(y.reconnecting)return y.connected?L():y.connecting&&y.reconnecting?y.reconnectionTimer=setTimeout(V,1e3):void(y.reconnectionAttempts++>=i?y.redoTransports?(y.publish("reconnect_failed"),L()):(y.on("connect_failed",V),y.options["try multiple transports"]=!0,y.transports=y.origTransports,y.transport=y.getTransport(),y.redoTransports=!0,y.connect()):(y.reconnectionDelay<$&&(y.reconnectionDelay*=2),y.connect(),y.publish("reconnecting",y.reconnectionDelay,y.reconnectionAttempts),y.reconnectionTimer=setTimeout(V,y.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(V,this.reconnectionDelay),this.on("connect",V)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r){function e(g,y){this.socket=g,this.name=y||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(g,y){this.namespace=g,this.name=y}t.SocketNamespace=e,r.util.mixin(e,r.EventEmitter),e.prototype.$emit=r.EventEmitter.prototype.emit,e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},e.prototype.packet=function(g){return g.endpoint=this.name,this.socket.packet(g),this.flags={},this},e.prototype.send=function(g,y){var i={type:this.flags.json?"json":"message",data:g};return typeof y=="function"&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=y),this.packet(i)},e.prototype.emit=function(g){var y=Array.prototype.slice.call(arguments,1),i=y[y.length-1],k={type:"event",name:g};return typeof i=="function"&&(k.id=++this.ackPackets,k.ack="data",this.acks[k.id]=i,y=y.slice(0,y.length-1)),k.args=y,this.packet(k)},e.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},e.prototype.onPacket=function(g){var y=this;function i(){y.packet({type:"ack",args:r.util.toArray(arguments),ackId:g.id})}switch(g.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?(this.socket.publish("info","socket disconnected by SocketNameSpace.onPacket"),this.socket.onDisconnect(g.reason||"booted")):this.$emit("disconnect",g.reason);break;case"message":case"json":var k=["message",g.data];g.ack=="data"?k.push(i):g.ack&&this.packet({type:"ack",ackId:g.id}),this.$emit.apply(this,k);break;case"event":k=[g.name].concat(g.args),g.ack=="data"&&k.push(i),this.$emit.apply(this,k);break;case"ack":this.acks[g.ackId]&&(this.acks[g.ackId].apply(this,g.args),delete this.acks[g.ackId]);break;case"error":this.socket.publish("info","packet, type:error",g),g.advice?this.socket.onError(g,new Error("packet, type:error and advice is "+g.advice)):g.reason==="unauthorized"?this.$emit("connect_failed",g.reason):this.$emit("error",g.reason,new Error("packet, type:error and reason is "+g.reason))}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(g){r.Transport.apply(this,arguments)}t.websocket=n,r.util.inherit(n,r.Transport),n.prototype.name="websocket",n.prototype.open=function(){var g,y=r.util.query(this.socket.options.query),i=this;return g||(g=e.MozWebSocket||e.WebSocket),this.websocket=new g(this.prepareUrl()+y),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(k){i.onData(k.data)},this.websocket.onclose=function(k){i.socket.setBuffer(!0),i.socket.publish("websocketOnclose",k),i.onClose()},this.websocket.onerror=function(k){var $="";k&&k.message?$=k.message:k.target&&($=k.target.readyState?"websocket, readyState:"+k.target.readyState:"websocket event"),i.onError($,k)},this},r.util.ua.iDevice?n.prototype.send=function(g){var y=this;return setTimeout(function(){y.websocket.send(g)},0),this}:n.prototype.send=function(g){return this.websocket.send(g),this},n.prototype.payload=function(g){for(var y=0,i=g.length;y<i;y++)this.packet(g[y]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(g,y){this.socket.publish("info","tcp, onError",g,y),this.socket.onError(g,y)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in e&&!("__addTask"in WebSocket)||"MozWebSocket"in e},n.xdomainCheck=function(){return!0},r.transports.push("websocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(y){y&&(r.Transport.apply(this,arguments),this.sendBuffer=[])}function g(){}t.XHR=n,r.util.inherit(n,r.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(y){for(var i=[],k=0,$=y.length;k<$;k++)i.push(r.parser.encodePacket(y[k]));this.send(r.parser.encodePayload(i))},n.prototype.send=function(y){return this.post(y),this},n.prototype.post=function(y){var i=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),e.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=g,i.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=g,i.posting=!1,this.status==200?i.socket.setBuffer(!1):i.onClose())},this.sendXHR.send(y)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(y){var i=r.util.request(this.socket.isXDomain()),k=r.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(y||"GET",this.prepareUrl()+k,!0),y=="POST")try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch{}return i},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(y,i){try{var k=r.util.request(i),$=e.XDomainRequest&&k instanceof XDomainRequest,L=y&&y.options&&y.options.secure?"https:":"http:",V=e.location&&L!=e.location.protocol;if(k&&(!$||!V))return!0}catch{}return!1},n.xdomainCheck=function(y){return n.check(y,!0)}}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(){r.Transport.XHR.apply(this,arguments)}function g(){}t["xhr-polling"]=n,r.util.inherit(n,r.Transport.XHR),r.util.merge(n,r.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){return r.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){if(this.isOpen){var y=this;this.xhr=this.request(),e.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=g,this.onerror=g,y.retryCounter=1,y.onData(this.responseText),y.get()},this.xhr.onerror=function(){y.retryCounter++,!y.retryCounter||y.retryCounter>3?y.onClose():y.get()}):this.xhr.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=g,this.status==200?(y.onData(this.responseText),y.get()):y.onClose())},this.xhr.send(null)}},n.prototype.onClose=function(){if(r.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=g;try{this.xhr.abort()}catch{}this.xhr=null}},n.prototype.ready=function(y,i){var k=this;r.util.defer(function(){i.call(k)})},r.transports.push("xhr-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return io}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__===void 0||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(73),__webpack_require__(147)(module))},function(t,r){t.exports=function(e){var n=-1,g=Array(e.size);return e.forEach(function(y){g[++n]=y}),g}},function(t,r,e){var n,g=e(26),y=e(45),i=e(11),k=e(64),$=e(690),L=e(697),V=e(196),z=V.getLibEnv,re=V.getHostEnv,ie=V.getHostEnvVer,ue={initReporter:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe={app_key:le.appKey,platform:"Web",dev_id:y.deviceId,sdk_ver:i.info.version,env:"online",os_name:k.os?k.os.family:"",os_ver:k.os?k.os.version:"",lib_env:z(),host_env:re(),host_env_ver:ie(),manufactor:k.name,model:ie()};i.isBrowser||(le.isDataReportEnable=!1);var ae=new $({isDataReportEnable:le.isDataReportEnable,reportConfigUrl:le.reportConfigUrl,reportUrl:le.reportUrl,common:oe,request:L,logger:le.logger,autoStart:i.isBrowser});return ae}};ue.sendBeacon=navigator&&navigator.sendBeacon&&g(n=navigator.sendBeacon).call(n,navigator)||function(le,oe){var ae=new XMLHttpRequest;ae.open("POST",le,!0),ae.send(oe)},t.exports=ue},function(t,r,e){t.exports=e(691)},function(t,r,e){var n=e(1),g=e(14);n({global:!0,forced:g.globalThis!==g},{globalThis:g})},function(t,r,e){var n=e(1),g=e(12),y=e(114),i=e(28),k=e(30),$=e(39).f,L=e(134),V=e(168),z=e(708),re=e(130),ie=e(710),ue=!1,le=re("meta"),oe=0,ae=function(de){$(de,le,{value:{objectID:"O"+oe++,weakData:{}}})},Ue=t.exports={enable:function(){Ue.enable=function(){},ue=!0;var de=L.f,_e=g([].splice),Ve={};Ve[le]=1,de(Ve).length&&(L.f=function($e){for(var Lt=de($e),jt=0,Et=Lt.length;jt<Et;jt++)if(Lt[jt]===le){_e(Lt,jt,1);break}return Lt},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:V.f}))},fastKey:function(de,_e){if(!i(de))return typeof de=="symbol"?de:(typeof de=="string"?"S":"P")+de;if(!k(de,le)){if(!z(de))return"F";if(!_e)return"E";ae(de)}return de[le].objectID},getWeakData:function(de,_e){if(!k(de,le)){if(!z(de))return!0;if(!_e)return!1;ae(de)}return de[le].weakData},onFreeze:function(de){return ie&&ue&&z(de)&&!k(de,le)&&ae(de),de}};y[le]=!0},function(t,r,e){var n=e(20),g=e(31),y=e(17),i=e(36),k=TypeError;t.exports=function($,L){var V,z=i(this),re=g(z.get),ie=g(z.has),ue=g(z.set),le=arguments.length>2?arguments[2]:void 0;if(!y(L)&&!y(le))throw k("At least one callback required");return n(ie,z,$)?(V=n(re,z,$),y(L)&&(V=L(V),n(ue,z,$,V))):y(le)&&(V=le(),n(ue,z,$,V)),V}},function(t,r,e){t.exports=e(740)},function(t,r,e){var n=e(4);e(45);function g(){}g.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,g2:12,custom:100};var y=g.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",11:"robot",12:"g2",100:"custom"};g.validTypes=n(g.typeMap),g.setFlow=function(i,k){i.flow=i.from===k?i.to===k?"in":"out":"in",i.type==="robot"&&i.content&&i.content.msgOut&&(i.flow="in")},g.getType=function(i){var k=i.type;return y[k]||k},t.exports=g},function(t,r,e){t.exports=function(n,g,y,i){var k=self||window;try{try{var $;try{$=new k.Blob([n])}catch{($=new(k.BlobBuilder||k.WebKitBlobBuilder||k.MozBlobBuilder||k.MSBlobBuilder)).append(n),$=$.getBlob()}var L=k.URL||k.webkitURL,V=L.createObjectURL($),z=new k[g](V,y);return L.revokeObjectURL(V),z}catch{return new k[g]("data:application/javascript,".concat(encodeURIComponent(n)),y)}}catch{if(!i)throw Error("Inline worker is not supported");return new k[g](i,y)}}},function(t,r,e){e(11).isBrowser=!0},function(t,r,e){var n=e(372);t.exports=n},function(t,r,e){var n=e(471);t.exports=n},function(t,r){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(n,g){var y=typeof n;return!!(g=g??9007199254740991)&&(y=="number"||y!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<g}},function(t,r,e){t.exports=e(559)},function(t,r,e){(function(n){var g,y=e(22),i=e(3),k=e(126),$=e(15),L=e(32),V=e(2),z=e(43),re=e(6),ie=e(4),ue=e(16);(function(le,oe){var ae,Ue=(le=le!==void 0?le:typeof self<"u"?self:n!==void 0?n:{}).IDBKeyRange||le.webkitIDBKeyRange,de="readonly",_e="readwrite",Ve=Object.prototype.hasOwnProperty,$e=function(){if(!ae&&!(ae=le.indexedDB||le.webkitIndexedDB||le.mozIndexedDB||le.oIndexedDB||le.msIndexedDB||(le.indexedDB===null&&le.shimIndexedDB?le.shimIndexedDB:void 0)))throw"IndexedDB required";return ae},Lt=!1,jt=navigator&&!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent),Et=function(Tr){return Tr},ir=function(Tr){var Pr;return $(Pr=Object.prototype.toString.call(Tr)).call(Pr,8,-1).toLowerCase()},ur=function(Tr){return typeof Tr=="function"},Dt=function(Tr){return ir(Tr)==="number"},lr=function(Tr){return ir(Tr)==="array"},sr=function(Tr){return Tr===void 0},er=function(Tr,Pr){var _r=this,Mr=!1;this.name=Pr,this.getIndexedDB=function(){return Tr},this.add=function(Er){if(Mr)throw"Database has been closed";for(var xr=[],vr=0,Ir=0;Ir<arguments.length-1;Ir++)if(L(arguments[Ir+1]))for(var Or=0;Or<arguments[Ir+1].length;Or++)xr[vr]=arguments[Ir+1][Or],vr++;else xr[vr]=arguments[Ir+1],vr++;var Cr=Tr.transaction(Er,_e),yr=Cr.objectStore(Er);return new i(function(fr,Sr){V(xr).call(xr,function(Br){var $r;if(Br.item&&Br.key){var Lr=Br.key;Br=Br.item,$r=yr.add(Br,Lr)}else $r=yr.add(Br);$r.onsuccess=function(Gr){var qr=Gr.target,Yr=qr.source.keyPath;Yr===null&&(Yr="__id__"),z(Br,Yr,{value:qr.result,enumerable:!0})}}),Cr.oncomplete=function(){fr(xr,_r)},Cr.onerror=function(Br){Br.preventDefault(),Sr(Br)},Cr.onabort=function(Br){Sr(Br)}})},this.updateAndDelete=function(Er,xr,vr){if(Mr)throw"Database has been closed";var Ir=Tr.transaction(Er,_e),Or=Ir.objectStore(Er),Cr=Or.keyPath;return new i(function(yr,fr){V(xr).call(xr,function(Sr){if(Sr.item&&Sr.key){var Br=Sr.key;Sr=Sr.item,Or.put(Sr,Br)}else Or.put(Sr)}),V(vr).call(vr,function(Sr){Or.delete(Sr[Cr])}),Ir.oncomplete=function(){yr([xr,vr])},Ir.onerror=function(Sr){fr(Sr)}})},this.update=function(Er){if(Mr)throw"Database has been closed";for(var xr,vr=[],Ir=1;Ir<arguments.length;Ir++)L(xr=arguments[Ir])?vr=re(vr).call(vr,xr):vr.push(xr);var Or=Tr.transaction(Er,_e),Cr=Or.objectStore(Er);return Cr.keyPath,new i(function(yr,fr){V(vr).call(vr,function(Sr){var Br;if(Sr.item&&Sr.key){var $r=Sr.key;Sr=Sr.item,Br=Cr.put(Sr,$r)}else Br=Cr.put(Sr);Br.onsuccess=function(Lr){},Br.onerror=function(Lr){}}),Or.oncomplete=function(){yr(vr,_r)},Or.onerror=function(Sr){fr(Sr)},Or.onabort=function(Sr){fr(Sr)}})},this.remove=function(Er,xr,vr,Ir,Or,Cr,yr){if(Mr)throw"Database has been closed";var fr=Tr.transaction(Er,_e),Sr=fr.objectStore(Er);return new i(function(Br,$r){function Lr(qr){return qr==null}var Gr;Lr(Ir)&&(Ir=-1/0),Lr(Or)&&(Or=1/0),xr===null||L(xr)||(xr=[xr]),Lr(vr)?xr!==null?V(xr).call(xr,function(qr){Sr.delete(qr)}):Sr.delete(range=Ue.bound(Ir,Or,Cr,yr)):(Gr=xr!==null?Ue.only(xr[0]):Ue.bound(Ir,Or,Cr,yr),Sr.index(vr).openCursor(Gr).onsuccess=function(qr){var Yr=qr.target.result;Yr&&(Yr.delete(),Yr.continue())}),fr.oncomplete=function(){Br()},fr.onerror=function(qr){$r(qr)},fr.onabort=function(qr){$r(qr)}})},this.clear=function(Er){if(Mr)throw"Database has been closed";var xr=Tr.transaction(Er,_e);return xr.objectStore(Er).clear(),new i(function(vr,Ir){xr.oncomplete=function(){vr()},xr.onerror=function(Or){Ir(Or)}})},this.close=function(){Mr||(Tr.close(),Mr=!0,delete hr[Pr])},this.get=function(Er,xr){if(Mr)throw"Database has been closed";var vr=Tr.transaction(Er),Ir=vr.objectStore(Er).get(xr);return new i(function(Or,Cr){Ir.onsuccess=function(yr){Or(yr.target.result)},vr.onerror=function(yr){Cr(yr)}})},this.query=function(Er,xr){if(Mr)throw"Database has been closed";return new cr(Er,Tr,xr)},this.count=function(Er,xr){if(Mr)throw"Database has been closed";Tr.transaction(Er).objectStore(Er)};for(var rr=0,kr=Tr.objectStoreNames.length;rr<kr;rr++)(function(Er){for(var xr in _r[Er]={},_r)Ve.call(_r,xr)&&xr!=="close"&&(_r[Er][xr]=function(vr){return function(){var Ir,Or=re(Ir=[Er]).call(Ir,$([]).call(arguments,0));return _r[vr].apply(_r,Or)}}(xr))})(Tr.objectStoreNames[rr])},cr=function(Tr,Pr,_r){var Mr,rr=this,kr=!1,Er=!1,xr=function(Ir,Or,Cr,yr,fr,Sr,Br){return new i(function($r,Lr){var Gr=kr||Er?_e:de,qr=Pr.transaction(Tr,Gr),Yr=qr.objectStore(Tr),bn=_r?Yr.index(_r):Yr,wn=Ir?Ue[Ir].apply(null,Or):null,Xr=[],qn=[wn],Zr=0;fr=fr||null,Sr=Sr||[],Cr!=="count"&&qn.push(yr||"next");var Nn=!!kr&&ie(kr);bn[Cr].apply(bn,qn).onsuccess=function(Qr){var Mn=Qr.target.result;if(y(Mn)===y(0))Xr=Mn;else if(Mn){if(fr!==null&&fr[0]>Zr)Zr=fr[0],Mn.advance(fr[0]);else if(!(fr!==null&&Zr>=fr[0]+fr[1])){var Ln=!0,xn="value"in Mn?Mn.value:Mn.key;V(Sr).call(Sr,function(Pn){Pn&&Pn.length&&(Pn.length===2?Ln=Ln&&xn[Pn[0]]===Pn[1]:ur(Pn[0])&&(Ln=Ln&&Pn[0].apply(void 0,[xn])))}),Ln&&(Zr++,Xr.push(Br(xn)),Er?Mn.delete():kr&&(xn=function(Pn){for(var vn=0;vn<Nn.length;vn++){var hn=Nn[vn],Zn=kr[hn];Zn instanceof Function&&(Zn=Zn(Pn)),Pn[hn]=Zn}return Pn}(xn),Mn.update(xn))),Mn.continue()}}},qr.oncomplete=function(){$r(Xr)},qr.onerror=function(Qr){Lr(Qr)},qr.onabort=function(Qr){Lr(Qr)}})},vr=function(Ir,Or){var Cr="next",yr="openCursor",fr=[],Sr=null,Br=Et,$r=!1,Lr=function(){return xr(Ir,Or,yr,$r?Cr+"unique":Cr,Sr,fr,Br)},Gr=function(){return Cr=null,yr="count",{execute:Lr}},qr=function Mn(){return(Sr=lr(arguments[0])?arguments[0]:$(Array.prototype).call(arguments,0,2)).length==1&&Sr.unshift(0),Dt(Sr[1])||(Sr=null),{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Xr,distinct:qn,modify:Zr,limit:Mn,map:Nn,remove:Qr}},Yr=function Mn(Ln){return(Ln=!!sr(Ln)||!!Ln)&&(yr="openKeyCursor"),{execute:Lr,keys:Mn,filter:bn,asc:wn,desc:Xr,distinct:qn,modify:Zr,limit:qr,map:Nn,remove:Qr}},bn=function Mn(){return fr.push($(Array.prototype).call(arguments,0,2)),{execute:Lr,count:Gr,keys:Yr,filter:Mn,asc:wn,desc:Xr,distinct:qn,modify:Zr,limit:qr,map:Nn,remove:Qr}},wn=function Mn(Ln){return Ln=!!sr(Ln)||!!Ln,Cr=Ln?"next":"prev",{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:Mn,desc:Xr,distinct:qn,modify:Zr,limit:qr,map:Nn,remove:Qr}},Xr=function Mn(Ln){return Ln=!!sr(Ln)||!!Ln,Cr=Ln?"prev":"next",{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Mn,distinct:qn,modify:Zr,limit:qr,map:Nn,remove:Qr}},qn=function Mn(Ln){return Ln=!!sr(Ln)||!!Ln,$r=Ln,{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Xr,distinct:Mn,modify:Zr,limit:qr,map:Nn,remove:Qr}},Zr=function Mn(Ln){return kr=Ln,{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Xr,distinct:qn,modify:Mn,limit:qr,map:Nn,remove:Qr}},Nn=function Mn(Ln){return ur(Ln)&&(Br=Ln),{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Xr,distinct:qn,modify:Zr,limit:qr,map:Mn,remove:Qr}},Qr=function Mn(Ln){return Ln=!!sr(Ln)||!!Ln,Er=Ln,{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Xr,distinct:qn,modify:Zr,limit:qr,map:Nn,remove:Mn}};return{execute:Lr,count:Gr,keys:Yr,filter:bn,asc:wn,desc:Xr,distinct:qn,modify:Zr,limit:qr,map:Nn,remove:Qr}};V(Mr="only bound upperBound lowerBound".split(" ")).call(Mr,function(Ir){rr[Ir]=function(){return new vr(Ir,arguments)}}),this.filter=function(){var Ir=new vr(null,null);return ue(Ir).apply(Ir,arguments)},this.all=function(){var Ir;return ue(Ir=this).call(Ir)}},or=function(Tr,Pr,_r,Mr){var rr=Tr.target.result,kr=new er(rr,Pr);return hr[Pr]=rr,i.resolve(kr)},hr={},pr={version:"0.10.2",open:function(Tr){var Pr;return new i(function(_r,Mr){var rr;hr[Tr.server]?or({target:{result:hr[Tr.server]}},Tr.server,Tr.version,Tr.schema).then(_r,Mr):(Lt?i.resolve():jt&&$e().databases?new i(function(kr){var Er=function(){return $e().databases().finally(kr)};rr=k(Er,100),Er()}).finally(function(){Lt=!0,clearInterval(rr)}):(Lt=!0,i.resolve())).then(function(){try{Pr=$e().open(Tr.server,Tr.version)}catch(kr){Mr(kr)}Pr.onsuccess=function(kr){or(kr,Tr.server,Tr.version,Tr.schema).then(_r,Mr)},Pr.onupgradeneeded=function(kr){(function(Er,xr,vr){for(var Ir in typeof xr=="function"&&(xr=xr()),xr){var Or,Cr=xr[Ir];for(var yr in Or=!Ve.call(xr,Ir)||vr.objectStoreNames.contains(Ir)?Er.currentTarget.transaction.objectStore(Ir):vr.createObjectStore(Ir,Cr.key),Cr.indexes){var fr=Cr.indexes[yr];try{Or.index(yr)}catch{Or.createIndex(yr,fr.key||yr,ie(fr).length?fr:{unique:!1})}}}})(kr,Tr.schema,kr.target.result)},Pr.onerror=function(kr){Mr(kr)}})})},remove:function(Tr){return new i(function(Pr,_r){if(!Tr)return Pr();var Mr,rr;y(Tr)===er&&(Tr=Tr.name),typeof Tr=="string"&&(Mr=hr[Tr]),Mr&&typeof Mr.close=="function"&&Mr.close();try{rr=$e().deleteDatabase(Tr)}catch(kr){_r(kr)}rr.onsuccess=function(kr){delete hr[Tr],Pr(Tr)},rr.onerror=function(kr){_r(kr)},rr.onblocked=function(kr){_r(kr)}})}};t.exports!==void 0?t.exports=pr:(g=(function(){return pr}).call(r,e,r,t))===void 0||(t.exports=g)})(void 0)}).call(this,e(73))},function(t,r,e){var n=e(590);t.exports=n},function(t,r,e){t.exports=e(643)},function(t,r){var e={set:function(n,g,y){e[n]=g,y&&(y.support=g)}};t.exports=e},function(t,r,e){var n=e(4),g=e(2),y=e(26),i=e(0),k=i.notundef,$=i.fillPropertyWithDefault,L=n,V={},z={},re={},ie=[],ue={normal:0,advanced:1},le={manager:0,all:1};V.inviteMode=V.updateCustomMode=V.updateTeamMode=le;var oe={0:"normal",1:"advanced"},ae=V.joinMode={noVerify:0,needVerify:1,rejectAll:2};z.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},re.joinMode=L(ae),ie.push("join");var Ue=V.beInviteMode={needVerify:0,noVerify:1};function de(Ve){var $e;i.verifyOptions(Ve,"action","superTeam::SuperTeam"),i.verifyOptions(Ve,"teamId","superTeam::SuperTeam"),k(Ve.teamId)&&(this.teamId=Ve.teamId),k(Ve.type)&&(this.type=ue[Ve.type]),k(Ve.avatar)&&(this.avatar=""+Ve.avatar),k(Ve.name)&&(this.name=""+Ve.name),k(Ve.intro)&&(this.intro=""+Ve.intro),k(Ve.announcement)&&(this.announcement=""+Ve.announcement),k(Ve.custom)&&(this.custom=""+Ve.custom),k(Ve.inviteMode)&&(this.inviteMode=le[Ve.inviteMode]),k(Ve.updateCustomMode)&&(this.updateCustomMode=le[Ve.updateCustomMode]),k(Ve.updateTeamMode)&&(this.updateTeamMode=le[Ve.updateTeamMode]),g(ie).call(ie,y($e=this.setMode).call($e,this,Ve))}function _e(Ve,$e){k(Ve[$e+="Mode"])&&(Ve[$e]=z[$e][Ve[$e]])}z.beInviteMode={0:"needVerify",1:"noVerify"},ie.push("beInvite"),z.inviteMode=z.updateCustomMode=z.updateTeamMode={0:"manager",1:"all"},ie.push("invite"),ie.push("updateCustom"),ie.push("updateTeam"),re.inviteMode=re.updateCustomMode=re.updateTeamMode=L(le),re.beInviteMode=L(Ue),de.prototype.setMode=function(Ve,$e){k(Ve[$e+="Mode"])&&(i.verifyParamValid($e,Ve[$e],re[$e],"Superteam::Team"),this[$e]=V[$e][Ve[$e]])},de.reverse=function(Ve,$e){var Lt=i.copy(Ve);if(k(Lt.teamId)&&(Lt.teamId=""+Lt.teamId),k(Lt.type)&&(Lt.type=oe[Lt.type]),k(Lt.level)&&(Lt.level=+Lt.level),k(Lt.valid)&&(Lt.valid=+Lt.valid==1),k(Lt.memberNum)&&(Lt.memberNum=+Lt.memberNum),k(Lt.memberUpdateTime)&&(Lt.memberUpdateTime=+Lt.memberUpdateTime),k(Lt.createTime)&&(Lt.createTime=+Lt.createTime),k(Lt.updateTime)&&(Lt.updateTime=+Lt.updateTime),k(Lt.validToCurrentUser)&&(Lt.validToCurrentUser=Lt.validToCurrentUser==="1"),k(Lt.mute)&&(Lt.mute=Lt.mute==="1"),k(Lt.muteType))switch(Lt.muteType){case"0":Lt.mute=!1,Lt.muteType="none";break;case"1":Lt.mute=!0,Lt.muteType="normal";break;case"3":Lt.mute=!0,Lt.muteType="all"}else k(Lt.mute)&&(Lt.mute===1?(Lt.mute=!0,Lt.muteType="normal"):(Lt.mute=!1,Lt.muteType="none"));return g(ie).call(ie,y(_e).call(_e,null,Lt)),delete Lt.bits,$e||de.fillProperties(Lt),Lt},de.fillProperties=function(Ve){return $(Ve,"avatar","")},t.exports=de},function(t,r,e){t.exports=e(666)},function(t,r,e){var n=e(0).notundef;function g(y){n(y.shouldPushNotificationWhenPCOnline)&&(this.open=y.shouldPushNotificationWhenPCOnline?2:1)}g.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},g.reverse=function(y){return{shouldPushNotificationWhenPCOnline:+y.open!=1}},t.exports=g},function(t,r,e){var n=e(64),g=e(760),y=e(289),i=e(256),k=e(200),$=e(0),L=e(307),V=e(285),z=e(186),re=e(765),ie=e(766);t.exports=function(ue){$.merge(ue,{platform:n,xhr:g,io:y,naturalSort:i,deepAccess:k,util:$,support:L,blob:V,ajax:z,LoggerPlugin:re,usePlugin:ie})}},function(t,r,e){var n=e(9),g=e(10),y=e(4),i=e(108).genPrivateUrl,k=e(0),$=k.notundef,L={"-2":"unset","-1":"restricted",0:"common",1:"owner",2:"manager",3:"guest",4:"anonymous"};function V(z){$(z.nick)&&(this.nick=""+z.nick),$(z.avatar)&&(this.avatar=""+z.avatar),$(z.custom)&&(this.custom=""+z.custom)}V.reverse=function(z){var re=k.copy(z);return $(re.chatroomId)&&(re.chatroomId=""+re.chatroomId),$(re.avatar)&&(re.avatar=i(re.avatar)),$(re.type)&&(re.type=L[re.type]),$(re.level)&&(re.level=+re.level),$(re.online)&&(re.online=+re.online==1),$(re.enterTime)&&(re.enterTime=+re.enterTime),$(re.guest)&&(re.guest=+re.guest==1),$(re.blacked)&&(re.blacked=+re.blacked==1),$(re.gaged)&&(re.gaged=+re.gaged==1),$(re.valid)&&(re.valid=+re.valid==1),$(re.updateTime)&&(re.updateTime=+re.updateTime),$(re.tempMuted)?re.tempMuted=+re.tempMuted==1:re.tempMuted=!1,$(re.tempMuteDuration)?re.tempMuteDuration=+re.tempMuteDuration:re.tempMuteDuration=0,re.online||delete re.enterTime,re.guest&&(re.type="guest",delete re.valid),re.type!=="common"&&delete re.level,delete re.guest,re},V.reverseMembers=function(z){return n(z).call(z,function(re){return g(V).call(V,re)})},V.validTypes=y(L),V.typeReverseMap=L,t.exports=V},function(t,r,e){var n,g,y,i,k,$,L,V,z,re,ie,ue,le,oe,ae,Ue,de,_e,Ve;t.exports=(n=e(94),e(769),void(n.lib.Cipher||(g=n,y=g.lib,i=y.Base,k=y.WordArray,$=y.BufferedBlockAlgorithm,L=g.enc,L.Utf8,V=L.Base64,z=g.algo.EvpKDF,re=y.Cipher=$.extend({cfg:i.extend(),createEncryptor:function($e,Lt){return this.create(this._ENC_XFORM_MODE,$e,Lt)},createDecryptor:function($e,Lt){return this.create(this._DEC_XFORM_MODE,$e,Lt)},init:function($e,Lt,jt){this.cfg=this.cfg.extend(jt),this._xformMode=$e,this._key=Lt,this.reset()},reset:function(){$.reset.call(this),this._doReset()},process:function($e){return this._append($e),this._process()},finalize:function($e){return $e&&this._append($e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function $e(Lt){return typeof Lt=="string"?Ve:de}return function(Lt){return{encrypt:function(jt,Et,ir){return $e(Et).encrypt(Lt,jt,Et,ir)},decrypt:function(jt,Et,ir){return $e(Et).decrypt(Lt,jt,Et,ir)}}}}()}),y.StreamCipher=re.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),ie=g.mode={},ue=y.BlockCipherMode=i.extend({createEncryptor:function($e,Lt){return this.Encryptor.create($e,Lt)},createDecryptor:function($e,Lt){return this.Decryptor.create($e,Lt)},init:function($e,Lt){this._cipher=$e,this._iv=Lt}}),le=ie.CBC=function(){var $e=ue.extend();function Lt(jt,Et,ir){var ur,Dt=this._iv;Dt?(ur=Dt,this._iv=void 0):ur=this._prevBlock;for(var lr=0;lr<ir;lr++)jt[Et+lr]^=ur[lr]}return $e.Encryptor=$e.extend({processBlock:function(jt,Et){var ir=this._cipher,ur=ir.blockSize;Lt.call(this,jt,Et,ur),ir.encryptBlock(jt,Et),this._prevBlock=jt.slice(Et,Et+ur)}}),$e.Decryptor=$e.extend({processBlock:function(jt,Et){var ir=this._cipher,ur=ir.blockSize,Dt=jt.slice(Et,Et+ur);ir.decryptBlock(jt,Et),Lt.call(this,jt,Et,ur),this._prevBlock=Dt}}),$e}(),oe=(g.pad={}).Pkcs7={pad:function($e,Lt){for(var jt=4*Lt,Et=jt-$e.sigBytes%jt,ir=Et<<24|Et<<16|Et<<8|Et,ur=[],Dt=0;Dt<Et;Dt+=4)ur.push(ir);var lr=k.create(ur,Et);$e.concat(lr)},unpad:function($e){var Lt=255&$e.words[$e.sigBytes-1>>>2];$e.sigBytes-=Lt}},y.BlockCipher=re.extend({cfg:re.cfg.extend({mode:le,padding:oe}),reset:function(){var $e;re.reset.call(this);var Lt=this.cfg,jt=Lt.iv,Et=Lt.mode;this._xformMode==this._ENC_XFORM_MODE?$e=Et.createEncryptor:($e=Et.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$e?this._mode.init(this,jt&&jt.words):(this._mode=$e.call(Et,this,jt&&jt.words),this._mode.__creator=$e)},_doProcessBlock:function($e,Lt){this._mode.processBlock($e,Lt)},_doFinalize:function(){var $e,Lt=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Lt.pad(this._data,this.blockSize),$e=this._process(!0)):($e=this._process(!0),Lt.unpad($e)),$e},blockSize:4}),ae=y.CipherParams=i.extend({init:function($e){this.mixIn($e)},toString:function($e){return($e||this.formatter).stringify(this)}}),Ue=(g.format={}).OpenSSL={stringify:function($e){var Lt=$e.ciphertext,jt=$e.salt;return(jt?k.create([1398893684,1701076831]).concat(jt).concat(Lt):Lt).toString(V)},parse:function($e){var Lt,jt=V.parse($e),Et=jt.words;return Et[0]==1398893684&&Et[1]==1701076831&&(Lt=k.create(Et.slice(2,4)),Et.splice(0,4),jt.sigBytes-=16),ae.create({ciphertext:jt,salt:Lt})}},de=y.SerializableCipher=i.extend({cfg:i.extend({format:Ue}),encrypt:function($e,Lt,jt,Et){Et=this.cfg.extend(Et);var ir=$e.createEncryptor(jt,Et),ur=ir.finalize(Lt),Dt=ir.cfg;return ae.create({ciphertext:ur,key:jt,iv:Dt.iv,algorithm:$e,mode:Dt.mode,padding:Dt.padding,blockSize:$e.blockSize,formatter:Et.format})},decrypt:function($e,Lt,jt,Et){return Et=this.cfg.extend(Et),Lt=this._parse(Lt,Et.format),$e.createDecryptor(jt,Et).finalize(Lt.ciphertext)},_parse:function($e,Lt){return typeof $e=="string"?Lt.parse($e,this):$e}}),_e=(g.kdf={}).OpenSSL={execute:function($e,Lt,jt,Et){Et||(Et=k.random(8));var ir=z.create({keySize:Lt+jt}).compute($e,Et),ur=k.create(ir.words.slice(Lt),4*jt);return ir.sigBytes=4*Lt,ae.create({key:ir,iv:ur,salt:Et})}},Ve=y.PasswordBasedCipher=de.extend({cfg:de.cfg.extend({kdf:_e}),encrypt:function($e,Lt,jt,Et){var ir=(Et=this.cfg.extend(Et)).kdf.execute(jt,$e.keySize,$e.ivSize);Et.iv=ir.iv;var ur=de.encrypt.call(this,$e,Lt,ir.key,Et);return ur.mixIn(ir),ur},decrypt:function($e,Lt,jt,Et){Et=this.cfg.extend(Et),Lt=this._parse(Lt,Et.format);var ir=Et.kdf.execute(jt,$e.keySize,$e.ivSize,Lt.salt);return Et.iv=ir.iv,de.decrypt.call(this,$e,Lt,ir.key,Et)}}))))},function(t,r,e){t.exports=e(284)},function(t,r,e){var n=e(19),g=e(316),y=Array.prototype;t.exports=function(i){var k=i.indexOf;return i===y||n(y,i)&&k===y.indexOf?g:k}},function(t,r,e){e(317);var n=e(29);t.exports=n("Array").indexOf},function(t,r,e){var n=e(1),g=e(159),y=e(163).indexOf,i=e(82),k=g([].indexOf),$=!!k&&1/k([1],1,-0)<0,L=i("indexOf");n({target:"Array",proto:!0,forced:$||!L},{indexOf:function(V){var z=arguments.length>1?arguments[1]:void 0;return $?k(this,V,z)||0:y(this,V,z)}})},function(t,r,e){var n=e(20),g=e(28),y=e(129),i=e(160),k=e(319),$=e(21),L=TypeError,V=$("toPrimitive");t.exports=function(z,re){if(!g(z)||y(z))return z;var ie,ue=i(z,V);if(ue){if(re===void 0&&(re="default"),ie=n(ue,z,re),!g(ie)||y(ie))return ie;throw L("Can't convert object to primitive value")}return re===void 0&&(re="number"),k(z,re)}},function(t,r,e){var n=e(20),g=e(17),y=e(28),i=TypeError;t.exports=function(k,$){var L,V;if($==="string"&&g(L=k.toString)&&!y(V=n(L,k))||g(L=k.valueOf)&&!y(V=n(L,k))||$!=="string"&&g(L=k.toString)&&!y(V=n(L,k)))return V;throw i("Can't convert object to primitive value")}},function(t,r,e){var n=e(14),g=Object.defineProperty;t.exports=function(y,i){try{g(n,y,{value:i,configurable:!0,writable:!0})}catch{n[y]=i}return i}},function(t,r){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(g){var y=+g;return(y>0?n:e)(y)}},function(t,r,e){var n=e(112),g=Math.min;t.exports=function(y){return y>0?g(n(y),9007199254740991):0}},function(t,r,e){var n=e(324);t.exports=n},function(t,r,e){var n=e(19),g=e(325),y=Array.prototype;t.exports=function(i){var k=i.concat;return i===y||n(y,i)&&k===y.concat?g:k}},function(t,r,e){e(213);var n=e(29);t.exports=n("Array").concat},function(t,r,e){var n=e(83),g=e(132),y=e(28),i=e(21)("species"),k=Array;t.exports=function($){var L;return n($)&&(L=$.constructor,(g(L)&&(L===k||n(L.prototype))||y(L)&&(L=L[i])===null)&&(L=void 0)),L===void 0?k:L}},function(t,r,e){e(328);var n=e(13).Object;t.exports=function(g,y){return n.create(g,y)}},function(t,r,e){e(1)({target:"Object",stat:!0,sham:!e(27)},{create:e(84)})},function(t,r,e){t.exports=e(330)},function(t,r,e){var n=e(331);e(358),e(359),e(360),e(361),e(362),e(363),e(364),t.exports=n},function(t,r,e){var n=e(219);e(357),t.exports=n},function(t,r,e){e(213),e(100),e(220),e(339),e(340),e(341),e(342),e(225),e(343),e(344),e(345),e(346),e(347),e(348),e(226),e(349),e(350),e(351),e(352),e(353);var n=e(13);t.exports=n.Symbol},function(t,r,e){var n=e(1),g=e(14),y=e(20),i=e(12),k=e(49),$=e(27),L=e(97),V=e(5),z=e(30),re=e(19),ie=e(36),ue=e(44),le=e(128),oe=e(50),ae=e(80),Ue=e(84),de=e(120),_e=e(134),Ve=e(168),$e=e(135),Lt=e(95),jt=e(39),Et=e(166),ir=e(150),ur=e(68),Dt=e(111),lr=e(133),sr=e(114),er=e(130),cr=e(21),or=e(136),hr=e(23),pr=e(222),Tr=e(85),Pr=e(101),_r=e(74).forEach,Mr=lr("hidden"),rr=Pr.set,kr=Pr.getterFor("Symbol"),Er=Object.prototype,xr=g.Symbol,vr=xr&&xr.prototype,Ir=g.TypeError,Or=g.QObject,Cr=Lt.f,yr=jt.f,fr=Ve.f,Sr=ir.f,Br=i([].push),$r=Dt("symbols"),Lr=Dt("op-symbols"),Gr=Dt("wks"),qr=!Or||!Or.prototype||!Or.prototype.findChild,Yr=$&&V(function(){return Ue(yr({},"a",{get:function(){return yr(this,"a",{value:7}).a}})).a!=7})?function(Mn,Ln,xn){var Pn=Cr(Er,Ln);Pn&&delete Er[Ln],yr(Mn,Ln,xn),Pn&&Mn!==Er&&yr(Er,Ln,Pn)}:yr,bn=function(Mn,Ln){var xn=$r[Mn]=Ue(vr);return rr(xn,{type:"Symbol",tag:Mn,description:Ln}),$||(xn.description=Ln),xn},wn=function(Mn,Ln,xn){Mn===Er&&wn(Lr,Ln,xn),ie(Mn);var Pn=le(Ln);return ie(xn),z($r,Pn)?(xn.enumerable?(z(Mn,Mr)&&Mn[Mr][Pn]&&(Mn[Mr][Pn]=!1),xn=Ue(xn,{enumerable:ae(0,!1)})):(z(Mn,Mr)||yr(Mn,Mr,ae(1,{})),Mn[Mr][Pn]=!0),Yr(Mn,Pn,xn)):yr(Mn,Pn,xn)},Xr=function(Mn,Ln){ie(Mn);var xn=ue(Ln),Pn=de(xn).concat(Qr(xn));return _r(Pn,function(vn){$&&!y(qn,xn,vn)||wn(Mn,vn,xn[vn])}),Mn},qn=function(Mn){var Ln=le(Mn),xn=y(Sr,this,Ln);return!(this===Er&&z($r,Ln)&&!z(Lr,Ln))&&(!(xn||!z(this,Ln)||!z($r,Ln)||z(this,Mr)&&this[Mr][Ln])||xn)},Zr=function(Mn,Ln){var xn=ue(Mn),Pn=le(Ln);if(xn!==Er||!z($r,Pn)||z(Lr,Pn)){var vn=Cr(xn,Pn);return!vn||!z($r,Pn)||z(xn,Mr)&&xn[Mr][Pn]||(vn.enumerable=!0),vn}},Nn=function(Mn){var Ln=fr(ue(Mn)),xn=[];return _r(Ln,function(Pn){z($r,Pn)||z(sr,Pn)||Br(xn,Pn)}),xn},Qr=function(Mn){var Ln=Mn===Er,xn=fr(Ln?Lr:ue(Mn)),Pn=[];return _r(xn,function(vn){!z($r,vn)||Ln&&!z(Er,vn)||Br(Pn,$r[vn])}),Pn};L||(ur(vr=(xr=function(){if(re(vr,this))throw Ir("Symbol is not a constructor");var Mn=arguments.length&&arguments[0]!==void 0?oe(arguments[0]):void 0,Ln=er(Mn),xn=function(Pn){this===Er&&y(xn,Lr,Pn),z(this,Mr)&&z(this[Mr],Ln)&&(this[Mr][Ln]=!1),Yr(this,Ln,ae(1,Pn))};return $&&qr&&Yr(Er,Ln,{configurable:!0,set:xn}),bn(Ln,Mn)}).prototype,"toString",function(){return kr(this).tag}),ur(xr,"withoutSetter",function(Mn){return bn(er(Mn),Mn)}),ir.f=qn,jt.f=wn,Et.f=Xr,Lt.f=Zr,_e.f=Ve.f=Nn,$e.f=Qr,or.f=function(Mn){return bn(cr(Mn),Mn)},$&&(yr(vr,"description",{configurable:!0,get:function(){return kr(this).description}}),k||ur(Er,"propertyIsEnumerable",qn,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!L,sham:!L},{Symbol:xr}),_r(de(Gr),function(Mn){hr(Mn)}),n({target:"Symbol",stat:!0,forced:!L},{useSetter:function(){qr=!0},useSimple:function(){qr=!1}}),n({target:"Object",stat:!0,forced:!L,sham:!$},{create:function(Mn,Ln){return Ln===void 0?Ue(Mn):Xr(Ue(Mn),Ln)},defineProperty:wn,defineProperties:Xr,getOwnPropertyDescriptor:Zr}),n({target:"Object",stat:!0,forced:!L},{getOwnPropertyNames:Nn}),pr(),Tr(xr,"Symbol"),sr[Mr]=!0},function(t,r,e){var n=e(165),g=e(67);t.exports=n?{}.toString:function(){return"[object "+g(this)+"]"}},function(t,r,e){var n=e(14),g=e(17),y=n.WeakMap;t.exports=g(y)&&/native code/.test(String(y))},function(t,r,e){var n=e(1),g=e(33),y=e(30),i=e(50),k=e(111),$=e(223),L=k("string-to-symbol-registry"),V=k("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!$},{for:function(z){var re=i(z);if(y(L,re))return L[re];var ie=g("Symbol")(re);return L[re]=ie,V[ie]=re,ie}})},function(t,r,e){var n=e(1),g=e(30),y=e(129),i=e(81),k=e(111),$=e(223),L=k("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!$},{keyFor:function(V){if(!y(V))throw TypeError(i(V)+" is not a symbol");if(g(L,V))return L[V]}})},function(t,r,e){var n=e(1),g=e(97),y=e(5),i=e(135),k=e(42);n({target:"Object",stat:!0,forced:!g||y(function(){i.f(1)})},{getOwnPropertySymbols:function($){var L=i.f;return L?L(k($)):[]}})},function(t,r,e){e(23)("asyncIterator")},function(t,r){},function(t,r,e){e(23)("hasInstance")},function(t,r,e){e(23)("isConcatSpreadable")},function(t,r,e){e(23)("match")},function(t,r,e){e(23)("matchAll")},function(t,r,e){e(23)("replace")},function(t,r,e){e(23)("search")},function(t,r,e){e(23)("species")},function(t,r,e){e(23)("split")},function(t,r,e){var n=e(33),g=e(23),y=e(85);g("toStringTag"),y(n("Symbol"),"Symbol")},function(t,r,e){e(23)("unscopables")},function(t,r,e){var n=e(14);e(85)(n.JSON,"JSON",!0)},function(t,r){},function(t,r){},function(t,r,e){var n=e(228).IteratorPrototype,g=e(84),y=e(80),i=e(85),k=e(103),$=function(){return this};t.exports=function(L,V,z,re){var ie=V+" Iterator";return L.prototype=g(n,{next:y(+!re,z)}),i(L,ie,!1,!0),k[ie]=$,L}},function(t,r,e){var n=e(17),g=String,y=TypeError;t.exports=function(i){if(typeof i=="object"||n(i))return i;throw y("Can't set "+g(i)+" as a prototype")}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,e){e(23)("dispose")},function(t,r,e){e(23)("asyncDispose")},function(t,r,e){e(23)("matcher")},function(t,r,e){e(23)("metadataKey")},function(t,r,e){e(23)("observable")},function(t,r,e){e(23)("metadata")},function(t,r,e){e(23)("patternMatch")},function(t,r,e){e(23)("replaceAll")},function(t,r,e){t.exports=e(366)},function(t,r,e){t.exports=e(367)},function(t,r,e){var n=e(368);t.exports=n},function(t,r,e){var n=e(369);t.exports=n},function(t,r,e){var n=e(370);e(69),t.exports=n},function(t,r,e){e(86),e(100),e(115),e(225);var n=e(136);t.exports=n.f("iterator")},function(t,r,e){var n=e(12),g=e(112),y=e(50),i=e(110),k=n("".charAt),$=n("".charCodeAt),L=n("".slice),V=function(z){return function(re,ie){var ue,le,oe=y(i(re)),ae=g(ie),Ue=oe.length;return ae<0||ae>=Ue?z?"":void 0:(ue=$(oe,ae))<55296||ue>56319||ae+1===Ue||(le=$(oe,ae+1))<56320||le>57343?z?k(oe,ae):ue:z?L(oe,ae,ae+2):le-56320+(ue-55296<<10)+65536}};t.exports={codeAt:V(!1),charAt:V(!0)}},function(t,r,e){e(373);var n=e(13);t.exports=n.Array.isArray},function(t,r,e){e(1)({target:"Array",stat:!0},{isArray:e(83)})},function(t,r,e){var n=e(375);t.exports=n},function(t,r,e){e(376);var n=e(29);t.exports=n("Array").forEach},function(t,r,e){var n=e(1),g=e(377);n({target:"Array",proto:!0,forced:[].forEach!=g},{forEach:g})},function(t,r,e){var n=e(74).forEach,g=e(82)("forEach");t.exports=g?[].forEach:function(y){return n(this,y,arguments.length>1?arguments[1]:void 0)}},function(t,r,e){t.exports=e(379)},function(t,r,e){var n=e(380);t.exports=n},function(t,r,e){e(381);var n=e(13).Object;t.exports=function(g){return n.getOwnPropertyNames(g)}},function(t,r,e){var n=e(1),g=e(5),y=e(168).f;n({target:"Object",stat:!0,forced:g(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:y})},function(t,r,e){e(383);var n=e(13);t.exports=n.Object.keys},function(t,r,e){var n=e(1),g=e(42),y=e(120);n({target:"Object",stat:!0,forced:e(5)(function(){y(1)})},{keys:function(i){return y(g(i))}})},function(t,r,e){var n=e(385);t.exports=n},function(t,r,e){e(224);var n=e(13),g=e(79);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(y,i,k){return g(n.JSON.stringify,null,arguments)}},function(t,r,e){e(233),e(86),e(100),e(393),e(247),e(248),e(406),e(115);var n=e(13);t.exports=n.Promise},function(t,r,e){var n=e(1),g=e(19),y=e(137),i=e(138),k=e(388),$=e(84),L=e(61),V=e(80),z=e(389),re=e(390),ie=e(47),ue=e(391),le=e(21),oe=e(392),ae=le("toStringTag"),Ue=Error,de=[].push,_e=function($e,Lt){var jt,Et=arguments.length>2?arguments[2]:void 0,ir=g(Ve,this);i?jt=i(Ue(),ir?y(this):Ve):(jt=ir?this:$(Ve),L(jt,ae,"Error")),Lt!==void 0&&L(jt,"message",ue(Lt)),oe&&L(jt,"stack",z(jt.stack,1)),re(jt,Et);var ur=[];return ie($e,de,{that:ur}),L(jt,"errors",ur),jt};i?i(_e,Ue):k(_e,Ue,{name:!0});var Ve=_e.prototype=$(Ue.prototype,{constructor:V(1,_e),message:V(1,""),name:V(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:_e})},function(t,r,e){var n=e(30),g=e(234),y=e(95),i=e(39);t.exports=function(k,$,L){for(var V=g($),z=i.f,re=y.f,ie=0;ie<V.length;ie++){var ue=V[ie];n(k,ue)||L&&n(L,ue)||z(k,ue,re($,ue))}}},function(t,r,e){var n=e(12),g=Error,y=n("".replace),i=String(g("zxcasd").stack),k=/\n\s*at [^:]*:[^\n]*/,$=k.test(i);t.exports=function(L,V){if($&&typeof L=="string"&&!g.prepareStackTrace)for(;V--;)L=y(L,k,"");return L}},function(t,r,e){var n=e(28),g=e(61);t.exports=function(y,i){n(i)&&"cause"in i&&g(y,"cause",i.cause)}},function(t,r,e){var n=e(50);t.exports=function(g,y){return g===void 0?arguments.length<2?"":y:n(g)}},function(t,r,e){var n=e(5),g=e(80);t.exports=!n(function(){var y=Error("a");return!("stack"in y)||(Object.defineProperty(y,"stack",g(1,7)),y.stack!==7)})},function(t,r,e){e(394),e(401),e(402),e(403),e(404),e(405)},function(t,r,e){var n,g,y,i=e(1),k=e(49),$=e(116),L=e(14),V=e(20),z=e(68),re=e(138),ie=e(85),ue=e(238),le=e(31),oe=e(17),ae=e(28),Ue=e(171),de=e(239),_e=e(240).set,Ve=e(395),$e=e(398),Lt=e(104),jt=e(399),Et=e(101),ir=e(105),ur=e(117),Dt=e(70),lr=ur.CONSTRUCTOR,sr=ur.REJECTION_EVENT,er=ur.SUBCLASSING,cr=Et.getterFor("Promise"),or=Et.set,hr=ir&&ir.prototype,pr=ir,Tr=hr,Pr=L.TypeError,_r=L.document,Mr=L.process,rr=Dt.f,kr=rr,Er=!!(_r&&_r.createEvent&&L.dispatchEvent),xr=function(Lr){var Gr;return!(!ae(Lr)||!oe(Gr=Lr.then))&&Gr},vr=function(Lr,Gr){var qr,Yr,bn,wn=Gr.value,Xr=Gr.state==1,qn=Xr?Lr.ok:Lr.fail,Zr=Lr.resolve,Nn=Lr.reject,Qr=Lr.domain;try{qn?(Xr||(Gr.rejection===2&&fr(Gr),Gr.rejection=1),qn===!0?qr=wn:(Qr&&Qr.enter(),qr=qn(wn),Qr&&(Qr.exit(),bn=!0)),qr===Lr.promise?Nn(Pr("Promise-chain cycle")):(Yr=xr(qr))?V(Yr,qr,Zr,Nn):Zr(qr)):Nn(wn)}catch(Mn){Qr&&!bn&&Qr.exit(),Nn(Mn)}},Ir=function(Lr,Gr){Lr.notified||(Lr.notified=!0,Ve(function(){for(var qr,Yr=Lr.reactions;qr=Yr.get();)vr(qr,Lr);Lr.notified=!1,Gr&&!Lr.rejection&&Cr(Lr)}))},Or=function(Lr,Gr,qr){var Yr,bn;Er?((Yr=_r.createEvent("Event")).promise=Gr,Yr.reason=qr,Yr.initEvent(Lr,!1,!0),L.dispatchEvent(Yr)):Yr={promise:Gr,reason:qr},!sr&&(bn=L["on"+Lr])?bn(Yr):Lr==="unhandledrejection"&&$e("Unhandled promise rejection",qr)},Cr=function(Lr){V(_e,L,function(){var Gr,qr=Lr.facade,Yr=Lr.value;if(yr(Lr)&&(Gr=Lt(function(){$?Mr.emit("unhandledRejection",Yr,qr):Or("unhandledrejection",qr,Yr)}),Lr.rejection=$||yr(Lr)?2:1,Gr.error))throw Gr.value})},yr=function(Lr){return Lr.rejection!==1&&!Lr.parent},fr=function(Lr){V(_e,L,function(){var Gr=Lr.facade;$?Mr.emit("rejectionHandled",Gr):Or("rejectionhandled",Gr,Lr.value)})},Sr=function(Lr,Gr,qr){return function(Yr){Lr(Gr,Yr,qr)}},Br=function(Lr,Gr,qr){Lr.done||(Lr.done=!0,qr&&(Lr=qr),Lr.value=Gr,Lr.state=2,Ir(Lr,!0))},$r=function(Lr,Gr,qr){if(!Lr.done){Lr.done=!0,qr&&(Lr=qr);try{if(Lr.facade===Gr)throw Pr("Promise can't be resolved itself");var Yr=xr(Gr);Yr?Ve(function(){var bn={done:!1};try{V(Yr,Gr,Sr($r,bn,Lr),Sr(Br,bn,Lr))}catch(wn){Br(bn,wn,Lr)}}):(Lr.value=Gr,Lr.state=1,Ir(Lr,!1))}catch(bn){Br({done:!1},bn,Lr)}}};if(lr&&(Tr=(pr=function(Lr){Ue(this,Tr),le(Lr),V(n,this);var Gr=cr(this);try{Lr(Sr($r,Gr),Sr(Br,Gr))}catch(qr){Br(Gr,qr)}}).prototype,(n=function(Lr){or(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new jt,rejection:!1,state:0,value:void 0})}).prototype=z(Tr,"then",function(Lr,Gr){var qr=cr(this),Yr=rr(de(this,pr));return qr.parent=!0,Yr.ok=!oe(Lr)||Lr,Yr.fail=oe(Gr)&&Gr,Yr.domain=$?Mr.domain:void 0,qr.state==0?qr.reactions.add(Yr):Ve(function(){vr(Yr,qr)}),Yr.promise}),g=function(){var Lr=new n,Gr=cr(Lr);this.promise=Lr,this.resolve=Sr($r,Gr),this.reject=Sr(Br,Gr)},Dt.f=rr=function(Lr){return Lr===pr||Lr===void 0?new g(Lr):kr(Lr)},!k&&oe(ir)&&hr!==Object.prototype)){y=hr.then,er||z(hr,"then",function(Lr,Gr){var qr=this;return new pr(function(Yr,bn){V(y,qr,Yr,bn)}).then(Lr,Gr)},{unsafe:!0});try{delete hr.constructor}catch{}re&&re(hr,Tr)}i({global:!0,constructor:!0,wrap:!0,forced:lr},{Promise:pr}),ie(pr,"Promise",!1,!0),ue("Promise")},function(t,r,e){var n,g,y,i,k,$,L,V,z=e(14),re=e(34),ie=e(95).f,ue=e(240).set,le=e(242),oe=e(396),ae=e(397),Ue=e(116),de=z.MutationObserver||z.WebKitMutationObserver,_e=z.document,Ve=z.process,$e=z.Promise,Lt=ie(z,"queueMicrotask"),jt=Lt&&Lt.value;jt||(n=function(){var Et,ir;for(Ue&&(Et=Ve.domain)&&Et.exit();g;){ir=g.fn,g=g.next;try{ir()}catch(ur){throw g?i():y=void 0,ur}}y=void 0,Et&&Et.enter()},le||Ue||ae||!de||!_e?!oe&&$e&&$e.resolve?((L=$e.resolve(void 0)).constructor=$e,V=re(L.then,L),i=function(){V(n)}):Ue?i=function(){Ve.nextTick(n)}:(ue=re(ue,z),i=function(){ue(n)}):(k=!0,$=_e.createTextNode(""),new de(n).observe($,{characterData:!0}),i=function(){$.data=k=!k})),t.exports=jt||function(Et){var ir={fn:Et,next:void 0};y&&(y.next=ir),g||(g=ir,i()),y=ir}},function(t,r,e){var n=e(66),g=e(14);t.exports=/ipad|iphone|ipod/i.test(n)&&g.Pebble!==void 0},function(t,r,e){var n=e(66);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,r,e){var n=e(14);t.exports=function(g,y){var i=n.console;i&&i.error&&(arguments.length==1?i.error(g):i.error(g,y))}},function(t,r){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(n){var g={item:n,next:null};this.head?this.tail.next=g:this.head=g,this.tail=g},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},t.exports=e},function(t,r,e){var n=e(243),g=e(116);t.exports=!n&&!g&&typeof window=="object"&&typeof document=="object"},function(t,r,e){var n=e(1),g=e(20),y=e(31),i=e(70),k=e(104),$=e(47);n({target:"Promise",stat:!0,forced:e(244)},{all:function(L){var V=this,z=i.f(V),re=z.resolve,ie=z.reject,ue=k(function(){var le=y(V.resolve),oe=[],ae=0,Ue=1;$(L,function(de){var _e=ae++,Ve=!1;Ue++,g(le,V,de).then(function($e){Ve||(Ve=!0,oe[_e]=$e,--Ue||re(oe))},ie)}),--Ue||re(oe)});return ue.error&&ie(ue.value),z.promise}})},function(t,r,e){var n=e(1),g=e(49),y=e(117).CONSTRUCTOR,i=e(105),k=e(33),$=e(17),L=e(68),V=i&&i.prototype;if(n({target:"Promise",proto:!0,forced:y,real:!0},{catch:function(re){return this.then(void 0,re)}}),!g&&$(i)){var z=k("Promise").prototype.catch;V.catch!==z&&L(V,"catch",z,{unsafe:!0})}},function(t,r,e){var n=e(1),g=e(20),y=e(31),i=e(70),k=e(104),$=e(47);n({target:"Promise",stat:!0,forced:e(244)},{race:function(L){var V=this,z=i.f(V),re=z.reject,ie=k(function(){var ue=y(V.resolve);$(L,function(le){g(ue,V,le).then(z.resolve,re)})});return ie.error&&re(ie.value),z.promise}})},function(t,r,e){var n=e(1),g=e(20),y=e(70);n({target:"Promise",stat:!0,forced:e(117).CONSTRUCTOR},{reject:function(i){var k=y.f(this);return g(k.reject,void 0,i),k.promise}})},function(t,r,e){var n=e(1),g=e(33),y=e(49),i=e(105),k=e(117).CONSTRUCTOR,$=e(246),L=g("Promise"),V=y&&!k;n({target:"Promise",stat:!0,forced:y||k},{resolve:function(z){return $(V&&this===L?i:this,z)}})},function(t,r,e){var n=e(1),g=e(49),y=e(105),i=e(5),k=e(33),$=e(17),L=e(239),V=e(246),z=e(68),re=y&&y.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!y&&i(function(){re.finally.call({then:function(){}},function(){})})},{finally:function(ue){var le=L(this,k("Promise")),oe=$(ue);return this.then(oe?function(ae){return V(le,ue()).then(function(){return ae})}:ue,oe?function(ae){return V(le,ue()).then(function(){throw ae})}:ue)}}),!g&&$(y)){var ie=k("Promise").prototype.finally;re.finally!==ie&&z(re,"finally",ie,{unsafe:!0})}},function(t,r,e){t.exports=e(408)},function(t,r,e){var n=e(409);t.exports=n},function(t,r,e){var n=e(249);t.exports=n},function(t,r,e){e(411);var n=e(13).Object,g=t.exports=function(y,i,k){return n.defineProperty(y,i,k)};n.defineProperty.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(27),y=e(39).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==y,sham:!g},{defineProperty:y})},function(t,r,e){var n=e(413),g=e(22).default;t.exports=function(y,i){if(g(y)!=="object"||y===null)return y;var k=y[n];if(k!==void 0){var $=k.call(y,i||"default");if(g($)!=="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(414)},function(t,r,e){t.exports=e(415)},function(t,r,e){var n=e(416);t.exports=n},function(t,r,e){var n=e(417);t.exports=n},function(t,r,e){var n=e(418);t.exports=n},function(t,r,e){e(419),e(226);var n=e(136);t.exports=n.f("toPrimitive")},function(t,r){},function(t,r,e){var n=e(19),g=e(421),y=Array.prototype;t.exports=function(i){var k=i.slice;return i===y||n(y,i)&&k===y.slice?g:k}},function(t,r,e){e(422);var n=e(29);t.exports=n("Array").slice},function(t,r,e){var n=e(1),g=e(83),y=e(132),i=e(28),k=e(131),$=e(46),L=e(44),V=e(99),z=e(21),re=e(113),ie=e(102),ue=re("slice"),le=z("species"),oe=Array,ae=Math.max;n({target:"Array",proto:!0,forced:!ue},{slice:function(Ue,de){var _e,Ve,$e,Lt=L(this),jt=$(Lt),Et=k(Ue,jt),ir=k(de===void 0?jt:de,jt);if(g(Lt)&&(_e=Lt.constructor,(y(_e)&&(_e===oe||g(_e.prototype))||i(_e)&&(_e=_e[le])===null)&&(_e=void 0),_e===oe||_e===void 0))return ie(Lt,Et,ir);for(Ve=new(_e===void 0?oe:_e)(ae(ir-Et,0)),$e=0;Et<ir;Et++,$e++)Et in Lt&&V(Ve,$e,Lt[Et]);return Ve.length=$e,Ve}})},function(t,r,e){var n=e(424);t.exports=n},function(t,r,e){var n=e(19),g=e(425),y=Array.prototype;t.exports=function(i){var k=i.some;return i===y||n(y,i)&&k===y.some?g:k}},function(t,r,e){e(426);var n=e(29);t.exports=n("Array").some},function(t,r,e){var n=e(1),g=e(74).some;n({target:"Array",proto:!0,forced:!e(82)("some")},{some:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(428);t.exports=n},function(t,r,e){var n=e(19),g=e(429),y=Array.prototype;t.exports=function(i){var k=i.splice;return i===y||n(y,i)&&k===y.splice?g:k}},function(t,r,e){e(430);var n=e(29);t.exports=n("Array").splice},function(t,r,e){var n=e(1),g=e(42),y=e(131),i=e(112),k=e(46),$=e(431),L=e(214),V=e(164),z=e(99),re=e(252),ie=e(113)("splice"),ue=Math.max,le=Math.min;n({target:"Array",proto:!0,forced:!ie},{splice:function(oe,ae){var Ue,de,_e,Ve,$e,Lt,jt=g(this),Et=k(jt),ir=y(oe,Et),ur=arguments.length;for(ur===0?Ue=de=0:ur===1?(Ue=0,de=Et-ir):(Ue=ur-2,de=le(ue(i(ae),0),Et-ir)),L(Et+Ue-de),_e=V(jt,de),Ve=0;Ve<de;Ve++)($e=ir+Ve)in jt&&z(_e,Ve,jt[$e]);if(_e.length=de,Ue<de){for(Ve=ir;Ve<Et-de;Ve++)Lt=Ve+Ue,($e=Ve+de)in jt?jt[Lt]=jt[$e]:re(jt,Lt);for(Ve=Et;Ve>Et-de+Ue;Ve--)re(jt,Ve-1)}else if(Ue>de)for(Ve=Et-de;Ve>ir;Ve--)Lt=Ve+Ue-1,($e=Ve+de-1)in jt?jt[Lt]=jt[$e]:re(jt,Lt);for(Ve=0;Ve<Ue;Ve++)jt[Ve+ir]=arguments[Ve+2];return $(jt,Et-de+Ue),_e}})},function(t,r,e){var n=e(27),g=e(83),y=TypeError,i=Object.getOwnPropertyDescriptor,k=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch($){return $ instanceof TypeError}}();t.exports=k?function($,L){if(g($)&&!i($,"length").writable)throw y("Cannot set read only .length");return $.length=L}:function($,L){return $.length=L}},function(t,r,e){var n=e(433);t.exports=n},function(t,r,e){var n=e(19),g=e(434),y=Array.prototype;t.exports=function(i){var k=i.sort;return i===y||n(y,i)&&k===y.sort?g:k}},function(t,r,e){e(435);var n=e(29);t.exports=n("Array").sort},function(t,r,e){var n=e(1),g=e(12),y=e(31),i=e(42),k=e(46),$=e(252),L=e(50),V=e(5),z=e(436),re=e(82),ie=e(437),ue=e(438),le=e(98),oe=e(439),ae=[],Ue=g(ae.sort),de=g(ae.push),_e=V(function(){ae.sort(void 0)}),Ve=V(function(){ae.sort(null)}),$e=re("sort"),Lt=!V(function(){if(le)return le<70;if(!(ie&&ie>3)){if(ue)return!0;if(oe)return oe<603;var jt,Et,ir,ur,Dt="";for(jt=65;jt<76;jt++){switch(Et=String.fromCharCode(jt),jt){case 66:case 69:case 70:case 72:ir=3;break;case 68:case 71:ir=4;break;default:ir=2}for(ur=0;ur<47;ur++)ae.push({k:Et+ur,v:ir})}for(ae.sort(function(lr,sr){return sr.v-lr.v}),ur=0;ur<ae.length;ur++)Et=ae[ur].k.charAt(0),Dt.charAt(Dt.length-1)!==Et&&(Dt+=Et);return Dt!=="DGBEFHACIJK"}});n({target:"Array",proto:!0,forced:_e||!Ve||!$e||!Lt},{sort:function(jt){jt!==void 0&&y(jt);var Et=i(this);if(Lt)return jt===void 0?Ue(Et):Ue(Et,jt);var ir,ur,Dt=[],lr=k(Et);for(ur=0;ur<lr;ur++)ur in Et&&de(Dt,Et[ur]);for(z(Dt,function(sr){return function(er,cr){return cr===void 0?-1:er===void 0?1:sr!==void 0?+sr(er,cr)||0:L(er)>L(cr)?1:-1}}(jt)),ir=k(Dt),ur=0;ur<ir;)Et[ur]=Dt[ur++];for(;ur<lr;)$(Et,ur++);return Et}})},function(t,r,e){var n=e(221),g=Math.floor,y=function($,L){var V=$.length,z=g(V/2);return V<8?i($,L):k($,y(n($,0,z),L),y(n($,z),L),L)},i=function($,L){for(var V,z,re=$.length,ie=1;ie<re;){for(z=ie,V=$[ie];z&&L($[z-1],V)>0;)$[z]=$[--z];z!==ie++&&($[z]=V)}return $},k=function($,L,V,z){for(var re=L.length,ie=V.length,ue=0,le=0;ue<re||le<ie;)$[ue+le]=ue<re&&le<ie?z(L[ue],V[le])<=0?L[ue++]:V[le++]:ue<re?L[ue++]:V[le++];return $};t.exports=y},function(t,r,e){var n=e(66).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(66);t.exports=/MSIE|Trident/.test(n)},function(t,r,e){var n=e(66).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(441);t.exports=n},function(t,r,e){var n=e(19),g=e(442),y=Array.prototype;t.exports=function(i){var k=i.map;return i===y||n(y,i)&&k===y.map?g:k}},function(t,r,e){e(443);var n=e(29);t.exports=n("Array").map},function(t,r,e){var n=e(1),g=e(74).map;n({target:"Array",proto:!0,forced:!e(113)("map")},{map:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(445);t.exports=n},function(t,r,e){var n=e(19),g=e(446),y=Array.prototype;t.exports=function(i){var k=i.reduce;return i===y||n(y,i)&&k===y.reduce?g:k}},function(t,r,e){e(447);var n=e(29);t.exports=n("Array").reduce},function(t,r,e){var n=e(1),g=e(448).left,y=e(82),i=e(98),k=e(116);n({target:"Array",proto:!0,forced:!y("reduce")||!k&&i>79&&i<83},{reduce:function($){var L=arguments.length;return g(this,$,L,L>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(31),g=e(42),y=e(127),i=e(46),k=TypeError,$=function(L){return function(V,z,re,ie){n(z);var ue=g(V),le=y(ue),oe=i(ue),ae=L?oe-1:0,Ue=L?-1:1;if(re<2)for(;;){if(ae in le){ie=le[ae],ae+=Ue;break}if(ae+=Ue,L?ae<0:oe<=ae)throw k("Reduce of empty array with no initial value")}for(;L?ae>=0:oe>ae;ae+=Ue)ae in le&&(ie=z(ie,le[ae],ae,ue));return ie}};t.exports={left:$(!1),right:$(!0)}},function(t,r,e){var n=e(450);t.exports=n},function(t,r,e){var n=e(19),g=e(451),y=Array.prototype;t.exports=function(i){var k=i.lastIndexOf;return i===y||n(y,i)&&k===y.lastIndexOf?g:k}},function(t,r,e){e(452);var n=e(29);t.exports=n("Array").lastIndexOf},function(t,r,e){var n=e(1),g=e(453);n({target:"Array",proto:!0,forced:g!==[].lastIndexOf},{lastIndexOf:g})},function(t,r,e){var n=e(79),g=e(44),y=e(112),i=e(46),k=e(82),$=Math.min,L=[].lastIndexOf,V=!!L&&1/[1].lastIndexOf(1,-0)<0,z=k("lastIndexOf"),re=V||!z;t.exports=re?function(ie){if(V)return n(L,this,arguments)||0;var ue=g(this),le=i(ue),oe=le-1;for(arguments.length>1&&(oe=$(oe,y(arguments[1]))),oe<0&&(oe=le+oe);oe>=0;oe--)if(oe in ue&&ue[oe]===ie)return oe||0;return-1}:L},function(t,r,e){e(253);var n=e(13);t.exports=n.setTimeout},function(t,r,e){var n=e(1),g=e(14),y=e(254)(g.setInterval,!0);n({global:!0,bind:!0,forced:g.setInterval!==y},{setInterval:y})},function(t,r){t.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"},function(t,r,e){var n=e(1),g=e(14),y=e(254)(g.setTimeout,!0);n({global:!0,bind:!0,forced:g.setTimeout!==y},{setTimeout:y})},function(t,r,e){var n=e(459);t.exports=n},function(t,r,e){var n=e(19),g=e(460),y=Array.prototype;t.exports=function(i){var k=i.filter;return i===y||n(y,i)&&k===y.filter?g:k}},function(t,r,e){e(461);var n=e(29);t.exports=n("Array").filter},function(t,r,e){var n=e(1),g=e(74).filter;n({target:"Array",proto:!0,forced:!e(113)("filter")},{filter:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){t.exports=e(463)},function(t,r,e){e(69);var n=e(67),g=e(30),y=e(19),i=e(464),k=Array.prototype,$={DOMTokenList:!0,NodeList:!0};t.exports=function(L){var V=L.values;return L===k||y(k,L)&&V===k.values||g($,n(L))?i:V}},function(t,r,e){var n=e(465);t.exports=n},function(t,r,e){e(86),e(100);var n=e(29);t.exports=n("Array").values},function(t,r,e){t.exports=e(467)},function(t,r,e){var n=e(468);t.exports=n},function(t,r,e){var n=e(19),g=e(469),y=Array.prototype;t.exports=function(i){var k=i.every;return i===y||n(y,i)&&k===y.every?g:k}},function(t,r,e){e(470);var n=e(29);t.exports=n("Array").every},function(t,r,e){var n=e(1),g=e(74).every;n({target:"Array",proto:!0,forced:!e(82)("every")},{every:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){e(115),e(472);var n=e(13);t.exports=n.Array.from},function(t,r,e){var n=e(1),g=e(473);n({target:"Array",stat:!0,forced:!e(245)(function(y){Array.from(y)})},{from:g})},function(t,r,e){var n=e(34),g=e(20),y=e(42),i=e(474),k=e(235),$=e(132),L=e(46),V=e(99),z=e(236),re=e(139),ie=Array;t.exports=function(ue){var le=y(ue),oe=$(this),ae=arguments.length,Ue=ae>1?arguments[1]:void 0,de=Ue!==void 0;de&&(Ue=n(Ue,ae>2?arguments[2]:void 0));var _e,Ve,$e,Lt,jt,Et,ir=re(le),ur=0;if(!ir||this===ie&&k(ir))for(_e=L(le),Ve=oe?new this(_e):ie(_e);_e>ur;ur++)Et=de?Ue(le[ur],ur):le[ur],V(Ve,ur,Et);else for(jt=(Lt=z(le,ir)).next,Ve=oe?new this:[];!($e=g(jt,Lt)).done;ur++)Et=de?i(Lt,Ue,[$e.value,ur],!0):$e.value,V(Ve,ur,Et);return Ve.length=ur,Ve}},function(t,r,e){var n=e(36),g=e(237);t.exports=function(y,i,k,$){try{return $?i(n(k)[0],k[1]):i(k)}catch(L){g(y,"throw",L)}}},function(t,r,e){t.exports=e(476)},function(t,r,e){var n=e(477);t.exports=n},function(t,r,e){var n=e(478);t.exports=n},function(t,r,e){var n=e(479);e(69),t.exports=n},function(t,r,e){e(86),e(115);var n=e(139);t.exports=n},function(t,r,e){e(220);var n=e(13);t.exports=n.Object.getOwnPropertySymbols},function(t,r,e){var n=e(482);t.exports=n},function(t,r,e){e(483);var n=e(13).Object,g=t.exports=function(y,i){return n.getOwnPropertyDescriptor(y,i)};n.getOwnPropertyDescriptor.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(5),y=e(44),i=e(95).f,k=e(27),$=g(function(){i(1)});n({target:"Object",stat:!0,forced:!k||$,sham:!k},{getOwnPropertyDescriptor:function(L,V){return i(y(L),V)}})},function(t,r,e){var n=e(485);t.exports=n},function(t,r,e){e(486);var n=e(13);t.exports=n.Object.getOwnPropertyDescriptors},function(t,r,e){var n=e(1),g=e(27),y=e(234),i=e(44),k=e(95),$=e(99);n({target:"Object",stat:!0,sham:!g},{getOwnPropertyDescriptors:function(L){for(var V,z,re=i(L),ie=k.f,ue=y(re),le={},oe=0;ue.length>oe;)(z=ie(re,V=ue[oe++]))!==void 0&&$(le,V,z);return le}})},function(t,r,e){var n=e(488);t.exports=n},function(t,r,e){e(489);var n=e(13).Object,g=t.exports=function(y,i){return n.defineProperties(y,i)};n.defineProperties.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(27),y=e(166).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==y,sham:!g},{defineProperties:y})},function(t,r,e){var n=e(11);typeof window<"u"&&(window.console||n.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(t,r,e){var n=e(492),g=e(521),y=e(261),i=e(523),k=e(532),$=e(535),L=e(536),V=e(537),z=e(539),re=e(540),ie=e(541),ue=e(183),le=e(545),oe=e(546),ae=e(552),Ue=e(177),de=e(264),_e=e(554),Ve=e(91),$e=e(556),Lt=e(176),jt=e(181),Et={};Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object DataView]"]=Et["[object Boolean]"]=Et["[object Date]"]=Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object Symbol]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Error]"]=Et["[object Function]"]=Et["[object WeakMap]"]=!1,t.exports=function ir(ur,Dt,lr,sr,er,cr){var or,hr=1&Dt,pr=2&Dt,Tr=4&Dt;if(lr&&(or=er?lr(ur,sr,er,cr):lr(ur)),or!==void 0)return or;if(!Ve(ur))return ur;var Pr=Ue(ur);if(Pr){if(or=le(ur),!hr)return L(ur,or)}else{var _r=ue(ur),Mr=_r=="[object Function]"||_r=="[object GeneratorFunction]";if(de(ur))return $(ur,hr);if(_r=="[object Object]"||_r=="[object Arguments]"||Mr&&!er){if(or=pr||Mr?{}:ae(ur),!hr)return pr?z(ur,k(or,ur)):V(ur,i(or,ur))}else{if(!Et[_r])return er?ur:{};or=oe(ur,_r,hr)}}cr||(cr=new n);var rr=cr.get(ur);if(rr)return rr;cr.set(ur,or),$e(ur)?ur.forEach(function(Er){or.add(ir(Er,Dt,lr,Er,ur,cr))}):_e(ur)&&ur.forEach(function(Er,xr){or.set(xr,ir(Er,Dt,lr,xr,ur,cr))});var kr=Pr?void 0:(Tr?pr?ie:re:pr?jt:Lt)(ur);return g(kr||ur,function(Er,xr){kr&&(Er=ur[xr=Er]),y(or,xr,ir(Er,Dt,lr,xr,ur,cr))}),or}},function(t,r,e){var n=e(142),g=e(498),y=e(499),i=e(500),k=e(501),$=e(502);function L(V){var z=this.__data__=new n(V);this.size=z.size}L.prototype.clear=g,L.prototype.delete=y,L.prototype.get=i,L.prototype.has=k,L.prototype.set=$,t.exports=L},function(t,r){t.exports=function(){this.__data__=[],this.size=0}},function(t,r,e){var n=e(143),g=Array.prototype.splice;t.exports=function(y){var i=this.__data__,k=n(i,y);return!(k<0)&&(k==i.length-1?i.pop():g.call(i,k,1),--this.size,!0)}},function(t,r,e){var n=e(143);t.exports=function(g){var y=this.__data__,i=n(y,g);return i<0?void 0:y[i][1]}},function(t,r,e){var n=e(143);t.exports=function(g){return n(this.__data__,g)>-1}},function(t,r,e){var n=e(143);t.exports=function(g,y){var i=this.__data__,k=n(i,g);return k<0?(++this.size,i.push([g,y])):i[k][1]=y,this}},function(t,r,e){var n=e(142);t.exports=function(){this.__data__=new n,this.size=0}},function(t,r){t.exports=function(e){var n=this.__data__,g=n.delete(e);return this.size=n.size,g}},function(t,r){t.exports=function(e){return this.__data__.get(e)}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(142),g=e(174),y=e(260);t.exports=function(i,k){var $=this.__data__;if($ instanceof n){var L=$.__data__;if(!g||L.length<199)return L.push([i,k]),this.size=++$.size,this;$=this.__data__=new y(L)}return $.set(i,k),this.size=$.size,this}},function(t,r,e){var n=e(257),g=e(506),y=e(91),i=e(259),k=/^\[object .+?Constructor\]$/,$=Function.prototype,L=Object.prototype,V=$.toString,z=L.hasOwnProperty,re=RegExp("^"+V.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(ie){return!(!y(ie)||g(ie))&&(n(ie)?re:k).test(i(ie))}},function(t,r,e){var n=e(175),g=Object.prototype,y=g.hasOwnProperty,i=g.toString,k=n?n.toStringTag:void 0;t.exports=function($){var L=y.call($,k),V=$[k];try{$[k]=void 0;var z=!0}catch{}var re=i.call($);return z&&(L?$[k]=V:delete $[k]),re}},function(t,r){var e=Object.prototype.toString;t.exports=function(n){return e.call(n)}},function(t,r,e){var n,g=e(507),y=(n=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(i){return!!y&&y in i}},function(t,r,e){var n=e(56)["__core-js_shared__"];t.exports=n},function(t,r){t.exports=function(e,n){return e==null?void 0:e[n]}},function(t,r,e){var n=e(510),g=e(142),y=e(174);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(y||g),string:new n}}},function(t,r,e){var n=e(511),g=e(512),y=e(513),i=e(514),k=e(515);function $(L){var V=-1,z=L==null?0:L.length;for(this.clear();++V<z;){var re=L[V];this.set(re[0],re[1])}}$.prototype.clear=n,$.prototype.delete=g,$.prototype.get=y,$.prototype.has=i,$.prototype.set=k,t.exports=$},function(t,r,e){var n=e(144);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,r){t.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(t,r,e){var n=e(144),g=Object.prototype.hasOwnProperty;t.exports=function(y){var i=this.__data__;if(n){var k=i[y];return k==="__lodash_hash_undefined__"?void 0:k}return g.call(i,y)?i[y]:void 0}},function(t,r,e){var n=e(144),g=Object.prototype.hasOwnProperty;t.exports=function(y){var i=this.__data__;return n?i[y]!==void 0:g.call(i,y)}},function(t,r,e){var n=e(144);t.exports=function(g,y){var i=this.__data__;return this.size+=this.has(g)?0:1,i[g]=n&&y===void 0?"__lodash_hash_undefined__":y,this}},function(t,r,e){var n=e(145);t.exports=function(g){var y=n(this,g).delete(g);return this.size-=y?1:0,y}},function(t,r){t.exports=function(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}},function(t,r,e){var n=e(145);t.exports=function(g){return n(this,g).get(g)}},function(t,r,e){var n=e(145);t.exports=function(g){return n(this,g).has(g)}},function(t,r,e){var n=e(145);t.exports=function(g,y){var i=n(this,g),k=i.size;return i.set(g,y),this.size+=i.size==k?0:1,this}},function(t,r){t.exports=function(e,n){for(var g=-1,y=e==null?0:e.length;++g<y&&n(e[g],g,e)!==!1;);return e}},function(t,r,e){var n=e(87),g=function(){try{var y=n(Object,"defineProperty");return y({},"",{}),y}catch{}}();t.exports=g},function(t,r,e){var n=e(146),g=e(176);t.exports=function(y,i){return y&&n(i,g(i),y)}},function(t,r){t.exports=function(e,n){for(var g=-1,y=Array(e);++g<e;)y[g]=n(g);return y}},function(t,r,e){var n=e(526),g=e(106),y=Object.prototype,i=y.hasOwnProperty,k=y.propertyIsEnumerable,$=n(function(){return arguments}())?n:function(L){return g(L)&&i.call(L,"callee")&&!k.call(L,"callee")};t.exports=$},function(t,r,e){var n=e(124),g=e(106);t.exports=function(y){return g(y)&&n(y)=="[object Arguments]"}},function(t,r){t.exports=function(){return!1}},function(t,r,e){var n=e(529),g=e(178),y=e(179),i=y&&y.isTypedArray,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(124),g=e(265),y=e(106),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(k){return y(k)&&g(k.length)&&!!i[n(k)]}},function(t,r,e){var n=e(180),g=e(531),y=Object.prototype.hasOwnProperty;t.exports=function(i){if(!n(i))return g(i);var k=[];for(var $ in Object(i))y.call(i,$)&&$!="constructor"&&k.push($);return k}},function(t,r,e){var n=e(266)(Object.keys,Object);t.exports=n},function(t,r,e){var n=e(146),g=e(181);t.exports=function(y,i){return y&&n(i,g(i),y)}},function(t,r,e){var n=e(91),g=e(180),y=e(534),i=Object.prototype.hasOwnProperty;t.exports=function(k){if(!n(k))return y(k);var $=g(k),L=[];for(var V in k)(V!="constructor"||!$&&i.call(k,V))&&L.push(V);return L}},function(t,r){t.exports=function(e){var n=[];if(e!=null)for(var g in Object(e))n.push(g);return n}},function(t,r,e){(function(n){var g=e(56),y=r&&!r.nodeType&&r,i=y&&typeof n=="object"&&n&&!n.nodeType&&n,k=i&&i.exports===y?g.Buffer:void 0,$=k?k.allocUnsafe:void 0;n.exports=function(L,V){if(V)return L.slice();var z=L.length,re=$?$(z):new L.constructor(z);return L.copy(re),re}}).call(this,e(147)(t))},function(t,r){t.exports=function(e,n){var g=-1,y=e.length;for(n||(n=Array(y));++g<y;)n[g]=e[g];return n}},function(t,r,e){var n=e(146),g=e(182);t.exports=function(y,i){return n(y,g(y),i)}},function(t,r){t.exports=function(e,n){for(var g=-1,y=e==null?0:e.length,i=0,k=[];++g<y;){var $=e[g];n($,g,e)&&(k[i++]=$)}return k}},function(t,r,e){var n=e(146),g=e(268);t.exports=function(y,i){return n(y,g(y),i)}},function(t,r,e){var n=e(271),g=e(182),y=e(176);t.exports=function(i){return n(i,y,g)}},function(t,r,e){var n=e(271),g=e(268),y=e(181);t.exports=function(i){return n(i,y,g)}},function(t,r,e){var n=e(87)(e(56),"DataView");t.exports=n},function(t,r,e){var n=e(87)(e(56),"Promise");t.exports=n},function(t,r,e){var n=e(87)(e(56),"WeakMap");t.exports=n},function(t,r){var e=Object.prototype.hasOwnProperty;t.exports=function(n){var g=n.length,y=new n.constructor(g);return g&&typeof n[0]=="string"&&e.call(n,"index")&&(y.index=n.index,y.input=n.input),y}},function(t,r,e){var n=e(184),g=e(548),y=e(549),i=e(550),k=e(551);t.exports=function($,L,V){var z=$.constructor;switch(L){case"[object ArrayBuffer]":return n($);case"[object Boolean]":case"[object Date]":return new z(+$);case"[object DataView]":return g($,V);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return k($,V);case"[object Map]":return new z;case"[object Number]":case"[object String]":return new z($);case"[object RegExp]":return y($);case"[object Set]":return new z;case"[object Symbol]":return i($)}}},function(t,r,e){var n=e(56).Uint8Array;t.exports=n},function(t,r,e){var n=e(184);t.exports=function(g,y){var i=y?n(g.buffer):g.buffer;return new g.constructor(i,g.byteOffset,g.byteLength)}},function(t,r){var e=/\w*$/;t.exports=function(n){var g=new n.constructor(n.source,e.exec(n));return g.lastIndex=n.lastIndex,g}},function(t,r,e){var n=e(175),g=n?n.prototype:void 0,y=g?g.valueOf:void 0;t.exports=function(i){return y?Object(y.call(i)):{}}},function(t,r,e){var n=e(184);t.exports=function(g,y){var i=y?n(g.buffer):g.buffer;return new g.constructor(i,g.byteOffset,g.length)}},function(t,r,e){var n=e(553),g=e(270),y=e(180);t.exports=function(i){return typeof i.constructor!="function"||y(i)?{}:n(g(i))}},function(t,r,e){var n=e(91),g=Object.create,y=function(){function i(){}return function(k){if(!n(k))return{};if(g)return g(k);i.prototype=k;var $=new i;return i.prototype=void 0,$}}();t.exports=y},function(t,r,e){var n=e(555),g=e(178),y=e(179),i=y&&y.isMap,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(183),g=e(106);t.exports=function(y){return g(y)&&n(y)=="[object Map]"}},function(t,r,e){var n=e(557),g=e(178),y=e(179),i=y&&y.isSet,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(183),g=e(106);t.exports=function(y){return g(y)&&n(y)=="[object Set]"}},function(t,r,e){var n=e(2),g=e(4),y=e(7),i=e(71),k=e(8),$=e(15),L=e(6),V=e(3),z=e(64),re=e(0),ie=e(11),ue=e(45),le={};function oe(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};!$e.logLevel&&$e.debug&&($e.logLevel="debug"),re.merge(this,{options:$e,debugEnable:!1,api:"log",style:"color:blue;",logLevel:$e.logLevel&&$e.logLevel.toLowerCase()||"off",debug:re.emptyFunc,log:re.emptyFunc,info:re.emptyFunc,warn:re.emptyFunc,error:re.emptyFunc}),this.prefix=$e.prefix||"",this.localEnable=le.enable&&$e.dbLog&&$e.account,this.setDebug($e.debug),this.localEnable&&(this._local=new le($e.account,$e.expire),this._local.logError=this.error)}le=e(567);var ae=oe.prototype,Ue=["Chrome","Safari","Firefox"],de={debug:1e3,log:2e3,info:3e3,warn:4e3,error:5e3,off:6e3};function _e($e){var Lt,jt=[];return n(Lt=g(de)).call(Lt,function(Et){de[Et]>=de[$e]&&jt.push(Et)}),jt}ae.setDebug=function(){var $e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Lt=this;if(Lt.debugEnable=$e||Lt.logLevel==="debug",$e.style&&(Lt.style=$e.style),re.exist(console)){if(Lt.logLevel!=="off"){var jt=console,Et=_e(Lt.logLevel);n(Et).call(Et,function(ur){Lt[ur]=function(){var Dt=Lt.formatArgsAndSave(arguments,ur);y(Ue).call(Ue,z.name)!==-1&&re.isString(Dt[0])&&(Dt[0]="%c"+Dt[0],i(Dt).call(Dt,1,0,Lt.style)),Lt._log(ur,Dt)}}),Lt.options.logFunc?Lt._log=function(){}:Lt._log=function(ur,Dt){if(ur==="debug"&&(ur="log"),jt[ur])try{jt[ur].apply?Lt.chrome(ur,Dt):Lt.ie(ur,Dt)}catch{}},Lt.chrome=function(ur,Dt){y(Ue).call(Ue,z.name)!==-1?jt[ur].apply(jt,Dt):Lt.ie(ur,Dt)},Lt.ie=function(ur,Dt){n(Dt).call(Dt,function(lr){jt[ur](k(lr,null,4))})}}else if(ie.isRN||this.localEnable||this.options.logFunc){var ir=!ie.isRN&&!this.localEnable;Lt.log=function(){Lt.formatArgsAndSave(arguments,"log",ir)},Lt.info=function(){Lt.formatArgsAndSave(arguments,"info",ir)},Lt.warn=function(){Lt.formatArgsAndSave(arguments,"warn",ir)},Lt.error=function(){Lt.formatArgsAndSave(arguments,"error",ir)},Lt.debug=function(){Lt.formatArgsAndSave(arguments,"log",ir)}}}},ae.destroy=function(){this.localEnable=!1,this.log=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.debug=function(){},this._local&&this._local.destroy()},ae.formatArgsAndSave=function($e,Lt,jt){var Et,ir;$e=$([]).call($e,0);var ur=new Date,Dt=Ve(ur.getMonth()+1)+"-"+Ve(ur.getDate())+" "+Ve(ur.getHours())+":"+Ve(ur.getMinutes())+":"+Ve(ur.getSeconds())+":"+Ve(ur.getMilliseconds(),3),lr=L(Et=L(ir="[NIM ".concat(Lt.toUpperCase()," ")).call(ir,Dt," ")).call(Et,this.prefix.toUpperCase(),"]  "),sr="";re.isString($e[0])?$e[0]=lr+$e[0]:i($e).call($e,0,0,lr),n($e).call($e,function(cr,or){re.isArray(cr)||re.isObject(cr)?($e[or]=re.simpleClone(cr),sr+=k($e[or])+" "):sr+=cr+" "});var er=this.options.logFunc;return er&&re.isFunction(er[Lt])&&er[Lt].apply(er,$e),!jt&&this.writeLocalLog(sr,Lt,+ur),$e},ae.writeLocalLog=function($e,Lt,jt){return ie.isRN?this.writeLocalLogRN($e,Lt,jt):ie.isBrowser?this.writeLocalLogBrowser($e,Lt,jt):void 0};var Ve=function($e,Lt){Lt=Lt||2;for(var jt=""+$e;jt.length<Lt;)jt="0"+jt;return jt};ae.writeLocalLogBrowser=function($e,Lt,jt){this._local&&this._local.saveLog({log:$e,level:Lt,time:jt})},ae.writeLocalLogRN=function($e,Lt){if(ue.rnfs&&ue.rnfs.writeFile&&ue.rnfs.appendFile&&ue.rnfs.DocumentDirectoryPath&&/error|warn|info/.test(Lt)){var jt,Et=ue.rnfs,ir=Et.size/2-256;$e+=`\r
`,Et.nimPromise=Et.nimPromise.then(function(){return jt=ur(Et.nimIndex),Et.exists(jt)}).then(function(Dt){return Dt?Et.appendFile(jt,$e):Et.writeFile(jt,$e)}).then(function(){return Et.stat(jt)}).then(function(Dt){if(Dt.size>ir)return Et.nimIndex++,Et.nimIndex>1&&(Et.nimIndex=Et.nimIndex%2),Et.unlink(ur(Et.nimIndex)).catch(function(){return V.resolve()})}).catch(function(){})}function ur(Dt){return ue.rnfs.DocumentDirectoryPath+"/nimlog_"+Dt+".log"}},t.exports=oe},function(t,r,e){var n=e(560);t.exports=n},function(t,r,e){e(561);var n=e(13);t.exports=n.parseFloat},function(t,r,e){var n=e(1),g=e(562);n({global:!0,forced:parseFloat!=g},{parseFloat:g})},function(t,r,e){var n=e(14),g=e(5),y=e(12),i=e(50),k=e(185).trim,$=e(148),L=y("".charAt),V=n.parseFloat,z=n.Symbol,re=z&&z.iterator,ie=1/V($+"-0")!=-1/0||re&&!g(function(){V(Object(re))});t.exports=ie?function(ue){var le=k(i(ue)),oe=V(le);return oe===0&&L(le,0)=="-"?-0:oe}:V},function(t,r,e){var n=e(564);t.exports=n},function(t,r,e){e(565);var n=e(13);t.exports=n.parseInt},function(t,r,e){var n=e(1),g=e(566);n({global:!0,forced:parseInt!=g},{parseInt:g})},function(t,r,e){var n=e(14),g=e(5),y=e(12),i=e(50),k=e(185).trim,$=e(148),L=n.parseInt,V=n.Symbol,z=V&&V.iterator,re=/^[+-]?0x/i,ie=y(re.exec),ue=L($+"08")!==8||L($+"0x16")!==22||z&&!g(function(){L(Object(z))});t.exports=ue?function(le,oe){var ae=k(i(le));return L(ae,oe>>>0||(ie(re,ae)?16:10))}:L},function(t,r,e){var n=e(15),g=e(24),y=e(3),i=e(568),k=e(569),$=e(0).getGlobal(),L=e(64).name,V=typeof i=="function",z=$.indexedDB&&!/^(IE)$/.test(L);function re(ue,le){this.logWorker=null,this.db=null,this.logQueue=[],this.callbackList=[],this.preTime=null,this.lastTime=+new Date,this.saveLogTimer=void 0,this.initLogLocal({name:ue,expire:le})}var ie=re.prototype;re.enable=!0,ie.saveLog=function(ue){var le=this;try{if(!re.enable)return;var oe,ae=this.logQueue.length,Ue=this.logQueue[ae-1];if(ue.time===this.preTime&&Ue)return void(Ue.log+=`\r
`+ue.log);this.logQueue.length>50||ue.time-this.lastTime>3e3&&this.logQueue.length>0?(this.doSaveLog(n(oe=this.logQueue).call(oe,0)),this.lastTime=Ue.time,this.logQueue=[],clearTimeout(this.saveLogTimer)):(clearTimeout(this.saveLogTimer),this.saveLogTimer=g(function(){var de;le.logQueue.length>0&&(Ue=le.logQueue[le.logQueue.length-1],le.doSaveLog(n(de=le.logQueue).call(de,0)),le.lastTime=Ue.time,le.logQueue=[])},3e3-(ue.time-this.lastTime))),this.logQueue.push(ue),this.preTime=ue.time}catch(de){console.error("saveLog Error",de)}},ie.destroy=function(){if(this.logQueue.length>0){var ue,le=this.logQueue[this.logQueue.length-1];this.doSaveLog(n(ue=this.logQueue).call(ue,0)),this.lastTime=le.time,this.logQueue=[]}clearTimeout(this.saveLogTimer)},ie.doSaveLog=function(){},ie.initLogLocal=function(){},ie.fetchLog=function(){},ie.deleteLogs=function(){},ie.logError=function(){},z?V?(ie.doSaveLog=function(ue){this.logWorker.postMessage(ue)},ie.initLogLocal=function(ue){var le=this;this.logWorker=new i({}),this.logWorker.onmessage=function(oe){var ae=oe.data||{};switch(ae.type){case"fetchDone":le.fetchLogDone(ae.code,ae.msg);break;case"error":le.logError(ae.msg)}},this.logWorker.postMessage({type:"init",msg:ue})},ie.fetchLog=function(){var ue=this;return new y(function(le,oe){ue.callbackList.length===0&&ue.logWorker.postMessage({type:"fetch"}),ue.callbackList.push(le),ue.callbackList.push(oe)})},ie.fetchLogDone=function(ue,le){for(var oe=ue===200?0:1,ae=0;ae<this.callbackList.length/2;ae++)this.callbackList[2*ae+oe](le);this.callbackList=[]},ie.deleteLogs=function(ue){return this.logWorker.postMessage({type:"delete",msg:ue}),y.resolve()}):(ie.doSaveLog=function(ue){var le=this;this.db.putLog(ue).catch(function(oe){le.logError({msg:"putLog error",error:oe})})},ie.initLogLocal=function(ue){var le=this;this.db=new k(ue),this.db.init().catch(function(oe){le.logError({msg:"dbLog init error",error:oe})})},ie.fetchLog=function(){return this.db.getAllLogs()},ie.deleteLogs=function(ue){return this.db.deleteLogs(ue)}):re.enable=!1,t.exports=re},function(t,r,e){e.r(r),e.d(r,"default",function(){return y});var n=e(298),g=e.n(n);function y(){return g()(`/*!
 * 
 * VERSION: 9.14.4
 * Git Hash: 98d1c9786af772ff439f12534089825e2c3c6776
 * 
 * Create At: 2024/2/23 3:43:35
 * 
 * Target: NIM_Web_log.worker
 */!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=109)}([function(t,n,r){"use strict";var e=r(1),o=r(41),i=r(78),c=r(2),u=r(43).f,a=r(84),f=r(13),s=r(34),p=r(19),l=r(8),v=function(t){var n=function(r,e,i){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,e)}return new t(r,e,i)}return o(t,this,arguments)};return n.prototype=t.prototype,n};t.exports=function(t,n){var r,o,d,y,h,m,g,x,b,w=t.target,S=t.global,j=t.stat,O=t.proto,P=S?e:j?e[w]:(e[w]||{}).prototype,T=S?f:f[w]||p(f,w,{})[w],A=T.prototype;for(y in n)o=!(r=a(S?y:w+(j?".":"#")+y,t.forced))&&P&&l(P,y),m=T[y],o&&(g=t.dontCallGetSet?(b=u(P,y))&&b.value:P[y]),h=o&&g?g:n[y],o&&typeof m==typeof h||(x=t.bind&&o?s(h,e):t.wrap&&o?v(h):O&&c(h)?i(h):h,(t.sham||h&&h.sham||m&&m.sham)&&p(x,"sham",!0),p(T,y,x),O&&(l(f,d=w+"Prototype")||p(f,d,{}),p(f[d],y,h),t.real&&A&&(r||!A[y])&&p(A,y,h)))}},function(t,n,r){(function(n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,r(77))},function(t,n,r){var e=r(79),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},function(t,n,r){var e=r(13),o=r(8),i=r(75),c=r(16).f;t.exports=function(t){var n=e.Symbol||(e.Symbol={});o(n,t)||c(n,t,{value:i.f(t)})}},function(t,n,r){var e=r(1),o=r(33),i=r(8),c=r(60),u=r(24),a=r(82),f=o("wks"),s=e.Symbol,p=s&&s.for,l=a?s:s&&s.withoutSetter||c;t.exports=function(t){if(!i(f,t)||!u&&"string"!=typeof f[t]){var n="Symbol."+t;u&&i(s,t)?f[t]=s[t]:f[t]=a&&p?p(n):l(n)}return f[t]}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.call,c=e&&o.bind.bind(i,i);t.exports=e?c:function(t){return function(){return i.apply(t,arguments)}}},function(t,n,r){var e=r(42),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,r){var e=r(6),o=r(25),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,r){var e=r(13),o=r(1),i=r(2),c=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?c(e[t])||c(o[t]):e[t]&&e[t][n]||o[t]&&o[t][n]}},function(t,n,r){var e=r(2),o=r(79),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},function(t,n,r){var e=r(5);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,r){var e=r(10),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},function(t,n){t.exports={}},function(t,n,r){var e=r(6);t.exports=e({}.isPrototypeOf)},function(t,n){t.exports=!0},function(t,n,r){var e=r(11),o=r(83),i=r(85),c=r(12),u=r(45),a=TypeError,f=Object.defineProperty,s=Object.getOwnPropertyDescriptor;n.f=e?i?function(t,n,r){if(c(t),n=u(n),c(r),"function"==typeof t&&"prototype"===n&&"value"in r&&"writable"in r&&!r.writable){var e=s(t,n);e&&e.writable&&(t[n]=r.value,r={configurable:"configurable"in r?r.configurable:e.configurable,enumerable:"enumerable"in r?r.enumerable:e.enumerable,writable:!1})}return f(t,n,r)}:f:function(t,n,r){if(c(t),n=u(n),c(r),o)try{return f(t,n,r)}catch(t){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},function(t,n,r){var e=r(81),o=r(57);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(11),o=r(16),i=r(20);t.exports=e?function(t,n,r){return o.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(19);t.exports=function(t,n,r,o){return o&&o.enumerable?t[n]=r:e(t,n,r),t}},function(t,n,r){"use strict";var e=r(17),o=TypeError,i=function(t){var n,r;this.promise=new t((function(t,e){if(void 0!==n||void 0!==r)throw o("Bad Promise constructor");n=t,r=e})),this.resolve=e(n),this.reject=e(r)};t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(6),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,r){var e=r(47),o=r(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},function(t,n,r){var e=r(57),o=Object;t.exports=function(t){return o(e(t))}},function(t,n,r){var e=r(124);t.exports=function(t){return e(t.length)}},function(t,n){t.exports={}},function(t,n,r){var e=r(70),o=r(2),i=r(23),c=r(4)("toStringTag"),u=Object,a="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=u(t),c))?r:a?i(n):"Object"==(e=i(n))&&o(n.callee)?"Arguments":e}},function(t,n,r){var e=r(70),o=r(16).f,i=r(19),c=r(8),u=r(136),a=r(4)("toStringTag");t.exports=function(t,n,r,f){if(t){var s=r?t:t.prototype;c(s,a)||o(s,a,{configurable:!0,value:n}),f&&!e&&i(s,"toString",u)}}},function(t,n,r){var e=r(1);t.exports=e.Promise},function(t,n,r){var e=r(9);t.exports=e("navigator","userAgent")||""},function(t,n){var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,r){var e=r(15),o=r(59);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.27.1",mode:e?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,r){var e=r(78),o=r(17),i=r(42),c=e(e.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?c(t,n):function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(34),o=r(7),i=r(12),c=r(32),u=r(127),a=r(26),f=r(14),s=r(128),p=r(89),l=r(129),v=TypeError,d=function(t,n){this.stopped=t,this.result=n},y=d.prototype;t.exports=function(t,n,r){var h,m,g,x,b,w,S,j=r&&r.that,O=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=e(n,j),k=function(t){return h&&l(h,"normal",t),new d(!0,t)},I=function(t){return O?(i(t),A?E(t[0],t[1],k):E(t[0],t[1])):A?E(t,k):E(t)};if(P)h=t.iterator;else if(T)h=t;else{if(!(m=p(t)))throw v(c(t)+" is not iterable");if(u(m)){for(g=0,x=a(t);x>g;g++)if((b=I(t[g]))&&f(y,b))return b;return new d(!1)}h=s(t,m)}for(w=P?t.next:h.next;!(S=o(w,h)).done;){try{b=I(S.value)}catch(t){l(h,"throw",t)}if("object"==typeof b&&b&&f(y,b))return b}return new d(!1)}},function(t,n,r){var e=r(28),o=String;t.exports=function(t){if("Symbol"===e(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,r){var e=r(1),o=r(30),i=r(2),c=r(84),u=r(94),a=r(4),f=r(147),s=r(98),p=r(15),l=r(47),v=o&&o.prototype,d=a("species"),y=!1,h=i(e.PromiseRejectionEvent),m=c("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(p&&(!v.catch||!v.finally))return!0;if(!l||l<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),e=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=e,!(y=r.then((function(){}))instanceof e))return!0}return!n&&(f||s)&&!h}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:h,SUBCLASSING:y}},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13);t.exports=function(t){return e[t+"Prototype"]}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?c.bind(i):function(){return c.apply(i,arguments)})},function(t,n,r){var e=r(5);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n,r){var e=r(11),o=r(7),i=r(80),c=r(20),u=r(18),a=r(45),f=r(8),s=r(83),p=Object.getOwnPropertyDescriptor;n.f=e?p:function(t,n){if(t=u(t),n=a(n),s)try{return p(t,n)}catch(t){}if(f(t,n))return c(!o(i.f,t,n),t[n])}},function(t,n){t.exports=function(t){return null==t}},function(t,n,r){var e=r(115),o=r(46);t.exports=function(t){var n=e(t,"string");return o(n)?n:n+""}},function(t,n,r){var e=r(9),o=r(2),i=r(14),c=r(82),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var n=e("Symbol");return o(n)&&i(n.prototype,u(t))}},function(t,n,r){var e,o,i=r(1),c=r(31),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,s=f&&f.v8;s&&(o=(e=s.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&c&&(!(e=c.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=c.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},function(t,n,r){var e=r(33),o=r(60),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n,r){var e,o=r(12),i=r(87),c=r(67),u=r(49),a=r(88),f=r(61),s=r(48),p=s("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\\/script>"},d=function(t){t.write(v("")),t.close();var n=t.parentWindow.Object;return t=null,n},y=function(){try{e=new ActiveXObject("htmlfile")}catch(t){}var t,n;y="undefined"!=typeof document?document.domain&&e?d(e):((n=f("iframe")).style.display="none",a.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):d(e);for(var r=c.length;r--;)delete y.prototype[c[r]];return y()};u[p]=!0,t.exports=Object.create||function(t,n){var r;return null!==t?(l.prototype=o(t),r=new l,l.prototype=null,r[p]=t):r=y(),void 0===n?r:i.f(r,n)}},function(t,n,r){var e,o,i,c=r(133),u=r(1),a=r(10),f=r(19),s=r(8),p=r(59),l=r(48),v=r(49),d=u.TypeError,y=u.WeakMap;if(c||p.state){var h=p.state||(p.state=new y);h.get=h.get,h.has=h.has,h.set=h.set,e=function(t,n){if(h.has(t))throw d("Object already initialized");return n.facade=t,h.set(t,n),n},o=function(t){return h.get(t)||{}},i=function(t){return h.has(t)}}else{var m=l("state");v[m]=!0,e=function(t,n){if(s(t,m))throw d("Object already initialized");return n.facade=t,f(t,m,n),n},o=function(t){return s(t,m)?t[m]:{}},i=function(t){return s(t,m)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=o(n)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}}}},function(t,n,r){var e=r(23),o=r(1);t.exports="process"==e(o.process)},function(t,n,r){var e=r(6);t.exports=e([].slice)},function(t,n,r){r(71);var e=r(158),o=r(1),i=r(28),c=r(19),u=r(27),a=r(4)("toStringTag");for(var f in e){var s=o[f],p=s&&s.prototype;p&&i(p)!==a&&c(p,a,f),u[f]=u.Array}},function(t,n,r){var e=r(5),o=r(4),i=r(47),c=o("species");t.exports=function(t){return i>=51||!e((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,r){var e=r(34),o=r(6),i=r(81),c=r(25),u=r(26),a=r(103),f=o([].push),s=function(t){var n=1==t,r=2==t,o=3==t,s=4==t,p=6==t,l=7==t,v=5==t||p;return function(d,y,h,m){for(var g,x,b=c(d),w=i(b),S=e(y,h),j=u(w),O=0,P=m||a,T=n?P(d,j):r||l?P(d,0):void 0;j>O;O++)if((v||O in w)&&(x=S(g=w[O],O,b),t))if(n)T[O]=x;else if(x)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:f(T,g)}else switch(t){case 4:return!1;case 7:f(T,g)}return p?-1:o||s?s:T}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},function(t,n,r){var e=r(44),o=TypeError;t.exports=function(t){if(e(t))throw o("Can't call method on "+t);return t}},function(t,n,r){var e=r(17),o=r(44);t.exports=function(t,n){var r=t[n];return o(r)?void 0:e(r)}},function(t,n,r){var e=r(1),o=r(117),i=e["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,r){var e=r(6),o=0,i=Math.random(),c=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+i,36)}},function(t,n,r){var e=r(1),o=r(10),i=e.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},function(t,n,r){var e=r(8),o=r(2),i=r(25),c=r(48),u=r(118),a=c("IE_PROTO"),f=Object,s=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=i(t);if(e(n,a))return n[a];var r=n.constructor;return o(r)&&n instanceof r?r.prototype:n instanceof f?s:null}},function(t,n,r){var e=r(6),o=r(12),i=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,r={};try{(t=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),n=r instanceof Array}catch(t){}return function(r,e){return o(r),i(e),n?t(r,e):r.__proto__=e,r}}():void 0)},function(t,n,r){var e=r(86),o=r(67).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(66),o=Math.max,i=Math.min;t.exports=function(t,n){var r=e(t);return r<0?o(r+n,0):i(r,n)}},function(t,n,r){var e=r(123);t.exports=function(t){var n=+t;return n!=n||0===n?0:e(n)}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(86),o=r(67);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n,r){var e={};e[r(4)("toStringTag")]="z",t.exports="[object z]"===String(e)},function(t,n,r){"use strict";var e=r(18),o=r(132),i=r(27),c=r(51),u=r(16).f,a=r(90),f=r(92),s=r(15),p=r(11),l=c.set,v=c.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:e(t),index:0,kind:n})}),(function(){var t=v(this),n=t.target,r=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,f(void 0,!0)):f("keys"==r?e:"values"==r?n[e]:[e,n[e]],!1)}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&p&&"values"!==d.name)try{u(d,"name",{value:"values"})}catch(t){}},function(t,n){},function(t,n,r){var e=r(6),o=r(5),i=r(2),c=r(28),u=r(9),a=r(94),f=function(){},s=[],p=u("Reflect","construct"),l=/^\\s*(?:class|function)\\b/,v=e(l.exec),d=!l.exec(f),y=function(t){if(!i(t))return!1;try{return p(f,s,t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!p||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},function(t,n,r){"use strict";var e=r(45),o=r(16),i=r(20);t.exports=function(t,n,r){var c=e(n);c in t?o.f(t,c,i(0,r)):t[c]=r}},function(t,n,r){var e=r(4);n.f=e},function(t,n,r){t.exports=r(111)},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(23),o=r(6);t.exports=function(t){if("Function"===e(t))return o(t)}},function(t,n){var r="object"==typeof document&&document.all,e=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:e}},function(t,n,r){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!e.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},function(t,n,r){var e=r(6),o=r(5),i=r(23),c=Object,u=e("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):c(t)}:c},function(t,n,r){var e=r(24);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,r){var e=r(11),o=r(5),i=r(61);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,r){var e=r(5),o=r(2),i=/#|\\.prototype\\./,c=function(t,n){var r=a[u(t)];return r==s||r!=f&&(o(n)?e(n):!!n)},u=c.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=c.data={},f=c.NATIVE="N",s=c.POLYFILL="P";t.exports=c},function(t,n,r){var e=r(11),o=r(5);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,r){var e=r(6),o=r(8),i=r(18),c=r(122).indexOf,u=r(49),a=e([].push);t.exports=function(t,n){var r,e=i(t),f=0,s=[];for(r in e)!o(u,r)&&o(e,r)&&a(s,r);for(;n.length>f;)o(e,r=n[f++])&&(~c(s,r)||a(s,r));return s}},function(t,n,r){var e=r(11),o=r(85),i=r(16),c=r(12),u=r(18),a=r(69);n.f=e&&!o?Object.defineProperties:function(t,n){c(t);for(var r,e=u(n),o=a(n),f=o.length,s=0;f>s;)i.f(t,r=o[s++],e[r]);return t}},function(t,n,r){var e=r(9);t.exports=e("document","documentElement")},function(t,n,r){var e=r(28),o=r(58),i=r(44),c=r(27),u=r(4)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||c[e(t)]}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(15),c=r(134),u=r(2),a=r(135),f=r(62),s=r(63),p=r(29),l=r(19),v=r(21),d=r(4),y=r(27),h=r(91),m=c.PROPER,g=c.CONFIGURABLE,x=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,w=d("iterator"),S=function(){return this};t.exports=function(t,n,r,c,d,h,j){a(r,n,c);var O,P,T,A=function(t){if(t===d&&L)return L;if(!b&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},E=n+" Iterator",k=!1,I=t.prototype,D=I[w]||I["@@iterator"]||d&&I[d],L=!b&&D||A(d),_="Array"==n&&I.entries||D;if(_&&(O=f(_.call(new t)))!==Object.prototype&&O.next&&(i||f(O)===x||(s?s(O,x):u(O[w])||v(O,w,S)),p(O,E,!0,!0),i&&(y[E]=S)),m&&"values"==d&&D&&"values"!==D.name&&(!i&&g?l(I,"name","values"):(k=!0,L=function(){return o(D,this)})),d)if(P={values:A("values"),keys:h?L:A("keys"),entries:A("entries")},j)for(T in P)(b||k||!(T in I))&&v(I,T,P[T]);else e({target:n,proto:!0,forced:b||k},P);return i&&!j||I[w]===L||v(I,w,L,{name:d}),y[n]=L,P}},function(t,n,r){"use strict";var e,o,i,c=r(5),u=r(2),a=r(10),f=r(50),s=r(62),p=r(21),l=r(4),v=r(15),d=l("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(e=o):y=!0),!a(e)||c((function(){var t={};return e[d].call(t)!==t}))?e={}:v&&(e=f(e)),u(e[d])||p(e,d,(function(){return this})),t.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:y}},function(t,n){t.exports=function(t,n){return{value:t,done:n}}},function(t,n,r){var e=r(12),o=r(141),i=r(44),c=r(4)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||i(r=e(u)[c])?n:o(r)}},function(t,n,r){var e=r(6),o=r(2),i=r(59),c=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return c(t)}),t.exports=i.inspectSource},function(t,n,r){var e,o,i,c,u=r(1),a=r(41),f=r(34),s=r(2),p=r(8),l=r(5),v=r(88),d=r(53),y=r(61),h=r(96),m=r(97),g=r(52),x=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.Dispatch,j=u.Function,O=u.MessageChannel,P=u.String,T=0,A={};try{e=u.location}catch(t){}var E=function(t){if(p(A,t)){var n=A[t];delete A[t],n()}},k=function(t){return function(){E(t)}},I=function(t){E(t.data)},D=function(t){u.postMessage(P(t),e.protocol+"//"+e.host)};x&&b||(x=function(t){h(arguments.length,1);var n=s(t)?t:j(t),r=d(arguments,1);return A[++T]=function(){a(n,void 0,r)},o(T),T},b=function(t){delete A[t]},g?o=function(t){w.nextTick(k(t))}:S&&S.now?o=function(t){S.now(k(t))}:O&&!m?(c=(i=new O).port2,i.port1.onmessage=I,o=f(c.postMessage,c)):u.addEventListener&&s(u.postMessage)&&!u.importScripts&&e&&"file:"!==e.protocol&&!l(D)?(o=D,u.addEventListener("message",I,!1)):o="onreadystatechange"in y("script")?function(t){v.appendChild(y("script")).onreadystatechange=function(){v.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:x,clear:b}},function(t,n){var r=TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,r){var e=r(31);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)},function(t,n){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,n,r){var e=r(30),o=r(149),i=r(38).CONSTRUCTOR;t.exports=i||!o((function(t){e.all(t).then(void 0,(function(){}))}))},function(t,n,r){var e=r(12),o=r(10),i=r(22);t.exports=function(t,n){if(e(t),o(n)&&n.constructor===t)return n;var r=i.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(157).charAt,o=r(36),i=r(51),c=r(90),u=r(92),a=i.set,f=i.getterFor("String Iterator");c(String,"String",(function(t){a(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=f(this),r=n.string,o=n.index;return o>=r.length?u(void 0,!0):(t=e(r,o),n.index+=t.length,u(t,!1))}))},function(t,n,r){t.exports=r(159)},function(t,n,r){var e=r(168);t.exports=function(t,n){return new(e(t))(0===n?0:n)}},function(t,n,r){"use strict";var e=r(0),o=r(5),i=r(39),c=r(10),u=r(25),a=r(26),f=r(177),s=r(74),p=r(103),l=r(55),v=r(4),d=r(47),y=v("isConcatSpreadable"),h=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!c(t))return!1;var n=t[y];return void 0!==n?!!n:i(t)};e({target:"Array",proto:!0,arity:1,forced:!h||!m},{concat:function(t){var n,r,e,o,i,c=u(this),l=p(c,0),v=0;for(n=-1,e=arguments.length;n<e;n++)if(g(i=-1===n?c:arguments[n]))for(o=a(i),f(v+o),r=0;r<o;r++,v++)r in i&&s(l,v,i[r]);else f(v+1),s(l,v++,i);return l.length=v,l}})},function(t,n,r){var e=r(7),o=r(9),i=r(4),c=r(21);t.exports=function(){var t=o("Symbol"),n=t&&t.prototype,r=n&&n.valueOf,u=i("toPrimitive");n&&!n[u]&&c(n,u,(function(t){return e(r,this)}),{arity:1})}},function(t,n,r){var e=r(24);t.exports=e&&!!Symbol.for&&!!Symbol.keyFor},function(t,n,r){r(3)("iterator")},function(t,n,r){"use strict";var e,o=r(1),i=r(41),c=r(2),u=r(220),a=r(31),f=r(53),s=r(96),p=o.Function,l=/MSIE .\\./.test(a)||u&&((e=o.Bun.version.split(".")).length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2]));t.exports=function(t,n){var r=n?2:1;return l?function(e,o){var u=s(arguments.length,1)>r,a=c(e)?e:p(e),l=u?f(arguments,r):[],v=u?function(){i(a,this,l)}:a;return n?t(v,o):t(v)}:t}},function(t,n,r){var e=r(110),o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":r=t.data.msg,(o=new e(r)).init().catch((function(t){postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})}));break;case"fetch":o.getAllLogs().then((function(t){postMessage({type:"fetchDone",code:200,msg:t})})).catch((function(t){postMessage({type:"fetchDone",code:500,msg:i(t)})}));break;case"delete":o.deleteLogs(n).catch((function(t){postMessage({type:"deleteLogs",code:500,msg:i(t)})}));break;default:!function(t){if(!o)return;o.putLog(t).then((function(){postMessage(200)})).catch((function(t){postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})}))}(t.data)}var n,r}},function(t,n,r){var e=r(76),o=r(102),i=r(163),c=r(169),u={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var f=a.prototype;f.init=function(){var t=this;if(!this.server)return c.open({server:"nim-log-"+this.name,version:1,schema:u}).then((function(n){t.server=n}))},f.putLog=function(t){var n=this;if(!this.server)return e.reject("no db server");var r=o(t).call(t,-1)[0].time-36e5*this.expire;return this.deleteLogs(r).then((function(){return n.server.add("log",t)}))},f.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(t){var n={},r=o(t).call(t,-1)[0];return n.logs=i(t).call(t,(function(t){return t.log})).join("\\r\\n"),n.time=r&&r.time,n})):e.reject("no db server")},f.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):e.reject("no db server")},t.exports=a},function(t,n,r){var e=r(112);r(54),t.exports=e},function(t,n,r){r(113),r(71),r(72),r(137),r(154),r(155),r(156),r(101);var e=r(13);t.exports=e.Promise},function(t,n,r){r(114)},function(t,n,r){"use strict";var e=r(0),o=r(14),i=r(62),c=r(63),u=r(120),a=r(50),f=r(19),s=r(20),p=r(125),l=r(126),v=r(35),d=r(130),y=r(4),h=r(131),m=y("toStringTag"),g=Error,x=[].push,b=function(t,n){var r,e=arguments.length>2?arguments[2]:void 0,u=o(w,this);c?r=c(g(),u?i(this):w):(r=u?this:a(w),f(r,m,"Error")),void 0!==n&&f(r,"message",d(n)),h&&f(r,"stack",p(r.stack,1)),l(r,e);var s=[];return v(t,x,{that:s}),f(r,"errors",s),r};c?c(b,g):u(b,g,{name:!0});var w=b.prototype=a(g.prototype,{constructor:s(1,b),message:s(1,""),name:s(1,"AggregateError")});e({global:!0,constructor:!0,arity:2},{AggregateError:b})},function(t,n,r){var e=r(7),o=r(10),i=r(46),c=r(58),u=r(116),a=r(4),f=TypeError,s=a("toPrimitive");t.exports=function(t,n){if(!o(t)||i(t))return t;var r,a=c(t,s);if(a){if(void 0===n&&(n="default"),r=e(a,t,n),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},function(t,n,r){var e=r(7),o=r(2),i=r(10),c=TypeError;t.exports=function(t,n){var r,u;if("string"===n&&o(r=t.toString)&&!i(u=e(r,t)))return u;if(o(r=t.valueOf)&&!i(u=e(r,t)))return u;if("string"!==n&&o(r=t.toString)&&!i(u=e(r,t)))return u;throw c("Can't convert object to primitive value")}},function(t,n,r){var e=r(1),o=Object.defineProperty;t.exports=function(t,n){try{o(e,t,{value:n,configurable:!0,writable:!0})}catch(r){e[t]=n}return n}},function(t,n,r){var e=r(5);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,r){var e=r(2),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},function(t,n,r){var e=r(8),o=r(121),i=r(43),c=r(16);t.exports=function(t,n,r){for(var u=o(n),a=c.f,f=i.f,s=0;s<u.length;s++){var p=u[s];e(t,p)||r&&e(r,p)||a(t,p,f(n,p))}}},function(t,n,r){var e=r(9),o=r(6),i=r(64),c=r(68),u=r(12),a=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var n=i.f(u(t)),r=c.f;return r?a(n,r(t)):n}},function(t,n,r){var e=r(18),o=r(65),i=r(26),c=function(t){return function(n,r,c){var u,a=e(n),f=i(a),s=o(c,f);if(t&&r!=r){for(;f>s;)if((u=a[s++])!=u)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?e:r)(n)}},function(t,n,r){var e=r(66),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(6),o=Error,i=e("".replace),c=String(o("zxcasd").stack),u=/\\n\\s*at [^:]*:[^\\n]*/,a=u.test(c);t.exports=function(t,n){if(a&&"string"==typeof t&&!o.prepareStackTrace)for(;n--;)t=i(t,u,"");return t}},function(t,n,r){var e=r(10),o=r(19);t.exports=function(t,n){e(n)&&"cause"in n&&o(t,"cause",n.cause)}},function(t,n,r){var e=r(4),o=r(27),i=e("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},function(t,n,r){var e=r(7),o=r(17),i=r(12),c=r(32),u=r(89),a=TypeError;t.exports=function(t,n){var r=arguments.length<2?u(t):n;if(o(r))return i(e(r,t));throw a(c(t)+" is not iterable")}},function(t,n,r){var e=r(7),o=r(12),i=r(58);t.exports=function(t,n,r){var c,u;o(t);try{if(!(c=i(t,"return"))){if("throw"===n)throw r;return r}c=e(c,t)}catch(t){u=!0,c=t}if("throw"===n)throw r;if(u)throw c;return o(c),r}},function(t,n,r){var e=r(36);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)}},function(t,n,r){var e=r(5),o=r(20);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(1),o=r(2),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,n,r){var e=r(11),o=r(8),i=Function.prototype,c=e&&Object.getOwnPropertyDescriptor,u=o(i,"name"),a=u&&"something"===function(){}.name,f=u&&(!e||e&&c(i,"name").configurable);t.exports={EXISTS:u,PROPER:a,CONFIGURABLE:f}},function(t,n,r){"use strict";var e=r(91).IteratorPrototype,o=r(50),i=r(20),c=r(29),u=r(27),a=function(){return this};t.exports=function(t,n,r,f){var s=n+" Iterator";return t.prototype=o(e,{next:i(+!f,r)}),c(t,s,!1,!0),u[s]=a,t}},function(t,n,r){"use strict";var e=r(70),o=r(28);t.exports=e?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,r){r(138),r(148),r(150),r(151),r(152),r(153)},function(t,n,r){"use strict";var e,o,i,c=r(0),u=r(15),a=r(52),f=r(1),s=r(7),p=r(21),l=r(63),v=r(29),d=r(139),y=r(17),h=r(2),m=r(10),g=r(140),x=r(93),b=r(95).set,w=r(142),S=r(145),j=r(37),O=r(146),P=r(51),T=r(30),A=r(38),E=r(22),k=A.CONSTRUCTOR,I=A.REJECTION_EVENT,D=A.SUBCLASSING,L=P.getterFor("Promise"),_=P.set,C=T&&T.prototype,M=T,R=C,N=f.TypeError,F=f.document,B=f.process,G=E.f,U=G,z=!!(F&&F.createEvent&&f.dispatchEvent),q=function(t){var n;return!(!m(t)||!h(n=t.then))&&n},V=function(t,n){var r,e,o,i=n.value,c=1==n.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,p=t.domain;try{u?(c||(2===n.rejection&&Y(n),n.rejection=1),!0===u?r=i:(p&&p.enter(),r=u(i),p&&(p.exit(),o=!0)),r===t.promise?f(N("Promise-chain cycle")):(e=q(r))?s(e,r,a,f):a(r)):f(i)}catch(t){p&&!o&&p.exit(),f(t)}},H=function(t,n){t.notified||(t.notified=!0,w((function(){for(var r,e=t.reactions;r=e.get();)V(r,t);t.notified=!1,n&&!t.rejection&&K(t)})))},J=function(t,n,r){var e,o;z?((e=F.createEvent("Event")).promise=n,e.reason=r,e.initEvent(t,!1,!0),f.dispatchEvent(e)):e={promise:n,reason:r},!I&&(o=f["on"+t])?o(e):"unhandledrejection"===t&&S("Unhandled promise rejection",r)},K=function(t){s(b,f,(function(){var n,r=t.facade,e=t.value;if(W(t)&&(n=j((function(){a?B.emit("unhandledRejection",e,r):J("unhandledrejection",r,e)})),t.rejection=a||W(t)?2:1,n.error))throw n.value}))},W=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){s(b,f,(function(){var n=t.facade;a?B.emit("rejectionHandled",n):J("rejectionhandled",n,t.value)}))},X=function(t,n,r){return function(e){t(n,e,r)}},$=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,H(t,!0))},Q=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw N("Promise can't be resolved itself");var e=q(n);e?w((function(){var r={done:!1};try{s(e,n,X(Q,r,t),X($,r,t))}catch(n){$(r,n,t)}})):(t.value=n,t.state=1,H(t,!1))}catch(n){$({done:!1},n,t)}}};if(k&&(R=(M=function(t){g(this,R),y(t),s(e,this);var n=L(this);try{t(X(Q,n),X($,n))}catch(t){$(n,t)}}).prototype,(e=function(t){_(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(R,"then",(function(t,n){var r=L(this),e=G(x(this,M));return r.parent=!0,e.ok=!h(t)||t,e.fail=h(n)&&n,e.domain=a?B.domain:void 0,0==r.state?r.reactions.add(e):w((function(){V(e,r)})),e.promise})),o=function(){var t=new e,n=L(t);this.promise=t,this.resolve=X(Q,n),this.reject=X($,n)},E.f=G=function(t){return t===M||void 0===t?new o(t):U(t)},!u&&h(T)&&C!==Object.prototype)){i=C.then,D||p(C,"then",(function(t,n){var r=this;return new M((function(t,n){s(i,r,t,n)})).then(t,n)}),{unsafe:!0});try{delete C.constructor}catch(t){}l&&l(C,R)}c({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:M}),v(M,"Promise",!1,!0),d("Promise")},function(t,n,r){"use strict";var e=r(9),o=r(16),i=r(4),c=r(11),u=i("species");t.exports=function(t){var n=e(t),r=o.f;c&&n&&!n[u]&&r(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(14),o=TypeError;t.exports=function(t,n){if(e(n,t))return t;throw o("Incorrect invocation")}},function(t,n,r){var e=r(73),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a constructor")}},function(t,n,r){var e,o,i,c,u,a,f,s,p=r(1),l=r(34),v=r(43).f,d=r(95).set,y=r(97),h=r(143),m=r(144),g=r(52),x=p.MutationObserver||p.WebKitMutationObserver,b=p.document,w=p.process,S=p.Promise,j=v(p,"queueMicrotask"),O=j&&j.value;O||(e=function(){var t,n;for(g&&(t=w.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?c():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!x||!b?!h&&S&&S.resolve?((f=S.resolve(void 0)).constructor=S,s=l(f.then,f),c=function(){s(e)}):g?c=function(){w.nextTick(e)}:(d=l(d,p),c=function(){d(e)}):(u=!0,a=b.createTextNode(""),new x(e).observe(a,{characterData:!0}),c=function(){a.data=u=!u})),t.exports=O||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,c()),i=n}},function(t,n,r){var e=r(31),o=r(1);t.exports=/ipad|iphone|ipod/i.test(e)&&void 0!==o.Pebble},function(t,n,r){var e=r(31);t.exports=/web0s(?!.*chrome)/i.test(e)},function(t,n,r){var e=r(1);t.exports=function(t,n){var r=e.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))}},function(t,n){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,n,r){var e=r(98),o=r(52);t.exports=!e&&!o&&"object"==typeof window&&"object"==typeof document},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{all:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,s=1;a(t,(function(t){var i=u++,a=!1;s++,o(r,n,t).then((function(t){a||(a=!0,c[i]=t,--s||e(c))}),f)})),--s||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){var e=r(4)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[e]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i={};i[e]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(38).CONSTRUCTOR,c=r(30),u=r(9),a=r(2),f=r(21),s=c&&c.prototype;if(e({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(c)){var p=u("Promise").prototype.catch;s.catch!==p&&f(s,"catch",p,{unsafe:!0})}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{race:function(t){var n=this,r=c.f(n),e=r.reject,f=u((function(){var c=i(n.resolve);a(t,(function(t){o(c,n,t).then(r.resolve,e)}))}));return f.error&&e(f.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(22);e({target:"Promise",stat:!0,forced:r(38).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(9),i=r(15),c=r(30),u=r(38).CONSTRUCTOR,a=r(100),f=o("Promise"),s=i&&!u;e({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return a(s&&this===f?c:this,t)}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0},{allSettled:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,f=1;a(t,(function(t){var i=u++,a=!1;f++,o(r,n,t).then((function(t){a||(a=!0,c[i]={status:"fulfilled",value:t},--f||e(c))}),(function(t){a||(a=!0,c[i]={status:"rejected",reason:t},--f||e(c))}))})),--f||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(9),u=r(22),a=r(37),f=r(35);e({target:"Promise",stat:!0},{any:function(t){var n=this,r=c("AggregateError"),e=u.f(n),s=e.resolve,p=e.reject,l=a((function(){var e=i(n.resolve),c=[],u=0,a=1,l=!1;f(t,(function(t){var i=u++,f=!1;a++,o(e,n,t).then((function(t){f||l||(l=!0,s(t))}),(function(t){f||l||(f=!0,c[i]=t,--a||p(new r(c,"No one promise resolved")))}))})),--a||p(new r(c,"No one promise resolved"))}));return l.error&&p(l.value),e.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(30),c=r(5),u=r(9),a=r(2),f=r(93),s=r(100),p=r(21),l=i&&i.prototype;if(e({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=f(this,u("Promise")),r=a(t);return this.then(r?function(r){return s(n,t()).then((function(){return r}))}:t,r?function(r){return s(n,t()).then((function(){throw r}))}:t)}}),!o&&a(i)){var v=u("Promise").prototype.finally;l.finally!==v&&p(l,"finally",v,{unsafe:!0})}},function(t,n,r){var e=r(6),o=r(66),i=r(36),c=r(57),u=e("".charAt),a=e("".charCodeAt),f=e("".slice),s=function(t){return function(n,r){var e,s,p=i(c(n)),l=o(r),v=p.length;return l<0||l>=v?t?"":void 0:(e=a(p,l))<55296||e>56319||l+1===v||(s=a(p,l+1))<56320||s>57343?t?u(p,l):e:t?f(p,l,l+2):s-56320+(e-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,r){var e=r(160);t.exports=e},function(t,n,r){var e=r(14),o=r(161),i=Array.prototype;t.exports=function(t){var n=t.slice;return t===i||e(i,t)&&n===i.slice?o:n}},function(t,n,r){r(162);var e=r(40);t.exports=e("Array").slice},function(t,n,r){"use strict";var e=r(0),o=r(39),i=r(73),c=r(10),u=r(65),a=r(26),f=r(18),s=r(74),p=r(4),l=r(55),v=r(53),d=l("slice"),y=p("species"),h=Array,m=Math.max;e({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var r,e,p,l=f(this),d=a(l),g=u(t,d),x=u(void 0===n?d:n,d);if(o(l)&&(r=l.constructor,(i(r)&&(r===h||o(r.prototype))||c(r)&&null===(r=r[y]))&&(r=void 0),r===h||void 0===r))return v(l,g,x);for(e=new(void 0===r?h:r)(m(x-g,0)),p=0;g<x;g++,p++)g in l&&s(e,p,l[g]);return e.length=p,e}})},function(t,n,r){t.exports=r(164)},function(t,n,r){var e=r(165);t.exports=e},function(t,n,r){var e=r(14),o=r(166),i=Array.prototype;t.exports=function(t){var n=t.map;return t===i||e(i,t)&&n===i.map?o:n}},function(t,n,r){r(167);var e=r(40);t.exports=e("Array").map},function(t,n,r){"use strict";var e=r(0),o=r(56).map;e({target:"Array",proto:!0,forced:!r(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(39),o=r(73),i=r(10),c=r(4)("species"),u=Array;t.exports=function(t){var n;return e(t)&&(n=t.constructor,(o(n)&&(n===u||e(n.prototype))||i(n)&&null===(n=n[c]))&&(n=void 0)),void 0===n?u:n}},function(t,n,r){(function(e){var o,i=r(170),c=r(76),u=r(216),a=r(102),f=r(222),s=r(226),p=r(233),l=r(237),v=r(241),d=r(245);!function(y,h){"use strict";var m,g=(y=void 0!==y?y:"undefined"!=typeof self?self:void 0!==e?e:{}).IDBKeyRange||y.webkitIDBKeyRange,x="readonly",b="readwrite",w=Object.prototype.hasOwnProperty,S=function(){if(!m&&!(m=y.indexedDB||y.webkitIndexedDB||y.mozIndexedDB||y.oIndexedDB||y.msIndexedDB||(null===y.indexedDB&&y.shimIndexedDB?y.shimIndexedDB:void 0)))throw"IndexedDB required";return m},j=!1,O=navigator&&!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent),P=function(t){return t},T=function(t){var n;return a(n=Object.prototype.toString.call(t)).call(n,8,-1).toLowerCase()},A=function(t){return"function"==typeof t},E=function(t){return"number"===T(t)},k=function(t){return"array"===T(t)},I=function(t){return void 0===t},D=function(t,n){var r=this,e=!1;this.name=n,this.getIndexedDB=function(){return t},this.add=function(n){if(e)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(f(arguments[u+1]))for(var a=0;a<arguments[u+1].length;a++)o[i]=arguments[u+1][a],i++;else o[i]=arguments[u+1],i++;var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){s(o).call(o,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=v.add(t,r)}else n=v.add(t);n.onsuccess=function(n){var r=n.target,e=r.source.keyPath;null===e&&(e="__id__"),p(t,e,{value:r.result,enumerable:!0})}})),l.oncomplete=function(){t(o,r)},l.onerror=function(t){t.preventDefault(),n(t)},l.onabort=function(t){n(t)}}))},this.updateAndDelete=function(n,r,o){if(e)throw"Database has been closed";var i=t.transaction(n,b),u=i.objectStore(n),a=u.keyPath;return new c((function(t,n){s(r).call(r,(function(t){if(t.item&&t.key){var n=t.key;t=t.item,u.put(t,n)}else u.put(t)})),s(o).call(o,(function(t){u.delete(t[a])})),i.oncomplete=function(){t([r,o])},i.onerror=function(t){n(t)}}))},this.update=function(n){if(e)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)f(o=arguments[u])?i=l(i).call(i,o):i.push(o);var a=t.transaction(n,b),p=a.objectStore(n);p.keyPath;return new c((function(t,n){s(i).call(i,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=p.put(t,r)}else n=p.put(t);n.onsuccess=function(t){},n.onerror=function(t){}})),a.oncomplete=function(){t(i,r)},a.onerror=function(t){n(t)},a.onabort=function(t){n(t)}}))},this.remove=function(n,r,o,i,u,a,p){if(e)throw"Database has been closed";var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){function e(t){return null==t}var c;(e(i)&&(i=-1/0),e(u)&&(u=1/0),null===r||f(r)||(r=[r]),e(o))?null!==r?s(r).call(r,(function(t){v.delete(t)})):v.delete(range=g.bound(i,u,a,p)):(c=null!==r?g.only(r[0]):g.bound(i,u,a,p),v.index(o).openCursor(c).onsuccess=function(t){var n=t.target.result;n&&(n.delete(),n.continue())});l.oncomplete=function(){t()},l.onerror=function(t){n(t)},l.onabort=function(t){n(t)}}))},this.clear=function(n){if(e)throw"Database has been closed";var r=t.transaction(n,b);r.objectStore(n).clear();return new c((function(t,n){r.oncomplete=function(){t()},r.onerror=function(t){n(t)}}))},this.close=function(){e||(t.close(),e=!0,delete C[n])},this.get=function(n,r){if(e)throw"Database has been closed";var o=t.transaction(n),i=o.objectStore(n).get(r);return new c((function(t,n){i.onsuccess=function(n){t(n.target.result)},o.onerror=function(t){n(t)}}))},this.query=function(n,r){if(e)throw"Database has been closed";return new L(n,t,r)},this.count=function(n,r){if(e)throw"Database has been closed";t.transaction(n).objectStore(n)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var n in r[t]={},r)w.call(r,n)&&"close"!==n&&(r[t][n]=function(n){return function(){var e,o=l(e=[t]).call(e,a([]).call(arguments,0));return r[n].apply(r,o)}}(n))}(t.objectStoreNames[o])},L=function(t,n,r){var e,o=this,u=!1,f=!1,p=function(e,o,a,p,l,d,y){return new c((function(c,h){var m=u||f?b:x,w=n.transaction(t,m),S=w.objectStore(t),j=r?S.index(r):S,O=e?g[e].apply(null,o):null,P=[],T=[O],E=0;l=l||null,d=d||[],"count"!==a&&T.push(p||"next");var k=!!u&&v(u);j[a].apply(j,T).onsuccess=function(t){var n=t.target.result;if(i(n)===i(0))P=n;else if(n)if(null!==l&&l[0]>E)E=l[0],n.advance(l[0]);else if(null!==l&&E>=l[0]+l[1]);else{var r=!0,e="value"in n?n.value:n.key;s(d).call(d,(function(t){t&&t.length&&(2===t.length?r=r&&e[t[0]]===t[1]:A(t[0])&&(r=r&&t[0].apply(void 0,[e])))})),r&&(E++,P.push(y(e)),f?n.delete():u&&(e=function(t){for(var n=0;n<k.length;n++){var r=k[n],e=u[r];e instanceof Function&&(e=e(t)),t[r]=e}return t}(e),n.update(e))),n.continue()}},w.oncomplete=function(){c(P)},w.onerror=function(t){h(t)},w.onabort=function(t){h(t)}}))},l=function(t,n){var r="next",e="openCursor",o=[],i=null,c=P,s=!1,l=function(){return p(t,n,e,s?r+"unique":r,i,o,c)},v=function(){return r=null,e="count",{execute:l}},d=function t(){return 1==(i=k(arguments[0])?arguments[0]:a(Array.prototype).call(arguments,0,2)).length&&i.unshift(0),E(i[1])||(i=null),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:t,map:w,remove:S}},y=function t(n){return(n=!!I(n)||!!n)&&(e="openKeyCursor"),{execute:l,keys:t,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},h=function t(){return o.push(a(Array.prototype).call(arguments,0,2)),{execute:l,count:v,keys:y,filter:t,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},m=function t(n){return n=!!I(n)||!!n,r=n?"next":"prev",{execute:l,count:v,keys:y,filter:h,asc:t,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},g=function t(n){return n=!!I(n)||!!n,r=n?"prev":"next",{execute:l,count:v,keys:y,filter:h,asc:m,desc:t,distinct:x,modify:b,limit:d,map:w,remove:S}},x=function t(n){return n=!!I(n)||!!n,s=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:t,modify:b,limit:d,map:w,remove:S}},b=function t(n){return u=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:t,limit:d,map:w,remove:S}},w=function t(n){return A(n)&&(c=n),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:t,remove:S}},S=function t(n){return n=!!I(n)||!!n,f=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:t}};return{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}};s(e="only bound upperBound lowerBound".split(" ")).call(e,(function(t){o[t]=function(){return new l(t,arguments)}})),this.filter=function(){var t=new l(null,null);return d(t).apply(t,arguments)},this.all=function(){var t;return d(t=this).call(t)}},_=function(t,n,r,e){var o=t.target.result,i=new D(o,n);return C[n]=o,c.resolve(i)},C={},M={version:"0.10.2",open:function(t){var n;return new c((function(r,e){var o;C[t.server]?_({target:{result:C[t.server]}},t.server,t.version,t.schema).then(r,e):(j?c.resolve():O&&S().databases?new c((function(t){var n=function(){return S().databases().finally(t)};o=u(n,100),n()})).finally((function(){j=!0,clearInterval(o)})):(j=!0,c.resolve())).then((function(){try{n=S().open(t.server,t.version)}catch(t){e(t)}n.onsuccess=function(n){_(n,t.server,t.version,t.schema).then(r,e)},n.onupgradeneeded=function(n){!function(t,n,r){for(var e in"function"==typeof n&&(n=n()),n){var o,i=n[e];for(var c in o=!w.call(n,e)||r.objectStoreNames.contains(e)?t.currentTarget.transaction.objectStore(e):r.createObjectStore(e,i.key),i.indexes){var u=i.indexes[c];try{o.index(c)}catch(t){o.createIndex(c,u.key||c,v(u).length?u:{unique:!1})}}}}(n,t.schema,n.target.result)},n.onerror=function(t){e(t)}}))}))},remove:function(t){return new c((function(n,r){if(!t)return n();var e,o;i(t)===D&&(t=t.name),"string"==typeof t&&(e=C[t]),e&&"function"==typeof e.close&&e.close();try{o=S().deleteDatabase(t)}catch(t){r(t)}o.onsuccess=function(r){delete C[t],n(t)},o.onerror=function(t){r(t)},o.onblocked=function(t){r(t)}}))}};void 0!==t.exports?t.exports=M:void 0===(o=function(){return M}.call(n,r,n,t))||(t.exports=o)}(void 0)}).call(this,r(77))},function(t,n,r){var e=r(171),o=r(210);function i(n){return t.exports=i="function"==typeof e&&"symbol"==typeof o?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,r){t.exports=r(172)},function(t,n,r){t.exports=r(173)},function(t,n,r){var e=r(174);r(203),r(204),r(205),r(206),r(207),r(208),r(209),t.exports=e},function(t,n,r){var e=r(175);r(202),t.exports=e},function(t,n,r){var e=r(176);r(54),t.exports=e},function(t,n,r){r(104),r(72),r(178),r(186),r(187),r(188),r(189),r(107),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201);var e=r(13);t.exports=e.Symbol},function(t,n){var r=TypeError;t.exports=function(t){if(t>9007199254740991)throw r("Maximum allowed index exceeded");return t}},function(t,n,r){r(179),r(182),r(183),r(184),r(185)},function(t,n,r){"use strict";var e=r(0),o=r(1),i=r(7),c=r(6),u=r(15),a=r(11),f=r(24),s=r(5),p=r(8),l=r(14),v=r(12),d=r(18),y=r(45),h=r(36),m=r(20),g=r(50),x=r(69),b=r(64),w=r(180),S=r(68),j=r(43),O=r(16),P=r(87),T=r(80),A=r(21),E=r(33),k=r(48),I=r(49),D=r(60),L=r(4),_=r(75),C=r(3),M=r(105),R=r(29),N=r(51),F=r(56).forEach,B=k("hidden"),G=N.set,U=N.getterFor("Symbol"),z=Object.prototype,q=o.Symbol,V=q&&q.prototype,H=o.TypeError,J=o.QObject,K=j.f,W=O.f,Y=w.f,X=T.f,$=c([].push),Q=E("symbols"),Z=E("op-symbols"),tt=E("wks"),nt=!J||!J.prototype||!J.prototype.findChild,rt=a&&s((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,n,r){var e=K(z,n);e&&delete z[n],W(t,n,r),e&&t!==z&&W(z,n,e)}:W,et=function(t,n){var r=Q[t]=g(V);return G(r,{type:"Symbol",tag:t,description:n}),a||(r.description=n),r},ot=function(t,n,r){t===z&&ot(Z,n,r),v(t);var e=y(n);return v(r),p(Q,e)?(r.enumerable?(p(t,B)&&t[B][e]&&(t[B][e]=!1),r=g(r,{enumerable:m(0,!1)})):(p(t,B)||W(t,B,m(1,{})),t[B][e]=!0),rt(t,e,r)):W(t,e,r)},it=function(t,n){v(t);var r=d(n),e=x(r).concat(ft(r));return F(e,(function(n){a&&!i(ct,r,n)||ot(t,n,r[n])})),t},ct=function(t){var n=y(t),r=i(X,this,n);return!(this===z&&p(Q,n)&&!p(Z,n))&&(!(r||!p(this,n)||!p(Q,n)||p(this,B)&&this[B][n])||r)},ut=function(t,n){var r=d(t),e=y(n);if(r!==z||!p(Q,e)||p(Z,e)){var o=K(r,e);return!o||!p(Q,e)||p(r,B)&&r[B][e]||(o.enumerable=!0),o}},at=function(t){var n=Y(d(t)),r=[];return F(n,(function(t){p(Q,t)||p(I,t)||$(r,t)})),r},ft=function(t){var n=t===z,r=Y(n?Z:d(t)),e=[];return F(r,(function(t){!p(Q,t)||n&&!p(z,t)||$(e,Q[t])})),e};f||(A(V=(q=function(){if(l(V,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,n=D(t),r=function(t){this===z&&i(r,Z,t),p(this,B)&&p(this[B],n)&&(this[B][n]=!1),rt(this,n,m(1,t))};return a&&nt&&rt(z,n,{configurable:!0,set:r}),et(n,t)}).prototype,"toString",(function(){return U(this).tag})),A(q,"withoutSetter",(function(t){return et(D(t),t)})),T.f=ct,O.f=ot,P.f=it,j.f=ut,b.f=w.f=at,S.f=ft,_.f=function(t){return et(L(t),t)},a&&(W(V,"description",{configurable:!0,get:function(){return U(this).description}}),u||A(z,"propertyIsEnumerable",ct,{unsafe:!0}))),e({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:q}),F(x(tt),(function(t){C(t)})),e({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),e({target:"Object",stat:!0,forced:!f,sham:!a},{create:function(t,n){return void 0===n?g(t):it(g(t),n)},defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:ut}),e({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:at}),M(),R(q,"Symbol"),I[B]=!0},function(t,n,r){var e=r(23),o=r(18),i=r(64).f,c=r(181),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==e(t)?function(t){try{return i(t)}catch(t){return c(u)}}(t):i(o(t))}},function(t,n,r){var e=r(65),o=r(26),i=r(74),c=Array,u=Math.max;t.exports=function(t,n,r){for(var a=o(t),f=e(n,a),s=e(void 0===r?a:r,a),p=c(u(s-f,0)),l=0;f<s;f++,l++)i(p,l,t[f]);return p.length=l,p}},function(t,n,r){var e=r(0),o=r(9),i=r(8),c=r(36),u=r(33),a=r(106),f=u("string-to-symbol-registry"),s=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{for:function(t){var n=c(t);if(i(f,n))return f[n];var r=o("Symbol")(n);return f[n]=r,s[r]=n,r}})},function(t,n,r){var e=r(0),o=r(8),i=r(46),c=r(32),u=r(33),a=r(106),f=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(c(t)+" is not a symbol");if(o(f,t))return f[t]}})},function(t,n,r){var e=r(0),o=r(9),i=r(41),c=r(7),u=r(6),a=r(5),f=r(39),s=r(2),p=r(10),l=r(46),v=r(53),d=r(24),y=o("JSON","stringify"),h=u(/./.exec),m=u("".charAt),g=u("".charCodeAt),x=u("".replace),b=u(1..toString),w=/[\\uD800-\\uDFFF]/g,S=/^[\\uD800-\\uDBFF]$/,j=/^[\\uDC00-\\uDFFF]$/,O=!d||a((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),P=a((function(){return'"\\\\udf06\\\\ud834"'!==y("\\udf06\\ud834")||'"\\\\udead"'!==y("\\udead")})),T=function(t,n){var r=v(arguments),e=n;if((p(n)||void 0!==t)&&!l(t))return f(n)||(n=function(t,n){if(s(e)&&(n=c(e,this,t,n)),!l(n))return n}),r[1]=n,i(y,null,r)},A=function(t,n,r){var e=m(r,n-1),o=m(r,n+1);return h(S,t)&&!h(j,o)||h(j,t)&&!h(S,e)?"\\\\u"+b(g(t,0),16):t};y&&e({target:"JSON",stat:!0,arity:3,forced:O||P},{stringify:function(t,n,r){var e=v(arguments),o=i(O?T:y,null,e);return P&&"string"==typeof o?x(o,w,A):o}})},function(t,n,r){var e=r(0),o=r(24),i=r(5),c=r(68),u=r(25);e({target:"Object",stat:!0,forced:!o||i((function(){c.f(1)}))},{getOwnPropertySymbols:function(t){var n=c.f;return n?n(u(t)):[]}})},function(t,n,r){r(3)("asyncIterator")},function(t,n){},function(t,n,r){r(3)("hasInstance")},function(t,n,r){r(3)("isConcatSpreadable")},function(t,n,r){r(3)("match")},function(t,n,r){r(3)("matchAll")},function(t,n,r){r(3)("replace")},function(t,n,r){r(3)("search")},function(t,n,r){r(3)("species")},function(t,n,r){r(3)("split")},function(t,n,r){var e=r(3),o=r(105);e("toPrimitive"),o()},function(t,n,r){var e=r(9),o=r(3),i=r(29);o("toStringTag"),i(e("Symbol"),"Symbol")},function(t,n,r){r(3)("unscopables")},function(t,n,r){var e=r(1);r(29)(e.JSON,"JSON",!0)},function(t,n){},function(t,n){},function(t,n,r){r(3)("dispose")},function(t,n,r){r(3)("asyncDispose")},function(t,n,r){r(3)("matcher")},function(t,n,r){r(3)("metadataKey")},function(t,n,r){r(3)("observable")},function(t,n,r){r(3)("metadata")},function(t,n,r){r(3)("patternMatch")},function(t,n,r){r(3)("replaceAll")},function(t,n,r){t.exports=r(211)},function(t,n,r){t.exports=r(212)},function(t,n,r){var e=r(213);t.exports=e},function(t,n,r){var e=r(214);t.exports=e},function(t,n,r){var e=r(215);r(54),t.exports=e},function(t,n,r){r(71),r(72),r(101),r(107);var e=r(75);t.exports=e.f("iterator")},function(t,n,r){t.exports=r(217)},function(t,n,r){r(218);var e=r(13);t.exports=e.setInterval},function(t,n,r){r(219),r(221)},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setInterval,!0);e({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,n){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setTimeout,!0);e({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,n,r){t.exports=r(223)},function(t,n,r){var e=r(224);t.exports=e},function(t,n,r){r(225);var e=r(13);t.exports=e.Array.isArray},function(t,n,r){r(0)({target:"Array",stat:!0},{isArray:r(39)})},function(t,n,r){t.exports=r(227)},function(t,n,r){r(54);var e=r(28),o=r(8),i=r(14),c=r(228),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var n=t.forEach;return t===u||i(u,t)&&n===u.forEach||o(a,e(t))?c:n}},function(t,n,r){var e=r(229);t.exports=e},function(t,n,r){r(230);var e=r(40);t.exports=e("Array").forEach},function(t,n,r){"use strict";var e=r(0),o=r(231);e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,n,r){"use strict";var e=r(56).forEach,o=r(232)("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,r){"use strict";var e=r(5);t.exports=function(t,n){var r=[][t];return!!r&&e((function(){r.call(null,n||function(){return 1},1)}))}},function(t,n,r){t.exports=r(234)},function(t,n,r){var e=r(235);t.exports=e},function(t,n,r){r(236);var e=r(13).Object,o=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(o.sham=!0)},function(t,n,r){var e=r(0),o=r(11),i=r(16).f;e({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,n,r){t.exports=r(238)},function(t,n,r){var e=r(239);t.exports=e},function(t,n,r){var e=r(14),o=r(240),i=Array.prototype;t.exports=function(t){var n=t.concat;return t===i||e(i,t)&&n===i.concat?o:n}},function(t,n,r){r(104);var e=r(40);t.exports=e("Array").concat},function(t,n,r){t.exports=r(242)},function(t,n,r){var e=r(243);t.exports=e},function(t,n,r){r(244);var e=r(13);t.exports=e.Object.keys},function(t,n,r){var e=r(0),o=r(25),i=r(69);e({target:"Object",stat:!0,forced:r(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,r){t.exports=r(246)},function(t,n,r){var e=r(247);t.exports=e},function(t,n,r){var e=r(14),o=r(248),i=Array.prototype;t.exports=function(t){var n=t.filter;return t===i||e(i,t)&&n===i.filter?o:n}},function(t,n,r){r(249);var e=r(40);t.exports=e("Array").filter},function(t,n,r){"use strict";var e=r(0),o=r(56).filter;e({target:"Array",proto:!0,forced:!r(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}]);`,"Worker",void 0,void 0)}},function(t,r,e){var n=e(3),g=e(15),y=e(9),i=e(304),k={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function $(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.server=null,this.expire=V.expire||72,this.name=V.name}var L=$.prototype;L.init=function(){var V=this;if(!this.server)return i.open({server:"nim-log-"+this.name,version:1,schema:k}).then(function(z){V.server=z})},L.putLog=function(V){var z=this;if(!this.server)return n.reject("no db server");var re=g(V).call(V,-1)[0].time-36e5*this.expire;return this.deleteLogs(re).then(function(){return z.server.add("log",V)})},L.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then(function(V){var z={},re=g(V).call(V,-1)[0];return z.logs=y(V).call(V,function(ie){return ie.log}).join(`\r
`),z.time=re&&re.time,z}):n.reject("no db server")},L.deleteLogs=function(V){return this.server?this.server.remove("log",null,"time",0,V):n.reject("no db server")},t.exports=$},function(t,r,e){e(253);var n=e(13);t.exports=n.setInterval},function(t,r,e){var n=e(19),g=e(572),y=Function.prototype;t.exports=function(i){var k=i.bind;return i===y||n(y,i)&&k===y.bind?g:k}},function(t,r,e){e(573);var n=e(29);t.exports=n("Function").bind},function(t,r,e){var n=e(1),g=e(274);n({target:"Function",proto:!0,forced:Function.bind!==g},{bind:g})},function(t,r,e){var n=e(18),g=e(26),y=e(2),i=e(24),k=e(4),$=e(62),L=e(187);function V(ie){ie.onuploading&&this.on("uploading",ie.onuploading),L.call(this,ie)}var z=L.prototype,re=V.prototype=n(z);re.doSend=function(){var ie,ue,le,oe=this.options,ae=oe.headers,Ue=this.xhr=new XMLHttpRequest;if(ae["Content-Type"]==="multipart/form-data"){var de,_e;delete ae["Content-Type"],Ue.upload.onprogress=g(de=this.onProgress).call(de,this),Ue.upload.onload=g(_e=this.onProgress).call(_e,this);var Ve,$e=oe.data;oe.data=new window.FormData,$e&&y(Ve=$.getKeys($e,oe.putFileAtEnd)).call(Ve,function(Et){var ir=$e[Et];ir.tagName&&ir.tagName.toUpperCase()==="INPUT"?ir.type==="file"&&y([]).call(ir.files,function(ur){oe.data.append($.dataset(ir,"name")||ir.name||ur.name||"file-"+$.uniqueID(),ur)}):oe.data.append(Et,ir)})}else if(ae["x-nos-token"]){var Lt,jt;Ue.upload.onprogress=g(Lt=this.onProgress).call(Lt,this),Ue.upload.onload=g(jt=this.onProgress).call(jt,this)}Ue.onreadystatechange=g(ie=this.onStateChange).call(ie,this),oe.timeout!==0&&(this.timer=i(g(le=this.onTimeout).call(le,this),oe.timeout)),Ue.open(oe.method,oe.url,!oe.sync),y(ue=k(ae)).call(ue,function(Et){Ue.setRequestHeader(Et,ae[Et])}),oe.cookie&&"withCredentials"in Ue&&(Ue.withCredentials=!0),Ue.send(oe.data),this.afterSend()},re.onProgress=function(ie){ie.lengthComputable&&ie.loaded<=ie.total&&this.emit("uploading",ie)},re.onStateChange=function(){var ie,ue=this.xhr;ue.readyState===4&&(ie={status:ue.status,result:ue.responseText||""},this.onLoad(ie))},re.getResponseHeader=function(ie){var ue=this.xhr;return ue?ue.getResponseHeader(ie):""},re.destroy=function(){clearTimeout(this.timer);try{this.xhr.onreadystatechange=$.f,this.xhr.abort()}catch{}z.destroy.call(this)},t.exports=V},function(t,r,e){var n;/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(g){function y(){}var i=y.prototype,k=g.EventEmitter;function $(V,z){for(var re=V.length;re--;)if(V[re].listener===z)return re;return-1}function L(V){return function(){return this[V].apply(this,arguments)}}i.getListeners=function(V){var z,re,ie=this._getEvents();if(V instanceof RegExp)for(re in z={},ie)ie.hasOwnProperty(re)&&V.test(re)&&(z[re]=ie[re]);else z=ie[V]||(ie[V]=[]);return z},i.flattenListeners=function(V){var z,re=[];for(z=0;z<V.length;z+=1)re.push(V[z].listener);return re},i.getListenersAsObject=function(V){var z,re=this.getListeners(V);return re instanceof Array&&((z={})[V]=re),z||re},i.addListener=function(V,z){if(!function le(oe){return typeof oe=="function"||oe instanceof RegExp||!(!oe||typeof oe!="object")&&le(oe.listener)}(z))throw new TypeError("listener must be a function");var re,ie=this.getListenersAsObject(V),ue=typeof z=="object";for(re in ie)ie.hasOwnProperty(re)&&$(ie[re],z)===-1&&ie[re].push(ue?z:{listener:z,once:!1});return this},i.on=L("addListener"),i.addOnceListener=function(V,z){return this.addListener(V,{listener:z,once:!0})},i.once=L("addOnceListener"),i.defineEvent=function(V){return this.getListeners(V),this},i.defineEvents=function(V){for(var z=0;z<V.length;z+=1)this.defineEvent(V[z]);return this},i.removeListener=function(V,z){var re,ie,ue=this.getListenersAsObject(V);for(ie in ue)ue.hasOwnProperty(ie)&&(re=$(ue[ie],z))!==-1&&ue[ie].splice(re,1);return this},i.off=L("removeListener"),i.addListeners=function(V,z){return this.manipulateListeners(!1,V,z)},i.removeListeners=function(V,z){return this.manipulateListeners(!0,V,z)},i.manipulateListeners=function(V,z,re){var ie,ue,le=V?this.removeListener:this.addListener,oe=V?this.removeListeners:this.addListeners;if(typeof z!="object"||z instanceof RegExp)for(ie=re.length;ie--;)le.call(this,z,re[ie]);else for(ie in z)z.hasOwnProperty(ie)&&(ue=z[ie])&&(typeof ue=="function"?le.call(this,ie,ue):oe.call(this,ie,ue));return this},i.removeEvent=function(V){var z,re=typeof V,ie=this._getEvents();if(re==="string")delete ie[V];else if(V instanceof RegExp)for(z in ie)ie.hasOwnProperty(z)&&V.test(z)&&delete ie[z];else delete this._events;return this},i.removeAllListeners=L("removeEvent"),i.emitEvent=function(V,z){var re,ie,ue,le,oe=this.getListenersAsObject(V);for(le in oe)if(oe.hasOwnProperty(le))for(re=oe[le].slice(0),ue=0;ue<re.length;ue++)(ie=re[ue]).once===!0&&this.removeListener(V,ie.listener),ie.listener.apply(this,z||[])===this._getOnceReturnValue()&&this.removeListener(V,ie.listener);return this},i.trigger=L("emitEvent"),i.emit=function(V){var z=Array.prototype.slice.call(arguments,1);return this.emitEvent(V,z)},i.setOnceReturnValue=function(V){return this._onceReturnValue=V,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},y.noConflict=function(){return g.EventEmitter=k,y},(n=(function(){return y}).call(g,e,g,t))===void 0||(t.exports=n)})(typeof window<"u"?window:this||{})},function(t,r,e){var n=e(18),g=e(7),y=e(2),i=e(26),k=e(90),$=e(62),L=e(187),V=e(275),z="NEJ-UPLOAD-RESULT:",re={};function ie(oe){this.init(),L.call(this,oe)}var ue=L.prototype,le=ie.prototype=n(ue);le.init=function(){var oe=!1;function ae(Ue){var de=Ue.data;if(g(de).call(de,z)===0){var _e=(de=JSON.parse(de.replace(z,""))).key,Ve=re[_e];Ve&&(delete re[_e],de.result=decodeURIComponent(de.result||""),Ve.onLoad(de.result))}}return function(){(function(){if(!oe){oe=!0;var Ue=$.getGlobal();Ue.postMessage?$.on(Ue,"message",ae):(V.addMsgListener(ae),V.startTimer())}})()}}(),le.doSend=function(){var oe=this,ae=oe.options,Ue=oe.key="zoro-ajax-upload-iframe-"+$.uniqueID();re[Ue]=oe;var de=oe.form=$.html2node('<form style="display:none;"></form>');typeof document>"u"||document.body.appendChild(de),de.target=Ue,de.method="POST",de.enctype="multipart/form-data",de.encoding="multipart/form-data";var _e=ae.url,Ve=$.genUrlSep(_e);de.action=_e+Ve+"_proxy_=form";var $e,Lt=ae.data,jt=[],Et=[];Lt&&y($e=$.getKeys(Lt,ae.putFileAtEnd)).call($e,function(Dt){var lr=Lt[Dt];if(lr.tagName&&lr.tagName.toUpperCase()==="INPUT"){if(lr.type==="file"){var sr=lr,er=sr.cloneNode(!0);sr.parentNode.insertBefore(er,sr);var cr=$.dataset(sr,"name");cr&&(sr.name=cr),de.appendChild(sr),$.isFunction(sr.setAttribute)&&(sr.setAttribute("form",""),sr.removeAttribute("form")),jt.push(lr),Et.push(er)}}else{var or=$.html2node('<input type="hidden"/>');or.name=Dt,or.value=lr,de.appendChild(or)}});function ir(){y(jt).call(jt,function(Dt,lr){var sr=Et[lr];sr.parentNode&&(Dt.name=sr.name,$.isFunction(Dt.setAttribute)&&Dt.setAttribute("form",sr.getAttribute("form")),sr.parentNode.replaceChild(Dt,sr))})}var ur=oe.iframe=$.createIframe({name:Ue,onload:function(){var Dt;oe.aborted?ir():($.on(ur,"load",i(Dt=oe.checkResult).call(Dt,oe)),de.submit(),ir(),oe.afterSend())}})},le.checkResult=function(){var oe,ae;try{var Ue,de;if(oe=this.iframe.contentWindow.document.body,ae=k(Ue=oe.innerText||oe.textContent||"").call(Ue),g(ae).call(ae,z)>=0||g(de=oe.innerHTML).call(de,z)>=0)return}catch{return}this.onLoad(ae)},le.onLoad=function(oe){ue.onLoad.call(this,{status:200,result:oe}),$.remove(this.form),$.remove(this.iframe),ue.destroy.call(this)},le.destroy=function(){$.remove(this.iframe),$.remove(this.form)},le.abort=function(){this.aborted=!0,delete re[this.key],ue.abort.call(this)},t.exports=ie},function(t,r,e){var n=e(578);t.exports=n},function(t,r,e){var n=e(19),g=e(579),y=String.prototype;t.exports=function(i){var k=i.trim;return typeof i=="string"||i===y||n(y,i)&&k===y.trim?g:k}},function(t,r,e){e(580);var n=e(29);t.exports=n("String").trim},function(t,r,e){var n=e(1),g=e(185).trim;n({target:"String",proto:!0,forced:e(581)("trim")},{trim:function(){return g(this)}})},function(t,r,e){var n=e(227).PROPER,g=e(5),y=e(148);t.exports=function(i){return g(function(){return!!y[i]()||""[i]()!==""||n&&y[i].name!==i})}},function(t,r,e){var n=e(18),g=e(7),y=e(26),i=e(2),k=e(62),$=e(275),L=e(187),V={};function z(ue){this.init(),L.call(this,ue)}var re=L.prototype,ie=z.prototype=n(re);ie.init=function(){var ue="NEJ-AJAX-DATA:",le=!1;function oe(ae){var Ue=ae.data;if(g(Ue).call(Ue,ue)===0){var de=(Ue=JSON.parse(Ue.replace(ue,""))).key,_e=V[de];_e&&(delete V[de],Ue.result=decodeURIComponent(Ue.result||""),_e.onLoad(Ue))}}return function(){(function(){if(!le){le=!0;var ae=k.getGlobal();ae.postMessage?k.on(ae,"message",oe):$.addMsgListener(oe)}})()}}(),ie.doSend=function(){var ue=this.options,le=k.url2origin(ue.url),oe=ue.proxyUrl||le+"/res/nej_proxy_frame.html",ae=V[oe];if(k.isArray(ae)){var Ue;ae.push(y(Ue=this.doSend).call(Ue,this,ue))}else{var de;if(!ae)return V[oe]=[y(de=this.doSend).call(de,this,ue)],void k.createIframe({src:oe,onload:function($e){var Lt=V[oe];V[oe]=k.target($e).contentWindow,i(Lt).call(Lt,function(jt){try{jt()}catch{}})}});if(!this.aborted){var _e=this.key=k.uniqueID();V[_e]=this;var Ve=k.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},ue);Ve.key=_e,$.postMessage(ae,{data:Ve}),this.afterSend()}}},ie.abort=function(){this.aborted=!0,delete V[this.key],re.abort.call(this)},t.exports=z},function(t,r,e){var n,g,y=e(8),i=e(62),k=e(118),$=(n=/json/i,g=/post/i,function(L,V){var z=(V=V||{}).data=V.data||{},re=V.headers=V.headers||{},ie=i.checkWithDefault(re,"Accept","application/json"),ue=i.checkWithDefault(re,"Content-Type","application/json");return n.test(ie)&&(V.type="json"),g.test(V.method)&&n.test(ue)&&(V.data=y(z)),k(L,V)});t.exports=$},function(t,r,e){var n=e(4),g=e(16),y=e(7),i=e(2),k=e(6),$=e(15),L=e(24);t.exports={wrapSafeCallback:function(V,z){if(V.__wrapSafeCallback__)return V;V.__wrapSafeCallback__=!0;var re=n(V);return re=g(re).call(re,function(ie){return y(ie).call(ie,"on")===0&&Object.prototype.toString.call(V[ie])==="[object Function]"}),i(re).call(re,function(ie){var ue=V[ie];V[ie]=function(){var le=this;try{var oe;return ue.call.apply(ue,k(oe=[this]).call(oe,$(Array.prototype).call(arguments)))}catch(Ue){var ae;this.logger.error(k(ae="wrapSafeCallback. CallbackName: ".concat(ie,". Error: ")).call(ae,Ue)),L(function(){var de;throw le.logger.error(k(de="wrapSafeCallback. throw error in setTimeout. CallbackName: ".concat(ie,". Error: ")).call(de,Ue)),Ue},0),z.logger&&z.logger.error("userOption:".concat(ie," function error"),Ue)}}}),V}}},function(t,r,e){var n=e(586);t.exports=n},function(t,r,e){e(587);var n=e(13);t.exports=n.Date.now},function(t,r,e){var n=e(1),g=e(12),y=Date,i=g(y.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return i(new y)}})},function(t,r,e){var n=e(77).fn,g=e(0),y=e(25).reportAPI;n.isConnected=function(){return y({instance:this,className:"ApiBaseFn",funcName:"isConnected",hasCallback:!1}),!!this.protocol&&this.protocol.isConnected()},n.connect=function(){y({instance:this,className:"ApiBaseFn",funcName:"connect",hasCallback:!1}),this.protocol.processId=g.guid(),this.protocol.connect()},n.detectHeartbeat=function(){this.protocol.detectHeartbeat()},n.disconnect=function(){}},function(t,r,e){var n=e(22),g=e(8),y=e(26),i=e(9),k=e(37),$=e(15),L=e(141),V=e(90),z=e(7),re=e(48),ie=e(24),ue=e(10),le=e(32),oe=e(2),ae=e(6),Ue=e(4),de=e(52),_e=e(16),Ve=e(53),$e=e(54),Lt=e(55),jt=e(43),Et=e(51),ir=e(125),ur=["loc_x","loc_y","loc_z"];function Dt(rr,kr){var Er=Ue(rr);if(de){var xr=de(rr);kr&&(xr=_e(xr).call(xr,function(vr){return Ve(rr,vr).enumerable})),Er.push.apply(Er,xr)}return Er}function lr(rr){for(var kr=1;kr<arguments.length;kr++){var Er,xr,vr=arguments[kr]!=null?arguments[kr]:{};kr%2?oe(Er=Dt(Object(vr),!0)).call(Er,function(Ir){Et(rr,Ir,vr[Ir])}):$e?Lt(rr,$e(vr)):oe(xr=Dt(Object(vr))).call(xr,function(Ir){jt(rr,Ir,Ve(vr,Ir))})}return rr}var sr=e(77).fn,er=e(0),cr=e(608),or=e(41),hr=e(11),pr=e(277),Tr=e(278),Pr=e(285),_r=e(107).EMExceptionState,Mr=e(25).reportAPI;sr.sendText=function(rr){(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"sendText",async:!0,done:rr.done});var kr=rr,Er=kr.loc_x,xr=kr.loc_y,vr=kr.loc_z,Ir=ir(kr,ur);return Er===void 0||xr===void 0||vr===void 0?rr=lr({},Ir):(typeof rr.loc_x!="number"&&(rr.loc_x=0),typeof rr.loc_y!="number"&&(rr.loc_y=0),typeof rr.loc_z!="number"&&(rr.loc_z=0)),this.processCallback(rr),rr.msg=new this.message.TextMessage(rr),this.sendMsg(rr)},sr.previewFile=function(rr,kr){var Er;(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"previewFile",done:rr.done});var xr=this,vr=xr.protocol.appGrayConfig;if(vr&&vr.grayConfig&&vr.grayConfig.mixStoreEnable&&(rr.mixEnable=!0),er.verifyOptions(rr,"done","msg::previewFile"),rr.type||(rr.type="file"),er.verifyParamPresentJustOne(rr,"dataURL blob fileInput filePath wxFilePath fileObject","msg::previewFile"),er.exist(rr.maxSize)&&er.verifyParamType("maxSize",rr.maxSize,"number","api::previewFile"),er.exist(rr.commonUpload)&&er.verifyParamType("commonUpload",rr.commonUpload,"boolean","api::previewFile"),rr.nosSurvivalTime?(er.verifyParamType("nosSurvivalTime",rr.nosSurvivalTime,"number","api::Base.getInstance"),er.verifyParamMin("nosSurvivalTime",rr.nosSurvivalTime,86400,"api::Base.getInstance")):rr.nosSurvivalTime=this.nosSurvivalTime,rr.filePath=rr.filePath||rr.wxFilePath,delete rr.wxFilePath,rr.dataURL)rr.blob=Pr.fromDataURL(rr.dataURL);else if(!rr.blob){if(rr.fileInput){if(rr.fileInput=er.verifyFileInput(rr.fileInput,"msg::previewFile"),rr.fileInput.files){if(!rr.fileInput.files.length)return void rr.done(or.newNoFileError(""+rr.type+"",{callFunc:"msg::previewFile",fileInput:rr.fileInput}),rr);rr.fileSize=rr.fileInput.files[0].size}rr.fileInputName=er.getFileName(rr.fileInput)}}this.processCallback(rr);var Ir=g(pr.genResponseBody(rr.type)||{}).replace(/"/gi,'\\"'),Or=null,Cr=rr.transcode?"getNosTokenTrans":"getNosToken";if(rr.transcode){er.verifyOptions(rr,"fileInput","msg::previewFile");var yr=er.getFileInfo(rr.fileInput);Or={transToken:{name:yr.name,type:yr.transcodeType,transType:rr.transcode==="png"?11:10,size:yr.size,body:Ir}}}else Or=Ir;this[Cr]({responseBody:Or,nosToken:{nosScene:rr.nosScene||this.nosScene,nosSurvivalTime:rr.nosSurvivalTime},callback:y(Er=function(fr,Sr){if(fr)rr.done(fr);else if(rr.transcode?(rr.nosToken=Sr.nosToken,rr.docId=Sr.docId):rr.nosToken=Sr,rr.logger=xr.logger,rr.mixEnable){var Br,$r;if(!this.protocol.mixStorePolicy)try{this.protocol.mixStorePolicy=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[this.options.appKey]}catch(Lr){xr.logger.error("error:","get last mixStorePolicy failed",Lr)}if(!this.protocol.mixStorePolicy)return void xr.logger.error("error:","get mixStorePolicy failed");rr.providers=i(Br=this.protocol.mixStorePolicy.providers||[]).call(Br,function(Lr){return Number(Lr)}),rr.curProvider=rr.providers[0]?Number(rr.providers[0]):1,rr.nosPolicy=this.protocol.mixStorePolicy.nosPolicy,rr.s3Policy=this.protocol.mixStorePolicy.s3Policy,xr.getMixStoreToken({curProvider:rr.curProvider,responseBody:Or,callback:y($r=function(Lr,Gr){Lr?rr.done(Lr):(rr.mixStoreToken=Gr,rr.getMixStoreToken=function(qr,Yr){xr.getMixStoreToken({curProvider:qr,responseBody:Or,callback:function(bn,wn){bn?rr.done(bn):Yr(wn)}})},rr.curProvider===1&&(rr.nosToken=Gr),xr._doPreviewFile(rr,kr))}).call($r,xr)})}else this._doPreviewFile(rr,kr)}).call(Er,this)})},sr._doPreviewFile=function(rr,kr){var Er=this;rr=er.merge(rr,Er.options.providers);var xr=hr.genUploadUrl(rr.nosToken.bucket);rr.mixEnable&&rr.curProvider===1&&(xr=hr.genUploadUrl(rr.mixStoreToken.bucket));var vr,Ir=hr.chunkUploadUrl;Er.logger.info("_doPreviewFile: start upload"),rr.commonUpload||!Ir||hr.isWeixinApp||hr.isNodejs||hr.isRN?(rr.commonUpload=!0,vr=xr):(vr=Ir,rr.nosLbsUrls=hr.nosLbsUrls,Er.options.edgeList?rr.edgeList=Er.options.edgeList:rr.updateNosEdgeList=function(Sr){Er.options.edgeList=Sr}),Er.protocol.reporterHook.emit("reporter/uploadStart");var Or=this.assembleUploadParams(rr.nosToken);rr.mixEnable&&rr.curProvider===1&&(Or=this.assembleUploadParams(rr.mixStoreToken));function Cr(Sr,Br,$r,Lr){if(Sr){var Gr=er.get(Sr,"msg.message")||er.get(Sr,"message")||"Unknown error message",qr=er.get(Sr,"msg.code")||er.get(Sr,"code")||"Unknown error code";Er.logger.warn("_doPreviewFile: upload done, failed ",qr,Gr),Er.protocol.reporterHook.emit("reporter/uploadEnd",Sr.code==="RequestAbortedError"||Sr.code==="abort"?_r.kCanceled:_r.kFailed);var Yr=k({},Lr||kr,{status:"fail"}),bn=lr(lr({},rr.callback.options),{},{msg:Yr});return rr.uploaddone&&rr.uploaddone(Sr,bn,Yr),void rr.done(Sr,rr.callback.options)}if(Er.logger.info("_doPreviewFile: upload done, success"),Er.protocol.reporterHook.emit("reporter/uploadEnd",_r.kSucceed),rr.uploaddone&&rr.uploaddone(null,er.copy(Br),Lr||kr),Br=pr.parseResponse(Br,Er.options.exifOrientation),$r||Br.isS3||(Br.url=hr.genDownloadUrl(rr.nosToken,Or.Object,hr.serverNosConfig.cdnDomain),rr.nosToken.shortUrl&&(Br._url_safe=rr.nosToken.shortUrl)),er.exist(rr.fileInputName))Br.name=rr.fileInputName;else if(rr.blob){var wn=rr.blob.name;if(Br.name=wn||"blob-"+Br.md5,!wn){var Xr=rr.blob.type;Br.ext=$(Xr).call(Xr,L(Xr).call(Xr,"/")+1)}}else rr.filePath?Br.name=rr.filePath:rr.fileObject&&(Br.name=rr.fileObject.fileName);if(!Br.ext){var qn,Zr,Nn=L(qn=Br.name).call(qn,".");Nn===-1?Br.ext="unknown":Br.ext=$(Zr=Br.name).call(Zr,Nn+1)}Br.size=Br.size||0,Br.isS3&&Br._url_safe?Er.getNosOriginUrl({safeShortUrl:Br._url_safe,done:function(Qr,Mn){Qr?Er.logger.error("error:","getNosOriginUrl failed",Qr):(Br.url=Mn,rr.done(null,er.copy(Br)))}}):rr.done(null,er.copy(Br))}if(hr.isWeixinApp)er.verifyOptions(rr,"filePath","msg::_doPreviewFile"),Er.fileQuickTransfer(rr,Cr,function(){var Sr=wx.uploadFile({url:vr,filePath:rr.filePath,name:"file",formData:Or,fail:function(Br){Cr({code:"FAILED",msg:Br}),Er.logger.error("error:","api::msg:upload file failed",Br)},success:function(Br){if(Br.statusCode===200)try{Cr(null,JSON.parse(Br.data))}catch($r){Er.logger.error("error:","parse wx upload file res error",$r),Cr({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:Br.data,msg:Br.errMsg})}else Cr({code:Br.statusCode,msg:Br.errMsg})}});typeof rr.uploadprogress=="function"&&Sr&&(rr.beginupload(Sr,kr),Er.logger.info("_doPreviewFile::mini uploadprogress"),Sr.onProgressUpdate(function(Br){rr.uploadprogress({total:Br.totalBytesExpectedToSend,loaded:Br.totalBytesSent,percentage:Br.progress,percentageText:Br.progress+"%"},kr)}))});else if(hr.isNodejs){var yr={url:vr,name:"file",formData:Or,success:function(Sr){if(Sr.statusCode===200)try{Cr(null,JSON.parse(Sr.data))}catch(Br){Er.protocol.logger.error("error:","parse nodejs upload file res error",Br),Cr({code:"PARSE_NODEJS_UPLOAD_FILE_RES_ERROR",str:Sr.data,msg:Sr.errMsg})}else Cr({code:Sr.statusCode,msg:Sr.errMsg})},fail:function(Sr){Cr({code:"FAILED",msg:Sr}),Er.protocol.logger.error("error:","api::msg:upload file failed",Sr)}};if(rr.filePath)yr.filePath=rr.filePath;else{if(n(rr.fileObject)!=="object")throw new or("NodejsfileObject {fileName:..,fileData:..} ");yr.fileData=rr.fileObject.fileData}Er.fileQuickTransfer(rr,Cr,function(){Tr.uploadFile(yr)})}else if(hr.isRN){var fr={url:vr,name:"file",formData:Or,filePath:rr.filePath,success:function(Sr){if(Sr.ok&&Sr.status===200)try{var Br=i(Sr.headers)&&i(Sr.headers).etag;Sr.md5=Br?typeof Br=="string"?Br:Br[0]:"UNKNOWN",Cr(null,Sr)}catch($r){Er.protocol.logger.error("error:","parse React Native upload file res error",$r),Cr({code:"PARSE_React_Native_UPLOAD_FILE_RES_ERROR",res:Sr})}else Cr({code:Sr.status,msg:Sr.statusText})},fail:function(Sr){Cr({code:"FAILED",msg:Sr}),Er.protocol.logger.error("error:","api::msg:upload file failed",Sr)}};Er.fileQuickTransfer(rr,Cr,function(){Tr.uploadFile(fr)})}else rr.url=vr,rr.params=Or,rr.fileName="file",Er.fileQuickTransfer(rr,Cr,function(){return Er.protocol.adaptersUploadFile(k({},rr,{uploaddone:Cr}),kr)})},sr.fileQuickTransfer=function(rr,kr,Er){var xr,vr=this;rr=rr||{},kr instanceof Function||(kr=function(){}),Er instanceof Function||(Er=function(){});var Ir=rr.fastPass;if(Ir)try{Ir=JSON.parse(Ir),rr.fastPass=Ir}catch{vr.protocol.logger.error("")}var Or=rr.fileInputName||rr.name||rr.blob&&rr.blob.name||"",Cr=rr.fileSize||rr.size||rr.blob&&rr.blob.size||0,yr=Ir?V(xr=(Ir.md5||rr.digest||"")+"").call(xr):"",fr=rr.type||rr.blob&&rr.blob.type;if(yr&&Cr>=hr.threshold){var Sr=!0,Br={name:Or,md5:yr,ext:$(Or).call(Or,L(Or).call(Or,".")+1),type:fr};switch(fr){case"image":Ir&&Ir.w&&Ir.h?(Br.w=Ir.w,Br.h=Ir.h):(Sr=!1,vr.protocol.logger.error(" image  w  h"));break;case"video":Ir&&Ir.w&&Ir.h&&Ir.dur?(Br.w=Ir.w,Br.h=Ir.h,Br.dur=Ir.dur):(Sr=!1,vr.protocol.logger.error(" video  w  h  dur"));break;case"audio":Ir&&Ir.dur?Br.dur=Ir.dur:(Sr=!1,vr.protocol.logger.error(" audio  dur"))}if(!Sr)return void Er();var $r={fileQuickTransfer:{md5:yr}};return Cr&&($r.fileQuickTransfer.size=Cr),this.protocol.sendCmd("fileQuickTransfer",$r,function(Lr,Gr,qr){!Lr&&qr&&qr.fileQuickTransfer&&qr.fileQuickTransfer.url||(vr.protocol.logger.error("misc::fileQuickTransfer: not found",Lr,Gr),Er()),qr&&qr.fileQuickTransfer&&qr.fileQuickTransfer.threshold&&(hr.threshold=qr.fileQuickTransfer.threshold||0),qr&&qr.fileQuickTransfer&&qr.fileQuickTransfer.url&&(Br.size=Cr||qr.fileQuickTransfer.size,Br.url=qr.fileQuickTransfer.url,qr.fileQuickTransfer._url_safe&&(Br._url_safe=qr.fileQuickTransfer._url_safe),kr(Lr,Br,!0))})}Er()},sr.sendFile=function(rr){if((rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"sendFile",done:rr.done}),rr.type||(rr.type="file"),rr=er.merge(rr,this.options.providers),er.verifyParamPresentJustOne(rr,"dataURL blob fileInput file filePath wxFilePath fileObject","msg::sendFile"),er.exist(rr.maxSize)&&er.verifyParamType("maxSize",rr.maxSize,"number","api::previewFile"),er.exist(rr.commonUpload)&&er.verifyParamType("commonUpload",rr.commonUpload,"boolean","api::previewFile"),this.processCallback(rr),rr.filePath=rr.filePath||rr.wxFilePath,delete rr.wxFilePath,rr.dataURL)return this._previewAndSendFile(rr);if(rr.blob)return this._previewAndSendFile(rr);if(rr.fileInput)return rr.fileInput=er.verifyFileInput(rr.fileInput,"msg::sendFile"),rr.fileInput.files&&!rr.fileInput.files.length?void rr.done(or.newNoFileError(""+rr.type+"",{callFunc:"msg::sendFile",fileInput:rr.fileInput}),rr.callback.options):this._previewAndSendFile(rr);if(rr.filePath||rr.fileObject)return this._previewAndSendFile(rr);if(rr.file){var kr,Er=rr.file._url_safe;return Er&&(kr=rr.file.url,rr.file.url=Er,delete rr.file._url_safe),rr.msg=new this.message.FileMessage(rr),this.sendMsg(rr,kr)}},sr._previewAndSendFile=function(rr){var kr=this;er.verifyCallback(rr,"uploaddone beforesend","msg::_previewAndSendFile");var Er=lr({},rr),xr=new kr.message.Message(Er);xr.type=rr.type;var vr=kr.formatReturnMsg(xr),Ir=kr.protocol.reporterHook.getSafeClock(),Or={apiCallingTime:kr.protocol.reporterHook.getNTPTime(Ir),attachUploadDuration:0},Cr=rr.done;return rr.done=function(yr,fr){if(rr.done=Cr,yr){var Sr=k({},vr,{status:"fail"}),Br=lr(lr({},rr.callback.options),{},{msg:Sr});rr.done(yr,Br)}else{if(Or.attachUploadDuration=kr.protocol.reporterHook.getSafeClock()-Ir,/chatroom/.test(rr.scene))return;var $r,Lr=fr._url_safe;Lr&&!fr.isS3&&($r=fr.url,fr.url=Lr,delete fr._url_safe),rr.file=fr,rr.msg=new kr.message.FileMessage(rr,xr.idClient),rr.beforesend(kr.sendMsg(rr,$r,Or))}},kr.previewFile(rr,vr),vr},sr.assembleUploadParams=function(rr){return rr?{Object:decodeURIComponent(rr.objectName),"x-nos-token":rr.token,"x-nos-entity-type":"json"}:null},sr.deleteFile=function(rr){Mr({instance:this,className:"ApiBaseFn",funcName:"deleteFile",hasCallback:!1}),er.verifyParamPresentJustOne(rr,"docId","msg::deleteFile"),this.removeFile({docId:rr.docId,callback:function(kr,Er){kr?rr.error&&rr.error(kr,Er):rr.success&&rr.success(Er)}})},sr.getFile=function(rr){Mr({instance:this,className:"ApiBaseFn",funcName:"getFile",hasCallback:!1}),er.verifyParamPresentJustOne(rr,"docId","msg::getFile"),this.fetchFile({docId:rr.docId,callback:function(kr,Er){kr?rr.error&&rr.error(kr,Er):rr.success&&rr.success(Er.info)}})},sr.getFileList=function(rr){Mr({instance:this,className:"ApiBaseFn",funcName:"getFileList",hasCallback:!1});var kr=rr.fromDocId,Er=kr===void 0?"":kr,xr=rr.limit,vr=xr===void 0?10:xr,Ir={limit:vr};Er&&(Ir.fromDocId=Er),this.fetchFileList({fileListParam:Ir,callback:function(Or,Cr){Or?(vr>30&&(Or.message=Or.message+":::30"),rr.error&&rr.error(Or,Cr)):rr.success&&rr.success(Cr)}})},sr.sendGeo=function(rr){return(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"sendGeo",done:rr.done}),this.processCallback(rr),rr.msg=new this.message.GeoMessage(rr),this.sendMsg(rr)},sr.sendTipMsg=function(rr){return(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"sendTipMsg",done:rr.done}),this.processCallback(rr),rr.msg=new this.message.TipMessage(rr),this.sendMsg(rr)},sr.sendCustomMsg=function(rr){return(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"sendCustomMsg",done:rr.done}),this.processCallback(rr),rr.msg=new this.message.CustomMessage(rr),this.sendMsg(rr)},sr.sendRobotMsg=function(rr){return(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"sendRobotMsg",done:rr.done}),this.logger.warn("this api will be abandon"),this.processCallback(rr),rr.msg=new this.message.RobotMessage(rr),this.sendMsg(rr)},sr.sendMsg=function(rr,kr,Er){var xr=this,vr=xr.protocol,Ir=rr.msg,Or={};Er=Er||{apiCallingTime:vr.reporterHook.getNTPTime(),attachUploadDuration:0};var Cr,yr=!!rr.isLocal;if(this.logger.warn("sendMsg::start: "+Ir.idClient),yr&&(rr.time&&(Ir.time=rr.time),rr.idClient&&(Ir.idClient=rr.idClient),rr.localFrom&&(Cr=rr.localFrom+"")),rr.resend&&(rr.flow!=="out"||rr.status!=="fail"))return er.onError("");rr.callback.options.idClient=Ir.idClient,xr.beforeSendMsg(rr,Or);var fr=rr.rtnMsg=xr.formatReturnMsg(Ir,Cr);if(kr&&!xr.options.keepNosSafeUrl&&fr.file&&(fr.file._url_safe=fr.file.url,fr.file.url=kr,fr.type==="audio"&&(fr.file.mp3Url=kr+(~z(kr).call(kr,"?")?"&":"?")+"audioTrans&type=mp3")),fr.hasOwnProperty("chatroomId")&&!fr.chatroomId)return er.onError("");if(yr&&(fr.status="success",fr.isLocal=!0),vr.storeSendMsg&&(Or.promise=vr.storeSendMsg(fr)),rr.cbaop=function(Br,$r){if(Br)return Br.code===7101&&(fr.isInBlackList=!0,fr.idServer=$r.idServer,fr.time=$r.time),Br.from!=="server"?(fr.status="fail",vr.updateSendMsgError&&vr.updateSendMsgError(fr),fr):void 0},!yr){kr&&!xr.options.keepNosSafeUrl&&rr.callback&&(rr.callback.originUrl=kr),rr.toAccids&&rr.toAccids.length&&(Ir.toAccids=g(rr.toAccids)),Or.msg=Ir,Er.sendTime=vr.reporterHook.getNTPTime(),vr.reporterHook.hasOriginTimetick()&&(Or.msg.__clientExt=g({statistics:Er}));var Sr=Ir;xr.sendCmd(rr.cmd,Or,function(){if(hr.isBrowser){var Br=arguments[0],$r=arguments[1]||{},Lr=xr.subType==="chatroom",Gr=Sr.scene===0,qr=vr.reporterHook.getNTPTime(),Yr={msgId:$r.idServer,clientId:Sr.idClient,msgTime:$r.time||0,fromAccid:xr.account,toAccid:Gr?Sr.to:"",type:Lr?4:Sr.scene,roomId:Lr?xr.options.chatroomId:"",tid:Lr||Gr?"":Sr.to,result:Br?Br.code:200,failReason:Br?Br.message:"",rt:re(qr-Er.apiCallingTime),apiCallingTime:Er.apiCallingTime,sendTime:Er.sendTime,attachUploadDuration:Er.attachUploadDuration,apiCallbackTime:qr};xr.reporter&&xr.reporter.report("msgSend",Yr)}rr.callback&&rr.callback.apply(xr,arguments);var bn=arguments[0],wn=arguments[1];!bn&&wn&&wn.from===wn.to&&xr.protocol.markMsgRead(wn)})}return xr.afterSendMsg(rr),yr&&ie(function(){fr=er.simpleClone(fr),rr.done(null,fr)},0),er.copy(fr)},sr.beforeSendMsg=function(){},sr.afterSendMsg=function(){},sr.formatReturnMsg=function(rr,kr){var Er;return rr=er.copy(rr),this.protocol.completeMsg(rr),rr.status="sending",kr&&(rr.from=kr),rr=ue(Er=this.message).call(Er,rr),rr=this.protocol.amendMsg(rr)},sr.resendMsg=function(rr){return(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"resendMsg",done:rr.done}),er.verifyOptions(rr,"msg","msg::resendMsg"),this.trimMsgFlag(rr),rr.resend=!0,this._sendMsgByType(rr)},sr.forwardMsg=function(rr){return(rr=rr||{}).done=Mr({instance:this,className:"ApiBaseFn",funcName:"forwardMsg",done:rr.done}),er.verifyOptions(rr,"msg","msg::forwardMsg"),this.trimMsgFlag(rr),this.beforeForwardMsg(rr),rr.forward=!0,rr.msg.idClient=er.guid(),this._sendMsgByType(rr)},sr.trimMsgFlag=function(rr){rr&&rr.msg&&(rr.msg=er.copy(rr.msg),delete rr.msg.resend,delete rr.msg.forward)},sr.beforeForwardMsg=function(){},sr._sendMsgByType=function(rr){switch(er.verifyOptions(rr,"msg","msg::_sendMsgByType"),er.verifyParamValid("msg.type",rr.msg.type,this.message.validTypes,"msg::_sendMsgByType"),er.merge(rr,rr.msg),rr.type){case"text":return this.sendText(rr);case"image":case"audio":case"video":case"file":return this.sendFile(rr);case"geo":return this.sendGeo(rr);case"custom":return this.sendCustomMsg(rr);case"tip":return this.sendTipMsg(rr);default:throw new or(" "+rr.type+" ")}},sr.parseRobotTemplate=function(rr){if(this.logger.warn("this api will be abandon"),/<template[^>/]+\/>/.test(rr))return{raw:rr,json:[{type:"text",name:"",text:""}]};if(!/<template[^>/]+>/.test(rr))return{raw:rr,json:[{type:"text",name:"",text:rr}]};var kr=new cr({escapeMode:!1});rr=rr.replace(/<template [^>]+>/,"<template>");var Er=kr.xml2js(rr);Er=Er.template.LinearLayout,le(Er)||(Er=[Er]);var xr=[];return Er=oe(Er).call(Er,function(Or){Or.image&&(xr=ae(xr).call(xr,Ir(Or))),Or.text&&(xr=ae(xr).call(xr,vr(Or))),Or.link&&(xr=ae(xr).call(xr,function(Cr){if(Cr.link){var yr=Cr.link;le(yr)||(yr=[yr]),yr=i(yr).call(yr,function(fr){return fr.image&&(fr.image=Ir(fr)),fr.text&&(fr.text=vr(fr)),fr._type==="url"?(fr.type="url",fr.style=fr._style||"",fr.target=fr._target,delete fr._target,delete fr._style):fr._type==="block"&&(fr.type="block",fr.style=fr._style||"",fr.params=fr._params||"",fr.target=fr._target,delete fr._params,delete fr._target,delete fr._style),delete fr._type,fr}),Cr.link=yr}return Cr.link}(Or)))}),{raw:rr,json:xr};function vr(Or){var Cr;return le(Or.text)||(Or.text=[Or.text]),Or.text=i(Cr=Or.text).call(Cr,function(yr){return{type:"text",name:yr._name,text:yr.__text}}),Or.text}function Ir(Or){var Cr;return le(Or.image)||(Or.image=[Or.image]),Or.image=i(Cr=Or.image).call(Cr,function(yr){return{type:"image",name:yr._name,url:yr._url}}),Or.image}}},function(t,r,e){e(591);var n=e(13);t.exports=n.Object.assign},function(t,r,e){var n=e(1),g=e(592);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==g},{assign:g})},function(t,r,e){var n=e(27),g=e(12),y=e(20),i=e(5),k=e(120),$=e(135),L=e(150),V=e(42),z=e(127),re=Object.assign,ie=Object.defineProperty,ue=g([].concat);t.exports=!re||i(function(){if(n&&re({b:1},re(ie({},"a",{enumerable:!0,get:function(){ie(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var le={},oe={},ae=Symbol();return le[ae]=7,"abcdefghijklmnopqrst".split("").forEach(function(Ue){oe[Ue]=Ue}),re({},le)[ae]!=7||k(re({},oe)).join("")!="abcdefghijklmnopqrst"})?function(le,oe){for(var ae=V(le),Ue=arguments.length,de=1,_e=$.f,Ve=L.f;Ue>de;)for(var $e,Lt=z(arguments[de++]),jt=_e?ue(k(Lt),_e(Lt)):k(Lt),Et=jt.length,ir=0;Et>ir;)$e=jt[ir++],n&&!y(Ve,Lt,$e)||(ae[$e]=Lt[$e]);return ae}:re},function(t,r,e){var n=e(19),g=e(594),y=Array.prototype;t.exports=function(i){var k=i.reverse;return i===y||n(y,i)&&k===y.reverse?g:k}},function(t,r,e){e(595);var n=e(29);t.exports=n("Array").reverse},function(t,r,e){var n=e(1),g=e(12),y=e(83),i=g([].reverse),k=[1,2];n({target:"Array",proto:!0,forced:String(k)===String(k.reverse())},{reverse:function(){return y(this)&&(this.length=this.length),i(this)}})},function(t,r,e){t.exports=e(597)},function(t,r,e){t.exports=e(598)},function(t,r,e){var n=e(599);t.exports=n},function(t,r,e){var n=e(255);t.exports=n},function(t,r,e){t.exports=e(601)},function(t,r,e){var n=e(602);t.exports=n},function(t,r,e){var n=e(207);t.exports=n},function(t,r,e){var n=e(604),g=e(188);t.exports=function(y,i){if(y==null)return{};var k,$,L={},V=n(y);for($=0;$<V.length;$++)k=V[$],g(i).call(i,k)>=0||(L[k]=y[k]);return L},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(605)},function(t,r,e){t.exports=e(606)},function(t,r,e){var n=e(607);t.exports=n},function(t,r,e){var n=e(231);t.exports=n},function(t,r,e){var n,g,y;(function(i,k){g=[],(y=typeof(n=function($){return function(L){(L=L||{}).arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.jsAttributeFilter=L.jsAttributeFilter,L.jsAttributeConverter=L.jsAttributeConverter,L.attributeConverters=L.attributeConverters||[],L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.xmldomOptions=L.xmldomOptions||{},L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!0),L.ignoreRoot===void 0&&(L.ignoreRoot=!1),L.escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.selfClosingElements===void 0&&(L.selfClosingElements=!0),L.keepCData===void 0&&(L.keepCData=!1),L.keepText===void 0&&(L.keepText=!1),L.jsDateUTC===void 0&&(L.jsDateUTC=!1),function(){function sr(er){var cr=String(er);return cr.length===1&&(cr="0"+cr),cr}typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),typeof Date.prototype.toISOString!="function"&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+sr(this.getUTCMonth()+1)+"-"+sr(this.getUTCDate())+"T"+sr(this.getUTCHours())+":"+sr(this.getUTCMinutes())+":"+sr(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var V=1,z=3,re=4,ie=8,ue=9;function le(sr){var er=sr.localName;return er==null&&(er=sr.baseName),er!=null&&er!==""||(er=sr.nodeName),er}function oe(sr){return typeof sr=="string"?sr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):sr}function ae(sr,er,cr){switch(L.arrayAccessForm){case"property":sr[er]instanceof Array?sr[er+"_asArray"]=sr[er]:sr[er+"_asArray"]=[sr[er]]}if(!(sr[er]instanceof Array)&&L.arrayAccessFormPaths.length>0){for(var or=!1,hr=0;hr<L.arrayAccessFormPaths.length;hr++){var pr=L.arrayAccessFormPaths[hr];if(typeof pr=="string"){if(pr===cr){or=!0;break}}else if(pr instanceof RegExp){if(pr.test(cr)){or=!0;break}}else if(typeof pr=="function"&&pr(er,cr)){or=!0;break}}or&&(sr[er]=[sr[er]])}}function Ue(sr){var er=sr.split(/[-T:+Z]/g),cr=new Date(er[0],er[1]-1,er[2]),or=er[5].split(".");if(cr.setHours(er[3],er[4],or[0]),or.length>1&&cr.setMilliseconds(or[1]),er[6]&&er[7]){var hr=60*er[6]+Number(er[7]);hr=0+((/\d\d-\d\d:\d\d$/.test(sr)?"-":"+")=="-"?-1*hr:hr),cr.setMinutes(cr.getMinutes()-hr-cr.getTimezoneOffset())}else sr.indexOf("Z",sr.length-1)!==-1&&(cr=new Date(Date.UTC(cr.getFullYear(),cr.getMonth(),cr.getDate(),cr.getHours(),cr.getMinutes(),cr.getSeconds(),cr.getMilliseconds())));return cr}function de(sr,er){for(var cr={__cnt:0},or=sr.childNodes,hr=0;hr<or.length;hr++){var pr=or.item(hr),Tr=le(pr);pr.nodeType!==ie&&(cr.__cnt++,cr[Tr]==null?(cr[Tr]=_e(pr,er+"."+Tr),ae(cr,Tr,er+"."+Tr)):(cr[Tr]instanceof Array||(cr[Tr]=[cr[Tr]],ae(cr,Tr,er+"."+Tr)),cr[Tr][cr[Tr].length]=_e(pr,er+"."+Tr)))}for(var Pr=0;Pr<sr.attributes.length;Pr++){var _r=sr.attributes.item(Pr);cr.__cnt++;for(var Mr=_r.value,rr=0;rr<L.attributeConverters.length;rr++){var kr=L.attributeConverters[rr];kr.test.call(null,_r.name,_r.value)&&(Mr=kr.convert.call(null,_r.name,_r.value))}cr[L.attributePrefix+_r.name]=Mr}var Er=sr.prefix;return Er&&(cr.__cnt++,cr.__prefix=Er),cr["#text"]&&(cr.__text=cr["#text"],cr.__text instanceof Array&&(cr.__text=cr.__text.join(`
`)),L.escapeMode&&(cr.__text=cr.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),L.stripWhitespaces&&(cr.__text=cr.__text.trim()),delete cr["#text"],L.arrayAccessForm==="property"&&delete cr["#text_asArray"],cr.__text=function(xr,vr,Ir){if(L.datetimeAccessFormPaths.length>0)for(var Or=Ir.split(".#")[0],Cr=0;Cr<L.datetimeAccessFormPaths.length;Cr++){var yr=L.datetimeAccessFormPaths[Cr];if(typeof yr=="string"){if(yr===Or)return Ue(xr)}else if(yr instanceof RegExp){if(yr.test(Or))return Ue(xr)}else if(typeof yr=="function"&&yr(Or))return Ue(xr)}return xr}(cr.__text,0,er+".#text")),cr.hasOwnProperty("#cdata-section")&&(cr.__cdata=cr["#cdata-section"],delete cr["#cdata-section"],L.arrayAccessForm==="property"&&delete cr["#cdata-section_asArray"]),cr.__cnt===1&&cr.__text&&!L.keepText?cr=cr.__text:cr.__cnt===0&&L.emptyNodeForm==="text"?cr="":cr.__cnt>1&&cr.__text!==void 0&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&cr.__text===""||cr.__text.trim()==="")&&delete cr.__text,delete cr.__cnt,L.keepCData||cr.hasOwnProperty("__text")||!cr.hasOwnProperty("__cdata")||Object.keys(cr).length!==1?(L.enableToStringFunc&&(cr.__text||cr.__cdata)&&(cr.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),cr):cr.__cdata?cr.__cdata:""}function _e(sr,er){return sr.nodeType===ue?function(cr){for(var or={},hr=cr.childNodes,pr=0;pr<hr.length;pr++){var Tr=hr.item(pr);if(Tr.nodeType===V){var Pr=le(Tr);L.ignoreRoot?or=_e(Tr,Pr):or[Pr]=_e(Tr,Pr)}}return or}(sr):sr.nodeType===V?de(sr,er):sr.nodeType===z||sr.nodeType===re?sr.nodeValue:null}function Ve(sr,er,cr,or){var hr="<"+(sr&&sr.__prefix?sr.__prefix+":":"")+er;if(cr)for(var pr=0;pr<cr.length;pr++){var Tr=cr[pr],Pr=sr[Tr];L.escapeMode&&(Pr=oe(Pr)),hr+=" "+Tr.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?hr+='"'+Pr+'"':hr+="'"+Pr+"'"}return hr+=or?" />":">"}function $e(sr,er){return"</"+(sr&&sr.__prefix?sr.__prefix+":":"")+er+">"}function Lt(sr,er){return L.arrayAccessForm==="property"&&(cr=er.toString(),or="_asArray",cr.indexOf(or,cr.length-or.length)!==-1)||er.toString().indexOf(L.attributePrefix)===0||er.toString().indexOf("__")===0||sr[er]instanceof Function;var cr,or}function jt(sr){var er=0;if(sr instanceof Object)for(var cr in sr)Lt(sr,cr)||er++;return er}function Et(sr){var er=[];if(sr instanceof Object)for(var cr in sr)cr.toString().indexOf("__")===-1&&cr.toString().indexOf(L.attributePrefix)===0&&er.push(cr);return er}function ir(sr){var er="";return sr instanceof Object?er+=function(cr){var or="";return cr.__cdata&&(or+="<![CDATA["+cr.__cdata+"]]>"),(cr.__text||typeof cr.__text=="number"||typeof cr.__text=="boolean")&&(L.escapeMode?or+=oe(cr.__text):or+=cr.__text),or}(sr):sr!==null&&(L.escapeMode?er+=oe(sr):er+=sr),er}function ur(sr,er,cr){var or="";return L.jsAttributeFilter&&L.jsAttributeFilter.call(null,er,sr)||(L.jsAttributeConverter&&(sr=L.jsAttributeConverter.call(null,er,sr)),sr!=null&&sr!==""||!L.selfClosingElements?typeof sr=="object"?Object.prototype.toString.call(sr)==="[object Array]"?or+=function(hr,pr,Tr){var Pr="";if(hr.length===0)Pr+=Ve(hr,pr,Tr,!0);else for(var _r=0;_r<hr.length;_r++)Pr+=ur(hr[_r],pr,Et(hr[_r]));return Pr}(sr,er,cr):sr instanceof Date?(or+=Ve(sr,er,cr,!1),or+=L.jsDateUTC?sr.toUTCString():sr.toISOString(),or+=$e(sr,er)):jt(sr)>0||typeof sr.__text=="number"||typeof sr.__text=="boolean"||sr.__text||sr.__cdata?(or+=Ve(sr,er,cr,!1),or+=Dt(sr),or+=$e(sr,er)):L.selfClosingElements?or+=Ve(sr,er,cr,!0):(or+=Ve(sr,er,cr,!1),or+=$e(sr,er)):(or+=Ve(sr,er,cr,!1),or+=ir(sr),or+=$e(sr,er)):or+=Ve(sr,er,cr,!0)),or}function Dt(sr){var er="";if(jt(sr)>0){for(var cr in sr)if(!Lt(sr,cr)){var or=sr[cr];er+=ur(or,cr,Et(or))}}return er+=ir(sr)}function lr(sr){if(sr===void 0||typeof sr!="string")return null;var er=null,cr=null;if($)cr=(er=new $(L.xmldomOptions)).parseFromString(sr,"text/xml");else if(window&&window.DOMParser){er=new window.DOMParser;var or=null;if(!(window.ActiveXObject||"ActiveXObject"in window)&&document.all&&!document.addEventListener)try{or=er.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch{or=null}try{cr=er.parseFromString(sr,"text/xml"),or!==null&&cr.getElementsByTagNameNS(or,"parsererror").length>0&&(cr=null)}catch{cr=null}}else sr.indexOf("<?")===0&&(sr=sr.substr(sr.indexOf("?>")+2)),(cr=new ActiveXObject("Microsoft.XMLDOM")).async="false",cr.loadXML(sr);return cr}this.asArray=function(sr){return sr==null?[]:sr instanceof Array?sr:[sr]},this.toXmlDateTime=function(sr){return sr instanceof Date?sr.toISOString():typeof sr=="number"?new Date(sr).toISOString():null},this.asDateTime=function(sr){return typeof sr=="string"?Ue(sr):sr},this.xml2dom=function(sr){return lr(sr)},this.dom2js=function(sr){return _e(sr,null)},this.js2dom=function(sr){return lr(this.js2xml(sr))},this.xml2js=function(sr){var er=lr(sr);return er!=null?this.dom2js(er):null},this.js2xml=function(sr){return Dt(sr)},this.getVersion=function(){return"3.4.4"}}})=="function"?n.apply(r,g):n)===void 0||(t.exports=y)})()},function(t,r,e){var n=e(118);t.exports=function(g,y){return y.method="POST",y.headers=y.headers||{},y.headers["Content-Type"]="multipart/form-data",y.timeout=0,y.type=y.type||"json",n(g,y)}},function(t,r,e){var n=e(15),g=e(48),y=e(7),i=e(3),k=e(11),$=k.chunkSize,L=e(118),V={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};t.exports=function z(re,ie,ue,le){var oe={file:re.data[ie],fileSize:re.data[ie].size,fileUploadedSize:0,percentage:0},ae=re.url;function Ue(ur){var Dt=oe.fileUploadedSize+ur.loaded,lr=Math.floor(1e4*Dt/oe.fileSize)/100;if(g(lr)>=100&&(lr=100,Ue=function(){}),oe.percentage!==lr){oe.percentage=lr;var sr={docId:re.docId,total:oe.fileSize,loaded:Dt,percentage:lr,percentageText:lr+"%"};re.fileInput&&(sr.fileInput=re.fileInput),re.blob&&(sr.blob=re.blob),re.uploadprogress(sr)}}function de(ur){try{ur=JSON.parse(ur)}catch(sr){return void ue.onError(sr)}if(ur.errMsg||ur.errCode)ue.onError(ur);else if(ur.offset<oe.fileSize)delete Lt.onaftersend,oe.fileUploadedSize=ur.offset,function(sr,er,cr,or){var hr=sr.offset,pr=sr.offset+$;if(typeof FileReader<"u"){var Tr,Pr=new FileReader;Pr.readAsArrayBuffer(n(Tr=or.file).call(Tr,hr,pr)),Pr.addEventListener("load",function(Mr){er.data=Mr.target.result,er.query.offset=sr.offset,er.query.complete=pr>=or.fileSize,er.query.context=sr.context,er.onuploading=Ue,er.onload=de,er.onerror=_e,ue.sn=L(ae,er)}),Pr.addEventListener("error",function(Mr){er.onerror(Mr.target.error)})}else{var _r;er.data=n(_r=or.file).call(_r,hr,pr),er.query.offset=sr.offset,er.query.complete=pr>=or.fileSize,er.query.context=sr.context,er.onuploading=Ue,er.onload=de,er.onerror=_e,ue.sn=L(ae,er)}}(ur,Lt,0,oe);else{var Dt=k.genFileUrl(re.nosToken);re.type==="image"?L(Dt+"?imageInfo",{onload:function(sr){try{sr=JSON.parse(sr),re.uploaddone(null,{docId:ur.docId,w:sr.Width,h:sr.Height,orientation:sr.Orientation||"",type:sr.Type,size:sr.Size||oe.fileSize})}catch(er){lr(er)}},onerror:function(sr){if(typeof Image<"u"){var er=new Image;er.src=Dt,er.onload=function(){re.uploaddone(null,{docId:ur.docId,w:er.width,h:er.height,size:oe.fileSize})},er.onerror=function(cr){lr(cr)}}else lr(sr)}}):re.type==="video"||re.type==="audio"?L(Dt+"?vinfo",{onload:function(sr){try{(sr=JSON.parse(sr)).GetVideoInfo&&sr.GetVideoInfo.VideoInfo&&(sr=sr.GetVideoInfo.VideoInfo),re.uploaddone(null,{docId:ur.docId,w:sr.Width,h:sr.Height,dur:sr.Duration,orientation:sr.Rotate,audioCodec:sr.AudioCodec,videoCodec:sr.VideoCodec,container:sr.Container,size:sr.Size||oe.fileSize})}catch(er){lr(er)}},onerror:lr}):re.uploaddone(null,{docId:ur.docId,size:oe.fileSize})}function lr(sr){ue.onError(sr)}}function _e(ur){re.errorHook(ur,{url:ae,provider:"nos"});var Dt=ur&&ur.code;function lr(){try{if(ur.result)var sr=JSON.parse(ur.result);else sr=ur;ue.onError(sr)}catch(er){ue.onError(er)}}oe.fileUploadedSize===0&&Dt!=="abort"?re.edgeList?le<re.edgeList.length-1?z(re,ie,ue,le+1):lr():re.nosLbsUrls&&re.nosLbsUrls.length>0?function(sr,er,cr,or,hr){return new i(function(pr){function Tr(){hr.adaptersRequest(cr[sr],{query:{version:"1.0",bucketname:er},method:"GET",onerror:Pr,onload:function(_r){try{(_r=JSON.parse(_r))&&_r.upload&&_r.upload.length?pr(_r.upload):Pr()}catch{Pr()}}},{exception_service:3})}function Pr(){or.onLbsUrlFail(cr[sr]),sr<cr.length-1?(sr++,Tr()):pr([])}Tr()})}(0,re.nosToken.bucket,re.nosLbsUrls,ue,re).then(function(sr){sr.length>0?(re.edgeList=sr,re.updateNosEdgeList&&re.updateNosEdgeList(sr),z(re,ie,ue,le+1)):lr()}):(re.edgeList=k.edgeList,z(re,ie,ue,le+1)):lr()}typeof le!="number"&&(le=-1),re.edgeList&&re.edgeList.length&&(le=le>0?le:0,ae=re.edgeList[le]),ae+="/"+re.nosToken.bucket+"/"+re.nosToken.objectName;var Ve=re.data.file&&re.data.file.type;if(!Ve||y(Ve).call(Ve,"/")<0){var $e=(re.fileInputName||"").split(".").pop();re.type==="image"?Ve="image/"+($e==="jpg"?"jpeg":$e):re.type!=="audio"&&re.type!=="video"||(Ve=V[$e])}var Lt={query:{offset:0,complete:$>=oe.fileSize,version:"1.0"},headers:{"Content-Type":Ve||"application/octet-stream","x-nos-token":re.nosToken.token},method:"POST",timeout:0,onaftersend:function(){re.beginupload(ue)},onuploading:Ue,onload:de,onerror:_e};if(typeof FileReader<"u"){var jt,Et=new FileReader;Et.addEventListener("load",function(ur){Lt.data=ur.target.result,ue.sn=L(ae,Lt)}),Et.addEventListener("error",function(ur){Lt.onerror(ur.target.error)}),Et.readAsArrayBuffer(n(jt=oe.file).call(jt,0,$))}else{var ir;Lt.data=n(ir=oe.file).call(ir,0,$),ue.sn=L(ae,Lt)}}},function(t,r,e){e(612);var n=e(13);t.exports=n.Reflect.construct},function(t,r,e){var n=e(1),g=e(33),y=e(79),i=e(274),k=e(172),$=e(36),L=e(28),V=e(84),z=e(5),re=g("Reflect","construct"),ie=Object.prototype,ue=[].push,le=z(function(){function Ue(){}return!(re(function(){},[],Ue)instanceof Ue)}),oe=!z(function(){re(function(){})}),ae=le||oe;n({target:"Reflect",stat:!0,forced:ae,sham:ae},{construct:function(Ue,de){k(Ue),$(de);var _e=arguments.length<3?Ue:k(arguments[2]);if(oe&&!le)return re(Ue,de,_e);if(Ue==_e){switch(de.length){case 0:return new Ue;case 1:return new Ue(de[0]);case 2:return new Ue(de[0],de[1]);case 3:return new Ue(de[0],de[1],de[2]);case 4:return new Ue(de[0],de[1],de[2],de[3])}var Ve=[null];return y(ue,Ve,de),new(y(i,Ue,Ve))}var $e=_e.prototype,Lt=V(L($e)?$e:ie),jt=y(Ue,Lt,de);return L(jt)?jt:Lt}})},function(t,r,e){t.exports=e(614)},function(t,r,e){var n=e(615);t.exports=n},function(t,r,e){var n=e(216);t.exports=n},function(t,r,e){t.exports=e(617)},function(t,r,e){var n=e(618);t.exports=n},function(t,r,e){var n=e(619);t.exports=n},function(t,r,e){var n=e(620);t.exports=n},function(t,r,e){e(621);var n=e(13);t.exports=n.Object.setPrototypeOf},function(t,r,e){e(1)({target:"Object",stat:!0},{setPrototypeOf:e(138)})},function(t,r,e){t.exports=e(623)},function(t,r,e){var n=e(624);t.exports=n},function(t,r,e){var n=e(273);t.exports=n},function(t,r){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(627)},function(t,r,e){var n=e(628);t.exports=n},function(t,r,e){var n=e(284);t.exports=n},function(t,r,e){e(630);var n=e(13);t.exports=n.Object.getPrototypeOf},function(t,r,e){var n=e(1),g=e(5),y=e(42),i=e(137),k=e(229);n({target:"Object",stat:!0,forced:g(function(){i(1)}),sham:!k},{getPrototypeOf:function($){return i(y($))}})},function(t,r,e){var n,g=e(141),y=e(7),i=e(8),k=e(26),$=e(9),L=e(15),V=e(4),z=e(0),re=e(77).fn,ie=e(286),ue=e(277),le=e(41),oe=e(25).reportAPI;re.transDoc=function(ae){var Ue;z.verifyOptions(ae,"fileInput done","nos::transDoc");try{var de=ae.fileInput.files[0],_e=["ppt","pdf","pptx","doc","docx"],Ve=ae.fileInputName=de.name,$e={ppt:1,pptx:2,pdf:3,doc:6,docx:7},Lt=Ve.substring(g(Ve).call(Ve,".")+1);if(y(_e).call(_e,Lt)<0)return void ae.done(le.newNoFileError("ppt, pptx, pdf, doc, docx",{callFunc:"nos: transDoc",fileInput:ae.fileInput}),ae)}catch{return void ae.done(le.newNoFileError("",{callFunc:"msg::previewFile",fileInput:ae.fileInput}),ae)}var jt=i(ue.genResponseBody("file")||{}).replace(/"/gi,'\\"'),Et={transToken:{name:Ve,type:$e[Lt],transType:ae.transcode==="png"?11:10,size:de.size,body:jt}};this.getNosTokenTrans({responseBody:Et,nosToken:{nosScene:ae.nosScene||this.nosScene,nosSurvivalTime:ae.nosSurvivalTime},callback:k(Ue=function(ir,ur){ir?ae.done(ir):(ae.nosToken=ur.nosToken,ae.docId=ur.docId,this._doPreviewFile(ae))}).call(Ue,this)})},re.getSimpleNosToken=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ae.num=1,z.verifyOptions(ae),this.cbAndSendCmd("getSimpleNosToken",ae)},re.getNosToken=function(ae){var Ue=ae.callback,de=ae.nosToken,_e=ae.responseBody,Ve={tag:de.nosScene};de.nosSurvivalTime&&de.nosSurvivalTime!==1/0&&(Ve.expireSec=de.nosSurvivalTime),this.sendCmd("getNosToken",{responseBody:_e,nosToken:Ve},Ue)},re.getNosTokenTrans=function(ae){this.sendCmd("getNosTokenTrans",ae.responseBody,ae.callback)},re.getMixStoreToken=function(ae){this.sendCmd("getMixStoreToken",{mixTokenReq:{provider:ae.curProvider,tokenCount:ae.tokenCount||1,tag:"im",returnBody:ae.responseBody}},ae.callback)},re.packFileDownloadName=function(ae){oe({instance:this,className:"ApiBaseFn",funcName:"packFileDownloadName",hasCallback:!1}),z.verifyOptions(ae,"url name",!0,"","nos::packFileDownloadName");var Ue=ae.url;return Ue+z.genUrlSep(Ue)+"download="+encodeURIComponent(ae.name)},re.audioToMp3=function(ae){oe({instance:this,className:"ApiBaseFn",funcName:"audioToMp3",hasCallback:!1}),z.verifyOptions(ae,"url","nos::audioToMp3");var Ue=ae.url;return Ue+z.genUrlSep(Ue)+"audioTrans&type=mp3"},re.removeFile=function(ae){this.sendCmd("removeFile",ae,ae.callback)},re.fetchFile=function(ae){this.sendCmd("fetchFile",ae,ae.callback)},re.fetchFileList=function(ae){this.sendCmd("fetchFileList",ae,ae.callback)},re.stripImageMeta=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"stripImageMeta",hasCallback:!1}),this.beforeProcessImage(ae,"stripmeta")},re.qualityImage=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"qualityImage",hasCallback:!1}),this.beforeProcessImage(ae,"quality")},re.interlaceImage=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"interlaceImage",hasCallback:!1}),this.beforeProcessImage(ae,"interlace")},re.rotateImage=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"rotateImage",hasCallback:!1}),this.beforeProcessImage(ae,"rotate")},re.blurImage=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"blurImage",hasCallback:!1}),this.beforeProcessImage(ae,"blur")},re.cropImage=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"cropImage",hasCallback:!1}),this.beforeProcessImage(ae,"crop")},re.thumbnailImage=function(ae){return oe({instance:this,className:"ApiBaseFn",funcName:"thumbnailImage",hasCallback:!1}),this.beforeProcessImage(ae,"thumbnail")},re.beforeProcessImage=function(ae,Ue){var de=z.copy(ae);return de.type=Ue,ae.ops=[de],this.processImage(ae)},re.processImage=function(ae){var Ue;ae.callback=oe({instance:this,className:"ApiBaseFn",funcName:"processImage",done:ae.callback});var de=this;z.verifyOptions(ae,"url ops",!0,"","nos::processImage"),z.verifyParamType("ops",ae.ops,"array","nos::processImage");var _e=$(Ue=ae.ops).call(Ue,function(Ve){var $e,Lt;return z.verifyOptions(Ve,"type",!0,"","nos::processImage"),z.verifyParamValid("type",Ve.type,ie.validTypes,"nos::processImage"),de["gen"+L($e=Ve.type).call($e,0,1).toUpperCase()+L(Lt=Ve.type).call(Lt,1)+"Op"](Ve)});de.processCallback(ae),de.sendCmd("processImage",{url:ae.url,imageOps:_e},ae.callback)},re.genStripmetaOp=function(ae){return new ie({type:ae.type,stripmeta:ae.strip?1:0})},re.genQualityOp=function(ae){z.verifyOptions(ae,"quality",!0,"","nos::genQualityOp"),z.verifyParamType("quality",ae.quality,"number","nos::genQualityOp"),z.verifyParamMin("quality",ae.quality,0,"nos::genQualityOp"),z.verifyParamMax("quality",ae.quality,100,"nos::genQualityOp");var Ue=Math.round(ae.quality);return new ie({type:ae.type,qualityQuality:Ue})},re.genInterlaceOp=function(ae){return new ie({type:ae.type})},re.genRotateOp=function(ae){for(z.verifyOptions(ae,"angle",!0,"","nos::genRotateOp"),z.verifyParamType("angle",ae.angle,"number","nos::genRotateOp");ae.angle<0;)ae.angle=ae.angle+360;ae.angle=ae.angle%360;var Ue=Math.round(ae.angle);return new ie({type:ae.type,rotateAngle:Ue})},re.genBlurOp=function(ae){z.verifyOptions(ae,"radius sigma","nos::genBlurOp"),z.verifyParamType("radius",ae.radius,"number","nos::genBlurOp"),z.verifyParamMin("radius",ae.radius,1,"nos::genBlurOp"),z.verifyParamMax("radius",ae.radius,50,"nos::genBlurOp"),z.verifyParamType("sigma",ae.sigma,"number","nos::genBlurOp"),z.verifyParamMin("sigma",ae.sigma,0,"nos::genBlurOp");var Ue=Math.round(ae.radius),de=Math.round(ae.sigma);return new ie({type:ae.type,blurRadius:Ue,blurSigma:de})},re.genCropOp=function(ae){z.verifyOptions(ae,"x y width height","nos::genCropOp"),z.verifyParamType("x",ae.x,"number","nos::genCropOp"),z.verifyParamMin("x",ae.x,0,"nos::genCropOp"),z.verifyParamType("y",ae.y,"number","nos::genCropOp"),z.verifyParamMin("y",ae.y,0,"nos::genCropOp"),z.verifyParamType("width",ae.width,"number","nos::genCropOp"),z.verifyParamMin("width",ae.width,0,"nos::genCropOp"),z.verifyParamType("height",ae.height,"number","nos::genCropOp"),z.verifyParamMin("height",ae.height,0,"nos::genCropOp");var Ue=Math.round(ae.x),de=Math.round(ae.y),_e=Math.round(ae.width),Ve=Math.round(ae.height);return new ie({type:ae.type,cropX:Ue,cropY:de,cropWidth:_e,cropHeight:Ve})},re.genThumbnailOp=(n={cover:"z",contain:"x",crop:"y"},function(ae){z.verifyOptions(ae,"mode","nos::genThumbnailOp"),z.verifyParamValid("mode",ae.mode,V(n),"nos::genThumbnailOp"),ae.mode==="contain"?z.verifyParamAtLeastPresentOne(ae,"width height","nos::genThumbnailOp"):z.verifyOptions(ae,"width height","nos::genThumbnailOp"),z.undef(ae.width)&&(ae.width=0),z.undef(ae.height)&&(ae.height=0),z.verifyParamType("width",ae.width,"number","nos::genThumbnailOp"),z.verifyParamMin("width",ae.width,0,"nos::genThumbnailOp"),z.verifyParamType("height",ae.height,"number","nos::genThumbnailOp"),z.verifyParamMin("height",ae.height,0,"nos::genThumbnailOp");var Ue=Math.round(ae.width),de=Math.round(ae.height),_e=new ie({type:ae.type,thumbnailMode:n[ae.mode],thumbnailWidth:Ue,thumbnailHeight:de});if(ae.mode==="crop"&&z.notundef(ae.axis)){z.undef(ae.axis.x)&&(ae.axis.x=5),z.undef(ae.axis.y)&&(ae.axis.y=5),z.verifyParamMin("axis.x",ae.axis.x,0,"nos::genThumbnailOp"),z.verifyParamMax("axis.x",ae.axis.x,10,"nos::genThumbnailOp"),z.verifyParamMin("axis.y",ae.axis.y,0,"nos::genThumbnailOp"),z.verifyParamMax("axis.y",ae.axis.y,10,"nos::genThumbnailOp");var Ve=Math.round(ae.axis.x),$e=Math.round(ae.axis.y);_e.thumbnailAxisX=Ve,_e.thumbnailAxisY=$e}return z.notundef(ae.enlarge)&&(z.verifyParamType("enlarge",ae.enlarge,"boolean","nos::genThumbnailOp"),ae.enlarge&&(_e.thumbnailEnlarge=1)),_e.thumbnailToStatic=this.options.thumbnailToStatic?1:0,_e}),re.getNosOriginUrl=function(ae){var Ue;(ae=ae||{}).done=oe({instance:this,className:"ApiBaseFn",funcName:"getNosOriginUrl",done:ae.done}),z.verifyOptions(ae,"safeShortUrl",!0,"","nos::getNosOriginUrl"),z.verifyParamType("safeShortUrl",ae.safeShortUrl,"string","nos::getNosOriginUrl"),/^http(s)?:/.test(ae.safeShortUrl)&&~y(Ue=ae.safeShortUrl).call(Ue,"im_url=1")?(this.processCallback(ae),this.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:ae.safeShortUrl}},ae.callback)):ae.done(new le(" safeShortUrl ",{callFunc:"nos: getNosOriginUrl"}),ae)}},function(t,r,e){var n,g=e(6),y=e(7),i=e(4),k=e(22),$=e(108),L=$.genUrlSep,V=$.url2object,z=$.object2url,re=e(0),ie=e(77).fn,ue=e(25).reportAPI;ie.viewImageSync=function(le){ue({instance:this,className:"ApiBaseFn",funcName:"viewImageSync",hasCallback:!1});var oe=this.options;re.verifyOptions(le,"url","nos::viewImageSync");var ae=le.url,Ue=V(ae),de=Ue.protocol,_e=Ue.hostname,Ve=Ue.path,$e=Ue.query;if(typeof le.strip=="boolean"&&($e.stripmeta=le.strip?1:0),typeof le.quality=="number"&&(re.verifyParamMin("quality",le.quality,0,"nos::viewImageSync"),re.verifyParamMax("quality",le.quality,100,"nos::viewImageSync"),$e.quality=Math.round(le.quality)),typeof le.interlace=="boolean"&&($e.interlace=le.interlace?1:0),typeof le.rotate=="number"&&($e.rotate=Math.round(le.rotate)),k(le.thumbnail)==="object"){var Lt=le.thumbnail.mode||"crop",jt=le.thumbnail.width,Et=le.thumbnail.height;if(jt>=0&&Et>=0&&jt<4096&&Et<4096&&(jt>0||Et>0)){var ir,ur;switch(Lt){case"crop":Lt="y";break;case"contain":Lt="x";break;case"cover":Lt="z";break;default:Lt="x"}$e.thumbnail=g(ir=g(ur="".concat(jt)).call(ur,Lt)).call(ir,Et)}}if(oe.downloadUrl){var Dt=V(le.url),lr=oe.downloadUrl,sr=Dt.path,er=y(sr).call(sr,"/");if(er!==-1){var cr=sr.substring(0,er),or=sr.substring(er+1);lr=lr.replace("{bucket}",cr).replace("{object}",or)}var hr=V(lr);return z({protocol:hr.protocol,hostname:hr.hostname,path:hr.path,query:re.merge(hr.query,$e)})}return z({protocol:de,hostname:_e,path:Ve,query:$e})},ie.viewImageStripMeta=function(le){ue({instance:this,className:"ApiBaseFn",funcName:"viewImageStripMeta",hasCallback:!1}),re.verifyOptions(le,"url strip","nos::viewImageStripMeta"),re.verifyParamType("strip",le.strip,"boolean","nos::viewImageStripMeta");var oe="stripmeta="+(le.strip?1:0),ae=L(le.url);return le.url+ae+oe},ie.viewImageQuality=function(le){ue({instance:this,className:"ApiBaseFn",funcName:"viewImageQuality",hasCallback:!1}),re.verifyOptions(le,"url quality","nos::viewImageQuality"),re.verifyParamType("quality",le.quality,"number","nos::viewImageQuality"),re.verifyParamMin("quality",le.quality,0,"nos::viewImageQuality"),re.verifyParamMax("quality",le.quality,100,"nos::viewImageQuality");var oe="quality="+Math.round(le.quality),ae=L(le.url);return le.url+ae+oe},ie.viewImageInterlace=function(le){ue({instance:this,className:"ApiBaseFn",funcName:"viewImageInterlace",hasCallback:!1}),re.verifyOptions(le,"url","nos::viewImageInterlace");var oe=L(le.url);return le.url+oe+"interlace=1"},ie.viewImageRotate=function(le){for(ue({instance:this,className:"ApiBaseFn",funcName:"viewImageRotate",hasCallback:!1}),re.verifyOptions(le,"url angle","nos::viewImageRotate"),re.verifyParamType("angle",le.angle,"number","nos::viewImageRotate");le.angle<0;)le.angle=le.angle+360;le.angle=le.angle%360;var oe="rotate="+Math.round(le.angle),ae=L(le.url);return le.url+ae+oe},ie.viewImageBlur=function(le){ue({instance:this,className:"ApiBaseFn",funcName:"viewImageBlur",hasCallback:!1}),re.verifyOptions(le,"url radius sigma","nos::viewImageBlur"),re.verifyParamType("radius",le.radius,"number","nos::viewImageBlur"),re.verifyParamMin("radius",le.radius,1,"nos::viewImageBlur"),re.verifyParamMax("radius",le.radius,50,"nos::viewImageBlur"),re.verifyParamType("sigma",le.sigma,"number","nos::viewImageBlur"),re.verifyParamMin("sigma",le.sigma,0,"nos::viewImageBlur");var oe="blur="+Math.round(le.radius)+"x"+Math.round(le.sigma),ae=L(le.url);return le.url+ae+oe},ie.viewImageCrop=function(le){ue({instance:this,className:"ApiBaseFn",funcName:"viewImageCrop",hasCallback:!1}),re.verifyOptions(le,"url x y width height","nos::viewImageCrop"),re.verifyParamType("x",le.x,"number","nos::viewImageCrop"),re.verifyParamMin("x",le.x,0,"nos::viewImageCrop"),re.verifyParamType("y",le.y,"number","nos::viewImageCrop"),re.verifyParamMin("y",le.y,0,"nos::viewImageCrop"),re.verifyParamType("width",le.width,"number","nos::viewImageCrop"),re.verifyParamMin("width",le.width,0,"nos::viewImageCrop"),re.verifyParamType("height",le.height,"number","nos::viewImageCrop"),re.verifyParamMin("height",le.height,0,"nos::viewImageCrop");var oe="crop="+Math.round(le.x)+"_"+Math.round(le.y)+"_"+Math.round(le.width)+"_"+Math.round(le.height),ae=L(le.url);return le.url+ae+oe},ie.viewImageThumbnail=(n={cover:"z",contain:"x",crop:"y"},function(le){re.verifyOptions(le,"url mode","nos::viewImageThumbnail"),re.verifyParamValid("mode",le.mode,i(n),"nos::viewImageThumbnail"),le.mode==="contain"?re.verifyParamAtLeastPresentOne(le,"width height","nos::viewImageThumbnail"):re.verifyOptions(le,"width height","nos::viewImageThumbnail"),re.undef(le.width)&&(le.width=0),re.undef(le.height)&&(le.height=0),re.verifyParamType("width",le.width,"number","nos::viewImageThumbnail"),re.verifyParamMin("width",le.width,0,"nos::viewImageThumbnail"),re.verifyParamType("height",le.height,"number","nos::viewImageThumbnail"),re.verifyParamMin("height",le.height,0,"nos::viewImageThumbnail");var oe=Math.round(le.width),ae=Math.round(le.height),Ue="thumbnail="+oe+n[le.mode]+ae;le.mode==="crop"&&re.notundef(le.axis)&&(re.undef(le.axis.x)&&(le.axis.x=5),re.undef(le.axis.y)&&(le.axis.y=5),re.verifyParamMin("axis.x",le.axis.x,0,"nos::viewImageThumbnail"),re.verifyParamMax("axis.x",le.axis.x,10,"nos::viewImageThumbnail"),re.verifyParamMin("axis.y",le.axis.y,0,"nos::viewImageThumbnail"),re.verifyParamMax("axis.y",le.axis.y,10,"nos::viewImageThumbnail"),Ue=Ue+"&axis="+Math.round(le.axis.x)+"_"+Math.round(le.axis.y)),re.notundef(le.enlarge)&&(re.verifyParamType("enlarge",le.enlarge,"boolean","nos::viewImageThumbnail"),le.enlarge&&(Ue+="&enlarge=1"));var de=L(le.url);return le.url+de+Ue})},function(t,r,e){var n=e(634);t.exports=n},function(t,r,e){var n=e(19),g=e(635),y=e(637),i=Array.prototype,k=String.prototype;t.exports=function($){var L=$.includes;return $===i||n(i,$)&&L===i.includes?g:typeof $=="string"||$===k||n(k,$)&&L===k.includes?y:L}},function(t,r,e){e(636);var n=e(29);t.exports=n("Array").includes},function(t,r,e){var n=e(1),g=e(163).includes,y=e(5),i=e(199);n({target:"Array",proto:!0,forced:y(function(){return!Array(1).includes()})},{includes:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,r,e){e(638);var n=e(29);t.exports=n("String").includes},function(t,r,e){var n=e(1),g=e(12),y=e(639),i=e(110),k=e(50),$=e(641),L=g("".indexOf);n({target:"String",proto:!0,forced:!$("includes")},{includes:function(V){return!!~L(k(i(this)),k(y(V)),arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(640),g=TypeError;t.exports=function(y){if(n(y))throw g("The method doesn't accept regular expressions");return y}},function(t,r,e){var n=e(28),g=e(65),y=e(21)("match");t.exports=function(i){var k;return n(i)&&((k=i[y])!==void 0?!!k:g(i)=="RegExp")}},function(t,r,e){var n=e(21)("match");t.exports=function(g){var y=/./;try{"/./"[g](y)}catch{try{return y[n]=!1,"/./"[g](y)}catch{}}return!1}},function(t,r,e){var n=e(22),g=e(8),y=e(7),i=e(306),k=e(0),$=e(77).fn,L=e(11),V=e(25).reportAPI;function z(ie,ue,le,oe){var ae=!1,Ue="";if(le===1?y(ie).call(ie,ue)>=0&&(ae=!0,Ue=ue):le===2&&(Ue=new RegExp(ue,"g")).test(ie)&&(ae=!0),ae&&Ue!=="")switch(oe){case 1:return ie.replace(Ue,"**");case 2:return{code:2};case 3:return{code:3}}return ie}function re(ie,ue){for(var le=ue.match,oe=ue.operate,ae=ie,Ue=0;Ue<i(ue).length;Ue++){var de=i(ue)[Ue],_e=de.match||le,Ve=de.operate||oe;try{if(ae=z(ae,de.key,_e,Ve),n(ae)==="object")return ae}catch($e){this.logger.warn("misc::filterContent: js cannot parse this regexp ",$e)}}return ae}$.uploadSdkLogUrl=function(ie){return k.verifyOptions(ie,"url","misc::uploadSdkLogUrl"),this.cbAndSendCmd("uploadSdkLogUrl",ie)},$.getClientAntispamLexicon=function(ie){var ue=this;(ie=ie||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getClientAntispamLexicon",done:ie.done});var le=(ie=ie||{}).done;le instanceof Function||(le=function(){}),ie={clientAntispam:{version:0}};var oe=this;if(L.hasLocalStorage&&localStorage.getItem("antispamLexicon")&&localStorage.getItem("antispamLexicon")!=="{}")try{oe.antispamLexicon=JSON.parse(localStorage.getItem("antispamLexicon"))}catch(ae){this.logger.error("JSON parse antispamLexicon error",ae)}oe.antispamLexicon&&le.call(this,null,{clientAntispam:oe.antispamLexicon}),this.protocol.sendCmd("getClientAntispam",ie,function(ae,Ue,de){ae?(oe.protocol.logger.error("misc::getClientAntispamLexicon:",ae),le.call(ue,ae,{})):(L.hasLocalStorage&&localStorage.setItem("antispamLexicon",g(de.clientAntispam)),oe.antispamLexicon||le.call(ue,null,de),oe.antispamLexicon=de.clientAntispam||{})})},$.filterClientAntispam=function(ie){V({instance:this,className:"ApiBaseFn",funcName:"filterClientAntispam",hasCallback:!1});var ue=ie.content;if(!ue)return{code:404,errmsg:"content"};var le=this.antispamLexicon&&this.antispamLexicon.thesaurus;if(!le)return{code:404,errmsg:""};try{le=JSON.parse(le).thesaurus}catch{return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"),{code:500,errmsg:""}}for(var oe=ue,ae=0;ae<le.length;ae++)if(oe=re.call(this,oe,le[ae]),n(oe)==="object"){if(oe.code===2)return{code:200,type:2,errmsg:"",content:ue,result:""};if(oe.code===3)return{code:200,type:3,errmsg:"clientAntiSpam",content:ue,result:ue}}return oe===ue?{code:200,type:0,errmsg:"",content:ue,result:oe}:{code:200,type:1,errmsg:"",content:ue,result:oe}},$.getServerTime=function(ie){(ie=ie||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getServerTime",done:ie.done}),this.processCallback(ie),this.sendCmd("getServerTime",{},ie.callback)},$.getNosAccessToken=function(ie){(ie=ie||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getNosAccessToken",done:ie.done}),k.verifyOptions(ie,"url","misc::getNosAccessToken"),this.processCallback(ie);var ue={url:ie.url};ie.userAgent&&(ue.userAgent=ie.userAgent),ie.ext&&(ue.ext=ie.ext),this.sendCmd("getNosAccessToken",{nosAccessTokenTag:ue},function(le,oe,ae){var Ue=ae&&ae.nosAccessTokenTag&&ae.nosAccessTokenTag.token,de=ie.url,_e=Ue?{token:Ue,resUrl:y(de).call(de,"?")!==-1?de+"&token="+Ue:de+"?token="+Ue}:{};ie.done(le,_e)})},$.deleteNosAccessToken=function(ie){(ie=ie||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"deleteNosAccessToken",done:ie.done}),k.verifyOptions(ie,"token","misc::deleteNosAccessToken"),this.processCallback(ie),this.sendCmd("deleteNosAccessToken",{nosAccessTokenTag:{token:ie.token}},ie.callback)}},function(t,r,e){e(69);var n=e(67),g=e(30),y=e(19),i=e(644),k=Array.prototype,$={DOMTokenList:!0,NodeList:!0};t.exports=function(L){var V=L.keys;return L===k||y(k,L)&&V===k.keys||g($,n(L))?i:V}},function(t,r,e){var n=e(645);t.exports=n},function(t,r,e){e(86),e(100);var n=e(29);t.exports=n("Array").keys},function(t,r,e){var n=e(22),g=e(3),y=e(9),i=e(8),k=e(77).fn,$=e(0),L=e(193),V=e(287),z=e(25).reportAPI;k.signalingCreate=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.type,ue=re.channelName,le=re.ext;return $.verifyOptions(re,"type","api::signalling"),this.sendCmdUsePromise("signalingCreate",{avSignalTag:{type:ie,channelName:ue,ext:le}}).then(function(oe){var ae=oe.avSignalTag;return g.resolve(ae)}).catch(function(oe){return g.reject(V.parseAvSignalError(oe))})},k.signalingDelay=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingDelay",{avSignalTag:re}).then(function(ie){var ue=ie.avSignalTag;return g.resolve(ue)}).catch(function(ie){return g.reject(V.parseAvSignalError(ie))})},k.signalingClose=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.offlineEnabled;return $.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingClose",{avSignalTag:$.merge(re,{isSave:ie===!0?1:0})}).then(function(ue){var le=ue.avSignalTag;return le.offlineEnabled=le.isSave===1,delete le.isSave,g.resolve(le)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingJoin=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.offlineEnabled;return $.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingJoin",{avSignalTag:$.merge(re,{isSave:ie===!0?1:0})}).then(function(ue){var le,oe=ue.avSignalTag,ae=oe.members;return typeof oe.members=="string"&&(ae=y(le=JSON.parse(oe.members)).call(le,function(Ue){return V.parseAvSignalMember(Ue)})),oe.members=ae,g.resolve(oe)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingLeave=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.offlineEnabled;return $.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingLeave",{avSignalTag:$.merge(re,{isSave:ie===!0?1:0})}).then(function(ue){var le=ue.avSignalTag;return le.offlineEnabled=le.isSave===1,delete le.isSave,g.resolve(le)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingGetChannelInfo=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.channelName;return $.verifyOptions(re,"channelName","api::signalling"),this.sendCmdUsePromise("signalingGetChannelInfo",{avSignalTag:{channelName:ie}}).then(function(ue){var le,oe=ue.avSignalTag,ae=oe.members;return typeof oe.members=="string"&&(ae=y(le=JSON.parse(oe.members)).call(le,function(Ue){return V.parseAvSignalMember(Ue)})),oe.members=ae,g.resolve(oe)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingInvite=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.account,ue=re.offlineEnabled,le=re.pushInfo,oe=le===void 0?{}:le;$.verifyOptions(re,"channelId requestId account","api::signalling"),n(oe.pushPayload)==="object"&&(oe.pushPayload=i(oe.pushPayload));var ae=$.merge(re,oe,{to:ie,isSave:ue===!0?1:0,needPush:oe.needPush===!0?1:0,needBadge:oe.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingInvite",{avSignalTag:ae}).then(function(Ue){var de=Ue.avSignalTag;return de.offlineEnabled=de.isSave===1,de.needBadge=de.needBadge===1,de.needPush=de.needPush===1,delete de.isSave,g.resolve(de)}).catch(function(Ue){return g.reject(V.parseAvSignalError(Ue))})},k.signalingCancel=function(re){var ie=re.account,ue=re.offlineEnabled;return $.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingCancel",{avSignalTag:$.merge(re,{to:ie,isSave:ue===!0?1:0})}).then(function(le){var oe=le.avSignalTag;return oe.offlineEnabled=oe.isSave===1,delete oe.isSave,g.resolve(oe)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingCreateAndJoin=function(re){var ie=this,ue=z({instance:this,className:"ApiBaseFn",funcName:"signalingCreateAndJoin",hasCallback:!0}),le=re.channelName,oe=re.uid,ae=oe===void 0?0:oe,Ue=re.offlineEnabled,de=Ue===void 0||Ue,_e=re.attachExt,Ve=_e===void 0?"":_e;return this.signalingCreate(re).catch(function($e){return $e.code===10405?(ie.logger.warn("api::avSignal:signalingCall room already exists:",$e),ie.signalingGetChannelInfo({channelName:le})):g.reject($e)}).then(function($e){var Lt={channelId:$e.channelId,offlineEnabled:de,attachExt:Ve,nertcChannelName:re.nertcChannelName,nertcTokenTtl:re.nertcTokenTtl,nertcJoinRoomQueryParamMap:re.nertcJoinRoomQueryParamMap};return ae&&$.merge(Lt,{uid:ae}),ie.signalingJoin(Lt)}).then(function($e){return typeof ue=="function"&&ue(void 0),$e}).catch(function($e){throw typeof ue=="function"&&ue($e),$e})},k.signalingCall=function(re){var ie=this,ue=z({instance:this,className:"ApiBaseFn",funcName:"signalingCall",hasCallback:!0}),le=re.account,oe=re.offlineEnabled,ae=re.requestId;$.verifyOptions(re,"type requestId account","api::signalling");var Ue="";return this.signalingCreateAndJoin(re).then(function(de){Ue=de.channelId||Ue,ie.logger.info("api::avSignal:signalingCall join:",Ue);var _e={channelId:Ue,account:le,requestId:ae,offlineEnabled:oe,attachExt:re.attachExt||"",pushInfo:re.pushInfo||{},nertcTokenTtl:de.nertcTokenTtl,nertcToken:de.nertcToken};return ie.signalingInvite(_e)}).then(function(de){return typeof ue=="function"&&ue(void 0),de}).catch(function(de){throw typeof ue=="function"&&ue(de),de})},k.signalingReject=function(re){var ie=re.account,ue=re.offlineEnabled;return $.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingReject",{avSignalTag:$.merge(re,{to:ie,isSave:ue===!0?1:0})}).then(function(le){var oe=le.avSignalTag;return oe.offlineEnabled=oe.isSave===1,delete oe.isSave,g.resolve(oe)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingAccept=function(re){var ie=this,ue=re.account,le=re.offlineEnabled;return $.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingAccept",{avSignalTag:$.merge(re,{to:ue,isSave:le===!0?1:0})}).then(function(oe){var ae=oe.avSignalTag;return ae.offlineEnabled=ae.isSave===1,delete ae.isSave,g.resolve(ae)}).catch(function(oe){return g.reject(V.parseAvSignalError(oe))}).then(function(oe){if(re.autoJoin){var ae={channelId:re.channelId,offlineEnabled:re.offlineEnabled,attachExt:re.joinAttachExt,uid:re.uid,nertcChannelName:re.nertcChannelName,nertcTokenTtl:re.nertcTokenTtl,nertcJoinRoomQueryParamMap:re.nertcJoinRoomQueryParamMap};return ie.signalingJoin(ae)}return oe})},k.signalingControl=function(re){var ie=re.account;return $.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingControl",{avSignalTag:$.merge(re,ie?{to:ie}:{})}).then(function(ue){var le=ue.avSignalTag;return g.resolve(le)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingSync=function(){return this.sendCmdUsePromise("sync",{sync:{avSignal:0}}).then(function(re){var ie=re.avSignalTag;return g.resolve(ie)}).catch(function(re){return g.reject(V.parseAvSignalError(re))})},k.signalingMarkMsgRead=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z({instance:this,className:"ApiBaseFn",funcName:"signalingMarkMsgRead",hasCallback:!1}),$.verifyOptions(re,"msgid","api::signalling");var ie,ue=L.idMap.avSignal;return ie=typeof re.msgid=="string"?[re.msgid]:re.msgid,this.sendCmd("batchMarkRead",{sid:ue.id,cid:ue.signalingNotify,ids:ie})},k.signalingCallEx=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.account,ue=re.offlineEnabled,le=re.pushInfo,oe=le===void 0?{}:le;n(oe.pushPayload)==="object"&&(oe.pushPayload=i(oe.pushPayload)),$.verifyOptions(re,"type","api::signalling"),$.verifyOptions(re,"account","api::signalling");var ae=$.merge(re,oe,{to:ie,isSave:ue===!0?1:0,needPush:oe.needPush===!0?1:0,needBadge:oe.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingCallEx",{avSignalTag:ae}).then(function(Ue){var de,_e=Ue.avSignalTag,Ve=_e.members;return typeof _e.members=="string"&&(Ve=y(de=JSON.parse(_e.members)).call(de,function($e){return V.parseAvSignalMember($e)})),_e.members=Ve,g.resolve(_e)}).catch(function(Ue){return g.reject(V.parseAvSignalError(Ue))})},k.signalingJoinAndAccept=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.channelId,ue=re.attachExt,le=re.offlineEnabled,oe=re.uid,ae=re.account,Ue=re.requestId,de=re.nertcChannelName,_e=re.nertcTokenTtl,Ve=re.nertcJoinRoomQueryParamMap;return $.verifyOptions(re,"channelId","api::signalling"),$.verifyOptions(re,"account","api::signalling"),$.verifyOptions(re,"requestId","api::signalling"),this.sendCmdUsePromise("signalingJoinAndAccept",{avSignalTag:{channelId:ie,attachExt:ue,isSave:le===!0?1:0,uid:oe,to:ae,requestId:Ue,nertcChannelName:de,nertcTokenTtl:_e,nertcJoinRoomQueryParamMap:Ve}}).then(function($e){var Lt,jt=$e.avSignalTag,Et=jt.members;return typeof jt.members=="string"&&(Et=y(Lt=JSON.parse(jt.members)).call(Lt,function(ir){return V.parseAvSignalMember(ir)})),jt.members=Et,g.resolve(jt)}).catch(function($e){return g.reject(V.parseAvSignalError($e))})}},function(t,r,e){var n=e(51),g=e(37),y=e(4),i=e(52),k=e(16),$=e(53),L=e(2),V=e(54),z=e(55),re=e(43),ie=e(92),ue=e(93);function le(ae,Ue){var de=y(ae);if(i){var _e=i(ae);Ue&&(_e=k(_e).call(_e,function(Ve){return $(ae,Ve).enumerable})),de.push.apply(de,_e)}return de}e(0);var oe={user_id:"",trace_id:"",action:7,exception_service:6,duration:0,start_time:0,state:1,extension:[]};t.exports=function(){function ae(Ue){ie(this,ae),this.clientProto=Ue,this.reset()}return ue(ae,[{key:"reset",value:function(){this.traceData=g({},oe),this.traceData.extension=[]}},{key:"start",value:function(Ue){this.reset(),g(this.traceData,Ue),this.traceData.user_id=this.clientProto.account,this.traceData.start_time=new Date().getTime()}},{key:"update",value:function(Ue){var de=this.clientProto.checkNetworkAvailable();this.traceData.extension.push(function(_e){for(var Ve=1;Ve<arguments.length;Ve++){var $e,Lt,jt=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?L($e=le(Object(jt),!0)).call($e,function(Et){n(_e,Et,jt[Et])}):V?z(_e,V(jt)):L(Lt=le(Object(jt))).call(Lt,function(Et){re(_e,Et,$(jt,Et))})}return _e}({code:0,description:"",foreground:!0,foreg_backg_switch:!1,net_type:0,net_connect:de},Ue))}},{key:"end",value:function(Ue){var de=this.traceData.extension[0],_e=this.traceData.extension[1];if(de&&de.operation_type===0&&_e&&_e.operation_type===1){var Ve=de.net_type!==_e.net_type||de.net_connect!==_e.net_connect;if(Ue||!Ve)return this.traceData.duration=new Date().getTime()-this.traceData.start_time,this.clientProto.reporter.report("exceptions",this.traceData),void this.reset();this.reset()}else this.reset()}}]),ae}()},function(t,r,e){var n=e(2),g=e(92),y=e(93),i=e(62).getPromiseWithAbort,k=function(){function $(){g(this,$),this.abortFns=[]}return y($,[{key:"add",value:function(L){var V=i(L);return this.abortFns.push(V.abort),V.promise}},{key:"clear",value:function(){var L;n(L=this.abortFns).call(L,function(V){return V("Request aborted")}),this.abortFns=[]}},{key:"destroy",value:function(){this.clear()}}]),$}();t.exports=k},function(t,r,e){var n=e(57),g=e(58),y=e(2),i=e(71),k=e(3),$=e(9),L=e(60),V=e(15),z=e(6),re=e(8),ie=e(26),ue=e(92),le=e(93),oe=e(0),ae=e(11),Ue=e(64),de=e(289),_e=e(41);t.exports=function(){function Ve(Lt){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{socketConcurrent:1};ue(this,Ve),this.clientProto=Lt,this.logger=Lt.logger,this.urls=[],this.sockets=[],this.config=jt}var $e;return le(Ve,[{key:"setConfig",value:function(){var Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{socketConcurrent:1};this.config=Lt}},{key:"setUrls",value:function(Lt){this.urls=Lt}},{key:"resetSockets",value:function(){var Lt;y(Lt=this.sockets).call(Lt,function(jt){jt&&(jt.removeAllListenersX("info"),jt.disconnect())}),this.sockets=[]}},{key:"connect",value:($e=g(n.mark(function Lt(){var jt,Et,ir,ur=this;return n.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(this.clientProto.statusProtector.emit("auth/loginLifeCycleConnect"),(Et=i(jt=this.urls).call(jt,0,this.config.socketConcurrent)).length!==0){Dt.next=4;break}throw new _e("no_socket_url",408,{});case 4:return Dt.prev=4,Dt.next=7,k.any($(Et).call(Et,function(lr,sr){return ur.doConnect(lr,sr)}));case 7:return Dt.abrupt("return",Dt.sent);case 10:throw Dt.prev=10,Dt.t0=Dt.catch(4),y(ir=Dt.t0.errors).call(ir,function(lr,sr){ur.logger.warn("imsocket::connect failed ".concat(sr),lr)}),Dt.t0;case 14:case"end":return Dt.stop()}},Lt,this,[[4,10]])})),function(){return $e.apply(this,arguments)})},{key:"success",value:function(Lt){var jt;return y(jt=this.sockets).call(jt,function(Et,ir){Lt!==ir&&Et&&(Et.removeAllListenersX("info"),Et.disconnect())}),this.sockets[Lt]}},{key:"failed",value:function(Lt){var jt=this.sockets[Lt];jt&&(jt.removeAllListenersX("info"),jt.disconnect())}},{key:"getTransport",value:function(Lt){var jt=oe.getGlobal();if(typeof window>"u"){var Et=Lt.split(":");return jt&&!jt.location&&Et.length>1&&(jt.location={protocol:Et.shift(),port:Et.pop(),hostname:Et.join("")}),["websocket"]}return this.clientProto.options.transports?this.clientProto.options.transports:Ue.name!=="IE"||jt.WebSocket?["websocket"]:["xhr-polling"]}},{key:"doConnect",value:function(Lt,jt){var Et=this;if(this.clientProto&&this.clientProto.__destroyed===!0)return k.reject("instance has been destroyed");var ir=this.getTransport(Lt),ur=L();return new k(function(Dt,lr){var sr,er,cr,or;try{or=de.connect(Lt,{transports:V(ir).call(ir),reconnect:!1,"force new connection":!0,"connect timeout":ae.connectTimeout,needToXHR:typeof Et.clientProto.options.needToXHR=="boolean"?Et.clientProto.options.needToXHR:ae.needToXHR}),Et.sockets[jt]=or}catch(pr){var hr;return Et.logger.warn(z(hr="link::connectToUrl ".concat(jt,":io.connect caught exception: ")).call(hr,pr&&pr.message),pr),void lr(new _e("socket_error",408,{startTime:ur,url:Lt,reason:pr.message,rawError:pr}))}Et.logger.info(z(sr=z(er="link::connectToUrl ".concat(jt,": socket url: ")).call(er,Lt,", transports: ")).call(sr,re(ir))),or.on("connect",function(){Et.logger.info("link::connectToUrl ".concat(jt," success")),Et.success(jt),Et.clientProto.reporterHookLinkKeep.start({trace_id:or.socket.sessionid}),Et.clientProto.reporterHookLinkKeep.update({code:0,description:"",operation_type:0,target:Lt}),Et.clientProto.url=Lt,Dt(or)}),or.on("handshake_failed",function(){Et.failed(jt),lr(new _e("handshake_failed",408,{startTime:ur,url:Lt}))}),or.on("connect_failed",function(pr){Et.failed(jt),lr(new _e("connect_failed",408,{startTime:ur,url:Lt,reason:pr}))}),or.on("error",function(){var pr,Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Pr=arguments.length>1?arguments[1]:void 0,_r=Pr&&Pr.message||Tr;Et.logger.warn(z(pr="link::onSocketError ".concat(jt,": reason is ")).call(pr,_r,", error is "),Pr),lr(new _e("socket_error",408,{startTime:ur,url:Lt,reason:_r,rawError:Pr}))}),or.on("info",function(pr,Tr){var Pr,_r;Tr?Et.logger.info(z(Pr="link::onSocketInfo ".concat(jt,": ")).call(Pr,pr,", extraInfo:"),Tr):Et.logger.info(z(_r="link::onSocketInfo ".concat(jt,": ")).call(_r,pr,"."))}),or.on("message",ie(cr=Et.clientProto.onMessage).call(cr,Et.clientProto)),or.on("disconnect",function(pr){Et.logger.warn("link::onSocketDisconnect: socket url: ".concat(Lt,", disconnected"),pr),Et.clientProto.hasLogin=!1,Et.clientProto.doLogout?Et.clientProto.logout():Et.clientProto.onDisconnect("link::socketDisconnect"),Et.clientProto.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to internal reasons"))}),or.on("websocketOnclose",function(pr){Et.clientProto.reporterHookLinkKeep.update({code:pr&&pr.code||0,description:pr&&pr.reason||"",operation_type:1,target:Lt}),Et.clientProto.reporterHookLinkKeep.end(!1)})})}},{key:"destroy",value:function(){this.urls=[],this.resetSockets()}}]),Ve}()},function(t,r,e){var n=e(22).default,g=e(140),y=e(155),i=e(189),k=e(283),$=e(651),L=e(191),V=e(288),z=e(662),re=e(309);function ie(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=ie=function(){return ue},t.exports.__esModule=!0,t.exports.default=t.exports;var ue={},le=Object.prototype,oe=le.hasOwnProperty,ae=g||function(kr,Er,xr){kr[Er]=xr.value},Ue=typeof y=="function"?y:{},de=Ue.iterator||"@@iterator",_e=Ue.asyncIterator||"@@asyncIterator",Ve=Ue.toStringTag||"@@toStringTag";function $e(kr,Er,xr){return g(kr,Er,{value:xr,enumerable:!0,configurable:!0,writable:!0}),kr[Er]}try{$e({},"")}catch{$e=function(Er,xr,vr){return Er[xr]=vr}}function Lt(kr,Er,xr,vr){var Ir=Er&&Er.prototype instanceof ir?Er:ir,Or=i(Ir.prototype),Cr=new _r(vr||[]);return ae(Or,"_invoke",{value:hr(kr,xr,Cr)}),Or}function jt(kr,Er,xr){try{return{type:"normal",arg:kr.call(Er,xr)}}catch(vr){return{type:"throw",arg:vr}}}ue.wrap=Lt;var Et={};function ir(){}function ur(){}function Dt(){}var lr={};$e(lr,de,function(){return this});var sr=k&&k(k(Mr([])));sr&&sr!==le&&oe.call(sr,de)&&(lr=sr);var er=Dt.prototype=ir.prototype=i(lr);function cr(kr){var Er;$(Er=["next","throw","return"]).call(Er,function(xr){$e(kr,xr,function(vr){return this._invoke(xr,vr)})})}function or(kr,Er){var xr;ae(this,"_invoke",{value:function(vr,Ir){function Or(){return new Er(function(Cr,yr){(function fr(Sr,Br,$r,Lr){var Gr=jt(kr[Sr],kr,Br);if(Gr.type!=="throw"){var qr=Gr.arg,Yr=qr.value;return Yr&&n(Yr)=="object"&&oe.call(Yr,"__await")?Er.resolve(Yr.__await).then(function(bn){fr("next",bn,$r,Lr)},function(bn){fr("throw",bn,$r,Lr)}):Er.resolve(Yr).then(function(bn){qr.value=bn,$r(qr)},function(bn){return fr("throw",bn,$r,Lr)})}Lr(Gr.arg)})(vr,Ir,Cr,yr)})}return xr=xr?xr.then(Or,Or):Or()}})}function hr(kr,Er,xr){var vr="suspendedStart";return function(Ir,Or){if(vr==="executing")throw new Error("Generator is already running");if(vr==="completed"){if(Ir==="throw")throw Or;return rr()}for(xr.method=Ir,xr.arg=Or;;){var Cr=xr.delegate;if(Cr){var yr=pr(Cr,xr);if(yr){if(yr===Et)continue;return yr}}if(xr.method==="next")xr.sent=xr._sent=xr.arg;else if(xr.method==="throw"){if(vr==="suspendedStart")throw vr="completed",xr.arg;xr.dispatchException(xr.arg)}else xr.method==="return"&&xr.abrupt("return",xr.arg);vr="executing";var fr=jt(kr,Er,xr);if(fr.type==="normal"){if(vr=xr.done?"completed":"suspendedYield",fr.arg===Et)continue;return{value:fr.arg,done:xr.done}}fr.type==="throw"&&(vr="completed",xr.method="throw",xr.arg=fr.arg)}}}function pr(kr,Er){var xr=Er.method,vr=kr.iterator[xr];if(vr===void 0)return Er.delegate=null,xr==="throw"&&kr.iterator.return&&(Er.method="return",Er.arg=void 0,pr(kr,Er),Er.method==="throw")||xr!=="return"&&(Er.method="throw",Er.arg=new TypeError("The iterator does not provide a '"+xr+"' method")),Et;var Ir=jt(vr,kr.iterator,Er.arg);if(Ir.type==="throw")return Er.method="throw",Er.arg=Ir.arg,Er.delegate=null,Et;var Or=Ir.arg;return Or?Or.done?(Er[kr.resultName]=Or.value,Er.next=kr.nextLoc,Er.method!=="return"&&(Er.method="next",Er.arg=void 0),Er.delegate=null,Et):Or:(Er.method="throw",Er.arg=new TypeError("iterator result is not an object"),Er.delegate=null,Et)}function Tr(kr){var Er={tryLoc:kr[0]};1 in kr&&(Er.catchLoc=kr[1]),2 in kr&&(Er.finallyLoc=kr[2],Er.afterLoc=kr[3]),this.tryEntries.push(Er)}function Pr(kr){var Er=kr.completion||{};Er.type="normal",delete Er.arg,kr.completion=Er}function _r(kr){this.tryEntries=[{tryLoc:"root"}],$(kr).call(kr,Tr,this),this.reset(!0)}function Mr(kr){if(kr){var Er=kr[de];if(Er)return Er.call(kr);if(typeof kr.next=="function")return kr;if(!isNaN(kr.length)){var xr=-1,vr=function Ir(){for(;++xr<kr.length;)if(oe.call(kr,xr))return Ir.value=kr[xr],Ir.done=!1,Ir;return Ir.value=void 0,Ir.done=!0,Ir};return vr.next=vr}}return{next:rr}}function rr(){return{value:void 0,done:!0}}return ur.prototype=Dt,ae(er,"constructor",{value:Dt,configurable:!0}),ae(Dt,"constructor",{value:ur,configurable:!0}),ur.displayName=$e(Dt,Ve,"GeneratorFunction"),ue.isGeneratorFunction=function(kr){var Er=typeof kr=="function"&&kr.constructor;return!!Er&&(Er===ur||(Er.displayName||Er.name)==="GeneratorFunction")},ue.mark=function(kr){return L?L(kr,Dt):(kr.__proto__=Dt,$e(kr,Ve,"GeneratorFunction")),kr.prototype=i(er),kr},ue.awrap=function(kr){return{__await:kr}},cr(or.prototype),$e(or.prototype,_e,function(){return this}),ue.AsyncIterator=or,ue.async=function(kr,Er,xr,vr,Ir){Ir===void 0&&(Ir=V);var Or=new or(Lt(kr,Er,xr,vr),Ir);return ue.isGeneratorFunction(Er)?Or:Or.next().then(function(Cr){return Cr.done?Cr.value:Or.next()})},cr(er),$e(er,Ve,"Generator"),$e(er,de,function(){return this}),$e(er,"toString",function(){return"[object Generator]"}),ue.keys=function(kr){var Er=Object(kr),xr=[];for(var vr in Er)xr.push(vr);return z(xr).call(xr),function Ir(){for(;xr.length;){var Or=xr.pop();if(Or in Er)return Ir.value=Or,Ir.done=!1,Ir}return Ir.done=!0,Ir}},ue.values=Mr,_r.prototype={constructor:_r,reset:function(kr){var Er;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,$(Er=this.tryEntries).call(Er,Pr),!kr)for(var xr in this)xr.charAt(0)==="t"&&oe.call(this,xr)&&!isNaN(+re(xr).call(xr,1))&&(this[xr]=void 0)},stop:function(){this.done=!0;var kr=this.tryEntries[0].completion;if(kr.type==="throw")throw kr.arg;return this.rval},dispatchException:function(kr){if(this.done)throw kr;var Er=this;function xr(fr,Sr){return Or.type="throw",Or.arg=kr,Er.next=fr,Sr&&(Er.method="next",Er.arg=void 0),!!Sr}for(var vr=this.tryEntries.length-1;vr>=0;--vr){var Ir=this.tryEntries[vr],Or=Ir.completion;if(Ir.tryLoc==="root")return xr("end");if(Ir.tryLoc<=this.prev){var Cr=oe.call(Ir,"catchLoc"),yr=oe.call(Ir,"finallyLoc");if(Cr&&yr){if(this.prev<Ir.catchLoc)return xr(Ir.catchLoc,!0);if(this.prev<Ir.finallyLoc)return xr(Ir.finallyLoc)}else if(Cr){if(this.prev<Ir.catchLoc)return xr(Ir.catchLoc,!0)}else{if(!yr)throw new Error("try statement without catch or finally");if(this.prev<Ir.finallyLoc)return xr(Ir.finallyLoc)}}}},abrupt:function(kr,Er){for(var xr=this.tryEntries.length-1;xr>=0;--xr){var vr=this.tryEntries[xr];if(vr.tryLoc<=this.prev&&oe.call(vr,"finallyLoc")&&this.prev<vr.finallyLoc){var Ir=vr;break}}Ir&&(kr==="break"||kr==="continue")&&Ir.tryLoc<=Er&&Er<=Ir.finallyLoc&&(Ir=null);var Or=Ir?Ir.completion:{};return Or.type=kr,Or.arg=Er,Ir?(this.method="next",this.next=Ir.finallyLoc,Et):this.complete(Or)},complete:function(kr,Er){if(kr.type==="throw")throw kr.arg;return kr.type==="break"||kr.type==="continue"?this.next=kr.arg:kr.type==="return"?(this.rval=this.arg=kr.arg,this.method="return",this.next="end"):kr.type==="normal"&&Er&&(this.next=Er),Et},finish:function(kr){for(var Er=this.tryEntries.length-1;Er>=0;--Er){var xr=this.tryEntries[Er];if(xr.finallyLoc===kr)return this.complete(xr.completion,xr.afterLoc),Pr(xr),Et}},catch:function(kr){for(var Er=this.tryEntries.length-1;Er>=0;--Er){var xr=this.tryEntries[Er];if(xr.tryLoc===kr){var vr=xr.completion;if(vr.type==="throw"){var Ir=vr.arg;Pr(xr)}return Ir}}throw new Error("illegal catch attempt")},delegateYield:function(kr,Er,xr){return this.delegate={iterator:Mr(kr),resultName:Er,nextLoc:xr},this.method==="next"&&(this.arg=void 0),Et}},ue}t.exports=ie,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(652)},function(t,r,e){t.exports=e(653)},function(t,r,e){var n=e(654);t.exports=n},function(t,r,e){var n=e(230);t.exports=n},function(t,r,e){t.exports=e(656)},function(t,r,e){var n=e(657);e(658),e(659),e(660),e(661),t.exports=n},function(t,r,e){var n=e(232);t.exports=n},function(t,r,e){e(233)},function(t,r,e){e(247)},function(t,r,e){var n=e(1),g=e(70),y=e(104);n({target:"Promise",stat:!0,forced:!0},{try:function(i){var k=g.f(this),$=y(i);return($.error?k.reject:k.resolve)($.value),k.promise}})},function(t,r,e){e(248)},function(t,r,e){t.exports=e(663)},function(t,r,e){t.exports=e(664)},function(t,r,e){var n=e(665);t.exports=n},function(t,r,e){var n=e(276);t.exports=n},function(t,r,e){t.exports=e(667)},function(t,r,e){var n=e(668);t.exports=n},function(t,r,e){var n=e(251);t.exports=n},function(t,r,e){var n=e(57),g=e(58),y=e(2),i=e(6),k=e(15),$=e(71),L=e(24),V=e(3),z=e(26),re=e(78).fn,ie=e(41),ue=e(670),le=e(11),oe=e(0),ae=e(671);function Ue(){this.logger.log("offlineListener enter"),this.forceDisconnect(),this.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to network offline")),this.options.ondisconnect&&this.options.ondisconnect({code:"offlineListener",callFunc:"link::offlineListener",message:"offlineListener disconnect"}),this.onDisconnect("link::offlineListener","broken")}function de(){var _e=this;this.logger.log("onlineListener start"),this&&this.isConnected()&&!this.connecting?(this.stopHeartbeat(),this.sendCmd("heartbeat",null,function(Ve){if(Ve){_e.logger.info("onlineListener heartbeat detect error",Ve);try{_e.forceDisconnect(),_e.onDisconnect("link::onHeartbeat","broken")}catch($e){_e.logger.info("onlineListener heartbeat websocket.onclose",$e)}}else _e.logger.log("onlineListener heartbeat detect success")})):this.logger.log("onlineListener disconnected or connecting",this&&this.isConnected(),this.connecting)}re.initConnect=function(){this.socket=null,this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.doLogout=!1},re.resetConnect=function(){var _e=this.options;oe.notundef(_e.needReconnect)?(oe.verifyParamType("needReconnect",_e.needReconnect,"boolean","link::resetConnect"),this.needReconnect=_e.needReconnect):this.needReconnect=!0,this.logger.info("link::resetConnect: needReconnect ".concat(this.needReconnect)),oe.notundef(_e.reconnectionAttempts)&&oe.verifyParamType("reconnectionAttempts",_e.reconnectionAttempts,"number","link::resetConnect"),oe.notundef(_e.noCacheLinkUrl)&&oe.verifyParamType("noCacheLinkUrl",_e.noCacheLinkUrl,"boolean","link::resetConnect"),this.reconnectionAttempts=typeof _e.reconnectionAttempts=="number"?_e.reconnectionAttempts:1/0,this.backoff=new ue({min:le.reconnectionDelay,max:le.reconnectionDelayMax,jitter:le.reconnectionJitter})},re.reportTCPException=function(_e){var Ve=this;y(_e).call(_e,function($e,Lt){var jt,Et=$e.event,ir=Et===void 0?{}:Et,ur=$e.message,Dt=ir.startTime,lr=ir.code,sr=ir.reason,er=ir.url,cr="";ur==="handshake_failed"?cr="handshake_failed":ur==="connect_failed"?cr=sr?"connect_failed:".concat(sr):"connect_failed":ur==="socket_error"&&(cr=sr?"socket.io error:".concat(sr):"socket.io error"),Ve.logger.warn(i(jt="connect::failed ".concat(Lt,", ")).call(jt,cr),$e),Ve.reporter.reportTraceStart("exceptions",{user_id:Ve.options.account,trace_id:oe.get(self,"socket.socket.sessionid"),start_time:Dt,action:0,exception_service:6}),Ve.reporter.reportTraceUpdateV2("exceptions",{code:lr,description:ur,operation_type:0,target:er,net_connect:Ve.checkNetworkAvailable()}),Ve.reporter.reportTraceEnd("exceptions",1)})},re.connect=g(n.mark(function _e(){var Ve,$e,Lt,jt,Et;return n.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(Lt=this,clearTimeout(Lt.connectTimer),!Lt.isConnected()){ir.next=5;break}return Lt.logger.warn("link::connect: already connected"),ir.abrupt("return");case 5:if(!Lt.connecting){ir.next=8;break}return Lt.logger.warn("link::connect: already connecting"),ir.abrupt("return");case 8:if(Lt.connecting=!0,Lt.hasNotifyDisconnected=!1,Lt.shouldReconnect=!0,Lt.socket&&Lt.forceDisconnect(),Lt.logger.info("link::connect: connect to new socket, autoconnect is "+Lt.autoconnect),typeof Lt.options.socketUrl=="string"&&(Lt.logger.info("link::connect: try to options.socketUrl ",Lt.options.socketUrl),Lt.socketUrls=[Lt.options.socketUrl]),ir.prev=14,Lt.socketUrls&&Lt.socketUrls.length>0){ir.next=20;break}return ir.next=18,Lt.refreshSocketUrl();case 18:Lt.socketUrls=ae(Lt.socketUrls),Lt.logger.info("link::connect: refreshSocketUrl success, socketConcurrent ".concat(Lt.imsocket.config.socketConcurrent),Lt.socketUrls);case 20:ir.next=28;break;case 22:return ir.prev=22,ir.t0=ir.catch(14),Lt.logger.warn("connect::refreshSocketUrl: catch exception,",ir.t0&&ir.t0.message),Lt.connecting=!1,this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"refresh socket url fail"}),ir.abrupt("return");case 28:return Lt.imsocket.resetSockets(),Lt.imsocket.setUrls(k(Ve=Lt.socketUrls).call(Ve,0)),$($e=Lt.socketUrls).call($e,0,Lt.imsocket.config.socketConcurrent),ir.prev=31,ir.next=34,Lt.imsocket.connect();case 34:Lt.socket=ir.sent,Lt.onConnect(),ir.next=46;break;case 38:ir.prev=38,ir.t1=ir.catch(31),Et="",ir.t1.errors&&(Lt.reportTCPException(ir.t1.errors),jt=ir.t1.errors[0]),jt.message==="handshake_failed"?(Lt.onHandshakeFailed(jt.event.startTime,jt.event.url),Et="link::onHandshakeFailed"):jt.message==="connect_failed"?(Lt.onConnectFailed(jt.event.reason,jt.event.startTime,jt.event.url),Et="link::onConnectFailed"):jt.message==="socket_error"?(Lt.onSocketError(jt.event.reason,jt.event.startTime,jt.event.url),Et="link::onSocketError"):(Et="link::otherFailed",Lt.logger.warn("link::otherFailed",jt)),this.statusProtector.emit("auth/loginLifeCycleConnectFail",new Error("".concat(Et," 408"))),Lt.connecting=!1,Lt.willReconnect()?Lt.onDisconnect(Et):this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"init connect fail"});case 46:case"end":return ir.stop()}},_e,this,[[14,22],[31,38]])})),re.isConnected=function(){return!!this.socket&&!!this.socket.socket&&this.socket.socket.connected},re.disconnect=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},Ve=this;function $e(Lt){clearTimeout(Ve.disconnectCallbackTimer),Ve.msgAckBufferManager&&Ve.msgAckBufferManager.clear(),Ve.roamingMsgSyncDoneBufferManager&&Ve.roamingMsgSyncDoneBufferManager.clear(),Ve.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to active action")),Ve.statusProtector.emit("auth/loginLifeCycleLogout"),L(function(){_e(Lt)},0)}clearTimeout(Ve.connectTimer),Ve.disconnectCallbackTimer=L(function(){_e.call(Ve,"mark disconnected due to timeout")},1e4),Ve.mixStorePolicy=null,Ve.appGrayConfig=null,Ve.resetReconnectStatus(),clearTimeout(Ve.mixStorePolicyClock),this.onlineListener&&typeof window<"u"&&oe.isFunction(window.removeEventListener)&&(window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener),this.onlineListener=null,this.offlineListener=null),Ve.isConnected()?(Ve.logger.warn("link::disconnect: start disconnecting"),Ve.logout()):Ve.connecting?(Ve.logger.warn("link::disconnect: abort connecting"),Ve.disconnectSocket()):(Ve.logger.warn("link::disconnect: already disconnected"),Ve.connecting=!1,Ve.shouldReconnect=!1,Ve.socket=null,Ve.autoconnect=!1,Ve.options.ondisconnect({code:"alreadyDisconnected",callFunc:"link::disconnect",message:"manually disconnect status"})),Ve.socket&&Ve.socket.socket&&Ve.socket.socket.transport?Ve.socket.socket.transport.onDisconnectDone=function(Lt){Ve.logger.warn("link::disconnect: invoke [done] when socket closed",Lt),$e(Lt)}:(Ve.logger.warn("link::disconnect: invoke [done]"),$e(null))},re.resetReconnectStatus=function(){this.backoff&&(this.backoff.setMin(le.reconnectionDelay),this.backoff.setMax(le.reconnectionDelayMax),this.backoff.reset()),this.retryCount=0,this.logger.info("link::resetReconnectStatus: reset retryCount and backoff")},re.onConnect=function(){this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.logger.info("link::onConnect success"),this.statusProtector.emit("auth/loginLifeCycleConnectSucc"),this.login()},re.onDisconnect=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ve=arguments.length>1?arguments[1]:void 0,$e=this;this.logger.warn("socket::onDisconnect: "+_e),$e.connecting=!1,$e.markAllCallbackInvalid(ie.newNetworkError({callFunc:_e,uploadCode:415,disconnectReason:Ve})),$e.msgAckBufferManager&&$e.msgAckBufferManager.clear(),$e.roamingMsgSyncDoneBufferManager&&$e.roamingMsgSyncDoneBufferManager.clear(),$e.stopHeartbeat(),$e.reconnect()},re.willReconnect=function(){return this.shouldReconnect&&this.needReconnect&&this.retryCount<this.reconnectionAttempts},re.reconnect=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.__destroyed)if(this.willReconnect()){if(this.socket&&(this.logger.info("link::reconnect: try to force disconnect"),this.forceDisconnect()),this.socketUrls.length===0&&!this.options.socketUrl&&typeof _e.allFailedCB=="function")return this.logger.log("reconnect: All socket links have been polled, trigger hooks"),void _e.allFailedCB();this.doReconnect()}else this.notifyDisconnect({code:"allAttemptsFailed",message:"All attempts failed"})},re.doReconnect=function(){var _e,Ve=this;Ve.socket=null,Ve.retryCount++,Ve.hasLogin=!1;var $e,Lt=Ve.backoff.duration();Ve.logger.info(i(_e="link::reconnect: will retry after ".concat(Lt,"ms, retryCount ")).call(_e,Ve.retryCount)),$e=Ve.options.onwillreconnect({retryCount:Ve.retryCount,duration:Lt}),Ve.statusProtector.emit("auth/loginLifeCycleWaiting"),clearTimeout(Ve.connectTimer),Ve.connectTimer=L(function(){+Ve.options.authType==1&&$e instanceof V?(Ve.logger.info("link::reconnect: wait onwillreconnect promise"),$e.finally(function(){return Ve.connect()})):Ve.connect()},Lt)},re.notifyConnectError=function(_e){var Ve=ie.newConnectError({message:_e,callFunc:"link::notifyConnectError"});this.logger.error("link::notifyConnectError:",Ve),this.options.onerror(Ve)},re.notifyDisconnect=function(_e){this.hasNotifyDisconnected?this.logger.warn("notifyDisconnect:: already notified"):(this.hasNotifyDisconnected=!0,this.disconnectSocket(),this.forceDisconnect(),(_e=_e||new ie).retryCount=this.retryCount,_e.willReconnect=this.willReconnect(),this.backoff&&this.backoff.reset(),this.retryCount=0,this.autoconnect=!1,this.logger.info("link::notifyDisconnect: ondisconnected",_e),this.options.ondisconnect(_e),this.onWbNotifyHangup instanceof Function&&this.onWbNotifyHangup({content:{account:this.account,channelId:null,timetag:+Date()}}))},re.disconnectSocket=function(){if(this.isConnected()||this.connecting){this.connecting=!1,this.shouldReconnect=!1;try{this.socket&&this.socket.disconnect()}catch(_e){this.socket&&typeof this.socket.removeAllListenersX=="function"&&this.socket.removeAllListenersX("info"),this.logger.info("link::disconnectSocket: disconnect failed, error ",_e&&_e.message)}}},re.initOnlineListener=function(){this.needReconnect&&this.options&&this.options.quickReconnect?typeof window<"u"&&oe.isFunction(window.addEventListener)?this.onlineListener||(this.onlineListener=z(de).call(de,this),this.offlineListener=z(Ue).call(Ue,this),this.logger.info("initOnlineListener success"),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener no window.addEventListener"):this.logger.warn("initOnlineListener no quickReconnect")},re.forceDisconnect=function(){var _e=this.socket||{};this.socket=null;try{typeof _e.removeAllListenersX=="function"&&_e.removeAllListenersX("info"),typeof _e.disconnect=="function"&&_e.disconnect()}catch(Ve){this.logger.error("forceDisconnect:: oldSocket error",Ve||Ve.message)}this.hasLogin=!1}},function(t,r){function e(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var g=Math.random(),y=Math.floor(g*this.jitter*n);n=1&Math.floor(10*g)?n+y:n-y}return 0|Math.min(n,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(n){this.ms=n},e.prototype.setMax=function(n){this.max=n},e.prototype.setJitter=function(n){this.jitter=n}},function(t,r,e){var n=e(672);t.exports=function(g){return g&&g.length?n(g):[]}},function(t,r,e){var n=e(673),g=e(676),y=e(681),i=e(682),k=e(683),$=e(290);t.exports=function(L,V,z){var re=-1,ie=g,ue=L.length,le=!0,oe=[],ae=oe;if(z)le=!1,ie=y;else if(ue>=200){var Ue=V?null:k(L);if(Ue)return $(Ue);le=!1,ie=i,ae=new n}else ae=V?[]:oe;e:for(;++re<ue;){var de=L[re],_e=V?V(de):de;if(de=z||de!==0?de:0,le&&_e==_e){for(var Ve=ae.length;Ve--;)if(ae[Ve]===_e)continue e;V&&ae.push(_e),oe.push(de)}else ie(ae,_e,z)||(ae!==oe&&ae.push(_e),oe.push(de))}return oe}},function(t,r,e){var n=e(260),g=e(674),y=e(675);function i(k){var $=-1,L=k==null?0:k.length;for(this.__data__=new n;++$<L;)this.add(k[$])}i.prototype.add=i.prototype.push=g,i.prototype.has=y,t.exports=i},function(t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(677);t.exports=function(g,y){return!!(g!=null&&g.length)&&n(g,y,0)>-1}},function(t,r,e){var n=e(678),g=e(679),y=e(680);t.exports=function(i,k,$){return k==k?y(i,k,$):n(i,g,$)}},function(t,r){t.exports=function(e,n,g,y){for(var i=e.length,k=g+(y?1:-1);y?k--:++k<i;)if(n(e[k],k,e))return k;return-1}},function(t,r){t.exports=function(e){return e!=e}},function(t,r){t.exports=function(e,n,g){for(var y=g-1,i=e.length;++y<i;)if(e[y]===n)return y;return-1}},function(t,r){t.exports=function(e,n,g){for(var y=-1,i=e==null?0:e.length;++y<i;)if(g(n,e[y]))return!0;return!1}},function(t,r){t.exports=function(e,n){return e.has(n)}},function(t,r,e){var n=e(272),g=e(684),y=e(290),i=n&&1/y(new n([,-0]))[1]==1/0?function(k){return new n(k)}:g;t.exports=i},function(t,r){t.exports=function(){}},function(t,r,e){var n,g=e(15),y=e(78).fn,i=e(41),k=e(195),$=e(0),L=e(11),V=e(45),z=e(196).getLibEnv,re=e(64),ie=e(196).getHostEnvEnum,ue=$.notundef;y.genSessionKey=(n={},function(){var le=this.name;return n[le]=n[le]||$.guid()}),y.afterLogin=$.emptyFunc,y.assembleIMLogin=function(){var le,oe=this.options,ae=oe.account;this.sdkSession=this.genSessionKey();var Ue={appLogin:this.autoconnect?0:1,appKey:oe.appKey,account:ae,token:oe.token,sdkVersion:L.info.sdkVersion,sdkHumanVersion:L.info.sdkHumanVersion,protocolVersion:L.info.protocolVersion,os:re.os.toString()==="[object Object]"?re.os.family:re.os.toString(),browser:re.name+" "+re.version,clientType:L.CLIENTTYPE||16,session:this.sdkSession,deviceId:V.deviceId,isReactNative:L.isRN?1:0,customTag:oe.customTag||""};return Ue.userAgent=(L.isBrowser?navigator&&navigator.userAgent:"")||"",Ue.userAgent=oe.loginSDKTypeParamCompat?"Native/"+L.info.sdkHumanVersion:g(le=Ue.userAgent).call(le,0,299),Ue.libEnv=oe.loginSDKTypeParamCompat?void 0:z(),Ue.sdkType=oe.loginSDKTypeParamCompat?0:ie(),oe.customClientType&&(Ue.customClientType=+oe.customClientType),oe.authType&&(Ue.authType=+oe.authType),oe.loginExt&&(Ue.loginExt=oe.loginExt),Ue},y.notifyLogin=function(le){this.logger.info("link::notifyLogin: on connect",le),this.options.onconnect(le)},y.logout=function(){if(this.doLogout)return this.doLogout=!1,void this.onAuthError(new i("done logout","logout",{disconnectReason:"close",uploadCode:415}),"link::logout");this.isConnected()&&this.onAuthError(new i("done disconnect","logout",{disconnectReason:"close",uploadCode:415}),"link::logout")},y.onKicked=function(le){var oe=le.content,ae=oe.from,Ue=oe.reason,de=oe.custom,_e=oe.customClientType,Ve={reason:this.kickedReasons[Ue]||"unknown",message:this.kickedMessages[Ue]||""};ue(ae)&&(Ve.from=k.reverseType(ae)),ue(de)&&(Ve.custom=de),+_e>0&&(Ve.customClientType=_e),this.logger.warn("link::onKicked:",Ve);var $e=new i("","kicked",{disconnectReason:"kicked",uploadCode:415});$.merge($e,Ve),this.onAuthError($e,"link::onKicked"),this.statusProtector.emit("auth/loginLifeCycleDisconnected",new Error("disconnect due to kicked")),this.statusProtector.emit("auth/loginLifeCycleKicked",Ve)},y.onAuthError=function(le,oe){var ae=le&&le.code;if(this.logger.error("onAuthError ",oe,ae),/^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(ae))return this.forceDisconnect(),void this.onDisconnect("link::onAuthError::"+ae,"broken");(le=le||i.newConnectionError({callFunc:oe,uploadCode:415,disconnectReason:"close"})).callFunc=le.callFunc||oe||null,this.shouldReconnect=!1,this.markAllCallbackInvalid(le),this.notifyDisconnect(le)}},function(t,r,e){var n=e(24),g=e(26),y=e(22),i=e(78).fn,k=e(11),$=e(0);i.processLink=function(L){switch(L.cmd){case"heartbeat":this.startHeartbeat();break;case"notifyDetect":y($._get(L,"content.notifyDetectTag"))==="object"&&(L.content.notifyDetectTag.t3=new Date().getTime(),this.startDetect(L))}},i.startHeartbeat=function(){var L=this;L.stopHeartbeat(),L.heartbeatTimer=n(function(){var V;L.sendCmd("heartbeat",null,g(V=L.onHeartbeat).call(V,L))},k.heartbeatInterval)},i.detectHeartbeat=function(){var L;this.stopHeartbeat(),this.sendCmd("heartbeat",null,g(L=this.onHeartbeat).call(L,this))},i.startDetect=function(L){var V=L.content.notifyDetectTag;V.t4=new Date().getTime(),this.sendCmd("uploadDetect",{notifyDetectTag:V})},i.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},i.onHeartbeat=function(L){if(L){if(this.syncing)return this.logger.warn("onHeartbeat::ignore error in connecting"),void this.startHeartbeat();var V;L.callFunc="link::onHeartbeat",this.onCustomError("heartbeat error",L),this.heartbeatFail++,this.logger.warn("onHeartbeat::error ",L.code,L),L.code==="Error_Timeout"&&(this.heartbeatFail>1?(this.reporterHookLinkKeep.update({code:0,description:"Heartbeat-discovered link failure",operation_type:1,target:this.url}),this.reporterHookLinkKeep.end(!0),this.forceDisconnect(),this.onDisconnect("link::onHeartbeat","broken")):this.sendCmd("heartbeat",null,g(V=this.onHeartbeat).call(V,this)))}else this.heartbeatFail=0},i.checkNetworkAvailable=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?function(){return navigator.onLine}:function(){},i.heartbeat=function(){}},function(t,r,e){var n=e(3),g=e(7),y=e(32),i=e(24),k=e(48),$=e(78).fn,L=e(286),V=e(11),z=e(45);$.processMisc=function(re){switch(re.cmd){case"getSimpleNosToken":re.error||(re.obj=re.content.nosTokens[0]);break;case"getNosToken":re.error||(re.obj=re.content.nosToken);break;case"getGrayscaleConfig":re.error||(re.obj=re.content.appGrayConfigTag);break;case"getMixStorePolicy":re.error||(re.obj=re.content.mixStorePolicyTag);break;case"getMixStoreToken":re.error||(re.obj=re.content.mixStoreTokenTag);break;case"getBackSourceToken":re.error||(re.obj=re.content.backSourceTokenTag);break;case"uploadSdkLogUrl":re.error?this.logger.error("uploadSdkLogUrl::error",re.error):this.logger.info("uploadSdkLogUrl::success",re.obj&&re.obj.url);break;case"notifyUploadLog":re.error||(V.isRN?this.uploadLocalLogRN():V.isBrowser&&this.uploadLocalLogWeb(),this.emitAPI({type:"notifyUploadLog"}));break;case"audioToText":re.error||(re.obj.text=re.content.text);break;case"processImage":re.obj.imageOps=L.reverseImageOps(re.obj.imageOps),re.error||(re.obj={url:re.content.url});break;case"getNosTokenTrans":re.error||(re.obj={nosToken:re.content.nosToken,docId:re.content.docId});break;case"getNosOriginUrl":re.error||(re.obj=re.content.nosFileUrlTag.originUrl);break;case"notifyTransLog":re.error||this.emitAPI({type:"notifyTransLog",obj:re.content.transInfo});break;case"fetchFile":case"fetchFileList":case"removeFile":re.error||(re.obj=re.content);break;case"getServerTime":re.obj=re.content&&re.content.time;break;case"getNosCdnHost":this.getNosCdnHost(re)}},$.uploadLocalLogRN=function(){if(V.isRN&&z.rnfs){var re=z.rnfs,ie=this,ue=re.nimIndex,le=(re.nimIndex+1)%2;re.nimPromise=re.nimPromise.then(function(){return n.all([re.exists(oe(ue)),re.exists(oe(le))])}).then(function(ae){return ae&&(ae[0]||ae[1])?ae[0]&&ae[1]?re.copyFile(oe(le),oe(2)).then(function(){return re.readFile(oe(ue))}).then(function(Ue){return re.appendFile(oe(2),Ue)}):ae[0]?re.copyFile(oe(ue),oe(2)):void(ae[1]&&re.copyFile(oe(le),oe(2))):n.reject()}).then(function(){return new n(function(ae){ie.api.previewFile({filePath:oe(2),done:function(Ue,de){if(n.all([re.unlink(oe(2)),re.unlink(oe(1)),re.unlink(oe(0))]).finally(function(){ae()}),Ue)ie.logger.error("nim::uploadLocalLogRN:previewFile:error",Ue);else{var _e=de.url;g(_e).call(_e,"?")>0?_e+="&":_e+="?",_e+="download="+new Date().getTime()+"_rn.log",ie.api.uploadSdkLogUrl({url:_e})}}})})}).catch(function(ae){re.unlink(oe(2)).catch(function(){}),ie.logger.error("nim::protocol::uploadLocalLogRN",ae)})}function oe(ae){return re.DocumentDirectoryPath+"/nimlog_"+ae+".log"}},$.uploadLocalLogWeb=function(){var re=this;this.options.dbLog!==!1&&this.logger._local?this.logger._local.fetchLog().then(function(ie){!ie||!ie.logs||y(ie.logs)&&ie.logs.length===0?re.logger.warn("uploadLocalLogWeb::no logs"):re.api.previewFile({blob:new Blob([ie.logs],{type:"text/plain"}),done:function(ue,le){if(ue)re.logger.error("uploadLocalLogWeb::previewFile:error",ue);else{re.logger.log("uploadLocalLogWeb::previewFile:success",le);var oe=le.url;oe+=(g(oe).call(oe,"?")>0?"&":"?")+"download="+new Date().getTime()+"_web.log",re.api.uploadSdkLogUrl({url:oe}),re.logger._local.deleteLogs(ie.time).then(function(){re.logger.log("uploadLocalLogWeb::deleteLogs success")}).catch(function(ae){return re.logger.error("uploadLocalLogWeb::deleteLogs:error ,",ae)})}}})}).catch(function(ie){re.logger.error("uploadLocalLogWeb::fetchLog:error",ie)}):this.logger.warn("uploadLocalLogWeb::no dbLog")},$.getNosCdnHost=function(re){var ie=this,ue=re.error;if(ue&&(ue.callFunc="events::getNosCdnHost",ie.onCustomError("getNosCdnHost","EVENT_GET_NOS_CDN_HOST_ERROR",ue)),re.content&&re.content.nosConfigTag){var le=re.content.nosConfigTag,oe="",ae="";le.expire!==0&&le.cdnDomain?le.expire===-1?(oe=le.cdnDomain,ae=le.objectNamePrefix):(oe=le.cdnDomain,ae=le.objectNamePrefix,ie.nosCdnHostTimer&&clearTimeout(ie.nosCdnHostTimer),ie.nosCdnHostTimer=i(function(){ie.sendCmd("getNosCdnHost",{})},800*k(le.expire))):(oe="",ae=""),V.serverNosConfig.cdnDomain=oe,V.serverNosConfig.objectPrefix=ae,V.hasLocalStorage&&(localStorage.setItem("nim_cdn_domain",oe),localStorage.setItem("nim_object_prefix",ae))}}},function(t,r,e){var n=e(9),g=e(32),y=e(78).fn,i=e(0),k=e(287),$=e(107).EMSyncType;y.processAvSignal=function(V){switch(V.cmd){case"signalingCreate":case"signalingDelay":case"signalingClose":case"signalingJoin":case"signalingLeave":case"signalingInvite":case"signalingCancel":case"signalingReject":case"signalingAccept":case"signalingControl":case"signalingSyncMsgRead":case"signalingGetChannelInfo":case"signalingCallEx":break;case"signalingNotify":this.onSignalingNotify(V);break;case"signalingMutilClientSyncNotify":this.onSignalingMutilClientSyncNotify(V);break;case"signalingUnreadMessageSyncNotify":this.onSignalingUnreadMessageSyncNotify(V);break;case"signalingChannelsSyncNotify":this.onSignalingMembersSyncNotify(V);break;default:this.logger.warn("avSignal::unhandled cmd:",V.cmd)}};var L=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(V.needPush&&(V.needPush=V.needPush==="1"),V.needBadge&&(V.needBadge=V.needBadge==="1"),V.channelInValid&&(V.channelInValid=V.channelInValid==="1"),V.attach){var z=JSON.parse(V.attach);V.eventType=k.parseAvSignalType(z.type)}if(V.members){var re=JSON.parse(V.members);V.members=n(re).call(re,function(ie){return k.parseAvSignalMember(ie)})}return V};y.onSignalingNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{V.raw&&V.raw.r&&V.raw.r.length&&V.content&&V.content.avSignalTag&&(V.content.avSignalTag.msgid=V.raw.r[0]);var re=V.content.avSignalTag;re=g(re)?n(re).call(re,function(ie){return L(ie)}):L(re),this.emitAPI({type:"signalingNotify",obj:re}),i.isFunction(this.options.onSignalingNotify)&&this.options.onSignalingNotify(re)}},y.onSignalingMutilClientSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;re=g(re)?n(re).call(re,function(ie){return L(ie)}):L(re),this.emitAPI({type:"signalingMutilClientSyncNotify",obj:re}),i.isFunction(this.options.onSignalingMutilClientSyncNotify)&&this.options.onSignalingMutilClientSyncNotify(re)}},y.onSignalingUnreadMessageSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;g(re)&&(re=n(re).call(re,function(ie){return L(ie)})),this.emitAPI({type:"signalingUnreadMessageSyncNotify",obj:re}),this.reporterHook.emit("reporter/syncItemComplete",$.kSyncType15_13),i.isFunction(this.options.onSignalingUnreadMessageSyncNotify)&&this.options.onSignalingUnreadMessageSyncNotify(re)}},y.onSignalingMembersSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;g(re)||(re=[re]),re=n(re).call(re,function(ie){return L(ie)}),this.emitAPI({type:"signalingChannelsSyncNotify",obj:re}),i.isFunction(this.options.onSignalingMembersSyncNotify)&&this.options.onSignalingMembersSyncNotify(re)}}},function(t,r,e){var n=e(8),g=e(26),y=e(0),i=e(78).fn,k=e(118),$=e(278);i.adaptersRequest=function(L){var V=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=arguments.length>2?arguments[2]:void 0,ie=z.onerror||function(){},ue=new Date().getTime(),le=y.get(re,"exception_service")||0;return z.onerror=function(){ie.apply(void 0,arguments);var oe=arguments.length<=0?void 0:arguments[0];V.reporter.reportTraceStart("exceptions",{user_id:V.account,trace_id:y.get(self,"socket.socket.sessionid"),start_time:ue,action:1,exception_service:le}),V.reporter.reportTraceUpdateV2("exceptions",{code:typeof oe.status=="number"?oe.status:typeof oe.code=="number"?oe.code:0,description:oe.message||"".concat(oe.code),operation_type:0,target:L,context:z?n(z):"",net_connect:V.checkNetworkAvailable()}),V.reporter.reportTraceEnd("exceptions",1)},k(L,z)},i.adaptersUploadFile=function(L,V){var z,re=this;L.adaptersRequest=g(z=i.adaptersRequest).call(z,this);var ie=new Date().getTime();return L.errorHook=function(ue){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ue){re.reporter.reportTraceStart("exceptions",{user_id:re.account,trace_id:y.get(self,"socket.socket.sessionid"),start_time:ie,action:1,exception_service:le.provider==="s3"?4:3});var oe=le.url||L.url;ue.bucket&&(oe=n(ue)),re.reporter.reportTraceUpdateV2("exceptions",{code:typeof ue.status=="number"?ue.status:typeof ue.code=="number"?ue.code:0,description:ue.message||"".concat(ue.code),operation_type:1,target:oe,net_connect:re.checkNetworkAvailable()}),re.reporter.reportTraceEnd("exceptions",1)}},new $(L,this,V)}},function(t,r,e){e(292);var n,g,y,i=e(43),k=e(60),$=e(37),L=e(2),V=e(3),z=e(4),re=e(24),ie=e(16),ue=e(15),le=e(6),oe=e(22);y=function(){function ae(_e,Ve){for(var $e=0;$e<Ve.length;$e++){var Lt=Ve[$e];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),i(_e,Lt.key,Lt)}}var Ue={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},de=function(){};return function(){function _e(Lt){(function(jt,Et){if(!(jt instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,_e),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Ue,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=k(),this.timer=null,this.setConfig(Lt),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}var Ve,$e;return Ve=_e,($e=[{key:"setConfig",value:function(Lt){var jt=$({},this.reportConfig.common,Lt.common);this.reportConfig=$({},this.reportConfig,Lt),this.reportConfig.common=jt,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(Lt,jt){var Et=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(Lt,$({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},jt)).catch(function(ir){var ur,Dt;(Dt=(ur=Et.reportConfig)===null||ur===void 0?void 0:ur.logger)===null||Dt===void 0||Dt.warn("Reporter immediately upload failed",ir)})}},{key:"report",value:function(Lt,jt){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Et.priority||(Et.priority=this.getEventPriority(Lt,jt)),this.reportConfig.isDataReportEnable&&Lt){var ir=k();Et.priority==="HIGH"?this.highPriorityMsgList.push({module:Lt,msg:jt,createTime:ir}):Et.priority==="NORMAL"?this.msgList.push({module:Lt,msg:jt,createTime:ir}):Et.priority==="LOW"&&this.lowPriorityMsgList.push({module:Lt,msg:jt,createTime:ir}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(Lt,jt){if(this.reportConfig.isDataReportEnable&&Lt&&!this.traceMsgCache[Lt]){var Et=$($({start_time:k()},jt),{extension:[]});this.traceMsgCache[Lt]=Et}}},{key:"reportTraceUpdate",value:function(Lt){}},{key:"reportTraceUpdateV2",value:function(Lt,jt,Et){var ir,ur=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Lt]){var Dt=this.traceMsgCache[Lt].extension,lr=Dt.length,sr=new Date().getTime();lr===0?jt.duration=sr-this.traceMsgCache[Lt].start_time:Dt[lr-1].end_time?jt.duration=sr-Dt[lr-1].end_time:jt.duration=sr-this.traceMsgCache[Lt].start_time,Dt.push($({end_time:sr},jt));var er=Dt.length-1;Et!=null&&Et.asyncParams&&((ir=this.traceMsgCache[Lt]).asyncPromiseArray||(ir.asyncPromiseArray=[]),this.traceMsgCache[Lt].asyncPromiseArray.push(Et.asyncParams.then(function(cr){ur.traceMsgCache[Lt]&&ur.traceMsgCache[Lt].extension[er]&&$(ur.traceMsgCache[Lt].extension[er],cr)})))}}},{key:"reportTraceEnd",value:function(Lt){var jt,Et=this,ir=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Lt])if(Lt!=="nos"||ir===!1)if(typeof ir=="boolean"?this.traceMsgCache[Lt].succeed=!!ir:this.traceMsgCache[Lt].state=ir,this.traceMsgCache[Lt].duration=k()-this.traceMsgCache[Lt].start_time,L(jt=this.traceMsgCache[Lt].extension).call(jt,function(lr){delete lr.end_time}),this.traceMsgCache[Lt].asyncPromiseArray){var ur=this.traceMsgCache[Lt],Dt=function(){ur===Et.traceMsgCache[Lt]&&(delete Et.traceMsgCache[Lt].asyncPromiseArray,Et.report(Lt,Et.traceMsgCache[Lt],{priority:Et.getEventPriority(Lt,Et.traceMsgCache[Lt])}),Et.traceMsgCache[Lt]=null)};V.all(this.traceMsgCache[Lt].asyncPromiseArray).then(Dt).catch(Dt)}else this.report(Lt,this.traceMsgCache[Lt],{priority:this.getEventPriority(Lt,this.traceMsgCache[Lt])}),this.traceMsgCache[Lt]=null;else this.traceMsgCache[Lt]=null}},{key:"getEventPriority",value:function(Lt,jt){if(Lt==="exceptions"){if(jt.action===0||jt.action===2||jt.action===1&&jt.exception_service!==0)return"HIGH"}else if(Lt==="msgReceive"||Lt==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(Lt){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[Lt]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var Lt,jt=this;this.reportConfig.isDataReportEnable&&(L(Lt=z(this.traceMsgCache)).call(Lt,function(Et){jt.reportTraceEnd(Et,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=de,this.report=de,this.reportTraceStart=de,this.reportTraceUpdate=de,this.reportTraceEnd=de,this.pause=de,this.restore=de,this.destroy=de,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var Lt,jt,Et=this;if(!this.loading){this.loading=!0;var ir=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:ir.dev_id,sdkVer:ir.sdk_ver,platform:ir.platform,appkey:ir.app_key},timeout:this.reportConfig.timeout}).then(function(ur){var Dt,lr;if(!Et.isDestroyed){if(ur.status===200&&ur.data&&ur.data.code===200){var sr=ur.data.data||{};Et.reportConfig.maxSize=sr.maxSize>1e3?1e3:sr.maxSize,Et.reportConfig.maxInterval=sr.maxInterval>1e4?1e4:sr.maxInterval,Et.reportConfig.maxInterval=sr.maxInterval<10?10:sr.maxInterval,Et.reportConfig.minInterval=sr.minInterval<2?2:sr.minInterval,Et.reportConfig.maxDelay=sr.maxDelay||300,Et.reportConfig.maxInterval=1e3*Et.reportConfig.maxInterval,Et.reportConfig.minInterval=1e3*Et.reportConfig.minInterval,Et.reportConfig.maxDelay=1e3*Et.reportConfig.maxDelay,Et.isUploadEnable=!0,Et.initConfigLoaded=!0,Et.loading=!1,Et.reportHeartBeat()}(lr=(Dt=Et.reportConfig)===null||Dt===void 0?void 0:Dt.logger)===null||lr===void 0||lr.log("Get reporter upload config success")}}).catch(function(ur){var Dt,lr;Et.loading=!1,(lr=(Dt=Et.reportConfig)===null||Dt===void 0?void 0:Dt.logger)===null||lr===void 0||lr.error("Get reporter upload config failed",ur)})}catch(ur){this.loading=!1,(jt=(Lt=this.reportConfig)===null||Lt===void 0?void 0:Lt.logger)===null||jt===void 0||jt.error("Exec reporter request failed",ur)}}}},{key:"reportHeartBeat",value:function(){var Lt=this;this.isDestroyed||(this.timer=re(function(){Lt.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var Lt=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;k()-this.lastReportTime>=Lt&&this.upload()}}},{key:"getUploadMsg",value:function(){var Lt,jt,Et,ir,ur,Dt,lr=this,sr={},er=k();this.highPriorityMsgList=ie(Lt=this.highPriorityMsgList).call(Lt,function(Er){return er-Er.createTime<lr.reportConfig.maxDelay}),this.msgList=ie(jt=this.msgList).call(jt,function(Er){return er-Er.createTime<lr.reportConfig.maxDelay}),this.lowPriorityMsgList=ie(Et=this.lowPriorityMsgList).call(Et,function(Er){return er-Er.createTime<lr.reportConfig.maxDelay}),this.cacheMsgList=ie(ir=this.cacheMsgList).call(ir,function(Er){return er-Er.createTime<lr.reportConfig.maxDelay});var cr=ue(ur=this.highPriorityMsgList).call(ur,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=ue(Dt=this.highPriorityMsgList).call(Dt,cr.length),cr.length<this.reportConfig.maxSize){var or,hr,pr=this.reportConfig.maxSize-cr.length;cr=le(cr).call(cr,ue(or=this.msgList).call(or,0,pr)),this.msgList=ue(hr=this.msgList).call(hr,pr)}if(cr.length<this.reportConfig.maxSize){var Tr,Pr,_r=this.reportConfig.maxSize-cr.length;cr=le(cr).call(cr,ue(Tr=this.lowPriorityMsgList).call(Tr,0,_r)),this.lowPriorityMsgList=ue(Pr=this.lowPriorityMsgList).call(Pr,_r)}if(cr.length<this.reportConfig.maxSize){var Mr,rr,kr=this.reportConfig.maxSize-cr.length;cr=le(cr).call(cr,ue(Mr=this.cacheMsgList).call(Mr,0,kr)),this.cacheMsgList=ue(rr=this.cacheMsgList).call(rr,kr)}return L(cr).call(cr,function(Er){sr[Er.module]?sr[Er.module].push(Er.msg):sr[Er.module]=[Er.msg]}),{uploadMsgArr:cr,uploadMsg:sr}}},{key:"upload",value:function(){var Lt,jt,Et=this;if(this.isUploadEnable&&!(this.lastReportTime&&k()-this.lastReportTime<this.reportConfig.minInterval)){var ir=this.getUploadMsg(),ur=ir.uploadMsgArr,Dt=ir.uploadMsg;if(ur.length){this.lastReportTime=k();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:Dt},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(lr){var sr,er,cr,or;Et.cacheMsgList=ue(sr=le(er=Et.cacheMsgList).call(er,ur)).call(sr,0,Et.reportConfig.cacheMaxSize),(or=(cr=Et.reportConfig)===null||cr===void 0?void 0:cr.logger)===null||or===void 0||or.warn("Reporter upload failed",lr)})}catch(lr){(jt=(Lt=this.reportConfig)===null||Lt===void 0?void 0:Lt.logger)===null||jt===void 0||jt.warn("Exec reporter request failed",lr)}clearTimeout(this.timer),this.reportHeartBeat()}}}}])&&ae(Ve.prototype,$e),i(Ve,"prototype",{writable:!1}),_e}()},oe(r)==="object"&&t!==void 0?t.exports=y():(g=typeof(n=y)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=g)},function(t,r,e){t.exports=e(692)},function(t,r,e){e(693);var n=e(694);t.exports=n},function(t,r,e){e(293)},function(t,r,e){var n=e(695);t.exports=n},function(t,r,e){var n=e(696);t.exports=n},function(t,r,e){e(293),t.exports=e(14)},function(t,r,e){var n,g,y,i=e(93),k=e(92),$=e(281),L=e(282),V=e(192),z=e(698),re=(e(292),e(2)),ie=e(4),ue=e(6),le=e(3),oe=e(24),ae=e(8),Ue=e(279),de=e(22);function _e(Ve){var $e=function(){if(typeof Reflect>"u"||!Ue||Ue.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ue(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,jt=V(Ve);if($e){var Et=V(this).constructor;Lt=Ue(jt,arguments,Et)}else Lt=jt.apply(this,arguments);return L(this,Lt)}}y=function(){function Ve(Lt){if(Lt){var jt,Et="";return re(jt=ie(Lt)).call(jt,function(ir,ur){var Dt;Et+=ur===0?"?":"&",Et+=ue(Dt="".concat(ir,"=")).call(Dt,Lt[ir])}),Et}return""}var $e=function(Lt){$(Et,Lt);var jt=_e(Et);function Et(ir,ur,Dt,lr){var sr;return k(this,Et),(sr=jt.call(this,Dt)).source=ir,sr.code=ur,sr.desc=Dt,sr.detail=lr||{},sr}return i(Et)}(z(Error));return function(Lt){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{dataType:"json",method:"GET",timeout:5e3},Et=jt.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",ir=jt.method==="GET"?Ve(jt.params):"";return new le(function(ur,Dt){if(window.XMLHttpRequest){var lr,sr,er=new XMLHttpRequest;if(er.onreadystatechange=function(){if(er.readyState===4)if(er.status===200){try{sr=JSON.parse(er.response||"{}")}catch{sr=er.response}ur({status:er.status,data:sr})}else oe(function(){var or;Dt(new $e(1,er.status,ue(or="readyState: ".concat(er.readyState,"; statusText: ")).call(or,er.statusText)))},0)},er.open(jt.method,ue(lr="".concat(Lt)).call(lr,ir)),er.timeout=jt.timeout||5e3,er.setRequestHeader("Content-Type",Et),jt.headers)for(var cr in jt.headers)er.setRequestHeader(cr,jt.headers[cr]);er.ontimeout=function(or){Dt(new $e(1,408,or&&or.message?or.message:"request timeout"))},er.send(ae(jt.data))}else Dt(new $e(2,10400,"request no suppout"))})}},de(r)==="object"&&t!==void 0?t.exports=y():(g=typeof(n=y)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=g)},function(t,r,e){var n=e(699),g=e(189),y=e(192),i=e(190),k=e(738),$=e(739);function L(V){var z=typeof n=="function"?new n:void 0;return t.exports=L=function(re){if(re===null||!k(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(z!==void 0){if(z.has(re))return z.get(re);z.set(re,ie)}function ie(){return $(re,arguments,y(this).constructor)}return ie.prototype=g(re.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),i(ie,re)},t.exports.__esModule=!0,t.exports.default=t.exports,L(V)}t.exports=L,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(700)},function(t,r,e){t.exports=e(701)},function(t,r,e){var n=e(702);e(713),e(715),e(717),e(719),e(720),e(722),e(723),e(724),e(725),e(726),e(728),e(729),e(730),e(731),e(732),e(733),e(734),e(735),e(736),e(737),t.exports=n},function(t,r,e){var n=e(703);t.exports=n},function(t,r,e){var n=e(704);e(69),t.exports=n},function(t,r,e){e(86),e(705),e(100),e(115);var n=e(13);t.exports=n.Map},function(t,r,e){e(706)},function(t,r,e){e(707)("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},e(711))},function(t,r,e){var n=e(1),g=e(14),y=e(294),i=e(5),k=e(61),$=e(47),L=e(171),V=e(17),z=e(28),re=e(85),ie=e(39).f,ue=e(74).forEach,le=e(27),oe=e(101),ae=oe.set,Ue=oe.getterFor;t.exports=function(de,_e,Ve){var $e,Lt=de.indexOf("Map")!==-1,jt=de.indexOf("Weak")!==-1,Et=Lt?"set":"add",ir=g[de],ur=ir&&ir.prototype,Dt={};if(le&&V(ir)&&(jt||ur.forEach&&!i(function(){new ir().entries().next()}))){var lr=($e=_e(function(er,cr){ae(L(er,lr),{type:de,collection:new ir}),cr!=null&&$(cr,er[Et],{that:er,AS_ENTRIES:Lt})})).prototype,sr=Ue(de);ue(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(er){var cr=er=="add"||er=="set";!(er in ur)||jt&&er=="clear"||k(lr,er,function(or,hr){var pr=sr(this).collection;if(!cr&&jt&&!z(or))return er=="get"&&void 0;var Tr=pr[er](or===0?0:or,hr);return cr?this:Tr})}),jt||ie(lr,"size",{configurable:!0,get:function(){return sr(this).collection.size}})}else $e=Ve.getConstructor(_e,de,Lt,Et),y.enable();return re($e,de,!1,!0),Dt[de]=$e,n({global:!0,forced:!0},Dt),jt||Ve.setStrong($e,de,Lt),$e}},function(t,r,e){var n=e(5),g=e(28),y=e(65),i=e(709),k=Object.isExtensible,$=n(function(){});t.exports=$||i?function(L){return!!g(L)&&(!i||y(L)!="ArrayBuffer")&&(!k||k(L))}:k},function(t,r,e){var n=e(5);t.exports=n(function(){if(typeof ArrayBuffer=="function"){var g=new ArrayBuffer(8);Object.isExtensible(g)&&Object.defineProperty(g,"a",{value:8})}})},function(t,r,e){var n=e(5);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,r,e){var n=e(39).f,g=e(84),y=e(712),i=e(34),k=e(171),$=e(96),L=e(47),V=e(169),z=e(170),re=e(238),ie=e(27),ue=e(294).fastKey,le=e(101),oe=le.set,ae=le.getterFor;t.exports={getConstructor:function(Ue,de,_e,Ve){var $e=Ue(function(ur,Dt){k(ur,Lt),oe(ur,{type:de,index:g(null),first:void 0,last:void 0,size:0}),ie||(ur.size=0),$(Dt)||L(Dt,ur[Ve],{that:ur,AS_ENTRIES:_e})}),Lt=$e.prototype,jt=ae(de),Et=function(ur,Dt,lr){var sr,er,cr=jt(ur),or=ir(ur,Dt);return or?or.value=lr:(cr.last=or={index:er=ue(Dt,!0),key:Dt,value:lr,previous:sr=cr.last,next:void 0,removed:!1},cr.first||(cr.first=or),sr&&(sr.next=or),ie?cr.size++:ur.size++,er!=="F"&&(cr.index[er]=or)),ur},ir=function(ur,Dt){var lr,sr=jt(ur),er=ue(Dt);if(er!=="F")return sr.index[er];for(lr=sr.first;lr;lr=lr.next)if(lr.key==Dt)return lr};return y(Lt,{clear:function(){for(var ur=jt(this),Dt=ur.index,lr=ur.first;lr;)lr.removed=!0,lr.previous&&(lr.previous=lr.previous.next=void 0),delete Dt[lr.index],lr=lr.next;ur.first=ur.last=void 0,ie?ur.size=0:this.size=0},delete:function(ur){var Dt=jt(this),lr=ir(this,ur);if(lr){var sr=lr.next,er=lr.previous;delete Dt.index[lr.index],lr.removed=!0,er&&(er.next=sr),sr&&(sr.previous=er),Dt.first==lr&&(Dt.first=sr),Dt.last==lr&&(Dt.last=er),ie?Dt.size--:this.size--}return!!lr},forEach:function(ur){for(var Dt,lr=jt(this),sr=i(ur,arguments.length>1?arguments[1]:void 0);Dt=Dt?Dt.next:lr.first;)for(sr(Dt.value,Dt.key,this);Dt&&Dt.removed;)Dt=Dt.previous},has:function(ur){return!!ir(this,ur)}}),y(Lt,_e?{get:function(ur){var Dt=ir(this,ur);return Dt&&Dt.value},set:function(ur,Dt){return Et(this,ur===0?0:ur,Dt)}}:{add:function(ur){return Et(this,ur=ur===0?0:ur,ur)}}),ie&&n(Lt,"size",{get:function(){return jt(this).size}}),$e},setStrong:function(Ue,de,_e){var Ve=de+" Iterator",$e=ae(de),Lt=ae(Ve);V(Ue,de,function(jt,Et){oe(this,{type:Ve,target:jt,state:$e(jt),kind:Et,last:void 0})},function(){for(var jt=Lt(this),Et=jt.kind,ir=jt.last;ir&&ir.removed;)ir=ir.previous;return jt.target&&(jt.last=ir=ir?ir.next:jt.state.first)?z(Et=="keys"?ir.key:Et=="values"?ir.value:[ir.key,ir.value],!1):(jt.target=void 0,z(void 0,!0))},_e?"entries":"values",!_e,!0),re(de)}}},function(t,r,e){var n=e(68);t.exports=function(g,y,i){for(var k in y)i&&i.unsafe&&g[k]?g[k]=y[k]:n(g,k,y[k],i);return g}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{from:e(714)})},function(t,r,e){var n=e(34),g=e(20),y=e(31),i=e(172),k=e(96),$=e(47),L=[].push;t.exports=function(V){var z,re,ie,ue,le=arguments.length,oe=le>1?arguments[1]:void 0;return i(this),(z=oe!==void 0)&&y(oe),k(V)?new this:(re=[],z?(ie=0,ue=n(oe,le>2?arguments[2]:void 0),$(V,function(ae){g(L,re,ue(ae,ie++))})):$(V,L,{that:re}),new this(re))}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{of:e(716)})},function(t,r,e){var n=e(102);t.exports=function(){return new this(n(arguments))}},function(t,r,e){var n=e(1),g=e(38),y=e(63).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var i,k=g(this),$=!0,L=0,V=arguments.length;L<V;L++)i=y(k,arguments[L]),$=$&&i;return!!$}})},function(t,r){t.exports=function(e,n){return n==1?function(g,y){return g[e](y)}:function(g,y,i){return g[e](y,i)}}},function(t,r,e){var n=e(1),g=e(38),y=e(63),i=y.get,k=y.has,$=y.set;n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(L,V){var z,re,ie=g(this);return k(ie,L)?(z=i(ie,L),"update"in V&&(z=V.update(z,L,ie),$(ie,L,z)),z):(re=V.insert(L,ie),$(ie,L,re),re)}})},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(59);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(k){var $=y(this),L=g(k,arguments.length>1?arguments[1]:void 0);return i($,function(V,z){if(!L(V,z,$))return!1},!0)!==!1}})},function(t,r,e){var n=e(20);t.exports=function(g,y,i){for(var k,$,L=i||g.next;!(k=n(L,g)).done;)if(($=y(k.value))!==void 0)return $}},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(63),k=e(59),$=i.Map,L=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),ie=new $;return k(z,function(ue,le){re(ue,le,z)&&L(ie,le,ue)}),ie}})},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(59);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(k){var $=y(this),L=g(k,arguments.length>1?arguments[1]:void 0),V=i($,function(z,re){if(L(z,re,$))return{value:z}},!0);return V&&V.value}})},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(59);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(k){var $=y(this),L=g(k,arguments.length>1?arguments[1]:void 0),V=i($,function(z,re){if(L(z,re,$))return{key:re}},!0);return V&&V.key}})},function(t,r,e){var n=e(1),g=e(20),y=e(12),i=e(17),k=e(31),$=e(47),L=e(63).Map,V=y([].push);n({target:"Map",stat:!0,forced:!0},{groupBy:function(z,re){var ie=new(i(this)?this:L);k(re);var ue=k(ie.has),le=k(ie.get),oe=k(ie.set);return $(z,function(ae){var Ue=re(ae);g(ue,ie,Ue)?V(g(le,ie,Ue),ae):g(oe,ie,Ue,[ae])}),ie}})},function(t,r,e){var n=e(1),g=e(727),y=e(38),i=e(59);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(k){return i(y(this),function($){if(g($,k))return!0},!0)===!0}})},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(1),g=e(20),y=e(47),i=e(17),k=e(31),$=e(63).Map;n({target:"Map",stat:!0,forced:!0},{keyBy:function(L,V){var z=new(i(this)?this:$);k(V);var re=k(z.set);return y(L,function(ie){g(re,z,V(ie),ie)}),z}})},function(t,r,e){var n=e(1),g=e(38),y=e(59);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(i){var k=y(g(this),function($,L){if($===i)return{key:L}},!0);return k&&k.key}})},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(63),k=e(59),$=i.Map,L=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),ie=new $;return k(z,function(ue,le){L(ie,re(ue,le,z),ue)}),ie}})},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(63),k=e(59),$=i.Map,L=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),ie=new $;return k(z,function(ue,le){L(ie,le,re(ue,le,z))}),ie}})},function(t,r,e){var n=e(1),g=e(38),y=e(47),i=e(63).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(k){for(var $=g(this),L=arguments.length,V=0;V<L;)y(arguments[V++],function(z,re){i($,z,re)},{AS_ENTRIES:!0});return $}})},function(t,r,e){var n=e(1),g=e(31),y=e(38),i=e(59),k=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function($){var L=y(this),V=arguments.length<2,z=V?void 0:arguments[1];if(g($),i(L,function(re,ie){V?(V=!1,z=re):z=$(z,re,ie,L)}),V)throw k("Reduce of empty map with no initial value");return z}})},function(t,r,e){var n=e(1),g=e(34),y=e(38),i=e(59);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(k){var $=y(this),L=g(k,arguments.length>1?arguments[1]:void 0);return i($,function(V,z){if(L(V,z,$))return!0},!0)===!0}})},function(t,r,e){var n=e(1),g=e(31),y=e(38),i=e(63),k=TypeError,$=i.get,L=i.has,V=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(z,re){var ie=y(this),ue=arguments.length;g(re);var le=L(ie,z);if(!le&&ue<3)throw k("Updating absent value");var oe=le?$(ie,z):g(ue>2?arguments[2]:void 0)(z,ie);return V(ie,z,re(oe,z,ie)),ie}})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,forced:!0},{upsert:e(295)})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:e(295)})},function(t,r,e){var n=e(188);t.exports=function(g){var y;return n(y=Function.toString.call(g)).call(y,"[native code]")!==-1},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(151),g=e(296),y=e(190),i=e(743);function k($,L,V){var z;return i()?(t.exports=k=n(z=g).call(z),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=k=function(re,ie,ue){var le=[null];le.push.apply(le,ie);var oe=new(n(Function).apply(re,le));return ue&&y(oe,ue.prototype),oe},t.exports.__esModule=!0,t.exports.default=t.exports),k.apply(null,arguments)}t.exports=k,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(741)},function(t,r,e){var n=e(742);t.exports=n},function(t,r,e){var n=e(280);t.exports=n},function(t,r,e){var n=e(296);t.exports=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(16),g=e(0),y=e(193),i=g.merge({},y.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,updatePushToken:1,appBackground:2,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncOfflineNetcallMsgs:8,syncRoamingMsgs:9,syncMsgReceipts:12,syncRobots:15,syncBroadcastMsgs:16,syncSuperTeamRoamingMsgs:17,syncOfflineSuperTeamSysMsgs:18,syncDeleteSuperTeamMsgOfflineRoaming:19,syncDeleteMsgSelf:21,syncSessionsWithMoreRoaming:22,syncStickTopSessions:23,syncSessionHistoryMsgsDelete:24,syncSessionReliableInfo:25},sync:{id:5,sync:1,syncTeamMembers:2,syncSuperTeamMembers:3},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16,markSessionAckBatch:25,broadcastMsg:17,clearServerHistoryMsgs:18,getServerSessions:19,getServerSession:20,updateServerSession:21,deleteServerSessions:22,deleteMsgSelf:23,deleteMsgSelfBatch:24,msgFtsInServer:26,msgFtsInServerByTiming:27,onClearServerHistoryMsgs:118,syncUpdateServerSession:121,onDeleteMsgSelf:123,onDeleteMsgSelfBatch:124},msgExtend:{id:23,getThreadMsgs:1,getMsgsByIdServer:2,addQuickComment:3,deleteQuickComment:4,onQuickComment:5,onDeleteQuickComment:6,getQuickComments:7,addCollect:8,deleteCollects:9,updateCollect:10,getCollects:11,addStickTopSession:12,deleteStickTopSession:13,updateStickTopSession:14,addMsgPin:15,updateMsgPin:16,deleteMsgPin:17,onAddMsgPin:18,onUpdateMsgPin:19,onDeleteMsgPin:20,getMsgPins:21,syncAddQuickComment:103,syncDeleteQuickComment:104,syncAddStickTopSession:112,syncDeleteStickTopSession:113,syncUpdateStickTopSession:114,syncAddMsgPin:115,syncUpdateMsgPin:116,syncDeleteMsgPin:117},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,sendTeamMsgReceipt:28,getTeamMsgReads:29,getTeamMsgReadAccounts:30,notifyTeamMsgReads:31,muteTeamAll:32,getTeamMemberInvitorAccid:33,getTeamsById:34,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},superTeam:{id:21,sendSuperTeamMsg:2,superTeamMsg:3,addSuperTeamMembers:5,removeSuperTeamMembers:6,leaveSuperTeam:7,updateSuperTeam:8,getSuperTeam:9,getSuperTeams:12,updateInfoInSuperTeam:10,getMySuperTeamMembers:11,getSuperTeamMembers:13,getSuperTeamHistoryMsgs:14,getSuperTeamMembersByJoinTime:15,sendSuperTeamCustomSysMsg:16,deleteSuperTeamMsg:17,superTeamMsgDelete:18,superTeamCustomSysMsg:19,applySuperTeam:20,passSuperTeamApply:21,rejectSuperTeamApply:22,acceptSuperTeamInvite:23,rejectSuperTeamInvite:24,markSuperTeamSessionAck:25,addSuperTeamManagers:26,removeSuperTeamManagers:27,updateSuperTeamMute:28,updateSuperTeamMembersMute:29,updateNickInSuperTeam:30,transferSuperTeam:31,markSuperTeamSessionsAck:32,getSuperTeamMembersByAccounts:33,getMutedSuperTeamMembers:34,syncMySuperTeamMembers:111,syncSuperTeams:109,syncSuperTeamMembers:113,syncCreateSuperTeam:101,syncSendSuperTeamMsg:102,syncUpdateSuperTeamMember:110,syncDeleteSuperTeamMsg:117},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7},eventService:{id:14,publishEvent:1,pushEvent:2,subscribeEvent:3,unSubscribeEventsByAccounts:4,unSubscribeEventsByType:5,querySubscribeEventsByAccounts:6,querySubscribeEventsByType:7,pushEvents:9},proxyService:{id:22,httpProxy:1,onProxyMsg:2},qchat:{id:24,getQChatAddress:1}}),k=g.merge({},y.cmdConfig,{login:{sid:i.auth.id,cid:i.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:i.auth.id,cid:i.auth.logout},kick:{sid:i.auth.id,cid:i.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},updatePushToken:{sid:i.user.id,cid:i.user.updatePushToken,params:[{type:"String",name:"tokenName"},{type:"String",name:"token"},{type:"int",name:"pushkit"}]},appBackground:{sid:i.user.id,cid:i.user.appBackground,params:[{type:"bool",name:"isBackground"},{type:"Int",name:"badge"}]},markInBlacklist:{sid:i.user.id,cid:i.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getBlacklist:{sid:i.user.id,cid:i.user.getBlacklist,params:[{type:"long",name:"time"}]},markInMutelist:{sid:i.user.id,cid:i.user.markInMutelist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getMutelist:{sid:i.user.id,cid:i.user.getMutelist,params:[{type:"long",name:"time"}]},getRelations:{sid:i.user.id,cid:i.user.getRelations,params:[{type:"long",name:"timetag"}]},getUsers:{sid:i.user.id,cid:i.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:i.user.id,cid:i.user.updateMyInfo,params:[{type:"Property",name:"user"},{type:"Property",name:"antispamTag"}]},updateDonnop:{sid:i.user.id,cid:i.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:i.notify.id,cid:i.notify.markRead,params:[{type:"long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:i.notify.id,cid:i.notify.batchMarkRead,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:i.sync.id,cid:i.sync.sync,isAwaitable:!1,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:i.sync.id,cid:i.sync.syncTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},syncSuperTeamMembers:{sid:i.sync.id,cid:i.sync.syncSuperTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:i.msg.id,cid:i.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:i.msg.id,cid:i.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},sendCustomSysMsg:{sid:i.msg.id,cid:i.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:i.msg.id,cid:i.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSessions:{sid:i.msg.id,cid:i.msg.getSessions,params:[{type:"long",name:"time"}]},deleteSessions:{sid:i.msg.id,cid:i.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:i.msg.id,cid:i.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:i.msg.id,cid:i.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:i.msg.id,cid:i.msg.markSessionAck,params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},markSessionAckBatch:{sid:i.msg.id,cid:i.msg.markSessionAckBatch,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},clearServerHistoryMsgs:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParams"}]},clearServerHistoryMsgsWithSync:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParamsWithSync"}]},msgFtsInServer:{sid:i.msg.id,cid:i.msg.msgFtsInServer,params:[{type:"Property",name:"msgFullSearchRequestTag"}]},msgFtsInServerByTiming:{sid:i.msg.id,cid:i.msg.msgFtsInServerByTiming,params:[{type:"Property",name:"msgTimingFullSearchRequestTag"}]},onClearServerHistoryMsgs:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs},getServerSessions:{sid:i.msg.id,cid:i.msg.getServerSessions,params:[{type:"Property",name:"sessionReqTag"}]},getServerSession:{sid:i.msg.id,cid:i.msg.getServerSession,params:[{type:"Property",name:"session"}]},updateServerSession:{sid:i.msg.id,cid:i.msg.updateServerSession,params:[{type:"Property",name:"session"}]},deleteServerSessions:{sid:i.msg.id,cid:i.msg.deleteServerSessions,params:[{type:"PropertyArray",name:"sessions",entity:"session"}]},deleteMsgSelf:{sid:i.msg.id,cid:i.msg.deleteMsgSelf,params:[{type:"Property",name:"deleteMsgSelfTag"}]},deleteMsgSelfBatch:{sid:i.msg.id,cid:i.msg.deleteMsgSelfBatch,params:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},onDeleteMsgSelf:{sid:i.msg.id,cid:i.msg.onDeleteMsgSelf},onDeleteMsgSelfBatch:{sid:i.msg.id,cid:i.msg.onDeleteMsgSelfBatch},sendSuperTeamMsg:{sid:i.superTeam.id,cid:i.superTeam.sendSuperTeamMsg,params:[{type:"Property",name:"msg"}]},addSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.addSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.removeSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},leaveSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.leaveSuperTeam,params:[{type:"long",name:"teamId"}]},updateSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},getSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeam,params:[{type:"long",name:"teamId"}]},getSuperTeams:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeams,params:[{type:"long",name:"timetag"}]},getSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},updateInfoInSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateInfoInSuperTeam,params:[{type:"Property",name:"superTeamMember"},{type:"Property",name:"teamSpecialFollowUpdateTag"}]},getSuperTeamHistoryMsgs:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},applySuperTeam:{sid:i.superTeam.id,cid:i.superTeam.applySuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passSuperTeamApply:{sid:i.superTeam.id,cid:i.superTeam.passSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:i.superTeam.id,cid:i.superTeam.rejectSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:i.superTeam.id,cid:i.superTeam.acceptSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:i.superTeam.id,cid:i.superTeam.rejectSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},markSuperTeamSessionAck:{sid:i.superTeam.id,cid:i.superTeam.markSuperTeamSessionAck,params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},addSuperTeamManagers:{sid:i.superTeam.id,cid:i.superTeam.addSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:i.superTeam.id,cid:i.superTeam.removeSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateSuperTeamMute:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeamMute,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},updateSuperTeamMembersMute:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeamMembersMute,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"int",name:"mute"}]},updateNickInSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateNickInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},transferSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.transferSuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},markSuperTeamSessionsAck:{sid:i.superTeam.id,cid:i.superTeam.markSuperTeamSessionsAck,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},getSuperTeamMembersByJoinTime:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembersByJoinTime,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSuperTeamMembersByAccounts:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembersByAccounts,params:[{type:"StrArray",name:"memberIds"}]},getMutedSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getMutedSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},sendSuperTeamCustomSysMsg:{sid:i.superTeam.id,cid:i.superTeam.sendSuperTeamCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},deleteSuperTeamMsg:{sid:i.superTeam.id,cid:i.superTeam.deleteSuperTeamMsg,params:[{type:"Property",name:"sysMsg"}]},getMySuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getMySuperTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},createTeam:{sid:i.team.id,cid:i.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"Property",name:"antispamTag"}]},sendTeamMsg:{sid:i.team.id,cid:i.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:i.team.id,cid:i.team.addTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}]},removeTeamMembers:{sid:i.team.id,cid:i.team.removeTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:i.team.id,cid:i.team.updateTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},leaveTeam:{sid:i.team.id,cid:i.team.leaveTeam,params:[{type:"long",name:"teamId"}]},getTeam:{sid:i.team.id,cid:i.team.getTeam,params:[{type:"long",name:"teamId"}]},getTeams:{sid:i.team.id,cid:i.team.getTeams,params:[{type:"long",name:"timetag"}]},getTeamsById:{sid:i.team.id,cid:i.team.getTeamsById,params:[{type:"longArray",name:"teamIds"}]},getTeamMembers:{sid:i.team.id,cid:i.team.getTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},dismissTeam:{sid:i.team.id,cid:i.team.dismissTeam,params:[{type:"long",name:"teamId"}]},applyTeam:{sid:i.team.id,cid:i.team.applyTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:i.team.id,cid:i.team.passTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:i.team.id,cid:i.team.rejectTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:i.team.id,cid:i.team.addTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:i.team.id,cid:i.team.removeTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:i.team.id,cid:i.team.transferTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateInfoInTeam:{sid:i.team.id,cid:i.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"},{type:"Property",name:"teamSpecialFollowUpdateTag"}]},updateNickInTeam:{sid:i.team.id,cid:i.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:i.team.id,cid:i.team.acceptTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:i.team.id,cid:i.team.rejectTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:i.team.id,cid:i.team.getTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},searchTeamHistoryMsgs:{sid:i.team.id,cid:i.team.searchTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},updateMuteStateInTeam:{sid:i.team.id,cid:i.team.updateMuteStateInTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"int",name:"mute"}]},getMyTeamMembers:{sid:i.team.id,cid:i.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:i.team.id,cid:i.team.getMutedTeamMembers,params:[{type:"long",name:"teamId"}]},sendTeamMsgReceipt:{sid:i.team.id,cid:i.team.sendTeamMsgReceipt,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReads:{sid:i.team.id,cid:i.team.getTeamMsgReads,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReadAccounts:{sid:i.team.id,cid:i.team.getTeamMsgReadAccounts,params:[{type:"Property",name:"teamMsgReceipt"}]},muteTeamAll:{sid:i.team.id,cid:i.team.muteTeamAll,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:i.team.id,cid:i.team.getTeamMemberInvitorAccid,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},friendRequest:{sid:i.friend.id,cid:i.friend.friendRequest,params:[{type:"String",name:"account"},{type:"byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:i.friend.id,cid:i.friend.deleteFriend,params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams"}]},updateFriend:{sid:i.friend.id,cid:i.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:i.friend.id,cid:i.friend.getFriends,params:[{type:"long",name:"timetag"}]},getChatroomAddress:{sid:i.chatroom.id,cid:i.chatroom.getChatroomAddress,params:[{type:"long",name:"chatroomId"},{type:"bool",name:"isWeixinApp"},{type:"number",name:"type"}]},sendFilterMsg:{sid:n(i).id,cid:n(i).sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:n(i).id,cid:n(i).sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},publishEvent:{sid:i.eventService.id,cid:i.eventService.publishEvent,params:[{type:"Property",name:"msgEvent"}]},pushEvent:{sid:i.eventService.id,cid:i.eventService.pushEvent},subscribeEvent:{sid:i.eventService.id,cid:i.eventService.subscribeEvent,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:i.eventService.id,cid:i.eventService.unSubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:i.eventService.id,cid:i.eventService.unSubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},querySubscribeEventsByAccounts:{sid:i.eventService.id,cid:i.eventService.querySubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},querySubscribeEventsByType:{sid:i.eventService.id,cid:i.eventService.querySubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},pushEvents:{sid:i.eventService.id,cid:i.eventService.pushEvents},getThreadMsgs:{sid:i.msgExtend.id,cid:i.msgExtend.getThreadMsgs,params:[{type:"Property",name:"msg"},{type:"Property",name:"threadMsgReq"}]},getMsgsByIdServer:{sid:i.msgExtend.id,cid:i.msgExtend.getMsgsByIdServer,params:[{type:"PropertyArray",name:"reqMsgs",entity:"msg"}]},addQuickComment:{sid:i.msgExtend.id,cid:i.msgExtend.addQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},deleteQuickComment:{sid:i.msgExtend.id,cid:i.msgExtend.deleteQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},getQuickComments:{sid:i.msgExtend.id,cid:i.msgExtend.getQuickComments,params:[{type:"PropertyArray",name:"commentReq",entity:"commentReq"}]},addCollect:{sid:i.msgExtend.id,cid:i.msgExtend.addCollect,params:[{type:"Property",name:"collect"}]},deleteCollects:{sid:i.msgExtend.id,cid:i.msgExtend.deleteCollects,params:[{type:"PropertyArray",name:"collectList",entity:"collect"}]},updateCollect:{sid:i.msgExtend.id,cid:i.msgExtend.updateCollect,params:[{type:"Property",name:"collect"}]},getCollects:{sid:i.msgExtend.id,cid:i.msgExtend.getCollects,params:[{type:"Property",name:"collectQuery"}]},addStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.addStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},updateStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.updateStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},deleteStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.deleteStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},addMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.addMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},updateMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.updateMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},deleteMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.deleteMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},getMsgPins:{sid:i.msgExtend.id,cid:i.msgExtend.getMsgPins,params:[{type:"Property",name:"msgPinReq"}]},httpProxy:{sid:i.proxyService.id,cid:i.proxyService.httpProxy,params:[{type:"Property",name:"proxyTag"}]},getQChatAddress:{sid:i.qchat.id,cid:i.qchat.getQChatAddress,params:[{type:"Property",name:"getQChatAddressTag"}]}}),$=g.merge({},y.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"},{type:"Property",name:"aosPushInfo"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Number",name:"from"},{type:"Number",name:"reason"},{type:"String",name:"custom"},{type:"Number",name:"customClientType"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_1":{service:"user",cmd:"updatePushToken"},"3_2":{service:"user",cmd:"appBackground"},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Number",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Number",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Number",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Number",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_8":{service:"notify",cmd:"syncOfflineNetcallMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Number",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},"4_15":{service:"notify",cmd:"syncRobots",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"4_16":{service:"notify",cmd:"syncBroadcastMsgs",response:[{type:"PropertyArray",name:"broadcastMsgs",entity:"broadcastMsg"}]},"4_17":{service:"notify",cmd:"syncSuperTeamRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_18":{service:"notify",cmd:"syncOfflineSuperTeamSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_19":{service:"notify",cmd:"syncDeleteSuperTeamMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"4_20":{service:"notify",cmd:"syncSuperTeamSessionAck",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},"4_21":{service:"notify",cmd:"syncDeleteMsgSelf",response:[{type:"PropertyArray",name:"deletedMsgs",entity:"deleteMsgSelfTag"}]},"4_22":{service:"notify",cmd:"syncSessionsWithMoreRoaming",response:[{type:"PropertyArray",name:"sessions",entity:"msg"}]},"4_23":{service:"notify",cmd:"syncStickTopSessions",response:[{type:"Number",name:"timetag"},{type:"boolean",name:"modify"},{type:"PropertyArray",name:"sessions",entity:"stickTopSession"}]},"4_24":{service:"notify",cmd:"syncSessionHistoryMsgsDelete",response:[{type:"PropertyArray",name:"sessionHistoryMsgsDeleteTags",entity:"clearMsgsParamsWithSync"}]},"4_25":{service:"notify",cmd:"syncSessionReliableInfo",response:[{type:"Property",name:"context",entity:"sessionReliableSyncContextTag"},{type:"PropertyArray",name:"datas",entity:"sessionReliableSyncTag"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Number",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"5_3":{service:"sync",cmd:"syncSuperTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_17":{service:"msg",cmd:"broadcastMsg",response:[{type:"Property",name:"broadcastMsg"}]},"7_18":{service:"msg",cmd:"clearServerHistoryMsgs",response:[{type:"Long",name:"timetag"}]},"7_19":{service:"session",cmd:"getServerSessions",response:[{type:"Property",name:"sessionReqTag"},{type:"PropertyArray",name:"sessionList",entity:"session"}]},"7_20":{service:"session",cmd:"getServerSession",response:[{type:"Property",name:"session"}]},"7_21":{service:"session",cmd:"updateServerSession"},"7_22":{service:"session",cmd:"deleteServerSessions"},"7_23":{service:"msg",cmd:"deleteMsgSelf",response:[{type:"Long",name:"timetag"}]},"7_24":{service:"msg",cmd:"deleteMsgSelfBatch",response:[{type:"Long",name:"timetag"}]},"7_25":{service:"msg",cmd:"onMarkSessionAckBatch"},"7_26":{service:"msg",cmd:"msgFtsInServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_27":{service:"msg",cmd:"msgFtsInServerByTiming",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_118":{service:"msg",cmd:"onClearServerHistoryMsgs",response:[{type:"Property",name:"sessionHistoryMsgsDeleteTag",entity:"clearMsgsParamsWithSync"}]},"7_123":{service:"msg",cmd:"onDeleteMsgSelf",response:[{type:"Property",name:"deleteMsgSelfTag"}]},"7_124":{service:"msg",cmd:"onDeleteMsgSelfBatch",response:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Number",name:"scene"},{type:"String",name:"to"},{type:"Number",name:"timetag"}]},"7_121":{service:"msg",cmd:"syncUpdateServerSession",response:[{type:"Property",name:"session"}]},"23_1":{service:"msgExtend",cmd:"getThreadMsgs",response:[{type:"Property",name:"threadMsg",entity:"msg"},{type:"Property",name:"threadMsgsMeta"},{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_2":{service:"msgExtend",cmd:"getMsgsByIdServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_3":{service:"msgExtend",cmd:"addQuickComment",response:[{type:"Number",name:"timetag"}]},"23_4":{service:"msgExtend",cmd:"deleteQuickComment",response:[{type:"Number",name:"timetag"}]},"23_5":{service:"msgExtend",cmd:"onQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_6":{service:"msgExtend",cmd:"onDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_7":{service:"msgExtend",cmd:"getQuickComments",response:[{type:"PropertyArray",name:"commentRes",entity:"commentRes"}]},"23_8":{service:"msgExtend",cmd:"addCollect",response:[{type:"Property",name:"collect"}]},"23_9":{service:"msgExtend",cmd:"deleteCollects",response:[{type:"Number",name:"deleteNum"}]},"23_10":{service:"msgExtend",cmd:"updateCollect",response:[{type:"Property",name:"collect"}]},"23_11":{service:"msgExtend",cmd:"getCollects",response:[{type:"Number",name:"total"},{type:"PropertyArray",name:"collectList",entity:"collect"}]},"23_12":{service:"msgExtend",cmd:"addStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_13":{service:"msgExtend",cmd:"deleteStickTopSession",response:[{type:"Number",name:"timetag"}]},"23_14":{service:"msgExtend",cmd:"updateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_15":{service:"msgExtend",cmd:"addMsgPin",response:[{type:"Number",name:"timetag"}]},"23_16":{service:"msgExtend",cmd:"updateMsgPin",response:[{type:"Number",name:"timetag"}]},"23_17":{service:"msgExtend",cmd:"deleteMsgPin",response:[{type:"Number",name:"timetag"}]},"23_18":{service:"msgExtend",cmd:"onAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_19":{service:"msgExtend",cmd:"onUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_20":{service:"msgExtend",cmd:"onDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_21":{service:"msgExtend",cmd:"getMsgPins",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"modify"},{type:"PropertyArray",name:"pins",entity:"msgPinRes"}]},"23_103":{service:"msgExtend",cmd:"syncAddQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_104":{service:"msgExtend",cmd:"syncDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_112":{service:"msgExtend",cmd:"syncAddStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_113":{service:"msgExtend",cmd:"syncDeleteStickTopSession",response:[{type:"Number",name:"timetag"},{type:"Property",name:"stickTopSession"}]},"23_114":{service:"msgExtend",cmd:"syncUpdateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_115":{service:"msgExtend",cmd:"syncAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_116":{service:"msgExtend",cmd:"syncUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_117":{service:"msgExtend",cmd:"syncDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"21_2":{service:"superTeam",cmd:"sendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_3":{service:"superTeam",cmd:"superTeamMsg",response:[{type:"Property",name:"msg"}]},"21_5":{service:"superTeam",cmd:"addSuperTeamMembers",response:[{type:"StrArray",name:"abortedAccidList"},{type:"long",name:"timetag"}]},"21_6":{service:"superTeam",cmd:"removeSuperTeamMembers"},"21_7":{service:"superTeam",cmd:"leaveSuperTeam"},"21_8":{service:"superTeam",cmd:"updateSuperTeam",response:[{type:"long",name:"timetag"}]},"21_9":{service:"superTeam",cmd:"getSuperTeam",response:[{type:"Property",name:"team"}]},"21_12":{service:"superTeam",cmd:"getSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_10":{service:"superTeam",cmd:"updateInfoInSuperTeam",response:[{type:"Property",name:"superTeamMember"}]},"21_13":{service:"superTeam",cmd:"getSuperTeamMembers",response:[{type:"long",name:"timetag"}]},"21_11":{service:"superTeam",cmd:"getMySuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_14":{service:"superTeam",cmd:"getSuperTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"21_15":{service:"superTeam",cmd:"getSuperTeamMembersByJoinTime",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_16":{service:"superTeam",cmd:"sendSuperTeamCustomSysMsg",trivialErrorCodes:[7101]},"21_17":{service:"superTeam",cmd:"onDeleteSuperTeamMsg"},"21_18":{service:"superTeam",cmd:"onSuperTeamMsgDelete",response:[{type:"Property",name:"sysMsg"}]},"21_19":{service:"superTeam",cmd:"superTeamCustomSysMsg",response:[{type:"Property",name:"sysMsg"}]},"21_20":{service:"superTeam",cmd:"applySuperTeam",response:[{type:"Property",name:"team"}]},"21_21":{service:"superTeam",cmd:"passSuperTeamApply"},"21_22":{service:"superTeam",cmd:"rejectSuperTeamApply"},"21_23":{service:"superTeam",cmd:"acceptSuperTeamInvite",response:[{type:"Property",name:"team"}]},"21_24":{service:"superTeam",cmd:"rejectSuperTeamInvite"},"21_25":{service:"superTeam",cmd:"onMarkSuperTeamSessionAck"},"21_26":{service:"superTeam",cmd:"addSuperTeamManagers"},"21_27":{service:"superTeam",cmd:"removeSuperTeamManagers"},"21_28":{service:"superTeam",cmd:"updateSuperTeamMute"},"21_29":{service:"superTeam",cmd:"updateSuperTeamMembersMute",response:[{type:"long",name:"timetag"}]},"21_30":{service:"superTeam",cmd:"updateNickInSuperTeam"},"21_31":{service:"superTeam",cmd:"transferSuperTeam"},"21_32":{service:"superTeam",cmd:"onMarkSuperTeamSessionsAck"},"21_33":{service:"superTeam",cmd:"getSuperTeamMembersByAccounts",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_34":{service:"superTeam",cmd:"getMutedSuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_113":{service:"superTeam",cmd:"syncSuperTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"superTeamMember"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_111":{service:"superTeam",cmd:"syncMySuperTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"superTeamMember"},{type:"long",name:"timetag"}]},"21_109":{service:"superTeam",cmd:"syncSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_101":{service:"superTeam",cmd:"syncCreateSuperTeam",response:[{type:"Property",name:"team"}]},"21_102":{service:"superTeam",cmd:"syncSendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_110":{service:"superTeam",cmd:"syncUpdateSuperTeamMember",response:[{type:"Property",name:"teamMember",entity:"superTeamMember"}]},"21_117":{service:"superTeam",cmd:"syncDeleteSuperTeamMsg",response:[{type:"Property",name:"sysMsg"}]},"21_125":{service:"superTeam",cmd:"syncMarkSuperTeamSessionAck",response:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"},{type:"StrArray",name:"abortedAccidList"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers",response:[{type:"long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Number",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam",response:[{type:"Property",name:"teamMember"}]},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_28":{service:"team",cmd:"sendTeamMsgReceipt",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_29":{service:"team",cmd:"getTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_30":{service:"team",cmd:"getTeamMsgReadAccounts",response:[{type:"Property",name:"teamMsgReceipt"},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},"8_31":{service:"team",cmd:"notifyTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_32":{service:"team",cmd:"muteTeamAll",response:[]},"8_33":{service:"team",cmd:"getTeamMemberInvitorAccid",response:[{type:"object",name:"accountsMap"}]},"8_34":{service:"team",cmd:"getTeamsById",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"StrArray",name:"tids"}],trivialErrorCodes:[816]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Number",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"14_1":{service:"eventService",cmd:"publishEvent",response:[{type:"Property",name:"msgEvent"}]},"14_2":{service:"eventService",cmd:"pushEvent",response:[{type:"Property",name:"msgEvent"}]},"14_3":{service:"eventService",cmd:"subscribeEvent",response:[{type:"StrArray",name:"accounts"}]},"14_4":{service:"eventService",cmd:"unSubscribeEventsByAccounts",response:[{type:"StrArray",name:"accounts"}]},"14_5":{service:"eventService",cmd:"unSubscribeEventsByType"},"14_6":{service:"eventService",cmd:"querySubscribeEventsByAccounts",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_7":{service:"eventService",cmd:"querySubscribeEventsByType",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_9":{service:"eventService",cmd:"pushEvents",response:[{type:"PropertyArray",name:"msgEvents",entity:"msgEvent"}]},"22_1":{service:"proxyService",cmd:"httpProxy",response:[{type:"Property",name:"proxyTag"}]},"22_2":{service:"proxyService",cmd:"onProxyMsg",response:[{type:"Property",name:"proxyMsg",entity:"proxyMsgTag"}]},"24_1":{service:"qchat",cmd:"getQChatAddress",response:[{type:"StrArray",name:"address"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});t.exports={idMap:i,cmdConfig:k,packetConfig:$}},function(t,r){t.exports={negotiateTransportTag:{version:-1,serializeList:1,serialize:101},initTransportTag:{},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,libEnv:44,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,connectionId:102,ip:103,time:109,customTag:38,customClientType:39},aosPushInfo:{pushType:110,hasTokenPreviously:111},sync:{myInfo:1,offlineMsgs:2,teams:3,netcallMsgs:6,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,robots:19,broadcastMsgs:20,avSignal:21,superTeams:22,myInfoInSuperTeams:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteMsgSelf:27,stickTopSessions:28,sessionHistoryMsgsDelete:29,filterMsgs:100},donnop:{open:1},sessionReqTag:{minTimestamp:1,maxTimestamp:2,needLastMsg:3,limit:4,hasMore:5},session:{id:1,updateTime:2,ext:3,lastMsg:4},superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,createTime:10,updateTime:11,custom:12,mute:13,invitoraccid:14,joinTime:15,followAccountIds:17},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13,invitorAccid:14,followAccountIds:16},teamSpecialFollowUpdateTag:{accountIds:1,type:2},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,antiSpamBusinessId:23,clientAntiSpam:24,antiSpamUsingYidun:25,needMsgReceipt:26,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,delete:39,callbackExt:40,subType:41,yidunAntiCheating:42,env:43,yidunAntiSpamExt:44,yidunAntiSpamRes:45,__clientExt:46,robotInfoFunction:47,robotInfoTopic:48,robotInfoCustomContent:49,robotInfoAccount:50,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isInBlackList:106,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110,isReplyMsg:111,tempTeamMemberCount:112},threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2},comment:{from:1,body:2,time:3,custom:4,needPush:5,needBadge:6,pushTitle:7,apnsText:8,pushPayload:9},commentReq:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,timestamp:100},commentRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,detail:7,modify:8,timestamp:100},collect:{id:1,type:2,data:3,custom:4,uniqueId:5,createTime:6,updateTime:7},collectQuery:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5,type:6},stickTopSession:{id:1,topCustom:2,createTime:3,updateTime:4},pinTag:{pinFrom:1,pinCustom:2,createTime:3,updateTime:4},msgPinReq:{sessionId:1,timetag:2},msgPinRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,pinFrom:7,pinCustom:8},msgReceipt:{to:1,from:2,time:7,idClient:11},teamMsgReceipt:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},deleteMsgSelfTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,custom:8},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,env:21,idClient:23,callbackExt:22,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},broadcastMsg:{broadcastId:1,fromAccid:2,fromUid:3,timestamp:4,body:5},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12,serverex:13},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},antispamTag:{antiSpamBusinessId:1},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4},msgType:{text:0,picture:1,audio:2,video:3,location:4,notification:5,file:6,netcall_audio:7,netcall_vedio:8,datatunnel_new:9,tips:10,robot:11,custom:100},msgEvent:{type:1,value:2,idClient:3,custom:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverCustom:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105},clearMsgsParams:{account:1,delRoam:2},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},msgFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},msgTimingFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},delFriendParams:{delAlias:1},proxyTag:{zone:1,path:2,method:3,header:4,body:5},proxyMsgTag:{from:1,body:2,time:3},sessionAckTag:{scene:1,to:2,timetag:3},mixTokenReq:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},mixAuthTokenReq:{type:1,urls:2},notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105},getQChatAddressTag:{ipType:1}}},function(t,r){t.exports={negotiateTransportTag:{"-1":"version",1:"serializeList",101:"serialize"},initTransportTag:{},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},appGrayConfigTag:{0:"grayConfig",1:"ttl"},mixStorePolicyTag:{0:"providers",1:"ttl",2:"mixEnable",3:"nosPolicy",4:"s3Policy"},mixStoreTokenTag:{0:"provider",1:"accessKeyId",2:"secretAccessKey",3:"sessionToken",4:"token",5:"expireAt",6:"bucket",7:"objectName",8:"fileExpireSec",9:"tag",10:"shortUrl",11:"region"},notifyDetectTag:{1:"type",2:"params",3:"result",100:"t1",101:"t2",102:"t3",103:"t4",104:"t5",105:"t6"},backSourceTokenTag:{1:"type",2:"tokens",3:"token",4:"ttl"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",39:"customClientType",40:"sdkHumanVersion",112:"isReactNative",115:"authType",116:"loginExt",1e3:"token"},loginRes:{17:"lastLoginDeviceId",38:"customTag",102:"connectionId",103:"ip",104:"port",106:"country",111:"hasXMPush"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",32:"deviceInfo",38:"customTag",39:"customClientType",102:"connectionId",103:"ip",109:"time"},aosPushInfo:{110:"pushType",111:"hasTokenPreviously"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",6:"netcallMsgs",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",19:"robots",20:"broadcastMsgs",21:"avSignal",22:"superTeams",23:"myInfoInSuperTeams",24:"superTeamRoamingMsgs",25:"deleteSuperTeamMsg",26:"superTeamSessionAck",27:"deleteMsgSelf",28:"stickTopSessions",29:"sessionHistoryMsgsDelete",100:"filterMsgs"},donnop:{1:"open"},sessionReqTag:{1:"minTimestamp",2:"maxTimestamp",3:"needLastMsg",4:"limit",5:"hasMore"},session:{1:"id",2:"updateTime",3:"ext",4:"lastMsg",5:"lastMsgType"},superTeam:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},superTeamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"createTime",11:"updateTime",12:"custom",13:"mute",14:"invitoraccid",15:"joinTime",17:"followAccountIds"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute",14:"invitorAccid",16:"followAccountIds"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",23:"antiSpamBusinessId",24:"clientAntiSpam",25:"antiSpamUsingYidun",26:"needMsgReceipt",28:"needUpdateSession",29:"replyMsgFromAccount",30:"replyMsgToAccount",31:"replyMsgTime",32:"replyMsgIdServer",33:"replyMsgIdClient",34:"threadMsgFromAccount",35:"threadMsgToAccount",36:"threadMsgTime",37:"threadMsgIdServer",38:"threadMsgIdClient",39:"delete",40:"callbackExt",41:"subType",42:"yidunAntiCheating",43:"env",44:"yidunAntiSpamExt",45:"yidunAntiSpamRes",46:"__clientExt",47:"robotInfoFunction",48:"robotInfoTopic",49:"robotInfoCustomContent",50:"robotInfoAccount",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",106:"isInBlackList",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick",111:"isReplyMsg",112:"tempTeamMemberCount"},threadMsgReq:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse"},threadMsgsMeta:{1:"total",2:"lastMsgTime"},comment:{1:"from",2:"body",3:"time",4:"custom",5:"needPush",6:"needBadge",7:"pushTitle",8:"apnsText",9:"pushPayload"},commentReq:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",100:"timestamp"},commentRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"detail",8:"modify",100:"timestamp"},collect:{1:"id",2:"type",3:"data",4:"custom",5:"uniqueId",6:"createTime",7:"updateTime"},collectQuery:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse",6:"type"},stickTopSession:{1:"id",2:"topCustom",3:"createTime",4:"updateTime"},pinTag:{1:"pinFrom",2:"pinCustom",3:"createTime",4:"updateTime"},msgPinReq:{1:"sessionId",2:"timetag"},msgPinRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"pinFrom",8:"pinCustom"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},teamMsgReceipt:{0:"teamId",1:"idServer",100:"read",101:"unread",102:"idClient",103:"account"},deleteMsgSelfTag:{1:"scene",2:"from",3:"to",4:"idServer",5:"idClient",6:"time",7:"deletedTime",8:"custom"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",16:"opeAccount",21:"env",22:"callbackExt",23:"idClient",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},broadcastMsg:{1:"broadcastId",2:"fromAccid",3:"fromUid",4:"timestamp",5:"body"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime",13:"serverex"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime",_4_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"},msgType:{0:"text",1:"picture",2:"audio",3:"video",4:"location",5:"notification",6:"file",7:"netcall_audio",8:"netcall_vedio",9:"datatunnel_new",10:"tips",11:"robot",100:"custom"},msgEvent:{1:"type",2:"value",3:"idClient",4:"custom",5:"validTime",6:"broadcastType",7:"sync",8:"validTimeType",9:"durable",10:"time",11:"idServer",12:"clientType",13:"serverConfig",14:"serverCustom",101:"appid",103:"account",104:"enableMultiClient",106:"consid"},msgEventSubscribe:{1:"type",2:"subscribeTime",3:"sync",102:"to",104:"from",105:"time"},clearMsgsParams:{1:"account",2:"delRoam"},clearMsgsParamsWithSync:{0:"type",1:"otherAccid",2:"delRoam",3:"toTid",4:"isSyncSelf",5:"fromAccid",6:"time",7:"ext"},msgFullSearchRequestTag:{1:"keyword",2:"fromTime",3:"toTime",4:"sessionLimit",5:"msgLimit",6:"order",7:"p2pList",8:"teamList",9:"senderList",10:"msgTypeList",11:"msgSubTypeList"},delFriendParams:{1:"delAlias"},proxyTag:{1:"zone",2:"path",3:"method",4:"header",5:"body"},proxyMsgTag:{1:"from",2:"body",3:"time"},sessionReliableSyncTag:{1:"scene",2:"sessionId",3:"syncStatus",4:"syncEndMsgId",5:"syncEndMsgidClient",6:"syncEndMsgTime",7:"syncStartMsgid",8:"syncStartMsgidClient",9:"syncStartMsgTime",10:"nextMsgid",11:"nextMsgidClient",12:"nextMsgTime",13:"roamMsgSync",14:"offlineMsgSync",15:"netCallOfflineMsgSync"},sessionReliableSyncContextTag:{1:"timetag",2:"type"}}},function(t,r,e){var n=e(0),g=e(193),y=n.merge({},g.idMap,{chatroom:{id:13,login:2,kicked:3,logout:4,sendMsg:6,msg:7,getChatroomMembers:8,getHistoryMsgs:9,markChatroomMember:11,closeChatroom:12,getChatroom:13,updateChatroom:14,updateMyChatroomMemberInfo:15,getChatroomMembersInfo:16,kickChatroomMember:17,updateChatroomMemberTempMute:19,queueOffer:20,queuePoll:21,queueList:22,peak:23,queueDrop:24,queueInit:25,queueChange:26,updateTagMembersTempMute:30,getChatroomMembersByTag:31,getChatroomMemberCountByTag:32,updateCoordinate:33,updateChatroomTags:34,sendChatroomMsgAck:35,getHistoryMsgsByTags:36,notifyCdnInfo:99},user:{id:3,syncRobot:16}}),i=n.merge({},g.cmdConfig,{login:{sid:y.chatroom.id,cid:y.chatroom.login,params:[{type:"byte",name:"type"},{type:"Property",name:"login"},{type:"Property",name:"imLogin"}]},logout:{sid:y.chatroom.id,cid:y.chatroom.logout},sendMsg:{sid:y.chatroom.id,cid:y.chatroom.sendMsg,params:[{type:"Property",name:"msg"}]},getChatroomMembers:{sid:y.chatroom.id,cid:y.chatroom.getChatroomMembers,params:[{type:"byte",name:"type"},{type:"long",name:"time"},{type:"int",name:"limit"}]},getHistoryMsgs:{sid:y.chatroom.id,cid:y.chatroom.getHistoryMsgs,params:[{type:"long",name:"timetag"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},markChatroomMember:{sid:y.chatroom.id,cid:y.chatroom.markChatroomMember,params:[{type:"string",name:"account"},{type:"int",name:"type"},{type:"bool",name:"isAdd"},{type:"int",name:"level"},{type:"string",name:"custom"}]},closeChatroom:{sid:y.chatroom.id,cid:y.chatroom.closeChatroom,params:[{type:"string",name:"custom"}]},getChatroom:{sid:y.chatroom.id,cid:y.chatroom.getChatroom},updateChatroom:{sid:y.chatroom.id,cid:y.chatroom.updateChatroom,params:[{type:"Property",name:"chatroom"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"Property",name:"antispamTag"}]},updateMyChatroomMemberInfo:{sid:y.chatroom.id,cid:y.chatroom.updateMyChatroomMemberInfo,params:[{type:"Property",name:"chatroomMember"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"bool",name:"needSave"},{type:"Property",name:"antispamTag"}]},getChatroomMembersInfo:{sid:y.chatroom.id,cid:y.chatroom.getChatroomMembersInfo,params:[{type:"StrArray",name:"accounts"}]},kickChatroomMember:{sid:y.chatroom.id,cid:y.chatroom.kickChatroomMember,params:[{type:"string",name:"account"},{type:"string",name:"custom"}]},updateChatroomMemberTempMute:{sid:y.chatroom.id,cid:y.chatroom.updateChatroomMemberTempMute,params:[{type:"String",name:"account"},{type:"long",name:"duration"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"}]},queueOffer:{sid:y.chatroom.id,cid:y.chatroom.queueOffer,params:[{type:"string",name:"elementKey"},{type:"string",name:"elementValue"},{type:"bool",name:"transient"},{type:"string",name:"elementAccount"}]},queuePoll:{sid:y.chatroom.id,cid:y.chatroom.queuePoll,params:[{type:"string",name:"elementKey"}]},queueList:{sid:y.chatroom.id,cid:y.chatroom.queueList},peak:{sid:y.chatroom.id,cid:y.chatroom.peak},queueDrop:{sid:y.chatroom.id,cid:y.chatroom.queueDrop},queueInit:{sid:y.chatroom.id,cid:y.chatroom.queueInit,params:[{type:"int",name:"limit"}]},queueChange:{sid:y.chatroom.id,cid:y.chatroom.queueChange,params:[{type:"StrStrMap",name:"elementMap"},{type:"bool",name:"needNotify"},{type:"string",name:"notifyExt"}]},updateTagMembersTempMute:{sid:y.chatroom.id,cid:y.chatroom.updateTagMembersTempMute,params:[{type:"Property",name:"tagMuteReq"}]},updateCoordinate:{sid:y.chatroom.id,cid:y.chatroom.updateCoordinate,params:[{type:"Property",name:"coordinateReq"}]},getChatroomMemberCountByTag:{sid:y.chatroom.id,cid:y.chatroom.getChatroomMemberCountByTag,params:[{type:"String",name:"tag"}]},getChatroomMembersByTag:{sid:y.chatroom.id,cid:y.chatroom.getChatroomMembersByTag,params:[{type:"Property",name:"tagMemberReq"}]},updateChatroomTags:{sid:y.chatroom.id,cid:y.chatroom.updateChatroomTags,params:[{type:"Property",name:"chatRoomTagsUpdateTag"}]},sendChatroomMsgAck:{sid:y.chatroom.id,cid:y.chatroom.sendChatroomMsgAck,params:[{type:"Property",name:"chatRoomMsgAckTag"}]},getHistoryMsgsByTags:{sid:y.chatroom.id,cid:y.chatroom.getHistoryMsgsByTags,params:[{type:"Property",name:"chatRoomTagHistoryMsgRequestTag"}]},notifyCdnInfo:{sid:y.chatroom.id,cid:y.chatroom.notifyCdnInfo},syncRobot:{sid:y.user.id,cid:y.user.syncRobot,params:[{type:"long",name:"timetag"}]}}),k=n.merge({},g.packetConfig,{"4_10":{service:"notify"},"4_11":{service:"notify"},"3_16":{service:"chatroom",cmd:"syncRobot",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"13_2":{service:"chatroom",cmd:"login",response:[{type:"Property",name:"chatroom"},{type:"Property",name:"chatroomMember"},{type:"Property",name:"chatroomCdnInfo"}]},"13_3":{service:"chatroom",cmd:"kicked",response:[{type:"Number",name:"reason"},{type:"String",name:"custom"}]},"13_4":{service:"chatroom",cmd:"logout"},"13_6":{service:"chatroom",cmd:"sendMsg",response:[{type:"Property",name:"msg"}]},"13_7":{service:"chatroom",cmd:"msg",response:[{type:"Property",name:"msg"}]},"13_8":{service:"chatroom",cmd:"getChatroomMembers",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_9":{service:"chatroom",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_11":{service:"chatroom",cmd:"markChatroomMember",response:[{type:"Property",name:"chatroomMember"}]},"13_12":{service:"chatroom",cmd:"closeChatroom"},"13_13":{service:"chatroom",cmd:"getChatroom",response:[{type:"Property",name:"chatroom"}]},"13_14":{service:"chatroom",cmd:"updateChatroom"},"13_15":{service:"chatroom",cmd:"updateMyChatroomMemberInfo"},"13_16":{service:"chatroom",cmd:"getChatroomMembersInfo",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_17":{service:"chatroom",cmd:"kickChatroomMember"},"13_19":{service:"chatroom",cmd:"updateChatroomMemberTempMute"},"13_20":{service:"chatroom",cmd:"queueOffer"},"13_21":{service:"chatroom",cmd:"queuePoll",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_22":{service:"chatroom",cmd:"queueList",response:[{type:"KVArray",name:"queueList"}]},"13_23":{service:"chatroom",cmd:"peak",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_24":{service:"chatroom",cmd:"queueDrop"},"13_25":{service:"chatroom",cmd:"queueInit"},"13_26":{service:"chatroom",cmd:"queueChange",response:[{type:"StrArray",name:"elementKeyArray"}]},"13_30":{service:"chatroom",cmd:"updateTagMembersTempMute"},"13_33":{service:"chatroom",cmd:"updateCoordinate"},"13_31":{service:"chatroom",cmd:"getChatroomMembersByTag",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_32":{service:"chatroom",cmd:"getChatroomMemberCountByTag",response:[{type:"long",name:"count"}]},"13_34":{service:"chatroom",cmd:"updateChatroomTags"},"13_36":{service:"chatroom",cmd:"getHistoryMsgsByTags",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_99":{service:"chatroom",cmd:"notifyCdnInfo",response:[{type:"Property",name:"chatroomCdnInfo"}]},"13_101":{service:"chatroom",cmd:"updateChatroomTag",response:[{type:"Property",name:"updateTags"}]}});t.exports={idMap:y,cmdConfig:i,packetConfig:k}},function(t,r){t.exports={imLogin:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,libEnv:44,isReactNative:112,authType:115,loginExt:116,token:1e3,customTag:38},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{appKey:1,account:2,deviceId:3,chatroomId:5,appLogin:8,chatroomNick:20,chatroomAvatar:21,chatroomCustom:22,chatroomEnterCustom:23,session:26,isAnonymous:38,tags:39,notifyTargetTags:40,loginAuthType:41,loginExt:42,loc_x:43,loc_y:44,loc_z:45,distance:46,antiSpamBusinessId:47},chatroom:{id:1,name:3,announcement:4,broadcastUrl:5,custom:12,createTime:14,updateTime:15,queuelevel:16,creator:100,onlineMemberNum:101,mute:102},msg:{idClient:1,type:2,attach:3,custom:4,resend:5,userUpdateTime:6,fromNick:7,fromAvatar:8,fromCustom:9,yidunEnable:10,antiSpamContent:11,skipHistory:12,body:13,antiSpamBusinessId:14,clientAntiSpam:15,antiSpamUsingYidun:16,time:20,from:21,chatroomId:22,fromClientType:23,highPriority:25,callbackExt:27,subType:28,yidunAntiCheating:29,env:30,notifyTargetTags:31,yidunAntiSpamExt:32,yidunAntiSpamRes:33,loc_x:34,loc_y:35,loc_z:36,toAccids:37,needHighPriorityMsgAck:38,__clientExt:39},chatroomMember:{chatroomId:1,account:2,type:3,level:4,nick:5,avatar:6,custom:7,online:8,guest:9,enterTime:10,blacked:12,gaged:13,valid:14,updateTime:15,tempMuted:16,tempMuteDuration:17},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{enable:1,cdnUrls:2,timestamp:3,interval:4,decryptType:5,decryptKey:6,timeout:7},tagMemberReq:{tag:1,time:2,limit:3},tagMuteReq:{tag:1,duration:2,needNotify:3,custom:4,notifyTargetTags:5},coordinateReq:{x:1,y:2,z:3,distance:4},chatRoomTagsUpdateTag:{tags:1,notifyTargetTags:2,needNotify:3,ext:4},chatRoomMsgAckTag:{idClient:1,chatroomId:2},chatRoomTagHistoryMsgRequestTag:{tags:1,types:2,fromTime:3,toTime:4,limit:5,reverse:6}}},function(t,r){t.exports={imLogin:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",41:"sdkType",42:"userAgent",44:"libEnv",112:"isReactNative",1e3:"token"},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{1:"appKey",2:"account",3:"deviceId",5:"chatroomId",8:"appLogin",20:"chatroomNick",21:"chatroomAvatar",22:"chatroomCustom",23:"chatroomEnterCustom",26:"session",38:"isAnonymous",39:"tags",40:"notifyTargetTags",41:"loginAuthType",42:"loginExt",43:"loc_x",44:"loc_y",45:"loc_z",46:"distance",47:"antiSpamBusinessId",_21_safe:"_chatroomAvatar_safe"},chatroom:{1:"id",3:"name",4:"announcement",5:"broadcastUrl",12:"custom",14:"createTime",15:"updateTime",16:"queuelevel",100:"creator",101:"onlineMemberNum",102:"mute"},msg:{1:"idClient",2:"type",3:"attach",4:"custom",5:"resend",6:"userUpdateTime",7:"fromNick",8:"fromAvatar",9:"fromCustom",10:"yidunEnable",11:"antiSpamContent",12:"skipHistory",13:"body",14:"antiSpamBusinessId",15:"clientAntiSpam",16:"antiSpamUsingYidun",20:"time",21:"from",22:"chatroomId",23:"fromClientType",25:"highPriority",27:"callbackExt",28:"subType",29:"yidunAntiCheating",30:"env",31:"notifyTargetTags",32:"yidunAntiSpamExt",33:"yidunAntiSpamRes",34:"loc_x",35:"loc_y",36:"loc_z",37:"toAccids",38:"needHighPriorityMsgAck",39:"__clientExt",_8_safe:"_fromAvatar_safe"},chatroomMember:{1:"chatroomId",2:"account",3:"type",4:"level",5:"nick",6:"avatar",7:"custom",8:"online",9:"guest",10:"enterTime",12:"blacked",13:"gaged",14:"valid",15:"updateTime",16:"tempMuted",17:"tempMuteDuration",_6_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{1:"enable",2:"cdnUrls",3:"timestamp",4:"interval",5:"decryptType",6:"decryptKey",7:"timeout"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},updateTags:{1:"currentTags"}}},function(t,r,e){t.exports=e(791)},function(t,r){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var g=0,y=new Array(n);g<n;g++)y[g]=e[g];return y},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(795)},function(t,r,e){var n=e(309),g=e(752),y=e(751);t.exports=function(i,k){var $;if(i){if(typeof i=="string")return y(i,k);var L=n($=Object.prototype.toString.call(i)).call($,8,-1);return L==="Object"&&i.constructor&&(L=i.constructor.name),L==="Map"||L==="Set"?g(i):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?y(i,k):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(799)},function(t,r,e){var n=e(4),g=e(37),y=e(0),i=y.notundef,k={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},$={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};function L(V){y.verifyOptions(V,"account","friend::Friend"),y.verifyParamAtLeastPresentOne(V,"alias custom","friend::Friend"),this.account=V.account,i(V.alias)&&(this.alias=V.alias),i(V.custom)&&(this.custom=V.custom)}L.reverse=function(V){var z=y.filterObj(V,"account alias custom createTime updateTime serverex");return i(V.flag)&&(z.valid=V.flag==="1"),i(z.createTime)&&(z.createTime=+z.createTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),z},L.validTypes=function(){return n(k)},L.getByteFromType=function(V){return k[V]},L.getTypeFromByte=function(V){return $[V]},L.assembleFriend=function(V){var z=+new Date;return g({},V,{alias:"",createTime:z,custom:"",updateTime:z,valid:!0})},t.exports=L},function(t,r,e){var n=e(757),g=e(37),y=e(0),i=y.notundef;function k($,L){n($.body)||y.onParamError("body",L),this.body=$.body,this.from=$.from||"",this.custom=$.custom||"",i($.pushTitle)&&(this.pushTitle=$.pushTitle),i($.apnsText)&&(this.apnsText=$.apnsText),i($.pushPayload)&&(this.pushPayload=$.pushPayload),i($.needPush)&&(this.needPush=$.needPush===!0?1:0),i($.needBadge)&&(this.needBadge=$.needBadge===!0?1:0)}k.reverse=function($){var L=g({},$);return i($.needBadge)&&(L.needBadge=+$.needBadge==1),i($.needPush)&&(L.needPush=+$.needPush==1),L.body=+$.body,L.time=+$.time,L},t.exports=k},function(t,r,e){t.exports=e(817)},function(t,r,e){var n=e(757),g=e(37),y=e(0);function i(k,$){n(k.type)||y.onParamError("Collect.type",$),y.notundef(k.uniqueId)&&(this.uniqueId=k.uniqueId),this.type=k.type,this.data=k.data||"",this.custom=k.custom||""}i.reverse=function(k){var $=g({},k);return $.type=+$.type,$.createTime=+$.createTime,$.updateTime=+$.updateTime,$},t.exports=i},function(t,r,e){var n=e(825),g=e(826),y=e(753),i=e(827);t.exports=function(k,$){return n(k)||g(k,$)||y(k,$)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(761),g=e(762),y=e(763),i=e(764);function k(V,z,re){var ie=V;return g(z)?(re=z,typeof V=="string"&&(ie={uri:V})):ie=i(z,{uri:V}),ie.callback=re,ie}function $(V,z,re){return L(z=k(V,z,re))}function L(V){if(V.callback===void 0)throw new Error("callback argument missing");var z=!1,re=function(ur,Dt,lr){z||(z=!0,V.callback(ur,Dt,lr))};function ie(){var ur=void 0;if(ur=Ue.response?Ue.response:Ue.responseText||function(Dt){try{if(Dt.responseType==="document")return Dt.responseXML;var lr=Dt.responseXML&&Dt.responseXML.documentElement.nodeName==="parsererror";if(Dt.responseType===""&&!lr)return Dt.responseXML}catch{}return null}(Ue),Et)try{ur=JSON.parse(ur)}catch{}return ur}function ue(ur){return clearTimeout(de),ur instanceof Error||(ur=new Error(""+(ur||"Unknown XMLHttpRequest Error"))),ur.statusCode=0,re(ur,ir)}function le(){if(!ae){var ur;clearTimeout(de),ur=V.useXDR&&Ue.status===void 0?200:Ue.status===1223?204:Ue.status;var Dt=ir,lr=null;return ur!==0?(Dt={body:ie(),statusCode:ur,method:Ve,headers:{},url:_e,rawRequest:Ue},Ue.getAllResponseHeaders&&(Dt.headers=y(Ue.getAllResponseHeaders()))):lr=new Error("Internal XMLHttpRequest Error"),re(lr,Dt,Dt.body)}}var oe,ae,Ue=V.xhr||null;Ue||(Ue=V.cors||V.useXDR?new $.XDomainRequest:new $.XMLHttpRequest);var de,_e=Ue.url=V.uri||V.url,Ve=Ue.method=V.method||"GET",$e=V.body||V.data,Lt=Ue.headers=V.headers||{},jt=!!V.sync,Et=!1,ir={body:void 0,headers:{},statusCode:0,method:Ve,url:_e,rawRequest:Ue};if("json"in V&&V.json!==!1&&(Et=!0,Lt.accept||Lt.Accept||(Lt.Accept="application/json"),Ve!=="GET"&&Ve!=="HEAD"&&(Lt["content-type"]||Lt["Content-Type"]||(Lt["Content-Type"]="application/json"),$e=JSON.stringify(V.json===!0?$e:V.json))),Ue.onreadystatechange=function(){Ue.readyState===4&&setTimeout(le,0)},Ue.onload=le,Ue.onerror=ue,Ue.onprogress=function(){},Ue.onabort=function(){ae=!0},Ue.ontimeout=ue,Ue.open(Ve,_e,!jt,V.username,V.password),jt||(Ue.withCredentials=!!V.withCredentials),!jt&&V.timeout>0&&(de=setTimeout(function(){if(!ae){ae=!0,Ue.abort("timeout");var ur=new Error("XMLHttpRequest timeout");ur.code="ETIMEDOUT",ue(ur)}},V.timeout)),Ue.setRequestHeader)for(oe in Lt)Lt.hasOwnProperty(oe)&&Ue.setRequestHeader(oe,Lt[oe]);else if(V.headers&&!function(ur){for(var Dt in ur)if(ur.hasOwnProperty(Dt))return!1;return!0}(V.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in V&&(Ue.responseType=V.responseType),"beforeSend"in V&&typeof V.beforeSend=="function"&&V.beforeSend(Ue),Ue.send($e||null),Ue}t.exports=$,t.exports.default=$,$.XMLHttpRequest=n.XMLHttpRequest||function(){},$.XDomainRequest="withCredentials"in new $.XMLHttpRequest?$.XMLHttpRequest:n.XDomainRequest,function(V,z){for(var re=0;re<V.length;re++)z(V[re])}(["get","put","post","patch","head","delete"],function(V){$[V==="delete"?"del":V]=function(z,re,ie){return(re=k(z,re,ie)).method=V.toUpperCase(),L(re)}})},function(t,r,e){(function(n){var g;g=typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{},t.exports=g}).call(this,e(73))},function(t,r){t.exports=function(n){if(!n)return!1;var g=e.call(n);return g==="[object Function]"||typeof n=="function"&&g!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)};var e=Object.prototype.toString},function(t,r){var e=function(n){return n.replace(/^\s+|\s+$/g,"")};t.exports=function(n){if(!n)return{};for(var g,y={},i=e(n).split(`
`),k=0;k<i.length;k++){var $=i[k],L=$.indexOf(":"),V=e($.slice(0,L)).toLowerCase(),z=e($.slice(L+1));y[V]===void 0?y[V]=z:(g=y[V],Object.prototype.toString.call(g)==="[object Array]"?y[V].push(z):y[V]=[y[V],z])}return y}},function(t,r){t.exports=function(){for(var n={},g=0;g<arguments.length;g++){var y=arguments[g];for(var i in y)e.call(y,i)&&(n[i]=y[i])}return n};var e=Object.prototype.hasOwnProperty},function(t,r,e){var n=e(22),g=e(126),y=e(6),i=e(8);function k($){var L=this,V=$.url||null;L.level={debug:0,log:1,info:2,warn:3,error:4}[$.level]||0,L.logCache=[],L.logNum=1,L.timeInterval=5e3,window.onerror=function(z,re,ie,ue,le){L.error(le)},g(function(){L.logCache.length>0&&V&&L.postLogs(V,L.logCache)},L.timeInterval)}k.prototype.debug=function(){var $;this.level>0||(console.debug.apply(this,arguments),this.cacheLogs.apply(this,y($=["[degbug]"]).call($,arguments)))},k.prototype.log=function(){var $;this.level>1||(console.log.apply(this,arguments),this.cacheLogs.apply(this,y($=["[log]"]).call($,arguments)))},k.prototype.info=function(){var $;this.level>2||(console.info.apply(this,arguments),this.cacheLogs.apply(this,y($=["[info]"]).call($,arguments)))},k.prototype.warn=function(){var $;this.level>3||(console.warn.apply(this,arguments),this.cacheLogs.apply(this,y($=["[warn]"]).call($,arguments)))},k.prototype.error=function(){var $;this.level>4||(console.error.apply(this,arguments),this.cacheLogs.apply(this,y($=["[error]"]).call($,arguments)))},k.prototype.cacheLogs=function($,L){for(var V=[],z=0;z<L.length;z++){var re=L[z];n(re)==="object"?V.push(i(re)):V.push(re)}var ie=this.logNum+++" "+$+" "+V.join("; ");this.logCache.push(ie.replace("%c",""))},k.prototype.postLogs=function($,L){var V=this,z=new XMLHttpRequest;z.onreadystatechange=function(){z.readyState===4&&(z.status===200?(console.info("LoggerPlugin::"),V.logCache=[],V.timeInterval=5e3):V.timeInterval+=5e3)},z.open("POST",$),z.setRequestHeader("Content-Type","plain/text;charset=utf-8"),z.timeout=360,z.send(L.join(`
`))},t.exports=k},function(t,r,e){var n=e(3),g=e(45);t.exports=function(y){var i,k,$,L;y.db&&(g.db=y.db),y.rnfs&&(g.rnfs=y.rnfs,g.rnfs.size||(g.rnfs.size=1048576),g.rnfs.nimPromise=(i=g.rnfs,k=i.size/2-256,L=0,$=g.rnfs.DocumentDirectoryPath+"/nimlog_"+L+".log",i.exists($).then(function(V){return V?i.stat($):n.reject(0)}).then(function(V){return V&&V.size>k?n.reject(1):n.reject(0)}).catch(function(V){return typeof V=="number"&&(i.nimIndex=V),n.resolve()})))}},function(t,r,e){var n=e(48),g=e(0),y=g.notundef,i=g.undef;function k($){y($.name)&&(this.name=""+$.name),y($.announcement)&&(this.announcement=""+$.announcement),y($.broadcastUrl)&&(this.broadcastUrl=""+$.broadcastUrl),y($.custom)&&(this.custom=""+$.custom),y($.queuelevel)&&(this.queuelevel=n($.queuelevel))}k.reverse=function($){var L=g.copy($);return i(L.announcement)&&(L.announcement=""),i(L.broadcastUrl)&&(L.broadcastUrl=""),i(L.custom)&&(L.custom=""),y(L.createTime)&&(L.createTime=+L.createTime),y(L.updateTime)&&(L.updateTime=+L.updateTime),y(L.onlineMemberNum)&&(L.onlineMemberNum=+L.onlineMemberNum),y(L.mute)&&(L.mute=L.mute==="1"),L},t.exports=k},function(t,r,e){var n,g,y;t.exports=(y=e(94),g=(n=y).lib.WordArray,n.enc.Base64={stringify:function(i){var k=i.words,$=i.sigBytes,L=this._map;i.clamp();for(var V=[],z=0;z<$;z+=3)for(var re=(k[z>>>2]>>>24-z%4*8&255)<<16|(k[z+1>>>2]>>>24-(z+1)%4*8&255)<<8|k[z+2>>>2]>>>24-(z+2)%4*8&255,ie=0;ie<4&&z+.75*ie<$;ie++)V.push(L.charAt(re>>>6*(3-ie)&63));var ue=L.charAt(64);if(ue)for(;V.length%4;)V.push(ue);return V.join("")},parse:function(i){var k=i.length,$=this._map,L=this._reverseMap;if(!L){L=this._reverseMap=[];for(var V=0;V<$.length;V++)L[$.charCodeAt(V)]=V}var z=$.charAt(64);if(z){var re=i.indexOf(z);re!==-1&&(k=re)}return function(ie,ue,le){for(var oe=[],ae=0,Ue=0;Ue<ue;Ue++)if(Ue%4){var de=le[ie.charCodeAt(Ue-1)]<<Ue%4*2,_e=le[ie.charCodeAt(Ue)]>>>6-Ue%4*2,Ve=de|_e;oe[ae>>>2]|=Ve<<24-ae%4*8,ae++}return g.create(oe,ae)}(i,k,L)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},y.enc.Base64)},function(t,r,e){var n,g,y,i,k,$,L,V;t.exports=(V=e(94),e(894),e(895),g=(n=V).lib,y=g.Base,i=g.WordArray,k=n.algo,$=k.MD5,L=k.EvpKDF=y.extend({cfg:y.extend({keySize:4,hasher:$,iterations:1}),init:function(z){this.cfg=this.cfg.extend(z)},compute:function(z,re){for(var ie,ue=this.cfg,le=ue.hasher.create(),oe=i.create(),ae=oe.words,Ue=ue.keySize,de=ue.iterations;ae.length<Ue;){ie&&le.update(ie),ie=le.update(z).finalize(re),le.reset();for(var _e=1;_e<de;_e++)ie=le.finalize(ie),le.reset();oe.concat(ie)}return oe.sigBytes=4*Ue,oe}}),n.EvpKDF=function(z,re,ie){return L.create(ie).compute(z,re)},V.EvpKDF)},function(t,r,e){e(299);var n=e(40);e(311)(n),t.exports=n},function(t,r,e){var n=e(48),g=e(3),y=e(15),i=e(8),k=e(2),$=e(6),L=e(306),V=e(9),z=e(16),re=e(64),ie=e(200),ue=e(304),le=e(772),oe=e(0),ae=e(307),Ue=e(41),de=Ue.newSupportDBError,_e=Ue.noDBError,Ve=!1;function $e(Et){Ve=Et,ae.set("db",Et,ue)}if($e(!!oe.getGlobal().indexedDB),re.name==="IE"&&$e(!1),re.name==="Microsoft Edge"&&$e(!1),re.name==="Safari")try{n(re.version.split(".")[0],10)<10&&$e(!1)}catch{}function Lt(Et){this.concurrency=0,this.pendingTasks=[],this.queue=g.resolve(),this.logger=Et.logger,this.reporter=Et.reporter,this.core=Et.core,this.account=Et.account,this.notifyError=Et.notifyError}var jt=Lt.prototype;jt.reset=oe.emptyFunc,Ve&&(jt.reset=function(Et){this.enable=Et!==!1}),jt.addTask=function(Et){var ir=this;return new g(function(ur,Dt){function lr(sr){ir.concurrency--;var er=ir.pendingTasks.shift();er&&ir.addTask(er),sr()}if(ir.concurrency<100)return ir.concurrency++,Et().then(function(sr){lr(function(){ur(sr),Et.resolve&&Et.resolve(sr)})},function(sr){lr(function(){var er=(sr=sr||{}).event||sr,cr={event:er,callFunc:sr.callFunc||"db::addTask"};ir.logger.error("db::error event is",er,oe.get(er,"target.error")),Dt(cr),Et.reject&&Et.reject(cr)})});Et.resolve||(Et.resolve=ur,Et.reject=Dt),ir.pendingTasks.push(Et)})},jt.reportError=function(Et){var ir=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ur=arguments.length>2?arguments[2]:void 0;this.reporter.reportTraceStart("exceptions",{user_id:this.account,trace_id:oe.get(this.core,"socket.socket.sessionid"),action:4,exception_service:0});var Dt,lr=ir.context||"";if(ur)try{var sr;Dt=y(sr=i(ur)).call(sr,0,100),lr+=". ".concat(Dt)}catch{Dt=""}var er=oe.get(Et,"code")||oe.get(Et,"target.error.code")||0,cr=oe.get(Et,"message")||oe.get(Et,"target.error.message")||"unknown";this.reporter.reportTraceUpdateV2("exceptions",{code:er,description:cr,operation_type:ir.operation_type,target:ir.target||this.name,context:lr}),this.reporter.reportTraceEnd("exceptions",1)},jt.init=function(Et){var ir=this;return ir.addTask(function(){return ir.enable?ir.server?g.resolve():(ir.name="nim-"+Et,ue.open({server:ir.name,version:le.version,schema:le.schema}).then(function(ur){ir.logger.info("db::init: ".concat(ir.name)),ir.server=ur},function(ur){throw $e(!1),ir.server=null,ir.name=null,ur}).catch(function(ur){throw ir.reportError(ur,{operation_type:0,context:"version ".concat(le.version),target:"nim-"+Et}),ur})):g.reject(de({callFunc:"db::init"}))})},jt.destroy=function(){var Et=this;return Et.addTask(function(){if(!Et.enable)return g.reject(de({callFunc:"db::destroy"}));if(!Et.server)return g.resolve();try{return ue.remove(Et.name).then(function(){Et.logger.info("db::destroy: ".concat(Et.name)),Et.server=null,Et.name=null}).catch(function(ir){throw Et.reportError(ir,{operation_type:1,context:"remove database failed"}),ir})}catch(ir){throw Et.reportError(ir,{operation_type:1,context:"remove database failed"}),ir}})},jt.clear=function(){var Et=this;return Et.addTask(function(){return Et.enable?Et.server?Et.server.clear("timetag").then(function(){var ir=y([]).call(Et.server.getIndexedDB().objectStoreNames),ur=[];if(k(ir).call(ir,function(Dt){ur.push(Et.server.clear(Dt).catch(function(lr){throw Et.reportError(lr,{operation_type:3,context:"tableName: ".concat(Dt,". clear table failed")}),lr}))}),ur.length)return g.all(ur).then(function(){Et.logger.info("db::clear: ".concat(Et.name))}).catch(function(Dt){return Et.logger.error("db::clear: ",Dt),g.reject(Dt)})}):g.resolve():g.reject(de({callFunc:"db::clear"}))})},jt.close=function(){this.server&&(this.server.close(),this.server=null,this.name=null)},jt.remove=function(Et,ir,ur,Dt,lr,sr,er){var cr=this;return cr.addTask(function(){cr.checkDB();try{return cr.server.remove(Et,ir,ur,Dt,lr,sr,er).then(function(){var or;cr.logger.info($(or="db::delete: ".concat(Et," ")).call(or,ir||ur))}).catch(function(or){throw cr.reportError(or,{operation_type:3,context:"tableName: ".concat(Et,", remove failed")},{name:Et,keys:ir,keyName:ur,lowerBound:Dt,upperBound:lr,lowerOpen:sr,upperOpen:er}),cr.logger.error("db::remove::server.remove error",or),or})}catch(or){throw cr.reportError(or,{operation_type:3,context:"tableName: ".concat(Et,", remove failed")},{name:Et,keys:ir,keyName:ur,lowerBound:Dt,upperBound:lr,lowerOpen:sr,upperOpen:er}),cr.logger.error("db::remove::server.remove error",or),or}})},jt.put=function(Et,ir){var ur=this;return ur.addTask(function(){ur.checkDB(),oe.isArray(ir)||(ir=[ir]);try{return ur.server.update(Et,ir).then(function(Dt){var lr=[Et],sr=le.keyPath(Et),er=[];return sr&&(k(Dt).call(Dt,function(cr){er.push(ie(cr,sr))}),lr.push(er.length===1?er[0]:er)),lr.unshift("db::put:"),Et==="timetag"&&lr.push(Dt[0]),ur.logger.log.apply(ur.logger.log,lr),Dt}).catch(function(Dt){throw ur.reportError(Dt,{operation_type:3,context:"tableName: ".concat(Et,". put failed")},ir),Dt})}catch(Dt){throw ur.reportError(Dt,{operation_type:3,context:"tableName: ".concat(Et,". put failed")},ir),Dt}})},jt.get=function(Et,ir){var ur=this;return ur.addTask(function(){ur.checkDB();try{return ur.server.get(Et,ir).catch(function(lr){var sr;throw ur.reportError(lr,{operation_type:3,context:$(sr="tableName: ".concat(Et,". get failed with key ")).call(sr,ir)}),lr})}catch(lr){var Dt;throw ur.reportError(lr,{operation_type:3,context:$(Dt="tableName: ".concat(Et,". get failed with key ")).call(Dt,ir)}),lr}})},jt.modifyOrPut=function(Et){var ir=this,ur=Et.table,Dt=oe.copy(Et.obj),lr=Et.key,sr=Et.modifyObjWhenPut,er=oe.copy(Dt);return delete er[lr],ir.getOne(ur,null,Dt[lr],{modifyObj:er}).then(function(cr){return cr?(er.idClient?er={idClient:er.idClient,server:er.server,pinFrom:er.pinFrom}:(er.lastMsg=er.lastMsg&&er.lastMsg.idServer+"_"+er.lastMsg.idClient,er.localCustom=er.localCustom&&"***",er.topCustom=er.topCustom&&"***"),ir.logger.log("db::modifyOrPut: update table ".concat(ur),er),cr):(Dt=oe.merge(Dt,sr),ir.put(ur,Dt).then(function(or){return or[0]}))})},jt.updateAndDelete=function(Et,ir,ur){var Dt=this;return Dt.addTask(function(){Dt.checkDB();try{return Dt.server.updateAndDelete(Et,ir,ur).catch(function(lr){throw Dt.reportError(lr,{operation_type:3,context:"tableName: ".concat(Et,". updateAndDelete failed")},{updates:ir,deletes:ur}),lr})}catch(lr){throw Dt.reportError(lr,{operation_type:3,context:"tableName: ".concat(Et,". updateAndDelete failed")},{updates:ir,deletes:ur}),lr}})},jt.getAll=function(Et,ir){var ur=this;return ur.addTask(function(){ur.checkDB(),(ir=ir||{}).keys=L(ir)===!0,ir.desc=ir.desc===!0,ir.distinct=ir.distinct===!0;try{var Dt,lr,sr;return V(Dt=L(lr=z(sr=ur.server.query(Et,ir.index)).call(sr,z(ir))).call(lr,L(ir)).desc(ir.desc).limit(ir.limit).distinct(ir.distinct)).call(Dt,ir.mapper).modify(ir.modifyObj).execute().catch(function(er){throw ur.reportError(er,{operation_type:3,context:"tableName: ".concat(Et,". getAll failed")},ir),er})}catch(er){throw ur.reportError(er,{operation_type:3,context:"tableName: ".concat(Et,". getAll failed")},ir),er}})},jt.getOnly=function(Et,ir,ur,Dt){var lr=this;return lr.addTask(function(){lr.checkDB(),(Dt=Dt||{}).keys=L(Dt)===!0,Dt.desc=Dt.desc===!0,Dt.distinct=Dt.distinct===!0,Dt.remove=Dt.remove===!0;try{var sr,er,cr;return V(sr=L(er=z(cr=lr.server.query(Et,ir).only(ur)).call(cr,z(Dt))).call(er,L(Dt)).desc(Dt.desc).limit(Dt.limit).distinct(Dt.distinct)).call(sr,Dt.mapper).modify(Dt.modifyObj).remove(Dt.remove).execute().catch(function(pr){var Tr,Pr;throw lr.reportError(pr,{operation_type:3,context:$(Tr=$(Pr="tableName: ".concat(Et,". getOnly failed with index: ")).call(Pr,ir,", matchValue: ")).call(Tr,ur)},Dt),pr})}catch(pr){var or,hr;throw lr.reportError(pr,{operation_type:3,context:$(or=$(hr="tableName: ".concat(Et,". getOnly failed with index: ")).call(hr,ir,", matchValue: ")).call(or,ur)},Dt),pr}})},jt.getOne=function(){var Et=this;return Et.getOnly.apply(Et,arguments).then(function(ir){return ir[0]})},jt.clearTable=function(Et){var ir=this;return ir.addTask(function(){ir.checkDB();try{return ir.server.clear(Et).catch(function(ur){throw ir.reportError(ur,{operation_type:3,context:"tableName: ".concat(Et,". clearTable failed")},options),ur})}catch(ur){throw ir.reportError(ur,{operation_type:3,context:"tableName: ".concat(Et,". clearTable failed")},options),ur}})},jt.checkDB=function(){if(!this.enable)throw de({callFunc:"db::checkDB"});if(!this.server)throw _e({callFunc:"db::checkDB"})},t.exports=Lt},function(t,r){var e={version:13},n={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},sessionsWithMoreRoaming:{key:{keyPath:"id"}},msgReadDetail:{key:{keyPath:"idClient"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},superTeam:{key:{keyPath:"teamId"}},superTeamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1},id:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{threadMsgIdClient:{unique:!1},sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msgPin:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1}}},broadcastMsg:{key:{keyPath:"broadcastId"},indexes:{time:{unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};e.keyPath=function(g){return n[g].key.keyPath},e.schema=function(){return window._nimForceSyncIM=!0,n},t.exports=e},function(t,r,e){var n=e(75).fn;n.setKey=function(g,y){return this.put("kv",{key:g,value:y})},n.getKey=function(g){return this.get("kv",g).then(function(y){return y&&y.value})},n.setDonnop=function(g){return this.setKey("donnop",g)},n.getDonnop=function(){return this.getKey("donnop")}},function(t,r,e){var n=e(7),g=e(48),y=e(75).fn;y.getTimetags=function(i){var k={};return this.getAll("timetag",{filter:i,mapper:function($){return k[$.name]=$.value,$}}).then(function(){return k})},y.getTeamMemberTimetags=function(){return this.getTimetags(function(i){var k;return n(k=i.name).call(k,"team-")!==-1})},y.getSuperTeamMemberTimetags=function(){return this.getTimetags(function(i){var k;return n(k=i.name).call(k,"superTeam-")!==-1})},y.getTimetag=function(i){return this.getOne("timetag",null,i).then(function(k){return(k=k||{value:0}).value})},y.getTeamMemberTimetag=function(){return 0},y.updateTimetag=function(i,k){var $=this,L={name:i,value:k};return this.put("timetag",L).catch(function(V){$.notifyError&&$.notifyError(V)})},y.updateMyInfoTimetag=function(i){return this.updateTimetag("myInfo",i)},y.updateRelationTimetag=function(i){return this.updateTimetag("relations",i)},y.getRelationsTimetag=function(){return this.getTimetag("relations")},y.updateFriendTimetag=function(i){return this.updateTimetag("friends",i)},y.getFriendsTimetag=function(){return this.getTimetag("friends")},y.updateFriendUserTimetag=function(i){return this.updateTimetag("friendUsers",i)},y.updateTeamTimetag=function(i){return this.updateTimetag("teams",i)},y.getTeamsTimetag=function(){return this.getTimetag("teams")},y.updateSuperTeamTimetag=function(i){return this.updateTimetag("superTeams",i)},y.getSuperTeamsTimetag=function(){return this.getTimetag("superTeams")},y.updateTeamMemberTimetag=function(i,k){return this.updateTimetag("team-"+i,k)},y.getTeamMembersTimetag=function(i){return this.getTimetag("team-"+i)},y.updateSuperTeamMemberTimetag=function(i,k){return this.updateTimetag("superTeam-"+i,k)},y.getSuperTeamMembersTimetag=function(i){return this.getTimetag("superTeam-"+i)},y.updateMyTeamMembersTimetag=function(i){return this.updateTimetag("myTeamMembers",i)},y.updateMySuperTeamMembersTimetag=function(i){return this.updateTimetag("myInfoInSuperTeams",i)},y.getBroadcastMsgTimetag=function(){return this.getTimetag("broadcastMsg")},y.updateBroadcastMsgTimetag=function(i){return this.updateTimetag("broadcastMsg",g(i))},y.updateRoamingMsgTimetag=function(i){return this.updateTimetag("roamingMsgs",i)},y.updateSuperTeamRoamingMsgTimetag=function(i){return this.updateTimetag("superTeamRoamingMsgs",i)},y.updateMsgReceiptsTimetag=function(i){return this.updateTimetag("msgReceipts",i)},y.updateDonnopTimetag=function(i){return this.updateTimetag("donnop",i)},y.updateSessionAck=function(i){return this.updateTimetag("sessionAck",i)},y.updateDeleteMsgSelf=function(i){return this.updateTimetag("deleteMsgSelf",i)},y.updateSuperTeamSessionAck=function(i){return this.updateTimetag("superTeamSessionAck",i)},y.deleteTimetag=function(i){return this.remove("timetag",i)},y.deleteTeamMemberTimetag=function(i){return this.deleteTimetag("team-"+i)},y.deleteSuperTeamMemberTimetag=function(i){return this.deleteTimetag("superTeam-"+i)}},function(t,r,e){var n=e(3),g=e(75).fn,y=e(0);g.mergeRelations=function(i,k,$,L,V){var z=this,re=z.updateAndDelete("blacklist",i,k),ie=z.updateAndDelete("mutelist",$,L);return n.all([re,ie]).then(function(){return z.logger.info("db::mergeRelations: timetag ".concat(V)),z.updateRelationTimetag(V),[i,k,$,L,V]})},g.getRelations=function(){var i=this.getAll("blacklist"),k=this.getAll("mutelist");return n.all([i,k])},g.markInBlacklist=function(i){if((i=y.copy(i)).isAdd){var k=i.record;return this.put("blacklist",k)}var $=i.account;return this.remove("blacklist",$)},g.markInMutelist=function(i){if((i=y.copy(i)).isAdd){var k=i.record;return this.put("mutelist",k)}var $=i.account;return this.remove("mutelist",$)}},function(t,r,e){var n=e(9),g=e(3),y=e(123),i=e(75).fn,k=e(0);i.mergeFriends=function($,L,V){var z=this;return z.updateAndDelete("friend",$,L).then(function(){return z.logger.log("db::mergeFriends: updateAndDelete done",$&&n($).call($,function(re){return re.account}).join(",")),V&&z.updateFriendTimetag(V),[$,L,V]})},i.putFriend=function($){return this.put("friend",$)},i.updateFriend=function($){var L=this,V=($=k.copy($)).account;return this.getOne("friend",null,V,{modifyObj:$}).then(function(z){return z?L.logger.log("db::updateFriend: ".concat(V)):L.logger.warn("db::updateFriend: no record ".concat(V)),z})},i.deleteFriend=function($){var L=this.remove("friend",$),V=this.deleteUser($);return g.all([L,V])},i.getFriends=function(){var $,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={};L.accountIds!==void 0&&(V=y($=L.accountIds).call($,function(re,ie){return re[ie]=!0,re},{}));var z=function(re){return!!re.valid&&!(L.updateTime!==void 0&&re.updateTime<=L.updateTime)&&!(L.accountIds!==void 0&&!V[re.account])};return this.getAll("friend",{filter:z})},i.getFriend=function($){return this.getOne("friend",null,$)},i.getUserFromBlackList=function($){return this.getOne("blacklist",null,$)}},function(t,r,e){var n=e(3),g=e(2),y=e(6),i=e(123),k=e(9),$=e(75).fn,L=e(0),V=e(41),z=e(194),re=e(152);function ie(oe){return oe.valid&&oe.validToCurrentUser}function ue(oe){return oe&&oe.valid}function le(oe){return oe&&L.fillUndef(oe,{mute:!1,custom:""}),oe}$.mergeTeams=function(oe,ae,Ue){var de=this,_e=de.put("team",oe),Ve=de.leaveTeams(ae,Ue);return n.all([_e,Ve]).then(function(){return de.logger.log("db::mergeTeams:"),de.updateTeamTimetag(Ue),[oe,ae,Ue]})},$.putTeam=function(oe){if(oe)return L.isArray(oe)||(oe=[oe]),g(oe).call(oe,function(ae){ae.validToCurrentUser=!0}),this.put("team",oe)},$.updateTeam=function(oe){var ae=this,Ue=(oe=L.copy(oe)).teamId;return ae.getOne("team",null,Ue,{modifyObj:oe}).then(function(de){if(de)ae.logger.log("db::updateTeam: ".concat(Ue));else if(ae.logger.warn("db::updateTeam: no record ".concat(Ue)),oe.validToCurrentUser)return ae.putTeam(oe);return de})},$.transferTeam=function(oe,ae,Ue){var de=this,_e=oe.teamId,Ve=oe.memberUpdateTime,$e={teamId:_e,account:ae,type:"normal",updateTime:Ve},Lt={teamId:_e,account:Ue,type:"owner",updateTime:Ve};return de.updateTeamMembers([$e,Lt]).then(function(){return de.putTeam(oe).then(function(){var jt,Et;return de.logger.info(y(jt=y(Et="db::transferTeam: ".concat(oe.teamId," ")).call(Et,ae," -> ")).call(jt,Ue)),[oe,ae,Ue]})})},$.leaveTeam=function(oe){var ae=this;return ae.updateTeam({teamId:oe,validToCurrentUser:!1}).then(function(){return ae.removeAllTeamMembers(oe)})},$.dismissTeam=function(oe,ae){var Ue=this,de={teamId:oe,valid:!1,validToCurrentUser:!1,updateTime:ae};return Ue.updateTeam(de).then(function(){return Ue.removeAllTeamMembers(oe)})},$.leaveTeams=function(oe,ae){var Ue,de=this,_e=[];return g(oe).call(oe,function(Ve){Ue=de.leaveTeam(Ve.teamId,ae),_e.push(Ue)}),n.all(_e)},$.getTeamsByTeamIds=function(oe){var ae,Ue=this,de=[];return g(oe).call(oe,function(_e){ae=Ue.getTeam(_e),de.push(ae)}),n.all(de)},$.getTeam=function(oe){oe=""+oe;var ae=this;return ae.getOne("team",null,oe).then(function(Ue){return Ue?(ae.updateTeamProperties([Ue]),Ue):null})},$.getTeams=function(){var oe,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ue={};ae.teamIds!==void 0&&(Ue=i(oe=ae.teamIds).call(oe,function(_e,Ve){return _e[Ve]=!0,_e},{}));var de=function(_e){return!!ie(_e)&&!(ae.teamIds!==void 0&&!Ue[_e.teamId])};return this.getAll("team",{filter:de})},$.updateTeamProperties=function(oe){g(oe).call(oe,function(ae){ae&&z.fillProperties(ae)})},$.mergeTeamMembers=function(oe,ae,Ue,de){var _e=this,Ve=_e.putTeamMembers(ae),$e=_e.updateTeamMembers(Ue);return n.all([Ve,$e]).then(function(){return _e.logger.log("db::mergeTeamMembers: ".concat(oe)),_e.updateTeamMemberTimetag(oe,de)})},$.putTeamMembers=function(oe){return this.put("teamMember",oe)},$.getTeamMembersByAccount=function(oe){return this.getOnly("teamMember","account",oe,{filter:ue,mapper:le}).then()},$.getTeamMembers=function(){var oe,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ue={};ae.accountIds!==void 0&&(Ue=i(oe=ae.accountIds).call(oe,function($e,Lt){return $e[Lt]=!0,$e},{}));var de,_e={};ae.teamIds!==void 0&&(_e=i(de=ae.teamIds).call(de,function($e,Lt){return $e[Lt]=!0,$e},{}));var Ve=function($e){return!!$e.valid&&!(ae.teamIds!==void 0&&!_e[$e.teamId])&&!(ae.accountIds!==void 0&&!Ue[$e.account])};return this.getAll("teamMember",{filter:Ve})},$.getTeamMembersByTeamId=function(oe){return this.getOnly("teamMember","teamId",oe,{filter:ue,mapper:le})},$.getTeamMembersById=function(oe){return this.getOnly("teamMember",null,oe,{filter:ue,mapper:le})},$.updateTeamMemberProperties=function(oe){var ae,Ue=this,de=[];return g(oe).call(oe,function(_e){re.fillProperties(_e)&&(ae=Ue.updateTeamMember(_e),de.push(ae))}),n.all(de)},$.getInvalidTeamMembers=function(oe,ae){var Ue=this;oe=""+oe;var de,_e=[];return g(ae).call(ae,function(Ve){de=Ue.getOne("teamMember",null,re.genId(oe,Ve)).then(function($e){return le($e)}),_e.push(de)}),n.all(_e)},$.updateTeamMember=function(oe){var ae=this,Ue=oe.teamId,de=oe.account,_e=re.genId(Ue,de),Ve=L.filterObj(oe,"nickInTeam muteTeam mute custom updateTime type valid followAccountIds");return this.getOne("teamMember",null,_e,{modifyObj:Ve,mapper:le}).then(function($e){var Lt,jt;return $e?ae.logger.log(y(Lt="db::updateTeamMember: ".concat(Ue," ")).call(Lt,de),L.pickAsString(Ve,["muteTeam","mute","updateTime","type","valid"])):ae.logger.warn(y(jt="db::updateTeam: no record ".concat(Ue," ")).call(jt,de)),$e})},$.updateTeamMembers=function(oe){var ae=this;if(!oe.length)return n.resolve();var Ue,de=[];return g(oe).call(oe,function(_e){Ue=ae.updateTeamMember(_e),de.push(Ue)}),n.all(de)},$.updateTeamManagers=function(oe,ae,Ue,de){var _e=k(ae).call(ae,function(Ve){return{teamId:oe,account:Ve,type:Ue?"manager":"normal",updateTime:de}});return this.updateTeamMembers(_e)},$.removeTeamMembersByAccounts=function(oe,ae){var Ue=k(ae).call(ae,function(de){return{teamId:oe,account:de,valid:!1}});return this.updateTeamMembers(Ue)},$.removeAllTeamMembers=function(oe){var ae=this;return ae.getOnly("teamMember","teamId",oe,{modifyObj:{valid:!1}}).then(function(){return ae.logger.warn("db::removeAllTeamMembers: ".concat(oe)),ae.deleteTeamMemberTimetag(oe)})},$.deleteTeamMembers=function(oe){var ae=this;return ae.getOnly("teamMember","teamId",oe,{remove:!0}).then(function(){ae.logger.warn("db::deleteTeamMembers: ".concat(oe)),ae.deleteTeamMemberTimetag(oe)})},$.deleteTeam=function(oe){var ae,Ue=this,de=[];return L.isArray(oe)||(oe=[oe]),g(oe).call(oe,function(_e){_e=""+_e,ae=Ue.get("team",_e).then(function(Ve){if(Ve&&ie(Ve))throw V.stillInTeamError({callFunc:"team::deleteTeam",team:Ve});var $e=Ue.remove("team",_e),Lt=Ue.deleteTeamMembers(_e);return n.all([$e,Lt])}),de.push(ae)}),de.length===1?de[0]:n.all(de)}},function(t,r,e){var n=e(3),g=e(2),y=e(10),i=e(6),k=e(9),$=e(75).fn,L=e(0),V=e(41),z=e(308),re=e(203);function ie(oe){return oe.valid&&oe.validToCurrentUser}function ue(oe){return oe&&oe.valid}function le(oe){return oe&&L.fillUndef(oe,{mute:!1,custom:""}),oe}$.mergeSuperTeams=function(oe,ae,Ue){var de=this,_e=de.put("superTeam",oe),Ve=de.leaveTeams(ae,Ue);return n.all([_e,Ve]).then(function(){return de.logger.log("db::mergeSuperTeams:"),de.updateSuperTeamTimetag(Ue),[oe,ae,Ue]})},$.putSuperTeam=function(oe){if(oe)return L.isArray(oe)||(oe=[oe]),g(oe).call(oe,function(ae){ae.validToCurrentUser=!0}),this.put("superTeam",oe)},$.updateSuperTeam=function(oe){var ae=this,Ue=(oe=L.copy(oe)).teamId;return ae.getOne("superTeam",null,Ue,{modifyObj:oe}).then(function(de){return de?(ae.logger.info("db::updateSuperTeam: ".concat(Ue)),de):(ae.logger.warn("db::updateSuperTeam: no record ".concat(Ue)),ae.putSuperTeam(oe))})},$.leaveSuperTeam=function(oe){var ae=this;return ae.updateSuperTeam({teamId:oe,validToCurrentUser:!1}).then(function(){return ae.removeAllSuperTeamMembers(oe)})},$.dismissSuperTeam=function(oe,ae){var Ue=this,de={teamId:oe,valid:!1,validToCurrentUser:!1,updateTime:ae};return Ue.updateSuperTeam(de).then(function(){return Ue.removeAllSuperTeamMembers(oe)})},$.leaveSuperTeams=function(oe,ae){var Ue,de=this,_e=[];return g(oe).call(oe,function(Ve){Ue=de.leaveSuperTeam(Ve.teamId,ae),_e.push(Ue)}),n.all(_e)},$.getSuperTeamsByTeamIds=function(oe){var ae,Ue=this,de=[];return g(oe).call(oe,function(_e){ae=Ue.getSuperTeam(_e),de.push(ae)}),n.all(de)},$.getSuperTeam=function(oe){oe=""+oe;var ae=this;return ae.getOne("superTeam",null,oe).then(function(Ue){return Ue?(ae.updateSuperTeamProperties([Ue]),Ue):null})},$.getSuperTeams=function(){var oe=this;return oe.getAll("superTeam",{filter:ie}).then(function(ae){return oe.updateSuperTeamProperties(ae),ae})},$.updateSuperTeamProperties=function(oe){g(oe).call(oe,function(ae){ae&&z.fillProperties(ae)})},$.mergeSuperTeamMembers=function(oe,ae,Ue,de){var _e=this,Ve=_e.putSuperTeamMembers(ae),$e=_e.updateSuperTeamMembers(Ue);return n.all([Ve,$e]).then(function(){return _e.logger.log("db::mergeSuperTeamMembers: ".concat(oe)),de!=null?_e.updateSuperTeamMemberTimetag(oe,de):n.resolve()})},$.getSuperTeamMembersByTeamId=function(oe){return this.getOnly("superTeamMember","teamId",oe,{filter:ue,mapper:le}).then()},$.getSuperTeamMembersById=function(oe){return this.getOnly("superTeamMember",null,oe,{filter:ue,mapper:le}).then()},$.putSuperTeamMembers=function(oe){return this.put("superTeamMember",oe)},$.getSuperTeamMemberById=function(oe){return this.get("superTeamMember",oe)},$.getSuperTeamMembers=function(oe,ae){var Ue=this;oe=""+oe;var de={filter:function(_e){return _e.valid},mapper:le};if(ae){if(typeof ae.joinTime!="number")return void Ue.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ",ae.joinTime);ae.limit&&(de.limit=ae.limit),y(ae)?de.filter=function(_e){return _e.valid&&_e.joinTime<=ae.joinTime}:de.filter=function(_e){return _e.valid&&_e.joinTime>=ae.joinTime}}return Ue.getOnly("superTeamMember","teamId",oe,de).then(function(_e){return Ue.updateSuperTeamMemberProperties(_e).then(function(){return _e})})},$.getSuperTeamMembersByAccount=function(oe){return this.getOnly("superTeamMember","account",oe,{filter:ue,mapper:le}).then()},$.updateSuperTeamMemberProperties=function(oe){var ae,Ue=this,de=[];return g(oe).call(oe,function(_e){re.fillProperties(_e)&&(ae=Ue.updateSuperTeamMember(_e),de.push(ae))}),n.all(de)},$.getInvalidSuperTeamMembers=function(oe,ae){var Ue=this;oe=""+oe;var de,_e=[];return g(ae).call(ae,function(Ve){de=Ue.getOne("superTeamMember","id",re.genId(oe,Ve)).then(function($e){return le($e)}),_e.push(de)}),n.all(_e)},$.updateSuperTeamMember=function(oe){var ae=this,Ue=oe.teamId,de=oe.account,_e=re.genId(Ue,de),Ve=L.filterObj(oe,"nickInTeam muteTeam mute custom updateTime type valid followAccountIds");return this.getOne("superTeamMember","id",_e,{modifyObj:Ve,mapper:le}).then(function($e){var Lt,jt;return $e?ae.logger.log(i(Lt="db::updateSuperTeamMember: ".concat(Ue," ")).call(Lt,de),L.pickAsString(Ve,["muteTeam","mute","updateTime","type","valid"])):ae.logger.warn(i(jt="db::updateSuperTeam: no record ".concat(Ue," ")).call(jt,de)),$e})},$.updateSuperTeamMembers=function(oe){var ae=this;if(!oe.length)return n.resolve();var Ue,de=[];return g(oe).call(oe,function(_e){Ue=ae.updateSuperTeamMember(_e),de.push(Ue)}),n.all(de)},$.removeSuperTeamMembersByAccounts=function(oe,ae){var Ue=k(ae).call(ae,function(de){return{teamId:oe,account:de,valid:!1}});return this.updateSuperTeamMembers(Ue)},$.removeAllSuperTeamMembers=function(oe){var ae=this;return ae.getOnly("superTeamMember","teamId",oe,{modifyObj:{valid:!1}}).then(function(){return ae.logger.warn("db::removeAllSuperTeamMembers: ".concat(oe)),ae.deleteSuperTeamMemberTimetag(oe)})},$.deleteSuperTeamMembers=function(oe){var ae=this;return ae.getOnly("superTeamMember","teamId",oe,{remove:!0}).then(function(){ae.logger.warn("db::deleteSuperTeamMembers: ".concat(oe)),ae.deleteSuperTeamMemberTimetag(oe)})},$.deleteSuperTeam=function(oe){var ae,Ue=this,de=[];return L.isArray(oe)||(oe=[oe]),g(oe).call(oe,function(_e){_e=""+_e,ae=Ue.get("superTeam",_e).then(function(Ve){if(Ve&&ie(Ve))throw V.stillInTeamError({callFunc:"team::deleteTeam",team:Ve});var $e=Ue.remove("superTeam",_e),Lt=Ue.deleteSuperTeamMembers(_e);return n.all([$e,Lt])}),de.push(ae)}),de.length===1?de[0]:n.all(de)},$.transferSuperTeam=function(oe,ae,Ue){var de=this;return de.updateSuperTeamMembers([ae,Ue]).then(function(){return de.putSuperTeam(oe).then(function(){var _e,Ve;return de.logger.info(i(_e=i(Ve="db::transferSuperTeam: ".concat(oe.teamId," ")).call(Ve,ae.account," -> ")).call(_e,Ue.account)),[oe,ae,Ue]})})}},function(t,r,e){var n=e(2),g=e(3),y=e(123),i=e(75).fn,k=e(0);i.mergeMyInfo=function($,L){var V=this;return V.put("user",$).then(function(){return L?V.updateMyInfoTimetag($.updateTime):$})},i.mergeFriendUsers=function($,L){var V=this;return V.putUsers($).then(function(){V.updateFriendUserTimetag(L)})},i.putUsers=function($){return this.put("user",$)},i.putUser=function($){return this.put("user",$)},i.updateUser=function($){var L=this,V=($=k.copy($)).account;return this.getOne("user",null,V,{modifyObj:$}).then(function(z){return z?L.logger.log("db::updateUser: ".concat(V)):L.logger.warn("db::updateUser: no record ".concat(V)),z})},i.putUsersIfIsFriend=function($){var L,V=this,z=[],re=[];return n($).call($,function(ie){L=V.getFriend(ie.account).then(function(ue){return ue&&(L=V.putUser(ie),re.push(L)),ue}),z.push(L)}),g.all(z).then(function(){return g.all(re).then(function(ie){return ie})})},i.deleteUser=function($){return this.remove("user",$)},i.getUser=function($){return this.getOne("user",null,$)},i.getUsers=function(){var $,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={};L.accountIds!==void 0&&(V=y($=L.accountIds).call($,function(re,ie){return re[ie]=!0,re},{}));var z=function(re){return!(L.accountIds!==void 0&&!V[re.account])};return this.getAll("user",{filter:z})},i.getAllUsers=function(){return this.getAll("user")}},function(t,r,e){var n=e(16),g=e(3),y=e(6),i=e(2),k=e(37),$=e(32),L=e(7),V=e(122),z=e(9),re=e(75).fn,ie=e(0),ue=e(11);re.putMsg=function(le){var oe=this;return ie.isArray(le)||(le=[le]),!le.length||n(le[0])?g.resolve():(le=n(le).call(le,function(ae){return!ae.ignore}),oe.put("msg1",le).catch(function(ae){return oe.notifyError&&oe.notifyError(ae),g.resolve(le,ae)}))},re.putMsgReadDetail=function(le){var oe=this;if(le.idClient)return this.put("msgReadDetail",le).catch(function(ae){oe.logger.error("putMsgReadDetail error",ae)})},re.getMsgReadDetail=function(le){return this.getOne("msgReadDetail",null,le)},re.updateMsg=function(le){var oe=this;if(!n(le)){var ae=le.idClient,Ue=ie.filterObj(le,"resend status idServer time localCustom commentTimetag comments hasSendAck callbackExt");return oe.getOne("msg1",null,ae,{modifyObj:Ue}).then(function(de){var _e,Ve,$e;return de?oe.logger.info(y(_e=y(Ve=y($e="db::updateMsg: ".concat(ae,"idServer: ")).call($e,Ue.idServer,"status: ")).call(Ve,Ue.status,"time: ")).call(_e,Ue.time)):oe.logger.warn("db::updateMsg: no record ".concat(ae)),de}).catch(function(de){return oe.notifyError&&oe.notifyError(de),g.resolve(le)})}},re.updateMsgBatch=function(le){var oe=this;if(ue.isRN)this.logger.warn("react native can not support updateMsgBatch");else{this.checkDB();var ae=this.server.getIndexedDB().transaction(["msg1"],"readwrite").objectStore("msg1");i(le).call(le,function(Ue){if(Ue.idClient){var de=ae.get(Ue.idClient);de.onerror=function(_e){oe.logger.error("updateMsgBatch::store.get:error",_e)},de.onsuccess=function(){var _e=de.result||Ue;ae.put(k({},_e,Ue)).onerror=function(Ve){oe.logger.error("updateMsgBatch::store.put:error",Ve)}}}})}},re.getMsgs=function(le){return ue.isBrowser?this.getMsgsIndexedDB(le):ue.isRN?this.getMsgsRN(le):g.resolve()},re.getSubMessages=function(le){return ue.isBrowser?this.getSubMessagesIndexedDB(le):g.resolve([])},re.getMsgsRN=function(le){var oe={};return typeof le.start=="number"&&(oe.lowerBound=["time",le.start]),typeof le.end=="number"&&le.end!==1/0&&(oe.upperBound=["time",le.end]),oe.desc=!1,oe.index="time",typeof le.desc=="boolean"&&(oe.desc=le.desc),typeof le.limit=="number"&&(oe.limit=le.limit),oe.searchIndex=[],le.sessionId&&oe.searchIndex.push(["sessionId",le.sessionId]),typeof le.type=="string"&&oe.searchIndex.push(["type",le.type]),this.getAll("msg1",oe)},re.getMsgsIndexedDB=function(le){var oe,ae=this;ae.checkDB();var Ue="time",de=!1,_e=!1,Ve=(le=le||{}).sessionId||[],$e=le.sessionIds||[];ie.isString(Ve)?Ve=[Ve]:$(Ve)||(Ve=[]),ie.isString($e)?$e=[$e]:$($e)||($e=[]);var Lt=y(Ve).call(Ve,$e);Lt.length===1?(de=!0,Ue="sessionTime",Ve=Lt[0]):Lt.length>1&&(de=!0,_e=!0,$e=Lt);var jt=le.start||0,Et=le.end||1/0,ir=jt,ur=Et;de&&!_e&&(ir=[Ve,jt],ur=[Ve,Et]);var Dt=le.desc!==!1,lr=le.limit||100,sr=!1,er=!1,cr=le.type||[],or=le.types||[];ie.isString(cr)?cr=[cr]:$(cr)||(cr=[]),ie.isString(or)?or=[or]:$(or)||(or=[]);var hr=y(cr).call(cr,or);hr.length===1?(sr=!0,cr=hr[0]):hr.length>1&&(sr=!0,er=!0,or=hr);var pr,Tr=le.subTypes&&le.subTypes.length,Pr=le.keyword||"",_r=le.filterFunc;return(_e||sr||Pr||Tr||ie.isFunction(_r))&&(pr=function(Mr){var rr;if(_e&&L($e).call($e,Mr.sessionId)===-1)return!1;if(sr){if(er){if(L(or).call(or,Mr.type)===-1)return!1}else if(cr!==Mr.type)return!1}if(Tr&&L(rr=le.subTypes).call(rr,Mr.subType)===-1)return!1;if(Pr){var kr=Mr.text||Mr.tip||"";if(L(kr).call(kr,Pr)===-1)return!1}return!_r||_r(Mr)}),n(oe=ae.server.query("msg1",Ue).bound(ir,ur,!0,!0).desc(Dt).limit(lr)).call(oe,pr).execute().catch(function(Mr){throw ae.reportError(Mr,{operation_type:3,context:"tableName: ".concat("msg1",", index ").concat(Ue,", getMsgsIndexedDB error")},le),Mr})},re.getSubMessagesIndexedDB=function(le){var oe=this;return oe.checkDB(),oe.getOnly("msg1","threadMsgIdClient",le).then(function(ae){var Ue;return V(Ue=ae||[]).call(Ue,function(de,_e){return de.time-_e.time})}).catch(function(ae){throw oe.reportError(ae,{operation_type:3,context:"tableName: ".concat("msg1",", IndexThreadMsgIdClient ").concat(le,", getSubMessagesIndexedDB error")}),ae})},re.getMsgCountAfterAck=function(le){return ue.isBrowser?this.getMsgCountAfterAckIndexedDB(le):ue.isRN?this.getMsgCountAfterAckRN(le):g.resolve()},re.getMsgCountAfterAckRN=function(le){var oe=this,ae=le=le||{},Ue=ae.sessionId,de=ae.ack;return oe.checkDB(),oe.getAll("msg1",{searchIndex:["sessionId",Ue],lowerBound:["time",de]}).then(function(_e){var Ve=n(_e).call(_e,function($e){if($e.flow==="out"||$e.isUnreadable===!1)return!1;if($e.type==="notification")try{return le.shouldCountNotifyUnread($e)}catch(Lt){throw oe.logger.error("userOption:shouldCountNotifyUnread function error",Lt),Lt}return!0});return g.resolve(Ve.length)})},re.getMsgCountAfterAckIndexedDB=function(le){var oe=this,ae=(le=le||{}).sessionId;return oe.checkDB(),oe.server.query("msg1","sessionTime").bound([ae,le.ack],[ae,1/0],!0,!0).execute().then(function(Ue){var de=n(Ue).call(Ue,function(_e){if(_e.flow==="out"||_e.isUnreadable===!1)return!1;if(_e.type==="notification")try{return le.shouldCountNotifyUnread(_e)}catch(Ve){throw oe.logger.error("userOption:shouldCountNotifyUnread function error",Ve),Ve}return!0});return g.resolve(de.length)}).catch(function(Ue){throw oe.reportError(Ue,{operation_type:3,context:"tableName: ".concat("msg1",", IndexSessionTime ").concat("sessionTime",", getMsgCountAfterAckIndexedDB error")},le),Ue})},re.amendMsg=function(le){return le?(ie.notexist(le.text)&&(le.text=""),le):null},re.getMsgByIdClient=function(le){var oe=this;return oe.getOne("msg1",null,le).then(function(ae){return oe.amendMsg(ae)})},re.getMsgsByIdClients=function(le){var oe,ae=this,Ue=[];return i(le).call(le,function(de){oe=ae.getMsgByIdClient(de),Ue.push(oe)}),g.all(Ue)},re.clearSendingMsgs=function(){var le=this;return le.getOnly("msg1","status","sending",{modifyObj:{status:"fail"}}).then(function(oe){le.logger.info("db::clearSendingMsgs: msgs send failed",oe&&z(oe).call(oe,function(ae){return ae.idClient}).join(","))})},re.deleteMsg=function(le){var oe,ae=this,Ue=[];return ie.isArray(le)||(le=[le]),i(le).call(le,function(de){oe=ae.getOne("msg1",null,de,{remove:!0}).then(function(_e){return ae.logger.info("db::deleteMsg done",de,_e&&_e.idClient),_e}).catch(function(_e){throw ae.logger.error("db::deleteMsg failed",de,_e),_e}),Ue.push(oe)}),Ue.length===1?Ue[0]:g.all(Ue)},re.deleteMsgsBySessionId=function(le){var oe=this,ae=null,Ue=le.start,de=le.end;return Ue!==void 0&&de!==void 0?ae=function(_e){return _e>Ue&&_e<de}:Ue!==void 0?ae=function(_e){return _e>Ue}:de!==void 0&&(ae=function(_e){return _e<de}),ae?oe.getOnly("msg1","sessionId",le.sessionId).then(function(_e){var Ve=[];return z(_e=_e||[]).call(_e,function($e){ae($e.time)&&Ve.push($e.idClient)}),oe.logger.info("db::deleteMsgsBySessionId: session results",Ve),oe.deleteMsg(Ve)}):oe.getOnly("msg1","sessionId",le.sessionId,{remove:!0})},re.deleteMsgsByTime=function(le){return this.remove("msg1",null,"time",le.start,le.end,!0,!0)},re.getDeletedMsgsCountByTime=function(le){this.checkDB();var oe=this.server.getIndexedDB().transaction(["msg1"],"readonly").objectStore("msg1").index("time"),ae=IDBKeyRange.bound(le.start,le.end,!0,!0),Ue=oe.count(ae);return new g(function(de,_e){Ue.onsuccess=function(Ve){de(Ve.target.result)},Ue.onerror=function(Ve){this.logger.error("countDeletedMsgsByTime::index.count:error",Ve),_e(Ve)}})},re.deleteAllMsgs=function(){var le=this.clearTable("msg1"),oe=this.clearTable("session");return g.all([le,oe])},re.getMsgPins=function(le){return this.getOnly("msgPin","sessionId",le)},re.deleteMsgPins=function(le){return this.getOnly("msgPin","sessionId",le,{remove:!0})},re.putMsgPin=function(le){var oe=this;return this.modifyOrPut({table:"msgPin",obj:le,key:"idClient"}).catch(function(ae){oe.notifyError&&oe.notifyError(ae)})},re.putMsgPins=function(le){return this.put("msgPin",le)},re.deleteMsgPin=function(le){var oe=this;return this.getOne("msgPin",null,le.idClient,{remove:!0}).then(function(ae){return oe.logger.info("db::deleteMsgPin:",ae.idClient),ae})}},function(t,r,e){var n=e(3),g=e(16),y=e(2),i=e(10),k=e(4),$=e(75).fn,L=e(0),V=L.notundef;$.putSysMsg=function(z){var re=this;return new n(function(ie){if(L.isArray(z)||(z=[z]),!g(z[0])){var ue=[],le=z.length;y(z).call(z,function(ae){ae=L.copy(ae),re.put("sysMsg",ae).then(function(Ue){ue.push(Ue[0]),oe()},oe)})}function oe(){--le===0&&ie(ue)}})},$.getSysMsgs=function(z){var re=!i(z=z||{}),ie=z.limit||100,ue=null,le=null;z.category&&(ue="category",le=z.category),z.type&&(ue="type",le=z.type);var oe,ae=z.lastIdServer,Ue=!1,de=z.read;return(V(ae)||V(de))&&(oe=function(_e){return V(ae)?(ae=""+ae,Ue?Ve():(_e.idServer===ae&&(Ue=!0),!1)):Ve();function Ve(){return!V(de)||_e.read===de}}),z={filter:oe,desc:re,limit:ie},ue?this.getOnly("sysMsg",ue,le,z):this.getAll("sysMsg",z)},$.getSysMsgByIdServer=function(z){return this.getOne("sysMsg","idServer",z)},$.updateSysMsg=function(z){var re=this;if(!g(z)){var ie=""+z.idServer,ue=L.filterObj(z,"read state error localCustom");return this.getOne("sysMsg","idServer",ie,{modifyObj:ue}).then(function(le){return le?re.logger.log("db::updateSysMsg: ".concat(ie),L.pickAsString(ue,["read","state","error"])):re.logger.warn("db::updateSession: ".concat(ie)),le})}},$.markSysMsgRead=function(z){var re=this;return new n(function(ie,ue){L.isArray(z)||(z=[z]);var le,oe,ae=[],Ue=[];y(z).call(z,function(de){le=re.getSysMsgByIdServer(de.idServer).then(function(_e){_e&&!_e.read&&(oe=re.updateSysMsg({idServer:_e.idServer,read:!0}),Ue.push(oe))},ue),ae.push(le)}),n.all(ae).then(function(){n.all(Ue).then(function(de){ie(de)},ue)},ue)})},$.deleteSysMsg=function(z){var re,ie=this,ue=[];return L.isArray(z)||(z=[z]),y(z).call(z,function(le){le=""+le,re=ie.getOne("sysMsg","idServer",le,{remove:!0}),ue.push(re)}),ue.length===1?ue[0]:n.all(ue)},$.deleteAllSysMsgs=function(){var z=this.clearTable("sysMsg"),re=this.clearTable("sysMsgUnread");return n.all([z,re])},$.getSysMsgUnread=function(){return this.getAll("sysMsgUnread").then(function(z){var re={};return y(z).call(z,function(ie){re[ie.type]=ie.num}),re})},$.updateSysMsgUnread=function(z){var re,ie=this;z=L.copy(z);var ue=[];return y(re=k(z)).call(re,function(le){ue.push({type:le,num:z[le]})}),this.put("sysMsgUnread",ue).then(function(){return ie.logger.info("db::updateSysMsgUnread: ",z),z})}},function(t,r,e){var n=e(3),g=e(2),y=e(75).fn,i=e(0);y.putBroadcastMsg=function(k){var $=this;return new n(function(L){i.isArray(k)||(k=[k]);var V=[],z=k.length;function re(){--z===0&&L(V)}g(k).call(k,function(ie){ie=i.copy(ie),$.put("broadcastMsg",ie).then(function(ue){V.push(ue[0]),re()},re)})})},y.getBroadcastMsgs=function(k){return k=k||{},this.getAll("broadcastMsg",k)}},function(t,r,e){var n=e(3),g=e(10),y=e(6),i=e(32),k=e(2),$=e(75).fn,L=e(0),V=L.notundef;$.putSession=function(z){var re=this,ie=z.unread;return(z=L.merge({},z)).updateTime===void 0&&z.lastMsg&&z.lastMsg.time&&(z.updateTime=z.lastMsg.time),(z.lastMsg||!z.ack&&!z.msgReceiptTime)&&(z.isDeleted=!1),delete z.unread,this.modifyOrPut({table:"session",obj:z,key:"id",modifyObjWhenPut:{unread:0}}).catch(function(ue){return re.notifyError&&re.notifyError(ue),z.unread=ie,n.resolve(z)})},$.getAllSessions=function(){return this.getAll("session",{index:"updateTime",desc:!0}).catch(function(z){self.notifyError&&self.notifyError(z)})},$.getSessions=function(z){var re=!g(z=z||{}),ie=z.limit||100,ue=z.lastSessionId,le=z.sessionId,oe=!1,ae=this,Ue=function(){return!0},de=function(){return!0};return V(le)?this.getSession(le,z.isDeleted):(V(ue)&&(Ue=function(_e){return _e.id===ue&&(oe=!0),oe}),z.includeDeleted||(de=function(_e){return!_e.isDeleted}),this.getAll("session",{index:"updateTime",desc:re,limit:ie,filter:function(_e){return Ue(_e)&&de(_e)}}).catch(function(_e){ae.notifyError&&ae.notifyError(_e)}))},$.getSession=function(z,re){var ie=this;return this.get("session",z).then(function(ue){return n.resolve(!re&&ue&&ue.isDeleted?void 0:ue)}).catch(function(ue){throw ie.notifyError&&ie.notifyError(ue),ue})},$.updateSession=function(z){var re=this,ie=z.id,ue=L.filterObj(z,"ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");return z.lastMsg&&(ue.lastMsg=z.lastMsg),this.getOne("session",null,ie,{modifyObj:ue}).then(function(le){if(le){var oe,ae=y(oe="db::updateSession: ".concat(ie," ")).call(oe,L.pickAsString(ue,["ack","unread","msgReceiptTime","msgReceiptServerTime","isTop","isDeleted"]));ae+=ue.lastMsg?" lastMsg.idClient:".concat(L.get(ue,"lastMsg.idClient")):"",re.logger.info(ae)}else re.logger.warn("db::updateSession: no record ".concat(ie));return le}).catch(function(le){re.notifyError&&re.notifyError(le)})},$.getStickTopSessions=function(){var z=this;return this.getAll("session",{filter:function(re){return re&&re.isTop}}).catch(function(re){z.notifyError&&z.notifyError(re)})},$.deleteSession=function(z,re){var ie=re&&re.scene||"";return ie==="superTeam"?this.updateSuperTeamSessionAck(0):(ie==="p2p"||ie==="team"||this.updateSuperTeamSessionAck(0),this.updateSessionAck(0)),this.updateMsgReceiptsTimetag(0),this.remove("session",z)},$.deleteSessionLogic=function(z){var re=this;if(!i(z))return this.getOne("session",null,z,{modifyObj:{isDeleted:!0}});var ie=[];return k(z).call(z,function(ue){ie.push(re.getOne("session",null,ue,{modifyObj:{isDeleted:!0}}))}),n.all(ie)},$.putSessionsWithMoreRoaming=function(z){return this.put("sessionsWithMoreRoaming",z)},$.updateSessionsWithMoreRoaming=function(z){var re=z.id;return delete z.id,this.getOne("sessionsWithMoreRoaming",null,re,{modifyObj:z})},$.deleteSessionsWithMoreRoaming=function(z){return this.remove("sessionsWithMoreRoaming",z)},$.getSessionsWithMoreRoaming=function(z){return z?this.get("sessionsWithMoreRoaming",z):this.getAll("sessionsWithMoreRoaming")}},function(t,r,e){var n=e(6),g=e(92),y=e(93),i=e(0).throttle,k=function(){function $(L){g(this,$),this.arr=[],this.timer=null,this.maxLength=L.maxLength||100,this.throttleTime=L.throttleTime||5e3,this.processFn=L.processFn||function(){},this.throttleFn=L.processFn||function(){},L.processFn&&(this.throttleFn=i(function(V){L.processFn(V),V.length=0},this.throttleTime,{leading:!1}))}return y($,[{key:"add",value:function(L){var V;Object.prototype.toString.call(L)==="[object Array]"?this.arr=n(V=this.arr).call(V,L):this.arr.push(L),this.arr.length>=this.maxLength&&(this.processFn(this.arr),this.arr=[]),this.timer=this.throttleFn(this.arr)}},{key:"destroy",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer),this.processFn=function(){},this.throttleFn=function(){}}},{key:"clear",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer)}}]),$}();t.exports=k},function(t,r,e){var n=e(51),g=e(37),y=e(60),i=e(2),k=e(16),$=e(4),L=e(52),V=e(53),z=e(54),re=e(55),ie=e(43),ue=e(92),le=e(93);function oe(Ue,de){var _e=$(Ue);if(L){var Ve=L(Ue);de&&(Ve=k(Ve).call(Ve,function($e){return V(Ue,$e).enumerable})),_e.push.apply(_e,Ve)}return _e}var ae={user_id:"",trace_id:"",duration:0,start_time:0,history:[]};t.exports=function(){function Ue(de){ue(this,Ue),this.clientProto=de,this.reset()}return le(Ue,[{key:"reset",value:function(){this.traceData=g({},ae),this.traceData.history=[]}},{key:"start",value:function(){this.reset(),this.traceData.start_time=y()}},{key:"updateBegin",value:function(de){this.traceData.history.push(function(_e){for(var Ve=1;Ve<arguments.length;Ve++){var $e,Lt,jt=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?i($e=oe(Object(jt),!0)).call($e,function(Et){n(_e,Et,jt[Et])}):z?re(_e,z(jt)):i(Lt=oe(Object(jt))).call(Lt,function(Et){ie(_e,Et,V(jt,Et))})}return _e}({head:"",body:"",start_time:y(),httpdns:!1,index:0},de))}},{key:"updateComplete",value:function(de){var _e;i(_e=this.traceData.history).call(_e,function(Ve){Ve.target===de.target&&(g(Ve,de),Ve.duration=y()-Ve.start_time)})}},{key:"end",value:function(de){var _e;if(this.traceData.succeed=de,this.traceData.history=k(_e=this.traceData.history).call(_e,function($e){return $e.code!==void 0}),this.traceData.history.length!==0){this.traceData.duration=y()-this.traceData.start_time;var Ve=this.clientProto.checkNetworkAvailable();this.traceData.net_type=0,this.traceData.net_connect=Ve,this.clientProto.reporter.report("nim_sdk_lbs_records",this.traceData),this.reset()}else this.reset()}}]),Ue}()},function(t,r,e){var n=e(22),g=e(51),y=e(60),i=e(8),k=e(314),$=e(6),L=e(3),V=e(24),z=e(16),re=e(7),ie=e(15),ue=e(26),le=e(2),oe=e(126),ae=e(4),Ue=e(52),de=e(53),_e=e(54),Ve=e(55),$e=e(43);function Lt(or,hr){var pr=ae(or);if(Ue){var Tr=Ue(or);hr&&(Tr=z(Tr).call(Tr,function(Pr){return de(or,Pr).enumerable})),pr.push.apply(pr,Tr)}return pr}function jt(or){for(var hr=1;hr<arguments.length;hr++){var pr,Tr,Pr=arguments[hr]!=null?arguments[hr]:{};hr%2?le(pr=Lt(Object(Pr),!0)).call(pr,function(_r){g(or,_r,Pr[_r])}):_e?Ve(or,_e(Pr)):le(Tr=Lt(Object(Pr))).call(Tr,function(_r){$e(or,_r,de(Pr,_r))})}return or}var Et=e(35).fn,ir=e(0),ur=e(11),Dt=e(157).V2NIMConnectStatus;function lr(or,hr){var pr,Tr,Pr,_r,Mr=this,rr=ur.getDefaultLinkUrl(Mr.options.secure);Mr.socketUrls=[rr],Mr.reporterHookLBS.updateComplete({target:hr,code:200,body:or}),Mr.reporterHookLBS.end(!0),Mr.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:hr,code:200,net_connect:Mr.checkNetworkAvailable(),succeed:!0}),Mr.msgStatEnable=!!or.common["msg.stat.enable"],Mr.msgStatEnable&&(Mr.msgDelayTimer=V(ue(Tr=Mr.doReportMsgDelay).call(Tr,Mr),1e4)),or.common&&or.common.link&&le(Pr=or.common.link).call(Pr,function(xr){Mr.socketUrls.unshift(ur.formatSocketUrl({url:xr,secure:Mr.options.secure}))}),or.common&&or.common["link.default"]&&le(_r=or.common["link.default"]).call(_r,function(xr){var vr,Ir;xr=ur.formatSocketUrl({url:xr,secure:Mr.options.secure}),re(vr=Mr.socketUrls).call(vr,xr)===-1&&(Mr.socketUrls=$(Ir=Mr.socketUrls).call(Ir,xr))}),Mr.socketUrls=z(pr=Mr.socketUrls).call(pr,function(xr,vr,Ir){return re(Ir).call(Ir,xr)===vr});try{ur.uploadUrl=or.nosup[0]}catch{}if(ur.chunkUploadUrl=or["nos-chunk"]||ur.chunkUploadUrl||"",Mr.logger.info("link::refreshSocketUrl: ".concat(hr," ajax load , got socket urls "),Mr.socketUrls),ur.hasLocalStorage){or.common["lbs.backup"]&&Mr.options.lbsBackup&&localStorage.setItem("nim_lbs_backup",i(or.common["lbs.backup"]));var kr=ir.get(or,"common.report.apierror.on");or.common.report&&localStorage.setItem("nim_lbs_fail_report_on",kr===!1?"0":"1")}if(or.common.socketConcurrent){var Er=or.common.socketConcurrent;typeof Er=="number"&&Er>=1&&Er<=3&&(Mr.options.socketConcurrent=Er,Mr.imsocket.setConfig({socketConcurrent:Er}))}}function sr(or,hr){if(this.statusProtector.getConnectStatus()===Dt.V2NIM_CONNECT_STATUS_DISCONNECTED)return L.reject(new Error("already disconnected"));if(or>=hr){this.logger.warn("doRequestBackupLbsUrls backup lbs all tried");var pr=ur.getDefaultLinkUrl(this.options.secure);return this.logger.warn("doRequestBackupLbsUrls: use default socket link",pr),this.socketUrls=[pr],this.reporterHookLBS.end(!1),L.resolve()}return this.logger.warn("doRequestBackupLbsUrls: wait for next lbs request"),L.reject(new Error("lbs request failed"))}function er(or,hr){var pr=hr.status||10001,Tr=typeof hr=="string"?hr:hr&&hr.message?hr.message:"Unknown error";this.reporterHookLBS.updateComplete({target:or,code:hr.status||hr.code||0,body:hr&&hr.message||""}),this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:or,code:pr,description:Tr,net_connect:this.checkNetworkAvailable(),succeed:!1})}function cr(or){var hr=this;if(!(or&&or.length>0))throw new Error("No  lbs url to try");var pr=0,Tr=0,Pr=!1,_r=null;hr.logger.log("doRequestBackupLbsUrls: use lbs url in index ",pr,or),hr.reporterHookLBS.start();var Mr=function(rr){var kr=or[rr],Er=new Date().getTime();return hr.reporterHookLBS.updateBegin({target:kr,index:rr}),hr.promiseAbortManager.add(hr.doRequestLbs(kr)).then(function(xr){if(_r&&clearInterval(_r),Pr===!1)return lr.call(hr,xr,kr),Pr=!0,L.resolve()}).catch(function(xr){return Tr+=1,hr.logger.warn("doRequestBackupLbsUrls: ".concat(kr," ajax lbs error"),xr),er.call(hr,kr,xr,Er),sr.call(hr,Tr,or.length)})};return new L(function(rr,kr){_r=oe(function(){if(!(pr>=or.length))return hr.statusProtector.getConnectStatus()===Dt.V2NIM_CONNECT_STATUS_DISCONNECTED?(_r&&clearInterval(_r),void kr(new Error("already disconnected"))):void Mr(pr++).then(function(){_r&&clearInterval(_r),rr()}).catch(function(){});_r&&clearInterval(_r)},2e3),Mr(pr++).then(function(){_r&&clearInterval(_r),rr()}).catch(function(){})})}Et.connect=function(){ur.isBrowser&&this.reporter.restore(),this.createConnectTime=y(),this.reporter.reportTraceCancel("login"),this.autoconnect?this.reporter.reportTraceStart("login",{user_id:this.options.account,action:"auto_login"}):this.reporter.reportTraceStart("login",{user_id:this.options.account,action:"manual_login",process_id:this.processId}),this.reporter.reportTraceUpdateV2("login",{code:0,description:i(jt(jt({},this.options),{},{account:"***",token:"***"}),function(or,hr){return or===""||typeof hr!="function"&&n(hr)!=="object"?hr:void 0}),operation_type:"conf_init",net_connect:this.checkNetworkAvailable(),succeed:!0,target:""}),k(Et).connect.call(this)},Et.onConnect=function(){this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:this.url,code:200,net_connect:this.checkNetworkAvailable(),succeed:!0}),k(Et).onConnect.call(this)},Et.onHandshakeFailed=function(or,hr){var pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:hr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_handshake_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn($(pr="link::onHandshakeFailed: shandshake failed, startTime: ".concat(or,", targetUrl: ")).call(pr,hr))},Et.onConnectFailed=function(or,hr,pr){var Tr,Pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:pr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_connect_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn($(Tr=$(Pr="link::onConnectFailed: connect failed due to ".concat(or,", startTime: ")).call(Pr,hr,", targetUrl: ")).call(Tr,pr))},Et.onSocketError=function(or,hr,pr){var Tr,Pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:pr,description:"ws_onerror:"+or,code:0,net_connect:this.checkNetworkAvailable(),succeed:!1}),this.reporter.reportTraceEnd("login",!1),this.logger.warn($(Tr=$(Pr="link::onSocketError: due to ".concat(or,", startTime: ")).call(Pr,hr,", targetUrl: ")).call(Tr,pr))},Et.probeIp=function(){var or=this,hr=ur.ipProbeAddr;return new L(function(pr){var Tr=0,Pr=-1;function _r(){++Tr===2&&(Tr=-1,pr(Pr))}or.adaptersRequest(hr.ipv4,{timeout:2e3,onerror:_r,onload:function(Mr){Pr++,_r()}}),or.adaptersRequest(hr.ipv6,{timeout:2e3,onerror:_r,onload:function(Mr){Pr+=2,_r()}}),V(function(){Tr||Pr===-1||(Tr=-1,pr(Pr))},100)})},Et.refreshSocketUrl=function(){var or=this;return this.statusProtector.emit("auth/loginLifeCycleAddressing"),ur.isWeixinApp?this.doRefreshSocketUrl(2):this.options.ipVersion===2?this.probeIp().then(function(hr){return or.doRefreshSocketUrl(hr)}):this.doRefreshSocketUrl(this.options.ipVersion)},Et.doRefreshSocketUrl=function(or){var hr,pr,Tr=this.options.lbsUrl||ur.lbsUrl;or!==1&&or!==2&&(or=0),ur.ipVersion=or;var Pr=this.options.lbsBackupUrlsCustomer||[],_r=[];this.options.lbsBackup&&ur.hasLocalStorage&&(_r=(_r=localStorage.getItem("nim_lbs_backup"))?JSON.parse(_r):[]);var Mr=$(hr=$(pr=[Tr]).call(pr,_r)).call(hr,Pr);return Mr=z(Mr).call(Mr,function(rr,kr,Er){return re(Er).call(Er,rr)===kr}),cr.call(this,Mr)},Et.doRequestLbs=function(or){var hr=this,pr=this.options,Tr=ur.info;or=or+ir.genUrlSep(or)+"id="+pr.account+"&sv="+Tr.sdkVersion+"&pv="+Tr.protocolVersion+"&networkType="+ur.ipVersion+"&hostEnv="+ur.hostEnv+"&k="+pr.appKey,this.logger.info("doRequestLbs ".concat(ie(or).call(or,0,-32)));var Pr=this;return new L(function(_r,Mr){ur.isWeixinApp?wx.request({url:or,success:function(rr){var kr=rr&&rr.statusCode,Er=rr&&rr.data;kr===200?_r(Er):Mr(Er)},fail:function(rr){Mr(rr)}}):hr.adaptersRequest(or,{proxyUrl:ir.url2origin(or)+"/lbs/res/cors/nej_proxy_frame.html",timeout:ur.xhrTimeout,onload:function(rr){try{var kr=JSON.parse(rr);_r(kr)}catch(Er){Pr.logger.warn("doRequestLbs parse JSON Error. request lbs failed"),Mr(Er)}},onerror:function(rr){Mr(rr)}},{exception_service:1})})},Et.disconnect=function(){var or=this,hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void V(function(){k(Et).disconnect.call(or,hr)},0);this.connecting?this.logger.warn("IMProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==Dt.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("IMProtocolFn api disconnect:: has tried to disconnect"):this.logger.warn("IMProtocolFn api disconnect:: other logic entered");var pr=k(Et);pr.disconnect.call(this,hr)},Et.notifyDisconnect=function(or){k(Et).notifyDisconnect.call(this,or)}},function(t,r,e){var n=e(57),g=e(51),y=e(58),i=e(3),k=e(8),$=e(24),L=e(26),V=e(7),z=e(2),re=e(16),ie=e(4),ue=e(52),le=e(53),oe=e(54),ae=e(55),Ue=e(43);function de(sr,er){var cr=ie(sr);if(ue){var or=ue(sr);er&&(or=re(or).call(or,function(hr){return le(sr,hr).enumerable})),cr.push.apply(cr,or)}return cr}function _e(sr){for(var er=1;er<arguments.length;er++){var cr,or,hr=arguments[er]!=null?arguments[er]:{};er%2?z(cr=de(Object(hr),!0)).call(cr,function(pr){g(sr,pr,hr[pr])}):oe?ae(sr,oe(hr)):z(or=de(Object(hr))).call(or,function(pr){Ue(sr,pr,le(hr,pr))})}return sr}var Ve=e(35).fn,$e=e(195),Lt=e(11),jt="NIM-AllGrayscaleConfig",Et="NIM-AllMixStorePolicy",ir=e(0);function ur(){var sr=this;if(Lt.hasLocalStorage&&localStorage.getItem(jt)){var er=null;try{er=JSON.parse(localStorage.getItem(jt))[sr.options.appKey]}catch(cr){sr.logger.error("appGrayConfig error",cr)}er&&(sr.appGrayConfig=er.timeStamp+1e3*er.ttl>new Date().getTime()?er:null,sr.appGrayConfig&&Dt.apply(sr))}sr.appGrayConfig||sr.sendCmd("getGrayscaleConfig",{providers:""},function(cr,or){if(cr)sr.logger.error("Calculate Delay time, getGrayscaleConfig error",cr);else if(or){var hr=or;if(hr.grayConfig=JSON.parse(hr.grayConfig),hr.ttl=Number(hr.ttl),hr.timeStamp=new Date().getTime(),sr.appGrayConfig=hr,Lt.hasLocalStorage){var pr=localStorage.getItem(jt)?JSON.parse(localStorage.getItem(jt)):{};pr[sr.options.appKey]=hr,localStorage.setItem(jt,k(pr))}Dt.apply(sr)}else sr.logger.error("Calculate Delay time, getGrayscaleConfig error",or)})}function Dt(){var sr=this;if(Lt.hasLocalStorage&&localStorage.getItem(Et)){var er=null;try{er=JSON.parse(localStorage.getItem(Et))[sr.options.appKey]}catch(cr){sr.logger.error("mixStorePolicy error",cr)}er&&(sr.mixStorePolicy=er.timeStamp+1e3*er.ttl>new Date().getTime()?er:null,sr.mixStorePolicy&&er.ttl&&er.ttl!==0&&(sr.mixStorePolicyClock=$(L(Dt).call(Dt,sr),1e3*er.ttl)))}sr.mixStorePolicy||sr.sendCmd("getMixStorePolicy",{providers:sr.options.providers&&sr.options.providers.s3?[1,2]:[1]},function(cr,or){if(cr){sr.logger.error("Calculate Delay time, getMixStorePolicy error",cr);try{or=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[sr.options.appKey]}catch(Tr){sr.logger.error("error:","get last mixStorePolicy failed",Tr)}}else if(or){var hr=or;if(hr.ttl=Number(hr.ttl),hr.providers=hr.providers.split(","),hr.nosPolicy=hr.nosPolicy?JSON.parse(hr.nosPolicy):null,hr.s3Policy=hr.s3Policy?JSON.parse(hr.s3Policy):null,hr.timeStamp=new Date().getTime(),sr.mixStorePolicy=hr,hr.ttl&&hr.ttl!==0&&(sr.mixStorePolicyClock=$(L(Dt).call(Dt,sr),1e3*hr.ttl)),Lt.hasLocalStorage){var pr=localStorage.getItem(Et)?JSON.parse(localStorage.getItem(Et)):{};pr[sr.options.appKey]=hr,localStorage.setItem(Et,k(pr))}}else sr.logger.error("Calculate Delay time, mixStorePolicy error",or)})}function lr(sr){var er=this,cr=this;sr.code===399?(this.logger.warn("pendingLoginFailed:399, refresh LBS url and reconnecting"),cr.forceDisconnect(),cr.doRefreshSocketUrl(Lt.ipVersion).then(function(){cr.reconnect()}).catch(function(){er.logger.warn("pendingLoginFailed:399, refresh LBS url failed")})):sr.code===398?(this.logger.warn("pendingLoginFailed:398 try to reconnect socket linkbackoff set min 5s"),cr.backoff.setMin(5e3),cr.reconnect()):(this.logger.error("pendingLoginFailed: ",sr.code,sr),cr.onAuthError(sr,"link::onLogin"))}Ve.assembleLogin=function(){var sr=this.assembleIMLogin();return this.addPushInfo instanceof Function?this.addPushInfo(sr):i.resolve({login:sr})},Ve.login=y(n.mark(function sr(){var er,cr,or,hr=this;return n.wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return er=this,pr.next=3,er.assembleLogin();case 3:if(cr=pr.sent,!(or=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){pr.next=13;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[or]){pr.next=10;break}return this.logger.warn("onConnect::repeat login",or),pr.abrupt("return");case 10:this.socketIds[or]=!0,pr.next=14;break;case 13:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 14:this.logger.warn("link::doLogin: "+or+" appLogin is "+cr.login.appLogin),er.sendCmd("login",_e({},cr),function(Tr,Pr){if(Tr){var _r=ir.get(Tr,"event.uploadCode")||Tr&&Tr.code;_r=typeof _r!="number"?408:_r;var Mr=ir.get(Tr,"event.disconnectReason"),rr=Mr?k({disconnect_reason:Mr}):Tr&&Tr.message||"login failed";er.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:_r,description:rr,net_connect:er.checkNetworkAvailable(),succeed:!1}),er.reporter.reportTraceEnd("login",!1),lr.call(er,Tr),er.statusProtector.emit("auth/loginLifeCycleLoginFail",Tr)}else er.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",succeed:!0,net_connect:er.checkNetworkAvailable(),code:200}),er.reporter.reportTraceEnd("login",!0),er.resetReconnectStatus(),hr.heartbeatFail=0,hr.hasLogin=!0,hr.autoconnect=!0,er.startHeartbeat(),er.initOnlineListener(),er.statusProtector.emit("auth/loginLifeCycleLoginSucc"),er.afterLogin(Pr)});case 16:case"end":return pr.stop()}},sr,this)})),Ve.afterLogin=function(sr){var er=this;this.sendCmd("getNosCdnHost",{}),(typeof ir.get(this.options,"privateConf.isMixStoreEnable")=="boolean"?this.options.privateConf.isMixStoreEnable:Lt.privateConf.isMixStoreEnable)&&ur.apply(this),this.initPush instanceof Function&&this.initPush();var cr=this.db;if(cr.enable){var or=this.account;this.options.appendAppKeyForDBName&&(or+="-"+this.options.appKey),this.db.init(or).then(function(){er.notifyLogin(sr),er.syncData()},function(hr){er.logger.warn("link::afterLogin: no db",hr),cr.reset(!1),er.notifyLogin(sr),er.syncData()})}else this.logger.info("link::afterLogin: no db"),this.notifyLogin(sr),this.syncData()},Ve.getFileAuthToken=function(sr){var er=this,cr=er.mixStorePolicy.nosPolicy.authPolicy.policyType;cr!==-1?V(cr).call(cr,sr.type)<0?er.logger.error("this type Token error not support"):sr.type!=3||sr.urls&&sr.urls.length?er.sendCmd("getBackSourceToken",{mixAuthTokenReq:sr},function(or,hr){if(or)return er.logger.error("getBackSourceToken error",or),or;sr.done&&sr.done(hr)}):er.logger.error("urls is Required when type 3"):er.logger.error("don't need token")},Ve.processAuth=function(sr){switch(sr.cmd){case"login":sr.error||(sr.content=sr.content||{},this.loginAndroidPush&&this.loginAndroidPush(sr.content.aosPushInfo||{}),sr.obj=sr.content.loginRes,this.connectionId=sr.content.loginRes.connectionId,this.onLoginPortsChange(sr,2));break;case"kicked":return void this.onKicked(sr);case"multiPortLogin":this.onLoginPortsChange(sr,sr.content.state);break;case"kick":sr.error||(sr.obj.deviceIds=sr.content.deviceIds)}},Ve.onLoginPortsChange=function(sr,er){var cr=this,or=sr.content.loginPorts;if(or&&or.length){var hr=!0;switch(er){case 2:hr=!0;break;case 3:hr=!1}z(or).call(or,function(pr){pr.type=$e.reverseType(pr.type),pr.customClientType&&(pr.customClientType=+pr.customClientType),pr.time=+pr.time,pr.online=hr}),(or=re(or).call(or,function(pr){return pr.connectionId!==cr.connectionId})).length&&(cr.logger.info("link::onLoginPortsChange:",or),cr.options.onloginportschange(or))}},Ve.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],Ve.kickedMessages=["","","","",""]},function(t,r,e){var n=e(57),g=e(58),y=e(789),i=e(3),k=e(26),$=e(6),L=e(754),V=e(37),z=e(2),re=e(4),ie=e(122),ue=e(7),le=e(71),oe=e(16),ae=e(9),Ue=e(121),de=e(803),_e=e(24),Ve=e(32),$e=e(90),Lt=e(35).fn,jt=e(0),Et=e(41),ir=jt.undef,ur=jt.objs2ids,Dt=jt.objs2accounts,lr=jt.teams2ids,sr=e(154),er=jt.getGlobal(),cr=e(107).EMSyncType;Lt.beforeSync=function(){var or=this.db;return or.enable?or.clearSendingMsgs():i.resolve()},Lt.syncData=function(){var or=this,hr=or.db,pr=or.options,Tr=hr.enable;function Pr(_r){var Mr;or.syncPromiseArray=[],or.syncResult={},or.syncTeamMembersPromiseArray=[],or.syncSuperTeamMembersPromiseArray=[],or.syncTeamMembersResult={},or.checkNosReqNum=0,or.getNosOriginUrlReqNum=0,jt.verifyBooleanWithDefault(pr,"syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncExtraSuperTeamInfo syncAvSignal",!0,"","sync::syncData"),jt.verifyBooleanWithDefault(pr,"syncFilter syncTeamMembers syncSuperTeamMembers",!1,"","sync::syncData");var rr={};_r=_r||{},er._nimForceSyncIM&&(or.logger.warn("sync::syncData: nimForceSyncIM"),delete _r.teams,er._nimForceSyncIM=!1),rr.myInfo=_r.myInfo||0,rr.deleteMsgSelf=_r.deleteMsgSelf||0,rr.offlineMsgs=0,pr.syncRelations&&(rr.relations=_r.relations||0),pr.syncFriends&&(rr.friends=_r.friends||0),pr.syncFriendUsers&&(rr.friendUsers=_r.friendUsers||0),pr.syncRobots&&(rr.robots=_r.robots||0),pr.syncTeams&&(rr.teams=_r.teams||0),pr.syncSuperTeams&&(rr.superTeams=_r.superTeams||0),pr.syncStickTopSessions&&(rr.stickTopSessions=_r.stickTopSessions||0),pr.syncSessionUnread&&(rr.sessionAck=Tr&&_r.sessionAck||0,rr.superTeamSessionAck=Tr&&_r.superTeamSessionAck||0),pr.syncRoamingMsgs&&(rr.roamingMsgs=Tr&&_r.roamingMsgs||_r.roamingMsgs||0),pr.syncSuperTeamRoamingMsgs&&(rr.superTeamRoamingMsgs=Tr&&_r.superTeamRoamingMsgs||0),pr.syncMsgReceipts&&(rr.msgReceipts=_r.msgReceipts||0),pr.syncExtraTeamInfo&&(rr.myTeamMembers=_r.myTeamMembers||0),pr.syncExtraSuperTeamInfo&&(rr.myInfoInSuperTeams=_r.myInfoInSuperTeams||0),pr.syncBroadcastMsgs&&(rr.broadcastMsgs=_r.broadcastMsg||0),rr.donnop=_r.donnop||0,rr.deleteMsg=_r.deleteMsg||0,rr.deleteSuperTeamMsg=_r.deleteSuperTeamMsg||0,rr.sessionHistoryMsgsDelete=_r.sessionHistoryMsgsDelete||0,rr.netcallMsgs=0,pr.syncFilter&&(rr.filterMsgs=0),pr.syncAvSignal&&(rr.avSignal=0);var kr=k(Mr=or.onSyncData).call(Mr,or);kr.isImSyncDataCb=!0,or.logger.info("syncData:: start sync",rr),or.reporterHook.emit("reporter/syncStart"),or.sendCmd("sync",{sync:rr,isImSyncDataObj:!0},kr)}or.syncing=!0,or.logger.log("sync::syncData: syncing = true"),Tr?or.beforeSync().then(function(){return or.db.getTimetags()}).then(function(_r){Pr(_r)},function(){Pr()}):Pr(or.timetags)},Lt.onSyncData=function(or){or&&(or.callFunc="sync::onSyncData",this.onCustomError("SYNC_DATA_ERROR",or))},Lt.processSync=function(or){switch(this.logger.log("sync::processSync cmd: ".concat(or.cmd)),or.cmd){case"syncDone":if(or.error){var hr,pr=jt.get(or.error,"message"),Tr=jt.get(or.error,"code");this.logger.error($(hr="sync::processSync syncDoneError errMsg: ".concat(pr,", errCode: ")).call(hr,Tr)),this.logger.error("sync::processSync disconnect because syncDone failed");var Pr=Et.syncError({errMsg:pr,errCode:Tr});this.shouldReconnect=!1,this.markAllCallbackInvalid(Pr),this.notifyDisconnect(Pr)}else this.timetags.sync=or.content.timetag,this.reporterHook.emit("reporter/syncRecv"),this.onSyncDone();break;case"syncTeamMembersDone":this.onSyncTeamMembersDone();break;case"syncSuperTeamMembersDone":this.onSyncSuperTeamMembersDone()}},Lt.onSyncDone=function(){var or,hr,pr,Tr,Pr,_r,Mr,rr,kr,Er,xr,vr,Ir,Or,Cr,yr,fr,Sr,Br,$r,Lr,Gr,qr,Yr,bn,wn,Xr,qn,Zr,Nn,Qr=this,Mn=Qr.db,Ln=Mn.enable,xn=Qr.options,Pn=Qr.syncPromiseArray,vn=Qr.syncResult;function hn(){if(Pn){Qr.logger.info("sync::onSyncDone: after sync",jt.promises2cmds(Pn)),Pn=[],hr=vn.blacklist||[],pr=vn.invalidBlacklist||[],Tr=vn.mutelist||[],Pr=vn.invalidMutelist||[],_r=vn.friends,kr=vn.myTeamMembers,Er=vn.mySuperTeamMembers,Mr=vn.invalidFriends||[],rr=vn.myInfo,xr=vn.users,Ir=vn.superTeams,Cr=vn.invalidSuperTeams,vr=vn.teams,Or=vn.invalidTeams||[],yr=vn.sessions||{},fr=L(V({},Qr.sessionSet)),Sr=vn.ackMap,vn.msgReceipts,Br=vn.roamingMsgs,$r=vn.offlineMsgs,Lr=vn.offlineFilterMsgs,qr=vn.offlineSysMsgs,Yr=vn.offlineCustomSysMsgs,bn=vn.offlineFilterSysMsgs,wn=vn.offlineFilterCustomSysMsgs,Xr=vn.sysMsgUnread,qn=vn.sessionsWithMoreRoaming,Nn=vn.clearServerHistoryMsgs||[];var Eo=i.resolve();(function(){if(Ln){var Ko,Ha=[Zn()];yr&&z(Ko=re(yr)).call(Ko,function(to){Ha.push(Mn.putSession(yr[to]))}),Eo=i.all(Ha).then(function(){var to,ha=$(to=[]).call(to,y(re(Sr||{})),y(re(yr||{})));ha=oe(ha).call(ha,function(La,Ka,Zo){return ue(Zo).call(Zo,La)===Ka});var ca=[];return z(ha).call(ha,function(La){var Ka,Zo=yr[La];(Zo.lastMsg||Zo.ack)&&(Ka=(Ka=Zo.ack?i.resolve(Zo):Mn.getSession(Zo.id)).then(function(ko){var za=ko.ack||0;return Mn.getMsgCountAfterAck({shouldCountNotifyUnread:Qr.options.shouldCountNotifyUnread,sessionId:La,ack:za}).then(function(Qa){return ko.unread=Qa||0,yr[La]=Qr.mergeSession(ko),Mn.updateSession(ko)})}),ca.push(Ka))}),i.all(ca)}).then(function(){var to=[];return Qr.saveAck.p2pTeam&&to.push(Mn.updateSessionAck(Qr.saveAck.p2pTeam).catch(function(ha){return Qr.logger.error("sessionAck::syncSessionAck::updatetimetag db",ha),i.reject(ha)})),Qr.saveAck.superTeam&&to.push(Mn.updateSuperTeamSessionAck(Qr.saveAck.superTeam).catch(function(ha){return Qr.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db",ha),i.reject(ha)})),i.all(to)})}else if(yr){var Ts,To,Os;z(Ts=[Br,$r]).call(Ts,function(to){to&&z(to).call(to,function(ha){var ca;(To=yr[ha.sessionId]).unread=To.unread||0,To.unreadMsgs=To.unreadMsgs||[],Os=To.ack||0,z(ca=ha.msgs).call(ca,function(La){if(!(Os>=La.time))if(La.type==="notification"){var Ka;try{Ka=Qr.options.shouldCountNotifyUnread(La)}catch(Zo){throw Qr.logger.error("userOption:shouldCountNotifyUnread function error",Zo),Zo}Ka&&To.unread++}else La.flow==="in"&&La.isUnreadable!==!1&&(To.unread++,To.unreadMsgs.push(La))}),Qr.mergeSession(To)})})}})(),Qr.syncDonePromiseArray=Qr.syncDonePromiseArray||[],Eo.then(function(){if(Ln&&!Qr.hasSynced)Qr.hasSynced=!0,function(){xn.syncRelations&&(or=Mn.getRelations().then(function(to){hr=to[0],Tr=to[1],hr.invalid=pr,Tr.invalid=Pr}).catch(function(to){return to._msg="on relations error",Qr.logger.error("sync::syncRelation: ",to),i.reject(to)}),Pn.push(or)),xn.syncFriends&&(or=Mn.getFriends().then(function(to){(_r=to).invalid=Mr}).catch(function(to){return to._msg="on friends error",Qr.logger.error("sync::syncFriends: ",to),i.reject(to)}),Pn.push(or)),ir(rr)&&(or=Mn.getUser(Qr.account).then(function(to){rr=to}).catch(function(to){return to._msg="on myInfo error",Qr.logger.error("sync::syncMyInfo: ",to),i.reject(to)}),Pn.push(or)),xn.syncFriendUsers&&(or=Mn.getFriends().then(function(to){return ae(to).call(to,function(ha){return ha.account})}).then(function(to){return Mn.getUsers({accountIds:to})}).then(function(to){xr=to}).catch(function(to){return to._msg="on users error",Qr.logger.error("sync::syncFriendUser: ",to),i.reject(to)}),Pn.push(or)),xn.syncTeams&&(or=Mn.getTeams().then(function(to){(vr=to).invalid=Or}).catch(function(to){return to._msg="on teams error",Qr.logger.error("sync::syncTeams: ",to),i.reject(to)}),Pn.push(or)),xn.syncSuperTeams&&(or=Mn.getSuperTeams().then(function(to){(Ir=to).invalid=Cr}).catch(function(to){return to._msg="on superteams error",Qr.logger.error("sync::syncSuperTeams: ",to),i.reject(to)}),Pn.push(or)),or=Mn.getTeamMembersByAccount(Qr.account).then(function(to){kr=to,Qr.mergeMyTeamMembers(to)}).catch(function(to){return Qr.logger.error("sync::getTeamMembersByAccount: ",to),i.reject(to)}),Pn.push(or),or=Mn.getSuperTeamMembersByAccount(Qr.account).then(function(to){Er=to,Qr.mergeMySuperTeamMembers(to)}).catch(function(to){return Qr.logger.error("sync::getSuperTeamMembersByAccount: ",to),i.reject(to)}),Pn.push(or),or=Mn.getDonnop().then(function(to){Qr.mergeDonnop(to)}).catch(function(to){return Qr.logger.error("sync::donnop: ",to),i.reject(to)}),Pn.push(or),or=Mn.getAllSessions().then(function(to){yr=to}).catch(function(to){return Qr.logger.error("sync::getSession: ",to),i.reject(to)}),Pn.push(or),or=Mn.getSysMsgUnread().then(function(to){Xr=to}).catch(function(to){return to._msg="on sysMsgUnread error",Qr.logger.error("sync::getSysMsgUnread: ",to),i.reject(to)}),Pn.push(or),Pn.push(Mn.getSessionsWithMoreRoaming().then(function(to){qn=to}))}();else{var Ko,Ha,Ts=[];z(Ko=re(yr)).call(Ko,function(to){(Ha=yr[to]).lastMsg&&Ts.push(Ha)}),yr=ie(Ts).call(Ts,function(to,ha){return ha.updateTime-to.updateTime})}var To=i.all(Pn);function Os(to){var ha;to||(Qr.syncDonePromiseSuccessCount+=1);var ca,La=ue(ha=Qr.syncDonePromiseArray).call(ha,To);La>-1&&le(ca=Qr.syncDonePromiseArray).call(ca,La,1),Qr.logger.log("afterSync::syncDonePromiseHandler syncPromiseArray length: ",Qr.syncDonePromiseArray.length,"success count: ",Qr.syncDonePromiseSuccessCount),Qr.syncDonePromiseArray.length===0&&Qr.syncDonePromiseSuccessCount>0?(Qr.logger.log("onSyncDone afterSync last syncDonePromsie. Execute taskAfterSync and notifyData"),function(){Qr.logger.info("sync::onSyncDone: taskAfterSync"),function(){if(vn.deleteMsgSysMsgs){var Zo,ko={};Br&&z(Br).call(Br,function(Xn){ko[Xn.sessionId]=Xn});var za={};$r&&z($r).call($r,function(Xn){za[Xn.sessionId]=Xn});var Qa=Qr.api;if(z(Zo=vn.deleteMsgSysMsgs).call(Zo,function(Xn){var zo;z(zo=Xn.sysMsgs).call(zo,function(Na){var vs=Na.msg,Us=vs.sessionId;Xn.type==="roaming"&&ko[Us]?ko[Us].msgs=Qa.cutMsgs(ko[Us].msgs,vs):za[Us]&&(za[Us].msgs=Qa.cutMsgs(za[Us].msgs,vs))})}),!Mn.enable){var Hc,Rs=$(Hc=[]).call(Hc,y(Br||[]),y($r||[]));z(Rs).call(Rs,function(Xn){if(Xn.msgs.length){var zo=Qr.genSessionByMsgs(Xn.msgs);Qr.cacheSyncedSession(zo),yr.unshift(zo)}else{var Na=de(yr).call(yr,function(vs){return vs.id===Xn.sessionId});le(yr).call(yr,Na,1)}});var Rn={};z(yr).call(yr,function(Xn){if(Rn[Xn.id]){var zo=Xn.lastMsg.time>Rn[Xn.id].lastMsg.time?Xn.lastMsg:Rn[Xn.id].lastMsg;Rn[Xn.id]=Xn,Rn[Xn.id].lastMsg=zo}else Rn[Xn.id]=Xn}),yr=L(Rn),yr=ie(yr).call(yr,function(Xn,zo){return zo.updateTime-Xn.updateTime})}}}(),Zr=Qr.syncResult.stickTopSessions||[],z(Zr).call(Zr,function(Zo){Zo.isTop=!0}),z(yr).call(yr,function(Zo){var ko=Qr.sessionSet[Zo.id];ko&&ko.isTop&&(Zo.isTop=!0),Ue(Zr).call(Zr,function(za){return za.id===Zo.id})&&(Zo.isTop=!0)});var Ka=[Qr.deleteMsgOfflineRoaming(vn.deleteMsgSysMsgs,yr)];return Nn&&z(Nn).call(Nn,function(Zo){Ka.push(function(ko,za){var Qa;Qr.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete ".concat(ko)),za=za||new Date().getTime();var Hc=oe(yr).call(yr,function(zo){return zo.id===ko}),Rs=Qr.getSessionInCache(ko);Qa=Rs||Hc[0];var Rn=xn.rollbackClearMsgsUnread!==!1,Xn=[];return Mn.enable&&Xn.push(Mn.deleteMsgsBySessionId({sessionId:ko,end:za})),Rn&&Qa&&(Qa.lastMsg=null,Qa.unread=0,Qa=Qr.mergeSession(Qa),Mn.enable&&Xn.push(Mn.updateSession(Qa))),i.all(Xn)}(Zo.sessionId,Zo.time))}),i.all(Ka)}().then(Oo,function(Ka){Qr.logger.error("taskAfterSync syncDBDataPromise error:",Ka),Ka.callFunc="sync::onSyncDone",Ka.message="taskAfterSync+notifyData ",Qr.onCustomError("SYNC_SESSION_ACK_ERROR",Ka)})):to?(Qr.logger.error("onSyncDone afterSync syncDonePromise Error:",to),to.callFunc="sync::onSyncDone",to.message="pullFullData ",Qr.onCustomError("SYNC_SESSION_ACK_ERROR",to)):Qr.logger.log("onSyncDone afterSync syncDonePromise success, wait for next syncDonePromise")}Qr.syncDonePromiseArray.length===0&&(Qr.syncDonePromiseSuccessCount=0),Qr.syncDonePromiseArray.push(To),To.then(function(){return Os()}).catch(function(to){return Os(to)})})}else Qr.logger.warn("sync::onSyncDone: after sync --no promiseArray")}function Zn(){var Eo=[];return Br&&z(Br).call(Br,function(Ko){var Ha;Eo=$(Ha=[]).call(Ha,y(Eo),y(Ko.msgs))}),$r&&z($r).call($r,function(Ko){var Ha;Eo=$(Ha=[]).call(Ha,y(Eo),y(Ko.msgs))}),Eo.length?Mn.putMsg(Eo).then(function(){return Eo}):i.resolve(Eo)}function Oo(){_e(Ho,0)}function Ho(){var Eo,Ko,Ha=[],Ts=[];if(hr&&hr.length&&(Qr.logger.info("sync::notifyDataAsync: on blacklist",Dt(hr)),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType3_8),xn.onblacklist(hr)),Tr&&Tr.length&&(Qr.logger.info("sync::notifyDataAsync: on mutelist",Dt(Tr)),xn.onmutelist(Tr)),_r&&(Qr.logger.info("sync::notifyDataAsync: on friends",Dt(_r)),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType12_5),xn.onfriends(_r)),rr&&(Qr.logger.info("sync::notifyDataAsync: on myInfo"),Qr.myInfo=rr,Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType3_109),xn.onmyinfo(jt.copy(rr))),kr){Qr.logger.info("sync::notifyDataAsync: on myTeamMembers",kr),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType8_126);var To=jt.simpleClone(kr);Ve(To)||(To=[To]),xn.onMyTeamMembers(To)}if(Er){Qr.logger.info("sync::notifyDataAsync: on mySuperTeamMembers",Er),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType21_111);var Os=jt.simpleClone(Er);Ve(Os)||(Os=[Os]),xn.onMySuperTeamMembers(Os)}xr&&(z(xr).call(xr,function(ko){Qr.mergeUser(ko)}),Qr.logger.info("sync::notifyDataAsync: on users",Dt(xr)),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType12_6),xn.onusers(xr)),vr&&(Qr.logger.info("sync::notifyDataAsync: on teams",lr(vr)),xn.onteams(vr),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType8_109)),Ir&&(Qr.logger.info("sync::notifyDataAsync: onSuperTeams",lr(Ir)),xn.onSuperTeams(Ir),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType21_109)),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_12),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_14),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_20),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_21),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType7_15),yr&&yr.length?(yr=ae(yr).call(yr,function(ko){return Qr.mergeSession(ko),$e(sr).call(sr,ko)}),yr=oe(yr).call(yr,function(ko){return!ko.isDeleted}),Qr.logger.info("sync::notifyDataAsync: on sessions",ur(yr),jt.secureOutput("session",yr)),!Ln&&Qr.timetags&&Qr.timetags.roamingMsgs?xn.onsessions(oe(fr).call(fr,function(ko){return sr.isComplete(ko)})):xn.onsessions(yr)):!Ln&&fr.length&&(Qr.logger.info("sync::notifyDataAsync: on sessions",ur(yr),jt.secureOutput("session",yr)),xn.onsessions(oe(fr).call(fr,function(ko){return sr.isComplete(ko)}))),Zr&&Zr.length&&(Zr=ae(Zr).call(Zr,function(ko){var za=Qr.getSessionInCache(ko.id);return za?(za.isTop=!0,ko=Qr.mergeSession(za),$e(sr).call(sr,za)):(ko=Qr.mergeSession(ko),$e(sr).call(sr,ko))}),Qr.logger.info("sync::notifyDataAsync: onStickTopSessions",ur(Zr),jt.secureOutput("session",Zr)),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_23),xn.onStickTopSessions(Zr)),Br&&z(Br).call(Br,function(ko){ko.scene==="superTeam"?Ts.push(ko.timetag):Ha.push(ko.timetag),(Ko=ko.msgs).length&&(Qr.logger.info("sync::notifyDataAsync: on roaming msgs",ko.sessionId,Ko.length),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_9),xn.onroamingmsgs(ko))}),$r&&(Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_4),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_17),z($r).call($r,function(ko){ko.scene==="superTeam"?Ts.push(ko.timetag):Ha.push(ko.timetag),(Ko=ko.msgs).length&&(Qr.logger.info("sync::notifyDataAsync: on offline msgs",ko.sessionId,Ko.length,ae(Ko).call(Ko,function(za){return za.idServer})),xn.onofflinemsgs(ko))})),Lr&&(Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_100),z(Lr).call(Lr,function(ko){Ha.push(ko.timetag),(Ko=ko.msgs).length&&(Qr.logger.info("sync::notifyDataAsync: on offline filter msgs",ko.sessionId,Ko.length),xn.onofflinefiltermsgs(Ko))})),qn&&(Qr.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming",ur(qn),qn),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_22),xn.onSessionsWithMoreRoaming(qn));var to,ha=[],ca=[];vn.deleteMsgSysMsgs&&z(to=vn.deleteMsgSysMsgs).call(to,function(ko){ko.type==="roaming"?ha=$(ha).call(ha,ko.sysMsgs):ca=$(ca).call(ca,ko.sysMsgs)}),ha.length&&(Gr=$(Gr=Gr||[]).call(Gr,ha)),ca.length&&(qr=$(qr=qr||[]).call(qr,ca)),Gr&&(Qr.logger.info("sync::notifyDataAsync: on roaming sys msgs",Gr.length),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_19),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_15),xn.onroamingsysmsgs(Gr)),qr&&(Qr.logger.info("sync::notifyDataAsync: on offline sys msgs",qr.length),xn.onofflinesysmsgs(qr)),bn&&(Qr.logger.info("sync::notifyDataAsync: on offline filter sys msgs",bn.length),xn.onofflinefiltersysmsgs(bn)),Yr&&(Qr.logger.info("sync::notifyDataAsync: on offline custom sys msgs",Yr.length),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_6),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_18),xn.onofflinecustomsysmsgs(Yr)),wn&&(Qr.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs",wn.length),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_101),xn.onofflinefiltercustomsysmsgs(wn)),Xr&&(Xr=jt.merge({},Qr.sysMsgUnread,Xr),Qr.sysMsgUnread=jt.merge({},Xr),Qr.logger.info("sync::notifyDataAsync: on sysMsgUnread",Xr),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_6),xn.onsysmsgunread(Xr));var La=Qr.getPushNotificationMultiportConfig();Qr.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig",La),Qr.reporterHook.emit("reporter/syncItemComplete",cr.kSyncType4_13),xn.onPushNotificationMultiportConfig(La);var Ka=Ts.length&&Math.max.apply(Math,Ts);if(Eo=Ha.length&&Math.max.apply(Math,Ha),Mn.enable){var Zo=[];Ka&&Zo.push(Qr.db.updateSuperTeamRoamingMsgTimetag(Ka)),Eo&&Zo.push(Qr.db.updateRoamingMsgTimetag(Eo)),i.all(Zo).then(Do).catch(Do)}else Qr.timetags.superTeamRoamingMsgs=Ka,Qr.timetags.roamingMsgs=Eo||Qr.timetags.roamingMsgs,Do();Qr.syncPromiseArray=[],Qr.syncResult={}}function Do(){Qr.processUnsettledMsgs(),Qr.msgPromise.then(function(){Qr.canHandleDeletedMsgInSyncing=!0,_e(function(){Qr.processUnsettledSysMsgs()},0)}),Qr.syncing&&xn.onsyncdone(),Qr.syncing=!1,Qr.logger.log("sync::onsyncdone: syncing = false"),Qr.reporterHook.emit("reporter/syncComplete"),Mn.enable&&xn.syncTeamMembers&&Qr.syncTeamMembers(vr),Mn.enable&&xn.syncSuperTeamMembers&&Qr.syncSuperTeamMembers(Ir)}Pn&&Pn.length?i.all(Pn).then(hn).catch(function(Eo){hn(),Qr.logger.error(Eo),Eo.callFunc="sync::onSyncDone",Eo.message="afterSync syncNormalPromise ",Qr.onCustomError("SYNC_promiseArray_ERROR",Eo)}):hn()},Lt.syncTeamMembers=function(){var or=g(n.mark(function hr(pr){var Tr,Pr,_r,Mr,rr,kr,Er,xr;return n.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(Pr=(Tr=this).db,_r={},!Pr.enable){vr.next=33;break}return vr.prev=4,vr.next=7,Pr.getTeamMemberTimetags();case 7:kr=vr.sent,vr.next=14;break;case 10:vr.prev=10,vr.t0=vr.catch(4),Tr.logger.error("sync::syncTeamMembers: getTeamMemberTimetags error",vr.t0),kr={};case 14:if(Ve(pr)){vr.next=25;break}return vr.prev=15,vr.next=18,Pr.getTeams();case 18:pr=vr.sent,vr.next=25;break;case 21:vr.prev=21,vr.t1=vr.catch(15),Tr.logger.error("sync::syncTeamMembers: getTeams error",vr.t1),pr=[];case 25:z(pr).call(pr,function(Ir){_r[Ir.teamId]=0}),Er={},z(Mr=re(kr)).call(Mr,function(Ir){var Or=Ir.split("-")[1];Er[Or]=kr[Ir]}),re(Er).length&&(_r=V(_r,Er)),Tr.logger.log("sync::syncTeamMembers: getTeamMemberTimetags",_r),(xr=k(rr=Tr.onSyncTeamMembers).call(rr,Tr)).isImSyncDataCb=!0,Tr.sendCmd("syncTeamMembers",{sync:_r,isImSyncDataObj:!0},xr);case 33:case"end":return vr.stop()}},hr,this,[[4,10],[15,21]])}));return function(hr){return or.apply(this,arguments)}}(),Lt.syncSuperTeamMembers=function(){var or=g(n.mark(function hr(pr){var Tr,Pr,_r,Mr,rr,kr,Er,xr;return n.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(Pr=(Tr=this).db,_r={},!Pr.enable){vr.next=33;break}return vr.prev=4,vr.next=7,Pr.getSuperTeamMemberTimetags();case 7:kr=vr.sent,vr.next=14;break;case 10:vr.prev=10,vr.t0=vr.catch(4),Tr.logger.error("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags error",vr.t0),kr={};case 14:if(Ve(pr)){vr.next=25;break}return vr.prev=15,vr.next=18,Pr.getSuperTeams();case 18:pr=vr.sent,vr.next=25;break;case 21:vr.prev=21,vr.t1=vr.catch(15),Tr.logger.error("sync::syncSuperTeamMembers: getSuperTeams error",vr.t1),pr=[];case 25:z(pr).call(pr,function(Ir){_r[Ir.teamId]=0}),Er={},z(Mr=re(kr)).call(Mr,function(Ir){var Or=Ir.split("-")[1];Er[Or]=kr[Ir]}),re(Er).length&&(_r=V(_r,Er)),Tr.logger.log("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags",_r),(xr=k(rr=Tr.syncSuperTeamMembersCallBack).call(rr,Tr)).isImSyncDataCb=!0,Tr.sendCmd("syncSuperTeamMembers",{sync:_r,isImSyncDataObj:!0},xr);case 33:case"end":return vr.stop()}},hr,this,[[4,10],[15,21]])}));return function(hr){return or.apply(this,arguments)}}(),Lt.onSyncTeamMembers=function(or){or&&(or.callFunc="sync::onSyncTeamMembers",or.message="",this.onCustomError("SYNC_TEAM_MEMBERS_ERROR",or))},Lt.syncSuperTeamMembersCallBack=function(or){or&&(or.callFunc="sync::SyncSuperTeamMembersCallBack",or.message="",this.onCustomError("SYNC_SUPERTEAM_MEMBERS_ERROR",or))},Lt.onSyncTeamMembersDone=function(){var or=this,hr=or.options,pr=or.syncTeamMembersResult,Tr=or.syncTeamMembersPromiseArray;i.all(Tr).then(function(){var Pr;Tr=[];var _r={};z(Pr=re(pr)).call(Pr,function(Mr){var rr,kr,Er,xr;ue(Mr).call(Mr,"invalid")===-1&&(Mr in _r?($(rr=_r[Mr].members).call(rr,pr[Mr]),$(kr=_r[Mr].invalid).call(kr,pr[Mr+"-invalid"])):_r[Mr]={members:$(Er=[]).call(Er,pr[Mr]||[]),invalid:$(xr=[]).call(xr,pr[Mr+"-invalid"]||[])})}),hr.onsyncteammembersdone(_r),or.syncTeamMembersResult=[],or.syncTeamMembersPromiseArray=[]})},Lt.onSyncSuperTeamMembersDone=function(){var or=this,hr=or.options,pr=or.syncSuperTeamMembersResult,Tr=or.syncSuperTeamMembersPromiseArray;i.all(Tr).then(function(){var Pr;Tr=[];var _r={};z(Pr=re(pr)).call(Pr,function(Mr){var rr,kr,Er,xr;ue(Mr).call(Mr,"invalid")===-1&&(Mr in _r?($(rr=_r[Mr].members).call(rr,pr[Mr]),$(kr=_r[Mr].invalid).call(kr,pr[Mr+"-invalid"])):_r[Mr]={members:$(Er=[]).call(Er,pr[Mr]||[]),invalid:$(xr=[]).call(xr,pr[Mr+"-invalid"]||[])})}),hr.onsyncsuperteammembersdone(_r),or.syncSuperTeamMembersResult=[],or.syncSuperTeamMembersPromiseArray=[]})}},function(t,r,e){var n=e(790),g=e(794),y=e(753),i=e(798);t.exports=function(k){return n(k)||g(k)||y(k)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(750),g=e(751);t.exports=function(y){if(n(y))return g(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(792)},function(t,r,e){var n=e(793);t.exports=n},function(t,r,e){var n=e(300);t.exports=n},function(t,r,e){var n=e(155),g=e(72),y=e(752);t.exports=function(i){if(n!==void 0&&g(i)!=null||i["@@iterator"]!=null)return y(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(796)},function(t,r,e){var n=e(797);t.exports=n},function(t,r,e){var n=e(301);t.exports=n},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(800);t.exports=n},function(t,r,e){e(801);var n=e(13);t.exports=n.Object.values},function(t,r,e){var n=e(1),g=e(802).values;n({target:"Object",stat:!0},{values:function(y){return g(y)}})},function(t,r,e){var n=e(27),g=e(12),y=e(120),i=e(44),k=g(e(150).f),$=g([].push),L=function(V){return function(z){for(var re,ie=i(z),ue=y(ie),le=ue.length,oe=0,ae=[];le>oe;)re=ue[oe++],n&&!k(ie,re)||$(ae,V?[re,ie[re]]:ie[re]);return ae}};t.exports={entries:L(!0),values:L(!1)}},function(t,r,e){t.exports=e(804)},function(t,r,e){var n=e(805);t.exports=n},function(t,r,e){var n=e(19),g=e(806),y=Array.prototype;t.exports=function(i){var k=i.findIndex;return i===y||n(y,i)&&k===y.findIndex?g:k}},function(t,r,e){e(807);var n=e(29);t.exports=n("Array").findIndex},function(t,r,e){var n=e(1),g=e(74).findIndex,y=e(199),i=!0;"findIndex"in[]&&Array(1).findIndex(function(){i=!1}),n({target:"Array",proto:!0,forced:i},{findIndex:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),y("findIndex")},function(t,r,e){var n=e(9),g=e(10),y=e(3),i=e(2),k=e(35).fn,$=e(0),L=$.objs2accounts,V=e(809),z=e(204);k.processUser=function(re){var ie,ue=this,le=ue.db,oe=re.obj,ae=re.error,Ue=re.content;switch(re.cmd){case"markInBlacklist":ae||ue.markInBlacklist(oe);break;case"syncMarkInBlacklist":ue.markInBlacklist(Ue,!0);break;case"markInMutelist":ae||ue.markInMutelist(oe);break;case"syncMarkInMutelist":ue.markInMutelist(Ue,!0);break;case"getRelations":ae||ue.onRelations(re);break;case"syncMyInfo":ue.onMyInfo(re,!0);break;case"updateMyInfo":ae||(oe.user.updateTime=Ue.timetag,ue.onUpdateMyInfo(re,oe.user));break;case"syncUpdateMyInfo":ue.onUpdateMyInfo(re,Ue.user,!0);break;case"getUsers":var de;ae||(ie=n(de=Ue.users).call(de,function(_e){return _e=g(z).call(z,_e,ue.mixStorePolicy&&ue.mixStorePolicy.s3Policy?ue.mixStorePolicy.s3Policy.dlcdns:[],ue.mixStorePolicy&&ue.mixStorePolicy.s3Policy?ue.mixStorePolicy.s3Policy.dlcdn:""),ue.mergeUser(_e),_e}),re.obj=ie,le.enable&&le.putUsers(ie));break;case"updateDonnop":ue.onUpdateDonnop(re);break;case"syncUpdateDonnop":ue.onDonnop(re,!1)}},k.onMyInfo=function(re){var ie,ue=this,le=ue.db,oe=re.error,ae=re.content,Ue=new y(function(_e,Ve){var $e,Lt;oe?(oe&&(oe.callFunc="user::onMyInfo"),_e(oe),ue.syncData()):(ie=g(z).call(z,ae.user),le.enable?($e=_e,Lt=Ve,le.mergeMyInfo(ie,!0).then(function(){de(),$e()}).then(void 0,function(jt){jt.message="db.mergeMyInfo error",jt.callFunc="user::onMyInfo",Lt(jt)})):(de(),_e()))}).catch(function(_e){return ue.logger.error("user::onMyInfo: ",_e),y.reject(_e)});function de(){ue.timetags.myInfo=ie.updateTime,ue.syncResult.myInfo=ie}Ue.cmd="myInfo",ue.syncPromiseArray.push(Ue)},k.onUpdateMyInfo=function(re,ie,ue){var le=this.db,oe=g(z).call(z,ie),ae=$.merge(this.myInfo,oe);this.myInfo=ae,ue?(this.logger.info("user::onUpdateMyInfo:",ae&&ae.account),this.options.onupdatemyinfo(ae)):re.obj=ae,le.enable&&(oe.account=this.account,le.updateUser(oe))},k.onRelations=function(re){var ie,ue=this,le=ue.db,oe=re.error,ae=ue.packetFromSync(re),Ue=re.content.specialRelations,de=!0,_e=[],Ve=[],$e=[],Lt=[],jt=new y(function(ir,ur){var Dt,lr;oe?ae&&(ir(oe),ue.syncData()):(i(Ue).call(Ue,function(sr){var er={account:(sr=V.parse(sr)).account,createTime:sr.createTime,updateTime:sr.updateTime};sr.isBlacked?_e.push(er):Ve.push(er),sr.isMuted?$e.push(er):Lt.push(er)}),ue.logger.info("user::onRelations: parse blacklist",L(_e),_e,"delete",L(Ve),Ve),ue.logger.info("user::onRelations: parse mutelist",L($e),$e,"delete",L(Lt),Lt),Ue.length?(de=!0,ie=re.content.timetag):de=!1,le.enable?(Dt=ir,lr=ur,re.promise=new y(function(sr,er){function cr(){ae?(Et(),sr(),Dt()):le.getRelations().then(function(or){_e=or[0],$e=or[1],Et(),sr(),Dt()}).then(void 0,function(or){or.message="db.getRelations error",or.callFunc="user::onRelations",er(or),lr(or)})}de?le.mergeRelations(_e,Ve,$e,Lt,ie).then(function(){cr()}).then(void 0,function(or){or.message="db.mergeRelations error",or.callFunc="user::onRelations",er(or),lr(or)}):(ue.logger.warn("user::onRelations: no relations need merge"),cr())}).then(void 0,function(sr){throw sr.message="merge relations data error",sr.callFunc="user::onRelations",lr(sr),sr})):(Et(),ir()))}).catch(function(ir){return ue.logger.error("user::onRelations: ",ir),y.reject(ir)});function Et(){ue.timetags.relations=ie,_e.invalid=Ve,$e.invalid=Lt,ae?(ue.syncResult.blacklist=_e,ue.syncResult.mutelist=$e,ue.syncResult.invalidBlacklist=Ve,ue.syncResult.invalidMutelist=Lt):(ue.logger.info("user::onRelations: get relations",_e,$e),re.obj.blacklist=_e,re.obj.mutelist=$e)}ae&&(jt.cmd="relations",ue.syncPromiseArray.push(jt))},k.markInBlacklist=function(re,ie){var ue=this.db;re.record={account:re.account,updateTime:+new Date},ue.enable&&ue.markInBlacklist(re),ie&&(this.logger.info("user::markInBlacklist:",re),this.options.onsyncmarkinblacklist(re))},k.markInMutelist=function(re,ie){var ue=this.db;re.record={account:re.account,updateTime:+new Date},ue.enable&&ue.markInMutelist(re),ie&&(this.logger.info("user::markInMutelist:",re),this.options.onsyncmarkinmutelist(re))},k.mergeUser=function(re){this.userSet[re.account]=re}},function(t,r,e){var n=e(0);function g(){}g.parse=function(y){var i=n.copy(y);return i.isBlacked=i.isBlacked==="1",i.isMuted=i.isMuted==="1",i.createTime=+i.createTime,i.updateTime=+i.updateTime,i},t.exports=g},function(t,r,e){var n=e(125),g=e(2),y=e(10),i=e(3),k=e(6),$=e(9),L=["type"],V=e(35).fn,z=e(0),re=z.objs2accounts,ie=e(755),ue=e(204);V.processFriend=function(le){var oe=le.obj,ae=le.content,Ue=le.error;switch(le.cmd){case"friendRequest":this.updateFriendSysMsg(le),Ue||this.onFriendRequest(oe);break;case"syncFriendRequest":this.onFriendRequest(ae,!0);break;case"deleteFriend":Ue||this.onDeleteFriend(oe);break;case"syncDeleteFriend":this.onDeleteFriend(ae,!0);break;case"updateFriend":Ue||this.onUpdateFriend(oe);break;case"syncUpdateFriend":this.onUpdateFriend(ae.friend,!0);break;case"getFriends":this.getFriends(le);break;case"syncFriends":this.onFriends(le);break;case"syncFriendUsers":this.onFriendUsers(le)}},V.getFriends=function(le){var oe=le.content.friends,ae=[],Ue=[];g(oe).call(oe,function(de){(de=y(ie).call(ie,de)).valid?ae.push(de):Ue.push(de)}),ae.invalid=Ue,le.obj=ae},V.onFriends=function(le){var oe,ae=this,Ue=ae.db,de=le.error,_e=le.content.friends,Ve=!0,$e=[],Lt=[],jt=new i(function(ir,ur){var Dt,lr;de?ur(de):(function(){Ve&&g(_e).call(_e,function(sr){(sr=y(ie).call(ie,sr)).valid?$e.push(sr):Lt.push(sr)}),ae.logger.info("friend::onFriends: parse friends",re($e),"delete",re(Lt)),_e.length?(Ve=!0,oe=le.content.timetag):Ve=!1}(),Ue.enable?(Dt=ir,lr=ur,le.promise=new i(function(sr,er){function cr(){Et(),sr(),Dt()}Ve?Ue.mergeFriends($e,Lt,oe).then(function(){cr()}).then(void 0,function(or){or._msg="merge friends error",er(or),lr(or)}):(ae.logger.info("friend::onFriends: no merge friends"),cr())}).then(void 0,function(sr){throw sr._msg="merge friends data error",lr(sr),sr})):(Et(),ir()))}).catch(function(ir){return ae.logger.error("friend::onFriends: ",ir),i.reject(ir)});function Et(){var ir,ur;ae.timetags.friends=oe,$e.invalid=Lt,ae.syncResult.friends=k(ir=ae.syncResult.friends||[]).call(ir,$e||[]),ae.syncResult.invalidFriends=k(ur=ae.syncResult.invalidFriends||[]).call(ur,Lt||[])}jt.cmd="friends",ae.syncPromiseArray.push(jt)},V.onFriendRequest=function(le,oe){var ae=i.resolve(),Ue=this.db,de=le.type,_e=n(le,L);if((de=le.type=ie.getTypeFromByte(de)||de)==="addFriend"||de==="passFriendApply"){var Ve=le.friend=ie.assembleFriend(_e);Ue.enable&&(ae=Ue.putFriend(Ve))}return oe&&this.onSyncFriendAction(le),ae},V.onSyncFriendAction=function(le){this.logger.info("friend::onSyncFriendActionon: ".concat(le.type,", "),le.account),this.options.onsyncfriendaction(le)},V.onDeleteFriend=function(le,oe){var ae=i.resolve(),Ue=this.db;return Ue.enable&&(ae=Ue.deleteFriend(le.account)),oe&&(le.type="deleteFriend",this.onSyncFriendAction(le)),ae},V.onUpdateFriend=function(le,oe){var ae=this.db,Ue=y(ie).call(ie,le);ae.enable&&ae.updateFriend(Ue),oe&&this.onSyncFriendAction({type:"updateFriend",friend:Ue})},V.onFriendUsers=function(le){var oe,ae,Ue=this.db,de=le.content,_e=$(oe=de.users).call(oe,function(Lt){return y(ue).call(ue,Lt)});this.logger.info("friend::onFriendUsers: parse users",re(_e));var Ve=de.timetag,$e=i.resolve();Ue.enable&&($e=Ue.mergeFriendUsers(_e,Ve)),this.timetags.friendUsers=Ve,$e.cmd="friendUsers",this.syncPromiseArray.push($e),this.syncResult.users=k(ae=this.syncResult.users||[]).call(ae,_e||[]),this.syncing||this.onSyncDone()},V.updateFriendSysMsg=function(le){var oe,ae,Ue=le.obj,de=le.error;if(le.obj.idServer){if(de)oe="error",de=z.filterObj(de,"code message");else{var _e=Ue.type;switch(_e=ie.getTypeFromByte(_e)||_e){case"passFriendApply":oe="passed";break;case"rejectFriendApply":oe="rejected"}}ae={idServer:Ue.idServer,state:oe,from:Ue.account,type:"applyFriend"},de&&(ae.error=de),this.updateSysMsg(ae)}}},function(t,r,e){var n=e(32),g=e(16),y=e(35).fn,i=e(0);y.onRobots=function(k){var $=k.content;if(i.isFunction(this.options.onrobots)&&n($.robots)){var L,V=g(L=$.robots).call(L,function(z){return!!z.botid});V.length>0&&this.options.onrobots(V||[])}}},function(t,r,e){var n=e(57),g=e(58),y=e(10),i=e(2),k=e(24),$=e(121),L=e(3),V=e(9),z=e(6),re=e(16),ie=e(4),ue=e(35).fn,le=e(0),oe=le.objs2accounts,ae=le.teams2ids,Ue=e(194),de=e(152);ue.processTeam=function(_e){var Ve,$e,Lt,jt=_e.error;switch(_e.obj===void 0&&(_e.obj={}),_e.cmd){case"createTeam":Ve=_e.obj.team,jt||(Ve=_e.content.team),Ve=y(Ue).call(Ue,Ve),_e.obj.team=Ve,Lt=de.assembleOwner(Ve),_e.obj.owner=Lt,jt||(this.logger.info("team::processTeam: create team ",Ve&&Ve.teamId,Lt&&Lt.account),this.onCreateTeam(Ve,Lt));break;case"syncCreateTeam":Ve=y(Ue).call(Ue,_e.content.team),Lt=de.assembleOwner(Ve),this.logger.info("team::processTeam: sync createTeam",Ve&&Ve.teamId,Lt&&Lt.account),this.options.onsynccreateteam(Ve,Lt),this.onCreateTeam(Ve,Lt);break;case"sendSuperTeamMsg":case"sendTeamMsg":this.onSendMsg(_e);break;case"teamMsg":this.onMsg(_e);break;case"teamMsgs":this.onMsgs(_e);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":jt||(_e.promise=this.onUpdateInfoInTeam(_e));break;case"updateNickInTeam":_e.obj=y(de).call(de,_e.obj);break;case"updateTeam":_e.obj=y(Ue).call(Ue,_e.obj,!0);break;case"applyTeam":_e.error||(_e.obj=y(Ue).call(Ue,_e.content.team));break;case"passTeamApply":this.updateTeamSysMsgState(_e,"passed");break;case"rejectTeamApply":this.updateTeamSysMsgState(_e,"rejected");break;case"acceptTeamInvite":this.updateTeamSysMsgState(_e,"passed"),_e.error||(_e.obj=y(Ue).call(Ue,_e.content.team));break;case"rejectTeamInvite":this.updateTeamSysMsgState(_e,"rejected");break;case"getTeam":_e.error||(_e.obj=y(Ue).call(Ue,_e.content.team));break;case"getTeams":this.onTeams(_e);break;case"getTeamMembers":this.onTeamMembers(_e);break;case"syncTeams":this.onTeams(_e);break;case"syncTeamMembers":this.onTeamMembers(_e);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":this.onHistoryMsgs(_e);break;case"syncSendTeamMsg":this.onMsg(_e);break;case"notifyTeamMsgReads":this.onTeamMsgReceipt(_e);break;case"syncUpdateTeamMember":($e=y(de).call(de,_e.content.teamMember)).account===this.account&&this.mergeMyTeamMembers($e),this.onUpdateTeamMember($e);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":_e.error||(_e.obj=de.reverseMembers(_e.content.teamMembers));break;case"getMutedTeamMembers":_e.error||(_e.obj={teamId:_e.obj.teamId,members:de.reverseMembers(_e.content.teamMembers)});break;case"syncMyTeamMembers":this.onSyncMyTeamMembers(_e);break;case"sendTeamMsgReceipt":this.sendTeamMsgReceipt(_e);break;case"getTeamMsgReads":this.getTeamMsgReads(_e);break;case"getTeamMsgReadAccounts":this.getTeamMsgReadAccounts(_e);break;case"getTeamsById":this.getTeamsById(_e)}},ue.onUpdateInfoInTeam=function(){var _e=g(n.mark(function Ve($e){var Lt,jt,Et;return n.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(Lt=this,!($e.content&&$e.content.teamMember&&$e.content.teamMember.teamId)){ir.next=11;break}if(jt=y(de).call(de,$e.content.teamMember),!Lt.db.enable){ir.next=7;break}return ir.next=6,Lt.db.updateTeamMember(jt);case 6:jt=ir.sent;case 7:return Lt.mergeMyTeamMembers(jt),Lt.onUpdateTeamMember(jt),$e.obj=jt,ir.abrupt("return");case 11:if((Et=$e.obj.teamMember?$e.obj.teamMember:$e.obj).account=Lt.account,Et.account){ir.next=15;break}return ir.abrupt("return");case 15:Et.id=de.genId(Et.teamId,Et.account),Et=y(de).call(de,Et),Lt.mergeMyTeamMembers(Et),$e.obj=Lt.myTeamMembersMap&&Lt.myTeamMembersMap[Et.teamId]||Et,Lt.onUpdateTeamMember(Et);case 20:case"end":return ir.stop()}},Ve,this)}));return function(Ve){return _e.apply(this,arguments)}}(),ue.getTeamMsgReads=function(_e){var Ve=this;if(_e.error)this.logger.error("team::sendTeamMsgReceipt: ",_e.error);else{var $e=le._get(_e,"content.teamMsgReceipts")||[];if(this.db.enable){var Lt=[];i($e).call($e,function(jt){jt.idClient&&Lt.push({idClient:jt.idClient,unread:+jt.unread,read:+jt.read})}),Lt.length>0&&k(function(){return Ve.db.updateMsgBatch(Lt)},0)}}},ue.getTeamMsgReadAccounts=function(_e){if(_e.error)this.logger.error("team::getTeamMsgReadAccounts: ",_e.error);else{var Ve=le._get(_e,"content.readAccounts")||[],$e=le._get(_e,"content.unreadAccounts")||[],Lt=le._get(_e,"content.teamMsgReceipt.idClient")||[];this.db.enable&&this.db.putMsgReadDetail({idClient:Lt,readAccounts:Ve,unreadAccounts:$e})}},ue.sendTeamMsgReceipt=function(_e){var Ve=this;if(_e.error)this.logger.error("team::sendTeamMsgReceipt: ",_e.error);else{var $e=le._get(_e,"obj.teamMsgReceipts")||[],Lt=le._get(_e,"content.teamMsgReceipts")||[];if(this.db.enable){var jt=[];i($e).call($e,function(Et){$(Lt).call(Lt,function(ir){return Et.idServer===ir.idServer})||jt.push({idClient:Et.idClient,hasRead:!0})}),jt.length>0&&(this.logger.log("sendTeamMsgReceipt::updateMsgBatch"),k(function(){return Ve.db.updateMsgBatch(jt)},0))}}},ue.onCreateTeam=function(_e,Ve){var $e=this.db;$e.enable&&($e.putTeam(_e),$e.putTeamMembers(Ve)),this.options.onCreateTeam(_e,Ve)},ue.onTeams=function(_e){_e.content=_e.content||{};var Ve,$e=this,Lt=$e.db,jt=$e.packetFromSync(_e),Et=_e.content.teams||[],ir=!0,ur=[],Dt=[];if(_e.error)switch(_e.error.code){case 803:_e.error=null,ir=!1}var lr=new L(function(er,cr){var or,hr;_e.error?jt&&cr(_e.error):(function(){ir&&i(Et).call(Et,function(pr){(pr=y(Ue).call(Ue,pr)).validToCurrentUser?ur.push(pr):Dt.push(pr)}),Et.length?(ir=!0,Ve=_e.content.timetag):ir=!1}(),Lt.enable?(or=er,hr=cr,_e.promise=new L(function(pr,Tr){function Pr(){jt?(sr(),pr(),or()):Lt.getTeams().then(function(_r){ur=_r,sr(),pr(),or()}).catch(function(_r){_r.message="db.getTeams error",_r.callFunc="team::afterMergeData",Tr(_r),hr(_r)})}ir?Lt.mergeTeams(ur,Dt,Ve).then(function(){Pr()}).catch(function(_r){var Mr={callFunc:"team::onTeams:mergeData",message:"db.mergeTeams error",event:_r};Tr(Mr),hr(Mr)}):($e.logger.warn("team::onTeams:mergeData: no teams need merge"),Pr())}).then(void 0,function(pr){throw pr.message="merge teams data error",pr.callFunc="team::mergeData",hr(pr),pr})):(sr(),er()))}).catch(function(er){return $e.logger.error("team::onTeams: ",er),L.reject(er)});function sr(){$e.timetags.teams=Ve,ur.invalid=Dt,jt?($e.syncResult.teams=ur,$e.syncResult.invalidTeams=Dt,$e.syncing||$e.onSyncDone()):($e.logger.info("team::onTeams: not in syncing, get teams",ae(ur)),_e.obj=ur)}jt&&(lr.cmd="teams",$e.syncPromiseArray.push(lr))},ue.getTeamsById=function(_e){var Ve;if(_e.error){if(_e.error.code!==816)return;this.logger.error("team::getTeamsById: ",_e.error),_e.error=null}_e.content.teams=V(Ve=_e.content.teams).call(Ve,function($e){return y(Ue).call(Ue,$e)}),_e.obj=_e.content},ue.onTeamMembers=function(_e){_e.content=_e.content||{};var Ve,$e=this,Lt=$e.db,jt=$e.packetFromSync(_e),Et=_e.content.members||[],ir=!0,ur=[],Dt=[];if(_e.obj&&(Ve=_e.obj.teamId),Ve||(Ve=_e.content.teamId),Ve=""+Ve,_e.error)switch(_e.error.code){case 406:_e.error=null,ir=!1}var lr=new L(function(sr,er){_e.error?($e.logger.error("team::onTeamMember: team error:",Ve,_e.error),sr()):(function(){ir&&i(Et).call(Et,function(cr){(cr=y(de).call(de,cr)).valid?ur.push(cr):Dt.push(cr)}),Et.length?(ir=!0,_e.content.timetag):ir=!1}(),function(cr,or){if(jt){$e.syncTeamMembersResult[Ve]=ur,$e.syncTeamMembersResult[Ve+"-invalid"]=Dt;var hr=z(ur).call(ur,Dt);Lt.putTeamMembers(hr).catch(function(pr){throw $e.logger.error("team::onTeamMembers: putTeamMembers error: ",pr),pr}).then(function(){return Lt.updateTeamMemberTimetag(Ve,_e.content.timetag)}).catch(function(pr){$e.logger.error("team::onTeamMembers error: ",pr,Ve,_e.content.timetag)}).then(cr)}else $e.logger.info("team::onTeamMembers: not syncing, get members",Ve,oe(ur)),_e.obj={teamId:Ve,members:ur},cr()}(sr))});jt&&(lr.cmd=Ve,$e.syncTeamMembersPromiseArray.push(lr))},ue.onUpdateTeamMember=function(_e){if(_e.updateTime||(_e.updateTime=+new Date),this.account===_e.account){var Ve=this.myTeamMembersMap[_e.teamId];this.logger.info("team::onMyTeamMembers: ",[Ve]),_e=Ve||_e,this.options.onMyTeamMembers(le.simpleClone([Ve]))}this.logger.info("team::onUpdateTeamMember: ",_e&&_e.account),this.options.onupdateteammember(le.simpleClone(_e));var $e={teamId:_e.teamId,memberUpdateTime:_e.updateTime};this.onUpdateTeam($e);var Lt=this.db;Lt.enable&&Lt.updateTeamMember(_e)},ue.onUpdateTeam=function(_e){this.logger.info("team::onUpdateTeam:",_e&&_e.teamId),this.options.onUpdateTeam(le.simpleClone(_e));var Ve=this.db;Ve.enable&&Ve.updateTeam(_e)},ue.onSyncMyTeamMembers=function(_e){var Ve=this,$e=Ve.db,Lt=de.reverseMembers(_e.content.teamMembers);if($e.enable){var jt=$e.putTeamMembers(Lt).then(function(){return $e.updateMyTeamMembersTimetag(_e.content.timetag)}).catch(function(Et){return Ve.logger.error("team::syncMyTeamMember: ",Et),L.reject(Et)});jt.cmd="myTeamMembers",Ve.syncTeamMembersPromiseArray.push(jt),Ve.syncPromiseArray.push(jt)}else Ve.syncResult.myTeamMembers=Lt;Ve.mergeMyTeamMembers(Lt)},ue.mergeMyTeamMembers=function(_e){le.isArray(_e)||(_e=[_e]);var Ve=this.myTeamMembersMap=this.myTeamMembersMap||{};i(_e).call(_e,function($e){var Lt=$e.teamId;Ve[Lt]=le.merge(Ve[Lt],$e)})},ue.notifyForNewTeamMsg=function(_e){le.isArray(_e)||(_e=[_e]);var Ve=this,$e=this.myTeamMembersMap||{},Lt={},jt=[];i(_e).call(_e,function(ir){le.exist($e[ir])?Lt[ir]=$e[ir].muteNotiType:jt.push(ir)});var Et=L.resolve({map:Lt});return jt.length&&(Et=Ve.api.getMyTeamMembers({teamIds:jt,promise:!0}).then(function(ir){Ve.mergeMyTeamMembers(ir),i(ir).call(ir,function(Dt){Lt[Dt.teamId]=Dt.muteNotiType});var ur=re(_e).call(_e,function(Dt){return!Lt[Dt]});return L.resolve({map:Lt,miss:ur})}).catch(function(ir){return ie(Lt).length>0?L.resolve({map:Lt,miss:jt,error:ir}):L.reject(ir)})),Et},ue.updateTeamSysMsgState=function(_e,Ve){var $e,Lt=_e.error;Lt&&(Ve="error",Lt=le.filterObj(Lt,"code message")),$e={idServer:_e.obj.idServer,state:Ve,from:_e.obj.from,type:_e.obj.type},Lt&&($e.error=Lt),this.updateSysMsg($e)},ue.onTeamMsgReceipt=function(_e){var Ve=_e.content,$e=_e.error;$e&&this.logger.error("team::onTeamMsgReceipt:",$e),Ve&&Ve.teamMsgReceipts&&(this.options.onTeamMsgReceipt(Ve),this.options.onMsgReceipts(Ve.teamMsgReceipts))}},function(t,r,e){var n=e(57),g=e(58),y=e(10),i=e(3),k=e(2),$=e(6),L=e(35).fn,V=e(0),z=V.teams2ids,re=e(308),ie=e(203);L.processSuperTeam=function(ue){var le,oe,ae,Ue=ue.error;switch(ue.obj===void 0&&(ue.obj={}),ue.cmd){case"sendSuperTeamMsg":this.onSendMsg(ue);break;case"superTeamMsg":this.onMsg(ue);break;case"sendSuperTeamCustomSysMsg":this.onSendSysMsg(ue);break;case"superTeamCustomSysMsg":this.onSysMsg(ue);break;case"syncSuperTeams":this.onSuperTeams(ue);break;case"syncCreateSuperTeam":le=y(re).call(re,ue.content.team),ae=ie.assembleOwner(le),this.logger.info("team::processTeam: sync createTeam",le&&le.teamId,ae&&ae.account),this.options.onSyncCreateSuperTeam(le,ae),this.onCreateSuperTeam(le,ae);break;case"getSuperTeamHistoryMsgs":case"searchSuperTeamHistoryMsgs":this.onHistoryMsgs(ue);break;case"syncSendSuperTeamMsg":this.onMsg(ue);break;case"addSuperTeamMembers":case"removeSuperTeamMembers":case"leaveSuperTeam":case"addSuperTeamManagers":case"removeSuperTeamManagers":case"transferSuperTeam":break;case"updateInfoInSuperTeam":Ue||(ue.promise=this.onUpdateInfoInSuperTeam(ue));break;case"updateNickInTeam":ue.obj=y(ie).call(ie,ue.obj);break;case"syncUpdateSuperTeamMember":(oe=y(ie).call(ie,ue.content.teamMember)).account===this.account&&this.mergeMySuperTeamMembers(oe),this.onUpdateSuperTeamMember(oe);break;case"updateSuperTeam":ue.obj=y(re).call(re,ue.obj,!0);break;case"getSuperTeam":ue.error||(ue.obj=y(re).call(re,ue.content.team));break;case"getSuperTeams":this.onSuperTeams(ue);break;case"syncSuperTeamMembers":this.onSyncSuperTeamMembers(ue);break;case"syncMySuperTeamMembers":this.onSyncMySuperTeamMembers(ue);break;case"getSuperTeamMembers":ue.error||this.onGetAllSuperTeamMembers(ue);break;case"getSuperTeamMembersByJoinTime":case"getSuperTeamMembersByAccounts":case"getMutedSuperTeamMembers":ue.error||this.onSuperTeamMembers(ue);break;case"onDeleteSuperTeamMsg":this.onDeleteMsg(ue);break;case"onSuperTeamMsgDelete":case"syncDeleteSuperTeamMsg":this.onMsgDeleted(ue,!0);break;case"onMarkSuperTeamSessionAck":this.onMarkSessionAck(ue);break;case"syncMarkSuperTeamSessionAck":this.syncMarkSessionAck(ue);break;case"passSuperTeamApply":this.updateSuperTeamSysMsgState(ue,"passed");break;case"rejectSuperTeamApply":this.updateTeamSysMsgState(ue,"rejected");break;case"acceptSuperTeamInvite":this.updateTeamSysMsgState(ue,"passed");break;case"rejectSuperTeamInvite":this.updateSuperTeamSysMsgState(ue,"rejected");break;case"getMySuperTeamMembers":ue.error||(ue.obj=ie.reverseMembers(ue.content.members))}},L.onUpdateInfoInSuperTeam=function(){var ue=g(n.mark(function le(oe){var ae,Ue,de;return n.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(ae=this,!(oe.content&&oe.content.superTeamMember&&oe.content.superTeamMember.teamId)){_e.next=11;break}if(Ue=y(ie).call(ie,oe.content.superTeamMember),!ae.db.enable){_e.next=7;break}return _e.next=6,ae.db.updateSuperTeamMember(Ue);case 6:Ue=_e.sent;case 7:return ae.mergeMySuperTeamMembers(Ue),ae.onUpdateSuperTeamMember(Ue),oe.obj=Ue,_e.abrupt("return");case 11:(de=oe.obj.superTeamMember?oe.obj.superTeamMember:oe.obj).account=ae.account,de.id=ie.genId(de.teamId,de.account),de=y(ie).call(ie,de),ae.mergeMySuperTeamMembers(de),oe.obj=ae.mySuperTeamMembersMap&&ae.mySuperTeamMembersMap[de.teamId]||de,ae.onUpdateSuperTeamMember(de);case 18:case"end":return _e.stop()}},le,this)}));return function(le){return ue.apply(this,arguments)}}(),L.onSuperTeams=function(ue){ue.content=ue.content||{};var le,oe=this,ae=oe.db,Ue=oe.packetFromSync(ue),de=ue.content.teams||[],_e=!0,Ve=[],$e=[];if(ue.error)switch(ue.error.code){case 803:ue.error=null,_e=!1}var Lt=new i(function(Et,ir){var ur,Dt;ue.error?Ue&&ir(ue.error):(function(){_e&&k(de).call(de,function(lr){(lr=y(re).call(re,lr)).validToCurrentUser?Ve.push(lr):$e.push(lr)}),de.length?(_e=!0,le=ue.content.timetag):_e=!1}(),ae.enable?(ur=Et,Dt=ir,ue.promise=new i(function(lr,sr){function er(){Ue?(jt(),lr(),ur()):ae.getSuperTeams().then(function(cr){Ve=cr,jt(),lr(),ur()}).then(void 0,function(cr){cr.message="db.getSuperTeams error",cr.callFunc="superTeam::afterMergeData",sr(cr),Dt(cr)})}_e?ae.mergeSuperTeams(Ve,$e,le).then(function(){er()}).then(void 0,function(cr){var or={callFunc:"superTeam::onSuperTeams:mergeData",message:"db.mergeSuperTeams error",event:cr};sr(or),Dt(or)}):(oe.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"),er())}).then(void 0,function(lr){throw lr.message="merge teams data error",lr.callFunc="superTeam::mergeData",Dt(lr),lr})):(jt(),Et()))}).catch(function(Et){return oe.logger.error("superTeam::onSuperTeams: ",Et),i.reject(Et)});function jt(){oe.timetags.superTeams=le,Ve.invalid=$e,Ue?(oe.syncResult.superTeams=Ve,oe.syncResult.invalidSuperTeams=$e):(oe.logger.info("superTeam::onSuperTeams: not in syncing, get teams",z(Ve)),ue.obj=Ve)}Ue&&(Lt.cmd="superteams",oe.syncPromiseArray.push(Lt))},L.onCreateSuperTeam=function(ue,le){var oe=this.db;oe.enable&&(oe.putSuperTeam(ue),oe.putSuperTeamMembers(le))},L.onGetAllSuperTeamMembers=function(ue){var le=this,oe=this.db,ae=ue.raw.ser,Ue=this.superTeamMembersData[ae]||{},de=Ue.teamId||ue.obj&&ue.obj.teamId;if(oe.enable){var _e=ue.content&&ue.content.timetag,Ve=ue.raw.code===200?i.all(Ue.pArr):i.resolve();ue.promise=Ve.then(function(){return oe.getSuperTeamMembers(de).then(function($e){_e&&oe.updateSuperTeamMemberTimetag(de,_e),ue.obj={members:$e,invalid:[],teamId:de}})}).catch(function($e){return le.logger.error($e)})}else ue.obj={members:Ue.members,invalid:Ue.invalid,teamId:de};this.superTeamMembersData[ae]=void 0},L.onSyncSuperTeamMembers=function(ue){var le,oe=this,ae=this.db,Ue=[],de=[],_e=ue.content.members||[],Ve=ue.raw.ser,$e=oe.packetFromSync(ue);if(ue.obj&&(le=ue.obj.teamId),le||(le=ue.content.teamId),k(_e).call(_e,function(ir){(ir=y(ie).call(ie,ir)).valid?de.push(ir):Ue.push(ir)}),$e){var Lt=new i(function(ir,ur){if(ue.error)oe.logger.error("team::onSuperTeamMember: team error:",le,ue.error),ir();else{oe.syncSuperTeamMembersResult[le]=de,oe.syncSuperTeamMembersResult[le+"-invalid"]=Ue;var Dt=$(de).call(de,Ue);ae.putSuperTeamMembers(Dt).catch(function(lr){throw oe.logger.error("team::onSuperTeamMembers: putSuperTeamMembers error: ",lr),lr}).then(function(){return ae.updateSuperTeamMemberTimetag(le,ue.content.timetag)}).catch(function(lr){oe.logger.error("team::onSuperTeamMembers error: ",lr,le,ue.content.timetag)}).then(ir)}});oe.syncSuperTeamMembersPromiseArray.push(Lt)}else{if(ae.enable){oe.superTeamMembersData[Ve]=oe.superTeamMembersData[Ve]||{teamId:le,pArr:[]};var jt=i.resolve();ue.content&&ue.content.isAll&&(jt=ae.deleteSuperTeamMembers(le));var Et=jt.then(function(){return ae.mergeSuperTeamMembers(le,de,Ue)}).then(function(){return i.resolve()});oe.superTeamMembersData[Ve].pArr.push(Et)}else oe.superTeamMembersData[Ve]=oe.superTeamMembersData[Ve]||{teamId:le,members:[],invalid:[]},de.length&&(oe.superTeamMembersData[Ve].members=oe.api.mergeTeamMembers(oe.superTeamMembersData[Ve].members,de)),Ue.length&&(oe.superTeamMembersData[Ve].invalid=oe.api.mergeTeamMembers(oe.superTeamMembersData[Ve].invalid,Ue));ue.raw=void 0}},L.onSyncMySuperTeamMembers=function(ue){var le=this,oe=le.db,ae=ie.reverseMembers(ue.content.teamMembers);if(oe.enable){var Ue=oe.putSuperTeamMembers(ae).then(function(){return oe.updateMySuperTeamMembersTimetag(ue.content.timetag)}).catch(function(de){return le.logger.error("superTeam::syncMySuperTeamMember: ",de),i.reject(de)});le.syncPromiseArray.push(Ue)}else le.syncResult.mySuperTeamMembers=ae;le.mergeMySuperTeamMembers(ae)},L.onSuperTeamMembers=function(ue,le){var oe,ae=this.db,Ue=[],de=[],_e=ue.content.members||[];k(_e).call(_e,function(Ve){(Ve=y(ie).call(ie,Ve)).valid?de.push(Ve):Ue.push(Ve)}),ue.obj&&(oe=ue.obj.teamId),oe||(oe=ue.content.teamId||de[0]&&de[0].teamId),ae.enable&&!le&&ae.mergeSuperTeamMembers(oe,de,Ue),ue.obj={members:de,invalid:Ue,teamId:oe}},L.onUpdateSuperTeamMember=function(ue){if(ue.updateTime||(ue.updateTime=+new Date),this.account===ue.account){var le=this.mySuperTeamMembersMap[ue.teamId];this.logger.info("superTeam::onMySuperTeamMembers: ",[le]),ue=le||ue,this.options.onMySuperTeamMembers(V.simpleClone([le]))}this.logger.info("superTeam::onUpdateSuperTeamMember: ",ue&&ue.account),this.options.onUpdateSuperTeamMember(V.simpleClone(ue));var oe={teamId:ue.teamId,memberUpdateTime:ue.updateTime};this.onUpdateSuperTeam(oe);var ae=this.db;ae.enable&&ae.updateSuperTeamMember(ue)},L.onUpdateSuperTeam=function(ue){this.logger.info("superteam::onUpdateSuperTeam:",ue&&ue.teamId),this.options.onUpdateSuperTeam(V.simpleClone(ue));var le=this.db;le.enable&&le.updateSuperTeam(ue)},L.mergeMySuperTeamMembers=function(ue){V.isArray(ue)||(ue=[ue]);var le=this.mySuperTeamMembersMap=this.mySuperTeamMembersMap||{};k(ue).call(ue,function(oe){var ae=oe.teamId;le[ae]=V.merge(le[ae],oe)})},L.updateSuperTeamSysMsgState=function(ue,le){var oe,ae=ue.error;ae&&(le="error",ae=V.filterObj(ae,"code message")),oe={idServer:ue.obj.idServer,state:le,from:ue.obj.from,type:ue.obj.type},ae&&(oe.error=ae),this.updateSysMsg(oe)}},function(t,r,e){var n=e(10),g=e(3),y=e(24),i=e(35).fn,k=e(0),$=e(310);i.processNotify=function(L){switch(L.cmd){case"syncOfflineNetcallMsgs":case"syncOfflineMsgs":this.onOfflineMsgs(L);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":case"syncOfflineSuperTeamSysMsgs":this.onOfflineSysMsgs(L);break;case"syncRoamingMsgs":case"syncSuperTeamRoamingMsgs":this.onRoamingMsgs(L);break;case"syncOfflineFilterMsgs":this.onOfflineMsgs(L,!0);break;case"syncOfflineFilterSysMsgs":this.onOfflineSysMsgs(L,!0);break;case"syncMsgReceipts":this.onOfflineMsgReceipts(L);break;case"syncDonnop":this.onDonnop(L,!0);break;case"syncSessionAck":this.syncSessionAck(L);break;case"syncSuperTeamSessionAck":this.syncSuperTeamSessionAck(L);break;case"syncRobots":this.onRobots(L);break;case"syncBroadcastMsgs":this.onBroadcastMsgs(L);break;case"syncDeleteSuperTeamMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(L);break;case"syncDeleteMsgSelf":this.syncDeleteMsgSelf(L);break;case"syncSessionsWithMoreRoaming":this.syncSessionsWithMoreRoaming(L);break;case"syncStickTopSessions":this.syncStickTopSessions(L);break;case"syncSessionHistoryMsgsDelete":this.syncSessionHistoryMsgsDelete(L)}},i.onDonnop=function(L,V){if(!L.error){var z=this,re=z.db,ie=n($).call($,L.content.donnop);z.mergeDonnop(ie);var ue=z.dbDonnop();if(V){var le=L.content.timetag;z.timetags.donnop=le,re.enable&&(ue=ue.then(function(){return z.db.updateDonnopTimetag(le)}).catch(function(oe){return z.logger.error("notify::onDonnop: ",oe),g.reject(oe)})),ue.cmd="donnop",z.syncPromiseArray.push(ue)}else z.onPushNotificationMultiportConfigUpdate()}},i.onUpdateDonnop=function(L){if(!L.error){var V=L.obj;V&&(this.mergeDonnop(k.filterObj(V,["shouldPushNotificationWhenPCOnline"])),this.dbDonnop(),this.onPushNotificationMultiportConfigUpdate())}},i.getPushNotificationMultiportConfig=function(){return k.merge({},this.pushNotificationMultiportConfig)},i.mergeDonnop=function(L){this.pushNotificationMultiportConfig=k.merge({},this.pushNotificationMultiportConfig,L)},i.dbDonnop=function(){return this.db.enable?this.db.setDonnop(this.pushNotificationMultiportConfig):g.resolve()},i.onPushNotificationMultiportConfigUpdate=function(){var L=this;y(function(){var V=L.getPushNotificationMultiportConfig();L.logger.info("link::onPushNotificationMultiportConfigUpdate:",V),L.options.onPushNotificationMultiportConfigUpdate(V)})}},function(t,r,e){var n=e(51),g=e(2),y=e(16),i=e(9),k=e(3),$=e(4),L=e(7),V=e(8),z=e(10),re=e(122),ie=e(6),ue=e(24),le=e(26),oe=e(48),ae=e(37),Ue=e(158),de=e(52),_e=e(53),Ve=e(54),$e=e(55),Lt=e(43),jt=e(15),Et=e(88),ir=e(89),ur=e(72),Dt=e(32);function lr(vr,Ir){var Or=ir!==void 0&&ur(vr)||vr["@@iterator"];if(!Or){if(Dt(vr)||(Or=function($r,Lr){var Gr;if($r){if(typeof $r=="string")return sr($r,Lr);var qr=jt(Gr=Object.prototype.toString.call($r)).call(Gr,8,-1);if(qr==="Object"&&$r.constructor&&(qr=$r.constructor.name),qr==="Map"||qr==="Set")return Et($r);if(qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qr))return sr($r,Lr)}}(vr))||Ir&&vr&&typeof vr.length=="number"){Or&&(vr=Or);var Cr=0,yr=function(){};return{s:yr,n:function(){return Cr>=vr.length?{done:!0}:{done:!1,value:vr[Cr++]}},e:function($r){throw $r},f:yr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fr,Sr=!0,Br=!1;return{s:function(){Or=Or.call(vr)},n:function(){var $r=Or.next();return Sr=$r.done,$r},e:function($r){Br=!0,fr=$r},f:function(){try{Sr||Or.return==null||Or.return()}finally{if(Br)throw fr}}}}function sr(vr,Ir){(Ir==null||Ir>vr.length)&&(Ir=vr.length);for(var Or=0,Cr=new Array(Ir);Or<Ir;Or++)Cr[Or]=vr[Or];return Cr}function er(vr,Ir){var Or=$(vr);if(de){var Cr=de(vr);Ir&&(Cr=y(Cr).call(Cr,function(yr){return _e(vr,yr).enumerable})),Or.push.apply(Or,Cr)}return Or}var cr=e(35).fn,or=e(0),hr=or.undef,pr=e(45),Tr=e(152),Pr=e(203),_r=e(154),Mr=e(291),rr=e(11),kr=e(64),Er=e(76);function xr(vr,Ir,Or){var Cr=this,yr=Cr.message.Message,fr=Or?"offlineFilterMsgs":"offlineMsgs";if(!(Ir&&Ir.length>0))return k.resolve();var Sr=yr.getMaxTimetag(Ir),Br=Ir[0].scene,$r=Ir[0].target;Cr.markMsgRead(Ir),Ir=yr.deduplication(Ir),Ir=yr.sortMsgs(Ir);var Lr=Cr.genSessionByMsgs(Ir);Cr.cacheSyncedSession(Lr);var Gr=Cr.putMsg(Ir,"offlineMsgs").then(function(qr){var Yr=qr;(Yr=Cr.filterIgnore(Yr)).length&&(Cr.logger.info("msg::onOfflineMsgs toreLastSession",fr,vr,Yr.length),Cr.syncResult[fr]=Cr.syncResult[fr]||[],Cr.syncResult[fr].push({sessionId:vr,scene:Br,to:$r,msgs:Yr,timetag:Sr}))}).catch(function(qr){return Cr.logger.error("msg::onOfflineMsgs: ",qr),k.reject(qr)});return Gr.cmd="offlineMsgs-"+vr,Gr}cr.processMsg=function(vr){switch(vr.cmd){case"sendMsg":this.onSendMsg(vr);break;case"msg":this.onMsg(vr);break;case"sysMsg":this.onSysMsg(vr);break;case"broadcastMsg":this.onBroadcastMsg(vr);break;case"sendCustomSysMsg":this.onSendSysMsg(vr);break;case"getHistoryMsgs":case"searchHistoryMsgs":this.onHistoryMsgs(vr);break;case"msgFtsInServer":case"msgFtsInServerByTiming":this.onmsgFtsInServer(vr);break;case"syncSendMsg":this.onMsg(vr);break;case"deleteSessions":this.onDeleteSessions(vr);break;case"sendMsgReceipt":this.onSendMsgReceipt(vr);break;case"msgReceipt":this.onMsgReceipt(vr);break;case"onDeleteMsg":this.onDeleteMsg(vr);break;case"onMsgDeleted":this.onMsgDeleted(vr);break;case"onDeleteMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(vr);break;case"onMarkSessionAck":this.onMarkSessionAck(vr);break;case"syncMarkSessionAck":this.syncMarkSessionAck(vr);break;case"syncUpdateServerSession":this.onSyncUpdateServerSession(vr);break;case"deleteMsgSelf":this.deleteMsgSelf(vr);break;case"deleteMsgSelfBatch":this.deleteMsgSelfBatch(vr);break;case"onDeleteMsgSelf":this.onDeleteMsgSelf(vr);break;case"onDeleteMsgSelfBatch":this.onDeleteMsgSelfBatch(vr);break;case"clearServerHistoryMsgs":this.clearServerHistoryMsgs(vr);break;case"onClearServerHistoryMsgs":this.onClearServerHistoryMsgs(vr)}},cr.checkIgnore=function(vr){var Ir=this;g(vr).call(vr,function(Or){if(!Or.ignore){try{Ir.options.shouldIgnoreMsg(Or)&&(Or.ignore=!0)}catch(yr){throw Ir.logger.error("userOption:shouldIgnoreMsg function error",yr),yr}var Cr;try{Cr=Ir.options.shouldIgnoreNotification(Or)}catch(yr){throw Ir.logger.error("userOption:shouldIgnoreNotification function error",yr),yr}Or.type==="notification"&&Cr&&(Or.ignore=!0)}})},cr.filterIgnore=function(vr){return y(vr).call(vr,function(Ir){return!Ir.ignore})},cr.genSessionByMsgs=function(vr){return this.checkIgnore(vr),_r.genSessionByMsgs(this.message.Message,vr)},cr.onRoamingMsgs=function(vr){var Ir=this,Or=Ir.message,Cr=Or.Message,yr=Cr.getMaxTimetag,fr=Or.reverseMsgs(vr.content.msgs),Sr=yr(fr);fr=Cr.deduplication(fr);var Br=(fr=Cr.sortMsgs(fr))[0],$r=Br.sessionId,Lr=Ir.genSessionByMsgs(fr);Ir.cacheSyncedSession(Lr);var Gr=Ir.putMsg(fr,"roamingMsgs").then(function(qr){var Yr,bn=(fr=qr).length,wn=(fr=Ir.filterIgnore(fr)).length;bn!==wn&&Ir.logger.info("msg::onRoamingMsgs msg length before filter: "+bn+" after filter: "+wn),fr.length&&(Ir.logger.info("msg::onRoamingMsgs: putRoamingMsgs",$r,fr.length,i(Yr=fr||[]).call(Yr,function(Xr){return"idServer: "+Xr.idServer+" idClient: "+Xr.idClient+" time:"+Xr.time+" type: "+Xr.type}).join(`
`)),Ir.syncResult.roamingMsgs=Ir.syncResult.roamingMsgs||[],Ir.syncResult.roamingMsgs.push({sessionId:$r,scene:Br.scene,to:Br.target,msgs:fr,timetag:Sr}),Ir.syncing||Ir.roamingMsgSyncDoneBufferManager.add())}).catch(function(qr){return Ir.logger.error("msg::onRoamingMsgs: ",qr),k.reject(qr)});Gr.cmd="roamingMsgs-"+$r,Ir.syncPromiseArray.push(Gr)},cr.onOfflineMsgs=function(vr,Ir){var Or,Cr=this,yr=this.message,fr=null;Ir&&(fr={filter:!0});var Sr=yr.reverseMsgs(vr.content.msgs,{modifyObj:fr});Sr=Er.deduplication(Sr);var Br={};g(Sr).call(Sr,function(Gr){Br[Gr.sessionId]=Br[Gr.sessionId]||[],Br[Gr.sessionId].push(Gr)});var $r=i(Or=$(Br)).call(Or,function(Gr){return{sessionId:Gr,msgs:Br[Gr]}}),Lr=or.asyncPool(50,$r,function(Gr){return xr.call(Cr,Gr.sessionId,Gr.msgs,Ir)});this.syncPromiseArray.push(Lr)},cr.completeMsg=function(vr){return vr.from=this.account,vr.fromNick=this.myInfo&&this.myInfo.nick,vr.fromClientType="Web",vr.fromDeviceId=pr.deviceId,vr.time||(vr.time=+new Date),vr},cr.amendMsg=function(vr){if(vr.scene==="team"){var Ir=or.get(this.myTeamMembersMap,vr.to+".nickInTeam");Ir&&(vr.fromNick=Ir)}else if(vr.scene==="superTeam"){var Or=or.get(this.mySuperTeamMembersMap,vr.to+".nickInTeam");Or&&(vr.fromNick=Or)}return vr},cr.onMsgs=function(vr){var Ir=this,Or=Ir.reporterHook.getSafeClock(),Cr=Ir.message.reverseMsgs(vr.content.msgs,{mapper:function(yr){var fr=function(Sr){for(var Br=1;Br<arguments.length;Br++){var $r,Lr,Gr=arguments[Br]!=null?arguments[Br]:{};Br%2?g($r=er(Object(Gr),!0)).call($r,function(qr){n(Sr,qr,Gr[qr])}):Ve?$e(Sr,Ve(Gr)):g(Lr=er(Object(Gr))).call(Lr,function(qr){Lt(Sr,qr,_e(Gr,qr))})}return Sr}({},yr);if(fr.__receiveTime=vr.__receiveTime,fr.__handleTime=Or,fr.__clientExt)try{fr.__clientExt=JSON.parse(fr.__clientExt)}catch{Ir.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(fr.__clientExt))}return Ir.handleMsg(fr),fr}});Ir.pushMsgDelay(Cr)},cr.onMsg=function(vr,Ir){var Or;if(vr.content.msg.attach){var Cr=null;try{Cr=JSON.parse(vr.content.msg.attach)}catch{}if(Cr&&Cr.url&&or.get(this.mixStorePolicy,"s3Policy.dlcdns")){var yr,fr=lr(this.mixStorePolicy.s3Policy.dlcdns);try{for(fr.s();!(yr=fr.n()).done;){var Sr,Br=yr.value;L(Sr=Cr.url).call(Sr,Br)>=0&&(Cr.isS3=!0,Br!==this.mixStorePolicy.s3Policy.dlcdn&&(Cr.url=Cr.url.replace(Br,this.mixStorePolicy.s3Policy.dlcdn)))}}catch(Lr){fr.e(Lr)}finally{fr.f()}}vr.content.msg.attach=V(Cr)}var $r=z(Or=this.message).call(Or,vr.content.msg);if($r.__receiveTime=vr.__receiveTime,$r.__handleTime=this.reporterHook.getSafeClock(),or.get(vr,"content.msg.__clientExt"))try{$r.__clientExt=JSON.parse(vr.content.msg.__clientExt)}catch{this.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(vr.content.msg.__clientExt))}Ir&&($r.filter=!0),vr.cmd!=="syncSendMsg"||$r.from!==$r.to?(this.pushMsgDelay([$r]),this.syncing?(this.logger.info("msg::onMsg:is in syncing ..."),this.unhandledMsgs.push({type:"onMsg",msg:$r})):this.handleMsg($r)):this.logger.warn("onMsg::syncSendMsg to self, so ignore",$r.idClient,$r.idServer)},cr.onBroadcastMsgs=function(vr){var Ir=vr.content.broadcastMsgs;Ir=re(Ir).call(Ir,function(Or,Cr){return Or.broadcastId-Cr.broadcastId}),this.putBroadcastMsgs(Ir)},cr.onBroadcastMsg=function(vr){var Ir=vr.content.broadcastMsg;Ir.time=Ir.timestamp,this.syncing?this.unhandledMsgs.push({type:"onBroadcastMsg",msg:Ir}):Ir&&this.putBroadcastMsg(Ir)},cr.pushMsgTask=function(vr){this.msgPromise=this.msgPromise.then(function(){return vr()})},cr.pushMsgDelay=function(vr){if(vr&&vr.length>0){var Ir=this;if(Ir.msgStatEnable&&!rr.isWeixinApp){var Or,Cr=i(vr).call(vr,function(yr){return{appkey:Ir.options.appKey,accid:yr.to,fromAccid:yr.from,msgId:yr.idServer,serverTime:yr.time,receiveTime:Ir.reporterHook.getNTPTime(),sessionId:Ir.sdkSession,platform:"web",sdk_ver:rr.info.version,manufactor:kr.name+" "+kr.version}});Ir.msgDelayArr=ie(Or=Ir.msgDelayArr).call(Or,Cr),Ir.msgDelayArr.length>5&&Ir.doReportMsgDelay()}}},cr.doReportMsgDelay=function(){var vr,Ir=V(this.msgDelayArr);this.msgDelayArr&&this.msgDelayArr.length>0&&(Mr.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived",Ir),this.msgDelayArr=[]),this.msgDelayTimer&&clearTimeout(this.msgDelayTimer),this.socket&&(this.msgDelayTimer=ue(le(vr=this.doReportMsgDelay).call(vr,this),1e4))},cr.handleMsg=function(vr){var Ir,Or=this,Cr=Or.db,yr=vr.time;Or.markMsgRead(vr),Or.logger.info(ie(Ir="msg::handleMsg:msgPromise start ".concat(vr.idServer," ")).call(Ir,vr.idClient)),Or.msgPromise=Or.msgPromise.then(function(){var fr;return Or.logger.info(ie(fr="msg::handleMsg:msgPromise, putMsg start ".concat(vr.idServer," ")).call(fr,vr.idClient)),Or.putMsg(vr,"onMsg")}).then(function(){var fr;return Or.logger.info(ie(fr="msg::handleMsg:msgPromise, putMsg done and update timetag ".concat(vr.idServer," ")).call(fr,vr.idClient)),Cr.enable?vr.scene==="superTeam"?Cr.updateSuperTeamRoamingMsgTimetag(yr):Cr.updateRoamingMsgTimetag(yr):(Or.timetags[vr.scene==="superTeam"?"superTeamRoamingMsgs":"roamingMsgs"]=yr,k.resolve())}).then(function(){if(vr)return Or.checkUserUpdate(vr)}).then(function(){if(vr){var fr=vr.type;switch(Or.logger.info("msg::handleMsg:msgPromise, checkUserUpdate "+vr.scene+" "+fr+" msg"+(fr==="notification"?" "+vr.attach.type:"")),fr){case"notification":return Or.onTeamNotificationMsg(vr)}}}).then(function(){var fr,Sr;Or.logger.info(ie(fr=ie(Sr="msg::handleMsg:msgPromise, onmsg ready: ".concat(vr.idServer," ")).call(Sr,vr.idClient,", ")).call(fr,!!vr.ignore)),vr&&!vr.ignore&&ue(function(){var Br,$r=vr.scene==="p2p";if(rr.isBrowser&&vr.flow!=="out"){var Lr={msgId:vr.idServer,clientId:vr.idClient,receiveTime:Or.reporterHook.getNTPTime(vr.__receiveTime),serverTime:vr.time,callbackTime:Or.reporterHook.getNTPTime(),preHandleTime:Or.reporterHook.getNTPTime(vr.__handleTime),fromAccid:vr.from,toAccid:Or.options.account,type:Or.message.sceneMap[vr.scene],tid:$r?"":vr.to,result:200,failReason:"",rt:oe(Or.reporterHook.getSafeClock()-vr.__receiveTime)},Gr=or.get(vr,"__clientExt.statistics.apiCallingTime"),qr=or.get(vr,"__clientExt.statistics.sendTime");Gr&&qr&&(Lr.apiCallingTime=Gr,Lr.sendTime=qr,Lr.attachUploadDuration=or.get(vr,"__clientExt.statistics.attachUploadDuration")||0),Or.reporter&&Or.reporter.report("msgReceive",Lr)}delete vr.__receiveTime,delete vr.__handleTime,delete vr.__clientExt,Or.logger.info(ie(Br="msg::handleMsg:msgPromise, tigger onmsg: ".concat(vr.idServer," ")).call(Br,vr.idClient)),Or.options.onmsg(or.copy(vr))},0)}).catch(function(fr){var Sr;Or.logger.error(ie(Sr="msg::handleMsg:msgPromise, catch err ".concat(vr.idServer," ")).call(Sr,vr.idClient),fr),fr.callFunc="msg::handleMsg",Or.onCustomError("",fr)})},cr.putMsg=function(vr,Ir){if(or.isArray(vr)||(vr=[vr]),y(vr[0]))return k.resolve(vr);var Or,Cr=this,yr=Cr.db,fr=yr.enable,Sr=k.resolve(),Br=Cr.message.Message.getLastMsg(vr),$r=Br.flow,Lr=Cr.genSessionByMsgs(vr);qr(Lr);var Gr=[];function qr(Yr){Ir!=="roamingMsgs"&&Ir!=="offlineMsgs"||Cr.cacheSyncedSession(Yr)}return Sr=(Sr=(Sr=Sr.then(function(){var Yr;return fr||Cr.options.autoMarkRead||Ir==="roamingMsgs"||!Lr||(Cr.sessionUnreadMsgs=Cr.sessionUnreadMsgs||{},Cr.sessionUnreadMsgs[Lr.id]=Cr.sessionUnreadMsgs[Lr.id]||[],Cr.sessionUnreadMsgs[Lr.id]=ie(Yr=Cr.sessionUnreadMsgs[Lr.id]).call(Yr,y(vr).call(vr,function(bn){try{return Cr.options.shouldCountNotifyUnread(bn)}catch(wn){throw Cr.logger.error("userOption:shouldCountNotifyUnread function error",wn),wn}}))),Ir==="offlineMsgs"||Ir==="roamingMsgs"?k.reject(vr):fr?yr.putMsg(vr):vr}).then(function(Yr){return g(vr).call(vr,function(bn){Cr.checkMsgUnique(bn)&&Cr.logger.warn("msg::putMsg: msg is not unique",bn.idClient,bn.idServer,bn.time)}),Gr=fr?Yr:vr,k.resolve(vr)})).then(function(Yr){return Yr.length&&fr&&Lr?new k(function(bn){yr.getSessions({sessionId:Lr.id}).then(function(wn){if(wn&&wn.lastMsg){var Xr=wn.lastMsg;Lr.lastMsg&&Lr.lastMsg.time<Xr.time&&(Lr.lastMsg=Xr)}Gr&&Gr.length?Lr?yr.putSession(Lr).then(function(qn){bn(qn)}):bn(wn):(Gr=Yr,bn(wn))})}):k.resolve(Lr)})).then(function(Yr){if(Lr&&Gr.length){Or=Br.sessionId!==Cr.currSessionId;var bn=Ir==="roamingMsgs",wn=Cr.options.syncSessionUnread,Xr=Lr.id,qn=Cr.getSessionInCache(Xr,!0)||{},Zr=qn.ack||0;if(Ir==="offlineMsgs"||bn&&wn||Ir==="onMsg"&&$r==="in"&&Or){var Nn;if(fr&&Yr){var Qr=qn.unread||0;(Lr=Yr).unread=Qr,Zr=Zr||Lr.ack||0}else(Yr=qn)&&(Lr.unread=Yr.unread||0);qr(Lr),Lr.unread=Lr.unread||0;var Mn=0;g(Gr).call(Gr,function(xn){var Pn;try{Pn=Cr.options.shouldCountNotifyUnread(xn)}catch(Zn){throw Cr.logger.error("userOption:shouldCountNotifyUnread function error",Zn),Zn}var vn=(xn.type!=="notification"||xn.type==="notification"&&Pn)&&(hr(xn.isUnreadable)||xn.isUnreadable);if(vn&&wn&&(vn=xn.time>Zr&&xn.flow!=="out"),vn&&(Mn++,wn&&!fr)){var hn=qn.unreadMsgs||[];hn.push(xn),Lr.unreadMsgs=hn}}),Lr.unread+=Mn;var Ln=or.secureOutput("session",Lr);if(Ln.unreadMsgs&&(Ln.unreadMsgs=i(Nn=Ln.unreadMsgs).call(Nn,function(xn){return xn&&xn.idServer})),Cr.logger.info("msg::putMsg:updateSession: ",Ln),qr(Lr),fr)return yr.updateSession({id:Lr.id,unread:Lr.unread})}}}),Ir==="onMsg"&&(Sr=Sr.then(function(){vr.length&&Lr&&(Cr.onUpdateSession(Lr),Cr.options.syncSessionUnread&&!Or&&Cr.api.resetSessionUnread(Cr.currSessionId))})),Sr.then(function(){return k.resolve(vr)}).catch(function(Yr){return Yr&&Yr.length?k.resolve(Yr):k.reject(Yr)})},cr.putBroadcastMsgs=function(vr){var Ir=this,Or=Ir.db,Cr=vr.length;if(Cr>0){if(Ir.doMarkBroadcastMsgsRead(vr),Or.enable){var yr=vr[Cr-1].broadcastId;return Or.updateBroadcastMsgTimetag(yr),Or.putBroadcastMsg(vr).then(function(){return ue(function(){Ir.doMarkMsgsRead(),Ir.options.onbroadcastmsgs(or.copy(vr))},0),k.resolve(vr)})}ue(function(){Ir.options.onbroadcastmsgs(or.copy(vr))},0)}return vr},cr.putBroadcastMsg=function(vr){var Ir=this,Or=Ir.db;return Ir.doMarkBroadcastMsgsRead([vr]),Or.enable?(vr.broadcastId&&Or.updateBroadcastMsgTimetag(vr.broadcastId),Or.putBroadcastMsg(vr).then(function(){return ue(function(){Ir.options.onbroadcastmsg(or.copy(vr))},0),k.resolve(vr)})):(ue(function(){Ir.options.onbroadcastmsg(or.copy(vr))},0),vr)},cr.doMarkBroadcastMsgsRead=function(vr){vr=i(vr).call(vr,function(Ir){return Ir.broadcastId}),this.sendCmd("batchMarkRead",{sid:7,cid:17,ids:vr})},cr.cacheSyncedSession=function(vr){if(vr&&this.syncResult){vr=ae({},vr),this.syncResult.sessions=this.syncResult.sessions||{};var Ir=vr.id,Or=this.syncResult.sessions[Ir]||{};Or&&Or.ack>vr.ack&&delete vr.ack,Or&&Or.msgReceiptTime>vr.msgReceiptTime&&delete vr.msgReceiptTime;var Cr=or.get(Or,"lastMsg.time"),yr=or.get(vr,"lastMsg.time");Cr&&yr&&Cr>yr&&(vr.lastMsg=Or.lastMsg),this.syncResult.sessions[Ir]=ae(Or,vr),this.syncResult.sessions[Ir]=ae({},this.mergeSession(this.syncResult.sessions[Ir]))}},cr.checkMsgUnique=or.genCheckUniqueFunc("idClient"),cr.revokeMsgUniqueCheck=function(vr){this.uniqueSet&&this.uniqueSet.idClient&&(this.uniqueSet.idClient[vr]=!1)},cr.storeSendMsg=function(vr){if(!this.syncing){var Ir=this.putMsg(vr,"sendMsg");return this.msgPromise=this.msgPromise.then(function(){return Ir}),Ir}this.unhandledMsgs.push({type:"sendMsg",msg:vr})},cr.updateSendMsgError=function(vr){if(!this.syncing){var Ir=this.updateMsg(vr);return this.msgPromise=this.msgPromise.then(function(){return Ir}),Ir}this.unupdatedMsgs.push(vr)},cr.onSendMsg=function(vr,Ir){var Or,Cr,yr=this,fr=vr.content&&vr.content.msg,Sr=vr.obj&&vr.obj.msg||fr;if(Sr)if(this.logger.warn(ie(Or=ie(Cr="sendMsg::end: ".concat(fr&&fr.idServer," ")).call(Cr,Sr.idClient," ")).call(Or,vr&&vr.raw&&vr.raw.ser)),vr.obj)$r();else{var Br=yr.db;Br&&Br.enable&&Br.getMsgByIdClient(Sr.idClient).then(function(Lr){Lr&&(Sr=Lr,$r(!1))}).catch(function(){return $r()})}else this.logger.error("sendMsg::error::get msg failed, msg empty");function $r(){var Lr,Gr=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];yr.completeMsg(Sr);var qr=vr.error&&vr.error.code===7101;vr.error&&!qr||(Sr.idServer=fr.idServer,Sr.time=+fr.time,fr.yidunAntiSpamRes&&(Sr.yidunAntiSpamRes=fr.yidunAntiSpamRes),fr.callbackExt&&(Sr.callbackExt=fr.callbackExt)),qr&&(Sr.isInBlackList=!0),vr.error?Sr.status="fail":Sr.status="success",Sr=Gr?z(Lr=yr.message).call(Lr,Sr):Sr,Sr=yr.amendMsg(Sr),Ir&&(Sr.filter=!0),vr.obj=Sr,yr.syncing?yr.unupdatedMsgs.push(Sr):yr.msgPromise=k.all([yr.msgPromise,vr.obj.promise]).then(function(Yr){return Yr.length||(Sr.resend=!0),yr.updateMsg(Sr).then(function(){return yr.options.syncSessionUnread&&yr.currSessionId===Sr.sessionId&&yr.api.resetSessionUnread(yr.currSessionId),yr.resolveMsgReceiptTask(Sr),Sr})}).catch(function(Yr){yr.logger.error("onSendMsg::dealMsg error",Yr)})}},cr.updateLocalMsg=function(vr){var Ir=this.updateMsg(vr);return this.msgPromise=this.msgPromise.then(function(){return Ir}),Ir},cr.updateMsg=function(vr){if(y(vr)||this.options.shouldIgnoreMsg(vr))return k.resolve(vr);var Ir=this,Or=Ir.db,Cr=vr.status==="success",yr=_r.genSessionByMsg(vr),fr=!!vr.isLocal;return Ir.onUpdateSession(yr),Or.enable?Or.updateMsg(vr).then(function(Sr){var Br=Or.updateSession(yr),$r=k.resolve();return Cr&&Sr&&!fr&&($r=vr.scene==="superTeam"?Or.updateSuperTeamRoamingMsgTimetag(Sr.time):Or.updateRoamingMsgTimetag(Sr.time)),k.all([Br,$r])}).catch(function(Sr){Ir.logger.error("updateMsg error",Sr)}):(Cr&&!fr&&(Ir.timetags.roamingMsgs=vr.time),k.resolve(vr))},cr.updateRoamingMsgTimetag=function(vr){var Ir=this.db;return Ir.enable?Ir.updateRoamingMsgTimetag(vr):(this.timetags.roamingMsgs=vr,k.resolve(vr))},cr.checkUserUpdate=function(vr){var Ir=this,Or=vr.from;return Ir.logger.info("handleMsg::checkUserUpdate: ",Or,Ir.account),Or===Ir.account?k.resolve():new k(function(Cr){var yr=Ir.userSet[Or];if(yr){var fr=+yr.updateTime,Sr=+vr.userUpdateTime;!isNaN(fr)&&!isNaN(Sr)&&or.isNumber(fr)&&or.isNumber(Sr)&&fr<Sr?Br():Cr()}else Br();function Br(){Ir.api.getUser({account:Or,sync:!0,done:function($r,Lr){$r||ue(function(){Ir.logger.log("user::checkUserUpdate: onupdateuser",Lr&&Lr.account),Ir.options.onupdateuser(Lr)},0),Cr()}})}})},cr.processUnsettledMsgs=function(){var vr,Ir,Or=this;g(vr=Or.unhandledMsgs).call(vr,function(Cr){var yr=Cr.msg;switch(Cr.type){case"onMsg":Or.handleMsg(yr);break;case"sendMsg":Or.msgPromise=Or.msgPromise.then(function(){return Or.putMsg(yr)});break;case"onBroadcastMsg":Or.msgPromise=Or.msgPromise.then(function(){return Or.putBroadcastMsg(yr)})}}),g(Ir=Or.unupdatedMsgs).call(Ir,function(Cr){Or.msgPromise=Or.msgPromise.then(function(){return Or.updateMsg(Cr)})}),Or.resetUnsettledMsgs()},cr.onTeamNotificationMsg=function(vr){var Ir=vr.attach,Or=Ir.type,Cr=vr.from,yr=vr.to,fr=vr.time,Sr=Ir.team,Br=Ir.account,$r=Ir.accounts;switch(Or){case"updateTeam":return Sr.updateTime=fr,this.onUpdateTeam(Sr);case"addTeamMembers":return this.onAddTeamMembers(vr,Sr,$r);case"removeTeamMembers":return this.onRemoveTeamMembers(Sr,yr,$r);case"acceptTeamInvite":return this.onAddTeamMembers(vr,Sr,[Cr]);case"passTeamApply":return this.onAddTeamMembers(vr,Sr,[Br]);case"addTeamManagers":return this.updateTeamManagers(vr,yr,$r,!0,fr);case"removeTeamManagers":return this.updateTeamManagers(vr,yr,$r,!1,fr);case"leaveTeam":return this.onRemoveTeamMembers(Sr,yr,[Cr]);case"dismissTeam":return this.onDismissTeam(yr,fr);case"transferTeam":return this.transferTeam(vr,Sr,Cr,Br);case"updateTeamMute":return this.onUpdateTeamMembersMute(vr,Sr,[Br],Ir.mute);case"updateSuperTeam":return Sr.updateTime=fr,this.onUpdateSuperTeam(Sr);case"acceptSuperTeamInvite":return this.onAddSuperTeamMembers(vr,Sr,[vr.from]);case"addSuperTeamMembers":return this.onAddSuperTeamMembers(vr,Sr,$r);case"passSuperTeamApply":return this.onAddSuperTeamMembers(vr,Sr,[Br]);case"removeSuperTeamMembers":return this.onRemoveSuperTeamMembers(Sr,yr,$r);case"leaveSuperTeam":return this.onRemoveSuperTeamMembers(Sr,yr,[Cr]);case"dismissSuperTeam":return this.onDismissSuperTeam(yr,fr);case"transferSuperTeam":return this.transferSuperTeam(vr,Sr,Cr,Br);case"addSuperTeamManagers":return this.updateSuperTeamManagers(vr,yr,$r,!0,fr);case"removeSuperTeamManagers":return this.updateSuperTeamManagers(vr,yr,$r,!1,fr);case"updateSuperTeamMembersMute":return this.onUpdateSuperTeamMembersMute(vr,Sr,$r,Ir.mute)}},cr.onAddSuperTeamMembers=function(vr,Ir,Or){var Cr=this.db,yr=Pr.assembleMembers(Ir,Or);vr.attach.members=yr;var fr={team:Ir,accounts:Or,members:yr};if(this.logger.info("team::onAddSuperTeamMembers: ".concat(fr.team.teamId,", "),fr.accounts),this.options.onAddSuperTeamMembers(or.simpleClone(fr)),Cr.enable){var Sr=Cr.putSuperTeamMembers(yr),Br=Cr.putSuperTeam(Ir);return k.all([Sr,Br])}},cr.onRemoveSuperTeamMembers=function(vr,Ir,Or){var Cr=this.db,yr={team:vr,teamId:Ir,accounts:Or};if(this.logger.info("team::onRemoveSuperTeamMembers: ".concat(Ir,", "),yr.accounts),this.options.onRemoveSuperTeamMembers&&this.options.onRemoveSuperTeamMembers(or.simpleClone(yr)),this.mySuperTeamMembersMap&&this.mySuperTeamMembersMap[Ir]&&this.mySuperTeamMembersMap[Ir].followAccountIds){var fr=this.mySuperTeamMembersMap[Ir].followAccountIds;if(y(fr).call(fr,function(Lr){return Ue(Or).call(Or,Lr)}).length>0){this.mySuperTeamMembersMap[Ir].followAccountIds=y(fr).call(fr,function(Lr){return!Ue(Or).call(Or,Lr)});var Sr=this.mySuperTeamMembersMap[Ir];this.db.enable&&this.db.updateSuperTeamMember(Sr),this.mergeMySuperTeamMembers(Sr),this.onUpdateSuperTeamMember(Sr)}}if(vr&&Cr.enable){if(L(Or).call(Or,this.account)===-1){var Br=Cr.removeSuperTeamMembersByAccounts(Ir,Or),$r=k.resolve();return vr&&($r=Cr.putSuperTeam(vr)),k.all([Br,$r])}return Cr.leaveSuperTeam(Ir)}},cr.onDismissSuperTeam=function(vr,Ir){var Or=this.db,Cr={teamId:vr};if(this.logger.info("team::onDismissSuperTeam:",vr),this.options.onDismissSuperTeam(Cr),Or.enable)return Or.dismissSuperTeam(vr,Ir)},cr.onAddTeamMembers=function(vr,Ir,Or){var Cr=this,yr=Cr.db,fr=Ir.teamId,Sr=Tr.assembleMembers(Ir,Or);vr.attach.members=Sr;var Br={team:Ir,accounts:Or,members:Sr};if(Cr.logger.info("team::onAddTeamMembers: ",fr,Or),L(Or).call(Or,Cr.account)>-1&&Cr.mergeMyTeamMembers(y(Sr).call(Sr,function(Gr){return Gr.account===Cr.account})),Cr.options.onAddTeamMembers(or.simpleClone(Br)),yr.enable){var $r,Lr=yr.putTeam(Ir);return L(Or).call(Or,Cr.account)>-1?$r=yr.putTeamMembers(Sr):Cr.logger.log("team::onAddTeamMembers: user join team",fr),k.all([$r,Lr])}},cr.onRemoveTeamMembers=function(vr,Ir,Or){var Cr=this.db,yr={team:vr,teamId:Ir,accounts:Or};if(this.logger.info("team::onRemoveTeamMembers: ".concat(Ir),Or),this.options.onRemoveTeamMembers&&this.options.onRemoveTeamMembers(or.simpleClone(yr)),this.myTeamMembersMap&&this.myTeamMembersMap[Ir]&&this.myTeamMembersMap[Ir].followAccountIds){var fr=this.myTeamMembersMap[Ir].followAccountIds;if(y(fr).call(fr,function(Lr){return Ue(Or).call(Or,Lr)}).length>0){this.myTeamMembersMap[Ir].followAccountIds=y(fr).call(fr,function(Lr){return!Ue(Or).call(Or,Lr)});var Sr=this.myTeamMembersMap[Ir];this.db.enable&&this.db.updateTeamMember(Sr),this.mergeMyTeamMembers(Sr),this.onUpdateTeamMember(Sr)}}if(vr&&Cr.enable){if(L(Or).call(Or,this.account)===-1){var Br=Cr.removeTeamMembersByAccounts(Ir,Or),$r=k.resolve();return vr&&($r=Cr.putTeam(vr)),k.all([Br,$r])}return Cr.leaveTeam(Ir)}},cr.updateTeamManagers=function(vr,Ir,Or,Cr,yr){var fr=this.db,Sr=vr.attach.members=i(Or).call(Or,function(qr){return{id:Tr.genId(Ir,qr),type:Cr?"manager":"normal",updateTime:yr,account:qr}}),Br={teamId:""+Ir,memberUpdateTime:yr};vr.attach.team=Br;var $r={team:Br,accounts:Or,isManager:Cr,members:Sr};if(this.logger.info("team::updateTeamManagers:",Ir,Or,Cr),this.options.onUpdateTeamManagers(or.simpleClone($r)),fr.enable){var Lr=fr.updateTeam(Br),Gr=fr.updateTeamManagers(Ir,Or,Cr,yr);return k.all([Lr,Gr])}},cr.updateSuperTeamManagers=function(vr,Ir,Or,Cr,yr){var fr=this.db,Sr=vr.attach.members=i(Or).call(Or,function(qr){return{id:Tr.genId(Ir,qr),teamId:Ir,account:qr,type:Cr?"manager":"normal",updateTime:yr}}),Br={teamId:""+Ir,memberUpdateTime:yr};vr.attach.team=Br;var $r={team:Br,accounts:Or,isManager:Cr,members:Sr};if(this.logger.info("team::updateSuperTeamManagers:",Ir,Or,Cr),this.options.onUpdateSuperTeamManagers(or.simpleClone($r)),fr.enable){var Lr=fr.updateSuperTeam(Br),Gr=fr.updateSuperTeamMembers(Sr);return k.all([Lr,Gr])}},cr.onDismissTeam=function(vr,Ir){var Or=this.db,Cr={teamId:vr};if(this.logger.info("team::onDismissTeam:",vr),this.options.onDismissTeam(Cr),Or.enable)return Or.dismissTeam(vr,Ir)},cr.transferTeam=function(vr,Ir,Or,Cr){var yr=this.db,fr=Ir.teamId,Sr=Ir.memberUpdateTime,Br={id:Tr.genId(fr,Or),type:"normal",updateTime:Sr},$r={id:Tr.genId(fr,Cr),type:"owner",updateTime:Sr};vr.attach.members=[Br,$r];var Lr={team:Ir,from:Br,to:$r};if(this.logger.info("team::transferTeam: from to",fr,Or,Cr),this.options.onTransferTeam(or.simpleClone(Lr)),yr.enable)return yr.transferTeam(Ir,Or,Cr)},cr.transferSuperTeam=function(vr,Ir,Or,Cr){var yr=this.db,fr=Ir.teamId,Sr=Ir.memberUpdateTime,Br={teamId:fr,type:"normal",account:Or,updateTime:Sr},$r={teamId:fr,type:"owner",account:Cr,updateTime:Sr};vr.attach.members=[Br,$r];var Lr={team:Ir,from:Br,to:$r};if(this.logger.info("team::transferSuperTeam: from to ",fr,Or,Cr),this.options.onTransferSuperTeam(or.simpleClone(Lr)),yr.enable)return yr.transferSuperTeam(Ir,Br,$r)},cr.onUpdateTeamMembersMute=function(vr,Ir,Or,Cr){var yr=this.db,fr=i(Or).call(Or,function(Lr){return{id:Tr.genId(Ir.teamId,Lr),account:Lr,teamId:Ir.teamId,mute:Cr,updateTime:Ir.memberUpdateTime}});vr.attach.members=fr;var Sr={team:Ir,accounts:Or,members:fr,mute:Cr};if(this.logger.info("team::onUpdateTeamMembersMute:",Ir.teamId,Or,Cr),this.options.onUpdateTeamMembersMute(or.simpleClone(Sr)),yr.enable){var Br=yr.updateTeamMembers(fr),$r=yr.putTeam(Ir);return k.all([Br,$r])}},cr.onUpdateSuperTeamMembersMute=function(vr,Ir,Or,Cr){var yr=this.db,fr=i(Or).call(Or,function(Lr){return{id:Pr.genId(Ir.teamId,Lr),account:Lr,teamId:Ir.teamId,mute:Cr,updateTime:Ir.memberUpdateTime}});vr.attach.members=fr;var Sr={team:Ir,accounts:Or,members:fr,mute:Cr};if(this.logger.info("team::onUpdateSuperTeamMembersMute:",Ir.teamId,Or,Cr),this.options.onUpdateSuperTeamMembersMute(or.simpleClone(Sr)),yr.enable){var Br=yr.updateSuperTeamMembers(fr),$r=yr.putSuperTeam(Ir);return k.all([Br,$r])}},cr.onHistoryMsgs=function(vr){vr.error||(vr.obj.msgs=this.message.reverseMsgs(vr.content.msgs))},cr.onmsgFtsInServer=function(vr){if(!vr.error){var Ir=this.message.reverseMsgs(vr.content.msgs);vr.obj.msgs=Ir,vr.content.msgs=Ir}},cr.isFilterMsgs=function(vr){return!!y(vr[0])},cr.splitMsgs=function(vr,Ir,Or,Cr){g(vr).call(vr,function(yr){if(y(yr))Cr.push(yr);else switch(yr.scene){case"p2p":Ir.push(yr);break;case"team":Or.push(yr)}})},cr.markMsgRead=function(vr,Ir){if(or.isArray(vr)||(vr=[vr]),this.db.enable||this.options.autoMarkRead||Ir){var Or=i(vr).call(vr,function(Cr){return{flag:"msg",idServer:Cr.idServer,scene:Cr.scene,filter:y(Cr),type:Cr.type,attachType:Cr.attach&&Cr.attach.type}});this.msgAckBufferManager.add(Or)}},cr.markSysMsgRead=function(vr,Ir){if(or.isArray(vr)||(vr=[vr]),this.db.enable||this.options.autoMarkRead||Ir){var Or=i(vr).call(vr,function(Cr){return{flag:"systemMsg",idServer:Cr.idServer,scene:Cr.scene,filter:y(Cr),type:Cr.type}});this.msgAckBufferManager.add(Or)}},cr.handleMsgsAck=function(vr){var Ir,Or=this,Cr={p2pSysMsgs:{sid:7,cid:3,msgs:[]},p2pMsgs:{sid:7,cid:2,msgs:[]},superTeamSysMsgs:{sid:21,cid:19,msgs:[]},teamMsgs:{sid:8,cid:3,msgs:[]},filterSysMsgs:{sid:101,cid:3,msgs:[]},filterMsgs:{sid:101,cid:2,msgs:[]},netcallMsgs:{sid:9,cid:11,msgs:[]}};g(vr).call(vr,function(yr){/^(netcallBill|netcallMiss|netcallReject)$/.test(yr.attachType)?Cr.netcallMsgs.msgs.push(yr):y(yr)?yr.flag==="systemMsg"?Cr.filterSysMsgs.msgs.push(yr):Cr.filterMsgs.msgs.push(yr):yr.flag!=="systemMsg"?yr.scene==="p2p"?Cr.p2pMsgs.msgs.push(yr):yr.scene==="team"&&Cr.teamMsgs.msgs.push(yr):yr.scene==="superTeam"?Cr.superTeamSysMsgs.msgs.push(yr):Cr.p2pSysMsgs.msgs.push(yr)}),g(Ir=$(Cr)).call(Ir,function(yr){return Or.doMarkMsgsRead(Cr[yr].sid,Cr[yr].cid,Cr[yr].msgs)})},cr.doMarkMsgsRead=function(vr,Ir,Or){Or&&Or.length&&(this.logger.log("markMsgRead::batchMarkRead",vr,Ir,Or),this.sendCmd("batchMarkRead",{sid:vr,cid:Ir,ids:i(Or).call(Or,function(Cr){return Cr.idServer})}))}},function(t,r,e){var n=e(51),g=e(10),y=e(2),i=e(4),k=e(16),$=e(3),L=e(37),V=e(52),z=e(53),re=e(54),ie=e(55),ue=e(43);function le($e,Lt){var jt=i($e);if(V){var Et=V($e);Lt&&(Et=k(Et).call(Et,function(ir){return z($e,ir).enumerable})),jt.push.apply(jt,Et)}return jt}function oe($e){for(var Lt=1;Lt<arguments.length;Lt++){var jt,Et,ir=arguments[Lt]!=null?arguments[Lt]:{};Lt%2?y(jt=le(Object(ir),!0)).call(jt,function(ur){n($e,ur,ir[ur])}):re?ie($e,re(ir)):y(Et=le(Object(ir))).call(Et,function(ur){ue($e,ur,z(ir,ur))})}return $e}var ae=e(35).fn,Ue=e(756),de=e(758);function _e($e,Lt,jt){var Et=this,ir=this.timetags&&this.timetags.sync;this.db.enable&&ir&&Lt&&this.db.getMsgByIdClient($e).then(function(ur){if(ur&&!(ur.commentTimetag&&ur.commentTimetag<=ir&&ur.time<=ir)){if(ur.commentTimetag=Lt.time,ur.comments=ur.comments||[],jt){var Dt;ur.comments=k(Dt=ur.comments).call(Dt,function(cr){return cr.body!==Lt.body||cr.from!==Lt.from})}else{for(var lr,sr=0;sr<ur.comments.length;sr++)if(ur.comments[sr].from===Lt.from&&ur.comments[sr].body===Lt.body){ur.comments[sr]=Lt,lr=!0;break}lr||ur.comments.push(Lt)}var er={idClient:ur.idClient,comments:ur.comments,commentTimetag:ur.commentTimetag};Et.db.updateMsg(er)}})}function Ve($e){$e.scene=this.message.sceneReverseMap[+$e.scene]||$e.scene,$e.time=+$e.time}ae.processMsgExtend=function($e){switch($e.cmd){case"getThreadMsgs":this.onGetThreadMsgs($e);break;case"getMsgsByIdServer":this.onGetMsgsByIdServer($e);break;case"addQuickComment":this.changeQuickComment($e);break;case"deleteQuickComment":this.changeQuickComment($e,!0);break;case"onQuickComment":case"syncAddQuickComment":this.onQuickComment($e);break;case"onDeleteQuickComment":case"syncDeleteQuickComment":this.onQuickComment($e,!0);break;case"getQuickComments":this.getQuickComments($e);break;case"addCollect":case"updateCollect":this.addCollect($e);break;case"deleteCollects":this.deleteCollects($e);break;case"getCollects":this.getCollects($e);break;case"addStickTopSession":case"syncAddStickTopSession":this.onChangeStickTopSession($e,"add");break;case"updateStickTopSession":case"syncUpdateStickTopSession":this.onChangeStickTopSession($e,"update");break;case"deleteStickTopSession":case"syncDeleteStickTopSession":this.onChangeStickTopSession($e,"delete");break;case"addMsgPin":case"onAddMsgPin":case"syncAddMsgPin":this.pinMsgChange($e,"add");break;case"updateMsgPin":case"onUpdateMsgPin":case"syncUpdateMsgPin":this.pinMsgChange($e,"update");break;case"deleteMsgPin":case"onDeleteMsgPin":case"syncDeleteMsgPin":this.pinMsgChange($e,"delete");break;case"getMsgPins":this.getMsgPins($e)}},ae.onGetThreadMsgs=function($e){if(!$e.error){var Lt;$e.obj.msgs=this.message.reverseMsgs($e.content.msgs),$e.obj.threadMsg=g(Lt=this.message).call(Lt,$e.content.threadMsg);var jt=$e.content.threadMsgsMeta||{};$e.obj.total=jt.total,$e.obj.timetag=jt.lastMsgTime}},ae.onGetMsgsByIdServer=function($e){$e.error||($e.obj.msgs=this.message.reverseMsgs($e.content.msgs))},ae.changeQuickComment=function($e,Lt){$e.error||($e.obj.comment.time=$e.content.timetag,$e.obj.comment=g(Ue).call(Ue,$e.obj.comment),Ve.call(this,$e.obj.msg),_e.call(this,$e.obj.msg.idClient,$e.obj.comment,Lt))},ae.onQuickComment=function($e,Lt){if($e.content){var jt=$e.content,Et=jt.comment,ir=jt.msg;Et&&ir&&(Ve.call(this,ir),Et=g(Ue).call(Ue,Et),Lt?this.options.onDeleteQuickComment($e.content.msg,Et):this.options.onQuickComment($e.content.msg,Et),_e.call(this,ir.idClient,Et,Lt))}},ae.getQuickComments=function($e){var Lt,jt=this;if(!$e.error){var Et=$e.obj.idMap,ir=$e.obj.indexMap,ur=$e.content&&$e.content.commentRes||[];y(ur).call(ur,function(Dt){var lr=[],sr=jt.parser.unserializeMap.comment;if(+Dt.modify==1)try{lr=JSON.parse(Dt.detail)}catch(cr){jt.logger.warn("getQuickComments parse detail error",cr)}if(y(lr).call(lr,function(cr,or){var hr,pr={};y(hr=i(cr)).call(hr,function(Tr){pr[sr[Tr]]=cr[Tr]}),pr=g(Ue).call(Ue,pr),lr[or]=pr}),Dt.timestamp=+Dt.timestamp,Et[Dt.idClient]){var er={idClient:Dt.idClient,commentTimetag:Dt.timestamp};Et[Dt.idClient].commentTimetag=Dt.timestamp,+Dt.modify==1&&(Et[Dt.idClient].comments=lr,er.comments=lr),jt.db.enable&&jt.db.updateMsg(er)}else Et[Dt.idClient]={idServer:Dt.idServer,idClient:Dt.idClient,comments:lr,commentTimetag:Dt.timestamp,scene:jt.message.sceneReverseMap[Dt.scene]||Dt.scene}}),$e.obj=[],y(Lt=i(ir)).call(Lt,function(Dt){$e.obj[ir[Dt]]=Et[Dt]})}},ae.addCollect=function($e){$e.error||($e.obj.collect=g(de).call(de,$e.content.collect))},ae.deleteCollects=function($e){$e.error||($e.obj.deleteNum=$e.content.deleteNum)},ae.getCollects=function($e){if(!$e.error){var Lt=[],jt=$e.content.collectList||[];y(jt).call(jt,function(Et){Lt.push(g(de).call(de,Et))}),$e.obj.collectList=Lt,$e.obj.total=$e.content.total}},ae.onChangeStickTopSession=function($e,Lt){var jt=this;if(!$e.error){var Et=$e.content.stickTopSession||$e.obj.stickTopSession||{},ir=$e.content.timetag||+Et.updateTime,ur=Et.id.split("|");ur[0]==="super_team"&&(ur[0]="superTeam"),Et={id:ur.join("-"),scene:ur[0],to:ur[1],topCustom:Et.topCustom||""},Lt==="delete"?Et.isTop=!1:Lt==="add"&&(Et.isTop=!0),Et=this.onUpdateSession(Et),$e.obj&&($e.obj.stickTopSession=Et),this.db.enable&&(this.db.updateSession(Et).then(function(Dt){Dt||jt.db.putSession(Et)}),this.db.updateTimetag("stickTopSessions",ir))}},ae.pinMsgChange=function($e,Lt){var jt=this;if(!$e.error){$e.content=$e.content||{};var Et=this,ir=this.db,ur=$e.obj&&$e.obj.msg,Dt=$e.content.msg||ur||{},lr=$e.content.pinTag||$e.obj.pinTag,sr=$e.content.timetag||+lr.updateTime,er=$.resolve();Ve.call(this,Dt),ir.enable&&(er=ir.getMsgByIdClient(Dt.idClient)),lr.createTime&&(lr.createTime=+lr.createTime),lr.updateTime&&(lr.updateTime=+lr.updateTime),er.then(function(cr){return Dt=cr||Dt,cr?Dt=cr:Dt.sessionId=Dt.scene+"-"+jt.message.Message.getMsgTarget(Dt,jt.account),ur?($e.obj.msg=Dt,$e.obj.pinTag=lr):jt.options.onPinMsgChange({msg:Dt,pinTag:lr},Lt),function(){ir.enable&&ir[Lt==="delete"?"deleteMsgPin":"putMsgPin"](oe(oe({},Dt),{},{pinFrom:lr.pinFrom,pinCustom:lr.pinCustom})).then(function(){var or="pin-"+Dt.sessionId,hr=Et.timetags.sync;return ir.getTimetag(or).then(function(pr){return pr>hr?ir.updateTimetag(or,sr):$.resolve()})}).catch(function(or){Et.logger.error("msgExtend::pinMsgChange:error",or)})}(),$.resolve}).then(function(){}),$e.promise=er}},ae.getMsgPins=function($e){var Lt=this;if(!$e.error){var jt=this.db,Et=$e.content||{};if(Et.pins=Et.pins||[],Et.modify){var ir,ur=[];jt.enable&&(jt.updateTimetag("pin-"+$e.obj.id,Et.timetag),y(ir=Et.pins).call(ir,function(Dt){Dt.sessionId=$e.obj.id,ur.push(jt.getMsgByIdClient(Dt.idClient))})),$e.promise=$.all(ur).then(function(Dt){var lr;y(lr=Et.pins).call(lr,function(sr,er){Dt[er]?L(sr,Dt[er]):(sr.sessionId=$e.obj.id,Ve.call(Lt,sr))}),$e.obj.pins=Et.pins,jt.enable&&jt.deleteMsgPins($e.obj.id).then(function(){return jt.putMsgPins(Et.pins)}).catch(function(sr){Lt.logger.error("msgExtend::getMsgPins:change db error",sr)})})}else jt.enable?(jt.updateTimetag("pin-"+$e.obj.id,Et.timetag),$e.promise=jt.getMsgPins($e.obj.id).then(function(Dt){$e.obj.pins=Dt||[]})):$e.obj.pins=[]}}},function(t,r,e){var n=e(818);t.exports=n},function(t,r,e){e(819);var n=e(13);t.exports=n.Number.isInteger},function(t,r,e){e(1)({target:"Number",stat:!0},{isInteger:e(820)})},function(t,r,e){var n=e(28),g=Math.floor;t.exports=Number.isInteger||function(y){return!n(y)&&isFinite(y)&&g(y)===y}},function(t,r,e){var n=e(125),g=e(3),y=e(2),i=e(6),k=["time","from"],$=e(35).fn,L=e(0);$.onOfflineMsgReceipts=function(V){var z,re=this,ie=re.db,ue=V.content.msgReceipts,le=[],oe=g.resolve();this.logger.info("onOfflineMsgReceipts",ue),y(ue).call(ue,function(ae){z={id:"p2p-"+ae.from,msgReceiptTime:+ae.time},re.cacheSyncedSession(z)}),re.syncResult.msgReceipts=le,ie.enable&&(oe=ie.updateMsgReceiptsTimetag(V.content.timetag)),oe.cmd=le,re.syncPromiseArray.push(oe)},$.shouldUpdateSessionFromMsgReceipt=function(V,z){return!V||!V.msgReceiptServerTime||z.time>V.msgReceiptServerTime},$.genSessionFromMsgReceipt=function(V,z){var re=z.time,ie={id:z.sessionId,msgReceiptTime:re,msgReceiptServerTime:re};return V&&V.id===z.sessionId&&(ie=L.merge({},V,ie)),V&&V.updateTime||(ie.updateTime=re),ie},$.onMsgReceipt=function(V){var z=this,re=z.db,ie=V.content.msgReceipt;ie.time=+ie.time;var ue=ie.idClient,le=g.resolve();re.enable&&ue&&(le=re.getMsgByIdClient(ue)),this.logger.info("onMsgReceipt::",ie),le.then(function(oe){if(oe){if(!oe.idServer)return void(z.msgReceiptTasks[ue]=ie);oe.time}else ie.time;ie.msgReceiptTime=ie.time,ie.sessionId="p2p-".concat(ie.from),z.updateSessionMsgReceiptTime(ie),ie.time,ie.from;var ae=n(ie,k);z.options.onMsgReceipts([ae])})},$.resolveMsgReceiptTask=function(V){var z=this.msgReceiptTasks[V.idClient];z&&(z.msgReceiptTime=V.time,this.updateSessionMsgReceiptTime(z))},$.updateSessionMsgReceiptTime=function(V){var z=this.db,re={id:"p2p-"+V.from,msgReceiptTime:V.msgReceiptTime,msgReceiptServerTime:V.time};(this.getSessionInCache(re.id)||{}).msgReceiptTime>=re.msgReceiptTime?this.logger.warn("receive old msgReceiptTime",V):(z.enable&&z.putSession(re),this.onUpdateSession(re))},$.onSendMsgReceipt=function(V){var z;if(!V.error)if(V.obj&&V.obj.msgReceipt){var re=V.obj.msgReceipt,ie=+re.time,ue=+V.content.msgReceipt.time,le=this.getSessionInCache("p2p-"+re.to);le?(this.logger.info(i(z="sendMsgReceipt on:: param time ".concat(ie,", res time ")).call(z,ue)),le.msgReceiptSendTime=Math.min(ie,ue)):this.logger.info("sendMsgReceipt on:: session is undefined or logically deleted, failed to send read receipt")}else this.logger.info("sendMsgReceipt on:: origin msg is missing, it maybe timeout")},$.shouldSendMsgReceipt=function(V){if(V&&V.scene==="p2p"&&V.status==="success"){var z=this.getSessionInCache(V.sessionId);if(z){var re=z.msgReceiptSendTime;return!re||re<V.time}}return!1},$.isMsgRemoteRead=function(V){if(V&&V.scene==="p2p"&&V.flow==="out"&&V.status==="success"){var z=this.getSessionInCache(V.sessionId);if(z&&z.msgReceiptTime)return V.time<=z.msgReceiptTime}return!1}},function(t,r,e){var n=e(57),g=e(58),y=e(60),i=e(10),k=e(2),$=e(6),L=e(9),V=e(3),z=e(90),re=e(123),ie=e(4),ue=e(16),le=e(48),oe=e(15),ae=e(26),Ue=e(158),de=e(88),_e=e(89),Ve=e(72),$e=e(32);function Lt(or,hr){var pr=_e!==void 0&&Ve(or)||or["@@iterator"];if(!pr){if($e(or)||(pr=function(kr,Er){var xr;if(kr){if(typeof kr=="string")return jt(kr,Er);var vr=oe(xr=Object.prototype.toString.call(kr)).call(xr,8,-1);if(vr==="Object"&&kr.constructor&&(vr=kr.constructor.name),vr==="Map"||vr==="Set")return de(kr);if(vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vr))return jt(kr,Er)}}(or))||hr&&or&&typeof or.length=="number"){pr&&(or=pr);var Tr=0,Pr=function(){};return{s:Pr,n:function(){return Tr>=or.length?{done:!0}:{done:!1,value:or[Tr++]}},e:function(kr){throw kr},f:Pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _r,Mr=!0,rr=!1;return{s:function(){pr=pr.call(or)},n:function(){var kr=pr.next();return Mr=kr.done,kr},e:function(kr){rr=!0,_r=kr},f:function(){try{Mr||pr.return==null||pr.return()}finally{if(rr)throw _r}}}}function jt(or,hr){(hr==null||hr>or.length)&&(hr=or.length);for(var pr=0,Tr=new Array(hr);pr<hr;pr++)Tr[pr]=or[pr];return Tr}var Et=e(35).fn,ir=e(153),ur=e(154),Dt=e(0),lr=e(107).EMSyncType;function sr(or,hr){return er.apply(this,arguments)}function er(){return(er=g(n.mark(function or(hr,pr){var Tr,Pr,_r,Mr,rr,kr,Er,xr,vr,Ir,Or,Cr,yr,fr=this;return n.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(_r=(Pr=this).db,Mr=[],k(hr).call(hr,function(Br){fr.revokeMsgUniqueCheck(Br.idClient),Mr.push(Br.idClient)}),Pr.options.rollbackDelMsgUnread){Sr.next=14;break}return Sr.next=7,_r.deleteMsg(Mr);case 7:if(Sr.t0=Sr.sent,Sr.t0){Sr.next=10;break}Sr.t0=[];case 10:return rr=Sr.t0,rr=Object.prototype.toString.call(rr)==="[object Array]"?rr:[rr],Pr.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: ".concat(rr.length," rows")),Sr.abrupt("return");case 14:return kr=!1,Er=Pr.options.cbUpdateSession||ae(Tr=Pr.updateSessionInDbWithNotify).call(Tr,Pr),xr=Pr.getSessionInCache(pr)||{id:pr},vr=xr.lastMsg||{},Ue(Mr).call(Mr,vr.idClient)&&(kr=!0),Pr.logger.info("msg::_deleteMsgSelfBatchInDb session change before:",pr,kr,xr.unread),Sr.next=22,_r.deleteMsg(Mr);case 22:if(Sr.t1=Sr.sent,Sr.t1){Sr.next=25;break}Sr.t1=[];case 25:if(Ir=Sr.t1,Ir=Object.prototype.toString.call(Ir)==="[object Array]"?Ir:[Ir],Pr.logger.info("msg::_deleteMsgSelfBatchInDb affect:",Ir.length," rows"),!kr){Sr.next=34;break}return Sr.next=31,_r.getMsgs({sessionId:pr,limit:1});case 31:Or=Sr.sent,vr=Or&&Or[0]?Or[0]:null,xr.lastMsg=vr;case 34:if(Cr=!1,xr&&xr.unread&&(yr=xr&&xr.ack||0,k(Ir).call(Ir,function(Br){var $r=!0;if(Br.type==="notification")try{$r=Pr.options.shouldCountNotifyUnread(Br)}catch(Lr){throw Pr.logger.error("userOption:shouldCountNotifyUnread function error",Lr),Lr}$r&&yr<Br.time&&Br.flow==="in"&&(xr.unread=xr.unread>0?xr.unread-1:0,Cr=!0)})),!kr&&!Cr){Sr.next=39;break}return Pr.logger.info("msg::_deleteMsgSelfBatchInDb session change after:",pr,xr.unread),Sr.abrupt("return",Er(xr));case 39:case"end":return Sr.stop()}},or,this)}))).apply(this,arguments)}function cr(or,hr){hr=hr||new Date().getTime();var pr=this.db,Tr=this.getSessionInCache(or),Pr=this.options.rollbackClearMsgsUnread!==!1,_r=[];return pr.enable&&_r.push(pr.deleteMsgsBySessionId({sessionId:or,end:hr})),Pr&&Tr&&(Tr=this.mergeSession({id:Tr.id,unread:0,lastMsg:null,unreadMsgs:[]}),Tr=this.onUpdateSession(Tr)),pr.enable&&Pr&&Tr&&_r.push(pr.updateSession(Tr)),V.all(_r)}Et.onDeleteMsg=function(or){var hr=this.db;if(delete or.obj.sysMsg,!or.error){var pr=or.obj.msg;or.promise=this.deleteLocalMsg(pr).then(function(){if(hr.enable){var Tr=pr.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";hr.getTimetag(Tr).then(function(Pr){Pr=Pr||0,y()+1>=Pr&&hr.updateTimetag(Tr,y()+1)})}})}},Et.onMsgDeleted=function(or,hr){var pr=this;if(!pr.canHandleDeletedMsgInSyncing)return pr.logger.info("msg::onMsgDeleted:is in syncing ..."),void pr.unhandledSysMsgsForDeletedMsgs.push({packet:or,isSuperTeam:hr});if(!or.error){var Tr=pr.db,Pr=i(ir).call(ir,or.content.sysMsg);Pr=pr.processDeleteMsgSysMsg(Pr),hr||pr.markSysMsgRead(Pr),pr.deleteLocalMsg(Pr.msg).then(function(){if(Tr.enable){var _r=hr?"deleteSuperTeamMsg":"deleteMsg";Tr.updateTimetag(_r,Pr.time+1)}pr.handleSysMsg(Pr)})}},Et.processDeleteMsgSysMsg=function(or){var hr;return or.msg={},k(hr=["scene","from","to"]).call(hr,function(pr){or.msg[pr]=or[pr]}),or.msg.idClient=or.deletedIdClient,or.msg.idServer=or.deletedIdServer,or.msg.time=or.deletedMsgTime,or.msg.fromNick=or.deletedMsgFromNick,or.opeAccount=or.opeAccount||or.from,or.msg.opeAccount=or.opeAccount,this.message.Message.setExtra(or.msg,this.account),or},Et.onDeleteMsgOfflineRoaming=function(or){if(!or.error){var hr,pr=this,Tr=+or.content.type==1?"offline":"roaming",Pr=ir.reverseSysMsgs(or.content.sysMsgs,{mapper:function(kr){return pr.processDeleteMsgSysMsg(kr)}}),_r=Pr&&Pr[0]&&Pr[0].scene==="superTeam";pr.logger.info($(hr="msg::onDeleteMsgOfflineRoaming: on delete ".concat(Tr," ")).call(hr,_r?"superTeam":""," idServer deletedIdClient deletedIdClient="),L(Pr).call(Pr,function(kr){var Er,xr;return $(Er=$(xr="".concat(kr.idServer,"-")).call(xr,kr.deletedIdServer,"-")).call(Er,kr.deletedIdClient)})),Tr==="offline"&&pr.markSysMsgRead(Pr);var Mr=or.content.timetag;_r?(pr.timetags.deleteSuperTeamMsg=Mr,pr.syncResult.deleteSuperTeamMsgTimetag=Mr):(pr.timetags.deleteMsg=Mr,pr.syncResult.deleteMsgTimetag=Mr);var rr=pr.putSysMsg(Pr,"offlineSysMsgs").catch(function(kr){return pr.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ",kr),V.reject(kr)});rr.cmd="deleteMsgSysMsgs "+Tr,pr.syncPromiseArray.push(rr),pr.syncResult.deleteMsgSysMsgs=pr.syncResult.deleteMsgSysMsgs||[],pr.syncResult.deleteMsgSysMsgs.push({type:Tr,sysMsgs:Pr})}},Et.deleteMsgOfflineRoaming=function(or,hr){if(!or)return V.resolve();var pr=this;pr.logger.info("msg::deleteMsgOfflineRoaming: ",L(or).call(or,function(_r){var Mr;return _r.type+" "+L(Mr=_r.sysMsgs).call(Mr,function(rr){var kr,Er;return $(kr=$(Er="".concat(rr.idServer,"-")).call(Er,rr.deletedIdServer,"-")).call(kr,rr.deletedIdClient)})}),Dt.secureOutput("session",hr));var Tr=pr.db,Pr=[];return k(or).call(or,function(_r){var Mr;k(Mr=_r.sysMsgs).call(Mr,function(rr){var kr=pr.deleteLocalMsg(rr.msg,{cbUpdateSession:function(Er){Er=pr.mergeSession(Er),Er=z(ur).call(ur,Er);var xr=Dt.findObjIndexInArray(hr,{value:Er.id});if(xr!==-1&&(hr[xr]=Dt.merge({},hr[xr],Er)),Tr.enable)return Tr.updateSession(Er)}});Pr.push(kr)})}),V.all(Pr).then(function(){Tr.enable&&(pr.syncResult.deleteMsgTimetag&&Tr.updateTimetag("deleteMsg",pr.syncResult.deleteMsgTimetag),pr.syncResult.deleteSuperTeamMsgTimetag&&Tr.updateTimetag("deleteSuperTeamMsg",pr.syncResult.deleteSuperTeamMsgTimetag))})},Et.deleteMsgSelf=function(or){if(!or.error){var hr=this.db,pr=or.obj&&or.obj.deleteMsgSelfTag;if(pr){var Tr=or.content&&or.content.timetag;pr.scene=pr.scene+""=="1"?"p2p":"team";var Pr=[this.deleteLocalMsg(pr)];Tr<=this.timetags.deleteMsgSelf||(this.timetags.deleteMsgSelf=Tr,hr.enable&&Pr.push(hr.updateDeleteMsgSelf(Tr))),or.promise=V.all(Pr)}}},Et.deleteMsgSelfBatch=function(){var or=g(n.mark(function hr(pr){var Tr,Pr,_r,Mr,rr,kr,Er,xr;return n.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(!pr.error){vr.next=2;break}return vr.abrupt("return");case 2:if(Pr=this,_r=this.db,(Mr=pr.obj&&pr.obj.deleteMsgSelfTags)&&Mr.length>0){vr.next=7;break}return vr.abrupt("return");case 7:if(rr=re(Mr).call(Mr,function(Ir,Or){var Cr=Or.sessionId;if(Ir[Cr]=Ir[Cr]||[],Ir[Cr].push(Or),!_r.enable){var yr=Pr.getSessionInCache(Cr);yr&&yr.lastMsg&&Or&&yr.lastMsg.idClient===Or.idClient&&(yr.lastMsg=null,Pr.onUpdateSession(yr))}return Ir},{}),_r.enable){vr.next=11;break}return k(kr=ie(rr)).call(kr,function(Ir){var Or=rr[Ir],Cr=Pr.getSessionInCache(Ir);if(Pr.options.rollbackDelMsgUnread&&Cr){var yr=Cr.ack||0,fr=ue(Or).call(Or,function(Sr){var Br=!0;if(Sr.type==="notification")try{Br=Pr.options.shouldCountNotifyUnread(Sr)}catch($r){throw Pr.logger.error("userOption:shouldCountNotifyUnread function error",$r),$r}return Pr.message.Message.setFlow(Sr,Pr.account),Br&&yr<Sr.time&&Sr.flow==="in"});fr.length>0&&Cr.unread&&(Cr.unread=Cr.unread-fr.length>=0?Cr.unread-fr.length:0,Pr.onUpdateSession(Cr))}}),vr.abrupt("return",V.resolve());case 11:Er=L(Tr=ie(rr)).call(Tr,function(Ir){var Or=rr[Ir];return sr.call(Pr,Or,Ir)}),(xr=pr.content&&pr.content.timetag)<=Pr.timetags.deleteMsgSelf||(Pr.timetags.deleteMsgSelf=xr,Er.push(_r.updateDeleteMsgSelf(xr))),pr.promise=V.all(Er);case 15:case"end":return vr.stop()}},hr,this)}));return function(hr){return or.apply(this,arguments)}}(),Et.onDeleteMsgSelf=function(or){var hr=this,pr=this.db,Tr=or.content.deleteMsgSelfTag;Tr.scene=Tr.scene+""=="1"?"p2p":"team",hr.options.onDeleteMsgSelf([Tr]),hr.deleteLocalMsg(Tr).then(function(){var Pr=Tr.deletedTime;return Pr<=hr.timetags.deleteMsgSelf||!pr.enable?V.resolve():(hr.timetags.deleteMsgSelf=Pr,pr.updateDeleteMsgSelf(Pr))}).catch(function(Pr){hr.logger.error("onDeleteMsgSelf error",Pr)})},Et.onDeleteMsgSelfBatch=function(or){var hr=this;if(!or.error){var pr={1:"p2p",2:"team"},Tr=Dt.get(or,"content.deleteMsgSelfTags")||[];k(Tr).call(Tr,function(_r){var Mr;_r.scene=pr[_r.scene],_r.sessionId=$(Mr="".concat(_r.scene,"-")).call(Mr,hr.message.Message.getMsgTarget(_r,hr.account)),_r.deletedTime=le(_r.deletedTime),_r.time=le(_r.time)});var Pr=Dt.get(or,"content.deleteMsgSelfTags[0].deletedTime");Pr=le(Pr)||0,this.options.onDeleteMsgSelf(Tr),this.deleteMsgSelfBatch({obj:{deleteMsgSelfTags:Tr},content:{timetag:Pr}})}},Et.clearServerHistoryMsgs=function(or){if(!or.error){var hr=this.db,pr=or.obj&&or.obj.clearMsgsParamsWithSync;if(pr){var Tr=(pr.type&&pr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(pr.otherAccid):"team-".concat(pr.toTid),Pr=or.content&&le(or.content.timetag);Pr&&Pr>this.timetags.sessionHistoryMsgsDelete&&(this.timetags.sessionHistoryMsgsDelete=Pr,hr.enable&&hr.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),cr.call(this,Tr,Pr)}}},Et.onClearServerHistoryMsgs=function(or){if(!or.error){var hr=this.db,pr=or.content&&or.content.sessionHistoryMsgsDeleteTag;if(pr){var Tr=(pr.type&&pr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(pr.otherAccid):"team-".concat(pr.toTid),Pr=pr.ext,_r=le(pr.time);this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs([{sessionId:Tr,time:_r,ext:Pr}]),_r<=this.timetags.sessionHistoryMsgsDelete||(this.timetags.sessionHistoryMsgsDelete=_r,hr.enable&&hr.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),cr.call(this,Tr,_r)}}},Et.syncSessionHistoryMsgsDelete=function(or){if(!or.error){var hr=this.db,pr=or.content&&or.content.sessionHistoryMsgsDeleteTags;if(pr&&pr.length>0){var Tr=L(pr).call(pr,function(_r){return{sessionId:(_r.type&&_r.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(_r.otherAccid):"team-".concat(_r.toTid),time:le(_r.time)}});this.reporterHook.emit("reporter/syncItemComplete",lr.kSyncType4_24),this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs(Tr),this.syncResult.clearServerHistoryMsgs=Tr;var Pr=0;k(Tr).call(Tr,function(_r){_r.time>Pr&&(Pr=_r.time)}),hr.enable&&hr.updateTimetag("sessionHistoryMsgsDelete",Pr)}}},Et.syncDeleteMsgSelf=function(or){var hr=this,pr=this.db,Tr=or.content.deletedMsgs;if(Tr&&Tr.length!==0){var Pr=[];k(Tr).call(Tr,function(_r){_r.scene=_r.scene==="1"?"p2p":"team",_r.deletedTime=+_r.deletedTime,_r.time=+_r.time,Pr.push(hr.deleteLocalMsg(_r))}),hr.options.onDeleteMsgSelf(Tr),V.all(Pr).then(function(){var _r=oe(Tr).call(Tr,-1)[0].deletedTime;if(!(hr.timetags.deleteMsgSelf>=_r))return hr.timetags.deleteMsgSelf=_r,pr.enable?pr.updateDeleteMsgSelf(_r):void 0}).catch(function(_r){hr.logger.error("syncDeleteMsgSelf error",_r)})}},Et.deleteLocalMsg=function(){var or=g(n.mark(function hr(pr,Tr){var Pr,_r,Mr,rr,kr,Er,xr,vr,Ir,Or,Cr,yr;return n.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(pr){fr.next=2;break}return fr.abrupt("return");case 2:if(Mr=(_r=this).db,rr=(Tr=Tr||{}).cbUpdateSession||ae(Pr=_r.updateSessionInDbWithNotify).call(Pr,_r),this.revokeMsgUniqueCheck(pr&&pr.idClient),kr=pr.sessionId||pr.scene+"-"+this.message.Message.getMsgTarget(pr,this.account),Er=!1,xr=_r.getSessionInCache(kr),vr=!0,pr.type!=="notification"){fr.next=20;break}fr.prev=12,vr=_r.options.shouldCountNotifyUnread(pr),fr.next=20;break;case 16:throw fr.prev=16,fr.t0=fr.catch(12),_r.logger.error("userOption:shouldCountNotifyUnread function error",fr.t0),fr.t0;case 20:if(_r.options.rollbackDelMsgUnread&&xr&&(Ir=xr.ack||0,vr&&xr&&Ir<pr.time&&pr.from!==_r.account&&xr.unread&&(_r.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: unread",xr.id,xr.unread),xr.unread=xr.unread-1,Er=!0)),xr&&xr.lastMsg&&xr.lastMsg.idClient==pr.idClient&&(_r.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: lastMsg",xr.id,xr.unread),xr.lastMsg=null,Er=!0),!Mr.enable){fr.next=49;break}return Or=null,fr.next=26,Mr.getMsgByIdClient(pr.idClient);case 26:return fr.sent||_r.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg no find in DB",pr),_r.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg ",pr.idClient),fr.next=31,Mr.deleteMsg(pr.idClient);case 31:if(!xr||xr.lastMsg!==null){fr.next=36;break}return fr.next=34,Mr.getMsgs({sessionId:kr,limit:1});case 34:(Cr=fr.sent)&&Cr[0]&&(Or=Cr[0]);case 36:if(xr||!_r.options.rollbackDelMsgUnread){fr.next=46;break}return _r.logger.info("msgDelete::deleteLocalMsg::Can not find session in cache,will find in DB",kr),fr.next=40,Mr.getSession(kr);case 40:if(yr=fr.sent){fr.next=43;break}return fr.abrupt("return");case 43:Ir=(xr=yr).ack||0,vr&&xr&&Ir<pr.time&&pr.flow==="in"&&xr.unread&&(_r.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread",yr.id,yr.unread),xr.unread=xr.unread-1,Er=!0);case 46:if(xr&&xr.lastMsg===null&&Or&&(_r.logger.info("msgDelete::deleteLocalMsg:db.getSessions: lastMsg",kr,Or),xr.lastMsg=Or||null,Er=!0),!Er){fr.next=49;break}return fr.abrupt("return",rr(xr));case 49:if(Mr.enable||!Er){fr.next=52;break}return _r.onUpdateSession(xr),fr.abrupt("return");case 52:case"end":return fr.stop()}},hr,this,[[12,16]])}));return function(hr,pr){return or.apply(this,arguments)}}(),Et.deleteLocalMsgs=function(or){var hr=this,pr=hr.db;return new V(function(Tr,Pr){if(function(_r){var Mr=hr.getSessionInCache(or.sessionId);if(Mr&&or.updateSession){var rr=Mr.lastMsg;rr&&(!or.start&&!or.end||rr.time>or.start&&rr.time<or.end)&&(Mr.lastMsg=null,hr.logger.log("deleteLocalMsgs::delete cacheSession lastMsg done, options is",or),pr.enable||(hr.onUpdateSession(Mr),_r()))}}(Tr),pr.enable)return pr.deleteMsgsBySessionId(or).then(function(){or.updateSession&&hr.checkAndUpdateLocalSessionByMsg(or.sessionId),Tr()},function(_r){return Pr(_r)})})},Et.deleteLocalMsgsByTime=function(){var or=g(n.mark(function hr(pr){var Tr,Pr,_r,Mr,rr,kr,Er,xr,vr,Ir,Or,Cr,yr,fr;return n.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return Pr=(Tr=this).db,Sr.next=4,Pr.getDeletedMsgsCountByTime(pr);case 4:return _r=Sr.sent,Mr=0,rr=[],Sr.next=9,Pr.deleteMsgsByTime(pr);case 9:return pr.deletedone&&pr.deletedone({deletedMsgCount:_r}),Sr.next=12,Pr.getAllSessions();case 12:kr=Sr.sent,Er=Lt(kr),Sr.prev=14,Er.s();case 16:if((xr=Er.n()).done){Sr.next=47;break}return vr=xr.value,Ir=vr.id,Or=!1,Sr.next=22,Pr.getSession(Ir);case 22:if(Cr=Sr.sent){Sr.next=25;break}return Sr.abrupt("continue",45);case 25:return Sr.next=27,Pr.getMsgCountAfterAck({shouldCountNotifyUnread:Tr.options.shouldCountNotifyUnread,sessionId:Ir,ack:Cr.ack||0});case 27:if(yr=Sr.sent,Cr.unread!==yr&&(Cr.unread=yr,Or=!0),!(Cr.lastMsg&&Cr.lastMsg.time>pr.start&&Cr.lastMsg.time<pr.end)){Sr.next=39;break}if(pr.start!==0){Sr.next=34;break}Cr.lastMsg=null,Sr.next=38;break;case 34:return Sr.next=36,Pr.getMsgs({sessionId:Ir,limit:1});case 36:fr=Sr.sent,Cr.lastMsg=fr&&fr[0]?fr[0]:null;case 38:Or=!0;case 39:if(!Or){Sr.next=45;break}return Sr.next=42,Pr.updateSession(Cr);case 42:Tr.sessionSet[Ir]&&rr.push(Cr),Mr++;case 45:Sr.next=16;break;case 47:Sr.next=52;break;case 49:Sr.prev=49,Sr.t0=Sr.catch(14),Er.e(Sr.t0);case 52:return Sr.prev=52,Er.f(),Sr.finish(52);case 55:return Tr.onUpdateSessions(rr),Sr.abrupt("return",V.resolve({deletedMsgCount:_r,sessionUpdateCount:Mr}));case 57:case"end":return Sr.stop()}},hr,this,[[14,49,52,55]])}));return function(hr){return or.apply(this,arguments)}}()},function(t,r,e){var n=e(71),g=e(9),y=e(10),i=e(6),k=e(3),$=e(24),L=e(16),V=e(2),z=e(35).fn,re=e(0),ie=e(153);z.splitSysMsgs=function(ue,le){for(var oe,ae=ue.length-1;ae>=0;ae--)oe=ue[ae],ie.isCustom(oe)&&(n(ue).call(ue,ae,1),le.push(oe))},z.onOfflineSysMsgs=function(ue,le){var oe,ae=this,Ue=g(oe=ue.content.sysMsgs).call(oe,function(jt){return jt=y(ie).call(ie,jt),le&&(jt.filter=!0),jt});Ue=y(Ue).call(Ue),ae.markSysMsgRead(Ue);var de=[];ae.splitSysMsgs(Ue,de);var _e,Ve=le?"offlineFilterSysMsgs":"offlineSysMsgs",$e=le?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(Ue.length){var Lt=ae.putSysMsg(Ue,"offlineSysMsgs").then(function(jt){var Et;(Ue=jt).length&&(ae.logger.info("sysmsg::onOfflineSysMsgs: ",Ve,Ue.length,Ue&&g(Ue).call(Ue,function(ir){return ir.idServer})),ae.syncResult[Ve]=ae.syncResult[Ve]||[],ae.syncResult[Ve]=i(Et=ae.syncResult[Ve]).call(Et,Ue))}).catch(function(jt){return ae.logger.error("sysMsg::onOfflineSysMsgs: ",jt),k.reject(jt)});Lt.cmd="sysMsgs",ae.syncPromiseArray.push(Lt)}de.length&&(ae.logger.info("sysmsg::onOfflineSysMsgs: ",$e,g(de).call(de,function(jt){return jt.idServer})),ae.syncResult[$e]=ae.syncResult[$e]||[],ae.syncResult[$e]=i(_e=ae.syncResult[$e]).call(_e,de))},z.onSendSysMsg=function(ue,le){var oe=ue.obj||{};oe?(this.completeSysMsg(oe),ue.error?oe.status="fail":oe.status="success",oe=y(ie).call(ie,oe),le&&(ue.obj.filter=!0),ue.obj=oe):this.logger.warn("onSendSysMsg::no obj")},z.completeSysMsg=function(ue){return ue.from=this.account,ue},z.onSysMsg=function(ue,le){var oe=y(ie).call(ie,ue.content.sysMsg);le&&(oe.filter=!0),this.markSysMsgRead(oe),ie.isCustom(oe)?(this.logger.info("sysmsg::onSysMsg: on customSysMsg"),this.options.oncustomsysmsg(oe)):this.syncing?(this.logger.info("sysmsg::onSysMsg:is in syncing ..."),this.unhandledSysMsgs.push(oe)):this.handleSysMsg(oe)},z.handleSysMsg=function(ue){var le=this,oe=ue.type,ae=ue.from,Ue=ue.serverex;le.sysMsgPromise=le.sysMsgPromise.then(function(){return le.putSysMsg(ue,"onSysMsg")}).then(function(de){ue=de[0]}).then(function(){if(ue){var de,_e=k.resolve();switch(oe){case"addFriend":de={type:"addFriend",account:ae},Ue&&(de.serverex=Ue),_e=le.onFriendRequest(de);break;case"passFriendApply":de={type:"passFriendApply",account:ae},_e=le.onFriendRequest(de);break;case"deleteFriend":_e=le.onDeleteFriend({account:ae})}return de&&de.friend&&(ue.friend=de.friend),_e}}).then(function(){ue&&(le.logger.info("sysmsg::handleSysMsg: ",oe,re.pickAsString(ue,["idServer","deletedIdClient","deletedIdServer"])),$(function(){le.options.onsysmsg(ue)},0))})},z.putSysMsg=function(ue,le){if(re.isArray(ue)||(ue=[ue]),L(ue[0]))return k.resolve(ue);var oe=this,ae=oe.db,Ue=ae.enable,de=k.resolve(),_e=[];return(de=(de=de.then(function(){return Ue?ae.putSysMsg(ue):ue}).then(function(Ve){var $e=[];V(ue).call(ue,function(Lt){oe.checkSysMsgUnique(Lt)&&$e.push(Lt)}),ue=$e,_e=Ue?Ve:ue})).then(function(){return oe.getSysMsgUnread().then(function(Ve){return _e.length||((_e=ue).backward=!0),oe.updateSysMsgUnread(_e,Ve,1).then(function($e){le==="offlineSysMsgs"&&(oe.syncResult.sysMsgUnread=$e),le==="onSysMsg"&&oe.onUpdateSysMsgUnread($e)})})})).then(function(){return ue})},z.checkSysMsgUnique=re.genCheckUniqueFunc("idServer"),z.getSysMsgUnread=function(){var ue=this,le=ue.db;return new k(function(oe){le.enable?le.getSysMsgUnread().then(function(ae){oe(ae)},function(){oe(ue.sysMsgUnread)}):oe(ue.sysMsgUnread)})},z.updateSysMsgUnread=function(ue,le,oe){if(re.isArray(ue)||(ue=[ue]),!ue.length)return k.resolve(le);le=le||{};var ae,Ue=this.db;return V(ue).call(ue,function(de){(oe>0&&!de.read||oe<0&&de.read)&&(ae=de.type,le[ae]=(le[ae]||0)+oe)}),le=ie.completeUnread(le),this.sysMsgUnread=le,Ue.enable&&!ue.backward?Ue.updateSysMsgUnread(le):k.resolve(le)},z.reduceSysMsgUnread=function(ue){var le=this;return le.getSysMsgUnread().then(function(oe){return le.updateSysMsgUnread(ue,oe,-1)}).then(function(oe){le.onUpdateSysMsgUnread(oe)})},z.onUpdateSysMsgUnread=function(ue){var le=this;$(function(){le.logger.info("sysmsg::onUpdateSysMsgUnread:",ue),le.options.onupdatesysmsgunread(ue)},0)},z.updateSysMsg=function(ue){var le=this,oe=le.db;(oe.enable?oe.updateSysMsg(ue):k.resolve(ue)).then(function(ae){le.onUpdateSysMsg(ae)})},z.onUpdateSysMsg=function(ue){var le=this;$(function(){re.isArray(ue)||(ue=[ue]),V(ue).call(ue,function(oe){le.logger.info("sysmsg::onUpdateSysMsg:",oe.idServer),le.options.onupdatesysmsg(oe)})},0)},z.processUnsettledSysMsgs=function(){var ue,le,oe=this;V(ue=oe.unhandledSysMsgs).call(ue,function(ae){oe.handleSysMsg(ae)}),V(le=oe.unhandledSysMsgsForDeletedMsgs).call(le,function(ae){oe.onMsgDeleted(ae.packet,ae.isSuperTeam)}),oe.resetUnsettledSysMsgs()}},function(t,r,e){var n=e(759),g=e(51),y=e(2),i=e(7),k=e(15),$=e(10),L=e(3),V=e(9),z=e(90),re=e(16),ie=e(37),ue=e(4),le=e(6),oe=e(52),ae=e(53),Ue=e(54),de=e(55),_e=e(43);function Ve(Dt,lr){var sr=ue(Dt);if(oe){var er=oe(Dt);lr&&(er=re(er).call(er,function(cr){return ae(Dt,cr).enumerable})),sr.push.apply(sr,er)}return sr}function $e(Dt){for(var lr=1;lr<arguments.length;lr++){var sr,er,cr=arguments[lr]!=null?arguments[lr]:{};lr%2?y(sr=Ve(Object(cr),!0)).call(sr,function(or){g(Dt,or,cr[or])}):Ue?de(Dt,Ue(cr)):y(er=Ve(Object(cr))).call(er,function(or){_e(Dt,or,ae(cr,or))})}return Dt}var Lt=e(35).fn,jt=e(0),Et=e(154),ir=e(41),ur=e(153);Lt.processSession=function(Dt){if(!Dt.error)switch(Dt.cmd){case"getServerSessions":this.onGetServerSessions(Dt);break;case"getServerSession":this.onGetServerSession(Dt);break;case"updateServerSession":this.onUpdateServerSession(Dt)}},Lt.onGetServerSessions=function(Dt){var lr=this,sr=Dt.content&&Dt.content.sessionReqTag,er=Dt.content&&Dt.content.sessionList,cr=[];y(er).call(er,function(or){var hr,pr;if(or.id=or.id.split("|").join("-"),i(hr=or.id).call(hr,"super_team")===0&&(or.id="superTeam"+k(pr=or.id).call(pr,10)),or.updateTime=+or.updateTime,or.lastMsg){var Tr=or.lastMsgType==="1"?"sysMsg":"msg";cr.push(lr.parser.unserialize(JSON.parse(or.lastMsg),Tr).then(function(Pr){var _r;or.lastMsg=Tr==="msg"?$(_r=lr.message).call(_r,Pr):$(ur).call(ur,Pr)}))}}),Dt.promise=L.all(cr).then(function(){Dt.obj={sessionList:er,hasMore:sr.hasMore==="1"},sr.minTimestamp&&(Dt.obj.minTimestamp=+sr.minTimestamp)})},Lt.onGetServerSession=function(Dt){var lr,sr=this,er=Dt.content&&Dt.content.session;if(er){var cr;if(er.id=er.id.split("|").join("-"),i(lr=er.id).call(lr,"super_team")===0&&(er.id="superTeam"+k(cr=er.id).call(cr,10)),er.updateTime=+er.updateTime,er.lastMsg){var or=Dt.content.session&&Dt.content.session.lastMsgType==="1"?"sysMsg":"msg";Dt.promise=sr.parser.unserialize(JSON.parse(er.lastMsg),or).then(function(hr){var pr;er.lastMsg=or==="msg"?$(pr=sr.message).call(pr,hr):$(ur).call(ur,hr),Dt.obj=er})}else Dt.obj=er}},Lt.onUpdateServerSession=function(Dt){Dt.obj={}},Lt.onSyncUpdateServerSession=function(Dt){var lr,sr=this,er=this,cr=Dt.content&&Dt.content.session;if(cr){var or;cr.id=cr.id.split("|").join("-"),i(lr=cr.id).call(lr,"super_team")===0&&(cr.id="superTeam"+k(or=cr.id).call(or,10)),cr.updateTime=+cr.updateTime,cr.lastMsg?er.parser.unserialize(JSON.parse(cr.lastMsg),"msg").then(function(hr){var pr;cr.lastMsg=$(pr=er.message).call(pr,hr),sr.options.onSyncUpdateServerSession(jt.simpleClone(cr))}):this.options.onSyncUpdateServerSession(jt.simpleClone(cr))}},Lt.mergeSession=function(Dt){Dt=jt.copyWithNull(Dt);var lr=this.sessionSet,sr=Dt.id,er=lr[sr]||{},cr=!1;return Et.isComplete(Dt)?delete er.isDeleted:er.isDeleted&&(cr=!0),lr[sr]=jt.merge(er,Dt),Dt=cr?Dt:lr[sr],jt.undef(Dt.unread)&&(Dt.unread=0),Dt},Lt.mergeSessions=function(Dt){var lr=this;return V(Dt=Dt||[]).call(Dt,function(sr){return lr.mergeSession(sr)})},Lt.onDeleteSessions=function(Dt){var lr;Dt.obj=V(lr=Dt.obj.sessions).call(lr,function(sr){return Et.parse(sr)})},Lt.onUpdateSession=function(Dt){if(Dt){if(Dt=this.mergeSession(Dt),Dt=z(Et).call(Et,Dt),Et.isComplete(Dt))return this.logger.info("session::onUpdateSession: ".concat(Dt.id),Dt.id,jt.secureOutput("session",Dt)),this.options.onupdatesessions?this.options.onupdatesessions([Dt]):this.options.onupdatesession(Dt),Dt;this.logger.warn("session::onUpdateSession::session is not complete",jt.secureOutput("session",Dt))}},Lt.onUpdateSessions=function(Dt){var lr=this;if(Dt){Dt=lr.mergeSessions(Dt),Dt=V(Dt).call(Dt,function(cr){return z(Et).call(Et,cr)});var sr=re(Dt).call(Dt,function(cr){return Et.isComplete(cr)}),er=re(Dt).call(Dt,function(cr){return!Et.isComplete(cr)});if(er&&er.length>0&&lr.logger.warn("session::onUpdateSessions::sessions is not complete",V(er).call(er,function(cr){return cr.id}),jt.secureOutput("session",er)),sr.length!==0)return lr.logger.info("session::onUpdateSessions:",jt.secureOutput("session",sr)),lr.options.onupdatesessions?lr.options.onupdatesessions(sr):y(sr).call(sr,function(cr){lr.options.onupdatesession(cr)}),sr;lr.logger.warn("session::onUpdateSessions::completeSessions is empty")}},Lt.setCurrSession=function(Dt){Dt=""+Dt,this.currSessionId=Dt,this.logger.info("session::setCurrSession:",Dt)},Lt.resetSessionUnread=function(Dt){var lr=Dt.id;this.db.enable&&this.db.updateSession({id:lr,unread:0}),!this.options.autoMarkRead&&this.sessionUnreadMsgs&&this.sessionUnreadMsgs[lr]&&(this.markMsgRead(this.sessionUnreadMsgs[lr],!0),this.sessionUnreadMsgs[lr]=[]),this.getSessionInCache(lr)?this.onUpdateSession({id:lr,unread:0}):this.onUpdateSession($e($e({},Dt),{},{unread:0}))},Lt.resetSessionsUnread=function(Dt){var lr=this,sr=this.db;sr.enable&&V(Dt).call(Dt,function(cr){sr.updateSession({id:cr.id,unread:0})});var er=!this.options.autoMarkRead&&this.sessionUnreadMsgs;Dt=V(Dt).call(Dt,function(cr){return er&&lr.sessionUnreadMsgs[cr.id]&&(lr.markMsgRead(lr.sessionUnreadMsgs[cr.id],!0),lr.sessionUnreadMsgs[cr.id]=[]),lr.getSessionInCache(cr.id)?{id:cr.id,unread:0}:$e($e({},cr),{},{unread:0})}),this.onUpdateSessions(Dt)},Lt.insertLocalSession=function(Dt){var lr=this,sr=lr.db,er=Dt.scene+"-"+Dt.to,cr=lr.getSessionInCache(er);return cr&&Et.isComplete(cr)?L.reject(ir.sessionExist({callFunc:"session::insertLocalSession",session:cr})):(sr.enable?sr.getMsgs({sessionId:er,limit:1}):L.resolve()).then(function(or){if(jt.isArray(or)&&or.length===1){var hr=or[0];(cr=Et.genSessionByMsg(hr)).updateTime=hr.time}else cr={id:er,scene:Dt.scene,to:Dt.to,updateTime:+Dt.updateTime||+new Date,lastMsg:null};return lr.onUpdateSession(cr),sr.enable?sr.putSession(cr):L.resolve(cr)})},Lt.checkAndUpdateLocalSessionByMsg=function(Dt){var lr,sr=this.db,er=this,cr=this.options.syncSessionUnread&&Dt!==this.currSessionId,or=sr.getMsgs({sessionId:Dt,limit:1}),hr=sr.getSession(Dt).then(function(pr){if(pr)return lr=ie({},pr),pr.ack=pr.ack||0,cr?sr.getMsgs({sessionId:Dt,start:pr.ack}):L.resolve();er.logger.error("can't find session that sessionId = ".concat(Dt))});return L.all([or,hr]).then(function(pr){var Tr,Pr,_r=n(pr,2),Mr=_r[0],rr=_r[1],kr={id:Dt};if(!lr)return er.logger.error("checkAndUpdateLocalSessionByMsg:can not find session",Dt),L.resolve(200);if(Tr=lr&&!lr.lastMsg?null:lr.lastMsg.idClient,Mr&&Mr[0]?Pr=(Mr=Mr[0]).idClient:(Pr=null,Mr=null),Tr!==Pr&&(kr.lastMsg=Mr),rr!==void 0){var Er=0;y(rr=rr||[]).call(rr,function(xr){var vr;try{vr=er.options.shouldCountNotifyUnread(xr)}catch(Ir){throw er.logger.error("userOption:shouldCountNotifyUnread function error",Ir),Ir}xr.isUnreadable&&xr.flow==="in"&&(xr.type!=="notification"||vr)&&Er++}),Er!==lr.unread&&(kr.unread=Er)}return ue(kr).length>1?(er.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:",jt.secureOutput("session",kr)),sr.updateSession(kr).then(function(){return er.onUpdateSession(kr)})):L.resolve(200)})},Lt.syncSessionsWithMoreRoaming=function(Dt){var lr=this,sr=Dt&&Dt.content&&Dt.content.sessions;if(sr&&sr.length){var er={0:"p2p",1:"team",5:"superTeam"};if(y(sr).call(sr,function(or){var hr,pr=or.to===lr.options.account?or.from:or.to;or.scene=er[or.scene],or.id=le(hr="".concat(or.scene,"-")).call(hr,pr),or.time=+or.time}),this.db.enable){var cr=this.db.putSessionsWithMoreRoaming(sr);cr.cmd="syncSessionsWithMoreRoaming",this.syncPromiseArray.push(cr)}this.syncing&&this.syncResult?this.syncResult.sessionsWithMoreRoaming=sr:this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},Lt.syncStickTopSessions=function(Dt){var lr=this,sr=this.db,er=[],cr=[],or=L.resolve(),hr=Dt.content.sessions||[];this.syncing&&this.syncResult?(y(hr).call(hr,function(pr){var Tr=pr.id.split("|");Tr[0]==="super_team"&&(Tr[0]="superTeam"),pr.id=Tr.join("-"),pr.scene=Tr[0],pr.to=Tr[1],pr.isTop=!0,er.push(Tr.join("-")),delete pr.createTime,delete pr.updateTime,sr.enable&&cr.push(sr.putSession(pr))}),sr.enable&&(or=sr.updateTimetag("stickTopSessions",Dt.content.timetag)),or.then(function(){return sr.enable?sr.getStickTopSessions():[]}).then(function(pr){if(Dt.content.modify){var Tr=[];y(pr).call(pr,function(Pr){i(er).call(er,Pr.id)>-1||(Tr.push(Pr.id),Pr.isTop=!1,Pr.topCustom="",cr.push(sr.putSession(Pr)))})}else lr.syncResult.stickTopSessions=pr;return L.all(cr)}),this.syncResult.stickTopSessions=hr,or.cmd="syncStickTopSessions",this.syncPromiseArray.push(or)):this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")},Lt.getSessionInCache=function(Dt,lr){var sr=this.sessionSet[Dt];return!sr||sr.isDeleted&&!lr?void 0:sr},Lt.deleteSessionInCache=function(Dt,lr){var sr=this;jt.isArray(Dt)||(Dt=[Dt]),lr?y(Dt).call(Dt,function(er){sr.sessionSet[er]&&(sr.sessionSet[er].isDeleted=!0)}):y(Dt).call(Dt,function(er){return delete sr.sessionSet[er]}),this.logger.info("sessions::deleteSessionInCache::delete session done",Dt,lr)},Lt.updateSessionInCache=function(Dt){return this.logger.info("session::updateSessionInCache: ".concat(Dt.id),Dt.id,Dt),this.getSessionInCache(Dt.id)?Dt=this.mergeSession(Dt):(this.logger.info("session::updateSessionInCache: can not find session in cache ".concat(Dt.id)),null)},Lt.updateSessionInDbWithNotify=function(Dt,lr){var sr=this;return new L(function(er,cr){var or=sr.db;if(sr.getSessionInCache(Dt.id)){var hr=L.resolve(),pr=jt.filterObj(Dt,"id lastMsg localCustom unread");or.enable&&(hr=or.updateSession(pr)),hr.then(function(Tr){return sr.onUpdateSession(Tr,lr)}).then(er,function(Tr){cr({callFunc:"session::updateLocalSession",event:Tr})})}else cr(ir.sessionNotExist({sessionId:Dt.id,callFunc:"session::updateLocalSession"}))})}},function(t,r,e){var n=e(750);t.exports=function(g){if(n(g))return g},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(155),g=e(72);t.exports=function(y,i){var k=y==null?null:n!==void 0&&g(y)||y["@@iterator"];if(k!=null){var $,L,V,z,re=[],ie=!0,ue=!1;try{if(V=(k=k.call(y)).next,i===0){if(Object(k)!==k)return;ie=!1}else for(;!(ie=($=V.call(k)).done)&&(re.push($.value),re.length!==i);ie=!0);}catch(le){ue=!0,L=le}finally{try{if(!ie&&k.return!=null&&(z=k.return(),Object(z)!==z))return}finally{if(ue)throw L}}return re}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(2),g=e(4),y=e(6),i=e(37),k=e(35).fn,$=e(0);k.syncSessionAck=function(L){var V,z=this;if(this.logger.info("syncSessionAck::",L.content),z.syncing&&z.syncResult){z.saveAck.p2pTeam=L.content.timetag;var re={};n(V=[[L.content.p2p,"p2p"],[L.content.team.m_map,"team"]]).call(V,function(ie){var ue,le=ie[0],oe=ie[1];n(ue=g(le)).call(ue,function(ae){var Ue,de;re[y(Ue="".concat(oe,"-")).call(Ue,ae)]=le[ae];var _e={id:y(de="".concat(oe,"-")).call(de,ae),ack:le[ae]};z.cacheSyncedSession(_e)})}),z.syncResult.ackMap?z.syncResult.ackMap=i(z.syncResult.ackMap,re):z.syncResult.ackMap=re}else z.logger.warn("syncSessionAck: not in syncing or no syncResult",z.syncing,!!z.syncResult)},k.syncSuperTeamSessionAck=function(L){var V,z=this;if(z.syncResult){z.saveAck.superTeam=L.content.timetag;var re={},ie=L.content.superTeam.m_map;n(V=g(ie)).call(V,function(ue){re["superTeam-".concat(ue)]=ie[ue];var le={id:"superTeam-".concat(ue),ack:ie[ue]};z.cacheSyncedSession(le)}),z.syncResult.ackMap?z.syncResult.ackMap=i(z.syncResult.ackMap,re):z.syncResult.ackMap=re}},k.onMarkSessionAck=function(L){L.error||this.storeSessionAck(L.obj)},k.syncMarkSessionAck=function(L){this.storeSessionAck(L.content,!0)},k.storeSessionAck=function(L,V){var z;if(this.options.syncSessionUnread&&L){var re;switch(L.scene){case 0:re="p2p";break;case 1:re="team";break;case void 0:default:re="superTeam"}var ie=y(z="".concat(re,"-")).call(z,L.to),ue=L.timetag;if(ue<=((this.getSessionInCache(ie)||{}).ack||0))this.logger.warn("session::storeSessionAck: ack <= ackInMemory",ue);else{var le={id:ie,ack:ue};this.mergeSession(le),this.logger.info("session::storeSessionAck:",$.secureOutput("session",le)),this.markUnreadBySessionAck({sessionId:ie,ack:le.ack},V)}}},k.markUnreadBySessionAck=function(L,V){var z=L.sessionId,re=L.ack,ie=this,ue=ie.db;if(ue.enable)ie.pushMsgTask(function(){return ue.getMsgCountAfterAck({shouldCountNotifyUnread:ie.options.shouldCountNotifyUnread,sessionId:z,ack:re}).then(function(Ve){var $e={id:z,unread:Ve,ack:re};return ie.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done",$e),ie.syncing?ie.cacheSyncedSession($e):V&&ie.onUpdateSession($e),ue.updateSession($e)}).catch(function(Ve){ie.logger.error("markUnreadBySessionAck::error",Ve)})});else{var le=ie.getSessionInCache(z);if(le){var oe=le.unreadMsgs;if(oe&&oe.length){for(var ae=0,Ue=[],de=oe.length-1;de>=0;de--){var _e=oe[de];if(!(_e.time>re))break;ae++,Ue.push(_e)}le.unreadMsgs=Ue,le.unread=ae,ie.logger.info("session::markUnreadBySessionAck: unread ".concat(ae)),ie.syncing?ie.cacheSyncedSession(le):V&&ie.onUpdateSession(le)}}}}},function(t,r,e){var n=e(35).fn;n.processChatroom=function(g){switch(g.cmd){case"getChatroomAddress":this.onChatroomAddress(g)}},n.onChatroomAddress=function(g){g.error||(g.obj.address=g.content.address)}},function(t,r,e){var n=e(35).fn;n.processQchat=function(g){switch(g.cmd){case"getQChatAddress":this.onQChatAddress(g)}},n.onQChatAddress=function(g){g.error||(g.obj.address=g.content.address)}},function(t,r,e){e(35).fn.processFilter=function(n){switch(n.cmd){case"sendFilterMsg":this.onSendMsg(n,!0);break;case"filterMsg":this.onMsg(n,!0);break;case"filterSysMsg":this.onSysMsg(n,!0);break;case"sendFilterCustomSysMsg":this.onSendSysMsg(n,!0)}}},function(t,r,e){var n=e(9),g=e(45),y=e(35).fn,i=e(0),k=g.clientTypeMap;function $(L){L=L||{};var V=i.copy(L);return V.clientType&&(V.clientType=k[V.clientType]||""),V.serverCustom&&(V.custom=JSON.parse(V.serverCustom),typeof V.custom[0]=="string"&&(V.custom=V.custom[0]),delete V.serverCustom),V}y.processEventService=function(L){var V=L.content,z=L.error,re=this.options||{};switch(z&&(z.callFunc="events::processsEventService",this.onCustomError("","EVENT_SERVICE_ERROR",z)),L.cmd){case"pushEvent":if(i.isFunction(re.onpushevents)){var ie={msgEvents:[$(V.msgEvent)]};re.onpushevents(ie)}break;case"pushEvents":if(i.isFunction(re.onpushevents)){var ue=V.msgEvents;ue={msgEvents:n(ue).call(ue,function(le){return $(le)})},re.onpushevents(ue)}}}},function(t,r,e){var n=e(35).fn,g=e(0);n.processProxyService=function(y){var i=y.error;switch(i&&(i.callFunc="events::processProxyService",this.onCustomError("proxyService","EVENT_PROXY_SERVICE_ERROR",i)),y.cmd){case"onProxyMsg":if(g.isFunction(this.options.onProxyMsg)){var k=y.content.proxyMsg||{};k.time&&(k.time=+k.time),this.options.onProxyMsg(k)}break;case"httpProxy":y.obj=y.content&&y.content.proxyTag}}},function(t,r,e){var n=e(10),g=e(9),y=e(0),i=function(ae){this.account=ae.account},k=i.prototype,$=k.Message=e(76),L=k.TextMessage=e(835),V=k.FileMessage=e(205),z=k.GeoMessage=e(839),re=k.NotificationMessage=e(840),ie=k.CustomMessage=e(841),ue=k.TipMessage=e(842),le=k.RobotMessage=e(843),oe=k.G2Message=e(844);k.validScenes=$.validScenes,k.validTypes=$.validTypes,k.sceneMap=$.sceneMap,k.sceneReverseMap=$.sceneReverseMap,k.reverse=function(ae){var Ue;switch($.getType(ae)){case"text":Ue=n(L).call(L,ae);break;case"image":case"audio":case"video":case"file":Ue=n(V).call(V,ae);break;case"geo":Ue=n(z).call(z,ae);break;case"notification":Ue=n(re).call(re,ae);break;case"custom":Ue=n(ie).call(ie,ae);break;case"tip":Ue=n(ue).call(ue,ae);break;case"g2":Ue=n(oe).call(oe,ae);break;case"robot":Ue=n(le).call(le,ae);break;default:Ue=n($).call($,ae)}return $.setExtra(Ue,this.account),Ue},k.reverseMsgs=function(ae,Ue){var de,_e,Ve=this;return g(ae).call(ae,function($e){return $e=n(Ve).call(Ve,$e),Ue&&((de=Ue.modifyObj)&&($e=y.merge($e,de)),_e=Ue.mapper,y.isFunction(_e)&&($e=_e($e))),$e})},t.exports=i},function(t,r,e){var n=e(18),g=e(10),y=e(76),i=e(0);function k($){i.verifyOptions($,"text","msg::TextMessage"),$.type="text",y.call(this,$)}k.prototype=n(y.prototype),k.reverse=function($){return g(y).call(y,$)},t.exports=k},function(t,r,e){var n=e(18),g=e(205);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(i,k){return!0},t.exports=y},function(t,r,e){var n=e(18),g=e(205);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(){},t.exports=y},function(t,r,e){var n=e(18),g=e(205);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(){},t.exports=y},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(76),k=e(0);function $(L){L.type="geo",k.verifyOptions(L,"geo","msg::GeoMessage"),k.verifyOptions(L.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),k.verifyParamType("geo.lng",L.geo.lng,"number","msg::GeoMessage"),k.verifyParamType("geo.lat",L.geo.lat,"number","msg::GeoMessage"),k.verifyParamType("geo.title",L.geo.title,"string","msg::GeoMessage"),i.call(this,L),this.attach=n(L.geo)}$.prototype=g(i.prototype),$.reverse=function(L){var V=y(i).call(i,L);return L.attach=L.attach?""+L.attach:"",V.geo=L.attach?JSON.parse(L.attach):{},V},t.exports=$},function(t,r,e){var n=e(18),g=e(10),y=e(9),i=e(121),k=e(0).notundef,$=e(76),L=e(149).IM,V=e(194),z=e(204),re={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function ie(){}ie.prototype=n($.prototype),ie.reverse=function(ue){var le=g($).call($,ue);if(ue.attach=ue.attach?""+ue.attach:"",ue.attach){var oe=JSON.parse(ue.attach);if(le.attach={type:re[oe.id]||oe.id},k(oe.data)){var ae,Ue,de=oe.data;k(de.tinfo)&&(le.attach.team=g(V).call(V,L.syncUnserialize(de.tinfo,"team"),!0)),k(de.ids)&&(le.attach.accounts=de.ids),k(de.id)&&(le.attach.account=de.id),k(de.uinfos)&&(le.attach.users=y(ae=de.uinfos).call(ae,function(_e){return g(z).call(z,L.syncUnserialize(_e,"user"))})),k(de.mute)&&(le.attach.mute=+de.mute==1),k(de.attach)&&(le.attach.custom=de.attach),k(de.channel)&&(le.attach.channelId=de.channel),k(de.calltype)&&(le.attach.netcallType=de.calltype),k(de.duration)&&(le.attach.duration=de.duration),k(de.time)&&(le.attach.time=de.time),k(de.from)&&(le.attach.from=de.from),k(de.ext)&&(le.attach.ext=de.ext),le.attach.accounts&&le.attach.accounts.length<=2&&le.from===le.to&&i(Ue=le.attach.accounts).call(Ue,function(_e){if(_e!==le.to)return le.to=_e,!0})}}else le.attach={};return le},t.exports=ie},function(t,r,e){var n=e(18),g=e(10),y=e(76),i=e(0);function k($){i.verifyOptions($,"content","msg::CustomMessage"),$.type="custom",y.call(this,$),this.attach=$.content}k.prototype=n(y.prototype),k.reverse=function($){var L=g(y).call(y,$);return L.content=$.attach,L},t.exports=k},function(t,r,e){var n=e(18),g=e(10),y=e(76),i=e(0);function k($){i.verifyOptions($,"tip","msg::TipMessage"),$.type="tip",y.call(this,$),this.body=$.tip}k.prototype=n(y.prototype),k.reverse=function($){var L=g(y).call(y,$);return L.text="",L.tip=$.body,$.attach&&(L.attach=$.attach),L},t.exports=k},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(9),k=e(76),$=e(0),L={welcome:"00",text:"01",link:"03"},V={"01":"text","02":"image","03":"answer",11:"template"};function z(re){$.verifyOptions(re,"content","msg::RobotMessage"),$.undef(re.robotAccid)&&(re.robotAccid=re.to);var ie=re.content;switch(ie.type){case"welcome":$.undef(re.body)&&(this.body="");break;case"text":$.verifyOptions(ie,"content","msg::RobotMessage"),$.undef(re.body)&&(this.body=ie.content);break;case"link":$.verifyOptions(ie,"target","msg::RobotMessage")}ie.type&&(ie.type=L[ie.type]),ie={param:ie,robotAccid:re.robotAccid},this.attach=n(ie),re.type="robot",k.call(this,re)}z.prototype=g(k.prototype),z.reverse=function(re){var ie=y(k).call(k,re);if(ie.type==="robot"){var ue=JSON.parse(re.attach);if(ue.param&&(ue.param.type=V[ue.param.type]||"unknown"),ue.robotMsg){var le=(ue=$.merge(ue,ue.robotMsg)).message;ue.flag==="bot"?ue.message=i(le).call(le,function(oe){return oe.type=V[oe.type]||"unknown",oe}):ue.flag,delete ue.robotMsg}ie.content=ue}return ie},t.exports=z},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(76),k=e(0);function $(L){k.verifyOptions(L,"attach","msg::G2Message"),L.type="g2",i.call(this,L),this.attach=n(L.attach)}$.prototype=g(i.prototype),$.reverse=function(L){var V=y(i).call(i,L);return L.attach&&(V.attach=JSON.parse(L.attach)),V},t.exports=$},function(t,r,e){var n=e(51),g=e(57),y=e(22),i=e(58),k=e(9),$=e(16),L=e(7),V=e(3),z=e(2),re=e(37),ie=e(4),ue=e(52),le=e(53),oe=e(54),ae=e(55),Ue=e(43);function de(Et,ir){var ur=ie(Et);if(ue){var Dt=ue(Et);ir&&(Dt=$(Dt).call(Dt,function(lr){return le(Et,lr).enumerable})),ur.push.apply(ur,Dt)}return ur}function _e(Et){for(var ir=1;ir<arguments.length;ir++){var ur,Dt,lr=arguments[ir]!=null?arguments[ir]:{};ir%2?z(ur=de(Object(lr),!0)).call(ur,function(sr){n(Et,sr,lr[sr])}):oe?ae(Et,oe(lr)):z(Dt=de(Object(lr))).call(Dt,function(sr){Ue(Et,sr,le(lr,sr))})}return Et}var Ve=e(40).fn,$e=e(0),Lt=$e.isArray,jt=e(152);Ve.mergeObjArray=function(Et,ir,ur){return Et||(Et=[]),ir?(Lt(ir)||(ir=[ir]),ir.length?(ur=ur||{},$e.mergeObjArray(Et,ir,ur)):Et):Et},Ve.cutObjArray=function(Et,ir,ur){return Et&&ir?(Lt(ir)||(ir=[ir]),ir.length?(ur=ur||{},$e.cutObjArray(Et,ir,ur)):Et):Et},Ve.mergeLoginPorts=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"deviceId"})},Ve.cutLoginPorts=function(Et,ir){return this.cutObjArray(Et,ir,{keyPath:"deviceId",sortPath:"type"})},Ve.mergeRelations=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"account"})},Ve.cutRelations=function(Et,ir){return this.cutObjArray(Et,ir,{keyPath:"account"})},Ve.findRelation=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"account",value:ir})},Ve.mergeFriends=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"account"})},Ve.cutFriends=function(Et,ir){return this.cutObjArray(Et,ir,{keyPath:"account"})},Ve.cutFriendsByAccounts=function(Et,ir){Lt(ir)||(ir=[ir]);var ur=k(ir).call(ir,function(Dt){return{account:Dt}});return this.cutFriends(Et,ur)},Ve.findFriend=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"account",value:ir})},Ve.mergeUsers=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"account"})},Ve.findUser=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"account",value:ir})},Ve.mergeTeams=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"teamId"})},Ve.cutTeams=function(Et,ir){return this.cutObjArray(Et,ir,{keyPath:"teamId"})},Ve.findTeam=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"teamId",value:ir})},Ve.assembleTeamOwner=jt.assembleOwner,Ve.assembleTeamMembers=jt.assembleMembers,Ve.genTeamMemberId=jt.genId,Ve.mergeTeamMembers=function(Et,ir){return this.mergeObjArray(Et,ir)},Ve.cutTeamMembers=function(Et,ir){return this.cutObjArray(Et,ir)},Ve.cutTeamMembersByAccounts=function(Et,ir,ur){Lt(ur)||(ur=[ur]);var Dt=jt.assembleMembers({teamId:ir},ur);return this.cutTeamMembers(Et,Dt)},Ve.findTeamMember=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"id",value:ir})},Ve.mergeSessions=function(Et,ir){return this.mergeObjArray(Et,ir,{sortPath:"updateTime",desc:!0})},Ve.cutSessions=function(Et,ir){return this.cutObjArray(Et,ir)},Ve.cutSessionsByIds=function(Et,ir){Lt(ir)||(ir=[ir]);var ur=k(ir).call(ir,function(Dt){return{id:Dt}});return this.cutSessions(Et,ur)},Ve.findSession=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"id",value:ir})},Ve.mergeMsgs=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"idClient",sortPath:"time"})},Ve.cutMsgs=function(Et,ir){return this.cutObjArray(Et,ir,{keyPath:"idClient"})},Ve.cutMsgsByIdClients=function(Et,ir){Lt(ir)||(ir=[ir]);var ur=k(ir).call(ir,function(Dt){return{idClient:Dt}});return this.cutMsgs(Et,ur)},Ve.findMsg=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"idClient",value:ir})},Ve.mergeSysMsgs=function(Et,ir){return this.mergeObjArray(Et,ir,{keyPath:"idServer",desc:!0})},Ve.cutSysMsgs=function(Et,ir){return this.cutObjArray(Et,ir,{keyPath:"idServer"})},Ve.cutSysMsgsByIdServers=function(Et,ir){Lt(ir)||(ir=[ir]);var ur=k(ir).call(ir,function(Dt){return{idServer:Dt}});return this.cutSysMsgs(Et,ur)},Ve.findSysMsg=function(Et,ir){return $e.findObjInArray(Et,{keyPath:"idServer",value:ir})},Ve.searchLocal=function(Et){if($e.verifyOptions(Et,"keyword","searchLocal"),this.db.enable){var ir,ur=this,Dt=this.db,lr=Et.keyword+"",sr=["account","nick","alias"],er=["id","scene","lastMsg.type","lastMsg.text","localCustom","target.account","target.nick","target.alias","target.name"],cr="",or=Et.keyPath;switch(or?(cr=(or=(or+"").split(".")).shift(),or=or.join(".")):cr="all",cr){case"user":or&&(sr=$(sr).call(sr,function(Er){return Er===or||L(Er).call(Er,or+".")===0})),Tr(sr).then(function(Er){Et.done(null,{sessions:[],users:Er})});break;case"session":or&&(er=$(er).call(er,function(Er){return Er===or||L(Er).call(Er,or+".")===0})),hr(er,!or||L(or).call(or,"target")>-1).then(function(Er){Et.done(null,{sessions:Er,users:[]})});break;case"all":_r().then(function(){V.all([hr(er,!0),Tr(sr)]).then(function(Er){Et.done(null,{sessions:Er[0],users:Er[1]})})});break;default:Et.done(null,{sessions:[],users:[],msg:'keyPath must start with "user" or "session"'})}}else Et.done(null,{sessions:[],users:[],msg:"no db"});function hr(Er,xr){return pr.apply(this,arguments)}function pr(){return(pr=i(g.mark(function Er(xr,vr){var Ir;return g.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Ir=vr?[Dt.getSessions(),_r(),Dt.getTeams(),Dt.getSuperTeams()]:[Dt.getSessions()],Or.abrupt("return",V.all(Ir).then(function(Cr){var yr,fr=Cr[0]||[],Sr={p2p:Cr[1]||[],team:Cr[2]||[],superTeam:Cr[3]||[]},Br={};return vr&&(z(yr=ie(Sr)).call(yr,function($r){var Lr;z(Lr=Sr[$r]).call(Lr,function(Gr){var qr=Gr.teamId||Gr.account;Br[$r+"-"+qr]=Gr})}),z(fr).call(fr,function($r){$r.target=Br[$r.id]})),rr(xr,fr)}));case 2:case"end":return Or.stop()}},Er)}))).apply(this,arguments)}function Tr(Er){return Pr.apply(this,arguments)}function Pr(){return(Pr=i(g.mark(function Er(xr){var vr;return g.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return Ir.next=2,_r();case 2:return vr=Ir.sent,Ir.abrupt("return",rr(xr,vr));case 4:case"end":return Ir.stop()}},Er)}))).apply(this,arguments)}function _r(){return Mr.apply(this,arguments)}function Mr(){return(Mr=i(g.mark(function Er(){var xr,vr;return g.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(!ir){Ir.next=2;break}return Ir.abrupt("return",ir);case 2:return Ir.next=4,ur.db.getFriends();case 4:if(Ir.t0=Ir.sent,Ir.t0){Ir.next=7;break}Ir.t0=[];case 7:return xr=Ir.t0,vr=ur.protocol.userSet||{},ir=k(xr).call(xr,function(Or){return _e(_e({},Or),vr[Or.account])}),Ir.abrupt("return",ir);case 11:case"end":return Ir.stop()}},Er)}))).apply(this,arguments)}function rr(Er,xr){var vr=[];return z(xr).call(xr,function(Ir){for(var Or=0;Or<Er.length;Or++){var Cr=kr(Ir,Er[Or].split("."));if(Cr&&L(Cr).call(Cr,lr)>-1){vr.push(re({},Ir));break}}}),vr}function kr(Er,xr){if(y(Er)==="object"&&Er)return xr.length===1?Er[xr[0]]:kr(Er[xr.shift()],xr)}}},function(t,r,e){var n=e(15),g=e(40).fn,y=e(0),i=e(25).reportAPI;g.kick=function(k){var $;(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"kick",done:k.done}),y.verifyOptions(k,"deviceIds","link::kick"),this.processCallback(k),this.sendCmd("kick",{deviceIds:n($=k.deviceIds).call($,0)},k.callback)},g.disconnect=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"disconnect",done:k.done}),k=k||{},this.protocol.disconnect(k.done)}},function(t,r,e){var n=e(40).fn,g=e(0),y=e(25).reportAPI;n.markInBlacklist=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"markInBlacklist",done:i.done}),g.verifyOptions(i,"account isAdd","relation::markInBlacklist"),g.verifyParamType("isAdd",i.isAdd,"boolean","relation::markInBlacklist"),this.processCallback(i),this.sendCmd("markInBlacklist",{account:i.account,isAdd:i.isAdd},i.callback)},n.addToBlacklist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"addToBlacklist",done:i.done}),i.isAdd=!0,this.markInBlacklist(i)},n.removeFromBlacklist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"removeFromBlacklist",done:i.done}),i.isAdd=!1,this.markInBlacklist(i)},n.markInMutelist=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"markInMutelist",done:i.done}),g.verifyOptions(i,"account","relation::markInMutelist"),g.verifyParamType("isAdd",i.isAdd,"boolean","relation::markInMutelist"),this.processCallback(i),this.sendCmd("markInMutelist",{account:i.account,isAdd:i.isAdd},i.callback)},n.addToMutelist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"addToMutelist",done:i.done}),i.isAdd=!0,this.markInMutelist(i)},n.removeFromMutelist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"removeFromMutelist",done:i.done}),i.isAdd=!1,this.markInMutelist(i)},n.getRelations=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"getRelations",done:i.done});var k=this,$=k.db,L=0;function V(){k.sendCmd("getRelations",{timetag:L,NOTSTORE:"timetag"},i.callback)}i=g.verifyOptions(i),k.processCallback(i),$.enable?$.getRelationsTimetag().then(function(z){L=z,V()},V):V()}},function(t,r,e){var n=e(57),g=e(58),y=e(6),i=e(2),k=e(7),$=e(40).fn,L=e(0),V=L.objs2accounts,z=e(204),re=e(25).reportAPI;$.updateMyInfo=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"updateMyInfo",done:ie.done}),L.verifyOptions(ie),this.processCallback(ie),ie.user=new z(ie),delete ie.user.account,this.sendCmd("updateMyInfo",{user:ie.user,antispamTag:{antiSpamBusinessId:ie.antiSpamBusinessId},single:!0},ie.callback)},$.getMyInfo=function(ie){return(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"getMyInfo",done:ie.done}),(ie=ie||{}).account=this.account,this.getUser(ie)},$.getUser=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"getUser",done:ie.done});var ue,le=this,oe=le.db;function ae(){le.sendCmd("getUsers",{accounts:[ue],single:!0},ie.callback)}L.verifyOptions(ie,"account","user::getUser"),le.processCallback(ie),ie.cbaop=function(Ue,de){if(!Ue)return de=de[0]||null,le.logger.info("api::getUser: cbaop ".concat(ue)),de},ue=ie.account,ie.sync?ae():oe.enable?oe.getUser(ue).then(function(Ue){Ue?ie.done(null,Ue):ae()},ae):ae()},$.getUsers=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"getUsers",done:ie.done});var ue,le=this,oe=le.db,ae=[];function Ue(){le.sendCmd("getUsers",{accounts:ue,single:!0},ie.callback)}L.verifyOptions(ie,"accounts","user::getUsers"),L.verifyParamType("accounts",ie.accounts,"array","user::getUsers"),le.processCallback(ie),ie.cbaop=function(de,_e){if(!de)return _e=y(_e).call(_e,ae),le.logger.info("api::getUsers: cbaop ".concat(ue)),_e},ue=L.deduplicate(ie.accounts),L.verifyArrayMax("accounts",ie.accounts,150,"user::getUsers"),ie.sync?Ue():oe.enable?oe.getUsers({accountIds:ue}).then(function(de){if(de&&de.length===ue.length)ie.done(null,de);else{ae=de;var _e=V(de),Ve=[];i(ue).call(ue,function($e){k(_e).call(_e,$e)===-1&&Ve.push($e)}),ue=Ve,Ue()}},Ue):Ue()},$.getUsersFromDB=function(){var ie=g(n.mark(function ue(le){var oe,ae,Ue;return n.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return ae=(oe=this).db,(le=le||{}).done=re({instance:this,className:"NIMFn",funcName:"getUsersFromDB",done:le.done}),L.validate({accountIds:{type:"array",required:!1}},le,"user::getUsersFromDB"),oe.processCallback(le),de.next=8,ae.getUsers(le);case 8:return Ue=de.sent,le.callback(null,Ue),de.abrupt("return",Ue);case 11:case"end":return de.stop()}},ue,this)}));return function(ue){return ie.apply(this,arguments)}}()},function(t,r,e){var n=e(57),g=e(58),y=e(122),i=e(40).fn,k=e(0),$=k.notundef,L=e(755),V=e(25).reportAPI;i.friendRequest=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"friendRequest",done:z.done}),k.verifyOptions(z,"type account","friend::friendRequest"),k.verifyParamValid("type",z.type,L.validTypes(),"friend::friendRequest"),this.processPs(z),this.processCallback(z);var re={account:z.account,type:L.getByteFromType(z.type),ps:z.ps};$(z.idServer)&&(re.idServer=z.idServer),this.sendCmd("friendRequest",re,z.callback)},i.addFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"addFriend",done:z.done}),z.type="addFriend",this.friendRequest(z)},i.applyFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"applyFriend",done:z.done}),z.type="applyFriend",this.friendRequest(z)},i.passFriendApply=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"passFriendApply",done:z.done}),k.verifyOptions(z,"idServer","friend::passFriendApply"),z.type="passFriendApply",this.friendRequest(z)},i.rejectFriendApply=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"rejectFriendApply",done:z.done}),k.verifyOptions(z,"idServer","friend::rejectFriendApply"),z.type="rejectFriendApply",this.friendRequest(z)},i.deleteFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"deleteFriend",done:z.done}),k.verifyOptions(z,"account","friend::deleteFriend");var re=z.delAlias===!0;this.processCallback(z),this.sendCmd("deleteFriend",{account:z.account,delFriendParams:{delAlias:re?1:0}},z.callback)},i.updateFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"updateFriend",done:z.done}),this.processCallback(z);var re=new L(z);this.sendCmd("updateFriend",{friend:re,single:!0},z.callback)},i.getFriends=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"getFriends",done:z.done});var re=this.db;k.validate({timetag:{type:"number",required:!1}},z,"friend::getFriends"),this.processCallback(z),re.enable?re.getFriends({updateTime:z.updateTime||0}).then(function(ie){(ie=y(ie).call(ie,function(ue,le){return ue.updateTime-le.updateTime})).invalid=[],z.done(null,ie)}):this.sendCmd("getFriends",{timetag:z.updateTime||0,NOTSTORE:"timetag"},z.callback)},i.getFriendsFromDB=function(){var z=g(n.mark(function re(ie){var ue,le,oe;return n.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return le=(ue=this).db,(ie=ie||{}).done=V({instance:this,className:"NIMFn",funcName:"getFriendsFromDB",done:ie.done}),k.validate({accountIds:{type:"array",required:!1}},ie,"friend::getFriendsFromDB"),ue.processCallback(ie),ae.next=8,le.getFriends(ie);case 8:return oe=ae.sent,ie.callback(null,oe),ae.abrupt("return",oe);case 11:case"end":return ae.stop()}},re,this)}));return function(re){return z.apply(this,arguments)}}(),i.isMyFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"isMyFriend",done:z.done});var re=this.db;k.validate({account:{type:"string",allowEmpty:!1,require:!0}},z),this.processCallback(z),re.enable||z.done(null,!1),re.getFriend(z.account).then(function(ie){ie&&ie.valid===!0?z.done(null,!0):z.done(null,!1)})},i.isUserInBlackList=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"isUserInBlackList",done:z.done});var re=this.db;k.validate({account:{type:"string",allowEmpty:!1,require:!0}},z),this.processCallback(z),re.enable||z.done(null,!1),re.getUserFromBlackList(z.account).then(function(ie){ie&&ie.account?z.done(null,!0):z.done(null,!1)})}},function(t,r,e){var n=e(40).fn,g=e(25).reportAPI;n.getRobots=function(y){(y=y||{}).done=g({instance:this,className:"NIMFn",funcName:"getRobots",done:y.done}),this.logger.warn("this api will be abandon"),(y=y||{}).type="getRobots",this.processCallback(y),this.sendCmd("sync",{sync:{robots:0}},y.callback)}},function(t,r,e){var n=e(57),g=e(58),y=e(15),i=e(9),k=e(16),$=e(3),L=e(8),V=e(40).fn,z=e(0),re=z.undef,ie=e(194),ue=e(152),le=e(25).reportAPI;V.createTeam=function(oe){var ae;(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"createTeam",done:oe.done}),z.verifyOptions(oe,"type name","team::createTeam"),re(oe.accounts)?oe.accounts=[]:z.verifyParamType("accounts",oe.accounts,"array","team::createTeam"),oe.action="create",this.processPs(oe),this.processCallback(oe),oe.team=new ie(oe);var Ue={team:oe.team,accounts:y(ae=oe.accounts).call(ae,0),ps:oe.ps,antispamTag:{antiSpamBusinessId:oe.antiSpamBusinessId}};this.sendCmd("createTeam",Ue,oe.callback)},V.updateTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateTeam",done:oe.done}),z.verifyOptions(oe,"teamId","team::updateTeam"),oe.action="update",this.processCallback(oe),oe.team=new ie(oe),this.sendCmd("updateTeam",{team:oe.team,antispamTag:{antiSpamBusinessId:oe.antiSpamBusinessId},single:!0},oe.callback)},V.addTeamMembers=function(oe){var ae;(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"addTeamMembers",done:oe.done}),z.verifyOptions(oe,"teamId accounts","team::addTeamMembers"),z.verifyParamType("accounts",oe.accounts,"array","team::addTeamMembers"),this.processPs(oe),z.notexist(oe.custom)&&(oe.custom=""),this.processCallback(oe);var Ue={teamId:oe.teamId,accounts:y(ae=oe.accounts).call(ae,0),ps:oe.ps,attach:oe.custom};this.sendCmd("addTeamMembers",Ue,oe.callback)},V.removeTeamMembers=function(oe){var ae;(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"removeTeamMembers",done:oe.done}),z.verifyOptions(oe,"teamId accounts","team::removeTeamMembers"),z.verifyParamType("accounts",oe.accounts,"array","team::removeTeamMembers"),this.processCallback(oe);var Ue={teamId:oe.teamId,accounts:y(ae=oe.accounts).call(ae,0)};this.sendCmd("removeTeamMembers",Ue,oe.callback)},V.acceptTeamInvite=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"acceptTeamInvite",done:oe.done}),z.verifyOptions(oe,"idServer teamId from","team::acceptTeamInvite"),this.processCallback(oe);var ae={idServer:oe.idServer,teamId:oe.teamId,from:oe.from,type:"teamInvite"};this.sendCmd("acceptTeamInvite",ae,oe.callback)},V.rejectTeamInvite=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"rejectTeamInvite",done:oe.done}),z.verifyOptions(oe,"idServer teamId from","team::rejectTeamInvite"),this.processPs(oe),this.processCallback(oe);var ae={idServer:oe.idServer,teamId:oe.teamId,from:oe.from,ps:oe.ps,type:"teamInvite"};this.sendCmd("rejectTeamInvite",ae,oe.callback)},V.applyTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"applyTeam",done:oe.done}),z.verifyOptions(oe,"teamId","team::applyTeam"),this.processPs(oe),this.processCallback(oe);var ae={teamId:oe.teamId,ps:oe.ps};this.sendCmd("applyTeam",ae,oe.callback)},V.passTeamApply=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"passTeamApply",done:oe.done}),z.verifyOptions(oe,"idServer teamId from","team::passTeamApply"),this.processCallback(oe);var ae={idServer:oe.idServer,teamId:oe.teamId,from:oe.from,type:"applyTeam"};this.sendCmd("passTeamApply",ae,oe.callback)},V.rejectTeamApply=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"rejectTeamApply",done:oe.done}),z.verifyOptions(oe,"idServer teamId from","team::rejectTeamApply"),this.processPs(oe),this.processCallback(oe);var ae={idServer:oe.idServer,teamId:oe.teamId,from:oe.from,ps:oe.ps,type:"applyTeam"};this.sendCmd("rejectTeamApply",ae,oe.callback)},V.addTeamManagers=function(oe){var ae;(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"addTeamManagers",done:oe.done}),z.verifyOptions(oe,"teamId accounts","team::addTeamManagers"),z.verifyParamType("accounts",oe.accounts,"array","team::addTeamManagers"),this.processCallback(oe);var Ue={teamId:oe.teamId,accounts:y(ae=oe.accounts).call(ae,0)};this.sendCmd("addTeamManagers",Ue,oe.callback)},V.removeTeamManagers=function(oe){var ae;(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"removeTeamManagers",done:oe.done}),z.verifyOptions(oe,"teamId accounts","team::removeTeamManagers"),z.verifyParamType("accounts",oe.accounts,"array","team::removeTeamManagers"),this.processCallback(oe);var Ue={teamId:oe.teamId,accounts:y(ae=oe.accounts).call(ae,0)};this.sendCmd("removeTeamManagers",Ue,oe.callback)},V.updateInfoInTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateInfoInTeam",done:oe.done}),z.verifyOptions(oe,"teamId","team::updateInfoInTeam"),this.processCallback(oe),this.sendCmd("updateInfoInTeam",{teamMember:new ue(oe),single:!0},oe.callback)},V.updateNickInTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateNickInTeam",done:oe.done}),z.verifyOptions(oe,"teamId account","team::updateNickInTeam"),this.processCallback(oe),this.sendCmd("updateNickInTeam",{teamMember:new ue(oe),single:!0},oe.callback)},V.updateMuteStateInTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"updateMuteStateInTeam",done:oe.done}),z.verifyOptions(oe,"teamId account mute","team::updateMuteStateInTeam"),this.processCallback(oe),oe.mute=oe.mute?1:0,this.sendCmd("updateMuteStateInTeam",oe)},V.getMutedTeamMembers=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getMutedTeamMembers",done:oe.done}),z.verifyOptions(oe,"teamId","team::getMutedTeamMembers"),this.processCallback(oe),this.sendCmd("getMutedTeamMembers",oe)},V.leaveTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"leaveTeam",done:oe.done}),z.verifyOptions(oe,"teamId","team::leaveTeam"),this.processCallback(oe);var ae={teamId:oe.teamId};this.sendCmd("leaveTeam",ae,oe.callback)},V.transferTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"transferTeam",done:oe.done}),z.verifyOptions(oe,"teamId account leave","team::transferTeam"),z.verifyParamType("leave",oe.leave,"boolean","team::transferTeam"),this.processCallback(oe);var ae={teamId:oe.teamId,account:oe.account,leave:oe.leave};this.sendCmd("transferTeam",ae,oe.callback)},V.dismissTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"dismissTeam",done:oe.done}),z.verifyOptions(oe,"teamId","team::dismissTeam"),this.processCallback(oe);var ae={teamId:oe.teamId};this.sendCmd("dismissTeam",ae,oe.callback)},V.getTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeam",done:oe.done});var ae,Ue=this,de=Ue.db;function _e(){Ue.sendCmd("getTeam",{teamId:oe.teamId},oe.callback)}z.verifyOptions(oe,"teamId","team::getTeam"),Ue.processCallback(oe),oe.cbaop=function(Ve){Ve||Ue.logger.info("api::getTeam: cbaop ".concat(ae))},ae=oe.teamId,de.enable&&!oe.sync?de.getTeam(ae).then(function(Ve){Ve&&Ve.validToCurrentUser?(Ue.logger.log("api::getTeam: db.getTeam ".concat(ae)),oe.done(null,Ve)):_e()},_e):_e()},V.getTeams=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeams",done:oe.done});var ae=this,Ue=ae.db,de=0;function _e(){ae.sendCmd("getTeams",{timetag:de,NOTSTORE:"timetag"},oe.callback)}z.verifyOptions(oe),ae.processCallback(oe),Ue.enable?Ue.getTeamsTimetag().then(function(Ve){de=Ve,_e()},_e):_e()},V.getTeamsById=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamsById",done:oe.done}),z.verifyOptions(oe,"teamIds","teams::getTeamsById"),this.processCallback(oe),this.sendCmd("getTeamsById",{teamIds:oe.teamIds},oe.callback)},V.getTeamMembers=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamMembers",done:oe.done});var ae=this;z.verifyOptions(oe,"teamId","team::getTeamMembers"),ae.processCallback(oe),ae.sendCmd("getTeamMembers",{teamId:oe.teamId,timetag:0,NOTSTORE:"timetag"},oe.callback)},V.getTeamMemberByTeamIdAndAccount=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamMemberByTeamIdAndAccount",done:oe.done});var ae=this;z.verifyParamType("teamId",oe.teamId,"numeric or numeric string","team::getTeamMemberByTeamIdAndAccount"),z.verifyOptions(oe,"account","team::getTeamMemberByTeamIdAndAccount"),ae.processCallback(oe),ae.sendCmd("getTeamMembers",{teamId:oe.teamId,timetag:0,NOTSTORE:"timetag"},function(Ue,de,_e){var Ve={};if(de&&de.members&&de.members.length){for(var $e=0;$e<de.members.length;$e++)if(de.members[$e].account===oe.account){Ve[oe.account]=de.members[$e];break}}oe.callback(Ue,Ve,_e)})},V.getTeamMemberInvitorAccid=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamMemberInvitorAccid",done:oe.done}),z.verifyParamType("teamId",oe.teamId,"numeric or numeric string","team::getTeamMemberInvitorAccid"),re(oe.accounts)||(z.verifyParamType("accounts",oe.accounts,"array","team::getTeamMemberInvitorAccid"),oe.accounts.length>200&&z.onParamError("accounts 200","team::getTeamMemberInvitorAccid"));var ae,Ue={teamId:oe.teamId};oe.accounts.length&&(Ue.accounts=y(ae=oe.accounts).call(ae,0)),this.processCallback(oe),this.sendCmd("getTeamMemberInvitorAccid",Ue,function(de,_e,Ve){oe.callback(de,Ve&&Ve.accountsMap||{})})},V.notifyForNewTeamMsg=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"notifyForNewTeamMsg",done:oe.done}),z.verifyOptions(oe,"teamIds","team::notifyForNewTeamMsg"),this.protocol.notifyForNewTeamMsg(oe.teamIds).then(function(ae){oe.done(ae.error||null,i(ae),ae.miss)},function(ae){oe.done(ae)})},V.getMyTeamMembers=function(oe){le({instance:this,className:"NIMFn",funcName:"getMyTeamMembers",done:oe.done,hasCallback:!1});var ae=oe.done;z.verifyOptions(oe,"teamIds","team::getMyTeamMembers");var Ue=this.processCallbackPromise(oe);return this.sendCmd("getMyTeamMembers",oe),Ue.then(function(de){return typeof ae=="function"?ae(null,de):de}).catch(function(de){if(typeof ae=="function")return ae(de);throw de})},V.getLocalTeams=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getLocalTeams",done:oe.done});var ae,Ue=this.db,de=[];function _e(){oe.teams=de,oe.done(ae,oe)}z.verifyOptions(oe,"teamIds","team::getLocalTeams"),z.verifyParamType("teamIds",oe.teamIds,"array","team::getLocalTeams"),this.processCallback(oe),Ue.enable?Ue.getTeamsByTeamIds(oe.teamIds).then(function(Ve){de=k(Ve).call(Ve,function($e){return!!$e}),_e()},function(Ve){ae=Ve,_e()}):_e()},V.getTeamsFromDB=function(){var oe=g(n.mark(function ae(Ue){var de,_e,Ve;return n.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return _e=(de=this).db,(Ue=Ue||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamsFromDB",done:Ue.done}),z.validate({teamIds:{type:"array",required:!1}},Ue,"team::getTeamsFromDB"),de.processCallback(Ue),$e.next=8,_e.getTeams(Ue);case 8:return Ve=$e.sent,Ue.callback(null,Ve),$e.abrupt("return",Ve);case 11:case"end":return $e.stop()}},ae,this)}));return function(ae){return oe.apply(this,arguments)}}(),V.getLocalTeamMembers=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getLocalTeamMembers",done:oe.done});var ae,Ue=this.db,de=[];function _e(){oe.members=de,oe.done(ae,oe)}z.verifyOptions(oe,"teamId accounts","team::getLocalTeamMembers"),z.verifyParamType("accounts",oe.accounts,"array","team::getLocalTeamMembers"),this.processCallback(oe),Ue.enable?Ue.getInvalidTeamMembers(oe.teamId,oe.accounts).then(function(Ve){de=k(Ve).call(Ve,function($e){return!!$e}),_e()},function(Ve){ae=Ve,_e()}):_e()},V.getTeamMembersFromDB=function(){var oe=g(n.mark(function ae(Ue){var de,_e,Ve;return n.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return _e=(de=this).db,(Ue=Ue||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamMembersFromDB",done:Ue.done}),z.validate({teamIds:{type:"array",required:!1},accountIds:{type:"array",required:!1}},Ue,"team::getTeamMembersFromDB"),de.processCallback(Ue),$e.next=8,_e.getTeamMembers(Ue);case 8:return Ve=$e.sent,Ue.callback(null,Ve),$e.abrupt("return",Ve);case 11:case"end":return $e.stop()}},ae,this)}));return function(ae){return oe.apply(this,arguments)}}(),V.deleteLocalTeam=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteLocalTeam",done:oe.done});var ae,Ue=this.db;function de(){oe.done(ae,oe)}z.verifyOptions(oe,"teamId","team::deleteLocalTeam"),this.processCallback(oe),Ue.enable?Ue.deleteTeam(oe.teamId).then(function(){de()},function(_e){ae=_e,de()}):de()},V.muteTeamAll=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"muteTeamAll",done:oe.done}),z.verifyOptions(oe,"teamId mute","team::muteTeamAll"),oe.mute=oe.mute?1:0,this.processCallback(oe),this.sendCmd("muteTeamAll",oe)},V.sendTeamMsgReceipt=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"sendTeamMsgReceipt",done:oe.done}),z.verifyOptions(oe,"teamMsgReceipts","team::sendTeamMsgReceipt"),oe.teamMsgReceipts.length>50?this.logger.error("team::sendTeamMsgReceiptteamMsgReceipts length over 50"):(this.processCallback(oe),this.sendCmd("sendTeamMsgReceipt",oe))},V.getTeamMsgReads=function(oe){(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamMsgReads",done:oe.done}),z.verifyOptions(oe,"teamMsgReceipts","team::getTeamMsgReads"),this.processCallback(oe),this.sendCmd("getTeamMsgReads",oe)},V.getTeamMsgReadAccounts=function(oe){var ae=this;(oe=oe||{}).done=le({instance:this,className:"NIMFn",funcName:"getTeamMsgReadAccounts",done:oe.done});var Ue,de=this;z.verifyOptions(oe,"teamMsgReceipt","team::getTeamMsgReadAccounts"),oe.callback=function(_e,Ve,$e){_e&&Ue?(Ve=Ve||{teamMsgReceipt:oe.teamMsgReceipt},oe.done(_e,Ve,{teamMsgReceipt:oe.teamMsgReceipt,unreadAccounts:Ue.unreadAccounts,readAccounts:Ue.readAccounts})):oe.done(_e,Ve,$e)},this.db.enable&&oe.teamMsgReceipt.idClient?this.db.getMsgReadDetail(oe.teamMsgReceipt.idClient).then(function(_e){if(Ue=_e,!_e)return $.reject("no record");if(_e.unreadAccounts&&_e.unreadAccounts.length>0)return $.reject("unreadAccounts.length > 0");var Ve={teamMsgReceipt:oe.teamMsgReceipt,unreadAccounts:_e.unreadAccounts,readAccounts:_e.readAccounts};de.logger.info("getTeamMsgReadAccounts from db"),oe.done(null,{teamMsgReceipt:oe.teamMsgReceipt},Ve)}).catch(function(_e){ae.logger.warn("db.getMsgReadDetail invalid",_e),de.sendCmd("getTeamMsgReadAccounts",oe)}):de.sendCmd("getTeamMsgReadAccounts",oe)},V.addTeamMembersFollow=function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},oe),oe.done=le({instance:this,className:"NIMFn",funcName:"addTeamMembersFollow",done:oe.done}),this.processCallback(oe),this.sendCmd("updateInfoInTeam",{teamMember:{teamId:oe.teamId},teamSpecialFollowUpdateTag:{accountIds:L(oe.accountIds),type:1},single:!0},oe.callback)},V.removeTeamMembersFollow=function(oe){z.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},oe),oe.done=le({instance:this,className:"NIMFn",funcName:"removeTeamMembersFollow",done:oe.done}),this.processCallback(oe),this.sendCmd("updateInfoInTeam",{teamMember:{teamId:oe.teamId},teamSpecialFollowUpdateTag:{accountIds:L(oe.accountIds),type:0},single:!0},oe.callback)}},function(t,r,e){var n=e(759),g=e(3),y=e(10),i=e(26),k=e(15),$=e(9),L=e(2),V=e(6),z=e(8),re=e(40).fn,ie=e(0),ue=ie.undef,le=e(308),oe=e(203),ae=e(25).reportAPI;function Ue(de){var _e=this.db;if(!_e.enable)return g.resolve({valid:!1});var Ve=_e.getSuperTeam(de),$e=_e.getSuperTeamMembersTimetag(de);return g.all([Ve,$e]).then(function(Lt){var jt=n(Lt,2),Et=jt[0],ir=jt[1],ur=Et&&Et.memberUpdateTime,Dt={timetag:ir=ir||0};return ur&&ir>=ur&&(Dt.valid=!0),g.resolve(Dt)}).catch(function(){return g.resolve({timetag:0})})}re.addSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamMembers",done:de.done}),ie.verifyOptions(de,"teamId accounts","superTeam::addSuperTeamMembers"),ie.verifyParamType("accounts",de.accounts,"array","superTeam::addSuperTeamMembers");var _e=ie.deduplicate(de.accounts);this.processPs(de),this.processCallback(de);var Ve={teamId:de.teamId,accounts:_e,ps:de.ps};this.sendCmd("addSuperTeamMembers",Ve,de.callback)},re.removeSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembers",done:de.done}),ie.verifyOptions(de,"teamId accounts","team::removeSuperTeamMembers"),ie.verifyParamType("accounts",de.accounts,"array","team::removeSuperTeamMembers");var _e=ie.deduplicate(de.accounts);this.processCallback(de);var Ve={teamId:de.teamId,accounts:_e};this.sendCmd("removeSuperTeamMembers",Ve,de.callback)},re.leaveSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"leaveSuperTeam",done:de.done}),ie.verifyOptions(de,"teamId","superTeam::leaveSuperTeam"),this.processCallback(de);var _e={teamId:de.teamId};this.sendCmd("leaveSuperTeam",_e,de.callback)},re.getSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeam",done:de.done});var _e,Ve=this,$e=Ve.db;function Lt(){Ve.sendCmd("getSuperTeam",{teamId:de.teamId},de.callback)}ie.verifyOptions(de,"teamId","team::getSuperTeam"),Ve.processCallback(de),de.cbaop=function(jt){jt||Ve.logger.info("api::getSuperTeam: cbaop ".concat(_e))},_e=de.teamId,$e.enable&&!de.sync?$e.getSuperTeam(_e).then(function(jt){jt&&jt.validToCurrentUser?(Ve.logger.log("api::getSuperTeam: db.getSuperTeam ".concat(_e)),de.done(null,jt)):Lt()}).catch(function(){Lt()}):Lt()},re.getSuperTeams=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeams",done:de.done});var _e=this,Ve=_e.db,$e=0;function Lt(){_e.sendCmd("getSuperTeams",{timetag:$e,NOTSTORE:"timetag"},de.callback)}ie.verifyOptions(de),_e.processCallback(de),Ve.enable?Ve.getSuperTeamsTimetag().then(function(jt){$e=jt,Lt()},Lt):Lt()},re.updateSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeam",done:de.done}),ie.verifyOptions(de,"teamId","superTeam::updateSuperTeam"),de.action="update",this.processCallback(de),de.team=new le(de),this.sendCmd("updateSuperTeam",{team:de.team,antispamTag:{antiSpamBusinessId:de.antiSpamBusinessId},single:!0},de.callback)},re.updateInfoInSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateInfoInSuperTeam",done:de.done}),ie.verifyOptions(de,"teamId","superTeam::updateInfoInSuperTeam"),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:new oe(de),single:!0},de.callback)},re.getSuperTeamMembersByJoinTime=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByJoinTime",done:de.done});var _e=this,Ve=de,$e=Ve.joinTime,Lt=y(Ve),jt=Ve.limit,Et=Ve.teamId;Lt=!!Lt,ue($e)&&($e=0),ue(jt)&&(jt=100),ie.verifyOptions(de,"teamId","superTeam::getSuperTeamMembersByJoinTime"),ie.verifyParamType("joinTime",$e,"number","api::superTeam::getSuperTeamMembersByJoinTime"),ie.verifyParamType("limit",jt,"number","api::superTeam::getSuperTeamMembersByJoinTime"),_e.processCallback(de),_e.sendCmd("getSuperTeamMembersByJoinTime",{teamId:Et,limit:jt,joinTime:$e,reverse:Lt,timetag:0,NOTSTORE:"timetag"},de.callback)},re.getAllSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getAllSuperTeamMembers",done:de.done});var _e=this,Ve=this.db;function $e(Lt){Lt=Lt||0,_e.sendCmd("getSuperTeamMembers",{teamId:de.teamId,timetag:Lt,NOTSTORE:"timetag"},de.callback)}ie.verifyOptions(de,"teamId","superTeam::getAllSuperTeamMembers"),_e.processCallback(de),i(Ue).call(Ue,this)(de.teamId).then(function(Lt){var jt=Lt.valid,Et=Lt.timetag;jt?(_e.logger.info("getAllSuperTeamMembers from local db"),Ve.getSuperTeamMembers(de.teamId).then(function(ir){var ur={teamId:de.teamId,members:ir};de.done(null,ur)},function(){return $e()})):$e(Et)})},re.applySuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"applySuperTeam",done:de.done}),ie.verifyOptions(de,"teamId","team::applySuperTeam"),ie.verifyOptions(de,"teamId","team::applySuperTeam"),this.processPs(de),this.processCallback(de);var _e={teamId:de.teamId,ps:de.ps};this.sendCmd("applySuperTeam",_e,de.callback)},re.passSuperTeamApply=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"passSuperTeamApply",done:de.done}),ie.verifyOptions(de,"idServer teamId from","team::passSuperTeamApply"),this.processCallback(de);var _e={idServer:de.idServer,teamId:de.teamId,from:de.from};this.sendCmd("passSuperTeamApply",_e,de.callback)},re.rejectSuperTeamApply=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"rejectSuperTeamApply",done:de.done}),ie.verifyOptions(de,"idServer teamId from","team::rejectSuperTeamApply"),this.processPs(de),this.processCallback(de);var _e={idServer:de.idServer,teamId:de.teamId,from:de.from,ps:de.ps};this.sendCmd("rejectSuperTeamApply",_e,de.callback)},re.acceptSuperTeamInvite=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"acceptSuperTeamInvite",done:de.done}),ie.verifyOptions(de,"idServer teamId from","team::acceptSuperTeamInvite"),this.processCallback(de);var _e={idServer:de.idServer,teamId:de.teamId,from:de.from};this.sendCmd("acceptSuperTeamInvite",_e,de.callback)},re.rejectSuperTeamInvite=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"rejectSuperTeamInvite",done:de.done}),ie.verifyOptions(de,"idServer teamId from","team::rejectSuperTeamInvite"),this.processPs(de),this.processCallback(de);var _e={idServer:de.idServer,teamId:de.teamId,from:de.from,ps:de.ps};this.sendCmd("rejectSuperTeamInvite",_e,de.callback)},re.addSuperTeamManagers=function(de){var _e;(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamManagers",done:de.done}),ie.verifyOptions(de,"teamId accounts","team::addSuperTeamManagers"),ie.verifyParamType("accounts",de.accounts,"array","team::addSuperTeamManagers"),this.processCallback(de);var Ve={teamId:de.teamId,accounts:k(_e=de.accounts).call(_e,0)};this.sendCmd("addSuperTeamManagers",Ve,de.callback)},re.removeSuperTeamManagers=function(de){var _e;(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamManagers",done:de.done}),ie.verifyOptions(de,"teamId accounts","team::removeSuperTeamManagers"),ie.verifyParamType("accounts",de.accounts,"array","team::removeSuperTeamManagers"),this.processCallback(de);var Ve={teamId:de.teamId,accounts:k(_e=de.accounts).call(_e,0)};this.sendCmd("removeSuperTeamManagers",Ve,de.callback)},re.updateSuperTeamMembersMute=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeamMembersMute",done:de.done}),ie.verifyOptions(de,"teamId accounts mute","team::updateSuperTeamMembersMute"),ie.verifyParamType("accounts",de.accounts,"array","team::updateSuperTeamMembersMute"),ie.verifyArrayMax("accounts",de.accounts,10),this.processCallback(de),de.mute=de.mute?1:0,this.sendCmd("updateSuperTeamMembersMute",de)},re.updateSuperTeamMute=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeamMute",done:de.done}),ie.verifyOptions(de,"teamId mute","team::updateSuperTeamMute"),de.mute=de.mute?1:0,this.processCallback(de),this.sendCmd("updateSuperTeamMute",de)},re.updateNickInSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateNickInSuperTeam",done:de.done}),ie.verifyOptions(de,"teamId account","team::updateNickInSuperTeam"),this.processCallback(de),this.sendCmd("updateNickInSuperTeam",{superTeamMember:new oe(de),single:!0},de.callback)},re.transferSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"transferSuperTeam",done:de.done}),ie.verifyOptions(de,"teamId account leave","team::transferSuperTeam"),ie.verifyParamType("leave",de.leave,"boolean","team::transferSuperTeam"),this.processCallback(de);var _e={teamId:de.teamId,account:de.account,leave:de.leave};this.sendCmd("transferSuperTeam",_e,de.callback)},re.getSuperTeamMembersByAccounts=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByAccounts",done:de.done});var _e=this,Ve=this.db,$e=de,Lt=$e.teamId,jt=$e.accounts;if(ie.verifyOptions(de,"teamId accounts","superTeam::getSuperTeamMembersByAccounts"),ie.verifyParamType("accounts",jt,"array","superTeam::getSuperTeamMembersByAccounts"),ie.verifyArrayMax("accounts",jt,20),jt.length<=0)return ie.onParamError("accounts","superTeam::getSuperTeamMembersByAccounts");function Et(){var ir=$(jt).call(jt,function(ur){return Lt+"|"+ur});_e.processCallback(de),_e.sendCmd("getSuperTeamMembersByAccounts",{memberIds:ir},function(ur,Dt){de.done(null,{accounts:jt,members:Dt.members,invaldAccounts:Dt.invalid})})}Ue.call(this,Lt).then(function(ir){var ur,Dt,lr;return ir.valid?(ur=[],Dt=[],lr=[],L(jt).call(jt,function(sr){var er,cr=Ve.getSuperTeamMemberById(V(er="".concat(Lt,"-")).call(er,sr)).then(function(or){Dt.push(or)}).catch(function(){lr.push(sr)});ur.push(cr)}),void g.all(ur).then(function(){de.done(null,{accounts:jt,members:Dt,invaldAccounts:lr})})):Et()}).catch(function(){return Et()})},re.getMutedSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getMutedSuperTeamMembers",done:de.done});var _e=this,Ve=de,$e=Ve.joinTime,Lt=y(Ve),jt=Ve.limit,Et=Ve.teamId;Lt=!!Lt,ue($e)&&($e=0),ue(jt)&&(jt=100),ie.verifyOptions(de,"teamId","superTeam::getSuperTeamMembersByJoinTime"),ie.verifyParamType("joinTime",$e,"number","api::superTeam::getSuperTeamMembersByJoinTime"),ie.verifyParamType("limit",jt,"number","api::superTeam::getSuperTeamMembersByJoinTime"),this.processCallback(de),_e.sendCmd("getMutedSuperTeamMembers",{teamId:Et,limit:jt,joinTime:$e,reverse:Lt},de.callback)},re.addSuperTeamMembersFollow=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ie.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},de),de.done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamMembersFollow",done:de.done}),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:{teamId:de.teamId},teamSpecialFollowUpdateTag:{accountIds:z(de.accountIds),type:1},single:!0},de.callback)},re.removeSuperTeamMembersFollow=function(de){ie.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},de),de.done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembersFollow",done:de.done}),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:{teamId:de.teamId},teamSpecialFollowUpdateTag:{accountIds:z(de.accountIds),type:0},single:!0},de.callback)},re.getMySuperTeamMembers=function(de){ae({instance:this,className:"NIMFn",funcName:"getMySuperTeamMembers",done:de.done,hasCallback:!1}),this.processCallback(de),ie.verifyOptions(de,"teamIds","team::getMySuperTeamMembers"),this.sendCmd("getMySuperTeamMembers",de)}},function(t,r,e){var n=e(57),g=e(9),y=e(3),i=e(2),k=e(6),$=e(10),L=e(754),V=e(37),z=e(15),re=e(90),ie=e(32),ue=e(16),le=e(7),oe=e(88),ae=e(89),Ue=e(72),de=e(58);function _e(er,cr){var or=ae!==void 0&&Ue(er)||er["@@iterator"];if(!or){if(ie(er)||(or=function(Mr,rr){var kr;if(Mr){if(typeof Mr=="string")return Ve(Mr,rr);var Er=z(kr=Object.prototype.toString.call(Mr)).call(kr,8,-1);if(Er==="Object"&&Mr.constructor&&(Er=Mr.constructor.name),Er==="Map"||Er==="Set")return oe(Mr);if(Er==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Er))return Ve(Mr,rr)}}(er))||cr&&er&&typeof er.length=="number"){or&&(er=or);var hr=0,pr=function(){};return{s:pr,n:function(){return hr>=er.length?{done:!0}:{done:!1,value:er[hr++]}},e:function(Mr){throw Mr},f:pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Tr,Pr=!0,_r=!1;return{s:function(){or=or.call(er)},n:function(){var Mr=or.next();return Pr=Mr.done,Mr},e:function(Mr){_r=!0,Tr=Mr},f:function(){try{Pr||or.return==null||or.return()}finally{if(_r)throw Tr}}}}function Ve(er,cr){(cr==null||cr>er.length)&&(cr=er.length);for(var or=0,hr=new Array(cr);or<cr;or++)hr[or]=er[or];return hr}var $e=e(40).fn,Lt=e(0),jt=Lt.undef,Et=Lt.notundef,ir=e(297),ur=e(154),Dt=e(25).reportAPI,lr=e(854);function sr(er,cr){var or=this,hr=[],pr=[],Tr=this.db,Pr=this;return Tr.enable?(i(er).call(er,function(Mr){var rr=or.protocol.getSessionInCache(Mr);rr?_r(rr,Mr):pr.push(Tr.getSession(Mr).then(function(kr){return _r(kr,Mr)}))}),y.all(pr).then(function(){return hr})):(i(er).call(er,function(Mr){return _r(or.protocol.getSessionInCache(Mr),Mr)}),y.resolve(hr));function _r(Mr,rr){var kr,Er,xr,vr;Mr?Mr.lastMsg?Mr.scene&&Mr.to?Mr.ack>=Mr.lastMsg.time?Pr.logger.warn(k(kr="".concat(cr," not need ack ")).call(kr,Mr.id)):hr.push(Mr):Pr.logger.warn(k(Er="".concat(cr," session.scene|to undefined ")).call(Er,Mr.id)):Pr.logger.warn(k(xr="".concat(cr," session.lastMsg undefined ")).call(xr,Mr.id)):Pr.logger.warn(k(vr="".concat(cr," session undefined ")).call(vr,rr))}}$e.setCurrSession=function(er){Dt({instance:this,className:"NIMFn",funcName:"setCurrSession",hasCallback:!1}),this.resetSessionUnread(er),this.protocol.setCurrSession(er)},$e.resetAllSessionUnread=function(){Dt({instance:this,className:"NIMFn",funcName:"resetAllSessionUnread",hasCallback:!1});for(var er in this.protocol.sessionSet)this.protocol.sessionSet[er].unread>0&&this.resetSessionUnread(er)},$e.resetSessionsUnread=function(){var er=de(n.mark(function cr(or){var hr,pr,Tr,Pr,_r,Mr,rr,kr,Er=arguments;return n.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return hr=Er.length>1&&Er[1]!==void 0?Er[1]:function(){},hr=Dt({instance:this,className:"NIMFn",funcName:"resetSessionsUnread",done:hr}),(pr=this).logger.info("resetSessionsUnread::",or),xr.next=6,sr.call(this,or,"api::resetSessionsUnread");case 6:if(Tr=xr.sent,pr.protocol.resetSessionsUnread(Tr),pr.options.syncSessionUnread&&Tr.length!==0){xr.next=11;break}return hr(),xr.abrupt("return");case 11:Pr=g(Tr).call(Tr,function(vr){return{scene:vr.scene==="p2p"?0:1,to:vr.to,timetag:vr.lastMsg.time}}),_r=lr(Pr,50),Mr=_e(_r),xr.prev=14,kr=n.mark(function vr(){var Ir;return n.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Ir=rr.value,Or.next=3,new y(function(Cr,yr){pr.sendCmd("markSessionAckBatch",{sessionAckTags:Ir},function(fr){fr?(hr(fr),yr(fr)):Cr()})});case 3:case"end":return Or.stop()}},vr)}),Mr.s();case 17:if((rr=Mr.n()).done){xr.next=21;break}return xr.delegateYield(kr(),"t0",19);case 19:xr.next=17;break;case 21:xr.next=26;break;case 23:xr.prev=23,xr.t1=xr.catch(14),Mr.e(xr.t1);case 26:return xr.prev=26,Mr.f(),xr.finish(26);case 29:hr(null);case 30:case"end":return xr.stop()}},cr,this,[[14,23,26,29]])}));return function(cr){return er.apply(this,arguments)}}(),$e.resetSuperTeamSessionsUnread=function(){var er=de(n.mark(function cr(or){var hr,pr,Tr,Pr,_r,Mr,rr,kr,Er=arguments;return n.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return hr=Er.length>1&&Er[1]!==void 0?Er[1]:function(){},hr=Dt({instance:this,className:"NIMFn",funcName:"resetSuperTeamSessionsUnread",done:hr}),(pr=this).logger.info("resetSuperTeamSessionsUnread::",or),xr.next=6,sr.call(this,or,"api::resetSuperTeamSessionsUnread");case 6:if(Tr=xr.sent,pr.protocol.resetSessionsUnread(Tr),pr.options.syncSessionUnread&&Tr.length!==0){xr.next=11;break}return hr(),xr.abrupt("return");case 11:Pr=g(Tr).call(Tr,function(vr){return{to:vr.to,timetag:vr.lastMsg.time}}),_r=lr(Pr,50),Mr=_e(_r),xr.prev=14,kr=n.mark(function vr(){var Ir;return n.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Ir=rr.value,Or.next=3,new y(function(Cr,yr){pr.sendCmd("markSuperTeamSessionsAck",{sessionAckTags:Ir},function(fr){fr?(hr(fr),yr(fr)):Cr()})});case 3:case"end":return Or.stop()}},vr)}),Mr.s();case 17:if((rr=Mr.n()).done){xr.next=21;break}return xr.delegateYield(kr(),"t0",19);case 19:xr.next=17;break;case 21:xr.next=26;break;case 23:xr.prev=23,xr.t1=xr.catch(14),Mr.e(xr.t1);case 26:return xr.prev=26,Mr.f(),xr.finish(26);case 29:hr(null);case 30:case"end":return xr.stop()}},cr,this,[[14,23,26,29]])}));return function(cr){return er.apply(this,arguments)}}(),$e.resetSessionUnread=function(er){var cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};cr=Dt({instance:this,className:"NIMFn",funcName:"resetSessionUnread",done:cr});var or=this,hr=or.options.resetUnreadMode!==!1,pr=function(){var Mr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;Mr?cr(Mr,er):cr(null)};or.logger.info("resetSessionUnread::use reset mode",hr);var Tr=or.protocol.getSessionInCache(er),Pr=!Tr&&this.db.enable?or.db.getSession(er):y.resolve(Tr);function _r(Mr){if(!Mr.lastMsg&&!Mr.updateTime)return or.logger.warn("api::resetSessionUnread: session.lastMsg undefined ".concat(er)),pr();if(!Mr.scene||!Mr.to)return or.logger.warn("api::resetSessionUnread: session.scene|to undefined ".concat(er)),pr();var rr;if(rr=Mr.lastMsg?Mr.lastMsg.time:Mr.updateTime,Mr&&Mr.ack&&Mr.ack>=rr)return or.logger.warn("api::resetSessionUnread: session ack not needs ".concat(er)),pr();var kr={done:function(xr){xr?(or.logger.error({message:xr||"mark ack failed",callFunc:"resetSessionUnread"}),pr(xr||"mark ack failed")):(hr||or.protocol.resetSessionUnread(Mr),pr())}};if(or.processCallback(kr),Mr.scene==="superTeam")or.sendCmd("markSuperTeamSessionAck",{to:Mr.to,timetag:rr},kr.callback);else{var Er={scene:Mr.scene==="p2p"?0:1,to:Mr.to,timetag:rr};or.sendCmd("markSessionAck",Er,kr.callback)}}Pr.then(function(Mr){return Mr?or.options.syncSessionUnread?(hr&&or.protocol.resetSessionUnread(Mr),void _r(Mr)):(or.protocol.resetSessionUnread(Mr),pr()):(or.logger.warn("api::resetSessionUnread: session undefined ".concat(er)),pr())})},$e.resetCurrSession=function(){Dt({instance:this,className:"NIMFn",funcName:"resetCurrSession",hasCallback:!1}),this.protocol.setCurrSession("")},$e.insertLocalSession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"insertLocalSession",done:er.done});var cr,or;function hr(){er.session=or,er.done(cr,er)}Lt.verifyOptions(er,"scene to","scene::insertLocalSession"),Lt.verifyParamValid("scene",er.scene,this.message.validScenes,"scene::insertLocalSession"),this.protocol.insertLocalSession(er).then(function(pr){or=pr,hr()},function(pr){cr=pr,hr()})},$e.getLocalSessions=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"getLocalSessions",done:er.done});var cr=[];Lt.verifyOptions(er),jt(er.limit)&&(er.limit=100),Lt.verifyParamType("limit",er.limit,"number","scene::getLocalSessions"),Et($(er))?Lt.verifyParamType("reverse",$(er),"boolean","scene::getLocalSessions"):er.reverse=!1,this.processCallback(er);var or=L(this.protocol.sessionSet),hr=0,pr=er.lastSessionId;if($(er)){var Tr,Pr=_e(or);try{for(Pr.s();!(Tr=Pr.n()).done;){var _r=Tr.value,Mr=_r.id;if(pr)Mr===pr&&(pr=void 0);else if(_r.lastMsg!==void 0&&!_r.isDeleted){if(++hr>er.limit)break;cr.push(V({},_r))}}}catch(vr){Pr.e(vr)}finally{Pr.f()}}else{var rr,kr,Er=_e(or);try{for(Er.s();!(kr=Er.n()).done;){var xr=kr.value;if(pr===xr.id)break;xr.lastMsg===void 0||xr.isDeleted||cr.push(xr)}}catch(vr){Er.e(vr)}finally{Er.f()}cr=$(rr=z(cr).call(cr,-er.limit)).call(rr)}this.logger.debug("getLocalSessions::sessions is",cr),cr=g(cr).call(cr,function(vr){return re(ur).call(ur,vr)}),er.sessions=cr,delete er.callback,er.done(void 0,er)},$e.getLocalSession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"getLocalSession",done:er.done});var cr=this,or=cr.db,hr=null;if(Lt.verifyOptions(er,"sessionId","scene::getLocalSession"),Lt.verifyParamType("sessionId",er.sessionId,"string","scene::getLocalSession"),hr=cr.protocol.getSessionInCache(er.sessionId),cr.logger.debug("getLocalSession::cache session is",hr),!hr&&or.enable)return cr.processCallback(er),void or.getSession(er.sessionId).then(function(pr){pr&&(hr=pr,cr.logger.debug("getLocalSession::db session is",hr)),er.done(null,hr)}).catch(function(pr){er.done(pr)});er.done(null,re(ur).call(ur,hr))},$e.getLocalSessionsByMsgType=function(er){var cr;(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"getLocalSessionsByMsgType",done:er.done});var or=this.db,hr=er.exclude,pr=[],Tr=z(cr=ir.validTypes).call(cr,0);if(Et(hr)){if(typeof hr=="string")hr=[hr];else if(!ie(hr))return void Lt.onParamInvalidType("exclude",["string","string array"],"","exclude::getLocalSessionsByMsgType");hr=ue(hr).call(hr,function(Pr){return le(Tr).call(Tr,Pr)>-1}),Tr=ue(Tr).call(Tr,function(Pr){return le(hr).call(hr,Pr)===-1})}this.processCallback(er),or.enable?or.getSessions().then(function(Pr){hr&&hr.length!==0?Tr&&Tr.length!==0?(i(Pr).call(Pr,function(_r,Mr){var rr,kr,Er;_r.lastMsg&&le(hr).call(hr,_r.lastMsg.type)>-1&&(rr=Mr,kr=_r.id,Er=or.getMsgs({sessionId:kr,limit:1,types:Tr}).then(function(xr){return xr&&xr[0]?Pr[rr].lastMsg=xr[0]:Pr[rr].lastMsg=null,y.resolve()}),pr.push(Er))}),y.all(pr).then(function(){er.done(null,{exclude:hr,sessions:Pr})})):er.done(null,{exclude:hr,sessions:g(Pr).call(Pr,function(_r){_r.lastMsg=null})}):er.done(null,{exclude:hr,sessions:Pr})}):er.done(null,{exclude:hr,sessions:[]})},$e.updateLocalSession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"updateLocalSession",done:er.done});var cr,or=this,hr=or.db;Lt.verifyOptions(er,"id","scene::updateLocalSession"),or.processCallback(er);var pr=Lt.filterObj(er,"id localCustom");function Tr(){er.needNotify!==!1&&or.protocol.onUpdateSession(pr),er.session=pr,er.done(cr,er)}pr=or.protocol.updateSessionInCache(er),hr.enable&&pr?hr.updateSession(pr).then(function(Pr){pr=Pr,Tr()},function(Pr){cr=Pr,Tr()}):Tr()},$e.deleteLocalSession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"deleteLocalSession",done:er.done});var cr,or=this,hr=or.db;Lt.verifyOptions(er,"id","session::deleteLocalSession"),or.processCallback(er);var pr=or.protocol.getSessionInCache(er.id);if(or.protocol.deleteSessionInCache(er.id,er.isLogic),hr.enable?(er.isLogic?hr.deleteSessionLogic(er.id):hr.deleteSession(er.id,pr)).then(function(){or.logger.info("sessions::deleteSessionInDb::delete session done",er.id),Pr()},function(_r){cr=_r,Pr()}):Pr(),er.isDeleteRoaming){var Tr=typeof er.id=="string"?[er.id]:er.id;Tr=g(Tr).call(Tr,function(_r){return _r.replace("-","|")}),this.sendCmd("deleteSessions",{sessions:Tr},function(){})}function Pr(){er.done(cr,er)}},$e.deleteSession=function(er,cr){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"deleteSession",done:er.done}),cr||this.logger.warn('this api will be abandon,please use "deleteLocalSession"'),Lt.verifyOptions(er,"scene to","session::deleteSession"),this.processCallback(er),er.sessions=[{scene:er.scene,to:er.to}],this.deleteSessions(er)},$e.deleteRoamingMsgBySession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"deleteRoamingMsgBySession",done:er.done}),this.deleteSession(er,!0)},$e.deleteSessions=function(er){var cr,or;(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"deleteSessions",done:er.done}),Lt.verifyOptions(er,"sessions","session::deleteSessions"),Lt.verifyParamType("sessions",er.sessions,"array","session::deleteSessions"),i(cr=er.sessions).call(cr,function(hr,pr){Lt.verifyOptions(hr,"scene to",!0,"sessions["+pr+"].","session::deleteSessions")}),this.processCallback(er),this.sendCmd("deleteSessions",{sessions:g(or=er.sessions).call(or,function(hr){return hr.scene+"|"+hr.to})},er.callback)},$e.getServerSessions=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"getServerSessions",done:er.done}),Et(er.minTimestamp)&&Lt.verifyParamType("minTimestamp",er.minTimestamp,"number","session::deleteSessions"),Et(er.maxTimestamp)&&Lt.verifyParamType("maxTimestamp",er.maxTimestamp,"number","session::deleteSessions"),Et(er.needLastMsg)&&(er.needLastMsg=er.needLastMsg===!1?0:1),Et(er.limit)&&(Lt.verifyParamType("limit",er.limit,"number","session::deleteSessions"),Lt.verifyParamMax("limit",er.limit,100,"scene::getLocalSessions")),this.processCallback(er),this.sendCmd("getServerSessions",{sessionReqTag:er},er.callback)},$e.getServerSession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"getServerSession",done:er.done}),Lt.verifyOptions(er,"scene to","scene::getServerSession"),Lt.verifyParamValid("scene",er.scene,this.message.validScenes,"scene::getServerSession"),Lt.verifyParamType("to",er.to,"string","to::getServerSession");var cr=er.scene+"|"+er.to;er.scene==="superTeam"&&(cr="super_team|"+er.to),this.processCallback(er),this.sendCmd("getServerSession",{session:{id:cr}},er.callback)},$e.updateServerSession=function(er){(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"updateServerSession",done:er.done}),Lt.verifyOptions(er,"scene to","scene::updateServerSession"),Lt.verifyParamValid("scene",er.scene,this.message.validScenes,"scene::updateServerSession"),Lt.verifyParamType("to",er.to,"string","to::updateServerSession"),Et(er.extra)&&Lt.verifyParamType("extra",er.extra,"string","extra::updateServerSession");var cr=er.scene+"|"+er.to;er.scene==="superTeam"&&(cr="super_team|"+er.to),this.processCallback(er),this.sendCmd("updateServerSession",{session:{id:cr,ext:er.extra||""}},er.callback)},$e.deleteServerSessions=function(er){var cr,or=this;(er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"deleteServerSessions",done:er.done}),Lt.verifyOptions(er,"sessions","scene::deleteServerSessions"),Lt.verifyParamType("sessions",er.sessions,"array","sessions::deleteServerSessions");var hr=[];i(cr=er.sessions).call(cr,function(pr){Lt.verifyParamValid("scene",pr.scene,or.message.validScenes,"scene::deleteServerSessions"),Lt.verifyParamType("to",pr.to,"string","to::deleteServerSessions");var Tr=pr.scene+"|"+pr.to;pr.scene==="superTeam"&&(Tr="super_team|"+pr.to),hr.push({id:Tr})}),this.processCallback(er),this.sendCmd("deleteServerSessions",{sessions:hr},er.callback)},$e.updateSessionsWithMoreRoaming=function(er){var cr;if((er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"updateSessionsWithMoreRoaming",done:er.done}),Lt.verifyOptions(er,"msg","session::updateSessionsWithMoreRoaming"),Lt.verifyCallback(er,"done","session::updateSessionsWithMoreRoaming"),!this.db.enable)return er.done(null,"db is disable");var or={time:er.msg.time,idServer:er.msg.idServer,to:er.msg.to,from:er.msg.from};Lt.verifyParamType("msg.time",er.msg.time,"number","time::updateSessionsWithMoreRoaming"),Lt.verifyParamType("msg.idServer",er.msg.idServer,"string","idServer::updateSessionsWithMoreRoaming"),Lt.verifyParamType("msg.from",er.msg.from,"string","from::updateSessionsWithMoreRoaming"),Lt.verifyParamType("msg.to",er.msg.to,"string","to::updateSessionsWithMoreRoaming"),Lt.verifyParamValid("scene",er.msg.scene,this.message.validScenes,"scene::updateSessionsWithMoreRoaming");var hr=or.to===this.account?or.from:or.to;or.id=k(cr="".concat(er.msg.scene,"-")).call(cr,hr),this.db.updateSessionsWithMoreRoaming(or).then(function(pr){er.done(null,pr)}).catch(function(pr){er.done(pr)})},$e.deleteSessionsWithMoreRoaming=function(er){if((er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"deleteSessionsWithMoreRoaming",done:er.done}),Lt.verifyOptions(er,"id","session::deleteSessionsWithMoreRoaming"),Lt.verifyCallback(er,"done","session::deleteSessionsWithMoreRoaming"),!this.db.enable)return er.done(null,"db is disable");this.db.deleteSessionsWithMoreRoaming(er.id).then(function(cr){er.done(null,cr)}).catch(function(cr){er.done(cr)})},$e.getSessionsWithMoreRoaming=function(er){if((er=er||{}).done=Dt({instance:this,className:"NIMFn",funcName:"getSessionsWithMoreRoaming",done:er.done}),Lt.verifyCallback(er,"done","session::getSessionsWithMoreRoaming"),!this.db.enable)return er.done(null,"db is disable");this.db.getSessionsWithMoreRoaming(er.id).then(function(cr){er.done(null,cr)}).catch(function(cr){er.done(cr)})}},function(t,r,e){var n=e(855),g=e(856),y=e(857),i=Math.ceil,k=Math.max;t.exports=function($,L,V){L=(V?g($,L,V):L===void 0)?1:k(y(L),0);var z=$==null?0:$.length;if(!z||L<1)return[];for(var re=0,ie=0,ue=Array(i(z/L));re<z;)ue[ie++]=n($,re,re+=L);return ue}},function(t,r){t.exports=function(e,n,g){var y=-1,i=e.length;n<0&&(n=-n>i?0:i+n),(g=g>i?i:g)<0&&(g+=i),i=n>g?0:g-n>>>0,n>>>=0;for(var k=Array(i);++y<i;)k[y]=e[y+n];return k}},function(t,r,e){var n=e(201),g=e(202),y=e(302),i=e(91);t.exports=function(k,$,L){if(!i(L))return!1;var V=typeof $;return!!(V=="number"?g(L)&&y($,L.length):V=="string"&&$ in L)&&n(L[$],k)}},function(t,r,e){var n=e(858);t.exports=function(g){var y=n(g),i=y%1;return y==y?i?y-i:y:0}},function(t,r,e){var n=e(859);t.exports=function(g){return g?(g=n(g))===1/0||g===-1/0?17976931348623157e292*(g<0?-1:1):g==g?g:0:g===0?g:0}},function(t,r,e){var n=e(860),g=e(91),y=e(862),i=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,$=/^0o[0-7]+$/i,L=parseInt;t.exports=function(V){if(typeof V=="number")return V;if(y(V))return NaN;if(g(V)){var z=typeof V.valueOf=="function"?V.valueOf():V;V=g(z)?z+"":z}if(typeof V!="string")return V===0?V:+V;V=n(V);var re=k.test(V);return re||$.test(V)?L(V.slice(2),re?2:8):i.test(V)?NaN:+V}},function(t,r,e){var n=e(861),g=/^\s+/;t.exports=function(y){return y&&y.slice(0,n(y)+1).replace(g,"")}},function(t,r){var e=/\s/;t.exports=function(n){for(var g=n.length;g--&&e.test(n.charAt(g)););return g}},function(t,r,e){var n=e(124),g=e(106);t.exports=function(y){return typeof y=="symbol"||g(y)&&n(y)=="[object Symbol]"}},function(t,r,e){var n=e(125),g=e(864),y=e(865),i=e(57),k=e(58),$=e(51),L=e(16),V=e(15),z=e(2),re=e(32),ie=e(121),ue=e(9),le=e(6),oe=e(10),ae=e(8),Ue=e(870),de=e(4),_e=e(52),Ve=e(53),$e=e(54),Lt=e(55),jt=e(43),Et=["callback","done"];function ir(rr,kr){var Er=de(rr);if(_e){var xr=_e(rr);kr&&(xr=L(xr).call(xr,function(vr){return Ve(rr,vr).enumerable})),Er.push.apply(Er,xr)}return Er}function ur(rr){for(var kr=1;kr<arguments.length;kr++){var Er,xr,vr=arguments[kr]!=null?arguments[kr]:{};kr%2?z(Er=ir(Object(vr),!0)).call(Er,function(Ir){$(rr,Ir,vr[Ir])}):$e?Lt(rr,$e(vr)):z(xr=ir(Object(vr))).call(xr,function(Ir){jt(rr,Ir,Ve(vr,Ir))})}return rr}var Dt=e(40).fn,lr=e(0),sr=lr.undef,er=lr.notundef,cr=e(45),or=e(154),hr=e(153),pr=e(41),Tr=e(76),Pr=e(25).reportAPI,_r=e(11);Dt.sendG2Msg=function(rr){return(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"sendG2Msg",done:rr.done}),this.processCallback(rr),rr.msg=new this.message.G2Message(rr),this.sendMsg(rr)},Dt.beforeSendMsg=function(rr){var kr,Er=this.protocol,xr=rr.msg;switch(xr.to===this.account&&(xr.fromDeviceId=cr.deviceId),xr.userUpdateTime=Er.myInfo&&Er.myInfo.updateTime,xr.getScene()){case"p2p":kr="sendMsg";break;case"team":kr="sendTeamMsg";break;case"superTeam":kr="sendSuperTeamMsg"}L(rr)&&(kr="sendFilterMsg",xr.filter=!0),rr.cmd=kr},Dt.afterSendMsg=function(rr){var kr=rr.rtnMsg;if(!kr||!kr.ignore){var Er=this.protocol.getSessionInCache(kr.sessionId);rr.isLocal&&Er&&Er.lastMsg&&kr.time<Er.lastMsg.time||this.protocol.onUpdateSession(or.genSessionByMsg(kr))}},Dt.beforeForwardMsg=function(rr){lr.verifyOptions(rr,"msg scene to","msg::beforeForwardMsg"),rr.msg.scene=rr.scene,rr.msg.to=rr.to},Dt.markMsgRead=function(rr){var kr=this.protocol;!rr||this.db.enable||kr.options.autoMarkRead?this.logger.warn("api::markMsgRead:  (, , )"):kr.markMsgRead(rr,!0)},Dt.sendMsgReceipt=function(rr){if((rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"sendMsgReceipt",done:rr.done}),lr.verifyOptions(rr),this.processCallback(rr),rr.msg){lr.verifyOptions(rr,"msg","msg::sendMsgReceipt");var kr=rr.msg;lr.verifyOptions(kr,"target idClient time",!0,"msg.","msg::sendMsgReceipt"),this.protocol.shouldSendMsgReceipt(kr)?this.sendCmd("sendMsgReceipt",{msgReceipt:{to:kr.target,idClient:kr.idClient,time:kr.time}},rr.callback):rr.done()}else rr.done()},Dt.isMsgRemoteRead=function(rr){return Pr({instance:this,className:"NIMFn",funcName:"isMsgRemoteRead",hasCallback:!1}),this.protocol.isMsgRemoteRead(rr)},Dt.recallMsg=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"recallMsg",done:rr.done}),this.deleteMsg(rr,!0)},Dt.deleteMsg=function(rr,kr){var Er;(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteMsg",done:rr.done}),kr||this.logger.warn("this api will be abandon,please use recallMsg"),lr.verifyOptions(rr,"msg","msg::deleteMsg");var xr=rr.msg;if(xr.scene!=="team"&&xr.from!==this.account||xr.status!=="success"||xr.isLocal)return rr.done(pr.newParamError(", ",{callFunc:"msg::deleteMsg"}),rr);lr.verifyOptions(xr,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsg"),lr.verifyParamValid("msg.scene",xr.scene,this.message.validScenes,"msg::deleteMsg"),this.processPs(rr),this.processCallback(rr);var vr={deletedIdClient:xr.idClient,deletedIdServer:xr.idServer,time:xr.time,from:xr.from,to:xr.to,opeAccount:xr.from},Ir=xr.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";vr.type="deleteMsg"+xr.scene[0].toUpperCase()+V(Er=xr.scene).call(Er,1);var Or=["ps","apnsText","pushPayload","env","opeAccount","attach"];z(Or).call(Or,function(Cr){rr[Cr]&&(vr[Cr]=rr[Cr])}),vr=new hr(vr),this.sendCmd(Ir,{sysMsg:vr,msg:xr},rr.callback)},Dt.deleteMsgSelf=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteMsgSelf",done:rr.done}),lr.verifyOptions(rr,"msg","msg::deleteMsgSelf");var kr=rr.msg;if(kr.scene==="superTeam")return rr.done(pr.newParamError("",{callFunc:"msg::deleteMsgSelf"}),rr);lr.verifyOptions(kr,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelf"),lr.verifyParamValid("msg.scene",kr.scene,this.message.validScenes,"msg::deleteMsgSelf"),this.processCallback(rr);var Er={scene:kr.scene==="p2p"?1:2,from:kr.from,to:kr.to,time:kr.time,idClient:kr.idClient,idServer:kr.idServer,custom:rr.custom,type:kr.type};this.sendCmd("deleteMsgSelf",{deleteMsgSelfTag:Er},rr.callback)},Dt.deleteMsgSelfBatch=function(rr){var kr,Er,xr,vr=this;if((rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteMsgSelfBatch",done:rr.done}),lr.verifyOptions(rr,"msgs","msg::deleteMsgSelfBatch"),(!re(rr.msgs)||rr.msgs.length===0||rr.msgs.length>100)&&lr.onParamError("msgs0100","msg::deleteMsgSelfBatch"),ie(kr=rr.msgs).call(kr,function(Or){return Or.scene==="superTeam"}))return rr.done(pr.newParamError("",{callFunc:"msg::deleteMsgSelfBatch"}),rr);z(Er=rr.msgs).call(Er,function(Or){lr.verifyOptions(Or,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelfBatch"),lr.verifyParamValid("msg.scene",Or.scene,vr.message.validScenes,"msg::deleteMsgSelfBatch")}),this.processCallback(rr);var Ir=ue(xr=rr.msgs).call(xr,function(Or){var Cr;return{scene:Or.scene==="p2p"?1:2,from:Or.from,to:Or.to,time:Or.time,idClient:Or.idClient,idServer:Or.idServer,sessionId:Or.sessionId||le(Cr="".concat(Or.scene,"-")).call(Cr,Or.to),custom:rr.custom,type:Or.type}});this.sendCmd("deleteMsgSelfBatch",{deleteMsgSelfTags:Ir},rr.callback)};var Mr={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};Dt.getHistoryMsgs=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"getHistoryMsgs",done:rr.done}),this.protocol.syncing&&this.logger.warn("Please call getHistoryMsgs after onsyncdone callback"),lr.verifyOptions(rr,"scene to","msg::getHistoryMsgs"),lr.verifyParamValid("scene",rr.scene,this.message.validScenes,"msg::getHistoryMsgs"),rr.beginTime===void 0&&(rr.beginTime=0);var kr,Er=this.protocol.getSessionInCache(rr.scene+"-"+rr.to),xr=Er&&Er.lastEmptyTime;if(xr>rr.beginTime&&(rr.beginTime=xr),lr.verifyParamType("beginTime",rr.beginTime,"number","msg::getHistoryMsgs"),rr.endTime===void 0&&(rr.endTime=0),lr.verifyParamType("endTime",rr.endTime,"number","msg::getHistoryMsgs"),rr.lastMsgId=rr.lastMsgId&&+rr.lastMsgId?rr.lastMsgId:"0",rr.limit===void 0&&(rr.limit=100),lr.verifyParamType("limit",rr.limit,"number","msg::getHistoryMsgs"),lr.verifyParamMax("limit",rr.limit,100,"msg::getHistoryMsgs"),er(oe(rr))?lr.verifyParamType("reverse",oe(rr),"boolean","msg::getHistoryMsgs"):rr.reverse=!1,er(rr.asc)?lr.verifyParamType("asc",rr.asc,"boolean","msg::getHistoryMsgs"):rr.asc=!1,sr(rr.msgTypes))rr.msgTypes=[];else if(re(rr.msgTypes)){var vr,Ir;rr.msgTypes=ue(vr=rr.msgTypes).call(vr,function(Cr){return Mr[Cr]}),rr.msgTypes=L(Ir=rr.msgTypes).call(Ir,function(Cr){return typeof Cr=="number"})}else typeof Mr[rr.msgTypes]=="number"?rr.msgTypes=[Mr[rr.msgTypes]]:rr.msgTypes=[];switch(this.processCallback(rr),rr.cbaop=function(Cr,yr){if(!Cr){var fr;rr.asc&&(yr.msgs=oe(fr=yr.msgs).call(fr)),yr.msgs=Tr.deduplication(yr.msgs)}},rr.scene){case"p2p":kr="getHistoryMsgs";break;case"team":kr="getTeamHistoryMsgs";break;case"superTeam":kr="getSuperTeamHistoryMsgs"}var Or={scene:rr.scene,to:rr.to,beginTime:rr.beginTime,endTime:rr.endTime,lastMsgId:rr.lastMsgId,limit:rr.limit,reverse:oe(rr),msgTypes:rr.msgTypes};this.sendCmd(kr,Or,rr.callback)},Dt.searchHistoryMsgs=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"searchHistoryMsgs",done:rr.done}),lr.verifyOptions(rr,"scene to keyword","msg::searchHistoryMsgs"),lr.verifyParamValid("scene",rr.scene,this.message.validScenes,"msg::searchHistoryMsgs"),rr.beginTime===void 0&&(rr.beginTime=0);var kr,Er=this.protocol.getSessionInCache(rr.scene+"-"+rr.to),xr=Er&&Er.lastEmptyTime;switch(xr>rr.beginTime&&(rr.beginTime=xr),lr.verifyParamType("beginTime",rr.beginTime,"number","msg::searchHistoryMsgs"),rr.endTime===void 0&&(rr.endTime=0),lr.verifyParamType("endTime",rr.endTime,"number","msg::searchHistoryMsgs"),rr.limit===void 0&&(rr.limit=100),lr.verifyParamType("limit",rr.limit,"number","msg::searchHistoryMsgs"),lr.verifyParamMax("limit",rr.limit,100,"msg::searchHistoryMsgs"),er(oe(rr))?lr.verifyParamType("reverse",oe(rr),"boolean","msg::searchHistoryMsgs"):rr.reverse=!1,er(rr.asc)?lr.verifyParamType("asc",rr.asc,"boolean","msg::searchHistoryMsgs"):rr.asc=!1,this.processCallback(rr),rr.asc&&(rr.cbaop=function(Ir,Or){var Cr;Ir||(Or.msgs=oe(Cr=Or.msgs).call(Cr))}),rr.scene){case"p2p":kr="searchHistoryMsgs";break;case"team":kr="searchTeamHistoryMsgs"}var vr=lr.filterObj(rr,"scene to beginTime endTime keyword limit reverse");this.sendCmd(kr,vr,rr.callback)},Dt.getLocalMsgs=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"getLocalMsgs",done:rr.done});var kr=this,Er=kr.db,xr=[];lr.verifyOptions(rr);var vr=!1;er(rr.start)&&(vr=!0,lr.verifyParamType("start",rr.start,"number","msg::getLocalMsgs"));var Ir=!1;if(er(rr.end)&&(Ir=!0,lr.verifyParamType("end",rr.end,"number","msg::getLocalMsgs")),vr&&Ir&&rr.end<=rr.start&&lr.onParamError(" end  start"),er(rr.subTypes)&&lr.verifyParamType("subTypes",rr.subTypes,"array","msg::getLocalMsgs"),sr(rr.limit)&&(rr.limit=100),lr.verifyParamType("limit",rr.limit,"number","msg::getLocalMsgs"),lr.verifyParamMin("limit",rr.limit,1,"msg::getLocalMsgs"),kr.processCallback(rr),Er.enable){var Or=new Date().getTime();Er.getMsgs(rr).then(function(yr){var fr;xr=yr,kr.logger.info(le(fr="api::getLocalMsgs: query db cost ".concat(new Date().getTime()-Or," ms and the conditions is ")).call(fr,ae(rr))),Cr()},function(yr){(yr=yr||{}).message=yr.message||"msg::getLocalMsgs:db error",Cr()})}else Cr();function Cr(){var yr=lr.simpleClone(rr);yr.msgs=xr,delete yr.callback,delete yr.done,rr.done(null,yr)}},Dt.getLocalMsgsInUnread=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"getLocalMsgsInUnread",done:rr.done});var kr=this;lr.validate({sessionId:{type:"string",allowEmpty:!1}},rr),this.getLocalSession({sessionId:rr.sessionId,done:function(Er,xr){Er?rr.done&&rr.done(Er):xr?(xr.ack=xr.ack||0,kr.getLocalMsgs(ur({sessionId:rr.sessionId,start:xr.ack,limit:Ue,filterFunc:function(vr){return vr.flow==="in"&&vr.isUnreadable===!0},done:function(){}},rr))):rr.done&&rr.done(new Error("session ".concat(rr.sessionId," not exist")))}})},Dt.getLocalMsgByIdClient=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"getLocalMsgByIdClient",done:rr.done});var kr=this.db,Er=null,xr=null;function vr(){rr.msg=xr,rr.done(Er,rr)}lr.verifyOptions(rr,"idClient","msg::getLocalMsgByIdClient"),this.processCallback(rr),kr.enable?kr.getMsgByIdClient(rr.idClient).then(function(Ir){Ir&&(xr=Ir),vr()},function(Ir){Er=Ir,vr()}):(this.logger.warn("because db is false,error is null"),vr())},Dt.getLocalMsgsByIdClients=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"getLocalMsgsByIdClients",done:rr.done});var kr,Er=this.db,xr=[];function vr(){rr.msgs=xr,rr.done(kr,rr)}lr.verifyOptions(rr,"idClients","msg::getLocalMsgByIdClients"),lr.verifyParamType("idClients",rr.idClients,"array","msg::getLocalMsgByIdClients"),this.processCallback(rr),Er.enable?Er.getMsgsByIdClients(rr.idClients).then(function(Ir){xr=L(Ir).call(Ir,function(Or){return!!Or}),vr()},function(Ir){kr=Ir,vr()}):vr()},Dt.updateLocalMsg=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"updateLocalMsg",done:rr.done});var kr,Er=this.db,xr=null;if(lr.verifyOptions(rr,"idClient","msg::updateLocalMsg"),this.processCallback(rr),Er.enable){var vr=lr.filterObj(rr,"idClient localCustom");Er.updateMsg(vr).then(function(Or){xr=Or,Ir()},function(Or){kr=Or,Ir()})}else Ir();function Ir(){rr.msg=xr,rr.done(kr,rr)}},Dt.deleteLocalMsg=function(){var rr=k(i.mark(function kr(Er){var xr,vr,Ir,Or;return i.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:return Or=function(){Er.done(vr,Er)},(Er=Er||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsg",done:Er.done}),xr=this,lr.verifyOptions(Er,"msg","msg::deleteLocalMsg"),Ir=Er.msg,lr.verifyOptions(Ir,"idClient sessionId",!0,"msg.","msg::deleteLocalMsg"),xr.processCallback(Er),Cr.prev=8,Cr.next=11,xr.protocol.deleteLocalMsg(Ir);case 11:Or(),Cr.next=18;break;case 14:Cr.prev=14,Cr.t0=Cr.catch(8),vr=Cr.t0,Or();case 18:case"end":return Cr.stop()}},kr,this,[[8,14]])}));return function(kr){return rr.apply(this,arguments)}}(),Dt.deleteLocalMsgsBySession=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgsBySession",done:rr.done});var kr,Er=this,xr=Er.db;lr.verifyOptions(rr,"scene to","msg::deleteLocalMsgsBySession"),lr.verifyParamValid("scene",rr.scene,Er.message.validScenes,"msg::deleteLocalMsgsBySession"),rr.sessionId=rr.scene+"-"+rr.to,rr.delLastMsg=rr.delLastMsg===!0,rr.isTag=rr.isTag===!0;var vr=new Date().getTime();function Ir(){rr.done(kr,rr)}Er.processCallback(rr);var Or={id:rr.sessionId};rr.delLastMsg&&(Or.lastMsg=null),rr.isTag&&(Or.lastEmptyTime=vr),xr.enable?xr.deleteMsgsBySessionId(rr).then(function(){rr.delLastMsg||rr.isTag?xr.updateSession(Or).then(function(Cr){Er.protocol.onUpdateSession(Cr),rr.session=Cr,Ir()}):Ir()}).catch(function(Cr){kr=Cr,Ir()}):(this.logger.warn("because db is false,error is null"),Ir(),(rr.delLastMsg||rr.isTag)&&Er.protocol.onUpdateSession(Or))},Dt.deleteLocalMsgsByTime=function(rr){var kr=this.db;_r.isBrowser&&kr.enable&&(er((rr=rr||{}).start)?lr.verifyParamType("start",rr.start,"number","msg::deleteLocalMsgsByTime"):rr.start=0,er(rr.end)?lr.verifyParamType("end",rr.end,"number","msg::deleteLocalMsgsByTime"):rr.end=1/0,er(rr.end)&&er(rr.start)&&rr.end<=rr.start&&lr.onParamError(" end  start"),this.processCallback(rr),this.protocol.deleteLocalMsgsByTime(rr).then(function(Er){rr.done(null,Er)},function(Er){rr.done(Er,null)}))},Dt.deleteLocalMsgs=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgs",done:rr.done});var kr;function Er(){rr.done(kr,rr)}rr.updateSession=rr.updateSession!==!1,lr.verifyOptions(rr,"sessionId","msg::deleteLocalMsgsBySession"),er(rr.start)&&lr.verifyParamType("start",rr.start,"number","msg::deleteLocalMsgs"),er(rr.end)&&lr.verifyParamType("end",rr.end,"number","msg::deleteLocalMsgs"),er(rr.end)&&er(rr.start)&&rr.end<=rr.start&&lr.onParamError(" end  start"),this.processCallback(rr),this.protocol.deleteLocalMsgs(rr).then(function(){Er()},function(xr){kr=xr,Er()})},Dt.deleteAllLocalMsgs=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"deleteAllLocalMsgs",done:rr.done});var kr,Er=this.db;function xr(){rr.done(kr,rr)}this.processCallback(rr),this.protocol.sessionSet={},Er.enable?Er.deleteAllMsgs().then(function(){xr()},function(vr){kr=vr,xr()}):(this.logger.warn("because db is false,error is null"),xr())},Dt.saveMsgsToLocal=function(rr){var kr;(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"saveMsgsToLocal",done:rr.done}),this.db.enable||(this.logger.warn("because db is false,error is null"),rr.done(null,[])),lr.verifyOptions(rr,"msgs done","msg::saveMsgsToLocal"),lr.verifyParamType("msgs",rr.msgs,"Array","msg::saveMsgsToLocal");var Er=ue(kr=rr.msgs).call(kr,function(xr){var vr=ur({},xr);return vr.hasOwnProperty("needUpdateSession")||(vr.needUpdateSession=!0),vr});this.db.putMsg(Er).then(function(xr,vr){vr?rr.done(vr):rr.done(null,xr)})},Dt.clearServerHistoryMsgs=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgs",done:rr.done}),lr.verifyOptions(rr,"account","msg::clearServerHistoryMsgs");var kr=rr.delRoam!==!1;this.processCallback(rr),this.sendCmd("clearServerHistoryMsgs",{clearMsgsParams:{account:rr.account,delRoam:kr?1:0}},rr.callback)},Dt.clearServerHistoryMsgsWithSync=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgsWithSync",done:rr.done}),lr.verifyOptions(rr,"scene to","msg::clearServerHistoryMsgsWithSync");var kr=rr.isDeleteRoam===void 0||rr.isDeleteRoam===!0,Er={type:rr.scene==="team"?2:1,isDeleteRoam:kr?1:0,isSyncSelf:rr.isSyncSelf===!0?1:0};Er[Er.type===2?"toTid":"otherAccid"]=rr.to,rr.ext!==void 0&&(Er.ext=rr.ext),this.processCallback(rr),this.sendCmd("clearServerHistoryMsgsWithSync",{clearMsgsParamsWithSync:Er},rr.callback)},Dt.msgFtsInServer=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"msgFtsInServer",done:rr.done}),this.processCallback(rr);var kr=rr,Er=y({},(g(kr),kr));lr.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",min:0,required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},Er,"msg::msgFtsInServer"),er(Er.toTime)&&er(Er.fromTime)&&Er.toTime<Er.fromTime&&lr.onParamError("Options error: toTime should be greater than fromTime");var xr,vr={ASC:1,DESC:2};Er.order&&vr[Er.order]&&(Er.order=vr[Er.order]),Er.msgTypeList&&(Er.msgTypeList=ue(xr=Er.msgTypeList).call(xr,function(Or){return Mr[Or]}));var Ir=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];z(Ir).call(Ir,function(Or){re(Er[Or])&&(Er[Or]=Er[Or].join(","))}),this.sendCmd("msgFtsInServer",{msgFullSearchRequestTag:Er},rr.callback)},Dt.msgFtsInServerByTiming=function(rr){(rr=rr||{}).done=Pr({instance:this,className:"NIMFn",funcName:"msgFtsInServerByTiming",done:rr.done}),this.processCallback(rr);var kr=rr,Er=(kr.callback,kr.done,n(kr,Et));lr.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},Er,"msg::msgFtsInServerByTimeSort"),er(Er.toTime)&&er(Er.fromTime)&&Er.toTime<Er.fromTime&&lr.onParamError("Options error: toTime should be greater than fromTime");var xr,vr={ASC:1,DESC:2};Er.msgLimit===void 0&&(Er.msgLimit=20),Er.order&&vr[Er.order]&&(Er.order=vr[Er.order]),Er.msgTypeList&&(Er.msgTypeList=ue(xr=Er.msgTypeList).call(xr,function(Or){return Mr[Or]}));var Ir=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];z(Ir).call(Ir,function(Or){re(Er[Or])&&(Er[Or]=Er[Or].join(","))}),this.sendCmd("msgFtsInServerByTiming",{msgTimingFullSearchRequestTag:Er},rr.callback)},Dt.subMessages=function(){var rr=k(i.mark(function kr(Er){var xr,vr,Ir;return i.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(xr=this,(Er=Er||{}).done=Pr({instance:this,className:"NIMFn",funcName:"subMessages",done:Er.done}),lr.verifyOptions(Er,"msg","msg::subMessages"),lr.verifyOptions(Er.msg,"idClient","msg::subMessages"),this.processCallback(Er),!xr.db.enable){Or.next=23;break}return vr=[],Or.prev=8,Or.next=11,xr.db.getSubMessages(Er.msg.idClient);case 11:vr=Or.sent,Or.next=20;break;case 14:return Or.prev=14,Or.t0=Or.catch(8),(Ir=Or.t0||{}).message=Ir.message||"msg::subMessages:db error",Er&&typeof Er.done=="function"&&Er.done(Ir),Or.abrupt("return");case 20:Er.done(null,vr),Or.next=25;break;case 23:xr.logger.warn("subMessages need db"),Er&&typeof Er.done=="function"&&Er.done(pr.noDBError("subMessages need db"));case 25:case"end":return Or.stop()}},kr,this,[[8,14]])}));return function(kr){return rr.apply(this,arguments)}}(),Dt.subMessagesCount=function(){var rr=k(i.mark(function kr(Er){var xr,vr,Ir;return i.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(xr=this,(Er=Er||{}).done=Pr({instance:this,className:"NIMFn",funcName:"subMessagesCount",done:Er.done}),lr.verifyOptions(Er,"msg","msg::subMessagesCount"),lr.verifyOptions(Er.msg,"idClient","msg::subMessagesCount"),this.processCallback(Er),!xr.db.enable){Or.next=23;break}return vr=[],Or.prev=8,Or.next=11,xr.db.getSubMessages(Er.msg.idClient);case 11:vr=Or.sent,Or.next=20;break;case 14:return Or.prev=14,Or.t0=Or.catch(8),(Ir=Or.t0||{}).message=Ir.message||"msg::subMessages:db error",Er&&typeof Er.done=="function"&&Er.done(Ir),Or.abrupt("return");case 20:Er.done(null,vr.length),Or.next=25;break;case 23:xr.logger.warn("subMessagesCount need db"),Er&&typeof Er.done=="function"&&Er.done(pr.noDBError("subMessagesCount need db"));case 25:case"end":return Or.stop()}},kr,this,[[8,14]])}));return function(kr){return rr.apply(this,arguments)}}()},function(t,r){t.exports=function(e){if(e==null)throw new TypeError("Cannot destructure "+e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(866),g=e(151);function y(){var i;return t.exports=y=n?g(i=n).call(i):function(k){for(var $=1;$<arguments.length;$++){var L=arguments[$];for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&(k[V]=L[V])}return k},t.exports.__esModule=!0,t.exports.default=t.exports,y.apply(this,arguments)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(867)},function(t,r,e){t.exports=e(868)},function(t,r,e){var n=e(869);t.exports=n},function(t,r,e){var n=e(305);t.exports=n},function(t,r,e){t.exports=e(871)},function(t,r,e){var n=e(872);t.exports=n},function(t,r,e){e(873),t.exports=9007199254740991},function(t,r,e){e(1)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,r,e){var n=e(10),g=e(32),y=e(15),i=e(2),k=e(8),$=e(4),L=e(16),V=e(40).fn,z=e(0),re=e(756),ie=e(758),ue=(e(76),z.notundef),le=e(25).reportAPI;function oe(ae,Ue,de,_e){de=de||"",z.verifyParamType(de+"from",ae.from,"string",Ue),z.verifyParamType(de+"to",ae.to,"string",Ue),z.verifyParamType(de+"idServer",ae.idServer,"string",Ue),z.verifyParamType(de+"time",ae.time,"number",Ue),z.verifyParamValid(de+"scene",ae.scene,this.message.validScenes,Ue),_e||z.verifyParamType(de+"idClient",ae.idClient,"string",Ue)}V.getThreadMsgs=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"getThreadMsgs",done:ae.done}),z.verifyCallback(ae,"done","msg::getThreadMsgs"),z.verifyOptions(ae,"scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime","msg::getThreadMsgs"),z.verifyParamType("threadMsgFromAccount",ae.threadMsgFromAccount,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgToAccount",ae.threadMsgToAccount,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgIdServer",ae.threadMsgIdServer,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgTime",ae.threadMsgTime,"number","msg::getThreadMsgs"),z.verifyParamValid("scene",ae.scene,this.message.validScenes,"msg::getThreadMsgs"),this.processCallback(ae);var Ue={scene:this.message.sceneMap[ae.scene],from:ae.threadMsgFromAccount,to:ae.threadMsgToAccount,time:ae.threadMsgTime,idServer:ae.threadMsgIdServer},de={limit:ae.limit<100?ae.limit:100,beginTime:typeof ae.beginTime=="number"?ae.beginTime:0,reverse:n(ae)===!0?1:0};typeof ae.endTime=="number"&&(de.endTime=ae.endTime,de.endTime<=de.beginTime&&z.onParamError("endTimebeginTime","msg::getThreadMsgs")),ae.lastMsgId&&(de.lastMsgId=ae.lastMsgId),this.sendCmd("getThreadMsgs",{msg:Ue,threadMsgReq:de,NOTSTORE:"msg threadMsgReq"},ae.callback)},V.getMsgsByIdServer=function(ae){var Ue,de,_e=this;(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"getMsgsByIdServer",done:ae.done});var Ve=this,$e="msg::getMsgsByIdServer";z.verifyCallback(ae,"done",$e),(!g(ae.reqMsgs)||ae.reqMsgs.length===0||ae.reqMsgs.length>100)&&z.onParamError("reqMsgs0100",$e),ae.reqMsgs=y(Ue=ae.reqMsgs).call(Ue,0),i(de=ae.reqMsgs).call(de,function(Lt,jt){oe.call(Ve,Lt,$e,"reqMsgs[".concat(jt,"]."),!0),Lt.scene=_e.message.sceneMap[Lt.scene]}),this.processCallback(ae),this.sendCmd("getMsgsByIdServer",{reqMsgs:ae.reqMsgs},ae.callback)},V.addQuickComment=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"addQuickComment",done:ae.done}),z.verifyOptions(ae,"msg body","msg::addQuickComment"),oe.call(this,ae.msg,"msg::addQuickComment");var Ue=new re(ae,"msg::addQuickComment");Ue.from=this.account;var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("addQuickComment",{msg:de,comment:Ue},ae.callback)},V.deleteQuickComment=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteQuickComment",done:ae.done}),z.verifyOptions(ae,"msg body","msg::deleteQuickComment"),oe.call(this,ae.msg,"msg::deleteQuickComment");var Ue=new re(ae,"msg::addQuickComment");Ue.from=this.account;var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("deleteQuickComment",{msg:de,comment:Ue},ae.callback)},V.getQuickComments=function(ae){var Ue=this;(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"getQuickComments",done:ae.done});var de="msg::getQuickComments",_e=this,Ve={},$e={};z.verifyOptions(ae,"msgs","msg::getQuickComments"),(!g(ae.msgs)||ae.msgs.length===0||ae.msgs.length>20)&&z.onParamError("msgs020",de);var Lt=[];try{Lt=JSON.parse(k(ae.msgs))}catch{z.onParamError("msgs ",de)}i(Lt).call(Lt,function(jt,Et){oe.call(_e,jt,de,"msgs[".concat(Et,"]."),!0),jt.scene=Ue.message.sceneMap[jt.scene],Ve[jt.idClient]=null,$e[jt.idClient]=Et}),this.processCallback(ae),this.getLocalMsgsByIdClients({idClients:$(Ve),done:function(jt,Et){var ir,ur=_e.protocol.timetags.sync;!jt&&Et.msgs&&Et.msgs.length&&ur&&(i(ir=Et.msgs).call(ir,function(Dt){Ve[Dt.idClient]=Dt}),Lt=L(Lt).call(Lt,function(Dt){var lr=Ve[Dt.idClient];return!lr||(lr.commentTimetag&&(Dt.timestamp=lr.commentTimetag),!(lr.commentTimetag>ur))})),_e.sendCmd("getQuickComments",{commentReq:Lt,idMap:Ve,indexMap:$e},ae.callback)}})},V.addCollect=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"addCollect",done:ae.done}),z.verifyOptions(ae,"type data","msg::addCollect");var Ue=new ie(ae,"msg::addCollect");this.processCallback(ae),this.sendCmd("addCollect",{collect:Ue},ae.callback)},V.deleteCollects=function(ae){var Ue;(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteCollects",done:ae.done}),z.verifyOptions(ae,"collectList","msg::deleteCollects"),(!g(ae.collectList)||ae.collectList.length===0||ae.collectList.length>100)&&z.onParamError("collectList0100","msg::deleteCollects"),i(Ue=ae.collectList).call(Ue,function(de,_e){z.verifyParamType("collectList[".concat(_e,"].id"),de.id,"string","msg::deleteCollects"),z.verifyParamType("collectList[".concat(_e,"].createTime"),de.createTime,"number","msg::deleteCollects")}),this.processCallback(ae),this.sendCmd("deleteCollects",{collectList:ae.collectList},ae.callback)},V.updateCollect=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"updateCollect",done:ae.done}),z.verifyOptions(ae,"collect","msg::updateCollect"),z.verifyParamType("collect.id",ae.collect.id,"string","msg::updateCollect"),z.verifyParamType("collect.createTime",ae.collect.createTime,"number","msg::updateCollect"),this.processCallback(ae),this.sendCmd("updateCollect",{collect:ae.collect},ae.callback)},V.getCollects=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"getCollects",done:ae.done}),z.verifyCallback(ae,"done","msg::getCollects");var Ue={},de=["type","beginTime","endTime","limit"];i(de).call(de,function(_e){ue(ae[_e])&&(z.verifyParamType(_e,ae[_e],"number","msg::getCollects"),Ue[_e]=ae[_e])}),ae.limit>100&&z.onParamError("limit100","msg::getCollects"),ae.beginTime>ae.endTime&&z.onParamError("beginTimeendTime","msg::getCollects"),ue(ae.lastId)&&(z.verifyParamType("lastId",ae.lastId,"string","msg::getCollects"),Ue.lastMsgId=ae.lastId),ue(n(ae))&&(Ue.reverse=n(ae)===!0?1:0),this.processCallback(ae),this.sendCmd("getCollects",{collectQuery:Ue,NOTSTORE:"collectQuery"},ae.callback)},V.addStickTopSession=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"addStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::addStickTopSession");var Ue=z.getIdArray(ae.id);z.verifyParamValid("id",Ue[0],this.message.validScenes,"msg::addStickTopSession"),z.verifyParamType("id",Ue[1],"string","msg::addStickTopSession"),Ue[0]==="superTeam"&&(Ue[0]="super_team");var de={id:Ue=Ue.join("|")};ae.topCustom&&(z.verifyParamType("topCustom",ae.topCustom,"string","msg::addStickTopSession"),de.topCustom=ae.topCustom),this.processCallback(ae),this.sendCmd("addStickTopSession",{stickTopSession:de},ae.callback)},V.deleteStickTopSession=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::deleteStickTopSession");var Ue=z.getIdArray(ae.id);z.verifyParamValid("id",Ue[0],this.message.validScenes,"msg::deleteStickTopSession"),z.verifyParamType("id",Ue[1],"string","msg::deleteStickTopSession"),Ue[0]==="superTeam"&&(Ue[0]="super_team"),Ue=Ue.join("|"),this.processCallback(ae),this.sendCmd("deleteStickTopSession",{stickTopSession:{id:Ue}},ae.callback)},V.updateStickTopSession=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"updateStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::updateStickTopSession");var Ue=z.getIdArray(ae.id);z.verifyParamValid("id",Ue[0],this.message.validScenes,"msg::updateStickTopSession"),z.verifyParamType("id",Ue[1],"string","msg::updateStickTopSession"),Ue[0]==="superTeam"&&(Ue[0]="super_team");var de={id:Ue=Ue.join("|")};ae.topCustom&&(z.verifyParamType("topCustom",ae.topCustom,"string","msg::updateStickTopSession"),de.topCustom=ae.topCustom),this.processCallback(ae),this.sendCmd("updateStickTopSession",{stickTopSession:de},ae.callback)},V.getStickTopSessions=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"getStickTopSessions",done:ae.done}),z.verifyOptions(ae,"done","msg::getStickTopSessions"),this.processCallback(ae);var Ue,de=this.protocol.sessionSet,_e=[];for(var Ve in de)(Ue=this.protocol.getSessionInCache(Ve,ae.findDelete))&&Ue.isTop&&_e.push(de[Ve]);ae.callback(null,_e)},V.addMsgPin=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"addMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::addMsgPin"),oe.call(this,ae.msg,"msg::addMsgPin");var Ue={pinFrom:this.account};ue(ae.pinCustom)&&(z.verifyParamType("pinCustom",ae.pinCustom,"string","msg::addMsgPin"),Ue.pinCustom=ae.pinCustom);var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("addMsgPin",{msg:de,pinTag:Ue},ae.callback)},V.updateMsgPin=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"updateMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::updateMsgPin"),oe.call(this,ae.msg,"msg::updateMsgPin");var Ue={pinFrom:this.account};ue(ae.pinCustom)&&(z.verifyParamType("pinCustom",ae.pinCustom,"string","msg::updateMsgPin"),Ue.pinCustom=ae.pinCustom);var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("updateMsgPin",{msg:de,pinTag:Ue},ae.callback)},V.deleteMsgPin=function(ae){(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"deleteMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::deleteMsgPin"),oe.call(this,ae.msg,"msg::deleteMsgPin");var Ue={pinFrom:this.account},de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("deleteMsgPin",{msg:de,pinTag:Ue},ae.callback)},V.getMsgPins=function(ae){var Ue=this;(ae=ae||{}).done=le({instance:this,className:"NIMFn",funcName:"getMsgPins",done:ae.done}),z.verifyOptions(ae,"id","msg::getMsgPins");var de=this.db,_e=z.getIdArray(ae.id);z.verifyParamValid("id",_e[0],this.message.validScenes,"msg::getMsgPins"),z.verifyParamType("id",_e[1],"string","msg::getMsgPins"),_e[0]==="superTeam"&&(_e[0]="super_team");var Ve={sessionId:_e=_e.join("|"),timetag:0};if(this.processCallback(ae),de.enable){var $e=this.protocol.timetags.sync;de.getTimetag("pin-"+ae.id).then(function(jt){jt>$e?de.getMsgPins(ae.id).then(function(Et){return ae.callback(null,{pins:Et||[]})}).catch(function(Et){return ae.callback(Et)}):(Ve.timetag=jt,Lt.call(Ue))})}else Lt.call(this);function Lt(){this.sendCmd("getMsgPins",{msgPinReq:Ve,id:ae.id,NOTSTORE:"msgPinReq"},ae.callback)}}},function(t,r,e){var n=e(3),g=e(16),y=e(2),i=e(10),k=e(40).fn,$=e(0),L=$.undef,V=$.notundef,z=e(153),re=e(25).reportAPI;k.markSysMsgRead=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"markSysMsgRead",done:ie.done});var ue,le=this.db,oe=n.resolve(),ae=this.protocol;$.verifyOptions(ie,"sysMsgs","sysmsg::markSysMsgRead");var Ue=ie.sysMsgs;function de(){ie.done(ue,ie)}$.isArray(Ue)||(Ue=[Ue]),le.enable?oe=le.markSysMsgRead(Ue).then(function(_e){Ue=_e,ae.onUpdateSysMsg(_e)}):(Ue=g(Ue).call(Ue,function(_e){return!_e.read})).length&&(ae.options.autoMarkRead||ae.markSysMsgRead(Ue,!0),y(Ue).call(Ue,function(_e){_e.read=!0}),ae.onUpdateSysMsg(Ue)),oe.then(function(){return ae.reduceSysMsgUnread(Ue)}).then(de,function(_e){ue=_e,de()})},k.sendCustomSysMsg=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"sendCustomSysMsg",done:ie.done}),$.verifyOptions(ie,"scene to content","sysmsg::sendCustomSysMsg"),$.verifyParamValid("scene",ie.scene,this.message.validScenes,"sysmsg::sendCustomSysMsg"),this.processCallback(ie);var ue="sendCustomSysMsg";return ie.scene==="p2p"?ie.type="customP2p":ie.scene==="superTeam"?(ie.type="customSuperTeam",ue="sendSuperTeamCustomSysMsg"):ie.type="customTeam",ie.sysMsg=new z(ie),g(ie)&&(ue="sendFilterCustomSysMsg"),this.sendCmd(ue,{sysMsg:ie.sysMsg,single:!0},ie.callback),this.formatReturnSysMsg(ie.sysMsg)},k.formatReturnSysMsg=function(ie){return ie=$.copy(ie),this.protocol.completeSysMsg(ie),ie.status="sending",ie=i(z).call(z,ie)},k.getLocalSysMsgs=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"getLocalSysMsgs",done:ie.done});var ue,le=this.db,oe=[];function ae(){ie.sysMsgs=oe,ie.done(ue,ie)}$.verifyOptions(ie),ie.category&&$.verifyParamValid("category",ie.category,z.validCategories,"sysmsg::getLocalSysMsgs"),ie.type&&$.verifyParamValid("type",ie.type,z.validTypes,"sysmsg::getLocalSysMsgs"),L(ie.limit)&&(ie.limit=100),$.verifyParamType("limit",ie.limit,"number","sysmsg::getLocalSysMsgs"),$.verifyParamMax("limit",ie.limit,100,"sysmsg::getLocalSysMsgs"),V(i(ie))?$.verifyParamType("reverse",i(ie),"boolean","sysmsg::getLocalSysMsgs"):ie.reverse=!1,this.processCallback(ie),le.enable?le.getSysMsgs(ie).then(function(Ue){oe=Ue,ae()},function(Ue){ue=Ue,ae()}):ae()},k.updateLocalSysMsg=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"updateLocalSysMsg",done:ie.done});var ue,le=this.db,oe=null;if($.verifyOptions(ie,"idServer","sysmsg::updateLocalSysMsg"),this.processCallback(ie),le.enable){var ae=$.filterObj(ie,"idServer state localCustom");le.updateSysMsg(ae).then(function(de){oe=de,Ue()},function(de){ue=de,Ue()})}else Ue();function Ue(){ie.sysMsg=oe,ie.done(ue,ie)}},k.deleteLocalSysMsg=function(ie){(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"deleteLocalSysMsg",done:ie.done});var ue,le=this.db;function oe(){ie.done(ue,ie)}$.verifyOptions(ie,"idServer","sysmsg::deleteLocalSysMsg"),this.processCallback(ie),le.enable?le.deleteSysMsg(ie.idServer).then(function(){oe()},function(ae){ue=ae,oe()}):oe()},k.deleteAllLocalSysMsgs=function(ie){var ue;(ie=ie||{}).done=re({instance:this,className:"NIMFn",funcName:"deleteAllLocalSysMsgs",done:ie.done});var le=this,oe=le.db;function ae(){le.protocol.onUpdateSysMsgUnread({}),ie.done(ue,ie)}le.processCallback(ie),oe.enable?oe.deleteAllSysMsgs().then(function(){ae()},function(Ue){ue=Ue,ae()}):ae()}},function(t,r,e){var n=e(40).fn,g=e(0),y=e(11),i=e(25).reportAPI;n.getChatroomAddress=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"getChatroomAddress",done:k.done}),g.verifyOptions(k,"chatroomId","chatroom::getChatroomAddress"),k.isWeixinApp=y.isWeixinApp,k.type=y.ipVersion,this.processCallback(k),this.sendCmd("getChatroomAddress",k)}},function(t,r){},function(t,r){},function(t,r,e){var n=e(40).fn,g=e(0),y=e(25).reportAPI;n.audioToText=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"audioToText",done:i.done}),g.verifyOptions(i,"url","audio::audioToText"),i.audioToText=g.filterObj(i,"url"),this.processCallback(i),this.sendCmd("audioToText",i)}},function(t,r,e){var n=e(40).fn;n.clearDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.clear().then(i,i):i()},n.removeDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.destroy().then(i,i):i()},n.closeDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.close().then(i,i):i()}},function(t,r,e){var n=e(40).fn,g=e(310),y=e(0),i=y.undef,k=e(25).reportAPI;n.getPushNotificationMultiportConfig=function(){return k({instance:this,className:"NIMFn",funcName:"getPushNotificationMultiportConfig",hasCallback:!1}),this.protocol.getPushNotificationMultiportConfig()},n.updatePushNotificationMultiportConfig=function($){($=$||{}).done=k({instance:this,className:"NIMFn",funcName:"updatePushNotificationMultiportConfig",done:$.done}),y.verifyOptions($),i($.shouldPushNotificationWhenPCOnline)&&($.shouldPushNotificationWhenPCOnline=!0),$.donnop=new g($),this.processCallback($),this.sendCmd("updateDonnop",$)}},function(t,r,e){var n=e(2),g=e(3),y=e(6),i=e(22),k=e(40).fn,$=e(0),L=e(883),V=e(884),z=e(25).reportAPI;function re(ie){return i(ie)==="object"&&(ie.msgEventSubscribes?ie=ie.msgEventSubscribes:ie.msgEventSubscribe?ie=ie.msgEventSubscribe:ie.accounts?ie=ie.accounts:ie.msgEvent&&(ie=ie.msgEvent).time&&(ie.time=+ie.time),ie.sync===1?ie.sync=!0:ie.sync===0&&(ie.sync=!1)),ie}k.batchSendEventsCmds=function(ie,ue,le){var oe=this,ae=$.dropArrayDuplicates(ue.accounts);ae=$.reshape2d(ae,100);var Ue=[];n(ae).call(ae,function(de){Ue.push(new g(function(_e,Ve){var $e=$.simpleClone(ue);$e.accounts=de,oe.sendCmdWithResp(ie,$e,function(Lt,jt){Lt?Ve(Lt):_e(re(jt))})}))}),g.all(Ue).then(function(de){var _e=null;if(de.length>0)if(de[0].msgEventSubscribe){var Ve=de[0].msgEventSubscribe;Ve=re(Ve);var $e=[];n(de).call(de,function(Lt){$e=y($e).call($e,Lt.accounts)}),_e={accounts:$e,msgEventSubscribe:Ve}}else _e=[],n(de).call(de,function(Lt){_e=y(_e).call(_e,Lt)});le(null,_e)},function(de){le(de,null)})},k.publishEvent=function(ie){(ie=ie||{}).done=z({instance:this,className:"NIMFn",funcName:"publishEvent",done:ie.done});var ue=new L(ie);ue=ue.assembleEvent(),this.processCallback(ie),this.sendCmdWithResp("publishEvent",{msgEvent:ue},function(le,oe){le||(oe=re(oe)),ie.callback(le,oe)})},k.subscribeEvent=function(ie){(ie=ie||{}).done=z({instance:this,className:"NIMFn",funcName:"subscribeEvent",done:ie.done}),$.verifyOptions(ie,"accounts","event::subscribeEvent");var ue=new V(ie);$.verifyParamType("accounts",ie.accounts,"array","event::subscribeEvent"),this.processCallback(ie),ue=ue.assembleEvent(),this.batchSendEventsCmds("subscribeEvent",{msgEventSubscribe:ue,accounts:ie.accounts},function(le,oe){!le&&oe&&(oe={failedAccounts:oe}),ie.callback(le,oe)})},k.unSubscribeEventsByAccounts=function(ie){(ie=ie||{}).done=z({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByAccounts",done:ie.done}),$.verifyOptions(ie,"accounts","event::unSubscribeEventsByAccounts"),$.verifyParamType("accounts",ie.accounts,"array","event::unSubscribeEventsByAccounts");var ue=new V(ie);ue=ue.assembleEvent(),this.processCallback(ie),this.batchSendEventsCmds("unSubscribeEventsByAccounts",{msgEventSubscribe:ue,accounts:ie.accounts},function(le,oe){!le&&oe&&(oe={failedAccounts:oe}),ie.callback(le,oe)})},k.unSubscribeEventsByType=function(ie){(ie=ie||{}).done=z({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByType",done:ie.done});var ue=new V(ie);ue=ue.assembleEvent(),this.processCallback(ie),this.sendCmdWithResp("unSubscribeEventsByType",{msgEventSubscribe:ue},function(le,oe){ie.callback(le,oe)})},k.querySubscribeEventsByAccounts=function(ie){(ie=ie||{}).done=z({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByAccounts",done:ie.done}),$.verifyOptions(ie,"accounts","event::querySubscribeEventsByAccounts"),$.verifyParamType("accounts",ie.accounts,"array","event::querySubscribeEventsByAccounts");var ue=new V(ie);ue=ue.assembleEvent(),this.processCallback(ie),this.batchSendEventsCmds("querySubscribeEventsByAccounts",{msgEventSubscribe:ue,accounts:ie.accounts},function(le,oe){!le&&oe&&(oe={msgEventSubscribes:oe}),ie.callback(le,oe)})},k.querySubscribeEventsByType=function(ie){(ie=ie||{}).done=z({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByType",done:ie.done});var ue=new V(ie);ue=ue.assembleEvent(),this.processCallback(ie),this.sendCmdWithResp("querySubscribeEventsByType",{msgEventSubscribe:ue},function(le,oe){le||(oe={msgEventSubscribes:re(oe)}),ie.callback(le,oe)})}},function(t,r,e){var n=e(7),g=e(0),y=g.notundef,i=e(41);function k($){if(g.verifyOptions($,"type value","event::MsgEvent"),g.verifyParamType("type",$.type,"number","event::MsgEvent"),g.verifyParamType("value",$.value,"number","event::MsgEvent"),this.type=$.type,this.value=$.value,this.idClient=g.guid(),y($.custom)&&(this.custom=""+$.custom),this.validTime=$.validTime||604800,g.verifyParamType("validTime",this.validTime,"number","event::MsgEvent"),g.verifyParamMin("validTime",this.validTime,60,"event::MsgEvent"),g.verifyParamMax("validTime",this.validTime,604800,"event::MsgEvent"),y($.broadcastType)){var L;if(g.verifyParamType("broadcastType",$.broadcastType,"number","event::MsgEvent"),n(L=[1,2]).call(L,$.broadcastType)<0)throw new i('"broadcastType":12');this.broadcastType=$.broadcastType}else this.broadcastType=2;y($.sync)?(g.verifyParamType("sync",$.sync,"boolean","event::MsgEvent"),this.sync=$.sync):this.sync=!1}k.prototype.assembleEvent=function(){return{type:this.type,value:this.value,idClient:this.idClient,custom:this.custom||"",validTime:this.validTime,broadcastType:this.broadcastType,sync:this.sync===!0?1:0}},t.exports=k},function(t,r,e){var n=e(0),g=n.notundef;function y(i){n.verifyOptions(i,"type","event::MsgEventSubscribe"),n.verifyParamType("type",i.type,"number","event::MsgEventSubscribe"),n.findObjIndexInArray([1,2,3],i.type)<0&&n.verifyParamMin("type",i.type,1e5,"event::MsgEventSubscribe"),this.type=i.type,g(i.subscribeTime)?(n.verifyParamType("subscribeTime",i.subscribeTime,"number","event::MsgEventSubscribe"),n.verifyParamMin("subscribeTime",i.subscribeTime,60,"event::MsgEventSubscribe"),n.verifyParamMax("subscribeTime",i.subscribeTime,2592e3,"event::MsgEventSubscribe"),this.subscribeTime=i.subscribeTime):this.subscribeTime=2592e3,g(i.sync)?(n.verifyParamType("sync",i.sync,"boolean","event::MsgEventSubscribe"),this.sync=i.sync):this.sync=!0}y.prototype.assembleEvent=function(){return{type:this.type,subscribeTime:this.subscribeTime,sync:this.sync===!0?1:0}},t.exports=y},function(t,r,e){var n=e(37),g=e(40).fn,y=e(0),i=e(25).reportAPI;g.httpRequestProxy=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"httpRequestProxy",done:k.done}),y.verifyOptions(k,"path","misc::httpRequestProxy");var $=n({},k);delete $.done,this.processCallback(k),this.sendCmd("httpProxy",{proxyTag:$},k.callback)}},function(t,r,e){var n=e(40).fn,g=e(11),y=e(25).reportAPI;n.getQChatAddress=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"getQChatAddress",done:i.done}),this.processCallback(i),this.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:g.ipVersion}},i.done)}},function(t,r,e){e(299);var n=e(197);e(311)(n),t.exports=n},function(t,r,e){var n=e(314),g=e(15),y=e(3),i=e(60),k=e(6),$=e(24),L=e(198).fn,V=e(11),z=e(157).V2NIMConnectStatus;L.connect=function(){V.isBrowser&&this.reporter.restore(),n(L).connect.call(this)},L.refreshSocketUrl=function(){var re;return this.socketUrlsBackup=this.socketUrlsBackup||[],this.socketUrls=g(re=this.socketUrlsBackup).call(re,0),this.logger.info("link::refreshSocketUrl"),this.statusProtector.emit("auth/loginLifeCycleAddressing"),y.resolve(this.socketUrls)},L.onHandshakeFailed=function(re,ie){var ue;this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:ie,rt:i()-re,result:408,failReason:"ws_handshake_failed",time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(ue="link::onHandshakeFailed: shandshake failed, startTime: ".concat(re,", targetUrl: ")).call(ue,ie))},L.onConnectFailed=function(re,ie,ue){var le,oe,ae=typeof re=="string"?"connect_failed:".concat(re):"connect_failed";this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:ue,rt:i()-ie,result:408,failReason:"ws_".concat(ae),time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(le=k(oe="link::onConnectFailed: connect failed due to ".concat(re,", startTime: ")).call(oe,ie,", targetUrl: ")).call(le,ue))},L.onSocketError=function(re,ie,ue){var le,oe,ae=typeof re=="string"?"socket.io error:".concat(re):"socket.io error";this.reporter.report("chatroomLogin",{accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:ue,rt:i()-ie,result:408,failReason:"ws_".concat(ae),time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(le=k(oe="link::onSocketError: due to ".concat(re,", startTime: ")).call(oe,ie,", targetUrl: ")).call(le,ue))},L.notifyDisconnect=function(re){n(L).notifyDisconnect.call(this,re)},L.disconnect=function(){var re=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void $(function(){n(L).disconnect.call(re,ie)},0);this.connecting?this.logger.warn("ChatroomProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==z.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("ChatroomProtocolFn api disconnect:: has tried to disconnect actively"):this.logger.warn("ChatroomProtocolFn api disconnect:: other logic entered");var ue=n(L);ue.disconnect.call(this,ie)}},function(t,r,e){var n=e(57),g=e(51),y=e(58),i=e(8),k=e(60),$=e(3),L=e(26),V=e(4),z=e(52),re=e(16),ie=e(53),ue=e(2),le=e(54),oe=e(55),ae=e(43);function Ue(jt,Et){var ir=V(jt);if(z){var ur=z(jt);Et&&(ur=re(ur).call(ur,function(Dt){return ie(jt,Dt).enumerable})),ir.push.apply(ir,ur)}return ir}function de(jt){for(var Et=1;Et<arguments.length;Et++){var ir,ur,Dt=arguments[Et]!=null?arguments[Et]:{};Et%2?ue(ir=Ue(Object(Dt),!0)).call(ir,function(lr){g(jt,lr,Dt[lr])}):le?oe(jt,le(Dt)):ue(ur=Ue(Object(Dt))).call(ur,function(lr){ae(jt,lr,ie(Dt,lr))})}return jt}var _e=e(198).fn,Ve=e(45),$e=e(0);function Lt(jt){var Et=this;if(jt.code===398)return this.logger.warn("pendingLoginFailed:398 try to reconnect socket linkbackoff set min 5s"),Et.forceDisconnect(),Et.backoff.setMin(5e3),void(Et.retryCount===0?Et.refreshSocketUrl():$.resolve()).then(function(){var ir;Et.reconnect({allFailedCB:L(ir=function(ur){this.logger.error("pendingLoginFailed: ",ur.code,ur),this.onAuthError(ur,"link::onLoginReconnectFailed")}).call(ir,Et,jt)})});this.logger.error("pendingLoginFailed: ",jt.code,jt),Et.onAuthError(jt,"link::onLogin")}_e.assembleLogin=function(){var jt=this.options;this.sdkSession=this.genSessionKey();var Et={appKey:jt.appKey,account:jt.account,deviceId:Ve.deviceId,chatroomId:jt.chatroomId,session:this.sdkSession,appLogin:this.autoconnect?1:0},ir=!0;if(jt.loc_x===void 0||jt.loc_y===void 0||jt.loc_z===void 0?ir=!1:(typeof jt.loc_x!="number"&&(jt.loc_x=0),typeof jt.loc_y!="number"&&(jt.loc_y=0),typeof jt.loc_z!="number"&&(jt.loc_z=0)),jt.authType=jt.loginAuthType,Et=$e.merge(Et,$e.filterObj(jt,ir?"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt loc_x loc_y loc_z distance antiSpamBusinessId":"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt distance antiSpamBusinessId")),jt.tags&&jt.tags.length>0)try{Et.tags=i(jt.tags)}catch(ur){this.logger.error("assembleLogin::format tags error",jt.tags,ur)}return{type:1,login:Et,imLogin:this.assembleIMLogin()}},_e.login=y(n.mark(function jt(){var Et,ir,ur,Dt=this;return n.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return Et=this,lr.next=3,Et.assembleLogin();case 3:if(ir=lr.sent,!(ur=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){lr.next=13;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[ur]){lr.next=10;break}return this.logger.warn("onConnect::repeat login",ur),lr.abrupt("return");case 10:this.socketIds[ur]=!0,lr.next=14;break;case 13:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 14:this.logger.warn("link::doLogin: "+ur+" appLogin is "+ir.login.appLogin),Et.createLoginTime=k(),Et.sendCmd("login",de({},ir),function(sr,er){if(sr)Et.reporter.report("chatroomLogin",{accid:Et.account,roomId:Et.options&&Et.options.chatroomId,serverIps:Et.options&&Et.options.chatroomAddresses&&Et.options.chatroomAddresses.join(","),currentServerIp:Et.url,rt:k()-Et.createLoginTime,result:sr?sr.code:408,failReason:sr?sr.message:"",time:k(),net_connect:Et.checkNetworkAvailable()}),Lt.call(Et,sr),Et.statusProtector.emit("auth/loginLifeCycleLoginFail",sr);else if(Et.reporter.report("chatroomLogin",{accid:Et.account,roomId:Et.options&&Et.options.chatroomId,serverIps:Et.options&&Et.options.chatroomAddresses&&Et.options.chatroomAddresses.join(","),currentServerIp:Et.url,rt:k()-Et.createLoginTime,result:200,failReason:"",time:k(),net_connect:Et.checkNetworkAvailable()}),Et.resetReconnectStatus(),Dt.heartbeatFail=0,Dt.hasLogin=!0,Dt.autoconnect=!0,Et.startHeartbeat(),Et.initOnlineListener(),Et.statusProtector.emit("auth/loginLifeCycleLoginSucc"),Et.keepNosSafeUrl)Et.afterLogin(er);else{var cr=[];Et.parser.checkObjSafeUrl(er,cr,[]),$.all(cr).then(function(){Et.afterLogin(er)}).catch(function(){Et.afterLogin(er)})}});case 17:case"end":return lr.stop()}},jt,this)})),_e.afterLogin=function(jt){var Et=jt.chatroom;this.sendCmd("getNosCdnHost",{}),this.chatroom=Et,this.notifyLogin(jt)},_e.kickedReasons=["","chatroomClosed","managerKick","samePlatformKick","silentlyKick","blacked"],_e.kickedMessages=["","","","","",""]},function(t,r,e){var n=e(10),g=e(24),y=e(71),i=e(2),k=e(48),$=e(37),L=e(15),V=e(32),z=e(126),re=e(4),ie=e(198).fn,ue=e(0),le=e(11),oe=e(891),ae=e(768),Ue=e(896),de=e(897),_e=e(898);ie.completeMsg=function(Ve){Ve.chatroomId=this.chatroom&&this.chatroom.id,Ve.from=this.options.account,Ve.fromClientType="Web",Ve.time||(Ve.time=+new Date)},ie.amendMsg=function(Ve){return Ve},ie.onMsg=function(Ve){var $e,Lt=n($e=this.message).call($e,Ve.content.msg);if(this.checkMsgUnique(Lt)){if(Lt.__handleTime=this.reporterHook.getSafeClock(),Lt.__receiveTime=Ve.__receiveTime,ue.get(Ve,"content.msg.__clientExt"))try{Lt.__clientExt=JSON.parse(Ve.content.msg.__clientExt)}catch{this.logger.warn("ChatroomProtocolFn:onMsg __clientExt parse failed ".concat(Ve.content.msg.__clientExt))}this.msgBuffer.push(Lt),this.msgFlushTimer||this.startMsgFlushTimer(),Ve&&Ve.content&&Ve.content.msg&&Ve.content.msg.needHighPriorityMsgAck==="1"&&this.sendCmd("sendChatroomMsgAck",{chatRoomMsgAckTag:{idClient:Lt.idClient,chatroomId:Lt.chatroomId}})}else this.logger.warn("onMsg::msg::repeat",Lt.idClient)},ie.startMsgFlushTimer=function(){var Ve=this,$e=Ve.options;Ve.msgFlushTimer=g(function(){var Lt,jt=y(Lt=Ve.msgBuffer).call(Lt,0,$e.msgBufferSize);if(le.isBrowser){var Et=Ve.reporterHook.getSafeClock();i(jt).call(jt,function(ir){if(ir.flow!=="out"){var ur={msgId:ir.idServer,clientId:ir.idClient,receiveTime:Ve.reporterHook.getNTPTime(ir.__receiveTime),serverTime:ir.time,callbackTime:Ve.reporterHook.getNTPTime(Et),preHandleTime:Ve.reporterHook.getNTPTime(ir.__handleTime),fromAccid:ir.from,toAccid:Ve.options.account,type:4,tid:"",roomId:ir.chatroomId,result:200,failReason:"",rt:k(Et-ir.__receiveTime)},Dt=ue.get(ir,"__clientExt.statistics.apiCallingTime"),lr=ue.get(ir,"__clientExt.statistics.sendTime");Dt&&lr&&(ur.apiCallingTime=Dt,ur.sendTime=lr,ur.attachUploadDuration=ue.get(ir,"__clientExt.statistics.attachUploadDuration")||0),Ve.reporter&&Ve.reporter.report("msgReceive",ur)}delete ir.__handleTime,delete ir.__receiveTime,delete ir.__clientExt})}Ve.options.onmsgs(jt),Ve.msgBuffer.length?Ve.startMsgFlushTimer():delete Ve.msgFlushTimer},$e.msgBufferInterval)},ie.checkMsgUnique=ue.genCheckUniqueFunc("idClient"),ie.onSendMsg=function(Ve){var $e,Lt=Ve.obj.msg;Ve.error?Lt.status="fail":(Lt=Ve.content.msg).status="success",$(Lt,Ve.obj.msg),Lt=n($e=this.message).call($e,Lt),this.checkMsgUnique(Lt),Ve.obj=Lt},ie.onHistoryMsgs=function(Ve){Ve.error||(Ve.obj||(Ve.obj={}),Ve.obj.msgs=this.message.reverseMsgs(Ve.content.msgs))},ie.onCdnMsgInfo=function(Ve){if(Ve){Ve.cdnUrls&&(Ve.cdnUrls=Ve.cdnUrls.split("|")),Ve.interval&&(Ve.interval=1e3*k(Ve.interval)),Ve.timeout&&(Ve.timeout=+Ve.timeout),Ve.enable&&(Ve.enable=+Ve.enable),Ve.timestamp&&(Ve.timestamp=+Ve.timestamp,this.correctCdnTime(Ve.timestamp));var $e=!this.cdnInfo.enable&&Ve.enable;$(this.cdnInfo,Ve),$e&&this.queryCdnMsgs()}},ie.correctCdnTime=function(Ve){Ve&&typeof Ve=="number"&&(this.cdnInfo||(this.cdnInfo={}),this.cdnInfo.timestamp=Ve,this.cdnInfo.localTime=+new Date,this.cdnInfo.lastNow=null,this.logger.info("correctCdnTime: timestamp, localTime",Ve,this.cdnInfo.localTime,new Date(Ve),new Date(this.cdnInfo.localTime)))},ie.queryCdnMsgs=function(Ve){var $e,Lt=this;if(this.cdnInfo&&this.cdnInfo.enable&&this.isConnected()){this.queryCdnTimer=g(function(){return Lt.queryCdnMsgs()},this.cdnInfo.interval);var jt=+new Date;if(jt=jt-this.cdnInfo.localTime+this.cdnInfo.timestamp,jt-=jt%this.cdnInfo.interval,this.cdnInfo.lastNow!==jt&&this.cdnInfo.cdnUrls&&this.cdnInfo.cdnUrls.length){this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());var Et=this,ir=this.cdnInfo.decryptKey,ur=this.cdnInfo.timeout||Math.ceil(this.cdnInfo.interval/2),Dt=L($e=this.cdnInfo.cdnUrls).call($e,0);Ve=Ve||0,function lr(){if(Ve>=3)return void Et.finalFail++;if(Dt.length){var sr=Dt.shift().replace("#time",jt),er=sr.split("/")[2],cr=+new Date;Et.adaptersRequest(sr,{timeout:ur,onload:function(or){if(Et.cdnInfo.lastNow>jt)Et.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ",Et.cdnInfo.lastNow,jt,or);else{Et.cdnInfo.lastNow=jt,Et.afterQueryCdn(er,+new Date-cr,!0);try{or=JSON.parse(or)}catch(Pr){Et.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ",Pr)}if(or&&or.data){or.ptm&&(Et.cdnInfo.timeout=or.ptm),or.pis&&(Et.cdnInfo.interval=1e3*or.pis);var hr,pr,Tr=or.e===!0?(hr=or.data,pr=ir,oe.decrypt(hr,ae.parse(pr),{mode:Ue,padding:de}).toString(_e)):or.data;Et.onCdnMsgsSmoothly(Tr,jt,1e3*or.c)}}},onerror:function(or){if(Ve++,Et.afterQueryCdn(er,+new Date-cr,!1),or.status===404){var hr;try{var pr=JSON.parse(or.result);pr.code===404&&pr.timestamp&&(hr=pr.timestamp)}catch(Tr){Et.logger.warn("queryCdnMsgs::doQuery::parse 404 result error",Tr,or)}!hr&&or.date&&(hr=+new Date(or.date)),hr&&(Et.correctCdnTime(hr),clearTimeout(Et.queryCdnTimer),Et.queryCdnMsgs(Ve))}else lr()}},{exception_service:8})}}()}}},ie.onCdnMsgsSmoothly=function(Ve,$e,Lt){try{Ve=JSON.parse(Ve)}catch(Dt){this.logger.warn("onCdnMsgsSmoothly::JSON.parse error",Dt)}if(this.logger.info("receive cdn msgs "+Ve.length+" and request time is "+new Date($e)),V(Ve)&&Ve.length){var jt=this,Et=this.options.msgBufferInterval,ir=Math.ceil(Ve.length*Et/Lt);ur(),clearInterval(jt.cdnSmoothTimer),jt.cdnSmoothTimer=z(function(){return ur()},Et)}function ur(){if(jt.isConnected()){var Dt=y(Ve).call(Ve,0,ir);i(Dt).call(Dt,function(lr){var sr=jt.parser.syncUnserialize(lr,"msg");jt.onMsg({content:{msg:sr}})}),Ve.length||clearInterval(jt.cdnSmoothTimer)}}},ie.resetCdnData=function(){this.cdnData={},this.finalFail=0,this.cdnDataTime=+new Date},ie.initCdnData=function(){this.resetCdnData(),ue.isFunction(this.options.onCdnRequestData)?(this.options.cdnRequestDataInterval=this.options.cdnRequestDataInterval||3e4,this.afterQueryCdn=function(Ve,$e,Lt){var jt,Et=this;this.cdnData[Ve]||(this.cdnData[Ve]={success:0,fail:0,sr:0,fr:0,smr:0,fmr:0}),Lt?(this.cdnData[Ve].success++,this.cdnData[Ve].sr+=$e,$e>this.cdnData[Ve].smr&&(this.cdnData[Ve].smr=$e)):(this.cdnData[Ve].fail++,this.cdnData[Ve].fr+=$e,$e>this.cdnData[Ve].fmr&&(this.cdnData[Ve].fmr=$e)),+new Date-this.cdnDataTime<this.options.cdnRequestDataInterval||(i(jt=re(this.cdnData)).call(jt,function(ir){Et.cdnData[ir].sr=Et.cdnData[ir].sr/Et.cdnData[ir].success||0,Et.cdnData[ir].fr=Et.cdnData[ir].fr/Et.cdnData[ir].fail||0}),this.options.onCdnRequestData($({},this.cdnData),this.finalFail),this.resetCdnData())}):this.afterQueryCdn=function(){}}},function(t,r,e){var n;t.exports=(n=e(94),e(768),e(893),e(769),e(313),function(){var g=n,y=g.lib.BlockCipher,i=g.algo,k=[],$=[],L=[],V=[],z=[],re=[],ie=[],ue=[],le=[],oe=[];(function(){for(var de=[],_e=0;_e<256;_e++)de[_e]=_e<128?_e<<1:_e<<1^283;var Ve=0,$e=0;for(_e=0;_e<256;_e++){var Lt=$e^$e<<1^$e<<2^$e<<3^$e<<4;Lt=Lt>>>8^255&Lt^99,k[Ve]=Lt,$[Lt]=Ve;var jt=de[Ve],Et=de[jt],ir=de[Et],ur=257*de[Lt]^16843008*Lt;L[Ve]=ur<<24|ur>>>8,V[Ve]=ur<<16|ur>>>16,z[Ve]=ur<<8|ur>>>24,re[Ve]=ur,ur=16843009*ir^65537*Et^257*jt^16843008*Ve,ie[Lt]=ur<<24|ur>>>8,ue[Lt]=ur<<16|ur>>>16,le[Lt]=ur<<8|ur>>>24,oe[Lt]=ur,Ve?(Ve=jt^de[de[de[ir^jt]]],$e^=de[de[$e]]):Ve=$e=1}})();var ae=[0,1,2,4,8,16,32,64,128,27,54],Ue=i.AES=y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var de=this._keyPriorReset=this._key,_e=de.words,Ve=de.sigBytes/4,$e=4*((this._nRounds=Ve+6)+1),Lt=this._keySchedule=[],jt=0;jt<$e;jt++)jt<Ve?Lt[jt]=_e[jt]:(ur=Lt[jt-1],jt%Ve?Ve>6&&jt%Ve==4&&(ur=k[ur>>>24]<<24|k[ur>>>16&255]<<16|k[ur>>>8&255]<<8|k[255&ur]):(ur=k[(ur=ur<<8|ur>>>24)>>>24]<<24|k[ur>>>16&255]<<16|k[ur>>>8&255]<<8|k[255&ur],ur^=ae[jt/Ve|0]<<24),Lt[jt]=Lt[jt-Ve]^ur);for(var Et=this._invKeySchedule=[],ir=0;ir<$e;ir++){if(jt=$e-ir,ir%4)var ur=Lt[jt];else ur=Lt[jt-4];Et[ir]=ir<4||jt<=4?ur:ie[k[ur>>>24]]^ue[k[ur>>>16&255]]^le[k[ur>>>8&255]]^oe[k[255&ur]]}}},encryptBlock:function(de,_e){this._doCryptBlock(de,_e,this._keySchedule,L,V,z,re,k)},decryptBlock:function(de,_e){var Ve=de[_e+1];de[_e+1]=de[_e+3],de[_e+3]=Ve,this._doCryptBlock(de,_e,this._invKeySchedule,ie,ue,le,oe,$),Ve=de[_e+1],de[_e+1]=de[_e+3],de[_e+3]=Ve},_doCryptBlock:function(de,_e,Ve,$e,Lt,jt,Et,ir){for(var ur=this._nRounds,Dt=de[_e]^Ve[0],lr=de[_e+1]^Ve[1],sr=de[_e+2]^Ve[2],er=de[_e+3]^Ve[3],cr=4,or=1;or<ur;or++){var hr=$e[Dt>>>24]^Lt[lr>>>16&255]^jt[sr>>>8&255]^Et[255&er]^Ve[cr++],pr=$e[lr>>>24]^Lt[sr>>>16&255]^jt[er>>>8&255]^Et[255&Dt]^Ve[cr++],Tr=$e[sr>>>24]^Lt[er>>>16&255]^jt[Dt>>>8&255]^Et[255&lr]^Ve[cr++],Pr=$e[er>>>24]^Lt[Dt>>>16&255]^jt[lr>>>8&255]^Et[255&sr]^Ve[cr++];Dt=hr,lr=pr,sr=Tr,er=Pr}hr=(ir[Dt>>>24]<<24|ir[lr>>>16&255]<<16|ir[sr>>>8&255]<<8|ir[255&er])^Ve[cr++],pr=(ir[lr>>>24]<<24|ir[sr>>>16&255]<<16|ir[er>>>8&255]<<8|ir[255&Dt])^Ve[cr++],Tr=(ir[sr>>>24]<<24|ir[er>>>16&255]<<16|ir[Dt>>>8&255]<<8|ir[255&lr])^Ve[cr++],Pr=(ir[er>>>24]<<24|ir[Dt>>>16&255]<<16|ir[lr>>>8&255]<<8|ir[255&sr])^Ve[cr++],de[_e]=hr,de[_e+1]=pr,de[_e+2]=Tr,de[_e+3]=Pr},keySize:8});g.AES=y._createHelper(Ue)}(),n.AES)},function(t,r){},function(t,r,e){var n;t.exports=(n=e(94),function(g){var y=n,i=y.lib,k=i.WordArray,$=i.Hasher,L=y.algo,V=[];(function(){for(var oe=0;oe<64;oe++)V[oe]=4294967296*g.abs(g.sin(oe+1))|0})();var z=L.MD5=$.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(oe,ae){for(var Ue=0;Ue<16;Ue++){var de=ae+Ue,_e=oe[de];oe[de]=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8)}var Ve=this._hash.words,$e=oe[ae+0],Lt=oe[ae+1],jt=oe[ae+2],Et=oe[ae+3],ir=oe[ae+4],ur=oe[ae+5],Dt=oe[ae+6],lr=oe[ae+7],sr=oe[ae+8],er=oe[ae+9],cr=oe[ae+10],or=oe[ae+11],hr=oe[ae+12],pr=oe[ae+13],Tr=oe[ae+14],Pr=oe[ae+15],_r=Ve[0],Mr=Ve[1],rr=Ve[2],kr=Ve[3];_r=re(_r,Mr,rr,kr,$e,7,V[0]),kr=re(kr,_r,Mr,rr,Lt,12,V[1]),rr=re(rr,kr,_r,Mr,jt,17,V[2]),Mr=re(Mr,rr,kr,_r,Et,22,V[3]),_r=re(_r,Mr,rr,kr,ir,7,V[4]),kr=re(kr,_r,Mr,rr,ur,12,V[5]),rr=re(rr,kr,_r,Mr,Dt,17,V[6]),Mr=re(Mr,rr,kr,_r,lr,22,V[7]),_r=re(_r,Mr,rr,kr,sr,7,V[8]),kr=re(kr,_r,Mr,rr,er,12,V[9]),rr=re(rr,kr,_r,Mr,cr,17,V[10]),Mr=re(Mr,rr,kr,_r,or,22,V[11]),_r=re(_r,Mr,rr,kr,hr,7,V[12]),kr=re(kr,_r,Mr,rr,pr,12,V[13]),rr=re(rr,kr,_r,Mr,Tr,17,V[14]),_r=ie(_r,Mr=re(Mr,rr,kr,_r,Pr,22,V[15]),rr,kr,Lt,5,V[16]),kr=ie(kr,_r,Mr,rr,Dt,9,V[17]),rr=ie(rr,kr,_r,Mr,or,14,V[18]),Mr=ie(Mr,rr,kr,_r,$e,20,V[19]),_r=ie(_r,Mr,rr,kr,ur,5,V[20]),kr=ie(kr,_r,Mr,rr,cr,9,V[21]),rr=ie(rr,kr,_r,Mr,Pr,14,V[22]),Mr=ie(Mr,rr,kr,_r,ir,20,V[23]),_r=ie(_r,Mr,rr,kr,er,5,V[24]),kr=ie(kr,_r,Mr,rr,Tr,9,V[25]),rr=ie(rr,kr,_r,Mr,Et,14,V[26]),Mr=ie(Mr,rr,kr,_r,sr,20,V[27]),_r=ie(_r,Mr,rr,kr,pr,5,V[28]),kr=ie(kr,_r,Mr,rr,jt,9,V[29]),rr=ie(rr,kr,_r,Mr,lr,14,V[30]),_r=ue(_r,Mr=ie(Mr,rr,kr,_r,hr,20,V[31]),rr,kr,ur,4,V[32]),kr=ue(kr,_r,Mr,rr,sr,11,V[33]),rr=ue(rr,kr,_r,Mr,or,16,V[34]),Mr=ue(Mr,rr,kr,_r,Tr,23,V[35]),_r=ue(_r,Mr,rr,kr,Lt,4,V[36]),kr=ue(kr,_r,Mr,rr,ir,11,V[37]),rr=ue(rr,kr,_r,Mr,lr,16,V[38]),Mr=ue(Mr,rr,kr,_r,cr,23,V[39]),_r=ue(_r,Mr,rr,kr,pr,4,V[40]),kr=ue(kr,_r,Mr,rr,$e,11,V[41]),rr=ue(rr,kr,_r,Mr,Et,16,V[42]),Mr=ue(Mr,rr,kr,_r,Dt,23,V[43]),_r=ue(_r,Mr,rr,kr,er,4,V[44]),kr=ue(kr,_r,Mr,rr,hr,11,V[45]),rr=ue(rr,kr,_r,Mr,Pr,16,V[46]),_r=le(_r,Mr=ue(Mr,rr,kr,_r,jt,23,V[47]),rr,kr,$e,6,V[48]),kr=le(kr,_r,Mr,rr,lr,10,V[49]),rr=le(rr,kr,_r,Mr,Tr,15,V[50]),Mr=le(Mr,rr,kr,_r,ur,21,V[51]),_r=le(_r,Mr,rr,kr,hr,6,V[52]),kr=le(kr,_r,Mr,rr,Et,10,V[53]),rr=le(rr,kr,_r,Mr,cr,15,V[54]),Mr=le(Mr,rr,kr,_r,Lt,21,V[55]),_r=le(_r,Mr,rr,kr,sr,6,V[56]),kr=le(kr,_r,Mr,rr,Pr,10,V[57]),rr=le(rr,kr,_r,Mr,Dt,15,V[58]),Mr=le(Mr,rr,kr,_r,pr,21,V[59]),_r=le(_r,Mr,rr,kr,ir,6,V[60]),kr=le(kr,_r,Mr,rr,or,10,V[61]),rr=le(rr,kr,_r,Mr,jt,15,V[62]),Mr=le(Mr,rr,kr,_r,er,21,V[63]),Ve[0]=Ve[0]+_r|0,Ve[1]=Ve[1]+Mr|0,Ve[2]=Ve[2]+rr|0,Ve[3]=Ve[3]+kr|0},_doFinalize:function(){var oe=this._data,ae=oe.words,Ue=8*this._nDataBytes,de=8*oe.sigBytes;ae[de>>>5]|=128<<24-de%32;var _e=g.floor(Ue/4294967296),Ve=Ue;ae[15+(de+64>>>9<<4)]=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8),ae[14+(de+64>>>9<<4)]=16711935&(Ve<<8|Ve>>>24)|4278255360&(Ve<<24|Ve>>>8),oe.sigBytes=4*(ae.length+1),this._process();for(var $e=this._hash,Lt=$e.words,jt=0;jt<4;jt++){var Et=Lt[jt];Lt[jt]=16711935&(Et<<8|Et>>>24)|4278255360&(Et<<24|Et>>>8)}return $e},clone:function(){var oe=$.clone.call(this);return oe._hash=this._hash.clone(),oe}});function re(oe,ae,Ue,de,_e,Ve,$e){var Lt=oe+(ae&Ue|~ae&de)+_e+$e;return(Lt<<Ve|Lt>>>32-Ve)+ae}function ie(oe,ae,Ue,de,_e,Ve,$e){var Lt=oe+(ae&de|Ue&~de)+_e+$e;return(Lt<<Ve|Lt>>>32-Ve)+ae}function ue(oe,ae,Ue,de,_e,Ve,$e){var Lt=oe+(ae^Ue^de)+_e+$e;return(Lt<<Ve|Lt>>>32-Ve)+ae}function le(oe,ae,Ue,de,_e,Ve,$e){var Lt=oe+(Ue^(ae|~de))+_e+$e;return(Lt<<Ve|Lt>>>32-Ve)+ae}y.MD5=$._createHelper(z),y.HmacMD5=$._createHmacHelper(z)}(Math),n.MD5)},function(t,r,e){var n,g,y,i,k,$,L,V;t.exports=(V=e(94),g=(n=V).lib,y=g.WordArray,i=g.Hasher,k=n.algo,$=[],L=k.SHA1=i.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,re){for(var ie=this._hash.words,ue=ie[0],le=ie[1],oe=ie[2],ae=ie[3],Ue=ie[4],de=0;de<80;de++){if(de<16)$[de]=0|z[re+de];else{var _e=$[de-3]^$[de-8]^$[de-14]^$[de-16];$[de]=_e<<1|_e>>>31}var Ve=(ue<<5|ue>>>27)+Ue+$[de];Ve+=de<20?1518500249+(le&oe|~le&ae):de<40?1859775393+(le^oe^ae):de<60?(le&oe|le&ae|oe&ae)-1894007588:(le^oe^ae)-899497514,Ue=ae,ae=oe,oe=le<<30|le>>>2,le=ue,ue=Ve}ie[0]=ie[0]+ue|0,ie[1]=ie[1]+le|0,ie[2]=ie[2]+oe|0,ie[3]=ie[3]+ae|0,ie[4]=ie[4]+Ue|0},_doFinalize:function(){var z=this._data,re=z.words,ie=8*this._nDataBytes,ue=8*z.sigBytes;return re[ue>>>5]|=128<<24-ue%32,re[14+(ue+64>>>9<<4)]=Math.floor(ie/4294967296),re[15+(ue+64>>>9<<4)]=ie,z.sigBytes=4*re.length,this._process(),this._hash},clone:function(){var z=i.clone.call(this);return z._hash=this._hash.clone(),z}}),n.SHA1=i._createHelper(L),n.HmacSHA1=i._createHmacHelper(L),V.SHA1)},function(t,r,e){var n,g,y,i;t.exports=(n=e(94),y=(g=n).lib.Base,i=g.enc.Utf8,void(g.algo.HMAC=y.extend({init:function(k,$){k=this._hasher=new k.init,typeof $=="string"&&($=i.parse($));var L=k.blockSize,V=4*L;$.sigBytes>V&&($=k.finalize($)),$.clamp();for(var z=this._oKey=$.clone(),re=this._iKey=$.clone(),ie=z.words,ue=re.words,le=0;le<L;le++)ie[le]^=1549556828,ue[le]^=909522486;z.sigBytes=re.sigBytes=V,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var $=this._hasher,L=$.finalize(k);return $.reset(),$.finalize(this._oKey.clone().concat(L))}})))},function(t,r,e){var n,g;t.exports=(g=e(94),e(313),g.mode.ECB=((n=g.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(y,i){this._cipher.encryptBlock(y,i)}}),n.Decryptor=n.extend({processBlock:function(y,i){this._cipher.decryptBlock(y,i)}}),n),g.mode.ECB)},function(t,r,e){var n;t.exports=(n=e(94),e(313),n.pad.Pkcs7)},function(t,r,e){var n;t.exports=(n=e(94),n.enc.Utf8)},function(t,r,e){var n=e(10),g=e(198).fn,y=e(312);g.onChatroomMembersInfo=g.onChatroomMembers=function(i){i.error||(i.obj.members=y.reverseMembers(i.content.members))},g.onGetChatroomMemberCountByTag=function(i){i.error||(i.obj=i.content)},g.onMarkChatroomMember=function(i){i.error||(i.obj.member=n(y).call(y,i.content.chatroomMember))},g.onSyncRobot=function(i){!i.error&&this.options.onrobots?this.options.onrobots(null,i.content):this.ontions.onrobots(i.error,{})}},function(t,r,e){var n=e(10),g=e(9),y=e(0),i=function(oe){this.account=oe.account},k=i.prototype,$=k.Message=e(119),L=k.TextMessage=e(901),V=k.FileMessage=e(206),z=k.GeoMessage=e(905),re=k.NotificationMessage=e(906),ie=k.CustomMessage=e(907),ue=k.TipMessage=e(908),le=k.RobotMessage=e(909);k.validTypes=$.validTypes,k.reverse=function(oe){var ae;switch($.getType(oe)){case"text":ae=n(L).call(L,oe);break;case"image":case"audio":case"video":case"file":ae=n(V).call(V,oe);break;case"geo":ae=n(z).call(z,oe);break;case"notification":ae=n(re).call(re,oe);break;case"custom":ae=n(ie).call(ie,oe);break;case"tip":ae=n(ue).call(ue,oe);break;case"robot":ae=n(le).call(le,oe);break;default:ae=n($).call($,oe)}return $.setExtra(ae,this.account),ae},k.reverseMsgs=function(oe,ae){var Ue,de,_e=this;return g(oe).call(oe,function(Ve){return Ve=n(_e).call(_e,Ve),ae&&((Ue=ae.modifyObj)&&(Ve=y.merge(Ve,Ue)),de=ae.mapper,y.isFunction(de)&&(Ve=de(Ve))),Ve})},t.exports=i},function(t,r,e){var n=e(18),g=e(10),y=e(119),i=e(0);function k($){i.verifyOptions($,"text","msg::TextMessage"),$.type="text",y.call(this,$),this.attach=$.text,this.body=""}k.prototype=n(y.prototype),k.reverse=function($){var L=g(y).call(y,$);return L.text=$.attach,L},t.exports=k},function(t,r,e){var n=e(18),g=e(0),y=e(206);function i(){}i.prototype=n(y.prototype),i.verifyFile=function(k,$){g.verifyOptions(k,"w h",!0,"file.",$)},t.exports=i},function(t,r,e){var n=e(18),g=e(206),y=e(0);function i(){}i.prototype=n(g.prototype),i.verifyFile=function(k,$){y.verifyOptions(k,"dur",!0,"file.",$)},t.exports=i},function(t,r,e){var n=e(18),g=e(206),y=e(0);function i(){}i.prototype=n(g.prototype),i.verifyFile=function(k,$){y.verifyOptions(k,"dur w h",!0,"file.",$)},t.exports=i},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(119),k=e(0);function $(L){L.type="geo",k.verifyOptions(L,"geo","msg::GeoMessage"),k.verifyOptions(L.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),k.verifyParamType("geo.lng",L.geo.lng,"number","msg::GeoMessage"),k.verifyParamType("geo.lat",L.geo.lat,"number","msg::GeoMessage"),k.verifyParamType("geo.title",L.geo.title,"string","msg::GeoMessage"),i.call(this,L),this.attach=n(L.geo)}$.prototype=g(i.prototype),$.reverse=function(L){var V=y(i).call(i,L);return L.attach=L.attach?""+L.attach:"",V.geo=L.attach?JSON.parse(L.attach):{},V},t.exports=$},function(t,r,e){var n=e(18),g=e(10),y=e(48),i=e(0).notundef,k=e(119),$={301:"memberEnter",302:"memberExit",303:"blackMember",304:"unblackMember",305:"gagMember",306:"ungagMember",307:"addManager",308:"removeManager",309:"addCommon",310:"removeCommon",311:"closeChatroom",312:"updateChatroom",313:"kickMember",314:"addTempMute",315:"removeTempMute",316:"updateMemberInfo",317:"updateQueue",318:"muteRoom",319:"unmuteRoom",320:"batchUpdateQueue",321:"addTempMuteTag",322:"removeTempMuteTag",324:"batchQueueOffer",323:"deleteChatroomMsg",325:"updateChatroomTags"};function L(){}L.prototype=n(k.prototype),L.reverse=function(V){var z=g(k).call(k,V);if(V.attach=V.attach?""+V.attach:"",V.attach){var re=JSON.parse(V.attach);if(z.attach={type:$[re.id]},i(re.data)){var ie=re.data;if(i(ie.operator)&&(z.attach.from=ie.operator),i(ie.opeNick)&&(z.attach.fromNick=ie.opeNick),i(ie.target)&&(z.attach.to=ie.target),i(ie.tarNick)&&(z.attach.toNick=ie.tarNick),i(ie.muteDuration)&&(z.attach.duration=y(ie.muteDuration,10)),i(ie.tags)&&(z.attach.tags=ie.tags),z.attach.type==="memberEnter"&&(i(ie.muted)?z.attach.gaged=+ie.muted==1:z.attach.gaged=!1,i(ie.tempMuted)?z.attach.tempMuted=+ie.tempMuted==1:z.attach.tempMuted=!1,i(ie.muteTtl)?z.attach.tempMuteDuration=+ie.muteTtl:z.attach.tempMuteDuration=0),z.attach.type==="deleteChatroomMsg"&&(z.attach.msgId=ie.msgId,z.attach.msgTime=ie.msgTime),i(ie.ext)&&(z.attach.custom=ie.ext),i(ie.queueChange)){var ue=JSON.parse(ie.queueChange);switch(ue._e){case"OFFER":z.attach.queueChange={type:"OFFER",elementKey:ue.key,elementValue:ue.content};break;case"POLL":z.attach.queueChange={type:"POLL",elementKey:ue.key,elementValue:ue.content};break;case"DROP":z.attach.queueChange={type:"DROP"};break;case"PARTCLEAR":case"BATCH_UPDATE":z.attach.queueChange={type:ue._e,elementKv:ue.kvObject};break;case"BATCH_OFFER":z.attach.queueChange={type:ue._e,elements:ue.elements}}}}}else z.attach={};return z},t.exports=L},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(119),k=e(0);function $(L){k.verifyOptions(L,"content","msg::CustomMessage"),L.type="custom",i.call(this,L),typeof L.content!="string"&&(L.content=n(L.content)),this.attach=L.content}$.prototype=g(i.prototype),$.reverse=function(L){var V=y(i).call(i,L);return V.content=L.attach,V},t.exports=$},function(t,r,e){var n=e(18),g=e(10),y=e(119),i=e(0);function k($){i.verifyOptions($,"tip","msg::TipMessage"),$.type="tip",y.call(this,$),this.attach=$.tip}k.prototype=n(y.prototype),k.reverse=function($){var L=g(y).call(y,$);return L.tip=$.attach,L},t.exports=k},function(t,r,e){var n=e(8),g=e(18),y=e(10),i=e(9),k=e(119),$=e(0),L={welcome:"00",text:"01",link:"03"},V={"01":"text","02":"image","03":"answer",11:"template"};function z(re){$.verifyOptions(re,"content","msg::RobotMessage");var ie=re.content;switch(ie.type){case"welcome":$.undef(re.body)&&(this.body="");break;case"text":$.verifyOptions(ie,"content","msg::RobotMessage"),$.undef(re.body)&&(this.body=ie.content);break;case"link":$.verifyOptions(ie,"target","msg::RobotMessage")}ie.type&&(ie.type=L[ie.type]),ie={param:ie,robotAccid:re.robotAccid},this.attach=n(ie),re.type="robot",k.call(this,re)}z.prototype=g(k.prototype),z.reverse=function(re){var ie=y(k).call(k,re);if(ie.type==="robot"){var ue=JSON.parse(re.attach);if(ue.param&&(ue.param.type=V[ue.param.type]||"unknown"),ue.robotMsg){var le=(ue=$.merge(ue,ue.robotMsg)).message;ue.flag==="bot"?ue.message=i(le).call(le,function(oe){return oe.type=V[oe.type]||"unknown",oe}):ue.flag,delete ue.robotMsg}ie.content=ue}return ie},t.exports=z},function(t,r,e){var n=e(10),g=e(32),y=e(9),i=e(16),k=e(8),$=e(0),L=$.undef,V=e(197).fn,z=e(25).reportAPI;V.beforeSendMsg=function(ie){ie.cmd="sendMsg"};var re={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};V.getHistoryMsgs=function(ie){if((ie=ie||{}).done=z({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgs",done:ie.done}),$.verifyOptions(ie),L(ie.timetag)?ie.timetag=0:$.verifyParamType("timetag",ie.timetag,"number","msg::getHistoryMsgs"),L(ie.limit)?ie.limit=100:$.verifyParamType("limit",ie.limit,"number","msg::getHistoryMsgs"),L(n(ie))?ie.reverse=!1:$.verifyParamType("reverse",n(ie),"boolean","msg::getHistoryMsgs"),L(ie.msgTypes))ie.msgTypes=[];else if(g(ie.msgTypes)){var ue,le;ie.msgTypes=y(ue=ie.msgTypes).call(ue,function(oe){return re[oe]}),ie.msgTypes=i(le=ie.msgTypes).call(le,function(oe){return typeof oe=="number"})}else typeof re[ie.msgTypes]=="number"?ie.msgTypes=[re[ie.msgTypes]]:ie.msgTypes=[];this.processCallback(ie),this.sendCmd("getHistoryMsgs",ie,function(oe,ae,Ue){g(Ue)&&(Ue=y(Ue).call(Ue,function(de){return re[de.type]&&(de.type=re[de.type]),de})),ie.callback(oe,ae,Ue)})},V.getHistoryMsgsByTags=function(ie){if((ie=ie||{}).done=z({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgsByTags",done:ie.done}),$.verifyOptions(ie,"tags","api::msg::getHistoryMsgsByTags"),$.verifyParamType("tags",ie.tags,"array","api::msg::getHistoryMsgsByTags"),L(ie.fromTime)?ie.fromTime=0:$.verifyParamType("fromTime",ie.fromTime,"number","api::msg::getHistoryMsgsByTags"),L(ie.toTime)?ie.toTime=0:$.verifyParamType("toTime",ie.toTime,"number","api::msg::getHistoryMsgsByTags"),L(ie.limit)?ie.limit=100:$.verifyParamType("limit",ie.limit,"number","msg::getHistoryMsgs"),L(n(ie))?ie.reverse=0:$.verifyParamType("reverse",n(ie),"number","msg::getHistoryMsgs"),L(ie.types))ie.types=[];else if(g(ie.types)){var ue,le;ie.types=y(ue=ie.types).call(ue,function(oe){return re[oe]}),ie.types=i(le=ie.types).call(le,function(oe){return typeof oe=="number"})}else typeof re[ie.types]=="number"?ie.types=[re[ie.types]]:ie.types=[];this.processCallback(ie),ie.types=k(ie.types),ie.tags=k(ie.tags),this.sendCmd("getHistoryMsgsByTags",{chatRoomTagHistoryMsgRequestTag:ie},ie.callback)}},function(t,r,e){var n=e(197).fn,g=e(25).reportAPI;n.disconnect=function(y){(y=y||{}).done=g({instance:this,className:"ChatroomFn",funcName:"disconnect",done:y.done}),this.protocol.disconnect(y.done)}},function(t,r,e){var n=e(0),g=n.undef,y=n.verifyOptions,i=n.verifyParamType,k=e(312),$=e(197).fn,L=e(25).reportAPI;$.updateMyChatroomMemberInfo=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"updateMyChatroomMemberInfo",done:V.done}),y(V,"member needNotify","member::updateMyChatroomMemberInfo"),i("needNotify",V.needNotify,"boolean","member::updateMyChatroomMemberInfo"),V.needSave=V.needSave||!1,i("needSave",V.needSave,"boolean","member::updateMyChatroomMemberInfo"),this.processCustom(V),this.processCallback(V),V.chatroomMember=new k(V.member),V.antispamTag={antiSpamBusinessId:V.antiSpamBusinessId},this.sendCmd("updateMyChatroomMemberInfo",V)},$.getChatroomMembers=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"getChatroomMembers",done:V.done}),y(V,"guest","member::getChatroomMembers"),i("guest",V.guest,"boolean","member::getChatroomMembers"),g(V.time)?V.time=0:i("time",V.time,"number","member::getChatroomMembers"),g(V.limit)?V.limit=100:i("limit",V.limit,"number","member::getChatroomMembers"),this.processCallback(V),V.guest?V.type=V.desc===!1?3:1:V.type=V.onlyOnline?2:0,this.sendCmd("getChatroomMembers",V)},$.getChatroomMembersByTag=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersByTag",done:V.done}),y(V,"tag","getChatroomMembersByTag::rag"),g(V.time)?V.time=0:i("time",V.time,"number","getChatroomMembersByTag::time"),g(V.limit)?V.limit=100:i("limit",V.limit,"number","getChatroomMembersByTag::limit"),this.processCallback(V),this.sendCmd("getChatroomMembersByTag",{tagMemberReq:n.filterObj(V,"tag limit time"),callback:V.callback})},$.getChatroomMemberCountByTag=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"getChatroomMemberCountByTag",done:V.done}),y(V,"tag","getChatroomMemberCountByTag::rag"),this.processCallback(V),this.sendCmd("getChatroomMemberCountByTag",V)},$.getChatroomMembersInfo=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersInfo",done:V.done}),y(V,"accounts","member::getChatroomMembersInfo"),i("accounts",V.accounts,"array","member::getChatroomMembersInfo"),this.processCallback(V),this.sendCmd("getChatroomMembersInfo",V)},$.markChatroomIdentity=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"markChatroomIdentity",done:V.done}),y(V,"identity","member::markChatroomIdentity"),V.type={manager:1,common:2,black:-1,mute:-2}[V.identity],delete V.identity,isNaN(V.type)?y(V,"identity",'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".'):this.markChatroomMember(V)},$.markChatroomManager=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"markChatroomManager",done:V.done}),V.type=1,this.markChatroomMember(V)},$.markChatroomCommonMember=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"markChatroomCommonMember",done:V.done}),V.type=2,this.markChatroomMember(V)},$.markChatroomBlacklist=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"markChatroomBlacklist",done:V.done}),V.type=-1,this.markChatroomMember(V)},$.markChatroomGaglist=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"markChatroomGaglist",done:V.done}),V.type=-2,this.markChatroomMember(V)},$.markChatroomMember=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"markChatroomMember",done:V.done}),y(V,"account type isAdd","member::markChatroomMember"),i("isAdd",V.isAdd,"boolean","member::markChatroomMember"),g(V.level)?V.level=0:i("level",V.level,"number","member::markChatroomMember"),this.processCustom(V),this.processCallback(V),this.sendCmd("markChatroomMember",V)},$.kickChatroomMember=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"kickChatroomMember",done:V.done}),y(V,"account","member::kickChatroomMember"),this.processCustom(V),this.processCallback(V),this.sendCmd("kickChatroomMember",V)},$.updateChatroomMemberTempMute=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"updateChatroomMemberTempMute",done:V.done}),y(V,"account duration needNotify","member::updateChatroomMemberTempMute"),i("duration",V.duration,"number","member::updateChatroomMemberTempMute"),i("needNotify",V.needNotify,"boolean","member::updateChatroomMemberTempMute"),this.processCustom(V),this.processCallback(V),this.sendCmd("updateChatroomMemberTempMute",V)},$.updateTagMembersTempMute=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"updateTagMembersTempMute",done:V.done}),y(V,"tag duration needNotify","member::updateTagMembersTempMute"),i("duration",V.duration,"number","member::updateTagMembersTempMute"),i("needNotify",V.needNotify,"boolean","member::updateTagMembersTempMute"),this.processCustom(V),this.processCallback(V);var z=n.filterObj(V,"tag duration custom notifyTargetTags");z.needNotify=V.needNotify?1:0,this.sendCmd("updateTagMembersTempMute",{tagMuteReq:z,callback:V.callback})},$.updateCoordinate=n.throttle(function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"updateCoordinate",done:V.done});var z=!0;V.x===void 0||V.y===void 0||V.z===void 0?z=!1:(typeof V.x!="number"&&(V.x=0),typeof V.y!="number"&&(V.y=0),typeof V.z!="number"&&(V.z=0)),this.processCallback(V);var re=n.filterObj(V,z?"x y z distance":"distance");this.sendCmd("updateCoordinate",{coordinateReq:re,callback:V.callback})},300,{},function(V){V&&V.done&&V.done({code:416,chatroomId:this.options.chatroomId})}),$.getRobotList=function(V){(V=V||{}).done=L({instance:this,className:"ChatroomFn",funcName:"getRobotList",done:V.done}),this.logger.warn("this api will be abandon"),g(V.timetag)&&(V.timetag=0),this.processCallback(V),this.sendCmd("syncRobot",V)}},function(t,r,e){var n=e(197).fn,g=e(0),y=e(25).reportAPI;n.queueOffer=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueOffer",done:i.done}),g.verifyOptions(i,"elementKey elementValue","msg::queueOffer");var k={elementKey:i.elementKey,elementValue:i.elementValue,transient:!!i.transient};i.elementAccount&&(k.elementAccount=i.elementAccount),this.processCallback(i),this.sendCmd("queueOffer",k,i.callback)},n.queuePoll=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queuePoll",done:i.done}),i.elementKey=i.elementKey||"",this.processCallback(i),this.sendCmd("queuePoll",i,i.callback)},n.queueList=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueList",done:i.done}),this.processCallback(i),this.sendCmd("queueList",i,i.callback)},n.peak=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"peak",done:i.done}),this.processCallback(i),this.sendCmd("peak",i,i.callback)},n.queueDrop=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueDrop",done:i.done}),this.processCallback(i),this.sendCmd("queueDrop",i,i.callback)},n.queueChange=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueChange",done:i.done}),g.verifyOptions(i,"elementMap","msg::queueOffer"),i.needNotify?(i.needNotify=!0,g.verifyOptions(i,"notifyExt","msg::queueOffer")):i.needNotify=!1,this.processCallback(i),this.sendCmd("queueChange",i,i.callback)}},,,function(t,r,e){t.exports=e(917)},function(t,r,e){e(299);var n={NIM:e(770),Chatroom:e(887)};e(311)(n),t.exports=n}])})})(NIM_Web_SDK);var NIM_Web_SDKExports=NIM_Web_SDK.exports;const NIM_SDK=getDefaultExportFromCjs(NIM_Web_SDKExports);class NimChatroomSocket{constructor(r){Eu(this,"liveId");Eu(this,"nimChatroomSocket");Eu(this,"onMessage");Eu(this,"handleRoomSocketMessage",r=>{this.onMessage(this,r)});Eu(this,"onConnet",r=>{let e="";console.log(e),logApi().addSystem(e)});Eu(this,"handleRoomSocketError",(r,e)=>{console.log("",r,e),logApi().addSystem(""+r)});Eu(this,"handleRoomSocketDisconnect",r=>{console.log("",r),logApi().addSystem("")});this.liveId=r.liveId,this.onMessage=r.onMessage}init(r){this.nimChatroomSocket=NIM_SDK.Chatroom.getInstance({appKey:atob(r),chatroomId:this.liveId,chatroomAddresses:["chatweblink01.netease.im:443"],onconnect:this.onConnet,onmsgs:this.handleRoomSocketMessage,onerror:this.handleRoomSocketError,ondisconnect:this.handleRoomSocketDisconnect,isAnonymous:!0,chatroomNick:this.uuid(),chatroomAvatar:"",db:!1,dbLog:!1})}disconnect(){var r,e;(e=(r=this.nimChatroomSocket)==null?void 0:r.disconnect)==null||e.call(r,{done(){}}),this.nimChatroomSocket=void 0}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,n=r==="x"?e:e&3|8;return n.toString(16)})}}var QCHAT_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(pe){return pe&&pe.__esModule&&Object.prototype.hasOwnProperty.call(pe,"default")?pe.default:pe}function g(pe){var Ie={exports:{}};return pe(Ie,Ie.exports),Ie.exports}var y,i,k=n(g(function(pe){pe.exports=function(ze){if(ze===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ze},pe.exports.__esModule=!0,pe.exports.default=pe.exports})),$=function(pe){return pe&&pe.Math==Math&&pe},L=$(typeof globalThis=="object"&&globalThis)||$(typeof window=="object"&&window)||$(typeof self=="object"&&self)||$(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),V=function(pe){try{return!!pe()}catch{return!0}},z=!V(function(){var pe=(function(){}).bind();return typeof pe!="function"||pe.hasOwnProperty("prototype")}),re=Function.prototype,ie=re.apply,ue=re.call,le=typeof Reflect=="object"&&Reflect.apply||(z?ue.bind(ie):function(){return ue.apply(ie,arguments)}),oe=Function.prototype,ae=oe.bind,Ue=oe.call,de=z&&ae.bind(Ue,Ue),_e=z?function(pe){return pe&&de(pe)}:function(pe){return pe&&function(){return Ue.apply(pe,arguments)}},Ve=function(pe){return typeof pe=="function"},$e=!V(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Lt=Function.prototype.call,jt=z?Lt.bind(Lt):function(){return Lt.apply(Lt,arguments)},Et={}.propertyIsEnumerable,ir=Object.getOwnPropertyDescriptor,ur={f:ir&&!Et.call({1:2},1)?function(Ie){var ze=ir(this,Ie);return!!ze&&ze.enumerable}:Et},Dt=function(pe,Ie){return{enumerable:!(1&pe),configurable:!(2&pe),writable:!(4&pe),value:Ie}},lr=_e({}.toString),sr=_e("".slice),er=function(pe){return sr(lr(pe),8,-1)},cr=Object,or=_e("".split),hr=V(function(){return!cr("z").propertyIsEnumerable(0)})?function(pe){return er(pe)=="String"?or(pe,""):cr(pe)}:cr,pr=function(pe){return pe==null},Tr=TypeError,Pr=function(pe){if(pr(pe))throw Tr("Can't call method on "+pe);return pe},_r=function(pe){return hr(Pr(pe))},Mr=typeof document=="object"&&document.all,rr=Mr===void 0&&Mr!==void 0?function(pe){return typeof pe=="object"?pe!==null:Ve(pe)||pe===Mr}:function(pe){return typeof pe=="object"?pe!==null:Ve(pe)},kr={},Er=function(pe){return Ve(pe)?pe:void 0},xr=function(pe,Ie){return arguments.length<2?Er(kr[pe])||Er(L[pe]):kr[pe]&&kr[pe][Ie]||L[pe]&&L[pe][Ie]},vr=_e({}.isPrototypeOf),Ir=xr("navigator","userAgent")||"",Or=L.process,Cr=L.Deno,yr=Or&&Or.versions||Cr&&Cr.version,fr=yr&&yr.v8;fr&&(i=(y=fr.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!i&&Ir&&(!(y=Ir.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=Ir.match(/Chrome\/(\d+)/))&&(i=+y[1]);var Sr,Br=i,$r=!!Object.getOwnPropertySymbols&&!V(function(){var pe=Symbol();return!String(pe)||!(Object(pe)instanceof Symbol)||!Symbol.sham&&Br&&Br<41}),Lr=$r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Gr=Object,qr=Lr?function(pe){return typeof pe=="symbol"}:function(pe){var Ie=xr("Symbol");return Ve(Ie)&&vr(Ie.prototype,Gr(pe))},Yr=String,bn=function(pe){try{return Yr(pe)}catch{return"Object"}},wn=TypeError,Xr=function(pe){if(Ve(pe))return pe;throw wn(bn(pe)+" is not a function")},qn=function(pe,Ie){var ze=pe[Ie];return pr(ze)?void 0:Xr(ze)},Zr=TypeError,Nn=Object.defineProperty,Qr="__core-js_shared__",Mn=L[Qr]||function(pe,Ie){try{Nn(L,pe,{value:Ie,configurable:!0,writable:!0})}catch{L[pe]=Ie}return Ie}(Qr,{}),Ln=g(function(pe){(pe.exports=function(Ie,ze){return Mn[Ie]||(Mn[Ie]=ze!==void 0?ze:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),xn=Object,Pn=function(pe){return xn(Pr(pe))},vn=_e({}.hasOwnProperty),hn=Object.hasOwn||function(Ie,ze){return vn(Pn(Ie),ze)},Zn=0,Oo=Math.random(),Ho=_e(1 .toString),Do=function(pe){return"Symbol("+(pe===void 0?"":pe)+")_"+Ho(++Zn+Oo,36)},Eo=Ln("wks"),Ko=L.Symbol,Ha=Ko&&Ko.for,Ts=Lr?Ko:Ko&&Ko.withoutSetter||Do,To=function(pe){if(!hn(Eo,pe)||!$r&&typeof Eo[pe]!="string"){var Ie="Symbol."+pe;$r&&hn(Ko,pe)?Eo[pe]=Ko[pe]:Eo[pe]=Lr&&Ha?Ha(Ie):Ts(Ie)}return Eo[pe]},Os=TypeError,to=To("toPrimitive"),ha=function(pe,Ie){if(!rr(pe)||qr(pe))return pe;var ze,Oe=qn(pe,to);if(Oe){if(Ie===void 0&&(Ie="default"),ze=jt(Oe,pe,Ie),!rr(ze)||qr(ze))return ze;throw Os("Can't convert object to primitive value")}return Ie===void 0&&(Ie="number"),function(Ne,At){var nr,kt;if(At==="string"&&Ve(nr=Ne.toString)&&!rr(kt=jt(nr,Ne))||Ve(nr=Ne.valueOf)&&!rr(kt=jt(nr,Ne))||At!=="string"&&Ve(nr=Ne.toString)&&!rr(kt=jt(nr,Ne)))return kt;throw Zr("Can't convert object to primitive value")}(pe,Ie)},ca=function(pe){var Ie=ha(pe,"string");return qr(Ie)?Ie:Ie+""},La=L.document,Ka=rr(La)&&rr(La.createElement),Zo=function(pe){return Ka?La.createElement(pe):{}},ko=!$e&&!V(function(){return Object.defineProperty(Zo("div"),"a",{get:function(){return 7}}).a!=7}),za=Object.getOwnPropertyDescriptor,Qa={f:$e?za:function(Ie,ze){if(Ie=_r(Ie),ze=ca(ze),ko)try{return za(Ie,ze)}catch{}if(hn(Ie,ze))return Dt(!jt(ur.f,Ie,ze),Ie[ze])}},Hc=/#|\.prototype\./,Rs=function(pe,Ie){var ze=Xn[Rn(pe)];return ze==Na||ze!=zo&&(Ve(Ie)?V(Ie):!!Ie)},Rn=Rs.normalize=function(pe){return String(pe).replace(Hc,".").toLowerCase()},Xn=Rs.data={},zo=Rs.NATIVE="N",Na=Rs.POLYFILL="P",vs=Rs,Us=_e(_e.bind),Go=function(pe,Ie){return Xr(pe),Ie===void 0?pe:z?Us(pe,Ie):function(){return pe.apply(Ie,arguments)}},Pi=$e&&V(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Ti=String,Mp=TypeError,po=function(pe){if(rr(pe))return pe;throw Mp(Ti(pe)+" is not an object")},wb=TypeError,Pu=Object.defineProperty,xb=Object.getOwnPropertyDescriptor,_b="enumerable",Ib="configurable",Eb="writable",Oa={f:$e?Pi?function(Ie,ze,Oe){if(po(Ie),ze=ca(ze),po(Oe),typeof Ie=="function"&&ze==="prototype"&&"value"in Oe&&Eb in Oe&&!Oe.writable){var Ne=xb(Ie,ze);Ne&&Ne.writable&&(Ie[ze]=Oe.value,Oe={configurable:Ib in Oe?Oe.configurable:Ne.configurable,enumerable:_b in Oe?Oe.enumerable:Ne.enumerable,writable:!1})}return Pu(Ie,ze,Oe)}:Pu:function(Ie,ze,Oe){if(po(Ie),ze=ca(ze),po(Oe),ko)try{return Pu(Ie,ze,Oe)}catch{}if("get"in Oe||"set"in Oe)throw wb("Accessors not supported");return"value"in Oe&&(Ie[ze]=Oe.value),Ie}},va=$e?function(pe,Ie,ze){return Oa.f(pe,Ie,Dt(1,ze))}:function(pe,Ie,ze){return pe[Ie]=ze,pe},Pb=Qa.f,Ab=function(pe){var Ie=function(ze,Oe,Ne){if(this instanceof Ie){switch(arguments.length){case 0:return new pe;case 1:return new pe(ze);case 2:return new pe(ze,Oe)}return new pe(ze,Oe,Ne)}return le(pe,this,arguments)};return Ie.prototype=pe.prototype,Ie},_n=function(pe,Ie){var ze,Oe,Ne,At,nr,kt,dr,gr,Ar=pe.target,Rr=pe.global,Ur=pe.stat,Dr=pe.proto,Jr=Rr?L:Ur?L[Ar]:(L[Ar]||{}).prototype,kn=Rr?kr:kr[Ar]||va(kr,Ar,{})[Ar],Tn=kn.prototype;for(Ne in Ie)ze=!vs(Rr?Ne:Ar+(Ur?".":"#")+Ne,pe.forced)&&Jr&&hn(Jr,Ne),nr=kn[Ne],ze&&(kt=pe.dontCallGetSet?(gr=Pb(Jr,Ne))&&gr.value:Jr[Ne]),At=ze&&kt?kt:Ie[Ne],ze&&typeof nr==typeof At||(dr=pe.bind&&ze?Go(At,L):pe.wrap&&ze?Ab(At):Dr&&Ve(At)?_e(At):At,(pe.sham||At&&At.sham||nr&&nr.sham)&&va(dr,"sham",!0),va(kn,Ne,dr),Dr&&(hn(kr,Oe=Ar+"Prototype")||va(kr,Oe,{}),va(kr[Oe],Ne,At),pe.real&&Tn&&!Tn[Ne]&&va(Tn,Ne,At)))},Nb=Math.ceil,Ob=Math.floor,Rb=Math.trunc||function(Ie){var ze=+Ie;return(ze>0?Ob:Nb)(ze)},uc=function(pe){var Ie=+pe;return Ie!=Ie||Ie===0?0:Rb(Ie)},Bb=Math.max,Fb=Math.min,Ai=function(pe,Ie){var ze=uc(pe);return ze<0?Bb(ze+Ie,0):Fb(ze,Ie)},$b=Math.min,Za=function(pe){return(Ie=pe.length)>0?$b(uc(Ie),9007199254740991):0;var Ie},Bf=function(pe){return function(Ie,ze,Oe){var Ne,At=_r(Ie),nr=Za(At),kt=Ai(Oe,nr);if(pe&&ze!=ze){for(;nr>kt;)if((Ne=At[kt++])!=Ne)return!0}else for(;nr>kt;kt++)if((pe||kt in At)&&At[kt]===ze)return pe||kt||0;return!pe&&-1}},Au={includes:Bf(!0),indexOf:Bf(!1)},Ni={},Lb=Au.indexOf,Ff=_e([].push),$f=function(pe,Ie){var ze,Oe=_r(pe),Ne=0,At=[];for(ze in Oe)!hn(Ni,ze)&&hn(Oe,ze)&&Ff(At,ze);for(;Ie.length>Ne;)hn(Oe,ze=Ie[Ne++])&&(~Lb(At,ze)||Ff(At,ze));return At},dl=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qs=Object.keys||function(Ie){return $f(Ie,dl)},jb=$e&&!Pi?Object.defineProperties:function(Ie,ze){po(Ie);for(var Oe,Ne=_r(ze),At=qs(ze),nr=At.length,kt=0;nr>kt;)Oa.f(Ie,Oe=At[kt++],Ne[Oe]);return Ie},Lf={f:jb},Nu=xr("document","documentElement"),jf=Ln("keys"),pl=function(pe){return jf[pe]||(jf[pe]=Do(pe))},Df=pl("IE_PROTO"),Ou=function(){},Uf=function(pe){return"<script>"+pe+"<\/script>"},qf=function(pe){pe.write(Uf("")),pe.close();var Ie=pe.parentWindow.Object;return pe=null,Ie},fl=function(){try{Sr=new ActiveXObject("htmlfile")}catch{}var pe,Ie;fl=typeof document<"u"?document.domain&&Sr?qf(Sr):((Ie=Zo("iframe")).style.display="none",Nu.appendChild(Ie),Ie.src="javascript:",(pe=Ie.contentWindow.document).open(),pe.write(Uf("document.F=Object")),pe.close(),pe.F):qf(Sr);for(var ze=dl.length;ze--;)delete fl.prototype[dl[ze]];return fl()};Ni[Df]=!0;var es=Object.create||function(Ie,ze){var Oe;return Ie!==null?(Ou.prototype=po(Ie),Oe=new Ou,Ou.prototype=null,Oe[Df]=Ie):Oe=fl(),ze===void 0?Oe:Lf.f(Oe,ze)};_n({target:"Object",stat:!0,sham:!$e},{create:es});var Db=kr.Object,Cs=function(Ie,ze){return Db.create(Ie,ze)},Ub=String,qb=TypeError,dc=Object.setPrototypeOf||("__proto__"in{}?function(){var pe,Ie=!1,ze={};try{(pe=_e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(ze,[]),Ie=ze instanceof Array}catch{}return function(Ne,At){return po(Ne),function(nr){if(typeof nr=="object"||Ve(nr))return nr;throw qb("Can't set "+Ub(nr)+" as a prototype")}(At),Ie?pe(Ne,At):Ne.__proto__=At,Ne}}():void 0);_n({target:"Object",stat:!0},{setPrototypeOf:dc});var si=kr.Object.setPrototypeOf,Vs=_e([].slice),Vf=Function,Vb=_e([].concat),Hb=_e([].join),Ru={},zb=function(pe,Ie,ze){if(!hn(Ru,Ie)){for(var Oe=[],Ne=0;Ne<Ie;Ne++)Oe[Ne]="a["+Ne+"]";Ru[Ie]=Vf("C,a","return new C("+Hb(Oe,",")+")")}return Ru[Ie](pe,ze)},Bu=z?Vf.bind:function(Ie){var ze=Xr(this),Oe=ze.prototype,Ne=Vs(arguments,1),At=function(){var kt=Vb(Ne,Vs(arguments));return this instanceof At?zb(ze,kt.length,kt):ze.apply(Ie,kt)};return rr(Oe)&&(At.prototype=Oe),At};_n({target:"Function",proto:!0,forced:Function.bind!==Bu},{bind:Bu});var sa=function(pe){return kr[pe+"Prototype"]},Wb=sa("Function").bind,Fu=Function.prototype,Xo=function(pe){var Ie=pe.bind;return pe===Fu||vr(Fu,pe)&&Ie===Fu.bind?Wb:Ie},$u=g(function(pe){function Ie(ze,Oe){var Ne;return pe.exports=Ie=si?Xo(Ne=si).call(Ne):function(nr,kt){return nr.__proto__=kt,nr},pe.exports.__esModule=!0,pe.exports.default=pe.exports,Ie(ze,Oe)}pe.exports=Ie,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),ea=n(g(function(pe){pe.exports=function(ze,Oe){ze.prototype=Cs(Oe.prototype),ze.prototype.constructor=ze,$u(ze,Oe)},pe.exports.__esModule=!0,pe.exports.default=pe.exports})),Ms=Array.isArray||function(Ie){return er(Ie)=="Array"},Gb=TypeError,Lu=function(pe){if(pe>9007199254740991)throw Gb("Maximum allowed index exceeded");return pe},ii=function(pe,Ie,ze){var Oe=ca(Ie);Oe in pe?Oa.f(pe,Oe,Dt(0,ze)):pe[Oe]=ze},Hf={};Hf[To("toStringTag")]="z";var ju=String(Hf)==="[object z]",Kb=To("toStringTag"),Qb=Object,Jb=er(function(){return arguments}())=="Arguments",ci=ju?er:function(pe){var Ie,ze,Oe;return pe===void 0?"Undefined":pe===null?"Null":typeof(ze=function(Ne,At){try{return Ne[At]}catch{}}(Ie=Qb(pe),Kb))=="string"?ze:Jb?er(Ie):(Oe=er(Ie))=="Object"&&Ve(Ie.callee)?"Arguments":Oe},Yb=_e(Function.toString);Ve(Mn.inspectSource)||(Mn.inspectSource=function(pe){return Yb(pe)});var zf=Mn.inspectSource,Wf=function(){},Xb=[],Gf=xr("Reflect","construct"),Du=/^\s*(?:class|function)\b/,Zb=_e(Du.exec),e0=!Du.exec(Wf),pc=function(Ie){if(!Ve(Ie))return!1;try{return Gf(Wf,Xb,Ie),!0}catch{return!1}},Kf=function(Ie){if(!Ve(Ie))return!1;switch(ci(Ie)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return e0||!!Zb(Du,zf(Ie))}catch{return!0}};Kf.sham=!0;var ml=!Gf||V(function(){var pe;return pc(pc.call)||!pc(Object)||!pc(function(){pe=!0})||pe})?Kf:pc,t0=To("species"),Qf=Array,Uu=function(pe,Ie){return new(function(ze){var Oe;return Ms(ze)&&(Oe=ze.constructor,(ml(Oe)&&(Oe===Qf||Ms(Oe.prototype))||rr(Oe)&&(Oe=Oe[t0])===null)&&(Oe=void 0)),Oe===void 0?Qf:Oe}(pe))(Ie===0?0:Ie)},r0=To("species"),fc=function(pe){return Br>=51||!V(function(){var Ie=[];return(Ie.constructor={})[r0]=function(){return{foo:1}},Ie[pe](Boolean).foo!==1})},Jf=To("isConcatSpreadable"),n0=Br>=51||!V(function(){var pe=[];return pe[Jf]=!1,pe.concat()[0]!==pe}),o0=fc("concat"),a0=function(pe){if(!rr(pe))return!1;var Ie=pe[Jf];return Ie!==void 0?!!Ie:Ms(pe)};_n({target:"Array",proto:!0,arity:1,forced:!n0||!o0},{concat:function(Ie){var ze,Oe,Ne,At,nr,kt=Pn(this),dr=Uu(kt,0),gr=0;for(ze=-1,Ne=arguments.length;ze<Ne;ze++)if(a0(nr=ze===-1?kt:arguments[ze]))for(At=Za(nr),Lu(gr+At),Oe=0;Oe<At;Oe++,gr++)Oe in nr&&ii(dr,gr,nr[Oe]);else Lu(gr+1),ii(dr,gr++,nr);return dr.length=gr,dr}});var gl,mc,hl,s0=String,rs=function(pe){if(ci(pe)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return s0(pe)},i0=dl.concat("length","prototype"),gc={f:Object.getOwnPropertyNames||function(Ie){return $f(Ie,i0)}},c0=Array,l0=Math.max,qu=function(pe,Ie,ze){for(var Oe=Za(pe),Ne=Ai(Ie,Oe),At=Ai(ze===void 0?Oe:ze,Oe),nr=c0(l0(At-Ne,0)),kt=0;Ne<At;Ne++,kt++)ii(nr,kt,pe[Ne]);return nr.length=kt,nr},Yf=gc.f,Xf=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Vu={f:function(Ie){return Xf&&er(Ie)=="Window"?function(ze){try{return Yf(ze)}catch{return qu(Xf)}}(Ie):Yf(_r(Ie))}},hc={f:Object.getOwnPropertySymbols},Hs=function(pe,Ie,ze,Oe){return Oe&&Oe.enumerable?pe[Ie]=ze:va(pe,Ie,ze),pe},Hu={f:To},u0=Oa.f,qo=function(pe){var Ie=kr.Symbol||(kr.Symbol={});hn(Ie,pe)||u0(Ie,pe,{value:Hu.f(pe)})},Zf=function(){var pe=xr("Symbol"),Ie=pe&&pe.prototype,ze=Ie&&Ie.valueOf,Oe=To("toPrimitive");Ie&&!Ie[Oe]&&Hs(Ie,Oe,function(Ne){return jt(ze,this)},{arity:1})},d0=ju?{}.toString:function(){return"[object "+ci(this)+"]"},p0=Oa.f,em=To("toStringTag"),li=function(pe,Ie,ze,Oe){if(pe){var Ne=ze?pe:pe.prototype;hn(Ne,em)||p0(Ne,em,{configurable:!0,value:Ie}),Oe&&!ju&&va(Ne,"toString",d0)}},tm=L.WeakMap,f0=Ve(tm)&&/native code/.test(String(tm)),rm="Object already initialized",zu=L.TypeError,m0=L.WeakMap;if(f0||Mn.state){var ui=Mn.state||(Mn.state=new m0),g0=_e(ui.get),nm=_e(ui.has),h0=_e(ui.set);gl=function(pe,Ie){if(nm(ui,pe))throw zu(rm);return Ie.facade=pe,h0(ui,pe,Ie),Ie},mc=function(pe){return g0(ui,pe)||{}},hl=function(pe){return nm(ui,pe)}}else{var Oi=pl("state");Ni[Oi]=!0,gl=function(pe,Ie){if(hn(pe,Oi))throw zu(rm);return Ie.facade=pe,va(pe,Oi,Ie),Ie},mc=function(pe){return hn(pe,Oi)?pe[Oi]:{}},hl=function(pe){return hn(pe,Oi)}}var ts={set:gl,get:mc,has:hl,enforce:function(pe){return hl(pe)?mc(pe):gl(pe,{})},getterFor:function(pe){return function(Ie){var ze;if(!rr(Ie)||(ze=mc(Ie)).type!==pe)throw zu("Incompatible receiver, "+pe+" required");return ze}}},om=_e([].push),zs=function(pe){var Ie=pe==1,ze=pe==2,Oe=pe==3,Ne=pe==4,At=pe==6,nr=pe==7,kt=pe==5||At;return function(dr,gr,Ar,Rr){for(var Ur,Dr,Jr=Pn(dr),kn=hr(Jr),Tn=Go(gr,Ar),jn=Za(kn),Bn=0,Gn=Rr||Uu,$n=Ie?Gn(dr,jn):ze||nr?Gn(dr,0):void 0;jn>Bn;Bn++)if((kt||Bn in kn)&&(Dr=Tn(Ur=kn[Bn],Bn,Jr),pe))if(Ie)$n[Bn]=Dr;else if(Dr)switch(pe){case 3:return!0;case 5:return Ur;case 6:return Bn;case 2:om($n,Ur)}else switch(pe){case 4:return!1;case 7:om($n,Ur)}return At?-1:Oe||Ne?Ne:$n}},Ws={forEach:zs(0),map:zs(1),filter:zs(2),some:zs(3),every:zs(4),find:zs(5),findIndex:zs(6),filterReject:zs(7)},vl=Ws.forEach,Ra=pl("hidden"),yl="Symbol",v0=ts.set,am=ts.getterFor(yl),as=Object.prototype,di=L.Symbol,vc=di&&di.prototype,y0=L.TypeError,Wu=L.QObject,sm=Qa.f,Gs=Oa.f,im=Vu.f,b0=ur.f,cm=_e([].push),ks=Ln("symbols"),yc=Ln("op-symbols"),S0=Ln("wks"),Gu=!Wu||!Wu.prototype||!Wu.prototype.findChild,Ku=$e&&V(function(){return es(Gs({},"a",{get:function(){return Gs(this,"a",{value:7}).a}})).a!=7})?function(pe,Ie,ze){var Oe=sm(as,Ie);Oe&&delete as[Ie],Gs(pe,Ie,ze),Oe&&pe!==as&&Gs(as,Ie,Oe)}:Gs,Qu=function(pe,Ie){var ze=ks[pe]=es(vc);return v0(ze,{type:yl,tag:pe,description:Ie}),$e||(ze.description=Ie),ze},bl=function(Ie,ze,Oe){Ie===as&&bl(yc,ze,Oe),po(Ie);var Ne=ca(ze);return po(Oe),hn(ks,Ne)?(Oe.enumerable?(hn(Ie,Ra)&&Ie[Ra][Ne]&&(Ie[Ra][Ne]=!1),Oe=es(Oe,{enumerable:Dt(0,!1)})):(hn(Ie,Ra)||Gs(Ie,Ra,Dt(1,{})),Ie[Ra][Ne]=!0),Ku(Ie,Ne,Oe)):Gs(Ie,Ne,Oe)},Ju=function(Ie,ze){po(Ie);var Oe=_r(ze),Ne=qs(Oe).concat(pm(Oe));return vl(Ne,function(At){$e&&!jt(lm,Oe,At)||bl(Ie,At,Oe[At])}),Ie},lm=function(Ie){var ze=ca(Ie),Oe=jt(b0,this,ze);return!(this===as&&hn(ks,ze)&&!hn(yc,ze))&&(!(Oe||!hn(this,ze)||!hn(ks,ze)||hn(this,Ra)&&this[Ra][ze])||Oe)},um=function(Ie,ze){var Oe=_r(Ie),Ne=ca(ze);if(Oe!==as||!hn(ks,Ne)||hn(yc,Ne)){var At=sm(Oe,Ne);return!At||!hn(ks,Ne)||hn(Oe,Ra)&&Oe[Ra][Ne]||(At.enumerable=!0),At}},dm=function(Ie){var ze=im(_r(Ie)),Oe=[];return vl(ze,function(Ne){hn(ks,Ne)||hn(Ni,Ne)||cm(Oe,Ne)}),Oe},pm=function(pe){var Ie=pe===as,ze=im(Ie?yc:_r(pe)),Oe=[];return vl(ze,function(Ne){!hn(ks,Ne)||Ie&&!hn(as,Ne)||cm(Oe,ks[Ne])}),Oe};$r||(di=function(){if(vr(vc,this))throw y0("Symbol is not a constructor");var Ie=arguments.length&&arguments[0]!==void 0?rs(arguments[0]):void 0,ze=Do(Ie),Oe=function(Ne){this===as&&jt(Oe,yc,Ne),hn(this,Ra)&&hn(this[Ra],ze)&&(this[Ra][ze]=!1),Ku(this,ze,Dt(1,Ne))};return $e&&Gu&&Ku(as,ze,{configurable:!0,set:Oe}),Qu(ze,Ie)},vc=di.prototype,Hs(vc,"toString",function(){return am(this).tag}),Hs(di,"withoutSetter",function(pe){return Qu(Do(pe),pe)}),ur.f=lm,Oa.f=bl,Lf.f=Ju,Qa.f=um,gc.f=Vu.f=dm,hc.f=pm,Hu.f=function(pe){return Qu(To(pe),pe)},$e&&Gs(vc,"description",{configurable:!0,get:function(){return am(this).description}})),_n({global:!0,constructor:!0,wrap:!0,forced:!$r,sham:!$r},{Symbol:di}),vl(qs(S0),function(pe){qo(pe)}),_n({target:yl,stat:!0,forced:!$r},{useSetter:function(){Gu=!0},useSimple:function(){Gu=!1}}),_n({target:"Object",stat:!0,forced:!$r,sham:!$e},{create:function(Ie,ze){return ze===void 0?es(Ie):Ju(es(Ie),ze)},defineProperty:bl,defineProperties:Ju,getOwnPropertyDescriptor:um}),_n({target:"Object",stat:!0,forced:!$r},{getOwnPropertyNames:dm}),Zf(),li(di,yl),Ni[Ra]=!0;var fm=$r&&!!Symbol.for&&!!Symbol.keyFor,Yu=Ln("string-to-symbol-registry"),T0=Ln("symbol-to-string-registry");_n({target:"Symbol",stat:!0,forced:!fm},{for:function(pe){var Ie=rs(pe);if(hn(Yu,Ie))return Yu[Ie];var ze=xr("Symbol")(Ie);return Yu[Ie]=ze,T0[ze]=Ie,ze}});var mm=Ln("symbol-to-string-registry");_n({target:"Symbol",stat:!0,forced:!fm},{keyFor:function(Ie){if(!qr(Ie))throw TypeError(bn(Ie)+" is not a symbol");if(hn(mm,Ie))return mm[Ie]}});var Ks=xr("JSON","stringify"),Sl=_e(/./.exec),gm=_e("".charAt),C0=_e("".charCodeAt),M0=_e("".replace),k0=_e(1 .toString),w0=/[\uD800-\uDFFF]/g,hm=/^[\uD800-\uDBFF]$/,vm=/^[\uDC00-\uDFFF]$/,ym=!$r||V(function(){var pe=xr("Symbol")();return Ks([pe])!="[null]"||Ks({a:pe})!="{}"||Ks(Object(pe))!="{}"}),bm=V(function(){return Ks("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ks("\uDEAD")!=='"\\udead"'}),x0=function(pe,Ie){var ze=Vs(arguments),Oe=Ie;if((rr(Ie)||pe!==void 0)&&!qr(pe))return Ms(Ie)||(Ie=function(Ne,At){if(Ve(Oe)&&(At=jt(Oe,this,Ne,At)),!qr(At))return At}),ze[1]=Ie,le(Ks,null,ze)},_0=function(pe,Ie,ze){var Oe=gm(ze,Ie-1),Ne=gm(ze,Ie+1);return Sl(hm,pe)&&!Sl(vm,Ne)||Sl(vm,pe)&&!Sl(hm,Oe)?"\\u"+k0(C0(pe,0),16):pe};Ks&&_n({target:"JSON",stat:!0,arity:3,forced:ym||bm},{stringify:function(Ie,ze,Oe){var Ne=Vs(arguments),At=le(ym?x0:Ks,null,Ne);return bm&&typeof At=="string"?M0(At,w0,_0):At}});var I0=!$r||V(function(){hc.f(1)});_n({target:"Object",stat:!0,forced:I0},{getOwnPropertySymbols:function(Ie){var ze=hc.f;return ze?ze(Pn(Ie)):[]}}),qo("asyncIterator"),qo("hasInstance"),qo("isConcatSpreadable"),qo("iterator"),qo("match"),qo("matchAll"),qo("replace"),qo("search"),qo("species"),qo("split"),qo("toPrimitive"),Zf(),qo("toStringTag"),li(xr("Symbol"),"Symbol"),qo("unscopables"),li(L.JSON,"JSON",!0);var Qs,Sm,Tm,E0=kr.Symbol,ws={},Cm=Function.prototype,P0=$e&&Object.getOwnPropertyDescriptor,Xu=hn(Cm,"name"),A0={EXISTS:Xu,PROPER:Xu&&(function(){}).name==="something",CONFIGURABLE:Xu&&(!$e||$e&&P0(Cm,"name").configurable)},Mm=!V(function(){function pe(){}return pe.prototype.constructor=null,Object.getPrototypeOf(new pe)!==pe.prototype}),km=pl("IE_PROTO"),Zu=Object,N0=Zu.prototype,Ri=Mm?Zu.getPrototypeOf:function(pe){var Ie=Pn(pe);if(hn(Ie,km))return Ie[km];var ze=Ie.constructor;return Ve(ze)&&Ie instanceof ze?ze.prototype:Ie instanceof Zu?N0:null},ed=To("iterator"),wm=!1;[].keys&&("next"in(Tm=[].keys())?(Sm=Ri(Ri(Tm)))!==Object.prototype&&(Qs=Sm):wm=!0);var O0=!rr(Qs)||V(function(){var pe={};return Qs[ed].call(pe)!==pe});Qs=O0?{}:es(Qs),Ve(Qs[ed])||Hs(Qs,ed,function(){return this});var xm={IteratorPrototype:Qs,BUGGY_SAFARI_ITERATORS:wm},R0=xm.IteratorPrototype,B0=function(){return this},F0=A0.PROPER,Tl=xm.BUGGY_SAFARI_ITERATORS,td=To("iterator"),_m="keys",Cl="values",Im="entries",$0=function(){return this},rd=function(pe,Ie,ze,Oe,Ne,At,nr){(function(jn,Bn,Gn,$n){var ho=Bn+" Iterator";jn.prototype=es(R0,{next:Dt(+!$n,Gn)}),li(jn,ho,!1,!0),ws[ho]=B0})(ze,Ie,Oe);var kt,dr,gr,Ar=function(jn){if(jn===Ne&&kn)return kn;if(!Tl&&jn in Dr)return Dr[jn];switch(jn){case _m:return function(){return new ze(this,jn)};case Cl:return function(){return new ze(this,jn)};case Im:return function(){return new ze(this,jn)}}return function(){return new ze(this)}},Rr=Ie+" Iterator",Ur=!1,Dr=pe.prototype,Jr=Dr[td]||Dr["@@iterator"]||Ne&&Dr[Ne],kn=!Tl&&Jr||Ar(Ne),Tn=Ie=="Array"&&Dr.entries||Jr;if(Tn&&(kt=Ri(Tn.call(new pe)))!==Object.prototype&&kt.next&&(li(kt,Rr,!0,!0),ws[Rr]=$0),F0&&Ne==Cl&&Jr&&Jr.name!==Cl&&(Ur=!0,kn=function(){return jt(Jr,this)}),Ne)if(dr={values:Ar(Cl),keys:At?kn:Ar(_m),entries:Ar(Im)},nr)for(gr in dr)(Tl||Ur||!(gr in Dr))&&Hs(Dr,gr,dr[gr]);else _n({target:Ie,proto:!0,forced:Tl||Ur},dr);return nr&&Dr[td]!==kn&&Hs(Dr,td,kn,{name:Ne}),ws[Ie]=kn,dr};Oa.f;var Em="Array Iterator",L0=ts.set,j0=ts.getterFor(Em);rd(Array,"Array",function(pe,Ie){L0(this,{type:Em,target:_r(pe),index:0,kind:Ie})},function(){var pe=j0(this),Ie=pe.target,ze=pe.kind,Oe=pe.index++;return!Ie||Oe>=Ie.length?(pe.target=void 0,{value:void 0,done:!0}):ze=="keys"?{value:Oe,done:!1}:ze=="values"?{value:Ie[Oe],done:!1}:{value:[Oe,Ie[Oe]],done:!1}},"values"),ws.Arguments=ws.Array;var Pm=To("toStringTag");for(var nd in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Am=L[nd],od=Am&&Am.prototype;od&&ci(od)!==Pm&&va(od,Pm,nd),ws[nd]=ws.Array}var D0=E0;qo("asyncDispose"),qo("dispose"),qo("matcher"),qo("metadataKey"),qo("observable"),qo("metadata"),qo("patternMatch"),qo("replaceAll");var ja=D0,U0=_e("".charAt),Nm=_e("".charCodeAt),q0=_e("".slice),Om=function(pe){return function(Ie,ze){var Oe,Ne,At=rs(Pr(Ie)),nr=uc(ze),kt=At.length;return nr<0||nr>=kt?pe?"":void 0:(Oe=Nm(At,nr))<55296||Oe>56319||nr+1===kt||(Ne=Nm(At,nr+1))<56320||Ne>57343?pe?U0(At,nr):Oe:pe?q0(At,nr,nr+2):Ne-56320+(Oe-55296<<10)+65536}},V0={codeAt:Om(!1),charAt:Om(!0)}.charAt,Rm="String Iterator",H0=ts.set,z0=ts.getterFor(Rm);rd(String,"String",function(pe){H0(this,{type:Rm,string:rs(pe),index:0})},function(){var Ie,ze=z0(this),Oe=ze.string,Ne=ze.index;return Ne>=Oe.length?{value:void 0,done:!0}:(Ie=V0(Oe,Ne),ze.index+=Ie.length,{value:Ie,done:!1})});var Bm=Hu.f("iterator"),W0=g(function(pe){function Ie(ze){return pe.exports=Ie=typeof ja=="function"&&typeof Bm=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof ja=="function"&&Oe.constructor===ja&&Oe!==ja.prototype?"symbol":typeof Oe},pe.exports.__esModule=!0,pe.exports.default=pe.exports,Ie(ze)}pe.exports=Ie,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Fm=Oa.f;_n({target:"Object",stat:!0,forced:Object.defineProperty!==Fm,sham:!$e},{defineProperty:Fm});var G0=g(function(pe){var Ie=kr.Object,ze=pe.exports=function(Ne,At,nr){return Ie.defineProperty(Ne,At,nr)};Ie.defineProperty.sham&&(ze.sham=!0)}),bc=G0,K0=V(function(){Ri(1)});_n({target:"Object",stat:!0,forced:K0,sham:!Mm},{getPrototypeOf:function(Ie){return Ri(Pn(Ie))}});var pi=kr.Object.getPrototypeOf,fi=function(pe,Ie){var ze=[][pe];return!!ze&&V(function(){ze.call(null,Ie||function(){return 1},1)})},Q0=Ws.forEach,$m=fi("forEach")?[].forEach:function(Ie){return Q0(this,Ie,arguments.length>1?arguments[1]:void 0)};_n({target:"Array",proto:!0,forced:[].forEach!=$m},{forEach:$m});var J0=sa("Array").forEach,ad=Array.prototype,Y0={DOMTokenList:!0,NodeList:!0},Qn=function(pe){var Ie=pe.forEach;return pe===ad||vr(ad,pe)&&Ie===ad.forEach||hn(Y0,ci(pe))?J0:Ie},X0=_e([].concat),Z0=xr("Reflect","ownKeys")||function(Ie){var ze=gc.f(po(Ie)),Oe=hc.f;return Oe?X0(ze,Oe(Ie)):ze},Lm=Error,e1=_e("".replace),t1=String(Lm("zxcasd").stack),jm=/\n\s*at [^:]*:[^\n]*/,r1=jm.test(t1),n1=function(pe,Ie){if(r1&&typeof pe=="string"&&!Lm.prepareStackTrace)for(;Ie--;)pe=e1(pe,jm,"");return pe},o1=function(pe,Ie){rr(Ie)&&"cause"in Ie&&va(pe,"cause",Ie.cause)},a1=To("iterator"),s1=Array.prototype,Dm=function(pe){return pe!==void 0&&(ws.Array===pe||s1[a1]===pe)},i1=To("iterator"),Ml=function(pe){if(!pr(pe))return qn(pe,i1)||qn(pe,"@@iterator")||ws[ci(pe)]},c1=TypeError,Sc=function(pe,Ie){var ze=arguments.length<2?Ml(pe):Ie;if(Xr(ze))return po(jt(ze,pe));throw c1(bn(pe)+" is not iterable")},sd=function(pe,Ie,ze){var Oe,Ne;po(pe);try{if(!(Oe=qn(pe,"return"))){if(Ie==="throw")throw ze;return ze}Oe=jt(Oe,pe)}catch(At){Ne=!0,Oe=At}if(Ie==="throw")throw ze;if(Ne)throw Oe;return po(Oe),ze},l1=TypeError,kl=function(pe,Ie){this.stopped=pe,this.result=Ie},Um=kl.prototype,xo=function(pe,Ie,ze){var Oe,Ne,At,nr,kt,dr,gr,Ar=ze&&ze.that,Rr=!(!ze||!ze.AS_ENTRIES),Ur=!(!ze||!ze.IS_RECORD),Dr=!(!ze||!ze.IS_ITERATOR),Jr=!(!ze||!ze.INTERRUPTED),kn=Go(Ie,Ar),Tn=function(Bn){return Oe&&sd(Oe,"normal",Bn),new kl(!0,Bn)},jn=function(Bn){return Rr?(po(Bn),Jr?kn(Bn[0],Bn[1],Tn):kn(Bn[0],Bn[1])):Jr?kn(Bn,Tn):kn(Bn)};if(Ur)Oe=pe.iterator;else if(Dr)Oe=pe;else{if(!(Ne=Ml(pe)))throw l1(bn(pe)+" is not iterable");if(Dm(Ne)){for(At=0,nr=Za(pe);nr>At;At++)if((kt=jn(pe[At]))&&vr(Um,kt))return kt;return new kl(!1)}Oe=Sc(pe,Ne)}for(dr=Ur?pe.next:Oe.next;!(gr=jt(dr,Oe)).done;){try{kt=jn(gr.value)}catch(Bn){sd(Oe,"throw",Bn)}if(typeof kt=="object"&&kt&&vr(Um,kt))return kt}return new kl(!1)},u1=function(pe,Ie){return pe===void 0?arguments.length<2?"":Ie:rs(pe)},d1=!V(function(){var pe=Error("a");return!("stack"in pe)||(Object.defineProperty(pe,"stack",Dt(1,7)),pe.stack!==7)}),p1=To("toStringTag"),wl=Error,f1=[].push,Tc=function(Ie,ze){var Oe,Ne=arguments.length>2?arguments[2]:void 0,At=vr(id,this);dc?Oe=dc(wl(),At?Ri(this):id):(Oe=At?this:es(id),va(Oe,p1,"Error")),ze!==void 0&&va(Oe,"message",u1(ze)),d1&&va(Oe,"stack",n1(Oe.stack,1)),o1(Oe,Ne);var nr=[];return xo(Ie,f1,{that:nr}),va(Oe,"errors",nr),Oe};dc?dc(Tc,wl):function(pe,Ie,ze){for(var Oe=Z0(Ie),Ne=Oa.f,At=Qa.f,nr=0;nr<Oe.length;nr++){var kt=Oe[nr];hn(pe,kt)||ze&&hn(ze,kt)||Ne(pe,kt,At(Ie,kt))}}(Tc,wl,{name:!0});var id=Tc.prototype=es(wl.prototype,{constructor:Dt(1,Tc),message:Dt(1,""),name:Dt(1,"AggregateError")});_n({global:!0,constructor:!0,arity:2},{AggregateError:Tc});var Cc,Bi,qm,cd,ds=er(L.process)=="process",Vm=To("species"),Hm=function(pe){var Ie=xr(pe),ze=Oa.f;$e&&Ie&&!Ie[Vm]&&ze(Ie,Vm,{configurable:!0,get:function(){return this}})},m1=TypeError,ld=function(pe,Ie){if(vr(Ie,pe))return pe;throw m1("Incorrect invocation")},g1=TypeError,xl=function(pe){if(ml(pe))return pe;throw g1(bn(pe)+" is not a constructor")},h1=To("species"),Js=function(pe,Ie){var ze,Oe=po(pe).constructor;return Oe===void 0||pr(ze=po(Oe)[h1])?Ie:xl(ze)},v1=TypeError,zm=function(pe,Ie){if(pe<Ie)throw v1("Not enough arguments");return pe},Wm=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ir),ud=L.setImmediate,dd=L.clearImmediate,y1=L.process,pd=L.Dispatch,b1=L.Function,Gm=L.MessageChannel,S1=L.String,fd=0,Mc={},T1="onreadystatechange";try{Cc=L.location}catch{}var md=function(pe){if(hn(Mc,pe)){var Ie=Mc[pe];delete Mc[pe],Ie()}},gd=function(pe){return function(){md(pe)}},Km=function(pe){md(pe.data)},Qm=function(pe){L.postMessage(S1(pe),Cc.protocol+"//"+Cc.host)};ud&&dd||(ud=function(Ie){zm(arguments.length,1);var ze=Ve(Ie)?Ie:b1(Ie),Oe=Vs(arguments,1);return Mc[++fd]=function(){le(ze,void 0,Oe)},Bi(fd),fd},dd=function(Ie){delete Mc[Ie]},ds?Bi=function(pe){y1.nextTick(gd(pe))}:pd&&pd.now?Bi=function(pe){pd.now(gd(pe))}:Gm&&!Wm?(cd=(qm=new Gm).port2,qm.port1.onmessage=Km,Bi=Go(cd.postMessage,cd)):L.addEventListener&&Ve(L.postMessage)&&!L.importScripts&&Cc&&Cc.protocol!=="file:"&&!V(Qm)?(Bi=Qm,L.addEventListener("message",Km,!1)):Bi=T1 in Zo("script")?function(pe){Nu.appendChild(Zo("script")).onreadystatechange=function(){Nu.removeChild(this),md(pe)}}:function(pe){setTimeout(gd(pe),0)});var kc,mi,wc,Fi,hd,vd,yd,Jm,Ym={set:ud,clear:dd},C1=/ipad|iphone|ipod/i.test(Ir)&&L.Pebble!==void 0,M1=/web0s(?!.*chrome)/i.test(Ir),k1=Qa.f,bd=Ym.set,Xm=L.MutationObserver||L.WebKitMutationObserver,Zm=L.document,eg=L.process,_l=L.Promise,tg=k1(L,"queueMicrotask"),rg=tg&&tg.value;rg||(kc=function(){var pe,Ie;for(ds&&(pe=eg.domain)&&pe.exit();mi;){Ie=mi.fn,mi=mi.next;try{Ie()}catch(ze){throw mi?Fi():wc=void 0,ze}}wc=void 0,pe&&pe.enter()},Wm||ds||M1||!Xm||!Zm?!C1&&_l&&_l.resolve?((yd=_l.resolve(void 0)).constructor=_l,Jm=Go(yd.then,yd),Fi=function(){Jm(kc)}):ds?Fi=function(){eg.nextTick(kc)}:(bd=Go(bd,L),Fi=function(){bd(kc)}):(hd=!0,vd=Zm.createTextNode(""),new Xm(kc).observe(vd,{characterData:!0}),Fi=function(){vd.data=hd=!hd}));var Sd=rg||function(pe){var Ie={fn:pe,next:void 0};wc&&(wc.next=Ie),mi||(mi=Ie,Fi()),wc=Ie},$i=function(pe){try{return{error:!1,value:pe()}}catch(Ie){return{error:!0,value:Ie}}},ng=function(){this.head=null,this.tail=null};ng.prototype={add:function(pe){var Ie={item:pe,next:null};this.head?this.tail.next=Ie:this.head=Ie,this.tail=Ie},get:function(){var pe=this.head;if(pe)return this.head=pe.next,this.tail===pe&&(this.tail=null),pe.item}};var Td,og,w1=ng,Ma=L.Promise,ag=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",x1=!ag&&!ds&&typeof window=="object"&&typeof document=="object",sg=Ma&&Ma.prototype,_1=To("species"),ig=!1,cg=Ve(L.PromiseRejectionEvent),I1=vs("Promise",function(){var pe=zf(Ma),Ie=pe!==String(Ma);if(!Ie&&Br===66||!sg.catch||!sg.finally)return!0;if(!Br||Br<51||!/native code/.test(pe)){var ze=new Ma(function(Ne){Ne(1)}),Oe=function(Ne){Ne(function(){},function(){})};if((ze.constructor={})[_1]=Oe,!(ig=ze.then(function(){})instanceof Oe))return!0}return!Ie&&(x1||ag)&&!cg}),Li={CONSTRUCTOR:I1,REJECTION_EVENT:cg,SUBCLASSING:ig},E1=TypeError,P1=function(pe){var Ie,ze;this.promise=new pe(function(Oe,Ne){if(Ie!==void 0||ze!==void 0)throw E1("Bad Promise constructor");Ie=Oe,ze=Ne}),this.resolve=Xr(Ie),this.reject=Xr(ze)},xs={f:function(pe){return new P1(pe)}},lg=Ym.set,Il="Promise",ug=Li.CONSTRUCTOR,A1=Li.REJECTION_EVENT,Cd=ts.getterFor(Il),N1=ts.set,O1=Ma&&Ma.prototype,xc=Ma,Md=O1,dg=L.TypeError,kd=L.document,wd=L.process,xd=xs.f,R1=xd,B1=!!(kd&&kd.createEvent&&L.dispatchEvent),pg="unhandledrejection",fg=function(pe){var Ie;return!(!rr(pe)||!Ve(Ie=pe.then))&&Ie},mg=function(pe,Ie){var ze,Oe,Ne,At=Ie.value,nr=Ie.state==1,kt=nr?pe.ok:pe.fail,dr=pe.resolve,gr=pe.reject,Ar=pe.domain;try{kt?(nr||(Ie.rejection===2&&$1(Ie),Ie.rejection=1),kt===!0?ze=At:(Ar&&Ar.enter(),ze=kt(At),Ar&&(Ar.exit(),Ne=!0)),ze===pe.promise?gr(dg("Promise-chain cycle")):(Oe=fg(ze))?jt(Oe,ze,dr,gr):dr(ze)):gr(At)}catch(Rr){Ar&&!Ne&&Ar.exit(),gr(Rr)}},gg=function(pe,Ie){pe.notified||(pe.notified=!0,Sd(function(){for(var ze,Oe=pe.reactions;ze=Oe.get();)mg(ze,pe);pe.notified=!1,Ie&&!pe.rejection&&F1(pe)}))},hg=function(pe,Ie,ze){var Oe,Ne;B1?((Oe=kd.createEvent("Event")).promise=Ie,Oe.reason=ze,Oe.initEvent(pe,!1,!0),L.dispatchEvent(Oe)):Oe={promise:Ie,reason:ze},!A1&&(Ne=L["on"+pe])?Ne(Oe):pe===pg&&function(At,nr){var kt=L.console;kt&&kt.error&&(arguments.length==1?kt.error(At):kt.error(At,nr))}("Unhandled promise rejection",ze)},F1=function(pe){jt(lg,L,function(){var Ie,ze=pe.facade,Oe=pe.value;if(vg(pe)&&(Ie=$i(function(){ds?wd.emit("unhandledRejection",Oe,ze):hg(pg,ze,Oe)}),pe.rejection=ds||vg(pe)?2:1,Ie.error))throw Ie.value})},vg=function(pe){return pe.rejection!==1&&!pe.parent},$1=function(pe){jt(lg,L,function(){var Ie=pe.facade;ds?wd.emit("rejectionHandled",Ie):hg("rejectionhandled",Ie,pe.value)})},ji=function(pe,Ie,ze){return function(Oe){pe(Ie,Oe,ze)}},Di=function(pe,Ie,ze){pe.done||(pe.done=!0,ze&&(pe=ze),pe.value=Ie,pe.state=2,gg(pe,!0))},_d=function(pe,Ie,ze){if(!pe.done){pe.done=!0,ze&&(pe=ze);try{if(pe.facade===Ie)throw dg("Promise can't be resolved itself");var Oe=fg(Ie);Oe?Sd(function(){var Ne={done:!1};try{jt(Oe,Ie,ji(_d,Ne,pe),ji(Di,Ne,pe))}catch(At){Di(Ne,At,pe)}}):(pe.value=Ie,pe.state=1,gg(pe,!1))}catch(Ne){Di({done:!1},Ne,pe)}}};ug&&(Md=(xc=function(Ie){ld(this,Md),Xr(Ie),jt(Td,this);var ze=Cd(this);try{Ie(ji(_d,ze),ji(Di,ze))}catch(Oe){Di(ze,Oe)}}).prototype,(Td=function(Ie){N1(this,{type:Il,done:!1,notified:!1,parent:!1,reactions:new w1,rejection:!1,state:0,value:void 0})}).prototype=Hs(Md,"then",function(Ie,ze){var Oe=Cd(this),Ne=xd(Js(this,xc));return Oe.parent=!0,Ne.ok=!Ve(Ie)||Ie,Ne.fail=Ve(ze)&&ze,Ne.domain=ds?wd.domain:void 0,Oe.state==0?Oe.reactions.add(Ne):Sd(function(){mg(Ne,Oe)}),Ne.promise}),og=function(){var pe=new Td,Ie=Cd(pe);this.promise=pe,this.resolve=ji(_d,Ie),this.reject=ji(Di,Ie)},xs.f=xd=function(pe){return pe===xc||pe===void 0?new og(pe):R1(pe)}),_n({global:!0,constructor:!0,wrap:!0,forced:ug},{Promise:xc}),li(xc,Il,!1,!0),Hm(Il);var yg=To("iterator"),bg=!1;try{var L1=0,Sg={next:function(){return{done:!!L1++}},return:function(){bg=!0}};Sg[yg]=function(){return this},Array.from(Sg,function(){throw 2})}catch{}var Tg=function(pe,Ie){if(!Ie&&!bg)return!1;var ze=!1;try{var Oe={};Oe[yg]=function(){return{next:function(){return{done:ze=!0}}}},pe(Oe)}catch{}return ze},Cg=Li.CONSTRUCTOR||!Tg(function(pe){Ma.all(pe).then(void 0,function(){})});_n({target:"Promise",stat:!0,forced:Cg},{all:function(Ie){var ze=this,Oe=xs.f(ze),Ne=Oe.resolve,At=Oe.reject,nr=$i(function(){var kt=Xr(ze.resolve),dr=[],gr=0,Ar=1;xo(Ie,function(Rr){var Ur=gr++,Dr=!1;Ar++,jt(kt,ze,Rr).then(function(Jr){Dr||(Dr=!0,dr[Ur]=Jr,--Ar||Ne(dr))},At)}),--Ar||Ne(dr)});return nr.error&&At(nr.value),Oe.promise}});var j1=Li.CONSTRUCTOR;Ma&&Ma.prototype,_n({target:"Promise",proto:!0,forced:j1,real:!0},{catch:function(pe){return this.then(void 0,pe)}}),_n({target:"Promise",stat:!0,forced:Cg},{race:function(Ie){var ze=this,Oe=xs.f(ze),Ne=Oe.reject,At=$i(function(){var nr=Xr(ze.resolve);xo(Ie,function(kt){jt(nr,ze,kt).then(Oe.resolve,Ne)})});return At.error&&Ne(At.value),Oe.promise}}),_n({target:"Promise",stat:!0,forced:Li.CONSTRUCTOR},{reject:function(Ie){var ze=xs.f(this);return jt(ze.reject,void 0,Ie),ze.promise}});var Id=function(pe,Ie){if(po(pe),rr(Ie)&&Ie.constructor===pe)return Ie;var ze=xs.f(pe);return(0,ze.resolve)(Ie),ze.promise},D1=Li.CONSTRUCTOR,U1=xr("Promise"),q1=!D1;_n({target:"Promise",stat:!0,forced:!0},{resolve:function(Ie){return Id(q1&&this===U1?Ma:this,Ie)}}),_n({target:"Promise",stat:!0},{allSettled:function(Ie){var ze=this,Oe=xs.f(ze),Ne=Oe.resolve,At=Oe.reject,nr=$i(function(){var kt=Xr(ze.resolve),dr=[],gr=0,Ar=1;xo(Ie,function(Rr){var Ur=gr++,Dr=!1;Ar++,jt(kt,ze,Rr).then(function(Jr){Dr||(Dr=!0,dr[Ur]={status:"fulfilled",value:Jr},--Ar||Ne(dr))},function(Jr){Dr||(Dr=!0,dr[Ur]={status:"rejected",reason:Jr},--Ar||Ne(dr))})}),--Ar||Ne(dr)});return nr.error&&At(nr.value),Oe.promise}});var Mg="No one promise resolved";_n({target:"Promise",stat:!0},{any:function(Ie){var ze=this,Oe=xr("AggregateError"),Ne=xs.f(ze),At=Ne.resolve,nr=Ne.reject,kt=$i(function(){var dr=Xr(ze.resolve),gr=[],Ar=0,Rr=1,Ur=!1;xo(Ie,function(Dr){var Jr=Ar++,kn=!1;Rr++,jt(dr,ze,Dr).then(function(Tn){kn||Ur||(Ur=!0,At(Tn))},function(Tn){kn||Ur||(kn=!0,gr[Jr]=Tn,--Rr||nr(new Oe(gr,Mg)))})}),--Rr||nr(new Oe(gr,Mg))});return kt.error&&nr(kt.value),Ne.promise}});var V1=Ma&&Ma.prototype,H1=!!Ma&&V(function(){V1.finally.call({then:function(){}},function(){})});_n({target:"Promise",proto:!0,real:!0,forced:H1},{finally:function(pe){var Ie=Js(this,xr("Promise")),ze=Ve(pe);return this.then(ze?function(Oe){return Id(Ie,pe()).then(function(){return Oe})}:pe,ze?function(Oe){return Id(Ie,pe()).then(function(){throw Oe})}:pe)}});var z1=kr.Promise;_n({target:"Promise",stat:!0,forced:!0},{try:function(pe){var Ie=xs.f(this),ze=$i(pe);return(ze.error?Ie.reject:Ie.resolve)(ze.value),Ie.promise}});var _o=z1,W1=_e([].reverse),kg=[1,2];_n({target:"Array",proto:!0,forced:String(kg)===String(kg.reverse())},{reverse:function(){return Ms(this)&&(this.length=this.length),W1(this)}});var G1=sa("Array").reverse,Ed=Array.prototype,Yl=function(pe){var Ie=pe.reverse;return pe===Ed||vr(Ed,pe)&&Ie===Ed.reverse?G1:Ie},K1=fc("slice"),Q1=To("species"),Pd=Array,J1=Math.max;_n({target:"Array",proto:!0,forced:!K1},{slice:function(Ie,ze){var Oe,Ne,At,nr=_r(this),kt=Za(nr),dr=Ai(Ie,kt),gr=Ai(ze===void 0?kt:ze,kt);if(Ms(nr)&&(Oe=nr.constructor,(ml(Oe)&&(Oe===Pd||Ms(Oe.prototype))||rr(Oe)&&(Oe=Oe[Q1])===null)&&(Oe=void 0),Oe===Pd||Oe===void 0))return Vs(nr,dr,gr);for(Ne=new(Oe===void 0?Pd:Oe)(J1(gr-dr,0)),At=0;dr<gr;dr++,At++)dr in nr&&ii(Ne,At,nr[dr]);return Ne.length=At,Ne}});var Y1=sa("Array").slice,Ad=Array.prototype,Lo=function(pe){var Ie=pe.slice;return pe===Ad||vr(Ad,pe)&&Ie===Ad.slice?Y1:Ie},X1=g(function(pe){var Ie=W0.default;function ze(){pe.exports=ze=function(){return Oe},pe.exports.__esModule=!0,pe.exports.default=pe.exports;var Oe={},Ne=Object.prototype,At=Ne.hasOwnProperty,nr=typeof ja=="function"?ja:{},kt=nr.iterator||"@@iterator",dr=nr.asyncIterator||"@@asyncIterator",gr=nr.toStringTag||"@@toStringTag";function Ar(Hn,Fn,eo){return bc(Hn,Fn,{value:eo,enumerable:!0,configurable:!0,writable:!0}),Hn[Fn]}try{Ar({},"")}catch{Ar=function(eo,lo,So){return eo[lo]=So}}function Rr(Hn,Fn,eo,lo){var So=Fn&&Fn.prototype instanceof Jr?Fn:Jr,Co=Cs(So.prototype),aa=new Wr(lo||[]);return Co._invoke=function(No,Sa,$o){var Wo="suspendedStart";return function(Ta,Yi){if(Wo==="executing")throw new Error("Generator is already running");if(Wo==="completed"){if(Ta==="throw")throw Yi;return ro()}for($o.method=Ta,$o.arg=Yi;;){var Qo=$o.delegate;if(Qo){var Xi=co(Qo,$o);if(Xi){if(Xi===Dr)continue;return Xi}}if($o.method==="next")$o.sent=$o._sent=$o.arg;else if($o.method==="throw"){if(Wo==="suspendedStart")throw Wo="completed",$o.arg;$o.dispatchException($o.arg)}else $o.method==="return"&&$o.abrupt("return",$o.arg);Wo="executing";var cs=Ur(No,Sa,$o);if(cs.type==="normal"){if(Wo=$o.done?"completed":"suspendedYield",cs.arg===Dr)continue;return{value:cs.arg,done:$o.done}}cs.type==="throw"&&(Wo="completed",$o.method="throw",$o.arg=cs.arg)}}}(Hn,eo,aa),Co}function Ur(Hn,Fn,eo){try{return{type:"normal",arg:Hn.call(Fn,eo)}}catch(lo){return{type:"throw",arg:lo}}}Oe.wrap=Rr;var Dr={};function Jr(){}function kn(){}function Tn(){}var jn={};Ar(jn,kt,function(){return this});var Bn=pi&&pi(pi(Kn([])));Bn&&Bn!==Ne&&At.call(Bn,kt)&&(jn=Bn);var Gn=Tn.prototype=Jr.prototype=Cs(jn);function $n(Hn){var Fn;Qn(Fn=["next","throw","return"]).call(Fn,function(eo){Ar(Hn,eo,function(lo){return this._invoke(eo,lo)})})}function ho(Hn,Fn){function eo(So,Co,aa,No){var Sa=Ur(Hn[So],Hn,Co);if(Sa.type!=="throw"){var $o=Sa.arg,Wo=$o.value;return Wo&&Ie(Wo)=="object"&&At.call(Wo,"__await")?Fn.resolve(Wo.__await).then(function(Ta){eo("next",Ta,aa,No)},function(Ta){eo("throw",Ta,aa,No)}):Fn.resolve(Wo).then(function(Ta){$o.value=Ta,aa($o)},function(Ta){return eo("throw",Ta,aa,No)})}No(Sa.arg)}var lo;this._invoke=function(So,Co){function aa(){return new Fn(function(No,Sa){eo(So,Co,No,Sa)})}return lo=lo?lo.then(aa,aa):aa()}}function co(Hn,Fn){var eo=Hn.iterator[Fn.method];if(eo===void 0){if(Fn.delegate=null,Fn.method==="throw"){if(Hn.iterator.return&&(Fn.method="return",Fn.arg=void 0,co(Hn,Fn),Fn.method==="throw"))return Dr;Fn.method="throw",Fn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Dr}var lo=Ur(eo,Hn.iterator,Fn.arg);if(lo.type==="throw")return Fn.method="throw",Fn.arg=lo.arg,Fn.delegate=null,Dr;var So=lo.arg;return So?So.done?(Fn[Hn.resultName]=So.value,Fn.next=Hn.nextLoc,Fn.method!=="return"&&(Fn.method="next",Fn.arg=void 0),Fn.delegate=null,Dr):So:(Fn.method="throw",Fn.arg=new TypeError("iterator result is not an object"),Fn.delegate=null,Dr)}function oa(Hn){var Fn={tryLoc:Hn[0]};1 in Hn&&(Fn.catchLoc=Hn[1]),2 in Hn&&(Fn.finallyLoc=Hn[2],Fn.afterLoc=Hn[3]),this.tryEntries.push(Fn)}function so(Hn){var Fn=Hn.completion||{};Fn.type="normal",delete Fn.arg,Hn.completion=Fn}function Wr(Hn){this.tryEntries=[{tryLoc:"root"}],Qn(Hn).call(Hn,oa,this),this.reset(!0)}function Kn(Hn){if(Hn){var Fn=Hn[kt];if(Fn)return Fn.call(Hn);if(typeof Hn.next=="function")return Hn;if(!isNaN(Hn.length)){var eo=-1,lo=function So(){for(;++eo<Hn.length;)if(At.call(Hn,eo))return So.value=Hn[eo],So.done=!1,So;return So.value=void 0,So.done=!0,So};return lo.next=lo}}return{next:ro}}function ro(){return{value:void 0,done:!0}}return kn.prototype=Tn,Ar(Gn,"constructor",Tn),Ar(Tn,"constructor",kn),kn.displayName=Ar(Tn,gr,"GeneratorFunction"),Oe.isGeneratorFunction=function(Hn){var Fn=typeof Hn=="function"&&Hn.constructor;return!!Fn&&(Fn===kn||(Fn.displayName||Fn.name)==="GeneratorFunction")},Oe.mark=function(Hn){return si?si(Hn,Tn):(Hn.__proto__=Tn,Ar(Hn,gr,"GeneratorFunction")),Hn.prototype=Cs(Gn),Hn},Oe.awrap=function(Hn){return{__await:Hn}},$n(ho.prototype),Ar(ho.prototype,dr,function(){return this}),Oe.AsyncIterator=ho,Oe.async=function(Hn,Fn,eo,lo,So){So===void 0&&(So=_o);var Co=new ho(Rr(Hn,Fn,eo,lo),So);return Oe.isGeneratorFunction(Fn)?Co:Co.next().then(function(aa){return aa.done?aa.value:Co.next()})},$n(Gn),Ar(Gn,gr,"Generator"),Ar(Gn,kt,function(){return this}),Ar(Gn,"toString",function(){return"[object Generator]"}),Oe.keys=function(Hn){var Fn=[];for(var eo in Hn)Fn.push(eo);return Yl(Fn).call(Fn),function lo(){for(;Fn.length;){var So=Fn.pop();if(So in Hn)return lo.value=So,lo.done=!1,lo}return lo.done=!0,lo}},Oe.values=Kn,Wr.prototype={constructor:Wr,reset:function(Fn){var eo;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,Qn(eo=this.tryEntries).call(eo,so),!Fn)for(var lo in this)lo.charAt(0)==="t"&&At.call(this,lo)&&!isNaN(+Lo(lo).call(lo,1))&&(this[lo]=void 0)},stop:function(){this.done=!0;var Fn=this.tryEntries[0].completion;if(Fn.type==="throw")throw Fn.arg;return this.rval},dispatchException:function(Fn){if(this.done)throw Fn;var eo=this;function lo($o,Wo){return aa.type="throw",aa.arg=Fn,eo.next=$o,Wo&&(eo.method="next",eo.arg=void 0),!!Wo}for(var So=this.tryEntries.length-1;So>=0;--So){var Co=this.tryEntries[So],aa=Co.completion;if(Co.tryLoc==="root")return lo("end");if(Co.tryLoc<=this.prev){var No=At.call(Co,"catchLoc"),Sa=At.call(Co,"finallyLoc");if(No&&Sa){if(this.prev<Co.catchLoc)return lo(Co.catchLoc,!0);if(this.prev<Co.finallyLoc)return lo(Co.finallyLoc)}else if(No){if(this.prev<Co.catchLoc)return lo(Co.catchLoc,!0)}else{if(!Sa)throw new Error("try statement without catch or finally");if(this.prev<Co.finallyLoc)return lo(Co.finallyLoc)}}}},abrupt:function(Fn,eo){for(var lo=this.tryEntries.length-1;lo>=0;--lo){var So=this.tryEntries[lo];if(So.tryLoc<=this.prev&&At.call(So,"finallyLoc")&&this.prev<So.finallyLoc){var Co=So;break}}Co&&(Fn==="break"||Fn==="continue")&&Co.tryLoc<=eo&&eo<=Co.finallyLoc&&(Co=null);var aa=Co?Co.completion:{};return aa.type=Fn,aa.arg=eo,Co?(this.method="next",this.next=Co.finallyLoc,Dr):this.complete(aa)},complete:function(Fn,eo){if(Fn.type==="throw")throw Fn.arg;return Fn.type==="break"||Fn.type==="continue"?this.next=Fn.arg:Fn.type==="return"?(this.rval=this.arg=Fn.arg,this.method="return",this.next="end"):Fn.type==="normal"&&eo&&(this.next=eo),Dr},finish:function(Fn){for(var eo=this.tryEntries.length-1;eo>=0;--eo){var lo=this.tryEntries[eo];if(lo.finallyLoc===Fn)return this.complete(lo.completion,lo.afterLoc),so(lo),Dr}},catch:function(Fn){for(var eo=this.tryEntries.length-1;eo>=0;--eo){var lo=this.tryEntries[eo];if(lo.tryLoc===Fn){var So=lo.completion;if(So.type==="throw"){var Co=So.arg;so(lo)}return Co}}throw new Error("illegal catch attempt")},delegateYield:function(Fn,eo,lo){return this.delegate={iterator:Kn(Fn),resultName:eo,nextLoc:lo},this.method==="next"&&(this.arg=void 0),Dr}},Oe}pe.exports=ze,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),El=X1(),wr=El;try{regeneratorRuntime=El}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=El:Function("r","regeneratorRuntime = r")(El)}_n({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var wg=9007199254740991,Xl=Object.assign,la=Object.defineProperty,Zl=_e([].concat),xg=!Xl||V(function(){if($e&&Xl({b:1},Xl(la({},"a",{enumerable:!0,get:function(){la(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var pe={},Ie={},ze=Symbol(),Oe="abcdefghijklmnopqrst";return pe[ze]=7,Oe.split("").forEach(function(Ne){Ie[Ne]=Ne}),Xl({},pe)[ze]!=7||qs(Xl({},Ie)).join("")!=Oe})?function(Ie,ze){for(var Oe=Pn(Ie),Ne=arguments.length,At=1,nr=hc.f,kt=ur.f;Ne>At;)for(var dr,gr=hr(arguments[At++]),Ar=nr?Zl(qs(gr),nr(gr)):qs(gr),Rr=Ar.length,Ur=0;Rr>Ur;)dr=Ar[Ur++],$e&&!jt(kt,gr,dr)||(Oe[dr]=gr[dr]);return Oe}:Xl;_n({target:"Object",stat:!0,arity:2,forced:Object.assign!==xg},{assign:xg});var Un=kr.Object.assign;function eu(pe,Ie){var ze={};for(var Oe in pe)Object.prototype.hasOwnProperty.call(pe,Oe)&&Ie.indexOf(Oe)<0&&(ze[Oe]=pe[Oe]);if(pe!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ne=0;for(Oe=Object.getOwnPropertySymbols(pe);Ne<Oe.length;Ne++)Ie.indexOf(Oe[Ne])<0&&Object.prototype.propertyIsEnumerable.call(pe,Oe[Ne])&&(ze[Oe[Ne]]=pe[Oe[Ne]])}return ze}function Hr(pe,Ie,ze,Oe){return new(ze||(ze=Promise))(function(Ne,At){function nr(gr){try{dr(Oe.next(gr))}catch(Ar){At(Ar)}}function kt(gr){try{dr(Oe.throw(gr))}catch(Ar){At(Ar)}}function dr(gr){gr.done?Ne(gr.value):function(Rr){return Rr instanceof ze?Rr:new ze(function(Ur){Ur(Rr)})}(gr.value).then(nr,kt)}dr((Oe=Oe.apply(pe,Ie||[])).next())})}var Sv=V(function(){if(typeof ArrayBuffer=="function"){var pe=new ArrayBuffer(8);Object.isExtensible(pe)&&Object.defineProperty(pe,"a",{value:8})}}),fa=Object.isExtensible,_g=V(function(){fa(1)})||Sv?function(Ie){return!!rr(Ie)&&(!Sv||er(Ie)!="ArrayBuffer")&&(!fa||fa(Ie))}:fa,Ig=!V(function(){return Object.isExtensible(Object.preventExtensions({}))}),Eg=g(function(pe){var Ie=Oa.f,ze=!1,Oe=Do("meta"),Ne=0,At=function(kt){Ie(kt,Oe,{value:{objectID:"O"+Ne++,weakData:{}}})},nr=pe.exports={enable:function(){nr.enable=function(){},ze=!0;var kt=gc.f,dr=_e([].splice),gr={};gr[Oe]=1,kt(gr).length&&(gc.f=function(Ar){for(var Rr=kt(Ar),Ur=0,Dr=Rr.length;Ur<Dr;Ur++)if(Rr[Ur]===Oe){dr(Rr,Ur,1);break}return Rr},_n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Vu.f}))},fastKey:function(kt,dr){if(!rr(kt))return typeof kt=="symbol"?kt:(typeof kt=="string"?"S":"P")+kt;if(!hn(kt,Oe)){if(!_g(kt))return"F";if(!dr)return"E";At(kt)}return kt[Oe].objectID},getWeakData:function(kt,dr){if(!hn(kt,Oe)){if(!_g(kt))return!0;if(!dr)return!1;At(kt)}return kt[Oe].weakData},onFreeze:function(kt){return Ig&&ze&&_g(kt)&&!hn(kt,Oe)&&At(kt),kt}};Ni[Oe]=!0}),Z1=Oa.f,eS=Ws.forEach,Pg=ts.set,Ja=ts.getterFor,Tv=function(pe,Ie,ze){var Oe,Ne=pe.indexOf("Map")!==-1,At=pe.indexOf("Weak")!==-1,nr=Ne?"set":"add",kt=L[pe],dr=kt&&kt.prototype,gr={};if($e&&Ve(kt)&&(At||dr.forEach&&!V(function(){new kt().entries().next()}))){var Ar=(Oe=Ie(function(Ur,Dr){Pg(ld(Ur,Ar),{type:pe,collection:new kt}),Dr!=null&&xo(Dr,Ur[nr],{that:Ur,AS_ENTRIES:Ne})})).prototype,Rr=Ja(pe);eS(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(Ur){var Dr=Ur=="add"||Ur=="set";!(Ur in dr)||At&&Ur=="clear"||va(Ar,Ur,function(Jr,kn){var Tn=Rr(this).collection;if(!Dr&&At&&!rr(Jr))return Ur=="get"&&void 0;var jn=Tn[Ur](Jr===0?0:Jr,kn);return Dr?this:jn})}),At||Z1(Ar,"size",{configurable:!0,get:function(){return Rr(this).collection.size}})}else Oe=ze.getConstructor(Ie,pe,Ne,nr),Eg.enable();return li(Oe,pe,!1,!0),gr[pe]=Oe,_n({global:!0,forced:!0},gr),At||ze.setStrong(Oe,pe,Ne),Oe},kp=function(pe,Ie,ze){for(var Oe in Ie)ze&&ze.unsafe&&pe[Oe]?pe[Oe]=Ie[Oe]:Hs(pe,Oe,Ie[Oe],ze);return pe},Ys=Oa.f,ri=Eg.fastKey,Vn=ts.set,wp=ts.getterFor,Nd={getConstructor:function(pe,Ie,ze,Oe){var Ne=pe(function(gr,Ar){ld(gr,At),Vn(gr,{type:Ie,index:es(null),first:void 0,last:void 0,size:0}),$e||(gr.size=0),pr(Ar)||xo(Ar,gr[Oe],{that:gr,AS_ENTRIES:ze})}),At=Ne.prototype,nr=wp(Ie),kt=function(gr,Ar,Rr){var Ur,Dr,Jr=nr(gr),kn=dr(gr,Ar);return kn?kn.value=Rr:(Jr.last=kn={index:Dr=ri(Ar,!0),key:Ar,value:Rr,previous:Ur=Jr.last,next:void 0,removed:!1},Jr.first||(Jr.first=kn),Ur&&(Ur.next=kn),$e?Jr.size++:gr.size++,Dr!=="F"&&(Jr.index[Dr]=kn)),gr},dr=function(gr,Ar){var Rr,Ur=nr(gr),Dr=ri(Ar);if(Dr!=="F")return Ur.index[Dr];for(Rr=Ur.first;Rr;Rr=Rr.next)if(Rr.key==Ar)return Rr};return kp(At,{clear:function(){for(var Ar=nr(this),Rr=Ar.index,Ur=Ar.first;Ur;)Ur.removed=!0,Ur.previous&&(Ur.previous=Ur.previous.next=void 0),delete Rr[Ur.index],Ur=Ur.next;Ar.first=Ar.last=void 0,$e?Ar.size=0:this.size=0},delete:function(gr){var Ar=this,Rr=nr(Ar),Ur=dr(Ar,gr);if(Ur){var Dr=Ur.next,Jr=Ur.previous;delete Rr.index[Ur.index],Ur.removed=!0,Jr&&(Jr.next=Dr),Dr&&(Dr.previous=Jr),Rr.first==Ur&&(Rr.first=Dr),Rr.last==Ur&&(Rr.last=Jr),$e?Rr.size--:Ar.size--}return!!Ur},forEach:function(Ar){for(var Rr,Ur=nr(this),Dr=Go(Ar,arguments.length>1?arguments[1]:void 0);Rr=Rr?Rr.next:Ur.first;)for(Dr(Rr.value,Rr.key,this);Rr&&Rr.removed;)Rr=Rr.previous},has:function(Ar){return!!dr(this,Ar)}}),kp(At,ze?{get:function(Ar){var Rr=dr(this,Ar);return Rr&&Rr.value},set:function(Ar,Rr){return kt(this,Ar===0?0:Ar,Rr)}}:{add:function(Ar){return kt(this,Ar=Ar===0?0:Ar,Ar)}}),$e&&Ys(At,"size",{get:function(){return nr(this).size}}),Ne},setStrong:function(pe,Ie,ze){var Oe=Ie+" Iterator",Ne=wp(Ie),At=wp(Oe);rd(pe,Ie,function(nr,kt){Vn(this,{type:Oe,target:nr,state:Ne(nr),kind:kt,last:void 0})},function(){for(var nr=At(this),kt=nr.kind,dr=nr.last;dr&&dr.removed;)dr=dr.previous;return nr.target&&(nr.last=dr=dr?dr.next:nr.state.first)?kt=="keys"?{value:dr.key,done:!1}:kt=="values"?{value:dr.value,done:!1}:{value:[dr.key,dr.value],done:!1}:(nr.target=void 0,{value:void 0,done:!0})},ze?"entries":"values",!ze,!0),Hm(Ie)}};Tv("Map",function(pe){return function(){return pe(this,arguments.length?arguments[0]:void 0)}},Nd);var Ag=kr.Map,Cv=[].push,Ng=function(Ie){var ze,Oe,Ne,At,nr=arguments.length,kt=nr>1?arguments[1]:void 0;return xl(this),(ze=kt!==void 0)&&Xr(kt),pr(Ie)?new this:(Oe=[],ze?(Ne=0,At=Go(kt,nr>2?arguments[2]:void 0),xo(Ie,function(dr){jt(Cv,Oe,At(dr,Ne++))})):xo(Ie,Cv,{that:Oe}),new this(Oe))};_n({target:"Map",stat:!0,forced:!0},{from:Ng});var Mv=function(){return new this(Vs(arguments))};_n({target:"Map",stat:!0,forced:!0},{of:Mv});var kv=function(){for(var Ie,ze=po(this),Oe=Xr(ze.delete),Ne=!0,At=0,nr=arguments.length;At<nr;At++)Ie=jt(Oe,ze,arguments[At]),Ne=Ne&&Ie;return!!Ne};_n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:kv}),_n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(Ie,ze){var Oe,Ne,At=po(this),nr=Xr(At.get),kt=Xr(At.has),dr=Xr(At.set);return jt(kt,At,Ie)?(Oe=jt(nr,At,Ie),"update"in ze&&(Oe=ze.update(Oe,Ie,At),jt(dr,At,Ie,Oe)),Oe):(Ne=ze.insert(Ie,At),jt(dr,At,Ie,Ne),Ne)}});var Zi=Sc;_n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return!xo(Oe,function(At,nr,kt){if(!Ne(nr,At,ze))return kt()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0),At=new(Js(ze,xr("Map"))),nr=Xr(At.set);return xo(Oe,function(kt,dr){Ne(dr,kt,ze)&&jt(nr,At,kt,dr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),At}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return xo(Oe,function(At,nr,kt){if(Ne(nr,At,ze))return kt(nr)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return xo(Oe,function(At,nr,kt){if(Ne(nr,At,ze))return kt(At)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var tS=_e([].push);_n({target:"Map",stat:!0,forced:!0},{groupBy:function(Ie,ze){Xr(ze);var Oe=Sc(Ie),Ne=new this,At=Xr(Ne.has),nr=Xr(Ne.get),kt=Xr(Ne.set);return xo(Oe,function(dr){var gr=ze(dr);jt(At,Ne,gr)?tS(jt(nr,Ne,gr),dr):jt(kt,Ne,gr,[dr])},{IS_ITERATOR:!0}),Ne}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(Ie){return xo(Zi(po(this)),function(ze,Oe,Ne){if((At=Oe)===(nr=Ie)||At!=At&&nr!=nr)return Ne();var At,nr},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Map",stat:!0,forced:!0},{keyBy:function(Ie,ze){var Oe=new this;Xr(ze);var Ne=Xr(Oe.set);return xo(Ie,function(At){jt(Ne,Oe,ze(At),At)}),Oe}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(Ie){return xo(Zi(po(this)),function(ze,Oe,Ne){if(Oe===Ie)return Ne(ze)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0),At=new(Js(ze,xr("Map"))),nr=Xr(At.set);return xo(Oe,function(kt,dr){jt(nr,At,Ne(dr,kt,ze),dr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),At}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0),At=new(Js(ze,xr("Map"))),nr=Xr(At.set);return xo(Oe,function(kt,dr){jt(nr,At,kt,Ne(dr,kt,ze))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),At}}),_n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(Ie){for(var ze=po(this),Oe=Xr(ze.set),Ne=arguments.length,At=0;At<Ne;)xo(arguments[At++],Oe,{that:ze,AS_ENTRIES:!0});return ze}});var wv=TypeError;_n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=arguments.length<2,At=Ne?void 0:arguments[1];if(Xr(Ie),xo(Oe,function(nr,kt){Ne?(Ne=!1,At=kt):At=Ie(At,kt,nr,ze)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Ne)throw wv("Reduce of empty map with no initial value");return At}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(Ie){var ze=po(this),Oe=Zi(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return xo(Oe,function(At,nr,kt){if(Ne(nr,At,ze))return kt()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var rS=TypeError;_n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(Ie,ze){var Oe=po(this),Ne=Xr(Oe.get),At=Xr(Oe.has),nr=Xr(Oe.set),kt=arguments.length;Xr(ze);var dr=jt(At,Oe,Ie);if(!dr&&kt<3)throw rS("Updating absent value");var gr=dr?jt(Ne,Oe,Ie):Xr(kt>2?arguments[2]:void 0)(Ie,Oe);return jt(nr,Oe,Ie,ze(gr,Ie,Oe)),Oe}});var xv=TypeError,Og=function(Ie,ze){var Oe,Ne=po(this),At=Xr(Ne.get),nr=Xr(Ne.has),kt=Xr(Ne.set),dr=arguments.length>2?arguments[2]:void 0;if(!Ve(ze)&&!Ve(dr))throw xv("At least one callback required");return jt(nr,Ne,Ie)?(Oe=jt(At,Ne,Ie),Ve(ze)&&(Oe=ze(Oe),jt(kt,Ne,Ie,Oe))):Ve(dr)&&(Oe=dr(),jt(kt,Ne,Ie,Oe)),Oe};_n({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Og}),_n({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Og});var Pl=Ag,_v=Date,nS=_e(_v.prototype.getTime);_n({target:"Date",stat:!0},{now:function(){return nS(new _v)}});var _s=kr.Date.now,ec=sa("Array").concat,Rg=Array.prototype,gi=function(pe){var Ie=pe.concat;return pe===Rg||vr(Rg,pe)&&Ie===Rg.concat?ec:Ie},oS=/MSIE .\./.test(Ir),aS=L.Function,Bg=function(pe){return oS?function(Ie,ze){var Oe=zm(arguments.length,1)>2,Ne=Ve(Ie)?Ie:aS(Ie),At=Oe?Vs(arguments,2):void 0;return pe(Oe?function(){le(Ne,this,At)}:Ne,ze)}:pe},_c={setTimeout:Bg(L.setTimeout),setInterval:Bg(L.setInterval)},Fg=_c.setInterval;_n({global:!0,bind:!0,forced:L.setInterval!==Fg},{setInterval:Fg});var Iv=_c.setTimeout;_n({global:!0,bind:!0,forced:L.setTimeout!==Iv},{setTimeout:Iv});var Ia=kr.setTimeout;kr.JSON||(kr.JSON={stringify:JSON.stringify});var sS=function(Ie,ze,Oe){return le(kr.JSON.stringify,null,arguments)},Ao=sS,Ev=Ws.map,Pv=fc("map");_n({target:"Array",proto:!0,forced:!Pv},{map:function(Ie){return Ev(this,Ie,arguments.length>1?arguments[1]:void 0)}});var Av=sa("Array").map,xp=Array.prototype,Ro=function(pe){var Ie=pe.map;return pe===xp||vr(xp,pe)&&Ie===xp.map?Av:Ie},$g=g(function(pe){var Ie=Object.prototype.hasOwnProperty,ze="~";function Oe(){}function Ne(dr,gr,Ar){this.fn=dr,this.context=gr,this.once=Ar||!1}function At(dr,gr,Ar,Rr,Ur){if(typeof Ar!="function")throw new TypeError("The listener must be a function");var Dr=new Ne(Ar,Rr||dr,Ur),Jr=ze?ze+gr:gr;return dr._events[Jr]?dr._events[Jr].fn?dr._events[Jr]=[dr._events[Jr],Dr]:dr._events[Jr].push(Dr):(dr._events[Jr]=Dr,dr._eventsCount++),dr}function nr(dr,gr){--dr._eventsCount==0?dr._events=new Oe:delete dr._events[gr]}function kt(){this._events=new Oe,this._eventsCount=0}Object.create&&(Oe.prototype=Object.create(null),new Oe().__proto__||(ze=!1)),kt.prototype.eventNames=function(){var gr,Ar,Rr=[];if(this._eventsCount===0)return Rr;for(Ar in gr=this._events)Ie.call(gr,Ar)&&Rr.push(ze?Ar.slice(1):Ar);return Object.getOwnPropertySymbols?Rr.concat(Object.getOwnPropertySymbols(gr)):Rr},kt.prototype.listeners=function(gr){var Ar=ze?ze+gr:gr,Rr=this._events[Ar];if(!Rr)return[];if(Rr.fn)return[Rr.fn];for(var Ur=0,Dr=Rr.length,Jr=new Array(Dr);Ur<Dr;Ur++)Jr[Ur]=Rr[Ur].fn;return Jr},kt.prototype.listenerCount=function(gr){var Ar=ze?ze+gr:gr,Rr=this._events[Ar];return Rr?Rr.fn?1:Rr.length:0},kt.prototype.emit=function(gr,Ar,Rr,Ur,Dr,Jr){var kn=ze?ze+gr:gr;if(!this._events[kn])return!1;var Tn,jn,Bn=this._events[kn],Gn=arguments.length;if(Bn.fn){switch(Bn.once&&this.removeListener(gr,Bn.fn,void 0,!0),Gn){case 1:return Bn.fn.call(Bn.context),!0;case 2:return Bn.fn.call(Bn.context,Ar),!0;case 3:return Bn.fn.call(Bn.context,Ar,Rr),!0;case 4:return Bn.fn.call(Bn.context,Ar,Rr,Ur),!0;case 5:return Bn.fn.call(Bn.context,Ar,Rr,Ur,Dr),!0;case 6:return Bn.fn.call(Bn.context,Ar,Rr,Ur,Dr,Jr),!0}for(jn=1,Tn=new Array(Gn-1);jn<Gn;jn++)Tn[jn-1]=arguments[jn];Bn.fn.apply(Bn.context,Tn)}else{var $n,ho=Bn.length;for(jn=0;jn<ho;jn++)switch(Bn[jn].once&&this.removeListener(gr,Bn[jn].fn,void 0,!0),Gn){case 1:Bn[jn].fn.call(Bn[jn].context);break;case 2:Bn[jn].fn.call(Bn[jn].context,Ar);break;case 3:Bn[jn].fn.call(Bn[jn].context,Ar,Rr);break;case 4:Bn[jn].fn.call(Bn[jn].context,Ar,Rr,Ur);break;default:if(!Tn)for($n=1,Tn=new Array(Gn-1);$n<Gn;$n++)Tn[$n-1]=arguments[$n];Bn[jn].fn.apply(Bn[jn].context,Tn)}}return!0},kt.prototype.on=function(gr,Ar,Rr){return At(this,gr,Ar,Rr,!1)},kt.prototype.once=function(gr,Ar,Rr){return At(this,gr,Ar,Rr,!0)},kt.prototype.removeListener=function(gr,Ar,Rr,Ur){var Dr=ze?ze+gr:gr;if(!this._events[Dr])return this;if(!Ar)return nr(this,Dr),this;var Jr=this._events[Dr];if(Jr.fn)Jr.fn!==Ar||Ur&&!Jr.once||Rr&&Jr.context!==Rr||nr(this,Dr);else{for(var kn=0,Tn=[],jn=Jr.length;kn<jn;kn++)(Jr[kn].fn!==Ar||Ur&&!Jr[kn].once||Rr&&Jr[kn].context!==Rr)&&Tn.push(Jr[kn]);Tn.length?this._events[Dr]=Tn.length===1?Tn[0]:Tn:nr(this,Dr)}return this},kt.prototype.removeAllListeners=function(gr){var Ar;return gr?(Ar=ze?ze+gr:gr,this._events[Ar]&&nr(this,Ar)):(this._events=new Oe,this._eventsCount=0),this},kt.prototype.off=kt.prototype.removeListener,kt.prototype.addListener=kt.prototype.on,kt.prefixed=ze,kt.EventEmitter=kt,pe.exports=kt}),iS=tu;function tu(pe){pe=pe||{},this.ms=pe.min||100,this.max=pe.max||1e4,this.factor=pe.factor||2,this.jitter=pe.jitter>0&&pe.jitter<=1?pe.jitter:0,this.attempts=0}tu.prototype.duration=function(){var pe=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var Ie=Math.random(),ze=Math.floor(Ie*this.jitter*pe);pe=1&Math.floor(10*Ie)?pe+ze:pe-ze}return 0|Math.min(pe,this.max)},tu.prototype.reset=function(){this.attempts=0},tu.prototype.setMin=function(pe){this.ms=pe},tu.prototype.setMax=function(pe){this.max=pe},tu.prototype.setJitter=function(pe){this.jitter=pe};var _p=typeof e=="object"&&e&&e.Object===Object&&e,Fo=typeof self=="object"&&self&&self.Object===Object&&self,hi=_p||Fo||Function("return this")(),tc=hi.Symbol,Al=Object.prototype,Nv=Al.hasOwnProperty,cS=Al.toString,ni=tc?tc.toStringTag:void 0,Ci=function(Ie){var ze=Nv.call(Ie,ni),Oe=Ie[ni];try{Ie[ni]=void 0;var Ne=!0}catch{}var At=cS.call(Ie);return Ne&&(ze?Ie[ni]=Oe:delete Ie[ni]),At},Ov=Object.prototype.toString,lS=function(Ie){return Ov.call(Ie)},Rv=tc?tc.toStringTag:void 0,Mi=function(Ie){return Ie==null?Ie===void 0?"[object Undefined]":"[object Null]":Rv&&Rv in Object(Ie)?Ci(Ie):lS(Ie)},Ui=function(Ie){var ze=typeof Ie;return Ie!=null&&(ze=="object"||ze=="function")},Ip=function(Ie){if(!Ui(Ie))return!1;var ze=Mi(Ie);return ze=="[object Function]"||ze=="[object GeneratorFunction]"||ze=="[object AsyncFunction]"||ze=="[object Proxy]"},Bv={deviceId:"",timeout:8e3},Fv={account:"",appkey:"",token:"",debugLevel:"off",needReconnect:!0,reconnectionAttempts:wg,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},zc=Au.includes,qi=V(function(){return!Array(1).includes()});_n({target:"Array",proto:!0,forced:qi},{includes:function(Ie){return zc(this,Ie,arguments.length>1?arguments[1]:void 0)}});var Ep=sa("Array").includes,$v=To("match"),uS=TypeError,Lv=function(pe){if(function(Ie){var ze;return rr(Ie)&&((ze=Ie[$v])!==void 0?!!ze:er(Ie)=="RegExp")}(pe))throw uS("The method doesn't accept regular expressions");return pe},dS=To("match"),pS=_e("".indexOf);_n({target:"String",proto:!0,forced:!function(pe){var Ie=/./;try{"/./"[pe](Ie)}catch{try{return Ie[dS]=!1,"/./"[pe](Ie)}catch{}}return!1}("includes")},{includes:function(Ie){return!!~pS(rs(Pr(this)),rs(Lv(Ie)),arguments.length>1?arguments[1]:void 0)}});var fS=sa("String").includes,Lg=Array.prototype,jg=String.prototype,Vi=function(pe){var Ie=pe.includes;return pe===Lg||vr(Lg,pe)&&Ie===Lg.includes?Ep:typeof pe=="string"||pe===jg||vr(jg,pe)&&Ie===jg.includes?fS:Ie},mS=Ws.findIndex,gS="findIndex",jv=!0;gS in[]&&Array(1).findIndex(function(){jv=!1}),_n({target:"Array",proto:!0,forced:jv},{findIndex:function(Ie){return mS(this,Ie,arguments.length>1?arguments[1]:void 0)}});var Dg=sa("Array").findIndex,Od=Array.prototype,Wc=function(pe){var Ie=pe.findIndex;return pe===Od||vr(Od,pe)&&Ie===Od.findIndex?Dg:Ie},hS=g(function(pe){function Ie(ze){var Oe;return pe.exports=Ie=si?Xo(Oe=pi).call(Oe):function(At){return At.__proto__||pi(At)},pe.exports.__esModule=!0,pe.exports.default=pe.exports,Ie(ze)}pe.exports=Ie,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),vS=Au.indexOf,Pp=_e([].indexOf),Dv=!!Pp&&1/Pp([1],1,-0)<0,Ug=fi("indexOf");_n({target:"Array",proto:!0,forced:Dv||!Ug},{indexOf:function(Ie){var ze=arguments.length>1?arguments[1]:void 0;return Dv?Pp(this,Ie,ze)||0:vS(this,Ie,ze)}});var yS=sa("Array").indexOf,qg=Array.prototype,Ba=function(pe){var Ie=pe.indexOf;return pe===qg||vr(qg,pe)&&Ie===qg.indexOf?yS:Ie},Vg=g(function(pe){pe.exports=function(ze){var Oe;return Ba(Oe=Function.toString.call(ze)).call(Oe,"[native code]")!==-1},pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Hg=xr("Reflect","construct"),bS=Object.prototype,Uv=[].push,zg=V(function(){function pe(){}return!(Hg(function(){},[],pe)instanceof pe)}),Wg=!V(function(){Hg(function(){})}),rc=zg||Wg;_n({target:"Reflect",stat:!0,forced:rc,sham:rc},{construct:function(Ie,ze){xl(Ie),po(ze);var Oe=arguments.length<3?Ie:xl(arguments[2]);if(Wg&&!zg)return Hg(Ie,ze,Oe);if(Ie==Oe){switch(ze.length){case 0:return new Ie;case 1:return new Ie(ze[0]);case 2:return new Ie(ze[0],ze[1]);case 3:return new Ie(ze[0],ze[1],ze[2]);case 4:return new Ie(ze[0],ze[1],ze[2],ze[3])}var Ne=[null];return le(Uv,Ne,ze),new(le(Bu,Ie,Ne))}var At=Oe.prototype,nr=es(rr(At)?At:bS),kt=le(Ie,nr,ze);return rr(kt)?kt:nr}});var Ic=kr.Reflect.construct,SS=g(function(pe){pe.exports=function(){if(typeof Reflect>"u"||!Ic||Ic.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ic(Boolean,[],function(){})),!0}catch{return!1}},pe.exports.__esModule=!0,pe.exports.default=pe.exports}),TS=g(function(pe){function Ie(ze,Oe,Ne){var At;return SS()?(pe.exports=Ie=Xo(At=Ic).call(At),pe.exports.__esModule=!0,pe.exports.default=pe.exports):(pe.exports=Ie=function(kt,dr,gr){var Ar=[null];Ar.push.apply(Ar,dr);var Rr=new(Xo(Function).apply(kt,Ar));return gr&&$u(Rr,gr.prototype),Rr},pe.exports.__esModule=!0,pe.exports.default=pe.exports),Ie.apply(null,arguments)}pe.exports=Ie,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Ec=g(function(pe){function Ie(ze){var Oe=typeof Pl=="function"?new Pl:void 0;return pe.exports=Ie=function(At){if(At===null||!Vg(At))return At;if(typeof At!="function")throw new TypeError("Super expression must either be null or a function");if(Oe!==void 0){if(Oe.has(At))return Oe.get(At);Oe.set(At,nr)}function nr(){return TS(At,arguments,hS(this).constructor)}return nr.prototype=Cs(At.prototype,{constructor:{value:nr,enumerable:!1,writable:!0,configurable:!0}}),$u(nr,At)},pe.exports.__esModule=!0,pe.exports.default=pe.exports,Ie(ze)}pe.exports=Ie,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Bo=function(pe){function Ie(ze,Oe,Ne){var At;return Oe===void 0&&(Oe={}),Ne===void 0&&(Ne=400),(At=pe.call(this,ze)||this).data=Oe,At.code=Ne,At.name="customError",At}return ea(Ie,pe),Ie}(n(Ec)(Error)),Nl=function(pe){function Ie(ze,Oe,Ne){var At;return Oe===void 0&&(Oe={}),(At=pe.call(this,ze,Oe,414)||this).code=414,At.name="validateError",At.rules=Ne,At}return ea(Ie,pe),Ie}(Bo),Ap={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},Gg=function(pe){function Ie(ze,Oe,Ne,At,nr){var kt;return Ne===void 0&&(Ne=""),At===void 0&&(At=new Date().getTime()),nr===void 0&&(nr={}),Ne=Ne||Ap[ze],(kt=pe.call(this,Ne,nr,ze)||this).name="cmdError",kt.cmd=Oe,kt.timetag=At,kt}return ea(Ie,pe),Ie}(Bo),ru=function(pe){function Ie(ze,Oe,Ne){var At;return(At=pe.call(this,ze,{},412)||this).code=412,At.name="formatError",At.key=Oe,At.reason=Ne,At}return ea(Ie,pe),Ie}(Bo),Gc=function(pe){function Ie(ze,Oe,Ne,At,nr){var kt;return(kt=pe.call(this,ze,{file:nr},400)||this).name="uploadError",kt.rawError=Oe,kt.curProvider=Ne||1,kt.mixStorePolicy=At,kt}return ea(Ie,pe),Ie}(Bo),Ol=["error","warn","log","debug"],Rd=function(){},Np=["off","error","warn","log","debug"],qv=function(){function pe(ze,Oe){this.name=Oe,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=Rd,this.log=Rd,this.warn=Rd,this.error=Rd,this.name=Oe,pe.instancesName.push(Oe),Vi(Np).call(Np,ze)||(ze="off"),this.setLogFunc(ze)}var Ie=pe.prototype;return Ie.setLogFunc=function(Oe){var Ne=this,At=Wc(Ol).call(Ol,function(nr){return nr===Oe});Qn(Ol).call(Ol,function(nr,kt){kt<=At&&(Ne[nr]=function(){var dr=Lo(Array.prototype).call(arguments),gr=this.formatArgs(dr,nr);this.strategies[nr](gr)})})},Ie.formatArgs=function(Oe,Ne){var At=new Date,nr=At.getMonth()+1+"-"+At.getDate()+" "+At.getHours()+":"+At.getMinutes()+":"+At.getSeconds()+":"+At.getMilliseconds();return"[NIM "+Ne+" "+this.name+" "+nr+"] "+Ro(Oe).call(Oe,function(kt){return kt instanceof Bo?kt.name+", "+kt.code+", "+kt.message:kt instanceof Error?kt&&kt.message?kt.message:kt:typeof kt=="object"?Ao(kt):kt}).join(" ")},pe}();qv.instancesName=[],_n({global:!0},{globalThis:L});var CS=V(function(){qs(1)});_n({target:"Object",stat:!0,forced:CS},{keys:function(Ie){return qs(Pn(Ie))}});var ka=kr.Object.keys,Kg=Ws.filter,Bs=fc("filter");_n({target:"Array",proto:!0,forced:!Bs},{filter:function(Ie){return Kg(this,Ie,arguments.length>1?arguments[1]:void 0)}});var MS=sa("Array").filter,ua=Array.prototype,ki=function(pe){var Ie=pe.filter;return pe===ua||vr(ua,pe)&&Ie===ua.filter?MS:Ie},Vv=g(function(pe,Ie){pe.exports=function(){function ze(gr,Ar){if(!(gr instanceof Ar))throw new TypeError("Cannot call a class as a function")}function Oe(gr,Ar){for(var Rr=0;Rr<Ar.length;Rr++){var Ur=Ar[Rr];Ur.enumerable=Ur.enumerable||!1,Ur.configurable=!0,"value"in Ur&&(Ur.writable=!0),bc(gr,Ur.key,Ur)}}function Ne(gr,Ar,Rr){return Ar&&Oe(gr.prototype,Ar),Rr&&Oe(gr,Rr),bc(gr,"prototype",{writable:!1}),gr}var At={reportUrl:"https://statistic.live.126.net/statics/report/common/form",maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},nr="https://statistic.live.126.net/dispatcher/req",kt=function(){},dr=function(){function gr(Ar){ze(this,gr),this.enable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=At,this.msgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=_s(),this.timer=null,this.setConfig(Ar),this.reportConfig.autoStart&&this.initUploadConfig()}return Ne(gr,[{key:"setConfig",value:function(Rr){this.reportConfig=Un({},this.reportConfig,Rr)}},{key:"reportImmediately",value:function(Rr,Ur){var Dr=this;this.reportConfig.request(Rr,Un({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Ur)).catch(function(Jr){var kn,Tn;(Tn=(kn=Dr.reportConfig)===null||kn===void 0?void 0:kn.logger)===null||Tn===void 0||Tn.warn("Reporter immediately upload failed",Jr)})}},{key:"report",value:function(Rr,Ur){var Dr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Rr){var Jr=_s();Dr?this.lowPriorityMsgList.push({module:Rr,msg:Ur,createTime:Jr}):this.msgList.push({module:Rr,msg:Ur,createTime:Jr}),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(Rr,Ur){if(Rr&&!this.traceMsgCache[Rr]){var Dr=Un(Un({start_time:_s()},Ur),{extension:[]});this.traceMsgCache[Rr]=Dr}}},{key:"reportTraceUpdate",value:function(Rr){}},{key:"reportTraceUpdateV2",value:function(Rr,Ur){if(this.traceMsgCache[Rr]){var Dr=this.traceMsgCache[Rr].extension.length,Jr=new Date().getTime();Ur.duration=Dr===0?Jr-this.traceMsgCache[Rr].start_time:Jr-this.traceMsgCache[Rr].extension[Dr-1].end_time,this.traceMsgCache[Rr].extension.push(Un({end_time:Jr},Ur))}}},{key:"reportTraceEnd",value:function(Rr){var Ur,Dr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.traceMsgCache[Rr]&&(Rr!=="nos"||Dr===!1?(typeof Dr=="boolean"?this.traceMsgCache[Rr].succeed=!!Dr:this.traceMsgCache[Rr].state=Dr,this.traceMsgCache[Rr].duration=_s()-this.traceMsgCache[Rr].start_time,Qn(Ur=this.traceMsgCache[Rr].extension).call(Ur,function(Jr){delete Jr.end_time}),this.report(Rr,this.traceMsgCache[Rr]),this.traceMsgCache[Rr]=null):this.traceMsgCache[Rr]=null)}},{key:"reportTraceCancel",value:function(Rr){this.traceMsgCache[Rr]=null}},{key:"pause",value:function(){this.enable=!1}},{key:"restore",value:function(){this.enable=!0,this.initConfigLoaded||this.initUploadConfig()}},{key:"destroy",value:function(){var Rr,Ur=this;Qn(Rr=ka(this.traceMsgCache)).call(Rr,function(Dr){Ur.reportTraceEnd(Dr,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=kt,this.report=kt,this.reportTraceStart=kt,this.reportTraceUpdate=kt,this.reportTraceEnd=kt,this.pause=kt,this.restore=kt,this.destroy=kt,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.reportConfig={},this.isDestroyed=!0}},{key:"initUploadConfig",value:function(){var Rr,Ur,Dr=this;if(!this.loading){this.loading=!0;var Jr=this.reportConfig.common||{};try{this.reportConfig.request(nr,{method:"GET",dataType:"json",params:{deviceId:Jr.dev_id,sdkVer:Jr.sdk_ver,platform:Jr.platform,appkey:Jr.app_key},timeout:this.reportConfig.timeout}).then(function(kn){var Tn,jn;if(!Dr.isDestroyed){if(kn.status===200&&kn.data&&kn.data.code===200){var Bn=kn.data.data||{};Dr.reportConfig.maxSize=Bn.maxSize>1e3?1e3:Bn.maxSize,Dr.reportConfig.maxInterval=Bn.maxInterval>1e4?1e4:Bn.maxInterval,Dr.reportConfig.maxInterval=Bn.maxInterval<10?10:Bn.maxInterval,Dr.reportConfig.minInterval=Bn.minInterval<2?2:Bn.minInterval,Dr.reportConfig.maxDelay=Bn.maxDelay||300,Dr.reportConfig.maxInterval=1e3*Dr.reportConfig.maxInterval,Dr.reportConfig.minInterval=1e3*Dr.reportConfig.minInterval,Dr.reportConfig.maxDelay=1e3*Dr.reportConfig.maxDelay,Dr.enable=!0,Dr.initConfigLoaded=!0,Dr.loading=!1,Dr.reportHeartBeat()}(jn=(Tn=Dr.reportConfig)===null||Tn===void 0?void 0:Tn.logger)===null||jn===void 0||jn.log("Get reporter upload config success")}}).catch(function(kn){var Tn,jn;Dr.loading=!1,(jn=(Tn=Dr.reportConfig)===null||Tn===void 0?void 0:Tn.logger)===null||jn===void 0||jn.error("Get reporter upload config failed",kn)})}catch(kn){this.loading=!1,(Ur=(Rr=this.reportConfig)===null||Rr===void 0?void 0:Rr.logger)===null||Ur===void 0||Ur.error("Exec reporter request failed",kn)}}}},{key:"reportHeartBeat",value:function(){var Rr=this;this.isDestroyed||(this.timer=Ia(function(){Rr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var Rr=this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;_s()-this.lastReportTime>=Rr&&this.upload()}}},{key:"getUploadMsg",value:function(){var Rr,Ur,Dr,Jr,kn,Tn=this,jn={},Bn=_s();this.msgList=ki(Rr=this.msgList).call(Rr,function(Kn){return Bn-Kn.createTime<Tn.reportConfig.maxDelay}),this.lowPriorityMsgList=ki(Ur=this.lowPriorityMsgList).call(Ur,function(Kn){return Bn-Kn.createTime<Tn.reportConfig.maxDelay}),this.cacheMsgList=ki(Dr=this.cacheMsgList).call(Dr,function(Kn){return Bn-Kn.createTime<Tn.reportConfig.maxDelay});var Gn=Lo(Jr=this.msgList).call(Jr,0,this.reportConfig.maxSize);if(this.msgList=Lo(kn=this.msgList).call(kn,Gn.length),Gn.length<this.reportConfig.maxSize){var $n,ho,co=this.reportConfig.maxSize-Gn.length;Gn=gi(Gn).call(Gn,Lo($n=this.lowPriorityMsgList).call($n,0,co)),this.lowPriorityMsgList=Lo(ho=this.lowPriorityMsgList).call(ho,co)}if(Gn.length<this.reportConfig.maxSize){var oa,so,Wr=this.reportConfig.maxSize-Gn.length;Gn=gi(Gn).call(Gn,Lo(oa=this.cacheMsgList).call(oa,0,Wr)),this.cacheMsgList=Lo(so=this.cacheMsgList).call(so,Wr)}return Qn(Gn).call(Gn,function(Kn){jn[Kn.module]?jn[Kn.module].push(Kn.msg):jn[Kn.module]=[Kn.msg]}),{uploadMsgArr:Gn,uploadMsg:jn}}},{key:"upload",value:function(){var Rr,Ur,Dr=this;if(this.enable&&!(this.lastReportTime&&_s()-this.lastReportTime<this.reportConfig.minInterval)){var Jr=this.getUploadMsg(),kn=Jr.uploadMsgArr,Tn=Jr.uploadMsg;if(kn.length){this.lastReportTime=_s();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:Tn},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(jn){var Bn,Gn,$n,ho;Dr.cacheMsgList=Lo(Bn=gi(Gn=Dr.cacheMsgList).call(Gn,kn)).call(Bn,0,Dr.reportConfig.cacheMaxSize),(ho=($n=Dr.reportConfig)===null||$n===void 0?void 0:$n.logger)===null||ho===void 0||ho.warn("Reporter upload failed",jn)})}catch(jn){(Ur=(Rr=this.reportConfig)===null||Rr===void 0?void 0:Rr.logger)===null||Ur===void 0||Ur.warn("Exec reporter request failed",jn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),gr}();return dr}()}),Ca={setLogger:function(Ie){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function pe(ze,Oe){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var Ie=pe.prototype;return Ie.close=function(Oe,Ne){throw new Error("Method not implemented.")},Ie.send=function(Oe){throw new Error("Method not implemented.")},Ie.onclose=function(Oe){throw new Error("Method not implemented.")},Ie.onerror=function(Oe){throw new Error("Method not implemented.")},Ie.onmessage=function(Oe){throw new Error("Method not implemented.")},Ie.onopen=function(Oe){throw new Error("Method not implemented.")},pe}(),localStorage:{},request:function(Ie,ze){throw new Error("Function not implemented.")},uploadFile:function(Ie){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")}},kS=TypeError,Hv=function(pe){return function(Ie,ze,Oe,Ne){Xr(ze);var At=Pn(Ie),nr=hr(At),kt=Za(At),dr=pe?kt-1:0,gr=pe?-1:1;if(Oe<2)for(;;){if(dr in nr){Ne=nr[dr],dr+=gr;break}if(dr+=gr,pe?dr<0:kt<=dr)throw kS("Reduce of empty array with no initial value")}for(;pe?dr>=0:kt>dr;dr+=gr)dr in nr&&(Ne=ze(Ne,nr[dr],dr,At));return Ne}},Qg={left:Hv(!1),right:Hv(!0)}.left,Op=fi("reduce");_n({target:"Array",proto:!0,forced:!Op||!ds&&Br>79&&Br<83},{reduce:function(Ie){var ze=arguments.length;return Qg(this,Ie,ze,ze>1?arguments[1]:void 0)}});var zv=sa("Array").reduce,nu=Array.prototype,Kc=function(pe){var Ie=pe.reduce;return pe===nu||vr(nu,pe)&&Ie===nu.reduce?zv:Ie},Wv=function(Ie){return Ie===void 0},Bd={},nc={};function ps(pe,Ie){var ze,Oe,Ne;try{Ne=JSON.parse(pe)}catch(Dr){throw Ie.error("Parse command error: ",pe),Dr}var At=Ne.sid+"_"+Ne.cid,nr=Ne.r;if(Vi(ze=["4_1","4_2","4_10","4_11"]).call(ze,At)){var kt=Ne.r[1].headerPacket;At=kt.sid+"_"+kt.cid,nr=Ne.r[1].body}var dr,gr=nc[At],Ar=Bd[gr],Rr=function(Jr,kn){var Tn=Ap[Jr];return Tn===null?null:new Gg(Jr,kn,Tn,new Date().getTime())}(Ne.code,gr),Ur={cmd:gr,raw:Ne,error:Rr,service:Ar==null?void 0:Ar.service,content:{}};if(Ur.error){if(Ur.error.cmd=gr,Ur.error.callFunc="parseCmd",!(!((Oe=Ar==null?void 0:Ar.ignoreErrCodes)===null||Oe===void 0)&&Vi(Oe).call(Oe,Ne.code)))return Ur;Ie.warn("parseCmd:: ignore error ",Ur.error),Ur.error.ignore=!0}return!gr||!Ar?(Ur.notFound=!0,Ur):(Ar.response&&Qn(dr=Ar.response).call(dr,function(Dr,Jr){var kn=nr[Jr],Tn=Dr.type,jn=Dr.name,Bn=Dr.reflectMapper;if(!Wv(kn))switch(Tn){case"Property":Ur.content[jn]=Bn?ns(kn,Bn):kn;break;case"PropertyArray":Ur.content[jn]=Ro(kn).call(kn,function(Gn){return Bn?ns(Gn,Bn):Gn});break;case"long":case"Long":case"byte":case"Byte":case"Number":Ur.content[jn]=+kn;break;default:Ur.content[jn]=kn}}),Ur)}function Is(pe,Ie){var ze={};for(var Oe in pe)Ie[Oe]!==void 0&&(ze[Ie[Oe]]=pe[Oe]);return ze}function ns(pe,Ie){var ze={};for(var Oe in pe)Ie[Oe]!==void 0&&(ze[Ie[Oe]]=pe[Oe]);return ze}function oc(pe){Bd=Un(Bd,pe.cmdConfig),nc=Un(nc,pe.cmdMap)}function Qc(pe){var Ie;return Kc(Ie=ka(pe)).call(Ie,function(ze,Oe){var Ne,At=pe[Oe];return ze[Oe]=Kc(Ne=ka(At)).call(Ne,function(nr,kt){return nr[At[kt]]=kt,nr},{}),ze},{})}var Jg=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],Yg=["transport not supported","client not handshaken","unauthorized"],Rp=["reconnect"],wS=function(pe){function Ie(Oe,Ne,At){var nr;return(nr=pe.call(this)||this).url=Ne,nr.logger=At,nr.websocket=null,nr.core=Oe,nr.url=Ne,nr.status="disconnected",nr.logger=At,nr.connect(),nr}ea(Ie,pe);var ze=Ie.prototype;return ze.connect=function(){var Ne=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+_s(),{method:"GET",dataType:"text",timeout:8e3}).then(function(At){var nr=At.data.split(":"),kt=nr[0],dr=nr[1];return Ne.sessionId=kt,Ne.closeTimeout=1e3*dr,Ne._createWebsocket("wss://"+Ne.url+"/socket.io/1/websocket/"+kt)}).catch(function(At){Ne.logger.error("imsocket::handshake fail. ",At&&At.message),Ne.status="disconnected",Ne.emit("handshakeFailed")})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},ze.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"})),this.websocket.close()}catch(Ne){this.logger.warn("attempt to close websocket error",Ne)}this.clean()}},ze.clean=function(){this.status="disconnected",this.websocket&&(this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},ze.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect")},ze._createWebsocket=function(Ne){var At,nr=this;this.websocket=new Ca.WebSocket(Ne),this.websocket.onmessage=Xo(At=this.onMessage).call(At,this),this.websocket.onclose=function(){nr.logger.log("imsocket:: receive websocket onclose event, current status",nr.status),nr.clean()},this.websocket.onerror=function(kt){nr.logger.error("imsocket:: onerror",kt)}},ze.onMessage=function(Ne){var At;this.resetCloseTimer();var nr=this.decodePacket(Ne.data);if(nr)switch(nr.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",nr.data);break;case"event":nr.name&&this.emit(nr.name,nr.args);break;case"error":nr.reason==="unauthorized"?this.emit("connect_failed",nr.reason):this.emit("error",nr.reason);break;case"heartbeat":(At=this.websocket)===null||At===void 0||At.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",nr.type)}},ze.encodePacket=function(Ne){var At,nr,kt=Ne.type,dr=Ne.id,gr=dr===void 0?"":dr,Ar=Ne.endpoint,Rr=Ar===void 0?"":Ar,Ur=Ne.ack,Dr=null;if(!kt)return"";switch(kt){case"error":At=Ne.reason?Ba(Yg).call(Yg,Ne.reason):"",nr=Ne.advice?Ba(Rp).call(Rp,Ne.advice):"",At===""&&nr===""||(Dr=At+(nr!==""?"+"+nr:""));break;case"message":Ne.data!==""&&(Dr=Ne.data);break;case"event":At={name:Ne.name},At=Ne.args&&Ne.args.length?{name:Ne.name,args:Ne.args}:{name:Ne.name},Dr=Ao(At);break;case"json":Dr=Ao(Ne.data);break;case"connect":Ne.qs&&(Dr=Ne.qs);break;case"ack":Dr=Ne.ackId+(Ne.args&&Ne.args.length?"+"+Ao(Ne.args):"")}var Jr=[Ba(Jg).call(Jg,kt),gr+(Ur==="data"?"+":""),Rr];return Dr!=null&&Jr.push(Dr),Jr.join(":")},ze.decodePacket=function(Ne){if(Ne)if(Ne.charAt(0)!=""){var At=Ne.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(At){var nr,kt=At[1],dr=At[2],gr=At[3],Ar=At[4],Rr=At[5],Ur={type:Jg[+kt],endpoint:Ar};switch(dr&&(Ur.id=dr,Ur.ack=!gr||"data"),Ur.type){case"error":nr=Rr.split("+"),Ur.reason=Yg[+nr[0]]||"";break;case"message":Ur.data=Rr||"";break;case"connect":Ur.qs=Rr||"";break;case"event":try{var Dr=JSON.parse(Rr);Ur.name=Dr.name,Ur.args=Dr.args}catch(Jr){this.logger.error("imsocket::parseData::type::event error",Jr)}Ur.args=Ur.args||[];break;case"json":try{Ur.data=JSON.parse(Rr)}catch(Jr){this.logger.error("imsocket::parseData::type::json error",Jr)}break;case"ack":if((nr=Rr.match(/^([0-9]+)(\+)?(.*)/))&&(Ur.ackId=nr[1],Ur.args=[],nr[3]))try{Ur.args=nr[3]?JSON.parse(nr[3]):[]}catch(Jr){this.logger.error("imsocket::parseData::type::ack error",Jr)}}return Ur}}else this.logger.error("imsocket::unrecognize dataStr",Lo(Ne).call(Ne,0,20))},ze.send=function(Ne){var At,nr={data:Ne,type:"message",endpoint:""};(At=this.websocket)===null||At===void 0||At.send(this.encodePacket(nr))},ze.resetCloseTimer=function(){var Ne=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=Ia(function(){Ne.close()},this.closeTimeout))},Ie}($g),Bp=sa("Array").values,Hi=Array.prototype,xS={DOMTokenList:!0,NodeList:!0},Fp=function(pe){var Ie=pe.values;return pe===Hi||vr(Hi,pe)&&Ie===Hi.values||hn(xS,ci(pe))?Bp:Ie};_n({target:"Array",stat:!0},{isArray:Ms});var Es=kr.Array.isArray,Xg=Ws.every,_S=fi("every");_n({target:"Array",proto:!0,forced:!_S},{every:function(Ie){return Xg(this,Ie,arguments.length>1?arguments[1]:void 0)}});var zi=sa("Array").every,Zg=Array.prototype,ou=function(pe){var Ie=pe.every;return pe===Zg||vr(Zg,pe)&&Ie===Zg.every?zi:Ie},Fs=function(Ie){return Ie!=null&&typeof Ie=="object"},Gv=function(Ie){return Fs(Ie)&&Mi(Ie)=="[object RegExp]"},eh=function(Ie){return function(ze){return Ie(ze)}},au=g(function(pe,Ie){var ze=Ie&&!Ie.nodeType&&Ie,Oe=ze&&pe&&!pe.nodeType&&pe,Ne=Oe&&Oe.exports===ze&&_p.process,At=function(){try{var nr=Oe&&Oe.require&&Oe.require("util").types;return nr||Ne&&Ne.binding&&Ne.binding("util")}catch{}}();pe.exports=At}),th=au&&au.isRegExp,IS=th?eh(th):Gv,rh=hi["__core-js_shared__"],Jc=function(){var pe=/[^.]+$/.exec(rh&&rh.keys&&rh.keys.IE_PROTO||"");return pe?"Symbol(src)_1."+pe:""}(),ES=function(Ie){return!!Jc&&Jc in Ie},PS=Function.prototype.toString,Rl=function(Ie){if(Ie!=null){try{return PS.call(Ie)}catch{}try{return Ie+""}catch{}}return""},AS=/^\[object .+?Constructor\]$/,NS=Function.prototype,OS=Object.prototype,RS=NS.toString,BS=OS.hasOwnProperty,Bl=RegExp("^"+RS.call(BS).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fd=function(Ie){return!(!Ui(Ie)||ES(Ie))&&(Ip(Ie)?Bl:AS).test(Rl(Ie))},FS=function(Ie,ze){return Ie==null?void 0:Ie[ze]},Fl=function(Ie,ze){var Oe=FS(Ie,ze);return Fd(Oe)?Oe:void 0},$d=Fl(Object,"create"),$S=function(){this.__data__=$d?$d(null):{},this.size=0},LS=function(Ie){var ze=this.has(Ie)&&delete this.__data__[Ie];return this.size-=ze?1:0,ze},jS=Object.prototype.hasOwnProperty,DS=function(Ie){var ze=this.__data__;if($d){var Oe=ze[Ie];return Oe==="__lodash_hash_undefined__"?void 0:Oe}return jS.call(ze,Ie)?ze[Ie]:void 0},su=Object.prototype.hasOwnProperty,Kv=function(Ie){var ze=this.__data__;return $d?ze[Ie]!==void 0:su.call(ze,Ie)},US=function(Ie,ze){var Oe=this.__data__;return this.size+=this.has(Ie)?0:1,Oe[Ie]=$d&&ze===void 0?"__lodash_hash_undefined__":ze,this};function Pc(pe){var Ie=-1,ze=pe==null?0:pe.length;for(this.clear();++Ie<ze;){var Oe=pe[Ie];this.set(Oe[0],Oe[1])}}Pc.prototype.clear=$S,Pc.prototype.delete=LS,Pc.prototype.get=DS,Pc.prototype.has=Kv,Pc.prototype.set=US;var Ld=Pc,qS=function(){this.__data__=[],this.size=0},$p=function(Ie,ze){return Ie===ze||Ie!=Ie&&ze!=ze},Lp=function(Ie,ze){for(var Oe=Ie.length;Oe--;)if($p(Ie[Oe][0],ze))return Oe;return-1},VS=Array.prototype.splice,HS=function(Ie){var ze=this.__data__,Oe=Lp(ze,Ie);return!(Oe<0)&&(Oe==ze.length-1?ze.pop():VS.call(ze,Oe,1),--this.size,!0)},iu=function(Ie){var ze=this.__data__,Oe=Lp(ze,Ie);return Oe<0?void 0:ze[Oe][1]},jp=function(Ie){return Lp(this.__data__,Ie)>-1},jd=function(Ie,ze){var Oe=this.__data__,Ne=Lp(Oe,Ie);return Ne<0?(++this.size,Oe.push([Ie,ze])):Oe[Ne][1]=ze,this};function cu(pe){var Ie=-1,ze=pe==null?0:pe.length;for(this.clear();++Ie<ze;){var Oe=pe[Ie];this.set(Oe[0],Oe[1])}}cu.prototype.clear=qS,cu.prototype.delete=HS,cu.prototype.get=iu,cu.prototype.has=jp,cu.prototype.set=jd;var Dp=cu,Yc=Fl(hi,"Map"),zS=function(){this.size=0,this.__data__={hash:new Ld,map:new(Yc||Dp),string:new Ld}},WS=function(Ie){var ze=typeof Ie;return ze=="string"||ze=="number"||ze=="symbol"||ze=="boolean"?Ie!=="__proto__":Ie===null},Up=function(Ie,ze){var Oe=Ie.__data__;return WS(ze)?Oe[typeof ze=="string"?"string":"hash"]:Oe.map},GS=function(Ie){var ze=Up(this,Ie).delete(Ie);return this.size-=ze?1:0,ze},lu=function(Ie){return Up(this,Ie).get(Ie)},qp=function(Ie){return Up(this,Ie).has(Ie)},KS=function(Ie,ze){var Oe=Up(this,Ie),Ne=Oe.size;return Oe.set(Ie,ze),this.size+=Oe.size==Ne?0:1,this};function uu(pe){var Ie=-1,ze=pe==null?0:pe.length;for(this.clear();++Ie<ze;){var Oe=pe[Ie];this.set(Oe[0],Oe[1])}}uu.prototype.clear=zS,uu.prototype.delete=GS,uu.prototype.get=lu,uu.prototype.has=qp,uu.prototype.set=KS;var $l=uu,nh=function(Ie){return this.__data__.set(Ie,"__lodash_hash_undefined__"),this},Qv=function(Ie){return this.__data__.has(Ie)};function Vp(pe){var Ie=-1,ze=pe==null?0:pe.length;for(this.__data__=new $l;++Ie<ze;)this.add(pe[Ie])}Vp.prototype.add=Vp.prototype.push=nh,Vp.prototype.has=Qv;var oh=Vp,QS=function(Ie,ze,Oe,Ne){for(var At=Ie.length,nr=Oe+(Ne?1:-1);Ne?nr--:++nr<At;)if(ze(Ie[nr],nr,Ie))return nr;return-1},Jv=function(Ie){return Ie!=Ie},Yv=function(Ie,ze,Oe){for(var Ne=Oe-1,At=Ie.length;++Ne<At;)if(Ie[Ne]===ze)return Ne;return-1},ah=function(Ie,ze,Oe){return ze==ze?Yv(Ie,ze,Oe):QS(Ie,Jv,Oe)},Hp=function(Ie,ze){return!!(Ie!=null&&Ie.length)&&ah(Ie,ze,0)>-1},Xv=function(Ie,ze,Oe){for(var Ne=-1,At=Ie==null?0:Ie.length;++Ne<At;)if(Oe(ze,Ie[Ne]))return!0;return!1},du=function(Ie,ze){for(var Oe=-1,Ne=Ie==null?0:Ie.length,At=Array(Ne);++Oe<Ne;)At[Oe]=ze(Ie[Oe],Oe,Ie);return At},sh=function(Ie,ze){return Ie.has(ze)},ih=function(Ie,ze,Oe,Ne){var At=-1,nr=Hp,kt=!0,dr=Ie.length,gr=[],Ar=ze.length;if(!dr)return gr;Oe&&(ze=du(ze,eh(Oe))),Ne?(nr=Xv,kt=!1):ze.length>=200&&(nr=sh,kt=!1,ze=new oh(ze));e:for(;++At<dr;){var Rr=Ie[At],Ur=Oe==null?Rr:Oe(Rr);if(Rr=Ne||Rr!==0?Rr:0,kt&&Ur==Ur){for(var Dr=Ar;Dr--;)if(ze[Dr]===Ur)continue e;gr.push(Rr)}else nr(ze,Ur,Ne)||gr.push(Rr)}return gr},zp=function(Ie){return Ie},Zv=function(Ie,ze,Oe){switch(Oe.length){case 0:return Ie.call(ze);case 1:return Ie.call(ze,Oe[0]);case 2:return Ie.call(ze,Oe[0],Oe[1]);case 3:return Ie.call(ze,Oe[0],Oe[1],Oe[2])}return Ie.apply(ze,Oe)},Dd=Math.max,ey=function(Ie,ze,Oe){return ze=Dd(ze===void 0?Ie.length-1:ze,0),function(){for(var Ne=arguments,At=-1,nr=Dd(Ne.length-ze,0),kt=Array(nr);++At<nr;)kt[At]=Ne[ze+At];At=-1;for(var dr=Array(ze+1);++At<ze;)dr[At]=Ne[At];return dr[ze]=Oe(kt),Zv(Ie,this,dr)}},JS=function(Ie){return function(){return Ie}},Wp=function(){try{var pe=Fl(Object,"defineProperty");return pe({},"",{}),pe}catch{}}(),ty=Wp?function(pe,Ie){return Wp(pe,"toString",{configurable:!0,enumerable:!1,value:JS(Ie),writable:!0})}:zp,ch=Date.now,Gp=function(Ie){var ze=0,Oe=0;return function(){var Ne=ch(),At=16-(Ne-Oe);if(Oe=Ne,At>0){if(++ze>=800)return arguments[0]}else ze=0;return Ie.apply(void 0,arguments)}},ry=Gp(ty),ny=function(Ie,ze){return ry(ey(Ie,ze,zp),Ie+"")},lh=function(Ie){return typeof Ie=="number"&&Ie>-1&&Ie%1==0&&Ie<=9007199254740991},Kp=function(Ie){return Ie!=null&&lh(Ie.length)&&!Ip(Ie)},Jn=function(Ie){return Fs(Ie)&&Kp(Ie)},YS=ny(function(pe,Ie){return Jn(pe)?ih(pe,Ie):[]}),pu=YS;function XS(pe,Ie){return Ie instanceof RegExp?"__REGEXP "+Ie.toString():Ie}function On(pe,Ie,ze){var Oe;Ie===void 0&&(Ie={});var Ne={};return Qn(Oe=ka(pe)).call(Oe,function(At){var nr=pe[At].type,kt=ze?"In "+ze+", ":"";if(Ie[At]===void 0){if(pe[At].required===!1)return void(Ne[At]=Ie[At]);throw new Nl(kt+'param "'+At+'" is required',{key:At},"required")}var dr=ZS[nr];if(dr&&!dr(Ie,At,pe[At]))throw new Nl(kt+'param "'+At+'" expects '+Ao(pe[At],XS),{key:At,value:Ie[At]},Ao(pe[At]));Ne[At]=Ie[At]}),Ne}var ZS={string:function(Ie,ze,Oe){var Ne=Oe.allowEmpty,At=Oe.max,nr=Oe.min,kt=Oe.regExp,dr=Ie[ze];return typeof dr=="string"&&(Ne!==!1||dr!=="")&&!(typeof At=="number"&&dr.length>At)&&!(typeof nr=="number"&&dr.length<nr)&&!(IS(kt)&&!kt.test(dr))},number:function(Ie,ze,Oe){var Ne=Oe.min,At=Oe.max,nr=Ie[ze];return typeof nr=="number"&&!(typeof Ne=="number"&&nr<Ne)&&!(typeof At=="number"&&nr>At)},boolean:function(Ie,ze){return typeof Ie[ze]=="boolean"},enum:function(Ie,ze,Oe){var Ne=Fp(Oe),At=Ie[ze];return!Ne||Ba(Ne).call(Ne,At)>-1},array:function(Ie,ze,Oe){var Ne,At=Oe.itemType,nr=Oe.rules,kt=Oe.min,dr=Oe.max,gr=Fp(Oe),Ar=Ie[ze];return!!Es(Ar)&&!(typeof dr=="number"&&Ar.length>dr)&&!(typeof kt=="number"&&Ar.length<kt)&&!(At&&At!=="enum"&&!ou(Ar).call(Ar,function(Rr){return typeof Rr===At}))&&(At!=="enum"||!gr||!pu.apply(void 0,gi(Ne=[Ar]).call(Ne,gr)).length)&&(nr&&Qn(Ar).call(Ar,function(Rr,Ur){return On(nr,Rr,ze+"["+Ur+"]")}),!0)},object:function(Ie,ze,Oe){var Ne=Oe.rules,At=Ie[ze];return Ne&&On(Ne,At,ze),!0}},fu=Fl(hi,"Set"),eT=function(){},Qp=function(Ie){var ze=-1,Oe=Array(Ie.size);return Ie.forEach(function(Ne){Oe[++ze]=Ne}),Oe},uh=fu&&1/Qp(new fu([,-0]))[1]==1/0?function(pe){return new fu(pe)}:eT,oy=uh,Jp=function(Ie,ze,Oe){var Ne=-1,At=Hp,nr=Ie.length,kt=!0,dr=[],gr=dr;if(Oe)kt=!1,At=Xv;else if(nr>=200){var Ar=ze?null:oy(Ie);if(Ar)return Qp(Ar);kt=!1,At=sh,gr=new oh}else gr=ze?[]:dr;e:for(;++Ne<nr;){var Rr=Ie[Ne],Ur=ze?ze(Rr):Rr;if(Rr=Oe||Rr!==0?Rr:0,kt&&Ur==Ur){for(var Dr=gr.length;Dr--;)if(gr[Dr]===Ur)continue e;ze&&gr.push(Ur),dr.push(Rr)}else At(gr,Ur,Oe)||(gr!==dr&&gr.push(Ur),dr.push(Rr))}return dr},tT=function(Ie){return Ie&&Ie.length?Jp(Ie):[]},dh=`	
\v\f\r \u2028\u2029\uFEFF`,Yp=_e("".replace),Xp="["+dh+"]",Ud=RegExp("^"+Xp+Xp+"*"),ay=RegExp(Xp+Xp+"*$"),Zp=function(pe){return function(Ie){var ze=rs(Pr(Ie));return 1&pe&&(ze=Yp(ze,Ud,"")),2&pe&&(ze=Yp(ze,ay,"")),ze}},sy={start:Zp(1),end:Zp(2),trim:Zp(3)}.trim,qd=L.parseInt,ph=L.Symbol,ac=ph&&ph.iterator,Uo=/^[+-]?0x/i,ef=_e(Uo.exec),Wi=qd(dh+"08")!==8||qd(dh+"0x16")!==22||ac&&!V(function(){qd(Object(ac))})?function(Ie,ze){var Oe=sy(rs(Ie));return qd(Oe,ze>>>0||(ef(Uo,Oe)?16:10))}:qd;_n({global:!0,forced:parseInt!=Wi},{parseInt:Wi});var sc,na=kr.parseInt,fh=(sc=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return sc()+sc()+sc()+sc()+sc()+sc()+sc()+sc()});function Ea(pe){var Ie;return ki(Ie=ka(pe)).call(Ie,function(ze){return!(+ze>=0)})}function iy(pe,Ie){var ze,Oe=ki(ze=ka(pe)).call(ze,function(Ne){return pe[Ne]==Ie});return Oe.length>0?Oe[0]:void 0}var rT=TypeError,tf=Object.getOwnPropertyDescriptor,nT=$e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(pe){return pe instanceof TypeError}}()?function(pe,Ie){if(Ms(pe)&&!tf(pe,"length").writable)throw rT("Cannot set read only .length");return pe.length=Ie}:function(pe,Ie){return pe.length=Ie},oT=TypeError,rf=function(pe,Ie){if(!delete pe[Ie])throw oT("Cannot delete property "+bn(Ie)+" of "+bn(pe))},aT=fc("splice"),mh=Math.max,gh=Math.min;_n({target:"Array",proto:!0,forced:!aT},{splice:function(Ie,ze){var Oe,Ne,At,nr,kt,dr,gr=Pn(this),Ar=Za(gr),Rr=Ai(Ie,Ar),Ur=arguments.length;for(Ur===0?Oe=Ne=0:Ur===1?(Oe=0,Ne=Ar-Rr):(Oe=Ur-2,Ne=gh(mh(uc(ze),0),Ar-Rr)),Lu(Ar+Oe-Ne),At=Uu(gr,Ne),nr=0;nr<Ne;nr++)(kt=Rr+nr)in gr&&ii(At,nr,gr[kt]);if(At.length=Ne,Oe<Ne){for(nr=Rr;nr<Ar-Ne;nr++)dr=nr+Oe,(kt=nr+Ne)in gr?gr[dr]=gr[kt]:rf(gr,dr);for(nr=Ar;nr>Ar-Ne+Oe;nr--)rf(gr,nr-1)}else if(Oe>Ne)for(nr=Ar-Ne;nr>Rr;nr--)dr=nr+Oe-1,(kt=nr+Ne-1)in gr?gr[dr]=gr[kt]:rf(gr,dr);for(nr=0;nr<Oe;nr++)gr[nr+Rr]=arguments[nr+2];return nT(gr,Ar-Ne+Oe),At}});var sT=sa("Array").splice,nf=Array.prototype,cy=function(pe){var Ie=pe.splice;return pe===nf||vr(nf,pe)&&Ie===nf.splice?sT:Ie},of=function(pe,Ie,ze,Oe){try{return Oe?Ie(po(ze)[0],ze[1]):Ie(ze)}catch(Ne){sd(pe,"throw",Ne)}},Vd=Array,ly=!Tg(function(pe){Array.from(pe)});_n({target:"Array",stat:!0,forced:ly},{from:function(Ie){var ze=Pn(Ie),Oe=ml(this),Ne=arguments.length,At=Ne>1?arguments[1]:void 0,nr=At!==void 0;nr&&(At=Go(At,Ne>2?arguments[2]:void 0));var kt,dr,gr,Ar,Rr,Ur,Dr=Ml(ze),Jr=0;if(!Dr||this===Vd&&Dm(Dr))for(kt=Za(ze),dr=Oe?new this(kt):Vd(kt);kt>Jr;Jr++)Ur=nr?At(ze[Jr],Jr):ze[Jr],ii(dr,Jr,Ur);else for(Rr=(Ar=Sc(ze,Dr)).next,dr=Oe?new this:[];!(gr=jt(Rr,Ar)).done;Jr++)Ur=nr?of(Ar,At,[gr.value,Jr],!0):gr.value,ii(dr,Jr,Ur);return dr.length=Jr,dr}});var Xc=kr.Array.from,fs=Ml;function uy(pe,Ie){var ze,Oe=ja!==void 0&&fs(pe)||pe["@@iterator"];if(Oe)return Xo(ze=(Oe=Oe.call(pe)).next).call(ze,Oe);if(Es(pe)||(Oe=function(nr,kt){var dr;if(nr){if(typeof nr=="string")return dy(nr,kt);var gr=Lo(dr=Object.prototype.toString.call(nr)).call(dr,8,-1);if(gr==="Object"&&nr.constructor&&(gr=nr.constructor.name),gr==="Map"||gr==="Set")return Xc(nr);if(gr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gr))return dy(nr,kt)}}(pe))||Ie&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ne=0;return function(){return Ne>=pe.length?{done:!0}:{done:!1,value:pe[Ne++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dy(pe,Ie){(Ie==null||Ie>pe.length)&&(Ie=pe.length);for(var ze=0,Oe=new Array(Ie);ze<Ie;ze++)Oe[ze]=pe[ze];return Oe}var $s,py=function(){function pe(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var Ie=pe.prototype;return Ie.addTimer=function(Oe,Ne,At){Ne===void 0&&(Ne=0),At===void 0&&(At=1);var nr=new Date().getTime(),kt=this.id;return this.timerList.push({id:kt,loop:At,count:0,timeout:nr+Ne,interval:Ne,callback:Oe}),this.id++,this.checkTimer(nr),kt},Ie.checkTimer=function(Oe){if(Oe===void 0&&(Oe=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var Ne,At,nr=0,kt=uy(this.timerList);!(Ne=kt()).done;){var dr=Ne.value;(nr===0||nr>dr.timeout)&&(nr=dr.timeout)}this.timerList.length!==0&&(this.timer===null||nr<this.timeout||this.timeout<Oe)&&(this.timer=Ia(Xo(At=this.nowTime).call(At,this),nr-Oe),this.timeout=nr)}},Ie.nowTime=function(){for(var Oe,Ne=new Date().getTime(),At=uy(this.timerList);!(Oe=At()).done;){var nr=Oe.value;Ne>=nr.timeout&&(nr.callback(),nr.count++,nr.timeout=Ne+nr.interval)}this.clerTime(),this.checkTimer(Ne)},Ie.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},Ie.deleteTimer=function(Oe){for(var Ne=this.timerList.length-1;Ne>=0;Ne--){var At;this.timerList[Ne].id===Oe&&cy(At=this.timerList).call(At,Ne,1)}},Ie.removeFinished=function(){for(var Oe=this.timerList.length-1;Oe>=0;Oe--){var Ne,At=this.timerList[Oe];At.loop>=0&&At.count>=At.loop&&cy(Ne=this.timerList).call(Ne,Oe,1)}},Ie.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},pe}(),fy=function(){function pe(ze){this.core=ze}var Ie=pe.prototype;return Ie.request=function(Oe,Ne){var At=this,nr=new Date().getTime();return Ca.request(Oe,Ne).catch(function(kt){var dr,gr,Ar=kt;throw At.core.reporter.reportTraceStart("exceptions",{user_id:At.core.options.account,trace_id:(gr=(dr=At.core)===null||dr===void 0?void 0:dr.socket)===null||gr===void 0?void 0:gr.sessionId,start_time:nr,action:1}),At.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Ar.code=="number"?Ar.code:0,description:Ar.message||""+Ar.code,operation_type:0,target:Oe,context:Ne?Ao(Ne):""}),At.core.reporter.reportTraceEnd("exceptions",1),kt})},Ie.uploadFile=function(Oe){var Ne=this,At=new Date().getTime();return Ca.uploadFile(Oe).catch(function(nr){var kt,dr,gr=nr;Ne.core.reporter.reportTraceStart("exceptions",{user_id:Ne.core.options.account,trace_id:(dr=(kt=Ne.core)===null||kt===void 0?void 0:kt.socket)===null||dr===void 0?void 0:dr.sessionId,start_time:At,action:1});var Ar=Ca.platform==="BROWSER"?Oe.chunkUploadHost:Oe.commonUploadHost?Oe.commonUploadHost+"/"+(Oe.nosToken&&Oe.nosToken.bucket):"https://nos.netease.com/nim";throw Ne.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof gr.code=="number"?gr.code:0,description:gr.message||""+gr.code,operation_type:1,target:Ar}),Ne.core.reporter.reportTraceEnd("exceptions",1),nr})},pe}();(function(pe){pe[pe.ACTIVE=1]="ACTIVE",pe[pe.KICKED=2]="KICKED",pe[pe.OFFLINE=3]="OFFLINE"})($s||($s={}));var gy=window&&Ip(window.addEventListener)&&Ip(window.removeEventListener),Hd=function(pe){function Ie(Oe,Ne){var At;(At=pe.call(this)||this).status="unconnected",At.linkUrls=[],At.eventBus=new $g,At.packetSer=1,At.retryCount=0,At.reconnectTimer=0,At.backoff=new iS({max:8e3,min:1600,jitter:.01}),At.sendingCmdMap=new Pl,At.pingTimer=0,At.config=Bv,At.abtInfo={},On({linkUrls:{type:"array",itemType:"string",required:!1}},Oe),At.options=Un(Un({},Fv),Oe),At.adapters=new fy(k(At));var nr=Ca.localStorage.getItem("__NIM_DEVC_ID__");At.options.isFixedDeviceId?(nr=Ca.localStorage.getItem("__NIM_DEVC_ID__")||fh(),Ca.localStorage.setItem("__NIM_DEVC_ID__",nr)):nr=fh(),At.config=Un(Un(Un({},Bv),Ne),{deviceId:nr}),At.timerManager=new py,At.logger=new qv(At.options.debugLevel,At.options.account);var kt=Ca.getSystemInfo();return At.reporter=new Vv({common:{app_key:Oe.appkey,dev_id:nr,platform:"Web",sdk_ver:"0.13.1",env:"online",os_name:kt.os,os_ver:kt.osVer,model:kt.hostEnvVer,manufactor:kt.hostEnv,host_env:kt.hostEnv,host_info:kt.hostInfo,host_env_ver:kt.hostEnvVer},request:Ca.request,logger:At.logger,autoStart:Ca.platform==="BROWSER"}),Ca.setLogger(At.logger),At.logger.log("Core init, version ","0.13.1"," sdk version ",91001," appkey ",Oe.appkey),At}ea(Ie,pe);var ze=Ie.prototype;return ze.emit=function(Ne){try{for(var At,nr,kt=_s(),dr=arguments.length,gr=new Array(dr>1?dr-1:0),Ar=1;Ar<dr;Ar++)gr[Ar-1]=arguments[Ar];var Rr=(At=pe.prototype.emit).call.apply(At,gi(nr=[this,Ne]).call(nr,gr)),Ur=_s()-kt;return Ur>=10&&this.logger.warn("Core::emit event: "+Ne+" process takes: "+Ur+"ms"),Rr}catch(Dr){return this.logger.error("Core::emit event: "+Ne+". Error: "+Dr),!1}},ze.connect=function(Ne,At){return Ne===void 0&&(Ne={}),Hr(this,void 0,void 0,wr.mark(function nr(){var kt,dr,gr,Ar,Rr,Ur;return wr.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(On({linkUrls:{type:"array",itemType:"string",required:!1}},Ne),/^(unconnected|waitReconnect)$/.test(this.status)){Jr.next=5;break}return kt="Core socket status is "+this.status+", and would not connect",this.logger.warn(kt),Jr.abrupt("return",_o.reject(kt));case 5:this.status="connecting",Ne.linkUrls&&Ne.linkUrls.length>0&&(this.linkUrls=gi(dr=Ne.linkUrls).call(dr,this.linkUrls),this.linkUrls=tT(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push("weblink.netease.im:443"),gr=0;case 9:if(!(gr<this.linkUrls.length)){Jr.next=32;break}return Ar=this.linkUrls[gr],Rr=new Date().getTime(),Jr.prev=12,Jr.next=15,this.doConnect(Ar);case 15:return this.status="connected",this.logger.log("core:: connect success with url: "+Ar),this.abtRequest(),Jr.abrupt("return",Ar);case 21:Jr.prev=21,Jr.t0=Jr.catch(12),Ur=Jr.t0,At&&At(Ur,Ar),this.reporter.reportTraceStart("exceptions",{user_id:this.options.account,start_time:Rr,action:0}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Ur.code=="number"?Ur.code:0,description:Ur.message||""+Ur.code,operation_type:0,target:Ar}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+Ar,Jr.t0);case 29:gr++,Jr.next=9;break;case 32:throw this.retryCount===0?this.doDisconnect($s.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect($s.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket handshake failed");case 34:case"end":return Jr.stop()}},nr,this,[[12,21]])}))},ze.doConnect=function(Ne){var At=this;return new _o(function(nr,kt){var dr;At.socket=new wS(At,Ne,At.logger),At.socket.on("connect",function(){At.logger.log("socket on connect",Ne),nr()}),At.socket.on("message",Xo(dr=At.onMessage).call(dr,At)),At.socket.on("disconnect",function(gr){At.logger.log("core:: socket on disconnect",gr),At.doDisconnect($s.OFFLINE,"SocketOnDisconnect")}),At.socket.on("handshakeFailed",function(){At.logger.warn("core:: socket handshake failed"),kt(new Bo("handshake failed",{},408))})})},ze.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},ze.doDisconnect=function(Ne,At){if(this.logger.log("doDisconnect: type "+Ne+", description "+At),this.status!=="unconnected"){this.markAllCmdInvaild(new Bo("Packet timeout due to instance disconnect",{},408)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0);var nr=!this.options.needReconnect||this.retryCount>=this.options.reconnectionAttempts;if(Ne===$s.ACTIVE||nr)this.logger.log("doDisconnect: emit disconnect, type "+Ne,nr),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.eventBus.emit("disconnect"),this.emit("disconnect"),this.destroyOnlineListener();else if(Ne===$s.KICKED){this.logger.log("doDisconnect: kicked"),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var kt=typeof At=="string"?{reason:"unknow",message:At}:At;this.eventBus.emit("kicked",kt),this.emit("kicked",kt),this.destroyOnlineListener()}else Ne===$s.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},ze.attempToReconnect=function(){var Ne=this;if(this.status!=="waitReconnect"){var At=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+At),this.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:At}),this.emit("willReconnect",{retryCount:this.retryCount,duration:At}),this.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=Ia(function(){Ne.status==="waitReconnect"?Ne.connect({isAutoReconnect:!0}).catch(function(){Ne.logger.error("core::attempToReconnect failed "+Ne.retryCount)}):Ne.logger.warn("doDisconnect: reconnectTimer status is "+Ne.status+", would not go on reconnecting")},At)}else this.logger.warn("doDisconnect: already is waiting reconnect")},ze.sendCmd=function(Ne,At,nr){var kt=this;if(this.status!=="logined"&&Ne!=="login"&&Ne!=="chatroomLogin"&&Ne!=="qchatLogin")return this.logger.warn("nim status is "+this.status+", so can not sendCmd "+Ne),_o.reject({cmd:Ne,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return _o.reject("No_socket");var dr=Ne!=="heartbeat",gr=dr?this.packetSer++:0,Ar=function(jn,Bn,Gn,$n){var ho=Bd[jn];if(!ho)return Gn.error("createCmd:: can not find cmd config: ",jn),null;var co,oa={SER:Bn,SID:ho.sid,CID:ho.cid,Q:[]};return ho.params&&$n&&Qn(co=ho.params).call(co,function(so){var Wr=$n[so.name];if(!Wv(Wr)){var Kn=so.type,ro=so.reflectMapper;switch(so.type){case"PropertyArray":Kn="ArrayMable",Wr=Ro(Wr).call(Wr,function(Hn){return{t:"Property",v:ro?Is(Hn,ro):Hn}});break;case"Property":Wr=ro?Is(Wr,ro):Wr;break;case"Bool":case"bool":Wr=Wr?"true":"false"}oa.Q.push({t:Kn,v:Wr})}}),{packet:oa,isNoResponse:ho.isNoResponse||!1}}(Ne,gr,this.logger,At);if(!Ar){var Rr="SendCmd "+gr+" "+Ne+" error";return this.logger.error(Rr),_o.reject(Rr)}var Ur=Ar.packet,Dr=Ar.isNoResponse,Jr=Ao(Ur);dr&&(this.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",Ne,"ser:"+gr,Jr):this.logger.log("core::sendCmd",Ne,"ser:"+gr));var kn=new Date().getTime();return new _o(function(Tn,jn){kt.sendingCmdMap.set(gr,{cmd:Ne,params:At,callback:[Tn,jn],timer:Dr?null:Ia(function(){var Gn,$n=new Gg(504,Ne,"Packet Timeout",new Date().getTime(),{message:"ser "+gr+" cmd "+Ne+" timeout"});$n.callFunc="sendCmd",kt.markCmdInvalid(gr,$n,Ne),kt.reporter.reportTraceStart("exceptions",{user_id:kt.options.account,trace_id:(Gn=kt.socket)===null||Gn===void 0?void 0:Gn.sessionId,start_time:kn,action:2}),kt.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:Ur.SID+"-"+Ur.CID,context:""+Ur.SER}),kt.reporter.reportTraceEnd("exceptions",1)},nr&&nr.timeout?nr.timeout:kt.config.timeout)});try{kt.socket.send(Jr)}catch(Gn){var Bn=new Gg(415,Ne,Gn&&Gn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Gn});Bn.callFunc="sendCmd",kt.markCmdInvalid(gr,Bn,Ne),jn(Gn)}})},ze.onMessage=function(Ne){var At=ps(Ne,this.logger);if(At){var nr=At.raw.ser;if(At.error&&this.logger.error("core:onMessage packet error",At.raw.sid+"_"+At.raw.cid+", ser:"+nr+",",At.error),!At.notFound)return At.cmd!=="heartbeat"&&(this.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+nr,At.cmd,At.content):this.logger.log("imsocket::recvCmd ser:"+nr,At.cmd)),At.__receiveTime=_s(),At;this.logger.warn("core::onMessage packet not found",At.raw.sid+"_"+At.raw.cid+", ser:"+nr)}},ze.markCmdInvalid=function(Ne,At,nr){var kt=this.sendingCmdMap.get(Ne);if(kt){var dr=kt.callback,gr=kt.timer;gr&&clearTimeout(gr),this.sendingCmdMap.delete(Ne),this.logger.warn("packet "+Ne+", "+nr+" is invalid:",At),dr[1](At)}},ze.markAllCmdInvaild=function(Ne){var At;this.logger.log("markAllCmdInvaild"),Qn(At=this.sendingCmdMap).call(At,function(nr){var kt=nr.callback,dr=nr.timer;dr&&clearTimeout(dr),kt[1](Ne)}),this.sendingCmdMap.clear()},ze.ping=function(){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At=this;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return clearTimeout(this.pingTimer),kt.prev=1,kt.next=4,this.sendCmd("heartbeat");case 4:kt.next=14;break;case 6:return kt.prev=6,kt.t0=kt.catch(1),kt.next=10,this.testHeartBeat5Timeout();case 10:if(!kt.sent){kt.next=14;break}return this.doDisconnect($s.OFFLINE,"PingError"),kt.abrupt("return");case 14:this.pingTimer=Ia(function(){At.ping()},3e4);case 15:case"end":return kt.stop()}},Ne,this,[[1,6]])}))},ze.testHeartBeat5Timeout=function(){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:clearTimeout(this.pingTimer),At=0;case 2:if(!(At<5)){kt.next=15;break}return kt.prev=3,kt.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return kt.abrupt("return",!1);case 9:kt.prev=9,kt.t0=kt.catch(3),this.logger.debug("core:: test heartbeat "+At+" Timeout");case 12:At++,kt.next=2;break;case 15:return kt.abrupt("return",!0);case 16:case"end":return kt.stop()}},Ne,this,[[3,9]])}))},ze.initOnlineListener=function(){var Ne,At;this.onlineListener||(gy?(this.onlineListener=Xo(Ne=function(){this.status==="logined"&&this.ping()}).call(Ne,this),this.offlineListener=Xo(At=function(){this.logger.log("offline"),this.doDisconnect($s.OFFLINE,"OfflineListener")}).call(At,this),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener not support add listener"))},ze.destroyOnlineListener=function(){this.onlineListener&&(window.removeEventListener("online",this.onlineListener),this.onlineListener=void 0),this.offlineListener&&(window.removeEventListener("offline",this.offlineListener),this.offlineListener=void 0)},ze.disconnect=function(){switch(this.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect($s.ACTIVE,"UserActiveDisconnect"),_o.resolve();case"unconnected":case"destroyed":return _o.resolve()}},ze.destroy=function(){var Ne=this;return this.disconnect().then(function(){Ne.status="destroyed",Ne.removeAllListeners(),Ne.eventBus.removeAllListeners(),Ne.reporter.destroy(),Ne.connect=function(){return _o.resolve()},Ne.disconnect=function(){return _o.resolve()},Ne.destroy=function(){return _o.resolve()}})},ze.abtRequest=function(){var Ne,At;return Hr(this,void 0,void 0,wr.mark(function nr(){var kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:if(this.options.isAbtestEnable){Ar.next=2;break}return Ar.abrupt("return");case 2:if(!this.abtInfo.experiments){Ar.next=4;break}return Ar.abrupt("return");case 4:if(this.options.abtestUrl){Ar.next=6;break}return Ar.abrupt("return");case 6:return Ar.prev=6,Ar.next=9,this.adapters.request(this.options.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.options.abtestProjectKey,appKey:this.options.appkey,osType:"Web",sdkVersion:"0.13.1",deviceId:this.config.deviceId},useLocalCache:!0}});case 9:kt=Ar.sent,Ar.next=15;break;case 12:Ar.prev=12,Ar.t0=Ar.catch(6),this.logger.warn("ABTest request failed");case 15:this.abtInfo=((At=(Ne=kt==null?void 0:kt.data)===null||Ne===void 0?void 0:Ne.data)===null||At===void 0?void 0:At.abtInfo)||{},this.abtInfo.experiments&&this.abtInfo.experiments.length>0&&this.reporter.reportImmediately("https://statistic.live.126.net/statics/report/abtest/result",{params:{app_key:this.options.appkey,biz_sdk_type:"IM",sdk_ver:"0.13.1",device_id:this.config.deviceId,platform:"Web",projectKey:this.options.abtestProjectKey,experiments:Ro(dr=this.abtInfo.experiments).call(dr,function(Rr){return{experimentKey:Rr.experimentKey,schemeKey:Rr.schemeKey}})},headers:{sdktype:"ABTest"},method:"POST",dataType:"json"});case 17:case"end":return Ar.stop()}},nr,this,[[6,12]])}))},Ie}($g);Hd.setAdapters=function(Ie){Un(Ca,Ie)};var hy=Ws.some,Gi=fi("some");_n({target:"Array",proto:!0,forced:!Gi},{some:function(Ie){return hy(this,Ie,arguments.length>1?arguments[1]:void 0)}});var af=sa("Array").some,hh=Array.prototype,sf=function(pe){var Ie=pe.some;return pe===hh||vr(hh,pe)&&Ie===hh.some?af:Ie},vh=function(){this.__data__=new Dp,this.size=0},yh=function(Ie){var ze=this.__data__,Oe=ze.delete(Ie);return this.size=ze.size,Oe},iT=function(Ie){return this.__data__.get(Ie)},cT=function(Ie){return this.__data__.has(Ie)},lT=function(Ie,ze){var Oe=this.__data__;if(Oe instanceof Dp){var Ne=Oe.__data__;if(!Yc||Ne.length<199)return Ne.push([Ie,ze]),this.size=++Oe.size,this;Oe=this.__data__=new $l(Ne)}return Oe.set(Ie,ze),this.size=Oe.size,this};function mu(pe){var Ie=this.__data__=new Dp(pe);this.size=Ie.size}mu.prototype.clear=vh,mu.prototype.delete=yh,mu.prototype.get=iT,mu.prototype.has=cT,mu.prototype.set=lT;var cf=mu,vy=function(Ie,ze){for(var Oe=-1,Ne=Ie==null?0:Ie.length;++Oe<Ne;)if(ze(Ie[Oe],Oe,Ie))return!0;return!1},bh=function(Ie,ze,Oe,Ne,At,nr){var kt=1&Oe,dr=Ie.length,gr=ze.length;if(dr!=gr&&!(kt&&gr>dr))return!1;var Ar=nr.get(Ie),Rr=nr.get(ze);if(Ar&&Rr)return Ar==ze&&Rr==Ie;var Ur=-1,Dr=!0,Jr=2&Oe?new oh:void 0;for(nr.set(Ie,ze),nr.set(ze,Ie);++Ur<dr;){var kn=Ie[Ur],Tn=ze[Ur];if(Ne)var jn=kt?Ne(Tn,kn,Ur,ze,Ie,nr):Ne(kn,Tn,Ur,Ie,ze,nr);if(jn!==void 0){if(jn)continue;Dr=!1;break}if(Jr){if(!vy(ze,function(Bn,Gn){if(!sh(Jr,Gn)&&(kn===Bn||At(kn,Bn,Oe,Ne,nr)))return Jr.push(Gn)})){Dr=!1;break}}else if(kn!==Tn&&!At(kn,Tn,Oe,Ne,nr)){Dr=!1;break}}return nr.delete(Ie),nr.delete(ze),Dr},yy=hi.Uint8Array,uT=function(Ie){var ze=-1,Oe=Array(Ie.size);return Ie.forEach(function(Ne,At){Oe[++ze]=[At,Ne]}),Oe},zd=tc?tc.prototype:void 0,Ll=zd?zd.valueOf:void 0,Sh=function(Ie,ze,Oe,Ne,At,nr,kt){switch(Oe){case"[object DataView]":if(Ie.byteLength!=ze.byteLength||Ie.byteOffset!=ze.byteOffset)return!1;Ie=Ie.buffer,ze=ze.buffer;case"[object ArrayBuffer]":return!(Ie.byteLength!=ze.byteLength||!nr(new yy(Ie),new yy(ze)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $p(+Ie,+ze);case"[object Error]":return Ie.name==ze.name&&Ie.message==ze.message;case"[object RegExp]":case"[object String]":return Ie==ze+"";case"[object Map]":var dr=uT;case"[object Set]":var gr=1&Ne;if(dr||(dr=Qp),Ie.size!=ze.size&&!gr)return!1;var Ar=kt.get(Ie);if(Ar)return Ar==ze;Ne|=2,kt.set(Ie,ze);var Rr=bh(dr(Ie),dr(ze),Ne,At,nr,kt);return kt.delete(Ie),Rr;case"[object Symbol]":if(Ll)return Ll.call(Ie)==Ll.call(ze)}return!1},oi=function(Ie,ze){for(var Oe=-1,Ne=ze.length,At=Ie.length;++Oe<Ne;)Ie[At+Oe]=ze[Oe];return Ie},ic=Array.isArray,lf=function(Ie,ze,Oe){var Ne=ze(Ie);return ic(Ie)?Ne:oi(Ne,Oe(Ie))},ss=function(Ie,ze){for(var Oe=-1,Ne=Ie==null?0:Ie.length,At=0,nr=[];++Oe<Ne;){var kt=Ie[Oe];ze(kt,Oe,Ie)&&(nr[At++]=kt)}return nr},by=function(){return[]},Th=Object.prototype.propertyIsEnumerable,Ch=Object.getOwnPropertySymbols,dT=Ch?function(pe){return pe==null?[]:(pe=Object(pe),ss(Ch(pe),function(Ie){return Th.call(pe,Ie)}))}:by,Mh=dT,pT=function(Ie,ze){for(var Oe=-1,Ne=Array(Ie);++Oe<Ie;)Ne[Oe]=ze(Oe);return Ne},uf=function(Ie){return Fs(Ie)&&Mi(Ie)=="[object Arguments]"},kh=Object.prototype,gu=kh.hasOwnProperty,fT=kh.propertyIsEnumerable,wh=uf(function(){return arguments}())?uf:function(pe){return Fs(pe)&&gu.call(pe,"callee")&&!fT.call(pe,"callee")},xh=wh,mT=function(){return!1},_h=g(function(pe,Ie){var ze=Ie&&!Ie.nodeType&&Ie,Oe=ze&&pe&&!pe.nodeType&&pe,Ne=Oe&&Oe.exports===ze?hi.Buffer:void 0,At=(Ne?Ne.isBuffer:void 0)||mT;pe.exports=At}),Sy=/^(?:0|[1-9]\d*)$/,Wd=function(Ie,ze){var Oe=typeof Ie;return!!(ze=ze??9007199254740991)&&(Oe=="number"||Oe!="symbol"&&Sy.test(Ie))&&Ie>-1&&Ie%1==0&&Ie<ze},Wa={};Wa["[object Float32Array]"]=Wa["[object Float64Array]"]=Wa["[object Int8Array]"]=Wa["[object Int16Array]"]=Wa["[object Int32Array]"]=Wa["[object Uint8Array]"]=Wa["[object Uint8ClampedArray]"]=Wa["[object Uint16Array]"]=Wa["[object Uint32Array]"]=!0,Wa["[object Arguments]"]=Wa["[object Array]"]=Wa["[object ArrayBuffer]"]=Wa["[object Boolean]"]=Wa["[object DataView]"]=Wa["[object Date]"]=Wa["[object Error]"]=Wa["[object Function]"]=Wa["[object Map]"]=Wa["[object Number]"]=Wa["[object Object]"]=Wa["[object RegExp]"]=Wa["[object Set]"]=Wa["[object String]"]=Wa["[object WeakMap]"]=!1;var Ty=function(Ie){return Fs(Ie)&&lh(Ie.length)&&!!Wa[Mi(Ie)]},Ih=au&&au.isTypedArray,Ac=Ih?eh(Ih):Ty,Cy=Object.prototype.hasOwnProperty,My=function(Ie,ze){var Oe=ic(Ie),Ne=!Oe&&xh(Ie),At=!Oe&&!Ne&&_h(Ie),nr=!Oe&&!Ne&&!At&&Ac(Ie),kt=Oe||Ne||At||nr,dr=kt?pT(Ie.length,String):[],gr=dr.length;for(var Ar in Ie)!ze&&!Cy.call(Ie,Ar)||kt&&(Ar=="length"||At&&(Ar=="offset"||Ar=="parent")||nr&&(Ar=="buffer"||Ar=="byteLength"||Ar=="byteOffset")||Wd(Ar,gr))||dr.push(Ar);return dr},gT=Object.prototype,ky=function(Ie){var ze=Ie&&Ie.constructor;return Ie===(typeof ze=="function"&&ze.prototype||gT)},wy=function(Ie,ze){return function(Oe){return Ie(ze(Oe))}},xy=wy(Object.keys,Object),hT=Object.prototype.hasOwnProperty,Eh=function(Ie){if(!ky(Ie))return xy(Ie);var ze=[];for(var Oe in Object(Ie))hT.call(Ie,Oe)&&Oe!="constructor"&&ze.push(Oe);return ze},Zc=function(Ie){return Kp(Ie)?My(Ie):Eh(Ie)},Ph=function(Ie){return lf(Ie,Zc,Mh)},vT=Object.prototype.hasOwnProperty,_y=function(Ie,ze,Oe,Ne,At,nr){var kt=1&Oe,dr=Ph(Ie),gr=dr.length;if(gr!=Ph(ze).length&&!kt)return!1;for(var Ar=gr;Ar--;){var Rr=dr[Ar];if(!(kt?Rr in ze:vT.call(ze,Rr)))return!1}var Ur=nr.get(Ie),Dr=nr.get(ze);if(Ur&&Dr)return Ur==ze&&Dr==Ie;var Jr=!0;nr.set(Ie,ze),nr.set(ze,Ie);for(var kn=kt;++Ar<gr;){var Tn=Ie[Rr=dr[Ar]],jn=ze[Rr];if(Ne)var Bn=kt?Ne(jn,Tn,Rr,ze,Ie,nr):Ne(Tn,jn,Rr,Ie,ze,nr);if(!(Bn===void 0?Tn===jn||At(Tn,jn,Oe,Ne,nr):Bn)){Jr=!1;break}kn||(kn=Rr=="constructor")}if(Jr&&!kn){var Gn=Ie.constructor,$n=ze.constructor;Gn==$n||!("constructor"in Ie)||!("constructor"in ze)||typeof Gn=="function"&&Gn instanceof Gn&&typeof $n=="function"&&$n instanceof $n||(Jr=!1)}return nr.delete(Ie),nr.delete(ze),Jr},Nc=Fl(hi,"DataView"),us=Fl(hi,"Promise"),hu=Fl(hi,"WeakMap"),Da="[object Map]",wi="[object Promise]",Iy="[object Set]",Ps="[object WeakMap]",Ah="[object DataView]",Nh=Rl(Nc),yT=Rl(Yc),bT=Rl(us),Ey=Rl(fu),ST=Rl(hu),jl=Mi;(Nc&&jl(new Nc(new ArrayBuffer(1)))!=Ah||Yc&&jl(new Yc)!=Da||us&&jl(us.resolve())!=wi||fu&&jl(new fu)!=Iy||hu&&jl(new hu)!=Ps)&&(jl=function(pe){var Ie=Mi(pe),ze=Ie=="[object Object]"?pe.constructor:void 0,Oe=ze?Rl(ze):"";if(Oe)switch(Oe){case Nh:return Ah;case yT:return Da;case bT:return wi;case Ey:return Iy;case ST:return Ps}return Ie});var Gd=jl,xi="[object Arguments]",Oh="[object Array]",df="[object Object]",Kd=Object.prototype.hasOwnProperty,Py=function(Ie,ze,Oe,Ne,At,nr){var kt=ic(Ie),dr=ic(ze),gr=kt?Oh:Gd(Ie),Ar=dr?Oh:Gd(ze),Rr=(gr=gr==xi?df:gr)==df,Ur=(Ar=Ar==xi?df:Ar)==df,Dr=gr==Ar;if(Dr&&_h(Ie)){if(!_h(ze))return!1;kt=!0,Rr=!1}if(Dr&&!Rr)return nr||(nr=new cf),kt||Ac(Ie)?bh(Ie,ze,Oe,Ne,At,nr):Sh(Ie,ze,gr,Oe,Ne,At,nr);if(!(1&Oe)){var Jr=Rr&&Kd.call(Ie,"__wrapped__"),kn=Ur&&Kd.call(ze,"__wrapped__");if(Jr||kn){var Tn=Jr?Ie.value():Ie,jn=kn?ze.value():ze;return nr||(nr=new cf),At(Tn,jn,Oe,Ne,nr)}}return!!Dr&&(nr||(nr=new cf),_y(Ie,ze,Oe,Ne,At,nr))},Rh=function pe(Ie,ze,Oe,Ne,At){return Ie===ze||(Ie==null||ze==null||!Fs(Ie)&&!Fs(ze)?Ie!=Ie&&ze!=ze:Py(Ie,ze,Oe,Ne,pe,At))},TT=function(Ie,ze,Oe,Ne){var At=Oe.length,nr=At,kt=!Ne;if(Ie==null)return!nr;for(Ie=Object(Ie);At--;){var dr=Oe[At];if(kt&&dr[2]?dr[1]!==Ie[dr[0]]:!(dr[0]in Ie))return!1}for(;++At<nr;){var gr=(dr=Oe[At])[0],Ar=Ie[gr],Rr=dr[1];if(kt&&dr[2]){if(Ar===void 0&&!(gr in Ie))return!1}else{var Ur=new cf;if(Ne)var Dr=Ne(Ar,Rr,gr,Ie,ze,Ur);if(!(Dr===void 0?Rh(Rr,Ar,3,Ne,Ur):Dr))return!1}}return!0},Ay=function(Ie){return Ie==Ie&&!Ui(Ie)},CT=function(Ie){for(var ze=Zc(Ie),Oe=ze.length;Oe--;){var Ne=ze[Oe],At=Ie[Ne];ze[Oe]=[Ne,At,Ay(At)]}return ze},Bh=function(Ie,ze){return function(Oe){return Oe!=null&&Oe[Ie]===ze&&(ze!==void 0||Ie in Object(Oe))}},Ny=function(Ie){var ze=CT(Ie);return ze.length==1&&ze[0][2]?Bh(ze[0][0],ze[0][1]):function(Oe){return Oe===Ie||TT(Oe,Ie,ze)}},pf=function(Ie){return typeof Ie=="symbol"||Fs(Ie)&&Mi(Ie)=="[object Symbol]"},MT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kT=/^\w*$/,Qd=function(Ie,ze){if(ic(Ie))return!1;var Oe=typeof Ie;return!(Oe!="number"&&Oe!="symbol"&&Oe!="boolean"&&Ie!=null&&!pf(Ie))||kT.test(Ie)||!MT.test(Ie)||ze!=null&&Ie in Object(ze)};function Fh(pe,Ie){if(typeof pe!="function"||Ie!=null&&typeof Ie!="function")throw new TypeError("Expected a function");var ze=function(){var Oe=arguments,Ne=Ie?Ie.apply(this,Oe):Oe[0],At=ze.cache;if(At.has(Ne))return At.get(Ne);var nr=pe.apply(this,Oe);return ze.cache=At.set(Ne,nr)||At,nr};return ze.cache=new(Fh.Cache||$l),ze}Fh.Cache=$l;var ff=Fh,wT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mf=/\\(\\)?/g,Ga=function(Ie){var ze=ff(Ie,function(Ne){return Oe.size===500&&Oe.clear(),Ne}),Oe=ze.cache;return ze}(function(pe){var Ie=[];return pe.charCodeAt(0)===46&&Ie.push(""),pe.replace(wT,function(ze,Oe,Ne,At){Ie.push(Ne?At.replace(mf,"$1"):Oe||ze)}),Ie}),xT=Ga,$h=tc?tc.prototype:void 0,Lh=$h?$h.toString:void 0,_T=function pe(Ie){if(typeof Ie=="string")return Ie;if(ic(Ie))return du(Ie,pe)+"";if(pf(Ie))return Lh?Lh.call(Ie):"";var ze=Ie+"";return ze=="0"&&1/Ie==-1/0?"-0":ze},Oy=function(Ie){return Ie==null?"":_T(Ie)},gf=function(Ie,ze){return ic(Ie)?Ie:Qd(Ie,ze)?[Ie]:xT(Oy(Ie))},Dl=function(Ie){if(typeof Ie=="string"||pf(Ie))return Ie;var ze=Ie+"";return ze=="0"&&1/Ie==-1/0?"-0":ze},jh=function(Ie,ze){for(var Oe=0,Ne=(ze=gf(ze,Ie)).length;Ie!=null&&Oe<Ne;)Ie=Ie[Dl(ze[Oe++])];return Oe&&Oe==Ne?Ie:void 0},ys=function(Ie,ze,Oe){var Ne=Ie==null?void 0:jh(Ie,ze);return Ne===void 0?Oe:Ne},IT=function(Ie,ze){return Ie!=null&&ze in Object(Ie)},Jd=function(Ie,ze,Oe){for(var Ne=-1,At=(ze=gf(ze,Ie)).length,nr=!1;++Ne<At;){var kt=Dl(ze[Ne]);if(!(nr=Ie!=null&&Oe(Ie,kt)))break;Ie=Ie[kt]}return nr||++Ne!=At?nr:!!(At=Ie==null?0:Ie.length)&&lh(At)&&Wd(kt,At)&&(ic(Ie)||xh(Ie))},Ry=function(Ie,ze){return Ie!=null&&Jd(Ie,ze,IT)},ET=function(Ie,ze){return Qd(Ie)&&Ay(ze)?Bh(Dl(Ie),ze):function(Oe){var Ne=ys(Oe,Ie);return Ne===void 0&&Ne===ze?Ry(Oe,Ie):Rh(ze,Ne,3)}},Dh=function(Ie){return function(ze){return ze==null?void 0:ze[Ie]}},PT=function(Ie){return function(ze){return jh(ze,Ie)}},AT=function(Ie){return Qd(Ie)?Dh(Dl(Ie)):PT(Ie)},bs=function(Ie){return typeof Ie=="function"?Ie:Ie==null?zp:typeof Ie=="object"?ic(Ie)?ET(Ie[0],Ie[1]):Ny(Ie):AT(Ie)},NT=function(Ie,ze,Oe){ze=="__proto__"&&Wp?Wp(Ie,ze,{configurable:!0,enumerable:!0,value:Oe,writable:!0}):Ie[ze]=Oe},Uh=Object.prototype.hasOwnProperty,By=function(Ie,ze,Oe){var Ne=Ie[ze];Uh.call(Ie,ze)&&$p(Ne,Oe)&&(Oe!==void 0||ze in Ie)||NT(Ie,ze,Oe)},OT=function(Ie,ze,Oe,Ne){if(!Ui(Ie))return Ie;for(var At=-1,nr=(ze=gf(ze,Ie)).length,kt=nr-1,dr=Ie;dr!=null&&++At<nr;){var gr=Dl(ze[At]),Ar=Oe;if(gr==="__proto__"||gr==="constructor"||gr==="prototype")return Ie;if(At!=kt){var Rr=dr[gr];(Ar=Ne?Ne(Rr,gr,dr):void 0)===void 0&&(Ar=Ui(Rr)?Rr:Wd(ze[At+1])?[]:{})}By(dr,gr,Ar),dr=dr[gr]}return Ie},Fy=function(Ie,ze,Oe){for(var Ne=-1,At=ze.length,nr={};++Ne<At;){var kt=ze[Ne],dr=jh(Ie,kt);Oe(dr,kt)&&OT(nr,gf(kt,Ie),dr)}return nr},$y=wy(Object.getPrototypeOf,Object),Yd=Object.getOwnPropertySymbols?function(pe){for(var Ie=[];pe;)oi(Ie,Mh(pe)),pe=$y(pe);return Ie}:by,RT=function(Ie){var ze=[];if(Ie!=null)for(var Oe in Object(Ie))ze.push(Oe);return ze},BT=Object.prototype.hasOwnProperty,Ly=function(Ie){if(!Ui(Ie))return RT(Ie);var ze=ky(Ie),Oe=[];for(var Ne in Ie)(Ne!="constructor"||!ze&&BT.call(Ie,Ne))&&Oe.push(Ne);return Oe},FT=function(Ie){return Kp(Ie)?My(Ie,!0):Ly(Ie)},$T=function(Ie){return lf(Ie,FT,Yd)},qh,jy,Dy=function(Ie,ze){if(Ie==null)return{};var Oe=du($T(Ie),function(Ne){return[Ne]});return ze=bs(ze),Fy(Ie,Oe,function(Ne,At){return ze(Ne,At[0])})},Uy={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},vu={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},Ul=Qc(vu),Vh={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:Ul.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:vu.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:Ul.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:vu.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:Ul.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:Ul.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:Ul.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:vu.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:Ul.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:vu.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:Ul.mixStoreAuthTokenResTag}]}};(function(pe){pe[pe.nos=1]="nos",pe[pe.s3=2]="s3"})(qh||(qh={})),function(pe){pe[pe.dontNeed=-1]="dontNeed",pe[pe.time=2]="time",pe[pe.urls=3]="urls"}(jy||(jy={}));var vi,cc,LT={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0},el={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},Hh={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};function zh(pe){return pe===void 0&&(pe="file"),Ao(el[pe]||{}).replace(/"/gi,'\\"')}(function(pe){pe[pe.nos=1]="nos",pe[pe.s3=2]="s3"})(vi||(vi={})),function(pe){pe[pe.dontNeed=-1]="dontNeed",pe[pe.time=2]="time",pe[pe.urls=3]="urls"}(cc||(cc={}));var qy=function(){function pe(ze,Oe){Oe===void 0&&(Oe={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=vi.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=ze.logger,this.core=ze,oc({cmdMap:Uy,cmdConfig:Vh}),this.setOptions(Oe)}var Ie=pe.prototype;return Ie.setOptions=function(Oe){Oe===void 0&&(Oe={});var Ne=Oe.storageKeyPrefix||"NIMClient";this.GRAYKEY=Ne+"-AllGrayscaleConfig",this.MIXSTOREKEY=Ne+"-AllMixStorePolicy";var At=Oe.s3,nr=eu(Oe,["s3"]),kt=Un({},LT,this.config);if(nr&&Object.prototype.hasOwnProperty.call(nr,"cdn")){var dr={cdn:Un(Un({},kt.cdn),nr.cdn)};this.config=Un({},kt,nr,dr)}else this.config=Un({},kt,nr);At&&(this.s3=At)},Ie.init=function(){return Hr(this,void 0,void 0,wr.mark(function Oe(){return wr.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=vi.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){At.next=9;break}return At.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return At.next=9,this.getNosCdnHost();case 9:case"end":return At.stop()}},Oe,this)}))},Ie.uploadFile=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(On({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},Oe),Oe.fileInput||Oe.file||Oe.filePath){gr.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!Oe.type||Oe.type==="file"){gr.next=7;break}if(typeof(At=ys(Oe,"file.type"))!="string"||Ba(At).call(At,Oe.type)!==-1){gr.next=7;break}throw new Error('The meta type "'+At+'" does not match "'+Oe.type+'"');case 7:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){gr.next=10;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),gr.abrupt("return",this.nosUpload(Oe));case 10:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=vi.nos),nr=Hh,gr.prev=13,gr.next=16,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:zh(Oe.type)}});case 16:kt=gr.sent,nr=kt.content.mixStoreTokenResTag,gr.next=24;break;case 20:throw gr.prev=20,gr.t0=gr.catch(13),this.core.logger.error("uploadFile:: getMixStoreToken error",gr.t0),new Gc("getMixStoreToken error",gr.t0,this.curProvider,this.mixStorePolicy);case 24:return gr.abrupt("return",this.curProvider===vi.s3?this.s3Upload(Oe,nr):this.nosUpload(Oe,nr));case 25:case"end":return gr.stop()}},Ne,this,[[13,20]])}))},Ie.nosUpload=function(Oe,Ne){var At,nr;return Hr(this,void 0,void 0,wr.mark(function kt(){var dr,gr,Ar,Rr,Ur,Dr,Jr,kn,Tn,jn,Bn,Gn,$n;return wr.wrap(function(co){for(;;)switch(co.prev=co.next){case 0:if(dr=ys(this.core,"config.cdn.bucket"),gr={tag:Oe.nosScenes||dr||"nim",expireSec:Oe.nosSurvivalTime},Ne){co.next=13;break}return co.prev=3,co.next=6,this.core.sendCmd("getNosToken",{responseBody:zh(Oe.type),nosToken:gr});case 6:Ar=co.sent,co.next=13;break;case 9:throw co.prev=9,co.t0=co.catch(3),this.core.logger.error("uploadFile:: getNosToken error",co.t0),new Gc("getNosToken error",co.t0,1);case 13:return co.prev=13,Ur=Ar?Ar.content.nosToken:Ne,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:Ur,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:Ca.platform}),co.next=18,this.core.adapters.uploadFile(Un(Un({},Oe),{nosToken:Ur,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:Oe.maxSize||this.config.chunkMaxSize}));case 18:Rr=co.sent,co.next=42;break;case 21:if(co.prev=21,co.t1=co.catch(13),this.core.logger.error("uploadFile::nos uploadFile error",co.t1),!Ne){co.next=41;break}if(this.nosErrorCount!==0){co.next=37;break}co.prev=26,this._addCircuitTimer(),co.next=33;break;case 30:throw co.prev=30,co.t2=co.catch(26),new Gc("upload file error",co.t2,this.curProvider,this.mixStorePolicy,Oe.file||Oe.filePath);case 33:return this.nosErrorCount=(At=this.mixStorePolicy.nosPolicy)===null||At===void 0?void 0:At.uploadConfig.retryPolicy.retry,co.abrupt("return",this.uploadFile(Oe));case 37:return this.nosErrorCount--,co.abrupt("return",this.nosUpload(Oe,Ne));case 39:co.next=42;break;case 41:throw new Gc("nos uploadFile error",co.t1,1);case 42:if(Dr=Rr==null?void 0:Rr.type,Jr=Dr&&Ba(Dr).call(Dr,"/")>-1?Lo(Dr).call(Dr,0,Ba(Dr).call(Dr,"/")):"",kn={image:"imageInfo",video:"vinfo",audio:"vinfo"},Tn=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",Ar?Ar.content.nosToken.objectName:Ne==null?void 0:Ne.objectName),Ne&&Ne.shortUrl&&(Tn=Ne.shortUrl),kn[Jr]){co.next=49;break}return co.abrupt("return",Un({url:Tn},Rr));case 49:if(co.prev=49,!(Ba(Tn).call(Tn,"_im_url=1")<0)){co.next=54;break}return co.next=53,this.core.adapters.request(Tn+"?"+kn[Jr],{method:"GET",dataType:"json",timeout:5e3});case 53:jn=co.sent;case 54:co.next=60;break;case 56:return co.prev=56,co.t3=co.catch(49),this.core.logger.error("uploadFile:: fetch file info error",co.t3),co.abrupt("return",Un({url:Tn},Rr));case 60:if(!jn){co.next=67;break}return Bn=jn.data,Gn=kn[Jr]==="imageInfo"?Bn:(nr=Bn==null?void 0:Bn.GetVideoInfo)===null||nr===void 0?void 0:nr.VideoInfo,$n={url:Tn,name:Rr.name,size:Rr.size,ext:Rr.ext,w:Gn.Width,h:Gn.Height,orientation:Gn.Orientation,dur:Gn.Duration,audioCodec:Gn.AudioCodec,videoCodec:Gn.VideoCodec,container:Gn.Container},co.abrupt("return",Dy($n,function(oa,so){return so!==void 0}));case 67:return co.abrupt("return",Un({url:Tn},Rr));case 68:case"end":return co.stop()}},kt,this,[[3,9],[13,21],[26,30],[49,56]])}))},Ie.getNosCdnHost=function(){var Oe;return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr=this;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Ar.prev=0,Ar.next=3,this.core.sendCmd("getNosCdnHost");case 3:At=Ar.sent,Ar.next=10;break;case 6:return Ar.prev=6,Ar.t0=Ar.catch(0),this.logger.error("getNosCdnHost::error",Ar.t0),Ar.abrupt("return");case 10:if(At){Ar.next=12;break}return Ar.abrupt("return");case 12:nr=(Oe=At==null?void 0:At.content)===null||Oe===void 0?void 0:Oe.nosConfigTag,(kt=na(nr==null?void 0:nr.expire))!==0&&nr.cdnDomain?kt===-1?(this.config.cdn.bucket=nr.bucket,this.config.cdn.cdnDomain=nr.cdnDomain,this.config.cdn.objectNamePrefix=nr.objectNamePrefix):(this.config.cdn.bucket=nr.bucket,this.config.cdn.cdnDomain=nr.cdnDomain,this.config.cdn.objectNamePrefix=nr.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){dr.getNosCdnHost()},1e3*kt)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return Ar.stop()}},Ne,this,[[0,6]])}))},Ie.getGrayscaleConfig=function(Oe){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(Ca.localStorage)try{Ca.localStorage.getItem&&Ca.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(Ca.localStorage.getItem(this.GRAYKEY))[Oe])}catch(Ar){Ca.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",Ar)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){gr.next=17;break}return gr.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(nr=gr.sent).content||!nr.content.grayConfigTag){gr.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(nr.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(nr.content.grayConfigTag.ttl)}catch(Ar){this.logger.error("getGrayscaleConfig error",Ar)}if(this.grayConfig){gr.next=10;break}return gr.abrupt("return");case 10:kt=Ca.localStorage.getItem(this.GRAYKEY)?JSON.parse(Ca.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),kt[Oe]=this.grayConfig,Ca.localStorage.setItem(this.GRAYKEY,Ao(kt)),gr.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",nr.content);case 17:if(!(!((Ne=this.grayConfig)===null||Ne===void 0)&&Ne.mixStoreEnable)){gr.next=20;break}return gr.next=20,this._getMixStorePolicy(Oe);case 20:case"end":return gr.stop()}},At,this)}))},Ie._getMixStorePolicy=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar,Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(At=new Date().getTime(),Ca.localStorage)try{this.mixStorePolicy=JSON.parse(Ca.localStorage.getItem(this.MIXSTOREKEY))[Oe],this.curProvider=na(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>At&&(kt=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-At,this.core.timerManager.addTimer(Xo(nr=this._getMixStorePolicy).call(nr,this,Oe),kt))}catch(Jr){Ca.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(Ca.localStorage.getItem(this.MIXSTOREKEY))[Oe]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Jr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=At)){Dr.next=30;break}return Dr.prev=3,Dr.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:gr=Dr.sent,Ar=gr.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(Ar.ttl),this.mixStorePolicy.providers=Ar.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=na(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=Ar.nosPolicy?JSON.parse(Ar.nosPolicy):null,this.mixStorePolicy.s3Policy=Ar.s3Policy?JSON.parse(Ar.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(Xo(dr=this._getMixStorePolicy).call(dr,this,Oe),1e3*this.mixStorePolicy.ttl),Rr=Ca.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(Ca.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),Rr[Oe]=this.mixStorePolicy,Ca.localStorage.setItem(this.MIXSTOREKEY,Ao(Rr)),Dr.next=30;break;case 23:if(Dr.prev=23,Dr.t0=Dr.catch(3),this.logger.error("getMixStorePolicy error",Dr.t0),this.mixStoreErrorCount!==0){Dr.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(Oe),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Dr.stop()}},Ne,this,[[3,23]])}))},Ie.s3Upload=function(Oe,Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr,Ar,Rr,Ur,Dr,Jr,kn,Tn=this;return wr.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(!Oe.file){Bn.next=4;break}nr=Oe.file,Bn.next=19;break;case 4:if(typeof Oe.fileInput!="string"){Bn.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((kt=document.getElementById(Oe.fileInput))&&kt.files&&kt.files[0])){Bn.next=11;break}nr=kt.files[0],Bn.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Bn.next=19;break;case 14:if(!(Oe.fileInput&&Oe.fileInput.files&&Oe.fileInput.files[0])){Bn.next=18;break}nr=Oe.fileInput.files[0],Bn.next=19;break;case 18:throw new Error("Can not get file from fileInput "+Oe.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Bn.next=21;break}throw new Error("dont get s3 policy");case 21:return dr={accessKeyId:Ne.accessKeyId,secretAccessKey:Ne.secretAccessKey,sessionToken:Ne.sessionToken,region:Ne.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},gr=this.s3,(Ar=new gr).config.update(dr),Rr=decodeURIComponent(Ne.bucket),Ur=decodeURIComponent(Ne.objectName),Jr={Bucket:Rr,Key:Ur,Body:Dr=nr,Metadata:{token:Ne.token},ContentType:Dr.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Jr),kn=Ar.upload(Jr),Bn.abrupt("return",new _o(function(Gn){var $n=new Date().getTime();kn.send(function(ho,co){var oa,so;if(ho){Tn.logger.error("uploadFile:","api::s3:upload file failed",ho),Tn.core.reporter.reportTraceStart("exceptions",{user_id:Tn.core.options.account,trace_id:(so=(oa=Tn.core)===null||oa===void 0?void 0:oa.socket)===null||so===void 0?void 0:so.sessionId,start_time:$n,action:1}),Tn.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof ho.status=="number"?ho.status:typeof ho.code=="number"?ho.code:0,description:ho.message||""+ho.code,operation_type:1,target:ho.hostname}),Tn.core.reporter.reportTraceEnd("exceptions",1);try{Tn._addCircuitTimer()}catch(Kn){throw new Gc("upload file error",Kn,Tn.curProvider,Tn.mixStorePolicy,Oe.file||Oe.filePath)}Gn(Tn.uploadFile(Oe))}else{var Wr=Tn.mixStorePolicy.s3Policy.cdnSchema;Wr=(Wr=Wr.replace("{cdnDomain}",Tn.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",co.Key),Gn({size:Dr.size,name:Dr.name,url:Ne.shortUrl?Ne.shortUrl:Wr,ext:Dr.name.split(".")[1]||"unknown"})}})}));case 32:case"end":return Bn.stop()}},At,this)}))},Ie.getPrivateUrl=function(Oe){var Ne;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(Oe))return this.logger.error("illegal file url:"+Oe),"";var At=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(Oe);At[0];var nr=At[1];At[2];var kt=At[3];At[4];var dr=At[5];if(At[6],At[7],(Ne=this.grayConfig)===null||Ne===void 0?void 0:Ne.mixStoreEnable){var gr=this._getUrlType(Oe);return gr===vi.s3&&this.mixStorePolicy.s3Policy&&(Oe=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",dr)),gr===vi.nos&&this.mixStorePolicy.nosPolicy&&(Oe=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",dr)),Oe}var Ar=this.config,Rr=Ar.downloadUrl,Ur=Ar.downloadHostList,Dr=Ar.nosCdnEnable,Jr=this.config.cdn.cdnDomain,kn=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",Tn=decodeURIComponent(dr),jn=Ba(Tn).call(Tn,kn);if(Jr&&jn>-1&&Dr)return""+nr+Jr+"/"+Lo(Tn).call(Tn,jn);if(Vi(Ur).call(Ur,kt)&&Vi(dr).call(dr,"/")){var Bn=Ba(dr).call(dr,"/"),Gn=dr.substring(0,Bn),$n=dr.substring(Bn+1);return Rr.replace("{bucket}",Gn).replace("{object}",$n)}var ho=ki(Ur).call(Ur,function(oa){return typeof kt=="string"&&Vi(kt).call(kt,oa)})[0],co=ho?kt.replace(ho,"").replace(/\W/g,""):null;return co?Rr.replace("{bucket}",co).replace("{object}",dr):Oe},Ie.getOriginUrl=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:Oe}});case 2:return At=kt.sent,kt.abrupt("return",At.content.nosSafeUrlTag.originUrl);case 4:case"end":return kt.stop()}},Ne,this)}))},Ie.getFileToken=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar=this;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(On({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},Oe),At=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,nr=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,At!==String(cc.dontNeed)||nr!==String(cc.dontNeed)){Ur.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(Oe.type!==cc.time){Ur.next=17;break}if(!(At&&Ba(At).call(At,String(cc.time))>=0||nr&&Ba(nr).call(nr,String(cc.time))>0)){Ur.next=13;break}return Ur.abrupt("return",this.getFileAuthToken(Oe));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:Ur.next=33;break;case 17:if(Oe.urls&&Oe.urls.length){Ur.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(dr=[],gr=[],Qn(kt=Oe.urls).call(kt,function(Dr){var Jr=Ar._getUrlType(Dr);Jr===vi.nos&&gr.push(Dr),Jr===vi.s3&&dr.push(Dr)}),(!nr||dr.length!==0&&Ba(nr).call(nr,String(cc.urls))<0)&&(this.logger.warn("s3 url don't support url token"),dr=[]),(!At||gr.length!==0&&Ba(At).call(At,String(cc.urls))<0)&&(this.logger.warn("nos url don't support url token"),gr=[]),dr.length!==0||gr.length!==0){Ur.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(dr.length!==0&&gr.length!==0){Ur.next=33;break}return Oe.urls=Ao(Oe.urls),Ur.abrupt("return",this.getFileAuthToken(Oe));case 33:case"end":return Ur.stop()}},Ne,this)}))},Ie.getFileAuthToken=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:Oe});case 2:return At=kt.sent,kt.abrupt("return",At.content.mixStoreAuthTokenResTag);case 4:case"end":return kt.stop()}},Ne,this)}))},Ie._getUrlType=function(Oe){var Ne,At;return this.mixStorePolicy.nosPolicy&&sf(Ne=this.mixStorePolicy.nosPolicy.dlcdns).call(Ne,function(nr){return Ba(Oe).call(Oe,nr)>=0})?vi.nos:this.mixStorePolicy.s3Policy&&sf(At=this.mixStorePolicy.s3Policy.dlcdns).call(At,function(nr){return Ba(Oe).call(Oe,nr)>=0})?vi.s3:null},Ie._addCircuitTimer=function(){var Oe=this,Ne=this.mixStorePolicy.providers,At=Ne[(Ba(Ne).call(Ne,String(this.curProvider))+1)%Ne.length];if(At===Ne[0])throw new Error("uploadFile all policy fail");var nr=ys(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(nr&&nr.retryNext&&At&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+At),this.curProvider=na(At),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var kt=this.mixStorePolicy[this.curProvider===vi.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!kt||kt===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){Oe.logger.log("uploadFile:: upload policy will change,now policy:"+Oe.curProvider+" nextProvider:"+na(Oe.mixStorePolicy.providers[0])),Oe.curProvider=na(Oe.mixStorePolicy.providers[0]),Oe.core.timerManager.deleteTimer(Oe.circuitTimer)},1e3*kt)}},Ie.process=function(Oe){var Ne=this[Oe.cmd+"Handler"];return typeof Ne=="function"?Ne.call(this,Oe):Oe.error&&!Oe.error.ignore?_o.reject(Oe.error):_o.resolve(Oe)},pe}(),Xd=Math.floor,hf=function(pe,Ie){var ze=pe.length,Oe=Xd(ze/2);return ze<8?Vy(pe,Ie):jT(pe,hf(qu(pe,0,Oe),Ie),hf(qu(pe,Oe),Ie),Ie)},Vy=function(pe,Ie){for(var ze,Oe,Ne=pe.length,At=1;At<Ne;){for(Oe=At,ze=pe[At];Oe&&Ie(pe[Oe-1],ze)>0;)pe[Oe]=pe[--Oe];Oe!==At++&&(pe[Oe]=ze)}return pe},jT=function(pe,Ie,ze,Oe){for(var Ne=Ie.length,At=ze.length,nr=0,kt=0;nr<Ne||kt<At;)pe[nr+kt]=nr<Ne&&kt<At?Oe(Ie[nr],ze[kt])<=0?Ie[nr++]:ze[kt++]:nr<Ne?Ie[nr++]:ze[kt++];return pe},yu=hf,Hy=Ir.match(/firefox\/(\d+)/i),Oc=!!Hy&&+Hy[1],As=/MSIE|Trident/.test(Ir),zy=Ir.match(/AppleWebKit\/(\d+)\./),Wy=!!zy&&+zy[1],Rc=[],bu=_e(Rc.sort),DT=_e(Rc.push),Gy=V(function(){Rc.sort(void 0)}),UT=V(function(){Rc.sort(null)}),Ky=fi("sort"),Wh=!V(function(){if(Br)return Br<70;if(!(Oc&&Oc>3)){if(As)return!0;if(Wy)return Wy<603;var pe,Ie,ze,Oe,Ne="";for(pe=65;pe<76;pe++){switch(Ie=String.fromCharCode(pe),pe){case 66:case 69:case 70:case 72:ze=3;break;case 68:case 71:ze=4;break;default:ze=2}for(Oe=0;Oe<47;Oe++)Rc.push({k:Ie+Oe,v:ze})}for(Rc.sort(function(At,nr){return nr.v-At.v}),Oe=0;Oe<Rc.length;Oe++)Ie=Rc[Oe].k.charAt(0),Ne.charAt(Ne.length-1)!==Ie&&(Ne+=Ie);return Ne!=="DGBEFHACIJK"}});_n({target:"Array",proto:!0,forced:Gy||!UT||!Ky||!Wh},{sort:function(Ie){Ie!==void 0&&Xr(Ie);var ze=Pn(this);if(Wh)return Ie===void 0?bu(ze):bu(ze,Ie);var Oe,Ne,At=[],nr=Za(ze);for(Ne=0;Ne<nr;Ne++)Ne in ze&&DT(At,ze[Ne]);for(yu(At,function(kt){return function(dr,gr){return gr===void 0?-1:dr===void 0?1:kt!==void 0?+kt(dr,gr)||0:rs(dr)>rs(gr)?1:-1}}(Ie)),Oe=Za(At),Ne=0;Ne<Oe;)ze[Ne]=At[Ne++];for(;Ne<nr;)rf(ze,Ne++);return ze}});var tl,Ki,vf,lc=sa("Array").sort,Zd=Array.prototype,Su=function(pe){var Ie=pe.sort;return pe===Zd||vr(Zd,pe)&&Ie===Zd.sort?lc:Ie};(function(pe){pe[pe.ASC=1]="ASC",pe[pe.DESC=2]="DESC"})(tl||(tl={})),function(pe){pe[pe.reorderWeight=0]="reorderWeight",pe[pe.createTime=1]="createTime",pe[pe.totalMember=2]="totalMember"}(Ki||(Ki={})),function(pe){pe[pe.square=1]="square",pe[pe.person=2]="person"}(vf||(vf={}));var ql=function(){function pe(Ie,ze){this.name=Ie,this.core=ze,this.name=Ie,this.logger=ze.logger,this.core=ze}return pe.prototype.process=function(ze){var Oe=this[ze.cmd+"Handler"];return typeof Oe=="function"?Oe.call(this,ze):ze.error&&!ze.error.ignore?_o.reject(ze.error):_o.resolve(ze)},pe}(),ep={"24_15":"qchatSubscribe","24_27":"qchatGetUnreadInfo","24_48":"qchatCreateChannel","24_49":"qchatDeleteChannel","24_50":"qchatUpdateChannel","24_51":"qchatGetChannels","24_52":"qchatGetChannelsByPage","24_53":"qchatGetMembersByPage","24_54":"qchatUpdateWhiteBlackRole","24_55":"qchatGetWhiteBlackRolesPage","24_56":"qchatUpdateWhiteBlackMembers","24_57":"qchatGetWhiteBlackMembersPage","24_58":"qchatGetExistingWhiteBlackRoles","24_59":"qchatGetExistingWhiteBlackMembers","24_60":"qchatUpdateCategoryInfoOfChannel","24_109":"qchatCreateChannelCategory","24_110":"qchatRemoveChannelCategory","24_111":"qchatUpdateChannelCategory","24_112":"qchatGetChannelCategoriesByID","24_113":"qchatUpdateChannelCategoryWhiteBlackRole","24_114":"qchatGetChannelCategoryWhiteBlackRolesPage","24_115":"qchatUpdateChannelCategoryWhiteBlackMembers","24_116":"qchatGetChannelCategoryWhiteBlackMembersPage","24_117":"qchatGetChannelCategoryWhiteBlackRoles","24_118":"qchatGetChannelCategoryWhiteBlackMembers","24_119":"qchatGetChannelCategoriesPage","24_120":"qchatGetChannelCategoryChannelsPage","24_93":"qchatGetChannelSearchByPage","24_95":"qchatChannelMemberSearch","25_8":"qchatGetRoleIdsByServerId","25_9":"qchatSubscribeAsVisitor"},Gh={serverId:1,channelId:2,ackTimestamp:3,unreadCount:4,mentionedCount:5,maxCount:6,lastMsgTime:7},ya={channelInfo:{channelId:1,serverId:2,name:4,topic:5,ext:6,type:7,validFlag:8,createTime:9,updateTime:10,owner:11,viewMode:12,categoryId:13,syncMode:14,reorderWeight:15,visitorMode:16},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11},qchatSubReqTag:{type:1,opeType:2},qchatChannelIdInfoTag:{serverId:1,channelId:2},unreadInfo:Gh,qchatGetChannelListPageTag:{serverId:1,timetag:2,limit:3},qchatGetMembersByPageTag:{serverId:1,channelId:2,timetag:3,limit:4},qchatUpdateWhiteBlackRoleTag:{serverId:1,channelId:2,type:3,opeType:4,roleId:5},qchatGetWhiteBlackRolesPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatUpdateWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,opeType:4,toAccids:5},qchatGetWhiteBlackMembersPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatGetExistingWhiteBlackRolesTag:{serverId:1,channelId:2,type:3,roleIds:4},qchatGetExistingWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,accids:4},QChatChannelCategoryInfo:{categoryId:1,serverId:2,name:4,ext:5,owner:6,viewMode:7,validFlag:8,createTime:9,updateTime:10,channelNumber:11},qchatUpdateChannelCategoryWhiteBlackRoleTag:{serverId:1,categoryId:2,type:3,opeType:4,roleId:5},qchatGetChannelCategoryWhiteBlackRolesPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatUpdateChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,opeType:4,toAccids:5},qchatGetChannelCategoryWhiteBlackMembersPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatGetChannelCategoryWhiteBlackRolesTag:{serverId:1,categoryId:2,type:3,roleIds:4},qchatGetChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,accids:4},qchatGetChannelCategoriesPageTag:{serverId:1,timetag:2,limit:3},qchatGetChannelCategoryChannelsPageTag:{serverId:1,categoryId:2,timetag:3,limit:4},qchatGetChannelSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverId:6,sort:7,cursor:8},qchatUpdateChannelTag:{channelId:1,name:4,topic:5,ext:6,viewMode:12,visitorMode:16},serverRoles:{serverId:1,roleIds:2,timeTag:3},qchatChannelMemberSearchTag:{serverId:1,channelId:2,keyword:3,limit:4},qchatChannelMemberInfo:{serverId:1,channelId:2,avatar:3,accid:4,nick:5,createTime:6,updateTime:7}},da=Qc(ya),Kh={qchatCreateChannel:{sid:24,cid:48,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:ya.channelInfo},{type:"Property",name:"antispamTag",reflectMapper:ya.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:da.channelInfo}]},qchatDeleteChannel:{sid:24,cid:49,service:"qchatChannel",params:[{type:"Long",name:"channelId"}]},qchatUpdateChannel:{sid:24,cid:50,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:ya.qchatUpdateChannelTag},{type:"Property",name:"antispamTag",reflectMapper:ya.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:da.channelInfo}]},qchatGetChannels:{sid:24,cid:51,service:"qchatChannel",params:[{type:"LongArray",name:"channelIds"}],response:[{type:"PropertyArray",name:"channelList",reflectMapper:da.channelInfo}]},qchatGetChannelsByPage:{sid:24,cid:52,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelListPageTag",reflectMapper:ya.qchatGetChannelListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.channelInfo}]},qchatGetMembersByPage:{sid:24,cid:53,service:"qchatChannel",params:[{type:"Property",name:"qchatGetMembersByPageTag",reflectMapper:ya.qchatGetMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.memberInfo}]},qchatUpdateWhiteBlackRole:{sid:24,cid:54,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackRoleTag",reflectMapper:ya.qchatUpdateWhiteBlackRoleTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.memberInfo}]},qchatGetWhiteBlackRolesPage:{sid:24,cid:55,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackRolesPageTag",reflectMapper:ya.qchatGetWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.serverRole}]},qchatUpdateWhiteBlackMembers:{sid:24,cid:56,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackMembersTag",reflectMapper:ya.qchatUpdateWhiteBlackMembersTag}]},qchatGetWhiteBlackMembersPage:{sid:24,cid:57,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackMembersPageTag",reflectMapper:ya.qchatGetWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.memberInfo}]},qchatGetExistingWhiteBlackRoles:{sid:24,cid:58,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackRolesTag",reflectMapper:ya.qchatGetExistingWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:da.serverRole}]},qchatGetExistingWhiteBlackMembers:{sid:24,cid:59,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackMembersTag",reflectMapper:ya.qchatGetExistingWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:da.memberInfo}]},qchatUpdateCategoryInfoOfChannel:{sid:24,cid:60,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateCategoryInfoOfChannelTag",reflectMapper:ya.channelInfo}],response:[{type:"Property",name:"channelInfo",reflectMapper:da.channelInfo}]},qchatCreateChannelCategory:{sid:24,cid:109,service:"qchatChannel",params:[{type:"Property",name:"qchatCreateChannelCategoryTag",reflectMapper:ya.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:da.QChatChannelCategoryInfo}]},qchatRemoveChannelCategory:{sid:24,cid:110,service:"qchatChannel",params:[{type:"Long",name:"categoryId"}]},qchatUpdateChannelCategory:{sid:24,cid:111,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryTag",reflectMapper:ya.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:da.QChatChannelCategoryInfo}]},qchatGetChannelCategoriesByID:{sid:24,cid:112,service:"qchatChannel",params:[{type:"LongArray",name:"categoryIds"}],response:[{type:"PropertyArray",name:"channelCategoryList",reflectMapper:da.QChatChannelCategoryInfo}]},qchatUpdateChannelCategoryWhiteBlackRole:{sid:24,cid:113,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackRoleTag",reflectMapper:ya.qchatUpdateChannelCategoryWhiteBlackRoleTag}]},qchatGetChannelCategoryWhiteBlackRolesPage:{sid:24,cid:114,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesPageTag",reflectMapper:ya.qchatGetChannelCategoryWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.serverRole}]},qchatUpdateChannelCategoryWhiteBlackMembers:{sid:24,cid:115,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackMembersTag",reflectMapper:ya.qchatUpdateChannelCategoryWhiteBlackMembersTag}]},qchatGetChannelCategoryWhiteBlackMembersPage:{sid:24,cid:116,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersPageTag",reflectMapper:ya.qchatGetChannelCategoryWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.memberInfo}]},qchatGetChannelCategoryWhiteBlackRoles:{sid:24,cid:117,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesTag",reflectMapper:ya.qchatGetChannelCategoryWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:da.serverRole}]},qchatGetChannelCategoryWhiteBlackMembers:{sid:24,cid:118,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersTag",reflectMapper:ya.qchatGetChannelCategoryWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:da.memberInfo}]},qchatGetChannelCategoriesPage:{sid:24,cid:119,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoriesPageTag",reflectMapper:ya.qchatGetChannelCategoriesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.QChatChannelCategoryInfo}]},qchatGetChannelCategoryChannelsPage:{sid:24,cid:120,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryChannelsPageTag",reflectMapper:ya.qchatGetChannelCategoryChannelsPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:da.channelInfo}]},qchatSubscribe:{sid:24,cid:15,service:"qchatChannel",params:[{type:"Property",name:"qchatSubReqTag",reflectMapper:ya.qchatSubReqTag},{type:"PropertyArray",name:"channels",reflectMapper:ya.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:da.unreadInfo},{type:"PropertyArray",name:"failedChannels",reflectMapper:da.qchatChannelIdInfoTag}]},qchatGetUnreadInfo:{sid:24,cid:27,service:"qchatChannel",params:[{type:"PropertyArray",name:"channels",reflectMapper:ya.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:da.unreadInfo}]},qchatGetChannelSearchByPage:{sid:24,cid:93,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelSearchByPageTag",reflectMapper:ya.qchatGetChannelSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:da.channelInfo}]},qchatGetRoleIdsByServerId:{sid:25,cid:8,service:"qchatChannel",params:[{type:"Property",name:"qchatGetRoleIdsByServerIdTag",reflectMapper:{serverIdTimeTags:1}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:da.serverRoles},{type:"LongArray",name:"failServerIds"}]},qchatChannelMemberSearch:{sid:24,cid:95,service:"qchatChannel",params:[{type:"Property",name:"qchatChannelMemberSearchTag",reflectMapper:ya.qchatChannelMemberSearchTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:da.qchatChannelMemberInfo}]},qchatSubscribeAsVisitor:{sid:25,cid:9,service:"qchatChannel",params:[{type:"Property",name:"tag",reflectMapper:ya.qchatSubReqTag},{type:"PropertyArray",name:"datas",reflectMapper:ya.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"failedArr",reflectMapper:da.qchatChannelIdInfoTag}]}},Qy={"24_31":"qchatCreateServer","24_32":"qchatDeleteServer","24_33":"qchatUpdateServer","24_34":"qchatGetServers","24_35":"qchatGetServersByPage","24_36":"qchatInviteServerMembers","24_37":"qchatAcceptServerInvite","24_38":"qchatRejectInviteServer","24_39":"qchatApplyServerJoin","24_40":"qchatAcceptServerApply","24_41":"qchatRejectServerApply","24_42":"qchatKickServerMembers","24_43":"qchatLeaveServer","24_44":"qchatUpdateMyMemberInfo","24_45":"qchatUpdateServerMemberInfo","24_46":"qchatGetServerMembers","24_47":"qchatGetServerMembersByPage","24_104":"qchatUpdateServerMemberBan","24_105":"qchatGetBannedMembersByPage","24_91":"qchatServerSearchByPage","24_92":"qchatServerMemberSearchByPage","24_122":"qchatGenerateInviteCode","24_123":"qchatJoinByInviteCode","24_124":"qchatGetInviteApplyRecordOfServer","24_125":"qchatGetInviteApplyRecordOfSelf","25_5":"qchatClearServersUnread","25_7":"qchatSubscribeChannelsByServers","25_10":"qchatEnterAsVisitor","25_11":"qchatLeaveAsVisitor"},ms={serverInfo:{serverId:1,name:3,icon:4,ext:5,owner:6,memberNumber:7,inviteMode:8,applyMode:9,validFlag:10,createTime:11,updateTime:12,channelNumber:13,categoryNumber:14,searchType:15,searchEnable:16,reorderWeight:17},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},otherMemberInfo:{serverId:1,accid:3,nick:4,avatar:5,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},getServerListPageTag:{timestamp:1,limit:2},getServerMemberListPageTag:{serverId:1,timetag:2,limit:3},updateServerMemberBanTag:{serverId:1,opeType:2,accid:3,ext:4},getBannedMembersByPageTag:{serverId:1,timetag:2,limit:3},serverMemberBanInfo:{serverId:1,appid:2,accid:3,ext:4,banTime:5,validFlag:6,createTime:7,updateTime:8},serverSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverType:6,searchType:7,sort:8,cursor:9},serverMemberSearchByPageTag:{serverId:1,keyword:3,limit:4},inviteRespParamTag:{requestId:1},applyRespParamTag:{requestId:1,expireTime:2},inviteApplyRecord:{accid:1,type:2,serverId:3,status:4,requestId:5,createTime:6,updateTime:7,expireTime:8,data:9,recordId:10},clearServersUnreadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},unreadInfo:Gh},is=Qc(ms),rl={qchatCreateServer:{sid:24,cid:31,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:ms.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:ms.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:is.serverInfo}]},qchatDeleteServer:{sid:24,cid:32,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateServer:{sid:24,cid:33,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:ms.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:ms.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:is.serverInfo}]},qchatGetServers:{sid:24,cid:34,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"serverList",reflectMapper:is.serverInfo}]},qchatGetServersByPage:{sid:24,cid:35,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:ms.getServerListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:is.serverInfo}]},qchatInviteServerMembers:{sid:24,cid:36,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"StrArray",name:"failByOverAccids"},{type:"StrArray",name:"failByBanAccids"},{type:"Property",name:"record",reflectMapper:is.applyRespParamTag}]},qchatAcceptServerInvite:{sid:24,cid:37,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:ms.inviteRespParamTag}]},qchatRejectInviteServer:{sid:24,cid:38,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:ms.inviteRespParamTag}]},qchatApplyServerJoin:{sid:24,cid:39,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"Property",name:"data",reflectMapper:is.applyRespParamTag}]},qchatAcceptServerApply:{sid:24,cid:40,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:ms.applyRespParamTag}]},qchatRejectServerApply:{sid:24,cid:41,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:ms.applyRespParamTag}]},qchatKickServerMembers:{sid:24,cid:42,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"}]},qchatLeaveServer:{sid:24,cid:43,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateMyMemberInfo:{sid:24,cid:44,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:ms.memberInfo},{type:"Property",name:"antispamTag",reflectMapper:ms.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:is.memberInfo}]},qchatUpdateServerMemberInfo:{sid:24,cid:45,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:ms.otherMemberInfo},{type:"Property",name:"antispamTag",reflectMapper:ms.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:is.memberInfo}]},qchatGetServerMembers:{sid:24,cid:46,service:"qchatServer",params:[{type:"StrArray",name:"accids"}],response:[{type:"PropertyArray",name:"accidList",reflectMapper:is.memberInfo}]},qchatGetServerMembersByPage:{sid:24,cid:47,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:ms.getServerMemberListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:is.memberInfo}]},qchatUpdateServerMemberBan:{sid:24,cid:104,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:ms.updateServerMemberBanTag}]},qchatGetBannedMembersByPage:{sid:24,cid:105,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:ms.getBannedMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:is.serverMemberBanInfo}]},qchatServerSearchByPage:{sid:24,cid:91,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:ms.serverSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:is.serverInfo}]},qchatServerMemberSearchByPage:{sid:24,cid:92,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:ms.serverMemberSearchByPageTag}],response:[{type:"PropertyArray",name:"members",reflectMapper:is.serverMemberBanInfo}]},qchatGenerateInviteCode:{sid:24,cid:122,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,ttl:2}}],response:[{type:"Property",name:"data",reflectMapper:{1:"serverId",2:"requestId",3:"inviteCode",4:"expireTime"}}]},qchatJoinByInviteCode:{sid:24,cid:123,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,inviteCode:2,ps:3}}]},qchatGetInviteApplyRecordOfServer:{sid:24,cid:124,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,fromTime:2,toTime:3,reverse:4,limit:5,cursor:6}}],response:[{type:"PropertyArray",name:"data",reflectMapper:is.inviteApplyRecord}]},qchatGetInviteApplyRecordOfSelf:{sid:24,cid:125,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{fromTime:1,toTime:2,reverse:3,limit:4,cursor:5}}],response:[{type:"PropertyArray",name:"data",reflectMapper:is.inviteApplyRecord}]},qchatClearServersUnread:{sid:25,cid:5,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"Property",name:"clearServersUnreadTag",reflectMapper:is.clearServersUnreadTag}]},qchatSubscribeChannelsByServers:{sid:25,cid:7,service:"qchatServer",params:[{type:"int",name:"type"},{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:is.unreadInfo},{type:"LongArray",name:"failServerIds"}]},qchatEnterAsVisitor:{sid:25,cid:10,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]},qchatLeaveAsVisitor:{sid:25,cid:11,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]}},Ns=Function.prototype,qT=Object.prototype,Jy=Ns.toString,VT=qT.hasOwnProperty,HT=Jy.call(Object),yf=function(Ie){if(!Fs(Ie)||Mi(Ie)!="[object Object]")return!1;var ze=$y(Ie);if(ze===null)return!0;var Oe=VT.call(ze,"constructor")&&ze.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&Jy.call(Oe)==HT};function Ua(pe,Ie){if(!yf(Ie))return{};var ze=JSON.parse(Ao(Ie)),Oe=Yy(pe,ze);return JSON.parse(Ao(Un(Un({},ze),Oe)))}function Yy(pe,Ie){if(!yf(Ie))return{};var ze={},Oe=ka(pe);return Qn(Oe).call(Oe,function(Ne){var At=pe[Ne].type;if(typeof At!="string"){var nr=Yy(pe[Ne],Ie);ka(nr).length>0&&(ze[Ne]=nr)}else{var kt=pe[Ne],dr=kt.rawKey||Ne,gr=zT[At](Ie,dr,kt);gr!==void 0&&(Ie[dr]=void 0,ze[Ne]=gr)}}),ze}var zT={number:function(Ie,ze){if(Ie[ze]!==void 0)return+Ie[ze]},string:function(Ie,ze){if(Ie[ze]!==void 0)return Ie[ze]},boolean:function(Ie,ze){return+Ie[ze]>0||+Ie[ze]!=0&&void 0},enum:function(Ie,ze,Oe){return Fp(Oe)[Ie[ze]]},object:function(Ie,ze){if(Ie[ze]!==void 0)try{return JSON.parse(Ie[ze])}catch{return{}}}};function Tu(pe,Ie){if(!yf(Ie))return{};var ze=JSON.parse(Ao(Ie)),Oe=Xy(pe,ze);return JSON.parse(Ao(Un(Un({},ze),Oe)))}function Xy(pe,Ie){var ze;if(!yf(Ie))return Kc(ze=ka(pe)).call(ze,function(At,nr){return At[pe[nr].rawKey||nr]=void 0,At},{});var Oe={},Ne=ka(pe);return Qn(Ne).call(Ne,function(At){var nr=pe[At].type;if(typeof nr!="string"){var kt=Xy(pe[At],Ie[At]);return Un(Oe,kt),void(Ie[At]=void 0)}var dr=pe[At],gr=dr.rawKey||At,Ar=bf[nr](Ie,At,dr);Ie[gr]=void 0,Oe[gr]=Ar}),Oe}var bf={number:function(Ie,ze){return Ie[ze]},string:function(Ie,ze){return Ie[ze]},boolean:function(Ie,ze){return Ie[ze]===!0?1:Ie[ze]===!1?0:void 0},enum:function(Ie,ze,Oe){return Fp(Oe)[Ie[ze]]},object:function(Ie,ze){if(Ie[ze]!==void 0)try{return Ao(Ie[ze])}catch{return""}}},Qh=bf,Zy={serverId:{type:"string"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"},owner:{type:"string"},memberNumber:{type:"number"},inviteMode:{type:"number"},applyMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"},categoryNumber:{type:"number"},searchType:{type:"number"},searchEnable:{type:"boolean"},reorderWeight:{type:"string"}},WT={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},GT={serverId:{type:"string"},appid:{type:"string"},accid:{type:"string"},ext:{type:"string"},banTime:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}};function tp(pe){return Ua(Zy,pe)}function Jh(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return tp(Ie)}):[]}function Cu(pe){return Ua(WT,pe)}function Bc(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return Cu(Ie)}):[]}function KT(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return function(Oe){return Ua(GT,Oe)}(Ie)}):[]}function nl(pe){var Ie,ze,Oe;if(!pe.antispamTag)return{};var Ne=Un({},pe.antispamTag);return!((Ie=pe.antispamTag)===null||Ie===void 0)&&Ie.antiSpamBusinessId&&typeof((ze=pe.antispamTag)===null||ze===void 0?void 0:ze.antiSpamBusinessId)!="string"&&(Ne.antiSpamBusinessId=Ao((Oe=pe.antispamTag)===null||Oe===void 0?void 0:Oe.antiSpamBusinessId)),Ne}var QT={accid:{type:"string"},type:{type:"number"},serverId:{type:"string"},status:{type:"number"},requestId:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"},expireTime:{type:"number"},data:{type:"object"}};function rp(pe){return Ua(QT,pe)}function eb(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return rp(Ie)}):[]}var Sf,Pa,_i,Vl,JT={successServerIds:{type:"object"},failServerIds:{type:"object"},ackTimestamp:{type:"number"}};function Hl(pe){return Ua(JT,pe)}(function(pe){pe[pe.reorderWeight=0]="reorderWeight",pe[pe.createTime=1]="createTime"})(Sf||(Sf={})),function(pe){pe[pe.white=1]="white",pe[pe.black=2]="black"}(Pa||(Pa={})),function(pe){pe[pe.add=1]="add",pe[pe.remove=2]="remove"}(_i||(_i={})),function(pe){pe[pe.message=0]="message",pe[pe.media=1]="media",pe[pe.ext=100]="ext"}(Vl||(Vl={}));var np={channelId:{type:"string"},serverId:{type:"string"},name:{type:"string"},topic:{type:"string"},ext:{type:"string"},type:{type:"enum",values:Vl},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},viewMode:{type:"number"},categoryId:{type:"string"},syncMode:{type:"number"},visitorMode:{type:"number"},reorderWeight:{type:"string"}},YT={serverId:{type:"string"},channelId:{type:"string"},ackTimestamp:{type:"number"},unreadCount:{type:"number"},mentionedCount:{type:"number"},maxCount:{type:"number"},lastMsgTime:{type:"number"}},tb={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:Pa},opeType:{type:"enum",values:_i},toAccids:{type:"object"}},Tf={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:Pa},opeType:{type:"enum",values:_i},roleId:{type:"string"}},XT={categoryId:{type:"string"},serverId:{type:"string"},name:{type:"string"},ext:{type:"string"},owner:{type:"string"},viewMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"}},rb={serverId:{type:"string"},channelId:{type:"string"},accid:{type:"string"},avatar:{type:"string"},nick:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function op(pe){return Ua(Tf,pe)}function ap(pe){return Ua(np,pe)}function sp(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return ap(Ie)}):[]}function Yh(pe){return Ua(YT,pe)}function ip(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return Yh(Ie)}):[]}function cp(pe){return Ua(XT,pe)}function Xh(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return cp(Ie)}):[]}function ZT(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return function(Oe){return Ua(rb,Oe)}(Ie)}):[]}function lp(pe){try{return JSON.parse(pe)}catch{return[]}}var Cf=tc?tc.isConcatSpreadable:void 0,eC=function(Ie){return ic(Ie)||xh(Ie)||!!(Cf&&Ie&&Ie[Cf])},nb=function pe(Ie,ze,Oe,Ne,At){var nr=-1,kt=Ie.length;for(Oe||(Oe=eC),At||(At=[]);++nr<kt;){var dr=Ie[nr];ze>0&&Oe(dr)?ze>1?pe(dr,ze-1,Oe,Ne,At):oi(At,dr):Ne||(At[At.length]=dr)}return At},Zh=ny(function(pe,Ie){return Jn(pe)?ih(pe,nb(Ie,1,Jn,!0)):[]}),Mf=Zh;function ev(pe,Ie){var ze,Oe=ja!==void 0&&fs(pe)||pe["@@iterator"];if(Oe)return Xo(ze=(Oe=Oe.call(pe)).next).call(ze,Oe);if(Es(pe)||(Oe=function(nr,kt){var dr;if(nr){if(typeof nr=="string")return tv(nr,kt);var gr=Lo(dr=Object.prototype.toString.call(nr)).call(dr,8,-1);if(gr==="Object"&&nr.constructor&&(gr=nr.constructor.name),gr==="Map"||gr==="Set")return Xc(nr);if(gr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gr))return tv(nr,kt)}}(pe))||Ie&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ne=0;return function(){return Ne>=pe.length?{done:!0}:{done:!1,value:pe[Ne++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tv(pe,Ie){(Ie==null||Ie>pe.length)&&(Ie=pe.length);for(var ze=0,Oe=new Array(Ie);ze<Ie;ze++)Oe[ze]=pe[ze];return Oe}var Mu,up,zl,Wl,tC=function(pe){function Ie(Oe){var Ne;return(Ne=pe.call(this,"qchatServer",Oe)||this).core=Oe,oc({cmdMap:Qy,cmdConfig:rl}),Ne}ea(Ie,pe);var ze=Ie.prototype;return ze.createServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatCreateServer",{serverInfo:Un(Un({},Ne),{searchEnable:Ne.searchEnable===!1?0:1}),antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",tp(nr.content.serverInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.deleteServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1}},Ne),kt.next=3,this.core.sendCmd("qchatDeleteServer",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",min:1},icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateServer",{serverInfo:Un(Un({},Ne),{searchEnable:Ne.searchEnable===!1?0:1}),antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",tp(nr.content.serverInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.getServers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverIds:{type:"array",itemType:"string",min:1}},Ne),dr.next=3,this.core.sendCmd("qchatGetServers",Ne);case 3:return nr=dr.sent,dr.abrupt("return",Jh(nr.content.serverList));case 5:case"end":return dr.stop()}},At,this)}))},ze.getServersByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({timestamp:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetServersByPage",{tag:Ne});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:Jh(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.inviteServerMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},Ne),gr.next=3,this.core.sendCmd("qchatInviteServerMembers",Ne);case 3:return nr=gr.sent,kt=nr.content.record||{},gr.abrupt("return",{failByOverAccids:nr.content.failByOverAccids,failByBanAccids:nr.content.failByBanAccids,recordInfo:rp(kt)});case 6:case"end":return gr.stop()}},At,this)}))},ze.acceptServerInvite=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),kt.next=3,this.core.sendCmd("qchatAcceptServerInvite",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.rejectInviteServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),kt.next=3,this.core.sendCmd("qchatRejectInviteServer",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.applyServerJoin=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatApplyServerJoin",Ne);case 3:return nr=dr.sent,dr.abrupt("return",rp(nr.content.data));case 5:case"end":return dr.stop()}},At,this)}))},ze.acceptServerApply=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1},accid:{type:"string",min:1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),kt.next=3,this.core.sendCmd("qchatAcceptServerApply",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.rejectServerApply=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),kt.next=3,this.core.sendCmd("qchatRejectServerApply",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.kickServerMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1}},Ne),kt.next=3,this.core.sendCmd("qchatKickServerMembers",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.leaveServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1}},Ne),kt.next=3,this.core.sendCmd("qchatLeaveServer",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateMyMemberInfo=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",min:1},accid:{type:"string",required:!1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1},ext:{type:"string",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateMyMemberInfo",{memberInfo:Ne,antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",Cu(nr.content.memberInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.updateServerMemberInfo=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",min:1},accid:{type:"string",min:1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateServerMemberInfo",{memberInfo:Ne,antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",Cu(nr.content.memberInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.getServerMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr,Ar;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(On({accids:{type:"array"}},Ne),nr=[],Ne.accids.length)for(kt=ev(Ne.accids);!(dr=kt()).done;)gr=dr.value,nr.push(gr.serverId+"|"+gr.accid);return Ur.next=5,this.core.sendCmd("qchatGetServerMembers",{accids:nr});case 5:return Ar=Ur.sent,Ur.abrupt("return",Bc(Ar.content.accidList));case 7:case"end":return Ur.stop()}},At,this)}))},ze.getServerMembersByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetServerMembersByPage",{tag:Ne});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:Bc(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.subscribeServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(On({type:{type:"number",min:4,max:4,required:!1},opeType:{type:"number",min:1,max:2}},Ne),Ne.type||(Ne.type=4),!Ne.servers.length){Rr.next=10;break}return kt=Un(Un({},Ne),{channels:Ro(nr=Ne.servers).call(nr,function(Ur){return{serverId:Ur.serverId,channelId:""}})}),Rr.next=6,this.core.qchatChannel.subscribeModuleService.subscribe(kt);case 6:return dr=Rr.sent,gr=dr.failedChannels,this.core.qchatChannel.subscribeModuleService.cacheSubscribe(kt),Rr.abrupt("return",{failedServers:gr});case 10:case"end":return Rr.stop()}},At,this)}))},ze.banServerMember=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Un(Un({},Ne),{opeType:1})});case 3:case"end":return kt.stop()}},At,this)}))},ze.unbanServerMember=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Un(Un({},Ne),{opeType:2})});case 3:case"end":return kt.stop()}},At,this)}))},ze.getBannedMembersByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetBannedMembersByPage",{tag:Ne});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:KT(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.serverSearchByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(On({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},serverType:{type:"array",itemType:"number",min:0,required:!1},order:{type:"enum",values:Ea(tl),required:!1},searchType:{type:"enum",values:Ea(vf)},sort:{type:"enum",values:Ea(Ki),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),!(Ne.startTime&&Ne.endTime&&Ne.startTime>=Ne.endTime)){Rr.next=3;break}throw new Nl("startTime more than endTime",Ne,"timeRule");case 3:return Rr.next=5,this.core.sendCmd("qchatServerSearchByPage",{tag:Un(Un({},Ne),{order:Ne.order&&tl[Ne.order],searchType:vf[Ne.searchType],sort:Su(Ne)&&Ki[Su(Ne)],serverType:Ao(Ne.serverType)})});case 5:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag),cursor:gr.cursor},datas:Jh(dr)});case 8:case"end":return Rr.stop()}},At,this)}))},ze.serverMemberSearchByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatServerMemberSearchByPage",{tag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",Bc(nr.content.members));case 5:case"end":return dr.stop()}},At,this)}))},ze.generateInviteCode=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},ttl:{type:"number",min:0,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGenerateInviteCode",{tag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",Ua({expireTime:{type:"number"}},nr.content.data));case 5:case"end":return dr.stop()}},At,this)}))},ze.joinByInviteCode=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},inviteCode:{type:"string",allowEmpty:!1},ps:{type:"string",required:!1}},Ne),kt.next=3,this.core.sendCmd("qchatJoinByInviteCode",{tag:Ne});case 3:case"end":return kt.stop()}},At,this)}))},ze.getInviteApplyRecordOfServer=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfServer",{tag:Un(Un({},Ne),{reverse:Yl(Ne)?1:0})});case 3:return nr=dr.sent,dr.abrupt("return",eb(nr.content.data));case 5:case"end":return dr.stop()}},At,this)}))},ze.getInviteApplyRecordOfSelf=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfSelf",{tag:Un(Un({},Ne),{reverse:Yl(Ne)?1:0})});case 3:return nr=dr.sent,dr.abrupt("return",eb(nr.content.data));case 5:case"end":return dr.stop()}},At,this)}))},ze.markRead=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverIds:{type:"array",itemType:"string",required:!0}},Ne),Rr.next=3,this.core.sendCmd("qchatClearServersUnread",Ne);case 3:return nr=Rr.sent,kt=Hl(nr.content.clearServersUnreadTag),dr=kt.successServerIds,gr=kt.ackTimestamp,this.logger.log("qchatServer::clearServersUnread:: begin auto clear servers unreadInfo"),this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",dr,gr),Rr.abrupt("return",kt);case 9:case"end":return Rr.stop()}},At,this)}))},ze.subscribeAllChannel=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return On({type:{type:"number",required:!0},serverIds:{type:"array",itemType:"string",required:!0,max:10}},Ne),Ar.next=3,this.core.sendCmd("qchatSubscribeChannelsByServers",Ne,{timeout:3e4});case 3:return(kt=Ar.sent).content.unreadInfos=ip(kt.content.unreadInfos),kt.content.failServerIds=lp(kt.content.failServerIds),dr={type:Ne.type,opeType:1,channels:Ro(nr=kt.content.unreadInfos).call(nr,function(Rr){return{serverId:Rr.serverId,channelId:Rr.channelId}})},this.core.eventBus.emit("qchatChannel/cacheSubscribe",dr),this.core.eventBus.emit("qchatChannel/getRoleIdsByServerId",Ne.serverIds),this.core.eventBus.emit("qchatChannel/updateUnreads",kt.content.unreadInfos),Ar.abrupt("return",kt.content);case 11:case"end":return Ar.stop()}},At,this)}))},ze.enterAsVisitor=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return On({serverIds:{type:"array",itemType:"string",min:1}},Ne),Ar.next=3,this.core.sendCmd("qchatEnterAsVisitor",{tag:{serverIds:Ao(Ne.serverIds)}});case 3:return nr=Ar.sent,kt=lp(nr.content.failServerIds),dr=Mf(Ne.serverIds,kt),this.core.qchatChannel.subscribeForVisitorService.cacheServer(dr),Ar.abrupt("return",{failedServers:kt});case 8:case"end":return Ar.stop()}},At,this)}))},ze.leaveAsVisitor=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr=this;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverIds:{type:"array",itemType:"string",min:1}},Ne),Rr.next=3,this.core.sendCmd("qchatLeaveAsVisitor",{tag:{serverIds:Ao(Ne.serverIds)}});case 3:return nr=Rr.sent,kt=lp(nr.content.failServerIds),dr=Mf(Ne.serverIds,kt),Qn(dr).call(dr,function(Ur){gr.core.qchatChannel.subscribeForVisitorService.deleteServer(Ur)}),Rr.abrupt("return",{failedServers:kt});case 8:case"end":return Rr.stop()}},At,this)}))},ze.subscribeAsVisitor=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(On({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},serverIds:{type:"array",itemType:"string",min:1}},Ne),!Ne.serverIds.length){kt.next=5;break}return kt.next=4,this.core.qchatChannel.subscribeForVisitorService.subscribeServerAsVisitor(Ne);case 4:return kt.abrupt("return",kt.sent);case 5:return kt.abrupt("return",{failedServers:[]});case 6:case"end":return kt.stop()}},At,this)}))},Ie}(ql);(function(pe){pe[pe.everyone=1]="everyone",pe[pe.custom=2]="custom"})(Mu||(Mu={})),function(pe){pe[pe.normal=0]="normal",pe[pe.owner=1]="owner"}(up||(up={})),function(pe){pe[pe.ignore=0]="ignore",pe[pe.deny=-1]="deny",pe[pe.allow=1]="allow"}(zl||(zl={})),function(pe){pe[pe.manageServer=1]="manageServer",pe[pe.manageChannel=2]="manageChannel",pe[pe.manageRole=3]="manageRole",pe[pe.sendMsg=4]="sendMsg",pe[pe.accountInfoSelf=5]="accountInfoSelf",pe[pe.inviteServer=6]="inviteServer",pe[pe.kickServer=7]="kickServer",pe[pe.accountInfoOther=8]="accountInfoOther",pe[pe.recallMsg=9]="recallMsg",pe[pe.deleteMsg=10]="deleteMsg",pe[pe.remindOther=11]="remindOther",pe[pe.remindEveryone=12]="remindEveryone",pe[pe.manageBlackWhiteList=13]="manageBlackWhiteList",pe[pe.banServerMember=14]="banServerMember",pe[pe.RTCChannelConnect=15]="RTCChannelConnect",pe[pe.RTCChannelDisconnectOther=16]="RTCChannelDisconnectOther",pe[pe.RTCChannelOpenMicrophone=17]="RTCChannelOpenMicrophone",pe[pe.RTCChannelOpenCamera=18]="RTCChannelOpenCamera",pe[pe.RTCChannelOpenCloseOtherMicrophone=19]="RTCChannelOpenCloseOtherMicrophone",pe[pe.RTCChannelOpenCloseOtherCamera=20]="RTCChannelOpenCloseOtherCamera",pe[pe.RTCChannelOpenCloseEveryoneMicrophone=21]="RTCChannelOpenCloseEveryoneMicrophone",pe[pe.RTCChannelOpenCloseEveryoneCamera=22]="RTCChannelOpenCloseEveryoneCamera",pe[pe.RTCChannelOpenShareScreen=23]="RTCChannelOpenShareScreen",pe[pe.RTCChannelCloseOtherShareScreen=24]="RTCChannelCloseOtherShareScreen",pe[pe.manageInviteApply=25]="manageInviteApply",pe[pe.manageInviteApplyHistory=26]="manageInviteApplyHistory",pe[pe.mentionedRole=27]="mentionedRole"}(Wl||(Wl={}));var ob={type:{type:"enum",values:Mu},memberType:{type:"enum",values:up},createTime:{type:"number"},updateTime:{type:"number"},priority:{type:"number"},memberCount:{type:"number"},joinTime:{type:"number"}},rC={roleId:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},type:{type:"enum",values:Mu},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"}},nC={id:{type:"string"},accid:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},memberType:{type:"enum",values:up},joinTime:{type:"number"},inviter:{type:"string"}};function ol(pe){var Ie=Un({},pe),ze=Tu(ob,Ie);return ze.auths&&(ze.auths=function(Ne){var At,nr=Kc(At=ka(Ne)).call(At,function(kt,dr){var gr=Wl[dr];return gr?kt[gr]=zl[Ne[dr]]:kt[dr]=zl[Ne[dr]],kt},{});return Ao(nr)}(ze.auths)),ze}function Qi(pe){var Ie;return Kc(Ie=ka(pe)).call(Ie,function(ze,Oe){var Ne=iy(Wl,Oe);return Ne?ze[Ne]=zl[pe[Oe]]:ze[na(Oe)]=zl[pe[Oe]],ze},{})}function Ls(pe){var Ie=Ua(ob,pe);return pe.auths&&(Ie.auths=Qi(JSON.parse(Ie.auths))),Ie.isMember&&delete Ie.isMember,Ie}function yi(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return Ls(Ie)}):[]}function kf(pe){return pe.auths&&(pe.auths=Qi(JSON.parse(pe.auths))),Ua(rC,pe)}function ku(pe){return pe.auths&&(pe.auths=Qi(JSON.parse(pe.auths))),Ua(nC,pe)}Tv("Set",function(pe){return function(){return pe(this,arguments.length?arguments[0]:void 0)}},Nd);var ab=kr.Set;_n({target:"Set",stat:!0,forced:!0},{from:Ng}),_n({target:"Set",stat:!0,forced:!0},{of:Mv}),_n({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var Ie=po(this),ze=Xr(Ie.add),Oe=0,Ne=arguments.length;Oe<Ne;Oe++)jt(ze,Ie,arguments[Oe]);return Ie}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:kv});var Gl=Sc;_n({target:"Set",proto:!0,real:!0,forced:!0},{every:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return!xo(Oe,function(At,nr){if(!Ne(At,At,ze))return nr()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(Ie){var ze=po(this),Oe=new(Js(ze,xr("Set")))(ze),Ne=Xr(Oe.delete);return xo(Ie,function(At){jt(Ne,Oe,At)}),Oe}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0),At=new(Js(ze,xr("Set"))),nr=Xr(At.add);return xo(Oe,function(kt){Ne(kt,kt,ze)&&jt(nr,At,kt)},{IS_ITERATOR:!0}),At}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{find:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return xo(Oe,function(At,nr){if(Ne(At,At,ze))return nr(At)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(Ie){var ze=po(this),Oe=new(Js(ze,xr("Set"))),Ne=Xr(ze.has),At=Xr(Oe.add);return xo(Ie,function(nr){jt(Ne,ze,nr)&&jt(At,Oe,nr)}),Oe}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(Ie){var ze=po(this),Oe=Xr(ze.has);return!xo(Ie,function(Ne,At){if(jt(Oe,ze,Ne)===!0)return At()},{INTERRUPTED:!0}).stopped}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(Ie){var ze=Sc(this),Oe=po(Ie),Ne=Oe.has;return Ve(Ne)||(Oe=new(xr("Set"))(Ie),Ne=Xr(Oe.has)),!xo(ze,function(At,nr){if(jt(Ne,Oe,At)===!1)return nr()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(Ie){var ze=po(this),Oe=Xr(ze.has);return!xo(Ie,function(Ne,At){if(jt(Oe,ze,Ne)===!1)return At()},{INTERRUPTED:!0}).stopped}});var sb=_e([].join),oC=[].push;_n({target:"Set",proto:!0,real:!0,forced:!0},{join:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=Ie===void 0?",":rs(Ie),At=[];return xo(Oe,oC,{that:At,IS_ITERATOR:!0}),sb(At,Ne)}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{map:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0),At=new(Js(ze,xr("Set"))),nr=Xr(At.add);return xo(Oe,function(kt){jt(nr,At,Ne(kt,kt,ze))},{IS_ITERATOR:!0}),At}});var ib=TypeError;_n({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=arguments.length<2,At=Ne?void 0:arguments[1];if(Xr(Ie),xo(Oe,function(nr){Ne?(Ne=!1,At=nr):At=Ie(At,nr,nr,ze)},{IS_ITERATOR:!0}),Ne)throw ib("Reduce of empty set with no initial value");return At}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{some:function(Ie){var ze=po(this),Oe=Gl(ze),Ne=Go(Ie,arguments.length>1?arguments[1]:void 0);return xo(Oe,function(At,nr){if(Ne(At,At,ze))return nr()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(Ie){var ze=po(this),Oe=new(Js(ze,xr("Set")))(ze),Ne=Xr(Oe.delete),At=Xr(Oe.add);return xo(Ie,function(nr){jt(Ne,Oe,nr)||jt(At,Oe,nr)}),Oe}}),_n({target:"Set",proto:!0,real:!0,forced:!0},{union:function(Ie){var ze=po(this),Oe=new(Js(ze,xr("Set")))(ze);return xo(Ie,Xr(Oe.add),{that:Oe}),Oe}});var wf,dp,Ji,pp,al,ba,Fc,wu=ab;(function(pe){pe[pe.sendTime=1]="sendTime"})(wf||(wf={})),function(pe){pe[pe.text=0]="text",pe[pe.image=1]="image",pe[pe.audio=2]="audio",pe[pe.video=3]="video",pe[pe.geo=4]="geo",pe[pe.notification=5]="notification",pe[pe.file=6]="file",pe[pe.tip=10]="tip",pe[pe.robot=11]="robot",pe[pe.g2=12]="g2",pe[pe.custom=100]="custom"}(dp||(dp={})),function(pe){pe[pe.sending=1]="sending",pe[pe.success=2]="success",pe[pe.failed=3]="failed"}(Ji||(Ji={})),function(pe){pe[pe.notifyAll=1]="notifyAll",pe[pe.notifySubscribe=2]="notifySubscribe"}(pp||(pp={})),function(pe){pe[pe.unknown=0]="unknown",pe[pe.server=1]="server",pe[pe.channel=2]="channel",pe[pe.serverAccids=3]="serverAccids",pe[pe.channelAccids=4]="channelAccids",pe[pe.accids=5]="accids"}(al||(al={})),function(pe){pe[pe.serverMemberInvite=1]="serverMemberInvite",pe[pe.serverMemberInviteReject=2]="serverMemberInviteReject",pe[pe.serverMemberApply=3]="serverMemberApply",pe[pe.serverMemberApplyReject=4]="serverMemberApplyReject",pe[pe.serverCreate=5]="serverCreate",pe[pe.serverRemove=6]="serverRemove",pe[pe.serverUpdate=7]="serverUpdate",pe[pe.serverMemberInviteDone=8]="serverMemberInviteDone",pe[pe.serverMemberInviteAccept=9]="serverMemberInviteAccept",pe[pe.serverMemberApplyDone=10]="serverMemberApplyDone",pe[pe.serverMemberApplyAccept=11]="serverMemberApplyAccept",pe[pe.serverMemberKick=12]="serverMemberKick",pe[pe.serverMemberLeave=13]="serverMemberLeave",pe[pe.serverMemberUpdate=14]="serverMemberUpdate",pe[pe.channelCreate=15]="channelCreate",pe[pe.channelRemove=16]="channelRemove",pe[pe.channelUpdate=17]="channelUpdate",pe[pe.channelUpdateWhiteBlackIdentify=18]="channelUpdateWhiteBlackIdentify",pe[pe.channelUpdateWhiteBlackIdentifyUser=19]="channelUpdateWhiteBlackIdentifyUser",pe[pe.updateQuickComment=20]="updateQuickComment",pe[pe.channelCategoryCreate=21]="channelCategoryCreate",pe[pe.channelCategoryRemove=22]="channelCategoryRemove",pe[pe.channelCategoryUpdate=23]="channelCategoryUpdate",pe[pe.channelCategoryUpdateWhiteBlackIdentify=24]="channelCategoryUpdateWhiteBlackIdentify",pe[pe.channelCategoryUpdateWhiteBlackIdentifyUser=25]="channelCategoryUpdateWhiteBlackIdentifyUser",pe[pe.serverIdentifyAdd=26]="serverIdentifyAdd",pe[pe.serverIdentifyRemove=27]="serverIdentifyRemove",pe[pe.serverIdentifyUpdate=28]="serverIdentifyUpdate",pe[pe.channelIdentifyUpdate=29]="channelIdentifyUpdate",pe[pe.userIdentifyUpdate=30]="userIdentifyUpdate",pe[pe.channelVisibilityUpdate=31]="channelVisibilityUpdate",pe[pe.serverEnterLeave=32]="serverEnterLeave",pe[pe.serverMemberJoinByInviteCode=33]="serverMemberJoinByInviteCode",pe[pe.channelVisibilityToVisitorUpdate=34]="channelVisibilityToVisitorUpdate",pe[pe.myMemberInfoUpdated=35]="myMemberInfoUpdated",pe[pe.custom=100]="custom",pe[pe.msgTyping=101]="msgTyping"}(ba||(ba={})),function(pe){pe[pe.reply=1]="reply",pe[pe.thread=2]="thread",pe[pe.all=3]="all"}(Fc||(Fc={}));var rv=function(){return hi.Date.now()},aC=/\s/,sC=function(Ie){for(var ze=Ie.length;ze--&&aC.test(Ie.charAt(ze)););return ze},iC=/^\s+/,cC=function(Ie){return Ie&&Ie.slice(0,sC(Ie)+1).replace(iC,"")},lC=/^[-+]0x[0-9a-f]+$/i,uC=/^0b[01]+$/i,dC=/^0o[0-7]+$/i,pC=parseInt,nv=function(Ie){if(typeof Ie=="number")return Ie;if(pf(Ie))return NaN;if(Ui(Ie)){var ze=typeof Ie.valueOf=="function"?Ie.valueOf():Ie;Ie=Ui(ze)?ze+"":ze}if(typeof Ie!="string")return Ie===0?Ie:+Ie;Ie=cC(Ie);var Oe=uC.test(Ie);return Oe||dC.test(Ie)?pC(Ie.slice(2),Oe?2:8):lC.test(Ie)?NaN:+Ie},fC=Math.max,cb=Math.min,mC=function(Ie,ze,Oe){var Ne,At,nr,kt,dr,gr,Ar=0,Rr=!1,Ur=!1,Dr=!0;if(typeof Ie!="function")throw new TypeError("Expected a function");function Jr($n){var ho=Ne,co=At;return Ne=At=void 0,Ar=$n,kt=Ie.apply(co,ho)}function kn($n){return Ar=$n,dr=setTimeout(jn,ze),Rr?Jr($n):kt}function Tn($n){var ho=$n-gr;return gr===void 0||ho>=ze||ho<0||Ur&&$n-Ar>=nr}function jn(){var $n=rv();if(Tn($n))return Bn($n);dr=setTimeout(jn,function(co){var oa=ze-(co-gr);return Ur?cb(oa,nr-(co-Ar)):oa}($n))}function Bn($n){return dr=void 0,Dr&&Ne?Jr($n):(Ne=At=void 0,kt)}function Gn(){var $n=rv(),ho=Tn($n);if(Ne=arguments,At=this,gr=$n,ho){if(dr===void 0)return kn(gr);if(Ur)return clearTimeout(dr),dr=setTimeout(jn,ze),Jr(gr)}return dr===void 0&&(dr=setTimeout(jn,ze)),kt}return ze=nv(ze)||0,Ui(Oe)&&(Rr=!!Oe.leading,nr=(Ur="maxWait"in Oe)?fC(nv(Oe.maxWait)||0,ze):nr,Dr="trailing"in Oe?!!Oe.trailing:Dr),Gn.cancel=function(){dr!==void 0&&clearTimeout(dr),Ar=0,Ne=gr=At=dr=void 0},Gn.flush=function(){return dr===void 0?kt:Bn(rv())},Gn},ov=function(Ie,ze,Oe){var Ne=!0,At=!0;if(typeof Ie!="function")throw new TypeError("Expected a function");return Ui(Oe)&&(Ne="leading"in Oe?!!Oe.leading:Ne,At="trailing"in Oe?!!Oe.trailing:At),mC(Ie,ze,{leading:Ne,maxWait:ze,trailing:At})},gC=function(Ie,ze,Oe){var Ne=-1,At=Ie.length;ze<0&&(ze=-ze>At?0:At+ze),(Oe=Oe>At?At:Oe)<0&&(Oe+=At),At=ze>Oe?0:Oe-ze>>>0,ze>>>=0;for(var nr=Array(At);++Ne<At;)nr[Ne]=Ie[Ne+ze];return nr},xu=function(Ie,ze,Oe){if(!Ui(Oe))return!1;var Ne=typeof ze;return!!(Ne=="number"?Kp(Oe)&&Wd(ze,Oe.length):Ne=="string"&&ze in Oe)&&$p(Oe[ze],Ie)},$c=1/0,hC=function(Ie){return Ie?(Ie=nv(Ie))===$c||Ie===-1/0?17976931348623157e292*(Ie<0?-1:1):Ie==Ie?Ie:0:Ie===0?Ie:0},vC=function(Ie){var ze=hC(Ie),Oe=ze%1;return ze==ze?Oe?ze-Oe:ze:0},xf=Math.ceil,yC=Math.max,fp,_u=function(Ie,ze,Oe){ze=(Oe?xu(Ie,ze,Oe):ze===void 0)?1:yC(vC(ze),0);var Ne=Ie==null?0:Ie.length;if(!Ne||ze<1)return[];for(var At=0,nr=0,kt=Array(xf(Ne/ze));At<Ne;)kt[nr++]=gC(Ie,At,At+=ze);return kt};(function(pe){pe[pe.sub=1]="sub",pe[pe.unSub=2]="unSub"})(fp||(fp={}));var av,bC=function(){function pe(ze){var Oe=this;this.unreadCount={},this.autoSubscribeUnreadMap={},this.autoSubscribeServerMap={},this.autoSubscribeTypingMap={},this.unreadServerCount={},this.serverRoleIdsMap={},this._serverUnreadInfo=ov(function(Ne){Oe.core.emit("serverUnreadInfo",Oe.getServerUnreadInfo(Ne))},100),this.core=ze}var Ie=pe.prototype;return Ie.changeCacheServerRoleIds=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar,Rr,Ur=this;return wr.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(nr=Oe.attach.serverIdentifyInfo,kt=nr.serverId,dr=nr.roleId,this.serverRoleIdsMap[kt]){Jr.next=4;break}return Jr.next=4,this.getRoleIdsByServerId([kt]);case 4:if(gr=this.serverRoleIdsMap[kt],!(Oe.time<gr.timeTag)){Jr.next=7;break}return Jr.abrupt("return");case 7:if(Oe.type===ba[ba.serverIdentifyAdd]?gr.roleIds.add(dr):gr.roleIds.delete(dr),this.core.logger.debug("QChatChannel::qchatChannel/serverIdentifyChange::now "+kt+" roleIds is",gi(At=[]).call(At,gr.roleIds)),Ar=this.unreadServerCount[kt]){Jr.next=12;break}return Jr.abrupt("return");case 12:Rr=_u(ka(Ar),100),Qn(Rr).call(Rr,function(kn){Ur.core.qchatChannel.getChannelUnreadInfos({channels:Ro(kn).call(kn,function(Tn){return{serverId:kt,channelId:Tn}})})});case 14:case"end":return Jr.stop()}},Ne,this)}))},Ie.getRoleIdsByServerId=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr=this;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if((nr=ki(Oe).call(Oe,function(Ur){return!gr.serverRoleIdsMap[Ur]})).length){Rr.next=3;break}return Rr.abrupt("return");case 3:return kt={serverIdTimeTags:nr},Rr.next=6,this.core.sendCmd("qchatGetRoleIdsByServerId",{qchatGetRoleIdsByServerIdTag:kt});case 6:dr=Rr.sent,this.core.logger.debug("QChatChannel:: getRoleIdsByServerId, params is ",kt,"result is",dr),Qn(At=dr.content.serverRoles).call(At,function(Ur){try{Ur.roleIds=JSON.parse(Ur.roleIds)}catch(Dr){gr.core.logger.error("QChatChannel:: getRoleIdsByServerId JSON parse roleIds error",Dr)}gr.serverRoleIdsMap[Ur.serverId]={roleIds:new wu(Ur.roleIds),timeTag:Ur.timeTag}});case 9:case"end":return Rr.stop()}},Ne,this)}))},Ie._unSubscribeChannel=function(Oe,Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(nr=Oe+"_"+Ne,kt=this.autoSubscribeUnreadMap[nr]){gr.next=4;break}return gr.abrupt("return");case 4:this.subscribe({opeType:fp.unSub,type:kt,channels:[{serverId:Oe,channelId:Ne}]}),this.autoSubscribeUnreadMap[nr]=void 0;case 6:case"end":return gr.stop()}},At,this)}))},Ie.subscribe=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr=this;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},Oe),Rr.next=3,this.core.sendCmd("qchatSubscribe",{qchatSubReqTag:{type:Oe.type,opeType:Oe.opeType},channels:Oe.channels});case 3:return nr=Rr.sent,kt=new wu,Qn(At=Oe.channels).call(At,function(Ur){return Hr(gr,void 0,void 0,wr.mark(function Dr(){return wr.wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:this.serverRoleIdsMap[Ur.serverId]||kt.add(Ur.serverId);case 1:case"end":return kn.stop()}},Dr,this)}))}),dr=_u(Xc(kt),10),Qn(dr).call(dr,function(Ur){gr.getRoleIdsByServerId(Ur)}),Rr.abrupt("return",nr.content);case 9:case"end":return Rr.stop()}},Ne,this)}))},Ie.resumeSubscribe=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar,Rr,Ur=this;return wr.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(this.serverRoleIdsMap={},this.unreadServerCount={},this.unreadCount={},gr=100,Oe.isAutoReconnect){Jr.next=6;break}return Jr.abrupt("return");case 6:return Ar={},Qn(At=ka(this.autoSubscribeUnreadMap)).call(At,function(kn){var Tn=Ur.autoSubscribeUnreadMap[kn];if(Tn){var jn=kn.split("_"),Bn={serverId:jn[0],channelId:jn[1]};Ar[Tn]=Ar[Tn]||[],Ar[Tn].push(Bn)}}),Ar[5]=[],Qn(nr=ka(this.autoSubscribeTypingMap)).call(nr,function(kn){return Hr(Ur,void 0,void 0,wr.mark(function Tn(){var jn,Bn,Gn,$n;return wr.wrap(function(co){for(;;)switch(co.prev=co.next){case 0:this.autoSubscribeTypingMap[kn]&&(jn=kn.split("_"),Bn=jn[0],Gn=jn[1],$n={serverId:Bn,channelId:Gn},Ar[5].push($n));case 2:case"end":return co.stop()}},Tn,this)}))}),Ar[4]=[],Qn(kt=ka(this.autoSubscribeServerMap)).call(kt,function(kn){return Hr(Ur,void 0,void 0,wr.mark(function Tn(){var jn;return wr.wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:this.autoSubscribeServerMap[kn]&&(jn={serverId:kn},Ar[4].push(jn));case 2:case"end":return Gn.stop()}},Tn,this)}))}),Rr=[],Qn(dr=ka(Ar)).call(dr,function(kn){var Tn=Ar[kn];if(Tn&&Tn.length===0)return _o.resolve();if(Tn.length>gr){var jn=_u(Tn,100);return Qn(jn).call(jn,function(Bn){Rr.push(Ur.createSubscribePromise(Bn,kn))})}Rr.push(Ur.createSubscribePromise(Tn,kn))}),Jr.next=16,_o.all(Rr);case 16:case"end":return Jr.stop()}},Ne,this)}))},Ie.createSubscribePromise=function(Oe,Ne){var At=this,nr={type:na(Ne),opeType:1,channels:Oe};return this.core.logger.debug("qchatChannel:: autoSubscribeUnread params",nr),this.subscribe(nr).then(function(kt){var dr=kt.unreadInfos;dr&&dr.length>0&&(dr=ip(dr),At.cacheUnreadCount(dr))}).catch(function(kt){At.core.logger.error("qchatChannel:: autoSubscribeUnread error ",kt)})},Ie.cacheSubscribe=function(Oe){var Ne,At=this;Qn(Ne=Oe.channels).call(Ne,function(nr){var kt=nr.channelId?nr.serverId+"_"+nr.channelId:""+nr.serverId,dr=Oe.type===5?At.autoSubscribeTypingMap:Oe.type===4?At.autoSubscribeServerMap:At.autoSubscribeUnreadMap;Oe.opeType===fp.sub?dr[kt]=Oe.type:Oe.opeType===fp.unSub&&(dr[kt]=void 0)})},Ie.cacheUnreadCount=function(Oe){var Ne=this;Qn(Oe).call(Oe,function(At){var nr=At.serverId+"_"+At.channelId;Ne.unreadCount[nr]=Un({},At),Ne.unreadServerCount[At.serverId]||(Ne.unreadServerCount[At.serverId]={}),Ne.unreadServerCount[At.serverId][At.channelId]=!0})},Ie.getServerUnreadInfo=function(Oe){var Ne,At=this,nr={serverId:Oe,unreadCount:0,mentionedCount:0,maxCount:0},kt=this.unreadServerCount[Oe];return kt&&(Qn(Ne=ka(kt)).call(Ne,function(dr){var gr=Oe+"_"+dr,Ar=At.unreadCount[gr];nr.unreadCount+=Ar.unreadCount,nr.mentionedCount+=Ar.mentionedCount,Ar.maxCount!==void 0&&(nr.maxCount=Ar.maxCount)}),nr.unreadCount=nr.unreadCount>nr.maxCount?nr.maxCount:nr.unreadCount,nr.mentionedCount=nr.mentionedCount>nr.maxCount?nr.maxCount:nr.mentionedCount),nr},Ie.getUnreadInfo=function(Oe){On({serverId:{type:"string"},channelId:{type:"string"}},Oe);var Ne=Oe.serverId+"_"+Oe.channelId;return this.unreadCount[Ne]?this.unreadCount[Ne]:null},Ie.shouldChangeUnread=function(Oe,Ne){if(!Oe.serverId||!Oe.channelId||this.core.qchatChannel.subscribeForVisitorService.isInSubscribeChannels(Oe.serverId,Oe.channelId)||Oe.historyEnable===!1||Oe.needBadge===!1||Oe.fromAccount===this.core.account||Ne&&(Oe==null?void 0:Oe.status)!==2)return!1;if(Oe.notifyReason&&Oe.notifyReason===iy(pp,pp.notifySubscribe)){if(!Oe.serverId||!Oe.channelId)return!1;var At=this.getUnreadInfo({serverId:Oe.serverId,channelId:Oe.channelId}),nr=Ne?"ackTimestamp":"lastMsgTime";if(!At||Oe.time&&At[nr]&&At[nr]>Oe.time)return!1}return!0},Ie.shouldChangeMentionedUnread=function(Oe,Ne){return Ne===void 0&&(Ne=!1),Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(!Oe.accidsOfMentionedRoles||!Vi(nr=Oe.accidsOfMentionedRoles).call(nr,this.core.account)){gr.next=2;break}return gr.abrupt("return",!0);case 2:if(!Oe.mentionRoleIds||!Oe.serverId){gr.next=16;break}if(this.serverRoleIdsMap[Oe.serverId]){gr.next=9;break}if(Ne){gr.next=7;break}return this.handledRoleMsg(Oe),gr.abrupt("return",!1);case 7:return gr.next=9,this.getRoleIdsByServerId([Oe.serverId]);case 9:kt=0;case 10:if(!(kt<Oe.mentionRoleIds.length)){gr.next=16;break}if(!this.serverRoleIdsMap[Oe.serverId].roleIds.has(Oe.mentionRoleIds[kt])){gr.next=13;break}return gr.abrupt("return",!0);case 13:kt++,gr.next=10;break;case 16:return gr.abrupt("return",!1);case 17:case"end":return gr.stop()}},At,this)}))},Ie.handledRoleMsg=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar=this;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(Oe.mentionRoleIds){Ur.next=2;break}return Ur.abrupt("return");case 2:if(this.serverRoleIdsMap[Oe.serverId]){Ur.next=5;break}return Ur.next=5,this.getRoleIdsByServerId([Oe.serverId]);case 5:if(this.serverRoleIdsMap[Oe.serverId]){Ur.next=8;break}return this.core.logger.warn("QChatChannel::handledRoleMsg::can not get serverRoleIds,server id",Oe.serverId),Ur.abrupt("return");case 8:if(nr=!1,Qn(At=Oe.mentionRoleIds).call(At,function(Dr){Ar.serverRoleIdsMap[Oe.serverId].roleIds.has(Dr)&&(nr=!0,Ar.core.logger.debug("QChatChannel::handledRoleMsg::will update message mentionedCountmessage is ",Oe))}),nr){Ur.next=12;break}return Ur.abrupt("return");case 12:if(kt=this.unreadCount[Oe.serverId+"_"+Oe.channelId],dr=(Oe==null?void 0:Oe.status)===2,kt.mentionedCount=dr?kt.mentionedCount?kt.mentionedCount-1:0:kt.mentionedCount?kt.mentionedCount+1:1,typeof kt.maxCount!="number"){Ur.next=24;break}if(!((gr=(gr=kt.mentionedCount)>kt.maxCount?kt.maxCount:gr)>kt.maxCount)){Ur.next=21;break}return this.core.logger.debug("QChatChannel::handledRoleMsg::tempUnreadCount more than maxCount"),Ur.abrupt("return");case 21:this.core.emit("unreadInfo",Un(Un({},kt),{mentionedCount:gr})),this.core.emit("unreadInfos",[Un(Un({},kt),{mentionedCount:gr})]),this._serverUnreadInfo(Oe.serverId);case 24:case"end":return Ur.stop()}},Ne,this)}))},Ie.getMentionedFlag=function(Oe,Ne){return Ne===void 0&&(Ne=!1),Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(!Oe.mentionAll){dr.next=4;break}return dr.abrupt("return",!0);case 4:if(!Oe.mentionRoleIds&&!Oe.accidsOfMentionedRoles){dr.next=10;break}return dr.next=7,this.shouldChangeMentionedUnread(Oe,Ne);case 7:return dr.abrupt("return",dr.sent);case 10:if(!Oe.mentionAccids||!Vi(nr=Oe.mentionAccids).call(nr,this.core.account)){dr.next=12;break}return dr.abrupt("return",!0);case 12:return dr.abrupt("return",!1);case 13:case"end":return dr.stop()}},At,this)}))},Ie.changeUnread=function(Oe,Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr,Ar,Rr,Ur;return wr.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(nr=Oe.serverId,kt=Oe.channelId,dr=nr+"_"+kt,this.shouldChangeUnread(Oe,Ne)){Jr.next=6;break}return this.core.logger.debug("changeUnread: "+dr+" does not need to update unreadInfo"),Jr.abrupt("return");case 6:if(this.unreadCount[dr]){Jr.next=11;break}return Jr.next=9,this.core.qchatChannel.getChannelUnreadInfos({channels:[{serverId:nr,channelId:kt}]});case 9:return!this.serverRoleIdsMap[nr]&&Oe.mentionRoleIds&&this.getRoleIdsByServerId([nr]),Jr.abrupt("return");case 11:return gr=this.unreadCount[dr],Ar=(Oe==null?void 0:Oe.status)===2,Jr.next=15,this.getMentionedFlag(Oe);case 15:if(Rr=Jr.sent,Ar?(gr.unreadCount=gr.unreadCount?gr.unreadCount-1:0,Rr&&(gr.mentionedCount=gr.mentionedCount?gr.mentionedCount-1:0),delete gr.lastMsgTime,this.core.logger.debug("changeUnread: "+dr+" unread reduce ",gr)):(gr.unreadCount=gr.unreadCount?gr.unreadCount+1:1,Rr&&(gr.mentionedCount=gr.mentionedCount?gr.mentionedCount+1:1),Oe.time&&(gr.lastMsgTime=Oe.time),this.core.logger.debug("changeUnread: "+dr+" unread add ",gr)),Ur=typeof gr.maxCount=="number"?gr.maxCount:100,!(gr.unreadCount>Ur)){Jr.next=21;break}return this.core.logger.debug("QChatChannel::subscribe::tempUnreadCount more than maxCount"),Jr.abrupt("return");case 21:this.core.logger.warn("unreadInfo event will abandon,please use unreadInfos"),this.core.emit("unreadInfo",Un(Un({},gr),{mentionedCount:gr.mentionedCount>Ur?Ur:gr.mentionedCount,unreadCount:gr.unreadCount>Ur?Ur:gr.unreadCount})),this.core.emit("unreadInfos",[Un(Un({},gr),{mentionedCount:gr.mentionedCount>Ur?Ur:gr.mentionedCount,unreadCount:gr.unreadCount>Ur?Ur:gr.unreadCount})]),this._serverUnreadInfo(nr);case 25:case"end":return Jr.stop()}},At,this)}))},Ie.updateUnreads=function(Oe){var Ne,At=this;if(Oe&&Oe.length>0){var nr=this.getServerUnreadInfo(Oe[0].serverId),kt=this.unreadServerCount[Oe[0].serverId],dr=Ro(Ne=ki(Oe).call(Oe,function(kn){var Tn=kn.serverId+"_"+kn.channelId,jn=At.unreadCount[Tn],Bn=ys(jn,"ackTimestamp"),Gn=ys(kn,"ackTimestamp");return!(Bn&&Gn&&Gn<Bn)&&(ys(jn,"unreadCount")!==ys(kn,"unreadCount")||ys(jn,"mentionedCount")!==ys(kn,"mentionedCount"))})).call(Ne,function(kn){var Tn=kn.serverId,jn=kn.channelId,Bn=Tn+"_"+jn;return At.core.logger.debug("qchat channel updateUnread: ",kn),At.unreadCount[Bn]=Un({},kn),At.unreadServerCount[Tn]||(At.unreadServerCount[Tn]={}),At.unreadServerCount[Tn][jn]=!0,kn});if(dr.length>0){this.core.emit("unreadInfos",dr);var gr=this.getServerUnreadInfo(Oe[0].serverId),Ar=this.unreadServerCount[Oe[0].serverId],Rr=nr.unreadCount!==gr.unreadCount,Ur=!kt||ka(kt).length===0,Dr=Ar&&ka(Ar).length>0,Jr=nr.mentionedCount!==gr.mentionedCount;(Rr||Jr||Ur&&Dr)&&this._serverUnreadInfo(dr[0].serverId)}Qn(dr).call(dr,function(kn){At.core.emit("unreadInfo",kn)})}},Ie.clearUnreadCountByServers=function(Oe,Ne){var At=this,nr=[];Qn(Oe).call(Oe,function(dr){var gr;At.unreadServerCount[dr]&&Qn(gr=ka(At.unreadServerCount[dr])).call(gr,function(Ar){nr.push(dr+"_"+Ar)})});var kt=[];Qn(nr).call(nr,function(dr){kt.push(Un(Un({},At.unreadCount[dr]),{unreadCount:0,mentionedCount:0,ackTimestamp:Ne}))}),this.updateUnreads(kt)},pe}(),SC=function(){function pe(ze){this.limitForBatchEnter=10,this.limitForBatchSubscribe=100,this.autoServers=new wu,this.autoVisitorSubscribeServer=new wu,this.autoVisitorSubscribeChannel=new wu,this.core=ze}var Ie=pe.prototype;return Ie.subscribeChannelAsVisitor=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr=this;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Rr.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:Oe.type||6,opeType:Oe.opeType},datas:Oe.channels});case 2:return nr=Rr.sent,kt=nr.content.failedArr,dr=ki(At=Oe.channels).call(At,function(Ur){return!sf(kt).call(kt,function(Dr){return Dr.channelId===Ur.channelId&&Dr.serverId===Ur.serverId})}),Qn(dr).call(dr,function(Ur){Oe.opeType===1?gr.autoVisitorSubscribeChannel.add(Ur.serverId+"&"+Ur.channelId):gr.autoVisitorSubscribeChannel.delete(Ur.serverId+"&"+Ur.channelId)}),Rr.abrupt("return",{failedChannels:kt});case 7:case"end":return Rr.stop()}},Ne,this)}))},Ie.subscribeServerAsVisitor=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar,Rr=this;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return Dr.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:Oe.type||7,opeType:Oe.opeType},datas:Ro(At=Oe.serverIds).call(At,function(Jr){return{serverId:Jr}})});case 2:return dr=Dr.sent,gr=dr.content.failedArr,Ar=ki(nr=Oe.serverIds).call(nr,function(Jr){return!sf(gr).call(gr,function(kn){return kn.serverId===Jr})}),Qn(Ar).call(Ar,function(Jr){Oe.opeType===1?Rr.autoVisitorSubscribeServer.add(Jr):Rr.autoVisitorSubscribeServer.delete(Jr)}),Dr.abrupt("return",{failedServers:Ro(kt=dr.content.failedArr).call(kt,function(Jr){return Jr.serverId})});case 7:case"end":return Dr.stop()}},Ne,this)}))},Ie.deleteServer=function(Oe){var Ne;this.autoServers.delete(Oe),this.autoVisitorSubscribeServer.has(Oe)&&this.subscribeServerAsVisitor({opeType:2,serverIds:[Oe]});var At=[];Qn(Ne=this.autoVisitorSubscribeChannel).call(Ne,function(nr){if(Ba(nr).call(nr,Oe)===0){var kt=nr.replace(Oe+"&","");At.push({serverId:Oe,channelId:kt})}}),At.length>0&&this.subscribeChannelAsVisitor({opeType:2,channels:At})},Ie.deleteAutoSetInServerId=function(Oe){var Ne,At=this;this.autoServers.delete(Oe),this.autoVisitorSubscribeServer.delete(Oe),Qn(Ne=this.autoVisitorSubscribeChannel).call(Ne,function(nr){Ba(nr).call(nr,Oe)===0&&At.autoVisitorSubscribeChannel.delete(nr)})},Ie.deleteAutoSetInChannel=function(Oe,Ne){this.autoVisitorSubscribeChannel.delete(Oe+"&"+Ne)},Ie.unSubscribeChannel=function(Oe,Ne){this.subscribeChannelAsVisitor({opeType:2,channels:[{serverId:Oe,channelId:Ne}]})},Ie.isInSubscribeChannels=function(Oe,Ne){return this.autoVisitorSubscribeChannel.has(Oe+"&"+Ne)},Ie.isInAutoServers=function(Oe){return this.autoServers.has(Oe)},Ie.doAutoSubscribe=function(){var Oe=this,Ne=[],At=_u(Xc(this.autoVisitorSubscribeServer),this.limitForBatchSubscribe);Qn(At).call(At,function(kt){Ne.push(Oe.subscribeServerAsVisitor({opeType:1,serverIds:kt}))});var nr=_u(Xc(this.autoVisitorSubscribeChannel),this.limitForBatchSubscribe);return Qn(nr).call(nr,function(kt){Ne.push(Oe.subscribeChannelAsVisitor({opeType:1,channels:Ro(kt).call(kt,function(dr){var gr=Ba(dr).call(dr,"&");return{serverId:Lo(dr).call(dr,0,gr),channelId:Lo(dr).call(dr,gr+1)}})}))}),_o.all(Ne)},Ie.doAutoEnterServer=function(){return Hr(this,void 0,void 0,wr.mark(function Oe(){var Ne,At,nr,kt=this;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return Ne=_u(Xc(this.autoServers),this.limitForBatchEnter),At=[],Qn(Ne).call(Ne,function(Ar){At.push(kt.core.qchatServer.enterAsVisitor({serverIds:Ar}))}),gr.next=5,_o.all(At);case 5:nr=gr.sent,Qn(nr).call(nr,function(Ar){var Rr;Qn(Rr=Ar.failedServers).call(Rr,function(Ur){kt.deleteAutoSetInServerId(Ur)})});case 7:case"end":return gr.stop()}},Oe,this)}))},Ie.resumeSubscribe=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){return wr.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:if(!Oe.isAutoReconnect){nr.next=7;break}return nr.next=3,this.doAutoEnterServer();case 3:return nr.next=5,this.doAutoSubscribe();case 5:nr.next=10;break;case 7:this.autoServers.clear(),this.autoVisitorSubscribeChannel.clear(),this.autoVisitorSubscribeServer.clear();case 10:case"end":return nr.stop()}},Ne,this)}))},Ie.cacheServer=function(Oe){var Ne=this;Qn(Oe).call(Oe,function(At){return Ne.autoServers.add(At)})},pe}();(function(pe){pe[pe.sub=1]="sub",pe[pe.unSub=2]="unSub"})(av||(av={}));var TC=function(pe){function Ie(Oe){var Ne,At,nr,kt,dr,gr;return(gr=pe.call(this,"qchatChannel",Oe)||this).core=Oe,oc({cmdMap:ep,cmdConfig:Kh}),gr.subscribeModuleService=new bC(Oe),gr.subscribeForVisitorService=new SC(Oe),gr.core.eventBus.on("qchatChannel/changeUnread",Xo(Ne=gr.subscribeModuleService.changeUnread).call(Ne,gr.subscribeModuleService)),gr.core.eventBus.on("qchatChannel/updateUnreads",Xo(At=gr.subscribeModuleService.updateUnreads).call(At,gr.subscribeModuleService)),gr.core.eventBus.on("qchatChannel/cacheSubscribe",Xo(nr=gr.subscribeModuleService.cacheSubscribe).call(nr,gr.subscribeModuleService)),gr.core.eventBus.on("qchatChannel/clearUnreadCountByServers",Xo(kt=gr.subscribeModuleService.clearUnreadCountByServers).call(kt,gr.subscribeModuleService)),gr.core.eventBus.on("qchatChannel/getRoleIdsByServerId",Xo(dr=gr.subscribeModuleService.getRoleIdsByServerId).call(dr,gr.subscribeModuleService)),gr.core.eventBus.on("logined",function(Ar){gr.subscribeModuleService.resumeSubscribe(Ar),gr.subscribeForVisitorService.resumeSubscribe(Ar)}),gr.core.eventBus.on("qchatChannel/autoUnSubscribe",function(Ar){if(gr.logger.log("QChatChannel::enter autoUnSubscribe sysMsg is",Ar),Ar.type===ba[ba.channelVisibilityUpdate])gr.logger.log("QChatChannel::begin autoUnSubscribe channel key is",Ar.serverId+"_"+Ar.channelId),gr.subscribeModuleService._unSubscribeChannel(Ar.serverId,Ar.channelId),gr.logger.log("QChatChannel::autoUnSubscribe channel done key is",Ar.serverId+"_"+Ar.channelId);else if(Ar.type===ba[ba.serverEnterLeave]){var Rr;gr.subscribeModuleService.autoSubscribeServerMap[Ar.serverId]&&(gr.logger.log("QChatChannel::begin autoUnSubscribe server key is",Ar.serverId),gr.subscribeModuleService.subscribe({type:4,opeType:av.unSub,channels:[{serverId:Ar.serverId,channelId:""}]}),gr.logger.log("QChatChannel::autoUnSubscribe server done key is",Ar.serverId));var Ur=gr.subscribeModuleService.unreadServerCount[Ar.serverId];if(!Ur)return;gr.logger.log("QChatChannel::begin autoUnSubscribe channels key is",ka(Ur)),Qn(Rr=ka(Ur)).call(Rr,function(Dr){gr.subscribeModuleService._unSubscribeChannel(Ar.serverId,Dr)}),gr.logger.log("QChatChannel::autoUnSubscribe channels done key is",ka(Ur))}}),gr.core.eventBus.on("qchatChannel/serverIdentifyChange",function(Ar){gr.subscribeModuleService.changeCacheServerRoleIds(Ar)}),gr}ea(Ie,pe);var ze=Ie.prototype;return ze.createChannel=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",min:1},type:{type:"enum",values:Ea(Vl)},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatCreateChannel",{channelInfo:Un(Un({},Ne),{type:Vl[Ne.type]}),antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",ap(nr.content.channelInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.deleteChannel=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({channelId:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatDeleteChannel",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateChannel=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({channelId:{type:"string",min:1},serverId:{type:"string",required:!1},type:{type:"enum",values:Ea(Vl),required:!1},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},Ne),nr=Ne,Ne.type&&(nr.type=Vl[Ne.type]),gr.next=5,this.core.sendCmd("qchatUpdateChannel",{channelInfo:nr,antispamTag:nl(Ne)});case 5:return kt=gr.sent,gr.abrupt("return",ap(kt.content.channelInfo));case 7:case"end":return gr.stop()}},At,this)}))},ze.getChannels=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({channelIds:{type:"array",itemType:"string",min:1}},Ne),dr.next=3,this.core.sendCmd("qchatGetChannels",Ne);case 3:return nr=dr.sent,dr.abrupt("return",sp(nr.content.channelList));case 5:case"end":return dr.stop()}},At,this)}))},ze.getChannelsByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetChannelsByPage",{qchatGetChannelListPageTag:Un({limit:100},Ne)});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:sp(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.getMembersByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetMembersByPage",{qchatGetMembersByPageTag:Ne});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:Bc(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.updateWhiteBlackRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},roleId:{type:"string",min:1},type:{type:"enum",values:Ea(Pa)},opeType:{type:"enum",values:Ea(_i)}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateWhiteBlackRole",{qchatUpdateWhiteBlackRoleTag:Un(Un({},Ne),{type:Pa[Ne.type],opeType:_i[Ne.opeType]})});case 3:case"end":return kt.stop()}},At,this)}))},ze.getWhiteBlackRolesPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ea(Pa)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetWhiteBlackRolesPage",{qchatGetWhiteBlackRolesPageTag:Un(Un({},Ne),{type:Pa[Ne.type]})});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:yi(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.updateWhiteBlackMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ea(Pa)},opeType:{type:"enum",values:Ea(_i)},toAccids:{type:"array",itemType:"string",min:1}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateWhiteBlackMembers",{qchatUpdateWhiteBlackMembersTag:Un(Un({},Ne),{type:Pa[Ne.type],opeType:_i[Ne.opeType],toAccids:Ao(Ne.toAccids)})});case 3:case"end":return kt.stop()}},At,this)}))},ze.getWhiteBlackMembersPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ea(Pa)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetWhiteBlackMembersPage",{qchatGetWhiteBlackMembersPageTag:Un(Un({limit:100},Ne),{type:Pa[Ne.type]})});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:Bc(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.getExistingWhiteBlackRoles=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ea(Pa)},roleIds:{type:"array",itemType:"string",min:1}},Ne),gr.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackRoles",{qchatGetExistingWhiteBlackRolesTag:Un(Un({},Ne),{type:Pa[Ne.type],roleIds:Ao(Ne.roleIds)})});case 3:return nr=gr.sent,kt=nr.content.datas,gr.abrupt("return",{datas:yi(kt)});case 6:case"end":return gr.stop()}},At,this)}))},ze.getExistingWhiteBlackMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ea(Pa)},accids:{type:"array",itemType:"string",min:1}},Ne),gr.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackMembers",{qchatGetExistingWhiteBlackMembersTag:Un(Un({},Ne),{type:Pa[Ne.type],accids:Ao(Ne.accids)})});case 3:return nr=gr.sent,kt=nr.content.datas,gr.abrupt("return",{datas:Bc(kt)});case 6:case"end":return gr.stop()}},At,this)}))},ze.updateCategoryInfoOfChannel=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({channelId:{type:"string",min:1},categoryId:{type:"string",allowEmpty:!1,required:!1},syncMode:{type:"number",min:0,max:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateCategoryInfoOfChannel",{qchatUpdateCategoryInfoOfChannelTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",ap(nr.content.channelInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.createChannelCategory=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatCreateChannelCategory",{qchatCreateChannelCategoryTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",cp(nr.content.QChatChannelCategoryInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.removeChannelCategory=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatRemoveChannelCategory",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateChannelCategory=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateChannelCategory",{qchatUpdateChannelCategoryTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",cp(nr.content.QChatChannelCategoryInfo));case 5:case"end":return dr.stop()}},At,this)}))},ze.getChannelCategoriesByID=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({categoryIds:{type:"array",itemType:"string",min:1}},Ne),dr.next=3,this.core.sendCmd("qchatGetChannelCategoriesByID",Ne);case 3:return nr=dr.sent,dr.abrupt("return",Xh(nr.content.channelCategoryList));case 5:case"end":return dr.stop()}},At,this)}))},ze.updateChannelCategoryWhiteBlackRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(Pa)},opeType:{type:"enum",values:Ea(_i)},roleId:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackRole",{qchatUpdateChannelCategoryWhiteBlackRoleTag:Un(Un({},Ne),{type:Pa[Ne.type],opeType:_i[Ne.opeType]})});case 3:case"end":return kt.stop()}},At,this)}))},ze.getChannelCategoryWhiteBlackRolesPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(Pa)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRolesPage",{qchatGetChannelCategoryWhiteBlackRolesPageTag:Un(Un({},Ne),{type:Pa[Ne.type]})});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:yi(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.updateChannelCategoryWhiteBlackMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(Pa)},opeType:{type:"enum",values:Ea(_i)},toAccids:{type:"array",itemType:"string",min:1}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackMembers",{qchatUpdateChannelCategoryWhiteBlackMembersTag:Un(Un({},Ne),{type:Pa[Ne.type],opeType:_i[Ne.opeType],toAccids:Ao(Ne.toAccids)})});case 3:case"end":return kt.stop()}},At,this)}))},ze.getChannelCategoryWhiteBlackMembersPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(Pa)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembersPage",{qchatGetChannelCategoryWhiteBlackMembersPageTag:Un(Un({},Ne),{type:Pa[Ne.type]})});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:Bc(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.getChannelCategoryWhiteBlackRoles=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(Pa)},roleIds:{type:"array",itemType:"string",min:1}},Ne),gr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRoles",{qchatGetChannelCategoryWhiteBlackRolesTag:Un(Un({},Ne),{type:Pa[Ne.type],roleIds:Ao(Ne.roleIds)})});case 3:return nr=gr.sent,kt=nr.content.datas,gr.abrupt("return",yi(kt));case 6:case"end":return gr.stop()}},At,this)}))},ze.getChannelCategoryWhiteBlackMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(Pa)},accids:{type:"array",itemType:"string",min:1}},Ne),gr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembers",{qchatGetChannelCategoryWhiteBlackMembersTag:Un(Un({},Ne),{type:Pa[Ne.type],accids:Ao(Ne.accids)})});case 3:return nr=gr.sent,kt=nr.content.datas,gr.abrupt("return",Bc(kt));case 6:case"end":return gr.stop()}},At,this)}))},ze.getChannelCategoriesPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetChannelCategoriesPage",{qchatGetChannelCategoriesPageTag:Ne});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:Xh(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.getChannelCategoryChannelsPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Rr.next=3,this.core.sendCmd("qchatGetChannelCategoryChannelsPage",{qchatGetChannelCategoryChannelsPageTag:Ne});case 3:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag)},datas:sp(dr)});case 6:case"end":return Rr.stop()}},At,this)}))},ze.subscribeChannel=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},Ne),gr.next=3,this.subscribeModuleService.subscribe(Ne);case 3:if((nr=gr.sent).unreadInfos=ip(nr.unreadInfos),Ne.opeType===1&&(Ne.channels=Ro(kt=nr.unreadInfos).call(kt,function(Ar){return{serverId:Ar.serverId,channelId:Ar.channelId}})),this.logger.debug("QChatChannel::subscribeChannel:: cacheSubscribe ",Ne),this.subscribeModuleService.cacheSubscribe(Ne),Ne.type!==5){gr.next=10;break}return gr.abrupt("return");case 10:return this.subscribeModuleService.updateUnreads(nr.unreadInfos),gr.abrupt("return",nr);case 12:case"end":return gr.stop()}},At,this)}))},ze.getChannelUnreadInfos=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,this.core.sendCmd("qchatGetUnreadInfo",Ne);case 2:return nr=gr.sent,kt=ip(nr.content.unreadInfos),this.subscribeModuleService.updateUnreads(kt),gr.abrupt("return",kt);case 6:case"end":return gr.stop()}},At,this)}))},ze.getChannelSearchByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(On({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:1,required:!1},order:{type:"enum",values:Ea(tl),required:!1},limit:{type:"number",min:1,required:!1},serverId:{type:"string",required:!1},sort:{type:"enum",values:Ea(Sf),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),!(Ne.startTime&&Ne.endTime&&Ne.startTime>=Ne.endTime)){Rr.next=3;break}throw new Nl("startTime more than endTime",Ne,"timeRule");case 3:return Rr.next=5,this.core.sendCmd("qchatGetChannelSearchByPage",{qchatGetChannelSearchByPageTag:Un(Un({},Ne),{order:Ne.order&&tl[Ne.order],sort:Su(Ne)&&Sf[Su(Ne)]})});case 5:return nr=Rr.sent,kt=nr.content,dr=kt.datas,gr=kt.listQueryTag,Rr.abrupt("return",{listQueryTag:{hasMore:+gr.hasMore==1,nextTimetag:na(gr.nextTimetag),cursor:gr.cursor},datas:sp(dr)});case 8:case"end":return Rr.stop()}},At,this)}))},ze.channelMemberSearch=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatChannelMemberSearch",{qchatChannelMemberSearchTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",ZT(nr.content.datas));case 5:case"end":return dr.stop()}},At,this)}))},ze.subscribeAsVisitor=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},channels:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},min:1}},Ne),kt.next=3,this.subscribeForVisitorService.subscribeChannelAsVisitor(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},Ie}(ql),lb={"24_61":"qchatCreateServerRole","24_62":"qchatDeleteServerRole","24_63":"qchatUpdateServerRole","24_64":"qchatGetServerRoles","24_65":"qchatAddChannelRole","24_66":"qchatRemoveChannelRole","24_67":"qchatUpdateChannelRole","24_68":"qchatGetChannelRoles","24_69":"qchatAddMemberRole","24_70":"qchatRemoveMemberRole","24_71":"qchatUpdateMemberRole","24_72":"qchatGetMemberRoles","24_73":"qchatAddMembersToServerRole","24_74":"qchatRemoveMembersFromServerRole","24_75":"qchatGetMembersFromServerRole","24_76":"qchatGetServerRolesByAccid","24_77":"qchatGetExistingServerRolesByAccids","24_78":"qchatGetExistingChannelRolesByServerRoleIds","24_79":"qchatGetExistingAccidsOfMemberRoles","24_80":"qchatUpdateServerRolePriorities","24_81":"qchatGetExistingAccidsInServerRole","24_82":"qchatCheckPermission","24_83":"qchatAddChannelCategoryRole","24_84":"qchatRemoveChannelCategoryRole","24_85":"qchatUpdateChannelCategoryRole","24_86":"qchatGetChannelCategoryRole","24_87":"qchatAddChannelCategoryMemberRole","24_88":"qchatRemoveChannelCategoryMemberRole","24_89":"qchatUpdateChannelCategoryMemberRole","24_90":"qchatGetChannelCategoryMemberRole","24_126":"qchatCheckPermissions"},gs={channelRole:{serverId:1,roleId:2,parentRoleId:3,channelId:4,name:5,icon:6,ext:7,auths:8,type:9,createTime:10,updateTime:11},memberRole:{serverId:1,id:2,accid:3,channelId:4,auths:5,createTime:6,updateTime:7,nick:8,avatar:9,ext:10,memberType:11,joinTime:12,inviter:13},antispamTag:{antiSpamBusinessId:1},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11,isMember:12},getRoleByPagesTag:{serverId:1,channelId:2,time:3,limit:4},checkPermissionTag:{serverId:1,channelId:2,auth:3},member:{serverId:1,roleId:2,accid:3,createTime:4,updateTime:5,nick:6,avatar:7,ext:8,type:9,joinTime:10,inviter:11},qchatAddChannelCategoryRoleTag:{categoryId:3,serverId:4,parentRoleId:5},channelCategoryRole:{roleId:1,categoryId:3,serverId:4,parentRoleId:5,type:6,validFlag:7,createTime:8,updateTime:9,auths:10,name:11,icon:12,ext:13},qchatGetChannelCategoryRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},channelCategoryMemberRole:{id:1,accid:3,categoryId:4,serverId:5,validFlag:6,createTime:7,updateTime:8,auths:9,nick:10,avatar:11,ext:12,memberType:13,joinTime:14,inviter:15},qchatGetChannelCategoryMemberRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},checkPermissionsTag:{serverId:1,channelId:2,auths:3}},Aa=Qc(gs),CC={qchatCreateServerRole:{service:"qchatRole",sid:24,cid:61,params:[{type:"Property",name:"serverRole",reflectMapper:gs.serverRole},{type:"Property",name:"antispamTag",reflectMapper:gs.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:Aa.serverRole}]},qchatDeleteServerRole:{service:"qchatRole",sid:24,cid:62,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"}]},qchatUpdateServerRole:{service:"qchatRole",sid:24,cid:63,params:[{type:"Property",name:"updateServerRoleTag",reflectMapper:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,priority:7}},{type:"Property",name:"antispamTag",reflectMapper:gs.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:Aa.serverRole}]},qchatGetServerRoles:{service:"qchatRole",sid:24,cid:64,params:[{type:"Property",name:"getServerRolesTag",reflectMapper:{serverId:1,timetag:2,limit:3,priority:4,channelId:5,categoryId:6}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:Aa.serverRole}]},qchatAddChannelRole:{service:"qchatRole",sid:24,cid:65,params:[{type:"Property",name:"channelRole",reflectMapper:gs.channelRole}],response:[{type:"Property",name:"channelRole",reflectMapper:Aa.channelRole}]},qchatRemoveChannelRole:{service:"qchatRole",sid:24,cid:66,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelRole:{service:"qchatRole",sid:24,cid:67,params:[{type:"Property",name:"updateChannelRoleTag",reflectMapper:{serverId:1,roleId:2,channelId:3,auths:4}}],response:[{type:"Property",name:"channelRole",reflectMapper:Aa.channelRole}]},qchatGetChannelRoles:{service:"qchatRole",sid:24,cid:68,params:[{type:"Property",name:"getChannelRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:Aa.channelRole}]},qchatAddMemberRole:{service:"qchatRole",sid:24,cid:69,params:[{type:"Property",name:"memberRole",reflectMapper:gs.memberRole}],response:[{type:"Property",name:"memberRole",reflectMapper:Aa.memberRole}]},qchatRemoveMemberRole:{service:"qchatRole",sid:24,cid:70,params:[{type:"Property",name:"memberRole",reflectMapper:gs.memberRole}]},qchatUpdateMemberRole:{service:"qchatRole",sid:24,cid:71,params:[{type:"Property",name:"updateMemberRoleTag",reflectMapper:{serverId:1,accid:2,channelId:3,auths:4}}],response:[{type:"Property",name:"memberRole",reflectMapper:Aa.memberRole}]},qchatGetMemberRoles:{service:"qchatRole",sid:24,cid:72,params:[{type:"Property",name:"getMemberRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:Aa.memberRole}]},qchatAddMembersToServerRole:{service:"qchatRole",sid:24,cid:73,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatRemoveMembersFromServerRole:{service:"qchatRole",sid:24,cid:74,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatGetMembersFromServerRole:{service:"qchatRole",sid:24,cid:75,params:[{type:"Property",name:"getMembersFromServerRoleTag",reflectMapper:{serverId:1,roleId:2,timetag:3,accid:4,limit:5}}],response:[{type:"PropertyArray",name:"members",reflectMapper:Aa.member}]},qchatGetServerRolesByAccid:{service:"qchatRole",sid:24,cid:76,params:[{type:"Property",name:"getServerRolesByAccidTag",reflectMapper:{serverId:1,accid:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:Aa.serverRole}]},qchatGetExistingServerRolesByAccids:{service:"qchatRole",sid:24,cid:77,params:[{type:"Long",name:"serverId"},{type:"String",name:"accids"}],response:[{type:"String",name:"serverRoles"}]},qchatGetExistingChannelRolesByServerRoleIds:{service:"qchatRole",sid:24,cid:78,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"roleIds"}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:Aa.channelRole}]},qchatGetExistingAccidsOfMemberRoles:{service:"qchatRole",sid:24,cid:79,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:Aa.memberRole}]},qchatUpdateServerRolePriorities:{service:"qchatRole",sid:24,cid:80,params:[{type:"Long",name:"serverId"},{type:"PropertyArray",name:"serverRoles",reflectMapper:{serverId:1,roleId:2,priority:7}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:Aa.serverRole}]},qchatGetExistingAccidsInServerRole:{service:"qchatRole",sid:24,cid:81,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"members",reflectMapper:Aa.member}]},qchatCheckPermission:{service:"qchatRole",sid:24,cid:82,params:[{type:"Property",name:"checkPermissionTag",reflectMapper:gs.checkPermissionTag}],response:[{type:"Boolean",name:"checked"}]},qchatAddChannelCategoryRole:{service:"qchatRole",sid:24,cid:83,params:[{type:"Property",name:"qchatAddChannelCategoryRoleTag",reflectMapper:gs.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:Aa.channelCategoryRole}]},qchatRemoveChannelCategoryRole:{service:"qchatRole",sid:24,cid:84,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelCategoryRole:{service:"qchatRole",sid:24,cid:85,params:[{type:"Property",name:"qchatUpdateChannelCategoryRoleTag",reflectMapper:gs.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:Aa.channelCategoryRole}]},qchatGetChannelCategoryRole:{service:"qchatRole",sid:24,cid:86,params:[{type:"Property",name:"qchatGetChannelCategoryRoleTag",reflectMapper:gs.qchatGetChannelCategoryRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:Aa.channelCategoryRole}]},qchatAddChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:87,params:[{type:"Property",name:"qchatAddChannelCategoryMemberRoleTag",reflectMapper:gs.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:Aa.channelCategoryMemberRole}]},qchatRemoveChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:88,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"String",name:"accid"}]},qchatUpdateChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:89,params:[{type:"Property",name:"qchatUpdateChannelCategoryMemberRoleTag",reflectMapper:gs.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:Aa.channelCategoryMemberRole}]},qchatGetChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:90,params:[{type:"Property",name:"qchatGetChannelCategoryMemberRoleTag",reflectMapper:gs.qchatGetChannelCategoryMemberRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:Aa.channelCategoryMemberRole}]},qchatCheckPermissions:{service:"qchatRole",sid:24,cid:126,params:[{type:"Property",name:"checkPermissionsTag",reflectMapper:gs.checkPermissionsTag}],response:[{type:"PropertyArray",name:"checkPermissionsResult",reflectMapper:{1:"auth",2:"isAllow"}}]}},MC=function(){function pe(ze){this.core=ze}var Ie=pe.prototype;return Ie.addChannelCategoryRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},Oe),kt.next=3,this.core.sendCmd("qchatAddChannelCategoryRole",{qchatAddChannelCategoryRoleTag:Oe});case 3:return At=kt.sent,kt.abrupt("return",kf(At.content.channelCategoryRole));case 5:case"end":return kt.stop()}},Ne,this)}))},Ie.removeChannelCategoryRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){return wr.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Oe),nr.next=3,this.core.sendCmd("qchatRemoveChannelCategoryRole",Oe);case 3:case"end":return nr.stop()}},Ne,this)}))},Ie.updateChannelCategoryRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object"}},Oe),kt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryRole",{qchatUpdateChannelCategoryRoleTag:ol(Oe)});case 3:if((At=kt.sent).raw.code!==406){kt.next=6;break}throw new Bo("No update required",{},406);case 6:return kt.abrupt("return",kf(At.content.channelCategoryRole));case 7:case"end":return kt.stop()}},Ne,this)}))},Ie.getChannelCategoryRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Oe),kt.next=3,this.core.sendCmd("qchatGetChannelCategoryRole",{qchatGetChannelCategoryRoleTag:Oe});case 3:return At=kt.sent,kt.abrupt("return",(dr=At.content.list,Es(dr)&&dr.length>0?Ro(dr).call(dr,function(gr){return kf(gr)}):[]));case 5:case"end":return kt.stop()}var dr},Ne,this)}))},Ie.addChannelCategoryMemberRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Oe),kt.next=3,this.core.sendCmd("qchatAddChannelCategoryMemberRole",{qchatAddChannelCategoryMemberRoleTag:Oe});case 3:return At=kt.sent,kt.abrupt("return",ku(At.content.channelCategoryMemberRole));case 5:case"end":return kt.stop()}},Ne,this)}))},Ie.removeChannelCategoryMemberRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){return wr.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Oe),nr.next=3,this.core.sendCmd("qchatRemoveChannelCategoryMemberRole",Oe);case 3:case"end":return nr.stop()}},Ne,this)}))},Ie.updateChannelCategoryMemberRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object"}},Oe),kt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryMemberRole",{qchatUpdateChannelCategoryMemberRoleTag:ol(Oe)});case 3:if((At=kt.sent).raw.code!==406){kt.next=6;break}throw new Bo("No update required",{},406);case 6:return kt.abrupt("return",ku(At.content.channelCategoryMemberRole));case 7:case"end":return kt.stop()}},Ne,this)}))},Ie.getChannelCategoryMemberRole=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Oe),kt.next=3,this.core.sendCmd("qchatGetChannelCategoryMemberRole",{qchatGetChannelCategoryMemberRoleTag:Oe});case 3:return At=kt.sent,kt.abrupt("return",(dr=At.content.list,Es(dr)&&dr.length>0?Ro(dr).call(dr,function(gr){return ku(gr)}):[]));case 5:case"end":return kt.stop()}var dr},Ne,this)}))},pe}(),kC=function(pe){function Ie(Oe){var Ne;return(Ne=pe.call(this,"qchatRole",Oe)||this).core=Oe,oc({cmdMap:lb,cmdConfig:CC}),Ne.category=new MC(Oe),Ne}ea(Ie,pe);var ze=Ie.prototype;return ze.createServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1},priority:{type:"number",min:1},icon:{type:"string",required:!1},ext:{type:"string",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatCreateServerRole",{serverRole:Un(Un({},ol(Ne)),{type:Mu.custom}),antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",Ls(nr.content.serverRole));case 5:case"end":return dr.stop()}},At,this)}))},ze.updateServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},name:{type:"string",required:!1},icon:{type:"string",required:!1},ext:{type:"string",required:!1},priority:{type:"number",required:!1},auths:{type:"object",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateServerRole",{updateServerRoleTag:ol(Ne),antispamTag:nl(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",Ls(nr.content.serverRole));case 5:case"end":return dr.stop()}},At,this)}))},ze.deleteServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatDeleteServerRole",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.getServerRoles=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},categoryId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},priority:{type:"number",required:!1}},Ne),Ar.next=3,this.core.sendCmd("qchatGetServerRoles",{getServerRolesTag:ol(Ne)});case 3:return kt=Ar.sent,dr=ki(nr=kt.content.serverRoles).call(nr,function(Rr){return na(Rr.isMember)===1}),dr=Ro(dr).call(dr,function(Rr){return Rr.roleId}),Ar.abrupt("return",{roles:yi(kt.content.serverRoles),isMemberRoles:dr});case 7:case"end":return Ar.stop()}},At,this)}))},ze.addChannelRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},Ne),dr.next=3,this.core.sendCmd("qchatAddChannelRole",{channelRole:ol(Ne)});case 3:return nr=dr.sent,dr.abrupt("return",Ls(nr.content.channelRole));case 5:case"end":return dr.stop()}},At,this)}))},ze.getChannelRoles=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetChannelRoles",{getChannelRolesTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",yi(nr.content.channelRoles));case 5:case"end":return dr.stop()}},At,this)}))},ze.removeChannelRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatRemoveChannelRole",Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateChannelRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateChannelRole",{updateChannelRoleTag:ol(Ne)});case 3:if((nr=dr.sent).raw.code!==406){dr.next=6;break}throw new Bo("No update required",{},406);case 6:return dr.abrupt("return",Ls(nr.content.channelRole));case 7:case"end":return dr.stop()}},At,this)}))},ze.addMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Ne),dr.next=3,this.core.sendCmd("qchatAddMemberRole",{memberRole:Ne});case 3:return nr=dr.sent,dr.abrupt("return",Ls(nr.content.memberRole));case 5:case"end":return dr.stop()}},At,this)}))},ze.getMemberRoles=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetMemberRoles",{getMemberRolesTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",yi(nr.content.memberRoles));case 5:case"end":return dr.stop()}},At,this)}))},ze.removeMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatRemoveMemberRole",{memberRole:Ne});case 3:case"end":return kt.stop()}},At,this)}))},ze.updateMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatUpdateMemberRole",{updateMemberRoleTag:ol(Ne)});case 3:if((nr=dr.sent).raw.code!==406){dr.next=6;break}throw new Bo("No update required",{},406);case 6:return dr.abrupt("return",Ls(nr.content.memberRole));case 7:case"end":return dr.stop()}},At,this)}))},ze.addMembersToServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},Ne),Ar.next=3,this.core.sendCmd("qchatAddMembersToServerRole",Un(Un({},Ne),{accids:Ao(Ne.accids)}));case 3:return nr=Ar.sent,kt=ys(nr,"content.accids.successAccids"),dr=ys(nr,"content.accids.failedAccids"),Ar.abrupt("return",{successAccids:kt?JSON.parse(kt):[],failedAccids:dr?JSON.parse(dr):[]});case 7:case"end":return Ar.stop()}},At,this)}))},ze.removeMembersFromServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},Ne),Ar.next=3,this.core.sendCmd("qchatRemoveMembersFromServerRole",Un(Un({},Ne),{accids:Ao(Ne.accids)}));case 3:return nr=Ar.sent,kt=ys(nr,"content.accids.successAccids"),dr=ys(nr,"content.accids.failedAccids"),Ar.abrupt("return",{successAccids:kt?JSON.parse(kt):[],failedAccids:dr?JSON.parse(dr):[]});case 7:case"end":return Ar.stop()}},At,this)}))},ze.getMembersFromServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},accid:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetMembersFromServerRole",{getMembersFromServerRoleTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",yi(nr.content.members));case 5:case"end":return dr.stop()}},At,this)}))},ze.getServerRolesByAccid=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetServerRolesByAccid",{getServerRolesByAccidTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",yi(nr.content.serverRoles));case 5:case"end":return dr.stop()}},At,this)}))},ze.getExistingServerRolesByAccids=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ne),Ar.next=3,this.core.sendCmd("qchatGetExistingServerRolesByAccids",{serverId:Ne.serverId,accids:Ao(Ne.accids)});case 3:return nr=Ar.sent,Ar.prev=4,dr=JSON.parse(nr.content.serverRoles),Qn(kt=ka(dr)).call(kt,function(Rr){var Ur;Qn(Ur=dr[Rr]).call(Ur,function(Dr,Jr){dr[Rr][Jr]=ns(Dr,Aa.serverRole)}),dr[Rr]=yi(dr[Rr])}),Ar.abrupt("return",dr);case 10:throw Ar.prev=10,Ar.t0=Ar.catch(4),this.logger.error("can not parse serverRolesGroupByAccid from "+Ne.serverId+" and "+Ne.accids,nr.content.serverRoles),Ar.t0;case 14:case"end":return Ar.stop()}},At,this,[[4,10]])}))},ze.getExistingChannelRolesByServerRoleIds=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleIds:{type:"array",itemType:"string"}},Ne),dr.next=3,this.core.sendCmd("qchatGetExistingChannelRolesByServerRoleIds",{serverId:Ne.serverId,channelId:Ne.channelId,roleIds:Ao(Ne.roleIds)});case 3:return nr=dr.sent,dr.abrupt("return",yi(nr.content.channelRoles));case 5:case"end":return dr.stop()}},At,this)}))},ze.getExistingAccidsOfMemberRoles=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ne),gr.next=3,this.core.sendCmd("qchatGetExistingAccidsOfMemberRoles",{serverId:Ne.serverId,channelId:Ne.channelId,accids:Ao(Ne.accids)});case 3:return nr=gr.sent,kt=nr.content.memberRoles,gr.abrupt("return",kt&&kt.length>0?Ro(kt).call(kt,function(Ar){return Ar.accid}):[]);case 6:case"end":return gr.stop()}},At,this)}))},ze.getExistingAccidsInServerRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ne),gr.next=3,this.core.sendCmd("qchatGetExistingAccidsInServerRole",{serverId:Ne.serverId,roleId:Ne.roleId,accids:Ao(Ne.accids)});case 3:return nr=gr.sent,kt=nr.content.members,gr.abrupt("return",kt&&kt.length>0?Ro(kt).call(kt,function(Ar){return Ar.accid}):[]);case 6:case"end":return gr.stop()}},At,this)}))},ze.updateServerRolePriorities=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},serverRoles:{type:"array"}},Ne),gr.next=3,this.core.sendCmd("qchatUpdateServerRolePriorities",{serverId:Ne.serverId,serverRoles:Ro(nr=Ne.serverRoles).call(nr,function(Ar){return{serverId:Ar.serverId,roleId:Ar.roleId,priority:Ar.priority}})});case 3:return kt=gr.sent,gr.abrupt("return",yi(kt.content.serverRoles));case 5:case"end":return gr.stop()}},At,this)}))},ze.checkPermission=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auth:{type:"string"}},Ne),dr.next=3,this.core.sendCmd("qchatCheckPermission",{checkPermissionTag:Un(Un({},Ne),{auth:Wl[Ne.auth]||Ne.auth})});case 3:return nr=dr.sent,dr.abrupt("return",nr.content.checked);case 5:case"end":return dr.stop()}},At,this)}))},ze.addChannelCategoryRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.addChannelCategoryRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.removeChannelCategoryRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.removeChannelCategoryRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateChannelCategoryRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.updateChannelCategoryRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.getChannelCategoryRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.getChannelCategoryRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.addChannelCategoryMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.addChannelCategoryMemberRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.removeChannelCategoryMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.removeChannelCategoryMemberRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.updateChannelCategoryMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.updateChannelCategoryMemberRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.getChannelCategoryMemberRole=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.category.getChannelCategoryMemberRole(Ne);case 2:return kt.abrupt("return",kt.sent);case 3:case"end":return kt.stop()}},At,this)}))},ze.checkPermissions=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auths:{type:"array",itemType:"string"}},Ne),this.core.logger.log("qchatRole::checkPermission options is",Ne),Rr.next=4,this.core.sendCmd("qchatCheckPermissions",{checkPermissionsTag:Un(Un({},Ne),{auths:Ao(Ro(nr=Ne.auths).call(nr,function(Ur){return Wl[Ur]||Ur}))})});case 4:return dr=Rr.sent,this.core.logger.log("qchatRole::checkPermission result is",dr.content),gr={},Qn(kt=dr.content.checkPermissionsResult).call(kt,function(Ur){gr[Ur.auth]=Ur.isAllow}),this.core.logger.log("qchatRole::checkPermission auths is",gr),Rr.abrupt("return",Qi(gr));case 10:case"end":return Rr.stop()}},At,this)}))},Ie}(ql),_f=function(Ie,ze){return Fy(Ie,ze,function(Oe,Ne){return Ry(Ie,Ne)})},wC=function(Ie){return Ie!=null&&Ie.length?nb(Ie,1):[]},Lc,ai,If=function(Ie){return ry(ey(Ie,void 0,wC),Ie+"")}(function(pe,Ie){return pe==null?{}:_f(pe,Ie)}),sv={"24_10":"qchatSendMsg","24_11":"qchatOnMsg","24_12":"qchatOnRecvUnreadInfo","24_13":"qchatSendCustomSysMsg","24_14":"qchatOnSysMsg","24_16":"qchatGetHistoryMsg","24_17":"qchatMarkMessageRead","24_18":"qchatMultiSyncMessageRead","24_22":"qchatUpdateSystemNotification","24_23":"qchatMultiSyncSystemNotificationUpdate","24_24":"qchatSyncSystemNotification","24_25":"qchatUpdateMessage","24_26":"qchatRecvMessageUpdate","24_28":"qchatMarkSysMsgRead","24_94":"qchatMessageSearchByPage","24_100":"qchatGetMessageHistoryByIds","24_101":"qchatGetThreadMessages","24_102":"qchatUpdateQuickComment","24_103":"qchatGetQuickComments","24_108":"qchatGetThreadRootMessagesMeta","24_121":"qchatGetLastMessageOfChannels","24_127":"qchatGetMentionedMeMessages","25_6":"qchatMultiSyncServersMessageRead"},js={getHistoryMsgTag:{serverId:1,channelId:2,beginTime:3,endTime:4,excludeMsgId:5,limit:6,reverse:7},getThreadHistoryMsgTag:{beginTime:1,endTime:2,excludeMsgId:3,limit:4,reverse:5},qchatMsgTag:{serverId:1,channelId:2,fromAccount:3,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,updateTime:8,type:9,body:10,attach:11,ext:12,msgIdClient:13,msgIdServer:14,resendFlag:15,status:16,pushPayload:17,pushContent:18,mentionAccids:19,mentionAll:20,env:21,callbackExt:22,replyMsgFromAccount:23,replyMsgTime:24,replyMsgIdServer:25,replyMsgIdClient:26,threadMsgFromAccount:27,threadMsgTime:28,threadMsgIdServer:29,threadMsgIdClient:30,useCustomContent:31,antiSpamContent:32,antiSpamBusinessId:33,antiSpamUsingYidun:34,yidunCallback:35,yidunAntiCheating:36,yidunAntiSpamExt:37,yidunAntiSpamRes:38,mentionRoleIds:41,accidsOfMentionedRoles:42,updateContent:39,updateOperatorInfo:40,subType:61,historyEnable:100,pushEnable:101,needBadge:102,needPushNick:103,notifyReason:104,routeEnable:105,isAntispam:106},sysMsg:{toType:1,serverId:2,channelId:3,toAccids:4,fromAccount:5,fromClientType:6,fromDeviceId:7,fromNick:8,time:9,updateTime:10,type:11,msgIdClient:12,msgIdServer:13,body:14,attach:15,ext:16,resendFlag:17,status:18,pushPayload:19,pushContent:20,env:21,callbackExt:22,persistEnable:100,pushEnable:101,needBadge:102,needPushNick:103,routeEnable:104},qchatMsgUpdateTag:{operatorAccount:1,operatorClientType:2,ps:3,ext:4,pushContent:5,pushPayload:6,env:7,routeEnable:100},markMsgReadTag:{serverId:1,channelId:2,time:3},qchatQuickCommentRequestTag:{serverId:1,channelId:2,fromAccount:3,msgIdServer:4,time:5,type:6,opeType:7,opeAccid:8},qchatQuickCommentQueryTag:{serverId:1,channelId:2,msgIdServerList:3},qchatGetLastMessageOfChannelsTag:{serverId:1,channelIdList:2},qchatMultiSyncServersMessageReadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},qchatMessageSearchByPageTag:{keyword:1,serverId:2,channelId:3,fromAccid:4,fromTime:5,toTime:6,msgTypes:7,subTypes:8,includeSelf:9,order:10,limit:11,sort:12,cursor:13},qchatPageQueryTag:{hasMore:1,nextTimetag:2,cursor:3},unreadInfo:Gh},Fa=Qc(js),xC={qchatSendMsg:{service:"qchatMsg",sid:24,cid:10,params:[{type:"Property",name:"qchatMsg",reflectMapper:js.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:Fa.qchatMsgTag}]},qchatOnMsg:{service:"qchatMsg",sid:24,cid:11,response:[{type:"Property",name:"qchatMsg",reflectMapper:Fa.qchatMsgTag}]},qchatOnRecvUnreadInfo:{service:"qchatMsg",sid:24,cid:12,response:[{type:"Property",name:"qchatMsg",reflectMapper:Fa.qchatMsgTag}]},qchatSendCustomSysMsg:{service:"qchatMsg",sid:24,cid:13,params:[{type:"Property",name:"sysMsg",reflectMapper:js.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:Fa.sysMsg}]},qchatOnSysMsg:{service:"qchatMsg",sid:24,cid:14,response:[{type:"Property",name:"sysMsg",reflectMapper:Fa.sysMsg}]},qchatGetHistoryMsg:{service:"qchatMsg",sid:24,cid:16,params:[{type:"Property",name:"getHistoryMsgTag",reflectMapper:js.getHistoryMsgTag}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:Fa.qchatMsgTag}]},qchatUpdateMessage:{service:"qchatMsg",sid:24,cid:25,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:js.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:js.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:Fa.qchatMsgTag}]},qchatRecvMessageUpdate:{service:"qchatMsg",sid:24,cid:26,response:[{type:"Property",name:"qchatMsgUpdateInfo",reflectMapper:Fa.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:Fa.qchatMsgTag}]},qchatMarkMessageRead:{sid:24,cid:17,service:"qchatMsg",params:[{type:"Property",name:"markMsgReadTag",reflectMapper:js.markMsgReadTag}],response:[{type:"Property",name:"unreadInfo",reflectMapper:Fa.unreadInfo}]},qchatMultiSyncMessageRead:{sid:24,cid:18,service:"qchatMsg",response:[{type:"Property",name:"unreadInfo",reflectMapper:Fa.unreadInfo}]},qchatUpdateSystemNotification:{service:"qchatMsg",sid:24,cid:22,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:js.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:js.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:Fa.sysMsg}]},qchatMultiSyncSystemNotificationUpdate:{service:"qchatMsg",sid:24,cid:23,response:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:Fa.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:Fa.sysMsg}]},qchatSyncSystemNotification:{service:"qchatMsg",sid:24,cid:24,response:[{type:"PropertyArray",name:"systemNotifications",reflectMapper:Fa.sysMsg}]},qchatMarkSysMsgRead:{service:"qchatMsg",sid:24,cid:28,params:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:js.sysMsg}]},qchatMessageSearchByPage:{service:"qchatMsg",sid:24,cid:94,params:[{type:"Property",name:"qchatMessageSearchByPageTag",reflectMapper:js.qchatMessageSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:Fa.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:Fa.qchatMsgTag}]},qchatGetMessageHistoryByIds:{service:"qchatMsg",sid:24,cid:100,params:[{type:"Property",name:"channelInfo",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"messageReferList",reflectMapper:{msgIdServer:1,time:2}}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:Fa.qchatMsgTag}]},qchatGetThreadMessages:{service:"qchatMsg",sid:24,cid:101,params:[{type:"Property",name:"qchatMsg",reflectMapper:js.qchatMsgTag},{type:"Property",name:"getThreadHistoryMsgTag",reflectMapper:js.getThreadHistoryMsgTag}],response:[{type:"Property",name:"thread",reflectMapper:Fa.qchatMsgTag},{type:"Property",name:"threadInfo",reflectMapper:{1:"messageCount",2:"lastMessageTimestamp"}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:Fa.qchatMsgTag}]},qchatUpdateQuickComment:{service:"qchatMsg",sid:24,cid:102,params:[{type:"Property",name:"tag",reflectMapper:js.qchatQuickCommentRequestTag}]},qchatGetQuickComments:{service:"qchatMsg",sid:24,cid:103,params:[{type:"Property",name:"tag",reflectMapper:js.qchatQuickCommentQueryTag}],response:[{type:"PropertyArray",name:"quickCommentResponse",reflectMapper:{1:"serverId",2:"channelId",3:"msgIdServer",4:"totalCount",5:"lastUpdateTime",6:"details"}}]},qchatGetThreadRootMessagesMeta:{service:"qchatMsg",sid:24,cid:108,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:{time:7,msgIdServer:14}}],response:[{type:"PropertyArray",name:"metas",reflectMapper:{1:"total",2:"timestamp",3:"msgIdServer",4:"msgTime"}}]},qchatGetLastMessageOfChannels:{service:"qchatMsg",sid:24,cid:121,params:[{type:"Property",name:"tag",reflectMapper:js.qchatGetLastMessageOfChannelsTag}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Fa.qchatMsgTag}]},qchatMultiSyncServersMessageRead:{service:"qchatMsg",sid:25,cid:6,response:[{type:"Property",name:"qchatMultiSyncServersMessageReadTag",reflectMapper:Fa.qchatMultiSyncServersMessageReadTag}]},qchatGetMentionedMeMessages:{service:"qchatMsg",sid:24,cid:127,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2,timestamp:3,limit:4}}],response:[{type:"Property",name:"page",reflectMapper:Fa.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:Fa.qchatMsgTag}]}};(function(pe){pe[pe.Android=1]="Android",pe[pe.iOS=2]="iOS",pe[pe.PC=4]="PC",pe[pe.WindowsPhone=8]="WindowsPhone",pe[pe.Web=16]="Web",pe[pe.Server=32]="Server",pe[pe.Mac=64]="Mac"})(Lc||(Lc={}));var ub=["image","audio","video","file"],Ef={time:{type:"number"},updateTime:{type:"number"},resendFlag:{type:"boolean"},persistEnable:{type:"boolean"},routeEnable:{type:"boolean"},pushEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},type:{type:"enum",values:ba},fromClientType:{type:"enum",values:Lc},status:{type:"number"},toAccids:{type:"object"},toType:{type:"number"},attach:{type:"object"},pushPayload:{type:"object"}};function iv(pe,Ie){var ze=Un({},pe),Oe=Un({type:Ie||ba.custom},Tu(Ef,ze));return Oe.serverId&&Oe.channelId&&Oe.toAccids?Oe.toType=al.channelAccids:Oe.serverId&&Oe.toAccids?Oe.toType=al.serverAccids:Oe.serverId&&Oe.channelId?Oe.toType=al.channel:Oe.serverId?Oe.toType=al.server:Oe.toAccids?Oe.toType=al.accids:Oe.toType=al.unknown,Oe}function db(pe){var Ie=If(pe,["msgIdServer","type"]);return Tu(Ef,Ie)}var pb=((ai={})[ba.channelUpdateWhiteBlackIdentify]=function(pe){return pe.notify=op(ns(pe.notify,da.qchatUpdateWhiteBlackRoleTag)),pe},ai[ba.channelUpdateWhiteBlackIdentifyUser]=function(pe){return pe.notify=function(ze){return Ua(tb,ze)}(ns(pe.notify,da.qchatUpdateWhiteBlackMembersTag)),pe},ai[ba.updateQuickComment]=function(pe){return pe.notify=function(ze){return Ua(EC,ze)}(ns(pe.notify,Fa.qchatQuickCommentRequestTag)),pe},ai[ba.channelCategoryCreate]=function(pe){return pe.categoryInfo=cp(ns(pe.categoryInfo,da.QChatChannelCategoryInfo)),pe},ai[ba.channelCategoryUpdate]=function(pe){return pe.categoryInfo=cp(ns(pe.categoryInfo,da.QChatChannelCategoryInfo)),pe},ai[ba.channelCategoryUpdateWhiteBlackIdentify]=function(pe){return pe.notify=op(ns(pe.notify,da.qchatUpdateChannelCategoryWhiteBlackRoleTag)),pe},ai[ba.channelCategoryUpdateWhiteBlackIdentifyUser]=function(pe){return pe.notify=op(ns(pe.notify,da.qchatUpdateChannelCategoryWhiteBlackMembersTag)),pe},ai[ba.serverIdentifyAdd]=function(pe){return pe.serverIdentifyInfo=Ls(ns(pe.serverIdentifyInfo,Aa.serverRole)),pe},ai[ba.serverIdentifyRemove]=function(pe){return pe.serverIdentifyInfo=Ls(ns(pe.serverIdentifyInfo,Aa.serverRole)),pe},ai[ba.serverIdentifyUpdate]=function(pe){return pe.serverIdentifyInfo=Ls(ns(pe.serverIdentifyInfo,Aa.serverRole)),pe},ai[ba.channelIdentifyUpdate]=function(pe){return pe.channelIdentifyInfo=Ls(ns(pe.channelIdentifyInfo,Aa.channelRole)),pe},ai[ba.userIdentifyUpdate]=function(pe){return pe.userIdentifyInfo=Ls(ns(pe.userIdentifyInfo,Aa.memberRole)),pe},ai[ba.myMemberInfoUpdated]=function(pe){var Ie,ze=ys(pe,"userInfo.name"),Oe=ys(pe,"userInfo.icon");return pe.updatedInfos=Ro(Ie=pe.reuseServers).call(Ie,function(Ne){var At={serverId:Ne.serverId};return(1&Ne.bits)==1&&typeof ze=="string"&&Un(At,{nickChanged:!0,nick:ze}),(2&Ne.bits)==2&&typeof Oe=="string"&&Un(At,{avatarChanged:!0,avatar:Oe}),At}),delete pe.userInfo,delete pe.reuseServers,pe},ai);function mp(pe,Ie){var ze=Ua(Ef,pe);if(!ze.attach)return ze;if(ze.attach.serverInfo&&(ze.attach.serverInfo=tp(ns(ze.attach.serverInfo,is.serverInfo))),ze.attach.channelInfo&&(ze.attach.channelInfo=ap(ns(ze.attach.channelInfo,da.channelInfo))),ze.attach.serverMember&&(ze.attach.serverMember=Cu(ns(ze.attach.serverMember,is.memberInfo))),pb[ze.attach.type]&&(ze.attach=pb[ze.attach.type](ze.attach)),ze.attach.updateAuths)try{ze.attach.updateAuths=Qi(JSON.parse(ze.attach.updateAuths))}catch(Oe){Ie.error("formatSystemNotification:JSON parse updateAuths error: ",Oe)}return ze.attach.type&&(ze.attach.rawType=ze.attach.type,ze.attach.type=ba[ze.attach.type]),ze}var Pf={type:{type:"enum",values:dp},fromClientType:{type:"enum",values:Lc},status:{type:"number"},resendFlag:{type:"boolean"},mentionAll:{type:"boolean"},notifyReason:{type:"enum",values:pp},pushEnable:{type:"boolean"},historyEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},routeEnable:{type:"boolean"},time:{type:"number"},updateTime:{type:"number"},mentionAccids:{type:"object"},mentionRoleIds:{type:"object"},accidsOfMentionedRoles:{type:"object"},attach:{type:"object"},pushPayload:{type:"object"},isAntispam:{type:"boolean"},antiSpamInfo:{useCustomContent:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBusinessId:{type:"string"},antiSpamUsingYidun:{type:"boolean"},yidunCallback:{type:"string"},yidunAntiCheating:{type:"object"},yidunAntiSpamExt:{type:"object"},yidunAntiSpamRes:{type:"string"}},replyRefer:{fromAccount:{type:"string",rawKey:"replyMsgFromAccount"},time:{type:"number",rawKey:"replyMsgTime"},msgIdServer:{type:"string",rawKey:"replyMsgIdServer"},msgIdClient:{type:"string",rawKey:"replyMsgIdClient"}},threadRefer:{fromAccount:{type:"string",rawKey:"threadMsgFromAccount"},time:{type:"number",rawKey:"threadMsgTime"},msgIdServer:{type:"string",rawKey:"threadMsgIdServer"},msgIdClient:{type:"string",rawKey:"threadMsgIdClient"}}};function cv(pe){pe.onSendBefore,pe.onUploadStart,pe.onUploadDone,pe.onUploadProgress;var Ie=eu(pe,["onSendBefore","onUploadStart","onUploadDone","onUploadProgress"]),ze=Tu(Pf,Ie);if(ze.msgIdClient=pe.resendFlag?pe.msgIdClient:fh(),!ze.msgIdClient)throw new ru("msgIdClient is required for resend a message","msgIdClient","required");return pe.replyMessage&&pe.replyMessage.msgIdServer&&(ze.replyMsgFromAccount=pe.replyMessage.fromAccount,ze.replyMsgTime=+pe.replyMessage.time,ze.replyMsgIdServer=pe.replyMessage.msgIdServer,ze.replyMsgIdClient=pe.replyMessage.msgIdClient,pe.replyMessage.threadRefer&&pe.replyMessage.threadRefer.msgIdServer?(ze.threadMsgFromAccount=pe.replyMessage.threadRefer.fromAccount,ze.threadMsgTime=+pe.replyMessage.threadRefer.time,ze.threadMsgIdServer=pe.replyMessage.threadRefer.msgIdServer,ze.threadMsgIdClient=pe.replyMessage.threadRefer.msgIdClient):(ze.threadMsgFromAccount=pe.replyMessage.fromAccount,ze.threadMsgTime=+pe.replyMessage.time,ze.threadMsgIdServer=pe.replyMessage.msgIdServer,ze.threadMsgIdClient=pe.replyMessage.msgIdClient),delete ze.replyMessage),ze}function fb(pe){return Ua({operatorClientType:{type:"enum",values:Lc},pushPayload:{type:"object"}},pe)}function Xs(pe,Ie,ze){var Oe,Ne;return Ie===void 0&&(Ie={}),Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return(nr=Ua(Pf,pe)).deliveryStatus=Ie.deliveryStatus?Ji[Ie.deliveryStatus]:Ji[Ji.success],Ie.time&&(nr.time=Ie.time),nr.updateContent&&(kt=Ua({status:{type:"number"}},kt=ns(kt=JSON.parse(nr.updateContent),Fa.qchatMsgTag)),nr.updateContent=kt),nr.updateOperatorInfo&&(dr=fb(ns(dr=JSON.parse(nr.updateOperatorInfo),Fa.qchatMsgUpdateTag)),nr.updateOperatorInfo=dr),((Oe=nr==null?void 0:nr.threadRefer)===null||Oe===void 0?void 0:Oe.fromAccount)===""&&delete nr.threadRefer,((Ne=nr==null?void 0:nr.replyRefer)===null||Ne===void 0?void 0:Ne.fromAccount)===""&&delete nr.replyRefer,nr.attach&&Ie.attachUrl&&(nr.attach.url=Ie.attachUrl),Ar.next=10,mb(nr,ze);case 10:return Ar.abrupt("return",Ar.sent);case 11:case"end":return Ar.stop()}},At)}))}function mb(pe,Ie){return Hr(this,void 0,void 0,wr.mark(function ze(){var Oe;return wr.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(Vi(ub).call(ub,pe.type)&&pe.attach&&pe.attach.url){At.next=2;break}return At.abrupt("return",pe);case 2:if(Ie&&Ie.cloudStorage&&typeof Ie.cloudStorage.getPrivateUrl=="function"&&typeof Ie.cloudStorage.getOriginUrl=="function"){At.next=4;break}return At.abrupt("return",pe);case 4:if(!(Ba(Oe=pe.attach.url).call(Oe,"_im_url=1")<0)){At.next=7;break}return pe.attach.url=Ie.cloudStorage.getPrivateUrl(pe.attach.url),At.abrupt("return",pe);case 7:return At.prev=7,At.next=10,Ie.cloudStorage.getOriginUrl(pe.attach.url);case 10:pe.attach.url=At.sent,At.next=16;break;case 13:throw At.prev=13,At.t0=At.catch(7),new ru('url "'+pe.attach.url+'" parse error',"message.attach.url","parse error");case 16:return At.abrupt("return",pe);case 17:case"end":return At.stop()}},ze,null,[[7,13]])}))}function lv(pe,Ie,ze){return Ie===void 0&&(Ie={}),Hr(this,void 0,void 0,wr.mark(function Oe(){var Ne;return wr.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:if(Es(pe)&&pe.length>0){nr.next=2;break}return nr.abrupt("return",[]);case 2:return Ne=Ro(pe).call(pe,function(kt){return Xs(kt,Ie,ze)}),nr.next=5,_o.all(Ne);case 5:return nr.abrupt("return",nr.sent);case 6:case"end":return nr.stop()}},Oe)}))}var _C={totalCount:{type:"number"},lastUpdateTime:{type:"number"},details:{type:"object"}};function IC(pe){var Ie=Ro(pe).call(pe,function(Oe){var Ne,At=Ua(_C,Oe);return At.details=Ro(Ne=At.details).call(Ne,function(nr){return{count:nr.count,hasSelf:nr.self,severalAccids:nr.topN,type:nr.type}}),At}),ze={};return Qn(Ie).call(Ie,function(Oe){return ze[Oe.msgIdServer]=Oe}),ze}var EC={type:{type:"number"},time:{type:"number"},opeType:{type:"number"}},gb={includeSelf:{type:"number"},order:{type:"enum",values:tl},sort:{type:"enum",values:wf},msgTypes:{type:"object"},subTypes:{type:"object"}},PC={hasMore:{type:"boolean"},nextTimetag:{type:"number"},cursor:{type:"string"}},AC={6:function(Ie){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInServerId(Ie.serverId),!0},16:function(Ie){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInChannel(Ie.serverId,Ie.channelId),!0},26:function(Ie){var ze=ys(Ie,"attach.addAccids");return ze&&Vi(ze).call(ze,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",Ie),!0},27:function(Ie){var ze=ys(Ie,"attach.deleteAccids");return ze&&Vi(ze).call(ze,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",Ie),!0},31:function(Ie){return Ie.attach.event===2&&(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",Ie),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",Ie)),!0},32:function(Ie){return Ie.attach.event===2?(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",Ie),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",Ie)):Ie.attach.event===1&&this.core.qchatChannel.subscribeForVisitorService.deleteServer(Ie.serverId),!0},34:function(Ie){return Ie.attach.event===2&&this.core.qchatChannel.subscribeForVisitorService.unSubscribeChannel(Ie.serverId,Ie.channelId),!0},101:function(Ie){var ze=If(Ie,["serverId","channelId","ext","fromAccount","fromNick","time"]);return this.logger.log("qchat on recvTypingEvent: ",ze),this.core.emit("recvTypingEvent",ze),!1}},NC=function(){function pe(ze){this.core=ze,this.logger=ze.logger}var Ie=pe.prototype;return Ie.sendSystemNotification=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return dr.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:iv(Oe)});case 2:return At=dr.sent,nr=mp(At.content.sysMsg,this.logger),this.core.options.debugLevel==="debug"?this.logger.debug("sendCustomSysMsg success",nr):this.logger.log("sendCustomSysMsg success",nr.serverId,nr.channelId,nr.msgIdServer),dr.abrupt("return",nr);case 6:case"end":return dr.stop()}},Ne,this)}))},Ie.updateSystemNotification=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return At=Oe.systemNotification,nr=eu(Oe,["systemNotification"]),kt=If(At,["msgIdServer","type","body","ext","status"]),dr=iv(kt),Rr.next=5,this.core.sendCmd("qchatUpdateSystemNotification",{sysMsg:dr,qchatMsgUpdateTag:Un(Un({},nr),{operatorAccount:this.core.account,operatorClientType:Lc.Web,pushPayload:Ao(Oe.pushPayload),routeEnable:Qh.boolean(Oe,"routeEnable")})});case 5:return gr=Rr.sent,Rr.abrupt("return",mp(gr.content.sysMsg,this.logger));case 7:case"end":return Rr.stop()}},Ne,this)}))},Ie.markSystemNotificationsRead=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.core.sendCmd("qchatMarkSysMsgRead",{sysMsgs:Ro(At=Oe.systemNotifications).call(At,function(dr){return db(dr)})});case 2:case"end":return kt.stop()}},Ne,this)}))},Ie.onSysMsg=function(Oe){var Ne=Oe.content.sysMsg;if(Ne){var At=mp(Ne,this.core.logger),nr=AC[ba[At.type]];if(nr&&nr.call(this,At)===!1)return;var kt={feature:"default",systemNotifications:[At]};this.logger.log("qchat on systemNotification: ",kt),this.core.emit("systemNotification",kt)}else this.core.logger.warn("No sysMsg in onSysMsg packet")},Ie.onMultiSysMsg=function(Oe){var Ne=Oe.content.sysMsg;if(Ne){var At=mp(Ne,this.logger);this.core.emit("systemNotificationUpdate",At)}},Ie.onSyncSysMsg=function(Oe){var Ne=this,At=Oe.content.systemNotifications;if(At&&At.length>0){var nr=Ro(At).call(At,function(kt){return mp(kt,Ne.logger)});this.core.emit("systemNotification",{feature:"sync",systemNotifications:nr})}else this.logger.warn("sync system notification not exist")},pe}(),uv=["image","audio","video","file"],OC=function(){function pe(ze){var Oe=this;this.markMessageRead=ov(function(Ne){return Hr(Oe,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,this.core.sendCmd("qchatMarkMessageRead",{markMsgReadTag:Ne});case 2:nr=gr.sent,kt=Yh(nr.content.unreadInfo),this.core.eventBus.emit("qchatChannel/updateUnreads",[kt]);case 5:case"end":return gr.stop()}},At,this)}))},200),this.core=ze,this.logger=ze.logger}var Ie=pe.prototype;return Ie.sendMessage=function(Oe){var Ne,At,nr,kt;return Hr(this,void 0,void 0,wr.mark(function dr(){var gr,Ar,Rr,Ur,Dr,Jr;return wr.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(!(Ba(uv).call(uv,Oe.type)>-1)){Tn.next=4;break}return Tn.next=3,this.doSendFile(Oe);case 3:Oe.attach=Tn.sent;case 4:return gr=cv(Un({fromAccount:this.core.account},Oe)),Tn.next=7,Xs(gr,{time:new Date().getTime(),deliveryStatus:Ji.sending},this.core);case 7:Ar=Tn.sent;try{Oe.onSendBefore&&Oe.onSendBefore(Ar)}catch(jn){this.logger.error("sendMsg: options.onSendBefore error",jn)}return Tn.prev=9,Tn.next=12,this.core.sendCmd("qchatSendMsg",{qchatMsg:gr});case 12:Rr=Tn.sent,Tn.next=22;break;case 15:return Tn.prev=15,Tn.t0=Tn.catch(9),Tn.next=19,Xs(gr,{time:new Date().getTime(),deliveryStatus:Ji.failed,attachUrl:(Ne=Ar.attach)===null||Ne===void 0?void 0:Ne.url},this.core);case 19:throw Ur=Tn.sent,Tn.t0.msg=Ur,Tn.t0;case 22:return Dr=Rr.content,Tn.next=25,Xs(Un({},Dr.qchatMsg),{deliveryStatus:Ji.success,attachUrl:(At=Ar.attach)===null||At===void 0?void 0:At.url},this.core);case 25:if(!(Jr=Tn.sent).isAntispam){Tn.next=29;break}throw{code:10403,msg:Jr,message:((nr=Jr==null?void 0:Jr.antiSpamInfo)===null||nr===void 0?void 0:nr.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((kt=Jr==null?void 0:Jr.antiSpamInfo)===null||kt===void 0?void 0:kt.yidunAntiSpamRes)||""};case 29:return Tn.abrupt("return",Jr);case 30:case"end":return Tn.stop()}},dr,this,[[9,15]])}))},Ie.doSendFile=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At;return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(On({type:{type:"enum",values:["image","audio","video","file"]},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},Oe),At=Oe.attach){kt.next=23;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){kt.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return kt.prev=5,kt.next=8,this.core.cloudStorage.uploadFile(Oe);case 8:At=kt.sent,kt.next=15;break;case 11:throw kt.prev=11,kt.t0=kt.catch(5),this.logger.error("sendFile:: upload File error or abort",kt.t0),kt.t0;case 15:kt.prev=15,Oe.onUploadDone&&Oe.onUploadDone(At),kt.next=23;break;case 19:throw kt.prev=19,kt.t1=kt.catch(15),this.logger.error("sendFile options.onUploadDone err",kt.t1),kt.t1;case 23:return kt.abrupt("return",At);case 24:case"end":return kt.stop()}},Ne,this,[[5,11],[15,19]])}))},Ie.resendMessage=function(Oe){var Ne,At;return Hr(this,void 0,void 0,wr.mark(function nr(){var kt,dr,gr,Ar,Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return(kt=cv(Un(Un({},Oe),{resendFlag:!0}))).deliveryStatus=Ji.sending,Dr.prev=2,Dr.next=5,this.core.sendCmd("qchatSendMsg",{qchatMsg:kt});case 5:dr=Dr.sent,Dr.next=15;break;case 8:return Dr.prev=8,Dr.t0=Dr.catch(2),Dr.next=12,Xs(kt,{time:new Date().getTime(),deliveryStatus:Ji.failed},this.core);case 12:throw gr=Dr.sent,Dr.t0.msg=gr,Dr.t0;case 15:return Ar=dr.content,Dr.next=18,Xs(Un({},Ar.qchatMsg),{deliveryStatus:Ji.success},this.core);case 18:if(!(Rr=Dr.sent).isAntispam){Dr.next=22;break}throw{code:10403,msg:Rr,message:((Ne=Rr==null?void 0:Rr.antiSpamInfo)===null||Ne===void 0?void 0:Ne.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((At=Rr==null?void 0:Rr.antiSpamInfo)===null||At===void 0?void 0:At.yidunAntiSpamRes)||""};case 22:return Dr.abrupt("return",Rr);case 23:case"end":return Dr.stop()}},nr,this,[[2,8]])}))},Ie.doUpdateMessage=function(Oe){var Ne,At;return Hr(this,void 0,void 0,wr.mark(function nr(){var kt,dr,gr,Ar,Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return kt=Oe.message,dr=eu(Oe,["message"]),(gr=cv(kt)).msgIdClient=void 0,gr.time=kt.time,Dr.next=6,this.core.sendCmd("qchatUpdateMessage",{qchatMsg:gr,qchatMsgUpdateTag:Un(Un({},dr),{operatorAccount:this.core.account,operatorClientType:Lc.Web,pushPayload:Ao(Oe.pushPayload),routeEnable:Qh.boolean(Oe,"routeEnable")})});case 6:return Ar=Dr.sent,Dr.next=9,Xs(Ar.content.qchatMsg,{},this.core);case 9:if(Rr=Dr.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Rr,!0),!Ar.content.qchatMsg.isAntispam){Dr.next=14;break}throw{code:10403,msg:gr,message:((Ne=Ar.content.qchatMsg)===null||Ne===void 0?void 0:Ne.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((At=Ar.content.qchatMsg)===null||At===void 0?void 0:At.yidunAntiSpamRes)||""};case 14:return Dr.abrupt("return",Rr);case 15:case"end":return Dr.stop()}},nr,this)}))},Ie.getHistoryMessage=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr=this;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Ar.next=2,this.core.sendCmd("qchatGetHistoryMsg",{getHistoryMsgTag:Un(Un({},Oe),{reverse:Yl(Oe)?1:0})});case 2:return nr=Ar.sent,kt=nr.content,Ar.next=6,_o.all(Ro(At=kt.qchatMsgs).call(At,function(Rr){return Xs(Rr,{},dr.core)}));case 6:return Ar.abrupt("return",Ar.sent);case 7:case"end":return Ar.stop()}},Ne,this)}))},Ie.getMentionedMeMessages=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr,Ar=this;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Ur.next=2,this.core.sendCmd("qchatGetMentionedMeMessages",{tag:Oe});case 2:return nr=Ur.sent,kt=nr.content,Dr=kt.page,dr=Ua(PC,Dr),Ur.next=7,_o.all(Ro(At=kt.datas).call(At,function(Jr){return Xs(Jr,{},Ar.core)}));case 7:return gr=Ur.sent,Ur.abrupt("return",{pageInfo:dr,messages:gr});case 9:case"end":return Ur.stop()}var Dr},Ne,this)}))},Ie.areMentionedMeMessages=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:At={},nr=0;case 2:if(!(nr<Oe.length)){gr.next=13;break}if((kt=Oe[nr]).fromAccount!==this.core.account){gr.next=7;break}return At[kt.msgIdClient]=!1,gr.abrupt("continue",10);case 7:return gr.next=9,this.core.qchatChannel.subscribeModuleService.getMentionedFlag(kt,!0);case 9:At[kt.msgIdClient]=gr.sent;case 10:nr++,gr.next=2;break;case 13:return gr.abrupt("return",At);case 14:case"end":return gr.stop()}},Ne,this)}))},Ie.getLastMessageOfChannels=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,this.core.sendCmd("qchatGetLastMessageOfChannels",{tag:Oe});case 2:return At=gr.sent,nr=At.content.msgs,gr.next=6,lv(nr,{},this.core);case 6:return kt=gr.sent,gr.abrupt("return",Kc(kt).call(kt,function(Ar,Rr){return Ar[Rr.channelId]=Rr,Ar},{}));case 8:case"end":return gr.stop()}},Ne,this)}))},Ie.messageSearchByPage=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Rr.next=2,this.core.sendCmd("qchatMessageSearchByPage",{qchatMessageSearchByPageTag:Un(Un({},(Ur=Oe,Tu(gb,Ur))),{includeSelf:Oe.includeSelf?1:""})});case 2:return At=Rr.sent,nr=At.content,kt=nr.datas,dr=nr.listQueryTag,Rr.next=6,lv(kt,{},this.core);case 6:return gr=Rr.sent,Rr.abrupt("return",{listQueryTag:{hasMore:+dr.hasMore==1,nextTimetag:dr.nextTimetag?na(dr.nextTimetag):0,cursor:dr.cursor},datas:gr});case 8:case"end":return Rr.stop()}var Ur},Ne,this)}))},Ie.onMsg=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(At=Oe.content.qchatMsg){dr.next=4;break}return this.logger.warn("No qchatMsg in qchatMsg packet"),dr.abrupt("return");case 4:return dr.next=6,Xs(At,{},this.core);case 6:nr=dr.sent,this.core.eventBus.emit("qchatChannel/changeUnread",nr,!1),this.core.emit("message",nr);case 9:case"end":return dr.stop()}},Ne,this)}))},Ie.onRecvUnreadInfo=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(At=Oe.content.qchatMsg){dr.next=3;break}return dr.abrupt("return");case 3:return dr.next=5,Xs(At);case 5:nr=dr.sent,this.core.eventBus.emit("qchatChannel/changeUnread",nr,!1);case 7:case"end":return dr.stop()}},Ne,this)}))},Ie.onMultiSyncRead=function(Oe){var Ne=Oe.content.unreadInfo;if(Ne){var At=Yh(Ne);this.core.eventBus.emit("qchatChannel/updateUnreads",[At])}},Ie.onMultiSyncServersRead=function(Oe){var Ne=Oe.content.qchatMultiSyncServersMessageReadTag;if(Ne){var At=Hl(Ne),nr=At.successServerIds,kt=At.ackTimestamp;this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",nr,kt)}},Ie.onRecvMsgUpdate=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:if(At=Oe.content.qchatMsg,nr=Oe.content.qchatMsgUpdateInfo,At){Ar.next=4;break}return Ar.abrupt("return");case 4:return Ar.next=6,Xs(At,{},this.core);case 6:kt=Ar.sent,dr=fb(nr),this.core.eventBus.emit("qchatChannel/changeUnread",kt,!0),this.core.emit("messageUpdate",kt,dr);case 10:case"end":return Ar.stop()}},Ne,this)}))},pe}(),RC=function(){function pe(ze){var Oe=this;this._sendTypingEvent=ov(function(Ne){return Hr(Oe,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:iv(Un(Un({},Ne),{resendFlag:!1,persistEnable:!1,routeEnable:!1,pushEnable:!1,needBadge:!1,needPushNick:!1}),ba.msgTyping)});case 2:case"end":return kt.stop()}},At,this)}))},3e3),this.core=ze,this.logger=ze.logger,this.lastChannelIdInTyping=""}var Ie=pe.prototype;return Ie.getMessageHistoryByIds=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return dr.next=2,this.core.sendCmd("qchatGetMessageHistoryByIds",{channelInfo:{serverId:Oe.serverId,channelId:Oe.channelId},messageReferList:Oe.messageReferList});case 2:return nr=dr.sent,dr.abrupt("return",_o.all(Ro(At=nr.content.qchatMsgs).call(At,function(gr){return Xs(gr)})));case 4:case"end":return dr.stop()}},Ne,this)}))},Ie.getReferMessages=function(Oe){var Ne,At;return Hr(this,void 0,void 0,wr.mark(function nr(){var kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(!((Ne=Oe.message.replyRefer)===null||Ne===void 0)&&Ne.msgIdServer&&(!((At=Oe.message.threadRefer)===null||At===void 0)&&At.msgIdServer)){gr.next=2;break}throw new Error("Message has no reply");case 2:return gr.next=4,this.getMessageHistoryByIds({serverId:Oe.message.serverId,channelId:Oe.message.channelId,messageReferList:[Oe.message.replyRefer,Oe.message.threadRefer]});case 4:if(kt=gr.sent,Oe.referType!==Fc[Fc.all]){gr.next=9;break}return gr.abrupt("return",{replyMessage:kt[0],threadMessage:kt[1]});case 9:if(Oe.referType!==Fc[Fc.reply]){gr.next=13;break}return gr.abrupt("return",{replyMessage:kt[0]});case 13:if(Oe.referType!==Fc[Fc.thread]){gr.next=15;break}return gr.abrupt("return",{threadMessage:kt[1]});case 15:return gr.abrupt("return",{replyMessage:kt[0],threadMessage:kt[1]});case 16:case"end":return gr.stop()}},nr,this)}))},Ie.getThreadMessages=function(Oe){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr,Ar;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return kt=!((Ne=Oe.message.threadRefer)===null||Ne===void 0)&&Ne.msgIdServer?Un({serverId:Oe.message.serverId,channelId:Oe.message.channelId},Oe.message.threadRefer):Oe.message,Ur.next=3,this.core.sendCmd("qchatGetThreadMessages",{qchatMsg:kt,getThreadHistoryMsgTag:Un(Un({},Oe.messageQueryOption),{reverse:Qh.boolean(Oe.messageQueryOption,"reverse")})});case 3:return dr=Ur.sent,Ur.next=6,Xs(dr.content.thread);case 6:return gr=Ur.sent,Ur.next=9,_o.all(Ro(nr=dr.content.qchatMsgs).call(nr,function(Dr){return Xs(Dr)}));case 9:return Ar=Ur.sent,Ur.abrupt("return",{thread:gr,threadInfo:{messageCount:+dr.content.threadInfo.messageCount,lastMessageTimestamp:+dr.content.threadInfo.lastMessageTimestamp},messages:Ar});case 11:case"end":return Ur.stop()}},At,this)}))},Ie.getThreadRootMessagesMeta=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return At=Oe.threadRootMessages,nr=eu(Oe,["threadRootMessages"]),Ar.next=3,this.core.sendCmd("qchatGetThreadRootMessagesMeta",{qchatMsgs:At,tag:nr});case 3:if(kt=Ar.sent,!((dr=kt.content.metas)&&dr.length>0)){Ar.next=7;break}return Ar.abrupt("return",Ro(dr).call(dr,function(Rr){return Un(Un({},Rr),{total:na(Rr.total),timestamp:na(Rr.timestamp),msgTime:na(Rr.msgTime)})}));case 7:return Ar.abrupt("return",[]);case 8:case"end":return Ar.stop()}},Ne,this)}))},Ie.getQuickComments=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){var At,nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,this.core.sendCmd("qchatGetQuickComments",{tag:{serverId:Oe.serverId,channelId:Oe.channelId,msgIdServerList:Ao(Ro(At=Oe.msgList).call(At,function(Ar){return Ar.msgIdServer}))}});case 2:return nr=gr.sent,kt=nr.content.quickCommentResponse,gr.abrupt("return",IC(kt));case 5:case"end":return gr.stop()}},Ne,this)}))},Ie.updateQuickComment=function(Oe,Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr,Ar,Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return On({type:{type:"number"},commentMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},Oe),nr=Oe.commentMessage,kt=nr.serverId,dr=nr.channelId,gr=nr.fromAccount,Ar=nr.msgIdServer,Rr=nr.time,Dr.next=4,this.core.sendCmd("qchatUpdateQuickComment",{tag:{serverId:kt,channelId:dr,fromAccount:gr,msgIdServer:Ar,time:Rr,type:Oe.type,opeType:Ne,opeAccid:this.core.account}});case 4:case"end":return Dr.stop()}},At,this)}))},Ie.sendTypingEvent=function(Oe){return Hr(this,void 0,void 0,wr.mark(function Ne(){return wr.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:if(Oe.channelId!==this.lastChannelIdInTyping){nr.next=4;break}return this.logger.log("qchatMsg sendTypingEvent throttle"),this._sendTypingEvent(Oe),nr.abrupt("return");case 4:this.lastChannelIdInTyping=Oe.channelId,this._sendTypingEvent.flush(),this._sendTypingEvent(Oe);case 7:case"end":return nr.stop()}},Ne,this)}))},pe}(),hb=function(pe){function Ie(Oe){var Ne;return(Ne=pe.call(this,"qchatMsg",Oe)||this).core=Oe,Ne.lastChannelIdInMark="",oc({cmdMap:sv,cmdConfig:xC}),Ne.notificationModuleService=new NC(Oe),Ne.messageModuleService=new OC(Oe),Ne.extendModuleService=new RC(Oe),Ne}ea(Ie,pe);var ze=Ie.prototype;return ze.sendMessage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(dp)},ext:{type:"string",required:!1},mentionAll:{type:"boolean",required:!1},mentionAccids:{type:"array",itemType:"string",required:!1},mentionRoleIds:{type:"array",itemType:"string",required:!1,min:1},historyEnable:{type:"boolean",required:!1},pushEnable:{type:"boolean",required:!1}},Ne),kt.next=3,this.messageModuleService.sendMessage(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.updateMessage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(On({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0},body:{type:"string",required:!1},ext:{type:"string",required:!1}}}},Ne),!(typeof Ne.message.status=="number"&&Ne.message.status<1e4)){kt.next=3;break}throw new Bo("Status should be greater than or equal to 10000");case 3:return kt.next=5,this.messageModuleService.doUpdateMessage(Ne);case 5:return kt.abrupt("return",kt.sent);case 6:case"end":return kt.stop()}},At,this)}))},ze.resendMessage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdClient:{type:"string",allowEmpty:!1}},Ne),kt.next=3,this.messageModuleService.resendMessage(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.deleteMessage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},Ne),(nr=JSON.parse(Ao(Ne))).message.status=2,dr.next=5,this.messageModuleService.doUpdateMessage(nr);case 5:return dr.abrupt("return",dr.sent);case 6:case"end":return dr.stop()}},At,this)}))},ze.revokeMessage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},Ne),(nr=JSON.parse(Ao(Ne))).message=If(nr.message,["serverId","channelId","msgIdServer","time"]),nr.message.status=1,dr.next=6,this.messageModuleService.doUpdateMessage(nr);case 6:return dr.abrupt("return",dr.sent);case 7:case"end":return dr.stop()}},At,this)}))},ze.markMessageRead=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:On({serverId:{type:"string"},channelId:{type:"string"},time:{type:"number",min:0}},Ne),Ne.channelId!==this.lastChannelIdInMark&&this.messageModuleService.markMessageRead.flush(),this.lastChannelIdInMark=Ne.channelId,this.messageModuleService.markMessageRead(Ne);case 4:case"end":return kt.stop()}},At,this)}))},ze.replyMessage=function(Ne){On({replyMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},Ne);var At=Ne.replyMessage;if(Ne.serverId!==At.serverId||Ne.channelId!==At.channelId)throw new Bo("Forbid replying to message from other server, channel");return this.sendMessage(Ne)},ze.getMessageHistoryByIds=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},messageReferList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ne),kt.next=3,this.extendModuleService.getMessageHistoryByIds(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.getReferMessages=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},referType:{type:"enum",values:Ea(Fc),required:!1}},Ne),kt.next=3,this.extendModuleService.getReferMessages(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.getThreadMessages=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},messageQueryOption:{type:"object",rules:{beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},excludeMsgId:{type:"string",required:!1},limit:{type:"number",required:!1},reverse:{type:"boolean",required:!1}}}},Ne),kt.next=3,this.extendModuleService.getThreadMessages(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.getThreadRootMessagesMeta=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},threadRootMessages:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ne),kt.next=3,this.extendModuleService.getThreadRootMessagesMeta(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.sendSystemNotification=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},attach:{type:"object",required:!1}},Ne),kt.next=3,this.notificationModuleService.sendSystemNotification(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.updateSystemNotification=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({systemNotification:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ea(ba)},body:{type:"string",required:!1},ext:{type:"string",required:!1},status:{type:"number",required:!1}}}},Ne),kt.next=3,this.notificationModuleService.updateSystemNotification(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.markSystemNotificationsRead=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({systemNotifications:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1}},min:1}},Ne),kt.next=3,this.notificationModuleService.markSystemNotificationsRead(Ne);case 3:case"end":return kt.stop()}},At,this)}))},ze.getHistoryMessage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},beginTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},excludeMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},Ne),kt.next=3,this.messageModuleService.getHistoryMessage(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.getMentionedMeMessages=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Ne),kt.next=3,this.messageModuleService.getMentionedMeMessages(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.areMentionedMeMessages=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(On({messages:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1}},min:1}},Ne),ou(nr=Ne.messages).call(nr,function(gr){return Ne.messages[0].serverId===gr.serverId})){dr.next=4;break}throw new Bo("Different serverId",Ne,10414);case 4:if(!this.core.qchatChannel.subscribeForVisitorService.isInAutoServers(Ne.messages[0].serverId)){dr.next=7;break}throw new Bo("Not allowed for visitor",Ne,10403);case 7:return dr.next=9,this.messageModuleService.areMentionedMeMessages(Ne.messages);case 9:return dr.abrupt("return",dr.sent);case 10:case"end":return dr.stop()}},At,this)}))},ze.addQuickComment=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.extendModuleService.updateQuickComment(Ne,1);case 2:case"end":return kt.stop()}},At,this)}))},ze.removeQuickComment=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.extendModuleService.updateQuickComment(Ne,2);case 2:case"end":return kt.stop()}},At,this)}))},ze.getQuickComments=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1}},min:1}},Ne),kt.next=3,this.extendModuleService.getQuickComments(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.sendTypingEvent=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ne),kt.next=3,this.extendModuleService.sendTypingEvent(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.getLastMessageOfChannels=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelIdList:{type:"array",itemType:"string"}},Ne),kt.next=3,this.messageModuleService.getLastMessageOfChannels(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.qchatOnMsgHandler=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:this.messageModuleService.onMsg(Ne);case 1:case"end":return kt.stop()}},At,this)}))},ze.qchatOnRecvUnreadInfoHandler=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:this.messageModuleService.onRecvUnreadInfo(Ne);case 1:case"end":return kt.stop()}},At,this)}))},ze.qchatOnSysMsgHandler=function(Ne){this.notificationModuleService.onSysMsg(Ne)},ze.qchatMultiSyncMessageReadHandler=function(Ne){this.messageModuleService.onMultiSyncRead(Ne)},ze.qchatMultiSyncSystemNotificationUpdateHandler=function(Ne){this.notificationModuleService.onMultiSysMsg(Ne)},ze.qchatSyncSystemNotificationHandler=function(Ne){this.notificationModuleService.onSyncSysMsg(Ne)},ze.qchatRecvMessageUpdateHandler=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:this.messageModuleService.onRecvMsgUpdate(Ne);case 1:case"end":return kt.stop()}},At,this)}))},ze.searchMsgByPage=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({keyword:{type:"string",allowEmpty:!1,required:!1},serverId:{type:"string",allowEmpty:!1,required:!0},channelId:{type:"string",allowEmpty:!1,required:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},fromTime:{type:"number",allowEmpty:!1,required:!1},toTime:{type:"number",allowEmpty:!1,required:!1},msgTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!0},subTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!1},includeSelf:{type:"boolean",allowEmpty:!1,required:!1},order:{type:"enum",values:Ea(tl),required:!1},limit:{type:"number",min:0,required:!1},sort:{type:"enum",values:Ea(wf),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),kt.next=3,this.messageModuleService.messageSearchByPage(Ne);case 3:return kt.abrupt("return",kt.sent);case 4:case"end":return kt.stop()}},At,this)}))},ze.qchatMultiSyncServersMessageReadHandler=function(Ne){this.messageModuleService.onMultiSyncServersRead(Ne)},Ie}(ql);function dv(pe,Ie){Ie===void 0&&(Ie=1);var ze=Ua({clientPort:{type:"number"},clientType:{type:"enum",values:Lc},customClientType:{type:"number"},loginTime:{type:"number"},hasTokenPreviously:{type:"boolean"},pushType:{type:"number"}},pe);return Un(Un({},ze),{account:ze.account,connectionId:ze.connectionId,deviceId:ze.deviceId,ip:ze.ip,mac:ze.ip,os:ze.os,clientType:ze.clientType,time:ze.time,online:Ie!==2})}var vb={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},pv,Zs,qa={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},BC=function(pe){function Ie(Oe){var Ne;return(Ne=pe.call(this,"qchatAuth",Oe)||this).syncTimeTag=0,Ne}ea(Ie,pe);var ze=Ie.prototype;return ze.doLogin=function(Ne){var At;return Ne===void 0&&(Ne=!1),Hr(this,void 0,void 0,wr.mark(function nr(){var kt,dr,gr,Ar,Rr,Ur,Dr;return wr.wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:return kt=this.core.options,dr=Ca.getSystemInfo(),gr=Un(Un({},kt),{appLogin:Ne?0:1,clientType:16,clientSession:(At=this.core.socket)===null||At===void 0?void 0:At.sessionId,deviceId:this.core.config.deviceId,sdkVersion:91001,sdkType:qa[Ca.platform]||0,userAgent:"Native/0.13.1",sdkHumanVersion:"0.13.1",os:dr.os,browser:dr.browser}),kn.next=5,this.core.sendCmd("qchatLogin",{qchatLoginReqTag:gr});case 5:if(!(Ar=kn.sent).error){kn.next=8;break}throw Ar.error;case 8:return Rr=Ar.content,Ur=Rr.qchatLoginResTag,Dr=Rr.qchatMultiLoginResult,Ur.isAutoReconnect=Ne,kn.abrupt("return",{loginResult:dv(Ur),multiLoginResults:Ro(Dr).call(Dr,function(Tn){return dv(Tn)})});case 11:case"end":return kn.stop()}},nr,this)}))},ze.kick=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){var kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,this.core.sendCmd("qchatKick",Ne);case 2:return kt=gr.sent,gr.abrupt("return",(At=kt.content)===null||At===void 0?void 0:At.deviceIds);case 4:case"end":return gr.stop()}},nr,this)}))},ze.sync=function(){return Hr(this,void 0,void 0,wr.mark(function Ne(){return wr.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return nr.next=2,this.core.sendCmd("qchatSync",{qchatSyncTag:{systemNotification:this.syncTimeTag||0}});case 2:case"end":return nr.stop()}},Ne,this)}))},ze.qchatSyncHandler=function(Ne){var At,nr;this.logger.log("sync: emit syncdone",(At=Ne.content)===null||At===void 0?void 0:At.timetag),this.core.emit("syncdone"),this.syncTimeTag=((nr=Ne.content)===null||nr===void 0?void 0:nr.timetag)||0},ze.qchatMultiSpotLoginHandler=function(Ne){if(Ne.error)this.logger.error("qchatMultiPortLoginHandler:: error, ",Ne.error);else{var At=Ne.content,nr=dv(At.qchatLoginResTag,At.state);this.core.emit("multiSpotLogin",[nr])}},ze.qchatBeKickedHandler=function(Ne){if(Ne.error)this.logger.error("qchatBeKickedHandler error, ",Ne.error);else{var At=function(kt){var dr=Ua({clientType:{type:"enum",values:Lc},customClientType:{type:"number"}},kt),gr=vb[dr.reason];return Un(dr,gr=gr||{reason:"unknow",message:"Unknown reason"})}(Ne.content.beKickedTag);this.logger.warn("bekicked::",At),this.core.doDisconnect($s.KICKED,At)}},Ie}(ql);(function(pe){pe.UNKNOWN="UNKNOWN",pe.LOGIN_STATE_ERROR="LOGIN_STATE_ERROR",pe.CLOSE_BY_BACKEND="CLOSE_BY_BACKEND",pe.ALL_MEMBERS_OUT="ALL_MEMBERS_OUT",pe.END_OF_LIFE="END_OF_LIFE",pe.CLOSE_BY_MEMBER="CLOSE_BY_MEMBER",pe.KICK_OUT="KICK_OUT",pe.SYNC_DATA_ERROR="SYNC_DATA_ERROR",pe.LEAVE_BY_SELF="LEAVE_BY_SELF",pe.kICK_BY_SELF="kICK_BY_SELF"})(pv||(pv={})),function(pe){pe.offNotAllowSelfOn="offNotAllowSelfOn",pe.offAllowSelfOn="offAllowSelfOn",pe.disable="disable"}(Zs||(Zs={}));var sl={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},jc={limit:{type:"number"}};function Dc(pe){return Es(pe)&&pe.length>0?Ro(pe).call(pe,function(Ie){return function(Oe){return Ua(sl,Oe)}(Ie)}):[]}function FC(pe){try{pe.audio&&(pe.audio=JSON.parse(pe.audio))}catch{throw new Nl('result "audio" JSON parse error',{key:"audio"},"JSON parse error")}try{pe.video&&(pe.video=JSON.parse(pe.video))}catch{throw new Nl('result "video" JSON parse error',{key:"video"},"JSON parse error")}return Ua(jc,pe)}var gp={"25_1":"qchatGetNeroomToken","25_2":"qchatUpdateRTCChannelConfig","25_3":"qchatGetRTCChannelConfig","25_4":"qchatGetRTCChannelMembers"},hp={QChatRTCChannelConfigTag:{serverId:1,channelId:2,limit:3,audio:4,video:5},QChatRTCChannelConfigResultTag:{limit:1,audio:2,video:3},QChatGetRTCParams:{serverId:1,channelId:2},qchatGetRTCChannelMembersTag:{serverId:1,channelId:2},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},QChatGetNeroomTokenResultTag:{token:1,expire:2},QChatGetNeroomTokenParams:{neroomDeviceId:1}},Af=Qc(hp),vp={qchatGetNeroomToken:{sid:25,cid:1,service:"qchatMedia",params:[{type:"Property",name:"qchatGetNeroomTokenTag",reflectMapper:hp.QChatGetNeroomTokenParams}],response:[{type:"Property",name:"neroomToken",reflectMapper:Af.QChatGetNeroomTokenResultTag}]},qchatUpdateRTCChannelConfig:{sid:25,cid:2,service:"qchatMedia",params:[{type:"Property",name:"RTCChannelConfig",reflectMapper:hp.QChatRTCChannelConfigTag}]},qchatGetRTCChannelConfig:{sid:25,cid:3,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelConfigTag",reflectMapper:hp.QChatGetRTCParams}],response:[{type:"Property",name:"RTCChannelConfig",reflectMapper:Af.QChatRTCChannelConfigResultTag}]},qchatGetRTCChannelMembers:{sid:25,cid:4,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelMembersTag",reflectMapper:hp.QChatGetRTCParams}],response:[{type:"PropertyArray",name:"memberList",reflectMapper:Af.memberInfo}]}},$C=function(pe){function Ie(Oe){var Ne;return(Ne=pe.call(this,"qchatMedia",Oe)||this).tokenExpireTime=24e4,Ne.getTokenState=!1,Ne.core=Oe,oc({cmdMap:gp,cmdConfig:vp}),Ne.core.on("disconnect",function(){return Hr(k(Ne),void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(!this.roomContext){kt.next=3;break}return kt.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return kt.stop()}},At,this)}))}),Ne.core.on("kicked",function(){return Hr(k(Ne),void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(!this.roomContext){kt.next=3;break}return kt.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return kt.stop()}},At,this)}))}),Ne.core.eventBus.on("qchatMedia/serverOrChannelLeave",function(At){return Hr(k(Ne),void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(!(At.type===ba[ba.channelVisibilityUpdate]&&At.channelId===this.channelId||At.type===ba[ba.serverEnterLeave]&&At.serverId===this.serverId)){dr.next=4;break}if(!this.roomContext||!this.roomContext.roomUuid){dr.next=4;break}return dr.next=4,this.disconnectChannel();case 4:case"end":return dr.stop()}},nr,this)}))}),Ne.tokenExpireTime=24e4,Ne.channelId="",Ne.serverId="",Ne}ea(Ie,pe);var ze=Ie.prototype;return ze.setNeroom=function(Ne){this.neroom=new Ne},ze._checkPermission=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return dr.next=2,this.core.qchatRole.checkPermission(Ne);case 2:return nr=dr.sent,dr.abrupt("return",nr);case 4:case"end":return dr.stop()}},At,this)}))},ze._checkConnectState=function(){if(this.state!=="connect")throw new Bo("QChatMedia::you should connect first")},ze.kickMemberOut=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),dr.prev=2,dr.next=5,(At=this.roomContext)===null||At===void 0?void 0:At.kickMemberOut(Ne.accid);case 5:dr.next=11;break;case 7:throw dr.prev=7,dr.t0=dr.catch(2),this.logger.error("QChatMedia::kickMemberOut error params is "+Ao(Ne),dr.t0),new Bo("QChatMedia::kickMemberOut error",dr.t0);case 11:case"end":return dr.stop()}},nr,this,[[2,7]])}))},ze.disconnectChannel=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return this._checkConnectState(),this.logger.debug("QChatMedia::disconnect begin disconnect"),kt.prev=2,kt.next=5,(Ne=this.roomContext)===null||Ne===void 0?void 0:Ne.leaveRoom();case 5:kt.next=10;break;case 7:kt.prev=7,kt.t0=kt.catch(2),this.logger.error("QChatMedia::disconnect error",kt.t0);case 10:if(!this.authService){kt.next=13;break}return kt.next=13,this.authService.logout();case 13:this._setStateInit(),this.core.emit("qchatMediaDisconnect");case 15:case"end":return kt.stop()}},At,this,[[2,7]])}))},ze._setStateInit=function(){this.logger.debug("QChatMedia::disconnect end"),this.roomContext=void 0,this.rtcController=void 0,this.state="init",this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0),this.channelId="",this.serverId=""},ze.muteAudio=function(Ne){var At,nr,kt,dr,gr;return Hr(this,void 0,void 0,wr.mark(function Ar(){var Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),((At=this.roomContext)===null||At===void 0?void 0:At.localMember.uuid)!==Ne.accid){Dr.next=14;break}return Dr.prev=3,Dr.next=6,(nr=this.rtcController)===null||nr===void 0?void 0:nr.muteMyAudio();case 6:Dr.next=12;break;case 8:throw Dr.prev=8,Dr.t0=Dr.catch(3),this.logger.error("QChatMedia::muteAudio error",Dr.t0),new Bo("QChatMedia::muteAudio error",Dr.t0);case 12:case 25:Dr.next=31;break;case 14:if(Dr.prev=14,!(Rr=(kt=this.roomContext)===null||kt===void 0?void 0:kt.roomProperties.audioOff)||((dr=Rr.value)===null||dr===void 0?void 0:dr.split("_")[0])!==Zs.offNotAllowSelfOn){Dr.next=23;break}return Dr.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 19:if(Dr.sent){Dr.next=23;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),Dr.abrupt("return");case 23:return Dr.next=25,(gr=this.rtcController)===null||gr===void 0?void 0:gr.muteMemberAudio(Ne.accid);case 27:throw Dr.prev=27,Dr.t1=Dr.catch(14),this.logger.error("QChatMedia::muteAudio error params is "+Ao(Ne),Dr.t1),new Bo("QChatMedia::muteAudio error",Dr.t1);case 31:case"end":return Dr.stop()}},Ar,this,[[3,8],[14,27]])}))},ze.unMuteAudio=function(Ne){var At,nr,kt,dr,gr;return Hr(this,void 0,void 0,wr.mark(function Ar(){var Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),!(Rr=(At=this.roomContext)===null||At===void 0?void 0:At.roomProperties.audioOff)||((nr=Rr.value)===null||nr===void 0?void 0:nr.split("_")[0])!==Zs.offNotAllowSelfOn){Dr.next=10;break}return Dr.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 6:if(Dr.sent){Dr.next=10;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),Dr.abrupt("return");case 10:if(((kt=this.roomContext)===null||kt===void 0?void 0:kt.localMember.uuid)!==Ne.accid){Dr.next=22;break}return Dr.prev=11,Dr.next=14,(dr=this.rtcController)===null||dr===void 0?void 0:dr.unmuteMyAudio();case 14:Dr.next=20;break;case 16:throw Dr.prev=16,Dr.t0=Dr.catch(11),this.logger.error("QChatMedia::unMuteAudio error",Dr.t0),new Bo("QChatMedia::unMuteAudio error",Dr.t0);case 20:case 25:Dr.next=31;break;case 22:return Dr.prev=22,Dr.next=25,(gr=this.rtcController)===null||gr===void 0?void 0:gr.unmuteMemberAudio(Ne.accid);case 27:throw Dr.prev=27,Dr.t1=Dr.catch(22),this.logger.error("QChatMedia::unMuteAudio error params is "+Ao(Ne),Dr.t1),new Bo("QChatMedia::unMuteAudio error",Dr.t1);case 31:case"end":return Dr.stop()}},Ar,this,[[11,16],[22,27]])}))},ze.muteVideo=function(Ne){var At,nr,kt,dr,gr;return Hr(this,void 0,void 0,wr.mark(function Ar(){var Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),((At=this.roomContext)===null||At===void 0?void 0:At.localMember.uuid)!==Ne.accid){Dr.next=14;break}return Dr.prev=3,Dr.next=6,(nr=this.rtcController)===null||nr===void 0?void 0:nr.muteMyVideo();case 6:Dr.next=12;break;case 8:throw Dr.prev=8,Dr.t0=Dr.catch(3),this.logger.error("QChatMedia::muteVideo error",Dr.t0),new Bo("QChatMedia::muteVideo error",Dr.t0);case 12:case 25:Dr.next=31;break;case 14:if(Dr.prev=14,!(Rr=(kt=this.roomContext)===null||kt===void 0?void 0:kt.roomProperties.videoOff)||((dr=Rr.value)===null||dr===void 0?void 0:dr.split("_")[0])!==Zs.offNotAllowSelfOn){Dr.next=23;break}return Dr.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 19:if(Dr.sent){Dr.next=23;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),Dr.abrupt("return");case 23:return Dr.next=25,(gr=this.rtcController)===null||gr===void 0?void 0:gr.muteMemberVideo(Ne.accid);case 27:throw Dr.prev=27,Dr.t1=Dr.catch(14),this.logger.error("QChatMedia::muteVideo error params is "+Ao(Ne),Dr.t1),new Bo("QChatMedia::muteVideo error",Dr.t1);case 31:case"end":return Dr.stop()}},Ar,this,[[3,8],[14,27]])}))},ze.unMuteVideo=function(Ne){var At,nr,kt,dr,gr;return Hr(this,void 0,void 0,wr.mark(function Ar(){var Rr;return wr.wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),!(Rr=(At=this.roomContext)===null||At===void 0?void 0:At.roomProperties.videoOff)||((nr=Rr.value)===null||nr===void 0?void 0:nr.split("_")[0])!==Zs.offNotAllowSelfOn){Dr.next=10;break}return Dr.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 6:if(Dr.sent){Dr.next=10;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),Dr.abrupt("return");case 10:if(((kt=this.roomContext)===null||kt===void 0?void 0:kt.localMember.uuid)!==Ne.accid){Dr.next=22;break}return Dr.prev=11,Dr.next=14,(dr=this.rtcController)===null||dr===void 0?void 0:dr.unmuteMyVideo();case 14:Dr.next=20;break;case 16:throw Dr.prev=16,Dr.t0=Dr.catch(11),this.logger.error("QChatMedia::unMuteVideo error",Dr.t0),new Bo("QChatMedia::unMuteVideo error",Dr.t0);case 20:Dr.next=30;break;case 22:Dr.prev=22,(gr=this.rtcController)===null||gr===void 0||gr.unmuteMemberVideo(Ne.accid),Dr.next=30;break;case 26:throw Dr.prev=26,Dr.t1=Dr.catch(22),this.logger.error("QChatMedia::unMuteVideo error",Dr.t1),new Bo("QChatMedia::unMuteVideo error",Dr.t1);case 30:case"end":return Dr.stop()}},Ar,this,[[11,16],[22,26]])}))},ze.startScreenShare=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:this._checkConnectState(),kt.prev=1,(Ne=this.rtcController)===null||Ne===void 0||Ne.startScreenShare(),kt.next=9;break;case 5:throw kt.prev=5,kt.t0=kt.catch(1),this.logger.error("QChatMedia::startScreenShare error",kt.t0),new Bo("QChatMedia::startScreenShare error",kt.t0);case 9:case"end":return kt.stop()}},At,this,[[1,5]])}))},ze.stopScreenShare=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:this._checkConnectState(),kt.prev=1,(Ne=this.rtcController)===null||Ne===void 0||Ne.stopScreenShare(),kt.next=9;break;case 5:throw kt.prev=5,kt.t0=kt.catch(1),this.logger.error("QChatMedia::stopScreenShare error",kt.t0),new Bo("QChatMedia::stopScreenShare error",kt.t0);case 9:case"end":return kt.stop()}},At,this,[[1,5]])}))},ze.stopMemberScreenShare=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),dr.prev=2,(At=this.rtcController)===null||At===void 0||At.stopMemberScreenShare(Ne.accid),dr.next=10;break;case 6:throw dr.prev=6,dr.t0=dr.catch(2),this.logger.error("QChatMedia::stopMemberScreenShare error",dr.t0),new Bo("QChatMedia::stopMemberScreenShare error",dr.t0);case 10:case"end":return dr.stop()}},nr,this,[[2,6]])}))},ze.subscribeRemoteVideoStream=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},Ne),dr.prev=2,(At=this.rtcController)===null||At===void 0||At.subscribeRemoteVideoStream(Ne.accid,Ne.streamType),dr.next=10;break;case 6:throw dr.prev=6,dr.t0=dr.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoStream error",dr.t0),new Bo("QChatMedia::subscribeRemoteVideoStream error",dr.t0);case 10:case"end":return dr.stop()}},nr,this,[[2,6]])}))},ze.unSubscribeRemoteVideoStream=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},Ne),dr.prev=2,(At=this.rtcController)===null||At===void 0||At.unsubscribeRemoteVideoStream(Ne.accid,Ne.streamType),dr.next=10;break;case 6:throw dr.prev=6,dr.t0=dr.catch(2),this.logger.error("QChatMedia::unSubscribeRemoteVideoStream error",dr.t0),new Bo("QChatMedia::unSubscribeRemoteVideoStream error",dr.t0);case 10:case"end":return dr.stop()}},nr,this,[[2,6]])}))},ze.setupVideoCanvas=function(Ne){var At;if(this._checkConnectState(),((At=this.roomContext)===null||At===void 0?void 0:At.localMember.uuid)===Ne.accid)try{return this.rtcController.setupLocalVideoCanvas(Ne.videoView)}catch(nr){throw this.logger.error("QChatMedia::setupVideoCanvas error",nr),new Bo("QChatMedia::setupVideoCanvas error",nr)}else try{return this.rtcController.setupRemoteVideoCanvas(Ne.videoView,Ne.accid)}catch(nr){throw this.logger.error("QChatMedia::setupVideoCanvas error",nr),new Bo("QChatMedia::setupVideoCanvas error",nr)}},ze.setupRemoteVideoSubStreamCanvas=function(Ne){this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne);try{return this.rtcController.setupRemoteVideoSubStreamCanvas(Ne.videoView,Ne.accid)}catch(At){throw this.logger.error("QChatMedia::setupRemoteVideoSubStreamCanvas error",At),new Bo("QChatMedia::setupRemoteVideoSubStreamCanvas error",At)}},ze.getScreenSharingUserUuid=function(){this._checkConnectState();try{return this.rtcController.getScreenSharingUserUuid()}catch(Ne){throw this.logger.error("QChatMedia::getScreenSharingUserUuid error",Ne),new Bo("QChatMedia::getScreenSharingUserUuid error",Ne)}},ze.initQChatMedia=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(this.neroom){kt.next=3;break}return this.logger.warn("QChatMedia::init::you should import neroom SDK"),kt.abrupt("return");case 3:if(this.state===void 0){kt.next=6;break}return this.logger.error("QChatMedia::init::you already init QChatMedia"),kt.abrupt("return");case 6:kt.prev=6,this.neroom.initialize({appKey:this.core.options.appkey,serverConfig:Ne.serverConfig}),kt.next=14;break;case 10:throw kt.prev=10,kt.t0=kt.catch(6),this.logger.error("QChatMedia::initQChatMedia error",kt.t0),new Bo("QChatMedia::initQChatMedia error",kt.t0);case 14:this.authService=this.neroom.authService,this.roomService=this.neroom.roomService,this.messageChannelService=this.neroom.messageChannelService,this.state="init";case 18:case"end":return kt.stop()}},At,this,[[6,10]])}))},ze.loginByIM=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt;return wr.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(this.state==="init"){gr.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),gr.abrupt("return");case 3:return nr=this.core.options,gr.next=6,this._getToken();case 6:return kt=gr.sent,gr.prev=7,gr.next=10,(Ne=this.authService)===null||Ne===void 0?void 0:Ne.loginByIM(nr.account,kt,nr.token);case 10:gr.next=16;break;case 12:throw gr.prev=12,gr.t0=gr.catch(7),this.logger.error("QChatMedia::loginByIM error",gr.t0),new Bo("QChatMedia::loginByIM error",gr.t0);case 16:this.state="login";case 17:case"end":return gr.stop()}},At,this,[[7,12]])}))},ze._getToken=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){var nr,kt,dr,gr,Ar=this;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return this.logger.log("QChatMedia::getToken begin getToken"),Ur.next=3,this.core.sendCmd("qchatGetNeroomToken",{qchatGetNeroomTokenTag:{neroomDeviceId:(Ne=this.neroom)===null||Ne===void 0?void 0:Ne.deviceId}});case 3:return nr=Ur.sent,kt=nr.content.neroomToken,dr=kt.token,gr=kt.expire,this.logger.log("QChatMedia::getToken success token is "+dr+",expire is "+gr+" "),this.tokenTimer||(this.logger.debug("QChatMedia::getToken set token timer,expire is "+(1e3*gr-this.tokenExpireTime)+" "),this.tokenTimer=this.core.timerManager.addTimer(function(){return Hr(Ar,void 0,void 0,wr.mark(function Dr(){var Jr;return wr.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return this.tokenTimer&&this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0,Tn.next=4,this._getToken();case 4:Jr=Tn.sent,this.authService&&this.authService.renewToken(Jr);case 6:case"end":return Tn.stop()}},Dr,this)}))},1e3*gr-this.tokenExpireTime)),Ur.abrupt("return",dr);case 8:case"end":return Ur.stop()}},At,this)}))},ze.connectChannel=function(Ne){var At,nr;return Hr(this,void 0,void 0,wr.mark(function kt(){var dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:if(this.state!==void 0){Ar.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),Ar.abrupt("return");case 3:if(this.state!=="init"){Ar.next=6;break}return Ar.next=6,this.loginByIM();case 6:return this.serverId=Ne.serverId,this.channelId=Ne.channelId,Ar.prev=8,Ar.next=11,(At=this.roomService)===null||At===void 0?void 0:At.joinRoom({roomUuid:Ne.channelId,role:"qchatAudience",userName:this.core.options.account,initialProperties:{}},{});case 11:Ar.next=17;break;case 13:throw Ar.prev=13,Ar.t0=Ar.catch(8),this.logger.error("QChatMedia::connectChannel error",Ar.t0),new Bo("QChatMedia::connectChannel error",Ar.t0);case 17:if(!(dr=(nr=this.roomService)===null||nr===void 0?void 0:nr.getRoomContext(Ne.channelId))){Ar.next=27;break}return this.roomContext=dr,this.rtcController=this.roomContext.rtcController,this.state="connect",Ar.next=24,this.rtcController.joinRtcChannel();case 24:this.core.emit("connectChannel"),Ar.next=28;break;case 27:this.logger.error("QChatMedia::connect room not exited");case 28:case"end":return Ar.stop()}},kt,this,[[8,13]])}))},ze.updateRTCChannelInfo=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},limit:{type:"number",allowEmpty:!1}},Ne),kt.next=3,this.core.sendCmd("qchatUpdateRTCChannelConfig",{RTCChannelConfig:Un(Un({},Ne),{audio:Ao(Ne.audio),video:Ao(Ne.video)})});case 3:case"end":return kt.stop()}},At,this)}))},ze.getRTCChannelInfo=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetRTCChannelConfig",{qchatGetRTCChannelConfigTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",FC(nr.content.RTCChannelConfig));case 5:case"end":return dr.stop()}},At,this)}))},ze.getRTCChannelOnlineMembers=function(Ne){return Hr(this,void 0,void 0,wr.mark(function At(){var nr;return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return On({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},Ne),dr.next=3,this.core.sendCmd("qchatGetRTCChannelMembers",{qchatGetRTCChannelMembersTag:Ne});case 3:return nr=dr.sent,dr.abrupt("return",Dc(nr.content.memberList));case 5:case"end":return dr.stop()}},At,this)}))},ze.addRTCChannelListener=function(){var Ne,At,nr=this;this._checkConnectState();try{(Ne=this.authService)===null||Ne===void 0||Ne.addAuthListener({onAuthEvent:function(dr){return Hr(nr,void 0,void 0,wr.mark(function gr(){var Ar;return wr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(dr!==1026||this.getTokenState){Ur.next=10;break}return this.logger.log("QChatMedia::loginByIM token expire,begin get new token "),this.getTokenState=!0,Ur.next=5,this._getToken();case 5:if(Ar=Ur.sent,!this.authService){Ur.next=9;break}return Ur.next=9,this.authService.renewToken(Ar);case 9:this.getTokenState=!1;case 10:case"end":return Ur.stop()}},gr,this)}))}})}catch(kt){throw this.getTokenState=!1,this.logger.error("QChatMedia::loginByIM addAuthListener error",kt),new Bo("QChatMedia::loginByIM addAuthListener error",kt)}(At=this.roomContext)===null||At===void 0||At.addRoomListener({onRoomPropertiesChanged:function(dr){var gr,Ar,Rr,Ur,Dr,Jr;if(nr.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesChanged",dr),dr.audioOff){var kn=(gr=dr.audioOff.value)===null||gr===void 0?void 0:gr.split("_")[0];kn!==Zs.offNotAllowSelfOn&&kn!==Zs.offAllowSelfOn||!((Ar=nr.roomContext)===null||Ar===void 0)&&Ar.localMember.isAudioOn&&((Rr=nr.rtcController)===null||Rr===void 0||Rr.muteMyAudio())}else if(dr.videoOff){var Tn=(Ur=dr.videoOff.value)===null||Ur===void 0?void 0:Ur.split("_")[0];Tn!==Zs.offNotAllowSelfOn&&Tn!==Zs.offAllowSelfOn||!((Dr=nr.roomContext)===null||Dr===void 0)&&Dr.localMember.isVideoOn&&((Jr=nr.rtcController)===null||Jr===void 0||Jr.muteMyVideo())}},onRoomPropertiesDeleted:function(dr){nr.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesDeleted",dr)},onMemberJoinRtcChannel:function(dr){nr.logger.log("QChatMedia::addRTCChannelListener::onMemberJoinRTCChannel",dr);var gr=Ro(dr).call(dr,function(Ar){return Ar.uuid});nr.core.emit("memberJoinRTCChannel",gr)},onMemberLeaveRoom:function(dr){nr.logger.log("QChatMedia::addRTCChannelListener::onMemberLeaveRoom",dr);var gr=Ro(dr).call(dr,function(Ar){return Ar.uuid});nr.core.emit("memberLeaveRTCChannel",gr)},onRoomEnded:function(dr){nr.authService&&nr.authService.logout(),nr._setStateInit(),nr.logger.log("QChatMedia::addRTCChannelListener::onRoomEnded",dr),nr.core.emit("RTCChannelEnded",dr)},onRtcChannelError:function(dr){nr.logger.log("QChatMedia::addRTCChannelListener::onRtcChannelError",dr),dr==="SOCKET_ERROR"&&nr.disconnectChannel(),nr.core.emit("RTCChannelError",dr)},onRtcAudioVolumeIndication:function(dr){nr.logger.log("QChatMedia::addRTCChannelListener::onRtcAudioVolumeIndication",dr),nr.core.emit("onRtcAudioVolumeIndication",dr)},onMemberAudioMuteChanged:function(dr,gr,Ar){nr.logger.log("QChatMedia::addRTCChannelListener::onMemberAudioMuteChanged",dr,gr),nr.core.emit("memberAudioMuteChanged",{memberAccId:dr.uuid,mute:gr,operateByAccId:Ar.uuid})},onMemberScreenShareStateChanged:function(dr,gr,Ar){nr.logger.log("QChatMedia::addRTCChannelListener::onMemberScreenShareStateChanged",dr,gr),nr.core.emit("memberScreenShareStateChanged",{memberAccId:dr.uuid,isSharing:gr,operateByAccId:Ar.uuid})},onMemberVideoMuteChanged:function(dr,gr,Ar){nr.logger.log("QChatMedia::addRTCChannelListener::onMemberVideoMuteChanged",dr,gr),nr.core.emit("memberVideoMuteChanged",{memberAccId:dr.uuid,mute:gr,operateByAccId:Ar.uuid})}})},ze.enumCameraDevices=function(){var Ne=this;return this._checkConnectState(),this.rtcController.enumCameraDevices().then(function(At){return At.data},function(At){throw Ne.logger.error("QChatMedia::enumCameraDevices error",At),new Bo("QChatMedia::enumCameraDevices error",At)})},ze.enumPlayoutDevices=function(){var Ne=this;return this._checkConnectState(),this.rtcController.enumPlayoutDevices().then(function(At){return At.data},function(At){throw Ne.logger.error("QChatMedia::enumPlayoutDevices error",At),new Bo("QChatMedia::enumPlayoutDevices error",At)})},ze.enumRecordDevices=function(){var Ne=this;return this._checkConnectState(),this.rtcController.enumRecordDevices().then(function(At){return At.data},function(At){throw Ne.logger.error("QChatMedia::enumRecordDevices error",At),new Bo("QChatMedia::enumRecordDevices error",At)})},ze.removeRTCChannelListener=function(){var Ne,At;this._checkConnectState(),(Ne=this.roomContext)===null||Ne===void 0||Ne.removeRoomListener({}),(At=this.authService)===null||At===void 0||At.removeAuthListener({})},ze.setSelectedCameraDevice=function(Ne){var At=this;return this._checkConnectState(),On({deviceId:{type:"string",allowEmpty:!1}},Ne),this.rtcController.setSelectedCameraDevice(Ne.deviceId).then(function(nr){return nr.data},function(nr){throw At.logger.error("QChatMedia::setSelectedCameraDevice error",nr),new Bo("QChatMedia::setSelectedCameraDevice error",nr)})},ze.setSelectedPlayoutDevice=function(Ne){var At=this;return this._checkConnectState(),On({deviceId:{type:"string",allowEmpty:!1}},Ne),this.rtcController.setSelectedPlayoutDevice(Ne.deviceId).then(function(nr){return nr.data},function(nr){throw At.logger.error("QChatMedia::setSelectedPlayoutDevice error",nr),new Bo("QChatMedia::setSelectedPlayoutDevice error",nr)})},ze.setSelectedRecordDevice=function(Ne){var At=this;return this._checkConnectState(),On({deviceId:{type:"string",allowEmpty:!1}},Ne),this.rtcController.setSelectedRecordDevice(Ne.deviceId).then(function(nr){return nr.data},function(nr){throw At.logger.error("QChatMedia::setSelectedRecordDevice error",nr),new Bo("QChatMedia::setSelectedRecordDevice error",nr)})},ze.getRTCMembers=function(){var Ne,At;return this._checkConnectState(),Ro(Ne=ki(At=this.roomContext.remoteMembers).call(At,function(nr){return nr.isInRtcChannel})).call(Ne,function(nr){return{accid:nr.uuid,isAudioOn:!!nr.isAudioOn,isVideoOn:!!nr.isVideoOn,isSharingScreen:!!nr.isSharingScreen,properties:nr.properties}})},ze.subscribeRemoteVideoSubStream=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),dr.prev=2,(At=this.rtcController)===null||At===void 0||At.subscribeRemoteVideoSubStream(Ne.accid),dr.next=10;break;case 6:throw dr.prev=6,dr.t0=dr.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoSubStream error",dr.t0),new Bo("QChatMedia::subscribeRemoteVideoSubStream error",dr.t0);case 10:case"end":return dr.stop()}},nr,this,[[2,6]])}))},ze.unsubscribeRemoteVideoSubStream=function(Ne){var At;return Hr(this,void 0,void 0,wr.mark(function nr(){return wr.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._checkConnectState(),On({accid:{type:"string",allowEmpty:!1}},Ne),dr.prev=2,(At=this.rtcController)===null||At===void 0||At.unsubscribeRemoteVideoSubStream(Ne.accid),dr.next=10;break;case 6:throw dr.prev=6,dr.t0=dr.catch(2),this.logger.error("QChatMedia::unsubscribeRemoteVideoSubStream error",dr.t0),new Bo("QChatMedia::unsubscribeRemoteVideoSubStream error",dr.t0);case 10:case"end":return dr.stop()}},nr,this,[[2,6]])}))},ze.muteAllAudio=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return this._checkConnectState(),kt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(kt.sent){kt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),kt.abrupt("return");case 7:kt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("audioOff",Ao({value:Zs.offNotAllowSelfOn+"_"+new Date().getTime()})),kt.next=15;break;case 11:throw kt.prev=11,kt.t0=kt.catch(7),this.logger.error("QChatMedia::muteAllAudio error",kt.t0),new Bo("QChatMedia::muteAllAudio error",kt.t0);case 15:case"end":return kt.stop()}},At,this,[[7,11]])}))},ze.muteAllVideo=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return this._checkConnectState(),kt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(kt.sent){kt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),kt.abrupt("return");case 7:kt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("videoOff",Ao({value:Zs.offNotAllowSelfOn+"_"+new Date().getTime()})),kt.next=15;break;case 11:throw kt.prev=11,kt.t0=kt.catch(7),this.logger.error("QChatMedia::muteAllVideo error",kt.t0),new Bo("QChatMedia::muteAllVideo error",kt.t0);case 15:case"end":return kt.stop()}},At,this,[[7,11]])}))},ze.unMuteAllAudio=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return this._checkConnectState(),kt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(kt.sent){kt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),kt.abrupt("return");case 7:kt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("audioOff",Ao({value:Zs.disable+"_"+new Date().getTime()})),kt.next=15;break;case 11:throw kt.prev=11,kt.t0=kt.catch(7),this.logger.error("QChatMedia::unMuteAllAudio error",kt.t0),new Bo("QChatMedia::unMuteAllAudio error",kt.t0);case 15:case"end":return kt.stop()}},At,this,[[7,11]])}))},ze.unMuteAllVideo=function(){var Ne;return Hr(this,void 0,void 0,wr.mark(function At(){return wr.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return this._checkConnectState(),kt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(kt.sent){kt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),kt.abrupt("return");case 7:kt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("videoOff",Ao({value:Zs.disable+"_"+new Date().getTime()})),kt.next=15;break;case 11:throw kt.prev=11,kt.t0=kt.catch(7),this.logger.error("QChatMedia::unMuteAllVideo error",kt.t0),new Bo("QChatMedia::unMuteAllVideo error",kt.t0);case 15:case"end":return kt.stop()}},At,this,[[7,11]])}))},Ie}(ql),LC={"1_2":"heartbeat","24_2":"qchatLogin","24_4":"qchatExit","24_5":"qchatBeKicked","24_8":"qchatMultiSpotLogin","24_9":"qchatKick","24_19":"qchatSync"},yp={qchatLoginTag:{appkey:1,account:2,authType:3,token:4,loginExt:5,clientType:6,clientSession:7,deviceId:8,sdkVersion:9,sdkType:10,userAgent:11,customTag:12,customClientType:13,sdkHumanVersion:14,pushTokenName:20,pushToken:21,pushkitTokenName:22,pushkitToken:23,deviceInfo:24,customPushContentType:25,os:30,mac:31,bundleId:32,simCarrierCode:33,simCountryCode:34,networkCode:35,browser:36,deviceModel:37,androidid:38,imei:39,idfv:40,openuuid:41,pushType:100,hasTokenPreviously:101,consid:102,clientIP:103,clientPort:104,loginTime:105}},Kl=Qc(yp),jC={heartbeat:{sid:1,cid:2,service:"qchatAuth"},qchatLogin:{sid:24,cid:2,service:"qchatAuth",params:[{type:"Property",name:"qchatLoginReqTag",reflectMapper:yp.qchatLoginTag}],response:[{type:"Property",name:"qchatLoginResTag",reflectMapper:Kl.qchatLoginTag},{type:"PropertyArray",name:"qchatMultiLoginResult",reflectMapper:Kl.qchatLoginTag}]},qchatExit:{sid:24,cid:4,service:"qchatAuth"},qchatBeKicked:{sid:24,cid:5,service:"qchatAuth",response:[{type:"Property",name:"beKickedTag",reflectMapper:{1:"clientType",2:"reason",3:"ext",4:"customClientType"}}]},qchatMultiSpotLogin:{sid:24,cid:8,service:"qchatAuth",response:[{type:"Number",name:"state"},{type:"Property",name:"qchatLoginResTag",reflectMapper:Kl.qchatLoginTag}]},qchatKick:{sid:24,cid:9,service:"qchatAuth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]},qchatSync:{sid:24,cid:19,service:"qchatAuth",isNoResponse:!0,params:[{type:"Property",name:"qchatSyncTag",reflectMapper:{systemNotification:1,pushConfig:2}}],response:[{type:"Number",name:"timetag"}]}},DC={debugLevel:"off",needReconnect:!0,reconnectionAttempts:wg,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},bp=function(pe){function Ie(Oe,Ne){var At;return Ne===void 0&&(Ne={cloudStorageConfig:{}}),(At=pe.call(this,Oe)||this).instanceName="QChat",At.account="",At.options={},At.qchatAuth={},At.qchatServer={},At.qchatChannel={},At.qchatMsg={},At.qchatRole={},At.qchatMedia={},At.cloudStorage={},At.setOptions(Oe),oc({cmdMap:LC,cmdConfig:jC}),oc({cmdMap:Uy,cmdConfig:Vh}),At.qchatAuth=new BC(k(At)),At.qchatServer=new tC(k(At)),At.qchatChannel=new TC(k(At)),At.qchatMsg=new hb(k(At)),At.qchatRole=new kC(k(At)),At.qchatMedia=new $C(k(At)),At.cloudStorage=new qy(k(At),Un({storageKeyPrefix:At.instanceName},Ne.cloudStorageConfig)),Ne&&At.setOtherOptions(Ne),Ie.instance=k(At),At}ea(Ie,pe),Ie.getInstance=function(Ne,At){if(!Ie.instance){if(Ne)return new Ie(Ne,At);throw new Error("Instance not exist, please input options")}if(Ne){if(Ie.instance.options.account===Ne.account&&Ie.instance.options.appkey===Ne.appkey)return Ie.instance.setOptions(Ne),At&&Ie.instance.setOtherOptions(At),Ie.instance;throw new Error("Unexpected login")}return Ie.instance};var ze=Ie.prototype;return ze.connect=function(Ne){Ne===void 0&&(Ne={});var At=Cs(null,{connect:{get:function(){return pe.prototype.connect}}});return Hr(this,void 0,void 0,wr.mark(function nr(){var kt,dr,gr;return wr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.status)){Rr.next=4;break}return kt="QChat status is "+this.status+", and would not connect",this.logger.warn(kt),Rr.abrupt("return",_o.reject(kt));case 4:return dr=Ne.isAutoReconnect||!1,Rr.next=7,At.connect.call(this,{linkUrls:this.options.linkAddresses,isAutoReconnect:dr});case 7:return Rr.prev=7,Rr.next=10,this.qchatAuth.doLogin(dr);case 10:gr=Rr.sent,Rr.next=21;break;case 13:if(Rr.prev=13,Rr.t0=Rr.catch(7),this.logger.warn("qchat connect:: login failed",Rr.t0),this.retryCount!==0){Rr.next=19;break}throw this.doDisconnect($s.ACTIVE,"FailedToInitializeLogin"),Rr.t0;case 19:return this.doDisconnect($s.OFFLINE,"ReconnectLoginFailed"),Rr.abrupt("return");case 21:return this.status="logined",gr.loginResult.appkey=this.options.appkey,this.eventBus.emit("logined",gr.loginResult),this.emit("logined",gr.loginResult),gr.multiLoginResults&&gr.multiLoginResults.length>0&&this.emit("multiSpotLogin",gr.multiLoginResults),this.resetConnectStatus(),this.ping(),Rr.prev=28,Rr.next=31,this.cloudStorage.init();case 31:Rr.next=36;break;case 33:Rr.prev=33,Rr.t1=Rr.catch(28),this.logger.error("NIM:login cloudStorage init failed ",Rr.t1);case 36:return Rr.next=38,this.qchatAuth.sync();case 38:case"end":return Rr.stop()}},nr,this,[[7,13],[28,33]])}))},ze.login=function(Ne){return Ne===void 0&&(Ne={}),this.connect(Ne)},ze.setOptions=function(Ne){On({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},linkAddresses:{type:"array",itemType:"string",min:1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:Np,required:!1}},Ne),this.logger.log("QChat::setOptions options is",Ne),this.account=Ne.account,this.options=Un(Un({},DC),Ne)},ze.setOtherOptions=function(Ne){var At;!((At=Ne==null?void 0:Ne.QChatMedia)===null||At===void 0)&&At.neroom&&this.qchatMedia.setNeroom(Ne.QChatMedia.neroom)},ze.onMessage=function(Ne){var At,nr,kt=pe.prototype.onMessage.call(this,Ne);if(kt){var dr=kt.raw.ser,gr=this.sendingCmdMap.get(dr);if(gr&&gr.cmd===kt.cmd){var Ar=gr.callback,Rr=gr.timer,Ur=gr.params;if(clearTimeout(Rr),kt.params=Ur,this.sendingCmdMap.delete(dr),kt.cmd==="heartbeat")return void Ar[0]();var Dr=(At=this[kt.service])===null||At===void 0?void 0:At.process(kt);Dr&&typeof Dr.then=="function"?Dr.then(function(Jr){Ar[0](Jr)}).catch(function(Jr){Ar[1](Jr)}):(this.logger.log("imsocket:: handlerFn without promise",kt.service,kt.cmd),Ar[0]())}else(nr=this[kt.service])===null||nr===void 0||nr.process(kt)}},ze.disconnect=function(){var Ne=this;switch(this.status){case"logined":return this.sendCmd("qchatExit").then(function(){pe.prototype.doDisconnect.call(Ne,$s.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return pe.prototype.doDisconnect.call(this,$s.ACTIVE,"UserActiveDisconnect"),_o.resolve();case"unconnected":case"destroyed":return _o.resolve()}},ze.logout=function(){return this.disconnect()},ze.destroy=function(){return Ie.instance=null,pe.prototype.destroy.call(this)},ze.kickOtherClients=function(Ne){return On({deviceIds:{type:"array",itemType:"string"}},Ne),this.qchatAuth.kick(Ne)},Ie}(Hd);bp.instance=null;var UC=Math.min,fv=[].lastIndexOf,Nf=!!fv&&1/[1].lastIndexOf(1,-0)<0,Of=fi("lastIndexOf"),yb=Nf||!Of?function(Ie){if(Nf)return le(fv,this,arguments)||0;var ze=_r(this),Oe=Za(ze),Ne=Oe-1;for(arguments.length>1&&(Ne=UC(Ne,uc(arguments[1]))),Ne<0&&(Ne=Oe+Ne);Ne>=0;Ne--)if(Ne in ze&&ze[Ne]===Ie)return Ne||0;return-1}:fv;_n({target:"Array",proto:!0,forced:yb!==[].lastIndexOf},{lastIndexOf:yb});var qC=sa("Array").lastIndexOf,mv=Array.prototype,bb=function(pe){var Ie=pe.lastIndexOf;return pe===mv||vr(mv,pe)&&Ie===mv.lastIndexOf?qC:Ie},il=g(function(pe,Ie){(function(){var ze={function:!0,object:!0}[typeof window]&&window||this,Oe=Ie,Ne=pe&&!pe.nodeType&&pe,At=Oe&&Ne&&typeof e=="object"&&e;!At||At.global!==At&&At.window!==At&&At.self!==At||(ze=At);var nr=Math.pow(2,53)-1,kt=/\bOpera/,dr=Object.prototype,gr=dr.hasOwnProperty,Ar=dr.toString;function Rr(Gn){return(Gn=String(Gn)).charAt(0).toUpperCase()+Gn.slice(1)}function Ur(Gn){return Gn=jn(Gn),/^(?:webOS|i(?:OS|P))/.test(Gn)?Gn:Rr(Gn)}function Dr(Gn,$n){for(var ho in Gn)gr.call(Gn,ho)&&$n(Gn[ho],ho,Gn)}function Jr(Gn){return Gn==null?Rr(Gn):Ar.call(Gn).slice(8,-1)}function kn(Gn){return String(Gn).replace(/([ -])(?!$)/g,"$1?")}function Tn(Gn,$n){var ho=null;return function(oa,so){var Wr=-1,Kn=oa?oa.length:0;if(typeof Kn=="number"&&Kn>-1&&Kn<=nr)for(;++Wr<Kn;)so(oa[Wr],Wr,oa);else Dr(oa,so)}(Gn,function(co,oa){ho=$n(ho,co,oa,Gn)}),ho}function jn(Gn){return String(Gn).replace(/^ +| +$/g,"")}var Bn=function Gn($n){var ho=ze,co=$n&&typeof $n=="object"&&Jr($n)!="String";co&&(ho=$n,$n=null);var oa=ho.navigator||{},so=oa.userAgent||"";$n||($n=so);var Wr,Kn,ro=co?!!oa.likeChrome:/\bChrome\b/.test($n)&&!/internal|\n/i.test(Ar.toString()),Hn="Object",Fn=co?Hn:"ScriptBridgingProxyObject",eo=co?Hn:"Environment",lo=co&&ho.java?"JavaPackage":Jr(ho.java),So=co?Hn:"RuntimeObject",Co=/\bJava/.test(lo)&&ho.java,aa=Co&&Jr(ho.environment)==eo,No=Co?"a":"",Sa=Co?"b":"",$o=ho.document||{},Wo=ho.operamini||ho.opera,Ta=kt.test(Ta=co&&Wo?Wo["[[Class]]"]:Jr(Wo))?Ta:Wo=null,Yi=$n,Qo=[],Xi=null,cs=$n==so,Io=cs&&Wo&&typeof Wo.version=="function"&&Wo.version(),ma=function(Ya){return Tn(Ya,function(ga,$a){return ga||RegExp("\\b"+($a.pattern||kn($a))+"\\b","i").exec($n)&&($a.label||$a)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),mo=function(Ya){return Tn(Ya,function(ga,$a){return ga||RegExp("\\b"+($a.pattern||kn($a))+"\\b","i").exec($n)&&($a.label||$a)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),ta=Tb([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Ss=function(Ya){return Tn(Ya,function(ga,$a,Sp){return ga||($a[ta]||$a[/^[a-z]+(?: +[a-z]+\b)*/i.exec(ta)]||RegExp("\\b"+kn(Sp)+"(?:\\b|\\w*\\d)","i").exec($n))&&Sp})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),vo=function(Ya){return Tn(Ya,function(ga,$a){var Sp=$a.pattern||kn($a);return!ga&&(ga=RegExp("\\b"+Sp+"(?:/[\\d.]+|[ \\w.]*)","i").exec($n))&&(ga=function(bi,Tp,Rf){var hv={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Tp&&Rf&&/^Win/i.test(bi)&&!/^Windows Phone /i.test(bi)&&(hv=hv[/[\d.]+$/.exec(bi)])&&(bi="Windows "+hv),bi=String(bi),Tp&&Rf&&(bi=bi.replace(RegExp(Tp,"i"),Rf)),Ur(bi.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(ga,Sp,$a.label||$a)),ga})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Tb(ti){return Tn(ti,function(Ya,ga){var $a=ga.pattern||kn(ga);return!Ya&&(Ya=RegExp("\\b"+$a+" *\\d+[.\\w_]*","i").exec($n)||RegExp("\\b"+$a+" *\\w+-[\\w]*","i").exec($n)||RegExp("\\b"+$a+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec($n))&&((Ya=String(ga.label&&!RegExp($a,"i").test(ga.label)?ga.label:Ya).split("/"))[1]&&!/[\d.]+/.test(Ya[0])&&(Ya[0]+=" "+Ya[1]),ga=ga.label||ga,Ya=Ur(Ya[0].replace(RegExp($a,"i"),ga).replace(RegExp("; *(?:"+ga+"[_-])?","i")," ").replace(RegExp("("+ga+")[-_.]?(\\w)","i"),"$1 $2"))),Ya})}function gv(ti){return Tn(ti,function(Ya,ga){return Ya||(RegExp(ga+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec($n)||0)[1]||null})}if(ma&&(ma=[ma]),/\bAndroid\b/.test(vo)&&!ta&&(Wr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec($n))&&(ta=jn(Wr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Ss&&!ta?ta=Tb([Ss]):Ss&&ta&&(ta=ta.replace(RegExp("^("+kn(Ss)+")[-_.\\s]","i"),Ss+" ").replace(RegExp("^("+kn(Ss)+")[-_.]?(\\w)","i"),Ss+" $2")),(Wr=/\bGoogle TV\b/.exec(ta))&&(ta=Wr[0]),/\bSimulator\b/i.test($n)&&(ta=(ta?ta+" ":"")+"Simulator"),mo=="Opera Mini"&&/\bOPiOS\b/.test($n)&&Qo.push("running in Turbo/Uncompressed mode"),mo=="IE"&&/\blike iPhone OS\b/.test($n)?(Ss=(Wr=Gn($n.replace(/like iPhone OS/,""))).manufacturer,ta=Wr.product):/^iP/.test(ta)?(mo||(mo="Safari"),vo="iOS"+((Wr=/ OS ([\d_]+)/i.exec($n))?" "+Wr[1].replace(/_/g,"."):"")):mo=="Konqueror"&&/^Linux\b/i.test(vo)?vo="Kubuntu":Ss&&Ss!="Google"&&(/Chrome/.test(mo)&&!/\bMobile Safari\b/i.test($n)||/\bVita\b/.test(ta))||/\bAndroid\b/.test(vo)&&/^Chrome/.test(mo)&&/\bVersion\//i.test($n)?(mo="Android Browser",vo=/\bAndroid\b/.test(vo)?vo:"Android"):mo=="Silk"?(/\bMobi/i.test($n)||(vo="Android",Qo.unshift("desktop mode")),/Accelerated *= *true/i.test($n)&&Qo.unshift("accelerated")):mo=="UC Browser"&&/\bUCWEB\b/.test($n)?Qo.push("speed mode"):mo=="PaleMoon"&&(Wr=/\bFirefox\/([\d.]+)\b/.exec($n))?Qo.push("identifying as Firefox "+Wr[1]):mo=="Firefox"&&(Wr=/\b(Mobile|Tablet|TV)\b/i.exec($n))?(vo||(vo="Firefox OS"),ta||(ta=Wr[1])):!mo||(Wr=!/\bMinefield\b/i.test($n)&&/\b(?:Firefox|Safari)\b/.exec(mo))?(mo&&!ta&&/[\/,]|^[^(]+?\)/.test($n.slice($n.indexOf(Wr+"/")+8))&&(mo=null),(Wr=ta||Ss||vo)&&(ta||Ss||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(vo))&&(mo=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(vo)?vo:Wr)+" Browser")):mo=="Electron"&&(Wr=(/\bChrome\/([\d.]+)\b/.exec($n)||0)[1])&&Qo.push("Chromium "+Wr),Io||(Io=gv(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",kn(mo),"(?:Firefox|Minefield|NetFront)"])),(Wr=(ma=="iCab"&&parseFloat(Io)>3?"WebKit":/\bOpera\b/.test(mo)&&(/\bOPR\b/.test($n)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test($n)&&!/^(?:Trident|EdgeHTML)$/.test(ma)&&"WebKit"||!ma&&/\bMSIE\b/i.test($n)&&(vo=="Mac OS"?"Tasman":"Trident")||ma=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(mo)&&"NetFront")&&(ma=[Wr]),mo=="IE"&&(Wr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec($n)||0)[1])?(mo+=" Mobile",vo="Windows Phone "+(/\+$/.test(Wr)?Wr:Wr+".x"),Qo.unshift("desktop mode")):/\bWPDesktop\b/i.test($n)?(mo="IE Mobile",vo="Windows Phone 8.x",Qo.unshift("desktop mode"),Io||(Io=(/\brv:([\d.]+)/.exec($n)||0)[1])):mo!="IE"&&ma=="Trident"&&(Wr=/\brv:([\d.]+)/.exec($n))&&(mo&&Qo.push("identifying as "+mo+(Io?" "+Io:"")),mo="IE",Io=Wr[1]),cs){if(function(Ya,ga){var $a=Ya!=null?typeof Ya[ga]:"number";return!(/^(?:boolean|number|string|undefined)$/.test($a)||$a=="object"&&!Ya[ga])}(ho,"global"))if(Co&&(Yi=(Wr=Co.lang.System).getProperty("os.arch"),vo=vo||Wr.getProperty("os.name")+" "+Wr.getProperty("os.version")),aa){try{Io=ho.require("ringo/engine").version.join("."),mo="RingoJS"}catch{(Wr=ho.system)&&Wr.global.system==ho.system&&(mo="Narwhal",vo||(vo=Wr[0].os||null))}mo||(mo="Rhino")}else typeof ho.process=="object"&&!ho.process.browser&&(Wr=ho.process)&&(typeof Wr.versions=="object"&&(typeof Wr.versions.electron=="string"?(Qo.push("Node "+Wr.versions.node),mo="Electron",Io=Wr.versions.electron):typeof Wr.versions.nw=="string"&&(Qo.push("Chromium "+Io,"Node "+Wr.versions.node),mo="NW.js",Io=Wr.versions.nw)),mo||(mo="Node.js",Yi=Wr.arch,vo=Wr.platform,Io=(Io=/[\d.]+/.exec(Wr.version))?Io[0]:null));else Jr(Wr=ho.runtime)==Fn?(mo="Adobe AIR",vo=Wr.flash.system.Capabilities.os):Jr(Wr=ho.phantom)==So?(mo="PhantomJS",Io=(Wr=Wr.version||null)&&Wr.major+"."+Wr.minor+"."+Wr.patch):typeof $o.documentMode=="number"&&(Wr=/\bTrident\/(\d+)/i.exec($n))?(Io=[Io,$o.documentMode],(Wr=+Wr[1]+4)!=Io[1]&&(Qo.push("IE "+Io[1]+" mode"),ma&&(ma[1]=""),Io[1]=Wr),Io=mo=="IE"?String(Io[1].toFixed(1)):Io[0]):typeof $o.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(mo)&&(Qo.push("masking as "+mo+" "+Io),mo="IE",Io="11.0",ma=["Trident"],vo="Windows");vo=vo&&Ur(vo)}if(Io&&(Wr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Io)||/(?:alpha|beta)(?: ?\d)?/i.exec($n+";"+(cs&&oa.appMinorVersion))||/\bMinefield\b/i.test($n)&&"a")&&(Xi=/b/i.test(Wr)?"beta":"alpha",Io=Io.replace(RegExp(Wr+"\\+?$"),"")+(Xi=="beta"?Sa:No)+(/\d+\+?/.exec(Wr)||"")),mo=="Fennec"||mo=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(vo))mo="Firefox Mobile";else if(mo=="Maxthon"&&Io)Io=Io.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(ta))ta=="Xbox 360"&&(vo=null),ta=="Xbox 360"&&/\bIEMobile\b/.test($n)&&Qo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(mo)&&(!mo||ta||/Browser|Mobi/.test(mo))||vo!="Windows CE"&&!/Mobi/i.test($n))if(mo=="IE"&&cs)try{ho.external===null&&Qo.unshift("platform preview")}catch{Qo.unshift("embedded")}else(/\bBlackBerry\b/.test(ta)||/\bBB10\b/.test($n))&&(Wr=(RegExp(ta.replace(/ +/g," *")+"/([.\\d]+)","i").exec($n)||0)[1]||Io)?(vo=((Wr=[Wr,/BB10/.test($n)])[1]?(ta=null,Ss="BlackBerry"):"Device Software")+" "+Wr[0],Io=null):this!=Dr&&ta!="Wii"&&(cs&&Wo||/Opera/.test(mo)&&/\b(?:MSIE|Firefox)\b/i.test($n)||mo=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(vo)||mo=="IE"&&(vo&&!/^Win/.test(vo)&&Io>5.5||/\bWindows XP\b/.test(vo)&&Io>8||Io==8&&!/\bTrident\b/.test($n)))&&!kt.test(Wr=Gn.call(Dr,$n.replace(kt,"")+";"))&&Wr.name&&(Wr="ing as "+Wr.name+((Wr=Wr.version)?" "+Wr:""),kt.test(mo)?(/\bIE\b/.test(Wr)&&vo=="Mac OS"&&(vo=null),Wr="identify"+Wr):(Wr="mask"+Wr,mo=Ta?Ur(Ta.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(Wr)&&(vo=null),cs||(Io=null)),ma=["Presto"],Qo.push(Wr));else mo+=" Mobile";(Wr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec($n)||0)[1])&&(Wr=[parseFloat(Wr.replace(/\.(\d)$/,".0$1")),Wr],mo=="Safari"&&Wr[1].slice(-1)=="+"?(mo="WebKit Nightly",Xi="alpha",Io=Wr[1].slice(0,-1)):Io!=Wr[1]&&Io!=(Wr[2]=(/\bSafari\/([\d.]+\+?)/i.exec($n)||0)[1])||(Io=null),Wr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec($n)||0)[1],Wr[0]==537.36&&Wr[2]==537.36&&parseFloat(Wr[1])>=28&&ma=="WebKit"&&(ma=["Blink"]),cs&&(ro||Wr[1])?(ma&&(ma[1]="like Chrome"),Wr=Wr[1]||((Wr=Wr[0])<530?1:Wr<532?2:Wr<532.05?3:Wr<533?4:Wr<534.03?5:Wr<534.07?6:Wr<534.1?7:Wr<534.13?8:Wr<534.16?9:Wr<534.24?10:Wr<534.3?11:Wr<535.01?12:Wr<535.02?"13+":Wr<535.07?15:Wr<535.11?16:Wr<535.19?17:Wr<536.05?18:Wr<536.1?19:Wr<537.01?20:Wr<537.11?"21+":Wr<537.13?23:Wr<537.18?24:Wr<537.24?25:Wr<537.36?26:ma!="Blink"?"27":"28")):(ma&&(ma[1]="like Safari"),Wr=(Wr=Wr[0])<400?1:Wr<500?2:Wr<526?3:Wr<533?4:Wr<534?"4+":Wr<535?5:Wr<537?6:Wr<538?7:Wr<601?8:Wr<602?9:Wr<604?10:Wr<606?11:Wr<608?12:"12"),ma&&(ma[1]+=" "+(Wr+=typeof Wr=="number"?".x":/[.+]/.test(Wr)?"":"+")),mo=="Safari"&&(!Io||parseInt(Io)>45)?Io=Wr:mo=="Chrome"&&/\bHeadlessChrome/i.test($n)&&Qo.unshift("headless")),mo=="Opera"&&(Wr=/\bzbov|zvav$/.exec(vo))?(mo+=" ",Qo.unshift("desktop mode"),Wr=="zvav"?(mo+="Mini",Io=null):mo+="Mobile",vo=vo.replace(RegExp(" *"+Wr+"$"),"")):mo=="Safari"&&/\bChrome\b/.exec(ma&&ma[1])?(Qo.unshift("desktop mode"),mo="Chrome Mobile",Io=null,/\bOS X\b/.test(vo)?(Ss="Apple",vo="iOS 4.3+"):vo=null):/\bSRWare Iron\b/.test(mo)&&!Io&&(Io=gv("Chrome")),Io&&Io.indexOf(Wr=/[\d.]+$/.exec(vo))==0&&$n.indexOf("/"+Wr+"-")>-1&&(vo=jn(vo.replace(Wr,""))),vo&&vo.indexOf(mo)!=-1&&!RegExp(mo+" OS").test(vo)&&(vo=vo.replace(RegExp(" *"+kn(mo)+" *"),"")),ma&&!/\b(?:Avant|Nook)\b/.test(mo)&&(/Browser|Lunascape|Maxthon/.test(mo)||mo!="Safari"&&/^iOS/.test(vo)&&/\bSafari\b/.test(ma[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(mo)&&ma[1])&&(Wr=ma[ma.length-1])&&Qo.push(Wr),Qo.length&&(Qo=["("+Qo.join("; ")+")"]),Ss&&ta&&ta.indexOf(Ss)<0&&Qo.push("on "+Ss),ta&&Qo.push((/^on /.test(Qo[Qo.length-1])?"":"on ")+ta),vo&&(Wr=/ ([\d.+]+)$/.exec(vo),Kn=Wr&&vo.charAt(vo.length-Wr[0].length-1)=="/",vo={architecture:32,family:Wr&&!Kn?vo.replace(Wr[0],""):vo,version:Wr?Wr[1]:null,toString:function(){var ti=this.version;return this.family+(ti&&!Kn?" "+ti:"")+(this.architecture==64?" 64-bit":"")}}),(Wr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Yi))&&!/\bi686\b/i.test(Yi)?(vo&&(vo.architecture=64,vo.family=vo.family.replace(RegExp(" *"+Wr),"")),mo&&(/\bWOW64\b/i.test($n)||cs&&/\w(?:86|32)$/.test(oa.cpuClass||oa.platform)&&!/\bWin64; x64\b/i.test($n))&&Qo.unshift("32-bit")):vo&&/^OS X/.test(vo.family)&&mo=="Chrome"&&parseFloat(Io)>=39&&(vo.architecture=64),$n||($n=null);var ei={};return ei.description=$n,ei.layout=ma&&ma[0],ei.manufacturer=Ss,ei.name=mo,ei.prerelease=Xi,ei.product=ta,ei.ua=$n,ei.version=mo&&Io,ei.os=vo||{architecture:null,family:null,version:null,toString:function(){return"null"}},ei.parse=Gn,ei.toString=function(){return this.description||""},ei.version&&Qo.unshift(Io),ei.name&&Qo.unshift(mo),vo&&mo&&(vo!=String(vo).split(" ")[0]||vo!=mo.split(" ")[0]&&!ta)&&Qo.push(ta?"("+vo+")":"on "+vo),Qo.length&&(ei.description=Qo.join(" ")),ei}();Oe&&Ne?Dr(Bn,function(Gn,$n){Oe[$n]=Gn}):ze.platform=Bn}).call(e)}),Sb=g(function(pe,Ie){pe.exports=function(){var ze={d:function(Wr,Kn){for(var ro in Kn)ze.o(Kn,ro)&&!ze.o(Wr,ro)&&bc(Wr,ro,{enumerable:!0,get:Kn[ro]})},o:function(Wr,Kn){return Object.prototype.hasOwnProperty.call(Wr,Kn)}},Oe={};ze.d(Oe,{default:function(){return oa}});var Ne=function so(Wr){for(var Kn in function(ro,Hn){if(!(ro instanceof Hn))throw new TypeError("Cannot call a class as a function")}(this,so),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(ro){},this.onProgress=function(ro){},this.onUploadProgress=function(ro){},this.onComplete=function(ro){},Wr)this[Kn]=Wr[Kn]};function At(so,Wr){var Kn=ja!==void 0&&fs(so)||so["@@iterator"];if(!Kn){if(Es(so)||(Kn=function(So,Co){if(So){var aa;if(typeof So=="string")return nr(So,Co);var No=Lo(aa=Object.prototype.toString.call(So)).call(aa,8,-1);return No==="Object"&&So.constructor&&(No=So.constructor.name),No==="Map"||No==="Set"?Xc(So):No==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(No)?nr(So,Co):void 0}}(so))||Wr&&so&&typeof so.length=="number"){Kn&&(so=Kn);var ro=0,Hn=function(){};return{s:Hn,n:function(){return ro>=so.length?{done:!0}:{done:!1,value:so[ro++]}},e:function(Co){throw Co},f:Hn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fn,eo=!0,lo=!1;return{s:function(){Kn=Kn.call(so)},n:function(){var Co=Kn.next();return eo=Co.done,Co},e:function(Co){lo=!0,Fn=Co},f:function(){try{eo||Kn.return==null||Kn.return()}finally{if(lo)throw Fn}}}}function nr(so,Wr){(Wr==null||Wr>so.length)&&(Wr=so.length);for(var Kn=0,ro=new Array(Wr);Kn<Wr;Kn++)ro[Kn]=so[Kn];return ro}var kt=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(kt={privateObj:{},setItem:function(Wr,Kn){kt.privateObj[Wr]=Kn},getItem:function(Wr){return kt.privateObj[Wr]},removeItem:function(Wr){delete kt.privateObj[Wr]},getKeys:function(){return ka(kt.privateObj)}});var dr={getFileKey:function(Wr){var Kn=Wr.size.toString(),ro=Wr.lastModified.toString();return"_NosUploader_"+Wr.name+Lo(Kn).call(Kn,Kn.length-5)+Lo(ro).call(ro,ro.length-5)},getFileInfo:function(Wr){var Kn=kt.getItem(Wr);if(!Kn)return null;try{return JSON.parse(Kn)}catch{return null}},initFile:function(Wr,Kn,ro){dr.clearExpiredInfo();var Hn=this.getFileKey(Kn),Fn={ctx:Wr.ctx!==void 0?Wr.ctx:"",bucket:Wr.bucketName,obj:Wr.objectName,token:Wr.token,modifyAt:_s(),end:!1};return Wr.payload&&(Fn.payload=Wr.payload),ro&&kt.setItem(Hn,Ao(Fn)),Hn},setUploadContext:function(Wr,Kn,ro){var Hn=this.getFileInfo(Wr);Hn&&(Hn.ctx=Kn,ro&&kt.setItem(Wr,Ao(Hn)))},setComplete:function(Wr,Kn){var ro=this.getFileInfo(Wr);ro&&(ro.modifyAt=_s(),ro.end=!0,Kn&&kt.setItem(Wr,Ao(ro)))},getUploadContext:function(Wr){var Kn=this.getFileInfo(Wr);return Kn?Kn.ctx:""},removeFileInfo:function(Wr){Ba(Wr).call(Wr,"_NosUploader_")===0&&kt.removeItem(Wr)},clearExpiredInfo:function(){var Wr,Kn=typeof kt.getKeys=="function"?kt.getKeys():ka(kt),ro=_s(),Hn=[],Fn=At(Kn);try{for(Fn.s();!(Wr=Fn.n()).done;){var eo=Wr.value;if(Ba(eo).call(eo,"_NosUploader_")===0){var lo=dr.getFileInfo(eo);lo===null||ro-lo.modifyAt>oa.expireTime?kt.removeItem(eo):Hn.push({fileInfo:lo,key:eo})}}}catch($o){Fn.e($o)}finally{Fn.f()}if(Hn.length>oa.maxFileCache){var So,Co,aa=At(Lo(So=Su(Hn).call(Hn,function($o,Wo){return Wo.fileInfo.modifyAt-$o.fileInfo.modifyAt})).call(So,oa.maxFileCache));try{for(aa.s();!(Co=aa.n()).done;){var No,Sa=Co.value;Ba(No=Sa.key).call(No,"_NosUploader_")===0&&kt.removeItem(Sa.key)}}catch($o){aa.e($o)}finally{aa.f()}}}},gr=dr;function Ar(so){return(Ar=typeof ja=="function"&&typeof Bm=="symbol"?function(Wr){return typeof Wr}:function(Wr){return Wr&&typeof ja=="function"&&Wr.constructor===ja&&Wr!==ja.prototype?"symbol":typeof Wr})(so)}function Rr(so,Wr){return!Wr||Ar(Wr)!=="object"&&typeof Wr!="function"?function(Kn){if(Kn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kn}(so):Wr}function Ur(so){var Wr=typeof Pl=="function"?new Pl:void 0;return(Ur=function(ro){var Hn,Fn;if(ro===null||(Fn=ro,Ba(Hn=Function.toString.call(Fn)).call(Hn,"[native code]")===-1))return ro;if(typeof ro!="function")throw new TypeError("Super expression must either be null or a function");if(Wr!==void 0){if(Wr.has(ro))return Wr.get(ro);Wr.set(ro,eo)}function eo(){return Dr(ro,arguments,Tn(this).constructor)}return eo.prototype=Cs(ro.prototype,{constructor:{value:eo,enumerable:!1,writable:!0,configurable:!0}}),kn(eo,ro)})(so)}function Dr(so,Wr,Kn){return(Dr=Jr()?Ic:function(ro,Hn,Fn){var eo=[null];eo.push.apply(eo,Hn);var lo=new(Xo(Function).apply(ro,eo));return Fn&&kn(lo,Fn.prototype),lo}).apply(null,arguments)}function Jr(){if(typeof Reflect>"u"||!Ic||Ic.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ic(Boolean,[],function(){})),!0}catch{return!1}}function kn(so,Wr){return(kn=si||function(Kn,ro){return Kn.__proto__=ro,Kn})(so,Wr)}function Tn(so){return(Tn=si?pi:function(Wr){return Wr.__proto__||pi(Wr)})(so)}var jn=function(so){(function(Fn,eo){if(typeof eo!="function"&&eo!==null)throw new TypeError("Super expression must either be null or a function");Fn.prototype=Cs(eo&&eo.prototype,{constructor:{value:Fn,writable:!0,configurable:!0}}),eo&&kn(Fn,eo)})(Hn,so);var Wr,Kn,ro=(Wr=Hn,Kn=Jr(),function(){var Fn,eo=Tn(Wr);if(Kn){var lo=Tn(this).constructor;Fn=Ic(eo,arguments,lo)}else Fn=eo.apply(this,arguments);return Rr(this,Fn)});function Hn(Fn,eo){var lo;return function(So,Co){if(!(So instanceof Co))throw new TypeError("Cannot call a class as a function")}(this,Hn),(lo=ro.call(this,"NosUploadError:"+Fn)).errCode=eo,lo.errMsg=Fn,lo}return Hn}(Ur(Error)),Bn=function so(Wr,Kn,ro){if(Wr.uploadState==="uploading"){var Hn=Wr.config,Fn=Wr.param,eo=gr.getUploadContext(Wr.fileKey);if(!eo)return ro(0);var lo=new XMLHttpRequest,So=Hn.directUploadAddr+"/".concat(Fn.bucketName)+"/".concat(encodeURIComponent(Fn.objectName))+"?uploadContext"+"&context=".concat(eo)+"&version=".concat(Hn.version);lo.onreadystatechange=function(){var Co;if(Wr.uploadState!=="abort"&&lo.readyState===4){var aa,No,Sa,$o;try{$o=JSON.parse(lo.responseText)}catch{$o={errMsg:"JsonParseError in getOffset",errCode:500}}lo.status===200?$o.errCode?Wr.config.onError(new jn($o.errMsg,$o.errCode)):ro($o.offset):lo.status.toString().match(/^5/)?so(Wr,Kn-1,ro):Kn>0?(typeof((Co=Hn.logger)===null||Co===void 0?void 0:Co.error)=="function"&&Hn.logger.error(gi(aa="getOffset(".concat(So,") error. retry after 3 seconds. ")).call(aa,new Date().toTimeString())),Ia(function(){so(Wr,Kn-1,ro)},3500)):(gr.removeFileInfo(Wr.fileKey),lo.status?Hn.onError(new jn(gi(No=gi(Sa="getOffset(".concat(So,") error: ")).call(Sa,lo.status," ")).call(No,lo.statusText))):Hn.onError(new jn("getOffset(".concat(So,") error. no Error Code"))))}},lo.open("get",So),lo.setRequestHeader("x-nos-token",Fn.token),lo.timeout=Hn.getOffsetTimeout,lo.send()}},Gn=function so(Wr,Kn,ro,Hn){if(Wr.uploadState==="uploading"){var Fn=Wr.param,eo=Wr.config,lo=Lo(File.prototype),So=Fn.ctx!==void 0?Fn.ctx:"",Co=Kn+eo.trunkSize>Wr.file.size,aa=Co?Wr.file.size:Kn+eo.trunkSize,No=new XMLHttpRequest,Sa=eo.directUploadAddr+"/".concat(Fn.bucketName)+"/".concat(encodeURIComponent(Fn.objectName));if(No.upload.onprogress=function(Wo){if(Wr.uploadState!=="abort"){var Ta=0;Wo.lengthComputable?(Ta=(Kn+Wo.loaded)/Wr.file.size,eo.onProgress(Ta),eo.onUploadProgress({loaded:Wo.loaded,total:Wr.file.size,percentage:Ta,percentageText:(100*Ta).toFixed(2)+"%"})):eo.onError(new jn("browser does not support query upload progress"))}},No.onreadystatechange=function(){var Wo,Ta;if(Wr.uploadState!=="abort"&&No.readyState===4){var Yi,Qo,Xi,cs;try{cs=JSON.parse(No.responseText)}catch(Io){typeof((Wo=eo.logger)===null||Wo===void 0?void 0:Wo.error)=="function"&&eo.logger.error("JsonParseError in uploadTrunk",Io),cs={errMsg:"JsonParseError in uploadTrunk"}}No.status===200?(Wr.setContext(cs.context),Co?(Hn(),Wr.setComplete()):so(Wr,cs.offset,eo.retryCount,Hn)):No.status.toString().match(/^5/)?ro>0?so(Wr,Kn,ro-1,Hn):(gr.removeFileInfo(Wr.fileKey),eo.onError(new jn(cs.errMsg,cs.errCode))):ro>0?(typeof((Ta=eo.logger)===null||Ta===void 0?void 0:Ta.error)=="function"&&eo.logger.error(gi(Yi="uploadTrunk(".concat(Sa,") error. retry after 3 seconds. ")).call(Yi,new Date().toTimeString())),Ia(function(){so(Wr,Kn,ro-1,Hn)},3500)):(gr.removeFileInfo(Wr.fileKey),No.status?eo.onError(new jn(gi(Qo=gi(Xi="uploadTrunk(".concat(Sa,") error: ")).call(Xi,No.status," ")).call(Qo,No.statusText))):eo.onError(new jn("uploadTrunk(".concat(Sa,") error. no Error Code. Please check your network"))))}},No.open("post",Sa+"?offset=".concat(Kn)+"&complete=".concat(Co)+"&context=".concat(So)+"&version=".concat(eo.version)),No.setRequestHeader("x-nos-token",Fn.token),Wr.file.type&&No.setRequestHeader("content-type",Wr.file.type),No.timeout=eo.trunkUploadTimeout,typeof FileReader<"u"){var $o=new FileReader;$o.addEventListener("load",function(Wo){var Ta;!((Ta=Wo==null?void 0:Wo.target)===null||Ta===void 0)&&Ta.result?No.send(Wo.target.result):eo.onError(new jn("Read ArrayBuffer failed"))}),$o.addEventListener("error",function(Wo){var Ta=Wo.target.error;eo.onError(new jn("Read ArrayBuffer error. ".concat(Ta.toString()),Ta.code))}),$o.readAsArrayBuffer(lo.call(Wr.file,Kn,aa))}else No.send(lo.call(Wr.file,Kn,aa))}};function $n(so,Wr){for(var Kn=0;Kn<Wr.length;Kn++){var ro=Wr[Kn];ro.enumerable=ro.enumerable||!1,ro.configurable=!0,"value"in ro&&(ro.writable=!0),bc(so,ro.key,ro)}}var ho=function(){function so(Kn,ro,Hn){(function(Fn,eo){if(!(Fn instanceof eo))throw new TypeError("Cannot call a class as a function")})(this,so),this.uploadState="paused",this.config=Hn,this.file=Kn,this.param=ro,this.fileKey=gr.initFile(ro,Kn,this.config.enableCache),this.resume()}var Wr;return(Wr=[{key:"resume",value:function(){var ro=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Hn=this.config;Bn(this,Hn.retryCount,function(Fn){Gn(ro,Fn,Hn.retryCount,function(){ro.setUploadState("ended"),typeof Hn.onComplete=="function"&&Hn.onComplete(ro.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),gr.removeFileInfo(this.fileKey),this.config.onError(new jn("Upload Aborted",10499))}},{key:"setUploadState",value:function(ro){ro!==this.uploadState&&(this.uploadState=ro)}},{key:"setContext",value:function(ro){gr.setUploadContext(this.fileKey,ro,this.config.enableCache),this.param.ctx=ro}},{key:"setComplete",value:function(){gr.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&$n(so.prototype,Wr),so}(),co={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(Wr){var Kn=gr.getFileKey(Wr),ro=gr.getFileInfo(Kn);return ro===null?null:_s()-ro.modifyAt>co.expireTime?(gr.removeFileInfo(Kn),null):{uploadInfo:Un({bucketName:ro.bucket,objectName:ro.obj,token:ro.token,ctx:ro.ctx},ro.payload?{payload:ro.payload}:{}),complete:ro.end}},setMaxFileCache:function(Wr){co.maxFileCache=Wr},setExpireTime:function(Wr){co.expireTime=Wr},printCaches:function(){for(var Wr=0,Kn=ka(localStorage);Wr<Kn.length;Wr++){var ro=Kn[Wr],Hn=gr.getFileInfo(ro);Hn&&console.log(Hn,"modifiedAt",new Date(Hn.modifyAt).toTimeString())}},createConfig:function(Wr){return new Ne(Wr)},createTask:function(Wr,Kn,ro){return new ho(Wr,Kn,ro)}},oa=co;return Oe.default}()}),Ql=g(function(pe,Ie){pe.exports=function(){function ze(nr){if(nr){var kt,dr="";return Qn(kt=ka(nr)).call(kt,function(gr,Ar){dr+=Ar===0?"?":"&",dr+=gr+"="+nr[gr]}),dr}return""}function Oe(nr,kt,dr,gr){return Error.call(this,dr),this.source=nr,this.code=kt,this.desc=dr,this.detail=gr||{},this}function Ne(nr,kt){var dr=Cs(kt.prototype);dr.constructor=nr,nr.prototype=dr}function At(nr,kt){kt===void 0&&(kt={dataType:"json",method:"GET",timeout:5e3});var dr=kt.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",gr=kt.method==="GET"?ze(kt.params):"";return new _o(function(Ar,Rr){if(window.XMLHttpRequest){var Ur,Dr=new XMLHttpRequest;if(Dr.onreadystatechange=function(){if(Dr.readyState===4)if(Dr.status===200){try{Ur=JSON.parse(Dr.response||"{}")}catch{Ur=Dr.response}Ar({status:Dr.status,data:Ur})}else Rr(new Oe(1,Dr.status,Dr.statusText))},Dr.open(kt.method,""+nr+gr),Dr.timeout=kt.timeout||5e3,Dr.setRequestHeader("Content-Type",dr),kt.headers)for(var Jr in kt.headers)Dr.setRequestHeader(Jr,kt.headers[Jr]);Dr.ontimeout=function(kn){Rr(new Oe(1,408,kn&&kn.message?kn.message:"request timeout"))},Dr.send(Ao(kt.data))}else Rr(new Oe(2,10400,"request no suppout"))})}return Ne(Oe,Error),At}()}),Iu=console,VC={setLogger:function(Ie){Iu=Ie},platform:"BROWSER",localStorage:window.localStorage,request:Ql,WebSocket:window.WebSocket,uploadFile:function(Ie){return Hr(this,void 0,void 0,wr.mark(function ze(){var Oe,Ne,At,nr,kt,dr;return wr.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:if(Ie.fileInput||Ie.file){Ar.next=2;break}throw new Error("File not exist");case 2:if(!Ie.file){Ar.next=6;break}nr=Ie.file,Ar.next=20;break;case 6:if(typeof Ie.fileInput!="string"){Ar.next=15;break}if(!((kt=document.getElementById(Ie.fileInput))&&kt.files&&kt.files[0])){Ar.next=12;break}nr=kt.files[0],Ar.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:Ar.next=20;break;case 15:if(!(Ie.fileInput&&Ie.fileInput.files&&Ie.fileInput.files[0])){Ar.next=19;break}nr=Ie.fileInput.files[0],Ar.next=20;break;case 19:throw new Error("Can not get file from fileInput "+Ie.fileInput);case 20:if(!(Ie.maxSize&&nr.size>Ie.maxSize)){Ar.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+Ie.maxSize+", get "+nr.size);case 22:return Ar.next=24,new _o(function(Rr,Ur){var Dr=Sb.createConfig({enableCache:!1,directUploadAddr:Ie.chunkUploadHost,onError:function(Tn){Ur(Tn)},onProgress:Ie.onUploadProgress||function(){},onComplete:function(Tn){Rr(Tn)}}),Jr=Sb.createTask(nr,{bucketName:Ie.nosToken.bucket,objectName:decodeURIComponent(Ie.nosToken.objectName),token:Ie.nosToken.token},Dr);try{Ie.onUploadStart&&Ie.onUploadStart(Jr)}catch(kn){Iu.error("Adapter uploadFile: options.onUploadStart error",kn&&kn.message),Jr.abort(),Ur(kn)}});case 24:return(dr=Ar.sent).name=nr.name,dr.size=nr.size,dr.type=nr.type,dr.ext=bb(Oe=dr.name).call(Oe,".")>-1?Lo(Ne=dr.name).call(Ne,bb(At=dr.name).call(At,".")+1).toLowerCase():"",Ar.abrupt("return",dr);case 30:case"end":return Ar.stop()}},ze)}))},getSystemInfo:function(){var Ie,ze;return{os:((Ie=il.os)===null||Ie===void 0?void 0:Ie.family)||"",osVer:((ze=il.os)===null||ze===void 0?void 0:ze.version)||"",browser:il.name||"",browserVer:il.version||"",hostEnv:"BROWSER",hostEnvVer:il.version||"",hostInfo:il.ua||""}}};return bp.setAdapters(VC),bp})})(QCHAT_BROWSER_SDK);var QCHAT_BROWSER_SDKExports=QCHAT_BROWSER_SDK.exports;const QChatSDK=getDefaultExportFromCjs(QCHAT_BROWSER_SDKExports);var NIM_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(xe){return xe&&xe.__esModule&&Object.prototype.hasOwnProperty.call(xe,"default")?xe.default:xe}function g(xe){var he={exports:{}};return xe(he,he.exports),he.exports}var y,i,k=n(g(function(xe){xe.exports=function(Fe){if(Fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Fe},xe.exports.__esModule=!0,xe.exports.default=xe.exports})),$=function(xe){return xe&&xe.Math==Math&&xe},L=$(typeof globalThis=="object"&&globalThis)||$(typeof window=="object"&&window)||$(typeof self=="object"&&self)||$(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),V=function(xe){try{return!!xe()}catch{return!0}},z=!V(function(){var xe=(function(){}).bind();return typeof xe!="function"||xe.hasOwnProperty("prototype")}),re=Function.prototype,ie=re.apply,ue=re.call,le=typeof Reflect=="object"&&Reflect.apply||(z?ue.bind(ie):function(){return ue.apply(ie,arguments)}),oe=Function.prototype,ae=oe.bind,Ue=oe.call,de=z&&ae.bind(Ue,Ue),_e=z?function(xe){return xe&&de(xe)}:function(xe){return xe&&function(){return Ue.apply(xe,arguments)}},Ve=function(xe){return typeof xe=="function"},$e=!V(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Lt=Function.prototype.call,jt=z?Lt.bind(Lt):function(){return Lt.apply(Lt,arguments)},Et={}.propertyIsEnumerable,ir=Object.getOwnPropertyDescriptor,ur={f:ir&&!Et.call({1:2},1)?function(he){var Fe=ir(this,he);return!!Fe&&Fe.enumerable}:Et},Dt=function(xe,he){return{enumerable:!(1&xe),configurable:!(2&xe),writable:!(4&xe),value:he}},lr=_e({}.toString),sr=_e("".slice),er=function(xe){return sr(lr(xe),8,-1)},cr=Object,or=_e("".split),hr=V(function(){return!cr("z").propertyIsEnumerable(0)})?function(xe){return er(xe)=="String"?or(xe,""):cr(xe)}:cr,pr=function(xe){return xe==null},Tr=TypeError,Pr=function(xe){if(pr(xe))throw Tr("Can't call method on "+xe);return xe},_r=function(xe){return hr(Pr(xe))},Mr=typeof document=="object"&&document.all,rr=Mr===void 0&&Mr!==void 0?function(xe){return typeof xe=="object"?xe!==null:Ve(xe)||xe===Mr}:function(xe){return typeof xe=="object"?xe!==null:Ve(xe)},kr={},Er=function(xe){return Ve(xe)?xe:void 0},xr=function(xe,he){return arguments.length<2?Er(kr[xe])||Er(L[xe]):kr[xe]&&kr[xe][he]||L[xe]&&L[xe][he]},vr=_e({}.isPrototypeOf),Ir=xr("navigator","userAgent")||"",Or=L.process,Cr=L.Deno,yr=Or&&Or.versions||Cr&&Cr.version,fr=yr&&yr.v8;fr&&(i=(y=fr.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!i&&Ir&&(!(y=Ir.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=Ir.match(/Chrome\/(\d+)/))&&(i=+y[1]);var Sr,Br=i,$r=!!Object.getOwnPropertySymbols&&!V(function(){var xe=Symbol();return!String(xe)||!(Object(xe)instanceof Symbol)||!Symbol.sham&&Br&&Br<41}),Lr=$r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Gr=Object,qr=Lr?function(xe){return typeof xe=="symbol"}:function(xe){var he=xr("Symbol");return Ve(he)&&vr(he.prototype,Gr(xe))},Yr=String,bn=function(xe){try{return Yr(xe)}catch{return"Object"}},wn=TypeError,Xr=function(xe){if(Ve(xe))return xe;throw wn(bn(xe)+" is not a function")},qn=function(xe,he){var Fe=xe[he];return pr(Fe)?void 0:Xr(Fe)},Zr=TypeError,Nn=Object.defineProperty,Qr="__core-js_shared__",Mn=L[Qr]||function(xe,he){try{Nn(L,xe,{value:he,configurable:!0,writable:!0})}catch{L[xe]=he}return he}(Qr,{}),Ln=g(function(xe){(xe.exports=function(he,Fe){return Mn[he]||(Mn[he]=Fe!==void 0?Fe:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),xn=Object,Pn=function(xe){return xn(Pr(xe))},vn=_e({}.hasOwnProperty),hn=Object.hasOwn||function(he,Fe){return vn(Pn(he),Fe)},Zn=0,Oo=Math.random(),Ho=_e(1 .toString),Do=function(xe){return"Symbol("+(xe===void 0?"":xe)+")_"+Ho(++Zn+Oo,36)},Eo=Ln("wks"),Ko=L.Symbol,Ha=Ko&&Ko.for,Ts=Lr?Ko:Ko&&Ko.withoutSetter||Do,To=function(xe){if(!hn(Eo,xe)||!$r&&typeof Eo[xe]!="string"){var he="Symbol."+xe;$r&&hn(Ko,xe)?Eo[xe]=Ko[xe]:Eo[xe]=Lr&&Ha?Ha(he):Ts(he)}return Eo[xe]},Os=TypeError,to=To("toPrimitive"),ha=function(xe,he){if(!rr(xe)||qr(xe))return xe;var Fe,qe=qn(xe,to);if(qe){if(he===void 0&&(he="default"),Fe=jt(qe,xe,he),!rr(Fe)||qr(Fe))return Fe;throw Os("Can't convert object to primitive value")}return he===void 0&&(he="number"),function(Ce,Pt){var ar,tr;if(Pt==="string"&&Ve(ar=Ce.toString)&&!rr(tr=jt(ar,Ce))||Ve(ar=Ce.valueOf)&&!rr(tr=jt(ar,Ce))||Pt!=="string"&&Ve(ar=Ce.toString)&&!rr(tr=jt(ar,Ce)))return tr;throw Zr("Can't convert object to primitive value")}(xe,he)},ca=function(xe){var he=ha(xe,"string");return qr(he)?he:he+""},La=L.document,Ka=rr(La)&&rr(La.createElement),Zo=function(xe){return Ka?La.createElement(xe):{}},ko=!$e&&!V(function(){return Object.defineProperty(Zo("div"),"a",{get:function(){return 7}}).a!=7}),za=Object.getOwnPropertyDescriptor,Qa={f:$e?za:function(he,Fe){if(he=_r(he),Fe=ca(Fe),ko)try{return za(he,Fe)}catch{}if(hn(he,Fe))return Dt(!jt(ur.f,he,Fe),he[Fe])}},Hc=/#|\.prototype\./,Rs=function(xe,he){var Fe=Xn[Rn(xe)];return Fe==Na||Fe!=zo&&(Ve(he)?V(he):!!he)},Rn=Rs.normalize=function(xe){return String(xe).replace(Hc,".").toLowerCase()},Xn=Rs.data={},zo=Rs.NATIVE="N",Na=Rs.POLYFILL="P",vs=Rs,Us=_e(_e.bind),Go=function(xe,he){return Xr(xe),he===void 0?xe:z?Us(xe,he):function(){return xe.apply(he,arguments)}},Pi=$e&&V(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Ti=String,Mp=TypeError,po=function(xe){if(rr(xe))return xe;throw Mp(Ti(xe)+" is not an object")},wb=TypeError,Pu=Object.defineProperty,xb=Object.getOwnPropertyDescriptor,_b="enumerable",Ib="configurable",Eb="writable",Oa={f:$e?Pi?function(he,Fe,qe){if(po(he),Fe=ca(Fe),po(qe),typeof he=="function"&&Fe==="prototype"&&"value"in qe&&Eb in qe&&!qe.writable){var Ce=xb(he,Fe);Ce&&Ce.writable&&(he[Fe]=qe.value,qe={configurable:Ib in qe?qe.configurable:Ce.configurable,enumerable:_b in qe?qe.enumerable:Ce.enumerable,writable:!1})}return Pu(he,Fe,qe)}:Pu:function(he,Fe,qe){if(po(he),Fe=ca(Fe),po(qe),ko)try{return Pu(he,Fe,qe)}catch{}if("get"in qe||"set"in qe)throw wb("Accessors not supported");return"value"in qe&&(he[Fe]=qe.value),he}},va=$e?function(xe,he,Fe){return Oa.f(xe,he,Dt(1,Fe))}:function(xe,he,Fe){return xe[he]=Fe,xe},Pb=Qa.f,Ab=function(xe){var he=function(Fe,qe,Ce){if(this instanceof he){switch(arguments.length){case 0:return new xe;case 1:return new xe(Fe);case 2:return new xe(Fe,qe)}return new xe(Fe,qe,Ce)}return le(xe,this,arguments)};return he.prototype=xe.prototype,he},_n=function(xe,he){var Fe,qe,Ce,Pt,ar,tr,mr,br,Nr=xe.target,Fr=xe.global,jr=xe.stat,Vr=xe.proto,Kr=Fr?L:jr?L[Nr]:(L[Nr]||{}).prototype,Sn=Fr?kr:kr[Nr]||va(kr,Nr,{})[Nr],Cn=Sn.prototype;for(Ce in he)Fe=!vs(Fr?Ce:Nr+(jr?".":"#")+Ce,xe.forced)&&Kr&&hn(Kr,Ce),ar=Sn[Ce],Fe&&(tr=xe.dontCallGetSet?(br=Pb(Kr,Ce))&&br.value:Kr[Ce]),Pt=Fe&&tr?tr:he[Ce],Fe&&typeof ar==typeof Pt||(mr=xe.bind&&Fe?Go(Pt,L):xe.wrap&&Fe?Ab(Pt):Vr&&Ve(Pt)?_e(Pt):Pt,(xe.sham||Pt&&Pt.sham||ar&&ar.sham)&&va(mr,"sham",!0),va(Sn,Ce,mr),Vr&&(hn(kr,qe=Nr+"Prototype")||va(kr,qe,{}),va(kr[qe],Ce,Pt),xe.real&&Cn&&!Cn[Ce]&&va(Cn,Ce,Pt)))},Nb=Math.ceil,Ob=Math.floor,Rb=Math.trunc||function(he){var Fe=+he;return(Fe>0?Ob:Nb)(Fe)},uc=function(xe){var he=+xe;return he!=he||he===0?0:Rb(he)},Bb=Math.max,Fb=Math.min,Ai=function(xe,he){var Fe=uc(xe);return Fe<0?Bb(Fe+he,0):Fb(Fe,he)},$b=Math.min,Za=function(xe){return(he=xe.length)>0?$b(uc(he),9007199254740991):0;var he},Bf=function(xe){return function(he,Fe,qe){var Ce,Pt=_r(he),ar=Za(Pt),tr=Ai(qe,ar);if(xe&&Fe!=Fe){for(;ar>tr;)if((Ce=Pt[tr++])!=Ce)return!0}else for(;ar>tr;tr++)if((xe||tr in Pt)&&Pt[tr]===Fe)return xe||tr||0;return!xe&&-1}},Au={includes:Bf(!0),indexOf:Bf(!1)},Ni={},Lb=Au.indexOf,Ff=_e([].push),$f=function(xe,he){var Fe,qe=_r(xe),Ce=0,Pt=[];for(Fe in qe)!hn(Ni,Fe)&&hn(qe,Fe)&&Ff(Pt,Fe);for(;he.length>Ce;)hn(qe,Fe=he[Ce++])&&(~Lb(Pt,Fe)||Ff(Pt,Fe));return Pt},dl=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qs=Object.keys||function(he){return $f(he,dl)},jb=$e&&!Pi?Object.defineProperties:function(he,Fe){po(he);for(var qe,Ce=_r(Fe),Pt=qs(Fe),ar=Pt.length,tr=0;ar>tr;)Oa.f(he,qe=Pt[tr++],Ce[qe]);return he},Lf={f:jb},Nu=xr("document","documentElement"),jf=Ln("keys"),pl=function(xe){return jf[xe]||(jf[xe]=Do(xe))},Df=pl("IE_PROTO"),Ou=function(){},Uf=function(xe){return"<script>"+xe+"<\/script>"},qf=function(xe){xe.write(Uf("")),xe.close();var he=xe.parentWindow.Object;return xe=null,he},fl=function(){try{Sr=new ActiveXObject("htmlfile")}catch{}var xe,he;fl=typeof document<"u"?document.domain&&Sr?qf(Sr):((he=Zo("iframe")).style.display="none",Nu.appendChild(he),he.src="javascript:",(xe=he.contentWindow.document).open(),xe.write(Uf("document.F=Object")),xe.close(),xe.F):qf(Sr);for(var Fe=dl.length;Fe--;)delete fl.prototype[dl[Fe]];return fl()};Ni[Df]=!0;var es=Object.create||function(he,Fe){var qe;return he!==null?(Ou.prototype=po(he),qe=new Ou,Ou.prototype=null,qe[Df]=he):qe=fl(),Fe===void 0?qe:Lf.f(qe,Fe)};_n({target:"Object",stat:!0,sham:!$e},{create:es});var Db=kr.Object,Cs=function(he,Fe){return Db.create(he,Fe)},Ub=String,qb=TypeError,dc=Object.setPrototypeOf||("__proto__"in{}?function(){var xe,he=!1,Fe={};try{(xe=_e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(Fe,[]),he=Fe instanceof Array}catch{}return function(Ce,Pt){return po(Ce),function(ar){if(typeof ar=="object"||Ve(ar))return ar;throw qb("Can't set "+Ub(ar)+" as a prototype")}(Pt),he?xe(Ce,Pt):Ce.__proto__=Pt,Ce}}():void 0);_n({target:"Object",stat:!0},{setPrototypeOf:dc});var si=kr.Object.setPrototypeOf,Vs=_e([].slice),Vf=Function,Vb=_e([].concat),Hb=_e([].join),Ru={},zb=function(xe,he,Fe){if(!hn(Ru,he)){for(var qe=[],Ce=0;Ce<he;Ce++)qe[Ce]="a["+Ce+"]";Ru[he]=Vf("C,a","return new C("+Hb(qe,",")+")")}return Ru[he](xe,Fe)},Bu=z?Vf.bind:function(he){var Fe=Xr(this),qe=Fe.prototype,Ce=Vs(arguments,1),Pt=function(){var tr=Vb(Ce,Vs(arguments));return this instanceof Pt?zb(Fe,tr.length,tr):Fe.apply(he,tr)};return rr(qe)&&(Pt.prototype=qe),Pt};_n({target:"Function",proto:!0,forced:Function.bind!==Bu},{bind:Bu});var sa=function(xe){return kr[xe+"Prototype"]},Wb=sa("Function").bind,Fu=Function.prototype,Xo=function(xe){var he=xe.bind;return xe===Fu||vr(Fu,xe)&&he===Fu.bind?Wb:he},$u=g(function(xe){function he(Fe,qe){var Ce;return xe.exports=he=si?Xo(Ce=si).call(Ce):function(ar,tr){return ar.__proto__=tr,ar},xe.exports.__esModule=!0,xe.exports.default=xe.exports,he(Fe,qe)}xe.exports=he,xe.exports.__esModule=!0,xe.exports.default=xe.exports}),ea=n(g(function(xe){xe.exports=function(Fe,qe){Fe.prototype=Cs(qe.prototype),Fe.prototype.constructor=Fe,$u(Fe,qe)},xe.exports.__esModule=!0,xe.exports.default=xe.exports})),Ms=Array.isArray||function(he){return er(he)=="Array"},Gb=TypeError,Lu=function(xe){if(xe>9007199254740991)throw Gb("Maximum allowed index exceeded");return xe},ii=function(xe,he,Fe){var qe=ca(he);qe in xe?Oa.f(xe,qe,Dt(0,Fe)):xe[qe]=Fe},Hf={};Hf[To("toStringTag")]="z";var ju=String(Hf)==="[object z]",Kb=To("toStringTag"),Qb=Object,Jb=er(function(){return arguments}())=="Arguments",ci=ju?er:function(xe){var he,Fe,qe;return xe===void 0?"Undefined":xe===null?"Null":typeof(Fe=function(Ce,Pt){try{return Ce[Pt]}catch{}}(he=Qb(xe),Kb))=="string"?Fe:Jb?er(he):(qe=er(he))=="Object"&&Ve(he.callee)?"Arguments":qe},Yb=_e(Function.toString);Ve(Mn.inspectSource)||(Mn.inspectSource=function(xe){return Yb(xe)});var zf=Mn.inspectSource,Wf=function(){},Xb=[],Gf=xr("Reflect","construct"),Du=/^\s*(?:class|function)\b/,Zb=_e(Du.exec),e0=!Du.exec(Wf),pc=function(he){if(!Ve(he))return!1;try{return Gf(Wf,Xb,he),!0}catch{return!1}},Kf=function(he){if(!Ve(he))return!1;switch(ci(he)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return e0||!!Zb(Du,zf(he))}catch{return!0}};Kf.sham=!0;var ml=!Gf||V(function(){var xe;return pc(pc.call)||!pc(Object)||!pc(function(){xe=!0})||xe})?Kf:pc,t0=To("species"),Qf=Array,Uu=function(xe,he){return new(function(Fe){var qe;return Ms(Fe)&&(qe=Fe.constructor,(ml(qe)&&(qe===Qf||Ms(qe.prototype))||rr(qe)&&(qe=qe[t0])===null)&&(qe=void 0)),qe===void 0?Qf:qe}(xe))(he===0?0:he)},r0=To("species"),fc=function(xe){return Br>=51||!V(function(){var he=[];return(he.constructor={})[r0]=function(){return{foo:1}},he[xe](Boolean).foo!==1})},Jf=To("isConcatSpreadable"),n0=Br>=51||!V(function(){var xe=[];return xe[Jf]=!1,xe.concat()[0]!==xe}),o0=fc("concat"),a0=function(xe){if(!rr(xe))return!1;var he=xe[Jf];return he!==void 0?!!he:Ms(xe)};_n({target:"Array",proto:!0,arity:1,forced:!n0||!o0},{concat:function(he){var Fe,qe,Ce,Pt,ar,tr=Pn(this),mr=Uu(tr,0),br=0;for(Fe=-1,Ce=arguments.length;Fe<Ce;Fe++)if(a0(ar=Fe===-1?tr:arguments[Fe]))for(Pt=Za(ar),Lu(br+Pt),qe=0;qe<Pt;qe++,br++)qe in ar&&ii(mr,br,ar[qe]);else Lu(br+1),ii(mr,br++,ar);return mr.length=br,mr}});var gl,mc,hl,s0=String,rs=function(xe){if(ci(xe)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return s0(xe)},i0=dl.concat("length","prototype"),gc={f:Object.getOwnPropertyNames||function(he){return $f(he,i0)}},c0=Array,l0=Math.max,qu=function(xe,he,Fe){for(var qe=Za(xe),Ce=Ai(he,qe),Pt=Ai(Fe===void 0?qe:Fe,qe),ar=c0(l0(Pt-Ce,0)),tr=0;Ce<Pt;Ce++,tr++)ii(ar,tr,xe[Ce]);return ar.length=tr,ar},Yf=gc.f,Xf=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Vu={f:function(he){return Xf&&er(he)=="Window"?function(Fe){try{return Yf(Fe)}catch{return qu(Xf)}}(he):Yf(_r(he))}},hc={f:Object.getOwnPropertySymbols},Hs=function(xe,he,Fe,qe){return qe&&qe.enumerable?xe[he]=Fe:va(xe,he,Fe),xe},Hu={f:To},u0=Oa.f,qo=function(xe){var he=kr.Symbol||(kr.Symbol={});hn(he,xe)||u0(he,xe,{value:Hu.f(xe)})},Zf=function(){var xe=xr("Symbol"),he=xe&&xe.prototype,Fe=he&&he.valueOf,qe=To("toPrimitive");he&&!he[qe]&&Hs(he,qe,function(Ce){return jt(Fe,this)},{arity:1})},d0=ju?{}.toString:function(){return"[object "+ci(this)+"]"},p0=Oa.f,em=To("toStringTag"),li=function(xe,he,Fe,qe){if(xe){var Ce=Fe?xe:xe.prototype;hn(Ce,em)||p0(Ce,em,{configurable:!0,value:he}),qe&&!ju&&va(Ce,"toString",d0)}},tm=L.WeakMap,f0=Ve(tm)&&/native code/.test(String(tm)),rm="Object already initialized",zu=L.TypeError,m0=L.WeakMap;if(f0||Mn.state){var ui=Mn.state||(Mn.state=new m0),g0=_e(ui.get),nm=_e(ui.has),h0=_e(ui.set);gl=function(xe,he){if(nm(ui,xe))throw zu(rm);return he.facade=xe,h0(ui,xe,he),he},mc=function(xe){return g0(ui,xe)||{}},hl=function(xe){return nm(ui,xe)}}else{var Oi=pl("state");Ni[Oi]=!0,gl=function(xe,he){if(hn(xe,Oi))throw zu(rm);return he.facade=xe,va(xe,Oi,he),he},mc=function(xe){return hn(xe,Oi)?xe[Oi]:{}},hl=function(xe){return hn(xe,Oi)}}var ts={set:gl,get:mc,has:hl,enforce:function(xe){return hl(xe)?mc(xe):gl(xe,{})},getterFor:function(xe){return function(he){var Fe;if(!rr(he)||(Fe=mc(he)).type!==xe)throw zu("Incompatible receiver, "+xe+" required");return Fe}}},om=_e([].push),zs=function(xe){var he=xe==1,Fe=xe==2,qe=xe==3,Ce=xe==4,Pt=xe==6,ar=xe==7,tr=xe==5||Pt;return function(mr,br,Nr,Fr){for(var jr,Vr,Kr=Pn(mr),Sn=hr(Kr),Cn=Go(br,Nr),En=Za(Sn),In=0,An=Fr||Uu,zn=he?An(mr,En):Fe||ar?An(mr,0):void 0;En>In;In++)if((tr||In in Sn)&&(Vr=Cn(jr=Sn[In],In,Kr),xe))if(he)zn[In]=Vr;else if(Vr)switch(xe){case 3:return!0;case 5:return jr;case 6:return In;case 2:om(zn,jr)}else switch(xe){case 4:return!1;case 7:om(zn,jr)}return Pt?-1:qe||Ce?Ce:zn}},Ws={forEach:zs(0),map:zs(1),filter:zs(2),some:zs(3),every:zs(4),find:zs(5),findIndex:zs(6),filterReject:zs(7)},vl=Ws.forEach,Ra=pl("hidden"),yl="Symbol",v0=ts.set,am=ts.getterFor(yl),as=Object.prototype,di=L.Symbol,vc=di&&di.prototype,y0=L.TypeError,Wu=L.QObject,sm=Qa.f,Gs=Oa.f,im=Vu.f,b0=ur.f,cm=_e([].push),ks=Ln("symbols"),yc=Ln("op-symbols"),S0=Ln("wks"),Gu=!Wu||!Wu.prototype||!Wu.prototype.findChild,Ku=$e&&V(function(){return es(Gs({},"a",{get:function(){return Gs(this,"a",{value:7}).a}})).a!=7})?function(xe,he,Fe){var qe=sm(as,he);qe&&delete as[he],Gs(xe,he,Fe),qe&&xe!==as&&Gs(as,he,qe)}:Gs,Qu=function(xe,he){var Fe=ks[xe]=es(vc);return v0(Fe,{type:yl,tag:xe,description:he}),$e||(Fe.description=he),Fe},bl=function(he,Fe,qe){he===as&&bl(yc,Fe,qe),po(he);var Ce=ca(Fe);return po(qe),hn(ks,Ce)?(qe.enumerable?(hn(he,Ra)&&he[Ra][Ce]&&(he[Ra][Ce]=!1),qe=es(qe,{enumerable:Dt(0,!1)})):(hn(he,Ra)||Gs(he,Ra,Dt(1,{})),he[Ra][Ce]=!0),Ku(he,Ce,qe)):Gs(he,Ce,qe)},Ju=function(he,Fe){po(he);var qe=_r(Fe),Ce=qs(qe).concat(pm(qe));return vl(Ce,function(Pt){$e&&!jt(lm,qe,Pt)||bl(he,Pt,qe[Pt])}),he},lm=function(he){var Fe=ca(he),qe=jt(b0,this,Fe);return!(this===as&&hn(ks,Fe)&&!hn(yc,Fe))&&(!(qe||!hn(this,Fe)||!hn(ks,Fe)||hn(this,Ra)&&this[Ra][Fe])||qe)},um=function(he,Fe){var qe=_r(he),Ce=ca(Fe);if(qe!==as||!hn(ks,Ce)||hn(yc,Ce)){var Pt=sm(qe,Ce);return!Pt||!hn(ks,Ce)||hn(qe,Ra)&&qe[Ra][Ce]||(Pt.enumerable=!0),Pt}},dm=function(he){var Fe=im(_r(he)),qe=[];return vl(Fe,function(Ce){hn(ks,Ce)||hn(Ni,Ce)||cm(qe,Ce)}),qe},pm=function(xe){var he=xe===as,Fe=im(he?yc:_r(xe)),qe=[];return vl(Fe,function(Ce){!hn(ks,Ce)||he&&!hn(as,Ce)||cm(qe,ks[Ce])}),qe};$r||(di=function(){if(vr(vc,this))throw y0("Symbol is not a constructor");var he=arguments.length&&arguments[0]!==void 0?rs(arguments[0]):void 0,Fe=Do(he),qe=function(Ce){this===as&&jt(qe,yc,Ce),hn(this,Ra)&&hn(this[Ra],Fe)&&(this[Ra][Fe]=!1),Ku(this,Fe,Dt(1,Ce))};return $e&&Gu&&Ku(as,Fe,{configurable:!0,set:qe}),Qu(Fe,he)},vc=di.prototype,Hs(vc,"toString",function(){return am(this).tag}),Hs(di,"withoutSetter",function(xe){return Qu(Do(xe),xe)}),ur.f=lm,Oa.f=bl,Lf.f=Ju,Qa.f=um,gc.f=Vu.f=dm,hc.f=pm,Hu.f=function(xe){return Qu(To(xe),xe)},$e&&Gs(vc,"description",{configurable:!0,get:function(){return am(this).description}})),_n({global:!0,constructor:!0,wrap:!0,forced:!$r,sham:!$r},{Symbol:di}),vl(qs(S0),function(xe){qo(xe)}),_n({target:yl,stat:!0,forced:!$r},{useSetter:function(){Gu=!0},useSimple:function(){Gu=!1}}),_n({target:"Object",stat:!0,forced:!$r,sham:!$e},{create:function(he,Fe){return Fe===void 0?es(he):Ju(es(he),Fe)},defineProperty:bl,defineProperties:Ju,getOwnPropertyDescriptor:um}),_n({target:"Object",stat:!0,forced:!$r},{getOwnPropertyNames:dm}),Zf(),li(di,yl),Ni[Ra]=!0;var fm=$r&&!!Symbol.for&&!!Symbol.keyFor,Yu=Ln("string-to-symbol-registry"),T0=Ln("symbol-to-string-registry");_n({target:"Symbol",stat:!0,forced:!fm},{for:function(xe){var he=rs(xe);if(hn(Yu,he))return Yu[he];var Fe=xr("Symbol")(he);return Yu[he]=Fe,T0[Fe]=he,Fe}});var mm=Ln("symbol-to-string-registry");_n({target:"Symbol",stat:!0,forced:!fm},{keyFor:function(he){if(!qr(he))throw TypeError(bn(he)+" is not a symbol");if(hn(mm,he))return mm[he]}});var Ks=xr("JSON","stringify"),Sl=_e(/./.exec),gm=_e("".charAt),C0=_e("".charCodeAt),M0=_e("".replace),k0=_e(1 .toString),w0=/[\uD800-\uDFFF]/g,hm=/^[\uD800-\uDBFF]$/,vm=/^[\uDC00-\uDFFF]$/,ym=!$r||V(function(){var xe=xr("Symbol")();return Ks([xe])!="[null]"||Ks({a:xe})!="{}"||Ks(Object(xe))!="{}"}),bm=V(function(){return Ks("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ks("\uDEAD")!=='"\\udead"'}),x0=function(xe,he){var Fe=Vs(arguments),qe=he;if((rr(he)||xe!==void 0)&&!qr(xe))return Ms(he)||(he=function(Ce,Pt){if(Ve(qe)&&(Pt=jt(qe,this,Ce,Pt)),!qr(Pt))return Pt}),Fe[1]=he,le(Ks,null,Fe)},_0=function(xe,he,Fe){var qe=gm(Fe,he-1),Ce=gm(Fe,he+1);return Sl(hm,xe)&&!Sl(vm,Ce)||Sl(vm,xe)&&!Sl(hm,qe)?"\\u"+k0(C0(xe,0),16):xe};Ks&&_n({target:"JSON",stat:!0,arity:3,forced:ym||bm},{stringify:function(he,Fe,qe){var Ce=Vs(arguments),Pt=le(ym?x0:Ks,null,Ce);return bm&&typeof Pt=="string"?M0(Pt,w0,_0):Pt}});var I0=!$r||V(function(){hc.f(1)});_n({target:"Object",stat:!0,forced:I0},{getOwnPropertySymbols:function(he){var Fe=hc.f;return Fe?Fe(Pn(he)):[]}}),qo("asyncIterator"),qo("hasInstance"),qo("isConcatSpreadable"),qo("iterator"),qo("match"),qo("matchAll"),qo("replace"),qo("search"),qo("species"),qo("split"),qo("toPrimitive"),Zf(),qo("toStringTag"),li(xr("Symbol"),"Symbol"),qo("unscopables"),li(L.JSON,"JSON",!0);var Qs,Sm,Tm,E0=kr.Symbol,ws={},Cm=Function.prototype,P0=$e&&Object.getOwnPropertyDescriptor,Xu=hn(Cm,"name"),A0={EXISTS:Xu,PROPER:Xu&&(function(){}).name==="something",CONFIGURABLE:Xu&&(!$e||$e&&P0(Cm,"name").configurable)},Mm=!V(function(){function xe(){}return xe.prototype.constructor=null,Object.getPrototypeOf(new xe)!==xe.prototype}),km=pl("IE_PROTO"),Zu=Object,N0=Zu.prototype,Ri=Mm?Zu.getPrototypeOf:function(xe){var he=Pn(xe);if(hn(he,km))return he[km];var Fe=he.constructor;return Ve(Fe)&&he instanceof Fe?Fe.prototype:he instanceof Zu?N0:null},ed=To("iterator"),wm=!1;[].keys&&("next"in(Tm=[].keys())?(Sm=Ri(Ri(Tm)))!==Object.prototype&&(Qs=Sm):wm=!0);var O0=!rr(Qs)||V(function(){var xe={};return Qs[ed].call(xe)!==xe});Qs=O0?{}:es(Qs),Ve(Qs[ed])||Hs(Qs,ed,function(){return this});var xm={IteratorPrototype:Qs,BUGGY_SAFARI_ITERATORS:wm},R0=xm.IteratorPrototype,B0=function(){return this},F0=A0.PROPER,Tl=xm.BUGGY_SAFARI_ITERATORS,td=To("iterator"),_m="keys",Cl="values",Im="entries",$0=function(){return this},rd=function(xe,he,Fe,qe,Ce,Pt,ar){(function(En,In,An,zn){var yo=In+" Iterator";En.prototype=es(R0,{next:Dt(+!zn,An)}),li(En,yo,!1,!0),ws[yo]=B0})(Fe,he,qe);var tr,mr,br,Nr=function(En){if(En===Ce&&Sn)return Sn;if(!Tl&&En in Vr)return Vr[En];switch(En){case _m:return function(){return new Fe(this,En)};case Cl:return function(){return new Fe(this,En)};case Im:return function(){return new Fe(this,En)}}return function(){return new Fe(this)}},Fr=he+" Iterator",jr=!1,Vr=xe.prototype,Kr=Vr[td]||Vr["@@iterator"]||Ce&&Vr[Ce],Sn=!Tl&&Kr||Nr(Ce),Cn=he=="Array"&&Vr.entries||Kr;if(Cn&&(tr=Ri(Cn.call(new xe)))!==Object.prototype&&tr.next&&(li(tr,Fr,!0,!0),ws[Fr]=$0),F0&&Ce==Cl&&Kr&&Kr.name!==Cl&&(jr=!0,Sn=function(){return jt(Kr,this)}),Ce)if(mr={values:Nr(Cl),keys:Pt?Sn:Nr(_m),entries:Nr(Im)},ar)for(br in mr)(Tl||jr||!(br in Vr))&&Hs(Vr,br,mr[br]);else _n({target:he,proto:!0,forced:Tl||jr},mr);return ar&&Vr[td]!==Sn&&Hs(Vr,td,Sn,{name:Ce}),ws[he]=Sn,mr};Oa.f;var Em="Array Iterator",L0=ts.set,j0=ts.getterFor(Em);rd(Array,"Array",function(xe,he){L0(this,{type:Em,target:_r(xe),index:0,kind:he})},function(){var xe=j0(this),he=xe.target,Fe=xe.kind,qe=xe.index++;return!he||qe>=he.length?(xe.target=void 0,{value:void 0,done:!0}):Fe=="keys"?{value:qe,done:!1}:Fe=="values"?{value:he[qe],done:!1}:{value:[qe,he[qe]],done:!1}},"values"),ws.Arguments=ws.Array;var Pm=To("toStringTag");for(var nd in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Am=L[nd],od=Am&&Am.prototype;od&&ci(od)!==Pm&&va(od,Pm,nd),ws[nd]=ws.Array}var D0=E0;qo("asyncDispose"),qo("dispose"),qo("matcher"),qo("metadataKey"),qo("observable"),qo("metadata"),qo("patternMatch"),qo("replaceAll");var ja=D0,U0=_e("".charAt),Nm=_e("".charCodeAt),q0=_e("".slice),Om=function(xe){return function(he,Fe){var qe,Ce,Pt=rs(Pr(he)),ar=uc(Fe),tr=Pt.length;return ar<0||ar>=tr?xe?"":void 0:(qe=Nm(Pt,ar))<55296||qe>56319||ar+1===tr||(Ce=Nm(Pt,ar+1))<56320||Ce>57343?xe?U0(Pt,ar):qe:xe?q0(Pt,ar,ar+2):Ce-56320+(qe-55296<<10)+65536}},V0={codeAt:Om(!1),charAt:Om(!0)}.charAt,Rm="String Iterator",H0=ts.set,z0=ts.getterFor(Rm);rd(String,"String",function(xe){H0(this,{type:Rm,string:rs(xe),index:0})},function(){var he,Fe=z0(this),qe=Fe.string,Ce=Fe.index;return Ce>=qe.length?{value:void 0,done:!0}:(he=V0(qe,Ce),Fe.index+=he.length,{value:he,done:!1})});var Bm=Hu.f("iterator"),W0=g(function(xe){function he(Fe){return xe.exports=he=typeof ja=="function"&&typeof Bm=="symbol"?function(qe){return typeof qe}:function(qe){return qe&&typeof ja=="function"&&qe.constructor===ja&&qe!==ja.prototype?"symbol":typeof qe},xe.exports.__esModule=!0,xe.exports.default=xe.exports,he(Fe)}xe.exports=he,xe.exports.__esModule=!0,xe.exports.default=xe.exports}),Fm=Oa.f;_n({target:"Object",stat:!0,forced:Object.defineProperty!==Fm,sham:!$e},{defineProperty:Fm});var G0=g(function(xe){var he=kr.Object,Fe=xe.exports=function(Ce,Pt,ar){return he.defineProperty(Ce,Pt,ar)};he.defineProperty.sham&&(Fe.sham=!0)}),bc=G0,K0=V(function(){Ri(1)});_n({target:"Object",stat:!0,forced:K0,sham:!Mm},{getPrototypeOf:function(he){return Ri(Pn(he))}});var pi=kr.Object.getPrototypeOf,fi=function(xe,he){var Fe=[][xe];return!!Fe&&V(function(){Fe.call(null,he||function(){return 1},1)})},Q0=Ws.forEach,$m=fi("forEach")?[].forEach:function(he){return Q0(this,he,arguments.length>1?arguments[1]:void 0)};_n({target:"Array",proto:!0,forced:[].forEach!=$m},{forEach:$m});var J0=sa("Array").forEach,ad=Array.prototype,Y0={DOMTokenList:!0,NodeList:!0},Qn=function(xe){var he=xe.forEach;return xe===ad||vr(ad,xe)&&he===ad.forEach||hn(Y0,ci(xe))?J0:he},X0=_e([].concat),Z0=xr("Reflect","ownKeys")||function(he){var Fe=gc.f(po(he)),qe=hc.f;return qe?X0(Fe,qe(he)):Fe},Lm=Error,e1=_e("".replace),t1=String(Lm("zxcasd").stack),jm=/\n\s*at [^:]*:[^\n]*/,r1=jm.test(t1),n1=function(xe,he){if(r1&&typeof xe=="string"&&!Lm.prepareStackTrace)for(;he--;)xe=e1(xe,jm,"");return xe},o1=function(xe,he){rr(he)&&"cause"in he&&va(xe,"cause",he.cause)},a1=To("iterator"),s1=Array.prototype,Dm=function(xe){return xe!==void 0&&(ws.Array===xe||s1[a1]===xe)},i1=To("iterator"),Ml=function(xe){if(!pr(xe))return qn(xe,i1)||qn(xe,"@@iterator")||ws[ci(xe)]},c1=TypeError,Sc=function(xe,he){var Fe=arguments.length<2?Ml(xe):he;if(Xr(Fe))return po(jt(Fe,xe));throw c1(bn(xe)+" is not iterable")},sd=function(xe,he,Fe){var qe,Ce;po(xe);try{if(!(qe=qn(xe,"return"))){if(he==="throw")throw Fe;return Fe}qe=jt(qe,xe)}catch(Pt){Ce=!0,qe=Pt}if(he==="throw")throw Fe;if(Ce)throw qe;return po(qe),Fe},l1=TypeError,kl=function(xe,he){this.stopped=xe,this.result=he},Um=kl.prototype,xo=function(xe,he,Fe){var qe,Ce,Pt,ar,tr,mr,br,Nr=Fe&&Fe.that,Fr=!(!Fe||!Fe.AS_ENTRIES),jr=!(!Fe||!Fe.IS_RECORD),Vr=!(!Fe||!Fe.IS_ITERATOR),Kr=!(!Fe||!Fe.INTERRUPTED),Sn=Go(he,Nr),Cn=function(In){return qe&&sd(qe,"normal",In),new kl(!0,In)},En=function(In){return Fr?(po(In),Kr?Sn(In[0],In[1],Cn):Sn(In[0],In[1])):Kr?Sn(In,Cn):Sn(In)};if(jr)qe=xe.iterator;else if(Vr)qe=xe;else{if(!(Ce=Ml(xe)))throw l1(bn(xe)+" is not iterable");if(Dm(Ce)){for(Pt=0,ar=Za(xe);ar>Pt;Pt++)if((tr=En(xe[Pt]))&&vr(Um,tr))return tr;return new kl(!1)}qe=Sc(xe,Ce)}for(mr=jr?xe.next:qe.next;!(br=jt(mr,qe)).done;){try{tr=En(br.value)}catch(In){sd(qe,"throw",In)}if(typeof tr=="object"&&tr&&vr(Um,tr))return tr}return new kl(!1)},u1=function(xe,he){return xe===void 0?arguments.length<2?"":he:rs(xe)},d1=!V(function(){var xe=Error("a");return!("stack"in xe)||(Object.defineProperty(xe,"stack",Dt(1,7)),xe.stack!==7)}),p1=To("toStringTag"),wl=Error,f1=[].push,Tc=function(he,Fe){var qe,Ce=arguments.length>2?arguments[2]:void 0,Pt=vr(id,this);dc?qe=dc(wl(),Pt?Ri(this):id):(qe=Pt?this:es(id),va(qe,p1,"Error")),Fe!==void 0&&va(qe,"message",u1(Fe)),d1&&va(qe,"stack",n1(qe.stack,1)),o1(qe,Ce);var ar=[];return xo(he,f1,{that:ar}),va(qe,"errors",ar),qe};dc?dc(Tc,wl):function(xe,he,Fe){for(var qe=Z0(he),Ce=Oa.f,Pt=Qa.f,ar=0;ar<qe.length;ar++){var tr=qe[ar];hn(xe,tr)||Fe&&hn(Fe,tr)||Ce(xe,tr,Pt(he,tr))}}(Tc,wl,{name:!0});var id=Tc.prototype=es(wl.prototype,{constructor:Dt(1,Tc),message:Dt(1,""),name:Dt(1,"AggregateError")});_n({global:!0,constructor:!0,arity:2},{AggregateError:Tc});var Cc,Bi,qm,cd,ds=er(L.process)=="process",Vm=To("species"),Hm=function(xe){var he=xr(xe),Fe=Oa.f;$e&&he&&!he[Vm]&&Fe(he,Vm,{configurable:!0,get:function(){return this}})},m1=TypeError,ld=function(xe,he){if(vr(he,xe))return xe;throw m1("Incorrect invocation")},g1=TypeError,xl=function(xe){if(ml(xe))return xe;throw g1(bn(xe)+" is not a constructor")},h1=To("species"),Js=function(xe,he){var Fe,qe=po(xe).constructor;return qe===void 0||pr(Fe=po(qe)[h1])?he:xl(Fe)},v1=TypeError,zm=function(xe,he){if(xe<he)throw v1("Not enough arguments");return xe},Wm=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ir),ud=L.setImmediate,dd=L.clearImmediate,y1=L.process,pd=L.Dispatch,b1=L.Function,Gm=L.MessageChannel,S1=L.String,fd=0,Mc={},T1="onreadystatechange";try{Cc=L.location}catch{}var md=function(xe){if(hn(Mc,xe)){var he=Mc[xe];delete Mc[xe],he()}},gd=function(xe){return function(){md(xe)}},Km=function(xe){md(xe.data)},Qm=function(xe){L.postMessage(S1(xe),Cc.protocol+"//"+Cc.host)};ud&&dd||(ud=function(he){zm(arguments.length,1);var Fe=Ve(he)?he:b1(he),qe=Vs(arguments,1);return Mc[++fd]=function(){le(Fe,void 0,qe)},Bi(fd),fd},dd=function(he){delete Mc[he]},ds?Bi=function(xe){y1.nextTick(gd(xe))}:pd&&pd.now?Bi=function(xe){pd.now(gd(xe))}:Gm&&!Wm?(cd=(qm=new Gm).port2,qm.port1.onmessage=Km,Bi=Go(cd.postMessage,cd)):L.addEventListener&&Ve(L.postMessage)&&!L.importScripts&&Cc&&Cc.protocol!=="file:"&&!V(Qm)?(Bi=Qm,L.addEventListener("message",Km,!1)):Bi=T1 in Zo("script")?function(xe){Nu.appendChild(Zo("script")).onreadystatechange=function(){Nu.removeChild(this),md(xe)}}:function(xe){setTimeout(gd(xe),0)});var kc,mi,wc,Fi,hd,vd,yd,Jm,Ym={set:ud,clear:dd},C1=/ipad|iphone|ipod/i.test(Ir)&&L.Pebble!==void 0,M1=/web0s(?!.*chrome)/i.test(Ir),k1=Qa.f,bd=Ym.set,Xm=L.MutationObserver||L.WebKitMutationObserver,Zm=L.document,eg=L.process,_l=L.Promise,tg=k1(L,"queueMicrotask"),rg=tg&&tg.value;rg||(kc=function(){var xe,he;for(ds&&(xe=eg.domain)&&xe.exit();mi;){he=mi.fn,mi=mi.next;try{he()}catch(Fe){throw mi?Fi():wc=void 0,Fe}}wc=void 0,xe&&xe.enter()},Wm||ds||M1||!Xm||!Zm?!C1&&_l&&_l.resolve?((yd=_l.resolve(void 0)).constructor=_l,Jm=Go(yd.then,yd),Fi=function(){Jm(kc)}):ds?Fi=function(){eg.nextTick(kc)}:(bd=Go(bd,L),Fi=function(){bd(kc)}):(hd=!0,vd=Zm.createTextNode(""),new Xm(kc).observe(vd,{characterData:!0}),Fi=function(){vd.data=hd=!hd}));var Sd=rg||function(xe){var he={fn:xe,next:void 0};wc&&(wc.next=he),mi||(mi=he,Fi()),wc=he},$i=function(xe){try{return{error:!1,value:xe()}}catch(he){return{error:!0,value:he}}},ng=function(){this.head=null,this.tail=null};ng.prototype={add:function(xe){var he={item:xe,next:null};this.head?this.tail.next=he:this.head=he,this.tail=he},get:function(){var xe=this.head;if(xe)return this.head=xe.next,this.tail===xe&&(this.tail=null),xe.item}};var Td,og,w1=ng,Ma=L.Promise,ag=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",x1=!ag&&!ds&&typeof window=="object"&&typeof document=="object",sg=Ma&&Ma.prototype,_1=To("species"),ig=!1,cg=Ve(L.PromiseRejectionEvent),I1=vs("Promise",function(){var xe=zf(Ma),he=xe!==String(Ma);if(!he&&Br===66||!sg.catch||!sg.finally)return!0;if(!Br||Br<51||!/native code/.test(xe)){var Fe=new Ma(function(Ce){Ce(1)}),qe=function(Ce){Ce(function(){},function(){})};if((Fe.constructor={})[_1]=qe,!(ig=Fe.then(function(){})instanceof qe))return!0}return!he&&(x1||ag)&&!cg}),Li={CONSTRUCTOR:I1,REJECTION_EVENT:cg,SUBCLASSING:ig},E1=TypeError,P1=function(xe){var he,Fe;this.promise=new xe(function(qe,Ce){if(he!==void 0||Fe!==void 0)throw E1("Bad Promise constructor");he=qe,Fe=Ce}),this.resolve=Xr(he),this.reject=Xr(Fe)},xs={f:function(xe){return new P1(xe)}},lg=Ym.set,Il="Promise",ug=Li.CONSTRUCTOR,A1=Li.REJECTION_EVENT,Cd=ts.getterFor(Il),N1=ts.set,O1=Ma&&Ma.prototype,xc=Ma,Md=O1,dg=L.TypeError,kd=L.document,wd=L.process,xd=xs.f,R1=xd,B1=!!(kd&&kd.createEvent&&L.dispatchEvent),pg="unhandledrejection",fg=function(xe){var he;return!(!rr(xe)||!Ve(he=xe.then))&&he},mg=function(xe,he){var Fe,qe,Ce,Pt=he.value,ar=he.state==1,tr=ar?xe.ok:xe.fail,mr=xe.resolve,br=xe.reject,Nr=xe.domain;try{tr?(ar||(he.rejection===2&&$1(he),he.rejection=1),tr===!0?Fe=Pt:(Nr&&Nr.enter(),Fe=tr(Pt),Nr&&(Nr.exit(),Ce=!0)),Fe===xe.promise?br(dg("Promise-chain cycle")):(qe=fg(Fe))?jt(qe,Fe,mr,br):mr(Fe)):br(Pt)}catch(Fr){Nr&&!Ce&&Nr.exit(),br(Fr)}},gg=function(xe,he){xe.notified||(xe.notified=!0,Sd(function(){for(var Fe,qe=xe.reactions;Fe=qe.get();)mg(Fe,xe);xe.notified=!1,he&&!xe.rejection&&F1(xe)}))},hg=function(xe,he,Fe){var qe,Ce;B1?((qe=kd.createEvent("Event")).promise=he,qe.reason=Fe,qe.initEvent(xe,!1,!0),L.dispatchEvent(qe)):qe={promise:he,reason:Fe},!A1&&(Ce=L["on"+xe])?Ce(qe):xe===pg&&function(Pt,ar){var tr=L.console;tr&&tr.error&&(arguments.length==1?tr.error(Pt):tr.error(Pt,ar))}("Unhandled promise rejection",Fe)},F1=function(xe){jt(lg,L,function(){var he,Fe=xe.facade,qe=xe.value;if(vg(xe)&&(he=$i(function(){ds?wd.emit("unhandledRejection",qe,Fe):hg(pg,Fe,qe)}),xe.rejection=ds||vg(xe)?2:1,he.error))throw he.value})},vg=function(xe){return xe.rejection!==1&&!xe.parent},$1=function(xe){jt(lg,L,function(){var he=xe.facade;ds?wd.emit("rejectionHandled",he):hg("rejectionhandled",he,xe.value)})},ji=function(xe,he,Fe){return function(qe){xe(he,qe,Fe)}},Di=function(xe,he,Fe){xe.done||(xe.done=!0,Fe&&(xe=Fe),xe.value=he,xe.state=2,gg(xe,!0))},_d=function(xe,he,Fe){if(!xe.done){xe.done=!0,Fe&&(xe=Fe);try{if(xe.facade===he)throw dg("Promise can't be resolved itself");var qe=fg(he);qe?Sd(function(){var Ce={done:!1};try{jt(qe,he,ji(_d,Ce,xe),ji(Di,Ce,xe))}catch(Pt){Di(Ce,Pt,xe)}}):(xe.value=he,xe.state=1,gg(xe,!1))}catch(Ce){Di({done:!1},Ce,xe)}}};ug&&(Md=(xc=function(he){ld(this,Md),Xr(he),jt(Td,this);var Fe=Cd(this);try{he(ji(_d,Fe),ji(Di,Fe))}catch(qe){Di(Fe,qe)}}).prototype,(Td=function(he){N1(this,{type:Il,done:!1,notified:!1,parent:!1,reactions:new w1,rejection:!1,state:0,value:void 0})}).prototype=Hs(Md,"then",function(he,Fe){var qe=Cd(this),Ce=xd(Js(this,xc));return qe.parent=!0,Ce.ok=!Ve(he)||he,Ce.fail=Ve(Fe)&&Fe,Ce.domain=ds?wd.domain:void 0,qe.state==0?qe.reactions.add(Ce):Sd(function(){mg(Ce,qe)}),Ce.promise}),og=function(){var xe=new Td,he=Cd(xe);this.promise=xe,this.resolve=ji(_d,he),this.reject=ji(Di,he)},xs.f=xd=function(xe){return xe===xc||xe===void 0?new og(xe):R1(xe)}),_n({global:!0,constructor:!0,wrap:!0,forced:ug},{Promise:xc}),li(xc,Il,!1,!0),Hm(Il);var yg=To("iterator"),bg=!1;try{var L1=0,Sg={next:function(){return{done:!!L1++}},return:function(){bg=!0}};Sg[yg]=function(){return this},Array.from(Sg,function(){throw 2})}catch{}var Tg=function(xe,he){if(!he&&!bg)return!1;var Fe=!1;try{var qe={};qe[yg]=function(){return{next:function(){return{done:Fe=!0}}}},xe(qe)}catch{}return Fe},Cg=Li.CONSTRUCTOR||!Tg(function(xe){Ma.all(xe).then(void 0,function(){})});_n({target:"Promise",stat:!0,forced:Cg},{all:function(he){var Fe=this,qe=xs.f(Fe),Ce=qe.resolve,Pt=qe.reject,ar=$i(function(){var tr=Xr(Fe.resolve),mr=[],br=0,Nr=1;xo(he,function(Fr){var jr=br++,Vr=!1;Nr++,jt(tr,Fe,Fr).then(function(Kr){Vr||(Vr=!0,mr[jr]=Kr,--Nr||Ce(mr))},Pt)}),--Nr||Ce(mr)});return ar.error&&Pt(ar.value),qe.promise}});var j1=Li.CONSTRUCTOR;Ma&&Ma.prototype,_n({target:"Promise",proto:!0,forced:j1,real:!0},{catch:function(xe){return this.then(void 0,xe)}}),_n({target:"Promise",stat:!0,forced:Cg},{race:function(he){var Fe=this,qe=xs.f(Fe),Ce=qe.reject,Pt=$i(function(){var ar=Xr(Fe.resolve);xo(he,function(tr){jt(ar,Fe,tr).then(qe.resolve,Ce)})});return Pt.error&&Ce(Pt.value),qe.promise}}),_n({target:"Promise",stat:!0,forced:Li.CONSTRUCTOR},{reject:function(he){var Fe=xs.f(this);return jt(Fe.reject,void 0,he),Fe.promise}});var Id=function(xe,he){if(po(xe),rr(he)&&he.constructor===xe)return he;var Fe=xs.f(xe);return(0,Fe.resolve)(he),Fe.promise},D1=Li.CONSTRUCTOR,U1=xr("Promise"),q1=!D1;_n({target:"Promise",stat:!0,forced:!0},{resolve:function(he){return Id(q1&&this===U1?Ma:this,he)}}),_n({target:"Promise",stat:!0},{allSettled:function(he){var Fe=this,qe=xs.f(Fe),Ce=qe.resolve,Pt=qe.reject,ar=$i(function(){var tr=Xr(Fe.resolve),mr=[],br=0,Nr=1;xo(he,function(Fr){var jr=br++,Vr=!1;Nr++,jt(tr,Fe,Fr).then(function(Kr){Vr||(Vr=!0,mr[jr]={status:"fulfilled",value:Kr},--Nr||Ce(mr))},function(Kr){Vr||(Vr=!0,mr[jr]={status:"rejected",reason:Kr},--Nr||Ce(mr))})}),--Nr||Ce(mr)});return ar.error&&Pt(ar.value),qe.promise}});var Mg="No one promise resolved";_n({target:"Promise",stat:!0},{any:function(he){var Fe=this,qe=xr("AggregateError"),Ce=xs.f(Fe),Pt=Ce.resolve,ar=Ce.reject,tr=$i(function(){var mr=Xr(Fe.resolve),br=[],Nr=0,Fr=1,jr=!1;xo(he,function(Vr){var Kr=Nr++,Sn=!1;Fr++,jt(mr,Fe,Vr).then(function(Cn){Sn||jr||(jr=!0,Pt(Cn))},function(Cn){Sn||jr||(Sn=!0,br[Kr]=Cn,--Fr||ar(new qe(br,Mg)))})}),--Fr||ar(new qe(br,Mg))});return tr.error&&ar(tr.value),Ce.promise}});var V1=Ma&&Ma.prototype,H1=!!Ma&&V(function(){V1.finally.call({then:function(){}},function(){})});_n({target:"Promise",proto:!0,real:!0,forced:H1},{finally:function(xe){var he=Js(this,xr("Promise")),Fe=Ve(xe);return this.then(Fe?function(qe){return Id(he,xe()).then(function(){return qe})}:xe,Fe?function(qe){return Id(he,xe()).then(function(){throw qe})}:xe)}});var z1=kr.Promise;_n({target:"Promise",stat:!0,forced:!0},{try:function(xe){var he=xs.f(this),Fe=$i(xe);return(Fe.error?he.reject:he.resolve)(Fe.value),he.promise}});var _o=z1,W1=_e([].reverse),kg=[1,2];_n({target:"Array",proto:!0,forced:String(kg)===String(kg.reverse())},{reverse:function(){return Ms(this)&&(this.length=this.length),W1(this)}});var G1=sa("Array").reverse,Ed=Array.prototype,Yl=function(xe){var he=xe.reverse;return xe===Ed||vr(Ed,xe)&&he===Ed.reverse?G1:he},K1=fc("slice"),Q1=To("species"),Pd=Array,J1=Math.max;_n({target:"Array",proto:!0,forced:!K1},{slice:function(he,Fe){var qe,Ce,Pt,ar=_r(this),tr=Za(ar),mr=Ai(he,tr),br=Ai(Fe===void 0?tr:Fe,tr);if(Ms(ar)&&(qe=ar.constructor,(ml(qe)&&(qe===Pd||Ms(qe.prototype))||rr(qe)&&(qe=qe[Q1])===null)&&(qe=void 0),qe===Pd||qe===void 0))return Vs(ar,mr,br);for(Ce=new(qe===void 0?Pd:qe)(J1(br-mr,0)),Pt=0;mr<br;mr++,Pt++)mr in ar&&ii(Ce,Pt,ar[mr]);return Ce.length=Pt,Ce}});var Y1=sa("Array").slice,Ad=Array.prototype,Lo=function(xe){var he=xe.slice;return xe===Ad||vr(Ad,xe)&&he===Ad.slice?Y1:he},X1=g(function(xe){var he=W0.default;function Fe(){xe.exports=Fe=function(){return qe},xe.exports.__esModule=!0,xe.exports.default=xe.exports;var qe={},Ce=Object.prototype,Pt=Ce.hasOwnProperty,ar=typeof ja=="function"?ja:{},tr=ar.iterator||"@@iterator",mr=ar.asyncIterator||"@@asyncIterator",br=ar.toStringTag||"@@toStringTag";function Nr(Wn,Dn,no){return bc(Wn,Dn,{value:no,enumerable:!0,configurable:!0,writable:!0}),Wn[Dn]}try{Nr({},"")}catch{Nr=function(no,uo,Mo){return no[uo]=Mo}}function Fr(Wn,Dn,no,uo){var Mo=Dn&&Dn.prototype instanceof Kr?Dn:Kr,wo=Cs(Mo.prototype),pa=new zr(uo||[]);return wo._invoke=function(Jo,ls,jo){var Yo="suspendedStart";return function(wa,ul){if(Yo==="executing")throw new Error("Generator is already running");if(Yo==="completed"){if(wa==="throw")throw ul;return oo()}for(jo.method=wa,jo.arg=ul;;){var ra=jo.delegate;if(ra){var Vc=fo(ra,jo);if(Vc){if(Vc===Vr)continue;return Vc}}if(jo.method==="next")jo.sent=jo._sent=jo.arg;else if(jo.method==="throw"){if(Yo==="suspendedStart")throw Yo="completed",jo.arg;jo.dispatchException(jo.arg)}else jo.method==="return"&&jo.abrupt("return",jo.arg);Yo="executing";var hs=jr(Jo,ls,jo);if(hs.type==="normal"){if(Yo=jo.done?"completed":"suspendedYield",hs.arg===Vr)continue;return{value:hs.arg,done:jo.done}}hs.type==="throw"&&(Yo="completed",jo.method="throw",jo.arg=hs.arg)}}}(Wn,no,pa),wo}function jr(Wn,Dn,no){try{return{type:"normal",arg:Wn.call(Dn,no)}}catch(uo){return{type:"throw",arg:uo}}}qe.wrap=Fr;var Vr={};function Kr(){}function Sn(){}function Cn(){}var En={};Nr(En,tr,function(){return this});var In=pi&&pi(pi(Yn([])));In&&In!==Ce&&Pt.call(In,tr)&&(En=In);var An=Cn.prototype=Kr.prototype=Cs(En);function zn(Wn){var Dn;Qn(Dn=["next","throw","return"]).call(Dn,function(no){Nr(Wn,no,function(uo){return this._invoke(no,uo)})})}function yo(Wn,Dn){function no(Mo,wo,pa,Jo){var ls=jr(Wn[Mo],Wn,wo);if(ls.type!=="throw"){var jo=ls.arg,Yo=jo.value;return Yo&&he(Yo)=="object"&&Pt.call(Yo,"__await")?Dn.resolve(Yo.__await).then(function(wa){no("next",wa,pa,Jo)},function(wa){no("throw",wa,pa,Jo)}):Dn.resolve(Yo).then(function(wa){jo.value=wa,pa(jo)},function(wa){return no("throw",wa,pa,Jo)})}Jo(ls.arg)}var uo;this._invoke=function(Mo,wo){function pa(){return new Dn(function(Jo,ls){no(Mo,wo,Jo,ls)})}return uo=uo?uo.then(pa,pa):pa()}}function fo(Wn,Dn){var no=Wn.iterator[Dn.method];if(no===void 0){if(Dn.delegate=null,Dn.method==="throw"){if(Wn.iterator.return&&(Dn.method="return",Dn.arg=void 0,fo(Wn,Dn),Dn.method==="throw"))return Vr;Dn.method="throw",Dn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Vr}var uo=jr(no,Wn.iterator,Dn.arg);if(uo.type==="throw")return Dn.method="throw",Dn.arg=uo.arg,Dn.delegate=null,Vr;var Mo=uo.arg;return Mo?Mo.done?(Dn[Wn.resultName]=Mo.value,Dn.next=Wn.nextLoc,Dn.method!=="return"&&(Dn.method="next",Dn.arg=void 0),Dn.delegate=null,Vr):Mo:(Dn.method="throw",Dn.arg=new TypeError("iterator result is not an object"),Dn.delegate=null,Vr)}function Vo(Wn){var Dn={tryLoc:Wn[0]};1 in Wn&&(Dn.catchLoc=Wn[1]),2 in Wn&&(Dn.finallyLoc=Wn[2],Dn.afterLoc=Wn[3]),this.tryEntries.push(Dn)}function ao(Wn){var Dn=Wn.completion||{};Dn.type="normal",delete Dn.arg,Wn.completion=Dn}function zr(Wn){this.tryEntries=[{tryLoc:"root"}],Qn(Wn).call(Wn,Vo,this),this.reset(!0)}function Yn(Wn){if(Wn){var Dn=Wn[tr];if(Dn)return Dn.call(Wn);if(typeof Wn.next=="function")return Wn;if(!isNaN(Wn.length)){var no=-1,uo=function Mo(){for(;++no<Wn.length;)if(Pt.call(Wn,no))return Mo.value=Wn[no],Mo.done=!1,Mo;return Mo.value=void 0,Mo.done=!0,Mo};return uo.next=uo}}return{next:oo}}function oo(){return{value:void 0,done:!0}}return Sn.prototype=Cn,Nr(An,"constructor",Cn),Nr(Cn,"constructor",Sn),Sn.displayName=Nr(Cn,br,"GeneratorFunction"),qe.isGeneratorFunction=function(Wn){var Dn=typeof Wn=="function"&&Wn.constructor;return!!Dn&&(Dn===Sn||(Dn.displayName||Dn.name)==="GeneratorFunction")},qe.mark=function(Wn){return si?si(Wn,Cn):(Wn.__proto__=Cn,Nr(Wn,br,"GeneratorFunction")),Wn.prototype=Cs(An),Wn},qe.awrap=function(Wn){return{__await:Wn}},zn(yo.prototype),Nr(yo.prototype,mr,function(){return this}),qe.AsyncIterator=yo,qe.async=function(Wn,Dn,no,uo,Mo){Mo===void 0&&(Mo=_o);var wo=new yo(Fr(Wn,Dn,no,uo),Mo);return qe.isGeneratorFunction(Dn)?wo:wo.next().then(function(pa){return pa.done?pa.value:wo.next()})},zn(An),Nr(An,br,"Generator"),Nr(An,tr,function(){return this}),Nr(An,"toString",function(){return"[object Generator]"}),qe.keys=function(Wn){var Dn=[];for(var no in Wn)Dn.push(no);return Yl(Dn).call(Dn),function uo(){for(;Dn.length;){var Mo=Dn.pop();if(Mo in Wn)return uo.value=Mo,uo.done=!1,uo}return uo.done=!0,uo}},qe.values=Yn,zr.prototype={constructor:zr,reset:function(Dn){var no;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,Qn(no=this.tryEntries).call(no,ao),!Dn)for(var uo in this)uo.charAt(0)==="t"&&Pt.call(this,uo)&&!isNaN(+Lo(uo).call(uo,1))&&(this[uo]=void 0)},stop:function(){this.done=!0;var Dn=this.tryEntries[0].completion;if(Dn.type==="throw")throw Dn.arg;return this.rval},dispatchException:function(Dn){if(this.done)throw Dn;var no=this;function uo(jo,Yo){return pa.type="throw",pa.arg=Dn,no.next=jo,Yo&&(no.method="next",no.arg=void 0),!!Yo}for(var Mo=this.tryEntries.length-1;Mo>=0;--Mo){var wo=this.tryEntries[Mo],pa=wo.completion;if(wo.tryLoc==="root")return uo("end");if(wo.tryLoc<=this.prev){var Jo=Pt.call(wo,"catchLoc"),ls=Pt.call(wo,"finallyLoc");if(Jo&&ls){if(this.prev<wo.catchLoc)return uo(wo.catchLoc,!0);if(this.prev<wo.finallyLoc)return uo(wo.finallyLoc)}else if(Jo){if(this.prev<wo.catchLoc)return uo(wo.catchLoc,!0)}else{if(!ls)throw new Error("try statement without catch or finally");if(this.prev<wo.finallyLoc)return uo(wo.finallyLoc)}}}},abrupt:function(Dn,no){for(var uo=this.tryEntries.length-1;uo>=0;--uo){var Mo=this.tryEntries[uo];if(Mo.tryLoc<=this.prev&&Pt.call(Mo,"finallyLoc")&&this.prev<Mo.finallyLoc){var wo=Mo;break}}wo&&(Dn==="break"||Dn==="continue")&&wo.tryLoc<=no&&no<=wo.finallyLoc&&(wo=null);var pa=wo?wo.completion:{};return pa.type=Dn,pa.arg=no,wo?(this.method="next",this.next=wo.finallyLoc,Vr):this.complete(pa)},complete:function(Dn,no){if(Dn.type==="throw")throw Dn.arg;return Dn.type==="break"||Dn.type==="continue"?this.next=Dn.arg:Dn.type==="return"?(this.rval=this.arg=Dn.arg,this.method="return",this.next="end"):Dn.type==="normal"&&no&&(this.next=no),Vr},finish:function(Dn){for(var no=this.tryEntries.length-1;no>=0;--no){var uo=this.tryEntries[no];if(uo.finallyLoc===Dn)return this.complete(uo.completion,uo.afterLoc),ao(uo),Vr}},catch:function(Dn){for(var no=this.tryEntries.length-1;no>=0;--no){var uo=this.tryEntries[no];if(uo.tryLoc===Dn){var Mo=uo.completion;if(Mo.type==="throw"){var wo=Mo.arg;ao(uo)}return wo}}throw new Error("illegal catch attempt")},delegateYield:function(Dn,no,uo){return this.delegate={iterator:Yn(Dn),resultName:no,nextLoc:uo},this.method==="next"&&(this.arg=void 0),Vr}},qe}xe.exports=Fe,xe.exports.__esModule=!0,xe.exports.default=xe.exports}),El=X1(),wr=El;try{regeneratorRuntime=El}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=El:Function("r","regeneratorRuntime = r")(El)}_n({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var wg=9007199254740991,Xl=V(function(){qs(1)});_n({target:"Object",stat:!0,forced:Xl},{keys:function(he){return qs(Pn(he))}});var la=kr.Object.keys,Zl=Object.assign,xg=Object.defineProperty,Un=_e([].concat),eu=!Zl||V(function(){if($e&&Zl({b:1},Zl(xg({},"a",{enumerable:!0,get:function(){xg(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var xe={},he={},Fe=Symbol(),qe="abcdefghijklmnopqrst";return xe[Fe]=7,qe.split("").forEach(function(Ce){he[Ce]=Ce}),Zl({},xe)[Fe]!=7||qs(Zl({},he)).join("")!=qe})?function(he,Fe){for(var qe=Pn(he),Ce=arguments.length,Pt=1,ar=hc.f,tr=ur.f;Ce>Pt;)for(var mr,br=hr(arguments[Pt++]),Nr=ar?Un(qs(br),ar(br)):qs(br),Fr=Nr.length,jr=0;Fr>jr;)mr=Nr[jr++],$e&&!jt(tr,br,mr)||(qe[mr]=br[mr]);return qe}:Zl;_n({target:"Object",stat:!0,arity:2,forced:Object.assign!==eu},{assign:eu});var Hr=kr.Object.assign;kr.JSON||(kr.JSON={stringify:JSON.stringify});var Sv=function(he,Fe,qe){return le(kr.JSON.stringify,null,arguments)},fa=Sv,_g=Au.indexOf,Ig=_e([].indexOf),Eg=!!Ig&&1/Ig([1],1,-0)<0,Z1=fi("indexOf");_n({target:"Array",proto:!0,forced:Eg||!Z1},{indexOf:function(he){var Fe=arguments.length>1?arguments[1]:void 0;return Eg?Ig(this,he,Fe)||0:_g(this,he,Fe)}});var eS=sa("Array").indexOf,Pg=Array.prototype,Ja=function(xe){var he=xe.indexOf;return xe===Pg||vr(Pg,xe)&&he===Pg.indexOf?eS:he},Tv=sa("Array").concat,kp=Array.prototype,Ys=function(xe){var he=xe.concat;return xe===kp||vr(kp,xe)&&he===kp.concat?Tv:he};function ri(xe,he){var Fe={};for(var qe in xe)Object.prototype.hasOwnProperty.call(xe,qe)&&he.indexOf(qe)<0&&(Fe[qe]=xe[qe]);if(xe!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ce=0;for(qe=Object.getOwnPropertySymbols(xe);Ce<qe.length;Ce++)he.indexOf(qe[Ce])<0&&Object.prototype.propertyIsEnumerable.call(xe,qe[Ce])&&(Fe[qe[Ce]]=xe[qe[Ce]])}return Fe}function Vn(xe,he,Fe,qe){return new(Fe||(Fe=Promise))(function(Ce,Pt){function ar(br){try{mr(qe.next(br))}catch(Nr){Pt(Nr)}}function tr(br){try{mr(qe.throw(br))}catch(Nr){Pt(Nr)}}function mr(br){br.done?Ce(br.value):function(Fr){return Fr instanceof Fe?Fr:new Fe(function(jr){jr(Fr)})}(br.value).then(ar,tr)}mr((qe=qe.apply(xe,he||[])).next())})}var wp=V(function(){if(typeof ArrayBuffer=="function"){var xe=new ArrayBuffer(8);Object.isExtensible(xe)&&Object.defineProperty(xe,"a",{value:8})}}),Nd=Object.isExtensible,Ag=V(function(){Nd(1)})||wp?function(he){return!!rr(he)&&(!wp||er(he)!="ArrayBuffer")&&(!Nd||Nd(he))}:Nd,Cv=!V(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ng=g(function(xe){var he=Oa.f,Fe=!1,qe=Do("meta"),Ce=0,Pt=function(tr){he(tr,qe,{value:{objectID:"O"+Ce++,weakData:{}}})},ar=xe.exports={enable:function(){ar.enable=function(){},Fe=!0;var tr=gc.f,mr=_e([].splice),br={};br[qe]=1,tr(br).length&&(gc.f=function(Nr){for(var Fr=tr(Nr),jr=0,Vr=Fr.length;jr<Vr;jr++)if(Fr[jr]===qe){mr(Fr,jr,1);break}return Fr},_n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Vu.f}))},fastKey:function(tr,mr){if(!rr(tr))return typeof tr=="symbol"?tr:(typeof tr=="string"?"S":"P")+tr;if(!hn(tr,qe)){if(!Ag(tr))return"F";if(!mr)return"E";Pt(tr)}return tr[qe].objectID},getWeakData:function(tr,mr){if(!hn(tr,qe)){if(!Ag(tr))return!0;if(!mr)return!1;Pt(tr)}return tr[qe].weakData},onFreeze:function(tr){return Cv&&Fe&&Ag(tr)&&!hn(tr,qe)&&Pt(tr),tr}};Ni[qe]=!0}),Mv=Oa.f,kv=Ws.forEach,Zi=ts.set,tS=ts.getterFor,wv=function(xe,he,Fe){for(var qe in he)Fe&&Fe.unsafe&&xe[qe]?xe[qe]=he[qe]:Hs(xe,qe,he[qe],Fe);return xe},rS=Oa.f,xv=Ng.fastKey,Og=ts.set,Pl=ts.getterFor,_v={getConstructor:function(xe,he,Fe,qe){var Ce=xe(function(br,Nr){ld(br,Pt),Og(br,{type:he,index:es(null),first:void 0,last:void 0,size:0}),$e||(br.size=0),pr(Nr)||xo(Nr,br[qe],{that:br,AS_ENTRIES:Fe})}),Pt=Ce.prototype,ar=Pl(he),tr=function(br,Nr,Fr){var jr,Vr,Kr=ar(br),Sn=mr(br,Nr);return Sn?Sn.value=Fr:(Kr.last=Sn={index:Vr=xv(Nr,!0),key:Nr,value:Fr,previous:jr=Kr.last,next:void 0,removed:!1},Kr.first||(Kr.first=Sn),jr&&(jr.next=Sn),$e?Kr.size++:br.size++,Vr!=="F"&&(Kr.index[Vr]=Sn)),br},mr=function(br,Nr){var Fr,jr=ar(br),Vr=xv(Nr);if(Vr!=="F")return jr.index[Vr];for(Fr=jr.first;Fr;Fr=Fr.next)if(Fr.key==Nr)return Fr};return wv(Pt,{clear:function(){for(var Nr=ar(this),Fr=Nr.index,jr=Nr.first;jr;)jr.removed=!0,jr.previous&&(jr.previous=jr.previous.next=void 0),delete Fr[jr.index],jr=jr.next;Nr.first=Nr.last=void 0,$e?Nr.size=0:this.size=0},delete:function(br){var Nr=this,Fr=ar(Nr),jr=mr(Nr,br);if(jr){var Vr=jr.next,Kr=jr.previous;delete Fr.index[jr.index],jr.removed=!0,Kr&&(Kr.next=Vr),Vr&&(Vr.previous=Kr),Fr.first==jr&&(Fr.first=Vr),Fr.last==jr&&(Fr.last=Kr),$e?Fr.size--:Nr.size--}return!!jr},forEach:function(Nr){for(var Fr,jr=ar(this),Vr=Go(Nr,arguments.length>1?arguments[1]:void 0);Fr=Fr?Fr.next:jr.first;)for(Vr(Fr.value,Fr.key,this);Fr&&Fr.removed;)Fr=Fr.previous},has:function(Nr){return!!mr(this,Nr)}}),wv(Pt,Fe?{get:function(Nr){var Fr=mr(this,Nr);return Fr&&Fr.value},set:function(Nr,Fr){return tr(this,Nr===0?0:Nr,Fr)}}:{add:function(Nr){return tr(this,Nr=Nr===0?0:Nr,Nr)}}),$e&&rS(Pt,"size",{get:function(){return ar(this).size}}),Ce},setStrong:function(xe,he,Fe){var qe=he+" Iterator",Ce=Pl(he),Pt=Pl(qe);rd(xe,he,function(ar,tr){Og(this,{type:qe,target:ar,state:Ce(ar),kind:tr,last:void 0})},function(){for(var ar=Pt(this),tr=ar.kind,mr=ar.last;mr&&mr.removed;)mr=mr.previous;return ar.target&&(ar.last=mr=mr?mr.next:ar.state.first)?tr=="keys"?{value:mr.key,done:!1}:tr=="values"?{value:mr.value,done:!1}:{value:[mr.key,mr.value],done:!1}:(ar.target=void 0,{value:void 0,done:!0})},Fe?"entries":"values",!Fe,!0),Hm(he)}};(function(xe,he,Fe){var qe,Ce=xe.indexOf("Map")!==-1,Pt=xe.indexOf("Weak")!==-1,ar=Ce?"set":"add",tr=L[xe],mr=tr&&tr.prototype,br={};if($e&&Ve(tr)&&(Pt||mr.forEach&&!V(function(){new tr().entries().next()}))){var Nr=(qe=he(function(jr,Vr){Zi(ld(jr,Nr),{type:xe,collection:new tr}),Vr!=null&&xo(Vr,jr[ar],{that:jr,AS_ENTRIES:Ce})})).prototype,Fr=tS(xe);kv(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(jr){var Vr=jr=="add"||jr=="set";!(jr in mr)||Pt&&jr=="clear"||va(Nr,jr,function(Kr,Sn){var Cn=Fr(this).collection;if(!Vr&&Pt&&!rr(Kr))return jr=="get"&&void 0;var En=Cn[jr](Kr===0?0:Kr,Sn);return Vr?this:En})}),Pt||Mv(Nr,"size",{configurable:!0,get:function(){return Fr(this).collection.size}})}else qe=Fe.getConstructor(he,xe,Ce,ar),Ng.enable();li(qe,xe,!1,!0),br[xe]=qe,_n({global:!0,forced:!0},br),Pt||Fe.setStrong(qe,xe,Ce)})("Map",function(xe){return function(){return xe(this,arguments.length?arguments[0]:void 0)}},_v);var nS=kr.Map,_s=[].push;_n({target:"Map",stat:!0,forced:!0},{from:function(he){var Fe,qe,Ce,Pt,ar=arguments.length,tr=ar>1?arguments[1]:void 0;return xl(this),(Fe=tr!==void 0)&&Xr(tr),pr(he)?new this:(qe=[],Fe?(Ce=0,Pt=Go(tr,ar>2?arguments[2]:void 0),xo(he,function(mr){jt(_s,qe,Pt(mr,Ce++))})):xo(he,_s,{that:qe}),new this(qe))}}),_n({target:"Map",stat:!0,forced:!0},{of:function(){return new this(Vs(arguments))}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var he,Fe=po(this),qe=Xr(Fe.delete),Ce=!0,Pt=0,ar=arguments.length;Pt<ar;Pt++)he=jt(qe,Fe,arguments[Pt]),Ce=Ce&&he;return!!Ce}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(he,Fe){var qe,Ce,Pt=po(this),ar=Xr(Pt.get),tr=Xr(Pt.has),mr=Xr(Pt.set);return jt(tr,Pt,he)?(qe=jt(ar,Pt,he),"update"in Fe&&(qe=Fe.update(qe,he,Pt),jt(mr,Pt,he,qe)),qe):(Ce=Fe.insert(he,Pt),jt(mr,Pt,he,Ce),Ce)}});var ec=Sc;_n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return!xo(qe,function(Pt,ar,tr){if(!Ce(ar,Pt,Fe))return tr()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0),Pt=new(Js(Fe,xr("Map"))),ar=Xr(Pt.set);return xo(qe,function(tr,mr){Ce(mr,tr,Fe)&&jt(ar,Pt,tr,mr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Pt}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return xo(qe,function(Pt,ar,tr){if(Ce(ar,Pt,Fe))return tr(ar)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return xo(qe,function(Pt,ar,tr){if(Ce(ar,Pt,Fe))return tr(Pt)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var Rg=_e([].push);_n({target:"Map",stat:!0,forced:!0},{groupBy:function(he,Fe){Xr(Fe);var qe=Sc(he),Ce=new this,Pt=Xr(Ce.has),ar=Xr(Ce.get),tr=Xr(Ce.set);return xo(qe,function(mr){var br=Fe(mr);jt(Pt,Ce,br)?Rg(jt(ar,Ce,br),mr):jt(tr,Ce,br,[mr])},{IS_ITERATOR:!0}),Ce}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(he){return xo(ec(po(this)),function(Fe,qe,Ce){if((Pt=qe)===(ar=he)||Pt!=Pt&&ar!=ar)return Ce();var Pt,ar},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),_n({target:"Map",stat:!0,forced:!0},{keyBy:function(he,Fe){var qe=new this;Xr(Fe);var Ce=Xr(qe.set);return xo(he,function(Pt){jt(Ce,qe,Fe(Pt),Pt)}),qe}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(he){return xo(ec(po(this)),function(Fe,qe,Ce){if(qe===he)return Ce(Fe)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0),Pt=new(Js(Fe,xr("Map"))),ar=Xr(Pt.set);return xo(qe,function(tr,mr){jt(ar,Pt,Ce(mr,tr,Fe),mr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Pt}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0),Pt=new(Js(Fe,xr("Map"))),ar=Xr(Pt.set);return xo(qe,function(tr,mr){jt(ar,Pt,tr,Ce(mr,tr,Fe))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Pt}}),_n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(he){for(var Fe=po(this),qe=Xr(Fe.set),Ce=arguments.length,Pt=0;Pt<Ce;)xo(arguments[Pt++],qe,{that:Fe,AS_ENTRIES:!0});return Fe}});var gi=TypeError;_n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(he){var Fe=po(this),qe=ec(Fe),Ce=arguments.length<2,Pt=Ce?void 0:arguments[1];if(Xr(he),xo(qe,function(ar,tr){Ce?(Ce=!1,Pt=tr):Pt=he(Pt,tr,ar,Fe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Ce)throw gi("Reduce of empty map with no initial value");return Pt}}),_n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(he){var Fe=po(this),qe=ec(Fe),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return xo(qe,function(Pt,ar,tr){if(Ce(ar,Pt,Fe))return tr()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var oS=TypeError;_n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(he,Fe){var qe=po(this),Ce=Xr(qe.get),Pt=Xr(qe.has),ar=Xr(qe.set),tr=arguments.length;Xr(Fe);var mr=jt(Pt,qe,he);if(!mr&&tr<3)throw oS("Updating absent value");var br=mr?jt(Ce,qe,he):Xr(tr>2?arguments[2]:void 0)(he,qe);return jt(ar,qe,he,Fe(br,he,qe)),qe}});var aS=TypeError,Bg=function(he,Fe){var qe,Ce=po(this),Pt=Xr(Ce.get),ar=Xr(Ce.has),tr=Xr(Ce.set),mr=arguments.length>2?arguments[2]:void 0;if(!Ve(Fe)&&!Ve(mr))throw aS("At least one callback required");return jt(ar,Ce,he)?(qe=jt(Pt,Ce,he),Ve(Fe)&&(qe=Fe(qe),jt(tr,Ce,he,qe))):Ve(mr)&&(qe=mr(),jt(tr,Ce,he,qe)),qe};_n({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Bg}),_n({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Bg});var _c=nS,Fg=Date,Iv=_e(Fg.prototype.getTime);_n({target:"Date",stat:!0},{now:function(){return Iv(new Fg)}});var Ia=kr.Date.now,sS=/MSIE .\./.test(Ir),Ao=L.Function,Ev=function(xe){return sS?function(he,Fe){var qe=zm(arguments.length,1)>2,Ce=Ve(he)?he:Ao(he),Pt=qe?Vs(arguments,2):void 0;return xe(qe?function(){le(Ce,this,Pt)}:Ce,Fe)}:xe},Pv={setTimeout:Ev(L.setTimeout),setInterval:Ev(L.setInterval)},Av=Pv.setInterval;_n({global:!0,bind:!0,forced:L.setInterval!==Av},{setInterval:Av});var xp=Pv.setTimeout;_n({global:!0,bind:!0,forced:L.setTimeout!==xp},{setTimeout:xp});var Ro=kr.setTimeout,$g=Ws.map,iS=fc("map");_n({target:"Array",proto:!0,forced:!iS},{map:function(he){return $g(this,he,arguments.length>1?arguments[1]:void 0)}});var tu=sa("Array").map,_p=Array.prototype,Fo=function(xe){var he=xe.map;return xe===_p||vr(_p,xe)&&he===_p.map?tu:he},hi=g(function(xe){var he=Object.prototype.hasOwnProperty,Fe="~";function qe(){}function Ce(mr,br,Nr){this.fn=mr,this.context=br,this.once=Nr||!1}function Pt(mr,br,Nr,Fr,jr){if(typeof Nr!="function")throw new TypeError("The listener must be a function");var Vr=new Ce(Nr,Fr||mr,jr),Kr=Fe?Fe+br:br;return mr._events[Kr]?mr._events[Kr].fn?mr._events[Kr]=[mr._events[Kr],Vr]:mr._events[Kr].push(Vr):(mr._events[Kr]=Vr,mr._eventsCount++),mr}function ar(mr,br){--mr._eventsCount==0?mr._events=new qe:delete mr._events[br]}function tr(){this._events=new qe,this._eventsCount=0}Object.create&&(qe.prototype=Object.create(null),new qe().__proto__||(Fe=!1)),tr.prototype.eventNames=function(){var br,Nr,Fr=[];if(this._eventsCount===0)return Fr;for(Nr in br=this._events)he.call(br,Nr)&&Fr.push(Fe?Nr.slice(1):Nr);return Object.getOwnPropertySymbols?Fr.concat(Object.getOwnPropertySymbols(br)):Fr},tr.prototype.listeners=function(br){var Nr=Fe?Fe+br:br,Fr=this._events[Nr];if(!Fr)return[];if(Fr.fn)return[Fr.fn];for(var jr=0,Vr=Fr.length,Kr=new Array(Vr);jr<Vr;jr++)Kr[jr]=Fr[jr].fn;return Kr},tr.prototype.listenerCount=function(br){var Nr=Fe?Fe+br:br,Fr=this._events[Nr];return Fr?Fr.fn?1:Fr.length:0},tr.prototype.emit=function(br,Nr,Fr,jr,Vr,Kr){var Sn=Fe?Fe+br:br;if(!this._events[Sn])return!1;var Cn,En,In=this._events[Sn],An=arguments.length;if(In.fn){switch(In.once&&this.removeListener(br,In.fn,void 0,!0),An){case 1:return In.fn.call(In.context),!0;case 2:return In.fn.call(In.context,Nr),!0;case 3:return In.fn.call(In.context,Nr,Fr),!0;case 4:return In.fn.call(In.context,Nr,Fr,jr),!0;case 5:return In.fn.call(In.context,Nr,Fr,jr,Vr),!0;case 6:return In.fn.call(In.context,Nr,Fr,jr,Vr,Kr),!0}for(En=1,Cn=new Array(An-1);En<An;En++)Cn[En-1]=arguments[En];In.fn.apply(In.context,Cn)}else{var zn,yo=In.length;for(En=0;En<yo;En++)switch(In[En].once&&this.removeListener(br,In[En].fn,void 0,!0),An){case 1:In[En].fn.call(In[En].context);break;case 2:In[En].fn.call(In[En].context,Nr);break;case 3:In[En].fn.call(In[En].context,Nr,Fr);break;case 4:In[En].fn.call(In[En].context,Nr,Fr,jr);break;default:if(!Cn)for(zn=1,Cn=new Array(An-1);zn<An;zn++)Cn[zn-1]=arguments[zn];In[En].fn.apply(In[En].context,Cn)}}return!0},tr.prototype.on=function(br,Nr,Fr){return Pt(this,br,Nr,Fr,!1)},tr.prototype.once=function(br,Nr,Fr){return Pt(this,br,Nr,Fr,!0)},tr.prototype.removeListener=function(br,Nr,Fr,jr){var Vr=Fe?Fe+br:br;if(!this._events[Vr])return this;if(!Nr)return ar(this,Vr),this;var Kr=this._events[Vr];if(Kr.fn)Kr.fn!==Nr||jr&&!Kr.once||Fr&&Kr.context!==Fr||ar(this,Vr);else{for(var Sn=0,Cn=[],En=Kr.length;Sn<En;Sn++)(Kr[Sn].fn!==Nr||jr&&!Kr[Sn].once||Fr&&Kr[Sn].context!==Fr)&&Cn.push(Kr[Sn]);Cn.length?this._events[Vr]=Cn.length===1?Cn[0]:Cn:ar(this,Vr)}return this},tr.prototype.removeAllListeners=function(br){var Nr;return br?(Nr=Fe?Fe+br:br,this._events[Nr]&&ar(this,Nr)):(this._events=new qe,this._eventsCount=0),this},tr.prototype.off=tr.prototype.removeListener,tr.prototype.addListener=tr.prototype.on,tr.prefixed=Fe,tr.EventEmitter=tr,xe.exports=tr}),tc=Al;function Al(xe){xe=xe||{},this.ms=xe.min||100,this.max=xe.max||1e4,this.factor=xe.factor||2,this.jitter=xe.jitter>0&&xe.jitter<=1?xe.jitter:0,this.attempts=0}Al.prototype.duration=function(){var xe=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var he=Math.random(),Fe=Math.floor(he*this.jitter*xe);xe=1&Math.floor(10*he)?xe+Fe:xe-Fe}return 0|Math.min(xe,this.max)},Al.prototype.reset=function(){this.attempts=0},Al.prototype.setMin=function(xe){this.ms=xe},Al.prototype.setMax=function(xe){this.max=xe},Al.prototype.setJitter=function(xe){this.jitter=xe};var Nv=typeof e=="object"&&e&&e.Object===Object&&e,cS=typeof self=="object"&&self&&self.Object===Object&&self,ni=Nv||cS||Function("return this")(),Ci=ni.Symbol,Ov=Object.prototype,lS=Ov.hasOwnProperty,Rv=Ov.toString,Mi=Ci?Ci.toStringTag:void 0,Ui=function(he){var Fe=lS.call(he,Mi),qe=he[Mi];try{he[Mi]=void 0;var Ce=!0}catch{}var Pt=Rv.call(he);return Ce&&(Fe?he[Mi]=qe:delete he[Mi]),Pt},Ip=Object.prototype.toString,Bv=function(he){return Ip.call(he)},Fv=Ci?Ci.toStringTag:void 0,zc=function(he){return he==null?he===void 0?"[object Undefined]":"[object Null]":Fv&&Fv in Object(he)?Ui(he):Bv(he)},qi=function(he){var Fe=typeof he;return he!=null&&(Fe=="object"||Fe=="function")},Ep=function(he){if(!qi(he))return!1;var Fe=zc(he);return Fe=="[object Function]"||Fe=="[object GeneratorFunction]"||Fe=="[object AsyncFunction]"||Fe=="[object Proxy]"},$v={deviceId:"",timeout:8e3},uS={account:"",appkey:"",token:"",debugLevel:"off",needReconnect:!0,reconnectionAttempts:wg,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},Lv="weblink.netease.im:443",dS=Au.includes,pS=V(function(){return!Array(1).includes()});_n({target:"Array",proto:!0,forced:pS},{includes:function(he){return dS(this,he,arguments.length>1?arguments[1]:void 0)}});var fS=sa("Array").includes,Lg=To("match"),jg=TypeError,Vi=function(xe){if(function(he){var Fe;return rr(he)&&((Fe=he[Lg])!==void 0?!!Fe:er(he)=="RegExp")}(xe))throw jg("The method doesn't accept regular expressions");return xe},mS=To("match"),gS=_e("".indexOf);_n({target:"String",proto:!0,forced:!function(xe){var he=/./;try{"/./"[xe](he)}catch{try{return he[mS]=!1,"/./"[xe](he)}catch{}}return!1}("includes")},{includes:function(he){return!!~gS(rs(Pr(this)),rs(Vi(he)),arguments.length>1?arguments[1]:void 0)}});var jv=sa("String").includes,Dg=Array.prototype,Od=String.prototype,Wc=function(xe){var he=xe.includes;return xe===Dg||vr(Dg,xe)&&he===Dg.includes?fS:typeof xe=="string"||xe===Od||vr(Od,xe)&&he===Od.includes?jv:he},hS=Ws.findIndex,vS="findIndex",Pp=!0;vS in[]&&Array(1).findIndex(function(){Pp=!1}),_n({target:"Array",proto:!0,forced:Pp},{findIndex:function(he){return hS(this,he,arguments.length>1?arguments[1]:void 0)}});var Dv=sa("Array").findIndex,Ug=Array.prototype,yS=function(xe){var he=xe.findIndex;return xe===Ug||vr(Ug,xe)&&he===Ug.findIndex?Dv:he},qg=g(function(xe){function he(Fe){var qe;return xe.exports=he=si?Xo(qe=pi).call(qe):function(Pt){return Pt.__proto__||pi(Pt)},xe.exports.__esModule=!0,xe.exports.default=xe.exports,he(Fe)}xe.exports=he,xe.exports.__esModule=!0,xe.exports.default=xe.exports}),Ba=g(function(xe){xe.exports=function(Fe){var qe;return Ja(qe=Function.toString.call(Fe)).call(qe,"[native code]")!==-1},xe.exports.__esModule=!0,xe.exports.default=xe.exports}),Vg=xr("Reflect","construct"),Hg=Object.prototype,bS=[].push,Uv=V(function(){function xe(){}return!(Vg(function(){},[],xe)instanceof xe)}),zg=!V(function(){Vg(function(){})}),Wg=Uv||zg;_n({target:"Reflect",stat:!0,forced:Wg,sham:Wg},{construct:function(he,Fe){xl(he),po(Fe);var qe=arguments.length<3?he:xl(arguments[2]);if(zg&&!Uv)return Vg(he,Fe,qe);if(he==qe){switch(Fe.length){case 0:return new he;case 1:return new he(Fe[0]);case 2:return new he(Fe[0],Fe[1]);case 3:return new he(Fe[0],Fe[1],Fe[2]);case 4:return new he(Fe[0],Fe[1],Fe[2],Fe[3])}var Ce=[null];return le(bS,Ce,Fe),new(le(Bu,he,Ce))}var Pt=qe.prototype,ar=es(rr(Pt)?Pt:Hg),tr=le(he,ar,Fe);return rr(tr)?tr:ar}});var rc=kr.Reflect.construct,Ic=g(function(xe){xe.exports=function(){if(typeof Reflect>"u"||!rc||rc.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(rc(Boolean,[],function(){})),!0}catch{return!1}},xe.exports.__esModule=!0,xe.exports.default=xe.exports}),SS=g(function(xe){function he(Fe,qe,Ce){var Pt;return Ic()?(xe.exports=he=Xo(Pt=rc).call(Pt),xe.exports.__esModule=!0,xe.exports.default=xe.exports):(xe.exports=he=function(tr,mr,br){var Nr=[null];Nr.push.apply(Nr,mr);var Fr=new(Xo(Function).apply(tr,Nr));return br&&$u(Fr,br.prototype),Fr},xe.exports.__esModule=!0,xe.exports.default=xe.exports),he.apply(null,arguments)}xe.exports=he,xe.exports.__esModule=!0,xe.exports.default=xe.exports}),TS=g(function(xe){function he(Fe){var qe=typeof _c=="function"?new _c:void 0;return xe.exports=he=function(Pt){if(Pt===null||!Ba(Pt))return Pt;if(typeof Pt!="function")throw new TypeError("Super expression must either be null or a function");if(qe!==void 0){if(qe.has(Pt))return qe.get(Pt);qe.set(Pt,ar)}function ar(){return SS(Pt,arguments,qg(this).constructor)}return ar.prototype=Cs(Pt.prototype,{constructor:{value:ar,enumerable:!1,writable:!0,configurable:!0}}),$u(ar,Pt)},xe.exports.__esModule=!0,xe.exports.default=xe.exports,he(Fe)}xe.exports=he,xe.exports.__esModule=!0,xe.exports.default=xe.exports}),Ec=function(xe){function he(Fe,qe,Ce){var Pt;return qe===void 0&&(qe={}),Ce===void 0&&(Ce=400),(Pt=xe.call(this,Fe)||this).data=qe,Pt.code=Ce,Pt.name="customError",Pt}return ea(he,xe),he}(n(TS)(Error)),Bo=function(xe){function he(Fe,qe,Ce){var Pt;return qe===void 0&&(qe={}),(Pt=xe.call(this,Fe,qe,414)||this).code=414,Pt.name="validateError",Pt.rules=Ce,Pt}return ea(he,xe),he}(Ec),Nl={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},Ap=function(xe){function he(Fe,qe,Ce,Pt,ar){var tr;return Ce===void 0&&(Ce=""),Pt===void 0&&(Pt=new Date().getTime()),ar===void 0&&(ar={}),Ce=Ce||Nl[Fe],(tr=xe.call(this,Ce,ar,Fe)||this).name="cmdError",tr.cmd=qe,tr.timetag=Pt,tr}return ea(he,xe),he}(Ec),Gg=function(xe){function he(Fe,qe,Ce){var Pt;return(Pt=xe.call(this,Fe,{},412)||this).code=412,Pt.name="formatError",Pt.key=qe,Pt.reason=Ce,Pt}return ea(he,xe),he}(Ec),ru=function(xe){function he(Fe,qe,Ce,Pt,ar){var tr;return(tr=xe.call(this,Fe,{file:ar},400)||this).name="uploadError",tr.rawError=qe,tr.curProvider=Ce||1,tr.mixStorePolicy=Pt,tr}return ea(he,xe),he}(Ec),Gc=["error","warn","log","debug"],Ol=function(){},Rd=["off","error","warn","log","debug"],Np=function(){function xe(Fe,qe){this.name=qe,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=Ol,this.log=Ol,this.warn=Ol,this.error=Ol,this.name=qe,xe.instancesName.push(qe),Wc(Rd).call(Rd,Fe)||(Fe="off"),this.setLogFunc(Fe)}var he=xe.prototype;return he.setLogFunc=function(qe){var Ce=this,Pt=yS(Gc).call(Gc,function(ar){return ar===qe});Qn(Gc).call(Gc,function(ar,tr){tr<=Pt&&(Ce[ar]=function(){var mr=Lo(Array.prototype).call(arguments),br=this.formatArgs(mr,ar);this.strategies[ar](br)})})},he.formatArgs=function(qe,Ce){var Pt=new Date,ar=Pt.getMonth()+1+"-"+Pt.getDate()+" "+Pt.getHours()+":"+Pt.getMinutes()+":"+Pt.getSeconds()+":"+Pt.getMilliseconds();return"[NIM "+Ce+" "+this.name+" "+ar+"] "+Fo(qe).call(qe,function(tr){return tr instanceof Ec?tr.name+", "+tr.code+", "+tr.message:tr instanceof Error?tr&&tr.message?tr.message:tr:typeof tr=="object"?fa(tr):tr}).join(" ")},xe}();Np.instancesName=[],_n({global:!0},{globalThis:L});var qv=Ws.filter,CS=fc("filter");_n({target:"Array",proto:!0,forced:!CS},{filter:function(he){return qv(this,he,arguments.length>1?arguments[1]:void 0)}});var ka=sa("Array").filter,Kg=Array.prototype,Bs=function(xe){var he=xe.filter;return xe===Kg||vr(Kg,xe)&&he===Kg.filter?ka:he},MS=g(function(xe,he){xe.exports=function(){function Fe(br,Nr){if(!(br instanceof Nr))throw new TypeError("Cannot call a class as a function")}function qe(br,Nr){for(var Fr=0;Fr<Nr.length;Fr++){var jr=Nr[Fr];jr.enumerable=jr.enumerable||!1,jr.configurable=!0,"value"in jr&&(jr.writable=!0),bc(br,jr.key,jr)}}function Ce(br,Nr,Fr){return Nr&&qe(br.prototype,Nr),Fr&&qe(br,Fr),bc(br,"prototype",{writable:!1}),br}var Pt={reportUrl:"https://statistic.live.126.net/statics/report/common/form",maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},ar="https://statistic.live.126.net/dispatcher/req",tr=function(){},mr=function(){function br(Nr){Fe(this,br),this.enable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Pt,this.msgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=Ia(),this.timer=null,this.setConfig(Nr),this.reportConfig.autoStart&&this.initUploadConfig()}return Ce(br,[{key:"setConfig",value:function(Fr){this.reportConfig=Hr({},this.reportConfig,Fr)}},{key:"reportImmediately",value:function(Fr,jr){var Vr=this;this.reportConfig.request(Fr,Hr({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},jr)).catch(function(Kr){var Sn,Cn;(Cn=(Sn=Vr.reportConfig)===null||Sn===void 0?void 0:Sn.logger)===null||Cn===void 0||Cn.warn("Reporter immediately upload failed",Kr)})}},{key:"report",value:function(Fr,jr){var Vr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Fr){var Kr=Ia();Vr?this.lowPriorityMsgList.push({module:Fr,msg:jr,createTime:Kr}):this.msgList.push({module:Fr,msg:jr,createTime:Kr}),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(Fr,jr){if(Fr&&!this.traceMsgCache[Fr]){var Vr=Hr(Hr({start_time:Ia()},jr),{extension:[]});this.traceMsgCache[Fr]=Vr}}},{key:"reportTraceUpdate",value:function(Fr){}},{key:"reportTraceUpdateV2",value:function(Fr,jr){if(this.traceMsgCache[Fr]){var Vr=this.traceMsgCache[Fr].extension.length,Kr=new Date().getTime();jr.duration=Vr===0?Kr-this.traceMsgCache[Fr].start_time:Kr-this.traceMsgCache[Fr].extension[Vr-1].end_time,this.traceMsgCache[Fr].extension.push(Hr({end_time:Kr},jr))}}},{key:"reportTraceEnd",value:function(Fr){var jr,Vr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.traceMsgCache[Fr]&&(Fr!=="nos"||Vr===!1?(typeof Vr=="boolean"?this.traceMsgCache[Fr].succeed=!!Vr:this.traceMsgCache[Fr].state=Vr,this.traceMsgCache[Fr].duration=Ia()-this.traceMsgCache[Fr].start_time,Qn(jr=this.traceMsgCache[Fr].extension).call(jr,function(Kr){delete Kr.end_time}),this.report(Fr,this.traceMsgCache[Fr]),this.traceMsgCache[Fr]=null):this.traceMsgCache[Fr]=null)}},{key:"reportTraceCancel",value:function(Fr){this.traceMsgCache[Fr]=null}},{key:"pause",value:function(){this.enable=!1}},{key:"restore",value:function(){this.enable=!0,this.initConfigLoaded||this.initUploadConfig()}},{key:"destroy",value:function(){var Fr,jr=this;Qn(Fr=la(this.traceMsgCache)).call(Fr,function(Vr){jr.reportTraceEnd(Vr,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=tr,this.report=tr,this.reportTraceStart=tr,this.reportTraceUpdate=tr,this.reportTraceEnd=tr,this.pause=tr,this.restore=tr,this.destroy=tr,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.reportConfig={},this.isDestroyed=!0}},{key:"initUploadConfig",value:function(){var Fr,jr,Vr=this;if(!this.loading){this.loading=!0;var Kr=this.reportConfig.common||{};try{this.reportConfig.request(ar,{method:"GET",dataType:"json",params:{deviceId:Kr.dev_id,sdkVer:Kr.sdk_ver,platform:Kr.platform,appkey:Kr.app_key},timeout:this.reportConfig.timeout}).then(function(Sn){var Cn,En;if(!Vr.isDestroyed){if(Sn.status===200&&Sn.data&&Sn.data.code===200){var In=Sn.data.data||{};Vr.reportConfig.maxSize=In.maxSize>1e3?1e3:In.maxSize,Vr.reportConfig.maxInterval=In.maxInterval>1e4?1e4:In.maxInterval,Vr.reportConfig.maxInterval=In.maxInterval<10?10:In.maxInterval,Vr.reportConfig.minInterval=In.minInterval<2?2:In.minInterval,Vr.reportConfig.maxDelay=In.maxDelay||300,Vr.reportConfig.maxInterval=1e3*Vr.reportConfig.maxInterval,Vr.reportConfig.minInterval=1e3*Vr.reportConfig.minInterval,Vr.reportConfig.maxDelay=1e3*Vr.reportConfig.maxDelay,Vr.enable=!0,Vr.initConfigLoaded=!0,Vr.loading=!1,Vr.reportHeartBeat()}(En=(Cn=Vr.reportConfig)===null||Cn===void 0?void 0:Cn.logger)===null||En===void 0||En.log("Get reporter upload config success")}}).catch(function(Sn){var Cn,En;Vr.loading=!1,(En=(Cn=Vr.reportConfig)===null||Cn===void 0?void 0:Cn.logger)===null||En===void 0||En.error("Get reporter upload config failed",Sn)})}catch(Sn){this.loading=!1,(jr=(Fr=this.reportConfig)===null||Fr===void 0?void 0:Fr.logger)===null||jr===void 0||jr.error("Exec reporter request failed",Sn)}}}},{key:"reportHeartBeat",value:function(){var Fr=this;this.isDestroyed||(this.timer=Ro(function(){Fr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var Fr=this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;Ia()-this.lastReportTime>=Fr&&this.upload()}}},{key:"getUploadMsg",value:function(){var Fr,jr,Vr,Kr,Sn,Cn=this,En={},In=Ia();this.msgList=Bs(Fr=this.msgList).call(Fr,function(Yn){return In-Yn.createTime<Cn.reportConfig.maxDelay}),this.lowPriorityMsgList=Bs(jr=this.lowPriorityMsgList).call(jr,function(Yn){return In-Yn.createTime<Cn.reportConfig.maxDelay}),this.cacheMsgList=Bs(Vr=this.cacheMsgList).call(Vr,function(Yn){return In-Yn.createTime<Cn.reportConfig.maxDelay});var An=Lo(Kr=this.msgList).call(Kr,0,this.reportConfig.maxSize);if(this.msgList=Lo(Sn=this.msgList).call(Sn,An.length),An.length<this.reportConfig.maxSize){var zn,yo,fo=this.reportConfig.maxSize-An.length;An=Ys(An).call(An,Lo(zn=this.lowPriorityMsgList).call(zn,0,fo)),this.lowPriorityMsgList=Lo(yo=this.lowPriorityMsgList).call(yo,fo)}if(An.length<this.reportConfig.maxSize){var Vo,ao,zr=this.reportConfig.maxSize-An.length;An=Ys(An).call(An,Lo(Vo=this.cacheMsgList).call(Vo,0,zr)),this.cacheMsgList=Lo(ao=this.cacheMsgList).call(ao,zr)}return Qn(An).call(An,function(Yn){En[Yn.module]?En[Yn.module].push(Yn.msg):En[Yn.module]=[Yn.msg]}),{uploadMsgArr:An,uploadMsg:En}}},{key:"upload",value:function(){var Fr,jr,Vr=this;if(this.enable&&!(this.lastReportTime&&Ia()-this.lastReportTime<this.reportConfig.minInterval)){var Kr=this.getUploadMsg(),Sn=Kr.uploadMsgArr,Cn=Kr.uploadMsg;if(Sn.length){this.lastReportTime=Ia();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:Cn},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(En){var In,An,zn,yo;Vr.cacheMsgList=Lo(In=Ys(An=Vr.cacheMsgList).call(An,Sn)).call(In,0,Vr.reportConfig.cacheMaxSize),(yo=(zn=Vr.reportConfig)===null||zn===void 0?void 0:zn.logger)===null||yo===void 0||yo.warn("Reporter upload failed",En)})}catch(En){(jr=(Fr=this.reportConfig)===null||Fr===void 0?void 0:Fr.logger)===null||jr===void 0||jr.warn("Exec reporter request failed",En)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),br}();return mr}()}),ua={setLogger:function(he){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function xe(Fe,qe){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var he=xe.prototype;return he.close=function(qe,Ce){throw new Error("Method not implemented.")},he.send=function(qe){throw new Error("Method not implemented.")},he.onclose=function(qe){throw new Error("Method not implemented.")},he.onerror=function(qe){throw new Error("Method not implemented.")},he.onmessage=function(qe){throw new Error("Method not implemented.")},he.onopen=function(qe){throw new Error("Method not implemented.")},xe}(),localStorage:{},request:function(he,Fe){throw new Error("Function not implemented.")},uploadFile:function(he){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")}},ki=TypeError,Vv=function(xe){return function(he,Fe,qe,Ce){Xr(Fe);var Pt=Pn(he),ar=hr(Pt),tr=Za(Pt),mr=xe?tr-1:0,br=xe?-1:1;if(qe<2)for(;;){if(mr in ar){Ce=ar[mr],mr+=br;break}if(mr+=br,xe?mr<0:tr<=mr)throw ki("Reduce of empty array with no initial value")}for(;xe?mr>=0:tr>mr;mr+=br)mr in ar&&(Ce=Fe(Ce,ar[mr],mr,Pt));return Ce}},Ca={left:Vv(!1),right:Vv(!0)}.left,kS=fi("reduce");_n({target:"Array",proto:!0,forced:!kS||!ds&&Br>79&&Br<83},{reduce:function(he){var Fe=arguments.length;return Ca(this,he,Fe,Fe>1?arguments[1]:void 0)}});var Hv=sa("Array").reduce,Qg=Array.prototype,Op=function(xe){var he=xe.reduce;return xe===Qg||vr(Qg,xe)&&he===Qg.reduce?Hv:he},zv=function(he){return he===void 0},nu={},Kc={};function Wv(xe,he){var Fe,qe,Ce;try{Ce=JSON.parse(xe)}catch(Vr){throw he.error("Parse command error: ",xe),Vr}var Pt=Ce.sid+"_"+Ce.cid,ar=Ce.r;if(Wc(Fe=["4_1","4_2","4_10","4_11"]).call(Fe,Pt)){var tr=Ce.r[1].headerPacket;Pt=tr.sid+"_"+tr.cid,ar=Ce.r[1].body}var mr,br=Kc[Pt],Nr=nu[br],Fr=function(Kr,Sn){var Cn=Nl[Kr];return Cn===null?null:new Ap(Kr,Sn,Cn,new Date().getTime())}(Ce.code,br),jr={cmd:br,raw:Ce,error:Fr,service:Nr==null?void 0:Nr.service,content:{}};if(jr.error){if(jr.error.cmd=br,jr.error.callFunc="parseCmd",!(!((qe=Nr==null?void 0:Nr.ignoreErrCodes)===null||qe===void 0)&&Wc(qe).call(qe,Ce.code)))return jr;he.warn("parseCmd:: ignore error ",jr.error),jr.error.ignore=!0}return!br||!Nr?(jr.notFound=!0,jr):(Nr.response&&Qn(mr=Nr.response).call(mr,function(Vr,Kr){var Sn=ar[Kr],Cn=Vr.type,En=Vr.name,In=Vr.reflectMapper;if(!zv(Sn))switch(Cn){case"Property":jr.content[En]=In?nc(Sn,In):Sn;break;case"PropertyArray":jr.content[En]=Fo(Sn).call(Sn,function(An){return In?nc(An,In):An});break;case"long":case"Long":case"byte":case"Byte":case"Number":jr.content[En]=+Sn;break;default:jr.content[En]=Sn}}),jr)}function Bd(xe,he){var Fe={};for(var qe in xe)he[qe]!==void 0&&(Fe[he[qe]]=xe[qe]);return Fe}function nc(xe,he){var Fe={};for(var qe in xe)he[qe]!==void 0&&(Fe[he[qe]]=xe[qe]);return Fe}function ps(xe){nu=Hr(nu,xe.cmdConfig),Kc=Hr(Kc,xe.cmdMap)}function Is(xe){var he;return Op(he=la(xe)).call(he,function(Fe,qe){var Ce,Pt=xe[qe];return Fe[qe]=Op(Ce=la(Pt)).call(Ce,function(ar,tr){return ar[Pt[tr]]=tr,ar},{}),Fe},{})}var ns=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],oc=["transport not supported","client not handshaken","unauthorized"],Qc=["reconnect"],Jg=function(xe){function he(qe,Ce,Pt){var ar;return(ar=xe.call(this)||this).url=Ce,ar.logger=Pt,ar.websocket=null,ar.core=qe,ar.url=Ce,ar.status="disconnected",ar.logger=Pt,ar.connect(),ar}ea(he,xe);var Fe=he.prototype;return Fe.connect=function(){var Ce=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+Ia(),{method:"GET",dataType:"text",timeout:8e3}).then(function(Pt){var ar=Pt.data.split(":"),tr=ar[0],mr=ar[1];return Ce.sessionId=tr,Ce.closeTimeout=1e3*mr,Ce._createWebsocket("wss://"+Ce.url+"/socket.io/1/websocket/"+tr)}).catch(function(Pt){Ce.logger.error("imsocket::handshake fail. ",Pt&&Pt.message),Ce.status="disconnected",Ce.emit("handshakeFailed")})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},Fe.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"})),this.websocket.close()}catch(Ce){this.logger.warn("attempt to close websocket error",Ce)}this.clean()}},Fe.clean=function(){this.status="disconnected",this.websocket&&(this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},Fe.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect")},Fe._createWebsocket=function(Ce){var Pt,ar=this;this.websocket=new ua.WebSocket(Ce),this.websocket.onmessage=Xo(Pt=this.onMessage).call(Pt,this),this.websocket.onclose=function(){ar.logger.log("imsocket:: receive websocket onclose event, current status",ar.status),ar.clean()},this.websocket.onerror=function(tr){ar.logger.error("imsocket:: onerror",tr)}},Fe.onMessage=function(Ce){var Pt;this.resetCloseTimer();var ar=this.decodePacket(Ce.data);if(ar)switch(ar.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",ar.data);break;case"event":ar.name&&this.emit(ar.name,ar.args);break;case"error":ar.reason==="unauthorized"?this.emit("connect_failed",ar.reason):this.emit("error",ar.reason);break;case"heartbeat":(Pt=this.websocket)===null||Pt===void 0||Pt.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",ar.type)}},Fe.encodePacket=function(Ce){var Pt,ar,tr=Ce.type,mr=Ce.id,br=mr===void 0?"":mr,Nr=Ce.endpoint,Fr=Nr===void 0?"":Nr,jr=Ce.ack,Vr=null;if(!tr)return"";switch(tr){case"error":Pt=Ce.reason?Ja(oc).call(oc,Ce.reason):"",ar=Ce.advice?Ja(Qc).call(Qc,Ce.advice):"",Pt===""&&ar===""||(Vr=Pt+(ar!==""?"+"+ar:""));break;case"message":Ce.data!==""&&(Vr=Ce.data);break;case"event":Pt={name:Ce.name},Pt=Ce.args&&Ce.args.length?{name:Ce.name,args:Ce.args}:{name:Ce.name},Vr=fa(Pt);break;case"json":Vr=fa(Ce.data);break;case"connect":Ce.qs&&(Vr=Ce.qs);break;case"ack":Vr=Ce.ackId+(Ce.args&&Ce.args.length?"+"+fa(Ce.args):"")}var Kr=[Ja(ns).call(ns,tr),br+(jr==="data"?"+":""),Fr];return Vr!=null&&Kr.push(Vr),Kr.join(":")},Fe.decodePacket=function(Ce){if(Ce)if(Ce.charAt(0)!=""){var Pt=Ce.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(Pt){var ar,tr=Pt[1],mr=Pt[2],br=Pt[3],Nr=Pt[4],Fr=Pt[5],jr={type:ns[+tr],endpoint:Nr};switch(mr&&(jr.id=mr,jr.ack=!br||"data"),jr.type){case"error":ar=Fr.split("+"),jr.reason=oc[+ar[0]]||"";break;case"message":jr.data=Fr||"";break;case"connect":jr.qs=Fr||"";break;case"event":try{var Vr=JSON.parse(Fr);jr.name=Vr.name,jr.args=Vr.args}catch(Kr){this.logger.error("imsocket::parseData::type::event error",Kr)}jr.args=jr.args||[];break;case"json":try{jr.data=JSON.parse(Fr)}catch(Kr){this.logger.error("imsocket::parseData::type::json error",Kr)}break;case"ack":if((ar=Fr.match(/^([0-9]+)(\+)?(.*)/))&&(jr.ackId=ar[1],jr.args=[],ar[3]))try{jr.args=ar[3]?JSON.parse(ar[3]):[]}catch(Kr){this.logger.error("imsocket::parseData::type::ack error",Kr)}}return jr}}else this.logger.error("imsocket::unrecognize dataStr",Lo(Ce).call(Ce,0,20))},Fe.send=function(Ce){var Pt,ar={data:Ce,type:"message",endpoint:""};(Pt=this.websocket)===null||Pt===void 0||Pt.send(this.encodePacket(ar))},Fe.resetCloseTimer=function(){var Ce=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=Ro(function(){Ce.close()},this.closeTimeout))},he}(hi),Yg=sa("Array").values,Rp=Array.prototype,wS={DOMTokenList:!0,NodeList:!0},Bp=function(xe){var he=xe.values;return xe===Rp||vr(Rp,xe)&&he===Rp.values||hn(wS,ci(xe))?Yg:he};_n({target:"Array",stat:!0},{isArray:Ms});var Hi=kr.Array.isArray,xS=Ws.every,Fp=fi("every");_n({target:"Array",proto:!0,forced:!Fp},{every:function(he){return xS(this,he,arguments.length>1?arguments[1]:void 0)}});var Es=sa("Array").every,Xg=Array.prototype,_S=function(xe){var he=xe.every;return xe===Xg||vr(Xg,xe)&&he===Xg.every?Es:he},zi=function(he){return he!=null&&typeof he=="object"},Zg=function(he){return zi(he)&&zc(he)=="[object RegExp]"},ou=function(he){return function(Fe){return he(Fe)}},Fs=g(function(xe,he){var Fe=he&&!he.nodeType&&he,qe=Fe&&xe&&!xe.nodeType&&xe,Ce=qe&&qe.exports===Fe&&Nv.process,Pt=function(){try{var ar=qe&&qe.require&&qe.require("util").types;return ar||Ce&&Ce.binding&&Ce.binding("util")}catch{}}();xe.exports=Pt}),Gv=Fs&&Fs.isRegExp,eh=Gv?ou(Gv):Zg,au=ni["__core-js_shared__"],th=function(){var xe=/[^.]+$/.exec(au&&au.keys&&au.keys.IE_PROTO||"");return xe?"Symbol(src)_1."+xe:""}(),IS=function(he){return!!th&&th in he},rh=Function.prototype.toString,Jc=function(he){if(he!=null){try{return rh.call(he)}catch{}try{return he+""}catch{}}return""},ES=/^\[object .+?Constructor\]$/,PS=Function.prototype,Rl=Object.prototype,AS=PS.toString,NS=Rl.hasOwnProperty,OS=RegExp("^"+AS.call(NS).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),RS=function(he){return!(!qi(he)||IS(he))&&(Ep(he)?OS:ES).test(Jc(he))},BS=function(he,Fe){return he==null?void 0:he[Fe]},Bl=function(he,Fe){var qe=BS(he,Fe);return RS(qe)?qe:void 0},Fd=Bl(Object,"create"),FS=function(){this.__data__=Fd?Fd(null):{},this.size=0},Fl=function(he){var Fe=this.has(he)&&delete this.__data__[he];return this.size-=Fe?1:0,Fe},$d=Object.prototype.hasOwnProperty,$S=function(he){var Fe=this.__data__;if(Fd){var qe=Fe[he];return qe==="__lodash_hash_undefined__"?void 0:qe}return $d.call(Fe,he)?Fe[he]:void 0},LS=Object.prototype.hasOwnProperty,jS=function(he){var Fe=this.__data__;return Fd?Fe[he]!==void 0:LS.call(Fe,he)},DS=function(he,Fe){var qe=this.__data__;return this.size+=this.has(he)?0:1,qe[he]=Fd&&Fe===void 0?"__lodash_hash_undefined__":Fe,this};function su(xe){var he=-1,Fe=xe==null?0:xe.length;for(this.clear();++he<Fe;){var qe=xe[he];this.set(qe[0],qe[1])}}su.prototype.clear=FS,su.prototype.delete=Fl,su.prototype.get=$S,su.prototype.has=jS,su.prototype.set=DS;var Kv=su,US=function(){this.__data__=[],this.size=0},Pc=function(he,Fe){return he===Fe||he!=he&&Fe!=Fe},Ld=function(he,Fe){for(var qe=he.length;qe--;)if(Pc(he[qe][0],Fe))return qe;return-1},qS=Array.prototype.splice,$p=function(he){var Fe=this.__data__,qe=Ld(Fe,he);return!(qe<0)&&(qe==Fe.length-1?Fe.pop():qS.call(Fe,qe,1),--this.size,!0)},Lp=function(he){var Fe=this.__data__,qe=Ld(Fe,he);return qe<0?void 0:Fe[qe][1]},VS=function(he){return Ld(this.__data__,he)>-1},HS=function(he,Fe){var qe=this.__data__,Ce=Ld(qe,he);return Ce<0?(++this.size,qe.push([he,Fe])):qe[Ce][1]=Fe,this};function iu(xe){var he=-1,Fe=xe==null?0:xe.length;for(this.clear();++he<Fe;){var qe=xe[he];this.set(qe[0],qe[1])}}iu.prototype.clear=US,iu.prototype.delete=$p,iu.prototype.get=Lp,iu.prototype.has=VS,iu.prototype.set=HS;var jp=iu,jd=Bl(ni,"Map"),cu=function(){this.size=0,this.__data__={hash:new Kv,map:new(jd||jp),string:new Kv}},Dp=function(he){var Fe=typeof he;return Fe=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?he!=="__proto__":he===null},Yc=function(he,Fe){var qe=he.__data__;return Dp(Fe)?qe[typeof Fe=="string"?"string":"hash"]:qe.map},zS=function(he){var Fe=Yc(this,he).delete(he);return this.size-=Fe?1:0,Fe},WS=function(he){return Yc(this,he).get(he)},Up=function(he){return Yc(this,he).has(he)},GS=function(he,Fe){var qe=Yc(this,he),Ce=qe.size;return qe.set(he,Fe),this.size+=qe.size==Ce?0:1,this};function lu(xe){var he=-1,Fe=xe==null?0:xe.length;for(this.clear();++he<Fe;){var qe=xe[he];this.set(qe[0],qe[1])}}lu.prototype.clear=cu,lu.prototype.delete=zS,lu.prototype.get=WS,lu.prototype.has=Up,lu.prototype.set=GS;var qp=lu,KS=function(he){return this.__data__.set(he,"__lodash_hash_undefined__"),this},uu=function(he){return this.__data__.has(he)};function $l(xe){var he=-1,Fe=xe==null?0:xe.length;for(this.__data__=new qp;++he<Fe;)this.add(xe[he])}$l.prototype.add=$l.prototype.push=KS,$l.prototype.has=uu;var nh=$l,Qv=function(he,Fe,qe,Ce){for(var Pt=he.length,ar=qe+(Ce?1:-1);Ce?ar--:++ar<Pt;)if(Fe(he[ar],ar,he))return ar;return-1},Vp=function(he){return he!=he},oh=function(he,Fe,qe){for(var Ce=qe-1,Pt=he.length;++Ce<Pt;)if(he[Ce]===Fe)return Ce;return-1},QS=function(he,Fe,qe){return Fe==Fe?oh(he,Fe,qe):Qv(he,Vp,qe)},Jv=function(he,Fe){return!!(he!=null&&he.length)&&QS(he,Fe,0)>-1},Yv=function(he,Fe,qe){for(var Ce=-1,Pt=he==null?0:he.length;++Ce<Pt;)if(qe(Fe,he[Ce]))return!0;return!1},ah=function(he,Fe){for(var qe=-1,Ce=he==null?0:he.length,Pt=Array(Ce);++qe<Ce;)Pt[qe]=Fe(he[qe],qe,he);return Pt},Hp=function(he,Fe){return he.has(Fe)},Xv=function(he,Fe,qe,Ce){var Pt=-1,ar=Jv,tr=!0,mr=he.length,br=[],Nr=Fe.length;if(!mr)return br;qe&&(Fe=ah(Fe,ou(qe))),Ce?(ar=Yv,tr=!1):Fe.length>=200&&(ar=Hp,tr=!1,Fe=new nh(Fe));e:for(;++Pt<mr;){var Fr=he[Pt],jr=qe==null?Fr:qe(Fr);if(Fr=Ce||Fr!==0?Fr:0,tr&&jr==jr){for(var Vr=Nr;Vr--;)if(Fe[Vr]===jr)continue e;br.push(Fr)}else ar(Fe,jr,Ce)||br.push(Fr)}return br},du=function(he){return he},sh=function(he,Fe,qe){switch(qe.length){case 0:return he.call(Fe);case 1:return he.call(Fe,qe[0]);case 2:return he.call(Fe,qe[0],qe[1]);case 3:return he.call(Fe,qe[0],qe[1],qe[2])}return he.apply(Fe,qe)},ih=Math.max,zp=function(he,Fe,qe){return Fe=ih(Fe===void 0?he.length-1:Fe,0),function(){for(var Ce=arguments,Pt=-1,ar=ih(Ce.length-Fe,0),tr=Array(ar);++Pt<ar;)tr[Pt]=Ce[Fe+Pt];Pt=-1;for(var mr=Array(Fe+1);++Pt<Fe;)mr[Pt]=Ce[Pt];return mr[Fe]=qe(tr),sh(he,this,mr)}},Zv=function(he){return function(){return he}},Dd=function(){try{var xe=Bl(Object,"defineProperty");return xe({},"",{}),xe}catch{}}(),ey=Dd?function(xe,he){return Dd(xe,"toString",{configurable:!0,enumerable:!1,value:Zv(he),writable:!0})}:du,JS=Date.now,Wp=function(he){var Fe=0,qe=0;return function(){var Ce=JS(),Pt=16-(Ce-qe);if(qe=Ce,Pt>0){if(++Fe>=800)return arguments[0]}else Fe=0;return he.apply(void 0,arguments)}},ty=Wp(ey),ch=function(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991},Gp=function(he){return he!=null&&ch(he.length)&&!Ep(he)},ry=function(he){return zi(he)&&Gp(he)},ny=function(he,Fe){return ty(zp(he,Fe,du),he+"")}(function(xe,he){return ry(xe)?Xv(xe,he):[]}),lh=ny;function Kp(xe,he){return he instanceof RegExp?"__REGEXP "+he.toString():he}function Jn(xe,he,Fe){var qe;he===void 0&&(he={});var Ce={};return Qn(qe=la(xe)).call(qe,function(Pt){var ar=xe[Pt].type,tr=Fe?"In "+Fe+", ":"";if(he[Pt]===void 0){if(xe[Pt].required===!1)return void(Ce[Pt]=he[Pt]);throw new Bo(tr+'param "'+Pt+'" is required',{key:Pt},"required")}var mr=YS[ar];if(mr&&!mr(he,Pt,xe[Pt]))throw new Bo(tr+'param "'+Pt+'" expects '+fa(xe[Pt],Kp),{key:Pt,value:he[Pt]},fa(xe[Pt]));Ce[Pt]=he[Pt]}),Ce}var YS={string:function(he,Fe,qe){var Ce=qe.allowEmpty,Pt=qe.max,ar=qe.min,tr=qe.regExp,mr=he[Fe];return typeof mr=="string"&&(Ce!==!1||mr!=="")&&!(typeof Pt=="number"&&mr.length>Pt)&&!(typeof ar=="number"&&mr.length<ar)&&!(eh(tr)&&!tr.test(mr))},number:function(he,Fe,qe){var Ce=qe.min,Pt=qe.max,ar=he[Fe];return typeof ar=="number"&&!(typeof Ce=="number"&&ar<Ce)&&!(typeof Pt=="number"&&ar>Pt)},boolean:function(he,Fe){return typeof he[Fe]=="boolean"},enum:function(he,Fe,qe){var Ce=Bp(qe),Pt=he[Fe];return!Ce||Ja(Ce).call(Ce,Pt)>-1},array:function(he,Fe,qe){var Ce,Pt=qe.itemType,ar=qe.rules,tr=qe.min,mr=qe.max,br=Bp(qe),Nr=he[Fe];return!!Hi(Nr)&&!(typeof mr=="number"&&Nr.length>mr)&&!(typeof tr=="number"&&Nr.length<tr)&&!(Pt&&Pt!=="enum"&&!_S(Nr).call(Nr,function(Fr){return typeof Fr===Pt}))&&(Pt!=="enum"||!br||!lh.apply(void 0,Ys(Ce=[Nr]).call(Ce,br)).length)&&(ar&&Qn(Nr).call(Nr,function(Fr,jr){return Jn(ar,Fr,Fe+"["+jr+"]")}),!0)},object:function(he,Fe,qe){var Ce=qe.rules,Pt=he[Fe];return Ce&&Jn(Ce,Pt,Fe),!0}},pu=Bl(ni,"Set"),XS=function(){},On=function(he){var Fe=-1,qe=Array(he.size);return he.forEach(function(Ce){qe[++Fe]=Ce}),qe},ZS=pu&&1/On(new pu([,-0]))[1]==1/0?function(xe){return new pu(xe)}:XS,fu=ZS,eT=function(he,Fe,qe){var Ce=-1,Pt=Jv,ar=he.length,tr=!0,mr=[],br=mr;if(qe)tr=!1,Pt=Yv;else if(ar>=200){var Nr=Fe?null:fu(he);if(Nr)return On(Nr);tr=!1,Pt=Hp,br=new nh}else br=Fe?[]:mr;e:for(;++Ce<ar;){var Fr=he[Ce],jr=Fe?Fe(Fr):Fr;if(Fr=qe||Fr!==0?Fr:0,tr&&jr==jr){for(var Vr=br.length;Vr--;)if(br[Vr]===jr)continue e;Fe&&br.push(jr),mr.push(Fr)}else Pt(br,jr,qe)||(br!==mr&&br.push(jr),mr.push(Fr))}return mr},Qp=function(he){return he&&he.length?eT(he):[]},uh=`	
\v\f\r \u2028\u2029\uFEFF`,oy=_e("".replace),Jp="["+uh+"]",tT=RegExp("^"+Jp+Jp+"*"),dh=RegExp(Jp+Jp+"*$"),Yp=function(xe){return function(he){var Fe=rs(Pr(he));return 1&xe&&(Fe=oy(Fe,tT,"")),2&xe&&(Fe=oy(Fe,dh,"")),Fe}},Xp={start:Yp(1),end:Yp(2),trim:Yp(3)}.trim,Ud=L.parseInt,ay=L.Symbol,Zp=ay&&ay.iterator,sy=/^[+-]?0x/i,qd=_e(sy.exec),ph=Ud(uh+"08")!==8||Ud(uh+"0x16")!==22||Zp&&!V(function(){Ud(Object(Zp))})?function(he,Fe){var qe=Xp(rs(he));return Ud(qe,Fe>>>0||(qd(sy,qe)?16:10))}:Ud;_n({global:!0,forced:parseInt!=ph},{parseInt:ph});var ac,Uo=kr.parseInt,ef=(ac=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return ac()+ac()+ac()+ac()+ac()+ac()+ac()+ac()});function Wi(xe){var he;return Bs(he=la(xe)).call(he,function(Fe){return!(+Fe>=0)})}function sc(xe,he){var Fe,qe=Bs(Fe=la(xe)).call(Fe,function(Ce){return xe[Ce]==he});return qe.length>0?qe[0]:void 0}function na(xe,he){if(he===void 0&&(he="-"),!xe)throw new Ec("No sessionId",{},400);var Fe=Ja(xe).call(xe,he);if(Fe===-1)throw new Ec("Can not find conjunctions",{},400);var qe=Lo(xe).call(xe,0,Fe);return{accid:Lo(xe).call(xe,Fe+1),scene:qe==="super_team"?"superTeam":qe}}var fh=TypeError,Ea=Object.getOwnPropertyDescriptor,iy=$e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(xe){return xe instanceof TypeError}}()?function(xe,he){if(Ms(xe)&&!Ea(xe,"length").writable)throw fh("Cannot set read only .length");return xe.length=he}:function(xe,he){return xe.length=he},rT=TypeError,tf=function(xe,he){if(!delete xe[he])throw rT("Cannot delete property "+bn(he)+" of "+bn(xe))},nT=fc("splice"),oT=Math.max,rf=Math.min;_n({target:"Array",proto:!0,forced:!nT},{splice:function(he,Fe){var qe,Ce,Pt,ar,tr,mr,br=Pn(this),Nr=Za(br),Fr=Ai(he,Nr),jr=arguments.length;for(jr===0?qe=Ce=0:jr===1?(qe=0,Ce=Nr-Fr):(qe=jr-2,Ce=rf(oT(uc(Fe),0),Nr-Fr)),Lu(Nr+qe-Ce),Pt=Uu(br,Ce),ar=0;ar<Ce;ar++)(tr=Fr+ar)in br&&ii(Pt,ar,br[tr]);if(Pt.length=Ce,qe<Ce){for(ar=Fr;ar<Nr-Ce;ar++)mr=ar+qe,(tr=ar+Ce)in br?br[mr]=br[tr]:tf(br,mr);for(ar=Nr;ar>Nr-Ce+qe;ar--)tf(br,ar-1)}else if(qe>Ce)for(ar=Nr-Ce;ar>Fr;ar--)mr=ar+qe-1,(tr=ar+Ce-1)in br?br[mr]=br[tr]:tf(br,mr);for(ar=0;ar<qe;ar++)br[ar+Fr]=arguments[ar+2];return iy(br,Nr-Ce+qe),Pt}});var aT=sa("Array").splice,mh=Array.prototype,gh=function(xe){var he=xe.splice;return xe===mh||vr(mh,xe)&&he===mh.splice?aT:he},sT=function(xe,he,Fe,qe){try{return qe?he(po(Fe)[0],Fe[1]):he(Fe)}catch(Ce){sd(xe,"throw",Ce)}},nf=Array,cy=!Tg(function(xe){Array.from(xe)});_n({target:"Array",stat:!0,forced:cy},{from:function(he){var Fe=Pn(he),qe=ml(this),Ce=arguments.length,Pt=Ce>1?arguments[1]:void 0,ar=Pt!==void 0;ar&&(Pt=Go(Pt,Ce>2?arguments[2]:void 0));var tr,mr,br,Nr,Fr,jr,Vr=Ml(Fe),Kr=0;if(!Vr||this===nf&&Dm(Vr))for(tr=Za(Fe),mr=qe?new this(tr):nf(tr);tr>Kr;Kr++)jr=ar?Pt(Fe[Kr],Kr):Fe[Kr],ii(mr,Kr,jr);else for(Fr=(Nr=Sc(Fe,Vr)).next,mr=qe?new this:[];!(br=jt(Fr,Nr)).done;Kr++)jr=ar?sT(Nr,Pt,[br.value,Kr],!0):br.value,ii(mr,Kr,jr);return mr.length=Kr,mr}});var of=kr.Array.from,Vd=Ml;function ly(xe,he){var Fe,qe=ja!==void 0&&Vd(xe)||xe["@@iterator"];if(qe)return Xo(Fe=(qe=qe.call(xe)).next).call(Fe,qe);if(Hi(xe)||(qe=function(ar,tr){var mr;if(ar){if(typeof ar=="string")return Xc(ar,tr);var br=Lo(mr=Object.prototype.toString.call(ar)).call(mr,8,-1);if(br==="Object"&&ar.constructor&&(br=ar.constructor.name),br==="Map"||br==="Set")return of(ar);if(br==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(br))return Xc(ar,tr)}}(xe))||he&&xe&&typeof xe.length=="number"){qe&&(xe=qe);var Ce=0;return function(){return Ce>=xe.length?{done:!0}:{done:!1,value:xe[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xc(xe,he){(he==null||he>xe.length)&&(he=xe.length);for(var Fe=0,qe=new Array(he);Fe<he;Fe++)qe[Fe]=xe[Fe];return qe}var fs,uy=function(){function xe(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var he=xe.prototype;return he.addTimer=function(qe,Ce,Pt){Ce===void 0&&(Ce=0),Pt===void 0&&(Pt=1);var ar=new Date().getTime(),tr=this.id;return this.timerList.push({id:tr,loop:Pt,count:0,timeout:ar+Ce,interval:Ce,callback:qe}),this.id++,this.checkTimer(ar),tr},he.checkTimer=function(qe){if(qe===void 0&&(qe=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var Ce,Pt,ar=0,tr=ly(this.timerList);!(Ce=tr()).done;){var mr=Ce.value;(ar===0||ar>mr.timeout)&&(ar=mr.timeout)}this.timerList.length!==0&&(this.timer===null||ar<this.timeout||this.timeout<qe)&&(this.timer=Ro(Xo(Pt=this.nowTime).call(Pt,this),ar-qe),this.timeout=ar)}},he.nowTime=function(){for(var qe,Ce=new Date().getTime(),Pt=ly(this.timerList);!(qe=Pt()).done;){var ar=qe.value;Ce>=ar.timeout&&(ar.callback(),ar.count++,ar.timeout=Ce+ar.interval)}this.clerTime(),this.checkTimer(Ce)},he.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},he.deleteTimer=function(qe){for(var Ce=this.timerList.length-1;Ce>=0;Ce--){var Pt;this.timerList[Ce].id===qe&&gh(Pt=this.timerList).call(Pt,Ce,1)}},he.removeFinished=function(){for(var qe=this.timerList.length-1;qe>=0;qe--){var Ce,Pt=this.timerList[qe];Pt.loop>=0&&Pt.count>=Pt.loop&&gh(Ce=this.timerList).call(Ce,qe,1)}},he.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},xe}(),dy=function(){function xe(Fe){this.core=Fe}var he=xe.prototype;return he.request=function(qe,Ce){var Pt=this,ar=new Date().getTime();return ua.request(qe,Ce).catch(function(tr){var mr,br,Nr=tr;throw Pt.core.reporter.reportTraceStart("exceptions",{user_id:Pt.core.options.account,trace_id:(br=(mr=Pt.core)===null||mr===void 0?void 0:mr.socket)===null||br===void 0?void 0:br.sessionId,start_time:ar,action:1}),Pt.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Nr.code=="number"?Nr.code:0,description:Nr.message||""+Nr.code,operation_type:0,target:qe,context:Ce?fa(Ce):""}),Pt.core.reporter.reportTraceEnd("exceptions",1),tr})},he.uploadFile=function(qe){var Ce=this,Pt=new Date().getTime();return ua.uploadFile(qe).catch(function(ar){var tr,mr,br=ar;Ce.core.reporter.reportTraceStart("exceptions",{user_id:Ce.core.options.account,trace_id:(mr=(tr=Ce.core)===null||tr===void 0?void 0:tr.socket)===null||mr===void 0?void 0:mr.sessionId,start_time:Pt,action:1});var Nr=ua.platform==="BROWSER"?qe.chunkUploadHost:qe.commonUploadHost?qe.commonUploadHost+"/"+(qe.nosToken&&qe.nosToken.bucket):"https://nos.netease.com/nim";throw Ce.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof br.code=="number"?br.code:0,description:br.message||""+br.code,operation_type:1,target:Nr}),Ce.core.reporter.reportTraceEnd("exceptions",1),ar})},xe}();(function(xe){xe[xe.ACTIVE=1]="ACTIVE",xe[xe.KICKED=2]="KICKED",xe[xe.OFFLINE=3]="OFFLINE"})(fs||(fs={}));var $s=window&&Ep(window.addEventListener)&&Ep(window.removeEventListener),py=function(xe){function he(qe,Ce){var Pt;(Pt=xe.call(this)||this).status="unconnected",Pt.linkUrls=[],Pt.eventBus=new hi,Pt.packetSer=1,Pt.retryCount=0,Pt.reconnectTimer=0,Pt.backoff=new tc({max:8e3,min:1600,jitter:.01}),Pt.sendingCmdMap=new _c,Pt.pingTimer=0,Pt.config=$v,Pt.abtInfo={},Jn({linkUrls:{type:"array",itemType:"string",required:!1}},qe),Pt.options=Hr(Hr({},uS),qe),Pt.adapters=new dy(k(Pt));var ar=ua.localStorage.getItem("__NIM_DEVC_ID__");Pt.options.isFixedDeviceId?(ar=ua.localStorage.getItem("__NIM_DEVC_ID__")||ef(),ua.localStorage.setItem("__NIM_DEVC_ID__",ar)):ar=ef(),Pt.config=Hr(Hr(Hr({},$v),Ce),{deviceId:ar}),Pt.timerManager=new uy,Pt.logger=new Np(Pt.options.debugLevel,Pt.options.account);var tr=ua.getSystemInfo();return Pt.reporter=new MS({common:{app_key:qe.appkey,dev_id:ar,platform:"Web",sdk_ver:"0.13.1",env:"online",os_name:tr.os,os_ver:tr.osVer,model:tr.hostEnvVer,manufactor:tr.hostEnv,host_env:tr.hostEnv,host_info:tr.hostInfo,host_env_ver:tr.hostEnvVer},request:ua.request,logger:Pt.logger,autoStart:ua.platform==="BROWSER"}),ua.setLogger(Pt.logger),Pt.logger.log("Core init, version ","0.13.1"," sdk version ",91001," appkey ",qe.appkey),Pt}ea(he,xe);var Fe=he.prototype;return Fe.emit=function(Ce){try{for(var Pt,ar,tr=Ia(),mr=arguments.length,br=new Array(mr>1?mr-1:0),Nr=1;Nr<mr;Nr++)br[Nr-1]=arguments[Nr];var Fr=(Pt=xe.prototype.emit).call.apply(Pt,Ys(ar=[this,Ce]).call(ar,br)),jr=Ia()-tr;return jr>=10&&this.logger.warn("Core::emit event: "+Ce+" process takes: "+jr+"ms"),Fr}catch(Vr){return this.logger.error("Core::emit event: "+Ce+". Error: "+Vr),!1}},Fe.connect=function(Ce,Pt){return Ce===void 0&&(Ce={}),Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr,Fr,jr;return wr.wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:if(Jn({linkUrls:{type:"array",itemType:"string",required:!1}},Ce),/^(unconnected|waitReconnect)$/.test(this.status)){Kr.next=5;break}return tr="Core socket status is "+this.status+", and would not connect",this.logger.warn(tr),Kr.abrupt("return",_o.reject(tr));case 5:this.status="connecting",Ce.linkUrls&&Ce.linkUrls.length>0&&(this.linkUrls=Ys(mr=Ce.linkUrls).call(mr,this.linkUrls),this.linkUrls=Qp(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push(Lv),br=0;case 9:if(!(br<this.linkUrls.length)){Kr.next=32;break}return Nr=this.linkUrls[br],Fr=new Date().getTime(),Kr.prev=12,Kr.next=15,this.doConnect(Nr);case 15:return this.status="connected",this.logger.log("core:: connect success with url: "+Nr),this.abtRequest(),Kr.abrupt("return",Nr);case 21:Kr.prev=21,Kr.t0=Kr.catch(12),jr=Kr.t0,Pt&&Pt(jr,Nr),this.reporter.reportTraceStart("exceptions",{user_id:this.options.account,start_time:Fr,action:0}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof jr.code=="number"?jr.code:0,description:jr.message||""+jr.code,operation_type:0,target:Nr}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+Nr,Kr.t0);case 29:br++,Kr.next=9;break;case 32:throw this.retryCount===0?this.doDisconnect(fs.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(fs.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket handshake failed");case 34:case"end":return Kr.stop()}},ar,this,[[12,21]])}))},Fe.doConnect=function(Ce){var Pt=this;return new _o(function(ar,tr){var mr;Pt.socket=new Jg(Pt,Ce,Pt.logger),Pt.socket.on("connect",function(){Pt.logger.log("socket on connect",Ce),ar()}),Pt.socket.on("message",Xo(mr=Pt.onMessage).call(mr,Pt)),Pt.socket.on("disconnect",function(br){Pt.logger.log("core:: socket on disconnect",br),Pt.doDisconnect(fs.OFFLINE,"SocketOnDisconnect")}),Pt.socket.on("handshakeFailed",function(){Pt.logger.warn("core:: socket handshake failed"),tr(new Ec("handshake failed",{},408))})})},Fe.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},Fe.doDisconnect=function(Ce,Pt){if(this.logger.log("doDisconnect: type "+Ce+", description "+Pt),this.status!=="unconnected"){this.markAllCmdInvaild(new Ec("Packet timeout due to instance disconnect",{},408)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0);var ar=!this.options.needReconnect||this.retryCount>=this.options.reconnectionAttempts;if(Ce===fs.ACTIVE||ar)this.logger.log("doDisconnect: emit disconnect, type "+Ce,ar),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.eventBus.emit("disconnect"),this.emit("disconnect"),this.destroyOnlineListener();else if(Ce===fs.KICKED){this.logger.log("doDisconnect: kicked"),this.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var tr=typeof Pt=="string"?{reason:"unknow",message:Pt}:Pt;this.eventBus.emit("kicked",tr),this.emit("kicked",tr),this.destroyOnlineListener()}else Ce===fs.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},Fe.attempToReconnect=function(){var Ce=this;if(this.status!=="waitReconnect"){var Pt=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+Pt),this.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:Pt}),this.emit("willReconnect",{retryCount:this.retryCount,duration:Pt}),this.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=Ro(function(){Ce.status==="waitReconnect"?Ce.connect({isAutoReconnect:!0}).catch(function(){Ce.logger.error("core::attempToReconnect failed "+Ce.retryCount)}):Ce.logger.warn("doDisconnect: reconnectTimer status is "+Ce.status+", would not go on reconnecting")},Pt)}else this.logger.warn("doDisconnect: already is waiting reconnect")},Fe.sendCmd=function(Ce,Pt,ar){var tr=this;if(this.status!=="logined"&&Ce!=="login"&&Ce!=="chatroomLogin"&&Ce!=="qchatLogin")return this.logger.warn("nim status is "+this.status+", so can not sendCmd "+Ce),_o.reject({cmd:Ce,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return _o.reject("No_socket");var mr=Ce!=="heartbeat",br=mr?this.packetSer++:0,Nr=function(En,In,An,zn){var yo=nu[En];if(!yo)return An.error("createCmd:: can not find cmd config: ",En),null;var fo,Vo={SER:In,SID:yo.sid,CID:yo.cid,Q:[]};return yo.params&&zn&&Qn(fo=yo.params).call(fo,function(ao){var zr=zn[ao.name];if(!zv(zr)){var Yn=ao.type,oo=ao.reflectMapper;switch(ao.type){case"PropertyArray":Yn="ArrayMable",zr=Fo(zr).call(zr,function(Wn){return{t:"Property",v:oo?Bd(Wn,oo):Wn}});break;case"Property":zr=oo?Bd(zr,oo):zr;break;case"Bool":case"bool":zr=zr?"true":"false"}Vo.Q.push({t:Yn,v:zr})}}),{packet:Vo,isNoResponse:yo.isNoResponse||!1}}(Ce,br,this.logger,Pt);if(!Nr){var Fr="SendCmd "+br+" "+Ce+" error";return this.logger.error(Fr),_o.reject(Fr)}var jr=Nr.packet,Vr=Nr.isNoResponse,Kr=fa(jr);mr&&(this.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",Ce,"ser:"+br,Kr):this.logger.log("core::sendCmd",Ce,"ser:"+br));var Sn=new Date().getTime();return new _o(function(Cn,En){tr.sendingCmdMap.set(br,{cmd:Ce,params:Pt,callback:[Cn,En],timer:Vr?null:Ro(function(){var An,zn=new Ap(504,Ce,"Packet Timeout",new Date().getTime(),{message:"ser "+br+" cmd "+Ce+" timeout"});zn.callFunc="sendCmd",tr.markCmdInvalid(br,zn,Ce),tr.reporter.reportTraceStart("exceptions",{user_id:tr.options.account,trace_id:(An=tr.socket)===null||An===void 0?void 0:An.sessionId,start_time:Sn,action:2}),tr.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:jr.SID+"-"+jr.CID,context:""+jr.SER}),tr.reporter.reportTraceEnd("exceptions",1)},ar&&ar.timeout?ar.timeout:tr.config.timeout)});try{tr.socket.send(Kr)}catch(An){var In=new Ap(415,Ce,An&&An.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:An});In.callFunc="sendCmd",tr.markCmdInvalid(br,In,Ce),En(An)}})},Fe.onMessage=function(Ce){var Pt=Wv(Ce,this.logger);if(Pt){var ar=Pt.raw.ser;if(Pt.error&&this.logger.error("core:onMessage packet error",Pt.raw.sid+"_"+Pt.raw.cid+", ser:"+ar+",",Pt.error),!Pt.notFound)return Pt.cmd!=="heartbeat"&&(this.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+ar,Pt.cmd,Pt.content):this.logger.log("imsocket::recvCmd ser:"+ar,Pt.cmd)),Pt.__receiveTime=Ia(),Pt;this.logger.warn("core::onMessage packet not found",Pt.raw.sid+"_"+Pt.raw.cid+", ser:"+ar)}},Fe.markCmdInvalid=function(Ce,Pt,ar){var tr=this.sendingCmdMap.get(Ce);if(tr){var mr=tr.callback,br=tr.timer;br&&clearTimeout(br),this.sendingCmdMap.delete(Ce),this.logger.warn("packet "+Ce+", "+ar+" is invalid:",Pt),mr[1](Pt)}},Fe.markAllCmdInvaild=function(Ce){var Pt;this.logger.log("markAllCmdInvaild"),Qn(Pt=this.sendingCmdMap).call(Pt,function(ar){var tr=ar.callback,mr=ar.timer;mr&&clearTimeout(mr),tr[1](Ce)}),this.sendingCmdMap.clear()},Fe.ping=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt=this;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return clearTimeout(this.pingTimer),tr.prev=1,tr.next=4,this.sendCmd("heartbeat");case 4:tr.next=14;break;case 6:return tr.prev=6,tr.t0=tr.catch(1),tr.next=10,this.testHeartBeat5Timeout();case 10:if(!tr.sent){tr.next=14;break}return this.doDisconnect(fs.OFFLINE,"PingError"),tr.abrupt("return");case 14:this.pingTimer=Ro(function(){Pt.ping()},3e4);case 15:case"end":return tr.stop()}},Ce,this,[[1,6]])}))},Fe.testHeartBeat5Timeout=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:clearTimeout(this.pingTimer),Pt=0;case 2:if(!(Pt<5)){tr.next=15;break}return tr.prev=3,tr.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return tr.abrupt("return",!1);case 9:tr.prev=9,tr.t0=tr.catch(3),this.logger.debug("core:: test heartbeat "+Pt+" Timeout");case 12:Pt++,tr.next=2;break;case 15:return tr.abrupt("return",!0);case 16:case"end":return tr.stop()}},Ce,this,[[3,9]])}))},Fe.initOnlineListener=function(){var Ce,Pt;this.onlineListener||($s?(this.onlineListener=Xo(Ce=function(){this.status==="logined"&&this.ping()}).call(Ce,this),this.offlineListener=Xo(Pt=function(){this.logger.log("offline"),this.doDisconnect(fs.OFFLINE,"OfflineListener")}).call(Pt,this),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener not support add listener"))},Fe.destroyOnlineListener=function(){this.onlineListener&&(window.removeEventListener("online",this.onlineListener),this.onlineListener=void 0),this.offlineListener&&(window.removeEventListener("offline",this.offlineListener),this.offlineListener=void 0)},Fe.disconnect=function(){switch(this.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(fs.ACTIVE,"UserActiveDisconnect"),_o.resolve();case"unconnected":case"destroyed":return _o.resolve()}},Fe.destroy=function(){var Ce=this;return this.disconnect().then(function(){Ce.status="destroyed",Ce.removeAllListeners(),Ce.eventBus.removeAllListeners(),Ce.reporter.destroy(),Ce.connect=function(){return _o.resolve()},Ce.disconnect=function(){return _o.resolve()},Ce.destroy=function(){return _o.resolve()}})},Fe.abtRequest=function(){var Ce,Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:if(this.options.isAbtestEnable){Nr.next=2;break}return Nr.abrupt("return");case 2:if(!this.abtInfo.experiments){Nr.next=4;break}return Nr.abrupt("return");case 4:if(this.options.abtestUrl){Nr.next=6;break}return Nr.abrupt("return");case 6:return Nr.prev=6,Nr.next=9,this.adapters.request(this.options.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.options.abtestProjectKey,appKey:this.options.appkey,osType:"Web",sdkVersion:"0.13.1",deviceId:this.config.deviceId},useLocalCache:!0}});case 9:tr=Nr.sent,Nr.next=15;break;case 12:Nr.prev=12,Nr.t0=Nr.catch(6),this.logger.warn("ABTest request failed");case 15:this.abtInfo=((Pt=(Ce=tr==null?void 0:tr.data)===null||Ce===void 0?void 0:Ce.data)===null||Pt===void 0?void 0:Pt.abtInfo)||{},this.abtInfo.experiments&&this.abtInfo.experiments.length>0&&this.reporter.reportImmediately("https://statistic.live.126.net/statics/report/abtest/result",{params:{app_key:this.options.appkey,biz_sdk_type:"IM",sdk_ver:"0.13.1",device_id:this.config.deviceId,platform:"Web",projectKey:this.options.abtestProjectKey,experiments:Fo(mr=this.abtInfo.experiments).call(mr,function(Fr){return{experimentKey:Fr.experimentKey,schemeKey:Fr.schemeKey}})},headers:{sdktype:"ABTest"},method:"POST",dataType:"json"});case 17:case"end":return Nr.stop()}},ar,this,[[6,12]])}))},he}(hi);py.setAdapters=function(he){Hr(ua,he)};var fy={"1_2":"heartbeat","2_3":"login","2_5":"kicked","2_6":"logout","2_7":"multiPortLogin","2_8":"kick"},gy={login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appkey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,sdkType:41,userAgent:42,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,customTag:38,connectionId:102,ip:103,time:109},aosPushInfo:{pushType:110,hasTokenPreviously:111}},Hd=Is(gy),hy={login:{sid:2,cid:3,service:"auth",params:[{type:"Property",name:"login",reflectMapper:gy.login}],response:[{type:"Property",name:"loginRes",reflectMapper:Hd.loginRes},{type:"PropertyArray",name:"loginPorts",reflectMapper:Hd.loginPort},{type:"Property",name:"aosPushInfo",reflectMapper:Hd.aosPushInfo}]},logout:{sid:2,cid:6,service:"auth"},heartbeat:{sid:1,cid:2,service:"auth"},kicked:{sid:2,cid:5,service:"auth",response:[{type:"Number",name:"clientType"},{type:"Number",name:"reason"},{type:"String",name:"ext"},{type:"Number",name:"customClientType"}]},multiPortLogin:{sid:2,cid:7,service:"auth",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",reflectMapper:Hd.loginPort}]},kick:{sid:2,cid:8,service:"auth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]}},Gi=Array.isArray,af=function(he){return typeof he=="symbol"||zi(he)&&zc(he)=="[object Symbol]"},hh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sf=/^\w*$/,vh=function(he,Fe){if(Gi(he))return!1;var qe=typeof he;return!(qe!="number"&&qe!="symbol"&&qe!="boolean"&&he!=null&&!af(he))||sf.test(he)||!hh.test(he)||Fe!=null&&he in Object(Fe)};function yh(xe,he){if(typeof xe!="function"||he!=null&&typeof he!="function")throw new TypeError("Expected a function");var Fe=function(){var qe=arguments,Ce=he?he.apply(this,qe):qe[0],Pt=Fe.cache;if(Pt.has(Ce))return Pt.get(Ce);var ar=xe.apply(this,qe);return Fe.cache=Pt.set(Ce,ar)||Pt,ar};return Fe.cache=new(yh.Cache||qp),Fe}yh.Cache=qp;var iT=yh,cT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lT=/\\(\\)?/g,mu=function(he){var Fe=iT(he,function(Ce){return qe.size===500&&qe.clear(),Ce}),qe=Fe.cache;return Fe}(function(xe){var he=[];return xe.charCodeAt(0)===46&&he.push(""),xe.replace(cT,function(Fe,qe,Ce,Pt){he.push(Ce?Pt.replace(lT,"$1"):qe||Fe)}),he}),cf=mu,vy=Ci?Ci.prototype:void 0,bh=vy?vy.toString:void 0,yy=function xe(he){if(typeof he=="string")return he;if(Gi(he))return ah(he,xe)+"";if(af(he))return bh?bh.call(he):"";var Fe=he+"";return Fe=="0"&&1/he==-1/0?"-0":Fe},uT=function(he){return he==null?"":yy(he)},zd=function(he,Fe){return Gi(he)?he:vh(he,Fe)?[he]:cf(uT(he))},Ll=function(he){if(typeof he=="string"||af(he))return he;var Fe=he+"";return Fe=="0"&&1/he==-1/0?"-0":Fe},Sh=function(he,Fe){for(var qe=0,Ce=(Fe=zd(Fe,he)).length;he!=null&&qe<Ce;)he=he[Ll(Fe[qe++])];return qe&&qe==Ce?he:void 0},oi=function(he,Fe,qe){var Ce=he==null?void 0:Sh(he,Fe);return Ce===void 0?qe:Ce},ic={debugLevel:"off",needReconnect:!0,reconnectionAttempts:wg,lbsUrls:["https://lbs.netease.im/lbs/webconf.jsp"],linkUrl:Lv,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:"imElite_sdk_abtest_web"},lf={},ss=function(xe){function he(qe,Ce){var Pt,ar;Ce===void 0&&(Ce={serverConfig:{},syncOptions:{},sessionConfig:{}}),(ar=xe.call(this,qe)||this).instanceName="NIM",ar.account="",ar.options={},ar.auth={},ar.offlinePush={},ar.sync={},ar.msg={},ar.msgLog={},ar.session={},ar.cloudSession={},ar.misc={},ar.user={},ar.friend={},ar.systemMessage={},ar.team={},ar.event={},ar.msgExtend={},ar.cloudStorage={},ar.passThrough={},ar.superTeam={},ar.plugin={},ar.signaling={},ar.setOptions(qe),ps({cmdMap:fy,cmdConfig:hy});var tr=null;return Qn(Pt=la(lf)).call(Pt,function(mr){var br=lf[mr];mr==="sync"?tr=br:ar[mr]=mr==="session"?new br(k(ar),Ce.sessionConfig):mr==="cloudStorage"?new br(k(ar),Hr({storageKeyPrefix:ar.instanceName},Ce.serverConfig,Ce.cloudStorageConfig)):new br(k(ar))}),tr&&(ar.sync=new tr(k(ar),Ce.syncOptions)),he.instance=k(ar),ar}ea(he,xe),he.getInstance=function(Ce,Pt){if(!he.instance){if(Ce)return new he(Ce,Pt);throw new Error("Instance not exist, please input options")}if(Ce){if(he.instance.options.account===Ce.account&&he.instance.options.appkey===Ce.appkey)return he.instance.setOptions(Ce),he.instance;throw new Error("Unexpected login")}return he.instance};var Fe=he.prototype;return Fe.setOptions=function(Ce){Jn({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},Ce),this.logger.log("NIM::setOptions options is",Ce),this.account=Ce.account,this.options=Hr(Hr({},ic),Ce)},Fe.connect=function(Ce){Ce===void 0&&(Ce={});var Pt=Cs(null,{connect:{get:function(){return xe.prototype.connect}}});return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br=this;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.status)){Fr.next=4;break}return tr="NIM status is "+this.status+", and would not connect",this.logger.warn(tr),Fr.abrupt("return",_o.reject(tr));case 4:return this.reporter.reportTraceCancel("login"),this.reporter.reportTraceStart("login",{user_id:this.options.account,action:Ce.isAutoReconnect?"auto_login":"manual_login"}),this.reporter.reportTraceUpdateV2("login",{code:0,description:fa(Hr(Hr({},this.options),{account:"***",token:"***"})),operation_type:"conf_init",succeed:!0,duration:0,target:""}),Fr.next=9,this.getLbsInfos();case 9:return Fr.prev=9,Fr.next=12,Pt.connect.call(this,Ce,function(jr,Vr){br.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Vr,code:jr.code||408,description:"ws_handshake_failed:"+jr.message,succeed:!1})});case 12:(mr=Fr.sent)&&this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:mr,code:200,succeed:!0}),Fr.next=20;break;case 16:throw Fr.prev=16,Fr.t0=Fr.catch(9),this.reporter.reportTraceEnd("login",!1),Fr.t0;case 20:return Fr.next=22,this.login(Ce.isAutoReconnect);case 22:case"end":return Fr.stop()}},ar,this,[[9,16]])}))},Fe.login=function(Ce){return Ce===void 0&&(Ce=!1),Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return br.prev=0,br.next=3,this.auth.doLogin(Ce);case 3:ar=br.sent,this.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:200,succeed:!0}),this.reporter.reportTraceEnd("login",!0),this.status="logined",br.next=20;break;case 9:if(br.prev=9,br.t0=br.catch(0),tr=br.t0,this.logger.warn("nim login:: login failed",br.t0),this.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:tr.code||0,succeed:!1,description:tr.message}),this.reporter.reportTraceEnd("login",!1),this.retryCount!==0){br.next=18;break}throw this.doDisconnect(fs.ACTIVE,"FailedToInitializeLogin"),br.t0;case 18:return this.doDisconnect(fs.OFFLINE,"ReconnectLoginFailed"),br.abrupt("return");case 20:return br.prev=20,br.next=23,this.cloudStorage.init();case 23:br.next=28;break;case 25:br.prev=25,br.t1=br.catch(20),this.logger.error("NIM:login cloudStorage init failed ",br.t1);case 28:if(this.eventBus.emit("logined",ar),this.emit("logined",ar),this.logger.log("login done"),this.resetConnectStatus(),!this.sync||!this.sync.doSync){br.next=35;break}return br.next=35,this.sync.doSync();case 35:this.ping();case 36:case"end":return br.stop()}},Pt,this,[[0,9],[20,25]])}))},Fe.onMessage=function(Ce){var Pt,ar,tr=xe.prototype.onMessage.call(this,Ce);if(tr){var mr=tr.raw.ser,br=this.sendingCmdMap.get(mr);if(br&&br.cmd===tr.cmd){var Nr=br.callback,Fr=br.timer,jr=br.params;if(clearTimeout(Fr),tr.params=jr,this.sendingCmdMap.delete(mr),tr.cmd==="heartbeat")return void Nr[0]();var Vr=(Pt=this[tr.service])===null||Pt===void 0?void 0:Pt.process(tr);Vr&&typeof Vr.then=="function"?Vr.then(function(Kr){Nr[0](Kr)}).catch(function(Kr){Nr[1](Kr)}):(this.logger.log("imsocket:: handlerFn without promise",tr.service,tr.cmd),Nr[0]())}else(ar=this[tr.service])===null||ar===void 0||ar.process(tr)}},Fe.getLbsInfos=function(){var Ce;return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr,br,Nr,Fr,jr,Vr,Kr;return wr.wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return ar=this.options.lbsUrls[0],tr=Ja(ar).call(ar,"?")>-1?"&":"?",mr=ar+tr+"k="+this.options.appkey+"&id="+this.options.account+"&sv=180&pv=1&networkType=0",Cn.prev=3,this.logger.log("getLbsInfos ",mr),Cn.next=7,this.adapters.request(mr,{method:"GET",dataType:"json",timeout:1e4});case 7:if((Nr=Cn.sent).status===200&&Nr.data){Cn.next=11;break}throw this.logger.error("getLbsInfos::error status",Nr.status,Nr),new Error("getLbsInfos failed, status "+Nr.status);case 11:this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:mr,code:200,succeed:!0}),Fr=Nr.data,jr=[this.options.linkUrl],oi(Fr,"common.link")&&(jr=Ys(Vr=oi(Fr,"common.link")).call(Vr,jr)),oi(Fr,'common["link.default"]')&&(jr=Ys(jr).call(jr,oi(Fr,'common["link.default"]'))),this.linkUrls=Qp(jr),Nr.data["nos-chunk"]&&((Ce=this.cloudStorage)===null||Ce===void 0||Ce.setOptions({chunkUploadHost:Nr.data["nos-chunk"]})),this.logger.log("getLbsInfos success, socket link:",Lo(br=this.linkUrls).call(br,0),"chunkUploadHost: ",Nr.data["nos-chunk"]),Cn.next=27;break;case 21:Cn.prev=21,Cn.t0=Cn.catch(3),Kr=Cn.t0,this.logger.error("getLbsInfos::error",Kr),this.linkUrls=[this.options.linkUrl],this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:mr,description:Kr.message,code:Kr.code||0,succeed:!1});case 27:case"end":return Cn.stop()}},Pt,this,[[3,21]])}))},Fe.disconnect=function(){var Ce=this;switch(this.status){case"logined":return this.sendCmd("logout",void 0,{timeout:1e3}).then(function(){xe.prototype.doDisconnect.call(Ce,fs.ACTIVE,"UserActiveDisconnect")}).catch(function(Pt){Ce.logger.error("NIM::disconnect sendCmd:logout error",Pt),xe.prototype.doDisconnect.call(Ce,fs.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return xe.prototype.doDisconnect.call(this,fs.ACTIVE,"UserActiveDisconnect"),_o.resolve();case"unconnected":case"destroyed":return _o.resolve()}},Fe.destroy=function(){return he.instance=null,xe.prototype.destroy.call(this)},Fe.kick=function(Ce){return Jn({deviceIds:{type:"array",itemType:"string"}},Ce),this.auth.kick(Ce)},he.registerService=function(Ce,Pt){lf[Pt]=Ce},he}(py);ss.instance=null;var by=Math.min,Th=[].lastIndexOf,Ch=!!Th&&1/[1].lastIndexOf(1,-0)<0,dT=fi("lastIndexOf"),Mh=Ch||!dT?function(he){if(Ch)return le(Th,this,arguments)||0;var Fe=_r(this),qe=Za(Fe),Ce=qe-1;for(arguments.length>1&&(Ce=by(Ce,uc(arguments[1]))),Ce<0&&(Ce=qe+Ce);Ce>=0;Ce--)if(Ce in Fe&&Fe[Ce]===he)return Ce||0;return-1}:Th;_n({target:"Array",proto:!0,forced:Mh!==[].lastIndexOf},{lastIndexOf:Mh});var pT=sa("Array").lastIndexOf,uf=Array.prototype,kh=function(xe){var he=xe.lastIndexOf;return xe===uf||vr(uf,xe)&&he===uf.lastIndexOf?pT:he},gu=g(function(xe,he){(function(){var Fe={function:!0,object:!0}[typeof window]&&window||this,qe=he,Ce=xe&&!xe.nodeType&&xe,Pt=qe&&Ce&&typeof e=="object"&&e;!Pt||Pt.global!==Pt&&Pt.window!==Pt&&Pt.self!==Pt||(Fe=Pt);var ar=Math.pow(2,53)-1,tr=/\bOpera/,mr=Object.prototype,br=mr.hasOwnProperty,Nr=mr.toString;function Fr(An){return(An=String(An)).charAt(0).toUpperCase()+An.slice(1)}function jr(An){return An=En(An),/^(?:webOS|i(?:OS|P))/.test(An)?An:Fr(An)}function Vr(An,zn){for(var yo in An)br.call(An,yo)&&zn(An[yo],yo,An)}function Kr(An){return An==null?Fr(An):Nr.call(An).slice(8,-1)}function Sn(An){return String(An).replace(/([ -])(?!$)/g,"$1?")}function Cn(An,zn){var yo=null;return function(Vo,ao){var zr=-1,Yn=Vo?Vo.length:0;if(typeof Yn=="number"&&Yn>-1&&Yn<=ar)for(;++zr<Yn;)ao(Vo[zr],zr,Vo);else Vr(Vo,ao)}(An,function(fo,Vo){yo=zn(yo,fo,Vo,An)}),yo}function En(An){return String(An).replace(/^ +| +$/g,"")}var In=function An(zn){var yo=Fe,fo=zn&&typeof zn=="object"&&Kr(zn)!="String";fo&&(yo=zn,zn=null);var Vo=yo.navigator||{},ao=Vo.userAgent||"";zn||(zn=ao);var zr,Yn,oo=fo?!!Vo.likeChrome:/\bChrome\b/.test(zn)&&!/internal|\n/i.test(Nr.toString()),Wn="Object",Dn=fo?Wn:"ScriptBridgingProxyObject",no=fo?Wn:"Environment",uo=fo&&yo.java?"JavaPackage":Kr(yo.java),Mo=fo?Wn:"RuntimeObject",wo=/\bJava/.test(uo)&&yo.java,pa=wo&&Kr(yo.environment)==no,Jo=wo?"a":"",ls=wo?"b":"",jo=yo.document||{},Yo=yo.operamini||yo.opera,wa=tr.test(wa=fo&&Yo?Yo["[[Class]]"]:Kr(Yo))?wa:Yo=null,ul=zn,ra=[],Vc=null,hs=zn==ao,Po=hs&&Yo&&typeof Yo.version=="function"&&Yo.version(),xa=function(os){return Cn(os,function(Va,Xa){return Va||RegExp("\\b"+(Xa.pattern||Sn(Xa))+"\\b","i").exec(zn)&&(Xa.label||Xa)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),go=function(os){return Cn(os,function(Va,Xa){return Va||RegExp("\\b"+(Xa.pattern||Sn(Xa))+"\\b","i").exec(zn)&&(Xa.label||Xa)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),ia=YC([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Ds=function(os){return Cn(os,function(Va,Xa,bv){return Va||(Xa[ia]||Xa[/^[a-z]+(?: +[a-z]+\b)*/i.exec(ia)]||RegExp("\\b"+Sn(bv)+"(?:\\b|\\w*\\d)","i").exec(zn))&&bv})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),bo=function(os){return Cn(os,function(Va,Xa){var bv=Xa.pattern||Sn(Xa);return!Va&&(Va=RegExp("\\b"+bv+"(?:/[\\d.]+|[ \\w.]*)","i").exec(zn))&&(Va=function(Jl,GC,KC){var QC={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return GC&&KC&&/^Win/i.test(Jl)&&!/^Windows Phone /i.test(Jl)&&(QC=QC[/[\d.]+$/.exec(Jl)])&&(Jl="Windows "+QC),Jl=String(Jl),GC&&KC&&(Jl=Jl.replace(RegExp(GC,"i"),KC)),jr(Jl.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Va,bv,Xa.label||Xa)),Va})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function YC(Ei){return Cn(Ei,function(os,Va){var Xa=Va.pattern||Sn(Va);return!os&&(os=RegExp("\\b"+Xa+" *\\d+[.\\w_]*","i").exec(zn)||RegExp("\\b"+Xa+" *\\w+-[\\w]*","i").exec(zn)||RegExp("\\b"+Xa+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(zn))&&((os=String(Va.label&&!RegExp(Xa,"i").test(Va.label)?Va.label:os).split("/"))[1]&&!/[\d.]+/.test(os[0])&&(os[0]+=" "+os[1]),Va=Va.label||Va,os=jr(os[0].replace(RegExp(Xa,"i"),Va).replace(RegExp("; *(?:"+Va+"[_-])?","i")," ").replace(RegExp("("+Va+")[-_.]?(\\w)","i"),"$1 $2"))),os})}function XC(Ei){return Cn(Ei,function(os,Va){return os||(RegExp(Va+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(zn)||0)[1]||null})}if(xa&&(xa=[xa]),/\bAndroid\b/.test(bo)&&!ia&&(zr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(zn))&&(ia=En(zr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Ds&&!ia?ia=YC([Ds]):Ds&&ia&&(ia=ia.replace(RegExp("^("+Sn(Ds)+")[-_.\\s]","i"),Ds+" ").replace(RegExp("^("+Sn(Ds)+")[-_.]?(\\w)","i"),Ds+" $2")),(zr=/\bGoogle TV\b/.exec(ia))&&(ia=zr[0]),/\bSimulator\b/i.test(zn)&&(ia=(ia?ia+" ":"")+"Simulator"),go=="Opera Mini"&&/\bOPiOS\b/.test(zn)&&ra.push("running in Turbo/Uncompressed mode"),go=="IE"&&/\blike iPhone OS\b/.test(zn)?(Ds=(zr=An(zn.replace(/like iPhone OS/,""))).manufacturer,ia=zr.product):/^iP/.test(ia)?(go||(go="Safari"),bo="iOS"+((zr=/ OS ([\d_]+)/i.exec(zn))?" "+zr[1].replace(/_/g,"."):"")):go=="Konqueror"&&/^Linux\b/i.test(bo)?bo="Kubuntu":Ds&&Ds!="Google"&&(/Chrome/.test(go)&&!/\bMobile Safari\b/i.test(zn)||/\bVita\b/.test(ia))||/\bAndroid\b/.test(bo)&&/^Chrome/.test(go)&&/\bVersion\//i.test(zn)?(go="Android Browser",bo=/\bAndroid\b/.test(bo)?bo:"Android"):go=="Silk"?(/\bMobi/i.test(zn)||(bo="Android",ra.unshift("desktop mode")),/Accelerated *= *true/i.test(zn)&&ra.unshift("accelerated")):go=="UC Browser"&&/\bUCWEB\b/.test(zn)?ra.push("speed mode"):go=="PaleMoon"&&(zr=/\bFirefox\/([\d.]+)\b/.exec(zn))?ra.push("identifying as Firefox "+zr[1]):go=="Firefox"&&(zr=/\b(Mobile|Tablet|TV)\b/i.exec(zn))?(bo||(bo="Firefox OS"),ia||(ia=zr[1])):!go||(zr=!/\bMinefield\b/i.test(zn)&&/\b(?:Firefox|Safari)\b/.exec(go))?(go&&!ia&&/[\/,]|^[^(]+?\)/.test(zn.slice(zn.indexOf(zr+"/")+8))&&(go=null),(zr=ia||Ds||bo)&&(ia||Ds||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(bo))&&(go=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(bo)?bo:zr)+" Browser")):go=="Electron"&&(zr=(/\bChrome\/([\d.]+)\b/.exec(zn)||0)[1])&&ra.push("Chromium "+zr),Po||(Po=XC(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",Sn(go),"(?:Firefox|Minefield|NetFront)"])),(zr=(xa=="iCab"&&parseFloat(Po)>3?"WebKit":/\bOpera\b/.test(go)&&(/\bOPR\b/.test(zn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(zn)&&!/^(?:Trident|EdgeHTML)$/.test(xa)&&"WebKit"||!xa&&/\bMSIE\b/i.test(zn)&&(bo=="Mac OS"?"Tasman":"Trident")||xa=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(go)&&"NetFront")&&(xa=[zr]),go=="IE"&&(zr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(zn)||0)[1])?(go+=" Mobile",bo="Windows Phone "+(/\+$/.test(zr)?zr:zr+".x"),ra.unshift("desktop mode")):/\bWPDesktop\b/i.test(zn)?(go="IE Mobile",bo="Windows Phone 8.x",ra.unshift("desktop mode"),Po||(Po=(/\brv:([\d.]+)/.exec(zn)||0)[1])):go!="IE"&&xa=="Trident"&&(zr=/\brv:([\d.]+)/.exec(zn))&&(go&&ra.push("identifying as "+go+(Po?" "+Po:"")),go="IE",Po=zr[1]),hs){if(function(os,Va){var Xa=os!=null?typeof os[Va]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(Xa)||Xa=="object"&&!os[Va])}(yo,"global"))if(wo&&(ul=(zr=wo.lang.System).getProperty("os.arch"),bo=bo||zr.getProperty("os.name")+" "+zr.getProperty("os.version")),pa){try{Po=yo.require("ringo/engine").version.join("."),go="RingoJS"}catch{(zr=yo.system)&&zr.global.system==yo.system&&(go="Narwhal",bo||(bo=zr[0].os||null))}go||(go="Rhino")}else typeof yo.process=="object"&&!yo.process.browser&&(zr=yo.process)&&(typeof zr.versions=="object"&&(typeof zr.versions.electron=="string"?(ra.push("Node "+zr.versions.node),go="Electron",Po=zr.versions.electron):typeof zr.versions.nw=="string"&&(ra.push("Chromium "+Po,"Node "+zr.versions.node),go="NW.js",Po=zr.versions.nw)),go||(go="Node.js",ul=zr.arch,bo=zr.platform,Po=(Po=/[\d.]+/.exec(zr.version))?Po[0]:null));else Kr(zr=yo.runtime)==Dn?(go="Adobe AIR",bo=zr.flash.system.Capabilities.os):Kr(zr=yo.phantom)==Mo?(go="PhantomJS",Po=(zr=zr.version||null)&&zr.major+"."+zr.minor+"."+zr.patch):typeof jo.documentMode=="number"&&(zr=/\bTrident\/(\d+)/i.exec(zn))?(Po=[Po,jo.documentMode],(zr=+zr[1]+4)!=Po[1]&&(ra.push("IE "+Po[1]+" mode"),xa&&(xa[1]=""),Po[1]=zr),Po=go=="IE"?String(Po[1].toFixed(1)):Po[0]):typeof jo.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(go)&&(ra.push("masking as "+go+" "+Po),go="IE",Po="11.0",xa=["Trident"],bo="Windows");bo=bo&&jr(bo)}if(Po&&(zr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Po)||/(?:alpha|beta)(?: ?\d)?/i.exec(zn+";"+(hs&&Vo.appMinorVersion))||/\bMinefield\b/i.test(zn)&&"a")&&(Vc=/b/i.test(zr)?"beta":"alpha",Po=Po.replace(RegExp(zr+"\\+?$"),"")+(Vc=="beta"?ls:Jo)+(/\d+\+?/.exec(zr)||"")),go=="Fennec"||go=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(bo))go="Firefox Mobile";else if(go=="Maxthon"&&Po)Po=Po.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(ia))ia=="Xbox 360"&&(bo=null),ia=="Xbox 360"&&/\bIEMobile\b/.test(zn)&&ra.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(go)&&(!go||ia||/Browser|Mobi/.test(go))||bo!="Windows CE"&&!/Mobi/i.test(zn))if(go=="IE"&&hs)try{yo.external===null&&ra.unshift("platform preview")}catch{ra.unshift("embedded")}else(/\bBlackBerry\b/.test(ia)||/\bBB10\b/.test(zn))&&(zr=(RegExp(ia.replace(/ +/g," *")+"/([.\\d]+)","i").exec(zn)||0)[1]||Po)?(bo=((zr=[zr,/BB10/.test(zn)])[1]?(ia=null,Ds="BlackBerry"):"Device Software")+" "+zr[0],Po=null):this!=Vr&&ia!="Wii"&&(hs&&Yo||/Opera/.test(go)&&/\b(?:MSIE|Firefox)\b/i.test(zn)||go=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(bo)||go=="IE"&&(bo&&!/^Win/.test(bo)&&Po>5.5||/\bWindows XP\b/.test(bo)&&Po>8||Po==8&&!/\bTrident\b/.test(zn)))&&!tr.test(zr=An.call(Vr,zn.replace(tr,"")+";"))&&zr.name&&(zr="ing as "+zr.name+((zr=zr.version)?" "+zr:""),tr.test(go)?(/\bIE\b/.test(zr)&&bo=="Mac OS"&&(bo=null),zr="identify"+zr):(zr="mask"+zr,go=wa?jr(wa.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(zr)&&(bo=null),hs||(Po=null)),xa=["Presto"],ra.push(zr));else go+=" Mobile";(zr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(zn)||0)[1])&&(zr=[parseFloat(zr.replace(/\.(\d)$/,".0$1")),zr],go=="Safari"&&zr[1].slice(-1)=="+"?(go="WebKit Nightly",Vc="alpha",Po=zr[1].slice(0,-1)):Po!=zr[1]&&Po!=(zr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(zn)||0)[1])||(Po=null),zr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(zn)||0)[1],zr[0]==537.36&&zr[2]==537.36&&parseFloat(zr[1])>=28&&xa=="WebKit"&&(xa=["Blink"]),hs&&(oo||zr[1])?(xa&&(xa[1]="like Chrome"),zr=zr[1]||((zr=zr[0])<530?1:zr<532?2:zr<532.05?3:zr<533?4:zr<534.03?5:zr<534.07?6:zr<534.1?7:zr<534.13?8:zr<534.16?9:zr<534.24?10:zr<534.3?11:zr<535.01?12:zr<535.02?"13+":zr<535.07?15:zr<535.11?16:zr<535.19?17:zr<536.05?18:zr<536.1?19:zr<537.01?20:zr<537.11?"21+":zr<537.13?23:zr<537.18?24:zr<537.24?25:zr<537.36?26:xa!="Blink"?"27":"28")):(xa&&(xa[1]="like Safari"),zr=(zr=zr[0])<400?1:zr<500?2:zr<526?3:zr<533?4:zr<534?"4+":zr<535?5:zr<537?6:zr<538?7:zr<601?8:zr<602?9:zr<604?10:zr<606?11:zr<608?12:"12"),xa&&(xa[1]+=" "+(zr+=typeof zr=="number"?".x":/[.+]/.test(zr)?"":"+")),go=="Safari"&&(!Po||parseInt(Po)>45)?Po=zr:go=="Chrome"&&/\bHeadlessChrome/i.test(zn)&&ra.unshift("headless")),go=="Opera"&&(zr=/\bzbov|zvav$/.exec(bo))?(go+=" ",ra.unshift("desktop mode"),zr=="zvav"?(go+="Mini",Po=null):go+="Mobile",bo=bo.replace(RegExp(" *"+zr+"$"),"")):go=="Safari"&&/\bChrome\b/.exec(xa&&xa[1])?(ra.unshift("desktop mode"),go="Chrome Mobile",Po=null,/\bOS X\b/.test(bo)?(Ds="Apple",bo="iOS 4.3+"):bo=null):/\bSRWare Iron\b/.test(go)&&!Po&&(Po=XC("Chrome")),Po&&Po.indexOf(zr=/[\d.]+$/.exec(bo))==0&&zn.indexOf("/"+zr+"-")>-1&&(bo=En(bo.replace(zr,""))),bo&&bo.indexOf(go)!=-1&&!RegExp(go+" OS").test(bo)&&(bo=bo.replace(RegExp(" *"+Sn(go)+" *"),"")),xa&&!/\b(?:Avant|Nook)\b/.test(go)&&(/Browser|Lunascape|Maxthon/.test(go)||go!="Safari"&&/^iOS/.test(bo)&&/\bSafari\b/.test(xa[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(go)&&xa[1])&&(zr=xa[xa.length-1])&&ra.push(zr),ra.length&&(ra=["("+ra.join("; ")+")"]),Ds&&ia&&ia.indexOf(Ds)<0&&ra.push("on "+Ds),ia&&ra.push((/^on /.test(ra[ra.length-1])?"":"on ")+ia),bo&&(zr=/ ([\d.+]+)$/.exec(bo),Yn=zr&&bo.charAt(bo.length-zr[0].length-1)=="/",bo={architecture:32,family:zr&&!Yn?bo.replace(zr[0],""):bo,version:zr?zr[1]:null,toString:function(){var Ei=this.version;return this.family+(Ei&&!Yn?" "+Ei:"")+(this.architecture==64?" 64-bit":"")}}),(zr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(ul))&&!/\bi686\b/i.test(ul)?(bo&&(bo.architecture=64,bo.family=bo.family.replace(RegExp(" *"+zr),"")),go&&(/\bWOW64\b/i.test(zn)||hs&&/\w(?:86|32)$/.test(Vo.cpuClass||Vo.platform)&&!/\bWin64; x64\b/i.test(zn))&&ra.unshift("32-bit")):bo&&/^OS X/.test(bo.family)&&go=="Chrome"&&parseFloat(Po)>=39&&(bo.architecture=64),zn||(zn=null);var Si={};return Si.description=zn,Si.layout=xa&&xa[0],Si.manufacturer=Ds,Si.name=go,Si.prerelease=Vc,Si.product=ia,Si.ua=zn,Si.version=go&&Po,Si.os=bo||{architecture:null,family:null,version:null,toString:function(){return"null"}},Si.parse=An,Si.toString=function(){return this.description||""},Si.version&&ra.unshift(Po),Si.name&&ra.unshift(go),bo&&go&&(bo!=String(bo).split(" ")[0]||bo!=go.split(" ")[0]&&!ia)&&ra.push(ia?"("+bo+")":"on "+bo),ra.length&&(Si.description=ra.join(" ")),Si}();qe&&Ce?Vr(In,function(An,zn){qe[zn]=An}):Fe.platform=In}).call(e)}),fT=Math.floor,wh=function(xe,he){var Fe=xe.length,qe=fT(Fe/2);return Fe<8?xh(xe,he):mT(xe,wh(qu(xe,0,qe),he),wh(qu(xe,qe),he),he)},xh=function(xe,he){for(var Fe,qe,Ce=xe.length,Pt=1;Pt<Ce;){for(qe=Pt,Fe=xe[Pt];qe&&he(xe[qe-1],Fe)>0;)xe[qe]=xe[--qe];qe!==Pt++&&(xe[qe]=Fe)}return xe},mT=function(xe,he,Fe,qe){for(var Ce=he.length,Pt=Fe.length,ar=0,tr=0;ar<Ce||tr<Pt;)xe[ar+tr]=ar<Ce&&tr<Pt?qe(he[ar],Fe[tr])<=0?he[ar++]:Fe[tr++]:ar<Ce?he[ar++]:Fe[tr++];return xe},_h=wh,Sy=Ir.match(/firefox\/(\d+)/i),Wd=!!Sy&&+Sy[1],Wa=/MSIE|Trident/.test(Ir),Ty=Ir.match(/AppleWebKit\/(\d+)\./),Ih=!!Ty&&+Ty[1],Ac=[],Cy=_e(Ac.sort),My=_e(Ac.push),gT=V(function(){Ac.sort(void 0)}),ky=V(function(){Ac.sort(null)}),wy=fi("sort"),xy=!V(function(){if(Br)return Br<70;if(!(Wd&&Wd>3)){if(Wa)return!0;if(Ih)return Ih<603;var xe,he,Fe,qe,Ce="";for(xe=65;xe<76;xe++){switch(he=String.fromCharCode(xe),xe){case 66:case 69:case 70:case 72:Fe=3;break;case 68:case 71:Fe=4;break;default:Fe=2}for(qe=0;qe<47;qe++)Ac.push({k:he+qe,v:Fe})}for(Ac.sort(function(Pt,ar){return ar.v-Pt.v}),qe=0;qe<Ac.length;qe++)he=Ac[qe].k.charAt(0),Ce.charAt(Ce.length-1)!==he&&(Ce+=he);return Ce!=="DGBEFHACIJK"}});_n({target:"Array",proto:!0,forced:gT||!ky||!wy||!xy},{sort:function(he){he!==void 0&&Xr(he);var Fe=Pn(this);if(xy)return he===void 0?Cy(Fe):Cy(Fe,he);var qe,Ce,Pt=[],ar=Za(Fe);for(Ce=0;Ce<ar;Ce++)Ce in Fe&&My(Pt,Fe[Ce]);for(_h(Pt,function(tr){return function(mr,br){return br===void 0?-1:mr===void 0?1:tr!==void 0?+tr(mr,br)||0:rs(mr)>rs(br)?1:-1}}(he)),qe=Za(Pt),Ce=0;Ce<qe;)Fe[Ce]=Pt[Ce++];for(;Ce<ar;)tf(Fe,Ce++);return Fe}});var hT=sa("Array").sort,Eh=Array.prototype,Zc=function(xe){var he=xe.sort;return xe===Eh||vr(Eh,xe)&&he===Eh.sort?hT:he},Ph=g(function(xe,he){xe.exports=function(){var Fe={d:function(zr,Yn){for(var oo in Yn)Fe.o(Yn,oo)&&!Fe.o(zr,oo)&&bc(zr,oo,{enumerable:!0,get:Yn[oo]})},o:function(zr,Yn){return Object.prototype.hasOwnProperty.call(zr,Yn)}},qe={};Fe.d(qe,{default:function(){return Vo}});var Ce=function ao(zr){for(var Yn in function(oo,Wn){if(!(oo instanceof Wn))throw new TypeError("Cannot call a class as a function")}(this,ao),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(oo){},this.onProgress=function(oo){},this.onUploadProgress=function(oo){},this.onComplete=function(oo){},zr)this[Yn]=zr[Yn]};function Pt(ao,zr){var Yn=ja!==void 0&&Vd(ao)||ao["@@iterator"];if(!Yn){if(Hi(ao)||(Yn=function(Mo,wo){if(Mo){var pa;if(typeof Mo=="string")return ar(Mo,wo);var Jo=Lo(pa=Object.prototype.toString.call(Mo)).call(pa,8,-1);return Jo==="Object"&&Mo.constructor&&(Jo=Mo.constructor.name),Jo==="Map"||Jo==="Set"?of(Mo):Jo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jo)?ar(Mo,wo):void 0}}(ao))||zr&&ao&&typeof ao.length=="number"){Yn&&(ao=Yn);var oo=0,Wn=function(){};return{s:Wn,n:function(){return oo>=ao.length?{done:!0}:{done:!1,value:ao[oo++]}},e:function(wo){throw wo},f:Wn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dn,no=!0,uo=!1;return{s:function(){Yn=Yn.call(ao)},n:function(){var wo=Yn.next();return no=wo.done,wo},e:function(wo){uo=!0,Dn=wo},f:function(){try{no||Yn.return==null||Yn.return()}finally{if(uo)throw Dn}}}}function ar(ao,zr){(zr==null||zr>ao.length)&&(zr=ao.length);for(var Yn=0,oo=new Array(zr);Yn<zr;Yn++)oo[Yn]=ao[Yn];return oo}var tr=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(tr={privateObj:{},setItem:function(zr,Yn){tr.privateObj[zr]=Yn},getItem:function(zr){return tr.privateObj[zr]},removeItem:function(zr){delete tr.privateObj[zr]},getKeys:function(){return la(tr.privateObj)}});var mr={getFileKey:function(zr){var Yn=zr.size.toString(),oo=zr.lastModified.toString();return"_NosUploader_"+zr.name+Lo(Yn).call(Yn,Yn.length-5)+Lo(oo).call(oo,oo.length-5)},getFileInfo:function(zr){var Yn=tr.getItem(zr);if(!Yn)return null;try{return JSON.parse(Yn)}catch{return null}},initFile:function(zr,Yn,oo){mr.clearExpiredInfo();var Wn=this.getFileKey(Yn),Dn={ctx:zr.ctx!==void 0?zr.ctx:"",bucket:zr.bucketName,obj:zr.objectName,token:zr.token,modifyAt:Ia(),end:!1};return zr.payload&&(Dn.payload=zr.payload),oo&&tr.setItem(Wn,fa(Dn)),Wn},setUploadContext:function(zr,Yn,oo){var Wn=this.getFileInfo(zr);Wn&&(Wn.ctx=Yn,oo&&tr.setItem(zr,fa(Wn)))},setComplete:function(zr,Yn){var oo=this.getFileInfo(zr);oo&&(oo.modifyAt=Ia(),oo.end=!0,Yn&&tr.setItem(zr,fa(oo)))},getUploadContext:function(zr){var Yn=this.getFileInfo(zr);return Yn?Yn.ctx:""},removeFileInfo:function(zr){Ja(zr).call(zr,"_NosUploader_")===0&&tr.removeItem(zr)},clearExpiredInfo:function(){var zr,Yn=typeof tr.getKeys=="function"?tr.getKeys():la(tr),oo=Ia(),Wn=[],Dn=Pt(Yn);try{for(Dn.s();!(zr=Dn.n()).done;){var no=zr.value;if(Ja(no).call(no,"_NosUploader_")===0){var uo=mr.getFileInfo(no);uo===null||oo-uo.modifyAt>Vo.expireTime?tr.removeItem(no):Wn.push({fileInfo:uo,key:no})}}}catch(jo){Dn.e(jo)}finally{Dn.f()}if(Wn.length>Vo.maxFileCache){var Mo,wo,pa=Pt(Lo(Mo=Zc(Wn).call(Wn,function(jo,Yo){return Yo.fileInfo.modifyAt-jo.fileInfo.modifyAt})).call(Mo,Vo.maxFileCache));try{for(pa.s();!(wo=pa.n()).done;){var Jo,ls=wo.value;Ja(Jo=ls.key).call(Jo,"_NosUploader_")===0&&tr.removeItem(ls.key)}}catch(jo){pa.e(jo)}finally{pa.f()}}}},br=mr;function Nr(ao){return(Nr=typeof ja=="function"&&typeof Bm=="symbol"?function(zr){return typeof zr}:function(zr){return zr&&typeof ja=="function"&&zr.constructor===ja&&zr!==ja.prototype?"symbol":typeof zr})(ao)}function Fr(ao,zr){return!zr||Nr(zr)!=="object"&&typeof zr!="function"?function(Yn){if(Yn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yn}(ao):zr}function jr(ao){var zr=typeof _c=="function"?new _c:void 0;return(jr=function(oo){var Wn,Dn;if(oo===null||(Dn=oo,Ja(Wn=Function.toString.call(Dn)).call(Wn,"[native code]")===-1))return oo;if(typeof oo!="function")throw new TypeError("Super expression must either be null or a function");if(zr!==void 0){if(zr.has(oo))return zr.get(oo);zr.set(oo,no)}function no(){return Vr(oo,arguments,Cn(this).constructor)}return no.prototype=Cs(oo.prototype,{constructor:{value:no,enumerable:!1,writable:!0,configurable:!0}}),Sn(no,oo)})(ao)}function Vr(ao,zr,Yn){return(Vr=Kr()?rc:function(oo,Wn,Dn){var no=[null];no.push.apply(no,Wn);var uo=new(Xo(Function).apply(oo,no));return Dn&&Sn(uo,Dn.prototype),uo}).apply(null,arguments)}function Kr(){if(typeof Reflect>"u"||!rc||rc.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(rc(Boolean,[],function(){})),!0}catch{return!1}}function Sn(ao,zr){return(Sn=si||function(Yn,oo){return Yn.__proto__=oo,Yn})(ao,zr)}function Cn(ao){return(Cn=si?pi:function(zr){return zr.__proto__||pi(zr)})(ao)}var En=function(ao){(function(Dn,no){if(typeof no!="function"&&no!==null)throw new TypeError("Super expression must either be null or a function");Dn.prototype=Cs(no&&no.prototype,{constructor:{value:Dn,writable:!0,configurable:!0}}),no&&Sn(Dn,no)})(Wn,ao);var zr,Yn,oo=(zr=Wn,Yn=Kr(),function(){var Dn,no=Cn(zr);if(Yn){var uo=Cn(this).constructor;Dn=rc(no,arguments,uo)}else Dn=no.apply(this,arguments);return Fr(this,Dn)});function Wn(Dn,no){var uo;return function(Mo,wo){if(!(Mo instanceof wo))throw new TypeError("Cannot call a class as a function")}(this,Wn),(uo=oo.call(this,"NosUploadError:"+Dn)).errCode=no,uo.errMsg=Dn,uo}return Wn}(jr(Error)),In=function ao(zr,Yn,oo){if(zr.uploadState==="uploading"){var Wn=zr.config,Dn=zr.param,no=br.getUploadContext(zr.fileKey);if(!no)return oo(0);var uo=new XMLHttpRequest,Mo=Wn.directUploadAddr+"/".concat(Dn.bucketName)+"/".concat(encodeURIComponent(Dn.objectName))+"?uploadContext"+"&context=".concat(no)+"&version=".concat(Wn.version);uo.onreadystatechange=function(){var wo;if(zr.uploadState!=="abort"&&uo.readyState===4){var pa,Jo,ls,jo;try{jo=JSON.parse(uo.responseText)}catch{jo={errMsg:"JsonParseError in getOffset",errCode:500}}uo.status===200?jo.errCode?zr.config.onError(new En(jo.errMsg,jo.errCode)):oo(jo.offset):uo.status.toString().match(/^5/)?ao(zr,Yn-1,oo):Yn>0?(typeof((wo=Wn.logger)===null||wo===void 0?void 0:wo.error)=="function"&&Wn.logger.error(Ys(pa="getOffset(".concat(Mo,") error. retry after 3 seconds. ")).call(pa,new Date().toTimeString())),Ro(function(){ao(zr,Yn-1,oo)},3500)):(br.removeFileInfo(zr.fileKey),uo.status?Wn.onError(new En(Ys(Jo=Ys(ls="getOffset(".concat(Mo,") error: ")).call(ls,uo.status," ")).call(Jo,uo.statusText))):Wn.onError(new En("getOffset(".concat(Mo,") error. no Error Code"))))}},uo.open("get",Mo),uo.setRequestHeader("x-nos-token",Dn.token),uo.timeout=Wn.getOffsetTimeout,uo.send()}},An=function ao(zr,Yn,oo,Wn){if(zr.uploadState==="uploading"){var Dn=zr.param,no=zr.config,uo=Lo(File.prototype),Mo=Dn.ctx!==void 0?Dn.ctx:"",wo=Yn+no.trunkSize>zr.file.size,pa=wo?zr.file.size:Yn+no.trunkSize,Jo=new XMLHttpRequest,ls=no.directUploadAddr+"/".concat(Dn.bucketName)+"/".concat(encodeURIComponent(Dn.objectName));if(Jo.upload.onprogress=function(Yo){if(zr.uploadState!=="abort"){var wa=0;Yo.lengthComputable?(wa=(Yn+Yo.loaded)/zr.file.size,no.onProgress(wa),no.onUploadProgress({loaded:Yo.loaded,total:zr.file.size,percentage:wa,percentageText:(100*wa).toFixed(2)+"%"})):no.onError(new En("browser does not support query upload progress"))}},Jo.onreadystatechange=function(){var Yo,wa;if(zr.uploadState!=="abort"&&Jo.readyState===4){var ul,ra,Vc,hs;try{hs=JSON.parse(Jo.responseText)}catch(Po){typeof((Yo=no.logger)===null||Yo===void 0?void 0:Yo.error)=="function"&&no.logger.error("JsonParseError in uploadTrunk",Po),hs={errMsg:"JsonParseError in uploadTrunk"}}Jo.status===200?(zr.setContext(hs.context),wo?(Wn(),zr.setComplete()):ao(zr,hs.offset,no.retryCount,Wn)):Jo.status.toString().match(/^5/)?oo>0?ao(zr,Yn,oo-1,Wn):(br.removeFileInfo(zr.fileKey),no.onError(new En(hs.errMsg,hs.errCode))):oo>0?(typeof((wa=no.logger)===null||wa===void 0?void 0:wa.error)=="function"&&no.logger.error(Ys(ul="uploadTrunk(".concat(ls,") error. retry after 3 seconds. ")).call(ul,new Date().toTimeString())),Ro(function(){ao(zr,Yn,oo-1,Wn)},3500)):(br.removeFileInfo(zr.fileKey),Jo.status?no.onError(new En(Ys(ra=Ys(Vc="uploadTrunk(".concat(ls,") error: ")).call(Vc,Jo.status," ")).call(ra,Jo.statusText))):no.onError(new En("uploadTrunk(".concat(ls,") error. no Error Code. Please check your network"))))}},Jo.open("post",ls+"?offset=".concat(Yn)+"&complete=".concat(wo)+"&context=".concat(Mo)+"&version=".concat(no.version)),Jo.setRequestHeader("x-nos-token",Dn.token),zr.file.type&&Jo.setRequestHeader("content-type",zr.file.type),Jo.timeout=no.trunkUploadTimeout,typeof FileReader<"u"){var jo=new FileReader;jo.addEventListener("load",function(Yo){var wa;!((wa=Yo==null?void 0:Yo.target)===null||wa===void 0)&&wa.result?Jo.send(Yo.target.result):no.onError(new En("Read ArrayBuffer failed"))}),jo.addEventListener("error",function(Yo){var wa=Yo.target.error;no.onError(new En("Read ArrayBuffer error. ".concat(wa.toString()),wa.code))}),jo.readAsArrayBuffer(uo.call(zr.file,Yn,pa))}else Jo.send(uo.call(zr.file,Yn,pa))}};function zn(ao,zr){for(var Yn=0;Yn<zr.length;Yn++){var oo=zr[Yn];oo.enumerable=oo.enumerable||!1,oo.configurable=!0,"value"in oo&&(oo.writable=!0),bc(ao,oo.key,oo)}}var yo=function(){function ao(Yn,oo,Wn){(function(Dn,no){if(!(Dn instanceof no))throw new TypeError("Cannot call a class as a function")})(this,ao),this.uploadState="paused",this.config=Wn,this.file=Yn,this.param=oo,this.fileKey=br.initFile(oo,Yn,this.config.enableCache),this.resume()}var zr;return(zr=[{key:"resume",value:function(){var oo=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Wn=this.config;In(this,Wn.retryCount,function(Dn){An(oo,Dn,Wn.retryCount,function(){oo.setUploadState("ended"),typeof Wn.onComplete=="function"&&Wn.onComplete(oo.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),br.removeFileInfo(this.fileKey),this.config.onError(new En("Upload Aborted",10499))}},{key:"setUploadState",value:function(oo){oo!==this.uploadState&&(this.uploadState=oo)}},{key:"setContext",value:function(oo){br.setUploadContext(this.fileKey,oo,this.config.enableCache),this.param.ctx=oo}},{key:"setComplete",value:function(){br.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&zn(ao.prototype,zr),ao}(),fo={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(zr){var Yn=br.getFileKey(zr),oo=br.getFileInfo(Yn);return oo===null?null:Ia()-oo.modifyAt>fo.expireTime?(br.removeFileInfo(Yn),null):{uploadInfo:Hr({bucketName:oo.bucket,objectName:oo.obj,token:oo.token,ctx:oo.ctx},oo.payload?{payload:oo.payload}:{}),complete:oo.end}},setMaxFileCache:function(zr){fo.maxFileCache=zr},setExpireTime:function(zr){fo.expireTime=zr},printCaches:function(){for(var zr=0,Yn=la(localStorage);zr<Yn.length;zr++){var oo=Yn[zr],Wn=br.getFileInfo(oo);Wn&&console.log(Wn,"modifiedAt",new Date(Wn.modifyAt).toTimeString())}},createConfig:function(zr){return new Ce(zr)},createTask:function(zr,Yn,oo){return new yo(zr,Yn,oo)}},Vo=fo;return qe.default}()}),vT=g(function(xe,he){xe.exports=function(){function Fe(ar){if(ar){var tr,mr="";return Qn(tr=la(ar)).call(tr,function(br,Nr){mr+=Nr===0?"?":"&",mr+=br+"="+ar[br]}),mr}return""}function qe(ar,tr,mr,br){return Error.call(this,mr),this.source=ar,this.code=tr,this.desc=mr,this.detail=br||{},this}function Ce(ar,tr){var mr=Cs(tr.prototype);mr.constructor=ar,ar.prototype=mr}function Pt(ar,tr){tr===void 0&&(tr={dataType:"json",method:"GET",timeout:5e3});var mr=tr.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",br=tr.method==="GET"?Fe(tr.params):"";return new _o(function(Nr,Fr){if(window.XMLHttpRequest){var jr,Vr=new XMLHttpRequest;if(Vr.onreadystatechange=function(){if(Vr.readyState===4)if(Vr.status===200){try{jr=JSON.parse(Vr.response||"{}")}catch{jr=Vr.response}Nr({status:Vr.status,data:jr})}else Fr(new qe(1,Vr.status,Vr.statusText))},Vr.open(tr.method,""+ar+br),Vr.timeout=tr.timeout||5e3,Vr.setRequestHeader("Content-Type",mr),tr.headers)for(var Kr in tr.headers)Vr.setRequestHeader(Kr,tr.headers[Kr]);Vr.ontimeout=function(Sn){Fr(new qe(1,408,Sn&&Sn.message?Sn.message:"request timeout"))},Vr.send(fa(tr.data))}else Fr(new qe(2,10400,"request no suppout"))})}return Ce(qe,Error),Pt}()}),_y=console,Nc,us,hu,Da,wi,Iy={setLogger:function(he){_y=he},platform:"BROWSER",localStorage:window.localStorage,request:vT,WebSocket:window.WebSocket,uploadFile:function(he){return Vn(this,void 0,void 0,wr.mark(function Fe(){var qe,Ce,Pt,ar,tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:if(he.fileInput||he.file){Nr.next=2;break}throw new Error("File not exist");case 2:if(!he.file){Nr.next=6;break}ar=he.file,Nr.next=20;break;case 6:if(typeof he.fileInput!="string"){Nr.next=15;break}if(!((tr=document.getElementById(he.fileInput))&&tr.files&&tr.files[0])){Nr.next=12;break}ar=tr.files[0],Nr.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:Nr.next=20;break;case 15:if(!(he.fileInput&&he.fileInput.files&&he.fileInput.files[0])){Nr.next=19;break}ar=he.fileInput.files[0],Nr.next=20;break;case 19:throw new Error("Can not get file from fileInput "+he.fileInput);case 20:if(!(he.maxSize&&ar.size>he.maxSize)){Nr.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+he.maxSize+", get "+ar.size);case 22:return Nr.next=24,new _o(function(Fr,jr){var Vr=Ph.createConfig({enableCache:!1,directUploadAddr:he.chunkUploadHost,onError:function(Cn){jr(Cn)},onProgress:he.onUploadProgress||function(){},onComplete:function(Cn){Fr(Cn)}}),Kr=Ph.createTask(ar,{bucketName:he.nosToken.bucket,objectName:decodeURIComponent(he.nosToken.objectName),token:he.nosToken.token},Vr);try{he.onUploadStart&&he.onUploadStart(Kr)}catch(Sn){_y.error("Adapter uploadFile: options.onUploadStart error",Sn&&Sn.message),Kr.abort(),jr(Sn)}});case 24:return(mr=Nr.sent).name=ar.name,mr.size=ar.size,mr.type=ar.type,mr.ext=kh(qe=mr.name).call(qe,".")>-1?Lo(Ce=mr.name).call(Ce,kh(Pt=mr.name).call(Pt,".")+1).toLowerCase():"",Nr.abrupt("return",mr);case 30:case"end":return Nr.stop()}},Fe)}))},getSystemInfo:function(){var he,Fe;return{os:((he=gu.os)===null||he===void 0?void 0:he.family)||"",osVer:((Fe=gu.os)===null||Fe===void 0?void 0:Fe.version)||"",browser:gu.name||"",browserVer:gu.version||"",hostEnv:"BROWSER",hostEnvVer:gu.version||"",hostInfo:gu.ua||""}}},Ps=function(){function xe(he,Fe){this.name=he,this.core=Fe,this.name=he,this.logger=Fe.logger,this.core=Fe}return xe.prototype.process=function(Fe){var qe=this[Fe.cmd+"Handler"];return typeof qe=="function"?qe.call(this,Fe):Fe.error&&!Fe.error.ignore?_o.reject(Fe.error):_o.resolve(Fe)},xe}();(function(xe){xe[xe.text=0]="text",xe[xe.image=1]="image",xe[xe.audio=2]="audio",xe[xe.video=3]="video",xe[xe.geo=4]="geo",xe[xe.notification=5]="notification",xe[xe.file=6]="file",xe[xe.tip=10]="tip",xe[xe.robot=11]="robot",xe[xe.g2=12]="g2",xe[xe.custom=100]="custom"})(Nc||(Nc={})),function(xe){xe[xe.p2p=0]="p2p",xe[xe.team=1]="team",xe[xe.superTeam=5]="superTeam"}(us||(us={})),function(xe){xe[xe.Android=1]="Android",xe[xe.iOS=2]="iOS",xe[xe.PC=4]="PC",xe[xe.WindowsPhone=8]="WindowsPhone",xe[xe.Web=16]="Web",xe[xe.Server=32]="Server",xe[xe.Mac=64]="Mac"}(hu||(hu={})),function(xe){xe[xe.unread=1]="unread",xe[xe.read=2]="read",xe[xe.deleted=3]="deleted",xe[xe.sending=4]="sending",xe[xe.sendFailed=5]="sendFailed",xe[xe.sent=6]="sent",xe[xe.receipt=7]="receipt",xe[xe.refused=10]="refused"}(Da||(Da={})),function(xe){xe[xe.default=0]="default",xe[xe.leave=1]="leave",xe[xe.roam=2]="roam"}(wi||(wi={}));var Ah=function(he,Fe){return function(qe){return he(Fe(qe))}},Nh=Ah(Object.getPrototypeOf,Object),yT=Function.prototype,bT=Object.prototype,Ey=yT.toString,ST=bT.hasOwnProperty,jl=Ey.call(Object),Gd=function(he){if(!zi(he)||zc(he)!="[object Object]")return!1;var Fe=Nh(he);if(Fe===null)return!0;var qe=ST.call(Fe,"constructor")&&Fe.constructor;return typeof qe=="function"&&qe instanceof qe&&Ey.call(qe)==jl};function xi(xe,he){if(!Gd(he))return{};var Fe=JSON.parse(fa(he)),qe=Oh(xe,Fe);return JSON.parse(fa(Hr(Hr({},Fe),qe)))}function Oh(xe,he){if(!Gd(he))return{};var Fe={},qe=la(xe);return Qn(qe).call(qe,function(Ce){var Pt=xe[Ce].type;if(typeof Pt!="string"){var ar=Oh(xe[Ce],he);la(ar).length>0&&(Fe[Ce]=ar)}else{var tr=xe[Ce],mr=tr.rawKey||Ce,br=df[Pt](he,mr,tr);br!==void 0&&(he[mr]=void 0,Fe[Ce]=br)}}),Fe}var df={number:function(he,Fe){if(he[Fe]!==void 0)return+he[Fe]},string:function(he,Fe){if(he[Fe]!==void 0)return he[Fe]},boolean:function(he,Fe){return+he[Fe]>0||+he[Fe]!=0&&void 0},enum:function(he,Fe,qe){return Bp(qe)[he[Fe]]},object:function(he,Fe){if(he[Fe]!==void 0)try{return JSON.parse(he[Fe])}catch{return{}}}};function Kd(xe,he){if(!Gd(he))return{};var Fe=JSON.parse(fa(he)),qe=Py(xe,Fe);return JSON.parse(fa(Hr(Hr({},Fe),qe)))}function Py(xe,he){var Fe;if(!Gd(he))return Op(Fe=la(xe)).call(Fe,function(Pt,ar){return Pt[xe[ar].rawKey||ar]=void 0,Pt},{});var qe={},Ce=la(xe);return Qn(Ce).call(Ce,function(Pt){var ar=xe[Pt].type;if(typeof ar!="string"){var tr=Py(xe[Pt],he[Pt]);return Hr(qe,tr),void(he[Pt]=void 0)}var mr=xe[Pt],br=mr.rawKey||Pt,Nr=Rh[ar](he,Pt,mr);he[br]=void 0,qe[br]=Nr}),qe}var Rh={number:function(he,Fe){return he[Fe]},string:function(he,Fe){return he[Fe]},boolean:function(he,Fe){return he[Fe]===!0?1:he[Fe]===!1?0:void 0},enum:function(he,Fe,qe){return Bp(qe)[he[Fe]]},object:function(he,Fe){if(he[Fe]!==void 0)try{return fa(he[Fe])}catch{return""}}},TT=Rh,Ay=function(he){return function(Fe,qe,Ce){for(var Pt=-1,ar=Object(Fe),tr=Ce(Fe),mr=tr.length;mr--;){var br=tr[he?mr:++Pt];if(qe(ar[br],br,ar)===!1)break}return Fe}}(),CT=function(he,Fe){for(var qe=-1,Ce=Array(he);++qe<he;)Ce[qe]=Fe(qe);return Ce},Bh=function(he){return zi(he)&&zc(he)=="[object Arguments]"},Ny=Object.prototype,pf=Ny.hasOwnProperty,MT=Ny.propertyIsEnumerable,kT=Bh(function(){return arguments}())?Bh:function(xe){return zi(xe)&&pf.call(xe,"callee")&&!MT.call(xe,"callee")},Qd=kT,Fh=function(){return!1},ff=g(function(xe,he){var Fe=he&&!he.nodeType&&he,qe=Fe&&xe&&!xe.nodeType&&xe,Ce=qe&&qe.exports===Fe?ni.Buffer:void 0,Pt=(Ce?Ce.isBuffer:void 0)||Fh;xe.exports=Pt}),wT=/^(?:0|[1-9]\d*)$/,mf=function(he,Fe){var qe=typeof he;return!!(Fe=Fe??9007199254740991)&&(qe=="number"||qe!="symbol"&&wT.test(he))&&he>-1&&he%1==0&&he<Fe},Ga={};Ga["[object Float32Array]"]=Ga["[object Float64Array]"]=Ga["[object Int8Array]"]=Ga["[object Int16Array]"]=Ga["[object Int32Array]"]=Ga["[object Uint8Array]"]=Ga["[object Uint8ClampedArray]"]=Ga["[object Uint16Array]"]=Ga["[object Uint32Array]"]=!0,Ga["[object Arguments]"]=Ga["[object Array]"]=Ga["[object ArrayBuffer]"]=Ga["[object Boolean]"]=Ga["[object DataView]"]=Ga["[object Date]"]=Ga["[object Error]"]=Ga["[object Function]"]=Ga["[object Map]"]=Ga["[object Number]"]=Ga["[object Object]"]=Ga["[object RegExp]"]=Ga["[object Set]"]=Ga["[object String]"]=Ga["[object WeakMap]"]=!1;var xT=function(he){return zi(he)&&ch(he.length)&&!!Ga[zc(he)]},$h=Fs&&Fs.isTypedArray,Lh=$h?ou($h):xT,_T=Object.prototype.hasOwnProperty,Oy=function(he,Fe){var qe=Gi(he),Ce=!qe&&Qd(he),Pt=!qe&&!Ce&&ff(he),ar=!qe&&!Ce&&!Pt&&Lh(he),tr=qe||Ce||Pt||ar,mr=tr?CT(he.length,String):[],br=mr.length;for(var Nr in he)!Fe&&!_T.call(he,Nr)||tr&&(Nr=="length"||Pt&&(Nr=="offset"||Nr=="parent")||ar&&(Nr=="buffer"||Nr=="byteLength"||Nr=="byteOffset")||mf(Nr,br))||mr.push(Nr);return mr},gf=Object.prototype,Dl=function(he){var Fe=he&&he.constructor;return he===(typeof Fe=="function"&&Fe.prototype||gf)},jh=Ah(Object.keys,Object),ys=Object.prototype.hasOwnProperty,IT=function(he){if(!Dl(he))return jh(he);var Fe=[];for(var qe in Object(he))ys.call(he,qe)&&qe!="constructor"&&Fe.push(qe);return Fe},Jd=function(he){return Gp(he)?Oy(he):IT(he)},Ry=function(he,Fe){return he&&Ay(he,Fe,Jd)},ET=function(he,Fe,qe,Ce){return Ry(he,function(Pt,ar,tr){Fe(Ce,qe(Pt),ar,tr)}),Ce},Dh,PT=function(he,Fe){return function(qe,Ce){return ET(qe,he,Fe(Ce),{})}},AT=Object.prototype.toString,bs=PT(function(xe,he,Fe){he!=null&&typeof he.toString!="function"&&(he=AT.call(he)),xe[he]=Fe},Zv(du)),NT=bs({Android:1,iOS:2,PC:4,WindowsPhone:8,Web:16,Server:32,Mac:64}),Uh={p2p:0,team:1,superTeam:5};function By(xe,he){return xe&&xe.length>0?Fo(xe).call(xe,function(Fe){return Hr(Hr({},Fe),{account:Fe.account,connectionId:Fe.connectionId,deviceId:Fe.deviceId,ip:Fe.ip,mac:Fe.mac,os:Fe.os,type:NT[Fe.type]||Fe.type,time:Uo(Fe.time),online:he!==3})}):[]}bs(Uh),function(xe){xe[xe.text=0]="text",xe[xe.image=1]="image",xe[xe.audio=2]="audio",xe[xe.video=3]="video",xe[xe.geo=4]="geo",xe[xe.notification=5]="notification",xe[xe.file=6]="file",xe[xe.tip=10]="tip",xe[xe.robot=11]="robot",xe[xe.g2=12]="g2",xe[xe.custom=100]="custom"}(Dh||(Dh={}));var OT={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},Fy={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},$y=function(xe){function he(qe){var Ce;return Ce=xe.call(this,"auth",qe)||this,ps({cmdMap:fy,cmdConfig:hy}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.doLogin=function(Ce){var Pt,ar;return Ce===void 0&&(Ce=!1),Vn(this,void 0,void 0,wr.mark(function tr(){var mr,br,Nr,Fr,jr,Vr,Kr,Sn,Cn,En;return wr.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:return mr=this.core.options,br=ua.getSystemInfo(),Nr=Hr(Hr({},mr),{appLogin:Ce?0:1,appkey:mr.appkey,account:mr.account,token:mr.token,deviceId:this.core.config.deviceId,clientType:16,protocolVersion:1,sdkVersion:91001,sdkHumanVersion:"0.13.1",os:br.os,browser:br.browser,session:(Pt=this.core.socket)===null||Pt===void 0?void 0:Pt.sessionId,sdkType:Fy[ua.platform]||0,userAgent:"Native/0.13.1"}),Fr=br.os.toLowerCase(),ua.platform!=="UNIAPP"||Fr!=="ios"&&Fr!=="android"||(Nr.isReactNative=1,Nr.clientType=Fr==="ios"?2:1,br.pushDeviceInfo&&br.pushDeviceInfo.MANUFACTURER&&(Nr.deviceInfo=fa(br.pushDeviceInfo))),this.logger.log("auth::do login ",mr.account,(ar=this.core.socket)===null||ar===void 0?void 0:ar.sessionId),An.next=8,this.core.sendCmd("login",{login:Nr});case 8:if(!(jr=An.sent).error){An.next=11;break}throw jr.error;case 11:return Vr=jr.content,Kr=Vr.loginRes,Sn=Vr.loginPorts,Cn=Vr.aosPushInfo,En=By(Sn,2),(En=Bs(En).call(En,function(zn){return zn.connectionId!==Kr.connectionId})).length>0&&this.core.emit("multiPortLogin",En),An.abrupt("return",Hr(Hr({},Kr),{aosPushInfo:Cn}));case 16:case"end":return An.stop()}},tr,this)}))},Fe.kick=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return br.next=2,this.core.sendCmd("kick",Ce);case 2:return tr=br.sent,br.abrupt("return",(Pt=tr.content)===null||Pt===void 0?void 0:Pt.deviceIds);case 4:case"end":return br.stop()}},ar,this)}))},Fe.multiPortLoginHandler=function(Ce){if(Ce.error)this.logger.error("multiPortLoginHandler:: error, ",Ce.error);else{var Pt=Ce.content,ar=By(Pt.loginPorts,Pt.state);ar.length>0&&this.core.emit("multiPortLogin",ar)}},Fe.kickedHandler=function(Ce){if(Ce.error)this.logger.error("kickedHandler:: error, ",Ce.error);else{var Pt=function(tr){var mr=xi({clientType:{type:"enum",values:hu},customClientType:{type:"number"}},tr),br=OT[mr.reason];return Hr(mr,br=br||{reason:"unknow",message:"Unknown reason"})}(Ce.content);this.logger.warn("kicked::",Pt),this.core.doDisconnect(fs.KICKED,Pt)}},he}(Ps);_n({target:"Number",stat:!0},{isNaN:function(he){return he!=he}});var Yd,RT=kr.Number.isNaN,BT=bs({none:0,normal:1,all:3}),Ly={normal:0,advanced:1},FT=bs(Ly),$T=bs({normal:0,owner:1,manager:2}),qh={noVerify:0,needVerify:1,rejectAll:2},jy=bs(qh),Dy={needVerify:0,noVerify:1},Uy=bs(Dy),vu={manager:0,all:1},Ul=bs(vu),Vh={manager:0,all:1},vi=bs(Vh),cc={manager:0,all:1},LT=bs(cc);function el(xe){var he,Fe=["teamId"],qe=["level","memberNum","memberUpdateTime","createTime","updateTime"],Ce=["valid","validToCurrentUser","mute"],Pt={type:FT,muteType:BT,joinMode:jy,beInviteMode:Uy,inviteMode:Ul,updateTeamMode:vi,updateExtMode:LT};xe.bits;var ar=ri(xe,["bits"]);return Qn(Fe).call(Fe,function(tr){ar[tr]&&(ar[tr]=ar[tr].toString())}),Qn(qe).call(qe,function(tr){ar[tr]!==void 0&&(ar[tr]=Uo(ar[tr]))}),Qn(Ce).call(Ce,function(tr){ar[tr]!==void 0&&(ar[tr]=Uo(ar[tr])===1)}),Qn(he=la(Pt)).call(he,function(tr){ar[tr]!==void 0&&(ar[tr]=Pt[tr][ar[tr]]||ar[tr])}),ar}function Hh(xe){return xe&&xe.length>0?Fo(xe).call(xe,function(he){return el(he)}):[]}function zh(xe){var he,Fe=Hr({},xe),qe=["avatar","name","intro","announcement","ext"],Ce={type:Ly,joinMode:qh,beInviteMode:Dy,inviteMode:vu,updateTeamMode:Vh,updateExtMode:cc};return Qn(qe).call(qe,function(Pt){Fe[Pt]!==void 0&&(Fe[Pt]=Fe[Pt].toString())}),Qn(he=la(Ce)).call(he,function(Pt){Fe[Pt]!==void 0&&(Fe[Pt]=Ce[Pt][Fe[Pt]])}),Fe}function qy(xe){var he=["teamId","ext","account","nickInTeam"],Fe={};return xe.bitConfigMask!==void 0&&(Fe.bits=Uo(xe.bitConfigMask)),Qn(he).call(he,function(qe){xe[qe]&&(Fe[qe]=xe[qe].toString())}),Fe}function Xd(xe){var he,Fe=["teamId"],qe=["joinTime","updateTime","bitConfigMask"],Ce=["active","valid","mute"],Pt={type:$T},ar=xe.bits,tr=ri(xe,["bits"]);return ar!==void 0&&(tr.muteTeam=Uo(ar)===1,tr.bitConfigMask=ar),tr.id=tr.teamId+"-"+tr.account,Qn(Fe).call(Fe,function(mr){tr[mr]&&(tr[mr]=tr[mr].toString())}),Qn(qe).call(qe,function(mr){tr[mr]!==void 0&&(tr[mr]=Uo(tr[mr]))}),Qn(Ce).call(Ce,function(mr){tr[mr]!==void 0&&(tr[mr]=Uo(tr[mr])===1)}),Qn(he=la(Pt)).call(he,function(mr){tr[mr]!==void 0&&(tr[mr]=Pt[mr][tr[mr]]||tr[mr])}),tr}function hf(xe){return xe&&xe.length>0?Fo(xe).call(xe,function(he){return Xd(he)}):[]}function Vy(xe,he,Fe){return Fe===void 0&&(Fe="normal"),{id:xe.teamId+"-"+he,teamId:xe.teamId,account:he,type:Fe,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:xe.memberUpdateTime,updateTime:xe.memberUpdateTime,active:!0,valid:!0}}function jT(xe,he,Fe){return Fe===void 0&&(Fe="normal"),he&&he.length>0?Fo(he).call(he,function(qe){return Vy(xe,qe,Fe)}):[]}function yu(xe){var he=Hr({},xe);return he.createTime&&(he.createTime=+he.createTime),he.updateTime&&(he.updateTime=+he.updateTime),he.gender&&(he.gender=Yd[+he.gender]),he}(function(xe){xe[xe.unknown=0]="unknown",xe[xe.male=1]="male",xe[xe.female=2]="female"})(Yd||(Yd={}));var Hy={"8_1":"createTeam","8_5":"addTeamMembers","8_6":"removeTeamMembers","8_7":"updateTeamInfo","8_8":"leaveTeam","8_9":"getTeamInfo","8_10":"getTeams","8_11":"getTeamMembers","8_12":"dismissTeam","8_13":"applyTeam","8_14":"passTeamApply","8_15":"rejectTeamApply","8_16":"addTeamManagers","8_17":"removeTeamManagers","8_18":"transferTeam","8_19":"updateMyMemberInfo","8_20":"updateNickInTeam","8_21":"acceptTeamInvite","8_22":"rejectTeamInvite","8_25":"muteTeamMember","8_27":"getMutedTeamMembers","8_28":"sendTeamMsgReceipt","8_29":"getTeamMsgReads","8_30":"getTeamMsgReadAccounts","8_31":"notifyTeamMsgReceipts","8_32":"muteTeam","8_33":"getTeamMemberInvitorAccid","8_34":"getTeamsById","8_101":"syncCreateTeam","8_109":"syncTeams","8_119":"syncUpdateTeamMember","8_126":"syncMyTeamMembers"},Oc={team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},teamMsgReceiptTag:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,ext:12,mute:13,invitorAccid:14}},As=Is(Oc),zy={getTeamInfo:{sid:8,cid:9,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"team",reflectMapper:As.team}]},getTeams:{sid:8,cid:10,service:"team",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:As.team},{type:"Number",name:"timetag"}],ignoreErrCodes:[803]},createTeam:{sid:8,cid:1,service:"team",params:[{type:"Property",name:"team",reflectMapper:Oc.team},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:As.team},{type:"StrArray",name:"abortedAccidList"}]},sendTeamMsgReceipt:{sid:8,cid:28,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Oc.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:As.teamMsgReceiptTag}]},getTeamMsgReads:{sid:8,cid:29,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Oc.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:As.teamMsgReceiptTag}]},getTeamMsgReadAccounts:{sid:8,cid:30,service:"team",params:[{type:"Property",name:"teamMsgReceiptTag",reflectMapper:Oc.teamMsgReceiptTag}],response:[{type:"Property",name:"teamMsgReceipt",reflectMapper:As.teamMsgReceiptTag},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},notifyTeamMsgReceipts:{sid:8,cid:31,service:"team",response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:As.teamMsgReceiptTag}]},dismissTeam:{sid:8,cid:12,service:"team",params:[{type:"Long",name:"teamId"}]},leaveTeam:{sid:8,cid:8,service:"team",params:[{type:"Long",name:"teamId"}]},transferTeam:{sid:8,cid:18,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateTeamInfo:{sid:8,cid:7,service:"team",params:[{type:"Property",name:"team",reflectMapper:Oc.team}],response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},getTeamsById:{sid:8,cid:34,service:"team",params:[{type:"LongArray",name:"teamIds"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:As.team},{type:"StrArray",name:"tids"}],ignoreErrCodes:[816]},getTeamMembers:{sid:8,cid:11,service:"team",params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:As.teamMember},{type:"Number",name:"timetag"}]},getMutedTeamMembers:{sid:8,cid:27,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:As.teamMember}]},addTeamMembers:{sid:8,cid:5,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}],response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},removeTeamMembers:{sid:8,cid:6,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applyTeam:{sid:8,cid:13,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:As.team}]},addTeamManagers:{sid:8,cid:16,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:8,cid:17,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateMyMemberInfo:{sid:8,cid:19,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:Oc.teamMember}]},updateNickInTeam:{sid:8,cid:20,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:Oc.teamMember}]},muteTeamMember:{sid:8,cid:25,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:8,cid:33,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}],response:[{type:"Object",name:"accountsMap"}]},muteTeam:{sid:8,cid:32,service:"team",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},passTeamApply:{sid:8,cid:14,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:8,cid:15,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptTeamInvite:{sid:8,cid:21,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:8,cid:22,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncTeams:{sid:8,cid:109,service:"team",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",reflectMapper:As.team}]},syncCreateTeam:{sid:8,cid:101,service:"team",response:[{type:"Property",name:"team",reflectMapper:As.team}]},syncUpdateTeamMember:{sid:8,cid:119,service:"team",response:[{type:"Property",name:"teamMember",reflectMapper:As.teamMember}]},syncMyTeamMembers:{sid:8,cid:126,ext:"sync",service:"team",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember",reflectMapper:As.teamMember},{type:"Number",name:"timetag"}]}},Wy={"3_7":"getUsersNameCardFromServer","3_10":"updateMyNameCard","3_109":"syncMyNameCard","3_110":"onUpdateMyNameCard","3_3":"setBlack","3_103":"onUpdateBlackList","3_5":"setMute","3_105":"onUpdateMuteList","3_8":"syncRelations"},Rc={user:{account:1,nick:3,avatar:4,signature:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13},relationMember:{account:0,isMuted:1,isBlack:2,createTime:3,updateTime:4}},bu=Is(Rc),DT={syncMyNameCard:{sid:3,cid:109,service:"user",response:[{type:"Property",name:"user",reflectMapper:bu.user},{type:"Number",name:"timetag"}]},setBlack:{service:"user",sid:3,cid:3,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateBlackList:{service:"user",sid:3,cid:103,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},setMute:{service:"user",sid:3,cid:5,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateMuteList:{service:"user",sid:3,cid:105,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},syncRelations:{service:"user",sid:3,cid:8,params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"list",reflectMapper:bu.relationMember},{type:"Number",name:"timetag"}]},getUsersNameCardFromServer:{service:"user",sid:3,cid:7,params:[{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"users",reflectMapper:bu.user}]},updateMyNameCard:{service:"user",sid:3,cid:10,params:[{type:"Property",name:"user",reflectMapper:Rc.user}],response:[{type:"Number",name:"timetag"}]},onUpdateMyNameCard:{service:"user",sid:3,cid:110,response:[{type:"Property",name:"user",reflectMapper:bu.user}]}},Gy={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1},needForcePush:{type:"boolean",required:!1},forcePushIDsList:{type:"string",allowEmpty:!1,required:!1},forcePushContent:{type:"string",allowEmpty:!1,required:!1}};function UT(xe,he){var Fe,qe=ja!==void 0&&Vd(xe)||xe["@@iterator"];if(qe)return Xo(Fe=(qe=qe.call(xe)).next).call(Fe,qe);if(Hi(xe)||(qe=function(ar,tr){var mr;if(ar){if(typeof ar=="string")return Ky(ar,tr);var br=Lo(mr=Object.prototype.toString.call(ar)).call(mr,8,-1);if(br==="Object"&&ar.constructor&&(br=ar.constructor.name),br==="Map"||br==="Set")return of(ar);if(br==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(br))return Ky(ar,tr)}}(xe))||he&&xe&&typeof xe.length=="number"){qe&&(xe=qe);var Ce=0;return function(){return Ce>=xe.length?{done:!0}:{done:!1,value:xe[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ky(xe,he){(he==null||he>xe.length)&&(he=xe.length);for(var Fe=0,qe=new Array(he);Fe<he;Fe++)qe[Fe]=xe[Fe];return qe}var Wh={subType:{type:"string"},setting:{resendFlag:{type:"boolean"},envConfig:{type:"string"},needSaveHistory:{type:"boolean"},needRoaming:{type:"boolean"},needOffline:{type:"boolean"},needSelfSync:{type:"boolean"},needRouted:{type:"boolean"},needUpdateSession:{type:"boolean"},isMuted:{type:"boolean"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBIZID:{type:"string"},clientAntispamHitting:{type:"boolean"},antiSpamUsingYidun:{type:"boolean"},yidunCallbackURL:{type:"string"},yidunAntiCheating:{type:"string"},yidunAntiSpamExtension:{type:"string"},yidunAntiSpamResult:{type:"string"}},pushInfo:Gy,teamSpecializationInfo:{needACK:{type:"boolean"},isACKSent:{type:"boolean"},ackSnapshot:{type:"number"}},threadMessageInfo:{replyMsgFromAccount:{type:"string"},replyMsgToAccount:{type:"string"},replyMsgTime:{type:"number"},replyMsgIdServer:{type:"string"},replyMsgIdClient:{type:"string"},threadMsgFromAccount:{type:"string"},threadMsgToAccount:{type:"string"},threadMsgTime:{type:"number"},threadMsgIdServer:{type:"string"},threadMsgIdClient:{type:"string"}}},tl={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMemberMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function Ki(xe,he){return us[xe.scene]+"-"+(xe.to===he?xe.from:xe.to)}function vf(xe,he){return xe.from===he?xe.to===he?"in":"out":"in"}function lc(xe,he){var Fe=he.account,qe=he.featureValue,Ce=he.statusValue,Pt=he.sessionAck,ar=he.msgReceiptTime,tr=us[xe.scene],mr=xe.to===Fe?xe.from:xe.to,br=wi.default,Nr=Da.unread;Uo(xe.isInBlackList)>0?(Nr=Da.refused,delete xe.isInBlackList):Nr=xe.from===Fe?ar&&ar>=+xe.time?Da.receipt:Da.sent:Pt&&Pt>=+xe.time?Da.read:Da.unread;var Fr=Hr(Hr({},xi(Wh,xe)),{scene:tr,type:Nc[xe.type],fromClientType:hu[xe.fromClientType],flow:vf(xe,Fe),target:mr,to:xe.to,from:xe.from,time:xe.time?+xe.time:void 0,userUpdateTime:xe.userUpdateTime?+xe.userUpdateTime:void 0,idClient:xe.idClient,sessionId:tr+"-"+mr,status:Da[Ce||Nr],feature:wi[qe||br]});if(typeof Fr.attach=="string")try{Fr.attach=JSON.parse(Fr.attach)}catch{}return Fr.type==="notification"&&(Fr.attach=Fr.attach?function(Vr){var Kr,Sn={};if(Sn.type=tl[Vr.id]||Vr.id,!Vr.data)return Sn;var Cn,En={ids:"accounts",id:"account",attach:"custom",channel:"channelId",calltype:"netcallType",mute:"mute",duration:"duration",time:"time",from:"from",ext:"ext"},In=Vr.data;return Qn(Kr=la(En)).call(Kr,function(An){In[An]!==void 0&&(Sn[En[An]]=In[An])}),In.tinfo&&(Sn.team=el(nc(In.tinfo,As.team))),In.uinfos&&(Sn.users=Fo(Cn=In.uinfos).call(Cn,function(An){return yu(nc(An,bu.user))})),In.mute!==void 0&&(Sn.mute=Uo(In.mute)===1),Sn}(Fr.attach):{}),Fr}function Zd(xe,he){return xe&&xe.length>0?Su(Fo(xe).call(xe,function(Fe){return lc(Fe,he)})):[]}function Su(xe){for(var he,Fe,qe={},Ce=UT(xe);!(Fe=Ce()).done;){var Pt=Fe.value,ar=qe[Pt.idClient];ar&&ar.time>Pt.time||(qe[Pt.idClient]=Pt)}return Fo(he=la(qe)).call(he,function(tr){return qe[tr]})}function ql(xe,he){he===void 0&&(he=!0);var Fe=Hr({},xe);if(Fe.pushInfo&&he){for(var qe in Fe.pushInfo)typeof Fe.pushInfo[qe]=="boolean"?Fe[qe]=Fe.pushInfo[qe]?1:0:Fe[qe]=Fe.pushInfo[qe];delete Fe.pushInfo}return Fe.scene===us.team&&Fe.needForcePush&&(Fe.forcePushContent=Fe.forcePushContent||Fe.pushContent,Fe.forcePushIDsList=Fe.forcePushIDsList?Fe.forcePushIDsList:"#%@all@%#"),Fe}function ep(xe,he){return Fo(xe).call(xe,function(Fe){var qe;return qe=he||(RT(Uo(Fe.scene))?Fe.scene:Uo(Fe.scene)===1?"p2p":"team"),{deletedTime:Uo(Fe.time),from:Fe.from,idClient:Fe.deletedIdClient||Fe.idClient,idServer:Fe.deletedIdServer||Fe.idServer,scene:qe,time:Uo(Fe.time),to:Fe.to}})}var Gh=Array.prototype.reverse,ya=function(he){return he==null?he:Gh.call(he)},da=function(){function xe(he){this.core=he}return xe.prototype.processBroadcastMsg=function(Fe){var qe=Fo(Fe).call(Fe,function(Ce){return Hr(Hr({},Ce),{time:Uo(Ce.time)})});return this.core.sendCmd("batchMarkRead",{sid:7,cid:17,ids:Fo(qe).call(qe,function(Ce){return Ce.id})}),qe},xe}(),Kh={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1}},Qy={pushContent:8,pushPayload:9,needPush:107,needPushBadge:109,needPushNick:110},ms={"4_4":"syncOfflineMsgs","4_9":"syncRoamingMsgs","4_17":"syncRoamingMsgs","4_21":"syncDeleteSelfMsgs","7_1":"sendMsg","8_23":"getHistoryTeamMsgs","21_14":"getHistorySuperTeamMsgs","8_2":"sendTeamMsg","21_2":"sendSuperTeamMsg","7_11":"sendMsgReceipt","7_13":"recallMsg","7_24":"deleteSelfMsgs","21_17":"recallSuperTeamMsg","7_2":"onMsg","8_3":"onMsg","21_3":"onMsg","7_101":"onMsg","8_102":"onMsg","21_102":"onMsg","8_4":"nimOnTeamMsgs","4_16":"syncBroadcastMsg","7_17":"onBroadcastMsg","7_123":"onDeleteSelfMsg","7_124":"onDeleteSelfMsgs"},is=Hr({scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resendFlag:13,userUpdateTime:14,ext:15,needAntiSpam:21,antiSpamContent:22,antiSpamBIZID:23,clientAntispamHitting:24,antiSpamUsingYidun:25,needACK:26,yidunCallbackURL:27,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,isDeleted:39,callbackExt:40,subType:41,yidunAntiCheating:42,envConfig:43,yidunAntiSpamExtension:44,yidunAntiSpamResult:45,needSaveHistory:100,needRoaming:101,needSelfSync:102,isMuted:104,needRouted:105,isInBlackList:106,needOffline:108,isReplyMsg:111,ackSnapshot:112},{pushContent:17,pushPayload:16,forcePushIDsList:18,forcePushContent:19,needForcePush:20,needPush:107,needPushBadge:109,needPushNick:110}),rl={msg:is,recallMsgTag:Hr({time:0,type:1,to:2,from:3,ps:4,attach:5,deletedIdClient:10,deletedIdServer:11,opeAccount:16,env:21},Qy),deleteSelfMsgTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,ext:8},msgReceiptTag:{to:1,from:2,time:7,idClient:11},broadcastMsg:{id:1,fromAccid:2,time:4,body:5}},Ns=Is(rl),qT={sendMsg:{sid:7,cid:1,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:rl.msg}],response:[{type:"Property",name:"msg",reflectMapper:Ns.msg}],ignoreErrCodes:[7101]},sendTeamMsg:{sid:8,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:rl.msg}],response:[{type:"Property",name:"msg",reflectMapper:Ns.msg}]},sendSuperTeamMsg:{sid:21,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:rl.msg}],response:[{type:"Property",name:"msg",reflectMapper:Ns.msg}]},onMsg:{sid:7,cid:2,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:Ns.msg}]},nimOnTeamMsgs:{sid:8,cid:4,service:"msg",response:[{type:"PropertyArray",name:"datas",reflectMapper:Ns.msg}]},getHistoryTeamMsgs:{sid:8,cid:23,service:"msg",params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ns.msg}]},getHistorySuperTeamMsgs:{sid:21,cid:14,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ns.msg}],service:"msg"},recallMsg:{sid:7,cid:13,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:rl.recallMsgTag}]},deleteSelfMsgs:{sid:7,cid:24,service:"msg",params:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:rl.deleteSelfMsgTag}],response:[{type:"Long",name:"timetag"}]},recallSuperTeamMsg:{sid:21,cid:17,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:rl.recallMsgTag}]},sendMsgReceipt:{sid:7,cid:11,service:"msg",params:[{type:"Property",name:"msgReceiptTag",reflectMapper:rl.msgReceiptTag}],response:[{type:"Property",name:"msgReceiptTag",reflectMapper:Ns.msgReceiptTag}]},batchMarkRead:{sid:4,cid:5,service:"msg",isNoResponse:!0,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},syncMsgReceipts:{sid:4,cid:12,service:"msg",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:Ns.msgReceiptTag},{type:"Number",name:"timetag"}]},syncOfflineMsgs:{sid:4,cid:4,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ns.msg}]},syncRoamingMsgs:{sid:4,cid:9,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ns.msg}]},syncBroadcastMsg:{sid:4,cid:16,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ns.broadcastMsg}]},onBroadcastMsg:{sid:7,cid:17,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:Ns.broadcastMsg}]},onDeleteSelfMsg:{sid:7,cid:123,service:"msg",response:[{type:"Property",name:"deletedMsg",reflectMapper:Ns.deleteSelfMsgTag}]},onDeleteSelfMsgs:{sid:7,cid:124,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:Ns.deleteSelfMsgTag}]},syncDeleteSelfMsgs:{sid:4,cid:21,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:Ns.deleteSelfMsgTag}]}},Jy=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"msg",qe)||this).service=new da(qe),ps({cmdMap:ms,cmdConfig:qT}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.sendTextMsg=function(Ce){return Jn({body:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Hr(Hr({},Ce),{type:"text"}))},Fe.sendTipMsg=function(Ce){return Jn({body:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Hr(Hr({},Ce),{type:"tip"}))},Fe.sendGeoLocationMsg=function(Ce){return Jn({attach:{type:"object",rules:{title:{type:"string",allowEmpty:!1},lat:{type:"number"},lng:{type:"number"}}}},Ce),this.sendMsg(Hr(Hr({},Ce),{type:"geo",attach:fa(Ce.attach)}))},Fe.sendCustomMsg=function(Ce){return Jn({attach:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Hr(Hr({},Ce),{type:"custom"}))},Fe.sendMsg=function(Ce){var Pt,ar,tr=this;!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please send message after syncdone event"),Jn({scene:{type:"enum",values:Wi(us)},type:{type:"enum",values:Wi(Nc)},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},setting:{type:"object",rules:{resendFlag:{type:"boolean",required:!1},needSaveHistory:{type:"boolean",required:!1},needRoaming:{type:"boolean",required:!1},needOffline:{type:"boolean",required:!1},needSelfSync:{type:"boolean",required:!1},needRouted:{type:"boolean",required:!1},needUpdateSession:{type:"boolean",required:!1}},required:!1},antiSpamInfo:{type:"object",required:!1,rules:{clientAntispamHitting:{type:"boolean",required:!1},antiSpamUsingYidun:{type:"boolean",required:!1}}},pushInfo:{type:"object",required:!1,rules:Gy},teamSpecializationInfo:{type:"object",required:!1,rules:{needACK:{type:"boolean",required:!1}}}},Ce);var mr,br=Ce.scene==="p2p"?"sendMsg":Ce.scene==="team"?"sendTeamMsg":"sendSuperTeamMsg",Nr=function(Vr,Kr,Sn,Cn){Vr.onSendBefore,Vr.onUploadStart,Vr.onUploadDone;var En=Vr.replyMsg,In=ri(Vr,["onSendBefore","onUploadStart","onUploadDone","replyMsg"]),An=Hr(Hr({},Kd(Wh,In)),{scene:us[Vr.scene],type:Nc[Vr.type],from:Kr,fromClientType:16,fromDeviceId:Sn,fromNick:Cn==null?void 0:Cn.nick,userUpdateTime:Cn==null?void 0:Cn.updateTime,status:Da[Da.sending]});if(An.idClient=An.resendFlag?Vr.idClient:ef(),!An.idClient)throw new Gg("idClient is required to resend a message","idClient","required");return An=ql(An,!1),En&&(An.replyMsgFromAccount=En.from,An.replyMsgToAccount=En.to,An.replyMsgTime=+En.time,An.replyMsgIdServer=En.idServer,An.replyMsgIdClient=En.idClient,An.threadMsgFromAccount=En.from,An.threadMsgToAccount=En.to,An.threadMsgTime=+En.time,An.threadMsgIdServer=En.idServer,An.threadMsgIdClient=En.idClient,En.threadMessageInfo&&En.threadMessageInfo.threadMsgIdServer&&(An.threadMsgFromAccount=En.threadMessageInfo.threadMsgFromAccount,An.threadMsgToAccount=En.threadMessageInfo.threadMsgToAccount,An.threadMsgTime=En.threadMessageInfo.threadMsgTime,An.threadMsgIdServer=En.threadMessageInfo.threadMsgIdServer,An.threadMsgIdClient=En.threadMessageInfo.threadMsgIdClient)),An}(Ce,this.core.account,this.core.config.deviceId,(ar=this.core.user)===null||ar===void 0?void 0:ar.myInfo),Fr=lc(Hr(Hr({},Nr),{time:new Date().getTime()}),{account:this.core.account,featureValue:wi.default,statusValue:Da.sending});try{Ce.onSendBefore&&Ce.onSendBefore(Fr)}catch(jr){this.logger.error("sendMsg: options.onSendBefore error",jr)}return this.core.eventBus.emit("session/updateForNewMsg",Fr),this.core.sendCmd(br,{msg:Nr}).then(function(jr){var Vr=jr.content,Kr=jr.error;if(mr=Vr.msg,Kr)throw Kr;var Sn=lc(Hr(Hr({},Nr),Vr.msg),{account:tr.core.account,featureValue:wi.default,statusValue:Da.sent});return Sn.from===Sn.to&&tr.markMsgsAck([Sn]),tr.core.eventBus.emit("session/updateForNewMsg",Sn),tr.core.reporter.report("msgSend",{msgId:Sn.idServer,clientId:Sn.idClient,msgTime:Sn.time,fromAccid:Ce.scene==="p2p"?tr.core.account:"",toAccid:Sn.to,type:us[Sn.scene],roomId:"",tid:Ce.scene==="p2p"?"":Sn.to,result:200,faiReason:"",rt:Ia()-Fr.time}),Sn}).catch(function(jr){var Vr=lc(Hr(Hr(Hr({},Nr),{time:new Date().getTime()}),mr),{account:tr.core.account,featureValue:wi.default,statusValue:jr.code===7101?Da.refused:Da.sendFailed});throw jr.msg=Vr,tr.core.eventBus.emit("session/updateForNewMsg",Vr),tr.core.reporter.report("msgSend",{msgId:Vr.idServer,clientId:Vr.idClient,msgTime:Vr.time,fromAccid:Ce.scene==="p2p"?tr.core.account:"",toAccid:Vr.to,type:us[Vr.scene],roomId:"",tid:Ce.scene==="p2p"?"":Vr.to,result:jr==null?void 0:jr.code,faiReason:(jr==null?void 0:jr.message)||"",rt:Ia()-Fr.time}),jr})},Fe.resendMsg=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(Jn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}}},Ce),ar=Ce.msg,tr=Hr(Hr({},ar),{attach:ar.attach?fa(ar.attach):void 0,setting:{resendFlag:!0}}),ar.from===this.core.account){br.next=5;break}throw new Error("You can only resend messages that you sent: "+ar.idClient);case 5:return br.abrupt("return",this.sendMsg(tr));case 6:case"end":return br.stop()}},Pt,this)}))},Fe.forwardMsg=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}},scene:{type:"enum",values:Wi(us)},to:{type:"string",allowEmpty:!1}},Ce),ar=Ce.msg,tr=Hr(Hr({},ar),{scene:Ce.scene,to:Ce.to,attach:ar.attach?fa(ar.attach):void 0}),br.abrupt("return",this.sendMsg(tr));case 4:case"end":return br.stop()}},Pt,this)}))},Fe.sendImageMsg=function(Ce){return this.doSendFile(Hr(Hr({},Ce),{type:"image"}))},Fe.sendFileMsg=function(Ce){return this.doSendFile(Hr(Hr({},Ce),{type:"file"}))},Fe.sendAudioMsg=function(Ce){return this.doSendFile(Hr(Hr({},Ce),{type:"audio"}))},Fe.sendVideoMsg=function(Ce){return this.doSendFile(Hr(Hr({},Ce),{type:"video"}))},Fe.doSendFile=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(Jn({scene:{type:"enum",values:Wi(us)},to:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},Ce),ar=Ce.attach){br.next=28;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){br.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return br.prev=5,this.core.reporter.reportTraceStart("nos",{user_id:this.core.account,action:"upload"}),br.next=9,this.core.cloudStorage.uploadFile(Ce);case 9:ar=br.sent,this.core.reporter.reportTraceEnd("nos",!0),br.next=20;break;case 13:throw br.prev=13,br.t0=br.catch(5),tr=br.t0,this.core.reporter.reportTraceUpdateV2("nos",{operation_type:"transfer",description:tr.message,code:tr.code||0,target:"",succeed:!1}),this.core.reporter.reportTraceEnd("nos",!1),this.logger.error("sendFile:: upload File error or abort",br.t0),br.t0;case 20:br.prev=20,Ce.onUploadDone&&Ce.onUploadDone(ar),br.next=28;break;case 24:throw br.prev=24,br.t1=br.catch(20),this.logger.error("sendFile options.onUploadDone err",br.t1),br.t1;case 28:return br.abrupt("return",this.sendMsg(Hr(Hr({},Ce),{attach:fa(ar),type:Ce.type})));case 29:case"end":return br.stop()}},Pt,this,[[5,13],[20,24]])}))},Fe.recallMsg=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call recallMsg after syncdone event"),Jn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},scene:{type:"enum",values:Wi(us)},time:{type:"number"}}},pushInfo:{type:"object",required:!1,rules:Kh},ps:{type:"string",allowEmpty:!1,required:!1}},Ce),tr=Ce.msg,mr={p2p:"recallMsg",team:"recallMsg",superTeam:"recallSuperTeamMsg"},br={p2p:7,team:8,superTeam:12},Fr.next=7,this.core.sendCmd(mr[tr.scene],{recallMsgTag:ql({time:tr.time,type:br[tr.scene],to:tr.to,from:tr.from,ps:Ce.ps,attach:Ce.attach,deletedIdClient:tr.idClient,deletedIdServer:tr.idServer,opeAccount:tr.from,env:Ce.env,pushInfo:Ce.pushInfo})});case 7:return this.core.eventBus.emit("session/updateForDeletedMsg",ep([tr])),Fr.abrupt("return",tr);case 9:case"end":return Fr.stop()}},ar,this)}))},Fe.deleteSelfMsgs=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call deleteSelfMsgs after syncdone event"),Jn({msgs:{type:"array",rules:{scene:{type:"enum",values:["p2p","team"]},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},time:{type:"number",allowEmpty:!1}}},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),tr=Ce.msgs,mr=Fo(tr).call(tr,function(jr){return{scene:jr.scene==="p2p"?1:2,from:jr.from,to:jr.to,idServer:jr.idServer,idClient:jr.idClient,time:jr.time,ext:Ce.ext}}),Fr.next=6,this.core.sendCmd("deleteSelfMsgs",{deletedMsgs:mr});case 6:return br=ep(mr),this.core.eventBus.emit("session/updateForDeletedMsg",br),Fr.abrupt("return",br);case 9:case"end":return Fr.stop()}},ar,this)}))},Fe.sendMsgReceipt=function(Ce){var Pt,ar,tr;return Vn(this,void 0,void 0,wr.mark(function mr(){var br,Nr,Fr,jr;return wr.wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:if(!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call sendMsgReceipt after syncdone event"),Jn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},target:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ce),(br=Ce.msg).scene==="p2p"&&br.flow==="in"){Kr.next=6;break}return this.logger.warn("Msg scene: "+br.scene+", flow: "+br.flow+" is not allowed to send msg receipt"),Kr.abrupt("return",void 0);case 6:return Nr={to:br.target,idClient:br.idClient,time:br.time},Kr.next=9,this.core.sendCmd("sendMsgReceipt",{msgReceiptTag:Nr});case 9:return Fr=Kr.sent,jr=Uo((tr=(ar=Fr.content)===null||ar===void 0?void 0:ar.msgReceiptTag)===null||tr===void 0?void 0:tr.time),Kr.abrupt("return",Hr(Hr({},Nr),{time:jr?Math.min(jr,Nr.time):Nr.time}));case 12:case"end":return Kr.stop()}},mr,this)}))},Fe.sendTeamMsgReceipt=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call sendTeamMsgReceipt after syncdone event"),Jn({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}},max:50}},Ce),tr=Ce.teamMsgReceipts,this.core.sendCmd("sendTeamMsgReceipt",{teamMsgReceipts:tr}),br.abrupt("return",void 0);case 5:case"end":return br.stop()}},ar,this)}))},Fe.getTeamMsgReads=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return Jn({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},Ce),tr=Ce.teamMsgReceipts,Fr.next=4,this.core.sendCmd("getTeamMsgReads",{teamMsgReceipts:tr});case 4:return mr=Fr.sent,br=(br=(Pt=mr.content)===null||Pt===void 0?void 0:Pt.teamMsgReceipts)?Fo(br).call(br,function(jr){return Hr(Hr({},jr),{read:Uo(jr.read),unread:Uo(jr.unread)})}):[],Fr.abrupt("return",br);case 8:case"end":return Fr.stop()}},ar,this)}))},Fe.getTeamMsgReadAccounts=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamMsgReceipt:{type:"object",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},Ce),ar=Ce.teamMsgReceipt,br.next=4,this.core.sendCmd("getTeamMsgReadAccounts",{teamMsgReceiptTag:ar});case 4:return tr=br.sent,br.abrupt("return",tr.content);case 6:case"end":return br.stop()}},Pt,this)}))},Fe.markMsgsAck=function(Ce){if(Ce&&Ce.length>0){var Pt=[],ar=[];Qn(Ce).call(Ce,function(tr){tr.scene==="p2p"&&tr.flow==="in"?Pt.push(tr):tr.scene==="team"&&tr.flow==="in"&&ar.push(tr)}),Pt.length>0&&this.core.sendCmd("batchMarkRead",{sid:7,cid:2,ids:Fo(Pt).call(Pt,function(tr){return tr.idServer})}),ar.length>0&&this.core.sendCmd("batchMarkRead",{sid:8,cid:3,ids:Fo(ar).call(ar,function(tr){return tr.idServer})})}},Fe.onMsgHandler=function(Ce){var Pt;if(Ce.error)this.logger.error("msgHandler::recvError",Ce.error);else{var ar=typeof oi(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0,tr=Ce.content.msg;tr.idServer=tr.idServer||ar;var mr=Ia(),br=Ki(tr,this.core.account),Nr=(Pt=this.core.session)===null||Pt===void 0?void 0:Pt.getSessionWithUncomplete({id:br}),Fr=lc(tr,Nr?{account:this.core.account,sessionAck:Nr.ack,msgReceiptTime:Nr.msgReceiptTime}:{account:this.core.account});if(this.core.options.debugLevel==="debug"?this.logger.debug("msgHandler::recvMsg",Fr.idClient,Fr.idServer,Fr):this.logger.log("msgHandler::recvMsg",Fr.idClient,Fr.idServer),this.markMsgsAck([Fr]),this.core.eventBus.emit("session/updateForNewMsg",Fr),this.core.emit("msg",Fr),Fr.type==="notification")this.core.eventBus.emit("team/onNotification",Fr);else if(Fr.flow!=="out"){var jr=Fr.scene==="p2p",Vr={msgId:Fr.idServer,clientId:Fr.idClient,receiveTime:Ce.__receiveTime,serverTime:Fr.time,callbackTime:Ia(),preHandleTime:mr,fromAccid:Fr.from,toAccid:this.core.account,type:us[Fr.scene],tid:jr?"":Fr.to,result:200,failReason:"",rt:Ia()-Fr.time};this.core.reporter.report("msgReceive",Vr,!0)}}},Fe.nimOnTeamMsgsHandler=function(Ce){var Pt,ar=this;Qn(Pt=Ce.content.datas).call(Pt,function(tr){ar.onMsgHandler(Hr({},Ce,{content:{msg:tr}}))})},Fe.syncRoamingMsgsHandler=function(Ce){var Pt,ar,tr=Ce.content.msgs||[];if(tr.length!==0){var mr=Ki(tr[0],this.core.account),br=(Pt=this.core.session)===null||Pt===void 0?void 0:Pt.getSessionWithUncomplete({id:mr}),Nr=(tr=Zd(tr,br?{account:this.core.account,featureValue:wi.roam,sessionAck:br.ack,msgReceiptTime:br.msgReceiptTime}:{account:this.core.account,featureValue:wi.roam}))[0].time,Fr={timetag:Nr,sessionId:mr,msgs:ya(tr)};!((ar=this.core.sync)===null||ar===void 0)&&ar.getSyncDoneFlag()||this.core.eventBus.emit("session/syncMsgs",Fr),this.core.emit("syncRoamingMsgs",Fr),this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:Nr})}},Fe.syncOfflineMsgsHandler=function(Ce){var Pt,ar=this,tr=Ce.content.msgs||[];if(tr.length!==0){var mr={},br=[];Qn(tr).call(tr,function(Fr){var jr=Ki(Fr,ar.core.account),Vr=ar.core.session.getSessionWithUncomplete({id:jr}),Kr=lc(Fr,Vr?{account:ar.core.account,featureValue:wi.leave,sessionAck:Vr.ack,msgReceiptTime:Vr.msgReceiptTime}:{account:ar.core.account,featureValue:wi.leave});br.push(Kr),mr[Kr.sessionId]?mr[Kr.sessionId].push(Kr):mr[Kr.sessionId]=[Kr]}),this.markMsgsAck(br);var Nr=0;Qn(Pt=la(mr)).call(Pt,function(Fr){var jr,Vr=Zc(jr=mr[Fr]).call(jr,function(Sn,Cn){return Cn.time-Sn.time});(Vr=Su(Vr))[0].time>Nr&&(Nr=Vr[0].time);var Kr={timetag:Vr[0].time,sessionId:Fr,msgs:Vr};ar.core.eventBus.emit("session/syncMsgs",Kr),ar.core.emit("syncOfflineMsgs",Kr)}),this.core.eventBus.emit("sync/updateTimetag",{offlineMsgs:Nr})}},Fe.syncDeleteSelfMsgsHandler=function(Ce){var Pt,ar=(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.deletedMsgs;ar&&ar.length>0||this.logger.warn("syncDeleteSelfMsgs:: no msgs");var tr=ar[ar.length-1].time;this.core.eventBus.emit("sync/updateTimetag",{deleteSelfMsgs:tr})},Fe.onDeleteSelfMsgHandler=function(Ce){var Pt=ep([Ce.content.deletedMsg]);this.core.eventBus.emit("session/updateForDeletedMsg",Pt),this.core.emit("deleteSelfMsgs",Pt)},Fe.onDeleteSelfMsgsHandler=function(Ce){var Pt=ep(Ce.content.deletedMsgs);this.core.eventBus.emit("session/updateForDeletedMsg",Pt),this.core.emit("deleteSelfMsgs",Pt)},Fe.onBroadcastMsgHandler=function(Ce){var Pt=Ce.content.msg,ar=this.service.processBroadcastMsg([Pt]);this.core.emit("broadcastMsgs",ar)},Fe.syncBroadcastMsgHandler=function(Ce){var Pt=Ce.content.msgs,ar=this.service.processBroadcastMsg(Pt);this.core.emit("broadcastMsgs",ar)},he}(Ps),VT={"5_1":"sync"},HT={sync:{sid:5,cid:1,service:"sync",isNoResponse:!0,params:[{type:"Property",name:"sync",reflectMapper:{myInfo:1,offlineMsgs:2,teams:3,roamingMsgs:7,relations:9,friends:11,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,recallMsg:17,sessionAck:18,broadcastMsgs:20,signaling:21,superTeams:22,mySuperTeamMembers:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteSelfMsgs:27,stickTopSessions:28,sessionHistoryMsgsDelete:29}}],response:[{type:"Number",name:"timetag"}]}},yf=function(xe){function he(qe,Ce){var Pt;return Ce===void 0&&(Ce={}),(Pt=xe.call(this,"sync",qe)||this).options=Ce,Pt.syncDoneFlag=!1,Pt.options=Hr({myInfo:!!qe.user.name,offlineMsgs:!!qe.msg.name,teams:!!qe.team.name,myTeamMembers:!!qe.team.name,roamingMsgs:!!qe.msg.name,relations:!!qe.user.name,friends:!!qe.friend.name,friendUsers:!!qe.user.name,msgReceipts:!!qe.msg.name,recallMsg:!!qe.msg.name,sessionAck:!!qe.session.name,superTeamSessionAck:!!qe.session.name,superTeams:!!qe.superTeam.name,mySuperTeamMembers:!!qe.superTeam.name,superTeamRoamingMsgs:!!qe.superTeam.name,deleteSuperTeamMsg:!!qe.superTeam.name,deleteSelfMsgs:!!qe.msg.name,sessionHistoryMsgsDelete:!!qe.msgLog.name,signaling:!!qe.signaling.name},Ce),Pt.timetags={},Pt.pArray=[],Pt.initEventListeners(),ps({cmdMap:VT,cmdConfig:HT}),Pt}ea(he,xe);var Fe=he.prototype;return Fe.getSyncDoneFlag=function(){return this.syncDoneFlag},Fe.doSync=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Pt=this.genSyncParams(),this.logger.log("doSync: ",Pt),tr.next=4,this.core.sendCmd("sync",{sync:Pt});case 4:case"end":return tr.stop()}},Ce,this)}))},Fe.initEventListeners=function(){var Ce=this;this.core.eventBus.on("sync/updateTimetag",function(Pt){var ar;Qn(ar=la(Pt)).call(ar,function(tr){Pt[tr]>(Ce.timetags[tr]||0)&&(Ce.timetags[tr]=Pt[tr])})}),this.core.eventBus.on("logined",function(){Ce.syncDoneFlag=!1})},Fe.genSyncParams=function(){var Ce,Pt,ar=this;return Op(Ce=Bs(Pt=la(this.options)).call(Pt,function(tr){var mr=tr;return ar.options[mr]})).call(Ce,function(tr,mr){var br=mr;return tr[br]=ar.timetags[br]||0,tr},{})},Fe.handleImmediate=function(Ce){var Pt;this.core.session&&this.core.session.onSyncDone&&this.core.session.onSyncDone(),this.logger.log("sync: emit syncdone",(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.timetag),this.syncDoneFlag=!0,this.core.emit("syncdone")},Fe.syncHandler=function(Ce){var Pt=this;(function(){return typeof tt<"u"&&tt.getSystemInfo?"TT":typeof swan<"u"&&swan.getSystemInfo?"BAIDU":typeof my<"u"&&my.getSystemInfo?"ALI":typeof wx<"u"&&wx.getSystemInfo?"WX":"unknow environment"})()==="ALI"?(this.logger.log("sync: emit ALIAPP sycnHandler, handle later"),Ro(function(){Pt.handleImmediate(Ce)},100)):this.handleImmediate(Ce)},he}(Ps),Ua={"6_26":"getNosCdnHost"},Yy={getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:Is({nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4}}).nosConfigTag}]}},zT=function(xe){function he(Fe){var qe;return(qe=xe.call(this,"misc",Fe)||this).core=Fe,qe.nosCdnHostTimer=0,ps({cmdMap:Ua,cmdConfig:Yy}),qe}return ea(he,xe),he}(Ps),Tu=function(he,Fe,qe){Fe=="__proto__"&&Dd?Dd(he,Fe,{configurable:!0,enumerable:!0,value:qe,writable:!0}):he[Fe]=qe},Xy=Object.prototype.hasOwnProperty,bf=function(he,Fe,qe){var Ce=he[Fe];Xy.call(he,Fe)&&Pc(Ce,qe)&&(qe!==void 0||Fe in he)||Tu(he,Fe,qe)},Qh=function(he,Fe,qe,Ce){if(!qi(he))return he;for(var Pt=-1,ar=(Fe=zd(Fe,he)).length,tr=ar-1,mr=he;mr!=null&&++Pt<ar;){var br=Ll(Fe[Pt]),Nr=qe;if(br==="__proto__"||br==="constructor"||br==="prototype")return he;if(Pt!=tr){var Fr=mr[br];(Nr=Ce?Ce(Fr,br,mr):void 0)===void 0&&(Nr=qi(Fr)?Fr:mf(Fe[Pt+1])?[]:{})}bf(mr,br,Nr),mr=mr[br]}return he},Zy=function(he,Fe,qe){for(var Ce=-1,Pt=Fe.length,ar={};++Ce<Pt;){var tr=Fe[Ce],mr=Sh(he,tr);qe(mr,tr)&&Qh(ar,zd(tr,he),mr)}return ar},WT=function(he,Fe){return he!=null&&Fe in Object(he)},GT=function(he,Fe,qe){for(var Ce=-1,Pt=(Fe=zd(Fe,he)).length,ar=!1;++Ce<Pt;){var tr=Ll(Fe[Ce]);if(!(ar=he!=null&&qe(he,tr)))break;he=he[tr]}return ar||++Ce!=Pt?ar:!!(Pt=he==null?0:he.length)&&ch(Pt)&&mf(tr,Pt)&&(Gi(he)||Qd(he))},tp=function(he,Fe){return he!=null&&GT(he,Fe,WT)},Jh=function(he,Fe){return Zy(he,Fe,function(qe,Ce){return tp(he,Ce)})},Cu=function(he,Fe){for(var qe=-1,Ce=Fe.length,Pt=he.length;++qe<Ce;)he[Pt+qe]=Fe[qe];return he},Bc=Ci?Ci.isConcatSpreadable:void 0,KT=function(he){return Gi(he)||Qd(he)||!!(Bc&&he&&he[Bc])},nl=function xe(he,Fe,qe,Ce,Pt){var ar=-1,tr=he.length;for(qe||(qe=KT),Pt||(Pt=[]);++ar<tr;){var mr=he[ar];Fe>0&&qe(mr)?Fe>1?xe(mr,Fe-1,qe,Ce,Pt):Cu(Pt,mr):Ce||(Pt[Pt.length]=mr)}return Pt},QT=function(he){return he!=null&&he.length?nl(he,1):[]},rp=function(he){return ty(zp(he,void 0,QT),he+"")}(function(xe,he){return xe==null?{}:Jh(xe,he)}),eb=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"user",qe)||this).myInfo=yu({}),ps({cmdMap:Wy,cmdConfig:DT}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.setBlack=function(Ce){return Jn({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},Ce),this.core.sendCmd("setBlack",Ce).then(function(){})},Fe.setMute=function(Ce){return Jn({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},Ce),this.core.sendCmd("setMute",Ce).then(function(){})},Fe.getRelations=function(){return this.core.sendCmd("syncRelations",{timetag:0})},Fe.getBlackList=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return tr.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return Pt=tr.sent,tr.abrupt("return",Pt.blackList||[]);case 4:case"end":return tr.stop()}},Ce,this)}))},Fe.getMuteList=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return tr.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return Pt=tr.sent,tr.abrupt("return",Pt.muteList||[]);case 4:case"end":return tr.stop()}},Ce,this)}))},Fe.updatePushToken=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){return wr.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return ar.stop()}},Ce,this)}))},Fe.updateAppBackground=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){return wr.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return ar.stop()}},Ce,this)}))},Fe.getUsersNameCardFromServer=function(Ce){var Pt=this;return Jn({accounts:{type:"array",max:150,itemType:"string"}},Ce),this.core.sendCmd("getUsersNameCardFromServer",rp(Ce,["accounts"])).then(function(ar){var tr,mr=ar.content;return Pt.logger.log("user:: getUsers done",Ce.accounts),mr&&mr.users?Fo(tr=mr.users).call(tr,function(br){return yu(br)}):[]})},Fe.updateMyNameCard=function(Ce){var Pt=this;if(Jn({nick:{type:"string",required:!1},avatar:{type:"string",required:!1},signature:{type:"string",required:!1},gender:{type:"enum",values:Wi(Yd),required:!1},email:{type:"string",required:!1},birth:{type:"string",required:!1},tel:{type:"string",required:!1},ext:{type:"string",required:!1}},Ce),la(Ce).length===0)return _o.resolve(this.myInfo);var ar=rp(Ce,["nick","avatar","signature","email","birth","tel","ext"]);return Ce.gender&&(ar.gender=Yd[Ce.gender]),this.core.sendCmd("updateMyNameCard",{user:ar}).then(function(tr){var mr=tr.content;return mr&&mr.timetag&&Pt.core.eventBus.emit("sync/updateTimetag",{myInfo:+mr.timetag}),Ce.gender&&(ar.gender=Ce.gender),Pt.myInfo=Hr({},Pt.myInfo,ar),Pt.myInfo})},Fe.onUpdateBlackListHandler=function(Ce){var Pt=Ce.content;Pt.account?this.core.emit("updateBlackList",Pt):this.logger.warn("onUpdateBlackListHandler: no account")},Fe.onUpdateMuteListHandler=function(Ce){var Pt=Ce.content;Pt.account?this.core.emit("updateMuteList",Pt):this.logger.warn("onUpdateBlackListHandler: no account")},Fe.syncRelationsHandler=function(Ce){var Pt=Ce.content,ar=Pt.list,tr=Pt.timetag,mr={blackList:[],muteList:[]};return tr&&this.core.eventBus.emit("sync/updateTimetag",{relations:tr}),ar&&ar.length&&Qn(ar).call(ar,function(br){var Nr=function(jr){var Vr={account:jr.account,updateTime:+jr.updateTime,createTime:+jr.createTime};return jr.isMuted==="1"&&(Vr.isMuted=!0),jr.isBlack==="1"&&(Vr.isBlack=!0),Vr}(br);Nr.isBlack&&mr.blackList.push(Nr),Nr.isMuted&&mr.muteList.push(Nr)}),this.core.emit("relations",mr),_o.resolve(mr)},Fe.syncMyNameCardHandler=function(Ce){Ce.content.user&&(this.myInfo=yu(Ce.content.user),this.core.emit("syncMyNameCard",this.myInfo),this.core.eventBus.emit("sync/updateTimetag",{myInfo:Ce.content.timetag}))},Fe.onUpdateMyNameCardHandler=function(Ce){var Pt=Ce.content.user;Pt?(Hr(this.myInfo,yu(Pt)),this.core.emit("updateMyNameCard",this.myInfo)):this.logger.warn("onUpdateMyNameCardHandler no user info")},he}(Ps),Sf=function(){this.__data__=new jp,this.size=0},Pa=function(he){var Fe=this.__data__,qe=Fe.delete(he);return this.size=Fe.size,qe},_i=function(he){return this.__data__.get(he)},Vl=function(he){return this.__data__.has(he)},JT=function(he,Fe){var qe=this.__data__;if(qe instanceof jp){var Ce=qe.__data__;if(!jd||Ce.length<199)return Ce.push([he,Fe]),this.size=++qe.size,this;qe=this.__data__=new qp(Ce)}return qe.set(he,Fe),this.size=qe.size,this};function Hl(xe){var he=this.__data__=new jp(xe);this.size=he.size}Hl.prototype.clear=Sf,Hl.prototype.delete=Pa,Hl.prototype.get=_i,Hl.prototype.has=Vl,Hl.prototype.set=JT;var np=Hl,YT=function(he,Fe){for(var qe=-1,Ce=he==null?0:he.length;++qe<Ce;)if(Fe(he[qe],qe,he))return!0;return!1},tb=function(he,Fe,qe,Ce,Pt,ar){var tr=1&qe,mr=he.length,br=Fe.length;if(mr!=br&&!(tr&&br>mr))return!1;var Nr=ar.get(he),Fr=ar.get(Fe);if(Nr&&Fr)return Nr==Fe&&Fr==he;var jr=-1,Vr=!0,Kr=2&qe?new nh:void 0;for(ar.set(he,Fe),ar.set(Fe,he);++jr<mr;){var Sn=he[jr],Cn=Fe[jr];if(Ce)var En=tr?Ce(Cn,Sn,jr,Fe,he,ar):Ce(Sn,Cn,jr,he,Fe,ar);if(En!==void 0){if(En)continue;Vr=!1;break}if(Kr){if(!YT(Fe,function(In,An){if(!Hp(Kr,An)&&(Sn===In||Pt(Sn,In,qe,Ce,ar)))return Kr.push(An)})){Vr=!1;break}}else if(Sn!==Cn&&!Pt(Sn,Cn,qe,Ce,ar)){Vr=!1;break}}return ar.delete(he),ar.delete(Fe),Vr},Tf=ni.Uint8Array,XT=function(he){var Fe=-1,qe=Array(he.size);return he.forEach(function(Ce,Pt){qe[++Fe]=[Pt,Ce]}),qe},rb=Ci?Ci.prototype:void 0,op=rb?rb.valueOf:void 0,ap=function(he,Fe,qe,Ce,Pt,ar,tr){switch(qe){case"[object DataView]":if(he.byteLength!=Fe.byteLength||he.byteOffset!=Fe.byteOffset)return!1;he=he.buffer,Fe=Fe.buffer;case"[object ArrayBuffer]":return!(he.byteLength!=Fe.byteLength||!ar(new Tf(he),new Tf(Fe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Pc(+he,+Fe);case"[object Error]":return he.name==Fe.name&&he.message==Fe.message;case"[object RegExp]":case"[object String]":return he==Fe+"";case"[object Map]":var mr=XT;case"[object Set]":var br=1&Ce;if(mr||(mr=On),he.size!=Fe.size&&!br)return!1;var Nr=tr.get(he);if(Nr)return Nr==Fe;Ce|=2,tr.set(he,Fe);var Fr=tb(mr(he),mr(Fe),Ce,Pt,ar,tr);return tr.delete(he),Fr;case"[object Symbol]":if(op)return op.call(he)==op.call(Fe)}return!1},sp=function(he,Fe,qe){var Ce=Fe(he);return Gi(he)?Ce:Cu(Ce,qe(he))},Yh=function(he,Fe){for(var qe=-1,Ce=he==null?0:he.length,Pt=0,ar=[];++qe<Ce;){var tr=he[qe];Fe(tr,qe,he)&&(ar[Pt++]=tr)}return ar},ip=function(){return[]},cp=Object.prototype.propertyIsEnumerable,Xh=Object.getOwnPropertySymbols,ZT=Xh?function(xe){return xe==null?[]:(xe=Object(xe),Yh(Xh(xe),function(he){return cp.call(xe,he)}))}:ip,lp=ZT,Cf=function(he){return sp(he,Jd,lp)},eC=Object.prototype.hasOwnProperty,nb=function(he,Fe,qe,Ce,Pt,ar){var tr=1&qe,mr=Cf(he),br=mr.length;if(br!=Cf(Fe).length&&!tr)return!1;for(var Nr=br;Nr--;){var Fr=mr[Nr];if(!(tr?Fr in Fe:eC.call(Fe,Fr)))return!1}var jr=ar.get(he),Vr=ar.get(Fe);if(jr&&Vr)return jr==Fe&&Vr==he;var Kr=!0;ar.set(he,Fe),ar.set(Fe,he);for(var Sn=tr;++Nr<br;){var Cn=he[Fr=mr[Nr]],En=Fe[Fr];if(Ce)var In=tr?Ce(En,Cn,Fr,Fe,he,ar):Ce(Cn,En,Fr,he,Fe,ar);if(!(In===void 0?Cn===En||Pt(Cn,En,qe,Ce,ar):In)){Kr=!1;break}Sn||(Sn=Fr=="constructor")}if(Kr&&!Sn){var An=he.constructor,zn=Fe.constructor;An==zn||!("constructor"in he)||!("constructor"in Fe)||typeof An=="function"&&An instanceof An&&typeof zn=="function"&&zn instanceof zn||(Kr=!1)}return ar.delete(he),ar.delete(Fe),Kr},Zh=Bl(ni,"DataView"),Mf=Bl(ni,"Promise"),ev=Bl(ni,"WeakMap"),tv="[object Map]",Mu="[object Promise]",up="[object Set]",zl="[object WeakMap]",Wl="[object DataView]",tC=Jc(Zh),ob=Jc(jd),rC=Jc(Mf),nC=Jc(pu),ol=Jc(ev),Qi=zc;(Zh&&Qi(new Zh(new ArrayBuffer(1)))!=Wl||jd&&Qi(new jd)!=tv||Mf&&Qi(Mf.resolve())!=Mu||pu&&Qi(new pu)!=up||ev&&Qi(new ev)!=zl)&&(Qi=function(xe){var he=zc(xe),Fe=he=="[object Object]"?xe.constructor:void 0,qe=Fe?Jc(Fe):"";if(qe)switch(qe){case tC:return Wl;case ob:return tv;case rC:return Mu;case nC:return up;case ol:return zl}return he});var Ls=Qi,yi="[object Arguments]",kf="[object Array]",ku="[object Object]",ab=Object.prototype.hasOwnProperty,Gl=function(he,Fe,qe,Ce,Pt,ar){var tr=Gi(he),mr=Gi(Fe),br=tr?kf:Ls(he),Nr=mr?kf:Ls(Fe),Fr=(br=br==yi?ku:br)==ku,jr=(Nr=Nr==yi?ku:Nr)==ku,Vr=br==Nr;if(Vr&&ff(he)){if(!ff(Fe))return!1;tr=!0,Fr=!1}if(Vr&&!Fr)return ar||(ar=new np),tr||Lh(he)?tb(he,Fe,qe,Ce,Pt,ar):ap(he,Fe,br,qe,Ce,Pt,ar);if(!(1&qe)){var Kr=Fr&&ab.call(he,"__wrapped__"),Sn=jr&&ab.call(Fe,"__wrapped__");if(Kr||Sn){var Cn=Kr?he.value():he,En=Sn?Fe.value():Fe;return ar||(ar=new np),Pt(Cn,En,qe,Ce,ar)}}return!!Vr&&(ar||(ar=new np),nb(he,Fe,qe,Ce,Pt,ar))},sb=function xe(he,Fe,qe,Ce,Pt){return he===Fe||(he==null||Fe==null||!zi(he)&&!zi(Fe)?he!=he&&Fe!=Fe:Gl(he,Fe,qe,Ce,xe,Pt))},oC=function(he,Fe,qe,Ce){var Pt=qe.length,ar=Pt,tr=!Ce;if(he==null)return!ar;for(he=Object(he);Pt--;){var mr=qe[Pt];if(tr&&mr[2]?mr[1]!==he[mr[0]]:!(mr[0]in he))return!1}for(;++Pt<ar;){var br=(mr=qe[Pt])[0],Nr=he[br],Fr=mr[1];if(tr&&mr[2]){if(Nr===void 0&&!(br in he))return!1}else{var jr=new np;if(Ce)var Vr=Ce(Nr,Fr,br,he,Fe,jr);if(!(Vr===void 0?sb(Fr,Nr,3,Ce,jr):Vr))return!1}}return!0},ib=function(he){return he==he&&!qi(he)},wf=function(he){for(var Fe=Jd(he),qe=Fe.length;qe--;){var Ce=Fe[qe],Pt=he[Ce];Fe[qe]=[Ce,Pt,ib(Pt)]}return Fe},dp=function(he,Fe){return function(qe){return qe!=null&&qe[he]===Fe&&(Fe!==void 0||he in Object(qe))}},Ji=function(he){var Fe=wf(he);return Fe.length==1&&Fe[0][2]?dp(Fe[0][0],Fe[0][1]):function(qe){return qe===he||oC(qe,he,Fe)}},pp=function(he,Fe){return vh(he)&&ib(Fe)?dp(Ll(he),Fe):function(qe){var Ce=oi(qe,he);return Ce===void 0&&Ce===Fe?tp(qe,he):sb(Fe,Ce,3)}},al=function(he){return function(Fe){return Fe==null?void 0:Fe[he]}},ba=function(he){return function(Fe){return Sh(Fe,he)}},Fc=function(he){return vh(he)?al(Ll(he)):ba(he)},wu=function(he){return typeof he=="function"?he:he==null?du:typeof he=="object"?Gi(he)?pp(he[0],he[1]):Ji(he):Fc(he)},rv=/\s/,aC=function(he){for(var Fe=he.length;Fe--&&rv.test(he.charAt(Fe)););return Fe},sC=/^\s+/,iC=function(he){return he&&he.slice(0,aC(he)+1).replace(sC,"")},cC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,uC=/^0o[0-7]+$/i,dC=parseInt,pC=function(he){if(typeof he=="number")return he;if(af(he))return NaN;if(qi(he)){var Fe=typeof he.valueOf=="function"?he.valueOf():he;he=qi(Fe)?Fe+"":Fe}if(typeof he!="string")return he===0?he:+he;he=iC(he);var qe=lC.test(he);return qe||uC.test(he)?dC(he.slice(2),qe?2:8):cC.test(he)?NaN:+he},nv=1/0,fC=function(he){return he?(he=pC(he))===nv||he===-1/0?17976931348623157e292*(he<0?-1:1):he==he?he:0:he===0?he:0},cb=function(he){var Fe=fC(he),qe=Fe%1;return Fe==Fe?qe?Fe-qe:Fe:0},mC=Math.max,ov=function(he,Fe,qe){var Ce=he==null?0:he.length;if(!Ce)return-1;var Pt=qe==null?0:cb(qe);return Pt<0&&(Pt=mC(Ce+Pt,0)),Qv(he,wu(Fe),Pt)},gC={"4_12":"syncMsgReceipts","4_14":"syncSessionAck","4_20":"syncSuperTeamSessionAck","4_22":"nimSyncSessionsWithMoreRoaming","4_25":"syncSessionReliableInfo","7_12":"multiSyncMsgReceipt","7_16":"markSessionAck","7_25":"markMultSessionsAck","7_116":"syncMarkSessionAck","21_25":"markSuperTeamSessionAck","21_32":"markMultSuperTeamSessionsAck","21_125":"syncMarkSuperTeamSessionAck","4_23":"nimSyncStickTopSessions","23_12":"nimAddStickTopSession","23_13":"nimDeleteStickTopSession","23_14":"nimUpdateStickTopSession","23_112":"nimMultiSyncAddStickTopSession","23_113":"nimMultiSyncDeleteStickTopSession","23_114":"nimMultiSyncUpdateStickTopSession"},xu={msgReceiptTag:{to:1,from:2,time:7,idClient:11},stickTopSessionTag:{id:1,ext:2,createTime:3,updateTime:4},sessionAckTag:{scene:1,to:2,timetag:3},sessionReliableSyncTag:{scene:1,sessionId:2,syncStatus:3,syncEndMsgId:4,syncEndMsgidClient:5,syncEndMsgTime:6,syncStartMsgid:7,syncStartMsgidClient:8,syncStartMsgTime:9,nextMsgid:10,nextMsgidClient:11,nextMsgTime:12,roamMsgSync:13,offlineMsgSync:14,netCallOfflineMsgSync:15}},$c=Is(xu),hC={syncMsgReceipts:{sid:4,cid:12,service:"session",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:$c.msgReceiptTag},{type:"Number",name:"timetag"}]},syncSessionAck:{sid:4,cid:14,service:"session",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},syncSuperTeamSessionAck:{sid:4,cid:20,service:"session",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},multiSyncMsgReceipt:{sid:7,cid:12,service:"session",response:[{type:"Property",name:"msgReceiptTag",reflectMapper:$c.msgReceiptTag}]},markSessionAck:{sid:7,cid:16,service:"session",params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSessionAck:{sid:7,cid:116,service:"session",response:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSuperTeamSessionAck:{sid:21,cid:125,service:"session",response:[{type:"String",name:"to"},{type:"long",name:"timetag"}]},markMultSessionsAck:{sid:7,cid:25,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:xu.sessionAckTag}]},markSuperTeamSessionAck:{sid:21,cid:25,service:"session",params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},nimAddStickTopSession:{sid:23,cid:12,service:"session",params:[{type:"Property",name:"tag",reflectMapper:xu.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:$c.stickTopSessionTag}]},nimDeleteStickTopSession:{sid:23,cid:13,service:"session",params:[{type:"Property",name:"tag",reflectMapper:xu.stickTopSessionTag}],response:[{type:"Number",name:"timetag"}]},nimUpdateStickTopSession:{sid:23,cid:14,service:"session",params:[{type:"Property",name:"tag",reflectMapper:xu.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:$c.stickTopSessionTag}]},nimMultiSyncAddStickTopSession:{sid:23,cid:112,service:"session",response:[{type:"Property",name:"data",reflectMapper:$c.stickTopSessionTag}]},nimMultiSyncDeleteStickTopSession:{sid:23,cid:113,service:"session",response:[{type:"Number",name:"timetag"},{type:"Property",name:"data",reflectMapper:$c.stickTopSessionTag}]},nimMultiSyncUpdateStickTopSession:{sid:23,cid:114,service:"session",response:[{type:"Property",name:"data",reflectMapper:$c.stickTopSessionTag}]},nimSyncStickTopSessions:{sid:4,cid:23,service:"session",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"isThereAnyChange"},{type:"PropertyArray",name:"datas",reflectMapper:$c.stickTopSessionTag}]},markMultSuperTeamSessionsAck:{sid:21,cid:32,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:xu.sessionAckTag}]},nimSyncSessionsWithMoreRoaming:{sid:21,cid:22,service:"session",response:[{type:"PropertyArray",name:"datas",reflectMapper:{0:"scene",1:"to",2:"from",7:"time",12:"idServer"}}]},syncSessionReliableInfo:{sid:4,cid:25,service:"session",response:[{type:"Property",name:"context",reflectMapper:{1:"timetag",2:"type"}},{type:"PropertyArray",name:"datas",reflectMapper:$c.sessionReliableSyncTag}]}},vC={id:{type:"string"},ext:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function xf(xe,he,Fe){Fe===void 0&&(Fe=!0);var qe=xi(vC,xe);return qe.isStickOnTop=Fe,qe.id=he.id,Hr(Hr({},he),{stickTopInfo:he.stickTopInfo?Hr({},he.stickTopInfo,qe):qe})}var yC={scene:{type:"enum",values:us},time:{type:"number"}},fp=function(){function xe(Fe){this.core=Fe}var he=xe.prototype;return he.getSession=function(qe){return this.core.session.getSessionWithUncomplete({id:qe})||this.core.session.createSession(qe)},he.addStickTopSession=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},qe),Pt=na(qe.id),ar=Pt.scene,tr=Pt.accid,jr.next=4,this.core.sendCmd("nimAddStickTopSession",{tag:{id:(ar==="superTeam"?"super_team":ar)+"|"+tr,ext:qe.ext}});case 4:return mr=jr.sent,br=this.getSession(qe.id),Nr=xf(mr.content.data,br),jr.abrupt("return",Nr);case 8:case"end":return jr.stop()}},Ce,this)}))},he.deleteStickTopSession=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({id:{type:"string",allowEmpty:!1}},qe),Pt=na(qe.id),ar=Pt.scene,tr=Pt.accid,jr.next=4,this.core.sendCmd("nimDeleteStickTopSession",{tag:{id:(ar==="superTeam"?"super_team":ar)+"|"+tr}});case 4:return mr=jr.sent,br=this.getSession(qe.id),Nr=xf({updateTime:mr.content.timetag},br,!1),jr.abrupt("return",Nr);case 8:case"end":return jr.stop()}},Ce,this)}))},he.updateStickTopSession=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},qe),Pt=na(qe.id),ar=Pt.scene,tr=Pt.accid,jr.next=4,this.core.sendCmd("nimUpdateStickTopSession",{tag:{id:(ar==="superTeam"?"super_team":ar)+"|"+tr,ext:qe.ext}});case 4:return mr=jr.sent,br=this.getSession(qe.id),Nr=xf(mr.content.data,br),jr.abrupt("return",Nr);case 8:case"end":return jr.stop()}},Ce,this)}))},he.stickTopSessionHandler=function(qe,Ce){Ce===void 0&&(Ce=!0);var Pt=na(qe.id,"|"),ar=Pt.scene+"-"+Pt.accid;return xf(qe,this.getSession(ar),Ce)},xe}(),_u=function(){function xe(Fe){this.core=Fe,this.logger=Fe.logger}var he=xe.prototype;return he.canSessionResetUnreadCount=function(qe){var Ce=qe.id;if(qe.lastMsg===void 0)throw new Error("Session::canSessionResetUnreadCount: session "+Ce+" is not completly, lastMsg undefined");return qe.lastMsg!==null||qe.unread>0?!(qe.ack&&qe.lastMsg&&qe.ack>=qe.lastMsg.time)||(this.logger.log("Session::canSessionResetUnreadCount: session "+Ce+" reset failed, ack time is greater than last message time"),!1):(this.logger.log("Session::canSessionResetUnreadCount: session "+Ce+" doesn't need to be updated, lastMsg null and unread 0"),!1)},he.filterSessionForResetUnreadCount=function(qe){var Ce=this,Pt={cmd:"markMultSuperTeamSessionsAck",params:[]},ar={cmd:"markMultSessionsAck",params:[]};return Qn(qe).call(qe,function(tr){var mr;try{if(!Ce.canSessionResetUnreadCount(tr))return;var br=na(tr.id),Nr=br.accid,Fr=br.scene,jr={to:Nr,sessionId:tr.id,timetag:((mr=tr==null?void 0:tr.lastMsg)===null||mr===void 0?void 0:mr.time)||tr.updateTime||0},Vr=function(Sn){return Kd({scene:{type:"enum",values:us}},Sn)}({scene:Fr});Fr==="superTeam"?Pt.params.push(jr):ar.params.push(Hr(Hr({},jr),Vr))}catch(Kr){Ce.logger.warn(Kr)}}),{superTeam:Pt,p2pOrTeam:ar}},xe}(),av=function(he,Fe,qe){var Ce=-1,Pt=he.length;Fe<0&&(Fe=-Fe>Pt?0:Pt+Fe),(qe=qe>Pt?Pt:qe)<0&&(qe+=Pt),Pt=Fe>qe?0:qe-Fe>>>0,Fe>>>=0;for(var ar=Array(Pt);++Ce<Pt;)ar[Ce]=he[Ce+Fe];return ar},bC=function(he,Fe,qe){if(!qi(qe))return!1;var Ce=typeof Fe;return!!(Ce=="number"?Gp(qe)&&mf(Fe,qe.length):Ce=="string"&&Fe in qe)&&Pc(qe[Fe],he)},SC=Math.ceil,TC=Math.max,lb=function(he,Fe,qe){Fe=(qe?bC(he,Fe,qe):Fe===void 0)?1:TC(cb(Fe),0);var Ce=he==null?0:he.length;if(!Ce||Fe<1)return[];for(var Pt=0,ar=0,tr=Array(SC(Ce/Fe));Pt<Ce;)tr[ar++]=av(he,Pt,Pt+=Fe);return tr};function gs(xe,he){var Fe,qe=ja!==void 0&&Vd(xe)||xe["@@iterator"];if(qe)return Xo(Fe=(qe=qe.call(xe)).next).call(Fe,qe);if(Hi(xe)||(qe=function(ar,tr){var mr;if(ar){if(typeof ar=="string")return Aa(ar,tr);var br=Lo(mr=Object.prototype.toString.call(ar)).call(mr,8,-1);if(br==="Object"&&ar.constructor&&(br=ar.constructor.name),br==="Map"||br==="Set")return of(ar);if(br==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(br))return Aa(ar,tr)}}(xe))||he&&xe&&typeof xe.length=="number"){qe&&(xe=qe);var Ce=0;return function(){return Ce>=xe.length?{done:!0}:{done:!1,value:xe[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aa(xe,he){(he==null||he>xe.length)&&(he=xe.length);for(var Fe=0,qe=new Array(he);Fe<he;Fe++)qe[Fe]=xe[Fe];return qe}var CC=function(xe){function he(qe,Ce){var Pt;return(Pt=xe.call(this,"session",qe)||this).list=new _c,Pt.unreadCountFilterFn=function(ar){return!0},Pt.lastMessageFilterFn=function(ar){return!0},Pt.initEventListeners(),ps({cmdMap:gC,cmdConfig:hC}),typeof(Ce==null?void 0:Ce.unreadCountFilterFn)=="function"&&(Pt.unreadCountFilterFn=Ce.unreadCountFilterFn),typeof(Ce==null?void 0:Ce.lastMessageFilterFn)=="function"&&(Pt.lastMessageFilterFn=Ce.lastMessageFilterFn),Pt.stickTopService=new fp(qe),Pt.unreadModule=new _u(qe),Pt}ea(he,xe);var Fe=he.prototype;return Fe.initEventListeners=function(){var Ce,Pt,ar,tr=this;this.core.eventBus.on("session/syncMsgs",Xo(Ce=this.onSyncMsgs).call(Ce,this)),this.core.eventBus.on("session/updateForNewMsg",Xo(Pt=this.updateSessionWithMsg).call(Pt,this)),this.core.eventBus.on("session/updateForClearMsg",function(mr,br){br===void 0&&(br=!0),mr&&mr.length>0&&Qn(mr).call(mr,function(Nr){tr.updateSession({id:Nr.sessionId,lastMsg:null,unread:0,unreadMsgs:[]},br)})}),this.core.eventBus.on("session/updateForDeletedMsg",Xo(ar=this.updateSessionForDeletedMsg).call(ar,this))},Fe.createSession=function(Ce,Pt){try{var ar=na(Ce);return{id:Ce,scene:ar.scene,to:ar.accid,lastMsg:Pt,updateTime:Pt?Pt.time:0,unread:0,unreadMsgs:[],ack:0}}catch(tr){throw this.logger.error("Failed to create session with "+Ce,tr),new Error("Failed to create session with "+Ce)}},Fe.getSession=function(Ce){Jn({id:{type:"string",allowEmpty:!1}},Ce);var Pt=this.list.get(Ce.id);if(this.isSessionComplete(Pt))return Pt},Fe.getSessionWithUncomplete=function(Ce){return this.list.get(Ce.id)},Fe.getAllSessions=function(){for(var Ce,Pt=[],ar=gs(this.list);!(Ce=ar()).done;){var tr=Ce.value;tr[0];var mr=tr[1];this.isSessionComplete(mr)&&Pt.push(mr)}return Pt},Fe.getSessions=function(Ce){Jn({limit:{type:"number",required:!1},lastSessionId:{type:"string",allowEmpty:!1,required:!1},desc:{type:"boolean",required:!1}},Ce);var Pt=[],ar=Ce.limit,tr=ar===void 0?100:ar,mr=Ce.desc,br=mr===void 0||mr,Nr=Ce.lastSessionId,Fr=0;if(br){for(var jr,Vr,Kr=gs(this.list);!(Vr=Kr()).done;){var Sn=Vr.value,Cn=Sn[0],En=Sn[1];if(Nr===Cn)break;this.isSessionComplete(En)&&Pt.push(En)}return Yl(jr=Lo(Pt).call(Pt,-tr)).call(jr)}for(var In,An=gs(this.list);!(In=An()).done;){var zn=In.value,yo=zn[0],fo=zn[1];if(Nr)yo===Nr&&(Nr=void 0);else if(this.isSessionComplete(fo)){if(++Fr>tr)break;Pt.push(fo)}}return Pt},Fe.resetSessionUnreadCount=function(Ce){var Pt,ar;return Vn(this,void 0,void 0,wr.mark(function tr(){var mr,br,Nr,Fr,jr,Vr,Kr,Sn,Cn=this;return wr.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call resetSessionUnreadCount after syncdone event"),Jn({id:{type:"string",allowEmpty:!1}},Ce),Jn({id:{type:"string",allowEmpty:!1}},Ce),mr=Ce.id,br=this.list.get(mr)){In.next=8;break}throw this.logger.warn("resetSessionUnreadCount: can not find session "+mr),new Error("Session::canSessionResetUnreadCount: can not find session "+mr);case 8:Nr=!1;try{Nr=this.unreadModule.canSessionResetUnreadCount(br)}catch(An){this.logger.warn(An)}if(Nr!==!1){In.next=12;break}return In.abrupt("return");case 12:return Fr=na(mr),jr=Fr.accid,Vr=Fr.scene,Kr={to:jr,timetag:((ar=br==null?void 0:br.lastMsg)===null||ar===void 0?void 0:ar.time)||br.updateTime||0},Sn="markSuperTeamSessionAck",Vr!=="superTeam"&&(Kr.scene=Vr==="p2p"?0:1,Sn="markSessionAck"),In.abrupt("return",this.core.sendCmd(Sn,Kr).then(function(){var An=Cn.storeUnreadByAck(mr,Kr.timetag);An&&Cn.core.emit("updateSession",An)}));case 17:case"end":return In.stop()}},tr,this)}))},Fe.resetMultiSessionUnreadCount=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr,Fr,jr,Vr,Kr,Sn,Cn,En,In,An,zn,yo=this;return wr.wrap(function(Vo){for(;;)switch(Vo.prev=Vo.next){case 0:!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call resetMultiSessionUnreadCount after syncdone event"),Jn({ids:{type:"array",itemType:"string",min:1}},Ce),br=Bs(tr=Fo(mr=Ce.ids).call(mr,function(ao){return yo.list.get(ao)})).call(tr,function(ao,zr){return!!ao||(yo.logger.warn("Session::canSessionResetUnreadCount: can not find session "+Ce.ids[zr]),!1)}),Nr=this.unreadModule.filterSessionForResetUnreadCount(br),Fr=Nr.superTeam,jr=Nr.p2pOrTeam,Vr=lb(Fr.params,10),Kr=lb(jr.params,10),Sn=gs(Vr);case 7:if((Cn=Sn()).done){Vo.next=14;break}return En=Cn.value,Vo.next=11,this.core.sendCmd(Fr.cmd,{datas:En});case 11:Qn(En).call(En,function(ao){var zr=yo.storeUnreadByAck(ao.sessionId,ao.timetag);zr&&yo.core.emit("updateSession",zr)});case 12:Vo.next=7;break;case 14:In=gs(Kr);case 15:if((An=In()).done){Vo.next=22;break}return zn=An.value,Vo.next=19,this.core.sendCmd(jr.cmd,{datas:zn});case 19:Qn(zn).call(zn,function(ao){var zr=yo.storeUnreadByAck(ao.sessionId,ao.timetag);zr&&yo.core.emit("updateSession",zr)});case 20:Vo.next=15;break;case 22:case"end":return Vo.stop()}},ar,this)}))},Fe.resetAllSessionsUnreadCount=function(){var Ce,Pt;!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call resetAllSessionsUnreadCount after syncdone event");var ar=[];return Qn(Ce=this.list).call(Ce,function(tr){ar.push(tr.id)}),this.resetMultiSessionUnreadCount({ids:ar})},Fe.deleteSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(Jn({id:{type:"string",allowEmpty:!1},isSyncToServer:{type:"boolean",required:!1}},Ce),this.list.delete(Ce.id),!this.core.msgLog||!Ce.isSyncToServer){tr.next=5;break}return tr.next=5,this.core.msgLog.deleteRoamingMsgs({ids:[Ce.id]});case 5:case"end":return tr.stop()}},Pt,this)}))},Fe.deleteAllSessionsFromLocal=function(){this.list.clear()},Fe.addStickTopSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.next=2,this.stickTopService.addStickTopSession(Ce);case 2:return ar=mr.sent,this.list.set(ar.id,ar),mr.abrupt("return",ar);case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.deleteStickTopSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.next=2,this.stickTopService.deleteStickTopSession(Ce);case 2:return ar=mr.sent,this.list.set(ar.id,ar),mr.abrupt("return",ar);case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.updateStickTopSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.next=2,this.stickTopService.updateStickTopSession(Ce);case 2:return ar=mr.sent,this.list.set(ar.id,ar),mr.abrupt("return",ar);case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.nimMultiSyncAddStickTopSessionHandler=function(Ce){var Pt=this.stickTopService.stickTopSessionHandler(Ce.content.data);this.list.set(Pt.id,Pt),this.core.emit("updateSession",Pt)},Fe.nimMultiSyncDeleteStickTopSessionHandler=function(Ce){var Pt=this.stickTopService.stickTopSessionHandler({id:Ce.content.data.id,updateTime:Ce.content.timetag},!1);this.list.set(Pt.id,Pt),this.core.emit("updateSession",Pt)},Fe.nimMultiSyncUpdateStickTopSessionHandler=function(Ce){var Pt=this.stickTopService.stickTopSessionHandler(Ce.content.data);this.list.set(Pt.id,Pt),this.core.emit("updateSession",Pt)},Fe.nimSyncStickTopSessionsHandler=function(Ce){var Pt=this,ar=Ce.content.datas;Qn(ar).call(ar,function(tr){var mr=Pt.stickTopService.stickTopSessionHandler(tr);Pt.list.set(mr.id,mr)})},Fe.updateSessionWithMsg=function(Ce){var Pt=!0,ar=!0;try{Pt=!!this.unreadCountFilterFn(Ce)}catch(Nr){this.logger.error("session:updateSessionWithMsg, unreadCountFilterFn error",Nr)}try{ar=!!this.lastMessageFilterFn(Ce)}catch(Nr){this.logger.error("session:updateSessionWithMsg, lastMessageFilterFn error",Nr)}var tr=this.list.get(Ce.sessionId)||this.createSession(Ce.sessionId),mr=!1;if(this.logger.log("session:updateSessionWithMsg, pending ",Ce.sessionId,Ce.idClient,Ce.idServer,ar,Pt),ar&&(!tr.lastMsg||tr.lastMsg.time<Ce.time||Ce.status===Da[Da.sending]||tr.lastMsg.status===Da[Da.sending])&&(tr.lastMsg=Ce,tr.updateTime=Ce.time,mr=!0),Pt&&Ce.status===Da[Da.unread]&&Ce.time>(tr.ack||0)){tr.unread++;var br=tr.unreadMsgs||[];br.unshift(Ce),Zc(br).call(br,function(Nr,Fr){return Fr.time-Nr.time}),mr=!0}mr&&(this.logger.log("session:updateSessionWithMsg updating ",tr.id,tr.unread,tr.lastMsg&&tr.lastMsg.idClient),this.list.set(tr.id,tr),this.core.emit("updateSession",tr))},Fe.storeUnreadByAck=function(Ce,Pt){var ar=this.list.get(Ce)||this.createSession(Ce);if(!(ar.ack&&Pt<ar.ack)){var tr=ar.unreadMsgs||[],mr=[],br=0;return ar.unreadMsgs=[],tr.length>0&&(Qn(tr).call(tr,function(Nr){Nr.time>Pt&&(br++,mr.push(Nr))}),ar.unreadMsgs=Zc(mr).call(mr,function(Nr,Fr){return Fr.time-Nr.time})),ar.ack=Pt,ar.unread=br,ar.lastMsg&&ar.lastMsg.status==="unread"&&Pt>=ar.lastMsg.time&&(ar.lastMsg.status="read"),this.list.set(Ce,ar),ar}this.logger.warn("storeUnreadByAck: not need update ack",Ce,Pt,ar.ack)},Fe.updateSession=function(Ce,Pt){Pt===void 0&&(Pt=!0);var ar=Ce.id,tr=this.list.get(ar)||this.createSession(Ce.id),mr=Hr(tr,Ce);return this.list.set(ar,mr),this.logger.log("updateSession: update",Pt,rp(Ce,["id","ack","unread"]),mr.lastMsg&&mr.lastMsg.idClient),Pt&&this.core.emit("updateSession",mr),mr},Fe.isSessionComplete=function(Ce){return!!Ce&&!!(Ce.id&&Ce.scene&&Ce.to)&&Ce.lastMsg!==void 0},Fe.syncSessionAckHandler=function(Ce){var Pt,ar,tr=this,mr=Ce.content.p2p||{},br=Ce.content.team.m_map||{};this.logger.log("syncSessionAck::",mr,br),Qn(Pt=la(mr)).call(Pt,function(Nr){tr.updateSession({id:"p2p-"+Nr,ack:mr[Nr]},!1)}),Qn(ar=la(br)).call(ar,function(Nr){tr.updateSession({id:"team-"+Nr,ack:br[Nr]},!1)})},Fe.syncSuperTeamSessionAckHandler=function(Ce){var Pt,ar=this,tr=Ce.content.superTeam.m_map;this.logger.log("syncSuperTeamSessionAck::",tr),Qn(Pt=la(tr)).call(Pt,function(mr){ar.updateSession({id:"superTeam-"+mr,ack:tr[mr]},!1)})},Fe.syncMarkSessionAckHandler=function(Ce){var Pt=Ce.content,ar=(Pt.scene===0?"p2p":Pt.scene===1?"team":"superTeam")+"-"+Pt.to,tr=this.list.get(ar);if(tr&&tr.ack&&Pt.timetag<tr.ack)this.logger.warn("syncMarkSessionAckHandler: "+ar+" do not need update ack",tr.ack,Pt.timetag);else{var mr=this.storeUnreadByAck(ar,Pt.timetag);mr&&this.core.emit("updateSession",mr)}},Fe.syncMarkSuperTeamSessionAckHandler=function(Ce){Ce.content.scene=5,this.syncMarkSessionAckHandler(Ce)},Fe.onSyncDone=function(){var Ce,Pt,ar,tr=this,mr=[];Qn(Ce=this.list).call(Ce,function(br,Nr){mr.push(tr.storeUnreadByAck(Nr,br.ack||0))}),this.list.clear(),Qn(Pt=Zc(mr).call(mr,function(br,Nr){return br.updateTime-Nr.updateTime})).call(Pt,function(br){tr.list.set(br.id,br)}),(mr=Zc(ar=Bs(mr).call(mr,function(br){return tr.isSessionComplete(br)})).call(ar,function(br,Nr){return Nr.updateTime-br.updateTime})).length>0&&this.core.emit("sessions",mr)},Fe.onSyncMsgs=function(Ce){var Pt,ar=this,tr=this.list.get(Ce.sessionId),mr=[];try{var br;mr=Bs(br=Ce.msgs).call(br,function(Kr){return ar.unreadCountFilterFn(JSON.parse(fa(Kr)))})}catch(Kr){this.logger.error("session:onSyncMsgs, unreadCountFilterFn error ",Kr)}var Nr,Fr=[];try{var jr;Fr=Bs(jr=Ce.msgs).call(jr,function(Kr){return ar.lastMessageFilterFn(JSON.parse(fa(Kr)))})}catch(Kr){this.logger.error("session:onSyncMsgs, lastMessageFilterFn error ",Kr)}Fr&&Fr.length>0&&(Nr=Fr[Fr.length-1],Nr=Fr[0].time>Nr.time?Fr[0]:Nr);var Vr=Nr?Nr.time:0;tr||(tr=Nr?this.createSession(Ce.sessionId,Nr):this.createSession(Ce.sessionId)),tr.unreadMsgs=tr.unreadMsgs?Bs(Pt=Ys(mr).call(mr,tr.unreadMsgs)).call(Pt,function(Kr){return Kr.status===Da[Da.unread]}):Bs(mr).call(mr,function(Kr){return Kr.status===Da[Da.unread]}),tr.updateTime&&tr.updateTime>=Vr||(tr.updateTime=Vr),tr.lastMsg&&tr.lastMsg.time>=Vr||(tr.lastMsg=Nr),this.list.set(tr.id,tr)},Fe.updateSessionForDeletedMsg=function(Ce){var Pt,ar=this,tr={};Qn(Ce).call(Ce,function(mr){var br=mr.to===ar.core.account?mr.from:mr.to,Nr=mr.scene+"-"+br,Fr=ar.list.get(Nr);if(Fr){if((Fr.ack||0)<mr.time&&mr.from!==ar.core.account&&Fr.unread>0&&(Fr.unread=Fr.unread-1,Fr.unreadMsgs&&Fr.unreadMsgs.length>0)){var jr,Vr=ov(Fr.unreadMsgs,{idClient:mr.idClient});Vr>=0&&gh(jr=Fr.unreadMsgs).call(jr,Vr,1)}Fr.lastMsg&&Fr.lastMsg.idClient===mr.idClient&&(Fr.lastMsg=null),tr[Fr.id]=!0}}),Qn(Pt=la(tr)).call(Pt,function(mr){var br=ar.list.get(mr);br&&ar.core.emit("updateSession",br)})},Fe.multiSyncMsgReceiptHandler=function(Ce){var Pt,ar=(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.msgReceiptTag;if(ar){this.updateSessionMsgReceiptTime([ar],!0),ar.msgReceiptTime=ar.time,ar.sessionId="p2p-"+ar.from,ar.time,ar.from;var tr=ri(ar,["time","from"]);this.core.emit("msgReceipts",[tr])}},Fe.syncMsgReceiptsHandler=function(Ce){var Pt,ar=(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.msgReceipts;ar&&this.updateSessionMsgReceiptTime(ar,!1)},Fe.updateSessionMsgReceiptTime=function(Ce,Pt){var ar=this;Pt===void 0&&(Pt=!0),Ce&&Ce.length>0&&Qn(Ce).call(Ce,function(tr){var mr=ar.list.get("p2p-"+tr.from);mr||(mr=ar.createSession("p2p-"+tr.from));var br=Uo(tr.time);mr.msgReceiptTime&&mr.msgReceiptTime>=br||(mr.msgReceiptTime=br,mr.lastMsg&&mr.lastMsg.status==="sent"&&br>=mr.lastMsg.time&&(mr.lastMsg.status="receipt"),ar.logger.log("session: update session "+mr.id+" msgReceiptTime: "+mr.msgReceiptTime),ar.list.set(mr.id,mr),Pt&&ar.core.emit("updateSession",mr))})},Fe.nimSyncSessionsWithMoreRoamingHandler=function(Ce){var Pt=function(tr,mr){return Fo(tr).call(tr,function(br){var Nr=xi(yC,br);return Nr.sessionId=Ki(br,mr),Nr})}(Ce.content.datas,this.core.account);this.logger.log("session:syncSessionsWithMoreRoaming",Pt)},he}(Ps),MC=function(){function xe(Fe){this.core=Fe}var he=xe.prototype;return he.notifyAddTeamMembers=function(qe,Ce){this.core.emit("addTeamMembers",{team:qe,accounts:Ce,members:jT(qe,Ce)})},he.notifyUpdateTeamManagers=function(qe,Ce,Pt,ar){this.core.emit("updateTeamManagers",{team:{teamId:qe,memberUpdateTime:ar},accounts:Ce,isManager:Pt,members:Fo(Ce).call(Ce,function(tr){return{id:qe+"-"+tr,account:tr,type:"manager",updateTime:ar}})})},he.notifyRemoveTeamMembers=function(qe,Ce){this.core.emit("removeTeamMembers",{team:qe,accounts:Ce})},he.notifyTransferTeam=function(qe,Ce,Pt){this.core.emit("transferTeam",{team:qe,from:{id:qe.teamId+"-"+Ce,type:"normal",account:Ce,updateTime:qe.memberUpdateTime},to:{id:qe.teamId+"-"+Pt,type:"owner",account:Pt,updateTime:qe.memberUpdateTime}})},he.notifyUpdateTeamMembersMute=function(qe,Ce,Pt){this.core.emit("updateTeamMembersMute",{team:qe,accounts:Ce,members:Fo(Ce).call(Ce,function(ar){return{id:qe.teamId+"-"+ar,account:ar,teamId:qe.teamId,mute:Pt,updateTime:qe.memberUpdateTime}}),mute:Pt})},xe}(),kC=function(he,Fe){for(var qe=-1,Ce=he==null?0:he.length;++qe<Ce&&Fe(he[qe],qe,he)!==!1;);return he},_f=function(he,Fe,qe,Ce){var Pt=!qe;qe||(qe={});for(var ar=-1,tr=Fe.length;++ar<tr;){var mr=Fe[ar],br=Ce?Ce(qe[mr],he[mr],mr,qe,he):void 0;br===void 0&&(br=he[mr]),Pt?Tu(qe,mr,br):bf(qe,mr,br)}return qe},wC=function(he,Fe){return he&&_f(Fe,Jd(Fe),he)},Lc=function(he){var Fe=[];if(he!=null)for(var qe in Object(he))Fe.push(qe);return Fe},ai=Object.prototype.hasOwnProperty,If=function(he){if(!qi(he))return Lc(he);var Fe=Dl(he),qe=[];for(var Ce in he)(Ce!="constructor"||!Fe&&ai.call(he,Ce))&&qe.push(Ce);return qe},sv=function(he){return Gp(he)?Oy(he,!0):If(he)},js=function(he,Fe){return he&&_f(Fe,sv(Fe),he)},Fa=g(function(xe,he){var Fe=he&&!he.nodeType&&he,qe=Fe&&xe&&!xe.nodeType&&xe,Ce=qe&&qe.exports===Fe?ni.Buffer:void 0,Pt=Ce?Ce.allocUnsafe:void 0;xe.exports=function(tr,mr){if(mr)return tr.slice();var br=tr.length,Nr=Pt?Pt(br):new tr.constructor(br);return tr.copy(Nr),Nr}}),xC=function(he,Fe){var qe=-1,Ce=he.length;for(Fe||(Fe=Array(Ce));++qe<Ce;)Fe[qe]=he[qe];return Fe},ub=function(he,Fe){return _f(he,lp(he),Fe)},Ef=Object.getOwnPropertySymbols?function(xe){for(var he=[];xe;)Cu(he,lp(xe)),xe=Nh(xe);return he}:ip,iv=function(he,Fe){return _f(he,Ef(he),Fe)},db=function(he){return sp(he,sv,Ef)},pb=Object.prototype.hasOwnProperty,mp=function(he){var Fe=he.length,qe=new he.constructor(Fe);return Fe&&typeof he[0]=="string"&&pb.call(he,"index")&&(qe.index=he.index,qe.input=he.input),qe},Pf=function(he){var Fe=new he.constructor(he.byteLength);return new Tf(Fe).set(new Tf(he)),Fe},cv=function(he,Fe){var qe=Fe?Pf(he.buffer):he.buffer;return new he.constructor(qe,he.byteOffset,he.byteLength)},fb=/\w*$/,Xs=function(he){var Fe=new he.constructor(he.source,fb.exec(he));return Fe.lastIndex=he.lastIndex,Fe},mb=Ci?Ci.prototype:void 0,lv=mb?mb.valueOf:void 0,_C=function(he){return lv?Object(lv.call(he)):{}},IC=function(he,Fe){var qe=Fe?Pf(he.buffer):he.buffer;return new he.constructor(qe,he.byteOffset,he.length)},EC=function(he,Fe,qe){var Ce=he.constructor;switch(Fe){case"[object ArrayBuffer]":return Pf(he);case"[object Boolean]":case"[object Date]":return new Ce(+he);case"[object DataView]":return cv(he,qe);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return IC(he,qe);case"[object Map]":case"[object Set]":return new Ce;case"[object Number]":case"[object String]":return new Ce(he);case"[object RegExp]":return Xs(he);case"[object Symbol]":return _C(he)}},gb=Object.create,PC=function(){function xe(){}return function(he){if(!qi(he))return{};if(gb)return gb(he);xe.prototype=he;var Fe=new xe;return xe.prototype=void 0,Fe}}(),AC=function(he){return typeof he.constructor!="function"||Dl(he)?{}:PC(Nh(he))},NC=function(he){return zi(he)&&Ls(he)=="[object Map]"},uv=Fs&&Fs.isMap,OC=uv?ou(uv):NC,RC=function(he){return zi(he)&&Ls(he)=="[object Set]"},hb=Fs&&Fs.isSet,dv=hb?ou(hb):RC,vb="[object Arguments]",pv="[object Function]",Zs="[object Object]",qa={};qa[vb]=qa["[object Array]"]=qa["[object ArrayBuffer]"]=qa["[object DataView]"]=qa["[object Boolean]"]=qa["[object Date]"]=qa["[object Float32Array]"]=qa["[object Float64Array]"]=qa["[object Int8Array]"]=qa["[object Int16Array]"]=qa["[object Int32Array]"]=qa["[object Map]"]=qa["[object Number]"]=qa[Zs]=qa["[object RegExp]"]=qa["[object Set]"]=qa["[object String]"]=qa["[object Symbol]"]=qa["[object Uint8Array]"]=qa["[object Uint8ClampedArray]"]=qa["[object Uint16Array]"]=qa["[object Uint32Array]"]=!0,qa["[object Error]"]=qa[pv]=qa["[object WeakMap]"]=!1;var BC=function xe(he,Fe,qe,Ce,Pt,ar){var tr,mr=1&Fe,br=2&Fe,Nr=4&Fe;if(qe&&(tr=Pt?qe(he,Ce,Pt,ar):qe(he)),tr!==void 0)return tr;if(!qi(he))return he;var Fr=Gi(he);if(Fr){if(tr=mp(he),!mr)return xC(he,tr)}else{var jr=Ls(he),Vr=jr==pv||jr=="[object GeneratorFunction]";if(ff(he))return Fa(he,mr);if(jr==Zs||jr==vb||Vr&&!Pt){if(tr=br||Vr?{}:AC(he),!mr)return br?iv(he,js(tr,he)):ub(he,wC(tr,he))}else{if(!qa[jr])return Pt?he:{};tr=EC(he,jr,mr)}}ar||(ar=new np);var Kr=ar.get(he);if(Kr)return Kr;ar.set(he,tr),dv(he)?he.forEach(function(Cn){tr.add(xe(Cn,Fe,qe,Cn,he,ar))}):OC(he)&&he.forEach(function(Cn,En){tr.set(En,xe(Cn,Fe,qe,En,he,ar))});var Sn=Fr?void 0:(Nr?br?db:Cf:br?sv:Jd)(he);return kC(Sn||he,function(Cn,En){Sn&&(Cn=he[En=Cn]),bf(tr,En,xe(Cn,Fe,qe,En,he,ar))}),tr},sl,jc,Dc=function(he){return BC(he,5)},FC=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"team",qe)||this).myTeamMembersMap=new _c,Ce.service=new MC(qe),Ce.core.eventBus.on("team/onNotification",function(Pt){return Ce.notificationHandler(Pt)}),ps({cmdMap:Hy,cmdConfig:zy}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.mergeMyTeamMembers=function(Ce){var Pt=this;Qn(Ce).call(Ce,function(ar){var tr=ar.teamId,mr=Pt.myTeamMembersMap.get(tr),br=Hr({},mr,ar);Pt.myTeamMembersMap.set(tr,br)})},Fe.getTeamInfo=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),br.next=3,this.core.sendCmd("getTeamInfo",{teamId:Ce.teamId});case 3:return ar=br.sent,tr=ar.content.team,br.abrupt("return",el(tr));case 6:case"end":return br.stop()}},Pt,this)}))},Fe.getTeams=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.next=2,this.core.sendCmd("getTeams",{timetag:0});case 2:return Pt=mr.sent,ar=Pt.content.teams,mr.abrupt("return",Hh(ar));case 5:case"end":return mr.stop()}},Ce,this)}))},Fe.getTeamsById=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamIds:{type:"array",itemType:"string"}},Ce),br.next=3,this.core.sendCmd("getTeamsById",{teamIds:Ce.teamIds});case 3:return ar=br.sent,tr=Hh(ar.content.teams),br.abrupt("return",{teams:tr,tids:ar.content.tids});case 6:case"end":return br.stop()}},Pt,this)}))},Fe.createTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({type:{type:"enum",values:["advanced","normal"]},name:{type:"string",allowEmpty:!1},level:{type:"number",required:!1},accounts:{type:"array",itemType:"string",required:!1},ps:{type:"string",allowEmpty:!1,max:5e3,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),ar=zh(Ce),Nr.next=4,this.core.sendCmd("createTeam",{team:ar,accounts:Ce.accounts||[],ps:Ce.ps||""});case 4:return tr=Nr.sent,mr=el(tr.content.team),Nr.abrupt("return",mr);case 7:case"end":return Nr.stop()}},Pt,this)}))},Fe.dismissTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("dismissTeam",{teamId:Ce.teamId});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.leaveTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("leaveTeam",{teamId:Ce.teamId});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.transferTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("transferTeam",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.updateTeamInfo=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),ar=zh(Ce),mr.next=4,this.core.sendCmd("updateTeamInfo",{team:ar});case 4:return mr.abrupt("return",el(ar));case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.getTeamMembers=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",required:!1}},Ce),Nr.next=3,this.core.sendCmd("getTeamMembers",{teamId:Ce.teamId,timetag:0});case 3:if(tr=Nr.sent,mr=hf((Pt=tr.content)===null||Pt===void 0?void 0:Pt.teamMembers),Ce.accounts&&Ce.accounts.length>0){Nr.next=7;break}return Nr.abrupt("return",mr);case 7:return Nr.abrupt("return",Bs(mr).call(mr,function(Fr){var jr;return(jr=Ce.accounts)===null||jr===void 0?void 0:Wc(jr).call(jr,Fr.account)}));case 8:case"end":return Nr.stop()}},ar,this)}))},Fe.getMutedTeamMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),br.next=3,this.core.sendCmd("getMutedTeamMembers",{teamId:Ce.teamId});case 3:return ar=br.sent,tr=ar.content,br.abrupt("return",hf(tr.teamMembers));case 6:case"end":return br.stop()}},Pt,this)}))},Fe.addTeamMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),tr.next=3,this.core.sendCmd("addTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,ps:Ce.ps||"",attach:Ce.ext||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.removeTeamMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},Ce),tr.next=3,this.core.sendCmd("removeTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.applyTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),mr.next=3,this.core.sendCmd("applyTeam",{teamId:Ce.teamId,ps:Ce.ps||""});case 3:return ar=mr.sent,mr.abrupt("return",el(ar.content.team));case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.addTeamManagers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),tr.next=3,this.core.sendCmd("addTeamManagers",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.removeTeamManagers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),tr.next=3,this.core.sendCmd("removeTeamManagers",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.updateMyMemberInfo=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},Ce),ar=qy({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,bitConfigMask:Ce.bitConfigMask,ext:Ce.ext}),Nr.next=4,this.core.sendCmd("updateMyMemberInfo",{teamMember:ar});case 4:return tr=Xd(Hr({updateTime:new Date().getTime(),account:this.core.account},ar)),this.mergeMyTeamMembers([tr]),this.core.emit("updateTeamMember",tr),mr=Dc(this.myTeamMembersMap.get(tr.teamId)),this.core.emit("myTeamMembers",[mr]),Nr.abrupt("return",tr);case 10:case"end":return Nr.stop()}},Pt,this)}))},Fe.updateMemberNick=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1}},Ce),ar=qy({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,account:Ce.account}),br.next=4,this.core.sendCmd("updateNickInTeam",{teamMember:ar});case 4:return tr=Xd(Hr({updateTime:new Date().getTime()},ar)),br.abrupt("return",tr);case 6:case"end":return br.stop()}},Pt,this)}))},Fe.muteTeamMember=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},mute:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("muteTeamMember",{teamId:Ce.teamId,account:Ce.account,mute:Ce.mute?1:0});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.getTeamMemberInvitorAccid=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:200}},Ce),tr={teamId:Ce.teamId},Ce.accounts&&Ce.accounts.length>0&&(tr.accounts=Ce.accounts),Nr.next=5,this.core.sendCmd("getTeamMemberInvitorAccid",tr);case 5:return mr=Nr.sent,Nr.abrupt("return",((Pt=mr.content)===null||Pt===void 0?void 0:Pt.accountsMap)||{});case 7:case"end":return Nr.stop()}},ar,this)}))},Fe.muteTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("muteTeam",{teamId:Ce.teamId,mute:Ce.mute?1:0});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.passTeamApply=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("passTeamApply",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.rejectTeamApply=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),tr.next=3,this.core.sendCmd("rejectTeamApply",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.acceptTeamInvite=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("acceptTeamInvite",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.rejectTeamInvite=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),tr.next=3,this.core.sendCmd("rejectTeamInvite",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.notifyTeamMsgReceiptsHandler=function(Ce){var Pt,ar=(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.teamMsgReceipts;ar&&ar.length>0&&(this.core.emit("teamMsgReceipts",ar),this.core.emit("msgReceipts",ar))},Fe.syncTeamsHandler=function(Ce){var Pt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{teams:Uo(Pt.timetag)});var ar=Pt==null?void 0:Pt.teams;if(ar&&ar.length){var tr=Hh(ar);this.core.emit("teams",tr)}},Fe.syncCreateTeamHandler=function(Ce){var Pt=Ce.content,ar=el(Pt==null?void 0:Pt.team),tr=Vy(ar,ar.owner,"owner");this.core.emit("createTeam",ar,tr)},Fe.syncUpdateTeamMemberHandler=function(Ce){var Pt=Ce.content,ar=Xd(Pt==null?void 0:Pt.teamMember);ar.updateTime||(ar.updateTime=new Date().getTime()),this.mergeMyTeamMembers([ar]),this.core.emit("updateTeamMember",ar);var tr=Dc(this.myTeamMembersMap.get(ar.teamId));this.core.emit("myTeamMembers",[tr])},Fe.syncMyTeamMembersHandler=function(Ce){var Pt,ar=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{myTeamMembers:Uo(ar.timetag)});var tr=ar==null?void 0:Fo(Pt=ar.teamMembers).call(Pt,function(mr){return Xd(mr)});this.mergeMyTeamMembers(tr),this.core.emit("myTeamMembers",Dc(tr))},Fe.notificationHandler=function(Ce){var Pt=Ce.attach,ar=Ce.scene,tr=Ce.from,mr=Ce.to,br=Ce.time,Nr=Ce.idServer,Fr=Ce.idClient,jr=Pt.team,Vr=Pt.account,Kr=Pt.accounts,Sn=Pt.type;if(ar==="team")switch(this.core.options.debugLevel==="debug"?this.logger.debug("team::recvNotification",Nr,Fr,Pt):this.logger.log("team::recvNotification",Nr,Fr,mr,Sn,Vr,Kr),Sn){case"updateTeam":jr.updateTime=br,this.core.emit("updateTeam",jr);break;case"addTeamMembers":this.service.notifyAddTeamMembers(jr,Kr);break;case"acceptTeamInvite":this.service.notifyAddTeamMembers(jr,[tr]);break;case"passTeamApply":this.service.notifyAddTeamMembers(jr,[Vr]);break;case"addTeamManagers":this.service.notifyUpdateTeamManagers(mr,Kr,!0,br);break;case"removeTeamManagers":this.service.notifyUpdateTeamManagers(mr,Kr,!1,br);break;case"removeTeamMembers":this.service.notifyRemoveTeamMembers(jr,Kr);break;case"leaveTeam":this.service.notifyRemoveTeamMembers(jr,[tr]);break;case"dismissTeam":this.core.emit("dismissTeam",{teamId:mr});break;case"transferTeam":this.service.notifyTransferTeam(jr,tr,Vr);break;case"updateTeamMemberMute":this.service.notifyUpdateTeamMembersMute(jr,[Vr],Pt.mute)}},he}(Ps);(function(xe){xe[xe.none=0]="none",xe[xe.pass=1]="pass",xe[xe.decline=2]="decline",xe[xe.read=3]="read",xe[xe.deleted=4]="deleted",xe[xe.invalid=5]="invalid"})(sl||(sl={})),function(xe){xe[xe.default=0]="default",xe[xe.leave=1]="leave",xe[xe.roam=2]="roam"}(jc||(jc={}));var gp={applyTeam:0,rejectTeamApply:1,teamInvite:2,rejectTeamInvite:3,friendRequest:5,deleteFriend:6,recallMsgP2p:7,recallMsgTeam:8,recallMsgSuperTeam:12,deleteMsgP2pOneWay:13,deleteMsgTeamOneWay:14,applySuperTeam:15,rejectSuperTeamApply:16,superTeamInvite:17,rejectSuperTeamInvite:18,customP2p:100,customTeam:101,customSuperTeam:103},hp={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},Af={setting:{needSaveOffline:{type:"boolean"},isRoutable:{type:"boolean"},envConfig:{type:"string"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"boolean"}},pushInfo:Kh,recallMessageInfo:{idClient:{type:"string",rawKey:"deletedIdClient"},idServer:{type:"string",rawKey:"deletedIdServer"},createTime:{type:"number",rawKey:"deletedMsgTime"},fromNick:{type:"string",rawKey:"deletedMsgFromNick"},opeAccount:{type:"string"}}};function vp(xe,he,Fe){var qe=+xe.type,Ce=sc(gp,qe);Fe=Fe||jc.default;var Pt=Hr(Hr({},xi(Af,xe)),{type:Ce,time:+xe.time,to:xe.to,from:xe.from,idServer:xe.idServer,state:sl[sl.none],feature:jc[Fe]});if(typeof Pt.attach=="string")try{Pt.attach=JSON.parse(Pt.attach)}catch(ar){he.error("formatSystemMessage: "+Pt.idServer+" parse attach error",ar&&ar.message)}return qe===5&&Pt.attach?(Pt.attach.type=hp[+Pt.attach.vt],Pt.attach.type==="passFriendApply"?Pt.state=sl[sl.pass]:Pt.attach.type==="rejectFriendApply"&&(Pt.state=sl[sl.decline])):qe<=3&&Pt.attach&&(Pt.attach=function(tr){var mr=tr.attach,br=tr.tinfo,Nr=ri(tr,["attach","tinfo"]);return Nr.ext=mr,br!==void 0&&(Nr.team=el(nc(tr.tinfo,As.team))),Nr}(Pt.attach)),Pt}function $C(xe){var he=Hr({},xe);return Hr(Hr({},Kd(Af,he)),{type:gp[he.type],to:he.to,attach:he.attach})}var LC={"4_6":"syncOfflineSysMsgs","4_18":"syncOfflineSysMsgs","4_19":"syncRecallMsgOfflineAndRoaming","4_101":"syncOfflineSysMsgs","7_3":"onSysMsg","7_7":"sendCustomSysMsg","7_14":"onRecallMsg","21_18":"onRecallMsg","21_117":"onRecallMsg","7_15":"syncRecallMsgOfflineAndRoaming","21_19":"onSysMsg","21_16":"sendSuperTeamCustomSysMsg","101_3":"onSysMsg","101_7":"sendFilterCustomSysMsg"},yp={sysMsg:Hr({time:0,type:1,to:2,from:3,content:4,attach:5,idServer:6,needSaveOffline:7,deletedIdClient:10,deletedIdServer:11,needcAntiSpam:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,envConfig:21,callbackExt:22,isRoutable:105},Qy)},Kl=Is(yp),jC={onSysMsg:{service:"systemMessage",sid:7,cid:3,response:[{type:"Property",name:"sysMsg",reflectMapper:Kl.sysMsg}]},sendCustomSysMsg:{service:"systemMessage",sid:7,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:yp.sysMsg}]},sendSuperTeamCustomSysMsg:{service:"systemMessage",sid:21,cid:16,params:[{type:"Property",name:"sysMsg",reflectMapper:yp.sysMsg}]},sendFilterCustomSysMsg:{service:"systemMessage",sid:101,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:yp.sysMsg}]},batchMarkRead:{service:"systemMessage",sid:4,cid:5,isNoResponse:!0,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},onRecallMsg:{sid:7,cid:14,service:"systemMessage",response:[{type:"Property",name:"sysMsg",reflectMapper:Kl.sysMsg}]},syncRecallMsgOfflineAndRoaming:{sid:7,cid:15,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Kl.sysMsg},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},syncOfflineSysMsgs:{sid:4,cid:9,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Kl.sysMsg}]}},DC=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"systemMessage",qe)||this).sysMsgUnread={total:0,friend:0,msg:0,team:0,superTeam:0},Ce.core.eventBus.on("logined",function(){Ce.initEventListeners()}),ps({cmdMap:LC,cmdConfig:jC}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.initEventListeners=function(){var Ce=this;this.core.eventBus.on("systemMessage/passFriendApply",function(Pt){Ce.core.emit("updateSystemMessages",[{idServer:Pt.idServer,from:Pt.account,state:"pass",type:"friendRequest"}])}),this.core.eventBus.on("systemMessage/rejectFriendApply",function(Pt){Ce.core.emit("updateSystemMessages",[{idServer:Pt.idServer,from:Pt.account,state:"decline",type:"friendRequest"}])})},Fe.doMarkSysMsgAck=function(Ce){var Pt=[],ar=[],tr=["applySuperTeam","rejectSuperTeamApply","superTeamInvite","rejectSuperTeamInvite","customSuperTeam"];Qn(Ce).call(Ce,function(mr){mr.idServer&&(Wc(tr).call(tr,mr.type)?ar.push(mr.idServer):Pt.push(mr.idServer))}),Pt.length>0&&this.core.sendCmd("batchMarkRead",{sid:"7",cid:"3",ids:Pt}),ar.length>0&&this.core.sendCmd("batchMarkRead",{sid:"21",cid:"19",ids:ar})},Fe.sendCustomSysMsg=function(Ce){var Pt=this;Jn({to:{type:"string",allowEmpty:!1},type:{type:"enum",values:["customP2p","customTeam","customSuperTeam"]},attach:{type:"string",allowEmpty:!1},setting:{type:"object",rules:{needSaveOffline:{type:"boolean",required:!1},env:{type:"string",allowEmpty:!1,required:!1}},required:!1},pushInfo:{type:"object",required:!1,rules:Kh}},Ce);var ar=Ce.type==="customSuperTeam"?"sendSuperTeamCustomSysMsg":"sendCustomSysMsg";return this.core.sendCmd(ar,{sysMsg:$C(Ce)}).then(function(){Pt.logger.log("sendCustomSysMsg success")}).catch(function(tr){throw Pt.logger.error("sendCustomSysMsg failed",tr.message),tr})},Fe.onSysMsgHandler=function(Ce){var Pt,ar=(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.sysMsg;if(ar){var tr=typeof oi(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;ar.idServer=ar.idServer||tr;var mr=vp(ar,this.logger,jc.default);this.core.emit("sysMsg",mr),this.doMarkSysMsgAck([mr])}else this.logger.warn("onSysMsg no content.sysMsg")},Fe.syncOfflineSysMsgsHandler=function(Ce){var Pt,ar=this;if(Ce.content.sysMsgs&&Ce.content.sysMsgs.length>0){var tr=Fo(Pt=Ce.content.sysMsgs).call(Pt,function(mr){return vp(mr,ar.logger,jc.leave)});this.core.emit("syncSysMsgs",tr),this.doMarkSysMsgAck(tr)}},Fe.onRecallMsgHandler=function(Ce){var Pt,ar=(Pt=Ce.content)===null||Pt===void 0?void 0:Pt.sysMsg;if(ar){var tr=typeof oi(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;ar.idServer=ar.idServer||tr;var mr=ep([ar],function(Fr){return Fr===gp.recallMsgP2p?"p2p":Fr===gp.recallMsgTeam?"team":Fr===gp.recallMsgSuperTeam?"superTeam":""}(+ar.type));this.core.eventBus.emit("session/updateForDeletedMsg",mr);var br=vp(ar,this.logger,jc.default);this.core.emit("sysMsg",br),this.doMarkSysMsgAck([br])}else this.logger.warn("onSysMsg no content.sysMsg")},Fe.syncRecallMsgOfflineAndRoamingHandler=function(Ce){var Pt=this,ar=Ce.content,tr=ar.timetag,mr=ar.type,br=ar.sysMsgs,Nr=Uo(mr),Fr=Nr===1?jc.leave:jc.roam,jr=Fo(br).call(br,function(Vr){return vp(Vr,Pt.logger,Fr)});Nr===1&&this.doMarkSysMsgAck(jr),this.core.eventBus.emit("sync/updateTimetag",{recallMsg:tr}),this.core.emit("syncSysMsgs",jr)},he}(Ps);function bp(xe){var he=["bitsExtension","createTime","updateTime","passRelationShip","relationShip","source"],Fe=Hr({},xe);return Qn(he).call(he,function(qe){Fe[qe]!==void 0&&(Fe[qe]=Uo(Fe[qe]))}),Fe.relationShip!==void 0&&(Fe.valid=Fe.relationShip===1),Fe}var UC={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},fv={"12_4":"getFriends","12_1":"friendReuqest","12_2":"deleteFriend","12_3":"updateFriend","12_5":"syncFriends","12_6":"syncFriendUsers","12_101":"syncFriendRequest","12_102":"syncDeleteFriend","12_103":"syncUpdateFriend"},Nf={updateFriendTag:{account:4,alias:8,ext:10},delFriendParams:{delAlias:1},friendTag:{account:4,relationShip:5,passRelationShip:6,source:7,alias:8,bitsExtension:9,ext:10,createTime:11,updateTime:12,serverex:13},userTag:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13}},Of=Is(Nf),yb={getFriends:{sid:12,cid:4,service:"friend",params:[{type:"Long",name:"timetag"}],response:[{type:"PropertyArray",name:"friends",reflectMapper:Of.friendTag},{type:"Number",name:"timetag"}]},friendReuqest:{sid:12,cid:1,service:"friend",params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:12,cid:2,service:"friend",params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams",reflectMapper:Nf.delFriendParams}]},updateFriend:{sid:12,cid:3,service:"friend",params:[{type:"Property",name:"updateFriendTag",reflectMapper:Nf.updateFriendTag}]},syncFriends:{sid:12,cid:5,service:"friend",response:[{type:"PropertyArray",name:"friends",entity:"friendTag",reflectMapper:Of.friendTag},{type:"Number",name:"timetag"}]},syncFriendUsers:{sid:12,cid:6,service:"friend",response:[{type:"PropertyArray",name:"users",entity:"userTag",reflectMapper:Of.userTag},{type:"Number",name:"timetag"}]},syncFriendRequest:{sid:12,cid:101,service:"friend",params:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}],response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},syncDeleteFriend:{sid:12,cid:102,service:"friend",response:[{type:"String",name:"account"}]},syncUpdateFriend:{sid:12,cid:103,service:"friend",response:[{type:"Property",name:"friend",reflectMapper:Of.friendTag}]}},qC=function(xe){function he(qe){var Ce;return Ce=xe.call(this,"friend",qe)||this,ps({cmdMap:fv,cmdConfig:yb}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.getFriends=function(){var Ce;return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return br.next=2,this.core.sendCmd("getFriends",{timetag:0});case 2:return ar=br.sent,tr=((Ce=ar.content)===null||Ce===void 0?void 0:Ce.friends)||[],tr=Fo(tr).call(tr,function(Nr){return bp(Nr)}),br.abrupt("return",tr);case 6:case"end":return br.stop()}},Pt,this)}))},Fe.addFriend=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({account:{type:"string",allowEmpty:!1},ps:{type:"string",allowEmpty:!1,required:!1}},Ce),mr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:1,ps:Ce.ps||""});case 3:return ar=new Date().getTime(),mr.abrupt("return",{account:Ce.account,createTime:ar,updateTime:ar,valid:!0,source:0,passRelationShip:1,relationShip:1,bitsExtension:0});case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.applyFriend=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({account:{type:"string",allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:2,ps:Ce.ps||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.passFriendApply=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar=this;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({account:{type:"string",allowEmpty:!1}},Ce),mr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:3,ps:Ce.ps||""}).then(function(br){return ar.core.eventBus.emit("systemMessage/passFriendApply",Ce),br});case 3:case"end":return mr.stop()}},Pt,this)}))},Fe.rejectFriendApply=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar=this;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({account:{type:"string",allowEmpty:!1}},Ce),mr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:4,ps:Ce.ps||""}).then(function(br){return ar.core.eventBus.emit("systemMessage/rejectFriendApply",Ce),br});case 3:case"end":return mr.stop()}},Pt,this)}))},Fe.deleteFriend=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({account:{type:"string",allowEmpty:!1},delAlias:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("deleteFriend",{account:Ce.account,delFriendParams:{delAlias:Ce.delAlias===!0?1:0}});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.updateFriend=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({account:{type:"string",allowEmpty:!1},alias:{type:"string"},ext:{type:"string",required:!1}},Ce),tr.next=3,this.core.sendCmd("updateFriend",{updateFriendTag:Ce});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.syncFriendRequestHandler=function(Ce){var Pt=function(tr){var mr=Hr({},tr);try{mr.ps=mr.ps&&JSON.parse(mr.ps)}catch{}if(mr.type=UC[mr.type],mr.type==="addFriend"||mr.type==="passFriendApply"){var br=new Date().getTime();mr.friend={account:tr.account,alias:"",createTime:br,ext:"",updateTime:br,valid:!0}}return mr}(Ce.content);this.core.emit("syncFriend",Pt)},Fe.syncDeleteFriendHandler=function(Ce){var Pt=Ce.content.account;this.logger.log("friend::emit syncFriendAction: deleteFriend "+Pt),this.core.emit("syncFriend",{type:"deleteFriend",account:Pt})},Fe.syncUpdateFriendHandler=function(Ce){var Pt=bp(Ce.content.friend);this.logger.log("friend::emit syncFriendAction: updateFriend, ",Pt==null?void 0:Pt.account),this.core.emit("syncFriend",{type:"updateFriend",friend:Pt})},Fe.syncFriendsHandler=function(Ce){var Pt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{friends:Uo(Pt.timetag)});var ar=Pt==null?void 0:Pt.friends;if(ar&&ar.length){var tr=Fo(ar).call(ar,function(mr){return bp(mr)});this.core.emit("friends",tr)}},Fe.syncFriendUsersHandler=function(Ce){var Pt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{friendUsers:Uo(Pt.timetag)});var ar=Pt==null?void 0:Pt.users;if(ar&&ar.length){var tr=Fo(ar).call(ar,function(mr){return yu(mr)});this.core.emit("users",tr)}},he}(Ps),mv={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"};function bb(xe){return xe&&xe.length>0?Fo(xe).call(xe,function(he){return function(qe){var Ce=Hr({},qe),Pt=["subscribeTime","time"];return Qn(Pt).call(Pt,function(ar){Ce[ar]&&(Ce[ar]=Uo(Ce[ar]))}),Ce}(he)}):[]}function il(xe){if(!xe)return xe;var he=xe.serverExt,Fe=ri(xe,["serverExt"]),qe=["time","type","value"];if(Qn(qe).call(qe,function(Ce){Fe[Ce]&&(Fe[Ce]=Uo(Fe[Ce]))}),Fe.clientType&&(Fe.clientType=mv[Fe.clientType]||""),he)try{Fe.ext=JSON.parse(he),typeof Fe.ext[0]=="string"&&(Fe.ext=Fe.ext[0])}catch{}return Fe}var Sb={"14_1":"publishEvent","14_2":"pushEvent","14_3":"subscribeEvent","14_4":"unSubscribeEventsByAccounts","14_5":"unSubscribeEventsByType","14_6":"querySubscribeEventsByAccounts","14_7":"querySubscribeEventsByType","14_9":"pushEvents"},Ql={msgEvent:{type:1,value:2,idClient:3,ext:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverExt:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105}},Iu=Is(Ql),VC={publishEvent:{sid:14,cid:1,service:"event",params:[{type:"Property",name:"msgEvent",reflectMapper:Ql.msgEvent}],response:[{type:"Property",name:"msgEvent",reflectMapper:Iu.msgEvent}]},pushEvent:{sid:14,cid:2,service:"event",response:[{type:"Property",name:"msgEvent",reflectMapper:Iu.msgEvent}]},subscribeEvent:{sid:14,cid:3,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ql.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:14,cid:4,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ql.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:14,cid:5,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ql.msgEventSubscribe}]},querySubscribeEventsByAccounts:{sid:14,cid:6,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ql.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:Iu.msgEventSubscribe}]},querySubscribeEventsByType:{sid:14,cid:7,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:Ql.msgEventSubscribe}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:Iu.msgEventSubscribe}]},pushEvents:{sid:14,cid:9,service:"event",response:[{type:"PropertyArray",name:"msgEvents",reflectMapper:Iu.msgEvent}]}},pe=function(xe){function he(qe){var Ce;return Ce=xe.call(this,"event",qe)||this,ps({cmdMap:Sb,cmdConfig:VC}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.publishEvent=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return Jn({type:{type:"number"},value:{type:"number"},ext:{type:"string",required:!1},validTime:{type:"number",min:60,max:2592e3,required:!1},broadcastType:{type:"number",required:!1},sync:{type:"boolean",required:!1}},Ce),tr=Hr(Hr({validTime:604800},Ce),{idClient:ef(),sync:Ce.sync===!0?1:0}),Fr.next=4,this.core.sendCmd("publishEvent",{msgEvent:tr});case 4:return mr=Fr.sent,br=((Pt=mr.content)===null||Pt===void 0?void 0:Pt.msgEvent)||{},Fr.abrupt("return",il(br));case 7:case"end":return Fr.stop()}},ar,this)}))},Fe.subscribeEvent=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return Jn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100},subscribeTime:{type:"number",min:60,max:2592e3,required:!1}},Ce),tr=Hr(Hr({subscribeTime:2592e3},Ce),{sync:Ce.sync===!0?1:0}),Fr.next=4,this.core.sendCmd("subscribeEvent",{msgEventSubscribe:tr,accounts:Ce.accounts});case 4:return mr=Fr.sent,br=((Pt=mr.content)===null||Pt===void 0?void 0:Pt.accounts)||[],Fr.abrupt("return",{failedAccounts:br});case 7:case"end":return Fr.stop()}},ar,this)}))},Fe.unSubscribeEvents=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:if(Jn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},Ce),tr={type:Ce.type},!(Ce.accounts&&Ce.accounts.length>0)){Fr.next=9;break}return Fr.next=5,this.core.sendCmd("unSubscribeEventsByAccounts",{msgEventSubscribe:tr,accounts:Ce.accounts});case 5:br=Fr.sent,mr=((Pt=br.content)===null||Pt===void 0?void 0:Pt.accounts)||[],Fr.next=12;break;case 9:return Fr.next=11,this.core.sendCmd("unSubscribeEventsByType",{msgEventSubscribe:tr});case 11:mr=[];case 12:return Fr.abrupt("return",{failedAccounts:mr});case 13:case"end":return Fr.stop()}},ar,this)}))},Fe.querySubscribeEvents=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(Jn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},Ce),!(Ce.accounts&&Ce.accounts.length>0)){br.next=7;break}return br.next=4,this.core.sendCmd("querySubscribeEventsByAccounts",{msgEventSubscribe:{type:Ce.type},accounts:Ce.accounts});case 4:tr=br.sent,br.next=10;break;case 7:return br.next=9,this.core.sendCmd("querySubscribeEventsByType",{msgEventSubscribe:{type:Ce.type}});case 9:tr=br.sent;case 10:return br.abrupt("return",bb((Pt=tr.content)===null||Pt===void 0?void 0:Pt.msgEventSubscribes));case 11:case"end":return br.stop()}},ar,this)}))},Fe.pushEventHandler=function(Ce){var Pt,ar=((Pt=Ce.content)===null||Pt===void 0?void 0:Pt.msgEvent)||{};this.core.emit("pushEvents",[il(ar)])},Fe.pushEventsHandler=function(Ce){var Pt,ar=((Pt=Ce.content)===null||Pt===void 0?void 0:Pt.msgEvents)||{};this.core.emit("pushEvents",function(mr){return Hi(mr)&&mr.length>0?Fo(mr).call(mr,function(br){return il(br)}):[]}(ar))},he}(Ps);function Ie(xe){var he={scene:Uh[xe.scene],from:xe.threadMsgFromAccount,to:xe.threadMsgToAccount,time:xe.threadMsgTime,idServer:xe.threadMsgIdServer},Fe={limit:xe.limit<100?xe.limit:100,beginTime:typeof xe.beginTime=="number"?xe.beginTime:0,reverse:Yl(xe)===!0?1:0};return xe.lastMsgId&&(Fe.lastMsgId=xe.lastMsgId),{msg:he,threadMsgReq:Fe}}var ze,Oe={"23_1":"getThreadMsgs","23_2":"getMsgsByIdServer"},Ne={msg:is,threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2}},At=Is(Ne),nr={getThreadMsgs:{sid:23,cid:1,service:"msgExtend",params:[{type:"Property",name:"msg",reflectMapper:Ne.msg},{type:"Property",name:"threadMsgReq",reflectMapper:Ne.threadMsgReq}],response:[{type:"Property",name:"threadMsg",reflectMapper:At.msg},{type:"Property",name:"threadMsgsMeta",reflectMapper:At.threadMsgsMeta},{type:"PropertyArray",name:"msgs",reflectMapper:At.msg}]},getMsgsByIdServer:{sid:23,cid:2,service:"msgExtend",params:[{type:"PropertyArray",name:"reqMsgs",reflectMapper:Ne.msg}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:At.msg}]}},kt=function(xe){function he(qe){var Ce;return Ce=xe.call(this,"msgExtend",qe)||this,ps({cmdMap:Oe,cmdConfig:nr}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.getThreadMsgs=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr,Fr,jr,Vr;return wr.wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:return Jn({scene:{type:"enum",values:Wi(us)},threadMsgFromAccount:{type:"string",allowEmpty:!1},threadMsgIdServer:{type:"string",allowEmpty:!1},threadMsgTime:{type:"number"},threadMsgToAccount:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},lastMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1}},Ce),Sn.next=3,this.core.sendCmd("getThreadMsgs",Ie(Ce));case 3:return tr=Sn.sent,mr=tr.content,br=mr.msgs,Nr=mr.threadMsg,Fr=tr.content.threadMsgsMeta,jr=Ki(Nr,this.core.account),Vr=(Pt=this.core.session)===null||Pt===void 0?void 0:Pt.getSessionWithUncomplete({id:jr}),br=Zd(br,Vr?{account:this.core.account,sessionAck:Vr.ack,msgReceiptTime:Vr.msgReceiptTime}:{account:this.core.account}),Nr=lc(Nr,Vr?{account:this.core.account,sessionAck:Vr.ack,msgReceiptTime:Vr.msgReceiptTime}:{account:this.core.account}),Sn.abrupt("return",{msgs:br,threadMsg:Nr,total:Uo(Fr.total),timetag:Uo(Fr.lastMsgTime)});case 11:case"end":return Sn.stop()}},ar,this)}))},Fe.getMsgsByIdServer=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr,br,Nr=this;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({reqMsgs:{type:"array",rules:{scene:{type:"enum",values:Wi(us)},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},time:{type:"number"}},min:1,max:100}},Ce),jr.next=3,this.core.sendCmd("getMsgsByIdServer",{reqMsgs:Fo(ar=Ce.reqMsgs).call(ar,function(Vr){return Hr(Hr({},Vr),{scene:sc(us,Vr.scene)})})});case 3:return mr=jr.sent,br=Fo(tr=mr.content.msgs).call(tr,function(Vr){var Kr,Sn=Ki(Vr,Nr.core.account),Cn=(Kr=Nr.core.session)===null||Kr===void 0?void 0:Kr.getSessionWithUncomplete({id:Sn});return lc(Vr,Cn?{account:Nr.core.account,sessionAck:Cn.ack,msgReceiptTime:Cn.msgReceiptTime}:{account:Nr.core.account})}),jr.abrupt("return",br);case 6:case"end":return jr.stop()}},Pt,this)}))},he}(Ps);(function(xe){xe[xe.ASC=1]="ASC",xe[xe.DESC=2]="DESC"})(ze||(ze={}));var dr,gr={"7_6":"getHistoryMsgs","7_9":"deleteRoamingMsgs","4_24":"syncClearServerHistoryMsgs","7_18":"clearHistoryMsgsFromServer","7_118":"multiSyncClearServerHistoryMsgs","7_26":"nimFtsCloudMsgLogsAggWithSession","7_27":"nimFtsCloudMsgLogs"},Ar={msg:is,clearHistoryMsgsFromServerReqTag:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,ext:7},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},ftsReqTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msglogsLimit:5,orderRule:6,p2pSessionList:7,teamSessionList:8,senderList:9,msgTypeList:10,msgSubTypeList:11}},Rr=Is(Ar),Ur={deleteRoamingMsgs:{sid:7,cid:9,service:"msgLog",params:[{type:"StrArray",name:"ids"}]},getHistoryMsgs:{sid:7,cid:6,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Rr.msg}],service:"msgLog"},clearHistoryMsgsFromServer:{sid:7,cid:18,params:[{type:"Property",name:"clearHistoryMsgsFromServerReqTag",reflectMapper:Ar.clearHistoryMsgsFromServerReqTag}],response:[{type:"Long",name:"timetag"}],service:"msgLog"},multiSyncClearServerHistoryMsgs:{sid:7,cid:118,response:[{type:"Property",name:"data",reflectMapper:Rr.clearMsgsParamsWithSync}],service:"msgLog"},syncClearServerHistoryMsgs:{sid:4,cid:24,service:"msgLog",response:[{type:"PropertyArray",name:"datas",reflectMapper:Rr.clearMsgsParamsWithSync}]},nimFtsCloudMsgLogsAggWithSession:{sid:7,cid:26,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:Ar.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:Rr.msg}]},nimFtsCloudMsgLogs:{sid:7,cid:27,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:Ar.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:Rr.msg}]}};(function(xe){xe[xe.p2p=1]="p2p",xe[xe.team=2]="team"})(dr||(dr={}));var Dr={type:{type:"enum",values:dr},isDeleteRoam:{type:"boolean"},isSyncSelf:{type:"boolean"},time:{type:"number"}};function Jr(xe){var he=xi(Dr,xe);return{sessionId:he.type==="p2p"?"p2p-"+he.otherAccid:"team-"+he.toTid,time:he.time}}var kn={orderRule:{type:"enum",values:ze}};function Tn(xe){var he,Fe=xi(kn,xe);Hi(Fe.msgTypeList)&&(Fe.msgTypeList=Fo(he=Fe.msgTypeList).call(he,function(Ce){return Nc[Ce]}).join(","));var qe=["p2pSessionList","teamSessionList","senderList","msgSubTypeList"];return Qn(qe).call(qe,function(Ce){Hi(Fe[Ce])&&(Fe[Ce]=Fe[Ce].join(","))}),Fe}var jn=function(xe){function he(qe){var Ce;return Ce=xe.call(this,"msgLog",qe)||this,ps({cmdMap:gr,cmdConfig:Ur}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.deleteRoamingMsgs=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:Jn({ids:{type:"array",itemType:"string"}},Ce),ar=[],br.prev=2,ar=Fo(tr=Ce.ids).call(tr,function(Nr){var Fr=na(Nr);return Fr.scene+"|"+Fr.accid}),br.next=10;break;case 6:throw br.prev=6,br.t0=br.catch(2),this.logger.error("Failed to delete roaming msgs with "+Ce.ids,br.t0),new Error("Failed to create session with "+Ce.ids);case 10:return br.next=12,this.core.sendCmd("deleteRoamingMsgs",{ids:ar});case 12:case"end":return br.stop()}},Pt,this,[[2,6]])}))},Fe.getHistoryMsgs=function(Ce){var Pt,ar;return Vn(this,void 0,void 0,wr.mark(function tr(){var mr,br,Nr,Fr,jr,Vr,Kr;return wr.wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return!((Pt=this.core.sync)===null||Pt===void 0)&&Pt.getSyncDoneFlag()||this.logger.warn("Please call getHistoryMsgs after syncdone event"),Jn({scene:{type:"enum",values:la(Uh)},to:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1},lastMsgId:{type:"string",required:!1,allowEmpty:!1},asc:{type:"boolean",required:!1},msgTypes:{type:"array",itemType:"string",required:!1}},Ce),br=Ce.scene==="p2p"?"getHistoryMsgs":Ce.scene==="team"?"getHistoryTeamMsgs":"getHistorySuperTeamMsgs",Cn.next=5,this.core.sendCmd(br,Hr(Hr({beginTime:0,endTime:0,lastMsgId:0,limit:100,reverse:!1},Ce),{msgTypes:Ce.msgTypes?Fo(mr=Ce.msgTypes).call(mr,function(En){return Dh[En]}):[]}));case 5:if(Nr=Cn.sent,(Fr=Nr.content).msgs&&Fr.msgs.length>0){Cn.next=9;break}return Cn.abrupt("return",[]);case 9:if(jr=Ki(Fr.msgs[0],this.core.account),Vr=(ar=this.core.session)===null||ar===void 0?void 0:ar.getSessionWithUncomplete({id:jr}),Kr=Zd(Fr.msgs,Vr?{account:this.core.account,sessionAck:Vr.ack,msgReceiptTime:Vr.msgReceiptTime}:{account:this.core.account}),Ce.asc!==!0){Cn.next=14;break}return Cn.abrupt("return",Zc(Kr).call(Kr,function(En,In){return En.time-In.time}));case 14:return Cn.abrupt("return",Kr);case 15:case"end":return Cn.stop()}},tr,this)}))},Fe.clearHistoryMsgsFromServer=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({scene:{type:"enum",values:["p2p","team"]},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},isSyncSelf:{type:"boolean",required:!1}},Ce),(ar=Hr(Hr({isDeleteRoam:1},Ce),{type:Ce.scene==="team"?2:1,isSyncSelf:Ce.isSyncSelf===!0?1:0}))[ar.type===2?"toTid":"otherAccid"]=Ce.to,Nr.next=5,this.core.sendCmd("clearHistoryMsgsFromServer",{clearHistoryMsgsFromServerReqTag:ar});case 5:return tr=Nr.sent,mr=tr.content,this.core.eventBus.emit("session/updateForClearMsg",[{sessionId:Ce.scene+"-"+Ce.to}],!0),Nr.abrupt("return",mr);case 9:case"end":return Nr.stop()}},Pt,this)}))},Fe.multiSyncClearServerHistoryMsgsHandler=function(Ce){var Pt=Jr(Ce.content.data);this.core.eventBus.emit("session/updateForClearMsg",[Pt],!0),this.core.emit("clearServerHistoryMsgs",[Pt])},Fe.ftsCloudMsgLogs=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return tr.abrupt("return",this.baseFtsCloudMsgLogs(Ce,"nimFtsCloudMsgLogs"));case 1:case"end":return tr.stop()}},Pt,this)}))},Fe.ftsCloudMsgLogsAggWithSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return tr.abrupt("return",this.baseFtsCloudMsgLogs(Ce,"nimFtsCloudMsgLogsAggWithSession"));case 1:case"end":return tr.stop()}},Pt,this)}))},Fe.baseFtsCloudMsgLogs=function(Ce,Pt){return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr=this;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Jn({keyword:{type:"string",allowEmpty:!1},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",required:!1},msglogsLimit:{type:"number",required:!1},orderRule:{type:"enum",values:Wi(ze),required:!1},p2pSessionList:{type:"array",itemType:"string",required:!1},teamSessionList:{type:"array",itemType:"string",required:!1},senderList:{type:"array",itemType:"string",required:!1},msgTypeList:{type:"array",itemType:"enum",values:Wi(Nc),required:!1},msgSubTypeList:{type:"array",itemType:"number",required:!1}},Ce),!(Ce.fromTime&&Ce.toTime&&Ce.toTime<Ce.fromTime)){jr.next=3;break}throw new Bo("Request parameter error: toTime should be greater than fromTime",Ce,"");case 3:return mr=Tn(Ce),jr.next=6,this.core.sendCmd(Pt,{tag:mr});case 6:return br=jr.sent,jr.abrupt("return",Fo(tr=br.content.datas).call(tr,function(Vr){var Kr,Sn=Ki(Vr,Nr.core.account),Cn=(Kr=Nr.core.session)===null||Kr===void 0?void 0:Kr.getSessionWithUncomplete({id:Sn});return lc(Vr,Cn?{account:Nr.core.account,sessionAck:Cn.ack,msgReceiptTime:Cn.msgReceiptTime}:{account:Nr.core.account})}));case 8:case"end":return jr.stop()}},ar,this)}))},Fe.syncClearServerHistoryMsgsHandler=function(Ce){var Pt=function(tr){return Hi(tr)&&tr.length>0?Fo(tr).call(tr,function(mr){return Jr(mr)}):[]}(Ce.content.datas);this.core.emit("clearServerHistoryMsgs",Pt)},he}(Ps),Bn={"22_1":"requestProxy","22_2":"onRequestProxy"},Gn={requestProxyTag:{zone:1,path:2,method:3,header:4,body:5},requestProxyMsgTag:{from:1,body:2,time:3}},$n=Is(Gn),ho={requestProxy:{sid:22,cid:1,service:"passThrough",params:[{type:"Property",name:"requestProxyTag",reflectMapper:Gn.requestProxyTag}],response:[{type:"Property",name:"requestProxyTag",reflectMapper:$n.requestProxyTag}]},onRequestProxy:{sid:22,cid:2,service:"passThrough",response:[{type:"Property",name:"proxyMsg",reflectMapper:$n.requestProxyMsgTag}]}},co=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"passThrough",qe)||this).core=qe,ps({cmdMap:Bn,cmdConfig:ho}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.request=function(Ce){return Jn({path:{type:"string",allowEmpty:!1}},Ce),this.core.sendCmd("requestProxy",{requestProxyTag:Ce}).then(function(Pt){return Pt.content.proxyTag})},Fe.onRequestProxyHandler=function(Ce){var Pt=Ce.content.proxyMsg;Pt&&Pt.time&&(Pt.time=+Pt.time),this.core.emit("proxyMsg",Pt)},he}(Ps),oa=Ws.some,so=fi("some");_n({target:"Array",proto:!0,forced:!so},{some:function(he){return oa(this,he,arguments.length>1?arguments[1]:void 0)}});var Wr=sa("Array").some,Kn=Array.prototype,ro=function(xe){var he=xe.some;return xe===Kn||vr(Kn,xe)&&he===Kn.some?Wr:he},Hn,Fn,eo=function(he,Fe){if(he==null)return{};var qe=ah(db(he),function(Ce){return[Ce]});return Fe=wu(Fe),Zy(he,qe,function(Ce,Pt){return Fe(Ce,Pt[0])})},lo={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},So={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},Co=Is(So),aa={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:Co.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:So.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:Co.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:So.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:Co.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:Co.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:Co.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:So.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:Co.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:So.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:Co.mixStoreAuthTokenResTag}]}};(function(xe){xe[xe.nos=1]="nos",xe[xe.s3=2]="s3"})(Hn||(Hn={})),function(xe){xe[xe.dontNeed=-1]="dontNeed",xe[xe.time=2]="time",xe[xe.urls=3]="urls"}(Fn||(Fn={}));var No,Sa,$o={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0},Wo={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},Ta={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};function Yi(xe){return xe===void 0&&(xe="file"),fa(Wo[xe]||{}).replace(/"/gi,'\\"')}(function(xe){xe[xe.nos=1]="nos",xe[xe.s3=2]="s3"})(No||(No={})),function(xe){xe[xe.dontNeed=-1]="dontNeed",xe[xe.time=2]="time",xe[xe.urls=3]="urls"}(Sa||(Sa={}));var Qo=function(){function xe(Fe,qe){qe===void 0&&(qe={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=No.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=Fe.logger,this.core=Fe,ps({cmdMap:lo,cmdConfig:aa}),this.setOptions(qe)}var he=xe.prototype;return he.setOptions=function(qe){qe===void 0&&(qe={});var Ce=qe.storageKeyPrefix||"NIMClient";this.GRAYKEY=Ce+"-AllGrayscaleConfig",this.MIXSTOREKEY=Ce+"-AllMixStorePolicy";var Pt=qe.s3,ar=ri(qe,["s3"]),tr=Hr({},$o,this.config);if(ar&&Object.prototype.hasOwnProperty.call(ar,"cdn")){var mr={cdn:Hr(Hr({},tr.cdn),ar.cdn)};this.config=Hr({},tr,ar,mr)}else this.config=Hr({},tr,ar);Pt&&(this.s3=Pt)},he.init=function(){return Vn(this,void 0,void 0,wr.mark(function qe(){return wr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=No.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){Pt.next=9;break}return Pt.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return Pt.next=9,this.getNosCdnHost();case 9:case"end":return Pt.stop()}},qe,this)}))},he.uploadFile=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(Jn({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},qe),qe.fileInput||qe.file||qe.filePath){br.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!qe.type||qe.type==="file"){br.next=7;break}if(typeof(Pt=oi(qe,"file.type"))!="string"||Ja(Pt).call(Pt,qe.type)!==-1){br.next=7;break}throw new Error('The meta type "'+Pt+'" does not match "'+qe.type+'"');case 7:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){br.next=10;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),br.abrupt("return",this.nosUpload(qe));case 10:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=No.nos),ar=Ta,br.prev=13,br.next=16,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:Yi(qe.type)}});case 16:tr=br.sent,ar=tr.content.mixStoreTokenResTag,br.next=24;break;case 20:throw br.prev=20,br.t0=br.catch(13),this.core.logger.error("uploadFile:: getMixStoreToken error",br.t0),new ru("getMixStoreToken error",br.t0,this.curProvider,this.mixStorePolicy);case 24:return br.abrupt("return",this.curProvider===No.s3?this.s3Upload(qe,ar):this.nosUpload(qe,ar));case 25:case"end":return br.stop()}},Ce,this,[[13,20]])}))},he.nosUpload=function(qe,Ce){var Pt,ar;return Vn(this,void 0,void 0,wr.mark(function tr(){var mr,br,Nr,Fr,jr,Vr,Kr,Sn,Cn,En,In,An,zn;return wr.wrap(function(fo){for(;;)switch(fo.prev=fo.next){case 0:if(mr=oi(this.core,"config.cdn.bucket"),br={tag:qe.nosScenes||mr||"nim",expireSec:qe.nosSurvivalTime},Ce){fo.next=13;break}return fo.prev=3,fo.next=6,this.core.sendCmd("getNosToken",{responseBody:Yi(qe.type),nosToken:br});case 6:Nr=fo.sent,fo.next=13;break;case 9:throw fo.prev=9,fo.t0=fo.catch(3),this.core.logger.error("uploadFile:: getNosToken error",fo.t0),new ru("getNosToken error",fo.t0,1);case 13:return fo.prev=13,jr=Nr?Nr.content.nosToken:Ce,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:jr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:ua.platform}),fo.next=18,this.core.adapters.uploadFile(Hr(Hr({},qe),{nosToken:jr,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:qe.maxSize||this.config.chunkMaxSize}));case 18:Fr=fo.sent,fo.next=42;break;case 21:if(fo.prev=21,fo.t1=fo.catch(13),this.core.logger.error("uploadFile::nos uploadFile error",fo.t1),!Ce){fo.next=41;break}if(this.nosErrorCount!==0){fo.next=37;break}fo.prev=26,this._addCircuitTimer(),fo.next=33;break;case 30:throw fo.prev=30,fo.t2=fo.catch(26),new ru("upload file error",fo.t2,this.curProvider,this.mixStorePolicy,qe.file||qe.filePath);case 33:return this.nosErrorCount=(Pt=this.mixStorePolicy.nosPolicy)===null||Pt===void 0?void 0:Pt.uploadConfig.retryPolicy.retry,fo.abrupt("return",this.uploadFile(qe));case 37:return this.nosErrorCount--,fo.abrupt("return",this.nosUpload(qe,Ce));case 39:fo.next=42;break;case 41:throw new ru("nos uploadFile error",fo.t1,1);case 42:if(Vr=Fr==null?void 0:Fr.type,Kr=Vr&&Ja(Vr).call(Vr,"/")>-1?Lo(Vr).call(Vr,0,Ja(Vr).call(Vr,"/")):"",Sn={image:"imageInfo",video:"vinfo",audio:"vinfo"},Cn=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",Nr?Nr.content.nosToken.objectName:Ce==null?void 0:Ce.objectName),Ce&&Ce.shortUrl&&(Cn=Ce.shortUrl),Sn[Kr]){fo.next=49;break}return fo.abrupt("return",Hr({url:Cn},Fr));case 49:if(fo.prev=49,!(Ja(Cn).call(Cn,"_im_url=1")<0)){fo.next=54;break}return fo.next=53,this.core.adapters.request(Cn+"?"+Sn[Kr],{method:"GET",dataType:"json",timeout:5e3});case 53:En=fo.sent;case 54:fo.next=60;break;case 56:return fo.prev=56,fo.t3=fo.catch(49),this.core.logger.error("uploadFile:: fetch file info error",fo.t3),fo.abrupt("return",Hr({url:Cn},Fr));case 60:if(!En){fo.next=67;break}return In=En.data,An=Sn[Kr]==="imageInfo"?In:(ar=In==null?void 0:In.GetVideoInfo)===null||ar===void 0?void 0:ar.VideoInfo,zn={url:Cn,name:Fr.name,size:Fr.size,ext:Fr.ext,w:An.Width,h:An.Height,orientation:An.Orientation,dur:An.Duration,audioCodec:An.AudioCodec,videoCodec:An.VideoCodec,container:An.Container},fo.abrupt("return",eo(zn,function(Vo,ao){return ao!==void 0}));case 67:return fo.abrupt("return",Hr({url:Cn},Fr));case 68:case"end":return fo.stop()}},tr,this,[[3,9],[13,21],[26,30],[49,56]])}))},he.getNosCdnHost=function(){var qe;return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr=this;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Nr.prev=0,Nr.next=3,this.core.sendCmd("getNosCdnHost");case 3:Pt=Nr.sent,Nr.next=10;break;case 6:return Nr.prev=6,Nr.t0=Nr.catch(0),this.logger.error("getNosCdnHost::error",Nr.t0),Nr.abrupt("return");case 10:if(Pt){Nr.next=12;break}return Nr.abrupt("return");case 12:ar=(qe=Pt==null?void 0:Pt.content)===null||qe===void 0?void 0:qe.nosConfigTag,(tr=Uo(ar==null?void 0:ar.expire))!==0&&ar.cdnDomain?tr===-1?(this.config.cdn.bucket=ar.bucket,this.config.cdn.cdnDomain=ar.cdnDomain,this.config.cdn.objectNamePrefix=ar.objectNamePrefix):(this.config.cdn.bucket=ar.bucket,this.config.cdn.cdnDomain=ar.cdnDomain,this.config.cdn.objectNamePrefix=ar.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){mr.getNosCdnHost()},1e3*tr)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return Nr.stop()}},Ce,this,[[0,6]])}))},he.getGrayscaleConfig=function(qe){var Ce;return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(ua.localStorage)try{ua.localStorage.getItem&&ua.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(ua.localStorage.getItem(this.GRAYKEY))[qe])}catch(Nr){ua.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",Nr)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){br.next=17;break}return br.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(ar=br.sent).content||!ar.content.grayConfigTag){br.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(ar.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(ar.content.grayConfigTag.ttl)}catch(Nr){this.logger.error("getGrayscaleConfig error",Nr)}if(this.grayConfig){br.next=10;break}return br.abrupt("return");case 10:tr=ua.localStorage.getItem(this.GRAYKEY)?JSON.parse(ua.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),tr[qe]=this.grayConfig,ua.localStorage.setItem(this.GRAYKEY,fa(tr)),br.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",ar.content);case 17:if(!(!((Ce=this.grayConfig)===null||Ce===void 0)&&Ce.mixStoreEnable)){br.next=20;break}return br.next=20,this._getMixStorePolicy(qe);case 20:case"end":return br.stop()}},Pt,this)}))},he._getMixStorePolicy=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr,br,Nr,Fr;return wr.wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:if(Pt=new Date().getTime(),ua.localStorage)try{this.mixStorePolicy=JSON.parse(ua.localStorage.getItem(this.MIXSTOREKEY))[qe],this.curProvider=Uo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>Pt&&(tr=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-Pt,this.core.timerManager.addTimer(Xo(ar=this._getMixStorePolicy).call(ar,this,qe),tr))}catch(Kr){ua.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(ua.localStorage.getItem(this.MIXSTOREKEY))[qe]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Kr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=Pt)){Vr.next=30;break}return Vr.prev=3,Vr.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:br=Vr.sent,Nr=br.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(Nr.ttl),this.mixStorePolicy.providers=Nr.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=Uo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=Nr.nosPolicy?JSON.parse(Nr.nosPolicy):null,this.mixStorePolicy.s3Policy=Nr.s3Policy?JSON.parse(Nr.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(Xo(mr=this._getMixStorePolicy).call(mr,this,qe),1e3*this.mixStorePolicy.ttl),Fr=ua.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(ua.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),Fr[qe]=this.mixStorePolicy,ua.localStorage.setItem(this.MIXSTOREKEY,fa(Fr)),Vr.next=30;break;case 23:if(Vr.prev=23,Vr.t0=Vr.catch(3),this.logger.error("getMixStorePolicy error",Vr.t0),this.mixStoreErrorCount!==0){Vr.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(qe),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Vr.stop()}},Ce,this,[[3,23]])}))},he.s3Upload=function(qe,Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr,br,Nr,Fr,jr,Vr,Kr,Sn,Cn=this;return wr.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(!qe.file){In.next=4;break}ar=qe.file,In.next=19;break;case 4:if(typeof qe.fileInput!="string"){In.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((tr=document.getElementById(qe.fileInput))&&tr.files&&tr.files[0])){In.next=11;break}ar=tr.files[0],In.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:In.next=19;break;case 14:if(!(qe.fileInput&&qe.fileInput.files&&qe.fileInput.files[0])){In.next=18;break}ar=qe.fileInput.files[0],In.next=19;break;case 18:throw new Error("Can not get file from fileInput "+qe.fileInput);case 19:if(this.mixStorePolicy.s3Policy){In.next=21;break}throw new Error("dont get s3 policy");case 21:return mr={accessKeyId:Ce.accessKeyId,secretAccessKey:Ce.secretAccessKey,sessionToken:Ce.sessionToken,region:Ce.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},br=this.s3,(Nr=new br).config.update(mr),Fr=decodeURIComponent(Ce.bucket),jr=decodeURIComponent(Ce.objectName),Kr={Bucket:Fr,Key:jr,Body:Vr=ar,Metadata:{token:Ce.token},ContentType:Vr.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Kr),Sn=Nr.upload(Kr),In.abrupt("return",new _o(function(An){var zn=new Date().getTime();Sn.send(function(yo,fo){var Vo,ao;if(yo){Cn.logger.error("uploadFile:","api::s3:upload file failed",yo),Cn.core.reporter.reportTraceStart("exceptions",{user_id:Cn.core.options.account,trace_id:(ao=(Vo=Cn.core)===null||Vo===void 0?void 0:Vo.socket)===null||ao===void 0?void 0:ao.sessionId,start_time:zn,action:1}),Cn.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof yo.status=="number"?yo.status:typeof yo.code=="number"?yo.code:0,description:yo.message||""+yo.code,operation_type:1,target:yo.hostname}),Cn.core.reporter.reportTraceEnd("exceptions",1);try{Cn._addCircuitTimer()}catch(Yn){throw new ru("upload file error",Yn,Cn.curProvider,Cn.mixStorePolicy,qe.file||qe.filePath)}An(Cn.uploadFile(qe))}else{var zr=Cn.mixStorePolicy.s3Policy.cdnSchema;zr=(zr=zr.replace("{cdnDomain}",Cn.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",fo.Key),An({size:Vr.size,name:Vr.name,url:Ce.shortUrl?Ce.shortUrl:zr,ext:Vr.name.split(".")[1]||"unknown"})}})}));case 32:case"end":return In.stop()}},Pt,this)}))},he.getPrivateUrl=function(qe){var Ce;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(qe))return this.logger.error("illegal file url:"+qe),"";var Pt=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(qe);Pt[0];var ar=Pt[1];Pt[2];var tr=Pt[3];Pt[4];var mr=Pt[5];if(Pt[6],Pt[7],(Ce=this.grayConfig)===null||Ce===void 0?void 0:Ce.mixStoreEnable){var br=this._getUrlType(qe);return br===No.s3&&this.mixStorePolicy.s3Policy&&(qe=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",mr)),br===No.nos&&this.mixStorePolicy.nosPolicy&&(qe=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",mr)),qe}var Nr=this.config,Fr=Nr.downloadUrl,jr=Nr.downloadHostList,Vr=Nr.nosCdnEnable,Kr=this.config.cdn.cdnDomain,Sn=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",Cn=decodeURIComponent(mr),En=Ja(Cn).call(Cn,Sn);if(Kr&&En>-1&&Vr)return""+ar+Kr+"/"+Lo(Cn).call(Cn,En);if(Wc(jr).call(jr,tr)&&Wc(mr).call(mr,"/")){var In=Ja(mr).call(mr,"/"),An=mr.substring(0,In),zn=mr.substring(In+1);return Fr.replace("{bucket}",An).replace("{object}",zn)}var yo=Bs(jr).call(jr,function(Vo){return typeof tr=="string"&&Wc(tr).call(tr,Vo)})[0],fo=yo?tr.replace(yo,"").replace(/\W/g,""):null;return fo?Fr.replace("{bucket}",fo).replace("{object}",mr):qe},he.getOriginUrl=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return tr.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:qe}});case 2:return Pt=tr.sent,tr.abrupt("return",Pt.content.nosSafeUrlTag.originUrl);case 4:case"end":return tr.stop()}},Ce,this)}))},he.getFileToken=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr,br,Nr=this;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Jn({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},qe),Pt=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,ar=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,Pt!==String(Sa.dontNeed)||ar!==String(Sa.dontNeed)){jr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(qe.type!==Sa.time){jr.next=17;break}if(!(Pt&&Ja(Pt).call(Pt,String(Sa.time))>=0||ar&&Ja(ar).call(ar,String(Sa.time))>0)){jr.next=13;break}return jr.abrupt("return",this.getFileAuthToken(qe));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:jr.next=33;break;case 17:if(qe.urls&&qe.urls.length){jr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(mr=[],br=[],Qn(tr=qe.urls).call(tr,function(Vr){var Kr=Nr._getUrlType(Vr);Kr===No.nos&&br.push(Vr),Kr===No.s3&&mr.push(Vr)}),(!ar||mr.length!==0&&Ja(ar).call(ar,String(Sa.urls))<0)&&(this.logger.warn("s3 url don't support url token"),mr=[]),(!Pt||br.length!==0&&Ja(Pt).call(Pt,String(Sa.urls))<0)&&(this.logger.warn("nos url don't support url token"),br=[]),mr.length!==0||br.length!==0){jr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(mr.length!==0&&br.length!==0){jr.next=33;break}return qe.urls=fa(qe.urls),jr.abrupt("return",this.getFileAuthToken(qe));case 33:case"end":return jr.stop()}},Ce,this)}))},he.getFileAuthToken=function(qe){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt;return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return tr.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:qe});case 2:return Pt=tr.sent,tr.abrupt("return",Pt.content.mixStoreAuthTokenResTag);case 4:case"end":return tr.stop()}},Ce,this)}))},he._getUrlType=function(qe){var Ce,Pt;return this.mixStorePolicy.nosPolicy&&ro(Ce=this.mixStorePolicy.nosPolicy.dlcdns).call(Ce,function(ar){return Ja(qe).call(qe,ar)>=0})?No.nos:this.mixStorePolicy.s3Policy&&ro(Pt=this.mixStorePolicy.s3Policy.dlcdns).call(Pt,function(ar){return Ja(qe).call(qe,ar)>=0})?No.s3:null},he._addCircuitTimer=function(){var qe=this,Ce=this.mixStorePolicy.providers,Pt=Ce[(Ja(Ce).call(Ce,String(this.curProvider))+1)%Ce.length];if(Pt===Ce[0])throw new Error("uploadFile all policy fail");var ar=oi(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(ar&&ar.retryNext&&Pt&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+Pt),this.curProvider=Uo(Pt),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var tr=this.mixStorePolicy[this.curProvider===No.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!tr||tr===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){qe.logger.log("uploadFile:: upload policy will change,now policy:"+qe.curProvider+" nextProvider:"+Uo(qe.mixStorePolicy.providers[0])),qe.curProvider=Uo(qe.mixStorePolicy.providers[0]),qe.core.timerManager.deleteTimer(qe.circuitTimer)},1e3*tr)}},he.process=function(qe){var Ce=this[qe.cmd+"Handler"];return typeof Ce=="function"?Ce.call(this,qe):qe.error&&!qe.error.ignore?_o.reject(qe.error):_o.resolve(qe)},xe}(),Xi=bs({none:0,normal:1,all:3}),cs=bs({normal:0,advanced:1}),Io=bs({normal:0,owner:1,manager:2}),ma={noVerify:0,needVerify:1,rejectAll:2},mo=bs(ma),ta={needVerify:0,noVerify:1},Ss=bs(ta),vo={manager:0,all:1},Tb=bs(vo),gv={manager:0,all:1},ei=bs(gv),ti={manager:0,all:1},Ya=bs(ti);function ga(xe){var he,Fe=["teamId"],qe=["level","memberNum","memberUpdateTime","createTime","updateTime"],Ce=["valid","validToCurrentUser","mute"],Pt={type:cs,muteType:Xi,joinMode:mo,beInviteMode:Ss,inviteMode:Tb,updateTeamMode:ei,updateExtMode:Ya};xe.bits;var ar=ri(xe,["bits"]);return Qn(Fe).call(Fe,function(tr){ar[tr]&&(ar[tr]=ar[tr].toString())}),Qn(qe).call(qe,function(tr){ar[tr]!==void 0&&(ar[tr]=Uo(ar[tr]))}),Qn(Ce).call(Ce,function(tr){ar[tr]!==void 0&&(ar[tr]=Uo(ar[tr])===1)}),Qn(he=la(Pt)).call(he,function(tr){ar[tr]!==void 0&&(ar[tr]=Pt[tr][ar[tr]]||ar[tr])}),ar}function $a(xe){return xe&&xe.length>0?Fo(xe).call(xe,function(he){return ga(he)}):[]}function Sp(xe){var he,Fe=Hr({},xe),qe=["avatar","name","intro","announcement","ext"],Ce={joinMode:ma,beInviteMode:ta,inviteMode:vo,updateTeamMode:gv,updateExtMode:ti};return Qn(qe).call(qe,function(Pt){Fe[Pt]!==void 0&&(Fe[Pt]=Fe[Pt].toString())}),Qn(he=la(Ce)).call(he,function(Pt){Fe[Pt]!==void 0&&(Fe[Pt]=Ce[Pt][Fe[Pt]])}),Fe}function HC(xe){var he=["teamId","ext","account","nickInTeam"],Fe={};return xe.bitConfigMask!==void 0&&(Fe.bits=Uo(xe.bitConfigMask)),Qn(he).call(he,function(qe){xe[qe]&&(Fe[qe]=xe[qe].toString())}),Fe}function bi(xe){var he,Fe=["teamId"],qe=["joinTime","updateTime","bitConfigMask"],Ce=["active","valid","mute"],Pt={type:Io},ar=xe.bits,tr=ri(xe,["bits"]);return ar!==void 0&&(tr.muteTeam=Uo(ar)===1,tr.bitConfigMask=ar),tr.id=tr.teamId+"-"+tr.account,Qn(Fe).call(Fe,function(mr){tr[mr]&&(tr[mr]=tr[mr].toString())}),Qn(qe).call(qe,function(mr){tr[mr]!==void 0&&(tr[mr]=Uo(tr[mr]))}),Qn(Ce).call(Ce,function(mr){tr[mr]!==void 0&&(tr[mr]=Uo(tr[mr])===1)}),Qn(he=la(Pt)).call(he,function(mr){tr[mr]!==void 0&&(tr[mr]=Pt[mr][tr[mr]]||tr[mr])}),tr}function Tp(xe){return xe&&xe.length>0?Fo(xe).call(xe,function(he){return bi(he)}):[]}function Rf(xe,he,Fe){return Fe===void 0&&(Fe="normal"),{id:xe.teamId+"-"+he,teamId:xe.teamId,account:he,type:Fe,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:xe.memberUpdateTime,updateTime:xe.memberUpdateTime,active:!0,valid:!0}}function hv(xe,he,Fe){return Fe===void 0&&(Fe="normal"),he&&he.length>0?Fo(he).call(he,function(qe){return Rf(xe,qe,Fe)}):[]}var ZC=function(){function xe(Fe){this.core=Fe}var he=xe.prototype;return he.notifyAddSuperTeamMembers=function(qe,Ce){this.core.emit("addSuperTeamMembers",{team:qe,accounts:Ce,members:hv(qe,Ce)})},he.notifyUpdateSuperTeamManagers=function(qe,Ce,Pt,ar){this.core.emit("updateSuperTeamManagers",{team:{teamId:qe,memberUpdateTime:ar},accounts:Ce,isManager:Pt,members:Fo(Ce).call(Ce,function(tr){return{id:qe+"-"+tr,type:"manager",account:tr,updateTime:ar}})})},he.notifyRemoveSuperTeamMembers=function(qe,Ce){this.core.emit("removeSuperTeamMembers",{team:qe,accounts:Ce})},he.notifyTransferSuperTeam=function(qe,Ce,Pt){this.core.emit("transferSuperTeam",{team:qe,from:{id:qe.teamId+"-"+Ce,account:Ce,type:"normal",updateTime:qe.memberUpdateTime},to:{id:qe.teamId+"-"+Pt,account:Pt,type:"owner",updateTime:qe.memberUpdateTime}})},he.notifyUpdateSuperTeamMembersMute=function(qe,Ce,Pt){this.core.emit("updateSuperTeamMembersMute",{team:qe,accounts:Ce,members:Fo(Ce).call(Ce,function(ar){return{id:qe.teamId+"-"+ar,account:ar,teamId:qe.teamId,mute:Pt,updateTime:qe.memberUpdateTime}}),mute:Pt})},xe}(),eM={"21_5":"addSuperTeamMembers","21_6":"removeSuperTeamMembers","21_7":"leaveSuperTeam","21_8":"updateSuperTeamInfo","21_9":"getSuperTeamInfo","21_12":"getSuperTeams","21_15":"getSuperTeamMembers","21_10":"updateMySuperTeamMemberInfo","21_20":"applySuperTeam","21_21":"passSuperTeamApply","21_22":"rejectSuperTeamApply","21_23":"acceptSuperTeamInvite","21_24":"rejectSuperTeamInvite","21_26":"addSuperTeamManagers","21_27":"removeSuperTeamManagers","21_28":"muteSuperTeam","21_29":"muteSuperTeamMembers","21_30":"updateSuperTeamMemberNick","21_31":"transferSuperTeam","21_33":"getSuperTeamMembersByAccounts","21_34":"queryMuteSuperTeamMembers","21_101":"syncCreateSuperTeam","21_109":"syncSuperTeams","21_110":"syncUpdateSuperTeamMember","21_111":"syncMySuperTeamMembers"},Cb={superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,updateTime:11,ext:12,mute:13,invitorAccid:14,joinTime:15}},cl=Is(Cb),tM={getSuperTeamInfo:{sid:21,cid:9,service:"superTeam",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"superTeam",reflectMapper:cl.superTeam}]},getSuperTeams:{sid:21,cid:12,service:"superTeam",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"superTeams",reflectMapper:cl.superTeam},{type:"Number",name:"timetag"}]},updateSuperTeamInfo:{sid:21,cid:8,service:"superTeam",params:[{type:"Property",name:"superTeam",reflectMapper:Cb.superTeam}],response:[{type:"Number",name:"time"}]},addSuperTeamMembers:{sid:21,cid:5,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"time"}]},removeSuperTeamMembers:{sid:21,cid:6,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},addSuperTeamManagers:{sid:21,cid:26,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:21,cid:27,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applySuperTeam:{sid:21,cid:20,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"superTeam",reflectMapper:cl.superTeam}]},transferSuperTeam:{sid:21,cid:31,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},muteSuperTeam:{sid:21,cid:28,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},muteSuperTeamMembers:{sid:21,cid:29,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateSuperTeamMemberNick:{sid:21,cid:30,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Cb.superTeamMember}]},updateMySuperTeamMemberInfo:{sid:21,cid:10,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Cb.superTeamMember}]},getSuperTeamMembersByAccounts:{sid:21,cid:33,service:"superTeam",params:[{type:"StrArray",name:"memberIds"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:cl.superTeamMember}]},getSuperTeamMembers:{sid:21,cid:15,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:cl.superTeamMember}]},queryMuteSuperTeamMembers:{sid:21,cid:34,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:cl.superTeamMember}]},leaveSuperTeam:{sid:21,cid:7,service:"superTeam",params:[{type:"Long",name:"teamId"}]},passSuperTeamApply:{sid:21,cid:21,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:21,cid:22,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:21,cid:23,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:21,cid:24,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncSuperTeams:{sid:21,cid:109,service:"superTeam",response:[{type:"PropertyArray",name:"teams",reflectMapper:cl.superTeam},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},syncCreateSuperTeam:{sid:21,cid:101,service:"superTeam",response:[{type:"Property",name:"superTeam",reflectMapper:cl.superTeam}]},syncUpdateSuperTeamMember:{sid:21,cid:110,service:"superTeam",response:[{type:"Property",name:"teamMember",reflectMapper:cl.superTeamMember}]},syncMySuperTeamMembers:{sid:21,cid:111,ext:"sync",service:"superTeam",response:[{type:"PropertyArray",name:"teamMembers",reflectMapper:cl.superTeamMember},{type:"Number",name:"timetag"}]}},rM=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"superTeam",qe)||this).mySuperTeamMembersMap=new _c,Ce.service=new ZC(qe),ps({cmdMap:eM,cmdConfig:tM}),Ce.core.eventBus.on("team/onNotification",function(Pt){return Ce.notificationHandler(Pt)}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.mergeMySuperTeamMembers=function(Ce){var Pt=this;Qn(Ce).call(Ce,function(ar){var tr=ar.teamId,mr=Pt.mySuperTeamMembersMap.get(tr),br=Hr({},mr,ar);Pt.mySuperTeamMembersMap.set(tr,br)})},Fe.getSuperTeamInfo=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),br.next=3,this.core.sendCmd("getSuperTeamInfo",{teamId:Ce.teamId});case 3:return ar=br.sent,tr=ar.content.superTeam,br.abrupt("return",ga(tr));case 6:case"end":return br.stop()}},Pt,this)}))},Fe.getSuperTeams=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.next=2,this.core.sendCmd("getSuperTeams",{timetag:0});case 2:return Pt=mr.sent,ar=Pt.content.superTeams,mr.abrupt("return",$a(ar));case 5:case"end":return mr.stop()}},Ce,this)}))},Fe.updateSuperTeamInfo=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!1,required:!1},announcement:{type:"string",allowEmpty:!1,required:!1},avatar:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),ar=Sp(Ce),mr.next=4,this.core.sendCmd("updateSuperTeamInfo",{superTeam:ar});case 4:return mr.abrupt("return",ga(ar));case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.addSuperTeamMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),tr.next=3,this.core.sendCmd("addSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,ps:Ce.ps||"",attach:Ce.ext||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.removeSuperTeamMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},Ce),tr.next=3,this.core.sendCmd("removeSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.addSuperTeamManagers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),tr.next=3,this.core.sendCmd("addSuperTeamManagers",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.removeSuperTeamManagers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),tr.next=3,this.core.sendCmd("removeSuperTeamManagers",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.applySuperTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),mr.next=3,this.core.sendCmd("applySuperTeam",{teamId:Ce.teamId,ps:Ce.ps||""});case 3:return ar=mr.sent,mr.abrupt("return",ga(ar.content.superTeam));case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.transferSuperTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("transferSuperTeam",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.muteSuperTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("muteSuperTeam",{teamId:Ce.teamId,mute:Ce.mute?1:0});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.muteSuperTeamMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string"},mute:{type:"boolean"}},Ce),tr.next=3,this.core.sendCmd("muteSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,mute:Ce.mute?1:0});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.updateMemberNick=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1}},Ce),ar=HC({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,account:Ce.account}),br.next=4,this.core.sendCmd("updateSuperTeamMemberNick",{teamMember:ar});case 4:return tr=bi(Hr({updateTime:new Date().getTime()},ar)),br.abrupt("return",tr);case 6:case"end":return br.stop()}},Pt,this)}))},Fe.updateMyMemberInfo=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!1,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},Ce),ar=HC({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,bitConfigMask:Ce.bitConfigMask,ext:Ce.ext}),Nr.next=4,this.core.sendCmd("updateMySuperTeamMemberInfo",{teamMember:ar});case 4:return tr=bi(Hr({updateTime:new Date().getTime(),account:this.core.account},ar)),this.mergeMySuperTeamMembers([tr]),this.core.emit("updateSuperTeamMember",tr),mr=Dc(this.mySuperTeamMembersMap.get(tr.teamId)),this.core.emit("mySuperTeamMembers",[mr]),Nr.abrupt("return",tr);case 10:case"end":return Nr.stop()}},Pt,this)}))},Fe.getSuperTeamMembersByAccounts=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:20,min:1}},Ce),mr=Fo(tr=Ce.accounts).call(tr,function(jr){return Ce.teamId+"|"+jr}),Fr.next=4,this.core.sendCmd("getSuperTeamMembersByAccounts",{memberIds:mr});case 4:return br=Fr.sent,Fr.abrupt("return",Tp((Pt=br.content)===null||Pt===void 0?void 0:Pt.superTeamMembers));case 6:case"end":return Fr.stop()}},ar,this)}))},Fe.getSuperTeamMembers=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,max:1e3,required:!1},reverse:{type:"boolean",required:!1}},Ce),br.next=3,this.core.sendCmd("getSuperTeamMembers",Hr({joinTime:0,limit:100,reverse:!1},Ce));case 3:return tr=br.sent,br.abrupt("return",Tp((Pt=tr.content)===null||Pt===void 0?void 0:Pt.superTeamMembers));case 5:case"end":return br.stop()}},ar,this)}))},Fe.queryMuteMembers=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},Ce),br.next=3,this.core.sendCmd("queryMuteSuperTeamMembers",Hr({limit:100,joinTime:0,reverse:!1},Ce));case 3:return ar=br.sent,tr=ar.content,br.abrupt("return",Tp(tr.superTeamMembers));case 6:case"end":return br.stop()}},Pt,this)}))},Fe.leaveSuperTeam=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("leaveSuperTeam",{teamId:Ce.teamId});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.passSuperTeamApply=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("passSuperTeamApply",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.rejectSuperTeamApply=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),tr.next=3,this.core.sendCmd("rejectSuperTeamApply",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.acceptSuperTeamInvite=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),tr.next=3,this.core.sendCmd("acceptSuperTeamInvite",Ce);case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.rejectSuperTeamInvite=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),tr.next=3,this.core.sendCmd("rejectSuperTeamInvite",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.syncSuperTeamsHandler=function(Ce){var Pt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{superTeams:Uo(Pt.timetag)});var ar=Pt==null?void 0:Pt.superTeams;if(ar&&ar.length){var tr=$a(ar);this.core.emit("superTeams",tr)}},Fe.syncCreateSuperTeamHandler=function(Ce){var Pt=Ce.content,ar=ga(Pt==null?void 0:Pt.superTeam),tr=Rf(ar,ar.owner,"owner");this.core.emit("createSuperTeam",ar,tr)},Fe.syncUpdateSuperTeamMemberHandler=function(Ce){var Pt=Ce.content,ar=bi(Pt==null?void 0:Pt.teamMember);ar.updateTime||(ar.updateTime=new Date().getTime()),this.mergeMySuperTeamMembers([ar]),this.core.emit("updateSuperTeamMember",ar);var tr=Dc(this.mySuperTeamMembersMap.get(ar.teamId));this.core.emit("mySuperTeamMembers",[tr])},Fe.syncMySuperTeamMembersHandler=function(Ce){var Pt,ar=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{mySuperTeamMembers:Uo(ar.timetag)});var tr=ar==null?void 0:Fo(Pt=ar.teamMembers).call(Pt,function(mr){return bi(mr)});this.mergeMySuperTeamMembers(tr),this.core.emit("mySuperTeamMembers",Dc(tr))},Fe.notificationHandler=function(Ce){var Pt=Ce.attach,ar=Ce.scene,tr=Ce.from,mr=Ce.to,br=Ce.time,Nr=Ce.idServer,Fr=Ce.idClient,jr=Pt.team,Vr=Pt.account,Kr=Pt.accounts,Sn=Pt.type;if(ar==="superTeam")switch(this.core.options.debugLevel==="debug"?this.logger.debug("superTeam::recvNotification",Nr,Fr,Pt):this.logger.log("superTeam::recvNotification",Nr,Fr,mr,Sn,Vr,Kr),Sn){case"updateSuperTeam":jr.updateTime=br,this.core.emit("updateSuperTeam",jr);break;case"addSuperTeamMembers":this.service.notifyAddSuperTeamMembers(jr,Kr);break;case"acceptSuperTeamInvite":this.service.notifyAddSuperTeamMembers(jr,[tr]);break;case"passSuperTeamApply":this.service.notifyAddSuperTeamMembers(jr,[Vr]);break;case"addSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(mr,Kr,!0,br);break;case"removeSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(mr,Kr,!1,br);break;case"removeSuperTeamMembers":this.service.notifyRemoveSuperTeamMembers(jr,Kr);break;case"leaveSuperTeam":this.service.notifyRemoveSuperTeamMembers(jr,[tr]);break;case"dismissSuperTeam":this.core.emit("dismissSuperTeam",{teamId:mr});break;case"transferSuperTeam":this.service.notifyTransferSuperTeam(jr,tr,Vr);break;case"updateSuperTeamMembersMute":this.service.notifyUpdateSuperTeamMembersMute(jr,Kr,Pt.mute)}},he}(Ps),nM={"13_1":"getChatroomAddress","24_1":"getQChatAddress"},oM={getChatroomAddress:{sid:13,cid:1,service:"plugin",params:[{type:"Long",name:"chatroomId"},{type:"Boolean",name:"isWeixinApp"},{type:"Number",name:"ipType"}],response:[{type:"StrArray",name:"address"}]},getQChatAddress:{sid:24,cid:1,service:"plugin",params:[{type:"Property",name:"getQChatAddressTag",reflectMapper:{ipType:1}}],response:[{type:"StrArray",name:"address"}]}},aM=function(xe){function he(qe){var Ce;return(Ce=xe.call(this,"plugin",qe)||this).core=qe,ps({cmdMap:nM,cmdConfig:oM}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.getChatroomAddress=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({chatroomId:{type:"string",allowEmpty:!1},ipType:{type:"number",required:!1}},Ce),mr.next=3,this.core.sendCmd("getChatroomAddress",{chatroomId:Ce.chatroomId,isWeixinApp:ua.platform==="WXAPP",ipType:Ce.ipType||0});case 3:return ar=mr.sent,mr.abrupt("return",ar.content.address);case 5:case"end":return mr.stop()}},Pt,this)}))},Fe.getQChatAddress=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar;return wr.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return Jn({ipType:{type:"number",required:!1}},Ce),mr.next=3,this.core.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:(Ce==null?void 0:Ce.ipType)||0}});case 3:return ar=mr.sent,mr.abrupt("return",ar.content.address);case 5:case"end":return mr.stop()}},Pt,this)}))},he}(Ps),sM={"7_19":"nimQueryCloudSessionList","7_20":"nimQueryCloudSession","7_21":"nimUpdateCloudSession","7_22":"nimDeleteCloudSessionList","7_121":"nimMultiSyncUpdateCloudSession"},vv={sessionReqTag:{minTimestamp:1,maxTimestamp:2,includedLastMsg:3,limit:4,hasMore:5},sessionTag:{sessionId:1,updateTime:2,ext:3,lastMsg:4,lastMsgType:5}},Mb=Is(vv),iM={nimQueryCloudSessionList:{sid:7,cid:19,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:vv.sessionReqTag}],response:[{type:"Property",name:"tag",reflectMapper:Mb.sessionReqTag},{type:"PropertyArray",name:"sessions",reflectMapper:Mb.sessionTag}]},nimQueryCloudSession:{sid:7,cid:20,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:vv.sessionTag}],response:[{type:"Property",name:"session",reflectMapper:Mb.sessionTag}]},nimUpdateCloudSession:{sid:7,cid:21,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:vv.sessionTag}]},nimDeleteCloudSessionList:{sid:7,cid:22,service:"cloudSession",params:[{type:"PropertyArray",name:"tags",reflectMapper:vv.sessionTag}]},nimMultiSyncUpdateCloudSession:{sid:7,cid:121,service:"cloudSession",response:[{type:"Property",name:"session",reflectMapper:Mb.sessionTag}]}},cM={sessionId:{type:"string"},updateTime:{type:"number"},ext:{type:"string"},lastMsg:{type:"object"},lastMsgType:{type:"number"}};function zC(xe,he,Fe){var qe=xi(cM,xe),Ce=na(qe.sessionId,"|"),Pt=Ce.accid,ar=Ce.scene;if(qe.sessionId=ar+"-"+Pt,qe.lastMsg){var tr=qe.lastMsgType===1;qe.lastMsgInfo=tr?{isLastMsgRecalled:tr,revokedMsg:vp(nc(qe.lastMsg,Kl.sysMsg),Fe)}:{isLastMsgRecalled:tr,lastMsg:lc(nc(qe.lastMsg,Ns.msg),{account:he})}}return delete qe.lastMsg,delete qe.lastMsgType,qe}function lM(xe,he,Fe){return xe&&xe.length>0?Fo(xe).call(xe,function(qe){return zC(qe,he,Fe)}):[]}var JC,ll,yv,uM=function(xe){function he(qe){var Ce;return Ce=xe.call(this,"cloudSession",qe)||this,ps({cmdMap:sM,cmdConfig:iM}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.queryCloudSessionList=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({minTimestamp:{type:"number",min:0,required:!1},maxTimestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},includedLastMsg:{type:"boolean",required:!1}},Ce),(tr=Hr({limit:100,includedLastMsg:!0},Ce)).includedLastMsg=TT.boolean(Ce,"includedLastMsg"),jr.next=5,this.core.sendCmd("nimQueryCloudSessionList",{tag:tr});case 5:return mr=jr.sent,br=((Pt=mr.content)===null||Pt===void 0?void 0:Pt.tag)||{},Nr=mr.content.sessions,jr.abrupt("return",{hasMore:+br.hasMore>0,sessionList:lM(Nr,this.core.account,this.logger)});case 9:case"end":return jr.stop()}},ar,this)}))},Fe.queryCloudSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return Jn({sessionId:{type:"string",allowEmpty:!1}},Ce),ar=na(Ce.sessionId,"-"),tr=ar.accid,mr=ar.scene,Fr.next=4,this.core.sendCmd("nimQueryCloudSession",{tag:{sessionId:mr==="superTeam"?"super_team|"+tr:mr+"|"+tr}});case 4:return br=Fr.sent,Fr.abrupt("return",zC(br.content.session,this.core.account,this.logger));case 6:case"end":return Fr.stop()}},Pt,this)}))},Fe.updateCloudSession=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({sessionId:{type:"string",allowEmpty:!1},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),ar=na(Ce.sessionId,"-"),tr=ar.accid,mr=ar.scene,Nr.next=4,this.core.sendCmd("nimUpdateCloudSession",{tag:{sessionId:mr==="superTeam"?"super_team|"+tr:mr+"|"+tr,ext:Ce.ext}});case 4:case"end":return Nr.stop()}},Pt,this)}))},Fe.deleteCloudSessionList=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({sessionIdList:{type:"array",itemType:"string"}},Ce),tr=Fo(ar=Ce.sessionIdList).call(ar,function(Nr){var Fr=na(Nr,"-"),jr=Fr.accid,Vr=Fr.scene;return{sessionId:Vr==="superTeam"?"super_team|"+jr:Vr+"|"+jr}}),br.next=4,this.core.sendCmd("nimDeleteCloudSessionList",{tags:tr});case 4:case"end":return br.stop()}},Pt,this)}))},Fe.nimMultiSyncUpdateCloudSessionHandler=function(Ce){var Pt=zC(Ce.content.session,this.core.account,this.logger);this.core.emit("multiSyncUpdateCloudSession",Pt)},he}(Ps);(function(xe){xe[xe.audio=1]="audio",xe[xe.video=2]="video",xe[xe.custom=3]="custom"})(JC||(JC={})),function(xe){xe[xe.kClose=1]="kClose",xe[xe.kJoin=2]="kJoin",xe[xe.kInvite=3]="kInvite",xe[xe.kCancelInvite=4]="kCancelInvite",xe[xe.kReject=5]="kReject",xe[xe.kAccept=6]="kAccept",xe[xe.kLeave=7]="kLeave",xe[xe.kCustom=8]="kCustom"}(ll||(ll={})),function(xe){xe[xe.kDefault=0]="kDefault",xe[xe.kLeave=1]="kLeave",xe[xe.kSelfSync=3]="kSelfSync"}(yv||(yv={}));var WC={needPush:{type:"boolean",required:!1},pushTitle:{type:"string",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needPushBadge:{type:"boolean",required:!1}},dM={"15_1":"signalingCreate","15_2":"signalingDelay","15_3":"signalingClose","15_4":"signalingJoin","15_5":"signalingLeave","15_6":"signalingInvite","15_7":"signalingCancelInvite","15_8":"signalingReject","15_9":"signalingAccept","15_10":"signalingSendCustomCommand","15_11":"signalingRecvNotification","15_12":"signalingMultiSyncNotification","15_13":"signalingSyncNotification","15_14":"singalingSyncChannels","15_15":"signalingQueryInfo","15_16":"signalingCallEx","15_17":"signalingJoinAndAccept"},Ii={avSignalTag:Hr({type:1,name:2,channelId:3,createTime:4,expireTime:5,creatorAccid:6,ext:7,invalid:8,fromAccid:10,toAccid:11,requestId:12,members:18,attach:19,attachExt:20,needOffline:21,msgId:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},{needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needPushBadge:17})},Uc=Is(Ii),pM={signalingCreate:{sid:15,cid:1,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingDelay:{sid:15,cid:2,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingClose:{sid:15,cid:3,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingJoin:{sid:15,cid:4,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingLeave:{sid:15,cid:5,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}]},signalingInvite:{sid:15,cid:6,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}]},signalingCancelInvite:{sid:15,cid:7,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}]},signalingReject:{sid:15,cid:8,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}]},signalingAccept:{sid:15,cid:9,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}]},signalingSendCustomCommand:{sid:15,cid:10,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}]},signalingRecvNotification:{sid:15,cid:11,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingMultiSyncNotification:{sid:15,cid:12,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingSyncNotification:{sid:15,cid:13,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:Uc.avSignalTag}]},singalingSyncChannels:{sid:15,cid:14,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:Uc.avSignalTag}]},signalingQueryInfo:{sid:15,cid:15,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingCallEx:{sid:15,cid:16,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingJoinAndAccept:{sid:15,cid:17,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ii.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Uc.avSignalTag}]},signalingBatchMarkRead:{sid:4,cid:5,isNoResponse:!0,service:"signaling",params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]}},kb={type:{type:"number"},createTime:{type:"number"},expireTime:{type:"number"},invalid:{type:"boolean"},pushInfo:WC,pluginSetting:{nertcInfo:{nertcChannelName:{type:"string"},nertcTokenTtl:{type:"number"},nertcToken:{type:"string"},nertcJoinRoomQueryParamMap:{type:"string"},callStatus:{type:"number"}}},attach:{type:"object"},members:{type:"object"},needOffline:{type:"boolean"},uid:{type:"number"},time:{type:"number"}};function Cp(xe){var he,Fe=xi(kb,xe),qe=[];return Fe.members&&Fe.members.length>0&&(qe=Fo(he=Fe.members).call(he,function(Ce){return function(ar){return xi(kb,nc(ar,{1:"accid",2:"uid",3:"createTime",4:"expireTime"}))}(Ce)}),delete Fe.members),qe.length>0?{channelInfo:Fe,memberList:qe}:{channelInfo:Fe}}function qc(xe){return Kd(kb,xe)}var fM=function(xe){function he(qe){var Ce;return(Ce=xe.call(this)||this).timer=0,Ce.pollingInterval=12e4,Ce.name="signaling",Ce.logger=qe.logger,Ce.core=qe,Ce.channels={},ps({cmdMap:dM,cmdConfig:pM}),Ce}ea(he,xe);var Fe=he.prototype;return Fe.callEx=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({type:{type:"number"},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:WC},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},Ce),jr.next=3,this.core.sendCmd("signalingCallEx",{tag:qc(Ce)});case 3:return tr=jr.sent,mr=((Pt=tr.content)===null||Pt===void 0?void 0:Pt.data)||{},br=Cp(mr),this.channels[br.channelInfo.channelId]=Dc(br.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Xo(Nr=this.aotoDelay).call(Nr,this),this.pollingInterval,-1)),jr.abrupt("return",br);case 9:case"end":return jr.stop()}},ar,this)}))},Fe.joinAndAccept=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr,Fr,jr;return wr.wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},uid:{type:"number",required:!1},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},Ce),tr=Ce.fromAccid,(mr=ri(Ce,["fromAccid"])).toAccid=tr,Kr.next=5,this.core.sendCmd("signalingJoinAndAccept",{tag:qc(mr)});case 5:return br=Kr.sent,Nr=((Pt=br.content)===null||Pt===void 0?void 0:Pt.data)||{},Fr=Cp(Nr),this.channels[Fr.channelInfo.channelId]=Dc(Fr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Xo(jr=this.aotoDelay).call(jr,this),this.pollingInterval,-1)),Kr.abrupt("return",Fr);case 11:case"end":return Kr.stop()}},ar,this)}))},Fe.create=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({type:{type:"number"},ext:{type:"string",required:!1}},Ce),Nr.next=3,this.core.sendCmd("signalingCreate",{tag:qc(Ce)});case 3:return tr=Nr.sent,mr=((Pt=tr.content)===null||Pt===void 0?void 0:Pt.data)||{},Nr.abrupt("return",Cp(mr));case 6:case"end":return Nr.stop()}},ar,this)}))},Fe.close=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),tr.next=3,this.core.sendCmd("signalingClose",{tag:qc(Ce)});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.queryInfo=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr;return wr.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Jn({name:{type:"string",allowEmpty:!1}},Ce),Nr.next=3,this.core.sendCmd("signalingQueryInfo",{tag:Ce});case 3:return tr=Nr.sent,mr=((Pt=tr.content)===null||Pt===void 0?void 0:Pt.data)||{},Nr.abrupt("return",Cp(mr));case 6:case"end":return Nr.stop()}},ar,this)}))},Fe.join=function(Ce){var Pt;return Vn(this,void 0,void 0,wr.mark(function ar(){var tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},uid:{type:"number",min:0,required:!1},needOffline:{type:"boolean",required:!1}},Ce),jr.next=3,this.core.sendCmd("signalingJoin",{tag:qc(Ce)});case 3:return tr=jr.sent,mr=((Pt=tr.content)===null||Pt===void 0?void 0:Pt.data)||{},br=Cp(mr),this.channels[br.channelInfo.channelId]=Dc(br.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(Xo(Nr=this.aotoDelay).call(Nr,this),this.pollingInterval,-1)),jr.abrupt("return",br);case 9:case"end":return jr.stop()}},ar,this)}))},Fe.aotoDelay=function(){return Vn(this,void 0,void 0,wr.mark(function Ce(){var Pt,ar,tr,mr,br;return wr.wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:if((Pt=la(this.channels)).length!==0){Fr.next=4;break}return this.timer&&this.core.timerManager.deleteTimer(this.timer),Fr.abrupt("return");case 4:this.logger.log("signling:autoDelay",Pt),ar=0;case 6:if(!(ar<Pt.length)){Fr.next=23;break}return tr=Pt[ar],Fr.prev=8,Fr.next=11,this.core.sendCmd("signalingDelay",{tag:{channelId:tr}});case 11:mr=Fr.sent,br=Cp(mr.content.data),this.channels[tr]=br.channelInfo,Fr.next=20;break;case 16:Fr.prev=16,Fr.t0=Fr.catch(8),this.logger.warn("signling:autoDelay "+tr+" failed",Fr.t0),delete this.channels[tr];case 20:ar++,Fr.next=6;break;case 23:case"end":return Fr.stop()}},Ce,this,[[8,16]])}))},Fe.leave=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),tr.next=3,this.core.sendCmd("signalingLeave",{tag:qc(Ce)});case 3:delete this.channels[Ce.channelId];case 4:case"end":return tr.stop()}},Pt,this)}))},Fe.invite=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:WC}},Ce),tr.next=3,this.core.sendCmd("signalingInvite",{tag:qc(Ce)});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.cancelInvite=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),tr.next=3,this.core.sendCmd("signalingCancelInvite",{tag:qc(Ce)});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.reject=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr;return wr.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),ar=Ce.fromAccid,(tr=ri(Ce,["fromAccid"])).toAccid=ar,br.next=5,this.core.sendCmd("signalingReject",{tag:qc(tr)});case 5:case"end":return br.stop()}},Pt,this)}))},Fe.accept=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){var ar,tr,mr,br,Nr;return wr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},autoJoin:{type:"boolean",required:!1},uid:{type:"number",min:0,required:!1},joinAttachExt:{type:"string",required:!1}},Ce),ar=Ce.autoJoin,tr=Ce.joinAttachExt,mr=Ce.fromAccid,(br=ri(Ce,["autoJoin","joinAttachExt","fromAccid"])).toAccid=mr,jr.next=5,this.core.sendCmd("signalingAccept",{tag:qc(br)});case 5:if(this.logger.log("Signaling:accept, accept success, autoJoin "+Ce.autoJoin),!ar){jr.next=10;break}return Nr={channelId:Ce.channelId,needOffline:Ce.needOffline,attachExt:tr,uid:Ce.uid},jr.next=10,this.join(Nr);case 10:case"end":return jr.stop()}},Pt,this)}))},Fe.sendCustomCommand=function(Ce){return Vn(this,void 0,void 0,wr.mark(function Pt(){return wr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return Jn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},attachExt:{type:"string",required:!1}},Ce),tr.next=3,this.core.sendCmd("signalingSendCustomCommand",{tag:qc(Ce)});case 3:case"end":return tr.stop()}},Pt,this)}))},Fe.signalingRecvNotificationHandler=function(Ce){var Pt=typeof oi(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;Ce.content.data.msgId=Pt,this.doNotify(Ce.content.data),Pt&&Uo(Pt)&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:[Pt]})},Fe.signalingMultiSyncNotificationHandler=function(Ce){this.doNotify(Ce.content.data,yv.kSelfSync)},Fe.doNotify=function(Ce,Pt){Pt===void 0&&(Pt=yv.kDefault);var ar=function(Cn,En){En===void 0&&(En=yv.kDefault);var In=xi(kb,Cn),An=In.attach,zn=In.time,yo=In.msgId;In.fromAccid,In.toAccid,In.members,In.requestId,In.pushInfo;var fo=ri(In,["attach","time","msgId","fromAccid","toAccid","members","requestId","pushInfo"]),Vo=An.type,ao=In.ext;return delete In.attach,{metaData:{eventType:Vo,channelInfo:fo,feature:En,ext:ao,time:zn,msgId:yo},rawData:In}}(Ce,Pt),tr=ar.metaData,mr=ar.rawData,br=mr.fromAccid,Nr=mr.toAccid,Fr=mr.members,jr=mr.requestId,Vr=mr.pushInfo,Kr=mr.msgId;switch(tr.eventType){case ll.kClose:this.emit("signalingClose",{fromAccid:br,metaData:tr});break;case ll.kJoin:this.emit("signalingJoin",{member:Fr,metaData:tr});break;case ll.kInvite:this.emit("signalingInvite",{fromAccid:br,toAccid:Nr,requestId:jr,pushInfo:Vr,metaData:tr});break;case ll.kCancelInvite:this.emit("signalingCancelInvite",{fromAccid:br,toAccid:Nr,requestId:jr,metaData:tr});break;case ll.kReject:this.emit("signalingReject",{toAccid:Nr,requestId:jr,metaData:tr});break;case ll.kAccept:this.emit("signalingAccept",{toAccid:Nr,requestId:jr,metaData:tr});break;case ll.kLeave:this.emit("signalingLeave",{fromAccid:br,metaData:tr});break;case ll.kCustom:this.emit("signalingCustomCommand",{fromAccid:br,metaData:tr});break;default:this.logger.warn("signaling:notification, no such a type "+tr.eventType,mr)}return Kr},Fe.signalingSyncNotificationHandler=function(Ce){var Pt,ar,tr=this;if(Ce.content.datas&&Ce.content.datas.length>0){var mr=Bs(Pt=Fo(ar=Ce.content.datas).call(ar,function(br){return tr.doNotify(br)})).call(Pt,function(br){return br});mr.length>0&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:mr})}},Fe.singalingSyncChannelsHandler=function(Ce){var Pt;if(this.timer=0,this.channels={},Ce.content.datas&&Ce.content.datas.length>0){var ar=Fo(Pt=Ce.content.datas).call(Pt,function(tr){return Cp(tr)});this.emit("singalingSyncChannels",ar)}},Fe.process=function(Ce){var Pt=this[Ce.cmd+"Handler"];return typeof Pt=="function"?(Pt.call(this,Ce),_o.resolve(Ce)):Ce.error&&!Ce.error.ignore?_o.reject(Ce.error):_o.resolve(Ce)},he}(hi.EventEmitter);return ss.setAdapters(Iy),ss.registerService($y,"auth"),ss.registerService(Jy,"msg"),ss.registerService(zT,"misc"),ss.registerService(eb,"user"),ss.registerService(CC,"session"),ss.registerService(FC,"team"),ss.registerService(DC,"systemMessage"),ss.registerService(qC,"friend"),ss.registerService(pe,"event"),ss.registerService(kt,"msgExtend"),ss.registerService(jn,"msgLog"),ss.registerService(co,"passThrough"),ss.registerService(Qo,"cloudStorage"),ss.registerService(rM,"superTeam"),ss.registerService(yf,"sync"),ss.registerService(aM,"plugin"),ss.registerService(uM,"cloudSession"),ss.registerService(fM,"signaling"),ss})})(NIM_BROWSER_SDK);var NIM_BROWSER_SDKExports=NIM_BROWSER_SDK.exports;const NIMSDK=getDefaultExportFromCjs(NIM_BROWSER_SDKExports),elBadge="",elMessage="",_hoisted_1$9={class:"mt10"},_hoisted_2$4={style:{color:"gray","font-size":"small"}},_hoisted_3$4={class:"mt10"},_hoisted_4$3=createBaseVNode("label",null,"",-1),_hoisted_5$2={style:{color:"gray"}},_hoisted_6={class:"mt10"},_hoisted_7=createBaseVNode("label",null,"",-1),_hoisted_8={style:{color:"gray"}},_hoisted_9={class:"mt10"},_hoisted_10=createBaseVNode("label",null,"",-1),_hoisted_11={style:{color:"gray"}},_hoisted_12=createBaseVNode("span",{title:""},"",-1),_hoisted_13={style:{"margin-top":"-3px"}},_hoisted_14={style:{cursor:"pointer"}},_hoisted_15=["onClick"],_hoisted_16=createBaseVNode("span",{title:""},"",-1),_hoisted_17=createBaseVNode("label",null,"",-1),_hoisted_18=createBaseVNode("label",null,"",-1),_hoisted_19={key:0},_hoisted_20=createBaseVNode("label",null,"",-1),_hoisted_21=createBaseVNode("span",{title:""},"",-1),_hoisted_22={style:{"margin-top":"-3px","margin-left":"-20px"}},_hoisted_23=["onClick"],_hoisted_24={key:1},_hoisted_25=createBaseVNode("div",null,[createBaseVNode("span",null,"1QQ"),createBaseVNode("div",{class:"mt5"},[createBaseVNode("a",{href:"https://llonebot.github.io/zh-CN/",target:"_blank"},"LLOneBot"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}},"(>=300m)")]),createBaseVNode("div",{class:"mt5"},[createBaseVNode("a",{href:"https://napneko.github.io/zh-CN/",target:"_blank"},"NapCatBot"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}},"LLOneBot(<=100m)")])],-1),_hoisted_26=createBaseVNode("div",{class:"mt10"},[createBaseVNode("span",null,"2"),createBaseVNode("a",{href:"https://gitee.com/jaffoo/ParkerBot#",target:"_blank"},""),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}})],-1),_hoisted_27=createBaseVNode("div",{class:"mt10"},[createBaseVNode("span",null,"3QQ"),createBaseVNode("span",{style:{color:"blue"}},"1615842006")],-1),_hoisted_28={style:{"margin-top":"-3px","margin-left":"-20px"}},_hoisted_29={style:{cursor:"pointer"}},_hoisted_30=["onClick"],_sfc_main$e=defineComponent({__name:"index",props:{enable:{type:Object,default:{bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},setup(t){const r=t,e=ref(),n=ref(""),g=ref(),y=ref(),i=ref(),k=ref(!1),$=ref(""),L=ref("00"),V=ref(),z=ref(),re=ref({pic:{total:0,today:0,old:0},plugin:{total:0,using:0,unusing:0},log:{total:0,idol:0,other:0}}),ie=ref(),ue=ref(),le=ref(),oe=ref(),ae=ref(),Ue=ref("help"),de=async()=>{var Pr,_r;if(Object.values(r.enable).every(Mr=>Mr===!1)){ElMessageBox.alert("");return}n.value="",(!oe.value||oe.value<0)&&er(),(!ae.value||ae.value<0)&&or(),Ve();let Tr=await startBot();if(Tr.success)ElMessage.success(""),k.value=!0,n.value="",$.value=g.value,r.enable.bd&&((_r=(Pr=e.value)==null?void 0:Pr.bd)!=null&&_r.saveAliyunDisk)&&await startAliYunPan();else{let Mr=Tr.msg??"";ElMessage.error(Mr),logApi().addSystem(Mr),lr(),n.value=""}r.enable.kd&&(await $e(),Lt())},_e=()=>{n.value="",ElMessageBox.confirm("","",{type:"warning",confirmButtonText:"",cancelButtonText:""}).then(async()=>{await startBot(!1),ElMessage.success(""),k.value=!1,n.value=""}).catch(()=>{k.value=!0,n.value=""})},Ve=()=>{ie.value&&ie.value.destroy(),ue.value&&ue.value.destroy(),le.value&&le.value.disconnect()},$e=async()=>{if(Ve(),e.value&&e.value.kd)try{ie.value=new NIMSDK({appkey:atob(e.value.kd.appKey),account:e.value.kd.account,token:e.value.kd.token}),await ie.value.connect(),ue.value=new QChatSDK({appkey:atob(e.value.kd.appKey),account:e.value.kd.account,token:e.value.kd.token,linkAddresses:await ie.value.plugin.getQChatAddress({ipType:2})}),ue.value.on("logined",jt),ue.value.on("message",Et),ue.value.on("disconnect",ir),await ue.value.login()}catch(pr){throw pr}},Lt=()=>{le.value=new NimChatroomSocket({liveId:e.value.kd.liveRoomId,onMessage:ur}),le.value.init(e.value.kd.appKey)},jt=async function(){var pr=`${e.value.kd.idolName}`;if(logApi().addSystem(pr),ue.value==null)throw"";if((await ue.value.qchatServer.subscribeAllChannel({type:1,serverIds:[e.value.kd.serverId]})).failServerIds.length){pr=`${e.value.kd.idolName}`,logApi().addSystem(pr);return}pr=`${e.value.kd.idolName}`,logApi().addSystem(pr)},Et=async function(pr){var Pr,_r,Mr,rr;pr.fromType=1,pr.ext=JSON.parse(pr.ext),pr.channelName=await Dt(pr.channelId),pr.time=dayjs(pr.time).format("YYYY-MM-DD HH:mm:ss"),await postMsg({content:JSON.stringify(pr)});let Tr={type:"text",name:pr.ext.user.nickName,time:pr.time,avatar:"https://source3.48.cn"+pr.ext.user.avatar,color:"#409eff",channel:pr.channelName,idol:(_r=(Pr=e.value)==null?void 0:Pr.kd)==null?void 0:_r.idolName,roleId:pr.ext.user.roleId};pr.type=="text"?Tr.content=pr.body:pr.type=="image"?(Tr.type="pic",Tr.url=(Mr=pr==null?void 0:pr.attach)==null?void 0:Mr.url):pr.type=="video"||pr.type=="audio"?(Tr.type="link",Tr.url=(rr=pr==null?void 0:pr.attach)==null?void 0:rr.url):Tr.content="",logApi().add(Tr),Tr.roleId==3&&lr()},ir=function(...pr){logApi().addSystem("")},ur=function(pr,Tr){Tr.forEach(Pr=>{postMsg({content:JSON.stringify(Pr)},1)})},Dt=async function(pr){if(ue.value==null)return;const Tr=await ue.value.qchatChannel.getChannels({channelIds:[`${pr}`]});return Tr?Tr[0].name:""},lr=()=>{let pr=logApi().getLogs();!pr||pr.length<=0||(z.value=pr.filter(Tr=>Tr.type=="system").splice(0,10).reverse(),!(!r.enable.kd||!e.value||!e.value.kd||!e.value.kd.idolName)&&(pr=pr.filter(Tr=>Tr.type=="text"&&Tr.roleId==3),V.value=pr.slice(0,10).reverse()))},sr=(pr,Tr="")=>{ElMessageBox.alert(pr,Tr+"")},er=()=>{oe.value=setInterval(cr,1e3*60)},cr=async()=>{var _r,Mr;i.value=(await getLogs()).data.reverse();let pr=(await getFun()).data,Tr=await getCache({pageIndex:1,pageSize:9999});re.value.plugin.total=pr.length,re.value.plugin.unusing=pr.filter(rr=>!rr.status).length,re.value.plugin.using=pr.filter(rr=>rr.status).length,re.value.pic.total=Tr.count,re.value.pic.today=Tr.data.filter(rr=>new Date(rr.createDate).getDate()===new Date().getDate()).length,re.value.pic.old=re.value.pic.total-re.value.pic.today;let Pr=logApi().getLogs();Pr&&(re.value.log.total=Pr.length??0,(Mr=(_r=e.value)==null?void 0:_r.kd)!=null&&Mr.idolName&&(re.value.log.idol=Pr.filter(rr=>{var kr;return((kr=rr.name)==null?void 0:kr.includes(e.value.kd.idolName))&&rr.roleId==3}).length),re.value.log.other=re.value.log.total-re.value.log.idol)},or=()=>{ae.value=setInterval(hr,1e3)},hr=()=>{var pr=new Date,Tr=pr.getHours();if(g.value=pr.toLocaleString(),Tr>=0&&Tr<6&&(y.value=""),Tr>=6&&Tr<11&&(y.value=""),Tr>=11&&Tr<14&&(y.value=""),Tr>=14&&Tr<17&&(y.value=""),Tr>=17&&Tr<19&&(y.value=""),Tr>=19&&Tr<=23&&(y.value=""),$.value=="")L.value="00";else{let rr=new Date($.value);var Pr=pr.getTime()-rr.getTime(),_r=Math.floor(Pr/(1e3*60*60)),Mr=Math.floor(Pr%(1e3*60*60)/(1e3*60));L.value=`${_r}${Mr}`}};return onMounted(async()=>{let pr=await getConfig();e.value=pr.data,cr(),hr(),or(),lr()}),(pr,Tr)=>{const Pr=ElCol,_r=ElRow,Mr=ElCard,rr=ElIcon,kr=ElScrollbar,Er=ElDivider;return openBlock(),createBlock(kr,{style:{height:"calc(100vh - 30px)"}},{default:withCtx(()=>[createVNode(_r,null,{default:withCtx(()=>[createVNode(Pr,{span:12},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",class:"ch250"},{header:withCtx(()=>[createTextVNode(" StarBot ")]),default:withCtx(()=>[createVNode(_r,null,{default:withCtx(()=>[createVNode(Pr,{span:6},{default:withCtx(()=>[k.value?(openBlock(),createElementBlock("img",{key:0,title:"",onClick:_e,src:_imports_0,style:{width:"100px",height:"100px",cursor:"pointer","margin-left":"-17px"}})):(openBlock(),createElementBlock("img",{key:1,title:"",onClick:de,src:_imports_1,style:{width:"100px",height:"100px",cursor:"pointer","margin-left":"-17px"}})),createBaseVNode("div",{style:normalizeStyle({color:k.value?"green":n.value.includes("")?"red":"blue"})},[createBaseVNode("span",null,toDisplayString(n.value),1)],4)]),_:1}),createVNode(Pr,{span:18},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$9,[createBaseVNode("span",_hoisted_2$4,toDisplayString(y.value)+"",1)]),createBaseVNode("div",_hoisted_3$4,[_hoisted_4$3,createBaseVNode("span",_hoisted_5$2,toDisplayString(g.value),1)]),createBaseVNode("div",_hoisted_6,[_hoisted_7,createBaseVNode("span",_hoisted_8,toDisplayString($.value),1)]),createBaseVNode("div",_hoisted_9,[_hoisted_10,createBaseVNode("span",_hoisted_11,toDisplayString(k.value?""+L.value:""),1)])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Pr,{span:1}),createVNode(Pr,{span:11},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",class:"ch250"},{header:withCtx(()=>[createVNode(_r,null,{default:withCtx(()=>[createVNode(Pr,null,{default:withCtx(()=>[_hoisted_12,createVNode(rr,{size:18},{default:withCtx(()=>[createVNode(unref(refresh_default),{class:"et5",onClick:Tr[0]||(Tr[0]=async()=>i.value=(await unref(getLogs)()).data)})]),_:1})]),_:1})]),_:1})]),default:withCtx(()=>[createVNode(kr,{height:"180px",style:{"margin-top":"-10px","margin-left":"-20px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_13,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,xr=>(openBlock(),createElementBlock("li",_hoisted_14,[createBaseVNode("span",{onClick:vr=>sr(xr.content),title:""},toDisplayString(xr.content.substring(0,20))+"--"+toDisplayString(xr.time),9,_hoisted_15)]))),256))])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(_r,{style:{"margin-top":"20px"}},{default:withCtx(()=>[createVNode(Pr,{span:24},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",header:"",class:"chauto"},{default:withCtx(()=>[createVNode(_r,{gutter:15},{default:withCtx(()=>[createVNode(Pr,{span:8},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[_hoisted_16]),default:withCtx(()=>[createBaseVNode("div",null,[_hoisted_17,createBaseVNode("div",null,[createBaseVNode("span",null,":"+toDisplayString(re.value.log.total),1),createVNode(Er,{direction:"vertical"}),createBaseVNode("span",null,":"+toDisplayString(re.value.log.idol),1),createVNode(Er,{direction:"vertical"}),createBaseVNode("span",null,":"+toDisplayString(re.value.log.other),1)])]),createVNode(Er),createBaseVNode("div",null,[_hoisted_18,createBaseVNode("div",null,[createBaseVNode("span",null,":"+toDisplayString(re.value.pic.total),1),createVNode(Er,{direction:"vertical"}),createBaseVNode("span",null,":"+toDisplayString(re.value.pic.today),1),createVNode(Er,{direction:"vertical"}),createBaseVNode("span",null,":"+toDisplayString(re.value.pic.old),1)])]),createVNode(Er),t.enable.bot?(openBlock(),createElementBlock("div",_hoisted_19,[_hoisted_20,createBaseVNode("div",null,[createBaseVNode("span",null,":"+toDisplayString(re.value.plugin.total),1),createVNode(Er,{direction:"vertical"}),createBaseVNode("span",null,":"+toDisplayString(re.value.plugin.using),1),createVNode(Er,{direction:"vertical"}),createBaseVNode("span",null,":"+toDisplayString(re.value.plugin.unusing),1)])])):createCommentVNode("",!0)]),_:1})]),_:1}),t.enable.kd?(openBlock(),createBlock(Pr,{key:0,span:8},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[_hoisted_21]),default:withCtx(()=>[createVNode(kr,{height:"250px",style:{"margin-top":"-10px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_22,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,xr=>{var vr;return openBlock(),createElementBlock("li",null,[xr.type=="text"?(openBlock(),createElementBlock("span",{key:0,onClick:Ir=>sr(xr.name+":"+xr.content+"--"+xr.time,""),title:""},toDisplayString(xr.name+":"+((vr=xr.content)==null?void 0:vr.substring(0,20)))+"--"+toDisplayString(xr.time),9,_hoisted_23)):createCommentVNode("",!0),xr.type=="pic"||xr.type=="link"?(openBlock(),createElementBlock("span",_hoisted_24,toDisplayString(xr.url),1)):createCommentVNode("",!0)])}),256))])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),withDirectives(createVNode(Pr,{span:8},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[createTextVNode(" "),createVNode(rr,{size:16},{default:withCtx(()=>[createVNode(unref(switch_default),{class:"et2",circle:"",onClick:Tr[1]||(Tr[1]=()=>Ue.value="log")})]),_:1})]),default:withCtx(()=>[_hoisted_25,_hoisted_26,_hoisted_27]),_:1})]),_:1},512),[[vShow,Ue.value=="help"]]),withDirectives(createVNode(Pr,{span:8},{default:withCtx(()=>[createVNode(Mr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[createTextVNode(" "),createVNode(rr,{size:16},{default:withCtx(()=>[createVNode(unref(switch_default),{class:"et2",circle:"",onClick:Tr[2]||(Tr[2]=()=>Ue.value="help")})]),_:1})]),default:withCtx(()=>[createVNode(kr,{height:"250px",style:{"margin-top":"-10px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_28,[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.value,xr=>{var vr;return openBlock(),createElementBlock("li",_hoisted_29,[createBaseVNode("span",{onClick:Ir=>sr(xr.content??"",""),title:""},toDisplayString((vr=xr.content)==null?void 0:vr.substring(0,20))+"--"+toDisplayString(xr.time),9,_hoisted_30)])}),256))])]),_:1})]),_:1})]),_:1},512),[[vShow,Ue.value=="log"]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),index_vue_vue_type_style_index_0_lang="",elAffix="",elButton="",elForm="",elFormItem="",elCheckbox="",_sfc_main$d=defineComponent({__name:"enable",props:{enable:{type:Object,default:{qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},emits:["enable-change"],setup(t,{emit:r}){var n=toRef(t.enable);const g=r;watch(n.value,()=>{g("enable-change",n.value)});const y=i=>{n.value.qq=i};return(i,k)=>{const $=ElCheckbox,L=ElFormItem,V=ElForm;return openBlock(),createBlock(V,{ref:"bdform","label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:""},{default:withCtx(()=>[createVNode($,{modelValue:unref(n).bot,"onUpdate:modelValue":k[0]||(k[0]=z=>unref(n).bot=z),label:"QQ&Bot",onChange:y},null,8,["modelValue"]),createVNode($,{modelValue:unref(n).wb,"onUpdate:modelValue":k[1]||(k[1]=z=>unref(n).wb=z),label:""},null,8,["modelValue"]),createVNode($,{modelValue:unref(n).bz,"onUpdate:modelValue":k[2]||(k[2]=z=>unref(n).bz=z),label:"B"},null,8,["modelValue"]),createVNode($,{modelValue:unref(n).kd,"onUpdate:modelValue":k[3]||(k[3]=z=>unref(n).kd=z),label:"48"},null,8,["modelValue"]),createVNode($,{modelValue:unref(n).xhs,"onUpdate:modelValue":k[4]||(k[4]=z=>unref(n).xhs=z),label:""},null,8,["modelValue"]),createVNode($,{modelValue:unref(n).bd,"onUpdate:modelValue":k[5]||(k[5]=z=>unref(n).bd=z),label:""},null,8,["modelValue"]),createVNode($,{modelValue:unref(n).dy,"onUpdate:modelValue":k[6]||(k[6]=z=>unref(n).dy=z),label:""},null,8,["modelValue"])]),_:1})]),_:1},512)}}}),elInput="",_hoisted_1$8=createBaseVNode("span",{id:"bot"},"",-1),_sfc_main$c=defineComponent({__name:"bot",props:{bot:{type:Object,default:{host:"",websocktPort:"",httpPort:"",token:""}}},setup(t,{expose:r}){const e=ref(),n=ref({host:[{required:!0,message:"",trigger:"blur"}],websocktPort:[{required:!0,message:"",trigger:"blur"}],httpPort:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var y;return await((y=e.value)==null?void 0:y.validate(i=>!!i))}}),(y,i)=>{const k=ElInput,$=ElFormItem,L=ElForm,V=ElCard;return openBlock(),createBlock(V,{class:"card-bot"},{header:withCtx(()=>[_hoisted_1$8]),default:withCtx(()=>[createVNode(L,{ref_key:"botform",ref:e,rules:n.value,model:t.bot,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"IP",prop:"host"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.host,"onUpdate:modelValue":i[0]||(i[0]=z=>t.bot.host=z)},null,8,["modelValue"])]),_:1}),createVNode($,{label:"WebScoket",prop:"websocktPort"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.websocktPort,"onUpdate:modelValue":i[1]||(i[1]=z=>t.bot.websocktPort=z)},null,8,["modelValue"])]),_:1}),createVNode($,{label:"Http",prop:"httpPort"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.httpPort,"onUpdate:modelValue":i[2]||(i[2]=z=>t.bot.httpPort=z)},null,8,["modelValue"])]),_:1}),createVNode($,{label:"token"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.token,"onUpdate:modelValue":i[3]||(i[3]=z=>t.bot.token=z)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})}}}),elSwitch="",_hoisted_1$7=createBaseVNode("span",{id:"qq"},"QQ",-1),_sfc_main$b=defineComponent({__name:"qq",props:{qq:{type:Object,default:{funcAdmin:new Array,group:"",save:!1,admin:"",notice:!1,permission:"",debug:!1}}},setup(t,{expose:r}){const e=ref(),n=ref({admin:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var y;return await((y=e.value)==null?void 0:y.validate(i=>!!i))}}),(y,i)=>{const k=ElInput,$=ElFormItem,L=ElSwitch,V=ElForm,z=ElCard;return openBlock(),createBlock(z,{class:"card-qq"},{header:withCtx(()=>[_hoisted_1$7]),default:withCtx(()=>[createVNode(V,{ref_key:"qqform",ref:e,model:t.qq,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"",prop:"admin"},{default:withCtx(()=>[createVNode(k,{modelValue:t.qq.admin,"onUpdate:modelValue":i[0]||(i[0]=re=>t.qq.admin=re)},null,8,["modelValue"])]),_:1}),createVNode($,{label:"",prop:"permission"},{default:withCtx(()=>[createVNode(k,{modelValue:t.qq.permission,"onUpdate:modelValue":i[1]||(i[1]=re=>t.qq.permission=re)},null,8,["modelValue"])]),_:1}),createVNode($,{label:"",prop:"group"},{default:withCtx(()=>[createVNode(k,{modelValue:t.qq.group,"onUpdate:modelValue":i[2]||(i[2]=re=>t.qq.group=re)},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.qq.debug,"onUpdate:modelValue":i[3]||(i[3]=re=>t.qq.debug=re),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.qq.notice,"onUpdate:modelValue":i[4]||(i[4]=re=>t.qq.notice=re),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.qq.save,"onUpdate:modelValue":i[5]||(i[5]=re=>t.qq.save=re),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}}),elInputNumber="",_hoisted_1$6=createBaseVNode("span",{id:"wb"},"",-1),_hoisted_2$3=createBaseVNode("span",{style:{color:"red"}},"idol",-1),_hoisted_3$3=createBaseVNode("span",{style:{color:"red"}},"",-1),_hoisted_4$2=createBaseVNode("span",{style:{color:"red"}},"",-1),_sfc_main$a=defineComponent({__name:"wb",props:{wb:{type:Object,default:{userAll:"",userPart:"",chiGuaUser:"",keyword:"",chiGuaQQ:"",chiGuaForwardQQ:!1,chiGuaGroup:"",chiGuaForwardGroup:!1,timeSpan:3,group:"",forwardGroup:!1,forwardQQ:!1,qq:""}}},setup(t,{expose:r}){const e=ref(),n=ref({userAll:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var y;return await((y=e.value)==null?void 0:y.validate(i=>!!i))}}),(y,i)=>{const k=ElInput,$=ElFormItem,L=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-wb"},{header:withCtx(()=>[_hoisted_1$6]),default:withCtx(()=>[createVNode(z,{ref_key:"wbform",ref:e,model:t.wb,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"",prop:"userAll"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.userAll,"onUpdate:modelValue":i[0]||(i[0]=ie=>t.wb.userAll=ie)},null,8,["modelValue"]),_hoisted_2$3]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.userPart,"onUpdate:modelValue":i[1]||(i[1]=ie=>t.wb.userPart=ie)},null,8,["modelValue"]),_hoisted_3$3]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.wb.forwardGroup,"onUpdate:modelValue":i[2]||(i[2]=ie=>t.wb.forwardGroup=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.wb.forwardGroup?(openBlock(),createBlock($,{key:0,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.group,"onUpdate:modelValue":i[3]||(i[3]=ie=>t.wb.group=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.wb.forwardQQ,"onUpdate:modelValue":i[4]||(i[4]=ie=>t.wb.forwardQQ=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.wb.forwardQQ?(openBlock(),createBlock($,{key:1,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.qq,"onUpdate:modelValue":i[5]||(i[5]=ie=>t.wb.qq=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode($,{label:""},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaUser,"onUpdate:modelValue":i[6]||(i[6]=ie=>t.wb.chiGuaUser=ie)},null,8,["modelValue"]),_hoisted_4$2]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.keyword,"onUpdate:modelValue":i[7]||(i[7]=ie=>t.wb.keyword=ie)},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.wb.chiGuaForwardGroup,"onUpdate:modelValue":i[8]||(i[8]=ie=>t.wb.chiGuaForwardGroup=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.wb.chiGuaForwardGroup?(openBlock(),createBlock($,{key:2,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaGroup,"onUpdate:modelValue":i[9]||(i[9]=ie=>t.wb.chiGuaGroup=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.wb.chiGuaForwardQQ,"onUpdate:modelValue":i[10]||(i[10]=ie=>t.wb.chiGuaForwardQQ=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.wb.chiGuaForwardQQ?(openBlock(),createBlock($,{key:3,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaQQ,"onUpdate:modelValue":i[11]||(i[11]=ie=>t.wb.chiGuaQQ=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.wb.forwardQQ||t.wb.forwardGroup||t.wb.chiGuaForwardGroup||t.wb.chiGuaForwardQQ?(openBlock(),createBlock($,{key:4,label:""},{default:withCtx(()=>[createVNode(V,{modelValue:t.wb.timeSpan,"onUpdate:modelValue":i[12]||(i[12]=ie=>t.wb.timeSpan=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elCascader="",elTag="",elCascaderPanel="",elRadio="",elDialog="",elOverlay="",elCheckboxGroup="",elRadioGroup="",_hoisted_1$5=createBaseVNode("span",{id:"kd"},"48",-1),_hoisted_2$2=createBaseVNode("span",{style:{color:"red"}},"*",-1),_hoisted_3$2=createBaseVNode("span",{style:{color:"red"}},"*IMIMtoken",-1),_hoisted_4$1={key:0,style:{width:"95%","margin-top":"5px"}},_hoisted_5$1=createBaseVNode("span",null,"",-1),_sfc_main$9=defineComponent({__name:"kd",props:{kd:{type:Object,default:{group:"",forwardGroup:!1,forwardQQ:!1,qq:"",idolName:"",account:"",token:"",serverId:"",liveRoomId:"",msgTypeAll:new Array,msgType:[],saveMsg:0,saveImg:!1}}},setup(t,{expose:r}){const e=t,n=ref(),g=ref({idolName:[{required:!0,message:"",trigger:"blur"}],serverId:[{required:!0,message:"",trigger:"blur"}],liveRoomId:[{required:!0,message:"",trigger:"blur"}],account:[{required:!0,message:"",trigger:"blur"}],token:[{required:!0,message:"",trigger:"blur"}],phone:[{required:!0,message:"",trigger:"blur"}],code:[{required:!0,message:"",trigger:"blur"}],name:[{required:!0,message:"",trigger:"blur"}]}),y=ref(!1),i=ref({show:!1,group:[],name:"",loading:!1,url:""}),k=ref({phone:"",area:"86",hasSend:!1,code:"",sec:60}),$=ref([{label:"SNH48",value:"SNH48",children:[{value:"TEAM SII",label:"TEAM SII"},{value:"TEAM HII",label:"TEAM HII"},{value:"TEAM X",label:"TEAM X"}]},{label:"GNZ48",value:"GNZ48",children:[{value:"TEAM G",label:"TEAM G"},{value:"TEAM NIII",label:"TEAM NIII"},{value:"TEAM Z",label:"TEAM Z"},{value:"TEAM CII",label:"TEAM CII"}]},{label:"CGT48",value:"CGT48",children:[{value:"TEAM GII",label:"TEAM GII"}]},{label:"BEJ48",value:"BEJ48",children:[{value:"TEAM B",label:"TEAM B"},{value:"TEAM E",label:"TEAM E"}]},{label:"CKG48",value:"CKG48"}]),L=async()=>{if(!i.value.name){ElMessage({message:"",type:"error"});return}i.value.loading=!0;var oe=await searchIdol(i.value.group.toString(),i.value.name);if(oe.success){var ae=oe.data;e.kd.idolName=ae.name,e.kd.liveRoomId=ae.liveId,e.kd.serverId=ae.serverId,V()}else i.value.url=oe.msg||"";i.value.loading=!1},V=()=>{i.value.loading=!1,i.value.show=!1,i.value.name="",i.value.url="",i.value.group=[],y.value=!1,k.value.hasSend=!1,k.value.sec=60,k.value.code=""},z=async()=>{if(!k.value.phone){ElMessage({message:"",type:"warning"});return}var oe=/^1[3456789]\d{9}$/;if(oe.test(k.value.phone)==!1){ElMessage({message:"",type:"warning"});return}k.value.hasSend=!0,ie();var ae=await sendSmsCode(k.value.phone,k.value.area);ae.success?ElMessage({message:"",type:"success"}):(ElMessage({message:ae.msg||"",type:"error"}),V())},re=async()=>{if(!k.value.phone){ElMessage({message:"",type:"warning"});return}if(!k.value.code){ElMessage({message:"",type:"warning"});return}var oe=/^1[3456789]\d{9}$/;if(oe.test(k.value.phone)==!1){ElMessage({message:"",type:"warning"});return}var ae=await pocketLogin(k.value.phone,k.value.code);if(ae.success){var Ue=await kdUserInfo({token:JSON.parse(ae.data).token});if(Ue.success){let de=JSON.parse(Ue.data);e.kd.token=de.pwd,e.kd.account=de.accid,setTimeout(()=>{V()},1e3),ElMessage({message:Ue.msg||"",type:"success"})}else ElMessage({message:Ue.msg||"",type:"error"})}else ElMessage({message:ae.msg||"",type:"error"})},ie=()=>{k.value.sec=60;let oe;oe=setInterval(()=>{k.value.sec>0?k.value.sec--:(clearInterval(oe),k.value.sec=60,k.value.hasSend=!1)},1e3)},ue=async()=>{var oe;return await((oe=n.value)==null?void 0:oe.validate(ae=>!!ae))},le=oe=>{openWindow(oe)};return r({validForm:ue}),(oe,ae)=>{const Ue=ElInput,de=ElFormItem,_e=ElButton,Ve=ElRadio,$e=ElRadioGroup,Lt=ElCheckbox,jt=ElCheckboxGroup$1,Et=ElSwitch,ir=ElForm,ur=ElDialog,Dt=ElCascader,lr=ElCard;return openBlock(),createBlock(lr,{class:"card-kd"},{header:withCtx(()=>[_hoisted_1$5]),default:withCtx(()=>[createVNode(ir,{ref_key:"kdform",ref:n,rules:g.value,model:t.kd,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(de,{label:"",prop:"idolName"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.idolName,"onUpdate:modelValue":ae[0]||(ae[0]=sr=>t.kd.idolName=sr)},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"IMServerId",prop:"serverId"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.serverId,"onUpdate:modelValue":ae[1]||(ae[1]=sr=>t.kd.serverId=sr)},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"Id",prop:"liveRoomId"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.liveRoomId,"onUpdate:modelValue":ae[2]||(ae[2]=sr=>t.kd.liveRoomId=sr)},null,8,["modelValue"])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(_e,{onClick:ae[3]||(ae[3]=sr=>i.value.show=!0)},{default:withCtx(()=>[createTextVNode("")]),_:1}),_hoisted_2$2]),_:1}),createVNode(de,{label:"IM",prop:"account"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.account,"onUpdate:modelValue":ae[4]||(ae[4]=sr=>t.kd.account=sr)},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"IMtoken",prop:"token"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.token,"onUpdate:modelValue":ae[5]||(ae[5]=sr=>t.kd.token=sr)},null,8,["modelValue"])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(_e,{onClick:ae[6]||(ae[6]=sr=>y.value=!0)},{default:withCtx(()=>[createTextVNode("48")]),_:1}),_hoisted_3$2]),_:1}),createVNode(de,{label:""},{default:withCtx(()=>[createVNode($e,{modelValue:t.kd.saveMsg,"onUpdate:modelValue":ae[7]||(ae[7]=sr=>t.kd.saveMsg=sr)},{default:withCtx(()=>[createVNode(Ve,{label:0,value:0},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(Ve,{label:1,value:1},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(Ve,{label:2,value:2},{default:withCtx(()=>[createTextVNode("")]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:""},{default:withCtx(()=>[createVNode($e,{modelValue:t.kd.saveImg,"onUpdate:modelValue":ae[8]||(ae[8]=sr=>t.kd.saveImg=sr)},{default:withCtx(()=>[createVNode(Ve,{label:!1,value:!1},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(Ve,{label:!0,value:!0},{default:withCtx(()=>[createTextVNode("")]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:""},{default:withCtx(()=>[createVNode(jt,{modelValue:t.kd.msgType,"onUpdate:modelValue":ae[9]||(ae[9]=sr=>t.kd.msgType=sr)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.kd.msgTypeAll,(sr,er)=>(openBlock(),createBlock(Lt,{label:sr.value,key:er},{default:withCtx(()=>[createTextVNode(toDisplayString(sr.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:""},{default:withCtx(()=>[createVNode(Et,{modelValue:t.kd.forwardGroup,"onUpdate:modelValue":ae[10]||(ae[10]=sr=>t.kd.forwardGroup=sr),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.kd.forwardGroup?(openBlock(),createBlock(de,{key:0,label:"qq"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.group,"onUpdate:modelValue":ae[11]||(ae[11]=sr=>t.kd.group=sr)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(de,{label:""},{default:withCtx(()=>[createVNode(Et,{modelValue:t.kd.forwardQQ,"onUpdate:modelValue":ae[12]||(ae[12]=sr=>t.kd.forwardQQ=sr),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.kd.forwardQQ?(openBlock(),createBlock(de,{key:1,label:"qq"},{default:withCtx(()=>[createVNode(Ue,{modelValue:t.kd.qq,"onUpdate:modelValue":ae[13]||(ae[13]=sr=>t.kd.qq=sr)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["rules","model"]),createVNode(ur,{title:"48",modelValue:y.value,"onUpdate:modelValue":ae[16]||(ae[16]=sr=>y.value=sr),"before-close":V,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(ir,{"label-width":"100px",rules:g.value,model:k.value},{default:withCtx(()=>[createVNode(de,{label:"",class:"mt-4",prop:"phone"},{default:withCtx(()=>[createVNode(Ue,{modelValue:k.value.phone,"onUpdate:modelValue":ae[14]||(ae[14]=sr=>k.value.phone=sr),style:{width:"95%"}},{prepend:withCtx(()=>[createTextVNode("+"+toDisplayString(k.value.area),1)]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:"",prop:"code"},{default:withCtx(()=>[createVNode(Ue,{type:"primary",modelValue:k.value.code,"onUpdate:modelValue":ae[15]||(ae[15]=sr=>k.value.code=sr),style:{width:"65%"}},null,8,["modelValue"]),withDirectives(createVNode(_e,{style:{width:"25%","margin-left":"5%"},onClick:z},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,!k.value.hasSend]]),withDirectives(createVNode(_e,{style:{width:"25%","margin-left":"5%"}},{default:withCtx(()=>[createTextVNode(toDisplayString(k.value.sec)+"",1)]),_:1},512),[[vShow,k.value.hasSend]])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(_e,{type:"primary",onClick:re},{default:withCtx(()=>[createTextVNode("")]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),createVNode(ur,{title:" ",modelValue:i.value.show,"onUpdate:modelValue":ae[20]||(ae[20]=sr=>i.value.show=sr),"before-close":V,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(ir,{"label-width":"100px",rules:g.value,model:i.value},{default:withCtx(()=>[createVNode(de,{label:"",class:"mt-4"},{default:withCtx(()=>[createVNode(Dt,{props:{expandTrigger:"hover",checkStrictly:"true"},placeholder:"",modelValue:i.value.group,"onUpdate:modelValue":ae[17]||(ae[17]=sr=>i.value.group=sr),options:$.value,style:{width:"95%"}},null,8,["modelValue","options"])]),_:1}),createVNode(de,{label:"",prop:"name"},{default:withCtx(()=>[createVNode(Ue,{modelValue:i.value.name,"onUpdate:modelValue":ae[18]||(ae[18]=sr=>i.value.name=sr),style:{width:"95%"}},null,8,["modelValue"])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(_e,{type:"primary",loading:i.value.loading,onClick:L},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["loading"])]),_:1}),i.value.url?(openBlock(),createElementBlock("div",_hoisted_4$1,[_hoisted_5$1,createBaseVNode("a",{style:{"word-break":"break-all"},onClick:ae[19]||(ae[19]=sr=>le(i.value.url))},toDisplayString(i.value.url),1)])):createCommentVNode("",!0)]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])]),_:1})}}}),_hoisted_1$4=createBaseVNode("span",{id:"bz"},"b",-1),_sfc_main$8=defineComponent({__name:"bz",props:{bz:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var y;return await((y=e.value)==null?void 0:y.validate(i=>!!i))}}),(y,i)=>{const k=ElInput,$=ElFormItem,L=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-bz"},{header:withCtx(()=>[_hoisted_1$4]),default:withCtx(()=>[createVNode(z,{ref_key:"bzform",ref:e,model:t.bz,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"b",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.user,"onUpdate:modelValue":i[0]||(i[0]=ie=>t.bz.user=ie)},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.bz.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=ie=>t.bz.forwardGroup=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.bz.forwardGroup?(openBlock(),createBlock($,{key:0,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.group,"onUpdate:modelValue":i[2]||(i[2]=ie=>t.bz.group=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.bz.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=ie=>t.bz.forwardQQ=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.bz.forwardQQ?(openBlock(),createBlock($,{key:1,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.qq,"onUpdate:modelValue":i[4]||(i[4]=ie=>t.bz.qq=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.bz.forwardQQ||t.bz.forwardGroup?(openBlock(),createBlock($,{key:2,label:""},{default:withCtx(()=>[createVNode(V,{modelValue:t.bz.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=ie=>t.bz.timeSpan=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),_hoisted_1$3=createBaseVNode("span",{id:"xhs"},"",-1),_sfc_main$7=defineComponent({__name:"xhs",props:{xhs:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var y;return await((y=e.value)==null?void 0:y.validate(i=>!!i))}}),(y,i)=>{const k=ElInput,$=ElFormItem,L=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-xhs"},{header:withCtx(()=>[_hoisted_1$3]),default:withCtx(()=>[createVNode(z,{ref_key:"xhsform",ref:e,model:t.xhs,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.user,"onUpdate:modelValue":i[0]||(i[0]=ie=>t.xhs.user=ie)},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.xhs.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=ie=>t.xhs.forwardGroup=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.xhs.forwardGroup?(openBlock(),createBlock($,{key:0,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.group,"onUpdate:modelValue":i[2]||(i[2]=ie=>t.xhs.group=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.xhs.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=ie=>t.xhs.forwardQQ=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.xhs.forwardQQ?(openBlock(),createBlock($,{key:1,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.qq,"onUpdate:modelValue":i[4]||(i[4]=ie=>t.xhs.qq=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.xhs.forwardQQ||t.xhs.forwardGroup?(openBlock(),createBlock($,{key:2,label:""},{default:withCtx(()=>[createVNode(V,{modelValue:t.xhs.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=ie=>t.xhs.timeSpan=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elUpload="",elProgress="",_hoisted_1$2=createBaseVNode("span",{id:"bd"},"",-1),_hoisted_2$1=createBaseVNode("span",{style:{color:"red"}},"*",-1),_hoisted_3$1=createBaseVNode("span",{style:{color:"red"}},"*(8070)",-1),_hoisted_4=createBaseVNode("span",{style:{color:"red"}},"*",-1),_hoisted_5=createBaseVNode("span",{style:{color:"red"}},"*",-1),_sfc_main$6=defineComponent({__name:"bd",props:{bd:{type:Object,default:{appKey:"",appSeret:"",similarity:0,saveAliyunDisk:!1,audit:0,albumName:"",faceVerify:!1,imageList:[]}}},setup(t,{expose:r}){const e=t,n=ref(),g=($,L)=>{e.bd.imageList?e.bd.imageList.push(L.name):e.bd.imageList=[]},y=$=>{if(e.bd.imageList){var L=-1;e.bd.imageList.forEach((V,z)=>{if(V===$.name){L=z;return}}),L>=0&&e.bd.imageList.splice(L,1)}},i=ref({appKey:[{required:!0,message:"",trigger:"blur"}],appSeret:[{required:!0,message:"",trigger:"blur"}],albumName:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var $;return await(($=n.value)==null?void 0:$.validate(L=>!!L))}}),($,L)=>{const V=ElInput,z=ElFormItem,re=ElSwitch,ie=resolveComponent("Plus"),ue=ElIcon,le=ElUpload,oe=ElCol,ae=ElForm,Ue=ElCard;return openBlock(),createBlock(Ue,{class:"card-bd"},{header:withCtx(()=>[_hoisted_1$2]),default:withCtx(()=>[createVNode(ae,{ref_key:"bdform",ref:n,model:t.bd,rules:i.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(z,{label:"apiKey",prop:"appKey"},{default:withCtx(()=>[createVNode(V,{modelValue:t.bd.appKey,"onUpdate:modelValue":L[0]||(L[0]=de=>t.bd.appKey=de),placeholder:"appKey"},null,8,["modelValue"])]),_:1}),createVNode(z,{label:"appSeret",prop:"appSeret"},{default:withCtx(()=>[createVNode(V,{modelValue:t.bd.appSeret,"onUpdate:modelValue":L[1]||(L[1]=de=>t.bd.appSeret=de),placeholder:"appSeret"},null,8,["modelValue"])]),_:1}),createVNode(z,{label:""},{default:withCtx(()=>[createVNode(re,{modelValue:t.bd.faceVerify,"onUpdate:modelValue":L[2]||(L[2]=de=>t.bd.faceVerify=de),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(z,{label:""},{default:withCtx(()=>[createVNode(le,{"file-list":t.bd.imageList,action:unref(ApiPrefix)+"/upload","on-success":g,"on-remove":y,"list-type":"picture-card",limit:3,accept:".jpg,.png,.jpeg"},{default:withCtx(()=>[createVNode(ue,null,{default:withCtx(()=>[createVNode(ie)]),_:1})]),_:1},8,["file-list","action"]),_hoisted_2$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(z,{label:""},{default:withCtx(()=>[createVNode(oe,{span:8},{default:withCtx(()=>[createVNode(V,{type:"number",modelValue:t.bd.similarity,"onUpdate:modelValue":L[3]||(L[3]=de=>t.bd.similarity=de)},null,8,["modelValue"])]),_:1}),_hoisted_3$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(z,{label:""},{default:withCtx(()=>[createVNode(oe,{span:8},{default:withCtx(()=>[createVNode(V,{type:"number",modelValue:t.bd.audit,"onUpdate:modelValue":L[4]||(L[4]=de=>t.bd.audit=de)},null,8,["modelValue"])]),_:1}),_hoisted_4]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(z,{label:""},{default:withCtx(()=>[createVNode(re,{modelValue:t.bd.saveAliyunDisk,"onUpdate:modelValue":L[5]||(L[5]=de=>t.bd.saveAliyunDisk=de),"active-value":!0,"inactive-value":!1},null,8,["modelValue"]),_hoisted_5]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(z,{label:"",prop:"albumName"},{default:withCtx(()=>[createVNode(oe,{span:8},{default:withCtx(()=>[createVNode(V,{modelValue:t.bd.albumName,"onUpdate:modelValue":L[6]||(L[6]=de=>t.bd.albumName=de)},null,8,["modelValue"])]),_:1})]),_:1},512),[[vShow,t.bd.saveAliyunDisk]])]),_:1},8,["model","rules"])]),_:1})}}}),_hoisted_1$1=createBaseVNode("span",{id:"dy"},"",-1),_sfc_main$5=defineComponent({__name:"dy",props:{dy:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"",trigger:"blur"}]});return r({validForm:async()=>{var y;return await((y=e.value)==null?void 0:y.validate(i=>!!i))}}),(y,i)=>{const k=ElInput,$=ElFormItem,L=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-dy"},{header:withCtx(()=>[_hoisted_1$1]),default:withCtx(()=>[createVNode(z,{ref_key:"dyform",ref:e,model:t.dy,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.user,"onUpdate:modelValue":i[0]||(i[0]=ie=>t.dy.user=ie)},null,8,["modelValue"])]),_:1}),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.dy.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=ie=>t.dy.forwardGroup=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.dy.forwardGroup?(openBlock(),createBlock($,{key:0,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.group,"onUpdate:modelValue":i[2]||(i[2]=ie=>t.dy.group=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode($,{label:""},{default:withCtx(()=>[createVNode(L,{modelValue:t.dy.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=ie=>t.dy.forwardQQ=ie),"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),t.dy.forwardQQ?(openBlock(),createBlock($,{key:1,label:"qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.qq,"onUpdate:modelValue":i[4]||(i[4]=ie=>t.dy.qq=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.dy.forwardQQ||t.dy.forwardGroup?(openBlock(),createBlock($,{key:2,label:""},{default:withCtx(()=>[createVNode(V,{modelValue:t.dy.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=ie=>t.dy.timeSpan=ie)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elMessageBox="",_sfc_main$4=defineComponent({__name:"config",props:{enable:{type:Object,default:{qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},emits:["top-enable-change"],setup(t,{expose:r,emit:e}){const n=t,g=ref(),y=ref(),i=ref(),k=ref(),$=ref(),L=ref(),V=ref(),z=ref(),re=ref({enableModule:n.enable}),ie=ref(),ue=e,le=de=>{re.value.enableModule=de,ue("top-enable-change",de)},oe=async()=>{let de=!0;if(re.value.enableModule.bot&&(de=await g.value.validForm()),re.value.enableModule.wb&&(de=await y.value.validForm()),re.value.enableModule.qq&&(de=await i.value.validForm()),re.value.enableModule.bz&&(de=await k.value.validForm()),re.value.enableModule.bd&&(de=await $.value.validForm()),re.value.enableModule.kd&&(de=await L.value.validForm()),re.value.enableModule.xhs&&(de=await V.value.validForm()),re.value.enableModule.dy&&(de=await z.value.validForm()),!de){ElMessage.error("");return}var _e=await saveConfig(re.value);_e&&_e.success?(ie.value=re.value,ElMessage.success(_e.msg)):ElMessage.error(_e.msg||"")},ae=async()=>{var de=await getConfig();de&&de.success&&(re.value.enableModule=de.data.enableModule,re.value.bot=de.data.bot,re.value.qq=de.data.qq,re.value.wb=de.data.wb,re.value.kd=de.data.kd,re.value.bz=de.data.bz,re.value.bd=de.data.bd,re.value.xhs=de.data.xhs,re.value.dy=de.data.dy);let _e=JSON.stringify(re.value),Ve=JSON.parse(_e);ie.value=Ve},Ue=()=>{let de=JSON.stringify(ie.value),_e=JSON.stringify(re.value);return de!=_e?ElMessageBox.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(async()=>(await oe(),!0)).catch(async()=>!0):new Promise((Ve,$e)=>{Ve(!0)})};return onMounted(async()=>{await ae()}),r({checkData:Ue}),(de,_e)=>{const Ve=ElButton,$e=ElCard,Lt=ElAffix,jt=ElScrollbar;return openBlock(),createElementBlock(Fragment,null,[createVNode(Lt,{target:".el-scrollbar__view"},{default:withCtx(()=>[createVNode($e,{id:"enable"},{header:withCtx(()=>[createVNode(Ve,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:_e[0]||(_e[0]=Et=>oe())},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["icon"]),createVNode(Ve,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:_e[1]||(_e[1]=Et=>ae())},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["icon"])]),default:withCtx(()=>[createVNode(_sfc_main$d,{enable:re.value.enableModule,onEnableChange:le},null,8,["enable"])]),_:1})]),_:1}),createVNode(jt,{style:{height:"calc(100vh - 230px)"},id:"pdom"},{default:withCtx(()=>[re.value.enableModule.bot?(openBlock(),createBlock(_sfc_main$c,{key:0,ref_key:"botRef",ref:g,bot:re.value.bot,class:"mt10"},null,8,["bot"])):createCommentVNode("",!0),re.value.enableModule.qq?(openBlock(),createBlock(_sfc_main$b,{key:1,ref_key:"qqRef",ref:i,qq:re.value.qq,class:"mt10"},null,8,["qq"])):createCommentVNode("",!0),re.value.enableModule.wb?(openBlock(),createBlock(_sfc_main$a,{key:2,ref_key:"wbRef",ref:y,wb:re.value.wb,class:"mt10"},null,8,["wb"])):createCommentVNode("",!0),re.value.enableModule.kd?(openBlock(),createBlock(_sfc_main$9,{key:3,ref_key:"kdRef",ref:L,kd:re.value.kd,class:"mt10"},null,8,["kd"])):createCommentVNode("",!0),re.value.enableModule.bz?(openBlock(),createBlock(_sfc_main$8,{key:4,ref_key:"bzRef",ref:k,bz:re.value.bz,class:"mt10"},null,8,["bz"])):createCommentVNode("",!0),re.value.enableModule.xhs?(openBlock(),createBlock(_sfc_main$7,{key:5,ref_key:"xhsRef",ref:V,xhs:re.value.xhs,class:"mt10"},null,8,["xhs"])):createCommentVNode("",!0),re.value.enableModule.bd?(openBlock(),createBlock(_sfc_main$6,{key:6,ref_key:"bdRef",ref:$,bd:re.value.bd,class:"mt10"},null,8,["bd"])):createCommentVNode("",!0),re.value.enableModule.dy?(openBlock(),createBlock(_sfc_main$5,{key:7,ref_key:"dyRef",ref:z,dy:re.value.dy,class:"mt10 mb50"},null,8,["dy"])):createCommentVNode("",!0)]),_:1})],64)}}}),config_vue_vue_type_style_index_0_lang="",elImage="",elImageViewer="",elAvatar="";var FileSaver_min={exports:{}};(function(t,r){(function(e,n){n()})(commonjsGlobal,function(){function e(L,V){return typeof V>"u"?V={autoBom:!1}:typeof V!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),V={autoBom:!V}),V.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(L.type)?new Blob(["\uFEFF",L],{type:L.type}):L}function n(L,V,z){var re=new XMLHttpRequest;re.open("GET",L),re.responseType="blob",re.onload=function(){$(re.response,V,z)},re.onerror=function(){console.error("could not download file")},re.send()}function g(L){var V=new XMLHttpRequest;V.open("HEAD",L,!1);try{V.send()}catch{}return 200<=V.status&&299>=V.status}function y(L){try{L.dispatchEvent(new MouseEvent("click"))}catch{var V=document.createEvent("MouseEvents");V.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),L.dispatchEvent(V)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,k=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),$=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function(L,V,z){var re=i.URL||i.webkitURL,ie=document.createElement("a");V=V||L.name||"download",ie.download=V,ie.rel="noopener",typeof L=="string"?(ie.href=L,ie.origin===location.origin?y(ie):g(ie.href)?n(L,V,z):y(ie,ie.target="_blank")):(ie.href=re.createObjectURL(L),setTimeout(function(){re.revokeObjectURL(ie.href)},4e4),setTimeout(function(){y(ie)},0))}:"msSaveOrOpenBlob"in navigator?function(L,V,z){if(V=V||L.name||"download",typeof L!="string")navigator.msSaveOrOpenBlob(e(L,z),V);else if(g(L))n(L,V,z);else{var re=document.createElement("a");re.href=L,re.target="_blank",setTimeout(function(){y(re)})}}:function(L,V,z,re){if(re=re||open("","_blank"),re&&(re.document.title=re.document.body.innerText="downloading..."),typeof L=="string")return n(L,V,z);var ie=L.type==="application/octet-stream",ue=/constructor/i.test(i.HTMLElement)||i.safari,le=/CriOS\/[\d]+/.test(navigator.userAgent);if((le||ie&&ue||k)&&typeof FileReader<"u"){var oe=new FileReader;oe.onloadend=function(){var de=oe.result;de=le?de:de.replace(/^data:[^;]*;/,"data:attachment/file;"),re?re.location.href=de:location=de,re=null},oe.readAsDataURL(L)}else{var ae=i.URL||i.webkitURL,Ue=ae.createObjectURL(L);re?re.location=Ue:location.href=Ue,re=null,setTimeout(function(){ae.revokeObjectURL(Ue)},4e4)}});i.saveAs=$.saveAs=$,t.exports=$})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const _hoisted_1={key:0,style:{"margin-top":"10px"}},_hoisted_2={key:1},_hoisted_3=["onClick"],_sfc_main$3=defineComponent({__name:"log",setup(t){const r=ref(new Array),e=$=>{$&&openWindow($)},n=async()=>{if(r.value.length<=0){ElMessage.info("");return}ElMessageBox.confirm("","",{cancelButtonText:"",confirmButtonText:""}).then(()=>{r.value=new Array,logApi().clearLog()})},g=()=>{const $=logApi().getLogs();if(!$||$.length<=0){ElMessage.info("");return}let L=[""];$.reverse().forEach(z=>{z.type=="link"||z.type=="pic"?L.push(z.name+":"+z.url):L.push(z.name+":"+z.content)});const V=new Blob(L,{type:"text/plain;charset=utf-8"});FileSaver_minExports.saveAs(V,"logs.txt")},y=()=>{var $=r.value.filter(L=>L.type=="pic").map(L=>L.url);return $??[]},i=$=>{var L=y().findIndex(V=>V==$);return L},k=()=>{setInterval(()=>{let $=logApi().getLogs();$&&(r.value=$.reverse().slice(0,100))},3e3)};return onMounted(()=>{let $=logApi().getLogs();$&&(r.value=$.reverse()),k()}),($,L)=>{const V=ElButton,z=ElAvatar,re=ElImage,ie=ElScrollbar;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(V,{type:"primary",onClick:n},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(V,{type:"primary",onClick:g},{default:withCtx(()=>[createTextVNode("")]),_:1})]),createVNode(ie,{style:{height:"calc(100vh - 100px)","margin-top":"10px"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(ue,le)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("span",null,toDisplayString(le+1)+".",1),ue.type!=="system"?(openBlock(),createElementBlock("span",_hoisted_1,[createVNode(z,{src:ue.avatar},null,8,["src"]),createTextVNode(toDisplayString(ue.name)+"",1)])):(openBlock(),createElementBlock("span",_hoisted_2,"")),(ue.type=="text",openBlock(),createElementBlock("span",{key:2,style:normalizeStyle({color:ue.color})},toDisplayString(ue.content),5)),ue.type=="link"?(openBlock(),createElementBlock("span",{key:3,style:normalizeStyle({color:ue.color,"text-decoration":"underline",cursor:"pointer"}),onClick:oe=>e(ue.url)},toDisplayString(ue.url),13,_hoisted_3)):createCommentVNode("",!0),ue.type=="pic"?(openBlock(),createBlock(re,{key:4,src:ue.url,"initial-index":i(ue.url),"preview-src-list":y(),style:{width:"120px",height:"auto"}},null,8,["src","initial-index","preview-src-list"])):createCommentVNode("",!0),createBaseVNode("span",null,"--from "+toDisplayString((ue.idol||"")+(ue.channel?""+ue.channel+"":"")+ue.time),1)]))),256))]),_:1})])}}}),elConfigProvider="",elPagination="",elOption="",elOptionGroup="",elSelect="",elTable="",elTableColumn="",elSpace="";var zhCn={name:"zh-cn",el:{colorpicker:{confirm:"",clear:""},datepicker:{now:"",today:"",cancel:"",clear:"",confirm:"",selectDate:"",selectTime:"",startDate:"",startTime:"",endDate:"",endTime:"",prevYear:"",nextYear:"",prevMonth:"",nextMonth:"",year:"",month1:"1 ",month2:"2 ",month3:"3 ",month4:"4 ",month5:"5 ",month6:"6 ",month7:"7 ",month8:"8 ",month9:"9 ",month10:"10 ",month11:"11 ",month12:"12 ",weeks:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},months:{jan:"",feb:"",mar:"",apr:"",may:"",jun:"",jul:"",aug:"",sep:"",oct:"",nov:"",dec:""}},select:{loading:"",noMatch:"",noData:"",placeholder:""},cascader:{noMatch:"",loading:"",placeholder:"",noData:""},pagination:{goto:"",pagesize:"/",total:" {total} ",pageClassifier:"",page:"",prev:"",next:"",currentPage:" {pager} ",prevPages:" {pager} ",nextPages:" {pager} ",deprecationWarning:" el-pagination "},messagebox:{title:"",confirm:"",cancel:"",error:"!"},upload:{deleteTip:" delete ",delete:"",preview:"",continue:""},table:{emptyText:"",confirmFilter:"",resetFilter:"",clearFilter:"",sumText:""},tour:{next:"",previous:"",finish:""},tree:{emptyText:""},transfer:{noMatch:"",noData:"",titles:[" 1"," 2"],filterPlaceholder:"",noCheckedFormat:" {total} ",hasCheckedFormat:" {checked}/{total} "},image:{error:""},pageHeader:{title:""},popconfirm:{confirmButtonText:"",cancelButtonText:""},carousel:{leftArrow:"",rightArrow:"",indicator:" {index}"}}};const _sfc_main$2=defineComponent({__name:"pic",setup(t){const r=ref({pageIndex:1,pageSize:5,total:0}),e=ref(),n=async i=>{let k=await saveImg(i);k.success?ElMessage.success(k.msg):ElMessage.error(k.msg),await y()},g=async i=>{let k=await delImg(i);k.success?ElMessage.success(k.msg):ElMessage.error(k.msg),await y()},y=async()=>{var i=await getCache(r.value);e.value=i.data,r.value.total=i.count};return onMounted(async()=>{await y()}),(i,k)=>{const $=ElButton,L=ElSpace,V=ElRow,z=ElTableColumn,re=ElImage,ie=ElTable,ue=ElPagination,le=ElConfigProvider;return openBlock(),createElementBlock("div",null,[createVNode(V,null,{default:withCtx(()=>[createVNode(L,{wrap:""},{default:withCtx(()=>[createVNode($,{type:"primary",icon:unref(refresh_default),onClick:y},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode(V,{style:{"margin-top":"10px"}},{default:withCtx(()=>[createVNode(ie,{data:e.value,stripe:"",style:{width:"100%",height:"calc(100vh - 150px)"}},{default:withCtx(()=>[createVNode(z,{type:"index",width:"50"}),createVNode(z,{prop:"createDate",label:""}),createVNode(z,{prop:"content",label:""},{default:withCtx(oe=>[createVNode(re,{style:{width:"auto",height:"120px"},src:oe.row.content,"preview-teleported":"","preview-src-list":[oe.row.content]},null,8,["src","preview-src-list"])]),_:1}),createVNode(z,{label:""},{default:withCtx(oe=>[createVNode($,{type:"primary",onClick:ae=>n(oe.row.id)},{default:withCtx(()=>[createTextVNode("")]),_:2},1032,["onClick"]),createVNode($,{type:"primary",onClick:ae=>g(oe.row.id)},{default:withCtx(()=>[createTextVNode("")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),createVNode(le,{locale:unref(zhCn)},{default:withCtx(()=>[createVNode(ue,{onSizeChange:k[0]||(k[0]=oe=>y()),onCurrentChange:k[1]||(k[1]=oe=>y()),background:"",class:"mt15",layout:"total, sizes, prev, pager, next, jumper",total:r.value.total,"page-sizes":[5,10,20,30],"current-page":r.value.pageIndex,"onUpdate:currentPage":k[2]||(k[2]=oe=>r.value.pageIndex=oe),"page-size":r.value.pageSize,"onUpdate:pageSize":k[3]||(k[3]=oe=>r.value.pageSize=oe)},null,8,["total","current-page","page-size"])]),_:1},8,["locale"])]),_:1})])}}}),_sfc_main$1=defineComponent({__name:"plugin",setup(t){const r=ref(),e=async()=>{var k=await getFun();r.value=k.data},n=async k=>{let $=await startPlugin(k);$.success?ElMessage.success($.msg):ElMessage.error($.msg),await e()},g=async k=>{let $=await stopPlugin(k);$.success?ElMessage.success($.msg):ElMessage.error($.msg),await e()},y=async k=>{let $=await delPlugin(k);$.success?ElMessage.success($.msg):ElMessage.error($.msg),await e()},i=async()=>{await e()};return onMounted(async()=>{await e()}),(k,$)=>{const L=ElButton,V=ElUpload,z=ElSpace,re=ElRow,ie=ElTableColumn,ue=ElTag,le=ElTable;return openBlock(),createElementBlock("div",null,[createVNode(re,null,{default:withCtx(()=>[createVNode(z,{wrap:""},{default:withCtx(()=>[createVNode(V,{accept:".dll",action:unref(ApiPrefix)+"/uploaddll",multiple:"","show-file-list":!1,"on-success":i},{default:withCtx(()=>[createVNode(L,{type:"info",icon:unref(upload_default)},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["icon"])]),_:1},8,["action"]),createVNode(L,{type:"primary",icon:unref(refresh_default),onClick:e},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode(re,{style:{"margin-top":"10px"}},{default:withCtx(()=>[createVNode(le,{data:r.value,stripe:"",style:{width:"100%",height:"calc(100vh - 100px)"}},{default:withCtx(()=>[createVNode(ie,{type:"index",width:"50"}),createVNode(ie,{label:"",width:"120"},{default:withCtx(oe=>[createTextVNode(toDisplayString(oe.row.pluginInfo.name),1)]),_:1}),createVNode(ie,{label:"",width:"120"},{default:withCtx(oe=>[createTextVNode(toDisplayString(oe.row.pluginInfo.version),1)]),_:1}),createVNode(ie,{label:"",width:"120"},{default:withCtx(oe=>[oe.row.status?(openBlock(),createBlock(ue,{key:0,type:"success"},{default:withCtx(()=>[createTextVNode("")]),_:1})):(openBlock(),createBlock(ue,{key:1,type:"danger"},{default:withCtx(()=>[createTextVNode("")]),_:1}))]),_:1}),createVNode(ie,{label:""},{default:withCtx(oe=>[createTextVNode(toDisplayString(oe.row.pluginInfo.desc),1)]),_:1}),createVNode(ie,{label:"",width:"180"},{default:withCtx(oe=>[oe.row.status?(openBlock(),createBlock(L,{key:1,type:"warning",onClick:ae=>g(oe.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("")]),_:2},1032,["onClick"])):(openBlock(),createBlock(L,{key:0,type:"primary",onClick:ae=>n(oe.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("")]),_:2},1032,["onClick"])),createVNode(L,{type:"danger",onClick:ae=>y(oe.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),_sfc_main=defineComponent({__name:"App",setup(t){const r=ref(),e=ref({bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}),n=["index","log","pic","plugin"],g=ref(),y=ref("index"),i=async V=>{n.find(z=>z===V)?(g.value&&(await g.value.checkData(),await L()),y.value=V):k("enable")},k=async V=>{var ie;n.find(ue=>ue===y.value)&&(y.value="config",setTimeout(async()=>{await k(V)},100));const z=document.getElementById(V),re=(ie=document.getElementById("pdom"))==null?void 0:ie.parentElement;if(re&&z){const ue=re.getBoundingClientRect(),oe=z.getBoundingClientRect().top+re.scrollTop-ue.top-28;re.scrollTo({top:oe,behavior:"smooth"})}},$=V=>{e.value=V},L=async()=>{let V=await getConfig();e.value=V.data.enableModule;let z=JSON.stringify(V.data.enableModule),re=JSON.parse(z);r.value=re};return onMounted(async()=>{await L()}),(V,z)=>{const re=ElIcon,ie=ElMenuItem,ue=ElSubMenu,le=ElMenu,oe=ElScrollbar,ae=ElAside,Ue=ElCard,de=ElMain,_e=ElContainer;return openBlock(),createBlock(_e,{class:"layout-container"},{default:withCtx(()=>[createVNode(Ue,null,{default:withCtx(()=>[createVNode(ae,{width:"15vw"},{default:withCtx(()=>[createVNode(oe,{style:{height:"calc(100vh - 30px)"}},{default:withCtx(()=>[createVNode(le,{"default-openeds":["99"],"default-active":"1"},{default:withCtx(()=>[createVNode(ie,{index:"1",onClick:z[0]||(z[0]=Ve=>i("index"))},{default:withCtx(()=>[createVNode(re,null,{default:withCtx(()=>[createVNode(unref(house_default))]),_:1}),createTextVNode("  ")]),_:1}),createVNode(ie,{index:"2",onClick:z[1]||(z[1]=Ve=>i("log"))},{default:withCtx(()=>[createVNode(re,null,{default:withCtx(()=>[createVNode(unref(tickets_default))]),_:1}),createTextVNode("  ")]),_:1}),createVNode(ie,{index:"3",onClick:z[2]||(z[2]=Ve=>i("pic"))},{default:withCtx(()=>[createVNode(re,null,{default:withCtx(()=>[createVNode(unref(picture_default))]),_:1}),createTextVNode("  ")]),_:1}),withDirectives(createVNode(ie,{index:"4",onClick:z[3]||(z[3]=Ve=>i("plugin"))},{default:withCtx(()=>[createVNode(re,null,{default:withCtx(()=>[createVNode(unref(cpu_default))]),_:1}),createTextVNode("  ")]),_:1},512),[[vShow,e.value.qq]]),createVNode(ue,{index:"99"},{title:withCtx(()=>[createVNode(re,null,{default:withCtx(()=>[createVNode(unref(set_up_default))]),_:1}),createTextVNode(" ")]),default:withCtx(()=>[createVNode(ie,{index:"99-0",onClick:z[4]||(z[4]=Ve=>i("config"))},{default:withCtx(()=>[createTextVNode("")]),_:1}),withDirectives(createVNode(ie,{index:"99-1",onClick:z[5]||(z[5]=Ve=>k("bot"))},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,e.value.bot]]),withDirectives(createVNode(ie,{index:"99-2",onClick:z[6]||(z[6]=Ve=>k("qq"))},{default:withCtx(()=>[createTextVNode("QQ")]),_:1},512),[[vShow,e.value.qq]]),withDirectives(createVNode(ie,{index:"99-3",onClick:z[7]||(z[7]=Ve=>k("wb"))},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,e.value.wb]]),withDirectives(createVNode(ie,{index:"99-4",onClick:z[8]||(z[8]=Ve=>k("kd"))},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,e.value.kd]]),withDirectives(createVNode(ie,{index:"99-5",onClick:z[9]||(z[9]=Ve=>k("bz"))},{default:withCtx(()=>[createTextVNode("B")]),_:1},512),[[vShow,e.value.bz]]),withDirectives(createVNode(ie,{index:"99-6",onClick:z[10]||(z[10]=Ve=>k("xhs"))},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,e.value.xhs]]),withDirectives(createVNode(ie,{index:"99-7",onClick:z[11]||(z[11]=Ve=>k("bd"))},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,e.value.bd]]),withDirectives(createVNode(ie,{index:"99-8",onClick:z[12]||(z[12]=Ve=>k("dy"))},{default:withCtx(()=>[createTextVNode("")]),_:1},512),[[vShow,e.value.dy]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Ue,{style:{width:"90%","margin-left":"10px"}},{default:withCtx(()=>[createVNode(_e,null,{default:withCtx(()=>[createVNode(de,{style:{"padding-left":"20px","padding-right":"20px"},id:"parentContainer"},{default:withCtx(()=>[withDirectives(createVNode(_sfc_main$e,{enable:e.value},null,8,["enable"]),[[vShow,y.value==="index"]]),withDirectives(createVNode(_sfc_main$3,null,null,512),[[vShow,y.value==="log"]]),y.value==="pic"?(openBlock(),createBlock(_sfc_main$2,{key:0})):createCommentVNode("",!0),y.value==="plugin"&&e.value.qq?(openBlock(),createBlock(_sfc_main$1,{key:1})):createCommentVNode("",!0),y.value==="config"?(openBlock(),createBlock(_sfc_main$4,{key:2,ref_key:"configRef",ref:g,enable:e.value,onTopEnableChange:$},null,8,["enable"])):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),App_vue_vue_type_style_index_0_scoped_9a74a924_lang="",_export_sfc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,g]of r)e[n]=g;return e},App=_export_sfc(_sfc_main,[["__scopeId","data-v-9a74a924"]]),app=createApp(App);app.mount("#app");
