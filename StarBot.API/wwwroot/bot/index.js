var DM=Object.defineProperty;var UM=(t,r,e)=>r in t?DM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var pd=(t,r,e)=>(UM(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))n(g);new MutationObserver(g=>{for(const y of g)if(y.type==="childList")for(const i of y.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(g){const y={};return g.integrity&&(y.integrity=g.integrity),g.referrerPolicy&&(y.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?y.credentials="include":g.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function n(g){if(g.ep)return;g.ep=!0;const y=e(g);fetch(g.href,y)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(t,r){const e=new Set(t.split(","));return r?n=>e.has(n.toLowerCase()):n=>e.has(n)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},hasOwnProperty$f=Object.prototype.hasOwnProperty,hasOwn=(t,r)=>hasOwnProperty$f.call(t,r),isArray$3=Array.isArray,isMap$2=t=>toTypeString(t)==="[object Map]",isSet$2=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isFunction$3=t=>typeof t=="function",isString$2=t=>typeof t=="string",isSymbol$1=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject$2(t)||isFunction$3(t))&&isFunction$3(t.then)&&isFunction$3(t.catch),objectToString$1=Object.prototype.toString,toTypeString=t=>objectToString$1.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$2=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$2(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(r,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,r)=>!Object.is(t,r),invokeArrayFns=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},def=(t,r,e,n=!1)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:n,value:e})},looseToNumber=t=>{const r=parseFloat(t);return isNaN(r)?t:r},toNumber$1=t=>{const r=isString$2(t)?Number(t):NaN;return isNaN(r)?t:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray$3(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],g=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(g)for(const y in g)r[y]=g[y]}return r}else if(isString$2(t)||isObject$2(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const r={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(t){let r="";if(isString$2(t))r=t;else if(isArray$3(t))for(let e=0;e<t.length;e++){const n=normalizeClass(t[e]);n&&(r+=n+" ")}else if(isObject$2(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,r){if(t.length!==r.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=looseEqual(t[n],r[n]);return e}function looseEqual(t,r){if(t===r)return!0;let e=isDate$1(t),n=isDate$1(r);if(e||n)return e&&n?t.getTime()===r.getTime():!1;if(e=isSymbol$1(t),n=isSymbol$1(r),e||n)return t===r;if(e=isArray$3(t),n=isArray$3(r),e||n)return e&&n?looseCompareArrays(t,r):!1;if(e=isObject$2(t),n=isObject$2(r),e||n){if(!e||!n)return!1;const g=Object.keys(t).length,y=Object.keys(r).length;if(g!==y)return!1;for(const i in t){const k=t.hasOwnProperty(i),L=r.hasOwnProperty(i);if(k&&!L||!k&&L||!looseEqual(t[i],r[i]))return!1}}return String(t)===String(r)}function looseIndexOf(t,r){return t.findIndex(e=>looseEqual(e,r))}const toDisplayString=t=>isString$2(t)?t:t==null?"":isArray$3(t)||isObject$2(t)&&(t.toString===objectToString$1||!isFunction$3(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,r)=>r&&r.__v_isRef?replacer(t,r.value):isMap$2(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,g],y)=>(e[stringifySymbol(n,y)+" =>"]=g,e),{})}:isSet$2(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>stringifySymbol(e))}:isSymbol$1(r)?stringifySymbol(r):isObject$2(r)&&!isArray$3(r)&&!isPlainObject$2(r)?String(r):r,stringifySymbol=(t,r="")=>{var e;return isSymbol$1(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=e}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,r=activeEffectScope){r&&r.active&&r.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeEffect;class ReactiveEffect{constructor(r,e,n,g){this.fn=r,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,g)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let r=0;r<this._depsLength;r++){const e=this.deps[r];if(e.computed&&(triggerComputed(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(r){this._dirtyLevel=r?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=shouldTrack,e=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=e,shouldTrack=r}}stop(){this.active&&(preCleanupEffect(this),postCleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function triggerComputed(t){return t.value}function preCleanupEffect(t){t._trackId++,t._depsLength=0}function postCleanupEffect(t){if(t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)cleanupDepEffect(t.deps[r],t);t.deps.length=t._depsLength}}function cleanupDepEffect(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const n=t.deps[t._depsLength];n!==r?(n&&cleanupDepEffect(n,t),t.deps[t._depsLength++]=r):t._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(t,r,e){pauseScheduling();for(const n of t.keys()){let g;n._dirtyLevel<r&&(g??(g=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=r),n._shouldSchedule&&(g??(g=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&queueEffectSchedulers.push(n.scheduler)))}resetScheduling()}const createDep=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(t,r,e){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let g=n.get(e);g||n.set(e,g=createDep(()=>n.delete(e))),trackEffect(activeEffect,g)}}function trigger(t,r,e,n,g,y){const i=targetMap.get(t);if(!i)return;let k=[];if(r==="clear")k=[...i.values()];else if(e==="length"&&isArray$3(t)){const L=Number(n);i.forEach(($,V)=>{(V==="length"||!isSymbol$1(V)&&V>=L)&&k.push($)})}else switch(e!==void 0&&k.push(i.get(e)),r){case"add":isArray$3(t)?isIntegerKey(e)&&k.push(i.get("length")):(k.push(i.get(ITERATE_KEY)),isMap$2(t)&&k.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(t)||(k.push(i.get(ITERATE_KEY)),isMap$2(t)&&k.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(t)&&k.push(i.get(ITERATE_KEY));break}pauseScheduling();for(const L of k)L&&triggerEffects(L,4);resetScheduling()}function getDepFromReactive(t,r){const e=targetMap.get(t);return e&&e.get(r)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$1)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=toRaw(this);for(let y=0,i=this.length;y<i;y++)track(n,"get",y+"");const g=n[r](...e);return g===-1||g===!1?n[r](...e.map(toRaw)):g}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){pauseTracking(),pauseScheduling();const n=toRaw(this)[r].apply(this,e);return resetScheduling(),resetTracking(),n}}),t}function hasOwnProperty$e(t){isSymbol$1(t)||(t=String(t));const r=toRaw(this);return track(r,"has",t),r.hasOwnProperty(t)}class BaseReactiveHandler{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const g=this._isReadonly,y=this._isShallow;if(e==="__v_isReactive")return!g;if(e==="__v_isReadonly")return g;if(e==="__v_isShallow")return y;if(e==="__v_raw")return n===(g?y?shallowReadonlyMap:readonlyMap:y?shallowReactiveMap:reactiveMap).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const i=isArray$3(r);if(!g){if(i&&hasOwn(arrayInstrumentations,e))return Reflect.get(arrayInstrumentations,e,n);if(e==="hasOwnProperty")return hasOwnProperty$e}const k=Reflect.get(r,e,n);return(isSymbol$1(e)?builtInSymbols.has(e):isNonTrackableKeys(e))||(g||track(r,"get",e),y)?k:isRef(k)?i&&isIntegerKey(e)?k:k.value:isObject$2(k)?g?readonly(k):reactive(k):k}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,e,n,g){let y=r[e];if(!this._isShallow){const L=isReadonly(y);if(!isShallow(n)&&!isReadonly(n)&&(y=toRaw(y),n=toRaw(n)),!isArray$3(r)&&isRef(y)&&!isRef(n))return L?!1:(y.value=n,!0)}const i=isArray$3(r)&&isIntegerKey(e)?Number(e)<r.length:hasOwn(r,e),k=Reflect.set(r,e,n,g);return r===toRaw(g)&&(i?hasChanged(n,y)&&trigger(r,"set",e,n):trigger(r,"add",e,n)),k}deleteProperty(r,e){const n=hasOwn(r,e);r[e];const g=Reflect.deleteProperty(r,e);return g&&n&&trigger(r,"delete",e,void 0),g}has(r,e){const n=Reflect.has(r,e);return(!isSymbol$1(e)||!builtInSymbols.has(e))&&track(r,"has",e),n}ownKeys(r){return track(r,"iterate",isArray$3(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,r,e=!1,n=!1){t=t.__v_raw;const g=toRaw(t),y=toRaw(r);e||(hasChanged(r,y)&&track(g,"get",r),track(g,"get",y));const{has:i}=getProto(g),k=n?toShallow:e?toReadonly:toReactive;if(i.call(g,r))return k(t.get(r));if(i.call(g,y))return k(t.get(y));t!==g&&t.get(r)}function has(t,r=!1){const e=this.__v_raw,n=toRaw(e),g=toRaw(t);return r||(hasChanged(t,g)&&track(n,"has",t),track(n,"has",g)),t===g?e.has(t):e.has(t)||e.has(g)}function size(t,r=!1){return t=t.__v_raw,!r&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const r=toRaw(this);return getProto(r).has.call(r,t)||(r.add(t),trigger(r,"add",t,t)),this}function set$1(t,r){r=toRaw(r);const e=toRaw(this),{has:n,get:g}=getProto(e);let y=n.call(e,t);y||(t=toRaw(t),y=n.call(e,t));const i=g.call(e,t);return e.set(t,r),y?hasChanged(r,i)&&trigger(e,"set",t,r):trigger(e,"add",t,r),this}function deleteEntry(t){const r=toRaw(this),{has:e,get:n}=getProto(r);let g=e.call(r,t);g||(t=toRaw(t),g=e.call(r,t)),n&&n.call(r,t);const y=r.delete(t);return g&&trigger(r,"delete",t,void 0),y}function clear(){const t=toRaw(this),r=t.size!==0,e=t.clear();return r&&trigger(t,"clear",void 0,void 0),e}function createForEach(t,r){return function(n,g){const y=this,i=y.__v_raw,k=toRaw(i),L=r?toShallow:t?toReadonly:toReactive;return!t&&track(k,"iterate",ITERATE_KEY),i.forEach(($,V)=>n.call(g,L($),L(V),y))}}function createIterableMethod(t,r,e){return function(...n){const g=this.__v_raw,y=toRaw(g),i=isMap$2(y),k=t==="entries"||t===Symbol.iterator&&i,L=t==="keys"&&i,$=g[t](...n),V=e?toShallow:r?toReadonly:toReactive;return!r&&track(y,"iterate",L?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:z,done:re}=$.next();return re?{value:z,done:re}:{value:k?[V(z[0]),V(z[1])]:V(z),done:re}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(){const t={get(y){return get$1(this,y)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(y){return get$1(this,y,!1,!0)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},e={get(y){return get$1(this,y,!0)},get size(){return size(this,!0)},has(y){return has.call(this,y,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(y){return get$1(this,y,!0,!0)},get size(){return size(this,!0)},has(y){return has.call(this,y,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=createIterableMethod(y,!1,!1),e[y]=createIterableMethod(y,!0,!1),r[y]=createIterableMethod(y,!1,!0),n[y]=createIterableMethod(y,!0,!0)}),[t,e,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,r){const e=r?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,g,y)=>g==="__v_isReactive"?!t:g==="__v_isReadonly"?t:g==="__v_raw"?n:Reflect.get(hasOwn(e,g)&&g in n?e:n,g,y)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,r,e,n,g){if(!isObject$2(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const y=g.get(t);if(y)return y;const i=getTargetType(t);if(i===0)return t;const k=new Proxy(t,i===2?n:e);return g.set(t,k),k}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const r=t&&t.__v_raw;return r?toRaw(r):t}function markRaw(t){return Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;class ComputedRefImpl{constructor(r,e,n,g){this.getter=r,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>r(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!g,this.__v_isReadonly=n}get value(){const r=toRaw(this);return(!r._cacheable||r.effect.dirty)&&hasChanged(r._value,r._value=r.effect.run())&&triggerRefValue(r,4),trackRefValue(r),r.effect._dirtyLevel>=2&&triggerRefValue(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function computed$1(t,r,e=!1){let n,g;const y=isFunction$3(t);return y?(n=t,g=NOOP):(n=t.get,g=t.set),new ComputedRefImpl(n,g,y||!g,e)}function trackRefValue(t){var r;shouldTrack&&activeEffect&&(t=toRaw(t),trackEffect(activeEffect,(r=t.dep)!=null?r:t.dep=createDep(()=>t.dep=void 0,t instanceof ComputedRefImpl?t:void 0)))}function triggerRefValue(t,r=4,e){t=toRaw(t);const n=t.dep;n&&triggerEffects(n,r)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,r){return isRef(t)?t:new RefImpl(t,r)}class RefImpl{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:toRaw(r),this._value=e?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const e=this.__v_isShallow||isShallow(r)||isReadonly(r);r=e?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:toReactive(r),triggerRefValue(this,4))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,r,e)=>unref(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const g=t[r];return isRef(g)&&!isRef(e)?(g.value=e,!0):Reflect.set(t,r,e,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const r=isArray$3(t)?new Array(t.length):{};for(const e in t)r[e]=propertyToRef(t,e);return r}class ObjectRefImpl{constructor(r,e,n){this._object=r,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,r,e){return isRef(t)?t:isFunction$3(t)?new GetterRefImpl(t):isObject$2(t)&&arguments.length>1?propertyToRef(t,r,e):ref(t)}function propertyToRef(t,r,e){const n=t[r];return isRef(n)?n:new ObjectRefImpl(t,r,e)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(t,...r){pauseTracking();const e=stack.length?stack[stack.length-1].component:null,n=e&&e.appContext.config.warnHandler,g=getComponentTrace();if(n)callWithErrorHandling(n,e,11,[t+r.map(y=>{var i,k;return(k=(i=y.toString)==null?void 0:i.call(y))!=null?k:JSON.stringify(y)}).join(""),e&&e.proxy,g.map(({vnode:y})=>`at <${formatComponentName(e,y.type)}>`).join(`
`),g]);else{const y=[`[Vue warn]: ${t}`,...r];g.length&&y.push(`
`,...formatTrace(g)),console.warn(...y)}resetTracking()}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const r=[];for(;t;){const e=r[0];e&&e.vnode===t?e.recurseCount++:r.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return r}function formatTrace(t){const r=[];return t.forEach((e,n)=>{r.push(...n===0?[]:[`
`],...formatTraceEntry(e))}),r}function formatTraceEntry({vnode:t,recurseCount:r}){const e=r>0?`... (${r} recursive calls)`:"",n=t.component?t.component.parent==null:!1,g=` at <${formatComponentName(t.component,t.type,n)}`,y=">"+e;return t.props?[g,...formatProps(t.props),y]:[g+y]}function formatProps(t){const r=[],e=Object.keys(t);return e.slice(0,3).forEach(n=>{r.push(...formatProp(n,t[n]))}),e.length>3&&r.push(" ..."),r}function formatProp(t,r,e){return isString$2(r)?(r=JSON.stringify(r),e?r:[`${t}=${r}`]):typeof r=="number"||typeof r=="boolean"||r==null?e?r:[`${t}=${r}`]:isRef(r)?(r=formatProp(t,toRaw(r.value),!0),e?r:[`${t}=Ref<`,r,">"]):isFunction$3(r)?[`${t}=fn${r.name?`<${r.name}>`:""}`]:(r=toRaw(r),e?r:[`${t}=`,r])}function callWithErrorHandling(t,r,e,n){try{return n?t(...n):t()}catch(g){handleError(g,r,e)}}function callWithAsyncErrorHandling(t,r,e,n){if(isFunction$3(t)){const g=callWithErrorHandling(t,r,e,n);return g&&isPromise(g)&&g.catch(y=>{handleError(y,r,e)}),g}if(isArray$3(t)){const g=[];for(let y=0;y<t.length;y++)g.push(callWithAsyncErrorHandling(t[y],r,e,n));return g}}function handleError(t,r,e,n=!0){const g=r?r.vnode:null;if(r){let y=r.parent;const i=r.proxy,k=`https://vuejs.org/error-reference/#runtime-${e}`;for(;y;){const $=y.ec;if($){for(let V=0;V<$.length;V++)if($[V](t,i,k)===!1)return}y=y.parent}const L=r.appContext.config.errorHandler;if(L){pauseTracking(),callWithErrorHandling(L,null,10,[t,i,k]),resetTracking();return}}logError(t,e,g,n)}function logError(t,r,e,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const r=currentFlushPromise||resolvedPromise;return t?r.then(this?t.bind(this):t):r}function findInsertionIndex(t){let r=flushIndex+1,e=queue.length;for(;r<e;){const n=r+e>>>1,g=queue[n],y=getId(g);y<t||y===t&&g.pre?r=n+1:e=n}return r}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const r=queue.indexOf(t);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(t){isArray$3(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,r,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const n=queue[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;queue.splice(e,1),e--,n()}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)].sort((e,n)=>getId(e)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,r)=>{const e=getId(t)-getId(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let g=e;const y=r.startsWith("update:"),i=y&&r.slice(7);if(i&&i in n){const V=`${i==="modelValue"?"model":i}Modifiers`,{number:z,trim:re}=n[V]||EMPTY_OBJ;re&&(g=e.map(oe=>isString$2(oe)?oe.trim():oe)),z&&(g=e.map(looseToNumber))}let k,L=n[k=toHandlerKey(r)]||n[k=toHandlerKey(camelize(r))];!L&&y&&(L=n[k=toHandlerKey(hyphenate(r))]),L&&callWithAsyncErrorHandling(L,t,6,g);const $=n[k+"Once"];if($){if(!t.emitted)t.emitted={};else if(t.emitted[k])return;t.emitted[k]=!0,callWithAsyncErrorHandling($,t,6,g)}}function normalizeEmitsOptions(t,r,e=!1){const n=r.emitsCache,g=n.get(t);if(g!==void 0)return g;const y=t.emits;let i={},k=!1;if(!isFunction$3(t)){const L=$=>{const V=normalizeEmitsOptions($,r,!0);V&&(k=!0,extend$1(i,V))};!e&&r.mixins.length&&r.mixins.forEach(L),t.extends&&L(t.extends),t.mixins&&t.mixins.forEach(L)}return!y&&!k?(isObject$2(t)&&n.set(t,null),null):(isArray$3(y)?y.forEach(L=>i[L]=null):extend$1(i,y),isObject$2(t)&&n.set(t,i),i)}function isEmitListener(t,r){return!t||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(t,r[0].toLowerCase()+r.slice(1))||hasOwn(t,hyphenate(r))||hasOwn(t,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const r=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,r}function withCtx(t,r=currentRenderingInstance,e){if(!r||t._n)return t;const n=(...g)=>{n._d&&setBlockTracking(-1);const y=setCurrentRenderingInstance(r);let i;try{i=t(...g)}finally{setCurrentRenderingInstance(y),n._d&&setBlockTracking(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:r,vnode:e,proxy:n,withProxy:g,propsOptions:[y],slots:i,attrs:k,emit:L,render:$,renderCache:V,props:z,data:re,setupState:oe,ctx:le,inheritAttrs:ue}=t,ie=setCurrentRenderingInstance(t);let ae,Fe;try{if(e.shapeFlag&4){const Ne=g||n,Ve=Ne;ae=normalizeVNode($.call(Ve,Ne,V,z,oe,re,le)),Fe=k}else{const Ne=r;ae=normalizeVNode(Ne.length>1?Ne(z,{attrs:k,slots:i,emit:L}):Ne(z,null)),Fe=r.props?k:getFunctionalFallthrough(k)}}catch(Ne){blockStack.length=0,handleError(Ne,t,1),ae=createVNode(Comment)}let de=ae;if(Fe&&ue!==!1){const Ne=Object.keys(Fe),{shapeFlag:Ve}=de;Ne.length&&Ve&7&&(y&&Ne.some(isModelListener)&&(Fe=filterModelListeners(Fe,y)),de=cloneVNode(de,Fe,!1,!0))}return e.dirs&&(de=cloneVNode(de,null,!1,!0),de.dirs=de.dirs?de.dirs.concat(e.dirs):e.dirs),e.transition&&(de.transition=e.transition),ae=de,setCurrentRenderingInstance(ie),ae}const getFunctionalFallthrough=t=>{let r;for(const e in t)(e==="class"||e==="style"||isOn(e))&&((r||(r={}))[e]=t[e]);return r},filterModelListeners=(t,r)=>{const e={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function shouldUpdateComponent(t,r,e){const{props:n,children:g,component:y}=t,{props:i,children:k,patchFlag:L}=r,$=y.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&L>=0){if(L&1024)return!0;if(L&16)return n?hasPropsChanged(n,i,$):!!i;if(L&8){const V=r.dynamicProps;for(let z=0;z<V.length;z++){const re=V[z];if(i[re]!==n[re]&&!isEmitListener($,re))return!0}}}else return(g||k)&&(!k||!k.$stable)?!0:n===i?!1:n?i?hasPropsChanged(n,i,$):!0:!!i;return!1}function hasPropsChanged(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let g=0;g<n.length;g++){const y=n[g];if(r[y]!==t[y]&&!isEmitListener(e,y))return!0}return!1}function updateHOCHostEl({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,r){return resolveAsset(COMPONENTS,t,!0,r)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$2(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,r,e=!0,n=!1){const g=currentRenderingInstance||currentInstance;if(g){const y=g.type;if(t===COMPONENTS){const k=getComponentName(y,!1);if(k&&(k===r||k===camelize(r)||k===capitalize$1(camelize(r))))return y}const i=resolve(g[t]||y[t],r)||resolve(g.appContext[t],r);return!i&&n?y:i}}function resolve(t,r){return t&&(t[r]||t[camelize(r)]||t[capitalize$1(camelize(r))])}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,r){r&&r.pendingBranch?isArray$3(t)?r.effects.push(...t):r.effects.push(t):queuePostFlushCb(t)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,r){return doWatch(t,null,r)}const INITIAL_WATCHER_VALUE={};function watch(t,r,e){return doWatch(t,r,e)}function doWatch(t,r,{immediate:e,deep:n,flush:g,once:y,onTrack:i,onTrigger:k}=EMPTY_OBJ){if(r&&y){const ze=r;r=(...jt)=>{ze(...jt),Ve()}}const L=currentInstance,$=ze=>n===!0?ze:traverse(ze,n===!1?1:void 0);let V,z=!1,re=!1;if(isRef(t)?(V=()=>t.value,z=isShallow(t)):isReactive(t)?(V=()=>$(t),z=!0):isArray$3(t)?(re=!0,z=t.some(ze=>isReactive(ze)||isShallow(ze)),V=()=>t.map(ze=>{if(isRef(ze))return ze.value;if(isReactive(ze))return $(ze);if(isFunction$3(ze))return callWithErrorHandling(ze,L,2)})):isFunction$3(t)?r?V=()=>callWithErrorHandling(t,L,2):V=()=>(oe&&oe(),callWithAsyncErrorHandling(t,L,3,[le])):V=NOOP,r&&n){const ze=V;V=()=>traverse(ze())}let oe,le=ze=>{oe=de.onStop=()=>{callWithErrorHandling(ze,L,4),oe=de.onStop=void 0}},ue;if(isInSSRComponentSetup)if(le=NOOP,r?e&&callWithAsyncErrorHandling(r,L,3,[V(),re?[]:void 0,le]):V(),g==="sync"){const ze=useSSRContext();ue=ze.__watcherHandles||(ze.__watcherHandles=[])}else return NOOP;let ie=re?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const ae=()=>{if(!(!de.active||!de.dirty))if(r){const ze=de.run();(n||z||(re?ze.some((jt,kt)=>hasChanged(jt,ie[kt])):hasChanged(ze,ie)))&&(oe&&oe(),callWithAsyncErrorHandling(r,L,3,[ze,ie===INITIAL_WATCHER_VALUE?void 0:re&&ie[0]===INITIAL_WATCHER_VALUE?[]:ie,le]),ie=ze)}else de.run()};ae.allowRecurse=!!r;let Fe;g==="sync"?Fe=ae:g==="post"?Fe=()=>queuePostRenderEffect(ae,L&&L.suspense):(ae.pre=!0,L&&(ae.id=L.uid),Fe=()=>queueJob(ae));const de=new ReactiveEffect(V,NOOP,Fe),Ne=getCurrentScope(),Ve=()=>{de.stop(),Ne&&remove(Ne.effects,de)};return r?e?ae():ie=de.run():g==="post"?queuePostRenderEffect(de.run.bind(de),L&&L.suspense):de.run(),ue&&ue.push(Ve),Ve}function instanceWatch(t,r,e){const n=this.proxy,g=isString$2(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let y;isFunction$3(r)?y=r:(y=r.handler,e=r);const i=setCurrentInstance(this),k=doWatch(g,y.bind(n),e);return i(),k}function createPathGetter(t,r){const e=r.split(".");return()=>{let n=t;for(let g=0;g<e.length&&n;g++)n=n[e[g]];return n}}function traverse(t,r=1/0,e){if(r<=0||!isObject$2(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),r--,isRef(t))traverse(t.value,r,e);else if(isArray$3(t))for(let n=0;n<t.length;n++)traverse(t[n],r,e);else if(isSet$2(t)||isMap$2(t))t.forEach(n=>{traverse(n,r,e)});else if(isPlainObject$2(t))for(const n in t)traverse(t[n],r,e);return t}function withDirectives(t,r){if(currentRenderingInstance===null)return t;const e=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,n=t.dirs||(t.dirs=[]);for(let g=0;g<r.length;g++){let[y,i,k,L=EMPTY_OBJ]=r[g];y&&(isFunction$3(y)&&(y={mounted:y,updated:y}),y.deep&&traverse(i),n.push({dir:y,instance:e,value:i,oldValue:void 0,arg:k,modifiers:L}))}return t}function invokeDirectiveHook(t,r,e,n){const g=t.dirs,y=r&&r.dirs;for(let i=0;i<g.length;i++){const k=g[i];y&&(k.oldValue=y[i].value);let L=k.dir[n];L&&(pauseTracking(),callWithAsyncErrorHandling(L,e,8,[t.el,k,t,r]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();return()=>{const g=r.default&&getTransitionRawChildren(r.default(),!0);if(!g||!g.length)return;let y=g[0];if(g.length>1){for(const re of g)if(re.type!==Comment){y=re;break}}const i=toRaw(t),{mode:k}=i;if(n.isLeaving)return emptyPlaceholder(y);const L=getKeepAliveChild(y);if(!L)return emptyPlaceholder(y);const $=resolveTransitionHooks(L,i,n,e);setTransitionHooks(L,$);const V=e.subTree,z=V&&getKeepAliveChild(V);if(z&&z.type!==Comment&&!isSameVNodeType(L,z)){const re=resolveTransitionHooks(z,i,n,e);if(setTransitionHooks(z,re),k==="out-in"&&L.type!==Comment)return n.isLeaving=!0,re.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},emptyPlaceholder(y);k==="in-out"&&L.type!==Comment&&(re.delayLeave=(oe,le,ue)=>{const ie=getLeavingNodesForType(n,z);ie[String(z.key)]=z,oe[leaveCbKey]=()=>{le(),oe[leaveCbKey]=void 0,delete $.delayedLeave},$.delayedLeave=ue})}return y}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function resolveTransitionHooks(t,r,e,n){const{appear:g,mode:y,persisted:i=!1,onBeforeEnter:k,onEnter:L,onAfterEnter:$,onEnterCancelled:V,onBeforeLeave:z,onLeave:re,onAfterLeave:oe,onLeaveCancelled:le,onBeforeAppear:ue,onAppear:ie,onAfterAppear:ae,onAppearCancelled:Fe}=r,de=String(t.key),Ne=getLeavingNodesForType(e,t),Ve=(kt,Et)=>{kt&&callWithAsyncErrorHandling(kt,n,9,Et)},ze=(kt,Et)=>{const lr=Et[1];Ve(kt,Et),isArray$3(kt)?kt.every(tr=>tr.length<=1)&&lr():kt.length<=1&&lr()},jt={mode:y,persisted:i,beforeEnter(kt){let Et=k;if(!e.isMounted)if(g)Et=ue||k;else return;kt[leaveCbKey]&&kt[leaveCbKey](!0);const lr=Ne[de];lr&&isSameVNodeType(t,lr)&&lr.el[leaveCbKey]&&lr.el[leaveCbKey](),Ve(Et,[kt])},enter(kt){let Et=L,lr=$,tr=V;if(!e.isMounted)if(g)Et=ie||L,lr=ae||$,tr=Fe||V;else return;let or=!1;const dr=kt[enterCbKey$1]=cr=>{or||(or=!0,cr?Ve(tr,[kt]):Ve(lr,[kt]),jt.delayedLeave&&jt.delayedLeave(),kt[enterCbKey$1]=void 0)};Et?ze(Et,[kt,dr]):dr()},leave(kt,Et){const lr=String(t.key);if(kt[enterCbKey$1]&&kt[enterCbKey$1](!0),e.isUnmounting)return Et();Ve(z,[kt]);let tr=!1;const or=kt[leaveCbKey]=dr=>{tr||(tr=!0,Et(),dr?Ve(le,[kt]):Ve(oe,[kt]),kt[leaveCbKey]=void 0,Ne[lr]===t&&delete Ne[lr])};Ne[lr]=t,re?ze(re,[kt,or]):or()},clone(kt){return resolveTransitionHooks(kt,r,e,n)}};return jt}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){if(!isKeepAlive(t))return t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&isFunction$3(e.default))return e.default()}}function setTransitionHooks(t,r){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function getTransitionRawChildren(t,r=!1,e){let n=[],g=0;for(let y=0;y<t.length;y++){let i=t[y];const k=e==null?i.key:String(e)+String(i.key!=null?i.key:y);i.type===Fragment?(i.patchFlag&128&&g++,n=n.concat(getTransitionRawChildren(i.children,r,k))):(r||i.type!==Comment)&&n.push(k!=null?cloneVNode(i,{key:k}):i)}if(g>1)for(let y=0;y<n.length;y++)n[y].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,r){return isFunction$3(t)?(()=>extend$1({name:t.name},r,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,r){registerKeepAliveHook(t,"a",r)}function onDeactivated(t,r){registerKeepAliveHook(t,"da",r)}function registerKeepAliveHook(t,r,e=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let g=e;for(;g;){if(g.isDeactivated)return;g=g.parent}return t()});if(injectHook(r,n,e),e){let g=e.parent;for(;g&&g.parent;)isKeepAlive(g.parent.vnode)&&injectToKeepAliveRoot(n,r,e,g),g=g.parent}}function injectToKeepAliveRoot(t,r,e,n){const g=injectHook(r,t,n,!0);onUnmounted(()=>{remove(n[r],g)},e)}function injectHook(t,r,e=currentInstance,n=!1){if(e){const g=e[t]||(e[t]=[]),y=r.__weh||(r.__weh=(...i)=>{if(e.isUnmounted)return;pauseTracking();const k=setCurrentInstance(e),L=callWithAsyncErrorHandling(r,e,t,i);return k(),resetTracking(),L});return n?g.unshift(y):g.push(y),y}}const createHook=t=>(r,e=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>r(...n),e),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,r=currentInstance){injectHook("ec",t,r)}function renderList(t,r,e,n){let g;const y=e&&e[n];if(isArray$3(t)||isString$2(t)){g=new Array(t.length);for(let i=0,k=t.length;i<k;i++)g[i]=r(t[i],i,void 0,y&&y[i])}else if(typeof t=="number"){g=new Array(t);for(let i=0;i<t;i++)g[i]=r(i+1,i,void 0,y&&y[i])}else if(isObject$2(t))if(t[Symbol.iterator])g=Array.from(t,(i,k)=>r(i,k,void 0,y&&y[k]));else{const i=Object.keys(t);g=new Array(i.length);for(let k=0,L=i.length;k<L;k++){const $=i[k];g[k]=r(t[$],$,k,y&&y[k])}}else g=[];return e&&(e[n]=g),g}function createSlots(t,r){for(let e=0;e<r.length;e++){const n=r[e];if(isArray$3(n))for(let g=0;g<n.length;g++)t[n[g].name]=n[g].fn;else n&&(t[n.name]=n.key?(...g)=>{const y=n.fn(...g);return y&&(y.key=n.key),y}:n.fn)}return t}function renderSlot(t,r,e={},n,g){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return r!=="default"&&(e.name=r),createVNode("slot",e,n&&n());let y=t[r];y&&y._c&&(y._d=!1),openBlock();const i=y&&ensureValidVNode(y(e)),k=createBlock(Fragment,{key:e.key||i&&i.key||`_${r}`},i||(n?n():[]),i&&t._===1?64:-2);return!g&&k.scopeId&&(k.slotScopeIds=[k.scopeId+"-s"]),y&&y._c&&(y._d=!0),k}function ensureValidVNode(t){return t.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?t:null}function toHandlers(t,r){const e={};for(const n in t)e[r&&/[A-Z]/.test(n)?`on:${n}`:toHandlerKey(n)]=t[n];return e}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,r)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,r),PublicInstanceProxyHandlers={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:n,data:g,props:y,accessCache:i,type:k,appContext:L}=t;let $;if(r[0]!=="$"){const oe=i[r];if(oe!==void 0)switch(oe){case 1:return n[r];case 2:return g[r];case 4:return e[r];case 3:return y[r]}else{if(hasSetupBinding(n,r))return i[r]=1,n[r];if(g!==EMPTY_OBJ&&hasOwn(g,r))return i[r]=2,g[r];if(($=t.propsOptions[0])&&hasOwn($,r))return i[r]=3,y[r];if(e!==EMPTY_OBJ&&hasOwn(e,r))return i[r]=4,e[r];shouldCacheAccess&&(i[r]=0)}}const V=publicPropertiesMap[r];let z,re;if(V)return r==="$attrs"&&track(t.attrs,"get",""),V(t);if((z=k.__cssModules)&&(z=z[r]))return z;if(e!==EMPTY_OBJ&&hasOwn(e,r))return i[r]=4,e[r];if(re=L.config.globalProperties,hasOwn(re,r))return re[r]},set({_:t},r,e){const{data:n,setupState:g,ctx:y}=t;return hasSetupBinding(g,r)?(g[r]=e,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=e,!0):hasOwn(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(y[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:g,propsOptions:y}},i){let k;return!!e[i]||t!==EMPTY_OBJ&&hasOwn(t,i)||hasSetupBinding(r,i)||(k=y[0])&&hasOwn(k,i)||hasOwn(n,i)||hasOwn(publicPropertiesMap,i)||hasOwn(g.config.globalProperties,i)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:hasOwn(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function normalizePropsOrEmits(t){return isArray$3(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const r=resolveMergedOptions(t),e=t.proxy,n=t.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,t,"bc");const{data:g,computed:y,methods:i,watch:k,provide:L,inject:$,created:V,beforeMount:z,mounted:re,beforeUpdate:oe,updated:le,activated:ue,deactivated:ie,beforeDestroy:ae,beforeUnmount:Fe,destroyed:de,unmounted:Ne,render:Ve,renderTracked:ze,renderTriggered:jt,errorCaptured:kt,serverPrefetch:Et,expose:lr,inheritAttrs:tr,components:or,directives:dr,filters:cr}=r;if($&&resolveInjections($,n,null),i)for(const ar in i){const gr=i[ar];isFunction$3(gr)&&(n[ar]=gr.bind(e))}if(g){const ar=g.call(e,e);isObject$2(ar)&&(t.data=reactive(ar))}if(shouldCacheAccess=!0,y)for(const ar in y){const gr=y[ar],pr=isFunction$3(gr)?gr.bind(e,e):isFunction$3(gr.get)?gr.get.bind(e,e):NOOP,yr=!isFunction$3(gr)&&isFunction$3(gr.set)?gr.set.bind(e):NOOP,Sr=computed({get:pr,set:yr});Object.defineProperty(n,ar,{enumerable:!0,configurable:!0,get:()=>Sr.value,set:wr=>Sr.value=wr})}if(k)for(const ar in k)createWatcher(k[ar],n,e,ar);if(L){const ar=isFunction$3(L)?L.call(e):L;Reflect.ownKeys(ar).forEach(gr=>{provide(gr,ar[gr])})}V&&callHook$1(V,t,"c");function ur(ar,gr){isArray$3(gr)?gr.forEach(pr=>ar(pr.bind(e))):gr&&ar(gr.bind(e))}if(ur(onBeforeMount,z),ur(onMounted,re),ur(onBeforeUpdate,oe),ur(onUpdated,le),ur(onActivated,ue),ur(onDeactivated,ie),ur(onErrorCaptured,kt),ur(onRenderTracked,ze),ur(onRenderTriggered,jt),ur(onBeforeUnmount,Fe),ur(onUnmounted,Ne),ur(onServerPrefetch,Et),isArray$3(lr))if(lr.length){const ar=t.exposed||(t.exposed={});lr.forEach(gr=>{Object.defineProperty(ar,gr,{get:()=>e[gr],set:pr=>e[gr]=pr})})}else t.exposed||(t.exposed={});Ve&&t.render===NOOP&&(t.render=Ve),tr!=null&&(t.inheritAttrs=tr),or&&(t.components=or),dr&&(t.directives=dr)}function resolveInjections(t,r,e=NOOP){isArray$3(t)&&(t=normalizeInject(t));for(const n in t){const g=t[n];let y;isObject$2(g)?"default"in g?y=inject(g.from||n,g.default,!0):y=inject(g.from||n):y=inject(g),isRef(y)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>y.value,set:i=>y.value=i}):r[n]=y}}function callHook$1(t,r,e){callWithAsyncErrorHandling(isArray$3(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function createWatcher(t,r,e,n){const g=n.includes(".")?createPathGetter(e,n):()=>e[n];if(isString$2(t)){const y=r[t];isFunction$3(y)&&watch(g,y)}else if(isFunction$3(t))watch(g,t.bind(e));else if(isObject$2(t))if(isArray$3(t))t.forEach(y=>createWatcher(y,r,e,n));else{const y=isFunction$3(t.handler)?t.handler.bind(e):r[t.handler];isFunction$3(y)&&watch(g,y,t)}}function resolveMergedOptions(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:g,optionsCache:y,config:{optionMergeStrategies:i}}=t.appContext,k=y.get(r);let L;return k?L=k:!g.length&&!e&&!n?L=r:(L={},g.length&&g.forEach($=>mergeOptions$1(L,$,i,!0)),mergeOptions$1(L,r,i)),isObject$2(r)&&y.set(r,L),L}function mergeOptions$1(t,r,e,n=!1){const{mixins:g,extends:y}=r;y&&mergeOptions$1(t,y,e,!0),g&&g.forEach(i=>mergeOptions$1(t,i,e,!0));for(const i in r)if(!(n&&i==="expose")){const k=internalOptionMergeStrats[i]||e&&e[i];t[i]=k?k(t[i],r[i]):r[i]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,r){return r?t?function(){return extend$1(isFunction$3(t)?t.call(this,this):t,isFunction$3(r)?r.call(this,this):r)}:r:t}function mergeInject(t,r){return mergeObjectOptions(normalizeInject(t),normalizeInject(r))}function normalizeInject(t){if(isArray$3(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function mergeAsArray(t,r){return t?[...new Set([].concat(t,r))]:r}function mergeObjectOptions(t,r){return t?extend$1(Object.create(null),t,r):r}function mergeEmitsOrPropsOptions(t,r){return t?isArray$3(t)&&isArray$3(r)?[...new Set([...t,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(t,r){if(!t)return r;if(!r)return t;const e=extend$1(Object.create(null),t);for(const n in r)e[n]=mergeAsArray(t[n],r[n]);return e}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,r){return function(n,g=null){isFunction$3(n)||(n=extend$1({},n)),g!=null&&!isObject$2(g)&&(g=null);const y=createAppContext(),i=new WeakSet;let k=!1;const L=y.app={_uid:uid$1++,_component:n,_props:g,_container:null,_context:y,_instance:null,version,get config(){return y.config},set config($){},use($,...V){return i.has($)||($&&isFunction$3($.install)?(i.add($),$.install(L,...V)):isFunction$3($)&&(i.add($),$(L,...V))),L},mixin($){return y.mixins.includes($)||y.mixins.push($),L},component($,V){return V?(y.components[$]=V,L):y.components[$]},directive($,V){return V?(y.directives[$]=V,L):y.directives[$]},mount($,V,z){if(!k){const re=createVNode(n,g);return re.appContext=y,z===!0?z="svg":z===!1&&(z=void 0),V&&r?r(re,$):t(re,$,z),k=!0,L._container=$,$.__vue_app__=L,getExposeProxy(re.component)||re.component.proxy}},unmount(){k&&(t(null,L._container),delete L._container.__vue_app__)},provide($,V){return y.provides[$]=V,L},runWithContext($){const V=currentApp;currentApp=L;try{return $()}finally{currentApp=V}}};return L}}let currentApp=null;function provide(t,r){if(currentInstance){let e=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===e&&(e=currentInstance.provides=Object.create(n)),e[t]=r}}function inject(t,r,e=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const g=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(g&&t in g)return g[t];if(arguments.length>1)return e&&isFunction$3(r)?r.call(n&&n.proxy):r}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,r,e,n=!1){const g={},y=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,r,g,y);for(const i in t.propsOptions[0])i in g||(g[i]=void 0);e?t.props=n?g:shallowReactive(g):t.type.props?t.props=g:t.props=y,t.attrs=y}function updateProps(t,r,e,n){const{props:g,attrs:y,vnode:{patchFlag:i}}=t,k=toRaw(g),[L]=t.propsOptions;let $=!1;if((n||i>0)&&!(i&16)){if(i&8){const V=t.vnode.dynamicProps;for(let z=0;z<V.length;z++){let re=V[z];if(isEmitListener(t.emitsOptions,re))continue;const oe=r[re];if(L)if(hasOwn(y,re))oe!==y[re]&&(y[re]=oe,$=!0);else{const le=camelize(re);g[le]=resolvePropValue(L,k,le,oe,t,!1)}else oe!==y[re]&&(y[re]=oe,$=!0)}}}else{setFullProps(t,r,g,y)&&($=!0);let V;for(const z in k)(!r||!hasOwn(r,z)&&((V=hyphenate(z))===z||!hasOwn(r,V)))&&(L?e&&(e[z]!==void 0||e[V]!==void 0)&&(g[z]=resolvePropValue(L,k,z,void 0,t,!0)):delete g[z]);if(y!==k)for(const z in y)(!r||!hasOwn(r,z))&&(delete y[z],$=!0)}$&&trigger(t.attrs,"set","")}function setFullProps(t,r,e,n){const[g,y]=t.propsOptions;let i=!1,k;if(r)for(let L in r){if(isReservedProp(L))continue;const $=r[L];let V;g&&hasOwn(g,V=camelize(L))?!y||!y.includes(V)?e[V]=$:(k||(k={}))[V]=$:isEmitListener(t.emitsOptions,L)||(!(L in n)||$!==n[L])&&(n[L]=$,i=!0)}if(y){const L=toRaw(e),$=k||EMPTY_OBJ;for(let V=0;V<y.length;V++){const z=y[V];e[z]=resolvePropValue(g,L,z,$[z],t,!hasOwn($,z))}}return i}function resolvePropValue(t,r,e,n,g,y){const i=t[e];if(i!=null){const k=hasOwn(i,"default");if(k&&n===void 0){const L=i.default;if(i.type!==Function&&!i.skipFactory&&isFunction$3(L)){const{propsDefaults:$}=g;if(e in $)n=$[e];else{const V=setCurrentInstance(g);n=$[e]=L.call(null,r),V()}}else n=L}i[0]&&(y&&!k?n=!1:i[1]&&(n===""||n===hyphenate(e))&&(n=!0))}return n}function normalizePropsOptions(t,r,e=!1){const n=r.propsCache,g=n.get(t);if(g)return g;const y=t.props,i={},k=[];let L=!1;if(!isFunction$3(t)){const V=z=>{L=!0;const[re,oe]=normalizePropsOptions(z,r,!0);extend$1(i,re),oe&&k.push(...oe)};!e&&r.mixins.length&&r.mixins.forEach(V),t.extends&&V(t.extends),t.mixins&&t.mixins.forEach(V)}if(!y&&!L)return isObject$2(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$3(y))for(let V=0;V<y.length;V++){const z=camelize(y[V]);validatePropName(z)&&(i[z]=EMPTY_OBJ)}else if(y)for(const V in y){const z=camelize(V);if(validatePropName(z)){const re=y[V],oe=i[z]=isArray$3(re)||isFunction$3(re)?{type:re}:extend$1({},re);if(oe){const le=getTypeIndex(Boolean,oe.type),ue=getTypeIndex(String,oe.type);oe[0]=le>-1,oe[1]=ue<0||le<ue,(le>-1||hasOwn(oe,"default"))&&k.push(z)}}}const $=[i,k];return isObject$2(t)&&n.set(t,$),$}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}function getType(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function isSameType(t,r){return getType(t)===getType(r)}function getTypeIndex(t,r){return isArray$3(r)?r.findIndex(e=>isSameType(e,t)):isFunction$3(r)&&isSameType(r,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$3(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,r,e)=>{if(r._n)return r;const n=withCtx((...g)=>normalizeSlotValue(r(...g)),e);return n._c=!1,n},normalizeObjectSlots=(t,r,e)=>{const n=t._ctx;for(const g in t){if(isInternalKey(g))continue;const y=t[g];if(isFunction$3(y))r[g]=normalizeSlot(g,y,n);else if(y!=null){const i=normalizeSlotValue(y);r[g]=()=>i}}},normalizeVNodeSlots=(t,r)=>{const e=normalizeSlotValue(r);t.slots.default=()=>e},initSlots=(t,r)=>{const e=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const n=r._;n?(extend$1(e,r),def(e,"_",n,!0)):normalizeObjectSlots(r,e)}else r&&normalizeVNodeSlots(t,r)},updateSlots=(t,r,e)=>{const{vnode:n,slots:g}=t;let y=!0,i=EMPTY_OBJ;if(n.shapeFlag&32){const k=r._;k?e&&k===1?y=!1:(extend$1(g,r),!e&&k===1&&delete g._):(y=!r.$stable,normalizeObjectSlots(r,g)),i=r}else r&&(normalizeVNodeSlots(t,r),i={default:1});if(y)for(const k in g)!isInternalKey(k)&&i[k]==null&&delete g[k]};function setRef(t,r,e,n,g=!1){if(isArray$3(t)){t.forEach((re,oe)=>setRef(re,r&&(isArray$3(r)?r[oe]:r),e,n,g));return}if(isAsyncWrapper(n)&&!g)return;const y=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,i=g?null:y,{i:k,r:L}=t,$=r&&r.r,V=k.refs===EMPTY_OBJ?k.refs={}:k.refs,z=k.setupState;if($!=null&&$!==L&&(isString$2($)?(V[$]=null,hasOwn(z,$)&&(z[$]=null)):isRef($)&&($.value=null)),isFunction$3(L))callWithErrorHandling(L,k,12,[i,V]);else{const re=isString$2(L),oe=isRef(L);if(re||oe){const le=()=>{if(t.f){const ue=re?hasOwn(z,L)?z[L]:V[L]:L.value;g?isArray$3(ue)&&remove(ue,y):isArray$3(ue)?ue.includes(y)||ue.push(y):re?(V[L]=[y],hasOwn(z,L)&&(z[L]=V[L])):(L.value=[y],t.k&&(V[t.k]=L.value))}else re?(V[L]=i,hasOwn(z,L)&&(z[L]=i)):oe&&(L.value=i,t.k&&(V[t.k]=i))};i?(le.id=-1,queuePostRenderEffect(le,e)):le()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,r){const e=getGlobalThis();e.__VUE__=!0;const{insert:n,remove:g,patchProp:y,createElement:i,createText:k,createComment:L,setText:$,setElementText:V,parentNode:z,nextSibling:re,setScopeId:oe=NOOP,insertStaticContent:le}=t,ue=(vr,Tr,Br,Lr=null,Fr=null,qr=null,Vr=void 0,Qr=null,Sn=!!Tr.dynamicChildren)=>{if(vr===Tr)return;vr&&!isSameVNodeType(vr,Tr)&&(Lr=Pr(vr),wr(vr,Fr,qr,!0),vr=null),Tr.patchFlag===-2&&(Sn=!1,Tr.dynamicChildren=null);const{type:Mn,ref:Xr,shapeFlag:Wn}=Tr;switch(Mn){case Text:ie(vr,Tr,Br,Lr);break;case Comment:ae(vr,Tr,Br,Lr);break;case Static:vr==null&&Fe(Tr,Br,Lr,Vr);break;case Fragment:or(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn);break;default:Wn&1?Ve(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn):Wn&6?dr(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn):(Wn&64||Wn&128)&&Mn.process(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn,Ar)}Xr!=null&&Fr&&setRef(Xr,vr&&vr.ref,qr,Tr||vr,!Tr)},ie=(vr,Tr,Br,Lr)=>{if(vr==null)n(Tr.el=k(Tr.children),Br,Lr);else{const Fr=Tr.el=vr.el;Tr.children!==vr.children&&$(Fr,Tr.children)}},ae=(vr,Tr,Br,Lr)=>{vr==null?n(Tr.el=L(Tr.children||""),Br,Lr):Tr.el=vr.el},Fe=(vr,Tr,Br,Lr)=>{[vr.el,vr.anchor]=le(vr.children,Tr,Br,Lr,vr.el,vr.anchor)},de=({el:vr,anchor:Tr},Br,Lr)=>{let Fr;for(;vr&&vr!==Tr;)Fr=re(vr),n(vr,Br,Lr),vr=Fr;n(Tr,Br,Lr)},Ne=({el:vr,anchor:Tr})=>{let Br;for(;vr&&vr!==Tr;)Br=re(vr),g(vr),vr=Br;g(Tr)},Ve=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn)=>{Tr.type==="svg"?Vr="svg":Tr.type==="math"&&(Vr="mathml"),vr==null?ze(Tr,Br,Lr,Fr,qr,Vr,Qr,Sn):Et(vr,Tr,Fr,qr,Vr,Qr,Sn)},ze=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr)=>{let Sn,Mn;const{props:Xr,shapeFlag:Wn,transition:Zr,dirs:En}=vr;if(Sn=vr.el=i(vr.type,qr,Xr&&Xr.is,Xr),Wn&8?V(Sn,vr.children):Wn&16&&kt(vr.children,Sn,null,Lr,Fr,resolveChildrenNamespace(vr,qr),Vr,Qr),En&&invokeDirectiveHook(vr,null,Lr,"created"),jt(Sn,vr,vr.scopeId,Vr,Lr),Xr){for(const kn in Xr)kn!=="value"&&!isReservedProp(kn)&&y(Sn,kn,null,Xr[kn],qr,vr.children,Lr,Fr,Nr);"value"in Xr&&y(Sn,"value",null,Xr.value,qr),(Mn=Xr.onVnodeBeforeMount)&&invokeVNodeHook(Mn,Lr,vr)}En&&invokeDirectiveHook(vr,null,Lr,"beforeMount");const Jr=needTransition(Fr,Zr);Jr&&Zr.beforeEnter(Sn),n(Sn,Tr,Br),((Mn=Xr&&Xr.onVnodeMounted)||Jr||En)&&queuePostRenderEffect(()=>{Mn&&invokeVNodeHook(Mn,Lr,vr),Jr&&Zr.enter(Sn),En&&invokeDirectiveHook(vr,null,Lr,"mounted")},Fr)},jt=(vr,Tr,Br,Lr,Fr)=>{if(Br&&oe(vr,Br),Lr)for(let qr=0;qr<Lr.length;qr++)oe(vr,Lr[qr]);if(Fr){let qr=Fr.subTree;if(Tr===qr){const Vr=Fr.vnode;jt(vr,Vr,Vr.scopeId,Vr.slotScopeIds,Fr.parent)}}},kt=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn=0)=>{for(let Mn=Sn;Mn<vr.length;Mn++){const Xr=vr[Mn]=Qr?cloneIfMounted(vr[Mn]):normalizeVNode(vr[Mn]);ue(null,Xr,Tr,Br,Lr,Fr,qr,Vr,Qr)}},Et=(vr,Tr,Br,Lr,Fr,qr,Vr)=>{const Qr=Tr.el=vr.el;let{patchFlag:Sn,dynamicChildren:Mn,dirs:Xr}=Tr;Sn|=vr.patchFlag&16;const Wn=vr.props||EMPTY_OBJ,Zr=Tr.props||EMPTY_OBJ;let En;if(Br&&toggleRecurse(Br,!1),(En=Zr.onVnodeBeforeUpdate)&&invokeVNodeHook(En,Br,Tr,vr),Xr&&invokeDirectiveHook(Tr,vr,Br,"beforeUpdate"),Br&&toggleRecurse(Br,!0),Mn?lr(vr.dynamicChildren,Mn,Qr,Br,Lr,resolveChildrenNamespace(Tr,Fr),qr):Vr||gr(vr,Tr,Qr,null,Br,Lr,resolveChildrenNamespace(Tr,Fr),qr,!1),Sn>0){if(Sn&16)tr(Qr,Tr,Wn,Zr,Br,Lr,Fr);else if(Sn&2&&Wn.class!==Zr.class&&y(Qr,"class",null,Zr.class,Fr),Sn&4&&y(Qr,"style",Wn.style,Zr.style,Fr),Sn&8){const Jr=Tr.dynamicProps;for(let kn=0;kn<Jr.length;kn++){const Un=Jr[kn],wn=Wn[Un],Pn=Zr[Un];(Pn!==wn||Un==="value")&&y(Qr,Un,wn,Pn,Fr,vr.children,Br,Lr,Nr)}}Sn&1&&vr.children!==Tr.children&&V(Qr,Tr.children)}else!Vr&&Mn==null&&tr(Qr,Tr,Wn,Zr,Br,Lr,Fr);((En=Zr.onVnodeUpdated)||Xr)&&queuePostRenderEffect(()=>{En&&invokeVNodeHook(En,Br,Tr,vr),Xr&&invokeDirectiveHook(Tr,vr,Br,"updated")},Lr)},lr=(vr,Tr,Br,Lr,Fr,qr,Vr)=>{for(let Qr=0;Qr<Tr.length;Qr++){const Sn=vr[Qr],Mn=Tr[Qr],Xr=Sn.el&&(Sn.type===Fragment||!isSameVNodeType(Sn,Mn)||Sn.shapeFlag&70)?z(Sn.el):Br;ue(Sn,Mn,Xr,null,Lr,Fr,qr,Vr,!0)}},tr=(vr,Tr,Br,Lr,Fr,qr,Vr)=>{if(Br!==Lr){if(Br!==EMPTY_OBJ)for(const Qr in Br)!isReservedProp(Qr)&&!(Qr in Lr)&&y(vr,Qr,Br[Qr],null,Vr,Tr.children,Fr,qr,Nr);for(const Qr in Lr){if(isReservedProp(Qr))continue;const Sn=Lr[Qr],Mn=Br[Qr];Sn!==Mn&&Qr!=="value"&&y(vr,Qr,Mn,Sn,Vr,Tr.children,Fr,qr,Nr)}"value"in Lr&&y(vr,"value",Br.value,Lr.value,Vr)}},or=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn)=>{const Mn=Tr.el=vr?vr.el:k(""),Xr=Tr.anchor=vr?vr.anchor:k("");let{patchFlag:Wn,dynamicChildren:Zr,slotScopeIds:En}=Tr;En&&(Qr=Qr?Qr.concat(En):En),vr==null?(n(Mn,Br,Lr),n(Xr,Br,Lr),kt(Tr.children||[],Br,Xr,Fr,qr,Vr,Qr,Sn)):Wn>0&&Wn&64&&Zr&&vr.dynamicChildren?(lr(vr.dynamicChildren,Zr,Br,Fr,qr,Vr,Qr),(Tr.key!=null||Fr&&Tr===Fr.subTree)&&traverseStaticChildren(vr,Tr,!0)):gr(vr,Tr,Br,Xr,Fr,qr,Vr,Qr,Sn)},dr=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn)=>{Tr.slotScopeIds=Qr,vr==null?Tr.shapeFlag&512?Fr.ctx.activate(Tr,Br,Lr,Vr,Sn):cr(Tr,Br,Lr,Fr,qr,Vr,Sn):nr(vr,Tr,Sn)},cr=(vr,Tr,Br,Lr,Fr,qr,Vr)=>{const Qr=vr.component=createComponentInstance(vr,Lr,Fr);if(isKeepAlive(vr)&&(Qr.ctx.renderer=Ar),setupComponent(Qr),Qr.asyncDep){if(Fr&&Fr.registerDep(Qr,ur),!vr.el){const Sn=Qr.subTree=createVNode(Comment);ae(null,Sn,Tr,Br)}}else ur(Qr,vr,Tr,Br,Fr,qr,Vr)},nr=(vr,Tr,Br)=>{const Lr=Tr.component=vr.component;if(shouldUpdateComponent(vr,Tr,Br))if(Lr.asyncDep&&!Lr.asyncResolved){ar(Lr,Tr,Br);return}else Lr.next=Tr,invalidateJob(Lr.update),Lr.effect.dirty=!0,Lr.update();else Tr.el=vr.el,Lr.vnode=Tr},ur=(vr,Tr,Br,Lr,Fr,qr,Vr)=>{const Qr=()=>{if(vr.isMounted){let{next:Xr,bu:Wn,u:Zr,parent:En,vnode:Jr}=vr;{const oo=locateNonHydratedAsyncRoot(vr);if(oo){Xr&&(Xr.el=Jr.el,ar(vr,Xr,Vr)),oo.asyncDep.then(()=>{vr.isUnmounted||Qr()});return}}let kn=Xr,Un;toggleRecurse(vr,!1),Xr?(Xr.el=Jr.el,ar(vr,Xr,Vr)):Xr=Jr,Wn&&invokeArrayFns(Wn),(Un=Xr.props&&Xr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Un,En,Xr,Jr),toggleRecurse(vr,!0);const wn=renderComponentRoot(vr),Pn=vr.subTree;vr.subTree=wn,ue(Pn,wn,z(Pn.el),Pr(Pn),vr,Fr,qr),Xr.el=wn.el,kn===null&&updateHOCHostEl(vr,wn.el),Zr&&queuePostRenderEffect(Zr,Fr),(Un=Xr.props&&Xr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Un,En,Xr,Jr),Fr)}else{let Xr;const{el:Wn,props:Zr}=Tr,{bm:En,m:Jr,parent:kn}=vr,Un=isAsyncWrapper(Tr);if(toggleRecurse(vr,!1),En&&invokeArrayFns(En),!Un&&(Xr=Zr&&Zr.onVnodeBeforeMount)&&invokeVNodeHook(Xr,kn,Tr),toggleRecurse(vr,!0),Wn&&br){const wn=()=>{vr.subTree=renderComponentRoot(vr),br(Wn,vr.subTree,vr,Fr,null)};Un?Tr.type.__asyncLoader().then(()=>!vr.isUnmounted&&wn()):wn()}else{const wn=vr.subTree=renderComponentRoot(vr);ue(null,wn,Br,Lr,vr,Fr,qr),Tr.el=wn.el}if(Jr&&queuePostRenderEffect(Jr,Fr),!Un&&(Xr=Zr&&Zr.onVnodeMounted)){const wn=Tr;queuePostRenderEffect(()=>invokeVNodeHook(Xr,kn,wn),Fr)}(Tr.shapeFlag&256||kn&&isAsyncWrapper(kn.vnode)&&kn.vnode.shapeFlag&256)&&vr.a&&queuePostRenderEffect(vr.a,Fr),vr.isMounted=!0,Tr=Br=Lr=null}},Sn=vr.effect=new ReactiveEffect(Qr,NOOP,()=>queueJob(Mn),vr.scope),Mn=vr.update=()=>{Sn.dirty&&Sn.run()};Mn.id=vr.uid,toggleRecurse(vr,!0),Mn()},ar=(vr,Tr,Br)=>{Tr.component=vr;const Lr=vr.vnode.props;vr.vnode=Tr,vr.next=null,updateProps(vr,Tr.props,Lr,Br),updateSlots(vr,Tr.children,Br),pauseTracking(),flushPreFlushCbs(vr),resetTracking()},gr=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn=!1)=>{const Mn=vr&&vr.children,Xr=vr?vr.shapeFlag:0,Wn=Tr.children,{patchFlag:Zr,shapeFlag:En}=Tr;if(Zr>0){if(Zr&128){yr(Mn,Wn,Br,Lr,Fr,qr,Vr,Qr,Sn);return}else if(Zr&256){pr(Mn,Wn,Br,Lr,Fr,qr,Vr,Qr,Sn);return}}En&8?(Xr&16&&Nr(Mn,Fr,qr),Wn!==Mn&&V(Br,Wn)):Xr&16?En&16?yr(Mn,Wn,Br,Lr,Fr,qr,Vr,Qr,Sn):Nr(Mn,Fr,qr,!0):(Xr&8&&V(Br,""),En&16&&kt(Wn,Br,Lr,Fr,qr,Vr,Qr,Sn))},pr=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn)=>{vr=vr||EMPTY_ARR,Tr=Tr||EMPTY_ARR;const Mn=vr.length,Xr=Tr.length,Wn=Math.min(Mn,Xr);let Zr;for(Zr=0;Zr<Wn;Zr++){const En=Tr[Zr]=Sn?cloneIfMounted(Tr[Zr]):normalizeVNode(Tr[Zr]);ue(vr[Zr],En,Br,null,Fr,qr,Vr,Qr,Sn)}Mn>Xr?Nr(vr,Fr,qr,!0,!1,Wn):kt(Tr,Br,Lr,Fr,qr,Vr,Qr,Sn,Wn)},yr=(vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn)=>{let Mn=0;const Xr=Tr.length;let Wn=vr.length-1,Zr=Xr-1;for(;Mn<=Wn&&Mn<=Zr;){const En=vr[Mn],Jr=Tr[Mn]=Sn?cloneIfMounted(Tr[Mn]):normalizeVNode(Tr[Mn]);if(isSameVNodeType(En,Jr))ue(En,Jr,Br,null,Fr,qr,Vr,Qr,Sn);else break;Mn++}for(;Mn<=Wn&&Mn<=Zr;){const En=vr[Wn],Jr=Tr[Zr]=Sn?cloneIfMounted(Tr[Zr]):normalizeVNode(Tr[Zr]);if(isSameVNodeType(En,Jr))ue(En,Jr,Br,null,Fr,qr,Vr,Qr,Sn);else break;Wn--,Zr--}if(Mn>Wn){if(Mn<=Zr){const En=Zr+1,Jr=En<Xr?Tr[En].el:Lr;for(;Mn<=Zr;)ue(null,Tr[Mn]=Sn?cloneIfMounted(Tr[Mn]):normalizeVNode(Tr[Mn]),Br,Jr,Fr,qr,Vr,Qr,Sn),Mn++}}else if(Mn>Zr)for(;Mn<=Wn;)wr(vr[Mn],Fr,qr,!0),Mn++;else{const En=Mn,Jr=Mn,kn=new Map;for(Mn=Jr;Mn<=Zr;Mn++){const uo=Tr[Mn]=Sn?cloneIfMounted(Tr[Mn]):normalizeVNode(Tr[Mn]);uo.key!=null&&kn.set(uo.key,Mn)}let Un,wn=0;const Pn=Zr-Jr+1;let oo=!1,Rn=0;const An=new Array(Pn);for(Mn=0;Mn<Pn;Mn++)An[Mn]=0;for(Mn=En;Mn<=Wn;Mn++){const uo=vr[Mn];if(wn>=Pn){wr(uo,Fr,qr,!0);continue}let Eo;if(uo.key!=null)Eo=kn.get(uo.key);else for(Un=Jr;Un<=Zr;Un++)if(An[Un-Jr]===0&&isSameVNodeType(uo,Tr[Un])){Eo=Un;break}Eo===void 0?wr(uo,Fr,qr,!0):(An[Eo-Jr]=Mn+1,Eo>=Rn?Rn=Eo:oo=!0,ue(uo,Tr[Eo],Br,null,Fr,qr,Vr,Qr,Sn),wn++)}const to=oo?getSequence(An):EMPTY_ARR;for(Un=to.length-1,Mn=Pn-1;Mn>=0;Mn--){const uo=Jr+Mn,Eo=Tr[uo],Oo=uo+1<Xr?Tr[uo+1].el:Lr;An[Mn]===0?ue(null,Eo,Br,Oo,Fr,qr,Vr,Qr,Sn):oo&&(Un<0||Mn!==to[Un]?Sr(Eo,Br,Oo,2):Un--)}}},Sr=(vr,Tr,Br,Lr,Fr=null)=>{const{el:qr,type:Vr,transition:Qr,children:Sn,shapeFlag:Mn}=vr;if(Mn&6){Sr(vr.component.subTree,Tr,Br,Lr);return}if(Mn&128){vr.suspense.move(Tr,Br,Lr);return}if(Mn&64){Vr.move(vr,Tr,Br,Ar);return}if(Vr===Fragment){n(qr,Tr,Br);for(let Wn=0;Wn<Sn.length;Wn++)Sr(Sn[Wn],Tr,Br,Lr);n(vr.anchor,Tr,Br);return}if(Vr===Static){de(vr,Tr,Br);return}if(Lr!==2&&Mn&1&&Qr)if(Lr===0)Qr.beforeEnter(qr),n(qr,Tr,Br),queuePostRenderEffect(()=>Qr.enter(qr),Fr);else{const{leave:Wn,delayLeave:Zr,afterLeave:En}=Qr,Jr=()=>n(qr,Tr,Br),kn=()=>{Wn(qr,()=>{Jr(),En&&En()})};Zr?Zr(qr,Jr,kn):kn()}else n(qr,Tr,Br)},wr=(vr,Tr,Br,Lr=!1,Fr=!1)=>{const{type:qr,props:Vr,ref:Qr,children:Sn,dynamicChildren:Mn,shapeFlag:Xr,patchFlag:Wn,dirs:Zr}=vr;if(Qr!=null&&setRef(Qr,null,Br,vr,!0),Xr&256){Tr.ctx.deactivate(vr);return}const En=Xr&1&&Zr,Jr=!isAsyncWrapper(vr);let kn;if(Jr&&(kn=Vr&&Vr.onVnodeBeforeUnmount)&&invokeVNodeHook(kn,Tr,vr),Xr&6)_r(vr.component,Br,Lr);else{if(Xr&128){vr.suspense.unmount(Br,Lr);return}En&&invokeDirectiveHook(vr,null,Tr,"beforeUnmount"),Xr&64?vr.type.remove(vr,Tr,Br,Fr,Ar,Lr):Mn&&(qr!==Fragment||Wn>0&&Wn&64)?Nr(Mn,Tr,Br,!1,!0):(qr===Fragment&&Wn&384||!Fr&&Xr&16)&&Nr(Sn,Tr,Br),Lr&&Mr(vr)}(Jr&&(kn=Vr&&Vr.onVnodeUnmounted)||En)&&queuePostRenderEffect(()=>{kn&&invokeVNodeHook(kn,Tr,vr),En&&invokeDirectiveHook(vr,null,Tr,"unmounted")},Br)},Mr=vr=>{const{type:Tr,el:Br,anchor:Lr,transition:Fr}=vr;if(Tr===Fragment){mr(Br,Lr);return}if(Tr===Static){Ne(vr);return}const qr=()=>{g(Br),Fr&&!Fr.persisted&&Fr.afterLeave&&Fr.afterLeave()};if(vr.shapeFlag&1&&Fr&&!Fr.persisted){const{leave:Vr,delayLeave:Qr}=Fr,Sn=()=>Vr(Br,qr);Qr?Qr(vr.el,qr,Sn):Sn()}else qr()},mr=(vr,Tr)=>{let Br;for(;vr!==Tr;)Br=re(vr),g(vr),vr=Br;g(Tr)},_r=(vr,Tr,Br)=>{const{bum:Lr,scope:Fr,update:qr,subTree:Vr,um:Qr}=vr;Lr&&invokeArrayFns(Lr),Fr.stop(),qr&&(qr.active=!1,wr(Vr,vr,Tr,Br)),Qr&&queuePostRenderEffect(Qr,Tr),queuePostRenderEffect(()=>{vr.isUnmounted=!0},Tr),Tr&&Tr.pendingBranch&&!Tr.isUnmounted&&vr.asyncDep&&!vr.asyncResolved&&vr.suspenseId===Tr.pendingId&&(Tr.deps--,Tr.deps===0&&Tr.resolve())},Nr=(vr,Tr,Br,Lr=!1,Fr=!1,qr=0)=>{for(let Vr=qr;Vr<vr.length;Vr++)wr(vr[Vr],Tr,Br,Lr,Fr)},Pr=vr=>vr.shapeFlag&6?Pr(vr.component.subTree):vr.shapeFlag&128?vr.suspense.next():re(vr.anchor||vr.el);let sr=!1;const Ir=(vr,Tr,Br)=>{vr==null?Tr._vnode&&wr(Tr._vnode,null,null,!0):ue(Tr._vnode||null,vr,Tr,null,null,null,Br),sr||(sr=!0,flushPreFlushCbs(),flushPostFlushCbs(),sr=!1),Tr._vnode=vr},Ar={p:ue,um:wr,m:Sr,r:Mr,mt:cr,mc:kt,pc:gr,pbc:lr,n:Pr,o:t};let Cr,br;return r&&([Cr,br]=r(Ar)),{render:Ir,hydrate:Cr,createApp:createAppAPI(Ir,Cr)}}function resolveChildrenNamespace({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function toggleRecurse({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function needTransition(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(t,r,e=!1){const n=t.children,g=r.children;if(isArray$3(n)&&isArray$3(g))for(let y=0;y<n.length;y++){const i=n[y];let k=g[y];k.shapeFlag&1&&!k.dynamicChildren&&((k.patchFlag<=0||k.patchFlag===32)&&(k=g[y]=cloneIfMounted(g[y]),k.el=i.el),e||traverseStaticChildren(i,k)),k.type===Text&&(k.el=i.el)}}function getSequence(t){const r=t.slice(),e=[0];let n,g,y,i,k;const L=t.length;for(n=0;n<L;n++){const $=t[n];if($!==0){if(g=e[e.length-1],t[g]<$){r[n]=g,e.push(n);continue}for(y=0,i=e.length-1;y<i;)k=y+i>>1,t[e[k]]<$?y=k+1:i=k;$<t[e[y]]&&(y>0&&(r[n]=e[y-1]),e[y]=n)}}for(y=e.length,i=e[y-1];y-- >0;)e[y]=i,i=r[i];return e}function locateNonHydratedAsyncRoot(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:locateNonHydratedAsyncRoot(r)}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,isTargetMathML=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,resolveTarget=(t,r)=>{const e=t&&t.to;return isString$2(e)?r?r(e):null:e},TeleportImpl={name:"Teleport",__isTeleport:!0,process(t,r,e,n,g,y,i,k,L,$){const{mc:V,pc:z,pbc:re,o:{insert:oe,querySelector:le,createText:ue,createComment:ie}}=$,ae=isTeleportDisabled(r.props);let{shapeFlag:Fe,children:de,dynamicChildren:Ne}=r;if(t==null){const Ve=r.el=ue(""),ze=r.anchor=ue("");oe(Ve,e,n),oe(ze,e,n);const jt=r.target=resolveTarget(r.props,le),kt=r.targetAnchor=ue("");jt&&(oe(kt,jt),i==="svg"||isTargetSVG(jt)?i="svg":(i==="mathml"||isTargetMathML(jt))&&(i="mathml"));const Et=(lr,tr)=>{Fe&16&&V(de,lr,tr,g,y,i,k,L)};ae?Et(e,ze):jt&&Et(jt,kt)}else{r.el=t.el;const Ve=r.anchor=t.anchor,ze=r.target=t.target,jt=r.targetAnchor=t.targetAnchor,kt=isTeleportDisabled(t.props),Et=kt?e:ze,lr=kt?Ve:jt;if(i==="svg"||isTargetSVG(ze)?i="svg":(i==="mathml"||isTargetMathML(ze))&&(i="mathml"),Ne?(re(t.dynamicChildren,Ne,Et,g,y,i,k),traverseStaticChildren(t,r,!0)):L||z(t,r,Et,lr,g,y,i,k,!1),ae)kt?r.props&&t.props&&r.props.to!==t.props.to&&(r.props.to=t.props.to):moveTeleport(r,e,Ve,$,1);else if((r.props&&r.props.to)!==(t.props&&t.props.to)){const tr=r.target=resolveTarget(r.props,le);tr&&moveTeleport(r,tr,null,$,0)}else kt&&moveTeleport(r,ze,jt,$,1)}updateCssVars(r)},remove(t,r,e,n,{um:g,o:{remove:y}},i){const{shapeFlag:k,children:L,anchor:$,targetAnchor:V,target:z,props:re}=t;if(z&&y(V),i&&y($),k&16){const oe=i||!isTeleportDisabled(re);for(let le=0;le<L.length;le++){const ue=L[le];g(ue,r,e,oe,!!ue.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,r,e,{o:{insert:n},m:g},y=2){y===0&&n(t.targetAnchor,r,e);const{el:i,anchor:k,shapeFlag:L,children:$,props:V}=t,z=y===2;if(z&&n(i,r,e),(!z||isTeleportDisabled(V))&&L&16)for(let re=0;re<$.length;re++)g($[re],r,e,2);z&&n(k,r,e)}function hydrateTeleport(t,r,e,n,g,y,{o:{nextSibling:i,parentNode:k,querySelector:L}},$){const V=r.target=resolveTarget(r.props,L);if(V){const z=V._lpa||V.firstChild;if(r.shapeFlag&16)if(isTeleportDisabled(r.props))r.anchor=$(i(t),r,k(t),e,n,g,y),r.targetAnchor=z;else{r.anchor=i(t);let re=z;for(;re;)if(re=i(re),re&&re.nodeType===8&&re.data==="teleport anchor"){r.targetAnchor=re,V._lpa=r.targetAnchor&&i(r.targetAnchor);break}$(z,r,V,e,n,g,y)}updateCssVars(r)}return r.anchor&&i(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const r=t.ctx;if(r&&r.ut){let e=t.children[0].el;for(;e&&e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",r.uid),e=e.nextSibling;r.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,r,e,n,g,y){return setupBlock(createBaseVNode(t,r,e,n,g,y,!0))}function createBlock(t,r,e,n,g){return setupBlock(createVNode(t,r,e,n,g,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,r){return t.type===r.type&&t.key===r.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?isString$2(t)||isRef(t)||isFunction$3(t)?{i:currentRenderingInstance,r:t,k:r,f:!!e}:t:null);function createBaseVNode(t,r=null,e=null,n=0,g=null,y=t===Fragment?0:1,i=!1,k=!1){const L={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:n,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return k?(normalizeChildren(L,e),y&128&&t.normalize(L)):e&&(L.shapeFlag|=isString$2(e)?8:16),isBlockTreeEnabled>0&&!i&&currentBlock&&(L.patchFlag>0||y&6)&&L.patchFlag!==32&&currentBlock.push(L),L}const createVNode=_createVNode;function _createVNode(t,r=null,e=null,n=0,g=null,y=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const k=cloneVNode(t,r,!0);return e&&normalizeChildren(k,e),isBlockTreeEnabled>0&&!y&&currentBlock&&(k.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=k:currentBlock.push(k)),k.patchFlag|=-2,k}if(isClassComponent(t)&&(t=t.__vccOpts),r){r=guardReactiveProps(r);let{class:k,style:L}=r;k&&!isString$2(k)&&(r.class=normalizeClass(k)),isObject$2(L)&&(isProxy(L)&&!isArray$3(L)&&(L=extend$1({},L)),r.style=normalizeStyle(L))}const i=isString$2(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction$3(t)?2:0;return createBaseVNode(t,r,e,n,g,i,y,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend$1({},t):t:null}function cloneVNode(t,r,e=!1,n=!1){const{props:g,ref:y,patchFlag:i,children:k,transition:L}=t,$=r?mergeProps(g||{},r):g,V={__v_isVNode:!0,__v_skip:!0,type:t.type,props:$,key:$&&normalizeKey($),ref:r&&r.ref?e&&y?isArray$3(y)?y.concat(normalizeRef(r)):[y,normalizeRef(r)]:normalizeRef(r):y,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:k,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Fragment?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:L,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return L&&n&&(V.transition=L.clone(V)),V}function createTextVNode(t=" ",r=0){return createVNode(Text,null,t,r)}function createCommentVNode(t="",r=!1){return r?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$3(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(isArray$3(r))e=16;else if(typeof r=="object")if(n&65){const g=r.default;g&&(g._c&&(g._d=!1),normalizeChildren(t,g()),g._c&&(g._d=!0));return}else{e=32;const g=r._;!g&&!isInternalObject(r)?r._ctx=currentRenderingInstance:g===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else isFunction$3(r)?(r={default:r,_ctx:currentRenderingInstance},e=32):(r=String(r),n&64?(e=16,r=[createTextVNode(r)]):e=8);t.children=r,t.shapeFlag|=e}function mergeProps(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const g in n)if(g==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(g==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(g)){const y=r[g],i=n[g];i&&y!==i&&!(isArray$3(y)&&y.includes(i))&&(r[g]=y?[].concat(y,i):i)}else g!==""&&(r[g]=n[g])}return r}function invokeVNodeHook(t,r,e,n=null){callWithAsyncErrorHandling(t,r,7,[e,n])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(t,r,e){const n=t.type,g=(r?r.appContext:t.appContext)||emptyAppContext,y={uid:uid$2++,vnode:t,type:n,parent:r,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,g),emitsOptions:normalizeEmitsOptions(n,g),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=r?r.root:y,y.emit=emit.bind(null,y),t.ce&&t.ce(y),y}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),r=(e,n)=>{let g;return(g=t[e])||(g=t[e]=[]),g.push(n),y=>{g.length>1?g.forEach(i=>i(y)):g[0](y)}};internalSetCurrentInstance=r("__VUE_INSTANCE_SETTERS__",e=>currentInstance=e),setInSSRSetupState=r("__VUE_SSR_SETTERS__",e=>isInSSRComponentSetup=e)}const setCurrentInstance=t=>{const r=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(r)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,r=!1){r&&setInSSRSetupState(r);const{props:e,children:n}=t.vnode,g=isStatefulComponent(t);initProps(t,e,g,r),initSlots(t,n);const y=g?setupStatefulComponent(t,r):void 0;return r&&setInSSRSetupState(!1),y}function setupStatefulComponent(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:n}=e;if(n){const g=t.setupContext=n.length>1?createSetupContext(t):null,y=setCurrentInstance(t);pauseTracking();const i=callWithErrorHandling(n,t,0,[t.props,g]);if(resetTracking(),y(),isPromise(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),r)return i.then(k=>{handleSetupResult(t,k,r)}).catch(k=>{handleError(k,t,0)});t.asyncDep=i}else handleSetupResult(t,i,r)}else finishComponentSetup(t,r)}function handleSetupResult(t,r,e){isFunction$3(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:isObject$2(r)&&(t.setupState=proxyRefs(r)),finishComponentSetup(t,e)}let compile;function finishComponentSetup(t,r,e){const n=t.type;if(!t.render){if(!r&&compile&&!n.render){const g=n.template||resolveMergedOptions(t).template;if(g){const{isCustomElement:y,compilerOptions:i}=t.appContext.config,{delimiters:k,compilerOptions:L}=n,$=extend$1(extend$1({isCustomElement:y,delimiters:k},i),L);n.render=compile(g,$)}}t.render=n.render||NOOP}{const g=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),g()}}}const attrsProxyHandlers={get(t,r){return track(t,"get",""),t[r]}};function createSetupContext(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:r}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in publicPropertiesMap)return publicPropertiesMap[e](t)},has(r,e){return e in r||e in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,r=>r.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,r=!0){return isFunction$3(t)?t.displayName||t.name:t.name||r&&t.__name}function formatComponentName(t,r,e=!1){let n=getComponentName(r);if(!n&&r.__file){const g=r.__file.match(/([^/\\]+)\.\w+$/);g&&(n=g[1])}if(!n&&t&&t.parent){const g=y=>{for(const i in y)if(y[i]===r)return i};n=g(t.components||t.parent.type.components)||g(t.appContext.components)}return n?classify(n):e?"App":"Anonymous"}function isClassComponent(t){return isFunction$3(t)&&"__vccOpts"in t}const computed=(t,r)=>computed$1(t,r,isInSSRComponentSetup);function h$1(t,r,e){const n=arguments.length;return n===2?isObject$2(r)&&!isArray$3(r)?isVNode(r)?createVNode(t,null,[r]):createVNode(t,r):createVNode(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&isVNode(e)&&(e=[e]),createVNode(t,r,e))}const version="3.4.27",warn=NOOP;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const g=r==="svg"?doc.createElementNS(svgNS,t):r==="mathml"?doc.createElementNS(mathmlNS,t):doc.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&g.setAttribute("multiple",n.multiple),g},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,g,y){const i=e?e.previousSibling:r.lastChild;if(g&&(g===y||g.nextSibling))for(;r.insertBefore(g.cloneNode(!0),e),!(g===y||!(g=g.nextSibling)););else{templateContainer.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const k=templateContainer.content;if(n==="svg"||n==="mathml"){const L=k.firstChild;for(;L.firstChild;)k.appendChild(L.firstChild);k.removeChild(L)}r.insertBefore(k,e)}return[i?i.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(t,{slots:r})=>h$1(BaseTransition,resolveTransitionProps(t),r);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(t,r=[])=>{isArray$3(t)?t.forEach(e=>e(...r)):t&&t(...r)},hasExplicitCallback=t=>t?isArray$3(t)?t.some(r=>r.length>1):t.length>1:!1;function resolveTransitionProps(t){const r={};for(const or in t)or in DOMTransitionPropsValidators||(r[or]=t[or]);if(t.css===!1)return r;const{name:e="v",type:n,duration:g,enterFromClass:y=`${e}-enter-from`,enterActiveClass:i=`${e}-enter-active`,enterToClass:k=`${e}-enter-to`,appearFromClass:L=y,appearActiveClass:$=i,appearToClass:V=k,leaveFromClass:z=`${e}-leave-from`,leaveActiveClass:re=`${e}-leave-active`,leaveToClass:oe=`${e}-leave-to`}=t,le=normalizeDuration(g),ue=le&&le[0],ie=le&&le[1],{onBeforeEnter:ae,onEnter:Fe,onEnterCancelled:de,onLeave:Ne,onLeaveCancelled:Ve,onBeforeAppear:ze=ae,onAppear:jt=Fe,onAppearCancelled:kt=de}=r,Et=(or,dr,cr)=>{removeTransitionClass(or,dr?V:k),removeTransitionClass(or,dr?$:i),cr&&cr()},lr=(or,dr)=>{or._isLeaving=!1,removeTransitionClass(or,z),removeTransitionClass(or,oe),removeTransitionClass(or,re),dr&&dr()},tr=or=>(dr,cr)=>{const nr=or?jt:Fe,ur=()=>Et(dr,or,cr);callHook(nr,[dr,ur]),nextFrame(()=>{removeTransitionClass(dr,or?L:y),addTransitionClass(dr,or?V:k),hasExplicitCallback(nr)||whenTransitionEnds(dr,n,ue,ur)})};return extend$1(r,{onBeforeEnter(or){callHook(ae,[or]),addTransitionClass(or,y),addTransitionClass(or,i)},onBeforeAppear(or){callHook(ze,[or]),addTransitionClass(or,L),addTransitionClass(or,$)},onEnter:tr(!1),onAppear:tr(!0),onLeave(or,dr){or._isLeaving=!0;const cr=()=>lr(or,dr);addTransitionClass(or,z),addTransitionClass(or,re),forceReflow(),nextFrame(()=>{or._isLeaving&&(removeTransitionClass(or,z),addTransitionClass(or,oe),hasExplicitCallback(Ne)||whenTransitionEnds(or,n,ie,cr))}),callHook(Ne,[or,cr])},onEnterCancelled(or){Et(or,!1),callHook(de,[or])},onAppearCancelled(or){Et(or,!0),callHook(kt,[or])},onLeaveCancelled(or){lr(or),callHook(Ve,[or])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$2(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const r=NumberOf(t);return[r,r]}}function NumberOf(t){return toNumber$1(t)}function addTransitionClass(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[vtcKey]||(t[vtcKey]=new Set)).add(r)}function removeTransitionClass(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[vtcKey];e&&(e.delete(r),e.size||(t[vtcKey]=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,r,e,n){const g=t._endId=++endId,y=()=>{g===t._endId&&n()};if(e)return setTimeout(y,e);const{type:i,timeout:k,propCount:L}=getTransitionInfo(t,r);if(!i)return n();const $=i+"end";let V=0;const z=()=>{t.removeEventListener($,re),y()},re=oe=>{oe.target===t&&++V>=L&&z()};setTimeout(()=>{V<L&&z()},k+1),t.addEventListener($,re)}function getTransitionInfo(t,r){const e=window.getComputedStyle(t),n=le=>(e[le]||"").split(", "),g=n(`${TRANSITION}Delay`),y=n(`${TRANSITION}Duration`),i=getTimeout(g,y),k=n(`${ANIMATION}Delay`),L=n(`${ANIMATION}Duration`),$=getTimeout(k,L);let V=null,z=0,re=0;r===TRANSITION?i>0&&(V=TRANSITION,z=i,re=y.length):r===ANIMATION?$>0&&(V=ANIMATION,z=$,re=L.length):(z=Math.max(i,$),V=z>0?i>$?TRANSITION:ANIMATION:null,re=V?V===TRANSITION?y.length:L.length:0);const oe=V===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:V,timeout:z,propCount:re,hasTransform:oe}}function getTimeout(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>toMs(e)+toMs(t[n])))}function toMs(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(t,r,e){const n=t[vtcKey];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(t,{value:r},{transition:e}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,e&&r?e.beforeEnter(t):setDisplay(t,r)},mounted(t,{value:r},{transition:e}){e&&r&&e.enter(t)},updated(t,{value:r,oldValue:e},{transition:n}){!r!=!e&&(n?r?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,r))},beforeUnmount(t,{value:r}){setDisplay(t,r)}};function setDisplay(t,r){t.style.display=r?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!r}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,r,e){const n=t.style,g=isString$2(e);let y=!1;if(e&&!g){if(r)if(isString$2(r))for(const i of r.split(";")){const k=i.slice(0,i.indexOf(":")).trim();e[k]==null&&setStyle(n,k,"")}else for(const i in r)e[i]==null&&setStyle(n,i,"");for(const i in e)i==="display"&&(y=!0),setStyle(n,i,e[i])}else if(g){if(r!==e){const i=n[CSS_VAR_TEXT];i&&(e+=";"+i),n.cssText=e,y=displayRE.test(e)}}else r&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=y?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,r,e){if(isArray$3(e))e.forEach(n=>setStyle(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=autoPrefix(t,r);importantRE.test(e)?t.setProperty(hyphenate(n),e.replace(importantRE,""),"important"):t[n]=e}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,r){const e=prefixCache[r];if(e)return e;let n=camelize(r);if(n!=="filter"&&n in t)return prefixCache[r]=n;n=capitalize$1(n);for(let g=0;g<prefixes.length;g++){const y=prefixes[g]+n;if(y in t)return prefixCache[r]=y}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,r,e,n,g){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(xlinkNS,r.slice(6,r.length)):t.setAttributeNS(xlinkNS,r,e);else{const y=isSpecialBooleanAttr(r);e==null||y&&!includeBooleanAttr(e)?t.removeAttribute(r):t.setAttribute(r,y?"":e)}}function patchDOMProp(t,r,e,n,g,y,i){if(r==="innerHTML"||r==="textContent"){n&&i(n,g,y),t[r]=e??"";return}const k=t.tagName;if(r==="value"&&k!=="PROGRESS"&&!k.includes("-")){const $=k==="OPTION"?t.getAttribute("value")||"":t.value,V=e??"";($!==V||!("_value"in t))&&(t.value=V),e==null&&t.removeAttribute(r),t._value=e;return}let L=!1;if(e===""||e==null){const $=typeof t[r];$==="boolean"?e=includeBooleanAttr(e):e==null&&$==="string"?(e="",L=!0):$==="number"&&(e=0,L=!0)}try{t[r]=e}catch{}L&&t.removeAttribute(r)}function addEventListener(t,r,e,n){t.addEventListener(r,e,n)}function removeEventListener(t,r,e,n){t.removeEventListener(r,e,n)}const veiKey=Symbol("_vei");function patchEvent(t,r,e,n,g=null){const y=t[veiKey]||(t[veiKey]={}),i=y[r];if(n&&i)i.value=n;else{const[k,L]=parseName(r);if(n){const $=y[r]=createInvoker(n,g);addEventListener(t,k,$,L)}else i&&(removeEventListener(t,k,i,L),y[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let r;if(optionsModifierRE.test(t)){r={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),r]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,e.value),r,5,[n])};return e.value=t,e.attached=getNow(),e}function patchStopImmediatePropagation(t,r){if(isArray$3(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>g=>!g._stopped&&n&&n(g))}else return r}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,r,e,n,g,y,i,k,L)=>{const $=g==="svg";r==="class"?patchClass(t,n,$):r==="style"?patchStyle(t,e,n):isOn(r)?isModelListener(r)||patchEvent(t,r,e,n,i):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(t,r,n,$))?patchDOMProp(t,r,n,y,i,k,L):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),patchAttr(t,r,n,$))};function shouldSetAsProp(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&isNativeOn(r)&&isFunction$3(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const g=t.tagName;if(g==="IMG"||g==="VIDEO"||g==="CANVAS"||g==="SOURCE")return!1}return isNativeOn(r)&&isString$2(e)?!1:r in t}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let g,y;return onUpdated(()=>{if(!g.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(g[0].el,e.vnode.el,i))return;g.forEach(callPendingCbs),g.forEach(recordPosition);const k=g.filter(applyTranslation);forceReflow(),k.forEach(L=>{const $=L.el,V=$.style;addTransitionClass($,i),V.transform=V.webkitTransform=V.transitionDuration="";const z=$[moveCbKey]=re=>{re&&re.target!==$||(!re||/transform$/.test(re.propertyName))&&($.removeEventListener("transitionend",z),$[moveCbKey]=null,removeTransitionClass($,i))};$.addEventListener("transitionend",z)})}),()=>{const i=toRaw(t),k=resolveTransitionProps(i);let L=i.tag||Fragment;if(g=[],y)for(let $=0;$<y.length;$++){const V=y[$];V.el&&V.el instanceof Element&&(g.push(V),setTransitionHooks(V,resolveTransitionHooks(V,k,n,e)),positionMap.set(V,V.el.getBoundingClientRect()))}y=r.default?getTransitionRawChildren(r.default()):[];for(let $=0;$<y.length;$++){const V=y[$];V.key!=null&&setTransitionHooks(V,resolveTransitionHooks(V,k,n,e))}return createVNode(L,null,y)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const r=t.el;r[moveCbKey]&&r[moveCbKey](),r[enterCbKey]&&r[enterCbKey]()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const r=positionMap.get(t),e=newPositionMap.get(t),n=r.left-e.left,g=r.top-e.top;if(n||g){const y=t.el.style;return y.transform=y.webkitTransform=`translate(${n}px,${g}px)`,y.transitionDuration="0s",t}}function hasCSSTransform(t,r,e){const n=t.cloneNode(),g=t[vtcKey];g&&g.forEach(k=>{k.split(/\s+/).forEach(L=>L&&n.classList.remove(L))}),e.split(/\s+/).forEach(k=>k&&n.classList.add(k)),n.style.display="none";const y=r.nodeType===1?r:r.parentNode;y.appendChild(n);const{hasTransform:i}=getTransitionInfo(n);return y.removeChild(n),i}const getModelAssigner=t=>{const r=t.props["onUpdate:modelValue"]||!1;return isArray$3(r)?e=>invokeArrayFns(r,e):r};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const r=t.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:r,trim:e,number:n}},g){t[assignKey]=getModelAssigner(g);const y=n||g.props&&g.props.type==="number";addEventListener(t,r?"change":"input",i=>{if(i.target.composing)return;let k=t.value;e&&(k=k.trim()),y&&(k=looseToNumber(k)),t[assignKey](k)}),e&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),r||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:r}){t.value=r??""},beforeUpdate(t,{value:r,modifiers:{lazy:e,trim:n,number:g}},y){if(t[assignKey]=getModelAssigner(y),t.composing)return;const i=(g||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,k=r??"";i!==k&&(document.activeElement===t&&t.type!=="range"&&(e||n&&t.value.trim()===k)||(t.value=k))}},vModelCheckbox={deep:!0,created(t,r,e){t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{const n=t._modelValue,g=getValue$2(t),y=t.checked,i=t[assignKey];if(isArray$3(n)){const k=looseIndexOf(n,g),L=k!==-1;if(y&&!L)i(n.concat(g));else if(!y&&L){const $=[...n];$.splice(k,1),i($)}}else if(isSet$2(n)){const k=new Set(n);y?k.add(g):k.delete(g),i(k)}else i(getCheckboxValue(t,y))})},mounted:setChecked,beforeUpdate(t,r,e){t[assignKey]=getModelAssigner(e),setChecked(t,r,e)}};function setChecked(t,{value:r,oldValue:e},n){t._modelValue=r,isArray$3(r)?t.checked=looseIndexOf(r,n.props.value)>-1:isSet$2(r)?t.checked=r.has(n.props.value):r!==e&&(t.checked=looseEqual(r,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:r},e){t.checked=looseEqual(r,e.props.value),t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{t[assignKey](getValue$2(t))})},beforeUpdate(t,{value:r,oldValue:e},n){t[assignKey]=getModelAssigner(n),r!==e&&(t.checked=looseEqual(r,n.props.value))}};function getValue$2(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,r){const e=r?"_trueValue":"_falseValue";return e in t?t[e]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,r)=>systemModifiers.some(e=>t[`${e}Key`]&&!r.includes(e))},withModifiers=(t,r)=>{const e=t._withMods||(t._withMods={}),n=r.join(".");return e[n]||(e[n]=(g,...y)=>{for(let i=0;i<r.length;i++){const k=modifierGuards[r[i]];if(k&&k(g,r))return}return t(g,...y)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,r)=>{const e=t._withKeys||(t._withKeys={}),n=r.join(".");return e[n]||(e[n]=g=>{if(!("key"in g))return;const y=hyphenate(g.key);if(r.some(i=>i===y||keyNames[i]===y))return t(g)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...t)=>{ensureRenderer().render(...t)},createApp=(...t)=>{const r=ensureRenderer().createApp(...t),{mount:e}=r;return r.mount=n=>{const g=normalizeContainer(n);if(!g)return;const y=r._component;!isFunction$3(y)&&!y.render&&!y.template&&(y.template=g.innerHTML),g.innerHTML="";const i=e(g,!1,resolveRootNamespace(g));return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),i},r};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$2(t)?document.querySelector(t):t}const FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,obtainAllFocusableElements$1=t=>Array.from(t.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(r=>isFocusable(r)&&isVisible(r)),isFocusable=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},triggerEvent=function(t,r,...e){let n;r.includes("mouse")||r.includes("click")?n="MouseEvents":r.includes("key")?n="KeyboardEvent":n="HTMLEvents";const g=document.createEvent(n);return g.initEvent(r,...e),t.dispatchEvent(g),t},isLeaf=t=>!t.getAttribute("aria-owns"),getSibling=(t,r,e)=>{const{parentNode:n}=t;if(!n)return null;const g=n.querySelectorAll(e),y=Array.prototype.indexOf.call(g,t);return g[y+r]||null},focusNode=t=>{t&&(t.focus(),!isLeaf(t)&&t.click())},composeEventHandlers=(t,r,{checkForDefaultPrevented:e=!0}={})=>g=>{const y=t==null?void 0:t(g);if(e===!1||!y)return r==null?void 0:r(g)};var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction$2=t=>typeof t=="function",isString$1=t=>typeof t=="string",noop$1=()=>{},isIOS=isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,r){function e(...n){return new Promise((g,y)=>{Promise.resolve(t(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})).then(g).catch(y)})}return e}function debounceFilter(t,r={}){let e,n,g=noop$1;const y=k=>{clearTimeout(k),g(),g=noop$1};return k=>{const L=resolveUnref(t),$=resolveUnref(r.maxWait);return e&&y(e),L<=0||$!==void 0&&$<=0?(n&&(y(n),n=null),Promise.resolve(k())):new Promise((V,z)=>{g=r.rejectOnCancel?z:V,$&&!n&&(n=setTimeout(()=>{e&&y(e),n=null,V(k())},$)),e=setTimeout(()=>{n&&y(n),n=null,V(k())},L)})}}function throttleFilter(t,r=!0,e=!0,n=!1){let g=0,y,i=!0,k=noop$1,L;const $=()=>{y&&(clearTimeout(y),y=void 0,k(),k=noop$1)};return z=>{const re=resolveUnref(t),oe=Date.now()-g,le=()=>L=z();return $(),re<=0?(g=Date.now(),le()):(oe>re&&(e||!i)?(g=Date.now(),le()):r&&(L=new Promise((ue,ie)=>{k=n?ie:ue,y=setTimeout(()=>{g=Date.now(),i=!0,ue(le()),$()},Math.max(0,re-oe))})),!e&&!y&&(y=setTimeout(()=>i=!0,re)),i=!1,L)}}function identity$1(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function useDebounceFn(t,r=200,e={}){return createFilterWrapper(debounceFilter(r,e),t)}function refDebounced(t,r=200,e={}){const n=ref(t.value),g=useDebounceFn(()=>{n.value=t.value},r,e);return watch(t,()=>g()),n}function useThrottleFn(t,r=200,e=!1,n=!0,g=!1){return createFilterWrapper(throttleFilter(r,e,n,g),t)}function tryOnMounted(t,r=!0){getCurrentInstance()?onMounted(t):r?t():nextTick(t)}function useTimeoutFn(t,r,e={}){const{immediate:n=!0}=e,g=ref(!1);let y=null;function i(){y&&(clearTimeout(y),y=null)}function k(){g.value=!1,i()}function L(...$){i(),g.value=!0,y=setTimeout(()=>{g.value=!1,y=null,t(...$)},resolveUnref(r))}return n&&(g.value=!0,isClient&&L()),tryOnScopeDispose(k),{isPending:readonly(g),start:L,stop:k}}function unrefElement(t){var r;const e=resolveUnref(t);return(r=e==null?void 0:e.$el)!=null?r:e}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let r,e,n,g;if(isString$1(t[0])||Array.isArray(t[0])?([e,n,g]=t,r=defaultWindow):[r,e,n,g]=t,!r)return noop$1;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const y=[],i=()=>{y.forEach(V=>V()),y.length=0},k=(V,z,re,oe)=>(V.addEventListener(z,re,oe),()=>V.removeEventListener(z,re,oe)),L=watch(()=>[unrefElement(r),resolveUnref(g)],([V,z])=>{i(),V&&y.push(...e.flatMap(re=>n.map(oe=>k(V,re,oe,z))))},{immediate:!0,flush:"post"}),$=()=>{L(),i()};return tryOnScopeDispose($),$}let _iOSWorkaround=!1;function onClickOutside(t,r,e={}){const{window:n=defaultWindow,ignore:g=[],capture:y=!0,detectIframe:i=!1}=e;if(!n)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(n.document.body.children).forEach(re=>re.addEventListener("click",noop$1)));let k=!0;const L=re=>g.some(oe=>{if(typeof oe=="string")return Array.from(n.document.querySelectorAll(oe)).some(le=>le===re.target||re.composedPath().includes(le));{const le=unrefElement(oe);return le&&(re.target===le||re.composedPath().includes(le))}}),V=[useEventListener(n,"click",re=>{const oe=unrefElement(t);if(!(!oe||oe===re.target||re.composedPath().includes(oe))){if(re.detail===0&&(k=!L(re)),!k){k=!0;return}r(re)}},{passive:!0,capture:y}),useEventListener(n,"pointerdown",re=>{const oe=unrefElement(t);oe&&(k=!re.composedPath().includes(oe)&&!L(re))},{passive:!0}),i&&useEventListener(n,"blur",re=>{var oe;const le=unrefElement(t);((oe=n.document.activeElement)==null?void 0:oe.tagName)==="IFRAME"&&!(le!=null&&le.contains(n.document.activeElement))&&r(re)})].filter(Boolean);return()=>V.forEach(re=>re())}function useSupported(t,r=!1){const e=ref(),n=()=>e.value=!!t();return n(),tryOnMounted(n,r),e}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global$1[globalKey]=_global$1[globalKey]||{};function useCssVar(t,r,{window:e=defaultWindow,initialValue:n=""}={}){const g=ref(n),y=computed(()=>{var i;return unrefElement(r)||((i=e==null?void 0:e.document)==null?void 0:i.documentElement)});return watch([y,()=>resolveUnref(t)],([i,k])=>{var L;if(i&&e){const $=(L=e.getComputedStyle(i).getPropertyValue(k))==null?void 0:L.trim();g.value=$||n}},{immediate:!0}),watch(g,i=>{var k;(k=y.value)!=null&&k.style&&y.value.style.setProperty(resolveUnref(t),i)}),g}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(t,r)=>{var e={};for(var n in t)__hasOwnProp$g.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$g)for(var n of __getOwnPropSymbols$g(t))r.indexOf(n)<0&&__propIsEnum$g.call(t,n)&&(e[n]=t[n]);return e};function useResizeObserver(t,r,e={}){const n=e,{window:g=defaultWindow}=n,y=__objRest$2(n,["window"]);let i;const k=useSupported(()=>g&&"ResizeObserver"in g),L=()=>{i&&(i.disconnect(),i=void 0)},$=watch(()=>unrefElement(t),z=>{L(),k.value&&g&&z&&(i=new ResizeObserver(r),i.observe(z,y))},{immediate:!0,flush:"post"}),V=()=>{L(),$()};return tryOnScopeDispose(V),{isSupported:k,stop:V}}function useElementBounding(t,r={}){const{reset:e=!0,windowResize:n=!0,windowScroll:g=!0,immediate:y=!0}=r,i=ref(0),k=ref(0),L=ref(0),$=ref(0),V=ref(0),z=ref(0),re=ref(0),oe=ref(0);function le(){const ue=unrefElement(t);if(!ue){e&&(i.value=0,k.value=0,L.value=0,$.value=0,V.value=0,z.value=0,re.value=0,oe.value=0);return}const ie=ue.getBoundingClientRect();i.value=ie.height,k.value=ie.bottom,L.value=ie.left,$.value=ie.right,V.value=ie.top,z.value=ie.width,re.value=ie.x,oe.value=ie.y}return useResizeObserver(t,le),watch(()=>unrefElement(t),ue=>!ue&&le()),g&&useEventListener("scroll",le,{capture:!0,passive:!0}),n&&useEventListener("resize",le,{passive:!0}),tryOnMounted(()=>{y&&le()}),{height:i,bottom:k,left:L,right:$,top:V,width:z,x:re,y:oe,update:le}}var __getOwnPropSymbols$8=Object.getOwnPropertySymbols,__hasOwnProp$8=Object.prototype.hasOwnProperty,__propIsEnum$8=Object.prototype.propertyIsEnumerable,__objRest$1=(t,r)=>{var e={};for(var n in t)__hasOwnProp$8.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$8)for(var n of __getOwnPropSymbols$8(t))r.indexOf(n)<0&&__propIsEnum$8.call(t,n)&&(e[n]=t[n]);return e};function useMutationObserver(t,r,e={}){const n=e,{window:g=defaultWindow}=n,y=__objRest$1(n,["window"]);let i;const k=useSupported(()=>g&&"MutationObserver"in g),L=()=>{i&&(i.disconnect(),i=void 0)},$=watch(()=>unrefElement(t),z=>{L(),k.value&&g&&z&&(i=new MutationObserver(r),i.observe(z,y))},{immediate:!0}),V=()=>{L(),$()};return tryOnScopeDispose(V),{isSupported:k,stop:V}}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(t,r,e,n={}){var g,y,i;const{clone:k=!1,passive:L=!1,eventName:$,deep:V=!1,defaultValue:z}=n,re=getCurrentInstance(),oe=e||(re==null?void 0:re.emit)||((g=re==null?void 0:re.$emit)==null?void 0:g.bind(re))||((i=(y=re==null?void 0:re.proxy)==null?void 0:y.$emit)==null?void 0:i.bind(re==null?void 0:re.proxy));let le=$;r||(r="modelValue"),le=$||le||`update:${r.toString()}`;const ue=ae=>k?isFunction$2(k)?k(ae):cloneFnJSON(ae):ae,ie=()=>isDef(t[r])?ue(t[r]):z;if(L){const ae=ie(),Fe=ref(ae);return watch(()=>t[r],de=>Fe.value=ue(de)),watch(Fe,de=>{(de!==t[r]||V)&&oe(le,de)},{deep:V}),Fe}else return computed({get(){return ie()},set(ae){oe(le,ae)}})}function useWindowSize(t={}){const{window:r=defaultWindow,initialWidth:e=1/0,initialHeight:n=1/0,listenOrientation:g=!0,includeScrollbar:y=!0}=t,i=ref(e),k=ref(n),L=()=>{r&&(y?(i.value=r.innerWidth,k.value=r.innerHeight):(i.value=r.document.documentElement.clientWidth,k.value=r.document.documentElement.clientHeight))};return L(),tryOnMounted(L),useEventListener("resize",L,{passive:!0}),g&&useEventListener("orientationchange",L,{passive:!0}),{width:i,height:k}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(t,r)=>{if(!isClient||!t||!r)return!1;const e=t.getBoundingClientRect();let n;return r instanceof Element?n=r.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},e.top<n.bottom&&e.bottom>n.top&&e.right>n.left&&e.left<n.right};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var r=hasOwnProperty$d.call(t,symToStringTag$1),e=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var n=!0}catch{}var g=nativeObjectToString$1.call(t);return n&&(r?t[symToStringTag$1]=e:delete t[symToStringTag$1]),g}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag$3="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$3}function arrayMap(t,r){for(var e=-1,n=t==null?0:t.length,g=Array(n);++e<n;)g[e]=r(t[e],e,t);return g}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var r=t+"";return r=="0"&&1/t==-INFINITY$3?"-0":r}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var r=t.length;r--&&reWhitespace.test(t.charAt(r)););return r}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject$1(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$1(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$1(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){if(!t)return t===0?t:0;if(t=toNumber(t),t===INFINITY$2||t===-INFINITY$2){var r=t<0?-1:1;return r*MAX_INTEGER}return t===t?t:0}function toInteger(t){var r=toFinite(t),e=r%1;return r===r?e?r-e:r:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var r=baseGetTag(t);return r==funcTag$2||r==genTag$1||r==asyncTag||r==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(t){if(t!=null){try{return funcToString$2.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var r=isFunction$1(t)?reIsNative:reIsHostCtor;return r.test(toSource(t))}function getValue$1(t,r){return t==null?void 0:t[r]}function getNative(t,r){var e=getValue$1(t,r);return baseIsNative(e)?e:void 0}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function t(){}return function(r){if(!isObject$1(r))return{};if(objectCreate)return objectCreate(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();const baseCreate$1=baseCreate;function apply(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function copyArray(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var r=0,e=0;return function(){var n=nativeNow(),g=HOT_SPAN-(n-e);if(e=n,g>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(t,r){return defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function baseFindIndex(t,r,e,n){for(var g=t.length,y=e+(n?1:-1);n?y--:++y<g;)if(r(t[y],y,t))return y;return-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,r){var e=typeof t;return r=r??MAX_SAFE_INTEGER$1,!!r&&(e=="number"||e!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<r}function baseAssignValue(t,r,e){r=="__proto__"&&defineProperty$1?defineProperty$1(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function eq(t,r){return t===r||t!==t&&r!==r}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(t,r,e){var n=t[r];(!(hasOwnProperty$b.call(t,r)&&eq(n,e))||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function copyObject(t,r,e,n){var g=!e;e||(e={});for(var y=-1,i=r.length;++y<i;){var k=r[y],L=n?n(e[k],t[k],k,e,t):void 0;L===void 0&&(L=t[k]),g?baseAssignValue(e,k,L):assignValue(e,k,L)}return e}var nativeMax$2=Math.max;function overRest(t,r,e){return r=nativeMax$2(r===void 0?t.length-1:r,0),function(){for(var n=arguments,g=-1,y=nativeMax$2(n.length-r,0),i=Array(y);++g<y;)i[g]=n[r+g];g=-1;for(var k=Array(r+1);++g<r;)k[g]=n[g];return k[r]=e(i),apply(t,this,k)}}function baseRest(t,r){return setToString$1(overRest(t,r,identity),t+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}function isIterateeCall(t,r,e){if(!isObject$1(e))return!1;var n=typeof r;return(n=="number"?isArrayLike(e)&&isIndex(r,e.length):n=="string"&&r in e)?eq(e[r],t):!1}function createAssigner(t){return baseRest(function(r,e){var n=-1,g=e.length,y=g>1?e[g-1]:void 0,i=g>2?e[2]:void 0;for(y=t.length>3&&typeof y=="function"?(g--,y):void 0,i&&isIterateeCall(e[0],e[1],i)&&(y=g<3?void 0:y,g=1),r=Object(r);++n<g;){var k=e[n];k&&t(r,k,n,y)}return r})}var objectProto$b=Object.prototype;function isPrototype(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||objectProto$b;return t===e}function baseTimes(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var argsTag$3="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$a.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(r){return t(r)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(t,r){var e=isArray$2(t),n=!e&&isArguments$1(t),g=!e&&!n&&isBuffer$2(t),y=!e&&!n&&!g&&isTypedArray$2(t),i=e||n||g||y,k=i?baseTimes(t.length,String):[],L=k.length;for(var $ in t)(r||hasOwnProperty$9.call(t,$))&&!(i&&($=="length"||g&&($=="offset"||$=="parent")||y&&($=="buffer"||$=="byteLength"||$=="byteOffset")||isIndex($,L)))&&k.push($);return k}function overArg(t,r){return function(e){return t(r(e))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var r=[];for(var e in Object(t))hasOwnProperty$8.call(t,e)&&e!="constructor"&&r.push(e);return r}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function nativeKeysIn(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var r=isPrototype(t),e=[];for(var n in t)n=="constructor"&&(r||!hasOwnProperty$7.call(t,n))||e.push(n);return e}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,r){if(isArray$2(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||r!=null&&t in Object(r)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(t){var r=this.__data__;if(nativeCreate$1){var e=r[t];return e===HASH_UNDEFINED$2?void 0:e}return hasOwnProperty$6.call(r,t)?r[t]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(t){var r=this.__data__;return nativeCreate$1?r[t]!==void 0:hasOwnProperty$5.call(r,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nativeCreate$1&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(t,r){for(var e=t.length;e--;)if(eq(t[e][0],r))return e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var r=this.__data__,e=assocIndexOf(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():splice.call(r,e,1),--this.size,!0}function listCacheGet(t){var r=this.__data__,e=assocIndexOf(r,t);return e<0?void 0:r[e][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,r){var e=this.__data__,n=assocIndexOf(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function ListCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function getMapData(t,r){var e=t.__data__;return isKeyable(r)?e[typeof r=="string"?"string":"hash"]:e.map}function mapCacheDelete(t){var r=getMapData(this,t).delete(t);return this.size-=r?1:0,r}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,r){var e=getMapData(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function MapCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var e=function(){var n=arguments,g=r?r.apply(this,n):n[0],y=e.cache;if(y.has(g))return y.get(g);var i=t.apply(this,n);return e.cache=y.set(g,i)||y,i};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var r=memoize(t,function(n){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),n}),e=r.cache;return r}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(rePropName,function(e,n,g,y){r.push(g?y.replace(reEscapeChar,"$1"):n||e)}),r});const stringToPath$1=stringToPath;function toString$1(t){return t==null?"":baseToString(t)}function castPath(t,r){return isArray$2(t)?t:isKey(t,r)?[t]:stringToPath$1(toString$1(t))}var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var r=t+"";return r=="0"&&1/t==-INFINITY$1?"-0":r}function baseGet(t,r){r=castPath(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[toKey(r[e++])];return e&&e==n?t:void 0}function get(t,r,e){var n=t==null?void 0:baseGet(t,r);return n===void 0?e:n}function arrayPush(t,r){for(var e=-1,n=r.length,g=t.length;++e<n;)t[g+e]=r[e];return t}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(t){return isArray$2(t)||isArguments$1(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}function baseFlatten(t,r,e,n,g){var y=-1,i=t.length;for(e||(e=isFlattenable),g||(g=[]);++y<i;){var k=t[y];r>0&&e(k)?r>1?baseFlatten(k,r-1,e,n,g):arrayPush(g,k):n||(g[g.length]=k)}return g}function flatten(t){var r=t==null?0:t.length;return r?baseFlatten(t,1):[]}function flatRest(t){return setToString$1(overRest(t,void 0,flatten),t+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$3)return!1;var r=getPrototype$1(t);if(r===null)return!0;var e=hasOwnProperty$4.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&funcToString.call(e)==objectCtorString}function castArray$1(){if(!arguments.length)return[];var t=arguments[0];return isArray$2(t)?t:[t]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,r){var e=this.__data__;if(e instanceof ListCache){var n=e.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new MapCache(n)}return e.set(t,r),this.size=e.size,this}function Stack(t){var r=this.__data__=new ListCache(t);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(t,r){return t&&copyObject(r,keys(r),t)}function baseAssignIn(t,r){return t&&copyObject(r,keysIn(r),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,r){if(r)return t.slice();var e=t.length,n=allocUnsafe?allocUnsafe(e):new t.constructor(e);return t.copy(n),n}function arrayFilter(t,r){for(var e=-1,n=t==null?0:t.length,g=0,y=[];++e<n;){var i=t[e];r(i,e,t)&&(y[g++]=i)}return y}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(r){return propertyIsEnumerable.call(t,r)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,r){return copyObject(t,getSymbols$1(t),r)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var r=[];t;)arrayPush(r,getSymbols$1(t)),t=getPrototype$1(t);return r}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,r){return copyObject(t,getSymbolsIn$1(t),r)}function baseGetAllKeys(t,r,e){var n=r(t);return isArray$2(t)?n:arrayPush(n,e(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var r=baseGetTag(t),e=r==objectTag$2?t.constructor:void 0,n=e?toSource(e):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return r});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&hasOwnProperty$3.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new Uint8Array$2(r).set(new Uint8Array$2(t)),r}function cloneDataView(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var r=new t.constructor(t.source,reFlags.exec(t));return r.lastIndex=t.lastIndex,r}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf$1?Object(symbolValueOf$1.call(t)):{}}function cloneTypedArray(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,r,e){var n=t.constructor;switch(r){case arrayBufferTag$2:return cloneArrayBuffer(t);case boolTag$2:case dateTag$2:return new n(+t);case dataViewTag$2:return cloneDataView(t,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,e);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(t);case regexpTag$2:return cloneRegExp(t);case setTag$3:return new n;case symbolTag$2:return cloneSymbol(t)}}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$2="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$2="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,r,e,n,g,y){var i,k=r&CLONE_DEEP_FLAG$1,L=r&CLONE_FLAT_FLAG,$=r&CLONE_SYMBOLS_FLAG$2;if(e&&(i=g?e(t,n,g,y):e(t)),i!==void 0)return i;if(!isObject$1(t))return t;var V=isArray$2(t);if(V){if(i=initCloneArray(t),!k)return copyArray(t,i)}else{var z=getTag$1(t),re=z==funcTag||z==genTag;if(isBuffer$2(t))return cloneBuffer(t,k);if(z==objectTag$1||z==argsTag$1||re&&!g){if(i=L||re?{}:initCloneObject(t),!k)return L?copySymbolsIn(t,baseAssignIn(i,t)):copySymbols(t,baseAssign(i,t))}else{if(!cloneableTags[z])return g?t:{};i=initCloneByTag(t,z,k)}}y||(y=new Stack);var oe=y.get(t);if(oe)return oe;y.set(t,i),isSet$1(t)?t.forEach(function(ie){i.add(baseClone(ie,r,e,ie,t,y))}):isMap$1(t)&&t.forEach(function(ie,ae){i.set(ae,baseClone(ie,r,e,ae,t,y))});var le=$?L?getAllKeysIn:getAllKeys:L?keysIn:keys,ue=V?void 0:le(t);return arrayEach(ue||t,function(ie,ae){ue&&(ae=ie,ie=t[ae]),assignValue(i,ae,baseClone(ie,r,e,ae,t,y))}),i}var CLONE_SYMBOLS_FLAG$1=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new MapCache;++r<e;)this.add(t[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function cacheHas(t,r){return t.has(r)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,r,e,n,g,y){var i=e&COMPARE_PARTIAL_FLAG$5,k=t.length,L=r.length;if(k!=L&&!(i&&L>k))return!1;var $=y.get(t),V=y.get(r);if($&&V)return $==r&&V==t;var z=-1,re=!0,oe=e&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(y.set(t,r),y.set(r,t);++z<k;){var le=t[z],ue=r[z];if(n)var ie=i?n(ue,le,z,r,t,y):n(le,ue,z,t,r,y);if(ie!==void 0){if(ie)continue;re=!1;break}if(oe){if(!arraySome(r,function(ae,Fe){if(!cacheHas(oe,Fe)&&(le===ae||g(le,ae,e,n,y)))return oe.push(Fe)})){re=!1;break}}else if(!(le===ue||g(le,ue,e,n,y))){re=!1;break}}return y.delete(t),y.delete(r),re}function mapToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n,g){e[++r]=[g,n]}),e}function setToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(t,r,e,n,g,y,i){switch(e){case dataViewTag:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case arrayBufferTag:return!(t.byteLength!=r.byteLength||!y(new Uint8Array$2(t),new Uint8Array$2(r)));case boolTag:case dateTag:case numberTag:return eq(+t,+r);case errorTag:return t.name==r.name&&t.message==r.message;case regexpTag:case stringTag:return t==r+"";case mapTag:var k=mapToArray;case setTag:var L=n&COMPARE_PARTIAL_FLAG$4;if(k||(k=setToArray),t.size!=r.size&&!L)return!1;var $=i.get(t);if($)return $==r;n|=COMPARE_UNORDERED_FLAG$2,i.set(t,r);var V=equalArrays(k(t),k(r),n,g,y,i);return i.delete(t),V;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(r)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(t,r,e,n,g,y){var i=e&COMPARE_PARTIAL_FLAG$3,k=getAllKeys(t),L=k.length,$=getAllKeys(r),V=$.length;if(L!=V&&!i)return!1;for(var z=L;z--;){var re=k[z];if(!(i?re in r:hasOwnProperty$2.call(r,re)))return!1}var oe=y.get(t),le=y.get(r);if(oe&&le)return oe==r&&le==t;var ue=!0;y.set(t,r),y.set(r,t);for(var ie=i;++z<L;){re=k[z];var ae=t[re],Fe=r[re];if(n)var de=i?n(Fe,ae,re,r,t,y):n(ae,Fe,re,t,r,y);if(!(de===void 0?ae===Fe||g(ae,Fe,e,n,y):de)){ue=!1;break}ie||(ie=re=="constructor")}if(ue&&!ie){var Ne=t.constructor,Ve=r.constructor;Ne!=Ve&&"constructor"in t&&"constructor"in r&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof Ve=="function"&&Ve instanceof Ve)&&(ue=!1)}return y.delete(t),y.delete(r),ue}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(t,r,e,n,g,y){var i=isArray$2(t),k=isArray$2(r),L=i?arrayTag:getTag$1(t),$=k?arrayTag:getTag$1(r);L=L==argsTag?objectTag:L,$=$==argsTag?objectTag:$;var V=L==objectTag,z=$==objectTag,re=L==$;if(re&&isBuffer$2(t)){if(!isBuffer$2(r))return!1;i=!0,V=!1}if(re&&!V)return y||(y=new Stack),i||isTypedArray$2(t)?equalArrays(t,r,e,n,g,y):equalByTag(t,r,L,e,n,g,y);if(!(e&COMPARE_PARTIAL_FLAG$2)){var oe=V&&hasOwnProperty$1.call(t,"__wrapped__"),le=z&&hasOwnProperty$1.call(r,"__wrapped__");if(oe||le){var ue=oe?t.value():t,ie=le?r.value():r;return y||(y=new Stack),g(ue,ie,e,n,y)}}return re?(y||(y=new Stack),equalObjects(t,r,e,n,g,y)):!1}function baseIsEqual(t,r,e,n,g){return t===r?!0:t==null||r==null||!isObjectLike(t)&&!isObjectLike(r)?t!==t&&r!==r:baseIsEqualDeep(t,r,e,n,baseIsEqual,g)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,r,e,n){var g=e.length,y=g,i=!n;if(t==null)return!y;for(t=Object(t);g--;){var k=e[g];if(i&&k[2]?k[1]!==t[k[0]]:!(k[0]in t))return!1}for(;++g<y;){k=e[g];var L=k[0],$=t[L],V=k[1];if(i&&k[2]){if($===void 0&&!(L in t))return!1}else{var z=new Stack;if(n)var re=n($,V,L,t,r,z);if(!(re===void 0?baseIsEqual(V,$,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,z):re))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var r=keys(t),e=r.length;e--;){var n=r[e],g=t[n];r[e]=[n,g,isStrictComparable(g)]}return r}function matchesStrictComparable(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function baseMatches(t){var r=getMatchData(t);return r.length==1&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(e){return e===t||baseIsMatch(e,t,r)}}function baseHasIn(t,r){return t!=null&&r in Object(t)}function hasPath(t,r,e){r=castPath(r,t);for(var n=-1,g=r.length,y=!1;++n<g;){var i=toKey(r[n]);if(!(y=t!=null&&e(t,i)))break;t=t[i]}return y||++n!=g?y:(g=t==null?0:t.length,!!g&&isLength(g)&&isIndex(i,g)&&(isArray$2(t)||isArguments$1(t)))}function hasIn(t,r){return t!=null&&hasPath(t,r,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,r){return isKey(t)&&isStrictComparable(r)?matchesStrictComparable(toKey(t),r):function(e){var n=get(e,t);return n===void 0&&n===r?hasIn(e,t):baseIsEqual(r,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(r){return r==null?void 0:r[t]}}function basePropertyDeep(t){return function(r){return baseGet(r,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$2(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(t){return function(r,e,n){for(var g=-1,y=Object(r),i=n(r),k=i.length;k--;){var L=i[t?k:++g];if(e(y[L],L,y)===!1)break}return r}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(t,r){return t&&baseFor$1(t,r,keys)}function createBaseEach(t,r){return function(e,n){if(e==null)return e;if(!isArrayLike(e))return t(e,n);for(var g=e.length,y=r?g:-1,i=Object(e);(r?y--:++y<g)&&n(i[y],y,i)!==!1;);return e}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(t,r,e){var n,g,y,i,k,L,$=0,V=!1,z=!1,re=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);r=toNumber(r)||0,isObject$1(e)&&(V=!!e.leading,z="maxWait"in e,y=z?nativeMax$1(toNumber(e.maxWait)||0,r):y,re="trailing"in e?!!e.trailing:re);function oe(ze){var jt=n,kt=g;return n=g=void 0,$=ze,i=t.apply(kt,jt),i}function le(ze){return $=ze,k=setTimeout(ae,r),V?oe(ze):i}function ue(ze){var jt=ze-L,kt=ze-$,Et=r-jt;return z?nativeMin$1(Et,y-kt):Et}function ie(ze){var jt=ze-L,kt=ze-$;return L===void 0||jt>=r||jt<0||z&&kt>=y}function ae(){var ze=now$1();if(ie(ze))return Fe(ze);k=setTimeout(ae,ue(ze))}function Fe(ze){return k=void 0,re&&n?oe(ze):(n=g=void 0,i)}function de(){k!==void 0&&clearTimeout(k),$=0,n=L=g=k=void 0}function Ne(){return k===void 0?i:Fe(now$1())}function Ve(){var ze=now$1(),jt=ie(ze);if(n=arguments,g=this,L=ze,jt){if(k===void 0)return le(L);if(z)return clearTimeout(k),k=setTimeout(ae,r),oe(L)}return k===void 0&&(k=setTimeout(ae,r)),i}return Ve.cancel=de,Ve.flush=Ne,Ve}function assignMergeValue(t,r,e){(e!==void 0&&!eq(t[r],e)||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function safeGet(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}function toPlainObject(t){return copyObject(t,keysIn(t))}function baseMergeDeep(t,r,e,n,g,y,i){var k=safeGet(t,e),L=safeGet(r,e),$=i.get(L);if($){assignMergeValue(t,e,$);return}var V=y?y(k,L,e+"",t,r,i):void 0,z=V===void 0;if(z){var re=isArray$2(L),oe=!re&&isBuffer$2(L),le=!re&&!oe&&isTypedArray$2(L);V=L,re||oe||le?isArray$2(k)?V=k:isArrayLikeObject(k)?V=copyArray(k):oe?(z=!1,V=cloneBuffer(L,!0)):le?(z=!1,V=cloneTypedArray(L,!0)):V=[]:isPlainObject$1(L)||isArguments$1(L)?(V=k,isArguments$1(k)?V=toPlainObject(k):(!isObject$1(k)||isFunction$1(k))&&(V=initCloneObject(L))):z=!1}z&&(i.set(L,V),g(V,L,n,y,i),i.delete(L)),assignMergeValue(t,e,V)}function baseMerge(t,r,e,n,g){t!==r&&baseFor$1(r,function(y,i){if(g||(g=new Stack),isObject$1(y))baseMergeDeep(t,r,i,e,baseMerge,n,g);else{var k=n?n(safeGet(t,i),y,i+"",t,r,g):void 0;k===void 0&&(k=y),assignMergeValue(t,i,k)}},keysIn)}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var g=n-1;return e!==void 0&&(g=toInteger(e),g=e<0?nativeMax(n+g,0):nativeMin(g,n-1)),baseFindIndex(t,baseIteratee(r),g,!0)}function baseMap(t,r){var e=-1,n=isArrayLike(t)?Array(t.length):[];return baseEach$1(t,function(g,y,i){n[++e]=r(g,y,i)}),n}function map(t,r){var e=isArray$2(t)?arrayMap:baseMap;return e(t,baseIteratee(r))}function flatMap(t,r){return baseFlatten(map(t,r),1)}var INFINITY=1/0;function flattenDeep(t){var r=t==null?0:t.length;return r?baseFlatten(t,INFINITY):[]}function fromPairs(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var g=t[r];n[g[0]]=g[1]}return n}function isEqual(t,r){return baseIsEqual(t,r)}function isNil(t){return t==null}function isUndefined$2(t){return t===void 0}var merge$1=createAssigner(function(t,r,e){baseMerge(t,r,e)});const merge$2=merge$1;function baseSet(t,r,e,n){if(!isObject$1(t))return t;r=castPath(r,t);for(var g=-1,y=r.length,i=y-1,k=t;k!=null&&++g<y;){var L=toKey(r[g]),$=e;if(L==="__proto__"||L==="constructor"||L==="prototype")return t;if(g!=i){var V=k[L];$=n?n(V,L,k):void 0,$===void 0&&($=isObject$1(V)?V:isIndex(r[g+1])?[]:{})}assignValue(k,L,$),k=k[L]}return t}function basePickBy(t,r,e){for(var n=-1,g=r.length,y={};++n<g;){var i=r[n],k=baseGet(t,i);e(k,i)&&baseSet(y,castPath(i,t),k)}return y}function basePick(t,r){return basePickBy(t,r,function(e,n){return hasIn(t,n)})}var pick=flatRest(function(t,r){return t==null?{}:basePick(t,r)});const pick$1=pick;function set(t,r,e){return t==null?t:baseSet(t,r,e)}var FUNC_ERROR_TEXT="Expected a function";function throttle$1(t,r,e){var n=!0,g=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(e)&&(n="leading"in e?!!e.leading:n,g="trailing"in e?!!e.trailing:g),debounce(t,r,{leading:n,maxWait:r,trailing:g})}const isUndefined$1=t=>t===void 0,isBoolean$1=t=>typeof t=="boolean",isNumber$1=t=>typeof t=="number",isEmpty=t=>!t&&t!==0||isArray$3(t)&&t.length===0||isObject$2(t)&&!Object.keys(t).length,isElement=t=>typeof Element>"u"?!1:t instanceof Element,isPropAbsent=t=>isNil(t),isStringNumber=t=>isString$2(t)?!Number.isNaN(Number(t)):!1,rAF=t=>isClient?window.requestAnimationFrame(t):setTimeout(t,16),escapeStringRegexp=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize=t=>capitalize$1(t),keysOf=t=>Object.keys(t),entriesOf=t=>Object.entries(t),getProp=(t,r,e)=>({get value(){return get(t,r,e)},set value(n){set(t,r,n)}});class ElementPlusError extends Error{constructor(r){super(r),this.name="ElementPlusError"}}function throwError(t,r){throw new ElementPlusError(`[${t}] ${r}`)}function debugWarn(t,r){}const classNameToArray=(t="")=>t.split(" ").filter(r=>!!r.trim()),hasClass=(t,r)=>{if(!t||!r)return!1;if(r.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(r)},addClass=(t,r)=>{!t||!r.trim()||t.classList.add(...classNameToArray(r))},removeClass=(t,r)=>{!t||!r.trim()||t.classList.remove(...classNameToArray(r))},getStyle=(t,r)=>{var e;if(!isClient||!t||!r)return"";let n=camelize(r);n==="float"&&(n="cssFloat");try{const g=t.style[n];if(g)return g;const y=(e=document.defaultView)==null?void 0:e.getComputedStyle(t,"");return y?y[n]:""}catch{return t.style[n]}};function addUnit(t,r="px"){if(!t)return"";if(isNumber$1(t)||isStringNumber(t))return`${t}${r}`;if(isString$2(t))return t}const isScroll=(t,r)=>{if(!isClient)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(r)],n=getStyle(t,e);return["scroll","auto","overlay"].some(g=>n.includes(g))},getScrollContainer=(t,r)=>{if(!isClient)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(isScroll(e,r))return e;e=e.parentNode}return e};let scrollBarWidth;const getScrollBarWidth=t=>{var r;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const g=document.createElement("div");g.style.width="100%",e.appendChild(g);const y=g.offsetWidth;return(r=e.parentNode)==null||r.removeChild(e),scrollBarWidth=n-y,scrollBarWidth};function scrollIntoView(t,r){if(!isClient)return;if(!r){t.scrollTop=0;return}const e=[];let n=r.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const g=r.offsetTop+e.reduce((L,$)=>L+$.offsetTop,0),y=g+r.offsetHeight,i=t.scrollTop,k=i+t.clientHeight;g<i?t.scrollTop=g:y>k&&(t.scrollTop=y-t.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var arrow_down_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowDown",__name:"arrow-down",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),arrow_down_default=arrow_down_vue_vue_type_script_setup_true_lang_default,arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowLeft",__name:"arrow-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_left_default=arrow_left_vue_vue_type_script_setup_true_lang_default,arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowRight",__name:"arrow-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_right_default=arrow_right_vue_vue_type_script_setup_true_lang_default,arrow_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowUp",__name:"arrow-up",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),arrow_up_default=arrow_up_vue_vue_type_script_setup_true_lang_default,check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Check",__name:"check",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),check_default=check_vue_vue_type_script_setup_true_lang_default,circle_check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCheck",__name:"circle-check",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),circle_check_default=circle_check_vue_vue_type_script_setup_true_lang_default,circle_close_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),circle_close_filled_default=circle_close_filled_vue_vue_type_script_setup_true_lang_default,circle_close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleClose",__name:"circle-close",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),circle_close_default=circle_close_vue_vue_type_script_setup_true_lang_default,close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Close",__name:"close",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),close_default=close_vue_vue_type_script_setup_true_lang_default,cpu_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Cpu",__name:"cpu",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M320 256a64 64 0 0 0-64 64v384a64 64 0 0 0 64 64h384a64 64 0 0 0 64-64V320a64 64 0 0 0-64-64zm0-64h384a128 128 0 0 1 128 128v384a128 128 0 0 1-128 128H320a128 128 0 0 1-128-128V320a128 128 0 0 1 128-128"}),createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m-320 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 896a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m160 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m-320 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32M64 512a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0-160a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0 320a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m896-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0 320a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32"})]))}}),cpu_default=cpu_vue_vue_type_script_setup_true_lang_default,d_arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),d_arrow_left_default=d_arrow_left_vue_vue_type_script_setup_true_lang_default,d_arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),d_arrow_right_default=d_arrow_right_vue_vue_type_script_setup_true_lang_default,delete_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Delete",__name:"delete",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),delete_default=delete_vue_vue_type_script_setup_true_lang_default,document_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Document",__name:"document",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),document_default=document_vue_vue_type_script_setup_true_lang_default,edit_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Edit",__name:"edit",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),edit_default=edit_vue_vue_type_script_setup_true_lang_default,full_screen_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"FullScreen",__name:"full-screen",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),full_screen_default=full_screen_vue_vue_type_script_setup_true_lang_default,hide_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Hide",__name:"hide",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),hide_default=hide_vue_vue_type_script_setup_true_lang_default,house_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"House",__name:"house",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),house_default=house_vue_vue_type_script_setup_true_lang_default,info_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"InfoFilled",__name:"info-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),info_filled_default=info_filled_vue_vue_type_script_setup_true_lang_default,loading_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Loading",__name:"loading",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),loading_default=loading_vue_vue_type_script_setup_true_lang_default,minus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Minus",__name:"minus",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),minus_default=minus_vue_vue_type_script_setup_true_lang_default,more_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"MoreFilled",__name:"more-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),more_filled_default=more_filled_vue_vue_type_script_setup_true_lang_default,more_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"More",__name:"more",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),more_default=more_vue_vue_type_script_setup_true_lang_default,picture_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Picture",__name:"picture",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),createBaseVNode("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),picture_default=picture_vue_vue_type_script_setup_true_lang_default,plus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Plus",__name:"plus",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),plus_default=plus_vue_vue_type_script_setup_true_lang_default,refresh_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshLeft",__name:"refresh-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),refresh_left_default=refresh_left_vue_vue_type_script_setup_true_lang_default,refresh_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshRight",__name:"refresh-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),refresh_right_default=refresh_right_vue_vue_type_script_setup_true_lang_default,refresh_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Refresh",__name:"refresh",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),refresh_default=refresh_vue_vue_type_script_setup_true_lang_default,scale_to_original_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),scale_to_original_default=scale_to_original_vue_vue_type_script_setup_true_lang_default,set_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SetUp",__name:"set-up",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96"}),createBaseVNode("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),createBaseVNode("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32m160 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),createBaseVNode("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32"})]))}}),set_up_default=set_up_vue_vue_type_script_setup_true_lang_default,setting_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Setting",__name:"setting",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384m0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256"})]))}}),setting_default=setting_vue_vue_type_script_setup_true_lang_default,success_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SuccessFilled",__name:"success-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),success_filled_default=success_filled_vue_vue_type_script_setup_true_lang_default,switch_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Switch",__name:"switch",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32"})]))}}),switch_default=switch_vue_vue_type_script_setup_true_lang_default,tickets_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Tickets",__name:"tickets",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h192v64H320zm0 384h384v64H320z"})]))}}),tickets_default=tickets_vue_vue_type_script_setup_true_lang_default,upload_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Upload",__name:"upload",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248z"})]))}}),upload_default=upload_vue_vue_type_script_setup_true_lang_default,view_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"View",__name:"view",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),view_default=view_vue_vue_type_script_setup_true_lang_default,warning_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"WarningFilled",__name:"warning-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),warning_filled_default=warning_filled_vue_vue_type_script_setup_true_lang_default,zoom_in_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomIn",__name:"zoom-in",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),zoom_in_default=zoom_in_vue_vue_type_script_setup_true_lang_default,zoom_out_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomOut",__name:"zoom-out",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),zoom_out_default=zoom_out_vue_vue_type_script_setup_true_lang_default;const epPropKey="__epPropKey",definePropType=t=>t,isEpProp=t=>isObject$2(t)&&!!t[epPropKey],buildProp=(t,r)=>{if(!isObject$2(t)||isEpProp(t))return t;const{values:e,required:n,default:g,type:y,validator:i}=t,L={type:y,required:!!n,validator:e||i?$=>{let V=!1,z=[];if(e&&(z=Array.from(e),hasOwn(t,"default")&&z.push(g),V||(V=z.includes($))),i&&(V||(V=i($))),!V&&z.length>0){const re=[...new Set(z)].map(oe=>JSON.stringify(oe)).join(", ");warn(`Invalid prop: validation failed${r?` for prop "${r}"`:""}. Expected one of [${re}], got value ${JSON.stringify($)}.`)}return V}:void 0,[epPropKey]:!0};return hasOwn(t,"default")&&(L.default=g),L},buildProps=t=>fromPairs(Object.entries(t).map(([r,e])=>[r,buildProp(e,r)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(t,r)=>{if(t.install=e=>{for(const n of[t,...Object.values(r??{})])e.component(n.name,n)},r)for(const[e,n]of Object.entries(r))t[e]=n;return t},withInstallFunction=(t,r)=>(t.install=e=>{t._context=e._context,e.config.globalProperties[r]=t},t),withNoopInstall=t=>(t.install=NOOP,t),composeRefs=(...t)=>r=>{t.forEach(e=>{isFunction$3(e)?e(r):e.value=r})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",componentSizes=["","default","small","large"],isValidComponentSize=t=>["",...componentSizes].includes(t);var PatchFlags=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(PatchFlags||{});function isFragment(t){return isVNode(t)&&t.type===Fragment}function isComment(t){return isVNode(t)&&t.type===Comment}function isValidElementNode(t){return isVNode(t)&&!isFragment(t)&&!isComment(t)}const flattedChildren=t=>{const r=isArray$3(t)?t:[t],e=[];return r.forEach(n=>{var g;isArray$3(n)?e.push(...flattedChildren(n)):isVNode(n)&&isArray$3(n.children)?e.push(...flattedChildren(n.children)):(e.push(n),isVNode(n)&&((g=n.component)!=null&&g.subTree)&&e.push(...flattedChildren(n.component.subTree)))}),e},unique=t=>[...new Set(t)],castArray=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],isKorean=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),mutable=t=>t,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(t={})=>{const{excludeListeners:r=!1,excludeKeys:e}=t,n=computed(()=>((e==null?void 0:e.value)||[]).concat(DEFAULT_EXCLUDE_KEYS)),g=getCurrentInstance();return computed(g?()=>{var y;return fromPairs(Object.entries((y=g.proxy)==null?void 0:y.$attrs).filter(([i])=>!n.value.includes(i)&&!(r&&LISTENER_PREFIX.test(i))))}:()=>({}))},useDeprecated=({from:t,replacement:r,scope:e,version:n,ref:g,type:y="API"},i)=>{watch(()=>unref(i),k=>{},{immediate:!0})},useDraggable=(t,r,e,n)=>{let g={offsetX:0,offsetY:0};const y=L=>{const $=L.clientX,V=L.clientY,{offsetX:z,offsetY:re}=g,oe=t.value.getBoundingClientRect(),le=oe.left,ue=oe.top,ie=oe.width,ae=oe.height,Fe=document.documentElement.clientWidth,de=document.documentElement.clientHeight,Ne=-le+z,Ve=-ue+re,ze=Fe-le-ie+z,jt=de-ue-ae+re,kt=lr=>{let tr=z+lr.clientX-$,or=re+lr.clientY-V;n!=null&&n.value||(tr=Math.min(Math.max(tr,Ne),ze),or=Math.min(Math.max(or,Ve),jt)),g={offsetX:tr,offsetY:or},t.value&&(t.value.style.transform=`translate(${addUnit(tr)}, ${addUnit(or)})`)},Et=()=>{document.removeEventListener("mousemove",kt),document.removeEventListener("mouseup",Et)};document.addEventListener("mousemove",kt),document.addEventListener("mouseup",Et)},i=()=>{r.value&&t.value&&r.value.addEventListener("mousedown",y)},k=()=>{r.value&&t.value&&r.value.removeEventListener("mousedown",y)};onMounted(()=>{watchEffect(()=>{e.value?i():k()})}),onBeforeUnmount(()=>{k()})};var English={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const buildTranslator=t=>(r,e)=>translate(r,e,unref(t)),translate=(t,r,e)=>get(e,t,t).replace(/\{(\w+)\}/g,(n,g)=>{var y;return`${(y=r==null?void 0:r[g])!=null?y:`{${g}}`}`}),buildLocaleContext=t=>{const r=computed(()=>unref(t).name),e=isRef(t)?t:ref(t);return{lang:r,locale:e,t:buildTranslator(t)}},localeContextKey=Symbol("localeContextKey"),useLocale=t=>{const r=t||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>r.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(t,r,e,n,g)=>{let y=`${t}-${r}`;return e&&(y+=`-${e}`),n&&(y+=`__${n}`),g&&(y+=`--${g}`),y},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=t=>{const r=t||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(r)||defaultNamespace)},useNamespace=(t,r)=>{const e=useGetDerivedNamespace(r);return{namespace:e,b:(ue="")=>_bem(e.value,t,ue,"",""),e:ue=>ue?_bem(e.value,t,"",ue,""):"",m:ue=>ue?_bem(e.value,t,"","",ue):"",be:(ue,ie)=>ue&&ie?_bem(e.value,t,ue,ie,""):"",em:(ue,ie)=>ue&&ie?_bem(e.value,t,"",ue,ie):"",bm:(ue,ie)=>ue&&ie?_bem(e.value,t,ue,"",ie):"",bem:(ue,ie,ae)=>ue&&ie&&ae?_bem(e.value,t,ue,ie,ae):"",is:(ue,...ie)=>{const ae=ie.length>=1?ie[0]:!0;return ue&&ae?`${statePrefix}${ue}`:""},cssVar:ue=>{const ie={};for(const ae in ue)ue[ae]&&(ie[`--${e.value}-${ae}`]=ue[ae]);return ie},cssVarName:ue=>`--${e.value}-${ue}`,cssVarBlock:ue=>{const ie={};for(const ae in ue)ue[ae]&&(ie[`--${e.value}-${t}-${ae}`]=ue[ae]);return ie},cssVarBlockName:ue=>`--${e.value}-${t}-${ue}`}},useLockscreen=(t,r={})=>{isRef(t)||throwError("[useLockscreen]","You need to pass a ref param to this function");const e=r.ns||useNamespace("popup"),n=computed$1(()=>e.bm("parent","hidden"));if(!isClient||hasClass(document.body,n.value))return;let g=0,y=!1,i="0";const k=()=>{setTimeout(()=>{removeClass(document==null?void 0:document.body,n.value),y&&document&&(document.body.style.width=i)},200)};watch(t,L=>{if(!L){k();return}y=!hasClass(document.body,n.value),y&&(i=document.body.style.width),g=getScrollBarWidth(e.namespace.value);const $=document.documentElement.clientHeight<document.body.scrollHeight,V=getStyle(document.body,"overflowY");g>0&&($||V==="scroll")&&y&&(document.body.style.width=`calc(100% - ${g}px)`),addClass(document.body,n.value)}),onScopeDispose(()=>k())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=t=>{const r=`update:${t}`,e=`onUpdate:${t}`,n=[r],g={[t]:_prop,[e]:_event};return{useModelToggle:({indicator:i,toggleReason:k,shouldHideWhenRouteChanges:L,shouldProceed:$,onShow:V,onHide:z})=>{const re=getCurrentInstance(),{emit:oe}=re,le=re.props,ue=computed(()=>isFunction$3(le[e])),ie=computed(()=>le[t]===null),ae=jt=>{i.value!==!0&&(i.value=!0,k&&(k.value=jt),isFunction$3(V)&&V(jt))},Fe=jt=>{i.value!==!1&&(i.value=!1,k&&(k.value=jt),isFunction$3(z)&&z(jt))},de=jt=>{if(le.disabled===!0||isFunction$3($)&&!$())return;const kt=ue.value&&isClient;kt&&oe(r,!0),(ie.value||!kt)&&ae(jt)},Ne=jt=>{if(le.disabled===!0||!isClient)return;const kt=ue.value&&isClient;kt&&oe(r,!1),(ie.value||!kt)&&Fe(jt)},Ve=jt=>{isBoolean$1(jt)&&(le.disabled&&jt?ue.value&&oe(r,!1):i.value!==jt&&(jt?ae():Fe()))},ze=()=>{i.value?Ne():de()};return watch(()=>le[t],Ve),L&&re.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...re.proxy.$route}),()=>{L.value&&i.value&&Ne()}),onMounted(()=>{Ve(le[t])}),{hide:Ne,show:de,toggle:ze,hasUpdateHandler:ue}},useModelToggleProps:g,useModelToggleEmits:n}};createModelToggleComposable("modelValue");const useProp=t=>{const r=getCurrentInstance();return computed(()=>{var e,n;return(n=(e=r==null?void 0:r.proxy)==null?void 0:e.$props)==null?void 0:n[t]})};var E$1="top",R="bottom",W="right",P$1="left",me="auto",G=[E$1,R,W,P$1],U$1="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(t,r){return t.concat([r+"-"+U$1,r+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(t,r){return t.concat([r,r+"-"+U$1,r+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt$1="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt$1,nt,rt];function C(t){return t?(t.nodeName||"").toLowerCase():null}function H(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function Q(t){var r=H(t).Element;return t instanceof r||t instanceof Element}function B(t){var r=H(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function Pe(t){if(typeof ShadowRoot>"u")return!1;var r=H(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}function Mt(t){var r=t.state;Object.keys(r.elements).forEach(function(e){var n=r.styles[e]||{},g=r.attributes[e]||{},y=r.elements[e];!B(y)||!C(y)||(Object.assign(y.style,n),Object.keys(g).forEach(function(i){var k=g[i];k===!1?y.removeAttribute(i):y.setAttribute(i,k===!0?"":k)}))})}function Rt(t){var r=t.state,e={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,e.popper),r.styles=e,r.elements.arrow&&Object.assign(r.elements.arrow.style,e.arrow),function(){Object.keys(r.elements).forEach(function(n){var g=r.elements[n],y=r.attributes[n]||{},i=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:e[n]),k=i.reduce(function(L,$){return L[$]="",L},{});!B(g)||!C(g)||(Object.assign(g.style,k),Object.keys(y).forEach(function(L){g.removeAttribute(L)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(t){return t.split("-")[0]}var X$1=Math.max,ve=Math.min,Z=Math.round;function ee(t,r){r===void 0&&(r=!1);var e=t.getBoundingClientRect(),n=1,g=1;if(B(t)&&r){var y=t.offsetHeight,i=t.offsetWidth;i>0&&(n=Z(e.width)/i||1),y>0&&(g=Z(e.height)/y||1)}return{width:e.width/n,height:e.height/g,top:e.top/g,right:e.right/n,bottom:e.bottom/g,left:e.left/n,x:e.left/n,y:e.top/g}}function ke(t){var r=ee(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(r.width-e)<=1&&(e=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}function it(t,r){var e=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(e&&Pe(e)){var n=r;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function N$1(t){return H(t).getComputedStyle(t)}function Wt(t){return["table","td","th"].indexOf(C(t))>=0}function I$1(t){return((Q(t)?t.ownerDocument:t.document)||window.document).documentElement}function ge(t){return C(t)==="html"?t:t.assignedSlot||t.parentNode||(Pe(t)?t.host:null)||I$1(t)}function at(t){return!B(t)||N$1(t).position==="fixed"?null:t.offsetParent}function Bt(t){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&B(t)){var n=N$1(t);if(n.position==="fixed")return null}var g=ge(t);for(Pe(g)&&(g=g.host);B(g)&&["html","body"].indexOf(C(g))<0;){var y=N$1(g);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||r&&y.willChange==="filter"||r&&y.filter&&y.filter!=="none")return g;g=g.parentNode}return null}function se(t){for(var r=H(t),e=at(t);e&&Wt(e)&&N$1(e).position==="static";)e=at(e);return e&&(C(e)==="html"||C(e)==="body"&&N$1(e).position==="static")?r:e||Bt(t)||r}function Le(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fe(t,r,e){return X$1(t,ve(r,e))}function St(t,r,e){var n=fe(t,r,e);return n>e?e:n}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(t){return Object.assign({},st(),t)}function ct(t,r){return r.reduce(function(e,n){return e[n]=t,e},{})}var Tt=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ft(typeof t!="number"?t:ct(t,G))};function Ht(t){var r,e=t.state,n=t.name,g=t.options,y=e.elements.arrow,i=e.modifiersData.popperOffsets,k=q(e.placement),L=Le(k),$=[P$1,W].indexOf(k)>=0,V=$?"height":"width";if(!(!y||!i)){var z=Tt(g.padding,e),re=ke(y),oe=L==="y"?E$1:P$1,le=L==="y"?R:W,ue=e.rects.reference[V]+e.rects.reference[L]-i[L]-e.rects.popper[V],ie=i[L]-e.rects.reference[L],ae=se(y),Fe=ae?L==="y"?ae.clientHeight||0:ae.clientWidth||0:0,de=ue/2-ie/2,Ne=z[oe],Ve=Fe-re[V]-z[le],ze=Fe/2-re[V]/2+de,jt=fe(Ne,ze,Ve),kt=L;e.modifiersData[n]=(r={},r[kt]=jt,r.centerOffset=jt-ze,r)}}function Ct(t){var r=t.state,e=t.options,n=e.element,g=n===void 0?"[data-popper-arrow]":n;g!=null&&(typeof g=="string"&&(g=r.elements.popper.querySelector(g),!g)||!it(r.elements.popper,g)||(r.elements.arrow=g))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(t){return t.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(t){var r=t.x,e=t.y,n=window,g=n.devicePixelRatio||1;return{x:Z(r*g)/g||0,y:Z(e*g)/g||0}}function ut(t){var r,e=t.popper,n=t.popperRect,g=t.placement,y=t.variation,i=t.offsets,k=t.position,L=t.gpuAcceleration,$=t.adaptive,V=t.roundOffsets,z=t.isFixed,re=i.x,oe=re===void 0?0:re,le=i.y,ue=le===void 0?0:le,ie=typeof V=="function"?V({x:oe,y:ue}):{x:oe,y:ue};oe=ie.x,ue=ie.y;var ae=i.hasOwnProperty("x"),Fe=i.hasOwnProperty("y"),de=P$1,Ne=E$1,Ve=window;if($){var ze=se(e),jt="clientHeight",kt="clientWidth";if(ze===H(e)&&(ze=I$1(e),N$1(ze).position!=="static"&&k==="absolute"&&(jt="scrollHeight",kt="scrollWidth")),ze=ze,g===E$1||(g===P$1||g===W)&&y===J){Ne=R;var Et=z&&ze===Ve&&Ve.visualViewport?Ve.visualViewport.height:ze[jt];ue-=Et-n.height,ue*=L?1:-1}if(g===P$1||(g===E$1||g===R)&&y===J){de=W;var lr=z&&ze===Ve&&Ve.visualViewport?Ve.visualViewport.width:ze[kt];oe-=lr-n.width,oe*=L?1:-1}}var tr=Object.assign({position:k},$&&qt),or=V===!0?Vt({x:oe,y:ue}):{x:oe,y:ue};if(oe=or.x,ue=or.y,L){var dr;return Object.assign({},tr,(dr={},dr[Ne]=Fe?"0":"",dr[de]=ae?"0":"",dr.transform=(Ve.devicePixelRatio||1)<=1?"translate("+oe+"px, "+ue+"px)":"translate3d("+oe+"px, "+ue+"px, 0)",dr))}return Object.assign({},tr,(r={},r[Ne]=Fe?ue+"px":"",r[de]=ae?oe+"px":"",r.transform="",r))}function Nt(t){var r=t.state,e=t.options,n=e.gpuAcceleration,g=n===void 0?!0:n,y=e.adaptive,i=y===void 0?!0:y,k=e.roundOffsets,L=k===void 0?!0:k,$={placement:q(r.placement),variation:te(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:g,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,ut(Object.assign({},$,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:i,roundOffsets:L})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,ut(Object.assign({},$,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:L})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(t){var r=t.state,e=t.instance,n=t.options,g=n.scroll,y=g===void 0?!0:g,i=n.resize,k=i===void 0?!0:i,L=H(r.elements.popper),$=[].concat(r.scrollParents.reference,r.scrollParents.popper);return y&&$.forEach(function(V){V.addEventListener("scroll",e.update,ye)}),k&&L.addEventListener("resize",e.update,ye),function(){y&&$.forEach(function(V){V.removeEventListener("scroll",e.update,ye)}),k&&L.removeEventListener("resize",e.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(t){return t.replace(/left|right|bottom|top/g,function(r){return _t[r]})}var zt={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,function(r){return zt[r]})}function We(t){var r=H(t),e=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Be(t){return ee(I$1(t)).left+We(t).scrollLeft}function Ft(t){var r=H(t),e=I$1(t),n=r.visualViewport,g=e.clientWidth,y=e.clientHeight,i=0,k=0;return n&&(g=n.width,y=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=n.offsetLeft,k=n.offsetTop)),{width:g,height:y,x:i+Be(t),y:k}}function Ut(t){var r,e=I$1(t),n=We(t),g=(r=t.ownerDocument)==null?void 0:r.body,y=X$1(e.scrollWidth,e.clientWidth,g?g.scrollWidth:0,g?g.clientWidth:0),i=X$1(e.scrollHeight,e.clientHeight,g?g.scrollHeight:0,g?g.clientHeight:0),k=-n.scrollLeft+Be(t),L=-n.scrollTop;return N$1(g||e).direction==="rtl"&&(k+=X$1(e.clientWidth,g?g.clientWidth:0)-y),{width:y,height:i,x:k,y:L}}function Se(t){var r=N$1(t),e=r.overflow,n=r.overflowX,g=r.overflowY;return/auto|scroll|overlay|hidden/.test(e+g+n)}function dt(t){return["html","body","#document"].indexOf(C(t))>=0?t.ownerDocument.body:B(t)&&Se(t)?t:dt(ge(t))}function ce(t,r){var e;r===void 0&&(r=[]);var n=dt(t),g=n===((e=t.ownerDocument)==null?void 0:e.body),y=H(n),i=g?[y].concat(y.visualViewport||[],Se(n)?n:[]):n,k=r.concat(i);return g?k:k.concat(ce(ge(i)))}function Te(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Xt(t){var r=ee(t);return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function ht(t,r){return r===je?Te(Ft(t)):Q(r)?Xt(r):Te(Ut(I$1(t)))}function Yt(t){var r=ce(ge(t)),e=["absolute","fixed"].indexOf(N$1(t).position)>=0,n=e&&B(t)?se(t):t;return Q(n)?r.filter(function(g){return Q(g)&&it(g,n)&&C(g)!=="body"}):[]}function Gt(t,r,e){var n=r==="clippingParents"?Yt(t):[].concat(r),g=[].concat(n,[e]),y=g[0],i=g.reduce(function(k,L){var $=ht(t,L);return k.top=X$1($.top,k.top),k.right=ve($.right,k.right),k.bottom=ve($.bottom,k.bottom),k.left=X$1($.left,k.left),k},ht(t,y));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function mt(t){var r=t.reference,e=t.element,n=t.placement,g=n?q(n):null,y=n?te(n):null,i=r.x+r.width/2-e.width/2,k=r.y+r.height/2-e.height/2,L;switch(g){case E$1:L={x:i,y:r.y-e.height};break;case R:L={x:i,y:r.y+r.height};break;case W:L={x:r.x+r.width,y:k};break;case P$1:L={x:r.x-e.width,y:k};break;default:L={x:r.x,y:r.y}}var $=g?Le(g):null;if($!=null){var V=$==="y"?"height":"width";switch(y){case U$1:L[$]=L[$]-(r[V]/2-e[V]/2);break;case J:L[$]=L[$]+(r[V]/2-e[V]/2);break}}return L}function ne(t,r){r===void 0&&(r={});var e=r,n=e.placement,g=n===void 0?t.placement:n,y=e.boundary,i=y===void 0?Xe:y,k=e.rootBoundary,L=k===void 0?je:k,$=e.elementContext,V=$===void 0?K:$,z=e.altBoundary,re=z===void 0?!1:z,oe=e.padding,le=oe===void 0?0:oe,ue=ft(typeof le!="number"?le:ct(le,G)),ie=V===K?Ye:K,ae=t.rects.popper,Fe=t.elements[re?ie:V],de=Gt(Q(Fe)?Fe:Fe.contextElement||I$1(t.elements.popper),i,L),Ne=ee(t.elements.reference),Ve=mt({reference:Ne,element:ae,strategy:"absolute",placement:g}),ze=Te(Object.assign({},ae,Ve)),jt=V===K?ze:Ne,kt={top:de.top-jt.top+ue.top,bottom:jt.bottom-de.bottom+ue.bottom,left:de.left-jt.left+ue.left,right:jt.right-de.right+ue.right},Et=t.modifiersData.offset;if(V===K&&Et){var lr=Et[g];Object.keys(kt).forEach(function(tr){var or=[W,R].indexOf(tr)>=0?1:-1,dr=[E$1,R].indexOf(tr)>=0?"y":"x";kt[tr]+=lr[dr]*or})}return kt}function Jt(t,r){r===void 0&&(r={});var e=r,n=e.placement,g=e.boundary,y=e.rootBoundary,i=e.padding,k=e.flipVariations,L=e.allowedAutoPlacements,$=L===void 0?Ee:L,V=te(n),z=V?k?De:De.filter(function(le){return te(le)===V}):G,re=z.filter(function(le){return $.indexOf(le)>=0});re.length===0&&(re=z);var oe=re.reduce(function(le,ue){return le[ue]=ne(t,{placement:ue,boundary:g,rootBoundary:y,padding:i})[q(ue)],le},{});return Object.keys(oe).sort(function(le,ue){return oe[le]-oe[ue]})}function Kt(t){if(q(t)===me)return[];var r=be(t);return[lt(t),r,lt(r)]}function Qt(t){var r=t.state,e=t.options,n=t.name;if(!r.modifiersData[n]._skip){for(var g=e.mainAxis,y=g===void 0?!0:g,i=e.altAxis,k=i===void 0?!0:i,L=e.fallbackPlacements,$=e.padding,V=e.boundary,z=e.rootBoundary,re=e.altBoundary,oe=e.flipVariations,le=oe===void 0?!0:oe,ue=e.allowedAutoPlacements,ie=r.options.placement,ae=q(ie),Fe=ae===ie,de=L||(Fe||!le?[be(ie)]:Kt(ie)),Ne=[ie].concat(de).reduce(function(mr,_r){return mr.concat(q(_r)===me?Jt(r,{placement:_r,boundary:V,rootBoundary:z,padding:$,flipVariations:le,allowedAutoPlacements:ue}):_r)},[]),Ve=r.rects.reference,ze=r.rects.popper,jt=new Map,kt=!0,Et=Ne[0],lr=0;lr<Ne.length;lr++){var tr=Ne[lr],or=q(tr),dr=te(tr)===U$1,cr=[E$1,R].indexOf(or)>=0,nr=cr?"width":"height",ur=ne(r,{placement:tr,boundary:V,rootBoundary:z,altBoundary:re,padding:$}),ar=cr?dr?W:P$1:dr?R:E$1;Ve[nr]>ze[nr]&&(ar=be(ar));var gr=be(ar),pr=[];if(y&&pr.push(ur[or]<=0),k&&pr.push(ur[ar]<=0,ur[gr]<=0),pr.every(function(mr){return mr})){Et=tr,kt=!1;break}jt.set(tr,pr)}if(kt)for(var yr=le?3:1,Sr=function(mr){var _r=Ne.find(function(Nr){var Pr=jt.get(Nr);if(Pr)return Pr.slice(0,mr).every(function(sr){return sr})});if(_r)return Et=_r,"break"},wr=yr;wr>0;wr--){var Mr=Sr(wr);if(Mr==="break")break}r.placement!==Et&&(r.modifiersData[n]._skip=!0,r.placement=Et,r.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(t,r,e){return e===void 0&&(e={x:0,y:0}),{top:t.top-r.height-e.y,right:t.right-r.width+e.x,bottom:t.bottom-r.height+e.y,left:t.left-r.width-e.x}}function yt(t){return[E$1,W,R,P$1].some(function(r){return t[r]>=0})}function Zt(t){var r=t.state,e=t.name,n=r.rects.reference,g=r.rects.popper,y=r.modifiersData.preventOverflow,i=ne(r,{elementContext:"reference"}),k=ne(r,{altBoundary:!0}),L=gt(i,n),$=gt(k,g,y),V=yt(L),z=yt($);r.modifiersData[e]={referenceClippingOffsets:L,popperEscapeOffsets:$,isReferenceHidden:V,hasPopperEscaped:z},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":V,"data-popper-escaped":z})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(t,r,e){var n=q(t),g=[P$1,E$1].indexOf(n)>=0?-1:1,y=typeof e=="function"?e(Object.assign({},r,{placement:t})):e,i=y[0],k=y[1];return i=i||0,k=(k||0)*g,[P$1,W].indexOf(n)>=0?{x:k,y:i}:{x:i,y:k}}function tn(t){var r=t.state,e=t.options,n=t.name,g=e.offset,y=g===void 0?[0,0]:g,i=Ee.reduce(function(V,z){return V[z]=en(z,r.rects,y),V},{}),k=i[r.placement],L=k.x,$=k.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=L,r.modifiersData.popperOffsets.y+=$),r.modifiersData[n]=i}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(t){var r=t.state,e=t.name;r.modifiersData[e]=mt({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(t){return t==="x"?"y":"x"}function on(t){var r=t.state,e=t.options,n=t.name,g=e.mainAxis,y=g===void 0?!0:g,i=e.altAxis,k=i===void 0?!1:i,L=e.boundary,$=e.rootBoundary,V=e.altBoundary,z=e.padding,re=e.tether,oe=re===void 0?!0:re,le=e.tetherOffset,ue=le===void 0?0:le,ie=ne(r,{boundary:L,rootBoundary:$,padding:z,altBoundary:V}),ae=q(r.placement),Fe=te(r.placement),de=!Fe,Ne=Le(ae),Ve=rn(Ne),ze=r.modifiersData.popperOffsets,jt=r.rects.reference,kt=r.rects.popper,Et=typeof ue=="function"?ue(Object.assign({},r.rects,{placement:r.placement})):ue,lr=typeof Et=="number"?{mainAxis:Et,altAxis:Et}:Object.assign({mainAxis:0,altAxis:0},Et),tr=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,or={x:0,y:0};if(ze){if(y){var dr,cr=Ne==="y"?E$1:P$1,nr=Ne==="y"?R:W,ur=Ne==="y"?"height":"width",ar=ze[Ne],gr=ar+ie[cr],pr=ar-ie[nr],yr=oe?-kt[ur]/2:0,Sr=Fe===U$1?jt[ur]:kt[ur],wr=Fe===U$1?-kt[ur]:-jt[ur],Mr=r.elements.arrow,mr=oe&&Mr?ke(Mr):{width:0,height:0},_r=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:st(),Nr=_r[cr],Pr=_r[nr],sr=fe(0,jt[ur],mr[ur]),Ir=de?jt[ur]/2-yr-sr-Nr-lr.mainAxis:Sr-sr-Nr-lr.mainAxis,Ar=de?-jt[ur]/2+yr+sr+Pr+lr.mainAxis:wr+sr+Pr+lr.mainAxis,Cr=r.elements.arrow&&se(r.elements.arrow),br=Cr?Ne==="y"?Cr.clientTop||0:Cr.clientLeft||0:0,vr=(dr=tr==null?void 0:tr[Ne])!=null?dr:0,Tr=ar+Ir-vr-br,Br=ar+Ar-vr,Lr=fe(oe?ve(gr,Tr):gr,ar,oe?X$1(pr,Br):pr);ze[Ne]=Lr,or[Ne]=Lr-ar}if(k){var Fr,qr=Ne==="x"?E$1:P$1,Vr=Ne==="x"?R:W,Qr=ze[Ve],Sn=Ve==="y"?"height":"width",Mn=Qr+ie[qr],Xr=Qr-ie[Vr],Wn=[E$1,P$1].indexOf(ae)!==-1,Zr=(Fr=tr==null?void 0:tr[Ve])!=null?Fr:0,En=Wn?Mn:Qr-jt[Sn]-kt[Sn]-Zr+lr.altAxis,Jr=Wn?Qr+jt[Sn]+kt[Sn]-Zr-lr.altAxis:Xr,kn=oe&&Wn?St(En,Qr,Jr):fe(oe?En:Mn,Qr,oe?Jr:Xr);ze[Ve]=kn,or[Ve]=kn-Qr}r.modifiersData[n]=or}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sn(t){return t===H(t)||!B(t)?We(t):an(t)}function fn(t){var r=t.getBoundingClientRect(),e=Z(r.width)/t.offsetWidth||1,n=Z(r.height)/t.offsetHeight||1;return e!==1||n!==1}function cn(t,r,e){e===void 0&&(e=!1);var n=B(r),g=B(r)&&fn(r),y=I$1(r),i=ee(t,g),k={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(n||!n&&!e)&&((C(r)!=="body"||Se(y))&&(k=sn(r)),B(r)?(L=ee(r,!0),L.x+=r.clientLeft,L.y+=r.clientTop):y&&(L.x=Be(y))),{x:i.left+k.scrollLeft-L.x,y:i.top+k.scrollTop-L.y,width:i.width,height:i.height}}function pn(t){var r=new Map,e=new Set,n=[];t.forEach(function(y){r.set(y.name,y)});function g(y){e.add(y.name);var i=[].concat(y.requires||[],y.requiresIfExists||[]);i.forEach(function(k){if(!e.has(k)){var L=r.get(k);L&&g(L)}}),n.push(y)}return t.forEach(function(y){e.has(y.name)||g(y)}),n}function un(t){var r=pn(t);return ot.reduce(function(e,n){return e.concat(r.filter(function(g){return g.phase===n}))},[])}function ln(t){var r;return function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(t())})})),r}}function dn(t){var r=t.reduce(function(e,n){var g=e[n.name];return e[n.name]=g?Object.assign({},g,n,{options:Object.assign({},g.options,n.options),data:Object.assign({},g.data,n.data)}):n,e},{});return Object.keys(r).map(function(e){return r[e]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function we(t){t===void 0&&(t={});var r=t,e=r.defaultModifiers,n=e===void 0?[]:e,g=r.defaultOptions,y=g===void 0?Ot:g;return function(i,k,L){L===void 0&&(L=y);var $={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,y),modifiersData:{},elements:{reference:i,popper:k},attributes:{},styles:{}},V=[],z=!1,re={state:$,setOptions:function(ue){var ie=typeof ue=="function"?ue($.options):ue;le(),$.options=Object.assign({},y,$.options,ie),$.scrollParents={reference:Q(i)?ce(i):i.contextElement?ce(i.contextElement):[],popper:ce(k)};var ae=un(dn([].concat(n,$.options.modifiers)));return $.orderedModifiers=ae.filter(function(Fe){return Fe.enabled}),oe(),re.update()},forceUpdate:function(){if(!z){var ue=$.elements,ie=ue.reference,ae=ue.popper;if($t(ie,ae)){$.rects={reference:cn(ie,se(ae),$.options.strategy==="fixed"),popper:ke(ae)},$.reset=!1,$.placement=$.options.placement,$.orderedModifiers.forEach(function(kt){return $.modifiersData[kt.name]=Object.assign({},kt.data)});for(var Fe=0;Fe<$.orderedModifiers.length;Fe++){if($.reset===!0){$.reset=!1,Fe=-1;continue}var de=$.orderedModifiers[Fe],Ne=de.fn,Ve=de.options,ze=Ve===void 0?{}:Ve,jt=de.name;typeof Ne=="function"&&($=Ne({state:$,options:ze,name:jt,instance:re})||$)}}}},update:ln(function(){return new Promise(function(ue){re.forceUpdate(),ue($)})}),destroy:function(){le(),z=!0}};if(!$t(i,k))return re;re.setOptions(L).then(function(ue){!z&&L.onFirstUpdate&&L.onFirstUpdate(ue)});function oe(){$.orderedModifiers.forEach(function(ue){var ie=ue.name,ae=ue.options,Fe=ae===void 0?{}:ae,de=ue.effect;if(typeof de=="function"){var Ne=de({state:$,name:ie,instance:re,options:Fe}),Ve=function(){};V.push(Ne||Ve)}})}function le(){V.forEach(function(ue){return ue()}),V=[]}return re}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(t,r,e={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:L})=>{const $=deriveState(L);Object.assign(i.value,$)},requires:["computeStyles"]},g=computed(()=>{const{onFirstUpdate:L,placement:$,strategy:V,modifiers:z}=unref(e);return{onFirstUpdate:L,placement:$||"bottom",strategy:V||"absolute",modifiers:[...z||[],n,{name:"applyStyles",enabled:!1}]}}),y=shallowRef(),i=ref({styles:{popper:{position:unref(g).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),k=()=>{y.value&&(y.value.destroy(),y.value=void 0)};return watch(g,L=>{const $=unref(y);$&&$.setOptions(L)},{deep:!0}),watch([t,r],([L,$])=>{k(),!(!L||!$)&&(y.value=yn(L,$,unref(g)))}),onBeforeUnmount(()=>{k()}),{state:computed(()=>{var L;return{...((L=unref(y))==null?void 0:L.state)||{}}}),styles:computed(()=>unref(i).styles),attributes:computed(()=>unref(i).attributes),update:()=>{var L;return(L=unref(y))==null?void 0:L.update()},forceUpdate:()=>{var L;return(L=unref(y))==null?void 0:L.forceUpdate()},instanceRef:computed(()=>unref(y))}};function deriveState(t){const r=Object.keys(t.elements),e=fromPairs(r.map(g=>[g,t.styles[g]||{}])),n=fromPairs(r.map(g=>[g,t.attributes[g]]));return{styles:e,attributes:n}}const useSameTarget=t=>{if(!t)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let r=!1,e=!1;return{onClick:i=>{r&&e&&t(i),r=e=!1},onMousedown:i=>{r=i.target===i.currentTarget},onMouseup:i=>{e=i.target===i.currentTarget}}};function useTimeout(){let t;const r=(n,g)=>{e(),t=window.setTimeout(n,g)},e=()=>window.clearTimeout(t);return tryOnScopeDispose(()=>e()),{registerTimeout:r,cancelTimeout:e}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=t=>{const r=useIdInjection(),e=useGetDerivedNamespace();return computed(()=>unref(t)||`${e.value}-id-${r.prefix}-${r.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=t=>{const r=t;r.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(e=>e(r))},useEscapeKeydown=t=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(t)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(r=>r!==t),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const t=useGetDerivedNamespace(),r=useIdInjection(),e=computed(()=>`${t.value}-popper-container-${r.prefix}`),n=computed(()=>`#${e.value}`);return{id:e,selector:n}},createContainer=t=>{const r=document.createElement("div");return r.id=t,document.body.appendChild(r),r},usePopperContainer=()=>{const{id:t,selector:r}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(r.value)&&(cachedContainer=createContainer(t.value))}),{id:t,selector:r}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:t,hideAfter:r,autoClose:e,open:n,close:g})=>{const{registerTimeout:y}=useTimeout(),{registerTimeout:i,cancelTimeout:k}=useTimeout();return{onOpen:V=>{y(()=>{n(V);const z=unref(e);isNumber$1(z)&&z>0&&i(()=>{g(V)},z)},unref(t))},onClose:V=>{k(),y(()=>{g(V)},unref(r))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=t=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:e=>{t.value=e}})},useForwardRefDirective=t=>({mounted(r){t(r)},updated(r){t(r)},unmounted(){t(null)}}),initial={current:0},zIndex=ref(0),defaultInitialZIndex=2e3,ZINDEX_INJECTION_KEY=Symbol("elZIndexContextKey"),zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=t=>{const r=getCurrentInstance()?inject(ZINDEX_INJECTION_KEY,initial):initial,e=t||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),n=computed(()=>{const i=unref(e);return isNumber$1(i)?i:defaultInitialZIndex}),g=computed(()=>n.value+zIndex.value),y=()=>(r.current++,zIndex.value=r.current,g.value);return!isClient&&inject(ZINDEX_INJECTION_KEY),{initialZIndex:n,currentZIndex:g,nextZIndex:y}};function useCursor(t){const r=ref();function e(){if(t.value==null)return;const{selectionStart:g,selectionEnd:y,value:i}=t.value;if(g==null||y==null)return;const k=i.slice(0,Math.max(0,g)),L=i.slice(Math.max(0,y));r.value={selectionStart:g,selectionEnd:y,value:i,beforeTxt:k,afterTxt:L}}function n(){if(t.value==null||r.value==null)return;const{value:g}=t.value,{beforeTxt:y,afterTxt:i,selectionStart:k}=r.value;if(y==null||i==null||k==null)return;let L=g.length;if(g.endsWith(i))L=g.length-i.length;else if(g.startsWith(y))L=y.length;else{const $=y[k-1],V=g.indexOf($,k-1);V!==-1&&(L=V+1)}t.value.setSelectionRange(L,L)}return[e,n]}const useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const t=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(t.size)||"")};function useFocusController(t,{afterFocus:r,beforeBlur:e,afterBlur:n}={}){const g=getCurrentInstance(),{emit:y}=g,i=shallowRef(),k=ref(!1),L=z=>{k.value||(k.value=!0,y("focus",z),r==null||r())},$=z=>{var re;isFunction$3(e)&&e(z)||z.relatedTarget&&((re=i.value)!=null&&re.contains(z.relatedTarget))||(k.value=!1,y("blur",z),n==null||n())},V=()=>{var z;(z=t.value)==null||z.focus()};return watch(i,z=>{z&&z.setAttribute("tabindex","-1")}),useEventListener(i,"click",V),{wrapperRef:i,isFocused:k,handleFocus:L,handleBlur:$}}const DEFAULT_EMPTY_VALUES=["",void 0,null],DEFAULT_VALUE_ON_CLEAR=void 0,useEmptyValuesProps=buildProps({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:t=>isFunction$3(t)?!t():!t}}),useEmptyValues=(t,r)=>{let e=useGlobalConfig();e.value||(e=ref({}));const n=computed(()=>t.emptyValues||e.value.emptyValues||DEFAULT_EMPTY_VALUES),g=computed(()=>isFunction$3(t.valueOnClear)?t.valueOnClear():t.valueOnClear!==void 0?t.valueOnClear:isFunction$3(e.value.valueOnClear)?e.value.valueOnClear():e.value.valueOnClear!==void 0?e.value.valueOnClear:r!==void 0?r:DEFAULT_VALUE_ON_CLEAR),y=i=>n.value.includes(i);return n.value.includes(g.value),{emptyValues:n,valueOnClear:g,isEmptyValue:y}},ariaProps=buildProps({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),useAriaProps=t=>pick$1(ariaProps,t),configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(t,r=void 0){const e=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return t?computed(()=>{var n,g;return(g=(n=e.value)==null?void 0:n[t])!=null?g:r}):e}function useGlobalComponentSettings(t,r){const e=useGlobalConfig(),n=useNamespace(t,computed(()=>{var k;return((k=e.value)==null?void 0:k.namespace)||defaultNamespace})),g=useLocale(computed(()=>{var k;return(k=e.value)==null?void 0:k.locale})),y=useZIndex(computed(()=>{var k;return((k=e.value)==null?void 0:k.zIndex)||defaultInitialZIndex})),i=computed(()=>{var k;return unref(r)||((k=e.value)==null?void 0:k.size)||""});return provideGlobalConfig(computed(()=>unref(e)||{})),{ns:n,locale:g,zIndex:y,size:i}}const provideGlobalConfig=(t,r,e=!1)=>{var n;const g=!!getCurrentInstance(),y=g?useGlobalConfig():void 0,i=(n=r==null?void 0:r.provide)!=null?n:g?provide:void 0;if(!i)return;const k=computed(()=>{const L=unref(t);return y!=null&&y.value?mergeConfig$1(y.value,L):L});return i(configProviderContextKey,k),i(localeContextKey,computed(()=>k.value.locale)),i(namespaceContextKey,computed(()=>k.value.namespace)),i(zIndexContextKey,computed(()=>k.value.zIndex)),i(SIZE_INJECTION_KEY,{size:computed(()=>k.value.size||"")}),(e||!globalConfig.value)&&(globalConfig.value=k.value),k},mergeConfig$1=(t,r)=>{const e=[...new Set([...keysOf(t),...keysOf(r)])],n={};for(const g of e)n[g]=r[g]!==void 0?r[g]:t[g];return n},configProviderProps=buildProps({a11y:{type:Boolean,default:!0},locale:{type:definePropType(Object)},size:useSizeProp,button:{type:definePropType(Object)},experimentalFeatures:{type:definePropType(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:definePropType(Object)},zIndex:Number,namespace:{type:String,default:"el"},...useEmptyValuesProps}),messageConfig={},ConfigProvider=defineComponent({name:"ElConfigProvider",props:configProviderProps,setup(t,{slots:r}){watch(()=>t.message,n=>{Object.assign(messageConfig,n??{})},{immediate:!0,deep:!0});const e=provideGlobalConfig(t);return()=>renderSlot(r,"default",{config:e==null?void 0:e.value})}}),ElConfigProvider=withInstall(ConfigProvider),affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:t,fixed:r})=>isNumber$1(t)&&isBoolean$1(r),[CHANGE_EVENT]:t=>isBoolean$1(t)};var _export_sfc$1=(t,r)=>{const e=t.__vccOpts||t;for(const[n,g]of r)e[n]=g;return e};const COMPONENT_NAME$b="ElAffix",__default__$Q=defineComponent({name:COMPONENT_NAME$b}),_sfc_main$1j=defineComponent({...__default__$Q,props:affixProps,emits:affixEmits,setup(t,{expose:r,emit:e}){const n=t,g=useNamespace("affix"),y=shallowRef(),i=shallowRef(),k=shallowRef(),{height:L}=useWindowSize(),{height:$,width:V,top:z,bottom:re,update:oe}=useElementBounding(i,{windowScroll:!1}),le=useElementBounding(y),ue=ref(!1),ie=ref(0),ae=ref(0),Fe=computed(()=>({height:ue.value?`${$.value}px`:"",width:ue.value?`${V.value}px`:""})),de=computed(()=>{if(!ue.value)return{};const ze=n.offset?addUnit(n.offset):0;return{height:`${$.value}px`,width:`${V.value}px`,top:n.position==="top"?ze:"",bottom:n.position==="bottom"?ze:"",transform:ae.value?`translateY(${ae.value}px)`:"",zIndex:n.zIndex}}),Ne=()=>{if(k.value)if(ie.value=k.value instanceof Window?document.documentElement.scrollTop:k.value.scrollTop||0,n.position==="top")if(n.target){const ze=le.bottom.value-n.offset-$.value;ue.value=n.offset>z.value&&le.bottom.value>0,ae.value=ze<0?ze:0}else ue.value=n.offset>z.value;else if(n.target){const ze=L.value-le.top.value-n.offset-$.value;ue.value=L.value-n.offset<re.value&&L.value>le.top.value,ae.value=ze<0?-ze:0}else ue.value=L.value-n.offset<re.value},Ve=()=>{oe(),e("scroll",{scrollTop:ie.value,fixed:ue.value})};return watch(ue,ze=>e("change",ze)),onMounted(()=>{var ze;n.target?(y.value=(ze=document.querySelector(n.target))!=null?ze:void 0,y.value||throwError(COMPONENT_NAME$b,`Target does not exist: ${n.target}`)):y.value=document.documentElement,k.value=getScrollContainer(i.value,!0),oe()}),useEventListener(k,"scroll",Ve),watchEffect(Ne),r({update:Ne,updateRoot:oe}),(ze,jt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:i,class:normalizeClass(unref(g).b()),style:normalizeStyle(unref(Fe))},[createBaseVNode("div",{class:normalizeClass({[unref(g).m("fixed")]:ue.value}),style:normalizeStyle(unref(de))},[renderSlot(ze.$slots,"default")],6)],6))}});var Affix=_export_sfc$1(_sfc_main$1j,[["__file","affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$P=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$1i=defineComponent({...__default__$P,props:iconProps,setup(t){const r=t,e=useNamespace("icon"),n=computed(()=>{const{size:g,color:y}=r;return!g&&!y?{}:{fontSize:isUndefined$1(g)?void 0:addUnit(g),"--color":y}});return(g,y)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(e).b(),style:unref(n)},g.$attrs),[renderSlot(g.$slots,"default")],16))}});var Icon=_export_sfc$1(_sfc_main$1i,[["__file","icon.vue"]]);const ElIcon=withInstall(Icon),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(t,r={})=>{const e=ref(void 0),n=r.prop?e:useProp("size"),g=r.global?e:useGlobalSize(),y=r.form?{size:void 0}:inject(formContextKey,void 0),i=r.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>n.value||unref(t)||(i==null?void 0:i.size)||(y==null?void 0:y.size)||g.value||"")},useFormDisabled=t=>{const r=useProp("disabled"),e=inject(formContextKey,void 0);return computed(()=>r.value||unref(t)||(e==null?void 0:e.disabled)||!1)},useFormItem=()=>{const t=inject(formContextKey,void 0),r=inject(formItemContextKey,void 0);return{form:t,formItem:r}},useFormItemInputId=(t,{formItemContext:r,disableIdGeneration:e,disableIdManagement:n})=>{e||(e=ref(!1)),n||(n=ref(!1));const g=ref();let y;const i=computed(()=>{var k;return!!(!(t.label||t.ariaLabel)&&r&&r.inputIds&&((k=r.inputIds)==null?void 0:k.length)<=1)});return onMounted(()=>{y=watch([toRef(t,"id"),e],([k,L])=>{const $=k??(L?void 0:useId().value);$!==g.value&&(r!=null&&r.removeInputId&&(g.value&&r.removeInputId(g.value),!(n!=null&&n.value)&&!L&&$&&r.addInputId($)),g.value=$)},{immediate:!0})}),onUnmounted(()=>{y&&y(),r!=null&&r.removeInputId&&g.value&&r.removeInputId(g.value)}),{isLabeledByFormItem:i,inputId:g}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(t,r,e)=>(isArray$3(t)||isString$2(t))&&isBoolean$1(r)&&isString$2(e)};function useFormLabelWidth(){const t=ref([]),r=computed(()=>{if(!t.value.length)return"0";const y=Math.max(...t.value);return y?`${y}px`:""});function e(y){const i=t.value.indexOf(y);return i===-1&&r.value,i}function n(y,i){if(y&&i){const k=e(i);t.value.splice(k,1,y)}else y&&t.value.push(y)}function g(y){const i=e(y);i>-1&&t.value.splice(i,1)}return{autoLabelWidth:r,registerLabelWidth:n,deregisterLabelWidth:g}}const filterFields=(t,r)=>{const e=castArray$1(r);return e.length>0?t.filter(n=>n.prop&&e.includes(n.prop)):t},COMPONENT_NAME$a="ElForm",__default__$O=defineComponent({name:COMPONENT_NAME$a}),_sfc_main$1h=defineComponent({...__default__$O,props:formProps,emits:formEmits,setup(t,{expose:r,emit:e}){const n=t,g=[],y=useFormSize(),i=useNamespace("form"),k=computed(()=>{const{labelPosition:de,inline:Ne}=n;return[i.b(),i.m(y.value||"default"),{[i.m(`label-${de}`)]:de,[i.m("inline")]:Ne}]}),L=de=>g.find(Ne=>Ne.prop===de),$=de=>{g.push(de)},V=de=>{de.prop&&g.splice(g.indexOf(de),1)},z=(de=[])=>{n.model&&filterFields(g,de).forEach(Ne=>Ne.resetField())},re=(de=[])=>{filterFields(g,de).forEach(Ne=>Ne.clearValidate())},oe=computed(()=>!!n.model),le=de=>{if(g.length===0)return[];const Ne=filterFields(g,de);return Ne.length?Ne:[]},ue=async de=>ae(void 0,de),ie=async(de=[])=>{if(!oe.value)return!1;const Ne=le(de);if(Ne.length===0)return!0;let Ve={};for(const ze of Ne)try{await ze.validate("")}catch(jt){Ve={...Ve,...jt}}return Object.keys(Ve).length===0?!0:Promise.reject(Ve)},ae=async(de=[],Ne)=>{const Ve=!isFunction$3(Ne);try{const ze=await ie(de);return ze===!0&&await(Ne==null?void 0:Ne(ze)),ze}catch(ze){if(ze instanceof Error)throw ze;const jt=ze;return n.scrollToError&&Fe(Object.keys(jt)[0]),await(Ne==null?void 0:Ne(!1,jt)),Ve&&Promise.reject(jt)}},Fe=de=>{var Ne;const Ve=filterFields(g,de)[0];Ve&&((Ne=Ve.$el)==null||Ne.scrollIntoView(n.scrollIntoViewOptions))};return watch(()=>n.rules,()=>{n.validateOnRuleChange&&ue().catch(de=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(n),emit:e,resetFields:z,clearValidate:re,validateField:ae,getField:L,addField:$,removeField:V,...useFormLabelWidth()})),r({validate:ue,validateField:ae,resetFields:z,clearValidate:re,scrollToField:Fe,fields:g}),(de,Ne)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(k))},[renderSlot(de.$slots,"default")],2))}});var Form=_export_sfc$1(_sfc_main$1h,[["__file","form.vue"]]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_extends.apply(this,arguments)}function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,g){return n.__proto__=g,n},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(t,r,e){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(g,y,i){var k=[null];k.push.apply(k,y);var L=Function.bind.apply(g,k),$=new L;return i&&_setPrototypeOf($,i.prototype),$},_construct.apply(null,arguments)}function _isNativeFunction(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper(t){var r=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,g)}function g(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return g.prototype=Object.create(n.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(g,n)},_wrapNativeSuper(t)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u"&&process.env;function convertFieldsError(t){if(!t||!t.length)return null;var r={};return t.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function format(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var g=0,y=e.length;if(typeof t=="function")return t.apply(null,e);if(typeof t=="string"){var i=t.replace(formatRegExp,function(k){if(k==="%%")return"%";if(g>=y)return k;switch(k){case"%s":return String(e[g++]);case"%d":return Number(e[g++]);case"%j":try{return JSON.stringify(e[g++])}catch{return"[Circular]"}break;default:return k}});return i}return t}function isNativeStringType(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function isEmptyValue(t,r){return!!(t==null||r==="array"&&Array.isArray(t)&&!t.length||isNativeStringType(r)&&typeof t=="string"&&!t)}function asyncParallelArray(t,r,e){var n=[],g=0,y=t.length;function i(k){n.push.apply(n,k||[]),g++,g===y&&e(n)}t.forEach(function(k){r(k,i)})}function asyncSerialArray(t,r,e){var n=0,g=t.length;function y(i){if(i&&i.length){e(i);return}var k=n;n=n+1,k<g?r(t[k],y):e([])}y([])}function flattenObjArr(t){var r=[];return Object.keys(t).forEach(function(e){r.push.apply(r,t[e]||[])}),r}var AsyncValidationError=function(t){_inheritsLoose(r,t);function r(e,n){var g;return g=t.call(this,"Async Validation Error")||this,g.errors=e,g.fields=n,g}return r}(_wrapNativeSuper(Error));function asyncMap(t,r,e,n,g){if(r.first){var y=new Promise(function(re,oe){var le=function(ae){return n(ae),ae.length?oe(new AsyncValidationError(ae,convertFieldsError(ae))):re(g)},ue=flattenObjArr(t);asyncSerialArray(ue,e,le)});return y.catch(function(re){return re}),y}var i=r.firstFields===!0?Object.keys(t):r.firstFields||[],k=Object.keys(t),L=k.length,$=0,V=[],z=new Promise(function(re,oe){var le=function(ie){if(V.push.apply(V,ie),$++,$===L)return n(V),V.length?oe(new AsyncValidationError(V,convertFieldsError(V))):re(g)};k.length||(n(V),re(g)),k.forEach(function(ue){var ie=t[ue];i.indexOf(ue)!==-1?asyncSerialArray(ie,e,le):asyncParallelArray(ie,e,le)})});return z.catch(function(re){return re}),z}function isErrorObj(t){return!!(t&&t.message!==void 0)}function getValue(t,r){for(var e=t,n=0;n<r.length;n++){if(e==null)return e;e=e[r[n]]}return e}function complementError(t,r){return function(e){var n;return t.fullFields?n=getValue(r,t.fullFields):n=r[e.field||t.fullField],isErrorObj(e)?(e.field=e.field||t.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||t.fullField}}}function deepMerge(t,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];typeof n=="object"&&typeof t[e]=="object"?t[e]=_extends({},t[e],n):t[e]=n}}return t}var required$1=function(r,e,n,g,y,i){r.required&&(!n.hasOwnProperty(r.field)||isEmptyValue(e,i||r.type))&&g.push(format(y.messages.required,r.fullField))},whitespace=function(r,e,n,g,y){(/^\s+$/.test(e)||e==="")&&g.push(format(y.messages.whitespace,r.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var t="[a-fA-F\\d:]",r=function(Ne){return Ne&&Ne.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",g=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+e+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+e+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+e+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+e+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+e+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+e+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+e+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),y=new RegExp("(?:^"+e+"$)|(?:^"+g+"$)"),i=new RegExp("^"+e+"$"),k=new RegExp("^"+g+"$"),L=function(Ne){return Ne&&Ne.exact?y:new RegExp("(?:"+r(Ne)+e+r(Ne)+")|(?:"+r(Ne)+g+r(Ne)+")","g")};L.v4=function(de){return de&&de.exact?i:new RegExp(""+r(de)+e+r(de),"g")},L.v6=function(de){return de&&de.exact?k:new RegExp(""+r(de)+g+r(de),"g")};var $="(?:(?:[a-z]+:)?//)",V="(?:\\S+(?::\\S*)?@)?",z=L.v4().source,re=L.v6().source,oe="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",le="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",ue="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",ie="(?::\\d{2,5})?",ae='(?:[/?#][^\\s"]*)?',Fe="(?:"+$+"|www\\.)"+V+"(?:localhost|"+z+"|"+re+"|"+oe+le+ue+")"+ie+ae;return urlReg=new RegExp("(?:^"+Fe+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(r){return types.number(r)&&parseInt(r,10)===r},float:function(r){return types.number(r)&&!types.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!types.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(pattern$2.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(getUrlRegex())},hex:function(r){return typeof r=="string"&&!!r.match(pattern$2.hex)}},type$1=function(r,e,n,g,y){if(r.required&&e===void 0){required$1(r,e,n,g,y);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],k=r.type;i.indexOf(k)>-1?types[k](e)||g.push(format(y.messages.types[k],r.fullField,r.type)):k&&typeof e!==r.type&&g.push(format(y.messages.types[k],r.fullField,r.type))},range$1=function(r,e,n,g,y){var i=typeof r.len=="number",k=typeof r.min=="number",L=typeof r.max=="number",$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V=e,z=null,re=typeof e=="number",oe=typeof e=="string",le=Array.isArray(e);if(re?z="number":oe?z="string":le&&(z="array"),!z)return!1;le&&(V=e.length),oe&&(V=e.replace($,"_").length),i?V!==r.len&&g.push(format(y.messages[z].len,r.fullField,r.len)):k&&!L&&V<r.min?g.push(format(y.messages[z].min,r.fullField,r.min)):L&&!k&&V>r.max?g.push(format(y.messages[z].max,r.fullField,r.max)):k&&L&&(V<r.min||V>r.max)&&g.push(format(y.messages[z].range,r.fullField,r.min,r.max))},ENUM$1="enum",enumerable$1=function(r,e,n,g,y){r[ENUM$1]=Array.isArray(r[ENUM$1])?r[ENUM$1]:[],r[ENUM$1].indexOf(e)===-1&&g.push(format(y.messages[ENUM$1],r.fullField,r[ENUM$1].join(", ")))},pattern$1=function(r,e,n,g,y){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||g.push(format(y.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var i=new RegExp(r.pattern);i.test(e)||g.push(format(y.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,g,i,y,"string"),isEmptyValue(e,"string")||(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y),rules.pattern(r,e,g,i,y),r.whitespace===!0&&rules.whitespace(r,e,g,i,y))}n(i)},method=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},number=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(e===""&&(e=void 0),isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},_boolean=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},regexp=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),isEmptyValue(e)||rules.type(r,e,g,i,y)}n(i)},integer=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},floatFn=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},array=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(e==null&&!r.required)return n();rules.required(r,e,g,i,y,"array"),e!=null&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},object=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},ENUM="enum",enumerable=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules[ENUM](r,e,g,i,y)}n(i)},pattern=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,g,i,y),isEmptyValue(e,"string")||rules.pattern(r,e,g,i,y)}n(i)},date=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"date")&&!r.required)return n();if(rules.required(r,e,g,i,y),!isEmptyValue(e,"date")){var L;e instanceof Date?L=e:L=new Date(e),rules.type(r,L,g,i,y),L&&rules.range(r,L.getTime(),g,i,y)}}n(i)},required=function(r,e,n,g,y){var i=[],k=Array.isArray(e)?"array":typeof e;rules.required(r,e,g,i,y,k),n(i)},type=function(r,e,n,g,y){var i=r.type,k=[],L=r.required||!r.required&&g.hasOwnProperty(r.field);if(L){if(isEmptyValue(e,i)&&!r.required)return n();rules.required(r,e,g,k,y,i),isEmptyValue(e,i)||rules.type(r,e,g,k,y)}n(k)},any=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y)}n(i)},validators$2={string,method,number,boolean:_boolean,regexp,integer,float:floatFn,array,object,enum:enumerable,pattern,date,url:type,hex:type,email:type,required,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var messages=newMessages(),Schema=function(){function t(e){this.rules=null,this._messages=messages,this.define(e)}var r=t.prototype;return r.define=function(n){var g=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(y){var i=n[y];g.rules[y]=Array.isArray(i)?i:[i]})},r.messages=function(n){return n&&(this._messages=deepMerge(newMessages(),n)),this._messages},r.validate=function(n,g,y){var i=this;g===void 0&&(g={}),y===void 0&&(y=function(){});var k=n,L=g,$=y;if(typeof L=="function"&&($=L,L={}),!this.rules||Object.keys(this.rules).length===0)return $&&$(null,k),Promise.resolve(k);function V(ue){var ie=[],ae={};function Fe(Ne){if(Array.isArray(Ne)){var Ve;ie=(Ve=ie).concat.apply(Ve,Ne)}else ie.push(Ne)}for(var de=0;de<ue.length;de++)Fe(ue[de]);ie.length?(ae=convertFieldsError(ie),$(ie,ae)):$(null,k)}if(L.messages){var z=this.messages();z===messages&&(z=newMessages()),deepMerge(z,L.messages),L.messages=z}else L.messages=this.messages();var re={},oe=L.keys||Object.keys(this.rules);oe.forEach(function(ue){var ie=i.rules[ue],ae=k[ue];ie.forEach(function(Fe){var de=Fe;typeof de.transform=="function"&&(k===n&&(k=_extends({},k)),ae=k[ue]=de.transform(ae)),typeof de=="function"?de={validator:de}:de=_extends({},de),de.validator=i.getValidationMethod(de),de.validator&&(de.field=ue,de.fullField=de.fullField||ue,de.type=i.getType(de),re[ue]=re[ue]||[],re[ue].push({rule:de,value:ae,source:k,field:ue}))})});var le={};return asyncMap(re,L,function(ue,ie){var ae=ue.rule,Fe=(ae.type==="object"||ae.type==="array")&&(typeof ae.fields=="object"||typeof ae.defaultField=="object");Fe=Fe&&(ae.required||!ae.required&&ue.value),ae.field=ue.field;function de(ze,jt){return _extends({},jt,{fullField:ae.fullField+"."+ze,fullFields:ae.fullFields?[].concat(ae.fullFields,[ze]):[ze]})}function Ne(ze){ze===void 0&&(ze=[]);var jt=Array.isArray(ze)?ze:[ze];!L.suppressWarning&&jt.length&&t.warning("async-validator:",jt),jt.length&&ae.message!==void 0&&(jt=[].concat(ae.message));var kt=jt.map(complementError(ae,k));if(L.first&&kt.length)return le[ae.field]=1,ie(kt);if(!Fe)ie(kt);else{if(ae.required&&!ue.value)return ae.message!==void 0?kt=[].concat(ae.message).map(complementError(ae,k)):L.error&&(kt=[L.error(ae,format(L.messages.required,ae.field))]),ie(kt);var Et={};ae.defaultField&&Object.keys(ue.value).map(function(or){Et[or]=ae.defaultField}),Et=_extends({},Et,ue.rule.fields);var lr={};Object.keys(Et).forEach(function(or){var dr=Et[or],cr=Array.isArray(dr)?dr:[dr];lr[or]=cr.map(de.bind(null,or))});var tr=new t(lr);tr.messages(L.messages),ue.rule.options&&(ue.rule.options.messages=L.messages,ue.rule.options.error=L.error),tr.validate(ue.value,ue.rule.options||L,function(or){var dr=[];kt&&kt.length&&dr.push.apply(dr,kt),or&&or.length&&dr.push.apply(dr,or),ie(dr.length?dr:null)})}}var Ve;if(ae.asyncValidator)Ve=ae.asyncValidator(ae,ue.value,Ne,ue.source,L);else if(ae.validator){try{Ve=ae.validator(ae,ue.value,Ne,ue.source,L)}catch(ze){console.error==null||console.error(ze),L.suppressValidatorError||setTimeout(function(){throw ze},0),Ne(ze.message)}Ve===!0?Ne():Ve===!1?Ne(typeof ae.message=="function"?ae.message(ae.fullField||ae.field):ae.message||(ae.fullField||ae.field)+" fails"):Ve instanceof Array?Ne(Ve):Ve instanceof Error&&Ne(Ve.message)}Ve&&Ve.then&&Ve.then(function(){return Ne()},function(ze){return Ne(ze)})},function(ue){V(ue)},k)},r.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!validators$2.hasOwnProperty(n.type))throw new Error(format("Unknown rule type %s",n.type));return n.type||"string"},r.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var g=Object.keys(n),y=g.indexOf("message");return y!==-1&&g.splice(y,1),g.length===1&&g[0]==="required"?validators$2.required:validators$2[this.getType(n)]||void 0},t}();Schema.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$2[r]=e};Schema.warning=warning;Schema.messages=messages;Schema.validators=validators$2;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$9="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$9,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:r}){const e=inject(formContextKey,void 0),n=inject(formItemContextKey);n||throwError(COMPONENT_NAME$9,"usage: <el-form-item><label-wrap /></el-form-item>");const g=useNamespace("form"),y=ref(),i=ref(0),k=()=>{var V;if((V=y.value)!=null&&V.firstElementChild){const z=window.getComputedStyle(y.value.firstElementChild).width;return Math.ceil(Number.parseFloat(z))}else return 0},L=(V="update")=>{nextTick(()=>{r.default&&t.isAutoWidth&&(V==="update"?i.value=k():V==="remove"&&(e==null||e.deregisterLabelWidth(i.value)))})},$=()=>L("update");return onMounted(()=>{$()}),onBeforeUnmount(()=>{L("remove")}),onUpdated(()=>$()),watch(i,(V,z)=>{t.updateAll&&(e==null||e.registerLabelWidth(V,z))}),useResizeObserver(computed(()=>{var V,z;return(z=(V=y.value)==null?void 0:V.firstElementChild)!=null?z:null}),$),()=>{var V,z;if(!r)return null;const{isAutoWidth:re}=t;if(re){const oe=e==null?void 0:e.autoLabelWidth,le=n==null?void 0:n.hasLabel,ue={};if(le&&oe&&oe!=="auto"){const ie=Math.max(0,Number.parseInt(oe,10)-i.value),ae=e.labelPosition==="left"?"marginRight":"marginLeft";ie&&(ue[ae]=`${ie}px`)}return createVNode("div",{ref:y,class:[g.be("item","label-wrap")],style:ue},[(V=r.default)==null?void 0:V.call(r)])}else return createVNode(Fragment,{ref:y},[(z=r.default)==null?void 0:z.call(r)])}}});const _hoisted_1$G=["role","aria-labelledby"],__default__$N=defineComponent({name:"ElFormItem"}),_sfc_main$1g=defineComponent({...__default__$N,props:formItemProps,setup(t,{expose:r}){const e=t,n=useSlots(),g=inject(formContextKey,void 0),y=inject(formItemContextKey,void 0),i=useFormSize(void 0,{formItem:!1}),k=useNamespace("form-item"),L=useId().value,$=ref([]),V=ref(""),z=refDebounced(V,100),re=ref(""),oe=ref();let le,ue=!1;const ie=computed(()=>{if((g==null?void 0:g.labelPosition)==="top")return{};const Pr=addUnit(e.labelWidth||(g==null?void 0:g.labelWidth)||"");return Pr?{width:Pr}:{}}),ae=computed(()=>{if((g==null?void 0:g.labelPosition)==="top"||g!=null&&g.inline)return{};if(!e.label&&!e.labelWidth&&Et)return{};const Pr=addUnit(e.labelWidth||(g==null?void 0:g.labelWidth)||"");return!e.label&&!n.label?{marginLeft:Pr}:{}}),Fe=computed(()=>[k.b(),k.m(i.value),k.is("error",V.value==="error"),k.is("validating",V.value==="validating"),k.is("success",V.value==="success"),k.is("required",cr.value||e.required),k.is("no-asterisk",g==null?void 0:g.hideRequiredAsterisk),(g==null?void 0:g.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[k.m("feedback")]:g==null?void 0:g.statusIcon}]),de=computed(()=>isBoolean$1(e.inlineMessage)?e.inlineMessage:(g==null?void 0:g.inlineMessage)||!1),Ne=computed(()=>[k.e("error"),{[k.em("error","inline")]:de.value}]),Ve=computed(()=>e.prop?isString$2(e.prop)?e.prop:e.prop.join("."):""),ze=computed(()=>!!(e.label||n.label)),jt=computed(()=>e.for||($.value.length===1?$.value[0]:void 0)),kt=computed(()=>!jt.value&&ze.value),Et=!!y,lr=computed(()=>{const Pr=g==null?void 0:g.model;if(!(!Pr||!e.prop))return getProp(Pr,e.prop).value}),tr=computed(()=>{const{required:Pr}=e,sr=[];e.rules&&sr.push(...castArray$1(e.rules));const Ir=g==null?void 0:g.rules;if(Ir&&e.prop){const Ar=getProp(Ir,e.prop).value;Ar&&sr.push(...castArray$1(Ar))}if(Pr!==void 0){const Ar=sr.map((Cr,br)=>[Cr,br]).filter(([Cr])=>Object.keys(Cr).includes("required"));if(Ar.length>0)for(const[Cr,br]of Ar)Cr.required!==Pr&&(sr[br]={...Cr,required:Pr});else sr.push({required:Pr})}return sr}),or=computed(()=>tr.value.length>0),dr=Pr=>tr.value.filter(Ir=>!Ir.trigger||!Pr?!0:Array.isArray(Ir.trigger)?Ir.trigger.includes(Pr):Ir.trigger===Pr).map(({trigger:Ir,...Ar})=>Ar),cr=computed(()=>tr.value.some(Pr=>Pr.required)),nr=computed(()=>{var Pr;return z.value==="error"&&e.showMessage&&((Pr=g==null?void 0:g.showMessage)!=null?Pr:!0)}),ur=computed(()=>`${e.label||""}${(g==null?void 0:g.labelSuffix)||""}`),ar=Pr=>{V.value=Pr},gr=Pr=>{var sr,Ir;const{errors:Ar,fields:Cr}=Pr;(!Ar||!Cr)&&console.error(Pr),ar("error"),re.value=Ar?(Ir=(sr=Ar==null?void 0:Ar[0])==null?void 0:sr.message)!=null?Ir:`${e.prop} is required`:"",g==null||g.emit("validate",e.prop,!1,re.value)},pr=()=>{ar("success"),g==null||g.emit("validate",e.prop,!0,"")},yr=async Pr=>{const sr=Ve.value;return new Schema({[sr]:Pr}).validate({[sr]:lr.value},{firstFields:!0}).then(()=>(pr(),!0)).catch(Ar=>(gr(Ar),Promise.reject(Ar)))},Sr=async(Pr,sr)=>{if(ue||!e.prop)return!1;const Ir=isFunction$3(sr);if(!or.value)return sr==null||sr(!1),!1;const Ar=dr(Pr);return Ar.length===0?(sr==null||sr(!0),!0):(ar("validating"),yr(Ar).then(()=>(sr==null||sr(!0),!0)).catch(Cr=>{const{fields:br}=Cr;return sr==null||sr(!1,br),Ir?!1:Promise.reject(br)}))},wr=()=>{ar(""),re.value="",ue=!1},Mr=async()=>{const Pr=g==null?void 0:g.model;if(!Pr||!e.prop)return;const sr=getProp(Pr,e.prop);ue=!0,sr.value=clone(le),await nextTick(),wr(),ue=!1},mr=Pr=>{$.value.includes(Pr)||$.value.push(Pr)},_r=Pr=>{$.value=$.value.filter(sr=>sr!==Pr)};watch(()=>e.error,Pr=>{re.value=Pr||"",ar(Pr?"error":"")},{immediate:!0}),watch(()=>e.validateStatus,Pr=>ar(Pr||""));const Nr=reactive({...toRefs(e),$el:oe,size:i,validateState:V,labelId:L,inputIds:$,isGroup:kt,hasLabel:ze,fieldValue:lr,addInputId:mr,removeInputId:_r,resetField:Mr,clearValidate:wr,validate:Sr});return provide(formItemContextKey,Nr),onMounted(()=>{e.prop&&(g==null||g.addField(Nr),le=clone(lr.value))}),onBeforeUnmount(()=>{g==null||g.removeField(Nr)}),r({size:i,validateMessage:re,validateState:V,validate:Sr,clearValidate:wr,resetField:Mr}),(Pr,sr)=>{var Ir;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:oe,class:normalizeClass(unref(Fe)),role:unref(kt)?"group":void 0,"aria-labelledby":unref(kt)?unref(L):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(ie).width==="auto","update-all":((Ir=unref(g))==null?void 0:Ir.labelWidth)==="auto"},{default:withCtx(()=>[unref(ze)?(openBlock(),createBlock(resolveDynamicComponent(unref(jt)?"label":"div"),{key:0,id:unref(L),for:unref(jt),class:normalizeClass(unref(k).e("label")),style:normalizeStyle(unref(ie))},{default:withCtx(()=>[renderSlot(Pr.$slots,"label",{label:unref(ur)},()=>[createTextVNode(toDisplayString(unref(ur)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(k).e("content")),style:normalizeStyle(unref(ae))},[renderSlot(Pr.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(k).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(nr)?renderSlot(Pr.$slots,"error",{key:0,error:re.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(Ne))},toDisplayString(re.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$G)}}});var FormItem=_export_sfc$1(_sfc_main$1g,[["__file","form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(t){const r=window.getComputedStyle(t),e=r.getPropertyValue("box-sizing"),n=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),g=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map(i=>`${i}:${r.getPropertyValue(i)}`).join(";"),paddingSize:n,borderSize:g,boxSizing:e}}function calcTextareaHeight(t,r=1,e){var n;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:g,borderSize:y,boxSizing:i,contextStyle:k}=calculateNodeStyling(t);hiddenTextarea.setAttribute("style",`${k};${HIDDEN_STYLE}`),hiddenTextarea.value=t.value||t.placeholder||"";let L=hiddenTextarea.scrollHeight;const $={};i==="border-box"?L=L+y:i==="content-box"&&(L=L-g),hiddenTextarea.value="";const V=hiddenTextarea.scrollHeight-g;if(isNumber$1(r)){let z=V*r;i==="border-box"&&(z=z+g+y),L=Math.max(z,L),$.minHeight=`${z}px`}if(isNumber$1(e)){let z=V*e;i==="border-box"&&(z=z+g+y),L=Math.min(z,L)}return $.height=`${L}px`,(n=hiddenTextarea.parentNode)==null||n.removeChild(hiddenTextarea),hiddenTextarea=void 0,$}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})},autofocus:{type:Boolean,default:!1},...useAriaProps(["ariaLabel"])}),inputEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t),input:t=>isString$2(t),change:t=>isString$2(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},_hoisted_1$F=["role"],_hoisted_2$p=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],_hoisted_3$d=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],__default__$M=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$1f=defineComponent({...__default__$M,props:inputProps,emits:inputEmits,setup(t,{expose:r,emit:e}){const n=t,g=useAttrs$1(),y=useSlots(),i=computed(()=>{const Zr={};return n.containerRole==="combobox"&&(Zr["aria-haspopup"]=g["aria-haspopup"],Zr["aria-owns"]=g["aria-owns"],Zr["aria-expanded"]=g["aria-expanded"]),Zr}),k=computed(()=>[n.type==="textarea"?ie.b():ue.b(),ue.m(oe.value),ue.is("disabled",le.value),ue.is("exceed",mr.value),{[ue.b("group")]:y.prepend||y.append,[ue.bm("group","append")]:y.append,[ue.bm("group","prepend")]:y.prepend,[ue.m("prefix")]:y.prefix||n.prefixIcon,[ue.m("suffix")]:y.suffix||n.suffixIcon||n.clearable||n.showPassword,[ue.bm("suffix","password-clear")]:yr.value&&Sr.value,[ue.b("hidden")]:n.type==="hidden"},g.class]),L=computed(()=>[ue.e("wrapper"),ue.is("focus",lr.value)]),$=useAttrs({excludeKeys:computed(()=>Object.keys(i.value))}),{form:V,formItem:z}=useFormItem(),{inputId:re}=useFormItemInputId(n,{formItemContext:z}),oe=useFormSize(),le=useFormDisabled(),ue=useNamespace("input"),ie=useNamespace("textarea"),ae=shallowRef(),Fe=shallowRef(),de=ref(!1),Ne=ref(!1),Ve=ref(!1),ze=ref(),jt=shallowRef(n.inputStyle),kt=computed(()=>ae.value||Fe.value),{wrapperRef:Et,isFocused:lr,handleFocus:tr,handleBlur:or}=useFocusController(kt,{afterBlur(){var Zr;n.validateEvent&&((Zr=z==null?void 0:z.validate)==null||Zr.call(z,"blur").catch(En=>void 0))}}),dr=computed(()=>{var Zr;return(Zr=V==null?void 0:V.statusIcon)!=null?Zr:!1}),cr=computed(()=>(z==null?void 0:z.validateState)||""),nr=computed(()=>cr.value&&ValidateComponentsMap[cr.value]),ur=computed(()=>Ve.value?view_default:hide_default),ar=computed(()=>[g.style]),gr=computed(()=>[n.inputStyle,jt.value,{resize:n.resize}]),pr=computed(()=>isNil(n.modelValue)?"":String(n.modelValue)),yr=computed(()=>n.clearable&&!le.value&&!n.readonly&&!!pr.value&&(lr.value||de.value)),Sr=computed(()=>n.showPassword&&!le.value&&!n.readonly&&!!pr.value&&(!!pr.value||lr.value)),wr=computed(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!le.value&&!n.readonly&&!n.showPassword),Mr=computed(()=>pr.value.length),mr=computed(()=>!!wr.value&&Mr.value>Number(n.maxlength)),_r=computed(()=>!!y.suffix||!!n.suffixIcon||yr.value||n.showPassword||wr.value||!!cr.value&&dr.value),[Nr,Pr]=useCursor(ae);useResizeObserver(Fe,Zr=>{if(Ar(),!wr.value||n.resize!=="both")return;const En=Zr[0],{width:Jr}=En.contentRect;ze.value={right:`calc(100% - ${Jr+15+6}px)`}});const sr=()=>{const{type:Zr,autosize:En}=n;if(!(!isClient||Zr!=="textarea"||!Fe.value))if(En){const Jr=isObject$2(En)?En.minRows:void 0,kn=isObject$2(En)?En.maxRows:void 0,Un=calcTextareaHeight(Fe.value,Jr,kn);jt.value={overflowY:"hidden",...Un},nextTick(()=>{Fe.value.offsetHeight,jt.value=Un})}else jt.value={minHeight:calcTextareaHeight(Fe.value).minHeight}},Ar=(Zr=>{let En=!1;return()=>{var Jr;if(En||!n.autosize)return;((Jr=Fe.value)==null?void 0:Jr.offsetParent)===null||(Zr(),En=!0)}})(sr),Cr=()=>{const Zr=kt.value,En=n.formatter?n.formatter(pr.value):pr.value;!Zr||Zr.value===En||(Zr.value=En)},br=async Zr=>{Nr();let{value:En}=Zr.target;if(n.formatter&&(En=n.parser?n.parser(En):En),!Ne.value){if(En===pr.value){Cr();return}e(UPDATE_MODEL_EVENT,En),e("input",En),await nextTick(),Cr(),Pr()}},vr=Zr=>{e("change",Zr.target.value)},Tr=Zr=>{e("compositionstart",Zr),Ne.value=!0},Br=Zr=>{var En;e("compositionupdate",Zr);const Jr=(En=Zr.target)==null?void 0:En.value,kn=Jr[Jr.length-1]||"";Ne.value=!isKorean(kn)},Lr=Zr=>{e("compositionend",Zr),Ne.value&&(Ne.value=!1,br(Zr))},Fr=()=>{Ve.value=!Ve.value,qr()},qr=async()=>{var Zr;await nextTick(),(Zr=kt.value)==null||Zr.focus()},Vr=()=>{var Zr;return(Zr=kt.value)==null?void 0:Zr.blur()},Qr=Zr=>{de.value=!1,e("mouseleave",Zr)},Sn=Zr=>{de.value=!0,e("mouseenter",Zr)},Mn=Zr=>{e("keydown",Zr)},Xr=()=>{var Zr;(Zr=kt.value)==null||Zr.select()},Wn=()=>{e(UPDATE_MODEL_EVENT,""),e("change",""),e("clear"),e("input","")};return watch(()=>n.modelValue,()=>{var Zr;nextTick(()=>sr()),n.validateEvent&&((Zr=z==null?void 0:z.validate)==null||Zr.call(z,"change").catch(En=>void 0))}),watch(pr,()=>Cr()),watch(()=>n.type,async()=>{await nextTick(),Cr(),sr()}),onMounted(()=>{!n.formatter&&n.parser,Cr(),nextTick(sr)}),useDeprecated({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input",ref:"https://element-plus.org/en-US/component/input.html"},computed(()=>!!n.label)),r({input:ae,textarea:Fe,ref:kt,textareaStyle:gr,autosize:toRef(n,"autosize"),focus:qr,blur:Vr,select:Xr,clear:Wn,resizeTextarea:sr}),(Zr,En)=>(openBlock(),createElementBlock("div",mergeProps(unref(i),{class:unref(k),style:unref(ar),role:Zr.containerRole,onMouseenter:Sn,onMouseleave:Qr}),[createCommentVNode(" input "),Zr.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),Zr.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).be("group","prepend"))},[renderSlot(Zr.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:Et,class:normalizeClass(unref(L))},[createCommentVNode(" prefix slot "),Zr.$slots.prefix||Zr.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(ue).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(ue).e("prefix-inner"))},[renderSlot(Zr.$slots,"prefix"),Zr.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ue).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Zr.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(re),ref_key:"input",ref:ae,class:unref(ue).e("inner")},unref($),{minlength:Zr.minlength,maxlength:Zr.maxlength,type:Zr.showPassword?Ve.value?"text":"password":Zr.type,disabled:unref(le),readonly:Zr.readonly,autocomplete:Zr.autocomplete,tabindex:Zr.tabindex,"aria-label":Zr.label||Zr.ariaLabel,placeholder:Zr.placeholder,style:Zr.inputStyle,form:Zr.form,autofocus:Zr.autofocus,onCompositionstart:Tr,onCompositionupdate:Br,onCompositionend:Lr,onInput:br,onFocus:En[0]||(En[0]=(...Jr)=>unref(tr)&&unref(tr)(...Jr)),onBlur:En[1]||(En[1]=(...Jr)=>unref(or)&&unref(or)(...Jr)),onChange:vr,onKeydown:Mn}),null,16,_hoisted_2$p),createCommentVNode(" suffix slot "),unref(_r)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(ue).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(ue).e("suffix-inner"))},[!unref(yr)||!unref(Sr)||!unref(wr)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(Zr.$slots,"suffix"),Zr.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ue).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Zr.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(yr)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(ue).e("icon"),unref(ue).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:Wn},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(Sr)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(ue).e("icon"),unref(ue).e("password")]),onClick:Fr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ur))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(wr)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(ue).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(ue).e("count-inner"))},toDisplayString(unref(Mr))+" / "+toDisplayString(Zr.maxlength),3)],2)):createCommentVNode("v-if",!0),unref(cr)&&unref(nr)&&unref(dr)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(ue).e("icon"),unref(ue).e("validateIcon"),unref(ue).is("loading",unref(cr)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(nr))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),Zr.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(ue).be("group","append"))},[renderSlot(Zr.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(re),ref_key:"textarea",ref:Fe,class:unref(ie).e("inner")},unref($),{minlength:Zr.minlength,maxlength:Zr.maxlength,tabindex:Zr.tabindex,disabled:unref(le),readonly:Zr.readonly,autocomplete:Zr.autocomplete,style:unref(gr),"aria-label":Zr.label||Zr.ariaLabel,placeholder:Zr.placeholder,form:Zr.form,autofocus:Zr.autofocus,onCompositionstart:Tr,onCompositionupdate:Br,onCompositionend:Lr,onInput:br,onFocus:En[2]||(En[2]=(...Jr)=>unref(tr)&&unref(tr)(...Jr)),onBlur:En[3]||(En[3]=(...Jr)=>unref(or)&&unref(or)(...Jr)),onChange:vr,onKeydown:Mn}),null,16,_hoisted_3$d),unref(wr)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(ze.value),class:normalizeClass(unref(ue).e("count"))},toDisplayString(unref(Mr))+" / "+toDisplayString(Zr.maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$F))}});var Input=_export_sfc$1(_sfc_main$1f,[["__file","input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle=({move:t,size:r,bar:e})=>({[e.size]:r,transform:`translate${e.axis}(${t}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$8="Thumb",_sfc_main$1e=defineComponent({__name:"thumb",props:thumbProps,setup(t){const r=t,e=inject(scrollbarContextKey),n=useNamespace("scrollbar");e||throwError(COMPONENT_NAME$8,"can not inject scrollbar context");const g=ref(),y=ref(),i=ref({}),k=ref(!1);let L=!1,$=!1,V=isClient?document.onselectstart:null;const z=computed(()=>BAR_MAP[r.vertical?"vertical":"horizontal"]),re=computed(()=>renderThumbStyle({size:r.size,move:r.move,bar:z.value})),oe=computed(()=>g.value[z.value.offset]**2/e.wrapElement[z.value.scrollSize]/r.ratio/y.value[z.value.offset]),le=ze=>{var jt;if(ze.stopPropagation(),ze.ctrlKey||[1,2].includes(ze.button))return;(jt=window.getSelection())==null||jt.removeAllRanges(),ie(ze);const kt=ze.currentTarget;kt&&(i.value[z.value.axis]=kt[z.value.offset]-(ze[z.value.client]-kt.getBoundingClientRect()[z.value.direction]))},ue=ze=>{if(!y.value||!g.value||!e.wrapElement)return;const jt=Math.abs(ze.target.getBoundingClientRect()[z.value.direction]-ze[z.value.client]),kt=y.value[z.value.offset]/2,Et=(jt-kt)*100*oe.value/g.value[z.value.offset];e.wrapElement[z.value.scroll]=Et*e.wrapElement[z.value.scrollSize]/100},ie=ze=>{ze.stopImmediatePropagation(),L=!0,document.addEventListener("mousemove",ae),document.addEventListener("mouseup",Fe),V=document.onselectstart,document.onselectstart=()=>!1},ae=ze=>{if(!g.value||!y.value||L===!1)return;const jt=i.value[z.value.axis];if(!jt)return;const kt=(g.value.getBoundingClientRect()[z.value.direction]-ze[z.value.client])*-1,Et=y.value[z.value.offset]-jt,lr=(kt-Et)*100*oe.value/g.value[z.value.offset];e.wrapElement[z.value.scroll]=lr*e.wrapElement[z.value.scrollSize]/100},Fe=()=>{L=!1,i.value[z.value.axis]=0,document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",Fe),Ve(),$&&(k.value=!1)},de=()=>{$=!1,k.value=!!r.size},Ne=()=>{$=!0,k.value=L};onBeforeUnmount(()=>{Ve(),document.removeEventListener("mouseup",Fe)});const Ve=()=>{document.onselectstart!==V&&(document.onselectstart=V)};return useEventListener(toRef(e,"scrollbarElement"),"mousemove",de),useEventListener(toRef(e,"scrollbarElement"),"mouseleave",Ne),(ze,jt)=>(openBlock(),createBlock(Transition,{name:unref(n).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:g,class:normalizeClass([unref(n).e("bar"),unref(n).is(unref(z).key)]),onMousedown:ue},[createBaseVNode("div",{ref_key:"thumb",ref:y,class:normalizeClass(unref(n).e("thumb")),style:normalizeStyle(unref(re)),onMousedown:le},null,38)],34),[[vShow,ze.always||k.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc$1(_sfc_main$1e,[["__file","thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),_sfc_main$1d=defineComponent({__name:"bar",props:barProps,setup(t,{expose:r}){const e=t,n=inject(scrollbarContextKey),g=ref(0),y=ref(0),i=ref(""),k=ref(""),L=ref(1),$=ref(1);return r({handleScroll:re=>{if(re){const oe=re.offsetHeight-GAP,le=re.offsetWidth-GAP;y.value=re.scrollTop*100/oe*L.value,g.value=re.scrollLeft*100/le*$.value}},update:()=>{const re=n==null?void 0:n.wrapElement;if(!re)return;const oe=re.offsetHeight-GAP,le=re.offsetWidth-GAP,ue=oe**2/re.scrollHeight,ie=le**2/re.scrollWidth,ae=Math.max(ue,e.minSize),Fe=Math.max(ie,e.minSize);L.value=ue/(oe-ue)/(ae/(oe-ae)),$.value=ie/(le-ie)/(Fe/(le-Fe)),k.value=ae+GAP<oe?`${ae}px`:"",i.value=Fe+GAP<le?`${Fe}px`:""}}),(re,oe)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:g.value,ratio:$.value,size:i.value,always:re.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:y.value,ratio:L.value,size:k.value,vertical:"",always:re.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc$1(_sfc_main$1d,[["__file","bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...useAriaProps(["ariaLabel","ariaOrientation"])}),scrollbarEmits={scroll:({scrollTop:t,scrollLeft:r})=>[t,r].every(isNumber$1)},COMPONENT_NAME$7="ElScrollbar",__default__$L=defineComponent({name:COMPONENT_NAME$7}),_sfc_main$1c=defineComponent({...__default__$L,props:scrollbarProps,emits:scrollbarEmits,setup(t,{expose:r,emit:e}){const n=t,g=useNamespace("scrollbar");let y,i;const k=ref(),L=ref(),$=ref(),V=ref(),z=computed(()=>{const de={};return n.height&&(de.height=addUnit(n.height)),n.maxHeight&&(de.maxHeight=addUnit(n.maxHeight)),[n.wrapStyle,de]}),re=computed(()=>[n.wrapClass,g.e("wrap"),{[g.em("wrap","hidden-default")]:!n.native}]),oe=computed(()=>[g.e("view"),n.viewClass]),le=()=>{var de;L.value&&((de=V.value)==null||de.handleScroll(L.value),e("scroll",{scrollTop:L.value.scrollTop,scrollLeft:L.value.scrollLeft}))};function ue(de,Ne){isObject$2(de)?L.value.scrollTo(de):isNumber$1(de)&&isNumber$1(Ne)&&L.value.scrollTo(de,Ne)}const ie=de=>{isNumber$1(de)&&(L.value.scrollTop=de)},ae=de=>{isNumber$1(de)&&(L.value.scrollLeft=de)},Fe=()=>{var de;(de=V.value)==null||de.update()};return watch(()=>n.noresize,de=>{de?(y==null||y(),i==null||i()):({stop:y}=useResizeObserver($,Fe),i=useEventListener("resize",Fe))},{immediate:!0}),watch(()=>[n.maxHeight,n.height],()=>{n.native||nextTick(()=>{var de;Fe(),L.value&&((de=V.value)==null||de.handleScroll(L.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:k,wrapElement:L})),onMounted(()=>{n.native||nextTick(()=>{Fe()})}),onUpdated(()=>Fe()),r({wrapRef:L,update:Fe,scrollTo:ue,setScrollTop:ie,setScrollLeft:ae,handleScroll:le}),(de,Ne)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:k,class:normalizeClass(unref(g).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:L,class:normalizeClass(unref(re)),style:normalizeStyle(unref(z)),onScroll:le},[(openBlock(),createBlock(resolveDynamicComponent(de.tag),{id:de.id,ref_key:"resizeRef",ref:$,class:normalizeClass(unref(oe)),style:normalizeStyle(de.viewStyle),role:de.role,"aria-label":de.ariaLabel,"aria-orientation":de.ariaOrientation},{default:withCtx(()=>[renderSlot(de.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),de.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:V,always:de.always,"min-size":de.minSize},null,8,["always","min-size"]))],2))}});var Scrollbar=_export_sfc$1(_sfc_main$1c,[["__file","scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$K=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$1b=defineComponent({...__default__$K,props:popperProps,setup(t,{expose:r}){const e=t,n=ref(),g=ref(),y=ref(),i=ref(),k=computed(()=>e.role),L={triggerRef:n,popperInstanceRef:g,contentRef:y,referenceRef:i,role:k};return r(L),provide(POPPER_INJECTION_KEY,L),($,V)=>renderSlot($.$slots,"default")}});var Popper=_export_sfc$1(_sfc_main$1b,[["__file","popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$J=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$1a=defineComponent({...__default__$J,props:popperArrowProps,setup(t,{expose:r}){const e=t,n=useNamespace("popper"),{arrowOffset:g,arrowRef:y,arrowStyle:i}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>e.arrowOffset,k=>{g.value=k}),onBeforeUnmount(()=>{y.value=void 0}),r({arrowRef:y}),(k,L)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:y,class:normalizeClass(unref(n).e("arrow")),style:normalizeStyle(unref(i)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc$1(_sfc_main$1a,[["__file","arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(t,{slots:r,attrs:e}){var n;const g=inject(FORWARD_REF_INJECTION_KEY),y=useForwardRefDirective((n=g==null?void 0:g.setForwardRef)!=null?n:NOOP);return()=>{var i;const k=(i=r.default)==null?void 0:i.call(r,e);if(!k||k.length>1)return null;const L=findFirstLegitChild(k);return L?withDirectives(cloneVNode(L,e),[[y]]):null}}});function findFirstLegitChild(t){if(!t)return null;const r=t;for(const e of r){if(isObject$2(e))switch(e.type){case Comment:continue;case Text:case"svg":return wrapTextContent(e);case Fragment:return findFirstLegitChild(e.children);default:return e}return wrapTextContent(e)}return null}function wrapTextContent(t){const r=useNamespace("only-child");return createVNode("span",{class:r.e("content")},[t])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$I=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$19=defineComponent({...__default__$I,props:popperTriggerProps,setup(t,{expose:r}){const e=t,{role:n,triggerRef:g}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(g);const y=computed(()=>k.value?e.id:void 0),i=computed(()=>{if(n&&n.value==="tooltip")return e.open&&e.id?e.id:void 0}),k=computed(()=>{if(n&&n.value!=="tooltip")return n.value}),L=computed(()=>k.value?`${e.open}`:void 0);let $;return onMounted(()=>{watch(()=>e.virtualRef,V=>{V&&(g.value=unrefElement(V))},{immediate:!0}),watch(g,(V,z)=>{$==null||$(),$=void 0,isElement(V)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(re=>{var oe;const le=e[re];le&&(V.addEventListener(re.slice(2).toLowerCase(),le),(oe=z==null?void 0:z.removeEventListener)==null||oe.call(z,re.slice(2).toLowerCase(),le))}),$=watch([y,i,k,L],re=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((oe,le)=>{isNil(re[le])?V.removeAttribute(oe):V.setAttribute(oe,re[le])})},{immediate:!0})),isElement(z)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(re=>z.removeAttribute(re))},{immediate:!0})}),onBeforeUnmount(()=>{$==null||$(),$=void 0}),r({triggerRef:g}),(V,z)=>V.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},V.$attrs,{"aria-controls":unref(y),"aria-describedby":unref(i),"aria-expanded":unref(L),"aria-haspopup":unref(k)}),{default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc$1(_sfc_main$19,[["__file","trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=t=>{const r=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const g=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||g?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)r.push(e.currentNode);return r},getVisibleElement=(t,r)=>{for(const e of t)if(!isHidden(e,r))return e},isHidden=(t,r)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},getEdges=t=>{const r=obtainAllFocusableElements(t),e=getVisibleElement(r,t),n=getVisibleElement(r.reverse(),t);return[e,n]},isSelectable=t=>t instanceof HTMLInputElement&&"select"in t,tryFocus=(t,r)=>{if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),t!==e&&isSelectable(t)&&r&&t.select()}};function removeFromStack(t,r){const e=[...t],n=t.indexOf(r);return n!==-1&&e.splice(n,1),e}const createFocusableStack=()=>{let t=[];return{push:n=>{const g=t[0];g&&n!==g&&g.pause(),t=removeFromStack(t,n),t.unshift(n)},remove:n=>{var g,y;t=removeFromStack(t,n),(y=(g=t[0])==null?void 0:g.resume)==null||y.call(g)}}},focusFirstDescendant=(t,r=!1)=>{const e=document.activeElement;for(const n of t)if(tryFocus(n,r),document.activeElement!==e)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=t=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:t}),_sfc_main$18=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:r}){const e=ref();let n,g;const{focusReason:y}=useFocusReason();useEscapeKeydown(le=>{t.trapped&&!i.paused&&r("release-requested",le)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},k=le=>{if(!t.loop&&!t.trapped||i.paused)return;const{key:ue,altKey:ie,ctrlKey:ae,metaKey:Fe,currentTarget:de,shiftKey:Ne}=le,{loop:Ve}=t,ze=ue===EVENT_CODE.tab&&!ie&&!ae&&!Fe,jt=document.activeElement;if(ze&&jt){const kt=de,[Et,lr]=getEdges(kt);if(Et&&lr){if(!Ne&&jt===lr){const or=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",or),or.defaultPrevented||(le.preventDefault(),Ve&&tryFocus(Et,!0))}else if(Ne&&[Et,kt].includes(jt)){const or=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",or),or.defaultPrevented||(le.preventDefault(),Ve&&tryFocus(lr,!0))}}else if(jt===kt){const or=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",or),or.defaultPrevented||le.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:e,onKeydown:k}),watch(()=>t.focusTrapEl,le=>{le&&(e.value=le)},{immediate:!0}),watch([e],([le],[ue])=>{le&&(le.addEventListener("keydown",k),le.addEventListener("focusin",V),le.addEventListener("focusout",z)),ue&&(ue.removeEventListener("keydown",k),ue.removeEventListener("focusin",V),ue.removeEventListener("focusout",z))});const L=le=>{r(ON_TRAP_FOCUS_EVT,le)},$=le=>r(ON_RELEASE_FOCUS_EVT,le),V=le=>{const ue=unref(e);if(!ue)return;const ie=le.target,ae=le.relatedTarget,Fe=ie&&ue.contains(ie);t.trapped||ae&&ue.contains(ae)||(n=ae),Fe&&r("focusin",le),!i.paused&&t.trapped&&(Fe?g=ie:tryFocus(g,!0))},z=le=>{const ue=unref(e);if(!(i.paused||!ue))if(t.trapped){const ie=le.relatedTarget;!isNil(ie)&&!ue.contains(ie)&&setTimeout(()=>{if(!i.paused&&t.trapped){const ae=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",ae),ae.defaultPrevented||tryFocus(g,!0)}},0)}else{const ie=le.target;ie&&ue.contains(ie)||r("focusout",le)}};async function re(){await nextTick();const le=unref(e);if(le){focusableStack.push(i);const ue=le.contains(document.activeElement)?n:document.activeElement;if(n=ue,!le.contains(ue)){const ae=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);le.addEventListener(FOCUS_AFTER_TRAPPED,L),le.dispatchEvent(ae),ae.defaultPrevented||nextTick(()=>{let Fe=t.focusStartEl;isString$2(Fe)||(tryFocus(Fe),document.activeElement!==Fe&&(Fe="first")),Fe==="first"&&focusFirstDescendant(obtainAllFocusableElements(le),!0),(document.activeElement===ue||Fe==="container")&&tryFocus(le)})}}}function oe(){const le=unref(e);if(le){le.removeEventListener(FOCUS_AFTER_TRAPPED,L);const ue=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:y.value}});le.addEventListener(FOCUS_AFTER_RELEASED,$),le.dispatchEvent(ue),!ue.defaultPrevented&&(y.value=="keyboard"||!isFocusCausedByUserEvent()||le.contains(document.activeElement))&&tryFocus(n??document.body),le.removeEventListener(FOCUS_AFTER_RELEASED,$),focusableStack.remove(i)}}return onMounted(()=>{t.trapped&&re(),watch(()=>t.trapped,le=>{le?re():oe()})}),onBeforeUnmount(()=>{t.trapped&&oe()}),{onKeydown:k}}});function _sfc_render$d(t,r,e,n,g,y){return renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var ElFocusTrap=_export_sfc$1(_sfc_main$18,[["render",_sfc_render$d],["__file","focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...useAriaProps(["ariaLabel"])}),popperContentEmits={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(t,r=[])=>{const{placement:e,strategy:n,popperOptions:g}=t,y={placement:e,strategy:n,...g,modifiers:[...genModifiers(t),...r]};return deriveExtraModifiers(y,g==null?void 0:g.modifiers),y},unwrapMeasurableEl=t=>{if(isClient)return unrefElement(t)};function genModifiers(t){const{offset:r,gpuAcceleration:e,fallbackPlacements:n}=t;return[{name:"offset",options:{offset:[0,r??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function deriveExtraModifiers(t,r){r&&(t.modifiers=[...t.modifiers,...r??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=t=>{const{popperInstanceRef:r,contentRef:e,triggerRef:n,role:g}=inject(POPPER_INJECTION_KEY,void 0),y=ref(),i=ref(),k=computed(()=>({name:"eventListeners",enabled:!!t.visible})),L=computed(()=>{var ae;const Fe=unref(y),de=(ae=unref(i))!=null?ae:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$2(Fe),options:{element:Fe,padding:de}}}),$=computed(()=>({onFirstUpdate:()=>{le()},...buildPopperOptions(t,[unref(L),unref(k)])})),V=computed(()=>unwrapMeasurableEl(t.referenceEl)||unref(n)),{attributes:z,state:re,styles:oe,update:le,forceUpdate:ue,instanceRef:ie}=usePopper(V,e,$);return watch(ie,ae=>r.value=ae),onMounted(()=>{watch(()=>{var ae;return(ae=unref(V))==null?void 0:ae.getBoundingClientRect()},()=>{le()})}),{attributes:z,arrowRef:y,contentRef:e,instanceRef:ie,state:re,styles:oe,role:g,forceUpdate:ue,update:le}},usePopperContentDOM=(t,{attributes:r,styles:e,role:n})=>{const{nextZIndex:g}=useZIndex(),y=useNamespace("popper"),i=computed(()=>unref(r).popper),k=ref(isNumber$1(t.zIndex)?t.zIndex:g()),L=computed(()=>[y.b(),y.is("pure",t.pure),y.is(t.effect),t.popperClass]),$=computed(()=>[{zIndex:unref(k)},unref(e).popper,t.popperStyle||{}]),V=computed(()=>n.value==="dialog"?"false":void 0),z=computed(()=>unref(e).arrow||{});return{ariaModal:V,arrowStyle:z,contentAttrs:i,contentClass:L,contentStyle:$,contentZIndex:k,updateZIndex:()=>{k.value=isNumber$1(t.zIndex)?t.zIndex:g()}}},usePopperContentFocusTrap=(t,r)=>{const e=ref(!1),n=ref();return{focusStartRef:n,trapped:e,onFocusAfterReleased:$=>{var V;((V=$.detail)==null?void 0:V.focusReason)!=="pointer"&&(n.value="first",r("blur"))},onFocusAfterTrapped:()=>{r("focus")},onFocusInTrap:$=>{t.visible&&!e.value&&($.target&&(n.value=$.target),e.value=!0)},onFocusoutPrevented:$=>{t.trapping||($.detail.focusReason==="pointer"&&$.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,r("close")}}},__default__$H=defineComponent({name:"ElPopperContent"}),_sfc_main$17=defineComponent({...__default__$H,props:popperContentProps,emits:popperContentEmits,setup(t,{expose:r,emit:e}){const n=t,{focusStartRef:g,trapped:y,onFocusAfterReleased:i,onFocusAfterTrapped:k,onFocusInTrap:L,onFocusoutPrevented:$,onReleaseRequested:V}=usePopperContentFocusTrap(n,e),{attributes:z,arrowRef:re,contentRef:oe,styles:le,instanceRef:ue,role:ie,update:ae}=usePopperContent(n),{ariaModal:Fe,arrowStyle:de,contentAttrs:Ne,contentClass:Ve,contentStyle:ze,updateZIndex:jt}=usePopperContentDOM(n,{styles:le,attributes:z,role:ie}),kt=inject(formItemContextKey,void 0),Et=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:de,arrowRef:re,arrowOffset:Et}),kt&&(kt.addInputId||kt.removeInputId)&&provide(formItemContextKey,{...kt,addInputId:NOOP,removeInputId:NOOP});let lr;const tr=(dr=!0)=>{ae(),dr&&jt()},or=()=>{tr(!1),n.visible&&n.focusOnShow?y.value=!0:n.visible===!1&&(y.value=!1)};return onMounted(()=>{watch(()=>n.triggerTargetEl,(dr,cr)=>{lr==null||lr(),lr=void 0;const nr=unref(dr||oe.value),ur=unref(cr||oe.value);isElement(nr)&&(lr=watch([ie,()=>n.ariaLabel,Fe,()=>n.id],ar=>{["role","aria-label","aria-modal","id"].forEach((gr,pr)=>{isNil(ar[pr])?nr.removeAttribute(gr):nr.setAttribute(gr,ar[pr])})},{immediate:!0})),ur!==nr&&isElement(ur)&&["role","aria-label","aria-modal","id"].forEach(ar=>{ur.removeAttribute(ar)})},{immediate:!0}),watch(()=>n.visible,or,{immediate:!0})}),onBeforeUnmount(()=>{lr==null||lr(),lr=void 0}),r({popperContentRef:oe,popperInstanceRef:ue,updatePopper:tr,contentStyle:ze}),(dr,cr)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:oe},unref(Ne),{style:unref(ze),class:unref(Ve),tabindex:"-1",onMouseenter:cr[0]||(cr[0]=nr=>dr.$emit("mouseenter",nr)),onMouseleave:cr[1]||(cr[1]=nr=>dr.$emit("mouseleave",nr))}),[createVNode(unref(ElFocusTrap),{trapped:unref(y),"trap-on-focus-in":!0,"focus-trap-el":unref(oe),"focus-start-el":unref(g),onFocusAfterTrapped:unref(k),onFocusAfterReleased:unref(i),onFocusin:unref(L),onFocusoutPrevented:unref($),onReleaseRequested:unref(V)},{default:withCtx(()=>[renderSlot(dr.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc$1(_sfc_main$17,[["__file","content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...useAriaProps(["ariaLabel"])}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(t,r)=>isArray$3(t)?t.includes(r):t===r,whenTrigger=(t,r,e)=>n=>{isTriggerType(unref(t),r)&&e(n)},__default__$G=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$16=defineComponent({...__default__$G,props:useTooltipTriggerProps,setup(t,{expose:r}){const e=t,n=useNamespace("tooltip"),{controlled:g,id:y,open:i,onOpen:k,onClose:L,onToggle:$}=inject(TOOLTIP_INJECTION_KEY,void 0),V=ref(null),z=()=>{if(unref(g)||e.disabled)return!0},re=toRef(e,"trigger"),oe=composeEventHandlers(z,whenTrigger(re,"hover",k)),le=composeEventHandlers(z,whenTrigger(re,"hover",L)),ue=composeEventHandlers(z,whenTrigger(re,"click",Ne=>{Ne.button===0&&$(Ne)})),ie=composeEventHandlers(z,whenTrigger(re,"focus",k)),ae=composeEventHandlers(z,whenTrigger(re,"focus",L)),Fe=composeEventHandlers(z,whenTrigger(re,"contextmenu",Ne=>{Ne.preventDefault(),$(Ne)})),de=composeEventHandlers(z,Ne=>{const{code:Ve}=Ne;e.triggerKeys.includes(Ve)&&(Ne.preventDefault(),$(Ne))});return r({triggerRef:V}),(Ne,Ve)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(y),"virtual-ref":Ne.virtualRef,open:unref(i),"virtual-triggering":Ne.virtualTriggering,class:normalizeClass(unref(n).e("trigger")),onBlur:unref(ae),onClick:unref(ue),onContextmenu:unref(Fe),onFocus:unref(ie),onMouseenter:unref(oe),onMouseleave:unref(le),onKeydown:unref(de)},{default:withCtx(()=>[renderSlot(Ne.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc$1(_sfc_main$16,[["__file","trigger.vue"]]);const __default__$F=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$15=defineComponent({...__default__$F,props:useTooltipContentProps,setup(t,{expose:r}){const e=t,{selector:n}=usePopperContainerId(),g=useNamespace("tooltip"),y=ref(null),i=ref(!1),{controlled:k,id:L,open:$,trigger:V,onClose:z,onOpen:re,onShow:oe,onHide:le,onBeforeShow:ue,onBeforeHide:ie}=inject(TOOLTIP_INJECTION_KEY,void 0),ae=computed(()=>e.transition||`${g.namespace.value}-fade-in-linear`),Fe=computed(()=>e.persistent);onBeforeUnmount(()=>{i.value=!0});const de=computed(()=>unref(Fe)?!0:unref($)),Ne=computed(()=>e.disabled?!1:unref($)),Ve=computed(()=>e.appendTo||n.value),ze=computed(()=>{var ar;return(ar=e.style)!=null?ar:{}}),jt=computed(()=>!unref($)),kt=()=>{le()},Et=()=>{if(unref(k))return!0},lr=composeEventHandlers(Et,()=>{e.enterable&&unref(V)==="hover"&&re()}),tr=composeEventHandlers(Et,()=>{unref(V)==="hover"&&z()}),or=()=>{var ar,gr;(gr=(ar=y.value)==null?void 0:ar.updatePopper)==null||gr.call(ar),ue==null||ue()},dr=()=>{ie==null||ie()},cr=()=>{oe(),ur=onClickOutside(computed(()=>{var ar;return(ar=y.value)==null?void 0:ar.popperContentRef}),()=>{if(unref(k))return;unref(V)!=="hover"&&z()})},nr=()=>{e.virtualTriggering||z()};let ur;return watch(()=>unref($),ar=>{ar||ur==null||ur()},{flush:"post"}),watch(()=>e.content,()=>{var ar,gr;(gr=(ar=y.value)==null?void 0:ar.updatePopper)==null||gr.call(ar)}),r({contentRef:y}),(ar,gr)=>(openBlock(),createBlock(Teleport,{disabled:!ar.teleported,to:unref(Ve)},[createVNode(Transition,{name:unref(ae),onAfterLeave:kt,onBeforeEnter:or,onAfterEnter:cr,onBeforeLeave:dr},{default:withCtx(()=>[unref(de)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(L),ref_key:"contentRef",ref:y},ar.$attrs,{"aria-label":ar.ariaLabel,"aria-hidden":unref(jt),"boundaries-padding":ar.boundariesPadding,"fallback-placements":ar.fallbackPlacements,"gpu-acceleration":ar.gpuAcceleration,offset:ar.offset,placement:ar.placement,"popper-options":ar.popperOptions,strategy:ar.strategy,effect:ar.effect,enterable:ar.enterable,pure:ar.pure,"popper-class":ar.popperClass,"popper-style":[ar.popperStyle,unref(ze)],"reference-el":ar.referenceEl,"trigger-target-el":ar.triggerTargetEl,visible:unref(Ne),"z-index":ar.zIndex,onMouseenter:unref(lr),onMouseleave:unref(tr),onBlur:nr,onClose:unref(z)}),{default:withCtx(()=>[i.value?createCommentVNode("v-if",!0):renderSlot(ar.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Ne)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc$1(_sfc_main$15,[["__file","content.vue"]]);const _hoisted_1$E=["innerHTML"],_hoisted_2$o={key:1},__default__$E=defineComponent({name:"ElTooltip"}),_sfc_main$14=defineComponent({...__default__$E,props:useTooltipProps,emits:tooltipEmits,setup(t,{expose:r,emit:e}){const n=t;usePopperContainer();const g=useId(),y=ref(),i=ref(),k=()=>{var ae;const Fe=unref(y);Fe&&((ae=Fe.popperInstanceRef)==null||ae.update())},L=ref(!1),$=ref(),{show:V,hide:z,hasUpdateHandler:re}=useTooltipModelToggle({indicator:L,toggleReason:$}),{onOpen:oe,onClose:le}=useDelayedToggle({showAfter:toRef(n,"showAfter"),hideAfter:toRef(n,"hideAfter"),autoClose:toRef(n,"autoClose"),open:V,close:z}),ue=computed(()=>isBoolean$1(n.visible)&&!re.value);provide(TOOLTIP_INJECTION_KEY,{controlled:ue,id:g,open:readonly(L),trigger:toRef(n,"trigger"),onOpen:ae=>{oe(ae)},onClose:ae=>{le(ae)},onToggle:ae=>{unref(L)?le(ae):oe(ae)},onShow:()=>{e("show",$.value)},onHide:()=>{e("hide",$.value)},onBeforeShow:()=>{e("before-show",$.value)},onBeforeHide:()=>{e("before-hide",$.value)},updatePopper:k}),watch(()=>n.disabled,ae=>{ae&&L.value&&(L.value=!1)});const ie=ae=>{var Fe,de;const Ne=(de=(Fe=i.value)==null?void 0:Fe.contentRef)==null?void 0:de.popperContentRef,Ve=(ae==null?void 0:ae.relatedTarget)||document.activeElement;return Ne&&Ne.contains(Ve)};return onDeactivated(()=>L.value&&z()),r({popperRef:y,contentRef:i,isFocusInsideContent:ie,updatePopper:k,onOpen:oe,onClose:le,hide:z}),(ae,Fe)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:y,role:ae.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:ae.disabled,trigger:ae.trigger,"trigger-keys":ae.triggerKeys,"virtual-ref":ae.virtualRef,"virtual-triggering":ae.virtualTriggering},{default:withCtx(()=>[ae.$slots.default?renderSlot(ae.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:i,"aria-label":ae.ariaLabel,"boundaries-padding":ae.boundariesPadding,content:ae.content,disabled:ae.disabled,effect:ae.effect,enterable:ae.enterable,"fallback-placements":ae.fallbackPlacements,"hide-after":ae.hideAfter,"gpu-acceleration":ae.gpuAcceleration,offset:ae.offset,persistent:ae.persistent,"popper-class":ae.popperClass,"popper-style":ae.popperStyle,placement:ae.placement,"popper-options":ae.popperOptions,pure:ae.pure,"raw-content":ae.rawContent,"reference-el":ae.referenceEl,"trigger-target-el":ae.triggerTargetEl,"show-after":ae.showAfter,strategy:ae.strategy,teleported:ae.teleported,transition:ae.transition,"virtual-triggering":ae.virtualTriggering,"z-index":ae.zIndex,"append-to":ae.appendTo},{default:withCtx(()=>[renderSlot(ae.$slots,"content",{},()=>[ae.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:ae.content},null,8,_hoisted_1$E)):(openBlock(),createElementBlock("span",_hoisted_2$o,toDisplayString(ae.content),1))]),ae.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":ae.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc$1(_sfc_main$14,[["__file","tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),avatarProps=buildProps({size:{type:[Number,String],values:componentSizes,default:"",validator:t=>isNumber$1(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:iconPropType},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:definePropType(String),default:"cover"}}),avatarEmits={error:t=>t instanceof Event},_hoisted_1$D=["src","alt","srcset"],__default__$D=defineComponent({name:"ElAvatar"}),_sfc_main$13=defineComponent({...__default__$D,props:avatarProps,emits:avatarEmits,setup(t,{emit:r}){const e=t,n=useNamespace("avatar"),g=ref(!1),y=computed(()=>{const{size:$,icon:V,shape:z}=e,re=[n.b()];return isString$2($)&&re.push(n.m($)),V&&re.push(n.m("icon")),z&&re.push(n.m(z)),re}),i=computed(()=>{const{size:$}=e;return isNumber$1($)?n.cssVarBlock({size:addUnit($)||""}):void 0}),k=computed(()=>({objectFit:e.fit}));watch(()=>e.src,()=>g.value=!1);function L($){g.value=!0,r("error",$)}return($,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y)),style:normalizeStyle(unref(i))},[($.src||$.srcSet)&&!g.value?(openBlock(),createElementBlock("img",{key:0,src:$.src,alt:$.alt,srcset:$.srcSet,style:normalizeStyle(unref(k)),onError:L},null,44,_hoisted_1$D)):$.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent($.icon)))]),_:1})):renderSlot($.$slots,"default",{key:2})],6))}});var Avatar=_export_sfc$1(_sfc_main$13,[["__file","avatar.vue"]]);const ElAvatar=withInstall(Avatar),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,dotStyle:{type:definePropType([String,Object,Array])},badgeStyle:{type:definePropType([String,Object,Array])},offset:{type:definePropType(Array),default:[0,0]},dotClass:{type:String},badgeClass:{type:String}}),_hoisted_1$C=["textContent"],__default__$C=defineComponent({name:"ElBadge"}),_sfc_main$12=defineComponent({...__default__$C,props:badgeProps,setup(t,{expose:r}){const e=t,n=useNamespace("badge"),g=computed(()=>e.isDot?"":isNumber$1(e.value)&&isNumber$1(e.max)?e.max<e.value?`${e.max}+`:e.value===0&&!e.showZero?"":`${e.value}`:`${e.value}`),y=computed(()=>{var i,k,L,$,V,z;return[{backgroundColor:e.color,marginRight:addUnit(-((k=(i=e.offset)==null?void 0:i[0])!=null?k:0)),marginTop:addUnit(($=(L=e.offset)==null?void 0:L[1])!=null?$:0)},(V=e.dotStyle)!=null?V:{},(z=e.badgeStyle)!=null?z:{}]});return useDeprecated({from:"dot-style",replacement:"badge-style",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},computed(()=>!!e.dotStyle)),useDeprecated({from:"dot-class",replacement:"badge-class",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},computed(()=>!!e.dotClass)),r({content:g}),(i,k)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(n).b())},[renderSlot(i.$slots,"default"),createVNode(Transition,{name:`${unref(n).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(n).e("content"),unref(n).em("content",i.type),unref(n).is("fixed",!!i.$slots.default),unref(n).is("dot",i.isDot),i.dotClass,i.badgeClass]),style:normalizeStyle(unref(y)),textContent:toDisplayString(unref(g))},null,14,_hoisted_1$C),[[vShow,!i.hidden&&(unref(g)||i.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc$1(_sfc_main$12,[["__file","badge.vue"]]);const ElBadge=withInstall(Badge),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(t,r)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>t.type==="text"));const e=inject(buttonGroupContextKey,void 0),n=useGlobalConfig("button"),{form:g}=useFormItem(),y=useFormSize(computed(()=>e==null?void 0:e.size)),i=useFormDisabled(),k=ref(),L=useSlots(),$=computed(()=>t.type||(e==null?void 0:e.type)||""),V=computed(()=>{var le,ue,ie;return(ie=(ue=t.autoInsertSpace)!=null?ue:(le=n.value)==null?void 0:le.autoInsertSpace)!=null?ie:!1}),z=computed(()=>t.tag==="button"?{ariaDisabled:i.value||t.loading,disabled:i.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),re=computed(()=>{var le;const ue=(le=L.default)==null?void 0:le.call(L);if(V.value&&(ue==null?void 0:ue.length)===1){const ie=ue[0];if((ie==null?void 0:ie.type)===Text){const ae=ie.children;return/^\p{Unified_Ideograph}{2}$/u.test(ae.trim())}}return!1});return{_disabled:i,_size:y,_type:$,_ref:k,_props:z,shouldAddSpace:re,handleClick:le=>{t.nativeType==="reset"&&(g==null||g.resetFields()),r("click",le)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:t=>t instanceof MouseEvent};function bound01(t,r){isOnePointZero(t)&&(t="100%");var e=isPercentage(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),e&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function clamp01(t){return Math.min(1,Math.max(0,t))}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!==-1}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function convertToPercentage(t){return t<=1?"".concat(Number(t)*100,"%"):t}function pad2(t){return t.length===1?"0"+t:String(t)}function rgbToRgb(t,r,e){return{r:bound01(t,255)*255,g:bound01(r,255)*255,b:bound01(e,255)*255}}function rgbToHsl(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),g=Math.min(t,r,e),y=0,i=0,k=(n+g)/2;if(n===g)i=0,y=0;else{var L=n-g;switch(i=k>.5?L/(2-n-g):L/(n+g),n){case t:y=(r-e)/L+(r<e?6:0);break;case r:y=(e-t)/L+2;break;case e:y=(t-r)/L+4;break}y/=6}return{h:y,s:i,l:k}}function hue2rgb(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(r-t)*(6*e):e<1/2?r:e<2/3?t+(r-t)*(2/3-e)*6:t}function hslToRgb(t,r,e){var n,g,y;if(t=bound01(t,360),r=bound01(r,100),e=bound01(e,100),r===0)g=e,y=e,n=e;else{var i=e<.5?e*(1+r):e+r-e*r,k=2*e-i;n=hue2rgb(k,i,t+1/3),g=hue2rgb(k,i,t),y=hue2rgb(k,i,t-1/3)}return{r:n*255,g:g*255,b:y*255}}function rgbToHsv(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),g=Math.min(t,r,e),y=0,i=n,k=n-g,L=n===0?0:k/n;if(n===g)y=0;else{switch(n){case t:y=(r-e)/k+(r<e?6:0);break;case r:y=(e-t)/k+2;break;case e:y=(t-r)/k+4;break}y/=6}return{h:y,s:L,v:i}}function hsvToRgb(t,r,e){t=bound01(t,360)*6,r=bound01(r,100),e=bound01(e,100);var n=Math.floor(t),g=t-n,y=e*(1-r),i=e*(1-g*r),k=e*(1-(1-g)*r),L=n%6,$=[e,i,y,y,k,e][L],V=[k,e,e,i,y,y][L],z=[y,y,k,e,e,i][L];return{r:$*255,g:V*255,b:z*255}}function rgbToHex(t,r,e,n){var g=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16))];return n&&g[0].startsWith(g[0].charAt(1))&&g[1].startsWith(g[1].charAt(1))&&g[2].startsWith(g[2].charAt(1))?g[0].charAt(0)+g[1].charAt(0)+g[2].charAt(0):g.join("")}function rgbaToHex(t,r,e,n,g){var y=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16)),pad2(convertDecimalToHex(n))];return g&&y[0].startsWith(y[0].charAt(1))&&y[1].startsWith(y[1].charAt(1))&&y[2].startsWith(y[2].charAt(1))&&y[3].startsWith(y[3].charAt(1))?y[0].charAt(0)+y[1].charAt(0)+y[2].charAt(0)+y[3].charAt(0):y.join("")}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}function parseIntFromHex(t){return parseInt(t,16)}function numberInputToObject(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(t){var r={r:0,g:0,b:0},e=1,n=null,g=null,y=null,i=!1,k=!1;return typeof t=="string"&&(t=stringInputToObject(t)),typeof t=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(r=rgbToRgb(t.r,t.g,t.b),i=!0,k=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(n=convertToPercentage(t.s),g=convertToPercentage(t.v),r=hsvToRgb(t.h,n,g),i=!0,k="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(n=convertToPercentage(t.s),y=convertToPercentage(t.l),r=hslToRgb(t.h,n,y),i=!0,k="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(e=t.a)),e=boundAlpha(e),{ok:i,format:t.format||k,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:e}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if(names[t])t=names[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=matchers.rgb.exec(t);return e?{r:e[1],g:e[2],b:e[3]}:(e=matchers.rgba.exec(t),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=matchers.hsl.exec(t),e?{h:e[1],s:e[2],l:e[3]}:(e=matchers.hsla.exec(t),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=matchers.hsv.exec(t),e?{h:e[1],s:e[2],v:e[3]}:(e=matchers.hsva.exec(t),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=matchers.hex8.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),a:convertHexToDecimal(e[4]),format:r?"name":"hex8"}:(e=matchers.hex6.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),format:r?"name":"hex"}:(e=matchers.hex4.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),a:convertHexToDecimal(e[4]+e[4]),format:r?"name":"hex8"}:(e=matchers.hex3.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),format:r?"name":"hex"}:!1)))))))))}function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(String(t))}var TinyColor=function(){function t(r,e){r===void 0&&(r=""),e===void 0&&(e={});var n;if(r instanceof t)return r;typeof r=="number"&&(r=numberInputToObject(r)),this.originalInput=r;var g=inputToRGB(r);this.originalInput=r,this.r=g.r,this.g=g.g,this.b=g.b,this.a=g.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:g.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=g.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),e,n,g,y=r.r/255,i=r.g/255,k=r.b/255;return y<=.03928?e=y/12.92:e=Math.pow((y+.055)/1.055,2.4),i<=.03928?n=i/12.92:n=Math.pow((i+.055)/1.055,2.4),k<=.03928?g=k/12.92:g=Math.pow((k+.055)/1.055,2.4),.2126*e+.7152*n+.0722*g},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=boundAlpha(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=rgbToHsv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=rgbToHsv(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),g=Math.round(r.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(g,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=rgbToHsl(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=rgbToHsl(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),g=Math.round(r.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(g,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),rgbToHex(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),rgbaToHex(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(e,", ").concat(n,")"):"rgba(".concat(r,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(e){return"".concat(Math.round(bound01(e,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(e){return Math.round(bound01(e,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+rgbToHex(this.r,this.g,this.b,!1),e=0,n=Object.entries(names);e<n.length;e++){var g=n[e],y=g[0],i=g[1];if(r===i)return y}return!1},t.prototype.toString=function(r){var e=!!r;r=r??this.format;var n=!1,g=this.a<1&&this.a>=0,y=!e&&g&&(r.startsWith("hex")||r==="name");return y?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l+=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.brighten=function(r){r===void 0&&(r=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(r/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(r/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(r/100)))),new t(e)},t.prototype.darken=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l-=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s-=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.saturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s+=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var e=this.toHsl(),n=(e.h+r)%360;return e.h=n<0?360+n:n,new t(e)},t.prototype.mix=function(r,e){e===void 0&&(e=50);var n=this.toRgb(),g=new t(r).toRgb(),y=e/100,i={r:(g.r-n.r)*y+n.r,g:(g.g-n.g)*y+n.g,b:(g.b-n.b)*y+n.b,a:(g.a-n.a)*y+n.a};return new t(i)},t.prototype.analogous=function(r,e){r===void 0&&(r=6),e===void 0&&(e=30);var n=this.toHsl(),g=360/e,y=[this];for(n.h=(n.h-(g*r>>1)+720)%360;--r;)n.h=(n.h+g)%360,y.push(new t(n));return y},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var e=this.toHsv(),n=e.h,g=e.s,y=e.v,i=[],k=1/r;r--;)i.push(new t({h:n,s:g,v:y})),y=(y+k)%1;return i},t.prototype.splitcomplement=function(){var r=this.toHsl(),e=r.h;return[this,new t({h:(e+72)%360,s:r.s,l:r.l}),new t({h:(e+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var e=this.toRgb(),n=new t(r).toRgb(),g=e.a+n.a*(1-e.a);return new t({r:(e.r*e.a+n.r*n.a*(1-e.a))/g,g:(e.g*e.a+n.g*n.a*(1-e.a))/g,b:(e.b*e.a+n.b*n.a*(1-e.a))/g,a:g})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var e=this.toHsl(),n=e.h,g=[this],y=360/r,i=1;i<r;i++)g.push(new t({h:(n+i*y)%360,s:e.s,l:e.l}));return g},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}();function darken(t,r=20){return t.mix("#141414",r).toString()}function useButtonCustomStyle(t){const r=useFormDisabled(),e=useNamespace("button");return computed(()=>{let n={};const g=t.color;if(g){const y=new TinyColor(g),i=t.dark?y.tint(20).toString():darken(y,20);if(t.plain)n=e.cssVarBlock({"bg-color":t.dark?darken(y,90):y.tint(90).toString(),"text-color":g,"border-color":t.dark?darken(y,50):y.tint(50).toString(),"hover-text-color":`var(${e.cssVarName("color-white")})`,"hover-bg-color":g,"hover-border-color":g,"active-bg-color":i,"active-text-color":`var(${e.cssVarName("color-white")})`,"active-border-color":i}),r.value&&(n[e.cssVarBlockName("disabled-bg-color")]=t.dark?darken(y,90):y.tint(90).toString(),n[e.cssVarBlockName("disabled-text-color")]=t.dark?darken(y,50):y.tint(50).toString(),n[e.cssVarBlockName("disabled-border-color")]=t.dark?darken(y,80):y.tint(80).toString());else{const k=t.dark?darken(y,30):y.tint(30).toString(),L=y.isDark()?`var(${e.cssVarName("color-white")})`:`var(${e.cssVarName("color-black")})`;if(n=e.cssVarBlock({"bg-color":g,"text-color":L,"border-color":g,"hover-bg-color":k,"hover-text-color":L,"hover-border-color":k,"active-bg-color":i,"active-border-color":i}),r.value){const $=t.dark?darken(y,50):y.tint(50).toString();n[e.cssVarBlockName("disabled-bg-color")]=$,n[e.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${e.cssVarName("color-white")})`,n[e.cssVarBlockName("disabled-border-color")]=$}}}return n})}const __default__$B=defineComponent({name:"ElButton"}),_sfc_main$11=defineComponent({...__default__$B,props:buttonProps,emits:buttonEmits,setup(t,{expose:r,emit:e}){const n=t,g=useButtonCustomStyle(n),y=useNamespace("button"),{_ref:i,_size:k,_type:L,_disabled:$,_props:V,shouldAddSpace:z,handleClick:re}=useButton(n,e),oe=computed(()=>[y.b(),y.m(L.value),y.m(k.value),y.is("disabled",$.value),y.is("loading",n.loading),y.is("plain",n.plain),y.is("round",n.round),y.is("circle",n.circle),y.is("text",n.text),y.is("link",n.link),y.is("has-bg",n.bg)]);return r({ref:i,size:k,type:L,disabled:$,shouldAddSpace:z}),(le,ue)=>(openBlock(),createBlock(resolveDynamicComponent(le.tag),mergeProps({ref_key:"_ref",ref:i},unref(V),{class:unref(oe),style:unref(g),onClick:unref(re)}),{default:withCtx(()=>[le.loading?(openBlock(),createElementBlock(Fragment,{key:0},[le.$slots.loading?renderSlot(le.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(y).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.loadingIcon)))]),_:1},8,["class"]))],64)):le.icon||le.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[le.icon?(openBlock(),createBlock(resolveDynamicComponent(le.icon),{key:0})):renderSlot(le.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),le.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(y).em("text","expand")]:unref(z)})},[renderSlot(le.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc$1(_sfc_main$11,[["__file","button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$A=defineComponent({name:"ElButtonGroup"}),_sfc_main$10=defineComponent({...__default__$A,props:buttonGroupProps,setup(t){const r=t;provide(buttonGroupContextKey,reactive({size:toRef(r,"size"),type:toRef(r,"type")}));const e=useNamespace("button");return(n,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(e).b("group")}`)},[renderSlot(n.$slots,"default")],2))}});var ButtonGroup=_export_sfc$1(_sfc_main$10,[["__file","button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup});withNoopInstall(ButtonGroup);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dayjs_min={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=1e3,n=6e4,g=36e5,y="millisecond",i="second",k="minute",L="hour",$="day",V="week",z="month",re="quarter",oe="year",le="date",ue="Invalid Date",ie=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ae=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(cr){var nr=["th","st","nd","rd"],ur=cr%100;return"["+cr+(nr[(ur-20)%10]||nr[ur]||nr[0])+"]"}},de=function(cr,nr,ur){var ar=String(cr);return!ar||ar.length>=nr?cr:""+Array(nr+1-ar.length).join(ur)+cr},Ne={s:de,z:function(cr){var nr=-cr.utcOffset(),ur=Math.abs(nr),ar=Math.floor(ur/60),gr=ur%60;return(nr<=0?"+":"-")+de(ar,2,"0")+":"+de(gr,2,"0")},m:function cr(nr,ur){if(nr.date()<ur.date())return-cr(ur,nr);var ar=12*(ur.year()-nr.year())+(ur.month()-nr.month()),gr=nr.clone().add(ar,z),pr=ur-gr<0,yr=nr.clone().add(ar+(pr?-1:1),z);return+(-(ar+(ur-gr)/(pr?gr-yr:yr-gr))||0)},a:function(cr){return cr<0?Math.ceil(cr)||0:Math.floor(cr)},p:function(cr){return{M:z,y:oe,w:V,d:$,D:le,h:L,m:k,s:i,ms:y,Q:re}[cr]||String(cr||"").toLowerCase().replace(/s$/,"")},u:function(cr){return cr===void 0}},Ve="en",ze={};ze[Ve]=Fe;var jt="$isDayjsObject",kt=function(cr){return cr instanceof or||!(!cr||!cr[jt])},Et=function cr(nr,ur,ar){var gr;if(!nr)return Ve;if(typeof nr=="string"){var pr=nr.toLowerCase();ze[pr]&&(gr=pr),ur&&(ze[pr]=ur,gr=pr);var yr=nr.split("-");if(!gr&&yr.length>1)return cr(yr[0])}else{var Sr=nr.name;ze[Sr]=nr,gr=Sr}return!ar&&gr&&(Ve=gr),gr||!ar&&Ve},lr=function(cr,nr){if(kt(cr))return cr.clone();var ur=typeof nr=="object"?nr:{};return ur.date=cr,ur.args=arguments,new or(ur)},tr=Ne;tr.l=Et,tr.i=kt,tr.w=function(cr,nr){return lr(cr,{locale:nr.$L,utc:nr.$u,x:nr.$x,$offset:nr.$offset})};var or=function(){function cr(ur){this.$L=Et(ur.locale,null,!0),this.parse(ur),this.$x=this.$x||ur.x||{},this[jt]=!0}var nr=cr.prototype;return nr.parse=function(ur){this.$d=function(ar){var gr=ar.date,pr=ar.utc;if(gr===null)return new Date(NaN);if(tr.u(gr))return new Date;if(gr instanceof Date)return new Date(gr);if(typeof gr=="string"&&!/Z$/i.test(gr)){var yr=gr.match(ie);if(yr){var Sr=yr[2]-1||0,wr=(yr[7]||"0").substring(0,3);return pr?new Date(Date.UTC(yr[1],Sr,yr[3]||1,yr[4]||0,yr[5]||0,yr[6]||0,wr)):new Date(yr[1],Sr,yr[3]||1,yr[4]||0,yr[5]||0,yr[6]||0,wr)}}return new Date(gr)}(ur),this.init()},nr.init=function(){var ur=this.$d;this.$y=ur.getFullYear(),this.$M=ur.getMonth(),this.$D=ur.getDate(),this.$W=ur.getDay(),this.$H=ur.getHours(),this.$m=ur.getMinutes(),this.$s=ur.getSeconds(),this.$ms=ur.getMilliseconds()},nr.$utils=function(){return tr},nr.isValid=function(){return this.$d.toString()!==ue},nr.isSame=function(ur,ar){var gr=lr(ur);return this.startOf(ar)<=gr&&gr<=this.endOf(ar)},nr.isAfter=function(ur,ar){return lr(ur)<this.startOf(ar)},nr.isBefore=function(ur,ar){return this.endOf(ar)<lr(ur)},nr.$g=function(ur,ar,gr){return tr.u(ur)?this[ar]:this.set(gr,ur)},nr.unix=function(){return Math.floor(this.valueOf()/1e3)},nr.valueOf=function(){return this.$d.getTime()},nr.startOf=function(ur,ar){var gr=this,pr=!!tr.u(ar)||ar,yr=tr.p(ur),Sr=function(Ir,Ar){var Cr=tr.w(gr.$u?Date.UTC(gr.$y,Ar,Ir):new Date(gr.$y,Ar,Ir),gr);return pr?Cr:Cr.endOf($)},wr=function(Ir,Ar){return tr.w(gr.toDate()[Ir].apply(gr.toDate("s"),(pr?[0,0,0,0]:[23,59,59,999]).slice(Ar)),gr)},Mr=this.$W,mr=this.$M,_r=this.$D,Nr="set"+(this.$u?"UTC":"");switch(yr){case oe:return pr?Sr(1,0):Sr(31,11);case z:return pr?Sr(1,mr):Sr(0,mr+1);case V:var Pr=this.$locale().weekStart||0,sr=(Mr<Pr?Mr+7:Mr)-Pr;return Sr(pr?_r-sr:_r+(6-sr),mr);case $:case le:return wr(Nr+"Hours",0);case L:return wr(Nr+"Minutes",1);case k:return wr(Nr+"Seconds",2);case i:return wr(Nr+"Milliseconds",3);default:return this.clone()}},nr.endOf=function(ur){return this.startOf(ur,!1)},nr.$set=function(ur,ar){var gr,pr=tr.p(ur),yr="set"+(this.$u?"UTC":""),Sr=(gr={},gr[$]=yr+"Date",gr[le]=yr+"Date",gr[z]=yr+"Month",gr[oe]=yr+"FullYear",gr[L]=yr+"Hours",gr[k]=yr+"Minutes",gr[i]=yr+"Seconds",gr[y]=yr+"Milliseconds",gr)[pr],wr=pr===$?this.$D+(ar-this.$W):ar;if(pr===z||pr===oe){var Mr=this.clone().set(le,1);Mr.$d[Sr](wr),Mr.init(),this.$d=Mr.set(le,Math.min(this.$D,Mr.daysInMonth())).$d}else Sr&&this.$d[Sr](wr);return this.init(),this},nr.set=function(ur,ar){return this.clone().$set(ur,ar)},nr.get=function(ur){return this[tr.p(ur)]()},nr.add=function(ur,ar){var gr,pr=this;ur=Number(ur);var yr=tr.p(ar),Sr=function(mr){var _r=lr(pr);return tr.w(_r.date(_r.date()+Math.round(mr*ur)),pr)};if(yr===z)return this.set(z,this.$M+ur);if(yr===oe)return this.set(oe,this.$y+ur);if(yr===$)return Sr(1);if(yr===V)return Sr(7);var wr=(gr={},gr[k]=n,gr[L]=g,gr[i]=e,gr)[yr]||1,Mr=this.$d.getTime()+ur*wr;return tr.w(Mr,this)},nr.subtract=function(ur,ar){return this.add(-1*ur,ar)},nr.format=function(ur){var ar=this,gr=this.$locale();if(!this.isValid())return gr.invalidDate||ue;var pr=ur||"YYYY-MM-DDTHH:mm:ssZ",yr=tr.z(this),Sr=this.$H,wr=this.$m,Mr=this.$M,mr=gr.weekdays,_r=gr.months,Nr=gr.meridiem,Pr=function(Ar,Cr,br,vr){return Ar&&(Ar[Cr]||Ar(ar,pr))||br[Cr].slice(0,vr)},sr=function(Ar){return tr.s(Sr%12||12,Ar,"0")},Ir=Nr||function(Ar,Cr,br){var vr=Ar<12?"AM":"PM";return br?vr.toLowerCase():vr};return pr.replace(ae,function(Ar,Cr){return Cr||function(br){switch(br){case"YY":return String(ar.$y).slice(-2);case"YYYY":return tr.s(ar.$y,4,"0");case"M":return Mr+1;case"MM":return tr.s(Mr+1,2,"0");case"MMM":return Pr(gr.monthsShort,Mr,_r,3);case"MMMM":return Pr(_r,Mr);case"D":return ar.$D;case"DD":return tr.s(ar.$D,2,"0");case"d":return String(ar.$W);case"dd":return Pr(gr.weekdaysMin,ar.$W,mr,2);case"ddd":return Pr(gr.weekdaysShort,ar.$W,mr,3);case"dddd":return mr[ar.$W];case"H":return String(Sr);case"HH":return tr.s(Sr,2,"0");case"h":return sr(1);case"hh":return sr(2);case"a":return Ir(Sr,wr,!0);case"A":return Ir(Sr,wr,!1);case"m":return String(wr);case"mm":return tr.s(wr,2,"0");case"s":return String(ar.$s);case"ss":return tr.s(ar.$s,2,"0");case"SSS":return tr.s(ar.$ms,3,"0");case"Z":return yr}return null}(Ar)||yr.replace(":","")})},nr.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},nr.diff=function(ur,ar,gr){var pr,yr=this,Sr=tr.p(ar),wr=lr(ur),Mr=(wr.utcOffset()-this.utcOffset())*n,mr=this-wr,_r=function(){return tr.m(yr,wr)};switch(Sr){case oe:pr=_r()/12;break;case z:pr=_r();break;case re:pr=_r()/3;break;case V:pr=(mr-Mr)/6048e5;break;case $:pr=(mr-Mr)/864e5;break;case L:pr=mr/g;break;case k:pr=mr/n;break;case i:pr=mr/e;break;default:pr=mr}return gr?pr:tr.a(pr)},nr.daysInMonth=function(){return this.endOf(z).$D},nr.$locale=function(){return ze[this.$L]},nr.locale=function(ur,ar){if(!ur)return this.$L;var gr=this.clone(),pr=Et(ur,ar,!0);return pr&&(gr.$L=pr),gr},nr.clone=function(){return tr.w(this.$d,this)},nr.toDate=function(){return new Date(this.valueOf())},nr.toJSON=function(){return this.isValid()?this.toISOString():null},nr.toISOString=function(){return this.$d.toISOString()},nr.toString=function(){return this.$d.toUTCString()},cr}(),dr=or.prototype;return lr.prototype=dr,[["$ms",y],["$s",i],["$m",k],["$H",L],["$W",$],["$M",z],["$y",oe],["$D",le]].forEach(function(cr){dr[cr[1]]=function(nr){return this.$g(nr,cr[0],cr[1])}}),lr.extend=function(cr,nr){return cr.$i||(cr(nr,or,lr),cr.$i=!0),lr},lr.locale=Et,lr.isDayjs=kt,lr.unix=function(cr){return lr(1e3*cr)},lr.en=ze[Ve],lr.Ls=ze,lr.p={},lr})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",t=>startClick=t),document.addEventListener("mouseup",t=>{for(const r of nodeList.values())for(const{documentHandler:e}of r)e(t,startClick)}));function createDocumentHandler(t,r){let e=[];return Array.isArray(r.arg)?e=r.arg:isElement(r.arg)&&e.push(r.arg),function(n,g){const y=r.instance.popperRef,i=n.target,k=g==null?void 0:g.target,L=!r||!r.instance,$=!i||!k,V=t.contains(i)||t.contains(k),z=t===i,re=e.length&&e.some(le=>le==null?void 0:le.contains(i))||e.length&&e.includes(k),oe=y&&(y.contains(i)||y.contains(k));L||$||V||z||re||oe||r.value(n,g)}}const ClickOutside={beforeMount(t,r){nodeList.has(t)||nodeList.set(t,[]),nodeList.get(t).push({documentHandler:createDocumentHandler(t,r),bindingFn:r.value})},updated(t,r){nodeList.has(t)||nodeList.set(t,[]);const e=nodeList.get(t),n=e.findIndex(y=>y.bindingFn===r.oldValue),g={documentHandler:createDocumentHandler(t,r),bindingFn:r.value};n>=0?e.splice(n,1,g):e.push(g)},unmounted(t){nodeList.delete(t)}},REPEAT_INTERVAL=100,REPEAT_DELAY=600,vRepeatClick={beforeMount(t,r){const e=r.value,{interval:n=REPEAT_INTERVAL,delay:g=REPEAT_DELAY}=isFunction$3(e)?{}:e;let y,i;const k=()=>isFunction$3(e)?e():e.handler(),L=()=>{i&&(clearTimeout(i),i=void 0),y&&(clearInterval(y),y=void 0)};t.addEventListener("mousedown",$=>{$.button===0&&(L(),k(),document.addEventListener("mouseup",()=>L(),{once:!0}),i=setTimeout(()=>{y=setInterval(()=>{k()},n)},g))})}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=t=>{if(FOCUS_STACK.length===0)return;const r=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(r.length>0&&t.code===EVENT_CODE.tab){if(r.length===1){t.preventDefault(),document.activeElement!==r[0]&&r[0].focus();return}const e=t.shiftKey,n=t.target===r[0],g=t.target===r[r.length-1];n&&e&&(t.preventDefault(),r[r.length-1].focus()),g&&!e&&(t.preventDefault(),r[0].focus())}},TrapFocus={beforeMount(t){t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t),FOCUS_STACK.push(t),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(t){nextTick(()=>{t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}};var v=!1,o,f,s,u,d,N,l$1,p,m,w,D,x,E,M,F;function a(){if(!v){v=!0;var t=navigator.userAgent,r=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),e=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(x=/\b(iPhone|iP[ao]d)/.exec(t),E=/\b(iP[ao]d)/.exec(t),w=/Android/i.exec(t),M=/FBAN\/\w+;/i.exec(t),F=/Mobile/i.exec(t),D=!!/Win64/.exec(t),r){o=r[1]?parseFloat(r[1]):r[5]?parseFloat(r[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);N=n?parseFloat(n[1])+4:o,f=r[2]?parseFloat(r[2]):NaN,s=r[3]?parseFloat(r[3]):NaN,u=r[4]?parseFloat(r[4]):NaN,u?(r=/(?:Chrome\/(\d+\.\d+))/.exec(t),d=r&&r[1]?parseFloat(r[1]):NaN):d=NaN}else o=f=s=d=u=NaN;if(e){if(e[1]){var g=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);l$1=g?parseFloat(g[1].replace("_",".")):!0}else l$1=!1;p=!!e[2],m=!!e[3]}else l$1=p=m=!1}}var _={ie:function(){return a()||o},ieCompatibilityMode:function(){return a()||N>o},ie64:function(){return _.ie()&&D},firefox:function(){return a()||f},opera:function(){return a()||s},webkit:function(){return a()||u},safari:function(){return _.webkit()},chrome:function(){return a()||d},windows:function(){return a()||p},osx:function(){return a()||l$1},linux:function(){return a()||m},iphone:function(){return a()||x},mobile:function(){return a()||x||E||w||F},nativeApp:function(){return a()||M},android:function(){return a()||w},ipad:function(){return a()||E}},A=_,c=!!(typeof window<"u"&&window.document&&window.document.createElement),U={canUseDOM:c,canUseWorkers:typeof Worker<"u",canUseEventListeners:c&&!!(window.addEventListener||window.attachEvent),canUseViewport:c&&!!window.screen,isInWorker:!c},h=U,X;h.canUseDOM&&(X=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function S(t,r){if(!h.canUseDOM||r&&!("addEventListener"in document))return!1;var e="on"+t,n=e in document;if(!n){var g=document.createElement("div");g.setAttribute(e,"return;"),n=typeof g[e]=="function"}return!n&&X&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var b=S,O=10,I=40,P=800;function T(t){var r=0,e=0,n=0,g=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/120),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(r=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(r=e,e=0),n=r*O,g=e*O,"deltaY"in t&&(g=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||g)&&t.deltaMode&&(t.deltaMode==1?(n*=I,g*=I):(n*=P,g*=P)),n&&!r&&(r=n<1?-1:1),g&&!e&&(e=g<1?-1:1),{spinX:r,spinY:e,pixelX:n,pixelY:g}}T.getEventType=function(){return A.firefox()?"DOMMouseScroll":b("wheel")?"wheel":"mousewheel"};var Y=T;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mousewheel=function(t,r){if(t&&t.addEventListener){const e=function(n){const g=Y(n);r&&Reflect.apply(r,this,[n,g])};t.addEventListener("wheel",e,{passive:!0})}},Mousewheel={beforeMount(t,r){mousewheel(t,r.value)}},cardProps=buildProps({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:definePropType([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),__default__$z=defineComponent({name:"ElCard"}),_sfc_main$$=defineComponent({...__default__$z,props:cardProps,setup(t){const r=useNamespace("card");return(e,n)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(r).b(),unref(r).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("header"))},[renderSlot(e.$slots,"header",{},()=>[createTextVNode(toDisplayString(e.header),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([unref(r).e("body"),e.bodyClass]),style:normalizeStyle(e.bodyStyle)},[renderSlot(e.$slots,"default")],6),e.$slots.footer||e.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("footer"))},[renderSlot(e.$slots,"footer",{},()=>[createTextVNode(toDisplayString(e.footer),1)])],2)):createCommentVNode("v-if",!0)],2))}});var Card=_export_sfc$1(_sfc_main$$,[["__file","card.vue"]]);const ElCard=withInstall(Card),checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaControls"])},checkboxEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),change:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:t,isChecked:r})=>{const e=inject(checkboxGroupContextKey,void 0),n=computed(()=>{var y,i;const k=(y=e==null?void 0:e.max)==null?void 0:y.value,L=(i=e==null?void 0:e.min)==null?void 0:i.value;return!isUndefined$1(k)&&t.value.length>=k&&!r.value||!isUndefined$1(L)&&t.value.length<=L&&r.value});return{isDisabled:useFormDisabled(computed(()=>(e==null?void 0:e.disabled.value)||n.value)),isLimitDisabled:n}},useCheckboxEvent=(t,{model:r,isLimitExceeded:e,hasOwnLabel:n,isDisabled:g,isLabeledByFormItem:y})=>{const i=inject(checkboxGroupContextKey,void 0),{formItem:k}=useFormItem(),{emit:L}=getCurrentInstance();function $(le){var ue,ie,ae,Fe;return[!0,t.trueValue,t.trueLabel].includes(le)?(ie=(ue=t.trueValue)!=null?ue:t.trueLabel)!=null?ie:!0:(Fe=(ae=t.falseValue)!=null?ae:t.falseLabel)!=null?Fe:!1}function V(le,ue){L("change",$(le),ue)}function z(le){if(e.value)return;const ue=le.target;L("change",$(ue.checked),le)}async function re(le){e.value||!n.value&&!g.value&&y.value&&(le.composedPath().some(ae=>ae.tagName==="LABEL")||(r.value=$([!1,t.falseValue,t.falseLabel].includes(r.value)),await nextTick(),V(r.value,le)))}const oe=computed(()=>(i==null?void 0:i.validateEvent)||t.validateEvent);return watch(()=>t.modelValue,()=>{oe.value&&(k==null||k.validate("change").catch(le=>void 0))}),{handleChange:z,onClickRoot:re}},useCheckboxModel=t=>{const r=ref(!1),{emit:e}=getCurrentInstance(),n=inject(checkboxGroupContextKey,void 0),g=computed(()=>isUndefined$1(n)===!1),y=ref(!1),i=computed({get(){var k,L;return g.value?(k=n==null?void 0:n.modelValue)==null?void 0:k.value:(L=t.modelValue)!=null?L:r.value},set(k){var L,$;g.value&&isArray$3(k)?(y.value=((L=n==null?void 0:n.max)==null?void 0:L.value)!==void 0&&k.length>(n==null?void 0:n.max.value)&&k.length>i.value.length,y.value===!1&&(($=n==null?void 0:n.changeEvent)==null||$.call(n,k))):(e(UPDATE_MODEL_EVENT,k),r.value=k)}});return{model:i,isGroup:g,isLimitExceeded:y}},useCheckboxStatus=(t,r,{model:e})=>{const n=inject(checkboxGroupContextKey,void 0),g=ref(!1),y=computed(()=>isPropAbsent(t.value)?t.label:t.value),i=computed(()=>{const V=e.value;return isBoolean$1(V)?V:isArray$3(V)?isObject$2(y.value)?V.map(toRaw).some(z=>isEqual(z,y.value)):V.map(toRaw).includes(y.value):V!=null?V===t.trueValue||V===t.trueLabel:!!V}),k=useFormSize(computed(()=>{var V;return(V=n==null?void 0:n.size)==null?void 0:V.value}),{prop:!0}),L=useFormSize(computed(()=>{var V;return(V=n==null?void 0:n.size)==null?void 0:V.value})),$=computed(()=>!!r.default||!isPropAbsent(y.value));return{checkboxButtonSize:k,isChecked:i,isFocused:g,checkboxSize:L,hasOwnLabel:$,actualValue:y}},useCheckbox=(t,r)=>{const{formItem:e}=useFormItem(),{model:n,isGroup:g,isLimitExceeded:y}=useCheckboxModel(t),{isFocused:i,isChecked:k,checkboxButtonSize:L,checkboxSize:$,hasOwnLabel:V,actualValue:z}=useCheckboxStatus(t,r,{model:n}),{isDisabled:re}=useCheckboxDisabled({model:n,isChecked:k}),{inputId:oe,isLabeledByFormItem:le}=useFormItemInputId(t,{formItemContext:e,disableIdGeneration:V,disableIdManagement:g}),{handleChange:ue,onClickRoot:ie}=useCheckboxEvent(t,{model:n,isLimitExceeded:y,hasOwnLabel:V,isDisabled:re,isLabeledByFormItem:le});return(()=>{function Fe(){var de,Ne;isArray$3(n.value)&&!n.value.includes(z.value)?n.value.push(z.value):n.value=(Ne=(de=t.trueValue)!=null?de:t.trueLabel)!=null?Ne:!0}t.checked&&Fe()})(),useDeprecated({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>!!t.controls)),useDeprecated({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>g.value&&isPropAbsent(t.value))),useDeprecated({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>!!t.trueLabel)),useDeprecated({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>!!t.falseLabel)),{inputId:oe,isLabeledByFormItem:le,isChecked:k,isDisabled:re,isFocused:i,checkboxButtonSize:L,checkboxSize:$,hasOwnLabel:V,model:n,actualValue:z,handleChange:ue,onClickRoot:ie}},_hoisted_1$B=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],_hoisted_2$n=["id","indeterminate","disabled","value","name","tabindex"],__default__$y=defineComponent({name:"ElCheckbox"}),_sfc_main$_=defineComponent({...__default__$y,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{inputId:n,isLabeledByFormItem:g,isChecked:y,isDisabled:i,isFocused:k,checkboxSize:L,hasOwnLabel:$,model:V,actualValue:z,handleChange:re,onClickRoot:oe}=useCheckbox(r,e),le=useNamespace("checkbox"),ue=computed(()=>[le.b(),le.m(L.value),le.is("disabled",i.value),le.is("bordered",r.border),le.is("checked",y.value)]),ie=computed(()=>[le.e("input"),le.is("disabled",i.value),le.is("checked",y.value),le.is("indeterminate",r.indeterminate),le.is("focus",k.value)]);return(ae,Fe)=>(openBlock(),createBlock(resolveDynamicComponent(!unref($)&&unref(g)?"span":"label"),{class:normalizeClass(unref(ue)),"aria-controls":ae.indeterminate?ae.controls||ae.ariaControls:null,onClick:unref(oe)},{default:withCtx(()=>{var de,Ne;return[createBaseVNode("span",{class:normalizeClass(unref(ie))},[ae.trueValue||ae.falseValue||ae.trueLabel||ae.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(n),"onUpdate:modelValue":Fe[0]||(Fe[0]=Ve=>isRef(V)?V.value=Ve:null),class:normalizeClass(unref(le).e("original")),type:"checkbox",indeterminate:ae.indeterminate,name:ae.name,tabindex:ae.tabindex,disabled:unref(i),"true-value":(de=ae.trueValue)!=null?de:ae.trueLabel,"false-value":(Ne=ae.falseValue)!=null?Ne:ae.falseLabel,onChange:Fe[1]||(Fe[1]=(...Ve)=>unref(re)&&unref(re)(...Ve)),onFocus:Fe[2]||(Fe[2]=Ve=>k.value=!0),onBlur:Fe[3]||(Fe[3]=Ve=>k.value=!1),onClick:Fe[4]||(Fe[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$B)),[[vModelCheckbox,unref(V)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(n),"onUpdate:modelValue":Fe[5]||(Fe[5]=Ve=>isRef(V)?V.value=Ve:null),class:normalizeClass(unref(le).e("original")),type:"checkbox",indeterminate:ae.indeterminate,disabled:unref(i),value:unref(z),name:ae.name,tabindex:ae.tabindex,onChange:Fe[6]||(Fe[6]=(...Ve)=>unref(re)&&unref(re)(...Ve)),onFocus:Fe[7]||(Fe[7]=Ve=>k.value=!0),onBlur:Fe[8]||(Fe[8]=Ve=>k.value=!1),onClick:Fe[9]||(Fe[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$n)),[[vModelCheckbox,unref(V)]]),createBaseVNode("span",{class:normalizeClass(unref(le).e("inner"))},null,2)],2),unref($)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le).e("label"))},[renderSlot(ae.$slots,"default"),ae.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(ae.label),1)],64))],2)):createCommentVNode("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc$1(_sfc_main$_,[["__file","checkbox.vue"]]);const _hoisted_1$A=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$m=["name","tabindex","disabled","value"],__default__$x=defineComponent({name:"ElCheckboxButton"}),_sfc_main$Z=defineComponent({...__default__$x,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{isFocused:n,isChecked:g,isDisabled:y,checkboxButtonSize:i,model:k,actualValue:L,handleChange:$}=useCheckbox(r,e),V=inject(checkboxGroupContextKey,void 0),z=useNamespace("checkbox"),re=computed(()=>{var le,ue,ie,ae;const Fe=(ue=(le=V==null?void 0:V.fill)==null?void 0:le.value)!=null?ue:"";return{backgroundColor:Fe,borderColor:Fe,color:(ae=(ie=V==null?void 0:V.textColor)==null?void 0:ie.value)!=null?ae:"",boxShadow:Fe?`-1px 0 0 0 ${Fe}`:void 0}}),oe=computed(()=>[z.b("button"),z.bm("button",i.value),z.is("disabled",y.value),z.is("checked",g.value),z.is("focus",n.value)]);return(le,ue)=>{var ie,ae;return openBlock(),createElementBlock("label",{class:normalizeClass(unref(oe))},[le.trueValue||le.falseValue||le.trueLabel||le.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":ue[0]||(ue[0]=Fe=>isRef(k)?k.value=Fe:null),class:normalizeClass(unref(z).be("button","original")),type:"checkbox",name:le.name,tabindex:le.tabindex,disabled:unref(y),"true-value":(ie=le.trueValue)!=null?ie:le.trueLabel,"false-value":(ae=le.falseValue)!=null?ae:le.falseLabel,onChange:ue[1]||(ue[1]=(...Fe)=>unref($)&&unref($)(...Fe)),onFocus:ue[2]||(ue[2]=Fe=>n.value=!0),onBlur:ue[3]||(ue[3]=Fe=>n.value=!1),onClick:ue[4]||(ue[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$A)),[[vModelCheckbox,unref(k)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":ue[5]||(ue[5]=Fe=>isRef(k)?k.value=Fe:null),class:normalizeClass(unref(z).be("button","original")),type:"checkbox",name:le.name,tabindex:le.tabindex,disabled:unref(y),value:unref(L),onChange:ue[6]||(ue[6]=(...Fe)=>unref($)&&unref($)(...Fe)),onFocus:ue[7]||(ue[7]=Fe=>n.value=!0),onBlur:ue[8]||(ue[8]=Fe=>n.value=!1),onClick:ue[9]||(ue[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$m)),[[vModelCheckbox,unref(k)]]),le.$slots.default||le.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(z).be("button","inner")),style:normalizeStyle(unref(g)?unref(re):void 0)},[renderSlot(le.$slots,"default",{},()=>[createTextVNode(toDisplayString(le.label),1)])],6)):createCommentVNode("v-if",!0)],2)}}});var CheckboxButton=_export_sfc$1(_sfc_main$Z,[["__file","checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:t=>isArray$3(t),change:t=>isArray$3(t)},__default__$w=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$Y=defineComponent({...__default__$w,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("checkbox"),{formItem:g}=useFormItem(),{inputId:y,isLabeledByFormItem:i}=useFormItemInputId(e,{formItemContext:g}),k=async $=>{r(UPDATE_MODEL_EVENT,$),await nextTick(),r("change",$)},L=computed({get(){return e.modelValue},set($){k($)}});return provide(checkboxGroupContextKey,{...pick$1(toRefs(e),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:L,changeEvent:k}),useDeprecated({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>!!e.label)),watch(()=>e.modelValue,()=>{e.validateEvent&&(g==null||g.validate("change").catch($=>void 0))}),($,V)=>{var z;return openBlock(),createBlock(resolveDynamicComponent($.tag),{id:unref(y),class:normalizeClass(unref(n).b("group")),role:"group","aria-label":unref(i)?void 0:$.label||$.ariaLabel||"checkbox-group","aria-labelledby":unref(i)?(z=unref(g))==null?void 0:z.labelId:void 0},{default:withCtx(()=>[renderSlot($.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc$1(_sfc_main$Y,[["__file","checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup});withNoopInstall(CheckboxButton);const ElCheckboxGroup$1=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({modelValue:{type:[String,Number,Boolean],default:void 0},size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),radioProps=buildProps({...radioPropsBase,border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),[CHANGE_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(t,r)=>{const e=ref(),n=inject(radioGroupKey,void 0),g=computed(()=>!!n),y=computed(()=>isPropAbsent(t.value)?t.label:t.value),i=computed({get(){return g.value?n.modelValue:t.modelValue},set(z){g.value?n.changeEvent(z):r&&r(UPDATE_MODEL_EVENT,z),e.value.checked=t.modelValue===y.value}}),k=useFormSize(computed(()=>n==null?void 0:n.size)),L=useFormDisabled(computed(()=>n==null?void 0:n.disabled)),$=ref(!1),V=computed(()=>L.value||g.value&&i.value!==y.value?-1:0);return useDeprecated({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},computed(()=>g.value&&isPropAbsent(t.value))),{radioRef:e,isGroup:g,radioGroup:n,focus:$,size:k,disabled:L,tabIndex:V,modelValue:i,actualValue:y}},_hoisted_1$z=["value","name","disabled"],__default__$v=defineComponent({name:"ElRadio"}),_sfc_main$X=defineComponent({...__default__$v,props:radioProps,emits:radioEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),{radioRef:g,radioGroup:y,focus:i,size:k,disabled:L,modelValue:$,actualValue:V}=useRadio(e,r);function z(){nextTick(()=>r("change",$.value))}return(re,oe)=>{var le;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(n).b(),unref(n).is("disabled",unref(L)),unref(n).is("focus",unref(i)),unref(n).is("bordered",re.border),unref(n).is("checked",unref($)===unref(V)),unref(n).m(unref(k))])},[createBaseVNode("span",{class:normalizeClass([unref(n).e("input"),unref(n).is("disabled",unref(L)),unref(n).is("checked",unref($)===unref(V))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:g,"onUpdate:modelValue":oe[0]||(oe[0]=ue=>isRef($)?$.value=ue:null),class:normalizeClass(unref(n).e("original")),value:unref(V),name:re.name||((le=unref(y))==null?void 0:le.name),disabled:unref(L),type:"radio",onFocus:oe[1]||(oe[1]=ue=>i.value=!0),onBlur:oe[2]||(oe[2]=ue=>i.value=!1),onChange:z,onClick:oe[3]||(oe[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$z),[[vModelRadio,unref($)]]),createBaseVNode("span",{class:normalizeClass(unref(n).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(n).e("label")),onKeydown:oe[4]||(oe[4]=withModifiers(()=>{},["stop"]))},[renderSlot(re.$slots,"default",{},()=>[createTextVNode(toDisplayString(re.label),1)])],34)],2)}}});var Radio=_export_sfc$1(_sfc_main$X,[["__file","radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase}),_hoisted_1$y=["value","name","disabled"],__default__$u=defineComponent({name:"ElRadioButton"}),_sfc_main$W=defineComponent({...__default__$u,props:radioButtonProps,setup(t){const r=t,e=useNamespace("radio"),{radioRef:n,focus:g,size:y,disabled:i,modelValue:k,radioGroup:L,actualValue:$}=useRadio(r),V=computed(()=>({backgroundColor:(L==null?void 0:L.fill)||"",borderColor:(L==null?void 0:L.fill)||"",boxShadow:L!=null&&L.fill?`-1px 0 0 0 ${L.fill}`:"",color:(L==null?void 0:L.textColor)||""}));return(z,re)=>{var oe;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(e).b("button"),unref(e).is("active",unref(k)===unref($)),unref(e).is("disabled",unref(i)),unref(e).is("focus",unref(g)),unref(e).bm("button",unref(y))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":re[0]||(re[0]=le=>isRef(k)?k.value=le:null),class:normalizeClass(unref(e).be("button","original-radio")),value:unref($),type:"radio",name:z.name||((oe=unref(L))==null?void 0:oe.name),disabled:unref(i),onFocus:re[1]||(re[1]=le=>g.value=!0),onBlur:re[2]||(re[2]=le=>g.value=!1),onClick:re[3]||(re[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$y),[[vModelRadio,unref(k)]]),createBaseVNode("span",{class:normalizeClass(unref(e).be("button","inner")),style:normalizeStyle(unref(k)===unref($)?unref(V):{}),onKeydown:re[4]||(re[4]=withModifiers(()=>{},["stop"]))},[renderSlot(z.$slots,"default",{},()=>[createTextVNode(toDisplayString(z.label),1)])],38)],2)}}});var RadioButton=_export_sfc$1(_sfc_main$W,[["__file","radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),radioGroupEmits=radioEmits,_hoisted_1$x=["id","aria-label","aria-labelledby"],__default__$t=defineComponent({name:"ElRadioGroup"}),_sfc_main$V=defineComponent({...__default__$t,props:radioGroupProps,emits:radioGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),g=useId(),y=ref(),{formItem:i}=useFormItem(),{inputId:k,isLabeledByFormItem:L}=useFormItemInputId(e,{formItemContext:i}),$=z=>{r(UPDATE_MODEL_EVENT,z),nextTick(()=>r("change",z))};onMounted(()=>{const z=y.value.querySelectorAll("[type=radio]"),re=z[0];!Array.from(z).some(oe=>oe.checked)&&re&&(re.tabIndex=0)});const V=computed(()=>e.name||g.value);return provide(radioGroupKey,reactive({...toRefs(e),changeEvent:$,name:V})),watch(()=>e.modelValue,()=>{e.validateEvent&&(i==null||i.validate("change").catch(z=>void 0))}),useDeprecated({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},computed(()=>!!e.label)),(z,re)=>(openBlock(),createElementBlock("div",{id:unref(k),ref_key:"radioGroupRef",ref:y,class:normalizeClass(unref(n).b("group")),role:"radiogroup","aria-label":unref(L)?void 0:z.label||z.ariaLabel||"radio-group","aria-labelledby":unref(L)?unref(i).labelId:void 0},[renderSlot(z.$slots,"default")],10,_hoisted_1$x))}});var RadioGroup=_export_sfc$1(_sfc_main$V,[["__file","radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup}),ElRadioGroup=withNoopInstall(RadioGroup);withNoopInstall(RadioButton);var NodeContent=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:t}=this,{node:r,panel:e}=this.$parent,{data:n,label:g}=r,{renderLabelFn:y}=e;return h$1("span",{class:t.e("label")},y?y({node:r,data:n}):g)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$U=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:r}){const e=inject(CASCADER_PANEL_INJECTION_KEY),n=useNamespace("cascader-node"),g=computed(()=>e.isHoverMenu),y=computed(()=>e.config.multiple),i=computed(()=>e.config.checkStrictly),k=computed(()=>{var ze;return(ze=e.checkedNodes[0])==null?void 0:ze.uid}),L=computed(()=>t.node.isDisabled),$=computed(()=>t.node.isLeaf),V=computed(()=>i.value&&!$.value||!L.value),z=computed(()=>oe(e.expandingNode)),re=computed(()=>i.value&&e.checkedNodes.some(oe)),oe=ze=>{var jt;const{level:kt,uid:Et}=t.node;return((jt=ze==null?void 0:ze.pathNodes[kt-1])==null?void 0:jt.uid)===Et},le=()=>{z.value||e.expandNode(t.node)},ue=ze=>{const{node:jt}=t;ze!==jt.checked&&e.handleCheckChange(jt,ze)},ie=()=>{e.lazyLoad(t.node,()=>{$.value||le()})},ae=ze=>{g.value&&(Fe(),!$.value&&r("expand",ze))},Fe=()=>{const{node:ze}=t;!V.value||ze.loading||(ze.loaded?le():ie())},de=()=>{g.value&&!$.value||($.value&&!L.value&&!i.value&&!y.value?Ve(!0):Fe())},Ne=ze=>{i.value?(ue(ze),t.node.loaded&&le()):Ve(ze)},Ve=ze=>{t.node.loaded?(ue(ze),!i.value&&le()):ie()};return{panel:e,isHoverMenu:g,multiple:y,checkStrictly:i,checkedNodeId:k,isDisabled:L,isLeaf:$,expandable:V,inExpandingPath:z,inCheckedPath:re,ns:n,handleHoverExpand:ae,handleExpand:Fe,handleClick:de,handleCheck:Ve,handleSelectCheck:Ne}}}),_hoisted_1$w=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$l=createBaseVNode("span",null,null,-1);function _sfc_render$c(t,r,e,n,g,y){const i=resolveComponent("el-checkbox"),k=resolveComponent("el-radio"),L=resolveComponent("check"),$=resolveComponent("el-icon"),V=resolveComponent("node-content"),z=resolveComponent("loading"),re=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:normalizeClass([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:r[2]||(r[2]=(...oe)=>t.handleHoverExpand&&t.handleHoverExpand(...oe)),onFocus:r[3]||(r[3]=(...oe)=>t.handleHoverExpand&&t.handleHoverExpand(...oe)),onClick:r[4]||(r[4]=(...oe)=>t.handleClick&&t.handleClick(...oe))},[createCommentVNode(" prefix "),t.multiple?(openBlock(),createBlock(i,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:r[0]||(r[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(openBlock(),createBlock(k,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:r[1]||(r[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$l]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(openBlock(),createBlock($,{key:2,class:normalizeClass(t.ns.e("prefix"))},{default:withCtx(()=>[createVNode(L)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(V),createCommentVNode(" postfix "),t.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[t.node.loading?(openBlock(),createBlock($,{key:0,class:normalizeClass([t.ns.is("loading"),t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(z)]),_:1},8,["class"])):(openBlock(),createBlock($,{key:1,class:normalizeClass(["arrow-right",t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(re)]),_:1},8,["class"]))],64))],42,_hoisted_1$w)}var ElCascaderNode=_export_sfc$1(_sfc_main$U,[["render",_sfc_render$c],["__file","node.vue"]]);const _sfc_main$T=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const r=getCurrentInstance(),e=useNamespace("cascader-menu"),{t:n}=useLocale(),g=useId();let y=null,i=null;const k=inject(CASCADER_PANEL_INJECTION_KEY),L=ref(null),$=computed(()=>!t.nodes.length),V=computed(()=>!k.initialLoaded),z=computed(()=>`${g.value}-${t.index}`),re=ie=>{y=ie.target},oe=ie=>{if(!(!k.isHoverMenu||!y||!L.value))if(y.contains(ie.target)){le();const ae=r.vnode.el,{left:Fe}=ae.getBoundingClientRect(),{offsetWidth:de,offsetHeight:Ne}=ae,Ve=ie.clientX-Fe,ze=y.offsetTop,jt=ze+y.offsetHeight;L.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${Ve} ${ze} L${de} 0 V${ze} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${Ve} ${jt} L${de} ${Ne} V${jt} Z" />
        `}else i||(i=window.setTimeout(ue,k.config.hoverThreshold))},le=()=>{i&&(clearTimeout(i),i=null)},ue=()=>{L.value&&(L.value.innerHTML="",le())};return{ns:e,panel:k,hoverZone:L,isEmpty:$,isLoading:V,menuId:z,t:n,handleExpand:re,handleMouseMove:oe,clearHoverZone:ue}}});function _sfc_render$b(t,r,e,n,g,y){const i=resolveComponent("el-cascader-node"),k=resolveComponent("loading"),L=resolveComponent("el-icon"),$=resolveComponent("el-scrollbar");return openBlock(),createBlock($,{key:t.menuId,tag:"ul",role:"menu",class:normalizeClass(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:withCtx(()=>{var V;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.nodes,z=>(openBlock(),createBlock(i,{key:z.uid,node:z,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.e("empty-text"))},[createVNode(L,{size:"14",class:normalizeClass(t.ns.is("loading"))},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("empty-text"))},toDisplayString(t.t("el.cascader.noData")),3)):(V=t.panel)!=null&&V.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(t.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc$1(_sfc_main$T,[["render",_sfc_render$b],["__file","menu.vue"]]);let uid=0;const calculatePathNodes=t=>{const r=[t];let{parent:e}=t;for(;e;)r.unshift(e),e=e.parent;return r};class Node{constructor(r,e,n,g=!1){this.data=r,this.config=e,this.parent=n,this.root=g,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:y,label:i,children:k}=e,L=r[k],$=calculatePathNodes(this);this.level=g?0:n?n.level+1:1,this.value=r[y],this.label=r[i],this.pathNodes=$,this.pathValues=$.map(V=>V.value),this.pathLabels=$.map(V=>V.label),this.childrenData=L,this.children=(L||[]).map(V=>new Node(V,e,this)),this.loaded=!e.lazy||this.isLeaf||!isEmpty(L)}get isDisabled(){const{data:r,parent:e,config:n}=this,{disabled:g,checkStrictly:y}=n;return(isFunction$3(g)?g(r,this):!!r[g])||!y&&(e==null?void 0:e.isDisabled)}get isLeaf(){const{data:r,config:e,childrenData:n,loaded:g}=this,{lazy:y,leaf:i}=e,k=isFunction$3(i)?i(r,this):r[i];return isUndefined$1(k)?y&&!g?!1:!(Array.isArray(n)&&n.length):!!k}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(r){const{childrenData:e,children:n}=this,g=new Node(r,this.config,this);return Array.isArray(e)?e.push(r):this.childrenData=[r],n.push(g),g}calcText(r,e){const n=r?this.pathLabels.join(e):this.label;return this.text=n,n}broadcast(r,...e){const n=`onParent${capitalize(r)}`;this.children.forEach(g=>{g&&(g.broadcast(r,...e),g[n]&&g[n](...e))})}emit(r,...e){const{parent:n}=this,g=`onChild${capitalize(r)}`;n&&(n[g]&&n[g](...e),n.emit(r,...e))}onParentCheck(r){this.isDisabled||this.setCheckState(r)}onChildCheck(){const{children:r}=this,e=r.filter(g=>!g.isDisabled),n=e.length?e.every(g=>g.checked):!1;this.setCheckState(n)}setCheckState(r){const e=this.children.length,n=this.children.reduce((g,y)=>{const i=y.checked?1:y.indeterminate?.5:0;return g+i},0);this.checked=this.loaded&&this.children.filter(g=>!g.isDisabled).every(g=>g.loaded&&g.checked)&&r,this.indeterminate=this.loaded&&n!==e&&n>0}doCheck(r){if(this.checked===r)return;const{checkStrictly:e,multiple:n}=this.config;e||!n?this.checked=r:(this.broadcast("check",r),this.setCheckState(r),this.emit("check"))}}const flatNodes=(t,r)=>t.reduce((e,n)=>(n.isLeaf?e.push(n):(!r&&e.push(n),e=e.concat(flatNodes(n.children,r))),e),[]);class Store{constructor(r,e){this.config=e;const n=(r||[]).map(g=>new Node(g,this.config));this.nodes=n,this.allNodes=flatNodes(n,!1),this.leafNodes=flatNodes(n,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const n=e?e.appendChild(r):new Node(r,this.config);e||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(r,e){r.forEach(n=>this.appendNode(n,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(g=>isEqual(g.value,r)||isEqual(g.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:n,level:g})=>isEqual(r.value,n)&&r.level===g)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=t=>computed(()=>({...DefaultProps,...t.props})),getMenuIndex=t=>{if(!t)return 0;const r=t.id.split("-");return Number(r[r.length-2])},checkNode=t=>{if(!t)return;const r=t.querySelector("input");r?r.click():isLeaf(t)&&t.click()},sortByOriginalOrder=(t,r)=>{const e=r.slice(0),n=e.map(y=>y.uid),g=t.reduce((y,i)=>{const k=n.indexOf(i.uid);return k>-1&&(y.push(i),e.splice(k,1),n.splice(k,1)),y},[]);return g.push(...e),g},_sfc_main$S=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(t,{emit:r,slots:e}){let n=!1;const g=useNamespace("cascader"),y=useCascaderConfig(t);let i=null;const k=ref(!0),L=ref([]),$=ref(null),V=ref([]),z=ref(null),re=ref([]),oe=computed(()=>y.value.expandTrigger==="hover"),le=computed(()=>t.renderLabel||e.default),ue=()=>{const{options:or}=t,dr=y.value;n=!1,i=new Store(or,dr),V.value=[i.getNodes()],dr.lazy&&isEmpty(t.options)?(k.value=!1,ie(void 0,cr=>{cr&&(i=new Store(cr,dr),V.value=[i.getNodes()]),k.value=!0,kt(!1,!0)})):kt(!1,!0)},ie=(or,dr)=>{const cr=y.value;or=or||new Node({},cr,void 0,!0),or.loading=!0;const nr=ur=>{const ar=or,gr=ar.root?null:ar;ur&&(i==null||i.appendNodes(ur,gr)),ar.loading=!1,ar.loaded=!0,ar.childrenData=ar.childrenData||[],dr&&dr(ur)};cr.lazyLoad(or,nr)},ae=(or,dr)=>{var cr;const{level:nr}=or,ur=V.value.slice(0,nr);let ar;or.isLeaf?ar=or.pathNodes[nr-2]:(ar=or,ur.push(or.children)),((cr=z.value)==null?void 0:cr.uid)!==(ar==null?void 0:ar.uid)&&(z.value=or,V.value=ur,!dr&&r("expand-change",(or==null?void 0:or.pathValues)||[]))},Fe=(or,dr,cr=!0)=>{const{checkStrictly:nr,multiple:ur}=y.value,ar=re.value[0];n=!0,!ur&&(ar==null||ar.doCheck(!1)),or.doCheck(dr),jt(),cr&&!ur&&!nr&&r("close"),!cr&&!ur&&!nr&&de(or)},de=or=>{or&&(or=or.parent,de(or),or&&ae(or))},Ne=or=>i==null?void 0:i.getFlattedNodes(or),Ve=or=>{var dr;return(dr=Ne(or))==null?void 0:dr.filter(cr=>cr.checked!==!1)},ze=()=>{re.value.forEach(or=>or.doCheck(!1)),jt(),V.value=V.value.slice(0,1),z.value=null,r("expand-change",[])},jt=()=>{var or;const{checkStrictly:dr,multiple:cr}=y.value,nr=re.value,ur=Ve(!dr),ar=sortByOriginalOrder(nr,ur),gr=ar.map(pr=>pr.valueByOption);re.value=ar,$.value=cr?gr:(or=gr[0])!=null?or:null},kt=(or=!1,dr=!1)=>{const{modelValue:cr}=t,{lazy:nr,multiple:ur,checkStrictly:ar}=y.value,gr=!ar;if(!(!k.value||n||!dr&&isEqual(cr,$.value)))if(nr&&!or){const yr=unique(flattenDeep(castArray(cr))).map(Sr=>i==null?void 0:i.getNodeByValue(Sr)).filter(Sr=>!!Sr&&!Sr.loaded&&!Sr.loading);yr.length?yr.forEach(Sr=>{ie(Sr,()=>kt(!1,dr))}):kt(!0,dr)}else{const pr=ur?castArray(cr):[cr],yr=unique(pr.map(Sr=>i==null?void 0:i.getNodeByValue(Sr,gr)));Et(yr,dr),$.value=cloneDeep(cr)}},Et=(or,dr=!0)=>{const{checkStrictly:cr}=y.value,nr=re.value,ur=or.filter(pr=>!!pr&&(cr||pr.isLeaf)),ar=i==null?void 0:i.getSameNode(z.value),gr=dr&&ar||ur[0];gr?gr.pathNodes.forEach(pr=>ae(pr,!0)):z.value=null,nr.forEach(pr=>pr.doCheck(!1)),reactive(ur).forEach(pr=>pr.doCheck(!0)),re.value=ur,nextTick(lr)},lr=()=>{isClient&&L.value.forEach(or=>{const dr=or==null?void 0:or.$el;if(dr){const cr=dr.querySelector(`.${g.namespace.value}-scrollbar__wrap`),nr=dr.querySelector(`.${g.b("node")}.${g.is("active")}`)||dr.querySelector(`.${g.b("node")}.in-active-path`);scrollIntoView(cr,nr)}})},tr=or=>{const dr=or.target,{code:cr}=or;switch(cr){case EVENT_CODE.up:case EVENT_CODE.down:{or.preventDefault();const nr=cr===EVENT_CODE.up?-1:1;focusNode(getSibling(dr,nr,`.${g.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{or.preventDefault();const nr=L.value[getMenuIndex(dr)-1],ur=nr==null?void 0:nr.$el.querySelector(`.${g.b("node")}[aria-expanded="true"]`);focusNode(ur);break}case EVENT_CODE.right:{or.preventDefault();const nr=L.value[getMenuIndex(dr)+1],ur=nr==null?void 0:nr.$el.querySelector(`.${g.b("node")}[tabindex="-1"]`);focusNode(ur);break}case EVENT_CODE.enter:checkNode(dr);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:y,expandingNode:z,checkedNodes:re,isHoverMenu:oe,initialLoaded:k,renderLabelFn:le,lazyLoad:ie,expandNode:ae,handleCheckChange:Fe})),watch([y,()=>t.options],ue,{deep:!0,immediate:!0}),watch(()=>t.modelValue,()=>{n=!1,kt()},{deep:!0}),watch(()=>$.value,or=>{isEqual(or,t.modelValue)||(r(UPDATE_MODEL_EVENT,or),r(CHANGE_EVENT,or))}),onBeforeUpdate(()=>L.value=[]),onMounted(()=>!isEmpty(t.modelValue)&&kt()),{ns:g,menuList:L,menus:V,checkedNodes:re,handleKeyDown:tr,handleCheckChange:Fe,getFlattedNodes:Ne,getCheckedNodes:Ve,clearCheckedNodes:ze,calculateCheckedValue:jt,scrollToExpandingNode:lr}}});function _sfc_render$a(t,r,e,n,g,y){const i=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:r[0]||(r[0]=(...k)=>t.handleKeyDown&&t.handleKeyDown(...k))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.menus,(k,L)=>(openBlock(),createBlock(i,{key:L,ref_for:!0,ref:$=>t.menuList[L]=$,index:L,nodes:[...k]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc$1(_sfc_main$S,[["render",_sfc_render$a],["__file","index.vue"]]);CascaderPanel.install=t=>{t.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,tagProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:componentSizes},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},__default__$s=defineComponent({name:"ElTag"}),_sfc_main$R=defineComponent({...__default__$s,props:tagProps,emits:tagEmits,setup(t,{emit:r}){const e=t,n=useFormSize(),g=useNamespace("tag"),y=computed(()=>{const{type:L,hit:$,effect:V,closable:z,round:re}=e;return[g.b(),g.is("closable",z),g.m(L||"primary"),g.m(n.value),g.m(V),g.is("hit",$),g.is("round",re)]}),i=L=>{r("close",L)},k=L=>{r("click",L)};return(L,$)=>L.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(y)),style:normalizeStyle({backgroundColor:L.color}),onClick:k},[createBaseVNode("span",{class:normalizeClass(unref(g).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("close")),onClick:withModifiers(i,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(g).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(y)),style:normalizeStyle({backgroundColor:L.color}),onClick:k},[createBaseVNode("span",{class:normalizeClass(unref(g).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("close")),onClick:withModifiers(i,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag=_export_sfc$1(_sfc_main$R,[["__file","tag.vue"]]);const ElTag=withInstall(Tag),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(t,r)=>t.text.includes(r)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},...useEmptyValuesProps}),cascaderEmits={[UPDATE_MODEL_EVENT]:t=>!0,[CHANGE_EVENT]:t=>!0,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>isBoolean$1(t),expandChange:t=>!!t,removeTag:t=>!!t},_hoisted_1$v={key:0},_hoisted_2$k=["placeholder","onKeydown"],_hoisted_3$c=["onClick"],COMPONENT_NAME$6="ElCascader",__default__$r=defineComponent({name:COMPONENT_NAME$6}),_sfc_main$Q=defineComponent({...__default__$r,props:cascaderProps,emits:cascaderEmits,setup(t,{expose:r,emit:e}){const n=t,g={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:An})=>{const{modifiersData:to,placement:uo}=An;["right","left","bottom","top"].includes(uo)||(to.arrow.x=35)},requires:["arrow"]}]},y=useAttrs$1();let i=0,k=0;const L=useNamespace("cascader"),$=useNamespace("input"),{t:V}=useLocale(),{form:z,formItem:re}=useFormItem(),{valueOnClear:oe}=useEmptyValues(n),le=ref(null),ue=ref(null),ie=ref(null),ae=ref(null),Fe=ref(null),de=ref(!1),Ne=ref(!1),Ve=ref(!1),ze=ref(!1),jt=ref(""),kt=ref(""),Et=ref([]),lr=ref([]),tr=ref([]),or=ref(!1),dr=computed(()=>y.style),cr=computed(()=>n.disabled||(z==null?void 0:z.disabled)),nr=computed(()=>n.placeholder||V("el.cascader.placeholder")),ur=computed(()=>kt.value||Et.value.length>0||or.value?"":nr.value),ar=useFormSize(),gr=computed(()=>["small"].includes(ar.value)?"small":"default"),pr=computed(()=>!!n.props.multiple),yr=computed(()=>!n.filterable||pr.value),Sr=computed(()=>pr.value?kt.value:jt.value),wr=computed(()=>{var An;return((An=ae.value)==null?void 0:An.checkedNodes)||[]}),Mr=computed(()=>!n.clearable||cr.value||Ve.value||!Ne.value?!1:!!wr.value.length),mr=computed(()=>{const{showAllLevels:An,separator:to}=n,uo=wr.value;return uo.length?pr.value?"":uo[0].calcText(An,to):""}),_r=computed(()=>(re==null?void 0:re.validateState)||""),Nr=computed({get(){return cloneDeep(n.modelValue)},set(An){const to=An||oe.value;e(UPDATE_MODEL_EVENT,to),e(CHANGE_EVENT,to),n.validateEvent&&(re==null||re.validate("change").catch(uo=>void 0))}}),Pr=computed(()=>[L.b(),L.m(ar.value),L.is("disabled",cr.value),y.class]),sr=computed(()=>[$.e("icon"),"icon-arrow-down",L.is("reverse",de.value)]),Ir=computed(()=>L.is("focus",de.value||ze.value)),Ar=computed(()=>{var An,to;return(to=(An=le.value)==null?void 0:An.popperRef)==null?void 0:to.contentRef}),Cr=An=>{var to,uo,Eo;cr.value||(An=An??!de.value,An!==de.value&&(de.value=An,(uo=(to=ue.value)==null?void 0:to.input)==null||uo.setAttribute("aria-expanded",`${An}`),An?(br(),nextTick((Eo=ae.value)==null?void 0:Eo.scrollToExpandingNode)):n.filterable&&Zr(),e("visibleChange",An)))},br=()=>{nextTick(()=>{var An;(An=le.value)==null||An.updatePopper()})},vr=()=>{Ve.value=!1},Tr=An=>{const{showAllLevels:to,separator:uo}=n;return{node:An,key:An.uid,text:An.calcText(to,uo),hitState:!1,closable:!cr.value&&!An.isDisabled,isCollapseTag:!1}},Br=An=>{var to;const uo=An.node;uo.doCheck(!1),(to=ae.value)==null||to.calculateCheckedValue(),e("removeTag",uo.valueByOption)},Lr=()=>{if(!pr.value)return;const An=wr.value,to=[],uo=[];if(An.forEach(Eo=>uo.push(Tr(Eo))),lr.value=uo,An.length){An.slice(0,n.maxCollapseTags).forEach($o=>to.push(Tr($o)));const Eo=An.slice(n.maxCollapseTags),Oo=Eo.length;Oo&&(n.collapseTags?to.push({key:-1,text:`+ ${Oo}`,closable:!1,isCollapseTag:!0}):Eo.forEach($o=>to.push(Tr($o))))}Et.value=to},Fr=()=>{var An,to;const{filterMethod:uo,showAllLevels:Eo,separator:Oo}=n,$o=(to=(An=ae.value)==null?void 0:An.getFlattedNodes(!n.props.checkStrictly))==null?void 0:to.filter(ua=>ua.isDisabled?!1:(ua.calcText(Eo,Oo),uo(ua,Sr.value)));pr.value&&(Et.value.forEach(ua=>{ua.hitState=!1}),lr.value.forEach(ua=>{ua.hitState=!1})),Ve.value=!0,tr.value=$o,br()},qr=()=>{var An;let to;Ve.value&&Fe.value?to=Fe.value.$el.querySelector(`.${L.e("suggestion-item")}`):to=(An=ae.value)==null?void 0:An.$el.querySelector(`.${L.b("node")}[tabindex="-1"]`),to&&(to.focus(),!Ve.value&&to.click())},Vr=()=>{var An,to;const uo=(An=ue.value)==null?void 0:An.input,Eo=ie.value,Oo=(to=Fe.value)==null?void 0:to.$el;if(!(!isClient||!uo)){if(Oo){const $o=Oo.querySelector(`.${L.e("suggestion-list")}`);$o.style.minWidth=`${uo.offsetWidth}px`}if(Eo){const{offsetHeight:$o}=Eo,ua=Et.value.length>0?`${Math.max($o+6,i)}px`:`${i}px`;uo.style.height=ua,br()}}},Qr=An=>{var to;return(to=ae.value)==null?void 0:to.getCheckedNodes(An)},Sn=An=>{br(),e("expandChange",An)},Mn=An=>{var to;const uo=(to=An.target)==null?void 0:to.value;if(An.type==="compositionend")or.value=!1,nextTick(()=>oo(uo));else{const Eo=uo[uo.length-1]||"";or.value=!isKorean(Eo)}},Xr=An=>{if(!or.value)switch(An.code){case EVENT_CODE.enter:Cr();break;case EVENT_CODE.down:Cr(!0),nextTick(qr),An.preventDefault();break;case EVENT_CODE.esc:de.value===!0&&(An.preventDefault(),An.stopPropagation(),Cr(!1));break;case EVENT_CODE.tab:Cr(!1);break}},Wn=()=>{var An;(An=ae.value)==null||An.clearCheckedNodes(),!de.value&&n.filterable&&Zr(),Cr(!1)},Zr=()=>{const{value:An}=mr;jt.value=An,kt.value=An},En=An=>{var to,uo;const{checked:Eo}=An;pr.value?(to=ae.value)==null||to.handleCheckChange(An,!Eo,!1):(!Eo&&((uo=ae.value)==null||uo.handleCheckChange(An,!0,!1)),Cr(!1))},Jr=An=>{const to=An.target,{code:uo}=An;switch(uo){case EVENT_CODE.up:case EVENT_CODE.down:{const Eo=uo===EVENT_CODE.up?-1:1;focusNode(getSibling(to,Eo,`.${L.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:to.click();break}},kn=()=>{const An=Et.value,to=An[An.length-1];k=kt.value?0:k+1,!(!to||!k||n.collapseTags&&An.length>1)&&(to.hitState?Br(to):to.hitState=!0)},Un=An=>{const to=An.target,uo=L.e("search-input");to.className===uo&&(ze.value=!0),e("focus",An)},wn=An=>{ze.value=!1,e("blur",An)},Pn=debounce(()=>{const{value:An}=Sr;if(!An)return;const to=n.beforeFilter(An);isPromise(to)?to.then(Fr).catch(()=>{}):to!==!1?Fr():vr()},n.debounce),oo=(An,to)=>{!de.value&&Cr(!0),!(to!=null&&to.isComposing)&&(An?Pn():vr())},Rn=An=>Number.parseFloat(useCssVar($.cssVarName("input-height"),An).value)-2;return watch(Ve,br),watch([wr,cr],Lr),watch(Et,()=>{nextTick(()=>Vr())}),watch(ar,async()=>{await nextTick();const An=ue.value.input;i=Rn(An)||i,Vr()}),watch(mr,Zr,{immediate:!0}),onMounted(()=>{const An=ue.value.input,to=Rn(An);i=An.offsetHeight||to,useResizeObserver(An,Vr)}),r({getCheckedNodes:Qr,cascaderPanelRef:ae,togglePopperVisible:Cr,contentRef:Ar}),(An,to)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:le,visible:de.value,teleported:An.teleported,"popper-class":[unref(L).e("dropdown"),An.popperClass],"popper-options":g,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref(L).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:vr},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(Pr)),style:normalizeStyle(unref(dr)),onClick:to[5]||(to[5]=()=>Cr(unref(yr)?void 0:!0)),onKeydown:Xr,onMouseenter:to[6]||(to[6]=uo=>Ne.value=!0),onMouseleave:to[7]||(to[7]=uo=>Ne.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:ue,modelValue:jt.value,"onUpdate:modelValue":to[1]||(to[1]=uo=>jt.value=uo),placeholder:unref(ur),readonly:unref(yr),disabled:unref(cr),"validate-event":!1,size:unref(ar),class:normalizeClass(unref(Ir)),tabindex:unref(pr)&&An.filterable&&!unref(cr)?-1:void 0,onCompositionstart:Mn,onCompositionupdate:Mn,onCompositionend:Mn,onFocus:Un,onBlur:wn,onInput:oo},{suffix:withCtx(()=>[unref(Mr)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref($).e("icon"),"icon-circle-close"]),onClick:withModifiers(Wn,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(sr)),onClick:to[0]||(to[0]=withModifiers(uo=>Cr(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(pr)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:ie,class:normalizeClass([unref(L).e("tags"),unref(L).is("validate",!!unref(_r))])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Et.value,uo=>(openBlock(),createBlock(unref(ElTag),{key:uo.key,type:An.tagType,size:unref(gr),hit:uo.hitState,closable:uo.closable,"disable-transitions":"",onClose:Eo=>Br(uo)},{default:withCtx(()=>[uo.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$v,toDisplayString(uo.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:de.value||!An.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(uo.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(L).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(lr.value.slice(An.maxCollapseTags),(Eo,Oo)=>(openBlock(),createElementBlock("div",{key:Oo,class:normalizeClass(unref(L).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:Eo.key,class:"in-tooltip",type:An.tagType,size:unref(gr),hit:Eo.hitState,closable:Eo.closable,"disable-transitions":"",onClose:$o=>Br(Eo)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Eo.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),An.filterable&&!unref(cr)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":to[2]||(to[2]=uo=>kt.value=uo),type:"text",class:normalizeClass(unref(L).e("search-input")),placeholder:unref(mr)?"":unref(nr),onInput:to[3]||(to[3]=uo=>oo(kt.value,uo)),onClick:to[4]||(to[4]=withModifiers(uo=>Cr(!0),["stop"])),onKeydown:withKeys(kn,["delete"]),onCompositionstart:Mn,onCompositionupdate:Mn,onCompositionend:Mn,onFocus:Un,onBlur:wn},null,42,_hoisted_2$k)),[[vModelText,kt.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>Cr(!1),unref(Ar)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:ae,modelValue:unref(Nr),"onUpdate:modelValue":to[8]||(to[8]=uo=>isRef(Nr)?Nr.value=uo:null),options:An.options,props:n.props,border:!1,"render-label":An.$slots.default,onExpandChange:Sn,onClose:to[9]||(to[9]=uo=>An.$nextTick(()=>Cr(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!Ve.value]]),An.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:Fe,tag:"ul",class:normalizeClass(unref(L).e("suggestion-panel")),"view-class":unref(L).e("suggestion-list"),onKeydown:Jr},{default:withCtx(()=>[tr.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(tr.value,uo=>(openBlock(),createElementBlock("li",{key:uo.uid,class:normalizeClass([unref(L).e("suggestion-item"),unref(L).is("checked",uo.checked)]),tabindex:-1,onClick:Eo=>En(uo)},[createBaseVNode("span",null,toDisplayString(uo.text),1),uo.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$c))),128)):renderSlot(An.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(L).e("empty-text"))},toDisplayString(unref(V)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Ve.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc$1(_sfc_main$Q,[["__file","cascader.vue"]]);Cascader.install=t=>{t.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$q=defineComponent({name:"ElRow"}),_sfc_main$P=defineComponent({...__default__$q,props:rowProps,setup(t){const r=t,e=useNamespace("row"),n=computed(()=>r.gutter);provide(rowContextKey,{gutter:n});const g=computed(()=>{const i={};return r.gutter&&(i.marginRight=i.marginLeft=`-${r.gutter/2}px`),i}),y=computed(()=>[e.b(),e.is(`justify-${r.justify}`,r.justify!=="start"),e.is(`align-${r.align}`,!!r.align)]);return(i,k)=>(openBlock(),createBlock(resolveDynamicComponent(i.tag),{class:normalizeClass(unref(y)),style:normalizeStyle(unref(g))},{default:withCtx(()=>[renderSlot(i.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc$1(_sfc_main$P,[["__file","row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$p=defineComponent({name:"ElCol"}),_sfc_main$O=defineComponent({...__default__$p,props:colProps,setup(t){const r=t,{gutter:e}=inject(rowContextKey,{gutter:computed(()=>0)}),n=useNamespace("col"),g=computed(()=>{const i={};return e.value&&(i.paddingLeft=i.paddingRight=`${e.value/2}px`),i}),y=computed(()=>{const i=[];return["span","offset","pull","push"].forEach($=>{const V=r[$];isNumber$1(V)&&($==="span"?i.push(n.b(`${r[$]}`)):V>0&&i.push(n.b(`${$}-${r[$]}`)))}),["xs","sm","md","lg","xl"].forEach($=>{isNumber$1(r[$])?i.push(n.b(`${$}-${r[$]}`)):isObject$2(r[$])&&Object.entries(r[$]).forEach(([V,z])=>{i.push(V!=="span"?n.b(`${$}-${V}-${z}`):n.b(`${$}-${z}`))})}),e.value&&i.push(n.is("guttered")),[n.b(),i]});return(i,k)=>(openBlock(),createBlock(resolveDynamicComponent(i.tag),{class:normalizeClass(unref(y)),style:normalizeStyle(unref(g))},{default:withCtx(()=>[renderSlot(i.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc$1(_sfc_main$O,[["__file","col.vue"]]);const ElCol=withInstall(Col),__default__$o=defineComponent({name:"ElCollapseTransition"}),_sfc_main$N=defineComponent({...__default__$o,setup(t){const r=useNamespace("collapse-transition"),e=g=>{g.style.maxHeight="",g.style.overflow=g.dataset.oldOverflow,g.style.paddingTop=g.dataset.oldPaddingTop,g.style.paddingBottom=g.dataset.oldPaddingBottom},n={beforeEnter(g){g.dataset||(g.dataset={}),g.dataset.oldPaddingTop=g.style.paddingTop,g.dataset.oldPaddingBottom=g.style.paddingBottom,g.style.height&&(g.dataset.elExistsHeight=g.style.height),g.style.maxHeight=0,g.style.paddingTop=0,g.style.paddingBottom=0},enter(g){requestAnimationFrame(()=>{g.dataset.oldOverflow=g.style.overflow,g.dataset.elExistsHeight?g.style.maxHeight=g.dataset.elExistsHeight:g.scrollHeight!==0?g.style.maxHeight=`${g.scrollHeight}px`:g.style.maxHeight=0,g.style.paddingTop=g.dataset.oldPaddingTop,g.style.paddingBottom=g.dataset.oldPaddingBottom,g.style.overflow="hidden"})},afterEnter(g){g.style.maxHeight="",g.style.overflow=g.dataset.oldOverflow},enterCancelled(g){e(g)},beforeLeave(g){g.dataset||(g.dataset={}),g.dataset.oldPaddingTop=g.style.paddingTop,g.dataset.oldPaddingBottom=g.style.paddingBottom,g.dataset.oldOverflow=g.style.overflow,g.style.maxHeight=`${g.scrollHeight}px`,g.style.overflow="hidden"},leave(g){g.scrollHeight!==0&&(g.style.maxHeight=0,g.style.paddingTop=0,g.style.paddingBottom=0)},afterLeave(g){e(g)},leaveCancelled(g){e(g)}};return(g,y)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(r).b()},toHandlers(n)),{default:withCtx(()=>[renderSlot(g.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc$1(_sfc_main$N,[["__file","collapse-transition.vue"]]);CollapseTransition.install=t=>{t.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,__default__$n=defineComponent({name:"ElContainer"}),_sfc_main$M=defineComponent({...__default__$n,props:{direction:{type:String}},setup(t){const r=t,e=useSlots(),n=useNamespace("container"),g=computed(()=>r.direction==="vertical"?!0:r.direction==="horizontal"?!1:e&&e.default?e.default().some(i=>{const k=i.type.name;return k==="ElHeader"||k==="ElFooter"}):!1);return(y,i)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(n).b(),unref(n).is("vertical",unref(g))])},[renderSlot(y.$slots,"default")],2))}});var Container=_export_sfc$1(_sfc_main$M,[["__file","container.vue"]]);const __default__$m=defineComponent({name:"ElAside"}),_sfc_main$L=defineComponent({...__default__$m,props:{width:{type:String,default:null}},setup(t){const r=t,e=useNamespace("aside"),n=computed(()=>r.width?e.cssVarBlock({width:r.width}):{});return(g,y)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Aside=_export_sfc$1(_sfc_main$L,[["__file","aside.vue"]]);const __default__$l=defineComponent({name:"ElFooter"}),_sfc_main$K=defineComponent({...__default__$l,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("footer"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(g,y)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Footer=_export_sfc$1(_sfc_main$K,[["__file","footer.vue"]]);const __default__$k=defineComponent({name:"ElHeader"}),_sfc_main$J=defineComponent({...__default__$k,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("header"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(g,y)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Header=_export_sfc$1(_sfc_main$J,[["__file","header.vue"]]);const __default__$j=defineComponent({name:"ElMain"}),_sfc_main$I=defineComponent({...__default__$j,setup(t){const r=useNamespace("main");return(e,n)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(r).b())},[renderSlot(e.$slots,"default")],2))}});var Main=_export_sfc$1(_sfc_main$I,[["__file","main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer,Header,Main}),ElAside=withNoopInstall(Aside);withNoopInstall(Footer);withNoopInstall(Header);const ElMain=withNoopInstall(Main),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:t=>t instanceof MouseEvent},BLOCK="overlay";var Overlay=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(t,{slots:r,emit:e}){const n=useNamespace(BLOCK),g=L=>{e("click",L)},{onClick:y,onMousedown:i,onMouseup:k}=useSameTarget(t.customMaskEvent?void 0:g);return()=>t.mask?createVNode("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:y,onMousedown:i,onMouseup:k},[renderSlot(r,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h$1("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(r,"default")])}});const ElOverlay=Overlay,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$u=["aria-level"],_hoisted_2$j=["aria-label"],_hoisted_3$b=["id"],__default__$i=defineComponent({name:"ElDialogContent"}),_sfc_main$H=defineComponent({...__default__$i,props:dialogContentProps,emits:dialogContentEmits,setup(t){const r=t,{t:e}=useLocale(),{Close:n}=CloseComponents,{dialogRef:g,headerRef:y,bodyId:i,ns:k,style:L}=inject(dialogInjectionKey),{focusTrapRef:$}=inject(FOCUS_TRAP_INJECTION_KEY),V=computed(()=>[k.b(),k.is("fullscreen",r.fullscreen),k.is("draggable",r.draggable),k.is("align-center",r.alignCenter),{[k.m("center")]:r.center}]),z=composeRefs($,g),re=computed(()=>r.draggable),oe=computed(()=>r.overflow);return useDraggable(g,y,re,oe),(le,ue)=>(openBlock(),createElementBlock("div",{ref:unref(z),class:normalizeClass(unref(V)),style:normalizeStyle(unref(L)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:y,class:normalizeClass([unref(k).e("header"),{"show-close":le.showClose}])},[renderSlot(le.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":le.ariaLevel,class:normalizeClass(unref(k).e("title"))},toDisplayString(le.title),11,_hoisted_1$u)]),le.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(e)("el.dialog.close"),class:normalizeClass(unref(k).e("headerbtn")),type:"button",onClick:ue[0]||(ue[0]=ie=>le.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(k).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.closeIcon||unref(n))))]),_:1},8,["class"])],10,_hoisted_2$j)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref(i),class:normalizeClass(unref(k).e("body"))},[renderSlot(le.$slots,"default")],10,_hoisted_3$b),le.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(k).e("footer"))},[renderSlot(le.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc$1(_sfc_main$H,[["__file","dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,appendTo:{type:definePropType(String),default:"body"},beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(t,r)=>{var e;const g=getCurrentInstance().emit,{nextZIndex:y}=useZIndex();let i="";const k=useId(),L=useId(),$=ref(!1),V=ref(!1),z=ref(!1),re=ref((e=t.zIndex)!=null?e:y());let oe,le;const ue=useGlobalConfig("namespace",defaultNamespace),ie=computed(()=>{const nr={},ur=`--${ue.value}-dialog`;return t.fullscreen||(t.top&&(nr[`${ur}-margin-top`]=t.top),t.width&&(nr[`${ur}-width`]=addUnit(t.width))),nr}),ae=computed(()=>t.alignCenter?{display:"flex"}:{});function Fe(){g("opened")}function de(){g("closed"),g(UPDATE_MODEL_EVENT,!1),t.destroyOnClose&&(z.value=!1)}function Ne(){g("close")}function Ve(){le==null||le(),oe==null||oe(),t.openDelay&&t.openDelay>0?{stop:oe}=useTimeoutFn(()=>Et(),t.openDelay):Et()}function ze(){oe==null||oe(),le==null||le(),t.closeDelay&&t.closeDelay>0?{stop:le}=useTimeoutFn(()=>lr(),t.closeDelay):lr()}function jt(){function nr(ur){ur||(V.value=!0,$.value=!1)}t.beforeClose?t.beforeClose(nr):ze()}function kt(){t.closeOnClickModal&&jt()}function Et(){isClient&&($.value=!0)}function lr(){$.value=!1}function tr(){g("openAutoFocus")}function or(){g("closeAutoFocus")}function dr(nr){var ur;((ur=nr.detail)==null?void 0:ur.focusReason)==="pointer"&&nr.preventDefault()}t.lockScroll&&useLockscreen($);function cr(){t.closeOnPressEscape&&jt()}return watch(()=>t.modelValue,nr=>{nr?(V.value=!1,Ve(),z.value=!0,re.value=isUndefined$2(t.zIndex)?y():re.value++,nextTick(()=>{g("open"),r.value&&(r.value.scrollTop=0)})):$.value&&ze()}),watch(()=>t.fullscreen,nr=>{r.value&&(nr?(i=r.value.style.transform,r.value.style.transform=""):r.value.style.transform=i)}),onMounted(()=>{t.modelValue&&($.value=!0,z.value=!0,Ve())}),{afterEnter:Fe,afterLeave:de,beforeLeave:Ne,handleClose:jt,onModalClick:kt,close:ze,doClose:lr,onOpenAutoFocus:tr,onCloseAutoFocus:or,onCloseRequested:cr,onFocusoutPrevented:dr,titleId:k,bodyId:L,closed:V,style:ie,overlayDialogStyle:ae,rendered:z,visible:$,zIndex:re}},_hoisted_1$t=["aria-label","aria-labelledby","aria-describedby"],__default__$h=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$G=defineComponent({...__default__$h,props:dialogProps,emits:dialogEmits,setup(t,{expose:r}){const e=t,n=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!n.title));const g=useNamespace("dialog"),y=ref(),i=ref(),k=ref(),{visible:L,titleId:$,bodyId:V,style:z,overlayDialogStyle:re,rendered:oe,zIndex:le,afterEnter:ue,afterLeave:ie,beforeLeave:ae,handleClose:Fe,onModalClick:de,onOpenAutoFocus:Ne,onCloseAutoFocus:Ve,onCloseRequested:ze,onFocusoutPrevented:jt}=useDialog(e,y);provide(dialogInjectionKey,{dialogRef:y,headerRef:i,bodyId:V,ns:g,rendered:oe,style:z});const kt=useSameTarget(de),Et=computed(()=>e.draggable&&!e.fullscreen);return r({visible:L,dialogContentRef:k}),(lr,tr)=>(openBlock(),createBlock(Teleport,{to:lr.appendTo,disabled:lr.appendTo!=="body"?!1:!lr.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(ue),onAfterLeave:unref(ie),onBeforeLeave:unref(ae),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:lr.modal,"overlay-class":lr.modalClass,"z-index":unref(le)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":lr.title||void 0,"aria-labelledby":lr.title?void 0:unref($),"aria-describedby":unref(V),class:normalizeClass(`${unref(g).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(re)),onClick:tr[0]||(tr[0]=(...or)=>unref(kt).onClick&&unref(kt).onClick(...or)),onMousedown:tr[1]||(tr[1]=(...or)=>unref(kt).onMousedown&&unref(kt).onMousedown(...or)),onMouseup:tr[2]||(tr[2]=(...or)=>unref(kt).onMouseup&&unref(kt).onMouseup(...or))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(L),"focus-start-el":"container",onFocusAfterTrapped:unref(Ne),onFocusAfterReleased:unref(Ve),onFocusoutPrevented:unref(jt),onReleaseRequested:unref(ze)},{default:withCtx(()=>[unref(oe)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:k},lr.$attrs,{center:lr.center,"align-center":lr.alignCenter,"close-icon":lr.closeIcon,draggable:unref(Et),overflow:lr.overflow,fullscreen:lr.fullscreen,"show-close":lr.showClose,title:lr.title,"aria-level":lr.headerAriaLevel,onClose:unref(Fe)}),createSlots({header:withCtx(()=>[lr.$slots.title?renderSlot(lr.$slots,"title",{key:1}):renderSlot(lr.$slots,"header",{key:0,close:unref(Fe),titleId:unref($),titleClass:unref(g).e("title")})]),default:withCtx(()=>[renderSlot(lr.$slots,"default")]),_:2},[lr.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(lr.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$t)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(L)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Dialog=_export_sfc$1(_sfc_main$G,[["__file","dialog.vue"]]);const ElDialog=withInstall(Dialog),dividerProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:definePropType(String),default:"solid"}}),__default__$g=defineComponent({name:"ElDivider"}),_sfc_main$F=defineComponent({...__default__$g,props:dividerProps,setup(t){const r=t,e=useNamespace("divider"),n=computed(()=>e.cssVar({"border-style":r.borderStyle}));return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(e).b(),unref(e).m(g.direction)]),style:normalizeStyle(unref(n)),role:"separator"},[g.$slots.default&&g.direction!=="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(e).e("text"),unref(e).is(g.contentPosition)])},[renderSlot(g.$slots,"default")],2)):createCommentVNode("v-if",!0)],6))}});var Divider=_export_sfc$1(_sfc_main$F,[["__file","divider.vue"]]);const ElDivider=withInstall(Divider),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageViewerEmits={close:()=>!0,switch:t=>isNumber$1(t),rotate:t=>isNumber$1(t)},_hoisted_1$s=["src","crossorigin"],__default__$f=defineComponent({name:"ElImageViewer"}),_sfc_main$E=defineComponent({...__default__$f,props:imageViewerProps,emits:imageViewerEmits,setup(t,{expose:r,emit:e}){var n;const g=t,y={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:i}=useLocale(),k=useNamespace("image-viewer"),{nextZIndex:L}=useZIndex(),$=ref(),V=ref([]),z=effectScope(),re=ref(!0),oe=ref(g.initialIndex),le=shallowRef(y.CONTAIN),ue=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ie=ref((n=g.zIndex)!=null?n:L()),ae=computed(()=>{const{urlList:yr}=g;return yr.length<=1}),Fe=computed(()=>oe.value===0),de=computed(()=>oe.value===g.urlList.length-1),Ne=computed(()=>g.urlList[oe.value]),Ve=computed(()=>[k.e("btn"),k.e("prev"),k.is("disabled",!g.infinite&&Fe.value)]),ze=computed(()=>[k.e("btn"),k.e("next"),k.is("disabled",!g.infinite&&de.value)]),jt=computed(()=>{const{scale:yr,deg:Sr,offsetX:wr,offsetY:Mr,enableTransition:mr}=ue.value;let _r=wr/yr,Nr=Mr/yr;switch(Sr%360){case 90:case-270:[_r,Nr]=[Nr,-_r];break;case 180:case-180:[_r,Nr]=[-_r,-Nr];break;case 270:case-90:[_r,Nr]=[-Nr,_r];break}const Pr={transform:`scale(${yr}) rotate(${Sr}deg) translate(${_r}px, ${Nr}px)`,transition:mr?"transform .3s":""};return le.value.name===y.CONTAIN.name&&(Pr.maxWidth=Pr.maxHeight="100%"),Pr});function kt(){lr(),e("close")}function Et(){const yr=throttle$1(wr=>{switch(wr.code){case EVENT_CODE.esc:g.closeOnPressEscape&&kt();break;case EVENT_CODE.space:nr();break;case EVENT_CODE.left:ar();break;case EVENT_CODE.up:pr("zoomIn");break;case EVENT_CODE.right:gr();break;case EVENT_CODE.down:pr("zoomOut");break}}),Sr=throttle$1(wr=>{const Mr=wr.deltaY||wr.deltaX;pr(Mr<0?"zoomIn":"zoomOut",{zoomRate:g.zoomRate,enableTransition:!1})});z.run(()=>{useEventListener(document,"keydown",yr),useEventListener(document,"wheel",Sr)})}function lr(){z.stop()}function tr(){re.value=!1}function or(yr){re.value=!1,yr.target.alt=i("el.image.error")}function dr(yr){if(re.value||yr.button!==0||!$.value)return;ue.value.enableTransition=!1;const{offsetX:Sr,offsetY:wr}=ue.value,Mr=yr.pageX,mr=yr.pageY,_r=throttle$1(Pr=>{ue.value={...ue.value,offsetX:Sr+Pr.pageX-Mr,offsetY:wr+Pr.pageY-mr}}),Nr=useEventListener(document,"mousemove",_r);useEventListener(document,"mouseup",()=>{Nr()}),yr.preventDefault()}function cr(){ue.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function nr(){if(re.value)return;const yr=keysOf(y),Sr=Object.values(y),wr=le.value.name,mr=(Sr.findIndex(_r=>_r.name===wr)+1)%yr.length;le.value=y[yr[mr]],cr()}function ur(yr){const Sr=g.urlList.length;oe.value=(yr+Sr)%Sr}function ar(){Fe.value&&!g.infinite||ur(oe.value-1)}function gr(){de.value&&!g.infinite||ur(oe.value+1)}function pr(yr,Sr={}){if(re.value)return;const{minScale:wr,maxScale:Mr}=g,{zoomRate:mr,rotateDeg:_r,enableTransition:Nr}={zoomRate:g.zoomRate,rotateDeg:90,enableTransition:!0,...Sr};switch(yr){case"zoomOut":ue.value.scale>wr&&(ue.value.scale=Number.parseFloat((ue.value.scale/mr).toFixed(3)));break;case"zoomIn":ue.value.scale<Mr&&(ue.value.scale=Number.parseFloat((ue.value.scale*mr).toFixed(3)));break;case"clockwise":ue.value.deg+=_r,e("rotate",ue.value.deg);break;case"anticlockwise":ue.value.deg-=_r,e("rotate",ue.value.deg);break}ue.value.enableTransition=Nr}return watch(Ne,()=>{nextTick(()=>{const yr=V.value[0];yr!=null&&yr.complete||(re.value=!0)})}),watch(oe,yr=>{cr(),e("switch",yr)}),onMounted(()=>{var yr,Sr;Et(),(Sr=(yr=$.value)==null?void 0:yr.focus)==null||Sr.call(yr)}),r({setActiveItem:ur}),(yr,Sr)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!yr.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:$,tabindex:-1,class:normalizeClass(unref(k).e("wrapper")),style:normalizeStyle({zIndex:ie.value})},[createBaseVNode("div",{class:normalizeClass(unref(k).e("mask")),onClick:Sr[0]||(Sr[0]=withModifiers(wr=>yr.hideOnClickModal&&kt(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(k).e("btn"),unref(k).e("close")]),onClick:kt},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(ae)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(Ve)),onClick:ar},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(ze)),onClick:gr},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(k).e("btn"),unref(k).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(k).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:Sr[1]||(Sr[1]=wr=>pr("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:Sr[2]||(Sr[2]=wr=>pr("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(k).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:nr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(le).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(k).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:Sr[3]||(Sr[3]=wr=>pr("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:Sr[4]||(Sr[4]=wr=>pr("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(k).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(yr.urlList,(wr,Mr)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:mr=>V.value[Mr]=mr,key:wr,src:wr,style:normalizeStyle(unref(jt)),class:normalizeClass(unref(k).e("img")),crossorigin:yr.crossorigin,onLoad:tr,onError:or,onMousedown:dr},null,46,_hoisted_1$s)),[[vShow,Mr===oe.value]])),128))],2),renderSlot(yr.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc$1(_sfc_main$E,[["__file","image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageEmits={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>isNumber$1(t),close:()=>!0,show:()=>!0},_hoisted_1$r=["src","loading","crossorigin"],_hoisted_2$i={key:0},__default__$e=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$D=defineComponent({...__default__$e,props:imageProps,emits:imageEmits,setup(t,{emit:r}){const e=t;let n="";const{t:g}=useLocale(),y=useNamespace("image"),i=useAttrs$1(),k=useAttrs(),L=ref(),$=ref(!1),V=ref(!0),z=ref(!1),re=ref(),oe=ref(),le=isClient&&"loading"in HTMLImageElement.prototype;let ue,ie;const ae=computed(()=>[y.e("inner"),Ne.value&&y.e("preview"),V.value&&y.is("loading")]),Fe=computed(()=>i.style),de=computed(()=>{const{fit:gr}=e;return isClient&&gr?{objectFit:gr}:{}}),Ne=computed(()=>{const{previewSrcList:gr}=e;return Array.isArray(gr)&&gr.length>0}),Ve=computed(()=>{const{previewSrcList:gr,initialIndex:pr}=e;let yr=pr;return pr>gr.length-1&&(yr=0),yr}),ze=computed(()=>e.loading==="eager"?!1:!le&&e.loading==="lazy"||e.lazy),jt=()=>{isClient&&(V.value=!0,$.value=!1,L.value=e.src)};function kt(gr){V.value=!1,$.value=!1,r("load",gr)}function Et(gr){V.value=!1,$.value=!0,r("error",gr)}function lr(){isInContainer(re.value,oe.value)&&(jt(),dr())}const tr=useThrottleFn(lr,200,!0);async function or(){var gr;if(!isClient)return;await nextTick();const{scrollContainer:pr}=e;isElement(pr)?oe.value=pr:isString$2(pr)&&pr!==""?oe.value=(gr=document.querySelector(pr))!=null?gr:void 0:re.value&&(oe.value=getScrollContainer(re.value)),oe.value&&(ue=useEventListener(oe,"scroll",tr),setTimeout(()=>lr(),100))}function dr(){!isClient||!oe.value||!tr||(ue==null||ue(),oe.value=void 0)}function cr(gr){if(gr.ctrlKey){if(gr.deltaY<0)return gr.preventDefault(),!1;if(gr.deltaY>0)return gr.preventDefault(),!1}}function nr(){Ne.value&&(ie=useEventListener("wheel",cr,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",z.value=!0,r("show"))}function ur(){ie==null||ie(),document.body.style.overflow=n,z.value=!1,r("close")}function ar(gr){r("switch",gr)}return watch(()=>e.src,()=>{ze.value?(V.value=!0,$.value=!1,dr(),or()):jt()}),onMounted(()=>{ze.value?or():jt()}),(gr,pr)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:re,class:normalizeClass([unref(y).b(),gr.$attrs.class]),style:normalizeStyle(unref(Fe))},[$.value?renderSlot(gr.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("error"))},toDisplayString(unref(g)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[L.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(k),{src:L.value,loading:gr.loading,style:unref(de),class:unref(ae),crossorigin:gr.crossorigin,onClick:nr,onLoad:kt,onError:Et}),null,16,_hoisted_1$r)):createCommentVNode("v-if",!0),V.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("wrapper"))},[renderSlot(gr.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Ne)?(openBlock(),createElementBlock(Fragment,{key:2},[z.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":gr.zIndex,"initial-index":unref(Ve),infinite:gr.infinite,"zoom-rate":gr.zoomRate,"min-scale":gr.minScale,"max-scale":gr.maxScale,"url-list":gr.previewSrcList,"hide-on-click-modal":gr.hideOnClickModal,teleported:gr.previewTeleported,"close-on-press-escape":gr.closeOnPressEscape,onClose:ur,onSwitch:ar},{default:withCtx(()=>[gr.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$i,[renderSlot(gr.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$1=_export_sfc$1(_sfc_main$D,[["__file","image.vue"]]);const ElImage=withInstall(Image$1),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||isNumber$1(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),inputNumberEmits={[CHANGE_EVENT]:(t,r)=>r!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[INPUT_EVENT]:t=>isNumber$1(t)||isNil(t),[UPDATE_MODEL_EVENT]:t=>isNumber$1(t)||isNil(t)},_hoisted_1$q=["aria-label","onKeydown"],_hoisted_2$h=["aria-label","onKeydown"],__default__$d=defineComponent({name:"ElInputNumber"}),_sfc_main$C=defineComponent({...__default__$d,props:inputNumberProps,emits:inputNumberEmits,setup(t,{expose:r,emit:e}){const n=t,{t:g}=useLocale(),y=useNamespace("input-number"),i=ref(),k=reactive({currentValue:n.modelValue,userInput:null}),{formItem:L}=useFormItem(),$=computed(()=>isNumber$1(n.modelValue)&&n.modelValue<=n.min),V=computed(()=>isNumber$1(n.modelValue)&&n.modelValue>=n.max),z=computed(()=>{const nr=ae(n.step);return isUndefined$1(n.precision)?Math.max(ae(n.modelValue),nr):(nr>n.precision,n.precision)}),re=computed(()=>n.controls&&n.controlsPosition==="right"),oe=useFormSize(),le=useFormDisabled(),ue=computed(()=>{if(k.userInput!==null)return k.userInput;let nr=k.currentValue;if(isNil(nr))return"";if(isNumber$1(nr)){if(Number.isNaN(nr))return"";isUndefined$1(n.precision)||(nr=nr.toFixed(n.precision))}return nr}),ie=(nr,ur)=>{if(isUndefined$1(ur)&&(ur=z.value),ur===0)return Math.round(nr);let ar=String(nr);const gr=ar.indexOf(".");if(gr===-1||!ar.replace(".","").split("")[gr+ur])return nr;const Sr=ar.length;return ar.charAt(Sr-1)==="5"&&(ar=`${ar.slice(0,Math.max(0,Sr-1))}6`),Number.parseFloat(Number(ar).toFixed(ur))},ae=nr=>{if(isNil(nr))return 0;const ur=nr.toString(),ar=ur.indexOf(".");let gr=0;return ar!==-1&&(gr=ur.length-ar-1),gr},Fe=(nr,ur=1)=>isNumber$1(nr)?ie(nr+n.step*ur):k.currentValue,de=()=>{if(n.readonly||le.value||V.value)return;const nr=Number(ue.value)||0,ur=Fe(nr);ze(ur),e(INPUT_EVENT,k.currentValue),dr()},Ne=()=>{if(n.readonly||le.value||$.value)return;const nr=Number(ue.value)||0,ur=Fe(nr,-1);ze(ur),e(INPUT_EVENT,k.currentValue),dr()},Ve=(nr,ur)=>{const{max:ar,min:gr,step:pr,precision:yr,stepStrictly:Sr,valueOnClear:wr}=n;ar<gr&&throwError("InputNumber","min should not be greater than max.");let Mr=Number(nr);if(isNil(nr)||Number.isNaN(Mr))return null;if(nr===""){if(wr===null)return null;Mr=isString$2(wr)?{min:gr,max:ar}[wr]:wr}return Sr&&(Mr=ie(Math.round(Mr/pr)*pr,yr)),isUndefined$1(yr)||(Mr=ie(Mr,yr)),(Mr>ar||Mr<gr)&&(Mr=Mr>ar?ar:gr,ur&&e(UPDATE_MODEL_EVENT,Mr)),Mr},ze=(nr,ur=!0)=>{var ar;const gr=k.currentValue,pr=Ve(nr);if(!ur){e(UPDATE_MODEL_EVENT,pr);return}gr===pr&&nr||(k.userInput=null,e(UPDATE_MODEL_EVENT,pr),gr!==pr&&e(CHANGE_EVENT,pr,gr),n.validateEvent&&((ar=L==null?void 0:L.validate)==null||ar.call(L,"change").catch(yr=>void 0)),k.currentValue=pr)},jt=nr=>{k.userInput=nr;const ur=nr===""?null:Number(nr);e(INPUT_EVENT,ur),ze(ur,!1)},kt=nr=>{const ur=nr!==""?Number(nr):"";(isNumber$1(ur)&&!Number.isNaN(ur)||nr==="")&&ze(ur),dr(),k.userInput=null},Et=()=>{var nr,ur;(ur=(nr=i.value)==null?void 0:nr.focus)==null||ur.call(nr)},lr=()=>{var nr,ur;(ur=(nr=i.value)==null?void 0:nr.blur)==null||ur.call(nr)},tr=nr=>{e("focus",nr)},or=nr=>{var ur;k.userInput=null,e("blur",nr),n.validateEvent&&((ur=L==null?void 0:L.validate)==null||ur.call(L,"blur").catch(ar=>void 0))},dr=()=>{k.currentValue!==n.modelValue&&(k.currentValue=n.modelValue)},cr=nr=>{document.activeElement===nr.target&&nr.preventDefault()};return watch(()=>n.modelValue,(nr,ur)=>{const ar=Ve(nr,!0);k.userInput===null&&ar!==ur&&(k.currentValue=ar)},{immediate:!0}),onMounted(()=>{var nr;const{min:ur,max:ar,modelValue:gr}=n,pr=(nr=i.value)==null?void 0:nr.input;if(pr.setAttribute("role","spinbutton"),Number.isFinite(ar)?pr.setAttribute("aria-valuemax",String(ar)):pr.removeAttribute("aria-valuemax"),Number.isFinite(ur)?pr.setAttribute("aria-valuemin",String(ur)):pr.removeAttribute("aria-valuemin"),pr.setAttribute("aria-valuenow",k.currentValue||k.currentValue===0?String(k.currentValue):""),pr.setAttribute("aria-disabled",String(le.value)),!isNumber$1(gr)&&gr!=null){let yr=Number(gr);Number.isNaN(yr)&&(yr=null),e(UPDATE_MODEL_EVENT,yr)}pr.addEventListener("wheel",cr,{passive:!1})}),onUpdated(()=>{var nr,ur;const ar=(nr=i.value)==null?void 0:nr.input;ar==null||ar.setAttribute("aria-valuenow",`${(ur=k.currentValue)!=null?ur:""}`)}),useDeprecated({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},computed(()=>!!n.label)),r({focus:Et,blur:lr}),(nr,ur)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(y).b(),unref(y).m(unref(oe)),unref(y).is("disabled",unref(le)),unref(y).is("without-controls",!nr.controls),unref(y).is("controls-right",unref(re))]),onDragstart:ur[0]||(ur[0]=withModifiers(()=>{},["prevent"]))},[nr.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(g)("el.inputNumber.decrease"),class:normalizeClass([unref(y).e("decrease"),unref(y).is("disabled",unref($))]),onKeydown:withKeys(Ne,["enter"])},[renderSlot(nr.$slots,"decrease-icon",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})])],42,_hoisted_1$q)),[[unref(vRepeatClick),Ne]]):createCommentVNode("v-if",!0),nr.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(g)("el.inputNumber.increase"),class:normalizeClass([unref(y).e("increase"),unref(y).is("disabled",unref(V))]),onKeydown:withKeys(de,["enter"])},[renderSlot(nr.$slots,"increase-icon",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})])],42,_hoisted_2$h)),[[unref(vRepeatClick),de]]):createCommentVNode("v-if",!0),createVNode(unref(ElInput),{id:nr.id,ref_key:"input",ref:i,type:"number",step:nr.step,"model-value":unref(ue),placeholder:nr.placeholder,readonly:nr.readonly,disabled:unref(le),size:unref(oe),max:nr.max,min:nr.min,name:nr.name,"aria-label":nr.label||nr.ariaLabel,"validate-event":!1,onKeydown:[withKeys(withModifiers(de,["prevent"]),["up"]),withKeys(withModifiers(Ne,["prevent"]),["down"])],onBlur:or,onFocus:tr,onInput:jt,onChange:kt},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}});var InputNumber=_export_sfc$1(_sfc_main$C,[["__file","input-number.vue"]]);const ElInputNumber=withInstall(InputNumber);let SubMenu$1=class{constructor(r,e){this.parent=r,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(r){r===this.subMenuItems.length?r=0:r<0&&(r=this.subMenuItems.length-1),this.subMenuItems[r].focus(),this.subIndex=r}addListeners(){const r=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,e=>{e.addEventListener("keydown",n=>{let g=!1;switch(n.code){case EVENT_CODE.down:{this.gotoSubIndex(this.subIndex+1),g=!0;break}case EVENT_CODE.up:{this.gotoSubIndex(this.subIndex-1),g=!0;break}case EVENT_CODE.tab:{triggerEvent(r,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{g=!0,n.currentTarget.click();break}}return g&&(n.preventDefault(),n.stopPropagation()),!1})})}},MenuItem$1=class{constructor(r,e){this.domNode=r,this.submenu=null,this.submenu=null,this.init(e)}init(r){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(`.${r}-menu`);e&&(this.submenu=new SubMenu$1(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",r=>{let e=!1;switch(r.code){case EVENT_CODE.down:{triggerEvent(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break}case EVENT_CODE.up:{triggerEvent(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break}case EVENT_CODE.tab:{triggerEvent(r.currentTarget,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{e=!0,r.currentTarget.click();break}}e&&r.preventDefault()})}},Menu$1=class{constructor(r,e){this.domNode=r,this.init(e)}init(r){const e=this.domNode.childNodes;Array.from(e).forEach(n=>{n.nodeType===1&&new MenuItem$1(n,r)})}};const _sfc_main$B=defineComponent({name:"ElMenuCollapseTransition",setup(){const t=useNamespace("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,n){addClass(e,`${t.namespace.value}-opacity-transition`),e.style.opacity="1",n()},onAfterEnter(e){removeClass(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),hasClass(e,t.m("collapse"))?(removeClass(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),addClass(e,t.m("collapse"))):(addClass(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),removeClass(e,t.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){addClass(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}});function _sfc_render$9(t,r,e,n,g,y){return openBlock(),createBlock(Transition,mergeProps({mode:"out-in"},t.listeners),{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},16)}var ElMenuCollapseTransition=_export_sfc$1(_sfc_main$B,[["render",_sfc_render$9],["__file","menu-collapse-transition.vue"]]);function useMenu(t,r){const e=computed(()=>{let g=t.parent;const y=[r.value];for(;g.type.name!=="ElMenu";)g.props.index&&y.unshift(g.props.index),g=g.parent;return y});return{parentMenu:computed(()=>{let g=t.parent;for(;g&&!["ElMenu","ElSubMenu"].includes(g.type.name);)g=g.parent;return g}),indexPath:e}}function useMenuColor(t){return computed(()=>{const e=t.backgroundColor;return e?new TinyColor(e).shade(20).toString():""})}const useMenuCssVar=(t,r)=>{const e=useNamespace("menu");return computed(()=>e.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":useMenuColor(t).value||"","active-color":t.activeTextColor||"",level:`${r}`}))},subMenuProps=buildProps({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:iconPropType},expandOpenIcon:{type:iconPropType},collapseCloseIcon:{type:iconPropType},collapseOpenIcon:{type:iconPropType}}),COMPONENT_NAME$5="ElSubMenu";var SubMenu=defineComponent({name:COMPONENT_NAME$5,props:subMenuProps,setup(t,{slots:r,expose:e}){const n=getCurrentInstance(),{indexPath:g,parentMenu:y}=useMenu(n,computed(()=>t.index)),i=useNamespace("menu"),k=useNamespace("sub-menu"),L=inject("rootMenu");L||throwError(COMPONENT_NAME$5,"can not inject root menu");const $=inject(`subMenu:${y.value.uid}`);$||throwError(COMPONENT_NAME$5,"can not inject sub menu");const V=ref({}),z=ref({});let re;const oe=ref(!1),le=ref(),ue=ref(null),ie=computed(()=>kt.value==="horizontal"&&Fe.value?"bottom-start":"right-start"),ae=computed(()=>kt.value==="horizontal"&&Fe.value||kt.value==="vertical"&&!L.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?ze.value?t.expandOpenIcon:t.expandCloseIcon:arrow_down_default:t.collapseCloseIcon&&t.collapseOpenIcon?ze.value?t.collapseOpenIcon:t.collapseCloseIcon:arrow_right_default),Fe=computed(()=>$.level===0),de=computed(()=>{const yr=t.teleported;return yr===void 0?Fe.value:yr}),Ne=computed(()=>L.props.collapse?`${i.namespace.value}-zoom-in-left`:`${i.namespace.value}-zoom-in-top`),Ve=computed(()=>kt.value==="horizontal"&&Fe.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),ze=computed(()=>L.openedMenus.includes(t.index)),jt=computed(()=>{let yr=!1;return Object.values(V.value).forEach(Sr=>{Sr.active&&(yr=!0)}),Object.values(z.value).forEach(Sr=>{Sr.active&&(yr=!0)}),yr}),kt=computed(()=>L.props.mode),Et=reactive({index:t.index,indexPath:g,active:jt}),lr=useMenuCssVar(L.props,$.level+1),tr=computed(()=>{var yr;return(yr=t.popperOffset)!=null?yr:L.props.popperOffset}),or=computed(()=>{var yr;return(yr=t.popperClass)!=null?yr:L.props.popperClass}),dr=computed(()=>{var yr;return(yr=t.showTimeout)!=null?yr:L.props.showTimeout}),cr=computed(()=>{var yr;return(yr=t.hideTimeout)!=null?yr:L.props.hideTimeout}),nr=()=>{var yr,Sr,wr;return(wr=(Sr=(yr=ue.value)==null?void 0:yr.popperRef)==null?void 0:Sr.popperInstanceRef)==null?void 0:wr.destroy()},ur=yr=>{yr||nr()},ar=()=>{L.props.menuTrigger==="hover"&&L.props.mode==="horizontal"||L.props.collapse&&L.props.mode==="vertical"||t.disabled||L.handleSubMenuClick({index:t.index,indexPath:g.value,active:jt.value})},gr=(yr,Sr=dr.value)=>{var wr;if(yr.type!=="focus"){if(L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"||t.disabled){$.mouseInChild.value=!0;return}$.mouseInChild.value=!0,re==null||re(),{stop:re}=useTimeoutFn(()=>{L.openMenu(t.index,g.value)},Sr),de.value&&((wr=y.value.vnode.el)==null||wr.dispatchEvent(new MouseEvent("mouseenter")))}},pr=(yr=!1)=>{var Sr;if(L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"){$.mouseInChild.value=!1;return}re==null||re(),$.mouseInChild.value=!1,{stop:re}=useTimeoutFn(()=>!oe.value&&L.closeMenu(t.index,g.value),cr.value),de.value&&yr&&((Sr=$.handleMouseleave)==null||Sr.call($,!0))};watch(()=>L.props.collapse,yr=>ur(!!yr));{const yr=wr=>{z.value[wr.index]=wr},Sr=wr=>{delete z.value[wr.index]};provide(`subMenu:${n.uid}`,{addSubMenu:yr,removeSubMenu:Sr,handleMouseleave:pr,mouseInChild:oe,level:$.level+1})}return e({opened:ze}),onMounted(()=>{L.addSubMenu(Et),$.addSubMenu(Et)}),onBeforeUnmount(()=>{$.removeSubMenu(Et),L.removeSubMenu(Et)}),()=>{var yr;const Sr=[(yr=r.title)==null?void 0:yr.call(r),h$1(ElIcon,{class:k.e("icon-arrow"),style:{transform:ze.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&L.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>isString$2(ae.value)?h$1(n.appContext.components[ae.value]):h$1(ae.value)})],wr=L.isMenuPopup?h$1(ElTooltip,{ref:ue,visible:ze.value,effect:"light",pure:!0,offset:tr.value,showArrow:!1,persistent:!0,popperClass:or.value,placement:ie.value,teleported:de.value,fallbackPlacements:Ve.value,transition:Ne.value,gpuAcceleration:!1},{content:()=>{var Mr;return h$1("div",{class:[i.m(kt.value),i.m("popup-container"),or.value],onMouseenter:mr=>gr(mr,100),onMouseleave:()=>pr(!0),onFocus:mr=>gr(mr,100)},[h$1("ul",{class:[i.b(),i.m("popup"),i.m(`popup-${ie.value}`)],style:lr.value},[(Mr=r.default)==null?void 0:Mr.call(r)])])},default:()=>h$1("div",{class:k.e("title"),onClick:ar},Sr)}):h$1(Fragment,{},[h$1("div",{class:k.e("title"),ref:le,onClick:ar},Sr),h$1(_CollapseTransition,{},{default:()=>{var Mr;return withDirectives(h$1("ul",{role:"menu",class:[i.b(),i.m("inline")],style:lr.value},[(Mr=r.default)==null?void 0:Mr.call(r)]),[[vShow,ze.value]])}})]);return h$1("li",{class:[k.b(),k.is("active",jt.value),k.is("opened",ze.value),k.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:ze.value,onMouseenter:gr,onMouseleave:()=>pr(),onFocus:gr},[wr])}}});const menuProps=buildProps({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:definePropType(Array),default:()=>mutable([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:iconPropType,default:()=>more_default},popperEffect:{type:String,values:["dark","light"],default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),checkIndexPath=t=>Array.isArray(t)&&t.every(r=>isString$2(r)),menuEmits={close:(t,r)=>isString$2(t)&&checkIndexPath(r),open:(t,r)=>isString$2(t)&&checkIndexPath(r),select:(t,r,e,n)=>isString$2(t)&&checkIndexPath(r)&&isObject$2(e)&&(n===void 0||n instanceof Promise)};var Menu=defineComponent({name:"ElMenu",props:menuProps,emits:menuEmits,setup(t,{emit:r,slots:e,expose:n}){const g=getCurrentInstance(),y=g.appContext.config.globalProperties.$router,i=ref(),k=useNamespace("menu"),L=useNamespace("sub-menu"),$=ref(-1),V=ref(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),z=ref(t.defaultActive),re=ref({}),oe=ref({}),le=computed(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),ue=()=>{const cr=z.value&&re.value[z.value];if(!cr||t.mode==="horizontal"||t.collapse)return;cr.indexPath.forEach(ur=>{const ar=oe.value[ur];ar&&ie(ur,ar.indexPath)})},ie=(cr,nr)=>{V.value.includes(cr)||(t.uniqueOpened&&(V.value=V.value.filter(ur=>nr.includes(ur))),V.value.push(cr),r("open",cr,nr))},ae=cr=>{const nr=V.value.indexOf(cr);nr!==-1&&V.value.splice(nr,1)},Fe=(cr,nr)=>{ae(cr),r("close",cr,nr)},de=({index:cr,indexPath:nr})=>{V.value.includes(cr)?Fe(cr,nr):ie(cr,nr)},Ne=cr=>{(t.mode==="horizontal"||t.collapse)&&(V.value=[]);const{index:nr,indexPath:ur}=cr;if(!(isNil(nr)||isNil(ur)))if(t.router&&y){const ar=cr.route||nr,gr=y.push(ar).then(pr=>(pr||(z.value=nr),pr));r("select",nr,ur,{index:nr,indexPath:ur,route:ar},gr)}else z.value=nr,r("select",nr,ur,{index:nr,indexPath:ur})},Ve=cr=>{const nr=re.value,ur=nr[cr]||z.value&&nr[z.value]||nr[t.defaultActive];ur?z.value=ur.index:z.value=cr},ze=cr=>{const nr=getComputedStyle(cr),ur=Number.parseInt(nr.marginLeft,10),ar=Number.parseInt(nr.marginRight,10);return cr.offsetWidth+ur+ar||0},jt=()=>{var cr,nr;if(!i.value)return-1;const ur=Array.from((nr=(cr=i.value)==null?void 0:cr.childNodes)!=null?nr:[]).filter(mr=>mr.nodeName!=="#comment"&&(mr.nodeName!=="#text"||mr.nodeValue)),ar=64,gr=getComputedStyle(i.value),pr=Number.parseInt(gr.paddingLeft,10),yr=Number.parseInt(gr.paddingRight,10),Sr=i.value.clientWidth-pr-yr;let wr=0,Mr=0;return ur.forEach((mr,_r)=>{wr+=ze(mr),wr<=Sr-ar&&(Mr=_r+1)}),Mr===ur.length?-1:Mr},kt=cr=>oe.value[cr].indexPath,Et=(cr,nr=33.34)=>{let ur;return()=>{ur&&clearTimeout(ur),ur=setTimeout(()=>{cr()},nr)}};let lr=!0;const tr=()=>{if($.value===jt())return;const cr=()=>{$.value=-1,nextTick(()=>{$.value=jt()})};lr?cr():Et(cr)(),lr=!1};watch(()=>t.defaultActive,cr=>{re.value[cr]||(z.value=""),Ve(cr)}),watch(()=>t.collapse,cr=>{cr&&(V.value=[])}),watch(re.value,ue);let or;watchEffect(()=>{t.mode==="horizontal"&&t.ellipsis?or=useResizeObserver(i,tr).stop:or==null||or()});const dr=ref(!1);{const cr=gr=>{oe.value[gr.index]=gr},nr=gr=>{delete oe.value[gr.index]};provide("rootMenu",reactive({props:t,openedMenus:V,items:re,subMenus:oe,activeIndex:z,isMenuPopup:le,addMenuItem:gr=>{re.value[gr.index]=gr},removeMenuItem:gr=>{delete re.value[gr.index]},addSubMenu:cr,removeSubMenu:nr,openMenu:ie,closeMenu:Fe,handleMenuItemClick:Ne,handleSubMenuClick:de})),provide(`subMenu:${g.uid}`,{addSubMenu:cr,removeSubMenu:nr,mouseInChild:dr,level:0})}return onMounted(()=>{t.mode==="horizontal"&&new Menu$1(g.vnode.el,k.namespace.value)}),n({open:nr=>{const{indexPath:ur}=oe.value[nr];ur.forEach(ar=>ie(ar,ur))},close:ae,handleResize:tr}),()=>{var cr,nr;let ur=(nr=(cr=e.default)==null?void 0:cr.call(e))!=null?nr:[];const ar=[];if(t.mode==="horizontal"&&i.value){const Sr=flattedChildren(ur),wr=$.value===-1?Sr:Sr.slice(0,$.value),Mr=$.value===-1?[]:Sr.slice($.value);Mr!=null&&Mr.length&&t.ellipsis&&(ur=wr,ar.push(h$1(SubMenu,{index:"sub-menu-more",class:L.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>h$1(ElIcon,{class:L.e("icon-more")},{default:()=>h$1(t.ellipsisIcon)}),default:()=>Mr})))}const gr=useMenuCssVar(t,0),pr=t.closeOnClickOutside?[[ClickOutside,()=>{V.value.length&&(dr.value||(V.value.forEach(Sr=>r("close",Sr,kt(Sr))),V.value=[]))}]]:[],yr=withDirectives(h$1("ul",{key:String(t.collapse),role:"menubar",ref:i,style:gr.value,class:{[k.b()]:!0,[k.m(t.mode)]:!0,[k.m("collapse")]:t.collapse}},[...ur,...ar]),pr);return t.collapseTransition&&t.mode==="vertical"?h$1(ElMenuCollapseTransition,()=>yr):yr}}});const menuItemProps=buildProps({index:{type:definePropType([String,null]),default:null},route:{type:definePropType([String,Object])},disabled:Boolean}),menuItemEmits={click:t=>isString$2(t.index)&&Array.isArray(t.indexPath)},COMPONENT_NAME$4="ElMenuItem",_sfc_main$A=defineComponent({name:COMPONENT_NAME$4,components:{ElTooltip},props:menuItemProps,emits:menuItemEmits,setup(t,{emit:r}){const e=getCurrentInstance(),n=inject("rootMenu"),g=useNamespace("menu"),y=useNamespace("menu-item");n||throwError(COMPONENT_NAME$4,"can not inject root menu");const{parentMenu:i,indexPath:k}=useMenu(e,toRef(t,"index")),L=inject(`subMenu:${i.value.uid}`);L||throwError(COMPONENT_NAME$4,"can not inject sub menu");const $=computed(()=>t.index===n.activeIndex),V=reactive({index:t.index,indexPath:k,active:$}),z=()=>{t.disabled||(n.handleMenuItemClick({index:t.index,indexPath:k.value,route:t.route}),r("click",V))};return onMounted(()=>{L.addSubMenu(V),n.addMenuItem(V)}),onBeforeUnmount(()=>{L.removeSubMenu(V),n.removeMenuItem(V)}),{parentMenu:i,rootMenu:n,active:$,nsMenu:g,nsMenuItem:y,handleClick:z}}});function _sfc_render$8(t,r,e,n,g,y){const i=resolveComponent("el-tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:r[0]||(r[0]=(...k)=>t.handleClick&&t.handleClick(...k))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(openBlock(),createBlock(i,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:withCtx(()=>[renderSlot(t.$slots,"title")]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(t.nsMenu.be("tooltip","trigger"))},[renderSlot(t.$slots,"default")],2)]),_:3},8,["effect"])):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(t.$slots,"default"),renderSlot(t.$slots,"title")],64))],2)}var MenuItem=_export_sfc$1(_sfc_main$A,[["render",_sfc_render$8],["__file","menu-item.vue"]]);const menuItemGroupProps={title:String},COMPONENT_NAME$3="ElMenuItemGroup",_sfc_main$z=defineComponent({name:COMPONENT_NAME$3,props:menuItemGroupProps,setup(){return{ns:useNamespace("menu-item-group")}}});function _sfc_render$7(t,r,e,n,g,y){return openBlock(),createElementBlock("li",{class:normalizeClass(t.ns.b())},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.$slots.title?renderSlot(t.$slots,"title",{key:1}):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(t.title),1)],64))],2),createBaseVNode("ul",null,[renderSlot(t.$slots,"default")])],2)}var MenuItemGroup=_export_sfc$1(_sfc_main$z,[["render",_sfc_render$7],["__file","menu-item-group.vue"]]);const ElMenu=withInstall(Menu,{MenuItem,MenuItemGroup,SubMenu}),ElMenuItem=withNoopInstall(MenuItem);withNoopInstall(MenuItemGroup);const ElSubMenu=withNoopInstall(SubMenu),elPaginationKey=Symbol("elPaginationKey"),paginationPrevProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:iconPropType}}),paginationPrevEmits={click:t=>t instanceof MouseEvent},_hoisted_1$p=["disabled","aria-label","aria-disabled"],_hoisted_2$g={key:0},__default__$c=defineComponent({name:"ElPaginationPrev"}),_sfc_main$y=defineComponent({...__default__$c,props:paginationPrevProps,emits:paginationPrevEmits,setup(t){const r=t,{t:e}=useLocale(),n=computed(()=>r.disabled||r.currentPage<=1);return(g,y)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-prev",disabled:unref(n),"aria-label":g.prevText||unref(e)("el.pagination.prev"),"aria-disabled":unref(n),onClick:y[0]||(y[0]=i=>g.$emit("click",i))},[g.prevText?(openBlock(),createElementBlock("span",_hoisted_2$g,toDisplayString(g.prevText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.prevIcon)))]),_:1}))],8,_hoisted_1$p))}});var Prev=_export_sfc$1(_sfc_main$y,[["__file","prev.vue"]]);const paginationNextProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:iconPropType}}),_hoisted_1$o=["disabled","aria-label","aria-disabled"],_hoisted_2$f={key:0},__default__$b=defineComponent({name:"ElPaginationNext"}),_sfc_main$x=defineComponent({...__default__$b,props:paginationNextProps,emits:["click"],setup(t){const r=t,{t:e}=useLocale(),n=computed(()=>r.disabled||r.currentPage===r.pageCount||r.pageCount===0);return(g,y)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-next",disabled:unref(n),"aria-label":g.nextText||unref(e)("el.pagination.next"),"aria-disabled":unref(n),onClick:y[0]||(y[0]=i=>g.$emit("click",i))},[g.nextText?(openBlock(),createElementBlock("span",_hoisted_2$f,toDisplayString(g.nextText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.nextIcon)))]),_:1}))],8,_hoisted_1$o))}});var Next=_export_sfc$1(_sfc_main$x,[["__file","next.vue"]]);const selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption(t,r){const e=inject(selectKey),n=inject(selectGroupKey,{disabled:!1}),g=computed(()=>e.props.multiple?V(e.props.modelValue,t.value):V([e.props.modelValue],t.value)),y=computed(()=>{if(e.props.multiple){const oe=e.props.modelValue||[];return!g.value&&oe.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),i=computed(()=>t.label||(isObject$2(t.value)?"":t.value)),k=computed(()=>t.value||t.label||""),L=computed(()=>t.disabled||r.groupDisabled||y.value),$=getCurrentInstance(),V=(oe=[],le)=>{if(isObject$2(t.value)){const ue=e.props.valueKey;return oe&&oe.some(ie=>toRaw(get(ie,ue))===get(le,ue))}else return oe&&oe.includes(le)},z=()=>{!t.disabled&&!n.disabled&&(e.states.hoveringIndex=e.optionsArray.indexOf($.proxy))},re=oe=>{const le=new RegExp(escapeStringRegexp(oe),"i");r.visible=le.test(i.value)||t.created};return watch(()=>i.value,()=>{!t.created&&!e.props.remote&&e.setSelected()}),watch(()=>t.value,(oe,le)=>{const{remote:ue,valueKey:ie}=e.props;if(isEqual(oe,le)||(e.onOptionDestroy(le,$.proxy),e.onOptionCreate($.proxy)),!t.created&&!ue){if(ie&&isObject$2(oe)&&isObject$2(le)&&oe[ie]===le[ie])return;e.setSelected()}}),watch(()=>n.disabled,()=>{r.groupDisabled=n.disabled},{immediate:!0}),{select:e,currentLabel:i,currentValue:k,itemSelected:g,isDisabled:L,hoverItem:z,updateOption:re}}const _sfc_main$w=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const r=useNamespace("select"),e=useId(),n=computed(()=>[r.be("dropdown","item"),r.is("disabled",unref(k)),r.is("selected",unref(i)),r.is("hovering",unref(re))]),g=reactive({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:y,itemSelected:i,isDisabled:k,select:L,hoverItem:$,updateOption:V}=useOption(t,g),{visible:z,hover:re}=toRefs(g),oe=getCurrentInstance().proxy;L.onOptionCreate(oe),onBeforeUnmount(()=>{const ue=oe.value,{selected:ie}=L.states,Fe=(L.props.multiple?ie:[ie]).some(de=>de.value===oe.value);nextTick(()=>{L.states.cachedOptions.get(ue)===oe&&!Fe&&L.states.cachedOptions.delete(ue)}),L.onOptionDestroy(ue,oe)});function le(){t.disabled!==!0&&g.groupDisabled!==!0&&L.handleOptionSelect(oe)}return{ns:r,id:e,containerKls:n,currentLabel:y,itemSelected:i,isDisabled:k,select:L,hoverItem:$,updateOption:V,visible:z,hover:re,selectOptionClick:le,states:g}}}),_hoisted_1$n=["id","aria-disabled","aria-selected"];function _sfc_render$6(t,r,e,n,g,y){return withDirectives((openBlock(),createElementBlock("li",{id:t.id,class:normalizeClass(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:r[0]||(r[0]=(...i)=>t.hoverItem&&t.hoverItem(...i)),onClick:r[1]||(r[1]=withModifiers((...i)=>t.selectOptionClick&&t.selectOptionClick(...i),["stop"]))},[renderSlot(t.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(t.currentLabel),1)])],42,_hoisted_1$n)),[[vShow,t.visible]])}var Option=_export_sfc$1(_sfc_main$w,[["render",_sfc_render$6],["__file","option.vue"]]);const _sfc_main$v=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=inject(selectKey),r=useNamespace("select"),e=computed(()=>t.props.popperClass),n=computed(()=>t.props.multiple),g=computed(()=>t.props.fitInputWidth),y=ref("");function i(){var k;y.value=`${(k=t.selectRef)==null?void 0:k.offsetWidth}px`}return onMounted(()=>{i(),useResizeObserver(t.selectRef,i)}),{ns:r,minWidth:y,popperClass:e,isMultiple:n,isFitInputWidth:g}}});function _sfc_render$5(t,r,e,n,g,y){return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:normalizeStyle({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.be("dropdown","header"))},[renderSlot(t.$slots,"header")],2)):createCommentVNode("v-if",!0),renderSlot(t.$slots,"default"),t.$slots.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.be("dropdown","footer"))},[renderSlot(t.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6)}var ElSelectMenu=_export_sfc$1(_sfc_main$v,[["render",_sfc_render$5],["__file","select-dropdown.vue"]]);function useInput(t){const r=ref(!1);return{handleCompositionStart:()=>{r.value=!0},handleCompositionUpdate:y=>{const i=y.target.value,k=i[i.length-1]||"";r.value=!isKorean(k)},handleCompositionEnd:y=>{r.value&&(r.value=!1,isFunction$3(t)&&t(y))}}}const MINIMUM_INPUT_WIDTH=11,useSelect=(t,r)=>{const{t:e}=useLocale(),n=useId(),g=useNamespace("select"),y=useNamespace("input"),i=reactive({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),k=ref(null),L=ref(null),$=ref(null),V=ref(null),z=ref(null),re=ref(null),oe=ref(null),le=ref(null),ue=ref(null),ie=ref(null),ae=ref(null),Fe=ref(null),{wrapperRef:de,isFocused:Ne,handleFocus:Ve,handleBlur:ze}=useFocusController(z,{afterFocus(){t.automaticDropdown&&!jt.value&&(jt.value=!0,i.menuVisibleOnFocus=!0)},beforeBlur(Fn){var po,ta;return((po=$.value)==null?void 0:po.isFocusInsideContent(Fn))||((ta=V.value)==null?void 0:ta.isFocusInsideContent(Fn))},afterBlur(){jt.value=!1,i.menuVisibleOnFocus=!1}}),jt=ref(!1),kt=ref(),{form:Et,formItem:lr}=useFormItem(),{inputId:tr}=useFormItemInputId(t,{formItemContext:lr}),{valueOnClear:or,isEmptyValue:dr}=useEmptyValues(t),cr=computed(()=>t.disabled||(Et==null?void 0:Et.disabled)),nr=computed(()=>t.multiple?isArray$3(t.modelValue)&&t.modelValue.length>0:!dr(t.modelValue)),ur=computed(()=>t.clearable&&!cr.value&&i.inputHovering&&nr.value),ar=computed(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),gr=computed(()=>g.is("reverse",ar.value&&jt.value)),pr=computed(()=>(lr==null?void 0:lr.validateState)||""),yr=computed(()=>ValidateComponentsMap[pr.value]),Sr=computed(()=>t.remote?300:0),wr=computed(()=>t.loading?t.loadingText||e("el.select.loading"):t.remote&&!i.inputValue&&i.options.size===0?!1:t.filterable&&i.inputValue&&i.options.size>0&&Mr.value===0?t.noMatchText||e("el.select.noMatch"):i.options.size===0?t.noDataText||e("el.select.noData"):null),Mr=computed(()=>mr.value.filter(Fn=>Fn.visible).length),mr=computed(()=>{const Fn=Array.from(i.options.values()),po=[];return i.optionValues.forEach(ta=>{const Ea=Fn.findIndex(Ho=>Ho.value===ta);Ea>-1&&po.push(Fn[Ea])}),po.length>=Fn.length?po:Fn}),_r=computed(()=>Array.from(i.cachedOptions.values())),Nr=computed(()=>{const Fn=mr.value.filter(po=>!po.created).some(po=>po.currentLabel===i.inputValue);return t.filterable&&t.allowCreate&&i.inputValue!==""&&!Fn}),Pr=()=>{t.filterable&&isFunction$3(t.filterMethod)||t.filterable&&t.remote&&isFunction$3(t.remoteMethod)||mr.value.forEach(Fn=>{var po;(po=Fn.updateOption)==null||po.call(Fn,i.inputValue)})},sr=useFormSize(),Ir=computed(()=>["small"].includes(sr.value)?"small":"default"),Ar=computed({get(){return jt.value&&wr.value!==!1},set(Fn){jt.value=Fn}}),Cr=computed(()=>isArray$3(t.modelValue)?t.modelValue.length===0&&!i.inputValue:t.filterable?!i.inputValue:!0),br=computed(()=>{var Fn;const po=(Fn=t.placeholder)!=null?Fn:e("el.select.placeholder");return t.multiple||!nr.value?po:i.selectedLabel});watch(()=>t.modelValue,(Fn,po)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(i.inputValue="",vr("")),Br(),!isEqual(Fn,po)&&t.validateEvent&&(lr==null||lr.validate("change").catch(ta=>void 0))},{flush:"post",deep:!0}),watch(()=>jt.value,Fn=>{Fn?vr(i.inputValue):(i.inputValue="",i.previousQuery=null,i.isBeforeHide=!0),r("visible-change",Fn)}),watch(()=>i.options.entries(),()=>{var Fn;if(!isClient)return;const po=((Fn=k.value)==null?void 0:Fn.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!isUndefined$1(t.modelValue)||!Array.from(po).includes(document.activeElement))&&Br(),t.defaultFirstOption&&(t.filterable||t.remote)&&Mr.value&&Tr()},{flush:"post"}),watch(()=>i.hoveringIndex,Fn=>{isNumber$1(Fn)&&Fn>-1?kt.value=mr.value[Fn]||{}:kt.value={},mr.value.forEach(po=>{po.hover=kt.value===po})}),watchEffect(()=>{i.isBeforeHide||Pr()});const vr=Fn=>{i.previousQuery!==Fn&&(i.previousQuery=Fn,t.filterable&&isFunction$3(t.filterMethod)?t.filterMethod(Fn):t.filterable&&t.remote&&isFunction$3(t.remoteMethod)&&t.remoteMethod(Fn),t.defaultFirstOption&&(t.filterable||t.remote)&&Mr.value?nextTick(Tr):nextTick(Fr))},Tr=()=>{const Fn=mr.value.filter(Ea=>Ea.visible&&!Ea.disabled&&!Ea.states.groupDisabled),po=Fn.find(Ea=>Ea.created),ta=Fn[0];i.hoveringIndex=oo(mr.value,po||ta)},Br=()=>{if(t.multiple)i.selectedLabel="";else{const po=Lr(t.modelValue);i.selectedLabel=po.currentLabel,i.selected=po;return}const Fn=[];isArray$3(t.modelValue)&&t.modelValue.forEach(po=>{Fn.push(Lr(po))}),i.selected=Fn},Lr=Fn=>{let po;const ta=toRawType(Fn).toLowerCase()==="object",Ea=toRawType(Fn).toLowerCase()==="null",Ho=toRawType(Fn).toLowerCase()==="undefined";for(let gc=i.cachedOptions.size-1;gc>=0;gc--){const lo=_r.value[gc];if(ta?get(lo.value,t.valueKey)===get(Fn,t.valueKey):lo.value===Fn){po={value:Fn,currentLabel:lo.currentLabel,get isDisabled(){return lo.isDisabled}};break}}if(po)return po;const Qi=ta?Fn.label:!Ea&&!Ho?Fn:"";return{value:Fn,currentLabel:Qi}},Fr=()=>{t.multiple?i.hoveringIndex=mr.value.findIndex(Fn=>i.selected.some(po=>Ba(po)===Ba(Fn))):i.hoveringIndex=mr.value.findIndex(Fn=>Ba(Fn)===Ba(i.selected))},qr=()=>{i.selectionWidth=L.value.getBoundingClientRect().width},Vr=()=>{i.calculatorWidth=re.value.getBoundingClientRect().width},Qr=()=>{i.collapseItemWidth=ae.value.getBoundingClientRect().width},Sn=()=>{var Fn,po;(po=(Fn=$.value)==null?void 0:Fn.updatePopper)==null||po.call(Fn)},Mn=()=>{var Fn,po;(po=(Fn=V.value)==null?void 0:Fn.updatePopper)==null||po.call(Fn)},Xr=()=>{i.inputValue.length>0&&!jt.value&&(jt.value=!0),vr(i.inputValue)},Wn=Fn=>{if(i.inputValue=Fn.target.value,t.remote)Zr();else return Xr()},Zr=debounce(()=>{Xr()},Sr.value),En=Fn=>{isEqual(t.modelValue,Fn)||r(CHANGE_EVENT,Fn)},Jr=Fn=>findLastIndex(Fn,po=>!i.disabledOptions.has(po)),kn=Fn=>{if(t.multiple&&Fn.code!==EVENT_CODE.delete&&Fn.target.value.length<=0){const po=t.modelValue.slice(),ta=Jr(po);if(ta<0)return;po.splice(ta,1),r(UPDATE_MODEL_EVENT,po),En(po)}},Un=(Fn,po)=>{const ta=i.selected.indexOf(po);if(ta>-1&&!cr.value){const Ea=t.modelValue.slice();Ea.splice(ta,1),r(UPDATE_MODEL_EVENT,Ea),En(Ea),r("remove-tag",po.value)}Fn.stopPropagation(),gs()},wn=Fn=>{Fn.stopPropagation();const po=t.multiple?[]:or.value;if(t.multiple)for(const ta of i.selected)ta.isDisabled&&po.push(ta.value);r(UPDATE_MODEL_EVENT,po),En(po),i.hoveringIndex=-1,jt.value=!1,r("clear"),gs()},Pn=Fn=>{if(t.multiple){const po=(t.modelValue||[]).slice(),ta=oo(po,Fn.value);ta>-1?po.splice(ta,1):(t.multipleLimit<=0||po.length<t.multipleLimit)&&po.push(Fn.value),r(UPDATE_MODEL_EVENT,po),En(po),Fn.created&&vr(""),t.filterable&&!t.reserveKeyword&&(i.inputValue="")}else r(UPDATE_MODEL_EVENT,Fn.value),En(Fn.value),jt.value=!1;gs(),!jt.value&&nextTick(()=>{Rn(Fn)})},oo=(Fn=[],po)=>{if(!isObject$2(po))return Fn.indexOf(po);const ta=t.valueKey;let Ea=-1;return Fn.some((Ho,Qi)=>toRaw(get(Ho,ta))===get(po,ta)?(Ea=Qi,!0):!1),Ea},Rn=Fn=>{var po,ta,Ea,Ho,Qi;const hu=isArray$3(Fn)?Fn[0]:Fn;let gc=null;if(hu!=null&&hu.value){const lo=mr.value.filter(qp=>qp.value===hu.value);lo.length>0&&(gc=lo[0].$el)}if($.value&&gc){const lo=(Ho=(Ea=(ta=(po=$.value)==null?void 0:po.popperRef)==null?void 0:ta.contentRef)==null?void 0:Ea.querySelector)==null?void 0:Ho.call(Ea,`.${g.be("dropdown","wrap")}`);lo&&scrollIntoView(lo,gc)}(Qi=Fe.value)==null||Qi.handleScroll()},An=Fn=>{i.options.set(Fn.value,Fn),i.cachedOptions.set(Fn.value,Fn),Fn.disabled&&i.disabledOptions.set(Fn.value,Fn)},to=(Fn,po)=>{i.options.get(Fn)===po&&i.options.delete(Fn)},{handleCompositionStart:uo,handleCompositionUpdate:Eo,handleCompositionEnd:Oo}=useInput(Fn=>Wn(Fn)),$o=computed(()=>{var Fn,po;return(po=(Fn=$.value)==null?void 0:Fn.popperRef)==null?void 0:po.contentRef}),ua=()=>{i.isBeforeHide=!1,nextTick(()=>Rn(i.selected))},gs=()=>{var Fn;(Fn=z.value)==null||Fn.focus()},Co=()=>{ao()},Ps=Fn=>{wn(Fn)},ao=Fn=>{if(jt.value=!1,Ne.value){const po=new FocusEvent("focus",Fn);nextTick(()=>ze(po))}},Ta=()=>{i.inputValue.length>0?i.inputValue="":jt.value=!1},Ca=()=>{cr.value||(i.menuVisibleOnFocus?i.menuVisibleOnFocus=!1:jt.value=!jt.value)},Da=()=>{jt.value?mr.value[i.hoveringIndex]&&Pn(mr.value[i.hoveringIndex]):Ca()},Ba=Fn=>isObject$2(Fn.value)?get(Fn.value,t.valueKey):Fn.value,Zo=computed(()=>mr.value.filter(Fn=>Fn.visible).every(Fn=>Fn.disabled)),xo=computed(()=>t.multiple?t.collapseTags?i.selected.slice(0,t.maxCollapseTags):i.selected:[]),Ua=computed(()=>t.multiple?t.collapseTags?i.selected.slice(t.maxCollapseTags):[]:[]),$a=Fn=>{if(!jt.value){jt.value=!0;return}if(!(i.options.size===0||Mr.value===0)&&!Zo.value){Fn==="next"?(i.hoveringIndex++,i.hoveringIndex===i.options.size&&(i.hoveringIndex=0)):Fn==="prev"&&(i.hoveringIndex--,i.hoveringIndex<0&&(i.hoveringIndex=i.options.size-1));const po=mr.value[i.hoveringIndex];(po.disabled===!0||po.states.groupDisabled===!0||!po.visible)&&$a(Fn),nextTick(()=>Rn(kt.value))}},Dc=()=>{if(!L.value)return 0;const Fn=window.getComputedStyle(L.value);return Number.parseFloat(Fn.gap||"6px")},As=computed(()=>{const Fn=Dc();return{maxWidth:`${ae.value&&t.maxCollapseTags===1?i.selectionWidth-i.collapseItemWidth-Fn:i.selectionWidth}px`}}),si=computed(()=>({maxWidth:`${i.selectionWidth}px`})),ha=computed(()=>({width:`${Math.max(i.calculatorWidth,MINIMUM_INPUT_WIDTH)}px`}));return t.multiple&&!isArray$3(t.modelValue)&&r(UPDATE_MODEL_EVENT,[]),!t.multiple&&isArray$3(t.modelValue)&&r(UPDATE_MODEL_EVENT,""),useResizeObserver(L,qr),useResizeObserver(re,Vr),useResizeObserver(ue,Sn),useResizeObserver(de,Sn),useResizeObserver(ie,Mn),useResizeObserver(ae,Qr),onMounted(()=>{Br()}),{inputId:tr,contentId:n,nsSelect:g,nsInput:y,states:i,isFocused:Ne,expanded:jt,optionsArray:mr,hoverOption:kt,selectSize:sr,filteredOptionsCount:Mr,resetCalculatorWidth:Vr,updateTooltip:Sn,updateTagTooltip:Mn,debouncedOnInputChange:Zr,onInput:Wn,deletePrevTag:kn,deleteTag:Un,deleteSelected:wn,handleOptionSelect:Pn,scrollToOption:Rn,hasModelValue:nr,shouldShowPlaceholder:Cr,currentPlaceholder:br,showClose:ur,iconComponent:ar,iconReverse:gr,validateState:pr,validateIcon:yr,showNewOption:Nr,updateOptions:Pr,collapseTagSize:Ir,setSelected:Br,selectDisabled:cr,emptyText:wr,handleCompositionStart:uo,handleCompositionUpdate:Eo,handleCompositionEnd:Oo,onOptionCreate:An,onOptionDestroy:to,handleMenuEnter:ua,handleFocus:Ve,focus:gs,blur:Co,handleBlur:ze,handleClearClick:Ps,handleClickOutside:ao,handleEsc:Ta,toggleMenu:Ca,selectOption:Da,getValueKey:Ba,navigateOptions:$a,dropdownMenuVisible:Ar,showTagList:xo,collapseTagList:Ua,tagStyle:As,collapseTagStyle:si,inputStyle:ha,popperRef:$o,inputRef:z,tooltipRef:$,tagTooltipRef:V,calculatorRef:re,prefixRef:oe,suffixRef:le,selectRef:k,wrapperRef:de,selectionRef:L,scrollbarRef:Fe,menuRef:ue,tagMenuRef:ie,collapseItemRef:ae}};var ElOptions=defineComponent({name:"ElOptions",setup(t,{slots:r}){const e=inject(selectKey);let n=[];return()=>{var g,y;const i=(g=r.default)==null?void 0:g.call(r),k=[];function L($){isArray$3($)&&$.forEach(V=>{var z,re,oe,le;const ue=(z=(V==null?void 0:V.type)||{})==null?void 0:z.name;ue==="ElOptionGroup"?L(!isString$2(V.children)&&!isArray$3(V.children)&&isFunction$3((re=V.children)==null?void 0:re.default)?(oe=V.children)==null?void 0:oe.default():V.children):ue==="ElOption"?k.push((le=V.props)==null?void 0:le.value):isArray$3(V.children)&&L(V.children)})}return i.length&&L((y=i[0])==null?void 0:y.children),isEqual(k,n)||(n=k,e&&(e.states.optionValues=k)),i}}});const SelectProps=buildProps({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:useSizeProp,effect:{type:definePropType(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:definePropType(String),values:Ee,default:"bottom-start"},fallbackPlacements:{type:definePropType(Array),default:["bottom-start","top-start","right","left"]},...useEmptyValuesProps,...useAriaProps(["ariaLabel"])}),COMPONENT_NAME$2="ElSelect",_sfc_main$u=defineComponent({name:COMPONENT_NAME$2,componentName:COMPONENT_NAME$2,components:{ElInput,ElSelectMenu,ElOption:Option,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:SelectProps,emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:r}){const e=useSelect(t,r);return provide(selectKey,reactive({props:t,states:e.states,optionsArray:e.optionsArray,handleOptionSelect:e.handleOptionSelect,onOptionCreate:e.onOptionCreate,onOptionDestroy:e.onOptionDestroy,selectRef:e.selectRef,setSelected:e.setSelected})),{...e}}}),_hoisted_1$m=["id","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],_hoisted_2$e=["textContent"];function _sfc_render$4(t,r,e,n,g,y){const i=resolveComponent("el-tag"),k=resolveComponent("el-tooltip"),L=resolveComponent("el-icon"),$=resolveComponent("el-option"),V=resolveComponent("el-options"),z=resolveComponent("el-scrollbar"),re=resolveComponent("el-select-menu"),oe=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:r[16]||(r[16]=le=>t.states.inputHovering=!0),onMouseleave:r[17]||(r[17]=le=>t.states.inputHovering=!1),onClick:r[18]||(r[18]=withModifiers((...le)=>t.toggleMenu&&t.toggleMenu(...le),["prevent","stop"]))},[createVNode(k,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:r[15]||(r[15]=le=>t.states.isBeforeHide=!1)},{default:withCtx(()=>{var le;return[createBaseVNode("div",{ref:"wrapperRef",class:normalizeClass([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,ref:"prefixRef",class:normalizeClass(t.nsSelect.e("prefix"))},[renderSlot(t.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?renderSlot(t.$slots,"tag",{key:0},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.showTagList,ue=>(openBlock(),createElementBlock("div",{key:t.getValueKey(ue),class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{closable:!t.selectDisabled&&!ue.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:normalizeStyle(t.tagStyle),onClose:ie=>t.deleteTag(ie,ue)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},toDisplayString(ue.currentLabel),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(openBlock(),createBlock(k,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:withCtx(()=>[createBaseVNode("div",{ref:"collapseItemRef",class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:normalizeStyle(t.collapseTagStyle)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))}," + "+toDisplayString(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:withCtx(()=>[createBaseVNode("div",{ref:"tagMenuRef",class:normalizeClass(t.nsSelect.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.collapseTagList,ue=>(openBlock(),createElementBlock("div",{key:t.getValueKey(ue),class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{class:"in-tooltip",closable:!t.selectDisabled&&!ue.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:ie=>t.deleteTag(ie,ue)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},toDisplayString(ue.currentLabel),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):createCommentVNode("v-if",!0)]):createCommentVNode("v-if",!0),t.selectDisabled?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[withDirectives(createBaseVNode("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":r[0]||(r[0]=ue=>t.states.inputValue=ue),type:"text",class:normalizeClass([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:normalizeStyle(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((le=t.hoverOption)==null?void 0:le.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:r[1]||(r[1]=(...ue)=>t.handleFocus&&t.handleFocus(...ue)),onBlur:r[2]||(r[2]=(...ue)=>t.handleBlur&&t.handleBlur(...ue)),onKeydown:[r[3]||(r[3]=withKeys(withModifiers(ue=>t.navigateOptions("next"),["stop","prevent"]),["down"])),r[4]||(r[4]=withKeys(withModifiers(ue=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),r[5]||(r[5]=withKeys(withModifiers((...ue)=>t.handleEsc&&t.handleEsc(...ue),["stop","prevent"]),["esc"])),r[6]||(r[6]=withKeys(withModifiers((...ue)=>t.selectOption&&t.selectOption(...ue),["stop","prevent"]),["enter"])),r[7]||(r[7]=withKeys(withModifiers((...ue)=>t.deletePrevTag&&t.deletePrevTag(...ue),["stop"]),["delete"]))],onCompositionstart:r[8]||(r[8]=(...ue)=>t.handleCompositionStart&&t.handleCompositionStart(...ue)),onCompositionupdate:r[9]||(r[9]=(...ue)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...ue)),onCompositionend:r[10]||(r[10]=(...ue)=>t.handleCompositionEnd&&t.handleCompositionEnd(...ue)),onInput:r[11]||(r[11]=(...ue)=>t.onInput&&t.onInput(...ue)),onClick:r[12]||(r[12]=withModifiers((...ue)=>t.toggleMenu&&t.toggleMenu(...ue),["stop"]))},null,46,_hoisted_1$m),[[vModelText,t.states.inputValue]]),t.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(t.nsSelect.e("input-calculator")),textContent:toDisplayString(t.states.inputValue)},null,10,_hoisted_2$e)):createCommentVNode("v-if",!0)],2)),t.shouldShowPlaceholder?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[createBaseVNode("span",null,toDisplayString(t.currentPlaceholder),1)],2)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{ref:"suffixRef",class:normalizeClass(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(openBlock(),createBlock(L,{key:0,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.showClose&&t.clearIcon?(openBlock(),createBlock(L,{key:1,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),t.validateState&&t.validateIcon?(openBlock(),createBlock(L,{key:2,class:normalizeClass([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)]}),content:withCtx(()=>[createVNode(re,{ref:"menuRef"},{default:withCtx(()=>[t.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.nsSelect.be("dropdown","header")),onClick:r[13]||(r[13]=withModifiers(()=>{},["stop"]))},[renderSlot(t.$slots,"header")],2)):createCommentVNode("v-if",!0),withDirectives(createVNode(z,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:normalizeClass([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:withCtx(()=>[t.showNewOption?(openBlock(),createBlock($,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(V,null,{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[vShow,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.nsSelect.be("dropdown","loading"))},[renderSlot(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.nsSelect.be("dropdown","empty"))},[renderSlot(t.$slots,"empty",{},()=>[createBaseVNode("span",null,toDisplayString(t.emptyText),1)])],2)):createCommentVNode("v-if",!0),t.$slots.footer?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(t.nsSelect.be("dropdown","footer")),onClick:r[14]||(r[14]=withModifiers(()=>{},["stop"]))},[renderSlot(t.$slots,"footer")],2)):createCommentVNode("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],34)),[[oe,t.handleClickOutside,t.popperRef]])}var Select=_export_sfc$1(_sfc_main$u,[["render",_sfc_render$4],["__file","select.vue"]]);const _sfc_main$t=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const r=useNamespace("select"),e=ref(null),n=getCurrentInstance(),g=ref([]);provide(selectGroupKey,reactive({...toRefs(t)}));const y=computed(()=>g.value.some($=>$.visible===!0)),i=$=>{var V,z;return((V=$.type)==null?void 0:V.name)==="ElOption"&&!!((z=$.component)!=null&&z.proxy)},k=$=>{const V=castArray$1($),z=[];return V.forEach(re=>{var oe,le;i(re)?z.push(re.component.proxy):(oe=re.children)!=null&&oe.length?z.push(...k(re.children)):(le=re.component)!=null&&le.subTree&&z.push(...k(re.component.subTree))}),z},L=()=>{g.value=k(n.subTree)};return onMounted(()=>{L()}),useMutationObserver(e,L,{attributes:!0,subtree:!0,childList:!0}),{groupRef:e,visible:y,ns:r}}});function _sfc_render$3(t,r,e,n,g,y){return withDirectives((openBlock(),createElementBlock("ul",{ref:"groupRef",class:normalizeClass(t.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(t.ns.be("group","title"))},toDisplayString(t.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(t.ns.b("group"))},[renderSlot(t.$slots,"default")],2)])],2)),[[vShow,t.visible]])}var OptionGroup=_export_sfc$1(_sfc_main$t,[["render",_sfc_render$3],["__file","option-group.vue"]]);const ElSelect=withInstall(Select,{Option,OptionGroup}),ElOption=withNoopInstall(Option);withNoopInstall(OptionGroup);const usePagination=()=>inject(elPaginationKey,{}),paginationSizesProps=buildProps({pageSize:{type:Number,required:!0},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:componentSizes}}),__default__$a=defineComponent({name:"ElPaginationSizes"}),_sfc_main$s=defineComponent({...__default__$a,props:paginationSizesProps,emits:["page-size-change"],setup(t,{emit:r}){const e=t,{t:n}=useLocale(),g=useNamespace("pagination"),y=usePagination(),i=ref(e.pageSize);watch(()=>e.pageSizes,($,V)=>{if(!isEqual($,V)&&Array.isArray($)){const z=$.includes(e.pageSize)?e.pageSize:e.pageSizes[0];r("page-size-change",z)}}),watch(()=>e.pageSize,$=>{i.value=$});const k=computed(()=>e.pageSizes);function L($){var V;$!==i.value&&(i.value=$,(V=y.handleSizeChange)==null||V.call(y,Number($)))}return($,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(g).e("sizes"))},[createVNode(unref(ElSelect),{"model-value":i.value,disabled:$.disabled,"popper-class":$.popperClass,size:$.size,teleported:$.teleported,"validate-event":!1,onChange:L},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(k),z=>(openBlock(),createBlock(unref(ElOption),{key:z,value:z,label:z+unref(n)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var Sizes=_export_sfc$1(_sfc_main$s,[["__file","sizes.vue"]]);const paginationJumperProps=buildProps({size:{type:String,values:componentSizes}}),_hoisted_1$l=["disabled"],__default__$9=defineComponent({name:"ElPaginationJumper"}),_sfc_main$r=defineComponent({...__default__$9,props:paginationJumperProps,setup(t){const{t:r}=useLocale(),e=useNamespace("pagination"),{pageCount:n,disabled:g,currentPage:y,changeEvent:i}=usePagination(),k=ref(),L=computed(()=>{var z;return(z=k.value)!=null?z:y==null?void 0:y.value});function $(z){k.value=z?+z:""}function V(z){z=Math.trunc(+z),i==null||i(z),k.value=void 0}return(z,re)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(e).e("jump")),disabled:unref(g)},[createBaseVNode("span",{class:normalizeClass([unref(e).e("goto")])},toDisplayString(unref(r)("el.pagination.goto")),3),createVNode(unref(ElInput),{size:z.size,class:normalizeClass([unref(e).e("editor"),unref(e).is("in-pagination")]),min:1,max:unref(n),disabled:unref(g),"model-value":unref(L),"validate-event":!1,"aria-label":unref(r)("el.pagination.page"),type:"number","onUpdate:modelValue":$,onChange:V},null,8,["size","class","max","disabled","model-value","aria-label"]),createBaseVNode("span",{class:normalizeClass([unref(e).e("classifier")])},toDisplayString(unref(r)("el.pagination.pageClassifier")),3)],10,_hoisted_1$l))}});var Jumper=_export_sfc$1(_sfc_main$r,[["__file","jumper.vue"]]);const paginationTotalProps=buildProps({total:{type:Number,default:1e3}}),_hoisted_1$k=["disabled"],__default__$8=defineComponent({name:"ElPaginationTotal"}),_sfc_main$q=defineComponent({...__default__$8,props:paginationTotalProps,setup(t){const{t:r}=useLocale(),e=useNamespace("pagination"),{disabled:n}=usePagination();return(g,y)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(e).e("total")),disabled:unref(n)},toDisplayString(unref(r)("el.pagination.total",{total:g.total})),11,_hoisted_1$k))}});var Total=_export_sfc$1(_sfc_main$q,[["__file","total.vue"]]);const paginationPagerProps=buildProps({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),_hoisted_1$j=["onKeyup"],_hoisted_2$d=["aria-current","aria-label","tabindex"],_hoisted_3$a=["tabindex","aria-label"],_hoisted_4$8=["aria-current","aria-label","tabindex"],_hoisted_5$7=["tabindex","aria-label"],_hoisted_6$4=["aria-current","aria-label","tabindex"],__default__$7=defineComponent({name:"ElPaginationPager"}),_sfc_main$p=defineComponent({...__default__$7,props:paginationPagerProps,emits:["change"],setup(t,{emit:r}){const e=t,n=useNamespace("pager"),g=useNamespace("icon"),{t:y}=useLocale(),i=ref(!1),k=ref(!1),L=ref(!1),$=ref(!1),V=ref(!1),z=ref(!1),re=computed(()=>{const Ne=e.pagerCount,Ve=(Ne-1)/2,ze=Number(e.currentPage),jt=Number(e.pageCount);let kt=!1,Et=!1;jt>Ne&&(ze>Ne-Ve&&(kt=!0),ze<jt-Ve&&(Et=!0));const lr=[];if(kt&&!Et){const tr=jt-(Ne-2);for(let or=tr;or<jt;or++)lr.push(or)}else if(!kt&&Et)for(let tr=2;tr<Ne;tr++)lr.push(tr);else if(kt&&Et){const tr=Math.floor(Ne/2)-1;for(let or=ze-tr;or<=ze+tr;or++)lr.push(or)}else for(let tr=2;tr<jt;tr++)lr.push(tr);return lr}),oe=computed(()=>["more","btn-quickprev",g.b(),n.is("disabled",e.disabled)]),le=computed(()=>["more","btn-quicknext",g.b(),n.is("disabled",e.disabled)]),ue=computed(()=>e.disabled?-1:0);watchEffect(()=>{const Ne=(e.pagerCount-1)/2;i.value=!1,k.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-Ne&&(i.value=!0),e.currentPage<e.pageCount-Ne&&(k.value=!0))});function ie(Ne=!1){e.disabled||(Ne?L.value=!0:$.value=!0)}function ae(Ne=!1){Ne?V.value=!0:z.value=!0}function Fe(Ne){const Ve=Ne.target;if(Ve.tagName.toLowerCase()==="li"&&Array.from(Ve.classList).includes("number")){const ze=Number(Ve.textContent);ze!==e.currentPage&&r("change",ze)}else Ve.tagName.toLowerCase()==="li"&&Array.from(Ve.classList).includes("more")&&de(Ne)}function de(Ne){const Ve=Ne.target;if(Ve.tagName.toLowerCase()==="ul"||e.disabled)return;let ze=Number(Ve.textContent);const jt=e.pageCount,kt=e.currentPage,Et=e.pagerCount-2;Ve.className.includes("more")&&(Ve.className.includes("quickprev")?ze=kt-Et:Ve.className.includes("quicknext")&&(ze=kt+Et)),Number.isNaN(+ze)||(ze<1&&(ze=1),ze>jt&&(ze=jt)),ze!==kt&&r("change",ze)}return(Ne,Ve)=>(openBlock(),createElementBlock("ul",{class:normalizeClass(unref(n).b()),onClick:de,onKeyup:withKeys(Fe,["enter"])},[Ne.pageCount>0?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass([[unref(n).is("active",Ne.currentPage===1),unref(n).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===1,"aria-label":unref(y)("el.pagination.currentPage",{pager:1}),tabindex:unref(ue)}," 1 ",10,_hoisted_2$d)):createCommentVNode("v-if",!0),i.value?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(unref(oe)),tabindex:unref(ue),"aria-label":unref(y)("el.pagination.prevPages",{pager:Ne.pagerCount-2}),onMouseenter:Ve[0]||(Ve[0]=ze=>ie(!0)),onMouseleave:Ve[1]||(Ve[1]=ze=>L.value=!1),onFocus:Ve[2]||(Ve[2]=ze=>ae(!0)),onBlur:Ve[3]||(Ve[3]=ze=>V.value=!1)},[(L.value||V.value)&&!Ne.disabled?(openBlock(),createBlock(unref(d_arrow_left_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_3$a)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),ze=>(openBlock(),createElementBlock("li",{key:ze,class:normalizeClass([[unref(n).is("active",Ne.currentPage===ze),unref(n).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===ze,"aria-label":unref(y)("el.pagination.currentPage",{pager:ze}),tabindex:unref(ue)},toDisplayString(ze),11,_hoisted_4$8))),128)),k.value?(openBlock(),createElementBlock("li",{key:2,class:normalizeClass(unref(le)),tabindex:unref(ue),"aria-label":unref(y)("el.pagination.nextPages",{pager:Ne.pagerCount-2}),onMouseenter:Ve[4]||(Ve[4]=ze=>ie()),onMouseleave:Ve[5]||(Ve[5]=ze=>$.value=!1),onFocus:Ve[6]||(Ve[6]=ze=>ae()),onBlur:Ve[7]||(Ve[7]=ze=>z.value=!1)},[($.value||z.value)&&!Ne.disabled?(openBlock(),createBlock(unref(d_arrow_right_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_5$7)):createCommentVNode("v-if",!0),Ne.pageCount>1?(openBlock(),createElementBlock("li",{key:3,class:normalizeClass([[unref(n).is("active",Ne.currentPage===Ne.pageCount),unref(n).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===Ne.pageCount,"aria-label":unref(y)("el.pagination.currentPage",{pager:Ne.pageCount}),tabindex:unref(ue)},toDisplayString(Ne.pageCount),11,_hoisted_6$4)):createCommentVNode("v-if",!0)],42,_hoisted_1$j))}});var Pager=_export_sfc$1(_sfc_main$p,[["__file","pager.vue"]]);const isAbsent=t=>typeof t!="number",paginationProps=buildProps({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>isNumber$1(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:iconPropType,default:()=>arrow_left_default},nextText:{type:String,default:""},nextIcon:{type:iconPropType,default:()=>arrow_right_default},teleported:{type:Boolean,default:!0},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),paginationEmits={"update:current-page":t=>isNumber$1(t),"update:page-size":t=>isNumber$1(t),"size-change":t=>isNumber$1(t),change:(t,r)=>isNumber$1(t)&&isNumber$1(r),"current-change":t=>isNumber$1(t),"prev-click":t=>isNumber$1(t),"next-click":t=>isNumber$1(t)},componentName="ElPagination";var Pagination=defineComponent({name:componentName,props:paginationProps,emits:paginationEmits,setup(t,{emit:r,slots:e}){const{t:n}=useLocale(),g=useNamespace("pagination"),y=getCurrentInstance().vnode.props||{},i="onUpdate:currentPage"in y||"onUpdate:current-page"in y||"onCurrentChange"in y,k="onUpdate:pageSize"in y||"onUpdate:page-size"in y||"onSizeChange"in y,L=computed(()=>{if(isAbsent(t.total)&&isAbsent(t.pageCount)||!isAbsent(t.currentPage)&&!i)return!1;if(t.layout.includes("sizes")){if(isAbsent(t.pageCount)){if(!isAbsent(t.total)&&!isAbsent(t.pageSize)&&!k)return!1}else if(!k)return!1}return!0}),$=ref(isAbsent(t.defaultPageSize)?10:t.defaultPageSize),V=ref(isAbsent(t.defaultCurrentPage)?1:t.defaultCurrentPage),z=computed({get(){return isAbsent(t.pageSize)?$.value:t.pageSize},set(de){isAbsent(t.pageSize)&&($.value=de),k&&(r("update:page-size",de),r("size-change",de))}}),re=computed(()=>{let de=0;return isAbsent(t.pageCount)?isAbsent(t.total)||(de=Math.max(1,Math.ceil(t.total/z.value))):de=t.pageCount,de}),oe=computed({get(){return isAbsent(t.currentPage)?V.value:t.currentPage},set(de){let Ne=de;de<1?Ne=1:de>re.value&&(Ne=re.value),isAbsent(t.currentPage)&&(V.value=Ne),i&&(r("update:current-page",Ne),r("current-change",Ne))}});watch(re,de=>{oe.value>de&&(oe.value=de)}),watch([oe,z],de=>{r("change",...de)},{flush:"post"});function le(de){oe.value=de}function ue(de){z.value=de;const Ne=re.value;oe.value>Ne&&(oe.value=Ne)}function ie(){t.disabled||(oe.value-=1,r("prev-click",oe.value))}function ae(){t.disabled||(oe.value+=1,r("next-click",oe.value))}function Fe(de,Ne){de&&(de.props||(de.props={}),de.props.class=[de.props.class,Ne].join(" "))}return provide(elPaginationKey,{pageCount:re,disabled:computed(()=>t.disabled),currentPage:oe,changeEvent:le,handleSizeChange:ue}),()=>{var de,Ne;if(!L.value)return n("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&re.value<=1)return null;const Ve=[],ze=[],jt=h$1("div",{class:g.e("rightwrapper")},ze),kt={prev:h$1(Prev,{disabled:t.disabled,currentPage:oe.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:ie}),jumper:h$1(Jumper,{size:t.small?"small":"default"}),pager:h$1(Pager,{currentPage:oe.value,pageCount:re.value,pagerCount:t.pagerCount,onChange:le,disabled:t.disabled}),next:h$1(Next,{disabled:t.disabled,currentPage:oe.value,pageCount:re.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:ae}),sizes:h$1(Sizes,{pageSize:z.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:t.small?"small":"default"}),slot:(Ne=(de=e==null?void 0:e.default)==null?void 0:de.call(e))!=null?Ne:null,total:h$1(Total,{total:isAbsent(t.total)?0:t.total})},Et=t.layout.split(",").map(tr=>tr.trim());let lr=!1;return Et.forEach(tr=>{if(tr==="->"){lr=!0;return}lr?ze.push(kt[tr]):Ve.push(kt[tr])}),Fe(Ve[0],g.is("first")),Fe(Ve[Ve.length-1],g.is("last")),lr&&ze.length>0&&(Fe(ze[0],g.is("first")),Fe(ze[ze.length-1],g.is("last")),Ve.push(jt)),h$1("div",{class:[g.b(),g.is("background",t.background),{[g.m("small")]:t.small}]},Ve)}}});const ElPagination=withInstall(Pagination),progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:t=>`${t}%`}}),_hoisted_1$i=["aria-valuenow"],_hoisted_2$c={viewBox:"0 0 100 100"},_hoisted_3$9=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$7=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$6={key:0},__default__$6=defineComponent({name:"ElProgress"}),_sfc_main$o=defineComponent({...__default__$6,props:progressProps,setup(t){const r=t,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=useNamespace("progress"),g=computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,background:Fe(r.percentage)})),y=computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),i=computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(y.value)/2}`,10):0),k=computed(()=>{const de=i.value,Ne=r.type==="dashboard";return`
          M 50 50
          m 0 ${Ne?"":"-"}${de}
          a ${de} ${de} 0 1 1 0 ${Ne?"-":""}${de*2}
          a ${de} ${de} 0 1 1 0 ${Ne?"":"-"}${de*2}
          `}),L=computed(()=>2*Math.PI*i.value),$=computed(()=>r.type==="dashboard"?.75:1),V=computed(()=>`${-1*L.value*(1-$.value)/2}px`),z=computed(()=>({strokeDasharray:`${L.value*$.value}px, ${L.value}px`,strokeDashoffset:V.value})),re=computed(()=>({strokeDasharray:`${L.value*$.value*(r.percentage/100)}px, ${L.value}px`,strokeDashoffset:V.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),oe=computed(()=>{let de;return r.color?de=Fe(r.percentage):de=e[r.status]||e.default,de}),le=computed(()=>r.status==="warning"?warning_filled_default:r.type==="line"?r.status==="success"?circle_check_default:circle_close_default:r.status==="success"?check_default:close_default),ue=computed(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),ie=computed(()=>r.format(r.percentage));function ae(de){const Ne=100/de.length;return de.map((ze,jt)=>isString$2(ze)?{color:ze,percentage:(jt+1)*Ne}:ze).sort((ze,jt)=>ze.percentage-jt.percentage)}const Fe=de=>{var Ne;const{color:Ve}=r;if(isFunction$3(Ve))return Ve(de);if(isString$2(Ve))return Ve;{const ze=ae(Ve);for(const jt of ze)if(jt.percentage>de)return jt.color;return(Ne=ze[ze.length-1])==null?void 0:Ne.color}};return(de,Ne)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(de.type),unref(n).is(de.status),{[unref(n).m("without-text")]:!de.showText,[unref(n).m("text-inside")]:de.textInside}]),role:"progressbar","aria-valuenow":de.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[de.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(n).be("bar","outer")),style:normalizeStyle({height:`${de.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(n).be("bar","inner"),{[unref(n).bem("bar","inner","indeterminate")]:de.indeterminate},{[unref(n).bem("bar","inner","striped")]:de.striped},{[unref(n).bem("bar","inner","striped-flow")]:de.stripedFlow}]),style:normalizeStyle(unref(g))},[(de.showText||de.$slots.default)&&de.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).be("bar","innerText"))},[renderSlot(de.$slots,"default",{percentage:de.percentage},()=>[createBaseVNode("span",null,toDisplayString(unref(ie)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(n).b("circle")),style:normalizeStyle({height:`${de.width}px`,width:`${de.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$c,[createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","track")),d:unref(k),stroke:`var(${unref(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":de.strokeLinecap,"stroke-width":unref(y),fill:"none",style:normalizeStyle(unref(z))},null,14,_hoisted_3$9),createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","path")),d:unref(k),stroke:unref(oe),fill:"none",opacity:de.percentage?1:0,"stroke-linecap":de.strokeLinecap,"stroke-width":unref(y),style:normalizeStyle(unref(re))},null,14,_hoisted_4$7)]))],6)),(de.showText||de.$slots.default)&&!de.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(n).e("text")),style:normalizeStyle({fontSize:`${unref(ue)}px`})},[renderSlot(de.$slots,"default",{percentage:de.percentage},()=>[de.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(le))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$6,toDisplayString(unref(ie)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$i))}});var Progress=_export_sfc$1(_sfc_main$o,[["__file","progress.vue"]]);const ElProgress=withInstall(Progress),spaceItemProps=buildProps({prefixCls:{type:String}}),SpaceItem=defineComponent({name:"ElSpaceItem",props:spaceItemProps,setup(t,{slots:r}){const e=useNamespace("space"),n=computed(()=>`${t.prefixCls||e.b()}__item`);return()=>h$1("div",{class:n.value},renderSlot(r,"default"))}}),SIZE_MAP={small:8,default:12,large:16};function useSpace(t){const r=useNamespace("space"),e=computed(()=>[r.b(),r.m(t.direction),t.class]),n=ref(0),g=ref(0),y=computed(()=>{const k=t.wrap||t.fill?{flexWrap:"wrap"}:{},L={alignItems:t.alignment},$={rowGap:`${g.value}px`,columnGap:`${n.value}px`};return[k,L,$,t.style]}),i=computed(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return watchEffect(()=>{const{size:k="small",wrap:L,direction:$,fill:V}=t;if(isArray$3(k)){const[z=0,re=0]=k;n.value=z,g.value=re}else{let z;isNumber$1(k)?z=k:z=SIZE_MAP[k||"small"]||SIZE_MAP.small,(L||V)&&$==="horizontal"?n.value=g.value=z:$==="horizontal"?(n.value=z,g.value=0):(g.value=z,n.value=0)}}),{classes:e,containerStyle:y,itemStyle:i}}const spaceProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:definePropType([String,Object,Array]),default:""},style:{type:definePropType([String,Array,Object]),default:""},alignment:{type:definePropType(String),default:"center"},prefixCls:{type:String},spacer:{type:definePropType([Object,String,Number,Array]),default:null,validator:t=>isVNode(t)||isNumber$1(t)||isString$2(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:componentSizes,validator:t=>isNumber$1(t)||isArray$3(t)&&t.length===2&&t.every(isNumber$1)}}),Space=defineComponent({name:"ElSpace",props:spaceProps,setup(t,{slots:r}){const{classes:e,containerStyle:n,itemStyle:g}=useSpace(t);function y(i,k="",L=[]){const{prefixCls:$}=t;return i.forEach((V,z)=>{isFragment(V)?isArray$3(V.children)&&V.children.forEach((re,oe)=>{isFragment(re)&&isArray$3(re.children)?y(re.children,`${k+oe}-`,L):L.push(createVNode(SpaceItem,{style:g.value,prefixCls:$,key:`nested-${k+oe}`},{default:()=>[re]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}):isValidElementNode(V)&&L.push(createVNode(SpaceItem,{style:g.value,prefixCls:$,key:`LoopKey${k+z}`},{default:()=>[V]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}),L}return()=>{var i;const{spacer:k,direction:L}=t,$=renderSlot(r,"default",{key:0},()=>[]);if(((i=$.children)!=null?i:[]).length===0)return null;if(isArray$3($.children)){let V=y($.children);if(k){const z=V.length-1;V=V.reduce((re,oe,le)=>{const ue=[...re,oe];return le!==z&&ue.push(createVNode("span",{style:[g.value,L==="vertical"?"width: 100%":null],key:le},[isVNode(k)?k:createTextVNode(k,PatchFlags.TEXT)],PatchFlags.STYLE)),ue},[])}return createVNode("div",{class:e.value,style:n.value},V,PatchFlags.STYLE|PatchFlags.CLASS)}return $.children}}}),ElSpace=withInstall(Space),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...useAriaProps(["ariaLabel"])}),switchEmits={[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[CHANGE_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[INPUT_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t)},_hoisted_1$h=["onClick"],_hoisted_2$b=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$8=["aria-hidden"],_hoisted_4$6=["aria-hidden"],_hoisted_5$5=["aria-hidden"],COMPONENT_NAME$1="ElSwitch",__default__$5=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$n=defineComponent({...__default__$5,props:switchProps,emits:switchEmits,setup(t,{expose:r,emit:e}){const n=t,{formItem:g}=useFormItem(),y=useFormSize(),i=useNamespace("switch"),{inputId:k}=useFormItemInputId(n,{formItemContext:g}),L=useFormDisabled(computed(()=>n.loading)),$=ref(n.modelValue!==!1),V=ref(),z=ref(),re=computed(()=>[i.b(),i.m(y.value),i.is("disabled",L.value),i.is("checked",ae.value)]),oe=computed(()=>[i.e("label"),i.em("label","left"),i.is("active",!ae.value)]),le=computed(()=>[i.e("label"),i.em("label","right"),i.is("active",ae.value)]),ue=computed(()=>({width:addUnit(n.width)}));watch(()=>n.modelValue,()=>{$.value=!0});const ie=computed(()=>$.value?n.modelValue:!1),ae=computed(()=>ie.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(ie.value)||(e(UPDATE_MODEL_EVENT,n.inactiveValue),e(CHANGE_EVENT,n.inactiveValue),e(INPUT_EVENT,n.inactiveValue)),watch(ae,Ve=>{var ze;V.value.checked=Ve,n.validateEvent&&((ze=g==null?void 0:g.validate)==null||ze.call(g,"change").catch(jt=>void 0))});const Fe=()=>{const Ve=ae.value?n.inactiveValue:n.activeValue;e(UPDATE_MODEL_EVENT,Ve),e(CHANGE_EVENT,Ve),e(INPUT_EVENT,Ve),nextTick(()=>{V.value.checked=ae.value})},de=()=>{if(L.value)return;const{beforeChange:Ve}=n;if(!Ve){Fe();return}const ze=Ve();[isPromise(ze),isBoolean$1(ze)].includes(!0)||throwError(COMPONENT_NAME$1,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(ze)?ze.then(kt=>{kt&&Fe()}).catch(kt=>{}):ze&&Fe()},Ne=()=>{var Ve,ze;(ze=(Ve=V.value)==null?void 0:Ve.focus)==null||ze.call(Ve)};return onMounted(()=>{V.value.checked=ae.value}),useDeprecated({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},computed(()=>!!n.label)),r({focus:Ne,checked:ae}),(Ve,ze)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(re)),onClick:withModifiers(de,["prevent"])},[createBaseVNode("input",{id:unref(k),ref_key:"input",ref:V,class:normalizeClass(unref(i).e("input")),type:"checkbox",role:"switch","aria-checked":unref(ae),"aria-disabled":unref(L),"aria-label":Ve.label||Ve.ariaLabel,name:Ve.name,"true-value":Ve.activeValue,"false-value":Ve.inactiveValue,disabled:unref(L),tabindex:Ve.tabindex,onChange:Fe,onKeydown:withKeys(de,["enter"])},null,42,_hoisted_2$b),!Ve.inlinePrompt&&(Ve.inactiveIcon||Ve.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(oe))},[Ve.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ve.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!Ve.inactiveIcon&&Ve.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(ae)},toDisplayString(Ve.inactiveText),9,_hoisted_3$8)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:z,class:normalizeClass(unref(i).e("core")),style:normalizeStyle(unref(ue))},[Ve.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(i).e("inner"))},[Ve.activeIcon||Ve.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(i).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ae)?Ve.activeIcon:Ve.inactiveIcon)))]),_:1},8,["class"])):Ve.activeText||Ve.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(i).is("text")),"aria-hidden":!unref(ae)},toDisplayString(unref(ae)?Ve.activeText:Ve.inactiveText),11,_hoisted_4$6)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(i).e("action"))},[Ve.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(i).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):unref(ae)?renderSlot(Ve.$slots,"active-action",{key:1},()=>[Ve.activeActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ve.activeActionIcon)))]),_:1})):createCommentVNode("v-if",!0)]):unref(ae)?createCommentVNode("v-if",!0):renderSlot(Ve.$slots,"inactive-action",{key:2},()=>[Ve.inactiveActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ve.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)])],2)],6),!Ve.inlinePrompt&&(Ve.activeIcon||Ve.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(le))},[Ve.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ve.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!Ve.activeIcon&&Ve.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(ae)},toDisplayString(Ve.activeText),9,_hoisted_5$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],10,_hoisted_1$h))}});var Switch=_export_sfc$1(_sfc_main$n,[["__file","switch.vue"]]);const ElSwitch=withInstall(Switch),getCell=function(t){var r;return(r=t.target)==null?void 0:r.closest("td")},orderBy=function(t,r,e,n,g){if(!r&&!n&&(!g||Array.isArray(g)&&!g.length))return t;typeof e=="string"?e=e==="descending"?-1:1:e=e&&e<0?-1:1;const y=n?null:function(k,L){return g?(Array.isArray(g)||(g=[g]),g.map($=>typeof $=="string"?get(k,$):$(k,L,t))):(r!=="$key"&&isObject$2(k)&&"$value"in k&&(k=k.$value),[isObject$2(k)?get(k,r):k])},i=function(k,L){if(n)return n(k.value,L.value);for(let $=0,V=k.key.length;$<V;$++){if(k.key[$]<L.key[$])return-1;if(k.key[$]>L.key[$])return 1}return 0};return t.map((k,L)=>({value:k,index:L,key:y?y(k,L):null})).sort((k,L)=>{let $=i(k,L);return $||($=k.index-L.index),$*+e}).map(k=>k.value)},getColumnById=function(t,r){let e=null;return t.columns.forEach(n=>{n.id===r&&(e=n)}),e},getColumnByKey=function(t,r){let e=null;for(let n=0;n<t.columns.length;n++){const g=t.columns[n];if(g.columnKey===r){e=g;break}}return e||throwError("ElTable",`No column matching with column-key: ${r}`),e},getColumnByCell=function(t,r,e){const n=(r.className||"").match(new RegExp(`${e}-table_[^\\s]+`,"gm"));return n?getColumnById(t,n[0]):null},getRowIdentity=(t,r)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof r=="string"){if(!r.includes("."))return`${t[r]}`;const e=r.split(".");let n=t;for(const g of e)n=n[g];return`${n}`}else if(typeof r=="function")return r.call(null,t)},getKeysMap=function(t,r){const e={};return(t||[]).forEach((n,g)=>{e[getRowIdentity(n,r)]={row:n,index:g}}),e};function mergeOptions(t,r){const e={};let n;for(n in t)e[n]=t[n];for(n in r)if(hasOwn(r,n)){const g=r[n];typeof g<"u"&&(e[n]=g)}return e}function parseWidth(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function parseMinWidth(t){return t===""||t!==void 0&&(t=parseWidth(t),Number.isNaN(t)&&(t=80)),t}function parseHeight(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function compose(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,e)=>(...n)=>r(e(...n)))}function toggleRowStatus(t,r,e){let n=!1;const g=t.indexOf(r),y=g!==-1,i=k=>{k==="add"?t.push(r):t.splice(g,1),n=!0,isArray$3(r.children)&&r.children.forEach(L=>{toggleRowStatus(t,L,e??!y)})};return isBoolean$1(e)?e&&!y?i("add"):!e&&y&&i("remove"):i(y?"remove":"add"),n}function walkTreeNode(t,r,e="children",n="hasChildren"){const g=i=>!(Array.isArray(i)&&i.length);function y(i,k,L){r(i,k,L),k.forEach($=>{if($[n]){r($,null,L+1);return}const V=$[e];g(V)||y($,V,L+1)})}t.forEach(i=>{if(i[n]){r(i,null,0);return}const k=i[e];g(k)||y(i,k,0)})}let removePopper=null;function createTablePopper(t,r,e,n){if((removePopper==null?void 0:removePopper.trigger)===e)return;removePopper==null||removePopper();const g=n==null?void 0:n.refs.tableWrapper,y=g==null?void 0:g.dataset.prefix,i={strategy:"fixed",...t.popperOptions},k=createVNode(ElTooltip,{content:r,virtualTriggering:!0,virtualRef:e,appendTo:g,placement:"top",transition:"none",offset:0,hideAfter:0,...t,popperOptions:i,onHide:()=>{removePopper==null||removePopper()}});k.appContext={...n.appContext,...n};const L=document.createElement("div");render(k,L),k.component.exposed.onOpen();const $=g==null?void 0:g.querySelector(`.${y}-scrollbar__wrap`);removePopper=()=>{render(null,L),$==null||$.removeEventListener("scroll",removePopper),removePopper=null},removePopper.trigger=e,$==null||$.addEventListener("scroll",removePopper)}function getCurrentColumns(t){return t.children?flatMap(t.children,getCurrentColumns):[t]}function getColSpan(t,r){return t+r.colSpan}const isFixedColumn=(t,r,e,n)=>{let g=0,y=t;const i=e.states.columns.value;if(n){const L=getCurrentColumns(n[t]);g=i.slice(0,i.indexOf(L[0])).reduce(getColSpan,0),y=g+L.reduce(getColSpan,0)-1}else g=t;let k;switch(r){case"left":y<e.states.fixedLeafColumnsLength.value&&(k="left");break;case"right":g>=i.length-e.states.rightFixedLeafColumnsLength.value&&(k="right");break;default:y<e.states.fixedLeafColumnsLength.value?k="left":g>=i.length-e.states.rightFixedLeafColumnsLength.value&&(k="right")}return k?{direction:k,start:g,after:y}:{}},getFixedColumnsClass=(t,r,e,n,g,y=0)=>{const i=[],{direction:k,start:L,after:$}=isFixedColumn(r,e,n,g);if(k){const V=k==="left";i.push(`${t}-fixed-column--${k}`),V&&$+y===n.states.fixedLeafColumnsLength.value-1?i.push("is-last-column"):!V&&L-y===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&i.push("is-first-column")}return i};function getOffset(t,r){return t+(r.realWidth===null||Number.isNaN(r.realWidth)?Number(r.width):r.realWidth)}const getFixedColumnOffset=(t,r,e,n)=>{const{direction:g,start:y=0,after:i=0}=isFixedColumn(t,r,e,n);if(!g)return;const k={},L=g==="left",$=e.states.columns.value;return L?k.left=$.slice(0,y).reduce(getOffset,0):k.right=$.slice(i+1).reverse().reduce(getOffset,0),k},ensurePosition=(t,r)=>{t&&(Number.isNaN(t[r])||(t[r]=`${t[r]}px`))};function useExpand(t){const r=getCurrentInstance(),e=ref(!1),n=ref([]);return{updateExpandRows:()=>{const L=t.data.value||[],$=t.rowKey.value;if(e.value)n.value=L.slice();else if($){const V=getKeysMap(n.value,$);n.value=L.reduce((z,re)=>{const oe=getRowIdentity(re,$);return V[oe]&&z.push(re),z},[])}else n.value=[]},toggleRowExpansion:(L,$)=>{toggleRowStatus(n.value,L,$)&&r.emit("expand-change",L,n.value.slice())},setExpandRowKeys:L=>{r.store.assertRowKey();const $=t.data.value||[],V=t.rowKey.value,z=getKeysMap($,V);n.value=L.reduce((re,oe)=>{const le=z[oe];return le&&re.push(le.row),re},[])},isRowExpanded:L=>{const $=t.rowKey.value;return $?!!getKeysMap(n.value,$)[getRowIdentity(L,$)]:n.value.includes(L)},states:{expandRows:n,defaultExpandAll:e}}}function useCurrent(t){const r=getCurrentInstance(),e=ref(null),n=ref(null),g=$=>{r.store.assertRowKey(),e.value=$,i($)},y=()=>{e.value=null},i=$=>{const{data:V,rowKey:z}=t;let re=null;z.value&&(re=(unref(V)||[]).find(oe=>getRowIdentity(oe,z.value)===$)),n.value=re,r.emit("current-change",n.value,null)};return{setCurrentRowKey:g,restoreCurrentRowKey:y,setCurrentRowByKey:i,updateCurrentRow:$=>{const V=n.value;if($&&$!==V){n.value=$,r.emit("current-change",n.value,V);return}!$&&V&&(n.value=null,r.emit("current-change",null,V))},updateCurrentRowData:()=>{const $=t.rowKey.value,V=t.data.value||[],z=n.value;if(!V.includes(z)&&z){if($){const re=getRowIdentity(z,$);i(re)}else n.value=null;n.value===null&&r.emit("current-change",null,z)}else e.value&&(i(e.value),y())},states:{_currentRowKey:e,currentRow:n}}}function useTree(t){const r=ref([]),e=ref({}),n=ref(16),g=ref(!1),y=ref({}),i=ref("hasChildren"),k=ref("children"),L=getCurrentInstance(),$=computed(()=>{if(!t.rowKey.value)return{};const ae=t.data.value||[];return z(ae)}),V=computed(()=>{const ae=t.rowKey.value,Fe=Object.keys(y.value),de={};return Fe.length&&Fe.forEach(Ne=>{if(y.value[Ne].length){const Ve={children:[]};y.value[Ne].forEach(ze=>{const jt=getRowIdentity(ze,ae);Ve.children.push(jt),ze[i.value]&&!de[jt]&&(de[jt]={children:[]})}),de[Ne]=Ve}}),de}),z=ae=>{const Fe=t.rowKey.value,de={};return walkTreeNode(ae,(Ne,Ve,ze)=>{const jt=getRowIdentity(Ne,Fe);Array.isArray(Ve)?de[jt]={children:Ve.map(kt=>getRowIdentity(kt,Fe)),level:ze}:g.value&&(de[jt]={children:[],lazy:!0,level:ze})},k.value,i.value),de},re=(ae=!1,Fe=(de=>(de=L.store)==null?void 0:de.states.defaultExpandAll.value)())=>{var de;const Ne=$.value,Ve=V.value,ze=Object.keys(Ne),jt={};if(ze.length){const kt=unref(e),Et=[],lr=(or,dr)=>{if(ae)return r.value?Fe||r.value.includes(dr):!!(Fe||or!=null&&or.expanded);{const cr=Fe||r.value&&r.value.includes(dr);return!!(or!=null&&or.expanded||cr)}};ze.forEach(or=>{const dr=kt[or],cr={...Ne[or]};if(cr.expanded=lr(dr,or),cr.lazy){const{loaded:nr=!1,loading:ur=!1}=dr||{};cr.loaded=!!nr,cr.loading=!!ur,Et.push(or)}jt[or]=cr});const tr=Object.keys(Ve);g.value&&tr.length&&Et.length&&tr.forEach(or=>{const dr=kt[or],cr=Ve[or].children;if(Et.includes(or)){if(jt[or].children.length!==0)throw new Error("[ElTable]children must be an empty array.");jt[or].children=cr}else{const{loaded:nr=!1,loading:ur=!1}=dr||{};jt[or]={lazy:!0,loaded:!!nr,loading:!!ur,expanded:lr(dr,or),children:cr,level:""}}})}e.value=jt,(de=L.store)==null||de.updateTableScrollY()};watch(()=>r.value,()=>{re(!0)}),watch(()=>$.value,()=>{re()}),watch(()=>V.value,()=>{re()});const oe=ae=>{r.value=ae,re()},le=(ae,Fe)=>{L.store.assertRowKey();const de=t.rowKey.value,Ne=getRowIdentity(ae,de),Ve=Ne&&e.value[Ne];if(Ne&&Ve&&"expanded"in Ve){const ze=Ve.expanded;Fe=typeof Fe>"u"?!Ve.expanded:Fe,e.value[Ne].expanded=Fe,ze!==Fe&&L.emit("expand-change",ae,Fe),L.store.updateTableScrollY()}},ue=ae=>{L.store.assertRowKey();const Fe=t.rowKey.value,de=getRowIdentity(ae,Fe),Ne=e.value[de];g.value&&Ne&&"loaded"in Ne&&!Ne.loaded?ie(ae,de,Ne):le(ae,void 0)},ie=(ae,Fe,de)=>{const{load:Ne}=L.props;Ne&&!e.value[Fe].loaded&&(e.value[Fe].loading=!0,Ne(ae,de,Ve=>{if(!Array.isArray(Ve))throw new TypeError("[ElTable] data must be an array");e.value[Fe].loading=!1,e.value[Fe].loaded=!0,e.value[Fe].expanded=!0,Ve.length&&(y.value[Fe]=Ve),L.emit("expand-change",ae,!0)}))};return{loadData:ie,loadOrToggle:ue,toggleTreeExpansion:le,updateTreeExpandKeys:oe,updateTreeData:re,normalize:z,states:{expandRowKeys:r,treeData:e,indent:n,lazy:g,lazyTreeNodeMap:y,lazyColumnIdentifier:i,childrenColumnName:k}}}const sortData=(t,r)=>{const e=r.sortingColumn;return!e||typeof e.sortable=="string"?t:orderBy(t,r.sortProp,r.sortOrder,e.sortMethod,e.sortBy)},doFlattenColumns=t=>{const r=[];return t.forEach(e=>{e.children&&e.children.length>0?r.push.apply(r,doFlattenColumns(e.children)):r.push(e)}),r};function useWatcher$1(){var t;const r=getCurrentInstance(),{size:e}=toRefs((t=r.proxy)==null?void 0:t.$props),n=ref(null),g=ref([]),y=ref([]),i=ref(!1),k=ref([]),L=ref([]),$=ref([]),V=ref([]),z=ref([]),re=ref([]),oe=ref([]),le=ref([]),ue=[],ie=ref(0),ae=ref(0),Fe=ref(0),de=ref(!1),Ne=ref([]),Ve=ref(!1),ze=ref(!1),jt=ref(null),kt=ref({}),Et=ref(null),lr=ref(null),tr=ref(null),or=ref(null),dr=ref(null);watch(g,()=>r.state&&ar(!1),{deep:!0});const cr=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},nr=wn=>{var Pn;(Pn=wn.children)==null||Pn.forEach(oo=>{oo.fixed=wn.fixed,nr(oo)})},ur=()=>{k.value.forEach(An=>{nr(An)}),V.value=k.value.filter(An=>An.fixed===!0||An.fixed==="left"),z.value=k.value.filter(An=>An.fixed==="right"),V.value.length>0&&k.value[0]&&k.value[0].type==="selection"&&!k.value[0].fixed&&(k.value[0].fixed=!0,V.value.unshift(k.value[0]));const wn=k.value.filter(An=>!An.fixed);L.value=[].concat(V.value).concat(wn).concat(z.value);const Pn=doFlattenColumns(wn),oo=doFlattenColumns(V.value),Rn=doFlattenColumns(z.value);ie.value=Pn.length,ae.value=oo.length,Fe.value=Rn.length,$.value=[].concat(oo).concat(Pn).concat(Rn),i.value=V.value.length>0||z.value.length>0},ar=(wn,Pn=!1)=>{wn&&ur(),Pn?r.state.doLayout():r.state.debouncedUpdateLayout()},gr=wn=>Ne.value.includes(wn),pr=()=>{de.value=!1;const wn=Ne.value;Ne.value=[],wn.length&&r.emit("selection-change",[])},yr=()=>{let wn;if(n.value){wn=[];const Pn=getKeysMap(Ne.value,n.value),oo=getKeysMap(g.value,n.value);for(const Rn in Pn)hasOwn(Pn,Rn)&&!oo[Rn]&&wn.push(Pn[Rn].row)}else wn=Ne.value.filter(Pn=>!g.value.includes(Pn));if(wn.length){const Pn=Ne.value.filter(oo=>!wn.includes(oo));Ne.value=Pn,r.emit("selection-change",Pn.slice())}},Sr=()=>(Ne.value||[]).slice(),wr=(wn,Pn=void 0,oo=!0)=>{if(toggleRowStatus(Ne.value,wn,Pn)){const An=(Ne.value||[]).slice();oo&&r.emit("select",An,wn),r.emit("selection-change",An)}},Mr=()=>{var wn,Pn;const oo=ze.value?!de.value:!(de.value||Ne.value.length);de.value=oo;let Rn=!1,An=0;const to=(Pn=(wn=r==null?void 0:r.store)==null?void 0:wn.states)==null?void 0:Pn.rowKey.value;g.value.forEach((uo,Eo)=>{const Oo=Eo+An;jt.value?jt.value.call(null,uo,Oo)&&toggleRowStatus(Ne.value,uo,oo)&&(Rn=!0):toggleRowStatus(Ne.value,uo,oo)&&(Rn=!0),An+=Nr(getRowIdentity(uo,to))}),Rn&&r.emit("selection-change",Ne.value?Ne.value.slice():[]),r.emit("select-all",(Ne.value||[]).slice())},mr=()=>{const wn=getKeysMap(Ne.value,n.value);g.value.forEach(Pn=>{const oo=getRowIdentity(Pn,n.value),Rn=wn[oo];Rn&&(Ne.value[Rn.index]=Pn)})},_r=()=>{var wn,Pn,oo;if(((wn=g.value)==null?void 0:wn.length)===0){de.value=!1;return}let Rn;n.value&&(Rn=getKeysMap(Ne.value,n.value));const An=function(Oo){return Rn?!!Rn[getRowIdentity(Oo,n.value)]:Ne.value.includes(Oo)};let to=!0,uo=0,Eo=0;for(let Oo=0,$o=(g.value||[]).length;Oo<$o;Oo++){const ua=(oo=(Pn=r==null?void 0:r.store)==null?void 0:Pn.states)==null?void 0:oo.rowKey.value,gs=Oo+Eo,Co=g.value[Oo],Ps=jt.value&&jt.value.call(null,Co,gs);if(An(Co))uo++;else if(!jt.value||Ps){to=!1;break}Eo+=Nr(getRowIdentity(Co,ua))}uo===0&&(to=!1),de.value=to},Nr=wn=>{var Pn;if(!r||!r.store)return 0;const{treeData:oo}=r.store.states;let Rn=0;const An=(Pn=oo.value[wn])==null?void 0:Pn.children;return An&&(Rn+=An.length,An.forEach(to=>{Rn+=Nr(to)})),Rn},Pr=(wn,Pn)=>{Array.isArray(wn)||(wn=[wn]);const oo={};return wn.forEach(Rn=>{kt.value[Rn.id]=Pn,oo[Rn.columnKey||Rn.id]=Pn}),oo},sr=(wn,Pn,oo)=>{lr.value&&lr.value!==wn&&(lr.value.order=null),lr.value=wn,tr.value=Pn,or.value=oo},Ir=()=>{let wn=unref(y);Object.keys(kt.value).forEach(Pn=>{const oo=kt.value[Pn];if(!oo||oo.length===0)return;const Rn=getColumnById({columns:$.value},Pn);Rn&&Rn.filterMethod&&(wn=wn.filter(An=>oo.some(to=>Rn.filterMethod.call(null,to,An,Rn))))}),Et.value=wn},Ar=()=>{g.value=sortData(Et.value,{sortingColumn:lr.value,sortProp:tr.value,sortOrder:or.value})},Cr=(wn=void 0)=>{wn&&wn.filter||Ir(),Ar()},br=wn=>{const{tableHeaderRef:Pn}=r.refs;if(!Pn)return;const oo=Object.assign({},Pn.filterPanels),Rn=Object.keys(oo);if(Rn.length)if(typeof wn=="string"&&(wn=[wn]),Array.isArray(wn)){const An=wn.map(to=>getColumnByKey({columns:$.value},to));Rn.forEach(to=>{const uo=An.find(Eo=>Eo.id===to);uo&&(uo.filteredValue=[])}),r.store.commit("filterChange",{column:An,values:[],silent:!0,multi:!0})}else Rn.forEach(An=>{const to=$.value.find(uo=>uo.id===An);to&&(to.filteredValue=[])}),kt.value={},r.store.commit("filterChange",{column:{},values:[],silent:!0})},vr=()=>{lr.value&&(sr(null,null,null),r.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Tr,toggleRowExpansion:Br,updateExpandRows:Lr,states:Fr,isRowExpanded:qr}=useExpand({data:g,rowKey:n}),{updateTreeExpandKeys:Vr,toggleTreeExpansion:Qr,updateTreeData:Sn,loadOrToggle:Mn,states:Xr}=useTree({data:g,rowKey:n}),{updateCurrentRowData:Wn,updateCurrentRow:Zr,setCurrentRowKey:En,states:Jr}=useCurrent({data:g,rowKey:n});return{assertRowKey:cr,updateColumns:ur,scheduleLayout:ar,isSelected:gr,clearSelection:pr,cleanSelection:yr,getSelectionRows:Sr,toggleRowSelection:wr,_toggleAllSelection:Mr,toggleAllSelection:null,updateSelectionByRowKey:mr,updateAllSelected:_r,updateFilters:Pr,updateCurrentRow:Zr,updateSort:sr,execFilter:Ir,execSort:Ar,execQuery:Cr,clearFilter:br,clearSort:vr,toggleRowExpansion:Br,setExpandRowKeysAdapter:wn=>{Tr(wn),Vr(wn)},setCurrentRowKey:En,toggleRowExpansionAdapter:(wn,Pn)=>{$.value.some(({type:Rn})=>Rn==="expand")?Br(wn,Pn):Qr(wn,Pn)},isRowExpanded:qr,updateExpandRows:Lr,updateCurrentRowData:Wn,loadOrToggle:Mn,updateTreeData:Sn,states:{tableSize:e,rowKey:n,data:g,_data:y,isComplex:i,_columns:k,originColumns:L,columns:$,fixedColumns:V,rightFixedColumns:z,leafColumns:re,fixedLeafColumns:oe,rightFixedLeafColumns:le,updateOrderFns:ue,leafColumnsLength:ie,fixedLeafColumnsLength:ae,rightFixedLeafColumnsLength:Fe,isAllSelected:de,selection:Ne,reserveSelection:Ve,selectOnIndeterminate:ze,selectable:jt,filters:kt,filteredData:Et,sortingColumn:lr,sortProp:tr,sortOrder:or,hoverRow:dr,...Fr,...Xr,...Jr}}}function replaceColumn(t,r){return t.map(e=>{var n;return e.id===r.id?r:((n=e.children)!=null&&n.length&&(e.children=replaceColumn(e.children,r)),e)})}function sortColumn(t){t.forEach(r=>{var e,n;r.no=(e=r.getColumnIndex)==null?void 0:e.call(r),(n=r.children)!=null&&n.length&&sortColumn(r.children)}),t.sort((r,e)=>r.no-e.no)}function useStore(){const t=getCurrentInstance(),r=useWatcher$1();return{ns:useNamespace("table"),...r,mutations:{setData(i,k){const L=unref(i._data)!==k;i.data.value=k,i._data.value=k,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),unref(i.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):L?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(i,k,L,$){const V=unref(i._columns);let z=[];L?(L&&!L.children&&(L.children=[]),L.children.push(k),z=replaceColumn(V,L)):(V.push(k),z=V),sortColumn(z),i._columns.value=z,i.updateOrderFns.push($),k.type==="selection"&&(i.selectable.value=k.selectable,i.reserveSelection.value=k.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(i,k){var L;((L=k.getColumnIndex)==null?void 0:L.call(k))!==k.no&&(sortColumn(i._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(i,k,L,$){const V=unref(i._columns)||[];if(L)L.children.splice(L.children.findIndex(re=>re.id===k.id),1),nextTick(()=>{var re;((re=L.children)==null?void 0:re.length)===0&&delete L.children}),i._columns.value=replaceColumn(V,L);else{const re=V.indexOf(k);re>-1&&(V.splice(re,1),i._columns.value=V)}const z=i.updateOrderFns.indexOf($);z>-1&&i.updateOrderFns.splice(z,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(i,k){const{prop:L,order:$,init:V}=k;if(L){const z=unref(i.columns).find(re=>re.property===L);z&&(z.order=$,t.store.updateSort(z,L,$),t.store.commit("changeSortCondition",{init:V}))}},changeSortCondition(i,k){const{sortingColumn:L,sortProp:$,sortOrder:V}=i,z=unref(L),re=unref($),oe=unref(V);oe===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const le={filter:!0};t.store.execQuery(le),(!k||!(k.silent||k.init))&&t.emit("sort-change",{column:z,prop:re,order:oe}),t.store.updateTableScrollY()},filterChange(i,k){const{column:L,values:$,silent:V}=k,z=t.store.updateFilters(L,$);t.store.execQuery(),V||t.emit("filter-change",z),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(i,k){t.store.toggleRowSelection(k),t.store.updateAllSelected()},setHoverRow(i,k){i.hoverRow.value=k},setCurrentRow(i,k){t.store.updateCurrentRow(k)}},commit:function(i,...k){const L=t.store.mutations;if(L[i])L[i].apply(t,[t.store.states].concat(k));else throw new Error(`Action not found: ${i}`)},updateTableScrollY:function(){nextTick(()=>t.layout.updateScrollY.apply(t.layout))}}}const InitialStateMap={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function createStore(t,r){if(!t)throw new Error("Table is required.");const e=useStore();return e.toggleAllSelection=debounce(e._toggleAllSelection,10),Object.keys(InitialStateMap).forEach(n=>{handleValue(getArrKeysValue(r,n),n,e)}),proxyTableProps(e,r),e}function proxyTableProps(t,r){Object.keys(InitialStateMap).forEach(e=>{watch(()=>getArrKeysValue(r,e),n=>{handleValue(n,e,t)})})}function handleValue(t,r,e){let n=t,g=InitialStateMap[r];typeof InitialStateMap[r]=="object"&&(g=g.key,n=n||InitialStateMap[r].default),e.states[g].value=n}function getArrKeysValue(t,r){if(r.includes(".")){const e=r.split(".");let n=t;return e.forEach(g=>{n=n[g]}),n}else return t[r]}class TableLayout{constructor(r){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ref(null),this.scrollX=ref(!1),this.scrollY=ref(!1),this.bodyWidth=ref(null),this.fixedWidth=ref(null),this.rightFixedWidth=ref(null),this.gutterWidth=0;for(const e in r)hasOwn(r,e)&&(isRef(this[e])?this[e].value=r[e]:this[e]=r[e]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const e=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(e!=null&&e.wrapRef)){let n=!0;const g=this.scrollY.value;return n=e.wrapRef.scrollHeight>e.wrapRef.clientHeight,this.scrollY.value=n,g!==n}return!1}setHeight(r,e="height"){if(!isClient)return;const n=this.table.vnode.el;if(r=parseHeight(r),this.height.value=Number(r),!n&&(r||r===0))return nextTick(()=>this.setHeight(r,e));typeof r=="number"?(n.style[e]=`${r}px`,this.updateElsHeight()):typeof r=="string"&&(n.style[e]=r,this.updateElsHeight())}setMaxHeight(r){this.setHeight(r,"max-height")}getFlattenColumns(){const r=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?r.push.apply(r,n.columns):r.push(n)}),r}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(r){if(!r)return!0;let e=r;for(;e.tagName!=="DIV";){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}updateColumnsWidth(){if(!isClient)return;const r=this.fit,e=this.table.vnode.el.clientWidth;let n=0;const g=this.getFlattenColumns(),y=g.filter(L=>typeof L.width!="number");if(g.forEach(L=>{typeof L.width=="number"&&L.realWidth&&(L.realWidth=null)}),y.length>0&&r){if(g.forEach(L=>{n+=Number(L.width||L.minWidth||80)}),n<=e){this.scrollX.value=!1;const L=e-n;if(y.length===1)y[0].realWidth=Number(y[0].minWidth||80)+L;else{const $=y.reduce((re,oe)=>re+Number(oe.minWidth||80),0),V=L/$;let z=0;y.forEach((re,oe)=>{if(oe===0)return;const le=Math.floor(Number(re.minWidth||80)*V);z+=le,re.realWidth=Number(re.minWidth||80)+le}),y[0].realWidth=Number(y[0].minWidth||80)+L-z}}else this.scrollX.value=!0,y.forEach(L=>{L.realWidth=Number(L.minWidth)});this.bodyWidth.value=Math.max(n,e),this.table.state.resizeState.value.width=this.bodyWidth.value}else g.forEach(L=>{!L.width&&!L.minWidth?L.realWidth=80:L.realWidth=Number(L.width||L.minWidth),n+=L.realWidth}),this.scrollX.value=n>e,this.bodyWidth.value=n;const i=this.store.states.fixedColumns.value;if(i.length>0){let L=0;i.forEach($=>{L+=Number($.realWidth||$.width)}),this.fixedWidth.value=L}const k=this.store.states.rightFixedColumns.value;if(k.length>0){let L=0;k.forEach($=>{L+=Number($.realWidth||$.width)}),this.rightFixedWidth.value=L}this.notifyObservers("columns")}addObserver(r){this.observers.push(r)}removeObserver(r){const e=this.observers.indexOf(r);e!==-1&&this.observers.splice(e,1)}notifyObservers(r){this.observers.forEach(n=>{var g,y;switch(r){case"columns":(g=n.state)==null||g.onColumnsChange(this);break;case"scrollable":(y=n.state)==null||y.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${r}.`)}})}}const{CheckboxGroup:ElCheckboxGroup}=ElCheckbox,_sfc_main$m=defineComponent({name:"ElTableFilterPanel",components:{ElCheckbox,ElCheckboxGroup,ElScrollbar,ElTooltip,ElIcon,ArrowDown:arrow_down_default,ArrowUp:arrow_up_default},directives:{ClickOutside},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const r=getCurrentInstance(),{t:e}=useLocale(),n=useNamespace("table-filter"),g=r==null?void 0:r.parent;g.filterPanels.value[t.column.id]||(g.filterPanels.value[t.column.id]=r);const y=ref(!1),i=ref(null),k=computed(()=>t.column&&t.column.filters),L=computed(()=>t.column.filterClassName?`${n.b()} ${t.column.filterClassName}`:n.b()),$=computed({get:()=>{var Ve;return(((Ve=t.column)==null?void 0:Ve.filteredValue)||[])[0]},set:Ve=>{V.value&&(typeof Ve<"u"&&Ve!==null?V.value.splice(0,1,Ve):V.value.splice(0,1))}}),V=computed({get(){return t.column?t.column.filteredValue||[]:[]},set(Ve){t.column&&t.upDataColumn("filteredValue",Ve)}}),z=computed(()=>t.column?t.column.filterMultiple:!0),re=Ve=>Ve.value===$.value,oe=()=>{y.value=!1},le=Ve=>{Ve.stopPropagation(),y.value=!y.value},ue=()=>{y.value=!1},ie=()=>{de(V.value),oe()},ae=()=>{V.value=[],de(V.value),oe()},Fe=Ve=>{$.value=Ve,de(typeof Ve<"u"&&Ve!==null?V.value:[]),oe()},de=Ve=>{t.store.commit("filterChange",{column:t.column,values:Ve}),t.store.updateAllSelected()};watch(y,Ve=>{t.column&&t.upDataColumn("filterOpened",Ve)},{immediate:!0});const Ne=computed(()=>{var Ve,ze;return(ze=(Ve=i.value)==null?void 0:Ve.popperRef)==null?void 0:ze.contentRef});return{tooltipVisible:y,multiple:z,filterClassName:L,filteredValue:V,filterValue:$,filters:k,handleConfirm:ie,handleReset:ae,handleSelect:Fe,isActive:re,t:e,ns:n,showFilterPanel:le,hideFilterPanel:ue,popperPaneRef:Ne,tooltip:i}}}),_hoisted_1$g={key:0},_hoisted_2$a=["disabled"],_hoisted_3$7=["label","onClick"];function _sfc_render$2(t,r,e,n,g,y){const i=resolveComponent("el-checkbox"),k=resolveComponent("el-checkbox-group"),L=resolveComponent("el-scrollbar"),$=resolveComponent("arrow-up"),V=resolveComponent("arrow-down"),z=resolveComponent("el-icon"),re=resolveComponent("el-tooltip"),oe=resolveDirective("click-outside");return openBlock(),createBlock(re,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:""},{content:withCtx(()=>[t.multiple?(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",{class:normalizeClass(t.ns.e("content"))},[createVNode(L,{"wrap-class":t.ns.e("wrap")},{default:withCtx(()=>[createVNode(k,{modelValue:t.filteredValue,"onUpdate:modelValue":r[0]||(r[0]=le=>t.filteredValue=le),class:normalizeClass(t.ns.e("checkbox-group"))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.filters,le=>(openBlock(),createBlock(i,{key:le.value,value:le.value},{default:withCtx(()=>[createTextVNode(toDisplayString(le.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),createBaseVNode("div",{class:normalizeClass(t.ns.e("bottom"))},[createBaseVNode("button",{class:normalizeClass({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:r[1]||(r[1]=(...le)=>t.handleConfirm&&t.handleConfirm(...le))},toDisplayString(t.t("el.table.confirmFilter")),11,_hoisted_2$a),createBaseVNode("button",{type:"button",onClick:r[2]||(r[2]=(...le)=>t.handleReset&&t.handleReset(...le))},toDisplayString(t.t("el.table.resetFilter")),1)],2)])):(openBlock(),createElementBlock("ul",{key:1,class:normalizeClass(t.ns.e("list"))},[createBaseVNode("li",{class:normalizeClass([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:r[3]||(r[3]=le=>t.handleSelect(null))},toDisplayString(t.t("el.table.clearFilter")),3),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.filters,le=>(openBlock(),createElementBlock("li",{key:le.value,class:normalizeClass([t.ns.e("list-item"),t.ns.is("active",t.isActive(le))]),label:le.value,onClick:ue=>t.handleSelect(le.value)},toDisplayString(le.text),11,_hoisted_3$7))),128))],2))]),default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:r[4]||(r[4]=(...le)=>t.showFilterPanel&&t.showFilterPanel(...le))},[createVNode(z,null,{default:withCtx(()=>[t.column.filterOpened?(openBlock(),createBlock($,{key:0})):(openBlock(),createBlock(V,{key:1}))]),_:1})],2)),[[oe,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var FilterPanel=_export_sfc$1(_sfc_main$m,[["render",_sfc_render$2],["__file","filter-panel.vue"]]);function useLayoutObserver(t){const r=getCurrentInstance();onBeforeMount(()=>{e.value.addObserver(r)}),onMounted(()=>{n(e.value),g(e.value)}),onUpdated(()=>{n(e.value),g(e.value)}),onUnmounted(()=>{e.value.removeObserver(r)});const e=computed(()=>{const y=t.layout;if(!y)throw new Error("Can not find table layout.");return y}),n=y=>{var i;const k=((i=t.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!k.length)return;const L=y.getFlattenColumns(),$={};L.forEach(V=>{$[V.id]=V});for(let V=0,z=k.length;V<z;V++){const re=k[V],oe=re.getAttribute("name"),le=$[oe];le&&re.setAttribute("width",le.realWidth||le.width)}},g=y=>{var i,k;const L=((i=t.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let V=0,z=L.length;V<z;V++)L[V].setAttribute("width",y.scrollY.value?y.gutterWidth:"0");const $=((k=t.vnode.el)==null?void 0:k.querySelectorAll("th.gutter"))||[];for(let V=0,z=$.length;V<z;V++){const re=$[V];re.style.width=y.scrollY.value?`${y.gutterWidth}px`:"0",re.style.display=y.scrollY.value?"":"none"}};return{tableLayout:e.value,onColumnsChange:n,onScrollableChange:g}}const TABLE_INJECTION_KEY=Symbol("ElTable");function useEvent(t,r){const e=getCurrentInstance(),n=inject(TABLE_INJECTION_KEY),g=ue=>{ue.stopPropagation()},y=(ue,ie)=>{!ie.filters&&ie.sortable?le(ue,ie,!1):ie.filterable&&!ie.sortable&&g(ue),n==null||n.emit("header-click",ie,ue)},i=(ue,ie)=>{n==null||n.emit("header-contextmenu",ie,ue)},k=ref(null),L=ref(!1),$=ref({}),V=(ue,ie)=>{if(isClient&&!(ie.children&&ie.children.length>0)&&k.value&&t.border){L.value=!0;const ae=n;r("set-drag-visible",!0);const de=(ae==null?void 0:ae.vnode.el).getBoundingClientRect().left,Ne=e.vnode.el.querySelector(`th.${ie.id}`),Ve=Ne.getBoundingClientRect(),ze=Ve.left-de+30;addClass(Ne,"noclick"),$.value={startMouseLeft:ue.clientX,startLeft:Ve.right-de,startColumnLeft:Ve.left-de,tableLeft:de};const jt=ae==null?void 0:ae.refs.resizeProxy;jt.style.left=`${$.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const kt=lr=>{const tr=lr.clientX-$.value.startMouseLeft,or=$.value.startLeft+tr;jt.style.left=`${Math.max(ze,or)}px`},Et=()=>{if(L.value){const{startColumnLeft:lr,startLeft:tr}=$.value,dr=Number.parseInt(jt.style.left,10)-lr;ie.width=ie.realWidth=dr,ae==null||ae.emit("header-dragend",ie.width,tr-lr,ie,ue),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",L.value=!1,k.value=null,$.value={},r("set-drag-visible",!1)}document.removeEventListener("mousemove",kt),document.removeEventListener("mouseup",Et),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{removeClass(Ne,"noclick")},0)};document.addEventListener("mousemove",kt),document.addEventListener("mouseup",Et)}},z=(ue,ie)=>{if(ie.children&&ie.children.length>0)return;const ae=ue.target;if(!isElement(ae))return;const Fe=ae==null?void 0:ae.closest("th");if(!(!ie||!ie.resizable)&&!L.value&&t.border){const de=Fe.getBoundingClientRect(),Ne=document.body.style;de.width>12&&de.right-ue.pageX<8?(Ne.cursor="col-resize",hasClass(Fe,"is-sortable")&&(Fe.style.cursor="col-resize"),k.value=ie):L.value||(Ne.cursor="",hasClass(Fe,"is-sortable")&&(Fe.style.cursor="pointer"),k.value=null)}},re=()=>{isClient&&(document.body.style.cursor="")},oe=({order:ue,sortOrders:ie})=>{if(ue==="")return ie[0];const ae=ie.indexOf(ue||null);return ie[ae>ie.length-2?0:ae+1]},le=(ue,ie,ae)=>{var Fe;ue.stopPropagation();const de=ie.order===ae?null:ae||oe(ie),Ne=(Fe=ue.target)==null?void 0:Fe.closest("th");if(Ne&&hasClass(Ne,"noclick")){removeClass(Ne,"noclick");return}if(!ie.sortable)return;const Ve=t.store.states;let ze=Ve.sortProp.value,jt;const kt=Ve.sortingColumn.value;(kt!==ie||kt===ie&&kt.order===null)&&(kt&&(kt.order=null),Ve.sortingColumn.value=ie,ze=ie.property),de?jt=ie.order=de:jt=ie.order=null,Ve.sortProp.value=ze,Ve.sortOrder.value=jt,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:y,handleHeaderContextMenu:i,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:le,handleFilterClick:g}}function useStyle$2(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table");return{getHeaderRowStyle:k=>{const L=r==null?void 0:r.props.headerRowStyle;return typeof L=="function"?L.call(null,{rowIndex:k}):L},getHeaderRowClass:k=>{const L=[],$=r==null?void 0:r.props.headerRowClassName;return typeof $=="string"?L.push($):typeof $=="function"&&L.push($.call(null,{rowIndex:k})),L.join(" ")},getHeaderCellStyle:(k,L,$,V)=>{var z;let re=(z=r==null?void 0:r.props.headerCellStyle)!=null?z:{};typeof re=="function"&&(re=re.call(null,{rowIndex:k,columnIndex:L,row:$,column:V}));const oe=getFixedColumnOffset(L,V.fixed,t.store,$);return ensurePosition(oe,"left"),ensurePosition(oe,"right"),Object.assign({},re,oe)},getHeaderCellClass:(k,L,$,V)=>{const z=getFixedColumnsClass(e.b(),L,V.fixed,t.store,$),re=[V.id,V.order,V.headerAlign,V.className,V.labelClassName,...z];V.children||re.push("is-leaf"),V.sortable&&re.push("is-sortable");const oe=r==null?void 0:r.props.headerCellClassName;return typeof oe=="string"?re.push(oe):typeof oe=="function"&&re.push(oe.call(null,{rowIndex:k,columnIndex:L,row:$,column:V})),re.push(e.e("cell")),re.filter(le=>!!le).join(" ")}}}const getAllColumns=t=>{const r=[];return t.forEach(e=>{e.children?(r.push(e),r.push.apply(r,getAllColumns(e.children))):r.push(e)}),r},convertToRows=t=>{let r=1;const e=(y,i)=>{if(i&&(y.level=i.level+1,r<y.level&&(r=y.level)),y.children){let k=0;y.children.forEach(L=>{e(L,y),k+=L.colSpan}),y.colSpan=k}else y.colSpan=1};t.forEach(y=>{y.level=1,e(y,void 0)});const n=[];for(let y=0;y<r;y++)n.push([]);return getAllColumns(t).forEach(y=>{y.children?(y.rowSpan=1,y.children.forEach(i=>i.isSubColumn=!0)):y.rowSpan=r-y.level+1,n[y.level-1].push(y)}),n};function useUtils$1(t){const r=inject(TABLE_INJECTION_KEY),e=computed(()=>convertToRows(t.store.states.originColumns.value));return{isGroup:computed(()=>{const y=e.value.length>1;return y&&r&&(r.state.isGroup.value=!0),y}),toggleAllSelection:y=>{y.stopPropagation(),r==null||r.store.commit("toggleAllSelection")},columnRows:e}}var TableHeader=defineComponent({name:"ElTableHeader",components:{ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:r}){const e=getCurrentInstance(),n=inject(TABLE_INJECTION_KEY),g=useNamespace("table"),y=ref({}),{onColumnsChange:i,onScrollableChange:k}=useLayoutObserver(n);onMounted(async()=>{await nextTick(),await nextTick();const{prop:ze,order:jt}=t.defaultSort;n==null||n.store.commit("sort",{prop:ze,order:jt,init:!0})});const{handleHeaderClick:L,handleHeaderContextMenu:$,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:oe,handleFilterClick:le}=useEvent(t,r),{getHeaderRowStyle:ue,getHeaderRowClass:ie,getHeaderCellStyle:ae,getHeaderCellClass:Fe}=useStyle$2(t),{isGroup:de,toggleAllSelection:Ne,columnRows:Ve}=useUtils$1(t);return e.state={onColumnsChange:i,onScrollableChange:k},e.filterPanels=y,{ns:g,filterPanels:y,onColumnsChange:i,onScrollableChange:k,columnRows:Ve,getHeaderRowClass:ie,getHeaderRowStyle:ue,getHeaderCellClass:Fe,getHeaderCellStyle:ae,handleHeaderClick:L,handleHeaderContextMenu:$,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:oe,handleFilterClick:le,isGroup:de,toggleAllSelection:Ne}},render(){const{ns:t,isGroup:r,columnRows:e,getHeaderCellStyle:n,getHeaderCellClass:g,getHeaderRowClass:y,getHeaderRowStyle:i,handleHeaderClick:k,handleHeaderContextMenu:L,handleMouseDown:$,handleMouseMove:V,handleSortClick:z,handleMouseOut:re,store:oe,$parent:le}=this;let ue=1;return h$1("thead",{class:{[t.is("group")]:r}},e.map((ie,ae)=>h$1("tr",{class:y(ae),key:ae,style:i(ae)},ie.map((Fe,de)=>(Fe.rowSpan>ue&&(ue=Fe.rowSpan),h$1("th",{class:g(ae,de,ie,Fe),colspan:Fe.colSpan,key:`${Fe.id}-thead`,rowspan:Fe.rowSpan,style:n(ae,de,ie,Fe),onClick:Ne=>k(Ne,Fe),onContextmenu:Ne=>L(Ne,Fe),onMousedown:Ne=>$(Ne,Fe),onMousemove:Ne=>V(Ne,Fe),onMouseout:re},[h$1("div",{class:["cell",Fe.filteredValue&&Fe.filteredValue.length>0?"highlight":""]},[Fe.renderHeader?Fe.renderHeader({column:Fe,$index:de,store:oe,_self:le}):Fe.label,Fe.sortable&&h$1("span",{onClick:Ne=>z(Ne,Fe),class:"caret-wrapper"},[h$1("i",{onClick:Ne=>z(Ne,Fe,"ascending"),class:"sort-caret ascending"}),h$1("i",{onClick:Ne=>z(Ne,Fe,"descending"),class:"sort-caret descending"})]),Fe.filterable&&h$1(FilterPanel,{store:oe,placement:Fe.filterPlacement||"bottom-start",column:Fe,upDataColumn:(Ne,Ve)=>{Fe[Ne]=Ve}})])]))))))}});function useEvents(t){const r=inject(TABLE_INJECTION_KEY),e=ref(""),n=ref(h$1("div")),g=(le,ue,ie)=>{var ae;const Fe=r,de=getCell(le);let Ne;const Ve=(ae=Fe==null?void 0:Fe.vnode.el)==null?void 0:ae.dataset.prefix;de&&(Ne=getColumnByCell({columns:t.store.states.columns.value},de,Ve),Ne&&(Fe==null||Fe.emit(`cell-${ie}`,ue,Ne,de,le))),Fe==null||Fe.emit(`row-${ie}`,ue,Ne,le)},y=(le,ue)=>{g(le,ue,"dblclick")},i=(le,ue)=>{t.store.commit("setCurrentRow",ue),g(le,ue,"click")},k=(le,ue)=>{g(le,ue,"contextmenu")},L=debounce(le=>{t.store.commit("setHoverRow",le)},30),$=debounce(()=>{t.store.commit("setHoverRow",null)},30),V=le=>{const ue=window.getComputedStyle(le,null),ie=Number.parseInt(ue.paddingLeft,10)||0,ae=Number.parseInt(ue.paddingRight,10)||0,Fe=Number.parseInt(ue.paddingTop,10)||0,de=Number.parseInt(ue.paddingBottom,10)||0;return{left:ie,right:ae,top:Fe,bottom:de}},z=(le,ue,ie)=>{let ae=ue.target.parentNode;for(;le>1&&(ae=ae==null?void 0:ae.nextSibling,!(!ae||ae.nodeName!=="TR"));)ie(ae,"hover-row hover-fixed-row"),le--};return{handleDoubleClick:y,handleClick:i,handleContextMenu:k,handleMouseEnter:L,handleMouseLeave:$,handleCellMouseEnter:(le,ue,ie)=>{var ae;const Fe=r,de=getCell(le),Ne=(ae=Fe==null?void 0:Fe.vnode.el)==null?void 0:ae.dataset.prefix;if(de){const pr=getColumnByCell({columns:t.store.states.columns.value},de,Ne);de.rowSpan>1&&z(de.rowSpan,le,addClass);const yr=Fe.hoverState={cell:de,column:pr,row:ue};Fe==null||Fe.emit("cell-mouse-enter",yr.row,yr.column,yr.cell,le)}if(!ie)return;const Ve=le.target.querySelector(".cell");if(!(hasClass(Ve,`${Ne}-tooltip`)&&Ve.childNodes.length))return;const ze=document.createRange();ze.setStart(Ve,0),ze.setEnd(Ve,Ve.childNodes.length);let jt=ze.getBoundingClientRect().width,kt=ze.getBoundingClientRect().height;const Et=jt-Math.floor(jt),{width:lr,height:tr}=Ve.getBoundingClientRect();Et<.001&&(jt=Math.floor(jt)),kt-Math.floor(kt)<.001&&(kt=Math.floor(kt));const{top:dr,left:cr,right:nr,bottom:ur}=V(Ve),ar=cr+nr,gr=dr+ur;(jt+ar>lr||kt+gr>tr||Ve.scrollWidth>lr)&&createTablePopper(ie,de.innerText||de.textContent,de,Fe)},handleCellMouseLeave:le=>{const ue=getCell(le);if(!ue)return;ue.rowSpan>1&&z(ue.rowSpan,le,removeClass);const ie=r==null?void 0:r.hoverState;r==null||r.emit("cell-mouse-leave",ie==null?void 0:ie.row,ie==null?void 0:ie.column,ie==null?void 0:ie.cell,le)},tooltipContent:e,tooltipTrigger:n}}function useStyles(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table");return{getRowStyle:($,V)=>{const z=r==null?void 0:r.props.rowStyle;return typeof z=="function"?z.call(null,{row:$,rowIndex:V}):z||null},getRowClass:($,V)=>{const z=[e.e("row")];r!=null&&r.props.highlightCurrentRow&&$===t.store.states.currentRow.value&&z.push("current-row"),t.stripe&&V%2===1&&z.push(e.em("row","striped"));const re=r==null?void 0:r.props.rowClassName;return typeof re=="string"?z.push(re):typeof re=="function"&&z.push(re.call(null,{row:$,rowIndex:V})),z},getCellStyle:($,V,z,re)=>{const oe=r==null?void 0:r.props.cellStyle;let le=oe??{};typeof oe=="function"&&(le=oe.call(null,{rowIndex:$,columnIndex:V,row:z,column:re}));const ue=getFixedColumnOffset(V,t==null?void 0:t.fixed,t.store);return ensurePosition(ue,"left"),ensurePosition(ue,"right"),Object.assign({},le,ue)},getCellClass:($,V,z,re,oe)=>{const le=getFixedColumnsClass(e.b(),V,t==null?void 0:t.fixed,t.store,void 0,oe),ue=[re.id,re.align,re.className,...le],ie=r==null?void 0:r.props.cellClassName;return typeof ie=="string"?ue.push(ie):typeof ie=="function"&&ue.push(ie.call(null,{rowIndex:$,columnIndex:V,row:z,column:re})),ue.push(e.e("cell")),ue.filter(ae=>!!ae).join(" ")},getSpan:($,V,z,re)=>{let oe=1,le=1;const ue=r==null?void 0:r.props.spanMethod;if(typeof ue=="function"){const ie=ue({row:$,column:V,rowIndex:z,columnIndex:re});Array.isArray(ie)?(oe=ie[0],le=ie[1]):typeof ie=="object"&&(oe=ie.rowspan,le=ie.colspan)}return{rowspan:oe,colspan:le}},getColspanRealWidth:($,V,z)=>{if(V<1)return $[z].realWidth;const re=$.map(({realWidth:oe,width:le})=>oe||le).slice(z,z+V);return Number(re.reduce((oe,le)=>Number(oe)+Number(le),-1))}}}function useRender$1(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table"),{handleDoubleClick:n,handleClick:g,handleContextMenu:y,handleMouseEnter:i,handleMouseLeave:k,handleCellMouseEnter:L,handleCellMouseLeave:$,tooltipContent:V,tooltipTrigger:z}=useEvents(t),{getRowStyle:re,getRowClass:oe,getCellStyle:le,getCellClass:ue,getSpan:ie,getColspanRealWidth:ae}=useStyles(t),Fe=computed(()=>t.store.states.columns.value.findIndex(({type:jt})=>jt==="default")),de=(jt,kt)=>{const Et=r.props.rowKey;return Et?getRowIdentity(jt,Et):kt},Ne=(jt,kt,Et,lr=!1)=>{const{tooltipEffect:tr,tooltipOptions:or,store:dr}=t,{indent:cr,columns:nr}=dr.states,ur=oe(jt,kt);let ar=!0;return Et&&(ur.push(e.em("row",`level-${Et.level}`)),ar=Et.display),h$1("tr",{style:[ar?null:{display:"none"},re(jt,kt)],class:ur,key:de(jt,kt),onDblclick:pr=>n(pr,jt),onClick:pr=>g(pr,jt),onContextmenu:pr=>y(pr,jt),onMouseenter:()=>i(kt),onMouseleave:k},nr.value.map((pr,yr)=>{const{rowspan:Sr,colspan:wr}=ie(jt,pr,kt,yr);if(!Sr||!wr)return null;const Mr=Object.assign({},pr);Mr.realWidth=ae(nr.value,wr,yr);const mr={store:t.store,_self:t.context||r,column:Mr,row:jt,$index:kt,cellIndex:yr,expanded:lr};yr===Fe.value&&Et&&(mr.treeNode={indent:Et.level*cr.value,level:Et.level},typeof Et.expanded=="boolean"&&(mr.treeNode.expanded=Et.expanded,"loading"in Et&&(mr.treeNode.loading=Et.loading),"noLazyChildren"in Et&&(mr.treeNode.noLazyChildren=Et.noLazyChildren)));const _r=`${de(jt,kt)},${yr}`,Nr=Mr.columnKey||Mr.rawColumnKey||"",Pr=Ve(yr,pr,mr),sr=pr.showOverflowTooltip&&merge$2({effect:tr},or,pr.showOverflowTooltip);return h$1("td",{style:le(kt,yr,jt,pr),class:ue(kt,yr,jt,pr,wr-1),key:`${Nr}${_r}`,rowspan:Sr,colspan:wr,onMouseenter:Ir=>L(Ir,jt,sr),onMouseleave:$},[Pr])}))},Ve=(jt,kt,Et)=>kt.renderCell(Et);return{wrappedRowRender:(jt,kt)=>{const Et=t.store,{isRowExpanded:lr,assertRowKey:tr}=Et,{treeData:or,lazyTreeNodeMap:dr,childrenColumnName:cr,rowKey:nr}=Et.states,ur=Et.states.columns.value;if(ur.some(({type:gr})=>gr==="expand")){const gr=lr(jt),pr=Ne(jt,kt,void 0,gr),yr=r.renderExpanded;return gr?yr?[[pr,h$1("tr",{key:`expanded-row__${pr.key}`},[h$1("td",{colspan:ur.length,class:`${e.e("cell")} ${e.e("expanded-cell")}`},[yr({row:jt,$index:kt,store:Et,expanded:gr})])])]]:(console.error("[Element Error]renderExpanded is required."),pr):[[pr]]}else if(Object.keys(or.value).length){tr();const gr=getRowIdentity(jt,nr.value);let pr=or.value[gr],yr=null;pr&&(yr={expanded:pr.expanded,level:pr.level,display:!0},typeof pr.lazy=="boolean"&&(typeof pr.loaded=="boolean"&&pr.loaded&&(yr.noLazyChildren=!(pr.children&&pr.children.length)),yr.loading=pr.loading));const Sr=[Ne(jt,kt,yr)];if(pr){let wr=0;const Mr=(_r,Nr)=>{_r&&_r.length&&Nr&&_r.forEach(Pr=>{const sr={display:Nr.display&&Nr.expanded,level:Nr.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Ir=getRowIdentity(Pr,nr.value);if(Ir==null)throw new Error("For nested data item, row-key is required.");if(pr={...or.value[Ir]},pr&&(sr.expanded=pr.expanded,pr.level=pr.level||sr.level,pr.display=!!(pr.expanded&&sr.display),typeof pr.lazy=="boolean"&&(typeof pr.loaded=="boolean"&&pr.loaded&&(sr.noLazyChildren=!(pr.children&&pr.children.length)),sr.loading=pr.loading)),wr++,Sr.push(Ne(Pr,kt+wr,sr)),pr){const Ar=dr.value[Ir]||Pr[cr.value];Mr(Ar,pr)}})};pr.display=!0;const mr=dr.value[gr]||jt[cr.value];Mr(mr,pr)}return Sr}else return Ne(jt,kt,void 0)},tooltipContent:V,tooltipTrigger:z}}const defaultProps$2={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TableBody=defineComponent({name:"ElTableBody",props:defaultProps$2,setup(t){const r=getCurrentInstance(),e=inject(TABLE_INJECTION_KEY),n=useNamespace("table"),{wrappedRowRender:g,tooltipContent:y,tooltipTrigger:i}=useRender$1(t),{onColumnsChange:k,onScrollableChange:L}=useLayoutObserver(e),$=[];return watch(t.store.states.hoverRow,(V,z)=>{var re;const oe=r==null?void 0:r.vnode.el,le=Array.from((oe==null?void 0:oe.children)||[]).filter(ae=>ae==null?void 0:ae.classList.contains(`${n.e("row")}`));let ue=V;const ie=(re=le[ue])==null?void 0:re.childNodes;if(ie!=null&&ie.length){let ae=0;Array.from(ie).reduce((de,Ne,Ve)=>{var ze,jt;return((ze=ie[Ve])==null?void 0:ze.colSpan)>1&&(ae=(jt=ie[Ve])==null?void 0:jt.colSpan),Ne.nodeName!=="TD"&&ae===0&&de.push(Ve),ae>0&&ae--,de},[]).forEach(de=>{var Ne;for(ue=V;ue>0;){const Ve=(Ne=le[ue-1])==null?void 0:Ne.childNodes;if(Ve[de]&&Ve[de].nodeName==="TD"&&Ve[de].rowSpan>1){addClass(Ve[de],"hover-cell"),$.push(Ve[de]);break}ue--}})}else $.forEach(ae=>removeClass(ae,"hover-cell")),$.length=0;!t.store.states.isComplex.value||!isClient||rAF(()=>{const ae=le[z],Fe=le[V];ae&&!ae.classList.contains("hover-fixed-row")&&removeClass(ae,"hover-row"),Fe&&addClass(Fe,"hover-row")})}),onUnmounted(()=>{var V;(V=removePopper)==null||V()}),{ns:n,onColumnsChange:k,onScrollableChange:L,wrappedRowRender:g,tooltipContent:y,tooltipTrigger:i}},render(){const{wrappedRowRender:t,store:r}=this,e=r.states.data.value||[];return h$1("tbody",{tabIndex:-1},[e.reduce((n,g)=>n.concat(t(g,n.length)),[])])}});function useMapState(){const t=inject(TABLE_INJECTION_KEY),r=t==null?void 0:t.store,e=computed(()=>r.states.fixedLeafColumnsLength.value),n=computed(()=>r.states.rightFixedColumns.value.length),g=computed(()=>r.states.columns.value.length),y=computed(()=>r.states.fixedColumns.value.length),i=computed(()=>r.states.rightFixedColumns.value.length);return{leftFixedLeafCount:e,rightFixedLeafCount:n,columnsCount:g,leftFixedCount:y,rightFixedCount:i,columns:r.states.columns}}function useStyle$1(t){const{columns:r}=useMapState(),e=useNamespace("table");return{getCellClasses:(y,i)=>{const k=y[i],L=[e.e("cell"),k.id,k.align,k.labelClassName,...getFixedColumnsClass(e.b(),i,k.fixed,t.store)];return k.className&&L.push(k.className),k.children||L.push(e.is("leaf")),L},getCellStyles:(y,i)=>{const k=getFixedColumnOffset(i,y.fixed,t.store);return ensurePosition(k,"left"),ensurePosition(k,"right"),k},columns:r}}var TableFooter=defineComponent({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:r,getCellStyles:e,columns:n}=useStyle$1(t);return{ns:useNamespace("table"),getCellClasses:r,getCellStyles:e,columns:n}},render(){const{columns:t,getCellStyles:r,getCellClasses:e,summaryMethod:n,sumText:g}=this,y=this.store.states.data.value;let i=[];return n?i=n({columns:t,data:y}):t.forEach((k,L)=>{if(L===0){i[L]=g;return}const $=y.map(oe=>Number(oe[k.property])),V=[];let z=!0;$.forEach(oe=>{if(!Number.isNaN(+oe)){z=!1;const le=`${oe}`.split(".")[1];V.push(le?le.length:0)}});const re=Math.max.apply(null,V);z?i[L]="":i[L]=$.reduce((oe,le)=>{const ue=Number(le);return Number.isNaN(+ue)?oe:Number.parseFloat((oe+le).toFixed(Math.min(re,20)))},0)}),h$1(h$1("tfoot",[h$1("tr",{},[...t.map((k,L)=>h$1("td",{key:L,colspan:k.colSpan,rowspan:k.rowSpan,class:e(t,L),style:r(k,L)},[h$1("div",{class:["cell",k.labelClassName]},[i[L]])]))])]))}});function useUtils(t){return{setCurrentRow:V=>{t.commit("setCurrentRow",V)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(V,z)=>{t.toggleRowSelection(V,z,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:V=>{t.clearFilter(V)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(V,z)=>{t.toggleRowExpansionAdapter(V,z)},clearSort:()=>{t.clearSort()},sort:(V,z)=>{t.commit("sort",{prop:V,order:z})}}}function useStyle(t,r,e,n){const g=ref(!1),y=ref(null),i=ref(!1),k=pr=>{i.value=pr},L=ref({width:null,height:null,headerHeight:null}),$=ref(!1),V={display:"inline-block",verticalAlign:"middle"},z=ref(),re=ref(0),oe=ref(0),le=ref(0),ue=ref(0),ie=ref(0);watchEffect(()=>{r.setHeight(t.height)}),watchEffect(()=>{r.setMaxHeight(t.maxHeight)}),watch(()=>[t.currentRowKey,e.states.rowKey],([pr,yr])=>{!unref(yr)||!unref(pr)||e.setCurrentRowKey(`${pr}`)},{immediate:!0}),watch(()=>t.data,pr=>{n.store.commit("setData",pr)},{immediate:!0,deep:!0}),watchEffect(()=>{t.expandRowKeys&&e.setExpandRowKeysAdapter(t.expandRowKeys)});const ae=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},Fe=(pr,yr)=>{const{pixelX:Sr,pixelY:wr}=yr;Math.abs(Sr)>=Math.abs(wr)&&(n.refs.bodyWrapper.scrollLeft+=yr.pixelX/5)},de=computed(()=>t.height||t.maxHeight||e.states.fixedColumns.value.length>0||e.states.rightFixedColumns.value.length>0),Ne=computed(()=>({width:r.bodyWidth.value?`${r.bodyWidth.value}px`:""})),Ve=()=>{de.value&&r.updateElsHeight(),r.updateColumnsWidth(),requestAnimationFrame(Et)};onMounted(async()=>{await nextTick(),e.updateColumns(),lr(),requestAnimationFrame(Ve);const pr=n.vnode.el,yr=n.refs.headerWrapper;t.flexible&&pr&&pr.parentElement&&(pr.parentElement.style.minWidth="0"),L.value={width:z.value=pr.offsetWidth,height:pr.offsetHeight,headerHeight:t.showHeader&&yr?yr.offsetHeight:null},e.states.columns.value.forEach(Sr=>{Sr.filteredValue&&Sr.filteredValue.length&&n.store.commit("filterChange",{column:Sr,values:Sr.filteredValue,silent:!0})}),n.$ready=!0});const ze=(pr,yr)=>{if(!pr)return;const Sr=Array.from(pr.classList).filter(wr=>!wr.startsWith("is-scrolling-"));Sr.push(r.scrollX.value?yr:"is-scrolling-none"),pr.className=Sr.join(" ")},jt=pr=>{const{tableWrapper:yr}=n.refs;ze(yr,pr)},kt=pr=>{const{tableWrapper:yr}=n.refs;return!!(yr&&yr.classList.contains(pr))},Et=function(){if(!n.refs.scrollBarRef)return;if(!r.scrollX.value){const Nr="is-scrolling-none";kt(Nr)||jt(Nr);return}const pr=n.refs.scrollBarRef.wrapRef;if(!pr)return;const{scrollLeft:yr,offsetWidth:Sr,scrollWidth:wr}=pr,{headerWrapper:Mr,footerWrapper:mr}=n.refs;Mr&&(Mr.scrollLeft=yr),mr&&(mr.scrollLeft=yr);const _r=wr-Sr-1;yr>=_r?jt("is-scrolling-right"):jt(yr===0?"is-scrolling-left":"is-scrolling-middle")},lr=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&useEventListener(n.refs.scrollBarRef.wrapRef,"scroll",Et,{passive:!0}),t.fit?useResizeObserver(n.vnode.el,tr):useEventListener(window,"resize",tr),useResizeObserver(n.refs.bodyWrapper,()=>{var pr,yr;tr(),(yr=(pr=n.refs)==null?void 0:pr.scrollBarRef)==null||yr.update()}))},tr=()=>{var pr,yr,Sr,wr;const Mr=n.vnode.el;if(!n.$ready||!Mr)return;let mr=!1;const{width:_r,height:Nr,headerHeight:Pr}=L.value,sr=z.value=Mr.offsetWidth;_r!==sr&&(mr=!0);const Ir=Mr.offsetHeight;(t.height||de.value)&&Nr!==Ir&&(mr=!0);const Ar=t.tableLayout==="fixed"?n.refs.headerWrapper:(pr=n.refs.tableHeaderRef)==null?void 0:pr.$el;t.showHeader&&(Ar==null?void 0:Ar.offsetHeight)!==Pr&&(mr=!0),re.value=((yr=n.refs.tableWrapper)==null?void 0:yr.scrollHeight)||0,le.value=(Ar==null?void 0:Ar.scrollHeight)||0,ue.value=((Sr=n.refs.footerWrapper)==null?void 0:Sr.offsetHeight)||0,ie.value=((wr=n.refs.appendWrapper)==null?void 0:wr.offsetHeight)||0,oe.value=re.value-le.value-ue.value-ie.value,mr&&(L.value={width:sr,height:Ir,headerHeight:t.showHeader&&(Ar==null?void 0:Ar.offsetHeight)||0},Ve())},or=useFormSize(),dr=computed(()=>{const{bodyWidth:pr,scrollY:yr,gutterWidth:Sr}=r;return pr.value?`${pr.value-(yr.value?Sr:0)}px`:""}),cr=computed(()=>t.maxHeight?"fixed":t.tableLayout),nr=computed(()=>{if(t.data&&t.data.length)return null;let pr="100%";t.height&&oe.value&&(pr=`${oe.value}px`);const yr=z.value;return{width:yr?`${yr}px`:"",height:pr}}),ur=computed(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),ar=computed(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${le.value+ue.value}px)`}:{maxHeight:`${t.maxHeight-le.value-ue.value}px`}:{});return{isHidden:g,renderExpanded:y,setDragVisible:k,isGroup:$,handleMouseLeave:ae,handleHeaderFooterMousewheel:Fe,tableSize:or,emptyBlockStyle:nr,handleFixedMousewheel:(pr,yr)=>{const Sr=n.refs.bodyWrapper;if(Math.abs(yr.spinY)>0){const wr=Sr.scrollTop;yr.pixelY<0&&wr!==0&&pr.preventDefault(),yr.pixelY>0&&Sr.scrollHeight-Sr.clientHeight>wr&&pr.preventDefault(),Sr.scrollTop+=Math.ceil(yr.pixelY/5)}else Sr.scrollLeft+=Math.ceil(yr.pixelX/5)},resizeProxyVisible:i,bodyWidth:dr,resizeState:L,doLayout:Ve,tableBodyStyles:Ne,tableLayout:cr,scrollbarViewStyle:V,tableInnerStyle:ur,scrollbarStyle:ar}}function useKeyRender(t){const r=ref(),e=()=>{const g=t.vnode.el.querySelector(".hidden-columns"),y={childList:!0,subtree:!0},i=t.store.states.updateOrderFns;r.value=new MutationObserver(()=>{i.forEach(k=>k())}),r.value.observe(g,y)};onMounted(()=>{e()}),onUnmounted(()=>{var n;(n=r.value)==null||n.disconnect()})}var defaultProps$1={data:{type:Array,default:()=>[]},size:useSizeProp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function hColgroup(t){const r=t.tableLayout==="auto";let e=t.columns||[];r&&e.every(g=>g.width===void 0)&&(e=[]);const n=g=>{const y={key:`${t.tableLayout}_${g.id}`,style:{},name:void 0};return r?y.style={width:`${g.width}px`}:y.name=g.id,y};return h$1("colgroup",{},e.map(g=>h$1("col",n(g))))}hColgroup.props=["columns","tableLayout"];const useScrollbar=()=>{const t=ref(),r=(y,i)=>{const k=t.value;k&&k.scrollTo(y,i)},e=(y,i)=>{const k=t.value;k&&isNumber$1(i)&&["Top","Left"].includes(y)&&k[`setScroll${y}`](i)};return{scrollBarRef:t,scrollTo:r,setScrollTop:y=>e("Top",y),setScrollLeft:y=>e("Left",y)}};let tableIdSeed=1;const _sfc_main$l=defineComponent({name:"ElTable",directives:{Mousewheel},components:{TableHeader,TableBody,TableFooter,ElScrollbar,hColgroup},props:defaultProps$1,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:r}=useLocale(),e=useNamespace("table"),n=getCurrentInstance();provide(TABLE_INJECTION_KEY,n);const g=createStore(n,t);n.store=g;const y=new TableLayout({store:n.store,table:n,fit:t.fit,showHeader:t.showHeader});n.layout=y;const i=computed(()=>(g.states.data.value||[]).length===0),{setCurrentRow:k,getSelectionRows:L,toggleRowSelection:$,clearSelection:V,clearFilter:z,toggleAllSelection:re,toggleRowExpansion:oe,clearSort:le,sort:ue}=useUtils(g),{isHidden:ie,renderExpanded:ae,setDragVisible:Fe,isGroup:de,handleMouseLeave:Ne,handleHeaderFooterMousewheel:Ve,tableSize:ze,emptyBlockStyle:jt,handleFixedMousewheel:kt,resizeProxyVisible:Et,bodyWidth:lr,resizeState:tr,doLayout:or,tableBodyStyles:dr,tableLayout:cr,scrollbarViewStyle:nr,tableInnerStyle:ur,scrollbarStyle:ar}=useStyle(t,y,g,n),{scrollBarRef:gr,scrollTo:pr,setScrollLeft:yr,setScrollTop:Sr}=useScrollbar(),wr=debounce(or,50),Mr=`${e.namespace.value}-table_${tableIdSeed++}`;n.tableId=Mr,n.state={isGroup:de,resizeState:tr,doLayout:or,debouncedUpdateLayout:wr};const mr=computed(()=>t.sumText||r("el.table.sumText")),_r=computed(()=>t.emptyText||r("el.table.emptyText"));return useKeyRender(n),{ns:e,layout:y,store:g,handleHeaderFooterMousewheel:Ve,handleMouseLeave:Ne,tableId:Mr,tableSize:ze,isHidden:ie,isEmpty:i,renderExpanded:ae,resizeProxyVisible:Et,resizeState:tr,isGroup:de,bodyWidth:lr,tableBodyStyles:dr,emptyBlockStyle:jt,debouncedUpdateLayout:wr,handleFixedMousewheel:kt,setCurrentRow:k,getSelectionRows:L,toggleRowSelection:$,clearSelection:V,clearFilter:z,toggleAllSelection:re,toggleRowExpansion:oe,clearSort:le,doLayout:or,sort:ue,t:r,setDragVisible:Fe,context:n,computedSumText:mr,computedEmptyText:_r,tableLayout:cr,scrollbarViewStyle:nr,tableInnerStyle:ur,scrollbarStyle:ar,scrollBarRef:gr,scrollTo:pr,setScrollLeft:yr,setScrollTop:Sr}}}),_hoisted_1$f=["data-prefix"],_hoisted_2$9={ref:"hiddenColumns",class:"hidden-columns"};function _sfc_render$1(t,r,e,n,g,y){const i=resolveComponent("hColgroup"),k=resolveComponent("table-header"),L=resolveComponent("table-body"),$=resolveComponent("table-footer"),V=resolveComponent("el-scrollbar"),z=resolveDirective("mousewheel");return openBlock(),createElementBlock("div",{ref:"tableWrapper",class:normalizeClass([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:normalizeStyle(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:r[0]||(r[0]=(...re)=>t.handleMouseLeave&&t.handleMouseLeave(...re))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("inner-wrapper")),style:normalizeStyle(t.tableInnerStyle)},[createBaseVNode("div",_hoisted_2$9,[renderSlot(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"headerWrapper",class:normalizeClass(t.ns.e("header-wrapper"))},[createBaseVNode("table",{ref:"tableHeader",class:normalizeClass(t.ns.e("header")),style:normalizeStyle(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),createVNode(k,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[z,t.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"bodyWrapper",class:normalizeClass(t.ns.e("body-wrapper"))},[createVNode(V,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:withCtx(()=>[createBaseVNode("table",{ref:"tableBody",class:normalizeClass(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle({width:t.bodyWidth,tableLayout:t.tableLayout})},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(openBlock(),createBlock(k,{key:0,ref:"tableHeaderRef",class:normalizeClass(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):createCommentVNode("v-if",!0),createVNode(L,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(openBlock(),createBlock($,{key:1,class:normalizeClass(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):createCommentVNode("v-if",!0)],6),t.isEmpty?(openBlock(),createElementBlock("div",{key:0,ref:"emptyBlock",style:normalizeStyle(t.emptyBlockStyle),class:normalizeClass(t.ns.e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(t.ns.e("empty-text"))},[renderSlot(t.$slots,"empty",{},()=>[createTextVNode(toDisplayString(t.computedEmptyText),1)])],2)],6)):createCommentVNode("v-if",!0),t.$slots.append?(openBlock(),createElementBlock("div",{key:1,ref:"appendWrapper",class:normalizeClass(t.ns.e("append-wrapper"))},[renderSlot(t.$slots,"append")],2)):createCommentVNode("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary&&t.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:1,ref:"footerWrapper",class:normalizeClass(t.ns.e("footer-wrapper"))},[createBaseVNode("table",{class:normalizeClass(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle(t.tableBodyStyles)},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),createVNode($,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[vShow,!t.isEmpty],[z,t.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),t.border||t.isGroup?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.ns.e("border-left-patch"))},null,2)):createCommentVNode("v-if",!0)],6),withDirectives(createBaseVNode("div",{ref:"resizeProxy",class:normalizeClass(t.ns.e("column-resize-proxy"))},null,2),[[vShow,t.resizeProxyVisible]])],46,_hoisted_1$f)}var Table=_export_sfc$1(_sfc_main$l,[["render",_sfc_render$1],["__file","table.vue"]]);const defaultClassNames={selection:"table-column--selection",expand:"table__expand-column"},cellStarts={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},getDefaultClassName=t=>defaultClassNames[t]||"",cellForced={selection:{renderHeader({store:t,column:r}){function e(){return t.states.data.value&&t.states.data.value.length===0}return h$1(ElCheckbox,{disabled:e(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:r.label})},renderCell({row:t,column:r,store:e,$index:n}){return h$1(ElCheckbox,{disabled:r.selectable?!r.selectable.call(null,t,n):!1,size:e.states.tableSize.value,onChange:()=>{e.commit("rowSelectedChanged",t)},onClick:g=>g.stopPropagation(),modelValue:e.isSelected(t),ariaLabel:r.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:r}){let e=r+1;const n=t.index;return typeof n=="number"?e=r+n:typeof n=="function"&&(e=n(r)),h$1("div",{},[e])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:r,expanded:e}){const{ns:n}=r,g=[n.e("expand-icon")];return e&&g.push(n.em("expand-icon","expanded")),h$1("div",{class:g,onClick:function(i){i.stopPropagation(),r.toggleRowExpansion(t)}},{default:()=>[h$1(ElIcon,null,{default:()=>[h$1(arrow_right_default)]})]})},sortable:!1,resizable:!1}};function defaultRenderCell({row:t,column:r,$index:e}){var n;const g=r.property,y=g&&getProp(t,g).value;return r&&r.formatter?r.formatter(t,r,y,e):((n=y==null?void 0:y.toString)==null?void 0:n.call(y))||""}function treeCellPrefix({row:t,treeNode:r,store:e},n=!1){const{ns:g}=e;if(!r)return n?[h$1("span",{class:g.e("placeholder")})]:null;const y=[],i=function(k){k.stopPropagation(),!r.loading&&e.loadOrToggle(t)};if(r.indent&&y.push(h$1("span",{class:g.e("indent"),style:{"padding-left":`${r.indent}px`}})),typeof r.expanded=="boolean"&&!r.noLazyChildren){const k=[g.e("expand-icon"),r.expanded?g.em("expand-icon","expanded"):""];let L=arrow_right_default;r.loading&&(L=loading_default),y.push(h$1("div",{class:k,onClick:i},{default:()=>[h$1(ElIcon,{class:{[g.is("loading")]:r.loading}},{default:()=>[h$1(L)]})]}))}else y.push(h$1("span",{class:g.e("placeholder")}));return y}function getAllAliases(t,r){return t.reduce((e,n)=>(e[n]=n,e),r)}function useWatcher(t,r){const e=getCurrentInstance();return{registerComplexWatchers:()=>{const y=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},k=getAllAliases(y,i);Object.keys(k).forEach(L=>{const $=i[L];hasOwn(r,$)&&watch(()=>r[$],V=>{let z=V;$==="width"&&L==="realWidth"&&(z=parseWidth(V)),$==="minWidth"&&L==="realMinWidth"&&(z=parseMinWidth(V)),e.columnConfig.value[$]=z,e.columnConfig.value[L]=z;const re=$==="fixed";t.value.store.scheduleLayout(re)})})},registerNormalWatchers:()=>{const y=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},k=getAllAliases(y,i);Object.keys(k).forEach(L=>{const $=i[L];hasOwn(r,$)&&watch(()=>r[$],V=>{e.columnConfig.value[L]=V})})}}}function useRender(t,r,e){const n=getCurrentInstance(),g=ref(""),y=ref(!1),i=ref(),k=ref(),L=useNamespace("table");watchEffect(()=>{i.value=t.align?`is-${t.align}`:null,i.value}),watchEffect(()=>{k.value=t.headerAlign?`is-${t.headerAlign}`:i.value,k.value});const $=computed(()=>{let Ne=n.vnode.vParent||n.parent;for(;Ne&&!Ne.tableId&&!Ne.columnId;)Ne=Ne.vnode.vParent||Ne.parent;return Ne}),V=computed(()=>{const{store:Ne}=n.parent;if(!Ne)return!1;const{treeData:Ve}=Ne.states,ze=Ve.value;return ze&&Object.keys(ze).length>0}),z=ref(parseWidth(t.width)),re=ref(parseMinWidth(t.minWidth)),oe=Ne=>(z.value&&(Ne.width=z.value),re.value&&(Ne.minWidth=re.value),!z.value&&re.value&&(Ne.width=void 0),Ne.minWidth||(Ne.minWidth=80),Ne.realWidth=Number(Ne.width===void 0?Ne.minWidth:Ne.width),Ne),le=Ne=>{const Ve=Ne.type,ze=cellForced[Ve]||{};Object.keys(ze).forEach(kt=>{const Et=ze[kt];kt!=="className"&&Et!==void 0&&(Ne[kt]=Et)});const jt=getDefaultClassName(Ve);if(jt){const kt=`${unref(L.namespace)}-${jt}`;Ne.className=Ne.className?`${Ne.className} ${kt}`:kt}return Ne},ue=Ne=>{Array.isArray(Ne)?Ne.forEach(ze=>Ve(ze)):Ve(Ne);function Ve(ze){var jt;((jt=ze==null?void 0:ze.type)==null?void 0:jt.name)==="ElTableColumn"&&(ze.vParent=n)}};return{columnId:g,realAlign:i,isSubColumn:y,realHeaderAlign:k,columnOrTableParent:$,setColumnWidth:oe,setColumnForcedProps:le,setColumnRenders:Ne=>{t.renderHeader||Ne.type!=="selection"&&(Ne.renderHeader=ze=>(n.columnConfig.value.label,renderSlot(r,"header",ze,()=>[Ne.label])));let Ve=Ne.renderCell;return Ne.type==="expand"?(Ne.renderCell=ze=>h$1("div",{class:"cell"},[Ve(ze)]),e.value.renderExpanded=ze=>r.default?r.default(ze):r.default):(Ve=Ve||defaultRenderCell,Ne.renderCell=ze=>{let jt=null;if(r.default){const dr=r.default(ze);jt=dr.some(cr=>cr.type!==Comment)?dr:Ve(ze)}else jt=Ve(ze);const{columns:kt}=e.value.store.states,Et=kt.value.findIndex(dr=>dr.type==="default"),lr=V.value&&ze.cellIndex===Et,tr=treeCellPrefix(ze,lr),or={class:"cell",style:{}};return Ne.showOverflowTooltip&&(or.class=`${or.class} ${unref(L.namespace)}-tooltip`,or.style={width:`${(ze.column.realWidth||Number(ze.column.width))-1}px`}),ue(jt),h$1("div",or,[tr,jt])}),Ne},getPropsData:(...Ne)=>Ne.reduce((Ve,ze)=>(Array.isArray(ze)&&ze.forEach(jt=>{Ve[jt]=t[jt]}),Ve),{}),getColumnElIndex:(Ne,Ve)=>Array.prototype.indexOf.call(Ne,Ve),updateColumnOrder:()=>{e.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var defaultProps={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(r=>["ascending","descending",null].includes(r))}};let columnIdSeed=1;var ElTableColumn$1=defineComponent({name:"ElTableColumn",components:{ElCheckbox},props:defaultProps,setup(t,{slots:r}){const e=getCurrentInstance(),n=ref({}),g=computed(()=>{let de=e.parent;for(;de&&!de.tableId;)de=de.parent;return de}),{registerNormalWatchers:y,registerComplexWatchers:i}=useWatcher(g,t),{columnId:k,isSubColumn:L,realHeaderAlign:$,columnOrTableParent:V,setColumnWidth:z,setColumnForcedProps:re,setColumnRenders:oe,getPropsData:le,getColumnElIndex:ue,realAlign:ie,updateColumnOrder:ae}=useRender(t,r,g),Fe=V.value;k.value=`${Fe.tableId||Fe.columnId}_column_${columnIdSeed++}`,onBeforeMount(()=>{L.value=g.value!==Fe;const de=t.type||"default",Ne=t.sortable===""?!0:t.sortable,Ve=isUndefined$1(t.showOverflowTooltip)?Fe.props.showOverflowTooltip:t.showOverflowTooltip,ze={...cellStarts[de],id:k.value,type:de,property:t.prop||t.property,align:ie,headerAlign:$,showOverflowTooltip:Ve,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:Ne,index:t.index,rawColumnKey:e.vnode.key};let tr=le(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);tr=mergeOptions(ze,tr),tr=compose(oe,z,re)(tr),n.value=tr,y(),i()}),onMounted(()=>{var de;const Ne=V.value,Ve=L.value?Ne.vnode.el.children:(de=Ne.refs.hiddenColumns)==null?void 0:de.children,ze=()=>ue(Ve||[],e.vnode.el);n.value.getColumnIndex=ze,ze()>-1&&g.value.store.commit("insertColumn",n.value,L.value?Ne.columnConfig.value:null,ae)}),onBeforeUnmount(()=>{n.value.getColumnIndex()>-1&&g.value.store.commit("removeColumn",n.value,L.value?Fe.columnConfig.value:null,ae)}),e.columnId=k.value,e.columnConfig=n},render(){var t,r,e;try{const n=(r=(t=this.$slots).default)==null?void 0:r.call(t,{row:{},column:{},$index:-1}),g=[];if(Array.isArray(n))for(const i of n)((e=i.type)==null?void 0:e.name)==="ElTableColumn"||i.shapeFlag&2?g.push(i):i.type===Fragment&&Array.isArray(i.children)&&i.children.forEach(k=>{(k==null?void 0:k.patchFlag)!==1024&&!isString$2(k==null?void 0:k.children)&&g.push(k)});return h$1("div",g)}catch{return h$1("div",[])}}});const ElTable=withInstall(Table,{TableColumn:ElTableColumn$1}),ElTableColumn=withNoopInstall(ElTableColumn$1),uploadContextKey=Symbol("uploadContextKey"),SCOPE$1="ElUpload";class UploadAjaxError extends Error{constructor(r,e,n,g){super(r),this.name="UploadAjaxError",this.status=e,this.method=n,this.url=g}}function getError(t,r,e){let n;return e.response?n=`${e.response.error||e.response}`:e.responseText?n=`${e.responseText}`:n=`fail to ${r.method} ${t} ${e.status}`,new UploadAjaxError(n,e.status,r.method,t)}function getBody(t){const r=t.responseText||t.response;if(!r)return r;try{return JSON.parse(r)}catch{return r}}const ajaxUpload=t=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$1,"XMLHttpRequest is undefined");const r=new XMLHttpRequest,e=t.action;r.upload&&r.upload.addEventListener("progress",y=>{const i=y;i.percent=y.total>0?y.loaded/y.total*100:0,t.onProgress(i)});const n=new FormData;if(t.data)for(const[y,i]of Object.entries(t.data))isArray$3(i)&&i.length?n.append(y,...i):n.append(y,i);n.append(t.filename,t.file,t.file.name),r.addEventListener("error",()=>{t.onError(getError(e,t,r))}),r.addEventListener("load",()=>{if(r.status<200||r.status>=300)return t.onError(getError(e,t,r));t.onSuccess(getBody(r))}),r.open(t.method,e,!0),t.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0);const g=t.headers||{};if(g instanceof Headers)g.forEach((y,i)=>r.setRequestHeader(i,y));else for(const[y,i]of Object.entries(g))isNil(i)||r.setRequestHeader(y,String(i));return r.send(n),r},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:definePropType([Object,Function,Promise]),default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP},crossorigin:{type:definePropType(String)}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"},crossorigin:{type:definePropType(String)}}),uploadListEmits={remove:t=>!!t},_hoisted_1$e=["onKeydown"],_hoisted_2$8=["src","crossorigin"],_hoisted_3$6=["onClick"],_hoisted_4$5=["title"],_hoisted_5$4=["onClick"],_hoisted_6$3=["onClick"],__default__$4=defineComponent({name:"ElUploadList"}),_sfc_main$k=defineComponent({...__default__$4,props:uploadListProps,emits:uploadListEmits,setup(t,{emit:r}){const e=t,{t:n}=useLocale(),g=useNamespace("upload"),y=useNamespace("icon"),i=useNamespace("list"),k=useFormDisabled(),L=ref(!1),$=computed(()=>[g.b("list"),g.bm("list",e.listType),g.is("disabled",e.disabled)]),V=z=>{r("remove",z)};return(z,re)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass(unref($)),name:unref(i).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.files,oe=>(openBlock(),createElementBlock("li",{key:oe.uid||oe.name,class:normalizeClass([unref(g).be("list","item"),unref(g).is(oe.status),{focusing:L.value}]),tabindex:"0",onKeydown:withKeys(le=>!unref(k)&&V(oe),["delete"]),onFocus:re[0]||(re[0]=le=>L.value=!0),onBlur:re[1]||(re[1]=le=>L.value=!1),onClick:re[2]||(re[2]=le=>L.value=!1)},[renderSlot(z.$slots,"default",{file:oe},()=>[z.listType==="picture"||oe.status!=="uploading"&&z.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(g).be("list","item-thumbnail")),src:oe.url,crossorigin:z.crossorigin,alt:""},null,10,_hoisted_2$8)):createCommentVNode("v-if",!0),oe.status==="uploading"||z.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(g).be("list","item-name")),onClick:withModifiers(le=>z.handlePreview(oe),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-file-name")),title:oe.name},toDisplayString(oe.name),11,_hoisted_4$5)],10,_hoisted_3$6),oe.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:z.listType==="picture-card"?"circle":"line","stroke-width":z.listType==="picture-card"?6:2,percentage:Number(oe.percentage),style:normalizeStyle(z.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(g).be("list","item-status-label"))},[z.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(z.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).m("close")),onClick:le=>V(oe)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(y).m("close-tip"))},toDisplayString(unref(n)("el.upload.deleteTip")),3)),z.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(g).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-preview")),onClick:le=>z.handlePreview(oe)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$4),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).be("list","item-delete")),onClick:le=>V(oe)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$3))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$e))),128)),renderSlot(z.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc$1(_sfc_main$k,[["__file","upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:t=>isArray$3(t)},_hoisted_1$d=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$3=defineComponent({name:COMPONENT_NAME}),_sfc_main$j=defineComponent({...__default__$3,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(t,{emit:r}){inject(uploadContextKey)||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=useNamespace("upload"),g=ref(!1),y=useFormDisabled(),i=L=>{if(y.value)return;g.value=!1,L.stopPropagation();const $=Array.from(L.dataTransfer.files);r("file",$)},k=()=>{y.value||(g.value=!0)};return(L,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b("dragger"),unref(n).is("dragover",g.value)]),onDrop:withModifiers(i,["prevent"]),onDragover:withModifiers(k,["prevent"]),onDragleave:$[0]||($[0]=withModifiers(V=>g.value=!1,["prevent"]))},[renderSlot(L.$slots,"default")],42,_hoisted_1$d))}});var UploadDragger=_export_sfc$1(_sfc_main$j,[["__file","upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$c=["onKeydown"],_hoisted_2$7=["name","multiple","accept"],__default__$2=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$i=defineComponent({...__default__$2,props:uploadContentProps,setup(t,{expose:r}){const e=t,n=useNamespace("upload"),g=useFormDisabled(),y=shallowRef({}),i=shallowRef(),k=ue=>{if(ue.length===0)return;const{autoUpload:ie,limit:ae,fileList:Fe,multiple:de,onStart:Ne,onExceed:Ve}=e;if(ae&&Fe.length+ue.length>ae){Ve(ue,Fe);return}de||(ue=ue.slice(0,1));for(const ze of ue){const jt=ze;jt.uid=genFileId(),Ne(jt),ie&&L(jt)}},L=async ue=>{if(i.value.value="",!e.beforeUpload)return V(ue);let ie,ae={};try{const de=e.data,Ne=e.beforeUpload(ue);ae=isPlainObject$2(e.data)?cloneDeep(e.data):e.data,ie=await Ne,isPlainObject$2(e.data)&&isEqual(de,ae)&&(ae=cloneDeep(e.data))}catch{ie=!1}if(ie===!1){e.onRemove(ue);return}let Fe=ue;ie instanceof Blob&&(ie instanceof File?Fe=ie:Fe=new File([ie],ue.name,{type:ue.type})),V(Object.assign(Fe,{uid:ue.uid}),ae)},$=async(ue,ie)=>isFunction$3(ue)?ue(ie):ue,V=async(ue,ie)=>{const{headers:ae,data:Fe,method:de,withCredentials:Ne,name:Ve,action:ze,onProgress:jt,onSuccess:kt,onError:Et,httpRequest:lr}=e;try{ie=await $(ie??Fe,ue)}catch{e.onRemove(ue);return}const{uid:tr}=ue,or={headers:ae||{},withCredentials:Ne,file:ue,data:ie,method:de,filename:Ve,action:ze,onProgress:cr=>{jt(cr,ue)},onSuccess:cr=>{kt(cr,ue),delete y.value[tr]},onError:cr=>{Et(cr,ue),delete y.value[tr]}},dr=lr(or);y.value[tr]=dr,dr instanceof Promise&&dr.then(or.onSuccess,or.onError)},z=ue=>{const ie=ue.target.files;ie&&k(Array.from(ie))},re=()=>{g.value||(i.value.value="",i.value.click())},oe=()=>{re()};return r({abort:ue=>{entriesOf(y.value).filter(ue?([ae])=>String(ue.uid)===ae:()=>!0).forEach(([ae,Fe])=>{Fe instanceof XMLHttpRequest&&Fe.abort(),delete y.value[ae]})},upload:L}),(ue,ie)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(ue.listType),unref(n).is("drag",ue.drag)]),tabindex:"0",onClick:re,onKeydown:withKeys(withModifiers(oe,["self"]),["enter","space"])},[ue.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(g),onFile:k},{default:withCtx(()=>[renderSlot(ue.$slots,"default")]),_:3},8,["disabled"])):renderSlot(ue.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:i,class:normalizeClass(unref(n).e("input")),name:ue.name,multiple:ue.multiple,accept:ue.accept,type:"file",onChange:z,onClick:ie[0]||(ie[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$7)],42,_hoisted_1$c))}});var UploadContent=_export_sfc$1(_sfc_main$i,[["__file","upload-content.vue"]]);const SCOPE="ElUpload",revokeFileObjectURL=t=>{var r;(r=t.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(t.url)},useHandlers=(t,r)=>{const e=useVModel(t,"fileList",void 0,{passive:!0}),n=re=>e.value.find(oe=>oe.uid===re.uid);function g(re){var oe;(oe=r.value)==null||oe.abort(re)}function y(re=["ready","uploading","success","fail"]){e.value=e.value.filter(oe=>!re.includes(oe.status))}const i=(re,oe)=>{const le=n(oe);le&&(console.error(re),le.status="fail",e.value.splice(e.value.indexOf(le),1),t.onError(re,le,e.value),t.onChange(le,e.value))},k=(re,oe)=>{const le=n(oe);le&&(t.onProgress(re,le,e.value),le.status="uploading",le.percentage=Math.round(re.percent))},L=(re,oe)=>{const le=n(oe);le&&(le.status="success",le.response=re,t.onSuccess(re,le,e.value),t.onChange(le,e.value))},$=re=>{isNil(re.uid)&&(re.uid=genFileId());const oe={name:re.name,percentage:0,status:"ready",size:re.size,raw:re,uid:re.uid};if(t.listType==="picture-card"||t.listType==="picture")try{oe.url=URL.createObjectURL(re)}catch(le){le.message,t.onError(le,oe,e.value)}e.value=[...e.value,oe],t.onChange(oe,e.value)},V=async re=>{const oe=re instanceof File?n(re):re;oe||throwError(SCOPE,"file to be removed not found");const le=ue=>{g(ue);const ie=e.value;ie.splice(ie.indexOf(ue),1),t.onRemove(ue,ie),revokeFileObjectURL(ue)};t.beforeRemove?await t.beforeRemove(oe,e.value)!==!1&&le(oe):le(oe)};function z(){e.value.filter(({status:re})=>re==="ready").forEach(({raw:re})=>{var oe;return re&&((oe=r.value)==null?void 0:oe.upload(re))})}return watch(()=>t.listType,re=>{re!=="picture-card"&&re!=="picture"||(e.value=e.value.map(oe=>{const{raw:le,url:ue}=oe;if(!ue&&le)try{oe.url=URL.createObjectURL(le)}catch(ie){t.onError(ie,oe,e.value)}return oe}))}),watch(e,re=>{for(const oe of re)oe.uid||(oe.uid=genFileId()),oe.status||(oe.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:g,clearFiles:y,handleError:i,handleProgress:k,handleStart:$,handleSuccess:L,handleRemove:V,submit:z,revokeFileObjectURL}},__default__$1=defineComponent({name:"ElUpload"}),_sfc_main$h=defineComponent({...__default__$1,props:uploadProps,setup(t,{expose:r}){const e=t,n=useFormDisabled(),g=shallowRef(),{abort:y,submit:i,clearFiles:k,uploadFiles:L,handleStart:$,handleError:V,handleRemove:z,handleSuccess:re,handleProgress:oe,revokeFileObjectURL:le}=useHandlers(e,g),ue=computed(()=>e.listType==="picture-card"),ie=computed(()=>({...e,fileList:L.value,onStart:$,onProgress:oe,onSuccess:re,onError:V,onRemove:z}));return onBeforeUnmount(()=>{L.value.forEach(le)}),provide(uploadContextKey,{accept:toRef(e,"accept")}),r({abort:y,submit:i,clearFiles:k,handleStart:$,handleRemove:z}),(ae,Fe)=>(openBlock(),createElementBlock("div",null,[unref(ue)&&ae.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(n),"list-type":ae.listType,files:unref(L),crossorigin:ae.crossorigin,"handle-preview":ae.onPreview,onRemove:unref(z)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:g},unref(ie)),{default:withCtx(()=>[ae.$slots.trigger?renderSlot(ae.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!ae.$slots.trigger&&ae.$slots.default?renderSlot(ae.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[ae.$slots.file?{name:"default",fn:withCtx(({file:de})=>[renderSlot(ae.$slots,"file",{file:de})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(ue)||unref(ue)&&!ae.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:g},unref(ie)),{default:withCtx(()=>[ae.$slots.trigger?renderSlot(ae.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!ae.$slots.trigger&&ae.$slots.default?renderSlot(ae.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),ae.$slots.trigger?renderSlot(ae.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(ae.$slots,"tip"),!unref(ue)&&ae.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(n),"list-type":ae.listType,files:unref(L),crossorigin:ae.crossorigin,"handle-preview":ae.onPreview,onRemove:unref(z)},createSlots({_:2},[ae.$slots.file?{name:"default",fn:withCtx(({file:de})=>[renderSlot(ae.$slots,"file",{file:de})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc$1(_sfc_main$h,[["__file","upload.vue"]]);const ElUpload=withInstall(Upload),messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),default:messageDefaults.onClose},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},plain:{type:Boolean,default:messageDefaults.plain},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=t=>{const r=instances.findIndex(g=>g.id===t),e=instances[r];let n;return r>0&&(n=instances[r-1]),{current:e,prev:n}},getLastOffset=t=>{const{prev:r}=getInstance(t);return r?r.vm.exposed.bottom.value:0},getOffsetOrSpace=(t,r)=>instances.findIndex(n=>n.id===t)>0?16:r,_hoisted_1$b=["id"],_hoisted_2$6=["innerHTML"],__default__=defineComponent({name:"ElMessage"}),_sfc_main$g=defineComponent({...__default__,props:messageProps,emits:messageEmits,setup(t,{expose:r}){const e=t,{Close:n}=TypeComponents,{ns:g,zIndex:y}=useGlobalComponentSettings("message"),{currentZIndex:i,nextZIndex:k}=y,L=ref(),$=ref(!1),V=ref(0);let z;const re=computed(()=>e.type?e.type==="error"?"danger":e.type:"info"),oe=computed(()=>{const jt=e.type;return{[g.bm("icon",jt)]:jt&&TypeComponentsMap[jt]}}),le=computed(()=>e.icon||TypeComponentsMap[e.type]||""),ue=computed(()=>getLastOffset(e.id)),ie=computed(()=>getOffsetOrSpace(e.id,e.offset)+ue.value),ae=computed(()=>V.value+ie.value),Fe=computed(()=>({top:`${ie.value}px`,zIndex:i.value}));function de(){e.duration!==0&&({stop:z}=useTimeoutFn(()=>{Ve()},e.duration))}function Ne(){z==null||z()}function Ve(){$.value=!1}function ze({code:jt}){jt===EVENT_CODE.esc&&Ve()}return onMounted(()=>{de(),k(),$.value=!0}),watch(()=>e.repeatNum,()=>{Ne(),de()}),useEventListener(document,"keydown",ze),useResizeObserver(L,()=>{V.value=L.value.getBoundingClientRect().height}),r({visible:$,bottom:ae,close:Ve}),(jt,kt)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),onBeforeLeave:jt.onClose,onAfterLeave:kt[0]||(kt[0]=Et=>jt.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:jt.id,ref_key:"messageRef",ref:L,class:normalizeClass([unref(g).b(),{[unref(g).m(jt.type)]:jt.type},unref(g).is("center",jt.center),unref(g).is("closable",jt.showClose),unref(g).is("plain",jt.plain),jt.customClass]),style:normalizeStyle(unref(Fe)),role:"alert",onMouseenter:Ne,onMouseleave:de},[jt.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:jt.repeatNum,type:unref(re),class:normalizeClass(unref(g).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(le)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(g).e("icon"),unref(oe)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(le))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(jt.$slots,"default",{},()=>[jt.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(g).e("content")),innerHTML:jt.message},null,10,_hoisted_2$6)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(g).e("content"))},toDisplayString(jt.message),3))]),jt.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(g).e("closeBtn")),onClick:withModifiers(Ve,["stop"])},{default:withCtx(()=>[createVNode(unref(n))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$b),[[vShow,$.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc$1(_sfc_main$g,[["__file","message.vue"]]);let seed=1;const normalizeOptions=t=>{const r=!t||isString$2(t)||isVNode(t)||isFunction$3(t)?{message:t}:t,e={...messageDefaults,...r};if(!e.appendTo)e.appendTo=document.body;else if(isString$2(e.appendTo)){let n=document.querySelector(e.appendTo);isElement(n)||(n=document.body),e.appendTo=n}return e},closeMessage=t=>{const r=instances.indexOf(t);if(r===-1)return;instances.splice(r,1);const{handler:e}=t;e.close()},createMessage=({appendTo:t,...r},e)=>{const n=`message_${seed++}`,g=r.onClose,y=document.createElement("div"),i={...r,id:n,onClose:()=>{g==null||g(),closeMessage(V)},onDestroy:()=>{render(null,y)}},k=createVNode(MessageConstructor,i,isFunction$3(i.message)||isVNode(i.message)?{default:isFunction$3(i.message)?i.message:()=>i.message}:null);k.appContext=e||message._context,render(k,y),t.appendChild(y.firstElementChild);const L=k.component,V={id:n,vnode:k,vm:L,handler:{close:()=>{L.exposed.visible.value=!1}},props:k.component.props};return V},message=(t={},r)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const e=normalizeOptions(t);if(e.grouping&&instances.length){const g=instances.find(({vnode:y})=>{var i;return((i=y.props)==null?void 0:i.message)===e.message});if(g)return g.props.repeatNum+=1,g.props.type=e.type,g.handler}const n=createMessage(e,r);return instances.push(n),n.handler};messageTypes.forEach(t=>{message[t]=(r={},e)=>{const n=normalizeOptions(r);return message({...n,type:t},e)}});function closeAll(t){for(const r of instances)(!t||t===r.props.type)&&r.handler.close()}message.closeAll=closeAll;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$f=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:r}){const{locale:e,zIndex:n,ns:g,size:y}=useGlobalComponentSettings("message-box",computed(()=>t.buttonSize)),{t:i}=e,{nextZIndex:k}=n,L=ref(!1),$=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:k()}),V=computed(()=>{const ur=$.type;return{[g.bm("icon",ur)]:ur&&TypeComponentsMap[ur]}}),z=useId(),re=useId(),oe=computed(()=>$.icon||TypeComponentsMap[$.type]||""),le=computed(()=>!!$.message),ue=ref(),ie=ref(),ae=ref(),Fe=ref(),de=ref(),Ne=computed(()=>$.confirmButtonClass);watch(()=>$.inputValue,async ur=>{await nextTick(),t.boxType==="prompt"&&ur!==null&&or()},{immediate:!0}),watch(()=>L.value,ur=>{var ar,gr;ur&&(t.boxType!=="prompt"&&($.autofocus?ae.value=(gr=(ar=de.value)==null?void 0:ar.$el)!=null?gr:ue.value:ae.value=ue.value),$.zIndex=k()),t.boxType==="prompt"&&(ur?nextTick().then(()=>{var pr;Fe.value&&Fe.value.$el&&($.autofocus?ae.value=(pr=dr())!=null?pr:ue.value:ae.value=ue.value)}):($.editorErrorMessage="",$.validateError=!1))});const Ve=computed(()=>t.draggable),ze=computed(()=>t.overflow);useDraggable(ue,ie,Ve,ze),onMounted(async()=>{await nextTick(),t.closeOnHashChange&&window.addEventListener("hashchange",jt)}),onBeforeUnmount(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",jt)});function jt(){L.value&&(L.value=!1,nextTick(()=>{$.action&&r("action",$.action)}))}const kt=()=>{t.closeOnClickModal&&tr($.distinguishCancelAndClose?"close":"cancel")},Et=useSameTarget(kt),lr=ur=>{if($.inputType!=="textarea")return ur.preventDefault(),tr("confirm")},tr=ur=>{var ar;t.boxType==="prompt"&&ur==="confirm"&&!or()||($.action=ur,$.beforeClose?(ar=$.beforeClose)==null||ar.call($,ur,$,jt):jt())},or=()=>{if(t.boxType==="prompt"){const ur=$.inputPattern;if(ur&&!ur.test($.inputValue||""))return $.editorErrorMessage=$.inputErrorMessage||i("el.messagebox.error"),$.validateError=!0,!1;const ar=$.inputValidator;if(typeof ar=="function"){const gr=ar($.inputValue);if(gr===!1)return $.editorErrorMessage=$.inputErrorMessage||i("el.messagebox.error"),$.validateError=!0,!1;if(typeof gr=="string")return $.editorErrorMessage=gr,$.validateError=!0,!1}}return $.editorErrorMessage="",$.validateError=!1,!0},dr=()=>{const ur=Fe.value.$refs;return ur.input||ur.textarea},cr=()=>{tr("close")},nr=()=>{t.closeOnPressEscape&&cr()};return t.lockScroll&&useLockscreen(L),{...toRefs($),ns:g,overlayEvent:Et,visible:L,hasMessage:le,typeClass:V,contentId:z,inputId:re,btnSize:y,iconComponent:oe,confirmButtonClasses:Ne,rootRef:ue,focusStartRef:ae,headerRef:ie,inputRef:Fe,confirmRef:de,doClose:jt,handleClose:cr,onCloseRequested:nr,handleWrapperClick:kt,handleInputEnter:lr,handleAction:tr,t:i}}}),_hoisted_1$a=["aria-label","aria-describedby"],_hoisted_2$5=["aria-label"],_hoisted_3$5=["id"];function _sfc_render(t,r,e,n,g,y){const i=resolveComponent("el-icon"),k=resolveComponent("close"),L=resolveComponent("el-input"),$=resolveComponent("el-button"),V=resolveComponent("el-focus-trap"),z=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:r[11]||(r[11]=re=>t.$emit("vanish")),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(z,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:normalizeClass(`${t.ns.namespace.value}-overlay-message-box`),onClick:r[8]||(r[8]=(...re)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...re)),onMousedown:r[9]||(r[9]=(...re)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...re)),onMouseup:r[10]||(r[10]=(...re)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...re))},[createVNode(V,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:normalizeStyle(t.customStyle),tabindex:"-1",onClick:r[7]||(r[7]=withModifiers(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass([t.ns.e("header"),{"show-close":t.showClose}])},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.iconComponent&&t.center?(openBlock(),createBlock(i,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString(t.title),1)],2),t.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:r[0]||(r[0]=re=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:r[1]||(r[1]=withKeys(withModifiers(re=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[createVNode(i,{class:normalizeClass(t.ns.e("close"))},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class"])],42,_hoisted_2$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:t.contentId,class:normalizeClass(t.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(openBlock(),createBlock(i,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("message"))},[renderSlot(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(t.ns.e("input"))},[createVNode(L,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":r[2]||(r[2]=re=>t.inputValue=re),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:normalizeClass({invalid:t.validateError}),onKeydown:withKeys(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(t.ns.e("errormsg")),style:normalizeStyle({visibility:t.editorErrorMessage?"visible":"hidden"})},toDisplayString(t.editorErrorMessage),7)],2),[[vShow,t.showInput]])],10,_hoisted_3$5),createBaseVNode("div",{class:normalizeClass(t.ns.e("btns"))},[t.showCancelButton?(openBlock(),createBlock($,{key:0,loading:t.cancelButtonLoading,class:normalizeClass([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:r[3]||(r[3]=re=>t.handleAction("cancel")),onKeydown:r[4]||(r[4]=withKeys(withModifiers(re=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):createCommentVNode("v-if",!0),withDirectives(createVNode($,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:normalizeClass([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:r[5]||(r[5]=re=>t.handleAction("confirm")),onKeydown:r[6]||(r[6]=withKeys(withModifiers(re=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vShow,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_hoisted_1$a)]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,t.visible]])]),_:3})}var MessageBoxConstructor=_export_sfc$1(_sfc_main$f,[["render",_sfc_render],["__file","index.vue"]]);const messageInstance=new Map,getAppendToElement=t=>{let r=document.body;return t.appendTo&&(isString$2(t.appendTo)&&(r=document.querySelector(t.appendTo)),isElement(t.appendTo)&&(r=t.appendTo),isElement(r)||(r=document.body)),r},initInstance=(t,r,e=null)=>{const n=createVNode(MessageBoxConstructor,t,isFunction$3(t.message)||isVNode(t.message)?{default:isFunction$3(t.message)?t.message:()=>t.message}:null);return n.appContext=e,render(n,r),getAppendToElement(t).appendChild(r.firstElementChild),n.component},genContainer=()=>document.createElement("div"),showMessage=(t,r)=>{const e=genContainer();t.onVanish=()=>{render(null,e),messageInstance.delete(g)},t.onAction=y=>{const i=messageInstance.get(g);let k;t.showInput?k={value:g.inputValue,action:y}:k=y,t.callback?t.callback(k,n.proxy):y==="cancel"||y==="close"?t.distinguishCancelAndClose&&y!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(k)};const n=initInstance(t,e,r),g=n.proxy;for(const y in t)hasOwn(t,y)&&!hasOwn(g.$props,y)&&(g[y]=t[y]);return g.visible=!0,g};function MessageBox(t,r=null){if(!isClient)return Promise.reject();let e;return isString$2(t)||isVNode(t)?t={message:t}:e=t.callback,new Promise((n,g)=>{const y=showMessage(t,r??MessageBox._context);messageInstance.set(y,{options:t,callback:e,resolve:n,reject:g})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(t=>{MessageBox[t]=messageBoxFactory(t)});function messageBoxFactory(t){return(r,e,n,g)=>{let y="";return isObject$2(e)?(n=e,y=""):isUndefined$1(e)?y="":y=e,MessageBox(Object.assign({title:y,message:r,type:"",...MESSAGE_BOX_DEFAULT_OPTS[t]},n,{boxType:t}),g)}}MessageBox.close=()=>{messageInstance.forEach((t,r)=>{r.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=t=>{_MessageBox._context=t._context,t.config.globalProperties.$msgbox=_MessageBox,t.config.globalProperties.$messageBox=_MessageBox,t.config.globalProperties.$alert=_MessageBox.alert,t.config.globalProperties.$confirm=_MessageBox.confirm,t.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,base="",elContainer="",elAside="",elFooter="",elHeader="",elMain="",elCard="",elScrollbar="",elMenu="",elTooltip="",elPopper="",elSubMenu="",elMenuItem="",elImage="",elImageViewer="",elDivider="",elRow="",elCol="",_imports_0=""+new URL("rocket.gif",import.meta.url).href,_imports_1=""+new URL("rocket.png",import.meta.url).href,logApi=()=>({add:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,y.type=="link"&&(y.color="#409eff"),k.push(y),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},addRange:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,y.forEach(L=>k.push(L)),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},getLogs:()=>{try{var y=localStorage.getItem("localLog"),i;if(y)i=JSON.parse(y);else return;return i}catch{return}},addSystem:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,k.push({type:"system",time:new Date().toLocaleString(),content:y}),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},clearLog:()=>{localStorage.removeItem("localLog")}});function bind(t,r){return function(){return t.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>r=>{const e=toString.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),r=>kindOf(r)===t),typeOfTest=t=>r=>typeof r===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&isArrayBuffer(t.buffer),r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const r=getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((r=kindOf(t))==="formdata"||r==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,g;if(typeof t!="object"&&(t=[t]),isArray(t))for(n=0,g=t.length;n<g;n++)r.call(null,t[n],n,t);else{const y=e?Object.getOwnPropertyNames(t):Object.keys(t),i=y.length;let k;for(n=0;n<i;n++)k=y[n],r.call(null,t[k],k,t)}}function findKey(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,g;for(;n-- >0;)if(g=e[n],r===g.toLowerCase())return g;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},r={},e=(n,g)=>{const y=t&&findKey(r,g)||g;isPlainObject(r[y])&&isPlainObject(n)?r[y]=merge(r[y],n):isPlainObject(n)?r[y]=merge({},n):isArray(n)?r[y]=n.slice():r[y]=n};for(let n=0,g=arguments.length;n<g;n++)arguments[n]&&forEach(arguments[n],e);return r}const extend=(t,r,e,{allOwnKeys:n}={})=>(forEach(r,(g,y)=>{e&&isFunction(g)?t[y]=bind(g,e):t[y]=g},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},toFlatObject=(t,r,e,n)=>{let g,y,i;const k={};if(r=r||{},t==null)return r;do{for(g=Object.getOwnPropertyNames(t),y=g.length;y-- >0;)i=g[y],(!n||n(i,t,r))&&!k[i]&&(r[i]=t[i],k[i]=!0);t=e!==!1&&getPrototypeOf(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},endsWith=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},toArray=t=>{if(!t)return null;if(isArray(t))return t;let r=t.length;if(!isNumber(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},isTypedArray=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let g;for(;(g=n.next())&&!g.done;){const y=g.value;r.call(t,y[0],y[1])}},matchAll=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,g){return n.toUpperCase()+g}),hasOwnProperty=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};forEach(e,(g,y)=>{let i;(i=r(g,y,t))!==!1&&(n[y]=i||g)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(r,e)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(isFunction(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(t,r)=>{const e={},n=g=>{g.forEach(y=>{e[y]=!0})};return isArray(t)?n(t):n(String(t).split(r)),e},noop=()=>{},toFiniteNumber=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,r=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const r=new Array(10),e=(n,g)=>{if(isObject(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[g]=n;const y=isArray(n)?[]:{};return forEach(n,(i,k)=>{const L=e(i,g+1);!isUndefined(L)&&(y[k]=L)}),r[g]=void 0,y}}return n};return e(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(t,r,e,n,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),g&&(this.response=g)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,r,e,n,g,y)=>{const i=Object.create(prototype$1);return utils$1.toFlatObject(t,i,function(L){return L!==Error.prototype},k=>k!=="isAxiosError"),AxiosError.call(i,t.message,r,e,n,g),i.cause=t,i.name=t.name,y&&Object.assign(i,y),i};const httpAdapter=null;function isVisitable(t){return utils$1.isPlainObject(t)||utils$1.isArray(t)}function removeBrackets(t){return utils$1.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,r,e){return t?t.concat(r).map(function(g,y){return g=removeBrackets(g),!e&&y?"["+g+"]":g}).join(e?".":""):r}function isFlatArray(t){return utils$1.isArray(t)&&!t.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(t,r,e){if(!utils$1.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=utils$1.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ue,ie){return!utils$1.isUndefined(ie[ue])});const n=e.metaTokens,g=e.visitor||V,y=e.dots,i=e.indexes,L=(e.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(r);if(!utils$1.isFunction(g))throw new TypeError("visitor must be a function");function $(le){if(le===null)return"";if(utils$1.isDate(le))return le.toISOString();if(!L&&utils$1.isBlob(le))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(le)||utils$1.isTypedArray(le)?L&&typeof Blob=="function"?new Blob([le]):Buffer.from(le):le}function V(le,ue,ie){let ae=le;if(le&&!ie&&typeof le=="object"){if(utils$1.endsWith(ue,"{}"))ue=n?ue:ue.slice(0,-2),le=JSON.stringify(le);else if(utils$1.isArray(le)&&isFlatArray(le)||(utils$1.isFileList(le)||utils$1.endsWith(ue,"[]"))&&(ae=utils$1.toArray(le)))return ue=removeBrackets(ue),ae.forEach(function(de,Ne){!(utils$1.isUndefined(de)||de===null)&&r.append(i===!0?renderKey([ue],Ne,y):i===null?ue:ue+"[]",$(de))}),!1}return isVisitable(le)?!0:(r.append(renderKey(ie,ue,y),$(le)),!1)}const z=[],re=Object.assign(predicates,{defaultVisitor:V,convertValue:$,isVisitable});function oe(le,ue){if(!utils$1.isUndefined(le)){if(z.indexOf(le)!==-1)throw Error("Circular reference detected in "+ue.join("."));z.push(le),utils$1.forEach(le,function(ae,Fe){(!(utils$1.isUndefined(ae)||ae===null)&&g.call(r,ae,utils$1.isString(Fe)?Fe.trim():Fe,ue,re))===!0&&oe(ae,ue?ue.concat(Fe):[Fe])}),z.pop()}}if(!utils$1.isObject(t))throw new TypeError("data must be an object");return oe(t),r}function encode$1(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function AxiosURLSearchParams(t,r){this._pairs=[],t&&toFormData(t,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,e){this._pairs.push([r,e])};prototype.toString=function(r){const e=r?function(n){return r.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(g){return e(g[0])+"="+e(g[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,r,e){if(!r)return t;const n=e&&e.encode||encode,g=e&&e.serialize;let y;if(g?y=g(r,e):y=utils$1.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,e).toString(n),y){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+y}return t}class InterceptorManager{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils$1.forEach(this.handlers,function(n){n!==null&&r(n)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(t=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(t,r){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,g,y){return platform.isNode&&utils$1.isBuffer(e)?(this.append(n,e.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(t){return utils$1.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(t){const r={},e=Object.keys(t);let n;const g=e.length;let y;for(n=0;n<g;n++)y=e[n],r[y]=t[y];return r}function formDataToJSON(t){function r(e,n,g,y){let i=e[y++];if(i==="__proto__")return!0;const k=Number.isFinite(+i),L=y>=e.length;return i=!i&&utils$1.isArray(g)?g.length:i,L?(utils$1.hasOwnProp(g,i)?g[i]=[g[i],n]:g[i]=n,!k):((!g[i]||!utils$1.isObject(g[i]))&&(g[i]=[]),r(e,n,g[i],y)&&utils$1.isArray(g[i])&&(g[i]=arrayToObject(g[i])),!k)}if(utils$1.isFormData(t)&&utils$1.isFunction(t.entries)){const e={};return utils$1.forEachEntry(t,(n,g)=>{r(parsePropPath(n),g,e,0)}),e}return null}function stringifySafely(t,r,e){if(utils$1.isString(t))try{return(r||JSON.parse)(t),utils$1.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(r,e){const n=e.getContentType()||"",g=n.indexOf("application/json")>-1,y=utils$1.isObject(r);if(y&&utils$1.isHTMLForm(r)&&(r=new FormData(r)),utils$1.isFormData(r))return g?JSON.stringify(formDataToJSON(r)):r;if(utils$1.isArrayBuffer(r)||utils$1.isBuffer(r)||utils$1.isStream(r)||utils$1.isFile(r)||utils$1.isBlob(r)||utils$1.isReadableStream(r))return r;if(utils$1.isArrayBufferView(r))return r.buffer;if(utils$1.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let k;if(y){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((k=utils$1.isFileList(r))||n.indexOf("multipart/form-data")>-1){const L=this.env&&this.env.FormData;return toFormData(k?{"files[]":r}:r,L&&new L,this.formSerializer)}}return y||g?(e.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,g=this.responseType==="json";if(utils$1.isResponse(r)||utils$1.isReadableStream(r))return r;if(r&&utils$1.isString(r)&&(n&&!this.responseType||g)){const i=!(e&&e.silentJSONParsing)&&g;try{return JSON.parse(r)}catch(k){if(i)throw k.name==="SyntaxError"?AxiosError.from(k,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):k}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],t=>{defaults.headers[t]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const r={};let e,n,g;return t&&t.split(`
`).forEach(function(i){g=i.indexOf(":"),e=i.substring(0,g).trim().toLowerCase(),n=i.substring(g+1).trim(),!(!e||r[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils$1.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,r,e,n,g){if(utils$1.isFunction(n))return n.call(this,r,e);if(g&&(r=e),!!utils$1.isString(r)){if(utils$1.isString(n))return r.indexOf(n)!==-1;if(utils$1.isRegExp(n))return n.test(r)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function buildAccessors(t,r){const e=utils$1.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(g,y,i){return this[n].call(this,r,g,y,i)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,e,n){const g=this;function y(k,L,$){const V=normalizeHeader(L);if(!V)throw new Error("header name must be a non-empty string");const z=utils$1.findKey(g,V);(!z||g[z]===void 0||$===!0||$===void 0&&g[z]!==!1)&&(g[z||L]=normalizeValue(k))}const i=(k,L)=>utils$1.forEach(k,($,V)=>y($,V,L));if(utils$1.isPlainObject(r)||r instanceof this.constructor)i(r,e);else if(utils$1.isString(r)&&(r=r.trim())&&!isValidHeaderName(r))i(parseHeaders(r),e);else if(utils$1.isHeaders(r))for(const[k,L]of r.entries())y(L,k,n);else r!=null&&y(e,r,n);return this}get(r,e){if(r=normalizeHeader(r),r){const n=utils$1.findKey(this,r);if(n){const g=this[n];if(!e)return g;if(e===!0)return parseTokens(g);if(utils$1.isFunction(e))return e.call(this,g,n);if(utils$1.isRegExp(e))return e.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=normalizeHeader(r),r){const n=utils$1.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let g=!1;function y(i){if(i=normalizeHeader(i),i){const k=utils$1.findKey(n,i);k&&(!e||matchHeaderValue(n,n[k],k,e))&&(delete n[k],g=!0)}}return utils$1.isArray(r)?r.forEach(y):y(r),g}clear(r){const e=Object.keys(this);let n=e.length,g=!1;for(;n--;){const y=e[n];(!r||matchHeaderValue(this,this[y],y,r,!0))&&(delete this[y],g=!0)}return g}normalize(r){const e=this,n={};return utils$1.forEach(this,(g,y)=>{const i=utils$1.findKey(n,y);if(i){e[i]=normalizeValue(g),delete e[y];return}const k=r?formatHeader(y):String(y).trim();k!==y&&delete e[y],e[k]=normalizeValue(g),n[k]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return utils$1.forEach(this,(n,g)=>{n!=null&&n!==!1&&(e[g]=r&&utils$1.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(g=>n.set(g)),n}static accessor(r){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,g=this.prototype;function y(i){const k=normalizeHeader(i);n[k]||(buildAccessors(g,i),n[k]=!0)}return utils$1.isArray(r)?r.forEach(y):y(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[e]=n}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,r){const e=this||defaults$1,n=r||e,g=AxiosHeaders$1.from(n.headers);let y=n.data;return utils$1.forEach(t,function(k){y=k.call(e,y,g.normalize(),r?r.status:void 0)}),g.normalize(),y}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,r,e){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,r,e),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function parseProtocol(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function speedometer(t,r){t=t||10;const e=new Array(t),n=new Array(t);let g=0,y=0,i;return r=r!==void 0?r:1e3,function(L){const $=Date.now(),V=n[y];i||(i=$),e[g]=L,n[g]=$;let z=y,re=0;for(;z!==g;)re+=e[z++],z=z%t;if(g=(g+1)%t,g===y&&(y=(y+1)%t),$-i<r)return;const oe=V&&$-V;return oe?Math.round(re*1e3/oe):void 0}}function throttle(t,r){let e=0;const n=1e3/r;let g=null;return function(){const i=this===!0,k=Date.now();if(i||k-e>n)return g&&(clearTimeout(g),g=null),e=k,t.apply(null,arguments);g||(g=setTimeout(()=>(g=null,e=Date.now(),t.apply(null,arguments)),n-(k-e)))}}const progressEventReducer=(t,r,e=3)=>{let n=0;const g=speedometer(50,250);return throttle(y=>{const i=y.loaded,k=y.lengthComputable?y.total:void 0,L=i-n,$=g(L),V=i<=k;n=i;const z={loaded:i,total:k,progress:k?i/k:void 0,bytes:L,rate:$||void 0,estimated:$&&k&&V?(k-i)/$:void 0,event:y,lengthComputable:k!=null};z[r?"download":"upload"]=!0,t(z)},e)},isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function g(y){let i=y;return r&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=g(window.location.href),function(i){const k=utils$1.isString(i)?g(i):i;return k.protocol===n.protocol&&k.host===n.host}}():function(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(t,r,e,n,g,y){const i=[t+"="+encodeURIComponent(r)];utils$1.isNumber(e)&&i.push("expires="+new Date(e).toGMTString()),utils$1.isString(n)&&i.push("path="+n),utils$1.isString(g)&&i.push("domain="+g),y===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function buildFullPath(t,r){return t&&!isAbsoluteURL(r)?combineURLs(t,r):r}const headersToObject=t=>t instanceof AxiosHeaders$1?{...t}:t;function mergeConfig(t,r){r=r||{};const e={};function n($,V,z){return utils$1.isPlainObject($)&&utils$1.isPlainObject(V)?utils$1.merge.call({caseless:z},$,V):utils$1.isPlainObject(V)?utils$1.merge({},V):utils$1.isArray(V)?V.slice():V}function g($,V,z){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined($))return n(void 0,$,z)}else return n($,V,z)}function y($,V){if(!utils$1.isUndefined(V))return n(void 0,V)}function i($,V){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined($))return n(void 0,$)}else return n(void 0,V)}function k($,V,z){if(z in r)return n($,V);if(z in t)return n(void 0,$)}const L={url:y,method:y,data:y,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:k,headers:($,V)=>g(headersToObject($),headersToObject(V),!0)};return utils$1.forEach(Object.keys(Object.assign({},t,r)),function(V){const z=L[V]||g,re=z(t[V],r[V],V);utils$1.isUndefined(re)&&z!==k||(e[V]=re)}),e}const resolveConfig=t=>{const r=mergeConfig({},t);let{data:e,withXSRFToken:n,xsrfHeaderName:g,xsrfCookieName:y,headers:i,auth:k}=r;r.headers=i=AxiosHeaders$1.from(i),r.url=buildURL(buildFullPath(r.baseURL,r.url),t.params,t.paramsSerializer),k&&i.set("Authorization","Basic "+btoa((k.username||"")+":"+(k.password?unescape(encodeURIComponent(k.password)):"")));let L;if(utils$1.isFormData(e)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((L=i.getContentType())!==!1){const[$,...V]=L?L.split(";").map(z=>z.trim()).filter(Boolean):[];i.setContentType([$||"multipart/form-data",...V].join("; "))}}if(platform.hasStandardBrowserEnv&&(n&&utils$1.isFunction(n)&&(n=n(r)),n||n!==!1&&isURLSameOrigin(r.url))){const $=g&&y&&cookies.read(y);$&&i.set(g,$)}return r},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(e,n){const g=resolveConfig(t);let y=g.data;const i=AxiosHeaders$1.from(g.headers).normalize();let{responseType:k}=g,L;function $(){g.cancelToken&&g.cancelToken.unsubscribe(L),g.signal&&g.signal.removeEventListener("abort",L)}let V=new XMLHttpRequest;V.open(g.method.toUpperCase(),g.url,!0),V.timeout=g.timeout;function z(){if(!V)return;const oe=AxiosHeaders$1.from("getAllResponseHeaders"in V&&V.getAllResponseHeaders()),ue={data:!k||k==="text"||k==="json"?V.responseText:V.response,status:V.status,statusText:V.statusText,headers:oe,config:t,request:V};settle(function(ae){e(ae),$()},function(ae){n(ae),$()},ue),V=null}"onloadend"in V?V.onloadend=z:V.onreadystatechange=function(){!V||V.readyState!==4||V.status===0&&!(V.responseURL&&V.responseURL.indexOf("file:")===0)||setTimeout(z)},V.onabort=function(){V&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,g,V)),V=null)},V.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,g,V)),V=null},V.ontimeout=function(){let le=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded";const ue=g.transitional||transitionalDefaults;g.timeoutErrorMessage&&(le=g.timeoutErrorMessage),n(new AxiosError(le,ue.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,g,V)),V=null},y===void 0&&i.setContentType(null),"setRequestHeader"in V&&utils$1.forEach(i.toJSON(),function(le,ue){V.setRequestHeader(ue,le)}),utils$1.isUndefined(g.withCredentials)||(V.withCredentials=!!g.withCredentials),k&&k!=="json"&&(V.responseType=g.responseType),typeof g.onDownloadProgress=="function"&&V.addEventListener("progress",progressEventReducer(g.onDownloadProgress,!0)),typeof g.onUploadProgress=="function"&&V.upload&&V.upload.addEventListener("progress",progressEventReducer(g.onUploadProgress)),(g.cancelToken||g.signal)&&(L=oe=>{V&&(n(!oe||oe.type?new CanceledError(null,t,V):oe),V.abort(),V=null)},g.cancelToken&&g.cancelToken.subscribe(L),g.signal&&(g.signal.aborted?L():g.signal.addEventListener("abort",L)));const re=parseProtocol(g.url);if(re&&platform.protocols.indexOf(re)===-1){n(new AxiosError("Unsupported protocol "+re+":",AxiosError.ERR_BAD_REQUEST,t));return}V.send(y||null)})},composeSignals=(t,r)=>{let e=new AbortController,n;const g=function(L){if(!n){n=!0,i();const $=L instanceof Error?L:this.reason;e.abort($ instanceof AxiosError?$:new CanceledError($ instanceof Error?$.message:$))}};let y=r&&setTimeout(()=>{g(new AxiosError(`timeout ${r} of ms exceeded`,AxiosError.ETIMEDOUT))},r);const i=()=>{t&&(y&&clearTimeout(y),y=null,t.forEach(L=>{L&&(L.removeEventListener?L.removeEventListener("abort",g):L.unsubscribe(g))}),t=null)};t.forEach(L=>L&&L.addEventListener&&L.addEventListener("abort",g));const{signal:k}=e;return k.unsubscribe=i,[k,()=>{y&&clearTimeout(y),y=null}]},composeSignals$1=composeSignals,streamChunk=function*(t,r){let e=t.byteLength;if(!r||e<r){yield t;return}let n=0,g;for(;n<e;)g=n+r,yield t.slice(n,g),n=g},readBytes=async function*(t,r,e){for await(const n of t)yield*streamChunk(ArrayBuffer.isView(n)?n:await e(String(n)),r)},trackStream=(t,r,e,n,g)=>{const y=readBytes(t,r,g);let i=0;return new ReadableStream({type:"bytes",async pull(k){const{done:L,value:$}=await y.next();if(L){k.close(),n();return}let V=$.byteLength;e&&e(i+=V),k.enqueue(new Uint8Array($))},cancel(k){return n(k),y.return()}},{highWaterMark:2})},fetchProgressDecorator=(t,r)=>{const e=t!=null;return n=>setTimeout(()=>r({lengthComputable:e,total:t,loaded:n}))},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),supportsRequestStream=isReadableStreamSupported&&(()=>{let t=!1;const r=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r})(),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&!!(()=>{try{return utils$1.isReadableStream(new Response("").body)}catch{}})(),resolvers={stream:supportsResponseStream&&(t=>t.body)};isFetchSupported&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!resolvers[r]&&(resolvers[r]=utils$1.isFunction(t[r])?e=>e[r]():(e,n)=>{throw new AxiosError(`Response type '${r}' is not supported`,AxiosError.ERR_NOT_SUPPORT,n)})})})(new Response);const getBodyLength=async t=>{if(t==null)return 0;if(utils$1.isBlob(t))return t.size;if(utils$1.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(t))return t.byteLength;if(utils$1.isURLSearchParams(t)&&(t=t+""),utils$1.isString(t))return(await encodeText(t)).byteLength},resolveBodyLength=async(t,r)=>{const e=utils$1.toFiniteNumber(t.getContentLength());return e??getBodyLength(r)},fetchAdapter=isFetchSupported&&(async t=>{let{url:r,method:e,data:n,signal:g,cancelToken:y,timeout:i,onDownloadProgress:k,onUploadProgress:L,responseType:$,headers:V,withCredentials:z="same-origin",fetchOptions:re}=resolveConfig(t);$=$?($+"").toLowerCase():"text";let[oe,le]=g||y||i?composeSignals$1([g,y],i):[],ue,ie;const ae=()=>{!ue&&setTimeout(()=>{oe&&oe.unsubscribe()}),ue=!0};let Fe;try{if(L&&supportsRequestStream&&e!=="get"&&e!=="head"&&(Fe=await resolveBodyLength(V,n))!==0){let ze=new Request(r,{method:"POST",body:n,duplex:"half"}),jt;utils$1.isFormData(n)&&(jt=ze.headers.get("content-type"))&&V.setContentType(jt),ze.body&&(n=trackStream(ze.body,DEFAULT_CHUNK_SIZE,fetchProgressDecorator(Fe,progressEventReducer(L)),null,encodeText))}utils$1.isString(z)||(z=z?"cors":"omit"),ie=new Request(r,{...re,signal:oe,method:e.toUpperCase(),headers:V.normalize().toJSON(),body:n,duplex:"half",withCredentials:z});let de=await fetch(ie);const Ne=supportsResponseStream&&($==="stream"||$==="response");if(supportsResponseStream&&(k||Ne)){const ze={};["status","statusText","headers"].forEach(kt=>{ze[kt]=de[kt]});const jt=utils$1.toFiniteNumber(de.headers.get("content-length"));de=new Response(trackStream(de.body,DEFAULT_CHUNK_SIZE,k&&fetchProgressDecorator(jt,progressEventReducer(k,!0)),Ne&&ae,encodeText),ze)}$=$||"text";let Ve=await resolvers[utils$1.findKey(resolvers,$)||"text"](de,t);return!Ne&&ae(),le&&le(),await new Promise((ze,jt)=>{settle(ze,jt,{data:Ve,headers:AxiosHeaders$1.from(de.headers),status:de.status,statusText:de.statusText,config:t,request:ie})})}catch(de){throw ae(),de&&de.name==="TypeError"&&/fetch/i.test(de.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,ie),{cause:de.cause||de}):AxiosError.from(de,de&&de.code,t,ie)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils$1.isFunction(t)||t===null||t===!1,adapters={getAdapter:t=>{t=utils$1.isArray(t)?t:[t];const{length:r}=t;let e,n;const g={};for(let y=0;y<r;y++){e=t[y];let i;if(n=e,!isResolvedHandle(e)&&(n=knownAdapters[(i=String(e)).toLowerCase()],n===void 0))throw new AxiosError(`Unknown adapter '${i}'`);if(n)break;g[i||"#"+y]=n}if(!n){const y=Object.entries(g).map(([k,L])=>`adapter ${k} `+(L===!1?"is not supported by the environment":"is not available in the build"));let i=r?y.length>1?`since :
`+y.map(renderReason).join(`
`):" "+renderReason(y[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const VERSION="1.7.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(r,e,n){function g(y,i){return"[Axios v"+VERSION+"] Transitional option '"+y+"'"+i+(n?". "+n:"")}return(y,i,k)=>{if(r===!1)throw new AxiosError(g(i," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0,console.warn(g(i," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(y,i,k):!0}};function assertOptions(t,r,e){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let g=n.length;for(;g-- >0;){const y=n[g],i=r[y];if(i){const k=t[y],L=k===void 0||i(k,y,t);if(L!==!0)throw new AxiosError("option "+y+" must be "+L,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+y,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(r,e){try{return await this._request(r,e)}catch(n){if(n instanceof Error){let g;Error.captureStackTrace?Error.captureStackTrace(g={}):g=new Error;const y=g.stack?g.stack.replace(/^.+\n/,""):"";try{n.stack?y&&!String(n.stack).endsWith(y.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+y):n.stack=y}catch{}}throw n}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=mergeConfig(this.defaults,e);const{transitional:n,paramsSerializer:g,headers:y}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),g!=null&&(utils$1.isFunction(g)?e.paramsSerializer={serialize:g}:validator.assertOptions(g,{encode:validators.function,serialize:validators.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=y&&utils$1.merge(y.common,y[e.method]);y&&utils$1.forEach(["delete","get","head","post","put","patch","common"],le=>{delete y[le]}),e.headers=AxiosHeaders$1.concat(i,y);const k=[];let L=!0;this.interceptors.request.forEach(function(ue){typeof ue.runWhen=="function"&&ue.runWhen(e)===!1||(L=L&&ue.synchronous,k.unshift(ue.fulfilled,ue.rejected))});const $=[];this.interceptors.response.forEach(function(ue){$.push(ue.fulfilled,ue.rejected)});let V,z=0,re;if(!L){const le=[dispatchRequest.bind(this),void 0];for(le.unshift.apply(le,k),le.push.apply(le,$),re=le.length,V=Promise.resolve(e);z<re;)V=V.then(le[z++],le[z++]);return V}re=k.length;let oe=e;for(z=0;z<re;){const le=k[z++],ue=k[z++];try{oe=le(oe)}catch(ie){ue.call(this,ie);break}}try{V=dispatchRequest.call(this,oe)}catch(le){return Promise.reject(le)}for(z=0,re=$.length;z<re;)V=V.then($[z++],$[z++]);return V}getUri(r){r=mergeConfig(this.defaults,r);const e=buildFullPath(r.baseURL,r.url);return buildURL(e,r.params,r.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,n){return this.request(mergeConfig(n||{},{method:r,url:e,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function(r){function e(n){return function(y,i,k){return this.request(mergeConfig(k||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:y,data:i}))}}Axios.prototype[r]=e(),Axios.prototype[r+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(y){e=y});const n=this;this.promise.then(g=>{if(!n._listeners)return;let y=n._listeners.length;for(;y-- >0;)n._listeners[y](g);n._listeners=null}),this.promise.then=g=>{let y;const i=new Promise(k=>{n.subscribe(k),y=k}).then(g);return i.cancel=function(){n.unsubscribe(y)},i},r(function(y,i,k){n.reason||(n.reason=new CanceledError(y,i,k),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new CancelToken(function(g){r=g}),cancel:r}}}const CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(t){return utils$1.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,r])=>{HttpStatusCode[r]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const r=new Axios$1(t),e=bind(Axios$1.prototype.request,r);return utils$1.extend(e,Axios$1.prototype,r,{allOwnKeys:!0}),utils$1.extend(e,r,null,{allOwnKeys:!0}),e.create=function(g){return createInstance(mergeConfig(t,g))},e}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(r){return Promise.all(r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils$1.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,_port=sessionStorage.getItem("HttpPort")||5266,getApiurl=()=>(console.log("environment","production"),`http://localhost:${_port}/api/v1`),_baseUrl=getApiurl(),ApiPrefix=_baseUrl,startBot=async(t=!0)=>(await axios$1.get(`${_baseUrl}/startbot?botReady=${t}`)).data,getConfig=async()=>(await axios$1.get(`${_baseUrl}/getconfig`)).data,saveConfig=async t=>(await axios$1.post(`${_baseUrl}/saveconfig`,t)).data,postMsg=async(t,r=0)=>(await axios$1.post(`${_baseUrl}/postmsg?type=`+r,t)).data,getCache=async t=>(await axios$1.get(`${_baseUrl}/getCache?pageIndex=${t.pageIndex}&pageSize=${t.pageSize}`)).data,saveImg=async t=>(await axios$1.get(`${_baseUrl}/saveimg/${t}`)).data,delImg=async t=>(await axios$1.get(`${_baseUrl}/delimg/${t}`)).data,getFun=async()=>(await axios$1.get(`${_baseUrl}/getfun`)).data,startPlugin=async(t,r)=>(await axios$1.get(`${_baseUrl}/startplugin?name=${t}&version=${r}`)).data,stopPlugin=async t=>(await axios$1.get(`${_baseUrl}/stopplugin?name=${t}`)).data,delPlugin=async t=>(await axios$1.get(`${_baseUrl}/delplugin?name=${t}`)).data,startAliYunPan=async()=>(await axios$1.get(`${_baseUrl}/startaliyunpan`)).data,searchIdol=async(t,r)=>(await axios$1.get(`${_baseUrl}/searchidol?group=${t}&name=${r}`)).data,sendSmsCode=async(t,r="86")=>(await axios$1.get(`${_baseUrl}/sendsmscode?mobile=${t}&area=${r}`)).data,pocketLogin=async(t,r)=>(await axios$1.get(`${_baseUrl}/pocketlogin?mobile=${t}&code=${r}`)).data,kdUserInfo=async t=>(await axios$1.post(`${_baseUrl}/kduserinfo`,t)).data,openWindow=async t=>(await axios$1.get(`${_baseUrl}/openwindow?url=${t}`)).data,getLogs=async()=>(await axios$1.get(`${_baseUrl}/getlogs`)).data;var NIM_Web_SDK={exports:{}};/*!
 * 
 * VERSION: 9.16.2
 * Git Hash: 1ddefb74af2685d8546990b4a578f520ed738e86
 * 
 * Create At: 2024/5/22 下午2:28:56
 * 
 * Target: NIM_Web_SDK
 */(function(module,exports){(function(t,r){module.exports=r()})(window,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var g=r[n]={i:n,l:!1,exports:{}};return t[n].call(g.exports,g,g.exports,e),g.l=!0,g.exports}return e.m=t,e.c=r,e.d=function(n,g,y){e.o(n,g)||Object.defineProperty(n,g,{enumerable:!0,get:y})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,g){if(1&g&&(n=e(n)),8&g||4&g&&typeof n=="object"&&n&&n.__esModule)return n;var y=Object.create(null);if(e.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:n}),2&g&&typeof n!="string")for(var i in n)e.d(y,i,(function(k){return n[k]}).bind(null,i));return y},e.n=function(n){var g=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(g,"a",g),g},e.o=function(n,g){return Object.prototype.hasOwnProperty.call(n,g)},e.p="",e(e.s=938)}([function(t,r,e){var n=e(51),g=e(2),y=e(8),i=e(9),k=e(5),L=e(121),$=e(63),V=e(143),z=e(28),re=e(4),oe=e(11),le=e(6),ue=e(125),ie=e(144),ae=e(22),Fe=e(15),de=e(468),Ne=e(472),Ve=e(3),ze=e(68),jt=e(78),kt=e(64),Et=e(52),lr=e(53),tr=e(54),or=e(55),dr=e(42),cr=e(24);function nr(Cr,br){var vr=k(Cr);if(Et){var Tr=Et(Cr);br&&(Tr=Fe(Tr).call(Tr,function(Br){return lr(Cr,Br).enumerable})),vr.push.apply(vr,Tr)}return vr}function ur(Cr,br){var vr=jt!==void 0&&kt(Cr)||Cr["@@iterator"];if(!vr){if(z(Cr)||(vr=function(Vr,Qr){var Sn;if(Vr){if(typeof Vr=="string")return ar(Vr,Qr);var Mn=i(Sn=Object.prototype.toString.call(Vr)).call(Sn,8,-1);if(Mn==="Object"&&Vr.constructor&&(Mn=Vr.constructor.name),Mn==="Map"||Mn==="Set")return ze(Vr);if(Mn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mn))return ar(Vr,Qr)}}(Cr))||br&&Cr&&typeof Cr.length=="number"){vr&&(Cr=vr);var Tr=0,Br=function(){};return{s:Br,n:function(){return Tr>=Cr.length?{done:!0}:{done:!1,value:Cr[Tr++]}},e:function(Vr){throw Vr},f:Br}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lr,Fr=!0,qr=!1;return{s:function(){vr=vr.call(Cr)},n:function(){var Vr=vr.next();return Fr=Vr.done,Vr},e:function(Vr){qr=!0,Lr=Vr},f:function(){try{Fr||vr.return==null||vr.return()}finally{if(qr)throw Lr}}}}function ar(Cr,br){(br==null||br>Cr.length)&&(br=Cr.length);for(var vr=0,Tr=new Array(br);vr<br;vr++)Tr[vr]=Cr[vr];return Tr}var gr=e(263),pr=e(203);function yr(Cr){cr(Cr)==="object"?(this.callFunc=Cr.callFunc||null,this.message=Cr.message||"UNKNOW ERROR"):this.message=Cr,this.time=new Date,this.timetag=+this.time}e(496);var Sr,wr,Mr=e(66),mr=Mr.getGlobal(),_r=/\s+/;Mr.deduplicate=function(Cr){var br=[];return g(Cr).call(Cr,function(vr){y(br).call(br,vr)===-1&&br.push(vr)}),br},Mr.capFirstLetter=function(Cr){return Cr?i(Cr=""+Cr).call(Cr,0,1).toUpperCase()+i(Cr).call(Cr,1):""},Mr.guid=(Sr=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Sr()+Sr()+Sr()+Sr()+Sr()+Sr()+Sr()+Sr()}),Mr.extend=function(Cr,br,vr){for(var Tr in br)Cr[Tr]!==void 0&&vr!==!0||(Cr[Tr]=br[Tr])},Mr.filterObj=function(Cr,br){var vr={};return Mr.isString(br)&&(br=br.split(_r)),g(br).call(br,function(Tr){Cr.hasOwnProperty(Tr)&&(vr[Tr]=Cr[Tr])}),vr},Mr.copy=function(Cr,br){var vr;return br=br||{},Cr&&g(vr=k(Cr)).call(vr,function(Tr){Mr.exist(Cr[Tr])&&(br[Tr]=Cr[Tr])}),br},Mr.copyWithNull=function(Cr,br){var vr;return br=br||{},Cr&&g(vr=k(Cr)).call(vr,function(Tr){(Mr.exist(Cr[Tr])||Mr.isnull(Cr[Tr]))&&(br[Tr]=Cr[Tr])}),br},Mr.findObjIndexInArray=function(Cr,br){Cr=Cr||[];var vr=br.keyPath||"id",Tr=-1;return L(Cr).call(Cr,function(Br,Lr){if(pr(Br,vr)===br.value)return Tr=Lr,!0}),Tr},Mr.findObjInArray=function(Cr,br){var vr=Mr.findObjIndexInArray(Cr,br);return vr===-1?null:Cr[vr]},Mr.mergeObjArray=function(){var Cr=[],br=i([]).call(arguments,0,-1),vr=arguments[arguments.length-1];Mr.isArray(vr)&&(br.push(vr),vr={});var Tr,Br=vr.keyPath=vr.keyPath||"id";for(vr.sortPath=vr.sortPath||Br;!Cr.length&&br.length;)Cr=br.shift()||[],Cr=i(Cr).call(Cr,0);return g(br).call(br,function(Lr){Lr&&g(Lr).call(Lr,function(Fr){(Tr=Mr.findObjIndexInArray(Cr,{keyPath:Br,value:pr(Fr,Br)}))!==-1?Cr[Tr]=Mr.merge({},Cr[Tr],Fr):Cr.push(Fr)})}),vr.notSort||(Cr=Mr.sortObjArray(Cr,vr)),Cr},Mr.cutObjArray=function(Cr){var br=i(Cr).call(Cr,0),vr=arguments.length,Tr=i([]).call(arguments,1,vr-1),Br=arguments[vr-1];Mr.isObject(Br)||(Tr.push(Br),Br={});var Lr,Fr=Br.keyPath=Br.keyPath||"id";return g(Tr).call(Tr,function(qr){Mr.isArray(qr)||(qr=[qr]),g(qr).call(qr,function(Vr){Vr&&(Br.value=pr(Vr,Fr),(Lr=Mr.findObjIndexInArray(br,Br))!==-1&&$(br).call(br,Lr,1))})}),br},Mr.sortObjArray=function(Cr,br){var vr=(br=br||{}).sortPath||"id";gr.insensitive=!!br.insensitive;var Tr,Br,Lr,Fr=!!br.desc;return Lr=Mr.isFunction(br.compare)?br.compare:function(qr,Vr){return Tr=pr(qr,vr),Br=pr(Vr,vr),Fr?gr(Br,Tr):gr(Tr,Br)},V(Cr).call(Cr,Lr)},Mr.emptyFunc=function(){},Mr.isEmptyFunc=function(Cr){return Cr===Mr.emptyFunc},Mr.notEmptyFunc=function(Cr){return Cr!==Mr.emptyFunc},Mr.splice=function(Cr,br,vr){return $([]).call(Cr,br,vr)},Mr.reshape2d=function(Cr,br){if(z(Cr)){Mr.verifyParamType("type",br,"number","util::reshape2d");var vr=Cr.length;if(vr<=br)return[Cr];for(var Tr=Math.ceil(vr/br),Br=[],Lr=0;Lr<Tr;Lr++)Br.push(i(Cr).call(Cr,Lr*br,(Lr+1)*br));return Br}return Cr},Mr.flatten2d=function(Cr){if(z(Cr)){var br=[];return g(Cr).call(Cr,function(vr){br=re(br).call(br,vr)}),br}return Cr},Mr.dropArrayDuplicates=function(Cr){if(z(Cr)){for(var br={},vr=[];Cr.length>0;)br[Cr.shift()]=!0;for(var Tr in br)br[Tr]===!0&&vr.push(Tr);return vr}return Cr},Mr.onError=function(Cr){throw new yr(Cr)},Mr.verifyParamPresent=function(Cr,br,vr,Tr){vr=vr||"";var Br=!1;switch(Mr.typeOf(br)){case"undefined":case"null":Br=!0;break;case"string":br===""&&(Br=!0);break;case"StrStrMap":case"object":k(br).length||(Br=!0);break;case"array":br.length?L(br).call(br,function(Lr){if(Mr.notexist(Lr))return Br=!0,!0}):Br=!0}Br&&Mr.onParamAbsent(vr+Cr,Tr)},Mr.onParamAbsent=function(Cr,br){Mr.onParamError("缺少参数 ".concat(Cr,", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或数组的内容不是 null/undefined"),br)},Mr.verifyParamAbsent=function(Cr,br,vr,Tr){vr=vr||"",br!==void 0&&Mr.onParamPresent(vr+Cr,Tr)},Mr.onParamPresent=function(Cr,br){Mr.onParamError("多余的参数 ".concat(Cr),br)},Mr.verifyParamType=function(Cr,br,vr,Tr){var Br=Mr.typeOf(br).toLowerCase();Mr.isArray(vr)||(vr=[vr]),vr=oe(vr).call(vr,function(Fr){return Fr.toLowerCase()});var Lr=!0;switch(y(vr).call(vr,Br)===-1&&(Lr=!1),Br){case"number":isNaN(br)&&(Lr=!1);break;case"string":vr.join("")==="numeric or numeric string"&&(Lr=!!/^[0-9]+$/.test(br))}Lr||Mr.onParamInvalidType(Cr,vr,"",Tr)},Mr.onParamInvalidType=function(Cr,br,vr,Tr){vr=vr||"",br=Mr.isArray(br)?(br=oe(br).call(br,function(Br){return'"'+Br+'"'})).join(", "):'"'+br+'"',Mr.onParamError('参数"'+vr+Cr+'"类型错误, 合法的类型包括: ['+br+"]",Tr)},Mr.verifyParamValid=function(Cr,br,vr,Tr){Mr.isArray(vr)||(vr=[vr]),y(vr).call(vr,br)===-1&&Mr.onParamInvalidValue(Cr,vr,Tr)},Mr.onParamInvalidValue=function(Cr,br,vr){var Tr;Mr.isArray(br)||(br=[br]),br=oe(br).call(br,function(Br){return'"'+Br+'"'}),Mr.isArray(br)&&(br=br.join(", ")),Mr.onParamError(re(Tr="参数 ".concat(Cr,"值错误, 合法的值包括: [")).call(Tr,le(br),"]"),vr)},Mr.verifyParamMin=function(Cr,br,vr,Tr){br<vr&&Mr.onParamError("参数"+Cr+"的值不能小于"+vr,Tr)},Mr.verifyParamMax=function(Cr,br,vr,Tr){br>vr&&Mr.onParamError("参数"+Cr+"的值不能大于"+vr,Tr)},Mr.verifyArrayMax=function(Cr,br,vr,Tr){br.length>vr&&Mr.onParamError("参数"+Cr+"的长度不能大于"+vr,Tr)},Mr.verifyEmail=(wr=/^\S+@\S+$/,function(Cr,br,vr){wr.test(br)||Mr.onParamError("参数"+Cr+"邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符",vr)}),Mr.verifyTel=function(){var Cr=/^[+\-()\d]+$/;return function(br,vr,Tr){Cr.test(vr)||Mr.onParamError("参数"+br+"电话号码格式错误, 合法字符包括+、-、英文括号和数字",Tr)}}(),Mr.verifyBirth=function(){var Cr=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(br,vr,Tr){Cr.test(vr)||Mr.onParamError("参数"+br+'生日格式错误, 合法为"yyyy-MM-dd"',Tr)}}(),Mr.onParamError=function(Cr,br){Mr.onError({message:Cr,callFunc:br})},Mr.verifyOptions=function(Cr,br,vr,Tr,Br){if(Cr=Cr||{},br&&(Mr.isString(br)&&(br=br.split(_r)),Mr.isArray(br))){typeof vr!="boolean"&&(Br=vr||null,vr=!0,Tr="");var Lr=vr?Mr.verifyParamPresent:Mr.verifyParamAbsent;g(br).call(br,function(Fr){Lr.call(Mr,Fr,Cr[Fr],Tr,Br)})}return Cr},Mr.verifyParamAtLeastPresentOne=function(Cr,br,vr){br&&(Mr.isString(br)&&(br=br.split(_r)),Mr.isArray(br)&&(L(br).call(br,function(Tr){return Mr.exist(Cr[Tr])})||Mr.onParamError("以下参数["+br.join(", ")+"]至少需要传入一个",vr)))},Mr.verifyParamPresentJustOne=function(Cr,br,vr){br&&(Mr.isString(br)&&(br=br.split(_r)),Mr.isArray(br)&&ue(br).call(br,function(Tr,Br){return Mr.exist(Cr[Br])&&Tr++,Tr},0)!==1&&Mr.onParamError("以下参数["+br.join(", ")+"]必须且只能传入一个",vr))},Mr.verifyBooleanWithDefault=function(Cr,br,vr,Tr,Br){Mr.undef(vr)&&(vr=!0),_r.test(br)&&(br=br.split(_r)),Mr.isArray(br)?g(br).call(br,function(Lr){Mr.verifyBooleanWithDefault(Cr,Lr,vr,Tr,Br)}):Cr[br]===void 0?Cr[br]=vr:Mr.isBoolean(Cr[br])||Mr.onParamInvalidType(br,"boolean",Tr,Br)},Mr.verifyFileInput=function(Cr,br){var vr;return Mr.verifyParamPresent("fileInput",Cr,"",br),Mr.isString(Cr)&&((Cr=typeof document>"u"?void 0:document.getElementById(Cr))||Mr.onParamError("找不到要上传的文件对应的input, 请检查fileInput id ".concat(Cr),br)),Cr.tagName&&Cr.tagName.toLowerCase()==="input"&&Cr.type.toLowerCase()==="file"||Mr.onParamError(re(vr="请提供正确的 fileInput, 必须为 file 类型的 input 节点 tagname:".concat(Cr.tagName,", filetype:")).call(vr,Cr.type),br),Cr},Mr.verifyFileType=function(Cr,br){Mr.verifyParamValid("type",Cr,Mr.validFileTypes,br)},Mr.verifyCallback=function(Cr,br,vr){_r.test(br)&&(br=br.split(_r)),Mr.isArray(br)?g(br).call(br,function(Tr){Mr.verifyCallback(Cr,Tr,vr)}):Cr[br]?Mr.isFunction(Cr[br])||Mr.onParamInvalidType(br,"function","",vr):Cr[br]=Mr.emptyFunc},Mr.verifyFileUploadCallback=function(Cr,br){Mr.verifyCallback(Cr,"uploadprogress uploaddone uploaderror uploadcancel",br)},Mr.validFileTypes=["image","audio","video","file"],Mr.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg","mov"]},Mr.filterFiles=function(Cr,br){var vr,Tr,Br=(br=br.toLowerCase())==="file",Lr=[];return g([]).call(Cr,function(Fr){var qr,Vr;if(Br)Lr.push(Fr);else if(vr=i(qr=Fr.name).call(qr,ie(Vr=Fr.name).call(Vr,".")+1),(Tr=Fr.type.split("/"))[0]&&Tr[1]){var Qr,Sn=!1;Tr[0].toLowerCase()===br?Sn=!0:Sn=y(Qr=Mr.validFileExts[br]).call(Qr,vr)!==-1,Sn&&Lr.push(Fr)}}),Lr};var Nr,Pr,sr=Mr.supportFormData=Mr.notundef(mr.FormData);Mr.getFileName=function(Cr){return Cr=Mr.verifyFileInput(Cr),sr?Cr.files[0].name:i(br=Cr.value).call(br,ie(vr=Cr.value).call(vr,"\\")+1);var br,vr},Mr.getFileInfo=(Nr={ppt:1,pptx:2,pdf:3,doc:6,docx:7},function(Cr){var br={};if(!(Cr=Mr.verifyFileInput(Cr)).files)return br;var vr=Cr.files[0];return sr&&(br.name=vr.name,br.size=vr.size,br.type=vr.name.match(/\.(\w+)$/),br.type=br.type&&br.type[1].toLowerCase(),br.transcodeType=Nr[br.type]||0),br}),Mr.sizeText=(Pr=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(Cr){var br,vr=0;do br=(Cr=Math.floor(100*Cr)/100)+Pr[vr],Cr/=1024,vr++;while(Cr>1);return br}),Mr.promises2cmds=function(Cr){return oe(Cr).call(Cr,function(br){return br.cmd})},Mr.objs2accounts=function(Cr){return oe(Cr).call(Cr,function(br){return br.account})},Mr.teams2ids=function(Cr){return oe(Cr).call(Cr,function(br){return br.teamId})},Mr.objs2ids=function(Cr){return oe(Cr).call(Cr,function(br){return br.id})},Mr.getMaxUpdateTime=function(Cr){var br=oe(Cr).call(Cr,function(vr){return+vr.updateTime});return Math.max.apply(Math,br)},Mr.genCheckUniqueFunc=function(Cr){return Cr=Cr||"id",function(br){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[Cr]=this.uniqueSet[Cr]||{};var vr=this.uniqueSet[Cr],Tr=br[Cr];return!vr[Tr]&&(vr[Tr]=!0,!0)}},Mr.fillPropertyWithDefault=function(Cr,br,vr){return!!Mr.undef(Cr[br])&&(Cr[br]=vr,!0)},Mr.throttle=function(Cr,br,vr,Tr){var Br,Lr,Fr=null,qr=0;vr||(vr={});var Vr=function(){qr=vr.leading===!1?0:new Date().getTime(),Fr=null,Cr.apply(Br,Lr),Fr||(Br=Lr=null)};return function(){var Qr=new Date().getTime();qr||vr.leading!==!1||(qr=Qr);var Sn=br-(Qr-qr);return Br=this,Lr=arguments,Sn<=0||Sn>br?(clearTimeout(Fr),Fr=null,qr=Qr,Cr.apply(Br,Lr),Fr||(Br=Lr=null)):Fr||vr.trailing===!1?Fr&&Tr&&Tr.apply(Br,Lr):(Fr=ae(Vr,Sn),Tr&&Tr.apply(Br,Lr)),Fr}},Mr.get=function(Cr,br){var vr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(cr(Cr)!=="object")return vr;var Tr,Br=br.replace(/\[(\d+)\]/g,".$1").split("."),Lr=Cr,Fr=ur(Br);try{for(Fr.s();!(Tr=Fr.n()).done;){var qr=Tr.value;if((Lr=Object(Lr)[qr])===void 0)return vr}}catch(Vr){Fr.e(Vr)}finally{Fr.f()}return Lr},Mr.pickAsString=function(Cr,br){var vr;return Cr?oe(vr=Fe(br).call(br,function(Tr){return Cr[Tr]!==void 0})).call(vr,function(Tr){var Br;return re(Br="".concat(Tr,"=")).call(Br,Cr[Tr])}).join(","):""},Mr.omitAsString=function(Cr,br){var vr,Tr;if(!Cr)return"";var Br={};return g(br).call(br,function(Lr){Br[Lr]=!0}),oe(vr=Fe(Tr=k(Cr)).call(Tr,function(Lr){return!Br[Lr]})).call(vr,function(Lr){var Fr;return re(Fr="".concat(Lr,"=")).call(Fr,Cr[Lr])}).join(",")};var Ir={session:function(Cr){var br=function(Tr){for(var Br=1;Br<arguments.length;Br++){var Lr,Fr,qr=arguments[Br]!=null?arguments[Br]:{};Br%2?g(Lr=nr(Object(qr),!0)).call(Lr,function(Vr){n(Tr,Vr,qr[Vr])}):tr?or(Tr,tr(qr)):g(Fr=nr(Object(qr))).call(Fr,function(Vr){dr(Tr,Vr,lr(qr,Vr))})}return Tr}({},Cr),vr=["topCustom","localCustom","extra"];return g(vr).call(vr,function(Tr){br[Tr]&&(br[Tr]="***")}),br.lastMsg&&(br.lastMsg={idServer:br.lastMsg.idServer,idClient:br.lastMsg.idClient}),br}};Mr.secureOutput=function(Cr,br){z(br)||(br=[br]);var vr=Ir[Cr];return(br=oe(br).call(br,function(Tr){return vr(Tr)})).length===1?br[0]:br};var Ar={string:function(Cr,br,vr){var Tr=vr.required,Br=vr.allowEmpty,Lr=Cr[br];return Tr===!1&&Lr===void 0||typeof Lr=="string"&&!(!Br&&Lr==="")},number:function(Cr,br,vr){var Tr=vr.required,Br=vr.min,Lr=Cr[br];return Tr===!1&&Lr===void 0||typeof Lr=="number"&&!(Lr<Br)},enum:function(Cr,br,vr){var Tr=vr.required,Br=de(vr),Lr=Cr[br];return Tr===!1&&Lr===void 0||y(Br).call(Br,Lr)>-1},array:function(Cr,br,vr){var Tr=vr.itemType,Br=vr.min,Lr=vr.max,Fr=vr.required,qr=Cr[br];return Fr===!1&&qr===void 0||!!z(qr)&&!(typeof Lr=="number"&&qr.length>Lr)&&!(typeof Br=="number"&&qr.length<Br)&&!(Tr&&Tr!=="enum"&&!Ne(qr).call(qr,function(Vr){return cr(Vr)===Tr}))}};Mr.validate=function(Cr,br,vr){var Tr,Br={};return g(Tr=k(Cr)).call(Tr,function(Lr){var Fr,qr=Cr[Lr].type,Vr=Ar[qr];Vr&&!Vr(br,Lr,Cr[Lr])?Mr.onError({message:re(Fr="Error in parameter verification, ".concat(Lr," expected value is ")).call(Fr,le(Cr[Lr])),callFunc:vr}):Br[Lr]=br[Lr]}),Br},Mr.asyncPool=function(Cr,br,vr){if(typeof Cr!="number"||typeof vr!="function"||!br||!br.length)return Ve.resolve();var Tr=0,Br=[],Lr=[];return function Fr(){if(Tr===br.length)return Ve.resolve();var qr=br[Tr++],Vr=Ve.resolve().then(function(){return vr(qr,br)});Br.push(Vr);var Qr=Ve.resolve();if(Cr<=br.length){var Sn=Vr.then(function(){return $(Lr).call(Lr,y(Lr).call(Lr,Sn),1)});Lr.push(Sn),Lr.length>=Cr&&(Qr=Ve.race(Lr))}return Qr.then(function(){return Fr()})}().then(function(){return Ve.all(Br)})},Mr.getIdArray=function(Cr){if(!Cr||typeof Cr!="string")throw new Error("id type error");var br=y(Cr).call(Cr,"-");if(br<0||br===Cr.length-1)throw new Error("id format error");return[i(Cr).call(Cr,0,br),i(Cr).call(Cr,br+1)]},t.exports=Mr},function(t,r,e){var n=e(16),g=e(83),y=e(166),i=e(17),k=e(97).f,L=e(215),$=e(14),V=e(36),z=e(65),re=e(31),oe=function(le){var ue=function(ie,ae,Fe){if(this instanceof ue){switch(arguments.length){case 0:return new le;case 1:return new le(ie);case 2:return new le(ie,ae)}return new le(ie,ae,Fe)}return g(le,this,arguments)};return ue.prototype=le.prototype,ue};t.exports=function(le,ue){var ie,ae,Fe,de,Ne,Ve,ze,jt,kt,Et=le.target,lr=le.global,tr=le.stat,or=le.proto,dr=lr?n:tr?n[Et]:(n[Et]||{}).prototype,cr=lr?$:$[Et]||z($,Et,{})[Et],nr=cr.prototype;for(de in ue)ae=!(ie=L(lr?de:Et+(tr?".":"#")+de,le.forced))&&dr&&re(dr,de),Ve=cr[de],ae&&(ze=le.dontCallGetSet?(kt=k(dr,de))&&kt.value:dr[de]),Ne=ae&&ze?ze:ue[de],ae&&typeof Ve==typeof Ne||(jt=le.bind&&ae?V(Ne,n):le.wrap&&ae?oe(Ne):or&&i(Ne)?y(Ne):Ne,(le.sham||Ne&&Ne.sham||Ve&&Ve.sham)&&z(jt,"sham",!0),z(cr,de,jt),or&&(re($,Fe=Et+"Prototype")||z($,Fe,{}),z($[Fe],de,Ne),le.real&&nr&&(ie||!nr[de])&&z(nr,de,Ne)))}},function(t,r,e){t.exports=e(236)},function(t,r,e){t.exports=e(238)},function(t,r,e){t.exports=e(330)},function(t,r,e){t.exports=e(237)},function(t,r,e){t.exports=e(390)},function(t,r){t.exports=function(e){try{return!!e()}catch{return!0}}},function(t,r,e){t.exports=e(211)},function(t,r,e){t.exports=e(257)},function(t,r,e){t.exports=e(283)},function(t,r,e){t.exports=e(446)},function(t,r,e){var n=e(8),g=e(4),y=!1;try{typeof localStorage.setItem=="function"&&typeof localStorage.getItem=="function"&&(localStorage.setItem("nim_localstorage_exist_test","1"),y=localStorage.getItem("nim_localstorage_exist_test")==="1",localStorage.removeItem("nim_localstorage_exist_test"))}catch{y=!1}var i={nodeEnv:"production",info:{hash:"1ddefb74af2685d8546990b4a578f520ed738e86",shortHash:"1ddefb7",version:"9.16.2",sdkVersion:"91602",sdkHumanVersion:"9.16.2",protocolVersion:1},lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",needToXHR:!0,connectTimeout:1e4,xhrTimeout:8e3,reconnectionDelay:1600,reconnectionDelayMax:8e3,reconnectionJitter:.01,reconnectiontimer:null,heartbeatInterval:3e4,cmdTimeout:8e3,hbCmdTimeout:5e3,isWeixinApp:!1,isNodejs:!1,isRN:!1,ipVersion:0,PUSHTOKEN:"",PUSHCONFIG:{},CLIENTTYPE:16,PushPermissionAsked:!1,iosPushConfig:null,androidPushConfig:null,optionDefaultLinkUrl:"",defaultLinkUrl:"weblink.netease.im",ipv6DefaultLinkUrl:"weblink.netease.im",optionIpv6DefaultLinkUrl:"",wxDefaultLinkUrl:"wlnimsc0.netease.im",serverNosConfig:y?{cdnDomain:localStorage.getItem("nim_cdn_domain")||"",objectPrefix:localStorage.getItem("nim_object_prefix")||""}:{},hasLocalStorage:y,privateConf:{isABTestEnable:!0,isDataReportEnable:!0,isMixStoreEnable:!0,reportConfigUrl:"https://statistic.live.126.net/dispatcher/req",reportUrl:"https://statistic.live.126.net/statics/report/common/form"},getDefaultLinkUrl:function(k){var L,$;i.ipVersion===1?(L=i.optionIpv6DefaultLinkUrl,$=i.ipv6DefaultLinkUrl):(L=i.optionDefaultLinkUrl,$=i.defaultLinkUrl);var V=L||(i.isWeixinApp?i.wxDefaultLinkUrl:$);if(!V)return!1;var z=k?"https":"http",re=k?"443":"80",oe=V;return n(V).call(V,"http")===-1&&(oe=z+"://"+oe),n(V).call(V,":")===-1&&(oe=oe+":"+re),oe},ipProbeAddr:{ipv4:"https://check-ipv4.netease.im/test/",ipv6:"https://check-ipv6.netease.im/test/"},formatSocketUrl:function(k){var L=k.url,$=k.secure?"https":"http";return n(L).call(L,"http")===-1?$+"://"+L:L},uploadUrl:"https://nos.netease.com",chunkUploadUrl:"https://wanproxy-web.127.net",commonMaxSize:104857600,chunkSize:4194304,chunkMaxSize:4194304e4,replaceUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHost:"nos.netease.com",downloadHostList:["nos.netease.com"],downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",nosCdnEnable:!0,httpsEnabled:!1,threshold:0,nosLbsUrls:[],edgeList:["https://wanproxy-web.127.net","https://nosup-hz1.127.net"],genUploadUrl:function(k){return i.uploadUrl+"/"+k},genChunkUploadUrl:function(k){return i.chunkUploadUrl?i.chunkUploadUrl+"/"+k.bucket+"/"+k.objectName:""},genDownloadUrl:function(k,L,$){var V,z,re,oe,le,ue=k.bucket,ie=k.expireSec,ae=+new Date,Fe=ie?"&survivalTime=".concat(ie):"";if($)return g(re=g(oe=g(le="https://".concat($,"/")).call(le,L,"?createTime=")).call(oe,ae)).call(re,Fe);var de=g(V=g(z="".concat(i.replaceUrl,"?createTime=")).call(z,ae)).call(V,Fe);return(de=i.genNosProtocolUrl(de)).replace("{bucket}",ue).replace("{object}",L)},genFileUrl:function(k){var L=k.bucket,$=k.objectName;return i.genNosProtocolUrl(i.replaceUrl).replace("{bucket}",L).replace("{object}",$)},genNosProtocolUrl:function(k){return/^http/.test(k)?i.httpsEnabled&&n(k).call(k,"https://")!==0&&(k=k.replace("http","https")):k=i.httpsEnabled?"https://".concat(k):"http://".concat(k),k}};i.hostEnv="BROWSER",t.exports=i},function(t,r,e){var n=e(111),g=Function.prototype,y=g.call,i=n&&g.bind.bind(y,y);t.exports=n?i:function(k){return function(){return y.apply(k,arguments)}}},function(t,r){t.exports={}},function(t,r,e){t.exports=e(464)},function(t,r,e){(function(n){var g=function(y){return y&&y.Math==Math&&y};t.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof n=="object"&&n)||function(){return this}()||Function("return this")()}).call(this,e(77))},function(t,r,e){var n=e(212),g=n.all;t.exports=n.IS_HTMLDDA?function(y){return typeof y=="function"||y===g}:function(y){return typeof y=="function"}},function(t,r,e){var n=e(13);t.exports=n({}.isPrototypeOf)},function(t,r,e){t.exports=e(220)},function(t,r,e){var n=e(111),g=Function.prototype.call;t.exports=n?g.bind(g):function(){return g.apply(g,arguments)}},function(t,r,e){var n=e(16),g=e(113),y=e(31),i=e(132),k=e(99),L=e(213),$=g("wks"),V=n.Symbol,z=V&&V.for,re=L?V:V&&V.withoutSetter||i;t.exports=function(oe){if(!y($,oe)||!k&&typeof $[oe]!="string"){var le="Symbol."+oe;k&&y(V,oe)?$[oe]=V[oe]:$[oe]=L&&z?z(le):re(le)}return $[oe]}},function(t,r,e){t.exports=e(460)},function(t,r,e){t.exports=e(280)},function(t,r,e){var n=e(158),g=e(372);function y(i){return t.exports=y=typeof n=="function"&&typeof g=="symbol"?function(k){return typeof k}:function(k){return k&&typeof n=="function"&&k.constructor===n&&k!==n.prototype?"symbol":typeof k},t.exports.__esModule=!0,t.exports.default=t.exports,y(i)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(14),g=e(31),y=e(137),i=e(40).f;t.exports=function(k){var L=n.Symbol||(n.Symbol={});g(L,k)||i(L,k,{value:y.f(k)})}},function(t,r,e){var n=e(51),g=e(56),y=e(4),i=e(22),k=e(6),L=e(28),$=e(5),V=e(52),z=e(15),re=e(53),oe=e(2),le=e(54),ue=e(55),ie=e(42),ae=e(9),Fe=e(68),de=e(78),Ne=e(64);function Ve(dr,cr){var nr=de!==void 0&&Ne(dr)||dr["@@iterator"];if(!nr){if(L(dr)||(nr=function(Sr,wr){var Mr;if(Sr){if(typeof Sr=="string")return ze(Sr,wr);var mr=ae(Mr=Object.prototype.toString.call(Sr)).call(Mr,8,-1);if(mr==="Object"&&Sr.constructor&&(mr=Sr.constructor.name),mr==="Map"||mr==="Set")return Fe(Sr);if(mr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mr))return ze(Sr,wr)}}(dr))||cr&&dr&&typeof dr.length=="number"){nr&&(dr=nr);var ur=0,ar=function(){};return{s:ar,n:function(){return ur>=dr.length?{done:!0}:{done:!1,value:dr[ur++]}},e:function(Sr){throw Sr},f:ar}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gr,pr=!0,yr=!1;return{s:function(){nr=nr.call(dr)},n:function(){var Sr=nr.next();return pr=Sr.done,Sr},e:function(Sr){yr=!0,gr=Sr},f:function(){try{pr||nr.return==null||nr.return()}finally{if(yr)throw gr}}}}function ze(dr,cr){(cr==null||cr>dr.length)&&(cr=dr.length);for(var nr=0,ur=new Array(cr);nr<cr;nr++)ur[nr]=dr[nr];return ur}function jt(dr,cr){var nr=$(dr);if(V){var ur=V(dr);cr&&(ur=z(ur).call(ur,function(ar){return re(dr,ar).enumerable})),nr.push.apply(nr,ur)}return nr}function kt(dr){for(var cr=1;cr<arguments.length;cr++){var nr,ur,ar=arguments[cr]!=null?arguments[cr]:{};cr%2?oe(nr=jt(Object(ar),!0)).call(nr,function(gr){n(dr,gr,ar[gr])}):le?ue(dr,le(ar)):oe(ur=jt(Object(ar))).call(ur,function(gr){ie(dr,gr,re(ar,gr))})}return dr}var Et=e(48),lr=e(0);function tr(dr){return lr.get(dr,"code")||lr.get(dr,"msg.code")||lr.get(dr,"statusCode")||lr.get(dr,"event.code")||0}function or(dr){var cr,nr,ur=typeof dr=="string"?dr:lr.get(dr,"msg")||lr.get(dr,"message")||lr.get(dr,"error")||lr.get(dr,"event.msg")||lr.get(dr,"event.message")||lr.get(dr,"event")||"unknown",ar="",gr="";dr&&typeof dr.toString=="function"&&(ar=dr.toString());try{gr=k(dr)}catch{}return y(cr=y(nr=`
errMsg: `.concat(ur,`
errStr: `)).call(nr,ar,`
errJsonStr: `)).call(cr,gr,`
  `)}t.exports={reportAPI:function(dr){var cr=dr.instance,nr=dr.className,ur=dr.funcName,ar=dr.hasCallback,gr=ar===void 0||ar,pr=dr.done;if(!function(wr){if(!wr||!L(wr.experiments))return!1;var Mr,mr=Ve(wr.experiments);try{for(mr.s();!(Mr=mr.n()).done;){var _r=Mr.value;if(_r.experimentKey==="api_trace_collection"&&_r.schemeKey==="open_flow"&&L(_r.variates)){var Nr,Pr=Ve(_r.variates);try{for(Pr.s();!(Nr=Pr.n()).done;){var sr=Nr.value;if(sr.key==="open"&&sr.value===!0)return!0}}catch(Ir){Pr.e(Ir)}finally{Pr.f()}}}}catch(Ir){mr.e(Ir)}finally{mr.f()}return!1}(cr.abtInfo)||!cr.reporter||!cr.reporter.isUploadEnable)return pr;var yr,Sr={user_id:lr.get(cr,"options.account")||"",trace_id:lr.get(cr,"socket.socket.sessionid"),class_name:nr,api_name:ur,action:gr?1:0,active_id:Et.deviceId,start_time:g()};return gr?(yr=i(function(){cr&&cr.logger&&cr.logger.warn("API 数据上报回调函数未调用",Sr),cr&&cr.reporter&&cr.reporter.report("nim_api_trace",kt(kt({},Sr),{},{state:1,error_code:408,error_msg:"API回调函数未被调用",duration:g()-Sr.start_time}))},1e4),function(wr){if(clearTimeout(yr),typeof pr=="function"){for(var Mr,mr=arguments.length,_r=new Array(mr>1?mr-1:0),Nr=1;Nr<mr;Nr++)_r[Nr-1]=arguments[Nr];pr.apply(void 0,y(Mr=[wr]).call(Mr,_r))}try{if(!cr||!cr.reporter)return;wr?cr.reporter.report("nim_api_trace",kt(kt({},Sr),{},{state:1,error_code:tr(wr),error_msg:or(wr),duration:g()-Sr.start_time})):cr.reporter.report("nim_api_trace",kt(kt({},Sr),{},{state:0,duration:g()-Sr.start_time}))}catch(Pr){cr&&cr.logger&&cr.logger.error("api report error",Pr)}}):(cr.reporter.report("nim_api_trace",kt(kt({},Sr),{},{state:0,duration:1})),pr)}}},function(t,r,e){var n=e(14);t.exports=function(g){return n[g+"Prototype"]}},function(t,r,e){t.exports=e(235)},function(t,r,e){var n=e(7);t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(t,r,e){var n=e(17),g=e(212),y=g.all;t.exports=g.IS_HTMLDDA?function(i){return typeof i=="object"?i!==null:n(i)||i===y}:function(i){return typeof i=="object"?i!==null:n(i)}},function(t,r,e){var n=e(13),g=e(46),y=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(i,k){return y(g(i),k)}},function(t,r,e){var n=e(17),g=e(85),y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not a function")}},function(t,r,e){var n=e(14),g=e(16),y=e(17),i=function(k){return y(k)?k:void 0};t.exports=function(k,L){return arguments.length<2?i(n[k])||i(g[k]):n[k]&&n[k][L]||g[k]&&g[k][L]}},function(t,r,e){t.exports=e(309)},function(t,r,e){var n=e(19),g=e(2),y=e(95),i=e(4),k=e(24),L=e(0);function $(re,oe){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=this;ue.message=re||le.message||"",k(oe)==="object"?(ue.event=oe,ue.code="Other_Error"):oe!==void 0&&(ue.code=oe),ue.timetag=+new Date,le!==void 0&&(ue.event=le),ue.event&&(ue.callFunc=ue.event.callFunc||null,delete ue.event.callFunc)}$.prototype=n(Error.prototype),$.prototype.name="NIMError";var V={201:"客户端版本不对, 需升级sdk",302:"用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配",403:"非法操作或没有权限",404:"对象(用户/群/聊天室)不存在",405:"参数长度过长",408:"客户端请求超时",414:"参数错误",415:"服务不可用/没有聊天室服务器可分配",416:"频率控制",417:"重复操作",422:"帐号被禁用",500:"服务器内部错误",501:"数据库操作失败",503:"服务器繁忙",508:"删除有效期过了",509:"已失效",7101:"被拉黑",700:"批量操作部分失败",801:"群人数达到上限",802:"没有权限",803:"群不存在或未发生变化",804:"用户不在群里面",805:"群类型不匹配",806:"创建群数量达到限制",807:"群成员状态不对",809:"已经在群里",811:"强推列表中帐号数量超限",812:"群被禁言",813:"因群数量限制，部分拉人成功",814:"禁止使用群组消息已读服务",815:"群管理员人数上限",816:"批量操作部分失败",997:"协议已失效",998:"解包错误",999:"打包错误",9102:"通道失效",9103:"已经在其他端接听/拒绝过这通电话",11001:"对方离线, 通话不可送达",13002:"聊天室状态异常",13003:"在黑名单中",13004:"在禁言名单中",13006:"聊天室处于整体禁言状态,只有管理员能发言",Connect_Failed:"无法建立连接, 请确保能 ping/telnet 到云信服务器; 如果是IE8/9, 请确保项目部署在 HTTPS 环境下",Error_Internet_Disconnected:"网断了",Error_Connection_is_not_Established:"连接未建立",Error_Connection_Socket_State_not_Match:"socket状态不对",Error_Timeout:"超时",Param_Error:"参数错误",No_File_Selected:"请选择文件",Wrong_File_Type:"文件类型错误",File_Too_Large:"文件过大",Cross_Origin_Iframe:"不能获取跨域Iframe的内容",Not_Support:"不支持",NO_DB:"无数据库。请确保在 onsyncdone 同步结束后再操作数据库",DB:"数据库错误",Still_In_Team:"还在群里",Session_Exist:"会话已存在",Session_Not_Exist:"会话不存在",Error_Unknown:"未知错误",Operation_Canceled:"操作取消",Sync_Error:"同步数据失败"},z=[200,406,808,810];g(z).call(z,function(re){V[re]=null}),$.genError=function(re){var oe=V[re];return oe===void 0&&(oe="操作失败"),oe===null?null:new $(oe,re)},$.multiInstance=function(re){return new $("不允许初始化多个实例","Not_Allow_Multi_Instance",re)},$.newNetworkError=function(re){var oe="Error_Internet_Disconnected";return new $(V[oe],oe,re)},$.newConnectError=function(re){var oe="Connect_Failed";return new $(V[oe]||null,oe,re)},$.newConnectionError=function(re){var oe="Error_Connection_is_not_Established";return new $(V[oe],oe,re)},$.newSocketStateError=function(re){var oe="Error_Connection_Socket_State_not_Match";return new $(V[oe],oe,re)},$.newTimeoutError=function(re){var oe="Error_Timeout";return new $(V[oe],oe,re)},$.newFrequencyControlError=function(re){var oe=new $(V[416],416,re);return oe.from="local",oe},$.newParamError=function(re,oe){return new $(re||V.Param_Error,"Param_Error",oe)},$.newNoFileError=function(re,oe){var le="No_File_Selected";return new $(re||V[le],le,oe)},$.newWrongFileTypeError=function(re,oe){var le="Wrong_File_Type";return new $(re||V[le],le,oe)},$.newFileTooLargeError=function(re,oe){var le="File_Too_Large";return new $(re||V[le],le,oe)},$.newCORSIframeError=function(re){var oe="Cross_Origin_Iframe";return new $(V[oe],oe,re)},$.newSupportError=function(re,oe,le){return new $("不支持"+re,"Not_Support_"+oe,le)},$.newSupportDBError=function(re){return $.newSupportError("数据库","DB",re)},$.noDBError=function(re){return new $(V.NO_DB,"NO_DB",re)},$.newDBError=function(re){return new $(V.DB,"DB",re)},$.newUnknownError=function(re){var oe="Error_Unknown";return new $(V[oe],oe,re)},$.stillInTeamError=function(re){var oe="Still_In_Team";return new $(V[oe],oe,re)},$.sessionExist=function(re){var oe="Session_Exist";return new $(V[oe],oe,re)},$.sessionNotExist=function(re){var oe="Session_Not_Exist";return new $(V[oe],oe,re)},$.cancel=function(re){var oe="Operation_Canceled";return new $(V[oe],oe,re)},$.syncError=function(re){return new $(V.Sync_Error,"Sync_Error",re)},$.customError=function(re,oe){re=re||"Other_Error";var le="";return(oe=oe||{}).message||(le=V[re]||re),k(re)!=="object"?new $(le,re,oe):new $(le,"Other_Error",oe===void 0?re:oe)},t.exports=$,t.exports.formatError=function(re,oe){var le,ue=oe||{},ie=ue.fallbackCode,ae=ue.fallbackMessage,Fe=ue.suffix;if(re instanceof $){var de,Ne;return y(de=re.message).call(de,Fe)||(re.message=i(Ne="".concat(re.message," ")).call(Ne,Fe||"")),re}if(re.code!==void 0&&re.message!==void 0)return re.message=i(le="".concat(re.message," ")).call(le,Fe||""),re;var Ve=re.code||re.errCode||(ie===void 0?"Error_Unknown":ie);return new $((L.get(re,"message")||L.get(re,"Message")||L.get(re,"errMsg")||L.get(re,"status")||L.get(re,"result")||ae||V[Ve]||"未知错误")+" "+(Fe||""),Ve,re)}},function(t,r,e){var n=e(166),g=e(32),y=e(111),i=n(n.bind);t.exports=function(k,L){return g(k),L===void 0?k:y?i(k,L):function(){return k.apply(L,arguments)}}},function(t,r,e){var n=e(19),g=e(23),y=e(3),i=e(79),k=e(82),L=e(12),$=e(0),V=e(297),z=$.undef,re=e(317),oe=e(156),le=e(161),ue=e(811),ie=e(812);function ae(Ne){var Ve,ze,jt,kt=this;$.verifyOptions(Ne,"appKey account token","protocol::IMProtocol"),$.verifyCallback(Ne,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onsyncsuperteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],"protocol::IMProtocol"),Ve=typeof $.get(Ne,"privateConf.isDataReportEnable")=="boolean"?Ne.privateConf.isDataReportEnable:L.privateConf.isDataReportEnable,ze=typeof $.get(Ne,"privateConf.reportConfigUrl")=="string"?Ne.privateConf.reportConfigUrl:L.privateConf.reportConfigUrl,jt=typeof $.get(Ne,"privateConf.reportUrl")=="string"?Ne.privateConf.reportUrl:L.privateConf.reportUrl,kt.reporter=V.initReporter({isDataReportEnable:Ve,reportConfigUrl:ze,reportUrl:jt,appKey:Ne.appKey,logger:kt.logger}),kt.db=Ne.api.db=new i({logger:Ne.logger,reporter:kt.reporter,account:Ne.account,core:kt,notifyError:function(Et){kt.notifyError&&kt.notifyError("DB error",Et)}}),this.processId=$.guid(),k.call(kt,Ne)}var Fe=k.fn,de=ae.fn=ae.prototype=n(Fe);de.init=function(){var Ne,Ve,ze;Fe.init.call(this),oe.IM.setProtocol(this),this.parser=oe.IM,g(Ne=this.sendCmd).call(Ne,this),this.socketUrls=[],this.syncing=!0,this.canHandleDeletedMsgInSyncing=!1,this.hasSynced=!1,this.hasSyncedTeamMembers=!1,this.syncPromiseArray=[],this.syncResult={},this.syncTeamMembersPromiseArray=[],this.syncSuperTeamMembersPromiseArray=[],this.syncTeamMembersResult={},this.syncSuperTeamMembersResult={},this.timetags={},this.superTeamMembersData={},this.saveAck={},this.sysMsgUnread=le.completeUnread({}),this.resetUnsettledMsgs(),this.resetUnsettledSysMsgs(),this.msgPromise=y.resolve(),this.sysMsgPromise=y.resolve(),this.msgDelayArr=[],this.msgDelayTimer=null,this.msgStatEnable=!1,this.nosCdnHostTimer=null,this.relativeServerTime=0,this.sessionSet={},this.msgReceiptTasks={},this.userSet={},this.pushNotificationMultiportConfig=re.getDefaultConfig(),this.msgAckBufferManager=new ue({processFn:g(Ve=this.handleMsgsAck).call(Ve,this),throttleTime:500}),this.roamingMsgSyncDoneBufferManager=new ue({processFn:g(ze=this.onSyncDone).call(ze,this),throttleTime:1500}),this.reporterHookLBS=new ie(this)},de.reset=function(){Fe.reset.call(this);var Ne=this.options;this.db.reset(Ne.db),z(Ne.lbsUrl)&&(Ne.lbsUrl=L.lbsUrl),this.autoconnect=!!Ne.autoconnect,this.resetAutoMarkRead()},de.resetAutoMarkRead=function(){var Ne=this.options;$.verifyBooleanWithDefault(Ne,"autoMarkRead",!0,"","protocol::resetAutoMarkRead")},de.resetUnsettledMsgs=function(){this.unhandledMsgs=[],this.unupdatedMsgs=[]},de.resetUnsettledSysMsgs=function(){this.unhandledSysMsgs=[],this.unhandledSysMsgsForDeletedMsgs=[],this.unupdatedSysMsgs=[]},de.packetFromSync=function(Ne){return!Ne.obj||!!Ne.obj.sync},t.exports=ae,e(813),e(814),e(815),e(833),e(835),e(836),e(837),e(838),e(839),e(840),e(841),e(846),e(847),e(848),e(849),e(850),e(851),e(852),e(853),e(854),e(855)},function(t,r,e){var n=e(30),g=String,y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not an object")}},function(t,r,e){var n=e(85);t.exports=function(g){if(typeof g=="object"&&"size"in g&&"has"in g&&"get"in g&&"set"in g&&"delete"in g&&"entries"in g)return g;throw TypeError(n(g)+" is not a map")}},function(t,r,e){var n=e(29),g=e(214),y=e(216),i=e(38),k=e(130),L=TypeError,$=Object.defineProperty,V=Object.getOwnPropertyDescriptor;r.f=n?y?function(z,re,oe){if(i(z),re=k(re),i(oe),typeof z=="function"&&re==="prototype"&&"value"in oe&&"writable"in oe&&!oe.writable){var le=V(z,re);le&&le.writable&&(z[re]=oe.value,oe={configurable:"configurable"in oe?oe.configurable:le.configurable,enumerable:"enumerable"in oe?oe.enumerable:le.enumerable,writable:!1})}return $(z,re,oe)}:$:function(z,re,oe){if(i(z),re=k(re),i(oe),g)try{return $(z,re,oe)}catch{}if("get"in oe||"set"in oe)throw L("Accessors not supported");return"value"in oe&&(z[re]=oe.value),z}},function(t,r,e){var n=e(19),g=e(81),y=e(37),i=e(12),k=e(856),L=e(156).IM,$=e(164);function V(re){var oe=$(re);return this.subType="im",this.nosScene=oe.nosScene||"im",this.nosSurvivalTime=oe.nosSurvivalTime,oe.Protocol=y,oe.Message=k,oe.constructor=V,this.init(oe)}V.Protocol=y,V.parser=L,V.use=g.use,V.getInstance=g.getInstance,V.rmAllInstances=g.rmAllInstances,V.genInstanceName=function(re){return"NIM-account-"+re.account};var z=V.fn=V.prototype=n(g.prototype);V.info=z.info=i.info,t.exports=V,e(867),e(868),e(869),e(870),e(871),e(872),e(873),e(874),e(875),e(885),e(896),e(897),e(898),e(899),e(900),e(901),e(902),e(903),e(904),e(907),e(908)},function(t,r,e){t.exports=e(255)},function(t,r,e){t.exports=e(569)},function(t,r){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(142),g=e(256);function y(i,k){for(var L=0;L<k.length;L++){var $=k[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),n(i,g($.key),$)}}t.exports=function(i,k,L){return k&&y(i.prototype,k),L&&y(i,L),n(i,"prototype",{writable:!1}),i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(112),g=Object;t.exports=function(y){return g(n(y))}},function(t,r,e){var n=e(129),g=e(112);t.exports=function(y){return n(g(y))}},function(t,r,e){var n=e(0),g={init:function(){g.deviceId=n.guid()}};g.init(),g.clientTypeMap={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac",65:"HarmonyOS"},g.db={open:function(){}},g.rnfs=null,t.exports=g},function(t,r,e){var n=e(329);t.exports=function(g){return n(g.length)}},function(t,r,e){var n=e(36),g=e(20),y=e(38),i=e(85),k=e(241),L=e(49),$=e(18),V=e(242),z=e(140),re=e(243),oe=TypeError,le=function(ie,ae){this.stopped=ie,this.result=ae},ue=le.prototype;t.exports=function(ie,ae,Fe){var de,Ne,Ve,ze,jt,kt,Et,lr=Fe&&Fe.that,tr=!(!Fe||!Fe.AS_ENTRIES),or=!(!Fe||!Fe.IS_RECORD),dr=!(!Fe||!Fe.IS_ITERATOR),cr=!(!Fe||!Fe.INTERRUPTED),nr=n(ae,lr),ur=function(gr){return de&&re(de,"normal",gr),new le(!0,gr)},ar=function(gr){return tr?(y(gr),cr?nr(gr[0],gr[1],ur):nr(gr[0],gr[1])):cr?nr(gr,ur):nr(gr)};if(or)de=ie.iterator;else if(dr)de=ie;else{if(!(Ne=z(ie)))throw oe(i(ie)+" is not iterable");if(k(Ne)){for(Ve=0,ze=L(ie);ze>Ve;Ve++)if((jt=ar(ie[Ve]))&&$(ue,jt))return jt;return new le(!1)}de=V(ie,Ne)}for(kt=or?ie.next:de.next;!(Et=g(kt,de)).done;){try{jt=ar(Et.value)}catch(gr){re(de,"throw",gr)}if(typeof jt=="object"&&jt&&$(ue,jt))return jt}return new le(!1)}},function(t,r,e){var n=e(142),g=e(256);t.exports=function(y,i,k){return(i=g(i))in y?n(y,i,{value:k,enumerable:!0,configurable:!0,writable:!0}):y[i]=k,y},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(262)},function(t,r,e){t.exports=e(487)},function(t,r,e){t.exports=e(490)},function(t,r,e){t.exports=e(493)},function(t,r,e){t.exports=e(591)},function(t,r){t.exports=!0},function(t,r,e){var n=e(73),g=String;t.exports=function(y){if(n(y)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return g(y)}},function(t,r,e){var n=e(265),g=typeof self=="object"&&self&&self.Object===Object&&self,y=n||g||Function("return this")();t.exports=y},function(t,r,e){var n=e(657)();t.exports=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){var n=e(292);function g(y,i,k,L,$,V,z){try{var re=y[V](z),oe=re.value}catch(le){return void k(le)}re.done?i(oe):n.resolve(oe).then(L,$)}t.exports=function(y){return function(){var i=this,k=arguments;return new n(function(L,$){var V=y.apply(i,k);function z(oe){g(V,L,$,z,re,"next",oe)}function re(oe){g(V,L,$,z,re,"throw",oe)}z(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(752);t.exports=function(g,y,i){return i?n(g.entries(),function(k){return y(k[1],k[0])}):g.forEach(y)}},function(t,r,e){t.exports=e(433)},function(t,r,e){t.exports=e(481)},function(t,r,e){var n=e(29),g=e(40),y=e(84);t.exports=n?function(i,k,L){return g.f(i,k,y(1,L))}:function(i,k,L){return i[k]=L,i}},function(t,r,e){(function(n){var g=e(9),y=e(22),i=e(8),k=e(144),L=e(2),$=e(6),V=e(5),z=e(143),re=e(3),oe=e(68),le=e(78),ue=e(64),ie=e(28);function ae(br,vr){var Tr=le!==void 0&&ue(br)||br["@@iterator"];if(!Tr){if(ie(br)||(Tr=function(Qr,Sn){var Mn;if(Qr){if(typeof Qr=="string")return Fe(Qr,Sn);var Xr=g(Mn=Object.prototype.toString.call(Qr)).call(Mn,8,-1);if(Xr==="Object"&&Qr.constructor&&(Xr=Qr.constructor.name),Xr==="Map"||Xr==="Set")return oe(Qr);if(Xr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xr))return Fe(Qr,Sn)}}(br))||vr&&br&&typeof br.length=="number"){Tr&&(br=Tr);var Br=0,Lr=function(){};return{s:Lr,n:function(){return Br>=br.length?{done:!0}:{done:!1,value:br[Br++]}},e:function(Qr){throw Qr},f:Lr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fr,qr=!0,Vr=!1;return{s:function(){Tr=Tr.call(br)},n:function(){var Qr=Tr.next();return qr=Qr.done,Qr},e:function(Qr){Vr=!0,Fr=Qr},f:function(){try{qr||Tr.return==null||Tr.return()}finally{if(Vr)throw Fr}}}}function Fe(br,vr){(vr==null||vr>br.length)&&(vr=br.length);for(var Tr=0,Br=new Array(vr);Tr<vr;Tr++)Br[Tr]=br[Tr];return Br}var de=e(164);function Ne(){return typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{}}function Ve(br){var vr;return g(vr=Object.prototype.toString.call(br)).call(vr,8,-1)}function ze(br){return Ve(br).toLowerCase()}function jt(br){return ze(br)==="string"}function kt(br){return ze(br)==="number"}function Et(br){return ze(br)==="array"}function lr(br){return typeof br=="function"}function tr(br){return ze(br)==="date"}function or(br){return br===null}function dr(br){return br!==null}function cr(br){return br===void 0}function nr(br){return br!==void 0}function ur(br){return nr(br)&&dr(br)}function ar(br){return cr(br)||or(br)}function gr(br){return ur(br)&&ze(br)==="object"}var pr=function(br,vr,Tr){br.addEventListener?br.addEventListener(vr,Tr,!1):br.attachEvent&&br.attachEvent("on"+vr,Tr)},yr=pr,Sr=function(br,vr,Tr){br.removeEventListener?br.removeEventListener(vr,Tr,!1):br.detachEvent&&br.detachEvent("on"+vr,Tr)},wr=Sr;function Mr(){var br=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},vr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},Tr=arguments.length>2?arguments[2]:void 0;for(var Br in br)br.hasOwnProperty(Br)&&vr.call(Tr,Br,br[Br])}function mr(br,vr){Mr(vr,function(Tr,Br){br[Tr]=Br})}var _r,Nr=(_r=0,function(){return""+_r++});function Pr(br){return jt(br)&&i(br).call(br,"{")===0&&k(br).call(br,"}")===br.length-1}function sr(br,vr,Tr){if(!br)return"";var Br=[];return Mr(br,function(Lr,Fr){lr(Fr)||(tr(Fr)?Fr=Fr.getTime():Et(Fr)?Fr=Fr.join(","):gr(Fr)&&(Fr=$(Fr)),Tr&&(Fr=encodeURIComponent(Fr)),Br.push(encodeURIComponent(Lr)+"="+Fr))}),Br.join(vr||",")}var Ir,Ar=(Ir=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(br){return Ir.test(br||"")?RegExp.$1.toLowerCase():""});function Cr(br){var vr=Ne();return br.tagName&&br.tagName.toUpperCase()==="INPUT"||vr.Blob&&br instanceof vr.Blob}t.exports={o:{},emptyObj:{},f:function(){},emptyFunc:function(){},regBlank:/\s+/gi,regWhiteSpace:/\s+/gi,getGlobal:Ne,getClass:Ve,typeOf:ze,isString:jt,isNumber:kt,isInt:function(br){return kt(br)&&br%1==0},isBoolean:function(br){return ze(br)==="boolean"},isArray:Et,isFunction:lr,isDate:tr,isRegExp:function(br){return ze(br)==="regexp"},isError:function(br){return ze(br)==="error"},isnull:or,notnull:dr,undef:cr,notundef:nr,exist:ur,notexist:ar,isObject:gr,isEmpty:function(br){return ar(br)||(jt(br)||Et(br))&&br.length===0},remove:function(br){br.parentNode&&br.parentNode.removeChild(br)},dataset:function(br,vr,Tr){if(!ur(Tr))return br.getAttribute("data-"+vr);br.setAttribute("data-"+vr,Tr)},addEventListener:pr,on:yr,removeEventListener:Sr,off:wr,target:function(br){return br.target||br.srcElement},createIframe:function(br){if(typeof document<"u"){var vr;if((br=br||{}).name)try{(vr=document.createElement('<iframe name="'+br.name+'"></iframe>')).frameBorder=0}catch{(vr=document.createElement("iframe")).name=br.name}else vr=document.createElement("iframe");br.visible||(vr.style.display="none"),lr(br.onload)&&yr(vr,"load",function Br(Lr){vr.src&&(br.multi||wr(vr,"load",Br),br.onload(Lr))}),(br.parent||document.body).appendChild(vr);var Tr=br.src||"about:blank";return y(function(){vr.src=Tr},0),vr}},html2node:function(br){if(typeof document<"u"){var vr=document.createElement("div");vr.innerHTML=br;var Tr,Br,Lr=[];if(vr.children)for(Tr=0,Br=vr.children.length;Tr<Br;Tr++)Lr.push(vr.children[Tr]);else for(Tr=0,Br=vr.childNodes.length;Tr<Br;Tr++){var Fr=vr.childNodes[Tr];Fr.nodeType===1&&Lr.push(Fr)}return Lr.length>1?vr:Lr[0]}},forOwn:Mr,mixin:mr,uniqueID:Nr,isJSON:Pr,parseJSON:function br(vr){try{Pr(vr)&&(vr=JSON.parse(vr)),gr(vr)&&Mr(vr,function(Tr,Br){switch(ze(Br)){case"string":case"object":vr[Tr]=br(Br)}})}catch{}return vr},simpleClone:function(br){return de(br)},merge:function(){for(var br=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},vr=arguments.length,Tr=new Array(vr>1?vr-1:0),Br=1;Br<vr;Br++)Tr[Br-1]=arguments[Br];return L(Tr).call(Tr,function(Lr){mr(br,Lr)}),br},fillUndef:function(br,vr){return Mr(vr,function(Tr,Br){cr(br[Tr])&&(br[Tr]=Br)}),br},checkWithDefault:function(br,vr,Tr){var Br=br[vr]||br[vr.toLowerCase()];return ar(Br)&&(Br=Tr,br[vr]=Br),Br},fetch:function(br,vr){return Mr(br,function(Tr){ur(vr[Tr])&&(br[Tr]=vr[Tr])}),br},string2object:function(){var br,vr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Tr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",",Br={};return L(br=vr.split(Tr)).call(br,function(Lr){var Fr=Lr.split("="),qr=Fr.shift();qr&&(Br[decodeURIComponent(qr)]=decodeURIComponent(Fr.join("=")))}),Br},object2string:sr,genUrlSep:function(br){return i(br).call(br,"?")<0?"?":"&"},object2query:function(br){return sr(br,"&",!0)},url2origin:Ar,isFileInput:Cr,getKeys:function(br,vr){var Tr=V(br);return vr&&z(Tr).call(Tr,function(Br,Lr){var Fr=Cr(br[Br]);return Fr===Cr(br[Lr])?0:Fr?1:-1}),Tr},_get:function(br,vr){var Tr,Br=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Lr=vr.replace(/\[(\d+)\]/g,".$1").split("."),Fr=br,qr=ae(Lr);try{for(qr.s();!(Tr=qr.n()).done;){var Vr=Tr.value;if((Fr=Object(Fr)[Vr])===void 0)return Br}}catch(Qr){qr.e(Qr)}finally{qr.f()}return Fr},getPromiseWithAbort:function(br){var vr={},Tr=new re(function(Br,Lr){vr.abort=Lr});return vr.promise=re.race([br,Tr]),vr}}}).call(this,e(77))},function(t,r,e){var n=e(33),g=e(749),y=n("Map");t.exports={Map:y,set:g("set",2),get:g("get",1),has:g("has",1),remove:g("delete",1),proto:y.prototype}},function(t,r,e){t.exports=e(261)},function(t,r,e){var n=e(36),g=e(13),y=e(129),i=e(46),k=e(49),L=e(171),$=g([].push),V=function(z){var re=z==1,oe=z==2,le=z==3,ue=z==4,ie=z==6,ae=z==7,Fe=z==5||ie;return function(de,Ne,Ve,ze){for(var jt,kt,Et=i(de),lr=y(Et),tr=n(Ne,Ve),or=k(lr),dr=0,cr=ze||L,nr=re?cr(de,or):oe||ae?cr(de,0):void 0;or>dr;dr++)if((Fe||dr in lr)&&(kt=tr(jt=lr[dr],dr,Et),z))if(re)nr[dr]=kt;else if(kt)switch(z){case 3:return!0;case 5:return jt;case 6:return dr;case 2:$(nr,jt)}else switch(z){case 4:return!1;case 7:$(nr,jt)}return ie?-1:le||ue?ue:nr}};t.exports={forEach:V(0),map:V(1),filter:V(2),some:V(3),every:V(4),find:V(5),findIndex:V(6),filterReject:V(7)}},function(t,r,e){(function(n){var g=e(9),y=e(8),i=e(307),k=e(43),L=e(24),$=function(){var V=(n===void 0?"undefined":L(n))==="object"?n:window,z=Math.pow(2,53)-1,re=/\bOpera/,oe=Object.prototype,le=oe.hasOwnProperty,ue=oe.toString;function ie(jt){return(jt=String(jt)).charAt(0).toUpperCase()+g(jt).call(jt,1)}function ae(jt){return jt=ze(jt),/^(?:webOS|i(?:OS|P))/.test(jt)?jt:ie(jt)}function Fe(jt,kt){for(var Et in jt)le.call(jt,Et)&&kt(jt[Et],Et,jt)}function de(jt){var kt;return jt==null?ie(jt):g(kt=ue.call(jt)).call(kt,8,-1)}function Ne(jt){return String(jt).replace(/([ -])(?!$)/g,"$1?")}function Ve(jt,kt){var Et=null;return function(lr,tr){var or=-1,dr=lr?lr.length:0;if(typeof dr=="number"&&dr>-1&&dr<=z)for(;++or<dr;)tr(lr[or],or,lr);else Fe(lr,tr)}(jt,function(lr,tr){Et=kt(Et,lr,tr,jt)}),Et}function ze(jt){return String(jt).replace(/^ +| +$/g,"")}return function jt(kt){var Et=V,lr=kt&&L(kt)==="object"&&de(kt)!="String";lr&&(Et=kt,kt=null);var tr=Et.navigator||{},or=tr.userAgent||"";kt||(kt=or);var dr,cr,nr,ur,ar,gr=lr?!!tr.likeChrome:/\bChrome\b/.test(kt)&&!/internal|\n/i.test(ue.toString()),pr=lr?"Object":"ScriptBridgingProxyObject",yr=lr?"Object":"Environment",Sr=lr&&Et.java?"JavaPackage":de(Et.java),wr=lr?"Object":"RuntimeObject",Mr=/\bJava/.test(Sr)&&Et.java,mr=Mr&&de(Et.environment)==yr,_r=Mr?"a":"α",Nr=Mr?"b":"β",Pr=Et.document||{},sr=Et.operamini||Et.opera,Ir=re.test(Ir=lr&&sr?sr["[[Class]]"]:de(sr))?Ir:sr=null,Ar=kt,Cr=[],br=null,vr=kt==or,Tr=vr&&sr&&typeof sr.version=="function"&&sr.version(),Br=Ve([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(Wn,Zr){return Wn||RegExp("\\b"+(Zr.pattern||Ne(Zr))+"\\b","i").exec(kt)&&(Zr.label||Zr)}),Lr=function(Wn){return Ve(Wn,function(Zr,En){return Zr||RegExp("\\b"+(En.pattern||Ne(En))+"\\b","i").exec(kt)&&(En.label||En)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Fr=Qr([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),qr=function(Wn){return Ve(Wn,function(Zr,En,Jr){return Zr||(En[Fr]||En[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Fr)]||RegExp("\\b"+Ne(Jr)+"(?:\\b|\\w*\\d)","i").exec(kt))&&Jr})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),Vr=function(Wn){return Ve(Wn,function(Zr,En){var Jr=En.pattern||Ne(En);return!Zr&&(Zr=RegExp("\\b"+Jr+"(?:/[\\d.]+|[ \\w.]*)","i").exec(kt))&&(Zr=function(kn,Un,wn){var Pn={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Un&&wn&&/^Win/i.test(kn)&&!/^Windows Phone /i.test(kn)&&(Pn=Pn[/[\d.]+$/.exec(kn)])&&(kn="Windows "+Pn),kn=String(kn),Un&&wn&&(kn=kn.replace(RegExp(Un,"i"),wn)),kn=ae(kn.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Zr,Jr,En.label||En)),Zr})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Qr(Wn){return Ve(Wn,function(Zr,En){var Jr=En.pattern||Ne(En);return!Zr&&(Zr=RegExp("\\b"+Jr+" *\\d+[.\\w_]*","i").exec(kt)||RegExp("\\b"+Jr+" *\\w+-[\\w]*","i").exec(kt)||RegExp("\\b"+Jr+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(kt))&&((Zr=String(En.label&&!RegExp(Jr,"i").test(En.label)?En.label:Zr).split("/"))[1]&&!/[\d.]+/.test(Zr[0])&&(Zr[0]+=" "+Zr[1]),En=En.label||En,Zr=ae(Zr[0].replace(RegExp(Jr,"i"),En).replace(RegExp("; *(?:"+En+"[_-])?","i")," ").replace(RegExp("("+En+")[-_.]?(\\w)","i"),"$1 $2"))),Zr})}if(Br&&(Br=[Br]),qr&&!Fr&&(Fr=Qr([qr])),(dr=/\bGoogle TV\b/.exec(Fr))&&(Fr=dr[0]),/\bSimulator\b/i.test(kt)&&(Fr=(Fr?Fr+" ":"")+"Simulator"),Lr=="Opera Mini"&&/\bOPiOS\b/.test(kt)&&Cr.push("running in Turbo/Uncompressed mode"),Lr=="IE"&&/\blike iPhone OS\b/.test(kt)?(qr=(dr=jt(kt.replace(/like iPhone OS/,""))).manufacturer,Fr=dr.product):/^iP/.test(Fr)?(Lr||(Lr="Safari"),Vr="iOS"+((dr=/ OS ([\d_]+)/i.exec(kt))?" "+dr[1].replace(/_/g,"."):"")):Lr!="Konqueror"||/buntu/i.test(Vr)?qr&&qr!="Google"&&(/Chrome/.test(Lr)&&!/\bMobile Safari\b/i.test(kt)||/\bVita\b/.test(Fr))||/\bAndroid\b/.test(Vr)&&/^Chrome/.test(Lr)&&/\bVersion\//i.test(kt)?(Lr="Android Browser",Vr=/\bAndroid\b/.test(Vr)?Vr:"Android"):Lr=="Silk"?(/\bMobi/i.test(kt)||(Vr="Android",Cr.unshift("desktop mode")),/Accelerated *= *true/i.test(kt)&&Cr.unshift("accelerated")):Lr=="PaleMoon"&&(dr=/\bFirefox\/([\d.]+)\b/.exec(kt))?Cr.push("identifying as Firefox "+dr[1]):Lr=="Firefox"&&(dr=/\b(Mobile|Tablet|TV)\b/i.exec(kt))?(Vr||(Vr="Firefox OS"),Fr||(Fr=dr[1])):!Lr||(dr=!/\bMinefield\b/i.test(kt)&&/\b(?:Firefox|Safari)\b/.exec(Lr))?(Lr&&!Fr&&/[\/,]|^[^(]+?\)/.test(g(kt).call(kt,y(kt).call(kt,dr+"/")+8))&&(Lr=null),(dr=Fr||qr||Vr)&&(Fr||qr||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Vr))&&(Lr=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Vr)?Vr:dr)+" Browser")):Lr=="Electron"&&(dr=(/\bChrome\/([\d.]+)\b/.exec(kt)||0)[1])&&Cr.push("Chromium "+dr):Vr="Kubuntu",Tr||(Tr=Ve(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version","HeadlessChrome",Ne(Lr),"(?:Firefox|Minefield|NetFront)"],function(Wn,Zr){return Wn||(RegExp(Zr+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(kt)||0)[1]||null})),(dr=(Br=="iCab"&&i(Tr)>3?"WebKit":/\bOpera\b/.test(Lr)&&(/\bOPR\b/.test(kt)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(kt)&&!/^(?:Trident|EdgeHTML)$/.test(Br)&&"WebKit"||!Br&&/\bMSIE\b/i.test(kt)&&(Vr=="Mac OS"?"Tasman":"Trident")||Br=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Lr)&&"NetFront")&&(Br=[dr]),Lr=="IE"&&(dr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(kt)||0)[1])?(Lr+=" Mobile",Vr="Windows Phone "+(/\+$/.test(dr)?dr:dr+".x"),Cr.unshift("desktop mode")):/\bWPDesktop\b/i.test(kt)?(Lr="IE Mobile",Vr="Windows Phone 8.x",Cr.unshift("desktop mode"),Tr||(Tr=(/\brv:([\d.]+)/.exec(kt)||0)[1])):Lr!="IE"&&Br=="Trident"&&(dr=/\brv:([\d.]+)/.exec(kt))&&(Lr&&Cr.push("identifying as "+Lr+(Tr?" "+Tr:"")),Lr="IE",Tr=dr[1]),vr){if(ur="global",ar=(nr=Et)!=null?L(nr[ur]):"number",/^(?:boolean|number|string|undefined)$/.test(ar)||ar=="object"&&!nr[ur])de(dr=Et.runtime)==pr?(Lr="Adobe AIR",Vr=dr.flash.system.Capabilities.os):de(dr=Et.phantom)==wr?(Lr="PhantomJS",Tr=(dr=dr.version||null)&&dr.major+"."+dr.minor+"."+dr.patch):typeof Pr.documentMode=="number"&&(dr=/\bTrident\/(\d+)/i.exec(kt))?(Tr=[Tr,Pr.documentMode],(dr=+dr[1]+4)!=Tr[1]&&(Cr.push("IE "+Tr[1]+" mode"),Br&&(Br[1]=""),Tr[1]=dr),Tr=Lr=="IE"?String(Tr[1].toFixed(1)):Tr[0]):typeof Pr.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Lr)&&(Cr.push("masking as "+Lr+" "+Tr),Lr="IE",Tr="11.0",Br=["Trident"],Vr="Windows");else if(Mr&&(Ar=(dr=Mr.lang.System).getProperty("os.arch"),Vr=Vr||dr.getProperty("os.name")+" "+dr.getProperty("os.version")),mr){try{Tr=Et.require("ringo/engine").version.join("."),Lr="RingoJS"}catch{(dr=Et.system)&&dr.global.system==Et.system&&(Lr="Narwhal",Vr||(Vr=dr[0].os||null))}Lr||(Lr="Rhino")}else L(Et.process)==="object"&&!Et.process.browser&&(dr=Et.process)&&(L(dr.versions)==="object"&&(typeof dr.versions.electron=="string"?(Cr.push("Node "+dr.versions.node),Lr="Electron",Tr=dr.versions.electron):typeof dr.versions.nw=="string"&&(Cr.push("Chromium "+Tr,"Node "+dr.versions.node),Lr="NW.js",Tr=dr.versions.nw)),Lr||(Lr="Node.js",Ar=dr.arch,Vr=dr.platform,Tr=(Tr=/[\d.]+/.exec(dr.version))?Tr[0]:null));Vr=Vr&&ae(Vr)}if(Tr&&(dr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Tr)||/(?:alpha|beta)(?: ?\d)?/i.exec(kt+";"+(vr&&tr.appMinorVersion))||/\bMinefield\b/i.test(kt)&&"a")&&(br=/b/i.test(dr)?"beta":"alpha",Tr=Tr.replace(RegExp(dr+"\\+?$"),"")+(br=="beta"?Nr:_r)+(/\d+\+?/.exec(dr)||"")),Lr=="Fennec"||Lr=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(Vr))Lr="Firefox Mobile";else if(Lr=="Maxthon"&&Tr)Tr=Tr.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Fr))Fr=="Xbox 360"&&(Vr=null),Fr=="Xbox 360"&&/\bIEMobile\b/.test(kt)&&Cr.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(Lr)&&(!Lr||Fr||/Browser|Mobi/.test(Lr))||Vr!="Windows CE"&&!/Mobi/i.test(kt))if(Lr=="IE"&&vr)try{Et.external===null&&Cr.unshift("platform preview")}catch{Cr.unshift("embedded")}else(/\bBlackBerry\b/.test(Fr)||/\bBB10\b/.test(kt))&&(dr=(RegExp(Fr.replace(/ +/g," *")+"/([.\\d]+)","i").exec(kt)||0)[1]||Tr)?(Vr=((dr=[dr,/BB10/.test(kt)])[1]?(Fr=null,qr="BlackBerry"):"Device Software")+" "+dr[0],Tr=null):this!=Fe&&Fr!="Wii"&&(vr&&sr||/Opera/.test(Lr)&&/\b(?:MSIE|Firefox)\b/i.test(kt)||Lr=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Vr)||Lr=="IE"&&(Vr&&!/^Win/.test(Vr)&&Tr>5.5||/\bWindows XP\b/.test(Vr)&&Tr>8||Tr==8&&!/\bTrident\b/.test(kt)))&&!re.test(dr=jt.call(Fe,kt.replace(re,"")+";"))&&dr.name&&(dr="ing as "+dr.name+((dr=dr.version)?" "+dr:""),re.test(Lr)?(/\bIE\b/.test(dr)&&Vr=="Mac OS"&&(Vr=null),dr="identify"+dr):(dr="mask"+dr,Lr=Ir?ae(Ir.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(dr)&&(Vr=null),vr||(Tr=null)),Br=["Presto"],Cr.push(dr));else Lr+=" Mobile";if(dr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(kt)||0)[1]){var Sn,Mn;dr=[i(dr.replace(/\.(\d)$/,".0$1")),dr],Lr=="Safari"&&g(Sn=dr[1]).call(Sn,-1)=="+"?(Lr="WebKit Nightly",br="alpha",Tr=g(Mn=dr[1]).call(Mn,0,-1)):Tr!=dr[1]&&Tr!=(dr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(kt)||0)[1])||(Tr=null),dr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(kt)||0)[1],dr[0]==537.36&&dr[2]==537.36&&i(dr[1])>=28&&Br=="WebKit"&&(Br=["Blink"]),vr&&(gr||dr[1])?(Br&&(Br[1]="like Chrome"),dr=dr[1]||((dr=dr[0])<530?1:dr<532?2:dr<532.05?3:dr<533?4:dr<534.03?5:dr<534.07?6:dr<534.1?7:dr<534.13?8:dr<534.16?9:dr<534.24?10:dr<534.3?11:dr<535.01?12:dr<535.02?"13+":dr<535.07?15:dr<535.11?16:dr<535.19?17:dr<536.05?18:dr<536.1?19:dr<537.01?20:dr<537.11?"21+":dr<537.13?23:dr<537.18?24:dr<537.24?25:dr<537.36?26:Br!="Blink"?"27":"28")):(Br&&(Br[1]="like Safari"),dr=(dr=dr[0])<400?1:dr<500?2:dr<526?3:dr<533?4:dr<534?"4+":dr<535?5:dr<537?6:dr<538?7:dr<601?8:"8"),Br&&(Br[1]+=" "+(dr+=typeof dr=="number"?".x":/[.+]/.test(dr)?"":"+")),Lr=="Safari"&&(!Tr||k(Tr)>45)&&(Tr=dr)}Lr=="Opera"&&(dr=/\bzbov|zvav$/.exec(Vr))?(Lr+=" ",Cr.unshift("desktop mode"),dr=="zvav"?(Lr+="Mini",Tr=null):Lr+="Mobile",Vr=Vr.replace(RegExp(" *"+dr+"$"),"")):Lr=="Safari"&&/\bChrome\b/.exec(Br&&Br[1])&&(Cr.unshift("desktop mode"),Lr="Chrome Mobile",Tr=null,/\bOS X\b/.test(Vr)?(qr="Apple",Vr="iOS 4.3+"):Vr=null),Tr&&y(Tr).call(Tr,dr=/[\d.]+$/.exec(Vr))==0&&y(kt).call(kt,"/"+dr+"-")>-1&&(Vr=ze(Vr.replace(dr,""))),Br&&!/\b(?:Avant|Nook)\b/.test(Lr)&&(/Browser|Lunascape|Maxthon/.test(Lr)||Lr!="Safari"&&/^iOS/.test(Vr)&&/\bSafari\b/.test(Br[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(Lr)&&Br[1])&&(dr=Br[Br.length-1])&&Cr.push(dr),Cr.length&&(Cr=["("+Cr.join("; ")+")"]),qr&&Fr&&y(Fr).call(Fr,qr)<0&&Cr.push("on "+qr),Fr&&Cr.push((/^on /.test(Cr[Cr.length-1])?"":"on ")+Fr),Vr&&(dr=/ ([\d.+]+)$/.exec(Vr),cr=dr&&Vr.charAt(Vr.length-dr[0].length-1)=="/",Vr={architecture:32,family:dr&&!cr?Vr.replace(dr[0],""):Vr,version:dr?dr[1]:null,toString:function(){var Wn=this.version;return this.family+(Wn&&!cr?" "+Wn:"")+(this.architecture==64?" 64-bit":"")}}),(dr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Ar))&&!/\bi686\b/i.test(Ar)?(Vr&&(Vr.architecture=64,Vr.family=Vr.family.replace(RegExp(" *"+dr),"")),Lr&&(/\bWOW64\b/i.test(kt)||vr&&/\w(?:86|32)$/.test(tr.cpuClass||tr.platform)&&!/\bWin64; x64\b/i.test(kt))&&Cr.unshift("32-bit")):Vr&&/^OS X/.test(Vr.family)&&Lr=="Chrome"&&i(Tr)>=39&&(Vr.architecture=64),kt||(kt=null);var Xr={};return Xr.description=kt,Xr.layout=Br&&Br[0],Xr.manufacturer=qr,Xr.name=Lr,Xr.prerelease=br,Xr.product=Fr,Xr.ua=kt,Xr.version=Lr&&Tr,Xr.os=Vr||{architecture:null,family:null,version:null,toString:function(){return"null"}},Xr.parse=jt,Xr.toString=function(){return this.description||""},Xr.version&&Cr.unshift(Tr),Xr.name&&Cr.unshift(Lr),Vr&&Lr&&(Vr!=String(Vr).split(" ")[0]||Vr!=Lr.split(" ")[0]&&!Fr)&&Cr.push(Fr?"("+Vr+")":"on "+Vr),Cr.length&&(Xr.description=Cr.join(" ")),Xr}()}();t.exports=$}).call(this,e(77))},function(t,r,e){var n=e(13),g=n({}.toString),y=n("".slice);t.exports=function(i){return y(g(i),8,-1)}},function(t,r,e){var n=e(33);t.exports=n("navigator","userAgent")||""},function(t,r,e){var n=e(172),g=e(17),y=e(71),i=e(21)("toStringTag"),k=Object,L=y(function(){return arguments}())=="Arguments";t.exports=n?y:function($){var V,z,re;return $===void 0?"Undefined":$===null?"Null":typeof(z=function(oe,le){try{return oe[le]}catch{}}(V=k($),i))=="string"?z:L?y(V):(re=y(V))=="Object"&&g(V.callee)?"Arguments":re}},function(t,r,e){var n=e(65);t.exports=function(g,y,i,k){return k&&k.enumerable?g[y]=i:n(g,y,i),g}},function(t,r,e){e(90);var n=e(363),g=e(16),y=e(73),i=e(65),k=e(105),L=e(21)("toStringTag");for(var $ in n){var V=g[$],z=V&&V.prototype;z&&y(z)!==L&&i(z,L,$),k[$]=k.Array}},function(t,r,e){var n=e(32),g=TypeError,y=function(i){var k,L;this.promise=new i(function($,V){if(k!==void 0||L!==void 0)throw g("Bad Promise constructor");k=$,L=V}),this.resolve=n(k),this.reject=n(L)};t.exports.f=function(i){return new y(i)}},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}t.exports=e},function(t,r,e){t.exports=e(223)},function(t,r,e){var n=e(798);n.fn=n.prototype,t.exports=n,e(800),e(801),e(802),e(803),e(804),e(805),e(806),e(807),e(808),e(809),e(810)},function(t,r,e){var n=e(24),g=e(5),y=e(6),i=e(15),k=e(2),L=e(11),$=e(9),V=e(68),z=e(78),re=e(64),oe=e(28);function le(or,dr){var cr=z!==void 0&&re(or)||or["@@iterator"];if(!cr){if(oe(or)||(cr=function(yr,Sr){var wr;if(yr){if(typeof yr=="string")return ue(yr,Sr);var Mr=$(wr=Object.prototype.toString.call(yr)).call(wr,8,-1);if(Mr==="Object"&&yr.constructor&&(Mr=yr.constructor.name),Mr==="Map"||Mr==="Set")return V(yr);if(Mr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mr))return ue(yr,Sr)}}(or))||dr&&or&&typeof or.length=="number"){cr&&(or=cr);var nr=0,ur=function(){};return{s:ur,n:function(){return nr>=or.length?{done:!0}:{done:!1,value:or[nr++]}},e:function(yr){throw yr},f:ur}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar,gr=!0,pr=!1;return{s:function(){cr=cr.call(or)},n:function(){var yr=cr.next();return gr=yr.done,yr},e:function(yr){pr=!0,ar=yr},f:function(){try{gr||cr.return==null||cr.return()}finally{if(pr)throw ar}}}}function ue(or,dr){(dr==null||dr>or.length)&&(dr=or.length);for(var cr=0,nr=new Array(dr);cr<dr;cr++)nr[cr]=or[cr];return nr}var ie=e(0),ae=ie.undef,Fe=ie.notundef,de=ie.exist,Ne=e(199),Ve=e(303),ze={p2p:0,team:1,superTeam:5},jt={0:"p2p",1:"team",5:"superTeam"},kt=g(ze),Et=Ve.typeMap,lr=Ve.validTypes;function tr(or){ie.verifyOptions(or,"scene to type","msg::Message"),ie.verifyParamValid("scene",or.scene,kt,"msg::Message"),this.scene=ze[or.scene],this.to=""+or.to,this.type=Et[or.type],this.resend=or.resend?1:0,or.resend?(ie.verifyOptions(or,"idClient","msg::Message"),this.idClient=or.idClient):this.idClient=ie.guid(),Fe(or.subType)&&(ie.isInt(+or.subType)&&+or.subType>0?this.subType=+or.subType:ie.onParamError("subType只能是大于0的整数","msg::Message"));var dr=or.replyMsg;dr&&dr.idServer&&dr.from&&dr.to&&dr.time&&(this.replyMsgFromAccount=dr.from,this.replyMsgToAccount=dr.to,this.replyMsgTime=dr.time,this.replyMsgIdServer=dr.idServer,this.replyMsgIdClient=dr.idClient,dr.threadMsgFromAccount&&dr.threadMsgIdServer&&dr.threadMsgTime&&dr.threadMsgToAccount?(this.threadMsgFromAccount=dr.threadMsgFromAccount,this.threadMsgToAccount=dr.threadMsgToAccount,this.threadMsgTime=dr.threadMsgTime,this.threadMsgIdServer=dr.threadMsgIdServer,this.threadMsgIdClient=dr.threadMsgIdClient):(this.threadMsgFromAccount=dr.from,this.threadMsgToAccount=dr.to,this.threadMsgTime=dr.time,this.threadMsgIdServer=dr.idServer,this.threadMsgIdClient=dr.idClient)),Fe(or.text)&&(this.body=""+or.text),Fe(or.custom)&&(n(or.custom)==="object"?this.custom=y(or.custom):this.custom=""+or.custom),Fe(or.body)&&(this.body=""+or.body),Fe(or.pushContent)&&(this.pushContent=""+or.pushContent),Fe(or.pushPayload)&&(this.pushPayload=""+or.pushPayload);var cr=or.apns;if(Fe(cr)&&or.scene==="team"){var nr=cr.accounts;Fe(nr)&&ie.verifyParamType("apns.accounts",nr,"array","msg::Message"),this.apnsAccounts=nr?y(nr):"#%@all@%#",this.apnsContent=cr.content||or.pushContent||"",ie.verifyBooleanWithDefault(cr,"forcePush",!0,"options.apns","msg::Message"),this.apnsForcePush=cr.forcePush?1:0}var ur=or.robotInfo;Fe(ur)&&(or.scene==="team"&&ie.verifyOptions(or.robotInfo,"account","msg::Message::robotInfo scene === team"),ur.function&&(this.robotInfoFunction=ur.function),ur.topic&&(this.robotInfoTopic=ur.topic),ur.customContent&&(this.robotInfoCustomContent=ur.customContent),ur.account&&(this.robotInfoAccount=ur.account)),Fe(or.isHistoryable)&&(this.isHistoryable=or.isHistoryable?1:0),Fe(or.isRoamingable)&&(this.isRoamingable=or.isRoamingable?1:0),Fe(or.isSyncable)&&(this.isSyncable=or.isSyncable?1:0),Fe(or.cc)&&(this.cc=or.cc?1:0),Fe(or.env)&&(this.env=or.env),Fe(or.isPushable)&&(this.isPushable=or.isPushable?1:0),Fe(or.isOfflinable)&&(this.isOfflinable=or.isOfflinable?1:0),Fe(or.isUnreadable)&&(this.isUnreadable=or.isUnreadable?1:0),Fe(or.needPushNick)&&(this.needPushNick=or.needPushNick?1:0),Fe(or.needMsgReceipt)&&(this.needMsgReceipt=or.needMsgReceipt?1:0),Fe(or.yidunEnable)&&(this.yidunEnable=or.yidunEnable?1:0),this.needUpdateSession=or.needUpdateSession===!1?0:1,Fe(or.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=or.antiSpamUsingYidun?1:0),Fe(or.clientAntiSpam)&&(this.clientAntiSpam=or.clientAntiSpam?1:0),Fe(or.antiSpamContent)&&(n(or.antiSpamContent)==="object"?this.antiSpamContent=y(or.antiSpamContent):this.antiSpamContent=""+or.antiSpamContent),Fe(or.antiSpamBusinessId)&&(n(or.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=y(or.antiSpamBusinessId):this.antiSpamBusinessId=""+or.antiSpamBusinessId),Fe(or.yidunAntiCheating)&&(this.yidunAntiCheating=or.yidunAntiCheating),Fe(or.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=or.yidunAntiSpamExt)}ie.merge(tr.prototype,Ve.prototype),tr.prototype.getScene=function(){return jt[this.scene]},tr.getType=Ve.getType,tr.setFlow=Ve.setFlow,tr.reverse=function(or){var dr,cr=jt[or.scene];if(dr=or.delete==="1"?{delete:!0,scene:cr||or.scene,from:or.from,time:+or.time,to:""+or.to}:{scene:cr||or.scene,from:or.from,fromNick:or.fromNick,fromClientType:Ne.reverseType(or.fromClientType),fromDeviceId:or.fromDeviceId,to:""+or.to,time:+or.time,type:tr.getType(or),text:de(or.body)?or.body:or.text||"",isHistoryable:ae(or.isHistoryable)||+or.isHistoryable==1,isRoamingable:ae(or.isRoamingable)||+or.isRoamingable==1,isSyncable:ae(or.isSyncable)||+or.isSyncable==1,cc:ae(or.cc)||+or.cc==1,isPushable:ae(or.isPushable)||+or.isPushable==1,isOfflinable:ae(or.isOfflinable)||+or.isOfflinable==1,isUnreadable:ae(or.isUnreadable)||+or.isUnreadable==1,isReplyMsg:ae(or.isReplyMsg)||+or.isReplyMsg==1,needPushNick:ae(or.needPushNick)||+or.needPushNick==1,needMsgReceipt:+or.needMsgReceipt==1,isLocal:!1},or.isInBlackList&&(dr.isInBlackList=+or.isInBlackList==1,dr.isInBlackList&&(or.status="fail")),Fe(or.isMuted)&&(dr.isMuted=+or.isMuted==1),Fe(or.resend)&&(dr.resend=+or.resend==1),Fe(or.idClient)&&(dr.idClient=or.idClient),Fe(or.idServer)&&(dr.idServer=""+or.idServer),Fe(or.userUpdateTime)&&(dr.userUpdateTime=+or.userUpdateTime),Fe(or.custom)&&(dr.custom=or.custom),Fe(or.callbackExt)&&(dr.callbackExt=or.callbackExt),Fe(or.subType)&&(dr.subType=+or.subType),Fe(or.pushContent)&&(dr.pushContent=or.pushContent),Fe(or.pushPayload)&&(dr.pushPayload=or.pushPayload),Fe(or.tempTeamMemberCount)&&(dr.tempTeamMemberCount=+or.tempTeamMemberCount),Fe(or.yidunAntiSpamRes)&&(dr.yidunAntiSpamRes=or.yidunAntiSpamRes),Fe(or.apnsAccounts)){if(dr.apns={},or.apnsAccounts!=="#%@all@%#"){var nr=or.apnsAccounts;try{dr.apns.accounts=JSON.parse(nr)}catch{dr.apns.accounts=[]}}dr.apns.content=or.apnsContent||"",dr.apns.forcePush=+or.apnsForcePush==1}if(Fe(or.robotInfoFunction)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoFunction&&(dr.robotInfo.function=or.robotInfoFunction)),Fe(or.robotInfoCustomContent)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoCustomContent&&(dr.robotInfo.customContent=or.robotInfoCustomContent)),Fe(or.robotInfoTopic)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoTopic&&(dr.robotInfo.topic=or.robotInfoTopic)),Fe(or.robotInfoAccount)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoAccount&&(dr.robotInfo.account=or.robotInfoAccount)),Fe(or.needUpdateSession)&&(dr.needUpdateSession=+or.needUpdateSession==1),dr.status=or.status||"success",Fe(i(or))&&(dr.filter=i(or)),or.replyMsgIdServer&&or.threadMsgIdServer){var ur=["replyMsgFromAccount","replyMsgToAccount","replyMsgTime","replyMsgIdServer","replyMsgIdClient","threadMsgFromAccount","threadMsgToAccount","threadMsgTime","threadMsgIdServer","threadMsgIdClient"];k(ur).call(ur,function(ar){dr[ar]=or[ar]}),dr.replyMsgTime=+dr.replyMsgTime,dr.threadMsgTime=+dr.threadMsgTime}return dr},tr.setExtra=function(or,dr){or.target=tr.getMsgTarget(or,dr),or.sessionId=or.scene+"-"+or.target,Ve.setFlow(or,dr)},tr.getMsgTarget=function(or,dr){return or.scene==="p2p"?or.to===dr?or.from:or.to:or.scene==="team"||or.scene==="superTeam"?or.to:void 0},tr.deduplication=function(or){var dr,cr,nr={},ur=le(or);try{for(ur.s();!(cr=ur.n()).done;){var ar=cr.value,gr=nr[ar.idClient];gr&&gr.time>ar.time||(nr[ar.idClient]=ar)}}catch(pr){ur.e(pr)}finally{ur.f()}return L(dr=g(nr)).call(dr,function(pr){return nr[pr]})},tr.sortMsgs=function(or){return or=$(or).call(or,0),ie.sortObjArray(or,{sortPath:"time"}),or},tr.getLastMsg=function(or){return(or=tr.sortMsgs(or))[or.length-1]},tr.getLastNotIgnoredMsg=function(or){for(var dr=null,cr=(or=tr.sortMsgs(or)).length-1;cr>=0;cr--)if(!(dr=or[cr]).ignore)return dr;return null},tr.getMaxTimetag=function(or){return tr.getLastMsg(or).time},tr.validScenes=kt,tr.validTypes=lr,tr.sceneMap=ze,tr.sceneReverseMap=jt,t.exports=tr},function(t,r,e){var n=e(24),g=e(19),y=e(28),i=e(2),k=e(384),L=e(8),$=e(5),V=e(6),z=e(3),re=e(141),oe=e(0),le=oe.notundef,ue=e(564),ie=e(12),ae=(e(192),e(12)),Fe=e(48),de=e(590).wrapSafeCallback,Ne=e(26).reportAPI,Ve=e(164);function ze(){}var jt={};ze.getInstance=function(tr){tr=Et(tr),oe.verifyOptions(tr,"account","api::Base.getInstance");var or=this.genInstanceName(tr),dr=jt[or];return dr?ze.updateInstance(dr,tr):dr=jt[or]=new this(tr),dr},ze.updateInstance=function(tr,or){tr.setOptions(or),or.skipConnectionOnInitialize||tr.connect()};var kt=ze.fn=ze.prototype=g(new re),Et=function(tr){return tr.nosSurvivalTime?(oe.verifyParamType("nosSurvivalTime",tr.nosSurvivalTime,"number","api::Base.getInstance"),oe.verifyParamMin("nosSurvivalTime",tr.nosSurvivalTime,86400,"api::Base.getInstance")):tr.nosSurvivalTime=1/0,tr};kt.updatePrivateConf=function(tr){if(Ne({instance:this,className:"ApiBaseFn",funcName:"updatePrivateConf",hasCallback:!1}),tr&&n(tr.privateConf)==="object"){var or=tr.privateConf;typeof or.lbs_web=="string"&&(tr.lbsUrl=or.lbs_web),typeof or.link_ssl_web=="boolean"&&(tr.secure=or.link_ssl_web),typeof or.https_enabled=="boolean"&&(tr.httpsEnabled=or.https_enabled),tr.uploadUrl=or.nos_uploader_web?or.nos_uploader_web:null,tr.chunkUploadUrl=or.nos_uploader_web?or.nos_uploader_web:null,tr.replaceUrl=or.nos_downloader?or.nos_downloader:null,tr.downloadUrl=or.nos_accelerate?or.nos_accelerate:null,tr.downloadHost=or.nos_accelerate_host?or.nos_accelerate_host:null,tr.downloadHostList=or.nos_accelerate_host_list||[],tr.downloadHost&&tr.downloadHostList.push(tr.downloadHost),tr.nosCdnEnable=or.nos_cdn_enable!==!1,tr.ntServerAddress=or.nt_server||null,tr.kibanaServer=or.kibana_server,tr.statisticServer=or.statistic_server,tr.reportGlobalServer=or.report_global_server,tr.ipVersion=or.ip_protocol_version||tr.ipVersion,tr.defaultLink=or.link_web||tr.defaultLink,tr.ipv6DefaultLink=or.link_ipv6_web||tr.ipv6DefaultLink,typeof or.nos_lbs=="string"?tr.nosLbsUrls=[or.nos_lbs]:tr.nosLbsUrls=[],y(or.nos_edge_list)&&(tr.edgeList=or.nos_edge_list)}return tr.ntServerAddress===null||tr.ntServerAddress===""?ie.ntServerAddress=null:ie.ntServerAddress=tr.ntServerAddress,ie.uploadUrl=tr.uploadUrl||ie.uploadUrl,ie.chunkUploadUrl=tr.chunkUploadUrl||ie.chunkUploadUrl,ie.downloadUrl=tr.downloadUrl||ie.downloadUrl,ie.downloadHost=tr.downloadHost||ie.downloadHost,ie.downloadHostList=tr.downloadHostList&&tr.downloadHostList.length>0?tr.downloadHostList:ie.downloadHostList,ie.nosCdnEnable=tr.nosCdnEnable!==!1,ie.replaceUrl=tr.replaceUrl||ie.replaceUrl,ie.httpsEnabled=tr.httpsEnabled||ie.httpsEnabled,tr.probe_ipv4_url&&(ie.ipProbeAddr.ipv4=tr.probe_ipv4_url),tr.probe_ipv6_url&&(ie.ipProbeAddr.ipv6=tr.probe_ipv6_url),tr},kt.init=function(tr){oe.verifyOptions(tr,"account","api::Base.init"),tr=this.updatePrivateConf(tr),oe.verifyBooleanWithDefault(tr,"exifOrientation",!0,"","api::Base.init"),tr.lbsBackup=tr.lbsBackup===void 0||tr.lbsBackup;var or=this.account=tr.account=tr.account+"",dr=tr.constructor.genInstanceName(tr),cr=jt[dr];if(tr._disableSingleton&&(cr=null),cr)return ze.updateInstance(cr,tr),cr;this.logger=tr.logger=new ue({debug:tr.debug,logFunc:tr.logFunc,prefix:this.subType,dbLog:tr.dbLog!==!1,account:tr.account,expire:tr.expire,logLevel:tr.logLevel}),this.options=de(tr,this),tr.api=this;var nr=this.protocol=new tr.Protocol(tr);return nr.name="Protocol-"+dr,nr.account=or,nr.api=this,nr.message=this.message=new tr.Message({account:or}),this.reporter=nr.reporter,this.statusProtector=nr.statusProtector,this.reporterHook=nr.reporterHook,this.abtInfo={},(typeof oe.get(tr,"privateConf.isABTestEnable")=="boolean"?tr.privateConf.isABTestEnable:ie.privateConf.isABTestEnable)&&this.abTestConfigRequset(),this.name=dr,jt[dr]=this,this},kt.destroy=function(tr){var or=this;(tr=tr||{}).done=Ne({instance:this,className:"ApiBaseFn",funcName:"destroy",done:tr.done});var dr=this;if(!dr.__beginDestroy){var cr;dr.__beginDestroy=!0,tr=tr||{};var nr,ur=this.name;if(this.logger.warn("destroy::start"),!ur)return this.logger&&this.logger.warn&&this.logger.warn("destroy::no instanceName"),void(dr.__beginDestroy=void 0);this.protocol&&(cr=this.protocol.connectTimer),this.protocol&&this.protocol.resetPush&&this.protocol.resetPush(),this.eventNames&&typeof this.eventNames=="function"&&i(nr=this.eventNames()).call(nr,function(ar){delete or._events[ar]}),this.disconnect({done:function(ar){var gr,pr,yr;dr.logger.warn(`ApiBase::destroy: instance destroyed ...

`),dr.__beginDestroy=void 0,dr.reporter.destroy(),dr.statusProtector.destroy(),dr.reporterHook.destroy(),i(gr=k(dr.options)).call(gr,function(wr){L(wr).call(wr,"on")===0&&(dr.options[wr]=function(){},dr.protocol.options[wr]=function(){},dr.protocol.api.options[wr]=function(){})}),dr.logger.destroy(),n(dr.protocol.sessionSet)==="object"&&i(pr=$(dr.protocol.sessionSet)).call(pr,function(wr){dr.protocol.sessionSet[wr].unreadMsgs=[],dr.protocol.sessionSet[wr]=void 0}),dr.protocol.syncResult={},dr.db&&dr.db.close();var Sr=dr.protocol;i(yr=k(dr)).call(yr,function(wr){dr[wr]=void 0}),jt&&(jt[ur]=null,clearTimeout(cr)),Sr&&(Sr.__destroyed=!0),tr.done instanceof Function&&tr.done(ar)}})}},kt.setOptions=function(tr){var or=Ve(tr);or=de(or,this),this.protocol.setOptions(or)},kt.abTestConfigRequset=function(){var tr=this,or=tr.options.abTestUrl||"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",dr={projectKey:"im1_sdk_abtest_web",appKey:tr.options.appKey,osType:"Web",sdkVersion:tr.info.version,deviceId:Fe.deviceId},cr=V({clientInfo:dr});this.protocol.adaptersRequest(or,{method:"POST",timeout:5e3,headers:{"Content-Type":"application/json"},data:cr,onload:function(nr){var ur=JSON.parse(nr);tr.abtInfo=ur.data.abtInfo||{},tr.logger&&tr.logger.info("abTestConfigRequset::success",tr.abtInfo),ae.hasLocalStorage&&localStorage.setItem("nim-abtInfo",V(tr.abtInfo))},onerror:function(){tr.logger&&tr.logger.info("abTestConfigRequset::fail")}},{exception_service:7})},kt.processCallback=function(tr,or){lr(tr,or)},kt.processCallbackPromise=function(tr,or){return new z(function(dr,cr){lr(tr,or,!0,dr,cr)})};var lr=function(tr,or,dr,cr,nr){var ur="api::processCallback";dr&&(ur="api::processCallbackPromise"),oe.verifyCallback(tr,"done",ur),tr.callback=function(ar,gr,pr){var yr=tr.callback.options;if(gr=gr||yr,or&&(gr=yr),oe.isFunction(tr.cbaop)){var Sr=tr.cbaop(ar,gr);le(Sr)&&(gr=Sr)}var wr=tr.done;oe.isObject(gr)&&(delete gr.done,delete gr.cb,delete gr.callback),dr?ar?nr({message:"生成接口回调错误",callFunc:ur,event:ar}):cr(gr):wr(ar,gr,pr)},tr.callback.options=oe.copy(tr)};kt.processPs=function(tr){oe.notexist(tr.ps)&&(tr.ps=""),oe.verifyArrayMax("ps",tr.ps,5e3)},kt.processCustom=function(tr){oe.notexist(tr.custom)&&(tr.custom="")},kt.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},kt.sendCmdWithResp=function(tr,or,dr){this.sendCmd(tr,or,function(cr,nr,ur){oe.isFunction(dr)&&(cr?dr(cr,nr):dr(null,ur))})},kt.cbAndSendCmd=function(tr,or){var dr=this.processCallbackPromise(or);return this.sendCmd(tr,or),dr},kt.sendCmdUsePromise=function(tr,or){var dr=this,cr=Ne({instance:this,className:"ApiBaseFn",funcName:tr,hasCallback:!0});return new z(function(nr,ur){dr.sendCmd(tr,or,function(ar,gr,pr){if(ar)typeof cr=="function"&&cr(ar),ur(ar);else{var yr=oe.merge({},gr,pr);typeof cr=="function"&&cr(void 0),nr(yr)}})})},ze.use=function(tr,or){tr&&tr.install&&oe.isFunction(tr.install)&&tr.install(this,or)},ze.rmAllInstances=function(){for(var tr in jt)jt[tr].destroy();jt={}},kt.logout=function(){var tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tr.callback=Ne({instance:this,className:"ApiBaseFn",funcName:"logout",done:tr.callback}),tr=tr||{},this.protocol.shouldReconnect=!1,this.protocol.doLogout=!0,this.processCallback(tr),this.protocol.statusProtector.processEvent("auth/loginLifeCycleLogout"),this.sendCmd("logout",tr,tr.callback)},t.exports=ze,e(594),e(595),e(647),e(648),e(649),e(653)},function(t,r,e){var n=e(93),g=e(28),y=e(5),i=e(15),k=e(95),L=e(8),$=e(63),V=e(4),z=e(2),re=e(6),oe=e(56),le=e(22),ue=e(23),ie=e(9),ae=e(68),Fe=e(78),de=e(64);function Ne(pr,yr){var Sr=Fe!==void 0&&de(pr)||pr["@@iterator"];if(!Sr){if(g(pr)||(Sr=function(Pr,sr){var Ir;if(Pr){if(typeof Pr=="string")return Ve(Pr,sr);var Ar=ie(Ir=Object.prototype.toString.call(Pr)).call(Ir,8,-1);if(Ar==="Object"&&Pr.constructor&&(Ar=Pr.constructor.name),Ar==="Map"||Ar==="Set")return ae(Pr);if(Ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ar))return Ve(Pr,sr)}}(pr))||yr&&pr&&typeof pr.length=="number"){Sr&&(pr=Sr);var wr=0,Mr=function(){};return{s:Mr,n:function(){return wr>=pr.length?{done:!0}:{done:!1,value:pr[wr++]}},e:function(Pr){throw Pr},f:Mr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mr,_r=!0,Nr=!1;return{s:function(){Sr=Sr.call(pr)},n:function(){var Pr=Sr.next();return _r=Pr.done,Pr},e:function(Pr){Nr=!0,mr=Pr},f:function(){try{_r||Sr.return==null||Sr.return()}finally{if(Nr)throw mr}}}}function Ve(pr,yr){(yr==null||yr>pr.length)&&(yr=pr.length);for(var Sr=0,wr=new Array(yr);Sr<yr;Sr++)wr[Sr]=pr[Sr];return wr}var ze=e(0),jt=ze.undef,kt=e(12),Et=e(35),lr=e(165).StatusProtector,tr=e(109),or=tr.ReporterHook,dr=tr.EMSyncType,cr=e(654),nr=e(655),ur=e(656);function ar(pr){ze.undef(pr.secure)&&(pr.secure=!0),this.options=pr,this.keepNosSafeUrl=this.options.keepNosSafeUrl||!1;var yr=pr.defaultLink||pr.defaultLinkUrl;ze.notundef(yr)&&ze.isString(yr)&&(kt.optionDefaultLinkUrl=n(yr).call(yr)),ze.notundef(pr.ipv6DefaultLink)&&ze.isString(pr.ipv6DefaultLink)&&(kt.optionIpv6DefaultLinkUrl=pr.ipv6DefaultLink),typeof pr.heartbeatInterval=="number"&&(kt.heartbeatInterval=pr.heartbeatInterval),g(pr.nosLbsUrls)&&(kt.nosLbsUrls=pr.nosLbsUrls);var Sr=this.options.socketConcurrent;Sr=typeof Sr=="number"&&Sr>=1&&Sr<=3?Sr:1,this.options.socketConcurrent=Sr,this.options.rollbackDelMsgUnread!==void 0&&typeof this.options.rollbackDelMsgUnread=="boolean"||(this.options.rollbackDelMsgUnread=!0),this.init(),pr.skipConnectionOnInitialize||this.connect()}var gr=ar.fn=ar.prototype;gr.init=function(){var pr=this;this.logger=this.options.logger,this.getNosOriginUrlReqNum=0,this.checkNosReqNum=0,this.timerMap={},this.cmdCallbackMap={},this.cmdContentMap={},this.initConnect(),this.reset(),this.statusProtector=new lr(this),this.reporterHook=new or(this,this.options.reporterHookConfig),this.reporterHookLinkKeep=new cr(this),this.promiseAbortManager=new nr,this.imsocket=new ur(this,{socketConcurrent:this.options.socketConcurrent,binaryWebsocket:this.useBinaryWebSocket()}),this.statusProtector.on("auth/loginLifeCycleLogout",function(){pr.promiseAbortManager.clear()}),this.statusProtector.on("auth/loginLifeCycleLoginSucc",function(){pr.reporterHook.reset(),pr.reporterHook.setOriginTimetick()})},gr.useBinaryWebSocket=function(){if(!(kt.isBrowser&&typeof TextDecoder<"u"&&typeof Uint8Array<"u"))return!1;if(typeof this.options.binaryWebsocket=="boolean")return this.options.binaryWebsocket;if(kt.hasLocalStorage&&localStorage.getItem("nim-abtInfo"))try{var pr,yr=Ne(JSON.parse(localStorage.getItem("nim-abtInfo")).experiments);try{for(yr.s();!(pr=yr.n()).done;){var Sr=pr.value;if(Sr.experimentKey=Sr.schemeKey==="open_flow")return!0}}catch(wr){yr.e(wr)}finally{yr.f()}}catch{return!1}return!1},gr.reset=function(){jt(this.options.thumbnailToStatic)&&(this.options.thumbnailToStatic=!0),this.resetConnect()},gr.setOptions=function(pr){var yr=this.options,Sr=y(yr),wr=y(pr),Mr=["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onsyncsuperteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","reconnectDelayProvider","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],mr=i(wr).call(wr,function(Nr){return k(Mr).call(Mr,Nr)}),_r=L(Sr).call(Sr,"account");ze.verifyCallback(pr,mr,"protocol::IMProtocol"),this.logger.info("setOptions::",ze.omitAsString(pr,["appKey","token","loginExt","customTag"])),_r!==-1&&$(Sr).call(Sr,_r,1),pr=ze.filterObj(pr,Sr),this.options=ze.merge(yr,pr),this.reset()},gr.sendCmd=function(pr){var yr,Sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",wr=arguments.length>2?arguments[2]:void 0,Mr=this;Mr.heartbeat();var mr,_r=pr,Nr=(pr=Mr.parser.createCmd(pr,Sr)).SER;Sr=Sr||{},Mr.cmdContentMap[Nr]=Sr,Sr.single&&(delete Sr.single,(mr=y(Sr)).length===1&&(Mr.cmdContentMap[Nr]=Sr[mr[0]])),Sr.__exceptionInfo={target:V(yr="".concat(pr.SID,"-")).call(yr,pr.CID),context:Nr,startTime:Mr.reporterHook.getSafeClock()},Sr.NOTSTORE&&(mr=Sr.NOTSTORE.split(" "),z(mr).call(mr,function(Pr){delete Sr[Pr]}),delete Sr.NOTSTORE),(wr=wr||Sr.callback)&&(Mr.cmdCallbackMap[Nr]=wr),Mr.executeCmdTask({cmdName:_r,cmd:re(pr)})},gr.executeCmdTask=function(pr){var yr=pr.cmdName,Sr=pr.cmd,wr=(Sr=JSON.parse(Sr)).SER;this.isFrequencyControlled(yr)?(this.logger.warn("protocol::executeCmdTask: ".concat(yr," hit freq control")),this.markCallbackInvalid(wr,Et.newFrequencyControlError({callFunc:"protocol::executeCmdTask",message:"".concat(yr," hit freq control")}))):this.hasLogin?(yr!=="heartbeat"&&(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(pr.cmd)):this.logger.info("protocol::sendCmd: ".concat(yr))),this.doSendCmd(Sr,yr)):yr==="login"&&this.isConnected()?(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(pr.cmd)):this.logger.info("protocol::sendCmd: ".concat(yr)),this.doSendCmd(Sr,yr)):(this.logger.warn("protocol::executeCmdTask: ".concat(yr," not connected or login")),this.markCallbackInvalid(wr,Et.newSocketStateError({callFunc:"protocol::executeCmdTask",message:"".concat(yr," not connected or not login")})))},gr.isFrequencyControlled=function(pr){var yr=this.frequencyControlMap&&this.frequencyControlMap[pr];if(yr){if(oe()<yr.from+yr.duration)return!0;delete this.frequencyControlMap[pr]}},gr.doSendCmd=function(pr,yr){var Sr=this,wr=pr.SER,Mr=wr===0?kt.hbCmdTimeout:kt.cmdTimeout,mr=new Date().getTime(),_r=Sr.cmdContentMap[wr];function Nr(Pr){Sr.markCallbackInvalid(wr,Pr||Et.newSocketStateError({callFunc:"protocol::doSendCmd",message:"ser ".concat(wr," socketSendJson Error")}))}_r&&_r.__exceptionInfo&&(_r.__exceptionInfo.startTime=Sr.reporterHook.getSafeClock()),pr.isAwaitable&&(Sr.timerMap[wr]=le(function(){var Pr;pr.SID!==1&&pr.CID!==2&&Sr.detectHeartbeat(),Sr.markCallbackInvalid(wr,Et.newTimeoutError({callFunc:"protocol::doSendCmd",message:"ser ".concat(wr," Timeout Error")})),Sr.reporter.reportTraceStart("exceptions",{user_id:ze.get(Sr,"options.account")||"",trace_id:ze.get(Sr,"socket.socket.sessionid"),start_time:mr,action:2,exception_service:6}),Sr.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:V(Pr="".concat(pr.SID,"-")).call(Pr,pr.CID),context:"".concat(pr.SER),net_connect:Sr.checkNetworkAvailable()}),Sr.reporter.reportTraceEnd("exceptions",1)},Mr));try{Sr.socket&&Sr.socket.send&&Sr.socket.binaryType==="arraybuffer"?Sr.socket.send(pr,yr):Sr.socket&&Sr.socket.send?Sr.socket.send(re(pr)):Nr()}catch(Pr){Nr(Pr)}},gr.getObjWithSer=function(pr){var yr=this.cmdContentMap[pr];return yr&&!yr.isImSyncDataObj&&delete this.cmdContentMap[pr],yr&&ze.copy(yr)},gr.getCallbackWithSer=function(pr){var yr=this.cmdCallbackMap[pr];return yr&&!yr.isImSyncDataCb&&delete this.cmdCallbackMap[pr],yr},gr.getTimerWithSer=function(pr){var yr=this.timerMap[pr];return delete this.timerMap[pr],yr},gr.clearTimerWithSer=function(pr){var yr=this.getTimerWithSer(pr);yr&&clearTimeout(yr)},gr.markCallbackInvalid=function(pr,yr){this.getObjWithSer(pr),this.clearTimerWithSer(pr);var Sr=this.getCallbackWithSer(pr);if(Sr){var wr=Sr.options;le(function(){Sr(yr||Et.newUnknownError({ser:pr}),wr)},0)}},gr.markAllCallbackInvalid=function(pr){var yr=this;try{var Sr,wr;z(Sr=y(this.cmdContentMap)).call(Sr,function(Mr){var mr=yr.getObjWithSer(Mr);if((!mr||!mr.isImSyncDataObj)&&mr&&mr.__exceptionInfo){var _r=mr.__exceptionInfo.target,Nr=mr.__exceptionInfo.context,Pr=ze.get(pr,"event.uploadCode")||pr&&pr.code;Pr=typeof Pr!="number"?415:Pr;var sr=ze.get(pr,"event.disconnectReason"),Ir=sr?re({disconnect_reason:sr}):pr&&pr.message||"send cmd failed";yr.reporter.reportTraceStart("exceptions",{user_id:ze.get(yr,"options.account")||"",trace_id:ze.get(yr,"socket.socket.sessionid"),start_time:yr.reporterHook.getNTPTime(mr.__exceptionInfo.startTime),action:2,exception_service:6}),yr.reporter.reportTraceUpdateV2("exceptions",{code:Pr,description:Ir,operation_type:1,target:_r,context:Nr,net_connect:yr.checkNetworkAvailable()}),yr.reporter.reportTraceEnd("exceptions",1),delete mr.__exceptionInfo}}),z(wr=y(this.cmdCallbackMap)).call(wr,function(Mr){yr.markCallbackInvalid(Mr,pr)})}catch(Mr){yr.logger&&yr.logger.error("protocol::markAllCallbackInvalid error: ",Mr)}},gr.getPacketObj=function(pr){var yr=null;if(pr&&pr.raw){var Sr=pr.raw.ser;ze.notundef(Sr)&&(yr=this.getObjWithSer(Sr))}return yr},gr.callPacketAckCallback=function(pr){var yr=this;if(pr&&pr.raw){var Sr=pr.raw.ser;if(ze.notundef(Sr)){yr.clearTimerWithSer(Sr);var wr=yr.getCallbackWithSer(Sr);if(wr){var Mr;wr.originUrl&&pr.obj&&pr.obj.file&&(pr.obj.file._url_safe=pr.obj.file.url,pr.obj.file.url=wr.originUrl,pr.obj.type==="audio"&&(pr.obj.file.mp3Url=wr.originUrl+(~L(Mr=wr.originUrl).call(Mr,"?")?"&":"?")+"audioTrans&type=mp3")),pr.promise?pr.promise.then(function(){wr(pr.error,pr.obj)},function(mr){var _r,Nr;mr.callFunc="protocol::callPacketAckCallback",mr.message=V(_r=V(Nr="Resp Promoise Error: cmd: ".concat(pr.cmd,", ser: ")).call(Nr,Sr,", reason: ")).call(_r,mr.message);var Pr=Et.customError("CALLBACK_ACK_ERR",mr);yr.logger.error(`protocol::callPacketAckCallback error stack: 
`.concat(mr.stack||mr.event&&mr.event.stack)),wr(Pr,pr.obj,pr.content)}):wr(pr.error,pr.obj,pr.content)}}}},gr.onMessage=function(pr){var yr=this;yr.heartbeat(),yr.parser.parseResponse(pr).then(function(Sr){var wr;if(Sr.notFound&&yr.logger.warn("protocol::onMessage: packet not found ".concat(re(Sr))),Sr.error){var Mr,mr;Sr.error.message=V(Mr="".concat(Sr.cmd," error: ")).call(Mr,Sr.error.message),yr.logger.error(V(mr="protocol::onMessage: packet error ".concat(re(Sr.error),"，raw cmd ")).call(mr,Sr.rawStr));var _r=Sr.raw||{};_r.code!==408&&_r.code!==415&&_r.code!==500||yr.reporter.report("nimErrEvent",{code:_r.code,module:Sr.cmd,accid:yr.account})}Sr.__receiveTime=yr.reporterHook.getSafeClock();var Nr=dr[V(wr="kSyncType".concat(Sr.raw.sid,"_")).call(wr,Sr.raw.cid)];if(Nr){var Pr=ze.get(Sr,"raw.r"),sr=1;if(Pr&&Pr.length>0){var Ir=i(Pr).call(Pr,function(Lr){return g(Lr)}),Ar=ze.get(Ir,"0.length");sr=typeof Ar=="number"?Ar:1}yr.reporterHook.emit("reporter/syncItem",Nr,sr)}Sr.frequencyControlDuration&&(yr.logger.error("protocol::onMessage: server freq control ".concat(re(Sr.cmd))),yr.frequencyControlMap=yr.frequencyControlMap||{},yr.frequencyControlMap[Sr.cmd]={from:+new Date,duration:Sr.frequencyControlDuration}),Sr.obj=yr.getPacketObj(Sr),Sr.obj&&Sr.obj.__exceptionInfo&&delete Sr.obj.__exceptionInfo,Sr.cmd!=="heartbeat"&&(yr.logger.debugEnable?yr.logger.debug("protocol::recvCmd: ".concat(Sr.rawStr)):yr.logger.log("protocol::recvCmd: ".concat(Sr.cmd)));var Cr="process"+ze.capFirstLetter(Sr.service);if(yr[Cr])if(Sr.cmd==="syncDone"){if(yr.cmdCallbackMap[Sr.raw.ser]&&yr.cmdCallbackMap[Sr.raw.ser].isImSyncDataCb){var br;yr.cmdCallbackMap[Sr.raw.ser].isImSyncDataCb=!1;var vr=ue(br=function(Lr,Fr){this.checkNosReqNum++,this.getNosOriginUrlReqNum<=0||this.checkNosReqNum>=20?this[Lr](Fr):le(vr,300)}).call(br,yr,Cr,Sr);le(function(){vr.call(yr,Cr,Sr)},10)}}else{Sr.cmd!=="syncTeamMembersDone"&&Sr.cmd!=="syncSuperTeamMembersDone"||yr.cmdCallbackMap[Sr.raw.ser]&&yr.cmdCallbackMap[Sr.raw.ser].isImSyncDataCb&&(yr.cmdCallbackMap[Sr.raw.ser].isImSyncDataCb=!1);try{yr[Cr](Sr)}catch(Lr){var Tr,Br;yr.logger.warn(V(Tr=V(Br="protocol::onMessage: ".concat(Cr,".")).call(Br,Sr.cmd," excute failed ")).call(Tr,Sr.obj?"":", maybe the packet timed out",": "),Lr.message)}}else yr.logger.warn("protocol::onMessage: ".concat(Cr," not found"));yr.callPacketAckCallback(Sr)})},gr.onMiscError=function(pr,yr,Sr){yr&&this.notifyError(pr,yr,Sr)},gr.onCustomError=function(pr,yr){var Sr=Et.customError(pr,yr),wr=yr.message||"未知错误";this.onMiscError(wr,Sr)},gr.notifyError=function(pr,yr,Sr){var wr;this.isConnected()&&(this.logger.error(V(wr="".concat(pr||""," ")).call(wr,this.name),yr,Sr),this.options.onerror(yr,Sr))},gr.emitAPI=function(pr){var yr=pr.type,Sr=pr.obj;this.api.emit(yr,Sr)},t.exports=ar,e(700),e(716),e(717),e(718),e(719),e(720)},function(t,r,e){var n=e(111),g=Function.prototype,y=g.apply,i=g.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(n?i.bind(y):function(){return i.apply(y,arguments)})},function(t,r){t.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(t,r){var e=String;t.exports=function(n){try{return e(n)}catch{return"Object"}}},function(t,r,e){var n=e(7);t.exports=function(g,y){var i=[][g];return!!i&&n(function(){i.call(null,y||function(){return 1},1)})}},function(t,r,e){var n=e(71);t.exports=Array.isArray||function(g){return n(g)=="Array"}},function(t,r,e){var n,g=e(38),y=e(173),i=e(174),k=e(117),L=e(222),$=e(169),V=e(134),z=V("IE_PROTO"),re=function(){},oe=function(ie){return"<script>"+ie+"<\/script>"},le=function(ie){ie.write(oe("")),ie.close();var ae=ie.parentWindow.Object;return ie=null,ae},ue=function(){try{n=new ActiveXObject("htmlfile")}catch{}var ie,ae;ue=typeof document<"u"?document.domain&&n?le(n):((ae=$("iframe")).style.display="none",L.appendChild(ae),ae.src="javascript:",(ie=ae.contentWindow.document).open(),ie.write(oe("document.F=Object")),ie.close(),ie.F):le(n);for(var Fe=i.length;Fe--;)delete ue.prototype[i[Fe]];return ue()};k[z]=!0,t.exports=Object.create||function(ie,ae){var Fe;return ie!==null?(re.prototype=g(ie),Fe=new re,re.prototype=null,Fe[z]=ie):Fe=ue(),ae===void 0?Fe:y.f(Fe,ae)}},function(t,r,e){var n=e(172),g=e(40).f,y=e(65),i=e(31),k=e(341),L=e(21)("toStringTag");t.exports=function($,V,z,re){if($){var oe=z?$:$.prototype;i(oe,L)||g(oe,L,{configurable:!0,value:V}),re&&!n&&y(oe,"toString",k)}}},function(t,r,e){var n=e(47),g=e(163),y=e(105),i=e(103),k=e(40).f,L=e(176),$=e(177),V=e(57),z=e(29),re=i.set,oe=i.getterFor("Array Iterator");t.exports=L(Array,"Array",function(ue,ie){re(this,{type:"Array Iterator",target:n(ue),index:0,kind:ie})},function(){var ue=oe(this),ie=ue.target,ae=ue.kind,Fe=ue.index++;return!ie||Fe>=ie.length?(ue.target=void 0,$(void 0,!0)):$(ae=="keys"?Fe:ae=="values"?ie[Fe]:[Fe,ie[Fe]],!1)},"values");var le=y.Arguments=y.Array;if(g("keys"),g("values"),g("entries"),!V&&z&&le.name!=="values")try{k(le,"name",{value:"values"})}catch{}},function(t,r,e){var n=e(509),g=e(514);t.exports=function(y,i){var k=g(y,i);return n(k)?k:void 0}},function(t,r,e){var n=e(23),g=e(66),y=e(580),i=e(582),k=e(588),L={},$=g.f;function V(ie){var ae=ie.upload=(ie.headers||g.o)["Content-Type"]==="multipart/form-data",Fe=!1;try{Fe=(location.protocol+"//"+location.host).toLowerCase()!==g.url2origin(ie.url)}catch{}return ie.cors=Fe,ae||Fe||ie.mode?function(de){var Ne=de.mode,Ve=y,ze=g.getGlobal();return!ze.FormData&&ze.document&&(Ne="iframe"),Ne==="iframe"&&(Ve=de.upload?i:k),new Ve(de)}(ie):new y(ie)}function z(ie,ae,Fe){var de=L[ie];if(de){ae==="onload"&&de.result&&(Fe=function(Ve,ze){ze={data:ze};var jt=Ve.result.headers;return jt&&(ze.headers=Ve.req.header(jt)),ze}(de,Fe)),function(Ve){var ze=L[Ve];ze&&(ze.req.destroy(),delete L[Ve])}(ie);var Ne={type:ae,result:Fe};$(Ne),Ne.stopped||de[ae](Ne.result)}}function re(ie,ae){z(ie,"onload",ae)}function oe(ie,ae){z(ie,"onerror",ae)}function le(ie,ae){var Fe=g.genUrlSep(ie);return ae=ae||"",g.isObject(ae)&&(ae=g.object2query(ae)),ae&&(ie+=Fe+ae),ie}function ue(ie,ae){ae=ae||{};var Fe=g.uniqueID(),de={result:ae.result,onload:ae.onload||g.f,onerror:ae.onerror||g.f};L[Fe]=de,ae.onload=n(re).call(re,null,Fe),ae.onerror=n(oe).call(oe,null,Fe),ae.query&&(ie=le(ie,ae.query));var Ne=ae.method||"";return Ne&&!/get/i.test(Ne)||!ae.data||(ie=le(ie,ae.data),ae.data=null),ae.url=ie,de.req=V(ae),Fe}ue.filter=function(ie){g.isFunction(ie)&&($=ie)},ue.abort=function(ie){var ae=L[ie];ae&&ae.req&&ae.req.abort()},t.exports=ue},function(t,r,e){t.exports=e(583)},function(t,r){t.exports=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}},function(t,r,e){t.exports=e(615)},function(t,r,e){(function(n){var g;t.exports=(g=g||function(y,i){var k;if(typeof window<"u"&&window.crypto&&(k=window.crypto),typeof self<"u"&&self.crypto&&(k=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(k=globalThis.crypto),!k&&typeof window<"u"&&window.msCrypto&&(k=window.msCrypto),!k&&n!==void 0&&n.crypto&&(k=n.crypto),!k)try{k=e(914)}catch{}var L=function(){if(k){if(typeof k.getRandomValues=="function")try{return k.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof k.randomBytes=="function")try{return k.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},$=Object.create||function(){function Ne(){}return function(Ve){var ze;return Ne.prototype=Ve,ze=new Ne,Ne.prototype=null,ze}}(),V={},z=V.lib={},re=z.Base={extend:function(Ne){var Ve=$(this);return Ne&&Ve.mixIn(Ne),Ve.hasOwnProperty("init")&&this.init!==Ve.init||(Ve.init=function(){Ve.$super.init.apply(this,arguments)}),Ve.init.prototype=Ve,Ve.$super=this,Ve},create:function(){var Ne=this.extend();return Ne.init.apply(Ne,arguments),Ne},init:function(){},mixIn:function(Ne){for(var Ve in Ne)Ne.hasOwnProperty(Ve)&&(this[Ve]=Ne[Ve]);Ne.hasOwnProperty("toString")&&(this.toString=Ne.toString)},clone:function(){return this.init.prototype.extend(this)}},oe=z.WordArray=re.extend({init:function(Ne,Ve){Ne=this.words=Ne||[],this.sigBytes=Ve??4*Ne.length},toString:function(Ne){return(Ne||ue).stringify(this)},concat:function(Ne){var Ve=this.words,ze=Ne.words,jt=this.sigBytes,kt=Ne.sigBytes;if(this.clamp(),jt%4)for(var Et=0;Et<kt;Et++){var lr=ze[Et>>>2]>>>24-Et%4*8&255;Ve[jt+Et>>>2]|=lr<<24-(jt+Et)%4*8}else for(var tr=0;tr<kt;tr+=4)Ve[jt+tr>>>2]=ze[tr>>>2];return this.sigBytes+=kt,this},clamp:function(){var Ne=this.words,Ve=this.sigBytes;Ne[Ve>>>2]&=4294967295<<32-Ve%4*8,Ne.length=y.ceil(Ve/4)},clone:function(){var Ne=re.clone.call(this);return Ne.words=this.words.slice(0),Ne},random:function(Ne){for(var Ve=[],ze=0;ze<Ne;ze+=4)Ve.push(L());return new oe.init(Ve,Ne)}}),le=V.enc={},ue=le.Hex={stringify:function(Ne){for(var Ve=Ne.words,ze=Ne.sigBytes,jt=[],kt=0;kt<ze;kt++){var Et=Ve[kt>>>2]>>>24-kt%4*8&255;jt.push((Et>>>4).toString(16)),jt.push((15&Et).toString(16))}return jt.join("")},parse:function(Ne){for(var Ve=Ne.length,ze=[],jt=0;jt<Ve;jt+=2)ze[jt>>>3]|=parseInt(Ne.substr(jt,2),16)<<24-jt%8*4;return new oe.init(ze,Ve/2)}},ie=le.Latin1={stringify:function(Ne){for(var Ve=Ne.words,ze=Ne.sigBytes,jt=[],kt=0;kt<ze;kt++){var Et=Ve[kt>>>2]>>>24-kt%4*8&255;jt.push(String.fromCharCode(Et))}return jt.join("")},parse:function(Ne){for(var Ve=Ne.length,ze=[],jt=0;jt<Ve;jt++)ze[jt>>>2]|=(255&Ne.charCodeAt(jt))<<24-jt%4*8;return new oe.init(ze,Ve)}},ae=le.Utf8={stringify:function(Ne){try{return decodeURIComponent(escape(ie.stringify(Ne)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ne){return ie.parse(unescape(encodeURIComponent(Ne)))}},Fe=z.BufferedBlockAlgorithm=re.extend({reset:function(){this._data=new oe.init,this._nDataBytes=0},_append:function(Ne){typeof Ne=="string"&&(Ne=ae.parse(Ne)),this._data.concat(Ne),this._nDataBytes+=Ne.sigBytes},_process:function(Ne){var Ve,ze=this._data,jt=ze.words,kt=ze.sigBytes,Et=this.blockSize,lr=kt/(4*Et),tr=(lr=Ne?y.ceil(lr):y.max((0|lr)-this._minBufferSize,0))*Et,or=y.min(4*tr,kt);if(tr){for(var dr=0;dr<tr;dr+=Et)this._doProcessBlock(jt,dr);Ve=jt.splice(0,tr),ze.sigBytes-=or}return new oe.init(Ve,or)},clone:function(){var Ne=re.clone.call(this);return Ne._data=this._data.clone(),Ne},_minBufferSize:0}),de=(z.Hasher=Fe.extend({cfg:re.extend(),init:function(Ne){this.cfg=this.cfg.extend(Ne),this.reset()},reset:function(){Fe.reset.call(this),this._doReset()},update:function(Ne){return this._append(Ne),this._process(),this},finalize:function(Ne){return Ne&&this._append(Ne),this._doFinalize()},blockSize:16,_createHelper:function(Ne){return function(Ve,ze){return new Ne.init(ze).finalize(Ve)}},_createHmacHelper:function(Ne){return function(Ve,ze){return new de.HMAC.init(Ne,ze).finalize(Ve)}}}),V.algo={});return V}(Math),g)}).call(this,e(77))},function(t,r,e){var n=e(29),g=e(20),y=e(157),i=e(84),k=e(47),L=e(130),$=e(31),V=e(214),z=Object.getOwnPropertyDescriptor;r.f=n?z:function(re,oe){if(re=k(re),oe=L(oe),V)try{return z(re,oe)}catch{}if($(re,oe))return i(!g(y.f,re,oe),re[oe])}},function(t,r){t.exports=function(e){return e==null}},function(t,r,e){var n=e(100),g=e(7);t.exports=!!Object.getOwnPropertySymbols&&!g(function(){var y=Symbol();return!String(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(t,r,e){var n,g,y=e(16),i=e(72),k=y.process,L=y.Deno,$=k&&k.versions||L&&L.version,V=$&&$.v8;V&&(g=(n=V.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!g&&i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(g=+n[1]),t.exports=g},function(t,r,e){var n=e(130),g=e(40),y=e(84);t.exports=function(i,k,L){var $=n(k);$ in i?g.f(i,$,y(0,L)):i[$]=L}},function(t,r){},function(t,r,e){var n,g,y,i=e(342),k=e(16),L=e(30),$=e(65),V=e(31),z=e(168),re=e(134),oe=e(117),le=k.TypeError,ue=k.WeakMap;if(i||z.state){var ie=z.state||(z.state=new ue);ie.get=ie.get,ie.has=ie.has,ie.set=ie.set,n=function(Fe,de){if(ie.has(Fe))throw le("Object already initialized");return de.facade=Fe,ie.set(Fe,de),de},g=function(Fe){return ie.get(Fe)||{}},y=function(Fe){return ie.has(Fe)}}else{var ae=re("state");oe[ae]=!0,n=function(Fe,de){if(V(Fe,ae))throw le("Object already initialized");return de.facade=Fe,$(Fe,ae,de),de},g=function(Fe){return V(Fe,ae)?Fe[ae]:{}},y=function(Fe){return V(Fe,ae)}}t.exports={set:n,get:g,has:y,enforce:function(Fe){return y(Fe)?g(Fe):n(Fe,{})},getterFor:function(Fe){return function(de){var Ne;if(!L(de)||(Ne=g(de)).type!==Fe)throw le("Incompatible receiver, "+Fe+" required");return Ne}}}},function(t,r,e){var n=e(13);t.exports=n([].slice)},function(t,r){t.exports={}},function(t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}}},function(t,r,e){var n=e(16);t.exports=n.Promise},function(t,r){t.exports=function(e){return e!=null&&typeof e=="object"}},function(t,r,e){var n=e(152),g=e(56),y=e(3),i=e(22),k=e(23),L=e(4),$=e(43),V=e(15),z=e(2),re=e(5),oe=e(11),le=e(125),ue=e(34),ie=e(44),ae=e(45),Fe=e(153),de=e(154),Ne=e(122);function Ve(cr){var nr=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ur,ar=Ne(cr);if(nr){var gr=Ne(this).constructor;ur=n(ar,arguments,gr)}else ur=ar.apply(this,arguments);return de(this,ur)}}var ze=e(141),jt=e(0),kt=e(12).heartbeatInterval,Et=e(165).V2NIMLoginStatus,lr=e(12),tr={kSyncAction5_1:0,kSyncAction5_2:1,kSyncAction5_3:2},or={kKnown:-1,kSucceed:0,kFailed:1,kAborted:2,kCanceled:3},dr=function(cr){Fe(ur,cr);var nr=Ve(ur);function ur(ar){var gr,pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ie(this,ur),(gr=nr.call(this)).clientProto=ar,gr.logger=ar.logger,gr.reporter=ar.reporter,gr.timer=null,gr.setClientOrigin(),gr.serverOrigin={timeStamp:null,rtt:null,baseTimeStamp:null},gr.tolerantRTT=pr.tolerantRTT||3e3,gr.bestRTT=pr.bestRTT||100,gr.maxChances=pr.maxChances||10,gr.isSettingNTP=!1,gr.currentChance=0,gr.syncTraceData={},gr.syncTraceMap={},gr.syncTraceLastItem={},gr.uploadTraceData={},gr.setMonitorForSync(),gr.setMonitorForResources(),gr}return ae(ur,[{key:"hasOriginTimetick",value:function(){return!!this.serverOrigin.timeStamp}},{key:"setOriginTimetick",value:function(){var ar=this,gr=this.clientProto.options;if((typeof jt.get(gr,"privateConf.isDataReportEnable")=="boolean"?gr.privateConf.isDataReportEnable:lr.privateConf.isDataReportEnable)&&lr.isBrowser&&performance&&performance.now&&!(this.isSettingNTP||this.currentChance>=this.maxChances)){this.isSettingNTP=!0,this.currentChance++,clearTimeout(this.timer),this.timer=null;var pr="ReporterHook::setOriginTimetick:",yr=g();return this.logger.info("".concat(pr," getServerTime start, times ").concat(this.currentChance)),new y(function(Sr){ar.clientProto.sendCmd("getServerTime",{},function(wr,Mr){if(ar.isSettingNTP=!1,wr){var mr;ar.logger.warn("".concat(pr," Calculate Delay time, getServerTime error"),wr),ar.clientProto.statusProtector.getLoginStatus()===Et.V2NIM_LOGIN_STATUS_LOGINED&&(ar.timer=i(k(mr=ar.setOriginTimetick).call(mr,ar),kt)),Sr()}else{if(!Mr)return ar.logger.warn("".concat(pr," Calculate Delay time, getServerTime not correct")),void Sr();var _r,Nr=g()-yr;if(Nr>ar.tolerantRTT)ar.logger.warn("".concat(pr," Denied, cause of exceeding the maximum tolerance range of RTT: ").concat(Nr)),ar.timer=i(k(_r=ar.setOriginTimetick).call(_r,ar),kt);else if(Nr>ar.bestRTT){var Pr,sr,Ir;ar.serverOrigin.rtt&&Nr>=ar.serverOrigin.rtt?ar.logger.info("".concat(pr," Denied, cause of current.RTT >= serverOrigin.RTT: ").concat(Nr)):(ar.setServerOrigin(Nr,Mr),ar.logger.info(L(sr=L(Ir="".concat(pr," Accept within maximum tolerance range of RTT: ").concat(Nr,", ntpTimestamp: ")).call(Ir,ar.serverOrigin.timeStamp,", localClock: ")).call(sr,ar.serverOrigin.baseTimeStamp))),ar.timer=i(k(Pr=ar.setOriginTimetick).call(Pr,ar),kt)}else{var Ar,Cr;ar.setServerOrigin(Nr,Mr),ar.logger.info(L(Ar=L(Cr="".concat(pr," Accept within best RTT: ").concat(Nr,", ntpTimestamp: ")).call(Cr,ar.serverOrigin.timeStamp,", localClock: ")).call(Ar,ar.serverOrigin.baseTimeStamp))}Sr()}})})}}},{key:"getNTPTime",value:function(ar){if(typeof ar!="number"&&(ar=this.getSafeClock()),this.serverOrigin.timeStamp){var gr=$(ar-this.serverOrigin.baseTimeStamp);return this.serverOrigin.timeStamp+gr}var pr=$(ar-this.clientOrigin.baseTimeStamp);return this.clientOrigin.timeStamp+pr}},{key:"getSafeClock",value:function(){return lr.isBrowser&&performance&&performance.now?performance.now():g()}},{key:"setMonitorForSync",value:function(){var ar=this,gr="ReporterHook::setMonitorForSync:";this.on("reporter/syncStart",function(){ar.logger.info("".concat(gr," sync start")),ar.syncTraceData={user_id:ar.clientProto.account,trace_id:jt.get(ar.clientProto,"socket.socket.sessionid"),action:tr.kSyncAction5_1,sync_begin_time:ar.getSafeClock(),sync_end_time:0,sync_duration:0,overall_duration:0,extension:[]}}),this.on("reporter/syncRecv",function(){ar.syncTraceData.user_id&&(ar.logger.info("".concat(gr," sync receive packet")),ar.syncTraceData.sync_end_time=ar.getSafeClock(),ar.syncTraceData.sync_duration=$(ar.syncTraceData.sync_end_time-ar.syncTraceData.sync_begin_time))}),this.on("reporter/syncItem",function(pr,yr){var Sr;if(typeof pr=="number"&&ar.syncTraceData.user_id){ar.logger.info(L(Sr="".concat(gr," receive sync item: ").concat(pr,", total: ")).call(Sr,yr));var wr=ar.getSafeClock();ar.syncTraceMap[pr]=ar.syncTraceMap[pr]?ar.syncTraceMap[pr]:{sync_type:pr,times:0,total:0,sync_duration:0,proc_duration:0,description:"",items:[]};var Mr={total:yr,pre_item_recv_time:ar.syncTraceLastItem.cur_item_recv_time?ar.syncTraceLastItem.cur_item_recv_time:ar.syncTraceData.sync_begin_time,cur_item_recv_time:wr};ar.syncTraceMap[pr].items.push(Mr),ar.syncTraceLastItem=Mr}}),this.on("reporter/syncItemComplete",function(pr){var yr;if(typeof pr=="number"&&ar.syncTraceData.user_id){var Sr=ar.syncTraceMap[pr];if(Sr){ar.logger.info("".concat(gr," sync item ").concat(pr," callback done"));var wr=V(yr=Sr.items).call(yr,function(Mr){return!Mr.callback_time});wr.length!==0&&(wr[0].callback_time=ar.getSafeClock())}}}),this.on("reporter/syncComplete",function(){var pr;ar.syncTraceData.user_id&&(ar.logger.info("".concat(gr," sync complete")),z(pr=re(ar.syncTraceMap)).call(pr,function(yr){var Sr,wr=oe(Sr=ar.syncTraceMap[yr].items).call(Sr,function(mr){return{total:mr.total,pre_item_recv_time:ar.getNTPTime(mr.pre_item_recv_time),cur_item_recv_time:ar.getNTPTime(mr.cur_item_recv_time),callback_time:ar.getNTPTime(mr.callback_time)}}),Mr=le(wr).call(wr,function(mr,_r){return mr.times+=1,mr.total+=_r.total,mr.sync_duration+=_r.cur_item_recv_time-_r.pre_item_recv_time,mr.proc_duration+=_r.callback_time-_r.cur_item_recv_time,mr},{times:0,total:0,sync_duration:0,proc_duration:0});ar.syncTraceMap[yr].items=wr,ue(ar.syncTraceMap[yr],Mr),ar.syncTraceData.extension.push(ar.syncTraceMap[yr])}),ar.syncTraceData.sync_begin_time=ar.getNTPTime(ar.syncTraceData.sync_begin_time),ar.syncTraceData.sync_end_time=ar.getNTPTime(ar.syncTraceData.sync_end_time),ar.syncTraceData.overall_duration=ar.getNTPTime()-ar.syncTraceData.sync_begin_time,ar.reporter.report("nim_sdk_sync",ar.syncTraceData),ar.syncTraceData={},ar.syncTraceMap={})})}},{key:"setMonitorForResources",value:function(){var ar=this,gr="ReporterHook::setMonitorForResources:";this.on("reporter/uploadStart",function(){ar.logger.info("".concat(gr," upload start")),ar.uploadTraceData={user_id:ar.clientProto.account,trace_id:jt.get(ar.clientProto,"socket.socket.sessionid"),action:0,duration:0,start_time:ar.getSafeClock(),offset:0,full_size:0,transferred_size:0}}),this.on("reporter/uploadUpdate",function(){var pr,yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ar.uploadTraceData.user_id&&(ar.logger.info("".concat(gr," upload update"),yr),z(pr=re(yr)).call(pr,function(Sr){ar.uploadTraceData[Sr]=yr[Sr]}))}),this.on("reporter/uploadEnd",function(){var pr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:or.kKnown;ar.uploadTraceData.user_id&&(ar.logger.info("".concat(gr," upload end cause of ").concat(pr)),ar.uploadTraceData.state=pr,ar.uploadTraceData.start_time=ar.getNTPTime(ar.uploadTraceData.start_time),ar.uploadTraceData.duration=ar.getNTPTime(ar.getSafeClock())-ar.uploadTraceData.start_time,ar.reporter.report("nim_sdk_resources",ar.uploadTraceData),ar.uploadTraceData={})})}},{key:"destroy",value:function(){this.reset(),this.removeAllListeners(),this.logger.info("ReporterHook::destroy: complete")}},{key:"reset",value:function(){this.logger.info("ReporterHook::reset"),this.serverOrigin={},this.setClientOrigin(),this.currentChance=0,this.timer&&clearTimeout(this.timer),this.syncTraceData={},this.syncTraceMap={},this.syncTraceLastItem={},this.uploadTraceData={}}},{key:"setClientOrigin",value:function(){this.clientOrigin={timeStamp:g(),baseTimeStamp:this.getSafeClock()}}},{key:"setServerOrigin",value:function(ar,gr){this.serverOrigin={timeStamp:gr+$(ar/2),rtt:ar,baseTimeStamp:this.getSafeClock()}}}]),ur}(ze);t.exports={EMSyncAction:tr,EMSyncType:{kSyncType3_8:30008,kSyncType3_109:30109,kSyncType4_4:40004,kSyncType4_6:40006,kSyncType4_9:40009,kSyncType4_12:40012,kSyncType4_13:40013,kSyncType4_14:40014,kSyncType4_16:40016,kSyncType4_17:40017,kSyncType4_18:40018,kSyncType4_19:40019,kSyncType4_20:40020,kSyncType4_21:40021,kSyncType4_23:40023,kSyncType4_24:40024,kSyncType4_100:40100,kSyncType4_101:40101,kSyncType7_15:70015,kSyncType8_109:80109,kSyncType8_126:80126,kSyncType12_5:12005,kSyncType12_6:12006,kSyncType15_13:15013,kSyncType21_109:21109,kSyncType21_111:21111},ReporterHook:dr,EMExceptionState:or,EMResourceUploadWay:{kResourceUploadWayNOS:0,kResourceUploadWayAWSPlugin:1,kResourceUploadWayNOSPlugin:2}}},function(t,r,e){var n=e(8),g=e(9),y=e(2),i=e(4),k=e(95),L=e(15),$=e(68),V=e(78),z=e(64),re=e(28);function oe(ae,Fe){var de=V!==void 0&&z(ae)||ae["@@iterator"];if(!de){if(re(ae)||(de=function(Et,lr){var tr;if(Et){if(typeof Et=="string")return le(Et,lr);var or=g(tr=Object.prototype.toString.call(Et)).call(tr,8,-1);if(or==="Object"&&Et.constructor&&(or=Et.constructor.name),or==="Map"||or==="Set")return $(Et);if(or==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or))return le(Et,lr)}}(ae))||Fe&&ae&&typeof ae.length=="number"){de&&(ae=de);var Ne=0,Ve=function(){};return{s:Ve,n:function(){return Ne>=ae.length?{done:!0}:{done:!1,value:ae[Ne++]}},e:function(Et){throw Et},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ze,jt=!0,kt=!1;return{s:function(){de=de.call(ae)},n:function(){var Et=de.next();return jt=Et.done,Et},e:function(Et){kt=!0,ze=Et},f:function(){try{jt||de.return==null||de.return()}finally{if(kt)throw ze}}}}function le(ae,Fe){(Fe==null||Fe>ae.length)&&(Fe=ae.length);for(var de=0,Ne=new Array(Fe);de<Fe;de++)Ne[de]=ae[de];return Ne}var ue=e(12),ie={genUrlSep:function(ae){return n(ae=""+ae).call(ae,"?")===-1?"?imageView&":"&"},urlQuery2Object:function(ae){if(Object.prototype.toString.call(ae)!=="[object String]"||ae==="")return{};var Fe=n(ae).call(ae,"?");if(Fe!==-1){var de=g(ae).call(ae,Fe+1).split("&"),Ne={};return y(de).call(de,function(Ve){if(~n(Ve).call(Ve,"=")){var ze=Ve.split("=");Ne[ze[0]]=decodeURIComponent(ze[1])}else Ne[Ve]=""}),Ne}},url2object:function(ae){Object.prototype.toString.call(ae)!=="[object String]"&&(ae="");var Fe=n(ae=ae||"").call(ae,"https")>=0?"https://":"http://",de=ae.replace(Fe,"");n(de).call(de,"?")>=0&&(de=de.substring(0,n(de).call(de,"?")));var Ne=de.split("/");de=Ne[0];var Ve="";if(Ne.length>0&&(Ve=g(Ne).call(Ne,1).join("/")),n(ae).call(ae,"?")===-1)return{protocol:Fe,hostname:de,path:Ve,query:{}};var ze=ae.substr(n(ae).call(ae,"?")+1).split("&"),jt={};return y(ze).call(ze,function(kt){if(n(kt).call(kt,"=")>0){var Et=kt.split("=");jt[Et[0]]=decodeURIComponent(Et[1])}else jt[kt]=""}),{protocol:Fe,hostname:de,path:Ve,query:jt}},object2url:function(ae){var Fe,de=ae.protocol,Ne=ae.hostname,Ve=ae.path,ze=ae.query;de=de||"http://",Ne=Ne||"",Ve&&(Ne=i(Fe="".concat(Ne,"/")).call(Fe,Ve)),ze=ze||{};var jt,kt,Et,lr=[];for(var tr in ze){var or;tr!=="imageView"&&lr.push(i(or="".concat(tr,"=")).call(or,encodeURIComponent(ze[tr])))}return lr.length>0?i(jt=i(kt="".concat(de)).call(kt,Ne,"?imageView&")).call(jt,lr.join("&")):i(Et="".concat(de)).call(Et,Ne)},genPrivateUrl:function(ae,Fe,de){if(Fe&&Fe.length){var Ne,Ve=oe(Fe);try{for(Ve.s();!(Ne=Ve.n()).done;){var ze=Ne.value;if(n(ae).call(ae,ze)>=0)return ze!==de&&(ae=ae.replace(ze,de)),ae;if(n(ae).call(ae,ze)>=0&&ze===de)return ae}}catch(mr){Ve.e(mr)}finally{Ve.f()}}var jt,kt,Et=ie.url2object(ae),lr=Et.hostname,tr=Et.path,or=ue.downloadUrl,dr=ue.downloadHostList,cr=ue.nosCdnEnable,nr=ue.serverNosConfig.cdnDomain,ur=decodeURIComponent(ue.serverNosConfig.objectPrefix),ar=decodeURIComponent(tr),gr=n(ar).call(ar,ur);if(nr&&gr>-1&&cr)return i(jt=i(kt="".concat(Et.protocol)).call(kt,nr,"/")).call(jt,g(ar).call(ar,gr));if(k(dr).call(dr,lr)&&k(tr).call(tr,"/")){var pr=n(tr).call(tr,"/"),yr=tr.substring(0,pr),Sr=tr.substring(pr+1);return or.replace("{bucket}",yr).replace("{object}",Sr)}var wr=L(dr).call(dr,function(mr){return typeof lr=="string"&&k(lr).call(lr,mr)})[0],Mr=wr?lr.replace(wr,"").replace(/\W/g,""):null;return Mr?or.replace("{bucket}",Mr).replace("{object}",tr):ae}};t.exports=ie},function(t,r,e){var n=e(7);t.exports=!n(function(){var g=(function(){}).bind();return typeof g!="function"||g.hasOwnProperty("prototype")})},function(t,r,e){var n=e(98),g=TypeError;t.exports=function(y){if(n(y))throw g("Can't call method on "+y);return y}},function(t,r,e){var n=e(57),g=e(168);(t.exports=function(y,i){return g[y]||(g[y]=i!==void 0?i:{})})("versions",[]).push({version:"3.27.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,r,e){var n=e(115),g=Math.max,y=Math.min;t.exports=function(i,k){var L=n(i);return L<0?g(L+k,0):y(L,k)}},function(t,r,e){var n=e(328);t.exports=function(g){var y=+g;return y!=y||y===0?0:n(y)}},function(t,r,e){var n=e(7),g=e(21),y=e(100),i=g("species");t.exports=function(k){return y>=51||!n(function(){var L=[];return(L.constructor={})[i]=function(){return{foo:1}},L[k](Boolean).foo!==1})}},function(t,r){t.exports={}},function(t,r,e){var n=e(234).charAt,g=e(58),y=e(103),i=e(176),k=e(177),L=y.set,$=y.getterFor("String Iterator");i(String,"String",function(V){L(this,{type:"String Iterator",string:g(V),index:0})},function(){var V,z=$(this),re=z.string,oe=z.index;return oe>=re.length?k(void 0,!0):(V=n(re,oe),z.index+=V.length,k(V,!1))})},function(t,r,e){var n=e(71),g=e(16);t.exports=n(g.process)=="process"},function(t,r,e){var n=e(16),g=e(107),y=e(17),i=e(215),k=e(219),L=e(21),$=e(406),V=e(249),z=e(57),re=e(100),oe=g&&g.prototype,le=L("species"),ue=!1,ie=y(n.PromiseRejectionEvent),ae=i("Promise",function(){var Fe=k(g),de=Fe!==String(g);if(!de&&re===66||z&&(!oe.catch||!oe.finally))return!0;if(!re||re<51||!/native code/.test(Fe)){var Ne=new g(function(ze){ze(1)}),Ve=function(ze){ze(function(){},function(){})};if((Ne.constructor={})[le]=Ve,!(ue=Ne.then(function(){})instanceof Ve))return!0}return!de&&($||V)&&!ie});t.exports={CONSTRUCTOR:ae,REJECTION_EVENT:ie,SUBCLASSING:ue}},function(t,r,e){t.exports=e(429)},function(t,r,e){var n=e(197),g=e(159),y=e(287);function i(k){var L;return t.exports=i=n?g(L=y).call(L):function($){return $.__proto__||y($)},t.exports.__esModule=!0,t.exports.default=t.exports,i(k)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(6),g=e(307),y=e(24),i=e(110).genPrivateUrl,k=e(0),L=k.notundef,$=k.exist,V=e(199),z=e(303),re=z.typeMap;function oe(le){le.resend?(k.verifyOptions(le,"idClient","msg::Message"),this.idClient=le.idClient):this.idClient=k.guid(),this.type=re[le.type],this.resend=le.resend?1:0,L(le.subType)&&(k.isInt(+le.subType)&&+le.subType>0?this.subType=+le.subType:k.onParamError("subType只能是大于0的整数","msg::Message")),L(le.custom)&&(y(le.custom)==="object"?this.custom=n(le.custom):this.custom=""+le.custom),L(le.text)&&(this.body=""+le.text),L(le.body)&&(this.body=""+le.body),L(le.yidunEnable)&&(this.yidunEnable=le.yidunEnable?1:0),L(le.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=le.antiSpamUsingYidun?1:0),L(le.antiSpamContent)&&(y(le.antiSpamContent)==="object"?this.antiSpamContent=n(le.antiSpamContent):this.antiSpamContent=""+le.antiSpamContent),L(le.antiSpamBusinessId)&&(y(le.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=n(le.antiSpamBusinessId):this.antiSpamBusinessId=""+le.antiSpamBusinessId),L(le.yidunAntiCheating)&&(this.yidunAntiCheating=le.yidunAntiCheating+""),L(le.skipHistory)&&(this.skipHistory=le.skipHistory?1:0),L(le.highPriority)&&(this.highPriority=le.highPriority?1:0),L(le.clientAntiSpam)&&(this.clientAntiSpam=le.clientAntiSpam?1:0),L(le.env)&&(this.env=le.env),L(le.notifyTargetTags)&&(this.notifyTargetTags=le.notifyTargetTags),L(le.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=le.yidunAntiSpamExt),(L(le.loc_x)||L(le.loc_y)||L(le.loc_z))&&(this.loc_x=le.loc_x,this.loc_y=le.loc_y,this.loc_z=le.loc_z)}oe.validTypes=z.validTypes,k.merge(oe.prototype,z.prototype),oe.getType=z.getType,oe.setFlow=z.setFlow,oe.reverse=function(le){var ue=k.filterObj(le,"chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");return L(ue.fromAvatar)&&(ue.fromAvatar=i(ue.fromAvatar)),ue=k.merge(ue,{fromClientType:V.reverseType(le.fromClientType),time:+le.time,type:oe.getType(le),text:$(le.body)?le.body:le.text||"",resend:+le.resend==1}),L(ue.userUpdateTime)&&(ue.userUpdateTime=+ue.userUpdateTime),L(le.callbackExt)&&(ue.callbackExt=le.callbackExt),L(le.subType)&&(ue.subType=+le.subType),L(le.yidunAntiSpamRes)&&(ue.yidunAntiSpamRes=le.yidunAntiSpamRes),L(le.loc_x)&&(ue.x=g(le.loc_x),ue.y=g(le.loc_y),ue.z=g(le.loc_z)),L(le.toAccids)&&(ue.toAccids=le.toAccids),ue.status=ue.status||"success",ue},oe.setExtra=function(le,ue){z.setFlow(le,ue)},t.exports=oe},function(t,r,e){var n=e(221),g=e(174);t.exports=Object.keys||function(y){return n(y,g)}},function(t,r,e){t.exports=e(450)},function(t,r,e){var n=e(181),g=e(510),y=e(511),i=n?n.toStringTag:void 0;t.exports=function(k){return k==null?k===void 0?"[object Undefined]":"[object Null]":i&&i in Object(k)?g(k):y(k)}},function(t,r,e){var n=e(602),g=e(194),y=e(609);t.exports=function(i,k){if(i==null)return{};var L,$,V=y(i,k);if(n){var z=n(i);for($=0;$<z.length;$++)L=z[$],g(k).call(k,L)>=0||Object.prototype.propertyIsEnumerable.call(i,L)&&(V[L]=i[L])}return V},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(576)},function(t,r,e){var n=e(13),g=e(7),y=e(71),i=Object,k=n("".split);t.exports=g(function(){return!i("z").propertyIsEnumerable(0)})?function(L){return y(L)=="String"?k(L,""):i(L)}:i},function(t,r,e){var n=e(325),g=e(131);t.exports=function(y){var i=n(y,"string");return g(i)?i:i+""}},function(t,r,e){var n=e(33),g=e(17),y=e(18),i=e(213),k=Object;t.exports=i?function(L){return typeof L=="symbol"}:function(L){var $=n("Symbol");return g($)&&y($.prototype,k(L))}},function(t,r,e){var n=e(13),g=0,y=Math.random(),i=n(1 .toString);t.exports=function(k){return"Symbol("+(k===void 0?"":k)+")_"+i(++g+y,36)}},function(t,r,e){var n=e(13),g=e(7),y=e(17),i=e(73),k=e(33),L=e(219),$=function(){},V=[],z=k("Reflect","construct"),re=/^\s*(?:class|function)\b/,oe=n(re.exec),le=!re.exec($),ue=function(ae){if(!y(ae))return!1;try{return z($,V,ae),!0}catch{return!1}},ie=function(ae){if(!y(ae))return!1;switch(i(ae)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return le||!!oe(re,L(ae))}catch{return!0}};ie.sham=!0,t.exports=!z||g(function(){var ae;return ue(ue.call)||!ue(Object)||!ue(function(){ae=!0})||ae})?ie:ue},function(t,r,e){var n=e(113),g=e(132),y=n("keys");t.exports=function(i){return y[i]||(y[i]=g(i))}},function(t,r,e){var n=e(221),g=e(174).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(y){return n(y,g)}},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,e){var n=e(21);r.f=n},function(t,r,e){var n=e(31),g=e(17),y=e(46),i=e(134),k=e(233),L=i("IE_PROTO"),$=Object,V=$.prototype;t.exports=k?$.getPrototypeOf:function(z){var re=y(z);if(n(re,L))return re[L];var oe=re.constructor;return g(oe)&&re instanceof oe?oe.prototype:re instanceof $?V:null}},function(t,r,e){var n=e(13),g=e(38),y=e(362);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,k=!1,L={};try{(i=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(L,[]),k=L instanceof Array}catch{}return function($,V){return g($),y(V),k?i($,V):$.__proto__=V,$}}():void 0)},function(t,r,e){var n=e(73),g=e(167),y=e(98),i=e(105),k=e(21)("iterator");t.exports=function(L){if(!y(L))return g(L,k)||g(L,"@@iterator")||i[n(L)]}},function(t,r,e){var n=Object.prototype.hasOwnProperty,g="~";function y(){}function i(V,z,re){this.fn=V,this.context=z,this.once=re||!1}function k(V,z,re,oe,le){if(typeof re!="function")throw new TypeError("The listener must be a function");var ue=new i(re,oe||V,le),ie=g?g+z:z;return V._events[ie]?V._events[ie].fn?V._events[ie]=[V._events[ie],ue]:V._events[ie].push(ue):(V._events[ie]=ue,V._eventsCount++),V}function L(V,z){--V._eventsCount==0?V._events=new y:delete V._events[z]}function $(){this._events=new y,this._eventsCount=0}Object.create&&(y.prototype=Object.create(null),new y().__proto__||(g=!1)),$.prototype.eventNames=function(){var V,z,re=[];if(this._eventsCount===0)return re;for(z in V=this._events)n.call(V,z)&&re.push(g?z.slice(1):z);return Object.getOwnPropertySymbols?re.concat(Object.getOwnPropertySymbols(V)):re},$.prototype.listeners=function(V){var z=g?g+V:V,re=this._events[z];if(!re)return[];if(re.fn)return[re.fn];for(var oe=0,le=re.length,ue=new Array(le);oe<le;oe++)ue[oe]=re[oe].fn;return ue},$.prototype.listenerCount=function(V){var z=g?g+V:V,re=this._events[z];return re?re.fn?1:re.length:0},$.prototype.emit=function(V,z,re,oe,le,ue){var ie=g?g+V:V;if(!this._events[ie])return!1;var ae,Fe,de=this._events[ie],Ne=arguments.length;if(de.fn){switch(de.once&&this.removeListener(V,de.fn,void 0,!0),Ne){case 1:return de.fn.call(de.context),!0;case 2:return de.fn.call(de.context,z),!0;case 3:return de.fn.call(de.context,z,re),!0;case 4:return de.fn.call(de.context,z,re,oe),!0;case 5:return de.fn.call(de.context,z,re,oe,le),!0;case 6:return de.fn.call(de.context,z,re,oe,le,ue),!0}for(Fe=1,ae=new Array(Ne-1);Fe<Ne;Fe++)ae[Fe-1]=arguments[Fe];de.fn.apply(de.context,ae)}else{var Ve,ze=de.length;for(Fe=0;Fe<ze;Fe++)switch(de[Fe].once&&this.removeListener(V,de[Fe].fn,void 0,!0),Ne){case 1:de[Fe].fn.call(de[Fe].context);break;case 2:de[Fe].fn.call(de[Fe].context,z);break;case 3:de[Fe].fn.call(de[Fe].context,z,re);break;case 4:de[Fe].fn.call(de[Fe].context,z,re,oe);break;default:if(!ae)for(Ve=1,ae=new Array(Ne-1);Ve<Ne;Ve++)ae[Ve-1]=arguments[Ve];de[Fe].fn.apply(de[Fe].context,ae)}}return!0},$.prototype.on=function(V,z,re){return k(this,V,z,re,!1)},$.prototype.once=function(V,z,re){return k(this,V,z,re,!0)},$.prototype.removeListener=function(V,z,re,oe){var le=g?g+V:V;if(!this._events[le])return this;if(!z)return L(this,le),this;var ue=this._events[le];if(ue.fn)ue.fn!==z||oe&&!ue.once||re&&ue.context!==re||L(this,le);else{for(var ie=0,ae=[],Fe=ue.length;ie<Fe;ie++)(ue[ie].fn!==z||oe&&!ue[ie].once||re&&ue[ie].context!==re)&&ae.push(ue[ie]);ae.length?this._events[le]=ae.length===1?ae[0]:ae:L(this,le)}return this},$.prototype.removeAllListeners=function(V){var z;return V?(z=g?g+V:V,this._events[z]&&L(this,z)):(this._events=new y,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prefixed=g,$.EventEmitter=$,t.exports=$},function(t,r,e){t.exports=e(413)},function(t,r,e){t.exports=e(438)},function(t,r,e){t.exports=e(455)},function(t,r,e){var n=e(499),g=e(500),y=e(501),i=e(502),k=e(503);function L($){var V=-1,z=$==null?0:$.length;for(this.clear();++V<z;){var re=$[V];this.set(re[0],re[1])}}L.prototype.clear=n,L.prototype.delete=g,L.prototype.get=y,L.prototype.has=i,L.prototype.set=k,t.exports=L},function(t,r,e){var n=e(204);t.exports=function(g,y){for(var i=g.length;i--;)if(n(g[i][0],y))return i;return-1}},function(t,r,e){var n=e(91)(Object,"create");t.exports=n},function(t,r,e){var n=e(523);t.exports=function(g,y){var i=g.__data__;return n(y)?i[typeof y=="string"?"string":"hash"]:i.map}},function(t,r,e){var n=e(268),g=e(269);t.exports=function(y,i,k,L){var $=!k;k||(k={});for(var V=-1,z=i.length;++V<z;){var re=i[V],oe=L?L(k[re],y[re],re,k,y):void 0;oe===void 0&&(oe=y[re]),$?g(k,re,oe):n(k,re,oe)}return k}},function(t,r){t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(t,r){t.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(t,r,e){t.exports=e(286)},function(t,r,e){var n=e(195),g=e(142),y=e(196);t.exports=function(i,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=n(k&&k.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),g(i,"prototype",{writable:!1}),k&&y(i,k)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(24).default,g=e(640);t.exports=function(y,i){if(i&&(n(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){var e={link:{id:1,heartbeat:2,negotiateTransport:5,initTransport:6},sync:{id:5,sync:1,syncTeamMembers:2},misc:{id:6,getSimpleNosToken:1,getNosToken:2,notifyUploadLog:3,uploadSdkLogUrl:4,audioToText:5,processImage:6,getNosTokenTrans:7,notifyTransLog:8,fetchFile:9,fetchFileList:10,removeFile:11,getClientAntispam:17,fileQuickTransfer:18,getNosOriginUrl:22,getServerTime:23,getNosAccessToken:24,deleteNosAccessToken:25,getNosCdnHost:26,getGrayscaleConfig:27,getMixStorePolicy:28,getMixStoreToken:29,getBackSourceToken:30,uploadDetect:32},avSignal:{id:15,signalingCreate:1,signalingDelay:2,signalingClose:3,signalingJoin:4,signalingLeave:5,signalingInvite:6,signalingCancel:7,signalingReject:8,signalingAccept:9,signalingControl:10,signalingNotify:11,signalingMutilClientSyncNotify:12,signalingUnreadMessageSyncNotify:13,signalingChannelsSyncNotify:14,signalingGetChannelInfo:15,signalingCallEx:16,signalingJoinAndAccept:17}},n={heartbeat:{sid:e.link.id,cid:e.link.heartbeat},negotiateTransport:{sid:e.link.id,cid:e.link.negotiateTransport,params:[{type:"Int",name:"sdkVersion"},{type:"Property",name:"negotiateTransportTag"}]},initTransport:{sid:e.link.id,cid:e.link.initTransport,params:[{type:"Property",name:"initTransportTag"}]},getGrayscaleConfig:{sid:e.misc.id,cid:e.misc.getGrayscaleConfig,params:[{type:"Property",name:"providers"}]},getMixStorePolicy:{sid:e.misc.id,cid:e.misc.getMixStorePolicy,params:[{type:"LongArray",name:"providers"}]},getMixStoreToken:{sid:e.misc.id,cid:e.misc.getMixStoreToken,params:[{type:"Property",name:"mixTokenReq"}]},getBackSourceToken:{sid:e.misc.id,cid:e.misc.getBackSourceToken,params:[{type:"Property",name:"mixAuthTokenReq"}]},uploadDetect:{sid:e.misc.id,cid:e.misc.uploadDetect,isAwaitable:!1,params:[{type:"Property",name:"notifyDetectTag"}]},getSimpleNosToken:{sid:e.misc.id,cid:e.misc.getSimpleNosToken,params:[{type:"Int",name:"num"}]},getNosToken:{sid:e.misc.id,cid:e.misc.getNosToken,params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken"}]},uploadSdkLogUrl:{sid:e.misc.id,cid:e.misc.uploadSdkLogUrl,params:[{type:"String",name:"url"},{type:"Property",name:"uploadTaskTag"}]},audioToText:{sid:e.misc.id,cid:e.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:e.misc.id,cid:e.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]},getClientAntispam:{sid:e.misc.id,cid:e.misc.getClientAntispam,params:[{type:"Property",name:"clientAntispam"}]},fileQuickTransfer:{sid:e.misc.id,cid:e.misc.fileQuickTransfer,params:[{type:"Property",name:"fileQuickTransfer"}]},getNosOriginUrl:{sid:e.misc.id,cid:e.misc.getNosOriginUrl,params:[{type:"Property",name:"nosFileUrlTag"}]},getServerTime:{sid:e.misc.id,cid:e.misc.getServerTime,params:[]},getNosAccessToken:{sid:e.misc.id,cid:e.misc.getNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},deleteNosAccessToken:{sid:e.misc.id,cid:e.misc.deleteNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},getNosTokenTrans:{sid:e.misc.id,cid:e.misc.getNosTokenTrans,params:[{type:"Property",name:"transToken"}]},fetchFile:{sid:e.misc.id,cid:e.misc.fetchFile,params:[{type:"String",name:"docId"}]},fetchFileList:{sid:e.misc.id,cid:e.misc.fetchFileList,params:[{type:"Property",name:"fileListParam"}]},removeFile:{sid:e.misc.id,cid:e.misc.removeFile,params:[{type:"String",name:"docId"}]},getNosCdnHost:{sid:e.misc.id,cid:e.misc.getNosCdnHost,params:[]},signalingCreate:{sid:e.avSignal.id,cid:e.avSignal.signalingCreate,params:[{type:"Property",name:"avSignalTag"}]},signalingDelay:{sid:e.avSignal.id,cid:e.avSignal.signalingDelay,params:[{type:"Property",name:"avSignalTag"}]},signalingClose:{sid:e.avSignal.id,cid:e.avSignal.signalingClose,params:[{type:"Property",name:"avSignalTag"}]},signalingJoin:{sid:e.avSignal.id,cid:e.avSignal.signalingJoin,params:[{type:"Property",name:"avSignalTag"}]},signalingLeave:{sid:e.avSignal.id,cid:e.avSignal.signalingLeave,params:[{type:"Property",name:"avSignalTag"}]},signalingInvite:{sid:e.avSignal.id,cid:e.avSignal.signalingInvite,params:[{type:"Property",name:"avSignalTag"}]},signalingCancel:{sid:e.avSignal.id,cid:e.avSignal.signalingCancel,params:[{type:"Property",name:"avSignalTag"}]},signalingReject:{sid:e.avSignal.id,cid:e.avSignal.signalingReject,params:[{type:"Property",name:"avSignalTag"}]},signalingAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingAccept,params:[{type:"Property",name:"avSignalTag"}]},signalingControl:{sid:e.avSignal.id,cid:e.avSignal.signalingControl,params:[{type:"Property",name:"avSignalTag"}]},signalingGetChannelInfo:{sid:e.avSignal.id,cid:e.avSignal.signalingGetChannelInfo,params:[{type:"Property",name:"avSignalTag"}]},signalingCallEx:{sid:e.avSignal.id,cid:e.avSignal.signalingCallEx,params:[{type:"Property",name:"avSignalTag"}]},signalingJoinAndAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingJoinAndAccept,params:[{type:"Property",name:"avSignalTag"}]}};t.exports={idMap:e,cmdConfig:n,packetConfig:{"1_2":{service:"link",cmd:"heartbeat",response:[]},"1_5":{service:"link",cmd:"negotiateTransport",response:[{type:"Property",name:"negotiateTransportTag"}]},"1_6":{service:"link",cmd:"initTransport",response:[{type:"Property",name:"initTransportTag"}]},"6_1":{service:"misc",cmd:"getSimpleNosToken",response:[{type:"PropertyArray",name:"nosTokens",entity:"nosToken"}]},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_3":{service:"misc",cmd:"notifyUploadLog"},"6_4":{service:"misc",cmd:"uploadSdkLogUrl"},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]},"6_7":{service:"misc",cmd:"getNosTokenTrans",response:[{type:"Property",name:"nosToken"},{type:"String",name:"docId"}]},"6_8":{service:"misc",cmd:"notifyTransLog",response:[{type:"Property",name:"transInfo"}]},"6_9":{service:"misc",cmd:"fetchFile",response:[{type:"Property",name:"info",entity:"transInfo"}]},"6_10":{service:"misc",cmd:"fetchFileList",response:[{type:"PropertyArray",name:"list",entity:"transInfo"},{type:"Int",name:"totalCount"}]},"6_11":{service:"misc",cmd:"removeFile",response:[{type:"String",name:"res"}]},"6_17":{service:"misc",cmd:"getClientAntispam",response:[{type:"Property",name:"clientAntispam"}]},"6_18":{service:"misc",cmd:"fileQuickTransfer",response:[{type:"Property",name:"fileQuickTransfer"}]},"6_22":{service:"misc",cmd:"getNosOriginUrl",response:[{type:"Property",name:"nosFileUrlTag"}]},"6_23":{service:"misc",cmd:"getServerTime",response:[{type:"Long",name:"time"}]},"6_24":{service:"misc",cmd:"getNosAccessToken",response:[{type:"Property",name:"nosAccessTokenTag"}]},"6_25":{service:"misc",cmd:"deleteNosAccessToken"},"6_26":{service:"misc",cmd:"getNosCdnHost",response:[{type:"Property",name:"nosConfigTag"}]},"6_27":{service:"misc",cmd:"getGrayscaleConfig",response:[{type:"Property",name:"appGrayConfigTag"}]},"6_28":{service:"misc",cmd:"getMixStorePolicy",response:[{type:"Property",name:"mixStorePolicyTag"}]},"6_29":{service:"misc",cmd:"getMixStoreToken",response:[{type:"Property",name:"mixStoreTokenTag"}]},"6_30":{service:"misc",cmd:"getBackSourceToken",response:[{type:"Property",name:"backSourceTokenTag"}]},"6_31":{service:"link",cmd:"notifyDetect",response:[{type:"Property",name:"notifyDetectTag"}]},"6_32":{service:"link",cmd:"uploadDetect",response:[]},"15_1":{service:"avSignal",cmd:"signalingCreate",response:[{type:"Property",name:"avSignalTag"}]},"15_2":{service:"avSignal",cmd:"signalingDelay",response:[{type:"Property",name:"avSignalTag"}]},"15_3":{service:"avSignal",cmd:"signalingClose",response:[{type:"Property",name:"avSignalTag"}]},"15_4":{service:"avSignal",cmd:"signalingJoin",response:[{type:"Property",name:"avSignalTag"}]},"15_5":{service:"avSignal",cmd:"signalingLeave",response:[]},"15_6":{service:"avSignal",cmd:"signalingInvite",response:[]},"15_7":{service:"avSignal",cmd:"signalingCancel",response:[]},"15_8":{service:"avSignal",cmd:"signalingReject",response:[]},"15_9":{service:"avSignal",cmd:"signalingAccept",response:[]},"15_10":{service:"avSignal",cmd:"signalingControl",response:[]},"15_11":{service:"avSignal",cmd:"signalingNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_12":{service:"avSignal",cmd:"signalingMutilClientSyncNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_13":{service:"avSignal",cmd:"signalingUnreadMessageSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_14":{service:"avSignal",cmd:"signalingChannelsSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_15":{service:"avSignal",cmd:"signalingGetChannelInfo",response:[{type:"Property",name:"avSignalTag"}]},"15_16":{service:"avSignal",cmd:"signalingCallEx",response:[{type:"Property",name:"avSignalTag"}]},"15_17":{service:"avSignal",cmd:"signalingJoinAndAccept",response:[{type:"Property",name:"avSignalTag"}]}},CMD_TYPE_PROPERTY:"Property",CMD_TYPE_BYTE:"Byte",CMD_TYPE_INT:"Int",CMD_TYPE_BOOL:"Bool",CMD_TYPE_LONG:"Long",CMD_TYPE_STRING:"String",CMD_TYPE_STR_STR_MAP:"StrStrMap",CMD_TYPE_STR_LONG_MAP:"StrLongMap",CMD_TYPE_LONG_LONG_MAP:"LongLongMap",CMD_TYPE_STR_ARRAY:"StrArray",CMD_TYPE_LONG_ARRAY:"LongArray",CMD_TYPE_PROPERTY_ARRAY:"PropertyArray",CMD_TYPE_KV_ARRAY:"KVArray"}},function(t,r,e){var n,g=e(19),y=e(2),i=e(11),k=e(3),L=e(4),$=e(8),V=e(23),z=e(6),re=e(110).urlQuery2Object,oe=e(0),le=e(35),ue=e(775),ie=e(776),ae=e(777),Fe=e(778),de=e(779),Ne=e(780);function Ve(Et){this.mixin(Et)}Ve.prototype=g((function(){}).prototype,{protocol:{value:null,writable:!0,enumerable:!0,configurable:!0}}),Ve.prototype.setProtocol=function(Et){this.protocol=Et},Ve.prototype.mixin=function(Et){var lr,tr,or=this;this.configMap=this.configMap||{},y(lr=["idMap","cmdConfig","packetConfig"]).call(lr,function(dr){or.configMap[dr]=oe.merge({},or.configMap[dr],Et.configMap&&Et.configMap[dr])}),y(tr=["serializeMap","unserializeMap"]).call(tr,function(dr){or[dr]=oe.merge({},or[dr],Et[dr])})},Ve.prototype.createCmd=(n=1,function(Et,lr){var tr,or=this,dr=this.configMap.cmdConfig[Et],cr=this.configMap.packetConfig[dr.sid+"_"+dr.cid],nr=Et==="heartbeat"?0:n++;return nr>32767&&(nr=1,n=2),Et={SID:dr.sid,CID:dr.cid,SER:nr,isAwaitable:typeof dr.isAwaitable=="boolean"?dr.isAwaitable:!(!cr||!cr.response)},dr.params&&(Et.Q=[],y(tr=dr.params).call(tr,function(ur){var ar=ur.type,gr=ur.name,pr=ur.entity,yr=lr[gr];if(!oe.undef(yr)){switch(ar){case"PropertyArray":ar="ArrayMable",yr=i(yr).call(yr,function(Sr){return{t:"Property",v:or.serialize(Sr,pr)}});break;case"Property":yr=or.serialize(yr,gr);break;case"bool":yr=yr?"true":"false"}Et.Q.push({t:ar,v:yr})}})),Et}),Ve.prototype.parseResponse=function(Et){var lr=this;return new k(function(tr){var or=JSON.parse(Et),dr={raw:or,rawStr:Et,error:le.genError(or.code)},cr=lr.configMap.packetConfig[or.sid+"_"+or.cid];if(!cr)return dr.notFound={sid:or.sid,cid:or.cid},void tr(dr);var nr=or.r,ur=cr.service==="notify"&&!cr.cmd;if(dr.isNotify=ur,ur){var ar=or.r[1].headerPacket;if(cr=lr.configMap.packetConfig[ar.sid+"_"+ar.cid],nr=or.r[1].body,!cr)return dr.notFound={sid:ar.sid,cid:ar.cid},void tr(dr)}if(dr.service=cr.service,dr.cmd=cr.cmd,dr.error){var gr,pr,yr=L(gr="".concat(or.sid,"_")).call(gr,or.cid);if(ur&&(yr=L(pr="".concat(ar.sid,"_")).call(pr,ar.cid)),dr.error.cmd=dr.cmd,dr.error.callFunc="protocol::parseResponse: ".concat(yr),dr.error.code===416){var Sr=nr[0];Sr&&(dr.frequencyControlDuration=1e3*Sr)}}var wr,Mr=!1;dr.error&&cr.trivialErrorCodes&&(Mr=$(wr=cr.trivialErrorCodes).call(wr,dr.error.code)!==-1);var mr=[];if((!dr.error||Mr)&&cr.response){var _r;dr.content={};var Nr=function(Pr,sr,Ir,Ar){if(Pr&&Ar==="msg"||Ar==="sysMsg"){var Cr=Ir.content[Ar];oe.isObject(Cr)&&!Cr.idServer&&(Cr.idServer=""+sr.r[0])}};y(_r=cr.response).call(_r,function(Pr,sr){var Ir,Ar=nr[sr];if(!oe.undef(Ar)){var Cr=Pr.type,br=Pr.name,vr=Pr.entity||br;switch(Cr){case"Property":mr.push(lr.unserialize(Ar,vr).then(V(Ir=function(Tr,Br,Lr,Fr,qr){Lr.content[Fr]=qr,Nr(Tr,Br,Lr,Fr)}).call(Ir,this,ur,or,dr,br)));break;case"PropertyArray":dr.content[br]=[],y(Ar).call(Ar,function(Tr,Br){var Lr;mr.push(lr.unserialize(Tr,vr).then(V(Lr=function(Fr,qr,Vr){Fr.content[qr][Br]=Vr}).call(Lr,this,dr,br)))});break;case"KVArray":dr.content[br]=Ar,Nr(ur,or,dr,br);break;case"long":case"Long":case"byte":case"Byte":case"Number":dr.content[br]=+Ar;break;default:dr.content[br]=Ar,Nr(ur,or,dr,br)}}})}k.all(mr).then(function(){tr(dr)})})},Ve.prototype.serialize=function(Et,lr){var tr=this.serializeMap[lr],or={};for(var dr in tr)Et.hasOwnProperty(dr)&&(or[tr[dr]]=Et[dr]);return or},Ve.prototype.matchNosSafeUrl=function(Et){if(!oe.isString(Et)||!~$(Et).call(Et,"_im_url=1"))return!1;var lr=re(Et);return!(!lr||!lr._im_url||lr._im_url!=1)},Ve.prototype.getOneNosOriginUrl=function(Et,lr,tr){var or=this;return new k(function(dr){or.protocol.getNosOriginUrlReqNum++,or.protocol.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:Et}},function(cr,nr,ur){or.protocol.getNosOriginUrlReqNum--,cr?or.protocol.logger.warn("error: get nos originUrl failed",cr):(lr["_"+tr+"_safe"]=lr[tr],lr[tr]=ur.nosFileUrlTag&&ur.nosFileUrlTag.originUrl),dr()})})},Ve.prototype.checkObjSafeUrl=function(Et,lr,tr){var or=this;for(var dr in Et)if(Et.hasOwnProperty(dr)){var cr=Et[dr];if(oe.isString(cr)){if(this.matchNosSafeUrl(cr)){var nr=this.getOneNosOriginUrl(cr,Et,dr);lr.push(nr),tr.push(nr)}}else oe.isObject(cr)?this.checkObjSafeUrl(cr,lr,tr):oe.isArray(cr)&&y(cr).call(cr,function(ur){oe.isObject(ur)&&or.checkObjSafeUrl(ur,lr,tr)})}};var ze=["url","avatar","fromAvatar","chatroomAvatar"];Ve.prototype.unserialize=function(Et,lr){var tr=this;return new k(function(or){var dr=tr.unserializeMap[lr],cr={},nr=[];if(Et)for(var ur in dr){var ar,gr=[];if(Et.hasOwnProperty(ur)&&(cr[dr[ur]]=Et[ur],tr.protocol.hasLogin&&!tr.protocol.keepNosSafeUrl))if(dr[ur]==="attach"&&Et[ur]&&$(Et[ur])&&~$(ar=Et[ur]).call(ar,"_im_url=1"))try{var pr,yr=JSON.parse(Et[ur]);yr.isS3||tr.checkObjSafeUrl(yr,gr,nr),k.all(gr).then(V(pr=function(Sr,wr){Sr.attach=z(wr)}).call(pr,tr,cr,yr))}catch(Sr){tr.logger.warn("unserialize",Sr&&Sr.message)}else~$(ze).call(ze,dr[ur])&&Et[ur]&&tr.matchNosSafeUrl(Et[ur])&&nr.push(tr.getOneNosOriginUrl(Et[ur],cr,dr[ur]))}k.all(nr).then(function(){or(cr)})})},Ve.prototype.syncUnserialize=function(Et,lr){var tr=this.unserializeMap[lr],or={};if(Et)for(var dr in tr)Et.hasOwnProperty(dr)&&(or[tr[dr]]=Et[dr]);return or};var jt=new Ve({configMap:ue,serializeMap:ie,unserializeMap:ae}),kt=new Ve({configMap:Fe,serializeMap:de,unserializeMap:Ne});t.exports={IM:jt,Chatroom:kt}},function(t,r,e){var n={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,y=g&&!n.call({1:2},1);r.f=y?function(i){var k=g(this,i);return!!k&&k.enumerable}:n},function(t,r,e){t.exports=e(336)},function(t,r,e){t.exports=e(637)},function(t,r,e){var n=e(11),g=e(10),y=e(0),i=y.notundef,k=y.fillPropertyWithDefault,L={0:"normal",1:"owner",2:"manager"};function $(V){y.verifyOptions(V,"teamId","team::TeamMember"),y.verifyParamAtLeastPresentOne(V,"nickInTeam muteTeam muteNotiType custom","team::TeamMember"),this.teamId=V.teamId,i(V.account)&&(this.account=V.account),i(V.nickInTeam)&&(this.nickInTeam=V.nickInTeam),i(V.muteNotiType)?this.bits=V.muteNotiType:i(V.muteTeam)&&(this.bits=0,V.muteTeam&&(this.bits+=1)),i(V.mute)&&(this.mute=V.mute?1:0),i(V.custom)&&(this.custom=""+V.custom)}$.reverse=function(V){var z=y.copy(V);if(i(z.teamId)&&(z.teamId=""+z.teamId),i(z.type)&&(z.type=L[z.type]),i(z.active)&&(z.active=+z.active==1),i(z.valid)&&(z.valid=+z.valid==1),i(z.mute)&&(z.mute=+z.mute==1),i(z.joinTime)&&(z.joinTime=+z.joinTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),i(z.bits)){var re=z.bits;delete z.bits,z.muteTeam=!!(1&re),z.muteNotiType=re}return i(z.teamId)&&i(z.account)&&(z.id=$.genId(z.teamId,z.account)),i(z.followAccountIds)&&(z.followAccountIds=JSON.parse(z.followAccountIds)),z},$.reverseMembers=function(V){return n(V).call(V,function(z){return g($).call($,z)})},$.fillProperties=function(V){var z=k(V,"mute",!1),re=k(V,"custom","");return z||re},$.genId=function(V,z){return V+"-"+z},$.accounts2ids=function(V,z){return n(z).call(z,function(re){return $.genId(V,re)})},$.assembleMembers=function(V,z){return y.isArray(z)||(z=[z]),n(z).call(z,function(re){return $.assembleMember(V,re)})},$.assembleMember=function(V,z){return{id:$.genId(V.teamId,z),account:z,teamId:V.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:V.memberUpdateTime,updateTime:V.memberUpdateTime,active:!0,valid:!0,invitorAccid:"",followAccountIds:[]}},$.assembleOwner=function(V){var z=$.assembleMember(V,V.owner);return z.type="owner",z},t.exports=$},function(t,r,e){var n,g=e(24),y=e(8),i=e(6),k=e(4),L=e(5),$=e(10),V=e(15),z=e(11),re=e(2),oe=e(0),le=oe.undef,ue=oe.notundef,ie=e(156).IM,ae=e(198),Fe=e(160),de={customP2p:100,customTeam:101,customSuperTeam:103,deleteMsgP2p:7,deleteMsgTeam:8,deleteMsgSuperTeam:12,deleteOnewayMsgP2p:13,deleteOnewayMsgTeam:14},Ne={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",12:"deleteMsgSuperTeam",13:"deleteMsgP2pOneWay",14:"deleteMsgTeamOneWay",15:"applySuperTeam",16:"rejectSuperTeamApply",17:"superTeamInvite",18:"rejectSuperTeamInvite",100:"customP2p",101:"customTeam",103:"customSuperTeam",102:"customP2p"},Ve={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},ze=["team","superTeam","friend","msg"],jt={applyTeam:"team",rejectTeamApply:"team",teamInvite:"team",rejectTeamInvite:"team",applySuperTeam:"superTeam",rejectSuperTeamApply:"superTeam",superTeamInvite:"superTeam",rejectSuperTeamInvite:"superTeam",addFriend:"friend",applyFriend:"friend",passFriendApply:"friend",rejectFriendApply:"friend",deleteFriend:"friend",deleteMsg:"msg"};function kt(Et){var lr,tr;oe.verifyOptions(Et,"type to","sysmsg::SystemMessage"),oe.verifyParamValid("type",Et.type,kt.validTypes,"sysmsg::SystemMessage"),y(lr=Et.type).call(lr,"custom")!==-1&&(oe.verifyOptions(Et,"content","sysmsg::SystemMessage"),this.attach=Et.content,ue(Et.apnsText)&&(this.apnsText=""+Et.apnsText),ue(Et.pushPayload)&&(g(Et.pushPayload)==="object"?this.pushPayload=i(Et.pushPayload):this.pushPayload=""+Et.pushPayload),ue(Et.sendToOnlineUsersOnly)&&(this.sendToOnlineUsersOnly=Et.sendToOnlineUsersOnly?0:1),ue(Et.cc)&&(this.cc=Et.cc?1:0),ue(Et.isPushable)&&(this.isPushable=Et.isPushable?1:0),ue(Et.isUnreadable)&&(this.isUnreadable=Et.isUnreadable?1:0),ue(Et.needPushNick)&&(this.needPushNick=Et.needPushNick?1:0)),y(tr=Et.type).call(tr,"deleteMsg")===0&&(Et.apnsText&&(this.apnsText=Et.apnsText),Et.pushPayload&&(this.pushPayload=Et.pushPayload),Et.attach&&(this.attach=Et.attach)),this.time=Et.time||+new Date,this.type=de[Et.type],this.to=Et.to,ue(Et.from)&&(this.from=Et.from),ue(Et.ps)&&(this.ps=Et.ps),ue(Et.deletedIdClient)&&(this.deletedIdClient=Et.deletedIdClient),ue(Et.deletedIdServer)&&(this.deletedIdServer=Et.deletedIdServer),ue(Et.opeAccount)&&(this.opeAccount=Et.opeAccount),ue(Et.yidunEnable)&&(this.yidunEnable=Et.yidunEnable?1:0),ue(Et.antiSpamContent)&&(g(Et.antiSpamContent)==="object"?this.antiSpamContent=i(Et.antiSpamContent):this.antiSpamContent=""+Et.antiSpamContent),ue(Et.antiSpamBusinessId)&&(g(Et.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=i(Et.antiSpamBusinessId):this.antiSpamBusinessId=""+Et.antiSpamBusinessId),ue(Et.env)&&(this.env=Et.env),this.idClient=Et.idClient||oe.guid()}kt.validTypes=k(n=L(de)).call(n,L(jt)),kt.validCategories=["team","friend"],kt.isCustom=function(Et){return Et.type==="custom"},kt.reverse=function(Et){var lr,tr={time:+Et.time,to:Et.to,type:Ne[Et.type]};if(ue(Et.from)&&(tr.from=Et.from),ue(Et.idClient)&&(tr.idClient=Et.idClient),ue(Et.idServer)&&(tr.idServer=""+Et.idServer),ue(Et.deletedIdClient)&&(tr.deletedIdClient=Et.deletedIdClient),ue(Et.deletedIdServer)&&(tr.deletedIdServer=""+Et.deletedIdServer),ue(Et.deletedMsgTime)&&(tr.deletedMsgTime=+Et.deletedMsgTime),ue(Et.deletedMsgFromNick)&&(tr.deletedMsgFromNick=""+Et.deletedMsgFromNick),ue(Et.opeAccount)&&(tr.opeAccount=Et.opeAccount),ue(Et.ps)&&(tr.ps=Et.ps),ue(Et.callbackExt)&&(tr.callbackExt=Et.callbackExt),Et.attach=Et.attach?""+Et.attach:"",tr.type==="customP2p"||tr.type==="customTeam"||tr.type==="customSuperTeam")tr.content=Et.attach,ue(Et.apnsText)&&(tr.apnsText=Et.apnsText),ue(Et.pushPayload)&&(tr.pushPayload=Et.pushPayload),oe.merge(tr,{sendToOnlineUsersOnly:le(Et.sendToOnlineUsersOnly)||+Et.sendToOnlineUsersOnly==0,cc:le(Et.cc)||+Et.cc==1,isPushable:le(Et.isPushable)||+Et.isPushable==1,isUnreadable:le(Et.isUnreadable)||+Et.isUnreadable==1,needPushNick:ue(Et.needPushNick)&&+Et.needPushNick==1}),tr.type==="customP2p"?tr.scene="p2p":tr.type==="customSuperTeam"?tr.scene="superTeam":tr.type==="customTeam"&&(tr.scene="team"),tr.type="custom";else if(y(lr=tr.type).call(lr,"deleteMsg")===0){Et.apnsText&&(tr.apnsText=Et.apnsText),Et.pushPayload&&(tr.pushPayload=Et.pushPayload),Et.attach&&(tr.attach=Et.attach);var or=tr.type.toLowerCase();y(or).call(or,"p2p")>-1?tr.scene="p2p":y(or).call(or,"superteam")>-1?tr.scene="superTeam":y(or).call(or,"team")>-1&&(tr.scene="team"),tr.type="deleteMsg"}else{if(Et.attach){tr.attach={};var dr=JSON.parse(Et.attach);ue(dr.vt)?(tr.type=Ve[dr.vt],dr.serverex&&dr.serverex[0]===1&&(tr.serverex=dr.serverex[1]),delete tr.attach):(ue(dr.tinfo)&&(tr.attach.team=$(ae).call(ae,ie.syncUnserialize(dr.tinfo,"team"))),ue(dr.tlist)&&(tr.attach.member=$(Fe).call(Fe,ie.syncUnserialize(dr.tlist,"teamMember"))),ue(dr.attach)&&(tr.attach.custom=dr.attach))}tr.category=jt[tr.type],tr.read=!1,tr.state="init"}return ue(Et.cc)&&(tr.cc=+Et.cc==1),tr.status=Et.status||"success",ue(V(Et))&&(tr.filter=V(Et)),tr},kt.reverseSysMsgs=function(Et,lr){var tr=(lr=lr||{}).mapper,or=oe.isFunction(tr);return z(Et).call(Et,function(dr){return dr=$(kt).call(kt,dr),or&&(dr=tr(dr)),dr})},kt.completeUnread=function(Et){var lr,tr;return Et=Et||{},re(ze).call(ze,function(or){delete Et[or]}),re(lr=L(jt)).call(lr,function(or){Et[or]=Et[or]||0,Et[or]<0&&(Et[or]=0),Et[tr=jt[or]]=Et[tr]||0,Et[tr]=Et[tr]+Et[or]}),Et.total=0,re(ze).call(ze,function(or){Et.total+=Et[or]}),Et},t.exports=kt},function(t,r,e){var n=e(127),g=["unreadMsgs"],y=e(0);function i(){}i.parse=function(k){var L=k.split("|");return{scene:L[0],to:L[1]}},i.genSessionByMsg=function(k){return{id:k.sessionId,scene:k.scene,to:k.target,updateTime:k.time,lastMsg:k}},i.appendLastMsg=function(k){var L=k.lastMsg;k["last"+y.capFirstLetter(L.type)+"Msg"]=L,k["last"+y.capFirstLetter(L.flow)+"Msg"]=L},i.genSessionByMsgs=function(k,L){var $=k.getLastNotIgnoredMsg(L);return $?i.genSessionByMsg($):null},i.trim=function(k){if(Object.prototype.toString.call(k)!=="[object Object]")return k;var L=k=y.simpleClone(k);return L.unreadMsgs,n(L,g)},i.isComplete=function(k){return k.id&&k.scene&&k.to},t.exports=i},function(t,r){t.exports=function(){}},function(t,r,e){var n=e(497);t.exports=function(g){return n(g,5)}},function(t,r,e){var n=e(152),g=e(44),y=e(45),i=e(153),k=e(154),L=e(122);function $(le){var ue=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ie,ae=L(le);if(ue){var Fe=L(this).constructor;ie=n(ae,arguments,Fe)}else ie=ae.apply(this,arguments);return k(this,ie)}}var V=e(141),z={V2NIM_LOGIN_STATUS_LOGOUT:0,V2NIM_LOGIN_STATUS_LOGINED:1,V2NIM_LOGIN_STATUS_LOGINING:2,V2NIM_LOGIN_STATUS_UNLOGIN:3},re={V2NIM_CONNECT_STATUS_DISCONNECTED:0,V2NIM_CONNECT_STATUS_CONNECTED:1,V2NIM_CONNECT_STATUS_CONNECTING:2,V2NIM_CONNECT_STATUS_WAITING:3},oe=function(le){i(ie,le);var ue=$(ie);function ie(ae){var Fe;return g(this,ie),(Fe=ue.call(this)).loginStatus=z.V2NIM_LOGIN_STATUS_LOGOUT,Fe.connectStatus=re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe.logger=ae.logger,Fe.clientProto=ae,Fe.lastErrorFromLoginCmd=null,Fe}return y(ie,[{key:"processEvent",value:function(ae,Fe,de){this.getConnectStatus();var Ne=this.clientProto.willReconnect();switch(ae){case"auth/loginLifeCycleAddressing":this.logger.log("auth::life cycle addressing"),this.lastErrorFromLoginCmd=null,this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINING),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_CONNECTING);break;case"auth/loginLifeCycleConnect":this.logger.log("auth::life cycle connecting"),this.lastErrorFromLoginCmd=null,this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINING),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_CONNECTING);break;case"auth/loginLifeCycleConnectSucc":this.logger.log("auth::life cycle connect success"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINING),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_CONNECTED);break;case"auth/loginLifeCycleConnectFail":this.logger.log("auth::life cycle connect fail, isWillReconnect ".concat(Ne,", due to:"),Fe&&Fe.message),this.setLoginStatus(Ne?z.V2NIM_LOGIN_STATUS_UNLOGIN:z.V2NIM_LOGIN_STATUS_LOGOUT,Fe),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe);break;case"auth/loginLifeCycleConnectionBroken":this.logger.log("auth::life cycle connection broken. isWillReconnect ".concat(Ne,", due to:"),Fe&&Fe.message),this.setLoginStatus(Ne?z.V2NIM_LOGIN_STATUS_UNLOGIN:z.V2NIM_LOGIN_STATUS_LOGOUT,Fe),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe);break;case"auth/loginLifeCycleLoginSucc":this.logger.log("auth::life cycle login success, verify authentication success"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINED),this.emit("auth/loginLifeCycleLoginSucc");break;case"auth/loginLifeCycleLoginFail":this.lastErrorFromLoginCmd=Fe,this.logger.log("auth::life cycle login fail. isWillReconnect ".concat(Ne,", due to verify authentication failed:"),Fe&&Fe.message),this.setLoginStatus(Ne?z.V2NIM_LOGIN_STATUS_UNLOGIN:z.V2NIM_LOGIN_STATUS_LOGOUT,Fe),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe);break;case"auth/loginLifeCycleLogout":this.logger.log("auth::life cycle logout"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGOUT),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,new Error("disconnect due to logout"));break;case"auth/loginLifeCycleKicked":this.logger.log("auth::life cycle kicked",de),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGOUT),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,new Error("disconnect due to kicked"));break;case"auth/loginLifeCycleWaiting":this.logger.log("auth::life cycle waiting to reconnect"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_UNLOGIN),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_WAITING)}}},{key:"getConnectStatus",value:function(){return this.connectStatus}},{key:"getLoginStatus",value:function(){return this.loginStatus}},{key:"getLastErrorFromLoginCmd",value:function(){return this.lastErrorFromLoginCmd}},{key:"setLoginStatus",value:function(ae,Fe){if(ae!==this.loginStatus){var de=this.loginStatus;this.loginStatus=ae,this.emit("loginStatus",ae),this.logger.log("auth::life cycle loginStatus:",ae),this.delegateLoginEvent(de,ae,Fe)}}},{key:"delegateLoginEvent",value:function(ae,Fe,de){ae===z.V2NIM_LOGIN_STATUS_LOGINING&&Fe===z.V2NIM_LOGIN_STATUS_LOGOUT&&this.emit("loginFailed",de)}},{key:"setConnectStatus",value:function(ae,Fe){if(ae!==this.connectStatus){var de=this.connectStatus;this.connectStatus=ae,this.emit("connectStatus",ae),this.delegateConnectEvent(de,ae,Fe)}}},{key:"delegateConnectEvent",value:function(ae,Fe,de){ae===re.V2NIM_CONNECT_STATUS_CONNECTED&&Fe===re.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("disconnected",de),ae===re.V2NIM_CONNECT_STATUS_CONNECTING&&Fe===re.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("connectFailed",de)}},{key:"destroy",value:function(){this.removeAllListeners()}}]),ie}(V);t.exports={V2NIMLoginStatus:z,V2NIMConnectStatus:re,StatusProtector:oe}},function(t,r,e){var n=e(71),g=e(13);t.exports=function(y){if(n(y)==="Function")return g(y)}},function(t,r,e){var n=e(32),g=e(98);t.exports=function(y,i){var k=y[i];return g(k)?void 0:n(k)}},function(t,r,e){var n=e(16),g=e(327),y=n["__core-js_shared__"]||g("__core-js_shared__",{});t.exports=y},function(t,r,e){var n=e(16),g=e(30),y=n.document,i=g(y)&&g(y.createElement);t.exports=function(k){return i?y.createElement(k):{}}},function(t,r,e){var n=e(47),g=e(114),y=e(49),i=function(k){return function(L,$,V){var z,re=n(L),oe=y(re),le=g(V,oe);if(k&&$!=$){for(;oe>le;)if((z=re[le++])!=z)return!0}else for(;oe>le;le++)if((k||le in re)&&re[le]===$)return k||le||0;return!k&&-1}};t.exports={includes:i(!0),indexOf:i(!1)}},function(t,r,e){var n=e(333);t.exports=function(g,y){return new(n(g))(y===0?0:y)}},function(t,r,e){var n={};n[e(21)("toStringTag")]="z",t.exports=String(n)==="[object z]"},function(t,r,e){var n=e(29),g=e(216),y=e(40),i=e(38),k=e(47),L=e(124);r.f=n&&!g?Object.defineProperties:function($,V){i($);for(var z,re=k(V),oe=L(V),le=oe.length,ue=0;le>ue;)y.f($,z=oe[ue++],re[z]);return $}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r,e){var n=e(71),g=e(47),y=e(135).f,i=e(225),k=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(L){return k&&n(L)=="Window"?function($){try{return y($)}catch{return i(k)}}(L):y(g(L))}},function(t,r,e){var n=e(1),g=e(20),y=e(57),i=e(231),k=e(17),L=e(361),$=e(138),V=e(139),z=e(89),re=e(65),oe=e(74),le=e(21),ue=e(105),ie=e(232),ae=i.PROPER,Fe=i.CONFIGURABLE,de=ie.IteratorPrototype,Ne=ie.BUGGY_SAFARI_ITERATORS,Ve=le("iterator"),ze=function(){return this};t.exports=function(jt,kt,Et,lr,tr,or,dr){L(Et,kt,lr);var cr,nr,ur,ar=function(mr){if(mr===tr&&wr)return wr;if(!Ne&&mr in yr)return yr[mr];switch(mr){case"keys":case"values":case"entries":return function(){return new Et(this,mr)}}return function(){return new Et(this)}},gr=kt+" Iterator",pr=!1,yr=jt.prototype,Sr=yr[Ve]||yr["@@iterator"]||tr&&yr[tr],wr=!Ne&&Sr||ar(tr),Mr=kt=="Array"&&yr.entries||Sr;if(Mr&&(cr=$(Mr.call(new jt)))!==Object.prototype&&cr.next&&(y||$(cr)===de||(V?V(cr,de):k(cr[Ve])||oe(cr,Ve,ze)),z(cr,gr,!0,!0),y&&(ue[gr]=ze)),ae&&tr=="values"&&Sr&&Sr.name!=="values"&&(!y&&Fe?re(yr,"name","values"):(pr=!0,wr=function(){return g(Sr,this)})),tr)if(nr={values:ar("values"),keys:or?wr:ar("keys"),entries:ar("entries")},dr)for(ur in nr)(Ne||pr||!(ur in yr))&&oe(yr,ur,nr[ur]);else n({target:kt,proto:!0,forced:Ne||pr},nr);return y&&!dr||yr[Ve]===wr||oe(yr,Ve,wr,{name:tr}),ue[kt]=wr,nr}},function(t,r){t.exports=function(e,n){return{value:e,done:n}}},function(t,r,e){var n=e(18),g=TypeError;t.exports=function(y,i){if(n(i,y))return y;throw g("Incorrect invocation")}},function(t,r,e){var n=e(133),g=e(85),y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not a constructor")}},function(t,r,e){var n=e(91)(e(59),"Map");t.exports=n},function(t,r,e){var n=e(59).Symbol;t.exports=n},function(t,r,e){var n=e(270),g=e(536),y=e(205);t.exports=function(i){return y(i)?n(i):g(i)}},function(t,r){var e=Array.isArray;t.exports=e},function(t,r){t.exports=function(e){return function(n){return e(n)}}},function(t,r,e){(function(n){var g=e(265),y=r&&!r.nodeType&&r,i=y&&typeof n=="object"&&n&&!n.nodeType&&n,k=i&&i.exports===y&&g.process,L=function(){try{var $=i&&i.require&&i.require("util").types;return $||k&&k.binding&&k.binding("util")}catch{}}();n.exports=L}).call(this,e(150)(t))},function(t,r){var e=Object.prototype;t.exports=function(n){var g=n&&n.constructor;return n===(typeof g=="function"&&g.prototype||e)}},function(t,r,e){var n=e(270),g=e(539),y=e(205);t.exports=function(i){return y(i)?n(i,!0):g(i)}},function(t,r,e){var n=e(544),g=e(274),y=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,k=i?function(L){return L==null?[]:(L=Object(L),n(i(L),function($){return y.call(L,$)}))}:g;t.exports=k},function(t,r,e){var n=e(548),g=e(180),y=e(549),i=e(279),k=e(550),L=e(126),$=e(266),V=$(n),z=$(g),re=$(y),oe=$(i),le=$(k),ue=L;(n&&ue(new n(new ArrayBuffer(1)))!="[object DataView]"||g&&ue(new g)!="[object Map]"||y&&ue(y.resolve())!="[object Promise]"||i&&ue(new i)!="[object Set]"||k&&ue(new k)!="[object WeakMap]")&&(ue=function(ie){var ae=L(ie),Fe=ae=="[object Object]"?ie.constructor:void 0,de=Fe?$(Fe):"";if(de)switch(de){case V:return"[object DataView]";case z:return"[object Map]";case re:return"[object Promise]";case oe:return"[object Set]";case le:return"[object WeakMap]"}return ae}),t.exports=ue},function(t,r,e){var n=e(553);t.exports=function(g){var y=new g.constructor(g.byteLength);return new n(y).set(new n(g)),y}},function(t,r,e){var n=e(13),g=e(112),y=e(58),i=e(151),k=n("".replace),L="["+i+"]",$=RegExp("^"+L+L+"*"),V=RegExp(L+L+"*$"),z=function(re){return function(oe){var le=y(g(oe));return 1&re&&(le=k(le,$,"")),2&re&&(le=k(le,V,"")),le}};t.exports={start:z(1),end:z(2),trim:z(3)}},function(t,r,e){var n=e(92),g=e(589);n.json=g,t.exports=n},function(t,r,e){var n=e(19),g=e(22),y=e(8),i=e(2),k=e(66),L=k.f,$=e(581);function V(re){re.onload&&this.once("load",re.onload),re.onerror&&this.once("error",re.onerror),re.onbeforesend&&this.once("beforesend",re.onbeforesend),re.onaftersend&&this.once("aftersend",re.onaftersend);var oe=(re=this.options=k.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},re)).headers;k.notexist(oe["Content-Type"])&&(oe["Content-Type"]="application/x-www-form-urlencoded"),this.send()}var z=V.prototype=n($.prototype);z.send=function(){var re=this,oe=re.options;g(function(){try{try{re.emit("beforesend",oe)}catch{}re.doSend()}catch(le){re.onError("serverError","请求失败:"+le.message)}},0)},z.doSend=L,z.afterSend=function(){var re=this;g(function(){re.emit("aftersend",re.options)},0)},z.onLoad=function(re){var oe,le=this.options,ue=re.status,ie=re.result;if(typeof ue!="number"||ue!==0)if(y(oe=""+ue).call(oe,"2")===0){if(le.type==="json")try{ie=JSON.parse(ie)}catch{return void this.onError("parseError",ie)}this.emit("load",ie)}else this.onError("serverError","服务器返回异常状态 status: "+ue,{status:ue,result:ie,date:re.date});else this.onError("netError","网络错误",{status:408})},z.onError=function(re,oe,le){var ue=k.isObject(le)?le:{};ue.code=re||"error",ue.message=oe||"发生错误",this.emit("error",ue)},z.onTimeout=function(){this.onError("timeout","请求超时",{status:408})},z.abort=function(){this.onError("abort","客户端中止",{status:415})},z.header=function(re){var oe=this;if(!k.isArray(re))return oe.getResponseHeader(re||"");var le={};return i(re).call(re,function(ue){le[ue]=oe.header(ue)}),le},z.getResponseHeader=L,z.destroy=L,t.exports=V},function(t,r,e){t.exports=e(606)},function(t,r,e){t.exports=e(628)},function(t,r,e){var n=e(197),g=e(159);function y(i,k){var L;return t.exports=y=n?g(L=n).call(L):function($,V){return $.__proto__=V,$},t.exports.__esModule=!0,t.exports.default=t.exports,y(i,k)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(631)},function(t,r,e){var n=e(5),g=e(2),y=e(23),i=e(0),k=i.notundef,L=i.fillPropertyWithDefault,$=n,V={},z={},re=[],oe={},le={normal:0,advanced:1},ue={0:"normal",1:"advanced"},ie=$(le),ae=V.joinMode={noVerify:0,needVerify:1,rejectAll:2};z.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},re.push("join"),oe.joinMode=$(ae);var Fe=V.beInviteMode={needVerify:0,noVerify:1};z.beInviteMode={0:"needVerify",1:"noVerify"},re.push("beInvite"),oe.beInviteMode=$(Fe);var de=V.inviteMode={manager:0,all:1};z.inviteMode={0:"manager",1:"all"},re.push("invite"),oe.inviteMode=$(de);var Ne=V.updateTeamMode={manager:0,all:1};z.updateTeamMode={0:"manager",1:"all"},re.push("updateTeam"),oe.updateTeamMode=$(Ne);var Ve=V.updateCustomMode={manager:0,all:1};function ze(kt){var Et;switch(i.verifyOptions(kt,"action","team::Team"),kt.action){case"create":i.verifyOptions(kt,"teamId",!1,"team::Team"),i.verifyOptions(kt,"type name","team::Team"),i.verifyParamValid("type",kt.type,ie,"team::Team"),k(kt.level)&&(i.verifyParamType("level",kt.level,"number","team::Team"),this.level=kt.level);break;case"update":i.verifyOptions(kt,"teamId","team::Team"),i.verifyOptions(kt,"type",!1,"team::Team")}k(kt.teamId)&&(this.teamId=kt.teamId),k(kt.type)&&(this.type=le[kt.type]),k(kt.avatar)&&(this.avatar=""+kt.avatar),k(kt.name)&&(this.name=""+kt.name),k(kt.intro)&&(this.intro=""+kt.intro),k(kt.announcement)&&(this.announcement=""+kt.announcement),g(re).call(re,y(Et=this.setMode).call(Et,this,kt)),k(kt.custom)&&(this.custom=""+kt.custom)}function jt(kt,Et){k(kt[Et+="Mode"])&&(kt[Et]=z[Et][kt[Et]])}z.updateCustomMode={0:"manager",1:"all"},re.push("updateCustom"),oe.updateCustomMode=$(Ve),ze.prototype.setMode=function(kt,Et){k(kt[Et+="Mode"])&&(i.verifyParamValid(Et,kt[Et],oe[Et],"team::Team"),this[Et]=V[Et][kt[Et]])},ze.reverse=function(kt,Et){var lr=i.copy(kt);if(k(lr.teamId)&&(lr.teamId=""+lr.teamId),k(lr.type)&&(lr.type=ue[lr.type]),k(lr.level)&&(lr.level=+lr.level),k(lr.valid)&&(lr.valid=+lr.valid==1),k(lr.memberNum)&&(lr.memberNum=+lr.memberNum),k(lr.memberUpdateTime)&&(lr.memberUpdateTime=+lr.memberUpdateTime),k(lr.createTime)&&(lr.createTime=+lr.createTime),k(lr.updateTime)&&(lr.updateTime=+lr.updateTime),k(lr.validToCurrentUser)&&(lr.validToCurrentUser=lr.validToCurrentUser==="1"),k(lr.mute)&&(lr.mute=lr.mute==="1"),k(lr.muteType))switch(lr.muteType){case"0":lr.mute=!1,lr.muteType="none";break;case"1":lr.mute=!0,lr.muteType="normal";break;case"3":lr.mute=!0,lr.muteType="all"}else k(lr.mute)&&(lr.mute===1?(lr.mute=!0,lr.muteType="normal"):(lr.mute=!1,lr.muteType="none"));return g(re).call(re,y(jt).call(jt,null,lr)),delete lr.bits,Et||ze.fillProperties(lr),lr},ze.fillProperties=function(kt){var Et=L(kt,"beInviteMode","needVerify"),lr=L(kt,"inviteMode","manager"),tr=L(kt,"updateTeamMode","manager"),or=L(kt,"updateCustomMode","manager"),dr=L(kt,"avatar","");return Et||lr||tr||or||dr},t.exports=ze},function(t,r,e){var n=e(48).clientTypeMap;function g(){}g.reverse=function(y){var i=y;return i.type=n[i.type],i},g.reverseType=function(y){return n[y]||y},t.exports=g},function(t,r,e){var n=e(24),g=e(121),y=e(8),i=e(12),k=e(70);function L(){if(!navigator||!navigator.userAgent)return!1;var z=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return g(z).call(z,function(re){return navigator.userAgent.match(re)})}function $(){var z;return!(!navigator||!navigator.userAgent)&&(typeof navigator>"u"?"undefined":n(navigator))==="object"&&typeof navigator.userAgent=="string"&&y(z=navigator.userAgent).call(z,"Electron")>=0}function V(){return navigator&&navigator.userAgent}t.exports={getHostEnv:function(){return i.isBrowser?$()?"Electron":L()?"H5":V()?"BROWSER":"Unset":i.isRN?"RN":i.isWeixinApp?"Weixin":"Unset"},getHostEnvEnum:function(){return i.isBrowser?$()?5:L()?101:V()?100:0:i.isRN?2:i.isWeixinApp?6:0},getHostEnvVer:function(){if(!i.isBrowser)return"";if(!$())return k.version;try{return navigator.userAgent.match(/Electron\/([\d.]+\d+)/)[1]||k.version}catch{return k.version}},getLibEnv:function(){return"BROWSER"}}},function(t,r,e){var n=e(19),g=e(34),y=e(6),i=e(81),k=e(202),L=e(12),$=e(794),V=e(922),z=e(0),re=z.verifyOptions,oe=z.verifyParamType,le=e(26).reportAPI,ue=e(156).Chatroom,ie=e(164);function ae(de){var Ne=ie(de);return this.subType="chatroom",this.nosScene=Ne.nosScene||"chatroom",this.nosSurvivalTime=Ne.nosSurvivalTime,Ne.Protocol=k,Ne.Message=V,Ne.constructor=ae,Ne.isAnonymous&&(Ne.account=Ne.account||"nimanon_".concat(z.guid()),Ne.isAnonymous=1,z.verifyOptions(Ne,"chatroomNick","api::Chatroom"),Ne.chatroomAvatar=Ne.chatroomAvatar||" "),this.init(Ne)}ae.Protocol=k,ae.parser=ue,ae.use=i.use,ae.getInstance=function(de){return de.isAnonymous&&(de.account=de.account||"nimanon_".concat(z.guid()),de.isAnonymous=1,z.verifyOptions(de,"chatroomNick","api::Chatroom.getInstance"),de.chatroomAvatar=de.chatroomAvatar||" "),i.getInstance.call(this,de)},ae.genInstanceName=function(de){return z.verifyOptions(de,"chatroomId","api::Chatroom.genInstanceName"),"Chatroom-account-"+de.account+"-chatroomId-"+de.chatroomId};var Fe=ae.fn=ae.prototype=n(i.prototype);ae.info=Fe.info=L.info,Fe.getChatroom=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"getChatroom",done:de.done}),this.processCallback(de),this.sendCmd("getChatroom",de)},Fe.updateChatroom=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"updateChatroom",done:de.done}),re(de,"chatroom needNotify","api::updateChatroom"),oe("needNotify",de.needNotify,"boolean"),this.processCustom(de),this.processCallback(de),de.chatroom=new $(de.chatroom),de.antispamTag={antiSpamBusinessId:de.antiSpamBusinessId},this.sendCmd("updateChatroom",de)},Fe.closeChatroom=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"closeChatroom",done:de.done}),this.processCustom(de),this.processCallback(de),this.sendCmd("closeChatroom",de)},Fe.updateTags=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"updateTags",done:de.done}),z.validate({tags:{type:"array",required:!1},notifyTargetTags:{type:"string",allowEmpty:!0,required:!1},needNotify:{type:"boolean",required:!1}},de,"chatroom::updateTags");var Ne=g({},de);this.processCallback(Ne),Ne.tags&&(Ne.tags=y(Ne.tags)),Ne.needNotify&&(Ne.needNotify=Ne.needNotify?1:0),this.sendCmd("updateChatroomTags",{chatRoomTagsUpdateTag:Ne},Ne.done)},t.exports=ae,e(932),e(933),e(934),e(935)},function(t,r,e){var n=e(19),g=e(23),y=e(11),i=e(10),k=e(82),L=e(0),$=L.undef,V=L.notundef,z=e(297),re=e(12),oe=e(156),le=e(794),ue=e(319);function ie(de){var Ne,Ve,ze;L.verifyOptions(de,"appKey account chatroomId chatroomAddresses","protocol::ChatroomProtocol"),de.isAnonymous||L.verifyOptions(de,"token","protocol::ChatroomProtocol"),L.verifyParamType("chatroomAddresses",de.chatroomAddresses,"array","protocol::ChatroomProtocol"),L.verifyCallback(de,"onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots","protocol::ChatroomProtocol"),Ne=typeof L.get(de,"privateConf.isDataReportEnable")=="boolean"?de.privateConf.isDataReportEnable:re.privateConf.isDataReportEnable,Ve=typeof L.get(de,"privateConf.reportConfigUrl")=="string"?de.privateConf.reportConfigUrl:re.privateConf.reportConfigUrl,ze=typeof L.get(de,"privateConf.reportUrl")=="string"?de.privateConf.reportUrl:re.privateConf.reportUrl,this.reporter=z.initReporter({isDataReportEnable:Ne,reportConfigUrl:Ve,reportUrl:ze,appKey:de.appKey,logger:this.logger}),k.call(this,de)}var ae=k.fn,Fe=ie.fn=ie.prototype=n(ae);Fe.init=function(){var de;ae.init.call(this),oe.Chatroom.setProtocol(this),this.parser=oe.Chatroom,g(de=this.sendCmd).call(de,this),this.syncResult={},this.timetags={},this.msgBuffer=[]},Fe.reset=function(){var de=this;ae.reset.call(de);var Ne,Ve=de.options;de.autoconnect=!!Ve.autoconnect,$(Ve.msgBufferInterval)&&(Ve.msgBufferInterval=300),L.verifyParamType("msgBufferInterval",Ve.msgBufferInterval,"number","protocol::ChatroomProtocol.reset"),$(Ve.msgBufferSize)&&(Ve.msgBufferSize=500),L.verifyParamType("msgBufferSize",Ve.msgBufferSize,"number","protocol::ChatroomProtocol.reset"),V(Ve.chatroomAddresses)&&(de.socketUrlsBackup=y(Ne=Ve.chatroomAddresses).call(Ne,function(ze){return re.formatSocketUrl({url:ze,secure:de.options.secure})}))},Fe.processChatroom=function(de){switch(de.cmd){case"login":de.error||(de.obj={chatroom:i(le).call(le,de.content.chatroom),member:i(ue).call(ue,de.content.chatroomMember)},this.cdnInfo={},this.initCdnData(),clearTimeout(this.queryCdnTimer),this.onCdnMsgInfo(de.content.chatroomCdnInfo));break;case"kicked":this.onKicked(de);break;case"logout":break;case"sendMsg":this.onSendMsg(de);break;case"msg":this.onMsg(de),this.cdnInfo&&this.cdnInfo.enable&&this.correctCdnTime(+de.content.msg.time);break;case"getChatroomMembers":case"getChatroomMembersByTag":this.onChatroomMembers(de);break;case"getChatroomMemberCountByTag":this.onGetChatroomMemberCountByTag(de);break;case"getHistoryMsgs":case"getHistoryMsgsByTags":this.onHistoryMsgs(de);break;case"markChatroomMember":this.onMarkChatroomMember(de);break;case"closeChatroom":break;case"getChatroom":this.onChatroom(de);break;case"updateChatroom":break;case"updateMyChatroomMemberInfo":delete de.obj.chatroomMember;break;case"getChatroomMembersInfo":this.onChatroomMembersInfo(de);break;case"kickChatroomMember":case"updateChatroomMemberTempMute":break;case"queueList":de.error||(de.obj=de.content);break;case"syncRobot":this.onSyncRobot(de);break;case"notifyCdnInfo":this.onCdnMsgInfo(de.content&&de.content.chatroomCdnInfo);break;case"updateChatroomTag":this.onTagsUpdate(de.content)}},Fe.onChatroom=function(de){de.error||(de.obj.chatroom=i(le).call(le,de.content.chatroom))},Fe.onTagsUpdate=function(de){if(this.logger.info("onTagsUpdate:: ",de),this.options.onTagsUpdate&&typeof this.options.onTagsUpdate=="function"){var Ne=de.updateTags&&de.updateTags.currentTags;try{Ne=JSON.parse(Ne)}catch(Ve){this.logger.error("onTagsUpdate:: parse tags failed",Ve)}this.options.onTagsUpdate(Ne)}},t.exports=ie,e(910),e(911),e(912),e(921)},function(t,r){t.exports=function(e,n){for(var g=n.split(".");g.length;){var y=g.shift(),i=!1;if(y[y.length-1]=="?"&&(y=y.slice(0,-1),i=!0),!(e=e[y])&&i)return e}return e}},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(264),g=e(272);t.exports=function(y){return y!=null&&g(y.length)&&!n(y)}},function(t,r,e){var n=e(11),g=e(10),y=e(0),i=y.notundef,k=y.fillPropertyWithDefault,L={0:"normal",1:"owner",2:"manager"};function $(V){y.verifyOptions(V,"teamId","superTeam::TeamMember"),y.verifyParamAtLeastPresentOne(V,"nickInTeam muteTeam custom muteNotiType","superTeam::SuperTeamMember"),this.teamId=V.teamId,i(V.account)&&(this.account=V.account),i(V.nickInTeam)&&(this.nickInTeam=V.nickInTeam),i(V.muteNotiType)?this.bits=V.muteNotiType:i(V.muteTeam)&&(this.bits=0,V.muteTeam&&(this.bits+=1)),i(V.mute)&&(this.mute=V.mute?1:0),i(V.custom)&&(this.custom=""+V.custom)}$.reverse=function(V){var z=y.copy(V);if(i(z.teamId)&&(z.teamId=""+z.teamId),i(z.type)&&(z.type=L[z.type]),i(z.active)&&(z.active=+z.active==1),i(z.valid)&&(z.valid=+z.valid==1),i(z.mute)&&(z.mute=+z.mute==1),i(z.joinTime)&&(z.joinTime=+z.joinTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),i(z.bits)){var re=z.bits;delete z.bits,z.muteTeam=!!(1&re),z.muteNotiType=re}return i(z.teamId)&&i(z.account)&&(z.id=$.genId(z.teamId,z.account)),i(z.followAccountIds)&&(z.followAccountIds=JSON.parse(z.followAccountIds)),z},$.reverseMembers=function(V){return n(V).call(V,function(z){return g($).call($,z)})},$.fillProperties=function(V){var z=k(V,"mute",!1),re=k(V,"custom","");return z||re},$.genId=function(V,z){return V+"-"+z},$.accounts2ids=function(V,z){return n(z).call(z,function(re){return $.genId(V,re)})},$.assembleMembers=function(V,z){return y.isArray(z)||(z=[z]),n(z).call(z,function(re){return $.assembleMember(V,re)})},$.assembleMember=function(V,z){return{id:$.genId(V.teamId,z),account:z,teamId:V.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:V.memberUpdateTime,updateTime:V.memberUpdateTime,active:!0,valid:!0,followAccountIds:[]}},$.assembleOwner=function(V){var z=$.assembleMember(V,V.owner);return z.type="owner",z},t.exports=$},function(t,r,e){var n=e(688),g=e(692),y=e(314),i=e(696);t.exports=function(k,L){return n(k)||g(k,L)||y(k,L)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(11),g=e(10),y=e(5),i=e(110).genPrivateUrl,k=e(0),L={unknown:0,male:1,female:2},$={0:"unknown",1:"male",2:"female"};function V(z){k.merge(this,z),k.notundef(this.gender)&&(k.verifyParamValid("gender",this.gender,V.validGenders,"user::User"),this.gender=L[this.gender]),k.notundef(this.email)&&this.email!==""&&k.verifyEmail("email",this.email,"user::User"),k.notundef(this.birth)&&this.birth!==""&&k.verifyBirth("birth",this.birth,"user::User"),k.notundef(this.tel)&&this.tel!==""&&k.verifyTel("tel",this.tel,"user::User")}V.reverse=function(z,re,oe){var le=k.filterObj(z,"account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");return k.notundef(le.avatar)&&(le.avatar=i(le.avatar,re,oe)),k.notundef(le.gender)&&(le.gender=$[le.gender]),k.notundef(le.createTime)&&(le.createTime=+le.createTime),k.notundef(le.updateTime)&&(le.updateTime=+le.updateTime),le},V.reverseUsers=function(z){return n(z).call(z,function(re){return g(V).call(V,re)})},V.validGenders=y(L),t.exports=V},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(8),k=e(110).genPrivateUrl,L=e(80),$=e(0),V=e(12);function z(ue,ie){switch($.notundef(ue.type)?$.verifyFileType(ue.type,"msg::FileMessage"):ue.type="file",$.verifyOptions(ue,"file","msg::FileMessage"),$.verifyOptions(ue.file,"url ext size",!0,"file.","msg::FileMessage"),ue.type){case"image":re.verifyFile(ue.file,"msg::FileMessage");break;case"audio":oe.verifyFile(ue.file,"msg::FileMessage");break;case"video":le.verifyFile(ue.file,"msg::FileMessage")}L.call(this,ue),ie&&(this.idClient=ie),this.attach=n(ue.file)}z.prototype=g(L.prototype),z.reverse=function(ue){var ie=y(L).call(L,ue);if(ue.attach=ue.attach?""+ue.attach:"",ue.attach&&(ie.file=JSON.parse(ue.attach),!ie.file.isS3)){var ae,Fe;ie.file.url=k(ie.file.url)||"",ie.type==="audio"&&ie.file.url&&!ie.file.mp3Url&&(ie.file.mp3Url=ie.file.url+(~i(Fe=ie.file.url).call(Fe,"?")?"&":"?")+"audioTrans&type=mp3"),V.httpsEnabled&&i(ae=ie.file.url).call(ae,"https://")!==0&&(ie.file.url=ie.file.url.replace("http","https"))}return ie},t.exports=z;var re=e(858),oe=e(859),le=e(860)},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(8),k=e(110).genPrivateUrl,L=e(123),$=e(0),V=e(12);function z(ue,ie){switch($.notundef(ue.type)?$.verifyFileType(ue.type,"msg::FileMessage"):ue.type="file",$.verifyOptions(ue,"file","msg::FileMessage"),$.verifyOptions(ue.file,"url ext size",!0,"file.","msg::FileMessage"),ue.type){case"image":re.verifyFile(ue.file,"msg::FileMessage");break;case"audio":oe.verifyFile(ue.file,"msg::FileMessage");break;case"video":le.verifyFile(ue.file,"msg::FileMessage")}L.call(this,ue),ie&&(this.idClient=ie),this.attach=n(ue.file)}z.prototype=g(L.prototype),z.reverse=function(ue){var ie=y(L).call(L,ue);if(ue.attach=ue.attach?""+ue.attach:"",ue.attach&&(ie.file=JSON.parse(ue.attach),!ie.file.isS3)){var ae,Fe;ie.file.url=k(ie.file.url)||"",ie.type==="audio"&&ie.file.url&&!ie.file.mp3Url&&(ie.file.mp3Url=ie.file.url+(~i(Fe=ie.file.url).call(Fe,"?")?"&":"?")+"audioTrans&type=mp3"),V.httpsEnabled&&i(ae=ie.file.url).call(ae,"https://")!==0&&(ie.file.url=ie.file.url.replace("http","https"))}return ie},t.exports=z;var re=e(924),oe=e(925),le=e(926)},function(t,r,e){var n=e(322);t.exports=n},function(t,r){var e=typeof document=="object"&&document.all,n=e===void 0&&e!==void 0;t.exports={all:e,IS_HTMLDDA:n}},function(t,r,e){var n=e(99);t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(t,r,e){var n=e(29),g=e(7),y=e(169);t.exports=!n&&!g(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},function(t,r,e){var n=e(7),g=e(17),y=/#|\.prototype\./,i=function(z,re){var oe=L[k(z)];return oe==V||oe!=$&&(g(re)?n(re):!!re)},k=i.normalize=function(z){return String(z).replace(y,".").toLowerCase()},L=i.data={},$=i.NATIVE="N",V=i.POLYFILL="P";t.exports=i},function(t,r,e){var n=e(29),g=e(7);t.exports=n&&g(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(t,r,e){var n=e(1),g=e(7),y=e(87),i=e(30),k=e(46),L=e(49),$=e(218),V=e(101),z=e(171),re=e(116),oe=e(21),le=e(100),ue=oe("isConcatSpreadable"),ie=le>=51||!g(function(){var de=[];return de[ue]=!1,de.concat()[0]!==de}),ae=re("concat"),Fe=function(de){if(!i(de))return!1;var Ne=de[ue];return Ne!==void 0?!!Ne:y(de)};n({target:"Array",proto:!0,arity:1,forced:!ie||!ae},{concat:function(de){var Ne,Ve,ze,jt,kt,Et=k(this),lr=z(Et,0),tr=0;for(Ne=-1,ze=arguments.length;Ne<ze;Ne++)if(Fe(kt=Ne===-1?Et:arguments[Ne]))for(jt=L(kt),$(tr+jt),Ve=0;Ve<jt;Ve++,tr++)Ve in kt&&V(lr,tr,kt[Ve]);else $(tr+1),V(lr,tr++,kt);return lr.length=tr,lr}})},function(t,r){var e=TypeError;t.exports=function(n){if(n>9007199254740991)throw e("Maximum allowed index exceeded");return n}},function(t,r,e){var n=e(13),g=e(17),y=e(168),i=n(Function.toString);g(y.inspectSource)||(y.inspectSource=function(k){return i(k)}),t.exports=y.inspectSource},function(t,r,e){var n=e(334);t.exports=n},function(t,r,e){var n=e(13),g=e(31),y=e(47),i=e(170).indexOf,k=e(117),L=n([].push);t.exports=function($,V){var z,re=y($),oe=0,le=[];for(z in re)!g(k,z)&&g(re,z)&&L(le,z);for(;V.length>oe;)g(re,z=V[oe++])&&(~i(le,z)||L(le,z));return le}},function(t,r,e){var n=e(33);t.exports=n("document","documentElement")},function(t,r,e){var n=e(339);e(75),t.exports=n},function(t,r,e){e(340),e(343),e(344),e(228),e(345)},function(t,r,e){var n=e(114),g=e(49),y=e(101),i=Array,k=Math.max;t.exports=function(L,$,V){for(var z=g(L),re=n($,z),oe=n(V===void 0?z:V,z),le=i(k(oe-re,0)),ue=0;re<oe;re++,ue++)y(le,ue,L[re]);return le.length=ue,le}},function(t,r,e){var n=e(20),g=e(33),y=e(21),i=e(74);t.exports=function(){var k=g("Symbol"),L=k&&k.prototype,$=L&&L.valueOf,V=y("toPrimitive");L&&!L[V]&&i(L,V,function(z){return n($,this)},{arity:1})}},function(t,r,e){var n=e(99);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},function(t,r,e){var n=e(1),g=e(33),y=e(83),i=e(20),k=e(13),L=e(7),$=e(87),V=e(17),z=e(30),re=e(131),oe=e(104),le=e(99),ue=g("JSON","stringify"),ie=k(/./.exec),ae=k("".charAt),Fe=k("".charCodeAt),de=k("".replace),Ne=k(1 .toString),Ve=/[\uD800-\uDFFF]/g,ze=/^[\uD800-\uDBFF]$/,jt=/^[\uDC00-\uDFFF]$/,kt=!le||L(function(){var or=g("Symbol")();return ue([or])!="[null]"||ue({a:or})!="{}"||ue(Object(or))!="{}"}),Et=L(function(){return ue("\uDF06\uD834")!=='"\\udf06\\ud834"'||ue("\uDEAD")!=='"\\udead"'}),lr=function(or,dr){var cr=oe(arguments),nr=dr;if((z(dr)||or!==void 0)&&!re(or))return $(dr)||(dr=function(ur,ar){if(V(nr)&&(ar=i(nr,this,ur,ar)),!re(ar))return ar}),cr[1]=dr,y(ue,null,cr)},tr=function(or,dr,cr){var nr=ae(cr,dr-1),ur=ae(cr,dr+1);return ie(ze,or)&&!ie(jt,ur)||ie(jt,or)&&!ie(ze,nr)?"\\u"+Ne(Fe(or,0),16):or};ue&&n({target:"JSON",stat:!0,arity:3,forced:kt||Et},{stringify:function(or,dr,cr){var nr=oe(arguments),ur=y(kt?lr:ue,null,nr);return Et&&typeof ur=="string"?de(ur,Ve,tr):ur}})},function(t,r,e){e(25)("iterator")},function(t,r,e){var n=e(25),g=e(226);n("toPrimitive"),g()},function(t,r,e){var n=e(29),g=e(31),y=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,k=g(y,"name"),L=k&&(function(){}).name==="something",$=k&&(!n||n&&i(y,"name").configurable);t.exports={EXISTS:k,PROPER:L,CONFIGURABLE:$}},function(t,r,e){var n,g,y,i=e(7),k=e(17),L=e(30),$=e(88),V=e(138),z=e(74),re=e(21),oe=e(57),le=re("iterator"),ue=!1;[].keys&&("next"in(y=[].keys())?(g=V(V(y)))!==Object.prototype&&(n=g):ue=!0),!L(n)||i(function(){var ie={};return n[le].call(ie)!==ie})?n={}:oe&&(n=$(n)),k(n[le])||z(n,le,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:ue}},function(t,r,e){var n=e(7);t.exports=!n(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},function(t,r,e){var n=e(13),g=e(115),y=e(58),i=e(112),k=n("".charAt),L=n("".charCodeAt),$=n("".slice),V=function(z){return function(re,oe){var le,ue,ie=y(i(re)),ae=g(oe),Fe=ie.length;return ae<0||ae>=Fe?z?"":void 0:(le=L(ie,ae))<55296||le>56319||ae+1===Fe||(ue=L(ie,ae+1))<56320||ue>57343?z?k(ie,ae):le:z?$(ie,ae,ae+2):ue-56320+(le-55296<<10)+65536}};t.exports={codeAt:V(!1),charAt:V(!0)}},function(t,r,e){var n=e(378);t.exports=n},function(t,r,e){e(75);var n=e(73),g=e(31),y=e(18),i=e(380),k=Array.prototype,L={DOMTokenList:!0,NodeList:!0};t.exports=function($){var V=$.forEach;return $===k||y(k,$)&&V===k.forEach||g(L,n($))?i:V}},function(t,r,e){var n=e(388);t.exports=n},function(t,r,e){var n=e(392);e(75),t.exports=n},function(t,r,e){e(393)},function(t,r,e){var n=e(33),g=e(13),y=e(135),i=e(136),k=e(38),L=g([].concat);t.exports=n("Reflect","ownKeys")||function($){var V=y.f(k($)),z=i.f;return z?L(V,z($)):V}},function(t,r,e){var n=e(21),g=e(105),y=n("iterator"),i=Array.prototype;t.exports=function(k){return k!==void 0&&(g.Array===k||i[y]===k)}},function(t,r,e){var n=e(20),g=e(32),y=e(38),i=e(85),k=e(140),L=TypeError;t.exports=function($,V){var z=arguments.length<2?k($):V;if(g(z))return y(n(z,$));throw L(i($)+" is not iterable")}},function(t,r,e){var n=e(20),g=e(38),y=e(167);t.exports=function(i,k,L){var $,V;g(i);try{if(!($=y(i,"return"))){if(k==="throw")throw L;return L}$=n($,i)}catch(z){V=!0,$=z}if(k==="throw")throw L;if(V)throw $;return g($),L}},function(t,r,e){var n=e(33),g=e(40),y=e(21),i=e(29),k=y("species");t.exports=function(L){var $=n(L),V=g.f;i&&$&&!$[k]&&V($,k,{configurable:!0,get:function(){return this}})}},function(t,r,e){var n=e(38),g=e(179),y=e(98),i=e(21)("species");t.exports=function(k,L){var $,V=n(k).constructor;return V===void 0||y($=n(V)[i])?L:g($)}},function(t,r,e){var n,g,y,i,k=e(16),L=e(83),$=e(36),V=e(17),z=e(31),re=e(7),oe=e(222),le=e(104),ue=e(169),ie=e(247),ae=e(248),Fe=e(119),de=k.setImmediate,Ne=k.clearImmediate,Ve=k.process,ze=k.Dispatch,jt=k.Function,kt=k.MessageChannel,Et=k.String,lr=0,tr={};try{n=k.location}catch{}var or=function(ur){if(z(tr,ur)){var ar=tr[ur];delete tr[ur],ar()}},dr=function(ur){return function(){or(ur)}},cr=function(ur){or(ur.data)},nr=function(ur){k.postMessage(Et(ur),n.protocol+"//"+n.host)};de&&Ne||(de=function(ur){ie(arguments.length,1);var ar=V(ur)?ur:jt(ur),gr=le(arguments,1);return tr[++lr]=function(){L(ar,void 0,gr)},g(lr),lr},Ne=function(ur){delete tr[ur]},Fe?g=function(ur){Ve.nextTick(dr(ur))}:ze&&ze.now?g=function(ur){ze.now(dr(ur))}:kt&&!ae?(i=(y=new kt).port2,y.port1.onmessage=cr,g=$(i.postMessage,i)):k.addEventListener&&V(k.postMessage)&&!k.importScripts&&n&&n.protocol!=="file:"&&!re(nr)?(g=nr,k.addEventListener("message",cr,!1)):g="onreadystatechange"in ue("script")?function(ur){oe.appendChild(ue("script")).onreadystatechange=function(){oe.removeChild(this),or(ur)}}:function(ur){setTimeout(dr(ur),0)}),t.exports={set:de,clear:Ne}},function(t,r){var e=TypeError;t.exports=function(n,g){if(n<g)throw e("Not enough arguments");return n}},function(t,r,e){var n=e(72);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(t,r){t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},function(t,r,e){var n=e(107),g=e(251),y=e(120).CONSTRUCTOR;t.exports=y||!g(function(i){n.all(i).then(void 0,function(){})})},function(t,r,e){var n=e(21)("iterator"),g=!1;try{var y=0,i={next:function(){return{done:!!y++}},return:function(){g=!0}};i[n]=function(){return this},Array.from(i,function(){throw 2})}catch{}t.exports=function(k,L){if(!L&&!g)return!1;var $=!1;try{var V={};V[n]=function(){return{next:function(){return{done:$=!0}}}},k(V)}catch{}return $}},function(t,r,e){var n=e(38),g=e(30),y=e(76);t.exports=function(i,k){if(n(i),g(k)&&k.constructor===i)return k;var L=y.f(i);return(0,L.resolve)(k),L.promise}},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(76),k=e(106),L=e(50);n({target:"Promise",stat:!0},{allSettled:function($){var V=this,z=i.f(V),re=z.resolve,oe=z.reject,le=k(function(){var ue=y(V.resolve),ie=[],ae=0,Fe=1;L($,function(de){var Ne=ae++,Ve=!1;Fe++,g(ue,V,de).then(function(ze){Ve||(Ve=!0,ie[Ne]={status:"fulfilled",value:ze},--Fe||re(ie))},function(ze){Ve||(Ve=!0,ie[Ne]={status:"rejected",reason:ze},--Fe||re(ie))})}),--Fe||re(ie)});return le.error&&oe(le.value),z.promise}})},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(33),k=e(76),L=e(106),$=e(50);n({target:"Promise",stat:!0},{any:function(V){var z=this,re=i("AggregateError"),oe=k.f(z),le=oe.resolve,ue=oe.reject,ie=L(function(){var ae=y(z.resolve),Fe=[],de=0,Ne=1,Ve=!1;$(V,function(ze){var jt=de++,kt=!1;Ne++,g(ae,z,ze).then(function(Et){kt||Ve||(Ve=!0,le(Et))},function(Et){kt||Ve||(kt=!0,Fe[jt]=Et,--Ne||ue(new re(Fe,"No one promise resolved")))})}),--Ne||ue(new re(Fe,"No one promise resolved"))});return ie.error&&ue(ie.value),oe.promise}})},function(t,r,e){var n=e(416);t.exports=n},function(t,r,e){var n=e(24).default,g=e(418);t.exports=function(y){var i=g(y,"string");return n(i)==="symbol"?i:String(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(426);t.exports=n},function(t,r,e){var n=e(85),g=TypeError;t.exports=function(y,i){if(!delete y[i])throw g("Cannot delete property "+n(i)+" of "+n(y))}},function(t,r,e){e(461),e(463)},function(t,r,e){var n,g=e(16),y=e(83),i=e(17),k=e(462),L=e(72),$=e(104),V=e(247),z=g.Function,re=/MSIE .\./.test(L)||k&&((n=g.Bun.version.split(".")).length<3||n[0]==0&&(n[1]<3||n[1]==3&&n[2]==0));t.exports=function(oe,le){var ue=le?2:1;return re?function(ie,ae){var Fe=V(arguments.length,1)>ue,de=i(ie)?ie:z(ie),Ne=Fe?$(arguments,ue):[],Ve=Fe?function(){y(de,this,Ne)}:de;return le?oe(Ve,ae):oe(Ve)}:oe}},function(t,r,e){var n=e(477);t.exports=n},function(t,r,e){var n=e(486);t.exports=n},function(t,r){t.exports=function e(n,g){var y,i,k=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,L=/(^[ ]*|[ ]*$)/g,$=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,V=/^0x[0-9a-f]+$/i,z=/^0/,re=function(Ve){return e.insensitive&&(""+Ve).toLowerCase()||""+Ve},oe=re(n).replace(L,"")||"",le=re(g).replace(L,"")||"",ue=oe.replace(k,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),ie=le.replace(k,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),ae=parseInt(oe.match(V),16)||ue.length!==1&&oe.match($)&&Date.parse(oe),Fe=parseInt(le.match(V),16)||ae&&le.match($)&&Date.parse(le)||null;if(Fe){if(ae<Fe)return-1;if(ae>Fe)return 1}for(var de=0,Ne=Math.max(ue.length,ie.length);de<Ne;de++){if(y=!(ue[de]||"").match(z)&&parseFloat(ue[de])||ue[de]||0,i=!(ie[de]||"").match(z)&&parseFloat(ie[de])||ie[de]||0,isNaN(y)!==isNaN(i))return isNaN(y)?1:-1;if(typeof y!=typeof i&&(y+="",i+=""),y<i)return-1;if(y>i)return 1}return 0}},function(t,r,e){var n=e(126),g=e(94);t.exports=function(y){if(!g(y))return!1;var i=n(y);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"}},function(t,r,e){(function(n){var g=typeof n=="object"&&n&&n.Object===Object&&n;t.exports=g}).call(this,e(77))},function(t,r){var e=Function.prototype.toString;t.exports=function(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}},function(t,r,e){var n=e(515),g=e(522),y=e(524),i=e(525),k=e(526);function L($){var V=-1,z=$==null?0:$.length;for(this.clear();++V<z;){var re=$[V];this.set(re[0],re[1])}}L.prototype.clear=n,L.prototype.delete=g,L.prototype.get=y,L.prototype.has=i,L.prototype.set=k,t.exports=L},function(t,r,e){var n=e(269),g=e(204),y=Object.prototype.hasOwnProperty;t.exports=function(i,k,L){var $=i[k];y.call(i,k)&&g($,L)&&(L!==void 0||k in i)||n(i,k,L)}},function(t,r,e){var n=e(528);t.exports=function(g,y,i){y=="__proto__"&&n?n(g,y,{configurable:!0,enumerable:!0,value:i,writable:!0}):g[y]=i}},function(t,r,e){var n=e(530),g=e(531),y=e(183),i=e(271),k=e(306),L=e(534),$=Object.prototype.hasOwnProperty;t.exports=function(V,z){var re=y(V),oe=!re&&g(V),le=!re&&!oe&&i(V),ue=!re&&!oe&&!le&&L(V),ie=re||oe||le||ue,ae=ie?n(V.length,String):[],Fe=ae.length;for(var de in V)!z&&!$.call(V,de)||ie&&(de=="length"||le&&(de=="offset"||de=="parent")||ue&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||k(de,Fe))||ae.push(de);return ae}},function(t,r,e){(function(n){var g=e(59),y=e(533),i=r&&!r.nodeType&&r,k=i&&typeof n=="object"&&n&&!n.nodeType&&n,L=k&&k.exports===i?g.Buffer:void 0,$=(L?L.isBuffer:void 0)||y;n.exports=$}).call(this,e(150)(t))},function(t,r){t.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(t,r){t.exports=function(e,n){return function(g){return e(n(g))}}},function(t,r){t.exports=function(){return[]}},function(t,r,e){var n=e(276),g=e(277),y=e(188),i=e(274),k=Object.getOwnPropertySymbols?function(L){for(var $=[];L;)n($,y(L)),L=g(L);return $}:i;t.exports=k},function(t,r){t.exports=function(e,n){for(var g=-1,y=n.length,i=e.length;++g<y;)e[i+g]=n[g];return e}},function(t,r,e){var n=e(273)(Object.getPrototypeOf,Object);t.exports=n},function(t,r,e){var n=e(276),g=e(183);t.exports=function(y,i,k){var L=i(y);return g(y)?L:n(L,k(y))}},function(t,r,e){var n=e(91)(e(59),"Set");t.exports=n},function(t,r,e){var n=e(577);t.exports=n},function(t,r,e){var n=e(13),g=e(32),y=e(30),i=e(31),k=e(104),L=e(111),$=Function,V=n([].concat),z=n([].join),re={},oe=function(le,ue,ie){if(!i(re,ue)){for(var ae=[],Fe=0;Fe<ue;Fe++)ae[Fe]="a["+Fe+"]";re[ue]=$("C,a","return new C("+z(ae,",")+")")}return re[ue](le,ie)};t.exports=L?$.bind:function(le){var ue=g(this),ie=ue.prototype,ae=k(arguments,1),Fe=function(){var de=V(ae,k(arguments));return this instanceof Fe?oe(ue,de.length,de):ue.apply(le,de)};return y(ie)&&(Fe.prototype=ie),Fe}},function(t,r,e){var n=e(93),g=e(8),y=e(63),i=e(128),k=e(6),L=e(66),$=L.getGlobal(),V={},z=$.name||"_parent",re=[],oe=[];V.addMsgListener=function(ze){re.push(ze)};var le,ue,ie,ae,Fe=(le=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(ze){return ze=ze||"",le.test(ze)?RegExp.$1:"*"}),de=function(){var ze,jt,kt=n(ze=unescape($.name||"")).call(ze);if(kt&&g(kt).call(kt,"MSG|")===0){$.name="";var Et=L.string2object(kt.replace("MSG|",""),"|"),lr=(Et.origin||"").toLowerCase();lr&&lr!=="*"&&g(jt=location.href.toLowerCase()).call(jt,lr)!==0||function(tr){for(var or=0,dr=re.length;or<dr;or++)try{re[or].call(null,tr)}catch{}}({data:JSON.parse(Et.data||"null"),source:$.frames[Et.self]||Et.self,origin:Fe(Et.ref||(typeof document>"u"?"":document.referrer))})}},Ne=(ie=function(ze,jt){for(var kt=0,Et=ze.length;kt<Et;kt++)if(ze[kt]===jt)return!0;return!1},function(){if(oe.length){ue=[];for(var ze,jt=oe.length-1;jt>=0;jt--)ze=oe[jt],ie(ue,ze.w)||(ue.push(ze.w),y(oe).call(oe,jt,1),ze.w.name=ze.d);ue=null}}),Ve=V.startTimer=(ae=!1,function(){ae||(ae=!0,$.postMessage||(i(Ne,100),i(de,20)))});V.postMessage=function(ze){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L.fillUndef(jt,{origin:"*",source:z}),$.postMessage){var kt=jt.data;$.FormData||(kt=k(kt)),ze.postMessage(kt,jt.origin)}else{if(Ve(),L.isObject(jt)){var Et={};Et.origin=jt.origin||"",Et.ref=location.href,Et.self=jt.source,Et.data=k(jt.data),jt="MSG|"+L.object2string(Et,"|",!0)}oe.unshift({w:ze,d:escape(jt)})}},t.exports=V},function(t,r,e){var n=e(599);t.exports=n},function(t,r,e){var n=e(0),g={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},y={genResponseBody:function(i){return g[i=i||"file"]},parseResponse:function(i,k){n.notundef(i.size)&&(i.size=+i.size),n.notundef(i.w)&&(i.w=+i.w),n.notundef(i.h)&&(i.h=+i.h),n.notundef(i.dur)&&(i.dur=+i.dur);var L=i.orientation;if(n.notundef(L)&&(delete i.orientation,k&&(L==="right, top"||L==="left, bottom"))){var $=i.w;i.w=i.h,i.h=$}return i}};t.exports=y},function(t,r,e){var n=e(127),g=e(9),y=e(8),i=e(28),k=e(56),L=e(43),$=e(22),V=["Code","code","Message","message"],z=e(12),re=e(0),oe=e(35),le=e(624),ue=e(625),ie=e(109),ae=ie.EMResourceUploadWay,Fe=ie.EMExceptionState,de=e(192).abort,Ne=-1,Ve=re.supportFormData;function ze(kt,Et){var lr=this,tr=kt.uploadprogress,or=kt.uploaddone,dr=kt.beginupload;return{beginupload:typeof dr=="function"?function(cr){try{dr(cr,Et)}catch(nr){lr.logger.error("Upload::options.beginupload execute error",nr)}}:function(){},uploadprogress:typeof tr=="function"?function(cr){lr.reporterHook.emit("reporter/uploadUpdate",{transferred_size:cr.loaded});try{tr(cr,Et)}catch(nr){lr.logger.error("Upload::options.uploadprogress execute error",nr)}}:function(cr){lr.reporterHook.emit("reporter/uploadUpdate",{transferred_size:cr.loaded})},uploaddone:function(cr,nr){cr?lr.reporterHook.emit("reporter/uploadEnd",cr.code==="RequestAbortedError"||cr.code==="abort"?Fe.kCanceled:Fe.kFailed):lr.reporterHook.emit("reporter/uploadEnd",Fe.kSucceed);try{or(cr,nr,null,Et)}catch(ur){lr.logger.error("Upload::options.uploaddone execute error",ur)}}}}function jt(kt,Et,lr){var tr=this;tr.options=re.copy(kt),kt=tr.options,re.verifyOptions(kt,"url fileName"),re.verifyParamPresentJustOne(kt,"blob fileInput"),re.verifyCallback(kt,"beginupload uploadprogress uploaddone"),tr.reporterHook=Et.reporterHook,tr.logger=Et.logger,tr.protocol=Et,tr.message=lr;var or=ze.call(this,kt,lr),dr=or.beginupload,cr=or.uploadprogress,nr=or.uploaddone;tr.options.beginupload=dr,tr.options.uploadprogress=cr,tr.options.uploaddone=nr,kt.fileInput&&(kt.fileInput=re.verifyFileInput(kt.fileInput)),kt.type&&re.verifyFileType(kt.type),kt.timeout?re.verifyParamType("timeout",kt.timeout,"number"):kt.timeout=6e5,re.verifyFileUploadCallback(kt),kt.data={},kt.params&&re.merge(kt.data,kt.params);var ur,ar,gr=kt.fileName,pr=kt.fileInput;if(Ve){if(pr){if(!(ar=kt.type?re.filterFiles(pr.files,kt.type):g([]).call(pr.files,0))||!ar.length)return void kt.uploaddone(oe.newWrongFileTypeError("未读取到"+kt.type+"类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了"+kt.type+"类型的文件"));kt.data[gr]=ar[0],ur=pr.files[0].size}else if(kt.blob){var yr;if(kt.data[gr]=kt.blob,kt.type!=="file"&&kt.blob.type&&y(yr=kt.blob.type).call(yr,kt.type)===-1)return void kt.uploaddone(oe.newWrongFileTypeError("未读取到"+kt.type+"类型的文件, 请确保选择了"+kt.type+"类型的文件"));ur=kt.blob.size}if(tr.reporterHook.emit("reporter/uploadUpdate",{full_size:ur}),kt.maxSize&&ur>kt.maxSize)return void kt.uploaddone(oe.newFileTooLargeError("上传文件大小超过".concat(kt.maxSize,"限制")))}function Sr(){if(Ne+=1,tr.logger.info("Upload:enter aws upload"),ur){if(ur>z.chunkMaxSize)kt.uploaddone(oe.newFileTooLargeError("直传文件大小超过".concat(z.commonMaxSize,"限制")));else if(kt.s3Policy&&kt.s3Policy.uploadConfig&&kt.s3Policy.uploadConfig.retryPolicy){var mr=kt.s3Policy.uploadConfig.retryPolicy,_r={accessKeyId:kt.mixStoreToken.accessKeyId,secretAccessKey:kt.mixStoreToken.secretAccessKey,sessionToken:kt.mixStoreToken.sessionToken,region:kt.mixStoreToken.region,maxRetries:mr.retry},Nr=kt.s3,Pr={};if(kt.s3Policy&&kt.s3Policy.uploadConfig&&i(kt.s3Policy.uploadConfig.uploadUrl)&&kt.s3Policy.uploadConfig.uploadUrl.length>0){var sr=kt.s3Policy.uploadConfig.uploadUrl.length;Ne%=sr,Pr.endpoint=kt.s3Policy.uploadConfig.uploadUrl[Ne],Pr.s3ForcePathStyle=!0}var Ir=new Nr(Pr);Ir.config.update(_r);var Ar=tr.reporterHook.getNTPTime();Ir.config.systemClockOffset=Ar-k();var Cr=decodeURIComponent(kt.mixStoreToken.bucket),br=decodeURIComponent(kt.mixStoreToken.objectName),vr=kt.data[gr],Tr=Ir.upload({Bucket:Cr,Key:br,Body:vr,Metadata:{token:kt.mixStoreToken.token},ContentType:vr.type||"application/octet-stream"});Tr.on("httpUploadProgress",function(Br){var Lr=Math.floor(1e4*Br.loaded/Br.total)/100,Fr={docId:kt.docId,total:Br.total,loaded:Br.loaded,percentage:Lr,percentageText:Lr+"%"};kt.fileInput&&(Fr.fileInput=kt.fileInput),kt.blob&&(Fr.blob=kt.blob),kt.uploadprogress(Fr)}),Tr.send(function(Br,Lr){if(kt.errorHook({bucket:Cr,object:br},{provider:"s3"}),kt.docId&&(Lr.docId=kt.docId),Br&&Br.code==="RequestAbortedError")tr.logger.error("uploadFile:","api::s3:upload file abort",Br),tr.onError(Br);else if(Br){var Fr;kt.logger.error("error:","api::s3:upload file failed",Br);var qr=kt.providers[(y(Fr=kt.providers).call(Fr,kt.curProvider)+1)%kt.providers.length];mr.retryNext&&qr?(tr.addCircuitTimer(kt,qr),qr===1&&wr()):tr.onError(Lr),kt.errorHook(Br,{provider:"s3"})}else{var Vr=tr.options.s3Policy.cdnSchema;Vr=(Vr=Vr.replace("{cdnDomain}",tr.options.s3Policy.dlcdn)).replace("{objectName}",Lr.Key),kt.uploaddone(null,{size:vr.size,name:vr.name,url:Vr,ext:vr.name&&vr.name.split(".")[1]||"unknown",_url_safe:kt.mixStoreToken.shortUrl,isS3:!0}),kt.logger.info("s3 Upload done: fileObj is",{size:vr.size,name:vr.name,url:Vr,ext:vr.name&&vr.name.split(".")[1]||"unknown",_url_safe:kt.mixStoreToken.shortUrl,isS3:!0})}}),typeof kt.beginupload=="function"&&kt.beginupload(Tr)}}else kt.uploaddone(oe.newFileTooLargeError("Browser version is too low"))}function wr(){if(tr.logger.info("Upload:enter nos upload"),ur&&!kt.commonUpload)return tr.logger.info("Upload:use chunk upload, url ".concat(kt.url)),ur>z.chunkMaxSize?void kt.uploaddone(oe.newFileTooLargeError("直传文件大小超过".concat(z.chunkMaxSize,"限制"))):void(tr.sn=ue(kt,gr,tr,-1));if(tr.logger.info("Upload:use common upload, url ".concat(kt.url)),ur&&ur>z.commonMaxSize)kt.uploaddone(oe.newFileTooLargeError("普通上传文件大小超过".concat(z.commonMaxSize,"限制")));else{ur||(re.dataset(pr,"name",gr),kt.data.input=pr);var mr=0,_r={data:kt.data,onaftersend:function(){kt.beginupload(tr,tr.message)},onuploading:function(Nr){if(mr!==100){var Pr=Math.floor(1e4*Nr.loaded/Nr.total)/100;L(Pr)>=100&&(mr=Pr=100);var sr={docId:kt.docId,total:Nr.total,loaded:Nr.loaded,percentage:Pr,percentageText:Pr+"%"};kt.fileInput&&(sr.fileInput=kt.fileInput),kt.blob&&(sr.blob=kt.blob),kt.uploadprogress(sr)}},onload:function(Nr){var Pr;if(kt.docId&&(Nr.docId=kt.docId),!Nr.Error)return kt.uploaddone(null,Nr),void kt.logger.info("nos Upload done: fileObj is",Nr);if(kt.mixEnable&&kt.curProvider===1){var sr=kt.nosPolicy.uploadConfig.retryPolicy,Ir=kt.providers[(y(Pr=kt.providers).call(Pr,kt.curProvider)+1)%kt.providers.length];sr.retryNext&&Ir?(tr.addCircuitTimer(kt,Ir),Ir===2&&kt.getMixStoreToken(2,function(Ar){kt.mixStoreToken=Ar,Sr()})):tr.onError(Nr)}else tr.onError(Nr)},onerror:function(Nr){var Pr;if(kt.mixEnable&&kt.curProvider===1){var sr,Ir=kt.nosPolicy.uploadConfig.retryPolicy,Ar=kt.providers[(y(sr=kt.providers).call(sr,kt.curProvider)+1)%kt.providers.length];if(Ir.retryNext&&Ar)tr.addCircuitTimer(kt,Ar),Ar===2&&kt.getMixStoreToken(2,function(Cr){kt.mixStoreToken=Cr,Sr()});else try{Pr=Nr.result?JSON.parse(Nr.result):Nr,tr.onError(Pr)}catch{kt.uploaddone(new oe(Nr.message,Nr.code),tr.options)}}else try{Pr=Nr.result?JSON.parse(Nr.result):Nr,tr.onError(Pr)}catch{kt.uploaddone(new oe(Nr.message,Nr.code),tr.options)}kt.errorHook(Nr,{provider:"nos"})}};Ve||(_r.mode="iframe"),_r.putFileAtEnd=!0,tr.sn=le(kt.url,_r)}}if(kt.mixEnable&&kt.curProvider===2){var Mr=tr.options.s3Policy.cdnSchema;Mr=Mr.replace("{cdnDomain}",tr.options.s3Policy.dlcdn),tr.reporterHook.emit("reporter/uploadUpdate",{remote_addr:Mr,operation_type:ae.kResourceUploadWayAWSPlugin}),Sr()}else kt.mixEnable&&kt.curProvider===1?(tr.reporterHook.emit("reporter/uploadUpdate",{remote_addr:kt.url,operation_type:ae.kResourceUploadWayNOSPlugin}),wr()):(tr.reporterHook.emit("reporter/uploadUpdate",{remote_addr:kt.url,operation_type:ae.kResourceUploadWayNOS}),wr())}jt.prototype.addCircuitTimer=function(kt,Et){var lr=this;if(kt.curProvider=Et,kt.s3Policy&&kt.nosPolicy){var tr=kt[kt.curProvider===1?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!tr||tr===0)return;lr.circuitTimer&&clearTimeout(lr.circuitTimer),lr.circuitTimer=$(function(){kt.curProvider=kt.providers[0],lr.circuitTimer=void 0},1e3*tr)}},jt.prototype.onError=function(){var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=this,lr=Et.options,tr=kt.Error||kt||{},or=tr.Code,dr=tr.code,cr=tr.Message,nr=tr.message,ur=n(tr,V),ar=or||dr||"unknown",gr=cr||nr||"未知错误";lr.uploaddone(new oe(gr,ar,ur))},jt.prototype.abort=function(){de(this.sn)},t.exports=jt},function(t,r,e){var n=e(626);t.exports=n},function(t,r,e){t.exports=e(641)},function(t,r,e){var n=e(644);t.exports=n},function(t,r,e){var n=e(8),g=e(0),y={fromDataURL:function(i){var k,L,$=g.getGlobal();L=n(k=i.split(",")[0]).call(k,"base64")>=0?$.atob(i.split(",")[1]):$.decodeURIComponent(i.split(",")[1]);for(var V=i.split(",")[0].split(":")[1].split(";")[0],z=new Uint8Array(L.length),re=0;re<L.length;re++)z[re]=L.charCodeAt(re);return new $.Blob([z],{type:V})}};t.exports=y},function(t,r,e){var n=e(5),g=e(11),y=e(10),i=e(0),k={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},L={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};function $(V){i.verifyOptions(V,"type","image::ImageOp"),i.verifyParamValid("type",V.type,$.validTypes,"image::ImageOp"),i.merge(this,V),this.type=k[V.type]}$.validTypes=n(k),$.reverse=function(V){var z=i.copy(V);return z.type=L[z.type],z},$.reverseImageOps=function(V){return g(V).call(V,function(z){return y($).call($,z)})},t.exports=$},function(t,r,e){var n=e(2),g=e(5),y={1:"ROOM_CLOSE",2:"ROOM_JOIN",3:"INVITE",4:"CANCEL_INVITE",5:"REJECT",6:"ACCEPT",7:"LEAVE",8:"CONTROL"},i={1:"accid",2:"uid",3:"createTime",4:"expireTime",5:"web_uid"},k={10404:"ROOM_NOT_EXISTS",10405:"ROOM_HAS_EXISTS",10406:"ROOM_MEMBER_NOT_EXISTS",10407:"ROOM_MEMBER_HAS_EXISTS",10408:"INVITE_NOT_EXISTS",10409:"INVITE_HAS_REJECT",10410:"INVITE_HAS_ACCEPT",10201:"PEER_NIM_OFFLINE",10202:"PEER_PUSH_OFFLINE",10419:"ROOM_MEMBER_EXCEED",10420:"ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT",10417:"UID_CONFLICT"};t.exports={parseAvSignalType:function(L){return y[L]||L},parseAvSignalMember:function(L){var $,V={};return n($=g(L)).call($,function(z){V[i[z]]=L[z]}),V},parseAvSignalError:function(L){return L.message=k[L.code]||L.message||L,L}}},function(t,r,e){t.exports=e(662)},function(t,r,e){t.exports=e(673)},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */function getGlobal(){return typeof window<"u"?window:typeof self<"u"?self:global!==void 0?global:{}}var root=getGlobal(),io=module.exports;root.location===void 0&&(root.location=null),root.io?module&&(module.exports=io=root.io):root.io=io,function(){(function(t,r){var e=t;e.version="0.9.11",e.protocol=1,e.transports=[],e.j=[],e.sockets={},e.connect=function(n,g){var y,i,k=e.util.parseUri(n);r&&r.location&&(k.protocol=k.protocol||r.location.protocol.slice(0,-1),k.host=k.host||(r.document?r.document.domain:r.location.hostname),k.port=k.port||r.location.port),y=e.util.uniqueUri(k);var L={host:k.ipv6uri?"["+k.host+"]":k.host,secure:k.protocol==="https",port:k.port||(k.protocol==="https"?443:80),query:k.query||""};return e.util.merge(L,g),!L["force new connection"]&&e.sockets[y]||(i=new e.Socket(L)),!L["force new connection"]&&i&&(e.sockets[y]=i),(i=i||e.sockets[y]).of(k.path.length>1?k.path:"")}})(module.exports,root),function(t,r){var e=t.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(i){var k=i,L=i.indexOf("["),$=i.indexOf("]");L!=-1&&$!=-1&&(i=i.substring(0,L)+i.substring(L,$).replace(/:/g,";")+i.substring($,i.length));for(var V=n.exec(i||""),z={},re=14;re--;)z[g[re]]=V[re]||"";return L!=-1&&$!=-1&&(z.source=k,z.host=z.host.substring(1,z.host.length-1).replace(/;/g,":"),z.authority=z.authority.replace("[","").replace("]","").replace(/;/g,":"),z.ipv6uri=!0),z},e.uniqueUri=function(i){var k=i.protocol,L=i.host,$=i.port;return"document"in r&&r.document?(L=L||document.domain,$=$||(k=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(L=L||"localhost",$||k!="https"||($=443)),(k||"http")+"://"+L+":"+($||80)},e.query=function(i,k){var L=e.chunkQuery(i||""),$=[];for(var V in e.merge(L,e.chunkQuery(k||"")),L)L.hasOwnProperty(V)&&$.push(V+"="+L[V]);return $.length?"?"+$.join("&"):""},e.chunkQuery=function(i){for(var k,L={},$=i.split("&"),V=0,z=$.length;V<z;++V)(k=$[V].split("="))[0]&&(L[k[0]]=k[1]);return L};var y=!1;e.load=function(i){if(typeof document<"u"&&document&&document.readyState==="complete"||y)return i();e.on(r,"load",i,!1)},e.on=function(i,k,L,$){i.attachEvent?i.attachEvent("on"+k,L):i.addEventListener&&i.addEventListener(k,L,$)},e.request=function(i){if(i&&typeof XDomainRequest<"u"&&!e.ua.hasCORS)return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!i||e.ua.hasCORS))return new XMLHttpRequest;if(!i)try{return new root[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},root!==void 0&&e.load(function(){y=!0}),e.defer=function(i){if(!e.ua.webkit||typeof importScripts<"u")return i();e.load(function(){setTimeout(i,100)})},e.merge=function(i,k,L,$){var V,z=$||[],re=L===void 0?2:L;for(V in k)k.hasOwnProperty(V)&&e.indexOf(z,V)<0&&(typeof i[V]=="object"&&re?e.merge(i[V],k[V],re-1,z):(i[V]=k[V],z.push(k[V])));return i},e.mixin=function(i,k){e.merge(i.prototype,k.prototype)},e.inherit=function(i,k){function L(){}L.prototype=k.prototype,i.prototype=new L},e.isArray=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},e.intersect=function(i,k){for(var L=[],$=i.length>k.length?i:k,V=i.length>k.length?k:i,z=0,re=V.length;z<re;z++)~e.indexOf($,V[z])&&L.push(V[z]);return L},e.indexOf=function(i,k,L){var $=i.length;for(L=L<0?L+$<0?0:L+$:L||0;L<$&&i[L]!==k;L++);return $<=L?-1:L},e.toArray=function(i){for(var k=[],L=0,$=i.length;L<$;L++)k.push(i[L]);return k},e.ua={},e.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var i=new XMLHttpRequest}catch{return!1}return i.withCredentials!=null}(),e.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent),e.ua.iDevice=typeof navigator<"u"&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(io!==void 0?io:module.exports,root),function(t,r){function e(){}t.EventEmitter=e,e.prototype.on=function(n,g){return this.$events||(this.$events={}),this.$events[n]?r.util.isArray(this.$events[n])?this.$events[n].push(g):this.$events[n]=[this.$events[n],g]:this.$events[n]=g,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(n,g){var y=this;function i(){y.removeListener(n,i),g.apply(this,arguments)}return i.listener=g,this.on(n,i),this},e.prototype.removeListener=function(n,g){if(this.$events&&this.$events[n]){var y=this.$events[n];if(r.util.isArray(y)){for(var i=-1,k=0,L=y.length;k<L;k++)if(y[k]===g||y[k].listener&&y[k].listener===g){i=k;break}if(i<0)return this;y.splice(i,1),y.length||delete this.$events[n]}else(y===g||y.listener&&y.listener===g)&&delete this.$events[n]}return this},e.prototype.removeAllListeners=function(n){return n===void 0?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)},e.prototype.removeAllListenersX=function(n){if(n===void 0)return this.$events={},this;for(let g in this.$events)g!==n&&(this.$events[g]=null);return this},e.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),r.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]},e.prototype.emit=function(n){if(!this.$events)return!1;var g=this.$events[n];if(!g)return!1;var y=Array.prototype.slice.call(arguments,1);if(typeof g=="function")g.apply(this,y);else{if(!r.util.isArray(g))return!1;for(var i=g.slice(),k=0,L=i.length;k<L;k++)i[k].apply(this,y)}return!0}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,r){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(r){var e=meta[r];return typeof e=="string"?e:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,r){var e,n,g,y,i,k=gap,L=r[t];switch(L instanceof Date&&(L=date(t)),typeof rep=="function"&&(L=rep.call(r,t,L)),typeof L){case"string":return quote(L);case"number":return isFinite(L)?String(L):"null";case"boolean":case"null":return String(L);case"object":if(!L)return"null";if(gap+=indent,i=[],Object.prototype.toString.apply(L)==="[object Array]"){for(y=L.length,e=0;e<y;e+=1)i[e]=str(e,L)||"null";return g=i.length===0?"[]":gap?`[
`+gap+i.join(`,
`+gap)+`
`+k+"]":"["+i.join(",")+"]",gap=k,g}if(rep&&typeof rep=="object")for(y=rep.length,e=0;e<y;e+=1)typeof rep[e]=="string"&&(g=str(n=rep[e],L))&&i.push(quote(n)+(gap?": ":":")+g);else for(n in L)Object.prototype.hasOwnProperty.call(L,n)&&(g=str(n,L))&&i.push(quote(n)+(gap?": ":":")+g);return g=i.length===0?"{}":gap?`{
`+gap+i.join(`,
`+gap)+`
`+k+"}":"{"+i.join(",")+"}",gap=k,g}}JSON.stringify=function(t,r,e){var n;if(gap="",indent="",typeof e=="number")for(n=0;n<e;n+=1)indent+=" ";else typeof e=="string"&&(indent=e);if(rep=r,r&&typeof r!="function"&&(typeof r!="object"||typeof r.length!="number"))throw new Error("socket.io:: replacer cannot JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){var j;function walk(t,r){var e,n,g=t[r];if(g&&typeof g=="object")for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&((n=walk(g,e))!==void 0?g[e]=n:delete g[e]);return reviver.call(t,r,g)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("socket.io:: reviver cannot JSON.parse")}}(io!==void 0?io:module.exports,typeof JSON<"u"?JSON:void 0),function(t,r){var e=t.parser={},n=e.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],g=e.reasons=["transport not supported","client not handshaken","unauthorized"],y=e.advice=["reconnect"],i=r.JSON,k=r.util.indexOf;e.encodePacket=function($){var V=k(n,$.type),z=$.id||"",re=$.endpoint||"",oe=$.ack,le=null;switch($.type){case"error":var ue=$.reason?k(g,$.reason):"",ie=$.advice?k(y,$.advice):"";ue===""&&ie===""||(le=ue+(ie!==""?"+"+ie:""));break;case"message":$.data!==""&&(le=$.data);break;case"event":var ae={name:$.name};$.args&&$.args.length&&(ae.args=$.args),le=i.stringify(ae);break;case"json":le=i.stringify($.data);break;case"connect":$.qs&&(le=$.qs);break;case"ack":le=$.ackId+($.args&&$.args.length?"+"+i.stringify($.args):"")}var Fe=[V,z+(oe=="data"?"+":""),re];return le!=null&&Fe.push(le),Fe.join(":")},e.encodePayload=function($){var V="";if($.length==1)return $[0];for(var z=0,re=$.length;z<re;z++)V+="�"+$[z].length+"�"+$[z];return V};var L=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;e.decodePacket=function($){if(!(re=$.match(L)))return{};var V=re[2]||"",z=($=re[5]||"",{type:n[re[1]],endpoint:re[4]||""});switch(V&&(z.id=V,re[3]?z.ack="data":z.ack=!0),z.type){case"error":var re=$.split("+");z.reason=g[re[0]]||"",z.advice=y[re[1]]||"";break;case"message":z.data=$||"";break;case"event":try{var oe=i.parse($);z.name=oe.name,z.args=oe.args}catch{}z.args=z.args||[];break;case"json":try{z.data=i.parse($)}catch{}break;case"connect":z.qs=$||"";break;case"ack":if((re=$.match(/^([0-9]+)(\+)?(.*)/))&&(z.ackId=re[1],z.args=[],re[3]))try{z.args=re[3]?i.parse(re[3]):[]}catch{}}return z},e.decodePayload=function($){var V=function(ie,ae){for(var Fe=0,de=ie;de<ae.length;de++){if(ae.charAt(de)=="�")return Fe;Fe++}return Fe};if($.charAt(0)=="�"){for(var z=[],re=1,oe="";re<$.length;re++)if($.charAt(re)=="�"){var le=$.substr(re+1).substr(0,oe);if($.charAt(re+1+Number(oe))!="�"&&re+1+Number(oe)!=$.length){var ue=Number(oe);l=V(re+ue+1,$),le=$.substr(re+1).substr(0,ue+l),re+=l}z.push(e.decodePacket(le)),re+=Number(oe)+1,oe=""}else oe+=$.charAt(re);return z}return[e.decodePacket($)]}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r){function e(n,g){this.socket=n,this.sessid=g}t.Transport=e,r.util.mixin(e,r.EventEmitter),e.prototype.heartbeats=function(){return!0},e.prototype.onData=function(n){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""){var g=r.parser.decodePayload(n);if(g&&g.length)for(var y=0,i=g.length;y<i;y++)this.onPacket(g[y])}return this},e.prototype.onPacket=function(n){return this.socket.setHeartbeatTimeout(),n.type=="heartbeat"?this.onHeartbeat():(n.type=="connect"&&n.endpoint==""&&this.onConnect(),n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(n),this)},e.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.socket&&n.socket.publish("info","socket disconnected by setCloseTimeout"),n.onDisconnect("disconnected by setCloseTimeout of Transport")},this.socket.closeTimeout)}},e.prototype.onDisconnect=function(n){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket?(this.socket.transport===this?this.socket.onDisconnect(n):this.socket.setBuffer(!1),this):this},e.prototype.onConnect=function(){return this.socket.onConnect(),this},e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},e.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},e.prototype.packet=function(n){this.send(r.parser.encodePacket(n))},e.prototype.onHeartbeat=function(n){this.packet({type:"heartbeat"})},e.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},e.prototype.onClose=function(){this.socket.publish("info","transport onClose"),this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect("disconnected by onClose of Transport"),this.onDisconnectDone instanceof Function&&this.onDisconnectDone(null),this.onConnectionOver instanceof Function&&this.onConnectionOver(null)},e.prototype.onDisconnectDone=function(){},e.prototype.onConnectionOver=function(){},e.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+r.protocol+"/"+this.name+"/"+this.sessid},e.prototype.ready=function(n,g){g.call(this)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(y){if(this.options={port:80,secure:!1,document:"document"in e&&document,resource:"socket.io",transports:y.transports||r.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,needToXHR:!0,manualFlush:!1},r.util.merge(this.options,y),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||r.util.ua.hasCORS)){var i=this;r.util.on(e,"beforeunload",function(){i.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function g(){}t.Socket=n,r.util.mixin(n,r.EventEmitter),n.prototype.of=function(y){return this.namespaces[y]||(this.namespaces[y]=new r.SocketNamespace(this,y),y!==""&&this.namespaces[y].packet({type:"connect"})),this.namespaces[y]},n.prototype.publish=function(){var y;for(var i in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(i)&&(y=this.of(i)).$emit.apply(y,arguments)},n.prototype.guid=function(){var y=root.crypto||root.msCrypto;if(y){var i=new Uint8Array(16);y.getRandomValues(i),i[6]&=15,i[6]|=64,i[8]&=63,i[8]|=128;for(var k="",L=0;L<i.length;L++){var $=i[L].toString(16);$.length===1&&($="0"+$),k+=$}return k.substring(0,8)+"-"+k.substring(8,12)+"-"+k.substring(12,16)+"-"+k.substring(16,20)+"-"+k.substring(20)}},n.prototype.handshake=function(y){var i=this,k=this.options;if(!this.options.needToXHR&&this.options.transports.length===1&&this.options.transports[0]==="websocket"){var L=this.guid();if(L)return void setTimeout(function(){i.publish("info","xhr, skip and get:"+L),y.apply(null,[L,"90","60","websocket"])},0)}function $(le){le instanceof Error?(i.connecting=!1,i.publish("info","xhr, status:200, but got error:",le),i.onError("xhr, status:200, but got error:"+le.message,le)):y.apply(null,le.split(":"))}var V=["http"+(k.secure?"s":"")+":/",k.host+":"+k.port,k.resource,r.protocol,r.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!r.util.ua.hasCORS&&typeof document<"u"&&document){var z=document.getElementsByTagName("script")[0],re=document.createElement("script");re.src=V+"&jsonp="+r.j.length,re.onreadystatechange=function(){this.readyState=="loaded"&&re.parentNode&&(re.parentNode.removeChild(re),i.connecting=!1,i.publish("info","xhr, jsonp:Server down or port not open"),!i.reconnecting&&i.onError("Server down or port not open",new Error("xhr, jsonp:server down or port not open")),i.publish("handshake_failed"))},z.parentNode.insertBefore(re,z),r.j.push(function(le){$(le),re.parentNode.removeChild(re)})}else{var oe=r.util.request();oe.open("GET",V,!0),oe.timeout=8e3,this.isXDomain()&&(oe.withCredentials=!0),oe.onreadystatechange=function(){i.publish("info","xhr, readyState:"+oe.readyState+" status:"+oe.status),oe.readyState==4&&(i.publish("info","xhr, responseText:"+oe.responseText),oe.onreadystatechange=g,oe.status==200?$(oe.responseText):oe.status==403?(i.connecting=!1,i.onError(oe.responseText,new Error("xhr, status:403"+oe.responseText)),i.publish("handshake_failed")):(i.connecting=!1,!i.reconnecting&&i.onError(oe.responseText,new Error("xhr, status:"+oe.status+" "+oe.responseText)),i.publish("handshake_failed")))},oe.ontimeout=function(le){i.publish("info","xhr, timeout"),i.connecting=!1,!i.reconnecting&&i.onError(oe.responseText,new Error("xhr, timeout")),i.publish("handshake_failed")},oe.send(null)}},n.prototype.connect=function(y){if(this.connecting)return this;var i=this;return i.connecting=!0,this.handshake(function(k,L,$,V){i.publish("info","SocketIO handshake parameter: sid: "+k+", transports: "+V+", close: "+$+", heartbeat: "+L),i.sessionid=k,i.closeTimeout=1e3*$,i.heartbeatTimeout=1e3*L,i.transports||(i.transports=i.origTransports=V?r.util.intersect(V.split(","),i.options.transports):i.options.transports),i.setHeartbeatTimeout(),i.once("connect",function(){i.publish("info","tcp, clear connect timeout due to recv connect event"),clearTimeout(i.connectTimeoutTimer),i.connectTimeoutTimer=null,y&&typeof y=="function"&&y()}),i.doConnect()}),this},n.prototype.doConnect=function(){var y=this;if(y.transport&&y.transport.clearTimeouts(),y.transport=y.getTransport(y.transports),!y.transport)return y.publish("connect_failed");y.transport.ready(y,function(){y.connecting=!0,y.publish("info","tcp, connecting, transport ready in "+y.transport.name),y.publish("connecting",y.transport.name),y.transport.open(),y.options["connect timeout"]&&(y.connectTimeoutTimer&&clearTimeout(y.connectTimeoutTimer),y.publish("info","set new connect timeout"),y.connectTimeoutTimer=setTimeout(function(){y.publish("info","trigger connect timeout due to setTimeout"),y.transport.close(),y.tryNextTransport()},y.options["connect timeout"]))})},n.prototype.getTransport=function(y){const i=this;for(var k,L=y||this.transports,$=0;k=L[$];$++)if(i.publish("info","check transport: "+k),r.Transport[k]&&r.Transport[k].check(this)&&(!this.isXDomain()||r.Transport[k].xdomainCheck(this)))return i.publish("info","use transport: "+k),new r.Transport[k](this,this.sessionid);return null},n.prototype.tryNextTransport=function(){if(!this.connected&&(this.connecting=!1,this.options["try multiple transports"])){for(var y=this.transports;y.length>0&&y.splice(0,1)[0]!=this.transport.name;);y.length?this.doConnect():this.publish("connect_failed")}},n.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var y=this;this.heartbeatTimeoutTimer=setTimeout(function(){y.transport&&(y.publish("info","transport closed by setHeartbeatTimeout"),y.transport.onClose())},this.heartbeatTimeout)}},n.prototype.packet=function(y){return this.connected&&!this.doBuffer?this.transport.packet(y):this.buffer.push(y),this},n.prototype.setBuffer=function(y){this.doBuffer=y,!y&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},n.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},n.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.publish("info","socket disconnected by IM SDK"),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var y=r.util.request(),i=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,r.protocol,"",this.sessionid].join("/")+"/?disconnect=1";y.open("GET",i,!1),y.send(null),this.publish("info","socket disconnected by disconnectSync before page unload"),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var y=e&&e.location||{},i=y.port||(y.protocol=="https:"?443:80);return this.options.host!==y.hostname||this.options.port!=i},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.publish("info","tcp, websocket onOpen"),this.open=!0},n.prototype.onClose=function(){this.publish("info","tcp, websocket onClose"),this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},n.prototype.onPacket=function(y){this.of(y.endpoint).onPacket(y)},n.prototype.onError=function(y,i){y&&y.advice&&y.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",y&&y.reason?y.reason:y,i)},n.prototype.onDisconnect=function(y){var i=this.connected,k=this.connecting;this.publish("info",y?"tcp, onDisconnect reason:"+y:"tcp, onDisconnect"),this.connected=!1,this.connecting=!1,this.open=!1,(i||k)&&this.transport&&(this.transport.close(),this.transport.clearTimeouts(),i&&(this.publish("disconnect",y),y!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),k&&(this.connectTimeoutTimer&&(this.publish("info","clear connect timeout due to onDisconnect"),clearTimeout(this.connectTimeoutTimer)),this.tryNextTransport()))},n.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var y=this,i=this.options["max reconnection attempts"],k=this.options["try multiple transports"],L=this.options["reconnection limit"];function $(){if(y.connected){for(var z in y.namespaces)y.namespaces.hasOwnProperty(z)&&z!==""&&y.namespaces[z].packet({type:"connect"});y.publish("reconnect",y.transport.name,y.reconnectionAttempts)}clearTimeout(y.reconnectionTimer),y.removeListener("connect_failed",V),y.removeListener("connect",V),y.reconnecting=!1,delete y.reconnectionAttempts,delete y.reconnectionDelay,delete y.reconnectionTimer,delete y.redoTransports,y.options["try multiple transports"]=k}function V(){if(y.reconnecting)return y.connected?$():y.connecting&&y.reconnecting?y.reconnectionTimer=setTimeout(V,1e3):void(y.reconnectionAttempts++>=i?y.redoTransports?(y.publish("reconnect_failed"),$()):(y.on("connect_failed",V),y.options["try multiple transports"]=!0,y.transports=y.origTransports,y.transport=y.getTransport(),y.redoTransports=!0,y.connect()):(y.reconnectionDelay<L&&(y.reconnectionDelay*=2),y.connect(),y.publish("reconnecting",y.reconnectionDelay,y.reconnectionAttempts),y.reconnectionTimer=setTimeout(V,y.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(V,this.reconnectionDelay),this.on("connect",V)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r){function e(g,y){this.socket=g,this.name=y||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(g,y){this.namespace=g,this.name=y}t.SocketNamespace=e,r.util.mixin(e,r.EventEmitter),e.prototype.$emit=r.EventEmitter.prototype.emit,e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},e.prototype.packet=function(g){return g.endpoint=this.name,this.socket.packet(g),this.flags={},this},e.prototype.send=function(g,y){var i={type:this.flags.json?"json":"message",data:g};return typeof y=="function"&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=y),this.packet(i)},e.prototype.emit=function(g){var y=Array.prototype.slice.call(arguments,1),i=y[y.length-1],k={type:"event",name:g};return typeof i=="function"&&(k.id=++this.ackPackets,k.ack="data",this.acks[k.id]=i,y=y.slice(0,y.length-1)),k.args=y,this.packet(k)},e.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},e.prototype.onPacket=function(g){var y=this;function i(){y.packet({type:"ack",args:r.util.toArray(arguments),ackId:g.id})}switch(g.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?(this.socket.publish("info","socket disconnected by SocketNameSpace.onPacket"),this.socket.onDisconnect(g.reason||"booted")):this.$emit("disconnect",g.reason);break;case"message":case"json":var k=["message",g.data];g.ack=="data"?k.push(i):g.ack&&this.packet({type:"ack",ackId:g.id}),this.$emit.apply(this,k);break;case"event":k=[g.name].concat(g.args),g.ack=="data"&&k.push(i),this.$emit.apply(this,k);break;case"ack":this.acks[g.ackId]&&(this.acks[g.ackId].apply(this,g.args),delete this.acks[g.ackId]);break;case"error":this.socket.publish("info","packet, type:error",g),g.advice?this.socket.onError(g,new Error("packet, type:error and advice is "+g.advice)):g.reason==="unauthorized"?this.$emit("connect_failed",g.reason):this.$emit("error",g.reason,new Error("packet, type:error and reason is "+g.reason))}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(g){r.Transport.apply(this,arguments)}t.websocket=n,r.util.inherit(n,r.Transport),n.prototype.name="websocket",n.prototype.open=function(){var g,y=r.util.query(this.socket.options.query),i=this;return g||(g=e.MozWebSocket||e.WebSocket),this.websocket=new g(this.prepareUrl()+y),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(k){i.onData(k.data)},this.websocket.onclose=function(k){i.socket.setBuffer(!0),i.socket.publish("websocketOnclose",k),i.onClose()},this.websocket.onerror=function(k){var L="";k&&k.message?L=k.message:k.target&&(L=k.target.readyState?"websocket, readyState:"+k.target.readyState:"websocket event"),i.onError(L,k)},this},r.util.ua.iDevice?n.prototype.send=function(g){var y=this;return setTimeout(function(){y.websocket.send(g)},0),this}:n.prototype.send=function(g){return this.websocket.send(g),this},n.prototype.payload=function(g){for(var y=0,i=g.length;y<i;y++)this.packet(g[y]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(g,y){this.socket.publish("info","tcp, onError",g,y),this.socket.onError(g,y)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in e&&!("__addTask"in WebSocket)||"MozWebSocket"in e},n.xdomainCheck=function(){return!0},r.transports.push("websocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(y){y&&(r.Transport.apply(this,arguments),this.sendBuffer=[])}function g(){}t.XHR=n,r.util.inherit(n,r.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(y){for(var i=[],k=0,L=y.length;k<L;k++)i.push(r.parser.encodePacket(y[k]));this.send(r.parser.encodePayload(i))},n.prototype.send=function(y){return this.post(y),this},n.prototype.post=function(y){var i=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),e.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=g,i.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=g,i.posting=!1,this.status==200?i.socket.setBuffer(!1):i.onClose())},this.sendXHR.send(y)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(y){var i=r.util.request(this.socket.isXDomain()),k=r.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(y||"GET",this.prepareUrl()+k,!0),y=="POST")try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch{}return i},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(y,i){try{var k=r.util.request(i),L=e.XDomainRequest&&k instanceof XDomainRequest,$=y&&y.options&&y.options.secure?"https:":"http:",V=e.location&&$!=e.location.protocol;if(k&&(!L||!V))return!0}catch{}return!1},n.xdomainCheck=function(y){return n.check(y,!0)}}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(){r.Transport.XHR.apply(this,arguments)}function g(){}t["xhr-polling"]=n,r.util.inherit(n,r.Transport.XHR),r.util.merge(n,r.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){return r.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){if(this.isOpen){var y=this;this.xhr=this.request(),e.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=g,this.onerror=g,y.retryCounter=1,y.onData(this.responseText),y.get()},this.xhr.onerror=function(){y.retryCounter++,!y.retryCounter||y.retryCounter>3?y.onClose():y.get()}):this.xhr.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=g,this.status==200?(y.onData(this.responseText),y.get()):y.onClose())},this.xhr.send(null)}},n.prototype.onClose=function(){if(r.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=g;try{this.xhr.abort()}catch{}this.xhr=null}},n.prototype.ready=function(y,i){var k=this;r.util.defer(function(){i.call(k)})},r.transports.push("xhr-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return io}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__===void 0||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(77),__webpack_require__(150)(module))},function(t,r,e){var n=e(10),g=e(9),y=e(679),i=e(684),k=e(207),L=e(697),$=Math.pow(2,32);function V(re){for(var oe=[],le=re.length,ue=0;ue<le;){var ie=y(re).call(re,ue),ae=0,Fe=0;for(ie<=127?(ae=0,Fe=0):ie<=2047?(ae=6,Fe=192):ie<=65535?(ae=12,Fe=224):ie<=2097151&&(ae=18,Fe=240),oe.push(Fe|ie>>ae),ae-=6;ae>=0;)oe.push(128|ie>>ae&63),ae-=6;ue+=ie>=65536?2:1}return oe}function z(re){for(var oe="",le=0;le<re.length;){var ue=re[le],ie=0,ae=0;if(ue<=127?(ie=0,ae=255&ue):ue<=223?(ie=1,ae=31&ue):ue<=239?(ie=2,ae=15&ue):ue<=244&&(ie=3,ae=7&ue),re.length-le-ie>0)for(var Fe=0;Fe<ie;)ae=ae<<6|63&(ue=re[le+Fe+1]),Fe+=1;else ae=65533,ie=re.length-le;oe+=i(ae),le+=ie+1}return oe}t.exports={setBigUint64:function(re){var oe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],le=new Uint8Array(8),ue=new DataView(le.buffer),ie=Number(re>$-1?re/$:0),ae=Number(4294967295&re),Fe=oe?[4,0]:[0,4],de=k(Fe,2),Ne=de[0],Ve=de[1];return ue.setUint32(Ne,ie,oe),ue.setUint32(Ve,ae,oe),le},getBigUint64:function(re){var oe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],le=new DataView(re.buffer),ue=oe?[4,0]:[0,4],ie=k(ue,2),ae=ie[0],Fe=ie[1],de=le.getUint32(ae,oe),Ne=le.getUint32(Fe,oe);return de>0?de*$+Ne:Ne},varintToBytes:function(re){var oe=new Uint8Array(4),le=new DataView(oe.buffer),ue=0;do{var ie=127&re;(re>>=7)>0&&(ie|=128),le.setUint8(ue++,ie)}while(re>0);return g(oe).call(oe,0,ue)},setBigUint64ForNumberOverflow:function(re){var oe,le,ue=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ie=new Uint8Array(8),ae=new DataView(ie.buffer),Fe=n(oe=L(re).divide($).number).call(oe).join(""),de=n(le=L(re).mod($).number).call(le).join(""),Ne=Number(Fe),Ve=Number(de),ze=ue?[4,0]:[0,4],jt=k(ze,2),kt=jt[0],Et=jt[1];return ae.setUint32(kt,Ne,ue),ae.setUint32(Et,Ve,ue),ie},textDecoder:z,textEncoder:V,encodeText:function(re){if(typeof TextEncoder=="function")return new TextEncoder().encode(re);var oe=V(re);return new Uint8Array(oe)},decodeText:function(re){return typeof TextDecoder=="function"?new TextDecoder("utf-8").decode(re):z(re)}}},function(t,r){t.exports=function(e){var n=-1,g=Array(e.size);return e.forEach(function(y){g[++n]=y}),g}},function(t,r,e){var n,g=e(23),y=e(48),i=e(12),k=e(70),L=e(721),$=e(728),V=e(200),z=V.getLibEnv,re=V.getHostEnv,oe=V.getHostEnvVer,le={initReporter:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie={app_key:ue.appKey,platform:"Web",dev_id:y.deviceId,sdk_ver:i.info.version,env:"online",os_name:k.os?k.os.family:"",os_ver:k.os?k.os.version:"",lib_env:z(),host_env:re(),host_env_ver:oe(),manufactor:k.name,model:oe()};i.isBrowser||(ue.isDataReportEnable=!1);var ae=new L({isDataReportEnable:ue.isDataReportEnable,reportConfigUrl:ue.reportConfigUrl,reportUrl:ue.reportUrl,common:ie,request:$,logger:ue.logger,autoStart:i.isBrowser});return ae}};le.sendBeacon=navigator&&navigator.sendBeacon&&g(n=navigator.sendBeacon).call(n,navigator)||function(ue,ie){var ae=new XMLHttpRequest;ae.open("POST",ue,!0),ae.send(ie)},t.exports=le},function(t,r,e){t.exports=e(722)},function(t,r,e){var n=e(1),g=e(16);n({global:!0,forced:g.globalThis!==g},{globalThis:g})},function(t,r,e){var n=e(1),g=e(13),y=e(117),i=e(30),k=e(31),L=e(40).f,$=e(135),V=e(175),z=e(739),re=e(132),oe=e(741),le=!1,ue=re("meta"),ie=0,ae=function(de){L(de,ue,{value:{objectID:"O"+ie++,weakData:{}}})},Fe=t.exports={enable:function(){Fe.enable=function(){},le=!0;var de=$.f,Ne=g([].splice),Ve={};Ve[ue]=1,de(Ve).length&&($.f=function(ze){for(var jt=de(ze),kt=0,Et=jt.length;kt<Et;kt++)if(jt[kt]===ue){Ne(jt,kt,1);break}return jt},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:V.f}))},fastKey:function(de,Ne){if(!i(de))return typeof de=="symbol"?de:(typeof de=="string"?"S":"P")+de;if(!k(de,ue)){if(!z(de))return"F";if(!Ne)return"E";ae(de)}return de[ue].objectID},getWeakData:function(de,Ne){if(!k(de,ue)){if(!z(de))return!0;if(!Ne)return!1;ae(de)}return de[ue].weakData},onFreeze:function(de){return oe&&le&&z(de)&&!k(de,ue)&&ae(de),de}};y[ue]=!0},function(t,r,e){var n=e(20),g=e(32),y=e(17),i=e(38),k=TypeError;t.exports=function(L,$){var V,z=i(this),re=g(z.get),oe=g(z.has),le=g(z.set),ue=arguments.length>2?arguments[2]:void 0;if(!y($)&&!y(ue))throw k("At least one callback required");return n(oe,z,L)?(V=n(re,z,L),y($)&&(V=$(V),n(le,z,L,V))):y(ue)&&(V=ue(),n(le,z,L,V)),V}},function(t,r,e){t.exports=e(771)},function(t,r,e){var n=e(5);e(48);function g(){}g.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,g2:12,custom:100};var y=g.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",11:"robot",12:"g2",100:"custom"};g.validTypes=n(g.typeMap),g.setFlow=function(i,k){i.flow=i.from===k?i.to===k?"in":"out":"in",i.type==="robot"&&i.content&&i.content.msgOut&&(i.flow="in")},g.getType=function(i){var k=i.type;return y[k]||k},t.exports=g},function(t,r,e){t.exports=function(n,g,y,i){var k=self||window;try{try{var L;try{L=new k.Blob([n])}catch{(L=new(k.BlobBuilder||k.WebKitBlobBuilder||k.MozBlobBuilder||k.MSBlobBuilder)).append(n),L=L.getBlob()}var $=k.URL||k.webkitURL,V=$.createObjectURL(L),z=new k[g](V,y);return $.revokeObjectURL(V),z}catch{return new k[g]("data:application/javascript,".concat(encodeURIComponent(n)),y)}}catch{if(!i)throw Error("Inline worker is not supported");return new k[g](i,y)}}},function(t,r,e){e(12).isBrowser=!0},function(t,r){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(n,g){var y=typeof n;return!!(g=g??9007199254740991)&&(y=="number"||y!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<g}},function(t,r,e){t.exports=e(565)},function(t,r,e){(function(n){var g,y=e(24),i=e(3),k=e(128),L=e(9),$=e(28),V=e(2),z=e(42),re=e(4),oe=e(5),le=e(15);(function(ue,ie){var ae,Fe=(ue=ue!==void 0?ue:typeof self<"u"?self:n!==void 0?n:{}).IDBKeyRange||ue.webkitIDBKeyRange,de="readonly",Ne="readwrite",Ve=Object.prototype.hasOwnProperty,ze=function(){if(!ae&&!(ae=ue.indexedDB||ue.webkitIndexedDB||ue.mozIndexedDB||ue.oIndexedDB||ue.msIndexedDB||(ue.indexedDB===null&&ue.shimIndexedDB?ue.shimIndexedDB:void 0)))throw"IndexedDB required";return ae},jt=!1,kt=navigator&&!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent),Et=function(yr){return yr},lr=function(yr){var Sr;return L(Sr=Object.prototype.toString.call(yr)).call(Sr,8,-1).toLowerCase()},tr=function(yr){return typeof yr=="function"},or=function(yr){return lr(yr)==="number"},dr=function(yr){return lr(yr)==="array"},cr=function(yr){return yr===void 0},nr=function(yr,Sr){var wr=this,Mr=!1;this.name=Sr,this.getIndexedDB=function(){return yr},this.add=function(Nr){if(Mr)throw"Database has been closed";for(var Pr=[],sr=0,Ir=0;Ir<arguments.length-1;Ir++)if($(arguments[Ir+1]))for(var Ar=0;Ar<arguments[Ir+1].length;Ar++)Pr[sr]=arguments[Ir+1][Ar],sr++;else Pr[sr]=arguments[Ir+1],sr++;var Cr=yr.transaction(Nr,Ne),br=Cr.objectStore(Nr);return new i(function(vr,Tr){V(Pr).call(Pr,function(Br){var Lr;if(Br.item&&Br.key){var Fr=Br.key;Br=Br.item,Lr=br.add(Br,Fr)}else Lr=br.add(Br);Lr.onsuccess=function(qr){try{var Vr=qr.target,Qr=Vr.source.keyPath;Qr===null&&(Qr="__id__"),z(Br,Qr,{value:Vr.result,enumerable:!0})}catch(Sn){Tr(Sn)}}}),Cr.oncomplete=function(){vr(Pr,wr)},Cr.onerror=function(Br){Br.preventDefault(),Tr(Br)},Cr.onabort=function(Br){Tr(Br)}})},this.updateAndDelete=function(Nr,Pr,sr){if(Mr)throw"Database has been closed";var Ir=yr.transaction(Nr,Ne),Ar=Ir.objectStore(Nr),Cr=Ar.keyPath;return new i(function(br,vr){V(Pr).call(Pr,function(Tr){if(Tr.item&&Tr.key){var Br=Tr.key;Tr=Tr.item,Ar.put(Tr,Br)}else Ar.put(Tr)}),V(sr).call(sr,function(Tr){Ar.delete(Tr[Cr])}),Ir.oncomplete=function(){br([Pr,sr])},Ir.onerror=function(Tr){vr(Tr)}})},this.update=function(Nr){if(Mr)throw"Database has been closed";for(var Pr,sr=[],Ir=1;Ir<arguments.length;Ir++)$(Pr=arguments[Ir])?sr=re(sr).call(sr,Pr):sr.push(Pr);var Ar=yr.transaction(Nr,Ne),Cr=Ar.objectStore(Nr);return Cr.keyPath,new i(function(br,vr){V(sr).call(sr,function(Tr){var Br;if(Tr.item&&Tr.key){var Lr=Tr.key;Tr=Tr.item,Br=Cr.put(Tr,Lr)}else Br=Cr.put(Tr);Br.onsuccess=function(Fr){},Br.onerror=function(Fr){}}),Ar.oncomplete=function(){br(sr,wr)},Ar.onerror=function(Tr){vr(Tr)},Ar.onabort=function(Tr){vr(Tr)}})},this.remove=function(Nr,Pr,sr,Ir,Ar,Cr,br){if(Mr)throw"Database has been closed";var vr=yr.transaction(Nr,Ne),Tr=vr.objectStore(Nr);return new i(function(Br,Lr){function Fr(Vr){return Vr==null}var qr;Fr(Ir)&&(Ir=-1/0),Fr(Ar)&&(Ar=1/0),Pr===null||$(Pr)||(Pr=[Pr]),Fr(sr)?Pr!==null?V(Pr).call(Pr,function(Vr){Tr.delete(Vr)}):Tr.delete(range=Fe.bound(Ir,Ar,Cr,br)):(qr=Pr!==null?Fe.only(Pr[0]):Fe.bound(Ir,Ar,Cr,br),Tr.index(sr).openCursor(qr).onsuccess=function(Vr){try{var Qr=Vr.target.result;if(!Qr)return;Qr.delete(),Qr.continue()}catch(Sn){Lr(Sn)}}),vr.oncomplete=function(){Br()},vr.onerror=function(Vr){Lr(Vr)},vr.onabort=function(Vr){Lr(Vr)}})},this.clear=function(Nr){if(Mr)throw"Database has been closed";var Pr=yr.transaction(Nr,Ne);return Pr.objectStore(Nr).clear(),new i(function(sr,Ir){Pr.oncomplete=function(){sr()},Pr.onerror=function(Ar){Ir(Ar)}})},this.close=function(){Mr||(yr.close(),Mr=!0,delete gr[Sr])},this.get=function(Nr,Pr){if(Mr)throw"Database has been closed";var sr=yr.transaction(Nr),Ir=sr.objectStore(Nr).get(Pr);return new i(function(Ar,Cr){Ir.onsuccess=function(br){Ar(br.target.result)},sr.onerror=function(br){Cr(br)}})},this.query=function(Nr,Pr){if(Mr)throw"Database has been closed";return new ur(Nr,yr,Pr)},this.count=function(Nr,Pr){if(Mr)throw"Database has been closed";yr.transaction(Nr).objectStore(Nr)};for(var mr=0,_r=yr.objectStoreNames.length;mr<_r;mr++)(function(Nr){for(var Pr in wr[Nr]={},wr)Ve.call(wr,Pr)&&Pr!=="close"&&(wr[Nr][Pr]=function(sr){return function(){var Ir,Ar=re(Ir=[Nr]).call(Ir,L([]).call(arguments,0));return wr[sr].apply(wr,Ar)}}(Pr))})(yr.objectStoreNames[mr])},ur=function(yr,Sr,wr){var Mr,mr=this,_r=!1,Nr=!1,Pr=function(Ir,Ar,Cr,br,vr,Tr,Br){return new i(function(Lr,Fr){var qr=_r||Nr?Ne:de,Vr=Sr.transaction(yr,qr),Qr=Vr.objectStore(yr),Sn=wr?Qr.index(wr):Qr,Mn=Ir?Fe[Ir].apply(null,Ar):null,Xr=[],Wn=[Mn],Zr=0;vr=vr||null,Tr=Tr||[],Cr!=="count"&&Wn.push(br||"next");var En=!!_r&&oe(_r);Sn[Cr].apply(Sn,Wn).onsuccess=function(Jr){try{var kn=Jr.target.result;if(y(kn)===y(0))Xr=kn;else if(kn){if(vr!==null&&vr[0]>Zr)Zr=vr[0],kn.advance(vr[0]);else if(!(vr!==null&&Zr>=vr[0]+vr[1])){var Un=!0,wn="value"in kn?kn.value:kn.key;V(Tr).call(Tr,function(Pn){Pn&&Pn.length&&(Pn.length===2?Un=Un&&wn[Pn[0]]===Pn[1]:tr(Pn[0])&&(Un=Un&&Pn[0].apply(void 0,[wn])))}),Un&&(Zr++,Xr.push(Br(wn)),Nr?kn.delete():_r&&(wn=function(Pn){for(var oo=0;oo<En.length;oo++){var Rn=En[oo],An=_r[Rn];An instanceof Function&&(An=An(Pn)),Pn[Rn]=An}return Pn}(wn),kn.update(wn))),kn.continue()}}}catch(Pn){Fr(Pn)}},Vr.oncomplete=function(){Lr(Xr)},Vr.onerror=function(Jr){Fr(Jr)},Vr.onabort=function(Jr){Fr(Jr)}})},sr=function(Ir,Ar){var Cr="next",br="openCursor",vr=[],Tr=null,Br=Et,Lr=!1,Fr=function(){return Pr(Ir,Ar,br,Lr?Cr+"unique":Cr,Tr,vr,Br)},qr=function(){return Cr=null,br="count",{execute:Fr}},Vr=function kn(){return(Tr=dr(arguments[0])?arguments[0]:L(Array.prototype).call(arguments,0,2)).length==1&&Tr.unshift(0),or(Tr[1])||(Tr=null),{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:Xr,distinct:Wn,modify:Zr,limit:kn,map:En,remove:Jr}},Qr=function kn(Un){return(Un=!!cr(Un)||!!Un)&&(br="openKeyCursor"),{execute:Fr,keys:kn,filter:Sn,asc:Mn,desc:Xr,distinct:Wn,modify:Zr,limit:Vr,map:En,remove:Jr}},Sn=function kn(){return vr.push(L(Array.prototype).call(arguments,0,2)),{execute:Fr,count:qr,keys:Qr,filter:kn,asc:Mn,desc:Xr,distinct:Wn,modify:Zr,limit:Vr,map:En,remove:Jr}},Mn=function kn(Un){return Un=!!cr(Un)||!!Un,Cr=Un?"next":"prev",{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:kn,desc:Xr,distinct:Wn,modify:Zr,limit:Vr,map:En,remove:Jr}},Xr=function kn(Un){return Un=!!cr(Un)||!!Un,Cr=Un?"prev":"next",{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:kn,distinct:Wn,modify:Zr,limit:Vr,map:En,remove:Jr}},Wn=function kn(Un){return Un=!!cr(Un)||!!Un,Lr=Un,{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:Xr,distinct:kn,modify:Zr,limit:Vr,map:En,remove:Jr}},Zr=function kn(Un){return _r=Un,{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:Xr,distinct:Wn,modify:kn,limit:Vr,map:En,remove:Jr}},En=function kn(Un){return tr(Un)&&(Br=Un),{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:Xr,distinct:Wn,modify:Zr,limit:Vr,map:kn,remove:Jr}},Jr=function kn(Un){return Un=!!cr(Un)||!!Un,Nr=Un,{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:Xr,distinct:Wn,modify:Zr,limit:Vr,map:En,remove:kn}};return{execute:Fr,count:qr,keys:Qr,filter:Sn,asc:Mn,desc:Xr,distinct:Wn,modify:Zr,limit:Vr,map:En,remove:Jr}};V(Mr="only bound upperBound lowerBound".split(" ")).call(Mr,function(Ir){mr[Ir]=function(){return new sr(Ir,arguments)}}),this.filter=function(){var Ir=new sr(null,null);return le(Ir).apply(Ir,arguments)},this.all=function(){var Ir;return le(Ir=this).call(Ir)}},ar=function(yr,Sr,wr,Mr){var mr=yr.target.result,_r=new nr(mr,Sr);return gr[Sr]=mr,i.resolve(_r)},gr={},pr={version:"0.10.2",open:function(yr){var Sr;return new i(function(wr,Mr){var mr;gr[yr.server]?ar({target:{result:gr[yr.server]}},yr.server,yr.version,yr.schema).then(wr,Mr):(jt?i.resolve():kt&&ze().databases?new i(function(_r){var Nr=function(){return ze().databases().finally(_r)};mr=k(Nr,100),Nr()}).finally(function(){jt=!0,clearInterval(mr)}):(jt=!0,i.resolve())).then(function(){try{Sr=ze().open(yr.server,yr.version)}catch(_r){Mr(_r)}Sr.onsuccess=function(_r){ar(_r,yr.server,yr.version,yr.schema).then(wr,Mr)},Sr.onupgradeneeded=function(_r){(function(Nr,Pr,sr){for(var Ir in typeof Pr=="function"&&(Pr=Pr()),Pr){var Ar,Cr=Pr[Ir];for(var br in Ar=!Ve.call(Pr,Ir)||sr.objectStoreNames.contains(Ir)?Nr.currentTarget.transaction.objectStore(Ir):sr.createObjectStore(Ir,Cr.key),Cr.indexes){var vr=Cr.indexes[br];try{Ar.index(br)}catch{Ar.createIndex(br,vr.key||br,oe(vr).length?vr:{unique:!1})}}}})(_r,yr.schema,_r.target.result)},Sr.onerror=function(_r){Mr(_r)}})})},remove:function(yr){return new i(function(Sr,wr){if(!yr)return Sr();var Mr,mr;y(yr)===nr&&(yr=yr.name),typeof yr=="string"&&(Mr=gr[yr]),Mr&&typeof Mr.close=="function"&&Mr.close();try{mr=ze().deleteDatabase(yr)}catch(_r){wr(_r)}mr.onsuccess=function(_r){delete gr[yr],Sr(yr)},mr.onerror=function(_r){wr(_r)},mr.onblocked=function(_r){wr(_r)}})}};t.exports!==void 0?t.exports=pr:(g=(function(){return pr}).call(r,e,r,t))===void 0||(t.exports=g)})(void 0)}).call(this,e(77))},function(t,r,e){var n=e(596);t.exports=n},function(t,r,e){t.exports=e(650)},function(t,r){var e={set:function(n,g,y){e[n]=g,y&&(y.support=g)}};t.exports=e},function(t,r,e){var n=e(5),g=e(2),y=e(23),i=e(0),k=i.notundef,L=i.fillPropertyWithDefault,$=n,V={},z={},re={},oe=[],le={normal:2,advanced:1},ue={manager:0,all:1};V.inviteMode=V.updateCustomMode=V.updateTeamMode=ue;var ie={2:"normal",1:"advanced"},ae=V.joinMode={noVerify:0,needVerify:1,rejectAll:2};z.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},re.joinMode=$(ae),oe.push("join");var Fe=V.beInviteMode={needVerify:0,noVerify:1};function de(Ve){var ze;i.verifyOptions(Ve,"action","superTeam::SuperTeam"),i.verifyOptions(Ve,"teamId","superTeam::SuperTeam"),k(Ve.teamId)&&(this.teamId=Ve.teamId),k(Ve.type)&&(this.type=le[Ve.type]),k(Ve.avatar)&&(this.avatar=""+Ve.avatar),k(Ve.name)&&(this.name=""+Ve.name),k(Ve.intro)&&(this.intro=""+Ve.intro),k(Ve.announcement)&&(this.announcement=""+Ve.announcement),k(Ve.custom)&&(this.custom=""+Ve.custom),k(Ve.inviteMode)&&(this.inviteMode=ue[Ve.inviteMode]),k(Ve.updateCustomMode)&&(this.updateCustomMode=ue[Ve.updateCustomMode]),k(Ve.updateTeamMode)&&(this.updateTeamMode=ue[Ve.updateTeamMode]),g(oe).call(oe,y(ze=this.setMode).call(ze,this,Ve))}function Ne(Ve,ze){k(Ve[ze+="Mode"])&&(Ve[ze]=z[ze][Ve[ze]])}z.beInviteMode={0:"needVerify",1:"noVerify"},oe.push("beInvite"),z.inviteMode=z.updateCustomMode=z.updateTeamMode={0:"manager",1:"all"},oe.push("invite"),oe.push("updateCustom"),oe.push("updateTeam"),re.inviteMode=re.updateCustomMode=re.updateTeamMode=$(ue),re.beInviteMode=$(Fe),de.prototype.setMode=function(Ve,ze){k(Ve[ze+="Mode"])&&(i.verifyParamValid(ze,Ve[ze],re[ze],"Superteam::Team"),this[ze]=V[ze][Ve[ze]])},de.reverse=function(Ve,ze){var jt=i.copy(Ve);if(k(jt.teamId)&&(jt.teamId=""+jt.teamId),k(jt.type)&&(jt.type=ie[jt.type]),k(jt.level)&&(jt.level=+jt.level),k(jt.valid)&&(jt.valid=+jt.valid==1),k(jt.memberNum)&&(jt.memberNum=+jt.memberNum),k(jt.memberUpdateTime)&&(jt.memberUpdateTime=+jt.memberUpdateTime),k(jt.createTime)&&(jt.createTime=+jt.createTime),k(jt.updateTime)&&(jt.updateTime=+jt.updateTime),k(jt.validToCurrentUser)&&(jt.validToCurrentUser=jt.validToCurrentUser==="1"),k(jt.mute)&&(jt.mute=jt.mute==="1"),k(jt.muteType))switch(jt.muteType){case"0":jt.mute=!1,jt.muteType="none";break;case"1":jt.mute=!0,jt.muteType="normal";break;case"3":jt.mute=!0,jt.muteType="all"}else k(jt.mute)&&(jt.mute===1?(jt.mute=!0,jt.muteType="normal"):(jt.mute=!1,jt.muteType="none"));return g(oe).call(oe,y(Ne).call(Ne,null,jt)),delete jt.bits,ze||de.fillProperties(jt),jt},de.fillProperties=function(Ve){return L(Ve,"avatar","")},t.exports=de},function(t,r,e){t.exports=e(689)},function(t,r,e){var n=e(293),g=e(315),y=e(316);t.exports=function(i,k){var L;if(i){if(typeof i=="string")return y(i,k);var $=n(L=Object.prototype.toString.call(i)).call(L,8,-1);return $==="Object"&&i.constructor&&($=i.constructor.name),$==="Map"||$==="Set"?g(i):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?y(i,k):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(693)},function(t,r){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var g=0,y=new Array(n);g<n;g++)y[g]=e[g];return y},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(0).notundef;function g(y){n(y.shouldPushNotificationWhenPCOnline)&&(this.open=y.shouldPushNotificationWhenPCOnline?2:1)}g.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},g.reverse=function(y){return{shouldPushNotificationWhenPCOnline:+y.open!=1}},t.exports=g},function(t,r,e){var n=e(70),g=e(787),y=e(294),i=e(263),k=e(203),L=e(0),$=e(311),V=e(289),z=e(192),re=e(792),oe=e(793);t.exports=function(le){L.merge(le,{platform:n,xhr:g,io:y,naturalSort:i,deepAccess:k,util:L,support:$,blob:V,ajax:z,LoggerPlugin:re,usePlugin:oe})}},function(t,r,e){var n=e(11),g=e(10),y=e(5),i=e(110).genPrivateUrl,k=e(0),L=k.notundef,$={"-2":"unset","-1":"restricted",0:"common",1:"owner",2:"manager",3:"guest",4:"anonymous"};function V(z){L(z.nick)&&(this.nick=""+z.nick),L(z.avatar)&&(this.avatar=""+z.avatar),L(z.custom)&&(this.custom=""+z.custom)}V.reverse=function(z){var re=k.copy(z);return L(re.chatroomId)&&(re.chatroomId=""+re.chatroomId),L(re.avatar)&&(re.avatar=i(re.avatar)),L(re.type)&&(re.type=$[re.type]),L(re.level)&&(re.level=+re.level),L(re.online)&&(re.online=+re.online==1),L(re.enterTime)&&(re.enterTime=+re.enterTime),L(re.guest)&&(re.guest=+re.guest==1),L(re.blacked)&&(re.blacked=+re.blacked==1),L(re.gaged)&&(re.gaged=+re.gaged==1),L(re.valid)&&(re.valid=+re.valid==1),L(re.updateTime)&&(re.updateTime=+re.updateTime),L(re.tempMuted)?re.tempMuted=+re.tempMuted==1:re.tempMuted=!1,L(re.tempMuteDuration)?re.tempMuteDuration=+re.tempMuteDuration:re.tempMuteDuration=0,re.online||delete re.enterTime,re.guest&&(re.type="guest",delete re.valid),re.type!=="common"&&delete re.level,delete re.guest,re},V.reverseMembers=function(z){return n(z).call(z,function(re){return g(V).call(V,re)})},V.validTypes=y($),V.typeReverseMap=$,t.exports=V},function(t,r,e){var n,g,y,i,k,L,$,V,z,re,oe,le,ue,ie,ae,Fe,de,Ne,Ve;t.exports=(n=e(96),e(796),void(n.lib.Cipher||(g=n,y=g.lib,i=y.Base,k=y.WordArray,L=y.BufferedBlockAlgorithm,$=g.enc,$.Utf8,V=$.Base64,z=g.algo.EvpKDF,re=y.Cipher=L.extend({cfg:i.extend(),createEncryptor:function(ze,jt){return this.create(this._ENC_XFORM_MODE,ze,jt)},createDecryptor:function(ze,jt){return this.create(this._DEC_XFORM_MODE,ze,jt)},init:function(ze,jt,kt){this.cfg=this.cfg.extend(kt),this._xformMode=ze,this._key=jt,this.reset()},reset:function(){L.reset.call(this),this._doReset()},process:function(ze){return this._append(ze),this._process()},finalize:function(ze){return ze&&this._append(ze),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ze(jt){return typeof jt=="string"?Ve:de}return function(jt){return{encrypt:function(kt,Et,lr){return ze(Et).encrypt(jt,kt,Et,lr)},decrypt:function(kt,Et,lr){return ze(Et).decrypt(jt,kt,Et,lr)}}}}()}),y.StreamCipher=re.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),oe=g.mode={},le=y.BlockCipherMode=i.extend({createEncryptor:function(ze,jt){return this.Encryptor.create(ze,jt)},createDecryptor:function(ze,jt){return this.Decryptor.create(ze,jt)},init:function(ze,jt){this._cipher=ze,this._iv=jt}}),ue=oe.CBC=function(){var ze=le.extend();function jt(kt,Et,lr){var tr,or=this._iv;or?(tr=or,this._iv=void 0):tr=this._prevBlock;for(var dr=0;dr<lr;dr++)kt[Et+dr]^=tr[dr]}return ze.Encryptor=ze.extend({processBlock:function(kt,Et){var lr=this._cipher,tr=lr.blockSize;jt.call(this,kt,Et,tr),lr.encryptBlock(kt,Et),this._prevBlock=kt.slice(Et,Et+tr)}}),ze.Decryptor=ze.extend({processBlock:function(kt,Et){var lr=this._cipher,tr=lr.blockSize,or=kt.slice(Et,Et+tr);lr.decryptBlock(kt,Et),jt.call(this,kt,Et,tr),this._prevBlock=or}}),ze}(),ie=(g.pad={}).Pkcs7={pad:function(ze,jt){for(var kt=4*jt,Et=kt-ze.sigBytes%kt,lr=Et<<24|Et<<16|Et<<8|Et,tr=[],or=0;or<Et;or+=4)tr.push(lr);var dr=k.create(tr,Et);ze.concat(dr)},unpad:function(ze){var jt=255&ze.words[ze.sigBytes-1>>>2];ze.sigBytes-=jt}},y.BlockCipher=re.extend({cfg:re.cfg.extend({mode:ue,padding:ie}),reset:function(){var ze;re.reset.call(this);var jt=this.cfg,kt=jt.iv,Et=jt.mode;this._xformMode==this._ENC_XFORM_MODE?ze=Et.createEncryptor:(ze=Et.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ze?this._mode.init(this,kt&&kt.words):(this._mode=ze.call(Et,this,kt&&kt.words),this._mode.__creator=ze)},_doProcessBlock:function(ze,jt){this._mode.processBlock(ze,jt)},_doFinalize:function(){var ze,jt=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(jt.pad(this._data,this.blockSize),ze=this._process(!0)):(ze=this._process(!0),jt.unpad(ze)),ze},blockSize:4}),ae=y.CipherParams=i.extend({init:function(ze){this.mixIn(ze)},toString:function(ze){return(ze||this.formatter).stringify(this)}}),Fe=(g.format={}).OpenSSL={stringify:function(ze){var jt=ze.ciphertext,kt=ze.salt;return(kt?k.create([1398893684,1701076831]).concat(kt).concat(jt):jt).toString(V)},parse:function(ze){var jt,kt=V.parse(ze),Et=kt.words;return Et[0]==1398893684&&Et[1]==1701076831&&(jt=k.create(Et.slice(2,4)),Et.splice(0,4),kt.sigBytes-=16),ae.create({ciphertext:kt,salt:jt})}},de=y.SerializableCipher=i.extend({cfg:i.extend({format:Fe}),encrypt:function(ze,jt,kt,Et){Et=this.cfg.extend(Et);var lr=ze.createEncryptor(kt,Et),tr=lr.finalize(jt),or=lr.cfg;return ae.create({ciphertext:tr,key:kt,iv:or.iv,algorithm:ze,mode:or.mode,padding:or.padding,blockSize:ze.blockSize,formatter:Et.format})},decrypt:function(ze,jt,kt,Et){return Et=this.cfg.extend(Et),jt=this._parse(jt,Et.format),ze.createDecryptor(kt,Et).finalize(jt.ciphertext)},_parse:function(ze,jt){return typeof ze=="string"?jt.parse(ze,this):ze}}),Ne=(g.kdf={}).OpenSSL={execute:function(ze,jt,kt,Et){Et||(Et=k.random(8));var lr=z.create({keySize:jt+kt}).compute(ze,Et),tr=k.create(lr.words.slice(jt),4*kt);return lr.sigBytes=4*jt,ae.create({key:lr,iv:tr,salt:Et})}},Ve=y.PasswordBasedCipher=de.extend({cfg:de.cfg.extend({kdf:Ne}),encrypt:function(ze,jt,kt,Et){var lr=(Et=this.cfg.extend(Et)).kdf.execute(kt,ze.keySize,ze.ivSize);Et.iv=lr.iv;var tr=de.encrypt.call(this,ze,jt,lr.key,Et);return tr.mixIn(lr),tr},decrypt:function(ze,jt,kt,Et){Et=this.cfg.extend(Et),jt=this._parse(jt,Et.format);var lr=Et.kdf.execute(kt,ze.keySize,ze.ivSize,jt.salt);return Et.iv=lr.iv,de.decrypt.call(this,ze,jt,lr.key,Et)}}))))},function(t,r,e){t.exports=e(288)},function(t,r,e){var n=e(18),g=e(323),y=Array.prototype;t.exports=function(i){var k=i.indexOf;return i===y||n(y,i)&&k===y.indexOf?g:k}},function(t,r,e){e(324);var n=e(27);t.exports=n("Array").indexOf},function(t,r,e){var n=e(1),g=e(166),y=e(170).indexOf,i=e(86),k=g([].indexOf),L=!!k&&1/k([1],1,-0)<0,$=i("indexOf");n({target:"Array",proto:!0,forced:L||!$},{indexOf:function(V){var z=arguments.length>1?arguments[1]:void 0;return L?k(this,V,z)||0:y(this,V,z)}})},function(t,r,e){var n=e(20),g=e(30),y=e(131),i=e(167),k=e(326),L=e(21),$=TypeError,V=L("toPrimitive");t.exports=function(z,re){if(!g(z)||y(z))return z;var oe,le=i(z,V);if(le){if(re===void 0&&(re="default"),oe=n(le,z,re),!g(oe)||y(oe))return oe;throw $("Can't convert object to primitive value")}return re===void 0&&(re="number"),k(z,re)}},function(t,r,e){var n=e(20),g=e(17),y=e(30),i=TypeError;t.exports=function(k,L){var $,V;if(L==="string"&&g($=k.toString)&&!y(V=n($,k))||g($=k.valueOf)&&!y(V=n($,k))||L!=="string"&&g($=k.toString)&&!y(V=n($,k)))return V;throw i("Can't convert object to primitive value")}},function(t,r,e){var n=e(16),g=Object.defineProperty;t.exports=function(y,i){try{g(n,y,{value:i,configurable:!0,writable:!0})}catch{n[y]=i}return i}},function(t,r){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(g){var y=+g;return(y>0?n:e)(y)}},function(t,r,e){var n=e(115),g=Math.min;t.exports=function(y){return y>0?g(n(y),9007199254740991):0}},function(t,r,e){var n=e(331);t.exports=n},function(t,r,e){var n=e(18),g=e(332),y=Array.prototype;t.exports=function(i){var k=i.concat;return i===y||n(y,i)&&k===y.concat?g:k}},function(t,r,e){e(217);var n=e(27);t.exports=n("Array").concat},function(t,r,e){var n=e(87),g=e(133),y=e(30),i=e(21)("species"),k=Array;t.exports=function(L){var $;return n(L)&&($=L.constructor,(g($)&&($===k||n($.prototype))||y($)&&($=$[i])===null)&&($=void 0)),$===void 0?k:$}},function(t,r,e){e(335);var n=e(14).Object;t.exports=function(g,y){return n.create(g,y)}},function(t,r,e){e(1)({target:"Object",stat:!0,sham:!e(29)},{create:e(88)})},function(t,r,e){t.exports=e(337)},function(t,r,e){var n=e(338);e(365),e(366),e(367),e(368),e(369),e(370),e(371),t.exports=n},function(t,r,e){var n=e(223);e(364),t.exports=n},function(t,r,e){e(217),e(102),e(224),e(346),e(347),e(348),e(349),e(229),e(350),e(351),e(352),e(353),e(354),e(355),e(230),e(356),e(357),e(358),e(359),e(360);var n=e(14);t.exports=n.Symbol},function(t,r,e){var n=e(1),g=e(16),y=e(20),i=e(13),k=e(57),L=e(29),$=e(99),V=e(7),z=e(31),re=e(18),oe=e(38),le=e(47),ue=e(130),ie=e(58),ae=e(84),Fe=e(88),de=e(124),Ne=e(135),Ve=e(175),ze=e(136),jt=e(97),kt=e(40),Et=e(173),lr=e(157),tr=e(74),or=e(113),dr=e(134),cr=e(117),nr=e(132),ur=e(21),ar=e(137),gr=e(25),pr=e(226),yr=e(89),Sr=e(103),wr=e(69).forEach,Mr=dr("hidden"),mr=Sr.set,_r=Sr.getterFor("Symbol"),Nr=Object.prototype,Pr=g.Symbol,sr=Pr&&Pr.prototype,Ir=g.TypeError,Ar=g.QObject,Cr=jt.f,br=kt.f,vr=Ve.f,Tr=lr.f,Br=i([].push),Lr=or("symbols"),Fr=or("op-symbols"),qr=or("wks"),Vr=!Ar||!Ar.prototype||!Ar.prototype.findChild,Qr=L&&V(function(){return Fe(br({},"a",{get:function(){return br(this,"a",{value:7}).a}})).a!=7})?function(kn,Un,wn){var Pn=Cr(Nr,Un);Pn&&delete Nr[Un],br(kn,Un,wn),Pn&&kn!==Nr&&br(Nr,Un,Pn)}:br,Sn=function(kn,Un){var wn=Lr[kn]=Fe(sr);return mr(wn,{type:"Symbol",tag:kn,description:Un}),L||(wn.description=Un),wn},Mn=function(kn,Un,wn){kn===Nr&&Mn(Fr,Un,wn),oe(kn);var Pn=ue(Un);return oe(wn),z(Lr,Pn)?(wn.enumerable?(z(kn,Mr)&&kn[Mr][Pn]&&(kn[Mr][Pn]=!1),wn=Fe(wn,{enumerable:ae(0,!1)})):(z(kn,Mr)||br(kn,Mr,ae(1,{})),kn[Mr][Pn]=!0),Qr(kn,Pn,wn)):br(kn,Pn,wn)},Xr=function(kn,Un){oe(kn);var wn=le(Un),Pn=de(wn).concat(Jr(wn));return wr(Pn,function(oo){L&&!y(Wn,wn,oo)||Mn(kn,oo,wn[oo])}),kn},Wn=function(kn){var Un=ue(kn),wn=y(Tr,this,Un);return!(this===Nr&&z(Lr,Un)&&!z(Fr,Un))&&(!(wn||!z(this,Un)||!z(Lr,Un)||z(this,Mr)&&this[Mr][Un])||wn)},Zr=function(kn,Un){var wn=le(kn),Pn=ue(Un);if(wn!==Nr||!z(Lr,Pn)||z(Fr,Pn)){var oo=Cr(wn,Pn);return!oo||!z(Lr,Pn)||z(wn,Mr)&&wn[Mr][Pn]||(oo.enumerable=!0),oo}},En=function(kn){var Un=vr(le(kn)),wn=[];return wr(Un,function(Pn){z(Lr,Pn)||z(cr,Pn)||Br(wn,Pn)}),wn},Jr=function(kn){var Un=kn===Nr,wn=vr(Un?Fr:le(kn)),Pn=[];return wr(wn,function(oo){!z(Lr,oo)||Un&&!z(Nr,oo)||Br(Pn,Lr[oo])}),Pn};$||(tr(sr=(Pr=function(){if(re(sr,this))throw Ir("Symbol is not a constructor");var kn=arguments.length&&arguments[0]!==void 0?ie(arguments[0]):void 0,Un=nr(kn),wn=function(Pn){this===Nr&&y(wn,Fr,Pn),z(this,Mr)&&z(this[Mr],Un)&&(this[Mr][Un]=!1),Qr(this,Un,ae(1,Pn))};return L&&Vr&&Qr(Nr,Un,{configurable:!0,set:wn}),Sn(Un,kn)}).prototype,"toString",function(){return _r(this).tag}),tr(Pr,"withoutSetter",function(kn){return Sn(nr(kn),kn)}),lr.f=Wn,kt.f=Mn,Et.f=Xr,jt.f=Zr,Ne.f=Ve.f=En,ze.f=Jr,ar.f=function(kn){return Sn(ur(kn),kn)},L&&(br(sr,"description",{configurable:!0,get:function(){return _r(this).description}}),k||tr(Nr,"propertyIsEnumerable",Wn,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!$,sham:!$},{Symbol:Pr}),wr(de(qr),function(kn){gr(kn)}),n({target:"Symbol",stat:!0,forced:!$},{useSetter:function(){Vr=!0},useSimple:function(){Vr=!1}}),n({target:"Object",stat:!0,forced:!$,sham:!L},{create:function(kn,Un){return Un===void 0?Fe(kn):Xr(Fe(kn),Un)},defineProperty:Mn,defineProperties:Xr,getOwnPropertyDescriptor:Zr}),n({target:"Object",stat:!0,forced:!$},{getOwnPropertyNames:En}),pr(),yr(Pr,"Symbol"),cr[Mr]=!0},function(t,r,e){var n=e(172),g=e(73);t.exports=n?{}.toString:function(){return"[object "+g(this)+"]"}},function(t,r,e){var n=e(16),g=e(17),y=n.WeakMap;t.exports=g(y)&&/native code/.test(String(y))},function(t,r,e){var n=e(1),g=e(33),y=e(31),i=e(58),k=e(113),L=e(227),$=k("string-to-symbol-registry"),V=k("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!L},{for:function(z){var re=i(z);if(y($,re))return $[re];var oe=g("Symbol")(re);return $[re]=oe,V[oe]=re,oe}})},function(t,r,e){var n=e(1),g=e(31),y=e(131),i=e(85),k=e(113),L=e(227),$=k("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!L},{keyFor:function(V){if(!y(V))throw TypeError(i(V)+" is not a symbol");if(g($,V))return $[V]}})},function(t,r,e){var n=e(1),g=e(99),y=e(7),i=e(136),k=e(46);n({target:"Object",stat:!0,forced:!g||y(function(){i.f(1)})},{getOwnPropertySymbols:function(L){var $=i.f;return $?$(k(L)):[]}})},function(t,r,e){e(25)("asyncIterator")},function(t,r){},function(t,r,e){e(25)("hasInstance")},function(t,r,e){e(25)("isConcatSpreadable")},function(t,r,e){e(25)("match")},function(t,r,e){e(25)("matchAll")},function(t,r,e){e(25)("replace")},function(t,r,e){e(25)("search")},function(t,r,e){e(25)("species")},function(t,r,e){e(25)("split")},function(t,r,e){var n=e(33),g=e(25),y=e(89);g("toStringTag"),y(n("Symbol"),"Symbol")},function(t,r,e){e(25)("unscopables")},function(t,r,e){var n=e(16);e(89)(n.JSON,"JSON",!0)},function(t,r){},function(t,r){},function(t,r,e){var n=e(232).IteratorPrototype,g=e(88),y=e(84),i=e(89),k=e(105),L=function(){return this};t.exports=function($,V,z,re){var oe=V+" Iterator";return $.prototype=g(n,{next:y(+!re,z)}),i($,oe,!1,!0),k[oe]=L,$}},function(t,r,e){var n=e(17),g=String,y=TypeError;t.exports=function(i){if(typeof i=="object"||n(i))return i;throw y("Can't set "+g(i)+" as a prototype")}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,e){e(25)("dispose")},function(t,r,e){e(25)("asyncDispose")},function(t,r,e){e(25)("matcher")},function(t,r,e){e(25)("metadataKey")},function(t,r,e){e(25)("observable")},function(t,r,e){e(25)("metadata")},function(t,r,e){e(25)("patternMatch")},function(t,r,e){e(25)("replaceAll")},function(t,r,e){t.exports=e(373)},function(t,r,e){t.exports=e(374)},function(t,r,e){var n=e(375);t.exports=n},function(t,r,e){var n=e(376);t.exports=n},function(t,r,e){var n=e(377);e(75),t.exports=n},function(t,r,e){e(90),e(102),e(118),e(229);var n=e(137);t.exports=n.f("iterator")},function(t,r,e){e(379);var n=e(14);t.exports=n.Array.isArray},function(t,r,e){e(1)({target:"Array",stat:!0},{isArray:e(87)})},function(t,r,e){var n=e(381);t.exports=n},function(t,r,e){e(382);var n=e(27);t.exports=n("Array").forEach},function(t,r,e){var n=e(1),g=e(383);n({target:"Array",proto:!0,forced:[].forEach!=g},{forEach:g})},function(t,r,e){var n=e(69).forEach,g=e(86)("forEach");t.exports=g?[].forEach:function(y){return n(this,y,arguments.length>1?arguments[1]:void 0)}},function(t,r,e){t.exports=e(385)},function(t,r,e){var n=e(386);t.exports=n},function(t,r,e){e(387);var n=e(14).Object;t.exports=function(g){return n.getOwnPropertyNames(g)}},function(t,r,e){var n=e(1),g=e(7),y=e(175).f;n({target:"Object",stat:!0,forced:g(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:y})},function(t,r,e){e(389);var n=e(14);t.exports=n.Object.keys},function(t,r,e){var n=e(1),g=e(46),y=e(124);n({target:"Object",stat:!0,forced:e(7)(function(){y(1)})},{keys:function(i){return y(g(i))}})},function(t,r,e){var n=e(391);t.exports=n},function(t,r,e){e(228);var n=e(14),g=e(83);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(y,i,k){return g(n.JSON.stringify,null,arguments)}},function(t,r,e){e(239),e(90),e(102),e(399),e(253),e(254),e(412),e(118);var n=e(14);t.exports=n.Promise},function(t,r,e){var n=e(1),g=e(18),y=e(138),i=e(139),k=e(394),L=e(88),$=e(65),V=e(84),z=e(395),re=e(396),oe=e(50),le=e(397),ue=e(21),ie=e(398),ae=ue("toStringTag"),Fe=Error,de=[].push,Ne=function(ze,jt){var kt,Et=arguments.length>2?arguments[2]:void 0,lr=g(Ve,this);i?kt=i(Fe(),lr?y(this):Ve):(kt=lr?this:L(Ve),$(kt,ae,"Error")),jt!==void 0&&$(kt,"message",le(jt)),ie&&$(kt,"stack",z(kt.stack,1)),re(kt,Et);var tr=[];return oe(ze,de,{that:tr}),$(kt,"errors",tr),kt};i?i(Ne,Fe):k(Ne,Fe,{name:!0});var Ve=Ne.prototype=L(Fe.prototype,{constructor:V(1,Ne),message:V(1,""),name:V(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:Ne})},function(t,r,e){var n=e(31),g=e(240),y=e(97),i=e(40);t.exports=function(k,L,$){for(var V=g(L),z=i.f,re=y.f,oe=0;oe<V.length;oe++){var le=V[oe];n(k,le)||$&&n($,le)||z(k,le,re(L,le))}}},function(t,r,e){var n=e(13),g=Error,y=n("".replace),i=String(g("zxcasd").stack),k=/\n\s*at [^:]*:[^\n]*/,L=k.test(i);t.exports=function($,V){if(L&&typeof $=="string"&&!g.prepareStackTrace)for(;V--;)$=y($,k,"");return $}},function(t,r,e){var n=e(30),g=e(65);t.exports=function(y,i){n(i)&&"cause"in i&&g(y,"cause",i.cause)}},function(t,r,e){var n=e(58);t.exports=function(g,y){return g===void 0?arguments.length<2?"":y:n(g)}},function(t,r,e){var n=e(7),g=e(84);t.exports=!n(function(){var y=Error("a");return!("stack"in y)||(Object.defineProperty(y,"stack",g(1,7)),y.stack!==7)})},function(t,r,e){e(400),e(407),e(408),e(409),e(410),e(411)},function(t,r,e){var n,g,y,i=e(1),k=e(57),L=e(119),$=e(16),V=e(20),z=e(74),re=e(139),oe=e(89),le=e(244),ue=e(32),ie=e(17),ae=e(30),Fe=e(178),de=e(245),Ne=e(246).set,Ve=e(401),ze=e(404),jt=e(106),kt=e(405),Et=e(103),lr=e(107),tr=e(120),or=e(76),dr=tr.CONSTRUCTOR,cr=tr.REJECTION_EVENT,nr=tr.SUBCLASSING,ur=Et.getterFor("Promise"),ar=Et.set,gr=lr&&lr.prototype,pr=lr,yr=gr,Sr=$.TypeError,wr=$.document,Mr=$.process,mr=or.f,_r=mr,Nr=!!(wr&&wr.createEvent&&$.dispatchEvent),Pr=function(Fr){var qr;return!(!ae(Fr)||!ie(qr=Fr.then))&&qr},sr=function(Fr,qr){var Vr,Qr,Sn,Mn=qr.value,Xr=qr.state==1,Wn=Xr?Fr.ok:Fr.fail,Zr=Fr.resolve,En=Fr.reject,Jr=Fr.domain;try{Wn?(Xr||(qr.rejection===2&&vr(qr),qr.rejection=1),Wn===!0?Vr=Mn:(Jr&&Jr.enter(),Vr=Wn(Mn),Jr&&(Jr.exit(),Sn=!0)),Vr===Fr.promise?En(Sr("Promise-chain cycle")):(Qr=Pr(Vr))?V(Qr,Vr,Zr,En):Zr(Vr)):En(Mn)}catch(kn){Jr&&!Sn&&Jr.exit(),En(kn)}},Ir=function(Fr,qr){Fr.notified||(Fr.notified=!0,Ve(function(){for(var Vr,Qr=Fr.reactions;Vr=Qr.get();)sr(Vr,Fr);Fr.notified=!1,qr&&!Fr.rejection&&Cr(Fr)}))},Ar=function(Fr,qr,Vr){var Qr,Sn;Nr?((Qr=wr.createEvent("Event")).promise=qr,Qr.reason=Vr,Qr.initEvent(Fr,!1,!0),$.dispatchEvent(Qr)):Qr={promise:qr,reason:Vr},!cr&&(Sn=$["on"+Fr])?Sn(Qr):Fr==="unhandledrejection"&&ze("Unhandled promise rejection",Vr)},Cr=function(Fr){V(Ne,$,function(){var qr,Vr=Fr.facade,Qr=Fr.value;if(br(Fr)&&(qr=jt(function(){L?Mr.emit("unhandledRejection",Qr,Vr):Ar("unhandledrejection",Vr,Qr)}),Fr.rejection=L||br(Fr)?2:1,qr.error))throw qr.value})},br=function(Fr){return Fr.rejection!==1&&!Fr.parent},vr=function(Fr){V(Ne,$,function(){var qr=Fr.facade;L?Mr.emit("rejectionHandled",qr):Ar("rejectionhandled",qr,Fr.value)})},Tr=function(Fr,qr,Vr){return function(Qr){Fr(qr,Qr,Vr)}},Br=function(Fr,qr,Vr){Fr.done||(Fr.done=!0,Vr&&(Fr=Vr),Fr.value=qr,Fr.state=2,Ir(Fr,!0))},Lr=function(Fr,qr,Vr){if(!Fr.done){Fr.done=!0,Vr&&(Fr=Vr);try{if(Fr.facade===qr)throw Sr("Promise can't be resolved itself");var Qr=Pr(qr);Qr?Ve(function(){var Sn={done:!1};try{V(Qr,qr,Tr(Lr,Sn,Fr),Tr(Br,Sn,Fr))}catch(Mn){Br(Sn,Mn,Fr)}}):(Fr.value=qr,Fr.state=1,Ir(Fr,!1))}catch(Sn){Br({done:!1},Sn,Fr)}}};if(dr&&(yr=(pr=function(Fr){Fe(this,yr),ue(Fr),V(n,this);var qr=ur(this);try{Fr(Tr(Lr,qr),Tr(Br,qr))}catch(Vr){Br(qr,Vr)}}).prototype,(n=function(Fr){ar(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new kt,rejection:!1,state:0,value:void 0})}).prototype=z(yr,"then",function(Fr,qr){var Vr=ur(this),Qr=mr(de(this,pr));return Vr.parent=!0,Qr.ok=!ie(Fr)||Fr,Qr.fail=ie(qr)&&qr,Qr.domain=L?Mr.domain:void 0,Vr.state==0?Vr.reactions.add(Qr):Ve(function(){sr(Qr,Vr)}),Qr.promise}),g=function(){var Fr=new n,qr=ur(Fr);this.promise=Fr,this.resolve=Tr(Lr,qr),this.reject=Tr(Br,qr)},or.f=mr=function(Fr){return Fr===pr||Fr===void 0?new g(Fr):_r(Fr)},!k&&ie(lr)&&gr!==Object.prototype)){y=gr.then,nr||z(gr,"then",function(Fr,qr){var Vr=this;return new pr(function(Qr,Sn){V(y,Vr,Qr,Sn)}).then(Fr,qr)},{unsafe:!0});try{delete gr.constructor}catch{}re&&re(gr,yr)}i({global:!0,constructor:!0,wrap:!0,forced:dr},{Promise:pr}),oe(pr,"Promise",!1,!0),le("Promise")},function(t,r,e){var n,g,y,i,k,L,$,V,z=e(16),re=e(36),oe=e(97).f,le=e(246).set,ue=e(248),ie=e(402),ae=e(403),Fe=e(119),de=z.MutationObserver||z.WebKitMutationObserver,Ne=z.document,Ve=z.process,ze=z.Promise,jt=oe(z,"queueMicrotask"),kt=jt&&jt.value;kt||(n=function(){var Et,lr;for(Fe&&(Et=Ve.domain)&&Et.exit();g;){lr=g.fn,g=g.next;try{lr()}catch(tr){throw g?i():y=void 0,tr}}y=void 0,Et&&Et.enter()},ue||Fe||ae||!de||!Ne?!ie&&ze&&ze.resolve?(($=ze.resolve(void 0)).constructor=ze,V=re($.then,$),i=function(){V(n)}):Fe?i=function(){Ve.nextTick(n)}:(le=re(le,z),i=function(){le(n)}):(k=!0,L=Ne.createTextNode(""),new de(n).observe(L,{characterData:!0}),i=function(){L.data=k=!k})),t.exports=kt||function(Et){var lr={fn:Et,next:void 0};y&&(y.next=lr),g||(g=lr,i()),y=lr}},function(t,r,e){var n=e(72),g=e(16);t.exports=/ipad|iphone|ipod/i.test(n)&&g.Pebble!==void 0},function(t,r,e){var n=e(72);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,r,e){var n=e(16);t.exports=function(g,y){var i=n.console;i&&i.error&&(arguments.length==1?i.error(g):i.error(g,y))}},function(t,r){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(n){var g={item:n,next:null};this.head?this.tail.next=g:this.head=g,this.tail=g},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},t.exports=e},function(t,r,e){var n=e(249),g=e(119);t.exports=!n&&!g&&typeof window=="object"&&typeof document=="object"},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(76),k=e(106),L=e(50);n({target:"Promise",stat:!0,forced:e(250)},{all:function($){var V=this,z=i.f(V),re=z.resolve,oe=z.reject,le=k(function(){var ue=y(V.resolve),ie=[],ae=0,Fe=1;L($,function(de){var Ne=ae++,Ve=!1;Fe++,g(ue,V,de).then(function(ze){Ve||(Ve=!0,ie[Ne]=ze,--Fe||re(ie))},oe)}),--Fe||re(ie)});return le.error&&oe(le.value),z.promise}})},function(t,r,e){var n=e(1),g=e(57),y=e(120).CONSTRUCTOR,i=e(107),k=e(33),L=e(17),$=e(74),V=i&&i.prototype;if(n({target:"Promise",proto:!0,forced:y,real:!0},{catch:function(re){return this.then(void 0,re)}}),!g&&L(i)){var z=k("Promise").prototype.catch;V.catch!==z&&$(V,"catch",z,{unsafe:!0})}},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(76),k=e(106),L=e(50);n({target:"Promise",stat:!0,forced:e(250)},{race:function($){var V=this,z=i.f(V),re=z.reject,oe=k(function(){var le=y(V.resolve);L($,function(ue){g(le,V,ue).then(z.resolve,re)})});return oe.error&&re(oe.value),z.promise}})},function(t,r,e){var n=e(1),g=e(20),y=e(76);n({target:"Promise",stat:!0,forced:e(120).CONSTRUCTOR},{reject:function(i){var k=y.f(this);return g(k.reject,void 0,i),k.promise}})},function(t,r,e){var n=e(1),g=e(33),y=e(57),i=e(107),k=e(120).CONSTRUCTOR,L=e(252),$=g("Promise"),V=y&&!k;n({target:"Promise",stat:!0,forced:y||k},{resolve:function(z){return L(V&&this===$?i:this,z)}})},function(t,r,e){var n=e(1),g=e(57),y=e(107),i=e(7),k=e(33),L=e(17),$=e(245),V=e(252),z=e(74),re=y&&y.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!y&&i(function(){re.finally.call({then:function(){}},function(){})})},{finally:function(le){var ue=$(this,k("Promise")),ie=L(le);return this.then(ie?function(ae){return V(ue,le()).then(function(){return ae})}:le,ie?function(ae){return V(ue,le()).then(function(){throw ae})}:le)}}),!g&&L(y)){var oe=k("Promise").prototype.finally;re.finally!==oe&&z(re,"finally",oe,{unsafe:!0})}},function(t,r,e){t.exports=e(414)},function(t,r,e){var n=e(415);t.exports=n},function(t,r,e){var n=e(255);t.exports=n},function(t,r,e){e(417);var n=e(14).Object,g=t.exports=function(y,i,k){return n.defineProperty(y,i,k)};n.defineProperty.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(29),y=e(40).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==y,sham:!g},{defineProperty:y})},function(t,r,e){var n=e(419),g=e(24).default;t.exports=function(y,i){if(g(y)!=="object"||y===null)return y;var k=y[n];if(k!==void 0){var L=k.call(y,i||"default");if(g(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(420)},function(t,r,e){t.exports=e(421)},function(t,r,e){var n=e(422);t.exports=n},function(t,r,e){var n=e(423);t.exports=n},function(t,r,e){var n=e(424);t.exports=n},function(t,r,e){e(425),e(230);var n=e(137);t.exports=n.f("toPrimitive")},function(t,r){},function(t,r,e){var n=e(18),g=e(427),y=Array.prototype;t.exports=function(i){var k=i.slice;return i===y||n(y,i)&&k===y.slice?g:k}},function(t,r,e){e(428);var n=e(27);t.exports=n("Array").slice},function(t,r,e){var n=e(1),g=e(87),y=e(133),i=e(30),k=e(114),L=e(49),$=e(47),V=e(101),z=e(21),re=e(116),oe=e(104),le=re("slice"),ue=z("species"),ie=Array,ae=Math.max;n({target:"Array",proto:!0,forced:!le},{slice:function(Fe,de){var Ne,Ve,ze,jt=$(this),kt=L(jt),Et=k(Fe,kt),lr=k(de===void 0?kt:de,kt);if(g(jt)&&(Ne=jt.constructor,(y(Ne)&&(Ne===ie||g(Ne.prototype))||i(Ne)&&(Ne=Ne[ue])===null)&&(Ne=void 0),Ne===ie||Ne===void 0))return oe(jt,Et,lr);for(Ve=new(Ne===void 0?ie:Ne)(ae(lr-Et,0)),ze=0;Et<lr;Et++,ze++)Et in jt&&V(Ve,ze,jt[Et]);return Ve.length=ze,Ve}})},function(t,r,e){var n=e(430);t.exports=n},function(t,r,e){var n=e(18),g=e(431),y=Array.prototype;t.exports=function(i){var k=i.some;return i===y||n(y,i)&&k===y.some?g:k}},function(t,r,e){e(432);var n=e(27);t.exports=n("Array").some},function(t,r,e){var n=e(1),g=e(69).some;n({target:"Array",proto:!0,forced:!e(86)("some")},{some:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(434);t.exports=n},function(t,r,e){var n=e(18),g=e(435),y=Array.prototype;t.exports=function(i){var k=i.splice;return i===y||n(y,i)&&k===y.splice?g:k}},function(t,r,e){e(436);var n=e(27);t.exports=n("Array").splice},function(t,r,e){var n=e(1),g=e(46),y=e(114),i=e(115),k=e(49),L=e(437),$=e(218),V=e(171),z=e(101),re=e(258),oe=e(116)("splice"),le=Math.max,ue=Math.min;n({target:"Array",proto:!0,forced:!oe},{splice:function(ie,ae){var Fe,de,Ne,Ve,ze,jt,kt=g(this),Et=k(kt),lr=y(ie,Et),tr=arguments.length;for(tr===0?Fe=de=0:tr===1?(Fe=0,de=Et-lr):(Fe=tr-2,de=ue(le(i(ae),0),Et-lr)),$(Et+Fe-de),Ne=V(kt,de),Ve=0;Ve<de;Ve++)(ze=lr+Ve)in kt&&z(Ne,Ve,kt[ze]);if(Ne.length=de,Fe<de){for(Ve=lr;Ve<Et-de;Ve++)jt=Ve+Fe,(ze=Ve+de)in kt?kt[jt]=kt[ze]:re(kt,jt);for(Ve=Et;Ve>Et-de+Fe;Ve--)re(kt,Ve-1)}else if(Fe>de)for(Ve=Et-de;Ve>lr;Ve--)jt=Ve+Fe-1,(ze=Ve+de-1)in kt?kt[jt]=kt[ze]:re(kt,jt);for(Ve=0;Ve<Fe;Ve++)kt[Ve+lr]=arguments[Ve+2];return L(kt,Et-de+Fe),Ne}})},function(t,r,e){var n=e(29),g=e(87),y=TypeError,i=Object.getOwnPropertyDescriptor,k=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(L){return L instanceof TypeError}}();t.exports=k?function(L,$){if(g(L)&&!i(L,"length").writable)throw y("Cannot set read only .length");return L.length=$}:function(L,$){return L.length=$}},function(t,r,e){var n=e(439);t.exports=n},function(t,r,e){var n=e(18),g=e(440),y=Array.prototype;t.exports=function(i){var k=i.sort;return i===y||n(y,i)&&k===y.sort?g:k}},function(t,r,e){e(441);var n=e(27);t.exports=n("Array").sort},function(t,r,e){var n=e(1),g=e(13),y=e(32),i=e(46),k=e(49),L=e(258),$=e(58),V=e(7),z=e(442),re=e(86),oe=e(443),le=e(444),ue=e(100),ie=e(445),ae=[],Fe=g(ae.sort),de=g(ae.push),Ne=V(function(){ae.sort(void 0)}),Ve=V(function(){ae.sort(null)}),ze=re("sort"),jt=!V(function(){if(ue)return ue<70;if(!(oe&&oe>3)){if(le)return!0;if(ie)return ie<603;var kt,Et,lr,tr,or="";for(kt=65;kt<76;kt++){switch(Et=String.fromCharCode(kt),kt){case 66:case 69:case 70:case 72:lr=3;break;case 68:case 71:lr=4;break;default:lr=2}for(tr=0;tr<47;tr++)ae.push({k:Et+tr,v:lr})}for(ae.sort(function(dr,cr){return cr.v-dr.v}),tr=0;tr<ae.length;tr++)Et=ae[tr].k.charAt(0),or.charAt(or.length-1)!==Et&&(or+=Et);return or!=="DGBEFHACIJK"}});n({target:"Array",proto:!0,forced:Ne||!Ve||!ze||!jt},{sort:function(kt){kt!==void 0&&y(kt);var Et=i(this);if(jt)return kt===void 0?Fe(Et):Fe(Et,kt);var lr,tr,or=[],dr=k(Et);for(tr=0;tr<dr;tr++)tr in Et&&de(or,Et[tr]);for(z(or,function(cr){return function(nr,ur){return ur===void 0?-1:nr===void 0?1:cr!==void 0?+cr(nr,ur)||0:$(nr)>$(ur)?1:-1}}(kt)),lr=k(or),tr=0;tr<lr;)Et[tr]=or[tr++];for(;tr<dr;)L(Et,tr++);return Et}})},function(t,r,e){var n=e(225),g=Math.floor,y=function(L,$){var V=L.length,z=g(V/2);return V<8?i(L,$):k(L,y(n(L,0,z),$),y(n(L,z),$),$)},i=function(L,$){for(var V,z,re=L.length,oe=1;oe<re;){for(z=oe,V=L[oe];z&&$(L[z-1],V)>0;)L[z]=L[--z];z!==oe++&&(L[z]=V)}return L},k=function(L,$,V,z){for(var re=$.length,oe=V.length,le=0,ue=0;le<re||ue<oe;)L[le+ue]=le<re&&ue<oe?z($[le],V[ue])<=0?$[le++]:V[ue++]:le<re?$[le++]:V[ue++];return L};t.exports=y},function(t,r,e){var n=e(72).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(72);t.exports=/MSIE|Trident/.test(n)},function(t,r,e){var n=e(72).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(447);t.exports=n},function(t,r,e){var n=e(18),g=e(448),y=Array.prototype;t.exports=function(i){var k=i.map;return i===y||n(y,i)&&k===y.map?g:k}},function(t,r,e){e(449);var n=e(27);t.exports=n("Array").map},function(t,r,e){var n=e(1),g=e(69).map;n({target:"Array",proto:!0,forced:!e(116)("map")},{map:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(451);t.exports=n},function(t,r,e){var n=e(18),g=e(452),y=Array.prototype;t.exports=function(i){var k=i.reduce;return i===y||n(y,i)&&k===y.reduce?g:k}},function(t,r,e){e(453);var n=e(27);t.exports=n("Array").reduce},function(t,r,e){var n=e(1),g=e(454).left,y=e(86),i=e(100),k=e(119);n({target:"Array",proto:!0,forced:!y("reduce")||!k&&i>79&&i<83},{reduce:function(L){var $=arguments.length;return g(this,L,$,$>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(32),g=e(46),y=e(129),i=e(49),k=TypeError,L=function($){return function(V,z,re,oe){n(z);var le=g(V),ue=y(le),ie=i(le),ae=$?ie-1:0,Fe=$?-1:1;if(re<2)for(;;){if(ae in ue){oe=ue[ae],ae+=Fe;break}if(ae+=Fe,$?ae<0:ie<=ae)throw k("Reduce of empty array with no initial value")}for(;$?ae>=0:ie>ae;ae+=Fe)ae in ue&&(oe=z(oe,ue[ae],ae,le));return oe}};t.exports={left:L(!1),right:L(!0)}},function(t,r,e){var n=e(456);t.exports=n},function(t,r,e){var n=e(18),g=e(457),y=Array.prototype;t.exports=function(i){var k=i.lastIndexOf;return i===y||n(y,i)&&k===y.lastIndexOf?g:k}},function(t,r,e){e(458);var n=e(27);t.exports=n("Array").lastIndexOf},function(t,r,e){var n=e(1),g=e(459);n({target:"Array",proto:!0,forced:g!==[].lastIndexOf},{lastIndexOf:g})},function(t,r,e){var n=e(83),g=e(47),y=e(115),i=e(49),k=e(86),L=Math.min,$=[].lastIndexOf,V=!!$&&1/[1].lastIndexOf(1,-0)<0,z=k("lastIndexOf"),re=V||!z;t.exports=re?function(oe){if(V)return n($,this,arguments)||0;var le=g(this),ue=i(le),ie=ue-1;for(arguments.length>1&&(ie=L(ie,y(arguments[1]))),ie<0&&(ie=ue+ie);ie>=0;ie--)if(ie in le&&le[ie]===oe)return ie||0;return-1}:$},function(t,r,e){e(259);var n=e(14);t.exports=n.setTimeout},function(t,r,e){var n=e(1),g=e(16),y=e(260)(g.setInterval,!0);n({global:!0,bind:!0,forced:g.setInterval!==y},{setInterval:y})},function(t,r){t.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"},function(t,r,e){var n=e(1),g=e(16),y=e(260)(g.setTimeout,!0);n({global:!0,bind:!0,forced:g.setTimeout!==y},{setTimeout:y})},function(t,r,e){var n=e(465);t.exports=n},function(t,r,e){var n=e(18),g=e(466),y=Array.prototype;t.exports=function(i){var k=i.filter;return i===y||n(y,i)&&k===y.filter?g:k}},function(t,r,e){e(467);var n=e(27);t.exports=n("Array").filter},function(t,r,e){var n=e(1),g=e(69).filter;n({target:"Array",proto:!0,forced:!e(116)("filter")},{filter:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){t.exports=e(469)},function(t,r,e){e(75);var n=e(73),g=e(31),y=e(18),i=e(470),k=Array.prototype,L={DOMTokenList:!0,NodeList:!0};t.exports=function($){var V=$.values;return $===k||y(k,$)&&V===k.values||g(L,n($))?i:V}},function(t,r,e){var n=e(471);t.exports=n},function(t,r,e){e(90),e(102);var n=e(27);t.exports=n("Array").values},function(t,r,e){t.exports=e(473)},function(t,r,e){var n=e(474);t.exports=n},function(t,r,e){var n=e(18),g=e(475),y=Array.prototype;t.exports=function(i){var k=i.every;return i===y||n(y,i)&&k===y.every?g:k}},function(t,r,e){e(476);var n=e(27);t.exports=n("Array").every},function(t,r,e){var n=e(1),g=e(69).every;n({target:"Array",proto:!0,forced:!e(86)("every")},{every:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){e(118),e(478);var n=e(14);t.exports=n.Array.from},function(t,r,e){var n=e(1),g=e(479);n({target:"Array",stat:!0,forced:!e(251)(function(y){Array.from(y)})},{from:g})},function(t,r,e){var n=e(36),g=e(20),y=e(46),i=e(480),k=e(241),L=e(133),$=e(49),V=e(101),z=e(242),re=e(140),oe=Array;t.exports=function(le){var ue=y(le),ie=L(this),ae=arguments.length,Fe=ae>1?arguments[1]:void 0,de=Fe!==void 0;de&&(Fe=n(Fe,ae>2?arguments[2]:void 0));var Ne,Ve,ze,jt,kt,Et,lr=re(ue),tr=0;if(!lr||this===oe&&k(lr))for(Ne=$(ue),Ve=ie?new this(Ne):oe(Ne);Ne>tr;tr++)Et=de?Fe(ue[tr],tr):ue[tr],V(Ve,tr,Et);else for(kt=(jt=z(ue,lr)).next,Ve=ie?new this:[];!(ze=g(kt,jt)).done;tr++)Et=de?i(jt,Fe,[ze.value,tr],!0):ze.value,V(Ve,tr,Et);return Ve.length=tr,Ve}},function(t,r,e){var n=e(38),g=e(243);t.exports=function(y,i,k,L){try{return L?i(n(k)[0],k[1]):i(k)}catch($){g(y,"throw",$)}}},function(t,r,e){t.exports=e(482)},function(t,r,e){var n=e(483);t.exports=n},function(t,r,e){var n=e(484);t.exports=n},function(t,r,e){var n=e(485);e(75),t.exports=n},function(t,r,e){e(90),e(118);var n=e(140);t.exports=n},function(t,r,e){e(224);var n=e(14);t.exports=n.Object.getOwnPropertySymbols},function(t,r,e){var n=e(488);t.exports=n},function(t,r,e){e(489);var n=e(14).Object,g=t.exports=function(y,i){return n.getOwnPropertyDescriptor(y,i)};n.getOwnPropertyDescriptor.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(7),y=e(47),i=e(97).f,k=e(29),L=g(function(){i(1)});n({target:"Object",stat:!0,forced:!k||L,sham:!k},{getOwnPropertyDescriptor:function($,V){return i(y($),V)}})},function(t,r,e){var n=e(491);t.exports=n},function(t,r,e){e(492);var n=e(14);t.exports=n.Object.getOwnPropertyDescriptors},function(t,r,e){var n=e(1),g=e(29),y=e(240),i=e(47),k=e(97),L=e(101);n({target:"Object",stat:!0,sham:!g},{getOwnPropertyDescriptors:function($){for(var V,z,re=i($),oe=k.f,le=y(re),ue={},ie=0;le.length>ie;)(z=oe(re,V=le[ie++]))!==void 0&&L(ue,V,z);return ue}})},function(t,r,e){var n=e(494);t.exports=n},function(t,r,e){e(495);var n=e(14).Object,g=t.exports=function(y,i){return n.defineProperties(y,i)};n.defineProperties.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(29),y=e(173).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==y,sham:!g},{defineProperties:y})},function(t,r,e){var n=e(12);typeof window<"u"&&(window.console||n.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(t,r,e){var n=e(498),g=e(527),y=e(268),i=e(529),k=e(538),L=e(541),$=e(542),V=e(543),z=e(545),re=e(546),oe=e(547),le=e(189),ue=e(551),ie=e(552),ae=e(558),Fe=e(183),de=e(271),Ne=e(560),Ve=e(94),ze=e(562),jt=e(182),kt=e(187),Et={};Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object DataView]"]=Et["[object Boolean]"]=Et["[object Date]"]=Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object Symbol]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Error]"]=Et["[object Function]"]=Et["[object WeakMap]"]=!1,t.exports=function lr(tr,or,dr,cr,nr,ur){var ar,gr=1&or,pr=2&or,yr=4&or;if(dr&&(ar=nr?dr(tr,cr,nr,ur):dr(tr)),ar!==void 0)return ar;if(!Ve(tr))return tr;var Sr=Fe(tr);if(Sr){if(ar=ue(tr),!gr)return $(tr,ar)}else{var wr=le(tr),Mr=wr=="[object Function]"||wr=="[object GeneratorFunction]";if(de(tr))return L(tr,gr);if(wr=="[object Object]"||wr=="[object Arguments]"||Mr&&!nr){if(ar=pr||Mr?{}:ae(tr),!gr)return pr?z(tr,k(ar,tr)):V(tr,i(ar,tr))}else{if(!Et[wr])return nr?tr:{};ar=ie(tr,wr,gr)}}ur||(ur=new n);var mr=ur.get(tr);if(mr)return mr;ur.set(tr,ar),ze(tr)?tr.forEach(function(Nr){ar.add(lr(Nr,or,dr,Nr,tr,ur))}):Ne(tr)&&tr.forEach(function(Nr,Pr){ar.set(Pr,lr(Nr,or,dr,Pr,tr,ur))});var _r=Sr?void 0:(yr?pr?oe:re:pr?kt:jt)(tr);return g(_r||tr,function(Nr,Pr){_r&&(Nr=tr[Pr=Nr]),y(ar,Pr,lr(Nr,or,dr,Pr,tr,ur))}),ar}},function(t,r,e){var n=e(145),g=e(504),y=e(505),i=e(506),k=e(507),L=e(508);function $(V){var z=this.__data__=new n(V);this.size=z.size}$.prototype.clear=g,$.prototype.delete=y,$.prototype.get=i,$.prototype.has=k,$.prototype.set=L,t.exports=$},function(t,r){t.exports=function(){this.__data__=[],this.size=0}},function(t,r,e){var n=e(146),g=Array.prototype.splice;t.exports=function(y){var i=this.__data__,k=n(i,y);return!(k<0)&&(k==i.length-1?i.pop():g.call(i,k,1),--this.size,!0)}},function(t,r,e){var n=e(146);t.exports=function(g){var y=this.__data__,i=n(y,g);return i<0?void 0:y[i][1]}},function(t,r,e){var n=e(146);t.exports=function(g){return n(this.__data__,g)>-1}},function(t,r,e){var n=e(146);t.exports=function(g,y){var i=this.__data__,k=n(i,g);return k<0?(++this.size,i.push([g,y])):i[k][1]=y,this}},function(t,r,e){var n=e(145);t.exports=function(){this.__data__=new n,this.size=0}},function(t,r){t.exports=function(e){var n=this.__data__,g=n.delete(e);return this.size=n.size,g}},function(t,r){t.exports=function(e){return this.__data__.get(e)}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(145),g=e(180),y=e(267);t.exports=function(i,k){var L=this.__data__;if(L instanceof n){var $=L.__data__;if(!g||$.length<199)return $.push([i,k]),this.size=++L.size,this;L=this.__data__=new y($)}return L.set(i,k),this.size=L.size,this}},function(t,r,e){var n=e(264),g=e(512),y=e(94),i=e(266),k=/^\[object .+?Constructor\]$/,L=Function.prototype,$=Object.prototype,V=L.toString,z=$.hasOwnProperty,re=RegExp("^"+V.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(oe){return!(!y(oe)||g(oe))&&(n(oe)?re:k).test(i(oe))}},function(t,r,e){var n=e(181),g=Object.prototype,y=g.hasOwnProperty,i=g.toString,k=n?n.toStringTag:void 0;t.exports=function(L){var $=y.call(L,k),V=L[k];try{L[k]=void 0;var z=!0}catch{}var re=i.call(L);return z&&($?L[k]=V:delete L[k]),re}},function(t,r){var e=Object.prototype.toString;t.exports=function(n){return e.call(n)}},function(t,r,e){var n,g=e(513),y=(n=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(i){return!!y&&y in i}},function(t,r,e){var n=e(59)["__core-js_shared__"];t.exports=n},function(t,r){t.exports=function(e,n){return e==null?void 0:e[n]}},function(t,r,e){var n=e(516),g=e(145),y=e(180);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(y||g),string:new n}}},function(t,r,e){var n=e(517),g=e(518),y=e(519),i=e(520),k=e(521);function L($){var V=-1,z=$==null?0:$.length;for(this.clear();++V<z;){var re=$[V];this.set(re[0],re[1])}}L.prototype.clear=n,L.prototype.delete=g,L.prototype.get=y,L.prototype.has=i,L.prototype.set=k,t.exports=L},function(t,r,e){var n=e(147);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,r){t.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(t,r,e){var n=e(147),g=Object.prototype.hasOwnProperty;t.exports=function(y){var i=this.__data__;if(n){var k=i[y];return k==="__lodash_hash_undefined__"?void 0:k}return g.call(i,y)?i[y]:void 0}},function(t,r,e){var n=e(147),g=Object.prototype.hasOwnProperty;t.exports=function(y){var i=this.__data__;return n?i[y]!==void 0:g.call(i,y)}},function(t,r,e){var n=e(147);t.exports=function(g,y){var i=this.__data__;return this.size+=this.has(g)?0:1,i[g]=n&&y===void 0?"__lodash_hash_undefined__":y,this}},function(t,r,e){var n=e(148);t.exports=function(g){var y=n(this,g).delete(g);return this.size-=y?1:0,y}},function(t,r){t.exports=function(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}},function(t,r,e){var n=e(148);t.exports=function(g){return n(this,g).get(g)}},function(t,r,e){var n=e(148);t.exports=function(g){return n(this,g).has(g)}},function(t,r,e){var n=e(148);t.exports=function(g,y){var i=n(this,g),k=i.size;return i.set(g,y),this.size+=i.size==k?0:1,this}},function(t,r){t.exports=function(e,n){for(var g=-1,y=e==null?0:e.length;++g<y&&n(e[g],g,e)!==!1;);return e}},function(t,r,e){var n=e(91),g=function(){try{var y=n(Object,"defineProperty");return y({},"",{}),y}catch{}}();t.exports=g},function(t,r,e){var n=e(149),g=e(182);t.exports=function(y,i){return y&&n(i,g(i),y)}},function(t,r){t.exports=function(e,n){for(var g=-1,y=Array(e);++g<e;)y[g]=n(g);return y}},function(t,r,e){var n=e(532),g=e(108),y=Object.prototype,i=y.hasOwnProperty,k=y.propertyIsEnumerable,L=n(function(){return arguments}())?n:function($){return g($)&&i.call($,"callee")&&!k.call($,"callee")};t.exports=L},function(t,r,e){var n=e(126),g=e(108);t.exports=function(y){return g(y)&&n(y)=="[object Arguments]"}},function(t,r){t.exports=function(){return!1}},function(t,r,e){var n=e(535),g=e(184),y=e(185),i=y&&y.isTypedArray,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(126),g=e(272),y=e(108),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(k){return y(k)&&g(k.length)&&!!i[n(k)]}},function(t,r,e){var n=e(186),g=e(537),y=Object.prototype.hasOwnProperty;t.exports=function(i){if(!n(i))return g(i);var k=[];for(var L in Object(i))y.call(i,L)&&L!="constructor"&&k.push(L);return k}},function(t,r,e){var n=e(273)(Object.keys,Object);t.exports=n},function(t,r,e){var n=e(149),g=e(187);t.exports=function(y,i){return y&&n(i,g(i),y)}},function(t,r,e){var n=e(94),g=e(186),y=e(540),i=Object.prototype.hasOwnProperty;t.exports=function(k){if(!n(k))return y(k);var L=g(k),$=[];for(var V in k)(V!="constructor"||!L&&i.call(k,V))&&$.push(V);return $}},function(t,r){t.exports=function(e){var n=[];if(e!=null)for(var g in Object(e))n.push(g);return n}},function(t,r,e){(function(n){var g=e(59),y=r&&!r.nodeType&&r,i=y&&typeof n=="object"&&n&&!n.nodeType&&n,k=i&&i.exports===y?g.Buffer:void 0,L=k?k.allocUnsafe:void 0;n.exports=function($,V){if(V)return $.slice();var z=$.length,re=L?L(z):new $.constructor(z);return $.copy(re),re}}).call(this,e(150)(t))},function(t,r){t.exports=function(e,n){var g=-1,y=e.length;for(n||(n=Array(y));++g<y;)n[g]=e[g];return n}},function(t,r,e){var n=e(149),g=e(188);t.exports=function(y,i){return n(y,g(y),i)}},function(t,r){t.exports=function(e,n){for(var g=-1,y=e==null?0:e.length,i=0,k=[];++g<y;){var L=e[g];n(L,g,e)&&(k[i++]=L)}return k}},function(t,r,e){var n=e(149),g=e(275);t.exports=function(y,i){return n(y,g(y),i)}},function(t,r,e){var n=e(278),g=e(188),y=e(182);t.exports=function(i){return n(i,y,g)}},function(t,r,e){var n=e(278),g=e(275),y=e(187);t.exports=function(i){return n(i,y,g)}},function(t,r,e){var n=e(91)(e(59),"DataView");t.exports=n},function(t,r,e){var n=e(91)(e(59),"Promise");t.exports=n},function(t,r,e){var n=e(91)(e(59),"WeakMap");t.exports=n},function(t,r){var e=Object.prototype.hasOwnProperty;t.exports=function(n){var g=n.length,y=new n.constructor(g);return g&&typeof n[0]=="string"&&e.call(n,"index")&&(y.index=n.index,y.input=n.input),y}},function(t,r,e){var n=e(190),g=e(554),y=e(555),i=e(556),k=e(557);t.exports=function(L,$,V){var z=L.constructor;switch($){case"[object ArrayBuffer]":return n(L);case"[object Boolean]":case"[object Date]":return new z(+L);case"[object DataView]":return g(L,V);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return k(L,V);case"[object Map]":return new z;case"[object Number]":case"[object String]":return new z(L);case"[object RegExp]":return y(L);case"[object Set]":return new z;case"[object Symbol]":return i(L)}}},function(t,r,e){var n=e(59).Uint8Array;t.exports=n},function(t,r,e){var n=e(190);t.exports=function(g,y){var i=y?n(g.buffer):g.buffer;return new g.constructor(i,g.byteOffset,g.byteLength)}},function(t,r){var e=/\w*$/;t.exports=function(n){var g=new n.constructor(n.source,e.exec(n));return g.lastIndex=n.lastIndex,g}},function(t,r,e){var n=e(181),g=n?n.prototype:void 0,y=g?g.valueOf:void 0;t.exports=function(i){return y?Object(y.call(i)):{}}},function(t,r,e){var n=e(190);t.exports=function(g,y){var i=y?n(g.buffer):g.buffer;return new g.constructor(i,g.byteOffset,g.length)}},function(t,r,e){var n=e(559),g=e(277),y=e(186);t.exports=function(i){return typeof i.constructor!="function"||y(i)?{}:n(g(i))}},function(t,r,e){var n=e(94),g=Object.create,y=function(){function i(){}return function(k){if(!n(k))return{};if(g)return g(k);i.prototype=k;var L=new i;return i.prototype=void 0,L}}();t.exports=y},function(t,r,e){var n=e(561),g=e(184),y=e(185),i=y&&y.isMap,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(189),g=e(108);t.exports=function(y){return g(y)&&n(y)=="[object Map]"}},function(t,r,e){var n=e(563),g=e(184),y=e(185),i=y&&y.isSet,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(189),g=e(108);t.exports=function(y){return g(y)&&n(y)=="[object Set]"}},function(t,r,e){var n=e(2),g=e(5),y=e(8),i=e(63),k=e(6),L=e(9),$=e(4),V=e(3),z=e(70),re=e(0),oe=e(12),le=e(48),ue={};function ie(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};!ze.logLevel&&ze.debug&&(ze.logLevel="debug"),re.merge(this,{options:ze,debugEnable:!1,api:"log",style:"color:blue;",logLevel:ze.logLevel&&ze.logLevel.toLowerCase()||"off",debug:re.emptyFunc,log:re.emptyFunc,info:re.emptyFunc,warn:re.emptyFunc,error:re.emptyFunc}),this.prefix=ze.prefix||"",this.localEnable=ue.enable&&ze.dbLog&&ze.account,this.setDebug(ze.debug),this.localEnable&&(this._local=new ue(ze.account,ze.expire),this._local.logError=this.error)}ue=e(573);var ae=ie.prototype,Fe=["Chrome","Safari","Firefox"],de={debug:1e3,log:2e3,info:3e3,warn:4e3,error:5e3,off:6e3};function Ne(ze){var jt,kt=[];return n(jt=g(de)).call(jt,function(Et){de[Et]>=de[ze]&&kt.push(Et)}),kt}ae.setDebug=function(){var ze=arguments.length>0&&arguments[0]!==void 0&&arguments[0],jt=this;if(jt.debugEnable=ze||jt.logLevel==="debug",ze.style&&(jt.style=ze.style),re.exist(console)){if(jt.logLevel!=="off"){var kt=console,Et=Ne(jt.logLevel);n(Et).call(Et,function(tr){jt[tr]=function(){var or=jt.formatArgsAndSave(arguments,tr);y(Fe).call(Fe,z.name)!==-1&&re.isString(or[0])&&(or[0]="%c"+or[0],i(or).call(or,1,0,jt.style)),jt._log(tr,or)}}),jt.options.logFunc?jt._log=function(){}:jt._log=function(tr,or){if(tr==="debug"&&(tr="log"),kt[tr])try{kt[tr].apply?jt.chrome(tr,or):jt.ie(tr,or)}catch{}},jt.chrome=function(tr,or){y(Fe).call(Fe,z.name)!==-1?kt[tr].apply(kt,or):jt.ie(tr,or)},jt.ie=function(tr,or){n(or).call(or,function(dr){kt[tr](k(dr,null,4))})}}else if(oe.isRN||this.localEnable||this.options.logFunc){var lr=!oe.isRN&&!this.localEnable;jt.log=function(){jt.formatArgsAndSave(arguments,"log",lr)},jt.info=function(){jt.formatArgsAndSave(arguments,"info",lr)},jt.warn=function(){jt.formatArgsAndSave(arguments,"warn",lr)},jt.error=function(){jt.formatArgsAndSave(arguments,"error",lr)},jt.debug=function(){jt.formatArgsAndSave(arguments,"log",lr)}}}},ae.destroy=function(){this.localEnable=!1,this.log=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.debug=function(){},this._local&&this._local.destroy()},ae.formatArgsAndSave=function(ze,jt,kt){var Et,lr;ze=L([]).call(ze,0);var tr=new Date,or=Ve(tr.getMonth()+1)+"-"+Ve(tr.getDate())+" "+Ve(tr.getHours())+":"+Ve(tr.getMinutes())+":"+Ve(tr.getSeconds())+":"+Ve(tr.getMilliseconds(),3),dr=$(Et=$(lr="[NIM ".concat(jt.toUpperCase()," ")).call(lr,or," ")).call(Et,this.prefix.toUpperCase(),"]  "),cr="";re.isString(ze[0])?ze[0]=dr+ze[0]:i(ze).call(ze,0,0,dr),n(ze).call(ze,function(ur,ar){re.isArray(ur)||re.isObject(ur)?(ze[ar]=re.simpleClone(ur),cr+=k(ze[ar])+" "):cr+=ur+" "});var nr=this.options.logFunc;return nr&&re.isFunction(nr[jt])&&nr[jt].apply(nr,ze),!kt&&this.writeLocalLog(cr,jt,+tr),ze},ae.writeLocalLog=function(ze,jt,kt){return oe.isRN?this.writeLocalLogRN(ze,jt,kt):oe.isBrowser?this.writeLocalLogBrowser(ze,jt,kt):void 0};var Ve=function(ze,jt){jt=jt||2;for(var kt=""+ze;kt.length<jt;)kt="0"+kt;return kt};ae.writeLocalLogBrowser=function(ze,jt,kt){this._local&&this._local.saveLog({log:ze,level:jt,time:kt})},ae.writeLocalLogRN=function(ze,jt){if(le.rnfs&&le.rnfs.writeFile&&le.rnfs.appendFile&&le.rnfs.DocumentDirectoryPath&&/error|warn|info/.test(jt)){var kt,Et=le.rnfs,lr=Et.size/2-256;ze+=`\r
`,Et.nimPromise=Et.nimPromise.then(function(){return kt=tr(Et.nimIndex),Et.exists(kt)}).then(function(or){return or?Et.appendFile(kt,ze):Et.writeFile(kt,ze)}).then(function(){return Et.stat(kt)}).then(function(or){if(or.size>lr)return Et.nimIndex++,Et.nimIndex>1&&(Et.nimIndex=Et.nimIndex%2),Et.unlink(tr(Et.nimIndex)).catch(function(){return V.resolve()})}).catch(function(){})}function tr(or){return le.rnfs.DocumentDirectoryPath+"/nimlog_"+or+".log"}},t.exports=ie},function(t,r,e){var n=e(566);t.exports=n},function(t,r,e){e(567);var n=e(14);t.exports=n.parseFloat},function(t,r,e){var n=e(1),g=e(568);n({global:!0,forced:parseFloat!=g},{parseFloat:g})},function(t,r,e){var n=e(16),g=e(7),y=e(13),i=e(58),k=e(191).trim,L=e(151),$=y("".charAt),V=n.parseFloat,z=n.Symbol,re=z&&z.iterator,oe=1/V(L+"-0")!=-1/0||re&&!g(function(){V(Object(re))});t.exports=oe?function(le){var ue=k(i(le)),ie=V(ue);return ie===0&&$(ue,0)=="-"?-0:ie}:V},function(t,r,e){var n=e(570);t.exports=n},function(t,r,e){e(571);var n=e(14);t.exports=n.parseInt},function(t,r,e){var n=e(1),g=e(572);n({global:!0,forced:parseInt!=g},{parseInt:g})},function(t,r,e){var n=e(16),g=e(7),y=e(13),i=e(58),k=e(191).trim,L=e(151),$=n.parseInt,V=n.Symbol,z=V&&V.iterator,re=/^[+-]?0x/i,oe=y(re.exec),le=$(L+"08")!==8||$(L+"0x16")!==22||z&&!g(function(){$(Object(z))});t.exports=le?function(ue,ie){var ae=k(i(ue));return $(ae,ie>>>0||(oe(re,ae)?16:10))}:$},function(t,r,e){var n=e(9),g=e(22),y=e(3),i=e(574),k=e(575),L=e(0).getGlobal(),$=e(70).name,V=typeof i=="function",z=L.indexedDB&&!/^(IE)$/.test($);function re(le,ue){this.logWorker=null,this.db=null,this.tabId=(65536*(1+Math.random())|0).toString(16).substring(1),this.logQueue=[],this.callbackList=[],this.preTime=null,this.lastTime=+new Date,this.saveLogTimer=void 0,this.initLogLocal({name:le,expire:ue})}var oe=re.prototype;re.enable=!0,oe.saveLog=function(le){var ue=this;le.tabId=this.tabId;try{if(!re.enable)return;var ie,ae=this.logQueue.length,Fe=this.logQueue[ae-1];if(le.time===this.preTime&&Fe)return void(Fe.log+=`\r
`+this.tabId+" "+le.log);this.logQueue.length>50||le.time-this.lastTime>3e3&&this.logQueue.length>0?(this.doSaveLog(n(ie=this.logQueue).call(ie,0)),this.lastTime=Fe.time,this.logQueue=[],clearTimeout(this.saveLogTimer)):(clearTimeout(this.saveLogTimer),this.saveLogTimer=g(function(){var de;ue.logQueue.length>0&&(Fe=ue.logQueue[ue.logQueue.length-1],ue.doSaveLog(n(de=ue.logQueue).call(de,0)),ue.lastTime=Fe.time,ue.logQueue=[])},3e3-(le.time-this.lastTime))),this.logQueue.push(le),this.preTime=le.time}catch(de){console.error("saveLog Error",de)}},oe.destroy=function(){if(this.logQueue.length>0){var le,ue=this.logQueue[this.logQueue.length-1];this.doSaveLog(n(le=this.logQueue).call(le,0)),this.lastTime=ue.time,this.logQueue=[]}clearTimeout(this.saveLogTimer)},oe.doSaveLog=function(){},oe.initLogLocal=function(){},oe.fetchLog=function(){},oe.deleteLogs=function(){},oe.logError=function(){},z?V?(oe.doSaveLog=function(le){this.logWorker.postMessage(le)},oe.initLogLocal=function(le){var ue=this;this.logWorker=new i({}),this.logWorker.onmessage=function(ie){var ae=ie.data||{};switch(ae.type){case"fetchDone":ue.fetchLogDone(ae.code,ae.msg);break;case"error":ue.logError(ae.msg)}},this.logWorker.postMessage({type:"init",msg:le})},oe.fetchLog=function(){var le=this;return new y(function(ue,ie){le.callbackList.length===0&&le.logWorker.postMessage({type:"fetch"}),le.callbackList.push(ue),le.callbackList.push(ie)})},oe.fetchLogDone=function(le,ue){for(var ie=le===200?0:1,ae=0;ae<this.callbackList.length/2;ae++)this.callbackList[2*ae+ie](ue);this.callbackList=[]},oe.deleteLogs=function(le){return this.logWorker.postMessage({type:"delete",msg:le}),y.resolve()}):(oe.doSaveLog=function(le){var ue=this;this.db.putLog(le).catch(function(ie){ue.logError({msg:"putLog error",error:ie})})},oe.initLogLocal=function(le){var ue=this;this.db=new k(le),this.db.init().catch(function(ie){ue.logError({msg:"dbLog init error",error:ie})})},oe.fetchLog=function(){return this.db.getAllLogs()},oe.deleteLogs=function(le){return this.db.deleteLogs(le)}):re.enable=!1,t.exports=re},function(t,r,e){e.r(r),e.d(r,"default",function(){return y});var n=e(304),g=e.n(n);function y(){return g()(`/*!
 * 
 * VERSION: 9.16.2
 * Git Hash: 1ddefb74af2685d8546990b4a578f520ed738e86
 * 
 * Create At: 2024/5/22 下午2:28:56
 * 
 * Target: NIM_Web_log.worker
 */!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=109)}([function(t,n,r){"use strict";var e=r(1),o=r(41),i=r(78),c=r(2),u=r(43).f,a=r(84),f=r(13),s=r(34),p=r(19),l=r(8),v=function(t){var n=function(r,e,i){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,e)}return new t(r,e,i)}return o(t,this,arguments)};return n.prototype=t.prototype,n};t.exports=function(t,n){var r,o,d,y,h,m,g,x,b,w=t.target,S=t.global,j=t.stat,O=t.proto,P=S?e:j?e[w]:(e[w]||{}).prototype,T=S?f:f[w]||p(f,w,{})[w],A=T.prototype;for(y in n)o=!(r=a(S?y:w+(j?".":"#")+y,t.forced))&&P&&l(P,y),m=T[y],o&&(g=t.dontCallGetSet?(b=u(P,y))&&b.value:P[y]),h=o&&g?g:n[y],o&&typeof m==typeof h||(x=t.bind&&o?s(h,e):t.wrap&&o?v(h):O&&c(h)?i(h):h,(t.sham||h&&h.sham||m&&m.sham)&&p(x,"sham",!0),p(T,y,x),O&&(l(f,d=w+"Prototype")||p(f,d,{}),p(f[d],y,h),t.real&&A&&(r||!A[y])&&p(A,y,h)))}},function(t,n,r){(function(n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,r(77))},function(t,n,r){var e=r(79),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},function(t,n,r){var e=r(13),o=r(8),i=r(75),c=r(16).f;t.exports=function(t){var n=e.Symbol||(e.Symbol={});o(n,t)||c(n,t,{value:i.f(t)})}},function(t,n,r){var e=r(1),o=r(33),i=r(8),c=r(60),u=r(24),a=r(82),f=o("wks"),s=e.Symbol,p=s&&s.for,l=a?s:s&&s.withoutSetter||c;t.exports=function(t){if(!i(f,t)||!u&&"string"!=typeof f[t]){var n="Symbol."+t;u&&i(s,t)?f[t]=s[t]:f[t]=a&&p?p(n):l(n)}return f[t]}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.call,c=e&&o.bind.bind(i,i);t.exports=e?c:function(t){return function(){return i.apply(t,arguments)}}},function(t,n,r){var e=r(42),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,r){var e=r(6),o=r(25),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,r){var e=r(13),o=r(1),i=r(2),c=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?c(e[t])||c(o[t]):e[t]&&e[t][n]||o[t]&&o[t][n]}},function(t,n,r){var e=r(2),o=r(79),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},function(t,n,r){var e=r(5);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,r){var e=r(10),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},function(t,n){t.exports={}},function(t,n,r){var e=r(6);t.exports=e({}.isPrototypeOf)},function(t,n){t.exports=!0},function(t,n,r){var e=r(11),o=r(83),i=r(85),c=r(12),u=r(45),a=TypeError,f=Object.defineProperty,s=Object.getOwnPropertyDescriptor;n.f=e?i?function(t,n,r){if(c(t),n=u(n),c(r),"function"==typeof t&&"prototype"===n&&"value"in r&&"writable"in r&&!r.writable){var e=s(t,n);e&&e.writable&&(t[n]=r.value,r={configurable:"configurable"in r?r.configurable:e.configurable,enumerable:"enumerable"in r?r.enumerable:e.enumerable,writable:!1})}return f(t,n,r)}:f:function(t,n,r){if(c(t),n=u(n),c(r),o)try{return f(t,n,r)}catch(t){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},function(t,n,r){var e=r(81),o=r(57);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(11),o=r(16),i=r(20);t.exports=e?function(t,n,r){return o.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(19);t.exports=function(t,n,r,o){return o&&o.enumerable?t[n]=r:e(t,n,r),t}},function(t,n,r){"use strict";var e=r(17),o=TypeError,i=function(t){var n,r;this.promise=new t((function(t,e){if(void 0!==n||void 0!==r)throw o("Bad Promise constructor");n=t,r=e})),this.resolve=e(n),this.reject=e(r)};t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(6),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,r){var e=r(47),o=r(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},function(t,n,r){var e=r(57),o=Object;t.exports=function(t){return o(e(t))}},function(t,n,r){var e=r(124);t.exports=function(t){return e(t.length)}},function(t,n){t.exports={}},function(t,n,r){var e=r(70),o=r(2),i=r(23),c=r(4)("toStringTag"),u=Object,a="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=u(t),c))?r:a?i(n):"Object"==(e=i(n))&&o(n.callee)?"Arguments":e}},function(t,n,r){var e=r(70),o=r(16).f,i=r(19),c=r(8),u=r(136),a=r(4)("toStringTag");t.exports=function(t,n,r,f){if(t){var s=r?t:t.prototype;c(s,a)||o(s,a,{configurable:!0,value:n}),f&&!e&&i(s,"toString",u)}}},function(t,n,r){var e=r(1);t.exports=e.Promise},function(t,n,r){var e=r(9);t.exports=e("navigator","userAgent")||""},function(t,n){var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,r){var e=r(15),o=r(59);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.27.1",mode:e?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,r){var e=r(78),o=r(17),i=r(42),c=e(e.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?c(t,n):function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(34),o=r(7),i=r(12),c=r(32),u=r(127),a=r(26),f=r(14),s=r(128),p=r(89),l=r(129),v=TypeError,d=function(t,n){this.stopped=t,this.result=n},y=d.prototype;t.exports=function(t,n,r){var h,m,g,x,b,w,S,j=r&&r.that,O=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=e(n,j),k=function(t){return h&&l(h,"normal",t),new d(!0,t)},I=function(t){return O?(i(t),A?E(t[0],t[1],k):E(t[0],t[1])):A?E(t,k):E(t)};if(P)h=t.iterator;else if(T)h=t;else{if(!(m=p(t)))throw v(c(t)+" is not iterable");if(u(m)){for(g=0,x=a(t);x>g;g++)if((b=I(t[g]))&&f(y,b))return b;return new d(!1)}h=s(t,m)}for(w=P?t.next:h.next;!(S=o(w,h)).done;){try{b=I(S.value)}catch(t){l(h,"throw",t)}if("object"==typeof b&&b&&f(y,b))return b}return new d(!1)}},function(t,n,r){var e=r(28),o=String;t.exports=function(t){if("Symbol"===e(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,r){var e=r(1),o=r(30),i=r(2),c=r(84),u=r(94),a=r(4),f=r(147),s=r(98),p=r(15),l=r(47),v=o&&o.prototype,d=a("species"),y=!1,h=i(e.PromiseRejectionEvent),m=c("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(p&&(!v.catch||!v.finally))return!0;if(!l||l<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),e=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=e,!(y=r.then((function(){}))instanceof e))return!0}return!n&&(f||s)&&!h}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:h,SUBCLASSING:y}},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13);t.exports=function(t){return e[t+"Prototype"]}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?c.bind(i):function(){return c.apply(i,arguments)})},function(t,n,r){var e=r(5);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n,r){var e=r(11),o=r(7),i=r(80),c=r(20),u=r(18),a=r(45),f=r(8),s=r(83),p=Object.getOwnPropertyDescriptor;n.f=e?p:function(t,n){if(t=u(t),n=a(n),s)try{return p(t,n)}catch(t){}if(f(t,n))return c(!o(i.f,t,n),t[n])}},function(t,n){t.exports=function(t){return null==t}},function(t,n,r){var e=r(115),o=r(46);t.exports=function(t){var n=e(t,"string");return o(n)?n:n+""}},function(t,n,r){var e=r(9),o=r(2),i=r(14),c=r(82),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var n=e("Symbol");return o(n)&&i(n.prototype,u(t))}},function(t,n,r){var e,o,i=r(1),c=r(31),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,s=f&&f.v8;s&&(o=(e=s.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&c&&(!(e=c.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=c.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},function(t,n,r){var e=r(33),o=r(60),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n,r){var e,o=r(12),i=r(87),c=r(67),u=r(49),a=r(88),f=r(61),s=r(48),p=s("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\\/script>"},d=function(t){t.write(v("")),t.close();var n=t.parentWindow.Object;return t=null,n},y=function(){try{e=new ActiveXObject("htmlfile")}catch(t){}var t,n;y="undefined"!=typeof document?document.domain&&e?d(e):((n=f("iframe")).style.display="none",a.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):d(e);for(var r=c.length;r--;)delete y.prototype[c[r]];return y()};u[p]=!0,t.exports=Object.create||function(t,n){var r;return null!==t?(l.prototype=o(t),r=new l,l.prototype=null,r[p]=t):r=y(),void 0===n?r:i.f(r,n)}},function(t,n,r){var e,o,i,c=r(133),u=r(1),a=r(10),f=r(19),s=r(8),p=r(59),l=r(48),v=r(49),d=u.TypeError,y=u.WeakMap;if(c||p.state){var h=p.state||(p.state=new y);h.get=h.get,h.has=h.has,h.set=h.set,e=function(t,n){if(h.has(t))throw d("Object already initialized");return n.facade=t,h.set(t,n),n},o=function(t){return h.get(t)||{}},i=function(t){return h.has(t)}}else{var m=l("state");v[m]=!0,e=function(t,n){if(s(t,m))throw d("Object already initialized");return n.facade=t,f(t,m,n),n},o=function(t){return s(t,m)?t[m]:{}},i=function(t){return s(t,m)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=o(n)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}}}},function(t,n,r){var e=r(23),o=r(1);t.exports="process"==e(o.process)},function(t,n,r){var e=r(6);t.exports=e([].slice)},function(t,n,r){r(71);var e=r(158),o=r(1),i=r(28),c=r(19),u=r(27),a=r(4)("toStringTag");for(var f in e){var s=o[f],p=s&&s.prototype;p&&i(p)!==a&&c(p,a,f),u[f]=u.Array}},function(t,n,r){var e=r(5),o=r(4),i=r(47),c=o("species");t.exports=function(t){return i>=51||!e((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,r){var e=r(34),o=r(6),i=r(81),c=r(25),u=r(26),a=r(103),f=o([].push),s=function(t){var n=1==t,r=2==t,o=3==t,s=4==t,p=6==t,l=7==t,v=5==t||p;return function(d,y,h,m){for(var g,x,b=c(d),w=i(b),S=e(y,h),j=u(w),O=0,P=m||a,T=n?P(d,j):r||l?P(d,0):void 0;j>O;O++)if((v||O in w)&&(x=S(g=w[O],O,b),t))if(n)T[O]=x;else if(x)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:f(T,g)}else switch(t){case 4:return!1;case 7:f(T,g)}return p?-1:o||s?s:T}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},function(t,n,r){var e=r(44),o=TypeError;t.exports=function(t){if(e(t))throw o("Can't call method on "+t);return t}},function(t,n,r){var e=r(17),o=r(44);t.exports=function(t,n){var r=t[n];return o(r)?void 0:e(r)}},function(t,n,r){var e=r(1),o=r(117),i=e["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,r){var e=r(6),o=0,i=Math.random(),c=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+i,36)}},function(t,n,r){var e=r(1),o=r(10),i=e.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},function(t,n,r){var e=r(8),o=r(2),i=r(25),c=r(48),u=r(118),a=c("IE_PROTO"),f=Object,s=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=i(t);if(e(n,a))return n[a];var r=n.constructor;return o(r)&&n instanceof r?r.prototype:n instanceof f?s:null}},function(t,n,r){var e=r(6),o=r(12),i=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,r={};try{(t=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),n=r instanceof Array}catch(t){}return function(r,e){return o(r),i(e),n?t(r,e):r.__proto__=e,r}}():void 0)},function(t,n,r){var e=r(86),o=r(67).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(66),o=Math.max,i=Math.min;t.exports=function(t,n){var r=e(t);return r<0?o(r+n,0):i(r,n)}},function(t,n,r){var e=r(123);t.exports=function(t){var n=+t;return n!=n||0===n?0:e(n)}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(86),o=r(67);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n,r){var e={};e[r(4)("toStringTag")]="z",t.exports="[object z]"===String(e)},function(t,n,r){"use strict";var e=r(18),o=r(132),i=r(27),c=r(51),u=r(16).f,a=r(90),f=r(92),s=r(15),p=r(11),l=c.set,v=c.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:e(t),index:0,kind:n})}),(function(){var t=v(this),n=t.target,r=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,f(void 0,!0)):f("keys"==r?e:"values"==r?n[e]:[e,n[e]],!1)}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&p&&"values"!==d.name)try{u(d,"name",{value:"values"})}catch(t){}},function(t,n){},function(t,n,r){var e=r(6),o=r(5),i=r(2),c=r(28),u=r(9),a=r(94),f=function(){},s=[],p=u("Reflect","construct"),l=/^\\s*(?:class|function)\\b/,v=e(l.exec),d=!l.exec(f),y=function(t){if(!i(t))return!1;try{return p(f,s,t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!p||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},function(t,n,r){"use strict";var e=r(45),o=r(16),i=r(20);t.exports=function(t,n,r){var c=e(n);c in t?o.f(t,c,i(0,r)):t[c]=r}},function(t,n,r){var e=r(4);n.f=e},function(t,n,r){t.exports=r(111)},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(23),o=r(6);t.exports=function(t){if("Function"===e(t))return o(t)}},function(t,n){var r="object"==typeof document&&document.all,e=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:e}},function(t,n,r){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!e.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},function(t,n,r){var e=r(6),o=r(5),i=r(23),c=Object,u=e("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):c(t)}:c},function(t,n,r){var e=r(24);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,r){var e=r(11),o=r(5),i=r(61);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,r){var e=r(5),o=r(2),i=/#|\\.prototype\\./,c=function(t,n){var r=a[u(t)];return r==s||r!=f&&(o(n)?e(n):!!n)},u=c.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=c.data={},f=c.NATIVE="N",s=c.POLYFILL="P";t.exports=c},function(t,n,r){var e=r(11),o=r(5);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,r){var e=r(6),o=r(8),i=r(18),c=r(122).indexOf,u=r(49),a=e([].push);t.exports=function(t,n){var r,e=i(t),f=0,s=[];for(r in e)!o(u,r)&&o(e,r)&&a(s,r);for(;n.length>f;)o(e,r=n[f++])&&(~c(s,r)||a(s,r));return s}},function(t,n,r){var e=r(11),o=r(85),i=r(16),c=r(12),u=r(18),a=r(69);n.f=e&&!o?Object.defineProperties:function(t,n){c(t);for(var r,e=u(n),o=a(n),f=o.length,s=0;f>s;)i.f(t,r=o[s++],e[r]);return t}},function(t,n,r){var e=r(9);t.exports=e("document","documentElement")},function(t,n,r){var e=r(28),o=r(58),i=r(44),c=r(27),u=r(4)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||c[e(t)]}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(15),c=r(134),u=r(2),a=r(135),f=r(62),s=r(63),p=r(29),l=r(19),v=r(21),d=r(4),y=r(27),h=r(91),m=c.PROPER,g=c.CONFIGURABLE,x=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,w=d("iterator"),S=function(){return this};t.exports=function(t,n,r,c,d,h,j){a(r,n,c);var O,P,T,A=function(t){if(t===d&&L)return L;if(!b&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},E=n+" Iterator",k=!1,I=t.prototype,D=I[w]||I["@@iterator"]||d&&I[d],L=!b&&D||A(d),_="Array"==n&&I.entries||D;if(_&&(O=f(_.call(new t)))!==Object.prototype&&O.next&&(i||f(O)===x||(s?s(O,x):u(O[w])||v(O,w,S)),p(O,E,!0,!0),i&&(y[E]=S)),m&&"values"==d&&D&&"values"!==D.name&&(!i&&g?l(I,"name","values"):(k=!0,L=function(){return o(D,this)})),d)if(P={values:A("values"),keys:h?L:A("keys"),entries:A("entries")},j)for(T in P)(b||k||!(T in I))&&v(I,T,P[T]);else e({target:n,proto:!0,forced:b||k},P);return i&&!j||I[w]===L||v(I,w,L,{name:d}),y[n]=L,P}},function(t,n,r){"use strict";var e,o,i,c=r(5),u=r(2),a=r(10),f=r(50),s=r(62),p=r(21),l=r(4),v=r(15),d=l("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(e=o):y=!0),!a(e)||c((function(){var t={};return e[d].call(t)!==t}))?e={}:v&&(e=f(e)),u(e[d])||p(e,d,(function(){return this})),t.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:y}},function(t,n){t.exports=function(t,n){return{value:t,done:n}}},function(t,n,r){var e=r(12),o=r(141),i=r(44),c=r(4)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||i(r=e(u)[c])?n:o(r)}},function(t,n,r){var e=r(6),o=r(2),i=r(59),c=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return c(t)}),t.exports=i.inspectSource},function(t,n,r){var e,o,i,c,u=r(1),a=r(41),f=r(34),s=r(2),p=r(8),l=r(5),v=r(88),d=r(53),y=r(61),h=r(96),m=r(97),g=r(52),x=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.Dispatch,j=u.Function,O=u.MessageChannel,P=u.String,T=0,A={};try{e=u.location}catch(t){}var E=function(t){if(p(A,t)){var n=A[t];delete A[t],n()}},k=function(t){return function(){E(t)}},I=function(t){E(t.data)},D=function(t){u.postMessage(P(t),e.protocol+"//"+e.host)};x&&b||(x=function(t){h(arguments.length,1);var n=s(t)?t:j(t),r=d(arguments,1);return A[++T]=function(){a(n,void 0,r)},o(T),T},b=function(t){delete A[t]},g?o=function(t){w.nextTick(k(t))}:S&&S.now?o=function(t){S.now(k(t))}:O&&!m?(c=(i=new O).port2,i.port1.onmessage=I,o=f(c.postMessage,c)):u.addEventListener&&s(u.postMessage)&&!u.importScripts&&e&&"file:"!==e.protocol&&!l(D)?(o=D,u.addEventListener("message",I,!1)):o="onreadystatechange"in y("script")?function(t){v.appendChild(y("script")).onreadystatechange=function(){v.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:x,clear:b}},function(t,n){var r=TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,r){var e=r(31);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)},function(t,n){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,n,r){var e=r(30),o=r(149),i=r(38).CONSTRUCTOR;t.exports=i||!o((function(t){e.all(t).then(void 0,(function(){}))}))},function(t,n,r){var e=r(12),o=r(10),i=r(22);t.exports=function(t,n){if(e(t),o(n)&&n.constructor===t)return n;var r=i.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(157).charAt,o=r(36),i=r(51),c=r(90),u=r(92),a=i.set,f=i.getterFor("String Iterator");c(String,"String",(function(t){a(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=f(this),r=n.string,o=n.index;return o>=r.length?u(void 0,!0):(t=e(r,o),n.index+=t.length,u(t,!1))}))},function(t,n,r){t.exports=r(159)},function(t,n,r){var e=r(168);t.exports=function(t,n){return new(e(t))(0===n?0:n)}},function(t,n,r){"use strict";var e=r(0),o=r(5),i=r(39),c=r(10),u=r(25),a=r(26),f=r(177),s=r(74),p=r(103),l=r(55),v=r(4),d=r(47),y=v("isConcatSpreadable"),h=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!c(t))return!1;var n=t[y];return void 0!==n?!!n:i(t)};e({target:"Array",proto:!0,arity:1,forced:!h||!m},{concat:function(t){var n,r,e,o,i,c=u(this),l=p(c,0),v=0;for(n=-1,e=arguments.length;n<e;n++)if(g(i=-1===n?c:arguments[n]))for(o=a(i),f(v+o),r=0;r<o;r++,v++)r in i&&s(l,v,i[r]);else f(v+1),s(l,v++,i);return l.length=v,l}})},function(t,n,r){var e=r(7),o=r(9),i=r(4),c=r(21);t.exports=function(){var t=o("Symbol"),n=t&&t.prototype,r=n&&n.valueOf,u=i("toPrimitive");n&&!n[u]&&c(n,u,(function(t){return e(r,this)}),{arity:1})}},function(t,n,r){var e=r(24);t.exports=e&&!!Symbol.for&&!!Symbol.keyFor},function(t,n,r){r(3)("iterator")},function(t,n,r){"use strict";var e,o=r(1),i=r(41),c=r(2),u=r(220),a=r(31),f=r(53),s=r(96),p=o.Function,l=/MSIE .\\./.test(a)||u&&((e=o.Bun.version.split(".")).length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2]));t.exports=function(t,n){var r=n?2:1;return l?function(e,o){var u=s(arguments.length,1)>r,a=c(e)?e:p(e),l=u?f(arguments,r):[],v=u?function(){i(a,this,l)}:a;return n?t(v,o):t(v)}:t}},function(t,n,r){var e=r(110),o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":r=t.data.msg,(o=new e(r)).init().catch((function(t){postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})}));break;case"fetch":o.getAllLogs().then((function(t){postMessage({type:"fetchDone",code:200,msg:t})})).catch((function(t){postMessage({type:"fetchDone",code:500,msg:i(t)})}));break;case"delete":o.deleteLogs(n).catch((function(t){postMessage({type:"deleteLogs",code:500,msg:i(t)})}));break;default:!function(t){if(!o)return;o.putLog(t).then((function(){postMessage(200)})).catch((function(t){postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})}))}(t.data)}var n,r}},function(t,n,r){var e=r(76),o=r(102),i=r(163),c=r(169);function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var a=u.prototype;a.init=function(){var t=this;if(!this.server)return c.open({server:"nim-logs-"+this.name,version:1,schema:{log:{key:{keyPath:"id",autoIncrement:!0},indexes:{time:{}}}}}).then((function(n){t.server=n}))},a.putLog=function(t){var n=this;if(!this.server)return e.reject("no db server");var r=o(t).call(t,-1)[0].time-36e5*this.expire;return this.deleteLogs(r).then((function(){return n.server.add("log",t)}))},a.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(t){var n={},r=o(t).call(t,-1)[0];return n.logs=i(t).call(t,(function(t){return t.tabId+" "+t.log})).join("\\r\\n"),n.time=r&&r.time,n})):e.reject("no db server")},a.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):e.reject("no db server")},t.exports=u},function(t,n,r){var e=r(112);r(54),t.exports=e},function(t,n,r){r(113),r(71),r(72),r(137),r(154),r(155),r(156),r(101);var e=r(13);t.exports=e.Promise},function(t,n,r){r(114)},function(t,n,r){"use strict";var e=r(0),o=r(14),i=r(62),c=r(63),u=r(120),a=r(50),f=r(19),s=r(20),p=r(125),l=r(126),v=r(35),d=r(130),y=r(4),h=r(131),m=y("toStringTag"),g=Error,x=[].push,b=function(t,n){var r,e=arguments.length>2?arguments[2]:void 0,u=o(w,this);c?r=c(g(),u?i(this):w):(r=u?this:a(w),f(r,m,"Error")),void 0!==n&&f(r,"message",d(n)),h&&f(r,"stack",p(r.stack,1)),l(r,e);var s=[];return v(t,x,{that:s}),f(r,"errors",s),r};c?c(b,g):u(b,g,{name:!0});var w=b.prototype=a(g.prototype,{constructor:s(1,b),message:s(1,""),name:s(1,"AggregateError")});e({global:!0,constructor:!0,arity:2},{AggregateError:b})},function(t,n,r){var e=r(7),o=r(10),i=r(46),c=r(58),u=r(116),a=r(4),f=TypeError,s=a("toPrimitive");t.exports=function(t,n){if(!o(t)||i(t))return t;var r,a=c(t,s);if(a){if(void 0===n&&(n="default"),r=e(a,t,n),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},function(t,n,r){var e=r(7),o=r(2),i=r(10),c=TypeError;t.exports=function(t,n){var r,u;if("string"===n&&o(r=t.toString)&&!i(u=e(r,t)))return u;if(o(r=t.valueOf)&&!i(u=e(r,t)))return u;if("string"!==n&&o(r=t.toString)&&!i(u=e(r,t)))return u;throw c("Can't convert object to primitive value")}},function(t,n,r){var e=r(1),o=Object.defineProperty;t.exports=function(t,n){try{o(e,t,{value:n,configurable:!0,writable:!0})}catch(r){e[t]=n}return n}},function(t,n,r){var e=r(5);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,r){var e=r(2),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},function(t,n,r){var e=r(8),o=r(121),i=r(43),c=r(16);t.exports=function(t,n,r){for(var u=o(n),a=c.f,f=i.f,s=0;s<u.length;s++){var p=u[s];e(t,p)||r&&e(r,p)||a(t,p,f(n,p))}}},function(t,n,r){var e=r(9),o=r(6),i=r(64),c=r(68),u=r(12),a=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var n=i.f(u(t)),r=c.f;return r?a(n,r(t)):n}},function(t,n,r){var e=r(18),o=r(65),i=r(26),c=function(t){return function(n,r,c){var u,a=e(n),f=i(a),s=o(c,f);if(t&&r!=r){for(;f>s;)if((u=a[s++])!=u)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?e:r)(n)}},function(t,n,r){var e=r(66),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(6),o=Error,i=e("".replace),c=String(o("zxcasd").stack),u=/\\n\\s*at [^:]*:[^\\n]*/,a=u.test(c);t.exports=function(t,n){if(a&&"string"==typeof t&&!o.prepareStackTrace)for(;n--;)t=i(t,u,"");return t}},function(t,n,r){var e=r(10),o=r(19);t.exports=function(t,n){e(n)&&"cause"in n&&o(t,"cause",n.cause)}},function(t,n,r){var e=r(4),o=r(27),i=e("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},function(t,n,r){var e=r(7),o=r(17),i=r(12),c=r(32),u=r(89),a=TypeError;t.exports=function(t,n){var r=arguments.length<2?u(t):n;if(o(r))return i(e(r,t));throw a(c(t)+" is not iterable")}},function(t,n,r){var e=r(7),o=r(12),i=r(58);t.exports=function(t,n,r){var c,u;o(t);try{if(!(c=i(t,"return"))){if("throw"===n)throw r;return r}c=e(c,t)}catch(t){u=!0,c=t}if("throw"===n)throw r;if(u)throw c;return o(c),r}},function(t,n,r){var e=r(36);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)}},function(t,n,r){var e=r(5),o=r(20);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(1),o=r(2),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,n,r){var e=r(11),o=r(8),i=Function.prototype,c=e&&Object.getOwnPropertyDescriptor,u=o(i,"name"),a=u&&"something"===function(){}.name,f=u&&(!e||e&&c(i,"name").configurable);t.exports={EXISTS:u,PROPER:a,CONFIGURABLE:f}},function(t,n,r){"use strict";var e=r(91).IteratorPrototype,o=r(50),i=r(20),c=r(29),u=r(27),a=function(){return this};t.exports=function(t,n,r,f){var s=n+" Iterator";return t.prototype=o(e,{next:i(+!f,r)}),c(t,s,!1,!0),u[s]=a,t}},function(t,n,r){"use strict";var e=r(70),o=r(28);t.exports=e?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,r){r(138),r(148),r(150),r(151),r(152),r(153)},function(t,n,r){"use strict";var e,o,i,c=r(0),u=r(15),a=r(52),f=r(1),s=r(7),p=r(21),l=r(63),v=r(29),d=r(139),y=r(17),h=r(2),m=r(10),g=r(140),x=r(93),b=r(95).set,w=r(142),S=r(145),j=r(37),O=r(146),P=r(51),T=r(30),A=r(38),E=r(22),k=A.CONSTRUCTOR,I=A.REJECTION_EVENT,D=A.SUBCLASSING,L=P.getterFor("Promise"),_=P.set,C=T&&T.prototype,M=T,R=C,N=f.TypeError,F=f.document,B=f.process,G=E.f,U=G,z=!!(F&&F.createEvent&&f.dispatchEvent),V=function(t){var n;return!(!m(t)||!h(n=t.then))&&n},q=function(t,n){var r,e,o,i=n.value,c=1==n.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,p=t.domain;try{u?(c||(2===n.rejection&&Y(n),n.rejection=1),!0===u?r=i:(p&&p.enter(),r=u(i),p&&(p.exit(),o=!0)),r===t.promise?f(N("Promise-chain cycle")):(e=V(r))?s(e,r,a,f):a(r)):f(i)}catch(t){p&&!o&&p.exit(),f(t)}},H=function(t,n){t.notified||(t.notified=!0,w((function(){for(var r,e=t.reactions;r=e.get();)q(r,t);t.notified=!1,n&&!t.rejection&&K(t)})))},J=function(t,n,r){var e,o;z?((e=F.createEvent("Event")).promise=n,e.reason=r,e.initEvent(t,!1,!0),f.dispatchEvent(e)):e={promise:n,reason:r},!I&&(o=f["on"+t])?o(e):"unhandledrejection"===t&&S("Unhandled promise rejection",r)},K=function(t){s(b,f,(function(){var n,r=t.facade,e=t.value;if(W(t)&&(n=j((function(){a?B.emit("unhandledRejection",e,r):J("unhandledrejection",r,e)})),t.rejection=a||W(t)?2:1,n.error))throw n.value}))},W=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){s(b,f,(function(){var n=t.facade;a?B.emit("rejectionHandled",n):J("rejectionhandled",n,t.value)}))},X=function(t,n,r){return function(e){t(n,e,r)}},$=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,H(t,!0))},Q=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw N("Promise can't be resolved itself");var e=V(n);e?w((function(){var r={done:!1};try{s(e,n,X(Q,r,t),X($,r,t))}catch(n){$(r,n,t)}})):(t.value=n,t.state=1,H(t,!1))}catch(n){$({done:!1},n,t)}}};if(k&&(R=(M=function(t){g(this,R),y(t),s(e,this);var n=L(this);try{t(X(Q,n),X($,n))}catch(t){$(n,t)}}).prototype,(e=function(t){_(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(R,"then",(function(t,n){var r=L(this),e=G(x(this,M));return r.parent=!0,e.ok=!h(t)||t,e.fail=h(n)&&n,e.domain=a?B.domain:void 0,0==r.state?r.reactions.add(e):w((function(){q(e,r)})),e.promise})),o=function(){var t=new e,n=L(t);this.promise=t,this.resolve=X(Q,n),this.reject=X($,n)},E.f=G=function(t){return t===M||void 0===t?new o(t):U(t)},!u&&h(T)&&C!==Object.prototype)){i=C.then,D||p(C,"then",(function(t,n){var r=this;return new M((function(t,n){s(i,r,t,n)})).then(t,n)}),{unsafe:!0});try{delete C.constructor}catch(t){}l&&l(C,R)}c({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:M}),v(M,"Promise",!1,!0),d("Promise")},function(t,n,r){"use strict";var e=r(9),o=r(16),i=r(4),c=r(11),u=i("species");t.exports=function(t){var n=e(t),r=o.f;c&&n&&!n[u]&&r(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(14),o=TypeError;t.exports=function(t,n){if(e(n,t))return t;throw o("Incorrect invocation")}},function(t,n,r){var e=r(73),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a constructor")}},function(t,n,r){var e,o,i,c,u,a,f,s,p=r(1),l=r(34),v=r(43).f,d=r(95).set,y=r(97),h=r(143),m=r(144),g=r(52),x=p.MutationObserver||p.WebKitMutationObserver,b=p.document,w=p.process,S=p.Promise,j=v(p,"queueMicrotask"),O=j&&j.value;O||(e=function(){var t,n;for(g&&(t=w.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?c():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!x||!b?!h&&S&&S.resolve?((f=S.resolve(void 0)).constructor=S,s=l(f.then,f),c=function(){s(e)}):g?c=function(){w.nextTick(e)}:(d=l(d,p),c=function(){d(e)}):(u=!0,a=b.createTextNode(""),new x(e).observe(a,{characterData:!0}),c=function(){a.data=u=!u})),t.exports=O||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,c()),i=n}},function(t,n,r){var e=r(31),o=r(1);t.exports=/ipad|iphone|ipod/i.test(e)&&void 0!==o.Pebble},function(t,n,r){var e=r(31);t.exports=/web0s(?!.*chrome)/i.test(e)},function(t,n,r){var e=r(1);t.exports=function(t,n){var r=e.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))}},function(t,n){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,n,r){var e=r(98),o=r(52);t.exports=!e&&!o&&"object"==typeof window&&"object"==typeof document},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{all:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,s=1;a(t,(function(t){var i=u++,a=!1;s++,o(r,n,t).then((function(t){a||(a=!0,c[i]=t,--s||e(c))}),f)})),--s||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){var e=r(4)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[e]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i={};i[e]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(38).CONSTRUCTOR,c=r(30),u=r(9),a=r(2),f=r(21),s=c&&c.prototype;if(e({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(c)){var p=u("Promise").prototype.catch;s.catch!==p&&f(s,"catch",p,{unsafe:!0})}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{race:function(t){var n=this,r=c.f(n),e=r.reject,f=u((function(){var c=i(n.resolve);a(t,(function(t){o(c,n,t).then(r.resolve,e)}))}));return f.error&&e(f.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(22);e({target:"Promise",stat:!0,forced:r(38).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(9),i=r(15),c=r(30),u=r(38).CONSTRUCTOR,a=r(100),f=o("Promise"),s=i&&!u;e({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return a(s&&this===f?c:this,t)}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0},{allSettled:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,f=1;a(t,(function(t){var i=u++,a=!1;f++,o(r,n,t).then((function(t){a||(a=!0,c[i]={status:"fulfilled",value:t},--f||e(c))}),(function(t){a||(a=!0,c[i]={status:"rejected",reason:t},--f||e(c))}))})),--f||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(9),u=r(22),a=r(37),f=r(35);e({target:"Promise",stat:!0},{any:function(t){var n=this,r=c("AggregateError"),e=u.f(n),s=e.resolve,p=e.reject,l=a((function(){var e=i(n.resolve),c=[],u=0,a=1,l=!1;f(t,(function(t){var i=u++,f=!1;a++,o(e,n,t).then((function(t){f||l||(l=!0,s(t))}),(function(t){f||l||(f=!0,c[i]=t,--a||p(new r(c,"No one promise resolved")))}))})),--a||p(new r(c,"No one promise resolved"))}));return l.error&&p(l.value),e.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(30),c=r(5),u=r(9),a=r(2),f=r(93),s=r(100),p=r(21),l=i&&i.prototype;if(e({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=f(this,u("Promise")),r=a(t);return this.then(r?function(r){return s(n,t()).then((function(){return r}))}:t,r?function(r){return s(n,t()).then((function(){throw r}))}:t)}}),!o&&a(i)){var v=u("Promise").prototype.finally;l.finally!==v&&p(l,"finally",v,{unsafe:!0})}},function(t,n,r){var e=r(6),o=r(66),i=r(36),c=r(57),u=e("".charAt),a=e("".charCodeAt),f=e("".slice),s=function(t){return function(n,r){var e,s,p=i(c(n)),l=o(r),v=p.length;return l<0||l>=v?t?"":void 0:(e=a(p,l))<55296||e>56319||l+1===v||(s=a(p,l+1))<56320||s>57343?t?u(p,l):e:t?f(p,l,l+2):s-56320+(e-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,r){var e=r(160);t.exports=e},function(t,n,r){var e=r(14),o=r(161),i=Array.prototype;t.exports=function(t){var n=t.slice;return t===i||e(i,t)&&n===i.slice?o:n}},function(t,n,r){r(162);var e=r(40);t.exports=e("Array").slice},function(t,n,r){"use strict";var e=r(0),o=r(39),i=r(73),c=r(10),u=r(65),a=r(26),f=r(18),s=r(74),p=r(4),l=r(55),v=r(53),d=l("slice"),y=p("species"),h=Array,m=Math.max;e({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var r,e,p,l=f(this),d=a(l),g=u(t,d),x=u(void 0===n?d:n,d);if(o(l)&&(r=l.constructor,(i(r)&&(r===h||o(r.prototype))||c(r)&&null===(r=r[y]))&&(r=void 0),r===h||void 0===r))return v(l,g,x);for(e=new(void 0===r?h:r)(m(x-g,0)),p=0;g<x;g++,p++)g in l&&s(e,p,l[g]);return e.length=p,e}})},function(t,n,r){t.exports=r(164)},function(t,n,r){var e=r(165);t.exports=e},function(t,n,r){var e=r(14),o=r(166),i=Array.prototype;t.exports=function(t){var n=t.map;return t===i||e(i,t)&&n===i.map?o:n}},function(t,n,r){r(167);var e=r(40);t.exports=e("Array").map},function(t,n,r){"use strict";var e=r(0),o=r(56).map;e({target:"Array",proto:!0,forced:!r(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(39),o=r(73),i=r(10),c=r(4)("species"),u=Array;t.exports=function(t){var n;return e(t)&&(n=t.constructor,(o(n)&&(n===u||e(n.prototype))||i(n)&&null===(n=n[c]))&&(n=void 0)),void 0===n?u:n}},function(t,n,r){(function(e){var o,i=r(170),c=r(76),u=r(216),a=r(102),f=r(222),s=r(226),p=r(233),l=r(237),v=r(241),d=r(245);!function(y,h){"use strict";var m,g=(y=void 0!==y?y:"undefined"!=typeof self?self:void 0!==e?e:{}).IDBKeyRange||y.webkitIDBKeyRange,x="readonly",b="readwrite",w=Object.prototype.hasOwnProperty,S=function(){if(!m&&!(m=y.indexedDB||y.webkitIndexedDB||y.mozIndexedDB||y.oIndexedDB||y.msIndexedDB||(null===y.indexedDB&&y.shimIndexedDB?y.shimIndexedDB:void 0)))throw"IndexedDB required";return m},j=!1,O=navigator&&!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent),P=function(t){return t},T=function(t){var n;return a(n=Object.prototype.toString.call(t)).call(n,8,-1).toLowerCase()},A=function(t){return"function"==typeof t},E=function(t){return"number"===T(t)},k=function(t){return"array"===T(t)},I=function(t){return void 0===t},D=function(t,n){var r=this,e=!1;this.name=n,this.getIndexedDB=function(){return t},this.add=function(n){if(e)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(f(arguments[u+1]))for(var a=0;a<arguments[u+1].length;a++)o[i]=arguments[u+1][a],i++;else o[i]=arguments[u+1],i++;var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){s(o).call(o,(function(t){var r;if(t.item&&t.key){var e=t.key;t=t.item,r=v.add(t,e)}else r=v.add(t);r.onsuccess=function(r){try{var e=r.target,o=e.source.keyPath;null===o&&(o="__id__"),p(t,o,{value:e.result,enumerable:!0})}catch(t){n(t)}}})),l.oncomplete=function(){t(o,r)},l.onerror=function(t){t.preventDefault(),n(t)},l.onabort=function(t){n(t)}}))},this.updateAndDelete=function(n,r,o){if(e)throw"Database has been closed";var i=t.transaction(n,b),u=i.objectStore(n),a=u.keyPath;return new c((function(t,n){s(r).call(r,(function(t){if(t.item&&t.key){var n=t.key;t=t.item,u.put(t,n)}else u.put(t)})),s(o).call(o,(function(t){u.delete(t[a])})),i.oncomplete=function(){t([r,o])},i.onerror=function(t){n(t)}}))},this.update=function(n){if(e)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)f(o=arguments[u])?i=l(i).call(i,o):i.push(o);var a=t.transaction(n,b),p=a.objectStore(n);p.keyPath;return new c((function(t,n){s(i).call(i,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=p.put(t,r)}else n=p.put(t);n.onsuccess=function(t){},n.onerror=function(t){}})),a.oncomplete=function(){t(i,r)},a.onerror=function(t){n(t)},a.onabort=function(t){n(t)}}))},this.remove=function(n,r,o,i,u,a,p){if(e)throw"Database has been closed";var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){function e(t){return null==t}var c;(e(i)&&(i=-1/0),e(u)&&(u=1/0),null===r||f(r)||(r=[r]),e(o))?null!==r?s(r).call(r,(function(t){v.delete(t)})):v.delete(range=g.bound(i,u,a,p)):(c=null!==r?g.only(r[0]):g.bound(i,u,a,p),v.index(o).openCursor(c).onsuccess=function(t){try{var r=t.target.result;if(!r)return;r.delete(),r.continue()}catch(t){n(t)}});l.oncomplete=function(){t()},l.onerror=function(t){n(t)},l.onabort=function(t){n(t)}}))},this.clear=function(n){if(e)throw"Database has been closed";var r=t.transaction(n,b);r.objectStore(n).clear();return new c((function(t,n){r.oncomplete=function(){t()},r.onerror=function(t){n(t)}}))},this.close=function(){e||(t.close(),e=!0,delete C[n])},this.get=function(n,r){if(e)throw"Database has been closed";var o=t.transaction(n),i=o.objectStore(n).get(r);return new c((function(t,n){i.onsuccess=function(n){t(n.target.result)},o.onerror=function(t){n(t)}}))},this.query=function(n,r){if(e)throw"Database has been closed";return new L(n,t,r)},this.count=function(n,r){if(e)throw"Database has been closed";t.transaction(n).objectStore(n)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var n in r[t]={},r)w.call(r,n)&&"close"!==n&&(r[t][n]=function(n){return function(){var e,o=l(e=[t]).call(e,a([]).call(arguments,0));return r[n].apply(r,o)}}(n))}(t.objectStoreNames[o])},L=function(t,n,r){var e,o=this,u=!1,f=!1,p=function(e,o,a,p,l,d,y){return new c((function(c,h){var m=u||f?b:x,w=n.transaction(t,m),S=w.objectStore(t),j=r?S.index(r):S,O=e?g[e].apply(null,o):null,P=[],T=[O],E=0;l=l||null,d=d||[],"count"!==a&&T.push(p||"next");var k=!!u&&v(u);j[a].apply(j,T).onsuccess=function(t){try{var n=t.target.result;if(i(n)===i(0))P=n;else if(n)if(null!==l&&l[0]>E)E=l[0],n.advance(l[0]);else if(null!==l&&E>=l[0]+l[1]);else{var r=!0,e="value"in n?n.value:n.key;s(d).call(d,(function(t){t&&t.length&&(2===t.length?r=r&&e[t[0]]===t[1]:A(t[0])&&(r=r&&t[0].apply(void 0,[e])))})),r&&(E++,P.push(y(e)),f?n.delete():u&&(e=function(t){for(var n=0;n<k.length;n++){var r=k[n],e=u[r];e instanceof Function&&(e=e(t)),t[r]=e}return t}(e),n.update(e))),n.continue()}}catch(t){h(t)}},w.oncomplete=function(){c(P)},w.onerror=function(t){h(t)},w.onabort=function(t){h(t)}}))},l=function(t,n){var r="next",e="openCursor",o=[],i=null,c=P,s=!1,l=function(){return p(t,n,e,s?r+"unique":r,i,o,c)},v=function(){return r=null,e="count",{execute:l}},d=function t(){return 1==(i=k(arguments[0])?arguments[0]:a(Array.prototype).call(arguments,0,2)).length&&i.unshift(0),E(i[1])||(i=null),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:t,map:w,remove:S}},y=function t(n){return(n=!!I(n)||!!n)&&(e="openKeyCursor"),{execute:l,keys:t,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},h=function t(){return o.push(a(Array.prototype).call(arguments,0,2)),{execute:l,count:v,keys:y,filter:t,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},m=function t(n){return n=!!I(n)||!!n,r=n?"next":"prev",{execute:l,count:v,keys:y,filter:h,asc:t,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},g=function t(n){return n=!!I(n)||!!n,r=n?"prev":"next",{execute:l,count:v,keys:y,filter:h,asc:m,desc:t,distinct:x,modify:b,limit:d,map:w,remove:S}},x=function t(n){return n=!!I(n)||!!n,s=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:t,modify:b,limit:d,map:w,remove:S}},b=function t(n){return u=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:t,limit:d,map:w,remove:S}},w=function t(n){return A(n)&&(c=n),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:t,remove:S}},S=function t(n){return n=!!I(n)||!!n,f=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:t}};return{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}};s(e="only bound upperBound lowerBound".split(" ")).call(e,(function(t){o[t]=function(){return new l(t,arguments)}})),this.filter=function(){var t=new l(null,null);return d(t).apply(t,arguments)},this.all=function(){var t;return d(t=this).call(t)}},_=function(t,n,r,e){var o=t.target.result,i=new D(o,n);return C[n]=o,c.resolve(i)},C={},M={version:"0.10.2",open:function(t){var n;return new c((function(r,e){var o;C[t.server]?_({target:{result:C[t.server]}},t.server,t.version,t.schema).then(r,e):(j?c.resolve():O&&S().databases?new c((function(t){var n=function(){return S().databases().finally(t)};o=u(n,100),n()})).finally((function(){j=!0,clearInterval(o)})):(j=!0,c.resolve())).then((function(){try{n=S().open(t.server,t.version)}catch(t){e(t)}n.onsuccess=function(n){_(n,t.server,t.version,t.schema).then(r,e)},n.onupgradeneeded=function(n){!function(t,n,r){for(var e in"function"==typeof n&&(n=n()),n){var o,i=n[e];for(var c in o=!w.call(n,e)||r.objectStoreNames.contains(e)?t.currentTarget.transaction.objectStore(e):r.createObjectStore(e,i.key),i.indexes){var u=i.indexes[c];try{o.index(c)}catch(t){o.createIndex(c,u.key||c,v(u).length?u:{unique:!1})}}}}(n,t.schema,n.target.result)},n.onerror=function(t){e(t)}}))}))},remove:function(t){return new c((function(n,r){if(!t)return n();var e,o;i(t)===D&&(t=t.name),"string"==typeof t&&(e=C[t]),e&&"function"==typeof e.close&&e.close();try{o=S().deleteDatabase(t)}catch(t){r(t)}o.onsuccess=function(r){delete C[t],n(t)},o.onerror=function(t){r(t)},o.onblocked=function(t){r(t)}}))}};void 0!==t.exports?t.exports=M:void 0===(o=function(){return M}.call(n,r,n,t))||(t.exports=o)}(void 0)}).call(this,r(77))},function(t,n,r){var e=r(171),o=r(210);function i(n){return t.exports=i="function"==typeof e&&"symbol"==typeof o?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,r){t.exports=r(172)},function(t,n,r){t.exports=r(173)},function(t,n,r){var e=r(174);r(203),r(204),r(205),r(206),r(207),r(208),r(209),t.exports=e},function(t,n,r){var e=r(175);r(202),t.exports=e},function(t,n,r){var e=r(176);r(54),t.exports=e},function(t,n,r){r(104),r(72),r(178),r(186),r(187),r(188),r(189),r(107),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201);var e=r(13);t.exports=e.Symbol},function(t,n){var r=TypeError;t.exports=function(t){if(t>9007199254740991)throw r("Maximum allowed index exceeded");return t}},function(t,n,r){r(179),r(182),r(183),r(184),r(185)},function(t,n,r){"use strict";var e=r(0),o=r(1),i=r(7),c=r(6),u=r(15),a=r(11),f=r(24),s=r(5),p=r(8),l=r(14),v=r(12),d=r(18),y=r(45),h=r(36),m=r(20),g=r(50),x=r(69),b=r(64),w=r(180),S=r(68),j=r(43),O=r(16),P=r(87),T=r(80),A=r(21),E=r(33),k=r(48),I=r(49),D=r(60),L=r(4),_=r(75),C=r(3),M=r(105),R=r(29),N=r(51),F=r(56).forEach,B=k("hidden"),G=N.set,U=N.getterFor("Symbol"),z=Object.prototype,V=o.Symbol,q=V&&V.prototype,H=o.TypeError,J=o.QObject,K=j.f,W=O.f,Y=w.f,X=T.f,$=c([].push),Q=E("symbols"),Z=E("op-symbols"),tt=E("wks"),nt=!J||!J.prototype||!J.prototype.findChild,rt=a&&s((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,n,r){var e=K(z,n);e&&delete z[n],W(t,n,r),e&&t!==z&&W(z,n,e)}:W,et=function(t,n){var r=Q[t]=g(q);return G(r,{type:"Symbol",tag:t,description:n}),a||(r.description=n),r},ot=function(t,n,r){t===z&&ot(Z,n,r),v(t);var e=y(n);return v(r),p(Q,e)?(r.enumerable?(p(t,B)&&t[B][e]&&(t[B][e]=!1),r=g(r,{enumerable:m(0,!1)})):(p(t,B)||W(t,B,m(1,{})),t[B][e]=!0),rt(t,e,r)):W(t,e,r)},it=function(t,n){v(t);var r=d(n),e=x(r).concat(ft(r));return F(e,(function(n){a&&!i(ct,r,n)||ot(t,n,r[n])})),t},ct=function(t){var n=y(t),r=i(X,this,n);return!(this===z&&p(Q,n)&&!p(Z,n))&&(!(r||!p(this,n)||!p(Q,n)||p(this,B)&&this[B][n])||r)},ut=function(t,n){var r=d(t),e=y(n);if(r!==z||!p(Q,e)||p(Z,e)){var o=K(r,e);return!o||!p(Q,e)||p(r,B)&&r[B][e]||(o.enumerable=!0),o}},at=function(t){var n=Y(d(t)),r=[];return F(n,(function(t){p(Q,t)||p(I,t)||$(r,t)})),r},ft=function(t){var n=t===z,r=Y(n?Z:d(t)),e=[];return F(r,(function(t){!p(Q,t)||n&&!p(z,t)||$(e,Q[t])})),e};f||(A(q=(V=function(){if(l(q,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,n=D(t),r=function(t){this===z&&i(r,Z,t),p(this,B)&&p(this[B],n)&&(this[B][n]=!1),rt(this,n,m(1,t))};return a&&nt&&rt(z,n,{configurable:!0,set:r}),et(n,t)}).prototype,"toString",(function(){return U(this).tag})),A(V,"withoutSetter",(function(t){return et(D(t),t)})),T.f=ct,O.f=ot,P.f=it,j.f=ut,b.f=w.f=at,S.f=ft,_.f=function(t){return et(L(t),t)},a&&(W(q,"description",{configurable:!0,get:function(){return U(this).description}}),u||A(z,"propertyIsEnumerable",ct,{unsafe:!0}))),e({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:V}),F(x(tt),(function(t){C(t)})),e({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),e({target:"Object",stat:!0,forced:!f,sham:!a},{create:function(t,n){return void 0===n?g(t):it(g(t),n)},defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:ut}),e({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:at}),M(),R(V,"Symbol"),I[B]=!0},function(t,n,r){var e=r(23),o=r(18),i=r(64).f,c=r(181),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==e(t)?function(t){try{return i(t)}catch(t){return c(u)}}(t):i(o(t))}},function(t,n,r){var e=r(65),o=r(26),i=r(74),c=Array,u=Math.max;t.exports=function(t,n,r){for(var a=o(t),f=e(n,a),s=e(void 0===r?a:r,a),p=c(u(s-f,0)),l=0;f<s;f++,l++)i(p,l,t[f]);return p.length=l,p}},function(t,n,r){var e=r(0),o=r(9),i=r(8),c=r(36),u=r(33),a=r(106),f=u("string-to-symbol-registry"),s=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{for:function(t){var n=c(t);if(i(f,n))return f[n];var r=o("Symbol")(n);return f[n]=r,s[r]=n,r}})},function(t,n,r){var e=r(0),o=r(8),i=r(46),c=r(32),u=r(33),a=r(106),f=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(c(t)+" is not a symbol");if(o(f,t))return f[t]}})},function(t,n,r){var e=r(0),o=r(9),i=r(41),c=r(7),u=r(6),a=r(5),f=r(39),s=r(2),p=r(10),l=r(46),v=r(53),d=r(24),y=o("JSON","stringify"),h=u(/./.exec),m=u("".charAt),g=u("".charCodeAt),x=u("".replace),b=u(1..toString),w=/[\\uD800-\\uDFFF]/g,S=/^[\\uD800-\\uDBFF]$/,j=/^[\\uDC00-\\uDFFF]$/,O=!d||a((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),P=a((function(){return'"\\\\udf06\\\\ud834"'!==y("\\udf06\\ud834")||'"\\\\udead"'!==y("\\udead")})),T=function(t,n){var r=v(arguments),e=n;if((p(n)||void 0!==t)&&!l(t))return f(n)||(n=function(t,n){if(s(e)&&(n=c(e,this,t,n)),!l(n))return n}),r[1]=n,i(y,null,r)},A=function(t,n,r){var e=m(r,n-1),o=m(r,n+1);return h(S,t)&&!h(j,o)||h(j,t)&&!h(S,e)?"\\\\u"+b(g(t,0),16):t};y&&e({target:"JSON",stat:!0,arity:3,forced:O||P},{stringify:function(t,n,r){var e=v(arguments),o=i(O?T:y,null,e);return P&&"string"==typeof o?x(o,w,A):o}})},function(t,n,r){var e=r(0),o=r(24),i=r(5),c=r(68),u=r(25);e({target:"Object",stat:!0,forced:!o||i((function(){c.f(1)}))},{getOwnPropertySymbols:function(t){var n=c.f;return n?n(u(t)):[]}})},function(t,n,r){r(3)("asyncIterator")},function(t,n){},function(t,n,r){r(3)("hasInstance")},function(t,n,r){r(3)("isConcatSpreadable")},function(t,n,r){r(3)("match")},function(t,n,r){r(3)("matchAll")},function(t,n,r){r(3)("replace")},function(t,n,r){r(3)("search")},function(t,n,r){r(3)("species")},function(t,n,r){r(3)("split")},function(t,n,r){var e=r(3),o=r(105);e("toPrimitive"),o()},function(t,n,r){var e=r(9),o=r(3),i=r(29);o("toStringTag"),i(e("Symbol"),"Symbol")},function(t,n,r){r(3)("unscopables")},function(t,n,r){var e=r(1);r(29)(e.JSON,"JSON",!0)},function(t,n){},function(t,n){},function(t,n,r){r(3)("dispose")},function(t,n,r){r(3)("asyncDispose")},function(t,n,r){r(3)("matcher")},function(t,n,r){r(3)("metadataKey")},function(t,n,r){r(3)("observable")},function(t,n,r){r(3)("metadata")},function(t,n,r){r(3)("patternMatch")},function(t,n,r){r(3)("replaceAll")},function(t,n,r){t.exports=r(211)},function(t,n,r){t.exports=r(212)},function(t,n,r){var e=r(213);t.exports=e},function(t,n,r){var e=r(214);t.exports=e},function(t,n,r){var e=r(215);r(54),t.exports=e},function(t,n,r){r(71),r(72),r(101),r(107);var e=r(75);t.exports=e.f("iterator")},function(t,n,r){t.exports=r(217)},function(t,n,r){r(218);var e=r(13);t.exports=e.setInterval},function(t,n,r){r(219),r(221)},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setInterval,!0);e({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,n){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setTimeout,!0);e({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,n,r){t.exports=r(223)},function(t,n,r){var e=r(224);t.exports=e},function(t,n,r){r(225);var e=r(13);t.exports=e.Array.isArray},function(t,n,r){r(0)({target:"Array",stat:!0},{isArray:r(39)})},function(t,n,r){t.exports=r(227)},function(t,n,r){r(54);var e=r(28),o=r(8),i=r(14),c=r(228),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var n=t.forEach;return t===u||i(u,t)&&n===u.forEach||o(a,e(t))?c:n}},function(t,n,r){var e=r(229);t.exports=e},function(t,n,r){r(230);var e=r(40);t.exports=e("Array").forEach},function(t,n,r){"use strict";var e=r(0),o=r(231);e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,n,r){"use strict";var e=r(56).forEach,o=r(232)("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,r){"use strict";var e=r(5);t.exports=function(t,n){var r=[][t];return!!r&&e((function(){r.call(null,n||function(){return 1},1)}))}},function(t,n,r){t.exports=r(234)},function(t,n,r){var e=r(235);t.exports=e},function(t,n,r){r(236);var e=r(13).Object,o=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(o.sham=!0)},function(t,n,r){var e=r(0),o=r(11),i=r(16).f;e({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,n,r){t.exports=r(238)},function(t,n,r){var e=r(239);t.exports=e},function(t,n,r){var e=r(14),o=r(240),i=Array.prototype;t.exports=function(t){var n=t.concat;return t===i||e(i,t)&&n===i.concat?o:n}},function(t,n,r){r(104);var e=r(40);t.exports=e("Array").concat},function(t,n,r){t.exports=r(242)},function(t,n,r){var e=r(243);t.exports=e},function(t,n,r){r(244);var e=r(13);t.exports=e.Object.keys},function(t,n,r){var e=r(0),o=r(25),i=r(69);e({target:"Object",stat:!0,forced:r(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,r){t.exports=r(246)},function(t,n,r){var e=r(247);t.exports=e},function(t,n,r){var e=r(14),o=r(248),i=Array.prototype;t.exports=function(t){var n=t.filter;return t===i||e(i,t)&&n===i.filter?o:n}},function(t,n,r){r(249);var e=r(40);t.exports=e("Array").filter},function(t,n,r){"use strict";var e=r(0),o=r(56).filter;e({target:"Array",proto:!0,forced:!r(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}]);`,"Worker",void 0,void 0)}},function(t,r,e){var n=e(3),g=e(9),y=e(11),i=e(308);function k(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.server=null,this.expire=$.expire||72,this.name=$.name}var L=k.prototype;L.init=function(){var $=this;if(!this.server)return i.open({server:"nim-logs-"+this.name,version:1,schema:{log:{key:{keyPath:"id",autoIncrement:!0},indexes:{time:{}}}}}).then(function(V){$.server=V})},L.putLog=function($){var V=this;if(!this.server)return n.reject("no db server");var z=g($).call($,-1)[0].time-36e5*this.expire;return this.deleteLogs(z).then(function(){return V.server.add("log",$)})},L.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then(function($){var V={},z=g($).call($,-1)[0];return V.logs=y($).call($,function(re){return re.tabId+" "+re.log}).join(`\r
`),V.time=z&&z.time,V}):n.reject("no db server")},L.deleteLogs=function($){return this.server?this.server.remove("log",null,"time",0,$):n.reject("no db server")},t.exports=k},function(t,r,e){e(259);var n=e(14);t.exports=n.setInterval},function(t,r,e){var n=e(18),g=e(578),y=Function.prototype;t.exports=function(i){var k=i.bind;return i===y||n(y,i)&&k===y.bind?g:k}},function(t,r,e){e(579);var n=e(27);t.exports=n("Function").bind},function(t,r,e){var n=e(1),g=e(281);n({target:"Function",proto:!0,forced:Function.bind!==g},{bind:g})},function(t,r,e){var n=e(19),g=e(23),y=e(2),i=e(22),k=e(5),L=e(66),$=e(193);function V(oe){oe.onuploading&&this.on("uploading",oe.onuploading),$.call(this,oe)}var z=$.prototype,re=V.prototype=n(z);re.doSend=function(){var oe,le,ue,ie=this.options,ae=ie.headers,Fe=this.xhr=new XMLHttpRequest;if(ae["Content-Type"]==="multipart/form-data"){var de,Ne;delete ae["Content-Type"],Fe.upload.onprogress=g(de=this.onProgress).call(de,this),Fe.upload.onload=g(Ne=this.onProgress).call(Ne,this);var Ve,ze=ie.data;ie.data=new window.FormData,ze&&y(Ve=L.getKeys(ze,ie.putFileAtEnd)).call(Ve,function(Et){var lr=ze[Et];lr.tagName&&lr.tagName.toUpperCase()==="INPUT"?lr.type==="file"&&y([]).call(lr.files,function(tr){ie.data.append(L.dataset(lr,"name")||lr.name||tr.name||"file-"+L.uniqueID(),tr)}):ie.data.append(Et,lr)})}else if(ae["x-nos-token"]){var jt,kt;Fe.upload.onprogress=g(jt=this.onProgress).call(jt,this),Fe.upload.onload=g(kt=this.onProgress).call(kt,this)}Fe.onreadystatechange=g(oe=this.onStateChange).call(oe,this),ie.timeout!==0&&(this.timer=i(g(ue=this.onTimeout).call(ue,this),ie.timeout)),Fe.open(ie.method,ie.url,!ie.sync),y(le=k(ae)).call(le,function(Et){Fe.setRequestHeader(Et,ae[Et])}),ie.cookie&&"withCredentials"in Fe&&(Fe.withCredentials=!0),Fe.send(ie.data),this.afterSend()},re.onProgress=function(oe){oe.lengthComputable&&oe.loaded<=oe.total&&this.emit("uploading",oe)},re.onStateChange=function(){var oe,le=this.xhr;le.readyState===4&&(oe={status:le.status,result:le.responseText||""},this.onLoad(oe))},re.getResponseHeader=function(oe){var le=this.xhr;return le?le.getResponseHeader(oe):""},re.destroy=function(){clearTimeout(this.timer);try{this.xhr.onreadystatechange=L.f,this.xhr.abort()}catch{}z.destroy.call(this)},t.exports=V},function(t,r,e){var n;/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(g){function y(){}var i=y.prototype,k=g.EventEmitter;function L(V,z){for(var re=V.length;re--;)if(V[re].listener===z)return re;return-1}function $(V){return function(){return this[V].apply(this,arguments)}}i.getListeners=function(V){var z,re,oe=this._getEvents();if(V instanceof RegExp)for(re in z={},oe)oe.hasOwnProperty(re)&&V.test(re)&&(z[re]=oe[re]);else z=oe[V]||(oe[V]=[]);return z},i.flattenListeners=function(V){var z,re=[];for(z=0;z<V.length;z+=1)re.push(V[z].listener);return re},i.getListenersAsObject=function(V){var z,re=this.getListeners(V);return re instanceof Array&&((z={})[V]=re),z||re},i.addListener=function(V,z){if(!function ue(ie){return typeof ie=="function"||ie instanceof RegExp||!(!ie||typeof ie!="object")&&ue(ie.listener)}(z))throw new TypeError("listener must be a function");var re,oe=this.getListenersAsObject(V),le=typeof z=="object";for(re in oe)oe.hasOwnProperty(re)&&L(oe[re],z)===-1&&oe[re].push(le?z:{listener:z,once:!1});return this},i.on=$("addListener"),i.addOnceListener=function(V,z){return this.addListener(V,{listener:z,once:!0})},i.once=$("addOnceListener"),i.defineEvent=function(V){return this.getListeners(V),this},i.defineEvents=function(V){for(var z=0;z<V.length;z+=1)this.defineEvent(V[z]);return this},i.removeListener=function(V,z){var re,oe,le=this.getListenersAsObject(V);for(oe in le)le.hasOwnProperty(oe)&&(re=L(le[oe],z))!==-1&&le[oe].splice(re,1);return this},i.off=$("removeListener"),i.addListeners=function(V,z){return this.manipulateListeners(!1,V,z)},i.removeListeners=function(V,z){return this.manipulateListeners(!0,V,z)},i.manipulateListeners=function(V,z,re){var oe,le,ue=V?this.removeListener:this.addListener,ie=V?this.removeListeners:this.addListeners;if(typeof z!="object"||z instanceof RegExp)for(oe=re.length;oe--;)ue.call(this,z,re[oe]);else for(oe in z)z.hasOwnProperty(oe)&&(le=z[oe])&&(typeof le=="function"?ue.call(this,oe,le):ie.call(this,oe,le));return this},i.removeEvent=function(V){var z,re=typeof V,oe=this._getEvents();if(re==="string")delete oe[V];else if(V instanceof RegExp)for(z in oe)oe.hasOwnProperty(z)&&V.test(z)&&delete oe[z];else delete this._events;return this},i.removeAllListeners=$("removeEvent"),i.emitEvent=function(V,z){var re,oe,le,ue,ie=this.getListenersAsObject(V);for(ue in ie)if(ie.hasOwnProperty(ue))for(re=ie[ue].slice(0),le=0;le<re.length;le++)(oe=re[le]).once===!0&&this.removeListener(V,oe.listener),oe.listener.apply(this,z||[])===this._getOnceReturnValue()&&this.removeListener(V,oe.listener);return this},i.trigger=$("emitEvent"),i.emit=function(V){var z=Array.prototype.slice.call(arguments,1);return this.emitEvent(V,z)},i.setOnceReturnValue=function(V){return this._onceReturnValue=V,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},y.noConflict=function(){return g.EventEmitter=k,y},(n=(function(){return y}).call(g,e,g,t))===void 0||(t.exports=n)})(typeof window<"u"?window:this||{})},function(t,r,e){var n=e(19),g=e(8),y=e(2),i=e(23),k=e(93),L=e(66),$=e(193),V=e(282),z="NEJ-UPLOAD-RESULT:",re={};function oe(ie){this.init(),$.call(this,ie)}var le=$.prototype,ue=oe.prototype=n(le);ue.init=function(){var ie=!1;function ae(Fe){var de=Fe.data;if(g(de).call(de,z)===0){var Ne=(de=JSON.parse(de.replace(z,""))).key,Ve=re[Ne];Ve&&(delete re[Ne],de.result=decodeURIComponent(de.result||""),Ve.onLoad(de.result))}}return function(){(function(){if(!ie){ie=!0;var Fe=L.getGlobal();Fe.postMessage?L.on(Fe,"message",ae):(V.addMsgListener(ae),V.startTimer())}})()}}(),ue.doSend=function(){var ie=this,ae=ie.options,Fe=ie.key="zoro-ajax-upload-iframe-"+L.uniqueID();re[Fe]=ie;var de=ie.form=L.html2node('<form style="display:none;"></form>');typeof document>"u"||document.body.appendChild(de),de.target=Fe,de.method="POST",de.enctype="multipart/form-data",de.encoding="multipart/form-data";var Ne=ae.url,Ve=L.genUrlSep(Ne);de.action=Ne+Ve+"_proxy_=form";var ze,jt=ae.data,kt=[],Et=[];jt&&y(ze=L.getKeys(jt,ae.putFileAtEnd)).call(ze,function(or){var dr=jt[or];if(dr.tagName&&dr.tagName.toUpperCase()==="INPUT"){if(dr.type==="file"){var cr=dr,nr=cr.cloneNode(!0);cr.parentNode.insertBefore(nr,cr);var ur=L.dataset(cr,"name");ur&&(cr.name=ur),de.appendChild(cr),L.isFunction(cr.setAttribute)&&(cr.setAttribute("form",""),cr.removeAttribute("form")),kt.push(dr),Et.push(nr)}}else{var ar=L.html2node('<input type="hidden"/>');ar.name=or,ar.value=dr,de.appendChild(ar)}});function lr(){y(kt).call(kt,function(or,dr){var cr=Et[dr];cr.parentNode&&(or.name=cr.name,L.isFunction(or.setAttribute)&&or.setAttribute("form",cr.getAttribute("form")),cr.parentNode.replaceChild(or,cr))})}var tr=ie.iframe=L.createIframe({name:Fe,onload:function(){var or;ie.aborted?lr():(L.on(tr,"load",i(or=ie.checkResult).call(or,ie)),de.submit(),lr(),ie.afterSend())}})},ue.checkResult=function(){var ie,ae;try{var Fe,de;if(ie=this.iframe.contentWindow.document.body,ae=k(Fe=ie.innerText||ie.textContent||"").call(Fe),g(ae).call(ae,z)>=0||g(de=ie.innerHTML).call(de,z)>=0)return}catch{return}this.onLoad(ae)},ue.onLoad=function(ie){le.onLoad.call(this,{status:200,result:ie}),L.remove(this.form),L.remove(this.iframe),le.destroy.call(this)},ue.destroy=function(){L.remove(this.iframe),L.remove(this.form)},ue.abort=function(){this.aborted=!0,delete re[this.key],le.abort.call(this)},t.exports=oe},function(t,r,e){var n=e(584);t.exports=n},function(t,r,e){var n=e(18),g=e(585),y=String.prototype;t.exports=function(i){var k=i.trim;return typeof i=="string"||i===y||n(y,i)&&k===y.trim?g:k}},function(t,r,e){e(586);var n=e(27);t.exports=n("String").trim},function(t,r,e){var n=e(1),g=e(191).trim;n({target:"String",proto:!0,forced:e(587)("trim")},{trim:function(){return g(this)}})},function(t,r,e){var n=e(231).PROPER,g=e(7),y=e(151);t.exports=function(i){return g(function(){return!!y[i]()||"​᠎"[i]()!=="​᠎"||n&&y[i].name!==i})}},function(t,r,e){var n=e(19),g=e(8),y=e(23),i=e(2),k=e(66),L=e(282),$=e(193),V={};function z(le){this.init(),$.call(this,le)}var re=$.prototype,oe=z.prototype=n(re);oe.init=function(){var le="NEJ-AJAX-DATA:",ue=!1;function ie(ae){var Fe=ae.data;if(g(Fe).call(Fe,le)===0){var de=(Fe=JSON.parse(Fe.replace(le,""))).key,Ne=V[de];Ne&&(delete V[de],Fe.result=decodeURIComponent(Fe.result||""),Ne.onLoad(Fe))}}return function(){(function(){if(!ue){ue=!0;var ae=k.getGlobal();ae.postMessage?k.on(ae,"message",ie):L.addMsgListener(ie)}})()}}(),oe.doSend=function(){var le=this.options,ue=k.url2origin(le.url),ie=le.proxyUrl||ue+"/res/nej_proxy_frame.html",ae=V[ie];if(k.isArray(ae)){var Fe;ae.push(y(Fe=this.doSend).call(Fe,this,le))}else{var de;if(!ae)return V[ie]=[y(de=this.doSend).call(de,this,le)],void k.createIframe({src:ie,onload:function(ze){var jt=V[ie];V[ie]=k.target(ze).contentWindow,i(jt).call(jt,function(kt){try{kt()}catch{}})}});if(!this.aborted){var Ne=this.key=k.uniqueID();V[Ne]=this;var Ve=k.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},le);Ve.key=Ne,L.postMessage(ae,{data:Ve}),this.afterSend()}}},oe.abort=function(){this.aborted=!0,delete V[this.key],re.abort.call(this)},t.exports=z},function(t,r,e){var n,g,y=e(6),i=e(66),k=e(92),L=(n=/json/i,g=/post/i,function($,V){var z=(V=V||{}).data=V.data||{},re=V.headers=V.headers||{},oe=i.checkWithDefault(re,"Accept","application/json"),le=i.checkWithDefault(re,"Content-Type","application/json");return n.test(oe)&&(V.type="json"),g.test(V.method)&&n.test(le)&&(V.data=y(z)),k($,V)});t.exports=L},function(t,r,e){var n=e(5),g=e(15),y=e(8),i=e(2),k=e(4),L=e(9),$=e(22);t.exports={wrapSafeCallback:function(V,z){if(V.__wrapSafeCallback__)return V;V.__wrapSafeCallback__=!0;var re=n(V);return re=g(re).call(re,function(oe){return y(oe).call(oe,"on")===0&&Object.prototype.toString.call(V[oe])==="[object Function]"}),i(re).call(re,function(oe){var le=V[oe];V[oe]=function(){var ue=this;try{var ie;return le.call.apply(le,k(ie=[this]).call(ie,L(Array.prototype).call(arguments)))}catch(Fe){var ae;this.logger.error(k(ae="wrapSafeCallback. CallbackName: ".concat(oe,". Error: ")).call(ae,Fe)),$(function(){var de;throw ue.logger.error(k(de="wrapSafeCallback. throw error in setTimeout. CallbackName: ".concat(oe,". Error: ")).call(de,Fe)),Fe},0),z.logger&&z.logger.error("userOption:".concat(oe," function error"),Fe)}}}),V}}},function(t,r,e){var n=e(592);t.exports=n},function(t,r,e){e(593);var n=e(14);t.exports=n.Date.now},function(t,r,e){var n=e(1),g=e(13),y=Date,i=g(y.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return i(new y)}})},function(t,r,e){var n=e(81).fn,g=e(0),y=e(26).reportAPI;n.isConnected=function(){return y({instance:this,className:"ApiBaseFn",funcName:"isConnected",hasCallback:!1}),!!this.protocol&&this.protocol.isConnected()},n.getLoginStatus=function(){return this.protocol.getLoginStatus()},n.connect=function(){y({instance:this,className:"ApiBaseFn",funcName:"connect",hasCallback:!1}),this.protocol.processId=g.guid(),this.protocol.connect()},n.detectHeartbeat=function(){this.protocol.detectHeartbeat()},n.disconnect=function(){}},function(t,r,e){var n=e(24),g=e(4),y=e(9),i=e(144),k=e(6),L=e(23),$=e(11),V=e(34),z=e(93),re=e(8),oe=e(43),le=e(22),ue=e(10),ie=e(28),ae=e(2),Fe=e(5),de=e(52),Ne=e(15),Ve=e(53),ze=e(54),jt=e(55),kt=e(42),Et=e(51),lr=e(127),tr=["loc_x","loc_y","loc_z"];function or(sr,Ir){var Ar=Fe(sr);if(de){var Cr=de(sr);Ir&&(Cr=Ne(Cr).call(Cr,function(br){return Ve(sr,br).enumerable})),Ar.push.apply(Ar,Cr)}return Ar}function dr(sr){for(var Ir=1;Ir<arguments.length;Ir++){var Ar,Cr,br=arguments[Ir]!=null?arguments[Ir]:{};Ir%2?ae(Ar=or(Object(br),!0)).call(Ar,function(vr){Et(sr,vr,br[vr])}):ze?jt(sr,ze(br)):ae(Cr=or(Object(br))).call(Cr,function(vr){kt(sr,vr,Ve(br,vr))})}return sr}var cr=e(81).fn,nr=e(0),ur=e(614),ar=e(35),gr=e(12),pr=e(284),yr=e(285),Sr=e(289),wr=e(109),Mr=wr.EMExceptionState,mr=wr.EMResourceUploadWay,_r=e(26).reportAPI,Nr=e(646);function Pr(sr,Ir,Ar,Cr){sr.protocol.reporterHook.emit("reporter/uploadEnd",Ir.code==="RequestAbortedError"||Ir.code==="abort"?Mr.kCanceled:Mr.kFailed),sr.reporter.reportTraceStart("exceptions",{user_id:sr.account,trace_id:nr.get(sr,"socket.socket.sessionid"),start_time:Ar,action:1,exception_service:3}),sr.reporter.reportTraceUpdateV2("exceptions",{code:typeof Ir.status=="number"?Ir.status:typeof Ir.code=="number"?Ir.code:0,description:Ir.message||"".concat(Ir.code),operation_type:1,target:Cr,net_connect:sr.protocol.checkNetworkAvailable()}),sr.reporter.reportTraceEnd("exceptions",1)}cr.sendText=function(sr){(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendText",async:!0,done:sr.done});var Ir=sr,Ar=Ir.loc_x,Cr=Ir.loc_y,br=Ir.loc_z,vr=lr(Ir,tr);return Ar===void 0||Cr===void 0||br===void 0?sr=dr({},vr):(typeof sr.loc_x!="number"&&(sr.loc_x=0),typeof sr.loc_y!="number"&&(sr.loc_y=0),typeof sr.loc_z!="number"&&(sr.loc_z=0)),this.processCallback(sr),sr.msg=new this.message.TextMessage(sr),this.sendMsg(sr)},cr.previewFile=function(sr,Ir){var Ar=this;(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"previewFile",done:sr.done}),sr.fileInput&&(sr.fileInput=nr.verifyFileInput(sr.fileInput,"msg::previewFile"));var Cr=void 0,br=void 0;if(sr.fileInput&&sr.fileInput.files&&sr.fileInput.files.length>0?Cr=sr.fileInput.files[0]:sr.blob&&sr.blob.name&&(Cr=sr.blob),Cr&&(br=Cr.name+"_"+Cr.lastModified+"_"+Cr.size),!sr.transcode&&br&&this.protocol.cloudStorage&&this.protocol.cloudStorage.uploadCache&&this.protocol.cloudStorage.uploadCache[br]){var vr=nr.copy(sr),Tr=new Date().getTime();sr=nr.merge(sr,this.protocol.cloudStorage.uploadCache[br],{onError:function(Br){var Lr;Ar.logger.error(g(Lr="chunkUploadResume::onError: ".concat(Br&&Br.code," ")).call(Lr,Br&&Br.message)),Pr(Ar,Br,Tr,sr.chunkUrl),Br.code==="RequestAbortedError"||Br.code==="abort"||nim.protocol.__destroyed||nim._previewFileNonResume(vr,Ir)},uploaddone:function(Br,Lr){if(Br){var Fr;Ar.logger.error(g(Fr="chunkUploadResume::uploaddone error: ".concat(Br&&Br.code," ")).call(Fr,Br&&Br.message)),Pr(Ar,Br,Tr,sr.chunkUrl),Br.code==="RequestAbortedError"||Br.code==="abort"||nim.protocol.__destroyed||nim._previewFileNonResume(vr,Ir)}else{Ar.protocol.reporterHook.emit("reporter/uploadEnd",Mr.kSucceed),Ar.logger.log("chunkUploadResume::uploaddone:",Br),(Lr=pr.parseResponse(Lr,Ar.options.exifOrientation)).url=gr.genDownloadUrl(sr.nosToken,decodeURIComponent(sr.nosToken.objectName),gr.serverNosConfig.cdnDomain);var qr=Cr.type||"",Vr=Cr.name||"";if(Lr.ext=y(qr).call(qr,i(qr).call(qr,"/")+1),!Lr.ext){var Qr=i(Vr).call(Vr,".");Lr.ext=Qr===-1?"unknown":y(Vr).call(Vr,Qr+1)}sr.nosToken.shortUrl&&(Lr._url_safe=sr.nosToken.shortUrl),sr.done(null,Lr)}},uploadprogress:function(Br){Ar.reporterHook.emit("reporter/uploadUpdate",{transferred_size:Br.loaded}),vr.uploadprogress&&vr.uploadprogress(Br)}}),Ar.protocol.reporterHook.emit("reporter/uploadStart"),Ar.reporterHook.emit("reporter/uploadUpdate",{full_size:Cr.size,remote_addr:gr.chunkUploadUrl,operation_type:mr.kResourceUploadWayNOSPlugin}),Nr(sr,Cr,this.protocol.cloudStorage.uploadCache[br])}else this._previewFileNonResume(sr,Ir)},cr._previewFileNonResume=function(sr,Ir){var Ar,Cr=this,br=Cr.protocol.appGrayConfig;if(br&&br.grayConfig&&br.grayConfig.mixStoreEnable&&(sr.mixEnable=!0),nr.verifyOptions(sr,"done","msg::previewFile"),sr.type||(sr.type="file"),nr.verifyParamPresentJustOne(sr,"dataURL blob fileInput filePath wxFilePath fileObject","msg::previewFile"),nr.exist(sr.maxSize)&&nr.verifyParamType("maxSize",sr.maxSize,"number","api::previewFile"),nr.exist(sr.commonUpload)&&nr.verifyParamType("commonUpload",sr.commonUpload,"boolean","api::previewFile"),sr.nosSurvivalTime?(nr.verifyParamType("nosSurvivalTime",sr.nosSurvivalTime,"number","api::Base.getInstance"),nr.verifyParamMin("nosSurvivalTime",sr.nosSurvivalTime,86400,"api::Base.getInstance")):sr.nosSurvivalTime=this.nosSurvivalTime,sr.filePath=sr.filePath||sr.wxFilePath,delete sr.wxFilePath,sr.dataURL)sr.blob=Sr.fromDataURL(sr.dataURL);else if(!sr.blob){if(sr.fileInput){if(sr.fileInput.files){if(!sr.fileInput.files.length)return void sr.done(ar.newNoFileError("请选择"+sr.type+"文件",{callFunc:"msg::previewFile",fileInput:sr.fileInput}),sr);sr.fileSize=sr.fileInput.files[0].size}sr.fileInputName=nr.getFileName(sr.fileInput)}}this.processCallback(sr);var vr=k(pr.genResponseBody(sr.type)||{}).replace(/"/gi,'\\"'),Tr=null,Br=sr.transcode?"getNosTokenTrans":"getNosToken";if(sr.transcode){nr.verifyOptions(sr,"fileInput","msg::previewFile");var Lr=nr.getFileInfo(sr.fileInput);Tr={transToken:{name:Lr.name,type:Lr.transcodeType,transType:sr.transcode==="png"?11:10,size:Lr.size,body:vr}}}else Tr=vr;this[Br]({responseBody:Tr,nosToken:{nosScene:sr.nosScene||this.nosScene,nosSurvivalTime:sr.nosSurvivalTime},callback:L(Ar=function(Fr,qr){if(Fr)sr.done(Fr);else if(sr.transcode?(sr.nosToken=qr.nosToken,sr.docId=qr.docId):sr.nosToken=qr,sr.logger=Cr.logger,sr.mixEnable){var Vr,Qr;if(!this.protocol.mixStorePolicy)try{this.protocol.mixStorePolicy=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[this.options.appKey]}catch(Sn){Cr.logger.error("error:","get last mixStorePolicy failed",Sn)}if(!this.protocol.mixStorePolicy)return void Cr.logger.error("error:","get mixStorePolicy failed");sr.providers=$(Vr=this.protocol.mixStorePolicy.providers||[]).call(Vr,function(Sn){return Number(Sn)}),sr.curProvider=sr.providers[0]?Number(sr.providers[0]):1,sr.nosPolicy=this.protocol.mixStorePolicy.nosPolicy,sr.s3Policy=this.protocol.mixStorePolicy.s3Policy,sr.policyVersion=this.protocol.mixStorePolicy.policyVersion,Cr.getMixStoreToken({curProvider:sr.curProvider,policyVersion:sr.policyVersion,responseBody:Tr,callback:L(Qr=function(Sn,Mn){Sn?sr.done(Sn):(sr.mixStoreToken=Mn,sr.getMixStoreToken=function(Xr,Wn){Cr.getMixStoreToken({curProvider:Xr,policyVersion:sr.policyVersion,responseBody:Tr,callback:function(Zr,En){Zr?sr.done(Zr):Wn(En)}})},sr.curProvider===1&&(sr.nosToken=Mn),Cr._doPreviewFile(sr,Ir))}).call(Qr,Cr)})}else this._doPreviewFile(sr,Ir)}).call(Ar,this)})},cr._doPreviewFile=function(sr,Ir){var Ar=this;sr=nr.merge(sr,Ar.options.providers);var Cr=gr.genUploadUrl(sr.nosToken.bucket);sr.mixEnable&&sr.curProvider===1&&(Cr=gr.genUploadUrl(sr.mixStoreToken.bucket));var br,vr=gr.chunkUploadUrl;Ar.logger.info("_doPreviewFile: start upload"),sr.commonUpload||!vr||gr.isWeixinApp||gr.isNodejs||gr.isRN?(sr.commonUpload=!0,br=Cr):(br=vr,sr.nosLbsUrls=gr.nosLbsUrls,Ar.options.edgeList?sr.edgeList=Ar.options.edgeList:sr.updateNosEdgeList=function(qr){Ar.options.edgeList=qr}),Ar.protocol.reporterHook.emit("reporter/uploadStart");var Tr=this.assembleUploadParams(sr.nosToken);sr.mixEnable&&sr.curProvider===1&&(Tr=this.assembleUploadParams(sr.mixStoreToken));function Br(qr,Vr,Qr,Sn){if(qr){var Mn=nr.get(qr,"msg.message")||nr.get(qr,"message")||"Unknown error message",Xr=nr.get(qr,"msg.code")||nr.get(qr,"code")||"Unknown error code";Ar.logger.error("_doPreviewFile: upload done, failed ",Xr,Mn),Ar.protocol.reporterHook.emit("reporter/uploadEnd",qr.code==="RequestAbortedError"||qr.code==="abort"?Mr.kCanceled:Mr.kFailed);var Wn=V({},Sn||Ir,{status:"fail"}),Zr=dr(dr({},sr.callback.options),{},{msg:Wn});return sr.uploaddone&&sr.uploaddone(qr,Zr,Wn),void sr.done(qr,sr.callback.options)}if(Ar.logger.info("_doPreviewFile: upload done, success"),Ar.protocol.reporterHook.emit("reporter/uploadEnd",Mr.kSucceed),sr.uploaddone&&sr.uploaddone(null,nr.copy(Vr),Sn||Ir),Vr=pr.parseResponse(Vr,Ar.options.exifOrientation),Qr||Vr.isS3||(Vr.url=gr.genDownloadUrl(sr.nosToken,Tr.Object,gr.serverNosConfig.cdnDomain),sr.nosToken.shortUrl&&(Vr._url_safe=sr.nosToken.shortUrl)),nr.exist(sr.fileInputName))Vr.name=sr.fileInputName;else if(sr.blob){var En=sr.blob.name;if(Vr.name=En||"blob-"+Vr.md5,!En){var Jr=sr.blob.type;Vr.ext=y(Jr).call(Jr,i(Jr).call(Jr,"/")+1)}}else sr.filePath?Vr.name=sr.filePath:sr.fileObject&&(Vr.name=sr.fileObject.fileName);if(!Vr.ext){var kn,Un,wn=i(kn=Vr.name).call(kn,".");wn===-1?Vr.ext="unknown":Vr.ext=y(Un=Vr.name).call(Un,wn+1)}Vr.size=Vr.size||0,Vr.isS3&&Vr._url_safe?Ar.getNosOriginUrl({safeShortUrl:Vr._url_safe,done:function(Pn,oo){Pn?Ar.logger.error("error:","getNosOriginUrl failed",Pn):(Vr.url=oo,sr.done(null,nr.copy(Vr)))}}):sr.done(null,nr.copy(Vr))}if(gr.isWeixinApp)nr.verifyOptions(sr,"filePath","msg::_doPreviewFile"),Ar.fileQuickTransfer(sr,Br,function(){var qr=wx.uploadFile({url:br,filePath:sr.filePath,name:"file",formData:Tr,fail:function(Vr){Br({code:"FAILED",msg:Vr}),Ar.logger.error("error:","api::msg:upload file failed",Vr)},success:function(Vr){if(Vr.statusCode===200)try{Br(null,JSON.parse(Vr.data))}catch(Qr){Ar.logger.error("error:","parse wx upload file res error",Qr),Br({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:Vr.data,msg:Vr.errMsg})}else Br({code:Vr.statusCode,msg:Vr.errMsg})}});typeof sr.uploadprogress=="function"&&qr&&(sr.beginupload(qr,Ir),Ar.logger.info("_doPreviewFile::mini uploadprogress"),qr.onProgressUpdate(function(Vr){sr.uploadprogress({total:Vr.totalBytesExpectedToSend,loaded:Vr.totalBytesSent,percentage:Vr.progress,percentageText:Vr.progress+"%"},Ir)}))});else if(gr.isNodejs){var Lr={url:br,name:"file",formData:Tr,success:function(qr){if(qr.statusCode===200)try{Br(null,JSON.parse(qr.data))}catch(Vr){Ar.protocol.logger.error("error:","parse nodejs upload file res error",Vr),Br({code:"PARSE_NODEJS_UPLOAD_FILE_RES_ERROR",str:qr.data,msg:qr.errMsg})}else Br({code:qr.statusCode,msg:qr.errMsg})},fail:function(qr){Br({code:"FAILED",msg:qr}),Ar.protocol.logger.error("error:","api::msg:upload file failed",qr)}};if(sr.filePath)Lr.filePath=sr.filePath;else{if(n(sr.fileObject)!=="object")throw new ar("Nodejs上传fileObject参数类型应如 {fileName:..,fileData:..} ");Lr.fileData=sr.fileObject.fileData}Ar.fileQuickTransfer(sr,Br,function(){yr.uploadFile(Lr)})}else if(gr.isRN){var Fr={url:br,name:"file",formData:Tr,filePath:sr.filePath,success:function(qr){if(qr.ok&&qr.status===200)try{var Vr=$(qr.headers)&&$(qr.headers).etag;qr.md5=Vr?typeof Vr=="string"?Vr:Vr[0]:"UNKNOWN",Br(null,qr)}catch(Qr){Ar.protocol.logger.error("error:","parse React Native upload file res error",Qr),Br({code:"PARSE_React_Native_UPLOAD_FILE_RES_ERROR",res:qr})}else Br({code:qr.status,msg:qr.statusText})},fail:function(qr){Br({code:"FAILED",msg:qr}),Ar.protocol.logger.error("error:","api::msg:upload file failed",qr)}};Ar.fileQuickTransfer(sr,Br,function(){yr.uploadFile(Fr)})}else sr.url=br,sr.params=Tr,sr.fileName="file",Ar.fileQuickTransfer(sr,Br,function(){return Ar.protocol.adaptersUploadFile(V({},sr,{uploaddone:Br}),Ir)})},cr.fileQuickTransfer=function(sr,Ir,Ar){var Cr,br=this;sr=sr||{},Ir instanceof Function||(Ir=function(){}),Ar instanceof Function||(Ar=function(){});var vr=sr.fastPass;if(vr)try{vr=JSON.parse(vr),sr.fastPass=vr}catch{br.protocol.logger.error("快传参数解析失败")}var Tr=sr.fileInputName||sr.name||sr.blob&&sr.blob.name||"",Br=sr.fileSize||sr.size||sr.blob&&sr.blob.size||0,Lr=vr?z(Cr=(vr.md5||sr.digest||"")+"").call(Cr):"",Fr=sr.type||sr.blob&&sr.blob.type;if(Lr&&Br>=gr.threshold){var qr=!0,Vr={name:Tr,md5:Lr,ext:y(Tr).call(Tr,i(Tr).call(Tr,".")+1),type:Fr};switch(Fr){case"image":vr&&vr.w&&vr.h?(Vr.w=vr.w,Vr.h=vr.h):(qr=!1,br.protocol.logger.error("快传 image 文件缺少参数 w 或 h"));break;case"video":vr&&vr.w&&vr.h&&vr.dur?(Vr.w=vr.w,Vr.h=vr.h,Vr.dur=vr.dur):(qr=!1,br.protocol.logger.error("快传 video 文件缺少参数 w 或 h 或 dur"));break;case"audio":vr&&vr.dur?Vr.dur=vr.dur:(qr=!1,br.protocol.logger.error("快传 audio 文件缺少参数 dur"))}if(!qr)return void Ar();var Qr={fileQuickTransfer:{md5:Lr}};return Br&&(Qr.fileQuickTransfer.size=Br),this.protocol.sendCmd("fileQuickTransfer",Qr,function(Sn,Mn,Xr){!Sn&&Xr&&Xr.fileQuickTransfer&&Xr.fileQuickTransfer.url||(br.protocol.logger.error("misc::fileQuickTransfer: not found",Sn,Mn),Ar()),Xr&&Xr.fileQuickTransfer&&Xr.fileQuickTransfer.threshold&&(gr.threshold=Xr.fileQuickTransfer.threshold||0),Xr&&Xr.fileQuickTransfer&&Xr.fileQuickTransfer.url&&(Vr.size=Br||Xr.fileQuickTransfer.size,Vr.url=Xr.fileQuickTransfer.url,Xr.fileQuickTransfer._url_safe&&(Vr._url_safe=Xr.fileQuickTransfer._url_safe),Ir(Sn,Vr,!0))})}Ar()},cr.sendFile=function(sr){if((sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendFile",done:sr.done}),sr.type||(sr.type="file"),sr=nr.merge(sr,this.options.providers),nr.verifyParamPresentJustOne(sr,"dataURL blob fileInput file filePath wxFilePath fileObject","msg::sendFile"),nr.exist(sr.maxSize)&&nr.verifyParamType("maxSize",sr.maxSize,"number","api::previewFile"),nr.exist(sr.commonUpload)&&nr.verifyParamType("commonUpload",sr.commonUpload,"boolean","api::previewFile"),this.processCallback(sr),sr.filePath=sr.filePath||sr.wxFilePath,delete sr.wxFilePath,sr.dataURL)return this._previewAndSendFile(sr);if(sr.blob)return this._previewAndSendFile(sr);if(sr.fileInput)return sr.fileInput=nr.verifyFileInput(sr.fileInput,"msg::sendFile"),sr.fileInput.files&&!sr.fileInput.files.length?void sr.done(ar.newNoFileError("请选择"+sr.type+"文件",{callFunc:"msg::sendFile",fileInput:sr.fileInput}),sr.callback.options):this._previewAndSendFile(sr);if(sr.filePath||sr.fileObject)return this._previewAndSendFile(sr);if(sr.file){var Ir,Ar=sr.file._url_safe;return Ar&&(Ir=sr.file.url,sr.file.url=Ar,delete sr.file._url_safe),sr.msg=new this.message.FileMessage(sr),this.sendMsg(sr,Ir)}},cr._previewAndSendFile=function(sr){var Ir=this;nr.verifyCallback(sr,"uploaddone beforesend","msg::_previewAndSendFile");var Ar=dr({},sr),Cr=new Ir.message.Message(Ar);Cr.type=sr.type;var br=Ir.formatReturnMsg(Cr),vr=Ir.protocol.reporterHook.getSafeClock(),Tr={apiCallingTime:Ir.protocol.reporterHook.getNTPTime(vr),attachUploadDuration:0},Br=sr.done;return sr.done=function(Lr,Fr){if(sr.done=Br,Lr){var qr=V({},br,{status:"fail"}),Vr=dr(dr({},sr.callback.options),{},{msg:qr});sr.done(Lr,Vr)}else{if(Tr.attachUploadDuration=Ir.protocol.reporterHook.getSafeClock()-vr,/chatroom/.test(sr.scene))return;var Qr,Sn=Fr._url_safe;Sn&&!Fr.isS3&&(Qr=Fr.url,Fr.url=Sn,delete Fr._url_safe),sr.file=Fr,sr.msg=new Ir.message.FileMessage(sr,Cr.idClient),sr.beforesend(Ir.sendMsg(sr,Qr,Tr))}},Ir.previewFile(sr,br),br},cr.assembleUploadParams=function(sr){return sr?{Object:decodeURIComponent(sr.objectName),"x-nos-token":sr.token,"x-nos-entity-type":"json"}:null},cr.deleteFile=function(sr){_r({instance:this,className:"ApiBaseFn",funcName:"deleteFile",hasCallback:!1}),nr.verifyParamPresentJustOne(sr,"docId","msg::deleteFile"),this.removeFile({docId:sr.docId,callback:function(Ir,Ar){Ir?sr.error&&sr.error(Ir,Ar):sr.success&&sr.success(Ar)}})},cr.getFile=function(sr){_r({instance:this,className:"ApiBaseFn",funcName:"getFile",hasCallback:!1}),nr.verifyParamPresentJustOne(sr,"docId","msg::getFile"),this.fetchFile({docId:sr.docId,callback:function(Ir,Ar){Ir?sr.error&&sr.error(Ir,Ar):sr.success&&sr.success(Ar.info)}})},cr.getFileList=function(sr){_r({instance:this,className:"ApiBaseFn",funcName:"getFileList",hasCallback:!1});var Ir=sr.fromDocId,Ar=Ir===void 0?"":Ir,Cr=sr.limit,br=Cr===void 0?10:Cr,vr={limit:br};Ar&&(vr.fromDocId=Ar),this.fetchFileList({fileListParam:vr,callback:function(Tr,Br){Tr?(br>30&&(Tr.message=Tr.message+"::文档条数超过限制:30"),sr.error&&sr.error(Tr,Br)):sr.success&&sr.success(Br)}})},cr.sendGeo=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendGeo",done:sr.done}),this.processCallback(sr),sr.msg=new this.message.GeoMessage(sr),this.sendMsg(sr)},cr.sendTipMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendTipMsg",done:sr.done}),this.processCallback(sr),sr.msg=new this.message.TipMessage(sr),this.sendMsg(sr)},cr.sendCustomMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendCustomMsg",done:sr.done}),this.processCallback(sr),sr.msg=new this.message.CustomMessage(sr),this.sendMsg(sr)},cr.sendRobotMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendRobotMsg",done:sr.done}),this.logger.warn("this api will be abandon"),this.processCallback(sr),sr.msg=new this.message.RobotMessage(sr),this.sendMsg(sr)},cr.sendMsg=function(sr,Ir,Ar){var Cr=this,br=Cr.protocol,vr=sr.msg,Tr={};Ar=Ar||{apiCallingTime:br.reporterHook.getNTPTime(),attachUploadDuration:0};var Br,Lr=!!sr.isLocal;if(this.logger.warn("sendMsg::start: "+vr.idClient),Lr&&(sr.time&&(vr.time=sr.time),sr.idClient&&(vr.idClient=sr.idClient),sr.localFrom&&(Br=sr.localFrom+"")),sr.resend&&(sr.flow!=="out"||sr.status!=="fail"))return nr.onError("只能重发发送失败的消息");sr.callback.options.idClient=vr.idClient,Cr.beforeSendMsg(sr,Tr);var Fr=sr.rtnMsg=Cr.formatReturnMsg(vr,Br);if(Ir&&!Cr.options.keepNosSafeUrl&&Fr.file&&(Fr.file._url_safe=Fr.file.url,Fr.file.url=Ir,Fr.type==="audio"&&(Fr.file.mp3Url=Ir+(~re(Ir).call(Ir,"?")?"&":"?")+"audioTrans&type=mp3")),Fr.hasOwnProperty("chatroomId")&&!Fr.chatroomId)return nr.onError("聊天室未连接");if(Lr&&(Fr.status="success",Fr.isLocal=!0),br.storeSendMsg&&(Tr.promise=br.storeSendMsg(Fr)),sr.cbaop=function(Vr,Qr){if(Vr)return Vr.code===7101&&(Fr.isInBlackList=!0,Fr.idServer=Qr.idServer,Fr.time=Qr.time),Vr.from!=="server"?(Fr.status="fail",br.updateSendMsgError&&br.updateSendMsgError(Fr),Fr):void 0},!Lr){Ir&&!Cr.options.keepNosSafeUrl&&sr.callback&&(sr.callback.originUrl=Ir),sr.toAccids&&sr.toAccids.length&&(vr.toAccids=k(sr.toAccids)),Tr.msg=vr,Ar.sendTime=br.reporterHook.getNTPTime(),br.reporterHook.hasOriginTimetick()&&(Tr.msg.__clientExt=k({statistics:Ar}));var qr=vr;Cr.sendCmd(sr.cmd,Tr,function(){if(gr.isBrowser){var Vr=arguments[0],Qr=arguments[1]||{},Sn=Cr.subType==="chatroom",Mn=qr.scene===0,Xr=br.reporterHook.getNTPTime(),Wn={msgId:Qr.idServer,clientId:qr.idClient,msgTime:Qr.time||0,fromAccid:Cr.account,toAccid:Mn?qr.to:"",type:Sn?4:qr.scene,roomId:Sn?Cr.options.chatroomId:"",tid:Sn||Mn?"":qr.to,result:Vr?Vr.code:200,failReason:Vr?Vr.message:"",rt:oe(Xr-Ar.apiCallingTime),apiCallingTime:Ar.apiCallingTime,sendTime:Ar.sendTime,attachUploadDuration:Ar.attachUploadDuration,apiCallbackTime:Xr};Cr.reporter&&Cr.reporter.report("msgSend",Wn)}sr.callback&&sr.callback.apply(Cr,arguments);var Zr=arguments[0],En=arguments[1];!Zr&&En&&En.from===En.to&&Cr.protocol.markMsgRead(En)})}return Cr.afterSendMsg(sr),Lr&&le(function(){Fr=nr.simpleClone(Fr),sr.done(null,Fr)},0),nr.copy(Fr)},cr.beforeSendMsg=function(){},cr.afterSendMsg=function(){},cr.formatReturnMsg=function(sr,Ir){var Ar;return sr=nr.copy(sr),this.protocol.completeMsg(sr),sr.status="sending",Ir&&(sr.from=Ir),sr=ue(Ar=this.message).call(Ar,sr),sr=this.protocol.amendMsg(sr)},cr.resendMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"resendMsg",done:sr.done}),nr.verifyOptions(sr,"msg","msg::resendMsg"),this.trimMsgFlag(sr),sr.resend=!0,this._sendMsgByType(sr)},cr.forwardMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"forwardMsg",done:sr.done}),nr.verifyOptions(sr,"msg","msg::forwardMsg"),this.trimMsgFlag(sr),this.beforeForwardMsg(sr),sr.forward=!0,sr.msg.idClient=nr.guid(),this._sendMsgByType(sr)},cr.trimMsgFlag=function(sr){sr&&sr.msg&&(sr.msg=nr.copy(sr.msg),delete sr.msg.resend,delete sr.msg.forward)},cr.beforeForwardMsg=function(){},cr._sendMsgByType=function(sr){switch(nr.verifyOptions(sr,"msg","msg::_sendMsgByType"),nr.verifyParamValid("msg.type",sr.msg.type,this.message.validTypes,"msg::_sendMsgByType"),nr.merge(sr,sr.msg),sr.type){case"text":return this.sendText(sr);case"image":case"audio":case"video":case"file":return this.sendFile(sr);case"geo":return this.sendGeo(sr);case"custom":return this.sendCustomMsg(sr);case"tip":return this.sendTipMsg(sr);default:throw new ar("不能发送类型为 "+sr.type+" 的消息")}},cr.parseRobotTemplate=function(sr){if(this.logger.warn("this api will be abandon"),/<template[^>/]+\/>/.test(sr))return{raw:sr,json:[{type:"text",name:"",text:""}]};if(!/<template[^>/]+>/.test(sr))return{raw:sr,json:[{type:"text",name:"",text:sr}]};var Ir=new ur({escapeMode:!1});sr=sr.replace(/<template [^>]+>/,"<template>");var Ar=Ir.xml2js(sr);Ar=Ar.template.LinearLayout,ie(Ar)||(Ar=[Ar]);var Cr=[];return Ar=ae(Ar).call(Ar,function(Tr){Tr.image&&(Cr=g(Cr).call(Cr,vr(Tr))),Tr.text&&(Cr=g(Cr).call(Cr,br(Tr))),Tr.link&&(Cr=g(Cr).call(Cr,function(Br){if(Br.link){var Lr=Br.link;ie(Lr)||(Lr=[Lr]),Lr=$(Lr).call(Lr,function(Fr){return Fr.image&&(Fr.image=vr(Fr)),Fr.text&&(Fr.text=br(Fr)),Fr._type==="url"?(Fr.type="url",Fr.style=Fr._style||"",Fr.target=Fr._target,delete Fr._target,delete Fr._style):Fr._type==="block"&&(Fr.type="block",Fr.style=Fr._style||"",Fr.params=Fr._params||"",Fr.target=Fr._target,delete Fr._params,delete Fr._target,delete Fr._style),delete Fr._type,Fr}),Br.link=Lr}return Br.link}(Tr)))}),{raw:sr,json:Cr};function br(Tr){var Br;return ie(Tr.text)||(Tr.text=[Tr.text]),Tr.text=$(Br=Tr.text).call(Br,function(Lr){return{type:"text",name:Lr._name,text:Lr.__text}}),Tr.text}function vr(Tr){var Br;return ie(Tr.image)||(Tr.image=[Tr.image]),Tr.image=$(Br=Tr.image).call(Br,function(Lr){return{type:"image",name:Lr._name,url:Lr._url}}),Tr.image}}},function(t,r,e){e(597);var n=e(14);t.exports=n.Object.assign},function(t,r,e){var n=e(1),g=e(598);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==g},{assign:g})},function(t,r,e){var n=e(29),g=e(13),y=e(20),i=e(7),k=e(124),L=e(136),$=e(157),V=e(46),z=e(129),re=Object.assign,oe=Object.defineProperty,le=g([].concat);t.exports=!re||i(function(){if(n&&re({b:1},re(oe({},"a",{enumerable:!0,get:function(){oe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var ue={},ie={},ae=Symbol();return ue[ae]=7,"abcdefghijklmnopqrst".split("").forEach(function(Fe){ie[Fe]=Fe}),re({},ue)[ae]!=7||k(re({},ie)).join("")!="abcdefghijklmnopqrst"})?function(ue,ie){for(var ae=V(ue),Fe=arguments.length,de=1,Ne=L.f,Ve=$.f;Fe>de;)for(var ze,jt=z(arguments[de++]),kt=Ne?le(k(jt),Ne(jt)):k(jt),Et=kt.length,lr=0;Et>lr;)ze=kt[lr++],n&&!y(Ve,jt,ze)||(ae[ze]=jt[ze]);return ae}:re},function(t,r,e){var n=e(18),g=e(600),y=Array.prototype;t.exports=function(i){var k=i.reverse;return i===y||n(y,i)&&k===y.reverse?g:k}},function(t,r,e){e(601);var n=e(27);t.exports=n("Array").reverse},function(t,r,e){var n=e(1),g=e(13),y=e(87),i=g([].reverse),k=[1,2];n({target:"Array",proto:!0,forced:String(k)===String(k.reverse())},{reverse:function(){return y(this)&&(this.length=this.length),i(this)}})},function(t,r,e){t.exports=e(603)},function(t,r,e){t.exports=e(604)},function(t,r,e){var n=e(605);t.exports=n},function(t,r,e){var n=e(262);t.exports=n},function(t,r,e){t.exports=e(607)},function(t,r,e){var n=e(608);t.exports=n},function(t,r,e){var n=e(211);t.exports=n},function(t,r,e){var n=e(610),g=e(194);t.exports=function(y,i){if(y==null)return{};var k,L,$={},V=n(y);for(L=0;L<V.length;L++)k=V[L],g(i).call(i,k)>=0||($[k]=y[k]);return $},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(611)},function(t,r,e){t.exports=e(612)},function(t,r,e){var n=e(613);t.exports=n},function(t,r,e){var n=e(237);t.exports=n},function(t,r,e){var n,g,y;(function(i,k){g=[],(y=typeof(n=function(L){return function($){($=$||{}).arrayAccessForm=$.arrayAccessForm||"none",$.emptyNodeForm=$.emptyNodeForm||"text",$.jsAttributeFilter=$.jsAttributeFilter,$.jsAttributeConverter=$.jsAttributeConverter,$.attributeConverters=$.attributeConverters||[],$.datetimeAccessFormPaths=$.datetimeAccessFormPaths||[],$.arrayAccessFormPaths=$.arrayAccessFormPaths||[],$.xmldomOptions=$.xmldomOptions||{},$.enableToStringFunc===void 0&&($.enableToStringFunc=!0),$.skipEmptyTextNodesForObj===void 0&&($.skipEmptyTextNodesForObj=!0),$.stripWhitespaces===void 0&&($.stripWhitespaces=!0),$.useDoubleQuotes===void 0&&($.useDoubleQuotes=!0),$.ignoreRoot===void 0&&($.ignoreRoot=!1),$.escapeMode===void 0&&($.escapeMode=!0),$.attributePrefix===void 0&&($.attributePrefix="_"),$.selfClosingElements===void 0&&($.selfClosingElements=!0),$.keepCData===void 0&&($.keepCData=!1),$.keepText===void 0&&($.keepText=!1),$.jsDateUTC===void 0&&($.jsDateUTC=!1),function(){function cr(nr){var ur=String(nr);return ur.length===1&&(ur="0"+ur),ur}typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),typeof Date.prototype.toISOString!="function"&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+cr(this.getUTCMonth()+1)+"-"+cr(this.getUTCDate())+"T"+cr(this.getUTCHours())+":"+cr(this.getUTCMinutes())+":"+cr(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var V=1,z=3,re=4,oe=8,le=9;function ue(cr){var nr=cr.localName;return nr==null&&(nr=cr.baseName),nr!=null&&nr!==""||(nr=cr.nodeName),nr}function ie(cr){return typeof cr=="string"?cr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):cr}function ae(cr,nr,ur){switch($.arrayAccessForm){case"property":cr[nr]instanceof Array?cr[nr+"_asArray"]=cr[nr]:cr[nr+"_asArray"]=[cr[nr]]}if(!(cr[nr]instanceof Array)&&$.arrayAccessFormPaths.length>0){for(var ar=!1,gr=0;gr<$.arrayAccessFormPaths.length;gr++){var pr=$.arrayAccessFormPaths[gr];if(typeof pr=="string"){if(pr===ur){ar=!0;break}}else if(pr instanceof RegExp){if(pr.test(ur)){ar=!0;break}}else if(typeof pr=="function"&&pr(nr,ur)){ar=!0;break}}ar&&(cr[nr]=[cr[nr]])}}function Fe(cr){var nr=cr.split(/[-T:+Z]/g),ur=new Date(nr[0],nr[1]-1,nr[2]),ar=nr[5].split(".");if(ur.setHours(nr[3],nr[4],ar[0]),ar.length>1&&ur.setMilliseconds(ar[1]),nr[6]&&nr[7]){var gr=60*nr[6]+Number(nr[7]);gr=0+((/\d\d-\d\d:\d\d$/.test(cr)?"-":"+")=="-"?-1*gr:gr),ur.setMinutes(ur.getMinutes()-gr-ur.getTimezoneOffset())}else cr.indexOf("Z",cr.length-1)!==-1&&(ur=new Date(Date.UTC(ur.getFullYear(),ur.getMonth(),ur.getDate(),ur.getHours(),ur.getMinutes(),ur.getSeconds(),ur.getMilliseconds())));return ur}function de(cr,nr){for(var ur={__cnt:0},ar=cr.childNodes,gr=0;gr<ar.length;gr++){var pr=ar.item(gr),yr=ue(pr);pr.nodeType!==oe&&(ur.__cnt++,ur[yr]==null?(ur[yr]=Ne(pr,nr+"."+yr),ae(ur,yr,nr+"."+yr)):(ur[yr]instanceof Array||(ur[yr]=[ur[yr]],ae(ur,yr,nr+"."+yr)),ur[yr][ur[yr].length]=Ne(pr,nr+"."+yr)))}for(var Sr=0;Sr<cr.attributes.length;Sr++){var wr=cr.attributes.item(Sr);ur.__cnt++;for(var Mr=wr.value,mr=0;mr<$.attributeConverters.length;mr++){var _r=$.attributeConverters[mr];_r.test.call(null,wr.name,wr.value)&&(Mr=_r.convert.call(null,wr.name,wr.value))}ur[$.attributePrefix+wr.name]=Mr}var Nr=cr.prefix;return Nr&&(ur.__cnt++,ur.__prefix=Nr),ur["#text"]&&(ur.__text=ur["#text"],ur.__text instanceof Array&&(ur.__text=ur.__text.join(`
`)),$.escapeMode&&(ur.__text=ur.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),$.stripWhitespaces&&(ur.__text=ur.__text.trim()),delete ur["#text"],$.arrayAccessForm==="property"&&delete ur["#text_asArray"],ur.__text=function(Pr,sr,Ir){if($.datetimeAccessFormPaths.length>0)for(var Ar=Ir.split(".#")[0],Cr=0;Cr<$.datetimeAccessFormPaths.length;Cr++){var br=$.datetimeAccessFormPaths[Cr];if(typeof br=="string"){if(br===Ar)return Fe(Pr)}else if(br instanceof RegExp){if(br.test(Ar))return Fe(Pr)}else if(typeof br=="function"&&br(Ar))return Fe(Pr)}return Pr}(ur.__text,0,nr+".#text")),ur.hasOwnProperty("#cdata-section")&&(ur.__cdata=ur["#cdata-section"],delete ur["#cdata-section"],$.arrayAccessForm==="property"&&delete ur["#cdata-section_asArray"]),ur.__cnt===1&&ur.__text&&!$.keepText?ur=ur.__text:ur.__cnt===0&&$.emptyNodeForm==="text"?ur="":ur.__cnt>1&&ur.__text!==void 0&&$.skipEmptyTextNodesForObj&&($.stripWhitespaces&&ur.__text===""||ur.__text.trim()==="")&&delete ur.__text,delete ur.__cnt,$.keepCData||ur.hasOwnProperty("__text")||!ur.hasOwnProperty("__cdata")||Object.keys(ur).length!==1?($.enableToStringFunc&&(ur.__text||ur.__cdata)&&(ur.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),ur):ur.__cdata?ur.__cdata:""}function Ne(cr,nr){return cr.nodeType===le?function(ur){for(var ar={},gr=ur.childNodes,pr=0;pr<gr.length;pr++){var yr=gr.item(pr);if(yr.nodeType===V){var Sr=ue(yr);$.ignoreRoot?ar=Ne(yr,Sr):ar[Sr]=Ne(yr,Sr)}}return ar}(cr):cr.nodeType===V?de(cr,nr):cr.nodeType===z||cr.nodeType===re?cr.nodeValue:null}function Ve(cr,nr,ur,ar){var gr="<"+(cr&&cr.__prefix?cr.__prefix+":":"")+nr;if(ur)for(var pr=0;pr<ur.length;pr++){var yr=ur[pr],Sr=cr[yr];$.escapeMode&&(Sr=ie(Sr)),gr+=" "+yr.substr($.attributePrefix.length)+"=",$.useDoubleQuotes?gr+='"'+Sr+'"':gr+="'"+Sr+"'"}return gr+=ar?" />":">"}function ze(cr,nr){return"</"+(cr&&cr.__prefix?cr.__prefix+":":"")+nr+">"}function jt(cr,nr){return $.arrayAccessForm==="property"&&(ur=nr.toString(),ar="_asArray",ur.indexOf(ar,ur.length-ar.length)!==-1)||nr.toString().indexOf($.attributePrefix)===0||nr.toString().indexOf("__")===0||cr[nr]instanceof Function;var ur,ar}function kt(cr){var nr=0;if(cr instanceof Object)for(var ur in cr)jt(cr,ur)||nr++;return nr}function Et(cr){var nr=[];if(cr instanceof Object)for(var ur in cr)ur.toString().indexOf("__")===-1&&ur.toString().indexOf($.attributePrefix)===0&&nr.push(ur);return nr}function lr(cr){var nr="";return cr instanceof Object?nr+=function(ur){var ar="";return ur.__cdata&&(ar+="<![CDATA["+ur.__cdata+"]]>"),(ur.__text||typeof ur.__text=="number"||typeof ur.__text=="boolean")&&($.escapeMode?ar+=ie(ur.__text):ar+=ur.__text),ar}(cr):cr!==null&&($.escapeMode?nr+=ie(cr):nr+=cr),nr}function tr(cr,nr,ur){var ar="";return $.jsAttributeFilter&&$.jsAttributeFilter.call(null,nr,cr)||($.jsAttributeConverter&&(cr=$.jsAttributeConverter.call(null,nr,cr)),cr!=null&&cr!==""||!$.selfClosingElements?typeof cr=="object"?Object.prototype.toString.call(cr)==="[object Array]"?ar+=function(gr,pr,yr){var Sr="";if(gr.length===0)Sr+=Ve(gr,pr,yr,!0);else for(var wr=0;wr<gr.length;wr++)Sr+=tr(gr[wr],pr,Et(gr[wr]));return Sr}(cr,nr,ur):cr instanceof Date?(ar+=Ve(cr,nr,ur,!1),ar+=$.jsDateUTC?cr.toUTCString():cr.toISOString(),ar+=ze(cr,nr)):kt(cr)>0||typeof cr.__text=="number"||typeof cr.__text=="boolean"||cr.__text||cr.__cdata?(ar+=Ve(cr,nr,ur,!1),ar+=or(cr),ar+=ze(cr,nr)):$.selfClosingElements?ar+=Ve(cr,nr,ur,!0):(ar+=Ve(cr,nr,ur,!1),ar+=ze(cr,nr)):(ar+=Ve(cr,nr,ur,!1),ar+=lr(cr),ar+=ze(cr,nr)):ar+=Ve(cr,nr,ur,!0)),ar}function or(cr){var nr="";if(kt(cr)>0){for(var ur in cr)if(!jt(cr,ur)){var ar=cr[ur];nr+=tr(ar,ur,Et(ar))}}return nr+=lr(cr)}function dr(cr){if(cr===void 0||typeof cr!="string")return null;var nr=null,ur=null;if(L)ur=(nr=new L($.xmldomOptions)).parseFromString(cr,"text/xml");else if(window&&window.DOMParser){nr=new window.DOMParser;var ar=null;if(!(window.ActiveXObject||"ActiveXObject"in window)&&document.all&&!document.addEventListener)try{ar=nr.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch{ar=null}try{ur=nr.parseFromString(cr,"text/xml"),ar!==null&&ur.getElementsByTagNameNS(ar,"parsererror").length>0&&(ur=null)}catch{ur=null}}else cr.indexOf("<?")===0&&(cr=cr.substr(cr.indexOf("?>")+2)),(ur=new ActiveXObject("Microsoft.XMLDOM")).async="false",ur.loadXML(cr);return ur}this.asArray=function(cr){return cr==null?[]:cr instanceof Array?cr:[cr]},this.toXmlDateTime=function(cr){return cr instanceof Date?cr.toISOString():typeof cr=="number"?new Date(cr).toISOString():null},this.asDateTime=function(cr){return typeof cr=="string"?Fe(cr):cr},this.xml2dom=function(cr){return dr(cr)},this.dom2js=function(cr){return Ne(cr,null)},this.js2dom=function(cr){return dr(this.js2xml(cr))},this.xml2js=function(cr){var nr=dr(cr);return nr!=null?this.dom2js(nr):null},this.js2xml=function(cr){return or(cr)},this.getVersion=function(){return"3.4.4"}}})=="function"?n.apply(r,g):n)===void 0||(t.exports=y)})()},function(t,r,e){var n=e(616);t.exports=n},function(t,r,e){var n=e(18),g=e(617),y=e(619),i=Array.prototype,k=String.prototype;t.exports=function(L){var $=L.includes;return L===i||n(i,L)&&$===i.includes?g:typeof L=="string"||L===k||n(k,L)&&$===k.includes?y:$}},function(t,r,e){e(618);var n=e(27);t.exports=n("Array").includes},function(t,r,e){var n=e(1),g=e(170).includes,y=e(7),i=e(163);n({target:"Array",proto:!0,forced:y(function(){return!Array(1).includes()})},{includes:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,r,e){e(620);var n=e(27);t.exports=n("String").includes},function(t,r,e){var n=e(1),g=e(13),y=e(621),i=e(112),k=e(58),L=e(623),$=g("".indexOf);n({target:"String",proto:!0,forced:!L("includes")},{includes:function(V){return!!~$(k(i(this)),k(y(V)),arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(622),g=TypeError;t.exports=function(y){if(n(y))throw g("The method doesn't accept regular expressions");return y}},function(t,r,e){var n=e(30),g=e(71),y=e(21)("match");t.exports=function(i){var k;return n(i)&&((k=i[y])!==void 0?!!k:g(i)=="RegExp")}},function(t,r,e){var n=e(21)("match");t.exports=function(g){var y=/./;try{"/./"[g](y)}catch{try{return y[n]=!1,"/./"[g](y)}catch{}}return!1}},function(t,r,e){var n=e(92);t.exports=function(g,y){return y.method="POST",y.headers=y.headers||{},y.headers["Content-Type"]="multipart/form-data",y.timeout=0,y.type=y.type||"json",n(g,y)}},function(t,r,e){var n=e(9),g=e(43),y=e(4),i=e(8),k=e(3),L=e(12),$=L.chunkSize,V=e(92),z=e(35).formatError,re={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};t.exports=function oe(le,ue,ie,ae){ie&&ie.protocol&&(ie.protocol.cloudStorage=ie.protocol.cloudStorage||{},ie.protocol.cloudStorage.uploadCache=ie.protocol.cloudStorage.uploadCache||{});var Fe={file:le.data[ue],fileSize:le.data[ue].size,fileUploadedSize:0,percentage:0},de=Fe.file,Ne="";de&&de.name&&de.lastModified&&de.size&&(Ne=de.name+"_"+de.lastModified+"_"+de.size);var Ve=le.url;function ze(nr){var ur=Fe.fileUploadedSize+nr.loaded,ar=Math.floor(1e4*ur/Fe.fileSize)/100;if(g(ar)>=100&&(ar=100,ze=function(){}),Fe.percentage!==ar){Fe.percentage=ar;var gr={docId:le.docId,total:Fe.fileSize,loaded:ur,percentage:ar,percentageText:ar+"%"};le.fileInput&&(gr.fileInput=le.fileInput),le.blob&&(gr.blob=le.blob),le.uploadprogress(gr)}}function jt(nr){try{nr=JSON.parse(nr)}catch{var ur;return void ie.onError({code:"JSON_PARSE_ERROR",message:y(ur="parse chunk upload result error. url: ".concat(Ve,". body: ")).call(ur,nr)})}if(nr&&(nr.errMsg||nr.errCode))ie.onError(z(nr,{fallbackCode:"CHUNK_UPLOAD_FAIL",fallbackMessage:"chunk upload failed.",suffix:"chunk upload onload error. url: ".concat(Ve)}));else if(nr.offset<Fe.fileSize)delete tr.onaftersend,Fe.fileUploadedSize=nr.offset,function(pr,yr,Sr,wr){var Mr=pr.offset,mr=pr.offset+$;if(typeof FileReader<"u"){var _r,Nr=new FileReader;Nr.readAsArrayBuffer(n(_r=wr.file).call(_r,Mr,mr)),Nr.addEventListener("load",function(sr){yr.data=sr.target.result,yr.query.offset=pr.offset,yr.query.complete=mr>=wr.fileSize,yr.query.context=pr.context,yr.onuploading=ze,yr.onload=jt,yr.onerror=kt,ie.sn=V(Ve,yr),ie.protocol.cloudStorage.uploadCache[Ne]={chunkUrl:Ve,edgeList:le.edgeList,nosToken:le.nosToken,offset:pr.offset,complete:!1,context:pr.context}}),Nr.addEventListener("error",function(sr){yr.onerror(sr.target.error)})}else{var Pr;yr.data=n(Pr=wr.file).call(Pr,Mr,mr),yr.query.offset=pr.offset,yr.query.complete=mr>=wr.fileSize,yr.query.context=pr.context,yr.onuploading=ze,yr.onload=jt,yr.onerror=kt,ie.sn=V(Ve,yr)}}(nr,tr,0,Fe);else{ie.protocol.cloudStorage.uploadCache[Ne]={chunkUrl:Ve,edgeList:le.edgeList,nosToken:le.nosToken,offset:nr.offset,complete:!0,context:nr.context};var ar=L.genFileUrl(le.nosToken);le.type==="image"?V(ar+"?imageInfo",{onload:function(pr){try{pr=JSON.parse(pr),le.uploaddone(null,{docId:nr.docId,w:pr.Width,h:pr.Height,orientation:pr.Orientation||"",type:pr.Type,size:pr.Size||Fe.fileSize})}catch{var yr;gr({code:"JSON_PARSE_ERROR",message:y(yr="parse image meta failed. url: ".concat(ar+"?imageInfo",". body: ")).call(yr,pr)})}},onerror:function(pr){if(typeof Image<"u"){var yr=new Image;yr.src=ar,yr.onload=function(){le.uploaddone(null,{docId:nr.docId,w:yr.width,h:yr.height,size:Fe.fileSize})},yr.onerror=function(Sr){gr(z(Sr,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get Image meta failed.",suffix:"url: ".concat(ar)}))}}else gr(z(pr,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get imageInfo meta failed.",suffix:"url: ".concat(ar+"?imageInfo")}))}}):le.type==="video"||le.type==="audio"?V(ar+"?vinfo",{onload:function(pr){try{(pr=JSON.parse(pr)).GetVideoInfo&&pr.GetVideoInfo.VideoInfo&&(pr=pr.GetVideoInfo.VideoInfo),le.uploaddone(null,{docId:nr.docId,w:pr.Width,h:pr.Height,dur:pr.Duration,orientation:pr.Rotate,audioCodec:pr.AudioCodec,videoCodec:pr.VideoCodec,container:pr.Container,size:pr.Size||Fe.fileSize})}catch{var yr;gr({code:"JSON_PARSE_ERROR",message:y(yr="parse media meta failed. url: ".concat(ar+"?vinfo",". body: ")).call(yr,pr)})}},onerror:function(pr){gr(z(pr,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get vinfo meta failed.",suffix:"url: ".concat(ar+"?vinfo")}))}}):le.uploaddone(null,{docId:nr.docId,size:Fe.fileSize})}function gr(pr){ie.onError(pr)}}function kt(nr){le.errorHook(nr,{url:Ve,provider:"nos"});var ur=nr&&nr.code;function ar(){try{if(nr.result)var gr=JSON.parse(nr.result);else gr=nr;ie.onError(z(gr,{fallbackCode:"CHUNK_UPLOAD_FAIL",fallbackMessage:"chunk upload failed.",suffix:"url: ".concat(Ve)}))}catch{var pr;ie.onError({code:"JSON_PARSE_ERROR",message:y(pr="parse chunk upload result error. url: ".concat(Ve,". body: ")).call(pr,nr.result)})}}Fe.fileUploadedSize===0&&ur!=="abort"?le.edgeList?ae<le.edgeList.length-1?oe(le,ue,ie,ae+1):ar():le.nosLbsUrls&&le.nosLbsUrls.length>0?function(gr,pr,yr,Sr,wr){return new k(function(Mr){function mr(){wr.adaptersRequest(yr[gr],{query:{version:"1.0",bucketname:pr},method:"GET",onerror:_r,onload:function(Nr){try{(Nr=JSON.parse(Nr))&&Nr.upload&&Nr.upload.length?Mr(Nr.upload):_r()}catch{_r()}}},{exception_service:3})}function _r(){Sr.onLbsUrlFail(yr[gr]),gr<yr.length-1?(gr++,mr()):Mr([])}mr()})}(0,le.nosToken.bucket,le.nosLbsUrls,ie,le).then(function(gr){gr.length>0?(le.edgeList=gr,le.updateNosEdgeList&&le.updateNosEdgeList(gr),oe(le,ue,ie,ae+1)):ar()}):(le.edgeList=L.edgeList,oe(le,ue,ie,ae+1)):ar()}typeof ae!="number"&&(ae=-1),le.edgeList&&le.edgeList.length&&(ae=ae>0?ae:0,Ve=le.edgeList[ae]),Ve+="/"+le.nosToken.bucket+"/"+le.nosToken.objectName;var Et=le.data.file&&le.data.file.type;if(!Et||i(Et).call(Et,"/")<0){var lr=(le.fileInputName||"").split(".").pop();le.type==="image"?Et="image/"+(lr==="jpg"?"jpeg":lr):le.type!=="audio"&&le.type!=="video"||(Et=re[lr])}var tr={query:{offset:0,complete:$>=Fe.fileSize,version:"1.0"},headers:{"Content-Type":Et||"application/octet-stream","x-nos-token":le.nosToken.token},method:"POST",timeout:0,onaftersend:function(){le.beginupload(ie)},onuploading:ze,onload:jt,onerror:kt};if(typeof FileReader<"u"){var or,dr=new FileReader;dr.addEventListener("load",function(nr){tr.data=nr.target.result,ie.sn=V(Ve,tr)}),dr.addEventListener("error",function(nr){tr.onerror(nr.target.error)}),dr.readAsArrayBuffer(n(or=Fe.file).call(or,0,$))}else{var cr;tr.data=n(cr=Fe.file).call(cr,0,$),ie.sn=V(Ve,tr)}}},function(t,r,e){e(627);var n=e(14);t.exports=n.Reflect.construct},function(t,r,e){var n=e(1),g=e(33),y=e(83),i=e(281),k=e(179),L=e(38),$=e(30),V=e(88),z=e(7),re=g("Reflect","construct"),oe=Object.prototype,le=[].push,ue=z(function(){function Fe(){}return!(re(function(){},[],Fe)instanceof Fe)}),ie=!z(function(){re(function(){})}),ae=ue||ie;n({target:"Reflect",stat:!0,forced:ae,sham:ae},{construct:function(Fe,de){k(Fe),L(de);var Ne=arguments.length<3?Fe:k(arguments[2]);if(ie&&!ue)return re(Fe,de,Ne);if(Fe==Ne){switch(de.length){case 0:return new Fe;case 1:return new Fe(de[0]);case 2:return new Fe(de[0],de[1]);case 3:return new Fe(de[0],de[1],de[2]);case 4:return new Fe(de[0],de[1],de[2],de[3])}var Ve=[null];return y(le,Ve,de),new(y(i,Fe,Ve))}var ze=Ne.prototype,jt=V($(ze)?ze:oe),kt=y(Fe,jt,de);return $(kt)?kt:jt}})},function(t,r,e){t.exports=e(629)},function(t,r,e){var n=e(630);t.exports=n},function(t,r,e){var n=e(220);t.exports=n},function(t,r,e){t.exports=e(632)},function(t,r,e){var n=e(633);t.exports=n},function(t,r,e){var n=e(634);t.exports=n},function(t,r,e){var n=e(635);t.exports=n},function(t,r,e){e(636);var n=e(14);t.exports=n.Object.setPrototypeOf},function(t,r,e){e(1)({target:"Object",stat:!0},{setPrototypeOf:e(139)})},function(t,r,e){t.exports=e(638)},function(t,r,e){var n=e(639);t.exports=n},function(t,r,e){var n=e(280);t.exports=n},function(t,r){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(642)},function(t,r,e){var n=e(643);t.exports=n},function(t,r,e){var n=e(288);t.exports=n},function(t,r,e){e(645);var n=e(14);t.exports=n.Object.getPrototypeOf},function(t,r,e){var n=e(1),g=e(7),y=e(46),i=e(138),k=e(233);n({target:"Object",stat:!0,forced:g(function(){i(1)}),sham:!k},{getPrototypeOf:function(L){return i(y(L))}})},function(t,r,e){var n=e(8),g=e(9),y=e(43),i=e(4),k=e(12),L=k.chunkSize,$=e(92),V=e(35).formatError,z=e(92).abort,re={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};function oe(ae,Fe,de,Ne){var Ve=de.offset,ze=de.offset+L;if(typeof FileReader<"u"){var jt=new FileReader;jt.readAsArrayBuffer(g(Fe).call(Fe,Ve,ze)),jt.addEventListener("load",function(kt){ae.data=kt.target.result,ae.query.offset=de.offset,ae.query.complete=ze>=Fe.size,ae.query.context=de.context,ae.onload=function(Et){return ue(Et,Fe,ae,de,Ne)},ae.onerror=function(Et){return le(Et,de)},de.sn=$(de.chunkUrl,ae)}),jt.addEventListener("error",function(kt){ae.onerror(kt.target.error)})}else ae.data=g(Fe).call(Fe,Ve,ze),ae.query.offset=de.offset,ae.query.complete=ze>=Fe.size,ae.query.context=de.context,ae.onload=function(kt){return ue(kt,Fe,ae,de,Ne)},ae.onerror=function(kt){return le(kt,de)},de.sn=$(de.chunkUrl,ae)}function le(ae,Fe){try{if(ae.result)var de=JSON.parse(ae.result);else de=ae;Fe.onError&&Fe.onError(V(de,{fallbackCode:"CHUNK_UPLOAD_FAIL",fallbackMessage:"chunk upload failed.",suffix:"url: ".concat(Fe&&Fe.chunkUrl)}))}catch{var Ne;Fe.onError&&Fe.onError({code:"JSON_PARSE_ERROR",message:i(Ne="parse chunk upload result error. url: ".concat(Fe&&Fe.chunkUrl,". body: ")).call(Ne,ae.result)})}}function ue(ae,Fe,de,Ne,Ve){try{ae=JSON.parse(ae)}catch{var ze;return void Ne.onError({code:"JSON_PARSE_ERROR",message:i(ze="parse chunk upload result error. url: ".concat(Ne&&Ne.chunkUrl,". body: ")).call(ze,ae)})}ae&&(ae.errMsg||ae.errCode)?Ne.onError(V(ae,{fallbackCode:"UPLOAD_CHUNK_ERROR",fallbackMessage:"upload chunk failed.",suffix:"chunk uploadResume onload error. url: ".concat(Ne&&Ne.chunkUrl)})):ae.offset<Fe.size?(delete de.onaftersend,Ne.fileUploadedSize=ae.offset,Ne.offset=ae.offset,Ne.context=ae.context,Ve.offset=ae.offset,Ve.context=ae.context,oe(de,Fe,Ne,Ve)):(Ve.offset=ae.offset,Ve.complete=!0,ie(Ne,Fe))}function ie(ae,Fe){var de=k.genFileUrl(ae.nosToken);ae.type==="image"?$(de+"?imageInfo",{onload:function(Ne){try{Ne=JSON.parse(Ne),ae.uploaddone(null,{w:Ne.Width,h:Ne.Height,orientation:Ne.Orientation||"",type:Ne.Type,size:Ne.Size||Fe.size})}catch{var Ve;ae.onError({code:"JSON_PARSE_ERROR",message:i(Ve="parse image meta failed. url: ".concat(de+"?imageInfo",". body: ")).call(Ve,Ne)})}},onerror:function(Ne){if(typeof Image<"u"){var Ve=new Image;Ve.src=de,Ve.onload=function(){ae.uploaddone(null,{w:Ve.width,h:Ve.height,size:Fe.size})},Ve.onerror=function(ze){ae.onError(V(ze,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get Image meta failed.",suffix:"url: ".concat(de)}))}}else ae.onError(V(Ne,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get imageInfo meta failed.",suffix:"url: ".concat(de+"?imageInfo")}))}}):ae.type==="video"||ae.type==="audio"?$(de+"?vinfo",{onload:function(Ne){try{(Ne=JSON.parse(Ne)).GetVideoInfo&&Ne.GetVideoInfo.VideoInfo&&(Ne=Ne.GetVideoInfo.VideoInfo),ae.uploaddone(null,{w:Ne.Width,h:Ne.Height,dur:Ne.Duration,orientation:Ne.Rotate,audioCodec:Ne.AudioCodec,videoCodec:Ne.VideoCodec,container:Ne.Container,size:Ne.Size||Fe.size})}catch{var Ve;ae.onError({code:"JSON_PARSE_ERROR",message:i(Ve="parse media meta failed. url: ".concat(de+"?vinfo",". body: ")).call(Ve,Ne)})}},onerror:function(Ne){ae.onError(V(Ne,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get vinfo meta failed.",suffix:"url: ".concat(de+"?vinfo")}))}}):ae.uploaddone(null,{size:Fe.size})}t.exports=function(ae,Fe,de){var Ne=ae.chunkUrl,Ve={offset:ae.offset,context:ae.context,chunkUrl:Ne,nosToken:ae.nosToken,type:ae.type,sn:void 0,fileUploadedSize:ae.offset||0,lastPercentage:0,beginupload:ae.beginupload,uploadprogress:ae.uploadprogress,uploaddone:ae.uploaddone,onError:ae.onError};if(ae.complete)return ie(Ve,Fe);var ze={abort:function(){z(Ve.sn)}},jt=Fe.type;if(!jt||n(jt).call(jt,"/")<0){var kt=(ae.fileInputName||"").split(".").pop();Ve.type==="image"?jt="image/"+(kt==="jpg"?"jpeg":kt):Ve.type!=="audio"&&Ve.type!=="video"||(jt=re[kt])}oe({query:{version:"1.0"},headers:{"Content-Type":jt||"application/octet-stream","x-nos-token":Ve.nosToken.token},method:"POST",timeout:0,onaftersend:function(){Ve.beginupload&&Ve.beginupload(ze)},onuploading:function(Et){return function(lr,tr,or){var dr=or.fileUploadedSize+lr.loaded,cr=Math.floor(1e4*dr/tr.size)/100;if(y(cr)>=100&&(cr=100),or.lastPercentage!==cr){or.lastPercentage=cr;var nr={total:tr.size,loaded:dr,percentage:cr,percentageText:cr+"%"};or.uploadprogress&&or.uploadprogress(nr)}}(Et,Fe,Ve)}},Fe,Ve,de)}},function(t,r,e){var n,g=e(144),y=e(8),i=e(6),k=e(23),L=e(11),$=e(9),V=e(5),z=e(0),re=e(81).fn,oe=e(290),le=e(284),ue=e(35),ie=e(26).reportAPI;re.transDoc=function(ae){var Fe;z.verifyOptions(ae,"fileInput done","nos::transDoc");try{var de=ae.fileInput.files[0],Ne=["ppt","pdf","pptx","doc","docx"],Ve=ae.fileInputName=de.name,ze={ppt:1,pptx:2,pdf:3,doc:6,docx:7},jt=Ve.substring(g(Ve).call(Ve,".")+1);if(y(Ne).call(Ne,jt)<0)return void ae.done(ue.newNoFileError("请上传正确格式的文件【ppt, pptx, pdf, doc, docx】",{callFunc:"nos: transDoc",fileInput:ae.fileInput}),ae)}catch{return void ae.done(ue.newNoFileError("请上传正确的文件节点",{callFunc:"msg::previewFile",fileInput:ae.fileInput}),ae)}var kt=i(le.genResponseBody("file")||{}).replace(/"/gi,'\\"'),Et={transToken:{name:Ve,type:ze[jt],transType:ae.transcode==="png"?11:10,size:de.size,body:kt}};this.getNosTokenTrans({responseBody:Et,nosToken:{nosScene:ae.nosScene||this.nosScene,nosSurvivalTime:ae.nosSurvivalTime},callback:k(Fe=function(lr,tr){lr?ae.done(lr):(ae.nosToken=tr.nosToken,ae.docId=tr.docId,this._doPreviewFile(ae))}).call(Fe,this)})},re.getSimpleNosToken=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ae.num=1,z.verifyOptions(ae),this.cbAndSendCmd("getSimpleNosToken",ae)},re.getNosToken=function(ae){var Fe=ae.callback,de=ae.nosToken,Ne=ae.responseBody,Ve={tag:de.nosScene};de.nosSurvivalTime&&de.nosSurvivalTime!==1/0&&(Ve.expireSec=de.nosSurvivalTime),this.sendCmd("getNosToken",{responseBody:Ne,nosToken:Ve},Fe)},re.getNosTokenTrans=function(ae){this.sendCmd("getNosTokenTrans",ae.responseBody,ae.callback)},re.getMixStoreToken=function(ae){this.sendCmd("getMixStoreToken",{mixTokenReq:{provider:ae.curProvider,tokenCount:ae.tokenCount||1,tag:"im",returnBody:ae.responseBody,policyVersion:ae.policyVersion}},ae.callback)},re.packFileDownloadName=function(ae){ie({instance:this,className:"ApiBaseFn",funcName:"packFileDownloadName",hasCallback:!1}),z.verifyOptions(ae,"url name",!0,"","nos::packFileDownloadName");var Fe=ae.url;return Fe+z.genUrlSep(Fe)+"download="+encodeURIComponent(ae.name)},re.audioToMp3=function(ae){ie({instance:this,className:"ApiBaseFn",funcName:"audioToMp3",hasCallback:!1}),z.verifyOptions(ae,"url","nos::audioToMp3");var Fe=ae.url;return Fe+z.genUrlSep(Fe)+"audioTrans&type=mp3"},re.removeFile=function(ae){this.sendCmd("removeFile",ae,ae.callback)},re.fetchFile=function(ae){this.sendCmd("fetchFile",ae,ae.callback)},re.fetchFileList=function(ae){this.sendCmd("fetchFileList",ae,ae.callback)},re.stripImageMeta=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"stripImageMeta",hasCallback:!1}),this.beforeProcessImage(ae,"stripmeta")},re.qualityImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"qualityImage",hasCallback:!1}),this.beforeProcessImage(ae,"quality")},re.interlaceImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"interlaceImage",hasCallback:!1}),this.beforeProcessImage(ae,"interlace")},re.rotateImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"rotateImage",hasCallback:!1}),this.beforeProcessImage(ae,"rotate")},re.blurImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"blurImage",hasCallback:!1}),this.beforeProcessImage(ae,"blur")},re.cropImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"cropImage",hasCallback:!1}),this.beforeProcessImage(ae,"crop")},re.thumbnailImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"thumbnailImage",hasCallback:!1}),this.beforeProcessImage(ae,"thumbnail")},re.beforeProcessImage=function(ae,Fe){var de=z.copy(ae);return de.type=Fe,ae.ops=[de],this.processImage(ae)},re.processImage=function(ae){var Fe;ae.callback=ie({instance:this,className:"ApiBaseFn",funcName:"processImage",done:ae.callback});var de=this;z.verifyOptions(ae,"url ops",!0,"","nos::processImage"),z.verifyParamType("ops",ae.ops,"array","nos::processImage");var Ne=L(Fe=ae.ops).call(Fe,function(Ve){var ze,jt;return z.verifyOptions(Ve,"type",!0,"","nos::processImage"),z.verifyParamValid("type",Ve.type,oe.validTypes,"nos::processImage"),de["gen"+$(ze=Ve.type).call(ze,0,1).toUpperCase()+$(jt=Ve.type).call(jt,1)+"Op"](Ve)});de.processCallback(ae),de.sendCmd("processImage",{url:ae.url,imageOps:Ne},ae.callback)},re.genStripmetaOp=function(ae){return new oe({type:ae.type,stripmeta:ae.strip?1:0})},re.genQualityOp=function(ae){z.verifyOptions(ae,"quality",!0,"","nos::genQualityOp"),z.verifyParamType("quality",ae.quality,"number","nos::genQualityOp"),z.verifyParamMin("quality",ae.quality,0,"nos::genQualityOp"),z.verifyParamMax("quality",ae.quality,100,"nos::genQualityOp");var Fe=Math.round(ae.quality);return new oe({type:ae.type,qualityQuality:Fe})},re.genInterlaceOp=function(ae){return new oe({type:ae.type})},re.genRotateOp=function(ae){for(z.verifyOptions(ae,"angle",!0,"","nos::genRotateOp"),z.verifyParamType("angle",ae.angle,"number","nos::genRotateOp");ae.angle<0;)ae.angle=ae.angle+360;ae.angle=ae.angle%360;var Fe=Math.round(ae.angle);return new oe({type:ae.type,rotateAngle:Fe})},re.genBlurOp=function(ae){z.verifyOptions(ae,"radius sigma","nos::genBlurOp"),z.verifyParamType("radius",ae.radius,"number","nos::genBlurOp"),z.verifyParamMin("radius",ae.radius,1,"nos::genBlurOp"),z.verifyParamMax("radius",ae.radius,50,"nos::genBlurOp"),z.verifyParamType("sigma",ae.sigma,"number","nos::genBlurOp"),z.verifyParamMin("sigma",ae.sigma,0,"nos::genBlurOp");var Fe=Math.round(ae.radius),de=Math.round(ae.sigma);return new oe({type:ae.type,blurRadius:Fe,blurSigma:de})},re.genCropOp=function(ae){z.verifyOptions(ae,"x y width height","nos::genCropOp"),z.verifyParamType("x",ae.x,"number","nos::genCropOp"),z.verifyParamMin("x",ae.x,0,"nos::genCropOp"),z.verifyParamType("y",ae.y,"number","nos::genCropOp"),z.verifyParamMin("y",ae.y,0,"nos::genCropOp"),z.verifyParamType("width",ae.width,"number","nos::genCropOp"),z.verifyParamMin("width",ae.width,0,"nos::genCropOp"),z.verifyParamType("height",ae.height,"number","nos::genCropOp"),z.verifyParamMin("height",ae.height,0,"nos::genCropOp");var Fe=Math.round(ae.x),de=Math.round(ae.y),Ne=Math.round(ae.width),Ve=Math.round(ae.height);return new oe({type:ae.type,cropX:Fe,cropY:de,cropWidth:Ne,cropHeight:Ve})},re.genThumbnailOp=(n={cover:"z",contain:"x",crop:"y"},function(ae){z.verifyOptions(ae,"mode","nos::genThumbnailOp"),z.verifyParamValid("mode",ae.mode,V(n),"nos::genThumbnailOp"),ae.mode==="contain"?z.verifyParamAtLeastPresentOne(ae,"width height","nos::genThumbnailOp"):z.verifyOptions(ae,"width height","nos::genThumbnailOp"),z.undef(ae.width)&&(ae.width=0),z.undef(ae.height)&&(ae.height=0),z.verifyParamType("width",ae.width,"number","nos::genThumbnailOp"),z.verifyParamMin("width",ae.width,0,"nos::genThumbnailOp"),z.verifyParamType("height",ae.height,"number","nos::genThumbnailOp"),z.verifyParamMin("height",ae.height,0,"nos::genThumbnailOp");var Fe=Math.round(ae.width),de=Math.round(ae.height),Ne=new oe({type:ae.type,thumbnailMode:n[ae.mode],thumbnailWidth:Fe,thumbnailHeight:de});if(ae.mode==="crop"&&z.notundef(ae.axis)){z.undef(ae.axis.x)&&(ae.axis.x=5),z.undef(ae.axis.y)&&(ae.axis.y=5),z.verifyParamMin("axis.x",ae.axis.x,0,"nos::genThumbnailOp"),z.verifyParamMax("axis.x",ae.axis.x,10,"nos::genThumbnailOp"),z.verifyParamMin("axis.y",ae.axis.y,0,"nos::genThumbnailOp"),z.verifyParamMax("axis.y",ae.axis.y,10,"nos::genThumbnailOp");var Ve=Math.round(ae.axis.x),ze=Math.round(ae.axis.y);Ne.thumbnailAxisX=Ve,Ne.thumbnailAxisY=ze}return z.notundef(ae.enlarge)&&(z.verifyParamType("enlarge",ae.enlarge,"boolean","nos::genThumbnailOp"),ae.enlarge&&(Ne.thumbnailEnlarge=1)),Ne.thumbnailToStatic=this.options.thumbnailToStatic?1:0,Ne}),re.getNosOriginUrl=function(ae){var Fe;(ae=ae||{}).done=ie({instance:this,className:"ApiBaseFn",funcName:"getNosOriginUrl",done:ae.done}),z.verifyOptions(ae,"safeShortUrl",!0,"","nos::getNosOriginUrl"),z.verifyParamType("safeShortUrl",ae.safeShortUrl,"string","nos::getNosOriginUrl"),/^http(s)?:/.test(ae.safeShortUrl)&&~y(Fe=ae.safeShortUrl).call(Fe,"im_url=1")?(this.processCallback(ae),this.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:ae.safeShortUrl}},ae.callback)):ae.done(new ue("参数 “safeShortUrl” 内容非文件安全短链",{callFunc:"nos: getNosOriginUrl"}),ae)}},function(t,r,e){var n,g=e(4),y=e(8),i=e(5),k=e(24),L=e(110),$=L.genUrlSep,V=L.url2object,z=L.object2url,re=e(0),oe=e(81).fn,le=e(26).reportAPI;oe.viewImageSync=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageSync",hasCallback:!1});var ie=this.options;re.verifyOptions(ue,"url","nos::viewImageSync");var ae=ue.url,Fe=V(ae),de=Fe.protocol,Ne=Fe.hostname,Ve=Fe.path,ze=Fe.query;if(typeof ue.strip=="boolean"&&(ze.stripmeta=ue.strip?1:0),typeof ue.quality=="number"&&(re.verifyParamMin("quality",ue.quality,0,"nos::viewImageSync"),re.verifyParamMax("quality",ue.quality,100,"nos::viewImageSync"),ze.quality=Math.round(ue.quality)),typeof ue.interlace=="boolean"&&(ze.interlace=ue.interlace?1:0),typeof ue.rotate=="number"&&(ze.rotate=Math.round(ue.rotate)),k(ue.thumbnail)==="object"){var jt=ue.thumbnail.mode||"crop",kt=ue.thumbnail.width,Et=ue.thumbnail.height;if(kt>=0&&Et>=0&&kt<4096&&Et<4096&&(kt>0||Et>0)){var lr,tr;switch(jt){case"crop":jt="y";break;case"contain":jt="x";break;case"cover":jt="z";break;default:jt="x"}ze.thumbnail=g(lr=g(tr="".concat(kt)).call(tr,jt)).call(lr,Et)}}if(ie.downloadUrl){var or=V(ue.url),dr=ie.downloadUrl,cr=or.path,nr=y(cr).call(cr,"/");if(nr!==-1){var ur=cr.substring(0,nr),ar=cr.substring(nr+1);dr=dr.replace("{bucket}",ur).replace("{object}",ar)}var gr=V(dr);return z({protocol:gr.protocol,hostname:gr.hostname,path:gr.path,query:re.merge(gr.query,ze)})}return z({protocol:de,hostname:Ne,path:Ve,query:ze})},oe.viewImageStripMeta=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageStripMeta",hasCallback:!1}),re.verifyOptions(ue,"url strip","nos::viewImageStripMeta"),re.verifyParamType("strip",ue.strip,"boolean","nos::viewImageStripMeta");var ie="stripmeta="+(ue.strip?1:0),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageQuality=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageQuality",hasCallback:!1}),re.verifyOptions(ue,"url quality","nos::viewImageQuality"),re.verifyParamType("quality",ue.quality,"number","nos::viewImageQuality"),re.verifyParamMin("quality",ue.quality,0,"nos::viewImageQuality"),re.verifyParamMax("quality",ue.quality,100,"nos::viewImageQuality");var ie="quality="+Math.round(ue.quality),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageInterlace=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageInterlace",hasCallback:!1}),re.verifyOptions(ue,"url","nos::viewImageInterlace");var ie=$(ue.url);return ue.url+ie+"interlace=1"},oe.viewImageRotate=function(ue){for(le({instance:this,className:"ApiBaseFn",funcName:"viewImageRotate",hasCallback:!1}),re.verifyOptions(ue,"url angle","nos::viewImageRotate"),re.verifyParamType("angle",ue.angle,"number","nos::viewImageRotate");ue.angle<0;)ue.angle=ue.angle+360;ue.angle=ue.angle%360;var ie="rotate="+Math.round(ue.angle),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageBlur=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageBlur",hasCallback:!1}),re.verifyOptions(ue,"url radius sigma","nos::viewImageBlur"),re.verifyParamType("radius",ue.radius,"number","nos::viewImageBlur"),re.verifyParamMin("radius",ue.radius,1,"nos::viewImageBlur"),re.verifyParamMax("radius",ue.radius,50,"nos::viewImageBlur"),re.verifyParamType("sigma",ue.sigma,"number","nos::viewImageBlur"),re.verifyParamMin("sigma",ue.sigma,0,"nos::viewImageBlur");var ie="blur="+Math.round(ue.radius)+"x"+Math.round(ue.sigma),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageCrop=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageCrop",hasCallback:!1}),re.verifyOptions(ue,"url x y width height","nos::viewImageCrop"),re.verifyParamType("x",ue.x,"number","nos::viewImageCrop"),re.verifyParamMin("x",ue.x,0,"nos::viewImageCrop"),re.verifyParamType("y",ue.y,"number","nos::viewImageCrop"),re.verifyParamMin("y",ue.y,0,"nos::viewImageCrop"),re.verifyParamType("width",ue.width,"number","nos::viewImageCrop"),re.verifyParamMin("width",ue.width,0,"nos::viewImageCrop"),re.verifyParamType("height",ue.height,"number","nos::viewImageCrop"),re.verifyParamMin("height",ue.height,0,"nos::viewImageCrop");var ie="crop="+Math.round(ue.x)+"_"+Math.round(ue.y)+"_"+Math.round(ue.width)+"_"+Math.round(ue.height),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageThumbnail=(n={cover:"z",contain:"x",crop:"y"},function(ue){re.verifyOptions(ue,"url mode","nos::viewImageThumbnail"),re.verifyParamValid("mode",ue.mode,i(n),"nos::viewImageThumbnail"),ue.mode==="contain"?re.verifyParamAtLeastPresentOne(ue,"width height","nos::viewImageThumbnail"):re.verifyOptions(ue,"width height","nos::viewImageThumbnail"),re.undef(ue.width)&&(ue.width=0),re.undef(ue.height)&&(ue.height=0),re.verifyParamType("width",ue.width,"number","nos::viewImageThumbnail"),re.verifyParamMin("width",ue.width,0,"nos::viewImageThumbnail"),re.verifyParamType("height",ue.height,"number","nos::viewImageThumbnail"),re.verifyParamMin("height",ue.height,0,"nos::viewImageThumbnail");var ie=Math.round(ue.width),ae=Math.round(ue.height),Fe="thumbnail="+ie+n[ue.mode]+ae;ue.mode==="crop"&&re.notundef(ue.axis)&&(re.undef(ue.axis.x)&&(ue.axis.x=5),re.undef(ue.axis.y)&&(ue.axis.y=5),re.verifyParamMin("axis.x",ue.axis.x,0,"nos::viewImageThumbnail"),re.verifyParamMax("axis.x",ue.axis.x,10,"nos::viewImageThumbnail"),re.verifyParamMin("axis.y",ue.axis.y,0,"nos::viewImageThumbnail"),re.verifyParamMax("axis.y",ue.axis.y,10,"nos::viewImageThumbnail"),Fe=Fe+"&axis="+Math.round(ue.axis.x)+"_"+Math.round(ue.axis.y)),re.notundef(ue.enlarge)&&(re.verifyParamType("enlarge",ue.enlarge,"boolean","nos::viewImageThumbnail"),ue.enlarge&&(Fe+="&enlarge=1"));var de=$(ue.url);return ue.url+de+Fe})},function(t,r,e){var n=e(24),g=e(6),y=e(8),i=e(310),k=e(0),L=e(81).fn,$=e(12),V=e(26).reportAPI;function z(oe,le,ue,ie){var ae=!1,Fe="";if(ue===1?y(oe).call(oe,le)>=0&&(ae=!0,Fe=le):ue===2&&(Fe=new RegExp(le,"g")).test(oe)&&(ae=!0),ae&&Fe!=="")switch(ie){case 1:return oe.replace(Fe,"**");case 2:return{code:2};case 3:return{code:3}}return oe}function re(oe,le){for(var ue=le.match,ie=le.operate,ae=oe,Fe=0;Fe<i(le).length;Fe++){var de=i(le)[Fe],Ne=de.match||ue,Ve=de.operate||ie;try{if(ae=z(ae,de.key,Ne,Ve),n(ae)==="object")return ae}catch(ze){this.logger.warn("misc::filterContent: js cannot parse this regexp ",ze)}}return ae}L.uploadSdkLogUrl=function(oe){return k.verifyOptions(oe,"url","misc::uploadSdkLogUrl"),this.cbAndSendCmd("uploadSdkLogUrl",oe)},L.getClientAntispamLexicon=function(oe){var le=this;(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getClientAntispamLexicon",done:oe.done});var ue=(oe=oe||{}).done;ue instanceof Function||(ue=function(){}),oe={clientAntispam:{version:0}};var ie=this;if($.hasLocalStorage&&localStorage.getItem("antispamLexicon")&&localStorage.getItem("antispamLexicon")!=="{}")try{ie.antispamLexicon=JSON.parse(localStorage.getItem("antispamLexicon"))}catch(ae){this.logger.error("JSON parse antispamLexicon error",ae)}ie.antispamLexicon&&ue.call(this,null,{clientAntispam:ie.antispamLexicon}),this.protocol.sendCmd("getClientAntispam",oe,function(ae,Fe,de){ae?(ie.protocol.logger.error("misc::getClientAntispamLexicon:",ae),ue.call(le,ae,{})):($.hasLocalStorage&&localStorage.setItem("antispamLexicon",g(de.clientAntispam)),ie.antispamLexicon||ue.call(le,null,de),ie.antispamLexicon=de.clientAntispam||{})})},L.filterClientAntispam=function(oe){V({instance:this,className:"ApiBaseFn",funcName:"filterClientAntispam",hasCallback:!1});var le=oe.content;if(!le)return{code:404,errmsg:"待反垃圾文本content不存在"};var ue=this.antispamLexicon&&this.antispamLexicon.thesaurus;if(!ue)return{code:404,errmsg:"没有反垃圾词库或者词库格式不合法"};try{ue=JSON.parse(ue).thesaurus}catch{return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"),{code:500,errmsg:"反垃圾词库格式不合法"}}for(var ie=le,ae=0;ae<ue.length;ae++)if(ie=re.call(this,ie,ue[ae]),n(ie)==="object"){if(ie.code===2)return{code:200,type:2,errmsg:"建议拒绝发送",content:le,result:""};if(ie.code===3)return{code:200,type:3,errmsg:"建议服务器处理反垃圾，发消息带上字段clientAntiSpam",content:le,result:le}}return ie===le?{code:200,type:0,errmsg:"",content:le,result:ie}:{code:200,type:1,errmsg:"已对特殊字符做了过滤",content:le,result:ie}},L.getServerTime=function(oe){(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getServerTime",done:oe.done}),this.processCallback(oe),this.sendCmd("getServerTime",{},oe.callback)},L.getNosAccessToken=function(oe){(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getNosAccessToken",done:oe.done}),k.verifyOptions(oe,"url","misc::getNosAccessToken"),this.processCallback(oe);var le={url:oe.url};oe.userAgent&&(le.userAgent=oe.userAgent),oe.ext&&(le.ext=oe.ext),this.sendCmd("getNosAccessToken",{nosAccessTokenTag:le},function(ue,ie,ae){var Fe=ae&&ae.nosAccessTokenTag&&ae.nosAccessTokenTag.token,de=oe.url,Ne=Fe?{token:Fe,resUrl:y(de).call(de,"?")!==-1?de+"&token="+Fe:de+"?token="+Fe}:{};oe.done(ue,Ne)})},L.deleteNosAccessToken=function(oe){(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"deleteNosAccessToken",done:oe.done}),k.verifyOptions(oe,"token","misc::deleteNosAccessToken"),this.processCallback(oe),this.sendCmd("deleteNosAccessToken",{nosAccessTokenTag:{token:oe.token}},oe.callback)}},function(t,r,e){e(75);var n=e(73),g=e(31),y=e(18),i=e(651),k=Array.prototype,L={DOMTokenList:!0,NodeList:!0};t.exports=function($){var V=$.keys;return $===k||y(k,$)&&V===k.keys||g(L,n($))?i:V}},function(t,r,e){var n=e(652);t.exports=n},function(t,r,e){e(90),e(102);var n=e(27);t.exports=n("Array").keys},function(t,r,e){var n=e(24),g=e(3),y=e(11),i=e(6),k=e(81).fn,L=e(0),$=e(155),V=e(291),z=e(26).reportAPI;k.signalingCreate=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.type,le=re.channelName,ue=re.ext;return L.verifyOptions(re,"type","api::signalling"),this.sendCmdUsePromise("signalingCreate",{avSignalTag:{type:oe,channelName:le,ext:ue}}).then(function(ie){var ae=ie.avSignalTag;return g.resolve(ae)}).catch(function(ie){return g.reject(V.parseAvSignalError(ie))})},k.signalingDelay=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingDelay",{avSignalTag:re}).then(function(oe){var le=oe.avSignalTag;return g.resolve(le)}).catch(function(oe){return g.reject(V.parseAvSignalError(oe))})},k.signalingClose=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.offlineEnabled;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingClose",{avSignalTag:L.merge(re,{isSave:oe===!0?1:0})}).then(function(le){var ue=le.avSignalTag;return ue.offlineEnabled=ue.isSave===1,delete ue.isSave,g.resolve(ue)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingJoin=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.offlineEnabled;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingJoin",{avSignalTag:L.merge(re,{isSave:oe===!0?1:0})}).then(function(le){var ue,ie=le.avSignalTag,ae=ie.members;return typeof ie.members=="string"&&(ae=y(ue=JSON.parse(ie.members)).call(ue,function(Fe){return V.parseAvSignalMember(Fe)})),ie.members=ae,g.resolve(ie)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingLeave=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.offlineEnabled;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingLeave",{avSignalTag:L.merge(re,{isSave:oe===!0?1:0})}).then(function(le){var ue=le.avSignalTag;return ue.offlineEnabled=ue.isSave===1,delete ue.isSave,g.resolve(ue)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingGetChannelInfo=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.channelName;return L.verifyOptions(re,"channelName","api::signalling"),this.sendCmdUsePromise("signalingGetChannelInfo",{avSignalTag:{channelName:oe}}).then(function(le){var ue,ie=le.avSignalTag,ae=ie.members;return typeof ie.members=="string"&&(ae=y(ue=JSON.parse(ie.members)).call(ue,function(Fe){return V.parseAvSignalMember(Fe)})),ie.members=ae,g.resolve(ie)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingInvite=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.account,le=re.offlineEnabled,ue=re.pushInfo,ie=ue===void 0?{}:ue;L.verifyOptions(re,"channelId requestId account","api::signalling"),n(ie.pushPayload)==="object"&&(ie.pushPayload=i(ie.pushPayload));var ae=L.merge(re,ie,{to:oe,isSave:le===!0?1:0,needPush:ie.needPush===!0?1:0,needBadge:ie.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingInvite",{avSignalTag:ae}).then(function(Fe){var de=Fe.avSignalTag;return de.offlineEnabled=de.isSave===1,de.needBadge=de.needBadge===1,de.needPush=de.needPush===1,delete de.isSave,g.resolve(de)}).catch(function(Fe){return g.reject(V.parseAvSignalError(Fe))})},k.signalingCancel=function(re){var oe=re.account,le=re.offlineEnabled;return L.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingCancel",{avSignalTag:L.merge(re,{to:oe,isSave:le===!0?1:0})}).then(function(ue){var ie=ue.avSignalTag;return ie.offlineEnabled=ie.isSave===1,delete ie.isSave,g.resolve(ie)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingCreateAndJoin=function(re){var oe=this,le=z({instance:this,className:"ApiBaseFn",funcName:"signalingCreateAndJoin",hasCallback:!0}),ue=re.channelName,ie=re.uid,ae=ie===void 0?0:ie,Fe=re.offlineEnabled,de=Fe===void 0||Fe,Ne=re.attachExt,Ve=Ne===void 0?"":Ne;return this.signalingCreate(re).catch(function(ze){return ze.code===10405?(oe.logger.warn("api::avSignal:signalingCall room already exists:",ze),oe.signalingGetChannelInfo({channelName:ue})):g.reject(ze)}).then(function(ze){var jt={channelId:ze.channelId,offlineEnabled:de,attachExt:Ve,nertcChannelName:re.nertcChannelName,nertcTokenTtl:re.nertcTokenTtl,nertcJoinRoomQueryParamMap:re.nertcJoinRoomQueryParamMap};return ae&&L.merge(jt,{uid:ae}),oe.signalingJoin(jt)}).then(function(ze){return typeof le=="function"&&le(void 0),ze}).catch(function(ze){throw typeof le=="function"&&le(ze),ze})},k.signalingCall=function(re){var oe=this,le=z({instance:this,className:"ApiBaseFn",funcName:"signalingCall",hasCallback:!0}),ue=re.account,ie=re.offlineEnabled,ae=re.requestId;L.verifyOptions(re,"type requestId account","api::signalling");var Fe="";return this.signalingCreateAndJoin(re).then(function(de){Fe=de.channelId||Fe,oe.logger.info("api::avSignal:signalingCall join:",Fe);var Ne={channelId:Fe,account:ue,requestId:ae,offlineEnabled:ie,attachExt:re.attachExt||"",pushInfo:re.pushInfo||{},nertcTokenTtl:de.nertcTokenTtl,nertcToken:de.nertcToken};return oe.signalingInvite(Ne)}).then(function(de){return typeof le=="function"&&le(void 0),de}).catch(function(de){throw typeof le=="function"&&le(de),de})},k.signalingReject=function(re){var oe=re.account,le=re.offlineEnabled;return L.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingReject",{avSignalTag:L.merge(re,{to:oe,isSave:le===!0?1:0})}).then(function(ue){var ie=ue.avSignalTag;return ie.offlineEnabled=ie.isSave===1,delete ie.isSave,g.resolve(ie)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingAccept=function(re){var oe=this,le=re.account,ue=re.offlineEnabled;return L.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingAccept",{avSignalTag:L.merge(re,{to:le,isSave:ue===!0?1:0})}).then(function(ie){var ae=ie.avSignalTag;return ae.offlineEnabled=ae.isSave===1,delete ae.isSave,g.resolve(ae)}).catch(function(ie){return g.reject(V.parseAvSignalError(ie))}).then(function(ie){if(re.autoJoin){var ae={channelId:re.channelId,offlineEnabled:re.offlineEnabled,attachExt:re.joinAttachExt,uid:re.uid,nertcChannelName:re.nertcChannelName,nertcTokenTtl:re.nertcTokenTtl,nertcJoinRoomQueryParamMap:re.nertcJoinRoomQueryParamMap};return oe.signalingJoin(ae)}return ie})},k.signalingControl=function(re){var oe=re.account;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingControl",{avSignalTag:L.merge(re,oe?{to:oe}:{})}).then(function(le){var ue=le.avSignalTag;return g.resolve(ue)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingSync=function(){return this.sendCmdUsePromise("sync",{sync:{avSignal:0}}).then(function(re){var oe=re.avSignalTag;return g.resolve(oe)}).catch(function(re){return g.reject(V.parseAvSignalError(re))})},k.signalingMarkMsgRead=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z({instance:this,className:"ApiBaseFn",funcName:"signalingMarkMsgRead",hasCallback:!1}),L.verifyOptions(re,"msgid","api::signalling");var oe,le=$.idMap.avSignal;return oe=typeof re.msgid=="string"?[re.msgid]:re.msgid,this.sendCmd("batchMarkRead",{sid:le.id,cid:le.signalingNotify,ids:oe})},k.signalingCallEx=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.account,le=re.offlineEnabled,ue=re.pushInfo,ie=ue===void 0?{}:ue;n(ie.pushPayload)==="object"&&(ie.pushPayload=i(ie.pushPayload)),L.verifyOptions(re,"type","api::signalling"),L.verifyOptions(re,"account","api::signalling");var ae=L.merge(re,ie,{to:oe,isSave:le===!0?1:0,needPush:ie.needPush===!0?1:0,needBadge:ie.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingCallEx",{avSignalTag:ae}).then(function(Fe){var de,Ne=Fe.avSignalTag,Ve=Ne.members;return typeof Ne.members=="string"&&(Ve=y(de=JSON.parse(Ne.members)).call(de,function(ze){return V.parseAvSignalMember(ze)})),Ne.members=Ve,g.resolve(Ne)}).catch(function(Fe){return g.reject(V.parseAvSignalError(Fe))})},k.signalingJoinAndAccept=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.channelId,le=re.attachExt,ue=re.offlineEnabled,ie=re.uid,ae=re.account,Fe=re.requestId,de=re.nertcChannelName,Ne=re.nertcTokenTtl,Ve=re.nertcJoinRoomQueryParamMap;return L.verifyOptions(re,"channelId","api::signalling"),L.verifyOptions(re,"account","api::signalling"),L.verifyOptions(re,"requestId","api::signalling"),this.sendCmdUsePromise("signalingJoinAndAccept",{avSignalTag:{channelId:oe,attachExt:le,isSave:ue===!0?1:0,uid:ie,to:ae,requestId:Fe,nertcChannelName:de,nertcTokenTtl:Ne,nertcJoinRoomQueryParamMap:Ve}}).then(function(ze){var jt,kt=ze.avSignalTag,Et=kt.members;return typeof kt.members=="string"&&(Et=y(jt=JSON.parse(kt.members)).call(jt,function(lr){return V.parseAvSignalMember(lr)})),kt.members=Et,g.resolve(kt)}).catch(function(ze){return g.reject(V.parseAvSignalError(ze))})}},function(t,r,e){var n=e(51),g=e(34),y=e(5),i=e(52),k=e(15),L=e(53),$=e(2),V=e(54),z=e(55),re=e(42),oe=e(44),le=e(45);function ue(ae,Fe){var de=y(ae);if(i){var Ne=i(ae);Fe&&(Ne=k(Ne).call(Ne,function(Ve){return L(ae,Ve).enumerable})),de.push.apply(de,Ne)}return de}e(0);var ie={user_id:"",trace_id:"",action:7,exception_service:6,duration:0,start_time:0,state:1,extension:[]};t.exports=function(){function ae(Fe){oe(this,ae),this.clientProto=Fe,this.reset()}return le(ae,[{key:"reset",value:function(){this.traceData=g({},ie),this.traceData.extension=[]}},{key:"start",value:function(Fe){this.reset(),g(this.traceData,Fe),this.traceData.user_id=this.clientProto.account,this.traceData.start_time=new Date().getTime()}},{key:"update",value:function(Fe){var de=this.clientProto.checkNetworkAvailable();this.traceData.extension.push(function(Ne){for(var Ve=1;Ve<arguments.length;Ve++){var ze,jt,kt=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?$(ze=ue(Object(kt),!0)).call(ze,function(Et){n(Ne,Et,kt[Et])}):V?z(Ne,V(kt)):$(jt=ue(Object(kt))).call(jt,function(Et){re(Ne,Et,L(kt,Et))})}return Ne}({code:0,description:"",foreground:!0,foreg_backg_switch:!1,net_type:0,net_connect:de},Fe))}},{key:"end",value:function(Fe){var de=this.traceData.extension[0],Ne=this.traceData.extension[1];if(de&&de.operation_type===0&&Ne&&Ne.operation_type===1){var Ve=de.net_type!==Ne.net_type||de.net_connect!==Ne.net_connect;if(Fe||!Ve)return this.traceData.duration=new Date().getTime()-this.traceData.start_time,this.clientProto.reporter.report("exceptions",this.traceData),void this.reset();this.reset()}else this.reset()}}]),ae}()},function(t,r,e){var n=e(2),g=e(44),y=e(45),i=e(66).getPromiseWithAbort,k=function(){function L(){g(this,L),this.abortFns=[]}return y(L,[{key:"add",value:function($){var V=i($);return this.abortFns.push(V.abort),V.promise}},{key:"clear",value:function(){var $;n($=this.abortFns).call($,function(V){return V(new Error("Request aborted"))}),this.abortFns=[]}},{key:"destroy",value:function(){this.clear()}}]),L}();t.exports=k},function(t,r,e){var n=e(60),g=e(61),y=e(34),i=e(2),k=e(63),L=e(3),$=e(11),V=e(56),z=e(9),re=e(4),oe=e(6),le=e(23),ue=e(44),ie=e(45),ae=e(0),Fe=e(12),de=e(70),Ne=e(294),Ve=e(676),ze=e(35);t.exports=function(){function jt(Et,lr){ue(this,jt),this.clientProto=Et,this.logger=Et.logger,this.urls=[],this.sockets=[],this.config=lr}var kt;return ie(jt,[{key:"setConfig",value:function(Et){y(this.config,Et)}},{key:"setUrls",value:function(Et){this.urls=Et}},{key:"resetSockets",value:function(){var Et;i(Et=this.sockets).call(Et,function(lr){lr&&(lr.removeAllListenersX("info"),lr.disconnect())}),this.sockets=[]}},{key:"connect",value:(kt=g(n.mark(function Et(){var lr,tr,or,dr=this;return n.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(this.clientProto.statusProtector.processEvent("auth/loginLifeCycleConnect"),(tr=k(lr=this.urls).call(lr,0,this.config.socketConcurrent)).length!==0){cr.next=4;break}throw new ze("no_socket_url",408,{});case 4:return cr.prev=4,cr.next=7,L.any($(tr).call(tr,function(nr,ur){return dr.doConnect(nr,ur)}));case 7:return cr.abrupt("return",cr.sent);case 10:throw cr.prev=10,cr.t0=cr.catch(4),i(or=cr.t0.errors).call(or,function(nr,ur){dr.logger.warn("imsocket::connect failed ".concat(ur),nr)}),cr.t0;case 14:case"end":return cr.stop()}},Et,this,[[4,10]])})),function(){return kt.apply(this,arguments)})},{key:"success",value:function(Et){var lr;return i(lr=this.sockets).call(lr,function(tr,or){Et!==or&&tr&&(tr.removeAllListenersX("info"),tr.disconnect())}),this.sockets[Et]}},{key:"failed",value:function(Et){var lr=this.sockets[Et];lr&&(lr.removeAllListenersX("info"),lr.disconnect())}},{key:"getTransport",value:function(Et){var lr=ae.getGlobal();if(typeof window>"u"){var tr=Et.split(":");return lr&&!lr.location&&tr.length>1&&(lr.location={protocol:tr.shift(),port:tr.pop(),hostname:tr.join("")}),["websocket"]}return this.clientProto.options.transports?this.clientProto.options.transports:de.name!=="IE"||lr.WebSocket?["websocket"]:["xhr-polling"]}},{key:"doConnect",value:function(Et,lr){var tr=this;if(this.clientProto&&this.clientProto.__destroyed===!0)return L.reject("instance has been destroyed");var or=this.getTransport(Et),dr=V();return new L(function(cr,nr){var ur,ar,gr,pr;try{tr.config.binaryWebsocket?(pr=new Ve(tr.clientProto)).connect(Et,{connectTimeout:Fe.connectTimeout}):pr=Ne.connect(Et,{transports:z(or).call(or),reconnect:!1,"force new connection":!0,"connect timeout":Fe.connectTimeout,needToXHR:typeof tr.clientProto.options.needToXHR=="boolean"?tr.clientProto.options.needToXHR:Fe.needToXHR}),tr.sockets[lr]=pr}catch(Sr){var yr;return tr.logger.warn(re(yr="link::connectToUrl ".concat(lr,":io.connect caught exception: ")).call(yr,Sr&&Sr.message),Sr),void nr(new ze("socket_error",408,{startTime:dr,url:Et,reason:Sr.message,rawError:Sr}))}tr.logger.info(re(ur=re(ar="link::connectToUrl ".concat(lr,": socket url: ")).call(ar,Et,", transports: ")).call(ur,oe(or))),pr.on("connect",function(){tr.logger.info("link::connectToUrl ".concat(lr," success")),tr.success(lr),tr.clientProto.reporterHookLinkKeep.start({trace_id:pr.socket.sessionid}),tr.clientProto.reporterHookLinkKeep.update({code:0,description:"",operation_type:0,target:Et}),tr.clientProto.url=Et,cr(pr)}),pr.on("handshake_failed",function(){tr.failed(lr),nr(new ze("handshake_failed",408,{startTime:dr,url:Et}))}),pr.on("connect_failed",function(Sr){tr.failed(lr),nr(new ze("connect_failed",408,{startTime:dr,url:Et,reason:Sr}))}),pr.on("error",function(){var Sr,wr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Mr=arguments.length>1?arguments[1]:void 0,mr=Mr&&Mr.message||wr;tr.logger.warn(re(Sr="link::onSocketError ".concat(lr,": reason is ")).call(Sr,mr,", error is "),Mr),nr(new ze("socket_error",408,{startTime:dr,url:Et,reason:mr,rawError:Mr}))}),pr.on("info",function(Sr,wr){var Mr,mr;wr?tr.logger.info(re(Mr="link::onSocketInfo ".concat(lr,": ")).call(Mr,Sr,", extraInfo:"),wr):tr.logger.info(re(mr="link::onSocketInfo ".concat(lr,": ")).call(mr,Sr,"."))}),pr.on("message",le(gr=tr.clientProto.onMessage).call(gr,tr.clientProto)),pr.on("disconnect",function(Sr){tr.logger.warn("imsocket::onSocketDisconnect: socket url: ".concat(Et,", disconnected"),Sr),tr.clientProto.hasLogin=!1,tr.clientProto.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to socket ondisconnect")),tr.clientProto.doLogout?tr.clientProto.logout():tr.clientProto.onDisconnect("link::socketDisconnect",Sr)}),pr.on("websocketOnclose",function(Sr){tr.clientProto.reporterHookLinkKeep.update({code:Sr&&Sr.code||0,description:Sr&&Sr.reason||"",operation_type:1,target:Et}),tr.clientProto.reporterHookLinkKeep.end(!1)})})}},{key:"destroy",value:function(){this.urls=[],this.resetSockets()}}]),jt}()},function(t,r,e){var n=e(24).default,g=e(142),y=e(158),i=e(195),k=e(287),L=e(658),$=e(197),V=e(292),z=e(669),re=e(293);function oe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=oe=function(){return le},t.exports.__esModule=!0,t.exports.default=t.exports;var le={},ue=Object.prototype,ie=ue.hasOwnProperty,ae=g||function(_r,Nr,Pr){_r[Nr]=Pr.value},Fe=typeof y=="function"?y:{},de=Fe.iterator||"@@iterator",Ne=Fe.asyncIterator||"@@asyncIterator",Ve=Fe.toStringTag||"@@toStringTag";function ze(_r,Nr,Pr){return g(_r,Nr,{value:Pr,enumerable:!0,configurable:!0,writable:!0}),_r[Nr]}try{ze({},"")}catch{ze=function(Nr,Pr,sr){return Nr[Pr]=sr}}function jt(_r,Nr,Pr,sr){var Ir=Nr&&Nr.prototype instanceof lr?Nr:lr,Ar=i(Ir.prototype),Cr=new wr(sr||[]);return ae(Ar,"_invoke",{value:gr(_r,Pr,Cr)}),Ar}function kt(_r,Nr,Pr){try{return{type:"normal",arg:_r.call(Nr,Pr)}}catch(sr){return{type:"throw",arg:sr}}}le.wrap=jt;var Et={};function lr(){}function tr(){}function or(){}var dr={};ze(dr,de,function(){return this});var cr=k&&k(k(Mr([])));cr&&cr!==ue&&ie.call(cr,de)&&(dr=cr);var nr=or.prototype=lr.prototype=i(dr);function ur(_r){var Nr;L(Nr=["next","throw","return"]).call(Nr,function(Pr){ze(_r,Pr,function(sr){return this._invoke(Pr,sr)})})}function ar(_r,Nr){var Pr;ae(this,"_invoke",{value:function(sr,Ir){function Ar(){return new Nr(function(Cr,br){(function vr(Tr,Br,Lr,Fr){var qr=kt(_r[Tr],_r,Br);if(qr.type!=="throw"){var Vr=qr.arg,Qr=Vr.value;return Qr&&n(Qr)=="object"&&ie.call(Qr,"__await")?Nr.resolve(Qr.__await).then(function(Sn){vr("next",Sn,Lr,Fr)},function(Sn){vr("throw",Sn,Lr,Fr)}):Nr.resolve(Qr).then(function(Sn){Vr.value=Sn,Lr(Vr)},function(Sn){return vr("throw",Sn,Lr,Fr)})}Fr(qr.arg)})(sr,Ir,Cr,br)})}return Pr=Pr?Pr.then(Ar,Ar):Ar()}})}function gr(_r,Nr,Pr){var sr="suspendedStart";return function(Ir,Ar){if(sr==="executing")throw new Error("Generator is already running");if(sr==="completed"){if(Ir==="throw")throw Ar;return mr()}for(Pr.method=Ir,Pr.arg=Ar;;){var Cr=Pr.delegate;if(Cr){var br=pr(Cr,Pr);if(br){if(br===Et)continue;return br}}if(Pr.method==="next")Pr.sent=Pr._sent=Pr.arg;else if(Pr.method==="throw"){if(sr==="suspendedStart")throw sr="completed",Pr.arg;Pr.dispatchException(Pr.arg)}else Pr.method==="return"&&Pr.abrupt("return",Pr.arg);sr="executing";var vr=kt(_r,Nr,Pr);if(vr.type==="normal"){if(sr=Pr.done?"completed":"suspendedYield",vr.arg===Et)continue;return{value:vr.arg,done:Pr.done}}vr.type==="throw"&&(sr="completed",Pr.method="throw",Pr.arg=vr.arg)}}}function pr(_r,Nr){var Pr=Nr.method,sr=_r.iterator[Pr];if(sr===void 0)return Nr.delegate=null,Pr==="throw"&&_r.iterator.return&&(Nr.method="return",Nr.arg=void 0,pr(_r,Nr),Nr.method==="throw")||Pr!=="return"&&(Nr.method="throw",Nr.arg=new TypeError("The iterator does not provide a '"+Pr+"' method")),Et;var Ir=kt(sr,_r.iterator,Nr.arg);if(Ir.type==="throw")return Nr.method="throw",Nr.arg=Ir.arg,Nr.delegate=null,Et;var Ar=Ir.arg;return Ar?Ar.done?(Nr[_r.resultName]=Ar.value,Nr.next=_r.nextLoc,Nr.method!=="return"&&(Nr.method="next",Nr.arg=void 0),Nr.delegate=null,Et):Ar:(Nr.method="throw",Nr.arg=new TypeError("iterator result is not an object"),Nr.delegate=null,Et)}function yr(_r){var Nr={tryLoc:_r[0]};1 in _r&&(Nr.catchLoc=_r[1]),2 in _r&&(Nr.finallyLoc=_r[2],Nr.afterLoc=_r[3]),this.tryEntries.push(Nr)}function Sr(_r){var Nr=_r.completion||{};Nr.type="normal",delete Nr.arg,_r.completion=Nr}function wr(_r){this.tryEntries=[{tryLoc:"root"}],L(_r).call(_r,yr,this),this.reset(!0)}function Mr(_r){if(_r){var Nr=_r[de];if(Nr)return Nr.call(_r);if(typeof _r.next=="function")return _r;if(!isNaN(_r.length)){var Pr=-1,sr=function Ir(){for(;++Pr<_r.length;)if(ie.call(_r,Pr))return Ir.value=_r[Pr],Ir.done=!1,Ir;return Ir.value=void 0,Ir.done=!0,Ir};return sr.next=sr}}return{next:mr}}function mr(){return{value:void 0,done:!0}}return tr.prototype=or,ae(nr,"constructor",{value:or,configurable:!0}),ae(or,"constructor",{value:tr,configurable:!0}),tr.displayName=ze(or,Ve,"GeneratorFunction"),le.isGeneratorFunction=function(_r){var Nr=typeof _r=="function"&&_r.constructor;return!!Nr&&(Nr===tr||(Nr.displayName||Nr.name)==="GeneratorFunction")},le.mark=function(_r){return $?$(_r,or):(_r.__proto__=or,ze(_r,Ve,"GeneratorFunction")),_r.prototype=i(nr),_r},le.awrap=function(_r){return{__await:_r}},ur(ar.prototype),ze(ar.prototype,Ne,function(){return this}),le.AsyncIterator=ar,le.async=function(_r,Nr,Pr,sr,Ir){Ir===void 0&&(Ir=V);var Ar=new ar(jt(_r,Nr,Pr,sr),Ir);return le.isGeneratorFunction(Nr)?Ar:Ar.next().then(function(Cr){return Cr.done?Cr.value:Ar.next()})},ur(nr),ze(nr,Ve,"Generator"),ze(nr,de,function(){return this}),ze(nr,"toString",function(){return"[object Generator]"}),le.keys=function(_r){var Nr=Object(_r),Pr=[];for(var sr in Nr)Pr.push(sr);return z(Pr).call(Pr),function Ir(){for(;Pr.length;){var Ar=Pr.pop();if(Ar in Nr)return Ir.value=Ar,Ir.done=!1,Ir}return Ir.done=!0,Ir}},le.values=Mr,wr.prototype={constructor:wr,reset:function(_r){var Nr;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,L(Nr=this.tryEntries).call(Nr,Sr),!_r)for(var Pr in this)Pr.charAt(0)==="t"&&ie.call(this,Pr)&&!isNaN(+re(Pr).call(Pr,1))&&(this[Pr]=void 0)},stop:function(){this.done=!0;var _r=this.tryEntries[0].completion;if(_r.type==="throw")throw _r.arg;return this.rval},dispatchException:function(_r){if(this.done)throw _r;var Nr=this;function Pr(vr,Tr){return Ar.type="throw",Ar.arg=_r,Nr.next=vr,Tr&&(Nr.method="next",Nr.arg=void 0),!!Tr}for(var sr=this.tryEntries.length-1;sr>=0;--sr){var Ir=this.tryEntries[sr],Ar=Ir.completion;if(Ir.tryLoc==="root")return Pr("end");if(Ir.tryLoc<=this.prev){var Cr=ie.call(Ir,"catchLoc"),br=ie.call(Ir,"finallyLoc");if(Cr&&br){if(this.prev<Ir.catchLoc)return Pr(Ir.catchLoc,!0);if(this.prev<Ir.finallyLoc)return Pr(Ir.finallyLoc)}else if(Cr){if(this.prev<Ir.catchLoc)return Pr(Ir.catchLoc,!0)}else{if(!br)throw new Error("try statement without catch or finally");if(this.prev<Ir.finallyLoc)return Pr(Ir.finallyLoc)}}}},abrupt:function(_r,Nr){for(var Pr=this.tryEntries.length-1;Pr>=0;--Pr){var sr=this.tryEntries[Pr];if(sr.tryLoc<=this.prev&&ie.call(sr,"finallyLoc")&&this.prev<sr.finallyLoc){var Ir=sr;break}}Ir&&(_r==="break"||_r==="continue")&&Ir.tryLoc<=Nr&&Nr<=Ir.finallyLoc&&(Ir=null);var Ar=Ir?Ir.completion:{};return Ar.type=_r,Ar.arg=Nr,Ir?(this.method="next",this.next=Ir.finallyLoc,Et):this.complete(Ar)},complete:function(_r,Nr){if(_r.type==="throw")throw _r.arg;return _r.type==="break"||_r.type==="continue"?this.next=_r.arg:_r.type==="return"?(this.rval=this.arg=_r.arg,this.method="return",this.next="end"):_r.type==="normal"&&Nr&&(this.next=Nr),Et},finish:function(_r){for(var Nr=this.tryEntries.length-1;Nr>=0;--Nr){var Pr=this.tryEntries[Nr];if(Pr.finallyLoc===_r)return this.complete(Pr.completion,Pr.afterLoc),Sr(Pr),Et}},catch:function(_r){for(var Nr=this.tryEntries.length-1;Nr>=0;--Nr){var Pr=this.tryEntries[Nr];if(Pr.tryLoc===_r){var sr=Pr.completion;if(sr.type==="throw"){var Ir=sr.arg;Sr(Pr)}return Ir}}throw new Error("illegal catch attempt")},delegateYield:function(_r,Nr,Pr){return this.delegate={iterator:Mr(_r),resultName:Nr,nextLoc:Pr},this.method==="next"&&(this.arg=void 0),Et}},le}t.exports=oe,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(659)},function(t,r,e){t.exports=e(660)},function(t,r,e){var n=e(661);t.exports=n},function(t,r,e){var n=e(236);t.exports=n},function(t,r,e){t.exports=e(663)},function(t,r,e){var n=e(664);e(665),e(666),e(667),e(668),t.exports=n},function(t,r,e){var n=e(238);t.exports=n},function(t,r,e){e(239)},function(t,r,e){e(253)},function(t,r,e){var n=e(1),g=e(76),y=e(106);n({target:"Promise",stat:!0,forced:!0},{try:function(i){var k=g.f(this),L=y(i);return(L.error?k.reject:k.resolve)(L.value),k.promise}})},function(t,r,e){e(254)},function(t,r,e){t.exports=e(670)},function(t,r,e){t.exports=e(671)},function(t,r,e){var n=e(672);t.exports=n},function(t,r,e){var n=e(283);t.exports=n},function(t,r,e){t.exports=e(674)},function(t,r,e){var n=e(675);t.exports=n},function(t,r,e){var n=e(257);t.exports=n},function(t,r,e){var n=e(152),g=e(22),y=e(23),i=e(4),k=e(6),L=e(56),$=e(44),V=e(45),z=e(153),re=e(154),oe=e(122);function le(Ve){var ze=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var jt,kt=oe(Ve);if(ze){var Et=oe(this).constructor;jt=n(kt,arguments,Et)}else jt=kt.apply(this,arguments);return re(this,jt)}}var ue=e(141),ie=e(677),ae=e(698),Fe=e(35),de=e(0).get,Ne=e(0);t.exports=function(Ve){z(jt,Ve);var ze=le(jt);function jt(kt){var Et,lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $(this,jt),(Et=ze.call(this)).binaryType="arraybuffer",Et.clientProto=kt,Et.logger=kt.logger,Et.config=lr,Et.websocket=null,Et.socketUrl="",Et.socketConnectTimer=0,Et.status="disconnected",Et.socket={sessionid:"",connected:!1},Et}return V(jt,[{key:"setSessionId",value:function(kt){this.socket.sessionid=kt}},{key:"connect",value:function(kt){this.status="connecting",kt=kt.replace(/http(s)?:\/\//,"");var Et=this.clientProto.options.secure?"wss":"ws";this._createWebsocket(Et+"://"+kt+"/websocket")}},{key:"disconnect",value:function(){if(this.status="disconnected",this.socket.connected=!1,this.websocket){this.logger.log("imwebsocket:: close websocket");try{this.websocket.close()}catch(kt){this.logger.warn("imwebsocket::attempt to close websocket error",kt)}this._clean()}}},{key:"removeAllListenersX",value:function(kt){this.removeListener(kt)}},{key:"_clean",value:function(){this.status="disconnected",this.socket.connected=!1,this.socketConnectTimer&&clearTimeout(this.socketConnectTimer),this.websocket&&(this.socketUrl=void 0,this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null)}},{key:"_onConnect",value:function(){this.status="connected",this.socket.connected=!0,this.emit("connect"),this.socketConnectTimer&&clearTimeout(this.socketConnectTimer)}},{key:"_createWebsocket",value:function(kt){var Et,lr=this,tr=this;this.socketConnectTimer=g(function(){lr.logger.error("imwebsocket::Websocket connect timeout. url: ",lr.socketUrl),lr.emit("connect_failed","imwebsocket::Websocket connect timeout")},this.config.connectTimeout||8e3),this.socketUrl=kt,this.websocket=new WebSocket(kt),this.websocket.binaryType=this.binaryType,this.websocket.onmessage=y(Et=this._onMessage).call(Et,this),this.websocket.onclose=function(){tr.logger.log("imwebsocket::Websocket onclose done"),tr.status==="connected"?(tr._clean(),lr.emit("websocketOnclose"),lr.emit("disconnect")):(tr._clean(),lr.emit("connect_failed","imwebsocket::Websocket onclose"))},this.websocket.onerror=function(or){tr.logger.error("imwebsocket::Websocket onerror",or),tr.status==="connected"?(tr._clean(),lr.emit("websocketOnclose"),lr.emit("disconnect")):(tr._clean(),lr.emit("connect_failed","imwebsocket::Websocket onerror"))},this.websocket.onopen=function(){tr._onConnect()}}},{key:"_onMessage",value:function(kt){if(kt.data){var Et,lr=new ae(kt.data),tr={sid:-1,cid:-1,ser:-1,packetLength:-1},or=null;try{lr.unmarshalHeader(),tr=lr.getHeader(),or=lr.getInnerHeader()}catch(Sr){tr=lr.getHeader(),or=lr.getInnerHeader(),this.reportBinaryError({err:Sr,sid:or?or.sid:tr.sid,cid:or?or.cid:tr.cid,type:"decode"})}var dr=or?or.sid:tr.sid,cr=or?or.cid:tr.cid,nr=i(Et="".concat(dr,"_")).call(Et,cr),ur=de(this.clientProto,"parser.configMap.packetConfig.".concat(nr));if(ur){var ar;try{ar=lr.unmarshal(ur.response)}catch(Sr){var gr,pr,yr;return this.reportBinaryError({err:Sr,sid:dr,cid:cr,type:"decode"}),lr.reset(),tr.code=998,tr.sid=dr,tr.cid=cr,this.clientProto.logger.error(i(gr=i(pr=i(yr='imwebsocket::onMessage "'.concat(dr,"_")).call(yr,cr,'", ser ')).call(pr,tr.ser,", packetLength ")).call(gr,tr.packetLength," unmarshal error"),Sr),void this.emit("message",k(tr))}this.emit("message",ar)}else this.clientProto.logger.warn("imwebsocket::onMessage cmd not found",nr);lr.reset()}}},{key:"send",value:function(kt,Et){var lr=new ie(kt.SID,kt.CID,kt.SER),tr=de(this.clientProto,"parser.configMap.cmdConfig.".concat(Et));if(!tr)throw new Fe('imwebsocket::send "'.concat(Et,'" cmdConfig not found'),999);var or,dr=tr.params,cr="";try{cr=k(kt.Q),or=lr.marshal(kt.Q,dr)}catch(nr){throw this.reportBinaryError({err:nr,sid:kt.SID,cid:kt.CID,rawStr:cr,type:"encode"}),lr.pack.reset(),new Fe('imwebsocket::send "'.concat(Et,'" marshal error'),999,{rawError:nr})}this.websocket.send(or),lr.pack.reset()}},{key:"reportBinaryError",value:function(kt){var Et,lr=this.clientProto,tr=kt.err,or=kt.rawStr,dr=kt.sid,cr=kt.cid,nr=kt.type;lr.reporter.reportTraceStart("exceptions",{user_id:lr.account,trace_id:Ne.get(lr,"socket.socket.sessionid"),start_time:L(),action:2,exception_service:9}),lr.reporter.reportTraceUpdateV2("exceptions",{code:nr==="encode"?999:998,description:tr&&(tr.message||"".concat(tr.code))+" rawObj: ".concat(or),operation_type:nr==="encode"?3:4,target:i(Et="".concat(dr,"-")).call(Et,cr)}),lr.reporter.reportTraceEnd("exceptions",1)}}]),jt}(ue)},function(t,r,e){var n=e(5),g=e(15),y=e(2),i=e(28),k=e(6),L=e(44),$=e(45),V=e(678);function z(oe){if(typeof oe!="number"){if(oe==null)return!1;oe=Number(oe)}if(isNaN(oe))throw new Error("Number type conversion error");return!0}function re(oe){return oe==null}t.exports=function(){function oe(le,ue,ie){L(this,oe),this.pack=new V,this.packetLength=0,this.serviceId=le,this.commandId=ue,this.serialId=ie,this.tag=0}return $(oe,[{key:"marshalHeader",value:function(){this.pack.putVarInt(this.packetLength),this.pack.putByte(this.serviceId),this.pack.putByte(this.commandId),this.pack.putShort(this.serialId),this.pack.putByte(this.tag)}},{key:"marshalProperty",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){return!re(Fe)});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){ue.pack.putVarInt(Number(Fe)),i(le[Fe])||Object.prototype.toString.call(le[Fe])==="[object Object]"?ue.pack.putString(k(le[Fe])):ue.pack.putString(String(le[Fe]))})}},{key:"marshalPropertyArray",value:function(le){var ue=this,ie=le.length;this.pack.putVarInt(ie),y(le).call(le,function(ae){ue.marshalProperty(ae&&ae.v)})}},{key:"marshalStrArray",value:function(le){var ue=this,ie=g(le).call(le,function(Fe){return!re(Fe)}),ae=ie.length;this.pack.putVarInt(ae),y(ie).call(ie,function(Fe){ue.pack.putString(String(Fe))})}},{key:"marshalLongArray",value:function(le){var ue=this,ie=g(le).call(le,function(Fe){return z(Fe)}),ae=ie.length;this.pack.putVarInt(ae),y(ie).call(ie,function(Fe){ue.putLong(Fe)})}},{key:"marshalStrStrMap",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){return!re(le[Fe])&&!re(Fe)});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){ue.pack.putString(String(Fe)),ue.pack.putString(String(le[Fe]))})}},{key:"marshalStrLongMap",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){return z(le[Fe])&&!re(Fe)});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){ue.pack.putString(String(Fe)),ue.putLong(le[Fe])})}},{key:"marshalLongLongMap",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){var de=Number(Fe);return z(de)&&z(le[de])});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){var de=Number(Fe);ue.putLong(de),ue.putLong(le[de])})}},{key:"marshalKVArray",value:function(le){var ue=this,ie=le.length;this.pack.putVarInt(ie),y(le).call(le,function(ae){ue.marshalStrStrMap(ae)})}},{key:"putLong",value:function(le){typeof le=="string"&&le.length>15?this.pack.putStringAsLong(le):this.pack.putLong(Number(le))}},{key:"marshal",value:function(le,ue){var ie=this;return this.marshalHeader(),ue&&y(ue).call(ue,function(ae,Fe){var de=ae.type,Ne=le[Fe]&&le[Fe].v;if(!re(Ne))switch(de){case"PropertyArray":ie.marshalPropertyArray(Ne);break;case"Property":ie.marshalProperty(Ne);break;case"Byte":if(!z(Ne))return;ie.pack.putByte(Number(Ne));break;case"Int":if(!z(Ne))return;ie.pack.putInt(Number(Ne));break;case"Bool":Ne==="false"?Ne=!1:Ne==="true"&&(Ne=!0),ie.pack.putBoolean(Ne);break;case"Long":if(!z(Ne))return;ie.putLong(Ne);break;case"LongArray":ie.marshalLongArray(Ne);break;case"String":ie.pack.putString(String(Ne));break;case"StrArray":ie.marshalStrArray(Ne);break;case"StrStrMap":ie.marshalStrStrMap(Ne);break;case"StrLongMap":ie.marshalStrLongMap(Ne);break;case"LongLongMap":ie.marshalLongLongMap(Ne);break;case"KVArray":ie.marshalKVArray(Ne)}}),this.pack.getBuffer()}}]),oe}()},function(t,r,e){var n=e(9),g=e(44),y=e(45),i=e(295),k=i.encodeText,L=i.setBigUint64,$=i.setBigUint64ForNumberOverflow,V=i.varintToBytes;t.exports=function(){function z(){g(this,z),this.buffer=new Uint8Array(this.pageSize),this.view=new DataView(this.buffer.buffer),this.offset=0,this.pageSize=1024,this.capacity=1048576}return y(z,[{key:"reset",value:function(){this.offset=0,this.buffer=null,this.view=null}},{key:"size",value:function(){return this.offset}},{key:"getBuffer",value:function(){var re;return n(re=this.buffer).call(re,0,this.offset).buffer}},{key:"ensureCapacity",value:function(re){var oe=this.offset+re;if(oe>this.capacity)throw new Error("PackException over limit");if(oe>this.buffer.byteLength){var le=Math.ceil(oe/this.pageSize)*this.pageSize,ue=new Uint8Array(le);ue.set(this.buffer),this.buffer=ue,this.view=new DataView(this.buffer.buffer)}}},{key:"putRaw",value:function(re){this.ensureCapacity(re.length);try{this.buffer.set(re,this.offset),this.offset+=re.length}catch{throw new Error("PackException raw")}}},{key:"putByte",value:function(re){this.ensureCapacity(1);try{this.view.setUint8(this.offset++,re)}catch{throw new Error("PackException byte")}}},{key:"putString",value:function(re){try{var oe=k(re);this.putVarbin(oe)}catch{throw new Error("PackException string")}}},{key:"putInt",value:function(re){this.ensureCapacity(4);try{this.view.setInt32(this.offset,re,!0),this.offset+=4}catch{throw new Error("PackException int")}}},{key:"putVarInt",value:function(re){var oe=V(re);this.putRaw(oe)}},{key:"putBoolean",value:function(re){this.ensureCapacity(1);try{this.view.setUint8(this.offset++,re?1:0)}catch{throw new Error("PackException boolean")}}},{key:"putLong",value:function(re){this.ensureCapacity(8);try{var oe=L(re,!0);this.buffer.set(oe,this.offset),this.offset+=8}catch{throw new Error("PackException long")}}},{key:"putStringAsLong",value:function(re){this.ensureCapacity(8);try{var oe=$(re,!0);this.buffer.set(oe,this.offset),this.offset+=8}catch{throw new Error("PackException stringAsLong")}}},{key:"putShort",value:function(re){this.ensureCapacity(2);try{this.view.setInt16(this.offset,re,!0),this.offset+=2}catch{throw new Error("PackException short")}}},{key:"putVarbin",value:function(re){if(!re)return this.ensureCapacity(1),this.putVarInt(0);if(re.byteLength>Math.pow(2,31)-2)throw new Error("PackException varbin");var oe=V(re.length);this.ensureCapacity(oe.length+re.length);try{this.buffer.set(oe,this.offset),this.offset+=oe.length,this.buffer.set(re,this.offset),this.offset+=re.length}catch{throw new Error("PackException varbin")}}}]),z}()},function(t,r,e){t.exports=e(680)},function(t,r,e){var n=e(681);t.exports=n},function(t,r,e){var n=e(18),g=e(682),y=String.prototype;t.exports=function(i){var k=i.codePointAt;return typeof i=="string"||i===y||n(y,i)&&k===y.codePointAt?g:k}},function(t,r,e){e(683);var n=e(27);t.exports=n("String").codePointAt},function(t,r,e){var n=e(1),g=e(234).codeAt;n({target:"String",proto:!0},{codePointAt:function(y){return g(this,y)}})},function(t,r,e){t.exports=e(685)},function(t,r,e){var n=e(686);t.exports=n},function(t,r,e){e(687);var n=e(14);t.exports=n.String.fromCodePoint},function(t,r,e){var n=e(1),g=e(13),y=e(114),i=RangeError,k=String.fromCharCode,L=String.fromCodePoint,$=g([].join);n({target:"String",stat:!0,arity:1,forced:!!L&&L.length!=1},{fromCodePoint:function(V){for(var z,re=[],oe=arguments.length,le=0;oe>le;){if(z=+arguments[le++],y(z,1114111)!==z)throw i(z+" is not a valid code point");re[le]=z<65536?k(z):k(55296+((z-=65536)>>10),z%1024+56320)}return $(re,"")}})},function(t,r,e){var n=e(313);t.exports=function(g){if(n(g))return g},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(690)},function(t,r,e){var n=e(691);t.exports=n},function(t,r,e){var n=e(235);t.exports=n},function(t,r,e){var n=e(158),g=e(64);t.exports=function(y,i){var k=y==null?null:n!==void 0&&g(y)||y["@@iterator"];if(k!=null){var L,$,V,z,re=[],oe=!0,le=!1;try{if(V=(k=k.call(y)).next,i===0){if(Object(k)!==k)return;oe=!1}else for(;!(oe=(L=V.call(k)).done)&&(re.push(L.value),re.length!==i);oe=!0);}catch(ue){le=!0,$=ue}finally{try{if(!oe&&k.return!=null&&(z=k.return(),Object(z)!==z))return}finally{if(le)throw $}}return re}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(694)},function(t,r,e){var n=e(695);t.exports=n},function(t,r,e){var n=e(261);t.exports=n},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(121),g=e(43),y=e(63),i=function(re){var oe;if(re!==void 0)return(oe=z(re)).sign=1,oe},k=function(re){return Object.prototype.toString.call(re)==="[object Array]"},L=function(re){var oe;return n(oe=[typeof re=="number",typeof re=="string"&&re.length>0,k(re)&&re.length>0,re instanceof z]).call(oe,function(le){return le===!0})},$="Invalid Number",V="Invalid Number - Division By Zero";function z(re){var oe;if(!(this instanceof z))return new z(re);if(this.number=[],this.sign=1,this.rest=0,L(re)){if(k(re)){for((re.length&&re[0]==="-"||re[0]==="+")&&(this.sign=re[0]==="+"?1:-1,re.shift(0)),oe=re.length-1;oe>=0;oe--)if(!this.addDigit(re[oe]))return}else for((re=re.toString()).charAt(0)!=="-"&&re.charAt(0)!=="+"||(this.sign=re.charAt(0)==="+"?1:-1,re=re.substring(1)),oe=re.length-1;oe>=0;oe--)if(!this.addDigit(g(re.charAt(oe),10)))return}else this.number=$}z.prototype.addDigit=function(re){return function(oe){return/^\d$/.test(oe)}(re)?(this.number.push(re),this):(this.number=$,!1)},z.prototype._compare=function(re){var oe,le;if(!L(re))return null;if(oe=z(re),this.sign!==oe.sign)return this.sign;if(this.number.length>oe.number.length)return this.sign;if(this.number.length<oe.number.length)return-1*this.sign;for(le=this.number.length-1;le>=0;le--){if(this.number[le]>oe.number[le])return this.sign;if(this.number[le]<oe.number[le])return-1*this.sign}return 0},z.prototype.gt=function(re){return this._compare(re)>0},z.prototype.gte=function(re){return this._compare(re)>=0},z.prototype.equals=function(re){return this._compare(re)===0},z.prototype.lte=function(re){return this._compare(re)<=0},z.prototype.lt=function(re){return this._compare(re)<0},z.prototype.subtract=function(re){var oe;return re===void 0?this:(oe=z(re),this.sign!==oe.sign?(this.number=z._add(this,oe),this):(this.sign=this.lt(oe)?-1:1,this.number=i(this).lt(i(oe))?z._subtract(oe,this):z._subtract(this,oe),this))},z._add=function(re,oe){var le,ue=0,ie=Math.max(re.number.length,oe.number.length);for(le=0;le<ie||ue>0;le++)re.number[le]=(ue+=(re.number[le]||0)+(oe.number[le]||0))%10,ue=Math.floor(ue/10);return re.number},z._subtract=function(re,oe){var le,ue,ie=0,ae=re.number.length;for(le=0;le<ae;le++)re.number[le]-=(oe.number[le]||0)+ie,re.number[le]+=10*(ie=re.number[le]<0?1:0);for(le=0,ae=re.number.length-1;re.number[ae-le]===0&&ae-le>0;)le++;return le>0&&y(ue=re.number).call(ue,-le),re.number},z.prototype.multiply=function(re){if(re===void 0)return this;var oe,le,ue=z(re),ie=0,ae=[];if(this.isZero()||ue.isZero())return z(0);for(this.sign*=ue.sign,oe=0;oe<this.number.length;oe++)for(ie=0,le=0;le<ue.number.length||ie>0;le++)ae[oe+le]=(ie+=(ae[oe+le]||0)+this.number[oe]*(ue.number[le]||0))%10,ie=Math.floor(ie/10);return this.number=ae,this},z.prototype.divide=function(re){if(re===void 0)return this;var oe,le,ue=z(re),ie=[],ae=z(0);if(ue.isZero())return this.number=V,this;if(this.isZero())return this.rest=z(0),this;if(this.sign*=ue.sign,ue.sign=1,ue.number.length===1&&ue.number[0]===1)return this.rest=z(0),this;for(oe=this.number.length-1;oe>=0;oe--)for(ae.multiply(10),ae.number[0]=this.number[oe],ie[oe]=0;ue.lte(ae);)ie[oe]++,ae.subtract(ue);for(oe=0,le=ie.length-1;ie[le-oe]===0&&le-oe>0;)oe++;return oe>0&&y(ie).call(ie,-oe),this.rest=ae,this.number=ie,this},z.prototype.mod=function(re){return this.divide(re).rest},z.prototype.isZero=function(){var re;for(re=0;re<this.number.length;re++)if(this.number[re]!==0)return!1;return!0},z.prototype.toString=function(){var re,oe="";if(typeof this.number=="string")return this.number;for(re=this.number.length-1;re>=0;re--)oe+=this.number[re];return this.sign>0?oe:"-"+oe},t.exports=z},function(t,r,e){var n=e(51),g=e(95),y=e(6),i=e(2),k=e(5),L=e(52),$=e(15),V=e(53),z=e(54),re=e(55),oe=e(42),le=e(44),ue=e(45);function ie(de,Ne){var Ve=k(de);if(L){var ze=L(de);Ne&&(ze=$(ze).call(ze,function(jt){return V(de,jt).enumerable})),Ve.push.apply(Ve,ze)}return Ve}function ae(de){for(var Ne=1;Ne<arguments.length;Ne++){var Ve,ze,jt=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?i(Ve=ie(Object(jt),!0)).call(Ve,function(kt){n(de,kt,jt[kt])}):z?re(de,z(jt)):i(ze=ie(Object(jt))).call(ze,function(kt){oe(de,kt,V(jt,kt))})}return de}var Fe=e(699);t.exports=function(){function de(Ne){le(this,de),this.unpack=new Fe(Ne),this.packetLength=0,this.serviceId=0,this.commandId=0,this.serialId=0,this.tag=0,this.resCode=200,this.innerHeader=null,this.msgId=0}return ue(de,[{key:"reset",value:function(){this.innerHeader=null,this.unpack.reset()}},{key:"unmarshalHeader",value:function(){var Ne,Ve=this._unmarshalHeader();this.packetLength=Ve.packetLength,this.serviceId=Ve.serviceId,this.commandId=Ve.commandId,this.serialId=Ve.serialId,this.tag=Ve.tag,this.resCode=Ve.resCode,Ve.serviceId===4&&g(Ne=[1,2,10,11]).call(Ne,Ve.commandId)&&(this.msgId=this.unmarshalLong(),this.innerHeader=this._unmarshalHeader())}},{key:"_unmarshalHeader",value:function(){var Ne=this.unpack.popVarInt(),Ve=this.unpack.popByte(),ze=this.unpack.popByte(),jt=this.unpack.popShort(),kt=this.unpack.popByte(),Et=200;return this.hasRescode(kt)&&(Et=this.unpack.popShort()),{packetLength:Ne,serviceId:Ve,commandId:ze,serialId:jt,tag:kt,resCode:Et}}},{key:"hasRescode",value:function(Ne){return(2&(Ne=Ne||this.tag))!=0}},{key:"getHeader",value:function(){return{packetLength:this.packetLength,sid:this.serviceId,cid:this.commandId,ser:this.serialId,code:this.resCode}}},{key:"getInnerHeader",value:function(){return this.innerHeader?{sid:this.innerHeader.serviceId,cid:this.innerHeader.commandId}:null}},{key:"unmarshalProperty",value:function(){for(var Ne=this.unpack.popVarInt(),Ve={},ze=0;ze<Ne;ze++){var jt=this.unpack.popVarInt(),kt=this.unpack.popString();Ve[jt]=kt}return Ve}},{key:"unmarshalPropertyArray",value:function(){for(var Ne=this.unpack.popVarInt(),Ve=[],ze=0;ze<Ne;ze++)Ve.push(this.unmarshalProperty());return Ve}},{key:"unmarshalLong",value:function(){return this.unpack.popLong()}},{key:"unmarshalLongArray",value:function(){for(var Ne=this.unpack.popVarInt(),Ve=[],ze=0;ze<Ne;ze++)Ve.push(this.unpack.popLong());return Ve}},{key:"unmarshalStrArray",value:function(){for(var Ne=this.unpack.popVarInt(),Ve=[],ze=0;ze<Ne;ze++)Ve.push(this.unpack.popString());return Ve}},{key:"unmarshalStrLongMap",value:function(){for(var Ne=this.unpack.popVarInt(),Ve={},ze=0;ze<Ne;ze++){var jt=this.unpack.popString(),kt=this.unpack.popLong();Ve[jt]=kt}return Ve}},{key:"unmarshalStrStrMap",value:function(){for(var Ne=this.unpack.popVarInt(),Ve={},ze=0;ze<Ne;ze++){var jt=this.unpack.popString(),kt=this.unpack.popString();Ve[jt]=kt}return Ve}},{key:"unmarshalLongLongMap",value:function(){for(var Ne=this.unpack.popVarInt(),Ve={},ze=0;ze<Ne;ze++){var jt=this.unpack.popLong(),kt=this.unpack.popLong();Ve[jt]=kt}return{m_map:Ve}}},{key:"unmarshalKVArray",value:function(){for(var Ne=this.unpack.popVarInt(),Ve=[],ze=0;ze<Ne;ze++)Ve.push(this.unmarshalStrStrMap());return Ve}},{key:"unmarshal",value:function(Ne){var Ve,ze=this,jt=ae(ae({},this.getHeader()),{},{r:[]});if(this.innerHeader&&(jt.r[0]=this.msgId,jt.r[1]={body:[],headerPacket:this.getInnerHeader()}),!g(Ve=[200,406,808,810,7101]).call(Ve,jt.code))return y(jt);var kt=[];return Ne&&i(Ne).call(Ne,function(Et){if(!ze.unpack.checkBufferBoundaryAccess())switch(Et.type){case"PropertyArray":kt.push(ze.unmarshalPropertyArray());break;case"Property":kt.push(ze.unmarshalProperty());break;case"Byte":kt.push(ze.unpack.popByte());break;case"Int":kt.push(ze.unpack.popInt());break;case"Bool":kt.push(ze.unpack.popBoolean());break;case"Long":kt.push(ze.unmarshalLong());break;case"LongArray":kt.push(ze.unmarshalLongArray());break;case"String":kt.push(ze.unpack.popString());break;case"StrArray":kt.push(ze.unmarshalStrArray());break;case"StrStrMap":kt.push(ze.unmarshalStrStrMap());break;case"StrLongMap":kt.push(ze.unmarshalStrLongMap());break;case"LongLongMap":kt.push(ze.unmarshalLongLongMap());break;case"KVArray":kt.push(ze.unmarshalKVArray())}}),this.innerHeader?jt.r[1].body=kt:jt.r=kt,y(jt)}}]),de}()},function(t,r,e){var n=e(9),g=e(68),y=e(44),i=e(45),k=e(295),L=k.decodeText,$=k.getBigUint64;t.exports=function(){function V(z){y(this,V),this.buffer=new Uint8Array(z),this.view=new DataView(z),this.offset=0}return i(V,[{key:"checkBufferBoundaryAccess",value:function(){return this.offset>=this.buffer.byteLength}},{key:"length",value:function(){return this.view&&this.view.byteLength||0}},{key:"getBuffer",value:function(){return this.view.buffer}},{key:"popRaw",value:function(z){try{var re,oe=n(re=this.buffer).call(re,this.offset,this.offset+z);return this.offset+=z,oe}catch{throw new Error("UnpackException raw")}}},{key:"popByte",value:function(){try{var z=this.view.getUint8(this.offset);return this.offset+=1,z}catch{throw new Error("UnpackException byte ")}}},{key:"popVarbin",value:function(){return this.popRaw(this.popVarInt())}},{key:"popString",value:function(){try{var z=this.popVarbin();return L(z)}catch{throw new Error("UnpackException string")}}},{key:"popInt",value:function(){try{var z=this.view.getUint32(this.offset,!0);return this.offset+=4,z}catch{throw new Error("UnpackException int")}}},{key:"popVarInt",value:function(){var z=1,re=0,oe=0;do re+=(127&(oe=this.popByte()))*z,z*=128;while(128&oe);return re}},{key:"popLong",value:function(){try{var z,re=$(n(z=this.buffer).call(z,this.offset,this.offset+8),!0);return this.offset+=8,Number(re)}catch{throw new Error("UnpackException long")}}},{key:"popShort",value:function(){try{var z=this.view.getUint16(this.offset,!0);return this.offset+=2,z}catch{throw new Error("UnpackException short")}}},{key:"popBoolean",value:function(){return this.popByte()>0}},{key:"toString",value:function(){return g(new Uint8Array(this.buffer)).toString()}},{key:"reset",value:function(){this.offset=0,this.buffer=null,this.view=null}}]),V}()},function(t,r,e){var n=e(60),g=e(61),y=e(2),i=e(4),k=e(9),L=e(63),$=e(22),V=e(95),z=e(3),re=e(23),oe=e(82).fn,le=e(35),ue=e(701),ie=e(12),ae=e(0),Fe=e(702);function de(){this.logger.log("offlineListener enter"),this.forceDisconnect(),this.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to network offline")),this.options.ondisconnect&&this.options.ondisconnect({code:"offlineListener",callFunc:"link::offlineListener",message:"offlineListener disconnect"}),this.onDisconnect("link::offlineListener","broken")}function Ne(){var Ve=this;this.logger.log("onlineListener start"),this&&this.isConnected()&&!this.connecting?(this.stopHeartbeat(),this.sendCmd("heartbeat",null,function(ze){if(ze){Ve.logger.info("onlineListener heartbeat detect error",ze);try{Ve.forceDisconnect(),Ve.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to heartbeat error")),Ve.onDisconnect("link::onHeartbeat","broken")}catch(jt){Ve.logger.info("onlineListener heartbeat websocket.onclose",jt)}}else Ve.logger.log("onlineListener heartbeat detect success")})):this.logger.log("onlineListener disconnected or connecting",this&&this.isConnected(),this.connecting)}oe.initConnect=function(){this.socket=null,this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.doLogout=!1},oe.resetConnect=function(){var Ve=this.options;ae.notundef(Ve.needReconnect)?(ae.verifyParamType("needReconnect",Ve.needReconnect,"boolean","link::resetConnect"),this.needReconnect=Ve.needReconnect):this.needReconnect=!0,this.logger.info("link::resetConnect: needReconnect ".concat(this.needReconnect)),ae.notundef(Ve.reconnectionAttempts)&&ae.verifyParamType("reconnectionAttempts",Ve.reconnectionAttempts,"number","link::resetConnect"),ae.notundef(Ve.noCacheLinkUrl)&&ae.verifyParamType("noCacheLinkUrl",Ve.noCacheLinkUrl,"boolean","link::resetConnect"),this.reconnectionAttempts=typeof Ve.reconnectionAttempts=="number"?Ve.reconnectionAttempts:1/0,this.backoff=new ue({min:ie.reconnectionDelay,max:ie.reconnectionDelayMax,jitter:ie.reconnectionJitter})},oe.reportTCPException=function(Ve){var ze=this;y(Ve).call(Ve,function(jt,kt){var Et,lr=jt.event,tr=lr===void 0?{}:lr,or=jt.message,dr=tr.startTime,cr=tr.code,nr=tr.reason,ur=tr.url,ar="";or==="handshake_failed"?ar="handshake_failed":or==="connect_failed"?ar=nr?"connect_failed:".concat(nr):"connect_failed":or==="socket_error"&&(ar=nr?"socket.io error:".concat(nr):"socket.io error"),ze.logger.warn(i(Et="connect::failed ".concat(kt,", ")).call(Et,ar),jt),ze.reporter.reportTraceStart("exceptions",{user_id:ze.options.account,trace_id:ae.get(self,"socket.socket.sessionid"),start_time:dr,action:0,exception_service:6}),ze.reporter.reportTraceUpdateV2("exceptions",{code:cr,description:or,operation_type:0,target:ur,net_connect:ze.checkNetworkAvailable()}),ze.reporter.reportTraceEnd("exceptions",1)})},oe.connect=g(n.mark(function Ve(){var ze,jt,kt,Et,lr;return n.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(kt=this,clearTimeout(kt.connectTimer),!kt.isConnected()){tr.next=5;break}return kt.logger.warn("link::connect: already connected"),tr.abrupt("return");case 5:if(!kt.connecting){tr.next=8;break}return kt.logger.warn("link::connect: already connecting"),tr.abrupt("return");case 8:if(kt.connecting=!0,kt.hasNotifyDisconnected=!1,kt.shouldReconnect=!0,kt.socket&&kt.forceDisconnect(),kt.logger.info("link::connect: connect to new socket, autoconnect is "+kt.autoconnect),typeof kt.options.socketUrl=="string"&&(kt.logger.info("link::connect: try to options.socketUrl ",kt.options.socketUrl),kt.socketUrls=[kt.options.socketUrl]),tr.prev=14,kt.socketUrls&&kt.socketUrls.length>0){tr.next=20;break}return tr.next=18,kt.refreshSocketUrl();case 18:kt.socketUrls=Fe(kt.socketUrls),kt.logger.info("link::connect: refreshSocketUrl success, socketConcurrent ".concat(kt.imsocket.config.socketConcurrent),kt.socketUrls);case 20:tr.next=28;break;case 22:return tr.prev=22,tr.t0=tr.catch(14),kt.logger.warn("connect::refreshSocketUrl: catch exception,",tr.t0&&tr.t0.message),kt.connecting=!1,this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"refresh socket url fail"}),tr.abrupt("return");case 28:return kt.imsocket.resetSockets(),kt.imsocket.setUrls(k(ze=kt.socketUrls).call(ze,0)),L(jt=kt.socketUrls).call(jt,0,kt.imsocket.config.socketConcurrent),tr.prev=31,tr.next=34,kt.promiseAbortManager.add(kt.imsocket.connect());case 34:kt.socket=tr.sent,kt.onConnect(),tr.next=47;break;case 38:tr.prev=38,tr.t1=tr.catch(31),Et=tr.t1,lr="",tr.t1.errors&&(kt.reportTCPException(tr.t1.errors),Et=tr.t1.errors[0]),Et.message==="handshake_failed"?(kt.onHandshakeFailed(Et.event.startTime,Et.event.url),lr="link::onHandshakeFailed"):Et.message==="connect_failed"?(kt.onConnectFailed(Et.event.reason,Et.event.startTime,Et.event.url),lr="link::onConnectFailed"):Et.message==="socket_error"?(kt.onSocketError(Et.event.reason,Et.event.startTime,Et.event.url),lr="link::onSocketError"):Et.message==="Request aborted"?(kt.imsocket.resetSockets(),lr="link:RequestAborted"):(lr="link::otherFailed",kt.logger.warn("link::otherFailed",Et)),this.statusProtector.processEvent("auth/loginLifeCycleConnectFail",Et),kt.connecting=!1,kt.willReconnect()?kt.onDisconnect(lr,"broken"):this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"init connect fail"});case 47:case"end":return tr.stop()}},Ve,this,[[14,22],[31,38]])})),oe.isConnected=function(){return!!this.socket&&!!this.socket.socket&&this.socket.socket.connected},oe.getLoginStatus=function(){return this.statusProtector.getLoginStatus()},oe.disconnect=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},ze=this;function jt(kt){clearTimeout(ze.disconnectCallbackTimer),ze.msgAckBufferManager&&ze.msgAckBufferManager.clear(),ze.roamingMsgSyncDoneBufferManager&&ze.roamingMsgSyncDoneBufferManager.clear(),$(function(){Ve(kt)},0)}clearTimeout(ze.connectTimer),ze.disconnectCallbackTimer=$(function(){Ve.call(ze,"mark disconnected due to timeout")},1e4),ze.mixStorePolicy=null,ze.appGrayConfig=null,ze.resetReconnectStatus(),clearTimeout(ze.mixStorePolicyClock),this.onlineListener&&typeof window<"u"&&ae.isFunction(window.removeEventListener)&&(window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener),this.onlineListener=null,this.offlineListener=null),ze.statusProtector.processEvent("auth/loginLifeCycleLogout"),ze.isConnected()?(ze.logger.warn("link::disconnect: start disconnecting"),ze.logout()):ze.connecting?(ze.logger.warn("link::disconnect: abort connecting"),ze.disconnectSocket()):(ze.logger.warn("link::disconnect: already disconnected"),ze.connecting=!1,ze.shouldReconnect=!1,ze.socket=null,ze.autoconnect=!1,ze.options.ondisconnect({code:"alreadyDisconnected",callFunc:"link::disconnect",message:"manually disconnect status"})),ze.socket&&ze.socket.socket&&ze.socket.socket.transport?ze.socket.socket.transport.onDisconnectDone=function(kt){ze.logger.warn("link::disconnect: invoke [done] when socket closed",kt),jt(kt)}:(ze.logger.warn("link::disconnect: invoke [done]"),jt(null))},oe.resetReconnectStatus=function(){this.backoff&&(this.backoff.setMin(ie.reconnectionDelay),this.backoff.setMax(ie.reconnectionDelayMax),this.backoff.reset()),this.retryCount=0,this.logger.info("link::resetReconnectStatus: reset retryCount and backoff")},oe.onConnect=function(){this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.logger.info("link::onConnect success"),this.statusProtector.processEvent("auth/loginLifeCycleConnectSucc"),this.login()},oe.onDisconnect=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ze=arguments.length>1?arguments[1]:void 0,jt=this;this.logger.warn("socket::onDisconnect: "+Ve),jt.connecting=!1,jt.markAllCallbackInvalid(le.newNetworkError({callFunc:Ve,uploadCode:415,disconnectReason:ze})),jt.msgAckBufferManager&&jt.msgAckBufferManager.clear(),jt.roamingMsgSyncDoneBufferManager&&jt.roamingMsgSyncDoneBufferManager.clear(),jt.stopHeartbeat(),jt.reconnect()},oe.willReconnect=function(){var Ve=this.statusProtector.getLastErrorFromLoginCmd(),ze=function(jt){if(jt===void 0)return!1;var kt=[201,302,317,403,404,417,422];return V(kt).call(kt,jt)}(Ve&&Ve.code);return this.shouldReconnect&&this.needReconnect&&this.retryCount<this.reconnectionAttempts&&!ze},oe.reconnect=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.__destroyed)if(this.willReconnect()){if(this.socket&&(this.logger.info("link::reconnect: try to force disconnect"),this.forceDisconnect()),this.socketUrls.length===0&&!this.options.socketUrl&&typeof Ve.allFailedCB=="function")return this.logger.log("reconnect: All socket links have been polled, trigger hooks"),void Ve.allFailedCB();this.doReconnect()}else this.notifyDisconnect({code:"allAttemptsFailed",message:"All attempts failed"})},oe.doReconnect=function(){var Ve,ze=this;ze.socket=null,ze.retryCount++,ze.hasLogin=!1;var jt,kt=ze.backoff.duration();if(typeof ze.options.reconnectDelayProvider=="function")try{var Et=ze.options.reconnectDelayProvider(kt);typeof Et=="number"&&(kt=Et>=1e3?Et:1e3)}catch(lr){ze.logger.error("link::reconnect:reconnectDelayProvider excute failed,",lr&&lr.message?lr.message:lr)}ze.logger.info(i(Ve="link::reconnect: will retry after ".concat(kt,"ms, retryCount ")).call(Ve,ze.retryCount)),ze.statusProtector.processEvent("auth/loginLifeCycleWaiting"),jt=ze.options.onwillreconnect({retryCount:ze.retryCount,duration:kt}),clearTimeout(ze.connectTimer),ze.connectTimer=$(function(){+ze.options.authType==1&&jt instanceof z?(ze.logger.info("link::reconnect: wait onwillreconnect promise"),jt.finally(function(){return ze.connect()})):ze.connect()},kt)},oe.notifyConnectError=function(Ve){var ze=le.newConnectError({message:Ve,callFunc:"link::notifyConnectError"});this.logger.error("link::notifyConnectError:",ze),this.options.onerror(ze)},oe.notifyDisconnect=function(Ve){this.hasNotifyDisconnected?this.logger.warn("notifyDisconnect:: already notified"):(this.hasNotifyDisconnected=!0,this.disconnectSocket(),this.forceDisconnect(),(Ve=Ve||new le).retryCount=this.retryCount,Ve.willReconnect=this.willReconnect(),this.backoff&&this.backoff.reset(),this.retryCount=0,this.autoconnect=!1,this.logger.info("link::notifyDisconnect: ondisconnected",Ve),this.options.ondisconnect(Ve),this.onWbNotifyHangup instanceof Function&&this.onWbNotifyHangup({content:{account:this.account,channelId:null,timetag:+Date()}}))},oe.disconnectSocket=function(){if(this.isConnected()||this.connecting){this.connecting=!1,this.shouldReconnect=!1;try{this.socket&&this.socket.disconnect()}catch(Ve){this.socket&&typeof this.socket.removeAllListenersX=="function"&&this.socket.removeAllListenersX("info"),this.logger.info("link::disconnectSocket: disconnect failed, error ",Ve&&Ve.message)}}},oe.initOnlineListener=function(){this.needReconnect&&this.options&&this.options.quickReconnect?typeof window<"u"&&ae.isFunction(window.addEventListener)?this.onlineListener||(this.onlineListener=re(Ne).call(Ne,this),this.offlineListener=re(de).call(de,this),this.logger.info("initOnlineListener success"),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener no window.addEventListener"):this.logger.warn("initOnlineListener no quickReconnect")},oe.forceDisconnect=function(){var Ve=this.socket||{};this.socket=null;try{typeof Ve.removeAllListenersX=="function"&&Ve.removeAllListenersX("info"),typeof Ve.disconnect=="function"&&Ve.disconnect()}catch(ze){this.logger.error("forceDisconnect:: oldSocket error",ze||ze.message)}this.hasLogin=!1}},function(t,r){function e(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var g=Math.random(),y=Math.floor(g*this.jitter*n);n=1&Math.floor(10*g)?n+y:n-y}return 0|Math.min(n,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(n){this.ms=n},e.prototype.setMax=function(n){this.max=n},e.prototype.setJitter=function(n){this.jitter=n}},function(t,r,e){var n=e(703);t.exports=function(g){return g&&g.length?n(g):[]}},function(t,r,e){var n=e(704),g=e(707),y=e(712),i=e(713),k=e(714),L=e(296);t.exports=function($,V,z){var re=-1,oe=g,le=$.length,ue=!0,ie=[],ae=ie;if(z)ue=!1,oe=y;else if(le>=200){var Fe=V?null:k($);if(Fe)return L(Fe);ue=!1,oe=i,ae=new n}else ae=V?[]:ie;e:for(;++re<le;){var de=$[re],Ne=V?V(de):de;if(de=z||de!==0?de:0,ue&&Ne==Ne){for(var Ve=ae.length;Ve--;)if(ae[Ve]===Ne)continue e;V&&ae.push(Ne),ie.push(de)}else oe(ae,Ne,z)||(ae!==ie&&ae.push(Ne),ie.push(de))}return ie}},function(t,r,e){var n=e(267),g=e(705),y=e(706);function i(k){var L=-1,$=k==null?0:k.length;for(this.__data__=new n;++L<$;)this.add(k[L])}i.prototype.add=i.prototype.push=g,i.prototype.has=y,t.exports=i},function(t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(708);t.exports=function(g,y){return!!(g!=null&&g.length)&&n(g,y,0)>-1}},function(t,r,e){var n=e(709),g=e(710),y=e(711);t.exports=function(i,k,L){return k==k?y(i,k,L):n(i,g,L)}},function(t,r){t.exports=function(e,n,g,y){for(var i=e.length,k=g+(y?1:-1);y?k--:++k<i;)if(n(e[k],k,e))return k;return-1}},function(t,r){t.exports=function(e){return e!=e}},function(t,r){t.exports=function(e,n,g){for(var y=g-1,i=e.length;++y<i;)if(e[y]===n)return y;return-1}},function(t,r){t.exports=function(e,n,g){for(var y=-1,i=e==null?0:e.length;++y<i;)if(g(n,e[y]))return!0;return!1}},function(t,r){t.exports=function(e,n){return e.has(n)}},function(t,r,e){var n=e(279),g=e(715),y=e(296),i=n&&1/y(new n([,-0]))[1]==1/0?function(k){return new n(k)}:g;t.exports=i},function(t,r){t.exports=function(){}},function(t,r,e){var n,g=e(9),y=e(82).fn,i=e(35),k=e(199),L=e(0),$=e(12),V=e(48),z=e(200).getLibEnv,re=e(70),oe=e(200).getHostEnvEnum,le=L.notundef;y.genSessionKey=(n={},function(){var ue=this.name;return n[ue]=n[ue]||L.guid()}),y.afterLogin=L.emptyFunc,y.assembleIMLogin=function(){var ue,ie=this.options,ae=ie.account;this.sdkSession=this.genSessionKey();var Fe={appLogin:this.autoconnect?0:1,appKey:ie.appKey,account:ae,token:ie.token,sdkVersion:$.info.sdkVersion,sdkHumanVersion:$.info.sdkHumanVersion,protocolVersion:$.info.protocolVersion,os:re.os.toString()==="[object Object]"?re.os.family:re.os.toString(),browser:re.name+" "+re.version,clientType:$.CLIENTTYPE||16,session:this.sdkSession,deviceId:V.deviceId,isReactNative:$.isRN?1:0,customTag:ie.customTag||""};Fe.userAgent=($.isBrowser?navigator&&navigator.userAgent:"")||"";var de=!1;return de=!(!ie||!ie.privateConf||typeof ie.privateConf.loginSDKTypeParamCompat!="boolean")&&ie.privateConf.loginSDKTypeParamCompat,Fe.userAgent=de?"Native/"+$.info.sdkHumanVersion:g(ue=Fe.userAgent).call(ue,0,299),Fe.libEnv=de?void 0:z(),Fe.sdkType=de?0:oe(),ie.customClientType&&(Fe.customClientType=+ie.customClientType),ie.authType&&(Fe.authType=+ie.authType),ie.loginExt&&(Fe.loginExt=ie.loginExt),Fe},y.notifyLogin=function(ue){this.logger.info("link::notifyLogin: on connect",ue),this.options.onconnect(ue)},y.logout=function(){if(this.doLogout)return this.doLogout=!1,void this.onAuthError(new i("done logout","logout",{disconnectReason:"close",uploadCode:415}),"link::logout");this.isConnected()&&this.onAuthError(new i("done disconnect","logout",{disconnectReason:"close",uploadCode:415}),"link::logout")},y.onKicked=function(ue){var ie=ue.content,ae=ie.from,Fe=ie.reason,de=ie.custom,Ne=ie.customClientType,Ve={reason:this.kickedReasons[Fe]||"unknown",message:this.kickedMessages[Fe]||"未知原因"};le(ae)&&(Ve.from=k.reverseType(ae)),le(de)&&(Ve.custom=de),+Ne>0&&(Ve.customClientType=Ne),this.logger.warn("link::onKicked:",Ve);var ze=new i("被踢了","kicked",{disconnectReason:"kicked",uploadCode:415});L.merge(ze,Ve),this.statusProtector.processEvent("auth/loginLifeCycleKicked",null,Ve),this.onAuthError(ze,"link::onKicked")},y.onAuthError=function(ue,ie){var ae=ue&&ue.code;if(this.logger.error("onAuthError ",ie,ae),/^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(ae))return this.forceDisconnect(),void this.onDisconnect("link::onAuthError::"+ae,"broken");(ue=ue||i.newConnectionError({callFunc:ie,uploadCode:415,disconnectReason:"close"})).callFunc=ue.callFunc||ie||null,this.shouldReconnect=!1,this.markAllCallbackInvalid(ue),this.notifyDisconnect(ue)}},function(t,r,e){var n=e(22),g=e(23),y=e(24),i=e(82).fn,k=e(12),L=e(0);i.processLink=function($){switch($.cmd){case"heartbeat":this.startHeartbeat();break;case"notifyDetect":y(L._get($,"content.notifyDetectTag"))==="object"&&($.content.notifyDetectTag.t3=new Date().getTime(),this.startDetect($))}},i.startHeartbeat=function(){var $=this;$.stopHeartbeat(),$.heartbeatTimer=n(function(){var V;$.sendCmd("heartbeat",null,g(V=$.onHeartbeat).call(V,$))},k.heartbeatInterval)},i.detectHeartbeat=function(){var $;this.stopHeartbeat(),this.sendCmd("heartbeat",null,g($=this.onHeartbeat).call($,this))},i.startDetect=function($){var V=$.content.notifyDetectTag;V.t4=new Date().getTime(),this.sendCmd("uploadDetect",{notifyDetectTag:V})},i.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},i.onHeartbeat=function($){if($){if(this.syncing)return this.logger.warn("onHeartbeat::ignore error in connecting"),void this.startHeartbeat();var V;$.callFunc="link::onHeartbeat",this.onCustomError("heartbeat error",$),this.heartbeatFail++,this.logger.warn("onHeartbeat::error ",$.code,$),$.code==="Error_Timeout"&&(this.heartbeatFail>1?(this.reporterHookLinkKeep.update({code:0,description:"Heartbeat-discovered link failure",operation_type:1,target:this.url}),this.reporterHookLinkKeep.end(!0),this.forceDisconnect(),this.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to heartbeat error")),this.onDisconnect("link::onHeartbeat","broken")):this.sendCmd("heartbeat",null,g(V=this.onHeartbeat).call(V,this)))}else this.heartbeatFail=0},i.checkNetworkAvailable=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?function(){return navigator.onLine}:function(){},i.heartbeat=function(){}},function(t,r,e){var n=e(3),g=e(8),y=e(28),i=e(22),k=e(43),L=e(82).fn,$=e(290),V=e(12),z=e(48);L.processMisc=function(re){switch(re.cmd){case"getSimpleNosToken":re.error||(re.obj=re.content.nosTokens[0]);break;case"getNosToken":re.error||(re.obj=re.content.nosToken);break;case"getGrayscaleConfig":re.error||(re.obj=re.content.appGrayConfigTag);break;case"getMixStorePolicy":re.error||(re.obj=re.content.mixStorePolicyTag);break;case"getMixStoreToken":re.error||(re.obj=re.content.mixStoreTokenTag);break;case"getBackSourceToken":re.error||(re.obj=re.content.backSourceTokenTag);break;case"uploadSdkLogUrl":re.error?this.logger.error("uploadSdkLogUrl::error",re.error):this.logger.info("uploadSdkLogUrl::success",re.obj&&re.obj.url);break;case"notifyUploadLog":re.error||(V.isRN?this.uploadLocalLogRN():V.isBrowser&&this.uploadLocalLogWeb(),this.emitAPI({type:"notifyUploadLog"}));break;case"audioToText":re.error||(re.obj.text=re.content.text);break;case"processImage":re.obj.imageOps=$.reverseImageOps(re.obj.imageOps),re.error||(re.obj={url:re.content.url});break;case"getNosTokenTrans":re.error||(re.obj={nosToken:re.content.nosToken,docId:re.content.docId});break;case"getNosOriginUrl":re.error||(re.obj=re.content.nosFileUrlTag.originUrl);break;case"notifyTransLog":re.error||this.emitAPI({type:"notifyTransLog",obj:re.content.transInfo});break;case"fetchFile":case"fetchFileList":case"removeFile":re.error||(re.obj=re.content);break;case"getServerTime":re.obj=re.content&&re.content.time;break;case"getNosCdnHost":this.getNosCdnHost(re)}},L.uploadLocalLogRN=function(){if(V.isRN&&z.rnfs){var re=z.rnfs,oe=this,le=re.nimIndex,ue=(re.nimIndex+1)%2;re.nimPromise=re.nimPromise.then(function(){return n.all([re.exists(ie(le)),re.exists(ie(ue))])}).then(function(ae){return ae&&(ae[0]||ae[1])?ae[0]&&ae[1]?re.copyFile(ie(ue),ie(2)).then(function(){return re.readFile(ie(le))}).then(function(Fe){return re.appendFile(ie(2),Fe)}):ae[0]?re.copyFile(ie(le),ie(2)):void(ae[1]&&re.copyFile(ie(ue),ie(2))):n.reject()}).then(function(){return new n(function(ae){oe.api.previewFile({filePath:ie(2),done:function(Fe,de){if(n.all([re.unlink(ie(2)),re.unlink(ie(1)),re.unlink(ie(0))]).finally(function(){ae()}),Fe)oe.logger.error("nim::uploadLocalLogRN:previewFile:error",Fe);else{var Ne=de.url;g(Ne).call(Ne,"?")>0?Ne+="&":Ne+="?",Ne+="download="+new Date().getTime()+"_rn.log",oe.api.uploadSdkLogUrl({url:Ne})}}})})}).catch(function(ae){re.unlink(ie(2)).catch(function(){}),oe.logger.error("nim::protocol::uploadLocalLogRN",ae)})}function ie(ae){return re.DocumentDirectoryPath+"/nimlog_"+ae+".log"}},L.uploadLocalLogWeb=function(){var re=this;this.options.dbLog!==!1&&this.logger._local?this.logger._local.fetchLog().then(function(oe){!oe||!oe.logs||y(oe.logs)&&oe.logs.length===0?re.logger.warn("uploadLocalLogWeb::no logs"):re.api.previewFile({blob:new Blob([oe.logs],{type:"text/plain"}),done:function(le,ue){if(le)re.logger.error("uploadLocalLogWeb::previewFile:error",le);else{re.logger.log("uploadLocalLogWeb::previewFile:success",ue);var ie=ue.url;ie+=(g(ie).call(ie,"?")>0?"&":"?")+"download="+new Date().getTime()+"_web.log",re.api.uploadSdkLogUrl({url:ie}),re.logger._local.deleteLogs(oe.time).then(function(){re.logger.log("uploadLocalLogWeb::deleteLogs success")}).catch(function(ae){return re.logger.error("uploadLocalLogWeb::deleteLogs:error ,",ae)})}}})}).catch(function(oe){re.logger.error("uploadLocalLogWeb::fetchLog:error",oe)}):this.logger.warn("uploadLocalLogWeb::no dbLog")},L.getNosCdnHost=function(re){var oe=this,le=re.error;if(le&&(le.callFunc="events::getNosCdnHost",oe.onCustomError("getNosCdnHost","EVENT_GET_NOS_CDN_HOST_ERROR",le)),re.content&&re.content.nosConfigTag){var ue=re.content.nosConfigTag,ie="",ae="";ue.expire!==0&&ue.cdnDomain?ue.expire===-1?(ie=ue.cdnDomain,ae=ue.objectNamePrefix):(ie=ue.cdnDomain,ae=ue.objectNamePrefix,oe.nosCdnHostTimer&&clearTimeout(oe.nosCdnHostTimer),oe.nosCdnHostTimer=i(function(){oe.sendCmd("getNosCdnHost",{})},800*k(ue.expire))):(ie="",ae=""),V.serverNosConfig.cdnDomain=ie,V.serverNosConfig.objectPrefix=ae,V.hasLocalStorage&&(localStorage.setItem("nim_cdn_domain",ie),localStorage.setItem("nim_object_prefix",ae))}}},function(t,r,e){var n=e(11),g=e(28),y=e(82).fn,i=e(0),k=e(291),L=e(109).EMSyncType;y.processAvSignal=function(V){switch(V.cmd){case"signalingCreate":case"signalingDelay":case"signalingClose":case"signalingJoin":case"signalingLeave":case"signalingInvite":case"signalingCancel":case"signalingReject":case"signalingAccept":case"signalingControl":case"signalingSyncMsgRead":case"signalingGetChannelInfo":case"signalingCallEx":break;case"signalingNotify":this.onSignalingNotify(V);break;case"signalingMutilClientSyncNotify":this.onSignalingMutilClientSyncNotify(V);break;case"signalingUnreadMessageSyncNotify":this.onSignalingUnreadMessageSyncNotify(V);break;case"signalingChannelsSyncNotify":this.onSignalingMembersSyncNotify(V);break;default:this.logger.warn("avSignal::unhandled cmd:",V.cmd)}};var $=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(V.needPush&&(V.needPush=V.needPush==="1"),V.needBadge&&(V.needBadge=V.needBadge==="1"),V.channelInValid&&(V.channelInValid=V.channelInValid==="1"),V.attach){var z=JSON.parse(V.attach);V.eventType=k.parseAvSignalType(z.type)}if(V.members){var re=JSON.parse(V.members);V.members=n(re).call(re,function(oe){return k.parseAvSignalMember(oe)})}return V};y.onSignalingNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{V.raw&&V.raw.r&&V.raw.r.length&&V.content&&V.content.avSignalTag&&(V.content.avSignalTag.msgid="0");var re=V.content.avSignalTag;re=g(re)?n(re).call(re,function(oe){return $(oe)}):$(re),this.emitAPI({type:"signalingNotify",obj:re}),i.isFunction(this.options.onSignalingNotify)&&this.options.onSignalingNotify(re)}},y.onSignalingMutilClientSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;re=g(re)?n(re).call(re,function(oe){return $(oe)}):$(re),this.emitAPI({type:"signalingMutilClientSyncNotify",obj:re}),i.isFunction(this.options.onSignalingMutilClientSyncNotify)&&this.options.onSignalingMutilClientSyncNotify(re)}},y.onSignalingUnreadMessageSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;g(re)&&(re=n(re).call(re,function(oe){return $(oe)})),this.emitAPI({type:"signalingUnreadMessageSyncNotify",obj:re}),this.reporterHook.emit("reporter/syncItemComplete",L.kSyncType15_13),i.isFunction(this.options.onSignalingUnreadMessageSyncNotify)&&this.options.onSignalingUnreadMessageSyncNotify(re)}},y.onSignalingMembersSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;g(re)||(re=[re]),re=n(re).call(re,function(oe){return $(oe)}),this.emitAPI({type:"signalingChannelsSyncNotify",obj:re}),i.isFunction(this.options.onSignalingMembersSyncNotify)&&this.options.onSignalingMembersSyncNotify(re)}}},function(t,r,e){var n=e(6),g=e(23),y=e(0),i=e(82).fn,k=e(92),L=e(285);i.adaptersRequest=function($){var V=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=arguments.length>2?arguments[2]:void 0,oe=z.onerror||function(){},le=new Date().getTime(),ue=y.get(re,"exception_service")||0;return z.onerror=function(){oe.apply(void 0,arguments);var ie=arguments.length<=0?void 0:arguments[0];V.reporter.reportTraceStart("exceptions",{user_id:V.account,trace_id:y.get(self,"socket.socket.sessionid"),start_time:le,action:1,exception_service:ue}),V.reporter.reportTraceUpdateV2("exceptions",{code:typeof ie.status=="number"?ie.status:typeof ie.code=="number"?ie.code:0,description:ie.message||"".concat(ie.code),operation_type:0,target:$,context:z?n(z):"",net_connect:V.checkNetworkAvailable()}),V.reporter.reportTraceEnd("exceptions",1)},k($,z)},i.adaptersUploadFile=function($,V){var z,re=this;$.adaptersRequest=g(z=i.adaptersRequest).call(z,this);var oe=new Date().getTime();return $.errorHook=function(le){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(le){re.reporter.reportTraceStart("exceptions",{user_id:re.account,trace_id:y.get(self,"socket.socket.sessionid"),start_time:oe,action:1,exception_service:ue.provider==="s3"?4:3});var ie=ue.url||$.url;le.bucket&&(ie=n(le)),re.reporter.reportTraceUpdateV2("exceptions",{code:typeof le.status=="number"?le.status:typeof le.code=="number"?le.code:0,description:le.message||"".concat(le.code),operation_type:1,target:ie,net_connect:re.checkNetworkAvailable()}),re.reporter.reportTraceEnd("exceptions",1)}},new L($,this,V)}},function(t,r,e){e(298);var n,g,y,i=e(42),k=e(56),L=e(34),$=e(2),V=e(3),z=e(5),re=e(22),oe=e(15),le=e(9),ue=e(4),ie=e(24);y=function(){function ae(Ne,Ve){for(var ze=0;ze<Ve.length;ze++){var jt=Ve[ze];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),i(Ne,jt.key,jt)}}var Fe={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},de=function(){};return function(){function Ne(jt){(function(kt,Et){if(!(kt instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,Ne),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Fe,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=k(),this.timer=null,this.setConfig(jt),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}var Ve,ze;return Ve=Ne,(ze=[{key:"setConfig",value:function(jt){var kt=L({},this.reportConfig.common,jt.common);this.reportConfig=L({},this.reportConfig,jt),this.reportConfig.common=kt,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(jt,kt){var Et=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(jt,L({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},kt)).catch(function(lr){var tr,or;(or=(tr=Et.reportConfig)===null||tr===void 0?void 0:tr.logger)===null||or===void 0||or.warn("Reporter immediately upload failed",lr)})}},{key:"report",value:function(jt,kt){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Et.priority||(Et.priority=this.getEventPriority(jt,kt)),this.reportConfig.isDataReportEnable&&jt){var lr=k();Et.priority==="HIGH"?this.highPriorityMsgList.push({module:jt,msg:kt,createTime:lr}):Et.priority==="NORMAL"?this.msgList.push({module:jt,msg:kt,createTime:lr}):Et.priority==="LOW"&&this.lowPriorityMsgList.push({module:jt,msg:kt,createTime:lr}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(jt,kt){if(this.reportConfig.isDataReportEnable&&jt&&!this.traceMsgCache[jt]){var Et=L(L({start_time:k()},kt),{extension:[]});this.traceMsgCache[jt]=Et}}},{key:"reportTraceUpdate",value:function(jt){}},{key:"reportTraceUpdateV2",value:function(jt,kt,Et){var lr,tr=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[jt]){var or=this.traceMsgCache[jt].extension,dr=or.length,cr=new Date().getTime();dr===0?kt.duration=cr-this.traceMsgCache[jt].start_time:or[dr-1].end_time?kt.duration=cr-or[dr-1].end_time:kt.duration=cr-this.traceMsgCache[jt].start_time,or.push(L({end_time:cr},kt));var nr=or.length-1;Et!=null&&Et.asyncParams&&((lr=this.traceMsgCache[jt]).asyncPromiseArray||(lr.asyncPromiseArray=[]),this.traceMsgCache[jt].asyncPromiseArray.push(Et.asyncParams.then(function(ur){tr.traceMsgCache[jt]&&tr.traceMsgCache[jt].extension[nr]&&L(tr.traceMsgCache[jt].extension[nr],ur)})))}}},{key:"reportTraceEnd",value:function(jt){var kt,Et=this,lr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[jt])if(jt!=="nos"||lr===!1)if(typeof lr=="boolean"?this.traceMsgCache[jt].succeed=!!lr:this.traceMsgCache[jt].state=lr,this.traceMsgCache[jt].duration=k()-this.traceMsgCache[jt].start_time,$(kt=this.traceMsgCache[jt].extension).call(kt,function(dr){delete dr.end_time}),this.traceMsgCache[jt].asyncPromiseArray){var tr=this.traceMsgCache[jt],or=function(){tr===Et.traceMsgCache[jt]&&(delete Et.traceMsgCache[jt].asyncPromiseArray,Et.report(jt,Et.traceMsgCache[jt],{priority:Et.getEventPriority(jt,Et.traceMsgCache[jt])}),Et.traceMsgCache[jt]=null)};V.all(this.traceMsgCache[jt].asyncPromiseArray).then(or).catch(or)}else this.report(jt,this.traceMsgCache[jt],{priority:this.getEventPriority(jt,this.traceMsgCache[jt])}),this.traceMsgCache[jt]=null;else this.traceMsgCache[jt]=null}},{key:"getEventPriority",value:function(jt,kt){if(jt==="exceptions"){if(kt.action===0||kt.action===2||kt.action===1&&kt.exception_service!==0)return"HIGH"}else if(jt==="msgReceive"||jt==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(jt){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[jt]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var jt,kt=this;this.reportConfig.isDataReportEnable&&($(jt=z(this.traceMsgCache)).call(jt,function(Et){kt.reportTraceEnd(Et,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=de,this.report=de,this.reportTraceStart=de,this.reportTraceUpdate=de,this.reportTraceEnd=de,this.pause=de,this.restore=de,this.destroy=de,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var jt,kt,Et=this;if(!this.loading){this.loading=!0;var lr=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:lr.dev_id,sdkVer:lr.sdk_ver,platform:lr.platform,appkey:lr.app_key},timeout:this.reportConfig.timeout}).then(function(tr){var or,dr;if(!Et.isDestroyed){if(tr.status===200&&tr.data&&tr.data.code===200){var cr=tr.data.data||{};Et.reportConfig.maxSize=cr.maxSize>1e3?1e3:cr.maxSize,Et.reportConfig.maxInterval=cr.maxInterval>1e4?1e4:cr.maxInterval,Et.reportConfig.maxInterval=cr.maxInterval<10?10:cr.maxInterval,Et.reportConfig.minInterval=cr.minInterval<2?2:cr.minInterval,Et.reportConfig.maxDelay=cr.maxDelay||300,Et.reportConfig.maxInterval=1e3*Et.reportConfig.maxInterval,Et.reportConfig.minInterval=1e3*Et.reportConfig.minInterval,Et.reportConfig.maxDelay=1e3*Et.reportConfig.maxDelay,Et.isUploadEnable=!0,Et.initConfigLoaded=!0,Et.loading=!1,Et.reportHeartBeat()}(dr=(or=Et.reportConfig)===null||or===void 0?void 0:or.logger)===null||dr===void 0||dr.log("Get reporter upload config success")}}).catch(function(tr){var or,dr;Et.loading=!1,(dr=(or=Et.reportConfig)===null||or===void 0?void 0:or.logger)===null||dr===void 0||dr.error("Get reporter upload config failed",tr)})}catch(tr){this.loading=!1,(kt=(jt=this.reportConfig)===null||jt===void 0?void 0:jt.logger)===null||kt===void 0||kt.error("Exec reporter request failed",tr)}}}},{key:"reportHeartBeat",value:function(){var jt=this;this.isDestroyed||(this.timer=re(function(){jt.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var jt=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;k()-this.lastReportTime>=jt&&this.upload()}}},{key:"getUploadMsg",value:function(){var jt,kt,Et,lr,tr,or,dr=this,cr={},nr=k();this.highPriorityMsgList=oe(jt=this.highPriorityMsgList).call(jt,function(Nr){return nr-Nr.createTime<dr.reportConfig.maxDelay}),this.msgList=oe(kt=this.msgList).call(kt,function(Nr){return nr-Nr.createTime<dr.reportConfig.maxDelay}),this.lowPriorityMsgList=oe(Et=this.lowPriorityMsgList).call(Et,function(Nr){return nr-Nr.createTime<dr.reportConfig.maxDelay}),this.cacheMsgList=oe(lr=this.cacheMsgList).call(lr,function(Nr){return nr-Nr.createTime<dr.reportConfig.maxDelay});var ur=le(tr=this.highPriorityMsgList).call(tr,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=le(or=this.highPriorityMsgList).call(or,ur.length),ur.length<this.reportConfig.maxSize){var ar,gr,pr=this.reportConfig.maxSize-ur.length;ur=ue(ur).call(ur,le(ar=this.msgList).call(ar,0,pr)),this.msgList=le(gr=this.msgList).call(gr,pr)}if(ur.length<this.reportConfig.maxSize){var yr,Sr,wr=this.reportConfig.maxSize-ur.length;ur=ue(ur).call(ur,le(yr=this.lowPriorityMsgList).call(yr,0,wr)),this.lowPriorityMsgList=le(Sr=this.lowPriorityMsgList).call(Sr,wr)}if(ur.length<this.reportConfig.maxSize){var Mr,mr,_r=this.reportConfig.maxSize-ur.length;ur=ue(ur).call(ur,le(Mr=this.cacheMsgList).call(Mr,0,_r)),this.cacheMsgList=le(mr=this.cacheMsgList).call(mr,_r)}return $(ur).call(ur,function(Nr){cr[Nr.module]?cr[Nr.module].push(Nr.msg):cr[Nr.module]=[Nr.msg]}),{uploadMsgArr:ur,uploadMsg:cr}}},{key:"upload",value:function(){var jt,kt,Et=this;if(this.isUploadEnable&&!(this.lastReportTime&&k()-this.lastReportTime<this.reportConfig.minInterval)){var lr=this.getUploadMsg(),tr=lr.uploadMsgArr,or=lr.uploadMsg;if(tr.length){this.lastReportTime=k();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:or},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(dr){var cr,nr,ur,ar;Et.cacheMsgList=le(cr=ue(nr=Et.cacheMsgList).call(nr,tr)).call(cr,0,Et.reportConfig.cacheMaxSize),(ar=(ur=Et.reportConfig)===null||ur===void 0?void 0:ur.logger)===null||ar===void 0||ar.warn("Reporter upload failed",dr)})}catch(dr){(kt=(jt=this.reportConfig)===null||jt===void 0?void 0:jt.logger)===null||kt===void 0||kt.warn("Exec reporter request failed",dr)}clearTimeout(this.timer),this.reportHeartBeat()}}}}])&&ae(Ve.prototype,ze),i(Ve,"prototype",{writable:!1}),Ne}()},ie(r)==="object"&&t!==void 0?t.exports=y():(g=typeof(n=y)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=g)},function(t,r,e){t.exports=e(723)},function(t,r,e){e(724);var n=e(725);t.exports=n},function(t,r,e){e(299)},function(t,r,e){var n=e(726);t.exports=n},function(t,r,e){var n=e(727);t.exports=n},function(t,r,e){e(299),t.exports=e(16)},function(t,r,e){var n,g,y,i=e(45),k=e(44),L=e(153),$=e(154),V=e(122),z=e(729),re=(e(298),e(2)),oe=e(5),le=e(4),ue=e(3),ie=e(22),ae=e(6),Fe=e(152),de=e(24);function Ne(Ve){var ze=function(){if(typeof Reflect>"u"||!Fe||Fe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Fe(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var jt,kt=V(Ve);if(ze){var Et=V(this).constructor;jt=Fe(kt,arguments,Et)}else jt=kt.apply(this,arguments);return $(this,jt)}}y=function(){function Ve(jt){if(jt){var kt,Et="";return re(kt=oe(jt)).call(kt,function(lr,tr){var or;Et+=tr===0?"?":"&",Et+=le(or="".concat(lr,"=")).call(or,jt[lr])}),Et}return""}var ze=function(jt){L(Et,jt);var kt=Ne(Et);function Et(lr,tr,or,dr){var cr;return k(this,Et),(cr=kt.call(this,or)).source=lr,cr.code=tr,cr.desc=or,cr.detail=dr||{},cr}return i(Et)}(z(Error));return function(jt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{dataType:"json",method:"GET",timeout:5e3},Et=kt.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",lr=kt.method==="GET"?Ve(kt.params):"";return new ue(function(tr,or){if(window.XMLHttpRequest){var dr,cr,nr=new XMLHttpRequest;if(nr.onreadystatechange=function(){if(nr.readyState===4)if(nr.status===200){try{cr=JSON.parse(nr.response||"{}")}catch{cr=nr.response}tr({status:nr.status,data:cr})}else ie(function(){var ar;or(new ze(1,nr.status,le(ar="readyState: ".concat(nr.readyState,"; statusText: ")).call(ar,nr.statusText)))},0)},nr.open(kt.method,le(dr="".concat(jt)).call(dr,lr)),nr.timeout=kt.timeout||5e3,nr.setRequestHeader("Content-Type",Et),kt.headers)for(var ur in kt.headers)nr.setRequestHeader(ur,kt.headers[ur]);nr.ontimeout=function(ar){or(new ze(1,408,ar&&ar.message?ar.message:"request timeout"))},nr.send(ae(kt.data))}else or(new ze(2,10400,"request no suppout"))})}},de(r)==="object"&&t!==void 0?t.exports=y():(g=typeof(n=y)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=g)},function(t,r,e){var n=e(730),g=e(195),y=e(122),i=e(196),k=e(769),L=e(770);function $(V){var z=typeof n=="function"?new n:void 0;return t.exports=$=function(re){if(re===null||!k(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(z!==void 0){if(z.has(re))return z.get(re);z.set(re,oe)}function oe(){return L(re,arguments,y(this).constructor)}return oe.prototype=g(re.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),i(oe,re)},t.exports.__esModule=!0,t.exports.default=t.exports,$(V)}t.exports=$,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(731)},function(t,r,e){t.exports=e(732)},function(t,r,e){var n=e(733);e(744),e(746),e(748),e(750),e(751),e(753),e(754),e(755),e(756),e(757),e(759),e(760),e(761),e(762),e(763),e(764),e(765),e(766),e(767),e(768),t.exports=n},function(t,r,e){var n=e(734);t.exports=n},function(t,r,e){var n=e(735);e(75),t.exports=n},function(t,r,e){e(90),e(736),e(102),e(118);var n=e(14);t.exports=n.Map},function(t,r,e){e(737)},function(t,r,e){e(738)("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},e(742))},function(t,r,e){var n=e(1),g=e(16),y=e(300),i=e(7),k=e(65),L=e(50),$=e(178),V=e(17),z=e(30),re=e(89),oe=e(40).f,le=e(69).forEach,ue=e(29),ie=e(103),ae=ie.set,Fe=ie.getterFor;t.exports=function(de,Ne,Ve){var ze,jt=de.indexOf("Map")!==-1,kt=de.indexOf("Weak")!==-1,Et=jt?"set":"add",lr=g[de],tr=lr&&lr.prototype,or={};if(ue&&V(lr)&&(kt||tr.forEach&&!i(function(){new lr().entries().next()}))){var dr=(ze=Ne(function(nr,ur){ae($(nr,dr),{type:de,collection:new lr}),ur!=null&&L(ur,nr[Et],{that:nr,AS_ENTRIES:jt})})).prototype,cr=Fe(de);le(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(nr){var ur=nr=="add"||nr=="set";!(nr in tr)||kt&&nr=="clear"||k(dr,nr,function(ar,gr){var pr=cr(this).collection;if(!ur&&kt&&!z(ar))return nr=="get"&&void 0;var yr=pr[nr](ar===0?0:ar,gr);return ur?this:yr})}),kt||oe(dr,"size",{configurable:!0,get:function(){return cr(this).collection.size}})}else ze=Ve.getConstructor(Ne,de,jt,Et),y.enable();return re(ze,de,!1,!0),or[de]=ze,n({global:!0,forced:!0},or),kt||Ve.setStrong(ze,de,jt),ze}},function(t,r,e){var n=e(7),g=e(30),y=e(71),i=e(740),k=Object.isExtensible,L=n(function(){});t.exports=L||i?function($){return!!g($)&&(!i||y($)!="ArrayBuffer")&&(!k||k($))}:k},function(t,r,e){var n=e(7);t.exports=n(function(){if(typeof ArrayBuffer=="function"){var g=new ArrayBuffer(8);Object.isExtensible(g)&&Object.defineProperty(g,"a",{value:8})}})},function(t,r,e){var n=e(7);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,r,e){var n=e(40).f,g=e(88),y=e(743),i=e(36),k=e(178),L=e(98),$=e(50),V=e(176),z=e(177),re=e(244),oe=e(29),le=e(300).fastKey,ue=e(103),ie=ue.set,ae=ue.getterFor;t.exports={getConstructor:function(Fe,de,Ne,Ve){var ze=Fe(function(tr,or){k(tr,jt),ie(tr,{type:de,index:g(null),first:void 0,last:void 0,size:0}),oe||(tr.size=0),L(or)||$(or,tr[Ve],{that:tr,AS_ENTRIES:Ne})}),jt=ze.prototype,kt=ae(de),Et=function(tr,or,dr){var cr,nr,ur=kt(tr),ar=lr(tr,or);return ar?ar.value=dr:(ur.last=ar={index:nr=le(or,!0),key:or,value:dr,previous:cr=ur.last,next:void 0,removed:!1},ur.first||(ur.first=ar),cr&&(cr.next=ar),oe?ur.size++:tr.size++,nr!=="F"&&(ur.index[nr]=ar)),tr},lr=function(tr,or){var dr,cr=kt(tr),nr=le(or);if(nr!=="F")return cr.index[nr];for(dr=cr.first;dr;dr=dr.next)if(dr.key==or)return dr};return y(jt,{clear:function(){for(var tr=kt(this),or=tr.index,dr=tr.first;dr;)dr.removed=!0,dr.previous&&(dr.previous=dr.previous.next=void 0),delete or[dr.index],dr=dr.next;tr.first=tr.last=void 0,oe?tr.size=0:this.size=0},delete:function(tr){var or=kt(this),dr=lr(this,tr);if(dr){var cr=dr.next,nr=dr.previous;delete or.index[dr.index],dr.removed=!0,nr&&(nr.next=cr),cr&&(cr.previous=nr),or.first==dr&&(or.first=cr),or.last==dr&&(or.last=nr),oe?or.size--:this.size--}return!!dr},forEach:function(tr){for(var or,dr=kt(this),cr=i(tr,arguments.length>1?arguments[1]:void 0);or=or?or.next:dr.first;)for(cr(or.value,or.key,this);or&&or.removed;)or=or.previous},has:function(tr){return!!lr(this,tr)}}),y(jt,Ne?{get:function(tr){var or=lr(this,tr);return or&&or.value},set:function(tr,or){return Et(this,tr===0?0:tr,or)}}:{add:function(tr){return Et(this,tr=tr===0?0:tr,tr)}}),oe&&n(jt,"size",{get:function(){return kt(this).size}}),ze},setStrong:function(Fe,de,Ne){var Ve=de+" Iterator",ze=ae(de),jt=ae(Ve);V(Fe,de,function(kt,Et){ie(this,{type:Ve,target:kt,state:ze(kt),kind:Et,last:void 0})},function(){for(var kt=jt(this),Et=kt.kind,lr=kt.last;lr&&lr.removed;)lr=lr.previous;return kt.target&&(kt.last=lr=lr?lr.next:kt.state.first)?z(Et=="keys"?lr.key:Et=="values"?lr.value:[lr.key,lr.value],!1):(kt.target=void 0,z(void 0,!0))},Ne?"entries":"values",!Ne,!0),re(de)}}},function(t,r,e){var n=e(74);t.exports=function(g,y,i){for(var k in y)i&&i.unsafe&&g[k]?g[k]=y[k]:n(g,k,y[k],i);return g}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{from:e(745)})},function(t,r,e){var n=e(36),g=e(20),y=e(32),i=e(179),k=e(98),L=e(50),$=[].push;t.exports=function(V){var z,re,oe,le,ue=arguments.length,ie=ue>1?arguments[1]:void 0;return i(this),(z=ie!==void 0)&&y(ie),k(V)?new this:(re=[],z?(oe=0,le=n(ie,ue>2?arguments[2]:void 0),L(V,function(ae){g($,re,le(ae,oe++))})):L(V,$,{that:re}),new this(re))}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{of:e(747)})},function(t,r,e){var n=e(104);t.exports=function(){return new this(n(arguments))}},function(t,r,e){var n=e(1),g=e(39),y=e(67).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var i,k=g(this),L=!0,$=0,V=arguments.length;$<V;$++)i=y(k,arguments[$]),L=L&&i;return!!L}})},function(t,r){t.exports=function(e,n){return n==1?function(g,y){return g[e](y)}:function(g,y,i){return g[e](y,i)}}},function(t,r,e){var n=e(1),g=e(39),y=e(67),i=y.get,k=y.has,L=y.set;n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function($,V){var z,re,oe=g(this);return k(oe,$)?(z=i(oe,$),"update"in V&&(z=V.update(z,$,oe),L(oe,$,z)),z):(re=V.insert($,oe),L(oe,$,re),re)}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0);return i(L,function(V,z){if(!$(V,z,L))return!1},!0)!==!1}})},function(t,r,e){var n=e(20);t.exports=function(g,y,i){for(var k,L,$=i||g.next;!(k=n($,g)).done;)if((L=y(k.value))!==void 0)return L}},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(67),k=e(62),L=i.Map,$=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),oe=new L;return k(z,function(le,ue){re(le,ue,z)&&$(oe,ue,le)}),oe}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0),V=i(L,function(z,re){if($(z,re,L))return{value:z}},!0);return V&&V.value}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0),V=i(L,function(z,re){if($(z,re,L))return{key:re}},!0);return V&&V.key}})},function(t,r,e){var n=e(1),g=e(20),y=e(13),i=e(17),k=e(32),L=e(50),$=e(67).Map,V=y([].push);n({target:"Map",stat:!0,forced:!0},{groupBy:function(z,re){var oe=new(i(this)?this:$);k(re);var le=k(oe.has),ue=k(oe.get),ie=k(oe.set);return L(z,function(ae){var Fe=re(ae);g(le,oe,Fe)?V(g(ue,oe,Fe),ae):g(ie,oe,Fe,[ae])}),oe}})},function(t,r,e){var n=e(1),g=e(758),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(k){return i(y(this),function(L){if(g(L,k))return!0},!0)===!0}})},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(1),g=e(20),y=e(50),i=e(17),k=e(32),L=e(67).Map;n({target:"Map",stat:!0,forced:!0},{keyBy:function($,V){var z=new(i(this)?this:L);k(V);var re=k(z.set);return y($,function(oe){g(re,z,V(oe),oe)}),z}})},function(t,r,e){var n=e(1),g=e(39),y=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(i){var k=y(g(this),function(L,$){if(L===i)return{key:$}},!0);return k&&k.key}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(67),k=e(62),L=i.Map,$=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),oe=new L;return k(z,function(le,ue){$(oe,re(le,ue,z),le)}),oe}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(67),k=e(62),L=i.Map,$=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),oe=new L;return k(z,function(le,ue){$(oe,ue,re(le,ue,z))}),oe}})},function(t,r,e){var n=e(1),g=e(39),y=e(50),i=e(67).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(k){for(var L=g(this),$=arguments.length,V=0;V<$;)y(arguments[V++],function(z,re){i(L,z,re)},{AS_ENTRIES:!0});return L}})},function(t,r,e){var n=e(1),g=e(32),y=e(39),i=e(62),k=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(L){var $=y(this),V=arguments.length<2,z=V?void 0:arguments[1];if(g(L),i($,function(re,oe){V?(V=!1,z=re):z=L(z,re,oe,$)}),V)throw k("Reduce of empty map with no initial value");return z}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0);return i(L,function(V,z){if($(V,z,L))return!0},!0)===!0}})},function(t,r,e){var n=e(1),g=e(32),y=e(39),i=e(67),k=TypeError,L=i.get,$=i.has,V=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(z,re){var oe=y(this),le=arguments.length;g(re);var ue=$(oe,z);if(!ue&&le<3)throw k("Updating absent value");var ie=ue?L(oe,z):g(le>2?arguments[2]:void 0)(z,oe);return V(oe,z,re(ie,z,oe)),oe}})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,forced:!0},{upsert:e(301)})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:e(301)})},function(t,r,e){var n=e(194);t.exports=function(g){var y;return n(y=Function.toString.call(g)).call(y,"[native code]")!==-1},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(159),g=e(302),y=e(196),i=e(774);function k(L,$,V){var z;return i()?(t.exports=k=n(z=g).call(z),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=k=function(re,oe,le){var ue=[null];ue.push.apply(ue,oe);var ie=new(n(Function).apply(re,ue));return le&&y(ie,le.prototype),ie},t.exports.__esModule=!0,t.exports.default=t.exports),k.apply(null,arguments)}t.exports=k,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(772)},function(t,r,e){var n=e(773);t.exports=n},function(t,r,e){var n=e(286);t.exports=n},function(t,r,e){var n=e(302);t.exports=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(15),g=e(0),y=e(155),i=g.merge({},y.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,updatePushToken:1,appBackground:2,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncOfflineNetcallMsgs:8,syncRoamingMsgs:9,syncMsgReceipts:12,syncRobots:15,syncBroadcastMsgs:16,syncSuperTeamRoamingMsgs:17,syncOfflineSuperTeamSysMsgs:18,syncDeleteSuperTeamMsgOfflineRoaming:19,syncDeleteMsgSelf:21,syncSessionsWithMoreRoaming:22,syncStickTopSessions:23,syncSessionHistoryMsgsDelete:24,syncSessionReliableInfo:25},sync:{id:5,sync:1,syncTeamMembers:2,syncSuperTeamMembers:3},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16,markSessionAckBatch:25,broadcastMsg:17,clearServerHistoryMsgs:18,getServerSessions:19,getServerSession:20,updateServerSession:21,deleteServerSessions:22,deleteMsgSelf:23,deleteMsgSelfBatch:24,msgFtsInServer:26,msgFtsInServerByTiming:27,onClearServerHistoryMsgs:118,syncUpdateServerSession:121,onDeleteMsgSelf:123,onDeleteMsgSelfBatch:124},msgExtend:{id:23,getThreadMsgs:1,getMsgsByIdServer:2,addQuickComment:3,deleteQuickComment:4,onQuickComment:5,onDeleteQuickComment:6,getQuickComments:7,addCollect:8,deleteCollects:9,updateCollect:10,getCollects:11,addStickTopSession:12,deleteStickTopSession:13,updateStickTopSession:14,addMsgPin:15,updateMsgPin:16,deleteMsgPin:17,onAddMsgPin:18,onUpdateMsgPin:19,onDeleteMsgPin:20,getMsgPins:21,syncAddQuickComment:103,syncDeleteQuickComment:104,syncAddStickTopSession:112,syncDeleteStickTopSession:113,syncUpdateStickTopSession:114,syncAddMsgPin:115,syncUpdateMsgPin:116,syncDeleteMsgPin:117},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,sendTeamMsgReceipt:28,getTeamMsgReads:29,getTeamMsgReadAccounts:30,notifyTeamMsgReads:31,muteTeamAll:32,getTeamMemberInvitorAccid:33,getTeamsById:34,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},superTeam:{id:21,sendSuperTeamMsg:2,superTeamMsg:3,addSuperTeamMembers:5,removeSuperTeamMembers:6,leaveSuperTeam:7,updateSuperTeam:8,getSuperTeam:9,getSuperTeams:12,updateInfoInSuperTeam:10,getMySuperTeamMembers:11,getSuperTeamMembers:13,getSuperTeamHistoryMsgs:14,getSuperTeamMembersByJoinTime:15,sendSuperTeamCustomSysMsg:16,deleteSuperTeamMsg:17,superTeamMsgDelete:18,superTeamCustomSysMsg:19,applySuperTeam:20,passSuperTeamApply:21,rejectSuperTeamApply:22,acceptSuperTeamInvite:23,rejectSuperTeamInvite:24,markSuperTeamSessionAck:25,addSuperTeamManagers:26,removeSuperTeamManagers:27,updateSuperTeamMute:28,updateSuperTeamMembersMute:29,updateNickInSuperTeam:30,transferSuperTeam:31,markSuperTeamSessionsAck:32,getSuperTeamMembersByAccounts:33,getMutedSuperTeamMembers:34,syncMySuperTeamMembers:111,syncSuperTeams:109,syncSuperTeamMembers:113,syncCreateSuperTeam:101,syncSendSuperTeamMsg:102,syncUpdateSuperTeamMember:110,syncDeleteSuperTeamMsg:117},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7},eventService:{id:14,publishEvent:1,pushEvent:2,subscribeEvent:3,unSubscribeEventsByAccounts:4,unSubscribeEventsByType:5,querySubscribeEventsByAccounts:6,querySubscribeEventsByType:7,pushEvents:9},proxyService:{id:22,httpProxy:1,onProxyMsg:2},qchat:{id:24,getQChatAddress:1}}),k=g.merge({},y.cmdConfig,{login:{sid:i.auth.id,cid:i.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:i.auth.id,cid:i.auth.logout},kick:{sid:i.auth.id,cid:i.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},updatePushToken:{sid:i.user.id,cid:i.user.updatePushToken,params:[{type:"String",name:"tokenName"},{type:"String",name:"token"},{type:"Int",name:"pushkit"}]},appBackground:{sid:i.user.id,cid:i.user.appBackground,params:[{type:"Bool",name:"isBackground"},{type:"Int",name:"badge"}]},markInBlacklist:{sid:i.user.id,cid:i.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},getBlacklist:{sid:i.user.id,cid:i.user.getBlacklist,params:[]},markInMutelist:{sid:i.user.id,cid:i.user.markInMutelist,params:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},getMutelist:{sid:i.user.id,cid:i.user.getMutelist,params:[]},getRelations:{sid:i.user.id,cid:i.user.getRelations,params:[{type:"Long",name:"timetag"}]},getUsers:{sid:i.user.id,cid:i.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:i.user.id,cid:i.user.updateMyInfo,params:[{type:"Property",name:"user"},{type:"Property",name:"antispamTag"}]},updateDonnop:{sid:i.user.id,cid:i.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:i.notify.id,cid:i.notify.markRead,params:[{type:"Long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:i.notify.id,cid:i.notify.batchMarkRead,params:[{type:"Byte",name:"sid"},{type:"Byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:i.sync.id,cid:i.sync.sync,isAwaitable:!1,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:i.sync.id,cid:i.sync.syncTeamMembers,params:[]},syncSuperTeamMembers:{sid:i.sync.id,cid:i.sync.syncSuperTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:i.msg.id,cid:i.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:i.msg.id,cid:i.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},sendCustomSysMsg:{sid:i.msg.id,cid:i.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:i.msg.id,cid:i.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"String",name:"keyword"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},getSessions:{sid:i.msg.id,cid:i.msg.getSessions,params:[{type:"Long",name:"time"}]},deleteSessions:{sid:i.msg.id,cid:i.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:i.msg.id,cid:i.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:i.msg.id,cid:i.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:i.msg.id,cid:i.msg.markSessionAck,params:[{type:"Byte",name:"scene"},{type:"String",name:"to"},{type:"Long",name:"timetag"}]},markSessionAckBatch:{sid:i.msg.id,cid:i.msg.markSessionAckBatch,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},clearServerHistoryMsgs:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParams"}]},clearServerHistoryMsgsWithSync:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParamsWithSync"}]},msgFtsInServer:{sid:i.msg.id,cid:i.msg.msgFtsInServer,params:[{type:"Property",name:"msgFullSearchRequestTag"}]},msgFtsInServerByTiming:{sid:i.msg.id,cid:i.msg.msgFtsInServerByTiming,params:[{type:"Property",name:"msgTimingFullSearchRequestTag"}]},onClearServerHistoryMsgs:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs},getServerSessions:{sid:i.msg.id,cid:i.msg.getServerSessions,params:[{type:"Property",name:"sessionReqTag"}]},getServerSession:{sid:i.msg.id,cid:i.msg.getServerSession,params:[{type:"Property",name:"session"}]},updateServerSession:{sid:i.msg.id,cid:i.msg.updateServerSession,params:[{type:"Property",name:"session"}]},deleteServerSessions:{sid:i.msg.id,cid:i.msg.deleteServerSessions,params:[{type:"PropertyArray",name:"sessions",entity:"session"}]},deleteMsgSelf:{sid:i.msg.id,cid:i.msg.deleteMsgSelf,params:[{type:"Property",name:"deleteMsgSelfTag"}]},deleteMsgSelfBatch:{sid:i.msg.id,cid:i.msg.deleteMsgSelfBatch,params:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},onDeleteMsgSelf:{sid:i.msg.id,cid:i.msg.onDeleteMsgSelf},onDeleteMsgSelfBatch:{sid:i.msg.id,cid:i.msg.onDeleteMsgSelfBatch},sendSuperTeamMsg:{sid:i.superTeam.id,cid:i.superTeam.sendSuperTeamMsg,params:[{type:"Property",name:"msg"}]},addSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.addSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.removeSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},leaveSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.leaveSuperTeam,params:[{type:"Long",name:"teamId"}]},updateSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},getSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeam,params:[{type:"Long",name:"teamId"}]},getSuperTeams:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeams,params:[{type:"Long",name:"timetag"}]},getSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}]},updateInfoInSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateInfoInSuperTeam,params:[{type:"Property",name:"superTeamMember"},{type:"Property",name:"teamSpecialFollowUpdateTag"}]},getSuperTeamHistoryMsgs:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamHistoryMsgs,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},applySuperTeam:{sid:i.superTeam.id,cid:i.superTeam.applySuperTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}]},passSuperTeamApply:{sid:i.superTeam.id,cid:i.superTeam.passSuperTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:i.superTeam.id,cid:i.superTeam.rejectSuperTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:i.superTeam.id,cid:i.superTeam.acceptSuperTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:i.superTeam.id,cid:i.superTeam.rejectSuperTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},markSuperTeamSessionAck:{sid:i.superTeam.id,cid:i.superTeam.markSuperTeamSessionAck,params:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},addSuperTeamManagers:{sid:i.superTeam.id,cid:i.superTeam.addSuperTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:i.superTeam.id,cid:i.superTeam.removeSuperTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateSuperTeamMute:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeamMute,params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},updateSuperTeamMembersMute:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeamMembersMute,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateNickInSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateNickInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},transferSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.transferSuperTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Bool",name:"leave"}]},markSuperTeamSessionsAck:{sid:i.superTeam.id,cid:i.superTeam.markSuperTeamSessionsAck,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},getSuperTeamMembersByJoinTime:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembersByJoinTime,params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},getSuperTeamMembersByAccounts:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembersByAccounts,params:[{type:"StrArray",name:"memberIds"}]},getMutedSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getMutedSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},sendSuperTeamCustomSysMsg:{sid:i.superTeam.id,cid:i.superTeam.sendSuperTeamCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},deleteSuperTeamMsg:{sid:i.superTeam.id,cid:i.superTeam.deleteSuperTeamMsg,params:[{type:"Property",name:"sysMsg"}]},getMySuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getMySuperTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},createTeam:{sid:i.team.id,cid:i.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"Property",name:"antispamTag"}]},sendTeamMsg:{sid:i.team.id,cid:i.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:i.team.id,cid:i.team.addTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}]},removeTeamMembers:{sid:i.team.id,cid:i.team.removeTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:i.team.id,cid:i.team.updateTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},leaveTeam:{sid:i.team.id,cid:i.team.leaveTeam,params:[{type:"Long",name:"teamId"}]},getTeam:{sid:i.team.id,cid:i.team.getTeam,params:[{type:"Long",name:"teamId"}]},getTeams:{sid:i.team.id,cid:i.team.getTeams,params:[{type:"Long",name:"timetag"}]},getTeamsById:{sid:i.team.id,cid:i.team.getTeamsById,params:[{type:"LongArray",name:"teamIds"}]},getTeamMembers:{sid:i.team.id,cid:i.team.getTeamMembers,params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}]},dismissTeam:{sid:i.team.id,cid:i.team.dismissTeam,params:[{type:"Long",name:"teamId"}]},applyTeam:{sid:i.team.id,cid:i.team.applyTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:i.team.id,cid:i.team.passTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:i.team.id,cid:i.team.rejectTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:i.team.id,cid:i.team.addTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:i.team.id,cid:i.team.removeTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:i.team.id,cid:i.team.transferTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Bool",name:"leave"}]},updateInfoInTeam:{sid:i.team.id,cid:i.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"},{type:"Property",name:"teamSpecialFollowUpdateTag"}]},updateNickInTeam:{sid:i.team.id,cid:i.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:i.team.id,cid:i.team.acceptTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:i.team.id,cid:i.team.rejectTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:i.team.id,cid:i.team.getTeamHistoryMsgs,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},searchTeamHistoryMsgs:{sid:i.team.id,cid:i.team.searchTeamHistoryMsgs,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"String",name:"keyword"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},updateMuteStateInTeam:{sid:i.team.id,cid:i.team.updateMuteStateInTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getMyTeamMembers:{sid:i.team.id,cid:i.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:i.team.id,cid:i.team.getMutedTeamMembers,params:[{type:"Long",name:"teamId"}]},sendTeamMsgReceipt:{sid:i.team.id,cid:i.team.sendTeamMsgReceipt,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReads:{sid:i.team.id,cid:i.team.getTeamMsgReads,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReadAccounts:{sid:i.team.id,cid:i.team.getTeamMsgReadAccounts,params:[{type:"Property",name:"teamMsgReceipt"}]},muteTeamAll:{sid:i.team.id,cid:i.team.muteTeamAll,params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:i.team.id,cid:i.team.getTeamMemberInvitorAccid,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},friendRequest:{sid:i.friend.id,cid:i.friend.friendRequest,params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:i.friend.id,cid:i.friend.deleteFriend,params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams"}]},updateFriend:{sid:i.friend.id,cid:i.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:i.friend.id,cid:i.friend.getFriends,params:[{type:"Long",name:"timetag"}]},getChatroomAddress:{sid:i.chatroom.id,cid:i.chatroom.getChatroomAddress,params:[{type:"Long",name:"chatroomId"},{type:"Bool",name:"isWeixinApp"},{type:"Int",name:"type"}]},sendFilterMsg:{sid:n(i).id,cid:n(i).sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:n(i).id,cid:n(i).sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},publishEvent:{sid:i.eventService.id,cid:i.eventService.publishEvent,params:[{type:"Property",name:"msgEvent"}]},pushEvent:{sid:i.eventService.id,cid:i.eventService.pushEvent},subscribeEvent:{sid:i.eventService.id,cid:i.eventService.subscribeEvent,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:i.eventService.id,cid:i.eventService.unSubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:i.eventService.id,cid:i.eventService.unSubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},querySubscribeEventsByAccounts:{sid:i.eventService.id,cid:i.eventService.querySubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},querySubscribeEventsByType:{sid:i.eventService.id,cid:i.eventService.querySubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},pushEvents:{sid:i.eventService.id,cid:i.eventService.pushEvents},getThreadMsgs:{sid:i.msgExtend.id,cid:i.msgExtend.getThreadMsgs,params:[{type:"Property",name:"msg"},{type:"Property",name:"threadMsgReq"}]},getMsgsByIdServer:{sid:i.msgExtend.id,cid:i.msgExtend.getMsgsByIdServer,params:[{type:"PropertyArray",name:"reqMsgs",entity:"msg"}]},addQuickComment:{sid:i.msgExtend.id,cid:i.msgExtend.addQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},deleteQuickComment:{sid:i.msgExtend.id,cid:i.msgExtend.deleteQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},getQuickComments:{sid:i.msgExtend.id,cid:i.msgExtend.getQuickComments,params:[{type:"PropertyArray",name:"commentReq",entity:"commentReq"}]},addCollect:{sid:i.msgExtend.id,cid:i.msgExtend.addCollect,params:[{type:"Property",name:"collect"}]},deleteCollects:{sid:i.msgExtend.id,cid:i.msgExtend.deleteCollects,params:[{type:"PropertyArray",name:"collectList",entity:"collect"}]},updateCollect:{sid:i.msgExtend.id,cid:i.msgExtend.updateCollect,params:[{type:"Property",name:"collect"}]},getCollects:{sid:i.msgExtend.id,cid:i.msgExtend.getCollects,params:[{type:"Property",name:"collectQuery"}]},addStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.addStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},updateStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.updateStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},deleteStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.deleteStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},addMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.addMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},updateMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.updateMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},deleteMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.deleteMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},getMsgPins:{sid:i.msgExtend.id,cid:i.msgExtend.getMsgPins,params:[{type:"Property",name:"msgPinReq"}]},httpProxy:{sid:i.proxyService.id,cid:i.proxyService.httpProxy,params:[{type:"Property",name:"proxyTag"}]},getQChatAddress:{sid:i.qchat.id,cid:i.qchat.getQChatAddress,params:[{type:"Property",name:"getQChatAddressTag"}]}}),L=g.merge({},y.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"},{type:"Property",name:"aosPushInfo"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Int",name:"from"},{type:"Int",name:"reason"},{type:"String",name:"custom"},{type:"Int",name:"customClientType"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Byte",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_1":{service:"user",cmd:"updatePushToken"},"3_2":{service:"user",cmd:"appBackground"},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Long",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Long",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Long",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Long",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Long",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_8":{service:"notify",cmd:"syncOfflineNetcallMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Long",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Long",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Long",name:"timetag"}]},"4_15":{service:"notify",cmd:"syncRobots",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"4_16":{service:"notify",cmd:"syncBroadcastMsgs",response:[{type:"PropertyArray",name:"broadcastMsgs",entity:"broadcastMsg"}]},"4_17":{service:"notify",cmd:"syncSuperTeamRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_18":{service:"notify",cmd:"syncOfflineSuperTeamSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_19":{service:"notify",cmd:"syncDeleteSuperTeamMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Long",name:"timetag"},{type:"Byte",name:"type"}]},"4_20":{service:"notify",cmd:"syncSuperTeamSessionAck",response:[{type:"LongLongMap",name:"superTeam"},{type:"Long",name:"timetag"}]},"4_21":{service:"notify",cmd:"syncDeleteMsgSelf",response:[{type:"PropertyArray",name:"deletedMsgs",entity:"deleteMsgSelfTag"}]},"4_22":{service:"notify",cmd:"syncSessionsWithMoreRoaming",response:[{type:"PropertyArray",name:"sessions",entity:"msg"}]},"4_23":{service:"notify",cmd:"syncStickTopSessions",response:[{type:"Long",name:"timetag"},{type:"Bool",name:"modify"},{type:"PropertyArray",name:"sessions",entity:"stickTopSession"}]},"4_24":{service:"notify",cmd:"syncSessionHistoryMsgsDelete",response:[{type:"PropertyArray",name:"sessionHistoryMsgsDeleteTags",entity:"clearMsgsParamsWithSync"}]},"4_25":{service:"notify",cmd:"syncSessionReliableInfo",response:[{type:"Property",name:"context",entity:"sessionReliableSyncContextTag"},{type:"PropertyArray",name:"datas",entity:"sessionReliableSyncTag"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Long",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Long",name:"timetag"}]},"5_3":{service:"sync",cmd:"syncSuperTeamMembersDone",response:[{type:"Long",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Long",name:"timetag"},{type:"Byte",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_17":{service:"msg",cmd:"broadcastMsg",response:[{type:"Property",name:"broadcastMsg"}]},"7_18":{service:"msg",cmd:"clearServerHistoryMsgs",response:[{type:"Long",name:"timetag"}]},"7_19":{service:"session",cmd:"getServerSessions",response:[{type:"Property",name:"sessionReqTag"},{type:"PropertyArray",name:"sessionList",entity:"session"}]},"7_20":{service:"session",cmd:"getServerSession",response:[{type:"Property",name:"session"}]},"7_21":{service:"session",cmd:"updateServerSession"},"7_22":{service:"session",cmd:"deleteServerSessions"},"7_23":{service:"msg",cmd:"deleteMsgSelf",response:[{type:"Long",name:"timetag"}]},"7_24":{service:"msg",cmd:"deleteMsgSelfBatch",response:[{type:"Long",name:"timetag"}]},"7_25":{service:"msg",cmd:"onMarkSessionAckBatch"},"7_26":{service:"msg",cmd:"msgFtsInServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_27":{service:"msg",cmd:"msgFtsInServerByTiming",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_118":{service:"msg",cmd:"onClearServerHistoryMsgs",response:[{type:"Property",name:"sessionHistoryMsgsDeleteTag",entity:"clearMsgsParamsWithSync"}]},"7_123":{service:"msg",cmd:"onDeleteMsgSelf",response:[{type:"Property",name:"deleteMsgSelfTag"}]},"7_124":{service:"msg",cmd:"onDeleteMsgSelfBatch",response:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Byte",name:"scene"},{type:"String",name:"to"},{type:"Long",name:"timetag"}]},"7_121":{service:"msg",cmd:"syncUpdateServerSession",response:[{type:"Property",name:"session"}]},"23_1":{service:"msgExtend",cmd:"getThreadMsgs",response:[{type:"Property",name:"threadMsg",entity:"msg"},{type:"Property",name:"threadMsgsMeta"},{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_2":{service:"msgExtend",cmd:"getMsgsByIdServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_3":{service:"msgExtend",cmd:"addQuickComment",response:[{type:"Long",name:"timetag"}]},"23_4":{service:"msgExtend",cmd:"deleteQuickComment",response:[{type:"Long",name:"timetag"}]},"23_5":{service:"msgExtend",cmd:"onQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_6":{service:"msgExtend",cmd:"onDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_7":{service:"msgExtend",cmd:"getQuickComments",response:[{type:"PropertyArray",name:"commentRes",entity:"commentRes"}]},"23_8":{service:"msgExtend",cmd:"addCollect",response:[{type:"Property",name:"collect"}]},"23_9":{service:"msgExtend",cmd:"deleteCollects",response:[{type:"Int",name:"deleteNum"}]},"23_10":{service:"msgExtend",cmd:"updateCollect",response:[{type:"Property",name:"collect"}]},"23_11":{service:"msgExtend",cmd:"getCollects",response:[{type:"Long",name:"total"},{type:"PropertyArray",name:"collectList",entity:"collect"}]},"23_12":{service:"msgExtend",cmd:"addStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_13":{service:"msgExtend",cmd:"deleteStickTopSession",response:[{type:"Long",name:"timetag"}]},"23_14":{service:"msgExtend",cmd:"updateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_15":{service:"msgExtend",cmd:"addMsgPin",response:[{type:"Long",name:"timetag"}]},"23_16":{service:"msgExtend",cmd:"updateMsgPin",response:[{type:"Long",name:"timetag"}]},"23_17":{service:"msgExtend",cmd:"deleteMsgPin",response:[{type:"Long",name:"timetag"}]},"23_18":{service:"msgExtend",cmd:"onAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_19":{service:"msgExtend",cmd:"onUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_20":{service:"msgExtend",cmd:"onDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_21":{service:"msgExtend",cmd:"getMsgPins",response:[{type:"Long",name:"timetag"},{type:"Bool",name:"modify"},{type:"PropertyArray",name:"pins",entity:"msgPinRes"}]},"23_103":{service:"msgExtend",cmd:"syncAddQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_104":{service:"msgExtend",cmd:"syncDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_112":{service:"msgExtend",cmd:"syncAddStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_113":{service:"msgExtend",cmd:"syncDeleteStickTopSession",response:[{type:"Long",name:"timetag"},{type:"Property",name:"stickTopSession"}]},"23_114":{service:"msgExtend",cmd:"syncUpdateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_115":{service:"msgExtend",cmd:"syncAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_116":{service:"msgExtend",cmd:"syncUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_117":{service:"msgExtend",cmd:"syncDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"21_2":{service:"superTeam",cmd:"sendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_3":{service:"superTeam",cmd:"superTeamMsg",response:[{type:"Property",name:"msg"}]},"21_5":{service:"superTeam",cmd:"addSuperTeamMembers",response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"timetag"}]},"21_6":{service:"superTeam",cmd:"removeSuperTeamMembers",response:[{type:"Long",name:"timetag"}]},"21_7":{service:"superTeam",cmd:"leaveSuperTeam",response:[{type:"Long",name:"timetag"}]},"21_8":{service:"superTeam",cmd:"updateSuperTeam",response:[{type:"Long",name:"timetag"}]},"21_9":{service:"superTeam",cmd:"getSuperTeam",response:[{type:"Property",name:"team"}]},"21_12":{service:"superTeam",cmd:"getSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},"21_10":{service:"superTeam",cmd:"updateInfoInSuperTeam",response:[{type:"Property",name:"superTeamMember"}]},"21_13":{service:"superTeam",cmd:"getSuperTeamMembers",response:[{type:"Long",name:"timetag"}]},"21_11":{service:"superTeam",cmd:"getMySuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_14":{service:"superTeam",cmd:"getSuperTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"21_15":{service:"superTeam",cmd:"getSuperTeamMembersByJoinTime",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_16":{service:"superTeam",cmd:"sendSuperTeamCustomSysMsg",trivialErrorCodes:[7101]},"21_17":{service:"superTeam",cmd:"onDeleteSuperTeamMsg"},"21_18":{service:"superTeam",cmd:"onSuperTeamMsgDelete",response:[{type:"Property",name:"sysMsg"}]},"21_19":{service:"superTeam",cmd:"superTeamCustomSysMsg",response:[{type:"Property",name:"sysMsg"}]},"21_20":{service:"superTeam",cmd:"applySuperTeam",response:[{type:"Property",name:"team"}]},"21_21":{service:"superTeam",cmd:"passSuperTeamApply"},"21_22":{service:"superTeam",cmd:"rejectSuperTeamApply"},"21_23":{service:"superTeam",cmd:"acceptSuperTeamInvite",response:[{type:"Property",name:"team"}]},"21_24":{service:"superTeam",cmd:"rejectSuperTeamInvite"},"21_25":{service:"superTeam",cmd:"onMarkSuperTeamSessionAck"},"21_26":{service:"superTeam",cmd:"addSuperTeamManagers"},"21_27":{service:"superTeam",cmd:"removeSuperTeamManagers"},"21_28":{service:"superTeam",cmd:"updateSuperTeamMute"},"21_29":{service:"superTeam",cmd:"updateSuperTeamMembersMute",response:[{type:"Long",name:"timetag"}]},"21_30":{service:"superTeam",cmd:"updateNickInSuperTeam"},"21_31":{service:"superTeam",cmd:"transferSuperTeam"},"21_32":{service:"superTeam",cmd:"onMarkSuperTeamSessionsAck"},"21_33":{service:"superTeam",cmd:"getSuperTeamMembersByAccounts",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_34":{service:"superTeam",cmd:"getMutedSuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_113":{service:"superTeam",cmd:"syncSuperTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"members",entity:"superTeamMember"},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},"21_111":{service:"superTeam",cmd:"syncMySuperTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"superTeamMember"},{type:"Long",name:"timetag"}]},"21_109":{service:"superTeam",cmd:"syncSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},"21_101":{service:"superTeam",cmd:"syncCreateSuperTeam",response:[{type:"Property",name:"team"}]},"21_102":{service:"superTeam",cmd:"syncSendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_110":{service:"superTeam",cmd:"syncUpdateSuperTeamMember",response:[{type:"Property",name:"teamMember",entity:"superTeamMember"}]},"21_117":{service:"superTeam",cmd:"syncDeleteSuperTeamMsg",response:[{type:"Property",name:"sysMsg"}]},"21_125":{service:"superTeam",cmd:"syncMarkSuperTeamSessionAck",response:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"},{type:"StrArray",name:"abortedAccidList"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers",response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Long",name:"id"},{type:"Long",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Long",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Long",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam",response:[{type:"Property",name:"teamMember"}]},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_28":{service:"team",cmd:"sendTeamMsgReceipt",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_29":{service:"team",cmd:"getTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_30":{service:"team",cmd:"getTeamMsgReadAccounts",response:[{type:"Property",name:"teamMsgReceipt"},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},"8_31":{service:"team",cmd:"notifyTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_32":{service:"team",cmd:"muteTeamAll",response:[]},"8_33":{service:"team",cmd:"getTeamMemberInvitorAccid",response:[{type:"StrStrMap",name:"accountsMap"}]},"8_34":{service:"team",cmd:"getTeamsById",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"LongArray",name:"tids"}],trivialErrorCodes:[816]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Long",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Long",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Long",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Long",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Long",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Long",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"14_1":{service:"eventService",cmd:"publishEvent",response:[{type:"Property",name:"msgEvent"}]},"14_2":{service:"eventService",cmd:"pushEvent",response:[{type:"Property",name:"msgEvent"}]},"14_3":{service:"eventService",cmd:"subscribeEvent",response:[{type:"StrArray",name:"accounts"}]},"14_4":{service:"eventService",cmd:"unSubscribeEventsByAccounts",response:[{type:"StrArray",name:"accounts"}]},"14_5":{service:"eventService",cmd:"unSubscribeEventsByType"},"14_6":{service:"eventService",cmd:"querySubscribeEventsByAccounts",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_7":{service:"eventService",cmd:"querySubscribeEventsByType",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_9":{service:"eventService",cmd:"pushEvents",response:[{type:"PropertyArray",name:"msgEvents",entity:"msgEvent"}]},"22_1":{service:"proxyService",cmd:"httpProxy",response:[{type:"Property",name:"proxyTag"}]},"22_2":{service:"proxyService",cmd:"onProxyMsg",response:[{type:"Property",name:"proxyMsg",entity:"proxyMsgTag"}]},"24_1":{service:"qchat",cmd:"getQChatAddress",response:[{type:"StrArray",name:"address"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});t.exports={idMap:i,cmdConfig:k,packetConfig:L}},function(t,r){t.exports={negotiateTransportTag:{version:-1,serializeList:1,serialize:101},initTransportTag:{},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},uploadTaskTag:{sdklogUploadType:1,sdkLogUploadMsg:2},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,libEnv:44,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,connectionId:102,ip:103,time:109,customTag:38,customClientType:39},aosPushInfo:{pushType:110,hasTokenPreviously:111},sync:{myInfo:1,offlineMsgs:2,teams:3,netcallMsgs:6,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,robots:19,broadcastMsgs:20,avSignal:21,superTeams:22,myInfoInSuperTeams:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteMsgSelf:27,stickTopSessions:28,sessionHistoryMsgsDelete:29,filterMsgs:100},donnop:{open:1},sessionReqTag:{minTimestamp:1,maxTimestamp:2,needLastMsg:3,limit:4,hasMore:5},session:{id:1,updateTime:2,ext:3,lastMsg:4},superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,createTime:10,updateTime:11,custom:12,mute:13,invitoraccid:14,joinTime:15,followAccountIds:17},SpecialFollowUpdateInfoTag:{accids:1,type:2},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13,invitorAccid:14,followAccountIds:16},teamSpecialFollowUpdateTag:{accountIds:1,type:2},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,antiSpamBusinessId:23,clientAntiSpam:24,antiSpamUsingYidun:25,needMsgReceipt:26,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,delete:39,callbackExt:40,subType:41,yidunAntiCheating:42,env:43,yidunAntiSpamExt:44,yidunAntiSpamRes:45,__clientExt:46,robotInfoFunction:47,robotInfoTopic:48,robotInfoCustomContent:49,robotInfoAccount:50,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isInBlackList:106,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110,isReplyMsg:111,tempTeamMemberCount:112},threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2},comment:{from:1,body:2,time:3,custom:4,needPush:5,needBadge:6,pushTitle:7,apnsText:8,pushPayload:9},commentReq:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,timestamp:100},commentRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,detail:7,modify:8,timestamp:100},collect:{id:1,type:2,data:3,custom:4,uniqueId:5,createTime:6,updateTime:7},collectQuery:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5,type:6},stickTopSession:{id:1,topCustom:2,createTime:3,updateTime:4},pinTag:{pinFrom:1,pinCustom:2,createTime:3,updateTime:4},msgPinReq:{sessionId:1,timetag:2},msgPinRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,pinFrom:7,pinCustom:8},msgReceipt:{to:1,from:2,time:7,idClient:11},teamMsgReceipt:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},deleteMsgSelfTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,custom:8},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,env:21,idClient:23,callbackExt:22,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},broadcastMsg:{broadcastId:1,fromAccid:2,fromUid:3,timestamp:4,body:5},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12,serverex:13},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},antispamTag:{antiSpamBusinessId:1},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4},msgType:{text:0,picture:1,audio:2,video:3,location:4,notification:5,file:6,netcall_audio:7,netcall_vedio:8,datatunnel_new:9,tips:10,robot:11,custom:100},msgEvent:{type:1,value:2,idClient:3,custom:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverCustom:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105},clearMsgsParams:{account:1,delRoam:2},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},msgFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},msgTimingFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},delFriendParams:{delAlias:1},proxyTag:{zone:1,path:2,method:3,header:4,body:5},proxyMsgTag:{from:1,body:2,time:3},sessionAckTag:{scene:1,to:2,timetag:3},mixTokenReq:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4,policyVersion:5},mixAuthTokenReq:{type:1,urls:2},notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105},getQChatAddressTag:{ipType:1}}},function(t,r){t.exports={negotiateTransportTag:{"-1":"version",1:"serializeList",101:"serialize"},initTransportTag:{},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},appGrayConfigTag:{0:"grayConfig",1:"ttl"},mixStorePolicyTag:{0:"providers",1:"ttl",2:"mixEnable",3:"nosPolicy",4:"s3Policy",5:"policyVersion"},mixStoreTokenTag:{0:"provider",1:"accessKeyId",2:"secretAccessKey",3:"sessionToken",4:"token",5:"expireAt",6:"bucket",7:"objectName",8:"fileExpireSec",9:"tag",10:"shortUrl",11:"region"},notifyDetectTag:{1:"type",2:"params",3:"result",100:"t1",101:"t2",102:"t3",103:"t4",104:"t5",105:"t6"},backSourceTokenTag:{1:"type",2:"tokens",3:"token",4:"ttl"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",39:"customClientType",40:"sdkHumanVersion",112:"isReactNative",115:"authType",116:"loginExt",1e3:"token"},loginRes:{17:"lastLoginDeviceId",38:"customTag",102:"connectionId",103:"ip",104:"port",106:"country",111:"hasXMPush"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",32:"deviceInfo",38:"customTag",39:"customClientType",102:"connectionId",103:"ip",109:"time"},aosPushInfo:{110:"pushType",111:"hasTokenPreviously"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",6:"netcallMsgs",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",19:"robots",20:"broadcastMsgs",21:"avSignal",22:"superTeams",23:"myInfoInSuperTeams",24:"superTeamRoamingMsgs",25:"deleteSuperTeamMsg",26:"superTeamSessionAck",27:"deleteMsgSelf",28:"stickTopSessions",29:"sessionHistoryMsgsDelete",100:"filterMsgs"},donnop:{1:"open"},sessionReqTag:{1:"minTimestamp",2:"maxTimestamp",3:"needLastMsg",4:"limit",5:"hasMore"},session:{1:"id",2:"updateTime",3:"ext",4:"lastMsg",5:"lastMsgType"},superTeam:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},superTeamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"createTime",11:"updateTime",12:"custom",13:"mute",14:"invitoraccid",15:"joinTime",17:"followAccountIds"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute",14:"invitorAccid",16:"followAccountIds"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",23:"antiSpamBusinessId",24:"clientAntiSpam",25:"antiSpamUsingYidun",26:"needMsgReceipt",28:"needUpdateSession",29:"replyMsgFromAccount",30:"replyMsgToAccount",31:"replyMsgTime",32:"replyMsgIdServer",33:"replyMsgIdClient",34:"threadMsgFromAccount",35:"threadMsgToAccount",36:"threadMsgTime",37:"threadMsgIdServer",38:"threadMsgIdClient",39:"delete",40:"callbackExt",41:"subType",42:"yidunAntiCheating",43:"env",44:"yidunAntiSpamExt",45:"yidunAntiSpamRes",46:"__clientExt",47:"robotInfoFunction",48:"robotInfoTopic",49:"robotInfoCustomContent",50:"robotInfoAccount",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",106:"isInBlackList",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick",111:"isReplyMsg",112:"tempTeamMemberCount"},threadMsgReq:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse"},threadMsgsMeta:{1:"total",2:"lastMsgTime"},comment:{1:"from",2:"body",3:"time",4:"custom",5:"needPush",6:"needBadge",7:"pushTitle",8:"apnsText",9:"pushPayload"},commentReq:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",100:"timestamp"},commentRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"detail",8:"modify",100:"timestamp"},collect:{1:"id",2:"type",3:"data",4:"custom",5:"uniqueId",6:"createTime",7:"updateTime"},collectQuery:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse",6:"type"},stickTopSession:{1:"id",2:"topCustom",3:"createTime",4:"updateTime"},pinTag:{1:"pinFrom",2:"pinCustom",3:"createTime",4:"updateTime"},msgPinReq:{1:"sessionId",2:"timetag"},msgPinRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"pinFrom",8:"pinCustom"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},teamMsgReceipt:{0:"teamId",1:"idServer",100:"read",101:"unread",102:"idClient",103:"account"},deleteMsgSelfTag:{1:"scene",2:"from",3:"to",4:"idServer",5:"idClient",6:"time",7:"deletedTime",8:"custom"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",16:"opeAccount",21:"env",22:"callbackExt",23:"idClient",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},broadcastMsg:{1:"broadcastId",2:"fromAccid",3:"fromUid",4:"timestamp",5:"body"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime",13:"serverex"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime",_4_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"},msgType:{0:"text",1:"picture",2:"audio",3:"video",4:"location",5:"notification",6:"file",7:"netcall_audio",8:"netcall_vedio",9:"datatunnel_new",10:"tips",11:"robot",100:"custom"},msgEvent:{1:"type",2:"value",3:"idClient",4:"custom",5:"validTime",6:"broadcastType",7:"sync",8:"validTimeType",9:"durable",10:"time",11:"idServer",12:"clientType",13:"serverConfig",14:"serverCustom",101:"appid",103:"account",104:"enableMultiClient",106:"consid"},msgEventSubscribe:{1:"type",2:"subscribeTime",3:"sync",102:"to",104:"from",105:"time"},clearMsgsParams:{1:"account",2:"delRoam"},clearMsgsParamsWithSync:{0:"type",1:"otherAccid",2:"delRoam",3:"toTid",4:"isSyncSelf",5:"fromAccid",6:"time",7:"ext"},msgFullSearchRequestTag:{1:"keyword",2:"fromTime",3:"toTime",4:"sessionLimit",5:"msgLimit",6:"order",7:"p2pList",8:"teamList",9:"senderList",10:"msgTypeList",11:"msgSubTypeList"},delFriendParams:{1:"delAlias"},proxyTag:{1:"zone",2:"path",3:"method",4:"header",5:"body"},proxyMsgTag:{1:"from",2:"body",3:"time"},sessionReliableSyncTag:{1:"scene",2:"sessionId",3:"syncStatus",4:"syncEndMsgId",5:"syncEndMsgidClient",6:"syncEndMsgTime",7:"syncStartMsgid",8:"syncStartMsgidClient",9:"syncStartMsgTime",10:"nextMsgid",11:"nextMsgidClient",12:"nextMsgTime",13:"roamMsgSync",14:"offlineMsgSync",15:"netCallOfflineMsgSync"},sessionReliableSyncContextTag:{1:"timetag",2:"type"}}},function(t,r,e){var n=e(34),g=e(0),y=e(155),i=e(155),k=i.CMD_TYPE_PROPERTY,L=i.CMD_TYPE_BYTE,$=i.CMD_TYPE_INT,V=i.CMD_TYPE_BOOL,z=i.CMD_TYPE_LONG,re=i.CMD_TYPE_STRING,oe=i.CMD_TYPE_STR_STR_MAP,le=i.CMD_TYPE_STR_ARRAY,ue=i.CMD_TYPE_LONG_ARRAY,ie=i.CMD_TYPE_PROPERTY_ARRAY,ae=i.CMD_TYPE_KV_ARRAY,Fe=n({},y.idMap,{chatroom:{id:13,login:2,kicked:3,logout:4,sendMsg:6,msg:7,getChatroomMembers:8,getHistoryMsgs:9,markChatroomMember:11,closeChatroom:12,getChatroom:13,updateChatroom:14,updateMyChatroomMemberInfo:15,getChatroomMembersInfo:16,kickChatroomMember:17,updateChatroomMemberTempMute:19,queueOffer:20,queuePoll:21,queueList:22,peak:23,queueDrop:24,queueInit:25,queueChange:26,updateTagMembersTempMute:30,getChatroomMembersByTag:31,getChatroomMemberCountByTag:32,updateCoordinate:33,updateChatroomTags:34,sendChatroomMsgAck:35,getHistoryMsgsByTags:36,notifyCdnInfo:99},user:{id:3,syncRobot:16}}),de=g.merge({},y.cmdConfig,{login:{sid:Fe.chatroom.id,cid:Fe.chatroom.login,params:[{type:L,name:"type"},{type:k,name:"login"},{type:k,name:"imLogin"}]},logout:{sid:Fe.chatroom.id,cid:Fe.chatroom.logout},sendMsg:{sid:Fe.chatroom.id,cid:Fe.chatroom.sendMsg,params:[{type:k,name:"msg"}]},getChatroomMembers:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMembers,params:[{type:L,name:"type"},{type:z,name:"time"},{type:$,name:"limit"}]},getHistoryMsgs:{sid:Fe.chatroom.id,cid:Fe.chatroom.getHistoryMsgs,params:[{type:z,name:"timetag"},{type:$,name:"limit"},{type:V,name:"reverse"},{type:ue,name:"msgTypes"}]},markChatroomMember:{sid:Fe.chatroom.id,cid:Fe.chatroom.markChatroomMember,params:[{type:re,name:"account"},{type:$,name:"type"},{type:V,name:"isAdd"},{type:$,name:"level"},{type:re,name:"custom"}]},closeChatroom:{sid:Fe.chatroom.id,cid:Fe.chatroom.closeChatroom,params:[{type:re,name:"custom"}]},getChatroom:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroom},updateChatroom:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateChatroom,params:[{type:k,name:"chatroom"},{type:V,name:"needNotify"},{type:re,name:"custom"},{type:k,name:"antispamTag"}]},updateMyChatroomMemberInfo:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateMyChatroomMemberInfo,params:[{type:k,name:"chatroomMember"},{type:V,name:"needNotify"},{type:re,name:"custom"},{type:V,name:"needSave"},{type:k,name:"antispamTag"}]},getChatroomMembersInfo:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMembersInfo,params:[{type:le,name:"accounts"}]},kickChatroomMember:{sid:Fe.chatroom.id,cid:Fe.chatroom.kickChatroomMember,params:[{type:re,name:"account"},{type:re,name:"custom"}]},updateChatroomMemberTempMute:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateChatroomMemberTempMute,params:[{type:re,name:"account"},{type:z,name:"duration"},{type:V,name:"needNotify"},{type:re,name:"custom"}]},queueOffer:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueOffer,params:[{type:re,name:"elementKey"},{type:re,name:"elementValue"},{type:V,name:"transient"},{type:re,name:"elementAccount"}]},queuePoll:{sid:Fe.chatroom.id,cid:Fe.chatroom.queuePoll,params:[{type:re,name:"elementKey"}]},queueList:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueList},peak:{sid:Fe.chatroom.id,cid:Fe.chatroom.peak},queueDrop:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueDrop},queueInit:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueInit,params:[{type:$,name:"limit"}]},queueChange:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueChange,params:[{type:oe,name:"elementMap"},{type:V,name:"needNotify"},{type:re,name:"notifyExt"}]},updateTagMembersTempMute:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateTagMembersTempMute,params:[{type:k,name:"tagMuteReq"}]},updateCoordinate:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateCoordinate,params:[{type:k,name:"coordinateReq"}]},getChatroomMemberCountByTag:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMemberCountByTag,params:[{type:re,name:"tag"}]},getChatroomMembersByTag:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMembersByTag,params:[{type:k,name:"tagMemberReq"}]},updateChatroomTags:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateChatroomTags,params:[{type:k,name:"chatRoomTagsUpdateTag"}]},sendChatroomMsgAck:{sid:Fe.chatroom.id,cid:Fe.chatroom.sendChatroomMsgAck,params:[{type:k,name:"chatRoomMsgAckTag"}]},getHistoryMsgsByTags:{sid:Fe.chatroom.id,cid:Fe.chatroom.getHistoryMsgsByTags,params:[{type:k,name:"chatRoomTagHistoryMsgRequestTag"}]},notifyCdnInfo:{sid:Fe.chatroom.id,cid:Fe.chatroom.notifyCdnInfo},syncRobot:{sid:Fe.user.id,cid:Fe.user.syncRobot,params:[{type:z,name:"timetag"}]}}),Ne=g.merge({},y.packetConfig,{"4_10":{service:"notify"},"4_11":{service:"notify"},"3_16":{service:"chatroom",cmd:"syncRobot",response:[{type:ie,name:"robots",entity:"robot"}]},"13_2":{service:"chatroom",cmd:"login",response:[{type:k,name:"chatroom"},{type:k,name:"chatroomMember"},{type:k,name:"chatroomCdnInfo"}]},"13_3":{service:"chatroom",cmd:"kicked",response:[{type:$,name:"reason"},{type:re,name:"custom"}]},"13_4":{service:"chatroom",cmd:"logout"},"13_6":{service:"chatroom",cmd:"sendMsg",response:[{type:k,name:"msg"}]},"13_7":{service:"chatroom",cmd:"msg",response:[{type:k,name:"msg"}]},"13_8":{service:"chatroom",cmd:"getChatroomMembers",response:[{type:ie,name:"members",entity:"chatroomMember"}]},"13_9":{service:"chatroom",cmd:"getHistoryMsgs",response:[{type:ie,name:"msgs",entity:"msg"}]},"13_11":{service:"chatroom",cmd:"markChatroomMember",response:[{type:k,name:"chatroomMember"}]},"13_12":{service:"chatroom",cmd:"closeChatroom"},"13_13":{service:"chatroom",cmd:"getChatroom",response:[{type:k,name:"chatroom"}]},"13_14":{service:"chatroom",cmd:"updateChatroom"},"13_15":{service:"chatroom",cmd:"updateMyChatroomMemberInfo"},"13_16":{service:"chatroom",cmd:"getChatroomMembersInfo",response:[{type:ie,name:"members",entity:"chatroomMember"}]},"13_17":{service:"chatroom",cmd:"kickChatroomMember"},"13_19":{service:"chatroom",cmd:"updateChatroomMemberTempMute",response:[{type:z,name:"time"}]},"13_20":{service:"chatroom",cmd:"queueOffer"},"13_21":{service:"chatroom",cmd:"queuePoll",response:[{type:re,name:"elementKey"},{type:re,name:"elementValue"}]},"13_22":{service:"chatroom",cmd:"queueList",response:[{type:ae,name:"queueList"}]},"13_23":{service:"chatroom",cmd:"peak",response:[{type:re,name:"elementKey"},{type:re,name:"elementValue"}]},"13_24":{service:"chatroom",cmd:"queueDrop"},"13_25":{service:"chatroom",cmd:"queueInit"},"13_26":{service:"chatroom",cmd:"queueChange",response:[{type:le,name:"elementKeyArray"}]},"13_30":{service:"chatroom",cmd:"updateTagMembersTempMute",response:[{type:z,name:"time"}]},"13_33":{service:"chatroom",cmd:"updateCoordinate"},"13_31":{service:"chatroom",cmd:"getChatroomMembersByTag",response:[{type:ie,name:"members",entity:"chatroomMember"}]},"13_32":{service:"chatroom",cmd:"getChatroomMemberCountByTag",response:[{type:z,name:"count"}]},"13_34":{service:"chatroom",cmd:"updateChatroomTags"},"13_36":{service:"chatroom",cmd:"getHistoryMsgsByTags",response:[{type:ie,name:"msgs",entity:"msg"}]},"13_99":{service:"chatroom",cmd:"notifyCdnInfo",response:[{type:k,name:"chatroomCdnInfo"}]},"13_101":{service:"chatroom",cmd:"updateChatroomTag",response:[{type:k,name:"updateTags"}]}});t.exports={idMap:Fe,cmdConfig:de,packetConfig:Ne}},function(t,r){t.exports={imLogin:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,libEnv:44,isReactNative:112,authType:115,loginExt:116,token:1e3,customTag:38},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{appKey:1,account:2,deviceId:3,chatroomId:5,appLogin:8,chatroomNick:20,chatroomAvatar:21,chatroomCustom:22,chatroomEnterCustom:23,session:26,isAnonymous:38,tags:39,notifyTargetTags:40,loginAuthType:41,loginExt:42,loc_x:43,loc_y:44,loc_z:45,distance:46,antiSpamBusinessId:47},chatroom:{id:1,name:3,announcement:4,broadcastUrl:5,custom:12,createTime:14,updateTime:15,queuelevel:16,creator:100,onlineMemberNum:101,mute:102},msg:{idClient:1,type:2,attach:3,custom:4,resend:5,userUpdateTime:6,fromNick:7,fromAvatar:8,fromCustom:9,yidunEnable:10,antiSpamContent:11,skipHistory:12,body:13,antiSpamBusinessId:14,clientAntiSpam:15,antiSpamUsingYidun:16,time:20,from:21,chatroomId:22,fromClientType:23,highPriority:25,callbackExt:27,subType:28,yidunAntiCheating:29,env:30,notifyTargetTags:31,yidunAntiSpamExt:32,yidunAntiSpamRes:33,loc_x:34,loc_y:35,loc_z:36,toAccids:37,needHighPriorityMsgAck:38,__clientExt:39},chatroomMember:{chatroomId:1,account:2,type:3,level:4,nick:5,avatar:6,custom:7,online:8,guest:9,enterTime:10,blacked:12,gaged:13,valid:14,updateTime:15,tempMuted:16,tempMuteDuration:17},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{enable:1,cdnUrls:2,timestamp:3,interval:4,decryptType:5,decryptKey:6,timeout:7},tagMemberReq:{tag:1,time:2,limit:3},tagMuteReq:{tag:1,duration:2,needNotify:3,custom:4,notifyTargetTags:5},coordinateReq:{x:1,y:2,z:3,distance:4},chatRoomTagsUpdateTag:{tags:1,notifyTargetTags:2,needNotify:3,ext:4},chatRoomMsgAckTag:{idClient:1,chatroomId:2},chatRoomTagHistoryMsgRequestTag:{tags:1,types:2,fromTime:3,toTime:4,limit:5,reverse:6}}},function(t,r){t.exports={imLogin:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",41:"sdkType",42:"userAgent",44:"libEnv",112:"isReactNative",1e3:"token"},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{1:"appKey",2:"account",3:"deviceId",5:"chatroomId",8:"appLogin",20:"chatroomNick",21:"chatroomAvatar",22:"chatroomCustom",23:"chatroomEnterCustom",26:"session",38:"isAnonymous",39:"tags",40:"notifyTargetTags",41:"loginAuthType",42:"loginExt",43:"loc_x",44:"loc_y",45:"loc_z",46:"distance",47:"antiSpamBusinessId",_21_safe:"_chatroomAvatar_safe"},chatroom:{1:"id",3:"name",4:"announcement",5:"broadcastUrl",12:"custom",14:"createTime",15:"updateTime",16:"queuelevel",100:"creator",101:"onlineMemberNum",102:"mute"},msg:{1:"idClient",2:"type",3:"attach",4:"custom",5:"resend",6:"userUpdateTime",7:"fromNick",8:"fromAvatar",9:"fromCustom",10:"yidunEnable",11:"antiSpamContent",12:"skipHistory",13:"body",14:"antiSpamBusinessId",15:"clientAntiSpam",16:"antiSpamUsingYidun",20:"time",21:"from",22:"chatroomId",23:"fromClientType",25:"highPriority",27:"callbackExt",28:"subType",29:"yidunAntiCheating",30:"env",31:"notifyTargetTags",32:"yidunAntiSpamExt",33:"yidunAntiSpamRes",34:"loc_x",35:"loc_y",36:"loc_z",37:"toAccids",38:"needHighPriorityMsgAck",39:"__clientExt",_8_safe:"_fromAvatar_safe"},chatroomMember:{1:"chatroomId",2:"account",3:"type",4:"level",5:"nick",6:"avatar",7:"custom",8:"online",9:"guest",10:"enterTime",11:"connectionId",12:"blacked",13:"gaged",14:"valid",15:"updateTime",16:"tempMuted",17:"tempMuteDuration",_6_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{1:"enable",2:"cdnUrls",3:"timestamp",4:"interval",5:"decryptType",6:"decryptKey",7:"timeout"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},updateTags:{1:"currentTags"}}},function(t,r,e){t.exports=e(820)},function(t,r,e){t.exports=e(829)},function(t,r,e){var n=e(5),g=e(34),y=e(0),i=y.notundef,k={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},L={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};function $(V){y.verifyOptions(V,"account","friend::Friend"),y.verifyParamAtLeastPresentOne(V,"alias custom","friend::Friend"),this.account=V.account,i(V.alias)&&(this.alias=V.alias),i(V.custom)&&(this.custom=V.custom)}$.reverse=function(V){var z=y.filterObj(V,"account alias custom createTime updateTime serverex");return i(V.flag)&&(z.valid=V.flag==="1"),i(z.createTime)&&(z.createTime=+z.createTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),z},$.validTypes=function(){return n(k)},$.getByteFromType=function(V){return k[V]},$.getTypeFromByte=function(V){return L[V]},$.assembleFriend=function(V){var z=+new Date;return g({},V,{alias:"",createTime:z,custom:"",updateTime:z,valid:!0})},t.exports=$},function(t,r,e){var n=e(785),g=e(34),y=e(0),i=y.notundef;function k(L,$){n(L.body)||y.onParamError("body只能是整数",$),this.body=L.body,this.from=L.from||"",this.custom=L.custom||"",i(L.pushTitle)&&(this.pushTitle=L.pushTitle),i(L.apnsText)&&(this.apnsText=L.apnsText),i(L.pushPayload)&&(this.pushPayload=L.pushPayload),i(L.needPush)&&(this.needPush=L.needPush===!0?1:0),i(L.needBadge)&&(this.needBadge=L.needBadge===!0?1:0)}k.reverse=function(L){var $=g({},L);return i(L.needBadge)&&($.needBadge=+L.needBadge==1),i(L.needPush)&&($.needPush=+L.needPush==1),$.body=+L.body,$.time=+L.time,$},t.exports=k},function(t,r,e){t.exports=e(842)},function(t,r,e){var n=e(785),g=e(34),y=e(0);function i(k,L){n(k.type)||y.onParamError("Collect.type只能是整数",L),y.notundef(k.uniqueId)&&(this.uniqueId=k.uniqueId),this.type=k.type,this.data=k.data||"",this.custom=k.custom||""}i.reverse=function(k){var L=g({},k);return L.type=+L.type,L.createTime=+L.createTime,L.updateTime=+L.updateTime,L},t.exports=i},function(t,r,e){var n=e(788),g=e(789),y=e(790),i=e(791);function k(V,z,re){var oe=V;return g(z)?(re=z,typeof V=="string"&&(oe={uri:V})):oe=i(z,{uri:V}),oe.callback=re,oe}function L(V,z,re){return $(z=k(V,z,re))}function $(V){if(V.callback===void 0)throw new Error("callback argument missing");var z=!1,re=function(tr,or,dr){z||(z=!0,V.callback(tr,or,dr))};function oe(){var tr=void 0;if(tr=Fe.response?Fe.response:Fe.responseText||function(or){try{if(or.responseType==="document")return or.responseXML;var dr=or.responseXML&&or.responseXML.documentElement.nodeName==="parsererror";if(or.responseType===""&&!dr)return or.responseXML}catch{}return null}(Fe),Et)try{tr=JSON.parse(tr)}catch{}return tr}function le(tr){return clearTimeout(de),tr instanceof Error||(tr=new Error(""+(tr||"Unknown XMLHttpRequest Error"))),tr.statusCode=0,re(tr,lr)}function ue(){if(!ae){var tr;clearTimeout(de),tr=V.useXDR&&Fe.status===void 0?200:Fe.status===1223?204:Fe.status;var or=lr,dr=null;return tr!==0?(or={body:oe(),statusCode:tr,method:Ve,headers:{},url:Ne,rawRequest:Fe},Fe.getAllResponseHeaders&&(or.headers=y(Fe.getAllResponseHeaders()))):dr=new Error("Internal XMLHttpRequest Error"),re(dr,or,or.body)}}var ie,ae,Fe=V.xhr||null;Fe||(Fe=V.cors||V.useXDR?new L.XDomainRequest:new L.XMLHttpRequest);var de,Ne=Fe.url=V.uri||V.url,Ve=Fe.method=V.method||"GET",ze=V.body||V.data,jt=Fe.headers=V.headers||{},kt=!!V.sync,Et=!1,lr={body:void 0,headers:{},statusCode:0,method:Ve,url:Ne,rawRequest:Fe};if("json"in V&&V.json!==!1&&(Et=!0,jt.accept||jt.Accept||(jt.Accept="application/json"),Ve!=="GET"&&Ve!=="HEAD"&&(jt["content-type"]||jt["Content-Type"]||(jt["Content-Type"]="application/json"),ze=JSON.stringify(V.json===!0?ze:V.json))),Fe.onreadystatechange=function(){Fe.readyState===4&&setTimeout(ue,0)},Fe.onload=ue,Fe.onerror=le,Fe.onprogress=function(){},Fe.onabort=function(){ae=!0},Fe.ontimeout=le,Fe.open(Ve,Ne,!kt,V.username,V.password),kt||(Fe.withCredentials=!!V.withCredentials),!kt&&V.timeout>0&&(de=setTimeout(function(){if(!ae){ae=!0,Fe.abort("timeout");var tr=new Error("XMLHttpRequest timeout");tr.code="ETIMEDOUT",le(tr)}},V.timeout)),Fe.setRequestHeader)for(ie in jt)jt.hasOwnProperty(ie)&&Fe.setRequestHeader(ie,jt[ie]);else if(V.headers&&!function(tr){for(var or in tr)if(tr.hasOwnProperty(or))return!1;return!0}(V.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in V&&(Fe.responseType=V.responseType),"beforeSend"in V&&typeof V.beforeSend=="function"&&V.beforeSend(Fe),Fe.send(ze||null),Fe}t.exports=L,t.exports.default=L,L.XMLHttpRequest=n.XMLHttpRequest||function(){},L.XDomainRequest="withCredentials"in new L.XMLHttpRequest?L.XMLHttpRequest:n.XDomainRequest,function(V,z){for(var re=0;re<V.length;re++)z(V[re])}(["get","put","post","patch","head","delete"],function(V){L[V==="delete"?"del":V]=function(z,re,oe){return(re=k(z,re,oe)).method=V.toUpperCase(),$(re)}})},function(t,r,e){(function(n){var g;g=typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{},t.exports=g}).call(this,e(77))},function(t,r){t.exports=function(n){if(!n)return!1;var g=e.call(n);return g==="[object Function]"||typeof n=="function"&&g!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)};var e=Object.prototype.toString},function(t,r){var e=function(n){return n.replace(/^\s+|\s+$/g,"")};t.exports=function(n){if(!n)return{};for(var g,y={},i=e(n).split(`
`),k=0;k<i.length;k++){var L=i[k],$=L.indexOf(":"),V=e(L.slice(0,$)).toLowerCase(),z=e(L.slice($+1));y[V]===void 0?y[V]=z:(g=y[V],Object.prototype.toString.call(g)==="[object Array]"?y[V].push(z):y[V]=[y[V],z])}return y}},function(t,r){t.exports=function(){for(var n={},g=0;g<arguments.length;g++){var y=arguments[g];for(var i in y)e.call(y,i)&&(n[i]=y[i])}return n};var e=Object.prototype.hasOwnProperty},function(t,r,e){var n=e(24),g=e(128),y=e(4),i=e(6);function k(L){var $=this,V=L.url||null;$.level={debug:0,log:1,info:2,warn:3,error:4}[L.level]||0,$.logCache=[],$.logNum=1,$.timeInterval=5e3,window.onerror=function(z,re,oe,le,ue){$.error(ue)},g(function(){$.logCache.length>0&&V&&$.postLogs(V,$.logCache)},$.timeInterval)}k.prototype.debug=function(){var L;this.level>0||(console.debug.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[degbug]"]).call(L,arguments)))},k.prototype.log=function(){var L;this.level>1||(console.log.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[log]"]).call(L,arguments)))},k.prototype.info=function(){var L;this.level>2||(console.info.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[info]"]).call(L,arguments)))},k.prototype.warn=function(){var L;this.level>3||(console.warn.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[warn]"]).call(L,arguments)))},k.prototype.error=function(){var L;this.level>4||(console.error.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[error]"]).call(L,arguments)))},k.prototype.cacheLogs=function(L,$){for(var V=[],z=0;z<$.length;z++){var re=$[z];n(re)==="object"?V.push(i(re)):V.push(re)}var oe=this.logNum+++" "+L+" "+V.join("; ");this.logCache.push(oe.replace("%c",""))},k.prototype.postLogs=function(L,$){var V=this,z=new XMLHttpRequest;z.onreadystatechange=function(){z.readyState===4&&(z.status===200?(console.info("LoggerPlugin::日志上报完成"),V.logCache=[],V.timeInterval=5e3):V.timeInterval+=5e3)},z.open("POST",L),z.setRequestHeader("Content-Type","plain/text;charset=utf-8"),z.timeout=360,z.send($.join(`
`))},t.exports=k},function(t,r,e){var n=e(3),g=e(48);t.exports=function(y){var i,k,L,$;y.db&&(g.db=y.db),y.rnfs&&(g.rnfs=y.rnfs,g.rnfs.size||(g.rnfs.size=1048576),g.rnfs.nimPromise=(i=g.rnfs,k=i.size/2-256,$=0,L=g.rnfs.DocumentDirectoryPath+"/nimlog_"+$+".log",i.exists(L).then(function(V){return V?i.stat(L):n.reject(0)}).then(function(V){return V&&V.size>k?n.reject(1):n.reject(0)}).catch(function(V){return typeof V=="number"&&(i.nimIndex=V),n.resolve()})))}},function(t,r,e){var n=e(43),g=e(0),y=g.notundef,i=g.undef;function k(L){y(L.name)&&(this.name=""+L.name),y(L.announcement)&&(this.announcement=""+L.announcement),y(L.broadcastUrl)&&(this.broadcastUrl=""+L.broadcastUrl),y(L.custom)&&(this.custom=""+L.custom),y(L.queuelevel)&&(this.queuelevel=n(L.queuelevel))}k.reverse=function(L){var $=g.copy(L);return i($.announcement)&&($.announcement=""),i($.broadcastUrl)&&($.broadcastUrl=""),i($.custom)&&($.custom=""),y($.createTime)&&($.createTime=+$.createTime),y($.updateTime)&&($.updateTime=+$.updateTime),y($.onlineMemberNum)&&($.onlineMemberNum=+$.onlineMemberNum),y($.mute)&&($.mute=$.mute==="1"),$},t.exports=k},function(t,r,e){var n,g,y;t.exports=(y=e(96),g=(n=y).lib.WordArray,n.enc.Base64={stringify:function(i){var k=i.words,L=i.sigBytes,$=this._map;i.clamp();for(var V=[],z=0;z<L;z+=3)for(var re=(k[z>>>2]>>>24-z%4*8&255)<<16|(k[z+1>>>2]>>>24-(z+1)%4*8&255)<<8|k[z+2>>>2]>>>24-(z+2)%4*8&255,oe=0;oe<4&&z+.75*oe<L;oe++)V.push($.charAt(re>>>6*(3-oe)&63));var le=$.charAt(64);if(le)for(;V.length%4;)V.push(le);return V.join("")},parse:function(i){var k=i.length,L=this._map,$=this._reverseMap;if(!$){$=this._reverseMap=[];for(var V=0;V<L.length;V++)$[L.charCodeAt(V)]=V}var z=L.charAt(64);if(z){var re=i.indexOf(z);re!==-1&&(k=re)}return function(oe,le,ue){for(var ie=[],ae=0,Fe=0;Fe<le;Fe++)if(Fe%4){var de=ue[oe.charCodeAt(Fe-1)]<<Fe%4*2,Ne=ue[oe.charCodeAt(Fe)]>>>6-Fe%4*2,Ve=de|Ne;ie[ae>>>2]|=Ve<<24-ae%4*8,ae++}return g.create(ie,ae)}(i,k,$)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},y.enc.Base64)},function(t,r,e){var n,g,y,i,k,L,$,V;t.exports=(V=e(96),e(916),e(917),g=(n=V).lib,y=g.Base,i=g.WordArray,k=n.algo,L=k.MD5,$=k.EvpKDF=y.extend({cfg:y.extend({keySize:4,hasher:L,iterations:1}),init:function(z){this.cfg=this.cfg.extend(z)},compute:function(z,re){for(var oe,le=this.cfg,ue=le.hasher.create(),ie=i.create(),ae=ie.words,Fe=le.keySize,de=le.iterations;ae.length<Fe;){oe&&ue.update(oe),oe=ue.update(z).finalize(re),ue.reset();for(var Ne=1;Ne<de;Ne++)oe=ue.finalize(oe),ue.reset();ie.concat(oe)}return ie.sigBytes=4*Fe,ie}}),n.EvpKDF=function(z,re,oe){return $.create(oe).compute(z,re)},V.EvpKDF)},function(t,r,e){e(305);var n=e(41);e(318)(n),t.exports=n},function(t,r,e){var n=e(43),g=e(3),y=e(9),i=e(6),k=e(2),L=e(4),$=e(310),V=e(11),z=e(15),re=e(70),oe=e(203),le=e(308),ue=e(799),ie=e(0),ae=e(311),Fe=e(35),de=Fe.newSupportDBError,Ne=Fe.noDBError,Ve=!1;function ze(Et){Ve=Et,ae.set("db",Et,le)}if(ze(!!ie.getGlobal().indexedDB),re.name==="IE"&&ze(!1),re.name==="Microsoft Edge"&&ze(!1),re.name==="Safari")try{n(re.version.split(".")[0],10)<10&&ze(!1)}catch{}function jt(Et){this.concurrency=0,this.pendingTasks=[],this.queue=g.resolve(),this.logger=Et.logger,this.reporter=Et.reporter,this.core=Et.core,this.account=Et.account,this.notifyError=Et.notifyError}var kt=jt.prototype;kt.reset=ie.emptyFunc,Ve&&(kt.reset=function(Et){this.enable=Et!==!1}),kt.addTask=function(Et){var lr=this;return new g(function(tr,or){function dr(cr){lr.concurrency--;var nr=lr.pendingTasks.shift();nr&&lr.addTask(nr),cr()}if(lr.concurrency<100)return lr.concurrency++,Et().then(function(cr){dr(function(){tr(cr),Et.resolve&&Et.resolve(cr)})},function(cr){dr(function(){var nr=(cr=cr||{}).event||cr,ur={event:nr,callFunc:cr.callFunc||"db::addTask"};lr.logger.error("db::error event is",nr,ie.get(nr,"target.error")),or(ur),Et.reject&&Et.reject(ur)})});Et.resolve||(Et.resolve=tr,Et.reject=or),lr.pendingTasks.push(Et)})},kt.reportError=function(Et){var lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},tr=arguments.length>2?arguments[2]:void 0;this.reporter.reportTraceStart("exceptions",{user_id:this.account,trace_id:ie.get(this.core,"socket.socket.sessionid"),action:4,exception_service:0});var or,dr=lr.context||"";if(tr)try{var cr;or=y(cr=i(tr)).call(cr,0,2e4),dr+=". ".concat(or)}catch{or=""}var nr=ie.get(Et,"code")||ie.get(Et,"target.error.code")||0,ur=ie.get(Et,"message")||ie.get(Et,"target.error.message")||"unknown";ur=ur+" stack: "+ie.get(Et,"stack")||ie.get(Et,"target.error.stack")||"unknown",this.reporter.reportTraceUpdateV2("exceptions",{code:nr,description:ur,operation_type:lr.operation_type,target:lr.target||this.name,context:dr}),this.reporter.reportTraceEnd("exceptions",1)},kt.init=function(Et){var lr=this;return lr.addTask(function(){return lr.enable?lr.server?g.resolve():(lr.name="nim-"+Et,le.open({server:lr.name,version:ue.version,schema:ue.schema}).then(function(tr){lr.logger.info("db::init: ".concat(lr.name)),lr.server=tr},function(tr){throw ze(!1),lr.server=null,lr.name=null,tr}).catch(function(tr){throw lr.reportError(tr,{operation_type:0,context:"version ".concat(ue.version),target:"nim-"+Et}),tr})):g.reject(de({callFunc:"db::init"}))})},kt.destroy=function(){var Et=this;return Et.addTask(function(){if(!Et.enable)return g.reject(de({callFunc:"db::destroy"}));if(!Et.server)return g.resolve();try{return le.remove(Et.name).then(function(){Et.logger.info("db::destroy: ".concat(Et.name)),Et.server=null,Et.name=null}).catch(function(lr){throw Et.reportError(lr,{operation_type:1,context:"remove database failed"}),lr})}catch(lr){throw Et.reportError(lr,{operation_type:1,context:"remove database failed"}),lr}})},kt.clear=function(){var Et=this;return Et.addTask(function(){return Et.enable?Et.server?Et.server.clear("timetag").then(function(){var lr=y([]).call(Et.server.getIndexedDB().objectStoreNames),tr=[];if(k(lr).call(lr,function(or){tr.push(Et.server.clear(or).catch(function(dr){throw Et.reportError(dr,{operation_type:3,context:"tableName: ".concat(or,". clear table failed")}),dr}))}),tr.length)return g.all(tr).then(function(){Et.logger.info("db::clear: ".concat(Et.name))}).catch(function(or){return Et.logger.error("db::clear: ",or),g.reject(or)})}):g.resolve():g.reject(de({callFunc:"db::clear"}))})},kt.close=function(){this.server&&(this.server.close(),this.server=null,this.name=null)},kt.remove=function(Et,lr,tr,or,dr,cr,nr){var ur=this;return ur.addTask(function(){ur.checkDB();try{return ur.server.remove(Et,lr,tr,or,dr,cr,nr).then(function(){var ar;ur.logger.info(L(ar="db::delete: ".concat(Et," ")).call(ar,lr||tr))}).catch(function(ar){throw ur.reportError(ar,{operation_type:3,context:"tableName: ".concat(Et,", remove failed")},{name:Et,keys:lr,keyName:tr,lowerBound:or,upperBound:dr,lowerOpen:cr,upperOpen:nr}),ur.logger.error("db::remove::server.remove error",ar),ar})}catch(ar){throw ur.reportError(ar,{operation_type:3,context:"tableName: ".concat(Et,", remove failed")},{name:Et,keys:lr,keyName:tr,lowerBound:or,upperBound:dr,lowerOpen:cr,upperOpen:nr}),ur.logger.error("db::remove::server.remove error",ar),ar}})},kt.put=function(Et,lr){var tr=this;return tr.addTask(function(){tr.checkDB(),ie.isArray(lr)||(lr=[lr]);try{return tr.server.update(Et,lr).then(function(or){var dr=[Et],cr=ue.keyPath(Et),nr=[];return cr&&(k(or).call(or,function(ur){nr.push(oe(ur,cr))}),dr.push(nr.length===1?nr[0]:nr)),dr.unshift("db::put:"),Et==="timetag"&&dr.push(or[0]),tr.logger.log.apply(tr.logger.log,dr),or}).catch(function(or){throw tr.reportError(or,{operation_type:3,context:"tableName: ".concat(Et,". put failed")},lr),or})}catch(or){throw tr.reportError(or,{operation_type:3,context:"tableName: ".concat(Et,". put failed")},lr),or}})},kt.get=function(Et,lr){var tr=this;return tr.addTask(function(){tr.checkDB();try{return tr.server.get(Et,lr).catch(function(dr){var cr;throw tr.reportError(dr,{operation_type:3,context:L(cr="tableName: ".concat(Et,". get failed with key ")).call(cr,lr)}),dr})}catch(dr){var or;throw tr.reportError(dr,{operation_type:3,context:L(or="tableName: ".concat(Et,". get failed with key ")).call(or,lr)}),dr}})},kt.modifyOrPut=function(Et){var lr=this,tr=Et.table,or=ie.copy(Et.obj),dr=Et.key,cr=Et.modifyObjWhenPut,nr=ie.copy(or);return delete nr[dr],lr.getOne(tr,null,or[dr],{modifyObj:nr}).then(function(ur){return ur?(nr.idClient?nr={idClient:nr.idClient,server:nr.server,pinFrom:nr.pinFrom}:(nr.lastMsg=nr.lastMsg&&nr.lastMsg.idServer+"_"+nr.lastMsg.idClient,nr.localCustom=nr.localCustom&&"***",nr.topCustom=nr.topCustom&&"***"),lr.logger.log("db::modifyOrPut: update table ".concat(tr),nr),ur):(or=ie.merge(or,cr),lr.put(tr,or).then(function(ar){return ar[0]}))})},kt.updateAndDelete=function(Et,lr,tr){var or=this;return or.addTask(function(){or.checkDB();try{return or.server.updateAndDelete(Et,lr,tr).catch(function(dr){throw or.reportError(dr,{operation_type:3,context:"tableName: ".concat(Et,". updateAndDelete failed")},{updates:lr,deletes:tr}),dr})}catch(dr){throw or.reportError(dr,{operation_type:3,context:"tableName: ".concat(Et,". updateAndDelete failed")},{updates:lr,deletes:tr}),dr}})},kt.getAll=function(Et,lr){var tr=this;return tr.addTask(function(){tr.checkDB(),(lr=lr||{}).keys=$(lr)===!0,lr.desc=lr.desc===!0,lr.distinct=lr.distinct===!0;try{var or,dr,cr;return V(or=$(dr=z(cr=tr.server.query(Et,lr.index)).call(cr,z(lr))).call(dr,$(lr)).desc(lr.desc).limit(lr.limit).distinct(lr.distinct)).call(or,lr.mapper).modify(lr.modifyObj).execute().catch(function(nr){throw tr.reportError(nr,{operation_type:3,context:"tableName: ".concat(Et,". getAll failed")},lr),nr})}catch(nr){throw tr.reportError(nr,{operation_type:3,context:"tableName: ".concat(Et,". getAll failed")},lr),nr}})},kt.getOnly=function(Et,lr,tr,or){var dr=this;return dr.addTask(function(){dr.checkDB(),(or=or||{}).keys=$(or)===!0,or.desc=or.desc===!0,or.distinct=or.distinct===!0,or.remove=or.remove===!0;try{var cr,nr,ur;return V(cr=$(nr=z(ur=dr.server.query(Et,lr).only(tr)).call(ur,z(or))).call(nr,$(or)).desc(or.desc).limit(or.limit).distinct(or.distinct)).call(cr,or.mapper).modify(or.modifyObj).remove(or.remove).execute().catch(function(pr){var yr,Sr;throw dr.reportError(pr,{operation_type:3,context:L(yr=L(Sr="tableName: ".concat(Et,". getOnly failed with index: ")).call(Sr,lr,", matchValue: ")).call(yr,tr)},or),pr})}catch(pr){var ar,gr;throw dr.reportError(pr,{operation_type:3,context:L(ar=L(gr="tableName: ".concat(Et,". getOnly failed with index: ")).call(gr,lr,", matchValue: ")).call(ar,tr)},or),pr}})},kt.getOne=function(){var Et=this;return Et.getOnly.apply(Et,arguments).then(function(lr){return lr[0]})},kt.clearTable=function(Et){var lr=this;return lr.addTask(function(){lr.checkDB();try{return lr.server.clear(Et).catch(function(tr){throw lr.reportError(tr,{operation_type:3,context:"tableName: ".concat(Et,". clearTable failed")},options),tr})}catch(tr){throw lr.reportError(tr,{operation_type:3,context:"tableName: ".concat(Et,". clearTable failed")},options),tr}})},kt.checkDB=function(){if(!this.enable)throw de({callFunc:"db::checkDB"});if(!this.server)throw Ne({callFunc:"db::checkDB"})},t.exports=jt},function(t,r){var e={version:14},n={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},sessionsWithMoreRoaming:{key:{keyPath:"id"}},msgReadDetail:{key:{keyPath:"idClient"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},superTeam:{key:{keyPath:"teamId"}},superTeamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1},id:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msgPin:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1}}},broadcastMsg:{key:{keyPath:"broadcastId"},indexes:{time:{unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};e.keyPath=function(g){return n[g].key.keyPath},e.schema=function(){return window._nimForceSyncIM=!0,n},t.exports=e},function(t,r,e){var n=e(79).fn;n.setKey=function(g,y){return this.put("kv",{key:g,value:y})},n.getKey=function(g){return this.get("kv",g).then(function(y){return y&&y.value})},n.setDonnop=function(g){return this.setKey("donnop",g)},n.getDonnop=function(){return this.getKey("donnop")}},function(t,r,e){var n=e(8),g=e(43),y=e(79).fn;y.getTimetags=function(i){var k={};return this.getAll("timetag",{filter:i,mapper:function(L){return k[L.name]=L.value,L}}).then(function(){return k})},y.getTeamMemberTimetags=function(){return this.getTimetags(function(i){var k;return n(k=i.name).call(k,"team-")!==-1})},y.getSuperTeamMemberTimetags=function(){return this.getTimetags(function(i){var k;return n(k=i.name).call(k,"superTeam-")!==-1})},y.getTimetag=function(i){return this.getOne("timetag",null,i).then(function(k){return(k=k||{value:0}).value})},y.getTeamMemberTimetag=function(){return 0},y.updateTimetag=function(i,k){var L=this,$={name:i,value:k};return this.put("timetag",$).catch(function(V){L.notifyError&&L.notifyError(V)})},y.updateMyInfoTimetag=function(i){return this.updateTimetag("myInfo",i)},y.updateRelationTimetag=function(i){return this.updateTimetag("relations",i)},y.getRelationsTimetag=function(){return this.getTimetag("relations")},y.updateFriendTimetag=function(i){return this.updateTimetag("friends",i)},y.getFriendsTimetag=function(){return this.getTimetag("friends")},y.updateFriendUserTimetag=function(i){return this.updateTimetag("friendUsers",i)},y.updateTeamTimetag=function(i){return this.updateTimetag("teams",i)},y.getTeamsTimetag=function(){return this.getTimetag("teams")},y.updateSuperTeamTimetag=function(i){return this.updateTimetag("superTeams",i)},y.getSuperTeamsTimetag=function(){return this.getTimetag("superTeams")},y.updateTeamMemberTimetag=function(i,k){return this.updateTimetag("team-"+i,k)},y.getTeamMembersTimetag=function(i){return this.getTimetag("team-"+i)},y.updateSuperTeamMemberTimetag=function(i,k){return this.updateTimetag("superTeam-"+i,k)},y.getSuperTeamMembersTimetag=function(i){return this.getTimetag("superTeam-"+i)},y.updateMyTeamMembersTimetag=function(i){return this.updateTimetag("myTeamMembers",i)},y.updateMySuperTeamMembersTimetag=function(i){return this.updateTimetag("myInfoInSuperTeams",i)},y.getBroadcastMsgTimetag=function(){return this.getTimetag("broadcastMsg")},y.updateBroadcastMsgTimetag=function(i){return this.updateTimetag("broadcastMsg",g(i))},y.updateRoamingMsgTimetag=function(i){return this.updateTimetag("roamingMsgs",i)},y.updateSuperTeamRoamingMsgTimetag=function(i){return this.updateTimetag("superTeamRoamingMsgs",i)},y.updateMsgReceiptsTimetag=function(i){return this.updateTimetag("msgReceipts",i)},y.updateDonnopTimetag=function(i){return this.updateTimetag("donnop",i)},y.updateSessionAck=function(i){return this.updateTimetag("sessionAck",i)},y.updateDeleteMsgSelf=function(i){return this.updateTimetag("deleteMsgSelf",i)},y.updateSuperTeamSessionAck=function(i){return this.updateTimetag("superTeamSessionAck",i)},y.deleteTimetag=function(i){return this.remove("timetag",i)},y.deleteTeamMemberTimetag=function(i){return this.deleteTimetag("team-"+i)},y.deleteSuperTeamMemberTimetag=function(i){return this.deleteTimetag("superTeam-"+i)}},function(t,r,e){var n=e(3),g=e(79).fn,y=e(0);g.mergeRelations=function(i,k,L,$,V){var z=this,re=z.updateAndDelete("blacklist",i,k),oe=z.updateAndDelete("mutelist",L,$);return n.all([re,oe]).then(function(){return z.logger.info("db::mergeRelations: timetag ".concat(V)),z.updateRelationTimetag(V),[i,k,L,$,V]})},g.getRelations=function(){var i=this.getAll("blacklist"),k=this.getAll("mutelist");return n.all([i,k])},g.markInBlacklist=function(i){if((i=y.copy(i)).isAdd){var k=i.record;return this.put("blacklist",k)}var L=i.account;return this.remove("blacklist",L)},g.markInMutelist=function(i){if((i=y.copy(i)).isAdd){var k=i.record;return this.put("mutelist",k)}var L=i.account;return this.remove("mutelist",L)}},function(t,r,e){var n=e(11),g=e(3),y=e(125),i=e(79).fn,k=e(0);i.mergeFriends=function(L,$,V){var z=this;return z.updateAndDelete("friend",L,$).then(function(){return z.logger.log("db::mergeFriends: updateAndDelete done",L&&n(L).call(L,function(re){return re.account}).join(",")),V&&z.updateFriendTimetag(V),[L,$,V]})},i.putFriend=function(L){return this.put("friend",L)},i.updateFriend=function(L){var $=this,V=(L=k.copy(L)).account;return this.getOne("friend",null,V,{modifyObj:L}).then(function(z){return z?$.logger.log("db::updateFriend: ".concat(V)):$.logger.warn("db::updateFriend: no record ".concat(V)),z})},i.deleteFriend=function(L){var $=this.remove("friend",L),V=this.deleteUser(L);return g.all([$,V])},i.getFriends=function(){var L,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={};$.accountIds!==void 0&&(V=y(L=$.accountIds).call(L,function(re,oe){return re[oe]=!0,re},{}));var z=function(re){return!!re.valid&&!($.updateTime!==void 0&&re.updateTime<=$.updateTime)&&!($.accountIds!==void 0&&!V[re.account])};return this.getAll("friend",{filter:z})},i.getFriend=function(L){return this.getOne("friend",null,L)},i.getUserFromBlackList=function(L){return this.getOne("blacklist",null,L)}},function(t,r,e){var n=e(3),g=e(2),y=e(4),i=e(125),k=e(11),L=e(79).fn,$=e(0),V=e(35),z=e(198),re=e(160);function oe(ie){return ie.valid&&ie.validToCurrentUser}function le(ie){return ie&&ie.valid}function ue(ie){return ie&&$.fillUndef(ie,{mute:!1,custom:""}),ie}L.mergeTeams=function(ie,ae,Fe){var de=this,Ne=de.put("team",ie),Ve=de.leaveTeams(ae,Fe);return n.all([Ne,Ve]).then(function(){return de.logger.log("db::mergeTeams:"),de.updateTeamTimetag(Fe),[ie,ae,Fe]})},L.putTeam=function(ie){if(ie)return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(ae){ae.validToCurrentUser=!0}),this.put("team",ie)},L.updateTeam=function(ie){var ae=this,Fe=(ie=$.copy(ie)).teamId;return ae.getOne("team",null,Fe,{modifyObj:ie}).then(function(de){if(de)ae.logger.log("db::updateTeam: ".concat(Fe));else if(ae.logger.warn("db::updateTeam: no record ".concat(Fe)),ie.validToCurrentUser)return ae.putTeam(ie);return de})},L.transferTeam=function(ie,ae,Fe){var de=this,Ne=ie.teamId,Ve=ie.memberUpdateTime,ze={teamId:Ne,account:ae,type:"normal",updateTime:Ve},jt={teamId:Ne,account:Fe,type:"owner",updateTime:Ve};return de.updateTeamMembers([ze,jt]).then(function(){return de.putTeam(ie).then(function(){var kt,Et;return de.logger.info(y(kt=y(Et="db::transferTeam: ".concat(ie.teamId," ")).call(Et,ae," -> ")).call(kt,Fe)),[ie,ae,Fe]})})},L.leaveTeam=function(ie){var ae=this;return ae.updateTeam({teamId:ie,validToCurrentUser:!1}).then(function(){return ae.removeAllTeamMembers(ie)})},L.dismissTeam=function(ie,ae){var Fe=this,de={teamId:ie,valid:!1,validToCurrentUser:!1,updateTime:ae};return Fe.updateTeam(de).then(function(){return Fe.removeAllTeamMembers(ie)})},L.leaveTeams=function(ie,ae){var Fe,de=this,Ne=[];return g(ie).call(ie,function(Ve){Fe=de.leaveTeam(Ve.teamId,ae),Ne.push(Fe)}),n.all(Ne)},L.getTeamsByTeamIds=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ne){ae=Fe.getTeam(Ne),de.push(ae)}),n.all(de)},L.getTeam=function(ie){ie=""+ie;var ae=this;return ae.getOne("team",null,ie).then(function(Fe){return Fe?(ae.updateTeamProperties([Fe]),Fe):null})},L.getTeams=function(){var ie,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe={};ae.teamIds!==void 0&&(Fe=i(ie=ae.teamIds).call(ie,function(Ne,Ve){return Ne[Ve]=!0,Ne},{}));var de=function(Ne){return!!oe(Ne)&&!(ae.teamIds!==void 0&&!Fe[Ne.teamId])};return this.getAll("team",{filter:de})},L.updateTeamProperties=function(ie){g(ie).call(ie,function(ae){ae&&z.fillProperties(ae)})},L.mergeTeamMembers=function(ie,ae,Fe,de){var Ne=this,Ve=Ne.putTeamMembers(ae),ze=Ne.updateTeamMembers(Fe);return n.all([Ve,ze]).then(function(){return Ne.logger.log("db::mergeTeamMembers: ".concat(ie)),Ne.updateTeamMemberTimetag(ie,de)})},L.putTeamMembers=function(ie){return this.put("teamMember",ie)},L.getTeamMembersByAccount=function(ie){return this.getOnly("teamMember","account",ie,{filter:le,mapper:ue}).then()},L.getTeamMembers=function(){var ie,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe={};ae.accountIds!==void 0&&(Fe=i(ie=ae.accountIds).call(ie,function(ze,jt){return ze[jt]=!0,ze},{}));var de,Ne={};ae.teamIds!==void 0&&(Ne=i(de=ae.teamIds).call(de,function(ze,jt){return ze[jt]=!0,ze},{}));var Ve=function(ze){return!!ze.valid&&!(ae.teamIds!==void 0&&!Ne[ze.teamId])&&!(ae.accountIds!==void 0&&!Fe[ze.account])};return this.getAll("teamMember",{filter:Ve})},L.getTeamMembersByTeamId=function(ie){return this.getOnly("teamMember","teamId",ie,{filter:le,mapper:ue})},L.getTeamMembersById=function(ie){return this.getOnly("teamMember",null,ie,{filter:le,mapper:ue})},L.updateTeamMemberProperties=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ne){re.fillProperties(Ne)&&(ae=Fe.updateTeamMember(Ne),de.push(ae))}),n.all(de)},L.getInvalidTeamMembers=function(ie,ae){var Fe=this;ie=""+ie;var de,Ne=[];return g(ae).call(ae,function(Ve){de=Fe.getOne("teamMember",null,re.genId(ie,Ve)).then(function(ze){return ue(ze)}),Ne.push(de)}),n.all(Ne)},L.updateTeamMember=function(ie){var ae=this,Fe=ie.teamId,de=ie.account,Ne=re.genId(Fe,de),Ve=$.filterObj(ie,"nickInTeam muteTeam mute custom updateTime type valid followAccountIds muteNotiType");return this.getOne("teamMember",null,Ne,{modifyObj:Ve,mapper:ue}).then(function(ze){var jt,kt;return ze?ae.logger.log(y(jt="db::updateTeamMember: ".concat(Fe," ")).call(jt,de),$.pickAsString(Ve,["nickInTeam","muteTeam","mute","custom","updateTime","type","valid","followAccountIds","muteNotiType"])):ae.logger.warn(y(kt="db::updateTeam: no record ".concat(Fe," ")).call(kt,de)),ze})},L.updateTeamMembers=function(ie){var ae=this;if(!ie.length)return n.resolve();var Fe,de=[];return g(ie).call(ie,function(Ne){Fe=ae.updateTeamMember(Ne),de.push(Fe)}),n.all(de)},L.updateTeamManagers=function(ie,ae,Fe,de){var Ne=k(ae).call(ae,function(Ve){return{teamId:ie,account:Ve,type:Fe?"manager":"normal",updateTime:de}});return this.updateTeamMembers(Ne)},L.removeTeamMembersByAccounts=function(ie,ae){var Fe=k(ae).call(ae,function(de){return{teamId:ie,account:de,valid:!1}});return this.updateTeamMembers(Fe)},L.removeAllTeamMembers=function(ie){var ae=this;return ae.getOnly("teamMember","teamId",ie,{modifyObj:{valid:!1}}).then(function(){return ae.logger.warn("db::removeAllTeamMembers: ".concat(ie)),ae.deleteTeamMemberTimetag(ie)})},L.deleteTeamMembers=function(ie){var ae=this;return ae.getOnly("teamMember","teamId",ie,{remove:!0}).then(function(){ae.logger.warn("db::deleteTeamMembers: ".concat(ie)),ae.deleteTeamMemberTimetag(ie)})},L.deleteTeam=function(ie){var ae,Fe=this,de=[];return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(Ne){Ne=""+Ne,ae=Fe.get("team",Ne).then(function(Ve){if(Ve&&oe(Ve))throw V.stillInTeamError({callFunc:"team::deleteTeam",team:Ve});var ze=Fe.remove("team",Ne),jt=Fe.deleteTeamMembers(Ne);return n.all([ze,jt])}),de.push(ae)}),de.length===1?de[0]:n.all(de)}},function(t,r,e){var n=e(3),g=e(2),y=e(10),i=e(4),k=e(11),L=e(79).fn,$=e(0),V=e(35),z=e(312),re=e(206);function oe(ie){return ie.valid&&ie.validToCurrentUser}function le(ie){return ie&&ie.valid}function ue(ie){return ie&&$.fillUndef(ie,{mute:!1,custom:""}),ie}L.mergeSuperTeams=function(ie,ae,Fe){var de=this,Ne=de.put("superTeam",ie),Ve=de.leaveTeams(ae,Fe);return n.all([Ne,Ve]).then(function(){return de.logger.log("db::mergeSuperTeams:"),de.updateSuperTeamTimetag(Fe),[ie,ae,Fe]})},L.putSuperTeam=function(ie){if(ie)return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(ae){ae.validToCurrentUser=!0}),this.put("superTeam",ie)},L.updateSuperTeam=function(ie){var ae=this,Fe=(ie=$.copy(ie)).teamId;return ae.getOne("superTeam",null,Fe,{modifyObj:ie}).then(function(de){return de?(ae.logger.info("db::updateSuperTeam: ".concat(Fe)),de):(ae.logger.warn("db::updateSuperTeam: no record ".concat(Fe)),ae.putSuperTeam(ie))})},L.leaveSuperTeam=function(ie){var ae=this;return ae.updateSuperTeam({teamId:ie,validToCurrentUser:!1}).then(function(){return ae.removeAllSuperTeamMembers(ie)})},L.dismissSuperTeam=function(ie,ae){var Fe=this,de={teamId:ie,valid:!1,validToCurrentUser:!1,updateTime:ae};return Fe.updateSuperTeam(de).then(function(){return Fe.removeAllSuperTeamMembers(ie)})},L.leaveSuperTeams=function(ie,ae){var Fe,de=this,Ne=[];return g(ie).call(ie,function(Ve){Fe=de.leaveSuperTeam(Ve.teamId,ae),Ne.push(Fe)}),n.all(Ne)},L.getSuperTeamsByTeamIds=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ne){ae=Fe.getSuperTeam(Ne),de.push(ae)}),n.all(de)},L.getSuperTeam=function(ie){ie=""+ie;var ae=this;return ae.getOne("superTeam",null,ie).then(function(Fe){return Fe?(ae.updateSuperTeamProperties([Fe]),Fe):null})},L.getSuperTeams=function(){var ie=this;return ie.getAll("superTeam",{filter:oe}).then(function(ae){return ie.updateSuperTeamProperties(ae),ae})},L.updateSuperTeamProperties=function(ie){g(ie).call(ie,function(ae){ae&&z.fillProperties(ae)})},L.mergeSuperTeamMembers=function(ie,ae,Fe,de){var Ne=this,Ve=Ne.putSuperTeamMembers(ae),ze=Ne.updateSuperTeamMembers(Fe);return n.all([Ve,ze]).then(function(){return Ne.logger.log("db::mergeSuperTeamMembers: ".concat(ie)),de!=null?Ne.updateSuperTeamMemberTimetag(ie,de):n.resolve()})},L.getSuperTeamMembersByTeamId=function(ie){return this.getOnly("superTeamMember","teamId",ie,{filter:le,mapper:ue}).then()},L.getSuperTeamMembersById=function(ie){return this.getOnly("superTeamMember",null,ie,{filter:le,mapper:ue}).then()},L.putSuperTeamMembers=function(ie){return this.put("superTeamMember",ie)},L.getSuperTeamMemberById=function(ie){return this.get("superTeamMember",ie)},L.getSuperTeamMembers=function(ie,ae){var Fe=this;ie=""+ie;var de={filter:function(Ne){return Ne.valid},mapper:ue};if(ae){if(typeof ae.joinTime!="number")return void Fe.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ",ae.joinTime);ae.limit&&(de.limit=ae.limit),y(ae)?de.filter=function(Ne){return Ne.valid&&Ne.joinTime<=ae.joinTime}:de.filter=function(Ne){return Ne.valid&&Ne.joinTime>=ae.joinTime}}return Fe.getOnly("superTeamMember","teamId",ie,de).then(function(Ne){return Fe.updateSuperTeamMemberProperties(Ne).then(function(){return Ne})})},L.getSuperTeamMembersByAccount=function(ie){return this.getOnly("superTeamMember","account",ie,{filter:le,mapper:ue}).then()},L.updateSuperTeamMemberProperties=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ne){re.fillProperties(Ne)&&(ae=Fe.updateSuperTeamMember(Ne),de.push(ae))}),n.all(de)},L.getInvalidSuperTeamMembers=function(ie,ae){var Fe=this;ie=""+ie;var de,Ne=[];return g(ae).call(ae,function(Ve){de=Fe.getOne("superTeamMember","id",re.genId(ie,Ve)).then(function(ze){return ue(ze)}),Ne.push(de)}),n.all(Ne)},L.updateSuperTeamMember=function(ie){var ae=this,Fe=ie.teamId,de=ie.account,Ne=re.genId(Fe,de),Ve=$.filterObj(ie,"nickInTeam muteTeam mute custom updateTime type valid followAccountIds muteNotiType");return this.getOne("superTeamMember","id",Ne,{modifyObj:Ve,mapper:ue}).then(function(ze){var jt,kt;return ze?ae.logger.log(i(jt="db::updateSuperTeamMember: ".concat(Fe," ")).call(jt,de),$.pickAsString(Ve,["nickInTeam","muteTeam","mute","custom","updateTime","type","valid","followAccountIds","muteNotiType"])):ae.logger.warn(i(kt="db::updateSuperTeam: no record ".concat(Fe," ")).call(kt,de)),ze})},L.updateSuperTeamMembers=function(ie){var ae=this;if(!ie.length)return n.resolve();var Fe,de=[];return g(ie).call(ie,function(Ne){Fe=ae.updateSuperTeamMember(Ne),de.push(Fe)}),n.all(de)},L.removeSuperTeamMembersByAccounts=function(ie,ae){var Fe=k(ae).call(ae,function(de){return{teamId:ie,account:de,valid:!1}});return this.updateSuperTeamMembers(Fe)},L.removeAllSuperTeamMembers=function(ie){var ae=this;return ae.getOnly("superTeamMember","teamId",ie,{modifyObj:{valid:!1}}).then(function(){return ae.logger.warn("db::removeAllSuperTeamMembers: ".concat(ie)),ae.deleteSuperTeamMemberTimetag(ie)})},L.deleteSuperTeamMembers=function(ie){var ae=this;return ae.getOnly("superTeamMember","teamId",ie,{remove:!0}).then(function(){ae.logger.warn("db::deleteSuperTeamMembers: ".concat(ie)),ae.deleteSuperTeamMemberTimetag(ie)})},L.deleteSuperTeam=function(ie){var ae,Fe=this,de=[];return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(Ne){Ne=""+Ne,ae=Fe.get("superTeam",Ne).then(function(Ve){if(Ve&&oe(Ve))throw V.stillInTeamError({callFunc:"team::deleteTeam",team:Ve});var ze=Fe.remove("superTeam",Ne),jt=Fe.deleteSuperTeamMembers(Ne);return n.all([ze,jt])}),de.push(ae)}),de.length===1?de[0]:n.all(de)},L.transferSuperTeam=function(ie,ae,Fe){var de=this;return de.updateSuperTeamMembers([ae,Fe]).then(function(){return de.putSuperTeam(ie).then(function(){var Ne,Ve;return de.logger.info(i(Ne=i(Ve="db::transferSuperTeam: ".concat(ie.teamId," ")).call(Ve,ae.account," -> ")).call(Ne,Fe.account)),[ie,ae,Fe]})})}},function(t,r,e){var n=e(2),g=e(3),y=e(125),i=e(79).fn,k=e(0);i.mergeMyInfo=function(L,$){var V=this;return V.put("user",L).then(function(){return $?V.updateMyInfoTimetag(L.updateTime):L})},i.mergeFriendUsers=function(L,$){var V=this;return V.putUsers(L).then(function(){V.updateFriendUserTimetag($)})},i.putUsers=function(L){return this.put("user",L)},i.putUser=function(L){return this.put("user",L)},i.updateUser=function(L){var $=this,V=(L=k.copy(L)).account;return this.getOne("user",null,V,{modifyObj:L}).then(function(z){return z?$.logger.log("db::updateUser: ".concat(V)):$.logger.warn("db::updateUser: no record ".concat(V)),z})},i.putUsersIfIsFriend=function(L){var $,V=this,z=[],re=[];return n(L).call(L,function(oe){$=V.getFriend(oe.account).then(function(le){return le&&($=V.putUser(oe),re.push($)),le}),z.push($)}),g.all(z).then(function(){return g.all(re).then(function(oe){return oe})})},i.deleteUser=function(L){return this.remove("user",L)},i.getUser=function(L){return this.getOne("user",null,L)},i.getUsers=function(){var L,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={};$.accountIds!==void 0&&(V=y(L=$.accountIds).call(L,function(re,oe){return re[oe]=!0,re},{}));var z=function(re){return!($.accountIds!==void 0&&!V[re.account])};return this.getAll("user",{filter:z})},i.getAllUsers=function(){return this.getAll("user")}},function(t,r,e){var n=e(15),g=e(3),y=e(4),i=e(2),k=e(34),L=e(28),$=e(8),V=e(11),z=e(79).fn,re=e(0),oe=e(12);z.putMsg=function(le){var ue=this;return re.isArray(le)||(le=[le]),!le.length||n(le[0])?g.resolve():(le=n(le).call(le,function(ie){return!ie.ignore}),ue.put("msg1",le).catch(function(ie){return ue.notifyError&&ue.notifyError(ie),g.resolve(le,ie)}))},z.putMsgReadDetail=function(le){var ue=this;if(le.idClient)return this.put("msgReadDetail",le).catch(function(ie){ue.logger.error("putMsgReadDetail error",ie)})},z.getMsgReadDetail=function(le){return this.getOne("msgReadDetail",null,le)},z.updateMsg=function(le){var ue=this;if(!n(le)){var ie=le.idClient,ae=re.filterObj(le,"resend status idServer time localCustom commentTimetag comments hasSendAck callbackExt");return ue.getOne("msg1",null,ie,{modifyObj:ae}).then(function(Fe){var de,Ne,Ve;return Fe?ue.logger.info(y(de=y(Ne=y(Ve="db::updateMsg: ".concat(ie,"，idServer: ")).call(Ve,ae.idServer,"，status: ")).call(Ne,ae.status,"，time: ")).call(de,ae.time)):ue.logger.warn("db::updateMsg: no record ".concat(ie)),Fe}).catch(function(Fe){return ue.notifyError&&ue.notifyError(Fe),g.resolve(le)})}},z.updateMsgBatch=function(le){var ue=this;if(oe.isRN)this.logger.warn("react native can not support updateMsgBatch");else{this.checkDB();var ie=this.server.getIndexedDB().transaction(["msg1"],"readwrite").objectStore("msg1");i(le).call(le,function(ae){if(ae.idClient){var Fe=ie.get(ae.idClient);Fe.onerror=function(de){ue.logger.error("updateMsgBatch::store.get:error",de)},Fe.onsuccess=function(){var de=Fe.result||ae;ie.put(k({},de,ae)).onerror=function(Ne){ue.logger.error("updateMsgBatch::store.put:error",Ne)}}}})}},z.getMsgs=function(le){return oe.isBrowser?this.getMsgsIndexedDB(le):oe.isRN?this.getMsgsRN(le):g.resolve()},z.getMsgsRN=function(le){var ue={};return typeof le.start=="number"&&(ue.lowerBound=["time",le.start]),typeof le.end=="number"&&le.end!==1/0&&(ue.upperBound=["time",le.end]),ue.desc=!1,ue.index="time",typeof le.desc=="boolean"&&(ue.desc=le.desc),typeof le.limit=="number"&&(ue.limit=le.limit),ue.searchIndex=[],le.sessionId&&ue.searchIndex.push(["sessionId",le.sessionId]),typeof le.type=="string"&&ue.searchIndex.push(["type",le.type]),this.getAll("msg1",ue)},z.getMsgsIndexedDB=function(le){var ue,ie=this;ie.checkDB();var ae="time",Fe=!1,de=!1,Ne=(le=le||{}).sessionId||[],Ve=le.sessionIds||[];re.isString(Ne)?Ne=[Ne]:L(Ne)||(Ne=[]),re.isString(Ve)?Ve=[Ve]:L(Ve)||(Ve=[]);var ze=y(Ne).call(Ne,Ve);ze.length===1?(Fe=!0,ae="sessionTime",Ne=ze[0]):ze.length>1&&(Fe=!0,de=!0,Ve=ze);var jt=le.start||0,kt=le.end||1/0,Et=jt,lr=kt;Fe&&!de&&(Et=[Ne,jt],lr=[Ne,kt]);var tr=le.desc!==!1,or=le.limit||100,dr=!1,cr=!1,nr=le.type||[],ur=le.types||[];re.isString(nr)?nr=[nr]:L(nr)||(nr=[]),re.isString(ur)?ur=[ur]:L(ur)||(ur=[]);var ar=y(nr).call(nr,ur);ar.length===1?(dr=!0,nr=ar[0]):ar.length>1&&(dr=!0,cr=!0,ur=ar);var gr,pr=le.subTypes&&le.subTypes.length,yr=le.keyword||"",Sr=le.filterFunc;return(de||dr||yr||pr||re.isFunction(Sr))&&(gr=function(wr){var Mr;if(de&&$(Ve).call(Ve,wr.sessionId)===-1)return!1;if(dr){if(cr){if($(ur).call(ur,wr.type)===-1)return!1}else if(nr!==wr.type)return!1}if(pr&&$(Mr=le.subTypes).call(Mr,wr.subType)===-1)return!1;if(yr){var mr=wr.text||wr.tip||"";if($(mr).call(mr,yr)===-1)return!1}return!Sr||Sr(wr)}),n(ue=ie.server.query("msg1",ae).bound(Et,lr,!0,!0).desc(tr).limit(or)).call(ue,gr).execute().catch(function(wr){throw ie.reportError(wr,{operation_type:3,context:"tableName: ".concat("msg1",", index ").concat(ae,", getMsgsIndexedDB error")},le),wr})},z.getMsgCountAfterAck=function(le){return oe.isBrowser?this.getMsgCountAfterAckIndexedDB(le):oe.isRN?this.getMsgCountAfterAckRN(le):g.resolve()},z.getMsgCountAfterAckRN=function(le){var ue=this,ie=le=le||{},ae=ie.sessionId,Fe=ie.ack;return ue.checkDB(),ue.getAll("msg1",{searchIndex:["sessionId",ae],lowerBound:["time",Fe]}).then(function(de){var Ne=n(de).call(de,function(Ve){if(Ve.flow==="out"||Ve.isUnreadable===!1)return!1;if(Ve.type==="notification")try{return le.shouldCountNotifyUnread(Ve)}catch(ze){throw ue.logger.error("userOption:shouldCountNotifyUnread function error",ze),ze}return!0});return g.resolve(Ne.length)})},z.getMsgCountAfterAckIndexedDB=function(le){var ue=this,ie=(le=le||{}).sessionId;return ue.checkDB(),ue.server.query("msg1","sessionTime").bound([ie,le.ack],[ie,1/0],!0,!0).execute().then(function(ae){var Fe=n(ae).call(ae,function(de){if(de.flow==="out"||de.isUnreadable===!1)return!1;if(de.type==="notification")try{return le.shouldCountNotifyUnread(de)}catch(Ne){throw ue.logger.error("userOption:shouldCountNotifyUnread function error",Ne),Ne}return!0});return g.resolve(Fe.length)}).catch(function(ae){throw ue.reportError(ae,{operation_type:3,context:"tableName: ".concat("msg1",", IndexSessionTime ").concat("sessionTime",", getMsgCountAfterAckIndexedDB error")},le),ae})},z.amendMsg=function(le){return le?(re.notexist(le.text)&&(le.text=""),le):null},z.getMsgByIdClient=function(le){var ue=this;return ue.getOne("msg1",null,le).then(function(ie){return ue.amendMsg(ie)})},z.getMsgsByIdClients=function(le){var ue,ie=this,ae=[];return i(le).call(le,function(Fe){ue=ie.getMsgByIdClient(Fe),ae.push(ue)}),g.all(ae)},z.clearSendingMsgs=function(){var le=this;return le.getOnly("msg1","status","sending",{modifyObj:{status:"fail"}}).then(function(ue){le.logger.info("db::clearSendingMsgs: msgs send failed",ue&&V(ue).call(ue,function(ie){return ie.idClient}).join(","))})},z.deleteMsg=function(le){var ue,ie=this,ae=[];return re.isArray(le)||(le=[le]),i(le).call(le,function(Fe){ue=ie.getOne("msg1",null,Fe,{remove:!0}).then(function(de){return ie.logger.info("db::deleteMsg done",Fe,de&&de.idClient),de}).catch(function(de){throw ie.logger.error("db::deleteMsg failed",Fe,de),de}),ae.push(ue)}),ae.length===1?ae[0]:g.all(ae)},z.deleteMsgsBySessionId=function(le){var ue=this,ie=null,ae=le.start,Fe=le.end;return ae!==void 0&&Fe!==void 0?ie=function(de){return de>ae&&de<Fe}:ae!==void 0?ie=function(de){return de>ae}:Fe!==void 0&&(ie=function(de){return de<Fe}),ie?ue.getOnly("msg1","sessionId",le.sessionId).then(function(de){var Ne=[];return V(de=de||[]).call(de,function(Ve){ie(Ve.time)&&Ne.push(Ve.idClient)}),ue.logger.info("db::deleteMsgsBySessionId: session results",Ne),ue.deleteMsg(Ne)}):ue.getOnly("msg1","sessionId",le.sessionId,{remove:!0})},z.deleteMsgsByTime=function(le){return this.remove("msg1",null,"time",le.start,le.end,!0,!0)},z.getDeletedMsgsCountByTime=function(le){this.checkDB();var ue=this.server.getIndexedDB().transaction(["msg1"],"readonly").objectStore("msg1").index("time"),ie=IDBKeyRange.bound(le.start,le.end,!0,!0),ae=ue.count(ie);return new g(function(Fe,de){ae.onsuccess=function(Ne){Fe(Ne.target.result)},ae.onerror=function(Ne){this.logger.error("countDeletedMsgsByTime::index.count:error",Ne),de(Ne)}})},z.deleteAllMsgs=function(){var le=this.clearTable("msg1"),ue=this.clearTable("session");return g.all([le,ue])},z.getMsgPins=function(le){return this.getOnly("msgPin","sessionId",le)},z.deleteMsgPins=function(le){return this.getOnly("msgPin","sessionId",le,{remove:!0})},z.putMsgPin=function(le){var ue=this;return this.modifyOrPut({table:"msgPin",obj:le,key:"idClient"}).catch(function(ie){ue.notifyError&&ue.notifyError(ie)})},z.putMsgPins=function(le){return this.put("msgPin",le)},z.deleteMsgPin=function(le){var ue=this;return this.getOne("msgPin",null,le.idClient,{remove:!0}).then(function(ie){return ue.logger.info("db::deleteMsgPin:",ie.idClient),ie})}},function(t,r,e){var n=e(3),g=e(15),y=e(2),i=e(10),k=e(5),L=e(79).fn,$=e(0),V=$.notundef;L.putSysMsg=function(z){var re=this;return new n(function(oe){if($.isArray(z)||(z=[z]),!g(z[0])){var le=[],ue=z.length;y(z).call(z,function(ae){ae=$.copy(ae),re.put("sysMsg",ae).then(function(Fe){le.push(Fe[0]),ie()},ie)})}function ie(){--ue===0&&oe(le)}})},L.getSysMsgs=function(z){var re=!i(z=z||{}),oe=z.limit||100,le=null,ue=null;z.category&&(le="category",ue=z.category),z.type&&(le="type",ue=z.type);var ie,ae=z.lastIdServer,Fe=!1,de=z.read;return(V(ae)||V(de))&&(ie=function(Ne){return V(ae)?(ae=""+ae,Fe?Ve():(Ne.idServer===ae&&(Fe=!0),!1)):Ve();function Ve(){return!V(de)||Ne.read===de}}),z={filter:ie,desc:re,limit:oe},le?this.getOnly("sysMsg",le,ue,z):this.getAll("sysMsg",z)},L.getSysMsgByIdServer=function(z){return this.getOne("sysMsg","idServer",z)},L.updateSysMsg=function(z){var re=this;if(!g(z)){var oe=""+z.idServer,le=$.filterObj(z,"read state error localCustom");return this.getOne("sysMsg","idServer",oe,{modifyObj:le}).then(function(ue){return ue?re.logger.log("db::updateSysMsg: ".concat(oe),$.pickAsString(le,["read","state","error"])):re.logger.warn("db::updateSession: ".concat(oe)),ue})}},L.markSysMsgRead=function(z){var re=this;return new n(function(oe,le){$.isArray(z)||(z=[z]);var ue,ie,ae=[],Fe=[];y(z).call(z,function(de){ue=re.getSysMsgByIdServer(de.idServer).then(function(Ne){Ne&&!Ne.read&&(ie=re.updateSysMsg({idServer:Ne.idServer,read:!0}),Fe.push(ie))},le),ae.push(ue)}),n.all(ae).then(function(){n.all(Fe).then(function(de){oe(de)},le)},le)})},L.deleteSysMsg=function(z){var re,oe=this,le=[];return $.isArray(z)||(z=[z]),y(z).call(z,function(ue){ue=""+ue,re=oe.getOne("sysMsg","idServer",ue,{remove:!0}),le.push(re)}),le.length===1?le[0]:n.all(le)},L.deleteAllSysMsgs=function(){var z=this.clearTable("sysMsg"),re=this.clearTable("sysMsgUnread");return n.all([z,re])},L.getSysMsgUnread=function(){return this.getAll("sysMsgUnread").then(function(z){var re={};return y(z).call(z,function(oe){re[oe.type]=oe.num}),re})},L.updateSysMsgUnread=function(z){var re,oe=this;z=$.copy(z);var le=[];return y(re=k(z)).call(re,function(ue){le.push({type:ue,num:z[ue]})}),this.put("sysMsgUnread",le).then(function(){return oe.logger.info("db::updateSysMsgUnread: ",z),z})}},function(t,r,e){var n=e(3),g=e(2),y=e(79).fn,i=e(0);y.putBroadcastMsg=function(k){var L=this;return new n(function($){i.isArray(k)||(k=[k]);var V=[],z=k.length;function re(){--z===0&&$(V)}g(k).call(k,function(oe){oe=i.copy(oe),L.put("broadcastMsg",oe).then(function(le){V.push(le[0]),re()},re)})})},y.getBroadcastMsgs=function(k){return k=k||{},this.getAll("broadcastMsg",k)}},function(t,r,e){var n=e(3),g=e(10),y=e(4),i=e(28),k=e(2),L=e(79).fn,$=e(0),V=$.notundef;L.putSession=function(z){var re=this,oe=z.unread;return(z=$.merge({},z)).updateTime===void 0&&z.lastMsg&&z.lastMsg.time&&(z.updateTime=z.lastMsg.time),(z.lastMsg||!z.ack&&!z.msgReceiptTime)&&(z.isDeleted=!1),delete z.unread,this.modifyOrPut({table:"session",obj:z,key:"id",modifyObjWhenPut:{unread:0}}).catch(function(le){return re.notifyError&&re.notifyError(le),z.unread=oe,n.resolve(z)})},L.getAllSessions=function(){return this.getAll("session",{index:"updateTime",desc:!0}).catch(function(z){self.notifyError&&self.notifyError(z)})},L.getSessions=function(z){var re=!g(z=z||{}),oe=z.limit||100,le=z.lastSessionId,ue=z.sessionId,ie=!1,ae=this,Fe=function(){return!0},de=function(){return!0};return V(ue)?this.getSession(ue,z.isDeleted):(V(le)&&(Fe=function(Ne){return Ne.id===le&&(ie=!0),ie}),z.includeDeleted||(de=function(Ne){return!Ne.isDeleted}),this.getAll("session",{index:"updateTime",desc:re,limit:oe,filter:function(Ne){return Fe(Ne)&&de(Ne)}}).catch(function(Ne){ae.notifyError&&ae.notifyError(Ne)}))},L.getSession=function(z,re){var oe=this;return this.get("session",z).then(function(le){return n.resolve(!re&&le&&le.isDeleted?void 0:le)}).catch(function(le){throw oe.notifyError&&oe.notifyError(le),le})},L.updateSession=function(z){var re=this,oe=z.id,le=$.filterObj(z,"ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");return z.lastMsg&&(le.lastMsg=z.lastMsg),this.getOne("session",null,oe,{modifyObj:le}).then(function(ue){if(ue){var ie,ae=y(ie="db::updateSession: ".concat(oe," ")).call(ie,$.pickAsString(le,["ack","unread","msgReceiptTime","msgReceiptServerTime","isTop","isDeleted"]));ae+=le.lastMsg?" lastMsg.idClient:".concat($.get(le,"lastMsg.idClient")):"",re.logger.info(ae)}else re.logger.warn("db::updateSession: no record ".concat(oe));return ue}).catch(function(ue){re.notifyError&&re.notifyError(ue)})},L.getStickTopSessions=function(){var z=this;return this.getAll("session",{filter:function(re){return re&&re.isTop}}).catch(function(re){z.notifyError&&z.notifyError(re)})},L.deleteSession=function(z,re){var oe=re&&re.scene||"";return oe==="superTeam"?this.updateSuperTeamSessionAck(0):(oe==="p2p"||oe==="team"||this.updateSuperTeamSessionAck(0),this.updateSessionAck(0)),this.updateMsgReceiptsTimetag(0),this.remove("session",z)},L.deleteSessionLogic=function(z){var re=this;if(!i(z))return this.getOne("session",null,z,{modifyObj:{isDeleted:!0}});var oe=[];return k(z).call(z,function(le){oe.push(re.getOne("session",null,le,{modifyObj:{isDeleted:!0}}))}),n.all(oe)},L.putSessionsWithMoreRoaming=function(z){return this.put("sessionsWithMoreRoaming",z)},L.updateSessionsWithMoreRoaming=function(z){var re=z.id;return delete z.id,this.getOne("sessionsWithMoreRoaming",null,re,{modifyObj:z})},L.deleteSessionsWithMoreRoaming=function(z){return this.remove("sessionsWithMoreRoaming",z)},L.getSessionsWithMoreRoaming=function(z){return z?this.get("sessionsWithMoreRoaming",z):this.getAll("sessionsWithMoreRoaming")}},function(t,r,e){var n=e(4),g=e(44),y=e(45),i=e(0).throttle,k=function(){function L($){g(this,L),this.arr=[],this.timer=null,this.maxLength=$.maxLength||100,this.throttleTime=$.throttleTime||5e3,this.processFn=$.processFn||function(){},this.throttleFn=$.processFn||function(){},$.processFn&&(this.throttleFn=i(function(V){$.processFn(V),V.length=0},this.throttleTime,{leading:!1}))}return y(L,[{key:"add",value:function($){var V;Object.prototype.toString.call($)==="[object Array]"?this.arr=n(V=this.arr).call(V,$):this.arr.push($),this.arr.length>=this.maxLength&&(this.processFn(this.arr),this.arr=[]),this.timer=this.throttleFn(this.arr)}},{key:"destroy",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer),this.processFn=function(){},this.throttleFn=function(){}}},{key:"clear",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer)}}]),L}();t.exports=k},function(t,r,e){var n=e(51),g=e(34),y=e(56),i=e(2),k=e(15),L=e(5),$=e(52),V=e(53),z=e(54),re=e(55),oe=e(42),le=e(44),ue=e(45);function ie(Fe,de){var Ne=L(Fe);if($){var Ve=$(Fe);de&&(Ve=k(Ve).call(Ve,function(ze){return V(Fe,ze).enumerable})),Ne.push.apply(Ne,Ve)}return Ne}var ae={user_id:"",trace_id:"",duration:0,start_time:0,history:[]};t.exports=function(){function Fe(de){le(this,Fe),this.clientProto=de,this.reset()}return ue(Fe,[{key:"reset",value:function(){this.traceData=g({},ae),this.traceData.history=[]}},{key:"start",value:function(){this.reset(),this.traceData.start_time=y()}},{key:"updateBegin",value:function(de){this.traceData.history.push(function(Ne){for(var Ve=1;Ve<arguments.length;Ve++){var ze,jt,kt=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?i(ze=ie(Object(kt),!0)).call(ze,function(Et){n(Ne,Et,kt[Et])}):z?re(Ne,z(kt)):i(jt=ie(Object(kt))).call(jt,function(Et){oe(Ne,Et,V(kt,Et))})}return Ne}({head:"",body:"",start_time:y(),httpdns:!1,index:0},de))}},{key:"updateComplete",value:function(de){var Ne;i(Ne=this.traceData.history).call(Ne,function(Ve){Ve.target===de.target&&(g(Ve,de),Ve.duration=y()-Ve.start_time)})}},{key:"end",value:function(de){var Ne;if(this.traceData.succeed=de,this.traceData.history=k(Ne=this.traceData.history).call(Ne,function(ze){return ze.code!==void 0}),this.traceData.history.length!==0){this.traceData.duration=y()-this.traceData.start_time;var Ve=this.clientProto.checkNetworkAvailable();this.traceData.net_type=0,this.traceData.net_connect=Ve,this.clientProto.reporter.report("nim_sdk_lbs_records",this.traceData),this.reset()}else this.reset()}}]),Fe}()},function(t,r,e){var n=e(24),g=e(51),y=e(56),i=e(6),k=e(321),L=e(4),$=e(3),V=e(22),z=e(15),re=e(8),oe=e(9),le=e(23),ue=e(2),ie=e(128),ae=e(5),Fe=e(52),de=e(53),Ne=e(54),Ve=e(55),ze=e(42);function jt(ar,gr){var pr=ae(ar);if(Fe){var yr=Fe(ar);gr&&(yr=z(yr).call(yr,function(Sr){return de(ar,Sr).enumerable})),pr.push.apply(pr,yr)}return pr}function kt(ar){for(var gr=1;gr<arguments.length;gr++){var pr,yr,Sr=arguments[gr]!=null?arguments[gr]:{};gr%2?ue(pr=jt(Object(Sr),!0)).call(pr,function(wr){g(ar,wr,Sr[wr])}):Ne?Ve(ar,Ne(Sr)):ue(yr=jt(Object(Sr))).call(yr,function(wr){ze(ar,wr,de(Sr,wr))})}return ar}var Et=e(37).fn,lr=e(0),tr=e(12),or=e(165).V2NIMConnectStatus;function dr(ar,gr){var pr,yr,Sr,wr,Mr=this,mr=tr.getDefaultLinkUrl(Mr.options.secure);Mr.socketUrls=[mr],Mr.reporterHookLBS.updateComplete({target:gr,code:200,body:ar}),Mr.reporterHookLBS.end(!0),Mr.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:gr,code:200,net_connect:Mr.checkNetworkAvailable(),succeed:!0}),Mr.msgStatEnable=!!ar.common["msg.stat.enable"],Mr.msgStatEnable&&(Mr.msgDelayTimer=V(le(yr=Mr.doReportMsgDelay).call(yr,Mr),1e4)),ar.common&&ar.common.link&&ue(Sr=ar.common.link).call(Sr,function(Pr){Mr.socketUrls.unshift(tr.formatSocketUrl({url:Pr,secure:Mr.options.secure}))}),ar.common&&ar.common["link.default"]&&ue(wr=ar.common["link.default"]).call(wr,function(Pr){var sr,Ir;Pr=tr.formatSocketUrl({url:Pr,secure:Mr.options.secure}),re(sr=Mr.socketUrls).call(sr,Pr)===-1&&(Mr.socketUrls=L(Ir=Mr.socketUrls).call(Ir,Pr))}),Mr.socketUrls=z(pr=Mr.socketUrls).call(pr,function(Pr,sr,Ir){return re(Ir).call(Ir,Pr)===sr});try{tr.uploadUrl=ar.nosup[0]}catch{}if(tr.chunkUploadUrl=ar["nos-chunk"]||tr.chunkUploadUrl||"",Mr.logger.info("link::refreshSocketUrl: ".concat(gr," ajax load , got socket urls "),Mr.socketUrls),tr.hasLocalStorage){ar.common["lbs.backup"]&&Mr.options.lbsBackup&&localStorage.setItem("nim_lbs_backup",i(ar.common["lbs.backup"]));var _r=lr.get(ar,"common.report.apierror.on");ar.common.report&&localStorage.setItem("nim_lbs_fail_report_on",_r===!1?"0":"1")}if(ar.common.socketConcurrent){var Nr=ar.common.socketConcurrent;typeof Nr=="number"&&Nr>=1&&Nr<=3&&(Mr.options.socketConcurrent=Nr,Mr.imsocket.setConfig({socketConcurrent:Nr}))}}function cr(ar,gr){if(this.statusProtector.getConnectStatus()===or.V2NIM_CONNECT_STATUS_DISCONNECTED)return $.reject(new Error("already disconnected"));if(ar>=gr){this.logger.warn("doRequestBackupLbsUrls backup lbs all tried");var pr=tr.getDefaultLinkUrl(this.options.secure);return this.logger.warn("doRequestBackupLbsUrls: use default socket link",pr),this.socketUrls=[pr],this.reporterHookLBS.end(!1),$.resolve()}return this.logger.warn("doRequestBackupLbsUrls: wait for next lbs request"),$.reject(new Error("lbs request failed"))}function nr(ar,gr){var pr=gr.status||10001,yr=typeof gr=="string"?gr:gr&&gr.message?gr.message:"Unknown error";this.reporterHookLBS.updateComplete({target:ar,code:gr.status||gr.code||0,body:gr&&gr.message||""}),this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:ar,code:pr,description:yr,net_connect:this.checkNetworkAvailable(),succeed:!1})}function ur(ar){var gr=this;if(!(ar&&ar.length>0))throw new Error("No  lbs url to try");var pr=0,yr=0,Sr=!1,wr=null;gr.logger.log("doRequestBackupLbsUrls: use lbs url in index ",pr,ar),gr.reporterHookLBS.start();var Mr=function(mr){var _r=ar[mr],Nr=new Date().getTime();return gr.reporterHookLBS.updateBegin({target:_r,index:mr}),gr.promiseAbortManager.add(gr.doRequestLbs(_r)).then(function(Pr){if(wr&&clearInterval(wr),Sr===!1)return dr.call(gr,Pr,_r),Sr=!0,$.resolve()}).catch(function(Pr){return yr+=1,gr.logger.warn("doRequestBackupLbsUrls: ".concat(_r," ajax lbs error"),Pr),nr.call(gr,_r,Pr,Nr),cr.call(gr,yr,ar.length)})};return new $(function(mr,_r){wr=ie(function(){if(!(pr>=ar.length))return gr.statusProtector.getConnectStatus()===or.V2NIM_CONNECT_STATUS_DISCONNECTED?(wr&&clearInterval(wr),void _r(new Error("already disconnected"))):void Mr(pr++).then(function(){wr&&clearInterval(wr),mr()}).catch(function(){});wr&&clearInterval(wr)},2e3),Mr(pr++).then(function(){wr&&clearInterval(wr),mr()}).catch(function(){})})}Et.connect=function(){tr.isBrowser&&this.reporter.restore(),this.createConnectTime=y(),this.reporter.reportTraceCancel("login"),this.autoconnect?this.reporter.reportTraceStart("login",{user_id:this.options.account,action:"auto_login",binary_websocket:this.useBinaryWebSocket()}):this.reporter.reportTraceStart("login",{user_id:this.options.account,action:"manual_login",process_id:this.processId,binary_websocket:this.useBinaryWebSocket()}),this.reporter.reportTraceUpdateV2("login",{code:0,description:i(kt(kt({},this.options),{},{account:"***",token:"***"}),function(ar,gr){return ar===""||typeof gr!="function"&&n(gr)!=="object"?gr:void 0}),operation_type:"conf_init",net_connect:this.checkNetworkAvailable(),succeed:!0,target:""}),k(Et).connect.call(this)},Et.onConnect=function(){this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:this.url,code:200,net_connect:this.checkNetworkAvailable(),succeed:!0}),k(Et).onConnect.call(this)},Et.onHandshakeFailed=function(ar,gr){var pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:gr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_handshake_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(L(pr="link::onHandshakeFailed: shandshake failed, startTime: ".concat(ar,", targetUrl: ")).call(pr,gr))},Et.onConnectFailed=function(ar,gr,pr){var yr,Sr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:pr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_connect_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(L(yr=L(Sr="link::onConnectFailed: connect failed due to ".concat(ar,", startTime: ")).call(Sr,gr,", targetUrl: ")).call(yr,pr))},Et.onSocketError=function(ar,gr,pr){var yr,Sr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:pr,description:"ws_onerror:"+ar,code:0,net_connect:this.checkNetworkAvailable(),succeed:!1}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(L(yr=L(Sr="link::onSocketError: due to ".concat(ar,", startTime: ")).call(Sr,gr,", targetUrl: ")).call(yr,pr))},Et.probeIp=function(){var ar=this,gr=tr.ipProbeAddr;return new $(function(pr){var yr=0,Sr=-1;function wr(){++yr===2&&(yr=-1,pr(Sr))}ar.adaptersRequest(gr.ipv4,{timeout:2e3,onerror:wr,onload:function(Mr){Sr++,wr()}}),ar.adaptersRequest(gr.ipv6,{timeout:2e3,onerror:wr,onload:function(Mr){Sr+=2,wr()}}),V(function(){yr||Sr===-1||(yr=-1,pr(Sr))},100)})},Et.refreshSocketUrl=function(){var ar=this;return this.statusProtector.processEvent("auth/loginLifeCycleAddressing"),tr.isWeixinApp?this.doRefreshSocketUrl(2):this.options.ipVersion===2?this.probeIp().then(function(gr){return ar.doRefreshSocketUrl(gr)}):this.doRefreshSocketUrl(this.options.ipVersion)},Et.doRefreshSocketUrl=function(ar){var gr,pr,yr=this.options.lbsUrl||tr.lbsUrl;ar!==1&&ar!==2&&(ar=0),tr.ipVersion=ar;var Sr=this.options.lbsBackupUrlsCustomer||[],wr=[];this.options.lbsBackup&&tr.hasLocalStorage&&(wr=(wr=localStorage.getItem("nim_lbs_backup"))?JSON.parse(wr):[]);var Mr=L(gr=L(pr=[yr]).call(pr,wr)).call(gr,Sr);return Mr=z(Mr).call(Mr,function(mr,_r,Nr){return re(Nr).call(Nr,mr)===_r}),ur.call(this,Mr)},Et.doRequestLbs=function(ar){var gr=this,pr=this.options,yr=tr.info;ar=ar+lr.genUrlSep(ar)+"id="+pr.account+"&sv="+yr.sdkVersion+"&pv="+yr.protocolVersion+"&networkType="+tr.ipVersion+"&hostEnv="+tr.hostEnv+"&k="+pr.appKey,this.logger.info("doRequestLbs ".concat(oe(ar).call(ar,0,-32)));var Sr=this;return new $(function(wr,Mr){tr.isWeixinApp?wx.request({url:ar,success:function(mr){var _r=mr&&mr.statusCode,Nr=mr&&mr.data;_r===200?wr(Nr):Mr(Nr)},fail:function(mr){Mr(mr)}}):gr.adaptersRequest(ar,{proxyUrl:lr.url2origin(ar)+"/lbs/res/cors/nej_proxy_frame.html",timeout:tr.xhrTimeout,onload:function(mr){try{var _r=JSON.parse(mr);wr(_r)}catch(Nr){Sr.logger.warn("doRequestLbs parse JSON Error. request lbs failed"),Mr(Nr)}},onerror:function(mr){Mr(mr)}},{exception_service:1})})},Et.disconnect=function(){var ar=this,gr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void V(function(){k(Et).disconnect.call(ar,gr)},0);this.connecting?this.logger.warn("IMProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==or.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("IMProtocolFn api disconnect:: has tried to disconnect"):this.logger.warn("IMProtocolFn api disconnect:: other logic entered");var pr=k(Et);pr.disconnect.call(this,gr)},Et.notifyDisconnect=function(ar){k(Et).notifyDisconnect.call(this,ar)}},function(t,r,e){var n=e(60),g=e(51),y=e(61),i=e(3),k=e(6),L=e(22),$=e(23),V=e(8),z=e(2),re=e(15),oe=e(5),le=e(52),ue=e(53),ie=e(54),ae=e(55),Fe=e(42);function de(cr,nr){var ur=oe(cr);if(le){var ar=le(cr);nr&&(ar=re(ar).call(ar,function(gr){return ue(cr,gr).enumerable})),ur.push.apply(ur,ar)}return ur}function Ne(cr){for(var nr=1;nr<arguments.length;nr++){var ur,ar,gr=arguments[nr]!=null?arguments[nr]:{};nr%2?z(ur=de(Object(gr),!0)).call(ur,function(pr){g(cr,pr,gr[pr])}):ie?ae(cr,ie(gr)):z(ar=de(Object(gr))).call(ar,function(pr){Fe(cr,pr,ue(gr,pr))})}return cr}var Ve=e(37).fn,ze=e(199),jt=e(12),kt="NIM-AllGrayscaleConfig",Et="NIM-AllMixStorePolicy",lr=e(0);function tr(){var cr=this;if(jt.hasLocalStorage&&localStorage.getItem(kt)){var nr=null;try{nr=JSON.parse(localStorage.getItem(kt))[cr.options.appKey]}catch(ur){cr.logger.error("appGrayConfig error",ur)}nr&&(cr.appGrayConfig=nr.timeStamp+1e3*nr.ttl>new Date().getTime()?nr:null,cr.appGrayConfig&&or.apply(cr))}cr.appGrayConfig||cr.sendCmd("getGrayscaleConfig",{providers:""},function(ur,ar){if(ur)cr.logger.error("Calculate Delay time, getGrayscaleConfig error",ur);else if(ar){var gr=ar;if(gr.grayConfig=JSON.parse(gr.grayConfig),gr.ttl=Number(gr.ttl),gr.timeStamp=new Date().getTime(),cr.appGrayConfig=gr,jt.hasLocalStorage){var pr=localStorage.getItem(kt)?JSON.parse(localStorage.getItem(kt)):{};pr[cr.options.appKey]=gr,localStorage.setItem(kt,k(pr))}or.apply(cr)}else cr.logger.error("Calculate Delay time, getGrayscaleConfig error",ar)})}function or(){var cr=this;if(jt.hasLocalStorage&&localStorage.getItem(Et)){var nr=null;try{nr=JSON.parse(localStorage.getItem(Et))[cr.options.appKey]}catch(ur){cr.logger.error("mixStorePolicy error",ur)}nr&&(cr.mixStorePolicy=nr.timeStamp+1e3*nr.ttl>new Date().getTime()?nr:null,cr.mixStorePolicy&&nr.ttl&&nr.ttl!==0&&(cr.mixStorePolicyClock=L($(or).call(or,cr),1e3*nr.ttl)))}cr.mixStorePolicy||cr.sendCmd("getMixStorePolicy",{providers:cr.options.providers&&cr.options.providers.s3?[1,2]:[1]},function(ur,ar){if(ur){cr.logger.error("Calculate Delay time, getMixStorePolicy error",ur);try{ar=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[cr.options.appKey]}catch(yr){cr.logger.error("error:","get last mixStorePolicy failed",yr)}}else if(ar){var gr=ar;if(gr.ttl=Number(gr.ttl),gr.providers=gr.providers.split(","),gr.nosPolicy=gr.nosPolicy?JSON.parse(gr.nosPolicy):null,gr.s3Policy=gr.s3Policy?JSON.parse(gr.s3Policy):null,gr.timeStamp=new Date().getTime(),cr.mixStorePolicy=gr,gr.ttl&&gr.ttl!==0&&(cr.mixStorePolicyClock=L($(or).call(or,cr),1e3*gr.ttl)),jt.hasLocalStorage){var pr=localStorage.getItem(Et)?JSON.parse(localStorage.getItem(Et)):{};pr[cr.options.appKey]=gr,localStorage.setItem(Et,k(pr))}}else cr.logger.error("Calculate Delay time, mixStorePolicy error",ar)})}function dr(cr){var nr=this,ur=this;cr.code===399?(this.logger.warn("pendingLoginFailed:399, refresh LBS url and reconnecting"),ur.forceDisconnect(),ur.doRefreshSocketUrl(jt.ipVersion).then(function(){ur.reconnect()}).catch(function(){nr.logger.warn("pendingLoginFailed:399, refresh LBS url failed")})):cr.code===398?(this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),ur.backoff.setMin(5e3),ur.reconnect()):(this.logger.error("pendingLoginFailed: ",cr.code,cr),ur.onAuthError(cr,"link::onLogin"))}Ve.assembleLogin=function(){var cr=this.assembleIMLogin();return this.addPushInfo instanceof Function?this.addPushInfo(cr):i.resolve({login:cr})},Ve.login=y(n.mark(function cr(){var nr,ur,ar,gr=this;return n.wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return nr=this,pr.next=3,nr.assembleLogin();case 3:if(ur=pr.sent,!nr.socket||nr.socket.binaryType!=="arraybuffer"){pr.next=8;break}this.logger.log("link::doLogin: appLogin is "+ur.login.appLogin),pr.next=19;break;case 8:if(!(ar=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){pr.next=17;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[ar]){pr.next=14;break}return this.logger.warn("onConnect::repeat login",ar),pr.abrupt("return");case 14:this.socketIds[ar]=!0,pr.next=18;break;case 17:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 18:this.logger.warn("link::doLogin: "+ar+" appLogin is "+ur.login.appLogin);case 19:nr.sendCmd("login",Ne({},ur),function(yr,Sr){if(yr){var wr=lr.get(yr,"event.uploadCode")||yr&&yr.code;wr=typeof wr!="number"?408:wr;var Mr=lr.get(yr,"event.disconnectReason"),mr=Mr?k({disconnect_reason:Mr}):yr&&yr.message||"login failed";nr.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:wr,description:mr,net_connect:nr.checkNetworkAvailable(),succeed:!1}),nr.reporter.reportTraceEnd("login",!1),dr.call(nr,yr),nr.statusProtector.processEvent("auth/loginLifeCycleLoginFail",yr)}else nr.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",succeed:!0,net_connect:nr.checkNetworkAvailable(),code:200}),nr.reporter.reportTraceEnd("login",!0),nr.resetReconnectStatus(),gr.heartbeatFail=0,gr.hasLogin=!0,gr.autoconnect=!0,nr.startHeartbeat(),nr.initOnlineListener(),nr.statusProtector.processEvent("auth/loginLifeCycleLoginSucc"),nr.afterLogin(Sr)});case 20:case"end":return pr.stop()}},cr,this)})),Ve.afterLogin=function(cr){var nr=this,ur=this;ur.socket.setSessionId&&ur.socket.setSessionId(cr.connectionId),ur.sendCmd("getNosCdnHost",{}),(typeof lr.get(ur.options,"privateConf.isMixStoreEnable")=="boolean"?ur.options.privateConf.isMixStoreEnable:jt.privateConf.isMixStoreEnable)&&tr.apply(this),this.initPush instanceof Function&&this.initPush();var ar=this.db;if(ar.enable){var gr=this.account;this.options.appendAppKeyForDBName&&(gr+="-"+this.options.appKey),this.db.init(gr).then(function(){nr.notifyLogin(cr),nr.syncData()},function(pr){ar.reset(!1);var yr=lr.get(pr,"event.target.error");nr.logger.warn("link::afterLogin: no db",yr||pr),ur.options&&ur.options.onerror&&ur.options.onerror(yr||pr),nr.notifyLogin(cr),nr.syncData()})}else this.logger.info("link::afterLogin: no db"),this.notifyLogin(cr),this.syncData()},Ve.getFileAuthToken=function(cr){var nr=this,ur=nr.mixStorePolicy.nosPolicy.authPolicy.policyType;ur!==-1?V(ur).call(ur,cr.type)<0?nr.logger.error("this type Token error not support"):cr.type!=3||cr.urls&&cr.urls.length?nr.sendCmd("getBackSourceToken",{mixAuthTokenReq:cr},function(ar,gr){if(ar)return nr.logger.error("getBackSourceToken error",ar),ar;cr.done&&cr.done(gr)}):nr.logger.error("urls is Required when type 3"):nr.logger.error("don't need token")},Ve.processAuth=function(cr){switch(cr.cmd){case"login":cr.error||(cr.content=cr.content||{},this.loginAndroidPush&&this.loginAndroidPush(cr.content.aosPushInfo||{}),cr.obj=cr.content.loginRes,this.connectionId=cr.content.loginRes.connectionId,this.onLoginPortsChange(cr,2));break;case"kicked":return void this.onKicked(cr);case"multiPortLogin":this.onLoginPortsChange(cr,cr.content.state);break;case"kick":cr.error||(cr.obj.deviceIds=cr.content.deviceIds)}},Ve.onLoginPortsChange=function(cr,nr){var ur=this,ar=cr.content.loginPorts;if(ar&&ar.length){var gr=!0;switch(nr){case 2:gr=!0;break;case 3:gr=!1}z(ar).call(ar,function(pr){pr.type=ze.reverseType(pr.type),pr.customClientType&&(pr.customClientType=+pr.customClientType),pr.time=+pr.time,pr.online=gr}),(ar=re(ar).call(ar,function(pr){return pr.connectionId!==ur.connectionId})).length&&(ur.logger.info("link::onLoginPortsChange:",ar),ur.options.onloginportschange(ar))}},Ve.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],Ve.kickedMessages=["","不允许同一个帐号在多个地方同时登录","被服务器踢了","被其它端踢了","悄悄被踢"]},function(t,r,e){var n=e(60),g=e(61),y=e(816),i=e(3),k=e(23),L=e(4),$=e(781),V=e(34),z=e(2),re=e(5),oe=e(143),le=e(8),ue=e(63),ie=e(15),ae=e(11),Fe=e(824),de=e(782),Ne=e(22),Ve=e(28),ze=e(93),jt=e(37).fn,kt=e(0),Et=e(35),lr=kt.undef,tr=kt.objs2ids,or=kt.objs2accounts,dr=kt.teams2ids,cr=e(162),nr=kt.getGlobal(),ur=e(109).EMSyncType;jt.beforeSync=function(){var ar=this.db;return ar.enable?ar.clearSendingMsgs():i.resolve()},jt.syncData=function(){var ar=this,gr=ar.db,pr=ar.options,yr=gr.enable;function Sr(wr){var Mr;ar.syncPromiseArray=[],ar.syncResult={},ar.syncTeamMembersPromiseArray=[],ar.syncSuperTeamMembersPromiseArray=[],ar.syncTeamMembersResult={},ar.checkNosReqNum=0,ar.getNosOriginUrlReqNum=0,kt.verifyBooleanWithDefault(pr,"syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncExtraSuperTeamInfo syncAvSignal",!0,"","sync::syncData"),kt.verifyBooleanWithDefault(pr,"syncFilter syncTeamMembers syncSuperTeamMembers",!1,"","sync::syncData");var mr={};wr=wr||{},nr._nimForceSyncIM&&(ar.logger.warn("sync::syncData: nimForceSyncIM"),delete wr.teams,nr._nimForceSyncIM=!1),mr.myInfo=wr.myInfo||0,mr.deleteMsgSelf=wr.deleteMsgSelf||0,mr.offlineMsgs=0,pr.syncRelations&&(mr.relations=wr.relations||0),pr.syncFriends&&(mr.friends=wr.friends||0),pr.syncFriendUsers&&(mr.friendUsers=wr.friendUsers||0),pr.syncRobots&&(mr.robots=wr.robots||0),pr.syncTeams&&(mr.teams=wr.teams||0),pr.syncSuperTeams&&(mr.superTeams=wr.superTeams||0),pr.syncStickTopSessions&&(mr.stickTopSessions=wr.stickTopSessions||0),pr.syncSessionUnread&&(mr.sessionAck=yr&&wr.sessionAck||0,mr.superTeamSessionAck=yr&&wr.superTeamSessionAck||0),pr.syncRoamingMsgs&&(mr.roamingMsgs=yr&&wr.roamingMsgs||wr.roamingMsgs||0),pr.syncSuperTeamRoamingMsgs&&(mr.superTeamRoamingMsgs=yr&&wr.superTeamRoamingMsgs||0),pr.syncMsgReceipts&&(mr.msgReceipts=wr.msgReceipts||0),pr.syncExtraTeamInfo&&(mr.myTeamMembers=wr.myTeamMembers||0),pr.syncExtraSuperTeamInfo&&(mr.myInfoInSuperTeams=wr.myInfoInSuperTeams||0),pr.syncBroadcastMsgs&&(mr.broadcastMsgs=wr.broadcastMsg||0),mr.donnop=wr.donnop||0,mr.deleteMsg=wr.deleteMsg||0,mr.deleteSuperTeamMsg=wr.deleteSuperTeamMsg||0,mr.sessionHistoryMsgsDelete=wr.sessionHistoryMsgsDelete||0,mr.netcallMsgs=0,pr.syncFilter&&(mr.filterMsgs=0),pr.syncAvSignal&&(mr.avSignal=0);var _r=k(Mr=ar.onSyncData).call(Mr,ar);_r.isImSyncDataCb=!0,ar.logger.info("syncData:: start sync",mr),ar.reporterHook.emit("reporter/syncStart"),ar.sendCmd("sync",{sync:mr,isImSyncDataObj:!0},_r)}ar.syncing=!0,ar.logger.log("sync::syncData: syncing = true"),yr?ar.beforeSync().then(function(){return ar.db.getTimetags()}).then(function(wr){Sr(wr)},function(){Sr()}):Sr(ar.timetags)},jt.onSyncData=function(ar){ar&&(ar.callFunc="sync::onSyncData",this.onCustomError("SYNC_DATA_ERROR",ar))},jt.processSync=function(ar){switch(this.logger.log("sync::processSync cmd: ".concat(ar.cmd)),ar.cmd){case"syncDone":if(ar.error){var gr,pr=kt.get(ar.error,"message"),yr=kt.get(ar.error,"code");this.logger.error(L(gr="sync::processSync syncDoneError errMsg: ".concat(pr,", errCode: ")).call(gr,yr)),this.logger.error("sync::processSync disconnect because syncDone failed");var Sr=Et.syncError({errMsg:pr,errCode:yr});this.shouldReconnect=!1,this.markAllCallbackInvalid(Sr),this.notifyDisconnect(Sr)}else this.timetags.sync=ar.content.timetag,this.reporterHook.emit("reporter/syncRecv"),this.onSyncDone();break;case"syncTeamMembersDone":this.onSyncTeamMembersDone();break;case"syncSuperTeamMembersDone":this.onSyncSuperTeamMembersDone()}},jt.onSyncDone=function(){var ar,gr,pr,yr,Sr,wr,Mr,mr,_r,Nr,Pr,sr,Ir,Ar,Cr,br,vr,Tr,Br,Lr,Fr,qr,Vr,Qr,Sn,Mn,Xr,Wn,Zr,En,Jr=this,kn=Jr.db,Un=kn.enable,wn=Jr.options,Pn=Jr.syncPromiseArray,oo=Jr.syncResult;function Rn(){if(Pn){Jr.logger.info("sync::onSyncDone: after sync",kt.promises2cmds(Pn)),Pn=[],gr=oo.blacklist||[],pr=oo.invalidBlacklist||[],yr=oo.mutelist||[],Sr=oo.invalidMutelist||[],wr=oo.friends,_r=oo.myTeamMembers,Nr=oo.mySuperTeamMembers,Mr=oo.invalidFriends||[],mr=oo.myInfo,Pr=oo.users,Ir=oo.superTeams,Cr=oo.invalidSuperTeams,sr=oo.teams,Ar=oo.invalidTeams||[],br=oo.sessions||{},vr=$(V({},Jr.sessionSet)),Tr=oo.ackMap,oo.msgReceipts,Br=oo.roamingMsgs,Lr=oo.offlineMsgs,Fr=oo.offlineFilterMsgs,Vr=oo.offlineSysMsgs,Qr=oo.offlineCustomSysMsgs,Sn=oo.offlineFilterSysMsgs,Mn=oo.offlineFilterCustomSysMsgs,Xr=oo.sysMsgUnread,Wn=oo.sessionsWithMoreRoaming,En=oo.clearServerHistoryMsgs||[];var Oo=i.resolve();(function(){if(Un){var $o,ua=[An()];br&&z($o=re(br)).call($o,function(ao){ua.push(kn.putSession(br[ao]))}),Oo=i.all(ua).then(function(){var ao,Ta=L(ao=[]).call(ao,y(re(Tr||{})),y(re(br||{})));Ta=ie(Ta).call(Ta,function(Da,Ba,Zo){return le(Zo).call(Zo,Da)===Ba});var Ca=[];return z(Ta).call(Ta,function(Da){var Ba,Zo=br[Da];(Zo.lastMsg||Zo.ack)&&(Ba=(Ba=Zo.ack?i.resolve(Zo):kn.getSession(Zo.id)).then(function(xo){var Ua=xo.ack||0;return kn.getMsgCountAfterAck({shouldCountNotifyUnread:Jr.options.shouldCountNotifyUnread,sessionId:Da,ack:Ua}).then(function($a){return xo.unread=$a||0,br[Da]=Jr.mergeSession(xo),kn.updateSession(xo)})}),Ca.push(Ba))}),i.all(Ca)}).then(function(){var ao=[];return Jr.saveAck.p2pTeam&&ao.push(kn.updateSessionAck(Jr.saveAck.p2pTeam).catch(function(Ta){return Jr.logger.error("sessionAck::syncSessionAck::updatetimetag db",Ta),i.reject(Ta)})),Jr.saveAck.superTeam&&ao.push(kn.updateSuperTeamSessionAck(Jr.saveAck.superTeam).catch(function(Ta){return Jr.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db",Ta),i.reject(Ta)})),i.all(ao)})}else if(br){var gs,Co,Ps;z(gs=[Br,Lr]).call(gs,function(ao){ao&&z(ao).call(ao,function(Ta){var Ca;(Co=br[Ta.sessionId]).unread=Co.unread||0,Co.unreadMsgs=Co.unreadMsgs||[],Ps=Co.ack||0,z(Ca=Ta.msgs).call(Ca,function(Da){if(!(Ps>=Da.time))if(Da.type==="notification"){var Ba;try{Ba=Jr.options.shouldCountNotifyUnread(Da)}catch(Zo){throw Jr.logger.error("userOption:shouldCountNotifyUnread function error",Zo),Zo}Ba&&Co.unread++}else Da.flow==="in"&&Da.isUnreadable!==!1&&(Co.unread++,Co.unreadMsgs.push(Da))}),Jr.mergeSession(Co)})})}})(),Jr.syncDonePromiseArray=Jr.syncDonePromiseArray||[],Oo.then(function(){if(Un&&!Jr.hasSynced)(function(){wn.syncRelations&&(ar=kn.getRelations().then(function(ao){gr=ao[0],yr=ao[1],gr.invalid=pr,yr.invalid=Sr}).catch(function(ao){return ao._msg="on relations error",Jr.logger.error("sync::syncRelation: ",ao),i.reject(ao)}),Pn.push(ar)),wn.syncFriends&&(ar=kn.getFriends().then(function(ao){(wr=ao).invalid=Mr}).catch(function(ao){return ao._msg="on friends error",Jr.logger.error("sync::syncFriends: ",ao),i.reject(ao)}),Pn.push(ar)),lr(mr)&&(ar=kn.getUser(Jr.account).then(function(ao){mr=ao}).catch(function(ao){return ao._msg="on myInfo error",Jr.logger.error("sync::syncMyInfo: ",ao),i.reject(ao)}),Pn.push(ar)),wn.syncFriendUsers&&(ar=kn.getFriends().then(function(ao){return ae(ao).call(ao,function(Ta){return Ta.account})}).then(function(ao){return kn.getUsers({accountIds:ao})}).then(function(ao){Pr=ao}).catch(function(ao){return ao._msg="on users error",Jr.logger.error("sync::syncFriendUser: ",ao),i.reject(ao)}),Pn.push(ar)),wn.syncTeams&&(ar=kn.getTeams().then(function(ao){(sr=ao).invalid=Ar}).catch(function(ao){return ao._msg="on teams error",Jr.logger.error("sync::syncTeams: ",ao),i.reject(ao)}),Pn.push(ar)),wn.syncSuperTeams&&(ar=kn.getSuperTeams().then(function(ao){(Ir=ao).invalid=Cr}).catch(function(ao){return ao._msg="on superteams error",Jr.logger.error("sync::syncSuperTeams: ",ao),i.reject(ao)}),Pn.push(ar)),ar=kn.getTeamMembersByAccount(Jr.account).then(function(ao){_r=ao,Jr.mergeMyTeamMembers(ao)}).catch(function(ao){return Jr.logger.error("sync::getTeamMembersByAccount: ",ao),i.reject(ao)}),Pn.push(ar),ar=kn.getSuperTeamMembersByAccount(Jr.account).then(function(ao){Nr=ao,Jr.mergeMySuperTeamMembers(ao)}).catch(function(ao){return Jr.logger.error("sync::getSuperTeamMembersByAccount: ",ao),i.reject(ao)}),Pn.push(ar),ar=kn.getDonnop().then(function(ao){Jr.mergeDonnop(ao)}).catch(function(ao){return Jr.logger.error("sync::donnop: ",ao),i.reject(ao)}),Pn.push(ar),ar=kn.getAllSessions().then(function(ao){br=ao}).catch(function(ao){return Jr.logger.error("sync::getSession: ",ao),i.reject(ao)}),Pn.push(ar),ar=kn.getSysMsgUnread().then(function(ao){Xr=ao}).catch(function(ao){return ao._msg="on sysMsgUnread error",Jr.logger.error("sync::getSysMsgUnread: ",ao),i.reject(ao)}),Pn.push(ar),Pn.push(kn.getSessionsWithMoreRoaming().then(function(ao){Wn=ao}))})();else{var $o,ua,gs=[];z($o=re(br)).call($o,function(ao){(ua=br[ao]).lastMsg&&gs.push(ua)}),br=oe(gs).call(gs,function(ao,Ta){return Ta.updateTime-ao.updateTime})}Jr.hasSynced=!0;var Co=i.all(Pn);function Ps(ao){var Ta;ao||(Jr.syncDonePromiseSuccessCount+=1);var Ca,Da=le(Ta=Jr.syncDonePromiseArray).call(Ta,Co);Da>-1&&ue(Ca=Jr.syncDonePromiseArray).call(Ca,Da,1),Jr.logger.log("afterSync::syncDonePromiseHandler syncPromiseArray length: ",Jr.syncDonePromiseArray.length,"success count: ",Jr.syncDonePromiseSuccessCount),Jr.syncDonePromiseArray.length===0&&Jr.syncDonePromiseSuccessCount>0?(Jr.logger.log("onSyncDone afterSync last syncDonePromsie. Execute taskAfterSync and notifyData"),function(){Jr.logger.info("sync::onSyncDone: taskAfterSync"),function(){if(oo.deleteMsgSysMsgs){var Zo,xo={};Br&&z(Br).call(Br,function(ha){xo[ha.sessionId]=ha});var Ua={};Lr&&z(Lr).call(Lr,function(ha){Ua[ha.sessionId]=ha});var $a=Jr.api;if(z(Zo=oo.deleteMsgSysMsgs).call(Zo,function(ha){var Fn;z(Fn=ha.sysMsgs).call(Fn,function(po){var ta=po.msg,Ea=ta.sessionId;ha.type==="roaming"&&xo[Ea]?xo[Ea].msgs=$a.cutMsgs(xo[Ea].msgs,ta):Ua[Ea]&&(Ua[Ea].msgs=$a.cutMsgs(Ua[Ea].msgs,ta))})}),!kn.enable){var Dc,As=L(Dc=[]).call(Dc,y(Br||[]),y(Lr||[]));z(As).call(As,function(ha){if(ha.msgs.length){var Fn=Jr.genSessionByMsgs(ha.msgs);Jr.cacheSyncedSession(Fn),br.unshift(Fn)}else{var po=de(br).call(br,function(ta){return ta.id===ha.sessionId});ue(br).call(br,po,1)}});var si={};z(br).call(br,function(ha){if(si[ha.id]){var Fn=ha.lastMsg.time>si[ha.id].lastMsg.time?ha.lastMsg:si[ha.id].lastMsg;si[ha.id]=ha,si[ha.id].lastMsg=Fn}else si[ha.id]=ha}),br=$(si),br=oe(br).call(br,function(ha,Fn){return Fn.updateTime-ha.updateTime})}}}(),Zr=Jr.syncResult.stickTopSessions||[],z(Zr).call(Zr,function(Zo){Zo.isTop===void 0&&(Zo.isTop=!0)}),z(br).call(br,function(Zo){var xo=Jr.sessionSet[Zo.id];xo&&xo.isTop&&(Zo.isTop=!0);var Ua=Fe(Zr).call(Zr,function($a){return $a.id===Zo.id});Ua&&(Zo.isTop=Ua.isTop)});var Ba=[Jr.deleteMsgOfflineRoaming(oo.deleteMsgSysMsgs,br)];return En&&z(En).call(En,function(Zo){Ba.push(function(xo,Ua){var $a;Jr.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete ".concat(xo)),Ua=Ua||new Date().getTime();var Dc=ie(br).call(br,function(Fn){return Fn.id===xo}),As=Jr.getSessionInCache(xo);$a=As||Dc[0];var si=wn.rollbackClearMsgsUnread!==!1,ha=[];return kn.enable&&ha.push(kn.deleteMsgsBySessionId({sessionId:xo,end:Ua})),si&&$a&&($a.lastMsg=null,$a.unread=0,$a=Jr.mergeSession($a),kn.enable&&ha.push(kn.updateSession($a))),i.all(ha)}(Zo.sessionId,Zo.time))}),i.all(Ba)}().then(to,function(Ba){Jr.logger.error("taskAfterSync syncDBDataPromise error:",Ba),Ba.callFunc="sync::onSyncDone",Ba.message="taskAfterSync+notifyData 出错",Jr.onCustomError("SYNC_SESSION_ACK_ERROR",Ba)})):ao?(Jr.logger.error("onSyncDone afterSync syncDonePromise Error:",ao),ao.callFunc="sync::onSyncDone",ao.message="pullFullData 出错",Jr.onCustomError("SYNC_SESSION_ACK_ERROR",ao)):Jr.logger.log("onSyncDone afterSync syncDonePromise success, wait for next syncDonePromise")}Jr.syncDonePromiseArray.length===0&&(Jr.syncDonePromiseSuccessCount=0),Jr.syncDonePromiseArray.push(Co),Co.then(function(){return Ps()}).catch(function(ao){return Ps(ao)})})}else Jr.logger.warn("sync::onSyncDone: after sync --no promiseArray")}function An(){var Oo=[];return Br&&z(Br).call(Br,function($o){var ua;Oo=L(ua=[]).call(ua,y(Oo),y($o.msgs))}),Lr&&z(Lr).call(Lr,function($o){var ua;Oo=L(ua=[]).call(ua,y(Oo),y($o.msgs))}),Oo.length?kn.putMsg(Oo).then(function(){return Oo}):i.resolve(Oo)}function to(){Ne(uo,0)}function uo(){var Oo,$o,ua=[],gs=[];if(gr&&gr.length&&(Jr.logger.info("sync::notifyDataAsync: on blacklist",or(gr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType3_8),wn.onblacklist(gr)),yr&&yr.length&&(Jr.logger.info("sync::notifyDataAsync: on mutelist",or(yr)),wn.onmutelist(yr)),wr&&(Jr.logger.info("sync::notifyDataAsync: on friends",or(wr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType12_5),wn.onfriends(wr)),mr&&(Jr.logger.info("sync::notifyDataAsync: on myInfo"),Jr.myInfo=mr,Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType3_109),wn.onmyinfo(kt.copy(mr))),_r){Jr.logger.info("sync::notifyDataAsync: on myTeamMembers",_r),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType8_126);var Co=kt.simpleClone(_r);Ve(Co)||(Co=[Co]),wn.onMyTeamMembers(Co)}if(Nr){Jr.logger.info("sync::notifyDataAsync: on mySuperTeamMembers",Nr),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType21_111);var Ps=kt.simpleClone(Nr);Ve(Ps)||(Ps=[Ps]),wn.onMySuperTeamMembers(Ps)}Pr&&(z(Pr).call(Pr,function(xo){Jr.mergeUser(xo)}),Jr.logger.info("sync::notifyDataAsync: on users",or(Pr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType12_6),wn.onusers(Pr)),sr&&(Jr.logger.info("sync::notifyDataAsync: on teams",dr(sr)),wn.onteams(sr),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType8_109)),Ir&&(Jr.logger.info("sync::notifyDataAsync: onSuperTeams",dr(Ir)),wn.onSuperTeams(Ir),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType21_109)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_12),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_14),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_20),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_21),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType7_15),br&&br.length?(br=ae(br).call(br,function(xo){return Jr.mergeSession(xo),ze(cr).call(cr,xo)}),br=ie(br).call(br,function(xo){return!xo.isDeleted}),Jr.logger.info("sync::notifyDataAsync: on sessions",tr(br),kt.secureOutput("session",br)),!Un&&Jr.timetags&&Jr.timetags.roamingMsgs?wn.onsessions(ie(vr).call(vr,function(xo){return cr.isComplete(xo)})):wn.onsessions(br)):!Un&&vr.length&&(Jr.logger.info("sync::notifyDataAsync: on sessions",tr(br),kt.secureOutput("session",br)),wn.onsessions(ie(vr).call(vr,function(xo){return cr.isComplete(xo)}))),Zr&&Zr.length&&(Zr=ae(Zr).call(Zr,function(xo){var Ua=Jr.getSessionInCache(xo.id);return Ua?(Ua.isTop=xo.isTop,xo=Jr.mergeSession(Ua),ze(cr).call(cr,Ua)):(xo=Jr.mergeSession(xo),ze(cr).call(cr,xo))}),Jr.logger.info("sync::notifyDataAsync: onStickTopSessions",tr(Zr),kt.secureOutput("session",Zr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_23),wn.onStickTopSessions(Zr)),Br&&z(Br).call(Br,function(xo){xo.scene==="superTeam"?gs.push(xo.timetag):ua.push(xo.timetag),($o=xo.msgs).length&&(Jr.logger.info("sync::notifyDataAsync: on roaming msgs",xo.sessionId,$o.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_9),wn.onroamingmsgs(xo))}),Lr&&(Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_4),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_17),z(Lr).call(Lr,function(xo){xo.scene==="superTeam"?gs.push(xo.timetag):ua.push(xo.timetag),($o=xo.msgs).length&&(Jr.logger.info("sync::notifyDataAsync: on offline msgs",xo.sessionId,$o.length,ae($o).call($o,function(Ua){return Ua.idServer})),wn.onofflinemsgs(xo))})),Fr&&(Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_100),z(Fr).call(Fr,function(xo){ua.push(xo.timetag),($o=xo.msgs).length&&(Jr.logger.info("sync::notifyDataAsync: on offline filter msgs",xo.sessionId,$o.length),wn.onofflinefiltermsgs($o))})),Wn&&(Jr.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming",tr(Wn),Wn),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_22),wn.onSessionsWithMoreRoaming(Wn));var ao,Ta=[],Ca=[];oo.deleteMsgSysMsgs&&z(ao=oo.deleteMsgSysMsgs).call(ao,function(xo){xo.type==="roaming"?Ta=L(Ta).call(Ta,xo.sysMsgs):Ca=L(Ca).call(Ca,xo.sysMsgs)}),Ta.length&&(qr=L(qr=qr||[]).call(qr,Ta)),Ca.length&&(Vr=L(Vr=Vr||[]).call(Vr,Ca)),qr&&(Jr.logger.info("sync::notifyDataAsync: on roaming sys msgs",qr.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_19),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_15),wn.onroamingsysmsgs(qr)),Vr&&(Jr.logger.info("sync::notifyDataAsync: on offline sys msgs",Vr.length),wn.onofflinesysmsgs(Vr)),Sn&&(Jr.logger.info("sync::notifyDataAsync: on offline filter sys msgs",Sn.length),wn.onofflinefiltersysmsgs(Sn)),Qr&&(Jr.logger.info("sync::notifyDataAsync: on offline custom sys msgs",Qr.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_6),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_18),wn.onofflinecustomsysmsgs(Qr)),Mn&&(Jr.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs",Mn.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_101),wn.onofflinefiltercustomsysmsgs(Mn)),Xr&&(Xr=kt.merge({},Jr.sysMsgUnread,Xr),Jr.sysMsgUnread=kt.merge({},Xr),Jr.logger.info("sync::notifyDataAsync: on sysMsgUnread",Xr),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_6),wn.onsysmsgunread(Xr));var Da=Jr.getPushNotificationMultiportConfig();Jr.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig",Da),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_13),wn.onPushNotificationMultiportConfig(Da);var Ba=gs.length&&Math.max.apply(Math,gs);if(Oo=ua.length&&Math.max.apply(Math,ua),kn.enable){var Zo=[];Ba&&Zo.push(Jr.db.updateSuperTeamRoamingMsgTimetag(Ba)),Oo&&Zo.push(Jr.db.updateRoamingMsgTimetag(Oo)),i.all(Zo).then(Eo).catch(Eo)}else Jr.timetags.superTeamRoamingMsgs=Ba,Jr.timetags.roamingMsgs=Oo||Jr.timetags.roamingMsgs,Eo();Jr.syncPromiseArray=[],Jr.syncResult={}}function Eo(){Jr.processUnsettledMsgs(),Jr.msgPromise.then(function(){Jr.canHandleDeletedMsgInSyncing=!0,Ne(function(){Jr.processUnsettledSysMsgs()},0)}),Jr.syncing&&wn.onsyncdone(),Jr.syncing=!1,Jr.logger.log("sync::onsyncdone: syncing = false"),Jr.reporterHook.emit("reporter/syncComplete"),kn.enable&&wn.syncTeamMembers&&Jr.syncTeamMembers(sr),kn.enable&&wn.syncSuperTeamMembers&&Jr.syncSuperTeamMembers(Ir)}Pn&&Pn.length?i.all(Pn).then(Rn).catch(function(Oo){Rn(),Jr.logger.error(Oo),Oo.callFunc="sync::onSyncDone",Oo.message="afterSync syncNormalPromise 出错",Jr.onCustomError("SYNC_promiseArray_ERROR",Oo)}):Rn()},jt.syncTeamMembers=function(){var ar=g(n.mark(function gr(pr){var yr,Sr,wr,Mr,mr,_r,Nr,Pr;return n.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(Sr=(yr=this).db,wr={},!Sr.enable){sr.next=33;break}return sr.prev=4,sr.next=7,Sr.getTeamMemberTimetags();case 7:_r=sr.sent,sr.next=14;break;case 10:sr.prev=10,sr.t0=sr.catch(4),yr.logger.error("sync::syncTeamMembers: getTeamMemberTimetags error",sr.t0),_r={};case 14:if(Ve(pr)){sr.next=25;break}return sr.prev=15,sr.next=18,Sr.getTeams();case 18:pr=sr.sent,sr.next=25;break;case 21:sr.prev=21,sr.t1=sr.catch(15),yr.logger.error("sync::syncTeamMembers: getTeams error",sr.t1),pr=[];case 25:z(pr).call(pr,function(Ir){wr[Ir.teamId]=0}),Nr={},z(Mr=re(_r)).call(Mr,function(Ir){var Ar=Ir.split("-")[1];Nr[Ar]=_r[Ir]}),re(Nr).length&&(wr=V(wr,Nr)),yr.logger.log("sync::syncTeamMembers: getTeamMemberTimetags",wr),(Pr=k(mr=yr.onSyncTeamMembers).call(mr,yr)).isImSyncDataCb=!0,yr.sendCmd("syncTeamMembers",{sync:wr,isImSyncDataObj:!0},Pr);case 33:case"end":return sr.stop()}},gr,this,[[4,10],[15,21]])}));return function(gr){return ar.apply(this,arguments)}}(),jt.syncSuperTeamMembers=function(){var ar=g(n.mark(function gr(pr){var yr,Sr,wr,Mr,mr,_r,Nr,Pr;return n.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(Sr=(yr=this).db,wr={},!Sr.enable){sr.next=33;break}return sr.prev=4,sr.next=7,Sr.getSuperTeamMemberTimetags();case 7:_r=sr.sent,sr.next=14;break;case 10:sr.prev=10,sr.t0=sr.catch(4),yr.logger.error("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags error",sr.t0),_r={};case 14:if(Ve(pr)){sr.next=25;break}return sr.prev=15,sr.next=18,Sr.getSuperTeams();case 18:pr=sr.sent,sr.next=25;break;case 21:sr.prev=21,sr.t1=sr.catch(15),yr.logger.error("sync::syncSuperTeamMembers: getSuperTeams error",sr.t1),pr=[];case 25:z(pr).call(pr,function(Ir){wr[Ir.teamId]=0}),Nr={},z(Mr=re(_r)).call(Mr,function(Ir){var Ar=Ir.split("-")[1];Nr[Ar]=_r[Ir]}),re(Nr).length&&(wr=V(wr,Nr)),yr.logger.log("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags",wr),(Pr=k(mr=yr.syncSuperTeamMembersCallBack).call(mr,yr)).isImSyncDataCb=!0,yr.sendCmd("syncSuperTeamMembers",{sync:wr,isImSyncDataObj:!0},Pr);case 33:case"end":return sr.stop()}},gr,this,[[4,10],[15,21]])}));return function(gr){return ar.apply(this,arguments)}}(),jt.onSyncTeamMembers=function(ar){ar&&(ar.callFunc="sync::onSyncTeamMembers",ar.message="同步群成员错误",this.onCustomError("SYNC_TEAM_MEMBERS_ERROR",ar))},jt.syncSuperTeamMembersCallBack=function(ar){ar&&(ar.callFunc="sync::SyncSuperTeamMembersCallBack",ar.message="同步超级群成员错误",this.onCustomError("SYNC_SUPERTEAM_MEMBERS_ERROR",ar))},jt.onSyncTeamMembersDone=function(){var ar=this,gr=ar.options,pr=ar.syncTeamMembersResult,yr=ar.syncTeamMembersPromiseArray;i.all(yr).then(function(){var Sr;yr=[];var wr={};z(Sr=re(pr)).call(Sr,function(Mr){var mr,_r,Nr,Pr;le(Mr).call(Mr,"invalid")===-1&&(Mr in wr?(L(mr=wr[Mr].members).call(mr,pr[Mr]),L(_r=wr[Mr].invalid).call(_r,pr[Mr+"-invalid"])):wr[Mr]={members:L(Nr=[]).call(Nr,pr[Mr]||[]),invalid:L(Pr=[]).call(Pr,pr[Mr+"-invalid"]||[])})}),gr.onsyncteammembersdone(wr),ar.syncTeamMembersResult=[],ar.syncTeamMembersPromiseArray=[]})},jt.onSyncSuperTeamMembersDone=function(){var ar=this,gr=ar.options,pr=ar.syncSuperTeamMembersResult,yr=ar.syncSuperTeamMembersPromiseArray;i.all(yr).then(function(){var Sr;yr=[];var wr={};z(Sr=re(pr)).call(Sr,function(Mr){var mr,_r,Nr,Pr;le(Mr).call(Mr,"invalid")===-1&&(Mr in wr?(L(mr=wr[Mr].members).call(mr,pr[Mr]),L(_r=wr[Mr].invalid).call(_r,pr[Mr+"-invalid"])):wr[Mr]={members:L(Nr=[]).call(Nr,pr[Mr]||[]),invalid:L(Pr=[]).call(Pr,pr[Mr+"-invalid"]||[])})}),gr.onsyncsuperteammembersdone(wr),ar.syncSuperTeamMembersResult=[],ar.syncSuperTeamMembersPromiseArray=[]})}},function(t,r,e){var n=e(817),g=e(818),y=e(314),i=e(819);t.exports=function(k){return n(k)||g(k)||y(k)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(313),g=e(316);t.exports=function(y){if(n(y))return g(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(158),g=e(64),y=e(315);t.exports=function(i){if(n!==void 0&&g(i)!=null||i["@@iterator"]!=null)return y(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(821);t.exports=n},function(t,r,e){e(822);var n=e(14);t.exports=n.Object.values},function(t,r,e){var n=e(1),g=e(823).values;n({target:"Object",stat:!0},{values:function(y){return g(y)}})},function(t,r,e){var n=e(29),g=e(13),y=e(124),i=e(47),k=g(e(157).f),L=g([].push),$=function(V){return function(z){for(var re,oe=i(z),le=y(oe),ue=le.length,ie=0,ae=[];ue>ie;)re=le[ie++],n&&!k(oe,re)||L(ae,V?[re,oe[re]]:oe[re]);return ae}};t.exports={entries:$(!0),values:$(!1)}},function(t,r,e){t.exports=e(825)},function(t,r,e){var n=e(826);t.exports=n},function(t,r,e){var n=e(18),g=e(827),y=Array.prototype;t.exports=function(i){var k=i.find;return i===y||n(y,i)&&k===y.find?g:k}},function(t,r,e){e(828);var n=e(27);t.exports=n("Array").find},function(t,r,e){var n=e(1),g=e(69).find,y=e(163),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),n({target:"Array",proto:!0,forced:i},{find:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),y("find")},function(t,r,e){var n=e(830);t.exports=n},function(t,r,e){var n=e(18),g=e(831),y=Array.prototype;t.exports=function(i){var k=i.findIndex;return i===y||n(y,i)&&k===y.findIndex?g:k}},function(t,r,e){e(832);var n=e(27);t.exports=n("Array").findIndex},function(t,r,e){var n=e(1),g=e(69).findIndex,y=e(163),i=!0;"findIndex"in[]&&Array(1).findIndex(function(){i=!1}),n({target:"Array",proto:!0,forced:i},{findIndex:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),y("findIndex")},function(t,r,e){var n=e(11),g=e(10),y=e(3),i=e(2),k=e(37).fn,L=e(0),$=L.objs2accounts,V=e(834),z=e(208);k.processUser=function(re){var oe,le=this,ue=le.db,ie=re.obj,ae=re.error,Fe=re.content;switch(re.cmd){case"markInBlacklist":ae||le.markInBlacklist(ie);break;case"syncMarkInBlacklist":le.markInBlacklist(Fe,!0);break;case"markInMutelist":ae||le.markInMutelist(ie);break;case"syncMarkInMutelist":le.markInMutelist(Fe,!0);break;case"getRelations":ae||le.onRelations(re);break;case"syncMyInfo":le.onMyInfo(re,!0);break;case"updateMyInfo":ae||(ie.user.updateTime=Fe.timetag,le.onUpdateMyInfo(re,ie.user));break;case"syncUpdateMyInfo":le.onUpdateMyInfo(re,Fe.user,!0);break;case"getUsers":var de;ae||(oe=n(de=Fe.users).call(de,function(Ne){return Ne=g(z).call(z,Ne,le.mixStorePolicy&&le.mixStorePolicy.s3Policy?le.mixStorePolicy.s3Policy.dlcdns:[],le.mixStorePolicy&&le.mixStorePolicy.s3Policy?le.mixStorePolicy.s3Policy.dlcdn:""),le.mergeUser(Ne),Ne}),re.obj=oe,ue.enable&&ue.putUsers(oe));break;case"updateDonnop":le.onUpdateDonnop(re);break;case"syncUpdateDonnop":le.onDonnop(re,!1)}},k.onMyInfo=function(re){var oe,le=this,ue=le.db,ie=re.error,ae=re.content,Fe=new y(function(Ne,Ve){var ze,jt;ie?(ie&&(ie.callFunc="user::onMyInfo"),Ne(ie),le.syncData()):(oe=g(z).call(z,ae.user),ue.enable?(ze=Ne,jt=Ve,ue.mergeMyInfo(oe,!0).then(function(){de(),ze()}).then(void 0,function(kt){kt.message="db.mergeMyInfo error",kt.callFunc="user::onMyInfo",jt(kt)})):(de(),Ne()))}).catch(function(Ne){return le.logger.error("user::onMyInfo: ",Ne),y.reject(Ne)});function de(){le.timetags.myInfo=oe.updateTime,le.syncResult.myInfo=oe}Fe.cmd="myInfo",le.syncPromiseArray.push(Fe)},k.onUpdateMyInfo=function(re,oe,le){var ue=this.db,ie=g(z).call(z,oe),ae=L.merge(this.myInfo,ie);this.myInfo=ae,le?(this.logger.info("user::onUpdateMyInfo:",ae&&ae.account),this.options.onupdatemyinfo(ae)):re.obj=ae,ue.enable&&(ie.account=this.account,ue.updateUser(ie))},k.onRelations=function(re){var oe,le=this,ue=le.db,ie=re.error,ae=le.packetFromSync(re),Fe=re.content.specialRelations,de=!0,Ne=[],Ve=[],ze=[],jt=[],kt=new y(function(lr,tr){var or,dr;ie?ae&&(lr(ie),le.syncData()):(i(Fe).call(Fe,function(cr){var nr={account:(cr=V.parse(cr)).account,createTime:cr.createTime,updateTime:cr.updateTime};cr.isBlacked?Ne.push(nr):Ve.push(nr),cr.isMuted?ze.push(nr):jt.push(nr)}),le.logger.info("user::onRelations: parse blacklist",$(Ne),Ne,"delete",$(Ve),Ve),le.logger.info("user::onRelations: parse mutelist",$(ze),ze,"delete",$(jt),jt),Fe.length?(de=!0,oe=re.content.timetag):de=!1,ue.enable?(or=lr,dr=tr,re.promise=new y(function(cr,nr){function ur(){ae?(Et(),cr(),or()):ue.getRelations().then(function(ar){Ne=ar[0],ze=ar[1],Et(),cr(),or()}).then(void 0,function(ar){ar.message="db.getRelations error",ar.callFunc="user::onRelations",nr(ar),dr(ar)})}de?ue.mergeRelations(Ne,Ve,ze,jt,oe).then(function(){ur()}).then(void 0,function(ar){ar.message="db.mergeRelations error",ar.callFunc="user::onRelations",nr(ar),dr(ar)}):(le.logger.warn("user::onRelations: no relations need merge"),ur())}).then(void 0,function(cr){throw cr.message="merge relations data error",cr.callFunc="user::onRelations",dr(cr),cr})):(Et(),lr()))}).catch(function(lr){return le.logger.error("user::onRelations: ",lr),y.reject(lr)});function Et(){le.timetags.relations=oe,Ne.invalid=Ve,ze.invalid=jt,ae?(le.syncResult.blacklist=Ne,le.syncResult.mutelist=ze,le.syncResult.invalidBlacklist=Ve,le.syncResult.invalidMutelist=jt):(le.logger.info("user::onRelations: get relations",Ne,ze),re.obj.blacklist=Ne,re.obj.mutelist=ze)}ae&&(kt.cmd="relations",le.syncPromiseArray.push(kt))},k.markInBlacklist=function(re,oe){var le=this.db;re.record={account:re.account,updateTime:+new Date},le.enable&&le.markInBlacklist(re),oe&&(this.logger.info("user::markInBlacklist:",re),this.options.onsyncmarkinblacklist(re))},k.markInMutelist=function(re,oe){var le=this.db;re.record={account:re.account,updateTime:+new Date},le.enable&&le.markInMutelist(re),oe&&(this.logger.info("user::markInMutelist:",re),this.options.onsyncmarkinmutelist(re))},k.mergeUser=function(re){this.userSet[re.account]=re}},function(t,r,e){var n=e(0);function g(){}g.parse=function(y){var i=n.copy(y);return i.isBlacked=i.isBlacked==="1",i.isMuted=i.isMuted==="1",i.createTime=+i.createTime,i.updateTime=+i.updateTime,i},t.exports=g},function(t,r,e){var n=e(127),g=e(2),y=e(10),i=e(3),k=e(4),L=e(11),$=["type"],V=e(37).fn,z=e(0),re=z.objs2accounts,oe=e(783),le=e(208);V.processFriend=function(ue){var ie=ue.obj,ae=ue.content,Fe=ue.error;switch(ue.cmd){case"friendRequest":this.updateFriendSysMsg(ue),Fe||this.onFriendRequest(ie);break;case"syncFriendRequest":this.onFriendRequest(ae,!0);break;case"deleteFriend":Fe||this.onDeleteFriend(ie);break;case"syncDeleteFriend":this.onDeleteFriend(ae,!0);break;case"updateFriend":Fe||this.onUpdateFriend(ie);break;case"syncUpdateFriend":this.onUpdateFriend(ae.friend,!0);break;case"getFriends":this.getFriends(ue);break;case"syncFriends":this.onFriends(ue);break;case"syncFriendUsers":this.onFriendUsers(ue)}},V.getFriends=function(ue){var ie=ue.content.friends,ae=[],Fe=[];g(ie).call(ie,function(de){(de=y(oe).call(oe,de)).valid?ae.push(de):Fe.push(de)}),ae.invalid=Fe,ue.obj=ae},V.onFriends=function(ue){var ie,ae=this,Fe=ae.db,de=ue.error,Ne=ue.content.friends,Ve=!0,ze=[],jt=[],kt=new i(function(lr,tr){var or,dr;de?tr(de):(function(){Ve&&g(Ne).call(Ne,function(cr){(cr=y(oe).call(oe,cr)).valid?ze.push(cr):jt.push(cr)}),ae.logger.info("friend::onFriends: parse friends",re(ze),"delete",re(jt)),Ne.length?(Ve=!0,ie=ue.content.timetag):Ve=!1}(),Fe.enable?(or=lr,dr=tr,ue.promise=new i(function(cr,nr){function ur(){Et(),cr(),or()}Ve?Fe.mergeFriends(ze,jt,ie).then(function(){ur()}).then(void 0,function(ar){ar._msg="merge friends error",nr(ar),dr(ar)}):(ae.logger.info("friend::onFriends: no merge friends"),ur())}).then(void 0,function(cr){throw cr._msg="merge friends data error",dr(cr),cr})):(Et(),lr()))}).catch(function(lr){return ae.logger.error("friend::onFriends: ",lr),i.reject(lr)});function Et(){var lr,tr;ae.timetags.friends=ie,ze.invalid=jt,ae.syncResult.friends=k(lr=ae.syncResult.friends||[]).call(lr,ze||[]),ae.syncResult.invalidFriends=k(tr=ae.syncResult.invalidFriends||[]).call(tr,jt||[])}kt.cmd="friends",ae.syncPromiseArray.push(kt)},V.onFriendRequest=function(ue,ie){var ae=i.resolve(),Fe=this.db,de=ue.type,Ne=n(ue,$);if((de=ue.type=oe.getTypeFromByte(de)||de)==="addFriend"||de==="passFriendApply"){var Ve=ue.friend=oe.assembleFriend(Ne);Fe.enable&&(ae=Fe.putFriend(Ve))}return ie&&this.onSyncFriendAction(ue),ae},V.onSyncFriendAction=function(ue){this.logger.info("friend::onSyncFriendActionon: ".concat(ue.type,", "),ue.account),this.options.onsyncfriendaction(ue)},V.onDeleteFriend=function(ue,ie){var ae=i.resolve(),Fe=this.db;return Fe.enable&&(ae=Fe.deleteFriend(ue.account)),ie&&(ue.type="deleteFriend",this.onSyncFriendAction(ue)),ae},V.onUpdateFriend=function(ue,ie){var ae=this.db,Fe=y(oe).call(oe,ue);ae.enable&&ae.updateFriend(Fe),ie&&this.onSyncFriendAction({type:"updateFriend",friend:Fe})},V.onFriendUsers=function(ue){var ie,ae,Fe=this.db,de=ue.content,Ne=L(ie=de.users).call(ie,function(jt){return y(le).call(le,jt)});this.logger.info("friend::onFriendUsers: parse users",re(Ne));var Ve=de.timetag,ze=i.resolve();Fe.enable&&(ze=Fe.mergeFriendUsers(Ne,Ve)),this.timetags.friendUsers=Ve,ze.cmd="friendUsers",this.syncPromiseArray.push(ze),this.syncResult.users=k(ae=this.syncResult.users||[]).call(ae,Ne||[]),this.syncing||this.onSyncDone()},V.updateFriendSysMsg=function(ue){var ie,ae,Fe=ue.obj,de=ue.error;if(ue.obj.idServer){if(de)ie="error",de=z.filterObj(de,"code message");else{var Ne=Fe.type;switch(Ne=oe.getTypeFromByte(Ne)||Ne){case"passFriendApply":ie="passed";break;case"rejectFriendApply":ie="rejected"}}ae={idServer:Fe.idServer,state:ie,from:Fe.account,type:"applyFriend"},de&&(ae.error=de),this.updateSysMsg(ae)}}},function(t,r,e){var n=e(28),g=e(15),y=e(37).fn,i=e(0);y.onRobots=function(k){var L=k.content;if(i.isFunction(this.options.onrobots)&&n(L.robots)){var $,V=g($=L.robots).call($,function(z){return!!z.botid});V.length>0&&this.options.onrobots(V||[])}}},function(t,r,e){var n=e(60),g=e(61),y=e(10),i=e(2),k=e(22),L=e(121),$=e(3),V=e(11),z=e(4),re=e(15),oe=e(5),le=e(37).fn,ue=e(0),ie=ue.objs2accounts,ae=ue.teams2ids,Fe=e(198),de=e(160);le.processTeam=function(Ne){var Ve,ze,jt,kt=Ne.error;switch(Ne.obj===void 0&&(Ne.obj={}),Ne.cmd){case"createTeam":Ve=Ne.obj.team,kt||(Ve=Ne.content.team),Ve=y(Fe).call(Fe,Ve),Ne.obj.team=Ve,jt=de.assembleOwner(Ve),Ne.obj.owner=jt,kt||(this.logger.info("team::processTeam: create team ",Ve&&Ve.teamId,jt&&jt.account),this.onCreateTeam(Ve,jt));break;case"syncCreateTeam":Ve=y(Fe).call(Fe,Ne.content.team),jt=de.assembleOwner(Ve),this.logger.info("team::processTeam: sync createTeam",Ve&&Ve.teamId,jt&&jt.account),this.options.onsynccreateteam(Ve,jt),this.onCreateTeam(Ve,jt);break;case"sendSuperTeamMsg":case"sendTeamMsg":this.onSendMsg(Ne);break;case"teamMsg":this.onMsg(Ne);break;case"teamMsgs":this.onMsgs(Ne);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":kt||(Ne.promise=this.onUpdateInfoInTeam(Ne));break;case"updateNickInTeam":Ne.obj=y(de).call(de,Ne.obj);break;case"updateTeam":Ne.obj=y(Fe).call(Fe,Ne.obj,!0);break;case"applyTeam":Ne.error||(Ne.obj=y(Fe).call(Fe,Ne.content.team));break;case"passTeamApply":this.updateTeamSysMsgState(Ne,"passed");break;case"rejectTeamApply":this.updateTeamSysMsgState(Ne,"rejected");break;case"acceptTeamInvite":this.updateTeamSysMsgState(Ne,"passed"),Ne.error||(Ne.obj=y(Fe).call(Fe,Ne.content.team));break;case"rejectTeamInvite":this.updateTeamSysMsgState(Ne,"rejected");break;case"getTeam":Ne.error||(Ne.obj=y(Fe).call(Fe,Ne.content.team));break;case"getTeams":this.onTeams(Ne);break;case"getTeamMembers":this.onTeamMembers(Ne);break;case"syncTeams":this.onTeams(Ne);break;case"syncTeamMembers":this.onTeamMembers(Ne);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":this.onHistoryMsgs(Ne);break;case"syncSendTeamMsg":this.onMsg(Ne);break;case"notifyTeamMsgReads":this.onTeamMsgReceipt(Ne);break;case"syncUpdateTeamMember":(ze=y(de).call(de,Ne.content.teamMember)).account===this.account&&this.mergeMyTeamMembers(ze),this.onUpdateTeamMember(ze);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":Ne.error||(Ne.obj=de.reverseMembers(Ne.content.teamMembers));break;case"getMutedTeamMembers":Ne.error||(Ne.obj={teamId:Ne.obj.teamId,members:de.reverseMembers(Ne.content.teamMembers)});break;case"syncMyTeamMembers":this.onSyncMyTeamMembers(Ne);break;case"sendTeamMsgReceipt":this.sendTeamMsgReceipt(Ne);break;case"getTeamMsgReads":this.getTeamMsgReads(Ne);break;case"getTeamMsgReadAccounts":this.getTeamMsgReadAccounts(Ne);break;case"getTeamsById":this.getTeamsById(Ne)}},le.onUpdateInfoInTeam=function(){var Ne=g(n.mark(function Ve(ze){var jt,kt,Et;return n.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(jt=this,!(ze.content&&ze.content.teamMember&&ze.content.teamMember.teamId)){lr.next=11;break}if(kt=y(de).call(de,ze.content.teamMember),!jt.db.enable){lr.next=7;break}return lr.next=6,jt.db.updateTeamMember(kt);case 6:kt=lr.sent;case 7:return jt.mergeMyTeamMembers(kt),jt.onUpdateTeamMember(kt),ze.obj=kt,lr.abrupt("return");case 11:if((Et=ze.obj.teamMember?ze.obj.teamMember:ze.obj).account=jt.account,Et.account){lr.next=15;break}return lr.abrupt("return");case 15:Et.id=de.genId(Et.teamId,Et.account),Et=y(de).call(de,Et),jt.mergeMyTeamMembers(Et),ze.obj=jt.myTeamMembersMap&&jt.myTeamMembersMap[Et.teamId]||Et,jt.onUpdateTeamMember(Et);case 20:case"end":return lr.stop()}},Ve,this)}));return function(Ve){return Ne.apply(this,arguments)}}(),le.getTeamMsgReads=function(Ne){var Ve=this;if(Ne.error)this.logger.error("team::sendTeamMsgReceipt: ",Ne.error);else{var ze=ue._get(Ne,"content.teamMsgReceipts")||[];if(this.db.enable){var jt=[];i(ze).call(ze,function(kt){kt.idClient&&jt.push({idClient:kt.idClient,unread:+kt.unread,read:+kt.read})}),jt.length>0&&k(function(){return Ve.db.updateMsgBatch(jt)},0)}}},le.getTeamMsgReadAccounts=function(Ne){if(Ne.error)this.logger.error("team::getTeamMsgReadAccounts: ",Ne.error);else{var Ve=ue._get(Ne,"content.readAccounts")||[],ze=ue._get(Ne,"content.unreadAccounts")||[],jt=ue._get(Ne,"content.teamMsgReceipt.idClient")||[];this.db.enable&&this.db.putMsgReadDetail({idClient:jt,readAccounts:Ve,unreadAccounts:ze})}},le.sendTeamMsgReceipt=function(Ne){var Ve=this;if(Ne.error)this.logger.error("team::sendTeamMsgReceipt: ",Ne.error);else{var ze=ue._get(Ne,"obj.teamMsgReceipts")||[],jt=ue._get(Ne,"content.teamMsgReceipts")||[];if(this.db.enable){var kt=[];i(ze).call(ze,function(Et){L(jt).call(jt,function(lr){return Et.idServer===lr.idServer})||kt.push({idClient:Et.idClient,hasRead:!0})}),kt.length>0&&(this.logger.log("sendTeamMsgReceipt::updateMsgBatch"),k(function(){return Ve.db.updateMsgBatch(kt)},0))}}},le.onCreateTeam=function(Ne,Ve){var ze=this.db;ze.enable&&(ze.putTeam(Ne),ze.putTeamMembers(Ve)),this.options.onCreateTeam(Ne,Ve)},le.onTeams=function(Ne){Ne.content=Ne.content||{};var Ve,ze=this,jt=ze.db,kt=ze.packetFromSync(Ne),Et=Ne.content.teams||[],lr=!0,tr=[],or=[];if(Ne.error)switch(Ne.error.code){case 803:Ne.error=null,lr=!1}var dr=new $(function(nr,ur){var ar,gr;Ne.error?kt&&ur(Ne.error):(function(){lr&&i(Et).call(Et,function(pr){(pr=y(Fe).call(Fe,pr)).validToCurrentUser?tr.push(pr):or.push(pr)}),Et.length?(lr=!0,Ve=Ne.content.timetag):lr=!1}(),jt.enable?(ar=nr,gr=ur,Ne.promise=new $(function(pr,yr){function Sr(){kt?(cr(),pr(),ar()):jt.getTeams().then(function(wr){tr=wr,cr(),pr(),ar()}).catch(function(wr){wr.message="db.getTeams error",wr.callFunc="team::afterMergeData",yr(wr),gr(wr)})}lr?jt.mergeTeams(tr,or,Ve).then(function(){Sr()}).catch(function(wr){var Mr={callFunc:"team::onTeams:mergeData",message:"db.mergeTeams error",event:wr};yr(Mr),gr(Mr)}):(ze.logger.warn("team::onTeams:mergeData: no teams need merge"),Sr())}).then(void 0,function(pr){throw pr.message="merge teams data error",pr.callFunc="team::mergeData",gr(pr),pr})):(cr(),nr()))}).catch(function(nr){return ze.logger.error("team::onTeams: ",nr),$.reject(nr)});function cr(){ze.timetags.teams=Ve,tr.invalid=or,kt?(ze.syncResult.teams=tr,ze.syncResult.invalidTeams=or,ze.syncing||ze.onSyncDone()):(ze.logger.info("team::onTeams: not in syncing, get teams",ae(tr)),Ne.obj=tr)}kt&&(dr.cmd="teams",ze.syncPromiseArray.push(dr))},le.getTeamsById=function(Ne){var Ve;if(Ne.error){if(Ne.error.code!==816)return;this.logger.error("team::getTeamsById: ",Ne.error),Ne.error=null}Ne.content.teams=V(Ve=Ne.content.teams).call(Ve,function(ze){return y(Fe).call(Fe,ze)}),Ne.obj=Ne.content},le.onTeamMembers=function(Ne){Ne.content=Ne.content||{};var Ve,ze=this,jt=ze.db,kt=ze.packetFromSync(Ne),Et=Ne.content.members||[],lr=!0,tr=[],or=[];if(Ne.obj&&(Ve=Ne.obj.teamId),Ve||(Ve=Ne.content.teamId),Ve=""+Ve,Ne.error)switch(Ne.error.code){case 406:Ne.error=null,lr=!1}var dr=new $(function(cr,nr){Ne.error?(ze.logger.error("team::onTeamMember: team error:",Ve,Ne.error),cr()):(function(){lr&&i(Et).call(Et,function(ur){(ur=y(de).call(de,ur)).valid?tr.push(ur):or.push(ur)}),Et.length?(lr=!0,Ne.content.timetag):lr=!1}(),function(ur,ar){if(kt){ze.syncTeamMembersResult[Ve]=tr,ze.syncTeamMembersResult[Ve+"-invalid"]=or;var gr=z(tr).call(tr,or);jt.putTeamMembers(gr).catch(function(pr){throw ze.logger.error("team::onTeamMembers: putTeamMembers error: ",pr),pr}).then(function(){return jt.updateTeamMemberTimetag(Ve,Ne.content.timetag)}).catch(function(pr){ze.logger.error("team::onTeamMembers error: ",pr,Ve,Ne.content.timetag)}).then(ur)}else ze.logger.info("team::onTeamMembers: not syncing, get members",Ve,ie(tr)),Ne.obj={teamId:Ve,members:tr},ur()}(cr))});kt&&(dr.cmd=Ve,ze.syncTeamMembersPromiseArray.push(dr))},le.onUpdateTeamMember=function(Ne){if(Ne.updateTime||(Ne.updateTime=+new Date),this.account===Ne.account){var Ve=this.myTeamMembersMap[Ne.teamId];this.logger.info("team::onMyTeamMembers: ",[Ve]),Ne=Ve||Ne,this.options.onMyTeamMembers(ue.simpleClone([Ve]))}this.logger.info("team::onUpdateTeamMember: ",Ne&&Ne.account),this.options.onupdateteammember(ue.simpleClone(Ne));var ze={teamId:Ne.teamId,memberUpdateTime:Ne.updateTime};this.onUpdateTeam(ze);var jt=this.db;jt.enable&&jt.updateTeamMember(Ne)},le.onUpdateTeam=function(Ne){this.logger.info("team::onUpdateTeam:",Ne&&Ne.teamId),this.options.onUpdateTeam(ue.simpleClone(Ne));var Ve=this.db;Ve.enable&&Ve.updateTeam(Ne)},le.onSyncMyTeamMembers=function(Ne){var Ve=this,ze=Ve.db,jt=de.reverseMembers(Ne.content.teamMembers);if(ze.enable){var kt=ze.putTeamMembers(jt).then(function(){return ze.updateMyTeamMembersTimetag(Ne.content.timetag)}).catch(function(Et){return Ve.logger.error("team::syncMyTeamMember: ",Et),$.reject(Et)});kt.cmd="myTeamMembers",Ve.syncTeamMembersPromiseArray.push(kt),Ve.syncPromiseArray.push(kt)}else Ve.syncResult.myTeamMembers=jt;Ve.mergeMyTeamMembers(jt)},le.mergeMyTeamMembers=function(Ne){ue.isArray(Ne)||(Ne=[Ne]);var Ve=this.myTeamMembersMap=this.myTeamMembersMap||{};i(Ne).call(Ne,function(ze){var jt=ze.teamId;Ve[jt]=ue.merge(Ve[jt],ze)})},le.notifyForNewTeamMsg=function(Ne){ue.isArray(Ne)||(Ne=[Ne]);var Ve=this,ze=this.myTeamMembersMap||{},jt={},kt=[];i(Ne).call(Ne,function(lr){ue.exist(ze[lr])?jt[lr]=ze[lr].muteNotiType:kt.push(lr)});var Et=$.resolve({map:jt});return kt.length&&(Et=Ve.api.getMyTeamMembers({teamIds:kt,promise:!0}).then(function(lr){Ve.mergeMyTeamMembers(lr),i(lr).call(lr,function(or){jt[or.teamId]=or.muteNotiType});var tr=re(Ne).call(Ne,function(or){return!jt[or]});return $.resolve({map:jt,miss:tr})}).catch(function(lr){return oe(jt).length>0?$.resolve({map:jt,miss:kt,error:lr}):$.reject(lr)})),Et},le.updateTeamSysMsgState=function(Ne,Ve){var ze,jt=Ne.error;jt&&(Ve="error",jt=ue.filterObj(jt,"code message")),ze={idServer:Ne.obj.idServer,state:Ve,from:Ne.obj.from,type:Ne.obj.type},jt&&(ze.error=jt),this.updateSysMsg(ze)},le.onTeamMsgReceipt=function(Ne){var Ve=Ne.content,ze=Ne.error;ze&&this.logger.error("team::onTeamMsgReceipt:",ze),Ve&&Ve.teamMsgReceipts&&(this.options.onTeamMsgReceipt(Ve),this.options.onMsgReceipts(Ve.teamMsgReceipts))}},function(t,r,e){var n=e(60),g=e(61),y=e(10),i=e(3),k=e(2),L=e(4),$=e(37).fn,V=e(0),z=V.teams2ids,re=e(312),oe=e(206);$.processSuperTeam=function(le){var ue,ie,ae,Fe=le.error;switch(le.obj===void 0&&(le.obj={}),le.cmd){case"sendSuperTeamMsg":this.onSendMsg(le);break;case"superTeamMsg":this.onMsg(le);break;case"sendSuperTeamCustomSysMsg":this.onSendSysMsg(le);break;case"superTeamCustomSysMsg":this.onSysMsg(le);break;case"syncSuperTeams":this.onSuperTeams(le);break;case"syncCreateSuperTeam":ue=y(re).call(re,le.content.team),ae=oe.assembleOwner(ue),this.logger.info("team::processTeam: sync createTeam",ue&&ue.teamId,ae&&ae.account),this.options.onSyncCreateSuperTeam(ue,ae),this.onCreateSuperTeam(ue,ae);break;case"getSuperTeamHistoryMsgs":case"searchSuperTeamHistoryMsgs":this.onHistoryMsgs(le);break;case"syncSendSuperTeamMsg":this.onMsg(le);break;case"addSuperTeamMembers":case"removeSuperTeamMembers":case"leaveSuperTeam":case"addSuperTeamManagers":case"removeSuperTeamManagers":case"transferSuperTeam":break;case"updateInfoInSuperTeam":Fe||(le.promise=this.onUpdateInfoInSuperTeam(le));break;case"updateNickInTeam":le.obj=y(oe).call(oe,le.obj);break;case"syncUpdateSuperTeamMember":(ie=y(oe).call(oe,le.content.teamMember)).account===this.account&&this.mergeMySuperTeamMembers(ie),this.onUpdateSuperTeamMember(ie);break;case"updateSuperTeam":le.obj=y(re).call(re,le.obj,!0);break;case"getSuperTeam":le.error||(le.obj=y(re).call(re,le.content.team));break;case"getSuperTeams":this.onSuperTeams(le);break;case"syncSuperTeamMembers":this.onSyncSuperTeamMembers(le);break;case"syncMySuperTeamMembers":this.onSyncMySuperTeamMembers(le);break;case"getSuperTeamMembers":le.error||this.onGetAllSuperTeamMembers(le);break;case"getSuperTeamMembersByJoinTime":case"getSuperTeamMembersByAccounts":case"getMutedSuperTeamMembers":le.error||this.onSuperTeamMembers(le);break;case"onDeleteSuperTeamMsg":this.onDeleteMsg(le);break;case"onSuperTeamMsgDelete":case"syncDeleteSuperTeamMsg":this.onMsgDeleted(le,!0);break;case"onMarkSuperTeamSessionAck":this.onMarkSessionAck(le);break;case"syncMarkSuperTeamSessionAck":this.syncMarkSessionAck(le);break;case"passSuperTeamApply":this.updateSuperTeamSysMsgState(le,"passed");break;case"rejectSuperTeamApply":this.updateTeamSysMsgState(le,"rejected");break;case"acceptSuperTeamInvite":this.updateTeamSysMsgState(le,"passed");break;case"rejectSuperTeamInvite":this.updateSuperTeamSysMsgState(le,"rejected");break;case"getMySuperTeamMembers":le.error||(le.obj=oe.reverseMembers(le.content.members))}},$.onUpdateInfoInSuperTeam=function(){var le=g(n.mark(function ue(ie){var ae,Fe,de;return n.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(ae=this,!(ie.content&&ie.content.superTeamMember&&ie.content.superTeamMember.teamId)){Ne.next=11;break}if(Fe=y(oe).call(oe,ie.content.superTeamMember),!ae.db.enable){Ne.next=7;break}return Ne.next=6,ae.db.updateSuperTeamMember(Fe);case 6:Fe=Ne.sent;case 7:return ae.mergeMySuperTeamMembers(Fe),ae.onUpdateSuperTeamMember(Fe),ie.obj=Fe,Ne.abrupt("return");case 11:(de=ie.obj.superTeamMember?ie.obj.superTeamMember:ie.obj).account=ae.account,de.id=oe.genId(de.teamId,de.account),de=y(oe).call(oe,de),ae.mergeMySuperTeamMembers(de),ie.obj=ae.mySuperTeamMembersMap&&ae.mySuperTeamMembersMap[de.teamId]||de,ae.onUpdateSuperTeamMember(de);case 18:case"end":return Ne.stop()}},ue,this)}));return function(ue){return le.apply(this,arguments)}}(),$.onSuperTeams=function(le){le.content=le.content||{};var ue,ie=this,ae=ie.db,Fe=ie.packetFromSync(le),de=le.content.teams||[],Ne=!0,Ve=[],ze=[];if(le.error)switch(le.error.code){case 803:le.error=null,Ne=!1}var jt=new i(function(Et,lr){var tr,or;le.error?Fe&&lr(le.error):(function(){Ne&&k(de).call(de,function(dr){(dr=y(re).call(re,dr)).validToCurrentUser?Ve.push(dr):ze.push(dr)}),de.length?(Ne=!0,ue=le.content.timetag):Ne=!1}(),ae.enable?(tr=Et,or=lr,le.promise=new i(function(dr,cr){function nr(){Fe?(kt(),dr(),tr()):ae.getSuperTeams().then(function(ur){Ve=ur,kt(),dr(),tr()}).then(void 0,function(ur){ur.message="db.getSuperTeams error",ur.callFunc="superTeam::afterMergeData",cr(ur),or(ur)})}Ne?ae.mergeSuperTeams(Ve,ze,ue).then(function(){nr()}).then(void 0,function(ur){var ar={callFunc:"superTeam::onSuperTeams:mergeData",message:"db.mergeSuperTeams error",event:ur};cr(ar),or(ar)}):(ie.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"),nr())}).then(void 0,function(dr){throw dr.message="merge teams data error",dr.callFunc="superTeam::mergeData",or(dr),dr})):(kt(),Et()))}).catch(function(Et){return ie.logger.error("superTeam::onSuperTeams: ",Et),i.reject(Et)});function kt(){ie.timetags.superTeams=ue,Ve.invalid=ze,Fe?(ie.syncResult.superTeams=Ve,ie.syncResult.invalidSuperTeams=ze):(ie.logger.info("superTeam::onSuperTeams: not in syncing, get teams",z(Ve)),le.obj=Ve)}Fe&&(jt.cmd="superteams",ie.syncPromiseArray.push(jt))},$.onCreateSuperTeam=function(le,ue){var ie=this.db;ie.enable&&(ie.putSuperTeam(le),ie.putSuperTeamMembers(ue))},$.onGetAllSuperTeamMembers=function(le){var ue=this,ie=this.db,ae=le.raw.ser,Fe=this.superTeamMembersData[ae]||{},de=Fe.teamId||le.obj&&le.obj.teamId;if(ie.enable){var Ne=le.content&&le.content.timetag,Ve=le.raw.code===200?i.all(Fe.pArr):i.resolve();le.promise=Ve.then(function(){return ie.getSuperTeamMembers(de).then(function(ze){Ne&&ie.updateSuperTeamMemberTimetag(de,Ne),le.obj={members:ze,invalid:[],teamId:de}})}).catch(function(ze){return ue.logger.error(ze)})}else le.obj={members:Fe.members,invalid:Fe.invalid,teamId:de};this.superTeamMembersData[ae]=void 0},$.onSyncSuperTeamMembers=function(le){var ue,ie=this,ae=this.db,Fe=[],de=[],Ne=le.content.members||[],Ve=le.raw.ser,ze=ie.packetFromSync(le);if(le.obj&&(ue=le.obj.teamId),ue||(ue=le.content.teamId),k(Ne).call(Ne,function(lr){(lr=y(oe).call(oe,lr)).valid?de.push(lr):Fe.push(lr)}),ze){var jt=new i(function(lr,tr){if(le.error)ie.logger.error("team::onSuperTeamMember: team error:",ue,le.error),lr();else{ie.syncSuperTeamMembersResult[ue]=de,ie.syncSuperTeamMembersResult[ue+"-invalid"]=Fe;var or=L(de).call(de,Fe);ae.putSuperTeamMembers(or).catch(function(dr){throw ie.logger.error("team::onSuperTeamMembers: putSuperTeamMembers error: ",dr),dr}).then(function(){return ae.updateSuperTeamMemberTimetag(ue,le.content.timetag)}).catch(function(dr){ie.logger.error("team::onSuperTeamMembers error: ",dr,ue,le.content.timetag)}).then(lr)}});ie.syncSuperTeamMembersPromiseArray.push(jt)}else{if(ae.enable){ie.superTeamMembersData[Ve]=ie.superTeamMembersData[Ve]||{teamId:ue,pArr:[]};var kt=i.resolve();le.content&&le.content.isAll&&(kt=ae.deleteSuperTeamMembers(ue));var Et=kt.then(function(){return ae.mergeSuperTeamMembers(ue,de,Fe)}).then(function(){return i.resolve()});ie.superTeamMembersData[Ve].pArr.push(Et)}else ie.superTeamMembersData[Ve]=ie.superTeamMembersData[Ve]||{teamId:ue,members:[],invalid:[]},de.length&&(ie.superTeamMembersData[Ve].members=ie.api.mergeTeamMembers(ie.superTeamMembersData[Ve].members,de)),Fe.length&&(ie.superTeamMembersData[Ve].invalid=ie.api.mergeTeamMembers(ie.superTeamMembersData[Ve].invalid,Fe));le.raw=void 0}},$.onSyncMySuperTeamMembers=function(le){var ue=this,ie=ue.db,ae=oe.reverseMembers(le.content.teamMembers);if(ie.enable){var Fe=ie.putSuperTeamMembers(ae).then(function(){return ie.updateMySuperTeamMembersTimetag(le.content.timetag)}).catch(function(de){return ue.logger.error("superTeam::syncMySuperTeamMember: ",de),i.reject(de)});ue.syncPromiseArray.push(Fe)}else ue.syncResult.mySuperTeamMembers=ae;ue.mergeMySuperTeamMembers(ae)},$.onSuperTeamMembers=function(le,ue){var ie,ae=this.db,Fe=[],de=[],Ne=le.content.members||[];k(Ne).call(Ne,function(Ve){(Ve=y(oe).call(oe,Ve)).valid?de.push(Ve):Fe.push(Ve)}),le.obj&&(ie=le.obj.teamId),ie||(ie=le.content.teamId||de[0]&&de[0].teamId),ae.enable&&!ue&&ae.mergeSuperTeamMembers(ie,de,Fe),le.obj={members:de,invalid:Fe,teamId:ie}},$.onUpdateSuperTeamMember=function(le){if(le.updateTime||(le.updateTime=+new Date),this.account===le.account){var ue=this.mySuperTeamMembersMap[le.teamId];this.logger.info("superTeam::onMySuperTeamMembers: ",[ue]),le=ue||le,this.options.onMySuperTeamMembers(V.simpleClone([ue]))}this.logger.info("superTeam::onUpdateSuperTeamMember: ",le&&le.account),this.options.onUpdateSuperTeamMember(V.simpleClone(le));var ie={teamId:le.teamId,memberUpdateTime:le.updateTime};this.onUpdateSuperTeam(ie);var ae=this.db;ae.enable&&ae.updateSuperTeamMember(le)},$.onUpdateSuperTeam=function(le){this.logger.info("superteam::onUpdateSuperTeam:",le&&le.teamId),this.options.onUpdateSuperTeam(V.simpleClone(le));var ue=this.db;ue.enable&&ue.updateSuperTeam(le)},$.mergeMySuperTeamMembers=function(le){V.isArray(le)||(le=[le]);var ue=this.mySuperTeamMembersMap=this.mySuperTeamMembersMap||{};k(le).call(le,function(ie){var ae=ie.teamId;ue[ae]=V.merge(ue[ae],ie)})},$.updateSuperTeamSysMsgState=function(le,ue){var ie,ae=le.error;ae&&(ue="error",ae=V.filterObj(ae,"code message")),ie={idServer:le.obj.idServer,state:ue,from:le.obj.from,type:le.obj.type},ae&&(ie.error=ae),this.updateSysMsg(ie)}},function(t,r,e){var n=e(10),g=e(3),y=e(22),i=e(37).fn,k=e(0),L=e(317);i.processNotify=function($){switch($.cmd){case"syncOfflineNetcallMsgs":case"syncOfflineMsgs":this.onOfflineMsgs($);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":case"syncOfflineSuperTeamSysMsgs":this.onOfflineSysMsgs($);break;case"syncRoamingMsgs":case"syncSuperTeamRoamingMsgs":this.onRoamingMsgs($);break;case"syncOfflineFilterMsgs":this.onOfflineMsgs($,!0);break;case"syncOfflineFilterSysMsgs":this.onOfflineSysMsgs($,!0);break;case"syncMsgReceipts":this.onOfflineMsgReceipts($);break;case"syncDonnop":this.onDonnop($,!0);break;case"syncSessionAck":this.syncSessionAck($);break;case"syncSuperTeamSessionAck":this.syncSuperTeamSessionAck($);break;case"syncRobots":this.onRobots($);break;case"syncBroadcastMsgs":this.onBroadcastMsgs($);break;case"syncDeleteSuperTeamMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming($);break;case"syncDeleteMsgSelf":this.syncDeleteMsgSelf($);break;case"syncSessionsWithMoreRoaming":this.syncSessionsWithMoreRoaming($);break;case"syncStickTopSessions":this.syncStickTopSessions($);break;case"syncSessionHistoryMsgsDelete":this.syncSessionHistoryMsgsDelete($)}},i.onDonnop=function($,V){if(!$.error){var z=this,re=z.db,oe=n(L).call(L,$.content.donnop);z.mergeDonnop(oe);var le=z.dbDonnop();if(V){var ue=$.content.timetag;z.timetags.donnop=ue,re.enable&&(le=le.then(function(){return z.db.updateDonnopTimetag(ue)}).catch(function(ie){return z.logger.error("notify::onDonnop: ",ie),g.reject(ie)})),le.cmd="donnop",z.syncPromiseArray.push(le)}else z.onPushNotificationMultiportConfigUpdate()}},i.onUpdateDonnop=function($){if(!$.error){var V=$.obj;V&&(this.mergeDonnop(k.filterObj(V,["shouldPushNotificationWhenPCOnline"])),this.dbDonnop(),this.onPushNotificationMultiportConfigUpdate())}},i.getPushNotificationMultiportConfig=function(){return k.merge({},this.pushNotificationMultiportConfig)},i.mergeDonnop=function($){this.pushNotificationMultiportConfig=k.merge({},this.pushNotificationMultiportConfig,$)},i.dbDonnop=function(){return this.db.enable?this.db.setDonnop(this.pushNotificationMultiportConfig):g.resolve()},i.onPushNotificationMultiportConfigUpdate=function(){var $=this;y(function(){var V=$.getPushNotificationMultiportConfig();$.logger.info("link::onPushNotificationMultiportConfigUpdate:",V),$.options.onPushNotificationMultiportConfigUpdate(V)})}},function(t,r,e){var n=e(51),g=e(2),y=e(15),i=e(11),k=e(3),L=e(5),$=e(8),V=e(6),z=e(10),re=e(143),oe=e(4),le=e(22),ue=e(23),ie=e(43),ae=e(34),Fe=e(95),de=e(52),Ne=e(53),Ve=e(54),ze=e(55),jt=e(42),kt=e(9),Et=e(68),lr=e(78),tr=e(64),or=e(28);function dr(sr,Ir){var Ar=lr!==void 0&&tr(sr)||sr["@@iterator"];if(!Ar){if(or(sr)||(Ar=function(Lr,Fr){var qr;if(Lr){if(typeof Lr=="string")return cr(Lr,Fr);var Vr=kt(qr=Object.prototype.toString.call(Lr)).call(qr,8,-1);if(Vr==="Object"&&Lr.constructor&&(Vr=Lr.constructor.name),Vr==="Map"||Vr==="Set")return Et(Lr);if(Vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vr))return cr(Lr,Fr)}}(sr))||Ir&&sr&&typeof sr.length=="number"){Ar&&(sr=Ar);var Cr=0,br=function(){};return{s:br,n:function(){return Cr>=sr.length?{done:!0}:{done:!1,value:sr[Cr++]}},e:function(Lr){throw Lr},f:br}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vr,Tr=!0,Br=!1;return{s:function(){Ar=Ar.call(sr)},n:function(){var Lr=Ar.next();return Tr=Lr.done,Lr},e:function(Lr){Br=!0,vr=Lr},f:function(){try{Tr||Ar.return==null||Ar.return()}finally{if(Br)throw vr}}}}function cr(sr,Ir){(Ir==null||Ir>sr.length)&&(Ir=sr.length);for(var Ar=0,Cr=new Array(Ir);Ar<Ir;Ar++)Cr[Ar]=sr[Ar];return Cr}function nr(sr,Ir){var Ar=L(sr);if(de){var Cr=de(sr);Ir&&(Cr=y(Cr).call(Cr,function(br){return Ne(sr,br).enumerable})),Ar.push.apply(Ar,Cr)}return Ar}var ur=e(37).fn,ar=e(0),gr=ar.undef,pr=e(48),yr=e(160),Sr=e(206),wr=e(162),Mr=e(297),mr=e(12),_r=e(70),Nr=e(80);function Pr(sr,Ir,Ar){var Cr=this,br=Cr.message.Message,vr=Ar?"offlineFilterMsgs":"offlineMsgs";if(!(Ir&&Ir.length>0))return k.resolve();var Tr=br.getMaxTimetag(Ir),Br=Ir[0].scene,Lr=Ir[0].target;Cr.markMsgRead(Ir),Ir=br.deduplication(Ir),Ir=br.sortMsgs(Ir);var Fr=Cr.genSessionByMsgs(Ir);Cr.cacheSyncedSession(Fr);var qr=Cr.putMsg(Ir,"offlineMsgs").then(function(Vr){var Qr=Vr;(Qr=Cr.filterIgnore(Qr)).length&&(Cr.logger.info("msg::onOfflineMsgs： toreLastSession",vr,sr,Qr.length),Cr.syncResult[vr]=Cr.syncResult[vr]||[],Cr.syncResult[vr].push({sessionId:sr,scene:Br,to:Lr,msgs:Qr,timetag:Tr}))}).catch(function(Vr){return Cr.logger.error("msg::onOfflineMsgs: ",Vr),k.reject(Vr)});return qr.cmd="offlineMsgs-"+sr,qr}ur.processMsg=function(sr){switch(sr.cmd){case"sendMsg":this.onSendMsg(sr);break;case"msg":this.onMsg(sr);break;case"sysMsg":this.onSysMsg(sr);break;case"broadcastMsg":this.onBroadcastMsg(sr);break;case"sendCustomSysMsg":this.onSendSysMsg(sr);break;case"getHistoryMsgs":case"searchHistoryMsgs":this.onHistoryMsgs(sr);break;case"msgFtsInServer":case"msgFtsInServerByTiming":this.onmsgFtsInServer(sr);break;case"syncSendMsg":this.onMsg(sr);break;case"deleteSessions":this.onDeleteSessions(sr);break;case"sendMsgReceipt":this.onSendMsgReceipt(sr);break;case"msgReceipt":this.onMsgReceipt(sr);break;case"onDeleteMsg":this.onDeleteMsg(sr);break;case"onMsgDeleted":this.onMsgDeleted(sr);break;case"onDeleteMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(sr);break;case"onMarkSessionAck":this.onMarkSessionAck(sr);break;case"syncMarkSessionAck":this.syncMarkSessionAck(sr);break;case"syncUpdateServerSession":this.onSyncUpdateServerSession(sr);break;case"deleteMsgSelf":this.deleteMsgSelf(sr);break;case"deleteMsgSelfBatch":this.deleteMsgSelfBatch(sr);break;case"onDeleteMsgSelf":this.onDeleteMsgSelf(sr);break;case"onDeleteMsgSelfBatch":this.onDeleteMsgSelfBatch(sr);break;case"clearServerHistoryMsgs":this.clearServerHistoryMsgs(sr);break;case"onClearServerHistoryMsgs":this.onClearServerHistoryMsgs(sr)}},ur.checkIgnore=function(sr){var Ir=this;g(sr).call(sr,function(Ar){if(!Ar.ignore){try{Ir.options.shouldIgnoreMsg(Ar)&&(Ar.ignore=!0)}catch(br){throw Ir.logger.error("userOption:shouldIgnoreMsg function error",br),br}var Cr;try{Cr=Ir.options.shouldIgnoreNotification(Ar)}catch(br){throw Ir.logger.error("userOption:shouldIgnoreNotification function error",br),br}Ar.type==="notification"&&Cr&&(Ar.ignore=!0)}})},ur.filterIgnore=function(sr){return y(sr).call(sr,function(Ir){return!Ir.ignore})},ur.genSessionByMsgs=function(sr){return this.checkIgnore(sr),wr.genSessionByMsgs(this.message.Message,sr)},ur.onRoamingMsgs=function(sr){var Ir=this,Ar=Ir.message,Cr=Ar.Message,br=Cr.getMaxTimetag,vr=Ar.reverseMsgs(sr.content.msgs),Tr=br(vr);vr=Cr.deduplication(vr);var Br=(vr=Cr.sortMsgs(vr))[0],Lr=Br.sessionId,Fr=Ir.genSessionByMsgs(vr);Ir.cacheSyncedSession(Fr);var qr=Ir.putMsg(vr,"roamingMsgs").then(function(Vr){var Qr,Sn=(vr=Vr).length,Mn=(vr=Ir.filterIgnore(vr)).length;Sn!==Mn&&Ir.logger.info("msg::onRoamingMsgs msg length before filter: "+Sn+" after filter: "+Mn),vr.length&&(Ir.logger.info("msg::onRoamingMsgs: putRoamingMsgs",Lr,vr.length,i(Qr=vr||[]).call(Qr,function(Xr){return"idServer: "+Xr.idServer+" idClient: "+Xr.idClient+" time:"+Xr.time+" type: "+Xr.type}).join(`
`)),Ir.syncResult.roamingMsgs=Ir.syncResult.roamingMsgs||[],Ir.syncResult.roamingMsgs.push({sessionId:Lr,scene:Br.scene,to:Br.target,msgs:vr,timetag:Tr}),Ir.syncing||Ir.roamingMsgSyncDoneBufferManager.add())}).catch(function(Vr){return Ir.logger.error("msg::onRoamingMsgs: ",Vr),k.reject(Vr)});qr.cmd="roamingMsgs-"+Lr,Ir.syncPromiseArray.push(qr)},ur.onOfflineMsgs=function(sr,Ir){var Ar,Cr=this,br=this.message,vr=null;Ir&&(vr={filter:!0});var Tr=br.reverseMsgs(sr.content.msgs,{modifyObj:vr});Tr=Nr.deduplication(Tr);var Br={};g(Tr).call(Tr,function(qr){Br[qr.sessionId]=Br[qr.sessionId]||[],Br[qr.sessionId].push(qr)});var Lr=i(Ar=L(Br)).call(Ar,function(qr){return{sessionId:qr,msgs:Br[qr]}}),Fr=ar.asyncPool(50,Lr,function(qr){return Pr.call(Cr,qr.sessionId,qr.msgs,Ir)});this.syncPromiseArray.push(Fr)},ur.completeMsg=function(sr){return sr.from=this.account,sr.fromNick=this.myInfo&&this.myInfo.nick,sr.fromClientType="Web",sr.fromDeviceId=pr.deviceId,sr.time||(sr.time=+new Date),sr},ur.amendMsg=function(sr){if(sr.scene==="team"){var Ir=ar.get(this.myTeamMembersMap,sr.to+".nickInTeam");Ir&&(sr.fromNick=Ir)}else if(sr.scene==="superTeam"){var Ar=ar.get(this.mySuperTeamMembersMap,sr.to+".nickInTeam");Ar&&(sr.fromNick=Ar)}return sr},ur.onMsgs=function(sr){var Ir=this,Ar=Ir.reporterHook.getSafeClock(),Cr=Ir.message.reverseMsgs(sr.content.msgs,{mapper:function(br){var vr=function(Tr){for(var Br=1;Br<arguments.length;Br++){var Lr,Fr,qr=arguments[Br]!=null?arguments[Br]:{};Br%2?g(Lr=nr(Object(qr),!0)).call(Lr,function(Vr){n(Tr,Vr,qr[Vr])}):Ve?ze(Tr,Ve(qr)):g(Fr=nr(Object(qr))).call(Fr,function(Vr){jt(Tr,Vr,Ne(qr,Vr))})}return Tr}({},br);if(vr.__receiveTime=sr.__receiveTime,vr.__handleTime=Ar,vr.__clientExt)try{vr.__clientExt=JSON.parse(vr.__clientExt)}catch{Ir.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(vr.__clientExt))}return Ir.handleMsg(vr),vr}});Ir.pushMsgDelay(Cr)},ur.onMsg=function(sr,Ir){var Ar;if(sr.content.msg.attach){var Cr=null;try{Cr=JSON.parse(sr.content.msg.attach)}catch{}if(Cr&&Cr.url&&ar.get(this.mixStorePolicy,"s3Policy.dlcdns")){var br,vr=dr(this.mixStorePolicy.s3Policy.dlcdns);try{for(vr.s();!(br=vr.n()).done;){var Tr,Br=br.value;$(Tr=Cr.url).call(Tr,Br)>=0&&(Cr.isS3=!0,Br!==this.mixStorePolicy.s3Policy.dlcdn&&(Cr.url=Cr.url.replace(Br,this.mixStorePolicy.s3Policy.dlcdn)))}}catch(Fr){vr.e(Fr)}finally{vr.f()}}sr.content.msg.attach=V(Cr)}var Lr=z(Ar=this.message).call(Ar,sr.content.msg);if(Lr.__receiveTime=sr.__receiveTime,Lr.__handleTime=this.reporterHook.getSafeClock(),ar.get(sr,"content.msg.__clientExt"))try{Lr.__clientExt=JSON.parse(sr.content.msg.__clientExt)}catch{this.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(sr.content.msg.__clientExt))}Ir&&(Lr.filter=!0),sr.cmd!=="syncSendMsg"||Lr.from!==Lr.to?(this.pushMsgDelay([Lr]),this.syncing?(this.logger.info("msg::onMsg:is in syncing ..."),this.unhandledMsgs.push({type:"onMsg",msg:Lr})):this.handleMsg(Lr)):this.logger.warn("onMsg::syncSendMsg to self, so ignore",Lr.idClient,Lr.idServer)},ur.onBroadcastMsgs=function(sr){var Ir=sr.content.broadcastMsgs;Ir=re(Ir).call(Ir,function(Ar,Cr){return Ar.broadcastId-Cr.broadcastId}),this.putBroadcastMsgs(Ir)},ur.onBroadcastMsg=function(sr){var Ir=sr.content.broadcastMsg;Ir.time=Ir.timestamp,this.syncing?this.unhandledMsgs.push({type:"onBroadcastMsg",msg:Ir}):Ir&&this.putBroadcastMsg(Ir)},ur.pushMsgTask=function(sr){this.msgPromise=this.msgPromise.then(function(){return sr()})},ur.pushMsgDelay=function(sr){if(sr&&sr.length>0){var Ir=this;if(Ir.msgStatEnable&&!mr.isWeixinApp){var Ar,Cr=i(sr).call(sr,function(br){return{appkey:Ir.options.appKey,accid:br.to,fromAccid:br.from,msgId:br.idServer,serverTime:br.time,receiveTime:Ir.reporterHook.getNTPTime(),sessionId:Ir.sdkSession,platform:"web",sdk_ver:mr.info.version,manufactor:_r.name+" "+_r.version}});Ir.msgDelayArr=oe(Ar=Ir.msgDelayArr).call(Ar,Cr),Ir.msgDelayArr.length>5&&Ir.doReportMsgDelay()}}},ur.doReportMsgDelay=function(){var sr,Ir=V(this.msgDelayArr);this.msgDelayArr&&this.msgDelayArr.length>0&&(Mr.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived",Ir),this.msgDelayArr=[]),this.msgDelayTimer&&clearTimeout(this.msgDelayTimer),this.socket&&(this.msgDelayTimer=le(ue(sr=this.doReportMsgDelay).call(sr,this),1e4))},ur.handleMsg=function(sr){var Ir,Ar=this,Cr=Ar.db,br=sr.time;Ar.markMsgRead(sr),Ar.logger.info(oe(Ir="msg::handleMsg:msgPromise start ".concat(sr.idServer," ")).call(Ir,sr.idClient)),Ar.msgPromise=Ar.msgPromise.then(function(){var vr;return Ar.logger.info(oe(vr="msg::handleMsg:msgPromise, putMsg start ".concat(sr.idServer," ")).call(vr,sr.idClient)),Ar.putMsg(sr,"onMsg")}).then(function(){var vr;return Ar.logger.info(oe(vr="msg::handleMsg:msgPromise, putMsg done and update timetag ".concat(sr.idServer," ")).call(vr,sr.idClient)),Cr.enable?sr.scene==="superTeam"?Cr.updateSuperTeamRoamingMsgTimetag(br):Cr.updateRoamingMsgTimetag(br):(Ar.timetags[sr.scene==="superTeam"?"superTeamRoamingMsgs":"roamingMsgs"]=br,k.resolve())}).then(function(){if(sr)return Ar.checkUserUpdate(sr)}).then(function(){if(sr){var vr=sr.type;switch(Ar.logger.info("msg::handleMsg:msgPromise, checkUserUpdate "+sr.scene+" "+vr+" msg"+(vr==="notification"?" "+sr.attach.type:"")),vr){case"notification":return Ar.onTeamNotificationMsg(sr)}}}).then(function(){var vr,Tr;Ar.logger.info(oe(vr=oe(Tr="msg::handleMsg:msgPromise, onmsg ready: ".concat(sr.idServer," ")).call(Tr,sr.idClient,", ")).call(vr,!!sr.ignore)),sr&&!sr.ignore&&le(function(){var Br,Lr=sr.scene==="p2p";if(mr.isBrowser&&sr.flow!=="out"){var Fr={msgId:sr.idServer,clientId:sr.idClient,receiveTime:Ar.reporterHook.getNTPTime(sr.__receiveTime),serverTime:sr.time,callbackTime:Ar.reporterHook.getNTPTime(),preHandleTime:Ar.reporterHook.getNTPTime(sr.__handleTime),fromAccid:sr.from,toAccid:Ar.options.account,type:Ar.message.sceneMap[sr.scene],tid:Lr?"":sr.to,result:200,failReason:"",rt:ie(Ar.reporterHook.getSafeClock()-sr.__receiveTime)},qr=ar.get(sr,"__clientExt.statistics.apiCallingTime"),Vr=ar.get(sr,"__clientExt.statistics.sendTime");qr&&Vr&&(Fr.apiCallingTime=qr,Fr.sendTime=Vr,Fr.attachUploadDuration=ar.get(sr,"__clientExt.statistics.attachUploadDuration")||0),Ar.reporter&&Ar.reporter.report("msgReceive",Fr)}delete sr.__receiveTime,delete sr.__handleTime,delete sr.__clientExt,Ar.logger.info(oe(Br="msg::handleMsg:msgPromise, tigger onmsg: ".concat(sr.idServer," ")).call(Br,sr.idClient)),Ar.options.onmsg(ar.copy(sr))},0)}).catch(function(vr){var Tr;Ar.logger.error(oe(Tr="msg::handleMsg:msgPromise, catch err ".concat(sr.idServer," ")).call(Tr,sr.idClient),vr),vr.callFunc="msg::handleMsg",Ar.onCustomError("消息处理错误",vr)})},ur.putMsg=function(sr,Ir){if(ar.isArray(sr)||(sr=[sr]),y(sr[0]))return k.resolve(sr);var Ar,Cr=this,br=Cr.db,vr=br.enable,Tr=k.resolve(),Br=Cr.message.Message.getLastMsg(sr),Lr=Br.flow,Fr=Cr.genSessionByMsgs(sr);Vr(Fr);var qr=[];function Vr(Qr){Ir!=="roamingMsgs"&&Ir!=="offlineMsgs"||Cr.cacheSyncedSession(Qr)}return Tr=(Tr=(Tr=Tr.then(function(){var Qr;return vr||Cr.options.autoMarkRead||Ir==="roamingMsgs"||!Fr||(Cr.sessionUnreadMsgs=Cr.sessionUnreadMsgs||{},Cr.sessionUnreadMsgs[Fr.id]=Cr.sessionUnreadMsgs[Fr.id]||[],Cr.sessionUnreadMsgs[Fr.id]=oe(Qr=Cr.sessionUnreadMsgs[Fr.id]).call(Qr,y(sr).call(sr,function(Sn){try{return Cr.options.shouldCountNotifyUnread(Sn)}catch(Mn){throw Cr.logger.error("userOption:shouldCountNotifyUnread function error",Mn),Mn}}))),Ir==="offlineMsgs"||Ir==="roamingMsgs"?k.reject(sr):vr?br.putMsg(sr):sr}).then(function(Qr){return g(sr).call(sr,function(Sn){Cr.checkMsgUnique(Sn)&&Cr.logger.warn("msg::putMsg: msg is not unique",Sn.idClient,Sn.idServer,Sn.time)}),qr=vr?Qr:sr,k.resolve(sr)})).then(function(Qr){return Qr.length&&vr&&Fr?new k(function(Sn){br.getSessions({sessionId:Fr.id}).then(function(Mn){if(Mn&&Mn.lastMsg){var Xr=Mn.lastMsg;Fr.lastMsg&&Fr.lastMsg.time<Xr.time&&(Fr.lastMsg=Xr)}qr&&qr.length?Fr?br.putSession(Fr).then(function(Wn){Sn(Wn)}):Sn(Mn):(qr=Qr,Sn(Mn))})}):k.resolve(Fr)})).then(function(Qr){if(Fr&&qr.length){Ar=Br.sessionId!==Cr.currSessionId;var Sn=Ir==="roamingMsgs",Mn=Cr.options.syncSessionUnread,Xr=Fr.id,Wn=Cr.getSessionInCache(Xr,!0)||{},Zr=Wn.ack||0;if(Ir==="offlineMsgs"||Sn&&Mn||Ir==="onMsg"&&Lr==="in"&&Ar){var En;if(vr&&Qr){var Jr=Wn.unread||0;(Fr=Qr).unread=Jr,Zr=Zr||Fr.ack||0}else(Qr=Wn)&&(Fr.unread=Qr.unread||0);Vr(Fr),Fr.unread=Fr.unread||0;var kn=0;g(qr).call(qr,function(wn){var Pn;try{Pn=Cr.options.shouldCountNotifyUnread(wn)}catch(An){throw Cr.logger.error("userOption:shouldCountNotifyUnread function error",An),An}var oo=(wn.type!=="notification"||wn.type==="notification"&&Pn)&&(gr(wn.isUnreadable)||wn.isUnreadable);if(oo&&Mn&&(oo=wn.time>Zr&&wn.flow!=="out"),oo&&(kn++,Mn&&!vr)){var Rn=Wn.unreadMsgs||[];Rn.push(wn),Fr.unreadMsgs=Rn}}),Fr.unread+=kn;var Un=ar.secureOutput("session",Fr);if(Un.unreadMsgs&&(Un.unreadMsgs=i(En=Un.unreadMsgs).call(En,function(wn){return wn&&wn.idServer})),Cr.logger.info("msg::putMsg:updateSession: ",Un),Vr(Fr),vr)return br.updateSession({id:Fr.id,unread:Fr.unread})}}}),Ir==="onMsg"&&(Tr=Tr.then(function(){sr.length&&Fr&&(Cr.onUpdateSession(Fr),Cr.options.syncSessionUnread&&!Ar&&Cr.api.resetSessionUnread(Cr.currSessionId))})),Tr.then(function(){return k.resolve(sr)}).catch(function(Qr){return Qr&&Qr.length?k.resolve(Qr):k.reject(Qr)})},ur.putBroadcastMsgs=function(sr){var Ir=this,Ar=Ir.db,Cr=sr.length;if(Cr>0){if(Ir.doMarkBroadcastMsgsRead(sr),Ar.enable){var br=sr[Cr-1].broadcastId;return Ar.updateBroadcastMsgTimetag(br),Ar.putBroadcastMsg(sr).then(function(){return le(function(){Ir.doMarkMsgsRead(),Ir.options.onbroadcastmsgs(ar.copy(sr))},0),k.resolve(sr)})}le(function(){Ir.options.onbroadcastmsgs(ar.copy(sr))},0)}return sr},ur.putBroadcastMsg=function(sr){var Ir=this,Ar=Ir.db;return Ir.doMarkBroadcastMsgsRead([sr]),Ar.enable?(sr.broadcastId&&Ar.updateBroadcastMsgTimetag(sr.broadcastId),Ar.putBroadcastMsg(sr).then(function(){return le(function(){Ir.options.onbroadcastmsg(ar.copy(sr))},0),k.resolve(sr)})):(le(function(){Ir.options.onbroadcastmsg(ar.copy(sr))},0),sr)},ur.doMarkBroadcastMsgsRead=function(sr){sr=i(sr).call(sr,function(Ir){return Ir.broadcastId}),this.sendCmd("batchMarkRead",{sid:7,cid:17,ids:sr})},ur.cacheSyncedSession=function(sr){if(sr&&this.syncResult){sr=ae({},sr),this.syncResult.sessions=this.syncResult.sessions||{};var Ir=sr.id,Ar=this.syncResult.sessions[Ir]||{};Ar&&Ar.ack>sr.ack&&delete sr.ack,Ar&&Ar.msgReceiptTime>sr.msgReceiptTime&&delete sr.msgReceiptTime;var Cr=ar.get(Ar,"lastMsg.time"),br=ar.get(sr,"lastMsg.time");Cr&&br&&Cr>br&&(sr.lastMsg=Ar.lastMsg),this.syncResult.sessions[Ir]=ae(Ar,sr),this.syncResult.sessions[Ir]=ae({},this.mergeSession(this.syncResult.sessions[Ir]))}},ur.checkMsgUnique=ar.genCheckUniqueFunc("idClient"),ur.revokeMsgUniqueCheck=function(sr){this.uniqueSet&&this.uniqueSet.idClient&&(this.uniqueSet.idClient[sr]=!1)},ur.storeSendMsg=function(sr){if(!this.syncing){var Ir=this.putMsg(sr,"sendMsg");return this.msgPromise=this.msgPromise.then(function(){return Ir}),Ir}this.unhandledMsgs.push({type:"sendMsg",msg:sr})},ur.updateSendMsgError=function(sr){if(!this.syncing){var Ir=this.updateMsg(sr);return this.msgPromise=this.msgPromise.then(function(){return Ir}),Ir}this.unupdatedMsgs.push(sr)},ur.onSendMsg=function(sr,Ir){var Ar,Cr,br=this,vr=sr.content&&sr.content.msg,Tr=sr.obj&&sr.obj.msg||vr;if(Tr)if(this.logger.warn(oe(Ar=oe(Cr="sendMsg::end: ".concat(vr&&vr.idServer," ")).call(Cr,Tr.idClient," ")).call(Ar,sr&&sr.raw&&sr.raw.ser)),sr.obj)Lr();else{var Br=br.db;Br&&Br.enable&&Br.getMsgByIdClient(Tr.idClient).then(function(Fr){Fr&&(Tr=Fr,Lr(!1))}).catch(function(){return Lr()})}else this.logger.error("sendMsg::error::get msg failed, msg empty");function Lr(){var Fr,qr=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];br.completeMsg(Tr);var Vr=sr.error&&sr.error.code===7101;sr.error&&!Vr||(Tr.idServer=vr.idServer,Tr.time=+vr.time,vr.yidunAntiSpamRes&&(Tr.yidunAntiSpamRes=vr.yidunAntiSpamRes),vr.callbackExt&&(Tr.callbackExt=vr.callbackExt)),Vr&&(Tr.isInBlackList=!0),sr.error?Tr.status="fail":Tr.status="success",Tr=qr?z(Fr=br.message).call(Fr,Tr):Tr,Tr=br.amendMsg(Tr),Ir&&(Tr.filter=!0),sr.obj=Tr,br.syncing?br.unupdatedMsgs.push(Tr):br.msgPromise=k.all([br.msgPromise,sr.obj.promise]).then(function(Qr){return Qr.length||(Tr.resend=!0),br.updateMsg(Tr).then(function(){return br.options.syncSessionUnread&&br.currSessionId===Tr.sessionId&&br.api.resetSessionUnread(br.currSessionId),br.resolveMsgReceiptTask(Tr),Tr})}).catch(function(Qr){br.logger.error("onSendMsg::dealMsg error",Qr)})}},ur.updateLocalMsg=function(sr){var Ir=this.updateMsg(sr);return this.msgPromise=this.msgPromise.then(function(){return Ir}),Ir},ur.updateMsg=function(sr){if(y(sr)||this.options.shouldIgnoreMsg(sr))return k.resolve(sr);var Ir=this,Ar=Ir.db,Cr=sr.status==="success",br=wr.genSessionByMsg(sr),vr=!!sr.isLocal;return Ir.onUpdateSession(br),Ar.enable?Ar.updateMsg(sr).then(function(Tr){var Br=Ar.updateSession(br),Lr=k.resolve();return Cr&&Tr&&!vr&&(Lr=sr.scene==="superTeam"?Ar.updateSuperTeamRoamingMsgTimetag(Tr.time):Ar.updateRoamingMsgTimetag(Tr.time)),k.all([Br,Lr])}).catch(function(Tr){Ir.logger.error("updateMsg error",Tr)}):(Cr&&!vr&&(Ir.timetags.roamingMsgs=sr.time),k.resolve(sr))},ur.updateRoamingMsgTimetag=function(sr){var Ir=this.db;return Ir.enable?Ir.updateRoamingMsgTimetag(sr):(this.timetags.roamingMsgs=sr,k.resolve(sr))},ur.checkUserUpdate=function(sr){var Ir=this,Ar=sr.from;return Ir.logger.info("handleMsg::checkUserUpdate: ",Ar,Ir.account),Ar===Ir.account?k.resolve():new k(function(Cr){var br=Ir.userSet[Ar];if(br){var vr=+br.updateTime,Tr=+sr.userUpdateTime;!isNaN(vr)&&!isNaN(Tr)&&ar.isNumber(vr)&&ar.isNumber(Tr)&&vr<Tr?Br():Cr()}else Br();function Br(){Ir.api.getUser({account:Ar,sync:!0,done:function(Lr,Fr){Lr||le(function(){Ir.logger.log("user::checkUserUpdate: onupdateuser",Fr&&Fr.account),Ir.options.onupdateuser(Fr)},0),Cr()}})}})},ur.processUnsettledMsgs=function(){var sr,Ir,Ar=this;g(sr=Ar.unhandledMsgs).call(sr,function(Cr){var br=Cr.msg;switch(Cr.type){case"onMsg":Ar.handleMsg(br);break;case"sendMsg":Ar.msgPromise=Ar.msgPromise.then(function(){return Ar.putMsg(br)});break;case"onBroadcastMsg":Ar.msgPromise=Ar.msgPromise.then(function(){return Ar.putBroadcastMsg(br)})}}),g(Ir=Ar.unupdatedMsgs).call(Ir,function(Cr){Ar.msgPromise=Ar.msgPromise.then(function(){return Ar.updateMsg(Cr)})}),Ar.resetUnsettledMsgs()},ur.onTeamNotificationMsg=function(sr){var Ir=sr.attach,Ar=Ir.type,Cr=sr.from,br=sr.to,vr=sr.time,Tr=Ir.team,Br=Ir.account,Lr=Ir.accounts;switch(Ar){case"updateTeam":return Tr.updateTime=vr,this.onUpdateTeam(Tr);case"addTeamMembers":return this.onAddTeamMembers(sr,Tr,Lr);case"removeTeamMembers":return this.onRemoveTeamMembers(Tr,br,Lr);case"acceptTeamInvite":return this.onAddTeamMembers(sr,Tr,[Cr]);case"passTeamApply":return this.onAddTeamMembers(sr,Tr,[Br]);case"addTeamManagers":return this.updateTeamManagers(sr,br,Lr,!0,vr);case"removeTeamManagers":return this.updateTeamManagers(sr,br,Lr,!1,vr);case"leaveTeam":return this.onRemoveTeamMembers(Tr,br,[Cr]);case"dismissTeam":return this.onDismissTeam(br,vr);case"transferTeam":return this.transferTeam(sr,Tr,Cr,Br);case"updateTeamMute":return this.onUpdateTeamMembersMute(sr,Tr,[Br],Ir.mute);case"updateSuperTeam":return Tr.updateTime=vr,this.onUpdateSuperTeam(Tr);case"acceptSuperTeamInvite":return this.onAddSuperTeamMembers(sr,Tr,[sr.from]);case"addSuperTeamMembers":return this.onAddSuperTeamMembers(sr,Tr,Lr);case"passSuperTeamApply":return this.onAddSuperTeamMembers(sr,Tr,[Br]);case"removeSuperTeamMembers":return this.onRemoveSuperTeamMembers(Tr,br,Lr);case"leaveSuperTeam":return this.onRemoveSuperTeamMembers(Tr,br,[Cr]);case"dismissSuperTeam":return this.onDismissSuperTeam(br,vr);case"transferSuperTeam":return this.transferSuperTeam(sr,Tr,Cr,Br);case"addSuperTeamManagers":return this.updateSuperTeamManagers(sr,br,Lr,!0,vr);case"removeSuperTeamManagers":return this.updateSuperTeamManagers(sr,br,Lr,!1,vr);case"updateSuperTeamMembersMute":return this.onUpdateSuperTeamMembersMute(sr,Tr,Lr,Ir.mute)}},ur.onAddSuperTeamMembers=function(sr,Ir,Ar){var Cr=this.db,br=Sr.assembleMembers(Ir,Ar);sr.attach.members=br;var vr={team:Ir,accounts:Ar,members:br};if(this.logger.info("team::onAddSuperTeamMembers: ".concat(vr.team.teamId,", "),vr.accounts),this.options.onAddSuperTeamMembers(ar.simpleClone(vr)),Cr.enable){var Tr=Cr.putSuperTeamMembers(br),Br=Cr.putSuperTeam(Ir);return k.all([Tr,Br])}},ur.onRemoveSuperTeamMembers=function(sr,Ir,Ar){var Cr=this.db,br={team:sr,teamId:Ir,accounts:Ar};if(this.logger.info("team::onRemoveSuperTeamMembers: ".concat(Ir,", "),br.accounts),this.options.onRemoveSuperTeamMembers&&this.options.onRemoveSuperTeamMembers(ar.simpleClone(br)),this.mySuperTeamMembersMap&&this.mySuperTeamMembersMap[Ir]&&this.mySuperTeamMembersMap[Ir].followAccountIds){var vr=this.mySuperTeamMembersMap[Ir].followAccountIds;if(y(vr).call(vr,function(Fr){return Fe(Ar).call(Ar,Fr)}).length>0){this.mySuperTeamMembersMap[Ir].followAccountIds=y(vr).call(vr,function(Fr){return!Fe(Ar).call(Ar,Fr)});var Tr=this.mySuperTeamMembersMap[Ir];this.db.enable&&this.db.updateSuperTeamMember(Tr),this.mergeMySuperTeamMembers(Tr),this.onUpdateSuperTeamMember(Tr)}}if(sr&&Cr.enable){if($(Ar).call(Ar,this.account)===-1){var Br=Cr.removeSuperTeamMembersByAccounts(Ir,Ar),Lr=k.resolve();return sr&&(Lr=Cr.putSuperTeam(sr)),k.all([Br,Lr])}return Cr.leaveSuperTeam(Ir)}},ur.onDismissSuperTeam=function(sr,Ir){var Ar=this.db,Cr={teamId:sr};if(this.logger.info("team::onDismissSuperTeam:",sr),this.options.onDismissSuperTeam(Cr),Ar.enable)return Ar.dismissSuperTeam(sr,Ir)},ur.onAddTeamMembers=function(sr,Ir,Ar){var Cr=this,br=Cr.db,vr=Ir.teamId,Tr=yr.assembleMembers(Ir,Ar);sr.attach.members=Tr;var Br={team:Ir,accounts:Ar,members:Tr};if(Cr.logger.info("team::onAddTeamMembers: ",vr,Ar),$(Ar).call(Ar,Cr.account)>-1&&Cr.mergeMyTeamMembers(y(Tr).call(Tr,function(qr){return qr.account===Cr.account})),Cr.options.onAddTeamMembers(ar.simpleClone(Br)),br.enable){var Lr,Fr=br.putTeam(Ir);return $(Ar).call(Ar,Cr.account)>-1?Lr=br.putTeamMembers(Tr):Cr.logger.log("team::onAddTeamMembers: user join team",vr),k.all([Lr,Fr])}},ur.onRemoveTeamMembers=function(sr,Ir,Ar){var Cr=this.db,br={team:sr,teamId:Ir,accounts:Ar};if(this.logger.info("team::onRemoveTeamMembers: ".concat(Ir),Ar),this.options.onRemoveTeamMembers&&this.options.onRemoveTeamMembers(ar.simpleClone(br)),this.myTeamMembersMap&&this.myTeamMembersMap[Ir]&&this.myTeamMembersMap[Ir].followAccountIds){var vr=this.myTeamMembersMap[Ir].followAccountIds;if(y(vr).call(vr,function(Fr){return Fe(Ar).call(Ar,Fr)}).length>0){this.myTeamMembersMap[Ir].followAccountIds=y(vr).call(vr,function(Fr){return!Fe(Ar).call(Ar,Fr)});var Tr=this.myTeamMembersMap[Ir];this.db.enable&&this.db.updateTeamMember(Tr),this.mergeMyTeamMembers(Tr),this.onUpdateTeamMember(Tr)}}if(sr&&Cr.enable){if($(Ar).call(Ar,this.account)===-1){var Br=Cr.removeTeamMembersByAccounts(Ir,Ar),Lr=k.resolve();return sr&&(Lr=Cr.putTeam(sr)),k.all([Br,Lr])}return Cr.leaveTeam(Ir)}},ur.updateTeamManagers=function(sr,Ir,Ar,Cr,br){var vr=this.db,Tr=sr.attach.members=i(Ar).call(Ar,function(Vr){return{id:yr.genId(Ir,Vr),type:Cr?"manager":"normal",updateTime:br,account:Vr}}),Br={teamId:""+Ir,memberUpdateTime:br};sr.attach.team=Br;var Lr={team:Br,accounts:Ar,isManager:Cr,members:Tr};if(this.logger.info("team::updateTeamManagers:",Ir,Ar,Cr),this.options.onUpdateTeamManagers(ar.simpleClone(Lr)),vr.enable){var Fr=vr.updateTeam(Br),qr=vr.updateTeamManagers(Ir,Ar,Cr,br);return k.all([Fr,qr])}},ur.updateSuperTeamManagers=function(sr,Ir,Ar,Cr,br){var vr=this.db,Tr=sr.attach.members=i(Ar).call(Ar,function(Vr){return{id:yr.genId(Ir,Vr),teamId:Ir,account:Vr,type:Cr?"manager":"normal",updateTime:br}}),Br={teamId:""+Ir,memberUpdateTime:br};sr.attach.team=Br;var Lr={team:Br,accounts:Ar,isManager:Cr,members:Tr};if(this.logger.info("team::updateSuperTeamManagers:",Ir,Ar,Cr),this.options.onUpdateSuperTeamManagers(ar.simpleClone(Lr)),vr.enable){var Fr=vr.updateSuperTeam(Br),qr=vr.updateSuperTeamMembers(Tr);return k.all([Fr,qr])}},ur.onDismissTeam=function(sr,Ir){var Ar=this.db,Cr={teamId:sr};if(this.logger.info("team::onDismissTeam:",sr),this.options.onDismissTeam(Cr),Ar.enable)return Ar.dismissTeam(sr,Ir)},ur.transferTeam=function(sr,Ir,Ar,Cr){var br=this.db,vr=Ir.teamId,Tr=Ir.memberUpdateTime,Br={id:yr.genId(vr,Ar),type:"normal",updateTime:Tr},Lr={id:yr.genId(vr,Cr),type:"owner",updateTime:Tr};sr.attach.members=[Br,Lr];var Fr={team:Ir,from:Br,to:Lr};if(this.logger.info("team::transferTeam: from to",vr,Ar,Cr),this.options.onTransferTeam(ar.simpleClone(Fr)),br.enable)return br.transferTeam(Ir,Ar,Cr)},ur.transferSuperTeam=function(sr,Ir,Ar,Cr){var br=this.db,vr=Ir.teamId,Tr=Ir.memberUpdateTime,Br={teamId:vr,type:"normal",account:Ar,updateTime:Tr},Lr={teamId:vr,type:"owner",account:Cr,updateTime:Tr};sr.attach.members=[Br,Lr];var Fr={team:Ir,from:Br,to:Lr};if(this.logger.info("team::transferSuperTeam: from to ",vr,Ar,Cr),this.options.onTransferSuperTeam(ar.simpleClone(Fr)),br.enable)return br.transferSuperTeam(Ir,Br,Lr)},ur.onUpdateTeamMembersMute=function(sr,Ir,Ar,Cr){var br=this.db,vr=i(Ar).call(Ar,function(Fr){return{id:yr.genId(Ir.teamId,Fr),account:Fr,teamId:Ir.teamId,mute:Cr,updateTime:Ir.memberUpdateTime}});sr.attach.members=vr;var Tr={team:Ir,accounts:Ar,members:vr,mute:Cr};if(this.logger.info("team::onUpdateTeamMembersMute:",Ir.teamId,Ar,Cr),this.options.onUpdateTeamMembersMute(ar.simpleClone(Tr)),br.enable){var Br=br.updateTeamMembers(vr),Lr=br.putTeam(Ir);return k.all([Br,Lr])}},ur.onUpdateSuperTeamMembersMute=function(sr,Ir,Ar,Cr){var br=this.db,vr=i(Ar).call(Ar,function(Fr){return{id:Sr.genId(Ir.teamId,Fr),account:Fr,teamId:Ir.teamId,mute:Cr,updateTime:Ir.memberUpdateTime}});sr.attach.members=vr;var Tr={team:Ir,accounts:Ar,members:vr,mute:Cr};if(this.logger.info("team::onUpdateSuperTeamMembersMute:",Ir.teamId,Ar,Cr),this.options.onUpdateSuperTeamMembersMute(ar.simpleClone(Tr)),br.enable){var Br=br.updateSuperTeamMembers(vr),Lr=br.putSuperTeam(Ir);return k.all([Br,Lr])}},ur.onHistoryMsgs=function(sr){sr.error||(sr.obj.msgs=this.message.reverseMsgs(sr.content.msgs))},ur.onmsgFtsInServer=function(sr){if(!sr.error){var Ir=this.message.reverseMsgs(sr.content.msgs);sr.obj.msgs=Ir,sr.content.msgs=Ir}},ur.isFilterMsgs=function(sr){return!!y(sr[0])},ur.splitMsgs=function(sr,Ir,Ar,Cr){g(sr).call(sr,function(br){if(y(br))Cr.push(br);else switch(br.scene){case"p2p":Ir.push(br);break;case"team":Ar.push(br)}})},ur.markMsgRead=function(sr,Ir){if(ar.isArray(sr)||(sr=[sr]),this.db.enable||this.options.autoMarkRead||Ir){var Ar=i(sr).call(sr,function(Cr){return{flag:"msg",idServer:Cr.idServer,scene:Cr.scene,filter:y(Cr),type:Cr.type,attachType:Cr.attach&&Cr.attach.type}});this.msgAckBufferManager.add(Ar)}},ur.markSysMsgRead=function(sr,Ir){if(ar.isArray(sr)||(sr=[sr]),this.db.enable||this.options.autoMarkRead||Ir){var Ar=i(sr).call(sr,function(Cr){return{flag:"systemMsg",idServer:Cr.idServer,scene:Cr.scene,filter:y(Cr),type:Cr.type}});this.msgAckBufferManager.add(Ar)}},ur.handleMsgsAck=function(sr){var Ir,Ar=this,Cr={p2pSysMsgs:{sid:7,cid:3,msgs:[]},p2pMsgs:{sid:7,cid:2,msgs:[]},superTeamSysMsgs:{sid:21,cid:19,msgs:[]},teamMsgs:{sid:8,cid:3,msgs:[]},filterSysMsgs:{sid:101,cid:3,msgs:[]},filterMsgs:{sid:101,cid:2,msgs:[]},netcallMsgs:{sid:9,cid:11,msgs:[]}};g(sr).call(sr,function(br){/^(netcallBill|netcallMiss|netcallReject)$/.test(br.attachType)?Cr.netcallMsgs.msgs.push(br):y(br)?br.flag==="systemMsg"?Cr.filterSysMsgs.msgs.push(br):Cr.filterMsgs.msgs.push(br):br.flag!=="systemMsg"?br.scene==="p2p"?Cr.p2pMsgs.msgs.push(br):br.scene==="team"&&Cr.teamMsgs.msgs.push(br):br.scene==="superTeam"?Cr.superTeamSysMsgs.msgs.push(br):Cr.p2pSysMsgs.msgs.push(br)}),g(Ir=L(Cr)).call(Ir,function(br){return Ar.doMarkMsgsRead(Cr[br].sid,Cr[br].cid,Cr[br].msgs)})},ur.doMarkMsgsRead=function(sr,Ir,Ar){var Cr;Ar&&Ar.length&&(this.logger.log("markMsgRead::batchMarkRead",sr,Ir,Ar),y(Cr=i(Ar).call(Ar,function(br){return br.idServer})).call(Cr,function(br){var vr=ie(br);return!isNaN(vr)}).length>0?this.sendCmd("batchMarkRead",{sid:sr,cid:Ir,ids:i(Ar).call(Ar,function(br){return br.idServer})}):this.logger.log("markMsgRead::batchMarkRead","idServer is not number. ignore"))}},function(t,r,e){var n=e(51),g=e(10),y=e(2),i=e(5),k=e(15),L=e(3),$=e(34),V=e(52),z=e(53),re=e(54),oe=e(55),le=e(42);function ue(ze,jt){var kt=i(ze);if(V){var Et=V(ze);jt&&(Et=k(Et).call(Et,function(lr){return z(ze,lr).enumerable})),kt.push.apply(kt,Et)}return kt}function ie(ze){for(var jt=1;jt<arguments.length;jt++){var kt,Et,lr=arguments[jt]!=null?arguments[jt]:{};jt%2?y(kt=ue(Object(lr),!0)).call(kt,function(tr){n(ze,tr,lr[tr])}):re?oe(ze,re(lr)):y(Et=ue(Object(lr))).call(Et,function(tr){le(ze,tr,z(lr,tr))})}return ze}var ae=e(37).fn,Fe=e(784),de=e(786);function Ne(ze,jt,kt){var Et=this,lr=this.timetags&&this.timetags.sync;this.db.enable&&lr&&jt&&this.db.getMsgByIdClient(ze).then(function(tr){if(tr&&!(tr.commentTimetag&&tr.commentTimetag<=lr&&tr.time<=lr)){if(tr.commentTimetag=jt.time,tr.comments=tr.comments||[],kt){var or;tr.comments=k(or=tr.comments).call(or,function(ur){return ur.body!==jt.body||ur.from!==jt.from})}else{for(var dr,cr=0;cr<tr.comments.length;cr++)if(tr.comments[cr].from===jt.from&&tr.comments[cr].body===jt.body){tr.comments[cr]=jt,dr=!0;break}dr||tr.comments.push(jt)}var nr={idClient:tr.idClient,comments:tr.comments,commentTimetag:tr.commentTimetag};Et.db.updateMsg(nr)}})}function Ve(ze){ze.scene=this.message.sceneReverseMap[+ze.scene]||ze.scene,ze.time=+ze.time}ae.processMsgExtend=function(ze){switch(ze.cmd){case"getThreadMsgs":this.onGetThreadMsgs(ze);break;case"getMsgsByIdServer":this.onGetMsgsByIdServer(ze);break;case"addQuickComment":this.changeQuickComment(ze);break;case"deleteQuickComment":this.changeQuickComment(ze,!0);break;case"onQuickComment":case"syncAddQuickComment":this.onQuickComment(ze);break;case"onDeleteQuickComment":case"syncDeleteQuickComment":this.onQuickComment(ze,!0);break;case"getQuickComments":this.getQuickComments(ze);break;case"addCollect":case"updateCollect":this.addCollect(ze);break;case"deleteCollects":this.deleteCollects(ze);break;case"getCollects":this.getCollects(ze);break;case"addStickTopSession":case"syncAddStickTopSession":this.onChangeStickTopSession(ze,"add");break;case"updateStickTopSession":case"syncUpdateStickTopSession":this.onChangeStickTopSession(ze,"update");break;case"deleteStickTopSession":case"syncDeleteStickTopSession":this.onChangeStickTopSession(ze,"delete");break;case"addMsgPin":case"onAddMsgPin":case"syncAddMsgPin":this.pinMsgChange(ze,"add");break;case"updateMsgPin":case"onUpdateMsgPin":case"syncUpdateMsgPin":this.pinMsgChange(ze,"update");break;case"deleteMsgPin":case"onDeleteMsgPin":case"syncDeleteMsgPin":this.pinMsgChange(ze,"delete");break;case"getMsgPins":this.getMsgPins(ze)}},ae.onGetThreadMsgs=function(ze){if(!ze.error){var jt;ze.obj.msgs=this.message.reverseMsgs(ze.content.msgs),ze.obj.threadMsg=g(jt=this.message).call(jt,ze.content.threadMsg);var kt=ze.content.threadMsgsMeta||{};ze.obj.total=kt.total,ze.obj.timetag=kt.lastMsgTime}},ae.onGetMsgsByIdServer=function(ze){ze.error||(ze.obj.msgs=this.message.reverseMsgs(ze.content.msgs))},ae.changeQuickComment=function(ze,jt){ze.error||(ze.obj.comment.time=ze.content.timetag,ze.obj.comment=g(Fe).call(Fe,ze.obj.comment),Ve.call(this,ze.obj.msg),Ne.call(this,ze.obj.msg.idClient,ze.obj.comment,jt))},ae.onQuickComment=function(ze,jt){if(ze.content){var kt=ze.content,Et=kt.comment,lr=kt.msg;Et&&lr&&(Ve.call(this,lr),Et=g(Fe).call(Fe,Et),jt?this.options.onDeleteQuickComment(ze.content.msg,Et):this.options.onQuickComment(ze.content.msg,Et),Ne.call(this,lr.idClient,Et,jt))}},ae.getQuickComments=function(ze){var jt,kt=this;if(!ze.error){var Et=ze.obj.idMap,lr=ze.obj.indexMap,tr=ze.content&&ze.content.commentRes||[];y(tr).call(tr,function(or){var dr=[],cr=kt.parser.unserializeMap.comment;if(+or.modify==1)try{dr=JSON.parse(or.detail)}catch(ur){kt.logger.warn("getQuickComments parse detail error",ur)}if(y(dr).call(dr,function(ur,ar){var gr,pr={};y(gr=i(ur)).call(gr,function(yr){pr[cr[yr]]=ur[yr]}),pr=g(Fe).call(Fe,pr),dr[ar]=pr}),or.timestamp=+or.timestamp,Et[or.idClient]){var nr={idClient:or.idClient,commentTimetag:or.timestamp};Et[or.idClient].commentTimetag=or.timestamp,+or.modify==1&&(Et[or.idClient].comments=dr,nr.comments=dr),kt.db.enable&&kt.db.updateMsg(nr)}else Et[or.idClient]={idServer:or.idServer,idClient:or.idClient,comments:dr,commentTimetag:or.timestamp,scene:kt.message.sceneReverseMap[or.scene]||or.scene}}),ze.obj=[],y(jt=i(lr)).call(jt,function(or){ze.obj[lr[or]]=Et[or]})}},ae.addCollect=function(ze){ze.error||(ze.obj.collect=g(de).call(de,ze.content.collect))},ae.deleteCollects=function(ze){ze.error||(ze.obj.deleteNum=ze.content.deleteNum)},ae.getCollects=function(ze){if(!ze.error){var jt=[],kt=ze.content.collectList||[];y(kt).call(kt,function(Et){jt.push(g(de).call(de,Et))}),ze.obj.collectList=jt,ze.obj.total=ze.content.total}},ae.onChangeStickTopSession=function(ze,jt){var kt=this;if(!ze.error){var Et=ze.content.stickTopSession||ze.obj.stickTopSession||{},lr=ze.content.timetag||+Et.updateTime,tr=Et.id.split("|");tr[0]==="super_team"&&(tr[0]="superTeam"),Et={id:tr.join("-"),scene:tr[0],to:tr[1],topCustom:Et.topCustom||""},jt==="delete"?Et.isTop=!1:jt==="add"&&(Et.isTop=!0),Et=this.onUpdateSession(Et),ze.obj&&(ze.obj.stickTopSession=Et),this.db.enable&&(this.db.updateSession(Et).then(function(or){or||kt.db.putSession(Et)}),this.db.updateTimetag("stickTopSessions",lr))}},ae.pinMsgChange=function(ze,jt){var kt=this;if(!ze.error){ze.content=ze.content||{};var Et=this,lr=this.db,tr=ze.obj&&ze.obj.msg,or=ze.content.msg||tr||{},dr=ze.content.pinTag||ze.obj.pinTag,cr=ze.content.timetag||+dr.updateTime,nr=L.resolve();Ve.call(this,or),lr.enable&&(nr=lr.getMsgByIdClient(or.idClient)),dr.createTime&&(dr.createTime=+dr.createTime),dr.updateTime&&(dr.updateTime=+dr.updateTime),nr.then(function(ur){return or=ur||or,ur?or=ur:or.sessionId=or.scene+"-"+kt.message.Message.getMsgTarget(or,kt.account),tr?(ze.obj.msg=or,ze.obj.pinTag=dr):kt.options.onPinMsgChange({msg:or,pinTag:dr},jt),function(){lr.enable&&lr[jt==="delete"?"deleteMsgPin":"putMsgPin"](ie(ie({},or),{},{pinFrom:dr.pinFrom,pinCustom:dr.pinCustom})).then(function(){var ar="pin-"+or.sessionId,gr=Et.timetags.sync;return lr.getTimetag(ar).then(function(pr){return pr>gr?lr.updateTimetag(ar,cr):L.resolve()})}).catch(function(ar){Et.logger.error("msgExtend::pinMsgChange:error",ar)})}(),L.resolve}).then(function(){}),ze.promise=nr}},ae.getMsgPins=function(ze){var jt=this;if(!ze.error){var kt=this.db,Et=ze.content||{};if(Et.pins=Et.pins||[],Et.modify){var lr,tr=[];kt.enable&&(kt.updateTimetag("pin-"+ze.obj.id,Et.timetag),y(lr=Et.pins).call(lr,function(or){or.sessionId=ze.obj.id,tr.push(kt.getMsgByIdClient(or.idClient))})),ze.promise=L.all(tr).then(function(or){var dr;y(dr=Et.pins).call(dr,function(cr,nr){or[nr]?$(cr,or[nr]):(cr.sessionId=ze.obj.id,Ve.call(jt,cr))}),ze.obj.pins=Et.pins,kt.enable&&kt.deleteMsgPins(ze.obj.id).then(function(){return kt.putMsgPins(Et.pins)}).catch(function(cr){jt.logger.error("msgExtend::getMsgPins:change db error",cr)})})}else kt.enable?(kt.updateTimetag("pin-"+ze.obj.id,Et.timetag),ze.promise=kt.getMsgPins(ze.obj.id).then(function(or){ze.obj.pins=or||[]})):ze.obj.pins=[]}}},function(t,r,e){var n=e(843);t.exports=n},function(t,r,e){e(844);var n=e(14);t.exports=n.Number.isInteger},function(t,r,e){e(1)({target:"Number",stat:!0},{isInteger:e(845)})},function(t,r,e){var n=e(30),g=Math.floor;t.exports=Number.isInteger||function(y){return!n(y)&&isFinite(y)&&g(y)===y}},function(t,r,e){var n=e(127),g=e(3),y=e(2),i=e(4),k=["time","from"],L=e(37).fn,$=e(0);L.onOfflineMsgReceipts=function(V){var z,re=this,oe=re.db,le=V.content.msgReceipts,ue=[],ie=g.resolve();this.logger.info("onOfflineMsgReceipts",le),y(le).call(le,function(ae){z={id:"p2p-"+ae.from,msgReceiptTime:+ae.time},re.cacheSyncedSession(z)}),re.syncResult.msgReceipts=ue,oe.enable&&(ie=oe.updateMsgReceiptsTimetag(V.content.timetag)),ie.cmd=ue,re.syncPromiseArray.push(ie)},L.shouldUpdateSessionFromMsgReceipt=function(V,z){return!V||!V.msgReceiptServerTime||z.time>V.msgReceiptServerTime},L.genSessionFromMsgReceipt=function(V,z){var re=z.time,oe={id:z.sessionId,msgReceiptTime:re,msgReceiptServerTime:re};return V&&V.id===z.sessionId&&(oe=$.merge({},V,oe)),V&&V.updateTime||(oe.updateTime=re),oe},L.onMsgReceipt=function(V){var z=this,re=z.db,oe=V.content.msgReceipt;oe.time=+oe.time;var le=oe.idClient,ue=g.resolve();re.enable&&le&&(ue=re.getMsgByIdClient(le)),this.logger.info("onMsgReceipt::",oe),ue.then(function(ie){if(ie){if(!ie.idServer)return void(z.msgReceiptTasks[le]=oe);ie.time}else oe.time;oe.msgReceiptTime=oe.time,oe.sessionId="p2p-".concat(oe.from),z.updateSessionMsgReceiptTime(oe),oe.time,oe.from;var ae=n(oe,k);z.options.onMsgReceipts([ae])})},L.resolveMsgReceiptTask=function(V){var z=this.msgReceiptTasks[V.idClient];z&&(z.msgReceiptTime=V.time,this.updateSessionMsgReceiptTime(z))},L.updateSessionMsgReceiptTime=function(V){var z=this.db,re={id:"p2p-"+V.from,msgReceiptTime:V.msgReceiptTime,msgReceiptServerTime:V.time};(this.getSessionInCache(re.id)||{}).msgReceiptTime>=re.msgReceiptTime?this.logger.warn("receive old msgReceiptTime",V):(z.enable&&z.putSession(re),this.onUpdateSession(re))},L.onSendMsgReceipt=function(V){var z;if(!V.error)if(V.obj&&V.obj.msgReceipt){var re=V.obj.msgReceipt,oe=+re.time,le=+V.content.msgReceipt.time,ue=this.getSessionInCache("p2p-"+re.to);ue?(this.logger.info(i(z="sendMsgReceipt on:: param time ".concat(oe,", res time ")).call(z,le)),ue.msgReceiptSendTime=Math.min(oe,le)):this.logger.info("sendMsgReceipt on:: session is undefined or logically deleted, failed to send read receipt")}else this.logger.info("sendMsgReceipt on:: origin msg is missing, it maybe timeout")},L.shouldSendMsgReceipt=function(V){if(V&&V.scene==="p2p"&&V.status==="success"){var z=this.getSessionInCache(V.sessionId);if(z){var re=z.msgReceiptSendTime;return!re||re<V.time}}return!1},L.isMsgRemoteRead=function(V){if(V&&V.scene==="p2p"&&V.flow==="out"&&V.status==="success"){var z=this.getSessionInCache(V.sessionId);if(z&&z.msgReceiptTime)return V.time<=z.msgReceiptTime}return!1}},function(t,r,e){var n=e(60),g=e(61),y=e(56),i=e(10),k=e(2),L=e(4),$=e(11),V=e(3),z=e(93),re=e(125),oe=e(5),le=e(15),ue=e(43),ie=e(9),ae=e(23),Fe=e(95),de=e(68),Ne=e(78),Ve=e(64),ze=e(28);function jt(ar,gr){var pr=Ne!==void 0&&Ve(ar)||ar["@@iterator"];if(!pr){if(ze(ar)||(pr=function(_r,Nr){var Pr;if(_r){if(typeof _r=="string")return kt(_r,Nr);var sr=ie(Pr=Object.prototype.toString.call(_r)).call(Pr,8,-1);if(sr==="Object"&&_r.constructor&&(sr=_r.constructor.name),sr==="Map"||sr==="Set")return de(_r);if(sr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sr))return kt(_r,Nr)}}(ar))||gr&&ar&&typeof ar.length=="number"){pr&&(ar=pr);var yr=0,Sr=function(){};return{s:Sr,n:function(){return yr>=ar.length?{done:!0}:{done:!1,value:ar[yr++]}},e:function(_r){throw _r},f:Sr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wr,Mr=!0,mr=!1;return{s:function(){pr=pr.call(ar)},n:function(){var _r=pr.next();return Mr=_r.done,_r},e:function(_r){mr=!0,wr=_r},f:function(){try{Mr||pr.return==null||pr.return()}finally{if(mr)throw wr}}}}function kt(ar,gr){(gr==null||gr>ar.length)&&(gr=ar.length);for(var pr=0,yr=new Array(gr);pr<gr;pr++)yr[pr]=ar[pr];return yr}var Et=e(37).fn,lr=e(161),tr=e(162),or=e(0),dr=e(109).EMSyncType;function cr(ar,gr){return nr.apply(this,arguments)}function nr(){return(nr=g(n.mark(function ar(gr,pr){var yr,Sr,wr,Mr,mr,_r,Nr,Pr,sr,Ir,Ar,Cr,br,vr=this;return n.wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(wr=(Sr=this).db,Mr=[],k(gr).call(gr,function(Br){vr.revokeMsgUniqueCheck(Br.idClient),Mr.push(Br.idClient)}),Sr.options.rollbackDelMsgUnread){Tr.next=14;break}return Tr.next=7,wr.deleteMsg(Mr);case 7:if(Tr.t0=Tr.sent,Tr.t0){Tr.next=10;break}Tr.t0=[];case 10:return mr=Tr.t0,mr=Object.prototype.toString.call(mr)==="[object Array]"?mr:[mr],Sr.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: ".concat(mr.length," rows")),Tr.abrupt("return");case 14:return _r=!1,Nr=Sr.options.cbUpdateSession||ae(yr=Sr.updateSessionInDbWithNotify).call(yr,Sr),Pr=Sr.getSessionInCache(pr)||{id:pr},sr=Pr.lastMsg||{},Fe(Mr).call(Mr,sr.idClient)&&(_r=!0),Sr.logger.info("msg::_deleteMsgSelfBatchInDb session change before:",pr,_r,Pr.unread),Tr.next=22,wr.deleteMsg(Mr);case 22:if(Tr.t1=Tr.sent,Tr.t1){Tr.next=25;break}Tr.t1=[];case 25:if(Ir=Tr.t1,Ir=Object.prototype.toString.call(Ir)==="[object Array]"?Ir:[Ir],Sr.logger.info("msg::_deleteMsgSelfBatchInDb affect:",Ir.length," rows"),!_r){Tr.next=34;break}return Tr.next=31,wr.getMsgs({sessionId:pr,limit:1});case 31:Ar=Tr.sent,sr=Ar&&Ar[0]?Ar[0]:null,Pr.lastMsg=sr;case 34:if(Cr=!1,Pr&&Pr.unread&&(br=Pr&&Pr.ack||0,k(Ir).call(Ir,function(Br){var Lr=!0;if(Br.type==="notification")try{Lr=Sr.options.shouldCountNotifyUnread(Br)}catch(Fr){throw Sr.logger.error("userOption:shouldCountNotifyUnread function error",Fr),Fr}Lr&&br<Br.time&&Br.flow==="in"&&(Pr.unread=Pr.unread>0?Pr.unread-1:0,Cr=!0)})),!_r&&!Cr){Tr.next=39;break}return Sr.logger.info("msg::_deleteMsgSelfBatchInDb session change after:",pr,Pr.unread),Tr.abrupt("return",Nr(Pr));case 39:case"end":return Tr.stop()}},ar,this)}))).apply(this,arguments)}function ur(ar,gr){gr=gr||new Date().getTime();var pr=this.db,yr=this.getSessionInCache(ar),Sr=this.options.rollbackClearMsgsUnread!==!1,wr=[];return pr.enable&&wr.push(pr.deleteMsgsBySessionId({sessionId:ar,end:gr})),Sr&&yr&&(yr=this.mergeSession({id:yr.id,unread:0,lastMsg:null,unreadMsgs:[]}),yr=this.onUpdateSession(yr)),pr.enable&&Sr&&yr&&wr.push(pr.updateSession(yr)),V.all(wr)}Et.onDeleteMsg=function(ar){var gr=this.db;if(delete ar.obj.sysMsg,!ar.error){var pr=ar.obj.msg;ar.promise=this.deleteLocalMsg(pr).then(function(){if(gr.enable){var yr=pr.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";gr.getTimetag(yr).then(function(Sr){Sr=Sr||0,y()+1>=Sr&&gr.updateTimetag(yr,y()+1)})}})}},Et.onMsgDeleted=function(ar,gr){var pr=this;if(!pr.canHandleDeletedMsgInSyncing)return pr.logger.info("msg::onMsgDeleted:is in syncing ..."),void pr.unhandledSysMsgsForDeletedMsgs.push({packet:ar,isSuperTeam:gr});if(!ar.error){var yr=pr.db,Sr=i(lr).call(lr,ar.content.sysMsg);Sr=pr.processDeleteMsgSysMsg(Sr),gr||pr.markSysMsgRead(Sr),pr.deleteLocalMsg(Sr.msg).then(function(){if(yr.enable){var wr=gr?"deleteSuperTeamMsg":"deleteMsg";yr.updateTimetag(wr,Sr.time+1)}pr.handleSysMsg(Sr)})}},Et.processDeleteMsgSysMsg=function(ar){var gr;return ar.msg={},k(gr=["scene","from","to"]).call(gr,function(pr){ar.msg[pr]=ar[pr]}),ar.msg.idClient=ar.deletedIdClient,ar.msg.idServer=ar.deletedIdServer,ar.msg.time=ar.deletedMsgTime,ar.msg.fromNick=ar.deletedMsgFromNick,ar.opeAccount=ar.opeAccount||ar.from,ar.msg.opeAccount=ar.opeAccount,this.message.Message.setExtra(ar.msg,this.account),ar},Et.onDeleteMsgOfflineRoaming=function(ar){if(!ar.error){var gr,pr=this,yr=+ar.content.type==1?"offline":"roaming",Sr=lr.reverseSysMsgs(ar.content.sysMsgs,{mapper:function(_r){return pr.processDeleteMsgSysMsg(_r)}}),wr=Sr&&Sr[0]&&Sr[0].scene==="superTeam";pr.logger.info(L(gr="msg::onDeleteMsgOfflineRoaming: on delete ".concat(yr," ")).call(gr,wr?"superTeam":""," idServer deletedIdClient deletedIdClient="),$(Sr).call(Sr,function(_r){var Nr,Pr;return L(Nr=L(Pr="".concat(_r.idServer,"-")).call(Pr,_r.deletedIdServer,"-")).call(Nr,_r.deletedIdClient)})),yr==="offline"&&pr.markSysMsgRead(Sr);var Mr=ar.content.timetag;wr?(pr.timetags.deleteSuperTeamMsg=Mr,pr.syncResult.deleteSuperTeamMsgTimetag=Mr):(pr.timetags.deleteMsg=Mr,pr.syncResult.deleteMsgTimetag=Mr);var mr=pr.putSysMsg(Sr,"offlineSysMsgs").catch(function(_r){return pr.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ",_r),V.reject(_r)});mr.cmd="deleteMsgSysMsgs "+yr,pr.syncPromiseArray.push(mr),pr.syncResult.deleteMsgSysMsgs=pr.syncResult.deleteMsgSysMsgs||[],pr.syncResult.deleteMsgSysMsgs.push({type:yr,sysMsgs:Sr})}},Et.deleteMsgOfflineRoaming=function(ar,gr){if(!ar)return V.resolve();var pr=this;pr.logger.info("msg::deleteMsgOfflineRoaming: ",$(ar).call(ar,function(wr){var Mr;return wr.type+" "+$(Mr=wr.sysMsgs).call(Mr,function(mr){var _r,Nr;return L(_r=L(Nr="".concat(mr.idServer,"-")).call(Nr,mr.deletedIdServer,"-")).call(_r,mr.deletedIdClient)})}),or.secureOutput("session",gr));var yr=pr.db,Sr=[];return k(ar).call(ar,function(wr){var Mr;k(Mr=wr.sysMsgs).call(Mr,function(mr){var _r=pr.deleteLocalMsg(mr.msg,{cbUpdateSession:function(Nr){Nr=pr.mergeSession(Nr),Nr=z(tr).call(tr,Nr);var Pr=or.findObjIndexInArray(gr,{value:Nr.id});if(Pr!==-1&&(gr[Pr]=or.merge({},gr[Pr],Nr)),yr.enable)return yr.updateSession(Nr)}});Sr.push(_r)})}),V.all(Sr).then(function(){yr.enable&&(pr.syncResult.deleteMsgTimetag&&yr.updateTimetag("deleteMsg",pr.syncResult.deleteMsgTimetag),pr.syncResult.deleteSuperTeamMsgTimetag&&yr.updateTimetag("deleteSuperTeamMsg",pr.syncResult.deleteSuperTeamMsgTimetag))})},Et.deleteMsgSelf=function(ar){if(!ar.error){var gr=this.db,pr=ar.obj&&ar.obj.deleteMsgSelfTag;if(pr){var yr=ar.content&&ar.content.timetag;pr.scene=pr.scene+""=="1"?"p2p":"team";var Sr=[this.deleteLocalMsg(pr)];yr<=this.timetags.deleteMsgSelf||(this.timetags.deleteMsgSelf=yr,gr.enable&&Sr.push(gr.updateDeleteMsgSelf(yr))),ar.promise=V.all(Sr)}}},Et.deleteMsgSelfBatch=function(){var ar=g(n.mark(function gr(pr){var yr,Sr,wr,Mr,mr,_r,Nr,Pr;return n.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(!pr.error){sr.next=2;break}return sr.abrupt("return");case 2:if(Sr=this,wr=this.db,(Mr=pr.obj&&pr.obj.deleteMsgSelfTags)&&Mr.length>0){sr.next=7;break}return sr.abrupt("return");case 7:if(mr=re(Mr).call(Mr,function(Ir,Ar){var Cr=Ar.sessionId;if(Ir[Cr]=Ir[Cr]||[],Ir[Cr].push(Ar),!wr.enable){var br=Sr.getSessionInCache(Cr);br&&br.lastMsg&&Ar&&br.lastMsg.idClient===Ar.idClient&&(br.lastMsg=null,Sr.onUpdateSession(br))}return Ir},{}),wr.enable){sr.next=11;break}return k(_r=oe(mr)).call(_r,function(Ir){var Ar=mr[Ir],Cr=Sr.getSessionInCache(Ir);if(Sr.options.rollbackDelMsgUnread&&Cr){var br=Cr.ack||0,vr=le(Ar).call(Ar,function(Tr){var Br=!0;if(Tr.type==="notification")try{Br=Sr.options.shouldCountNotifyUnread(Tr)}catch(Lr){throw Sr.logger.error("userOption:shouldCountNotifyUnread function error",Lr),Lr}return Sr.message.Message.setFlow(Tr,Sr.account),Br&&br<Tr.time&&Tr.flow==="in"});vr.length>0&&Cr.unread&&(Cr.unread=Cr.unread-vr.length>=0?Cr.unread-vr.length:0,Sr.onUpdateSession(Cr))}}),sr.abrupt("return",V.resolve());case 11:Nr=$(yr=oe(mr)).call(yr,function(Ir){var Ar=mr[Ir];return cr.call(Sr,Ar,Ir)}),(Pr=pr.content&&pr.content.timetag)<=Sr.timetags.deleteMsgSelf||(Sr.timetags.deleteMsgSelf=Pr,Nr.push(wr.updateDeleteMsgSelf(Pr))),pr.promise=V.all(Nr);case 15:case"end":return sr.stop()}},gr,this)}));return function(gr){return ar.apply(this,arguments)}}(),Et.onDeleteMsgSelf=function(ar){var gr=this,pr=this.db,yr=ar.content.deleteMsgSelfTag;yr.scene=yr.scene+""=="1"?"p2p":"team",gr.options.onDeleteMsgSelf([yr]),gr.deleteLocalMsg(yr).then(function(){var Sr=yr.deletedTime;return Sr<=gr.timetags.deleteMsgSelf||!pr.enable?V.resolve():(gr.timetags.deleteMsgSelf=Sr,pr.updateDeleteMsgSelf(Sr))}).catch(function(Sr){gr.logger.error("onDeleteMsgSelf error",Sr)})},Et.onDeleteMsgSelfBatch=function(ar){var gr=this;if(!ar.error){var pr={1:"p2p",2:"team"},yr=or.get(ar,"content.deleteMsgSelfTags")||[];k(yr).call(yr,function(wr){var Mr;wr.scene=pr[wr.scene],wr.sessionId=L(Mr="".concat(wr.scene,"-")).call(Mr,gr.message.Message.getMsgTarget(wr,gr.account)),wr.deletedTime=ue(wr.deletedTime),wr.time=ue(wr.time)});var Sr=or.get(ar,"content.deleteMsgSelfTags[0].deletedTime");Sr=ue(Sr)||0,this.options.onDeleteMsgSelf(yr),this.deleteMsgSelfBatch({obj:{deleteMsgSelfTags:yr},content:{timetag:Sr}})}},Et.clearServerHistoryMsgs=function(ar){if(!ar.error){var gr=this.db,pr=ar.obj&&ar.obj.clearMsgsParamsWithSync;if(pr){var yr=(pr.type&&pr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(pr.otherAccid):"team-".concat(pr.toTid),Sr=ar.content&&ue(ar.content.timetag);Sr&&Sr>this.timetags.sessionHistoryMsgsDelete&&(this.timetags.sessionHistoryMsgsDelete=Sr,gr.enable&&gr.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),ur.call(this,yr,Sr)}}},Et.onClearServerHistoryMsgs=function(ar){if(!ar.error){var gr=this.db,pr=ar.content&&ar.content.sessionHistoryMsgsDeleteTag;if(pr){var yr=(pr.type&&pr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(pr.otherAccid):"team-".concat(pr.toTid),Sr=pr.ext,wr=ue(pr.time);this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs([{sessionId:yr,time:wr,ext:Sr}]),wr<=this.timetags.sessionHistoryMsgsDelete||(this.timetags.sessionHistoryMsgsDelete=wr,gr.enable&&gr.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),ur.call(this,yr,wr)}}},Et.syncSessionHistoryMsgsDelete=function(ar){if(!ar.error){var gr=this.db,pr=ar.content&&ar.content.sessionHistoryMsgsDeleteTags;if(pr&&pr.length>0){var yr=$(pr).call(pr,function(wr){return{sessionId:(wr.type&&wr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(wr.otherAccid):"team-".concat(wr.toTid),time:ue(wr.time)}});this.reporterHook.emit("reporter/syncItemComplete",dr.kSyncType4_24),this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs(yr),this.syncResult.clearServerHistoryMsgs=yr;var Sr=0;k(yr).call(yr,function(wr){wr.time>Sr&&(Sr=wr.time)}),gr.enable&&gr.updateTimetag("sessionHistoryMsgsDelete",Sr)}}},Et.syncDeleteMsgSelf=function(ar){var gr=this,pr=this.db,yr=ar.content.deletedMsgs;if(yr&&yr.length!==0){var Sr=[];k(yr).call(yr,function(wr){wr.scene=wr.scene==="1"?"p2p":"team",wr.deletedTime=+wr.deletedTime,wr.time=+wr.time,Sr.push(gr.deleteLocalMsg(wr))}),gr.options.onDeleteMsgSelf(yr),V.all(Sr).then(function(){var wr=ie(yr).call(yr,-1)[0].deletedTime;if(!(gr.timetags.deleteMsgSelf>=wr))return gr.timetags.deleteMsgSelf=wr,pr.enable?pr.updateDeleteMsgSelf(wr):void 0}).catch(function(wr){gr.logger.error("syncDeleteMsgSelf error",wr)})}},Et.deleteLocalMsg=function(){var ar=g(n.mark(function gr(pr,yr){var Sr,wr,Mr,mr,_r,Nr,Pr,sr,Ir,Ar,Cr,br;return n.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(pr){vr.next=2;break}return vr.abrupt("return");case 2:if(Mr=(wr=this).db,mr=(yr=yr||{}).cbUpdateSession||ae(Sr=wr.updateSessionInDbWithNotify).call(Sr,wr),this.revokeMsgUniqueCheck(pr&&pr.idClient),_r=pr.sessionId||pr.scene+"-"+this.message.Message.getMsgTarget(pr,this.account),Nr=!1,Pr=wr.getSessionInCache(_r),sr=!0,pr.type!=="notification"){vr.next=20;break}vr.prev=12,sr=wr.options.shouldCountNotifyUnread(pr),vr.next=20;break;case 16:throw vr.prev=16,vr.t0=vr.catch(12),wr.logger.error("userOption:shouldCountNotifyUnread function error",vr.t0),vr.t0;case 20:if(wr.options.rollbackDelMsgUnread&&Pr&&(Ir=Pr.ack||0,sr&&Pr&&Ir<pr.time&&pr.from!==wr.account&&Pr.unread&&(wr.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: unread",Pr.id,Pr.unread),Pr.unread=Pr.unread-1,Nr=!0)),Pr&&Pr.lastMsg&&Pr.lastMsg.idClient==pr.idClient&&(wr.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: lastMsg",Pr.id,Pr.unread),Pr.lastMsg=null,Nr=!0),!Mr.enable){vr.next=49;break}return Ar=null,vr.next=26,Mr.getMsgByIdClient(pr.idClient);case 26:return vr.sent||wr.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg no find in DB",pr),wr.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg ",pr.idClient),vr.next=31,Mr.deleteMsg(pr.idClient);case 31:if(!Pr||Pr.lastMsg!==null){vr.next=36;break}return vr.next=34,Mr.getMsgs({sessionId:_r,limit:1});case 34:(Cr=vr.sent)&&Cr[0]&&(Ar=Cr[0]);case 36:if(Pr||!wr.options.rollbackDelMsgUnread){vr.next=46;break}return wr.logger.info("msgDelete::deleteLocalMsg::Can not find session in cache,will find in DB",_r),vr.next=40,Mr.getSession(_r);case 40:if(br=vr.sent){vr.next=43;break}return vr.abrupt("return");case 43:Ir=(Pr=br).ack||0,sr&&Pr&&Ir<pr.time&&pr.flow==="in"&&Pr.unread&&(wr.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread",br.id,br.unread),Pr.unread=Pr.unread-1,Nr=!0);case 46:if(Pr&&Pr.lastMsg===null&&Ar&&(wr.logger.info("msgDelete::deleteLocalMsg:db.getSessions: lastMsg",_r,Ar),Pr.lastMsg=Ar||null,Nr=!0),!Nr){vr.next=49;break}return vr.abrupt("return",mr(Pr));case 49:if(Mr.enable||!Nr){vr.next=52;break}return wr.onUpdateSession(Pr),vr.abrupt("return");case 52:case"end":return vr.stop()}},gr,this,[[12,16]])}));return function(gr,pr){return ar.apply(this,arguments)}}(),Et.deleteLocalMsgs=function(ar){var gr=this,pr=gr.db;return new V(function(yr,Sr){if(function(wr){var Mr=gr.getSessionInCache(ar.sessionId);if(Mr&&ar.updateSession){var mr=Mr.lastMsg;mr&&(!ar.start&&!ar.end||mr.time>ar.start&&mr.time<ar.end)&&(Mr.lastMsg=null,gr.logger.log("deleteLocalMsgs::delete cacheSession lastMsg done, options is",ar),pr.enable||(gr.onUpdateSession(Mr),wr()))}}(yr),pr.enable)return pr.deleteMsgsBySessionId(ar).then(function(){ar.updateSession&&gr.checkAndUpdateLocalSessionByMsg(ar.sessionId),yr()},function(wr){return Sr(wr)})})},Et.deleteLocalMsgsByTime=function(){var ar=g(n.mark(function gr(pr){var yr,Sr,wr,Mr,mr,_r,Nr,Pr,sr,Ir,Ar,Cr,br,vr;return n.wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:return Sr=(yr=this).db,Tr.next=4,Sr.getDeletedMsgsCountByTime(pr);case 4:return wr=Tr.sent,Mr=0,mr=[],Tr.next=9,Sr.deleteMsgsByTime(pr);case 9:return pr.deletedone&&pr.deletedone({deletedMsgCount:wr}),Tr.next=12,Sr.getAllSessions();case 12:_r=Tr.sent,Nr=jt(_r),Tr.prev=14,Nr.s();case 16:if((Pr=Nr.n()).done){Tr.next=47;break}return sr=Pr.value,Ir=sr.id,Ar=!1,Tr.next=22,Sr.getSession(Ir);case 22:if(Cr=Tr.sent){Tr.next=25;break}return Tr.abrupt("continue",45);case 25:return Tr.next=27,Sr.getMsgCountAfterAck({shouldCountNotifyUnread:yr.options.shouldCountNotifyUnread,sessionId:Ir,ack:Cr.ack||0});case 27:if(br=Tr.sent,Cr.unread!==br&&(Cr.unread=br,Ar=!0),!(Cr.lastMsg&&Cr.lastMsg.time>pr.start&&Cr.lastMsg.time<pr.end)){Tr.next=39;break}if(pr.start!==0){Tr.next=34;break}Cr.lastMsg=null,Tr.next=38;break;case 34:return Tr.next=36,Sr.getMsgs({sessionId:Ir,limit:1});case 36:vr=Tr.sent,Cr.lastMsg=vr&&vr[0]?vr[0]:null;case 38:Ar=!0;case 39:if(!Ar){Tr.next=45;break}return Tr.next=42,Sr.updateSession(Cr);case 42:yr.sessionSet[Ir]&&mr.push(Cr),Mr++;case 45:Tr.next=16;break;case 47:Tr.next=52;break;case 49:Tr.prev=49,Tr.t0=Tr.catch(14),Nr.e(Tr.t0);case 52:return Tr.prev=52,Nr.f(),Tr.finish(52);case 55:return yr.onUpdateSessions(mr),Tr.abrupt("return",V.resolve({deletedMsgCount:wr,sessionUpdateCount:Mr}));case 57:case"end":return Tr.stop()}},gr,this,[[14,49,52,55]])}));return function(gr){return ar.apply(this,arguments)}}()},function(t,r,e){var n=e(63),g=e(11),y=e(10),i=e(4),k=e(3),L=e(22),$=e(15),V=e(2),z=e(37).fn,re=e(0),oe=e(161);z.splitSysMsgs=function(le,ue){for(var ie,ae=le.length-1;ae>=0;ae--)ie=le[ae],oe.isCustom(ie)&&(n(le).call(le,ae,1),ue.push(ie))},z.onOfflineSysMsgs=function(le,ue){var ie,ae=this,Fe=g(ie=le.content.sysMsgs).call(ie,function(kt){return kt=y(oe).call(oe,kt),ue&&(kt.filter=!0),kt});Fe=y(Fe).call(Fe),ae.markSysMsgRead(Fe);var de=[];ae.splitSysMsgs(Fe,de);var Ne,Ve=ue?"offlineFilterSysMsgs":"offlineSysMsgs",ze=ue?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(Fe.length){var jt=ae.putSysMsg(Fe,"offlineSysMsgs").then(function(kt){var Et;(Fe=kt).length&&(ae.logger.info("sysmsg::onOfflineSysMsgs: ",Ve,Fe.length,Fe&&g(Fe).call(Fe,function(lr){return lr.idServer})),ae.syncResult[Ve]=ae.syncResult[Ve]||[],ae.syncResult[Ve]=i(Et=ae.syncResult[Ve]).call(Et,Fe))}).catch(function(kt){return ae.logger.error("sysMsg::onOfflineSysMsgs: ",kt),k.reject(kt)});jt.cmd="sysMsgs",ae.syncPromiseArray.push(jt)}de.length&&(ae.logger.info("sysmsg::onOfflineSysMsgs: ",ze,g(de).call(de,function(kt){return kt.idServer})),ae.syncResult[ze]=ae.syncResult[ze]||[],ae.syncResult[ze]=i(Ne=ae.syncResult[ze]).call(Ne,de))},z.onSendSysMsg=function(le,ue){var ie=le.obj||{};ie?(this.completeSysMsg(ie),le.error?ie.status="fail":ie.status="success",ie=y(oe).call(oe,ie),ue&&(le.obj.filter=!0),le.obj=ie):this.logger.warn("onSendSysMsg::no obj")},z.completeSysMsg=function(le){return le.from=this.account,le},z.onSysMsg=function(le,ue){var ie=y(oe).call(oe,le.content.sysMsg);ue&&(ie.filter=!0),this.markSysMsgRead(ie),oe.isCustom(ie)?(this.logger.info("sysmsg::onSysMsg: on customSysMsg"),this.options.oncustomsysmsg(ie)):this.syncing?(this.logger.info("sysmsg::onSysMsg:is in syncing ..."),this.unhandledSysMsgs.push(ie)):this.handleSysMsg(ie)},z.handleSysMsg=function(le){var ue=this,ie=le.type,ae=le.from,Fe=le.serverex;ue.sysMsgPromise=ue.sysMsgPromise.then(function(){return ue.putSysMsg(le,"onSysMsg")}).then(function(de){le=de[0]}).then(function(){if(le){var de,Ne=k.resolve();switch(ie){case"addFriend":de={type:"addFriend",account:ae},Fe&&(de.serverex=Fe),Ne=ue.onFriendRequest(de);break;case"passFriendApply":de={type:"passFriendApply",account:ae},Ne=ue.onFriendRequest(de);break;case"deleteFriend":Ne=ue.onDeleteFriend({account:ae})}return de&&de.friend&&(le.friend=de.friend),Ne}}).then(function(){le&&(ue.logger.info("sysmsg::handleSysMsg: ",ie,re.pickAsString(le,["idServer","deletedIdClient","deletedIdServer"])),L(function(){ue.options.onsysmsg(le)},0))})},z.putSysMsg=function(le,ue){if(re.isArray(le)||(le=[le]),$(le[0]))return k.resolve(le);var ie=this,ae=ie.db,Fe=ae.enable,de=k.resolve(),Ne=[];return(de=(de=de.then(function(){return Fe?ae.putSysMsg(le):le}).then(function(Ve){var ze=[];V(le).call(le,function(jt){ie.checkSysMsgUnique(jt)&&ze.push(jt)}),le=ze,Ne=Fe?Ve:le})).then(function(){return ie.getSysMsgUnread().then(function(Ve){return Ne.length||((Ne=le).backward=!0),ie.updateSysMsgUnread(Ne,Ve,1).then(function(ze){ue==="offlineSysMsgs"&&(ie.syncResult.sysMsgUnread=ze),ue==="onSysMsg"&&ie.onUpdateSysMsgUnread(ze)})})})).then(function(){return le})},z.checkSysMsgUnique=re.genCheckUniqueFunc("idServer"),z.getSysMsgUnread=function(){var le=this,ue=le.db;return new k(function(ie){ue.enable?ue.getSysMsgUnread().then(function(ae){ie(ae)},function(){ie(le.sysMsgUnread)}):ie(le.sysMsgUnread)})},z.updateSysMsgUnread=function(le,ue,ie){if(re.isArray(le)||(le=[le]),!le.length)return k.resolve(ue);ue=ue||{};var ae,Fe=this.db;return V(le).call(le,function(de){(ie>0&&!de.read||ie<0&&de.read)&&(ae=de.type,ue[ae]=(ue[ae]||0)+ie)}),ue=oe.completeUnread(ue),this.sysMsgUnread=ue,Fe.enable&&!le.backward?Fe.updateSysMsgUnread(ue):k.resolve(ue)},z.reduceSysMsgUnread=function(le){var ue=this;return ue.getSysMsgUnread().then(function(ie){return ue.updateSysMsgUnread(le,ie,-1)}).then(function(ie){ue.onUpdateSysMsgUnread(ie)})},z.onUpdateSysMsgUnread=function(le){var ue=this;L(function(){ue.logger.info("sysmsg::onUpdateSysMsgUnread:",le),ue.options.onupdatesysmsgunread(le)},0)},z.updateSysMsg=function(le){var ue=this,ie=ue.db;(ie.enable?ie.updateSysMsg(le):k.resolve(le)).then(function(ae){ue.onUpdateSysMsg(ae)})},z.onUpdateSysMsg=function(le){var ue=this;L(function(){re.isArray(le)||(le=[le]),V(le).call(le,function(ie){ue.logger.info("sysmsg::onUpdateSysMsg:",ie.idServer),ue.options.onupdatesysmsg(ie)})},0)},z.processUnsettledSysMsgs=function(){var le,ue,ie=this;V(le=ie.unhandledSysMsgs).call(le,function(ae){ie.handleSysMsg(ae)}),V(ue=ie.unhandledSysMsgsForDeletedMsgs).call(ue,function(ae){ie.onMsgDeleted(ae.packet,ae.isSuperTeam)}),ie.resetUnsettledSysMsgs()}},function(t,r,e){var n=e(207),g=e(51),y=e(2),i=e(8),k=e(9),L=e(10),$=e(3),V=e(11),z=e(93),re=e(15),oe=e(34),le=e(5),ue=e(4),ie=e(782),ae=e(63),Fe=e(52),de=e(53),Ne=e(54),Ve=e(55),ze=e(42);function jt(cr,nr){var ur=le(cr);if(Fe){var ar=Fe(cr);nr&&(ar=re(ar).call(ar,function(gr){return de(cr,gr).enumerable})),ur.push.apply(ur,ar)}return ur}function kt(cr){for(var nr=1;nr<arguments.length;nr++){var ur,ar,gr=arguments[nr]!=null?arguments[nr]:{};nr%2?y(ur=jt(Object(gr),!0)).call(ur,function(pr){g(cr,pr,gr[pr])}):Ne?Ve(cr,Ne(gr)):y(ar=jt(Object(gr))).call(ar,function(pr){ze(cr,pr,de(gr,pr))})}return cr}var Et=e(37).fn,lr=e(0),tr=e(162),or=e(35),dr=e(161);Et.processSession=function(cr){if(!cr.error)switch(cr.cmd){case"getServerSessions":this.onGetServerSessions(cr);break;case"getServerSession":this.onGetServerSession(cr);break;case"updateServerSession":this.onUpdateServerSession(cr)}},Et.onGetServerSessions=function(cr){var nr=this,ur=cr.content&&cr.content.sessionReqTag,ar=cr.content&&cr.content.sessionList,gr=[];y(ar).call(ar,function(pr){var yr,Sr;if(pr.id=pr.id.split("|").join("-"),i(yr=pr.id).call(yr,"super_team")===0&&(pr.id="superTeam"+k(Sr=pr.id).call(Sr,10)),pr.updateTime=+pr.updateTime,pr.lastMsg){var wr=pr.lastMsgType==="1"?"sysMsg":"msg";gr.push(nr.parser.unserialize(JSON.parse(pr.lastMsg),wr).then(function(Mr){var mr;pr.lastMsg=wr==="msg"?L(mr=nr.message).call(mr,Mr):L(dr).call(dr,Mr)}))}}),cr.promise=$.all(gr).then(function(){cr.obj={sessionList:ar,hasMore:ur.hasMore==="1"},ur.minTimestamp&&(cr.obj.minTimestamp=+ur.minTimestamp)})},Et.onGetServerSession=function(cr){var nr,ur=this,ar=cr.content&&cr.content.session;if(ar){var gr;if(ar.id=ar.id.split("|").join("-"),i(nr=ar.id).call(nr,"super_team")===0&&(ar.id="superTeam"+k(gr=ar.id).call(gr,10)),ar.updateTime=+ar.updateTime,ar.lastMsg){var pr=cr.content.session&&cr.content.session.lastMsgType==="1"?"sysMsg":"msg";cr.promise=ur.parser.unserialize(JSON.parse(ar.lastMsg),pr).then(function(yr){var Sr;ar.lastMsg=pr==="msg"?L(Sr=ur.message).call(Sr,yr):L(dr).call(dr,yr),cr.obj=ar})}else cr.obj=ar}},Et.onUpdateServerSession=function(cr){cr.obj={}},Et.onSyncUpdateServerSession=function(cr){var nr,ur=this,ar=this,gr=cr.content&&cr.content.session;if(gr){var pr;gr.id=gr.id.split("|").join("-"),i(nr=gr.id).call(nr,"super_team")===0&&(gr.id="superTeam"+k(pr=gr.id).call(pr,10)),gr.updateTime=+gr.updateTime,gr.lastMsg?ar.parser.unserialize(JSON.parse(gr.lastMsg),"msg").then(function(yr){var Sr;gr.lastMsg=L(Sr=ar.message).call(Sr,yr),ur.options.onSyncUpdateServerSession(lr.simpleClone(gr))}):this.options.onSyncUpdateServerSession(lr.simpleClone(gr))}},Et.mergeSession=function(cr){cr=lr.copyWithNull(cr);var nr=this.sessionSet,ur=cr.id,ar=nr[ur]||{},gr=!1;return tr.isComplete(cr)?delete ar.isDeleted:ar.isDeleted&&(gr=!0),nr[ur]=lr.merge(ar,cr),cr=gr?cr:nr[ur],lr.undef(cr.unread)&&(cr.unread=0),cr},Et.mergeSessions=function(cr){var nr=this;return V(cr=cr||[]).call(cr,function(ur){return nr.mergeSession(ur)})},Et.onDeleteSessions=function(cr){var nr;cr.obj=V(nr=cr.obj.sessions).call(nr,function(ur){return tr.parse(ur)})},Et.onUpdateSession=function(cr){if(cr){if(cr=this.mergeSession(cr),cr=z(tr).call(tr,cr),tr.isComplete(cr))return this.logger.info("session::onUpdateSession: ".concat(cr.id),cr.id,lr.secureOutput("session",cr)),this.options.onupdatesessions?this.options.onupdatesessions([cr]):this.options.onupdatesession(cr),cr;this.logger.warn("session::onUpdateSession::session is not complete",lr.secureOutput("session",cr))}},Et.onUpdateSessions=function(cr){var nr=this;if(cr){cr=nr.mergeSessions(cr),cr=V(cr).call(cr,function(gr){return z(tr).call(tr,gr)});var ur=re(cr).call(cr,function(gr){return tr.isComplete(gr)}),ar=re(cr).call(cr,function(gr){return!tr.isComplete(gr)});if(ar&&ar.length>0&&nr.logger.warn("session::onUpdateSessions::sessions is not complete",V(ar).call(ar,function(gr){return gr.id}),lr.secureOutput("session",ar)),ur.length!==0)return nr.logger.info("session::onUpdateSessions:",lr.secureOutput("session",ur)),nr.options.onupdatesessions?nr.options.onupdatesessions(ur):y(ur).call(ur,function(gr){nr.options.onupdatesession(gr)}),ur;nr.logger.warn("session::onUpdateSessions::completeSessions is empty")}},Et.setCurrSession=function(cr){cr=""+cr,this.currSessionId=cr,this.logger.info("session::setCurrSession:",cr)},Et.resetSessionUnread=function(cr){var nr=cr.id;this.db.enable&&this.db.updateSession({id:nr,unread:0}),!this.options.autoMarkRead&&this.sessionUnreadMsgs&&this.sessionUnreadMsgs[nr]&&(this.markMsgRead(this.sessionUnreadMsgs[nr],!0),this.sessionUnreadMsgs[nr]=[]),this.getSessionInCache(nr)?this.onUpdateSession({id:nr,unread:0}):this.onUpdateSession(kt(kt({},cr),{},{unread:0}))},Et.resetSessionsUnread=function(cr){var nr=this,ur=this.db;ur.enable&&V(cr).call(cr,function(gr){ur.updateSession({id:gr.id,unread:0})});var ar=!this.options.autoMarkRead&&this.sessionUnreadMsgs;cr=V(cr).call(cr,function(gr){return ar&&nr.sessionUnreadMsgs[gr.id]&&(nr.markMsgRead(nr.sessionUnreadMsgs[gr.id],!0),nr.sessionUnreadMsgs[gr.id]=[]),nr.getSessionInCache(gr.id)?{id:gr.id,unread:0}:kt(kt({},gr),{},{unread:0})}),this.onUpdateSessions(cr)},Et.insertLocalSession=function(cr){var nr=this,ur=nr.db,ar=cr.scene+"-"+cr.to,gr=nr.getSessionInCache(ar);return gr&&tr.isComplete(gr)?$.reject(or.sessionExist({callFunc:"session::insertLocalSession",session:gr})):(ur.enable?ur.getMsgs({sessionId:ar,limit:1}):$.resolve()).then(function(pr){if(lr.isArray(pr)&&pr.length===1){var yr=pr[0];(gr=tr.genSessionByMsg(yr)).updateTime=yr.time}else gr={id:ar,scene:cr.scene,to:cr.to,updateTime:+cr.updateTime||+new Date,lastMsg:null};return nr.onUpdateSession(gr),ur.enable?ur.putSession(gr):$.resolve(gr)})},Et.checkAndUpdateLocalSessionByMsg=function(cr){var nr,ur=this.db,ar=this,gr=this.options.syncSessionUnread&&cr!==this.currSessionId,pr=ur.getMsgs({sessionId:cr,limit:1}),yr=ur.getSession(cr).then(function(Sr){if(Sr)return nr=oe({},Sr),Sr.ack=Sr.ack||0,gr?ur.getMsgs({sessionId:cr,start:Sr.ack}):$.resolve();ar.logger.error("can't find session that sessionId = ".concat(cr))});return $.all([pr,yr]).then(function(Sr){var wr,Mr,mr=n(Sr,2),_r=mr[0],Nr=mr[1],Pr={id:cr};if(!nr)return ar.logger.error("checkAndUpdateLocalSessionByMsg:can not find session",cr),$.resolve(200);if(wr=nr&&!nr.lastMsg?null:nr.lastMsg.idClient,_r&&_r[0]?Mr=(_r=_r[0]).idClient:(Mr=null,_r=null),wr!==Mr&&(Pr.lastMsg=_r),Nr!==void 0){var sr=0;y(Nr=Nr||[]).call(Nr,function(Ir){var Ar;try{Ar=ar.options.shouldCountNotifyUnread(Ir)}catch(Cr){throw ar.logger.error("userOption:shouldCountNotifyUnread function error",Cr),Cr}Ir.isUnreadable&&Ir.flow==="in"&&(Ir.type!=="notification"||Ar)&&sr++}),sr!==nr.unread&&(Pr.unread=sr)}return le(Pr).length>1?(ar.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:",lr.secureOutput("session",Pr)),ur.updateSession(Pr).then(function(){return ar.onUpdateSession(Pr)})):$.resolve(200)})},Et.syncSessionsWithMoreRoaming=function(cr){var nr=this,ur=cr&&cr.content&&cr.content.sessions;if(ur&&ur.length){var ar={0:"p2p",1:"team",5:"superTeam"};if(y(ur).call(ur,function(pr){var yr,Sr=pr.to===nr.options.account?pr.from:pr.to;pr.scene=ar[pr.scene],pr.id=ue(yr="".concat(pr.scene,"-")).call(yr,Sr),pr.time=+pr.time}),this.db.enable){var gr=this.db.putSessionsWithMoreRoaming(ur);gr.cmd="syncSessionsWithMoreRoaming",this.syncPromiseArray.push(gr)}this.syncing&&this.syncResult?this.syncResult.sessionsWithMoreRoaming=ur:this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},Et.syncStickTopSessions=function(cr){var nr=this,ur=this.db,ar=[],gr=$.resolve(),pr=cr.content.sessions||[],yr=this;if(this.syncing&&this.syncResult){y(pr).call(pr,function(Mr){var mr=Mr.id.split("|");mr[0]==="super_team"&&(mr[0]="superTeam"),Mr.id=mr.join("-"),Mr.scene=mr[0],Mr.to=mr[1],Mr.isTop=!0,ar.push(mr.join("-")),delete Mr.createTime,delete Mr.updateTime});var Sr,wr=[];this.hasSynced&&cr.content.modify&&(y(Sr=le(this.sessionSet)).call(Sr,function(Mr){nr.sessionSet[Mr].isTop&&wr.push(nr.sessionSet[Mr])}),y(wr).call(wr,function(Mr){if(i(ar).call(ar,Mr.id)>-1){var mr=ie(pr).call(pr,function(Nr){return Nr.id===Mr.id&&Nr.topCustom===Mr.topCustom});mr>-1&&ae(pr).call(pr,mr,1)}else{var _r={};_r.id=Mr.id,_r.isTop=!1,_r.topCustom="",_r.to=Mr.to,_r.scene=Mr.scene,pr.push(_r)}})),ur.enable&&(gr=ur.updateTimetag("stickTopSessions",cr.content.timetag)),gr=gr.then(function(){return ur.enable?ur.getStickTopSessions():[]}).then(function(Mr){ur.enable&&!nr.hasSynced&&cr.content.modify?y(Mr).call(Mr,function(mr){if(i(ar).call(ar,mr.id)>-1){var _r=ie(pr).call(pr,function(Pr){return Pr.id===mr.id&&Pr.topCustom===mr.topCustom});_r>-1&&ae(pr).call(pr,_r,1)}else{var Nr={};Nr.id=mr.id,Nr.isTop=!1,Nr.topCustom="",Nr.to=mr.to,Nr.scene=mr.scene,pr.push(Nr)}}):!ur.enable||nr.hasSynced||cr.content.modify||y(Mr).call(Mr,function(mr){yr.cacheSyncedSession(mr)}),y(pr).call(pr,function(mr){yr.cacheSyncedSession(mr)})}),this.syncResult.stickTopSessions=pr,gr.cmd="syncStickTopSessions",this.syncPromiseArray.push(gr)}else this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")},Et.getSessionInCache=function(cr,nr){var ur=this.sessionSet[cr];return!ur||ur.isDeleted&&!nr?void 0:ur},Et.deleteSessionInCache=function(cr,nr){var ur=this;lr.isArray(cr)||(cr=[cr]),nr?y(cr).call(cr,function(ar){ur.sessionSet[ar]&&(ur.sessionSet[ar].isDeleted=!0)}):y(cr).call(cr,function(ar){return delete ur.sessionSet[ar]}),this.logger.info("sessions::deleteSessionInCache::delete session done",cr,nr)},Et.updateSessionInCache=function(cr){return this.logger.info("session::updateSessionInCache: ".concat(cr.id),cr.id,cr),this.getSessionInCache(cr.id)?cr=this.mergeSession(cr):(this.logger.info("session::updateSessionInCache: can not find session in cache ".concat(cr.id)),null)},Et.updateSessionInDbWithNotify=function(cr,nr){var ur=this;return new $(function(ar,gr){var pr=ur.db;if(ur.getSessionInCache(cr.id)){var yr=$.resolve(),Sr=lr.filterObj(cr,"id lastMsg localCustom unread");pr.enable&&(yr=pr.updateSession(Sr)),yr.then(function(wr){return ur.onUpdateSession(wr,nr)}).then(ar,function(wr){gr({callFunc:"session::updateLocalSession",event:wr})})}else gr(or.sessionNotExist({sessionId:cr.id,callFunc:"session::updateLocalSession"}))})}},function(t,r,e){var n=e(2),g=e(5),y=e(4),i=e(34),k=e(37).fn,L=e(0);k.syncSessionAck=function($){var V,z=this;if(this.logger.info("syncSessionAck::",$.content),z.syncing&&z.syncResult){z.saveAck.p2pTeam=$.content.timetag;var re={};n(V=[[$.content.p2p,"p2p"],[$.content.team.m_map,"team"]]).call(V,function(oe){var le,ue=oe[0],ie=oe[1];n(le=g(ue)).call(le,function(ae){var Fe,de;re[y(Fe="".concat(ie,"-")).call(Fe,ae)]=ue[ae];var Ne={id:y(de="".concat(ie,"-")).call(de,ae),ack:ue[ae]};z.cacheSyncedSession(Ne)})}),z.syncResult.ackMap?z.syncResult.ackMap=i(z.syncResult.ackMap,re):z.syncResult.ackMap=re}else z.logger.warn("syncSessionAck: not in syncing or no syncResult",z.syncing,!!z.syncResult)},k.syncSuperTeamSessionAck=function($){var V,z=this;if(z.syncResult){z.saveAck.superTeam=$.content.timetag;var re={},oe=$.content.superTeam.m_map;n(V=g(oe)).call(V,function(le){re["superTeam-".concat(le)]=oe[le];var ue={id:"superTeam-".concat(le),ack:oe[le]};z.cacheSyncedSession(ue)}),z.syncResult.ackMap?z.syncResult.ackMap=i(z.syncResult.ackMap,re):z.syncResult.ackMap=re}},k.onMarkSessionAck=function($){$.error||this.storeSessionAck($.obj)},k.syncMarkSessionAck=function($){this.storeSessionAck($.content,!0)},k.storeSessionAck=function($,V){var z;if(this.options.syncSessionUnread&&$){var re;switch($.scene){case 0:re="p2p";break;case 1:re="team";break;case void 0:default:re="superTeam"}var oe=y(z="".concat(re,"-")).call(z,$.to),le=$.timetag;if(le<=((this.getSessionInCache(oe)||{}).ack||0))this.logger.warn("session::storeSessionAck: ack <= ackInMemory",le);else{var ue={id:oe,ack:le};this.mergeSession(ue),this.logger.info("session::storeSessionAck:",L.secureOutput("session",ue)),this.markUnreadBySessionAck({sessionId:oe,ack:ue.ack},V)}}},k.markUnreadBySessionAck=function($,V){var z=$.sessionId,re=$.ack,oe=this,le=oe.db;if(le.enable)oe.pushMsgTask(function(){return le.getMsgCountAfterAck({shouldCountNotifyUnread:oe.options.shouldCountNotifyUnread,sessionId:z,ack:re}).then(function(Ve){var ze={id:z,unread:Ve,ack:re};return oe.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done",ze),oe.syncing?oe.cacheSyncedSession(ze):V&&oe.onUpdateSession(ze),le.updateSession(ze)}).catch(function(Ve){oe.logger.error("markUnreadBySessionAck::error",Ve)})});else{var ue=oe.getSessionInCache(z);if(ue){var ie=ue.unreadMsgs;if(ie&&ie.length){for(var ae=0,Fe=[],de=ie.length-1;de>=0;de--){var Ne=ie[de];if(!(Ne.time>re))break;ae++,Fe.push(Ne)}ue.unreadMsgs=Fe,ue.unread=ae,oe.logger.info("session::markUnreadBySessionAck: unread ".concat(ae)),oe.syncing?oe.cacheSyncedSession(ue):V&&oe.onUpdateSession(ue)}}}}},function(t,r,e){var n=e(37).fn;n.processChatroom=function(g){switch(g.cmd){case"getChatroomAddress":this.onChatroomAddress(g)}},n.onChatroomAddress=function(g){g.error||(g.obj.address=g.content.address)}},function(t,r,e){var n=e(37).fn;n.processQchat=function(g){switch(g.cmd){case"getQChatAddress":this.onQChatAddress(g)}},n.onQChatAddress=function(g){g.error||(g.obj.address=g.content.address)}},function(t,r,e){e(37).fn.processFilter=function(n){switch(n.cmd){case"sendFilterMsg":this.onSendMsg(n,!0);break;case"filterMsg":this.onMsg(n,!0);break;case"filterSysMsg":this.onSysMsg(n,!0);break;case"sendFilterCustomSysMsg":this.onSendSysMsg(n,!0)}}},function(t,r,e){var n=e(11),g=e(48),y=e(37).fn,i=e(0),k=g.clientTypeMap;function L($){$=$||{};var V=i.copy($);return V.clientType&&(V.clientType=k[V.clientType]||""),V.serverCustom&&(V.custom=JSON.parse(V.serverCustom),typeof V.custom[0]=="string"&&(V.custom=V.custom[0]),delete V.serverCustom),V}y.processEventService=function($){var V=$.content,z=$.error,re=this.options||{};switch(z&&(z.callFunc="events::processsEventService",this.onCustomError("事件服务解包失败","EVENT_SERVICE_ERROR",z)),$.cmd){case"pushEvent":if(i.isFunction(re.onpushevents)){var oe={msgEvents:[L(V.msgEvent)]};re.onpushevents(oe)}break;case"pushEvents":if(i.isFunction(re.onpushevents)){var le=V.msgEvents;le={msgEvents:n(le).call(le,function(ue){return L(ue)})},re.onpushevents(le)}}}},function(t,r,e){var n=e(37).fn,g=e(0);n.processProxyService=function(y){var i=y.error;switch(i&&(i.callFunc="events::processProxyService",this.onCustomError("proxyService","EVENT_PROXY_SERVICE_ERROR",i)),y.cmd){case"onProxyMsg":if(g.isFunction(this.options.onProxyMsg)){var k=y.content.proxyMsg||{};k.time&&(k.time=+k.time),this.options.onProxyMsg(k)}break;case"httpProxy":y.obj=y.content&&y.content.proxyTag}}},function(t,r,e){var n=e(10),g=e(11),y=e(0),i=function(ae){this.account=ae.account},k=i.prototype,L=k.Message=e(80),$=k.TextMessage=e(857),V=k.FileMessage=e(209),z=k.GeoMessage=e(861),re=k.NotificationMessage=e(862),oe=k.CustomMessage=e(863),le=k.TipMessage=e(864),ue=k.RobotMessage=e(865),ie=k.G2Message=e(866);k.validScenes=L.validScenes,k.validTypes=L.validTypes,k.sceneMap=L.sceneMap,k.sceneReverseMap=L.sceneReverseMap,k.reverse=function(ae){var Fe;switch(L.getType(ae)){case"text":Fe=n($).call($,ae);break;case"image":case"audio":case"video":case"file":Fe=n(V).call(V,ae);break;case"geo":Fe=n(z).call(z,ae);break;case"notification":Fe=n(re).call(re,ae);break;case"custom":Fe=n(oe).call(oe,ae);break;case"tip":Fe=n(le).call(le,ae);break;case"g2":Fe=n(ie).call(ie,ae);break;case"robot":Fe=n(ue).call(ue,ae);break;default:Fe=n(L).call(L,ae)}return L.setExtra(Fe,this.account),Fe},k.reverseMsgs=function(ae,Fe){var de,Ne,Ve=this;return g(ae).call(ae,function(ze){return ze=n(Ve).call(Ve,ze),Fe&&((de=Fe.modifyObj)&&(ze=y.merge(ze,de)),Ne=Fe.mapper,y.isFunction(Ne)&&(ze=Ne(ze))),ze})},t.exports=i},function(t,r,e){var n=e(19),g=e(10),y=e(80),i=e(0);function k(L){i.verifyOptions(L,"text","msg::TextMessage"),L.type="text",y.call(this,L)}k.prototype=n(y.prototype),k.reverse=function(L){return g(y).call(y,L)},t.exports=k},function(t,r,e){var n=e(19),g=e(209);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(i,k){return!0},t.exports=y},function(t,r,e){var n=e(19),g=e(209);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(){},t.exports=y},function(t,r,e){var n=e(19),g=e(209);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(){},t.exports=y},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(80),k=e(0);function L($){$.type="geo",k.verifyOptions($,"geo","msg::GeoMessage"),k.verifyOptions($.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),k.verifyParamType("geo.lng",$.geo.lng,"number","msg::GeoMessage"),k.verifyParamType("geo.lat",$.geo.lat,"number","msg::GeoMessage"),k.verifyParamType("geo.title",$.geo.title,"string","msg::GeoMessage"),i.call(this,$),this.attach=n($.geo)}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return $.attach=$.attach?""+$.attach:"",V.geo=$.attach?JSON.parse($.attach):{},V},t.exports=L},function(t,r,e){var n=e(19),g=e(10),y=e(11),i=e(121),k=e(0).notundef,L=e(80),$=e(156).IM,V=e(198),z=e(208),re={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function oe(){}oe.prototype=n(L.prototype),oe.reverse=function(le){var ue=g(L).call(L,le);if(le.attach=le.attach?""+le.attach:"",le.attach){var ie=JSON.parse(le.attach);if(ue.attach={type:re[ie.id]||ie.id},k(ie.data)){var ae,Fe,de=ie.data;k(de.tinfo)&&(ue.attach.team=g(V).call(V,$.syncUnserialize(de.tinfo,"team"),!0)),k(de.ids)&&(ue.attach.accounts=de.ids),k(de.id)&&(ue.attach.account=de.id),k(de.uinfos)&&(ue.attach.users=y(ae=de.uinfos).call(ae,function(Ne){return g(z).call(z,$.syncUnserialize(Ne,"user"))})),k(de.mute)&&(ue.attach.mute=+de.mute==1),k(de.attach)&&(ue.attach.custom=de.attach),k(de.channel)&&(ue.attach.channelId=de.channel),k(de.calltype)&&(ue.attach.netcallType=de.calltype),k(de.duration)&&(ue.attach.duration=de.duration),k(de.time)&&(ue.attach.time=de.time),k(de.from)&&(ue.attach.from=de.from),k(de.ext)&&(ue.attach.ext=de.ext),ue.attach.accounts&&ue.attach.accounts.length<=2&&ue.from===ue.to&&i(Fe=ue.attach.accounts).call(Fe,function(Ne){if(Ne!==ue.to)return ue.to=Ne,!0})}}else ue.attach={};return ue},t.exports=oe},function(t,r,e){var n=e(19),g=e(10),y=e(80),i=e(0);function k(L){i.verifyOptions(L,"content","msg::CustomMessage"),L.type="custom",y.call(this,L),this.attach=L.content}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.content=L.attach,$},t.exports=k},function(t,r,e){var n=e(19),g=e(10),y=e(80),i=e(0);function k(L){i.verifyOptions(L,"tip","msg::TipMessage"),L.type="tip",y.call(this,L),this.body=L.tip}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.text="",$.tip=L.body,L.attach&&($.attach=L.attach),$},t.exports=k},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(11),k=e(80),L=e(0),$={welcome:"00",text:"01",link:"03"},V={"01":"text","02":"image","03":"answer",11:"template"};function z(re){L.verifyOptions(re,"content","msg::RobotMessage"),L.undef(re.robotAccid)&&(re.robotAccid=re.to);var oe=re.content;switch(oe.type){case"welcome":L.undef(re.body)&&(this.body="欢迎消息");break;case"text":L.verifyOptions(oe,"content","msg::RobotMessage"),L.undef(re.body)&&(this.body=oe.content);break;case"link":L.verifyOptions(oe,"target","msg::RobotMessage")}oe.type&&(oe.type=$[oe.type]),oe={param:oe,robotAccid:re.robotAccid},this.attach=n(oe),re.type="robot",k.call(this,re)}z.prototype=g(k.prototype),z.reverse=function(re){var oe=y(k).call(k,re);if(oe.type==="robot"){var le=JSON.parse(re.attach);if(le.param&&(le.param.type=V[le.param.type]||"unknown"),le.robotMsg){var ue=(le=L.merge(le,le.robotMsg)).message;le.flag==="bot"?le.message=i(ue).call(ue,function(ie){return ie.type=V[ie.type]||"unknown",ie}):le.flag,delete le.robotMsg}oe.content=le}return oe},t.exports=z},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(80),k=e(0);function L($){k.verifyOptions($,"attach","msg::G2Message"),$.type="g2",i.call(this,$),this.attach=n($.attach)}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return $.attach&&(V.attach=JSON.parse($.attach)),V},t.exports=L},function(t,r,e){var n=e(51),g=e(60),y=e(24),i=e(61),k=e(11),L=e(15),$=e(8),V=e(3),z=e(2),re=e(34),oe=e(5),le=e(52),ue=e(53),ie=e(54),ae=e(55),Fe=e(42);function de(Et,lr){var tr=oe(Et);if(le){var or=le(Et);lr&&(or=L(or).call(or,function(dr){return ue(Et,dr).enumerable})),tr.push.apply(tr,or)}return tr}function Ne(Et){for(var lr=1;lr<arguments.length;lr++){var tr,or,dr=arguments[lr]!=null?arguments[lr]:{};lr%2?z(tr=de(Object(dr),!0)).call(tr,function(cr){n(Et,cr,dr[cr])}):ie?ae(Et,ie(dr)):z(or=de(Object(dr))).call(or,function(cr){Fe(Et,cr,ue(dr,cr))})}return Et}var Ve=e(41).fn,ze=e(0),jt=ze.isArray,kt=e(160);Ve.mergeObjArray=function(Et,lr,tr){return Et||(Et=[]),lr?(jt(lr)||(lr=[lr]),lr.length?(tr=tr||{},ze.mergeObjArray(Et,lr,tr)):Et):Et},Ve.cutObjArray=function(Et,lr,tr){return Et&&lr?(jt(lr)||(lr=[lr]),lr.length?(tr=tr||{},ze.cutObjArray(Et,lr,tr)):Et):Et},Ve.mergeLoginPorts=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"deviceId"})},Ve.cutLoginPorts=function(Et,lr){return this.cutObjArray(Et,lr,{keyPath:"deviceId",sortPath:"type"})},Ve.mergeRelations=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"account"})},Ve.cutRelations=function(Et,lr){return this.cutObjArray(Et,lr,{keyPath:"account"})},Ve.findRelation=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"account",value:lr})},Ve.mergeFriends=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"account"})},Ve.cutFriends=function(Et,lr){return this.cutObjArray(Et,lr,{keyPath:"account"})},Ve.cutFriendsByAccounts=function(Et,lr){jt(lr)||(lr=[lr]);var tr=k(lr).call(lr,function(or){return{account:or}});return this.cutFriends(Et,tr)},Ve.findFriend=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"account",value:lr})},Ve.mergeUsers=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"account"})},Ve.findUser=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"account",value:lr})},Ve.mergeTeams=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"teamId"})},Ve.cutTeams=function(Et,lr){return this.cutObjArray(Et,lr,{keyPath:"teamId"})},Ve.findTeam=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"teamId",value:lr})},Ve.assembleTeamOwner=kt.assembleOwner,Ve.assembleTeamMembers=kt.assembleMembers,Ve.genTeamMemberId=kt.genId,Ve.mergeTeamMembers=function(Et,lr){return this.mergeObjArray(Et,lr)},Ve.cutTeamMembers=function(Et,lr){return this.cutObjArray(Et,lr)},Ve.cutTeamMembersByAccounts=function(Et,lr,tr){jt(tr)||(tr=[tr]);var or=kt.assembleMembers({teamId:lr},tr);return this.cutTeamMembers(Et,or)},Ve.findTeamMember=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"id",value:lr})},Ve.mergeSessions=function(Et,lr){return this.mergeObjArray(Et,lr,{sortPath:"updateTime",desc:!0})},Ve.cutSessions=function(Et,lr){return this.cutObjArray(Et,lr)},Ve.cutSessionsByIds=function(Et,lr){jt(lr)||(lr=[lr]);var tr=k(lr).call(lr,function(or){return{id:or}});return this.cutSessions(Et,tr)},Ve.findSession=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"id",value:lr})},Ve.mergeMsgs=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"idClient",sortPath:"time"})},Ve.cutMsgs=function(Et,lr){return this.cutObjArray(Et,lr,{keyPath:"idClient"})},Ve.cutMsgsByIdClients=function(Et,lr){jt(lr)||(lr=[lr]);var tr=k(lr).call(lr,function(or){return{idClient:or}});return this.cutMsgs(Et,tr)},Ve.findMsg=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"idClient",value:lr})},Ve.mergeSysMsgs=function(Et,lr){return this.mergeObjArray(Et,lr,{keyPath:"idServer",desc:!0})},Ve.cutSysMsgs=function(Et,lr){return this.cutObjArray(Et,lr,{keyPath:"idServer"})},Ve.cutSysMsgsByIdServers=function(Et,lr){jt(lr)||(lr=[lr]);var tr=k(lr).call(lr,function(or){return{idServer:or}});return this.cutSysMsgs(Et,tr)},Ve.findSysMsg=function(Et,lr){return ze.findObjInArray(Et,{keyPath:"idServer",value:lr})},Ve.searchLocal=function(Et){if(ze.verifyOptions(Et,"keyword","searchLocal"),this.db.enable){var lr,tr=this,or=this.db,dr=Et.keyword+"",cr=["account","nick","alias"],nr=["id","scene","lastMsg.type","lastMsg.text","localCustom","target.account","target.nick","target.alias","target.name"],ur="",ar=Et.keyPath;switch(ar?(ur=(ar=(ar+"").split(".")).shift(),ar=ar.join(".")):ur="all",ur){case"user":ar&&(cr=L(cr).call(cr,function(Nr){return Nr===ar||$(Nr).call(Nr,ar+".")===0})),yr(cr).then(function(Nr){Et.done(null,{sessions:[],users:Nr})});break;case"session":ar&&(nr=L(nr).call(nr,function(Nr){return Nr===ar||$(Nr).call(Nr,ar+".")===0})),gr(nr,!ar||$(ar).call(ar,"target")>-1).then(function(Nr){Et.done(null,{sessions:Nr,users:[]})});break;case"all":wr().then(function(){V.all([gr(nr,!0),yr(cr)]).then(function(Nr){Et.done(null,{sessions:Nr[0],users:Nr[1]})})});break;default:Et.done(null,{sessions:[],users:[],msg:'keyPath must start with "user" or "session"'})}}else Et.done(null,{sessions:[],users:[],msg:"no db"});function gr(Nr,Pr){return pr.apply(this,arguments)}function pr(){return(pr=i(g.mark(function Nr(Pr,sr){var Ir;return g.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Ir=sr?[or.getSessions(),wr(),or.getTeams(),or.getSuperTeams()]:[or.getSessions()],Ar.abrupt("return",V.all(Ir).then(function(Cr){var br,vr=Cr[0]||[],Tr={p2p:Cr[1]||[],team:Cr[2]||[],superTeam:Cr[3]||[]},Br={};return sr&&(z(br=oe(Tr)).call(br,function(Lr){var Fr;z(Fr=Tr[Lr]).call(Fr,function(qr){var Vr=qr.teamId||qr.account;Br[Lr+"-"+Vr]=qr})}),z(vr).call(vr,function(Lr){Lr.target=Br[Lr.id]})),mr(Pr,vr)}));case 2:case"end":return Ar.stop()}},Nr)}))).apply(this,arguments)}function yr(Nr){return Sr.apply(this,arguments)}function Sr(){return(Sr=i(g.mark(function Nr(Pr){var sr;return g.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return Ir.next=2,wr();case 2:return sr=Ir.sent,Ir.abrupt("return",mr(Pr,sr));case 4:case"end":return Ir.stop()}},Nr)}))).apply(this,arguments)}function wr(){return Mr.apply(this,arguments)}function Mr(){return(Mr=i(g.mark(function Nr(){var Pr,sr;return g.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(!lr){Ir.next=2;break}return Ir.abrupt("return",lr);case 2:return Ir.next=4,tr.db.getFriends();case 4:if(Ir.t0=Ir.sent,Ir.t0){Ir.next=7;break}Ir.t0=[];case 7:return Pr=Ir.t0,sr=tr.protocol.userSet||{},lr=k(Pr).call(Pr,function(Ar){return Ne(Ne({},Ar),sr[Ar.account])}),Ir.abrupt("return",lr);case 11:case"end":return Ir.stop()}},Nr)}))).apply(this,arguments)}function mr(Nr,Pr){var sr=[];return z(Pr).call(Pr,function(Ir){for(var Ar=0;Ar<Nr.length;Ar++){var Cr=_r(Ir,Nr[Ar].split("."));if(Cr&&$(Cr).call(Cr,dr)>-1){sr.push(re({},Ir));break}}}),sr}function _r(Nr,Pr){if(y(Nr)==="object"&&Nr)return Pr.length===1?Nr[Pr[0]]:_r(Nr[Pr.shift()],Pr)}}},function(t,r,e){var n=e(9),g=e(41).fn,y=e(0),i=e(26).reportAPI;g.kick=function(k){var L;(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"kick",done:k.done}),y.verifyOptions(k,"deviceIds","link::kick"),this.processCallback(k),this.sendCmd("kick",{deviceIds:n(L=k.deviceIds).call(L,0)},k.callback)},g.disconnect=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"disconnect",done:k.done}),k=k||{},this.protocol.disconnect(k.done)}},function(t,r,e){var n=e(41).fn,g=e(0),y=e(26).reportAPI;n.markInBlacklist=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"markInBlacklist",done:i.done}),g.verifyOptions(i,"account isAdd","relation::markInBlacklist"),g.verifyParamType("isAdd",i.isAdd,"boolean","relation::markInBlacklist"),this.processCallback(i),this.sendCmd("markInBlacklist",{account:i.account,isAdd:i.isAdd},i.callback)},n.addToBlacklist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"addToBlacklist",done:i.done}),i.isAdd=!0,this.markInBlacklist(i)},n.removeFromBlacklist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"removeFromBlacklist",done:i.done}),i.isAdd=!1,this.markInBlacklist(i)},n.markInMutelist=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"markInMutelist",done:i.done}),g.verifyOptions(i,"account","relation::markInMutelist"),g.verifyParamType("isAdd",i.isAdd,"boolean","relation::markInMutelist"),this.processCallback(i),this.sendCmd("markInMutelist",{account:i.account,isAdd:i.isAdd},i.callback)},n.addToMutelist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"addToMutelist",done:i.done}),i.isAdd=!0,this.markInMutelist(i)},n.removeFromMutelist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"removeFromMutelist",done:i.done}),i.isAdd=!1,this.markInMutelist(i)},n.getRelations=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"getRelations",done:i.done});var k=this,L=k.db,$=0;function V(){k.sendCmd("getRelations",{timetag:$,NOTSTORE:"timetag"},i.callback)}i=g.verifyOptions(i),k.processCallback(i),L.enable?L.getRelationsTimetag().then(function(z){$=z,V()},V):V()}},function(t,r,e){var n=e(60),g=e(61),y=e(4),i=e(2),k=e(8),L=e(41).fn,$=e(0),V=$.objs2accounts,z=e(208),re=e(26).reportAPI;L.updateMyInfo=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"updateMyInfo",done:oe.done}),$.verifyOptions(oe),this.processCallback(oe),oe.user=new z(oe),delete oe.user.account,this.sendCmd("updateMyInfo",{user:oe.user,antispamTag:{antiSpamBusinessId:oe.antiSpamBusinessId},single:!0},oe.callback)},L.getMyInfo=function(oe){return(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getMyInfo",done:oe.done}),(oe=oe||{}).account=this.account,this.getUser(oe)},L.getUser=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getUser",done:oe.done});var le,ue=this,ie=ue.db;function ae(){ue.sendCmd("getUsers",{accounts:[le],single:!0},oe.callback)}$.verifyOptions(oe,"account","user::getUser"),ue.processCallback(oe),oe.cbaop=function(Fe,de){if(!Fe)return de=de[0]||null,ue.logger.info("api::getUser: cbaop ".concat(le)),de},le=oe.account,oe.sync?ae():ie.enable?ie.getUser(le).then(function(Fe){Fe?oe.done(null,Fe):ae()},ae):ae()},L.getUsers=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getUsers",done:oe.done});var le,ue=this,ie=ue.db,ae=[];function Fe(){ue.sendCmd("getUsers",{accounts:le,single:!0},oe.callback)}$.verifyOptions(oe,"accounts","user::getUsers"),$.verifyParamType("accounts",oe.accounts,"array","user::getUsers"),ue.processCallback(oe),oe.cbaop=function(de,Ne){if(!de)return Ne=y(Ne).call(Ne,ae),ue.logger.info("api::getUsers: cbaop ".concat(le)),Ne},le=$.deduplicate(oe.accounts),$.verifyArrayMax("accounts",oe.accounts,150,"user::getUsers"),oe.sync?Fe():ie.enable?ie.getUsers({accountIds:le}).then(function(de){if(de&&de.length===le.length)oe.done(null,de);else{ae=de;var Ne=V(de),Ve=[];i(le).call(le,function(ze){k(Ne).call(Ne,ze)===-1&&Ve.push(ze)}),le=Ve,Fe()}},Fe):Fe()},L.getUsersFromDB=function(){var oe=g(n.mark(function le(ue){var ie,ae,Fe;return n.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return ae=(ie=this).db,(ue=ue||{}).done=re({instance:this,className:"NIMFn",funcName:"getUsersFromDB",done:ue.done}),$.validate({accountIds:{type:"array",required:!1}},ue,"user::getUsersFromDB"),ie.processCallback(ue),de.next=8,ae.getUsers(ue);case 8:return Fe=de.sent,ue.callback(null,Fe),de.abrupt("return",Fe);case 11:case"end":return de.stop()}},le,this)}));return function(le){return oe.apply(this,arguments)}}()},function(t,r,e){var n=e(60),g=e(61),y=e(143),i=e(41).fn,k=e(0),L=k.notundef,$=e(783),V=e(26).reportAPI;i.friendRequest=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"friendRequest",done:z.done}),k.verifyOptions(z,"type account","friend::friendRequest"),k.verifyParamValid("type",z.type,$.validTypes(),"friend::friendRequest"),this.processPs(z),this.processCallback(z);var re={account:z.account,type:$.getByteFromType(z.type),ps:z.ps};L(z.idServer)&&(re.idServer=z.idServer),this.sendCmd("friendRequest",re,z.callback)},i.addFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"addFriend",done:z.done}),z.type="addFriend",this.friendRequest(z)},i.applyFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"applyFriend",done:z.done}),z.type="applyFriend",this.friendRequest(z)},i.passFriendApply=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"passFriendApply",done:z.done}),z.type="passFriendApply",this.friendRequest(z)},i.rejectFriendApply=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"rejectFriendApply",done:z.done}),z.type="rejectFriendApply",this.friendRequest(z)},i.deleteFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"deleteFriend",done:z.done}),k.verifyOptions(z,"account","friend::deleteFriend");var re=z.delAlias===!0;this.processCallback(z),this.sendCmd("deleteFriend",{account:z.account,delFriendParams:{delAlias:re?1:0}},z.callback)},i.updateFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"updateFriend",done:z.done}),this.processCallback(z);var re=new $(z);this.sendCmd("updateFriend",{friend:re,single:!0},z.callback)},i.getFriends=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"getFriends",done:z.done});var re=this.db;k.validate({timetag:{type:"number",required:!1}},z,"friend::getFriends"),this.processCallback(z),re.enable?re.getFriends({updateTime:z.updateTime||0}).then(function(oe){(oe=y(oe).call(oe,function(le,ue){return le.updateTime-ue.updateTime})).invalid=[],z.done(null,oe)}):this.sendCmd("getFriends",{timetag:z.updateTime||0,NOTSTORE:"timetag"},z.callback)},i.getFriendsFromDB=function(){var z=g(n.mark(function re(oe){var le,ue,ie;return n.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ue=(le=this).db,(oe=oe||{}).done=V({instance:this,className:"NIMFn",funcName:"getFriendsFromDB",done:oe.done}),k.validate({accountIds:{type:"array",required:!1}},oe,"friend::getFriendsFromDB"),le.processCallback(oe),ae.next=8,ue.getFriends(oe);case 8:return ie=ae.sent,oe.callback(null,ie),ae.abrupt("return",ie);case 11:case"end":return ae.stop()}},re,this)}));return function(re){return z.apply(this,arguments)}}(),i.isMyFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"isMyFriend",done:z.done});var re=this.db;k.validate({account:{type:"string",allowEmpty:!1,require:!0}},z),this.processCallback(z),re.enable||z.done(null,!1),re.getFriend(z.account).then(function(oe){oe&&oe.valid===!0?z.done(null,!0):z.done(null,!1)})},i.isUserInBlackList=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"isUserInBlackList",done:z.done});var re=this.db;k.validate({account:{type:"string",allowEmpty:!1,require:!0}},z),this.processCallback(z),re.enable||z.done(null,!1),re.getUserFromBlackList(z.account).then(function(oe){oe&&oe.account?z.done(null,!0):z.done(null,!1)})}},function(t,r,e){var n=e(41).fn,g=e(26).reportAPI;n.getRobots=function(y){(y=y||{}).done=g({instance:this,className:"NIMFn",funcName:"getRobots",done:y.done}),this.logger.warn("this api will be abandon"),(y=y||{}).type="getRobots",this.processCallback(y),this.sendCmd("sync",{sync:{robots:0}},y.callback)}},function(t,r,e){var n=e(60),g=e(61),y=e(9),i=e(11),k=e(15),L=e(3),$=e(6),V=e(41).fn,z=e(0),re=z.undef,oe=e(198),le=e(160),ue=e(26).reportAPI;V.createTeam=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"createTeam",done:ie.done}),z.verifyOptions(ie,"type name","team::createTeam"),re(ie.accounts)?ie.accounts=[]:z.verifyParamType("accounts",ie.accounts,"array","team::createTeam"),ie.action="create",this.processPs(ie),this.processCallback(ie),ie.team=new oe(ie);var Fe={team:ie.team,accounts:y(ae=ie.accounts).call(ae,0),ps:ie.ps,antispamTag:{antiSpamBusinessId:ie.antiSpamBusinessId}};this.sendCmd("createTeam",Fe,ie.callback)},V.updateTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::updateTeam"),ie.action="update",this.processCallback(ie),ie.team=new oe(ie),this.sendCmd("updateTeam",{team:ie.team,antispamTag:{antiSpamBusinessId:ie.antiSpamBusinessId},single:!0},ie.callback)},V.addTeamMembers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"addTeamMembers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::addTeamMembers"),z.verifyParamType("accounts",ie.accounts,"array","team::addTeamMembers"),this.processPs(ie),z.notexist(ie.custom)&&(ie.custom=""),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0),ps:ie.ps,attach:ie.custom};this.sendCmd("addTeamMembers",Fe,ie.callback)},V.removeTeamMembers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"removeTeamMembers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::removeTeamMembers"),z.verifyParamType("accounts",ie.accounts,"array","team::removeTeamMembers"),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0)};this.sendCmd("removeTeamMembers",Fe,ie.callback)},V.acceptTeamInvite=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"acceptTeamInvite",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::acceptTeamInvite"),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,type:"teamInvite"};this.sendCmd("acceptTeamInvite",ae,ie.callback)},V.rejectTeamInvite=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"rejectTeamInvite",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::rejectTeamInvite"),this.processPs(ie),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,ps:ie.ps,type:"teamInvite"};this.sendCmd("rejectTeamInvite",ae,ie.callback)},V.applyTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"applyTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::applyTeam"),this.processPs(ie),this.processCallback(ie);var ae={teamId:ie.teamId,ps:ie.ps};this.sendCmd("applyTeam",ae,ie.callback)},V.passTeamApply=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"passTeamApply",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::passTeamApply"),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,type:"applyTeam"};this.sendCmd("passTeamApply",ae,ie.callback)},V.rejectTeamApply=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"rejectTeamApply",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::rejectTeamApply"),this.processPs(ie),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,ps:ie.ps,type:"applyTeam"};this.sendCmd("rejectTeamApply",ae,ie.callback)},V.addTeamManagers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"addTeamManagers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::addTeamManagers"),z.verifyParamType("accounts",ie.accounts,"array","team::addTeamManagers"),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0)};this.sendCmd("addTeamManagers",Fe,ie.callback)},V.removeTeamManagers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"removeTeamManagers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::removeTeamManagers"),z.verifyParamType("accounts",ie.accounts,"array","team::removeTeamManagers"),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0)};this.sendCmd("removeTeamManagers",Fe,ie.callback)},V.updateInfoInTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateInfoInTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::updateInfoInTeam"),this.processCallback(ie),this.sendCmd("updateInfoInTeam",{teamMember:new le(ie),single:!0},ie.callback)},V.updateNickInTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateNickInTeam",done:ie.done}),z.verifyOptions(ie,"teamId account","team::updateNickInTeam"),this.processCallback(ie),this.sendCmd("updateNickInTeam",{teamMember:new le(ie),single:!0},ie.callback)},V.updateMuteStateInTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateMuteStateInTeam",done:ie.done}),z.verifyOptions(ie,"teamId account mute","team::updateMuteStateInTeam"),this.processCallback(ie),ie.mute=ie.mute?1:0,this.sendCmd("updateMuteStateInTeam",ie)},V.getMutedTeamMembers=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getMutedTeamMembers",done:ie.done}),z.verifyOptions(ie,"teamId","team::getMutedTeamMembers"),this.processCallback(ie),this.sendCmd("getMutedTeamMembers",ie)},V.leaveTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"leaveTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::leaveTeam"),this.processCallback(ie);var ae={teamId:ie.teamId};this.sendCmd("leaveTeam",ae,ie.callback)},V.transferTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"transferTeam",done:ie.done}),z.verifyOptions(ie,"teamId account leave","team::transferTeam"),z.verifyParamType("leave",ie.leave,"boolean","team::transferTeam"),this.processCallback(ie);var ae={teamId:ie.teamId,account:ie.account,leave:ie.leave};this.sendCmd("transferTeam",ae,ie.callback)},V.dismissTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"dismissTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::dismissTeam"),this.processCallback(ie);var ae={teamId:ie.teamId};this.sendCmd("dismissTeam",ae,ie.callback)},V.getTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeam",done:ie.done});var ae,Fe=this,de=Fe.db;function Ne(){Fe.sendCmd("getTeam",{teamId:ie.teamId},ie.callback)}z.verifyOptions(ie,"teamId","team::getTeam"),Fe.processCallback(ie),ie.cbaop=function(Ve){Ve||Fe.logger.info("api::getTeam: cbaop ".concat(ae))},ae=ie.teamId,de.enable&&!ie.sync?de.getTeam(ae).then(function(Ve){Ve&&Ve.validToCurrentUser?(Fe.logger.log("api::getTeam: db.getTeam ".concat(ae)),ie.done(null,Ve)):Ne()},Ne):Ne()},V.getTeams=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeams",done:ie.done});var ae=this,Fe=ae.db,de=0;function Ne(){ae.sendCmd("getTeams",{timetag:de,NOTSTORE:"timetag"},ie.callback)}z.verifyOptions(ie),ae.processCallback(ie),Fe.enable?Fe.getTeamsTimetag().then(function(Ve){de=Ve,Ne()},Ne):Ne()},V.getTeamsById=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamsById",done:ie.done}),z.verifyOptions(ie,"teamIds","teams::getTeamsById"),this.processCallback(ie),this.sendCmd("getTeamsById",{teamIds:ie.teamIds},ie.callback)},V.getTeamMembers=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMembers",done:ie.done});var ae=this;z.verifyOptions(ie,"teamId","team::getTeamMembers"),ae.processCallback(ie),ae.sendCmd("getTeamMembers",{teamId:ie.teamId,timetag:0,NOTSTORE:"timetag"},ie.callback)},V.getTeamMemberByTeamIdAndAccount=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMemberByTeamIdAndAccount",done:ie.done});var ae=this;z.verifyParamType("teamId",ie.teamId,"numeric or numeric string","team::getTeamMemberByTeamIdAndAccount"),z.verifyOptions(ie,"account","team::getTeamMemberByTeamIdAndAccount"),ae.processCallback(ie),ae.sendCmd("getTeamMembers",{teamId:ie.teamId,timetag:0,NOTSTORE:"timetag"},function(Fe,de,Ne){var Ve={};if(de&&de.members&&de.members.length){for(var ze=0;ze<de.members.length;ze++)if(de.members[ze].account===ie.account){Ve[ie.account]=de.members[ze];break}}ie.callback(Fe,Ve,Ne)})},V.getTeamMemberInvitorAccid=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMemberInvitorAccid",done:ie.done}),z.verifyParamType("teamId",ie.teamId,"numeric or numeric string","team::getTeamMemberInvitorAccid"),re(ie.accounts)||(z.verifyParamType("accounts",ie.accounts,"array","team::getTeamMemberInvitorAccid"),ie.accounts.length>200&&z.onParamError("accounts 参数数组长度不能超过200","team::getTeamMemberInvitorAccid"));var ae,Fe={teamId:ie.teamId};ie.accounts.length&&(Fe.accounts=y(ae=ie.accounts).call(ae,0)),this.processCallback(ie),this.sendCmd("getTeamMemberInvitorAccid",Fe,function(de,Ne,Ve){ie.callback(de,Ve&&Ve.accountsMap||{})})},V.notifyForNewTeamMsg=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"notifyForNewTeamMsg",done:ie.done}),z.verifyOptions(ie,"teamIds","team::notifyForNewTeamMsg"),this.protocol.notifyForNewTeamMsg(ie.teamIds).then(function(ae){ie.done(ae.error||null,i(ae),ae.miss)},function(ae){ie.done(ae)})},V.getMyTeamMembers=function(ie){ue({instance:this,className:"NIMFn",funcName:"getMyTeamMembers",done:ie.done,hasCallback:!1});var ae=ie.done;z.verifyOptions(ie,"teamIds","team::getMyTeamMembers");var Fe=this.processCallbackPromise(ie);return this.sendCmd("getMyTeamMembers",ie),Fe.then(function(de){return typeof ae=="function"?ae(null,de):de}).catch(function(de){if(typeof ae=="function")return ae(de);throw de})},V.getLocalTeams=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getLocalTeams",done:ie.done});var ae,Fe=this.db,de=[];function Ne(){ie.teams=de,ie.done(ae,ie)}z.verifyOptions(ie,"teamIds","team::getLocalTeams"),z.verifyParamType("teamIds",ie.teamIds,"array","team::getLocalTeams"),this.processCallback(ie),Fe.enable?Fe.getTeamsByTeamIds(ie.teamIds).then(function(Ve){de=k(Ve).call(Ve,function(ze){return!!ze}),Ne()},function(Ve){ae=Ve,Ne()}):Ne()},V.getTeamsFromDB=function(){var ie=g(n.mark(function ae(Fe){var de,Ne,Ve;return n.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Ne=(de=this).db,(Fe=Fe||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamsFromDB",done:Fe.done}),z.validate({teamIds:{type:"array",required:!1}},Fe,"team::getTeamsFromDB"),de.processCallback(Fe),ze.next=8,Ne.getTeams(Fe);case 8:return Ve=ze.sent,Fe.callback(null,Ve),ze.abrupt("return",Ve);case 11:case"end":return ze.stop()}},ae,this)}));return function(ae){return ie.apply(this,arguments)}}(),V.getLocalTeamMembers=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getLocalTeamMembers",done:ie.done});var ae,Fe=this.db,de=[];function Ne(){ie.members=de,ie.done(ae,ie)}z.verifyOptions(ie,"teamId accounts","team::getLocalTeamMembers"),z.verifyParamType("accounts",ie.accounts,"array","team::getLocalTeamMembers"),this.processCallback(ie),Fe.enable?Fe.getInvalidTeamMembers(ie.teamId,ie.accounts).then(function(Ve){de=k(Ve).call(Ve,function(ze){return!!ze}),Ne()},function(Ve){ae=Ve,Ne()}):Ne()},V.getTeamMembersFromDB=function(){var ie=g(n.mark(function ae(Fe){var de,Ne,Ve;return n.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Ne=(de=this).db,(Fe=Fe||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMembersFromDB",done:Fe.done}),z.validate({teamIds:{type:"array",required:!1},accountIds:{type:"array",required:!1}},Fe,"team::getTeamMembersFromDB"),de.processCallback(Fe),ze.next=8,Ne.getTeamMembers(Fe);case 8:return Ve=ze.sent,Fe.callback(null,Ve),ze.abrupt("return",Ve);case 11:case"end":return ze.stop()}},ae,this)}));return function(ae){return ie.apply(this,arguments)}}(),V.deleteLocalTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteLocalTeam",done:ie.done});var ae,Fe=this.db;function de(){ie.done(ae,ie)}z.verifyOptions(ie,"teamId","team::deleteLocalTeam"),this.processCallback(ie),Fe.enable?Fe.deleteTeam(ie.teamId).then(function(){de()},function(Ne){ae=Ne,de()}):de()},V.muteTeamAll=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"muteTeamAll",done:ie.done}),z.verifyOptions(ie,"teamId mute","team::muteTeamAll"),ie.mute=ie.mute?1:0,this.processCallback(ie),this.sendCmd("muteTeamAll",ie)},V.sendTeamMsgReceipt=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"sendTeamMsgReceipt",done:ie.done}),z.verifyOptions(ie,"teamMsgReceipts","team::sendTeamMsgReceipt"),ie.teamMsgReceipts.length>50?this.logger.error("team::sendTeamMsgReceipt：teamMsgReceipts length over 50"):(this.processCallback(ie),this.sendCmd("sendTeamMsgReceipt",ie))},V.getTeamMsgReads=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMsgReads",done:ie.done}),z.verifyOptions(ie,"teamMsgReceipts","team::getTeamMsgReads"),this.processCallback(ie),this.sendCmd("getTeamMsgReads",ie)},V.getTeamMsgReadAccounts=function(ie){var ae=this;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMsgReadAccounts",done:ie.done});var Fe,de=this;z.verifyOptions(ie,"teamMsgReceipt","team::getTeamMsgReadAccounts"),ie.callback=function(Ne,Ve,ze){Ne&&Fe?(Ve=Ve||{teamMsgReceipt:ie.teamMsgReceipt},ie.done(Ne,Ve,{teamMsgReceipt:ie.teamMsgReceipt,unreadAccounts:Fe.unreadAccounts,readAccounts:Fe.readAccounts})):ie.done(Ne,Ve,ze)},this.db.enable&&ie.teamMsgReceipt.idClient?this.db.getMsgReadDetail(ie.teamMsgReceipt.idClient).then(function(Ne){if(Fe=Ne,!Ne)return L.reject("no record");if(Ne.unreadAccounts&&Ne.unreadAccounts.length>0)return L.reject("unreadAccounts.length > 0");var Ve={teamMsgReceipt:ie.teamMsgReceipt,unreadAccounts:Ne.unreadAccounts,readAccounts:Ne.readAccounts};de.logger.info("getTeamMsgReadAccounts from db"),ie.done(null,{teamMsgReceipt:ie.teamMsgReceipt},Ve)}).catch(function(Ne){ae.logger.warn("db.getMsgReadDetail invalid",Ne),de.sendCmd("getTeamMsgReadAccounts",ie)}):de.sendCmd("getTeamMsgReadAccounts",ie)},V.addTeamMembersFollow=function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},ie),ie.done=ue({instance:this,className:"NIMFn",funcName:"addTeamMembersFollow",done:ie.done}),this.processCallback(ie),this.sendCmd("updateInfoInTeam",{teamMember:{teamId:ie.teamId},teamSpecialFollowUpdateTag:{accountIds:$(ie.accountIds),type:1},single:!0},ie.callback)},V.removeTeamMembersFollow=function(ie){z.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},ie),ie.done=ue({instance:this,className:"NIMFn",funcName:"removeTeamMembersFollow",done:ie.done}),this.processCallback(ie),this.sendCmd("updateInfoInTeam",{teamMember:{teamId:ie.teamId},teamSpecialFollowUpdateTag:{accountIds:$(ie.accountIds),type:0},single:!0},ie.callback)}},function(t,r,e){var n=e(207),g=e(3),y=e(10),i=e(23),k=e(9),L=e(11),$=e(2),V=e(4),z=e(6),re=e(41).fn,oe=e(0),le=oe.undef,ue=e(312),ie=e(206),ae=e(26).reportAPI;function Fe(de){var Ne=this.db;if(!Ne.enable)return g.resolve({valid:!1});var Ve=Ne.getSuperTeam(de),ze=Ne.getSuperTeamMembersTimetag(de);return g.all([Ve,ze]).then(function(jt){var kt=n(jt,2),Et=kt[0],lr=kt[1],tr=Et&&Et.memberUpdateTime,or={timetag:lr=lr||0};return tr&&lr>=tr&&(or.valid=!0),g.resolve(or)}).catch(function(){return g.resolve({timetag:0})})}re.addSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamMembers",done:de.done}),oe.verifyOptions(de,"teamId accounts","superTeam::addSuperTeamMembers"),oe.verifyParamType("accounts",de.accounts,"array","superTeam::addSuperTeamMembers");var Ne=oe.deduplicate(de.accounts);this.processPs(de),this.processCallback(de);var Ve={teamId:de.teamId,accounts:Ne,ps:de.ps};this.sendCmd("addSuperTeamMembers",Ve,de.callback)},re.removeSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembers",done:de.done}),oe.verifyOptions(de,"teamId accounts","team::removeSuperTeamMembers"),oe.verifyParamType("accounts",de.accounts,"array","team::removeSuperTeamMembers");var Ne=oe.deduplicate(de.accounts);this.processCallback(de);var Ve={teamId:de.teamId,accounts:Ne};this.sendCmd("removeSuperTeamMembers",Ve,de.callback)},re.leaveSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"leaveSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","superTeam::leaveSuperTeam"),this.processCallback(de);var Ne={teamId:de.teamId};this.sendCmd("leaveSuperTeam",Ne,de.callback)},re.getSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeam",done:de.done});var Ne,Ve=this,ze=Ve.db;function jt(){Ve.sendCmd("getSuperTeam",{teamId:de.teamId},de.callback)}oe.verifyOptions(de,"teamId","team::getSuperTeam"),Ve.processCallback(de),de.cbaop=function(kt){kt||Ve.logger.info("api::getSuperTeam: cbaop ".concat(Ne))},Ne=de.teamId,ze.enable&&!de.sync?ze.getSuperTeam(Ne).then(function(kt){kt&&kt.validToCurrentUser?(Ve.logger.log("api::getSuperTeam: db.getSuperTeam ".concat(Ne)),de.done(null,kt)):jt()}).catch(function(){jt()}):jt()},re.getSuperTeams=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeams",done:de.done});var Ne=this,Ve=Ne.db,ze=0;function jt(){Ne.sendCmd("getSuperTeams",{timetag:ze,NOTSTORE:"timetag"},de.callback)}oe.verifyOptions(de),Ne.processCallback(de),Ve.enable?Ve.getSuperTeamsTimetag().then(function(kt){ze=kt,jt()},jt):jt()},re.updateSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","superTeam::updateSuperTeam"),de.action="update",this.processCallback(de),de.team=new ue(de),this.sendCmd("updateSuperTeam",{team:de.team,antispamTag:{antiSpamBusinessId:de.antiSpamBusinessId},single:!0},de.callback)},re.updateInfoInSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateInfoInSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","superTeam::updateInfoInSuperTeam"),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:new ie(de),single:!0},de.callback)},re.getSuperTeamMembersByJoinTime=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByJoinTime",done:de.done});var Ne=this,Ve=de,ze=Ve.joinTime,jt=y(Ve),kt=Ve.limit,Et=Ve.teamId;jt=!!jt,le(ze)&&(ze=0),le(kt)&&(kt=100),oe.verifyOptions(de,"teamId","superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("joinTime",ze,"number","api::superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("limit",kt,"number","api::superTeam::getSuperTeamMembersByJoinTime"),Ne.processCallback(de),Ne.sendCmd("getSuperTeamMembersByJoinTime",{teamId:Et,limit:kt,joinTime:ze,reverse:jt,timetag:0,NOTSTORE:"timetag"},de.callback)},re.getAllSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getAllSuperTeamMembers",done:de.done});var Ne=this,Ve=this.db;function ze(jt){jt=jt||0,Ne.sendCmd("getSuperTeamMembers",{teamId:de.teamId,timetag:jt,NOTSTORE:"timetag"},de.callback)}oe.verifyOptions(de,"teamId","superTeam::getAllSuperTeamMembers"),Ne.processCallback(de),i(Fe).call(Fe,this)(de.teamId).then(function(jt){var kt=jt.valid,Et=jt.timetag;kt?(Ne.logger.info("getAllSuperTeamMembers from local db"),Ve.getSuperTeamMembers(de.teamId).then(function(lr){var tr={teamId:de.teamId,members:lr};de.done(null,tr)},function(){return ze()})):ze(Et)})},re.applySuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"applySuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","team::applySuperTeam"),oe.verifyOptions(de,"teamId","team::applySuperTeam"),this.processPs(de),this.processCallback(de);var Ne={teamId:de.teamId,ps:de.ps};this.sendCmd("applySuperTeam",Ne,de.callback)},re.passSuperTeamApply=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"passSuperTeamApply",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::passSuperTeamApply"),this.processCallback(de);var Ne={idServer:de.idServer,teamId:de.teamId,from:de.from};this.sendCmd("passSuperTeamApply",Ne,de.callback)},re.rejectSuperTeamApply=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"rejectSuperTeamApply",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::rejectSuperTeamApply"),this.processPs(de),this.processCallback(de);var Ne={idServer:de.idServer,teamId:de.teamId,from:de.from,ps:de.ps};this.sendCmd("rejectSuperTeamApply",Ne,de.callback)},re.acceptSuperTeamInvite=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"acceptSuperTeamInvite",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::acceptSuperTeamInvite"),this.processCallback(de);var Ne={idServer:de.idServer,teamId:de.teamId,from:de.from};this.sendCmd("acceptSuperTeamInvite",Ne,de.callback)},re.rejectSuperTeamInvite=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"rejectSuperTeamInvite",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::rejectSuperTeamInvite"),this.processPs(de),this.processCallback(de);var Ne={idServer:de.idServer,teamId:de.teamId,from:de.from,ps:de.ps};this.sendCmd("rejectSuperTeamInvite",Ne,de.callback)},re.addSuperTeamManagers=function(de){var Ne;(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamManagers",done:de.done}),oe.verifyOptions(de,"teamId accounts","team::addSuperTeamManagers"),oe.verifyParamType("accounts",de.accounts,"array","team::addSuperTeamManagers"),this.processCallback(de);var Ve={teamId:de.teamId,accounts:k(Ne=de.accounts).call(Ne,0)};this.sendCmd("addSuperTeamManagers",Ve,de.callback)},re.removeSuperTeamManagers=function(de){var Ne;(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamManagers",done:de.done}),oe.verifyOptions(de,"teamId accounts","team::removeSuperTeamManagers"),oe.verifyParamType("accounts",de.accounts,"array","team::removeSuperTeamManagers"),this.processCallback(de);var Ve={teamId:de.teamId,accounts:k(Ne=de.accounts).call(Ne,0)};this.sendCmd("removeSuperTeamManagers",Ve,de.callback)},re.updateSuperTeamMembersMute=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeamMembersMute",done:de.done}),oe.verifyOptions(de,"teamId accounts mute","team::updateSuperTeamMembersMute"),oe.verifyParamType("accounts",de.accounts,"array","team::updateSuperTeamMembersMute"),oe.verifyArrayMax("accounts",de.accounts,10),this.processCallback(de),de.mute=de.mute?1:0,this.sendCmd("updateSuperTeamMembersMute",de)},re.updateSuperTeamMute=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeamMute",done:de.done}),oe.verifyOptions(de,"teamId mute","team::updateSuperTeamMute"),de.mute=de.mute?1:0,this.processCallback(de),this.sendCmd("updateSuperTeamMute",de)},re.updateNickInSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateNickInSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId account","team::updateNickInSuperTeam"),this.processCallback(de),this.sendCmd("updateNickInSuperTeam",{superTeamMember:new ie(de),single:!0},de.callback)},re.transferSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"transferSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId account leave","team::transferSuperTeam"),oe.verifyParamType("leave",de.leave,"boolean","team::transferSuperTeam"),this.processCallback(de);var Ne={teamId:de.teamId,account:de.account,leave:de.leave};this.sendCmd("transferSuperTeam",Ne,de.callback)},re.getSuperTeamMembersByAccounts=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByAccounts",done:de.done});var Ne=this,Ve=this.db,ze=de,jt=ze.teamId,kt=ze.accounts;if(oe.verifyOptions(de,"teamId accounts","superTeam::getSuperTeamMembersByAccounts"),oe.verifyParamType("accounts",kt,"array","superTeam::getSuperTeamMembersByAccounts"),oe.verifyArrayMax("accounts",kt,20),kt.length<=0)return oe.onParamError("参数accounts不能为空数组","superTeam::getSuperTeamMembersByAccounts");function Et(){var lr=L(kt).call(kt,function(tr){return jt+"|"+tr});Ne.processCallback(de),Ne.sendCmd("getSuperTeamMembersByAccounts",{memberIds:lr},function(tr,or){de.done(null,{accounts:kt,members:or.members,invaldAccounts:or.invalid})})}Fe.call(this,jt).then(function(lr){var tr,or,dr;return lr.valid?(tr=[],or=[],dr=[],$(kt).call(kt,function(cr){var nr,ur=Ve.getSuperTeamMemberById(V(nr="".concat(jt,"-")).call(nr,cr)).then(function(ar){or.push(ar)}).catch(function(){dr.push(cr)});tr.push(ur)}),void g.all(tr).then(function(){de.done(null,{accounts:kt,members:or,invaldAccounts:dr})})):Et()}).catch(function(){return Et()})},re.getMutedSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getMutedSuperTeamMembers",done:de.done});var Ne=this,Ve=de,ze=Ve.joinTime,jt=y(Ve),kt=Ve.limit,Et=Ve.teamId;jt=!!jt,le(ze)&&(ze=0),le(kt)&&(kt=100),oe.verifyOptions(de,"teamId","superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("joinTime",ze,"number","api::superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("limit",kt,"number","api::superTeam::getSuperTeamMembersByJoinTime"),this.processCallback(de),Ne.sendCmd("getMutedSuperTeamMembers",{teamId:Et,limit:kt,joinTime:ze,reverse:jt},de.callback)},re.addSuperTeamMembersFollow=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oe.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},de),de.done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamMembersFollow",done:de.done}),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:{teamId:de.teamId},teamSpecialFollowUpdateTag:{accountIds:z(de.accountIds),type:1},single:!0},de.callback)},re.removeSuperTeamMembersFollow=function(de){oe.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},de),de.done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembersFollow",done:de.done}),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:{teamId:de.teamId},teamSpecialFollowUpdateTag:{accountIds:z(de.accountIds),type:0},single:!0},de.callback)},re.getMySuperTeamMembers=function(de){ae({instance:this,className:"NIMFn",funcName:"getMySuperTeamMembers",done:de.done,hasCallback:!1}),this.processCallback(de),oe.verifyOptions(de,"teamIds","team::getMySuperTeamMembers"),this.sendCmd("getMySuperTeamMembers",de)}},function(t,r,e){var n=e(60),g=e(11),y=e(3),i=e(2),k=e(4),L=e(10),$=e(781),V=e(34),z=e(9),re=e(93),oe=e(28),le=e(15),ue=e(8),ie=e(68),ae=e(78),Fe=e(64),de=e(61);function Ne(nr,ur){var ar=ae!==void 0&&Fe(nr)||nr["@@iterator"];if(!ar){if(oe(nr)||(ar=function(Mr,mr){var _r;if(Mr){if(typeof Mr=="string")return Ve(Mr,mr);var Nr=z(_r=Object.prototype.toString.call(Mr)).call(_r,8,-1);if(Nr==="Object"&&Mr.constructor&&(Nr=Mr.constructor.name),Nr==="Map"||Nr==="Set")return ie(Mr);if(Nr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nr))return Ve(Mr,mr)}}(nr))||ur&&nr&&typeof nr.length=="number"){ar&&(nr=ar);var gr=0,pr=function(){};return{s:pr,n:function(){return gr>=nr.length?{done:!0}:{done:!1,value:nr[gr++]}},e:function(Mr){throw Mr},f:pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yr,Sr=!0,wr=!1;return{s:function(){ar=ar.call(nr)},n:function(){var Mr=ar.next();return Sr=Mr.done,Mr},e:function(Mr){wr=!0,yr=Mr},f:function(){try{Sr||ar.return==null||ar.return()}finally{if(wr)throw yr}}}}function Ve(nr,ur){(ur==null||ur>nr.length)&&(ur=nr.length);for(var ar=0,gr=new Array(ur);ar<ur;ar++)gr[ar]=nr[ar];return gr}var ze=e(41).fn,jt=e(0),kt=jt.undef,Et=jt.notundef,lr=e(303),tr=e(162),or=e(26).reportAPI,dr=e(876);function cr(nr,ur){var ar=this,gr=[],pr=[],yr=this.db,Sr=this;return yr.enable?(i(nr).call(nr,function(Mr){var mr=ar.protocol.getSessionInCache(Mr);mr?wr(mr,Mr):pr.push(yr.getSession(Mr).then(function(_r){return wr(_r,Mr)}))}),y.all(pr).then(function(){return gr})):(i(nr).call(nr,function(Mr){return wr(ar.protocol.getSessionInCache(Mr),Mr)}),y.resolve(gr));function wr(Mr,mr){var _r,Nr,Pr,sr;Mr?Mr.lastMsg?Mr.scene&&Mr.to?Mr.ack>=Mr.lastMsg.time?Sr.logger.warn(k(_r="".concat(ur," not need ack ")).call(_r,Mr.id)):gr.push(Mr):Sr.logger.warn(k(Nr="".concat(ur," session.scene|to undefined ")).call(Nr,Mr.id)):Sr.logger.warn(k(Pr="".concat(ur," session.lastMsg undefined ")).call(Pr,Mr.id)):Sr.logger.warn(k(sr="".concat(ur," session undefined ")).call(sr,mr))}}ze.setCurrSession=function(nr){or({instance:this,className:"NIMFn",funcName:"setCurrSession",hasCallback:!1}),this.resetSessionUnread(nr),this.protocol.setCurrSession(nr)},ze.resetAllSessionUnread=function(){or({instance:this,className:"NIMFn",funcName:"resetAllSessionUnread",hasCallback:!1});for(var nr in this.protocol.sessionSet)this.protocol.sessionSet[nr].unread>0&&this.resetSessionUnread(nr)},ze.resetSessionsUnread=function(){var nr=de(n.mark(function ur(ar){var gr,pr,yr,Sr,wr,Mr,mr,_r,Nr=arguments;return n.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return gr=Nr.length>1&&Nr[1]!==void 0?Nr[1]:function(){},gr=or({instance:this,className:"NIMFn",funcName:"resetSessionsUnread",done:gr}),(pr=this).logger.info("resetSessionsUnread::",ar),Pr.next=6,cr.call(this,ar,"api::resetSessionsUnread");case 6:if(yr=Pr.sent,pr.protocol.resetSessionsUnread(yr),pr.options.syncSessionUnread&&yr.length!==0){Pr.next=11;break}return gr(),Pr.abrupt("return");case 11:Sr=g(yr).call(yr,function(sr){return{scene:sr.scene==="p2p"?0:1,to:sr.to,timetag:sr.lastMsg.time}}),wr=dr(Sr,50),Mr=Ne(wr),Pr.prev=14,_r=n.mark(function sr(){var Ir;return n.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Ir=mr.value,Ar.next=3,new y(function(Cr,br){pr.sendCmd("markSessionAckBatch",{sessionAckTags:Ir},function(vr){vr?(gr(vr),br(vr)):Cr()})});case 3:case"end":return Ar.stop()}},sr)}),Mr.s();case 17:if((mr=Mr.n()).done){Pr.next=21;break}return Pr.delegateYield(_r(),"t0",19);case 19:Pr.next=17;break;case 21:Pr.next=26;break;case 23:Pr.prev=23,Pr.t1=Pr.catch(14),Mr.e(Pr.t1);case 26:return Pr.prev=26,Mr.f(),Pr.finish(26);case 29:gr(null);case 30:case"end":return Pr.stop()}},ur,this,[[14,23,26,29]])}));return function(ur){return nr.apply(this,arguments)}}(),ze.resetSuperTeamSessionsUnread=function(){var nr=de(n.mark(function ur(ar){var gr,pr,yr,Sr,wr,Mr,mr,_r,Nr=arguments;return n.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return gr=Nr.length>1&&Nr[1]!==void 0?Nr[1]:function(){},gr=or({instance:this,className:"NIMFn",funcName:"resetSuperTeamSessionsUnread",done:gr}),(pr=this).logger.info("resetSuperTeamSessionsUnread::",ar),Pr.next=6,cr.call(this,ar,"api::resetSuperTeamSessionsUnread");case 6:if(yr=Pr.sent,pr.protocol.resetSessionsUnread(yr),pr.options.syncSessionUnread&&yr.length!==0){Pr.next=11;break}return gr(),Pr.abrupt("return");case 11:Sr=g(yr).call(yr,function(sr){return{to:sr.to,timetag:sr.lastMsg.time}}),wr=dr(Sr,50),Mr=Ne(wr),Pr.prev=14,_r=n.mark(function sr(){var Ir;return n.wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Ir=mr.value,Ar.next=3,new y(function(Cr,br){pr.sendCmd("markSuperTeamSessionsAck",{sessionAckTags:Ir},function(vr){vr?(gr(vr),br(vr)):Cr()})});case 3:case"end":return Ar.stop()}},sr)}),Mr.s();case 17:if((mr=Mr.n()).done){Pr.next=21;break}return Pr.delegateYield(_r(),"t0",19);case 19:Pr.next=17;break;case 21:Pr.next=26;break;case 23:Pr.prev=23,Pr.t1=Pr.catch(14),Mr.e(Pr.t1);case 26:return Pr.prev=26,Mr.f(),Pr.finish(26);case 29:gr(null);case 30:case"end":return Pr.stop()}},ur,this,[[14,23,26,29]])}));return function(ur){return nr.apply(this,arguments)}}(),ze.resetSessionUnread=function(nr){var ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};ur=or({instance:this,className:"NIMFn",funcName:"resetSessionUnread",done:ur});var ar=this,gr=ar.options.resetUnreadMode!==!1,pr=function(){var Mr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;Mr?ur(Mr,nr):ur(null)};ar.logger.info("resetSessionUnread::use reset mode",gr);var yr=ar.protocol.getSessionInCache(nr),Sr=!yr&&this.db.enable?ar.db.getSession(nr):y.resolve(yr);function wr(Mr){if(!Mr.lastMsg&&!Mr.updateTime)return ar.logger.warn("api::resetSessionUnread: session.lastMsg undefined ".concat(nr)),pr();if(!Mr.scene||!Mr.to)return ar.logger.warn("api::resetSessionUnread: session.scene|to undefined ".concat(nr)),pr();var mr;if(mr=Mr.lastMsg?Mr.lastMsg.time:Mr.updateTime,Mr&&Mr.ack&&Mr.ack>=mr)return ar.logger.warn("api::resetSessionUnread: session ack not needs ".concat(nr)),pr();var _r={done:function(Pr){Pr?(ar.logger.error({message:Pr||"mark ack failed",callFunc:"resetSessionUnread"}),pr(Pr||"mark ack failed")):(gr||ar.protocol.resetSessionUnread(Mr),pr())}};if(ar.processCallback(_r),Mr.scene==="superTeam")ar.sendCmd("markSuperTeamSessionAck",{to:Mr.to,timetag:mr},_r.callback);else{var Nr={scene:Mr.scene==="p2p"?0:1,to:Mr.to,timetag:mr};ar.sendCmd("markSessionAck",Nr,_r.callback)}}Sr.then(function(Mr){return Mr?ar.options.syncSessionUnread?(gr&&ar.protocol.resetSessionUnread(Mr),void wr(Mr)):(ar.protocol.resetSessionUnread(Mr),pr()):(ar.logger.warn("api::resetSessionUnread: session undefined ".concat(nr)),pr())})},ze.resetCurrSession=function(){or({instance:this,className:"NIMFn",funcName:"resetCurrSession",hasCallback:!1}),this.protocol.setCurrSession("")},ze.insertLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"insertLocalSession",done:nr.done});var ur,ar;function gr(){nr.session=ar,nr.done(ur,nr)}jt.verifyOptions(nr,"scene to","scene::insertLocalSession"),jt.verifyParamValid("scene",nr.scene,this.message.validScenes,"scene::insertLocalSession"),this.protocol.insertLocalSession(nr).then(function(pr){ar=pr,gr()},function(pr){ur=pr,gr()})},ze.getLocalSessions=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getLocalSessions",done:nr.done});var ur=[];jt.verifyOptions(nr),kt(nr.limit)&&(nr.limit=100),jt.verifyParamType("limit",nr.limit,"number","scene::getLocalSessions"),Et(L(nr))?jt.verifyParamType("reverse",L(nr),"boolean","scene::getLocalSessions"):nr.reverse=!1,this.processCallback(nr);var ar=$(this.protocol.sessionSet),gr=0,pr=nr.lastSessionId;if(L(nr)){var yr,Sr=Ne(ar);try{for(Sr.s();!(yr=Sr.n()).done;){var wr=yr.value,Mr=wr.id;if(pr)Mr===pr&&(pr=void 0);else if(wr.lastMsg!==void 0&&!wr.isDeleted){if(++gr>nr.limit)break;ur.push(V({},wr))}}}catch(sr){Sr.e(sr)}finally{Sr.f()}}else{var mr,_r,Nr=Ne(ar);try{for(Nr.s();!(_r=Nr.n()).done;){var Pr=_r.value;if(pr===Pr.id)break;Pr.lastMsg===void 0||Pr.isDeleted||ur.push(Pr)}}catch(sr){Nr.e(sr)}finally{Nr.f()}ur=L(mr=z(ur).call(ur,-nr.limit)).call(mr)}this.logger.debug("getLocalSessions::sessions is",ur),ur=g(ur).call(ur,function(sr){return re(tr).call(tr,sr)}),nr.sessions=ur,delete nr.callback,nr.done(void 0,nr)},ze.getLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getLocalSession",done:nr.done});var ur=this,ar=ur.db,gr=null;if(jt.verifyOptions(nr,"sessionId","scene::getLocalSession"),jt.verifyParamType("sessionId",nr.sessionId,"string","scene::getLocalSession"),gr=ur.protocol.getSessionInCache(nr.sessionId),ur.logger.debug("getLocalSession::cache session is",gr),!gr&&ar.enable)return ur.processCallback(nr),void ar.getSession(nr.sessionId).then(function(pr){pr&&(gr=pr,ur.logger.debug("getLocalSession::db session is",gr)),nr.done(null,gr)}).catch(function(pr){nr.done(pr)});nr.done(null,re(tr).call(tr,gr))},ze.getLocalSessionsByMsgType=function(nr){var ur;(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getLocalSessionsByMsgType",done:nr.done});var ar=this.db,gr=nr.exclude,pr=[],yr=z(ur=lr.validTypes).call(ur,0);if(Et(gr)){if(typeof gr=="string")gr=[gr];else if(!oe(gr))return void jt.onParamInvalidType("exclude",["string","string array"],"","exclude::getLocalSessionsByMsgType");gr=le(gr).call(gr,function(Sr){return ue(yr).call(yr,Sr)>-1}),yr=le(yr).call(yr,function(Sr){return ue(gr).call(gr,Sr)===-1})}this.processCallback(nr),ar.enable?ar.getSessions().then(function(Sr){gr&&gr.length!==0?yr&&yr.length!==0?(i(Sr).call(Sr,function(wr,Mr){var mr,_r,Nr;wr.lastMsg&&ue(gr).call(gr,wr.lastMsg.type)>-1&&(mr=Mr,_r=wr.id,Nr=ar.getMsgs({sessionId:_r,limit:1,types:yr}).then(function(Pr){return Pr&&Pr[0]?Sr[mr].lastMsg=Pr[0]:Sr[mr].lastMsg=null,y.resolve()}),pr.push(Nr))}),y.all(pr).then(function(){nr.done(null,{exclude:gr,sessions:Sr})})):nr.done(null,{exclude:gr,sessions:g(Sr).call(Sr,function(wr){wr.lastMsg=null})}):nr.done(null,{exclude:gr,sessions:Sr})}):nr.done(null,{exclude:gr,sessions:[]})},ze.updateLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"updateLocalSession",done:nr.done});var ur,ar=this,gr=ar.db;jt.verifyOptions(nr,"id","scene::updateLocalSession"),ar.processCallback(nr);var pr=jt.filterObj(nr,"id localCustom");function yr(){nr.needNotify!==!1&&ar.protocol.onUpdateSession(pr),nr.session=pr,nr.done(ur,nr)}pr=ar.protocol.updateSessionInCache(nr),gr.enable&&pr?gr.updateSession(pr).then(function(Sr){pr=Sr,yr()},function(Sr){ur=Sr,yr()}):yr()},ze.deleteLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteLocalSession",done:nr.done});var ur,ar=this,gr=ar.db;jt.verifyOptions(nr,"id","session::deleteLocalSession"),ar.processCallback(nr);var pr=ar.protocol.getSessionInCache(nr.id);if(ar.protocol.deleteSessionInCache(nr.id,nr.isLogic),gr.enable?(nr.isLogic?gr.deleteSessionLogic(nr.id):gr.deleteSession(nr.id,pr)).then(function(){ar.logger.info("sessions::deleteSessionInDb::delete session done",nr.id),Sr()},function(wr){ur=wr,Sr()}):Sr(),nr.isDeleteRoaming){var yr=typeof nr.id=="string"?[nr.id]:nr.id;yr=g(yr).call(yr,function(wr){return wr.replace("-","|")}),this.sendCmd("deleteSessions",{sessions:yr},function(){})}function Sr(){nr.done(ur,nr)}},ze.deleteSession=function(nr,ur){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteSession",done:nr.done}),ur||this.logger.warn('this api will be abandon,please use "deleteLocalSession"'),jt.verifyOptions(nr,"scene to","session::deleteSession"),this.processCallback(nr),nr.sessions=[{scene:nr.scene,to:nr.to}],this.deleteSessions(nr)},ze.deleteRoamingMsgBySession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteRoamingMsgBySession",done:nr.done}),this.deleteSession(nr,!0)},ze.deleteSessions=function(nr){var ur,ar;(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteSessions",done:nr.done}),jt.verifyOptions(nr,"sessions","session::deleteSessions"),jt.verifyParamType("sessions",nr.sessions,"array","session::deleteSessions"),i(ur=nr.sessions).call(ur,function(gr,pr){jt.verifyOptions(gr,"scene to",!0,"sessions["+pr+"].","session::deleteSessions")}),this.processCallback(nr),this.sendCmd("deleteSessions",{sessions:g(ar=nr.sessions).call(ar,function(gr){return gr.scene+"|"+gr.to})},nr.callback)},ze.getServerSessions=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getServerSessions",done:nr.done}),Et(nr.minTimestamp)&&jt.verifyParamType("minTimestamp",nr.minTimestamp,"number","session::deleteSessions"),Et(nr.maxTimestamp)&&jt.verifyParamType("maxTimestamp",nr.maxTimestamp,"number","session::deleteSessions"),Et(nr.needLastMsg)&&(nr.needLastMsg=nr.needLastMsg===!1?0:1),Et(nr.limit)&&(jt.verifyParamType("limit",nr.limit,"number","session::deleteSessions"),jt.verifyParamMax("limit",nr.limit,100,"scene::getLocalSessions")),this.processCallback(nr),this.sendCmd("getServerSessions",{sessionReqTag:nr},nr.callback)},ze.getServerSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getServerSession",done:nr.done}),jt.verifyOptions(nr,"scene to","scene::getServerSession"),jt.verifyParamValid("scene",nr.scene,this.message.validScenes,"scene::getServerSession"),jt.verifyParamType("to",nr.to,"string","to::getServerSession");var ur=nr.scene+"|"+nr.to;nr.scene==="superTeam"&&(ur="super_team|"+nr.to),this.processCallback(nr),this.sendCmd("getServerSession",{session:{id:ur}},nr.callback)},ze.updateServerSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"updateServerSession",done:nr.done}),jt.verifyOptions(nr,"scene to","scene::updateServerSession"),jt.verifyParamValid("scene",nr.scene,this.message.validScenes,"scene::updateServerSession"),jt.verifyParamType("to",nr.to,"string","to::updateServerSession"),Et(nr.extra)&&jt.verifyParamType("extra",nr.extra,"string","extra::updateServerSession");var ur=nr.scene+"|"+nr.to;nr.scene==="superTeam"&&(ur="super_team|"+nr.to),this.processCallback(nr),this.sendCmd("updateServerSession",{session:{id:ur,ext:nr.extra||""}},nr.callback)},ze.deleteServerSessions=function(nr){var ur,ar=this;(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteServerSessions",done:nr.done}),jt.verifyOptions(nr,"sessions","scene::deleteServerSessions"),jt.verifyParamType("sessions",nr.sessions,"array","sessions::deleteServerSessions");var gr=[];i(ur=nr.sessions).call(ur,function(pr){jt.verifyParamValid("scene",pr.scene,ar.message.validScenes,"scene::deleteServerSessions"),jt.verifyParamType("to",pr.to,"string","to::deleteServerSessions");var yr=pr.scene+"|"+pr.to;pr.scene==="superTeam"&&(yr="super_team|"+pr.to),gr.push({id:yr})}),this.processCallback(nr),this.sendCmd("deleteServerSessions",{sessions:gr},nr.callback)},ze.updateSessionsWithMoreRoaming=function(nr){var ur;if((nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"updateSessionsWithMoreRoaming",done:nr.done}),jt.verifyOptions(nr,"msg","session::updateSessionsWithMoreRoaming"),jt.verifyCallback(nr,"done","session::updateSessionsWithMoreRoaming"),!this.db.enable)return nr.done(null,"db is disable");var ar={time:nr.msg.time,idServer:nr.msg.idServer,to:nr.msg.to,from:nr.msg.from};jt.verifyParamType("msg.time",nr.msg.time,"number","time::updateSessionsWithMoreRoaming"),jt.verifyParamType("msg.idServer",nr.msg.idServer,"string","idServer::updateSessionsWithMoreRoaming"),jt.verifyParamType("msg.from",nr.msg.from,"string","from::updateSessionsWithMoreRoaming"),jt.verifyParamType("msg.to",nr.msg.to,"string","to::updateSessionsWithMoreRoaming"),jt.verifyParamValid("scene",nr.msg.scene,this.message.validScenes,"scene::updateSessionsWithMoreRoaming");var gr=ar.to===this.account?ar.from:ar.to;ar.id=k(ur="".concat(nr.msg.scene,"-")).call(ur,gr),this.db.updateSessionsWithMoreRoaming(ar).then(function(pr){nr.done(null,pr)}).catch(function(pr){nr.done(pr)})},ze.deleteSessionsWithMoreRoaming=function(nr){if((nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteSessionsWithMoreRoaming",done:nr.done}),jt.verifyOptions(nr,"id","session::deleteSessionsWithMoreRoaming"),jt.verifyCallback(nr,"done","session::deleteSessionsWithMoreRoaming"),!this.db.enable)return nr.done(null,"db is disable");this.db.deleteSessionsWithMoreRoaming(nr.id).then(function(ur){nr.done(null,ur)}).catch(function(ur){nr.done(ur)})},ze.getSessionsWithMoreRoaming=function(nr){if((nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getSessionsWithMoreRoaming",done:nr.done}),jt.verifyCallback(nr,"done","session::getSessionsWithMoreRoaming"),!this.db.enable)return nr.done(null,"db is disable");this.db.getSessionsWithMoreRoaming(nr.id).then(function(ur){nr.done(null,ur)}).catch(function(ur){nr.done(ur)})}},function(t,r,e){var n=e(877),g=e(878),y=e(879),i=Math.ceil,k=Math.max;t.exports=function(L,$,V){$=(V?g(L,$,V):$===void 0)?1:k(y($),0);var z=L==null?0:L.length;if(!z||$<1)return[];for(var re=0,oe=0,le=Array(i(z/$));re<z;)le[oe++]=n(L,re,re+=$);return le}},function(t,r){t.exports=function(e,n,g){var y=-1,i=e.length;n<0&&(n=-n>i?0:i+n),(g=g>i?i:g)<0&&(g+=i),i=n>g?0:g-n>>>0,n>>>=0;for(var k=Array(i);++y<i;)k[y]=e[y+n];return k}},function(t,r,e){var n=e(204),g=e(205),y=e(306),i=e(94);t.exports=function(k,L,$){if(!i($))return!1;var V=typeof L;return!!(V=="number"?g($)&&y(L,$.length):V=="string"&&L in $)&&n($[L],k)}},function(t,r,e){var n=e(880);t.exports=function(g){var y=n(g),i=y%1;return y==y?i?y-i:y:0}},function(t,r,e){var n=e(881);t.exports=function(g){return g?(g=n(g))===1/0||g===-1/0?17976931348623157e292*(g<0?-1:1):g==g?g:0:g===0?g:0}},function(t,r,e){var n=e(882),g=e(94),y=e(884),i=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,L=/^0o[0-7]+$/i,$=parseInt;t.exports=function(V){if(typeof V=="number")return V;if(y(V))return NaN;if(g(V)){var z=typeof V.valueOf=="function"?V.valueOf():V;V=g(z)?z+"":z}if(typeof V!="string")return V===0?V:+V;V=n(V);var re=k.test(V);return re||L.test(V)?$(V.slice(2),re?2:8):i.test(V)?NaN:+V}},function(t,r,e){var n=e(883),g=/^\s+/;t.exports=function(y){return y&&y.slice(0,n(y)+1).replace(g,"")}},function(t,r){var e=/\s/;t.exports=function(n){for(var g=n.length;g--&&e.test(n.charAt(g)););return g}},function(t,r,e){var n=e(126),g=e(108);t.exports=function(y){return typeof y=="symbol"||g(y)&&n(y)=="[object Symbol]"}},function(t,r,e){var n=e(127),g=e(886),y=e(887),i=e(60),k=e(61),L=e(51),$=e(15),V=e(9),z=e(2),re=e(28),oe=e(121),le=e(11),ue=e(4),ie=e(6),ae=e(10),Fe=e(892),de=e(5),Ne=e(52),Ve=e(53),ze=e(54),jt=e(55),kt=e(42),Et=["callback","done"];function lr(mr,_r){var Nr=de(mr);if(Ne){var Pr=Ne(mr);_r&&(Pr=$(Pr).call(Pr,function(sr){return Ve(mr,sr).enumerable})),Nr.push.apply(Nr,Pr)}return Nr}function tr(mr){for(var _r=1;_r<arguments.length;_r++){var Nr,Pr,sr=arguments[_r]!=null?arguments[_r]:{};_r%2?z(Nr=lr(Object(sr),!0)).call(Nr,function(Ir){L(mr,Ir,sr[Ir])}):ze?jt(mr,ze(sr)):z(Pr=lr(Object(sr))).call(Pr,function(Ir){kt(mr,Ir,Ve(sr,Ir))})}return mr}var or=e(41).fn,dr=e(0),cr=dr.undef,nr=dr.notundef,ur=e(48),ar=e(162),gr=e(161),pr=e(35),yr=e(80),Sr=e(26).reportAPI,wr=e(12);or.sendG2Msg=function(mr){return(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"sendG2Msg",done:mr.done}),this.processCallback(mr),mr.msg=new this.message.G2Message(mr),this.sendMsg(mr)},or.beforeSendMsg=function(mr){var _r,Nr=this.protocol,Pr=mr.msg;switch(Pr.to===this.account&&(Pr.fromDeviceId=ur.deviceId),Pr.userUpdateTime=Nr.myInfo&&Nr.myInfo.updateTime,Pr.getScene()){case"p2p":_r="sendMsg";break;case"team":_r="sendTeamMsg";break;case"superTeam":_r="sendSuperTeamMsg"}$(mr)&&(_r="sendFilterMsg",Pr.filter=!0),mr.cmd=_r},or.afterSendMsg=function(mr){var _r=mr.rtnMsg;if(!_r||!_r.ignore){var Nr=this.protocol.getSessionInCache(_r.sessionId);mr.isLocal&&Nr&&Nr.lastMsg&&_r.time<Nr.lastMsg.time||this.protocol.onUpdateSession(ar.genSessionByMsg(_r))}},or.beforeForwardMsg=function(mr){dr.verifyOptions(mr,"msg scene to","msg::beforeForwardMsg"),mr.msg.scene=mr.scene,mr.msg.to=mr.to},or.markMsgRead=function(mr){var _r=this.protocol;!mr||this.db.enable||_r.options.autoMarkRead?this.logger.warn("api::markMsgRead: 不需要标记消息为已收到 (没有消息, 或者启用了数据库, 或者启用了自动标记已收到)"):_r.markMsgRead(mr,!0)},or.sendMsgReceipt=function(mr){if((mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"sendMsgReceipt",done:mr.done}),dr.verifyOptions(mr),this.processCallback(mr),mr.msg){dr.verifyOptions(mr,"msg","msg::sendMsgReceipt");var _r=mr.msg;dr.verifyOptions(_r,"target idClient time",!0,"msg.","msg::sendMsgReceipt"),this.protocol.shouldSendMsgReceipt(_r)?this.sendCmd("sendMsgReceipt",{msgReceipt:{to:_r.target,idClient:_r.idClient,time:_r.time}},mr.callback):mr.done()}else mr.done()},or.isMsgRemoteRead=function(mr){return Sr({instance:this,className:"NIMFn",funcName:"isMsgRemoteRead",hasCallback:!1}),this.protocol.isMsgRemoteRead(mr)},or.recallMsg=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"recallMsg",done:mr.done}),this.deleteMsg(mr,!0)},or.deleteMsg=function(mr,_r){var Nr;(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteMsg",done:mr.done}),_r||this.logger.warn("this api will be abandon,please use “recallMsg”"),dr.verifyOptions(mr,"msg","msg::deleteMsg");var Pr=mr.msg;if(Pr.scene!=="team"&&Pr.from!==this.account||Pr.status!=="success"||Pr.isLocal)return mr.done(pr.newParamError("只能删除自己发的, 并且发送成功的消息，且不能是本地消息",{callFunc:"msg::deleteMsg"}),mr);dr.verifyOptions(Pr,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsg"),dr.verifyParamValid("msg.scene",Pr.scene,this.message.validScenes,"msg::deleteMsg"),this.processPs(mr),this.processCallback(mr);var sr={deletedIdClient:Pr.idClient,deletedIdServer:Pr.idServer,time:Pr.time,from:Pr.from,to:Pr.to,opeAccount:Pr.from},Ir=Pr.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";sr.type="deleteMsg"+Pr.scene[0].toUpperCase()+V(Nr=Pr.scene).call(Nr,1);var Ar=["ps","apnsText","pushPayload","env","opeAccount","attach"];z(Ar).call(Ar,function(Cr){mr[Cr]&&(sr[Cr]=mr[Cr])}),sr=new gr(sr),this.sendCmd(Ir,{sysMsg:sr,msg:Pr},mr.callback)},or.deleteMsgSelf=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteMsgSelf",done:mr.done}),dr.verifyOptions(mr,"msg","msg::deleteMsgSelf");var _r=mr.msg;if(_r.scene==="superTeam")return mr.done(pr.newParamError("单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelf"}),mr);dr.verifyOptions(_r,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelf"),dr.verifyParamValid("msg.scene",_r.scene,this.message.validScenes,"msg::deleteMsgSelf"),this.processCallback(mr);var Nr={scene:_r.scene==="p2p"?1:2,from:_r.from,to:_r.to,time:_r.time,idClient:_r.idClient,idServer:_r.idServer,custom:mr.custom,type:_r.type};this.sendCmd("deleteMsgSelf",{deleteMsgSelfTag:Nr},mr.callback)},or.deleteMsgSelfBatch=function(mr){var _r,Nr,Pr,sr=this;if((mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteMsgSelfBatch",done:mr.done}),dr.verifyOptions(mr,"msgs","msg::deleteMsgSelfBatch"),(!re(mr.msgs)||mr.msgs.length===0||mr.msgs.length>100)&&dr.onParamError("msgs应该是数组且数据长度应大于0小于等于100","msg::deleteMsgSelfBatch"),oe(_r=mr.msgs).call(_r,function(Ar){return Ar.scene==="superTeam"}))return mr.done(pr.newParamError("消息列表中存在超大群消息，单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelfBatch"}),mr);z(Nr=mr.msgs).call(Nr,function(Ar){dr.verifyOptions(Ar,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelfBatch"),dr.verifyParamValid("msg.scene",Ar.scene,sr.message.validScenes,"msg::deleteMsgSelfBatch")}),this.processCallback(mr);var Ir=le(Pr=mr.msgs).call(Pr,function(Ar){var Cr;return{scene:Ar.scene==="p2p"?1:2,from:Ar.from,to:Ar.to,time:Ar.time,idClient:Ar.idClient,idServer:Ar.idServer,sessionId:Ar.sessionId||ue(Cr="".concat(Ar.scene,"-")).call(Cr,Ar.to),custom:mr.custom?typeof mr.custom=="string"?mr.custom:ie(mr.custom):void 0,type:Ar.type}});this.sendCmd("deleteMsgSelfBatch",{deleteMsgSelfTags:Ir},mr.callback)};var Mr={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};or.getHistoryMsgs=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"getHistoryMsgs",done:mr.done}),this.protocol.syncing&&this.logger.warn("Please call getHistoryMsgs after onsyncdone callback"),dr.verifyOptions(mr,"scene to","msg::getHistoryMsgs"),dr.verifyParamValid("scene",mr.scene,this.message.validScenes,"msg::getHistoryMsgs"),mr.beginTime===void 0&&(mr.beginTime=0);var _r,Nr=this.protocol.getSessionInCache(mr.scene+"-"+mr.to),Pr=Nr&&Nr.lastEmptyTime;if(Pr>mr.beginTime&&(mr.beginTime=Pr),dr.verifyParamType("beginTime",mr.beginTime,"number","msg::getHistoryMsgs"),mr.endTime===void 0&&(mr.endTime=0),dr.verifyParamType("endTime",mr.endTime,"number","msg::getHistoryMsgs"),mr.lastMsgId=mr.lastMsgId&&+mr.lastMsgId?mr.lastMsgId:"0",mr.limit===void 0&&(mr.limit=100),dr.verifyParamType("limit",mr.limit,"number","msg::getHistoryMsgs"),dr.verifyParamMax("limit",mr.limit,100,"msg::getHistoryMsgs"),nr(ae(mr))?dr.verifyParamType("reverse",ae(mr),"boolean","msg::getHistoryMsgs"):mr.reverse=!1,nr(mr.asc)?dr.verifyParamType("asc",mr.asc,"boolean","msg::getHistoryMsgs"):mr.asc=!1,cr(mr.msgTypes))mr.msgTypes=[];else if(re(mr.msgTypes)){var sr,Ir;mr.msgTypes=le(sr=mr.msgTypes).call(sr,function(Cr){return Mr[Cr]}),mr.msgTypes=$(Ir=mr.msgTypes).call(Ir,function(Cr){return typeof Cr=="number"})}else typeof Mr[mr.msgTypes]=="number"?mr.msgTypes=[Mr[mr.msgTypes]]:mr.msgTypes=[];switch(this.processCallback(mr),mr.cbaop=function(Cr,br){if(!Cr){var vr;mr.asc&&(br.msgs=ae(vr=br.msgs).call(vr)),br.msgs=yr.deduplication(br.msgs)}},mr.scene){case"p2p":_r="getHistoryMsgs";break;case"team":_r="getTeamHistoryMsgs";break;case"superTeam":_r="getSuperTeamHistoryMsgs"}var Ar={scene:mr.scene,to:mr.to,beginTime:mr.beginTime,endTime:mr.endTime,lastMsgId:mr.lastMsgId,limit:mr.limit,reverse:ae(mr),msgTypes:mr.msgTypes};this.sendCmd(_r,Ar,mr.callback)},or.searchHistoryMsgs=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"searchHistoryMsgs",done:mr.done}),dr.verifyOptions(mr,"scene to keyword","msg::searchHistoryMsgs"),dr.verifyParamValid("scene",mr.scene,this.message.validScenes,"msg::searchHistoryMsgs"),mr.beginTime===void 0&&(mr.beginTime=0);var _r,Nr=this.protocol.getSessionInCache(mr.scene+"-"+mr.to),Pr=Nr&&Nr.lastEmptyTime;switch(Pr>mr.beginTime&&(mr.beginTime=Pr),dr.verifyParamType("beginTime",mr.beginTime,"number","msg::searchHistoryMsgs"),mr.endTime===void 0&&(mr.endTime=0),dr.verifyParamType("endTime",mr.endTime,"number","msg::searchHistoryMsgs"),mr.limit===void 0&&(mr.limit=100),dr.verifyParamType("limit",mr.limit,"number","msg::searchHistoryMsgs"),dr.verifyParamMax("limit",mr.limit,100,"msg::searchHistoryMsgs"),nr(ae(mr))?dr.verifyParamType("reverse",ae(mr),"boolean","msg::searchHistoryMsgs"):mr.reverse=!1,nr(mr.asc)?dr.verifyParamType("asc",mr.asc,"boolean","msg::searchHistoryMsgs"):mr.asc=!1,this.processCallback(mr),mr.asc&&(mr.cbaop=function(Ir,Ar){var Cr;Ir||(Ar.msgs=ae(Cr=Ar.msgs).call(Cr))}),mr.scene){case"p2p":_r="searchHistoryMsgs";break;case"team":_r="searchTeamHistoryMsgs"}var sr=dr.filterObj(mr,"scene to beginTime endTime keyword limit reverse");this.sendCmd(_r,sr,mr.callback)},or.getLocalMsgs=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"getLocalMsgs",done:mr.done});var _r=this,Nr=_r.db,Pr=[];dr.verifyOptions(mr);var sr=!1;nr(mr.start)&&(sr=!0,dr.verifyParamType("start",mr.start,"number","msg::getLocalMsgs"));var Ir=!1;if(nr(mr.end)&&(Ir=!0,dr.verifyParamType("end",mr.end,"number","msg::getLocalMsgs")),sr&&Ir&&mr.end<=mr.start&&dr.onParamError("参数 end 必须晚于 start"),nr(mr.subTypes)&&dr.verifyParamType("subTypes",mr.subTypes,"array","msg::getLocalMsgs"),cr(mr.limit)&&(mr.limit=100),dr.verifyParamType("limit",mr.limit,"number","msg::getLocalMsgs"),dr.verifyParamMin("limit",mr.limit,1,"msg::getLocalMsgs"),_r.processCallback(mr),Nr.enable){var Ar=new Date().getTime();Nr.getMsgs(mr).then(function(br){var vr;Pr=br,_r.logger.info(ue(vr="api::getLocalMsgs: query db cost ".concat(new Date().getTime()-Ar," ms and the conditions is ")).call(vr,ie(mr))),Cr()},function(br){(br=br||{}).message=br.message||"msg::getLocalMsgs:db error",Cr()})}else Cr();function Cr(){var br=dr.simpleClone(mr);br.msgs=Pr,delete br.callback,delete br.done,mr.done(null,br)}},or.getLocalMsgsInUnread=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"getLocalMsgsInUnread",done:mr.done});var _r=this;dr.validate({sessionId:{type:"string",allowEmpty:!1}},mr),this.getLocalSession({sessionId:mr.sessionId,done:function(Nr,Pr){Nr?mr.done&&mr.done(Nr):Pr?(Pr.ack=Pr.ack||0,_r.getLocalMsgs(tr({sessionId:mr.sessionId,start:Pr.ack,limit:Fe,filterFunc:function(sr){return sr.flow==="in"&&sr.isUnreadable===!0},done:function(){}},mr))):mr.done&&mr.done(new Error("session ".concat(mr.sessionId," not exist")))}})},or.getLocalMsgByIdClient=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"getLocalMsgByIdClient",done:mr.done});var _r=this.db,Nr=null,Pr=null;function sr(){mr.msg=Pr,mr.done(Nr,mr)}dr.verifyOptions(mr,"idClient","msg::getLocalMsgByIdClient"),this.processCallback(mr),_r.enable?_r.getMsgByIdClient(mr.idClient).then(function(Ir){Ir&&(Pr=Ir),sr()},function(Ir){Nr=Ir,sr()}):(this.logger.warn("because db is false,error is null"),sr())},or.getLocalMsgsByIdClients=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"getLocalMsgsByIdClients",done:mr.done});var _r,Nr=this.db,Pr=[];function sr(){mr.msgs=Pr,mr.done(_r,mr)}dr.verifyOptions(mr,"idClients","msg::getLocalMsgByIdClients"),dr.verifyParamType("idClients",mr.idClients,"array","msg::getLocalMsgByIdClients"),this.processCallback(mr),Nr.enable?Nr.getMsgsByIdClients(mr.idClients).then(function(Ir){Pr=$(Ir).call(Ir,function(Ar){return!!Ar}),sr()},function(Ir){_r=Ir,sr()}):sr()},or.updateLocalMsg=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"updateLocalMsg",done:mr.done});var _r,Nr=this.db,Pr=null;if(dr.verifyOptions(mr,"idClient","msg::updateLocalMsg"),this.processCallback(mr),Nr.enable){var sr=dr.filterObj(mr,"idClient localCustom");Nr.updateMsg(sr).then(function(Ar){Pr=Ar,Ir()},function(Ar){_r=Ar,Ir()})}else Ir();function Ir(){mr.msg=Pr,mr.done(_r,mr)}},or.deleteLocalMsg=function(){var mr=k(i.mark(function _r(Nr){var Pr,sr,Ir,Ar;return i.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:return Ar=function(){Nr.done(sr,Nr)},(Nr=Nr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteLocalMsg",done:Nr.done}),Pr=this,dr.verifyOptions(Nr,"msg","msg::deleteLocalMsg"),Ir=Nr.msg,dr.verifyOptions(Ir,"idClient sessionId",!0,"msg.","msg::deleteLocalMsg"),Pr.processCallback(Nr),Cr.prev=8,Cr.next=11,Pr.protocol.deleteLocalMsg(Ir);case 11:Ar(),Cr.next=18;break;case 14:Cr.prev=14,Cr.t0=Cr.catch(8),sr=Cr.t0,Ar();case 18:case"end":return Cr.stop()}},_r,this,[[8,14]])}));return function(_r){return mr.apply(this,arguments)}}(),or.deleteLocalMsgsBySession=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgsBySession",done:mr.done});var _r,Nr=this,Pr=Nr.db;dr.verifyOptions(mr,"scene to","msg::deleteLocalMsgsBySession"),dr.verifyParamValid("scene",mr.scene,Nr.message.validScenes,"msg::deleteLocalMsgsBySession"),mr.sessionId=mr.scene+"-"+mr.to,mr.delLastMsg=mr.delLastMsg===!0,mr.isTag=mr.isTag===!0;var sr=new Date().getTime();function Ir(){mr.done(_r,mr)}Nr.processCallback(mr);var Ar={id:mr.sessionId};mr.delLastMsg&&(Ar.lastMsg=null),mr.isTag&&(Ar.lastEmptyTime=sr),Pr.enable?Pr.deleteMsgsBySessionId(mr).then(function(){mr.delLastMsg||mr.isTag?Pr.updateSession(Ar).then(function(Cr){Nr.protocol.onUpdateSession(Cr),mr.session=Cr,Ir()}):Ir()}).catch(function(Cr){_r=Cr,Ir()}):(this.logger.warn("because db is false,error is null"),Ir(),(mr.delLastMsg||mr.isTag)&&Nr.protocol.onUpdateSession(Ar))},or.deleteLocalMsgsByTime=function(mr){var _r=this.db;wr.isBrowser&&_r.enable&&(nr((mr=mr||{}).start)?dr.verifyParamType("start",mr.start,"number","msg::deleteLocalMsgsByTime"):mr.start=0,nr(mr.end)?dr.verifyParamType("end",mr.end,"number","msg::deleteLocalMsgsByTime"):mr.end=1/0,nr(mr.end)&&nr(mr.start)&&mr.end<=mr.start&&dr.onParamError("参数 end 必须大于 start"),this.processCallback(mr),this.protocol.deleteLocalMsgsByTime(mr).then(function(Nr){mr.done(null,Nr)},function(Nr){mr.done(Nr,null)}))},or.deleteLocalMsgs=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgs",done:mr.done});var _r;function Nr(){mr.done(_r,mr)}mr.updateSession=mr.updateSession!==!1,dr.verifyOptions(mr,"sessionId","msg::deleteLocalMsgsBySession"),nr(mr.start)&&dr.verifyParamType("start",mr.start,"number","msg::deleteLocalMsgs"),nr(mr.end)&&dr.verifyParamType("end",mr.end,"number","msg::deleteLocalMsgs"),nr(mr.end)&&nr(mr.start)&&mr.end<=mr.start&&dr.onParamError("参数 end 必须大于 start"),this.processCallback(mr),this.protocol.deleteLocalMsgs(mr).then(function(){Nr()},function(Pr){_r=Pr,Nr()})},or.deleteAllLocalMsgs=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"deleteAllLocalMsgs",done:mr.done});var _r,Nr=this.db;function Pr(){mr.done(_r,mr)}this.processCallback(mr),this.protocol.sessionSet={},Nr.enable?Nr.deleteAllMsgs().then(function(){Pr()},function(sr){_r=sr,Pr()}):(this.logger.warn("because db is false,error is null"),Pr())},or.saveMsgsToLocal=function(mr){var _r;(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"saveMsgsToLocal",done:mr.done}),this.db.enable||(this.logger.warn("because db is false,error is null"),mr.done(null,[])),dr.verifyOptions(mr,"msgs done","msg::saveMsgsToLocal"),dr.verifyParamType("msgs",mr.msgs,"Array","msg::saveMsgsToLocal");var Nr=le(_r=mr.msgs).call(_r,function(Pr){var sr=tr({},Pr);return sr.hasOwnProperty("needUpdateSession")||(sr.needUpdateSession=!0),sr});this.db.putMsg(Nr).then(function(Pr,sr){sr?mr.done(sr):mr.done(null,Pr)})},or.clearServerHistoryMsgs=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgs",done:mr.done}),dr.verifyOptions(mr,"account","msg::clearServerHistoryMsgs");var _r=mr.delRoam!==!1;this.processCallback(mr),this.sendCmd("clearServerHistoryMsgs",{clearMsgsParams:{account:mr.account,delRoam:_r?1:0}},mr.callback)},or.clearServerHistoryMsgsWithSync=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgsWithSync",done:mr.done}),dr.verifyOptions(mr,"scene to","msg::clearServerHistoryMsgsWithSync");var _r=mr.isDeleteRoam===void 0||mr.isDeleteRoam===!0,Nr={type:mr.scene==="team"?2:1,isDeleteRoam:_r?1:0,isSyncSelf:mr.isSyncSelf===!0?1:0};Nr[Nr.type===2?"toTid":"otherAccid"]=mr.to,mr.ext!==void 0&&(Nr.ext=mr.ext),this.processCallback(mr),this.sendCmd("clearServerHistoryMsgsWithSync",{clearMsgsParamsWithSync:Nr},mr.callback)},or.msgFtsInServer=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"msgFtsInServer",done:mr.done}),this.processCallback(mr);var _r=mr,Nr=y({},(g(_r),_r));dr.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",min:0,required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},Nr,"msg::msgFtsInServer"),nr(Nr.toTime)&&nr(Nr.fromTime)&&Nr.toTime<Nr.fromTime&&dr.onParamError("Options error: toTime should be greater than fromTime");var Pr,sr={ASC:1,DESC:2};Nr.order&&sr[Nr.order]&&(Nr.order=sr[Nr.order]),Nr.msgTypeList&&(Nr.msgTypeList=le(Pr=Nr.msgTypeList).call(Pr,function(Ar){return Mr[Ar]}));var Ir=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];z(Ir).call(Ir,function(Ar){re(Nr[Ar])&&(Nr[Ar]=Nr[Ar].join(","))}),this.sendCmd("msgFtsInServer",{msgFullSearchRequestTag:Nr},mr.callback)},or.msgFtsInServerByTiming=function(mr){(mr=mr||{}).done=Sr({instance:this,className:"NIMFn",funcName:"msgFtsInServerByTiming",done:mr.done}),this.processCallback(mr);var _r=mr,Nr=(_r.callback,_r.done,n(_r,Et));dr.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},Nr,"msg::msgFtsInServerByTimeSort"),nr(Nr.toTime)&&nr(Nr.fromTime)&&Nr.toTime<Nr.fromTime&&dr.onParamError("Options error: toTime should be greater than fromTime");var Pr,sr={ASC:1,DESC:2};Nr.msgLimit===void 0&&(Nr.msgLimit=20),Nr.order&&sr[Nr.order]&&(Nr.order=sr[Nr.order]),Nr.msgTypeList&&(Nr.msgTypeList=le(Pr=Nr.msgTypeList).call(Pr,function(Ar){return Mr[Ar]}));var Ir=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];z(Ir).call(Ir,function(Ar){re(Nr[Ar])&&(Nr[Ar]=Nr[Ar].join(","))}),this.sendCmd("msgFtsInServerByTiming",{msgTimingFullSearchRequestTag:Nr},mr.callback)}},function(t,r){t.exports=function(e){if(e==null)throw new TypeError("Cannot destructure "+e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(888),g=e(159);function y(){var i;return t.exports=y=n?g(i=n).call(i):function(k){for(var L=1;L<arguments.length;L++){var $=arguments[L];for(var V in $)Object.prototype.hasOwnProperty.call($,V)&&(k[V]=$[V])}return k},t.exports.__esModule=!0,t.exports.default=t.exports,y.apply(this,arguments)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(889)},function(t,r,e){t.exports=e(890)},function(t,r,e){var n=e(891);t.exports=n},function(t,r,e){var n=e(309);t.exports=n},function(t,r,e){t.exports=e(893)},function(t,r,e){var n=e(894);t.exports=n},function(t,r,e){e(895),t.exports=9007199254740991},function(t,r,e){e(1)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,r,e){var n=e(10),g=e(28),y=e(9),i=e(2),k=e(6),L=e(5),$=e(15),V=e(41).fn,z=e(0),re=e(784),oe=e(786),le=(e(80),z.notundef),ue=e(26).reportAPI;function ie(ae,Fe,de,Ne){de=de||"",z.verifyParamType(de+"from",ae.from,"string",Fe),z.verifyParamType(de+"to",ae.to,"string",Fe),z.verifyParamType(de+"idServer",ae.idServer,"string",Fe),z.verifyParamType(de+"time",ae.time,"number",Fe),z.verifyParamValid(de+"scene",ae.scene,this.message.validScenes,Fe),Ne||z.verifyParamType(de+"idClient",ae.idClient,"string",Fe)}V.getThreadMsgs=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getThreadMsgs",done:ae.done}),z.verifyCallback(ae,"done","msg::getThreadMsgs"),z.verifyOptions(ae,"scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime","msg::getThreadMsgs"),z.verifyParamType("threadMsgFromAccount",ae.threadMsgFromAccount,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgToAccount",ae.threadMsgToAccount,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgIdServer",ae.threadMsgIdServer,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgTime",ae.threadMsgTime,"number","msg::getThreadMsgs"),z.verifyParamValid("scene",ae.scene,this.message.validScenes,"msg::getThreadMsgs"),this.processCallback(ae);var Fe={scene:this.message.sceneMap[ae.scene],from:ae.threadMsgFromAccount,to:ae.threadMsgToAccount,time:ae.threadMsgTime,idServer:ae.threadMsgIdServer},de={limit:ae.limit<100?ae.limit:100,beginTime:typeof ae.beginTime=="number"?ae.beginTime:0,reverse:n(ae)===!0?1:0};typeof ae.endTime=="number"&&(de.endTime=ae.endTime,de.endTime<=de.beginTime&&z.onParamError("endTime应该大于beginTime","msg::getThreadMsgs")),ae.lastMsgId&&(de.lastMsgId=ae.lastMsgId),this.sendCmd("getThreadMsgs",{msg:Fe,threadMsgReq:de,NOTSTORE:"msg threadMsgReq"},ae.callback)},V.getMsgsByIdServer=function(ae){var Fe,de,Ne=this;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getMsgsByIdServer",done:ae.done});var Ve=this,ze="msg::getMsgsByIdServer";z.verifyCallback(ae,"done",ze),(!g(ae.reqMsgs)||ae.reqMsgs.length===0||ae.reqMsgs.length>100)&&z.onParamError("reqMsgs应该是数组且数据长度应大于0小于等于100",ze),ae.reqMsgs=y(Fe=ae.reqMsgs).call(Fe,0),i(de=ae.reqMsgs).call(de,function(jt,kt){ie.call(Ve,jt,ze,"reqMsgs[".concat(kt,"]."),!0),jt.scene=Ne.message.sceneMap[jt.scene]}),this.processCallback(ae),this.sendCmd("getMsgsByIdServer",{reqMsgs:ae.reqMsgs},ae.callback)},V.addQuickComment=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addQuickComment",done:ae.done}),z.verifyOptions(ae,"msg body","msg::addQuickComment"),ie.call(this,ae.msg,"msg::addQuickComment");var Fe=new re(ae,"msg::addQuickComment");Fe.from=this.account;var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("addQuickComment",{msg:de,comment:Fe},ae.callback)},V.deleteQuickComment=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteQuickComment",done:ae.done}),z.verifyOptions(ae,"msg body","msg::deleteQuickComment"),ie.call(this,ae.msg,"msg::deleteQuickComment");var Fe=new re(ae,"msg::addQuickComment");Fe.from=this.account;var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("deleteQuickComment",{msg:de,comment:Fe},ae.callback)},V.getQuickComments=function(ae){var Fe=this;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getQuickComments",done:ae.done});var de="msg::getQuickComments",Ne=this,Ve={},ze={};z.verifyOptions(ae,"msgs","msg::getQuickComments"),(!g(ae.msgs)||ae.msgs.length===0||ae.msgs.length>20)&&z.onParamError("msgs应该是数组且数据长度应大于0小于等于20",de);var jt=[];try{jt=JSON.parse(k(ae.msgs))}catch{z.onParamError("msgs 不是合法的对象",de)}i(jt).call(jt,function(kt,Et){ie.call(Ne,kt,de,"msgs[".concat(Et,"]."),!0),kt.scene=Fe.message.sceneMap[kt.scene],Ve[kt.idClient]=null,ze[kt.idClient]=Et}),this.processCallback(ae),this.getLocalMsgsByIdClients({idClients:L(Ve),done:function(kt,Et){var lr,tr=Ne.protocol.timetags.sync;!kt&&Et.msgs&&Et.msgs.length&&tr&&(i(lr=Et.msgs).call(lr,function(or){Ve[or.idClient]=or}),jt=$(jt).call(jt,function(or){var dr=Ve[or.idClient];return!dr||(dr.commentTimetag&&(or.timestamp=dr.commentTimetag),!(dr.commentTimetag>tr))})),Ne.sendCmd("getQuickComments",{commentReq:jt,idMap:Ve,indexMap:ze},ae.callback)}})},V.addCollect=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addCollect",done:ae.done}),z.verifyOptions(ae,"type data","msg::addCollect");var Fe=new oe(ae,"msg::addCollect");this.processCallback(ae),this.sendCmd("addCollect",{collect:Fe},ae.callback)},V.deleteCollects=function(ae){var Fe;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteCollects",done:ae.done}),z.verifyOptions(ae,"collectList","msg::deleteCollects"),(!g(ae.collectList)||ae.collectList.length===0||ae.collectList.length>100)&&z.onParamError("collectList应该是数组且数据长度应大于0小于等于100","msg::deleteCollects"),i(Fe=ae.collectList).call(Fe,function(de,Ne){z.verifyParamType("collectList[".concat(Ne,"].id"),de.id,"string","msg::deleteCollects"),z.verifyParamType("collectList[".concat(Ne,"].createTime"),de.createTime,"number","msg::deleteCollects")}),this.processCallback(ae),this.sendCmd("deleteCollects",{collectList:ae.collectList},ae.callback)},V.updateCollect=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateCollect",done:ae.done}),z.verifyOptions(ae,"collect","msg::updateCollect"),z.verifyParamType("collect.id",ae.collect.id,"string","msg::updateCollect"),z.verifyParamType("collect.createTime",ae.collect.createTime,"number","msg::updateCollect"),this.processCallback(ae),this.sendCmd("updateCollect",{collect:ae.collect},ae.callback)},V.getCollects=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getCollects",done:ae.done}),z.verifyCallback(ae,"done","msg::getCollects");var Fe={},de=["type","beginTime","endTime","limit"];i(de).call(de,function(Ne){le(ae[Ne])&&(z.verifyParamType(Ne,ae[Ne],"number","msg::getCollects"),Fe[Ne]=ae[Ne])}),ae.limit>100&&z.onParamError("limit不能大于100","msg::getCollects"),ae.beginTime>ae.endTime&&z.onParamError("beginTime不能大于endTime","msg::getCollects"),le(ae.lastId)&&(z.verifyParamType("lastId",ae.lastId,"string","msg::getCollects"),Fe.lastMsgId=ae.lastId),le(n(ae))&&(Fe.reverse=n(ae)===!0?1:0),this.processCallback(ae),this.sendCmd("getCollects",{collectQuery:Fe,NOTSTORE:"collectQuery"},ae.callback)},V.addStickTopSession=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::addStickTopSession");var Fe=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Fe[0],this.message.validScenes,"msg::addStickTopSession"),z.verifyParamType("id的后半部分",Fe[1],"string","msg::addStickTopSession"),Fe[0]==="superTeam"&&(Fe[0]="super_team");var de={id:Fe=Fe.join("|")};ae.topCustom?(z.verifyParamType("topCustom",ae.topCustom,"string","msg::addStickTopSession"),de.topCustom=ae.topCustom):de.topCustom="",this.processCallback(ae),this.sendCmd("addStickTopSession",{stickTopSession:de},ae.callback)},V.deleteStickTopSession=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::deleteStickTopSession");var Fe=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Fe[0],this.message.validScenes,"msg::deleteStickTopSession"),z.verifyParamType("id的后半部分",Fe[1],"string","msg::deleteStickTopSession"),Fe[0]==="superTeam"&&(Fe[0]="super_team"),Fe=Fe.join("|"),this.processCallback(ae),this.sendCmd("deleteStickTopSession",{stickTopSession:{id:Fe}},ae.callback)},V.updateStickTopSession=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::updateStickTopSession");var Fe=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Fe[0],this.message.validScenes,"msg::updateStickTopSession"),z.verifyParamType("id的后半部分",Fe[1],"string","msg::updateStickTopSession"),Fe[0]==="superTeam"&&(Fe[0]="super_team");var de={id:Fe=Fe.join("|")};ae.topCustom?(z.verifyParamType("topCustom",ae.topCustom,"string","msg::updateStickTopSession"),de.topCustom=ae.topCustom):de.topCustom="",this.processCallback(ae),this.sendCmd("updateStickTopSession",{stickTopSession:de},ae.callback)},V.getStickTopSessions=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getStickTopSessions",done:ae.done}),z.verifyOptions(ae,"done","msg::getStickTopSessions"),this.processCallback(ae);var Fe,de=this.protocol.sessionSet,Ne=[];for(var Ve in de)(Fe=this.protocol.getSessionInCache(Ve,ae.findDelete))&&Fe.isTop&&Ne.push(de[Ve]);ae.callback(null,Ne)},V.addMsgPin=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::addMsgPin"),ie.call(this,ae.msg,"msg::addMsgPin");var Fe={pinFrom:this.account};le(ae.pinCustom)&&(z.verifyParamType("pinCustom",ae.pinCustom,"string","msg::addMsgPin"),Fe.pinCustom=ae.pinCustom);var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("addMsgPin",{msg:de,pinTag:Fe},ae.callback)},V.updateMsgPin=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::updateMsgPin"),ie.call(this,ae.msg,"msg::updateMsgPin");var Fe={pinFrom:this.account};le(ae.pinCustom)&&(z.verifyParamType("pinCustom",ae.pinCustom,"string","msg::updateMsgPin"),Fe.pinCustom=ae.pinCustom);var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("updateMsgPin",{msg:de,pinTag:Fe},ae.callback)},V.deleteMsgPin=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::deleteMsgPin"),ie.call(this,ae.msg,"msg::deleteMsgPin");var Fe={pinFrom:this.account},de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("deleteMsgPin",{msg:de,pinTag:Fe},ae.callback)},V.getMsgPins=function(ae){var Fe=this;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getMsgPins",done:ae.done}),z.verifyOptions(ae,"id","msg::getMsgPins");var de=this.db,Ne=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Ne[0],this.message.validScenes,"msg::getMsgPins"),z.verifyParamType("id的后半部分",Ne[1],"string","msg::getMsgPins"),Ne[0]==="superTeam"&&(Ne[0]="super_team");var Ve={sessionId:Ne=Ne.join("|"),timetag:0};if(this.processCallback(ae),de.enable){var ze=this.protocol.timetags.sync;de.getTimetag("pin-"+ae.id).then(function(kt){kt>ze?de.getMsgPins(ae.id).then(function(Et){return ae.callback(null,{pins:Et||[]})}).catch(function(Et){return ae.callback(Et)}):(Ve.timetag=kt,jt.call(Fe))})}else jt.call(this);function jt(){this.sendCmd("getMsgPins",{msgPinReq:Ve,id:ae.id,NOTSTORE:"msgPinReq"},ae.callback)}}},function(t,r,e){var n=e(3),g=e(15),y=e(2),i=e(10),k=e(41).fn,L=e(0),$=L.undef,V=L.notundef,z=e(161),re=e(26).reportAPI;k.markSysMsgRead=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"markSysMsgRead",done:oe.done});var le,ue=this.db,ie=n.resolve(),ae=this.protocol;L.verifyOptions(oe,"sysMsgs","sysmsg::markSysMsgRead");var Fe=oe.sysMsgs;function de(){oe.done(le,oe)}L.isArray(Fe)||(Fe=[Fe]),ue.enable?ie=ue.markSysMsgRead(Fe).then(function(Ne){Fe=Ne,ae.onUpdateSysMsg(Ne)}):(Fe=g(Fe).call(Fe,function(Ne){return!Ne.read})).length&&(ae.options.autoMarkRead||ae.markSysMsgRead(Fe,!0),y(Fe).call(Fe,function(Ne){Ne.read=!0}),ae.onUpdateSysMsg(Fe)),ie.then(function(){return ae.reduceSysMsgUnread(Fe)}).then(de,function(Ne){le=Ne,de()})},k.sendCustomSysMsg=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"sendCustomSysMsg",done:oe.done}),L.verifyOptions(oe,"scene to content","sysmsg::sendCustomSysMsg"),L.verifyParamValid("scene",oe.scene,this.message.validScenes,"sysmsg::sendCustomSysMsg"),this.processCallback(oe);var le="sendCustomSysMsg";return oe.scene==="p2p"?oe.type="customP2p":oe.scene==="superTeam"?(oe.type="customSuperTeam",le="sendSuperTeamCustomSysMsg"):oe.type="customTeam",oe.sysMsg=new z(oe),g(oe)&&(le="sendFilterCustomSysMsg"),this.sendCmd(le,{sysMsg:oe.sysMsg,single:!0},oe.callback),this.formatReturnSysMsg(oe.sysMsg)},k.formatReturnSysMsg=function(oe){return oe=L.copy(oe),this.protocol.completeSysMsg(oe),oe.status="sending",oe=i(z).call(z,oe)},k.getLocalSysMsgs=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getLocalSysMsgs",done:oe.done});var le,ue=this.db,ie=[];function ae(){oe.sysMsgs=ie,oe.done(le,oe)}L.verifyOptions(oe),oe.category&&L.verifyParamValid("category",oe.category,z.validCategories,"sysmsg::getLocalSysMsgs"),oe.type&&L.verifyParamValid("type",oe.type,z.validTypes,"sysmsg::getLocalSysMsgs"),$(oe.limit)&&(oe.limit=100),L.verifyParamType("limit",oe.limit,"number","sysmsg::getLocalSysMsgs"),L.verifyParamMax("limit",oe.limit,100,"sysmsg::getLocalSysMsgs"),V(i(oe))?L.verifyParamType("reverse",i(oe),"boolean","sysmsg::getLocalSysMsgs"):oe.reverse=!1,this.processCallback(oe),ue.enable?ue.getSysMsgs(oe).then(function(Fe){ie=Fe,ae()},function(Fe){le=Fe,ae()}):ae()},k.updateLocalSysMsg=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"updateLocalSysMsg",done:oe.done});var le,ue=this.db,ie=null;if(L.verifyOptions(oe,"idServer","sysmsg::updateLocalSysMsg"),this.processCallback(oe),ue.enable){var ae=L.filterObj(oe,"idServer state localCustom");ue.updateSysMsg(ae).then(function(de){ie=de,Fe()},function(de){le=de,Fe()})}else Fe();function Fe(){oe.sysMsg=ie,oe.done(le,oe)}},k.deleteLocalSysMsg=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"deleteLocalSysMsg",done:oe.done});var le,ue=this.db;function ie(){oe.done(le,oe)}L.verifyOptions(oe,"idServer","sysmsg::deleteLocalSysMsg"),this.processCallback(oe),ue.enable?ue.deleteSysMsg(oe.idServer).then(function(){ie()},function(ae){le=ae,ie()}):ie()},k.deleteAllLocalSysMsgs=function(oe){var le;(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"deleteAllLocalSysMsgs",done:oe.done});var ue=this,ie=ue.db;function ae(){ue.protocol.onUpdateSysMsgUnread({}),oe.done(le,oe)}ue.processCallback(oe),ie.enable?ie.deleteAllSysMsgs().then(function(){ae()},function(Fe){le=Fe,ae()}):ae()}},function(t,r,e){var n=e(41).fn,g=e(0),y=e(12),i=e(26).reportAPI;n.getChatroomAddress=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"getChatroomAddress",done:k.done}),g.verifyOptions(k,"chatroomId","chatroom::getChatroomAddress"),k.isWeixinApp=y.isWeixinApp,k.type=y.ipVersion,this.processCallback(k),this.sendCmd("getChatroomAddress",k)}},function(t,r){},function(t,r){},function(t,r,e){var n=e(41).fn,g=e(0),y=e(26).reportAPI;n.audioToText=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"audioToText",done:i.done}),g.verifyOptions(i,"url","audio::audioToText"),i.audioToText=g.filterObj(i,"url"),this.processCallback(i),this.sendCmd("audioToText",i)}},function(t,r,e){var n=e(41).fn;n.clearDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.clear().then(i,i):i()},n.removeDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.destroy().then(i,i):i()},n.closeDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.close().then(i,i):i()}},function(t,r,e){var n=e(41).fn,g=e(317),y=e(0),i=y.undef,k=e(26).reportAPI;n.getPushNotificationMultiportConfig=function(){return k({instance:this,className:"NIMFn",funcName:"getPushNotificationMultiportConfig",hasCallback:!1}),this.protocol.getPushNotificationMultiportConfig()},n.updatePushNotificationMultiportConfig=function(L){(L=L||{}).done=k({instance:this,className:"NIMFn",funcName:"updatePushNotificationMultiportConfig",done:L.done}),y.verifyOptions(L),i(L.shouldPushNotificationWhenPCOnline)&&(L.shouldPushNotificationWhenPCOnline=!0),L.donnop=new g(L),this.processCallback(L),this.sendCmd("updateDonnop",L)}},function(t,r,e){var n=e(2),g=e(3),y=e(4),i=e(24),k=e(41).fn,L=e(0),$=e(905),V=e(906),z=e(26).reportAPI;function re(oe){return i(oe)==="object"&&(oe.msgEventSubscribes?oe=oe.msgEventSubscribes:oe.msgEventSubscribe?oe=oe.msgEventSubscribe:oe.accounts?oe=oe.accounts:oe.msgEvent&&(oe=oe.msgEvent).time&&(oe.time=+oe.time),oe.sync===1?oe.sync=!0:oe.sync===0&&(oe.sync=!1)),oe}k.batchSendEventsCmds=function(oe,le,ue){var ie=this,ae=L.dropArrayDuplicates(le.accounts);ae=L.reshape2d(ae,100);var Fe=[];n(ae).call(ae,function(de){Fe.push(new g(function(Ne,Ve){var ze=L.simpleClone(le);ze.accounts=de,ie.sendCmdWithResp(oe,ze,function(jt,kt){jt?Ve(jt):Ne(re(kt))})}))}),g.all(Fe).then(function(de){var Ne=null;if(de.length>0)if(de[0].msgEventSubscribe){var Ve=de[0].msgEventSubscribe;Ve=re(Ve);var ze=[];n(de).call(de,function(jt){ze=y(ze).call(ze,jt.accounts)}),Ne={accounts:ze,msgEventSubscribe:Ve}}else Ne=[],n(de).call(de,function(jt){Ne=y(Ne).call(Ne,jt)});ue(null,Ne)},function(de){ue(de,null)})},k.publishEvent=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"publishEvent",done:oe.done});var le=new $(oe);le=le.assembleEvent(),this.processCallback(oe),this.sendCmdWithResp("publishEvent",{msgEvent:le},function(ue,ie){ue||(ie=re(ie)),oe.callback(ue,ie)})},k.subscribeEvent=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"subscribeEvent",done:oe.done}),L.verifyOptions(oe,"accounts","event::subscribeEvent");var le=new V(oe);L.verifyParamType("accounts",oe.accounts,"array","event::subscribeEvent"),this.processCallback(oe),le=le.assembleEvent(),this.batchSendEventsCmds("subscribeEvent",{msgEventSubscribe:le,accounts:oe.accounts},function(ue,ie){!ue&&ie&&(ie={failedAccounts:ie}),oe.callback(ue,ie)})},k.unSubscribeEventsByAccounts=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByAccounts",done:oe.done}),L.verifyOptions(oe,"accounts","event::unSubscribeEventsByAccounts"),L.verifyParamType("accounts",oe.accounts,"array","event::unSubscribeEventsByAccounts");var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.batchSendEventsCmds("unSubscribeEventsByAccounts",{msgEventSubscribe:le,accounts:oe.accounts},function(ue,ie){!ue&&ie&&(ie={failedAccounts:ie}),oe.callback(ue,ie)})},k.unSubscribeEventsByType=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByType",done:oe.done});var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.sendCmdWithResp("unSubscribeEventsByType",{msgEventSubscribe:le},function(ue,ie){oe.callback(ue,ie)})},k.querySubscribeEventsByAccounts=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByAccounts",done:oe.done}),L.verifyOptions(oe,"accounts","event::querySubscribeEventsByAccounts"),L.verifyParamType("accounts",oe.accounts,"array","event::querySubscribeEventsByAccounts");var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.batchSendEventsCmds("querySubscribeEventsByAccounts",{msgEventSubscribe:le,accounts:oe.accounts},function(ue,ie){!ue&&ie&&(ie={msgEventSubscribes:ie}),oe.callback(ue,ie)})},k.querySubscribeEventsByType=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByType",done:oe.done});var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.sendCmdWithResp("querySubscribeEventsByType",{msgEventSubscribe:le},function(ue,ie){ue||(ie={msgEventSubscribes:re(ie)}),oe.callback(ue,ie)})}},function(t,r,e){var n=e(8),g=e(0),y=g.notundef,i=e(35);function k(L){if(g.verifyOptions(L,"type value","event::MsgEvent"),g.verifyParamType("type",L.type,"number","event::MsgEvent"),g.verifyParamType("value",L.value,"number","event::MsgEvent"),this.type=L.type,this.value=L.value,this.idClient=g.guid(),y(L.custom)&&(this.custom=""+L.custom),this.validTime=L.validTime||604800,g.verifyParamType("validTime",this.validTime,"number","event::MsgEvent"),g.verifyParamMin("validTime",this.validTime,60,"event::MsgEvent"),g.verifyParamMax("validTime",this.validTime,604800,"event::MsgEvent"),y(L.broadcastType)){var $;if(g.verifyParamType("broadcastType",L.broadcastType,"number","event::MsgEvent"),n($=[1,2]).call($,L.broadcastType)<0)throw new i('参数错误"broadcastType":只能为1或2');this.broadcastType=L.broadcastType}else this.broadcastType=2;y(L.sync)?(g.verifyParamType("sync",L.sync,"boolean","event::MsgEvent"),this.sync=L.sync):this.sync=!1}k.prototype.assembleEvent=function(){return{type:this.type,value:this.value,idClient:this.idClient,custom:this.custom||"",validTime:this.validTime,broadcastType:this.broadcastType,sync:this.sync===!0?1:0}},t.exports=k},function(t,r,e){var n=e(0),g=n.notundef;function y(i){n.verifyOptions(i,"type","event::MsgEventSubscribe"),n.verifyParamType("type",i.type,"number","event::MsgEventSubscribe"),n.findObjIndexInArray([1,2,3],i.type)<0&&n.verifyParamMin("type",i.type,1e5,"event::MsgEventSubscribe"),this.type=i.type,g(i.subscribeTime)?(n.verifyParamType("subscribeTime",i.subscribeTime,"number","event::MsgEventSubscribe"),n.verifyParamMin("subscribeTime",i.subscribeTime,60,"event::MsgEventSubscribe"),n.verifyParamMax("subscribeTime",i.subscribeTime,2592e3,"event::MsgEventSubscribe"),this.subscribeTime=i.subscribeTime):this.subscribeTime=2592e3,g(i.sync)?(n.verifyParamType("sync",i.sync,"boolean","event::MsgEventSubscribe"),this.sync=i.sync):this.sync=!0}y.prototype.assembleEvent=function(){return{type:this.type,subscribeTime:this.subscribeTime,sync:this.sync===!0?1:0}},t.exports=y},function(t,r,e){var n=e(34),g=e(41).fn,y=e(0),i=e(26).reportAPI;g.httpRequestProxy=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"httpRequestProxy",done:k.done}),y.verifyOptions(k,"path","misc::httpRequestProxy");var L=n({},k);delete L.done,this.processCallback(k),this.sendCmd("httpProxy",{proxyTag:L},k.callback)}},function(t,r,e){var n=e(41).fn,g=e(12),y=e(26).reportAPI;n.getQChatAddress=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"getQChatAddress",done:i.done}),this.processCallback(i),this.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:g.ipVersion}},i.done)}},function(t,r,e){e(305);var n=e(201);e(318)(n),t.exports=n},function(t,r,e){var n=e(321),g=e(9),y=e(3),i=e(56),k=e(4),L=e(22),$=e(202).fn,V=e(12),z=e(165).V2NIMConnectStatus;$.connect=function(){V.isBrowser&&this.reporter.restore(),n($).connect.call(this)},$.refreshSocketUrl=function(){var re;return this.socketUrlsBackup=this.socketUrlsBackup||[],this.socketUrls=g(re=this.socketUrlsBackup).call(re,0),this.logger.info("link::refreshSocketUrl"),this.statusProtector.processEvent("auth/loginLifeCycleAddressing"),y.resolve(this.socketUrls)},$.onHandshakeFailed=function(re,oe){var le;this.reporter.report("chatroomLogin",{binary_websocket:this.useBinaryWebSocket(),accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:oe,rt:i()-re,result:408,failReason:"ws_handshake_failed",time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(le="link::onHandshakeFailed: shandshake failed, startTime: ".concat(re,", targetUrl: ")).call(le,oe))},$.onConnectFailed=function(re,oe,le){var ue,ie,ae=typeof re=="string"?"connect_failed:".concat(re):"connect_failed";this.reporter.report("chatroomLogin",{binary_websocket:this.useBinaryWebSocket(),accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:le,rt:i()-oe,result:408,failReason:"ws_".concat(ae),time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(ue=k(ie="link::onConnectFailed: connect failed due to ".concat(re,", startTime: ")).call(ie,oe,", targetUrl: ")).call(ue,le))},$.onSocketError=function(re,oe,le){var ue,ie,ae=typeof re=="string"?"socket.io error:".concat(re):"socket.io error";this.reporter.report("chatroomLogin",{binary_websocket:this.useBinaryWebSocket(),accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:le,rt:i()-oe,result:408,failReason:"ws_".concat(ae),time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(ue=k(ie="link::onSocketError: due to ".concat(re,", startTime: ")).call(ie,oe,", targetUrl: ")).call(ue,le))},$.notifyDisconnect=function(re){n($).notifyDisconnect.call(this,re)},$.disconnect=function(){var re=this,oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void L(function(){n($).disconnect.call(re,oe)},0);this.connecting?this.logger.warn("ChatroomProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==z.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("ChatroomProtocolFn api disconnect:: has tried to disconnect actively"):this.logger.warn("ChatroomProtocolFn api disconnect:: other logic entered");var le=n($);le.disconnect.call(this,oe)}},function(t,r,e){var n=e(60),g=e(51),y=e(61),i=e(6),k=e(56),L=e(3),$=e(23),V=e(5),z=e(52),re=e(15),oe=e(53),le=e(2),ue=e(54),ie=e(55),ae=e(42);function Fe(kt,Et){var lr=V(kt);if(z){var tr=z(kt);Et&&(tr=re(tr).call(tr,function(or){return oe(kt,or).enumerable})),lr.push.apply(lr,tr)}return lr}function de(kt){for(var Et=1;Et<arguments.length;Et++){var lr,tr,or=arguments[Et]!=null?arguments[Et]:{};Et%2?le(lr=Fe(Object(or),!0)).call(lr,function(dr){g(kt,dr,or[dr])}):ue?ie(kt,ue(or)):le(tr=Fe(Object(or))).call(tr,function(dr){ae(kt,dr,oe(or,dr))})}return kt}var Ne=e(202).fn,Ve=e(48),ze=e(0);function jt(kt){var Et=this;if(kt.code===398)return this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),Et.forceDisconnect(),Et.backoff.setMin(5e3),void(Et.retryCount===0?Et.refreshSocketUrl():L.resolve()).then(function(){var lr;Et.reconnect({allFailedCB:$(lr=function(tr){this.logger.error("pendingLoginFailed: ",tr.code,tr),this.onAuthError(tr,"link::onLoginReconnectFailed")}).call(lr,Et,kt)})});this.logger.error("pendingLoginFailed: ",kt.code,kt),Et.onAuthError(kt,"link::onLogin")}Ne.assembleLogin=function(){var kt=this.options;this.sdkSession=this.genSessionKey();var Et={appKey:kt.appKey,account:kt.account,deviceId:Ve.deviceId,chatroomId:kt.chatroomId,session:this.sdkSession,appLogin:this.autoconnect?1:0},lr=!0;if(kt.loc_x===void 0||kt.loc_y===void 0||kt.loc_z===void 0?lr=!1:(typeof kt.loc_x!="number"&&(kt.loc_x=0),typeof kt.loc_y!="number"&&(kt.loc_y=0),typeof kt.loc_z!="number"&&(kt.loc_z=0)),kt.authType=kt.loginAuthType,Et=ze.merge(Et,ze.filterObj(kt,lr?"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt loc_x loc_y loc_z distance antiSpamBusinessId":"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt distance antiSpamBusinessId")),kt.tags&&kt.tags.length>0)try{Et.tags=i(kt.tags)}catch(tr){this.logger.error("assembleLogin::format tags error",kt.tags,tr)}return{type:1,login:Et,imLogin:this.assembleIMLogin()}},Ne.login=y(n.mark(function kt(){var Et,lr,tr,or=this;return n.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return Et=this,dr.next=3,Et.assembleLogin();case 3:if(lr=dr.sent,!Et.socket||Et.socket.binaryType!=="arraybuffer"){dr.next=8;break}this.logger.log("link::doLogin: appLogin is "+lr.login.appLogin),dr.next=19;break;case 8:if(!(tr=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){dr.next=17;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[tr]){dr.next=14;break}return this.logger.warn("onConnect::repeat login",tr),dr.abrupt("return");case 14:this.socketIds[tr]=!0,dr.next=18;break;case 17:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 18:this.logger.warn("link::doLogin: "+tr+" appLogin is "+lr.login.appLogin);case 19:Et.createLoginTime=k(),Et.sendCmd("login",de({},lr),function(cr,nr){if(cr)Et.reporter.report("chatroomLogin",{binary_websocket:Et.useBinaryWebSocket(),accid:Et.account,roomId:Et.options&&Et.options.chatroomId,serverIps:Et.options&&Et.options.chatroomAddresses&&Et.options.chatroomAddresses.join(","),currentServerIp:Et.url,rt:k()-Et.createLoginTime,result:cr?cr.code:408,failReason:cr?cr.message:"",time:k(),net_connect:Et.checkNetworkAvailable()}),jt.call(Et,cr),Et.statusProtector.processEvent("auth/loginLifeCycleLoginFail",cr);else if(Et.reporter.report("chatroomLogin",{binary_websocket:Et.useBinaryWebSocket(),accid:Et.account,roomId:Et.options&&Et.options.chatroomId,serverIps:Et.options&&Et.options.chatroomAddresses&&Et.options.chatroomAddresses.join(","),currentServerIp:Et.url,rt:k()-Et.createLoginTime,result:200,failReason:"",time:k(),net_connect:Et.checkNetworkAvailable()}),Et.resetReconnectStatus(),or.heartbeatFail=0,or.hasLogin=!0,or.autoconnect=!0,Et.startHeartbeat(),Et.initOnlineListener(),Et.statusProtector.processEvent("auth/loginLifeCycleLoginSucc"),Et.keepNosSafeUrl)Et.afterLogin(nr);else{var ur=[];Et.parser.checkObjSafeUrl(nr,ur,[]),L.all(ur).then(function(){Et.afterLogin(nr)}).catch(function(){Et.afterLogin(nr)})}});case 21:case"end":return dr.stop()}},kt,this)})),Ne.afterLogin=function(kt){var Et=kt.chatroom;this.sendCmd("getNosCdnHost",{}),this.chatroom=Et,this.notifyLogin(kt)},Ne.kickedReasons=["","chatroomClosed","managerKick","samePlatformKick","silentlyKick","blacked"],Ne.kickedMessages=["","聊天室关闭了","被房主或者管理员踢出","不允许同一个帐号在多个地方同时登录","悄悄被踢","被拉黑了"]},function(t,r,e){var n=e(10),g=e(22),y=e(63),i=e(2),k=e(43),L=e(34),$=e(9),V=e(28),z=e(128),re=e(5),oe=e(202).fn,le=e(0),ue=e(12),ie=e(913),ae=e(795),Fe=e(918),de=e(919),Ne=e(920);oe.completeMsg=function(Ve){Ve.chatroomId=this.chatroom&&this.chatroom.id,Ve.from=this.options.account,Ve.fromClientType="Web",Ve.time||(Ve.time=+new Date)},oe.amendMsg=function(Ve){return Ve},oe.onMsg=function(Ve){var ze,jt=n(ze=this.message).call(ze,Ve.content.msg);if(this.checkMsgUnique(jt)){if(jt.__handleTime=this.reporterHook.getSafeClock(),jt.__receiveTime=Ve.__receiveTime,le.get(Ve,"content.msg.__clientExt"))try{jt.__clientExt=JSON.parse(Ve.content.msg.__clientExt)}catch{this.logger.warn("ChatroomProtocolFn:onMsg __clientExt parse failed ".concat(Ve.content.msg.__clientExt))}this.msgBuffer.push(jt),this.msgFlushTimer||this.startMsgFlushTimer(),Ve&&Ve.content&&Ve.content.msg&&Ve.content.msg.needHighPriorityMsgAck==="1"&&this.sendCmd("sendChatroomMsgAck",{chatRoomMsgAckTag:{idClient:jt.idClient,chatroomId:jt.chatroomId}})}else this.logger.warn("onMsg::msg::repeat",jt.idClient)},oe.startMsgFlushTimer=function(){var Ve=this,ze=Ve.options;Ve.msgFlushTimer=g(function(){var jt,kt=y(jt=Ve.msgBuffer).call(jt,0,ze.msgBufferSize);if(ue.isBrowser){var Et=Ve.reporterHook.getSafeClock();i(kt).call(kt,function(lr){if(lr.flow!=="out"){var tr={msgId:lr.idServer,clientId:lr.idClient,receiveTime:Ve.reporterHook.getNTPTime(lr.__receiveTime),serverTime:lr.time,callbackTime:Ve.reporterHook.getNTPTime(Et),preHandleTime:Ve.reporterHook.getNTPTime(lr.__handleTime),fromAccid:lr.from,toAccid:Ve.options.account,type:4,tid:"",roomId:lr.chatroomId,result:200,failReason:"",rt:k(Et-lr.__receiveTime)},or=le.get(lr,"__clientExt.statistics.apiCallingTime"),dr=le.get(lr,"__clientExt.statistics.sendTime");or&&dr&&(tr.apiCallingTime=or,tr.sendTime=dr,tr.attachUploadDuration=le.get(lr,"__clientExt.statistics.attachUploadDuration")||0),Ve.reporter&&Ve.reporter.report("msgReceive",tr)}delete lr.__handleTime,delete lr.__receiveTime,delete lr.__clientExt})}Ve.options.onmsgs(kt),Ve.msgBuffer.length?Ve.startMsgFlushTimer():delete Ve.msgFlushTimer},ze.msgBufferInterval)},oe.checkMsgUnique=le.genCheckUniqueFunc("idClient"),oe.onSendMsg=function(Ve){var ze,jt=Ve.obj.msg;Ve.error?jt.status="fail":(jt=Ve.content.msg).status="success",L(jt,Ve.obj.msg),jt=n(ze=this.message).call(ze,jt),this.checkMsgUnique(jt),Ve.obj=jt},oe.onHistoryMsgs=function(Ve){Ve.error||(Ve.obj||(Ve.obj={}),Ve.obj.msgs=this.message.reverseMsgs(Ve.content.msgs))},oe.onCdnMsgInfo=function(Ve){if(Ve){Ve.cdnUrls&&(Ve.cdnUrls=Ve.cdnUrls.split("|")),Ve.interval&&(Ve.interval=1e3*k(Ve.interval)),Ve.timeout&&(Ve.timeout=+Ve.timeout),Ve.enable&&(Ve.enable=+Ve.enable),Ve.timestamp&&(Ve.timestamp=+Ve.timestamp,this.correctCdnTime(Ve.timestamp));var ze=!this.cdnInfo.enable&&Ve.enable;L(this.cdnInfo,Ve),ze&&this.queryCdnMsgs()}},oe.correctCdnTime=function(Ve){Ve&&typeof Ve=="number"&&(this.cdnInfo||(this.cdnInfo={}),this.cdnInfo.timestamp=Ve,this.cdnInfo.localTime=+new Date,this.cdnInfo.lastNow=null,this.logger.info("correctCdnTime: timestamp, localTime",Ve,this.cdnInfo.localTime,new Date(Ve),new Date(this.cdnInfo.localTime)))},oe.queryCdnMsgs=function(Ve){var ze,jt=this;if(this.cdnInfo&&this.cdnInfo.enable&&this.isConnected()){this.queryCdnTimer=g(function(){return jt.queryCdnMsgs()},this.cdnInfo.interval);var kt=+new Date;if(kt=kt-this.cdnInfo.localTime+this.cdnInfo.timestamp,kt-=kt%this.cdnInfo.interval,this.cdnInfo.lastNow!==kt&&this.cdnInfo.cdnUrls&&this.cdnInfo.cdnUrls.length){this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());var Et=this,lr=this.cdnInfo.decryptKey,tr=this.cdnInfo.timeout||Math.ceil(this.cdnInfo.interval/2),or=$(ze=this.cdnInfo.cdnUrls).call(ze,0);Ve=Ve||0,function dr(){if(Ve>=3)return void Et.finalFail++;if(or.length){var cr=or.shift().replace("#time",kt),nr=cr.split("/")[2],ur=+new Date;Et.adaptersRequest(cr,{timeout:tr,onload:function(ar){if(Et.cdnInfo.lastNow>kt)Et.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ",Et.cdnInfo.lastNow,kt,ar);else{Et.cdnInfo.lastNow=kt,Et.afterQueryCdn(nr,+new Date-ur,!0);try{ar=JSON.parse(ar)}catch(Sr){Et.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ",Sr)}if(ar&&ar.data){ar.ptm&&(Et.cdnInfo.timeout=ar.ptm),ar.pis&&(Et.cdnInfo.interval=1e3*ar.pis);var gr,pr,yr=ar.e===!0?(gr=ar.data,pr=lr,ie.decrypt(gr,ae.parse(pr),{mode:Fe,padding:de}).toString(Ne)):ar.data;Et.onCdnMsgsSmoothly(yr,kt,1e3*ar.c)}}},onerror:function(ar){if(Ve++,Et.afterQueryCdn(nr,+new Date-ur,!1),ar.status===404){var gr;try{var pr=JSON.parse(ar.result);pr.code===404&&pr.timestamp&&(gr=pr.timestamp)}catch(yr){Et.logger.warn("queryCdnMsgs::doQuery::parse 404 result error",yr,ar)}!gr&&ar.date&&(gr=+new Date(ar.date)),gr&&(Et.correctCdnTime(gr),clearTimeout(Et.queryCdnTimer),Et.queryCdnMsgs(Ve))}else dr()}},{exception_service:8})}}()}}},oe.onCdnMsgsSmoothly=function(Ve,ze,jt){try{Ve=JSON.parse(Ve)}catch(or){this.logger.warn("onCdnMsgsSmoothly::JSON.parse error",or)}if(this.logger.info("receive cdn msgs "+Ve.length+" and request time is "+new Date(ze)),V(Ve)&&Ve.length){var kt=this,Et=this.options.msgBufferInterval,lr=Math.ceil(Ve.length*Et/jt);tr(),clearInterval(kt.cdnSmoothTimer),kt.cdnSmoothTimer=z(function(){return tr()},Et)}function tr(){if(kt.isConnected()){var or=y(Ve).call(Ve,0,lr);i(or).call(or,function(dr){var cr=kt.parser.syncUnserialize(dr,"msg");kt.onMsg({content:{msg:cr}})}),Ve.length||clearInterval(kt.cdnSmoothTimer)}}},oe.resetCdnData=function(){this.cdnData={},this.finalFail=0,this.cdnDataTime=+new Date},oe.initCdnData=function(){this.resetCdnData(),le.isFunction(this.options.onCdnRequestData)?(this.options.cdnRequestDataInterval=this.options.cdnRequestDataInterval||3e4,this.afterQueryCdn=function(Ve,ze,jt){var kt,Et=this;this.cdnData[Ve]||(this.cdnData[Ve]={success:0,fail:0,sr:0,fr:0,smr:0,fmr:0}),jt?(this.cdnData[Ve].success++,this.cdnData[Ve].sr+=ze,ze>this.cdnData[Ve].smr&&(this.cdnData[Ve].smr=ze)):(this.cdnData[Ve].fail++,this.cdnData[Ve].fr+=ze,ze>this.cdnData[Ve].fmr&&(this.cdnData[Ve].fmr=ze)),+new Date-this.cdnDataTime<this.options.cdnRequestDataInterval||(i(kt=re(this.cdnData)).call(kt,function(lr){Et.cdnData[lr].sr=Et.cdnData[lr].sr/Et.cdnData[lr].success||0,Et.cdnData[lr].fr=Et.cdnData[lr].fr/Et.cdnData[lr].fail||0}),this.options.onCdnRequestData(L({},this.cdnData),this.finalFail),this.resetCdnData())}):this.afterQueryCdn=function(){}}},function(t,r,e){var n;t.exports=(n=e(96),e(795),e(915),e(796),e(320),function(){var g=n,y=g.lib.BlockCipher,i=g.algo,k=[],L=[],$=[],V=[],z=[],re=[],oe=[],le=[],ue=[],ie=[];(function(){for(var de=[],Ne=0;Ne<256;Ne++)de[Ne]=Ne<128?Ne<<1:Ne<<1^283;var Ve=0,ze=0;for(Ne=0;Ne<256;Ne++){var jt=ze^ze<<1^ze<<2^ze<<3^ze<<4;jt=jt>>>8^255&jt^99,k[Ve]=jt,L[jt]=Ve;var kt=de[Ve],Et=de[kt],lr=de[Et],tr=257*de[jt]^16843008*jt;$[Ve]=tr<<24|tr>>>8,V[Ve]=tr<<16|tr>>>16,z[Ve]=tr<<8|tr>>>24,re[Ve]=tr,tr=16843009*lr^65537*Et^257*kt^16843008*Ve,oe[jt]=tr<<24|tr>>>8,le[jt]=tr<<16|tr>>>16,ue[jt]=tr<<8|tr>>>24,ie[jt]=tr,Ve?(Ve=kt^de[de[de[lr^kt]]],ze^=de[de[ze]]):Ve=ze=1}})();var ae=[0,1,2,4,8,16,32,64,128,27,54],Fe=i.AES=y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var de=this._keyPriorReset=this._key,Ne=de.words,Ve=de.sigBytes/4,ze=4*((this._nRounds=Ve+6)+1),jt=this._keySchedule=[],kt=0;kt<ze;kt++)kt<Ve?jt[kt]=Ne[kt]:(tr=jt[kt-1],kt%Ve?Ve>6&&kt%Ve==4&&(tr=k[tr>>>24]<<24|k[tr>>>16&255]<<16|k[tr>>>8&255]<<8|k[255&tr]):(tr=k[(tr=tr<<8|tr>>>24)>>>24]<<24|k[tr>>>16&255]<<16|k[tr>>>8&255]<<8|k[255&tr],tr^=ae[kt/Ve|0]<<24),jt[kt]=jt[kt-Ve]^tr);for(var Et=this._invKeySchedule=[],lr=0;lr<ze;lr++){if(kt=ze-lr,lr%4)var tr=jt[kt];else tr=jt[kt-4];Et[lr]=lr<4||kt<=4?tr:oe[k[tr>>>24]]^le[k[tr>>>16&255]]^ue[k[tr>>>8&255]]^ie[k[255&tr]]}}},encryptBlock:function(de,Ne){this._doCryptBlock(de,Ne,this._keySchedule,$,V,z,re,k)},decryptBlock:function(de,Ne){var Ve=de[Ne+1];de[Ne+1]=de[Ne+3],de[Ne+3]=Ve,this._doCryptBlock(de,Ne,this._invKeySchedule,oe,le,ue,ie,L),Ve=de[Ne+1],de[Ne+1]=de[Ne+3],de[Ne+3]=Ve},_doCryptBlock:function(de,Ne,Ve,ze,jt,kt,Et,lr){for(var tr=this._nRounds,or=de[Ne]^Ve[0],dr=de[Ne+1]^Ve[1],cr=de[Ne+2]^Ve[2],nr=de[Ne+3]^Ve[3],ur=4,ar=1;ar<tr;ar++){var gr=ze[or>>>24]^jt[dr>>>16&255]^kt[cr>>>8&255]^Et[255&nr]^Ve[ur++],pr=ze[dr>>>24]^jt[cr>>>16&255]^kt[nr>>>8&255]^Et[255&or]^Ve[ur++],yr=ze[cr>>>24]^jt[nr>>>16&255]^kt[or>>>8&255]^Et[255&dr]^Ve[ur++],Sr=ze[nr>>>24]^jt[or>>>16&255]^kt[dr>>>8&255]^Et[255&cr]^Ve[ur++];or=gr,dr=pr,cr=yr,nr=Sr}gr=(lr[or>>>24]<<24|lr[dr>>>16&255]<<16|lr[cr>>>8&255]<<8|lr[255&nr])^Ve[ur++],pr=(lr[dr>>>24]<<24|lr[cr>>>16&255]<<16|lr[nr>>>8&255]<<8|lr[255&or])^Ve[ur++],yr=(lr[cr>>>24]<<24|lr[nr>>>16&255]<<16|lr[or>>>8&255]<<8|lr[255&dr])^Ve[ur++],Sr=(lr[nr>>>24]<<24|lr[or>>>16&255]<<16|lr[dr>>>8&255]<<8|lr[255&cr])^Ve[ur++],de[Ne]=gr,de[Ne+1]=pr,de[Ne+2]=yr,de[Ne+3]=Sr},keySize:8});g.AES=y._createHelper(Fe)}(),n.AES)},function(t,r){},function(t,r,e){var n;t.exports=(n=e(96),function(g){var y=n,i=y.lib,k=i.WordArray,L=i.Hasher,$=y.algo,V=[];(function(){for(var ie=0;ie<64;ie++)V[ie]=4294967296*g.abs(g.sin(ie+1))|0})();var z=$.MD5=L.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(ie,ae){for(var Fe=0;Fe<16;Fe++){var de=ae+Fe,Ne=ie[de];ie[de]=16711935&(Ne<<8|Ne>>>24)|4278255360&(Ne<<24|Ne>>>8)}var Ve=this._hash.words,ze=ie[ae+0],jt=ie[ae+1],kt=ie[ae+2],Et=ie[ae+3],lr=ie[ae+4],tr=ie[ae+5],or=ie[ae+6],dr=ie[ae+7],cr=ie[ae+8],nr=ie[ae+9],ur=ie[ae+10],ar=ie[ae+11],gr=ie[ae+12],pr=ie[ae+13],yr=ie[ae+14],Sr=ie[ae+15],wr=Ve[0],Mr=Ve[1],mr=Ve[2],_r=Ve[3];wr=re(wr,Mr,mr,_r,ze,7,V[0]),_r=re(_r,wr,Mr,mr,jt,12,V[1]),mr=re(mr,_r,wr,Mr,kt,17,V[2]),Mr=re(Mr,mr,_r,wr,Et,22,V[3]),wr=re(wr,Mr,mr,_r,lr,7,V[4]),_r=re(_r,wr,Mr,mr,tr,12,V[5]),mr=re(mr,_r,wr,Mr,or,17,V[6]),Mr=re(Mr,mr,_r,wr,dr,22,V[7]),wr=re(wr,Mr,mr,_r,cr,7,V[8]),_r=re(_r,wr,Mr,mr,nr,12,V[9]),mr=re(mr,_r,wr,Mr,ur,17,V[10]),Mr=re(Mr,mr,_r,wr,ar,22,V[11]),wr=re(wr,Mr,mr,_r,gr,7,V[12]),_r=re(_r,wr,Mr,mr,pr,12,V[13]),mr=re(mr,_r,wr,Mr,yr,17,V[14]),wr=oe(wr,Mr=re(Mr,mr,_r,wr,Sr,22,V[15]),mr,_r,jt,5,V[16]),_r=oe(_r,wr,Mr,mr,or,9,V[17]),mr=oe(mr,_r,wr,Mr,ar,14,V[18]),Mr=oe(Mr,mr,_r,wr,ze,20,V[19]),wr=oe(wr,Mr,mr,_r,tr,5,V[20]),_r=oe(_r,wr,Mr,mr,ur,9,V[21]),mr=oe(mr,_r,wr,Mr,Sr,14,V[22]),Mr=oe(Mr,mr,_r,wr,lr,20,V[23]),wr=oe(wr,Mr,mr,_r,nr,5,V[24]),_r=oe(_r,wr,Mr,mr,yr,9,V[25]),mr=oe(mr,_r,wr,Mr,Et,14,V[26]),Mr=oe(Mr,mr,_r,wr,cr,20,V[27]),wr=oe(wr,Mr,mr,_r,pr,5,V[28]),_r=oe(_r,wr,Mr,mr,kt,9,V[29]),mr=oe(mr,_r,wr,Mr,dr,14,V[30]),wr=le(wr,Mr=oe(Mr,mr,_r,wr,gr,20,V[31]),mr,_r,tr,4,V[32]),_r=le(_r,wr,Mr,mr,cr,11,V[33]),mr=le(mr,_r,wr,Mr,ar,16,V[34]),Mr=le(Mr,mr,_r,wr,yr,23,V[35]),wr=le(wr,Mr,mr,_r,jt,4,V[36]),_r=le(_r,wr,Mr,mr,lr,11,V[37]),mr=le(mr,_r,wr,Mr,dr,16,V[38]),Mr=le(Mr,mr,_r,wr,ur,23,V[39]),wr=le(wr,Mr,mr,_r,pr,4,V[40]),_r=le(_r,wr,Mr,mr,ze,11,V[41]),mr=le(mr,_r,wr,Mr,Et,16,V[42]),Mr=le(Mr,mr,_r,wr,or,23,V[43]),wr=le(wr,Mr,mr,_r,nr,4,V[44]),_r=le(_r,wr,Mr,mr,gr,11,V[45]),mr=le(mr,_r,wr,Mr,Sr,16,V[46]),wr=ue(wr,Mr=le(Mr,mr,_r,wr,kt,23,V[47]),mr,_r,ze,6,V[48]),_r=ue(_r,wr,Mr,mr,dr,10,V[49]),mr=ue(mr,_r,wr,Mr,yr,15,V[50]),Mr=ue(Mr,mr,_r,wr,tr,21,V[51]),wr=ue(wr,Mr,mr,_r,gr,6,V[52]),_r=ue(_r,wr,Mr,mr,Et,10,V[53]),mr=ue(mr,_r,wr,Mr,ur,15,V[54]),Mr=ue(Mr,mr,_r,wr,jt,21,V[55]),wr=ue(wr,Mr,mr,_r,cr,6,V[56]),_r=ue(_r,wr,Mr,mr,Sr,10,V[57]),mr=ue(mr,_r,wr,Mr,or,15,V[58]),Mr=ue(Mr,mr,_r,wr,pr,21,V[59]),wr=ue(wr,Mr,mr,_r,lr,6,V[60]),_r=ue(_r,wr,Mr,mr,ar,10,V[61]),mr=ue(mr,_r,wr,Mr,kt,15,V[62]),Mr=ue(Mr,mr,_r,wr,nr,21,V[63]),Ve[0]=Ve[0]+wr|0,Ve[1]=Ve[1]+Mr|0,Ve[2]=Ve[2]+mr|0,Ve[3]=Ve[3]+_r|0},_doFinalize:function(){var ie=this._data,ae=ie.words,Fe=8*this._nDataBytes,de=8*ie.sigBytes;ae[de>>>5]|=128<<24-de%32;var Ne=g.floor(Fe/4294967296),Ve=Fe;ae[15+(de+64>>>9<<4)]=16711935&(Ne<<8|Ne>>>24)|4278255360&(Ne<<24|Ne>>>8),ae[14+(de+64>>>9<<4)]=16711935&(Ve<<8|Ve>>>24)|4278255360&(Ve<<24|Ve>>>8),ie.sigBytes=4*(ae.length+1),this._process();for(var ze=this._hash,jt=ze.words,kt=0;kt<4;kt++){var Et=jt[kt];jt[kt]=16711935&(Et<<8|Et>>>24)|4278255360&(Et<<24|Et>>>8)}return ze},clone:function(){var ie=L.clone.call(this);return ie._hash=this._hash.clone(),ie}});function re(ie,ae,Fe,de,Ne,Ve,ze){var jt=ie+(ae&Fe|~ae&de)+Ne+ze;return(jt<<Ve|jt>>>32-Ve)+ae}function oe(ie,ae,Fe,de,Ne,Ve,ze){var jt=ie+(ae&de|Fe&~de)+Ne+ze;return(jt<<Ve|jt>>>32-Ve)+ae}function le(ie,ae,Fe,de,Ne,Ve,ze){var jt=ie+(ae^Fe^de)+Ne+ze;return(jt<<Ve|jt>>>32-Ve)+ae}function ue(ie,ae,Fe,de,Ne,Ve,ze){var jt=ie+(Fe^(ae|~de))+Ne+ze;return(jt<<Ve|jt>>>32-Ve)+ae}y.MD5=L._createHelper(z),y.HmacMD5=L._createHmacHelper(z)}(Math),n.MD5)},function(t,r,e){var n,g,y,i,k,L,$,V;t.exports=(V=e(96),g=(n=V).lib,y=g.WordArray,i=g.Hasher,k=n.algo,L=[],$=k.SHA1=i.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,re){for(var oe=this._hash.words,le=oe[0],ue=oe[1],ie=oe[2],ae=oe[3],Fe=oe[4],de=0;de<80;de++){if(de<16)L[de]=0|z[re+de];else{var Ne=L[de-3]^L[de-8]^L[de-14]^L[de-16];L[de]=Ne<<1|Ne>>>31}var Ve=(le<<5|le>>>27)+Fe+L[de];Ve+=de<20?1518500249+(ue&ie|~ue&ae):de<40?1859775393+(ue^ie^ae):de<60?(ue&ie|ue&ae|ie&ae)-1894007588:(ue^ie^ae)-899497514,Fe=ae,ae=ie,ie=ue<<30|ue>>>2,ue=le,le=Ve}oe[0]=oe[0]+le|0,oe[1]=oe[1]+ue|0,oe[2]=oe[2]+ie|0,oe[3]=oe[3]+ae|0,oe[4]=oe[4]+Fe|0},_doFinalize:function(){var z=this._data,re=z.words,oe=8*this._nDataBytes,le=8*z.sigBytes;return re[le>>>5]|=128<<24-le%32,re[14+(le+64>>>9<<4)]=Math.floor(oe/4294967296),re[15+(le+64>>>9<<4)]=oe,z.sigBytes=4*re.length,this._process(),this._hash},clone:function(){var z=i.clone.call(this);return z._hash=this._hash.clone(),z}}),n.SHA1=i._createHelper($),n.HmacSHA1=i._createHmacHelper($),V.SHA1)},function(t,r,e){var n,g,y,i;t.exports=(n=e(96),y=(g=n).lib.Base,i=g.enc.Utf8,void(g.algo.HMAC=y.extend({init:function(k,L){k=this._hasher=new k.init,typeof L=="string"&&(L=i.parse(L));var $=k.blockSize,V=4*$;L.sigBytes>V&&(L=k.finalize(L)),L.clamp();for(var z=this._oKey=L.clone(),re=this._iKey=L.clone(),oe=z.words,le=re.words,ue=0;ue<$;ue++)oe[ue]^=1549556828,le[ue]^=909522486;z.sigBytes=re.sigBytes=V,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var L=this._hasher,$=L.finalize(k);return L.reset(),L.finalize(this._oKey.clone().concat($))}})))},function(t,r,e){var n,g;t.exports=(g=e(96),e(320),g.mode.ECB=((n=g.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(y,i){this._cipher.encryptBlock(y,i)}}),n.Decryptor=n.extend({processBlock:function(y,i){this._cipher.decryptBlock(y,i)}}),n),g.mode.ECB)},function(t,r,e){var n;t.exports=(n=e(96),e(320),n.pad.Pkcs7)},function(t,r,e){var n;t.exports=(n=e(96),n.enc.Utf8)},function(t,r,e){var n=e(10),g=e(202).fn,y=e(319);g.onChatroomMembersInfo=g.onChatroomMembers=function(i){i.error||(i.obj.members=y.reverseMembers(i.content.members))},g.onGetChatroomMemberCountByTag=function(i){i.error||(i.obj=i.content)},g.onMarkChatroomMember=function(i){i.error||(i.obj.member=n(y).call(y,i.content.chatroomMember))},g.onSyncRobot=function(i){!i.error&&this.options.onrobots?this.options.onrobots(null,i.content):this.ontions.onrobots(i.error,{})}},function(t,r,e){var n=e(10),g=e(11),y=e(0),i=function(ie){this.account=ie.account},k=i.prototype,L=k.Message=e(123),$=k.TextMessage=e(923),V=k.FileMessage=e(210),z=k.GeoMessage=e(927),re=k.NotificationMessage=e(928),oe=k.CustomMessage=e(929),le=k.TipMessage=e(930),ue=k.RobotMessage=e(931);k.validTypes=L.validTypes,k.reverse=function(ie){var ae;switch(L.getType(ie)){case"text":ae=n($).call($,ie);break;case"image":case"audio":case"video":case"file":ae=n(V).call(V,ie);break;case"geo":ae=n(z).call(z,ie);break;case"notification":ae=n(re).call(re,ie);break;case"custom":ae=n(oe).call(oe,ie);break;case"tip":ae=n(le).call(le,ie);break;case"robot":ae=n(ue).call(ue,ie);break;default:ae=n(L).call(L,ie)}return L.setExtra(ae,this.account),ae},k.reverseMsgs=function(ie,ae){var Fe,de,Ne=this;return g(ie).call(ie,function(Ve){return Ve=n(Ne).call(Ne,Ve),ae&&((Fe=ae.modifyObj)&&(Ve=y.merge(Ve,Fe)),de=ae.mapper,y.isFunction(de)&&(Ve=de(Ve))),Ve})},t.exports=i},function(t,r,e){var n=e(19),g=e(10),y=e(123),i=e(0);function k(L){i.verifyOptions(L,"text","msg::TextMessage"),L.type="text",y.call(this,L),this.attach=L.text,this.body=""}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.text=L.attach,$},t.exports=k},function(t,r,e){var n=e(19),g=e(0),y=e(210);function i(){}i.prototype=n(y.prototype),i.verifyFile=function(k,L){g.verifyOptions(k,"w h",!0,"file.",L)},t.exports=i},function(t,r,e){var n=e(19),g=e(210),y=e(0);function i(){}i.prototype=n(g.prototype),i.verifyFile=function(k,L){y.verifyOptions(k,"dur",!0,"file.",L)},t.exports=i},function(t,r,e){var n=e(19),g=e(210),y=e(0);function i(){}i.prototype=n(g.prototype),i.verifyFile=function(k,L){y.verifyOptions(k,"dur w h",!0,"file.",L)},t.exports=i},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(123),k=e(0);function L($){$.type="geo",k.verifyOptions($,"geo","msg::GeoMessage"),k.verifyOptions($.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),k.verifyParamType("geo.lng",$.geo.lng,"number","msg::GeoMessage"),k.verifyParamType("geo.lat",$.geo.lat,"number","msg::GeoMessage"),k.verifyParamType("geo.title",$.geo.title,"string","msg::GeoMessage"),i.call(this,$),this.attach=n($.geo)}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return $.attach=$.attach?""+$.attach:"",V.geo=$.attach?JSON.parse($.attach):{},V},t.exports=L},function(t,r,e){var n=e(19),g=e(10),y=e(43),i=e(0).notundef,k=e(123),L={301:"memberEnter",302:"memberExit",303:"blackMember",304:"unblackMember",305:"gagMember",306:"ungagMember",307:"addManager",308:"removeManager",309:"addCommon",310:"removeCommon",311:"closeChatroom",312:"updateChatroom",313:"kickMember",314:"addTempMute",315:"removeTempMute",316:"updateMemberInfo",317:"updateQueue",318:"muteRoom",319:"unmuteRoom",320:"batchUpdateQueue",321:"addTempMuteTag",322:"removeTempMuteTag",324:"batchQueueOffer",323:"deleteChatroomMsg",325:"updateChatroomTags"};function $(){}$.prototype=n(k.prototype),$.reverse=function(V){var z=g(k).call(k,V);if(V.attach=V.attach?""+V.attach:"",V.attach){var re=JSON.parse(V.attach);if(z.attach={type:L[re.id]},i(re.data)){var oe=re.data;if(i(oe.operator)&&(z.attach.from=oe.operator),i(oe.opeNick)&&(z.attach.fromNick=oe.opeNick),i(oe.target)&&(z.attach.to=oe.target),i(oe.tarNick)&&(z.attach.toNick=oe.tarNick),i(oe.muteDuration)&&(z.attach.duration=y(oe.muteDuration,10)),i(oe.tags)&&(z.attach.tags=oe.tags),z.attach.type==="memberEnter"&&(i(oe.muted)?z.attach.gaged=+oe.muted==1:z.attach.gaged=!1,i(oe.tempMuted)?z.attach.tempMuted=+oe.tempMuted==1:z.attach.tempMuted=!1,i(oe.muteTtl)?z.attach.tempMuteDuration=+oe.muteTtl:z.attach.tempMuteDuration=0),z.attach.type==="deleteChatroomMsg"&&(z.attach.msgId=oe.msgId,z.attach.msgTime=oe.msgTime),i(oe.ext)&&(z.attach.custom=oe.ext),i(oe.queueChange)){var le=JSON.parse(oe.queueChange);switch(le._e){case"OFFER":z.attach.queueChange={type:"OFFER",elementKey:le.key,elementValue:le.content};break;case"POLL":z.attach.queueChange={type:"POLL",elementKey:le.key,elementValue:le.content};break;case"DROP":z.attach.queueChange={type:"DROP"};break;case"PARTCLEAR":case"BATCH_UPDATE":z.attach.queueChange={type:le._e,elementKv:le.kvObject};break;case"BATCH_OFFER":z.attach.queueChange={type:le._e,elements:le.elements}}}}}else z.attach={};return z},t.exports=$},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(123),k=e(0);function L($){k.verifyOptions($,"content","msg::CustomMessage"),$.type="custom",i.call(this,$),typeof $.content!="string"&&($.content=n($.content)),this.attach=$.content}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return V.content=$.attach,V},t.exports=L},function(t,r,e){var n=e(19),g=e(10),y=e(123),i=e(0);function k(L){i.verifyOptions(L,"tip","msg::TipMessage"),L.type="tip",y.call(this,L),this.attach=L.tip}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.tip=L.attach,$},t.exports=k},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(11),k=e(123),L=e(0),$={welcome:"00",text:"01",link:"03"},V={"01":"text","02":"image","03":"answer",11:"template"};function z(re){L.verifyOptions(re,"content","msg::RobotMessage");var oe=re.content;switch(oe.type){case"welcome":L.undef(re.body)&&(this.body="欢迎消息");break;case"text":L.verifyOptions(oe,"content","msg::RobotMessage"),L.undef(re.body)&&(this.body=oe.content);break;case"link":L.verifyOptions(oe,"target","msg::RobotMessage")}oe.type&&(oe.type=$[oe.type]),oe={param:oe,robotAccid:re.robotAccid},this.attach=n(oe),re.type="robot",k.call(this,re)}z.prototype=g(k.prototype),z.reverse=function(re){var oe=y(k).call(k,re);if(oe.type==="robot"){var le=JSON.parse(re.attach);if(le.param&&(le.param.type=V[le.param.type]||"unknown"),le.robotMsg){var ue=(le=L.merge(le,le.robotMsg)).message;le.flag==="bot"?le.message=i(ue).call(ue,function(ie){return ie.type=V[ie.type]||"unknown",ie}):le.flag,delete le.robotMsg}oe.content=le}return oe},t.exports=z},function(t,r,e){var n=e(10),g=e(28),y=e(11),i=e(15),k=e(6),L=e(0),$=L.undef,V=e(201).fn,z=e(26).reportAPI;V.beforeSendMsg=function(oe){oe.cmd="sendMsg"};var re={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};V.getHistoryMsgs=function(oe){if((oe=oe||{}).done=z({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgs",done:oe.done}),L.verifyOptions(oe),$(oe.timetag)?oe.timetag=0:L.verifyParamType("timetag",oe.timetag,"number","msg::getHistoryMsgs"),$(oe.limit)?oe.limit=100:L.verifyParamType("limit",oe.limit,"number","msg::getHistoryMsgs"),$(n(oe))?oe.reverse=!1:L.verifyParamType("reverse",n(oe),"boolean","msg::getHistoryMsgs"),$(oe.msgTypes))oe.msgTypes=[];else if(g(oe.msgTypes)){var le,ue;oe.msgTypes=y(le=oe.msgTypes).call(le,function(ie){return re[ie]}),oe.msgTypes=i(ue=oe.msgTypes).call(ue,function(ie){return typeof ie=="number"})}else typeof re[oe.msgTypes]=="number"?oe.msgTypes=[re[oe.msgTypes]]:oe.msgTypes=[];this.processCallback(oe),this.sendCmd("getHistoryMsgs",oe,function(ie,ae,Fe){g(Fe)&&(Fe=y(Fe).call(Fe,function(de){return re[de.type]&&(de.type=re[de.type]),de})),oe.callback(ie,ae,Fe)})},V.getHistoryMsgsByTags=function(oe){if((oe=oe||{}).done=z({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgsByTags",done:oe.done}),L.verifyOptions(oe,"tags","api::msg::getHistoryMsgsByTags"),L.verifyParamType("tags",oe.tags,"array","api::msg::getHistoryMsgsByTags"),$(oe.fromTime)?oe.fromTime=0:L.verifyParamType("fromTime",oe.fromTime,"number","api::msg::getHistoryMsgsByTags"),$(oe.toTime)?oe.toTime=0:L.verifyParamType("toTime",oe.toTime,"number","api::msg::getHistoryMsgsByTags"),$(oe.limit)?oe.limit=100:L.verifyParamType("limit",oe.limit,"number","msg::getHistoryMsgs"),$(n(oe))?oe.reverse=0:L.verifyParamType("reverse",n(oe),"number","msg::getHistoryMsgs"),$(oe.types))oe.types=[];else if(g(oe.types)){var le,ue;oe.types=y(le=oe.types).call(le,function(ie){return re[ie]}),oe.types=i(ue=oe.types).call(ue,function(ie){return typeof ie=="number"})}else typeof re[oe.types]=="number"?oe.types=[re[oe.types]]:oe.types=[];this.processCallback(oe),oe.types=k(oe.types),oe.tags=k(oe.tags),this.sendCmd("getHistoryMsgsByTags",{chatRoomTagHistoryMsgRequestTag:oe},oe.callback)}},function(t,r,e){var n=e(201).fn,g=e(26).reportAPI;n.disconnect=function(y){(y=y||{}).done=g({instance:this,className:"ChatroomFn",funcName:"disconnect",done:y.done}),this.protocol.disconnect(y.done)}},function(t,r,e){var n=e(0),g=n.undef,y=n.verifyOptions,i=n.verifyParamType,k=e(319),L=e(201).fn,$=e(26).reportAPI;L.updateMyChatroomMemberInfo=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateMyChatroomMemberInfo",done:V.done}),y(V,"member needNotify","member::updateMyChatroomMemberInfo"),i("needNotify",V.needNotify,"boolean","member::updateMyChatroomMemberInfo"),V.needSave=V.needSave||!1,i("needSave",V.needSave,"boolean","member::updateMyChatroomMemberInfo"),this.processCustom(V),this.processCallback(V),V.chatroomMember=new k(V.member),V.antispamTag={antiSpamBusinessId:V.antiSpamBusinessId},this.sendCmd("updateMyChatroomMemberInfo",V)},L.getChatroomMembers=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMembers",done:V.done}),y(V,"guest","member::getChatroomMembers"),i("guest",V.guest,"boolean","member::getChatroomMembers"),g(V.time)?V.time=0:i("time",V.time,"number","member::getChatroomMembers"),g(V.limit)?V.limit=100:i("limit",V.limit,"number","member::getChatroomMembers"),this.processCallback(V),V.guest?V.type=V.desc===!1?3:1:V.type=V.onlyOnline?2:0,this.sendCmd("getChatroomMembers",V)},L.getChatroomMembersByTag=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersByTag",done:V.done}),y(V,"tag","getChatroomMembersByTag::rag"),g(V.time)?V.time=0:i("time",V.time,"number","getChatroomMembersByTag::time"),g(V.limit)?V.limit=100:i("limit",V.limit,"number","getChatroomMembersByTag::limit"),this.processCallback(V),this.sendCmd("getChatroomMembersByTag",{tagMemberReq:n.filterObj(V,"tag limit time"),callback:V.callback})},L.getChatroomMemberCountByTag=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMemberCountByTag",done:V.done}),y(V,"tag","getChatroomMemberCountByTag::rag"),this.processCallback(V),this.sendCmd("getChatroomMemberCountByTag",V)},L.getChatroomMembersInfo=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersInfo",done:V.done}),y(V,"accounts","member::getChatroomMembersInfo"),i("accounts",V.accounts,"array","member::getChatroomMembersInfo"),this.processCallback(V),this.sendCmd("getChatroomMembersInfo",V)},L.markChatroomIdentity=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomIdentity",done:V.done}),y(V,"identity","member::markChatroomIdentity"),V.type={manager:1,common:2,black:-1,mute:-2}[V.identity],delete V.identity,isNaN(V.type)?y(V,"identity",'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".'):this.markChatroomMember(V)},L.markChatroomManager=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomManager",done:V.done}),V.type=1,this.markChatroomMember(V)},L.markChatroomCommonMember=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomCommonMember",done:V.done}),V.type=2,this.markChatroomMember(V)},L.markChatroomBlacklist=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomBlacklist",done:V.done}),V.type=-1,this.markChatroomMember(V)},L.markChatroomGaglist=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomGaglist",done:V.done}),V.type=-2,this.markChatroomMember(V)},L.markChatroomMember=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomMember",done:V.done}),y(V,"account type isAdd","member::markChatroomMember"),i("isAdd",V.isAdd,"boolean","member::markChatroomMember"),g(V.level)?V.level=0:i("level",V.level,"number","member::markChatroomMember"),this.processCustom(V),this.processCallback(V),this.sendCmd("markChatroomMember",V)},L.kickChatroomMember=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"kickChatroomMember",done:V.done}),y(V,"account","member::kickChatroomMember"),this.processCustom(V),this.processCallback(V),this.sendCmd("kickChatroomMember",V)},L.updateChatroomMemberTempMute=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateChatroomMemberTempMute",done:V.done}),y(V,"account duration needNotify","member::updateChatroomMemberTempMute"),i("duration",V.duration,"number","member::updateChatroomMemberTempMute"),i("needNotify",V.needNotify,"boolean","member::updateChatroomMemberTempMute"),this.processCustom(V),this.processCallback(V),this.sendCmd("updateChatroomMemberTempMute",V)},L.updateTagMembersTempMute=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateTagMembersTempMute",done:V.done}),y(V,"tag duration needNotify","member::updateTagMembersTempMute"),i("duration",V.duration,"number","member::updateTagMembersTempMute"),i("needNotify",V.needNotify,"boolean","member::updateTagMembersTempMute"),this.processCustom(V),this.processCallback(V);var z=n.filterObj(V,"tag duration custom notifyTargetTags");z.needNotify=V.needNotify?1:0,this.sendCmd("updateTagMembersTempMute",{tagMuteReq:z,callback:V.callback})},L.updateCoordinate=n.throttle(function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateCoordinate",done:V.done});var z=!0;V.x===void 0||V.y===void 0||V.z===void 0?z=!1:(typeof V.x!="number"&&(V.x=0),typeof V.y!="number"&&(V.y=0),typeof V.z!="number"&&(V.z=0)),this.processCallback(V);var re=n.filterObj(V,z?"x y z distance":"distance");this.sendCmd("updateCoordinate",{coordinateReq:re,callback:V.callback})},300,{},function(V){V&&V.done&&V.done({code:416,chatroomId:this.options.chatroomId})}),L.getRobotList=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getRobotList",done:V.done}),this.logger.warn("this api will be abandon"),g(V.timetag)&&(V.timetag=0),this.processCallback(V),this.sendCmd("syncRobot",V)}},function(t,r,e){var n=e(201).fn,g=e(0),y=e(26).reportAPI;n.queueOffer=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueOffer",done:i.done}),g.verifyOptions(i,"elementKey elementValue","msg::queueOffer");var k={elementKey:i.elementKey,elementValue:i.elementValue,transient:!!i.transient};i.elementAccount&&(k.elementAccount=i.elementAccount),this.processCallback(i),this.sendCmd("queueOffer",k,i.callback)},n.queuePoll=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queuePoll",done:i.done}),i.elementKey=i.elementKey||"",this.processCallback(i),this.sendCmd("queuePoll",i,i.callback)},n.queueList=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueList",done:i.done}),this.processCallback(i),this.sendCmd("queueList",i,i.callback)},n.peak=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"peak",done:i.done}),this.processCallback(i),this.sendCmd("peak",i,i.callback)},n.queueDrop=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueDrop",done:i.done}),this.processCallback(i),this.sendCmd("queueDrop",i,i.callback)},n.queueChange=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueChange",done:i.done}),g.verifyOptions(i,"elementMap","msg::queueOffer"),i.needNotify?(i.needNotify=!0,g.verifyOptions(i,"notifyExt","msg::queueOffer")):i.needNotify=!1,this.processCallback(i),this.sendCmd("queueChange",i,i.callback)}},,,function(t,r,e){t.exports=e(939)},function(t,r,e){e(305);var n={NIM:e(797),Chatroom:e(909)};e(318)(n),t.exports=n}])})})(NIM_Web_SDK);class NimChatroomSocket{constructor(r){pd(this,"liveId");pd(this,"nimChatroomSocket");pd(this,"onMessage");pd(this,"handleRoomSocketMessage",r=>{this.onMessage(this,r)});pd(this,"onConnet",r=>{let e="进入小偶像的直播间成功。";console.log(e),logApi().addSystem(e)});pd(this,"handleRoomSocketError",(r,e)=>{console.log("发生错误",r,e),logApi().addSystem("发生错误"+r)});pd(this,"handleRoomSocketDisconnect",r=>{console.log("连接断开",r),logApi().addSystem("直播间连接断开")});this.liveId=r.liveId,this.onMessage=r.onMessage}init(r){logApi().add({content:"由于官方更新过协议，虽然房间功能修复，但是直播间监听功能仍未修复，暂时关闭！",type:"system",color:"red",time:new Date().toLocaleString()})}disconnect(){var r,e;(e=(r=this.nimChatroomSocket)==null?void 0:r.disconnect)==null||e.call(r,{done(){}}),this.nimChatroomSocket=void 0}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,n=r==="x"?e:e&3|8;return n.toString(16)})}}var QCHAT_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(pe){return pe&&pe.__esModule&&Object.prototype.hasOwnProperty.call(pe,"default")?pe.default:pe}function g(pe){var xe={exports:{}};return pe(xe,xe.exports),xe.exports}var y,i,k=n(g(function(pe){pe.exports=function(qe){if(qe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qe},pe.exports.__esModule=!0,pe.exports.default=pe.exports})),L=function(pe){return pe&&pe.Math==Math&&pe},$=L(typeof globalThis=="object"&&globalThis)||L(typeof window=="object"&&window)||L(typeof self=="object"&&self)||L(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),V=function(pe){try{return!!pe()}catch{return!0}},z=!V(function(){var pe=(function(){}).bind();return typeof pe!="function"||pe.hasOwnProperty("prototype")}),re=Function.prototype,oe=re.apply,le=re.call,ue=typeof Reflect=="object"&&Reflect.apply||(z?le.bind(oe):function(){return le.apply(oe,arguments)}),ie=Function.prototype,ae=ie.bind,Fe=ie.call,de=z&&ae.bind(Fe,Fe),Ne=z?function(pe){return pe&&de(pe)}:function(pe){return pe&&function(){return Fe.apply(pe,arguments)}},Ve=function(pe){return typeof pe=="function"},ze=!V(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),jt=Function.prototype.call,kt=z?jt.bind(jt):function(){return jt.apply(jt,arguments)},Et={}.propertyIsEnumerable,lr=Object.getOwnPropertyDescriptor,tr={f:lr&&!Et.call({1:2},1)?function(xe){var qe=lr(this,xe);return!!qe&&qe.enumerable}:Et},or=function(pe,xe){return{enumerable:!(1&pe),configurable:!(2&pe),writable:!(4&pe),value:xe}},dr=Ne({}.toString),cr=Ne("".slice),nr=function(pe){return cr(dr(pe),8,-1)},ur=Object,ar=Ne("".split),gr=V(function(){return!ur("z").propertyIsEnumerable(0)})?function(pe){return nr(pe)=="String"?ar(pe,""):ur(pe)}:ur,pr=function(pe){return pe==null},yr=TypeError,Sr=function(pe){if(pr(pe))throw yr("Can't call method on "+pe);return pe},wr=function(pe){return gr(Sr(pe))},Mr=typeof document=="object"&&document.all,mr=Mr===void 0&&Mr!==void 0?function(pe){return typeof pe=="object"?pe!==null:Ve(pe)||pe===Mr}:function(pe){return typeof pe=="object"?pe!==null:Ve(pe)},_r={},Nr=function(pe){return Ve(pe)?pe:void 0},Pr=function(pe,xe){return arguments.length<2?Nr(_r[pe])||Nr($[pe]):_r[pe]&&_r[pe][xe]||$[pe]&&$[pe][xe]},sr=Ne({}.isPrototypeOf),Ir=Pr("navigator","userAgent")||"",Ar=$.process,Cr=$.Deno,br=Ar&&Ar.versions||Cr&&Cr.version,vr=br&&br.v8;vr&&(i=(y=vr.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!i&&Ir&&(!(y=Ir.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=Ir.match(/Chrome\/(\d+)/))&&(i=+y[1]);var Tr,Br=i,Lr=!!Object.getOwnPropertySymbols&&!V(function(){var pe=Symbol();return!String(pe)||!(Object(pe)instanceof Symbol)||!Symbol.sham&&Br&&Br<41}),Fr=Lr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",qr=Object,Vr=Fr?function(pe){return typeof pe=="symbol"}:function(pe){var xe=Pr("Symbol");return Ve(xe)&&sr(xe.prototype,qr(pe))},Qr=String,Sn=function(pe){try{return Qr(pe)}catch{return"Object"}},Mn=TypeError,Xr=function(pe){if(Ve(pe))return pe;throw Mn(Sn(pe)+" is not a function")},Wn=function(pe,xe){var qe=pe[xe];return pr(qe)?void 0:Xr(qe)},Zr=TypeError,En=Object.defineProperty,Jr="__core-js_shared__",kn=$[Jr]||function(pe,xe){try{En($,pe,{value:xe,configurable:!0,writable:!0})}catch{$[pe]=xe}return xe}(Jr,{}),Un=g(function(pe){(pe.exports=function(xe,qe){return kn[xe]||(kn[xe]=qe!==void 0?qe:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),wn=Object,Pn=function(pe){return wn(Sr(pe))},oo=Ne({}.hasOwnProperty),Rn=Object.hasOwn||function(xe,qe){return oo(Pn(xe),qe)},An=0,to=Math.random(),uo=Ne(1 .toString),Eo=function(pe){return"Symbol("+(pe===void 0?"":pe)+")_"+uo(++An+to,36)},Oo=Un("wks"),$o=$.Symbol,ua=$o&&$o.for,gs=Fr?$o:$o&&$o.withoutSetter||Eo,Co=function(pe){if(!Rn(Oo,pe)||!Lr&&typeof Oo[pe]!="string"){var xe="Symbol."+pe;Lr&&Rn($o,pe)?Oo[pe]=$o[pe]:Oo[pe]=Fr&&ua?ua(xe):gs(xe)}return Oo[pe]},Ps=TypeError,ao=Co("toPrimitive"),Ta=function(pe,xe){if(!mr(pe)||Vr(pe))return pe;var qe,Oe=Wn(pe,ao);if(Oe){if(xe===void 0&&(xe="default"),qe=kt(Oe,pe,xe),!mr(qe)||Vr(qe))return qe;throw Ps("Can't convert object to primitive value")}return xe===void 0&&(xe="number"),function(Ie,At){var Dt,Pt;if(At==="string"&&Ve(Dt=Ie.toString)&&!mr(Pt=kt(Dt,Ie))||Ve(Dt=Ie.valueOf)&&!mr(Pt=kt(Dt,Ie))||At!=="string"&&Ve(Dt=Ie.toString)&&!mr(Pt=kt(Dt,Ie)))return Pt;throw Zr("Can't convert object to primitive value")}(pe,xe)},Ca=function(pe){var xe=Ta(pe,"string");return Vr(xe)?xe:xe+""},Da=$.document,Ba=mr(Da)&&mr(Da.createElement),Zo=function(pe){return Ba?Da.createElement(pe):{}},xo=!ze&&!V(function(){return Object.defineProperty(Zo("div"),"a",{get:function(){return 7}}).a!=7}),Ua=Object.getOwnPropertyDescriptor,$a={f:ze?Ua:function(xe,qe){if(xe=wr(xe),qe=Ca(qe),xo)try{return Ua(xe,qe)}catch{}if(Rn(xe,qe))return or(!kt(tr.f,xe,qe),xe[qe])}},Dc=/#|\.prototype\./,As=function(pe,xe){var qe=ha[si(pe)];return qe==po||qe!=Fn&&(Ve(xe)?V(xe):!!xe)},si=As.normalize=function(pe){return String(pe).replace(Dc,".").toLowerCase()},ha=As.data={},Fn=As.NATIVE="N",po=As.POLYFILL="P",ta=As,Ea=Ne(Ne.bind),Ho=function(pe,xe){return Xr(pe),xe===void 0?pe:z?Ea(pe,xe):function(){return pe.apply(xe,arguments)}},Qi=ze&&V(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),hu=String,gc=TypeError,lo=function(pe){if(mr(pe))return pe;throw gc(hu(pe)+" is not an object")},qp=TypeError,fd=Object.defineProperty,E1=Object.getOwnPropertyDescriptor,P1="enumerable",A1="configurable",N1="writable",ja={f:ze?Qi?function(xe,qe,Oe){if(lo(xe),qe=Ca(qe),lo(Oe),typeof xe=="function"&&qe==="prototype"&&"value"in Oe&&N1 in Oe&&!Oe.writable){var Ie=E1(xe,qe);Ie&&Ie.writable&&(xe[qe]=Oe.value,Oe={configurable:A1 in Oe?Oe.configurable:Ie.configurable,enumerable:P1 in Oe?Oe.enumerable:Ie.enumerable,writable:!1})}return fd(xe,qe,Oe)}:fd:function(xe,qe,Oe){if(lo(xe),qe=Ca(qe),lo(Oe),xo)try{return fd(xe,qe,Oe)}catch{}if("get"in Oe||"set"in Oe)throw qp("Accessors not supported");return"value"in Oe&&(xe[qe]=Oe.value),xe}},Ma=ze?function(pe,xe,qe){return ja.f(pe,xe,or(1,qe))}:function(pe,xe,qe){return pe[xe]=qe,pe},O1=$a.f,R1=function(pe){var xe=function(qe,Oe,Ie){if(this instanceof xe){switch(arguments.length){case 0:return new pe;case 1:return new pe(qe);case 2:return new pe(qe,Oe)}return new pe(qe,Oe,Ie)}return ue(pe,this,arguments)};return xe.prototype=pe.prototype,xe},xn=function(pe,xe){var qe,Oe,Ie,At,Dt,Pt,ir,hr,xr=pe.target,Or=pe.global,jr=pe.stat,Ur=pe.proto,Yr=Or?$:jr?$[xr]:($[xr]||{}).prototype,_n=Or?_r:_r[xr]||Ma(_r,xr,{})[xr],Tn=_n.prototype;for(Ie in xe)qe=!ta(Or?Ie:xr+(jr?".":"#")+Ie,pe.forced)&&Yr&&Rn(Yr,Ie),Dt=_n[Ie],qe&&(Pt=pe.dontCallGetSet?(hr=O1(Yr,Ie))&&hr.value:Yr[Ie]),At=qe&&Pt?Pt:xe[Ie],qe&&typeof Dt==typeof At||(ir=pe.bind&&qe?Ho(At,$):pe.wrap&&qe?R1(At):Ur&&Ve(At)?Ne(At):At,(pe.sham||At&&At.sham||Dt&&Dt.sham)&&Ma(ir,"sham",!0),Ma(_n,Ie,ir),Ur&&(Rn(_r,Oe=xr+"Prototype")||Ma(_r,Oe,{}),Ma(_r[Oe],Ie,At),pe.real&&Tn&&!Tn[Ie]&&Ma(Tn,Ie,At)))},B1=Math.ceil,L1=Math.floor,F1=Math.trunc||function(xe){var qe=+xe;return(qe>0?L1:B1)(qe)},hc=function(pe){var xe=+pe;return xe!=xe||xe===0?0:F1(xe)},$1=Math.max,j1=Math.min,Ri=function(pe,xe){var qe=hc(pe);return qe<0?$1(qe+xe,0):j1(qe,xe)},D1=Math.min,ns=function(pe){return(xe=pe.length)>0?D1(hc(xe),9007199254740991):0;var xe},Um=function(pe){return function(xe,qe,Oe){var Ie,At=wr(xe),Dt=ns(At),Pt=Ri(Oe,Dt);if(pe&&qe!=qe){for(;Dt>Pt;)if((Ie=At[Pt++])!=Ie)return!0}else for(;Dt>Pt;Pt++)if((pe||Pt in At)&&At[Pt]===qe)return pe||Pt||0;return!pe&&-1}},md={includes:Um(!0),indexOf:Um(!1)},Bi={},U1=md.indexOf,Vm=Ne([].push),qm=function(pe,xe){var qe,Oe=wr(pe),Ie=0,At=[];for(qe in Oe)!Rn(Bi,qe)&&Rn(Oe,qe)&&Vm(At,qe);for(;xe.length>Ie;)Rn(Oe,qe=xe[Ie++])&&(~U1(At,qe)||Vm(At,qe));return At},Il=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ds=Object.keys||function(xe){return qm(xe,Il)},V1=ze&&!Qi?Object.defineProperties:function(xe,qe){lo(xe);for(var Oe,Ie=wr(qe),At=Ds(qe),Dt=At.length,Pt=0;Dt>Pt;)ja.f(xe,Oe=At[Pt++],Ie[Oe]);return xe},Hm={f:V1},gd=Pr("document","documentElement"),zm=Un("keys"),El=function(pe){return zm[pe]||(zm[pe]=Eo(pe))},Wm=El("IE_PROTO"),hd=function(){},Gm=function(pe){return"<script>"+pe+"<\/script>"},Km=function(pe){pe.write(Gm("")),pe.close();var xe=pe.parentWindow.Object;return pe=null,xe},Pl=function(){try{Tr=new ActiveXObject("htmlfile")}catch{}var pe,xe;Pl=typeof document<"u"?document.domain&&Tr?Km(Tr):((xe=Zo("iframe")).style.display="none",gd.appendChild(xe),xe.src="javascript:",(pe=xe.contentWindow.document).open(),pe.write(Gm("document.F=Object")),pe.close(),pe.F):Km(Tr);for(var qe=Il.length;qe--;)delete Pl.prototype[Il[qe]];return Pl()};Bi[Wm]=!0;var os=Object.create||function(xe,qe){var Oe;return xe!==null?(hd.prototype=lo(xe),Oe=new hd,hd.prototype=null,Oe[Wm]=xe):Oe=Pl(),qe===void 0?Oe:Hm.f(Oe,qe)};xn({target:"Object",stat:!0,sham:!ze},{create:os});var q1=_r.Object,ii=function(xe,qe){return q1.create(xe,qe)},H1=String,z1=TypeError,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var pe,xe=!1,qe={};try{(pe=Ne(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(qe,[]),xe=qe instanceof Array}catch{}return function(Ie,At){return lo(Ie),function(Dt){if(typeof Dt=="object"||Ve(Dt))return Dt;throw z1("Can't set "+H1(Dt)+" as a prototype")}(At),xe?pe(Ie,At):Ie.__proto__=At,Ie}}():void 0);xn({target:"Object",stat:!0},{setPrototypeOf:vc});var ci=_r.Object.setPrototypeOf,Us=Ne([].slice),Qm=Function,W1=Ne([].concat),G1=Ne([].join),vd={},K1=function(pe,xe,qe){if(!Rn(vd,xe)){for(var Oe=[],Ie=0;Ie<xe;Ie++)Oe[Ie]="a["+Ie+"]";vd[xe]=Qm("C,a","return new C("+G1(Oe,",")+")")}return vd[xe](pe,qe)},yd=z?Qm.bind:function(xe){var qe=Xr(this),Oe=qe.prototype,Ie=Us(arguments,1),At=function(){var Pt=W1(Ie,Us(arguments));return this instanceof At?K1(qe,Pt.length,Pt):qe.apply(xe,Pt)};return mr(Oe)&&(At.prototype=Oe),At};xn({target:"Function",proto:!0,forced:Function.bind!==yd},{bind:yd});var da=function(pe){return _r[pe+"Prototype"]},Q1=da("Function").bind,bd=Function.prototype,oa=function(pe){var xe=pe.bind;return pe===bd||sr(bd,pe)&&xe===bd.bind?Q1:xe},Sd=g(function(pe){function xe(qe,Oe){var Ie;return pe.exports=xe=ci?oa(Ie=ci).call(Ie):function(Dt,Pt){return Dt.__proto__=Pt,Dt},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe,Oe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),ra=n(g(function(pe){pe.exports=function(qe,Oe){qe.prototype=ii(Oe.prototype),qe.prototype.constructor=qe,Sd(qe,Oe)},pe.exports.__esModule=!0,pe.exports.default=pe.exports}));xn({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var yc={f:Object.getOwnPropertySymbols},Li=Object.assign,Jm=Object.defineProperty,J1=Ne([].concat),Ym=!Li||V(function(){if(ze&&Li({b:1},Li(Jm({},"a",{enumerable:!0,get:function(){Jm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var pe={},xe={},qe=Symbol(),Oe="abcdefghijklmnopqrst";return pe[qe]=7,Oe.split("").forEach(function(Ie){xe[Ie]=Ie}),Li({},pe)[qe]!=7||Ds(Li({},xe)).join("")!=Oe})?function(xe,qe){for(var Oe=Pn(xe),Ie=arguments.length,At=1,Dt=yc.f,Pt=tr.f;Ie>At;)for(var ir,hr=gr(arguments[At++]),xr=Dt?J1(Ds(hr),Dt(hr)):Ds(hr),Or=xr.length,jr=0;Or>jr;)ir=xr[jr++],ze&&!kt(Pt,hr,ir)||(Oe[ir]=hr[ir]);return Oe}:Li;xn({target:"Object",stat:!0,arity:2,forced:Object.assign!==Ym},{assign:Ym});var Hn=_r.Object.assign,vu=!V(function(){function pe(){}return pe.prototype.constructor=null,Object.getPrototypeOf(new pe)!==pe.prototype}),Td=El("IE_PROTO"),Gn=Object,bc=Gn.prototype,Al=vu?Gn.getPrototypeOf:function(pe){var xe=Pn(pe);if(Rn(xe,Td))return xe[Td];var qe=xe.constructor;return Ve(qe)&&xe instanceof qe?qe.prototype:xe instanceof Gn?bc:null},Y1=Il.concat("length","prototype"),yu={f:Object.getOwnPropertyNames||function(xe){return qm(xe,Y1)}},Xm=Ne([].concat),X1=Pr("Reflect","ownKeys")||function(xe){var qe=yu.f(lo(xe)),Oe=yc.f;return Oe?Xm(qe,Oe(xe)):qe},Uc=Error,Z1=Ne("".replace),ay=String(Uc("zxcasd").stack),sy=/\n\s*at [^:]*:[^\n]*/,bu=sy.test(ay),Vc=function(pe,xe){if(bu&&typeof pe=="string"&&!Uc.prepareStackTrace)for(;xe--;)pe=Z1(pe,sy,"");return pe},iy=function(pe,xe){mr(xe)&&"cause"in xe&&Ma(pe,"cause",xe.cause)},Ji={},hi=Co("iterator"),cy=Array.prototype,ly=function(pe){return pe!==void 0&&(Ji.Array===pe||cy[hi]===pe)},Hp={};Hp[Co("toStringTag")]="z";var Zm=String(Hp)==="[object z]",uy=Co("toStringTag"),dy=Object,eg=nr(function(){return arguments}())=="Arguments",Nl=Zm?nr:function(pe){var xe,qe,Oe;return pe===void 0?"Undefined":pe===null?"Null":typeof(qe=function(Ie,At){try{return Ie[At]}catch{}}(xe=dy(pe),uy))=="string"?qe:eg?nr(xe):(Oe=nr(xe))=="Object"&&Ve(xe.callee)?"Arguments":Oe},Su=Co("iterator"),Fi=function(pe){if(!pr(pe))return Wn(pe,Su)||Wn(pe,"@@iterator")||Ji[Nl(pe)]},tg=TypeError,Ol=function(pe,xe){var qe=arguments.length<2?Fi(pe):xe;if(Xr(qe))return lo(kt(qe,pe));throw tg(Sn(pe)+" is not iterable")},rg=function(pe,xe,qe){var Oe,Ie;lo(pe);try{if(!(Oe=Wn(pe,"return"))){if(xe==="throw")throw qe;return qe}Oe=kt(Oe,pe)}catch(At){Ie=!0,Oe=At}if(xe==="throw")throw qe;if(Ie)throw Oe;return lo(Oe),qe},py=TypeError,Cd=function(pe,xe){this.stopped=pe,this.result=xe},zp=Cd.prototype,ia=function(pe,xe,qe){var Oe,Ie,At,Dt,Pt,ir,hr,xr=qe&&qe.that,Or=!(!qe||!qe.AS_ENTRIES),jr=!(!qe||!qe.IS_RECORD),Ur=!(!qe||!qe.IS_ITERATOR),Yr=!(!qe||!qe.INTERRUPTED),_n=Ho(xe,xr),Tn=function(zn){return Oe&&rg(Oe,"normal",zn),new Cd(!0,zn)},Dn=function(zn){return Or?(lo(zn),Yr?_n(zn[0],zn[1],Tn):_n(zn[0],zn[1])):Yr?_n(zn,Tn):_n(zn)};if(jr)Oe=pe.iterator;else if(Ur)Oe=pe;else{if(!(Ie=Fi(pe)))throw py(Sn(pe)+" is not iterable");if(ly(Ie)){for(At=0,Dt=ns(pe);Dt>At;At++)if((Pt=Dn(pe[At]))&&sr(zp,Pt))return Pt;return new Cd(!1)}Oe=Ol(pe,Ie)}for(ir=jr?pe.next:Oe.next;!(hr=kt(ir,Oe)).done;){try{Pt=Dn(hr.value)}catch(zn){rg(Oe,"throw",zn)}if(typeof Pt=="object"&&Pt&&sr(zp,Pt))return Pt}return new Cd(!1)},eS=String,li=function(pe){if(Nl(pe)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return eS(pe)},Rl=function(pe,xe){return pe===void 0?arguments.length<2?"":xe:li(pe)},tS=!V(function(){var pe=Error("a");return!("stack"in pe)||(Object.defineProperty(pe,"stack",or(1,7)),pe.stack!==7)}),rS=Co("toStringTag"),Md=Error,Bl=[].push,kd=function(xe,qe){var Oe,Ie=arguments.length>2?arguments[2]:void 0,At=sr(ng,this);vc?Oe=vc(Md(),At?Al(this):ng):(Oe=At?this:os(ng),Ma(Oe,rS,"Error")),qe!==void 0&&Ma(Oe,"message",Rl(qe)),tS&&Ma(Oe,"stack",Vc(Oe.stack,1)),iy(Oe,Ie);var Dt=[];return ia(xe,Bl,{that:Dt}),Ma(Oe,"errors",Dt),Oe};vc?vc(kd,Md):function(pe,xe,qe){for(var Oe=X1(xe),Ie=ja.f,At=$a.f,Dt=0;Dt<Oe.length;Dt++){var Pt=Oe[Dt];Rn(pe,Pt)||qe&&Rn(qe,Pt)||Ie(pe,Pt,At(xe,Pt))}}(kd,Md,{name:!0});var ng=kd.prototype=os(Md.prototype,{constructor:or(1,kd),message:or(1,""),name:or(1,"AggregateError")});xn({global:!0,constructor:!0,arity:2},{AggregateError:kd});var Wp,qc,Tu,og=$.WeakMap,Gp=Ve(og)&&/native code/.test(String(og)),ag="Object already initialized",sg=$.TypeError,ig=$.WeakMap;if(Gp||kn.state){var Hc=kn.state||(kn.state=new ig),nS=Ne(Hc.get),fy=Ne(Hc.has),gy=Ne(Hc.set);Wp=function(pe,xe){if(fy(Hc,pe))throw sg(ag);return xe.facade=pe,gy(Hc,pe,xe),xe},qc=function(pe){return nS(Hc,pe)||{}},Tu=function(pe){return fy(Hc,pe)}}else{var zc=El("state");Bi[zc]=!0,Wp=function(pe,xe){if(Rn(pe,zc))throw sg(ag);return xe.facade=pe,Ma(pe,zc,xe),xe},qc=function(pe){return Rn(pe,zc)?pe[zc]:{}},Tu=function(pe){return Rn(pe,zc)}}var Sc,Kp,Yi,vi={set:Wp,get:qc,has:Tu,enforce:function(pe){return Tu(pe)?qc(pe):Wp(pe,{})},getterFor:function(pe){return function(xe){var qe;if(!mr(xe)||(qe=qc(xe)).type!==pe)throw sg("Incompatible receiver, "+pe+" required");return qe}}},cg=Function.prototype,hy=ze&&Object.getOwnPropertyDescriptor,lg=Rn(cg,"name"),vy={EXISTS:lg,PROPER:lg&&(function(){}).name==="something",CONFIGURABLE:lg&&(!ze||ze&&hy(cg,"name").configurable)},Xi=function(pe,xe,qe,Oe){return Oe&&Oe.enumerable?pe[xe]=qe:Ma(pe,xe,qe),pe},ug=Co("iterator"),yy=!1;[].keys&&("next"in(Yi=[].keys())?(Kp=Al(Al(Yi)))!==Object.prototype&&(Sc=Kp):yy=!0);var wd=!mr(Sc)||V(function(){var pe={};return Sc[ug].call(pe)!==pe});Sc=wd?{}:os(Sc),Ve(Sc[ug])||Xi(Sc,ug,function(){return this});var dg={IteratorPrototype:Sc,BUGGY_SAFARI_ITERATORS:yy},Qp=Zm?{}.toString:function(){return"[object "+Nl(this)+"]"},oS=ja.f,pg=Co("toStringTag"),Tc=function(pe,xe,qe,Oe){if(pe){var Ie=qe?pe:pe.prototype;Rn(Ie,pg)||oS(Ie,pg,{configurable:!0,value:xe}),Oe&&!Zm&&Ma(Ie,"toString",Qp)}},by=dg.IteratorPrototype,Wc=function(){return this},Gc=vy.PROPER,Zi=dg.BUGGY_SAFARI_ITERATORS,fg=Co("iterator"),mg="keys",Jp="values",Yp="entries",aS=function(){return this},So=function(pe,xe,qe,Oe,Ie,At,Dt){(function(Dn,zn,Jn,$n){var vo=zn+" Iterator";Dn.prototype=os(by,{next:or(+!$n,Jn)}),Tc(Dn,vo,!1,!0),Ji[vo]=Wc})(qe,xe,Oe);var Pt,ir,hr,xr=function(Dn){if(Dn===Ie&&_n)return _n;if(!Zi&&Dn in Ur)return Ur[Dn];switch(Dn){case mg:return function(){return new qe(this,Dn)};case Jp:return function(){return new qe(this,Dn)};case Yp:return function(){return new qe(this,Dn)}}return function(){return new qe(this)}},Or=xe+" Iterator",jr=!1,Ur=pe.prototype,Yr=Ur[fg]||Ur["@@iterator"]||Ie&&Ur[Ie],_n=!Zi&&Yr||xr(Ie),Tn=xe=="Array"&&Ur.entries||Yr;if(Tn&&(Pt=Al(Tn.call(new pe)))!==Object.prototype&&Pt.next&&(Tc(Pt,Or,!0,!0),Ji[Or]=aS),Gc&&Ie==Jp&&Yr&&Yr.name!==Jp&&(jr=!0,_n=function(){return kt(Yr,this)}),Ie)if(ir={values:xr(Jp),keys:At?_n:xr(mg),entries:xr(Yp)},Dt)for(hr in ir)(Zi||jr||!(hr in Ur))&&Xi(Ur,hr,ir[hr]);else xn({target:xe,proto:!0,forced:Zi||jr},ir);return Dt&&Ur[fg]!==_n&&Xi(Ur,fg,_n,{name:Ie}),Ji[xe]=_n,ir};ja.f;var Sy="Array Iterator",_d=vi.set,sS=vi.getterFor(Sy);So(Array,"Array",function(pe,xe){_d(this,{type:Sy,target:wr(pe),index:0,kind:xe})},function(){var pe=sS(this),xe=pe.target,qe=pe.kind,Oe=pe.index++;return!xe||Oe>=xe.length?(pe.target=void 0,{value:void 0,done:!0}):qe=="keys"?{value:Oe,done:!1}:qe=="values"?{value:xe[Oe],done:!1}:{value:[Oe,xe[Oe]],done:!1}},"values"),Ji.Arguments=Ji.Array;var ec=nr($.process)=="process",Ty=Co("species"),Xp=function(pe){var xe=Pr(pe),qe=ja.f;ze&&xe&&!xe[Ty]&&qe(xe,Ty,{configurable:!0,get:function(){return this}})},Ss=TypeError,gg=function(pe,xe){if(sr(xe,pe))return pe;throw Ss("Incorrect invocation")},fa=Ne(Function.toString);Ve(kn.inspectSource)||(kn.inspectSource=function(pe){return fa(pe)});var Cy=kn.inspectSource,Zp=function(){},My=[],ky=Pr("Reflect","construct"),hg=/^\s*(?:class|function)\b/,vg=Ne(hg.exec),Ja=!hg.exec(Zp),$i=function(xe){if(!Ve(xe))return!1;try{return ky(Zp,My,xe),!0}catch{return!1}},wy=function(xe){if(!Ve(xe))return!1;switch(Nl(xe)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ja||!!vg(hg,Cy(xe))}catch{return!0}};wy.sham=!0;var xd,Kc,_y,yg,Cu=!ky||V(function(){var pe;return $i($i.call)||!$i(Object)||!$i(function(){pe=!0})||pe})?wy:$i,Pa=TypeError,ef=function(pe){if(Cu(pe))return pe;throw Pa(Sn(pe)+" is not a constructor")},Id=Co("species"),ji=function(pe,xe){var qe,Oe=lo(pe).constructor;return Oe===void 0||pr(qe=lo(Oe)[Id])?xe:ef(qe)},iS=TypeError,bg=function(pe,xe){if(pe<xe)throw iS("Not enough arguments");return pe},xy=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ir),Sg=$.setImmediate,tf=$.clearImmediate,cS=$.process,Tg=$.Dispatch,lS=$.Function,Iy=$.MessageChannel,uS=$.String,rf=0,Ed={},nf="onreadystatechange";try{xd=$.location}catch{}var Cg=function(pe){if(Rn(Ed,pe)){var xe=Ed[pe];delete Ed[pe],xe()}},Mu=function(pe){return function(){Cg(pe)}},of=function(pe){Cg(pe.data)},Ey=function(pe){$.postMessage(uS(pe),xd.protocol+"//"+xd.host)};Sg&&tf||(Sg=function(xe){bg(arguments.length,1);var qe=Ve(xe)?xe:lS(xe),Oe=Us(arguments,1);return Ed[++rf]=function(){ue(qe,void 0,Oe)},Kc(rf),rf},tf=function(xe){delete Ed[xe]},ec?Kc=function(pe){cS.nextTick(Mu(pe))}:Tg&&Tg.now?Kc=function(pe){Tg.now(Mu(pe))}:Iy&&!xy?(yg=(_y=new Iy).port2,_y.port1.onmessage=of,Kc=Ho(yg.postMessage,yg)):$.addEventListener&&Ve($.postMessage)&&!$.importScripts&&xd&&xd.protocol!=="file:"&&!V(Ey)?(Kc=Ey,$.addEventListener("message",of,!1)):Kc=nf in Zo("script")?function(pe){gd.appendChild(Zo("script")).onreadystatechange=function(){gd.removeChild(this),Cg(pe)}}:function(pe){setTimeout(Mu(pe),0)});var Qc,Jc,Va,ku,Xs,Mg,kg,Py,Pd={set:Sg,clear:tf},dS=/ipad|iphone|ipod/i.test(Ir)&&$.Pebble!==void 0,Ad=/web0s(?!.*chrome)/i.test(Ir),wg=$a.f,Ll=Pd.set,Fl=$.MutationObserver||$.WebKitMutationObserver,_g=$.document,af=$.process,ui=$.Promise,xg=wg($,"queueMicrotask"),Ig=xg&&xg.value;Ig||(Qc=function(){var pe,xe;for(ec&&(pe=af.domain)&&pe.exit();Jc;){xe=Jc.fn,Jc=Jc.next;try{xe()}catch(qe){throw Jc?ku():Va=void 0,qe}}Va=void 0,pe&&pe.enter()},xy||ec||Ad||!Fl||!_g?!dS&&ui&&ui.resolve?((kg=ui.resolve(void 0)).constructor=ui,Py=Ho(kg.then,kg),ku=function(){Py(Qc)}):ec?ku=function(){af.nextTick(Qc)}:(Ll=Ho(Ll,$),ku=function(){Ll(Qc)}):(Xs=!0,Mg=_g.createTextNode(""),new Fl(Qc).observe(Mg,{characterData:!0}),ku=function(){Mg.data=Xs=!Xs}));var Eg=Ig||function(pe){var xe={fn:pe,next:void 0};Va&&(Va.next=xe),Jc||(Jc=xe,ku()),Va=xe},Yc=function(pe){try{return{error:!1,value:pe()}}catch(xe){return{error:!0,value:xe}}},Ay=function(){this.head=null,this.tail=null};Ay.prototype={add:function(pe){var xe={item:pe,next:null};this.head?this.tail.next=xe:this.head=xe,this.tail=xe},get:function(){var pe=this.head;if(pe)return this.head=pe.next,this.tail===pe&&(this.tail=null),pe.item}};var wu,Ny,Nd=Ay,Vs=$.Promise,Pg=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",Oy=!Pg&&!ec&&typeof window=="object"&&typeof document=="object",sf=Vs&&Vs.prototype,Ag=Co("species"),Ry=!1,cf=Ve($.PromiseRejectionEvent),pS=ta("Promise",function(){var pe=Cy(Vs),xe=pe!==String(Vs);if(!xe&&Br===66||!sf.catch||!sf.finally)return!0;if(!Br||Br<51||!/native code/.test(pe)){var qe=new Vs(function(Ie){Ie(1)}),Oe=function(Ie){Ie(function(){},function(){})};if((qe.constructor={})[Ag]=Oe,!(Ry=qe.then(function(){})instanceof Oe))return!0}return!xe&&(Oy||Pg)&&!cf}),$l={CONSTRUCTOR:pS,REJECTION_EVENT:cf,SUBCLASSING:Ry},fS=TypeError,Ng=function(pe){var xe,qe;this.promise=new pe(function(Oe,Ie){if(xe!==void 0||qe!==void 0)throw fS("Bad Promise constructor");xe=Oe,qe=Ie}),this.resolve=Xr(xe),this.reject=Xr(qe)},di={f:function(pe){return new Ng(pe)}},By=Pd.set,_u="Promise",lf=$l.CONSTRUCTOR,Ly=$l.REJECTION_EVENT,uf=vi.getterFor(_u),Od=vi.set,jl=Vs&&Vs.prototype,Cc=Vs,Xc=jl,df=$.TypeError,Rd=$.document,Bd=$.process,pf=di.f,Fy=pf,mS=!!(Rd&&Rd.createEvent&&$.dispatchEvent),$y="unhandledrejection",jy=function(pe){var xe;return!(!mr(pe)||!Ve(xe=pe.then))&&xe},ff=function(pe,xe){var qe,Oe,Ie,At=xe.value,Dt=xe.state==1,Pt=Dt?pe.ok:pe.fail,ir=pe.resolve,hr=pe.reject,xr=pe.domain;try{Pt?(Dt||(xe.rejection===2&&Uy(xe),xe.rejection=1),Pt===!0?qe=At:(xr&&xr.enter(),qe=Pt(At),xr&&(xr.exit(),Ie=!0)),qe===pe.promise?hr(df("Promise-chain cycle")):(Oe=jy(qe))?kt(Oe,qe,ir,hr):ir(qe)):hr(At)}catch(Or){xr&&!Ie&&xr.exit(),hr(Or)}},Og=function(pe,xe){pe.notified||(pe.notified=!0,Eg(function(){for(var qe,Oe=pe.reactions;qe=Oe.get();)ff(qe,pe);pe.notified=!1,xe&&!pe.rejection&&Dy(pe)}))},Rg=function(pe,xe,qe){var Oe,Ie;mS?((Oe=Rd.createEvent("Event")).promise=xe,Oe.reason=qe,Oe.initEvent(pe,!1,!0),$.dispatchEvent(Oe)):Oe={promise:xe,reason:qe},!Ly&&(Ie=$["on"+pe])?Ie(Oe):pe===$y&&function(At,Dt){var Pt=$.console;Pt&&Pt.error&&(arguments.length==1?Pt.error(At):Pt.error(At,Dt))}("Unhandled promise rejection",qe)},Dy=function(pe){kt(By,$,function(){var xe,qe=pe.facade,Oe=pe.value;if(Ld(pe)&&(xe=Yc(function(){ec?Bd.emit("unhandledRejection",Oe,qe):Rg($y,qe,Oe)}),pe.rejection=ec||Ld(pe)?2:1,xe.error))throw xe.value})},Ld=function(pe){return pe.rejection!==1&&!pe.parent},Uy=function(pe){kt(By,$,function(){var xe=pe.facade;ec?Bd.emit("rejectionHandled",xe):Rg("rejectionhandled",xe,pe.value)})},Dl=function(pe,xe,qe){return function(Oe){pe(xe,Oe,qe)}},Zc=function(pe,xe,qe){pe.done||(pe.done=!0,qe&&(pe=qe),pe.value=xe,pe.state=2,Og(pe,!0))},el=function(pe,xe,qe){if(!pe.done){pe.done=!0,qe&&(pe=qe);try{if(pe.facade===xe)throw df("Promise can't be resolved itself");var Oe=jy(xe);Oe?Eg(function(){var Ie={done:!1};try{kt(Oe,xe,Dl(el,Ie,pe),Dl(Zc,Ie,pe))}catch(At){Zc(Ie,At,pe)}}):(pe.value=xe,pe.state=1,Og(pe,!1))}catch(Ie){Zc({done:!1},Ie,pe)}}};lf&&(Xc=(Cc=function(xe){gg(this,Xc),Xr(xe),kt(wu,this);var qe=uf(this);try{xe(Dl(el,qe),Dl(Zc,qe))}catch(Oe){Zc(qe,Oe)}}).prototype,(wu=function(xe){Od(this,{type:_u,done:!1,notified:!1,parent:!1,reactions:new Nd,rejection:!1,state:0,value:void 0})}).prototype=Xi(Xc,"then",function(xe,qe){var Oe=uf(this),Ie=pf(ji(this,Cc));return Oe.parent=!0,Ie.ok=!Ve(xe)||xe,Ie.fail=Ve(qe)&&qe,Ie.domain=ec?Bd.domain:void 0,Oe.state==0?Oe.reactions.add(Ie):Eg(function(){ff(Ie,Oe)}),Ie.promise}),Ny=function(){var pe=new wu,xe=uf(pe);this.promise=pe,this.resolve=Dl(el,xe),this.reject=Dl(Zc,xe)},di.f=pf=function(pe){return pe===Cc||pe===void 0?new Ny(pe):Fy(pe)}),xn({global:!0,constructor:!0,wrap:!0,forced:lf},{Promise:Cc}),Tc(Cc,_u,!1,!0),Xp(_u);var Bg=Co("iterator"),mf=!1;try{var Vy=0,qy={next:function(){return{done:!!Vy++}},return:function(){mf=!0}};qy[Bg]=function(){return this},Array.from(qy,function(){throw 2})}catch{}var Ns=function(pe,xe){if(!xe&&!mf)return!1;var qe=!1;try{var Oe={};Oe[Bg]=function(){return{next:function(){return{done:qe=!0}}}},pe(Oe)}catch{}return qe},Lg=$l.CONSTRUCTOR||!Ns(function(pe){Vs.all(pe).then(void 0,function(){})});xn({target:"Promise",stat:!0,forced:Lg},{all:function(xe){var qe=this,Oe=di.f(qe),Ie=Oe.resolve,At=Oe.reject,Dt=Yc(function(){var Pt=Xr(qe.resolve),ir=[],hr=0,xr=1;ia(xe,function(Or){var jr=hr++,Ur=!1;xr++,kt(Pt,qe,Or).then(function(Yr){Ur||(Ur=!0,ir[jr]=Yr,--xr||Ie(ir))},At)}),--xr||Ie(ir)});return Dt.error&&At(Dt.value),Oe.promise}});var gS=$l.CONSTRUCTOR;Vs&&Vs.prototype,xn({target:"Promise",proto:!0,forced:gS,real:!0},{catch:function(pe){return this.then(void 0,pe)}}),xn({target:"Promise",stat:!0,forced:Lg},{race:function(xe){var qe=this,Oe=di.f(qe),Ie=Oe.reject,At=Yc(function(){var Dt=Xr(qe.resolve);ia(xe,function(Pt){kt(Dt,qe,Pt).then(Oe.resolve,Ie)})});return At.error&&Ie(At.value),Oe.promise}}),xn({target:"Promise",stat:!0,forced:$l.CONSTRUCTOR},{reject:function(xe){var qe=di.f(this);return kt(qe.reject,void 0,xe),qe.promise}});var gf=function(pe,xe){if(lo(pe),mr(xe)&&xe.constructor===pe)return xe;var qe=di.f(pe);return(0,qe.resolve)(xe),qe.promise},hS=$l.CONSTRUCTOR,Hy=Pr("Promise"),zy=!hS;xn({target:"Promise",stat:!0,forced:!0},{resolve:function(xe){return gf(zy&&this===Hy?Vs:this,xe)}}),xn({target:"Promise",stat:!0},{allSettled:function(xe){var qe=this,Oe=di.f(qe),Ie=Oe.resolve,At=Oe.reject,Dt=Yc(function(){var Pt=Xr(qe.resolve),ir=[],hr=0,xr=1;ia(xe,function(Or){var jr=hr++,Ur=!1;xr++,kt(Pt,qe,Or).then(function(Yr){Ur||(Ur=!0,ir[jr]={status:"fulfilled",value:Yr},--xr||Ie(ir))},function(Yr){Ur||(Ur=!0,ir[jr]={status:"rejected",reason:Yr},--xr||Ie(ir))})}),--xr||Ie(ir)});return Dt.error&&At(Dt.value),Oe.promise}});var Wy="No one promise resolved";xn({target:"Promise",stat:!0},{any:function(xe){var qe=this,Oe=Pr("AggregateError"),Ie=di.f(qe),At=Ie.resolve,Dt=Ie.reject,Pt=Yc(function(){var ir=Xr(qe.resolve),hr=[],xr=0,Or=1,jr=!1;ia(xe,function(Ur){var Yr=xr++,_n=!1;Or++,kt(ir,qe,Ur).then(function(Tn){_n||jr||(jr=!0,At(Tn))},function(Tn){_n||jr||(_n=!0,hr[Yr]=Tn,--Or||Dt(new Oe(hr,Wy)))})}),--Or||Dt(new Oe(hr,Wy))});return Pt.error&&Dt(Pt.value),Ie.promise}});var xu=Vs&&Vs.prototype,vS=!!Vs&&V(function(){xu.finally.call({then:function(){}},function(){})});xn({target:"Promise",proto:!0,real:!0,forced:vS},{finally:function(pe){var xe=ji(this,Pr("Promise")),qe=Ve(pe);return this.then(qe?function(Oe){return gf(xe,pe()).then(function(){return Oe})}:pe,qe?function(Oe){return gf(xe,pe()).then(function(){throw Oe})}:pe)}});var yS=Ne("".charAt),tc=Ne("".charCodeAt),Gy=Ne("".slice),Fd=function(pe){return function(xe,qe){var Oe,Ie,At=li(Sr(xe)),Dt=hc(qe),Pt=At.length;return Dt<0||Dt>=Pt?pe?"":void 0:(Oe=tc(At,Dt))<55296||Oe>56319||Dt+1===Pt||(Ie=tc(At,Dt+1))<56320||Ie>57343?pe?yS(At,Dt):Oe:pe?Gy(At,Dt,Dt+2):Ie-56320+(Oe-55296<<10)+65536}},Ky={codeAt:Fd(!1),charAt:Fd(!0)}.charAt,Qy="String Iterator",Fg=vi.set,bS=vi.getterFor(Qy);So(String,"String",function(pe){Fg(this,{type:Qy,string:li(pe),index:0})},function(){var xe,qe=bS(this),Oe=qe.string,Ie=qe.index;return Ie>=Oe.length?{value:void 0,done:!0}:(xe=Ky(Oe,Ie),qe.index+=xe.length,{value:xe,done:!1})});var SS=_r.Promise,Iu=Co("toStringTag");for(var $d in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var $g=$[$d],jd=$g&&$g.prototype;jd&&Nl(jd)!==Iu&&Ma(jd,Iu,$d),Ji[$d]=Ji.Array}var jg=SS;xn({target:"Promise",stat:!0,forced:!0},{try:function(pe){var xe=di.f(this),qe=Yc(pe);return(qe.error?xe.reject:xe.resolve)(qe.value),xe.promise}});var ca=jg,Jy=Date,TS=Ne(Jy.prototype.getTime);xn({target:"Date",stat:!0},{now:function(){return TS(new Jy)}});var _s=_r.Date.now,rc=Array.isArray||function(xe){return nr(xe)=="Array"},Yy=TypeError,hf=function(pe){if(pe>9007199254740991)throw Yy("Maximum allowed index exceeded");return pe},tl=function(pe,xe,qe){var Oe=Ca(xe);Oe in pe?ja.f(pe,Oe,or(0,qe)):pe[Oe]=qe},CS=Co("species"),Dg=Array,Ug=function(pe,xe){return new(function(qe){var Oe;return rc(qe)&&(Oe=qe.constructor,(Cu(Oe)&&(Oe===Dg||rc(Oe.prototype))||mr(Oe)&&(Oe=Oe[CS])===null)&&(Oe=void 0)),Oe===void 0?Dg:Oe}(pe))(xe===0?0:xe)},Eu=Co("species"),nc=function(pe){return Br>=51||!V(function(){var xe=[];return(xe.constructor={})[Eu]=function(){return{foo:1}},xe[pe](Boolean).foo!==1})},vf=Co("isConcatSpreadable"),Xy=Br>=51||!V(function(){var pe=[];return pe[vf]=!1,pe.concat()[0]!==pe}),Zy=nc("concat"),MS=function(pe){if(!mr(pe))return!1;var xe=pe[vf];return xe!==void 0?!!xe:rc(pe)};xn({target:"Array",proto:!0,arity:1,forced:!Xy||!Zy},{concat:function(xe){var qe,Oe,Ie,At,Dt,Pt=Pn(this),ir=Ug(Pt,0),hr=0;for(qe=-1,Ie=arguments.length;qe<Ie;qe++)if(MS(Dt=qe===-1?Pt:arguments[qe]))for(At=ns(Dt),hf(hr+At),Oe=0;Oe<At;Oe++,hr++)Oe in Dt&&tl(ir,hr,Dt[Oe]);else hf(hr+1),tl(ir,hr++,Dt);return ir.length=hr,ir}});var eb=da("Array").concat,yf=Array.prototype,qs=function(pe){var xe=pe.concat;return pe===yf||sr(yf,pe)&&xe===yf.concat?eb:xe},kS=/MSIE .\./.test(Ir),Vg=$.Function,tb=function(pe){return kS?function(xe,qe){var Oe=bg(arguments.length,1)>2,Ie=Ve(xe)?xe:Vg(xe),At=Oe?Us(arguments,2):void 0;return pe(Oe?function(){ue(Ie,this,At)}:Ie,qe)}:pe},rb={setTimeout:tb($.setTimeout),setInterval:tb($.setInterval)},nb=rb.setInterval;xn({global:!0,bind:!0,forced:$.setInterval!==nb},{setInterval:nb});var qg=rb.setTimeout;xn({global:!0,bind:!0,forced:$.setTimeout!==qg},{setTimeout:qg});var Di=_r.setTimeout,Hg=g(function(pe){var xe=Object.prototype.hasOwnProperty,qe="~";function Oe(){}function Ie(ir,hr,xr){this.fn=ir,this.context=hr,this.once=xr||!1}function At(ir,hr,xr,Or,jr){if(typeof xr!="function")throw new TypeError("The listener must be a function");var Ur=new Ie(xr,Or||ir,jr),Yr=qe?qe+hr:hr;return ir._events[Yr]?ir._events[Yr].fn?ir._events[Yr]=[ir._events[Yr],Ur]:ir._events[Yr].push(Ur):(ir._events[Yr]=Ur,ir._eventsCount++),ir}function Dt(ir,hr){--ir._eventsCount==0?ir._events=new Oe:delete ir._events[hr]}function Pt(){this._events=new Oe,this._eventsCount=0}Object.create&&(Oe.prototype=Object.create(null),new Oe().__proto__||(qe=!1)),Pt.prototype.eventNames=function(){var hr,xr,Or=[];if(this._eventsCount===0)return Or;for(xr in hr=this._events)xe.call(hr,xr)&&Or.push(qe?xr.slice(1):xr);return Object.getOwnPropertySymbols?Or.concat(Object.getOwnPropertySymbols(hr)):Or},Pt.prototype.listeners=function(hr){var xr=qe?qe+hr:hr,Or=this._events[xr];if(!Or)return[];if(Or.fn)return[Or.fn];for(var jr=0,Ur=Or.length,Yr=new Array(Ur);jr<Ur;jr++)Yr[jr]=Or[jr].fn;return Yr},Pt.prototype.listenerCount=function(hr){var xr=qe?qe+hr:hr,Or=this._events[xr];return Or?Or.fn?1:Or.length:0},Pt.prototype.emit=function(hr,xr,Or,jr,Ur,Yr){var _n=qe?qe+hr:hr;if(!this._events[_n])return!1;var Tn,Dn,zn=this._events[_n],Jn=arguments.length;if(zn.fn){switch(zn.once&&this.removeListener(hr,zn.fn,void 0,!0),Jn){case 1:return zn.fn.call(zn.context),!0;case 2:return zn.fn.call(zn.context,xr),!0;case 3:return zn.fn.call(zn.context,xr,Or),!0;case 4:return zn.fn.call(zn.context,xr,Or,jr),!0;case 5:return zn.fn.call(zn.context,xr,Or,jr,Ur),!0;case 6:return zn.fn.call(zn.context,xr,Or,jr,Ur,Yr),!0}for(Dn=1,Tn=new Array(Jn-1);Dn<Jn;Dn++)Tn[Dn-1]=arguments[Dn];zn.fn.apply(zn.context,Tn)}else{var $n,vo=zn.length;for(Dn=0;Dn<vo;Dn++)switch(zn[Dn].once&&this.removeListener(hr,zn[Dn].fn,void 0,!0),Jn){case 1:zn[Dn].fn.call(zn[Dn].context);break;case 2:zn[Dn].fn.call(zn[Dn].context,xr);break;case 3:zn[Dn].fn.call(zn[Dn].context,xr,Or);break;case 4:zn[Dn].fn.call(zn[Dn].context,xr,Or,jr);break;default:if(!Tn)for($n=1,Tn=new Array(Jn-1);$n<Jn;$n++)Tn[$n-1]=arguments[$n];zn[Dn].fn.apply(zn[Dn].context,Tn)}}return!0},Pt.prototype.on=function(hr,xr,Or){return At(this,hr,xr,Or,!1)},Pt.prototype.once=function(hr,xr,Or){return At(this,hr,xr,Or,!0)},Pt.prototype.removeListener=function(hr,xr,Or,jr){var Ur=qe?qe+hr:hr;if(!this._events[Ur])return this;if(!xr)return Dt(this,Ur),this;var Yr=this._events[Ur];if(Yr.fn)Yr.fn!==xr||jr&&!Yr.once||Or&&Yr.context!==Or||Dt(this,Ur);else{for(var _n=0,Tn=[],Dn=Yr.length;_n<Dn;_n++)(Yr[_n].fn!==xr||jr&&!Yr[_n].once||Or&&Yr[_n].context!==Or)&&Tn.push(Yr[_n]);Tn.length?this._events[Ur]=Tn.length===1?Tn[0]:Tn:Dt(this,Ur)}return this},Pt.prototype.removeAllListeners=function(hr){var xr;return hr?(xr=qe?qe+hr:hr,this._events[xr]&&Dt(this,xr)):(this._events=new Oe,this._eventsCount=0),this},Pt.prototype.off=Pt.prototype.removeListener,Pt.prototype.addListener=Pt.prototype.on,Pt.prefixed=qe,Pt.EventEmitter=Pt,pe.exports=Pt});xn({global:!0},{globalThis:$});var ob=ja.f;xn({target:"Object",stat:!0,forced:Object.defineProperty!==ob,sham:!ze},{defineProperty:ob});var ab=g(function(pe){var xe=_r.Object,qe=pe.exports=function(Ie,At,Dt){return xe.defineProperty(Ie,At,Dt)};xe.defineProperty.sham&&(qe.sham=!0)}),Dd=ab,zg=Ne([].push),rl=function(pe){var xe=pe==1,qe=pe==2,Oe=pe==3,Ie=pe==4,At=pe==6,Dt=pe==7,Pt=pe==5||At;return function(ir,hr,xr,Or){for(var jr,Ur,Yr=Pn(ir),_n=gr(Yr),Tn=Ho(hr,xr),Dn=ns(_n),zn=0,Jn=Or||Ug,$n=xe?Jn(ir,Dn):qe||Dt?Jn(ir,0):void 0;Dn>zn;zn++)if((Pt||zn in _n)&&(Ur=Tn(jr=_n[zn],zn,Yr),pe))if(xe)$n[zn]=Ur;else if(Ur)switch(pe){case 3:return!0;case 5:return jr;case 6:return zn;case 2:zg($n,jr)}else switch(pe){case 4:return!1;case 7:zg($n,jr)}return At?-1:Oe||Ie?Ie:$n}},Mc={forEach:rl(0),map:rl(1),filter:rl(2),some:rl(3),every:rl(4),find:rl(5),findIndex:rl(6),filterReject:rl(7)},Ul=function(pe,xe){var qe=[][pe];return!!qe&&V(function(){qe.call(null,xe||function(){return 1},1)})},wS=Mc.forEach,sb=Ul("forEach")?[].forEach:function(xe){return wS(this,xe,arguments.length>1?arguments[1]:void 0)};xn({target:"Array",proto:!0,forced:[].forEach!=sb},{forEach:sb});var ka=da("Array").forEach,bf=Array.prototype,_S={DOMTokenList:!0,NodeList:!0},To=function(pe){var xe=pe.forEach;return pe===bf||sr(bf,pe)&&xe===bf.forEach||Rn(_S,Nl(pe))?ka:xe},xS=V(function(){Ds(1)});xn({target:"Object",stat:!0,forced:xS},{keys:function(xe){return Ds(Pn(xe))}});var Sa=_r.Object.keys,ib=Mc.filter,IS=nc("filter");xn({target:"Array",proto:!0,forced:!IS},{filter:function(xe){return ib(this,xe,arguments.length>1?arguments[1]:void 0)}});var ES=da("Array").filter,Wg=Array.prototype,pi=function(pe){var xe=pe.filter;return pe===Wg||sr(Wg,pe)&&xe===Wg.filter?ES:xe},Gg=nc("slice"),Os=Co("species"),Kg=Array,PS=Math.max;xn({target:"Array",proto:!0,forced:!Gg},{slice:function(xe,qe){var Oe,Ie,At,Dt=wr(this),Pt=ns(Dt),ir=Ri(xe,Pt),hr=Ri(qe===void 0?Pt:qe,Pt);if(rc(Dt)&&(Oe=Dt.constructor,(Cu(Oe)&&(Oe===Kg||rc(Oe.prototype))||mr(Oe)&&(Oe=Oe[Os])===null)&&(Oe=void 0),Oe===Kg||Oe===void 0))return Us(Dt,ir,hr);for(Ie=new(Oe===void 0?Kg:Oe)(PS(hr-ir,0)),At=0;ir<hr;ir++,At++)ir in Dt&&tl(Ie,At,Dt[ir]);return Ie.length=At,Ie}});var cb=da("Array").slice,Sf=Array.prototype,qa=function(pe){var xe=pe.slice;return pe===Sf||sr(Sf,pe)&&xe===Sf.slice?cb:xe},lb=g(function(pe,xe){pe.exports=function(){function qe(ir,hr){if(!(ir instanceof hr))throw new TypeError("Cannot call a class as a function")}function Oe(ir,hr){for(var xr=0;xr<hr.length;xr++){var Or=hr[xr];Or.enumerable=Or.enumerable||!1,Or.configurable=!0,"value"in Or&&(Or.writable=!0),Dd(ir,Or.key,Or)}}function Ie(ir,hr,xr){return hr&&Oe(ir.prototype,hr),xr&&Oe(ir,xr),Dd(ir,"prototype",{writable:!1}),ir}var At={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},Dt=function(){},Pt=function(){function ir(hr){qe(this,ir),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=At,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=_s(),this.timer=null,this.setConfig(hr),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}return Ie(ir,[{key:"setConfig",value:function(xr){var Or=Hn({},this.reportConfig.common,xr.common);this.reportConfig=Hn({},this.reportConfig,xr),this.reportConfig.common=Or,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(xr,Or){var jr=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(xr,Hn({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Or)).catch(function(Ur){var Yr,_n;(_n=(Yr=jr.reportConfig)===null||Yr===void 0?void 0:Yr.logger)===null||_n===void 0||_n.warn("Reporter immediately upload failed",Ur)})}},{key:"report",value:function(xr,Or){var jr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(jr.priority||(jr.priority=this.getEventPriority(xr,Or)),this.reportConfig.isDataReportEnable&&xr){var Ur=_s();jr.priority==="HIGH"?this.highPriorityMsgList.push({module:xr,msg:Or,createTime:Ur}):jr.priority==="NORMAL"?this.msgList.push({module:xr,msg:Or,createTime:Ur}):jr.priority==="LOW"&&this.lowPriorityMsgList.push({module:xr,msg:Or,createTime:Ur}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(xr,Or){if(this.reportConfig.isDataReportEnable&&xr&&!this.traceMsgCache[xr]){var jr=Hn(Hn({start_time:_s()},Or),{extension:[]});this.traceMsgCache[xr]=jr}}},{key:"reportTraceUpdate",value:function(xr){}},{key:"reportTraceUpdateV2",value:function(xr,Or,jr){var Ur,Yr=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[xr]){var _n=this.traceMsgCache[xr].extension,Tn=_n.length,Dn=new Date().getTime();Tn===0?Or.duration=Dn-this.traceMsgCache[xr].start_time:_n[Tn-1].end_time?Or.duration=Dn-_n[Tn-1].end_time:Or.duration=Dn-this.traceMsgCache[xr].start_time,_n.push(Hn({end_time:Dn},Or));var zn=_n.length-1;jr!=null&&jr.asyncParams&&((Ur=this.traceMsgCache[xr]).asyncPromiseArray||(Ur.asyncPromiseArray=[]),this.traceMsgCache[xr].asyncPromiseArray.push(jr.asyncParams.then(function(Jn){Yr.traceMsgCache[xr]&&Yr.traceMsgCache[xr].extension[zn]&&Hn(Yr.traceMsgCache[xr].extension[zn],Jn)})))}}},{key:"reportTraceEnd",value:function(xr){var Or,jr=this,Ur=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[xr])if(xr!=="nos"||Ur===!1)if(typeof Ur=="boolean"?this.traceMsgCache[xr].succeed=!!Ur:this.traceMsgCache[xr].state=Ur,this.traceMsgCache[xr].duration=_s()-this.traceMsgCache[xr].start_time,To(Or=this.traceMsgCache[xr].extension).call(Or,function(Tn){delete Tn.end_time}),this.traceMsgCache[xr].asyncPromiseArray){var Yr=this.traceMsgCache[xr],_n=function(){Yr===jr.traceMsgCache[xr]&&(delete jr.traceMsgCache[xr].asyncPromiseArray,jr.report(xr,jr.traceMsgCache[xr],{priority:jr.getEventPriority(xr,jr.traceMsgCache[xr])}),jr.traceMsgCache[xr]=null)};ca.all(this.traceMsgCache[xr].asyncPromiseArray).then(_n).catch(_n)}else this.report(xr,this.traceMsgCache[xr],{priority:this.getEventPriority(xr,this.traceMsgCache[xr])}),this.traceMsgCache[xr]=null;else this.traceMsgCache[xr]=null}},{key:"getEventPriority",value:function(xr,Or){if(xr==="exceptions"){if(Or.action===0||Or.action===2||Or.action===1&&Or.exception_service!==0)return"HIGH"}else if(xr==="msgReceive"||xr==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(xr){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[xr]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var xr,Or=this;this.reportConfig.isDataReportEnable&&(To(xr=Sa(this.traceMsgCache)).call(xr,function(jr){Or.reportTraceEnd(jr,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=Dt,this.report=Dt,this.reportTraceStart=Dt,this.reportTraceUpdate=Dt,this.reportTraceEnd=Dt,this.pause=Dt,this.restore=Dt,this.destroy=Dt,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var xr,Or,jr=this;if(!this.loading){this.loading=!0;var Ur=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:Ur.dev_id,sdkVer:Ur.sdk_ver,platform:Ur.platform,appkey:Ur.app_key},timeout:this.reportConfig.timeout}).then(function(Yr){var _n,Tn;if(!jr.isDestroyed){if(Yr.status===200&&Yr.data&&Yr.data.code===200){var Dn=Yr.data.data||{};jr.reportConfig.maxSize=Dn.maxSize>1e3?1e3:Dn.maxSize,jr.reportConfig.maxInterval=Dn.maxInterval>1e4?1e4:Dn.maxInterval,jr.reportConfig.maxInterval=Dn.maxInterval<10?10:Dn.maxInterval,jr.reportConfig.minInterval=Dn.minInterval<2?2:Dn.minInterval,jr.reportConfig.maxDelay=Dn.maxDelay||300,jr.reportConfig.maxInterval=1e3*jr.reportConfig.maxInterval,jr.reportConfig.minInterval=1e3*jr.reportConfig.minInterval,jr.reportConfig.maxDelay=1e3*jr.reportConfig.maxDelay,jr.isUploadEnable=!0,jr.initConfigLoaded=!0,jr.loading=!1,jr.reportHeartBeat()}(Tn=(_n=jr.reportConfig)===null||_n===void 0?void 0:_n.logger)===null||Tn===void 0||Tn.log("Get reporter upload config success")}}).catch(function(Yr){var _n,Tn;jr.loading=!1,(Tn=(_n=jr.reportConfig)===null||_n===void 0?void 0:_n.logger)===null||Tn===void 0||Tn.error("Get reporter upload config failed",Yr)})}catch(Yr){this.loading=!1,(Or=(xr=this.reportConfig)===null||xr===void 0?void 0:xr.logger)===null||Or===void 0||Or.error("Exec reporter request failed",Yr)}}}},{key:"reportHeartBeat",value:function(){var xr=this;this.isDestroyed||(this.timer=Di(function(){xr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var xr=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;_s()-this.lastReportTime>=xr&&this.upload()}}},{key:"getUploadMsg",value:function(){var xr,Or,jr,Ur,Yr,_n,Tn=this,Dn={},zn=_s();this.highPriorityMsgList=pi(xr=this.highPriorityMsgList).call(xr,function(Nn){return zn-Nn.createTime<Tn.reportConfig.maxDelay}),this.msgList=pi(Or=this.msgList).call(Or,function(Nn){return zn-Nn.createTime<Tn.reportConfig.maxDelay}),this.lowPriorityMsgList=pi(jr=this.lowPriorityMsgList).call(jr,function(Nn){return zn-Nn.createTime<Tn.reportConfig.maxDelay}),this.cacheMsgList=pi(Ur=this.cacheMsgList).call(Ur,function(Nn){return zn-Nn.createTime<Tn.reportConfig.maxDelay});var Jn=qa(Yr=this.highPriorityMsgList).call(Yr,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=qa(_n=this.highPriorityMsgList).call(_n,Jn.length),Jn.length<this.reportConfig.maxSize){var $n,vo,Fo=this.reportConfig.maxSize-Jn.length;Jn=qs(Jn).call(Jn,qa($n=this.msgList).call($n,0,Fo)),this.msgList=qa(vo=this.msgList).call(vo,Fo)}if(Jn.length<this.reportConfig.maxSize){var qo,Bn,zr=this.reportConfig.maxSize-Jn.length;Jn=qs(Jn).call(Jn,qa(qo=this.lowPriorityMsgList).call(qo,0,zr)),this.lowPriorityMsgList=qa(Bn=this.lowPriorityMsgList).call(Bn,zr)}if(Jn.length<this.reportConfig.maxSize){var Zn,eo,qn=this.reportConfig.maxSize-Jn.length;Jn=qs(Jn).call(Jn,qa(Zn=this.cacheMsgList).call(Zn,0,qn)),this.cacheMsgList=qa(eo=this.cacheMsgList).call(eo,qn)}return To(Jn).call(Jn,function(Nn){Dn[Nn.module]?Dn[Nn.module].push(Nn.msg):Dn[Nn.module]=[Nn.msg]}),{uploadMsgArr:Jn,uploadMsg:Dn}}},{key:"upload",value:function(){var xr,Or,jr=this;if(this.isUploadEnable&&!(this.lastReportTime&&_s()-this.lastReportTime<this.reportConfig.minInterval)){var Ur=this.getUploadMsg(),Yr=Ur.uploadMsgArr,_n=Ur.uploadMsg;if(Yr.length){this.lastReportTime=_s();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:_n},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(Tn){var Dn,zn,Jn,$n;jr.cacheMsgList=qa(Dn=qs(zn=jr.cacheMsgList).call(zn,Yr)).call(Dn,0,jr.reportConfig.cacheMaxSize),($n=(Jn=jr.reportConfig)===null||Jn===void 0?void 0:Jn.logger)===null||$n===void 0||$n.warn("Reporter upload failed",Tn)})}catch(Tn){(Or=(xr=this.reportConfig)===null||xr===void 0?void 0:xr.logger)===null||Or===void 0||Or.warn("Exec reporter request failed",Tn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),ir}();return Pt}()}),yi=Array,Tf=Math.max,Cf=function(pe,xe,qe){for(var Oe=ns(pe),Ie=Ri(xe,Oe),At=Ri(qe===void 0?Oe:qe,Oe),Dt=yi(Tf(At-Ie,0)),Pt=0;Ie<At;Ie++,Pt++)tl(Dt,Pt,pe[Ie]);return Dt.length=Pt,Dt},ub=yu.f,Pu=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Qg={f:function(xe){return Pu&&nr(xe)=="Window"?function(qe){try{return ub(qe)}catch{return Cf(Pu)}}(xe):ub(wr(xe))}},oc={f:Co},Mf=ja.f,as=function(pe){var xe=_r.Symbol||(_r.Symbol={});Rn(xe,pe)||Mf(xe,pe,{value:oc.f(pe)})},db=function(){var pe=Pr("Symbol"),xe=pe&&pe.prototype,qe=xe&&xe.valueOf,Oe=Co("toPrimitive");xe&&!xe[Oe]&&Xi(xe,Oe,function(Ie){return kt(qe,this)},{arity:1})},kf=Mc.forEach,Zs=El("hidden"),wf="Symbol",pb=vi.set,Jg=vi.getterFor(wf),bi=Object.prototype,nl=$.Symbol,Ud=nl&&nl.prototype,AS=$.TypeError,Yg=$.QObject,va=$a.f,ol=ja.f,fb=Qg.f,Xg=tr.f,Zg=Ne([].push),ac=Un("symbols"),Vl=Un("op-symbols"),eh=Un("wks"),th=!Yg||!Yg.prototype||!Yg.prototype.findChild,Za=ze&&V(function(){return os(ol({},"a",{get:function(){return ol(this,"a",{value:7}).a}})).a!=7})?function(pe,xe,qe){var Oe=va(bi,xe);Oe&&delete bi[xe],ol(pe,xe,qe),Oe&&pe!==bi&&ol(bi,xe,Oe)}:ol,_f=function(pe,xe){var qe=ac[pe]=os(Ud);return pb(qe,{type:wf,tag:pe,description:xe}),ze||(qe.description=xe),qe},ql=function(xe,qe,Oe){xe===bi&&ql(Vl,qe,Oe),lo(xe);var Ie=Ca(qe);return lo(Oe),Rn(ac,Ie)?(Oe.enumerable?(Rn(xe,Zs)&&xe[Zs][Ie]&&(xe[Zs][Ie]=!1),Oe=os(Oe,{enumerable:or(0,!1)})):(Rn(xe,Zs)||ol(xe,Zs,or(1,{})),xe[Zs][Ie]=!0),Za(xe,Ie,Oe)):ol(xe,Ie,Oe)},Rs=function(xe,qe){lo(xe);var Oe=wr(qe),Ie=Ds(Oe).concat(Si(Oe));return kf(Ie,function(At){ze&&!kt(Vd,Oe,At)||ql(xe,At,Oe[At])}),xe},Vd=function(xe){var qe=Ca(xe),Oe=kt(Xg,this,qe);return!(this===bi&&Rn(ac,qe)&&!Rn(Vl,qe))&&(!(Oe||!Rn(this,qe)||!Rn(ac,qe)||Rn(this,Zs)&&this[Zs][qe])||Oe)},mb=function(xe,qe){var Oe=wr(xe),Ie=Ca(qe);if(Oe!==bi||!Rn(ac,Ie)||Rn(Vl,Ie)){var At=va(Oe,Ie);return!At||!Rn(ac,Ie)||Rn(Oe,Zs)&&Oe[Zs][Ie]||(At.enumerable=!0),At}},rh=function(xe){var qe=fb(wr(xe)),Oe=[];return kf(qe,function(Ie){Rn(ac,Ie)||Rn(Bi,Ie)||Zg(Oe,Ie)}),Oe},Si=function(pe){var xe=pe===bi,qe=fb(xe?Vl:wr(pe)),Oe=[];return kf(qe,function(Ie){!Rn(ac,Ie)||xe&&!Rn(bi,Ie)||Zg(Oe,ac[Ie])}),Oe};Lr||(nl=function(){if(sr(Ud,this))throw AS("Symbol is not a constructor");var xe=arguments.length&&arguments[0]!==void 0?li(arguments[0]):void 0,qe=Eo(xe),Oe=function(Ie){this===bi&&kt(Oe,Vl,Ie),Rn(this,Zs)&&Rn(this[Zs],qe)&&(this[Zs][qe]=!1),Za(this,qe,or(1,Ie))};return ze&&th&&Za(bi,qe,{configurable:!0,set:Oe}),_f(qe,xe)},Ud=nl.prototype,Xi(Ud,"toString",function(){return Jg(this).tag}),Xi(nl,"withoutSetter",function(pe){return _f(Eo(pe),pe)}),tr.f=Vd,ja.f=ql,Hm.f=Rs,$a.f=mb,yu.f=Qg.f=rh,yc.f=Si,oc.f=function(pe){return _f(Co(pe),pe)},ze&&ol(Ud,"description",{configurable:!0,get:function(){return Jg(this).description}})),xn({global:!0,constructor:!0,wrap:!0,forced:!Lr,sham:!Lr},{Symbol:nl}),kf(Ds(eh),function(pe){as(pe)}),xn({target:wf,stat:!0,forced:!Lr},{useSetter:function(){th=!0},useSimple:function(){th=!1}}),xn({target:"Object",stat:!0,forced:!Lr,sham:!ze},{create:function(xe,qe){return qe===void 0?os(xe):Rs(os(xe),qe)},defineProperty:ql,defineProperties:Rs,getOwnPropertyDescriptor:mb}),xn({target:"Object",stat:!0,forced:!Lr},{getOwnPropertyNames:rh}),db(),Tc(nl,wf),Bi[Zs]=!0;var al=Lr&&!!Symbol.for&&!!Symbol.keyFor,Hl=Un("string-to-symbol-registry"),NS=Un("symbol-to-string-registry");xn({target:"Symbol",stat:!0,forced:!al},{for:function(pe){var xe=li(pe);if(Rn(Hl,xe))return Hl[xe];var qe=Pr("Symbol")(xe);return Hl[xe]=qe,NS[qe]=xe,qe}});var xf=Un("symbol-to-string-registry");xn({target:"Symbol",stat:!0,forced:!al},{keyFor:function(xe){if(!Vr(xe))throw TypeError(Sn(xe)+" is not a symbol");if(Rn(xf,xe))return xf[xe]}});var kc=Pr("JSON","stringify"),Ui=Ne(/./.exec),nh=Ne("".charAt),OS=Ne("".charCodeAt),gb=Ne("".replace),wc=Ne(1 .toString),qd=/[\uD800-\uDFFF]/g,hb=/^[\uD800-\uDBFF]$/,If=/^[\uDC00-\uDFFF]$/,Ef=!Lr||V(function(){var pe=Pr("Symbol")();return kc([pe])!="[null]"||kc({a:pe})!="{}"||kc(Object(pe))!="{}"}),Pf=V(function(){return kc("\uDF06\uD834")!=='"\\udf06\\ud834"'||kc("\uDEAD")!=='"\\udead"'}),Af=function(pe,xe){var qe=Us(arguments),Oe=xe;if((mr(xe)||pe!==void 0)&&!Vr(pe))return rc(xe)||(xe=function(Ie,At){if(Ve(Oe)&&(At=kt(Oe,this,Ie,At)),!Vr(At))return At}),qe[1]=xe,ue(kc,null,qe)},oh=function(pe,xe,qe){var Oe=nh(qe,xe-1),Ie=nh(qe,xe+1);return Ui(hb,pe)&&!Ui(If,Ie)||Ui(If,pe)&&!Ui(hb,Oe)?"\\u"+wc(OS(pe,0),16):pe};kc&&xn({target:"JSON",stat:!0,arity:3,forced:Ef||Pf},{stringify:function(xe,qe,Oe){var Ie=Us(arguments),At=ue(Ef?Af:kc,null,Ie);return Pf&&typeof At=="string"?gb(At,qd,oh):At}});var vb=!Lr||V(function(){yc.f(1)});xn({target:"Object",stat:!0,forced:vb},{getOwnPropertySymbols:function(xe){var qe=yc.f;return qe?qe(Pn(xe)):[]}}),as("asyncIterator"),as("hasInstance"),as("isConcatSpreadable"),as("iterator"),as("match"),as("matchAll"),as("replace"),as("search"),as("species"),as("split"),as("toPrimitive"),db(),as("toStringTag"),Tc(Pr("Symbol"),"Symbol"),as("unscopables"),Tc($.JSON,"JSON",!0);var yb=_r.Symbol;as("asyncDispose"),as("dispose"),as("matcher"),as("metadataKey"),as("observable"),as("metadata"),as("patternMatch"),as("replaceAll");var Hs=yb,ah=oc.f("iterator"),bb=g(function(pe){function xe(qe){return pe.exports=xe=typeof Hs=="function"&&typeof ah=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Hs=="function"&&Oe.constructor===Hs&&Oe!==Hs.prototype?"symbol":typeof Oe},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),sh=V(function(){Al(1)});xn({target:"Object",stat:!0,forced:sh,sham:!vu},{getPrototypeOf:function(xe){return Al(Pn(xe))}});var zl=_r.Object.getPrototypeOf,Sb=Ne([].reverse),Tb=[1,2];xn({target:"Array",proto:!0,forced:String(Tb)===String(Tb.reverse())},{reverse:function(){return rc(this)&&(this.length=this.length),Sb(this)}});var RS=da("Array").reverse,xs=Array.prototype,Hd=function(pe){var xe=pe.reverse;return pe===xs||sr(xs,pe)&&xe===xs.reverse?RS:xe},BS=g(function(pe){var xe=bb.default;function qe(){pe.exports=qe=function(){return Oe},pe.exports.__esModule=!0,pe.exports.default=pe.exports;var Oe={},Ie=Object.prototype,At=Ie.hasOwnProperty,Dt=typeof Hs=="function"?Hs:{},Pt=Dt.iterator||"@@iterator",ir=Dt.asyncIterator||"@@asyncIterator",hr=Dt.toStringTag||"@@toStringTag";function xr(qn,Nn,no){return Dd(qn,Nn,{value:no,enumerable:!0,configurable:!0,writable:!0}),qn[Nn]}try{xr({},"")}catch{xr=function(no,fo,ko){return no[fo]=ko}}function Or(qn,Nn,no,fo){var ko=Nn&&Nn.prototype instanceof Yr?Nn:Yr,_o=ii(ko.prototype),la=new zr(fo||[]);return _o._invoke=function(Go,is,Uo){var Wo="suspendedStart";return function(xa,Ki){if(Wo==="executing")throw new Error("Generator is already running");if(Wo==="completed"){if(xa==="throw")throw Ki;return eo()}for(Uo.method=xa,Uo.arg=Ki;;){var Jo=Uo.delegate;if(Jo){var Ai=Fo(Jo,Uo);if(Ai){if(Ai===Ur)continue;return Ai}}if(Uo.method==="next")Uo.sent=Uo._sent=Uo.arg;else if(Uo.method==="throw"){if(Wo==="suspendedStart")throw Wo="completed",Uo.arg;Uo.dispatchException(Uo.arg)}else Uo.method==="return"&&Uo.abrupt("return",Uo.arg);Wo="executing";var fs=jr(Go,is,Uo);if(fs.type==="normal"){if(Wo=Uo.done?"completed":"suspendedYield",fs.arg===Ur)continue;return{value:fs.arg,done:Uo.done}}fs.type==="throw"&&(Wo="completed",Uo.method="throw",Uo.arg=fs.arg)}}}(qn,no,la),_o}function jr(qn,Nn,no){try{return{type:"normal",arg:qn.call(Nn,no)}}catch(fo){return{type:"throw",arg:fo}}}Oe.wrap=Or;var Ur={};function Yr(){}function _n(){}function Tn(){}var Dn={};xr(Dn,Pt,function(){return this});var zn=zl&&zl(zl(Zn([])));zn&&zn!==Ie&&At.call(zn,Pt)&&(Dn=zn);var Jn=Tn.prototype=Yr.prototype=ii(Dn);function $n(qn){var Nn;To(Nn=["next","throw","return"]).call(Nn,function(no){xr(qn,no,function(fo){return this._invoke(no,fo)})})}function vo(qn,Nn){function no(ko,_o,la,Go){var is=jr(qn[ko],qn,_o);if(is.type!=="throw"){var Uo=is.arg,Wo=Uo.value;return Wo&&xe(Wo)=="object"&&At.call(Wo,"__await")?Nn.resolve(Wo.__await).then(function(xa){no("next",xa,la,Go)},function(xa){no("throw",xa,la,Go)}):Nn.resolve(Wo).then(function(xa){Uo.value=xa,la(Uo)},function(xa){return no("throw",xa,la,Go)})}Go(is.arg)}var fo;this._invoke=function(ko,_o){function la(){return new Nn(function(Go,is){no(ko,_o,Go,is)})}return fo=fo?fo.then(la,la):la()}}function Fo(qn,Nn){var no=qn.iterator[Nn.method];if(no===void 0){if(Nn.delegate=null,Nn.method==="throw"){if(qn.iterator.return&&(Nn.method="return",Nn.arg=void 0,Fo(qn,Nn),Nn.method==="throw"))return Ur;Nn.method="throw",Nn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ur}var fo=jr(no,qn.iterator,Nn.arg);if(fo.type==="throw")return Nn.method="throw",Nn.arg=fo.arg,Nn.delegate=null,Ur;var ko=fo.arg;return ko?ko.done?(Nn[qn.resultName]=ko.value,Nn.next=qn.nextLoc,Nn.method!=="return"&&(Nn.method="next",Nn.arg=void 0),Nn.delegate=null,Ur):ko:(Nn.method="throw",Nn.arg=new TypeError("iterator result is not an object"),Nn.delegate=null,Ur)}function qo(qn){var Nn={tryLoc:qn[0]};1 in qn&&(Nn.catchLoc=qn[1]),2 in qn&&(Nn.finallyLoc=qn[2],Nn.afterLoc=qn[3]),this.tryEntries.push(Nn)}function Bn(qn){var Nn=qn.completion||{};Nn.type="normal",delete Nn.arg,qn.completion=Nn}function zr(qn){this.tryEntries=[{tryLoc:"root"}],To(qn).call(qn,qo,this),this.reset(!0)}function Zn(qn){if(qn){var Nn=qn[Pt];if(Nn)return Nn.call(qn);if(typeof qn.next=="function")return qn;if(!isNaN(qn.length)){var no=-1,fo=function ko(){for(;++no<qn.length;)if(At.call(qn,no))return ko.value=qn[no],ko.done=!1,ko;return ko.value=void 0,ko.done=!0,ko};return fo.next=fo}}return{next:eo}}function eo(){return{value:void 0,done:!0}}return _n.prototype=Tn,xr(Jn,"constructor",Tn),xr(Tn,"constructor",_n),_n.displayName=xr(Tn,hr,"GeneratorFunction"),Oe.isGeneratorFunction=function(qn){var Nn=typeof qn=="function"&&qn.constructor;return!!Nn&&(Nn===_n||(Nn.displayName||Nn.name)==="GeneratorFunction")},Oe.mark=function(qn){return ci?ci(qn,Tn):(qn.__proto__=Tn,xr(qn,hr,"GeneratorFunction")),qn.prototype=ii(Jn),qn},Oe.awrap=function(qn){return{__await:qn}},$n(vo.prototype),xr(vo.prototype,ir,function(){return this}),Oe.AsyncIterator=vo,Oe.async=function(qn,Nn,no,fo,ko){ko===void 0&&(ko=ca);var _o=new vo(Or(qn,Nn,no,fo),ko);return Oe.isGeneratorFunction(Nn)?_o:_o.next().then(function(la){return la.done?la.value:_o.next()})},$n(Jn),xr(Jn,hr,"Generator"),xr(Jn,Pt,function(){return this}),xr(Jn,"toString",function(){return"[object Generator]"}),Oe.keys=function(qn){var Nn=[];for(var no in qn)Nn.push(no);return Hd(Nn).call(Nn),function fo(){for(;Nn.length;){var ko=Nn.pop();if(ko in qn)return fo.value=ko,fo.done=!1,fo}return fo.done=!0,fo}},Oe.values=Zn,zr.prototype={constructor:zr,reset:function(Nn){var no;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,To(no=this.tryEntries).call(no,Bn),!Nn)for(var fo in this)fo.charAt(0)==="t"&&At.call(this,fo)&&!isNaN(+qa(fo).call(fo,1))&&(this[fo]=void 0)},stop:function(){this.done=!0;var Nn=this.tryEntries[0].completion;if(Nn.type==="throw")throw Nn.arg;return this.rval},dispatchException:function(Nn){if(this.done)throw Nn;var no=this;function fo(Uo,Wo){return la.type="throw",la.arg=Nn,no.next=Uo,Wo&&(no.method="next",no.arg=void 0),!!Wo}for(var ko=this.tryEntries.length-1;ko>=0;--ko){var _o=this.tryEntries[ko],la=_o.completion;if(_o.tryLoc==="root")return fo("end");if(_o.tryLoc<=this.prev){var Go=At.call(_o,"catchLoc"),is=At.call(_o,"finallyLoc");if(Go&&is){if(this.prev<_o.catchLoc)return fo(_o.catchLoc,!0);if(this.prev<_o.finallyLoc)return fo(_o.finallyLoc)}else if(Go){if(this.prev<_o.catchLoc)return fo(_o.catchLoc,!0)}else{if(!is)throw new Error("try statement without catch or finally");if(this.prev<_o.finallyLoc)return fo(_o.finallyLoc)}}}},abrupt:function(Nn,no){for(var fo=this.tryEntries.length-1;fo>=0;--fo){var ko=this.tryEntries[fo];if(ko.tryLoc<=this.prev&&At.call(ko,"finallyLoc")&&this.prev<ko.finallyLoc){var _o=ko;break}}_o&&(Nn==="break"||Nn==="continue")&&_o.tryLoc<=no&&no<=_o.finallyLoc&&(_o=null);var la=_o?_o.completion:{};return la.type=Nn,la.arg=no,_o?(this.method="next",this.next=_o.finallyLoc,Ur):this.complete(la)},complete:function(Nn,no){if(Nn.type==="throw")throw Nn.arg;return Nn.type==="break"||Nn.type==="continue"?this.next=Nn.arg:Nn.type==="return"?(this.rval=this.arg=Nn.arg,this.method="return",this.next="end"):Nn.type==="normal"&&no&&(this.next=no),Ur},finish:function(Nn){for(var no=this.tryEntries.length-1;no>=0;--no){var fo=this.tryEntries[no];if(fo.finallyLoc===Nn)return this.complete(fo.completion,fo.afterLoc),Bn(fo),Ur}},catch:function(Nn){for(var no=this.tryEntries.length-1;no>=0;--no){var fo=this.tryEntries[no];if(fo.tryLoc===Nn){var ko=fo.completion;if(ko.type==="throw"){var _o=ko.arg;Bn(fo)}return _o}}throw new Error("illegal catch attempt")},delegateYield:function(Nn,no,fo){return this.delegate={iterator:Zn(Nn),resultName:no,nextLoc:fo},this.method==="next"&&(this.arg=void 0),Ur}},Oe}pe.exports=qe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Nf=BS(),Dr=Nf;try{regeneratorRuntime=Nf}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Nf:Function("r","regeneratorRuntime = r")(Nf)}_r.JSON||(_r.JSON={stringify:JSON.stringify});var LS=function(xe,qe,Oe){return ue(_r.JSON.stringify,null,arguments)},Ao=LS,FS=md.indexOf,zd=Ne([].indexOf),Of=!!zd&&1/zd([1],1,-0)<0,$S=Ul("indexOf");xn({target:"Array",proto:!0,forced:Of||!$S},{indexOf:function(xe){var qe=arguments.length>1?arguments[1]:void 0;return Of?zd(this,xe,qe)||0:FS(this,xe,qe)}});var Rf=da("Array").indexOf,Kr=Array.prototype,ea=function(pe){var xe=pe.indexOf;return pe===Kr||sr(Kr,pe)&&xe===Kr.indexOf?Rf:xe},Vn=`	
\v\f\r                　\u2028\u2029\uFEFF`,ei=Ne("".replace),Wd="["+Vn+"]",jS=RegExp("^"+Wd+Wd+"*"),sc=RegExp(Wd+Wd+"*$"),ti=function(pe){return function(xe){var qe=li(Sr(xe));return 1&pe&&(qe=ei(qe,jS,"")),2&pe&&(qe=ei(qe,sc,"")),qe}},ih={start:ti(1),end:ti(2),trim:ti(3)},DS=ih.trim,Gd=$.parseInt,Au=$.Symbol,Cb=Au&&Au.iterator,Mb=/^[+-]?0x/i,US=Ne(Mb.exec),ch=Gd(Vn+"08")!==8||Gd(Vn+"0x16")!==22||Cb&&!V(function(){Gd(Object(Cb))})?function(xe,qe){var Oe=DS(li(xe));return Gd(Oe,qe>>>0||(US(Mb,Oe)?16:10))}:Gd;xn({global:!0,forced:parseInt!=ch},{parseInt:ch});var ma=_r.parseInt,Vi=ih.trim,Bf=Ne("".charAt),Lf=$.parseFloat,kb=$.Symbol,Ff=kb&&kb.iterator,ri=1/Lf(Vn+"-0")!=-1/0||Ff&&!V(function(){Lf(Object(Ff))})?function(xe){var qe=Vi(li(xe)),Oe=Lf(qe);return Oe===0&&Bf(qe,0)=="-"?-0:Oe}:Lf;xn({global:!0,forced:parseFloat!=ri},{parseFloat:ri});var lh=_r.parseFloat,uh=md.includes,wb=V(function(){return!Array(1).includes()});xn({target:"Array",proto:!0,forced:wb},{includes:function(xe){return uh(this,xe,arguments.length>1?arguments[1]:void 0)}});var VS=da("Array").includes,qS=Co("match"),Wl=TypeError,HS=function(pe){if(function(xe){var qe;return mr(xe)&&((qe=xe[qS])!==void 0?!!qe:nr(xe)=="RegExp")}(pe))throw Wl("The method doesn't accept regular expressions");return pe},zS=Co("match"),WS=Ne("".indexOf);xn({target:"String",proto:!0,forced:!function(pe){var xe=/./;try{"/./"[pe](xe)}catch{try{return xe[zS]=!1,"/./"[pe](xe)}catch{}}return!1}("includes")},{includes:function(xe){return!!~WS(li(Sr(this)),li(HS(xe)),arguments.length>1?arguments[1]:void 0)}});var GS=da("String").includes,dh=Array.prototype,ph=String.prototype,Ti=function(pe){var xe=pe.includes;return pe===dh||sr(dh,pe)&&xe===dh.includes?VS:typeof pe=="string"||pe===ph||sr(ph,pe)&&xe===ph.includes?GS:xe},KS=Mc.some,Gl=Ul("some");xn({target:"Array",proto:!0,forced:!Gl},{some:function(xe){return KS(this,xe,arguments.length>1?arguments[1]:void 0)}});var Kd=da("Array").some,fh=Array.prototype,Qd=function(pe){var xe=pe.some;return pe===fh||sr(fh,pe)&&xe===fh.some?Kd:xe};function Jd(pe,xe){var qe={};for(var Oe in pe)Object.prototype.hasOwnProperty.call(pe,Oe)&&xe.indexOf(Oe)<0&&(qe[Oe]=pe[Oe]);if(pe!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ie=0;for(Oe=Object.getOwnPropertySymbols(pe);Ie<Oe.length;Ie++)xe.indexOf(Oe[Ie])<0&&Object.prototype.propertyIsEnumerable.call(pe,Oe[Ie])&&(qe[Oe[Ie]]=pe[Oe[Ie]])}return qe}function hn(pe,xe,qe,Oe){return new(qe||(qe=Promise))(function(Ie,At){function Dt(hr){try{ir(Oe.next(hr))}catch(xr){At(xr)}}function Pt(hr){try{ir(Oe.throw(hr))}catch(xr){At(xr)}}function ir(hr){hr.done?Ie(hr.value):function(Or){return Or instanceof qe?Or:new qe(function(jr){jr(Or)})}(hr.value).then(Dt,Pt)}ir((Oe=Oe.apply(pe,xe||[])).next())})}var mh=function(xe,qe){for(var Oe=-1,Ie=xe==null?0:xe.length,At=Array(Ie);++Oe<Ie;)At[Oe]=qe(xe[Oe],Oe,xe);return At},QS=function(){this.__data__=[],this.size=0},Yd=function(xe,qe){return xe===qe||xe!=xe&&qe!=qe},_c=function(xe,qe){for(var Oe=xe.length;Oe--;)if(Yd(xe[Oe][0],qe))return Oe;return-1},_b=Array.prototype.splice,JS=function(xe){var qe=this.__data__,Oe=_c(qe,xe);return!(Oe<0)&&(Oe==qe.length-1?qe.pop():_b.call(qe,Oe,1),--this.size,!0)},Xd=function(xe){var qe=this.__data__,Oe=_c(qe,xe);return Oe<0?void 0:qe[Oe][1]},$f=function(xe){return _c(this.__data__,xe)>-1},YS=function(xe,qe){var Oe=this.__data__,Ie=_c(Oe,xe);return Ie<0?(++this.size,Oe.push([xe,qe])):Oe[Ie][1]=qe,this};function Nu(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.clear();++xe<qe;){var Oe=pe[xe];this.set(Oe[0],Oe[1])}}Nu.prototype.clear=QS,Nu.prototype.delete=JS,Nu.prototype.get=Xd,Nu.prototype.has=$f,Nu.prototype.set=YS;var jf=Nu,XS=function(){this.__data__=new jf,this.size=0},ZS=function(xe){var qe=this.__data__,Oe=qe.delete(xe);return this.size=qe.size,Oe},Ou=function(xe){return this.__data__.get(xe)},Df=function(xe){return this.__data__.has(xe)},Ru=typeof e=="object"&&e&&e.Object===Object&&e,eT=typeof self=="object"&&self&&self.Object===Object&&self,qi=Ru||eT||Function("return this")(),fi=qi.Symbol,xb=Object.prototype,tT=xb.hasOwnProperty,rT=xb.toString,Zd=fi?fi.toStringTag:void 0,Bu=function(xe){var qe=tT.call(xe,Zd),Oe=xe[Zd];try{xe[Zd]=void 0;var Ie=!0}catch{}var At=rT.call(xe);return Ie&&(qe?xe[Zd]=Oe:delete xe[Zd]),At},Uf=Object.prototype.toString,gh=function(xe){return Uf.call(xe)},Ib=fi?fi.toStringTag:void 0,sl=function(xe){return xe==null?xe===void 0?"[object Undefined]":"[object Null]":Ib&&Ib in Object(xe)?Bu(xe):gh(xe)},ni=function(xe){var qe=typeof xe;return xe!=null&&(qe=="object"||qe=="function")},hh=function(xe){if(!ni(xe))return!1;var qe=sl(xe);return qe=="[object Function]"||qe=="[object GeneratorFunction]"||qe=="[object AsyncFunction]"||qe=="[object Proxy]"},vh=qi["__core-js_shared__"],Vf=function(){var pe=/[^.]+$/.exec(vh&&vh.keys&&vh.keys.IE_PROTO||"");return pe?"Symbol(src)_1."+pe:""}(),Eb=function(xe){return!!Vf&&Vf in xe},Pb=Function.prototype.toString,Kl=function(xe){if(xe!=null){try{return Pb.call(xe)}catch{}try{return xe+""}catch{}}return""},nT=/^\[object .+?Constructor\]$/,qf=Function.prototype,ep=Object.prototype,yh=qf.toString,Bs=ep.hasOwnProperty,Ls=RegExp("^"+yh.call(Bs).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oT=function(xe){return!(!ni(xe)||Eb(xe))&&(hh(xe)?Ls:nT).test(Kl(xe))},aT=function(xe,qe){return xe==null?void 0:xe[qe]},Ql=function(xe,qe){var Oe=aT(xe,qe);return oT(Oe)?Oe:void 0},Jl=Ql(qi,"Map"),Lo=Ql(Object,"create"),sT=function(){this.__data__=Lo?Lo(null):{},this.size=0},iT=function(xe){var qe=this.has(xe)&&delete this.__data__[xe];return this.size-=qe?1:0,qe},cT=Object.prototype.hasOwnProperty,lT=function(xe){var qe=this.__data__;if(Lo){var Oe=qe[xe];return Oe==="__lodash_hash_undefined__"?void 0:Oe}return cT.call(qe,xe)?qe[xe]:void 0},uT=Object.prototype.hasOwnProperty,dT=function(xe){var qe=this.__data__;return Lo?qe[xe]!==void 0:uT.call(qe,xe)},pT=function(xe,qe){var Oe=this.__data__;return this.size+=this.has(xe)?0:1,Oe[xe]=Lo&&qe===void 0?"__lodash_hash_undefined__":qe,this};function Lu(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.clear();++xe<qe;){var Oe=pe[xe];this.set(Oe[0],Oe[1])}}Lu.prototype.clear=sT,Lu.prototype.delete=iT,Lu.prototype.get=lT,Lu.prototype.has=dT,Lu.prototype.set=pT;var Ab=Lu,bh=function(){this.size=0,this.__data__={hash:new Ab,map:new(Jl||jf),string:new Ab}},Sh=function(xe){var qe=typeof xe;return qe=="string"||qe=="number"||qe=="symbol"||qe=="boolean"?xe!=="__proto__":xe===null},mi=function(xe,qe){var Oe=xe.__data__;return Sh(qe)?Oe[typeof qe=="string"?"string":"hash"]:Oe.map},fT=function(xe){var qe=mi(this,xe).delete(xe);return this.size-=qe?1:0,qe},Nb=function(xe){return mi(this,xe).get(xe)},mT=function(xe){return mi(this,xe).has(xe)},gT=function(xe,qe){var Oe=mi(this,xe),Ie=Oe.size;return Oe.set(xe,qe),this.size+=Oe.size==Ie?0:1,this};function Fu(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.clear();++xe<qe;){var Oe=pe[xe];this.set(Oe[0],Oe[1])}}Fu.prototype.clear=bh,Fu.prototype.delete=fT,Fu.prototype.get=Nb,Fu.prototype.has=mT,Fu.prototype.set=gT;var $u=Fu,Hf=function(xe,qe){var Oe=this.__data__;if(Oe instanceof jf){var Ie=Oe.__data__;if(!Jl||Ie.length<199)return Ie.push([xe,qe]),this.size=++Oe.size,this;Oe=this.__data__=new $u(Ie)}return Oe.set(xe,qe),this.size=Oe.size,this};function Yl(pe){var xe=this.__data__=new jf(pe);this.size=xe.size}Yl.prototype.clear=XS,Yl.prototype.delete=ZS,Yl.prototype.get=Ou,Yl.prototype.has=Df,Yl.prototype.set=Hf;var ju=Yl,zf=function(xe){return this.__data__.set(xe,"__lodash_hash_undefined__"),this},Th=function(xe){return this.__data__.has(xe)};function Wf(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.__data__=new $u;++xe<qe;)this.add(pe[xe])}Wf.prototype.add=Wf.prototype.push=zf,Wf.prototype.has=Th;var Gf=Wf,hT=function(xe,qe){for(var Oe=-1,Ie=xe==null?0:xe.length;++Oe<Ie;)if(qe(xe[Oe],Oe,xe))return!0;return!1},Ch=function(xe,qe){return xe.has(qe)},Ob=function(xe,qe,Oe,Ie,At,Dt){var Pt=1&Oe,ir=xe.length,hr=qe.length;if(ir!=hr&&!(Pt&&hr>ir))return!1;var xr=Dt.get(xe),Or=Dt.get(qe);if(xr&&Or)return xr==qe&&Or==xe;var jr=-1,Ur=!0,Yr=2&Oe?new Gf:void 0;for(Dt.set(xe,qe),Dt.set(qe,xe);++jr<ir;){var _n=xe[jr],Tn=qe[jr];if(Ie)var Dn=Pt?Ie(Tn,_n,jr,qe,xe,Dt):Ie(_n,Tn,jr,xe,qe,Dt);if(Dn!==void 0){if(Dn)continue;Ur=!1;break}if(Yr){if(!hT(qe,function(zn,Jn){if(!Ch(Yr,Jn)&&(_n===zn||At(_n,zn,Oe,Ie,Dt)))return Yr.push(Jn)})){Ur=!1;break}}else if(_n!==Tn&&!At(_n,Tn,Oe,Ie,Dt)){Ur=!1;break}}return Dt.delete(xe),Dt.delete(qe),Ur},Kf=qi.Uint8Array,Rb=function(xe){var qe=-1,Oe=Array(xe.size);return xe.forEach(function(Ie,At){Oe[++qe]=[At,Ie]}),Oe},Mh=function(xe){var qe=-1,Oe=Array(xe.size);return xe.forEach(function(Ie){Oe[++qe]=Ie}),Oe},kh=fi?fi.prototype:void 0,Qf=kh?kh.valueOf:void 0,wh=function(xe,qe,Oe,Ie,At,Dt,Pt){switch(Oe){case"[object DataView]":if(xe.byteLength!=qe.byteLength||xe.byteOffset!=qe.byteOffset)return!1;xe=xe.buffer,qe=qe.buffer;case"[object ArrayBuffer]":return!(xe.byteLength!=qe.byteLength||!Dt(new Kf(xe),new Kf(qe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Yd(+xe,+qe);case"[object Error]":return xe.name==qe.name&&xe.message==qe.message;case"[object RegExp]":case"[object String]":return xe==qe+"";case"[object Map]":var ir=Rb;case"[object Set]":var hr=1&Ie;if(ir||(ir=Mh),xe.size!=qe.size&&!hr)return!1;var xr=Pt.get(xe);if(xr)return xr==qe;Ie|=2,Pt.set(xe,qe);var Or=Ob(ir(xe),ir(qe),Ie,At,Dt,Pt);return Pt.delete(xe),Or;case"[object Symbol]":if(Qf)return Qf.call(xe)==Qf.call(qe)}return!1},_h=function(xe,qe){for(var Oe=-1,Ie=qe.length,At=xe.length;++Oe<Ie;)xe[At+Oe]=qe[Oe];return xe},Ci=Array.isArray,xh=function(xe,qe,Oe){var Ie=qe(xe);return Ci(xe)?Ie:_h(Ie,Oe(xe))},ic=function(xe,qe){for(var Oe=-1,Ie=xe==null?0:xe.length,At=0,Dt=[];++Oe<Ie;){var Pt=xe[Oe];qe(Pt,Oe,xe)&&(Dt[At++]=Pt)}return Dt},Bb=function(){return[]},vT=Object.prototype.propertyIsEnumerable,Lb=Object.getOwnPropertySymbols,yT=Lb?function(pe){return pe==null?[]:(pe=Object(pe),ic(Lb(pe),function(xe){return vT.call(pe,xe)}))}:Bb,Ih=yT,xc=function(xe,qe){for(var Oe=-1,Ie=Array(xe);++Oe<xe;)Ie[Oe]=qe(Oe);return Ie},Ic=function(xe){return xe!=null&&typeof xe=="object"},Fb=function(xe){return Ic(xe)&&sl(xe)=="[object Arguments]"},Jf=Object.prototype,bT=Jf.hasOwnProperty,ST=Jf.propertyIsEnumerable,$b=Fb(function(){return arguments}())?Fb:function(pe){return Ic(pe)&&bT.call(pe,"callee")&&!ST.call(pe,"callee")},Du=$b,jb=function(){return!1},Mi=g(function(pe,xe){var qe=xe&&!xe.nodeType&&xe,Oe=qe&&pe&&!pe.nodeType&&pe,Ie=Oe&&Oe.exports===qe?qi.Buffer:void 0,At=(Ie?Ie.isBuffer:void 0)||jb;pe.exports=At}),TT=/^(?:0|[1-9]\d*)$/,Yf=function(xe,qe){var Oe=typeof xe;return!!(qe=qe??9007199254740991)&&(Oe=="number"||Oe!="symbol"&&TT.test(xe))&&xe>-1&&xe%1==0&&xe<qe},Eh=function(xe){return typeof xe=="number"&&xe>-1&&xe%1==0&&xe<=9007199254740991},Ha={};Ha["[object Float32Array]"]=Ha["[object Float64Array]"]=Ha["[object Int8Array]"]=Ha["[object Int16Array]"]=Ha["[object Int32Array]"]=Ha["[object Uint8Array]"]=Ha["[object Uint8ClampedArray]"]=Ha["[object Uint16Array]"]=Ha["[object Uint32Array]"]=!0,Ha["[object Arguments]"]=Ha["[object Array]"]=Ha["[object ArrayBuffer]"]=Ha["[object Boolean]"]=Ha["[object DataView]"]=Ha["[object Date]"]=Ha["[object Error]"]=Ha["[object Function]"]=Ha["[object Map]"]=Ha["[object Number]"]=Ha["[object Object]"]=Ha["[object RegExp]"]=Ha["[object Set]"]=Ha["[object String]"]=Ha["[object WeakMap]"]=!1;var Hi=function(xe){return Ic(xe)&&Eh(xe.length)&&!!Ha[sl(xe)]},Uu=function(xe){return function(qe){return xe(qe)}},tp=g(function(pe,xe){var qe=xe&&!xe.nodeType&&xe,Oe=qe&&pe&&!pe.nodeType&&pe,Ie=Oe&&Oe.exports===qe&&Ru.process,At=function(){try{var Dt=Oe&&Oe.require&&Oe.require("util").types;return Dt||Ie&&Ie.binding&&Ie.binding("util")}catch{}}();pe.exports=At}),Xf=tp&&tp.isTypedArray,Ph=Xf?Uu(Xf):Hi,Vu=Object.prototype.hasOwnProperty,rp=function(xe,qe){var Oe=Ci(xe),Ie=!Oe&&Du(xe),At=!Oe&&!Ie&&Mi(xe),Dt=!Oe&&!Ie&&!At&&Ph(xe),Pt=Oe||Ie||At||Dt,ir=Pt?xc(xe.length,String):[],hr=ir.length;for(var xr in xe)!qe&&!Vu.call(xe,xr)||Pt&&(xr=="length"||At&&(xr=="offset"||xr=="parent")||Dt&&(xr=="buffer"||xr=="byteLength"||xr=="byteOffset")||Yf(xr,hr))||ir.push(xr);return ir},Ah=Object.prototype,Nh=function(xe){var qe=xe&&xe.constructor;return xe===(typeof qe=="function"&&qe.prototype||Ah)},Oh=function(xe,qe){return function(Oe){return xe(qe(Oe))}},il=Oh(Object.keys,Object),Ts=Object.prototype.hasOwnProperty,zs=function(xe){if(!Nh(xe))return il(xe);var qe=[];for(var Oe in Object(xe))Ts.call(xe,Oe)&&Oe!="constructor"&&qe.push(Oe);return qe},Zf=function(xe){return xe!=null&&Eh(xe.length)&&!hh(xe)},em=function(xe){return Zf(xe)?rp(xe):zs(xe)},np=function(xe){return xh(xe,em,Ih)},CT=Object.prototype.hasOwnProperty,tm=function(xe,qe,Oe,Ie,At,Dt){var Pt=1&Oe,ir=np(xe),hr=ir.length;if(hr!=np(qe).length&&!Pt)return!1;for(var xr=hr;xr--;){var Or=ir[xr];if(!(Pt?Or in qe:CT.call(qe,Or)))return!1}var jr=Dt.get(xe),Ur=Dt.get(qe);if(jr&&Ur)return jr==qe&&Ur==xe;var Yr=!0;Dt.set(xe,qe),Dt.set(qe,xe);for(var _n=Pt;++xr<hr;){var Tn=xe[Or=ir[xr]],Dn=qe[Or];if(Ie)var zn=Pt?Ie(Dn,Tn,Or,qe,xe,Dt):Ie(Tn,Dn,Or,xe,qe,Dt);if(!(zn===void 0?Tn===Dn||At(Tn,Dn,Oe,Ie,Dt):zn)){Yr=!1;break}_n||(_n=Or=="constructor")}if(Yr&&!_n){var Jn=xe.constructor,$n=qe.constructor;Jn==$n||!("constructor"in xe)||!("constructor"in qe)||typeof Jn=="function"&&Jn instanceof Jn&&typeof $n=="function"&&$n instanceof $n||(Yr=!1)}return Dt.delete(xe),Dt.delete(qe),Yr},rm=Ql(qi,"DataView"),qu=Ql(qi,"Promise"),Hu=Ql(qi,"Set"),Rh=Ql(qi,"WeakMap"),nm="[object Map]",Bh="[object Promise]",Db="[object Set]",zu="[object WeakMap]",Lh="[object DataView]",Ub=Kl(rm),Vb=Kl(Jl),MT=Kl(qu),qb=Kl(Hu),Xl=Kl(Rh),es=sl;(rm&&es(new rm(new ArrayBuffer(1)))!=Lh||Jl&&es(new Jl)!=nm||qu&&es(qu.resolve())!=Bh||Hu&&es(new Hu)!=Db||Rh&&es(new Rh)!=zu)&&(es=function(pe){var xe=sl(pe),qe=xe=="[object Object]"?pe.constructor:void 0,Oe=qe?Kl(qe):"";if(Oe)switch(Oe){case Ub:return Lh;case Vb:return nm;case MT:return Bh;case qb:return Db;case Xl:return zu}return xe});var op=es,za="[object Arguments]",ki="[object Array]",jo="[object Object]",Hb=Object.prototype.hasOwnProperty,Fh=function(xe,qe,Oe,Ie,At,Dt){var Pt=Ci(xe),ir=Ci(qe),hr=Pt?ki:op(xe),xr=ir?ki:op(qe),Or=(hr=hr==za?jo:hr)==jo,jr=(xr=xr==za?jo:xr)==jo,Ur=hr==xr;if(Ur&&Mi(xe)){if(!Mi(qe))return!1;Pt=!0,Or=!1}if(Ur&&!Or)return Dt||(Dt=new ju),Pt||Ph(xe)?Ob(xe,qe,Oe,Ie,At,Dt):wh(xe,qe,hr,Oe,Ie,At,Dt);if(!(1&Oe)){var Yr=Or&&Hb.call(xe,"__wrapped__"),_n=jr&&Hb.call(qe,"__wrapped__");if(Yr||_n){var Tn=Yr?xe.value():xe,Dn=_n?qe.value():qe;return Dt||(Dt=new ju),At(Tn,Dn,Oe,Ie,Dt)}}return!!Ur&&(Dt||(Dt=new ju),tm(xe,qe,Oe,Ie,At,Dt))},zb=function pe(xe,qe,Oe,Ie,At){return xe===qe||(xe==null||qe==null||!Ic(xe)&&!Ic(qe)?xe!=xe&&qe!=qe:Fh(xe,qe,Oe,Ie,pe,At))},om=function(xe,qe,Oe,Ie){var At=Oe.length,Dt=At,Pt=!Ie;if(xe==null)return!Dt;for(xe=Object(xe);At--;){var ir=Oe[At];if(Pt&&ir[2]?ir[1]!==xe[ir[0]]:!(ir[0]in xe))return!1}for(;++At<Dt;){var hr=(ir=Oe[At])[0],xr=xe[hr],Or=ir[1];if(Pt&&ir[2]){if(xr===void 0&&!(hr in xe))return!1}else{var jr=new ju;if(Ie)var Ur=Ie(xr,Or,hr,xe,qe,jr);if(!(Ur===void 0?zb(Or,xr,3,Ie,jr):Ur))return!1}}return!0},$h=function(xe){return xe==xe&&!ni(xe)},jh=function(xe){for(var qe=em(xe),Oe=qe.length;Oe--;){var Ie=qe[Oe],At=xe[Ie];qe[Oe]=[Ie,At,$h(At)]}return qe},Wb=function(xe,qe){return function(Oe){return Oe!=null&&Oe[xe]===qe&&(qe!==void 0||xe in Object(Oe))}},kT=function(xe){var qe=jh(xe);return qe.length==1&&qe[0][2]?Wb(qe[0][0],qe[0][1]):function(Oe){return Oe===xe||om(Oe,xe,qe)}},ap=function(xe){return typeof xe=="symbol"||Ic(xe)&&sl(xe)=="[object Symbol]"},wT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_T=/^\w*$/,Zl=function(xe,qe){if(Ci(xe))return!1;var Oe=typeof xe;return!(Oe!="number"&&Oe!="symbol"&&Oe!="boolean"&&xe!=null&&!ap(xe))||_T.test(xe)||!wT.test(xe)||qe!=null&&xe in Object(qe)};function oi(pe,xe){if(typeof pe!="function"||xe!=null&&typeof xe!="function")throw new TypeError("Expected a function");var qe=function(){var Oe=arguments,Ie=xe?xe.apply(this,Oe):Oe[0],At=qe.cache;if(At.has(Ie))return At.get(Ie);var Dt=pe.apply(this,Oe);return qe.cache=At.set(Ie,Dt)||At,Dt};return qe.cache=new(oi.Cache||$u),qe}oi.Cache=$u;var Gb=oi,xT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,am=/\\(\\)?/g,Kb=function(xe){var qe=Gb(xe,function(Ie){return Oe.size===500&&Oe.clear(),Ie}),Oe=qe.cache;return qe}(function(pe){var xe=[];return pe.charCodeAt(0)===46&&xe.push(""),pe.replace(xT,function(qe,Oe,Ie,At){xe.push(Ie?At.replace(am,"$1"):Oe||qe)}),xe}),Qb=Kb,Jb=fi?fi.prototype:void 0,Dh=Jb?Jb.toString:void 0,Yb=function pe(xe){if(typeof xe=="string")return xe;if(Ci(xe))return mh(xe,pe)+"";if(ap(xe))return Dh?Dh.call(xe):"";var qe=xe+"";return qe=="0"&&1/xe==-1/0?"-0":qe},IT=function(xe){return xe==null?"":Yb(xe)},sp=function(xe,qe){return Ci(xe)?xe:Zl(xe,qe)?[xe]:Qb(IT(xe))},Wu=function(xe){if(typeof xe=="string"||ap(xe))return xe;var qe=xe+"";return qe=="0"&&1/xe==-1/0?"-0":qe},Uh=function(xe,qe){for(var Oe=0,Ie=(qe=sp(qe,xe)).length;xe!=null&&Oe<Ie;)xe=xe[Wu(qe[Oe++])];return Oe&&Oe==Ie?xe:void 0},ds=function(xe,qe,Oe){var Ie=xe==null?void 0:Uh(xe,qe);return Ie===void 0?Oe:Ie},ET=function(xe,qe){return xe!=null&&qe in Object(xe)},ip=function(xe,qe,Oe){for(var Ie=-1,At=(qe=sp(qe,xe)).length,Dt=!1;++Ie<At;){var Pt=Wu(qe[Ie]);if(!(Dt=xe!=null&&Oe(xe,Pt)))break;xe=xe[Pt]}return Dt||++Ie!=At?Dt:!!(At=xe==null?0:xe.length)&&Eh(At)&&Yf(Pt,At)&&(Ci(xe)||Du(xe))},Xb=function(xe,qe){return xe!=null&&ip(xe,qe,ET)},cp=function(xe,qe){return Zl(xe)&&$h(qe)?Wb(Wu(xe),qe):function(Oe){var Ie=ds(Oe,xe);return Ie===void 0&&Ie===qe?Xb(Oe,xe):zb(qe,Ie,3)}},Vh=function(xe){return xe},sm=function(xe){return function(qe){return qe==null?void 0:qe[xe]}},qh=function(xe){return function(qe){return Uh(qe,xe)}},Ya=function(xe){return Zl(xe)?sm(Wu(xe)):qh(xe)},PT=function(xe){return typeof xe=="function"?xe:xe==null?Vh:typeof xe=="object"?Ci(xe)?cp(xe[0],xe[1]):kT(xe):Ya(xe)},cl=function(){try{var pe=Ql(Object,"defineProperty");return pe({},"",{}),pe}catch{}}(),cc=function(xe,qe,Oe){qe=="__proto__"&&cl?cl(xe,qe,{configurable:!0,enumerable:!0,value:Oe,writable:!0}):xe[qe]=Oe},Zb=Object.prototype.hasOwnProperty,im=function(xe,qe,Oe){var Ie=xe[qe];Zb.call(xe,qe)&&Yd(Ie,Oe)&&(Oe!==void 0||qe in xe)||cc(xe,qe,Oe)},AT=function(xe,qe,Oe,Ie){if(!ni(xe))return xe;for(var At=-1,Dt=(qe=sp(qe,xe)).length,Pt=Dt-1,ir=xe;ir!=null&&++At<Dt;){var hr=Wu(qe[At]),xr=Oe;if(hr==="__proto__"||hr==="constructor"||hr==="prototype")return xe;if(At!=Pt){var Or=ir[hr];(xr=Ie?Ie(Or,hr,ir):void 0)===void 0&&(xr=ni(Or)?Or:Yf(qe[At+1])?[]:{})}im(ir,hr,xr),ir=ir[hr]}return xe},Hh=function(xe,qe,Oe){for(var Ie=-1,At=qe.length,Dt={};++Ie<At;){var Pt=qe[Ie],ir=Uh(xe,Pt);Oe(ir,Pt)&&AT(Dt,sp(Pt,xe),ir)}return Dt},zh=Oh(Object.getPrototypeOf,Object),Wh=Object.getOwnPropertySymbols?function(pe){for(var xe=[];pe;)_h(xe,Ih(pe)),pe=zh(pe);return xe}:Bb,NT=function(xe){var qe=[];if(xe!=null)for(var Oe in Object(xe))qe.push(Oe);return qe},OT=Object.prototype.hasOwnProperty,RT=function(xe){if(!ni(xe))return NT(xe);var qe=Nh(xe),Oe=[];for(var Ie in xe)(Ie!="constructor"||!qe&&OT.call(xe,Ie))&&Oe.push(Ie);return Oe},Gu=function(xe){return Zf(xe)?rp(xe,!0):RT(xe)},Ku=function(xe){return xh(xe,Gu,Wh)},BT=function(xe,qe){if(xe==null)return{};var Oe=mh(Ku(xe),function(Ie){return[Ie]});return qe=PT(qe),Hh(xe,Oe,function(Ie,At){return qe(Ie,At[0])})},LT=da("Array").values,Gh=Array.prototype,Kh={DOMTokenList:!0,NodeList:!0},eu=function(pe){var xe=pe.values;return pe===Gh||sr(Gh,pe)&&xe===Gh.values||Rn(Kh,Nl(pe))?LT:xe};xn({target:"Array",stat:!0},{isArray:rc});var Cs=_r.Array.isArray,hs=Mc.every,FT=Ul("every");xn({target:"Array",proto:!0,forced:!FT},{every:function(xe){return hs(this,xe,arguments.length>1?arguments[1]:void 0)}});var Qh=da("Array").every,cm=Array.prototype,e0=function(pe){var xe=pe.every;return pe===cm||sr(cm,pe)&&xe===cm.every?Qh:xe},$T=function(xe){return Ic(xe)&&sl(xe)=="[object RegExp]"},t0=tp&&tp.isRegExp,jT=t0?Uu(t0):$T,DT=function(xe,qe,Oe,Ie){for(var At=xe.length,Dt=Oe+(Ie?1:-1);Ie?Dt--:++Dt<At;)if(qe(xe[Dt],Dt,xe))return Dt;return-1},UT=function(xe){return xe!=xe},Qu=function(xe,qe,Oe){for(var Ie=Oe-1,At=xe.length;++Ie<At;)if(xe[Ie]===qe)return Ie;return-1},Ju=function(xe,qe,Oe){return qe==qe?Qu(xe,qe,Oe):DT(xe,UT,Oe)},lp=function(xe,qe){return!!(xe!=null&&xe.length)&&Ju(xe,qe,0)>-1},lm=function(xe,qe,Oe){for(var Ie=-1,At=xe==null?0:xe.length;++Ie<At;)if(Oe(qe,xe[Ie]))return!0;return!1},um=function(xe,qe,Oe,Ie){var At=-1,Dt=lp,Pt=!0,ir=xe.length,hr=[],xr=qe.length;if(!ir)return hr;Oe&&(qe=mh(qe,Uu(Oe))),Ie?(Dt=lm,Pt=!1):qe.length>=200&&(Dt=Ch,Pt=!1,qe=new Gf(qe));e:for(;++At<ir;){var Or=xe[At],jr=Oe==null?Or:Oe(Or);if(Or=Ie||Or!==0?Or:0,Pt&&jr==jr){for(var Ur=xr;Ur--;)if(qe[Ur]===jr)continue e;hr.push(Or)}else Dt(qe,jr,Ie)||hr.push(Or)}return hr},r0=function(xe,qe,Oe){switch(Oe.length){case 0:return xe.call(qe);case 1:return xe.call(qe,Oe[0]);case 2:return xe.call(qe,Oe[0],Oe[1]);case 3:return xe.call(qe,Oe[0],Oe[1],Oe[2])}return xe.apply(qe,Oe)},up=Math.max,dm=function(xe,qe,Oe){return qe=up(qe===void 0?xe.length-1:qe,0),function(){for(var Ie=arguments,At=-1,Dt=up(Ie.length-qe,0),Pt=Array(Dt);++At<Dt;)Pt[At]=Ie[qe+At];At=-1;for(var ir=Array(qe+1);++At<qe;)ir[At]=Ie[At];return ir[qe]=Oe(Pt),r0(xe,this,ir)}},n0=function(xe){return function(){return xe}},o0=cl?function(pe,xe){return cl(pe,"toString",{configurable:!0,enumerable:!1,value:n0(xe),writable:!0})}:Vh,a0=Date.now,VT=function(xe){var qe=0,Oe=0;return function(){var Ie=a0(),At=16-(Ie-Oe);if(Oe=Ie,At>0){if(++qe>=800)return arguments[0]}else qe=0;return xe.apply(void 0,arguments)}},Jh=VT(o0),pm=function(xe,qe){return Jh(dm(xe,qe,Vh),xe+"")},Yu=function(xe){return Ic(xe)&&Zf(xe)},qT=pm(function(pe,xe){return Yu(pe)?um(pe,xe):[]}),Yh=qT,tu=V(function(){if(typeof ArrayBuffer=="function"){var pe=new ArrayBuffer(8);Object.isExtensible(pe)&&Object.defineProperty(pe,"a",{value:8})}}),fm=Object.isExtensible,Xh=V(function(){fm(1)})||tu?function(xe){return!!mr(xe)&&(!tu||nr(xe)!="ArrayBuffer")&&(!fm||fm(xe))}:fm,HT=!V(function(){return Object.isExtensible(Object.preventExtensions({}))}),Xu=g(function(pe){var xe=ja.f,qe=!1,Oe=Eo("meta"),Ie=0,At=function(Pt){xe(Pt,Oe,{value:{objectID:"O"+Ie++,weakData:{}}})},Dt=pe.exports={enable:function(){Dt.enable=function(){},qe=!0;var Pt=yu.f,ir=Ne([].splice),hr={};hr[Oe]=1,Pt(hr).length&&(yu.f=function(xr){for(var Or=Pt(xr),jr=0,Ur=Or.length;jr<Ur;jr++)if(Or[jr]===Oe){ir(Or,jr,1);break}return Or},xn({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Qg.f}))},fastKey:function(Pt,ir){if(!mr(Pt))return typeof Pt=="symbol"?Pt:(typeof Pt=="string"?"S":"P")+Pt;if(!Rn(Pt,Oe)){if(!Xh(Pt))return"F";if(!ir)return"E";At(Pt)}return Pt[Oe].objectID},getWeakData:function(Pt,ir){if(!Rn(Pt,Oe)){if(!Xh(Pt))return!0;if(!ir)return!1;At(Pt)}return Pt[Oe].weakData},onFreeze:function(Pt){return HT&&qe&&Xh(Pt)&&!Rn(Pt,Oe)&&At(Pt),Pt}};Bi[Oe]=!0}),zT=ja.f,WT=Mc.forEach,GT=vi.set,KT=vi.getterFor,Zh=function(pe,xe,qe){var Oe,Ie=pe.indexOf("Map")!==-1,At=pe.indexOf("Weak")!==-1,Dt=Ie?"set":"add",Pt=$[pe],ir=Pt&&Pt.prototype,hr={};if(ze&&Ve(Pt)&&(At||ir.forEach&&!V(function(){new Pt().entries().next()}))){var xr=(Oe=xe(function(jr,Ur){GT(gg(jr,xr),{type:pe,collection:new Pt}),Ur!=null&&ia(Ur,jr[Dt],{that:jr,AS_ENTRIES:Ie})})).prototype,Or=KT(pe);WT(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(jr){var Ur=jr=="add"||jr=="set";!(jr in ir)||At&&jr=="clear"||Ma(xr,jr,function(Yr,_n){var Tn=Or(this).collection;if(!Ur&&At&&!mr(Yr))return jr=="get"&&void 0;var Dn=Tn[jr](Yr===0?0:Yr,_n);return Ur?this:Dn})}),At||zT(xr,"size",{configurable:!0,get:function(){return Or(this).collection.size}})}else Oe=qe.getConstructor(xe,pe,Ie,Dt),Xu.enable();return Tc(Oe,pe,!1,!0),hr[pe]=Oe,xn({global:!0,forced:!0},hr),At||qe.setStrong(Oe,pe,Ie),Oe},ev=function(pe,xe,qe){for(var Oe in xe)qe&&qe.unsafe&&pe[Oe]?pe[Oe]=xe[Oe]:Xi(pe,Oe,xe[Oe],qe);return pe},QT=ja.f,s0=Xu.fastKey,i0=vi.set,mm=vi.getterFor,tv={getConstructor:function(pe,xe,qe,Oe){var Ie=pe(function(hr,xr){gg(hr,At),i0(hr,{type:xe,index:os(null),first:void 0,last:void 0,size:0}),ze||(hr.size=0),pr(xr)||ia(xr,hr[Oe],{that:hr,AS_ENTRIES:qe})}),At=Ie.prototype,Dt=mm(xe),Pt=function(hr,xr,Or){var jr,Ur,Yr=Dt(hr),_n=ir(hr,xr);return _n?_n.value=Or:(Yr.last=_n={index:Ur=s0(xr,!0),key:xr,value:Or,previous:jr=Yr.last,next:void 0,removed:!1},Yr.first||(Yr.first=_n),jr&&(jr.next=_n),ze?Yr.size++:hr.size++,Ur!=="F"&&(Yr.index[Ur]=_n)),hr},ir=function(hr,xr){var Or,jr=Dt(hr),Ur=s0(xr);if(Ur!=="F")return jr.index[Ur];for(Or=jr.first;Or;Or=Or.next)if(Or.key==xr)return Or};return ev(At,{clear:function(){for(var xr=Dt(this),Or=xr.index,jr=xr.first;jr;)jr.removed=!0,jr.previous&&(jr.previous=jr.previous.next=void 0),delete Or[jr.index],jr=jr.next;xr.first=xr.last=void 0,ze?xr.size=0:this.size=0},delete:function(hr){var xr=this,Or=Dt(xr),jr=ir(xr,hr);if(jr){var Ur=jr.next,Yr=jr.previous;delete Or.index[jr.index],jr.removed=!0,Yr&&(Yr.next=Ur),Ur&&(Ur.previous=Yr),Or.first==jr&&(Or.first=Ur),Or.last==jr&&(Or.last=Yr),ze?Or.size--:xr.size--}return!!jr},forEach:function(xr){for(var Or,jr=Dt(this),Ur=Ho(xr,arguments.length>1?arguments[1]:void 0);Or=Or?Or.next:jr.first;)for(Ur(Or.value,Or.key,this);Or&&Or.removed;)Or=Or.previous},has:function(xr){return!!ir(this,xr)}}),ev(At,qe?{get:function(xr){var Or=ir(this,xr);return Or&&Or.value},set:function(xr,Or){return Pt(this,xr===0?0:xr,Or)}}:{add:function(xr){return Pt(this,xr=xr===0?0:xr,xr)}}),ze&&QT(At,"size",{get:function(){return Dt(this).size}}),Ie},setStrong:function(pe,xe,qe){var Oe=xe+" Iterator",Ie=mm(xe),At=mm(Oe);So(pe,xe,function(Dt,Pt){i0(this,{type:Oe,target:Dt,state:Ie(Dt),kind:Pt,last:void 0})},function(){for(var Dt=At(this),Pt=Dt.kind,ir=Dt.last;ir&&ir.removed;)ir=ir.previous;return Dt.target&&(Dt.last=ir=ir?ir.next:Dt.state.first)?Pt=="keys"?{value:ir.key,done:!1}:Pt=="values"?{value:ir.value,done:!1}:{value:[ir.key,ir.value],done:!1}:(Dt.target=void 0,{value:void 0,done:!0})},qe?"entries":"values",!qe,!0),Xp(xe)}};Zh("Map",function(pe){return function(){return pe(this,arguments.length?arguments[0]:void 0)}},tv);var c0=_r.Map,rv=[].push,l0=function(xe){var qe,Oe,Ie,At,Dt=arguments.length,Pt=Dt>1?arguments[1]:void 0;return ef(this),(qe=Pt!==void 0)&&Xr(Pt),pr(xe)?new this:(Oe=[],qe?(Ie=0,At=Ho(Pt,Dt>2?arguments[2]:void 0),ia(xe,function(ir){kt(rv,Oe,At(ir,Ie++))})):ia(xe,rv,{that:Oe}),new this(Oe))};xn({target:"Map",stat:!0,forced:!0},{from:l0});var u0=function(){return new this(Us(arguments))};xn({target:"Map",stat:!0,forced:!0},{of:u0});var d0=function(){for(var xe,qe=lo(this),Oe=Xr(qe.delete),Ie=!0,At=0,Dt=arguments.length;At<Dt;At++)xe=kt(Oe,qe,arguments[At]),Ie=Ie&&xe;return!!Ie};xn({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:d0}),xn({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(xe,qe){var Oe,Ie,At=lo(this),Dt=Xr(At.get),Pt=Xr(At.has),ir=Xr(At.set);return kt(Pt,At,xe)?(Oe=kt(Dt,At,xe),"update"in qe&&(Oe=qe.update(Oe,xe,At),kt(ir,At,xe,Oe)),Oe):(Ie=qe.insert(xe,At),kt(ir,At,xe,Ie),Ie)}});var Ws=Ol;xn({target:"Map",proto:!0,real:!0,forced:!0},{every:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return!ia(Oe,function(At,Dt,Pt){if(!Ie(Dt,At,qe))return Pt()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0),At=new(ji(qe,Pr("Map"))),Dt=Xr(At.set);return ia(Oe,function(Pt,ir){Ie(ir,Pt,qe)&&kt(Dt,At,Pt,ir)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),At}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{find:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(At,Dt,Pt){if(Ie(Dt,At,qe))return Pt(Dt)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(At,Dt,Pt){if(Ie(Dt,At,qe))return Pt(At)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var Gs=Ne([].push);xn({target:"Map",stat:!0,forced:!0},{groupBy:function(xe,qe){Xr(qe);var Oe=Ol(xe),Ie=new this,At=Xr(Ie.has),Dt=Xr(Ie.get),Pt=Xr(Ie.set);return ia(Oe,function(ir){var hr=qe(ir);kt(At,Ie,hr)?Gs(kt(Dt,Ie,hr),ir):kt(Pt,Ie,hr,[ir])},{IS_ITERATOR:!0}),Ie}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(xe){return ia(Ws(lo(this)),function(qe,Oe,Ie){if((At=Oe)===(Dt=xe)||At!=At&&Dt!=Dt)return Ie();var At,Dt},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Map",stat:!0,forced:!0},{keyBy:function(xe,qe){var Oe=new this;Xr(qe);var Ie=Xr(Oe.set);return ia(xe,function(At){kt(Ie,Oe,qe(At),At)}),Oe}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(xe){return ia(Ws(lo(this)),function(qe,Oe,Ie){if(Oe===xe)return Ie(qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0),At=new(ji(qe,Pr("Map"))),Dt=Xr(At.set);return ia(Oe,function(Pt,ir){kt(Dt,At,Ie(ir,Pt,qe),ir)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),At}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0),At=new(ji(qe,Pr("Map"))),Dt=Xr(At.set);return ia(Oe,function(Pt,ir){kt(Dt,At,Pt,Ie(ir,Pt,qe))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),At}}),xn({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(xe){for(var qe=lo(this),Oe=Xr(qe.set),Ie=arguments.length,At=0;At<Ie;)ia(arguments[At++],Oe,{that:qe,AS_ENTRIES:!0});return qe}});var JT=TypeError;xn({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=arguments.length<2,At=Ie?void 0:arguments[1];if(Xr(xe),ia(Oe,function(Dt,Pt){Ie?(Ie=!1,At=Pt):At=xe(At,Pt,Dt,qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Ie)throw JT("Reduce of empty map with no initial value");return At}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{some:function(xe){var qe=lo(this),Oe=Ws(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(At,Dt,Pt){if(Ie(Dt,At,qe))return Pt()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var nv=TypeError;xn({target:"Map",proto:!0,real:!0,forced:!0},{update:function(xe,qe){var Oe=lo(this),Ie=Xr(Oe.get),At=Xr(Oe.has),Dt=Xr(Oe.set),Pt=arguments.length;Xr(qe);var ir=kt(At,Oe,xe);if(!ir&&Pt<3)throw nv("Updating absent value");var hr=ir?kt(Ie,Oe,xe):Xr(Pt>2?arguments[2]:void 0)(xe,Oe);return kt(Dt,Oe,xe,qe(hr,xe,Oe)),Oe}});var gm=TypeError,ov=function(xe,qe){var Oe,Ie=lo(this),At=Xr(Ie.get),Dt=Xr(Ie.has),Pt=Xr(Ie.set),ir=arguments.length>2?arguments[2]:void 0;if(!Ve(qe)&&!Ve(ir))throw gm("At least one callback required");return kt(Dt,Ie,xe)?(Oe=kt(At,Ie,xe),Ve(qe)&&(Oe=qe(Oe),kt(Pt,Ie,xe,Oe))):Ve(ir)&&(Oe=ir(),kt(Pt,Ie,xe,Oe)),Oe};xn({target:"Map",proto:!0,real:!0,forced:!0},{upsert:ov}),xn({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:ov});var Zu=c0,av=g(function(pe){function xe(qe){var Oe;return pe.exports=xe=ci?oa(Oe=zl).call(Oe):function(At){return At.__proto__||zl(At)},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),p0=g(function(pe){pe.exports=function(qe){var Oe;return ea(Oe=Function.toString.call(qe)).call(Oe,"[native code]")!==-1},pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Vo=Pr("Reflect","construct"),YT=Object.prototype,ed=[].push,f0=V(function(){function pe(){}return!(Vo(function(){},[],pe)instanceof pe)}),m0=!V(function(){Vo(function(){})}),dp=f0||m0;xn({target:"Reflect",stat:!0,forced:dp,sham:dp},{construct:function(xe,qe){ef(xe),lo(qe);var Oe=arguments.length<3?xe:ef(arguments[2]);if(m0&&!f0)return Vo(xe,qe,Oe);if(xe==Oe){switch(qe.length){case 0:return new xe;case 1:return new xe(qe[0]);case 2:return new xe(qe[0],qe[1]);case 3:return new xe(qe[0],qe[1],qe[2]);case 4:return new xe(qe[0],qe[1],qe[2],qe[3])}var Ie=[null];return ue(ed,Ie,qe),new(ue(yd,xe,Ie))}var At=Oe.prototype,Dt=os(mr(At)?At:YT),Pt=ue(xe,Dt,qe);return mr(Pt)?Pt:Dt}});var zi=_r.Reflect.construct,g0=g(function(pe){pe.exports=function(){if(typeof Reflect>"u"||!zi||zi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(zi(Boolean,[],function(){})),!0}catch{return!1}},pe.exports.__esModule=!0,pe.exports.default=pe.exports}),XT=g(function(pe){function xe(qe,Oe,Ie){var At;return g0()?(pe.exports=xe=oa(At=zi).call(At),pe.exports.__esModule=!0,pe.exports.default=pe.exports):(pe.exports=xe=function(Pt,ir,hr){var xr=[null];xr.push.apply(xr,ir);var Or=new(oa(Function).apply(Pt,xr));return hr&&Sd(Or,hr.prototype),Or},pe.exports.__esModule=!0,pe.exports.default=pe.exports),xe.apply(null,arguments)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),ZT=g(function(pe){function xe(qe){var Oe=typeof Zu=="function"?new Zu:void 0;return pe.exports=xe=function(At){if(At===null||!p0(At))return At;if(typeof At!="function")throw new TypeError("Super expression must either be null or a function");if(Oe!==void 0){if(Oe.has(At))return Oe.get(At);Oe.set(At,Dt)}function Dt(){return XT(At,arguments,av(this).constructor)}return Dt.prototype=ii(At.prototype,{constructor:{value:Dt,enumerable:!1,writable:!0,configurable:!0}}),Sd(Dt,At)},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),h0=n(ZT),Ro=function(pe){function xe(qe,Oe,Ie){var At;return Oe===void 0&&(Oe={}),Ie===void 0&&(Ie=400),(At=pe.call(this,qe)||this).data=Oe,At.code=Ie,At.name="customError",At}return ra(xe,pe),xe}(h0(Error)),ru=function(pe){function xe(qe,Oe,Ie){var At;return Oe===void 0&&(Oe={}),(At=pe.call(this,qe,Oe,414)||this).code=414,At.name="validateError",At.rules=Ie,At}return ra(xe,pe),xe}(Ro),hm={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},ll=function(pe){function xe(qe,Oe,Ie,At,Dt){var Pt;return Ie===void 0&&(Ie=""),At===void 0&&(At=new Date().getTime()),Dt===void 0&&(Dt={}),Ie=Ie||hm[qe],(Pt=pe.call(this,Ie,Dt,qe)||this).name="cmdError",Pt.cmd=Oe,Pt.timetag=At,Pt}return ra(xe,pe),xe}(Ro),v0=function(pe){function xe(qe,Oe,Ie){var At;return(At=pe.call(this,qe,{},412)||this).code=412,At.name="formatError",At.key=Oe,At.reason=Ie,At}return ra(xe,pe),xe}(Ro),ul=function(pe){function xe(qe,Oe,Ie,At,Dt){var Pt;return(Pt=pe.call(this,qe,{file:Dt},400)||this).name="uploadError",Pt.rawError=Oe,Pt.curProvider=Ie||1,Pt.mixStorePolicy=At,Pt}return ra(xe,pe),xe}(Ro);function eC(pe,xe){return xe instanceof RegExp?"__REGEXP "+xe.toString():xe}function jn(pe,xe,qe){var Oe;xe===void 0&&(xe={});var Ie={};return To(Oe=Sa(pe)).call(Oe,function(At){var Dt=pe[At].type,Pt=qe?"In "+qe+", ":"";if(xe[At]===void 0){if(pe[At].required===!1)return void(Ie[At]=xe[At]);throw new ru(Pt+'param "'+At+'" is required',{key:At},"required")}var ir=tC[Dt];if(ir&&!ir(xe,At,pe[At]))throw new ru(Pt+'param "'+At+'" expects '+Ao(pe[At],eC),{key:At,value:xe[At]},Ao(pe[At]));Ie[At]=xe[At]}),Ie}var tC={string:function(xe,qe,Oe){var Ie=Oe.allowEmpty,At=Oe.max,Dt=Oe.min,Pt=Oe.regExp,ir=xe[qe];return typeof ir=="string"&&(Ie!==!1||ir!=="")&&!(typeof At=="number"&&ir.length>At)&&!(typeof Dt=="number"&&ir.length<Dt)&&!(jT(Pt)&&!Pt.test(ir))},number:function(xe,qe,Oe){var Ie=Oe.min,At=Oe.max,Dt=xe[qe];return typeof Dt=="number"&&!(typeof Ie=="number"&&Dt<Ie)&&!(typeof At=="number"&&Dt>At)},boolean:function(xe,qe){return typeof xe[qe]=="boolean"},enum:function(xe,qe,Oe){var Ie=eu(Oe),At=xe[qe];return!Ie||ea(Ie).call(Ie,At)>-1},array:function(xe,qe,Oe){var Ie,At=Oe.itemType,Dt=Oe.rules,Pt=Oe.min,ir=Oe.max,hr=eu(Oe),xr=xe[qe];return!!Cs(xr)&&!(typeof ir=="number"&&xr.length>ir)&&!(typeof Pt=="number"&&xr.length<Pt)&&!(At&&At!=="enum"&&!e0(xr).call(xr,function(Or){return typeof Or===At}))&&(At!=="enum"||!hr||!Yh.apply(void 0,qs(Ie=[xr]).call(Ie,hr)).length)&&(Dt&&To(xr).call(xr,function(Or,jr){return jn(Dt,Or,qe+"["+jr+"]")}),!0)},object:function(xe,qe,Oe){var Ie=Oe.rules,At=xe[qe];return Ie&&jn(Ie,At,qe),!0}},vm=function(xe,qe,Oe){(Oe!==void 0&&!Yd(xe[qe],Oe)||Oe===void 0&&!(qe in xe))&&cc(xe,qe,Oe)},sv=function(xe){return function(qe,Oe,Ie){for(var At=-1,Dt=Object(qe),Pt=Ie(qe),ir=Pt.length;ir--;){var hr=Pt[xe?ir:++At];if(Oe(Dt[hr],hr,Dt)===!1)break}return qe}}(),iv=g(function(pe,xe){var qe=xe&&!xe.nodeType&&xe,Oe=qe&&pe&&!pe.nodeType&&pe,Ie=Oe&&Oe.exports===qe?qi.Buffer:void 0,At=Ie?Ie.allocUnsafe:void 0;pe.exports=function(Pt,ir){if(ir)return Pt.slice();var hr=Pt.length,xr=At?At(hr):new Pt.constructor(hr);return Pt.copy(xr),xr}}),y0=function(xe){var qe=new xe.constructor(xe.byteLength);return new Kf(qe).set(new Kf(xe)),qe},rC=function(xe,qe){var Oe=qe?y0(xe.buffer):xe.buffer;return new xe.constructor(Oe,xe.byteOffset,xe.length)},lc=function(xe,qe){var Oe=-1,Ie=xe.length;for(qe||(qe=Array(Ie));++Oe<Ie;)qe[Oe]=xe[Oe];return qe},b0=Object.create,nC=function(){function pe(){}return function(xe){if(!ni(xe))return{};if(b0)return b0(xe);pe.prototype=xe;var qe=new pe;return pe.prototype=void 0,qe}}(),oC=function(xe){return typeof xe.constructor!="function"||Nh(xe)?{}:nC(zh(xe))},cv=Function.prototype,aC=Object.prototype,S0=cv.toString,T0=aC.hasOwnProperty,sC=S0.call(Object),pp=function(xe){if(!Ic(xe)||sl(xe)!="[object Object]")return!1;var qe=zh(xe);if(qe===null)return!0;var Oe=T0.call(qe,"constructor")&&qe.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&S0.call(Oe)==sC},lv=function(xe,qe){if((qe!=="constructor"||typeof xe[qe]!="function")&&qe!="__proto__")return xe[qe]},C0=function(xe,qe,Oe,Ie){var At=!Oe;Oe||(Oe={});for(var Dt=-1,Pt=qe.length;++Dt<Pt;){var ir=qe[Dt],hr=Ie?Ie(Oe[ir],xe[ir],ir,Oe,xe):void 0;hr===void 0&&(hr=xe[ir]),At?cc(Oe,ir,hr):im(Oe,ir,hr)}return Oe},iC=function(xe){return C0(xe,Gu(xe))},Xn=function(xe,qe,Oe,Ie,At,Dt,Pt){var ir=lv(xe,Oe),hr=lv(qe,Oe),xr=Pt.get(hr);if(xr)vm(xe,Oe,xr);else{var Or=Dt?Dt(ir,hr,Oe+"",xe,qe,Pt):void 0,jr=Or===void 0;if(jr){var Ur=Ci(hr),Yr=!Ur&&Mi(hr),_n=!Ur&&!Yr&&Ph(hr);Or=hr,Ur||Yr||_n?Ci(ir)?Or=ir:Yu(ir)?Or=lc(ir):Yr?(jr=!1,Or=iv(hr,!0)):_n?(jr=!1,Or=rC(hr,!0)):Or=[]:pp(hr)||Du(hr)?(Or=ir,Du(ir)?Or=iC(ir):ni(ir)&&!hh(ir)||(Or=oC(hr))):jr=!1}jr&&(Pt.set(hr,Or),At(Or,hr,Ie,Dt,Pt),Pt.delete(hr)),vm(xe,Oe,Or)}},Ms=function pe(xe,qe,Oe,Ie,At){xe!==qe&&sv(qe,function(Dt,Pt){if(At||(At=new ju),ni(Dt))Xn(xe,qe,Pt,Oe,pe,Ie,At);else{var ir=Ie?Ie(lv(xe,Pt),Dt,Pt+"",xe,qe,At):void 0;ir===void 0&&(ir=Dt),vm(xe,Pt,ir)}},Gu)},M0=function(xe,qe,Oe){if(!ni(Oe))return!1;var Ie=typeof qe;return!!(Ie=="number"?Zf(Oe)&&Yf(qe,Oe.length):Ie=="string"&&qe in Oe)&&Yd(Oe[qe],xe)},nu,Ks,k0=function(xe){return pm(function(qe,Oe){var Ie=-1,At=Oe.length,Dt=At>1?Oe[At-1]:void 0,Pt=At>2?Oe[2]:void 0;for(Dt=xe.length>3&&typeof Dt=="function"?(At--,Dt):void 0,Pt&&M0(Oe[0],Oe[1],Pt)&&(Dt=At<3?void 0:Dt,At=1),qe=Object(qe);++Ie<At;){var ir=Oe[Ie];ir&&xe(qe,ir,Ie,Dt)}return qe})},cC=k0(function(pe,xe,qe){Ms(pe,xe,qe)});(function(pe){pe[pe.Unset=0]="Unset",pe[pe.RN=2]="RN",pe[pe.UNIAPP=3]="UNIAPP",pe[pe.Electron=5]="Electron",pe[pe.WeiXin=6]="WeiXin",pe[pe.BROWSER=100]="BROWSER",pe[pe.H5=101]="H5",pe[pe.Ali=102]="Ali",pe[pe.Baidu=103]="Baidu",pe[pe.Tiktok=104]="Tiktok"})(nu||(nu={})),function(pe){pe[pe.kStatNetTypeUnkonw=0]="kStatNetTypeUnkonw",pe[pe.kStatNetTypeEthernet=1]="kStatNetTypeEthernet",pe[pe.kStatNetTypeWifi=2]="kStatNetTypeWifi",pe[pe.kStatNetType2G=3]="kStatNetType2G",pe[pe.kStatNetType3G=4]="kStatNetType3G",pe[pe.kStatNetType4G=5]="kStatNetType4G",pe[pe.kStatNetType5G=6]="kStatNetType5G"}(Ks||(Ks={}));var uv={wifi:Ks.kStatNetTypeWifi,"2g":Ks.kStatNetType2G,"3g":Ks.kStatNetType3G,"4g":Ks.kStatNetType4G,"5g":Ks.kStatNetType5G,ethernet:Ks.kStatNetTypeEthernet,unknown:Ks.kStatNetTypeUnkonw,none:Ks.kStatNetTypeUnkonw,notreachable:Ks.kStatNetTypeUnkonw,wwan:Ks.kStatNetTypeUnkonw};function w0(){if(!navigator||!navigator.userAgent)return!1;var pe=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return Qd(pe).call(pe,function(xe){return navigator.userAgent.match(xe)})}function dv(){var pe;return!(!navigator||!navigator.userAgent)&&typeof navigator=="object"&&typeof navigator.userAgent=="string"&&ea(pe=navigator.userAgent).call(pe,"Electron")>=0}function uc(){return navigator&&navigator.userAgent}var Qo={setLogger:function(xe){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function pe(qe,Oe){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var xe=pe.prototype;return xe.close=function(Oe,Ie){throw new Error("Method not implemented.")},xe.send=function(Oe){throw new Error("Method not implemented.")},xe.onclose=function(Oe){throw new Error("Method not implemented.")},xe.onerror=function(Oe){throw new Error("Method not implemented.")},xe.onmessage=function(Oe){throw new Error("Method not implemented.")},xe.onopen=function(Oe){throw new Error("Method not implemented.")},pe}(),localStorage:{},request:function(xe,qe){throw new Error("Function not implemented.")},uploadFile:function(xe){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")},net:{__getEnv:function(){return null},__onNetworkStatusChangeFn:null,getNetworkStatus:function(){var xe=this.__getEnv();return new ca(function(qe,Oe){xe.getNetworkType({success:function(At){var Dt=!1;Dt=typeof At.networkAvailable=="boolean"?At.networkAvailable:At.networkType.toLowerCase()!=="none",qe({net_type:uv[At.networkType.toLowerCase()],net_connect:Dt})},fail:function(){Oe(new Error("getNetworkType failed"))}})})},onNetworkStatusChange:function(xe){var qe=this.__getEnv();this.offNetworkStatusChange(),qe.onNetworkStatusChange&&(this.__onNetworkStatusChangeFn=function(Oe){var Ie=Oe.networkType.toLowerCase();xe({isConnected:Oe.isConnected||Ie!=="none",networkType:uv[Ie]})},qe.onNetworkStatusChange(this.__onNetworkStatusChangeFn))},offNetworkStatusChange:function(){var xe=this.__getEnv();xe.offNetworkStatusChange&&(this.__onNetworkStatusChangeFn&&xe.offNetworkStatusChange(this.__onNetworkStatusChangeFn),this.__onNetworkStatusChangeFn=null)}}},dc=Mc.map,_0=nc("map");xn({target:"Array",proto:!0,forced:!_0},{map:function(xe){return dc(this,xe,arguments.length>1?arguments[1]:void 0)}});var wi=da("Array").map,fp=Array.prototype,Do=function(pe){var xe=pe.map;return pe===fp||sr(fp,pe)&&xe===fp.map?wi:xe},lC=TypeError,x0=function(pe){return function(xe,qe,Oe,Ie){Xr(qe);var At=Pn(xe),Dt=gr(At),Pt=ns(At),ir=pe?Pt-1:0,hr=pe?-1:1;if(Oe<2)for(;;){if(ir in Dt){Ie=Dt[ir],ir+=hr;break}if(ir+=hr,pe?ir<0:Pt<=ir)throw lC("Reduce of empty array with no initial value")}for(;pe?ir>=0:Pt>ir;ir+=hr)ir in Dt&&(Ie=qe(Ie,Dt[ir],ir,At));return Ie}},uC={left:x0(!1),right:x0(!0)}.left,dC=Ul("reduce");xn({target:"Array",proto:!0,forced:!dC||!ec&&Br>79&&Br<83},{reduce:function(xe){var qe=arguments.length;return uC(this,xe,qe,qe>1?arguments[1]:void 0)}});var ym=da("Array").reduce,pv=Array.prototype,td=function(pe){var xe=pe.reduce;return pe===pv||sr(pv,pe)&&xe===pv.reduce?ym:xe},I0=function(xe){return xe===void 0},bm={},mp={};function fv(pe,xe){var qe,Oe,Ie;try{Ie=JSON.parse(pe)}catch(Ur){throw xe.error("Parse command error: ",pe),Ur}var At=Ie.sid+"_"+Ie.cid,Dt=Ie.r;if(Ti(qe=["4_1","4_2","4_10","4_11"]).call(qe,At)){var Pt=Ie.r[1].headerPacket;At=Pt.sid+"_"+Pt.cid,Dt=Ie.r[1].body}var ir,hr=mp[At],xr=bm[hr],Or=function(Yr,_n){var Tn=hm[Yr];return Tn===null?null:new ll(Yr,_n,Tn,new Date().getTime())}(Ie.code,hr),jr={cmd:hr,raw:Ie,error:Or,service:xr==null?void 0:xr.service,content:{}};if(jr.error){if(jr.error.cmd=hr,jr.error.callFunc="parseCmd",!(!((Oe=xr==null?void 0:xr.ignoreErrCodes)===null||Oe===void 0)&&Ti(Oe).call(Oe,Ie.code)))return jr;xe.warn("parseCmd:: ignore error ",jr.error),jr.error.ignore=!0}return!hr||!xr?(jr.notFound=!0,jr):(xr.response&&To(ir=xr.response).call(ir,function(Ur,Yr){var _n=Dt[Yr],Tn=Ur.type,Dn=Ur.name,zn=Ur.reflectMapper;if(!I0(_n))switch(Tn){case"Property":jr.content[Dn]=zn?ps(_n,zn):_n;break;case"PropertyArray":jr.content[Dn]=Do(_n).call(_n,function(Jn){return zn?ps(Jn,zn):Jn});break;case"long":case"Long":case"byte":case"Byte":case"Number":jr.content[Dn]=+_n;break;default:jr.content[Dn]=_n}}),jr)}function E0(pe,xe){var qe={};for(var Oe in pe)xe[Oe]!==void 0&&(qe[xe[Oe]]=pe[Oe]);return qe}function ps(pe,xe){var qe={};for(var Oe in pe)xe[Oe]!==void 0&&(qe[xe[Oe]]=pe[Oe]);return qe}function ou(pe){bm=Hn(bm,pe.cmdConfig),mp=Hn(mp,pe.cmdMap)}function Wi(pe){var xe;return td(xe=Sa(pe)).call(xe,function(qe,Oe){var Ie,At=pe[Oe];return qe[Oe]=td(Ie=Sa(At)).call(Ie,function(Dt,Pt){return Dt[At[Pt]]=Pt,Dt},{}),qe},{})}var Is,pc,P0={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},gp={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},au=Wi(gp),pC={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:au.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:gp.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:au.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:gp.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:au.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:au.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:au.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:gp.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:au.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:gp.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:au.mixStoreAuthTokenResTag}]}},A0={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},fC={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};(function(pe){pe[pe.nos=1]="nos",pe[pe.s3=2]="s3"})(Is||(Is={})),function(pe){pe[pe.dontNeed=-1]="dontNeed",pe[pe.time=2]="time",pe[pe.urls=3]="urls"}(pc||(pc={}));var mv={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0};function N0(pe){return pe===void 0&&(pe="file"),Ao(A0[pe]||{}).replace(/"/gi,'\\"')}var Sm=function(){function pe(qe,Oe){Oe===void 0&&(Oe={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Is.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=qe.logger,this.core=qe,ou({cmdMap:P0,cmdConfig:pC}),this.setOptions(Oe)}var xe=pe.prototype;return xe.setOptions=function(Oe){Oe===void 0&&(Oe={});var Ie=Oe.storageKeyPrefix||"NIMClient";this.GRAYKEY=Ie+"-AllGrayscaleConfig",this.MIXSTOREKEY=Ie+"-AllMixStorePolicy";var At=Oe.s3,Dt=Jd(Oe,["s3"]),Pt=Hn({},mv,this.config);if(Dt&&Object.prototype.hasOwnProperty.call(Dt,"cdn")){var ir={cdn:Hn(Hn({},Pt.cdn),Dt.cdn)};this.config=Hn({},Pt,Dt,ir)}else this.config=Hn({},Pt,Dt);At&&(this.s3=At)},xe.init=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){return Dr.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Is.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){At.next=9;break}return At.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return At.next=9,this.getNosCdnHost();case 9:case"end":return At.stop()}},Oe,this)}))},xe.processCallback=function(Oe){var Ie=this,At=Oe.onUploadProgress,Dt=Oe.onUploadDone,Pt=Oe.onUploadStart;return{onUploadStart:typeof Pt=="function"?function(ir){try{Pt(ir)}catch(hr){Ie.logger.error("CloudStorage::uploadFile:options.onUploadStart execute error",hr)}}:function(){},onUploadProgress:typeof At=="function"?function(ir){try{At(ir)}catch(hr){Ie.logger.error("CloudStorage::uploadFile:options.onUploadProgress execute error",hr)}}:function(){},onUploadDone:typeof Dt=="function"?function(ir){try{Dt(ir)}catch(hr){Ie.logger.error("CloudStorage::uploadFile:options.onUploadDone execute error",hr)}}:function(){}}},xe.uploadFile=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(jn({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},Oe),Oe.fileInput||Oe.file||Oe.filePath){jr.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!Oe.type||Oe.type==="file"){jr.next=7;break}if(typeof(At=ds(Oe,"file.type"))!="string"||ea(At).call(At,Oe.type)!==-1){jr.next=7;break}throw new Error('The meta type "'+At+'" does not match "'+Oe.type+'"');case 7:return Dt=this.processCallback(Oe),Pt=Dt.onUploadStart,ir=Dt.onUploadProgress,hr=Dt.onUploadDone,Oe.onUploadStart=Pt,Oe.onUploadProgress=ir,Oe.onUploadDone=hr,jr.next=13,this._uploadFile(Oe);case 13:return(xr=jr.sent).url=decodeURIComponent(xr.url),Oe.onUploadDone({size:xr.size,name:xr.name,url:xr.url,ext:xr.name.split(".")[1]||"unknown"}),jr.abrupt("return",xr);case 17:case"end":return jr.stop()}},Ie,this)}))},xe._uploadFile=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){ir.next=3;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),ir.abrupt("return",this.nosUpload(Oe));case 3:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=Is.nos),At=fC,ir.prev=6,ir.next=9,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:N0(Oe.type)}});case 9:Dt=ir.sent,At=Dt.content.mixStoreTokenResTag,ir.next=17;break;case 13:throw ir.prev=13,ir.t0=ir.catch(6),this.core.logger.error("uploadFile:: getMixStoreToken error",ir.t0),new ul("getMixStoreToken error",ir.t0,this.curProvider,this.mixStorePolicy);case 17:return ir.abrupt("return",this.curProvider===Is.s3?this.s3Upload(Oe,At):this.nosUpload(Oe,At));case 18:case"end":return ir.stop()}},Ie,this,[[6,13]])}))},xe.nosUpload=function(Oe,Ie){var At,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir,hr,xr,Or,jr,Ur,Yr,_n,Tn,Dn,zn,Jn,$n,vo,Fo;return Dr.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(ir=ds(this.core,"config.cdn.bucket"),hr={tag:Oe.nosScenes||ir||"nim",expireSec:Oe.nosSurvivalTime},Ie){Bn.next=13;break}return Bn.prev=3,Bn.next=6,this.core.sendCmd("getNosToken",{responseBody:N0(Oe.type),nosToken:hr});case 6:xr=Bn.sent,Bn.next=13;break;case 9:throw Bn.prev=9,Bn.t0=Bn.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Bn.t0),new ul("getNosToken error",Bn.t0,1);case 13:return Or=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",xr?xr.content.nosToken.objectName:Ie==null?void 0:Ie.objectName),jr="",Ie&&Ie.shortUrl&&(jr=Ie.shortUrl),Ur=jr||Or,Bn.prev=17,_n=xr?xr.content.nosToken:Ie,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:_n,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:Qo.platform}),Bn.next=22,this.core.adapters.uploadFile(Hn(Hn({},Oe),{nosToken:_n,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:Oe.maxSize||this.config.chunkMaxSize}));case 22:Yr=Bn.sent,Bn.next=48;break;case 25:if(Bn.prev=25,Bn.t1=Bn.catch(17),this.core.logger.error("uploadFile::nos uploadFile error",Bn.t1),ds(Bn.t1,"errCode")!==10499){Bn.next=30;break}throw new ul(ds(Bn.t1,"message")||"Request abort",Bn.t1,1);case 30:if(!Ie){Bn.next=47;break}if(this.nosErrorCount!==0){Bn.next=43;break}Bn.prev=32,this._addCircuitTimer(),Bn.next=39;break;case 36:throw Bn.prev=36,Bn.t2=Bn.catch(32),new ul("upload file error",Bn.t2,this.curProvider,this.mixStorePolicy,Oe.file||Oe.filePath);case 39:return this.nosErrorCount=(At=this.mixStorePolicy.nosPolicy)===null||At===void 0?void 0:At.uploadConfig.retryPolicy.retry,Bn.abrupt("return",this._uploadFile(Oe));case 43:return this.nosErrorCount--,Bn.abrupt("return",this.nosUpload(Oe,Ie));case 45:Bn.next=48;break;case 47:throw new ul("nos uploadFile error",Bn.t1,1);case 48:if(Tn=Yr==null?void 0:Yr.type,Dn=Tn&&ea(Tn).call(Tn,"/")>-1?qa(Tn).call(Tn,0,ea(Tn).call(Tn,"/")):"",(zn={image:"imageInfo",video:"vinfo",audio:"vinfo"})[Dn]){Bn.next=53;break}return Bn.abrupt("return",Hn({url:Ur},Yr));case 53:return Bn.prev=53,Bn.next=56,this.core.adapters.request(Or+"?"+zn[Dn],{method:"GET",dataType:"json",timeout:5e3},{exception_service:3});case 56:Jn=Bn.sent,Bn.next=63;break;case 59:return Bn.prev=59,Bn.t3=Bn.catch(53),this.core.logger.error("uploadFile:: fetch file info error",Bn.t3),Bn.abrupt("return",Hn({url:Ur},Yr));case 63:if(!Jn){Bn.next=70;break}return $n=Jn.data,vo=zn[Dn]==="imageInfo"?$n:(Dt=$n==null?void 0:$n.GetVideoInfo)===null||Dt===void 0?void 0:Dt.VideoInfo,Fo={url:Ur,name:Yr.name,size:Yr.size,ext:Yr.ext,w:vo.Width,h:vo.Height,orientation:vo.Orientation,dur:vo.Duration,audioCodec:vo.AudioCodec,videoCodec:vo.VideoCodec,container:vo.Container},Bn.abrupt("return",BT(Fo,function(zr,Zn){return Zn!==void 0}));case 70:return Bn.abrupt("return",Hn({url:Ur},Yr));case 71:case"end":return Bn.stop()}},Pt,this,[[3,9],[17,25],[32,36],[53,59]])}))},xe.getNosCdnHost=function(){var Oe;return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir=this;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return xr.prev=0,xr.next=3,this.core.sendCmd("getNosCdnHost");case 3:At=xr.sent,xr.next=10;break;case 6:return xr.prev=6,xr.t0=xr.catch(0),this.logger.error("getNosCdnHost::error",xr.t0),xr.abrupt("return");case 10:if(At){xr.next=12;break}return xr.abrupt("return");case 12:Dt=(Oe=At==null?void 0:At.content)===null||Oe===void 0?void 0:Oe.nosConfigTag,(Pt=ma(Dt==null?void 0:Dt.expire))!==0&&Dt.cdnDomain?Pt===-1?(this.config.cdn.bucket=Dt.bucket,this.config.cdn.cdnDomain=Dt.cdnDomain,this.config.cdn.objectNamePrefix=Dt.objectNamePrefix):(this.config.cdn.bucket=Dt.bucket,this.config.cdn.cdnDomain=Dt.cdnDomain,this.config.cdn.objectNamePrefix=Dt.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){ir.getNosCdnHost()},1e3*Pt)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return xr.stop()}},Ie,this,[[0,6]])}))},xe.getGrayscaleConfig=function(Oe){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:if(Qo.localStorage)try{Qo.localStorage.getItem&&Qo.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(Qo.localStorage.getItem(this.GRAYKEY))[Oe])}catch(xr){Qo.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",xr)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){hr.next=17;break}return hr.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(Dt=hr.sent).content||!Dt.content.grayConfigTag){hr.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(Dt.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(Dt.content.grayConfigTag.ttl)}catch(xr){this.logger.error("getGrayscaleConfig error",xr)}if(this.grayConfig){hr.next=10;break}return hr.abrupt("return");case 10:Pt=Qo.localStorage.getItem(this.GRAYKEY)?JSON.parse(Qo.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),Pt[Oe]=this.grayConfig,Qo.localStorage.setItem(this.GRAYKEY,Ao(Pt)),hr.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",Dt.content);case 17:if(!(!((Ie=this.grayConfig)===null||Ie===void 0)&&Ie.mixStoreEnable)){hr.next=20;break}return hr.next=20,this._getMixStorePolicy(Oe);case 20:case"end":return hr.stop()}},At,this)}))},xe._getMixStorePolicy=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(At=new Date().getTime(),Qo.localStorage)try{this.mixStorePolicy=JSON.parse(Qo.localStorage.getItem(this.MIXSTOREKEY))[Oe],this.curProvider=ma(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>At&&(Pt=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-At,this.core.timerManager.addTimer(oa(Dt=this._getMixStorePolicy).call(Dt,this,Oe),Pt))}catch(Yr){Qo.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(Qo.localStorage.getItem(this.MIXSTOREKEY))[Oe]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Yr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=At)){Ur.next=30;break}return Ur.prev=3,Ur.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:hr=Ur.sent,xr=hr.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(xr.ttl),this.mixStorePolicy.providers=xr.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=ma(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=xr.nosPolicy?JSON.parse(xr.nosPolicy):null,this.mixStorePolicy.s3Policy=xr.s3Policy?JSON.parse(xr.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(oa(ir=this._getMixStorePolicy).call(ir,this,Oe),1e3*this.mixStorePolicy.ttl),Or=Qo.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(Qo.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),Or[Oe]=this.mixStorePolicy,Qo.localStorage.setItem(this.MIXSTOREKEY,Ao(Or)),Ur.next=30;break;case 23:if(Ur.prev=23,Ur.t0=Ur.catch(3),this.logger.error("getMixStorePolicy error",Ur.t0),this.mixStoreErrorCount!==0){Ur.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(Oe),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Ur.stop()}},Ie,this,[[3,23]])}))},xe.s3Upload=function(Oe,Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr,Or,jr,Ur,Yr,_n,Tn=this;return Dr.wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(!Oe.file){zn.next=4;break}Dt=Oe.file,zn.next=19;break;case 4:if(typeof Oe.fileInput!="string"){zn.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((Pt=document.getElementById(Oe.fileInput))&&Pt.files&&Pt.files[0])){zn.next=11;break}Dt=Pt.files[0],zn.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:zn.next=19;break;case 14:if(!(Oe.fileInput&&Oe.fileInput.files&&Oe.fileInput.files[0])){zn.next=18;break}Dt=Oe.fileInput.files[0],zn.next=19;break;case 18:throw new Error("Can not get file from fileInput "+Oe.fileInput);case 19:if(this.mixStorePolicy.s3Policy){zn.next=21;break}throw new Error("dont get s3 policy");case 21:return ir={accessKeyId:Ie.accessKeyId,secretAccessKey:Ie.secretAccessKey,sessionToken:Ie.sessionToken,region:Ie.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},hr=this.s3,(xr=new hr).config.update(ir),Or=decodeURIComponent(Ie.bucket),jr=decodeURIComponent(Ie.objectName),Yr={Bucket:Or,Key:jr,Body:Ur=Dt,Metadata:{token:Ie.token},ContentType:Ur.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Yr),(_n=xr.upload(Yr)).on("httpUploadProgress",function(Jn){var $n=lh((Jn.loaded/Jn.total).toFixed(2));Oe.onUploadProgress&&Oe.onUploadProgress({total:Jn.total,loaded:Jn.loaded,percentage:$n,percentageText:Math.round(100*$n)+"%"})}),zn.abrupt("return",new ca(function(Jn,$n){var vo=new Date().getTime();_n.send(function(Fo,qo){var Bn;if(Fo&&Fo.code==="RequestAbortedError")Tn.logger.error("uploadFile:","api::s3:upload file abort",Fo),$n(new Ro(Fo.message,Fo,10499));else if(Fo){Tn.logger.error("uploadFile:","api::s3:upload file failed",Fo),Tn.core.reporter.reportTraceStart("exceptions",{user_id:Tn.core.options.account,trace_id:(Bn=Tn.core.clientSocket.socket)===null||Bn===void 0?void 0:Bn.sessionId,start_time:vo,action:1,exception_service:4}),Tn.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Fo.status=="number"?Fo.status:typeof Fo.code=="number"?Fo.code:0,description:Fo.message||""+Fo.code,operation_type:1,target:Ao({bucket:Or,object:jr})},{asyncParams:Qo.net.getNetworkStatus()}),Tn.core.reporter.reportTraceEnd("exceptions",1);try{Tn._addCircuitTimer()}catch(Zn){$n(new ul("upload file error",Zn,Tn.curProvider,Tn.mixStorePolicy,Oe.file||Oe.filePath))}Jn(Tn._uploadFile(Oe))}else{var zr=Tn.mixStorePolicy.s3Policy.cdnSchema;zr=(zr=zr.replace("{cdnDomain}",Tn.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",qo.Key),Jn({size:Ur.size,name:Ur.name,url:Ie.shortUrl?Ie.shortUrl:zr,ext:Ur.name.split(".")[1]||"unknown"})}}),Oe.onUploadStart&&Oe.onUploadStart(_n)}));case 33:case"end":return zn.stop()}},At,this)}))},xe.getPrivateUrl=function(Oe){var Ie;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(Oe))return this.logger.error("illegal file url:"+Oe),"";var At=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(Oe);At[0];var Dt=At[1];At[2];var Pt=At[3];At[4];var ir=At[5];if(At[6],At[7],(Ie=this.grayConfig)===null||Ie===void 0?void 0:Ie.mixStoreEnable){var hr=this._getUrlType(Oe);return hr===Is.s3&&this.mixStorePolicy.s3Policy&&(Oe=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",ir)),hr===Is.nos&&this.mixStorePolicy.nosPolicy&&(Oe=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",ir)),Oe}var xr=this.config,Or=xr.downloadUrl,jr=xr.downloadHostList,Ur=xr.nosCdnEnable,Yr=this.config.cdn.cdnDomain,_n=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",Tn=decodeURIComponent(ir),Dn=ea(Tn).call(Tn,_n);if(Yr&&Dn>-1&&Ur)return""+Dt+Yr+"/"+qa(Tn).call(Tn,Dn);if(Ti(jr).call(jr,Pt)&&Ti(ir).call(ir,"/")){var zn=ea(ir).call(ir,"/"),Jn=ir.substring(0,zn),$n=ir.substring(zn+1);return Or.replace("{bucket}",Jn).replace("{object}",$n)}var vo=pi(jr).call(jr,function(qo){return typeof Pt=="string"&&Ti(Pt).call(Pt,qo)})[0],Fo=vo?Pt.replace(vo,"").replace(/\W/g,""):null;return Fo?Or.replace("{bucket}",Fo).replace("{object}",ir):Oe},xe.getOriginUrl=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:Oe}});case 2:return At=Pt.sent,Pt.abrupt("return",At.content.nosSafeUrlTag.originUrl);case 4:case"end":return Pt.stop()}},Ie,this)}))},xe.getFileToken=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(jn({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},Oe),At=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,Dt=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,At!==String(pc.dontNeed)||Dt!==String(pc.dontNeed)){jr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(Oe.type!==pc.time){jr.next=17;break}if(!(At&&ea(At).call(At,String(pc.time))>=0||Dt&&ea(Dt).call(Dt,String(pc.time))>0)){jr.next=13;break}return jr.abrupt("return",this.getFileAuthToken(Oe));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:jr.next=33;break;case 17:if(Oe.urls&&Oe.urls.length){jr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(ir=[],hr=[],To(Pt=Oe.urls).call(Pt,function(Ur){var Yr=xr._getUrlType(Ur);Yr===Is.nos&&hr.push(Ur),Yr===Is.s3&&ir.push(Ur)}),(!Dt||ir.length!==0&&ea(Dt).call(Dt,String(pc.urls))<0)&&(this.logger.warn("s3 url don't support url token"),ir=[]),(!At||hr.length!==0&&ea(At).call(At,String(pc.urls))<0)&&(this.logger.warn("nos url don't support url token"),hr=[]),ir.length!==0||hr.length!==0){jr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(ir.length!==0&&hr.length!==0){jr.next=33;break}return Oe.urls=Ao(Oe.urls),jr.abrupt("return",this.getFileAuthToken(Oe));case 33:case"end":return jr.stop()}},Ie,this)}))},xe.getFileAuthToken=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:Oe});case 2:return At=Pt.sent,Pt.abrupt("return",At.content.mixStoreAuthTokenResTag);case 4:case"end":return Pt.stop()}},Ie,this)}))},xe._getUrlType=function(Oe){var Ie,At;return this.mixStorePolicy.nosPolicy&&Qd(Ie=this.mixStorePolicy.nosPolicy.dlcdns).call(Ie,function(Dt){return ea(Oe).call(Oe,Dt)>=0})?Is.nos:this.mixStorePolicy.s3Policy&&Qd(At=this.mixStorePolicy.s3Policy.dlcdns).call(At,function(Dt){return ea(Oe).call(Oe,Dt)>=0})?Is.s3:null},xe._addCircuitTimer=function(){var Oe=this,Ie=this.mixStorePolicy.providers,At=Ie[(ea(Ie).call(Ie,String(this.curProvider))+1)%Ie.length];if(At===Ie[0])throw new Error("uploadFile all policy fail");var Dt=ds(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(Dt&&Dt.retryNext&&At&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+At),this.curProvider=ma(At),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var Pt=this.mixStorePolicy[this.curProvider===Is.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!Pt||Pt===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){Oe.logger.log("uploadFile:: upload policy will change,now policy:"+Oe.curProvider+" nextProvider:"+ma(Oe.mixStorePolicy.providers[0])),Oe.curProvider=ma(Oe.mixStorePolicy.providers[0]),Oe.core.timerManager.deleteTimer(Oe.circuitTimer)},1e3*Pt)}},xe.process=function(Oe){return Oe.error&&!Oe.error.ignore?ca.reject(Oe.error):ca.resolve(Oe)},pe}(),dl=function(pe,xe,qe,Oe){try{return Oe?xe(lo(qe)[0],qe[1]):xe(qe)}catch(Ie){rg(pe,"throw",Ie)}},gv=Array,O0=!Ns(function(pe){Array.from(pe)});xn({target:"Array",stat:!0,forced:O0},{from:function(xe){var qe=Pn(xe),Oe=Cu(this),Ie=arguments.length,At=Ie>1?arguments[1]:void 0,Dt=At!==void 0;Dt&&(At=Ho(At,Ie>2?arguments[2]:void 0));var Pt,ir,hr,xr,Or,jr,Ur=Fi(qe),Yr=0;if(!Ur||this===gv&&ly(Ur))for(Pt=ns(qe),ir=Oe?new this(Pt):gv(Pt);Pt>Yr;Yr++)jr=Dt?At(qe[Yr],Yr):qe[Yr],tl(ir,Yr,jr);else for(Or=(xr=Ol(qe,Ur)).next,ir=Oe?new this:[];!(hr=kt(Or,xr)).done;Yr++)jr=Dt?dl(xr,At,[hr.value,Yr],!0):hr.value,tl(ir,Yr,jr);return ir.length=Yr,ir}});var pl=_r.Array.from,Tm=Fi,Cm=TypeError,Mm=function(pe,xe){if(!delete pe[xe])throw Cm("Cannot delete property "+Sn(xe)+" of "+Sn(pe))},cs=Math.floor,hv=function(pe,xe){var qe=pe.length,Oe=cs(qe/2);return qe<8?vv(pe,xe):R0(pe,hv(Cf(pe,0,Oe),xe),hv(Cf(pe,Oe),xe),xe)},vv=function(pe,xe){for(var qe,Oe,Ie=pe.length,At=1;At<Ie;){for(Oe=At,qe=pe[At];Oe&&xe(pe[Oe-1],qe)>0;)pe[Oe]=pe[--Oe];Oe!==At++&&(pe[Oe]=qe)}return pe},R0=function(pe,xe,qe,Oe){for(var Ie=xe.length,At=qe.length,Dt=0,Pt=0;Dt<Ie||Pt<At;)pe[Dt+Pt]=Dt<Ie&&Pt<At?Oe(xe[Dt],qe[Pt])<=0?xe[Dt++]:qe[Pt++]:Dt<Ie?xe[Dt++]:qe[Pt++];return pe},mC=hv,yv=Ir.match(/firefox\/(\d+)/i),B0=!!yv&&+yv[1],bv=/MSIE|Trident/.test(Ir),Sv=Ir.match(/AppleWebKit\/(\d+)\./),su=!!Sv&&+Sv[1],fl=[],km=Ne(fl.sort),gC=Ne(fl.push),hC=V(function(){fl.sort(void 0)}),vC=V(function(){fl.sort(null)}),L0=Ul("sort"),Tv=!V(function(){if(Br)return Br<70;if(!(B0&&B0>3)){if(bv)return!0;if(su)return su<603;var pe,xe,qe,Oe,Ie="";for(pe=65;pe<76;pe++){switch(xe=String.fromCharCode(pe),pe){case 66:case 69:case 70:case 72:qe=3;break;case 68:case 71:qe=4;break;default:qe=2}for(Oe=0;Oe<47;Oe++)fl.push({k:xe+Oe,v:qe})}for(fl.sort(function(At,Dt){return Dt.v-At.v}),Oe=0;Oe<fl.length;Oe++)xe=fl[Oe].k.charAt(0),Ie.charAt(Ie.length-1)!==xe&&(Ie+=xe);return Ie!=="DGBEFHACIJK"}});xn({target:"Array",proto:!0,forced:hC||!vC||!L0||!Tv},{sort:function(xe){xe!==void 0&&Xr(xe);var qe=Pn(this);if(Tv)return xe===void 0?km(qe):km(qe,xe);var Oe,Ie,At=[],Dt=ns(qe);for(Ie=0;Ie<Dt;Ie++)Ie in qe&&gC(At,qe[Ie]);for(mC(At,function(Pt){return function(ir,hr){return hr===void 0?-1:ir===void 0?1:Pt!==void 0?+Pt(ir,hr)||0:li(ir)>li(hr)?1:-1}}(xe)),Oe=ns(At),Ie=0;Ie<Oe;)qe[Ie]=At[Ie++];for(;Ie<Dt;)Mm(qe,Ie++);return qe}});var ml,hp,vp,gl=da("Array").sort,wm=Array.prototype,yp=function(pe){var xe=pe.sort;return pe===wm||sr(wm,pe)&&xe===wm.sort?gl:xe};(function(pe){pe[pe.ASC=1]="ASC",pe[pe.DESC=2]="DESC"})(ml||(ml={})),function(pe){pe[pe.reorderWeight=0]="reorderWeight",pe[pe.createTime=1]="createTime",pe[pe.totalMember=2]="totalMember"}(hp||(hp={})),function(pe){pe[pe.square=1]="square",pe[pe.person=2]="person"}(vp||(vp={}));var rd=function(){function pe(xe,qe){this.name=xe,this.core=qe,this.name=xe,this.logger=qe.logger,this.core=qe}return pe.prototype.process=function(qe){var Oe=this[qe.cmd+"Handler"];return typeof Oe=="function"?Oe.call(this,qe):qe.error&&!qe.error.ignore?ca.reject(qe.error):ca.resolve(qe)},pe}();k0(function(pe,xe,qe,Oe){C0(xe,em(xe),pe,Oe)});var Ec,Cv=(Ec=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Ec()+Ec()+Ec()+Ec()+Ec()+Ec()+Ec()+Ec()});function Aa(pe){var xe;return pi(xe=Sa(pe)).call(xe,function(qe){return!(+qe>=0)})}function F0(pe,xe){var qe,Oe=pi(qe=Sa(pe)).call(qe,function(Ie){return pe[Ie]==xe});return Oe.length>0?Oe[0]:void 0}function bp(){return ca.resolve()}var iu={"24_15":"qchatSubscribe","24_27":"qchatGetUnreadInfo","24_48":"qchatCreateChannel","24_49":"qchatDeleteChannel","24_50":"qchatUpdateChannel","24_51":"qchatGetChannels","24_52":"qchatGetChannelsByPage","24_53":"qchatGetMembersByPage","24_54":"qchatUpdateWhiteBlackRole","24_55":"qchatGetWhiteBlackRolesPage","24_56":"qchatUpdateWhiteBlackMembers","24_57":"qchatGetWhiteBlackMembersPage","24_58":"qchatGetExistingWhiteBlackRoles","24_59":"qchatGetExistingWhiteBlackMembers","24_60":"qchatUpdateCategoryInfoOfChannel","24_109":"qchatCreateChannelCategory","24_110":"qchatRemoveChannelCategory","24_111":"qchatUpdateChannelCategory","24_112":"qchatGetChannelCategoriesByID","24_113":"qchatUpdateChannelCategoryWhiteBlackRole","24_114":"qchatGetChannelCategoryWhiteBlackRolesPage","24_115":"qchatUpdateChannelCategoryWhiteBlackMembers","24_116":"qchatGetChannelCategoryWhiteBlackMembersPage","24_117":"qchatGetChannelCategoryWhiteBlackRoles","24_118":"qchatGetChannelCategoryWhiteBlackMembers","24_119":"qchatGetChannelCategoriesPage","24_120":"qchatGetChannelCategoryChannelsPage","24_93":"qchatGetChannelSearchByPage","24_95":"qchatChannelMemberSearch","25_8":"qchatGetRoleIdsByServerId","25_9":"qchatSubscribeAsVisitor","25_12":"qchatAutoSubscribe","25_13":"qchatAutoSubscribeNotification"},_m={serverId:1,channelId:2,ackTimestamp:3,unreadCount:4,mentionedCount:5,maxCount:6,lastMsgTime:7},wa={channelInfo:{channelId:1,serverId:2,name:4,topic:5,ext:6,type:7,validFlag:8,createTime:9,updateTime:10,owner:11,viewMode:12,categoryId:13,syncMode:14,reorderWeight:15,visitorMode:16},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11},qchatSubReqTag:{type:1,opeType:2},qchatChannelIdInfoTag:{serverId:1,channelId:2},unreadInfo:_m,qchatGetChannelListPageTag:{serverId:1,timetag:2,limit:3},qchatGetMembersByPageTag:{serverId:1,channelId:2,timetag:3,limit:4},qchatUpdateWhiteBlackRoleTag:{serverId:1,channelId:2,type:3,opeType:4,roleId:5},qchatGetWhiteBlackRolesPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatUpdateWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,opeType:4,toAccids:5},qchatGetWhiteBlackMembersPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatGetExistingWhiteBlackRolesTag:{serverId:1,channelId:2,type:3,roleIds:4},qchatGetExistingWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,accids:4},QChatChannelCategoryInfo:{categoryId:1,serverId:2,name:4,ext:5,owner:6,viewMode:7,validFlag:8,createTime:9,updateTime:10,channelNumber:11},qchatUpdateChannelCategoryWhiteBlackRoleTag:{serverId:1,categoryId:2,type:3,opeType:4,roleId:5},qchatGetChannelCategoryWhiteBlackRolesPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatUpdateChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,opeType:4,toAccids:5},qchatGetChannelCategoryWhiteBlackMembersPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatGetChannelCategoryWhiteBlackRolesTag:{serverId:1,categoryId:2,type:3,roleIds:4},qchatGetChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,accids:4},qchatGetChannelCategoriesPageTag:{serverId:1,timetag:2,limit:3},qchatGetChannelCategoryChannelsPageTag:{serverId:1,categoryId:2,timetag:3,limit:4},qchatGetChannelSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverId:6,sort:7,cursor:8},qchatUpdateChannelTag:{channelId:1,name:4,topic:5,ext:6,viewMode:12,visitorMode:16},serverRoles:{serverId:1,roleIds:2,timeTag:3},qchatChannelMemberSearchTag:{serverId:1,channelId:2,keyword:3,limit:4},qchatChannelMemberInfo:{serverId:1,channelId:2,avatar:3,accid:4,nick:5,createTime:6,updateTime:7}},aa=Wi(wa),Sp={qchatCreateChannel:{sid:24,cid:48,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:wa.channelInfo},{type:"Property",name:"antispamTag",reflectMapper:wa.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:aa.channelInfo}]},qchatDeleteChannel:{sid:24,cid:49,service:"qchatChannel",params:[{type:"Long",name:"channelId"}]},qchatUpdateChannel:{sid:24,cid:50,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:wa.qchatUpdateChannelTag},{type:"Property",name:"antispamTag",reflectMapper:wa.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:aa.channelInfo}]},qchatGetChannels:{sid:24,cid:51,service:"qchatChannel",params:[{type:"LongArray",name:"channelIds"}],response:[{type:"PropertyArray",name:"channelList",reflectMapper:aa.channelInfo}]},qchatGetChannelsByPage:{sid:24,cid:52,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelListPageTag",reflectMapper:wa.qchatGetChannelListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.channelInfo}]},qchatGetMembersByPage:{sid:24,cid:53,service:"qchatChannel",params:[{type:"Property",name:"qchatGetMembersByPageTag",reflectMapper:wa.qchatGetMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatUpdateWhiteBlackRole:{sid:24,cid:54,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackRoleTag",reflectMapper:wa.qchatUpdateWhiteBlackRoleTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetWhiteBlackRolesPage:{sid:24,cid:55,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackRolesPageTag",reflectMapper:wa.qchatGetWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatUpdateWhiteBlackMembers:{sid:24,cid:56,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackMembersTag",reflectMapper:wa.qchatUpdateWhiteBlackMembersTag}]},qchatGetWhiteBlackMembersPage:{sid:24,cid:57,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackMembersPageTag",reflectMapper:wa.qchatGetWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetExistingWhiteBlackRoles:{sid:24,cid:58,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackRolesTag",reflectMapper:wa.qchatGetExistingWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatGetExistingWhiteBlackMembers:{sid:24,cid:59,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackMembersTag",reflectMapper:wa.qchatGetExistingWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatUpdateCategoryInfoOfChannel:{sid:24,cid:60,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateCategoryInfoOfChannelTag",reflectMapper:wa.channelInfo}],response:[{type:"Property",name:"channelInfo",reflectMapper:aa.channelInfo}]},qchatCreateChannelCategory:{sid:24,cid:109,service:"qchatChannel",params:[{type:"Property",name:"qchatCreateChannelCategoryTag",reflectMapper:wa.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatRemoveChannelCategory:{sid:24,cid:110,service:"qchatChannel",params:[{type:"Long",name:"categoryId"}]},qchatUpdateChannelCategory:{sid:24,cid:111,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryTag",reflectMapper:wa.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatGetChannelCategoriesByID:{sid:24,cid:112,service:"qchatChannel",params:[{type:"LongArray",name:"categoryIds"}],response:[{type:"PropertyArray",name:"channelCategoryList",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatUpdateChannelCategoryWhiteBlackRole:{sid:24,cid:113,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackRoleTag",reflectMapper:wa.qchatUpdateChannelCategoryWhiteBlackRoleTag}]},qchatGetChannelCategoryWhiteBlackRolesPage:{sid:24,cid:114,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesPageTag",reflectMapper:wa.qchatGetChannelCategoryWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatUpdateChannelCategoryWhiteBlackMembers:{sid:24,cid:115,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackMembersTag",reflectMapper:wa.qchatUpdateChannelCategoryWhiteBlackMembersTag}]},qchatGetChannelCategoryWhiteBlackMembersPage:{sid:24,cid:116,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersPageTag",reflectMapper:wa.qchatGetChannelCategoryWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetChannelCategoryWhiteBlackRoles:{sid:24,cid:117,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesTag",reflectMapper:wa.qchatGetChannelCategoryWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatGetChannelCategoryWhiteBlackMembers:{sid:24,cid:118,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersTag",reflectMapper:wa.qchatGetChannelCategoryWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetChannelCategoriesPage:{sid:24,cid:119,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoriesPageTag",reflectMapper:wa.qchatGetChannelCategoriesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatGetChannelCategoryChannelsPage:{sid:24,cid:120,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryChannelsPageTag",reflectMapper:wa.qchatGetChannelCategoryChannelsPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.channelInfo}]},qchatSubscribe:{sid:24,cid:15,service:"qchatChannel",params:[{type:"Property",name:"qchatSubReqTag",reflectMapper:wa.qchatSubReqTag},{type:"PropertyArray",name:"channels",reflectMapper:wa.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:aa.unreadInfo},{type:"PropertyArray",name:"failedChannels",reflectMapper:aa.qchatChannelIdInfoTag}]},qchatAutoSubscribe:{sid:25,cid:12,service:"qchatChannel",hasPacketTimer:!1,params:[{type:"Property",name:"qchatAutoSubReqTag"}],response:[{type:"Property",name:"qchatAutoSubInfo",reflectMapper:{1:"time"}}]},qchatAutoSubscribeNotification:{service:"qchatChannel",sid:25,cid:13,response:[{type:"PropertyArray",name:"serverIds",reflectMapper:aa.unreadInfo},{type:"PropertyArray",name:"unreadInfos",reflectMapper:aa.unreadInfo}]},qchatGetUnreadInfo:{sid:24,cid:27,service:"qchatChannel",params:[{type:"PropertyArray",name:"channels",reflectMapper:wa.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:aa.unreadInfo}]},qchatGetChannelSearchByPage:{sid:24,cid:93,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelSearchByPageTag",reflectMapper:wa.qchatGetChannelSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.channelInfo}]},qchatGetRoleIdsByServerId:{sid:25,cid:8,service:"qchatChannel",params:[{type:"Property",name:"qchatGetRoleIdsByServerIdTag",reflectMapper:{serverIdTimeTags:1}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:aa.serverRoles},{type:"LongArray",name:"failServerIds"}]},qchatChannelMemberSearch:{sid:24,cid:95,service:"qchatChannel",params:[{type:"Property",name:"qchatChannelMemberSearchTag",reflectMapper:wa.qchatChannelMemberSearchTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.qchatChannelMemberInfo}]},qchatSubscribeAsVisitor:{sid:25,cid:9,service:"qchatChannel",params:[{type:"Property",name:"tag",reflectMapper:wa.qchatSubReqTag},{type:"PropertyArray",name:"datas",reflectMapper:wa.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"failedArr",reflectMapper:aa.qchatChannelIdInfoTag}]}},Tp={"24_31":"qchatCreateServer","24_32":"qchatDeleteServer","24_33":"qchatUpdateServer","24_34":"qchatGetServers","24_35":"qchatGetServersByPage","24_36":"qchatInviteServerMembers","24_37":"qchatAcceptServerInvite","24_38":"qchatRejectInviteServer","24_39":"qchatApplyServerJoin","24_40":"qchatAcceptServerApply","24_41":"qchatRejectServerApply","24_42":"qchatKickServerMembers","24_43":"qchatLeaveServer","24_44":"qchatUpdateMyMemberInfo","24_45":"qchatUpdateServerMemberInfo","24_46":"qchatGetServerMembers","24_47":"qchatGetServerMembersByPage","24_104":"qchatUpdateServerMemberBan","24_105":"qchatGetBannedMembersByPage","24_91":"qchatServerSearchByPage","24_92":"qchatServerMemberSearchByPage","24_122":"qchatGenerateInviteCode","24_123":"qchatJoinByInviteCode","24_124":"qchatGetInviteApplyRecordOfServer","24_125":"qchatGetInviteApplyRecordOfSelf","25_5":"qchatClearServersUnread","25_7":"qchatSubscribeChannelsByServers","25_10":"qchatEnterAsVisitor","25_11":"qchatLeaveAsVisitor"},vs={serverInfo:{serverId:1,name:3,icon:4,ext:5,owner:6,memberNumber:7,inviteMode:8,applyMode:9,validFlag:10,createTime:11,updateTime:12,channelNumber:13,categoryNumber:14,searchType:15,searchEnable:16,reorderWeight:17},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},otherMemberInfo:{serverId:1,accid:3,nick:4,avatar:5,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},getServerListPageTag:{timestamp:1,limit:2},getServerMemberListPageTag:{serverId:1,timetag:2,limit:3},updateServerMemberBanTag:{serverId:1,opeType:2,accid:3,ext:4},getBannedMembersByPageTag:{serverId:1,timetag:2,limit:3},serverMemberBanInfo:{serverId:1,appid:2,accid:3,ext:4,banTime:5,validFlag:6,createTime:7,updateTime:8},serverSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverType:6,searchType:7,sort:8,cursor:9},serverMemberSearchByPageTag:{serverId:1,keyword:3,limit:4},inviteRespParamTag:{requestId:1},applyRespParamTag:{requestId:1,expireTime:2},inviteApplyRecord:{accid:1,type:2,serverId:3,status:4,requestId:5,createTime:6,updateTime:7,expireTime:8,data:9,recordId:10},clearServersUnreadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},unreadInfo:_m},ss=Wi(vs),yC={qchatCreateServer:{sid:24,cid:31,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:vs.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:vs.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:ss.serverInfo}]},qchatDeleteServer:{sid:24,cid:32,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateServer:{sid:24,cid:33,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:vs.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:vs.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:ss.serverInfo}]},qchatGetServers:{sid:24,cid:34,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"serverList",reflectMapper:ss.serverInfo}]},qchatGetServersByPage:{sid:24,cid:35,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:vs.getServerListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:ss.serverInfo}]},qchatInviteServerMembers:{sid:24,cid:36,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"StrArray",name:"failByOverAccids"},{type:"StrArray",name:"failByBanAccids"},{type:"Property",name:"record",reflectMapper:ss.applyRespParamTag}]},qchatAcceptServerInvite:{sid:24,cid:37,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:vs.inviteRespParamTag}]},qchatRejectInviteServer:{sid:24,cid:38,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:vs.inviteRespParamTag}]},qchatApplyServerJoin:{sid:24,cid:39,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"Property",name:"data",reflectMapper:ss.applyRespParamTag}]},qchatAcceptServerApply:{sid:24,cid:40,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:vs.applyRespParamTag}]},qchatRejectServerApply:{sid:24,cid:41,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:vs.applyRespParamTag}]},qchatKickServerMembers:{sid:24,cid:42,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"}]},qchatLeaveServer:{sid:24,cid:43,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateMyMemberInfo:{sid:24,cid:44,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:vs.memberInfo},{type:"Property",name:"antispamTag",reflectMapper:vs.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:ss.memberInfo}]},qchatUpdateServerMemberInfo:{sid:24,cid:45,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:vs.otherMemberInfo},{type:"Property",name:"antispamTag",reflectMapper:vs.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:ss.memberInfo}]},qchatGetServerMembers:{sid:24,cid:46,service:"qchatServer",params:[{type:"StrArray",name:"accids"}],response:[{type:"PropertyArray",name:"accidList",reflectMapper:ss.memberInfo}]},qchatGetServerMembersByPage:{sid:24,cid:47,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:vs.getServerMemberListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:ss.memberInfo}]},qchatUpdateServerMemberBan:{sid:24,cid:104,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:vs.updateServerMemberBanTag}]},qchatGetBannedMembersByPage:{sid:24,cid:105,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:vs.getBannedMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:ss.serverMemberBanInfo}]},qchatServerSearchByPage:{sid:24,cid:91,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:vs.serverSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:ss.serverInfo}]},qchatServerMemberSearchByPage:{sid:24,cid:92,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:vs.serverMemberSearchByPageTag}],response:[{type:"PropertyArray",name:"members",reflectMapper:ss.memberInfo}]},qchatGenerateInviteCode:{sid:24,cid:122,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,ttl:2}}],response:[{type:"Property",name:"data",reflectMapper:{1:"serverId",2:"requestId",3:"inviteCode",4:"expireTime"}}]},qchatJoinByInviteCode:{sid:24,cid:123,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,inviteCode:2,ps:3}}]},qchatGetInviteApplyRecordOfServer:{sid:24,cid:124,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,fromTime:2,toTime:3,reverse:4,limit:5,cursor:6}}],response:[{type:"PropertyArray",name:"data",reflectMapper:ss.inviteApplyRecord}]},qchatGetInviteApplyRecordOfSelf:{sid:24,cid:125,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{fromTime:1,toTime:2,reverse:3,limit:4,cursor:5}}],response:[{type:"PropertyArray",name:"data",reflectMapper:ss.inviteApplyRecord}]},qchatClearServersUnread:{sid:25,cid:5,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"Property",name:"clearServersUnreadTag",reflectMapper:ss.clearServersUnreadTag}]},qchatSubscribeChannelsByServers:{sid:25,cid:7,service:"qchatServer",params:[{type:"int",name:"type"},{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:ss.unreadInfo},{type:"LongArray",name:"failServerIds"}]},qchatEnterAsVisitor:{sid:25,cid:10,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]},qchatLeaveAsVisitor:{sid:25,cid:11,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]}};function Wa(pe,xe){if(!pp(xe))return{};var qe=JSON.parse(Ao(xe)),Oe=Mv(pe,qe);return JSON.parse(Ao(Hn(Hn({},qe),Oe)))}function Mv(pe,xe){if(!pp(xe))return{};var qe={},Oe=Sa(pe);return To(Oe).call(Oe,function(Ie){var At=pe[Ie].type;if(typeof At!="string"){var Dt=Mv(pe[Ie],xe);Sa(Dt).length>0&&(qe[Ie]=Dt)}else{var Pt=pe[Ie],ir=Pt.rawKey||Ie,hr=bC[At](xe,ir,Pt);hr!==void 0&&(xe[ir]=void 0,qe[Ie]=hr)}}),qe}var bC={number:function(xe,qe){if(xe[qe]!==void 0)return+xe[qe]},string:function(xe,qe){if(xe[qe]!==void 0)return xe[qe]},boolean:function(xe,qe){return+xe[qe]>0||+xe[qe]!=0&&void 0},enum:function(xe,qe,Oe){return eu(Oe)[xe[qe]]},object:function(xe,qe){if(xe[qe]!==void 0)try{return JSON.parse(xe[qe])}catch{return{}}}};function Cp(pe,xe){if(!pp(xe))return{};var qe=JSON.parse(Ao(xe)),Oe=kv(pe,qe);return JSON.parse(Ao(Hn(Hn({},qe),Oe)))}function kv(pe,xe){var qe;if(!pp(xe))return td(qe=Sa(pe)).call(qe,function(At,Dt){return At[pe[Dt].rawKey||Dt]=void 0,At},{});var Oe={},Ie=Sa(pe);return To(Ie).call(Ie,function(At){var Dt=pe[At].type;if(typeof Dt!="string"){var Pt=kv(pe[At],xe[At]);return Hn(Oe,Pt),void(xe[At]=void 0)}var ir=pe[At],hr=ir.rawKey||At,xr=$0[Dt](xe,At,ir);xe[hr]=void 0,Oe[hr]=xr}),Oe}var $0={number:function(xe,qe){return xe[qe]},string:function(xe,qe){return xe[qe]},boolean:function(xe,qe){return xe[qe]===!0?1:xe[qe]===!1?0:void 0},enum:function(xe,qe,Oe){return eu(Oe)[xe[qe]]},object:function(xe,qe){if(xe[qe]!==void 0)try{return Ao(xe[qe])}catch{return""}}},xm=$0,SC={serverId:{type:"string"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"},owner:{type:"string"},memberNumber:{type:"number"},inviteMode:{type:"number"},applyMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"},categoryNumber:{type:"number"},searchType:{type:"number"},searchEnable:{type:"boolean"},reorderWeight:{type:"string"}},j0={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},TC={serverId:{type:"string"},appid:{type:"string"},accid:{type:"string"},ext:{type:"string"},banTime:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}};function Mp(pe){return Wa(SC,pe)}function wv(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return Mp(xe)}):[]}function kp(pe){return Wa(j0,pe)}function hl(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return kp(xe)}):[]}function vl(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return function(Oe){return Wa(TC,Oe)}(xe)}):[]}function fc(pe){var xe,qe,Oe;if(!pe.antispamTag)return{};var Ie=Hn({},pe.antispamTag);return!((xe=pe.antispamTag)===null||xe===void 0)&&xe.antiSpamBusinessId&&typeof((qe=pe.antispamTag)===null||qe===void 0?void 0:qe.antiSpamBusinessId)!="string"&&(Ie.antiSpamBusinessId=Ao((Oe=pe.antispamTag)===null||Oe===void 0?void 0:Oe.antiSpamBusinessId)),Ie}var D0={accid:{type:"string"},type:{type:"number"},serverId:{type:"string"},status:{type:"number"},requestId:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"},expireTime:{type:"number"},data:{type:"object"}};function Im(pe){return Wa(D0,pe)}function nd(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return Im(xe)}):[]}var wp,Na,_i,xi,CC={successServerIds:{type:"object"},failServerIds:{type:"object"},ackTimestamp:{type:"number"}};function Pc(pe){return Wa(CC,pe)}(function(pe){pe[pe.reorderWeight=0]="reorderWeight",pe[pe.createTime=1]="createTime"})(wp||(wp={})),function(pe){pe[pe.white=1]="white",pe[pe.black=2]="black"}(Na||(Na={})),function(pe){pe[pe.add=1]="add",pe[pe.remove=2]="remove"}(_i||(_i={})),function(pe){pe[pe.message=0]="message",pe[pe.media=1]="media",pe[pe.ext=100]="ext"}(xi||(xi={}));var Es={channelId:{type:"string"},serverId:{type:"string"},name:{type:"string"},topic:{type:"string"},ext:{type:"string"},type:{type:"enum",values:xi},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},viewMode:{type:"number"},categoryId:{type:"string"},syncMode:{type:"number"},visitorMode:{type:"number"},reorderWeight:{type:"string"}},MC={serverId:{type:"string"},channelId:{type:"string"},ackTimestamp:{type:"number"},unreadCount:{type:"number"},mentionedCount:{type:"number"},maxCount:{type:"number"},lastMsgTime:{type:"number"}},kC={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:Na},opeType:{type:"enum",values:_i},toAccids:{type:"object"}},U0={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:Na},opeType:{type:"enum",values:_i},roleId:{type:"string"}},_p={categoryId:{type:"string"},serverId:{type:"string"},name:{type:"string"},ext:{type:"string"},owner:{type:"string"},viewMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"}},wC={serverId:{type:"string"},channelId:{type:"string"},accid:{type:"string"},avatar:{type:"string"},nick:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Em(pe){return Wa(U0,pe)}function od(pe){return Wa(Es,pe)}function Pm(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return od(xe)}):[]}function Am(pe){return Wa(MC,pe)}function ad(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return Am(xe)}):[]}function xp(pe){return Wa(_p,pe)}function Ac(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return xp(xe)}):[]}function _C(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return function(Oe){return Wa(wC,Oe)}(xe)}):[]}function Ii(pe){try{return JSON.parse(pe)}catch{return[]}}var Nm=fi?fi.isConcatSpreadable:void 0,V0=function(xe){return Ci(xe)||Du(xe)||!!(Nm&&xe&&xe[Nm])},_v=function pe(xe,qe,Oe,Ie,At){var Dt=-1,Pt=xe.length;for(Oe||(Oe=V0),At||(At=[]);++Dt<Pt;){var ir=xe[Dt];qe>0&&Oe(ir)?qe>1?pe(ir,qe-1,Oe,Ie,At):_h(At,ir):Ie||(At[At.length]=ir)}return At},Ip=pm(function(pe,xe){return Yu(pe)?um(pe,_v(xe,1,Yu,!0)):[]}),q0=Ip;function xC(pe,xe){var qe,Oe=Hs!==void 0&&Tm(pe)||pe["@@iterator"];if(Oe)return oa(qe=(Oe=Oe.call(pe)).next).call(qe,Oe);if(Cs(pe)||(Oe=function(Dt,Pt){var ir;if(Dt){if(typeof Dt=="string")return H0(Dt,Pt);var hr=qa(ir=Object.prototype.toString.call(Dt)).call(ir,8,-1);if(hr==="Object"&&Dt.constructor&&(hr=Dt.constructor.name),hr==="Map"||hr==="Set")return pl(Dt);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return H0(Dt,Pt)}}(pe))||xe&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ie=0;return function(){return Ie>=pe.length?{done:!0}:{done:!1,value:pe[Ie++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0(pe,xe){(xe==null||xe>pe.length)&&(xe=pe.length);for(var qe=0,Oe=new Array(xe);qe<xe;qe++)Oe[qe]=pe[qe];return Oe}var cu,Ep,sd,yl,bl=function(pe){function xe(Oe){var Ie;return(Ie=pe.call(this,"qchatServer",Oe)||this).core=Oe,ou({cmdMap:Tp,cmdConfig:yC}),Ie}ra(xe,pe);var qe=xe.prototype;return qe.createServer=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatCreateServer",{serverInfo:Hn(Hn({},Ie),{searchEnable:Ie.searchEnable===!1?0:1}),antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",Mp(Dt.content.serverInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.deleteServer=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1}},Ie),Pt.next=3,this.core.sendCmd("qchatDeleteServer",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateServer=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateServer",{serverInfo:Hn(Hn({},Ie),{searchEnable:Ie.searchEnable===!1?0:1}),antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",Mp(Dt.content.serverInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.getServers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverIds:{type:"array",itemType:"string",min:1}},Ie),ir.next=3,this.core.sendCmd("qchatGetServers",Ie);case 3:return Dt=ir.sent,ir.abrupt("return",wv(Dt.content.serverList));case 5:case"end":return ir.stop()}},At,this)}))},qe.getServersByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({timestamp:{type:"number"},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetServersByPage",{tag:Ie});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:wv(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.inviteServerMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},Ie),hr.next=3,this.core.sendCmd("qchatInviteServerMembers",Ie);case 3:return Dt=hr.sent,Pt=Dt.content.record||{},hr.abrupt("return",{failByOverAccids:Dt.content.failByOverAccids,failByBanAccids:Dt.content.failByBanAccids,recordInfo:Im(Pt)});case 6:case"end":return hr.stop()}},At,this)}))},qe.acceptServerInvite=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ie),Pt.next=3,this.core.sendCmd("qchatAcceptServerInvite",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.rejectInviteServer=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ie),Pt.next=3,this.core.sendCmd("qchatRejectInviteServer",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.applyServerJoin=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatApplyServerJoin",Ie);case 3:return Dt=ir.sent,ir.abrupt("return",Im(Dt.content.data));case 5:case"end":return ir.stop()}},At,this)}))},qe.acceptServerApply=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ie),Pt.next=3,this.core.sendCmd("qchatAcceptServerApply",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.rejectServerApply=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ie),Pt.next=3,this.core.sendCmd("qchatRejectServerApply",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.kickServerMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1}},Ie),Pt.next=3,this.core.sendCmd("qchatKickServerMembers",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.leaveServer=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1}},Ie),Pt.next=3,this.core.sendCmd("qchatLeaveServer",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateMyMemberInfo=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",required:!1},nick:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",required:!1},ext:{type:"string",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateMyMemberInfo",{memberInfo:Ie,antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",kp(Dt.content.memberInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.updateServerMemberInfo=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateServerMemberInfo",{memberInfo:Ie,antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",kp(Dt.content.memberInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.getServerMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(jn({accids:{type:"array"}},Ie),Dt=[],Ie.accids.length)for(Pt=xC(Ie.accids);!(ir=Pt()).done;)hr=ir.value,Dt.push(hr.serverId+"|"+hr.accid);return jr.next=5,this.core.sendCmd("qchatGetServerMembers",{accids:Dt});case 5:return xr=jr.sent,jr.abrupt("return",hl(xr.content.accidList));case 7:case"end":return jr.stop()}},At,this)}))},qe.getServerMembersByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetServerMembersByPage",{tag:Ie});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.subscribeServer=function(Ie){var At,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(jn({type:{type:"number",min:4,max:4,required:!1},opeType:{type:"number",min:1,max:2}},Ie),!(!((At=this.core.otherOptions.qchatChannelConfig)===null||At===void 0)&&At.autoSubscribe)||Ie.isInternalTrigger){Ur.next=3;break}throw new Ro("subscribe server failed, manual subscribe is not allowed in auto subscribe mode",{},403);case 3:if(Ie.type||(Ie.type=4),!Ie.servers.length){Ur.next=12;break}return hr=Hn(Hn({},Ie),{channels:Do(ir=Ie.servers).call(ir,function(Yr){return{serverId:Yr.serverId,channelId:""}})}),Ur.next=8,this.core.qchatChannel.subscribeModuleService.subscribe(hr);case 8:return xr=Ur.sent,Or=xr.failedChannels,!((Dt=this.core.otherOptions.qchatChannelConfig)===null||Dt===void 0)&&Dt.autoSubscribe?this.core.qchatChannel.subscribeModuleService.cacheAutoSubscribe(hr):this.core.qchatChannel.subscribeModuleService.cacheSubscribe(hr),Ur.abrupt("return",{failedServers:Or});case 12:case"end":return Ur.stop()}},Pt,this)}))},qe.banServerMember=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Hn(Hn({},Ie),{opeType:1})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.unbanServerMember=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:Hn(Hn({},Ie),{opeType:2})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getBannedMembersByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetBannedMembersByPage",{tag:Ie});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:vl(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.serverSearchByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},serverType:{type:"array",itemType:"number",min:0,required:!1},order:{type:"enum",values:Aa(ml),required:!1},searchType:{type:"enum",values:Aa(vp)},sort:{type:"enum",values:Aa(hp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ie),!(Ie.startTime&&Ie.endTime&&Ie.startTime>=Ie.endTime)){Or.next=3;break}throw new ru("startTime more than endTime",Ie,"timeRule");case 3:return Or.next=5,this.core.sendCmd("qchatServerSearchByPage",{tag:Hn(Hn({},Ie),{order:Ie.order&&ml[Ie.order],searchType:vp[Ie.searchType],sort:yp(Ie)&&hp[yp(Ie)],serverType:Ao(Ie.serverType)})});case 5:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag),cursor:hr.cursor},datas:wv(ir)});case 8:case"end":return Or.stop()}},At,this)}))},qe.serverMemberSearchByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatServerMemberSearchByPage",{tag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",hl(Dt.content.members));case 5:case"end":return ir.stop()}},At,this)}))},qe.generateInviteCode=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},ttl:{type:"number",min:0,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGenerateInviteCode",{tag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",Wa({expireTime:{type:"number"}},Dt.content.data));case 5:case"end":return ir.stop()}},At,this)}))},qe.joinByInviteCode=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},inviteCode:{type:"string",allowEmpty:!1},ps:{type:"string",required:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatJoinByInviteCode",{tag:Ie});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getInviteApplyRecordOfServer=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfServer",{tag:Hn(Hn({},Ie),{reverse:Hd(Ie)?1:0})});case 3:return Dt=ir.sent,ir.abrupt("return",nd(Dt.content.data));case 5:case"end":return ir.stop()}},At,this)}))},qe.getInviteApplyRecordOfSelf=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfSelf",{tag:Hn(Hn({},Ie),{reverse:Hd(Ie)?1:0})});case 3:return Dt=ir.sent,ir.abrupt("return",nd(Dt.content.data));case 5:case"end":return ir.stop()}},At,this)}))},qe.markRead=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverIds:{type:"array",itemType:"string",required:!0}},Ie),Or.next=3,this.core.sendCmd("qchatClearServersUnread",Ie);case 3:return Dt=Or.sent,Pt=Pc(Dt.content.clearServersUnreadTag),ir=Pt.successServerIds,hr=Pt.ackTimestamp,this.logger.log("qchatServer::clearServersUnread:: begin auto clear servers unreadInfo"),this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",ir,hr),Or.abrupt("return",Pt);case 9:case"end":return Or.stop()}},At,this)}))},qe.subscribeAllChannel=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({type:{type:"number",required:!0},serverIds:{type:"array",itemType:"string",required:!0,max:10}},Ie),!(!((At=this.core.otherOptions.qchatChannelConfig)===null||At===void 0)&&At.autoSubscribe)){Or.next=3;break}throw new Ro("subscribe channel failed, manual subscribe is not allowed in auto subscribe mode.",{},403);case 3:return Or.next=5,this.core.sendCmd("qchatSubscribeChannelsByServers",Ie,{timeout:3e4});case 5:return(ir=Or.sent).content.unreadInfos=ad(ir.content.unreadInfos),ir.content.failServerIds=Ii(ir.content.failServerIds),hr={type:Ie.type,opeType:1,channels:Do(Pt=ir.content.unreadInfos).call(Pt,function(jr){return{serverId:jr.serverId,channelId:jr.channelId}})},this.core.eventBus.emit("qchatChannel/cacheSubscribe",hr),this.core.eventBus.emit("qchatChannel/getRoleIdsByServerId",Ie.serverIds),this.core.eventBus.emit("qchatChannel/updateUnreads",ir.content.unreadInfos),Or.abrupt("return",ir.content);case 13:case"end":return Or.stop()}},Dt,this)}))},qe.enterAsVisitor=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return jn({serverIds:{type:"array",itemType:"string",min:1}},Ie),xr.next=3,this.core.sendCmd("qchatEnterAsVisitor",{tag:{serverIds:Ao(Ie.serverIds)}});case 3:return Dt=xr.sent,Pt=Ii(Dt.content.failServerIds),ir=q0(Ie.serverIds,Pt),this.core.qchatChannel.subscribeForVisitorService.cacheServer(ir),xr.abrupt("return",{failedServers:Pt});case 8:case"end":return xr.stop()}},At,this)}))},qe.leaveAsVisitor=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverIds:{type:"array",itemType:"string",min:1}},Ie),Or.next=3,this.core.sendCmd("qchatLeaveAsVisitor",{tag:{serverIds:Ao(Ie.serverIds)}});case 3:return Dt=Or.sent,Pt=Ii(Dt.content.failServerIds),ir=q0(Ie.serverIds,Pt),To(ir).call(ir,function(jr){hr.core.qchatChannel.subscribeForVisitorService.deleteServer(jr)}),Or.abrupt("return",{failedServers:Pt});case 8:case"end":return Or.stop()}},At,this)}))},qe.subscribeAsVisitor=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(jn({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},serverIds:{type:"array",itemType:"string",min:1}},Ie),!Ie.serverIds.length){Pt.next=5;break}return Pt.next=4,this.core.qchatChannel.subscribeForVisitorService.subscribeServerAsVisitor(Ie);case 4:return Pt.abrupt("return",Pt.sent);case 5:return Pt.abrupt("return",{failedServers:[]});case 6:case"end":return Pt.stop()}},At,this)}))},xe}(rd);(function(pe){pe[pe.everyone=1]="everyone",pe[pe.custom=2]="custom"})(cu||(cu={})),function(pe){pe[pe.normal=0]="normal",pe[pe.owner=1]="owner"}(Ep||(Ep={})),function(pe){pe[pe.ignore=0]="ignore",pe[pe.deny=-1]="deny",pe[pe.allow=1]="allow"}(sd||(sd={})),function(pe){pe[pe.manageServer=1]="manageServer",pe[pe.manageChannel=2]="manageChannel",pe[pe.manageRole=3]="manageRole",pe[pe.sendMsg=4]="sendMsg",pe[pe.accountInfoSelf=5]="accountInfoSelf",pe[pe.inviteServer=6]="inviteServer",pe[pe.kickServer=7]="kickServer",pe[pe.accountInfoOther=8]="accountInfoOther",pe[pe.recallMsg=9]="recallMsg",pe[pe.deleteMsg=10]="deleteMsg",pe[pe.remindOther=11]="remindOther",pe[pe.remindEveryone=12]="remindEveryone",pe[pe.manageBlackWhiteList=13]="manageBlackWhiteList",pe[pe.banServerMember=14]="banServerMember",pe[pe.RTCChannelConnect=15]="RTCChannelConnect",pe[pe.RTCChannelDisconnectOther=16]="RTCChannelDisconnectOther",pe[pe.RTCChannelOpenMicrophone=17]="RTCChannelOpenMicrophone",pe[pe.RTCChannelOpenCamera=18]="RTCChannelOpenCamera",pe[pe.RTCChannelOpenCloseOtherMicrophone=19]="RTCChannelOpenCloseOtherMicrophone",pe[pe.RTCChannelOpenCloseOtherCamera=20]="RTCChannelOpenCloseOtherCamera",pe[pe.RTCChannelOpenCloseEveryoneMicrophone=21]="RTCChannelOpenCloseEveryoneMicrophone",pe[pe.RTCChannelOpenCloseEveryoneCamera=22]="RTCChannelOpenCloseEveryoneCamera",pe[pe.RTCChannelOpenShareScreen=23]="RTCChannelOpenShareScreen",pe[pe.RTCChannelCloseOtherShareScreen=24]="RTCChannelCloseOtherShareScreen",pe[pe.manageInviteApply=25]="manageInviteApply",pe[pe.manageInviteApplyHistory=26]="manageInviteApplyHistory",pe[pe.mentionedRole=27]="mentionedRole"}(yl||(yl={}));var ks={type:{type:"enum",values:cu},memberType:{type:"enum",values:Ep},createTime:{type:"number"},updateTime:{type:"number"},priority:{type:"number"},memberCount:{type:"number"},joinTime:{type:"number"}},IC={roleId:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},type:{type:"enum",values:cu},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"}},EC={id:{type:"string"},accid:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},memberType:{type:"enum",values:Ep},joinTime:{type:"number"},inviter:{type:"string"}};function Sl(pe){var xe=Hn({},pe),qe=Cp(ks,xe);return qe.auths&&(qe.auths=function(Ie){var At,Dt=td(At=Sa(Ie)).call(At,function(Pt,ir){var hr=yl[ir];return hr?Pt[hr]=sd[Ie[ir]]:Pt[ir]=sd[Ie[ir]],Pt},{});return Ao(Dt)}(qe.auths)),qe}function id(pe){var xe;return td(xe=Sa(pe)).call(xe,function(qe,Oe){var Ie=F0(yl,Oe);return Ie?qe[Ie]=sd[pe[Oe]]:qe[ma(Oe)]=sd[pe[Oe]],qe},{})}function Ei(pe){var xe=Wa(ks,pe);return pe.auths&&(xe.auths=id(JSON.parse(xe.auths))),xe.isMember&&delete xe.isMember,xe}function Pi(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return Ei(xe)}):[]}function xv(pe){return pe.auths&&(pe.auths=id(JSON.parse(pe.auths))),Wa(IC,pe)}function Iv(pe){return pe.auths&&(pe.auths=id(JSON.parse(pe.auths))),Wa(EC,pe)}Zh("Set",function(pe){return function(){return pe(this,arguments.length?arguments[0]:void 0)}},tv);var z0=_r.Set;xn({target:"Set",stat:!0,forced:!0},{from:l0}),xn({target:"Set",stat:!0,forced:!0},{of:u0}),xn({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var xe=lo(this),qe=Xr(xe.add),Oe=0,Ie=arguments.length;Oe<Ie;Oe++)kt(qe,xe,arguments[Oe]);return xe}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:d0});var lu=Ol;xn({target:"Set",proto:!0,real:!0,forced:!0},{every:function(xe){var qe=lo(this),Oe=lu(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return!ia(Oe,function(At,Dt){if(!Ie(At,At,qe))return Dt()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(xe){var qe=lo(this),Oe=new(ji(qe,Pr("Set")))(qe),Ie=Xr(Oe.delete);return ia(xe,function(At){kt(Ie,Oe,At)}),Oe}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(xe){var qe=lo(this),Oe=lu(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0),At=new(ji(qe,Pr("Set"))),Dt=Xr(At.add);return ia(Oe,function(Pt){Ie(Pt,Pt,qe)&&kt(Dt,At,Pt)},{IS_ITERATOR:!0}),At}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{find:function(xe){var qe=lo(this),Oe=lu(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(At,Dt){if(Ie(At,At,qe))return Dt(At)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(xe){var qe=lo(this),Oe=new(ji(qe,Pr("Set"))),Ie=Xr(qe.has),At=Xr(Oe.add);return ia(xe,function(Dt){kt(Ie,qe,Dt)&&kt(At,Oe,Dt)}),Oe}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(xe){var qe=lo(this),Oe=Xr(qe.has);return!ia(xe,function(Ie,At){if(kt(Oe,qe,Ie)===!0)return At()},{INTERRUPTED:!0}).stopped}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(xe){var qe=Ol(this),Oe=lo(xe),Ie=Oe.has;return Ve(Ie)||(Oe=new(Pr("Set"))(xe),Ie=Xr(Oe.has)),!ia(qe,function(At,Dt){if(kt(Ie,Oe,At)===!1)return Dt()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(xe){var qe=lo(this),Oe=Xr(qe.has);return!ia(xe,function(Ie,At){if(kt(Oe,qe,Ie)===!1)return At()},{INTERRUPTED:!0}).stopped}});var PC=Ne([].join),W0=[].push;xn({target:"Set",proto:!0,real:!0,forced:!0},{join:function(xe){var qe=lo(this),Oe=lu(qe),Ie=xe===void 0?",":li(xe),At=[];return ia(Oe,W0,{that:At,IS_ITERATOR:!0}),PC(At,Ie)}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{map:function(xe){var qe=lo(this),Oe=lu(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0),At=new(ji(qe,Pr("Set"))),Dt=Xr(At.add);return ia(Oe,function(Pt){kt(Dt,At,Ie(Pt,Pt,qe))},{IS_ITERATOR:!0}),At}});var AC=TypeError;xn({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(xe){var qe=lo(this),Oe=lu(qe),Ie=arguments.length<2,At=Ie?void 0:arguments[1];if(Xr(xe),ia(Oe,function(Dt){Ie?(Ie=!1,At=Dt):At=xe(At,Dt,Dt,qe)},{IS_ITERATOR:!0}),Ie)throw AC("Reduce of empty set with no initial value");return At}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{some:function(xe){var qe=lo(this),Oe=lu(qe),Ie=Ho(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(At,Dt){if(Ie(At,At,qe))return Dt()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(xe){var qe=lo(this),Oe=new(ji(qe,Pr("Set")))(qe),Ie=Xr(Oe.delete),At=Xr(Oe.add);return ia(xe,function(Dt){kt(Ie,Oe,Dt)||kt(At,Oe,Dt)}),Oe}}),xn({target:"Set",proto:!0,real:!0,forced:!0},{union:function(xe){var qe=lo(this),Oe=new(ji(qe,Pr("Set")))(qe);return ia(xe,Xr(Oe.add),{that:Oe}),Oe}});var cd,Pp,Gi,Ap,Tl,ya,Nc,ld=z0;(function(pe){pe[pe.sendTime=1]="sendTime"})(cd||(cd={})),function(pe){pe[pe.text=0]="text",pe[pe.image=1]="image",pe[pe.audio=2]="audio",pe[pe.video=3]="video",pe[pe.geo=4]="geo",pe[pe.notification=5]="notification",pe[pe.file=6]="file",pe[pe.tip=10]="tip",pe[pe.robot=11]="robot",pe[pe.g2=12]="g2",pe[pe.custom=100]="custom"}(Pp||(Pp={})),function(pe){pe[pe.sending=1]="sending",pe[pe.success=2]="success",pe[pe.failed=3]="failed"}(Gi||(Gi={})),function(pe){pe[pe.notifyAll=1]="notifyAll",pe[pe.notifySubscribe=2]="notifySubscribe"}(Ap||(Ap={})),function(pe){pe[pe.unknown=0]="unknown",pe[pe.server=1]="server",pe[pe.channel=2]="channel",pe[pe.serverAccids=3]="serverAccids",pe[pe.channelAccids=4]="channelAccids",pe[pe.accids=5]="accids"}(Tl||(Tl={})),function(pe){pe[pe.serverMemberInvite=1]="serverMemberInvite",pe[pe.serverMemberInviteReject=2]="serverMemberInviteReject",pe[pe.serverMemberApply=3]="serverMemberApply",pe[pe.serverMemberApplyReject=4]="serverMemberApplyReject",pe[pe.serverCreate=5]="serverCreate",pe[pe.serverRemove=6]="serverRemove",pe[pe.serverUpdate=7]="serverUpdate",pe[pe.serverMemberInviteDone=8]="serverMemberInviteDone",pe[pe.serverMemberInviteAccept=9]="serverMemberInviteAccept",pe[pe.serverMemberApplyDone=10]="serverMemberApplyDone",pe[pe.serverMemberApplyAccept=11]="serverMemberApplyAccept",pe[pe.serverMemberKick=12]="serverMemberKick",pe[pe.serverMemberLeave=13]="serverMemberLeave",pe[pe.serverMemberUpdate=14]="serverMemberUpdate",pe[pe.channelCreate=15]="channelCreate",pe[pe.channelRemove=16]="channelRemove",pe[pe.channelUpdate=17]="channelUpdate",pe[pe.channelUpdateWhiteBlackIdentify=18]="channelUpdateWhiteBlackIdentify",pe[pe.channelUpdateWhiteBlackIdentifyUser=19]="channelUpdateWhiteBlackIdentifyUser",pe[pe.updateQuickComment=20]="updateQuickComment",pe[pe.channelCategoryCreate=21]="channelCategoryCreate",pe[pe.channelCategoryRemove=22]="channelCategoryRemove",pe[pe.channelCategoryUpdate=23]="channelCategoryUpdate",pe[pe.channelCategoryUpdateWhiteBlackIdentify=24]="channelCategoryUpdateWhiteBlackIdentify",pe[pe.channelCategoryUpdateWhiteBlackIdentifyUser=25]="channelCategoryUpdateWhiteBlackIdentifyUser",pe[pe.serverIdentifyAdd=26]="serverIdentifyAdd",pe[pe.serverIdentifyRemove=27]="serverIdentifyRemove",pe[pe.serverIdentifyUpdate=28]="serverIdentifyUpdate",pe[pe.channelIdentifyUpdate=29]="channelIdentifyUpdate",pe[pe.userIdentifyUpdate=30]="userIdentifyUpdate",pe[pe.channelVisibilityUpdate=31]="channelVisibilityUpdate",pe[pe.serverEnterLeave=32]="serverEnterLeave",pe[pe.serverMemberJoinByInviteCode=33]="serverMemberJoinByInviteCode",pe[pe.channelVisibilityToVisitorUpdate=34]="channelVisibilityToVisitorUpdate",pe[pe.myMemberInfoUpdated=35]="myMemberInfoUpdated",pe[pe.custom=100]="custom",pe[pe.msgTyping=101]="msgTyping"}(ya||(ya={})),function(pe){pe[pe.reply=1]="reply",pe[pe.thread=2]="thread",pe[pe.all=3]="all"}(Nc||(Nc={}));var Ev=function(){return qi.Date.now()},NC=/\s/,G0=function(xe){for(var qe=xe.length;qe--&&NC.test(xe.charAt(qe)););return qe},OC=/^\s+/,K0=function(xe){return xe&&xe.slice(0,G0(xe)+1).replace(OC,"")},Pv=/^[-+]0x[0-9a-f]+$/i,RC=/^0b[01]+$/i,Q0=/^0o[0-7]+$/i,BC=parseInt,Om=function(xe){if(typeof xe=="number")return xe;if(ap(xe))return NaN;if(ni(xe)){var qe=typeof xe.valueOf=="function"?xe.valueOf():xe;xe=ni(qe)?qe+"":qe}if(typeof xe!="string")return xe===0?xe:+xe;xe=K0(xe);var Oe=RC.test(xe);return Oe||Q0.test(xe)?BC(xe.slice(2),Oe?2:8):Pv.test(xe)?NaN:+xe},LC=Math.max,J0=Math.min,FC=function(xe,qe,Oe){var Ie,At,Dt,Pt,ir,hr,xr=0,Or=!1,jr=!1,Ur=!0;if(typeof xe!="function")throw new TypeError("Expected a function");function Yr($n){var vo=Ie,Fo=At;return Ie=At=void 0,xr=$n,Pt=xe.apply(Fo,vo)}function _n($n){return xr=$n,ir=setTimeout(Dn,qe),Or?Yr($n):Pt}function Tn($n){var vo=$n-hr;return hr===void 0||vo>=qe||vo<0||jr&&$n-xr>=Dt}function Dn(){var $n=Ev();if(Tn($n))return zn($n);ir=setTimeout(Dn,function(Fo){var qo=qe-(Fo-hr);return jr?J0(qo,Dt-(Fo-xr)):qo}($n))}function zn($n){return ir=void 0,Ur&&Ie?Yr($n):(Ie=At=void 0,Pt)}function Jn(){var $n=Ev(),vo=Tn($n);if(Ie=arguments,At=this,hr=$n,vo){if(ir===void 0)return _n(hr);if(jr)return clearTimeout(ir),ir=setTimeout(Dn,qe),Yr(hr)}return ir===void 0&&(ir=setTimeout(Dn,qe)),Pt}return qe=Om(qe)||0,ni(Oe)&&(Or=!!Oe.leading,Dt=(jr="maxWait"in Oe)?LC(Om(Oe.maxWait)||0,qe):Dt,Ur="trailing"in Oe?!!Oe.trailing:Ur),Jn.cancel=function(){ir!==void 0&&clearTimeout(ir),xr=0,Ie=hr=At=ir=void 0},Jn.flush=function(){return ir===void 0?Pt:zn(Ev())},Jn},Np=function(xe,qe,Oe){var Ie=!0,At=!0;if(typeof xe!="function")throw new TypeError("Expected a function");return ni(Oe)&&(Ie="leading"in Oe?!!Oe.leading:Ie,At="trailing"in Oe?!!Oe.trailing:At),FC(xe,qe,{leading:Ie,maxWait:qe,trailing:At})},Av=function(xe,qe,Oe){var Ie=-1,At=xe.length;qe<0&&(qe=-qe>At?0:At+qe),(Oe=Oe>At?At:Oe)<0&&(Oe+=At),At=qe>Oe?0:Oe-qe>>>0,qe>>>=0;for(var Dt=Array(At);++Ie<At;)Dt[Ie]=xe[Ie+qe];return Dt},$C=1/0,jC=function(xe){return xe?(xe=Om(xe))===$C||xe===-1/0?17976931348623157e292*(xe<0?-1:1):xe==xe?xe:0:xe===0?xe:0},Nv=function(xe){var qe=jC(xe),Oe=qe%1;return qe==qe?Oe?qe-Oe:qe:0},Ov=Math.ceil,Rv=Math.max,Oc,uu=function(xe,qe,Oe){qe=(Oe?M0(xe,qe,Oe):qe===void 0)?1:Rv(Nv(qe),0);var Ie=xe==null?0:xe.length;if(!Ie||qe<1)return[];for(var At=0,Dt=0,Pt=Array(Ov(Ie/qe));At<Ie;)Pt[Dt++]=Av(xe,At,At+=qe);return Pt};(function(pe){pe[pe.sub=1]="sub",pe[pe.unSub=2]="unSub"})(Oc||(Oc={}));var Bv,Y0=function(){function pe(qe){var Oe=this;this.unreadCount={},this.manualSubscribeUnreadMap={},this.manualSubscribeServerMap={},this.manualSubscribeTypingMap={},this.unreadServerCount={},this.serverRoleIdsMap={},this.autoSubscribeUnreadMap={},this.autoSubscribeServerMap={},this._serverUnreadInfo=Np(function(Ie){Oe.core.emit("serverUnreadInfo",Oe.getServerUnreadInfo(Ie))},100),this.core=qe}var xe=pe.prototype;return xe.changeCacheServerRoleIds=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr,Or,jr=this;return Dr.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(Dt=Oe.attach.serverIdentifyInfo,Pt=Dt.serverId,ir=Dt.roleId,this.serverRoleIdsMap[Pt]){Yr.next=4;break}return Yr.next=4,this.getRoleIdsByServerId([Pt]);case 4:if(hr=this.serverRoleIdsMap[Pt],!(Oe.time<hr.timeTag)){Yr.next=7;break}return Yr.abrupt("return");case 7:if(Oe.type===ya[ya.serverIdentifyAdd]?hr.roleIds.add(ir):hr.roleIds.delete(ir),this.core.logger.debug("QChatChannel::qchatChannel/serverIdentifyChange::now "+Pt+" roleIds is",qs(At=[]).call(At,hr.roleIds)),xr=this.unreadServerCount[Pt]){Yr.next=12;break}return Yr.abrupt("return");case 12:Or=uu(Sa(xr),100),To(Or).call(Or,function(_n){jr.core.qchatChannel.getChannelUnreadInfos({channels:Do(_n).call(_n,function(Tn){return{serverId:Pt,channelId:Tn}})})});case 14:case"end":return Yr.stop()}},Ie,this)}))},xe.getRoleIdsByServerId=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if((Dt=pi(Oe).call(Oe,function(jr){return!hr.serverRoleIdsMap[jr]})).length){Or.next=3;break}return Or.abrupt("return");case 3:return Pt={serverIdTimeTags:Dt},Or.next=6,this.core.sendCmd("qchatGetRoleIdsByServerId",{qchatGetRoleIdsByServerIdTag:Pt});case 6:ir=Or.sent,this.core.logger.debug("QChatChannel:: getRoleIdsByServerId, params is ",Pt,"result is",ir),To(At=ir.content.serverRoles).call(At,function(jr){try{jr.roleIds=JSON.parse(jr.roleIds)}catch(Ur){hr.core.logger.error("QChatChannel:: getRoleIdsByServerId JSON parse roleIds error",Ur)}hr.serverRoleIdsMap[jr.serverId]={roleIds:new ld(jr.roleIds),timeTag:jr.timeTag}});case 9:case"end":return Or.stop()}},Ie,this)}))},xe._unSubscribeChannel=function(Oe,Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Dt=Oe+"_"+Ie,Pt=[],this.manualSubscribeUnreadMap[Dt]?Pt.push(this.manualSubscribeUnreadMap[Dt]):this.autoSubscribeUnreadMap[Dt]&&Pt.push(this.autoSubscribeUnreadMap[Dt]),this.manualSubscribeTypingMap[Dt]&&Pt.push(this.manualSubscribeTypingMap[Dt]),Pt.length!==0){jr.next=6;break}return jr.abrupt("return");case 6:for(ir=0,hr=Pt;ir<hr.length;ir++)xr=hr[ir],this.subscribe({opeType:Oc.unSub,type:xr,channels:[{serverId:Oe,channelId:Ie}]});this.manualSubscribeUnreadMap[Dt]?this.manualSubscribeUnreadMap[Dt]=void 0:this.autoSubscribeUnreadMap[Dt]&&(this.autoSubscribeUnreadMap[Dt]=void 0),this.manualSubscribeTypingMap[Dt]&&(this.manualSubscribeTypingMap[Dt]=void 0);case 9:case"end":return jr.stop()}},At,this)}))},xe._unSubscribeServer=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(At=Oe,Dt=this.manualSubscribeServerMap[At]||this.autoSubscribeServerMap[At]){ir.next=4;break}return ir.abrupt("return");case 4:this.subscribe({opeType:Oc.unSub,type:Dt,channels:[{serverId:Oe,channelId:""}]}),this.manualSubscribeServerMap[At]?this.manualSubscribeServerMap[At]=void 0:this.autoSubscribeServerMap[At]&&(this.autoSubscribeServerMap[At]=void 0);case 6:case"end":return ir.stop()}},Ie,this)}))},xe.subscribe=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},Oe),Or.next=3,this.core.sendCmd("qchatSubscribe",{qchatSubReqTag:{type:Oe.type,opeType:Oe.opeType},channels:Oe.channels});case 3:return Dt=Or.sent,Pt=new ld,To(At=Oe.channels).call(At,function(jr){return hn(hr,void 0,void 0,Dr.mark(function Ur(){return Dr.wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:this.serverRoleIdsMap[jr.serverId]||Pt.add(jr.serverId);case 1:case"end":return _n.stop()}},Ur,this)}))}),ir=uu(pl(Pt),10),To(ir).call(ir,function(jr){hr.getRoleIdsByServerId(jr)}),Or.abrupt("return",Dt.content);case 9:case"end":return Or.stop()}},Ie,this)}))},xe.autoSubscribe=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){return Dr.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.core.sendCmd("qchatAutoSubscribe",{qchatAutoSubReqTag:{}});case 2:case"end":return At.stop()}},Oe,this)}))},xe.resumeSubscribe=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr,Or,jr=this;return Dr.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(this.serverRoleIdsMap={},hr=100,Oe.isAutoReconnect){Yr.next=6;break}return this.unreadServerCount={},this.unreadCount={},Yr.abrupt("return");case 6:return xr={},To(At=Sa(this.manualSubscribeUnreadMap)).call(At,function(_n){var Tn=jr.manualSubscribeUnreadMap[_n];if(Tn){var Dn=_n.split("_"),zn={serverId:Dn[0],channelId:Dn[1]};xr[Tn]=xr[Tn]||[],xr[Tn].push(zn)}}),xr[5]=[],To(Dt=Sa(this.manualSubscribeTypingMap)).call(Dt,function(_n){return hn(jr,void 0,void 0,Dr.mark(function Tn(){var Dn,zn,Jn,$n;return Dr.wrap(function(Fo){for(;;)switch(Fo.prev=Fo.next){case 0:this.manualSubscribeTypingMap[_n]&&(Dn=_n.split("_"),zn=Dn[0],Jn=Dn[1],$n={serverId:zn,channelId:Jn},xr[5].push($n));case 2:case"end":return Fo.stop()}},Tn,this)}))}),xr[4]=[],To(Pt=Sa(this.manualSubscribeServerMap)).call(Pt,function(_n){return hn(jr,void 0,void 0,Dr.mark(function Tn(){var Dn;return Dr.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:this.manualSubscribeServerMap[_n]&&(Dn={serverId:_n},xr[4].push(Dn));case 2:case"end":return Jn.stop()}},Tn,this)}))}),Or=[],To(ir=Sa(xr)).call(ir,function(_n){var Tn=xr[_n];if(Tn&&Tn.length===0)return ca.resolve();if(Tn.length>hr){var Dn=uu(Tn,100);return To(Dn).call(Dn,function(zn){Or.push(jr.createSubscribePromise(zn,_n))})}Or.push(jr.createSubscribePromise(Tn,_n))}),Yr.next=16,ca.all(Or);case 16:case"end":return Yr.stop()}},Ie,this)}))},xe.createSubscribePromise=function(Oe,Ie){var At=this,Dt={type:ma(Ie),opeType:1,channels:Oe};return this.core.logger.debug("qchatChannel:: autoSubscribeUnread params",Dt),this.subscribe(Dt).then(function(Pt){var ir=Pt.unreadInfos;ir&&ir.length>0&&(ir=ad(ir),At.updateUnreads(ir))}).catch(function(Pt){At.core.logger.error("qchatChannel:: autoSubscribeUnread error ",Pt)})},xe.cacheSubscribe=function(Oe){var Ie,At=this;To(Ie=Oe.channels).call(Ie,function(Dt){var Pt=Dt.channelId?Dt.serverId+"_"+Dt.channelId:""+Dt.serverId,ir=Oe.type===5?At.manualSubscribeTypingMap:Oe.type===4?At.manualSubscribeServerMap:At.manualSubscribeUnreadMap;Oe.opeType===Oc.sub?ir[Pt]=Oe.type:Oe.opeType===Oc.unSub&&(ir[Pt]=void 0)})},xe.cacheAutoSubscribe=function(Oe){var Ie,At=this;To(Ie=Oe.channels).call(Ie,function(Dt){var Pt=Dt.channelId?Dt.serverId+"_"+Dt.channelId:""+Dt.serverId,ir=Oe.type===4?At.autoSubscribeServerMap:At.autoSubscribeUnreadMap;Oe.opeType===Oc.sub?ir[Pt]=Oe.type:Oe.opeType===Oc.unSub&&(ir[Pt]=void 0)})},xe.cacheUnreadCount=function(Oe){var Ie=this;To(Oe).call(Oe,function(At){var Dt=At.serverId+"_"+At.channelId;Ie.unreadCount[Dt]=Hn({},At),Ie.unreadServerCount[At.serverId]||(Ie.unreadServerCount[At.serverId]={}),Ie.unreadServerCount[At.serverId][At.channelId]=!0})},xe.getServerUnreadInfo=function(Oe){var Ie,At=this,Dt={serverId:Oe,unreadCount:0,mentionedCount:0,maxCount:0},Pt=this.unreadServerCount[Oe];return Pt&&(To(Ie=Sa(Pt)).call(Ie,function(ir){var hr=Oe+"_"+ir,xr=At.unreadCount[hr];Dt.unreadCount+=xr.unreadCount,Dt.mentionedCount+=xr.mentionedCount,xr.maxCount!==void 0&&(Dt.maxCount=xr.maxCount)}),Dt.unreadCount=Dt.unreadCount>Dt.maxCount?Dt.maxCount:Dt.unreadCount,Dt.mentionedCount=Dt.mentionedCount>Dt.maxCount?Dt.maxCount:Dt.mentionedCount),Dt},xe.getUnreadInfo=function(Oe){jn({serverId:{type:"string"},channelId:{type:"string"}},Oe);var Ie=Oe.serverId+"_"+Oe.channelId;return this.unreadCount[Ie]?this.unreadCount[Ie]:null},xe.shouldChangeUnread=function(Oe,Ie){if(!Oe.serverId||!Oe.channelId||this.core.qchatChannel.subscribeForVisitorService.isInSubscribeChannels(Oe.serverId,Oe.channelId)||Oe.historyEnable===!1||Oe.needBadge===!1||Oe.fromAccount===this.core.account||Ie&&(Oe==null?void 0:Oe.status)!==2)return!1;if(Oe.notifyReason&&Oe.notifyReason===F0(Ap,Ap.notifySubscribe)){if(!Oe.serverId||!Oe.channelId)return!1;var At=this.getUnreadInfo({serverId:Oe.serverId,channelId:Oe.channelId}),Dt=Ie?"ackTimestamp":"lastMsgTime";if(!At||Oe.time&&At[Dt]&&At[Dt]>Oe.time)return!1}return!0},xe.shouldChangeMentionedUnread=function(Oe,Ie){return Ie===void 0&&(Ie=!1),hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:if(!Oe.accidsOfMentionedRoles||!Ti(Dt=Oe.accidsOfMentionedRoles).call(Dt,this.core.account)){hr.next=2;break}return hr.abrupt("return",!0);case 2:if(!Oe.mentionRoleIds||!Oe.serverId){hr.next=16;break}if(this.serverRoleIdsMap[Oe.serverId]){hr.next=9;break}if(Ie){hr.next=7;break}return this.handledRoleMsg(Oe),hr.abrupt("return",!1);case 7:return hr.next=9,this.getRoleIdsByServerId([Oe.serverId]);case 9:Pt=0;case 10:if(!(Pt<Oe.mentionRoleIds.length)){hr.next=16;break}if(!this.serverRoleIdsMap[Oe.serverId].roleIds.has(Oe.mentionRoleIds[Pt])){hr.next=13;break}return hr.abrupt("return",!0);case 13:Pt++,hr.next=10;break;case 16:return hr.abrupt("return",!1);case 17:case"end":return hr.stop()}},At,this)}))},xe.handledRoleMsg=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Oe.mentionRoleIds){jr.next=2;break}return jr.abrupt("return");case 2:if(this.serverRoleIdsMap[Oe.serverId]){jr.next=5;break}return jr.next=5,this.getRoleIdsByServerId([Oe.serverId]);case 5:if(this.serverRoleIdsMap[Oe.serverId]){jr.next=8;break}return this.core.logger.warn("QChatChannel::handledRoleMsg::can not get serverRoleIds,server id",Oe.serverId),jr.abrupt("return");case 8:if(Dt=!1,To(At=Oe.mentionRoleIds).call(At,function(Ur){xr.serverRoleIdsMap[Oe.serverId].roleIds.has(Ur)&&(Dt=!0,xr.core.logger.debug("QChatChannel::handledRoleMsg::will update message mentionedCount，message is ",Oe))}),Dt){jr.next=12;break}return jr.abrupt("return");case 12:if(Pt=this.unreadCount[Oe.serverId+"_"+Oe.channelId],ir=(Oe==null?void 0:Oe.status)===2,Pt.mentionedCount=ir?Pt.mentionedCount?Pt.mentionedCount-1:0:Pt.mentionedCount?Pt.mentionedCount+1:1,typeof Pt.maxCount!="number"){jr.next=24;break}if(!((hr=(hr=Pt.mentionedCount)>Pt.maxCount?Pt.maxCount:hr)>Pt.maxCount)){jr.next=21;break}return this.core.logger.debug("QChatChannel::handledRoleMsg::tempUnreadCount more than maxCount"),jr.abrupt("return");case 21:this.core.emit("unreadInfo",Hn(Hn({},Pt),{mentionedCount:hr})),this.core.emit("unreadInfos",[Hn(Hn({},Pt),{mentionedCount:hr})]),this._serverUnreadInfo(Oe.serverId);case 24:case"end":return jr.stop()}},Ie,this)}))},xe.getMentionedFlag=function(Oe,Ie){return Ie===void 0&&(Ie=!1),hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!Oe.mentionAll){ir.next=4;break}return ir.abrupt("return",!0);case 4:if(!Oe.mentionRoleIds&&!Oe.accidsOfMentionedRoles){ir.next=10;break}return ir.next=7,this.shouldChangeMentionedUnread(Oe,Ie);case 7:return ir.abrupt("return",ir.sent);case 10:if(!Oe.mentionAccids||!Ti(Dt=Oe.mentionAccids).call(Dt,this.core.account)){ir.next=12;break}return ir.abrupt("return",!0);case 12:return ir.abrupt("return",!1);case 13:case"end":return ir.stop()}},At,this)}))},xe.changeUnread=function(Oe,Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr,Or,jr;return Dr.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(Dt=Oe.serverId,Pt=Oe.channelId,ir=Dt+"_"+Pt,this.shouldChangeUnread(Oe,Ie)){Yr.next=6;break}return this.core.logger.debug("changeUnread: "+ir+" does not need to update unreadInfo"),Yr.abrupt("return");case 6:if(this.unreadCount[ir]){Yr.next=11;break}return Yr.next=9,this.core.qchatChannel.getChannelUnreadInfos({channels:[{serverId:Dt,channelId:Pt}]});case 9:return!this.serverRoleIdsMap[Dt]&&Oe.mentionRoleIds&&this.getRoleIdsByServerId([Dt]),Yr.abrupt("return");case 11:return hr=this.unreadCount[ir],xr=(Oe==null?void 0:Oe.status)===2,Yr.next=15,this.getMentionedFlag(Oe);case 15:if(Or=Yr.sent,xr?(hr.unreadCount=hr.unreadCount?hr.unreadCount-1:0,Or&&(hr.mentionedCount=hr.mentionedCount?hr.mentionedCount-1:0),delete hr.lastMsgTime,this.core.logger.debug("changeUnread: "+ir+" unread reduce ",hr)):(hr.unreadCount=hr.unreadCount?hr.unreadCount+1:1,Or&&(hr.mentionedCount=hr.mentionedCount?hr.mentionedCount+1:1),Oe.time&&(hr.lastMsgTime=Oe.time),this.core.logger.debug("changeUnread: "+ir+" unread add ",hr)),jr=typeof hr.maxCount=="number"?hr.maxCount:100,!(hr.unreadCount>jr)){Yr.next=21;break}return this.core.logger.debug("QChatChannel::subscribe::tempUnreadCount more than maxCount"),Yr.abrupt("return");case 21:this.core.logger.warn("unreadInfo event will abandon,please use unreadInfos"),this.core.emit("unreadInfo",Hn(Hn({},hr),{mentionedCount:hr.mentionedCount>jr?jr:hr.mentionedCount,unreadCount:hr.unreadCount>jr?jr:hr.unreadCount})),this.core.emit("unreadInfos",[Hn(Hn({},hr),{mentionedCount:hr.mentionedCount>jr?jr:hr.mentionedCount,unreadCount:hr.unreadCount>jr?jr:hr.unreadCount})]),this._serverUnreadInfo(Dt);case 25:case"end":return Yr.stop()}},At,this)}))},xe.updateUnreads=function(Oe){var Ie,At,Dt=this;if(Oe&&Oe.length>0){var Pt=[],ir=[],hr=Do(Ie=pi(Oe).call(Oe,function(Or){var jr=Or.serverId+"_"+Or.channelId,Ur=Dt.unreadCount[jr],Yr=ds(Ur,"ackTimestamp"),_n=ds(Or,"ackTimestamp");return!(Yr&&_n&&_n<Yr)&&(ds(Ur,"unreadCount")!==ds(Or,"unreadCount")||ds(Ur,"mentionedCount")!==ds(Or,"mentionedCount"))})).call(Ie,function(Or){Pt.push(Dt.getServerUnreadInfo(Or.serverId)),ir.push(Dt.unreadServerCount[Or.serverId]);var jr=Or.serverId,Ur=Or.channelId,Yr=jr+"_"+Ur;return Dt.core.logger.debug("qchat channel updateUnread: ",Or),Dt.unreadCount[Yr]=Hn({},Or),Dt.unreadServerCount[jr]||(Dt.unreadServerCount[jr]={}),Dt.unreadServerCount[jr][Ur]=!0,Or});if(hr.length!==0){this.core.emit("unreadInfos",hr);var xr={};To(hr).call(hr,function(Or,jr){Dt.core.emit("unreadInfo",Or);var Ur=Pt[jr],Yr=ir[jr],_n=Dt.getServerUnreadInfo(Or.serverId),Tn=Dt.unreadServerCount[Or.serverId],Dn=Ur.unreadCount!==_n.unreadCount,zn=!Yr||Sa(Yr).length===0,Jn=Tn&&Sa(Tn).length>0,$n=Ur.mentionedCount!==_n.mentionedCount;(Dn||$n||zn&&Jn)&&(xr[Or.serverId]=!0)}),To(At=Sa(xr)).call(At,function(Or){return Dt.core.emit("serverUnreadInfo",Dt.getServerUnreadInfo(Or))})}}},xe.clearUnreadCountByServers=function(Oe,Ie){var At=this,Dt=[];To(Oe).call(Oe,function(ir){var hr;At.unreadServerCount[ir]&&To(hr=Sa(At.unreadServerCount[ir])).call(hr,function(xr){Dt.push(ir+"_"+xr)})});var Pt=[];To(Dt).call(Dt,function(ir){Pt.push(Hn(Hn({},At.unreadCount[ir]),{unreadCount:0,mentionedCount:0,ackTimestamp:Ie}))}),this.updateUnreads(Pt)},pe}(),X0=function(){function pe(qe){this.limitForBatchEnter=10,this.limitForBatchSubscribe=100,this.autoServers=new ld,this.autoVisitorSubscribeServer=new ld,this.autoVisitorSubscribeChannel=new ld,this.core=qe}var xe=pe.prototype;return xe.subscribeChannelAsVisitor=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Or.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:Oe.type||6,opeType:Oe.opeType},datas:Oe.channels});case 2:return Dt=Or.sent,Pt=Dt.content.failedArr,ir=pi(At=Oe.channels).call(At,function(jr){return!Qd(Pt).call(Pt,function(Ur){return Ur.channelId===jr.channelId&&Ur.serverId===jr.serverId})}),To(ir).call(ir,function(jr){Oe.opeType===1?hr.autoVisitorSubscribeChannel.add(jr.serverId+"&"+jr.channelId):hr.autoVisitorSubscribeChannel.delete(jr.serverId+"&"+jr.channelId)}),Or.abrupt("return",{failedChannels:Pt});case 7:case"end":return Or.stop()}},Ie,this)}))},xe.subscribeServerAsVisitor=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr,Or=this;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Ur.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:Oe.type||7,opeType:Oe.opeType},datas:Do(At=Oe.serverIds).call(At,function(Yr){return{serverId:Yr}})});case 2:return ir=Ur.sent,hr=ir.content.failedArr,xr=pi(Dt=Oe.serverIds).call(Dt,function(Yr){return!Qd(hr).call(hr,function(_n){return _n.serverId===Yr})}),To(xr).call(xr,function(Yr){Oe.opeType===1?Or.autoVisitorSubscribeServer.add(Yr):Or.autoVisitorSubscribeServer.delete(Yr)}),Ur.abrupt("return",{failedServers:Do(Pt=ir.content.failedArr).call(Pt,function(Yr){return Yr.serverId})});case 7:case"end":return Ur.stop()}},Ie,this)}))},xe.deleteServer=function(Oe){var Ie;this.autoServers.delete(Oe),this.autoVisitorSubscribeServer.has(Oe)&&this.subscribeServerAsVisitor({opeType:2,serverIds:[Oe]});var At=[];To(Ie=this.autoVisitorSubscribeChannel).call(Ie,function(Dt){if(ea(Dt).call(Dt,Oe)===0){var Pt=Dt.replace(Oe+"&","");At.push({serverId:Oe,channelId:Pt})}}),At.length>0&&this.subscribeChannelAsVisitor({opeType:2,channels:At})},xe.deleteAutoSetInServerId=function(Oe){var Ie,At=this;this.autoServers.delete(Oe),this.autoVisitorSubscribeServer.delete(Oe),To(Ie=this.autoVisitorSubscribeChannel).call(Ie,function(Dt){ea(Dt).call(Dt,Oe)===0&&At.autoVisitorSubscribeChannel.delete(Dt)})},xe.deleteAutoSetInChannel=function(Oe,Ie){this.autoVisitorSubscribeChannel.delete(Oe+"&"+Ie)},xe.unSubscribeChannel=function(Oe,Ie){this.subscribeChannelAsVisitor({opeType:2,channels:[{serverId:Oe,channelId:Ie}]})},xe.isInSubscribeChannels=function(Oe,Ie){return this.autoVisitorSubscribeChannel.has(Oe+"&"+Ie)},xe.isInAutoServers=function(Oe){return this.autoServers.has(Oe)},xe.doAutoSubscribe=function(){var Oe=this,Ie=[],At=uu(pl(this.autoVisitorSubscribeServer),this.limitForBatchSubscribe);To(At).call(At,function(Pt){Ie.push(Oe.subscribeServerAsVisitor({opeType:1,serverIds:Pt}))});var Dt=uu(pl(this.autoVisitorSubscribeChannel),this.limitForBatchSubscribe);return To(Dt).call(Dt,function(Pt){Ie.push(Oe.subscribeChannelAsVisitor({opeType:1,channels:Do(Pt).call(Pt,function(ir){var hr=ea(ir).call(ir,"&");return{serverId:qa(ir).call(ir,0,hr),channelId:qa(ir).call(ir,hr+1)}})}))}),ca.all(Ie)},xe.doAutoEnterServer=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){var Ie,At,Dt,Pt=this;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return Ie=uu(pl(this.autoServers),this.limitForBatchEnter),At=[],To(Ie).call(Ie,function(xr){At.push(Pt.core.qchatServer.enterAsVisitor({serverIds:xr}))}),hr.next=5,ca.all(At);case 5:Dt=hr.sent,To(Dt).call(Dt,function(xr){var Or;To(Or=xr.failedServers).call(Or,function(jr){Pt.deleteAutoSetInServerId(jr)})});case 7:case"end":return hr.stop()}},Oe,this)}))},xe.resumeSubscribe=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(!Oe.isAutoReconnect){Dt.next=7;break}return Dt.next=3,this.doAutoEnterServer();case 3:return Dt.next=5,this.doAutoSubscribe();case 5:Dt.next=10;break;case 7:this.autoServers.clear(),this.autoVisitorSubscribeChannel.clear(),this.autoVisitorSubscribeServer.clear();case 10:case"end":return Dt.stop()}},Ie,this)}))},xe.cacheServer=function(Oe){var Ie=this;To(Oe).call(Oe,function(At){return Ie.autoServers.add(At)})},pe}();function DC(pe,xe){var qe,Oe=Hs!==void 0&&Tm(pe)||pe["@@iterator"];if(Oe)return oa(qe=(Oe=Oe.call(pe)).next).call(qe,Oe);if(Cs(pe)||(Oe=function(Dt,Pt){var ir;if(Dt){if(typeof Dt=="string")return Z0(Dt,Pt);var hr=qa(ir=Object.prototype.toString.call(Dt)).call(ir,8,-1);if(hr==="Object"&&Dt.constructor&&(hr=Dt.constructor.name),hr==="Map"||hr==="Set")return pl(Dt);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return Z0(Dt,Pt)}}(pe))||xe&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ie=0;return function(){return Ie>=pe.length?{done:!0}:{done:!1,value:pe[Ie++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0(pe,xe){(xe==null||xe>pe.length)&&(xe=pe.length);for(var qe=0,Oe=new Array(xe);qe<xe;qe++)Oe[qe]=pe[qe];return Oe}(function(pe){pe[pe.sub=1]="sub",pe[pe.unSub=2]="unSub"})(Bv||(Bv={}));var UC=function(pe){function xe(Oe){var Ie,At,Dt,Pt,ir,hr;return(hr=pe.call(this,"qchatChannel",Oe)||this).core=Oe,ou({cmdMap:iu,cmdConfig:Sp}),hr.subscribeModuleService=new Y0(Oe),hr.subscribeForVisitorService=new X0(Oe),hr.core.eventBus.on("qchatChannel/changeUnread",oa(Ie=hr.subscribeModuleService.changeUnread).call(Ie,hr.subscribeModuleService)),hr.core.eventBus.on("qchatChannel/updateUnreads",oa(At=hr.subscribeModuleService.updateUnreads).call(At,hr.subscribeModuleService)),hr.core.eventBus.on("qchatChannel/cacheSubscribe",oa(Dt=hr.subscribeModuleService.cacheSubscribe).call(Dt,hr.subscribeModuleService)),hr.core.eventBus.on("qchatChannel/clearUnreadCountByServers",oa(Pt=hr.subscribeModuleService.clearUnreadCountByServers).call(Pt,hr.subscribeModuleService)),hr.core.eventBus.on("qchatChannel/getRoleIdsByServerId",oa(ir=hr.subscribeModuleService.getRoleIdsByServerId).call(ir,hr.subscribeModuleService)),hr.core.eventBus.on("logined",function(xr){var Or;hr.subscribeModuleService.resumeSubscribe(xr),hr.subscribeForVisitorService.resumeSubscribe(xr),!((Or=hr.core.otherOptions.qchatChannelConfig)===null||Or===void 0)&&Or.autoSubscribe&&(hr.subscribeModuleService.autoSubscribeServerMap={},hr.subscribeModuleService.autoSubscribeUnreadMap={},hr.subscribeModuleService.autoSubscribe())}),hr.core.eventBus.on("qchatChannel/autoUnSubscribe",function(xr){if(hr.logger.log("QChatChannel::enter autoUnSubscribe sysMsg is",xr),xr.type===ya[ya.channelVisibilityUpdate])hr.logger.log("QChatChannel::begin autoUnSubscribe channel key is",xr.serverId+"_"+xr.channelId),hr.subscribeModuleService._unSubscribeChannel(xr.serverId,xr.channelId),hr.logger.log("QChatChannel::autoUnSubscribe channel done key is",xr.serverId+"_"+xr.channelId);else if(xr.type===ya[ya.serverEnterLeave]){var Or;(hr.subscribeModuleService.manualSubscribeServerMap[xr.serverId]||hr.subscribeModuleService.autoSubscribeServerMap[xr.serverId])&&(hr.logger.log("QChatChannel::begin autoUnSubscribe server key is",xr.serverId),hr.subscribeModuleService._unSubscribeServer(xr.serverId),hr.logger.log("QChatChannel::autoUnSubscribe server done key is",xr.serverId));var jr=hr.subscribeModuleService.unreadServerCount[xr.serverId];if(!jr)return;hr.logger.log("QChatChannel::begin autoUnSubscribe channels key is",Sa(jr)),To(Or=Sa(jr)).call(Or,function(Ur){hr.subscribeModuleService._unSubscribeChannel(xr.serverId,Ur)}),hr.logger.log("QChatChannel::autoUnSubscribe channels done key is",Sa(jr))}}),hr.core.eventBus.on("qchatChannel/serverIdentifyChange",function(xr){hr.subscribeModuleService.changeCacheServerRoleIds(xr)}),hr}ra(xe,pe);var qe=xe.prototype;return qe.createChannel=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},type:{type:"enum",values:Aa(xi)},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatCreateChannel",{channelInfo:Hn(Hn({},Ie),{type:xi[Ie.type]}),antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",od(Dt.content.channelInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.deleteChannel=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({channelId:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatDeleteChannel",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateChannel=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({channelId:{type:"string",min:1},serverId:{type:"string",required:!1},type:{type:"enum",values:Aa(xi),required:!1},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},Ie),Dt=Ie,Ie.type&&(Dt.type=xi[Ie.type]),hr.next=5,this.core.sendCmd("qchatUpdateChannel",{channelInfo:Dt,antispamTag:fc(Ie)});case 5:return Pt=hr.sent,hr.abrupt("return",od(Pt.content.channelInfo));case 7:case"end":return hr.stop()}},At,this)}))},qe.getChannels=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({channelIds:{type:"array",itemType:"string",min:1}},Ie),ir.next=3,this.core.sendCmd("qchatGetChannels",Ie);case 3:return Dt=ir.sent,ir.abrupt("return",Pm(Dt.content.channelList));case 5:case"end":return ir.stop()}},At,this)}))},qe.getChannelsByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetChannelsByPage",{qchatGetChannelListPageTag:Hn({limit:100},Ie)});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:Pm(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.getMembersByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetMembersByPage",{qchatGetMembersByPageTag:Ie});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.updateWhiteBlackRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},roleId:{type:"string",min:1},type:{type:"enum",values:Aa(Na)},opeType:{type:"enum",values:Aa(_i)}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateWhiteBlackRole",{qchatUpdateWhiteBlackRoleTag:Hn(Hn({},Ie),{type:Na[Ie.type],opeType:_i[Ie.opeType]})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getWhiteBlackRolesPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Aa(Na)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetWhiteBlackRolesPage",{qchatGetWhiteBlackRolesPageTag:Hn(Hn({},Ie),{type:Na[Ie.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:Pi(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.updateWhiteBlackMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Aa(Na)},opeType:{type:"enum",values:Aa(_i)},toAccids:{type:"array",itemType:"string",min:1}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateWhiteBlackMembers",{qchatUpdateWhiteBlackMembersTag:Hn(Hn({},Ie),{type:Na[Ie.type],opeType:_i[Ie.opeType],toAccids:Ao(Ie.toAccids)})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getWhiteBlackMembersPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Aa(Na)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetWhiteBlackMembersPage",{qchatGetWhiteBlackMembersPageTag:Hn(Hn({limit:100},Ie),{type:Na[Ie.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.getExistingWhiteBlackRoles=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Aa(Na)},roleIds:{type:"array",itemType:"string",min:1}},Ie),hr.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackRoles",{qchatGetExistingWhiteBlackRolesTag:Hn(Hn({},Ie),{type:Na[Ie.type],roleIds:Ao(Ie.roleIds)})});case 3:return Dt=hr.sent,Pt=Dt.content.datas,hr.abrupt("return",{datas:Pi(Pt)});case 6:case"end":return hr.stop()}},At,this)}))},qe.getExistingWhiteBlackMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Aa(Na)},accids:{type:"array",itemType:"string",min:1}},Ie),hr.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackMembers",{qchatGetExistingWhiteBlackMembersTag:Hn(Hn({},Ie),{type:Na[Ie.type],accids:Ao(Ie.accids)})});case 3:return Dt=hr.sent,Pt=Dt.content.datas,hr.abrupt("return",{datas:hl(Pt)});case 6:case"end":return hr.stop()}},At,this)}))},qe.updateCategoryInfoOfChannel=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({channelId:{type:"string",min:1},categoryId:{type:"string",allowEmpty:!1,required:!1},syncMode:{type:"number",min:0,max:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateCategoryInfoOfChannel",{qchatUpdateCategoryInfoOfChannelTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",od(Dt.content.channelInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.createChannelCategory=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatCreateChannelCategory",{qchatCreateChannelCategoryTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",xp(Dt.content.QChatChannelCategoryInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.removeChannelCategory=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatRemoveChannelCategory",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateChannelCategory=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateChannelCategory",{qchatUpdateChannelCategoryTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",xp(Dt.content.QChatChannelCategoryInfo));case 5:case"end":return ir.stop()}},At,this)}))},qe.getChannelCategoriesByID=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({categoryIds:{type:"array",itemType:"string",min:1}},Ie),ir.next=3,this.core.sendCmd("qchatGetChannelCategoriesByID",Ie);case 3:return Dt=ir.sent,ir.abrupt("return",Ac(Dt.content.channelCategoryList));case 5:case"end":return ir.stop()}},At,this)}))},qe.updateChannelCategoryWhiteBlackRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Na)},opeType:{type:"enum",values:Aa(_i)},roleId:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackRole",{qchatUpdateChannelCategoryWhiteBlackRoleTag:Hn(Hn({},Ie),{type:Na[Ie.type],opeType:_i[Ie.opeType]})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getChannelCategoryWhiteBlackRolesPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Na)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRolesPage",{qchatGetChannelCategoryWhiteBlackRolesPageTag:Hn(Hn({},Ie),{type:Na[Ie.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:Pi(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.updateChannelCategoryWhiteBlackMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Na)},opeType:{type:"enum",values:Aa(_i)},toAccids:{type:"array",itemType:"string",min:1}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackMembers",{qchatUpdateChannelCategoryWhiteBlackMembersTag:Hn(Hn({},Ie),{type:Na[Ie.type],opeType:_i[Ie.opeType],toAccids:Ao(Ie.toAccids)})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getChannelCategoryWhiteBlackMembersPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Na)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembersPage",{qchatGetChannelCategoryWhiteBlackMembersPageTag:Hn(Hn({},Ie),{type:Na[Ie.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.getChannelCategoryWhiteBlackRoles=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Na)},roleIds:{type:"array",itemType:"string",min:1}},Ie),hr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRoles",{qchatGetChannelCategoryWhiteBlackRolesTag:Hn(Hn({},Ie),{type:Na[Ie.type],roleIds:Ao(Ie.roleIds)})});case 3:return Dt=hr.sent,Pt=Dt.content.datas,hr.abrupt("return",Pi(Pt));case 6:case"end":return hr.stop()}},At,this)}))},qe.getChannelCategoryWhiteBlackMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Na)},accids:{type:"array",itemType:"string",min:1}},Ie),hr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembers",{qchatGetChannelCategoryWhiteBlackMembersTag:Hn(Hn({},Ie),{type:Na[Ie.type],accids:Ao(Ie.accids)})});case 3:return Dt=hr.sent,Pt=Dt.content.datas,hr.abrupt("return",hl(Pt));case 6:case"end":return hr.stop()}},At,this)}))},qe.getChannelCategoriesPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetChannelCategoriesPage",{qchatGetChannelCategoriesPageTag:Ie});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:Ac(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.getChannelCategoryChannelsPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ie),Or.next=3,this.core.sendCmd("qchatGetChannelCategoryChannelsPage",{qchatGetChannelCategoryChannelsPageTag:Ie});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag)},datas:Pm(ir)});case 6:case"end":return Or.stop()}},At,this)}))},qe.subscribeChannel=function(Ie){var At,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},Ie),!(!((At=this.core.otherOptions.qchatChannelConfig)===null||At===void 0)&&At.autoSubscribe)||Ie.isInternalTrigger||Ie.type===5){Or.next=3;break}throw new Ro("subscribe server failed, manual subscribe is not allowed in auto subscribe mode",{},403);case 3:return Or.next=5,this.subscribeModuleService.subscribe(Ie);case 5:if((ir=Or.sent).unreadInfos=ad(ir.unreadInfos),Ie.type!==5){Or.next=10;break}return this.subscribeModuleService.cacheSubscribe(Ie),Or.abrupt("return");case 10:return Ie.opeType===1&&(Ie.channels=Do(hr=ir.unreadInfos).call(hr,function(jr){return{serverId:jr.serverId,channelId:jr.channelId}})),this.logger.debug("QChatChannel::subscribeChannel:: cacheSubscribe ",Ie),!((Dt=this.core.otherOptions.qchatChannelConfig)===null||Dt===void 0)&&Dt.autoSubscribe?this.subscribeModuleService.cacheAutoSubscribe(Ie):this.subscribeModuleService.cacheSubscribe(Ie),this.subscribeModuleService.updateUnreads(ir.unreadInfos),Or.abrupt("return",ir);case 15:case"end":return Or.stop()}},Pt,this)}))},qe.getChannelUnreadInfos=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,this.core.sendCmd("qchatGetUnreadInfo",Ie);case 2:return Dt=hr.sent,Pt=ad(Dt.content.unreadInfos),this.subscribeModuleService.updateUnreads(Pt),hr.abrupt("return",Pt);case 6:case"end":return hr.stop()}},At,this)}))},qe.getChannelSearchByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:1,required:!1},order:{type:"enum",values:Aa(ml),required:!1},limit:{type:"number",min:1,required:!1},serverId:{type:"string",required:!1},sort:{type:"enum",values:Aa(wp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ie),!(Ie.startTime&&Ie.endTime&&Ie.startTime>=Ie.endTime)){Or.next=3;break}throw new ru("startTime more than endTime",Ie,"timeRule");case 3:return Or.next=5,this.core.sendCmd("qchatGetChannelSearchByPage",{qchatGetChannelSearchByPageTag:Hn(Hn({},Ie),{order:Ie.order&&ml[Ie.order],sort:yp(Ie)&&wp[yp(Ie)]})});case 5:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,hr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+hr.hasMore==1,nextTimetag:ma(hr.nextTimetag),cursor:hr.cursor},datas:Pm(ir)});case 8:case"end":return Or.stop()}},At,this)}))},qe.channelMemberSearch=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatChannelMemberSearch",{qchatChannelMemberSearchTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",_C(Dt.content.datas));case 5:case"end":return ir.stop()}},At,this)}))},qe.subscribeAsVisitor=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},channels:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},min:1}},Ie),Pt.next=3,this.subscribeForVisitorService.subscribeChannelAsVisitor(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.qchatAutoSubscribeNotificationHandler=function(Ie){var At=ad(Ie.content.unreadInfos),Dt=Ie.content.serverIds;this.subscribeModuleService.updateUnreads(At);var Pt=[];if(Dt.length){var ir={opeType:1};ir.channels=Do(Dt).call(Dt,function(Ur){return{serverId:Ur.serverId,channelId:""}}),ir.type=4,Pt.push(ir)}if(At.length){var hr={opeType:1};hr.channels=Do(At).call(At,function(Ur){return{serverId:Ur.serverId,channelId:Ur.channelId}}),hr.type=1,Pt.push(hr)}if(Pt.length)for(var xr,Or=DC(Pt);!(xr=Or()).done;){var jr=xr.value;this.subscribeModuleService.cacheAutoSubscribe(jr)}},xe}(rd),VC={"24_61":"qchatCreateServerRole","24_62":"qchatDeleteServerRole","24_63":"qchatUpdateServerRole","24_64":"qchatGetServerRoles","24_65":"qchatAddChannelRole","24_66":"qchatRemoveChannelRole","24_67":"qchatUpdateChannelRole","24_68":"qchatGetChannelRoles","24_69":"qchatAddMemberRole","24_70":"qchatRemoveMemberRole","24_71":"qchatUpdateMemberRole","24_72":"qchatGetMemberRoles","24_73":"qchatAddMembersToServerRole","24_74":"qchatRemoveMembersFromServerRole","24_75":"qchatGetMembersFromServerRole","24_76":"qchatGetServerRolesByAccid","24_77":"qchatGetExistingServerRolesByAccids","24_78":"qchatGetExistingChannelRolesByServerRoleIds","24_79":"qchatGetExistingAccidsOfMemberRoles","24_80":"qchatUpdateServerRolePriorities","24_81":"qchatGetExistingAccidsInServerRole","24_82":"qchatCheckPermission","24_83":"qchatAddChannelCategoryRole","24_84":"qchatRemoveChannelCategoryRole","24_85":"qchatUpdateChannelCategoryRole","24_86":"qchatGetChannelCategoryRole","24_87":"qchatAddChannelCategoryMemberRole","24_88":"qchatRemoveChannelCategoryMemberRole","24_89":"qchatUpdateChannelCategoryMemberRole","24_90":"qchatGetChannelCategoryMemberRole","24_126":"qchatCheckPermissions"},Qs={channelRole:{serverId:1,roleId:2,parentRoleId:3,channelId:4,name:5,icon:6,ext:7,auths:8,type:9,createTime:10,updateTime:11},memberRole:{serverId:1,id:2,accid:3,channelId:4,auths:5,createTime:6,updateTime:7,nick:8,avatar:9,ext:10,memberType:11,joinTime:12,inviter:13},antispamTag:{antiSpamBusinessId:1},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11,isMember:12},getRoleByPagesTag:{serverId:1,channelId:2,time:3,limit:4},checkPermissionTag:{serverId:1,channelId:2,auth:3},member:{serverId:1,roleId:2,accid:3,createTime:4,updateTime:5,nick:6,avatar:7,ext:8,type:9,joinTime:10,inviter:11},qchatAddChannelCategoryRoleTag:{categoryId:3,serverId:4,parentRoleId:5},channelCategoryRole:{roleId:1,categoryId:3,serverId:4,parentRoleId:5,type:6,validFlag:7,createTime:8,updateTime:9,auths:10,name:11,icon:12,ext:13},qchatGetChannelCategoryRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},channelCategoryMemberRole:{id:1,accid:3,categoryId:4,serverId:5,validFlag:6,createTime:7,updateTime:8,auths:9,nick:10,avatar:11,ext:12,memberType:13,joinTime:14,inviter:15},qchatGetChannelCategoryMemberRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},checkPermissionsTag:{serverId:1,channelId:2,auths:3}},ba=Wi(Qs),Op={qchatCreateServerRole:{service:"qchatRole",sid:24,cid:61,params:[{type:"Property",name:"serverRole",reflectMapper:Qs.serverRole},{type:"Property",name:"antispamTag",reflectMapper:Qs.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:ba.serverRole}]},qchatDeleteServerRole:{service:"qchatRole",sid:24,cid:62,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"}]},qchatUpdateServerRole:{service:"qchatRole",sid:24,cid:63,params:[{type:"Property",name:"updateServerRoleTag",reflectMapper:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,priority:7}},{type:"Property",name:"antispamTag",reflectMapper:Qs.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:ba.serverRole}]},qchatGetServerRoles:{service:"qchatRole",sid:24,cid:64,params:[{type:"Property",name:"getServerRolesTag",reflectMapper:{serverId:1,timetag:2,limit:3,priority:4,channelId:5,categoryId:6}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:ba.serverRole}]},qchatAddChannelRole:{service:"qchatRole",sid:24,cid:65,params:[{type:"Property",name:"channelRole",reflectMapper:Qs.channelRole}],response:[{type:"Property",name:"channelRole",reflectMapper:ba.channelRole}]},qchatRemoveChannelRole:{service:"qchatRole",sid:24,cid:66,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelRole:{service:"qchatRole",sid:24,cid:67,params:[{type:"Property",name:"updateChannelRoleTag",reflectMapper:{serverId:1,roleId:2,channelId:3,auths:4}}],response:[{type:"Property",name:"channelRole",reflectMapper:ba.channelRole}]},qchatGetChannelRoles:{service:"qchatRole",sid:24,cid:68,params:[{type:"Property",name:"getChannelRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:ba.channelRole}]},qchatAddMemberRole:{service:"qchatRole",sid:24,cid:69,params:[{type:"Property",name:"memberRole",reflectMapper:Qs.memberRole}],response:[{type:"Property",name:"memberRole",reflectMapper:ba.memberRole}]},qchatRemoveMemberRole:{service:"qchatRole",sid:24,cid:70,params:[{type:"Property",name:"memberRole",reflectMapper:Qs.memberRole}]},qchatUpdateMemberRole:{service:"qchatRole",sid:24,cid:71,params:[{type:"Property",name:"updateMemberRoleTag",reflectMapper:{serverId:1,accid:2,channelId:3,auths:4}}],response:[{type:"Property",name:"memberRole",reflectMapper:ba.memberRole}]},qchatGetMemberRoles:{service:"qchatRole",sid:24,cid:72,params:[{type:"Property",name:"getMemberRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:ba.memberRole}]},qchatAddMembersToServerRole:{service:"qchatRole",sid:24,cid:73,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatRemoveMembersFromServerRole:{service:"qchatRole",sid:24,cid:74,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatGetMembersFromServerRole:{service:"qchatRole",sid:24,cid:75,params:[{type:"Property",name:"getMembersFromServerRoleTag",reflectMapper:{serverId:1,roleId:2,timetag:3,accid:4,limit:5}}],response:[{type:"PropertyArray",name:"members",reflectMapper:ba.member}]},qchatGetServerRolesByAccid:{service:"qchatRole",sid:24,cid:76,params:[{type:"Property",name:"getServerRolesByAccidTag",reflectMapper:{serverId:1,accid:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:ba.serverRole}]},qchatGetExistingServerRolesByAccids:{service:"qchatRole",sid:24,cid:77,params:[{type:"Long",name:"serverId"},{type:"String",name:"accids"}],response:[{type:"String",name:"serverRoles"}]},qchatGetExistingChannelRolesByServerRoleIds:{service:"qchatRole",sid:24,cid:78,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"roleIds"}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:ba.channelRole}]},qchatGetExistingAccidsOfMemberRoles:{service:"qchatRole",sid:24,cid:79,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:ba.memberRole}]},qchatUpdateServerRolePriorities:{service:"qchatRole",sid:24,cid:80,params:[{type:"Long",name:"serverId"},{type:"PropertyArray",name:"serverRoles",reflectMapper:{serverId:1,roleId:2,priority:7}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:ba.serverRole}]},qchatGetExistingAccidsInServerRole:{service:"qchatRole",sid:24,cid:81,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"members",reflectMapper:ba.member}]},qchatCheckPermission:{service:"qchatRole",sid:24,cid:82,params:[{type:"Property",name:"checkPermissionTag",reflectMapper:Qs.checkPermissionTag}],response:[{type:"Boolean",name:"checked"}]},qchatAddChannelCategoryRole:{service:"qchatRole",sid:24,cid:83,params:[{type:"Property",name:"qchatAddChannelCategoryRoleTag",reflectMapper:Qs.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:ba.channelCategoryRole}]},qchatRemoveChannelCategoryRole:{service:"qchatRole",sid:24,cid:84,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelCategoryRole:{service:"qchatRole",sid:24,cid:85,params:[{type:"Property",name:"qchatUpdateChannelCategoryRoleTag",reflectMapper:Qs.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:ba.channelCategoryRole}]},qchatGetChannelCategoryRole:{service:"qchatRole",sid:24,cid:86,params:[{type:"Property",name:"qchatGetChannelCategoryRoleTag",reflectMapper:Qs.qchatGetChannelCategoryRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:ba.channelCategoryRole}]},qchatAddChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:87,params:[{type:"Property",name:"qchatAddChannelCategoryMemberRoleTag",reflectMapper:Qs.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:ba.channelCategoryMemberRole}]},qchatRemoveChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:88,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"String",name:"accid"}]},qchatUpdateChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:89,params:[{type:"Property",name:"qchatUpdateChannelCategoryMemberRoleTag",reflectMapper:Qs.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:ba.channelCategoryMemberRole}]},qchatGetChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:90,params:[{type:"Property",name:"qchatGetChannelCategoryMemberRoleTag",reflectMapper:Qs.qchatGetChannelCategoryMemberRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:ba.channelCategoryMemberRole}]},qchatCheckPermissions:{service:"qchatRole",sid:24,cid:126,params:[{type:"Property",name:"checkPermissionsTag",reflectMapper:Qs.checkPermissionsTag}],response:[{type:"PropertyArray",name:"checkPermissionsResult",reflectMapper:{1:"auth",2:"isAllow"}}]}},e1=function(){function pe(qe){this.core=qe}var xe=pe.prototype;return xe.addChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatAddChannelCategoryRole",{qchatAddChannelCategoryRoleTag:Oe});case 3:return At=Pt.sent,Pt.abrupt("return",xv(At.content.channelCategoryRole));case 5:case"end":return Pt.stop()}},Ie,this)}))},xe.removeChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Oe),Dt.next=3,this.core.sendCmd("qchatRemoveChannelCategoryRole",Oe);case 3:case"end":return Dt.stop()}},Ie,this)}))},xe.updateChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object"}},Oe),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryRole",{qchatUpdateChannelCategoryRoleTag:Sl(Oe)});case 3:if((At=Pt.sent).raw.code!==406){Pt.next=6;break}throw new Ro("No update required",{},406);case 6:return Pt.abrupt("return",xv(At.content.channelCategoryRole));case 7:case"end":return Pt.stop()}},Ie,this)}))},xe.getChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatGetChannelCategoryRole",{qchatGetChannelCategoryRoleTag:Oe});case 3:return At=Pt.sent,Pt.abrupt("return",(ir=At.content.list,Cs(ir)&&ir.length>0?Do(ir).call(ir,function(hr){return xv(hr)}):[]));case 5:case"end":return Pt.stop()}var ir},Ie,this)}))},xe.addChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatAddChannelCategoryMemberRole",{qchatAddChannelCategoryMemberRoleTag:Oe});case 3:return At=Pt.sent,Pt.abrupt("return",Iv(At.content.channelCategoryMemberRole));case 5:case"end":return Pt.stop()}},Ie,this)}))},xe.removeChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Oe),Dt.next=3,this.core.sendCmd("qchatRemoveChannelCategoryMemberRole",Oe);case 3:case"end":return Dt.stop()}},Ie,this)}))},xe.updateChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object"}},Oe),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryMemberRole",{qchatUpdateChannelCategoryMemberRoleTag:Sl(Oe)});case 3:if((At=Pt.sent).raw.code!==406){Pt.next=6;break}throw new Ro("No update required",{},406);case 6:return Pt.abrupt("return",Iv(At.content.channelCategoryMemberRole));case 7:case"end":return Pt.stop()}},Ie,this)}))},xe.getChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatGetChannelCategoryMemberRole",{qchatGetChannelCategoryMemberRoleTag:Oe});case 3:return At=Pt.sent,Pt.abrupt("return",(ir=At.content.list,Cs(ir)&&ir.length>0?Do(ir).call(ir,function(hr){return Iv(hr)}):[]));case 5:case"end":return Pt.stop()}var ir},Ie,this)}))},pe}(),t1=function(pe){function xe(Oe){var Ie;return(Ie=pe.call(this,"qchatRole",Oe)||this).core=Oe,ou({cmdMap:VC,cmdConfig:Op}),Ie.category=new e1(Oe),Ie}ra(xe,pe);var qe=xe.prototype;return qe.createServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1},priority:{type:"number",min:1},icon:{type:"string",required:!1},ext:{type:"string",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatCreateServerRole",{serverRole:Hn(Hn({},Sl(Ie)),{type:cu.custom}),antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",Ei(Dt.content.serverRole));case 5:case"end":return ir.stop()}},At,this)}))},qe.updateServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},name:{type:"string",required:!1},icon:{type:"string",required:!1},ext:{type:"string",required:!1},priority:{type:"number",required:!1},auths:{type:"object",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateServerRole",{updateServerRoleTag:Sl(Ie),antispamTag:fc(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",Ei(Dt.content.serverRole));case 5:case"end":return ir.stop()}},At,this)}))},qe.deleteServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatDeleteServerRole",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.getServerRoles=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},categoryId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},priority:{type:"number",required:!1}},Ie),xr.next=3,this.core.sendCmd("qchatGetServerRoles",{getServerRolesTag:Sl(Ie)});case 3:return Pt=xr.sent,ir=pi(Dt=Pt.content.serverRoles).call(Dt,function(Or){return ma(Or.isMember)===1}),ir=Do(ir).call(ir,function(Or){return Or.roleId}),xr.abrupt("return",{roles:Pi(Pt.content.serverRoles),isMemberRoles:ir});case 7:case"end":return xr.stop()}},At,this)}))},qe.addChannelRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},Ie),ir.next=3,this.core.sendCmd("qchatAddChannelRole",{channelRole:Sl(Ie)});case 3:return Dt=ir.sent,ir.abrupt("return",Ei(Dt.content.channelRole));case 5:case"end":return ir.stop()}},At,this)}))},qe.getChannelRoles=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetChannelRoles",{getChannelRolesTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.channelRoles));case 5:case"end":return ir.stop()}},At,this)}))},qe.removeChannelRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatRemoveChannelRole",Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateChannelRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateChannelRole",{updateChannelRoleTag:Sl(Ie)});case 3:if((Dt=ir.sent).raw.code!==406){ir.next=6;break}throw new Ro("No update required",{},406);case 6:return ir.abrupt("return",Ei(Dt.content.channelRole));case 7:case"end":return ir.stop()}},At,this)}))},qe.addMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Ie),ir.next=3,this.core.sendCmd("qchatAddMemberRole",{memberRole:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",Ei(Dt.content.memberRole));case 5:case"end":return ir.stop()}},At,this)}))},qe.getMemberRoles=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetMemberRoles",{getMemberRolesTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.memberRoles));case 5:case"end":return ir.stop()}},At,this)}))},qe.removeMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatRemoveMemberRole",{memberRole:Ie});case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatUpdateMemberRole",{updateMemberRoleTag:Sl(Ie)});case 3:if((Dt=ir.sent).raw.code!==406){ir.next=6;break}throw new Ro("No update required",{},406);case 6:return ir.abrupt("return",Ei(Dt.content.memberRole));case 7:case"end":return ir.stop()}},At,this)}))},qe.addMembersToServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},Ie),xr.next=3,this.core.sendCmd("qchatAddMembersToServerRole",Hn(Hn({},Ie),{accids:Ao(Ie.accids)}));case 3:return Dt=xr.sent,Pt=ds(Dt,"content.accids.successAccids"),ir=ds(Dt,"content.accids.failedAccids"),xr.abrupt("return",{successAccids:Pt?JSON.parse(Pt):[],failedAccids:ir?JSON.parse(ir):[]});case 7:case"end":return xr.stop()}},At,this)}))},qe.removeMembersFromServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},Ie),xr.next=3,this.core.sendCmd("qchatRemoveMembersFromServerRole",Hn(Hn({},Ie),{accids:Ao(Ie.accids)}));case 3:return Dt=xr.sent,Pt=ds(Dt,"content.accids.successAccids"),ir=ds(Dt,"content.accids.failedAccids"),xr.abrupt("return",{successAccids:Pt?JSON.parse(Pt):[],failedAccids:ir?JSON.parse(ir):[]});case 7:case"end":return xr.stop()}},At,this)}))},qe.getMembersFromServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},accid:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetMembersFromServerRole",{getMembersFromServerRoleTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.members));case 5:case"end":return ir.stop()}},At,this)}))},qe.getServerRolesByAccid=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetServerRolesByAccid",{getServerRolesByAccidTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.serverRoles));case 5:case"end":return ir.stop()}},At,this)}))},qe.getExistingServerRolesByAccids=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ie),xr.next=3,this.core.sendCmd("qchatGetExistingServerRolesByAccids",{serverId:Ie.serverId,accids:Ao(Ie.accids)});case 3:return Dt=xr.sent,xr.prev=4,ir=JSON.parse(Dt.content.serverRoles),To(Pt=Sa(ir)).call(Pt,function(Or){var jr;To(jr=ir[Or]).call(jr,function(Ur,Yr){ir[Or][Yr]=ps(Ur,ba.serverRole)}),ir[Or]=Pi(ir[Or])}),xr.abrupt("return",ir);case 10:throw xr.prev=10,xr.t0=xr.catch(4),this.logger.error("can not parse serverRolesGroupByAccid from "+Ie.serverId+" and "+Ie.accids,Dt.content.serverRoles),xr.t0;case 14:case"end":return xr.stop()}},At,this,[[4,10]])}))},qe.getExistingChannelRolesByServerRoleIds=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleIds:{type:"array",itemType:"string"}},Ie),ir.next=3,this.core.sendCmd("qchatGetExistingChannelRolesByServerRoleIds",{serverId:Ie.serverId,channelId:Ie.channelId,roleIds:Ao(Ie.roleIds)});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.channelRoles));case 5:case"end":return ir.stop()}},At,this)}))},qe.getExistingAccidsOfMemberRoles=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ie),hr.next=3,this.core.sendCmd("qchatGetExistingAccidsOfMemberRoles",{serverId:Ie.serverId,channelId:Ie.channelId,accids:Ao(Ie.accids)});case 3:return Dt=hr.sent,Pt=Dt.content.memberRoles,hr.abrupt("return",Pt&&Pt.length>0?Do(Pt).call(Pt,function(xr){return xr.accid}):[]);case 6:case"end":return hr.stop()}},At,this)}))},qe.getExistingAccidsInServerRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ie),hr.next=3,this.core.sendCmd("qchatGetExistingAccidsInServerRole",{serverId:Ie.serverId,roleId:Ie.roleId,accids:Ao(Ie.accids)});case 3:return Dt=hr.sent,Pt=Dt.content.members,hr.abrupt("return",Pt&&Pt.length>0?Do(Pt).call(Pt,function(xr){return xr.accid}):[]);case 6:case"end":return hr.stop()}},At,this)}))},qe.updateServerRolePriorities=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},serverRoles:{type:"array"}},Ie),hr.next=3,this.core.sendCmd("qchatUpdateServerRolePriorities",{serverId:Ie.serverId,serverRoles:Do(Dt=Ie.serverRoles).call(Dt,function(xr){return{serverId:xr.serverId,roleId:xr.roleId,priority:xr.priority}})});case 3:return Pt=hr.sent,hr.abrupt("return",Pi(Pt.content.serverRoles));case 5:case"end":return hr.stop()}},At,this)}))},qe.checkPermission=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auth:{type:"string"}},Ie),ir.next=3,this.core.sendCmd("qchatCheckPermission",{checkPermissionTag:Hn(Hn({},Ie),{auth:yl[Ie.auth]||Ie.auth})});case 3:return Dt=ir.sent,ir.abrupt("return",Dt.content.checked);case 5:case"end":return ir.stop()}},At,this)}))},qe.addChannelCategoryRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.addChannelCategoryRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.removeChannelCategoryRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.removeChannelCategoryRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateChannelCategoryRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.updateChannelCategoryRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.getChannelCategoryRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.getChannelCategoryRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.addChannelCategoryMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.addChannelCategoryMemberRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.removeChannelCategoryMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.removeChannelCategoryMemberRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.updateChannelCategoryMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.updateChannelCategoryMemberRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.getChannelCategoryMemberRole=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.getChannelCategoryMemberRole(Ie);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},At,this)}))},qe.checkPermissions=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auths:{type:"array",itemType:"string"}},Ie),this.core.logger.log("qchatRole::checkPermission options is",Ie),Or.next=4,this.core.sendCmd("qchatCheckPermissions",{checkPermissionsTag:Hn(Hn({},Ie),{auths:Ao(Do(Dt=Ie.auths).call(Dt,function(jr){return yl[jr]||jr}))})});case 4:return ir=Or.sent,this.core.logger.log("qchatRole::checkPermission result is",ir.content),hr={},To(Pt=ir.content.checkPermissionsResult).call(Pt,function(jr){hr[jr.auth]=jr.isAllow}),this.core.logger.log("qchatRole::checkPermission auths is",hr),Or.abrupt("return",id(hr));case 10:case"end":return Or.stop()}},At,this)}))},xe}(rd),Rm=function(xe,qe){return Hh(xe,qe,function(Oe,Ie){return Xb(xe,Ie)})},r1=function(xe){return xe!=null&&xe.length?_v(xe,1):[]},Rc,Js,Bm=function(xe){return Jh(dm(xe,void 0,r1),xe+"")}(function(pe,xe){return pe==null?{}:Rm(pe,xe)}),n1={"24_10":"qchatSendMsg","24_11":"qchatOnMsg","24_12":"qchatOnRecvUnreadInfo","24_13":"qchatSendCustomSysMsg","24_14":"qchatOnSysMsg","24_16":"qchatGetHistoryMsg","24_17":"qchatMarkMessageRead","24_18":"qchatMultiSyncMessageRead","24_22":"qchatUpdateSystemNotification","24_23":"qchatMultiSyncSystemNotificationUpdate","24_24":"qchatSyncSystemNotification","24_25":"qchatUpdateMessage","24_26":"qchatRecvMessageUpdate","24_28":"qchatMarkSysMsgRead","24_94":"qchatMessageSearchByPage","24_100":"qchatGetMessageHistoryByIds","24_101":"qchatGetThreadMessages","24_102":"qchatUpdateQuickComment","24_103":"qchatGetQuickComments","24_108":"qchatGetThreadRootMessagesMeta","24_121":"qchatGetLastMessageOfChannels","24_127":"qchatGetMentionedMeMessages","25_6":"qchatMultiSyncServersMessageRead"},Fs={getHistoryMsgTag:{serverId:1,channelId:2,beginTime:3,endTime:4,excludeMsgId:5,limit:6,reverse:7},getThreadHistoryMsgTag:{beginTime:1,endTime:2,excludeMsgId:3,limit:4,reverse:5},qchatMsgTag:{serverId:1,channelId:2,fromAccount:3,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,updateTime:8,type:9,body:10,attach:11,ext:12,msgIdClient:13,msgIdServer:14,resendFlag:15,status:16,pushPayload:17,pushContent:18,mentionAccids:19,mentionAll:20,env:21,callbackExt:22,replyMsgFromAccount:23,replyMsgTime:24,replyMsgIdServer:25,replyMsgIdClient:26,threadMsgFromAccount:27,threadMsgTime:28,threadMsgIdServer:29,threadMsgIdClient:30,useCustomContent:31,antiSpamContent:32,antiSpamBusinessId:33,antiSpamUsingYidun:34,yidunCallback:35,yidunAntiCheating:36,yidunAntiSpamExt:37,yidunAntiSpamRes:38,mentionRoleIds:41,accidsOfMentionedRoles:42,updateContent:39,updateOperatorInfo:40,subType:61,historyEnable:100,pushEnable:101,needBadge:102,needPushNick:103,notifyReason:104,routeEnable:105,isAntispam:106},sysMsg:{toType:1,serverId:2,channelId:3,toAccids:4,fromAccount:5,fromClientType:6,fromDeviceId:7,fromNick:8,time:9,updateTime:10,type:11,msgIdClient:12,msgIdServer:13,body:14,attach:15,ext:16,resendFlag:17,status:18,pushPayload:19,pushContent:20,env:21,callbackExt:22,persistEnable:100,pushEnable:101,needBadge:102,needPushNick:103,routeEnable:104},qchatMsgUpdateTag:{operatorAccount:1,operatorClientType:2,ps:3,ext:4,pushContent:5,pushPayload:6,env:7,routeEnable:100},markMsgReadTag:{serverId:1,channelId:2,time:3},qchatQuickCommentRequestTag:{serverId:1,channelId:2,fromAccount:3,msgIdServer:4,time:5,type:6,opeType:7,opeAccid:8},qchatQuickCommentQueryTag:{serverId:1,channelId:2,msgIdServerList:3},qchatGetLastMessageOfChannelsTag:{serverId:1,channelIdList:2},qchatMultiSyncServersMessageReadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},qchatMessageSearchByPageTag:{keyword:1,serverId:2,channelId:3,fromAccid:4,fromTime:5,toTime:6,msgTypes:7,subTypes:8,includeSelf:9,order:10,limit:11,sort:12,cursor:13},qchatPageQueryTag:{hasMore:1,nextTimetag:2,cursor:3},unreadInfo:_m},La=Wi(Fs),qC={qchatSendMsg:{service:"qchatMsg",sid:24,cid:10,params:[{type:"Property",name:"qchatMsg",reflectMapper:Fs.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:La.qchatMsgTag}]},qchatOnMsg:{service:"qchatMsg",sid:24,cid:11,response:[{type:"Property",name:"qchatMsg",reflectMapper:La.qchatMsgTag}]},qchatOnRecvUnreadInfo:{service:"qchatMsg",sid:24,cid:12,response:[{type:"Property",name:"qchatMsg",reflectMapper:La.qchatMsgTag}]},qchatSendCustomSysMsg:{service:"qchatMsg",sid:24,cid:13,params:[{type:"Property",name:"sysMsg",reflectMapper:Fs.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:La.sysMsg}]},qchatOnSysMsg:{service:"qchatMsg",sid:24,cid:14,response:[{type:"Property",name:"sysMsg",reflectMapper:La.sysMsg}]},qchatGetHistoryMsg:{service:"qchatMsg",sid:24,cid:16,params:[{type:"Property",name:"getHistoryMsgTag",reflectMapper:Fs.getHistoryMsgTag}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:La.qchatMsgTag}]},qchatUpdateMessage:{service:"qchatMsg",sid:24,cid:25,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:Fs.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:Fs.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:La.qchatMsgTag}]},qchatRecvMessageUpdate:{service:"qchatMsg",sid:24,cid:26,response:[{type:"Property",name:"qchatMsgUpdateInfo",reflectMapper:La.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:La.qchatMsgTag}]},qchatMarkMessageRead:{sid:24,cid:17,service:"qchatMsg",params:[{type:"Property",name:"markMsgReadTag",reflectMapper:Fs.markMsgReadTag}],response:[{type:"Property",name:"unreadInfo",reflectMapper:La.unreadInfo}]},qchatMultiSyncMessageRead:{sid:24,cid:18,service:"qchatMsg",response:[{type:"Property",name:"unreadInfo",reflectMapper:La.unreadInfo}]},qchatUpdateSystemNotification:{service:"qchatMsg",sid:24,cid:22,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:Fs.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:Fs.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:La.sysMsg}]},qchatMultiSyncSystemNotificationUpdate:{service:"qchatMsg",sid:24,cid:23,response:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:La.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:La.sysMsg}]},qchatSyncSystemNotification:{service:"qchatMsg",sid:24,cid:24,response:[{type:"PropertyArray",name:"systemNotifications",reflectMapper:La.sysMsg}]},qchatMarkSysMsgRead:{service:"qchatMsg",sid:24,cid:28,params:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Fs.sysMsg}]},qchatMessageSearchByPage:{service:"qchatMsg",sid:24,cid:94,params:[{type:"Property",name:"qchatMessageSearchByPageTag",reflectMapper:Fs.qchatMessageSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:La.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:La.qchatMsgTag}]},qchatGetMessageHistoryByIds:{service:"qchatMsg",sid:24,cid:100,params:[{type:"Property",name:"channelInfo",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"messageReferList",reflectMapper:{msgIdServer:1,time:2}}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:La.qchatMsgTag}]},qchatGetThreadMessages:{service:"qchatMsg",sid:24,cid:101,params:[{type:"Property",name:"qchatMsg",reflectMapper:Fs.qchatMsgTag},{type:"Property",name:"getThreadHistoryMsgTag",reflectMapper:Fs.getThreadHistoryMsgTag}],response:[{type:"Property",name:"thread",reflectMapper:La.qchatMsgTag},{type:"Property",name:"threadInfo",reflectMapper:{1:"messageCount",2:"lastMessageTimestamp"}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:La.qchatMsgTag}]},qchatUpdateQuickComment:{service:"qchatMsg",sid:24,cid:102,params:[{type:"Property",name:"tag",reflectMapper:Fs.qchatQuickCommentRequestTag}]},qchatGetQuickComments:{service:"qchatMsg",sid:24,cid:103,params:[{type:"Property",name:"tag",reflectMapper:Fs.qchatQuickCommentQueryTag}],response:[{type:"PropertyArray",name:"quickCommentResponse",reflectMapper:{1:"serverId",2:"channelId",3:"msgIdServer",4:"totalCount",5:"lastUpdateTime",6:"details"}}]},qchatGetThreadRootMessagesMeta:{service:"qchatMsg",sid:24,cid:108,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:{time:7,msgIdServer:14}}],response:[{type:"PropertyArray",name:"metas",reflectMapper:{1:"total",2:"timestamp",3:"msgIdServer",4:"msgTime"}}]},qchatGetLastMessageOfChannels:{service:"qchatMsg",sid:24,cid:121,params:[{type:"Property",name:"tag",reflectMapper:Fs.qchatGetLastMessageOfChannelsTag}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:La.qchatMsgTag}]},qchatMultiSyncServersMessageRead:{service:"qchatMsg",sid:25,cid:6,response:[{type:"Property",name:"qchatMultiSyncServersMessageReadTag",reflectMapper:La.qchatMultiSyncServersMessageReadTag}]},qchatGetMentionedMeMessages:{service:"qchatMsg",sid:24,cid:127,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2,timestamp:3,limit:4}}],response:[{type:"Property",name:"page",reflectMapper:La.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:La.qchatMsgTag}]}};(function(pe){pe[pe.Android=1]="Android",pe[pe.iOS=2]="iOS",pe[pe.PC=4]="PC",pe[pe.WindowsPhone=8]="WindowsPhone",pe[pe.Web=16]="Web",pe[pe.Server=32]="Server",pe[pe.Mac=64]="Mac"})(Rc||(Rc={}));var o1=["image","audio","video","file"],Lv={time:{type:"number"},updateTime:{type:"number"},resendFlag:{type:"boolean"},persistEnable:{type:"boolean"},routeEnable:{type:"boolean"},pushEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},type:{type:"enum",values:ya},fromClientType:{type:"enum",values:Rc},status:{type:"number"},toAccids:{type:"object"},toType:{type:"number"},attach:{type:"object"},pushPayload:{type:"object"}};function Fv(pe,xe){var qe=Hn({},pe),Oe=Hn({type:xe||ya.custom},Cp(Lv,qe));return Oe.serverId&&Oe.channelId&&Oe.toAccids?Oe.toType=Tl.channelAccids:Oe.serverId&&Oe.toAccids?Oe.toType=Tl.serverAccids:Oe.serverId&&Oe.channelId?Oe.toType=Tl.channel:Oe.serverId?Oe.toType=Tl.server:Oe.toAccids?Oe.toType=Tl.accids:Oe.toType=Tl.unknown,Oe}function HC(pe){var xe=Bm(pe,["msgIdServer","type"]);return Cp(Lv,xe)}var $v=((Js={})[ya.channelUpdateWhiteBlackIdentify]=function(pe){return pe.notify=Em(ps(pe.notify,aa.qchatUpdateWhiteBlackRoleTag)),pe},Js[ya.channelUpdateWhiteBlackIdentifyUser]=function(pe){return pe.notify=function(qe){return Wa(kC,qe)}(ps(pe.notify,aa.qchatUpdateWhiteBlackMembersTag)),pe},Js[ya.updateQuickComment]=function(pe){return pe.notify=function(qe){return Wa(KC,qe)}(ps(pe.notify,La.qchatQuickCommentRequestTag)),pe},Js[ya.channelCategoryCreate]=function(pe){return pe.categoryInfo=xp(ps(pe.categoryInfo,aa.QChatChannelCategoryInfo)),pe},Js[ya.channelCategoryUpdate]=function(pe){return pe.categoryInfo=xp(ps(pe.categoryInfo,aa.QChatChannelCategoryInfo)),pe},Js[ya.channelCategoryUpdateWhiteBlackIdentify]=function(pe){return pe.notify=Em(ps(pe.notify,aa.qchatUpdateChannelCategoryWhiteBlackRoleTag)),pe},Js[ya.channelCategoryUpdateWhiteBlackIdentifyUser]=function(pe){return pe.notify=Em(ps(pe.notify,aa.qchatUpdateChannelCategoryWhiteBlackMembersTag)),pe},Js[ya.serverIdentifyAdd]=function(pe){return pe.serverIdentifyInfo=Ei(ps(pe.serverIdentifyInfo,ba.serverRole)),pe},Js[ya.serverIdentifyRemove]=function(pe){return pe.serverIdentifyInfo=Ei(ps(pe.serverIdentifyInfo,ba.serverRole)),pe},Js[ya.serverIdentifyUpdate]=function(pe){return pe.serverIdentifyInfo=Ei(ps(pe.serverIdentifyInfo,ba.serverRole)),pe},Js[ya.channelIdentifyUpdate]=function(pe){return pe.channelIdentifyInfo=Ei(ps(pe.channelIdentifyInfo,ba.channelRole)),pe},Js[ya.userIdentifyUpdate]=function(pe){return pe.userIdentifyInfo=Ei(ps(pe.userIdentifyInfo,ba.memberRole)),pe},Js[ya.myMemberInfoUpdated]=function(pe){var xe,qe=ds(pe,"userInfo.name"),Oe=ds(pe,"userInfo.icon");return pe.updatedInfos=Do(xe=pe.reuseServers).call(xe,function(Ie){var At={serverId:Ie.serverId};return(1&Ie.bits)==1&&typeof qe=="string"&&Hn(At,{nickChanged:!0,nick:qe}),(2&Ie.bits)==2&&typeof Oe=="string"&&Hn(At,{avatarChanged:!0,avatar:Oe}),At}),delete pe.userInfo,delete pe.reuseServers,pe},Js);function Rp(pe,xe){var qe=Wa(Lv,pe);if(!qe.attach)return qe;if(qe.attach.serverInfo&&(qe.attach.serverInfo=Mp(ps(qe.attach.serverInfo,ss.serverInfo))),qe.attach.channelInfo&&(qe.attach.channelInfo=od(ps(qe.attach.channelInfo,aa.channelInfo))),qe.attach.serverMember&&(qe.attach.serverMember=kp(ps(qe.attach.serverMember,ss.memberInfo))),$v[qe.attach.type]&&(qe.attach=$v[qe.attach.type](qe.attach)),qe.attach.updateAuths)try{qe.attach.updateAuths=id(JSON.parse(qe.attach.updateAuths))}catch(Oe){xe.error("formatSystemNotification:JSON parse updateAuths error: ",Oe)}return qe.attach.type&&(qe.attach.rawType=qe.attach.type,qe.attach.type=ya[qe.attach.type]),qe}var a1={type:{type:"enum",values:Pp},fromClientType:{type:"enum",values:Rc},status:{type:"number"},resendFlag:{type:"boolean"},mentionAll:{type:"boolean"},notifyReason:{type:"enum",values:Ap},pushEnable:{type:"boolean"},historyEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},routeEnable:{type:"boolean"},time:{type:"number"},updateTime:{type:"number"},mentionAccids:{type:"object"},mentionRoleIds:{type:"object"},accidsOfMentionedRoles:{type:"object"},attach:{type:"object"},pushPayload:{type:"object"},isAntispam:{type:"boolean"},antiSpamInfo:{useCustomContent:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBusinessId:{type:"string"},antiSpamUsingYidun:{type:"boolean"},yidunCallback:{type:"string"},yidunAntiCheating:{type:"object"},yidunAntiSpamExt:{type:"object"},yidunAntiSpamRes:{type:"string"}},replyRefer:{fromAccount:{type:"string",rawKey:"replyMsgFromAccount"},time:{type:"number",rawKey:"replyMsgTime"},msgIdServer:{type:"string",rawKey:"replyMsgIdServer"},msgIdClient:{type:"string",rawKey:"replyMsgIdClient"}},threadRefer:{fromAccount:{type:"string",rawKey:"threadMsgFromAccount"},time:{type:"number",rawKey:"threadMsgTime"},msgIdServer:{type:"string",rawKey:"threadMsgIdServer"},msgIdClient:{type:"string",rawKey:"threadMsgIdClient"}}};function jv(pe){pe.onSendBefore,pe.onUploadStart,pe.onUploadDone,pe.onUploadProgress;var xe=Jd(pe,["onSendBefore","onUploadStart","onUploadDone","onUploadProgress"]),qe=Cp(a1,xe);if(qe.msgIdClient=pe.resendFlag?pe.msgIdClient:Cv(),!qe.msgIdClient)throw new v0("msgIdClient is required for resend a message","msgIdClient","required");return pe.replyMessage&&pe.replyMessage.msgIdServer&&(qe.replyMsgFromAccount=pe.replyMessage.fromAccount,qe.replyMsgTime=+pe.replyMessage.time,qe.replyMsgIdServer=pe.replyMessage.msgIdServer,qe.replyMsgIdClient=pe.replyMessage.msgIdClient,pe.replyMessage.threadRefer&&pe.replyMessage.threadRefer.msgIdServer?(qe.threadMsgFromAccount=pe.replyMessage.threadRefer.fromAccount,qe.threadMsgTime=+pe.replyMessage.threadRefer.time,qe.threadMsgIdServer=pe.replyMessage.threadRefer.msgIdServer,qe.threadMsgIdClient=pe.replyMessage.threadRefer.msgIdClient):(qe.threadMsgFromAccount=pe.replyMessage.fromAccount,qe.threadMsgTime=+pe.replyMessage.time,qe.threadMsgIdServer=pe.replyMessage.msgIdServer,qe.threadMsgIdClient=pe.replyMessage.msgIdClient),delete qe.replyMessage),qe}function s1(pe){return Wa({operatorClientType:{type:"enum",values:Rc},pushPayload:{type:"object"}},pe)}function Ys(pe,xe,qe){var Oe,Ie;return xe===void 0&&(xe={}),hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return(Dt=Wa(a1,pe)).deliveryStatus=xe.deliveryStatus?Gi[xe.deliveryStatus]:Gi[Gi.success],xe.time&&(Dt.time=xe.time),Dt.updateContent&&(Pt=Wa({status:{type:"number"}},Pt=ps(Pt=JSON.parse(Dt.updateContent),La.qchatMsgTag)),Dt.updateContent=Pt),Dt.updateOperatorInfo&&(ir=s1(ps(ir=JSON.parse(Dt.updateOperatorInfo),La.qchatMsgUpdateTag)),Dt.updateOperatorInfo=ir),((Oe=Dt==null?void 0:Dt.threadRefer)===null||Oe===void 0?void 0:Oe.fromAccount)===""&&delete Dt.threadRefer,((Ie=Dt==null?void 0:Dt.replyRefer)===null||Ie===void 0?void 0:Ie.fromAccount)===""&&delete Dt.replyRefer,Dt.attach&&xe.attachUrl&&(Dt.attach.url=xe.attachUrl),xr.next=10,zC(Dt,qe);case 10:return xr.abrupt("return",xr.sent);case 11:case"end":return xr.stop()}},At)}))}function zC(pe,xe){return hn(this,void 0,void 0,Dr.mark(function qe(){var Oe;return Dr.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(Ti(o1).call(o1,pe.type)&&pe.attach&&pe.attach.url){At.next=2;break}return At.abrupt("return",pe);case 2:if(xe&&xe.cloudStorage&&typeof xe.cloudStorage.getPrivateUrl=="function"&&typeof xe.cloudStorage.getOriginUrl=="function"){At.next=4;break}return At.abrupt("return",pe);case 4:if(!(ea(Oe=pe.attach.url).call(Oe,"_im_url=1")<0)){At.next=7;break}return pe.attach.url=xe.cloudStorage.getPrivateUrl(pe.attach.url),At.abrupt("return",pe);case 7:return At.prev=7,At.next=10,xe.cloudStorage.getOriginUrl(pe.attach.url);case 10:pe.attach.url=At.sent,At.next=16;break;case 13:throw At.prev=13,At.t0=At.catch(7),new v0('url "'+pe.attach.url+'" parse error',"message.attach.url","parse error");case 16:return At.abrupt("return",pe);case 17:case"end":return At.stop()}},qe,null,[[7,13]])}))}function i1(pe,xe,qe){return xe===void 0&&(xe={}),hn(this,void 0,void 0,Dr.mark(function Oe(){var Ie;return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Cs(pe)&&pe.length>0){Dt.next=2;break}return Dt.abrupt("return",[]);case 2:return Ie=Do(pe).call(pe,function(Pt){return Ys(Pt,xe,qe)}),Dt.next=5,ca.all(Ie);case 5:return Dt.abrupt("return",Dt.sent);case 6:case"end":return Dt.stop()}},Oe)}))}var WC={totalCount:{type:"number"},lastUpdateTime:{type:"number"},details:{type:"object"}};function GC(pe){var xe=Do(pe).call(pe,function(Oe){var Ie,At=Wa(WC,Oe);return At.details=Do(Ie=At.details).call(Ie,function(Dt){var Pt=Dt.createTime?ma(Dt.createTime):0;return Pt=isNaN(Pt)?0:Pt,{count:Dt.count,hasSelf:Dt.self,severalAccids:Dt.topN,type:Dt.type,createTime:Pt}}),At}),qe={};return To(xe).call(xe,function(Oe){return qe[Oe.msgIdServer]=Oe}),qe}var KC={type:{type:"number"},time:{type:"number"},opeType:{type:"number"}},QC={includeSelf:{type:"number"},order:{type:"enum",values:ml},sort:{type:"enum",values:cd},msgTypes:{type:"object"},subTypes:{type:"object"}},c1={hasMore:{type:"boolean"},nextTimetag:{type:"number"},cursor:{type:"string"}},l1,ai,JC={6:function(xe){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInServerId(xe.serverId),!0},16:function(xe){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInChannel(xe.serverId,xe.channelId),!0},26:function(xe){var qe=ds(xe,"attach.addAccids");return qe&&Ti(qe).call(qe,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",xe),!0},27:function(xe){var qe=ds(xe,"attach.deleteAccids");return qe&&Ti(qe).call(qe,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",xe),!0},31:function(xe){var qe;return xe.attach.event===1?!((qe=this.core.otherOptions.qchatChannelConfig)===null||qe===void 0)&&qe.autoSubscribe&&this.core.qchatChannel.subscribeChannel({type:1,opeType:1,channels:[{serverId:xe.serverId,channelId:xe.channelId}],isInternalTrigger:!0}):xe.attach.event===2&&(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",xe),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",xe)),!0},32:function(xe){var qe;return xe.attach.event===2?(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",xe),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",xe)):xe.attach.event===1&&(this.core.qchatChannel.subscribeForVisitorService.deleteServer(xe.serverId),!((qe=this.core.otherOptions.qchatChannelConfig)===null||qe===void 0)&&qe.autoSubscribe&&this.core.qchatServer.subscribeServer({type:4,opeType:1,servers:[{serverId:xe.serverId}],isInternalTrigger:!0})),!0},34:function(xe){return xe.attach.event===2&&this.core.qchatChannel.subscribeForVisitorService.unSubscribeChannel(xe.serverId,xe.channelId),!0},101:function(xe){var qe=Bm(xe,["serverId","channelId","ext","fromAccount","fromNick","time"]);return this.logger.log("qchat on recvTypingEvent: ",qe),this.core.emit("recvTypingEvent",qe),!1}},ud=function(){function pe(qe){this.core=qe,this.logger=qe.logger}var xe=pe.prototype;return xe.sendSystemNotification=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Fv(Oe)});case 2:return At=ir.sent,Dt=Rp(At.content.sysMsg,this.logger),this.core.options.debugLevel==="debug"?this.logger.debug("sendCustomSysMsg success",Dt):this.logger.log("sendCustomSysMsg success",Dt.serverId,Dt.channelId,Dt.msgIdServer),ir.abrupt("return",Dt);case 6:case"end":return ir.stop()}},Ie,this)}))},xe.updateSystemNotification=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return At=Oe.systemNotification,Dt=Jd(Oe,["systemNotification"]),Pt=Bm(At,["msgIdServer","type","body","ext","status"]),ir=Fv(Pt),Or.next=5,this.core.sendCmd("qchatUpdateSystemNotification",{sysMsg:ir,qchatMsgUpdateTag:Hn(Hn({},Dt),{operatorAccount:this.core.account,operatorClientType:Rc.Web,pushPayload:Ao(Oe.pushPayload),routeEnable:xm.boolean(Oe,"routeEnable")})});case 5:return hr=Or.sent,Or.abrupt("return",Rp(hr.content.sysMsg,this.logger));case 7:case"end":return Or.stop()}},Ie,this)}))},xe.markSystemNotificationsRead=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("qchatMarkSysMsgRead",{sysMsgs:Do(At=Oe.systemNotifications).call(At,function(ir){return HC(ir)})});case 2:case"end":return Pt.stop()}},Ie,this)}))},xe.onSysMsg=function(Oe){var Ie=Oe.content.sysMsg;if(Ie){var At=Rp(Ie,this.core.logger),Dt=JC[ya[At.type]];if(Dt&&Dt.call(this,At)===!1)return;var Pt={feature:"default",systemNotifications:[At]};this.logger.log("qchat on systemNotification: ",Pt),this.core.emit("systemNotification",Pt)}else this.core.logger.warn("No sysMsg in onSysMsg packet")},xe.onMultiSysMsg=function(Oe){var Ie=Oe.content.sysMsg;if(Ie){var At=Rp(Ie,this.logger);this.core.emit("systemNotificationUpdate",At)}},xe.onSyncSysMsg=function(Oe){var Ie=this,At=Oe.content.systemNotifications;if(At&&At.length>0){var Dt=Do(At).call(At,function(Pt){return Rp(Pt,Ie.logger)});this.core.emit("systemNotification",{feature:"sync",systemNotifications:Dt})}else this.logger.warn("sync system notification not exist")},pe}(),mc=["image","audio","video","file"],YC=function(){function pe(qe){var Oe=this;this.markMessageRead=Np(function(Ie){return hn(Oe,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,this.core.sendCmd("qchatMarkMessageRead",{markMsgReadTag:Ie});case 2:Dt=hr.sent,Pt=Am(Dt.content.unreadInfo),this.core.eventBus.emit("qchatChannel/updateUnreads",[Pt]);case 5:case"end":return hr.stop()}},At,this)}))},200),this.core=qe,this.logger=qe.logger}var xe=pe.prototype;return xe.sendMessage=function(Oe){var Ie,At,Dt,Pt;return hn(this,void 0,void 0,Dr.mark(function ir(){var hr,xr,Or,jr,Ur,Yr;return Dr.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(!(ea(mc).call(mc,Oe.type)>-1)){Tn.next=4;break}return Tn.next=3,this.doSendFile(Oe);case 3:Oe.attach=Tn.sent;case 4:return hr=jv(Hn({fromAccount:this.core.account},Oe)),Tn.next=7,Ys(hr,{time:new Date().getTime(),deliveryStatus:Gi.sending},this.core);case 7:xr=Tn.sent;try{Oe.onSendBefore&&Oe.onSendBefore(xr)}catch(Dn){this.logger.error("sendMsg: options.onSendBefore error",Dn)}return Tn.prev=9,Tn.next=12,this.core.sendCmd("qchatSendMsg",{qchatMsg:hr});case 12:Or=Tn.sent,Tn.next=22;break;case 15:return Tn.prev=15,Tn.t0=Tn.catch(9),Tn.next=19,Ys(hr,{time:new Date().getTime(),deliveryStatus:Gi.failed,attachUrl:(Ie=xr.attach)===null||Ie===void 0?void 0:Ie.url},this.core);case 19:throw jr=Tn.sent,Tn.t0.msg=jr,Tn.t0;case 22:return Ur=Or.content,Tn.next=25,Ys(Hn({},Ur.qchatMsg),{deliveryStatus:Gi.success,attachUrl:(At=xr.attach)===null||At===void 0?void 0:At.url},this.core);case 25:if(!(Yr=Tn.sent).isAntispam){Tn.next=29;break}throw{code:10403,msg:Yr,message:((Dt=Yr==null?void 0:Yr.antiSpamInfo)===null||Dt===void 0?void 0:Dt.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((Pt=Yr==null?void 0:Yr.antiSpamInfo)===null||Pt===void 0?void 0:Pt.yidunAntiSpamRes)||""};case 29:return Tn.abrupt("return",Yr);case 30:case"end":return Tn.stop()}},ir,this,[[9,15]])}))},xe.doSendFile=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(jn({type:{type:"enum",values:["image","audio","video","file"]},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},Oe),At=Oe.attach){Pt.next=15;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){Pt.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return Pt.prev=5,Pt.next=8,this.core.cloudStorage.uploadFile(Oe);case 8:At=Pt.sent,Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(5),this.logger.error("sendFile:: upload File error or abort",Pt.t0),Pt.t0;case 15:return Pt.abrupt("return",At);case 16:case"end":return Pt.stop()}},Ie,this,[[5,11]])}))},xe.resendMessage=function(Oe){var Ie,At;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt,ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return(Pt=jv(Hn(Hn({},Oe),{resendFlag:!0}))).deliveryStatus=Gi.sending,Ur.prev=2,Ur.next=5,this.core.sendCmd("qchatSendMsg",{qchatMsg:Pt});case 5:ir=Ur.sent,Ur.next=15;break;case 8:return Ur.prev=8,Ur.t0=Ur.catch(2),Ur.next=12,Ys(Pt,{time:new Date().getTime(),deliveryStatus:Gi.failed},this.core);case 12:throw hr=Ur.sent,Ur.t0.msg=hr,Ur.t0;case 15:return xr=ir.content,Ur.next=18,Ys(Hn({},xr.qchatMsg),{deliveryStatus:Gi.success},this.core);case 18:if(!(Or=Ur.sent).isAntispam){Ur.next=22;break}throw{code:10403,msg:Or,message:((Ie=Or==null?void 0:Or.antiSpamInfo)===null||Ie===void 0?void 0:Ie.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((At=Or==null?void 0:Or.antiSpamInfo)===null||At===void 0?void 0:At.yidunAntiSpamRes)||""};case 22:return Ur.abrupt("return",Or);case 23:case"end":return Ur.stop()}},Dt,this,[[2,8]])}))},xe.doUpdateMessage=function(Oe){var Ie,At;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt,ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Pt=Oe.message,ir=Jd(Oe,["message"]),(hr=jv(Pt)).msgIdClient=void 0,hr.time=Pt.time,Ur.next=6,this.core.sendCmd("qchatUpdateMessage",{qchatMsg:hr,qchatMsgUpdateTag:Hn(Hn({},ir),{operatorAccount:this.core.account,operatorClientType:Rc.Web,pushPayload:Ao(Oe.pushPayload),routeEnable:xm.boolean(Oe,"routeEnable")})});case 6:return xr=Ur.sent,Ur.next=9,Ys(xr.content.qchatMsg,{},this.core);case 9:if(Or=Ur.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Or,!0),!xr.content.qchatMsg.isAntispam){Ur.next=14;break}throw{code:10403,msg:hr,message:((Ie=xr.content.qchatMsg)===null||Ie===void 0?void 0:Ie.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((At=xr.content.qchatMsg)===null||At===void 0?void 0:At.yidunAntiSpamRes)||""};case 14:return Ur.abrupt("return",Or);case 15:case"end":return Ur.stop()}},Dt,this)}))},xe.getHistoryMessage=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir=this;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return xr.next=2,this.core.sendCmd("qchatGetHistoryMsg",{getHistoryMsgTag:Hn(Hn({},Oe),{reverse:Hd(Oe)?1:0})});case 2:return Dt=xr.sent,Pt=Dt.content,xr.next=6,ca.all(Do(At=Pt.qchatMsgs).call(At,function(Or){return Ys(Or,{},ir.core)}));case 6:return xr.abrupt("return",xr.sent);case 7:case"end":return xr.stop()}},Ie,this)}))},xe.getMentionedMeMessages=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return jr.next=2,this.core.sendCmd("qchatGetMentionedMeMessages",{tag:Oe});case 2:return Dt=jr.sent,Pt=Dt.content,Ur=Pt.page,ir=Wa(c1,Ur),jr.next=7,ca.all(Do(At=Pt.datas).call(At,function(Yr){return Ys(Yr,{},xr.core)}));case 7:return hr=jr.sent,jr.abrupt("return",{pageInfo:ir,messages:hr});case 9:case"end":return jr.stop()}var Ur},Ie,this)}))},xe.areMentionedMeMessages=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:At={},Dt=0;case 2:if(!(Dt<Oe.length)){hr.next=13;break}if((Pt=Oe[Dt]).fromAccount!==this.core.account){hr.next=7;break}return At[Pt.msgIdClient]=!1,hr.abrupt("continue",10);case 7:return hr.next=9,this.core.qchatChannel.subscribeModuleService.getMentionedFlag(Pt,!0);case 9:At[Pt.msgIdClient]=hr.sent;case 10:Dt++,hr.next=2;break;case 13:return hr.abrupt("return",At);case 14:case"end":return hr.stop()}},Ie,this)}))},xe.getLastMessageOfChannels=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,this.core.sendCmd("qchatGetLastMessageOfChannels",{tag:Oe});case 2:return At=hr.sent,Dt=At.content.msgs,hr.next=6,i1(Dt,{},this.core);case 6:return Pt=hr.sent,hr.abrupt("return",td(Pt).call(Pt,function(xr,Or){return xr[Or.channelId]=Or,xr},{}));case 8:case"end":return hr.stop()}},Ie,this)}))},xe.messageSearchByPage=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Or.next=2,this.core.sendCmd("qchatMessageSearchByPage",{qchatMessageSearchByPageTag:Hn(Hn({},(jr=Oe,Cp(QC,jr))),{includeSelf:Oe.includeSelf?1:""})});case 2:return At=Or.sent,Dt=At.content,Pt=Dt.datas,ir=Dt.listQueryTag,Or.next=6,i1(Pt,{},this.core);case 6:return hr=Or.sent,Or.abrupt("return",{listQueryTag:{hasMore:+ir.hasMore==1,nextTimetag:ir.nextTimetag?ma(ir.nextTimetag):0,cursor:ir.cursor},datas:hr});case 8:case"end":return Or.stop()}var jr},Ie,this)}))},xe.onMsg=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(At=Oe.content.qchatMsg){ir.next=4;break}return this.logger.warn("No qchatMsg in qchatMsg packet"),ir.abrupt("return");case 4:return ir.next=6,Ys(At,{},this.core);case 6:Dt=ir.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Dt,!1),this.core.emit("message",Dt);case 9:case"end":return ir.stop()}},Ie,this)}))},xe.onRecvUnreadInfo=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(At=Oe.content.qchatMsg){ir.next=3;break}return ir.abrupt("return");case 3:return ir.next=5,Ys(At);case 5:Dt=ir.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Dt,!1);case 7:case"end":return ir.stop()}},Ie,this)}))},xe.onMultiSyncRead=function(Oe){var Ie=Oe.content.unreadInfo;if(Ie){var At=Am(Ie);this.core.eventBus.emit("qchatChannel/updateUnreads",[At])}},xe.onMultiSyncServersRead=function(Oe){var Ie=Oe.content.qchatMultiSyncServersMessageReadTag;if(Ie){var At=Pc(Ie),Dt=At.successServerIds,Pt=At.ackTimestamp;this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",Dt,Pt)}},xe.onRecvMsgUpdate=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(At=Oe.content.qchatMsg,Dt=Oe.content.qchatMsgUpdateInfo,At){xr.next=4;break}return xr.abrupt("return");case 4:return xr.next=6,Ys(At,{},this.core);case 6:Pt=xr.sent,ir=s1(Dt),this.core.eventBus.emit("qchatChannel/changeUnread",Pt,!0),this.core.emit("messageUpdate",Pt,ir);case 10:case"end":return xr.stop()}},Ie,this)}))},pe}(),XC=function(){function pe(qe){var Oe=this;this._sendTypingEvent=Np(function(Ie){return hn(Oe,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Fv(Hn(Hn({},Ie),{resendFlag:!1,persistEnable:!1,routeEnable:!1,pushEnable:!1,needBadge:!1,needPushNick:!1}),ya.msgTyping)});case 2:case"end":return Pt.stop()}},At,this)}))},3e3),this.core=qe,this.logger=qe.logger,this.lastChannelIdInTyping=""}var xe=pe.prototype;return xe.getMessageHistoryByIds=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.core.sendCmd("qchatGetMessageHistoryByIds",{channelInfo:{serverId:Oe.serverId,channelId:Oe.channelId},messageReferList:Oe.messageReferList});case 2:return Dt=ir.sent,ir.abrupt("return",ca.all(Do(At=Dt.content.qchatMsgs).call(At,function(hr){return Ys(hr)})));case 4:case"end":return ir.stop()}},Ie,this)}))},xe.getReferMessages=function(Oe){var Ie,At;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:if(!((Ie=Oe.message.replyRefer)===null||Ie===void 0)&&Ie.msgIdServer&&(!((At=Oe.message.threadRefer)===null||At===void 0)&&At.msgIdServer)){hr.next=2;break}throw new Error("Message has no reply");case 2:return hr.next=4,this.getMessageHistoryByIds({serverId:Oe.message.serverId,channelId:Oe.message.channelId,messageReferList:[Oe.message.replyRefer,Oe.message.threadRefer]});case 4:if(Pt=hr.sent,Oe.referType!==Nc[Nc.all]){hr.next=9;break}return hr.abrupt("return",{replyMessage:Pt[0],threadMessage:Pt[1]});case 9:if(Oe.referType!==Nc[Nc.reply]){hr.next=13;break}return hr.abrupt("return",{replyMessage:Pt[0]});case 13:if(Oe.referType!==Nc[Nc.thread]){hr.next=15;break}return hr.abrupt("return",{threadMessage:Pt[1]});case 15:return hr.abrupt("return",{replyMessage:Pt[0],threadMessage:Pt[1]});case 16:case"end":return hr.stop()}},Dt,this)}))},xe.getThreadMessages=function(Oe){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Pt=!((Ie=Oe.message.threadRefer)===null||Ie===void 0)&&Ie.msgIdServer?Hn({serverId:Oe.message.serverId,channelId:Oe.message.channelId},Oe.message.threadRefer):Oe.message,jr.next=3,this.core.sendCmd("qchatGetThreadMessages",{qchatMsg:Pt,getThreadHistoryMsgTag:Hn(Hn({},Oe.messageQueryOption),{reverse:xm.boolean(Oe.messageQueryOption,"reverse")})});case 3:return ir=jr.sent,jr.next=6,Ys(ir.content.thread);case 6:return hr=jr.sent,jr.next=9,ca.all(Do(Dt=ir.content.qchatMsgs).call(Dt,function(Ur){return Ys(Ur)}));case 9:return xr=jr.sent,jr.abrupt("return",{thread:hr,threadInfo:{messageCount:+ir.content.threadInfo.messageCount,lastMessageTimestamp:+ir.content.threadInfo.lastMessageTimestamp},messages:xr});case 11:case"end":return jr.stop()}},At,this)}))},xe.getThreadRootMessagesMeta=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return At=Oe.threadRootMessages,Dt=Jd(Oe,["threadRootMessages"]),xr.next=3,this.core.sendCmd("qchatGetThreadRootMessagesMeta",{qchatMsgs:At,tag:Dt});case 3:if(Pt=xr.sent,!((ir=Pt.content.metas)&&ir.length>0)){xr.next=7;break}return xr.abrupt("return",Do(ir).call(ir,function(Or){return Hn(Hn({},Or),{total:ma(Or.total),timestamp:ma(Or.timestamp),msgTime:ma(Or.msgTime)})}));case 7:return xr.abrupt("return",[]);case 8:case"end":return xr.stop()}},Ie,this)}))},xe.getQuickComments=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,this.core.sendCmd("qchatGetQuickComments",{tag:{serverId:Oe.serverId,channelId:Oe.channelId,msgIdServerList:Ao(Do(At=Oe.msgList).call(At,function(xr){return xr.msgIdServer}))}});case 2:return Dt=hr.sent,Pt=Dt.content.quickCommentResponse,hr.abrupt("return",GC(Pt));case 5:case"end":return hr.stop()}},Ie,this)}))},xe.updateQuickComment=function(Oe,Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return jn({type:{type:"number"},commentMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},Oe),Dt=Oe.commentMessage,Pt=Dt.serverId,ir=Dt.channelId,hr=Dt.fromAccount,xr=Dt.msgIdServer,Or=Dt.time,Ur.next=4,this.core.sendCmd("qchatUpdateQuickComment",{tag:{serverId:Pt,channelId:ir,fromAccount:hr,msgIdServer:xr,time:Or,type:Oe.type,opeType:Ie,opeAccid:this.core.account}});case 4:case"end":return Ur.stop()}},At,this)}))},xe.sendTypingEvent=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ie(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Oe.channelId!==this.lastChannelIdInTyping){Dt.next=4;break}return this.logger.log("qchatMsg sendTypingEvent throttle"),this._sendTypingEvent(Oe),Dt.abrupt("return");case 4:this.lastChannelIdInTyping=Oe.channelId,this._sendTypingEvent.flush(),this._sendTypingEvent(Oe);case 7:case"end":return Dt.stop()}},Ie,this)}))},pe}(),Lm=function(pe){function xe(Oe){var Ie;return(Ie=pe.call(this,"qchatMsg",Oe)||this).core=Oe,Ie.lastChannelIdInMark="",ou({cmdMap:n1,cmdConfig:qC}),Ie.notificationModuleService=new ud(Oe),Ie.messageModuleService=new YC(Oe),Ie.extendModuleService=new XC(Oe),Ie}ra(xe,pe);var qe=xe.prototype;return qe.sendMessage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(Pp)},ext:{type:"string",required:!1},mentionAll:{type:"boolean",required:!1},mentionAccids:{type:"array",itemType:"string",required:!1},mentionRoleIds:{type:"array",itemType:"string",required:!1,min:1},historyEnable:{type:"boolean",required:!1},pushEnable:{type:"boolean",required:!1}},Ie),Pt.next=3,this.messageModuleService.sendMessage(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.updateMessage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(jn({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0},body:{type:"string",required:!1},ext:{type:"string",required:!1}}}},Ie),!(typeof Ie.message.status=="number"&&Ie.message.status<1e4)){Pt.next=3;break}throw new Ro("Status should be greater than or equal to 10000");case 3:return Pt.next=5,this.messageModuleService.doUpdateMessage(Ie);case 5:return Pt.abrupt("return",Pt.sent);case 6:case"end":return Pt.stop()}},At,this)}))},qe.resendMessage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdClient:{type:"string",allowEmpty:!1}},Ie),Pt.next=3,this.messageModuleService.resendMessage(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.deleteMessage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},Ie),(Dt=JSON.parse(Ao(Ie))).message.status=2,ir.next=5,this.messageModuleService.doUpdateMessage(Dt);case 5:return ir.abrupt("return",ir.sent);case 6:case"end":return ir.stop()}},At,this)}))},qe.revokeMessage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},Ie),(Dt=JSON.parse(Ao(Ie))).message=Bm(Dt.message,["serverId","channelId","msgIdServer","time"]),Dt.message.status=1,ir.next=6,this.messageModuleService.doUpdateMessage(Dt);case 6:return ir.abrupt("return",ir.sent);case 7:case"end":return ir.stop()}},At,this)}))},qe.markMessageRead=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:jn({serverId:{type:"string"},channelId:{type:"string"},time:{type:"number",min:0}},Ie),Ie.channelId!==this.lastChannelIdInMark&&this.messageModuleService.markMessageRead.flush(),this.lastChannelIdInMark=Ie.channelId,this.messageModuleService.markMessageRead(Ie);case 4:case"end":return Pt.stop()}},At,this)}))},qe.replyMessage=function(Ie){jn({replyMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},Ie);var At=Ie.replyMessage;if(Ie.serverId!==At.serverId||Ie.channelId!==At.channelId)throw new Ro("Forbid replying to message from other server, channel");return this.sendMessage(Ie)},qe.getMessageHistoryByIds=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},messageReferList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ie),Pt.next=3,this.extendModuleService.getMessageHistoryByIds(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.getReferMessages=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},referType:{type:"enum",values:Aa(Nc),required:!1}},Ie),Pt.next=3,this.extendModuleService.getReferMessages(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.getThreadMessages=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},messageQueryOption:{type:"object",rules:{beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},excludeMsgId:{type:"string",required:!1},limit:{type:"number",required:!1},reverse:{type:"boolean",required:!1}}}},Ie),Pt.next=3,this.extendModuleService.getThreadMessages(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.getThreadRootMessagesMeta=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},threadRootMessages:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ie),Pt.next=3,this.extendModuleService.getThreadRootMessagesMeta(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.sendSystemNotification=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},attach:{type:"object",required:!1}},Ie),Pt.next=3,this.notificationModuleService.sendSystemNotification(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.updateSystemNotification=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({systemNotification:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"enum",values:Aa(ya)},body:{type:"string",required:!1},ext:{type:"string",required:!1},status:{type:"number",required:!1}}}},Ie),Pt.next=3,this.notificationModuleService.updateSystemNotification(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.markSystemNotificationsRead=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({systemNotifications:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1}},min:1}},Ie),Pt.next=3,this.notificationModuleService.markSystemNotificationsRead(Ie);case 3:case"end":return Pt.stop()}},At,this)}))},qe.getHistoryMessage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},beginTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},excludeMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},Ie),Pt.next=3,this.messageModuleService.getHistoryMessage(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.getMentionedMeMessages=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Ie),Pt.next=3,this.messageModuleService.getMentionedMeMessages(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.areMentionedMeMessages=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(jn({messages:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1}},min:1}},Ie),e0(Dt=Ie.messages).call(Dt,function(hr){return Ie.messages[0].serverId===hr.serverId})){ir.next=4;break}throw new Ro("Different serverId",Ie,10414);case 4:if(!this.core.qchatChannel.subscribeForVisitorService.isInAutoServers(Ie.messages[0].serverId)){ir.next=7;break}throw new Ro("Not allowed for visitor",Ie,10403);case 7:return ir.next=9,this.messageModuleService.areMentionedMeMessages(Ie.messages);case 9:return ir.abrupt("return",ir.sent);case 10:case"end":return ir.stop()}},At,this)}))},qe.addQuickComment=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.extendModuleService.updateQuickComment(Ie,1);case 2:case"end":return Pt.stop()}},At,this)}))},qe.removeQuickComment=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.extendModuleService.updateQuickComment(Ie,2);case 2:case"end":return Pt.stop()}},At,this)}))},qe.getQuickComments=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1}},min:1}},Ie),Pt.next=3,this.extendModuleService.getQuickComments(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.sendTypingEvent=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ie),Pt.next=3,this.extendModuleService.sendTypingEvent(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.getLastMessageOfChannels=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelIdList:{type:"array",itemType:"string"}},Ie),Pt.next=3,this.messageModuleService.getLastMessageOfChannels(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.qchatOnMsgHandler=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this.messageModuleService.onMsg(Ie);case 1:case"end":return Pt.stop()}},At,this)}))},qe.qchatOnRecvUnreadInfoHandler=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this.messageModuleService.onRecvUnreadInfo(Ie);case 1:case"end":return Pt.stop()}},At,this)}))},qe.qchatOnSysMsgHandler=function(Ie){this.notificationModuleService.onSysMsg(Ie)},qe.qchatMultiSyncMessageReadHandler=function(Ie){this.messageModuleService.onMultiSyncRead(Ie)},qe.qchatMultiSyncSystemNotificationUpdateHandler=function(Ie){this.notificationModuleService.onMultiSysMsg(Ie)},qe.qchatSyncSystemNotificationHandler=function(Ie){this.notificationModuleService.onSyncSysMsg(Ie)},qe.qchatRecvMessageUpdateHandler=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this.messageModuleService.onRecvMsgUpdate(Ie);case 1:case"end":return Pt.stop()}},At,this)}))},qe.searchMsgByPage=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({keyword:{type:"string",allowEmpty:!1,required:!1},serverId:{type:"string",allowEmpty:!1,required:!0},channelId:{type:"string",allowEmpty:!1,required:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},fromTime:{type:"number",allowEmpty:!1,required:!1},toTime:{type:"number",allowEmpty:!1,required:!1},msgTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!0},subTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!1},includeSelf:{type:"boolean",allowEmpty:!1,required:!1},order:{type:"enum",values:Aa(ml),required:!1},limit:{type:"number",min:0,required:!1},sort:{type:"enum",values:Aa(cd),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ie),Pt.next=3,this.messageModuleService.messageSearchByPage(Ie);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},At,this)}))},qe.qchatMultiSyncServersMessageReadHandler=function(Ie){this.messageModuleService.onMultiSyncServersRead(Ie)},xe}(rd);(function(pe){pe.UNKNOWN="UNKNOWN",pe.LOGIN_STATE_ERROR="LOGIN_STATE_ERROR",pe.CLOSE_BY_BACKEND="CLOSE_BY_BACKEND",pe.ALL_MEMBERS_OUT="ALL_MEMBERS_OUT",pe.END_OF_LIFE="END_OF_LIFE",pe.CLOSE_BY_MEMBER="CLOSE_BY_MEMBER",pe.KICK_OUT="KICK_OUT",pe.SYNC_DATA_ERROR="SYNC_DATA_ERROR",pe.LEAVE_BY_SELF="LEAVE_BY_SELF",pe.kICK_BY_SELF="kICK_BY_SELF"})(l1||(l1={})),function(pe){pe.offNotAllowSelfOn="offNotAllowSelfOn",pe.offAllowSelfOn="offAllowSelfOn",pe.disable="disable"}(ai||(ai={}));var ZC={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},eM={limit:{type:"number"}};function tM(pe){return Cs(pe)&&pe.length>0?Do(pe).call(pe,function(xe){return function(Oe){return Wa(ZC,Oe)}(xe)}):[]}function rM(pe){try{pe.audio&&(pe.audio=JSON.parse(pe.audio))}catch{throw new ru('result "audio" JSON parse error',{key:"audio"},"JSON parse error")}try{pe.video&&(pe.video=JSON.parse(pe.video))}catch{throw new ru('result "video" JSON parse error',{key:"video"},"JSON parse error")}return Wa(eM,pe)}var nM={"25_1":"qchatGetNeroomToken","25_2":"qchatUpdateRTCChannelConfig","25_3":"qchatGetRTCChannelConfig","25_4":"qchatGetRTCChannelMembers"},Bp={QChatRTCChannelConfigTag:{serverId:1,channelId:2,limit:3,audio:4,video:5},QChatRTCChannelConfigResultTag:{limit:1,audio:2,video:3},QChatGetRTCParams:{serverId:1,channelId:2},qchatGetRTCChannelMembersTag:{serverId:1,channelId:2},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},QChatGetNeroomTokenResultTag:{token:1,expire:2},QChatGetNeroomTokenParams:{neroomDeviceId:1}},Fm=Wi(Bp),Lp={qchatGetNeroomToken:{sid:25,cid:1,service:"qchatMedia",params:[{type:"Property",name:"qchatGetNeroomTokenTag",reflectMapper:Bp.QChatGetNeroomTokenParams}],response:[{type:"Property",name:"neroomToken",reflectMapper:Fm.QChatGetNeroomTokenResultTag}]},qchatUpdateRTCChannelConfig:{sid:25,cid:2,service:"qchatMedia",params:[{type:"Property",name:"RTCChannelConfig",reflectMapper:Bp.QChatRTCChannelConfigTag}]},qchatGetRTCChannelConfig:{sid:25,cid:3,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelConfigTag",reflectMapper:Bp.QChatGetRTCParams}],response:[{type:"Property",name:"RTCChannelConfig",reflectMapper:Fm.QChatRTCChannelConfigResultTag}]},qchatGetRTCChannelMembers:{sid:25,cid:4,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelMembersTag",reflectMapper:Bp.QChatGetRTCParams}],response:[{type:"PropertyArray",name:"memberList",reflectMapper:Fm.memberInfo}]}},u1=function(pe){function xe(Oe){var Ie;return(Ie=pe.call(this,"qchatMedia",Oe)||this).tokenExpireTime=24e4,Ie.getTokenState=!1,Ie.core=Oe,ou({cmdMap:nM,cmdConfig:Lp}),Ie.core.on("disconnect",function(){return hn(k(Ie),void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(!this.roomContext){Pt.next=3;break}return Pt.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return Pt.stop()}},At,this)}))}),Ie.core.on("kicked",function(){return hn(k(Ie),void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(!this.roomContext){Pt.next=3;break}return Pt.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return Pt.stop()}},At,this)}))}),Ie.core.eventBus.on("qchatMedia/serverOrChannelLeave",function(At){return hn(k(Ie),void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!(At.type===ya[ya.channelVisibilityUpdate]&&At.channelId===this.channelId||At.type===ya[ya.serverEnterLeave]&&At.serverId===this.serverId)){ir.next=4;break}if(!this.roomContext||!this.roomContext.roomUuid){ir.next=4;break}return ir.next=4,this.disconnectChannel();case 4:case"end":return ir.stop()}},Dt,this)}))}),Ie.tokenExpireTime=24e4,Ie.channelId="",Ie.serverId="",Ie}ra(xe,pe);var qe=xe.prototype;return qe.setNeroom=function(Ie){this.neroom=new Ie},qe._checkPermission=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.core.qchatRole.checkPermission(Ie);case 2:return Dt=ir.sent,ir.abrupt("return",Dt);case 4:case"end":return ir.stop()}},At,this)}))},qe._checkConnectState=function(){if(this.state!=="connect")throw new Ro("QChatMedia::you should connect first")},qe.kickMemberOut=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),ir.prev=2,ir.next=5,(At=this.roomContext)===null||At===void 0?void 0:At.kickMemberOut(Ie.accid);case 5:ir.next=11;break;case 7:throw ir.prev=7,ir.t0=ir.catch(2),this.logger.error("QChatMedia::kickMemberOut error params is "+Ao(Ie),ir.t0),new Ro("QChatMedia::kickMemberOut error",ir.t0);case 11:case"end":return ir.stop()}},Dt,this,[[2,7]])}))},qe.disconnectChannel=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),this.logger.debug("QChatMedia::disconnect begin disconnect"),Pt.prev=2,Pt.next=5,(Ie=this.roomContext)===null||Ie===void 0?void 0:Ie.leaveRoom();case 5:Pt.next=10;break;case 7:Pt.prev=7,Pt.t0=Pt.catch(2),this.logger.error("QChatMedia::disconnect error",Pt.t0);case 10:if(!this.authService){Pt.next=13;break}return Pt.next=13,this.authService.logout();case 13:this._setStateInit(),this.core.emit("qchatMediaDisconnect");case 15:case"end":return Pt.stop()}},At,this,[[2,7]])}))},qe._setStateInit=function(){this.logger.debug("QChatMedia::disconnect end"),this.roomContext=void 0,this.rtcController=void 0,this.state="init",this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0),this.channelId="",this.serverId=""},qe.muteAudio=function(Ie){var At,Dt,Pt,ir,hr;return hn(this,void 0,void 0,Dr.mark(function xr(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),((At=this.roomContext)===null||At===void 0?void 0:At.localMember.uuid)!==Ie.accid){Ur.next=14;break}return Ur.prev=3,Ur.next=6,(Dt=this.rtcController)===null||Dt===void 0?void 0:Dt.muteMyAudio();case 6:Ur.next=12;break;case 8:throw Ur.prev=8,Ur.t0=Ur.catch(3),this.logger.error("QChatMedia::muteAudio error",Ur.t0),new Ro("QChatMedia::muteAudio error",Ur.t0);case 12:case 25:Ur.next=31;break;case 14:if(Ur.prev=14,!(Or=(Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.roomProperties.audioOff)||((ir=Or.value)===null||ir===void 0?void 0:ir.split("_")[0])!==ai.offNotAllowSelfOn){Ur.next=23;break}return Ur.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 19:if(Ur.sent){Ur.next=23;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),Ur.abrupt("return");case 23:return Ur.next=25,(hr=this.rtcController)===null||hr===void 0?void 0:hr.muteMemberAudio(Ie.accid);case 27:throw Ur.prev=27,Ur.t1=Ur.catch(14),this.logger.error("QChatMedia::muteAudio error params is "+Ao(Ie),Ur.t1),new Ro("QChatMedia::muteAudio error",Ur.t1);case 31:case"end":return Ur.stop()}},xr,this,[[3,8],[14,27]])}))},qe.unMuteAudio=function(Ie){var At,Dt,Pt,ir,hr;return hn(this,void 0,void 0,Dr.mark(function xr(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),!(Or=(At=this.roomContext)===null||At===void 0?void 0:At.roomProperties.audioOff)||((Dt=Or.value)===null||Dt===void 0?void 0:Dt.split("_")[0])!==ai.offNotAllowSelfOn){Ur.next=10;break}return Ur.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 6:if(Ur.sent){Ur.next=10;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),Ur.abrupt("return");case 10:if(((Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.localMember.uuid)!==Ie.accid){Ur.next=22;break}return Ur.prev=11,Ur.next=14,(ir=this.rtcController)===null||ir===void 0?void 0:ir.unmuteMyAudio();case 14:Ur.next=20;break;case 16:throw Ur.prev=16,Ur.t0=Ur.catch(11),this.logger.error("QChatMedia::unMuteAudio error",Ur.t0),new Ro("QChatMedia::unMuteAudio error",Ur.t0);case 20:case 25:Ur.next=31;break;case 22:return Ur.prev=22,Ur.next=25,(hr=this.rtcController)===null||hr===void 0?void 0:hr.unmuteMemberAudio(Ie.accid);case 27:throw Ur.prev=27,Ur.t1=Ur.catch(22),this.logger.error("QChatMedia::unMuteAudio error params is "+Ao(Ie),Ur.t1),new Ro("QChatMedia::unMuteAudio error",Ur.t1);case 31:case"end":return Ur.stop()}},xr,this,[[11,16],[22,27]])}))},qe.muteVideo=function(Ie){var At,Dt,Pt,ir,hr;return hn(this,void 0,void 0,Dr.mark(function xr(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),((At=this.roomContext)===null||At===void 0?void 0:At.localMember.uuid)!==Ie.accid){Ur.next=14;break}return Ur.prev=3,Ur.next=6,(Dt=this.rtcController)===null||Dt===void 0?void 0:Dt.muteMyVideo();case 6:Ur.next=12;break;case 8:throw Ur.prev=8,Ur.t0=Ur.catch(3),this.logger.error("QChatMedia::muteVideo error",Ur.t0),new Ro("QChatMedia::muteVideo error",Ur.t0);case 12:case 25:Ur.next=31;break;case 14:if(Ur.prev=14,!(Or=(Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.roomProperties.videoOff)||((ir=Or.value)===null||ir===void 0?void 0:ir.split("_")[0])!==ai.offNotAllowSelfOn){Ur.next=23;break}return Ur.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 19:if(Ur.sent){Ur.next=23;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),Ur.abrupt("return");case 23:return Ur.next=25,(hr=this.rtcController)===null||hr===void 0?void 0:hr.muteMemberVideo(Ie.accid);case 27:throw Ur.prev=27,Ur.t1=Ur.catch(14),this.logger.error("QChatMedia::muteVideo error params is "+Ao(Ie),Ur.t1),new Ro("QChatMedia::muteVideo error",Ur.t1);case 31:case"end":return Ur.stop()}},xr,this,[[3,8],[14,27]])}))},qe.unMuteVideo=function(Ie){var At,Dt,Pt,ir,hr;return hn(this,void 0,void 0,Dr.mark(function xr(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),!(Or=(At=this.roomContext)===null||At===void 0?void 0:At.roomProperties.videoOff)||((Dt=Or.value)===null||Dt===void 0?void 0:Dt.split("_")[0])!==ai.offNotAllowSelfOn){Ur.next=10;break}return Ur.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 6:if(Ur.sent){Ur.next=10;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),Ur.abrupt("return");case 10:if(((Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.localMember.uuid)!==Ie.accid){Ur.next=22;break}return Ur.prev=11,Ur.next=14,(ir=this.rtcController)===null||ir===void 0?void 0:ir.unmuteMyVideo();case 14:Ur.next=20;break;case 16:throw Ur.prev=16,Ur.t0=Ur.catch(11),this.logger.error("QChatMedia::unMuteVideo error",Ur.t0),new Ro("QChatMedia::unMuteVideo error",Ur.t0);case 20:Ur.next=30;break;case 22:Ur.prev=22,(hr=this.rtcController)===null||hr===void 0||hr.unmuteMemberVideo(Ie.accid),Ur.next=30;break;case 26:throw Ur.prev=26,Ur.t1=Ur.catch(22),this.logger.error("QChatMedia::unMuteVideo error",Ur.t1),new Ro("QChatMedia::unMuteVideo error",Ur.t1);case 30:case"end":return Ur.stop()}},xr,this,[[11,16],[22,26]])}))},qe.startScreenShare=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this._checkConnectState(),Pt.prev=1,(Ie=this.rtcController)===null||Ie===void 0||Ie.startScreenShare(),Pt.next=9;break;case 5:throw Pt.prev=5,Pt.t0=Pt.catch(1),this.logger.error("QChatMedia::startScreenShare error",Pt.t0),new Ro("QChatMedia::startScreenShare error",Pt.t0);case 9:case"end":return Pt.stop()}},At,this,[[1,5]])}))},qe.stopScreenShare=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this._checkConnectState(),Pt.prev=1,(Ie=this.rtcController)===null||Ie===void 0||Ie.stopScreenShare(),Pt.next=9;break;case 5:throw Pt.prev=5,Pt.t0=Pt.catch(1),this.logger.error("QChatMedia::stopScreenShare error",Pt.t0),new Ro("QChatMedia::stopScreenShare error",Pt.t0);case 9:case"end":return Pt.stop()}},At,this,[[1,5]])}))},qe.stopMemberScreenShare=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),ir.prev=2,(At=this.rtcController)===null||At===void 0||At.stopMemberScreenShare(Ie.accid),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::stopMemberScreenShare error",ir.t0),new Ro("QChatMedia::stopMemberScreenShare error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.subscribeRemoteVideoStream=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},Ie),ir.prev=2,(At=this.rtcController)===null||At===void 0||At.subscribeRemoteVideoStream(Ie.accid,Ie.streamType),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoStream error",ir.t0),new Ro("QChatMedia::subscribeRemoteVideoStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.unSubscribeRemoteVideoStream=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},Ie),ir.prev=2,(At=this.rtcController)===null||At===void 0||At.unsubscribeRemoteVideoStream(Ie.accid,Ie.streamType),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::unSubscribeRemoteVideoStream error",ir.t0),new Ro("QChatMedia::unSubscribeRemoteVideoStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.setupVideoCanvas=function(Ie){var At;if(this._checkConnectState(),((At=this.roomContext)===null||At===void 0?void 0:At.localMember.uuid)===Ie.accid)try{return this.rtcController.setupLocalVideoCanvas(Ie.videoView)}catch(Dt){throw this.logger.error("QChatMedia::setupVideoCanvas error",Dt),new Ro("QChatMedia::setupVideoCanvas error",Dt)}else try{return this.rtcController.setupRemoteVideoCanvas(Ie.videoView,Ie.accid)}catch(Dt){throw this.logger.error("QChatMedia::setupVideoCanvas error",Dt),new Ro("QChatMedia::setupVideoCanvas error",Dt)}},qe.setupRemoteVideoSubStreamCanvas=function(Ie){this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie);try{return this.rtcController.setupRemoteVideoSubStreamCanvas(Ie.videoView,Ie.accid)}catch(At){throw this.logger.error("QChatMedia::setupRemoteVideoSubStreamCanvas error",At),new Ro("QChatMedia::setupRemoteVideoSubStreamCanvas error",At)}},qe.getScreenSharingUserUuid=function(){this._checkConnectState();try{return this.rtcController.getScreenSharingUserUuid()}catch(Ie){throw this.logger.error("QChatMedia::getScreenSharingUserUuid error",Ie),new Ro("QChatMedia::getScreenSharingUserUuid error",Ie)}},qe.initQChatMedia=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(this.neroom){Pt.next=3;break}return this.logger.warn("QChatMedia::init::you should import neroom SDK"),Pt.abrupt("return");case 3:if(this.state===void 0){Pt.next=6;break}return this.logger.error("QChatMedia::init::you already init QChatMedia"),Pt.abrupt("return");case 6:Pt.prev=6,this.neroom.initialize({appKey:this.core.options.appkey,serverConfig:Ie.serverConfig}),Pt.next=14;break;case 10:throw Pt.prev=10,Pt.t0=Pt.catch(6),this.logger.error("QChatMedia::initQChatMedia error",Pt.t0),new Ro("QChatMedia::initQChatMedia error",Pt.t0);case 14:this.authService=this.neroom.authService,this.roomService=this.neroom.roomService,this.messageChannelService=this.neroom.messageChannelService,this.state="init";case 18:case"end":return Pt.stop()}},At,this,[[6,10]])}))},qe.loginByIM=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:if(this.state==="init"){hr.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),hr.abrupt("return");case 3:return Dt=this.core.options,hr.next=6,this._getToken();case 6:return Pt=hr.sent,hr.prev=7,hr.next=10,(Ie=this.authService)===null||Ie===void 0?void 0:Ie.loginByIM(Dt.account,Pt,Dt.token);case 10:hr.next=16;break;case 12:throw hr.prev=12,hr.t0=hr.catch(7),this.logger.error("QChatMedia::loginByIM error",hr.t0),new Ro("QChatMedia::loginByIM error",hr.t0);case 16:this.state="login";case 17:case"end":return hr.stop()}},At,this,[[7,12]])}))},qe._getToken=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return this.logger.log("QChatMedia::getToken begin getToken"),jr.next=3,this.core.sendCmd("qchatGetNeroomToken",{qchatGetNeroomTokenTag:{neroomDeviceId:(Ie=this.neroom)===null||Ie===void 0?void 0:Ie.deviceId}});case 3:return Dt=jr.sent,Pt=Dt.content.neroomToken,ir=Pt.token,hr=Pt.expire,this.logger.log("QChatMedia::getToken success token is "+ir+",expire is "+hr+" "),this.tokenTimer||(this.logger.debug("QChatMedia::getToken set token timer,expire is "+(1e3*hr-this.tokenExpireTime)+" "),this.tokenTimer=this.core.timerManager.addTimer(function(){return hn(xr,void 0,void 0,Dr.mark(function Ur(){var Yr;return Dr.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return this.tokenTimer&&this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0,Tn.next=4,this._getToken();case 4:Yr=Tn.sent,this.authService&&this.authService.renewToken(Yr);case 6:case"end":return Tn.stop()}},Ur,this)}))},1e3*hr-this.tokenExpireTime)),jr.abrupt("return",ir);case 8:case"end":return jr.stop()}},At,this)}))},qe.connectChannel=function(Ie){var At,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(this.state!==void 0){xr.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),xr.abrupt("return");case 3:if(this.state!=="init"){xr.next=6;break}return xr.next=6,this.loginByIM();case 6:return this.serverId=Ie.serverId,this.channelId=Ie.channelId,xr.prev=8,xr.next=11,(At=this.roomService)===null||At===void 0?void 0:At.joinRoom({roomUuid:Ie.channelId,role:"qchatAudience",userName:this.core.options.account,initialProperties:{}},{});case 11:xr.next=17;break;case 13:throw xr.prev=13,xr.t0=xr.catch(8),this.logger.error("QChatMedia::connectChannel error",xr.t0),new Ro("QChatMedia::connectChannel error",xr.t0);case 17:if(!(ir=(Dt=this.roomService)===null||Dt===void 0?void 0:Dt.getRoomContext(Ie.channelId))){xr.next=27;break}return this.roomContext=ir,this.rtcController=this.roomContext.rtcController,this.state="connect",xr.next=24,this.rtcController.joinRtcChannel();case 24:this.core.emit("connectChannel"),xr.next=28;break;case 27:this.logger.error("QChatMedia::connect room not exited");case 28:case"end":return xr.stop()}},Pt,this,[[8,13]])}))},qe.updateRTCChannelInfo=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},limit:{type:"number",allowEmpty:!1}},Ie),Pt.next=3,this.core.sendCmd("qchatUpdateRTCChannelConfig",{RTCChannelConfig:Hn(Hn({},Ie),{audio:Ao(Ie.audio),video:Ao(Ie.video)})});case 3:case"end":return Pt.stop()}},At,this)}))},qe.getRTCChannelInfo=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetRTCChannelConfig",{qchatGetRTCChannelConfigTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",rM(Dt.content.RTCChannelConfig));case 5:case"end":return ir.stop()}},At,this)}))},qe.getRTCChannelOnlineMembers=function(Ie){return hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},Ie),ir.next=3,this.core.sendCmd("qchatGetRTCChannelMembers",{qchatGetRTCChannelMembersTag:Ie});case 3:return Dt=ir.sent,ir.abrupt("return",tM(Dt.content.memberList));case 5:case"end":return ir.stop()}},At,this)}))},qe.addRTCChannelListener=function(){var Ie,At,Dt=this;this._checkConnectState();try{(Ie=this.authService)===null||Ie===void 0||Ie.addAuthListener({onAuthEvent:function(ir){return hn(Dt,void 0,void 0,Dr.mark(function hr(){var xr;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(ir!==1026||this.getTokenState){jr.next=10;break}return this.logger.log("QChatMedia::loginByIM token expire,begin get new token "),this.getTokenState=!0,jr.next=5,this._getToken();case 5:if(xr=jr.sent,!this.authService){jr.next=9;break}return jr.next=9,this.authService.renewToken(xr);case 9:this.getTokenState=!1;case 10:case"end":return jr.stop()}},hr,this)}))}})}catch(Pt){throw this.getTokenState=!1,this.logger.error("QChatMedia::loginByIM addAuthListener error",Pt),new Ro("QChatMedia::loginByIM addAuthListener error",Pt)}(At=this.roomContext)===null||At===void 0||At.addRoomListener({onRoomPropertiesChanged:function(ir){var hr,xr,Or,jr,Ur,Yr;if(Dt.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesChanged",ir),ir.audioOff){var _n=(hr=ir.audioOff.value)===null||hr===void 0?void 0:hr.split("_")[0];_n!==ai.offNotAllowSelfOn&&_n!==ai.offAllowSelfOn||!((xr=Dt.roomContext)===null||xr===void 0)&&xr.localMember.isAudioOn&&((Or=Dt.rtcController)===null||Or===void 0||Or.muteMyAudio())}else if(ir.videoOff){var Tn=(jr=ir.videoOff.value)===null||jr===void 0?void 0:jr.split("_")[0];Tn!==ai.offNotAllowSelfOn&&Tn!==ai.offAllowSelfOn||!((Ur=Dt.roomContext)===null||Ur===void 0)&&Ur.localMember.isVideoOn&&((Yr=Dt.rtcController)===null||Yr===void 0||Yr.muteMyVideo())}},onRoomPropertiesDeleted:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesDeleted",ir)},onMemberJoinRtcChannel:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberJoinRTCChannel",ir);var hr=Do(ir).call(ir,function(xr){return xr.uuid});Dt.core.emit("memberJoinRTCChannel",hr)},onMemberLeaveRoom:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberLeaveRoom",ir);var hr=Do(ir).call(ir,function(xr){return xr.uuid});Dt.core.emit("memberLeaveRTCChannel",hr)},onRoomEnded:function(ir){Dt.authService&&Dt.authService.logout(),Dt._setStateInit(),Dt.logger.log("QChatMedia::addRTCChannelListener::onRoomEnded",ir),Dt.core.emit("RTCChannelEnded",ir)},onRtcChannelError:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onRtcChannelError",ir),ir==="SOCKET_ERROR"&&Dt.disconnectChannel(),Dt.core.emit("RTCChannelError",ir)},onRtcAudioVolumeIndication:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onRtcAudioVolumeIndication",ir),Dt.core.emit("onRtcAudioVolumeIndication",ir)},onMemberAudioMuteChanged:function(ir,hr,xr){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberAudioMuteChanged",ir,hr),Dt.core.emit("memberAudioMuteChanged",{memberAccId:ir.uuid,mute:hr,operateByAccId:xr.uuid})},onMemberScreenShareStateChanged:function(ir,hr,xr){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberScreenShareStateChanged",ir,hr),Dt.core.emit("memberScreenShareStateChanged",{memberAccId:ir.uuid,isSharing:hr,operateByAccId:xr.uuid})},onMemberVideoMuteChanged:function(ir,hr,xr){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberVideoMuteChanged",ir,hr),Dt.core.emit("memberVideoMuteChanged",{memberAccId:ir.uuid,mute:hr,operateByAccId:xr.uuid})}})},qe.enumCameraDevices=function(){var Ie=this;return this._checkConnectState(),this.rtcController.enumCameraDevices().then(function(At){return At.data},function(At){throw Ie.logger.error("QChatMedia::enumCameraDevices error",At),new Ro("QChatMedia::enumCameraDevices error",At)})},qe.enumPlayoutDevices=function(){var Ie=this;return this._checkConnectState(),this.rtcController.enumPlayoutDevices().then(function(At){return At.data},function(At){throw Ie.logger.error("QChatMedia::enumPlayoutDevices error",At),new Ro("QChatMedia::enumPlayoutDevices error",At)})},qe.enumRecordDevices=function(){var Ie=this;return this._checkConnectState(),this.rtcController.enumRecordDevices().then(function(At){return At.data},function(At){throw Ie.logger.error("QChatMedia::enumRecordDevices error",At),new Ro("QChatMedia::enumRecordDevices error",At)})},qe.removeRTCChannelListener=function(){var Ie,At;this._checkConnectState(),(Ie=this.roomContext)===null||Ie===void 0||Ie.removeRoomListener({}),(At=this.authService)===null||At===void 0||At.removeAuthListener({})},qe.setSelectedCameraDevice=function(Ie){var At=this;return this._checkConnectState(),jn({deviceId:{type:"string",allowEmpty:!1}},Ie),this.rtcController.setSelectedCameraDevice(Ie.deviceId).then(function(Dt){return Dt.data},function(Dt){throw At.logger.error("QChatMedia::setSelectedCameraDevice error",Dt),new Ro("QChatMedia::setSelectedCameraDevice error",Dt)})},qe.setSelectedPlayoutDevice=function(Ie){var At=this;return this._checkConnectState(),jn({deviceId:{type:"string",allowEmpty:!1}},Ie),this.rtcController.setSelectedPlayoutDevice(Ie.deviceId).then(function(Dt){return Dt.data},function(Dt){throw At.logger.error("QChatMedia::setSelectedPlayoutDevice error",Dt),new Ro("QChatMedia::setSelectedPlayoutDevice error",Dt)})},qe.setSelectedRecordDevice=function(Ie){var At=this;return this._checkConnectState(),jn({deviceId:{type:"string",allowEmpty:!1}},Ie),this.rtcController.setSelectedRecordDevice(Ie.deviceId).then(function(Dt){return Dt.data},function(Dt){throw At.logger.error("QChatMedia::setSelectedRecordDevice error",Dt),new Ro("QChatMedia::setSelectedRecordDevice error",Dt)})},qe.getRTCMembers=function(){var Ie,At;return this._checkConnectState(),Do(Ie=pi(At=this.roomContext.remoteMembers).call(At,function(Dt){return Dt.isInRtcChannel})).call(Ie,function(Dt){return{accid:Dt.uuid,isAudioOn:!!Dt.isAudioOn,isVideoOn:!!Dt.isVideoOn,isSharingScreen:!!Dt.isSharingScreen,properties:Dt.properties}})},qe.subscribeRemoteVideoSubStream=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),ir.prev=2,(At=this.rtcController)===null||At===void 0||At.subscribeRemoteVideoSubStream(Ie.accid),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoSubStream error",ir.t0),new Ro("QChatMedia::subscribeRemoteVideoSubStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.unsubscribeRemoteVideoSubStream=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ie),ir.prev=2,(At=this.rtcController)===null||At===void 0||At.unsubscribeRemoteVideoSubStream(Ie.accid),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::unsubscribeRemoteVideoSubStream error",ir.t0),new Ro("QChatMedia::unsubscribeRemoteVideoSubStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.muteAllAudio=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ie=this.roomContext)===null||Ie===void 0||Ie.updateRoomProperty("audioOff",Ao({value:ai.offNotAllowSelfOn+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::muteAllAudio error",Pt.t0),new Ro("QChatMedia::muteAllAudio error",Pt.t0);case 15:case"end":return Pt.stop()}},At,this,[[7,11]])}))},qe.muteAllVideo=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ie=this.roomContext)===null||Ie===void 0||Ie.updateRoomProperty("videoOff",Ao({value:ai.offNotAllowSelfOn+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::muteAllVideo error",Pt.t0),new Ro("QChatMedia::muteAllVideo error",Pt.t0);case 15:case"end":return Pt.stop()}},At,this,[[7,11]])}))},qe.unMuteAllAudio=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ie=this.roomContext)===null||Ie===void 0||Ie.updateRoomProperty("audioOff",Ao({value:ai.disable+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::unMuteAllAudio error",Pt.t0),new Ro("QChatMedia::unMuteAllAudio error",Pt.t0);case 15:case"end":return Pt.stop()}},At,this,[[7,11]])}))},qe.unMuteAllVideo=function(){var Ie;return hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ie=this.roomContext)===null||Ie===void 0||Ie.updateRoomProperty("videoOff",Ao({value:ai.disable+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::unMuteAllVideo error",Pt.t0),new Ro("QChatMedia::unMuteAllVideo error",Pt.t0);case 15:case"end":return Pt.stop()}},At,this,[[7,11]])}))},xe}(rd),oM=Mc.findIndex,aM="findIndex",d1=!0;aM in[]&&Array(1).findIndex(function(){d1=!1}),xn({target:"Array",proto:!0,forced:d1},{findIndex:function(xe){return oM(this,xe,arguments.length>1?arguments[1]:void 0)}});var sM=da("Array").findIndex,Dv=Array.prototype,iM=function(pe){var xe=pe.findIndex;return pe===Dv||sr(Dv,pe)&&xe===Dv.findIndex?sM:xe},Fp=["error","warn","log","debug"],Cl=function(){},$p=["off","error","warn","log","debug"],p1=function(){function pe(qe,Oe){this.name=Oe,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=Cl,this.log=Cl,this.warn=Cl,this.error=Cl,this.name=Oe,pe.instancesName.push(Oe),Ti($p).call($p,qe)||(qe="off"),this.setLogFunc(qe)}var xe=pe.prototype;return xe.setLogFunc=function(Oe){var Ie=this,At=iM(Fp).call(Fp,function(Dt){return Dt===Oe});To(Fp).call(Fp,function(Dt,Pt){Pt<=At&&(Ie[Dt]=function(){var ir=qa(Array.prototype).call(arguments),hr=this.formatArgs(ir,Dt);this.strategies[Dt](hr)})})},xe.formatArgs=function(Oe,Ie){var At=new Date,Dt=At.getMonth()+1+"-"+At.getDate()+" "+At.getHours()+":"+At.getMinutes()+":"+At.getSeconds()+":"+At.getMilliseconds();return"[NIM "+Ie+" "+this.name+" "+Dt+"] "+Do(Oe).call(Oe,function(Pt){return Pt instanceof Ro?Pt.name+", "+Pt.code+", "+Pt.message:Pt instanceof Error?Pt&&Pt.message?Pt.message:Pt:typeof Pt=="object"?Ao(Pt):Pt}).join(" ")},xe.destroy=function(){this.debug=Cl,this.log=Cl,this.warn=Cl,this.error=Cl},pe}();p1.instancesName=[];var cM=TypeError,lM=Object.getOwnPropertyDescriptor,uM=ze&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(pe){return pe instanceof TypeError}}()?function(pe,xe){if(rc(pe)&&!lM(pe,"length").writable)throw cM("Cannot set read only .length");return pe.length=xe}:function(pe,xe){return pe.length=xe},dM=nc("splice"),f1=Math.max,m1=Math.min;xn({target:"Array",proto:!0,forced:!dM},{splice:function(xe,qe){var Oe,Ie,At,Dt,Pt,ir,hr=Pn(this),xr=ns(hr),Or=Ri(xe,xr),jr=arguments.length;for(jr===0?Oe=Ie=0:jr===1?(Oe=0,Ie=xr-Or):(Oe=jr-2,Ie=m1(f1(hc(qe),0),xr-Or)),hf(xr+Oe-Ie),At=Ug(hr,Ie),Dt=0;Dt<Ie;Dt++)(Pt=Or+Dt)in hr&&tl(At,Dt,hr[Pt]);if(At.length=Ie,Oe<Ie){for(Dt=Or;Dt<xr-Ie;Dt++)ir=Dt+Oe,(Pt=Dt+Ie)in hr?hr[ir]=hr[Pt]:Mm(hr,ir);for(Dt=xr;Dt>xr-Ie+Oe;Dt--)Mm(hr,Dt-1)}else if(Oe>Ie)for(Dt=xr-Ie;Dt>Or;Dt--)ir=Dt+Oe-1,(Pt=Dt+Ie-1)in hr?hr[ir]=hr[Pt]:Mm(hr,ir);for(Dt=0;Dt<Oe;Dt++)hr[Dt+Or]=arguments[Dt+2];return uM(hr,xr-Ie+Oe),At}});var pM=da("Array").splice,Uv=Array.prototype,g1=function(pe){var xe=pe.splice;return pe===Uv||sr(Uv,pe)&&xe===Uv.splice?pM:xe};function Vv(pe,xe){var qe,Oe=Hs!==void 0&&Tm(pe)||pe["@@iterator"];if(Oe)return oa(qe=(Oe=Oe.call(pe)).next).call(qe,Oe);if(Cs(pe)||(Oe=function(Dt,Pt){var ir;if(Dt){if(typeof Dt=="string")return h1(Dt,Pt);var hr=qa(ir=Object.prototype.toString.call(Dt)).call(ir,8,-1);if(hr==="Object"&&Dt.constructor&&(hr=Dt.constructor.name),hr==="Map"||hr==="Set")return pl(Dt);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return h1(Dt,Pt)}}(pe))||xe&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ie=0;return function(){return Ie>=pe.length?{done:!0}:{done:!1,value:pe[Ie++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h1(pe,xe){(xe==null||xe>pe.length)&&(xe=pe.length);for(var qe=0,Oe=new Array(xe);qe<xe;qe++)Oe[qe]=pe[qe];return Oe}var fM=function(){function pe(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var xe=pe.prototype;return xe.addTimer=function(Oe,Ie,At){Ie===void 0&&(Ie=0),At===void 0&&(At=1);var Dt=new Date().getTime(),Pt=this.id;return this.timerList.push({id:Pt,loop:At,count:0,timeout:Dt+Ie,interval:Ie,callback:Oe}),this.id++,this.checkTimer(Dt),Pt},xe.checkTimer=function(Oe){if(Oe===void 0&&(Oe=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var Ie,At,Dt=0,Pt=Vv(this.timerList);!(Ie=Pt()).done;){var ir=Ie.value;(Dt===0||Dt>ir.timeout)&&(Dt=ir.timeout)}this.timerList.length!==0&&(this.timer===null||Dt<this.timeout||this.timeout<Oe)&&(this.timer=Di(oa(At=this.nowTime).call(At,this),Dt-Oe),this.timeout=Dt)}},xe.nowTime=function(){for(var Oe,Ie=new Date().getTime(),At=Vv(this.timerList);!(Oe=At()).done;){var Dt=Oe.value;Ie>=Dt.timeout&&(Dt.callback(),Dt.count++,Dt.timeout=Ie+Dt.interval)}this.clerTime(),this.checkTimer(Ie)},xe.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},xe.deleteTimer=function(Oe){for(var Ie=this.timerList.length-1;Ie>=0;Ie--){var At;this.timerList[Ie].id===Oe&&g1(At=this.timerList).call(At,Ie,1)}},xe.removeFinished=function(){for(var Oe=this.timerList.length-1;Oe>=0;Oe--){var Ie,At=this.timerList[Oe];At.loop>=0&&At.count>=At.loop&&g1(Ie=this.timerList).call(Ie,Oe,1)}},xe.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},pe}(),v1=function(){function pe(qe){this.core=qe}var xe=pe.prototype;return xe.request=function(Oe,Ie,At){var Dt=this,Pt=new Date().getTime(),ir=(At==null?void 0:At.exception_service)||0;return Qo.request(Oe,Ie).catch(function(hr){var xr,Or,jr=hr;throw Dt.core.reporter.reportTraceStart("exceptions",{user_id:Dt.core.options.account,trace_id:(Or=(xr=Dt.core.clientSocket)===null||xr===void 0?void 0:xr.socket)===null||Or===void 0?void 0:Or.sessionId,start_time:Pt,action:1,exception_service:ir}),Dt.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof jr.code=="number"?jr.code:0,description:jr.message||""+jr.code,operation_type:0,target:Oe,context:Ie?Ao(Ie):""},{asyncParams:Qo.net.getNetworkStatus()}),Dt.core.reporter.reportTraceEnd("exceptions",1),hr})},xe.uploadFile=function(Oe){var Ie=this,At=new Date().getTime();return Qo.uploadFile(Oe).catch(function(Dt){var Pt,ir,hr=Dt;Ie.core.reporter.reportTraceStart("exceptions",{user_id:Ie.core.options.account,trace_id:(ir=(Pt=Ie.core.clientSocket)===null||Pt===void 0?void 0:Pt.socket)===null||ir===void 0?void 0:ir.sessionId,start_time:At,action:1,exception_service:3});var xr=Qo.platform==="BROWSER"?Oe.chunkUploadHost:Oe.commonUploadHost?Oe.commonUploadHost+"/"+(Oe.nosToken&&Oe.nosToken.bucket):"https://nos.netease.com/nim";throw Ie.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof hr.code=="number"?hr.code:0,description:hr.message||""+hr.code,operation_type:1,target:xr},{asyncParams:Qo.net.getNetworkStatus()}),Ie.core.reporter.reportTraceEnd("exceptions",1),Dt})},pe}(),y1="imElite_sdk_abtest_web",b1=function(){function pe(xe,qe){this.abtInfo={},this.core=xe,this.config=qe}return pe.prototype.abtRequest=function(){var qe,Oe;return hn(this,void 0,void 0,Dr.mark(function Ie(){var At;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(this.core.options.isAbtestEnable){Pt.next=2;break}return Pt.abrupt("return");case 2:if(!this.abtInfo.experiments){Pt.next=4;break}return Pt.abrupt("return");case 4:if(this.config.abtestUrl){Pt.next=6;break}return Pt.abrupt("return");case 6:return Pt.prev=6,Pt.next=9,this.core.adapters.request(this.config.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.config.abtestProjectKey,appKey:this.core.options.appkey,osType:"Web",sdkVersion:"0.17.2",deviceId:this.core.config.deviceId},useLocalCache:!0}},{exception_service:7});case 9:At=Pt.sent,Pt.next=15;break;case 12:Pt.prev=12,Pt.t0=Pt.catch(6),this.core.logger.warn("ABTest request failed");case 15:this.abtInfo=((Oe=(qe=At==null?void 0:At.data)===null||qe===void 0?void 0:qe.data)===null||Oe===void 0?void 0:Oe.abtInfo)||{};case 16:case"end":return Pt.stop()}},Ie,this,[[6,12]])}))},pe}(),S1=du;function du(pe){pe=pe||{},this.ms=pe.min||100,this.max=pe.max||1e4,this.factor=pe.factor||2,this.jitter=pe.jitter>0&&pe.jitter<=1?pe.jitter:0,this.attempts=0}du.prototype.duration=function(){var pe=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var xe=Math.random(),qe=Math.floor(xe*this.jitter*pe);pe=1&Math.floor(10*xe)?pe+qe:pe-qe}return 0|Math.min(pe,this.max)},du.prototype.reset=function(){this.attempts=0},du.prototype.setMin=function(pe){this.ms=pe},du.prototype.setMax=function(pe){this.max=pe},du.prototype.setJitter=function(pe){this.jitter=pe};var Ga=function(){},mM=Hu&&1/Mh(new Hu([,-0]))[1]==1/0?function(pe){return new Hu(pe)}:Ga,Ml=mM,Bc=function(xe,qe,Oe){var Ie=-1,At=lp,Dt=xe.length,Pt=!0,ir=[],hr=ir;if(Oe)Pt=!1,At=lm;else if(Dt>=200){var xr=qe?null:Ml(xe);if(xr)return Mh(xr);Pt=!1,At=Ch,hr=new Gf}else hr=qe?[]:ir;e:for(;++Ie<Dt;){var Or=xe[Ie],jr=qe?qe(Or):Or;if(Or=Oe||Or!==0?Or:0,Pt&&jr==jr){for(var Ur=hr.length;Ur--;)if(hr[Ur]===jr)continue e;qe&&hr.push(jr),ir.push(Or)}else At(hr,jr,Oe)||(hr!==ir&&hr.push(jr),ir.push(Or))}return ir},ts,Lc=function(xe){return xe&&xe.length?Bc(xe):[]},qv=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],Hv=["transport not supported","client not handshaken","unauthorized"],zv=["reconnect"],jp=function(pe){function xe(Oe,Ie){var At;return(At=pe.call(this)||this).url=Ie,At.websocket=null,At.socketConnectTimer=0,At.core=Oe,At.url=Ie,At.status="disconnected",At.logger=Oe.logger,At.connect(),At}ra(xe,pe);var qe=xe.prototype;return qe.connect=function(){var Ie=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+_s(),{method:"GET",dataType:"text",timeout:this.core.options.xhrConnectTimeout||8e3},{exception_service:6}).then(function(At){var Dt=At.data.split(":"),Pt=Dt[0],ir=Dt[1];return Ie.sessionId=Pt,Ie.closeTimeout=1e3*ir,Ie._createWebsocket("wss://"+Ie.url+"/socket.io/1/websocket/"+Pt)}).catch(function(At){At=At||{},Ie.logger.error("imsocket::handshake fail. message: ",At&&At.message," err code: ",At&&At.code),At.code=At.code===408?408:415,Ie.status="disconnected",Ie.emit("handshakeFailed",At)})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},qe.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"}))}catch(Ie){this.logger.warn("attempt to send encodePacket error",Ie)}try{this.websocket.close()}catch(Ie){this.logger.warn("attempt to close websocket error",Ie)}this.clean()}},qe.clean=function(){this.status="disconnected",this.websocket&&(this.socketUrl=void 0,this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},qe.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect"),clearTimeout(this.socketConnectTimer)},qe._createWebsocket=function(Ie){var At,Dt=this;this.socketConnectTimer=Di(function(){Dt.logger.error("core:: socket connect timeout. url: ",Dt.socketUrl),Dt.emit("handshakeFailed",new Ro("BaseWebsocket::_createWebSocket socket connect timeout. url: "+Dt.socketUrl,{},408))},this.core.options.socketConnectTimeout||8e3),this.socketUrl=Ie,this.websocket=new Qo.WebSocket(Ie),this.websocket.onmessage=oa(At=this.onMessage).call(At,this),this.websocket.onclose=function(){Dt.logger.log("imsocket:: websocket onclose done"),Dt.clean()},this.websocket.onerror=function(Pt){Dt.logger.error("imsocket:: onerror",Pt),Dt.core.status==="logined"&&Dt.core.clientSocket.ping()}},qe.onMessage=function(Ie){var At;this.resetCloseTimer();var Dt=this.decodePacket(Ie.data);if(Dt)switch(Dt.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",Dt.data);break;case"event":Dt.name&&this.emit(Dt.name,Dt.args);break;case"error":Dt.reason==="unauthorized"?this.emit("connect_failed",Dt.reason):this.emit("error",Dt.reason),this.logger.error("core:: socket onmessage type error. url: ",this.socketUrl),clearTimeout(this.socketConnectTimer),this.emit("handshakeFailed",new Ro("BaseWebsocket::onMessage socket error. url: "+this.socketUrl,{},415));break;case"heartbeat":(At=this.websocket)===null||At===void 0||At.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",Dt.type)}},qe.encodePacket=function(Ie){var At,Dt,Pt=Ie.type,ir=Ie.id,hr=ir===void 0?"":ir,xr=Ie.endpoint,Or=xr===void 0?"":xr,jr=Ie.ack,Ur=null;if(!Pt)return"";switch(Pt){case"error":At=Ie.reason?ea(Hv).call(Hv,Ie.reason):"",Dt=Ie.advice?ea(zv).call(zv,Ie.advice):"",At===""&&Dt===""||(Ur=At+(Dt!==""?"+"+Dt:""));break;case"message":Ie.data!==""&&(Ur=Ie.data);break;case"event":At={name:Ie.name},At=Ie.args&&Ie.args.length?{name:Ie.name,args:Ie.args}:{name:Ie.name},Ur=Ao(At);break;case"json":Ur=Ao(Ie.data);break;case"connect":Ie.qs&&(Ur=Ie.qs);break;case"ack":Ur=Ie.ackId+(Ie.args&&Ie.args.length?"+"+Ao(Ie.args):"")}var Yr=[ea(qv).call(qv,Pt),hr+(jr==="data"?"+":""),Or];return Ur!=null&&Yr.push(Ur),Yr.join(":")},qe.decodePacket=function(Ie){if(Ie)if(Ie.charAt(0)!="�"){var At=Ie.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(At){var Dt,Pt=At[1],ir=At[2],hr=At[3],xr=At[4],Or=At[5],jr={type:qv[+Pt],endpoint:xr};switch(ir&&(jr.id=ir,jr.ack=!hr||"data"),jr.type){case"error":Dt=Or.split("+"),jr.reason=Hv[+Dt[0]]||"";break;case"message":jr.data=Or||"";break;case"connect":jr.qs=Or||"";break;case"event":try{var Ur=JSON.parse(Or);jr.name=Ur.name,jr.args=Ur.args}catch(Yr){this.logger.error("imsocket::parseData::type::event error",Yr)}jr.args=jr.args||[];break;case"json":try{jr.data=JSON.parse(Or)}catch(Yr){this.logger.error("imsocket::parseData::type::json error",Yr)}break;case"ack":if((Dt=Or.match(/^([0-9]+)(\+)?(.*)/))&&(jr.ackId=Dt[1],jr.args=[],Dt[3]))try{jr.args=Dt[3]?JSON.parse(Dt[3]):[]}catch(Yr){this.logger.error("imsocket::parseData::type::ack error",Yr)}}return jr}}else this.logger.error("imsocket::unrecognize dataStr",qa(Ie).call(Ie,0,20))},qe.send=function(Ie){var At,Dt={data:Ie,type:"message",endpoint:""};(At=this.websocket)===null||At===void 0||At.send(this.encodePacket(Dt))},qe.resetCloseTimer=function(){var Ie=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=Di(function(){Ie.close()},this.closeTimeout))},xe}(Hg);(function(pe){pe[pe.ACTIVE=1]="ACTIVE",pe[pe.KICKED=2]="KICKED",pe[pe.OFFLINE=3]="OFFLINE"})(ts||(ts={}));var gM=function(){function pe(qe){this.linkUrls=[],this.isAutoReconnect=!1,this.packetTimeout=3e4,this.packetSer=1,this.retryCount=0,this.reconnectTimer=0,this.backoff=new S1({max:8e3,min:1600,jitter:.01}),this.sendingCmdMap=new Zu,this.pingTimer=0,this.hasNetworkListener=!1,this.core=qe,this.logger=qe.logger,this.reporter=qe.reporter,this.timerManager=qe.timerManager}var xe=pe.prototype;return xe.connect=function(Oe,Ie){return Oe===void 0&&(Oe={}),hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt,ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(jn({linkUrls:{type:"array",itemType:"string",required:!1}},Oe),/^(unconnected|waitReconnect)$/.test(this.core.status)){Ur.next=5;break}return Dt="Core socket status is "+this.core.status+", and would not connect",this.logger.warn(Dt),Ur.abrupt("return",ca.reject(Dt));case 5:this.core.status="connecting",Oe.linkUrls&&Oe.linkUrls.length>0&&(this.linkUrls=qs(Pt=Oe.linkUrls).call(Pt,this.linkUrls),this.linkUrls=Lc(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push("weblink.netease.im:443"),ir=0;case 9:if(!(ir<this.linkUrls.length)){Ur.next=31;break}return hr=this.linkUrls[ir],xr=new Date().getTime(),Ur.prev=12,Ur.next=15,this.doConnect(hr);case 15:return this.core.status="connected",this.logger.log("core:: connect success with url: "+hr),Ur.abrupt("return",hr);case 20:Ur.prev=20,Ur.t0=Ur.catch(12),Or=Ur.t0,Ie&&Ie(Or,hr),this.reporter.reportTraceStart("exceptions",{user_id:this.core.options.account,start_time:xr,action:0,exception_service:6}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Or.code=="number"?Or.code:0,description:Or.message||""+Or.code,operation_type:0,target:hr},{asyncParams:Qo.net.getNetworkStatus()}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+hr,Ur.t0);case 28:ir++,Ur.next=9;break;case 31:throw this.retryCount===0?this.doDisconnect(ts.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(ts.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket xhr or socket connect failed");case 33:case"end":return Ur.stop()}},At,this,[[12,20]])}))},xe.doConnect=function(Oe){var Ie=this,At=!1;return new ca(function(Dt,Pt){var ir;Ie.socket=new jp(Ie.core,Oe),Ie.socket.on("connect",function(){Ie.logger.log("socket on connect",Oe),At=!0,Dt()}),Ie.socket.on("message",oa(ir=Ie.onMessage).call(ir,Ie)),Ie.socket.on("disconnect",function(hr){Ie.logger.log("core:: socket on disconnect",hr),At=!0,Ie.doDisconnect(ts.OFFLINE,"SocketOnDisconnect")}),Ie.socket.on("handshakeFailed",function(hr){At?Ie.ping():(Ie.logger.error("core:: handshake failed. ",hr&&hr.message),Ie.cleanSocket()),At=!0,Pt(hr)})})},xe.cleanSocket=function(){this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0)},xe.beforeConnect=function(){this.reconnectTimer&&clearTimeout(this.reconnectTimer)},xe.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},xe.doDisconnect=function(Oe,Ie){if(this.logger.log("doDisconnect: type "+Oe+", description "+Ie),this.core.status!=="unconnected"){var At={1:"close",2:"kicked",3:"broken"}[Oe]||"";this.markAllCmdInvaild(new Ro("Packet timeout due to instance disconnect",{disconnect_reason:At},415)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.cleanSocket();var Dt=!this.core.options.needReconnect||this.retryCount>=this.core.options.reconnectionAttempts;if(Oe===ts.ACTIVE||Dt)this.logger.log("doDisconnect: emit disconnect, type "+Oe,Dt),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"),this.destroyOnlineListener();else if(Oe===ts.KICKED){this.logger.log("doDisconnect: kicked"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var Pt=typeof Ie=="string"?{reason:"unknow",message:Ie}:Ie;this.core.eventBus.emit("kicked",Pt),this.core.emit("kicked",Pt),this.destroyOnlineListener()}else Oe===ts.OFFLINE&&this.core.auth.isManualLoginAttempt?(this.logger.log("doDisconnect: offline in manual login phase. no reconnect"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.destroyOnlineListener()):Oe===ts.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},xe.attempToReconnect=function(){var Oe=this;if(this.core.status!=="waitReconnect"){this.retryCount===0&&(this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"));var Ie=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+Ie),this.core.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:Ie}),this.core.emit("willReconnect",{retryCount:this.retryCount,duration:Ie}),this.core.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=Di(function(){return hn(Oe,void 0,void 0,Dr.mark(function At(){var Dt=this;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(this.core.status==="waitReconnect"){ir.next=3;break}return this.logger.warn("doDisconnect: reconnectTimer status is "+this.core.status+", would not go on reconnecting"),ir.abrupt("return");case 3:return ir.next=5,Qo.net.getNetworkStatus();case 5:ir.sent.net_connect===!1?(this.logger.log("doDisconnect: skip this reconnection attempt because network is offline"),this.core.status="connecting",this.retryCount>=this.core.options.reconnectionAttempts?this.doDisconnect(ts.OFFLINE,"MaxReconnectionAttemptExceed"):this.attempToReconnect()):this.core.auth.login({isAutoReconnect:!0}).catch(function(){Dt.logger.error("core::attempToReconnect failed "+Dt.retryCount)});case 7:case"end":return ir.stop()}},At,this)}))},Ie)}else this.logger.warn("doDisconnect: already is waiting reconnect")},xe.sendCmd=function(Oe,Ie,At){var Dt=this;if(this.core.status!=="logined"&&Oe!=="login"&&Oe!=="chatroomLogin"&&Oe!=="qchatLogin")return this.logger.warn("instance status is "+this.core.status+", so can not sendCmd "+Oe),ca.reject({cmd:Oe,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return ca.reject("No_socket");var Pt=Oe!=="heartbeat",ir=Pt?this.packetSer++:0,hr=function(Dn,zn,Jn,$n){var vo=bm[Dn];if(!vo)return Jn.error("createCmd:: can not find cmd config: ",Dn),null;var Fo,qo={SER:zn,SID:vo.sid,CID:vo.cid,Q:[]};return vo.params&&$n&&To(Fo=vo.params).call(Fo,function(Bn){var zr=$n[Bn.name];if(!I0(zr)){var Zn=Bn.type,eo=Bn.reflectMapper;switch(Bn.type){case"PropertyArray":Zn="ArrayMable",zr=Do(zr).call(zr,function(qn){return{t:"Property",v:eo?E0(qn,eo):qn}});break;case"Property":zr=eo?E0(zr,eo):zr;break;case"Bool":case"bool":zr=zr?"true":"false"}qo.Q.push({t:Zn,v:zr})}}),{packet:qo,hasPacketResponse:typeof vo.hasPacketResponse!="boolean"||vo.hasPacketResponse,hasPacketTimer:typeof vo.hasPacketTimer!="boolean"||vo.hasPacketTimer}}(Oe,ir,this.logger,Ie);if(!hr){var xr="SendCmd "+ir+" "+Oe+" error";return this.logger.error(xr),ca.reject(xr)}var Or=hr.packet,jr=hr.hasPacketResponse,Ur=hr.hasPacketTimer,Yr=Ao(Or);Pt&&(this.core.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",Oe,"ser:"+ir,Yr):this.logger.log("core::sendCmd",Oe,"ser:"+ir));var _n=new Date().getTime();return new ca(function(Tn,Dn){jr&&Dt.sendingCmdMap.set(ir,{cmd:Oe,params:Ie,callback:[Tn,Dn],timer:Ur?Di(function(){var Jn=new ll(408,Oe,"Packet Timeout",new Date().getTime(),{message:"ser "+ir+" cmd "+Oe+" timeout"});Jn.callFunc="sendCmd",Dt.markCmdInvalid(ir,Jn,Oe)},At&&At.timeout?At.timeout:Dt.core.config.timeout):null});try{Dt.socket.send(Yr),jr||Tn(Or)}catch(Jn){var zn=new ll(415,Oe,Jn&&Jn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Jn});zn.callFunc="sendCmd",Dt.markCmdInvalid(ir,zn,Oe),Dn(Jn)}}).catch(function(Tn){var Dn,zn=[408,415];if(!Ti(zn).call(zn,Tn.code))return ca.reject(Tn);Dt.reporter.reportTraceStart("exceptions",{user_id:Dt.core.options.account,trace_id:(Dn=Dt.socket)===null||Dn===void 0?void 0:Dn.sessionId,start_time:_n,action:2,exception_service:6});var Jn=ds(Tn,"data.disconnect_reason")||"",$n=Tn.code===408?"Send failed due to timeout":"Send failed. Reason unknown";return $n=Tn.code===415?Ao({disconnect_reason:Jn}):$n,Dt.reporter.reportTraceUpdateV2("exceptions",{code:Tn.code||415,description:$n,operation_type:1,target:Or.SID+"-"+Or.CID,context:""+Or.SER},{asyncParams:Qo.net.getNetworkStatus()}),Dt.reporter.reportTraceEnd("exceptions",1),ca.reject(Tn)})},xe.onMessage=function(Oe){var Ie=fv(Oe,this.logger);if(Ie){var At=Ie.raw.ser;Ie.error&&this.logger.error("core:onMessage packet error",Ie.raw.sid+"_"+Ie.raw.cid+", ser:"+At+",",Ie.error),Ie.notFound?this.logger.warn("core::onMessage packet not found",Ie.raw.sid+"_"+Ie.raw.cid+", ser:"+At):(Ie.cmd!=="heartbeat"&&(this.core.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+At,Ie.cmd,Ie.content):this.logger.log("imsocket::recvCmd ser:"+At,Ie.cmd)),Ie.__receiveTime=_s(),this.packetHandler(Ie))}},xe.packetHandler=function(Oe){var Ie,At;if(Oe){var Dt=Oe.raw.ser,Pt=this.sendingCmdMap.get(Dt);if(Pt&&Pt.cmd===Oe.cmd){var ir=Pt.callback,hr=Pt.timer,xr=Pt.params;if(clearTimeout(hr),Oe.params=xr,this.sendingCmdMap.delete(Dt),Oe.cmd==="heartbeat")return void ir[0]();var Or=(Ie=this.core[Oe.service])===null||Ie===void 0?void 0:Ie.process(Oe);Or&&typeof Or.then=="function"?Or.then(function(jr){ir[0](jr)}).catch(function(jr){ir[1](jr)}):(this.logger.log("imsocket:: handlerFn without promise",Oe.service,Oe.cmd),ir[0]())}else(At=this.core[Oe.service])===null||At===void 0||At.process(Oe)}},xe.markCmdInvalid=function(Oe,Ie,At){var Dt=this.sendingCmdMap.get(Oe);if(Dt){var Pt=Dt.callback,ir=Dt.timer;ir&&clearTimeout(ir),this.sendingCmdMap.delete(Oe),this.logger.warn("packet "+Oe+", "+At+" is invalid:",Ie),Pt[1](Ie)}},xe.markAllCmdInvaild=function(Oe){var Ie,At=this;this.logger.log("markAllCmdInvaild",Oe),To(Ie=this.sendingCmdMap).call(Ie,function(Dt){var Pt=Dt.callback,ir=Dt.timer,hr=Dt.cmd;At.logger.debug('markAllCmdInvaild:: cmd "'+hr+'"'),ir&&clearTimeout(ir),Pt[1](Oe)}),this.sendingCmdMap.clear()},xe.ping=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){var Ie=this;return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return clearTimeout(this.pingTimer),Dt.prev=1,Dt.next=4,this.sendCmd("heartbeat");case 4:Dt.next=14;break;case 6:return Dt.prev=6,Dt.t0=Dt.catch(1),Dt.next=10,this.testHeartBeat5Timeout();case 10:if(!Dt.sent){Dt.next=14;break}return this.doDisconnect(ts.OFFLINE,"PingError"),Dt.abrupt("return");case 14:this.pingTimer=Di(function(){Ie.ping()},3e4);case 15:case"end":return Dt.stop()}},Oe,this,[[1,6]])}))},xe.testHeartBeat5Timeout=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){var Ie;return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:clearTimeout(this.pingTimer),Ie=0;case 2:if(!(Ie<5)){Dt.next=15;break}return Dt.prev=3,Dt.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return Dt.abrupt("return",!1);case 9:Dt.prev=9,Dt.t0=Dt.catch(3),this.logger.debug("core:: test heartbeat "+Ie+" Timeout");case 12:Ie++,Dt.next=2;break;case 15:return Dt.abrupt("return",!0);case 16:case"end":return Dt.stop()}},Oe,this,[[3,9]])}))},xe.initOnlineListener=function(){var Oe=this;this.hasNetworkListener||(this.logger.log("core::onlineListener:init"),this.hasNetworkListener=!0,Qo.net.onNetworkStatusChange(function(Ie){Oe.logger.log("core::onlineListener:network change",Ie),Ie.isConnected&&Oe.core.status==="logined"?Oe.ping():Ie.isConnected&&Oe.core.status==="waitReconnect"?(Oe.reconnectTimer&&clearTimeout(Oe.reconnectTimer),Oe.core.auth.login({isAutoReconnect:!0}).catch(function(){Oe.logger.error("core::attempToReconnect failed "+Oe.retryCount)})):Ie.isConnected||Oe.doDisconnect(ts.OFFLINE,"OfflineListener")}))},xe.destroyOnlineListener=function(){this.logger.log("core::onlineListener:destroy"),Qo.net.offNetworkStatusChange(),this.hasNetworkListener=!1},xe.disconnect=function(){switch(this.core.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(ts.ACTIVE,"UserActiveDisconnect"),ca.resolve();case"unconnected":case"destroyed":return ca.resolve()}},pe}(),hM={"1_2":"heartbeat","24_2":"qchatLogin","24_4":"qchatExit","24_5":"qchatBeKicked","24_8":"qchatMultiSpotLogin","24_9":"qchatKick","24_19":"qchatSync"},Dp={qchatLoginTag:{appkey:1,account:2,authType:3,token:4,loginExt:5,clientType:6,clientSession:7,deviceId:8,sdkVersion:9,sdkType:10,userAgent:11,customTag:12,customClientType:13,sdkHumanVersion:14,pushTokenName:20,pushToken:21,pushkitTokenName:22,pushkitToken:23,deviceInfo:24,customPushContentType:25,os:30,mac:31,bundleId:32,simCarrierCode:33,simCountryCode:34,networkCode:35,browser:36,deviceModel:37,androidid:38,imei:39,idfv:40,openuuid:41,pushType:100,hasTokenPreviously:101,consid:102,clientIP:103,clientPort:104,loginTime:105}},pu=Wi(Dp),vM={heartbeat:{sid:1,cid:2,service:"qchatAuth"},qchatLogin:{sid:24,cid:2,service:"qchatAuth",params:[{type:"Property",name:"qchatLoginReqTag",reflectMapper:Dp.qchatLoginTag}],response:[{type:"Property",name:"qchatLoginResTag",reflectMapper:pu.qchatLoginTag},{type:"PropertyArray",name:"qchatMultiLoginResult",reflectMapper:pu.qchatLoginTag}]},qchatExit:{sid:24,cid:4,service:"qchatAuth"},qchatBeKicked:{sid:24,cid:5,service:"qchatAuth",response:[{type:"Property",name:"beKickedTag",reflectMapper:{1:"clientType",2:"reason",3:"ext",4:"customClientType"}}]},qchatMultiSpotLogin:{sid:24,cid:8,service:"qchatAuth",response:[{type:"Number",name:"state"},{type:"Property",name:"qchatLoginResTag",reflectMapper:pu.qchatLoginTag}]},qchatKick:{sid:24,cid:9,service:"qchatAuth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]},qchatSync:{sid:24,cid:19,service:"qchatAuth",hasPacketTimer:!1,params:[{type:"Property",name:"qchatSyncTag",reflectMapper:{systemNotification:1,pushConfig:2}}],response:[{type:"Number",name:"timetag"}]}};function Wv(pe,xe){xe===void 0&&(xe=1);var qe=Wa({clientPort:{type:"number"},clientType:{type:"enum",values:Rc},customClientType:{type:"number"},loginTime:{type:"number"},hasTokenPreviously:{type:"boolean"},pushType:{type:"number"}},pe);return Hn(Hn({},qe),{account:qe.account,connectionId:qe.connectionId,deviceId:qe.deviceId,ip:qe.ip,mac:qe.ip,os:qe.os,clientType:qe.clientType,time:qe.time,online:xe!==2})}var Gv={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},yM={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},bM=function(){function pe(xe){this.core=xe}return pe.prototype.verifyAuthentication=function(qe){var Oe;return qe===void 0&&(qe=!1),hn(this,void 0,void 0,Dr.mark(function Ie(){var At,Dt,Pt,ir,hr,xr,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return At=this.core.options,Dt=Qo.getSystemInfo(),Pt=Hn(Hn({},At),{appLogin:qe?0:1,clientType:16,clientSession:(Oe=this.core.clientSocket.socket)===null||Oe===void 0?void 0:Oe.sessionId,deviceId:this.core.config.deviceId,sdkVersion:91402,sdkType:yM[Qo.platform]||0,userAgent:"Native/0.17.2",sdkHumanVersion:"0.17.2",os:Dt.os,browser:Dt.browser}),Ur.next=5,this.core.sendCmd("qchatLogin",{qchatLoginReqTag:Pt});case 5:if(!(ir=Ur.sent).error){Ur.next=8;break}throw ir.error;case 8:return hr=ir.content,xr=hr.qchatLoginResTag,Or=hr.qchatMultiLoginResult,xr.isAutoReconnect=qe,Ur.abrupt("return",{loginResult:Wv(xr),multiLoginResults:Do(Or).call(Or,function(Yr){return Wv(Yr)})});case 11:case"end":return Ur.stop()}},Ie,this)}))},pe}(),Kv=function(pe){function xe(Oe){var Ie;return(Ie=pe.call(this,"qchatAuth",Oe)||this).account="",Ie.token="",Ie.deviceId="",Ie.isManualLoginAttempt=!1,ou({cmdMap:hM,cmdConfig:vM}),Ie.authenticatorService=new bM(Oe),Ie}ra(xe,pe);var qe=xe.prototype;return qe.login=function(Ie){return Ie===void 0&&(Ie={}),hn(this,void 0,void 0,Dr.mark(function At(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Ie.isAutoReconnect||(this.isManualLoginAttempt=!0),Pt.next=3,this._connect(Ie);case 3:return this.core.abtest.abtRequest(),Pt.prev=4,Pt.next=7,this.doLogin(Ie.isAutoReconnect);case 7:this.isManualLoginAttempt=!1,Pt.next=14;break;case 10:throw Pt.prev=10,Pt.t0=Pt.catch(4),this.isManualLoginAttempt=!1,Pt.t0;case 14:case"end":return Pt.stop()}},At,this,[[4,10]])}))},qe._connect=function(Ie){return Ie===void 0&&(Ie={}),hn(this,void 0,void 0,Dr.mark(function At(){var Dt,Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.core.status)){hr.next=4;break}return Dt="Instance status is "+this.core.status+", and would not connect",this.logger.warn(Dt),hr.abrupt("return",ca.reject(Dt));case 4:return this.core.clientSocket.beforeConnect(),Pt=Ie.isAutoReconnect||!1,hr.next=8,this.core.clientSocket.connect({linkUrls:this.core.options.linkAddresses,isAutoReconnect:Pt});case 8:case"end":return hr.stop()}},At,this)}))},qe.doLogin=function(Ie){return Ie===void 0&&(Ie=!1),hn(this,void 0,void 0,Dr.mark(function At(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.prev=0,ir.next=3,this.authenticatorService.verifyAuthentication(Ie);case 3:Dt=ir.sent,this.core.status="logined",ir.next=14;break;case 7:if(ir.prev=7,ir.t0=ir.catch(0),this.core.logger.warn("doLogin:: login failed",ir.t0),this.core.clientSocket.doDisconnect(ts.OFFLINE,this.isManualLoginAttempt?"FailedToInitializeLogin":"ReconnectLoginFailed"),!this.isManualLoginAttempt){ir.next=13;break}throw ir.t0;case 13:return ir.abrupt("return");case 14:return ir.prev=14,ir.next=17,this.core.cloudStorage.init();case 17:ir.next=22;break;case 19:ir.prev=19,ir.t1=ir.catch(14),this.core.logger.error("doLogin:: cloudStorage init failed ",ir.t1);case 22:return this.core.eventBus.emit("logined",Dt.loginResult),this.core.emit("logined",Dt.loginResult),Dt.multiLoginResults&&Dt.multiLoginResults.length>0&&this.core.emit("multiSpotLogin",Dt.multiLoginResults),this.core.logger.log("login done"),this.core.clientSocket.resetConnectStatus(),ir.next=29,this.sync();case 29:this.core.clientSocket.ping();case 30:case"end":return ir.stop()}},At,this,[[0,7],[14,19]])}))},qe.sync=function(){return hn(this,void 0,void 0,Dr.mark(function Ie(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,this.core.sendCmd("qchatSync",{qchatSyncTag:{systemNotification:this.syncTimeTag||0}});case 2:case"end":return Dt.stop()}},Ie,this)}))},qe.kick=function(Ie){var At;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt;return Dr.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,this.core.sendCmd("qchatKick",Ie);case 2:return Pt=hr.sent,hr.abrupt("return",(At=Pt.content)===null||At===void 0?void 0:At.deviceIds);case 4:case"end":return hr.stop()}},Dt,this)}))},qe.qchatSyncHandler=function(Ie){var At,Dt;this.logger.log("sync: emit syncdone",(At=Ie.content)===null||At===void 0?void 0:At.timetag),this.core.emit("syncdone"),this.syncTimeTag=((Dt=Ie.content)===null||Dt===void 0?void 0:Dt.timetag)||0},qe.qchatMultiSpotLoginHandler=function(Ie){if(Ie.error)this.logger.error("qchatMultiPortLoginHandler:: error, ",Ie.error);else{var At=Ie.content,Dt=Wv(At.qchatLoginResTag,At.state);this.core.emit("multiSpotLogin",[Dt])}},qe.qchatBeKickedHandler=function(Ie){if(Ie.error)this.logger.error("qchatBeKickedHandler error, ",Ie.error);else{var At=function(Pt){var ir=Wa({clientType:{type:"enum",values:Rc},customClientType:{type:"number"}},Pt),hr=Gv[ir.reason];return Hn(ir,hr=hr||{reason:"unknow",message:"Unknown reason"})}(Ie.content.beKickedTag);this.logger.warn("bekicked::",At),this.core.clientSocket.doDisconnect(ts.KICKED,At)}},xe}(rd),$m={debugLevel:"off",needReconnect:!0,reconnectionAttempts:9007199254740991,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:y1},jm=function(pe){function xe(Oe,Ie){var At,Dt,Pt,ir;Ie===void 0&&(Ie={cloudStorageConfig:{}}),(At=pe.call(this)||this).instanceName="QChat",At.status="unconnected",At.account="",At.eventBus=new Hg,At.options={},At.qchatServer={},At.qchatChannel={},At.qchatMsg={},At.qchatRole={},At.qchatMedia={},At.cloudStorage={},At.logger=new p1(Oe.debugLevel,Oe.account),At.setInitOptions(Oe),At.otherOptions=Ie,At.timerManager=new fM,At.adapters=new v1(k(At)),At.abtest=new b1(k(At),{isAbtestEnable:At.options.isAbtestEnable,abtestUrl:At.options.abtestUrl,abtestProjectKey:y1});var hr=Qo.localStorage.getItem("__NIM_DEVC_ID__");At.options.isFixedDeviceId?(hr=Qo.localStorage.getItem("__NIM_DEVC_ID__")||Cv(),Qo.localStorage.setItem("__NIM_DEVC_ID__",hr)):hr=Cv(),At.config={timeout:8e3,deviceId:hr};var xr=Qo.getSystemInfo(),Or=(Dt=Ie==null?void 0:Ie.reportConfig)===null||Dt===void 0?void 0:Dt.isDataReportEnable;return typeof Or!="boolean"&&(Or=!0),At.reporter=new lb({reportConfigUrl:((Pt=Ie==null?void 0:Ie.reportConfig)===null||Pt===void 0?void 0:Pt.reportConfigUrl)||"https://statistic.live.126.net/dispatcher/req",reportUrl:((ir=Ie==null?void 0:Ie.reportConfig)===null||ir===void 0?void 0:ir.reportUrl)||"https://statistic.live.126.net/statics/report/common/form",isDataReportEnable:Or,common:{app_key:Oe.appkey,dev_id:"",platform:"Web",sdk_ver:"0.17.2",env:"online",os_name:xr.os,os_ver:xr.osVer,model:xr.hostEnvVer,manufactor:xr.hostEnv,host_env:xr.hostEnv,host_env_ver:xr.hostEnvVer},request:Qo.request,logger:At.logger,autoStart:!0}),Qo.setLogger(At.logger),At.qchatAuth=new Kv(k(At)),At.auth=At.qchatAuth,At.clientSocket=new gM(k(At)),At.qchatServer=new bl(k(At)),At.qchatChannel=new UC(k(At)),At.qchatMsg=new Lm(k(At)),At.qchatRole=new t1(k(At)),At.qchatMedia=new u1(k(At)),At.cloudStorage=new Sm(k(At),Hn({storageKeyPrefix:At.instanceName},Ie.cloudStorageConfig)),Ie&&At.setOtherOptions(Ie),xe.instance=k(At),At.logger.log("QChat init, version ","0.17.2"," sdk version ",91402," appkey ",Oe.appkey),At}ra(xe,pe),xe.getInstance=function(Ie,At){if(!xe.instance){if(Ie)return new xe(Ie,At);throw new Error("Instance not exist, please input options")}if(Ie){if(xe.instance.options.account===Ie.account&&xe.instance.options.appkey===Ie.appkey)return xe.instance.setOptions(Ie),At&&xe.instance.setOtherOptions(At),xe.instance;throw new Error("Unexpected login")}return xe.instance};var qe=xe.prototype;return qe.connect=function(Ie){return Ie===void 0&&(Ie={}),this.auth.login(Ie)},qe.login=function(Ie){return Ie===void 0&&(Ie={}),this.auth.login(Ie)},qe.setInitOptions=function(Ie){jn({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},linkAddresses:{type:"array",itemType:"string",min:1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:$p,required:!1}},Ie),this.logger.log("QChat::setInitOptions options is",Ie),this.account=Ie.account,this.options=Hn(Hn({},$m),Ie)},qe.setOptions=function(Ie){if(typeof Ie=="object"&&Ie!==null&&(Object.prototype.hasOwnProperty.call(Ie,"account")&&Ie.account!==this.options.account||Object.prototype.hasOwnProperty.call(Ie,"appkey")&&Ie.appkey!==this.options.appkey))throw new Error("QChat::setOptions account and appkey is not allowed to reset");jn({token:{type:"string",required:!1},linkAddresses:{type:"array",itemType:"string",min:1,required:!1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:$p,required:!1}},Ie),this.logger.log("QChat::setOptions options is",Ie),this.options=Hn(Hn({},this.options),Ie)},qe.setOtherOptions=function(Ie){var At;!((At=Ie==null?void 0:Ie.QChatMedia)===null||At===void 0)&&At.neroom&&this.qchatMedia.setNeroom(Ie.QChatMedia.neroom)},qe.disconnect=function(){var Ie=this;switch(this.status){case"logined":return this.sendCmd("qchatExit",void 0,{timeout:1e3}).then(function(){Ie.clientSocket.doDisconnect(ts.ACTIVE,"UserActiveDisconnect")}).catch(function(At){Ie.logger.error("Instance::disconnect sendCmd:logout error",At),Ie.clientSocket.doDisconnect(ts.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return this.clientSocket.doDisconnect(ts.ACTIVE,"UserActiveDisconnect"),ca.resolve();case"unconnected":case"destroyed":return ca.resolve()}},qe.logout=function(){return this.disconnect()},qe.destroy=function(){var Ie=this;return xe.instance=null,this.disconnect().then(function(){Ie.status="destroyed",Ie.removeAllListeners(),Ie.eventBus.removeAllListeners(),Ie.logger.destroy(),Ie.reporter.destroy(),Ie.timerManager.destroy(),Ie.connect=bp,Ie.disconnect=bp,Ie.destroy=bp})},qe.kickOtherClients=function(Ie){return jn({deviceIds:{type:"array",itemType:"string"}},Ie),this.auth.kick(Ie)},qe.sendCmd=function(Ie,At,Dt){return this.clientSocket.sendCmd(Ie,At,Dt)},qe.emit=function(Ie){var At=this;try{for(var Dt,Pt,ir=_s(),hr=arguments.length,xr=new Array(hr>1?hr-1:0),Or=1;Or<hr;Or++)xr[Or-1]=arguments[Or];var jr=(Dt=pe.prototype.emit).call.apply(Dt,qs(Pt=[this,Ie]).call(Pt,xr)),Ur=_s()-ir;return Ur>=10&&this.logger.warn("Core::emit event: "+Ie+" process takes: "+Ur+"ms"),jr}catch(Yr){return this.logger.error("Core::emit event: "+Ie+". Error: "+Yr),Di(function(){throw At.logger.error("Core::emit throw error in setTimeout. event: "+Ie+". Error: "+Yr),Yr},0),!1}},xe}(Hg);jm.instance=null,jm.setAdapters=function(xe){cC(Qo,xe)};var SM=Math.min,Qv=[].lastIndexOf,T1=!!Qv&&1/[1].lastIndexOf(1,-0)<0,Jv=Ul("lastIndexOf"),C1=T1||!Jv?function(xe){if(T1)return ue(Qv,this,arguments)||0;var qe=wr(this),Oe=ns(qe),Ie=Oe-1;for(arguments.length>1&&(Ie=SM(Ie,hc(arguments[1]))),Ie<0&&(Ie=Oe+Ie);Ie>=0;Ie--)if(Ie in qe&&qe[Ie]===xe)return Ie||0;return-1}:Qv;xn({target:"Array",proto:!0,forced:C1!==[].lastIndexOf},{lastIndexOf:C1});var fu=da("Array").lastIndexOf,mu=Array.prototype,M1=function(pe){var xe=pe.lastIndexOf;return pe===mu||sr(mu,pe)&&xe===mu.lastIndexOf?fu:xe},dd=g(function(pe,xe){(function(){var qe={function:!0,object:!0}[typeof window]&&window||this,Oe=xe,Ie=pe&&!pe.nodeType&&pe,At=Oe&&Ie&&typeof e=="object"&&e;!At||At.global!==At&&At.window!==At&&At.self!==At||(qe=At);var Dt=Math.pow(2,53)-1,Pt=/\bOpera/,ir=Object.prototype,hr=ir.hasOwnProperty,xr=ir.toString;function Or(Jn){return(Jn=String(Jn)).charAt(0).toUpperCase()+Jn.slice(1)}function jr(Jn){return Jn=Dn(Jn),/^(?:webOS|i(?:OS|P))/.test(Jn)?Jn:Or(Jn)}function Ur(Jn,$n){for(var vo in Jn)hr.call(Jn,vo)&&$n(Jn[vo],vo,Jn)}function Yr(Jn){return Jn==null?Or(Jn):xr.call(Jn).slice(8,-1)}function _n(Jn){return String(Jn).replace(/([ -])(?!$)/g,"$1?")}function Tn(Jn,$n){var vo=null;return function(qo,Bn){var zr=-1,Zn=qo?qo.length:0;if(typeof Zn=="number"&&Zn>-1&&Zn<=Dt)for(;++zr<Zn;)Bn(qo[zr],zr,qo);else Ur(qo,Bn)}(Jn,function(Fo,qo){vo=$n(vo,Fo,qo,Jn)}),vo}function Dn(Jn){return String(Jn).replace(/^ +| +$/g,"")}var zn=function Jn($n){var vo=qe,Fo=$n&&typeof $n=="object"&&Yr($n)!="String";Fo&&(vo=$n,$n=null);var qo=vo.navigator||{},Bn=qo.userAgent||"";$n||($n=Bn);var zr,Zn,eo=Fo?!!qo.likeChrome:/\bChrome\b/.test($n)&&!/internal|\n/i.test(xr.toString()),qn="Object",Nn=Fo?qn:"ScriptBridgingProxyObject",no=Fo?qn:"Environment",fo=Fo&&vo.java?"JavaPackage":Yr(vo.java),ko=Fo?qn:"RuntimeObject",_o=/\bJava/.test(fo)&&vo.java,la=_o&&Yr(vo.environment)==no,Go=_o?"a":"α",is=_o?"b":"β",Uo=vo.document||{},Wo=vo.operamini||vo.opera,xa=Pt.test(xa=Fo&&Wo?Wo["[[Class]]"]:Yr(Wo))?xa:Wo=null,Ki=$n,Jo=[],Ai=null,fs=$n==Bn,Po=fs&&Wo&&typeof Wo.version=="function"&&Wo.version(),Ia=function(Xa){return Tn(Xa,function(Fa,Ka){return Fa||RegExp("\\b"+(Ka.pattern||_n(Ka))+"\\b","i").exec($n)&&(Ka.label||Ka)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),go=function(Xa){return Tn(Xa,function(Fa,Ka){return Fa||RegExp("\\b"+(Ka.pattern||_n(Ka))+"\\b","i").exec($n)&&(Ka.label||Ka)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),sa=_1([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),ls=function(Xa){return Tn(Xa,function(Fa,Ka,Up){return Fa||(Ka[sa]||Ka[/^[a-z]+(?: +[a-z]+\b)*/i.exec(sa)]||RegExp("\\b"+_n(Up)+"(?:\\b|\\w*\\d)","i").exec($n))&&Up})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),yo=function(Xa){return Tn(Xa,function(Fa,Ka){var Up=Ka.pattern||_n(Ka);return!Fa&&(Fa=RegExp("\\b"+Up+"(?:/[\\d.]+|[ \\w.]*)","i").exec($n))&&(Fa=function(ws,Zv,ey){var ty={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Zv&&ey&&/^Win/i.test(ws)&&!/^Windows Phone /i.test(ws)&&(ty=ty[/[\d.]+$/.exec(ws)])&&(ws="Windows "+ty),ws=String(ws),Zv&&ey&&(ws=ws.replace(RegExp(Zv,"i"),ey)),jr(ws.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Fa,Up,Ka.label||Ka)),Fa})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function _1($s){return Tn($s,function(Xa,Fa){var Ka=Fa.pattern||_n(Fa);return!Xa&&(Xa=RegExp("\\b"+Ka+" *\\d+[.\\w_]*","i").exec($n)||RegExp("\\b"+Ka+" *\\w+-[\\w]*","i").exec($n)||RegExp("\\b"+Ka+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec($n))&&((Xa=String(Fa.label&&!RegExp(Ka,"i").test(Fa.label)?Fa.label:Xa).split("/"))[1]&&!/[\d.]+/.test(Xa[0])&&(Xa[0]+=" "+Xa[1]),Fa=Fa.label||Fa,Xa=jr(Xa[0].replace(RegExp(Ka,"i"),Fa).replace(RegExp("; *(?:"+Fa+"[_-])?","i")," ").replace(RegExp("("+Fa+")[-_.]?(\\w)","i"),"$1 $2"))),Xa})}function Yv($s){return Tn($s,function(Xa,Fa){return Xa||(RegExp(Fa+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec($n)||0)[1]||null})}if(Ia&&(Ia=[Ia]),/\bAndroid\b/.test(yo)&&!sa&&(zr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec($n))&&(sa=Dn(zr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),ls&&!sa?sa=_1([ls]):ls&&sa&&(sa=sa.replace(RegExp("^("+_n(ls)+")[-_.\\s]","i"),ls+" ").replace(RegExp("^("+_n(ls)+")[-_.]?(\\w)","i"),ls+" $2")),(zr=/\bGoogle TV\b/.exec(sa))&&(sa=zr[0]),/\bSimulator\b/i.test($n)&&(sa=(sa?sa+" ":"")+"Simulator"),go=="Opera Mini"&&/\bOPiOS\b/.test($n)&&Jo.push("running in Turbo/Uncompressed mode"),go=="IE"&&/\blike iPhone OS\b/.test($n)?(ls=(zr=Jn($n.replace(/like iPhone OS/,""))).manufacturer,sa=zr.product):/^iP/.test(sa)?(go||(go="Safari"),yo="iOS"+((zr=/ OS ([\d_]+)/i.exec($n))?" "+zr[1].replace(/_/g,"."):"")):go=="Konqueror"&&/^Linux\b/i.test(yo)?yo="Kubuntu":ls&&ls!="Google"&&(/Chrome/.test(go)&&!/\bMobile Safari\b/i.test($n)||/\bVita\b/.test(sa))||/\bAndroid\b/.test(yo)&&/^Chrome/.test(go)&&/\bVersion\//i.test($n)?(go="Android Browser",yo=/\bAndroid\b/.test(yo)?yo:"Android"):go=="Silk"?(/\bMobi/i.test($n)||(yo="Android",Jo.unshift("desktop mode")),/Accelerated *= *true/i.test($n)&&Jo.unshift("accelerated")):go=="UC Browser"&&/\bUCWEB\b/.test($n)?Jo.push("speed mode"):go=="PaleMoon"&&(zr=/\bFirefox\/([\d.]+)\b/.exec($n))?Jo.push("identifying as Firefox "+zr[1]):go=="Firefox"&&(zr=/\b(Mobile|Tablet|TV)\b/i.exec($n))?(yo||(yo="Firefox OS"),sa||(sa=zr[1])):!go||(zr=!/\bMinefield\b/i.test($n)&&/\b(?:Firefox|Safari)\b/.exec(go))?(go&&!sa&&/[\/,]|^[^(]+?\)/.test($n.slice($n.indexOf(zr+"/")+8))&&(go=null),(zr=sa||ls||yo)&&(sa||ls||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(yo))&&(go=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(yo)?yo:zr)+" Browser")):go=="Electron"&&(zr=(/\bChrome\/([\d.]+)\b/.exec($n)||0)[1])&&Jo.push("Chromium "+zr),Po||(Po=Yv(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",_n(go),"(?:Firefox|Minefield|NetFront)"])),(zr=(Ia=="iCab"&&parseFloat(Po)>3?"WebKit":/\bOpera\b/.test(go)&&(/\bOPR\b/.test($n)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test($n)&&!/^(?:Trident|EdgeHTML)$/.test(Ia)&&"WebKit"||!Ia&&/\bMSIE\b/i.test($n)&&(yo=="Mac OS"?"Tasman":"Trident")||Ia=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(go)&&"NetFront")&&(Ia=[zr]),go=="IE"&&(zr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec($n)||0)[1])?(go+=" Mobile",yo="Windows Phone "+(/\+$/.test(zr)?zr:zr+".x"),Jo.unshift("desktop mode")):/\bWPDesktop\b/i.test($n)?(go="IE Mobile",yo="Windows Phone 8.x",Jo.unshift("desktop mode"),Po||(Po=(/\brv:([\d.]+)/.exec($n)||0)[1])):go!="IE"&&Ia=="Trident"&&(zr=/\brv:([\d.]+)/.exec($n))&&(go&&Jo.push("identifying as "+go+(Po?" "+Po:"")),go="IE",Po=zr[1]),fs){if(function(Xa,Fa){var Ka=Xa!=null?typeof Xa[Fa]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(Ka)||Ka=="object"&&!Xa[Fa])}(vo,"global"))if(_o&&(Ki=(zr=_o.lang.System).getProperty("os.arch"),yo=yo||zr.getProperty("os.name")+" "+zr.getProperty("os.version")),la){try{Po=vo.require("ringo/engine").version.join("."),go="RingoJS"}catch{(zr=vo.system)&&zr.global.system==vo.system&&(go="Narwhal",yo||(yo=zr[0].os||null))}go||(go="Rhino")}else typeof vo.process=="object"&&!vo.process.browser&&(zr=vo.process)&&(typeof zr.versions=="object"&&(typeof zr.versions.electron=="string"?(Jo.push("Node "+zr.versions.node),go="Electron",Po=zr.versions.electron):typeof zr.versions.nw=="string"&&(Jo.push("Chromium "+Po,"Node "+zr.versions.node),go="NW.js",Po=zr.versions.nw)),go||(go="Node.js",Ki=zr.arch,yo=zr.platform,Po=(Po=/[\d.]+/.exec(zr.version))?Po[0]:null));else Yr(zr=vo.runtime)==Nn?(go="Adobe AIR",yo=zr.flash.system.Capabilities.os):Yr(zr=vo.phantom)==ko?(go="PhantomJS",Po=(zr=zr.version||null)&&zr.major+"."+zr.minor+"."+zr.patch):typeof Uo.documentMode=="number"&&(zr=/\bTrident\/(\d+)/i.exec($n))?(Po=[Po,Uo.documentMode],(zr=+zr[1]+4)!=Po[1]&&(Jo.push("IE "+Po[1]+" mode"),Ia&&(Ia[1]=""),Po[1]=zr),Po=go=="IE"?String(Po[1].toFixed(1)):Po[0]):typeof Uo.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(go)&&(Jo.push("masking as "+go+" "+Po),go="IE",Po="11.0",Ia=["Trident"],yo="Windows");yo=yo&&jr(yo)}if(Po&&(zr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Po)||/(?:alpha|beta)(?: ?\d)?/i.exec($n+";"+(fs&&qo.appMinorVersion))||/\bMinefield\b/i.test($n)&&"a")&&(Ai=/b/i.test(zr)?"beta":"alpha",Po=Po.replace(RegExp(zr+"\\+?$"),"")+(Ai=="beta"?is:Go)+(/\d+\+?/.exec(zr)||"")),go=="Fennec"||go=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(yo))go="Firefox Mobile";else if(go=="Maxthon"&&Po)Po=Po.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(sa))sa=="Xbox 360"&&(yo=null),sa=="Xbox 360"&&/\bIEMobile\b/.test($n)&&Jo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(go)&&(!go||sa||/Browser|Mobi/.test(go))||yo!="Windows CE"&&!/Mobi/i.test($n))if(go=="IE"&&fs)try{vo.external===null&&Jo.unshift("platform preview")}catch{Jo.unshift("embedded")}else(/\bBlackBerry\b/.test(sa)||/\bBB10\b/.test($n))&&(zr=(RegExp(sa.replace(/ +/g," *")+"/([.\\d]+)","i").exec($n)||0)[1]||Po)?(yo=((zr=[zr,/BB10/.test($n)])[1]?(sa=null,ls="BlackBerry"):"Device Software")+" "+zr[0],Po=null):this!=Ur&&sa!="Wii"&&(fs&&Wo||/Opera/.test(go)&&/\b(?:MSIE|Firefox)\b/i.test($n)||go=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(yo)||go=="IE"&&(yo&&!/^Win/.test(yo)&&Po>5.5||/\bWindows XP\b/.test(yo)&&Po>8||Po==8&&!/\bTrident\b/.test($n)))&&!Pt.test(zr=Jn.call(Ur,$n.replace(Pt,"")+";"))&&zr.name&&(zr="ing as "+zr.name+((zr=zr.version)?" "+zr:""),Pt.test(go)?(/\bIE\b/.test(zr)&&yo=="Mac OS"&&(yo=null),zr="identify"+zr):(zr="mask"+zr,go=xa?jr(xa.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(zr)&&(yo=null),fs||(Po=null)),Ia=["Presto"],Jo.push(zr));else go+=" Mobile";(zr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec($n)||0)[1])&&(zr=[parseFloat(zr.replace(/\.(\d)$/,".0$1")),zr],go=="Safari"&&zr[1].slice(-1)=="+"?(go="WebKit Nightly",Ai="alpha",Po=zr[1].slice(0,-1)):Po!=zr[1]&&Po!=(zr[2]=(/\bSafari\/([\d.]+\+?)/i.exec($n)||0)[1])||(Po=null),zr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec($n)||0)[1],zr[0]==537.36&&zr[2]==537.36&&parseFloat(zr[1])>=28&&Ia=="WebKit"&&(Ia=["Blink"]),fs&&(eo||zr[1])?(Ia&&(Ia[1]="like Chrome"),zr=zr[1]||((zr=zr[0])<530?1:zr<532?2:zr<532.05?3:zr<533?4:zr<534.03?5:zr<534.07?6:zr<534.1?7:zr<534.13?8:zr<534.16?9:zr<534.24?10:zr<534.3?11:zr<535.01?12:zr<535.02?"13+":zr<535.07?15:zr<535.11?16:zr<535.19?17:zr<536.05?18:zr<536.1?19:zr<537.01?20:zr<537.11?"21+":zr<537.13?23:zr<537.18?24:zr<537.24?25:zr<537.36?26:Ia!="Blink"?"27":"28")):(Ia&&(Ia[1]="like Safari"),zr=(zr=zr[0])<400?1:zr<500?2:zr<526?3:zr<533?4:zr<534?"4+":zr<535?5:zr<537?6:zr<538?7:zr<601?8:zr<602?9:zr<604?10:zr<606?11:zr<608?12:"12"),Ia&&(Ia[1]+=" "+(zr+=typeof zr=="number"?".x":/[.+]/.test(zr)?"":"+")),go=="Safari"&&(!Po||parseInt(Po)>45)?Po=zr:go=="Chrome"&&/\bHeadlessChrome/i.test($n)&&Jo.unshift("headless")),go=="Opera"&&(zr=/\bzbov|zvav$/.exec(yo))?(go+=" ",Jo.unshift("desktop mode"),zr=="zvav"?(go+="Mini",Po=null):go+="Mobile",yo=yo.replace(RegExp(" *"+zr+"$"),"")):go=="Safari"&&/\bChrome\b/.exec(Ia&&Ia[1])?(Jo.unshift("desktop mode"),go="Chrome Mobile",Po=null,/\bOS X\b/.test(yo)?(ls="Apple",yo="iOS 4.3+"):yo=null):/\bSRWare Iron\b/.test(go)&&!Po&&(Po=Yv("Chrome")),Po&&Po.indexOf(zr=/[\d.]+$/.exec(yo))==0&&$n.indexOf("/"+zr+"-")>-1&&(yo=Dn(yo.replace(zr,""))),yo&&yo.indexOf(go)!=-1&&!RegExp(go+" OS").test(yo)&&(yo=yo.replace(RegExp(" *"+_n(go)+" *"),"")),Ia&&!/\b(?:Avant|Nook)\b/.test(go)&&(/Browser|Lunascape|Maxthon/.test(go)||go!="Safari"&&/^iOS/.test(yo)&&/\bSafari\b/.test(Ia[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(go)&&Ia[1])&&(zr=Ia[Ia.length-1])&&Jo.push(zr),Jo.length&&(Jo=["("+Jo.join("; ")+")"]),ls&&sa&&sa.indexOf(ls)<0&&Jo.push("on "+ls),sa&&Jo.push((/^on /.test(Jo[Jo.length-1])?"":"on ")+sa),yo&&(zr=/ ([\d.+]+)$/.exec(yo),Zn=zr&&yo.charAt(yo.length-zr[0].length-1)=="/",yo={architecture:32,family:zr&&!Zn?yo.replace(zr[0],""):yo,version:zr?zr[1]:null,toString:function(){var $s=this.version;return this.family+($s&&!Zn?" "+$s:"")+(this.architecture==64?" 64-bit":"")}}),(zr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Ki))&&!/\bi686\b/i.test(Ki)?(yo&&(yo.architecture=64,yo.family=yo.family.replace(RegExp(" *"+zr),"")),go&&(/\bWOW64\b/i.test($n)||fs&&/\w(?:86|32)$/.test(qo.cpuClass||qo.platform)&&!/\bWin64; x64\b/i.test($n))&&Jo.unshift("32-bit")):yo&&/^OS X/.test(yo.family)&&go=="Chrome"&&parseFloat(Po)>=39&&(yo.architecture=64),$n||($n=null);var ys={};return ys.description=$n,ys.layout=Ia&&Ia[0],ys.manufacturer=ls,ys.name=go,ys.prerelease=Ai,ys.product=sa,ys.ua=$n,ys.version=go&&Po,ys.os=yo||{architecture:null,family:null,version:null,toString:function(){return"null"}},ys.parse=Jn,ys.toString=function(){return this.description||""},ys.version&&Jo.unshift(Po),ys.name&&Jo.unshift(go),yo&&go&&(yo!=String(yo).split(" ")[0]||yo!=go.split(" ")[0]&&!sa)&&Jo.push(sa?"("+yo+")":"on "+yo),Jo.length&&(ys.description=Jo.join(" ")),ys}();Oe&&Ie?Ur(zn,function(Jn,$n){Oe[$n]=Jn}):qe.platform=zn}).call(e)}),k1=g(function(pe,xe){pe.exports=function(){var qe={d:function(zr,Zn){for(var eo in Zn)qe.o(Zn,eo)&&!qe.o(zr,eo)&&Dd(zr,eo,{enumerable:!0,get:Zn[eo]})},o:function(zr,Zn){return Object.prototype.hasOwnProperty.call(zr,Zn)}},Oe={};qe.d(Oe,{default:function(){return qo}});var Ie=function Bn(zr){for(var Zn in function(eo,qn){if(!(eo instanceof qn))throw new TypeError("Cannot call a class as a function")}(this,Bn),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(eo){},this.onProgress=function(eo){},this.onUploadProgress=function(eo){},this.onComplete=function(eo){},zr)this[Zn]=zr[Zn]};function At(Bn,zr){var Zn=Hs!==void 0&&Tm(Bn)||Bn["@@iterator"];if(!Zn){if(Cs(Bn)||(Zn=function(ko,_o){if(ko){var la;if(typeof ko=="string")return Dt(ko,_o);var Go=qa(la=Object.prototype.toString.call(ko)).call(la,8,-1);return Go==="Object"&&ko.constructor&&(Go=ko.constructor.name),Go==="Map"||Go==="Set"?pl(ko):Go==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Go)?Dt(ko,_o):void 0}}(Bn))||zr&&Bn&&typeof Bn.length=="number"){Zn&&(Bn=Zn);var eo=0,qn=function(){};return{s:qn,n:function(){return eo>=Bn.length?{done:!0}:{done:!1,value:Bn[eo++]}},e:function(_o){throw _o},f:qn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Nn,no=!0,fo=!1;return{s:function(){Zn=Zn.call(Bn)},n:function(){var _o=Zn.next();return no=_o.done,_o},e:function(_o){fo=!0,Nn=_o},f:function(){try{no||Zn.return==null||Zn.return()}finally{if(fo)throw Nn}}}}function Dt(Bn,zr){(zr==null||zr>Bn.length)&&(zr=Bn.length);for(var Zn=0,eo=new Array(zr);Zn<zr;Zn++)eo[Zn]=Bn[Zn];return eo}var Pt=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(Pt={privateObj:{},setItem:function(zr,Zn){Pt.privateObj[zr]=Zn},getItem:function(zr){return Pt.privateObj[zr]},removeItem:function(zr){delete Pt.privateObj[zr]},getKeys:function(){return Sa(Pt.privateObj)}});var ir={getFileKey:function(zr){var Zn=zr.size.toString(),eo=zr.lastModified.toString();return"_NosUploader_"+zr.name+qa(Zn).call(Zn,Zn.length-5)+qa(eo).call(eo,eo.length-5)},getFileInfo:function(zr){var Zn=Pt.getItem(zr);if(!Zn)return null;try{return JSON.parse(Zn)}catch{return null}},initFile:function(zr,Zn,eo){ir.clearExpiredInfo();var qn=this.getFileKey(Zn),Nn={ctx:zr.ctx!==void 0?zr.ctx:"",bucket:zr.bucketName,obj:zr.objectName,token:zr.token,modifyAt:_s(),end:!1};return zr.payload&&(Nn.payload=zr.payload),eo&&Pt.setItem(qn,Ao(Nn)),qn},setUploadContext:function(zr,Zn,eo){var qn=this.getFileInfo(zr);qn&&(qn.ctx=Zn,eo&&Pt.setItem(zr,Ao(qn)))},setComplete:function(zr,Zn){var eo=this.getFileInfo(zr);eo&&(eo.modifyAt=_s(),eo.end=!0,Zn&&Pt.setItem(zr,Ao(eo)))},getUploadContext:function(zr){var Zn=this.getFileInfo(zr);return Zn?Zn.ctx:""},removeFileInfo:function(zr){ea(zr).call(zr,"_NosUploader_")===0&&Pt.removeItem(zr)},clearExpiredInfo:function(){var zr,Zn=typeof Pt.getKeys=="function"?Pt.getKeys():Sa(Pt),eo=_s(),qn=[],Nn=At(Zn);try{for(Nn.s();!(zr=Nn.n()).done;){var no=zr.value;if(ea(no).call(no,"_NosUploader_")===0){var fo=ir.getFileInfo(no);fo===null||eo-fo.modifyAt>qo.expireTime?Pt.removeItem(no):qn.push({fileInfo:fo,key:no})}}}catch(Uo){Nn.e(Uo)}finally{Nn.f()}if(qn.length>qo.maxFileCache){var ko,_o,la=At(qa(ko=yp(qn).call(qn,function(Uo,Wo){return Wo.fileInfo.modifyAt-Uo.fileInfo.modifyAt})).call(ko,qo.maxFileCache));try{for(la.s();!(_o=la.n()).done;){var Go,is=_o.value;ea(Go=is.key).call(Go,"_NosUploader_")===0&&Pt.removeItem(is.key)}}catch(Uo){la.e(Uo)}finally{la.f()}}}},hr=ir;function xr(Bn){return(xr=typeof Hs=="function"&&typeof ah=="symbol"?function(zr){return typeof zr}:function(zr){return zr&&typeof Hs=="function"&&zr.constructor===Hs&&zr!==Hs.prototype?"symbol":typeof zr})(Bn)}function Or(Bn,zr){return!zr||xr(zr)!=="object"&&typeof zr!="function"?function(Zn){if(Zn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zn}(Bn):zr}function jr(Bn){var zr=typeof Zu=="function"?new Zu:void 0;return(jr=function(eo){var qn,Nn;if(eo===null||(Nn=eo,ea(qn=Function.toString.call(Nn)).call(qn,"[native code]")===-1))return eo;if(typeof eo!="function")throw new TypeError("Super expression must either be null or a function");if(zr!==void 0){if(zr.has(eo))return zr.get(eo);zr.set(eo,no)}function no(){return Ur(eo,arguments,Tn(this).constructor)}return no.prototype=ii(eo.prototype,{constructor:{value:no,enumerable:!1,writable:!0,configurable:!0}}),_n(no,eo)})(Bn)}function Ur(Bn,zr,Zn){return(Ur=Yr()?zi:function(eo,qn,Nn){var no=[null];no.push.apply(no,qn);var fo=new(oa(Function).apply(eo,no));return Nn&&_n(fo,Nn.prototype),fo}).apply(null,arguments)}function Yr(){if(typeof Reflect>"u"||!zi||zi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(zi(Boolean,[],function(){})),!0}catch{return!1}}function _n(Bn,zr){return(_n=ci||function(Zn,eo){return Zn.__proto__=eo,Zn})(Bn,zr)}function Tn(Bn){return(Tn=ci?zl:function(zr){return zr.__proto__||zl(zr)})(Bn)}var Dn=function(Bn){(function(Nn,no){if(typeof no!="function"&&no!==null)throw new TypeError("Super expression must either be null or a function");Nn.prototype=ii(no&&no.prototype,{constructor:{value:Nn,writable:!0,configurable:!0}}),no&&_n(Nn,no)})(qn,Bn);var zr,Zn,eo=(zr=qn,Zn=Yr(),function(){var Nn,no=Tn(zr);if(Zn){var fo=Tn(this).constructor;Nn=zi(no,arguments,fo)}else Nn=no.apply(this,arguments);return Or(this,Nn)});function qn(Nn,no){var fo;return function(ko,_o){if(!(ko instanceof _o))throw new TypeError("Cannot call a class as a function")}(this,qn),(fo=eo.call(this,"NosUploadError:"+Nn)).errCode=no,fo.errMsg=Nn,fo}return qn}(jr(Error)),zn=function Bn(zr,Zn,eo){if(zr.uploadState==="uploading"){var qn=zr.config,Nn=zr.param,no=hr.getUploadContext(zr.fileKey);if(!no)return eo(0);var fo=new XMLHttpRequest,ko=qn.directUploadAddr+"/".concat(Nn.bucketName)+"/".concat(encodeURIComponent(Nn.objectName))+"?uploadContext"+"&context=".concat(no)+"&version=".concat(qn.version);fo.onreadystatechange=function(){var _o;if(zr.uploadState!=="abort"&&fo.readyState===4){var la,Go,is,Uo;try{Uo=JSON.parse(fo.responseText)}catch{Uo={errMsg:"JsonParseError in getOffset",errCode:500}}fo.status===200?Uo.errCode?zr.config.onError(new Dn(Uo.errMsg,Uo.errCode)):eo(Uo.offset):fo.status.toString().match(/^5/)?Bn(zr,Zn-1,eo):Zn>0?(typeof((_o=qn.logger)===null||_o===void 0?void 0:_o.error)=="function"&&qn.logger.error(qs(la="getOffset(".concat(ko,") error. retry after 3 seconds. ")).call(la,new Date().toTimeString())),Di(function(){Bn(zr,Zn-1,eo)},3500)):(hr.removeFileInfo(zr.fileKey),fo.status?qn.onError(new Dn(qs(Go=qs(is="getOffset(".concat(ko,") error: ")).call(is,fo.status," ")).call(Go,fo.statusText))):qn.onError(new Dn("getOffset(".concat(ko,") error. no Error Code"))))}},fo.open("get",ko),fo.setRequestHeader("x-nos-token",Nn.token),fo.timeout=qn.getOffsetTimeout,fo.send()}},Jn=function Bn(zr,Zn,eo,qn){if(zr.uploadState==="uploading"){var Nn=zr.param,no=zr.config,fo=qa(File.prototype),ko=Nn.ctx!==void 0?Nn.ctx:"",_o=Zn+no.trunkSize>zr.file.size,la=_o?zr.file.size:Zn+no.trunkSize,Go=new XMLHttpRequest,is=no.directUploadAddr+"/".concat(Nn.bucketName)+"/".concat(encodeURIComponent(Nn.objectName));if(Go.upload.onprogress=function(Wo){if(zr.uploadState!=="abort"){var xa=0;Wo.lengthComputable?(xa=(Zn+Wo.loaded)/zr.file.size,no.onProgress(xa),no.onUploadProgress({loaded:Wo.loaded,total:zr.file.size,percentage:xa,percentageText:(100*xa).toFixed(2)+"%"})):no.onError(new Dn("browser does not support query upload progress"))}},Go.onreadystatechange=function(){var Wo,xa;if(zr.uploadState!=="abort"&&Go.readyState===4){var Ki,Jo,Ai,fs;try{fs=JSON.parse(Go.responseText)}catch(Po){typeof((Wo=no.logger)===null||Wo===void 0?void 0:Wo.error)=="function"&&no.logger.error("JsonParseError in uploadTrunk",Po),fs={errMsg:"JsonParseError in uploadTrunk"}}Go.status===200?(zr.setContext(fs.context),_o?(qn(),zr.setComplete()):Bn(zr,fs.offset,no.retryCount,qn)):Go.status.toString().match(/^5/)?eo>0?Bn(zr,Zn,eo-1,qn):(hr.removeFileInfo(zr.fileKey),no.onError(new Dn(fs.errMsg,fs.errCode))):eo>0?(typeof((xa=no.logger)===null||xa===void 0?void 0:xa.error)=="function"&&no.logger.error(qs(Ki="uploadTrunk(".concat(is,") error. retry after 3 seconds. ")).call(Ki,new Date().toTimeString())),Di(function(){Bn(zr,Zn,eo-1,qn)},3500)):(hr.removeFileInfo(zr.fileKey),Go.status?no.onError(new Dn(qs(Jo=qs(Ai="uploadTrunk(".concat(is,") error: ")).call(Ai,Go.status," ")).call(Jo,Go.statusText))):no.onError(new Dn("uploadTrunk(".concat(is,") error. no Error Code. Please check your network"))))}},Go.open("post",is+"?offset=".concat(Zn)+"&complete=".concat(_o)+"&context=".concat(ko)+"&version=".concat(no.version)),Go.setRequestHeader("x-nos-token",Nn.token),zr.file.type&&Go.setRequestHeader("content-type",zr.file.type),Go.timeout=no.trunkUploadTimeout,typeof FileReader<"u"){var Uo=new FileReader;Uo.addEventListener("load",function(Wo){var xa;!((xa=Wo==null?void 0:Wo.target)===null||xa===void 0)&&xa.result?Go.send(Wo.target.result):no.onError(new Dn("Read ArrayBuffer failed"))}),Uo.addEventListener("error",function(Wo){var xa=Wo.target.error;no.onError(new Dn("Read ArrayBuffer error. ".concat(xa.toString()),xa.code))}),Uo.readAsArrayBuffer(fo.call(zr.file,Zn,la))}else Go.send(fo.call(zr.file,Zn,la))}};function $n(Bn,zr){for(var Zn=0;Zn<zr.length;Zn++){var eo=zr[Zn];eo.enumerable=eo.enumerable||!1,eo.configurable=!0,"value"in eo&&(eo.writable=!0),Dd(Bn,eo.key,eo)}}var vo=function(){function Bn(Zn,eo,qn){(function(Nn,no){if(!(Nn instanceof no))throw new TypeError("Cannot call a class as a function")})(this,Bn),this.uploadState="paused",this.config=qn,this.file=Zn,this.param=eo,this.fileKey=hr.initFile(eo,Zn,this.config.enableCache),this.resume()}var zr;return(zr=[{key:"resume",value:function(){var eo=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var qn=this.config;zn(this,qn.retryCount,function(Nn){Jn(eo,Nn,qn.retryCount,function(){eo.setUploadState("ended"),typeof qn.onComplete=="function"&&qn.onComplete(eo.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),hr.removeFileInfo(this.fileKey),this.config.onError(new Dn("Upload Aborted",10499))}},{key:"setUploadState",value:function(eo){eo!==this.uploadState&&(this.uploadState=eo)}},{key:"setContext",value:function(eo){hr.setUploadContext(this.fileKey,eo,this.config.enableCache),this.param.ctx=eo}},{key:"setComplete",value:function(){hr.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&$n(Bn.prototype,zr),Bn}(),Fo={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(zr){var Zn=hr.getFileKey(zr),eo=hr.getFileInfo(Zn);return eo===null?null:_s()-eo.modifyAt>Fo.expireTime?(hr.removeFileInfo(Zn),null):{uploadInfo:Hn({bucketName:eo.bucket,objectName:eo.obj,token:eo.token,ctx:eo.ctx},eo.payload?{payload:eo.payload}:{}),complete:eo.end}},setMaxFileCache:function(zr){Fo.maxFileCache=zr},setExpireTime:function(zr){Fo.expireTime=zr},printCaches:function(){for(var zr=0,Zn=Sa(localStorage);zr<Zn.length;zr++){var eo=Zn[zr],qn=hr.getFileInfo(eo);qn&&console.log(qn,"modifiedAt",new Date(qn.modifyAt).toTimeString())}},createConfig:function(zr){return new Ie(zr)},createTask:function(zr,Zn,eo){return new vo(zr,Zn,eo)}},qo=Fo;return Oe.default}()}),Dm=g(function(pe,xe){pe.exports=function(){function qe(At){if(At){var Dt,Pt="";return To(Dt=Sa(At)).call(Dt,function(ir,hr){Pt+=hr===0?"?":"&",Pt+=ir+"="+At[ir]}),Pt}return""}var Oe=function(At){function Dt(Pt,ir,hr,xr){var Or;return(Or=At.call(this,hr)||this).source=Pt,Or.code=ir,Or.desc=hr,Or.detail=xr||{},Or}return ra(Dt,At),Dt}(h0(Error));function Ie(At,Dt){Dt===void 0&&(Dt={dataType:"json",method:"GET",timeout:5e3});var Pt=Dt.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",ir=Dt.method==="GET"?qe(Dt.params):"";return new ca(function(hr,xr){if(window.XMLHttpRequest){var Or,jr=new XMLHttpRequest;if(jr.onreadystatechange=function(){if(jr.readyState===4)if(jr.status===200){try{Or=JSON.parse(jr.response||"{}")}catch{Or=jr.response}hr({status:jr.status,data:Or})}else Di(function(){xr(new Oe(1,jr.status,"readyState: "+jr.readyState+"; statusText: "+jr.statusText))},0)},jr.open(Dt.method,""+At+ir),jr.timeout=Dt.timeout||5e3,jr.setRequestHeader("Content-Type",Pt),Dt.headers)for(var Ur in Dt.headers)jr.setRequestHeader(Ur,Dt.headers[Ur]);jr.ontimeout=function(Yr){xr(new Oe(1,408,Yr&&Yr.message?Yr.message:"request timeout"))},jr.send(Ao(Dt.data))}else xr(new Oe(2,10400,"request no suppout"))})}return Ie}()}),w1=console,kl=null,wl=null,TM={setLogger:function(xe){w1=xe},platform:"BROWSER",localStorage:window.localStorage,request:Dm,WebSocket:window.WebSocket,uploadFile:function(xe){return hn(this,void 0,void 0,Dr.mark(function qe(){var Oe,Ie,At,Dt,Pt,ir;return Dr.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(xe.fileInput||xe.file){xr.next=2;break}throw new Error("File not exist");case 2:if(!xe.file){xr.next=6;break}Dt=xe.file,xr.next=20;break;case 6:if(typeof xe.fileInput!="string"){xr.next=15;break}if(!((Pt=document.getElementById(xe.fileInput))&&Pt.files&&Pt.files[0])){xr.next=12;break}Dt=Pt.files[0],xr.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:xr.next=20;break;case 15:if(!(xe.fileInput&&xe.fileInput.files&&xe.fileInput.files[0])){xr.next=19;break}Dt=xe.fileInput.files[0],xr.next=20;break;case 19:throw new Error("Can not get file from fileInput "+xe.fileInput);case 20:if(!(xe.maxSize&&Dt.size>xe.maxSize)){xr.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+xe.maxSize+", get "+Dt.size);case 22:return xr.next=24,new ca(function(Or,jr){var Ur=k1.createConfig({enableCache:!1,directUploadAddr:xe.chunkUploadHost,onError:function(Tn){jr(Tn)},onUploadProgress:xe.onUploadProgress||function(){},onComplete:function(Tn){Or(Tn)}}),Yr=k1.createTask(Dt,{bucketName:xe.nosToken.bucket,objectName:decodeURIComponent(xe.nosToken.objectName),token:xe.nosToken.token},Ur);try{xe.onUploadStart&&xe.onUploadStart(Yr)}catch(_n){w1.error("Adapter uploadFile: options.onUploadStart error",_n&&_n.message),Yr.abort(),jr(_n)}});case 24:return(ir=xr.sent).name=Dt.name,ir.size=Dt.size,ir.type=Dt.type,ir.ext=M1(Oe=ir.name).call(Oe,".")>-1?qa(Ie=ir.name).call(Ie,M1(At=ir.name).call(At,".")+1).toLowerCase():"",xr.abrupt("return",ir);case 30:case"end":return xr.stop()}},qe)}))},getSystemInfo:function(){var xe,qe,Oe=dd.version||"";if(dv())try{var Ie=navigator.userAgent.match(/Electron\/([\d.]+\d+)/);Ie&&Ie[1]&&typeof Ie[1]=="string"&&(Oe=Ie[1])}catch{}return{os:((xe=dd.os)===null||xe===void 0?void 0:xe.family)||"",osVer:((qe=dd.os)===null||qe===void 0?void 0:qe.version)||"",browser:dd.name||"",browserVer:dd.version||"",libEnv:"BROWSER",hostEnv:dv()?"Electron":w0()?"H5":uc()?"BROWSER":"Unset",hostEnvEnum:dv()?nu.Electron:w0()?nu.H5:uc()?nu.BROWSER:nu.Unset,hostEnvVer:Oe,userAgent:navigator&&navigator.userAgent,model:Oe,manufactor:dd.name||""}},net:{getNetworkStatus:function(){return ca.resolve({net_type:Ks.kStatNetTypeUnkonw,net_connect:typeof navigator>"u"||typeof navigator.onLine!="boolean"||navigator.onLine})},onNetworkStatusChange:function(xe){kl=function(){xe({isConnected:!0,networkType:Ks.kStatNetTypeUnkonw})},wl=function(){xe({isConnected:!1,networkType:Ks.kStatNetTypeUnkonw})},window.addEventListener("online",kl),window.addEventListener("offline",wl)},offNetworkStatusChange:function(){kl&&window.removeEventListener("online",kl),wl&&window.removeEventListener("offline",wl),kl=null,wl=null}}};return jm.setAdapters(TM),jm})})(QCHAT_BROWSER_SDK);var QCHAT_BROWSER_SDKExports=QCHAT_BROWSER_SDK.exports;const QChatSDK=getDefaultExportFromCjs(QCHAT_BROWSER_SDKExports);var NIM_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function g(_e){var he={exports:{}};return _e(he,he.exports),he.exports}var y,i,k=n(g(function(_e){_e.exports=function(Ue){if(Ue===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ue},_e.exports.__esModule=!0,_e.exports.default=_e.exports})),L=function(_e){return _e&&_e.Math==Math&&_e},$=L(typeof globalThis=="object"&&globalThis)||L(typeof window=="object"&&window)||L(typeof self=="object"&&self)||L(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),V=function(_e){try{return!!_e()}catch{return!0}},z=!V(function(){var _e=(function(){}).bind();return typeof _e!="function"||_e.hasOwnProperty("prototype")}),re=Function.prototype,oe=re.apply,le=re.call,ue=typeof Reflect=="object"&&Reflect.apply||(z?le.bind(oe):function(){return le.apply(oe,arguments)}),ie=Function.prototype,ae=ie.bind,Fe=ie.call,de=z&&ae.bind(Fe,Fe),Ne=z?function(_e){return _e&&de(_e)}:function(_e){return _e&&function(){return Fe.apply(_e,arguments)}},Ve=function(_e){return typeof _e=="function"},ze=!V(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),jt=Function.prototype.call,kt=z?jt.bind(jt):function(){return jt.apply(jt,arguments)},Et={}.propertyIsEnumerable,lr=Object.getOwnPropertyDescriptor,tr={f:lr&&!Et.call({1:2},1)?function(he){var Ue=lr(this,he);return!!Ue&&Ue.enumerable}:Et},or=function(_e,he){return{enumerable:!(1&_e),configurable:!(2&_e),writable:!(4&_e),value:he}},dr=Ne({}.toString),cr=Ne("".slice),nr=function(_e){return cr(dr(_e),8,-1)},ur=Object,ar=Ne("".split),gr=V(function(){return!ur("z").propertyIsEnumerable(0)})?function(_e){return nr(_e)=="String"?ar(_e,""):ur(_e)}:ur,pr=function(_e){return _e==null},yr=TypeError,Sr=function(_e){if(pr(_e))throw yr("Can't call method on "+_e);return _e},wr=function(_e){return gr(Sr(_e))},Mr=typeof document=="object"&&document.all,mr=Mr===void 0&&Mr!==void 0?function(_e){return typeof _e=="object"?_e!==null:Ve(_e)||_e===Mr}:function(_e){return typeof _e=="object"?_e!==null:Ve(_e)},_r={},Nr=function(_e){return Ve(_e)?_e:void 0},Pr=function(_e,he){return arguments.length<2?Nr(_r[_e])||Nr($[_e]):_r[_e]&&_r[_e][he]||$[_e]&&$[_e][he]},sr=Ne({}.isPrototypeOf),Ir=Pr("navigator","userAgent")||"",Ar=$.process,Cr=$.Deno,br=Ar&&Ar.versions||Cr&&Cr.version,vr=br&&br.v8;vr&&(i=(y=vr.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!i&&Ir&&(!(y=Ir.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=Ir.match(/Chrome\/(\d+)/))&&(i=+y[1]);var Tr,Br=i,Lr=!!Object.getOwnPropertySymbols&&!V(function(){var _e=Symbol();return!String(_e)||!(Object(_e)instanceof Symbol)||!Symbol.sham&&Br&&Br<41}),Fr=Lr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",qr=Object,Vr=Fr?function(_e){return typeof _e=="symbol"}:function(_e){var he=Pr("Symbol");return Ve(he)&&sr(he.prototype,qr(_e))},Qr=String,Sn=function(_e){try{return Qr(_e)}catch{return"Object"}},Mn=TypeError,Xr=function(_e){if(Ve(_e))return _e;throw Mn(Sn(_e)+" is not a function")},Wn=function(_e,he){var Ue=_e[he];return pr(Ue)?void 0:Xr(Ue)},Zr=TypeError,En=Object.defineProperty,Jr="__core-js_shared__",kn=$[Jr]||function(_e,he){try{En($,_e,{value:he,configurable:!0,writable:!0})}catch{$[_e]=he}return he}(Jr,{}),Un=g(function(_e){(_e.exports=function(he,Ue){return kn[he]||(kn[he]=Ue!==void 0?Ue:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),wn=Object,Pn=function(_e){return wn(Sr(_e))},oo=Ne({}.hasOwnProperty),Rn=Object.hasOwn||function(he,Ue){return oo(Pn(he),Ue)},An=0,to=Math.random(),uo=Ne(1 .toString),Eo=function(_e){return"Symbol("+(_e===void 0?"":_e)+")_"+uo(++An+to,36)},Oo=Un("wks"),$o=$.Symbol,ua=$o&&$o.for,gs=Fr?$o:$o&&$o.withoutSetter||Eo,Co=function(_e){if(!Rn(Oo,_e)||!Lr&&typeof Oo[_e]!="string"){var he="Symbol."+_e;Lr&&Rn($o,_e)?Oo[_e]=$o[_e]:Oo[_e]=Fr&&ua?ua(he):gs(he)}return Oo[_e]},Ps=TypeError,ao=Co("toPrimitive"),Ta=function(_e,he){if(!mr(_e)||Vr(_e))return _e;var Ue,$e=Wn(_e,ao);if($e){if(he===void 0&&(he="default"),Ue=kt($e,_e,he),!mr(Ue)||Vr(Ue))return Ue;throw Ps("Can't convert object to primitive value")}return he===void 0&&(he="number"),function(Ce,Lt){var er,rr;if(Lt==="string"&&Ve(er=Ce.toString)&&!mr(rr=kt(er,Ce))||Ve(er=Ce.valueOf)&&!mr(rr=kt(er,Ce))||Lt!=="string"&&Ve(er=Ce.toString)&&!mr(rr=kt(er,Ce)))return rr;throw Zr("Can't convert object to primitive value")}(_e,he)},Ca=function(_e){var he=Ta(_e,"string");return Vr(he)?he:he+""},Da=$.document,Ba=mr(Da)&&mr(Da.createElement),Zo=function(_e){return Ba?Da.createElement(_e):{}},xo=!ze&&!V(function(){return Object.defineProperty(Zo("div"),"a",{get:function(){return 7}}).a!=7}),Ua=Object.getOwnPropertyDescriptor,$a={f:ze?Ua:function(he,Ue){if(he=wr(he),Ue=Ca(Ue),xo)try{return Ua(he,Ue)}catch{}if(Rn(he,Ue))return or(!kt(tr.f,he,Ue),he[Ue])}},Dc=/#|\.prototype\./,As=function(_e,he){var Ue=ha[si(_e)];return Ue==po||Ue!=Fn&&(Ve(he)?V(he):!!he)},si=As.normalize=function(_e){return String(_e).replace(Dc,".").toLowerCase()},ha=As.data={},Fn=As.NATIVE="N",po=As.POLYFILL="P",ta=As,Ea=Ne(Ne.bind),Ho=function(_e,he){return Xr(_e),he===void 0?_e:z?Ea(_e,he):function(){return _e.apply(he,arguments)}},Qi=ze&&V(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),hu=String,gc=TypeError,lo=function(_e){if(mr(_e))return _e;throw gc(hu(_e)+" is not an object")},qp=TypeError,fd=Object.defineProperty,E1=Object.getOwnPropertyDescriptor,P1="enumerable",A1="configurable",N1="writable",ja={f:ze?Qi?function(he,Ue,$e){if(lo(he),Ue=Ca(Ue),lo($e),typeof he=="function"&&Ue==="prototype"&&"value"in $e&&N1 in $e&&!$e.writable){var Ce=E1(he,Ue);Ce&&Ce.writable&&(he[Ue]=$e.value,$e={configurable:A1 in $e?$e.configurable:Ce.configurable,enumerable:P1 in $e?$e.enumerable:Ce.enumerable,writable:!1})}return fd(he,Ue,$e)}:fd:function(he,Ue,$e){if(lo(he),Ue=Ca(Ue),lo($e),xo)try{return fd(he,Ue,$e)}catch{}if("get"in $e||"set"in $e)throw qp("Accessors not supported");return"value"in $e&&(he[Ue]=$e.value),he}},Ma=ze?function(_e,he,Ue){return ja.f(_e,he,or(1,Ue))}:function(_e,he,Ue){return _e[he]=Ue,_e},O1=$a.f,R1=function(_e){var he=function(Ue,$e,Ce){if(this instanceof he){switch(arguments.length){case 0:return new _e;case 1:return new _e(Ue);case 2:return new _e(Ue,$e)}return new _e(Ue,$e,Ce)}return ue(_e,this,arguments)};return he.prototype=_e.prototype,he},xn=function(_e,he){var Ue,$e,Ce,Lt,er,rr,fr,kr,Er=_e.target,Rr=_e.global,$r=_e.stat,Hr=_e.proto,Gr=Rr?$:$r?$[Er]:($[Er]||{}).prototype,vn=Rr?_r:_r[Er]||Ma(_r,Er,{})[Er],bn=vn.prototype;for(Ce in he)Ue=!ta(Rr?Ce:Er+($r?".":"#")+Ce,_e.forced)&&Gr&&Rn(Gr,Ce),er=vn[Ce],Ue&&(rr=_e.dontCallGetSet?(kr=O1(Gr,Ce))&&kr.value:Gr[Ce]),Lt=Ue&&rr?rr:he[Ce],Ue&&typeof er==typeof Lt||(fr=_e.bind&&Ue?Ho(Lt,$):_e.wrap&&Ue?R1(Lt):Hr&&Ve(Lt)?Ne(Lt):Lt,(_e.sham||Lt&&Lt.sham||er&&er.sham)&&Ma(fr,"sham",!0),Ma(vn,Ce,fr),Hr&&(Rn(_r,$e=Er+"Prototype")||Ma(_r,$e,{}),Ma(_r[$e],Ce,Lt),_e.real&&bn&&!bn[Ce]&&Ma(bn,Ce,Lt)))},B1=Math.ceil,L1=Math.floor,F1=Math.trunc||function(he){var Ue=+he;return(Ue>0?L1:B1)(Ue)},hc=function(_e){var he=+_e;return he!=he||he===0?0:F1(he)},$1=Math.max,j1=Math.min,Ri=function(_e,he){var Ue=hc(_e);return Ue<0?$1(Ue+he,0):j1(Ue,he)},D1=Math.min,ns=function(_e){return(he=_e.length)>0?D1(hc(he),9007199254740991):0;var he},Um=function(_e){return function(he,Ue,$e){var Ce,Lt=wr(he),er=ns(Lt),rr=Ri($e,er);if(_e&&Ue!=Ue){for(;er>rr;)if((Ce=Lt[rr++])!=Ce)return!0}else for(;er>rr;rr++)if((_e||rr in Lt)&&Lt[rr]===Ue)return _e||rr||0;return!_e&&-1}},md={includes:Um(!0),indexOf:Um(!1)},Bi={},U1=md.indexOf,Vm=Ne([].push),qm=function(_e,he){var Ue,$e=wr(_e),Ce=0,Lt=[];for(Ue in $e)!Rn(Bi,Ue)&&Rn($e,Ue)&&Vm(Lt,Ue);for(;he.length>Ce;)Rn($e,Ue=he[Ce++])&&(~U1(Lt,Ue)||Vm(Lt,Ue));return Lt},Il=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ds=Object.keys||function(he){return qm(he,Il)},V1=ze&&!Qi?Object.defineProperties:function(he,Ue){lo(he);for(var $e,Ce=wr(Ue),Lt=Ds(Ue),er=Lt.length,rr=0;er>rr;)ja.f(he,$e=Lt[rr++],Ce[$e]);return he},Hm={f:V1},gd=Pr("document","documentElement"),zm=Un("keys"),El=function(_e){return zm[_e]||(zm[_e]=Eo(_e))},Wm=El("IE_PROTO"),hd=function(){},Gm=function(_e){return"<script>"+_e+"<\/script>"},Km=function(_e){_e.write(Gm("")),_e.close();var he=_e.parentWindow.Object;return _e=null,he},Pl=function(){try{Tr=new ActiveXObject("htmlfile")}catch{}var _e,he;Pl=typeof document<"u"?document.domain&&Tr?Km(Tr):((he=Zo("iframe")).style.display="none",gd.appendChild(he),he.src="javascript:",(_e=he.contentWindow.document).open(),_e.write(Gm("document.F=Object")),_e.close(),_e.F):Km(Tr);for(var Ue=Il.length;Ue--;)delete Pl.prototype[Il[Ue]];return Pl()};Bi[Wm]=!0;var os=Object.create||function(he,Ue){var $e;return he!==null?(hd.prototype=lo(he),$e=new hd,hd.prototype=null,$e[Wm]=he):$e=Pl(),Ue===void 0?$e:Hm.f($e,Ue)};xn({target:"Object",stat:!0,sham:!ze},{create:os});var q1=_r.Object,ii=function(he,Ue){return q1.create(he,Ue)},H1=String,z1=TypeError,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var _e,he=!1,Ue={};try{(_e=Ne(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(Ue,[]),he=Ue instanceof Array}catch{}return function(Ce,Lt){return lo(Ce),function(er){if(typeof er=="object"||Ve(er))return er;throw z1("Can't set "+H1(er)+" as a prototype")}(Lt),he?_e(Ce,Lt):Ce.__proto__=Lt,Ce}}():void 0);xn({target:"Object",stat:!0},{setPrototypeOf:vc});var ci=_r.Object.setPrototypeOf,Us=Ne([].slice),Qm=Function,W1=Ne([].concat),G1=Ne([].join),vd={},K1=function(_e,he,Ue){if(!Rn(vd,he)){for(var $e=[],Ce=0;Ce<he;Ce++)$e[Ce]="a["+Ce+"]";vd[he]=Qm("C,a","return new C("+G1($e,",")+")")}return vd[he](_e,Ue)},yd=z?Qm.bind:function(he){var Ue=Xr(this),$e=Ue.prototype,Ce=Us(arguments,1),Lt=function(){var rr=W1(Ce,Us(arguments));return this instanceof Lt?K1(Ue,rr.length,rr):Ue.apply(he,rr)};return mr($e)&&(Lt.prototype=$e),Lt};xn({target:"Function",proto:!0,forced:Function.bind!==yd},{bind:yd});var da=function(_e){return _r[_e+"Prototype"]},Q1=da("Function").bind,bd=Function.prototype,oa=function(_e){var he=_e.bind;return _e===bd||sr(bd,_e)&&he===bd.bind?Q1:he},Sd=g(function(_e){function he(Ue,$e){var Ce;return _e.exports=he=ci?oa(Ce=ci).call(Ce):function(er,rr){return er.__proto__=rr,er},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue,$e)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),ra=n(g(function(_e){_e.exports=function(Ue,$e){Ue.prototype=ii($e.prototype),Ue.prototype.constructor=Ue,Sd(Ue,$e)},_e.exports.__esModule=!0,_e.exports.default=_e.exports}));xn({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var yc={f:Object.getOwnPropertySymbols},Li=Object.assign,Jm=Object.defineProperty,J1=Ne([].concat),Ym=!Li||V(function(){if(ze&&Li({b:1},Li(Jm({},"a",{enumerable:!0,get:function(){Jm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var _e={},he={},Ue=Symbol(),$e="abcdefghijklmnopqrst";return _e[Ue]=7,$e.split("").forEach(function(Ce){he[Ce]=Ce}),Li({},_e)[Ue]!=7||Ds(Li({},he)).join("")!=$e})?function(he,Ue){for(var $e=Pn(he),Ce=arguments.length,Lt=1,er=yc.f,rr=tr.f;Ce>Lt;)for(var fr,kr=gr(arguments[Lt++]),Er=er?J1(Ds(kr),er(kr)):Ds(kr),Rr=Er.length,$r=0;Rr>$r;)fr=Er[$r++],ze&&!kt(rr,kr,fr)||($e[fr]=kr[fr]);return $e}:Li;xn({target:"Object",stat:!0,arity:2,forced:Object.assign!==Ym},{assign:Ym});var Hn,vu,Td,Gn=_r.Object.assign,bc={},Al=$.WeakMap,Y1=Ve(Al)&&/native code/.test(String(Al)),yu="Object already initialized",Xm=$.TypeError,X1=$.WeakMap;if(Y1||kn.state){var Uc=kn.state||(kn.state=new X1),Z1=Ne(Uc.get),ay=Ne(Uc.has),sy=Ne(Uc.set);Hn=function(_e,he){if(ay(Uc,_e))throw Xm(yu);return he.facade=_e,sy(Uc,_e,he),he},vu=function(_e){return Z1(Uc,_e)||{}},Td=function(_e){return ay(Uc,_e)}}else{var bu=El("state");Bi[bu]=!0,Hn=function(_e,he){if(Rn(_e,bu))throw Xm(yu);return he.facade=_e,Ma(_e,bu,he),he},vu=function(_e){return Rn(_e,bu)?_e[bu]:{}},Td=function(_e){return Rn(_e,bu)}}var Vc,iy,Ji,hi={set:Hn,get:vu,has:Td,enforce:function(_e){return Td(_e)?vu(_e):Hn(_e,{})},getterFor:function(_e){return function(he){var Ue;if(!mr(he)||(Ue=vu(he)).type!==_e)throw Xm("Incompatible receiver, "+_e+" required");return Ue}}},cy=Function.prototype,ly=ze&&Object.getOwnPropertyDescriptor,Hp=Rn(cy,"name"),Zm={EXISTS:Hp,PROPER:Hp&&(function(){}).name==="something",CONFIGURABLE:Hp&&(!ze||ze&&ly(cy,"name").configurable)},uy=!V(function(){function _e(){}return _e.prototype.constructor=null,Object.getPrototypeOf(new _e)!==_e.prototype}),dy=El("IE_PROTO"),eg=Object,Nl=eg.prototype,Su=uy?eg.getPrototypeOf:function(_e){var he=Pn(_e);if(Rn(he,dy))return he[dy];var Ue=he.constructor;return Ve(Ue)&&he instanceof Ue?Ue.prototype:he instanceof eg?Nl:null},Fi=function(_e,he,Ue,$e){return $e&&$e.enumerable?_e[he]=Ue:Ma(_e,he,Ue),_e},tg=Co("iterator"),Ol=!1;[].keys&&("next"in(Ji=[].keys())?(iy=Su(Su(Ji)))!==Object.prototype&&(Vc=iy):Ol=!0);var rg=!mr(Vc)||V(function(){var _e={};return Vc[tg].call(_e)!==_e});Vc=rg?{}:os(Vc),Ve(Vc[tg])||Fi(Vc,tg,function(){return this});var py={IteratorPrototype:Vc,BUGGY_SAFARI_ITERATORS:Ol},Cd={};Cd[Co("toStringTag")]="z";var zp=String(Cd)==="[object z]",ia=Co("toStringTag"),eS=Object,li=nr(function(){return arguments}())=="Arguments",Rl=zp?nr:function(_e){var he,Ue,$e;return _e===void 0?"Undefined":_e===null?"Null":typeof(Ue=function(Ce,Lt){try{return Ce[Lt]}catch{}}(he=eS(_e),ia))=="string"?Ue:li?nr(he):($e=nr(he))=="Object"&&Ve(he.callee)?"Arguments":$e},tS=zp?{}.toString:function(){return"[object "+Rl(this)+"]"},rS=ja.f,Md=Co("toStringTag"),Bl=function(_e,he,Ue,$e){if(_e){var Ce=Ue?_e:_e.prototype;Rn(Ce,Md)||rS(Ce,Md,{configurable:!0,value:he}),$e&&!zp&&Ma(Ce,"toString",tS)}},kd=py.IteratorPrototype,ng=function(){return this},Wp=Zm.PROPER,qc=py.BUGGY_SAFARI_ITERATORS,Tu=Co("iterator"),og="keys",Gp="values",ag="entries",sg=function(){return this},ig=function(_e,he,Ue,$e,Ce,Lt,er){(function(In,Cn,Kn,Qn){var Mo=Cn+" Iterator";In.prototype=os(kd,{next:or(+!Qn,Kn)}),Bl(In,Mo,!1,!0),bc[Mo]=ng})(Ue,he,$e);var rr,fr,kr,Er=function(In){if(In===Ce&&vn)return vn;if(!qc&&In in Hr)return Hr[In];switch(In){case og:return function(){return new Ue(this,In)};case Gp:return function(){return new Ue(this,In)};case ag:return function(){return new Ue(this,In)}}return function(){return new Ue(this)}},Rr=he+" Iterator",$r=!1,Hr=_e.prototype,Gr=Hr[Tu]||Hr["@@iterator"]||Ce&&Hr[Ce],vn=!qc&&Gr||Er(Ce),bn=he=="Array"&&Hr.entries||Gr;if(bn&&(rr=Su(bn.call(new _e)))!==Object.prototype&&rr.next&&(Bl(rr,Rr,!0,!0),bc[Rr]=sg),Wp&&Ce==Gp&&Gr&&Gr.name!==Gp&&($r=!0,vn=function(){return kt(Gr,this)}),Ce)if(fr={values:Er(Gp),keys:Lt?vn:Er(og),entries:Er(ag)},er)for(kr in fr)(qc||$r||!(kr in Hr))&&Fi(Hr,kr,fr[kr]);else xn({target:he,proto:!0,forced:qc||$r},fr);return er&&Hr[Tu]!==vn&&Fi(Hr,Tu,vn,{name:Ce}),bc[he]=vn,fr};ja.f;var Hc="Array Iterator",nS=hi.set,fy=hi.getterFor(Hc);ig(Array,"Array",function(_e,he){nS(this,{type:Hc,target:wr(_e),index:0,kind:he})},function(){var _e=fy(this),he=_e.target,Ue=_e.kind,$e=_e.index++;return!he||$e>=he.length?(_e.target=void 0,{value:void 0,done:!0}):Ue=="keys"?{value:$e,done:!1}:Ue=="values"?{value:he[$e],done:!1}:{value:[$e,he[$e]],done:!1}},"values"),bc.Arguments=bc.Array;var gy=Co("toStringTag");for(var zc in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Sc=$[zc],Kp=Sc&&Sc.prototype;Kp&&Rl(Kp)!==gy&&Ma(Kp,gy,zc),bc[zc]=bc.Array}var Yi=Array.isArray||function(he){return nr(he)=="Array"},vi=Ne(Function.toString);Ve(kn.inspectSource)||(kn.inspectSource=function(_e){return vi(_e)});var cg=kn.inspectSource,hy=function(){},lg=[],vy=Pr("Reflect","construct"),Xi=/^\s*(?:class|function)\b/,ug=Ne(Xi.exec),yy=!Xi.exec(hy),wd=function(he){if(!Ve(he))return!1;try{return vy(hy,lg,he),!0}catch{return!1}},dg=function(he){if(!Ve(he))return!1;switch(Rl(he)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return yy||!!ug(Xi,cg(he))}catch{return!0}};dg.sham=!0;var Qp=!vy||V(function(){var _e;return wd(wd.call)||!wd(Object)||!wd(function(){_e=!0})||_e})?dg:wd,oS=Co("species"),pg=Array,Tc=function(_e,he){return new(function(Ue){var $e;return Yi(Ue)&&($e=Ue.constructor,(Qp($e)&&($e===pg||Yi($e.prototype))||mr($e)&&($e=$e[oS])===null)&&($e=void 0)),$e===void 0?pg:$e}(_e))(he===0?0:he)},by=Ne([].push),Wc=function(_e){var he=_e==1,Ue=_e==2,$e=_e==3,Ce=_e==4,Lt=_e==6,er=_e==7,rr=_e==5||Lt;return function(fr,kr,Er,Rr){for(var $r,Hr,Gr=Pn(fr),vn=gr(Gr),bn=Ho(kr,Er),In=ns(vn),Cn=0,Kn=Rr||Tc,Qn=he?Kn(fr,In):Ue||er?Kn(fr,0):void 0;In>Cn;Cn++)if((rr||Cn in vn)&&(Hr=bn($r=vn[Cn],Cn,Gr),_e))if(he)Qn[Cn]=Hr;else if(Hr)switch(_e){case 3:return!0;case 5:return $r;case 6:return Cn;case 2:by(Qn,$r)}else switch(_e){case 4:return!1;case 7:by(Qn,$r)}return Lt?-1:$e||Ce?Ce:Qn}},Gc={forEach:Wc(0),map:Wc(1),filter:Wc(2),some:Wc(3),every:Wc(4),find:Wc(5),findIndex:Wc(6),filterReject:Wc(7)},Zi=function(_e,he){var Ue=[][_e];return!!Ue&&V(function(){Ue.call(null,he||function(){return 1},1)})},fg=Gc.forEach,mg=Zi("forEach")?[].forEach:function(he){return fg(this,he,arguments.length>1?arguments[1]:void 0)};xn({target:"Array",proto:!0,forced:[].forEach!=mg},{forEach:mg});var Jp=da("Array").forEach,Yp=Array.prototype,aS={DOMTokenList:!0,NodeList:!0},So=function(_e){var he=_e.forEach;return _e===Yp||sr(Yp,_e)&&he===Yp.forEach||Rn(aS,Rl(_e))?Jp:he},Sy=Co("species"),_d=function(_e){return Br>=51||!V(function(){var he=[];return(he.constructor={})[Sy]=function(){return{foo:1}},he[_e](Boolean).foo!==1})},sS=Gc.filter,ec=_d("filter");xn({target:"Array",proto:!0,forced:!ec},{filter:function(he){return sS(this,he,arguments.length>1?arguments[1]:void 0)}});var Ty=da("Array").filter,Xp=Array.prototype,Ss=function(_e){var he=_e.filter;return _e===Xp||sr(Xp,_e)&&he===Xp.filter?Ty:he},gg=V(function(){Ds(1)});xn({target:"Object",stat:!0,forced:gg},{keys:function(he){return Ds(Pn(he))}});var fa=_r.Object.keys,Cy=md.indexOf,Zp=Ne([].indexOf),My=!!Zp&&1/Zp([1],1,-0)<0,ky=Zi("indexOf");xn({target:"Array",proto:!0,forced:My||!ky},{indexOf:function(he){var Ue=arguments.length>1?arguments[1]:void 0;return My?Zp(this,he,Ue)||0:Cy(this,he,Ue)}});var hg=da("Array").indexOf,vg=Array.prototype,Ja=function(_e){var he=_e.indexOf;return _e===vg||sr(vg,_e)&&he===vg.indexOf?hg:he},$i=function(_e,he,Ue){var $e=Ca(he);$e in _e?ja.f(_e,$e,or(0,Ue)):_e[$e]=Ue},wy=_d("slice"),xd=Co("species"),Kc=Array,_y=Math.max;xn({target:"Array",proto:!0,forced:!wy},{slice:function(he,Ue){var $e,Ce,Lt,er=wr(this),rr=ns(er),fr=Ri(he,rr),kr=Ri(Ue===void 0?rr:Ue,rr);if(Yi(er)&&($e=er.constructor,(Qp($e)&&($e===Kc||Yi($e.prototype))||mr($e)&&($e=$e[xd])===null)&&($e=void 0),$e===Kc||$e===void 0))return Us(er,fr,kr);for(Ce=new($e===void 0?Kc:$e)(_y(kr-fr,0)),Lt=0;fr<kr;fr++,Lt++)fr in er&&$i(Ce,Lt,er[fr]);return Ce.length=Lt,Ce}});var yg=da("Array").slice,Cu=Array.prototype,Pa=function(_e){var he=_e.slice;return _e===Cu||sr(Cu,_e)&&he===Cu.slice?yg:he},ef=Il.concat("length","prototype"),Id={f:Object.getOwnPropertyNames||function(he){return qm(he,ef)}},ji=Ne([].concat),iS=Pr("Reflect","ownKeys")||function(he){var Ue=Id.f(lo(he)),$e=yc.f;return $e?ji(Ue,$e(he)):Ue},bg=Error,xy=Ne("".replace),Sg=String(bg("zxcasd").stack),tf=/\n\s*at [^:]*:[^\n]*/,cS=tf.test(Sg),Tg=function(_e,he){if(cS&&typeof _e=="string"&&!bg.prepareStackTrace)for(;he--;)_e=xy(_e,tf,"");return _e},lS=function(_e,he){mr(he)&&"cause"in he&&Ma(_e,"cause",he.cause)},Iy=Co("iterator"),uS=Array.prototype,rf=function(_e){return _e!==void 0&&(bc.Array===_e||uS[Iy]===_e)},Ed=Co("iterator"),nf=function(_e){if(!pr(_e))return Wn(_e,Ed)||Wn(_e,"@@iterator")||bc[Rl(_e)]},Cg=TypeError,Mu=function(_e,he){var Ue=arguments.length<2?nf(_e):he;if(Xr(Ue))return lo(kt(Ue,_e));throw Cg(Sn(_e)+" is not iterable")},of=function(_e,he,Ue){var $e,Ce;lo(_e);try{if(!($e=Wn(_e,"return"))){if(he==="throw")throw Ue;return Ue}$e=kt($e,_e)}catch(Lt){Ce=!0,$e=Lt}if(he==="throw")throw Ue;if(Ce)throw $e;return lo($e),Ue},Ey=TypeError,Qc=function(_e,he){this.stopped=_e,this.result=he},Jc=Qc.prototype,Va=function(_e,he,Ue){var $e,Ce,Lt,er,rr,fr,kr,Er=Ue&&Ue.that,Rr=!(!Ue||!Ue.AS_ENTRIES),$r=!(!Ue||!Ue.IS_RECORD),Hr=!(!Ue||!Ue.IS_ITERATOR),Gr=!(!Ue||!Ue.INTERRUPTED),vn=Ho(he,Er),bn=function(Cn){return $e&&of($e,"normal",Cn),new Qc(!0,Cn)},In=function(Cn){return Rr?(lo(Cn),Gr?vn(Cn[0],Cn[1],bn):vn(Cn[0],Cn[1])):Gr?vn(Cn,bn):vn(Cn)};if($r)$e=_e.iterator;else if(Hr)$e=_e;else{if(!(Ce=nf(_e)))throw Ey(Sn(_e)+" is not iterable");if(rf(Ce)){for(Lt=0,er=ns(_e);er>Lt;Lt++)if((rr=In(_e[Lt]))&&sr(Jc,rr))return rr;return new Qc(!1)}$e=Mu(_e,Ce)}for(fr=$r?_e.next:$e.next;!(kr=kt(fr,$e)).done;){try{rr=In(kr.value)}catch(Cn){of($e,"throw",Cn)}if(typeof rr=="object"&&rr&&sr(Jc,rr))return rr}return new Qc(!1)},ku=String,Xs=function(_e){if(Rl(_e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return ku(_e)},Mg=function(_e,he){return _e===void 0?arguments.length<2?"":he:Xs(_e)},kg=!V(function(){var _e=Error("a");return!("stack"in _e)||(Object.defineProperty(_e,"stack",or(1,7)),_e.stack!==7)}),Py=Co("toStringTag"),Pd=Error,dS=[].push,Ad=function(he,Ue){var $e,Ce=arguments.length>2?arguments[2]:void 0,Lt=sr(wg,this);vc?$e=vc(Pd(),Lt?Su(this):wg):($e=Lt?this:os(wg),Ma($e,Py,"Error")),Ue!==void 0&&Ma($e,"message",Mg(Ue)),kg&&Ma($e,"stack",Tg($e.stack,1)),lS($e,Ce);var er=[];return Va(he,dS,{that:er}),Ma($e,"errors",er),$e};vc?vc(Ad,Pd):function(_e,he,Ue){for(var $e=iS(he),Ce=ja.f,Lt=$a.f,er=0;er<$e.length;er++){var rr=$e[er];Rn(_e,rr)||Ue&&Rn(Ue,rr)||Ce(_e,rr,Lt(he,rr))}}(Ad,Pd,{name:!0});var wg=Ad.prototype=os(Pd.prototype,{constructor:or(1,Ad),message:or(1,""),name:or(1,"AggregateError")});xn({global:!0,constructor:!0,arity:2},{AggregateError:Ad});var Ll,Fl,_g,af,ui=nr($.process)=="process",xg=Co("species"),Ig=function(_e){var he=Pr(_e),Ue=ja.f;ze&&he&&!he[xg]&&Ue(he,xg,{configurable:!0,get:function(){return this}})},Eg=TypeError,Yc=function(_e,he){if(sr(he,_e))return _e;throw Eg("Incorrect invocation")},Ay=TypeError,wu=function(_e){if(Qp(_e))return _e;throw Ay(Sn(_e)+" is not a constructor")},Ny=Co("species"),Nd=function(_e,he){var Ue,$e=lo(_e).constructor;return $e===void 0||pr(Ue=lo($e)[Ny])?he:wu(Ue)},Vs=TypeError,Pg=function(_e,he){if(_e<he)throw Vs("Not enough arguments");return _e},Oy=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ir),sf=$.setImmediate,Ag=$.clearImmediate,Ry=$.process,cf=$.Dispatch,pS=$.Function,$l=$.MessageChannel,fS=$.String,Ng=0,di={},By="onreadystatechange";try{Ll=$.location}catch{}var _u=function(_e){if(Rn(di,_e)){var he=di[_e];delete di[_e],he()}},lf=function(_e){return function(){_u(_e)}},Ly=function(_e){_u(_e.data)},uf=function(_e){$.postMessage(fS(_e),Ll.protocol+"//"+Ll.host)};sf&&Ag||(sf=function(he){Pg(arguments.length,1);var Ue=Ve(he)?he:pS(he),$e=Us(arguments,1);return di[++Ng]=function(){ue(Ue,void 0,$e)},Fl(Ng),Ng},Ag=function(he){delete di[he]},ui?Fl=function(_e){Ry.nextTick(lf(_e))}:cf&&cf.now?Fl=function(_e){cf.now(lf(_e))}:$l&&!Oy?(af=(_g=new $l).port2,_g.port1.onmessage=Ly,Fl=Ho(af.postMessage,af)):$.addEventListener&&Ve($.postMessage)&&!$.importScripts&&Ll&&Ll.protocol!=="file:"&&!V(uf)?(Fl=uf,$.addEventListener("message",Ly,!1)):Fl=By in Zo("script")?function(_e){gd.appendChild(Zo("script")).onreadystatechange=function(){gd.removeChild(this),_u(_e)}}:function(_e){setTimeout(lf(_e),0)});var Od,jl,Cc,Xc,df,Rd,Bd,pf,Fy={set:sf,clear:Ag},mS=/ipad|iphone|ipod/i.test(Ir)&&$.Pebble!==void 0,$y=/web0s(?!.*chrome)/i.test(Ir),jy=$a.f,ff=Fy.set,Og=$.MutationObserver||$.WebKitMutationObserver,Rg=$.document,Dy=$.process,Ld=$.Promise,Uy=jy($,"queueMicrotask"),Dl=Uy&&Uy.value;Dl||(Od=function(){var _e,he;for(ui&&(_e=Dy.domain)&&_e.exit();jl;){he=jl.fn,jl=jl.next;try{he()}catch(Ue){throw jl?Xc():Cc=void 0,Ue}}Cc=void 0,_e&&_e.enter()},Oy||ui||$y||!Og||!Rg?!mS&&Ld&&Ld.resolve?((Bd=Ld.resolve(void 0)).constructor=Ld,pf=Ho(Bd.then,Bd),Xc=function(){pf(Od)}):ui?Xc=function(){Dy.nextTick(Od)}:(ff=Ho(ff,$),Xc=function(){ff(Od)}):(df=!0,Rd=Rg.createTextNode(""),new Og(Od).observe(Rd,{characterData:!0}),Xc=function(){Rd.data=df=!df}));var Zc=Dl||function(_e){var he={fn:_e,next:void 0};Cc&&(Cc.next=he),jl||(jl=he,Xc()),Cc=he},el=function(_e){try{return{error:!1,value:_e()}}catch(he){return{error:!0,value:he}}},Bg=function(){this.head=null,this.tail=null};Bg.prototype={add:function(_e){var he={item:_e,next:null};this.head?this.tail.next=he:this.head=he,this.tail=he},get:function(){var _e=this.head;if(_e)return this.head=_e.next,this.tail===_e&&(this.tail=null),_e.item}};var mf,Vy,qy=Bg,Ns=$.Promise,Lg=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",gS=!Lg&&!ui&&typeof window=="object"&&typeof document=="object",gf=Ns&&Ns.prototype,hS=Co("species"),Hy=!1,zy=Ve($.PromiseRejectionEvent),Wy=ta("Promise",function(){var _e=cg(Ns),he=_e!==String(Ns);if(!he&&Br===66||!gf.catch||!gf.finally)return!0;if(!Br||Br<51||!/native code/.test(_e)){var Ue=new Ns(function(Ce){Ce(1)}),$e=function(Ce){Ce(function(){},function(){})};if((Ue.constructor={})[hS]=$e,!(Hy=Ue.then(function(){})instanceof $e))return!0}return!he&&(gS||Lg)&&!zy}),xu={CONSTRUCTOR:Wy,REJECTION_EVENT:zy,SUBCLASSING:Hy},vS=TypeError,yS=function(_e){var he,Ue;this.promise=new _e(function($e,Ce){if(he!==void 0||Ue!==void 0)throw vS("Bad Promise constructor");he=$e,Ue=Ce}),this.resolve=Xr(he),this.reject=Xr(Ue)},tc={f:function(_e){return new yS(_e)}},Gy=Fy.set,Fd="Promise",Ky=xu.CONSTRUCTOR,Qy=xu.REJECTION_EVENT,Fg=hi.getterFor(Fd),bS=hi.set,SS=Ns&&Ns.prototype,Iu=Ns,$d=SS,$g=$.TypeError,jd=$.document,jg=$.process,ca=tc.f,Jy=ca,TS=!!(jd&&jd.createEvent&&$.dispatchEvent),_s="unhandledrejection",rc=function(_e){var he;return!(!mr(_e)||!Ve(he=_e.then))&&he},Yy=function(_e,he){var Ue,$e,Ce,Lt=he.value,er=he.state==1,rr=er?_e.ok:_e.fail,fr=_e.resolve,kr=_e.reject,Er=_e.domain;try{rr?(er||(he.rejection===2&&Ug(he),he.rejection=1),rr===!0?Ue=Lt:(Er&&Er.enter(),Ue=rr(Lt),Er&&(Er.exit(),Ce=!0)),Ue===_e.promise?kr($g("Promise-chain cycle")):($e=rc(Ue))?kt($e,Ue,fr,kr):fr(Ue)):kr(Lt)}catch(Rr){Er&&!Ce&&Er.exit(),kr(Rr)}},hf=function(_e,he){_e.notified||(_e.notified=!0,Zc(function(){for(var Ue,$e=_e.reactions;Ue=$e.get();)Yy(Ue,_e);_e.notified=!1,he&&!_e.rejection&&CS(_e)}))},tl=function(_e,he,Ue){var $e,Ce;TS?(($e=jd.createEvent("Event")).promise=he,$e.reason=Ue,$e.initEvent(_e,!1,!0),$.dispatchEvent($e)):$e={promise:he,reason:Ue},!Qy&&(Ce=$["on"+_e])?Ce($e):_e===_s&&function(Lt,er){var rr=$.console;rr&&rr.error&&(arguments.length==1?rr.error(Lt):rr.error(Lt,er))}("Unhandled promise rejection",Ue)},CS=function(_e){kt(Gy,$,function(){var he,Ue=_e.facade,$e=_e.value;if(Dg(_e)&&(he=el(function(){ui?jg.emit("unhandledRejection",$e,Ue):tl(_s,Ue,$e)}),_e.rejection=ui||Dg(_e)?2:1,he.error))throw he.value})},Dg=function(_e){return _e.rejection!==1&&!_e.parent},Ug=function(_e){kt(Gy,$,function(){var he=_e.facade;ui?jg.emit("rejectionHandled",he):tl("rejectionhandled",he,_e.value)})},Eu=function(_e,he,Ue){return function($e){_e(he,$e,Ue)}},nc=function(_e,he,Ue){_e.done||(_e.done=!0,Ue&&(_e=Ue),_e.value=he,_e.state=2,hf(_e,!0))},vf=function(_e,he,Ue){if(!_e.done){_e.done=!0,Ue&&(_e=Ue);try{if(_e.facade===he)throw $g("Promise can't be resolved itself");var $e=rc(he);$e?Zc(function(){var Ce={done:!1};try{kt($e,he,Eu(vf,Ce,_e),Eu(nc,Ce,_e))}catch(Lt){nc(Ce,Lt,_e)}}):(_e.value=he,_e.state=1,hf(_e,!1))}catch(Ce){nc({done:!1},Ce,_e)}}};Ky&&($d=(Iu=function(he){Yc(this,$d),Xr(he),kt(mf,this);var Ue=Fg(this);try{he(Eu(vf,Ue),Eu(nc,Ue))}catch($e){nc(Ue,$e)}}).prototype,(mf=function(he){bS(this,{type:Fd,done:!1,notified:!1,parent:!1,reactions:new qy,rejection:!1,state:0,value:void 0})}).prototype=Fi($d,"then",function(he,Ue){var $e=Fg(this),Ce=ca(Nd(this,Iu));return $e.parent=!0,Ce.ok=!Ve(he)||he,Ce.fail=Ve(Ue)&&Ue,Ce.domain=ui?jg.domain:void 0,$e.state==0?$e.reactions.add(Ce):Zc(function(){Yy(Ce,$e)}),Ce.promise}),Vy=function(){var _e=new mf,he=Fg(_e);this.promise=_e,this.resolve=Eu(vf,he),this.reject=Eu(nc,he)},tc.f=ca=function(_e){return _e===Iu||_e===void 0?new Vy(_e):Jy(_e)}),xn({global:!0,constructor:!0,wrap:!0,forced:Ky},{Promise:Iu}),Bl(Iu,Fd,!1,!0),Ig(Fd);var Xy=Co("iterator"),Zy=!1;try{var MS=0,eb={next:function(){return{done:!!MS++}},return:function(){Zy=!0}};eb[Xy]=function(){return this},Array.from(eb,function(){throw 2})}catch{}var yf=function(_e,he){if(!he&&!Zy)return!1;var Ue=!1;try{var $e={};$e[Xy]=function(){return{next:function(){return{done:Ue=!0}}}},_e($e)}catch{}return Ue},qs=xu.CONSTRUCTOR||!yf(function(_e){Ns.all(_e).then(void 0,function(){})});xn({target:"Promise",stat:!0,forced:qs},{all:function(he){var Ue=this,$e=tc.f(Ue),Ce=$e.resolve,Lt=$e.reject,er=el(function(){var rr=Xr(Ue.resolve),fr=[],kr=0,Er=1;Va(he,function(Rr){var $r=kr++,Hr=!1;Er++,kt(rr,Ue,Rr).then(function(Gr){Hr||(Hr=!0,fr[$r]=Gr,--Er||Ce(fr))},Lt)}),--Er||Ce(fr)});return er.error&&Lt(er.value),$e.promise}});var kS=xu.CONSTRUCTOR;Ns&&Ns.prototype,xn({target:"Promise",proto:!0,forced:kS,real:!0},{catch:function(_e){return this.then(void 0,_e)}}),xn({target:"Promise",stat:!0,forced:qs},{race:function(he){var Ue=this,$e=tc.f(Ue),Ce=$e.reject,Lt=el(function(){var er=Xr(Ue.resolve);Va(he,function(rr){kt(er,Ue,rr).then($e.resolve,Ce)})});return Lt.error&&Ce(Lt.value),$e.promise}}),xn({target:"Promise",stat:!0,forced:xu.CONSTRUCTOR},{reject:function(he){var Ue=tc.f(this);return kt(Ue.reject,void 0,he),Ue.promise}});var Vg=function(_e,he){if(lo(_e),mr(he)&&he.constructor===_e)return he;var Ue=tc.f(_e);return(0,Ue.resolve)(he),Ue.promise},tb=xu.CONSTRUCTOR,rb=Pr("Promise"),nb=!tb;xn({target:"Promise",stat:!0,forced:!0},{resolve:function(he){return Vg(nb&&this===rb?Ns:this,he)}}),xn({target:"Promise",stat:!0},{allSettled:function(he){var Ue=this,$e=tc.f(Ue),Ce=$e.resolve,Lt=$e.reject,er=el(function(){var rr=Xr(Ue.resolve),fr=[],kr=0,Er=1;Va(he,function(Rr){var $r=kr++,Hr=!1;Er++,kt(rr,Ue,Rr).then(function(Gr){Hr||(Hr=!0,fr[$r]={status:"fulfilled",value:Gr},--Er||Ce(fr))},function(Gr){Hr||(Hr=!0,fr[$r]={status:"rejected",reason:Gr},--Er||Ce(fr))})}),--Er||Ce(fr)});return er.error&&Lt(er.value),$e.promise}});var qg="No one promise resolved";xn({target:"Promise",stat:!0},{any:function(he){var Ue=this,$e=Pr("AggregateError"),Ce=tc.f(Ue),Lt=Ce.resolve,er=Ce.reject,rr=el(function(){var fr=Xr(Ue.resolve),kr=[],Er=0,Rr=1,$r=!1;Va(he,function(Hr){var Gr=Er++,vn=!1;Rr++,kt(fr,Ue,Hr).then(function(bn){vn||$r||($r=!0,Lt(bn))},function(bn){vn||$r||(vn=!0,kr[Gr]=bn,--Rr||er(new $e(kr,qg)))})}),--Rr||er(new $e(kr,qg))});return rr.error&&er(rr.value),Ce.promise}});var Di=Ns&&Ns.prototype,Hg=!!Ns&&V(function(){Di.finally.call({then:function(){}},function(){})});xn({target:"Promise",proto:!0,real:!0,forced:Hg},{finally:function(_e){var he=Nd(this,Pr("Promise")),Ue=Ve(_e);return this.then(Ue?function($e){return Vg(he,_e()).then(function(){return $e})}:_e,Ue?function($e){return Vg(he,_e()).then(function(){throw $e})}:_e)}});var ob=Ne("".charAt),ab=Ne("".charCodeAt),Dd=Ne("".slice),zg=function(_e){return function(he,Ue){var $e,Ce,Lt=Xs(Sr(he)),er=hc(Ue),rr=Lt.length;return er<0||er>=rr?_e?"":void 0:($e=ab(Lt,er))<55296||$e>56319||er+1===rr||(Ce=ab(Lt,er+1))<56320||Ce>57343?_e?ob(Lt,er):$e:_e?Dd(Lt,er,er+2):Ce-56320+($e-55296<<10)+65536}},rl={codeAt:zg(!1),charAt:zg(!0)}.charAt,Mc="String Iterator",Ul=hi.set,wS=hi.getterFor(Mc);ig(String,"String",function(_e){Ul(this,{type:Mc,string:Xs(_e),index:0})},function(){var he,Ue=wS(this),$e=Ue.string,Ce=Ue.index;return Ce>=$e.length?{value:void 0,done:!0}:(he=rl($e,Ce),Ue.index+=he.length,{value:he,done:!1})});var sb=_r.Promise;xn({target:"Promise",stat:!0,forced:!0},{try:function(_e){var he=tc.f(this),Ue=el(_e);return(Ue.error?he.reject:he.resolve)(Ue.value),he.promise}});var ka=sb,bf=Date,_S=Ne(bf.prototype.getTime);xn({target:"Date",stat:!0},{now:function(){return _S(new bf)}});var To=_r.Date.now,xS=TypeError,Sa=function(_e){if(_e>9007199254740991)throw xS("Maximum allowed index exceeded");return _e},ib=Co("isConcatSpreadable"),IS=Br>=51||!V(function(){var _e=[];return _e[ib]=!1,_e.concat()[0]!==_e}),ES=_d("concat"),Wg=function(_e){if(!mr(_e))return!1;var he=_e[ib];return he!==void 0?!!he:Yi(_e)};xn({target:"Array",proto:!0,arity:1,forced:!IS||!ES},{concat:function(he){var Ue,$e,Ce,Lt,er,rr=Pn(this),fr=Tc(rr,0),kr=0;for(Ue=-1,Ce=arguments.length;Ue<Ce;Ue++)if(Wg(er=Ue===-1?rr:arguments[Ue]))for(Lt=ns(er),Sa(kr+Lt),$e=0;$e<Lt;$e++,kr++)$e in er&&$i(fr,kr,er[$e]);else Sa(kr+1),$i(fr,kr++,er);return fr.length=kr,fr}});var pi=da("Array").concat,Gg=Array.prototype,Os=function(_e){var he=_e.concat;return _e===Gg||sr(Gg,_e)&&he===Gg.concat?pi:he},Kg=/MSIE .\./.test(Ir),PS=$.Function,cb=function(_e){return Kg?function(he,Ue){var $e=Pg(arguments.length,1)>2,Ce=Ve(he)?he:PS(he),Lt=$e?Us(arguments,2):void 0;return _e($e?function(){ue(Ce,this,Lt)}:Ce,Ue)}:_e},Sf={setTimeout:cb($.setTimeout),setInterval:cb($.setInterval)},qa=Sf.setInterval;xn({global:!0,bind:!0,forced:$.setInterval!==qa},{setInterval:qa});var lb=Sf.setTimeout;xn({global:!0,bind:!0,forced:$.setTimeout!==lb},{setTimeout:lb});var yi=_r.setTimeout,Tf=g(function(_e){var he=Object.prototype.hasOwnProperty,Ue="~";function $e(){}function Ce(fr,kr,Er){this.fn=fr,this.context=kr,this.once=Er||!1}function Lt(fr,kr,Er,Rr,$r){if(typeof Er!="function")throw new TypeError("The listener must be a function");var Hr=new Ce(Er,Rr||fr,$r),Gr=Ue?Ue+kr:kr;return fr._events[Gr]?fr._events[Gr].fn?fr._events[Gr]=[fr._events[Gr],Hr]:fr._events[Gr].push(Hr):(fr._events[Gr]=Hr,fr._eventsCount++),fr}function er(fr,kr){--fr._eventsCount==0?fr._events=new $e:delete fr._events[kr]}function rr(){this._events=new $e,this._eventsCount=0}Object.create&&($e.prototype=Object.create(null),new $e().__proto__||(Ue=!1)),rr.prototype.eventNames=function(){var kr,Er,Rr=[];if(this._eventsCount===0)return Rr;for(Er in kr=this._events)he.call(kr,Er)&&Rr.push(Ue?Er.slice(1):Er);return Object.getOwnPropertySymbols?Rr.concat(Object.getOwnPropertySymbols(kr)):Rr},rr.prototype.listeners=function(kr){var Er=Ue?Ue+kr:kr,Rr=this._events[Er];if(!Rr)return[];if(Rr.fn)return[Rr.fn];for(var $r=0,Hr=Rr.length,Gr=new Array(Hr);$r<Hr;$r++)Gr[$r]=Rr[$r].fn;return Gr},rr.prototype.listenerCount=function(kr){var Er=Ue?Ue+kr:kr,Rr=this._events[Er];return Rr?Rr.fn?1:Rr.length:0},rr.prototype.emit=function(kr,Er,Rr,$r,Hr,Gr){var vn=Ue?Ue+kr:kr;if(!this._events[vn])return!1;var bn,In,Cn=this._events[vn],Kn=arguments.length;if(Cn.fn){switch(Cn.once&&this.removeListener(kr,Cn.fn,void 0,!0),Kn){case 1:return Cn.fn.call(Cn.context),!0;case 2:return Cn.fn.call(Cn.context,Er),!0;case 3:return Cn.fn.call(Cn.context,Er,Rr),!0;case 4:return Cn.fn.call(Cn.context,Er,Rr,$r),!0;case 5:return Cn.fn.call(Cn.context,Er,Rr,$r,Hr),!0;case 6:return Cn.fn.call(Cn.context,Er,Rr,$r,Hr,Gr),!0}for(In=1,bn=new Array(Kn-1);In<Kn;In++)bn[In-1]=arguments[In];Cn.fn.apply(Cn.context,bn)}else{var Qn,Mo=Cn.length;for(In=0;In<Mo;In++)switch(Cn[In].once&&this.removeListener(kr,Cn[In].fn,void 0,!0),Kn){case 1:Cn[In].fn.call(Cn[In].context);break;case 2:Cn[In].fn.call(Cn[In].context,Er);break;case 3:Cn[In].fn.call(Cn[In].context,Er,Rr);break;case 4:Cn[In].fn.call(Cn[In].context,Er,Rr,$r);break;default:if(!bn)for(Qn=1,bn=new Array(Kn-1);Qn<Kn;Qn++)bn[Qn-1]=arguments[Qn];Cn[In].fn.apply(Cn[In].context,bn)}}return!0},rr.prototype.on=function(kr,Er,Rr){return Lt(this,kr,Er,Rr,!1)},rr.prototype.once=function(kr,Er,Rr){return Lt(this,kr,Er,Rr,!0)},rr.prototype.removeListener=function(kr,Er,Rr,$r){var Hr=Ue?Ue+kr:kr;if(!this._events[Hr])return this;if(!Er)return er(this,Hr),this;var Gr=this._events[Hr];if(Gr.fn)Gr.fn!==Er||$r&&!Gr.once||Rr&&Gr.context!==Rr||er(this,Hr);else{for(var vn=0,bn=[],In=Gr.length;vn<In;vn++)(Gr[vn].fn!==Er||$r&&!Gr[vn].once||Rr&&Gr[vn].context!==Rr)&&bn.push(Gr[vn]);bn.length?this._events[Hr]=bn.length===1?bn[0]:bn:er(this,Hr)}return this},rr.prototype.removeAllListeners=function(kr){var Er;return kr?(Er=Ue?Ue+kr:kr,this._events[Er]&&er(this,Er)):(this._events=new $e,this._eventsCount=0),this},rr.prototype.off=rr.prototype.removeListener,rr.prototype.addListener=rr.prototype.on,rr.prefixed=Ue,rr.EventEmitter=rr,_e.exports=rr});xn({global:!0},{globalThis:$});var Cf=ja.f;xn({target:"Object",stat:!0,forced:Object.defineProperty!==Cf,sham:!ze},{defineProperty:Cf});var ub=g(function(_e){var he=_r.Object,Ue=_e.exports=function(Ce,Lt,er){return he.defineProperty(Ce,Lt,er)};he.defineProperty.sham&&(Ue.sham=!0)}),Pu=ub,Qg=g(function(_e,he){_e.exports=function(){function Ue(fr,kr){if(!(fr instanceof kr))throw new TypeError("Cannot call a class as a function")}function $e(fr,kr){for(var Er=0;Er<kr.length;Er++){var Rr=kr[Er];Rr.enumerable=Rr.enumerable||!1,Rr.configurable=!0,"value"in Rr&&(Rr.writable=!0),Pu(fr,Rr.key,Rr)}}function Ce(fr,kr,Er){return kr&&$e(fr.prototype,kr),Er&&$e(fr,Er),Pu(fr,"prototype",{writable:!1}),fr}var Lt={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},er=function(){},rr=function(){function fr(kr){Ue(this,fr),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Lt,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=To(),this.timer=null,this.setConfig(kr),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}return Ce(fr,[{key:"setConfig",value:function(Er){var Rr=Gn({},this.reportConfig.common,Er.common);this.reportConfig=Gn({},this.reportConfig,Er),this.reportConfig.common=Rr,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(Er,Rr){var $r=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(Er,Gn({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Rr)).catch(function(Hr){var Gr,vn;(vn=(Gr=$r.reportConfig)===null||Gr===void 0?void 0:Gr.logger)===null||vn===void 0||vn.warn("Reporter immediately upload failed",Hr)})}},{key:"report",value:function(Er,Rr){var $r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if($r.priority||($r.priority=this.getEventPriority(Er,Rr)),this.reportConfig.isDataReportEnable&&Er){var Hr=To();$r.priority==="HIGH"?this.highPriorityMsgList.push({module:Er,msg:Rr,createTime:Hr}):$r.priority==="NORMAL"?this.msgList.push({module:Er,msg:Rr,createTime:Hr}):$r.priority==="LOW"&&this.lowPriorityMsgList.push({module:Er,msg:Rr,createTime:Hr}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(Er,Rr){if(this.reportConfig.isDataReportEnable&&Er&&!this.traceMsgCache[Er]){var $r=Gn(Gn({start_time:To()},Rr),{extension:[]});this.traceMsgCache[Er]=$r}}},{key:"reportTraceUpdate",value:function(Er){}},{key:"reportTraceUpdateV2",value:function(Er,Rr,$r){var Hr,Gr=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Er]){var vn=this.traceMsgCache[Er].extension,bn=vn.length,In=new Date().getTime();bn===0?Rr.duration=In-this.traceMsgCache[Er].start_time:vn[bn-1].end_time?Rr.duration=In-vn[bn-1].end_time:Rr.duration=In-this.traceMsgCache[Er].start_time,vn.push(Gn({end_time:In},Rr));var Cn=vn.length-1;$r!=null&&$r.asyncParams&&((Hr=this.traceMsgCache[Er]).asyncPromiseArray||(Hr.asyncPromiseArray=[]),this.traceMsgCache[Er].asyncPromiseArray.push($r.asyncParams.then(function(Kn){Gr.traceMsgCache[Er]&&Gr.traceMsgCache[Er].extension[Cn]&&Gn(Gr.traceMsgCache[Er].extension[Cn],Kn)})))}}},{key:"reportTraceEnd",value:function(Er){var Rr,$r=this,Hr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Er])if(Er!=="nos"||Hr===!1)if(typeof Hr=="boolean"?this.traceMsgCache[Er].succeed=!!Hr:this.traceMsgCache[Er].state=Hr,this.traceMsgCache[Er].duration=To()-this.traceMsgCache[Er].start_time,So(Rr=this.traceMsgCache[Er].extension).call(Rr,function(bn){delete bn.end_time}),this.traceMsgCache[Er].asyncPromiseArray){var Gr=this.traceMsgCache[Er],vn=function(){Gr===$r.traceMsgCache[Er]&&(delete $r.traceMsgCache[Er].asyncPromiseArray,$r.report(Er,$r.traceMsgCache[Er],{priority:$r.getEventPriority(Er,$r.traceMsgCache[Er])}),$r.traceMsgCache[Er]=null)};ka.all(this.traceMsgCache[Er].asyncPromiseArray).then(vn).catch(vn)}else this.report(Er,this.traceMsgCache[Er],{priority:this.getEventPriority(Er,this.traceMsgCache[Er])}),this.traceMsgCache[Er]=null;else this.traceMsgCache[Er]=null}},{key:"getEventPriority",value:function(Er,Rr){if(Er==="exceptions"){if(Rr.action===0||Rr.action===2||Rr.action===1&&Rr.exception_service!==0)return"HIGH"}else if(Er==="msgReceive"||Er==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(Er){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[Er]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var Er,Rr=this;this.reportConfig.isDataReportEnable&&(So(Er=fa(this.traceMsgCache)).call(Er,function($r){Rr.reportTraceEnd($r,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=er,this.report=er,this.reportTraceStart=er,this.reportTraceUpdate=er,this.reportTraceEnd=er,this.pause=er,this.restore=er,this.destroy=er,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var Er,Rr,$r=this;if(!this.loading){this.loading=!0;var Hr=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:Hr.dev_id,sdkVer:Hr.sdk_ver,platform:Hr.platform,appkey:Hr.app_key},timeout:this.reportConfig.timeout}).then(function(Gr){var vn,bn;if(!$r.isDestroyed){if(Gr.status===200&&Gr.data&&Gr.data.code===200){var In=Gr.data.data||{};$r.reportConfig.maxSize=In.maxSize>1e3?1e3:In.maxSize,$r.reportConfig.maxInterval=In.maxInterval>1e4?1e4:In.maxInterval,$r.reportConfig.maxInterval=In.maxInterval<10?10:In.maxInterval,$r.reportConfig.minInterval=In.minInterval<2?2:In.minInterval,$r.reportConfig.maxDelay=In.maxDelay||300,$r.reportConfig.maxInterval=1e3*$r.reportConfig.maxInterval,$r.reportConfig.minInterval=1e3*$r.reportConfig.minInterval,$r.reportConfig.maxDelay=1e3*$r.reportConfig.maxDelay,$r.isUploadEnable=!0,$r.initConfigLoaded=!0,$r.loading=!1,$r.reportHeartBeat()}(bn=(vn=$r.reportConfig)===null||vn===void 0?void 0:vn.logger)===null||bn===void 0||bn.log("Get reporter upload config success")}}).catch(function(Gr){var vn,bn;$r.loading=!1,(bn=(vn=$r.reportConfig)===null||vn===void 0?void 0:vn.logger)===null||bn===void 0||bn.error("Get reporter upload config failed",Gr)})}catch(Gr){this.loading=!1,(Rr=(Er=this.reportConfig)===null||Er===void 0?void 0:Er.logger)===null||Rr===void 0||Rr.error("Exec reporter request failed",Gr)}}}},{key:"reportHeartBeat",value:function(){var Er=this;this.isDestroyed||(this.timer=yi(function(){Er.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var Er=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;To()-this.lastReportTime>=Er&&this.upload()}}},{key:"getUploadMsg",value:function(){var Er,Rr,$r,Hr,Gr,vn,bn=this,In={},Cn=To();this.highPriorityMsgList=Ss(Er=this.highPriorityMsgList).call(Er,function(On){return Cn-On.createTime<bn.reportConfig.maxDelay}),this.msgList=Ss(Rr=this.msgList).call(Rr,function(On){return Cn-On.createTime<bn.reportConfig.maxDelay}),this.lowPriorityMsgList=Ss($r=this.lowPriorityMsgList).call($r,function(On){return Cn-On.createTime<bn.reportConfig.maxDelay}),this.cacheMsgList=Ss(Hr=this.cacheMsgList).call(Hr,function(On){return Cn-On.createTime<bn.reportConfig.maxDelay});var Kn=Pa(Gr=this.highPriorityMsgList).call(Gr,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=Pa(vn=this.highPriorityMsgList).call(vn,Kn.length),Kn.length<this.reportConfig.maxSize){var Qn,Mo,No=this.reportConfig.maxSize-Kn.length;Kn=Os(Kn).call(Kn,Pa(Qn=this.msgList).call(Qn,0,No)),this.msgList=Pa(Mo=this.msgList).call(Mo,No)}if(Kn.length<this.reportConfig.maxSize){var Ko,Ln,Wr=this.reportConfig.maxSize-Kn.length;Kn=Os(Kn).call(Kn,Pa(Ko=this.lowPriorityMsgList).call(Ko,0,Wr)),this.lowPriorityMsgList=Pa(Ln=this.lowPriorityMsgList).call(Ln,Wr)}if(Kn.length<this.reportConfig.maxSize){var ro,so,Yn=this.reportConfig.maxSize-Kn.length;Kn=Os(Kn).call(Kn,Pa(ro=this.cacheMsgList).call(ro,0,Yn)),this.cacheMsgList=Pa(so=this.cacheMsgList).call(so,Yn)}return So(Kn).call(Kn,function(On){In[On.module]?In[On.module].push(On.msg):In[On.module]=[On.msg]}),{uploadMsgArr:Kn,uploadMsg:In}}},{key:"upload",value:function(){var Er,Rr,$r=this;if(this.isUploadEnable&&!(this.lastReportTime&&To()-this.lastReportTime<this.reportConfig.minInterval)){var Hr=this.getUploadMsg(),Gr=Hr.uploadMsgArr,vn=Hr.uploadMsg;if(Gr.length){this.lastReportTime=To();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:vn},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(bn){var In,Cn,Kn,Qn;$r.cacheMsgList=Pa(In=Os(Cn=$r.cacheMsgList).call(Cn,Gr)).call(In,0,$r.reportConfig.cacheMaxSize),(Qn=(Kn=$r.reportConfig)===null||Kn===void 0?void 0:Kn.logger)===null||Qn===void 0||Qn.warn("Reporter upload failed",bn)})}catch(bn){(Rr=(Er=this.reportConfig)===null||Er===void 0?void 0:Er.logger)===null||Rr===void 0||Rr.warn("Exec reporter request failed",bn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),fr}();return rr}()}),oc=Pr("JSON","stringify"),Mf=Ne(/./.exec),as=Ne("".charAt),db=Ne("".charCodeAt),kf=Ne("".replace),Zs=Ne(1 .toString),wf=/[\uD800-\uDFFF]/g,pb=/^[\uD800-\uDBFF]$/,Jg=/^[\uDC00-\uDFFF]$/,bi=!Lr||V(function(){var _e=Pr("Symbol")();return oc([_e])!="[null]"||oc({a:_e})!="{}"||oc(Object(_e))!="{}"}),nl=V(function(){return oc("\uDF06\uD834")!=='"\\udf06\\ud834"'||oc("\uDEAD")!=='"\\udead"'}),Ud=function(_e,he){var Ue=Us(arguments),$e=he;if((mr(he)||_e!==void 0)&&!Vr(_e))return Yi(he)||(he=function(Ce,Lt){if(Ve($e)&&(Lt=kt($e,this,Ce,Lt)),!Vr(Lt))return Lt}),Ue[1]=he,ue(oc,null,Ue)},AS=function(_e,he,Ue){var $e=as(Ue,he-1),Ce=as(Ue,he+1);return Mf(pb,_e)&&!Mf(Jg,Ce)||Mf(Jg,_e)&&!Mf(pb,$e)?"\\u"+Zs(db(_e,0),16):_e};oc&&xn({target:"JSON",stat:!0,arity:3,forced:bi||nl},{stringify:function(he,Ue,$e){var Ce=Us(arguments),Lt=ue(bi?Ud:oc,null,Ce);return nl&&typeof Lt=="string"?kf(Lt,wf,AS):Lt}}),_r.JSON||(_r.JSON={stringify:JSON.stringify});var Yg=function(he,Ue,$e){return ue(_r.JSON.stringify,null,arguments)},va=Yg,ol=Array,fb=Math.max,Xg=function(_e,he,Ue){for(var $e=ns(_e),Ce=Ri(he,$e),Lt=Ri(Ue===void 0?$e:Ue,$e),er=ol(fb(Lt-Ce,0)),rr=0;Ce<Lt;Ce++,rr++)$i(er,rr,_e[Ce]);return er.length=rr,er},Zg=Id.f,ac=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Vl={f:function(he){return ac&&nr(he)=="Window"?function(Ue){try{return Zg(Ue)}catch{return Xg(ac)}}(he):Zg(wr(he))}},eh={f:Co},th=ja.f,Za=function(_e){var he=_r.Symbol||(_r.Symbol={});Rn(he,_e)||th(he,_e,{value:eh.f(_e)})},_f=function(){var _e=Pr("Symbol"),he=_e&&_e.prototype,Ue=he&&he.valueOf,$e=Co("toPrimitive");he&&!he[$e]&&Fi(he,$e,function(Ce){return kt(Ue,this)},{arity:1})},ql=Gc.forEach,Rs=El("hidden"),Vd="Symbol",mb=hi.set,rh=hi.getterFor(Vd),Si=Object.prototype,al=$.Symbol,Hl=al&&al.prototype,NS=$.TypeError,xf=$.QObject,kc=$a.f,Ui=ja.f,nh=Vl.f,OS=tr.f,gb=Ne([].push),wc=Un("symbols"),qd=Un("op-symbols"),hb=Un("wks"),If=!xf||!xf.prototype||!xf.prototype.findChild,Ef=ze&&V(function(){return os(Ui({},"a",{get:function(){return Ui(this,"a",{value:7}).a}})).a!=7})?function(_e,he,Ue){var $e=kc(Si,he);$e&&delete Si[he],Ui(_e,he,Ue),$e&&_e!==Si&&Ui(Si,he,$e)}:Ui,Pf=function(_e,he){var Ue=wc[_e]=os(Hl);return mb(Ue,{type:Vd,tag:_e,description:he}),ze||(Ue.description=he),Ue},Af=function(he,Ue,$e){he===Si&&Af(qd,Ue,$e),lo(he);var Ce=Ca(Ue);return lo($e),Rn(wc,Ce)?($e.enumerable?(Rn(he,Rs)&&he[Rs][Ce]&&(he[Rs][Ce]=!1),$e=os($e,{enumerable:or(0,!1)})):(Rn(he,Rs)||Ui(he,Rs,or(1,{})),he[Rs][Ce]=!0),Ef(he,Ce,$e)):Ui(he,Ce,$e)},oh=function(he,Ue){lo(he);var $e=wr(Ue),Ce=Ds($e).concat(ah($e));return ql(Ce,function(Lt){ze&&!kt(vb,$e,Lt)||Af(he,Lt,$e[Lt])}),he},vb=function(he){var Ue=Ca(he),$e=kt(OS,this,Ue);return!(this===Si&&Rn(wc,Ue)&&!Rn(qd,Ue))&&(!($e||!Rn(this,Ue)||!Rn(wc,Ue)||Rn(this,Rs)&&this[Rs][Ue])||$e)},yb=function(he,Ue){var $e=wr(he),Ce=Ca(Ue);if($e!==Si||!Rn(wc,Ce)||Rn(qd,Ce)){var Lt=kc($e,Ce);return!Lt||!Rn(wc,Ce)||Rn($e,Rs)&&$e[Rs][Ce]||(Lt.enumerable=!0),Lt}},Hs=function(he){var Ue=nh(wr(he)),$e=[];return ql(Ue,function(Ce){Rn(wc,Ce)||Rn(Bi,Ce)||gb($e,Ce)}),$e},ah=function(_e){var he=_e===Si,Ue=nh(he?qd:wr(_e)),$e=[];return ql(Ue,function(Ce){!Rn(wc,Ce)||he&&!Rn(Si,Ce)||gb($e,wc[Ce])}),$e};Lr||(al=function(){if(sr(Hl,this))throw NS("Symbol is not a constructor");var he=arguments.length&&arguments[0]!==void 0?Xs(arguments[0]):void 0,Ue=Eo(he),$e=function(Ce){this===Si&&kt($e,qd,Ce),Rn(this,Rs)&&Rn(this[Rs],Ue)&&(this[Rs][Ue]=!1),Ef(this,Ue,or(1,Ce))};return ze&&If&&Ef(Si,Ue,{configurable:!0,set:$e}),Pf(Ue,he)},Hl=al.prototype,Fi(Hl,"toString",function(){return rh(this).tag}),Fi(al,"withoutSetter",function(_e){return Pf(Eo(_e),_e)}),tr.f=vb,ja.f=Af,Hm.f=oh,$a.f=yb,Id.f=Vl.f=Hs,yc.f=ah,eh.f=function(_e){return Pf(Co(_e),_e)},ze&&Ui(Hl,"description",{configurable:!0,get:function(){return rh(this).description}})),xn({global:!0,constructor:!0,wrap:!0,forced:!Lr,sham:!Lr},{Symbol:al}),ql(Ds(hb),function(_e){Za(_e)}),xn({target:Vd,stat:!0,forced:!Lr},{useSetter:function(){If=!0},useSimple:function(){If=!1}}),xn({target:"Object",stat:!0,forced:!Lr,sham:!ze},{create:function(he,Ue){return Ue===void 0?os(he):oh(os(he),Ue)},defineProperty:Af,defineProperties:oh,getOwnPropertyDescriptor:yb}),xn({target:"Object",stat:!0,forced:!Lr},{getOwnPropertyNames:Hs}),_f(),Bl(al,Vd),Bi[Rs]=!0;var bb=Lr&&!!Symbol.for&&!!Symbol.keyFor,sh=Un("string-to-symbol-registry"),zl=Un("symbol-to-string-registry");xn({target:"Symbol",stat:!0,forced:!bb},{for:function(_e){var he=Xs(_e);if(Rn(sh,he))return sh[he];var Ue=Pr("Symbol")(he);return sh[he]=Ue,zl[Ue]=he,Ue}});var Sb=Un("symbol-to-string-registry");xn({target:"Symbol",stat:!0,forced:!bb},{keyFor:function(he){if(!Vr(he))throw TypeError(Sn(he)+" is not a symbol");if(Rn(Sb,he))return Sb[he]}});var Tb=!Lr||V(function(){yc.f(1)});xn({target:"Object",stat:!0,forced:Tb},{getOwnPropertySymbols:function(he){var Ue=yc.f;return Ue?Ue(Pn(he)):[]}}),Za("asyncIterator"),Za("hasInstance"),Za("isConcatSpreadable"),Za("iterator"),Za("match"),Za("matchAll"),Za("replace"),Za("search"),Za("species"),Za("split"),Za("toPrimitive"),_f(),Za("toStringTag"),Bl(Pr("Symbol"),"Symbol"),Za("unscopables"),Bl($.JSON,"JSON",!0);var RS=_r.Symbol;Za("asyncDispose"),Za("dispose"),Za("matcher"),Za("metadataKey"),Za("observable"),Za("metadata"),Za("patternMatch"),Za("replaceAll");var xs=RS,Hd=eh.f("iterator"),BS=g(function(_e){function he(Ue){return _e.exports=he=typeof xs=="function"&&typeof Hd=="symbol"?function($e){return typeof $e}:function($e){return $e&&typeof xs=="function"&&$e.constructor===xs&&$e!==xs.prototype?"symbol":typeof $e},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Nf=V(function(){Su(1)});xn({target:"Object",stat:!0,forced:Nf,sham:!uy},{getPrototypeOf:function(he){return Su(Pn(he))}});var Dr=_r.Object.getPrototypeOf,LS=Ne([].reverse),Ao=[1,2];xn({target:"Array",proto:!0,forced:String(Ao)===String(Ao.reverse())},{reverse:function(){return Yi(this)&&(this.length=this.length),LS(this)}});var FS=da("Array").reverse,zd=Array.prototype,Of=function(_e){var he=_e.reverse;return _e===zd||sr(zd,_e)&&he===zd.reverse?FS:he},$S=g(function(_e){var he=BS.default;function Ue(){_e.exports=Ue=function(){return $e},_e.exports.__esModule=!0,_e.exports.default=_e.exports;var $e={},Ce=Object.prototype,Lt=Ce.hasOwnProperty,er=typeof xs=="function"?xs:{},rr=er.iterator||"@@iterator",fr=er.asyncIterator||"@@asyncIterator",kr=er.toStringTag||"@@toStringTag";function Er(Yn,On,co){return Pu(Yn,On,{value:co,enumerable:!0,configurable:!0,writable:!0}),Yn[On]}try{Er({},"")}catch{Er=function(co,mo,wo){return co[mo]=wo}}function Rr(Yn,On,co,mo){var wo=On&&On.prototype instanceof Gr?On:Gr,Io=ii(wo.prototype),ga=new Wr(mo||[]);return Io._invoke=function(Yo,ms,zo){var Xo="suspendedStart";return function(Oa,xl){if(Xo==="executing")throw new Error("Generator is already running");if(Xo==="completed"){if(Oa==="throw")throw xl;return so()}for(zo.method=Oa,zo.arg=xl;;){var na=zo.delegate;if(na){var jc=No(na,zo);if(jc){if(jc===Hr)continue;return jc}}if(zo.method==="next")zo.sent=zo._sent=zo.arg;else if(zo.method==="throw"){if(Xo==="suspendedStart")throw Xo="completed",zo.arg;zo.dispatchException(zo.arg)}else zo.method==="return"&&zo.abrupt("return",zo.arg);Xo="executing";var bs=$r(Yo,ms,zo);if(bs.type==="normal"){if(Xo=zo.done?"completed":"suspendedYield",bs.arg===Hr)continue;return{value:bs.arg,done:zo.done}}bs.type==="throw"&&(Xo="completed",zo.method="throw",zo.arg=bs.arg)}}}(Yn,co,ga),Io}function $r(Yn,On,co){try{return{type:"normal",arg:Yn.call(On,co)}}catch(mo){return{type:"throw",arg:mo}}}$e.wrap=Rr;var Hr={};function Gr(){}function vn(){}function bn(){}var In={};Er(In,rr,function(){return this});var Cn=Dr&&Dr(Dr(ro([])));Cn&&Cn!==Ce&&Lt.call(Cn,rr)&&(In=Cn);var Kn=bn.prototype=Gr.prototype=ii(In);function Qn(Yn){var On;So(On=["next","throw","return"]).call(On,function(co){Er(Yn,co,function(mo){return this._invoke(co,mo)})})}function Mo(Yn,On){function co(wo,Io,ga,Yo){var ms=$r(Yn[wo],Yn,Io);if(ms.type!=="throw"){var zo=ms.arg,Xo=zo.value;return Xo&&he(Xo)=="object"&&Lt.call(Xo,"__await")?On.resolve(Xo.__await).then(function(Oa){co("next",Oa,ga,Yo)},function(Oa){co("throw",Oa,ga,Yo)}):On.resolve(Xo).then(function(Oa){zo.value=Oa,ga(zo)},function(Oa){return co("throw",Oa,ga,Yo)})}Yo(ms.arg)}var mo;this._invoke=function(wo,Io){function ga(){return new On(function(Yo,ms){co(wo,Io,Yo,ms)})}return mo=mo?mo.then(ga,ga):ga()}}function No(Yn,On){var co=Yn.iterator[On.method];if(co===void 0){if(On.delegate=null,On.method==="throw"){if(Yn.iterator.return&&(On.method="return",On.arg=void 0,No(Yn,On),On.method==="throw"))return Hr;On.method="throw",On.arg=new TypeError("The iterator does not provide a 'throw' method")}return Hr}var mo=$r(co,Yn.iterator,On.arg);if(mo.type==="throw")return On.method="throw",On.arg=mo.arg,On.delegate=null,Hr;var wo=mo.arg;return wo?wo.done?(On[Yn.resultName]=wo.value,On.next=Yn.nextLoc,On.method!=="return"&&(On.method="next",On.arg=void 0),On.delegate=null,Hr):wo:(On.method="throw",On.arg=new TypeError("iterator result is not an object"),On.delegate=null,Hr)}function Ko(Yn){var On={tryLoc:Yn[0]};1 in Yn&&(On.catchLoc=Yn[1]),2 in Yn&&(On.finallyLoc=Yn[2],On.afterLoc=Yn[3]),this.tryEntries.push(On)}function Ln(Yn){var On=Yn.completion||{};On.type="normal",delete On.arg,Yn.completion=On}function Wr(Yn){this.tryEntries=[{tryLoc:"root"}],So(Yn).call(Yn,Ko,this),this.reset(!0)}function ro(Yn){if(Yn){var On=Yn[rr];if(On)return On.call(Yn);if(typeof Yn.next=="function")return Yn;if(!isNaN(Yn.length)){var co=-1,mo=function wo(){for(;++co<Yn.length;)if(Lt.call(Yn,co))return wo.value=Yn[co],wo.done=!1,wo;return wo.value=void 0,wo.done=!0,wo};return mo.next=mo}}return{next:so}}function so(){return{value:void 0,done:!0}}return vn.prototype=bn,Er(Kn,"constructor",bn),Er(bn,"constructor",vn),vn.displayName=Er(bn,kr,"GeneratorFunction"),$e.isGeneratorFunction=function(Yn){var On=typeof Yn=="function"&&Yn.constructor;return!!On&&(On===vn||(On.displayName||On.name)==="GeneratorFunction")},$e.mark=function(Yn){return ci?ci(Yn,bn):(Yn.__proto__=bn,Er(Yn,kr,"GeneratorFunction")),Yn.prototype=ii(Kn),Yn},$e.awrap=function(Yn){return{__await:Yn}},Qn(Mo.prototype),Er(Mo.prototype,fr,function(){return this}),$e.AsyncIterator=Mo,$e.async=function(Yn,On,co,mo,wo){wo===void 0&&(wo=ka);var Io=new Mo(Rr(Yn,On,co,mo),wo);return $e.isGeneratorFunction(On)?Io:Io.next().then(function(ga){return ga.done?ga.value:Io.next()})},Qn(Kn),Er(Kn,kr,"Generator"),Er(Kn,rr,function(){return this}),Er(Kn,"toString",function(){return"[object Generator]"}),$e.keys=function(Yn){var On=[];for(var co in Yn)On.push(co);return Of(On).call(On),function mo(){for(;On.length;){var wo=On.pop();if(wo in Yn)return mo.value=wo,mo.done=!1,mo}return mo.done=!0,mo}},$e.values=ro,Wr.prototype={constructor:Wr,reset:function(On){var co;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,So(co=this.tryEntries).call(co,Ln),!On)for(var mo in this)mo.charAt(0)==="t"&&Lt.call(this,mo)&&!isNaN(+Pa(mo).call(mo,1))&&(this[mo]=void 0)},stop:function(){this.done=!0;var On=this.tryEntries[0].completion;if(On.type==="throw")throw On.arg;return this.rval},dispatchException:function(On){if(this.done)throw On;var co=this;function mo(zo,Xo){return ga.type="throw",ga.arg=On,co.next=zo,Xo&&(co.method="next",co.arg=void 0),!!Xo}for(var wo=this.tryEntries.length-1;wo>=0;--wo){var Io=this.tryEntries[wo],ga=Io.completion;if(Io.tryLoc==="root")return mo("end");if(Io.tryLoc<=this.prev){var Yo=Lt.call(Io,"catchLoc"),ms=Lt.call(Io,"finallyLoc");if(Yo&&ms){if(this.prev<Io.catchLoc)return mo(Io.catchLoc,!0);if(this.prev<Io.finallyLoc)return mo(Io.finallyLoc)}else if(Yo){if(this.prev<Io.catchLoc)return mo(Io.catchLoc,!0)}else{if(!ms)throw new Error("try statement without catch or finally");if(this.prev<Io.finallyLoc)return mo(Io.finallyLoc)}}}},abrupt:function(On,co){for(var mo=this.tryEntries.length-1;mo>=0;--mo){var wo=this.tryEntries[mo];if(wo.tryLoc<=this.prev&&Lt.call(wo,"finallyLoc")&&this.prev<wo.finallyLoc){var Io=wo;break}}Io&&(On==="break"||On==="continue")&&Io.tryLoc<=co&&co<=Io.finallyLoc&&(Io=null);var ga=Io?Io.completion:{};return ga.type=On,ga.arg=co,Io?(this.method="next",this.next=Io.finallyLoc,Hr):this.complete(ga)},complete:function(On,co){if(On.type==="throw")throw On.arg;return On.type==="break"||On.type==="continue"?this.next=On.arg:On.type==="return"?(this.rval=this.arg=On.arg,this.method="return",this.next="end"):On.type==="normal"&&co&&(this.next=co),Hr},finish:function(On){for(var co=this.tryEntries.length-1;co>=0;--co){var mo=this.tryEntries[co];if(mo.finallyLoc===On)return this.complete(mo.completion,mo.afterLoc),Ln(mo),Hr}},catch:function(On){for(var co=this.tryEntries.length-1;co>=0;--co){var mo=this.tryEntries[co];if(mo.tryLoc===On){var wo=mo.completion;if(wo.type==="throw"){var Io=wo.arg;Ln(mo)}return Io}}throw new Error("illegal catch attempt")},delegateYield:function(On,co,mo){return this.delegate={iterator:ro(On),resultName:co,nextLoc:mo},this.method==="next"&&(this.arg=void 0),Hr}},$e}_e.exports=Ue,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Rf=$S(),Kr=Rf;try{regeneratorRuntime=Rf}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Rf:Function("r","regeneratorRuntime = r")(Rf)}function ea(_e,he){var Ue={};for(var $e in _e)Object.prototype.hasOwnProperty.call(_e,$e)&&he.indexOf($e)<0&&(Ue[$e]=_e[$e]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ce=0;for($e=Object.getOwnPropertySymbols(_e);Ce<$e.length;Ce++)he.indexOf($e[Ce])<0&&Object.prototype.propertyIsEnumerable.call(_e,$e[Ce])&&(Ue[$e[Ce]]=_e[$e[Ce]])}return Ue}function Vn(_e,he,Ue,$e){return new(Ue||(Ue=Promise))(function(Ce,Lt){function er(kr){try{fr($e.next(kr))}catch(Er){Lt(Er)}}function rr(kr){try{fr($e.throw(kr))}catch(Er){Lt(Er)}}function fr(kr){kr.done?Ce(kr.value):function(Rr){return Rr instanceof Ue?Rr:new Ue(function($r){$r(Rr)})}(kr.value).then(er,rr)}fr(($e=$e.apply(_e,he||[])).next())})}var ei=Array.isArray,Wd=typeof e=="object"&&e&&e.Object===Object&&e,jS=typeof self=="object"&&self&&self.Object===Object&&self,sc=Wd||jS||Function("return this")(),ti=sc.Symbol,ih=Object.prototype,DS=ih.hasOwnProperty,Gd=ih.toString,Au=ti?ti.toStringTag:void 0,Cb=function(he){var Ue=DS.call(he,Au),$e=he[Au];try{he[Au]=void 0;var Ce=!0}catch{}var Lt=Gd.call(he);return Ce&&(Ue?he[Au]=$e:delete he[Au]),Lt},Mb=Object.prototype.toString,US=function(he){return Mb.call(he)},ch=ti?ti.toStringTag:void 0,ma=function(he){return he==null?he===void 0?"[object Undefined]":"[object Null]":ch&&ch in Object(he)?Cb(he):US(he)},Vi=function(he){return he!=null&&typeof he=="object"},Bf=function(he){return typeof he=="symbol"||Vi(he)&&ma(he)=="[object Symbol]"},Lf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kb=/^\w*$/,Ff=function(he,Ue){if(ei(he))return!1;var $e=typeof he;return!($e!="number"&&$e!="symbol"&&$e!="boolean"&&he!=null&&!Bf(he))||kb.test(he)||!Lf.test(he)||Ue!=null&&he in Object(Ue)},ri=function(he){var Ue=typeof he;return he!=null&&(Ue=="object"||Ue=="function")},lh=function(he){if(!ri(he))return!1;var Ue=ma(he);return Ue=="[object Function]"||Ue=="[object GeneratorFunction]"||Ue=="[object AsyncFunction]"||Ue=="[object Proxy]"},uh=sc["__core-js_shared__"],wb=function(){var _e=/[^.]+$/.exec(uh&&uh.keys&&uh.keys.IE_PROTO||"");return _e?"Symbol(src)_1."+_e:""}(),VS=function(he){return!!wb&&wb in he},qS=Function.prototype.toString,Wl=function(he){if(he!=null){try{return qS.call(he)}catch{}try{return he+""}catch{}}return""},HS=/^\[object .+?Constructor\]$/,zS=Function.prototype,WS=Object.prototype,GS=zS.toString,dh=WS.hasOwnProperty,ph=RegExp("^"+GS.call(dh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ti=function(he){return!(!ri(he)||VS(he))&&(lh(he)?ph:HS).test(Wl(he))},KS=function(he,Ue){return he==null?void 0:he[Ue]},Gl=function(he,Ue){var $e=KS(he,Ue);return Ti($e)?$e:void 0},Kd=Gl(Object,"create"),fh=function(){this.__data__=Kd?Kd(null):{},this.size=0},Qd=function(he){var Ue=this.has(he)&&delete this.__data__[he];return this.size-=Ue?1:0,Ue},Jd=Object.prototype.hasOwnProperty,hn=function(he){var Ue=this.__data__;if(Kd){var $e=Ue[he];return $e==="__lodash_hash_undefined__"?void 0:$e}return Jd.call(Ue,he)?Ue[he]:void 0},mh=Object.prototype.hasOwnProperty,QS=function(he){var Ue=this.__data__;return Kd?Ue[he]!==void 0:mh.call(Ue,he)},Yd=function(he,Ue){var $e=this.__data__;return this.size+=this.has(he)?0:1,$e[he]=Kd&&Ue===void 0?"__lodash_hash_undefined__":Ue,this};function _c(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.clear();++he<Ue;){var $e=_e[he];this.set($e[0],$e[1])}}_c.prototype.clear=fh,_c.prototype.delete=Qd,_c.prototype.get=hn,_c.prototype.has=QS,_c.prototype.set=Yd;var _b=_c,JS=function(){this.__data__=[],this.size=0},Xd=function(he,Ue){return he===Ue||he!=he&&Ue!=Ue},$f=function(he,Ue){for(var $e=he.length;$e--;)if(Xd(he[$e][0],Ue))return $e;return-1},YS=Array.prototype.splice,Nu=function(he){var Ue=this.__data__,$e=$f(Ue,he);return!($e<0)&&($e==Ue.length-1?Ue.pop():YS.call(Ue,$e,1),--this.size,!0)},jf=function(he){var Ue=this.__data__,$e=$f(Ue,he);return $e<0?void 0:Ue[$e][1]},XS=function(he){return $f(this.__data__,he)>-1},ZS=function(he,Ue){var $e=this.__data__,Ce=$f($e,he);return Ce<0?(++this.size,$e.push([he,Ue])):$e[Ce][1]=Ue,this};function Ou(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.clear();++he<Ue;){var $e=_e[he];this.set($e[0],$e[1])}}Ou.prototype.clear=JS,Ou.prototype.delete=Nu,Ou.prototype.get=jf,Ou.prototype.has=XS,Ou.prototype.set=ZS;var Df=Ou,Ru=Gl(sc,"Map"),eT=function(){this.size=0,this.__data__={hash:new _b,map:new(Ru||Df),string:new _b}},qi=function(he){var Ue=typeof he;return Ue=="string"||Ue=="number"||Ue=="symbol"||Ue=="boolean"?he!=="__proto__":he===null},fi=function(he,Ue){var $e=he.__data__;return qi(Ue)?$e[typeof Ue=="string"?"string":"hash"]:$e.map},xb=function(he){var Ue=fi(this,he).delete(he);return this.size-=Ue?1:0,Ue},tT=function(he){return fi(this,he).get(he)},rT=function(he){return fi(this,he).has(he)},Zd=function(he,Ue){var $e=fi(this,he),Ce=$e.size;return $e.set(he,Ue),this.size+=$e.size==Ce?0:1,this};function Bu(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.clear();++he<Ue;){var $e=_e[he];this.set($e[0],$e[1])}}Bu.prototype.clear=eT,Bu.prototype.delete=xb,Bu.prototype.get=tT,Bu.prototype.has=rT,Bu.prototype.set=Zd;var Uf=Bu;function gh(_e,he){if(typeof _e!="function"||he!=null&&typeof he!="function")throw new TypeError("Expected a function");var Ue=function(){var $e=arguments,Ce=he?he.apply(this,$e):$e[0],Lt=Ue.cache;if(Lt.has(Ce))return Lt.get(Ce);var er=_e.apply(this,$e);return Ue.cache=Lt.set(Ce,er)||Lt,er};return Ue.cache=new(gh.Cache||Uf),Ue}gh.Cache=Uf;var Ib=gh,sl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ni=/\\(\\)?/g,hh=function(he){var Ue=Ib(he,function(Ce){return $e.size===500&&$e.clear(),Ce}),$e=Ue.cache;return Ue}(function(_e){var he=[];return _e.charCodeAt(0)===46&&he.push(""),_e.replace(sl,function(Ue,$e,Ce,Lt){he.push(Ce?Lt.replace(ni,"$1"):$e||Ue)}),he}),vh=hh,Vf=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length,Lt=Array(Ce);++$e<Ce;)Lt[$e]=Ue(he[$e],$e,he);return Lt},Eb=ti?ti.prototype:void 0,Pb=Eb?Eb.toString:void 0,Kl=function _e(he){if(typeof he=="string")return he;if(ei(he))return Vf(he,_e)+"";if(Bf(he))return Pb?Pb.call(he):"";var Ue=he+"";return Ue=="0"&&1/he==-1/0?"-0":Ue},nT=function(he){return he==null?"":Kl(he)},qf=function(he,Ue){return ei(he)?he:Ff(he,Ue)?[he]:vh(nT(he))},ep=function(he){if(typeof he=="string"||Bf(he))return he;var Ue=he+"";return Ue=="0"&&1/he==-1/0?"-0":Ue},yh=function(he,Ue){for(var $e=0,Ce=(Ue=qf(Ue,he)).length;he!=null&&$e<Ce;)he=he[ep(Ue[$e++])];return $e&&$e==Ce?he:void 0},Bs=function(he,Ue,$e){var Ce=he==null?void 0:yh(he,Ue);return Ce===void 0?$e:Ce},Ls=function(){function _e(he,Ue){this.name=he,this.core=Ue,this.name=he,this.logger=Ue.logger,this.core=Ue}return _e.prototype.process=function(Ue){var $e=this[Ue.cmd+"Handler"];return typeof $e=="function"?$e.call(this,Ue):Ue.error&&!Ue.error.ignore?ka.reject(Ue.error):ka.resolve(Ue)},_e}(),oT=Gc.map,aT=_d("map");xn({target:"Array",proto:!0,forced:!aT},{map:function(he){return oT(this,he,arguments.length>1?arguments[1]:void 0)}});var Ql=da("Array").map,Jl=Array.prototype,Lo=function(_e){var he=_e.map;return _e===Jl||sr(Jl,_e)&&he===Jl.map?Ql:he},sT=md.includes,iT=V(function(){return!Array(1).includes()});xn({target:"Array",proto:!0,forced:iT},{includes:function(he){return sT(this,he,arguments.length>1?arguments[1]:void 0)}});var cT=da("Array").includes,lT=Co("match"),uT=TypeError,dT=function(_e){if(function(he){var Ue;return mr(he)&&((Ue=he[lT])!==void 0?!!Ue:nr(he)=="RegExp")}(_e))throw uT("The method doesn't accept regular expressions");return _e},pT=Co("match"),Lu=Ne("".indexOf);xn({target:"String",proto:!0,forced:!function(_e){var he=/./;try{"/./"[_e](he)}catch{try{return he[pT]=!1,"/./"[_e](he)}catch{}}return!1}("includes")},{includes:function(he){return!!~Lu(Xs(Sr(this)),Xs(dT(he)),arguments.length>1?arguments[1]:void 0)}});var Ab=da("String").includes,bh=Array.prototype,Sh=String.prototype,mi=function(_e){var he=_e.includes;return _e===bh||sr(bh,_e)&&he===bh.includes?cT:typeof _e=="string"||_e===Sh||sr(Sh,_e)&&he===Sh.includes?Ab:he},fT=TypeError,Nb=function(_e){return function(he,Ue,$e,Ce){Xr(Ue);var Lt=Pn(he),er=gr(Lt),rr=ns(Lt),fr=_e?rr-1:0,kr=_e?-1:1;if($e<2)for(;;){if(fr in er){Ce=er[fr],fr+=kr;break}if(fr+=kr,_e?fr<0:rr<=fr)throw fT("Reduce of empty array with no initial value")}for(;_e?fr>=0:rr>fr;fr+=kr)fr in er&&(Ce=Ue(Ce,er[fr],fr,Lt));return Ce}},mT={left:Nb(!1),right:Nb(!0)}.left,gT=Zi("reduce");xn({target:"Array",proto:!0,forced:!gT||!ui&&Br>79&&Br<83},{reduce:function(he){var Ue=arguments.length;return mT(this,he,Ue,Ue>1?arguments[1]:void 0)}});var Fu=da("Array").reduce,$u=Array.prototype,Hf=function(_e){var he=_e.reduce;return _e===$u||sr($u,_e)&&he===$u.reduce?Fu:he},Yl=function(he){return he===void 0},ju=V(function(){if(typeof ArrayBuffer=="function"){var _e=new ArrayBuffer(8);Object.isExtensible(_e)&&Object.defineProperty(_e,"a",{value:8})}}),zf=Object.isExtensible,Th=V(function(){zf(1)})||ju?function(he){return!!mr(he)&&(!ju||nr(he)!="ArrayBuffer")&&(!zf||zf(he))}:zf,Wf=!V(function(){return Object.isExtensible(Object.preventExtensions({}))}),Gf=g(function(_e){var he=ja.f,Ue=!1,$e=Eo("meta"),Ce=0,Lt=function(rr){he(rr,$e,{value:{objectID:"O"+Ce++,weakData:{}}})},er=_e.exports={enable:function(){er.enable=function(){},Ue=!0;var rr=Id.f,fr=Ne([].splice),kr={};kr[$e]=1,rr(kr).length&&(Id.f=function(Er){for(var Rr=rr(Er),$r=0,Hr=Rr.length;$r<Hr;$r++)if(Rr[$r]===$e){fr(Rr,$r,1);break}return Rr},xn({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Vl.f}))},fastKey:function(rr,fr){if(!mr(rr))return typeof rr=="symbol"?rr:(typeof rr=="string"?"S":"P")+rr;if(!Rn(rr,$e)){if(!Th(rr))return"F";if(!fr)return"E";Lt(rr)}return rr[$e].objectID},getWeakData:function(rr,fr){if(!Rn(rr,$e)){if(!Th(rr))return!0;if(!fr)return!1;Lt(rr)}return rr[$e].weakData},onFreeze:function(rr){return Wf&&Ue&&Th(rr)&&!Rn(rr,$e)&&Lt(rr),rr}};Bi[$e]=!0}),hT=ja.f,Ch=Gc.forEach,Ob=hi.set,Kf=hi.getterFor,Rb=function(_e,he,Ue){for(var $e in he)Ue&&Ue.unsafe&&_e[$e]?_e[$e]=he[$e]:Fi(_e,$e,he[$e],Ue);return _e},Mh=ja.f,kh=Gf.fastKey,Qf=hi.set,wh=hi.getterFor,_h={getConstructor:function(_e,he,Ue,$e){var Ce=_e(function(kr,Er){Yc(kr,Lt),Qf(kr,{type:he,index:os(null),first:void 0,last:void 0,size:0}),ze||(kr.size=0),pr(Er)||Va(Er,kr[$e],{that:kr,AS_ENTRIES:Ue})}),Lt=Ce.prototype,er=wh(he),rr=function(kr,Er,Rr){var $r,Hr,Gr=er(kr),vn=fr(kr,Er);return vn?vn.value=Rr:(Gr.last=vn={index:Hr=kh(Er,!0),key:Er,value:Rr,previous:$r=Gr.last,next:void 0,removed:!1},Gr.first||(Gr.first=vn),$r&&($r.next=vn),ze?Gr.size++:kr.size++,Hr!=="F"&&(Gr.index[Hr]=vn)),kr},fr=function(kr,Er){var Rr,$r=er(kr),Hr=kh(Er);if(Hr!=="F")return $r.index[Hr];for(Rr=$r.first;Rr;Rr=Rr.next)if(Rr.key==Er)return Rr};return Rb(Lt,{clear:function(){for(var Er=er(this),Rr=Er.index,$r=Er.first;$r;)$r.removed=!0,$r.previous&&($r.previous=$r.previous.next=void 0),delete Rr[$r.index],$r=$r.next;Er.first=Er.last=void 0,ze?Er.size=0:this.size=0},delete:function(kr){var Er=this,Rr=er(Er),$r=fr(Er,kr);if($r){var Hr=$r.next,Gr=$r.previous;delete Rr.index[$r.index],$r.removed=!0,Gr&&(Gr.next=Hr),Hr&&(Hr.previous=Gr),Rr.first==$r&&(Rr.first=Hr),Rr.last==$r&&(Rr.last=Gr),ze?Rr.size--:Er.size--}return!!$r},forEach:function(Er){for(var Rr,$r=er(this),Hr=Ho(Er,arguments.length>1?arguments[1]:void 0);Rr=Rr?Rr.next:$r.first;)for(Hr(Rr.value,Rr.key,this);Rr&&Rr.removed;)Rr=Rr.previous},has:function(Er){return!!fr(this,Er)}}),Rb(Lt,Ue?{get:function(Er){var Rr=fr(this,Er);return Rr&&Rr.value},set:function(Er,Rr){return rr(this,Er===0?0:Er,Rr)}}:{add:function(Er){return rr(this,Er=Er===0?0:Er,Er)}}),ze&&Mh(Lt,"size",{get:function(){return er(this).size}}),Ce},setStrong:function(_e,he,Ue){var $e=he+" Iterator",Ce=wh(he),Lt=wh($e);ig(_e,he,function(er,rr){Qf(this,{type:$e,target:er,state:Ce(er),kind:rr,last:void 0})},function(){for(var er=Lt(this),rr=er.kind,fr=er.last;fr&&fr.removed;)fr=fr.previous;return er.target&&(er.last=fr=fr?fr.next:er.state.first)?rr=="keys"?{value:fr.key,done:!1}:rr=="values"?{value:fr.value,done:!1}:{value:[fr.key,fr.value],done:!1}:(er.target=void 0,{value:void 0,done:!0})},Ue?"entries":"values",!Ue,!0),Ig(he)}};(function(_e,he,Ue){var $e,Ce=_e.indexOf("Map")!==-1,Lt=_e.indexOf("Weak")!==-1,er=Ce?"set":"add",rr=$[_e],fr=rr&&rr.prototype,kr={};if(ze&&Ve(rr)&&(Lt||fr.forEach&&!V(function(){new rr().entries().next()}))){var Er=($e=he(function($r,Hr){Ob(Yc($r,Er),{type:_e,collection:new rr}),Hr!=null&&Va(Hr,$r[er],{that:$r,AS_ENTRIES:Ce})})).prototype,Rr=Kf(_e);Ch(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function($r){var Hr=$r=="add"||$r=="set";!($r in fr)||Lt&&$r=="clear"||Ma(Er,$r,function(Gr,vn){var bn=Rr(this).collection;if(!Hr&&Lt&&!mr(Gr))return $r=="get"&&void 0;var In=bn[$r](Gr===0?0:Gr,vn);return Hr?this:In})}),Lt||hT(Er,"size",{configurable:!0,get:function(){return Rr(this).collection.size}})}else $e=Ue.getConstructor(he,_e,Ce,er),Gf.enable();Bl($e,_e,!1,!0),kr[_e]=$e,xn({global:!0,forced:!0},kr),Lt||Ue.setStrong($e,_e,Ce)})("Map",function(_e){return function(){return _e(this,arguments.length?arguments[0]:void 0)}},_h);var Ci=_r.Map,xh=[].push;xn({target:"Map",stat:!0,forced:!0},{from:function(he){var Ue,$e,Ce,Lt,er=arguments.length,rr=er>1?arguments[1]:void 0;return wu(this),(Ue=rr!==void 0)&&Xr(rr),pr(he)?new this:($e=[],Ue?(Ce=0,Lt=Ho(rr,er>2?arguments[2]:void 0),Va(he,function(fr){kt(xh,$e,Lt(fr,Ce++))})):Va(he,xh,{that:$e}),new this($e))}}),xn({target:"Map",stat:!0,forced:!0},{of:function(){return new this(Us(arguments))}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var he,Ue=lo(this),$e=Xr(Ue.delete),Ce=!0,Lt=0,er=arguments.length;Lt<er;Lt++)he=kt($e,Ue,arguments[Lt]),Ce=Ce&&he;return!!Ce}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(he,Ue){var $e,Ce,Lt=lo(this),er=Xr(Lt.get),rr=Xr(Lt.has),fr=Xr(Lt.set);return kt(rr,Lt,he)?($e=kt(er,Lt,he),"update"in Ue&&($e=Ue.update($e,he,Lt),kt(fr,Lt,he,$e)),$e):(Ce=Ue.insert(he,Lt),kt(fr,Lt,he,Ce),Ce)}});var ic=Mu;xn({target:"Map",proto:!0,real:!0,forced:!0},{every:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0);return!Va($e,function(Lt,er,rr){if(!Ce(er,Lt,Ue))return rr()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0),Lt=new(Nd(Ue,Pr("Map"))),er=Xr(Lt.set);return Va($e,function(rr,fr){Ce(fr,rr,Ue)&&kt(er,Lt,rr,fr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Lt}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{find:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0);return Va($e,function(Lt,er,rr){if(Ce(er,Lt,Ue))return rr(er)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0);return Va($e,function(Lt,er,rr){if(Ce(er,Lt,Ue))return rr(Lt)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var Bb=Ne([].push);xn({target:"Map",stat:!0,forced:!0},{groupBy:function(he,Ue){Xr(Ue);var $e=Mu(he),Ce=new this,Lt=Xr(Ce.has),er=Xr(Ce.get),rr=Xr(Ce.set);return Va($e,function(fr){var kr=Ue(fr);kt(Lt,Ce,kr)?Bb(kt(er,Ce,kr),fr):kt(rr,Ce,kr,[fr])},{IS_ITERATOR:!0}),Ce}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(he){return Va(ic(lo(this)),function(Ue,$e,Ce){if((Lt=$e)===(er=he)||Lt!=Lt&&er!=er)return Ce();var Lt,er},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),xn({target:"Map",stat:!0,forced:!0},{keyBy:function(he,Ue){var $e=new this;Xr(Ue);var Ce=Xr($e.set);return Va(he,function(Lt){kt(Ce,$e,Ue(Lt),Lt)}),$e}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(he){return Va(ic(lo(this)),function(Ue,$e,Ce){if($e===he)return Ce(Ue)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0),Lt=new(Nd(Ue,Pr("Map"))),er=Xr(Lt.set);return Va($e,function(rr,fr){kt(er,Lt,Ce(fr,rr,Ue),fr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Lt}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0),Lt=new(Nd(Ue,Pr("Map"))),er=Xr(Lt.set);return Va($e,function(rr,fr){kt(er,Lt,rr,Ce(fr,rr,Ue))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Lt}}),xn({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(he){for(var Ue=lo(this),$e=Xr(Ue.set),Ce=arguments.length,Lt=0;Lt<Ce;)Va(arguments[Lt++],$e,{that:Ue,AS_ENTRIES:!0});return Ue}});var vT=TypeError;xn({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(he){var Ue=lo(this),$e=ic(Ue),Ce=arguments.length<2,Lt=Ce?void 0:arguments[1];if(Xr(he),Va($e,function(er,rr){Ce?(Ce=!1,Lt=rr):Lt=he(Lt,rr,er,Ue)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Ce)throw vT("Reduce of empty map with no initial value");return Lt}}),xn({target:"Map",proto:!0,real:!0,forced:!0},{some:function(he){var Ue=lo(this),$e=ic(Ue),Ce=Ho(he,arguments.length>1?arguments[1]:void 0);return Va($e,function(Lt,er,rr){if(Ce(er,Lt,Ue))return rr()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var Lb=TypeError;xn({target:"Map",proto:!0,real:!0,forced:!0},{update:function(he,Ue){var $e=lo(this),Ce=Xr($e.get),Lt=Xr($e.has),er=Xr($e.set),rr=arguments.length;Xr(Ue);var fr=kt(Lt,$e,he);if(!fr&&rr<3)throw Lb("Updating absent value");var kr=fr?kt(Ce,$e,he):Xr(rr>2?arguments[2]:void 0)(he,$e);return kt(er,$e,he,Ue(kr,he,$e)),$e}});var yT=TypeError,Ih=function(he,Ue){var $e,Ce=lo(this),Lt=Xr(Ce.get),er=Xr(Ce.has),rr=Xr(Ce.set),fr=arguments.length>2?arguments[2]:void 0;if(!Ve(Ue)&&!Ve(fr))throw yT("At least one callback required");return kt(er,Ce,he)?($e=kt(Lt,Ce,he),Ve(Ue)&&($e=Ue($e),kt(rr,Ce,he,$e))):Ve(fr)&&($e=fr(),kt(rr,Ce,he,$e)),$e};xn({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Ih}),xn({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Ih});var xc=Ci,Ic=g(function(_e){function he(Ue){var $e;return _e.exports=he=ci?oa($e=Dr).call($e):function(Lt){return Lt.__proto__||Dr(Lt)},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Fb=g(function(_e){_e.exports=function(Ue){var $e;return Ja($e=Function.toString.call(Ue)).call($e,"[native code]")!==-1},_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Jf=Pr("Reflect","construct"),bT=Object.prototype,ST=[].push,$b=V(function(){function _e(){}return!(Jf(function(){},[],_e)instanceof _e)}),Du=!V(function(){Jf(function(){})}),jb=$b||Du;xn({target:"Reflect",stat:!0,forced:jb,sham:jb},{construct:function(he,Ue){wu(he),lo(Ue);var $e=arguments.length<3?he:wu(arguments[2]);if(Du&&!$b)return Jf(he,Ue,$e);if(he==$e){switch(Ue.length){case 0:return new he;case 1:return new he(Ue[0]);case 2:return new he(Ue[0],Ue[1]);case 3:return new he(Ue[0],Ue[1],Ue[2]);case 4:return new he(Ue[0],Ue[1],Ue[2],Ue[3])}var Ce=[null];return ue(ST,Ce,Ue),new(ue(yd,he,Ce))}var Lt=$e.prototype,er=os(mr(Lt)?Lt:bT),rr=ue(he,er,Ue);return mr(rr)?rr:er}});var Mi=_r.Reflect.construct,TT=g(function(_e){_e.exports=function(){if(typeof Reflect>"u"||!Mi||Mi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Mi(Boolean,[],function(){})),!0}catch{return!1}},_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Yf=g(function(_e){function he(Ue,$e,Ce){var Lt;return TT()?(_e.exports=he=oa(Lt=Mi).call(Lt),_e.exports.__esModule=!0,_e.exports.default=_e.exports):(_e.exports=he=function(rr,fr,kr){var Er=[null];Er.push.apply(Er,fr);var Rr=new(oa(Function).apply(rr,Er));return kr&&Sd(Rr,kr.prototype),Rr},_e.exports.__esModule=!0,_e.exports.default=_e.exports),he.apply(null,arguments)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Eh=g(function(_e){function he(Ue){var $e=typeof xc=="function"?new xc:void 0;return _e.exports=he=function(Lt){if(Lt===null||!Fb(Lt))return Lt;if(typeof Lt!="function")throw new TypeError("Super expression must either be null or a function");if($e!==void 0){if($e.has(Lt))return $e.get(Lt);$e.set(Lt,er)}function er(){return Yf(Lt,arguments,Ic(this).constructor)}return er.prototype=ii(Lt.prototype,{constructor:{value:er,enumerable:!1,writable:!0,configurable:!0}}),Sd(er,Lt)},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Ha=n(Eh),Hi=function(_e){function he(Ue,$e,Ce){var Lt;return $e===void 0&&($e={}),Ce===void 0&&(Ce=400),(Lt=_e.call(this,Ue)||this).data=$e,Lt.code=Ce,Lt.name="customError",Lt}return ra(he,_e),he}(Ha(Error)),Uu=function(_e){function he(Ue,$e,Ce){var Lt;return $e===void 0&&($e={}),(Lt=_e.call(this,Ue,$e,414)||this).code=414,Lt.name="validateError",Lt.rules=Ce,Lt}return ra(he,_e),he}(Hi),tp={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},Xf=function(_e){function he(Ue,$e,Ce,Lt,er){var rr;return Ce===void 0&&(Ce=""),Lt===void 0&&(Lt=new Date().getTime()),er===void 0&&(er={}),Ce=Ce||tp[Ue],(rr=_e.call(this,Ce,er,Ue)||this).name="cmdError",rr.cmd=$e,rr.timetag=Lt,rr}return ra(he,_e),he}(Hi),Ph=function(_e){function he(Ue,$e,Ce){var Lt;return(Lt=_e.call(this,Ue,{},412)||this).code=412,Lt.name="formatError",Lt.key=$e,Lt.reason=Ce,Lt}return ra(he,_e),he}(Hi),Vu=function(_e){function he(Ue,$e,Ce,Lt,er){var rr;return(rr=_e.call(this,Ue,{file:er},400)||this).name="uploadError",rr.rawError=$e,rr.curProvider=Ce||1,rr.mixStorePolicy=Lt,rr}return ra(he,_e),he}(Hi),rp={},Ah={};function Nh(_e,he){var Ue,$e,Ce;try{Ce=JSON.parse(_e)}catch(Hr){throw he.error("Parse command error: ",_e),Hr}var Lt=Ce.sid+"_"+Ce.cid,er=Ce.r;if(mi(Ue=["4_1","4_2","4_10","4_11"]).call(Ue,Lt)){var rr=Ce.r[1].headerPacket;Lt=rr.sid+"_"+rr.cid,er=Ce.r[1].body}var fr,kr=Ah[Lt],Er=rp[kr],Rr=function(Gr,vn){var bn=tp[Gr];return bn===null?null:new Xf(Gr,vn,bn,new Date().getTime())}(Ce.code,kr),$r={cmd:kr,raw:Ce,error:Rr,service:Er==null?void 0:Er.service,content:{}};if($r.error){if($r.error.cmd=kr,$r.error.callFunc="parseCmd",!(!(($e=Er==null?void 0:Er.ignoreErrCodes)===null||$e===void 0)&&mi($e).call($e,Ce.code)))return $r;he.warn("parseCmd:: ignore error ",$r.error),$r.error.ignore=!0}return!kr||!Er?($r.notFound=!0,$r):(Er.response&&So(fr=Er.response).call(fr,function(Hr,Gr){var vn=er[Gr],bn=Hr.type,In=Hr.name,Cn=Hr.reflectMapper;if(!Yl(vn))switch(bn){case"Property":$r.content[In]=Cn?il(vn,Cn):vn;break;case"PropertyArray":$r.content[In]=Lo(vn).call(vn,function(Kn){return Cn?il(Kn,Cn):Kn});break;case"long":case"Long":case"byte":case"Byte":case"Number":$r.content[In]=+vn;break;default:$r.content[In]=vn}}),$r)}function Oh(_e,he){var Ue={};for(var $e in _e)he[$e]!==void 0&&(Ue[he[$e]]=_e[$e]);return Ue}function il(_e,he){var Ue={};for(var $e in _e)he[$e]!==void 0&&(Ue[he[$e]]=_e[$e]);return Ue}function Ts(_e){rp=Gn(rp,_e.cmdConfig),Ah=Gn(Ah,_e.cmdMap)}function zs(_e){var he;return Hf(he=fa(_e)).call(he,function(Ue,$e){var Ce,Lt=_e[$e];return Ue[$e]=Hf(Ce=fa(Lt)).call(Ce,function(er,rr){return er[Lt[rr]]=rr,er},{}),Ue},{})}var Zf={"1_2":"heartbeat","2_3":"login","2_5":"kicked","2_6":"logout","2_7":"multiPortLogin","2_8":"kick"},em={login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appkey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,hostEnv:41,userAgent:42,libEnv:44,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,customTag:38,connectionId:102,ip:103,time:109},aosPushInfo:{pushType:110,hasTokenPreviously:111}},np=zs(em),CT={login:{sid:2,cid:3,service:"auth",params:[{type:"Property",name:"login",reflectMapper:em.login}],response:[{type:"Property",name:"loginRes",reflectMapper:np.loginRes},{type:"PropertyArray",name:"loginPorts",reflectMapper:np.loginPort},{type:"Property",name:"aosPushInfo",reflectMapper:np.aosPushInfo}]},logout:{sid:2,cid:6,service:"auth"},heartbeat:{sid:1,cid:2,service:"auth"},kicked:{sid:2,cid:5,service:"auth",response:[{type:"Number",name:"clientType"},{type:"Number",name:"reason"},{type:"String",name:"ext"},{type:"Number",name:"customClientType"}]},multiPortLogin:{sid:2,cid:7,service:"auth",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",reflectMapper:np.loginPort}]},kick:{sid:2,cid:8,service:"auth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]}},tm=`	
\v\f\r                　\u2028\u2029\uFEFF`,rm=Ne("".replace),qu="["+tm+"]",Hu=RegExp("^"+qu+qu+"*"),Rh=RegExp(qu+qu+"*$"),nm=function(_e){return function(he){var Ue=Xs(Sr(he));return 1&_e&&(Ue=rm(Ue,Hu,"")),2&_e&&(Ue=rm(Ue,Rh,"")),Ue}},Bh={start:nm(1),end:nm(2),trim:nm(3)},Db=Bh.trim,zu=$.parseInt,Lh=$.Symbol,Ub=Lh&&Lh.iterator,Vb=/^[+-]?0x/i,MT=Ne(Vb.exec),qb=zu(tm+"08")!==8||zu(tm+"0x16")!==22||Ub&&!V(function(){zu(Object(Ub))})?function(he,Ue){var $e=Db(Xs(he));return zu($e,Ue>>>0||(MT(Vb,$e)?16:10))}:zu;xn({global:!0,forced:parseInt!=qb},{parseInt:qb});var Xl,es,op,za,ki,jo=_r.parseInt;(function(_e){_e[_e.text=0]="text",_e[_e.image=1]="image",_e[_e.audio=2]="audio",_e[_e.video=3]="video",_e[_e.geo=4]="geo",_e[_e.notification=5]="notification",_e[_e.file=6]="file",_e[_e.tip=10]="tip",_e[_e.robot=11]="robot",_e[_e.g2=12]="g2",_e[_e.custom=100]="custom"})(Xl||(Xl={})),function(_e){_e[_e.p2p=0]="p2p",_e[_e.team=1]="team",_e[_e.superTeam=5]="superTeam"}(es||(es={})),function(_e){_e[_e.Android=1]="Android",_e[_e.iOS=2]="iOS",_e[_e.PC=4]="PC",_e[_e.WindowsPhone=8]="WindowsPhone",_e[_e.Web=16]="Web",_e[_e.Server=32]="Server",_e[_e.Mac=64]="Mac"}(op||(op={})),function(_e){_e[_e.unread=1]="unread",_e[_e.read=2]="read",_e[_e.deleted=3]="deleted",_e[_e.sending=4]="sending",_e[_e.sendFailed=5]="sendFailed",_e[_e.sent=6]="sent",_e[_e.receipt=7]="receipt",_e[_e.refused=10]="refused"}(za||(za={})),function(_e){_e[_e.default=0]="default",_e[_e.leave=1]="leave",_e[_e.roam=2]="roam"}(ki||(ki={}));var Hb=da("Array").values,Fh=Array.prototype,zb={DOMTokenList:!0,NodeList:!0},om=function(_e){var he=_e.values;return _e===Fh||sr(Fh,_e)&&he===Fh.values||Rn(zb,Rl(_e))?Hb:he},$h=function(he,Ue){return function($e){return he(Ue($e))}},jh=$h(Object.getPrototypeOf,Object),Wb=Function.prototype,kT=Object.prototype,ap=Wb.toString,wT=kT.hasOwnProperty,_T=ap.call(Object),Zl=function(he){if(!Vi(he)||ma(he)!="[object Object]")return!1;var Ue=jh(he);if(Ue===null)return!0;var $e=wT.call(Ue,"constructor")&&Ue.constructor;return typeof $e=="function"&&$e instanceof $e&&ap.call($e)==_T};function oi(_e,he){if(!Zl(he))return{};var Ue=JSON.parse(va(he)),$e=Gb(_e,Ue);return JSON.parse(va(Gn(Gn({},Ue),$e)))}function Gb(_e,he){if(!Zl(he))return{};var Ue={},$e=fa(_e);return So($e).call($e,function(Ce){var Lt=_e[Ce].type;if(typeof Lt!="string"){var er=Gb(_e[Ce],he);fa(er).length>0&&(Ue[Ce]=er)}else{var rr=_e[Ce],fr=rr.rawKey||Ce,kr=xT[Lt](he,fr,rr);kr!==void 0&&(he[fr]=void 0,Ue[Ce]=kr)}}),Ue}var xT={number:function(he,Ue){if(he[Ue]!==void 0)return+he[Ue]},string:function(he,Ue){if(he[Ue]!==void 0)return he[Ue]},boolean:function(he,Ue){return+he[Ue]>0||+he[Ue]!=0&&void 0},enum:function(he,Ue,$e){return om($e)[he[Ue]]},object:function(he,Ue){if(he[Ue]!==void 0)try{return JSON.parse(he[Ue])}catch{return{}}}};function am(_e,he){if(!Zl(he))return{};var Ue=JSON.parse(va(he)),$e=Kb(_e,Ue);return JSON.parse(va(Gn(Gn({},Ue),$e)))}function Kb(_e,he){var Ue;if(!Zl(he))return Hf(Ue=fa(_e)).call(Ue,function(Lt,er){return Lt[_e[er].rawKey||er]=void 0,Lt},{});var $e={},Ce=fa(_e);return So(Ce).call(Ce,function(Lt){var er=_e[Lt].type;if(typeof er!="string"){var rr=Kb(_e[Lt],he[Lt]);return Gn($e,rr),void(he[Lt]=void 0)}var fr=_e[Lt],kr=fr.rawKey||Lt,Er=Qb[er](he,Lt,fr);he[kr]=void 0,$e[kr]=Er}),$e}var Qb={number:function(he,Ue){return he[Ue]},string:function(he,Ue){return he[Ue]},boolean:function(he,Ue){return he[Ue]===!0?1:he[Ue]===!1?0:void 0},enum:function(he,Ue,$e){return om($e)[he[Ue]]},object:function(he,Ue){if(he[Ue]!==void 0)try{return va(he[Ue])}catch{return""}}},Jb=Qb,Dh=function(he){return function(){return he}},Yb=function(he){return function(Ue,$e,Ce){for(var Lt=-1,er=Object(Ue),rr=Ce(Ue),fr=rr.length;fr--;){var kr=rr[he?fr:++Lt];if($e(er[kr],kr,er)===!1)break}return Ue}}(),IT=function(he,Ue){for(var $e=-1,Ce=Array(he);++$e<he;)Ce[$e]=Ue($e);return Ce},sp=function(he){return Vi(he)&&ma(he)=="[object Arguments]"},Wu=Object.prototype,Uh=Wu.hasOwnProperty,ds=Wu.propertyIsEnumerable,ET=sp(function(){return arguments}())?sp:function(_e){return Vi(_e)&&Uh.call(_e,"callee")&&!ds.call(_e,"callee")},ip=ET,Xb=function(){return!1},cp=g(function(_e,he){var Ue=he&&!he.nodeType&&he,$e=Ue&&_e&&!_e.nodeType&&_e,Ce=$e&&$e.exports===Ue?sc.Buffer:void 0,Lt=(Ce?Ce.isBuffer:void 0)||Xb;_e.exports=Lt}),Vh=/^(?:0|[1-9]\d*)$/,sm=function(he,Ue){var $e=typeof he;return!!(Ue=Ue??9007199254740991)&&($e=="number"||$e!="symbol"&&Vh.test(he))&&he>-1&&he%1==0&&he<Ue},qh=function(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991},Ya={};Ya["[object Float32Array]"]=Ya["[object Float64Array]"]=Ya["[object Int8Array]"]=Ya["[object Int16Array]"]=Ya["[object Int32Array]"]=Ya["[object Uint8Array]"]=Ya["[object Uint8ClampedArray]"]=Ya["[object Uint16Array]"]=Ya["[object Uint32Array]"]=!0,Ya["[object Arguments]"]=Ya["[object Array]"]=Ya["[object ArrayBuffer]"]=Ya["[object Boolean]"]=Ya["[object DataView]"]=Ya["[object Date]"]=Ya["[object Error]"]=Ya["[object Function]"]=Ya["[object Map]"]=Ya["[object Number]"]=Ya["[object Object]"]=Ya["[object RegExp]"]=Ya["[object Set]"]=Ya["[object String]"]=Ya["[object WeakMap]"]=!1;var PT=function(he){return Vi(he)&&qh(he.length)&&!!Ya[ma(he)]},cl=function(he){return function(Ue){return he(Ue)}},cc=g(function(_e,he){var Ue=he&&!he.nodeType&&he,$e=Ue&&_e&&!_e.nodeType&&_e,Ce=$e&&$e.exports===Ue&&Wd.process,Lt=function(){try{var er=$e&&$e.require&&$e.require("util").types;return er||Ce&&Ce.binding&&Ce.binding("util")}catch{}}();_e.exports=Lt}),Zb=cc&&cc.isTypedArray,im=Zb?cl(Zb):PT,AT=Object.prototype.hasOwnProperty,Hh=function(he,Ue){var $e=ei(he),Ce=!$e&&ip(he),Lt=!$e&&!Ce&&cp(he),er=!$e&&!Ce&&!Lt&&im(he),rr=$e||Ce||Lt||er,fr=rr?IT(he.length,String):[],kr=fr.length;for(var Er in he)!Ue&&!AT.call(he,Er)||rr&&(Er=="length"||Lt&&(Er=="offset"||Er=="parent")||er&&(Er=="buffer"||Er=="byteLength"||Er=="byteOffset")||sm(Er,kr))||fr.push(Er);return fr},zh=Object.prototype,Wh=function(he){var Ue=he&&he.constructor;return he===(typeof Ue=="function"&&Ue.prototype||zh)},NT=$h(Object.keys,Object),OT=Object.prototype.hasOwnProperty,RT=function(he){if(!Wh(he))return NT(he);var Ue=[];for(var $e in Object(he))OT.call(he,$e)&&$e!="constructor"&&Ue.push($e);return Ue},Gu=function(he){return he!=null&&qh(he.length)&&!lh(he)},Ku=function(he){return Gu(he)?Hh(he):RT(he)},BT=function(he,Ue){return he&&Yb(he,Ue,Ku)},LT=function(he,Ue,$e,Ce){return BT(he,function(Lt,er,rr){Ue(Ce,$e(Lt),er,rr)}),Ce},Gh=function(he,Ue){return function($e,Ce){return LT($e,he,Ue(Ce),{})}},Kh,eu=function(he){return he},Cs=Object.prototype.toString,hs=Gh(function(_e,he,Ue){he!=null&&typeof he.toString!="function"&&(he=Cs.call(he)),_e[he]=Ue},Dh(eu)),FT=hs({Android:1,iOS:2,PC:4,WindowsPhone:8,Web:16,Server:32,Mac:64}),Qh={p2p:0,team:1,superTeam:5};function cm(_e,he){return _e&&_e.length>0?Lo(_e).call(_e,function(Ue){return Gn(Gn({},Ue),{account:Ue.account,connectionId:Ue.connectionId,deviceId:Ue.deviceId,ip:Ue.ip,mac:Ue.mac,os:Ue.os,type:FT[Ue.type]||Ue.type,time:jo(Ue.time),online:he!==3})}):[]}hs(Qh),function(_e){_e[_e.text=0]="text",_e[_e.image=1]="image",_e[_e.audio=2]="audio",_e[_e.video=3]="video",_e[_e.geo=4]="geo",_e[_e.notification=5]="notification",_e[_e.file=6]="file",_e[_e.tip=10]="tip",_e[_e.robot=11]="robot",_e[_e.g2=12]="g2",_e[_e.custom=100]="custom"}(Kh||(Kh={}));var e0={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},$T=function(){this.__data__=new Df,this.size=0},t0=function(he){var Ue=this.__data__,$e=Ue.delete(he);return this.size=Ue.size,$e},jT=function(he){return this.__data__.get(he)},DT=function(he){return this.__data__.has(he)},UT=function(he,Ue){var $e=this.__data__;if($e instanceof Df){var Ce=$e.__data__;if(!Ru||Ce.length<199)return Ce.push([he,Ue]),this.size=++$e.size,this;$e=this.__data__=new Uf(Ce)}return $e.set(he,Ue),this.size=$e.size,this};function Qu(_e){var he=this.__data__=new Df(_e);this.size=he.size}Qu.prototype.clear=$T,Qu.prototype.delete=t0,Qu.prototype.get=jT,Qu.prototype.has=DT,Qu.prototype.set=UT;var Ju=Qu,lp=function(){try{var _e=Gl(Object,"defineProperty");return _e({},"",{}),_e}catch{}}(),lm=function(he,Ue,$e){Ue=="__proto__"&&lp?lp(he,Ue,{configurable:!0,enumerable:!0,value:$e,writable:!0}):he[Ue]=$e},um=function(he,Ue,$e){($e!==void 0&&!Xd(he[Ue],$e)||$e===void 0&&!(Ue in he))&&lm(he,Ue,$e)},r0=g(function(_e,he){var Ue=he&&!he.nodeType&&he,$e=Ue&&_e&&!_e.nodeType&&_e,Ce=$e&&$e.exports===Ue?sc.Buffer:void 0,Lt=Ce?Ce.allocUnsafe:void 0;_e.exports=function(rr,fr){if(fr)return rr.slice();var kr=rr.length,Er=Lt?Lt(kr):new rr.constructor(kr);return rr.copy(Er),Er}}),up=sc.Uint8Array,dm=function(he){var Ue=new he.constructor(he.byteLength);return new up(Ue).set(new up(he)),Ue},n0=function(he,Ue){var $e=Ue?dm(he.buffer):he.buffer;return new he.constructor($e,he.byteOffset,he.length)},o0=function(he,Ue){var $e=-1,Ce=he.length;for(Ue||(Ue=Array(Ce));++$e<Ce;)Ue[$e]=he[$e];return Ue},a0=Object.create,VT=function(){function _e(){}return function(he){if(!ri(he))return{};if(a0)return a0(he);_e.prototype=he;var Ue=new _e;return _e.prototype=void 0,Ue}}(),Jh=function(he){return typeof he.constructor!="function"||Wh(he)?{}:VT(jh(he))},pm=function(he){return Vi(he)&&Gu(he)},Yu=function(he,Ue){if((Ue!=="constructor"||typeof he[Ue]!="function")&&Ue!="__proto__")return he[Ue]},qT=Object.prototype.hasOwnProperty,Yh=function(he,Ue,$e){var Ce=he[Ue];qT.call(he,Ue)&&Xd(Ce,$e)&&($e!==void 0||Ue in he)||lm(he,Ue,$e)},tu=function(he,Ue,$e,Ce){var Lt=!$e;$e||($e={});for(var er=-1,rr=Ue.length;++er<rr;){var fr=Ue[er],kr=Ce?Ce($e[fr],he[fr],fr,$e,he):void 0;kr===void 0&&(kr=he[fr]),Lt?lm($e,fr,kr):Yh($e,fr,kr)}return $e},fm=function(he){var Ue=[];if(he!=null)for(var $e in Object(he))Ue.push($e);return Ue},Xh=Object.prototype.hasOwnProperty,HT=function(he){if(!ri(he))return fm(he);var Ue=Wh(he),$e=[];for(var Ce in he)(Ce!="constructor"||!Ue&&Xh.call(he,Ce))&&$e.push(Ce);return $e},Xu=function(he){return Gu(he)?Hh(he,!0):HT(he)},zT=function(he){return tu(he,Xu(he))},WT=function(he,Ue,$e,Ce,Lt,er,rr){var fr=Yu(he,$e),kr=Yu(Ue,$e),Er=rr.get(kr);if(Er)um(he,$e,Er);else{var Rr=er?er(fr,kr,$e+"",he,Ue,rr):void 0,$r=Rr===void 0;if($r){var Hr=ei(kr),Gr=!Hr&&cp(kr),vn=!Hr&&!Gr&&im(kr);Rr=kr,Hr||Gr||vn?ei(fr)?Rr=fr:pm(fr)?Rr=o0(fr):Gr?($r=!1,Rr=r0(kr,!0)):vn?($r=!1,Rr=n0(kr,!0)):Rr=[]:Zl(kr)||ip(kr)?(Rr=fr,ip(fr)?Rr=zT(fr):ri(fr)&&!lh(fr)||(Rr=Jh(kr))):$r=!1}$r&&(rr.set(kr,Rr),Lt(Rr,kr,Ce,er,rr),rr.delete(kr)),um(he,$e,Rr)}},GT=function _e(he,Ue,$e,Ce,Lt){he!==Ue&&Yb(Ue,function(er,rr){if(Lt||(Lt=new Ju),ri(er))WT(he,Ue,rr,$e,_e,Ce,Lt);else{var fr=Ce?Ce(Yu(he,rr),er,rr+"",he,Ue,Lt):void 0;fr===void 0&&(fr=er),um(he,rr,fr)}},Xu)},KT=function(he,Ue,$e){switch($e.length){case 0:return he.call(Ue);case 1:return he.call(Ue,$e[0]);case 2:return he.call(Ue,$e[0],$e[1]);case 3:return he.call(Ue,$e[0],$e[1],$e[2])}return he.apply(Ue,$e)},Zh=Math.max,ev=function(he,Ue,$e){return Ue=Zh(Ue===void 0?he.length-1:Ue,0),function(){for(var Ce=arguments,Lt=-1,er=Zh(Ce.length-Ue,0),rr=Array(er);++Lt<er;)rr[Lt]=Ce[Ue+Lt];Lt=-1;for(var fr=Array(Ue+1);++Lt<Ue;)fr[Lt]=Ce[Lt];return fr[Ue]=$e(rr),KT(he,this,fr)}},QT=lp?function(_e,he){return lp(_e,"toString",{configurable:!0,enumerable:!1,value:Dh(he),writable:!0})}:eu,s0=Date.now,i0=function(he){var Ue=0,$e=0;return function(){var Ce=s0(),Lt=16-(Ce-$e);if($e=Ce,Lt>0){if(++Ue>=800)return arguments[0]}else Ue=0;return he.apply(void 0,arguments)}},mm=i0(QT),tv=function(he,Ue){return mm(ev(he,Ue,eu),he+"")},c0=function(he,Ue,$e){if(!ri($e))return!1;var Ce=typeof Ue;return!!(Ce=="number"?Gu($e)&&sm(Ue,$e.length):Ce=="string"&&Ue in $e)&&Xd($e[Ue],he)},rv=function(he){return tv(function(Ue,$e){var Ce=-1,Lt=$e.length,er=Lt>1?$e[Lt-1]:void 0,rr=Lt>2?$e[2]:void 0;for(er=he.length>3&&typeof er=="function"?(Lt--,er):void 0,rr&&c0($e[0],$e[1],rr)&&(er=Lt<3?void 0:er,Lt=1),Ue=Object(Ue);++Ce<Lt;){var fr=$e[Ce];fr&&he(Ue,fr,Ce,er)}return Ue})},l0=rv(function(_e,he,Ue){GT(_e,he,Ue)}),u0=Gc.some,d0=Zi("some");xn({target:"Array",proto:!0,forced:!d0},{some:function(he){return u0(this,he,arguments.length>1?arguments[1]:void 0)}});var Ws,Gs,JT=da("Array").some,nv=Array.prototype,gm=function(_e){var he=_e.some;return _e===nv||sr(nv,_e)&&he===nv.some?JT:he};(function(_e){_e[_e.Unset=0]="Unset",_e[_e.RN=2]="RN",_e[_e.UNIAPP=3]="UNIAPP",_e[_e.Electron=5]="Electron",_e[_e.WeiXin=6]="WeiXin",_e[_e.BROWSER=100]="BROWSER",_e[_e.H5=101]="H5",_e[_e.Ali=102]="Ali",_e[_e.Baidu=103]="Baidu",_e[_e.Tiktok=104]="Tiktok"})(Ws||(Ws={})),function(_e){_e[_e.kStatNetTypeUnkonw=0]="kStatNetTypeUnkonw",_e[_e.kStatNetTypeEthernet=1]="kStatNetTypeEthernet",_e[_e.kStatNetTypeWifi=2]="kStatNetTypeWifi",_e[_e.kStatNetType2G=3]="kStatNetType2G",_e[_e.kStatNetType3G=4]="kStatNetType3G",_e[_e.kStatNetType4G=5]="kStatNetType4G",_e[_e.kStatNetType5G=6]="kStatNetType5G"}(Gs||(Gs={}));var ov={wifi:Gs.kStatNetTypeWifi,"2g":Gs.kStatNetType2G,"3g":Gs.kStatNetType3G,"4g":Gs.kStatNetType4G,"5g":Gs.kStatNetType5G,ethernet:Gs.kStatNetTypeEthernet,unknown:Gs.kStatNetTypeUnkonw,none:Gs.kStatNetTypeUnkonw,notreachable:Gs.kStatNetTypeUnkonw,wwan:Gs.kStatNetTypeUnkonw};function Zu(){if(!navigator||!navigator.userAgent)return!1;var _e=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return gm(_e).call(_e,function(he){return navigator.userAgent.match(he)})}function av(){var _e;return!(!navigator||!navigator.userAgent)&&typeof navigator=="object"&&typeof navigator.userAgent=="string"&&Ja(_e=navigator.userAgent).call(_e,"Electron")>=0}function p0(){return navigator&&navigator.userAgent}var Vo={setLogger:function(he){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function _e(Ue,$e){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var he=_e.prototype;return he.close=function($e,Ce){throw new Error("Method not implemented.")},he.send=function($e){throw new Error("Method not implemented.")},he.onclose=function($e){throw new Error("Method not implemented.")},he.onerror=function($e){throw new Error("Method not implemented.")},he.onmessage=function($e){throw new Error("Method not implemented.")},he.onopen=function($e){throw new Error("Method not implemented.")},_e}(),localStorage:{},request:function(he,Ue){throw new Error("Function not implemented.")},uploadFile:function(he){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")},net:{__getEnv:function(){return null},__onNetworkStatusChangeFn:null,getNetworkStatus:function(){var he=this.__getEnv();return new ka(function(Ue,$e){he.getNetworkType({success:function(Lt){var er=!1;er=typeof Lt.networkAvailable=="boolean"?Lt.networkAvailable:Lt.networkType.toLowerCase()!=="none",Ue({net_type:ov[Lt.networkType.toLowerCase()],net_connect:er})},fail:function(){$e(new Error("getNetworkType failed"))}})})},onNetworkStatusChange:function(he){var Ue=this.__getEnv();this.offNetworkStatusChange(),Ue.onNetworkStatusChange&&(this.__onNetworkStatusChangeFn=function($e){var Ce=$e.networkType.toLowerCase();he({isConnected:$e.isConnected||Ce!=="none",networkType:ov[Ce]})},Ue.onNetworkStatusChange(this.__onNetworkStatusChangeFn))},offNetworkStatusChange:function(){var he=this.__getEnv();he.offNetworkStatusChange&&(this.__onNetworkStatusChangeFn&&he.offNetworkStatusChange(this.__onNetworkStatusChangeFn),this.__onNetworkStatusChangeFn=null)}}},YT=ed;function ed(_e){_e=_e||{},this.ms=_e.min||100,this.max=_e.max||1e4,this.factor=_e.factor||2,this.jitter=_e.jitter>0&&_e.jitter<=1?_e.jitter:0,this.attempts=0}ed.prototype.duration=function(){var _e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var he=Math.random(),Ue=Math.floor(he*this.jitter*_e);_e=1&Math.floor(10*he)?_e+Ue:_e-Ue}return 0|Math.min(_e,this.max)},ed.prototype.reset=function(){this.attempts=0},ed.prototype.setMin=function(_e){this.ms=_e},ed.prototype.setMax=function(_e){this.max=_e},ed.prototype.setJitter=function(_e){this.jitter=_e};var f0=function(he){return this.__data__.set(he,"__lodash_hash_undefined__"),this},m0=function(he){return this.__data__.has(he)};function dp(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.__data__=new Uf;++he<Ue;)this.add(_e[he])}dp.prototype.add=dp.prototype.push=f0,dp.prototype.has=m0;var zi=dp,g0=function(he,Ue,$e,Ce){for(var Lt=he.length,er=$e+(Ce?1:-1);Ce?er--:++er<Lt;)if(Ue(he[er],er,he))return er;return-1},XT=function(he){return he!=he},ZT=function(he,Ue,$e){for(var Ce=$e-1,Lt=he.length;++Ce<Lt;)if(he[Ce]===Ue)return Ce;return-1},h0=function(he,Ue,$e){return Ue==Ue?ZT(he,Ue,$e):g0(he,XT,$e)},Ro=function(he,Ue){return!!(he!=null&&he.length)&&h0(he,Ue,0)>-1},ru=function(he,Ue,$e){for(var Ce=-1,Lt=he==null?0:he.length;++Ce<Lt;)if($e(Ue,he[Ce]))return!0;return!1},hm=function(he,Ue){return he.has(Ue)},ll=Gl(sc,"Set"),v0=function(){},ul=function(he){var Ue=-1,$e=Array(he.size);return he.forEach(function(Ce){$e[++Ue]=Ce}),$e},eC=ll&&1/ul(new ll([,-0]))[1]==1/0?function(_e){return new ll(_e)}:v0,jn=eC,tC=function(he,Ue,$e){var Ce=-1,Lt=Ro,er=he.length,rr=!0,fr=[],kr=fr;if($e)rr=!1,Lt=ru;else if(er>=200){var Er=Ue?null:jn(he);if(Er)return ul(Er);rr=!1,Lt=hm,kr=new zi}else kr=Ue?[]:fr;e:for(;++Ce<er;){var Rr=he[Ce],$r=Ue?Ue(Rr):Rr;if(Rr=$e||Rr!==0?Rr:0,rr&&$r==$r){for(var Hr=kr.length;Hr--;)if(kr[Hr]===$r)continue e;Ue&&kr.push($r),fr.push(Rr)}else Lt(kr,$r,$e)||(kr!==fr&&kr.push($r),fr.push(Rr))}return fr},vm=function(he){return he&&he.length?tC(he):[]},sv=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],iv=["transport not supported","client not handshaken","unauthorized"],y0=["reconnect"],rC=function(_e){function he($e,Ce){var Lt;return(Lt=_e.call(this)||this).url=Ce,Lt.websocket=null,Lt.socketConnectTimer=0,Lt.core=$e,Lt.url=Ce,Lt.status="disconnected",Lt.logger=$e.logger,Lt.connect(),Lt}ra(he,_e);var Ue=he.prototype;return Ue.connect=function(){var Ce=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+To(),{method:"GET",dataType:"text",timeout:this.core.options.xhrConnectTimeout||8e3},{exception_service:6}).then(function(Lt){var er=Lt.data.split(":"),rr=er[0],fr=er[1];return Ce.sessionId=rr,Ce.closeTimeout=1e3*fr,Ce._createWebsocket("wss://"+Ce.url+"/socket.io/1/websocket/"+rr)}).catch(function(Lt){Lt=Lt||{},Ce.logger.error("imsocket::handshake fail. message: ",Lt&&Lt.message," err code: ",Lt&&Lt.code),Lt.code=Lt.code===408?408:415,Ce.status="disconnected",Ce.emit("handshakeFailed",Lt)})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},Ue.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"}))}catch(Ce){this.logger.warn("attempt to send encodePacket error",Ce)}try{this.websocket.close()}catch(Ce){this.logger.warn("attempt to close websocket error",Ce)}this.clean()}},Ue.clean=function(){this.status="disconnected",this.websocket&&(this.socketUrl=void 0,this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},Ue.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect"),clearTimeout(this.socketConnectTimer)},Ue._createWebsocket=function(Ce){var Lt,er=this;this.socketConnectTimer=yi(function(){er.logger.error("core:: socket connect timeout. url: ",er.socketUrl),er.emit("handshakeFailed",new Hi("BaseWebsocket::_createWebSocket socket connect timeout. url: "+er.socketUrl,{},408))},this.core.options.socketConnectTimeout||8e3),this.socketUrl=Ce,this.websocket=new Vo.WebSocket(Ce),this.websocket.onmessage=oa(Lt=this.onMessage).call(Lt,this),this.websocket.onclose=function(){er.logger.log("imsocket:: websocket onclose done"),er.clean()},this.websocket.onerror=function(rr){er.logger.error("imsocket:: onerror",rr),er.core.status==="logined"&&er.core.clientSocket.ping()}},Ue.onMessage=function(Ce){var Lt;this.resetCloseTimer();var er=this.decodePacket(Ce.data);if(er)switch(er.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",er.data);break;case"event":er.name&&this.emit(er.name,er.args);break;case"error":er.reason==="unauthorized"?this.emit("connect_failed",er.reason):this.emit("error",er.reason),this.logger.error("core:: socket onmessage type error. url: ",this.socketUrl),clearTimeout(this.socketConnectTimer),this.emit("handshakeFailed",new Hi("BaseWebsocket::onMessage socket error. url: "+this.socketUrl,{},415));break;case"heartbeat":(Lt=this.websocket)===null||Lt===void 0||Lt.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",er.type)}},Ue.encodePacket=function(Ce){var Lt,er,rr=Ce.type,fr=Ce.id,kr=fr===void 0?"":fr,Er=Ce.endpoint,Rr=Er===void 0?"":Er,$r=Ce.ack,Hr=null;if(!rr)return"";switch(rr){case"error":Lt=Ce.reason?Ja(iv).call(iv,Ce.reason):"",er=Ce.advice?Ja(y0).call(y0,Ce.advice):"",Lt===""&&er===""||(Hr=Lt+(er!==""?"+"+er:""));break;case"message":Ce.data!==""&&(Hr=Ce.data);break;case"event":Lt={name:Ce.name},Lt=Ce.args&&Ce.args.length?{name:Ce.name,args:Ce.args}:{name:Ce.name},Hr=va(Lt);break;case"json":Hr=va(Ce.data);break;case"connect":Ce.qs&&(Hr=Ce.qs);break;case"ack":Hr=Ce.ackId+(Ce.args&&Ce.args.length?"+"+va(Ce.args):"")}var Gr=[Ja(sv).call(sv,rr),kr+($r==="data"?"+":""),Rr];return Hr!=null&&Gr.push(Hr),Gr.join(":")},Ue.decodePacket=function(Ce){if(Ce)if(Ce.charAt(0)!="�"){var Lt=Ce.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(Lt){var er,rr=Lt[1],fr=Lt[2],kr=Lt[3],Er=Lt[4],Rr=Lt[5],$r={type:sv[+rr],endpoint:Er};switch(fr&&($r.id=fr,$r.ack=!kr||"data"),$r.type){case"error":er=Rr.split("+"),$r.reason=iv[+er[0]]||"";break;case"message":$r.data=Rr||"";break;case"connect":$r.qs=Rr||"";break;case"event":try{var Hr=JSON.parse(Rr);$r.name=Hr.name,$r.args=Hr.args}catch(Gr){this.logger.error("imsocket::parseData::type::event error",Gr)}$r.args=$r.args||[];break;case"json":try{$r.data=JSON.parse(Rr)}catch(Gr){this.logger.error("imsocket::parseData::type::json error",Gr)}break;case"ack":if((er=Rr.match(/^([0-9]+)(\+)?(.*)/))&&($r.ackId=er[1],$r.args=[],er[3]))try{$r.args=er[3]?JSON.parse(er[3]):[]}catch(Gr){this.logger.error("imsocket::parseData::type::ack error",Gr)}}return $r}}else this.logger.error("imsocket::unrecognize dataStr",Pa(Ce).call(Ce,0,20))},Ue.send=function(Ce){var Lt,er={data:Ce,type:"message",endpoint:""};(Lt=this.websocket)===null||Lt===void 0||Lt.send(this.encodePacket(er))},Ue.resetCloseTimer=function(){var Ce=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=yi(function(){Ce.close()},this.closeTimeout))},he}(Tf);xn({target:"Array",stat:!0},{isArray:Yi});var lc=_r.Array.isArray,b0=Gc.every,nC=Zi("every");xn({target:"Array",proto:!0,forced:!nC},{every:function(he){return b0(this,he,arguments.length>1?arguments[1]:void 0)}});var oC=da("Array").every,cv=Array.prototype,aC=function(_e){var he=_e.every;return _e===cv||sr(cv,_e)&&he===cv.every?oC:he},S0=function(he){return Vi(he)&&ma(he)=="[object RegExp]"},T0=cc&&cc.isRegExp,sC=T0?cl(T0):S0,pp=function(he,Ue,$e,Ce){var Lt=-1,er=Ro,rr=!0,fr=he.length,kr=[],Er=Ue.length;if(!fr)return kr;$e&&(Ue=Vf(Ue,cl($e))),Ce?(er=ru,rr=!1):Ue.length>=200&&(er=hm,rr=!1,Ue=new zi(Ue));e:for(;++Lt<fr;){var Rr=he[Lt],$r=$e==null?Rr:$e(Rr);if(Rr=Ce||Rr!==0?Rr:0,rr&&$r==$r){for(var Hr=Er;Hr--;)if(Ue[Hr]===$r)continue e;kr.push(Rr)}else er(Ue,$r,Ce)||kr.push(Rr)}return kr},lv=tv(function(_e,he){return pm(_e)?pp(_e,he):[]}),C0=lv;function iC(_e,he){return he instanceof RegExp?"__REGEXP "+he.toString():he}function Xn(_e,he,Ue){var $e;he===void 0&&(he={});var Ce={};return So($e=fa(_e)).call($e,function(Lt){var er=_e[Lt].type,rr=Ue?"In "+Ue+", ":"";if(he[Lt]===void 0){if(_e[Lt].required===!1)return void(Ce[Lt]=he[Lt]);throw new Uu(rr+'param "'+Lt+'" is required',{key:Lt},"required")}var fr=M0[er];if(fr&&!fr(he,Lt,_e[Lt]))throw new Uu(rr+'param "'+Lt+'" expects '+va(_e[Lt],iC),{key:Lt,value:he[Lt]},va(_e[Lt]));Ce[Lt]=he[Lt]}),Ce}var Ms,M0={string:function(he,Ue,$e){var Ce=$e.allowEmpty,Lt=$e.max,er=$e.min,rr=$e.regExp,fr=he[Ue];return typeof fr=="string"&&(Ce!==!1||fr!=="")&&!(typeof Lt=="number"&&fr.length>Lt)&&!(typeof er=="number"&&fr.length<er)&&!(sC(rr)&&!rr.test(fr))},number:function(he,Ue,$e){var Ce=$e.min,Lt=$e.max,er=he[Ue];return typeof er=="number"&&!(typeof Ce=="number"&&er<Ce)&&!(typeof Lt=="number"&&er>Lt)},boolean:function(he,Ue){return typeof he[Ue]=="boolean"},enum:function(he,Ue,$e){var Ce=om($e),Lt=he[Ue];return!Ce||Ja(Ce).call(Ce,Lt)>-1},array:function(he,Ue,$e){var Ce,Lt=$e.itemType,er=$e.rules,rr=$e.min,fr=$e.max,kr=om($e),Er=he[Ue];return!!lc(Er)&&!(typeof fr=="number"&&Er.length>fr)&&!(typeof rr=="number"&&Er.length<rr)&&!(Lt&&Lt!=="enum"&&!aC(Er).call(Er,function(Rr){return typeof Rr===Lt}))&&(Lt!=="enum"||!kr||!C0.apply(void 0,Os(Ce=[Er]).call(Ce,kr)).length)&&(er&&So(Er).call(Er,function(Rr,$r){return Xn(er,Rr,Ue+"["+$r+"]")}),!0)},object:function(he,Ue,$e){var Ce=$e.rules,Lt=he[Ue];return Ce&&Xn(Ce,Lt,Ue),!0}},nu="weblink.netease.im:443";(function(_e){_e[_e.ACTIVE=1]="ACTIVE",_e[_e.KICKED=2]="KICKED",_e[_e.OFFLINE=3]="OFFLINE"})(Ms||(Ms={}));var Ks=function(){function _e(Ue){this.linkUrls=[],this.isAutoReconnect=!1,this.packetTimeout=3e4,this.packetSer=1,this.retryCount=0,this.reconnectTimer=0,this.backoff=new YT({max:8e3,min:1600,jitter:.01}),this.sendingCmdMap=new xc,this.pingTimer=0,this.hasNetworkListener=!1,this.core=Ue,this.logger=Ue.logger,this.reporter=Ue.reporter,this.timerManager=Ue.timerManager}var he=_e.prototype;return he.connect=function($e,Ce){return $e===void 0&&($e={}),Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er,Rr;return Kr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(Xn({linkUrls:{type:"array",itemType:"string",required:!1}},$e),/^(unconnected|waitReconnect)$/.test(this.core.status)){Hr.next=5;break}return er="Core socket status is "+this.core.status+", and would not connect",this.logger.warn(er),Hr.abrupt("return",ka.reject(er));case 5:this.core.status="connecting",$e.linkUrls&&$e.linkUrls.length>0&&(this.linkUrls=Os(rr=$e.linkUrls).call(rr,this.linkUrls),this.linkUrls=vm(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push(nu),fr=0;case 9:if(!(fr<this.linkUrls.length)){Hr.next=31;break}return kr=this.linkUrls[fr],Er=new Date().getTime(),Hr.prev=12,Hr.next=15,this.doConnect(kr);case 15:return this.core.status="connected",this.logger.log("core:: connect success with url: "+kr),Hr.abrupt("return",kr);case 20:Hr.prev=20,Hr.t0=Hr.catch(12),Rr=Hr.t0,Ce&&Ce(Rr,kr),this.reporter.reportTraceStart("exceptions",{user_id:this.core.options.account,start_time:Er,action:0,exception_service:6}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Rr.code=="number"?Rr.code:0,description:Rr.message||""+Rr.code,operation_type:0,target:kr},{asyncParams:Vo.net.getNetworkStatus()}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+kr,Hr.t0);case 28:fr++,Hr.next=9;break;case 31:throw this.retryCount===0?this.doDisconnect(Ms.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(Ms.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket xhr or socket connect failed");case 33:case"end":return Hr.stop()}},Lt,this,[[12,20]])}))},he.doConnect=function($e){var Ce=this,Lt=!1;return new ka(function(er,rr){var fr;Ce.socket=new rC(Ce.core,$e),Ce.socket.on("connect",function(){Ce.logger.log("socket on connect",$e),Lt=!0,er()}),Ce.socket.on("message",oa(fr=Ce.onMessage).call(fr,Ce)),Ce.socket.on("disconnect",function(kr){Ce.logger.log("core:: socket on disconnect",kr),Lt=!0,Ce.doDisconnect(Ms.OFFLINE,"SocketOnDisconnect")}),Ce.socket.on("handshakeFailed",function(kr){Lt?Ce.ping():(Ce.logger.error("core:: handshake failed. ",kr&&kr.message),Ce.cleanSocket()),Lt=!0,rr(kr)})})},he.cleanSocket=function(){this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0)},he.beforeConnect=function(){this.reconnectTimer&&clearTimeout(this.reconnectTimer)},he.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},he.doDisconnect=function($e,Ce){if(this.logger.log("doDisconnect: type "+$e+", description "+Ce),this.core.status!=="unconnected"){var Lt={1:"close",2:"kicked",3:"broken"}[$e]||"";this.markAllCmdInvaild(new Hi("Packet timeout due to instance disconnect",{disconnect_reason:Lt},415)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.cleanSocket();var er=!this.core.options.needReconnect||this.retryCount>=this.core.options.reconnectionAttempts;if($e===Ms.ACTIVE||er)this.logger.log("doDisconnect: emit disconnect, type "+$e,er),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"),this.destroyOnlineListener();else if($e===Ms.KICKED){this.logger.log("doDisconnect: kicked"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var rr=typeof Ce=="string"?{reason:"unknow",message:Ce}:Ce;this.core.eventBus.emit("kicked",rr),this.core.emit("kicked",rr),this.destroyOnlineListener()}else $e===Ms.OFFLINE&&this.core.auth.isManualLoginAttempt?(this.logger.log("doDisconnect: offline in manual login phase. no reconnect"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.destroyOnlineListener()):$e===Ms.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},he.attempToReconnect=function(){var $e=this;if(this.core.status!=="waitReconnect"){this.retryCount===0&&(this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"));var Ce=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+Ce),this.core.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:Ce}),this.core.emit("willReconnect",{retryCount:this.retryCount,duration:Ce}),this.core.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=yi(function(){return Vn($e,void 0,void 0,Kr.mark(function Lt(){var er=this;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(this.core.status==="waitReconnect"){fr.next=3;break}return this.logger.warn("doDisconnect: reconnectTimer status is "+this.core.status+", would not go on reconnecting"),fr.abrupt("return");case 3:return fr.next=5,Vo.net.getNetworkStatus();case 5:fr.sent.net_connect===!1?(this.logger.log("doDisconnect: skip this reconnection attempt because network is offline"),this.core.status="connecting",this.retryCount>=this.core.options.reconnectionAttempts?this.doDisconnect(Ms.OFFLINE,"MaxReconnectionAttemptExceed"):this.attempToReconnect()):this.core.auth.login({isAutoReconnect:!0}).catch(function(){er.logger.error("core::attempToReconnect failed "+er.retryCount)});case 7:case"end":return fr.stop()}},Lt,this)}))},Ce)}else this.logger.warn("doDisconnect: already is waiting reconnect")},he.sendCmd=function($e,Ce,Lt){var er=this;if(this.core.status!=="logined"&&$e!=="login"&&$e!=="chatroomLogin"&&$e!=="qchatLogin")return this.logger.warn("instance status is "+this.core.status+", so can not sendCmd "+$e),ka.reject({cmd:$e,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return ka.reject("No_socket");var rr=$e!=="heartbeat",fr=rr?this.packetSer++:0,kr=function(In,Cn,Kn,Qn){var Mo=rp[In];if(!Mo)return Kn.error("createCmd:: can not find cmd config: ",In),null;var No,Ko={SER:Cn,SID:Mo.sid,CID:Mo.cid,Q:[]};return Mo.params&&Qn&&So(No=Mo.params).call(No,function(Ln){var Wr=Qn[Ln.name];if(!Yl(Wr)){var ro=Ln.type,so=Ln.reflectMapper;switch(Ln.type){case"PropertyArray":ro="ArrayMable",Wr=Lo(Wr).call(Wr,function(Yn){return{t:"Property",v:so?Oh(Yn,so):Yn}});break;case"Property":Wr=so?Oh(Wr,so):Wr;break;case"Bool":case"bool":Wr=Wr?"true":"false"}Ko.Q.push({t:ro,v:Wr})}}),{packet:Ko,hasPacketResponse:typeof Mo.hasPacketResponse!="boolean"||Mo.hasPacketResponse,hasPacketTimer:typeof Mo.hasPacketTimer!="boolean"||Mo.hasPacketTimer}}($e,fr,this.logger,Ce);if(!kr){var Er="SendCmd "+fr+" "+$e+" error";return this.logger.error(Er),ka.reject(Er)}var Rr=kr.packet,$r=kr.hasPacketResponse,Hr=kr.hasPacketTimer,Gr=va(Rr);rr&&(this.core.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",$e,"ser:"+fr,Gr):this.logger.log("core::sendCmd",$e,"ser:"+fr));var vn=new Date().getTime();return new ka(function(bn,In){$r&&er.sendingCmdMap.set(fr,{cmd:$e,params:Ce,callback:[bn,In],timer:Hr?yi(function(){var Kn=new Xf(408,$e,"Packet Timeout",new Date().getTime(),{message:"ser "+fr+" cmd "+$e+" timeout"});Kn.callFunc="sendCmd",er.markCmdInvalid(fr,Kn,$e)},Lt&&Lt.timeout?Lt.timeout:er.core.config.timeout):null});try{er.socket.send(Gr),$r||bn(Rr)}catch(Kn){var Cn=new Xf(415,$e,Kn&&Kn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Kn});Cn.callFunc="sendCmd",er.markCmdInvalid(fr,Cn,$e),In(Kn)}}).catch(function(bn){var In,Cn=[408,415];if(!mi(Cn).call(Cn,bn.code))return ka.reject(bn);er.reporter.reportTraceStart("exceptions",{user_id:er.core.options.account,trace_id:(In=er.socket)===null||In===void 0?void 0:In.sessionId,start_time:vn,action:2,exception_service:6});var Kn=Bs(bn,"data.disconnect_reason")||"",Qn=bn.code===408?"Send failed due to timeout":"Send failed. Reason unknown";return Qn=bn.code===415?va({disconnect_reason:Kn}):Qn,er.reporter.reportTraceUpdateV2("exceptions",{code:bn.code||415,description:Qn,operation_type:1,target:Rr.SID+"-"+Rr.CID,context:""+Rr.SER},{asyncParams:Vo.net.getNetworkStatus()}),er.reporter.reportTraceEnd("exceptions",1),ka.reject(bn)})},he.onMessage=function($e){var Ce=Nh($e,this.logger);if(Ce){var Lt=Ce.raw.ser;Ce.error&&this.logger.error("core:onMessage packet error",Ce.raw.sid+"_"+Ce.raw.cid+", ser:"+Lt+",",Ce.error),Ce.notFound?this.logger.warn("core::onMessage packet not found",Ce.raw.sid+"_"+Ce.raw.cid+", ser:"+Lt):(Ce.cmd!=="heartbeat"&&(this.core.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+Lt,Ce.cmd,Ce.content):this.logger.log("imsocket::recvCmd ser:"+Lt,Ce.cmd)),Ce.__receiveTime=To(),this.packetHandler(Ce))}},he.packetHandler=function($e){var Ce,Lt;if($e){var er=$e.raw.ser,rr=this.sendingCmdMap.get(er);if(rr&&rr.cmd===$e.cmd){var fr=rr.callback,kr=rr.timer,Er=rr.params;if(clearTimeout(kr),$e.params=Er,this.sendingCmdMap.delete(er),$e.cmd==="heartbeat")return void fr[0]();var Rr=(Ce=this.core[$e.service])===null||Ce===void 0?void 0:Ce.process($e);Rr&&typeof Rr.then=="function"?Rr.then(function($r){fr[0]($r)}).catch(function($r){fr[1]($r)}):(this.logger.log("imsocket:: handlerFn without promise",$e.service,$e.cmd),fr[0]())}else(Lt=this.core[$e.service])===null||Lt===void 0||Lt.process($e)}},he.markCmdInvalid=function($e,Ce,Lt){var er=this.sendingCmdMap.get($e);if(er){var rr=er.callback,fr=er.timer;fr&&clearTimeout(fr),this.sendingCmdMap.delete($e),this.logger.warn("packet "+$e+", "+Lt+" is invalid:",Ce),rr[1](Ce)}},he.markAllCmdInvaild=function($e){var Ce,Lt=this;this.logger.log("markAllCmdInvaild",$e),So(Ce=this.sendingCmdMap).call(Ce,function(er){var rr=er.callback,fr=er.timer,kr=er.cmd;Lt.logger.debug('markAllCmdInvaild:: cmd "'+kr+'"'),fr&&clearTimeout(fr),rr[1]($e)}),this.sendingCmdMap.clear()},he.ping=function(){return Vn(this,void 0,void 0,Kr.mark(function $e(){var Ce=this;return Kr.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return clearTimeout(this.pingTimer),er.prev=1,er.next=4,this.sendCmd("heartbeat");case 4:er.next=14;break;case 6:return er.prev=6,er.t0=er.catch(1),er.next=10,this.testHeartBeat5Timeout();case 10:if(!er.sent){er.next=14;break}return this.doDisconnect(Ms.OFFLINE,"PingError"),er.abrupt("return");case 14:this.pingTimer=yi(function(){Ce.ping()},3e4);case 15:case"end":return er.stop()}},$e,this,[[1,6]])}))},he.testHeartBeat5Timeout=function(){return Vn(this,void 0,void 0,Kr.mark(function $e(){var Ce;return Kr.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:clearTimeout(this.pingTimer),Ce=0;case 2:if(!(Ce<5)){er.next=15;break}return er.prev=3,er.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return er.abrupt("return",!1);case 9:er.prev=9,er.t0=er.catch(3),this.logger.debug("core:: test heartbeat "+Ce+" Timeout");case 12:Ce++,er.next=2;break;case 15:return er.abrupt("return",!0);case 16:case"end":return er.stop()}},$e,this,[[3,9]])}))},he.initOnlineListener=function(){var $e=this;this.hasNetworkListener||(this.logger.log("core::onlineListener:init"),this.hasNetworkListener=!0,Vo.net.onNetworkStatusChange(function(Ce){$e.logger.log("core::onlineListener:network change",Ce),Ce.isConnected&&$e.core.status==="logined"?$e.ping():Ce.isConnected&&$e.core.status==="waitReconnect"?($e.reconnectTimer&&clearTimeout($e.reconnectTimer),$e.core.auth.login({isAutoReconnect:!0}).catch(function(){$e.logger.error("core::attempToReconnect failed "+$e.retryCount)})):Ce.isConnected||$e.doDisconnect(Ms.OFFLINE,"OfflineListener")}))},he.destroyOnlineListener=function(){this.logger.log("core::onlineListener:destroy"),Vo.net.offNetworkStatusChange(),this.hasNetworkListener=!1},he.disconnect=function(){switch(this.core.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(Ms.ACTIVE,"UserActiveDisconnect"),ka.resolve();case"unconnected":case"destroyed":return ka.resolve()}},_e}(),k0=function(){function _e(he){this.socketLinkUrls=[],this.core=he,this.options=this.core.options,this.logger=this.core.logger}return _e.prototype.getLbsInfos=function(){var Ue;return Vn(this,void 0,void 0,Kr.mark(function $e(){var Ce,Lt,er,rr,fr,kr,Er,Rr,$r,Hr;return Kr.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if(!(this.socketLinkUrls.length>0)){vn.next=4;break}return Ce=this.socketLinkUrls,this.core.logger.log("auth::getLbsInfos:use cache link",Ce),vn.abrupt("return",ka.resolve(Ce));case 4:return Lt=this.options.lbsUrls[0],er=Ja(Lt).call(Lt,"?")>-1?"&":"?",rr=Lt+er+"k="+this.options.appkey+"&id="+this.options.account+"&sv=180&pv=1&networkType=0",vn.prev=7,this.logger.log("getLbsInfos ",rr),vn.next=11,this.core.adapters.request(rr,{method:"GET",dataType:"json",timeout:1e4},{exception_service:1});case 11:if((kr=vn.sent).status===200&&kr.data){vn.next=15;break}throw this.logger.error("getLbsInfos::error status",kr.status,kr),new Error("getLbsInfos failed, status "+kr.status);case 15:this.core.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:rr,code:200,succeed:!0},{asyncParams:Vo.net.getNetworkStatus()}),Er=kr.data,Rr=[this.options.linkUrl],Bs(Er,"common.link")&&(Rr=Os($r=Bs(Er,"common.link")).call($r,Rr)),Bs(Er,'common["link.default"]')&&(Rr=Os(Rr).call(Rr,Bs(Er,'common["link.default"]'))),this.socketLinkUrls=vm(Rr),kr.data["nos-chunk"]&&((Ue=this.core.cloudStorage)===null||Ue===void 0||Ue.setOptions({chunkUploadHost:kr.data["nos-chunk"]})),this.logger.log("getLbsInfos success, socket link:",Pa(fr=this.socketLinkUrls).call(fr,0),"chunkUploadHost: ",kr.data["nos-chunk"]),vn.next=31;break;case 25:vn.prev=25,vn.t0=vn.catch(7),Hr=vn.t0,this.logger.error("getLbsInfos::error",Hr),this.socketLinkUrls=[this.options.linkUrl],this.core.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:rr,description:Hr.message,code:Hr.code||0,succeed:!1},{asyncParams:Vo.net.getNetworkStatus()});case 31:return vn.abrupt("return",this.socketLinkUrls);case 32:case"end":return vn.stop()}},$e,this,[[7,25]])}))},_e}(),cC=function(){function _e(he){this.core=he}return _e.prototype.verifyAuthentication=function(Ue){var $e,Ce;return Ue===void 0&&(Ue=!1),Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er,Rr,$r,Hr,Gr,vn,bn;return Kr.wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return rr=this.core.options,fr=Vo.getSystemInfo(),kr=Gn(Gn({},rr),{appLogin:Ue?0:1,appkey:rr.appkey,account:rr.account,token:rr.token,deviceId:this.core.config.deviceId,clientType:16,protocolVersion:1,sdkVersion:91402,sdkHumanVersion:"0.17.2",os:fr.os,browser:fr.browser,session:($e=this.core.clientSocket.socket)===null||$e===void 0?void 0:$e.sessionId,userAgent:this.core.options.loginSDKTypeParamCompat?"Native/0.17.2":Pa(er=fr.userAgent).call(er,0,299),libEnv:this.core.options.loginSDKTypeParamCompat?void 0:fr.libEnv,hostEnv:this.core.options.loginSDKTypeParamCompat?0:fr.hostEnvEnum}),Er=fr.os.toLowerCase(),Vo.platform!=="UNIAPP"||Er!=="ios"&&Er!=="android"||(kr.isReactNative=1,kr.clientType=Er==="ios"?2:1,fr.pushDeviceInfo&&fr.pushDeviceInfo.MANUFACTURER&&(kr.deviceInfo=va(fr.pushDeviceInfo))),this.core.logger.log("auth::do login ",rr.account,(Ce=this.core.clientSocket.socket)===null||Ce===void 0?void 0:Ce.sessionId),Cn.next=8,this.core.clientSocket.sendCmd("login",{login:kr});case 8:if(!(Rr=Cn.sent).error){Cn.next=11;break}throw Rr.error;case 11:return $r=Rr.content,Hr=$r.loginRes,Gr=$r.loginPorts,vn=$r.aosPushInfo,bn=cm(Gr,2),(bn=Ss(bn).call(bn,function(Kn){return Kn.connectionId!==Hr.connectionId})).length>0&&this.core.emit("multiPortLogin",bn),Cn.abrupt("return",Gn(Gn({},Hr),{aosPushInfo:vn}));case 16:case"end":return Cn.stop()}},Lt,this)}))},_e}(),uv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"auth",$e)||this).account="",Ce.token="",Ce.deviceId="",Ce.isManualLoginAttempt=!1,Ts({cmdMap:Zf,cmdConfig:CT}),Ce.lbsService=new k0($e),Ce.authenticatorService=new cC($e),Ce}ra(he,_e);var Ue=he.prototype;return Ue.login=function(Ce){return Ce===void 0&&(Ce={}),Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Ce.isAutoReconnect||(this.isManualLoginAttempt=!0),rr.next=3,this._connect(Ce);case 3:return this.core.abtest.abtRequest(),rr.prev=4,rr.next=7,this.doLogin(Ce.isAutoReconnect);case 7:this.isManualLoginAttempt=!1,rr.next=14;break;case 10:throw rr.prev=10,rr.t0=rr.catch(4),this.isManualLoginAttempt=!1,rr.t0;case 14:case"end":return rr.stop()}},Lt,this,[[4,10]])}))},Ue._connect=function(Ce){return Ce===void 0&&(Ce={}),Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr=this;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.core.status)){Rr.next=4;break}return er="NIM status is "+this.core.status+", and would not connect",this.logger.warn(er),Rr.abrupt("return",ka.reject(er));case 4:return this.core.clientSocket.beforeConnect(),this.core.reporter.reportTraceCancel("login"),this.core.reporter.reportTraceStart("login",{user_id:this.core.options.account,action:Ce.isAutoReconnect?"auto_login":"manual_login"}),this.core.reporter.reportTraceUpdateV2("login",{code:0,description:va(Gn(Gn({},this.core.options),{account:"***",token:"***"})),operation_type:"conf_init",succeed:!0,duration:0,target:""}),Rr.next=10,this.lbsService.getLbsInfos();case 10:return rr=Rr.sent,Rr.prev=11,Rr.next=14,this.core.clientSocket.connect({linkUrls:rr,isAutoReconnect:Ce.isAutoReconnect},function($r,Hr){kr.core.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Hr,code:$r.code||408,description:"ws_handshake_failed:"+$r.message,succeed:!1},{asyncParams:Vo.net.getNetworkStatus()})});case 14:(fr=Rr.sent)&&this.core.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:fr,code:200,succeed:!0},{asyncParams:Vo.net.getNetworkStatus()}),Rr.next=22;break;case 18:throw Rr.prev=18,Rr.t0=Rr.catch(11),this.core.reporter.reportTraceEnd("login",!1),Rr.t0;case 22:case"end":return Rr.stop()}},Lt,this,[[11,18]])}))},Ue.doLogin=function(Ce){return Ce===void 0&&(Ce=!1),Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Rr.prev=0,Rr.next=3,this.authenticatorService.verifyAuthentication(Ce);case 3:er=Rr.sent,this.core.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:200,succeed:!0},{asyncParams:Vo.net.getNetworkStatus()}),this.core.reporter.reportTraceEnd("login",!0),this.core.status="logined",Rr.next=21;break;case 9:if(Rr.prev=9,Rr.t0=Rr.catch(0),rr=Rr.t0,fr=Bs(rr,"data.disconnect_reason")||"",kr=rr.code===415?va({disconnect_reason:fr}):rr.message,this.core.logger.warn("nim login:: login failed",Rr.t0),this.core.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:rr.code||0,succeed:!1,description:kr},{asyncParams:Vo.net.getNetworkStatus()}),this.core.reporter.reportTraceEnd("login",!1),this.core.clientSocket.doDisconnect(Ms.OFFLINE,this.isManualLoginAttempt?"FailedToInitializeLogin":"ReconnectLoginFailed"),!this.isManualLoginAttempt){Rr.next=20;break}throw Rr.t0;case 20:return Rr.abrupt("return");case 21:return Rr.prev=21,Rr.next=24,this.core.cloudStorage.init();case 24:Rr.next=29;break;case 26:Rr.prev=26,Rr.t1=Rr.catch(21),this.core.logger.error("NIM:login cloudStorage init failed ",Rr.t1);case 29:if(this.core.eventBus.emit("logined",er),this.core.emit("logined",er),this.core.logger.log("login done"),this.core.clientSocket.resetConnectStatus(),!this.core.sync||!this.core.sync.doSync){Rr.next=36;break}return Rr.next=36,this.core.sync.doSync();case 36:this.core.clientSocket.ping();case 37:case"end":return Rr.stop()}},Lt,this,[[0,9],[21,26]])}))},Ue.kick=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return kr.next=2,this.core.clientSocket.sendCmd("kick",Ce);case 2:return rr=kr.sent,kr.abrupt("return",(Lt=rr.content)===null||Lt===void 0?void 0:Lt.deviceIds);case 4:case"end":return kr.stop()}},er,this)}))},Ue.multiPortLoginHandler=function(Ce){if(Ce.error)this.logger.error("multiPortLoginHandler:: error, ",Ce.error);else{var Lt=Ce.content,er=cm(Lt.loginPorts,Lt.state);er.length>0&&this.core.emit("multiPortLogin",er)}},Ue.kickedHandler=function(Ce){if(Ce.error)this.logger.error("kickedHandler:: error, ",Ce.error);else{var Lt=function(rr){var fr=oi({clientType:{type:"enum",values:op},customClientType:{type:"number"}},rr),kr=e0[fr.reason];return Gn(fr,kr=kr||{reason:"unknow",message:"Unknown reason"})}(Ce.content);this.logger.warn("kicked::",Lt),this.core.clientSocket.doDisconnect(Ms.KICKED,Lt)}},he}(Ls),w0={"5_1":"sync"},dv={sync:{sid:5,cid:1,service:"sync",hasPacketTimer:!1,params:[{type:"Property",name:"sync",reflectMapper:{myInfo:1,offlineMsgs:2,teams:3,roamingMsgs:7,relations:9,friends:11,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,recallMsg:17,sessionAck:18,broadcastMsgs:20,avSignal:21,superTeams:22,mySuperTeamMembers:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteSelfMsgs:27,stickTopSessions:28,sessionHistoryMsgsDelete:29}}],response:[{type:"Number",name:"timetag"}]}};rv(function(_e,he,Ue,$e){tu(he,Ku(he),_e,$e)});var uc,Qo=(uc=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return uc()+uc()+uc()+uc()+uc()+uc()+uc()+uc()});function dc(_e){var he;return Ss(he=fa(_e)).call(he,function(Ue){return!(+Ue>=0)})}function _0(_e,he){var Ue,$e=Ss(Ue=fa(_e)).call(Ue,function(Ce){return _e[Ce]==he});return $e.length>0?$e[0]:void 0}function wi(_e,he){if(he===void 0&&(he="-"),!_e)throw new Hi("No sessionId",{},400);var Ue=Ja(_e).call(_e,he);if(Ue===-1)throw new Hi("Can not find conjunctions",{},400);var $e=Pa(_e).call(_e,0,Ue);return{accid:Pa(_e).call(_e,Ue+1),scene:$e==="super_team"?"superTeam":$e}}function fp(){return ka.resolve()}var Do=function(_e){function he($e,Ce){var Lt;return Ce===void 0&&(Ce={}),(Lt=_e.call(this,"sync",$e)||this).options=Ce,Lt.syncDoneFlag=!1,Lt.options=Gn({myInfo:!!$e.user.name,offlineMsgs:!!$e.msg.name,teams:!!$e.team.name,myTeamMembers:!!$e.team.name,roamingMsgs:!!$e.msg.name,relations:!!$e.user.name,friends:!!$e.friend.name,friendUsers:!!$e.user.name,msgReceipts:!!$e.msg.name,recallMsg:!!$e.msg.name,sessionAck:!!$e.session.name,superTeamSessionAck:!!$e.session.name,superTeams:!!$e.superTeam.name,mySuperTeamMembers:!!$e.superTeam.name,superTeamRoamingMsgs:!!$e.superTeam.name,deleteSuperTeamMsg:!!$e.superTeam.name,deleteSelfMsgs:!!$e.msg.name,sessionHistoryMsgsDelete:!!$e.msgLog.name,avSignal:!!$e.signaling.name},Ce),Lt.timetags={},Lt.pArray=[],Lt.initEventListeners(),Ts({cmdMap:w0,cmdConfig:dv}),Lt}ra(he,_e);var Ue=he.prototype;return Ue.setOptions=function(Ce){Ce===void 0&&(Ce={}),this.options=Gn(this.options,Ce)},Ue.getSyncDoneFlag=function(){return this.syncDoneFlag},Ue.doSync=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Lt=this.genSyncParams(),this.logger.log("doSync: ",Lt),rr.next=4,this.core.sendCmd("sync",{sync:Lt});case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.initEventListeners=function(){var Ce=this;this.core.eventBus.on("sync/updateTimetag",function(Lt){var er;So(er=fa(Lt)).call(er,function(rr){Lt[rr]>(Ce.timetags[rr]||0)&&(Ce.timetags[rr]=Lt[rr])})}),this.core.eventBus.on("logined",function(){Ce.syncDoneFlag=!1})},Ue.genSyncParams=function(){var Ce,Lt,er=this;return Hf(Ce=Ss(Lt=fa(this.options)).call(Lt,function(rr){var fr=rr;return er.options[fr]})).call(Ce,function(rr,fr){var kr=fr;return rr[kr]=er.timetags[kr]||0,rr},{})},Ue.handleImmediate=function(Ce){var Lt;this.core.session&&this.core.session.onSyncDone&&this.core.session.onSyncDone(),this.logger.log("sync: emit syncdone",(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.timetag),this.syncDoneFlag=!0,this.core.emit("syncdone")},Ue.syncHandler=function(Ce){var Lt=this;(function(){return typeof tt<"u"&&tt.getSystemInfo?"TT":typeof swan<"u"&&swan.getSystemInfo?"BAIDU":typeof my<"u"&&my.getSystemInfo?"ALI":typeof wx<"u"&&wx.getSystemInfo?"WX":"unknow environment"})()==="ALI"?(this.logger.log("sync: emit ALIAPP sycnHandler, handle later"),yi(function(){Lt.handleImmediate(Ce)},100)):this.handleImmediate(Ce)},he}(Ls),lC=TypeError,x0=Object.getOwnPropertyDescriptor,uC=ze&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(_e){return _e instanceof TypeError}}()?function(_e,he){if(Yi(_e)&&!x0(_e,"length").writable)throw lC("Cannot set read only .length");return _e.length=he}:function(_e,he){return _e.length=he},dC=TypeError,ym=function(_e,he){if(!delete _e[he])throw dC("Cannot delete property "+Sn(he)+" of "+Sn(_e))},pv=_d("splice"),td=Math.max,I0=Math.min;xn({target:"Array",proto:!0,forced:!pv},{splice:function(he,Ue){var $e,Ce,Lt,er,rr,fr,kr=Pn(this),Er=ns(kr),Rr=Ri(he,Er),$r=arguments.length;for($r===0?$e=Ce=0:$r===1?($e=0,Ce=Er-Rr):($e=$r-2,Ce=I0(td(hc(Ue),0),Er-Rr)),Sa(Er+$e-Ce),Lt=Tc(kr,Ce),er=0;er<Ce;er++)(rr=Rr+er)in kr&&$i(Lt,er,kr[rr]);if(Lt.length=Ce,$e<Ce){for(er=Rr;er<Er-Ce;er++)fr=er+$e,(rr=er+Ce)in kr?kr[fr]=kr[rr]:ym(kr,fr);for(er=Er;er>Er-Ce+$e;er--)ym(kr,er-1)}else if($e>Ce)for(er=Er-Ce;er>Rr;er--)fr=er+$e-1,(rr=er+Ce-1)in kr?kr[fr]=kr[rr]:ym(kr,fr);for(er=0;er<$e;er++)kr[er+Rr]=arguments[er+2];return uC(kr,Er-Ce+$e),Lt}});var bm=da("Array").splice,mp=Array.prototype,fv=function(_e){var he=_e.splice;return _e===mp||sr(mp,_e)&&he===mp.splice?bm:he},E0=function(_e,he,Ue,$e){try{return $e?he(lo(Ue)[0],Ue[1]):he(Ue)}catch(Ce){of(_e,"throw",Ce)}},ps=Array,ou=!yf(function(_e){Array.from(_e)});xn({target:"Array",stat:!0,forced:ou},{from:function(he){var Ue=Pn(he),$e=Qp(this),Ce=arguments.length,Lt=Ce>1?arguments[1]:void 0,er=Lt!==void 0;er&&(Lt=Ho(Lt,Ce>2?arguments[2]:void 0));var rr,fr,kr,Er,Rr,$r,Hr=nf(Ue),Gr=0;if(!Hr||this===ps&&rf(Hr))for(rr=ns(Ue),fr=$e?new this(rr):ps(rr);rr>Gr;Gr++)$r=er?Lt(Ue[Gr],Gr):Ue[Gr],$i(fr,Gr,$r);else for(Rr=(Er=Mu(Ue,Hr)).next,fr=$e?new this:[];!(kr=kt(Rr,Er)).done;Gr++)$r=er?E0(Er,Lt,[kr.value,Gr],!0):kr.value,$i(fr,Gr,$r);return fr.length=Gr,fr}});var Wi=_r.Array.from,Is=nf;function pc(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(lc(_e)||($e=function(er,rr){var fr;if(er){if(typeof er=="string")return P0(er,rr);var kr=Pa(fr=Object.prototype.toString.call(er)).call(fr,8,-1);if(kr==="Object"&&er.constructor&&(kr=er.constructor.name),kr==="Map"||kr==="Set")return Wi(er);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return P0(er,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P0(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var gp=function(){function _e(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var he=_e.prototype;return he.addTimer=function($e,Ce,Lt){Ce===void 0&&(Ce=0),Lt===void 0&&(Lt=1);var er=new Date().getTime(),rr=this.id;return this.timerList.push({id:rr,loop:Lt,count:0,timeout:er+Ce,interval:Ce,callback:$e}),this.id++,this.checkTimer(er),rr},he.checkTimer=function($e){if($e===void 0&&($e=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var Ce,Lt,er=0,rr=pc(this.timerList);!(Ce=rr()).done;){var fr=Ce.value;(er===0||er>fr.timeout)&&(er=fr.timeout)}this.timerList.length!==0&&(this.timer===null||er<this.timeout||this.timeout<$e)&&(this.timer=yi(oa(Lt=this.nowTime).call(Lt,this),er-$e),this.timeout=er)}},he.nowTime=function(){for(var $e,Ce=new Date().getTime(),Lt=pc(this.timerList);!($e=Lt()).done;){var er=$e.value;Ce>=er.timeout&&(er.callback(),er.count++,er.timeout=Ce+er.interval)}this.clerTime(),this.checkTimer(Ce)},he.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},he.deleteTimer=function($e){for(var Ce=this.timerList.length-1;Ce>=0;Ce--){var Lt;this.timerList[Ce].id===$e&&fv(Lt=this.timerList).call(Lt,Ce,1)}},he.removeFinished=function(){for(var $e=this.timerList.length-1;$e>=0;$e--){var Ce,Lt=this.timerList[$e];Lt.loop>=0&&Lt.count>=Lt.loop&&fv(Ce=this.timerList).call(Ce,$e,1)}},he.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},_e}(),au=Gc.findIndex,pC="findIndex",A0=!0;pC in[]&&Array(1).findIndex(function(){A0=!1}),xn({target:"Array",proto:!0,forced:A0},{findIndex:function(he){return au(this,he,arguments.length>1?arguments[1]:void 0)}});var fC=da("Array").findIndex,mv=Array.prototype,N0=function(_e){var he=_e.findIndex;return _e===mv||sr(mv,_e)&&he===mv.findIndex?fC:he},Sm=["error","warn","log","debug"],dl=function(){},gv=["off","error","warn","log","debug"],O0=function(){function _e(Ue,$e){this.name=$e,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=dl,this.log=dl,this.warn=dl,this.error=dl,this.name=$e,_e.instancesName.push($e),mi(gv).call(gv,Ue)||(Ue="off"),this.setLogFunc(Ue)}var he=_e.prototype;return he.setLogFunc=function($e){var Ce=this,Lt=N0(Sm).call(Sm,function(er){return er===$e});So(Sm).call(Sm,function(er,rr){rr<=Lt&&(Ce[er]=function(){var fr=Pa(Array.prototype).call(arguments),kr=this.formatArgs(fr,er);this.strategies[er](kr)})})},he.formatArgs=function($e,Ce){var Lt=new Date,er=Lt.getMonth()+1+"-"+Lt.getDate()+" "+Lt.getHours()+":"+Lt.getMinutes()+":"+Lt.getSeconds()+":"+Lt.getMilliseconds();return"[NIM "+Ce+" "+this.name+" "+er+"] "+Lo($e).call($e,function(rr){return rr instanceof Hi?rr.name+", "+rr.code+", "+rr.message:rr instanceof Error?rr&&rr.message?rr.message:rr:typeof rr=="object"?va(rr):rr}).join(" ")},he.destroy=function(){this.debug=dl,this.log=dl,this.warn=dl,this.error=dl},_e}();O0.instancesName=[];var pl=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.request=function($e,Ce,Lt){var er=this,rr=new Date().getTime(),fr=(Lt==null?void 0:Lt.exception_service)||0;return Vo.request($e,Ce).catch(function(kr){var Er,Rr,$r=kr;throw er.core.reporter.reportTraceStart("exceptions",{user_id:er.core.options.account,trace_id:(Rr=(Er=er.core.clientSocket)===null||Er===void 0?void 0:Er.socket)===null||Rr===void 0?void 0:Rr.sessionId,start_time:rr,action:1,exception_service:fr}),er.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof $r.code=="number"?$r.code:0,description:$r.message||""+$r.code,operation_type:0,target:$e,context:Ce?va(Ce):""},{asyncParams:Vo.net.getNetworkStatus()}),er.core.reporter.reportTraceEnd("exceptions",1),kr})},he.uploadFile=function($e){var Ce=this,Lt=new Date().getTime();return Vo.uploadFile($e).catch(function(er){var rr,fr,kr=er;Ce.core.reporter.reportTraceStart("exceptions",{user_id:Ce.core.options.account,trace_id:(fr=(rr=Ce.core.clientSocket)===null||rr===void 0?void 0:rr.socket)===null||fr===void 0?void 0:fr.sessionId,start_time:Lt,action:1,exception_service:3});var Er=Vo.platform==="BROWSER"?$e.chunkUploadHost:$e.commonUploadHost?$e.commonUploadHost+"/"+($e.nosToken&&$e.nosToken.bucket):"https://nos.netease.com/nim";throw Ce.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof kr.code=="number"?kr.code:0,description:kr.message||""+kr.code,operation_type:1,target:Er},{asyncParams:Vo.net.getNetworkStatus()}),Ce.core.reporter.reportTraceEnd("exceptions",1),er})},_e}(),Tm=function(){function _e(he,Ue){this.abtInfo={},this.core=he,this.config=Ue}return _e.prototype.abtRequest=function(){var Ue,$e;return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(this.core.options.isAbtestEnable){rr.next=2;break}return rr.abrupt("return");case 2:if(!this.abtInfo.experiments){rr.next=4;break}return rr.abrupt("return");case 4:if(this.config.abtestUrl){rr.next=6;break}return rr.abrupt("return");case 6:return rr.prev=6,rr.next=9,this.core.adapters.request(this.config.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.config.abtestProjectKey,appKey:this.core.options.appkey,osType:"Web",sdkVersion:"0.17.2",deviceId:this.core.config.deviceId},useLocalCache:!0}},{exception_service:7});case 9:Lt=rr.sent,rr.next=15;break;case 12:rr.prev=12,rr.t0=rr.catch(6),this.core.logger.warn("ABTest request failed");case 15:this.abtInfo=(($e=(Ue=Lt==null?void 0:Lt.data)===null||Ue===void 0?void 0:Ue.data)===null||$e===void 0?void 0:$e.abtInfo)||{};case 16:case"end":return rr.stop()}},Ce,this,[[6,12]])}))},_e}(),Cm={},Mm={debugLevel:"off",needReconnect:!0,reconnectionAttempts:9007199254740991,lbsUrls:["https://lbs.netease.im/lbs/webconf.jsp"],linkUrl:nu,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",isAbtestEnable:!0},cs=function(_e){function he($e,Ce){var Lt,er,rr,fr,kr,Er,Rr;Ce===void 0&&(Ce={}),(fr=_e.call(this)||this).instanceName="NIM",fr.status="unconnected",fr.account="",fr.eventBus=new Tf,fr.options={},fr.offlinePush={},fr.sync={},fr.msg={},fr.msgLog={},fr.session={},fr.cloudSession={},fr.misc={},fr.user={},fr.friend={},fr.systemMessage={},fr.team={},fr.event={},fr.msgExtend={},fr.cloudStorage={},fr.passThrough={},fr.superTeam={},fr.plugin={},fr.signaling={},fr.logger=new O0($e.debugLevel,$e.account),fr.setInitOptions($e),fr.otherOptions=Gn(Gn({},Ce),{cloudStorageConfig:Gn({storageKeyPrefix:"NIM"},Ce.cloudStorageConfig)}),fr.timerManager=new gp,fr.adapters=new pl(k(fr)),fr.abtest=new Tm(k(fr),{isAbtestEnable:fr.options.isAbtestEnable,abtestUrl:fr.options.abtestUrl,abtestProjectKey:"imElite_sdk_abtest_web"});var $r=Vo.localStorage.getItem("__NIM_DEVC_ID__");fr.options.deviceId?$r=fr.options.deviceId:fr.options.isFixedDeviceId?($r=Vo.localStorage.getItem("__NIM_DEVC_ID__")||Qo(),Vo.localStorage.setItem("__NIM_DEVC_ID__",$r)):$r=Qo(),fr.config={timeout:8e3,deviceId:$r};var Hr=Vo.getSystemInfo(),Gr=(kr=Ce==null?void 0:Ce.reportConfig)===null||kr===void 0?void 0:kr.isDataReportEnable;return typeof Gr!="boolean"&&(Gr=!0),fr.reporter=new Qg({reportConfigUrl:((Er=Ce==null?void 0:Ce.reportConfig)===null||Er===void 0?void 0:Er.reportConfigUrl)||"https://statistic.live.126.net/dispatcher/req",reportUrl:((Rr=Ce==null?void 0:Ce.reportConfig)===null||Rr===void 0?void 0:Rr.reportUrl)||"https://statistic.live.126.net/statics/report/common/form",isDataReportEnable:Gr,common:{app_key:$e.appkey,dev_id:$r,platform:"Web",sdk_ver:"0.17.2",env:"online",os_name:Hr.os,os_ver:Hr.osVer,lib_env:Hr.libEnv,model:Hr.model,manufactor:Hr.manufactor,host_env:Hr.hostEnv,host_env_ver:Hr.hostEnvVer},request:Vo.request,logger:fr.logger,autoStart:!0}),Vo.setLogger(fr.logger),fr.auth=new uv(k(fr)),fr.clientSocket=new Ks(k(fr)),So(Lt=Ss(er=fa(Cm)).call(er,function(vn){return vn!=="sync"})).call(Lt,function(vn){var bn=Cm[vn];fr[vn]=new bn(k(fr))}),Cm.sync&&(fr.sync=new Do(k(fr),fr.otherOptions.syncOptions)),So(rr=fa(fr.otherOptions)).call(rr,function(vn){var bn=Ja(vn).call(vn,"Config");if(vn==="serverConfig")fr.cloudStorage.setOptions(fr.otherOptions.serverConfig);else if(bn>-1){var In=Pa(vn).call(vn,0,bn);fr[In]&&fr[In].setOptions&&fr[In].setOptions(fr.otherOptions[vn])}}),he.instance=k(fr),fr.logger.log("NIM init, version ","0.17.2"," sdk version ",91402," appkey ",$e.appkey),fr}ra(he,_e),he.getInstance=function(Ce,Lt){if(!he.instance){if(Ce)return new he(Ce,Lt);throw new Error("Instance not exist, please input options")}if(Ce){if(he.instance.options.account===Ce.account&&he.instance.options.appkey===Ce.appkey)return he.instance.setOptions(Ce),he.instance;throw new Error("Unexpected login")}return he.instance};var Ue=he.prototype;return Ue.setInitOptions=function(Ce){Xn({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},Ce),this.logger.log("NIM::setInitOptions options is",Ce),this.account=Ce.account,this.options=Gn(Gn({},Mm),Ce)},Ue.connect=function(Ce){return Ce===void 0&&(Ce={}),this.auth.login(Ce)},Ue.setOptions=function(Ce){if(typeof Ce=="object"&&Ce!==null&&(Object.prototype.hasOwnProperty.call(Ce,"account")&&Ce.account!==this.options.account||Object.prototype.hasOwnProperty.call(Ce,"appkey")&&Ce.appkey!==this.options.appkey))throw new Error("NIM::setOptions account and appkey is not allowed to reset");Xn({token:{type:"string",required:!1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},Ce),this.logger.log("NIM::setOptions options is",Ce),this.options=Gn(Gn({},this.options),Ce)},Ue.disconnect=function(){var Ce=this;switch(this.status){case"logined":return this.sendCmd("logout",void 0,{timeout:1e3}).then(function(){Ce.clientSocket.doDisconnect(Ms.ACTIVE,"UserActiveDisconnect")}).catch(function(Lt){Ce.logger.error("Instance::disconnect sendCmd:logout error",Lt),Ce.clientSocket.doDisconnect(Ms.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return this.clientSocket.doDisconnect(Ms.ACTIVE,"UserActiveDisconnect"),ka.resolve();case"unconnected":case"destroyed":return ka.resolve()}},Ue.destroy=function(){var Ce=this;return he.instance=null,this.disconnect().then(function(){var Lt,er,rr;Ce.status="destroyed",Ce.removeAllListeners(),Ce.eventBus.removeAllListeners(),Ce.logger.destroy(),Ce.reporter.destroy(),Ce.timerManager.destroy(),(Lt=Ce.session)===null||Lt===void 0||Lt.destroy(),(er=Ce.team)===null||er===void 0||er.destroy(),(rr=Ce.superTeam)===null||rr===void 0||rr.destroy(),Ce.connect=fp,Ce.disconnect=fp,Ce.destroy=fp})},Ue.kick=function(Ce){return this.auth.kick(Ce)},Ue.sendCmd=function(Ce,Lt,er){return this.clientSocket.sendCmd(Ce,Lt,er)},Ue.emit=function(Ce){var Lt=this;try{for(var er,rr,fr=To(),kr=arguments.length,Er=new Array(kr>1?kr-1:0),Rr=1;Rr<kr;Rr++)Er[Rr-1]=arguments[Rr];var $r=(er=_e.prototype.emit).call.apply(er,Os(rr=[this,Ce]).call(rr,Er)),Hr=To()-fr;return Hr>=10&&this.logger.warn("Core::emit event: "+Ce+" process takes: "+Hr+"ms"),$r}catch(Gr){return this.logger.error("Core::emit event: "+Ce+". Error: "+Gr),yi(function(){throw Lt.logger.error("Core::emit throw error in setTimeout. event: "+Ce+". Error: "+Gr),Gr},0),!1}},he.registerService=function(Ce,Lt){Cm[Lt]=Ce},he}(Tf);cs.instance=null,cs.setAdapters=function(he){l0(Vo,he)};var hv=Math.min,vv=[].lastIndexOf,R0=!!vv&&1/[1].lastIndexOf(1,-0)<0,mC=Zi("lastIndexOf"),yv=R0||!mC?function(he){if(R0)return ue(vv,this,arguments)||0;var Ue=wr(this),$e=ns(Ue),Ce=$e-1;for(arguments.length>1&&(Ce=hv(Ce,hc(arguments[1]))),Ce<0&&(Ce=$e+Ce);Ce>=0;Ce--)if(Ce in Ue&&Ue[Ce]===he)return Ce||0;return-1}:vv;xn({target:"Array",proto:!0,forced:yv!==[].lastIndexOf},{lastIndexOf:yv});var B0=da("Array").lastIndexOf,bv=Array.prototype,Sv=function(_e){var he=_e.lastIndexOf;return _e===bv||sr(bv,_e)&&he===bv.lastIndexOf?B0:he},su=g(function(_e,he){(function(){var Ue={function:!0,object:!0}[typeof window]&&window||this,$e=he,Ce=_e&&!_e.nodeType&&_e,Lt=$e&&Ce&&typeof e=="object"&&e;!Lt||Lt.global!==Lt&&Lt.window!==Lt&&Lt.self!==Lt||(Ue=Lt);var er=Math.pow(2,53)-1,rr=/\bOpera/,fr=Object.prototype,kr=fr.hasOwnProperty,Er=fr.toString;function Rr(Kn){return(Kn=String(Kn)).charAt(0).toUpperCase()+Kn.slice(1)}function $r(Kn){return Kn=In(Kn),/^(?:webOS|i(?:OS|P))/.test(Kn)?Kn:Rr(Kn)}function Hr(Kn,Qn){for(var Mo in Kn)kr.call(Kn,Mo)&&Qn(Kn[Mo],Mo,Kn)}function Gr(Kn){return Kn==null?Rr(Kn):Er.call(Kn).slice(8,-1)}function vn(Kn){return String(Kn).replace(/([ -])(?!$)/g,"$1?")}function bn(Kn,Qn){var Mo=null;return function(Ko,Ln){var Wr=-1,ro=Ko?Ko.length:0;if(typeof ro=="number"&&ro>-1&&ro<=er)for(;++Wr<ro;)Ln(Ko[Wr],Wr,Ko);else Hr(Ko,Ln)}(Kn,function(No,Ko){Mo=Qn(Mo,No,Ko,Kn)}),Mo}function In(Kn){return String(Kn).replace(/^ +| +$/g,"")}var Cn=function Kn(Qn){var Mo=Ue,No=Qn&&typeof Qn=="object"&&Gr(Qn)!="String";No&&(Mo=Qn,Qn=null);var Ko=Mo.navigator||{},Ln=Ko.userAgent||"";Qn||(Qn=Ln);var Wr,ro,so=No?!!Ko.likeChrome:/\bChrome\b/.test(Qn)&&!/internal|\n/i.test(Er.toString()),Yn="Object",On=No?Yn:"ScriptBridgingProxyObject",co=No?Yn:"Environment",mo=No&&Mo.java?"JavaPackage":Gr(Mo.java),wo=No?Yn:"RuntimeObject",Io=/\bJava/.test(mo)&&Mo.java,ga=Io&&Gr(Mo.environment)==co,Yo=Io?"a":"α",ms=Io?"b":"β",zo=Mo.document||{},Xo=Mo.operamini||Mo.opera,Oa=rr.test(Oa=No&&Xo?Xo["[[Class]]"]:Gr(Xo))?Oa:Xo=null,xl=Qn,na=[],jc=null,bs=Qn==Ln,Bo=bs&&Xo&&typeof Xo.version=="function"&&Xo.version(),Ra=function(us){return bn(us,function(Qa,rs){return Qa||RegExp("\\b"+(rs.pattern||vn(rs))+"\\b","i").exec(Qn)&&(rs.label||rs)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),ho=function(us){return bn(us,function(Qa,rs){return Qa||RegExp("\\b"+(rs.pattern||vn(rs))+"\\b","i").exec(Qn)&&(rs.label||rs)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),pa=IM([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),js=function(us){return bn(us,function(Qa,rs,oy){return Qa||(rs[pa]||rs[/^[a-z]+(?: +[a-z]+\b)*/i.exec(pa)]||RegExp("\\b"+vn(oy)+"(?:\\b|\\w*\\d)","i").exec(Qn))&&oy})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),bo=function(us){return bn(us,function(Qa,rs){var oy=rs.pattern||vn(rs);return!Qa&&(Qa=RegExp("\\b"+oy+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Qn))&&(Qa=function(gu,kM,wM){var _M={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return kM&&wM&&/^Win/i.test(gu)&&!/^Windows Phone /i.test(gu)&&(_M=_M[/[\d.]+$/.exec(gu)])&&(gu="Windows "+_M),gu=String(gu),kM&&wM&&(gu=gu.replace(RegExp(kM,"i"),wM)),$r(gu.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Qa,oy,rs.label||rs)),Qa})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function IM(Oi){return bn(Oi,function(us,Qa){var rs=Qa.pattern||vn(Qa);return!us&&(us=RegExp("\\b"+rs+" *\\d+[.\\w_]*","i").exec(Qn)||RegExp("\\b"+rs+" *\\w+-[\\w]*","i").exec(Qn)||RegExp("\\b"+rs+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Qn))&&((us=String(Qa.label&&!RegExp(rs,"i").test(Qa.label)?Qa.label:us).split("/"))[1]&&!/[\d.]+/.test(us[0])&&(us[0]+=" "+us[1]),Qa=Qa.label||Qa,us=$r(us[0].replace(RegExp(rs,"i"),Qa).replace(RegExp("; *(?:"+Qa+"[_-])?","i")," ").replace(RegExp("("+Qa+")[-_.]?(\\w)","i"),"$1 $2"))),us})}function EM(Oi){return bn(Oi,function(us,Qa){return us||(RegExp(Qa+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Qn)||0)[1]||null})}if(Ra&&(Ra=[Ra]),/\bAndroid\b/.test(bo)&&!pa&&(Wr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(Qn))&&(pa=In(Wr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),js&&!pa?pa=IM([js]):js&&pa&&(pa=pa.replace(RegExp("^("+vn(js)+")[-_.\\s]","i"),js+" ").replace(RegExp("^("+vn(js)+")[-_.]?(\\w)","i"),js+" $2")),(Wr=/\bGoogle TV\b/.exec(pa))&&(pa=Wr[0]),/\bSimulator\b/i.test(Qn)&&(pa=(pa?pa+" ":"")+"Simulator"),ho=="Opera Mini"&&/\bOPiOS\b/.test(Qn)&&na.push("running in Turbo/Uncompressed mode"),ho=="IE"&&/\blike iPhone OS\b/.test(Qn)?(js=(Wr=Kn(Qn.replace(/like iPhone OS/,""))).manufacturer,pa=Wr.product):/^iP/.test(pa)?(ho||(ho="Safari"),bo="iOS"+((Wr=/ OS ([\d_]+)/i.exec(Qn))?" "+Wr[1].replace(/_/g,"."):"")):ho=="Konqueror"&&/^Linux\b/i.test(bo)?bo="Kubuntu":js&&js!="Google"&&(/Chrome/.test(ho)&&!/\bMobile Safari\b/i.test(Qn)||/\bVita\b/.test(pa))||/\bAndroid\b/.test(bo)&&/^Chrome/.test(ho)&&/\bVersion\//i.test(Qn)?(ho="Android Browser",bo=/\bAndroid\b/.test(bo)?bo:"Android"):ho=="Silk"?(/\bMobi/i.test(Qn)||(bo="Android",na.unshift("desktop mode")),/Accelerated *= *true/i.test(Qn)&&na.unshift("accelerated")):ho=="UC Browser"&&/\bUCWEB\b/.test(Qn)?na.push("speed mode"):ho=="PaleMoon"&&(Wr=/\bFirefox\/([\d.]+)\b/.exec(Qn))?na.push("identifying as Firefox "+Wr[1]):ho=="Firefox"&&(Wr=/\b(Mobile|Tablet|TV)\b/i.exec(Qn))?(bo||(bo="Firefox OS"),pa||(pa=Wr[1])):!ho||(Wr=!/\bMinefield\b/i.test(Qn)&&/\b(?:Firefox|Safari)\b/.exec(ho))?(ho&&!pa&&/[\/,]|^[^(]+?\)/.test(Qn.slice(Qn.indexOf(Wr+"/")+8))&&(ho=null),(Wr=pa||js||bo)&&(pa||js||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(bo))&&(ho=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(bo)?bo:Wr)+" Browser")):ho=="Electron"&&(Wr=(/\bChrome\/([\d.]+)\b/.exec(Qn)||0)[1])&&na.push("Chromium "+Wr),Bo||(Bo=EM(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",vn(ho),"(?:Firefox|Minefield|NetFront)"])),(Wr=(Ra=="iCab"&&parseFloat(Bo)>3?"WebKit":/\bOpera\b/.test(ho)&&(/\bOPR\b/.test(Qn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(Qn)&&!/^(?:Trident|EdgeHTML)$/.test(Ra)&&"WebKit"||!Ra&&/\bMSIE\b/i.test(Qn)&&(bo=="Mac OS"?"Tasman":"Trident")||Ra=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(ho)&&"NetFront")&&(Ra=[Wr]),ho=="IE"&&(Wr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Qn)||0)[1])?(ho+=" Mobile",bo="Windows Phone "+(/\+$/.test(Wr)?Wr:Wr+".x"),na.unshift("desktop mode")):/\bWPDesktop\b/i.test(Qn)?(ho="IE Mobile",bo="Windows Phone 8.x",na.unshift("desktop mode"),Bo||(Bo=(/\brv:([\d.]+)/.exec(Qn)||0)[1])):ho!="IE"&&Ra=="Trident"&&(Wr=/\brv:([\d.]+)/.exec(Qn))&&(ho&&na.push("identifying as "+ho+(Bo?" "+Bo:"")),ho="IE",Bo=Wr[1]),bs){if(function(us,Qa){var rs=us!=null?typeof us[Qa]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(rs)||rs=="object"&&!us[Qa])}(Mo,"global"))if(Io&&(xl=(Wr=Io.lang.System).getProperty("os.arch"),bo=bo||Wr.getProperty("os.name")+" "+Wr.getProperty("os.version")),ga){try{Bo=Mo.require("ringo/engine").version.join("."),ho="RingoJS"}catch{(Wr=Mo.system)&&Wr.global.system==Mo.system&&(ho="Narwhal",bo||(bo=Wr[0].os||null))}ho||(ho="Rhino")}else typeof Mo.process=="object"&&!Mo.process.browser&&(Wr=Mo.process)&&(typeof Wr.versions=="object"&&(typeof Wr.versions.electron=="string"?(na.push("Node "+Wr.versions.node),ho="Electron",Bo=Wr.versions.electron):typeof Wr.versions.nw=="string"&&(na.push("Chromium "+Bo,"Node "+Wr.versions.node),ho="NW.js",Bo=Wr.versions.nw)),ho||(ho="Node.js",xl=Wr.arch,bo=Wr.platform,Bo=(Bo=/[\d.]+/.exec(Wr.version))?Bo[0]:null));else Gr(Wr=Mo.runtime)==On?(ho="Adobe AIR",bo=Wr.flash.system.Capabilities.os):Gr(Wr=Mo.phantom)==wo?(ho="PhantomJS",Bo=(Wr=Wr.version||null)&&Wr.major+"."+Wr.minor+"."+Wr.patch):typeof zo.documentMode=="number"&&(Wr=/\bTrident\/(\d+)/i.exec(Qn))?(Bo=[Bo,zo.documentMode],(Wr=+Wr[1]+4)!=Bo[1]&&(na.push("IE "+Bo[1]+" mode"),Ra&&(Ra[1]=""),Bo[1]=Wr),Bo=ho=="IE"?String(Bo[1].toFixed(1)):Bo[0]):typeof zo.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(ho)&&(na.push("masking as "+ho+" "+Bo),ho="IE",Bo="11.0",Ra=["Trident"],bo="Windows");bo=bo&&$r(bo)}if(Bo&&(Wr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Bo)||/(?:alpha|beta)(?: ?\d)?/i.exec(Qn+";"+(bs&&Ko.appMinorVersion))||/\bMinefield\b/i.test(Qn)&&"a")&&(jc=/b/i.test(Wr)?"beta":"alpha",Bo=Bo.replace(RegExp(Wr+"\\+?$"),"")+(jc=="beta"?ms:Yo)+(/\d+\+?/.exec(Wr)||"")),ho=="Fennec"||ho=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(bo))ho="Firefox Mobile";else if(ho=="Maxthon"&&Bo)Bo=Bo.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(pa))pa=="Xbox 360"&&(bo=null),pa=="Xbox 360"&&/\bIEMobile\b/.test(Qn)&&na.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(ho)&&(!ho||pa||/Browser|Mobi/.test(ho))||bo!="Windows CE"&&!/Mobi/i.test(Qn))if(ho=="IE"&&bs)try{Mo.external===null&&na.unshift("platform preview")}catch{na.unshift("embedded")}else(/\bBlackBerry\b/.test(pa)||/\bBB10\b/.test(Qn))&&(Wr=(RegExp(pa.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Qn)||0)[1]||Bo)?(bo=((Wr=[Wr,/BB10/.test(Qn)])[1]?(pa=null,js="BlackBerry"):"Device Software")+" "+Wr[0],Bo=null):this!=Hr&&pa!="Wii"&&(bs&&Xo||/Opera/.test(ho)&&/\b(?:MSIE|Firefox)\b/i.test(Qn)||ho=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(bo)||ho=="IE"&&(bo&&!/^Win/.test(bo)&&Bo>5.5||/\bWindows XP\b/.test(bo)&&Bo>8||Bo==8&&!/\bTrident\b/.test(Qn)))&&!rr.test(Wr=Kn.call(Hr,Qn.replace(rr,"")+";"))&&Wr.name&&(Wr="ing as "+Wr.name+((Wr=Wr.version)?" "+Wr:""),rr.test(ho)?(/\bIE\b/.test(Wr)&&bo=="Mac OS"&&(bo=null),Wr="identify"+Wr):(Wr="mask"+Wr,ho=Oa?$r(Oa.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(Wr)&&(bo=null),bs||(Bo=null)),Ra=["Presto"],na.push(Wr));else ho+=" Mobile";(Wr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Qn)||0)[1])&&(Wr=[parseFloat(Wr.replace(/\.(\d)$/,".0$1")),Wr],ho=="Safari"&&Wr[1].slice(-1)=="+"?(ho="WebKit Nightly",jc="alpha",Bo=Wr[1].slice(0,-1)):Bo!=Wr[1]&&Bo!=(Wr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Qn)||0)[1])||(Bo=null),Wr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Qn)||0)[1],Wr[0]==537.36&&Wr[2]==537.36&&parseFloat(Wr[1])>=28&&Ra=="WebKit"&&(Ra=["Blink"]),bs&&(so||Wr[1])?(Ra&&(Ra[1]="like Chrome"),Wr=Wr[1]||((Wr=Wr[0])<530?1:Wr<532?2:Wr<532.05?3:Wr<533?4:Wr<534.03?5:Wr<534.07?6:Wr<534.1?7:Wr<534.13?8:Wr<534.16?9:Wr<534.24?10:Wr<534.3?11:Wr<535.01?12:Wr<535.02?"13+":Wr<535.07?15:Wr<535.11?16:Wr<535.19?17:Wr<536.05?18:Wr<536.1?19:Wr<537.01?20:Wr<537.11?"21+":Wr<537.13?23:Wr<537.18?24:Wr<537.24?25:Wr<537.36?26:Ra!="Blink"?"27":"28")):(Ra&&(Ra[1]="like Safari"),Wr=(Wr=Wr[0])<400?1:Wr<500?2:Wr<526?3:Wr<533?4:Wr<534?"4+":Wr<535?5:Wr<537?6:Wr<538?7:Wr<601?8:Wr<602?9:Wr<604?10:Wr<606?11:Wr<608?12:"12"),Ra&&(Ra[1]+=" "+(Wr+=typeof Wr=="number"?".x":/[.+]/.test(Wr)?"":"+")),ho=="Safari"&&(!Bo||parseInt(Bo)>45)?Bo=Wr:ho=="Chrome"&&/\bHeadlessChrome/i.test(Qn)&&na.unshift("headless")),ho=="Opera"&&(Wr=/\bzbov|zvav$/.exec(bo))?(ho+=" ",na.unshift("desktop mode"),Wr=="zvav"?(ho+="Mini",Bo=null):ho+="Mobile",bo=bo.replace(RegExp(" *"+Wr+"$"),"")):ho=="Safari"&&/\bChrome\b/.exec(Ra&&Ra[1])?(na.unshift("desktop mode"),ho="Chrome Mobile",Bo=null,/\bOS X\b/.test(bo)?(js="Apple",bo="iOS 4.3+"):bo=null):/\bSRWare Iron\b/.test(ho)&&!Bo&&(Bo=EM("Chrome")),Bo&&Bo.indexOf(Wr=/[\d.]+$/.exec(bo))==0&&Qn.indexOf("/"+Wr+"-")>-1&&(bo=In(bo.replace(Wr,""))),bo&&bo.indexOf(ho)!=-1&&!RegExp(ho+" OS").test(bo)&&(bo=bo.replace(RegExp(" *"+vn(ho)+" *"),"")),Ra&&!/\b(?:Avant|Nook)\b/.test(ho)&&(/Browser|Lunascape|Maxthon/.test(ho)||ho!="Safari"&&/^iOS/.test(bo)&&/\bSafari\b/.test(Ra[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(ho)&&Ra[1])&&(Wr=Ra[Ra.length-1])&&na.push(Wr),na.length&&(na=["("+na.join("; ")+")"]),js&&pa&&pa.indexOf(js)<0&&na.push("on "+js),pa&&na.push((/^on /.test(na[na.length-1])?"":"on ")+pa),bo&&(Wr=/ ([\d.+]+)$/.exec(bo),ro=Wr&&bo.charAt(bo.length-Wr[0].length-1)=="/",bo={architecture:32,family:Wr&&!ro?bo.replace(Wr[0],""):bo,version:Wr?Wr[1]:null,toString:function(){var Oi=this.version;return this.family+(Oi&&!ro?" "+Oi:"")+(this.architecture==64?" 64-bit":"")}}),(Wr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(xl))&&!/\bi686\b/i.test(xl)?(bo&&(bo.architecture=64,bo.family=bo.family.replace(RegExp(" *"+Wr),"")),ho&&(/\bWOW64\b/i.test(Qn)||bs&&/\w(?:86|32)$/.test(Ko.cpuClass||Ko.platform)&&!/\bWin64; x64\b/i.test(Qn))&&na.unshift("32-bit")):bo&&/^OS X/.test(bo.family)&&ho=="Chrome"&&parseFloat(Bo)>=39&&(bo.architecture=64),Qn||(Qn=null);var gi={};return gi.description=Qn,gi.layout=Ra&&Ra[0],gi.manufacturer=js,gi.name=ho,gi.prerelease=jc,gi.product=pa,gi.ua=Qn,gi.version=ho&&Bo,gi.os=bo||{architecture:null,family:null,version:null,toString:function(){return"null"}},gi.parse=Kn,gi.toString=function(){return this.description||""},gi.version&&na.unshift(Bo),gi.name&&na.unshift(ho),bo&&ho&&(bo!=String(bo).split(" ")[0]||bo!=ho.split(" ")[0]&&!pa)&&na.push(pa?"("+bo+")":"on "+bo),na.length&&(gi.description=na.join(" ")),gi}();$e&&Ce?Hr(Cn,function(Kn,Qn){$e[Qn]=Kn}):Ue.platform=Cn}).call(e)}),fl=Math.floor,km=function(_e,he){var Ue=_e.length,$e=fl(Ue/2);return Ue<8?gC(_e,he):hC(_e,km(Xg(_e,0,$e),he),km(Xg(_e,$e),he),he)},gC=function(_e,he){for(var Ue,$e,Ce=_e.length,Lt=1;Lt<Ce;){for($e=Lt,Ue=_e[Lt];$e&&he(_e[$e-1],Ue)>0;)_e[$e]=_e[--$e];$e!==Lt++&&(_e[$e]=Ue)}return _e},hC=function(_e,he,Ue,$e){for(var Ce=he.length,Lt=Ue.length,er=0,rr=0;er<Ce||rr<Lt;)_e[er+rr]=er<Ce&&rr<Lt?$e(he[er],Ue[rr])<=0?he[er++]:Ue[rr++]:er<Ce?he[er++]:Ue[rr++];return _e},vC=km,L0=Ir.match(/firefox\/(\d+)/i),Tv=!!L0&&+L0[1],ml=/MSIE|Trident/.test(Ir),hp=Ir.match(/AppleWebKit\/(\d+)\./),vp=!!hp&&+hp[1],gl=[],wm=Ne(gl.sort),yp=Ne(gl.push),rd=V(function(){gl.sort(void 0)}),Ec=V(function(){gl.sort(null)}),Cv=Zi("sort"),Aa=!V(function(){if(Br)return Br<70;if(!(Tv&&Tv>3)){if(ml)return!0;if(vp)return vp<603;var _e,he,Ue,$e,Ce="";for(_e=65;_e<76;_e++){switch(he=String.fromCharCode(_e),_e){case 66:case 69:case 70:case 72:Ue=3;break;case 68:case 71:Ue=4;break;default:Ue=2}for($e=0;$e<47;$e++)gl.push({k:he+$e,v:Ue})}for(gl.sort(function(Lt,er){return er.v-Lt.v}),$e=0;$e<gl.length;$e++)he=gl[$e].k.charAt(0),Ce.charAt(Ce.length-1)!==he&&(Ce+=he);return Ce!=="DGBEFHACIJK"}});xn({target:"Array",proto:!0,forced:rd||!Ec||!Cv||!Aa},{sort:function(he){he!==void 0&&Xr(he);var Ue=Pn(this);if(Aa)return he===void 0?wm(Ue):wm(Ue,he);var $e,Ce,Lt=[],er=ns(Ue);for(Ce=0;Ce<er;Ce++)Ce in Ue&&yp(Lt,Ue[Ce]);for(vC(Lt,function(rr){return function(fr,kr){return kr===void 0?-1:fr===void 0?1:rr!==void 0?+rr(fr,kr)||0:Xs(fr)>Xs(kr)?1:-1}}(he)),$e=ns(Lt),Ce=0;Ce<$e;)Ue[Ce]=Lt[Ce++];for(;Ce<er;)ym(Ue,Ce++);return Ue}});var F0=da("Array").sort,bp=Array.prototype,iu=function(_e){var he=_e.sort;return _e===bp||sr(bp,_e)&&he===bp.sort?F0:he},_m=g(function(_e,he){_e.exports=function(){var Ue={d:function(Wr,ro){for(var so in ro)Ue.o(ro,so)&&!Ue.o(Wr,so)&&Pu(Wr,so,{enumerable:!0,get:ro[so]})},o:function(Wr,ro){return Object.prototype.hasOwnProperty.call(Wr,ro)}},$e={};Ue.d($e,{default:function(){return Ko}});var Ce=function Ln(Wr){for(var ro in function(so,Yn){if(!(so instanceof Yn))throw new TypeError("Cannot call a class as a function")}(this,Ln),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(so){},this.onProgress=function(so){},this.onUploadProgress=function(so){},this.onComplete=function(so){},Wr)this[ro]=Wr[ro]};function Lt(Ln,Wr){var ro=xs!==void 0&&Is(Ln)||Ln["@@iterator"];if(!ro){if(lc(Ln)||(ro=function(wo,Io){if(wo){var ga;if(typeof wo=="string")return er(wo,Io);var Yo=Pa(ga=Object.prototype.toString.call(wo)).call(ga,8,-1);return Yo==="Object"&&wo.constructor&&(Yo=wo.constructor.name),Yo==="Map"||Yo==="Set"?Wi(wo):Yo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Yo)?er(wo,Io):void 0}}(Ln))||Wr&&Ln&&typeof Ln.length=="number"){ro&&(Ln=ro);var so=0,Yn=function(){};return{s:Yn,n:function(){return so>=Ln.length?{done:!0}:{done:!1,value:Ln[so++]}},e:function(Io){throw Io},f:Yn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var On,co=!0,mo=!1;return{s:function(){ro=ro.call(Ln)},n:function(){var Io=ro.next();return co=Io.done,Io},e:function(Io){mo=!0,On=Io},f:function(){try{co||ro.return==null||ro.return()}finally{if(mo)throw On}}}}function er(Ln,Wr){(Wr==null||Wr>Ln.length)&&(Wr=Ln.length);for(var ro=0,so=new Array(Wr);ro<Wr;ro++)so[ro]=Ln[ro];return so}var rr=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(rr={privateObj:{},setItem:function(Wr,ro){rr.privateObj[Wr]=ro},getItem:function(Wr){return rr.privateObj[Wr]},removeItem:function(Wr){delete rr.privateObj[Wr]},getKeys:function(){return fa(rr.privateObj)}});var fr={getFileKey:function(Wr){var ro=Wr.size.toString(),so=Wr.lastModified.toString();return"_NosUploader_"+Wr.name+Pa(ro).call(ro,ro.length-5)+Pa(so).call(so,so.length-5)},getFileInfo:function(Wr){var ro=rr.getItem(Wr);if(!ro)return null;try{return JSON.parse(ro)}catch{return null}},initFile:function(Wr,ro,so){fr.clearExpiredInfo();var Yn=this.getFileKey(ro),On={ctx:Wr.ctx!==void 0?Wr.ctx:"",bucket:Wr.bucketName,obj:Wr.objectName,token:Wr.token,modifyAt:To(),end:!1};return Wr.payload&&(On.payload=Wr.payload),so&&rr.setItem(Yn,va(On)),Yn},setUploadContext:function(Wr,ro,so){var Yn=this.getFileInfo(Wr);Yn&&(Yn.ctx=ro,so&&rr.setItem(Wr,va(Yn)))},setComplete:function(Wr,ro){var so=this.getFileInfo(Wr);so&&(so.modifyAt=To(),so.end=!0,ro&&rr.setItem(Wr,va(so)))},getUploadContext:function(Wr){var ro=this.getFileInfo(Wr);return ro?ro.ctx:""},removeFileInfo:function(Wr){Ja(Wr).call(Wr,"_NosUploader_")===0&&rr.removeItem(Wr)},clearExpiredInfo:function(){var Wr,ro=typeof rr.getKeys=="function"?rr.getKeys():fa(rr),so=To(),Yn=[],On=Lt(ro);try{for(On.s();!(Wr=On.n()).done;){var co=Wr.value;if(Ja(co).call(co,"_NosUploader_")===0){var mo=fr.getFileInfo(co);mo===null||so-mo.modifyAt>Ko.expireTime?rr.removeItem(co):Yn.push({fileInfo:mo,key:co})}}}catch(zo){On.e(zo)}finally{On.f()}if(Yn.length>Ko.maxFileCache){var wo,Io,ga=Lt(Pa(wo=iu(Yn).call(Yn,function(zo,Xo){return Xo.fileInfo.modifyAt-zo.fileInfo.modifyAt})).call(wo,Ko.maxFileCache));try{for(ga.s();!(Io=ga.n()).done;){var Yo,ms=Io.value;Ja(Yo=ms.key).call(Yo,"_NosUploader_")===0&&rr.removeItem(ms.key)}}catch(zo){ga.e(zo)}finally{ga.f()}}}},kr=fr;function Er(Ln){return(Er=typeof xs=="function"&&typeof Hd=="symbol"?function(Wr){return typeof Wr}:function(Wr){return Wr&&typeof xs=="function"&&Wr.constructor===xs&&Wr!==xs.prototype?"symbol":typeof Wr})(Ln)}function Rr(Ln,Wr){return!Wr||Er(Wr)!=="object"&&typeof Wr!="function"?function(ro){if(ro===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ro}(Ln):Wr}function $r(Ln){var Wr=typeof xc=="function"?new xc:void 0;return($r=function(so){var Yn,On;if(so===null||(On=so,Ja(Yn=Function.toString.call(On)).call(Yn,"[native code]")===-1))return so;if(typeof so!="function")throw new TypeError("Super expression must either be null or a function");if(Wr!==void 0){if(Wr.has(so))return Wr.get(so);Wr.set(so,co)}function co(){return Hr(so,arguments,bn(this).constructor)}return co.prototype=ii(so.prototype,{constructor:{value:co,enumerable:!1,writable:!0,configurable:!0}}),vn(co,so)})(Ln)}function Hr(Ln,Wr,ro){return(Hr=Gr()?Mi:function(so,Yn,On){var co=[null];co.push.apply(co,Yn);var mo=new(oa(Function).apply(so,co));return On&&vn(mo,On.prototype),mo}).apply(null,arguments)}function Gr(){if(typeof Reflect>"u"||!Mi||Mi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Mi(Boolean,[],function(){})),!0}catch{return!1}}function vn(Ln,Wr){return(vn=ci||function(ro,so){return ro.__proto__=so,ro})(Ln,Wr)}function bn(Ln){return(bn=ci?Dr:function(Wr){return Wr.__proto__||Dr(Wr)})(Ln)}var In=function(Ln){(function(On,co){if(typeof co!="function"&&co!==null)throw new TypeError("Super expression must either be null or a function");On.prototype=ii(co&&co.prototype,{constructor:{value:On,writable:!0,configurable:!0}}),co&&vn(On,co)})(Yn,Ln);var Wr,ro,so=(Wr=Yn,ro=Gr(),function(){var On,co=bn(Wr);if(ro){var mo=bn(this).constructor;On=Mi(co,arguments,mo)}else On=co.apply(this,arguments);return Rr(this,On)});function Yn(On,co){var mo;return function(wo,Io){if(!(wo instanceof Io))throw new TypeError("Cannot call a class as a function")}(this,Yn),(mo=so.call(this,"NosUploadError:"+On)).errCode=co,mo.errMsg=On,mo}return Yn}($r(Error)),Cn=function Ln(Wr,ro,so){if(Wr.uploadState==="uploading"){var Yn=Wr.config,On=Wr.param,co=kr.getUploadContext(Wr.fileKey);if(!co)return so(0);var mo=new XMLHttpRequest,wo=Yn.directUploadAddr+"/".concat(On.bucketName)+"/".concat(encodeURIComponent(On.objectName))+"?uploadContext"+"&context=".concat(co)+"&version=".concat(Yn.version);mo.onreadystatechange=function(){var Io;if(Wr.uploadState!=="abort"&&mo.readyState===4){var ga,Yo,ms,zo;try{zo=JSON.parse(mo.responseText)}catch{zo={errMsg:"JsonParseError in getOffset",errCode:500}}mo.status===200?zo.errCode?Wr.config.onError(new In(zo.errMsg,zo.errCode)):so(zo.offset):mo.status.toString().match(/^5/)?Ln(Wr,ro-1,so):ro>0?(typeof((Io=Yn.logger)===null||Io===void 0?void 0:Io.error)=="function"&&Yn.logger.error(Os(ga="getOffset(".concat(wo,") error. retry after 3 seconds. ")).call(ga,new Date().toTimeString())),yi(function(){Ln(Wr,ro-1,so)},3500)):(kr.removeFileInfo(Wr.fileKey),mo.status?Yn.onError(new In(Os(Yo=Os(ms="getOffset(".concat(wo,") error: ")).call(ms,mo.status," ")).call(Yo,mo.statusText))):Yn.onError(new In("getOffset(".concat(wo,") error. no Error Code"))))}},mo.open("get",wo),mo.setRequestHeader("x-nos-token",On.token),mo.timeout=Yn.getOffsetTimeout,mo.send()}},Kn=function Ln(Wr,ro,so,Yn){if(Wr.uploadState==="uploading"){var On=Wr.param,co=Wr.config,mo=Pa(File.prototype),wo=On.ctx!==void 0?On.ctx:"",Io=ro+co.trunkSize>Wr.file.size,ga=Io?Wr.file.size:ro+co.trunkSize,Yo=new XMLHttpRequest,ms=co.directUploadAddr+"/".concat(On.bucketName)+"/".concat(encodeURIComponent(On.objectName));if(Yo.upload.onprogress=function(Xo){if(Wr.uploadState!=="abort"){var Oa=0;Xo.lengthComputable?(Oa=(ro+Xo.loaded)/Wr.file.size,co.onProgress(Oa),co.onUploadProgress({loaded:Xo.loaded,total:Wr.file.size,percentage:Oa,percentageText:(100*Oa).toFixed(2)+"%"})):co.onError(new In("browser does not support query upload progress"))}},Yo.onreadystatechange=function(){var Xo,Oa;if(Wr.uploadState!=="abort"&&Yo.readyState===4){var xl,na,jc,bs;try{bs=JSON.parse(Yo.responseText)}catch(Bo){typeof((Xo=co.logger)===null||Xo===void 0?void 0:Xo.error)=="function"&&co.logger.error("JsonParseError in uploadTrunk",Bo),bs={errMsg:"JsonParseError in uploadTrunk"}}Yo.status===200?(Wr.setContext(bs.context),Io?(Yn(),Wr.setComplete()):Ln(Wr,bs.offset,co.retryCount,Yn)):Yo.status.toString().match(/^5/)?so>0?Ln(Wr,ro,so-1,Yn):(kr.removeFileInfo(Wr.fileKey),co.onError(new In(bs.errMsg,bs.errCode))):so>0?(typeof((Oa=co.logger)===null||Oa===void 0?void 0:Oa.error)=="function"&&co.logger.error(Os(xl="uploadTrunk(".concat(ms,") error. retry after 3 seconds. ")).call(xl,new Date().toTimeString())),yi(function(){Ln(Wr,ro,so-1,Yn)},3500)):(kr.removeFileInfo(Wr.fileKey),Yo.status?co.onError(new In(Os(na=Os(jc="uploadTrunk(".concat(ms,") error: ")).call(jc,Yo.status," ")).call(na,Yo.statusText))):co.onError(new In("uploadTrunk(".concat(ms,") error. no Error Code. Please check your network"))))}},Yo.open("post",ms+"?offset=".concat(ro)+"&complete=".concat(Io)+"&context=".concat(wo)+"&version=".concat(co.version)),Yo.setRequestHeader("x-nos-token",On.token),Wr.file.type&&Yo.setRequestHeader("content-type",Wr.file.type),Yo.timeout=co.trunkUploadTimeout,typeof FileReader<"u"){var zo=new FileReader;zo.addEventListener("load",function(Xo){var Oa;!((Oa=Xo==null?void 0:Xo.target)===null||Oa===void 0)&&Oa.result?Yo.send(Xo.target.result):co.onError(new In("Read ArrayBuffer failed"))}),zo.addEventListener("error",function(Xo){var Oa=Xo.target.error;co.onError(new In("Read ArrayBuffer error. ".concat(Oa.toString()),Oa.code))}),zo.readAsArrayBuffer(mo.call(Wr.file,ro,ga))}else Yo.send(mo.call(Wr.file,ro,ga))}};function Qn(Ln,Wr){for(var ro=0;ro<Wr.length;ro++){var so=Wr[ro];so.enumerable=so.enumerable||!1,so.configurable=!0,"value"in so&&(so.writable=!0),Pu(Ln,so.key,so)}}var Mo=function(){function Ln(ro,so,Yn){(function(On,co){if(!(On instanceof co))throw new TypeError("Cannot call a class as a function")})(this,Ln),this.uploadState="paused",this.config=Yn,this.file=ro,this.param=so,this.fileKey=kr.initFile(so,ro,this.config.enableCache),this.resume()}var Wr;return(Wr=[{key:"resume",value:function(){var so=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Yn=this.config;Cn(this,Yn.retryCount,function(On){Kn(so,On,Yn.retryCount,function(){so.setUploadState("ended"),typeof Yn.onComplete=="function"&&Yn.onComplete(so.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),kr.removeFileInfo(this.fileKey),this.config.onError(new In("Upload Aborted",10499))}},{key:"setUploadState",value:function(so){so!==this.uploadState&&(this.uploadState=so)}},{key:"setContext",value:function(so){kr.setUploadContext(this.fileKey,so,this.config.enableCache),this.param.ctx=so}},{key:"setComplete",value:function(){kr.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&Qn(Ln.prototype,Wr),Ln}(),No={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(Wr){var ro=kr.getFileKey(Wr),so=kr.getFileInfo(ro);return so===null?null:To()-so.modifyAt>No.expireTime?(kr.removeFileInfo(ro),null):{uploadInfo:Gn({bucketName:so.bucket,objectName:so.obj,token:so.token,ctx:so.ctx},so.payload?{payload:so.payload}:{}),complete:so.end}},setMaxFileCache:function(Wr){No.maxFileCache=Wr},setExpireTime:function(Wr){No.expireTime=Wr},printCaches:function(){for(var Wr=0,ro=fa(localStorage);Wr<ro.length;Wr++){var so=ro[Wr],Yn=kr.getFileInfo(so);Yn&&console.log(Yn,"modifiedAt",new Date(Yn.modifyAt).toTimeString())}},createConfig:function(Wr){return new Ce(Wr)},createTask:function(Wr,ro,so){return new Mo(Wr,ro,so)}},Ko=No;return $e.default}()}),wa=g(function(_e,he){_e.exports=function(){function Ue(Lt){if(Lt){var er,rr="";return So(er=fa(Lt)).call(er,function(fr,kr){rr+=kr===0?"?":"&",rr+=fr+"="+Lt[fr]}),rr}return""}var $e=function(Lt){function er(rr,fr,kr,Er){var Rr;return(Rr=Lt.call(this,kr)||this).source=rr,Rr.code=fr,Rr.desc=kr,Rr.detail=Er||{},Rr}return ra(er,Lt),er}(Ha(Error));function Ce(Lt,er){er===void 0&&(er={dataType:"json",method:"GET",timeout:5e3});var rr=er.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",fr=er.method==="GET"?Ue(er.params):"";return new ka(function(kr,Er){if(window.XMLHttpRequest){var Rr,$r=new XMLHttpRequest;if($r.onreadystatechange=function(){if($r.readyState===4)if($r.status===200){try{Rr=JSON.parse($r.response||"{}")}catch{Rr=$r.response}kr({status:$r.status,data:Rr})}else yi(function(){Er(new $e(1,$r.status,"readyState: "+$r.readyState+"; statusText: "+$r.statusText))},0)},$r.open(er.method,""+Lt+fr),$r.timeout=er.timeout||5e3,$r.setRequestHeader("Content-Type",rr),er.headers)for(var Hr in er.headers)$r.setRequestHeader(Hr,er.headers[Hr]);$r.ontimeout=function(Gr){Er(new $e(1,408,Gr&&Gr.message?Gr.message:"request timeout"))},$r.send(va(er.data))}else Er(new $e(2,10400,"request no suppout"))})}return Ce}()}),aa=console,Sp=null,Tp=null,vs={setLogger:function(he){aa=he},platform:"BROWSER",localStorage:window.localStorage,request:wa,WebSocket:window.WebSocket,uploadFile:function(he){return Vn(this,void 0,void 0,Kr.mark(function Ue(){var $e,Ce,Lt,er,rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(he.fileInput||he.file){Er.next=2;break}throw new Error("File not exist");case 2:if(!he.file){Er.next=6;break}er=he.file,Er.next=20;break;case 6:if(typeof he.fileInput!="string"){Er.next=15;break}if(!((rr=document.getElementById(he.fileInput))&&rr.files&&rr.files[0])){Er.next=12;break}er=rr.files[0],Er.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:Er.next=20;break;case 15:if(!(he.fileInput&&he.fileInput.files&&he.fileInput.files[0])){Er.next=19;break}er=he.fileInput.files[0],Er.next=20;break;case 19:throw new Error("Can not get file from fileInput "+he.fileInput);case 20:if(!(he.maxSize&&er.size>he.maxSize)){Er.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+he.maxSize+", get "+er.size);case 22:return Er.next=24,new ka(function(Rr,$r){var Hr=_m.createConfig({enableCache:!1,directUploadAddr:he.chunkUploadHost,onError:function(bn){$r(bn)},onUploadProgress:he.onUploadProgress||function(){},onComplete:function(bn){Rr(bn)}}),Gr=_m.createTask(er,{bucketName:he.nosToken.bucket,objectName:decodeURIComponent(he.nosToken.objectName),token:he.nosToken.token},Hr);try{he.onUploadStart&&he.onUploadStart(Gr)}catch(vn){aa.error("Adapter uploadFile: options.onUploadStart error",vn&&vn.message),Gr.abort(),$r(vn)}});case 24:return(fr=Er.sent).name=er.name,fr.size=er.size,fr.type=er.type,fr.ext=Sv($e=fr.name).call($e,".")>-1?Pa(Ce=fr.name).call(Ce,Sv(Lt=fr.name).call(Lt,".")+1).toLowerCase():"",Er.abrupt("return",fr);case 30:case"end":return Er.stop()}},Ue)}))},getSystemInfo:function(){var he,Ue,$e=su.version||"";if(av())try{var Ce=navigator.userAgent.match(/Electron\/([\d.]+\d+)/);Ce&&Ce[1]&&typeof Ce[1]=="string"&&($e=Ce[1])}catch{}return{os:((he=su.os)===null||he===void 0?void 0:he.family)||"",osVer:((Ue=su.os)===null||Ue===void 0?void 0:Ue.version)||"",browser:su.name||"",browserVer:su.version||"",libEnv:"BROWSER",hostEnv:av()?"Electron":Zu()?"H5":p0()?"BROWSER":"Unset",hostEnvEnum:av()?Ws.Electron:Zu()?Ws.H5:p0()?Ws.BROWSER:Ws.Unset,hostEnvVer:$e,userAgent:navigator&&navigator.userAgent,model:$e,manufactor:su.name||""}},net:{getNetworkStatus:function(){return ka.resolve({net_type:Gs.kStatNetTypeUnkonw,net_connect:typeof navigator>"u"||typeof navigator.onLine!="boolean"||navigator.onLine})},onNetworkStatusChange:function(he){Sp=function(){he({isConnected:!0,networkType:Gs.kStatNetTypeUnkonw})},Tp=function(){he({isConnected:!1,networkType:Gs.kStatNetTypeUnkonw})},window.addEventListener("online",Sp),window.addEventListener("offline",Tp)},offNetworkStatusChange:function(){Sp&&window.removeEventListener("online",Sp),Tp&&window.removeEventListener("offline",Tp),Sp=null,Tp=null}}};xn({target:"Number",stat:!0},{isNaN:function(he){return he!=he}});var ss,yC=_r.Number.isNaN,Wa=hs({none:0,normal:1,all:3}),Mv={normal:0,advanced:1},bC=hs(Mv),Cp=hs({normal:0,owner:1,manager:2}),kv={noVerify:0,needVerify:1,rejectAll:2},$0=hs(kv),xm={needVerify:0,noVerify:1},SC=hs(xm),j0={manager:0,all:1},TC=hs(j0),Mp={manager:0,all:1},wv=hs(Mp),kp={manager:0,all:1},hl=hs(kp);function vl(_e){var he,Ue=["teamId"],$e=["level","memberNum","memberUpdateTime","createTime","updateTime"],Ce=["valid","validToCurrentUser","mute"],Lt={type:bC,muteType:Wa,joinMode:$0,beInviteMode:SC,inviteMode:TC,updateTeamMode:wv,updateExtMode:hl};_e.bits;var er=ea(_e,["bits"]);return So(Ue).call(Ue,function(rr){er[rr]&&(er[rr]=er[rr].toString())}),So($e).call($e,function(rr){er[rr]!==void 0&&(er[rr]=jo(er[rr]))}),So(Ce).call(Ce,function(rr){er[rr]!==void 0&&(er[rr]=jo(er[rr])===1)}),So(he=fa(Lt)).call(he,function(rr){er[rr]!==void 0&&(er[rr]=Lt[rr][er[rr]]||er[rr])}),er}function fc(_e){return _e&&_e.length>0?Lo(_e).call(_e,function(he){return vl(he)}):[]}function D0(_e){var he,Ue=Gn({},_e),$e=["avatar","name","intro","announcement","ext"],Ce={type:Mv,joinMode:kv,beInviteMode:xm,inviteMode:j0,updateTeamMode:Mp,updateExtMode:kp};return So($e).call($e,function(Lt){Ue[Lt]!==void 0&&(Ue[Lt]=Ue[Lt].toString())}),So(he=fa(Ce)).call(he,function(Lt){Ue[Lt]!==void 0&&(Ue[Lt]=Ce[Lt][Ue[Lt]])}),Ue}function Im(_e){var he=["teamId","ext","account","nickInTeam"],Ue={};return _e.bitConfigMask!==void 0&&(Ue.bits=jo(_e.bitConfigMask)),So(he).call(he,function($e){_e[$e]&&(Ue[$e]=_e[$e].toString())}),Object.prototype.hasOwnProperty.call(_e,"nickInTeam")&&(Ue.nickInTeam=_e.nickInTeam),Ue}function nd(_e){var he,Ue=["teamId"],$e=["joinTime","updateTime","bitConfigMask"],Ce=["active","valid","mute"],Lt={type:Cp},er=_e.bits,rr=ea(_e,["bits"]);return er!==void 0&&(rr.muteTeam=jo(er)===1,rr.bitConfigMask=er),rr.id=rr.teamId+"-"+rr.account,So(Ue).call(Ue,function(fr){rr[fr]&&(rr[fr]=rr[fr].toString())}),So($e).call($e,function(fr){rr[fr]!==void 0&&(rr[fr]=jo(rr[fr]))}),So(Ce).call(Ce,function(fr){rr[fr]!==void 0&&(rr[fr]=jo(rr[fr])===1)}),So(he=fa(Lt)).call(he,function(fr){rr[fr]!==void 0&&(rr[fr]=Lt[fr][rr[fr]]||rr[fr])}),rr}function wp(_e){return _e&&_e.length>0?Lo(_e).call(_e,function(he){return nd(he)}):[]}function Na(_e,he,Ue){return Ue===void 0&&(Ue="normal"),{id:_e.teamId+"-"+he,teamId:_e.teamId,account:he,type:Ue,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:_e.memberUpdateTime,updateTime:_e.memberUpdateTime,active:!0,valid:!0}}function _i(_e,he,Ue){return Ue===void 0&&(Ue="normal"),he&&he.length>0?Lo(he).call(he,function($e){return Na(_e,$e,Ue)}):[]}function xi(_e){var he=Gn({},_e);return he.createTime&&(he.createTime=+he.createTime),he.updateTime&&(he.updateTime=+he.updateTime),he.gender&&(he.gender=ss[+he.gender]),he}(function(_e){_e[_e.unknown=0]="unknown",_e[_e.male=1]="male",_e[_e.female=2]="female"})(ss||(ss={}));var CC={"8_1":"createTeam","8_5":"addTeamMembers","8_6":"removeTeamMembers","8_7":"updateTeamInfo","8_8":"leaveTeam","8_9":"getTeamInfo","8_10":"getTeams","8_11":"getTeamMembers","8_12":"dismissTeam","8_13":"applyTeam","8_14":"passTeamApply","8_15":"rejectTeamApply","8_16":"addTeamManagers","8_17":"removeTeamManagers","8_18":"transferTeam","8_19":"updateMyMemberInfo","8_20":"updateNickInTeam","8_21":"acceptTeamInvite","8_22":"rejectTeamInvite","8_25":"muteTeamMember","8_27":"getMutedTeamMembers","8_28":"sendTeamMsgReceipt","8_29":"getTeamMsgReads","8_30":"getTeamMsgReadAccounts","8_31":"notifyTeamMsgReceipts","8_32":"muteTeam","8_33":"getTeamMemberInvitorAccid","8_34":"getTeamsById","8_101":"syncCreateTeam","8_109":"syncTeams","8_119":"syncUpdateTeamMember","8_126":"syncMyTeamMembers"},Pc={team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},teamMsgReceiptTag:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,ext:12,mute:13,invitorAccid:14}},Es=zs(Pc),MC={getTeamInfo:{sid:8,cid:9,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"team",reflectMapper:Es.team}]},getTeams:{sid:8,cid:10,service:"team",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:Es.team},{type:"Number",name:"timetag"}],ignoreErrCodes:[803]},createTeam:{sid:8,cid:1,service:"team",params:[{type:"Property",name:"team",reflectMapper:Pc.team},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:Es.team},{type:"StrArray",name:"abortedAccidList"}]},sendTeamMsgReceipt:{sid:8,cid:28,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Pc.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Es.teamMsgReceiptTag}]},getTeamMsgReads:{sid:8,cid:29,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Pc.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Es.teamMsgReceiptTag}]},getTeamMsgReadAccounts:{sid:8,cid:30,service:"team",params:[{type:"Property",name:"teamMsgReceiptTag",reflectMapper:Pc.teamMsgReceiptTag}],response:[{type:"Property",name:"teamMsgReceipt",reflectMapper:Es.teamMsgReceiptTag},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},notifyTeamMsgReceipts:{sid:8,cid:31,service:"team",response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Es.teamMsgReceiptTag}]},dismissTeam:{sid:8,cid:12,service:"team",params:[{type:"Long",name:"teamId"}]},leaveTeam:{sid:8,cid:8,service:"team",params:[{type:"Long",name:"teamId"}]},transferTeam:{sid:8,cid:18,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateTeamInfo:{sid:8,cid:7,service:"team",params:[{type:"Property",name:"team",reflectMapper:Pc.team}],response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},getTeamsById:{sid:8,cid:34,service:"team",params:[{type:"LongArray",name:"teamIds"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:Es.team},{type:"StrArray",name:"tids"}],ignoreErrCodes:[816]},getTeamMembers:{sid:8,cid:11,service:"team",params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:Es.teamMember},{type:"Number",name:"timetag"}]},getMutedTeamMembers:{sid:8,cid:27,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:Es.teamMember}]},addTeamMembers:{sid:8,cid:5,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}],response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},removeTeamMembers:{sid:8,cid:6,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applyTeam:{sid:8,cid:13,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:Es.team}]},addTeamManagers:{sid:8,cid:16,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:8,cid:17,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateMyMemberInfo:{sid:8,cid:19,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:Pc.teamMember}]},updateNickInTeam:{sid:8,cid:20,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:Pc.teamMember}]},muteTeamMember:{sid:8,cid:25,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:8,cid:33,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}],response:[{type:"Object",name:"accountsMap"}]},muteTeam:{sid:8,cid:32,service:"team",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},passTeamApply:{sid:8,cid:14,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:8,cid:15,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptTeamInvite:{sid:8,cid:21,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:8,cid:22,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncTeams:{sid:8,cid:109,service:"team",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",reflectMapper:Es.team}]},syncCreateTeam:{sid:8,cid:101,service:"team",response:[{type:"Property",name:"team",reflectMapper:Es.team}]},syncUpdateTeamMember:{sid:8,cid:119,service:"team",response:[{type:"Property",name:"teamMember",reflectMapper:Es.teamMember}]},syncMyTeamMembers:{sid:8,cid:126,ext:"sync",service:"team",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember",reflectMapper:Es.teamMember},{type:"Number",name:"timetag"}]}},kC={"3_7":"getUsersNameCardFromServer","3_10":"updateMyNameCard","3_109":"syncMyNameCard","3_110":"onUpdateMyNameCard","3_3":"setBlack","3_103":"onUpdateBlackList","3_5":"setMute","3_105":"onUpdateMuteList","3_8":"syncRelations"},U0={user:{account:1,nick:3,avatar:4,signature:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13},relationMember:{account:0,isMuted:1,isBlack:2,createTime:3,updateTime:4}},_p=zs(U0),wC={syncMyNameCard:{sid:3,cid:109,service:"user",response:[{type:"Property",name:"user",reflectMapper:_p.user},{type:"Number",name:"timetag"}]},setBlack:{service:"user",sid:3,cid:3,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateBlackList:{service:"user",sid:3,cid:103,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},setMute:{service:"user",sid:3,cid:5,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateMuteList:{service:"user",sid:3,cid:105,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},syncRelations:{service:"user",sid:3,cid:8,params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"list",reflectMapper:_p.relationMember},{type:"Number",name:"timetag"}]},getUsersNameCardFromServer:{service:"user",sid:3,cid:7,params:[{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"users",reflectMapper:_p.user}]},updateMyNameCard:{service:"user",sid:3,cid:10,params:[{type:"Property",name:"user",reflectMapper:U0.user}],response:[{type:"Number",name:"timetag"}]},onUpdateMyNameCard:{service:"user",sid:3,cid:110,response:[{type:"Property",name:"user",reflectMapper:_p.user}]}},Em={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needForcePush:{type:"boolean",required:!1},forcePushIDsList:{type:"string",allowEmpty:!1,required:!1},forcePushContent:{type:"string",allowEmpty:!1,required:!1}},od={function:{type:"string",required:!1},topic:{type:"string",required:!1},customContent:{type:"string",required:!1},account:{type:"string",required:!1}};function Pm(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(lc(_e)||($e=function(er,rr){var fr;if(er){if(typeof er=="string")return Am(er,rr);var kr=Pa(fr=Object.prototype.toString.call(er)).call(fr,8,-1);if(kr==="Object"&&er.constructor&&(kr=er.constructor.name),kr==="Map"||kr==="Set")return Wi(er);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return Am(er,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Am(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var ad={subType:{type:"string"},setting:{resendFlag:{type:"boolean"},envConfig:{type:"string"},needSaveHistory:{type:"boolean"},needRoaming:{type:"boolean"},needOffline:{type:"boolean"},needSelfSync:{type:"boolean"},needRouted:{type:"boolean"},needUpdateSession:{type:"boolean"},isMuted:{type:"boolean"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBIZID:{type:"string"},clientAntispamHitting:{type:"boolean"},antiSpamUsingYidun:{type:"boolean"},yidunCallbackURL:{type:"string"},yidunAntiCheating:{type:"string"},yidunAntiSpamExtension:{type:"string"},yidunAntiSpamResult:{type:"string"}},pushInfo:Em,robotInfo:od,teamSpecializationInfo:{needACK:{type:"boolean"},isACKSent:{type:"boolean"},ackSnapshot:{type:"number"}},threadMessageInfo:{replyMsgFromAccount:{type:"string"},replyMsgToAccount:{type:"string"},replyMsgTime:{type:"number"},replyMsgIdServer:{type:"string"},replyMsgIdClient:{type:"string"},threadMsgFromAccount:{type:"string"},threadMsgToAccount:{type:"string"},threadMsgTime:{type:"number"},threadMsgIdServer:{type:"string"},threadMsgIdClient:{type:"string"}}},xp={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMemberMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function Ac(_e,he){return es[_e.scene]+"-"+(_e.to===he?_e.from:_e.to)}function _C(_e,he){return _e.from===he?_e.to===he?"in":"out":"in"}function Ii(_e,he){var Ue=he.account,$e=he.featureValue,Ce=he.statusValue,Lt=he.sessionAck,er=he.msgReceiptTime,rr=es[_e.scene],fr=_e.to===Ue?_e.from:_e.to,kr=ki.default,Er=za.unread;jo(_e.isInBlackList)>0?(Er=za.refused,delete _e.isInBlackList):Er=_e.from===Ue?er&&er>=+_e.time?za.receipt:za.sent:Lt&&Lt>=+_e.time?za.read:za.unread;var Rr=Gn(Gn({},oi(ad,_e)),{scene:rr,type:Xl[_e.type],fromClientType:op[_e.fromClientType],flow:_C(_e,Ue),target:fr,to:_e.to,from:_e.from,time:_e.time?+_e.time:void 0,userUpdateTime:_e.userUpdateTime?+_e.userUpdateTime:void 0,idClient:_e.idClient,sessionId:rr+"-"+fr,status:za[Ce||Er],feature:ki[$e||kr]});if(typeof Rr.attach=="string")try{Rr.attach=JSON.parse(Rr.attach)}catch{}return Rr.type==="notification"&&(Rr.attach=Rr.attach?function(Hr){var Gr,vn={};if(vn.type=xp[Hr.id]||Hr.id,!Hr.data)return vn;var bn,In={ids:"accounts",id:"account",attach:"custom",channel:"channelId",calltype:"netcallType",mute:"mute",duration:"duration",time:"time",from:"from",ext:"ext"},Cn=Hr.data;return So(Gr=fa(In)).call(Gr,function(Kn){Cn[Kn]!==void 0&&(vn[In[Kn]]=Cn[Kn])}),Cn.tinfo&&(vn.team=vl(il(Cn.tinfo,Es.team))),Cn.uinfos&&(vn.users=Lo(bn=Cn.uinfos).call(bn,function(Kn){return xi(il(Kn,_p.user))})),Cn.mute!==void 0&&(vn.mute=jo(Cn.mute)===1),vn}(Rr.attach):{}),Rr}function Nm(_e,he){return _e&&_e.length>0?V0(Lo(_e).call(_e,function(Ue){return Ii(Ue,he)})):[]}function V0(_e){for(var he,Ue,$e={},Ce=Pm(_e);!(Ue=Ce()).done;){var Lt=Ue.value,er=$e[Lt.idClient];er&&er.time>Lt.time||($e[Lt.idClient]=Lt)}return Lo(he=fa($e)).call(he,function(rr){return $e[rr]})}function _v(_e,he){he===void 0&&(he=!0);var Ue=Gn({},_e);if(Ue.pushInfo&&he){for(var $e in Ue.pushInfo)typeof Ue.pushInfo[$e]=="boolean"?Ue[$e]=Ue.pushInfo[$e]?1:0:Ue[$e]=Ue.pushInfo[$e];delete Ue.pushInfo}return Ue.scene===es.team&&Ue.needForcePush&&(Ue.forcePushContent=Ue.forcePushContent||Ue.pushContent,Ue.forcePushIDsList=Ue.forcePushIDsList?Ue.forcePushIDsList:"#%@all@%#"),Ue}function Ip(_e,he){return Lo(_e).call(_e,function(Ue){var $e;return $e=he||(yC(jo(Ue.scene))?Ue.scene:jo(Ue.scene)===1?"p2p":"team"),{deletedTime:jo(Ue.time),from:Ue.from,idClient:Ue.deletedIdClient||Ue.idClient,idServer:Ue.deletedIdServer||Ue.idServer,scene:$e,time:jo(Ue.deletedMsgCreateTime),to:Ue.to,ext:typeof Ue.ext=="string"?Ue.ext:null}})}var q0=Array.prototype.reverse,xC=function(he){return he==null?he:q0.call(he)},H0=function(){function _e(he){this.core=he}return _e.prototype.processBroadcastMsg=function(Ue){var $e=Lo(Ue).call(Ue,function(Ce){return Gn(Gn({},Ce),{time:jo(Ce.time)})});return this.core.sendCmd("batchMarkRead",{sid:7,cid:17,ids:Lo($e).call($e,function(Ce){return Ce.id})}),$e},_e}(),cu={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1}},Ep={pushContent:8,pushPayload:9,needPush:107,needPushBadge:109,needPushNick:110},sd={"4_4":"syncOfflineMsgs","4_9":"syncRoamingMsgs","4_17":"syncRoamingMsgs","4_21":"syncDeleteSelfMsgs","7_1":"sendMsg","8_23":"getHistoryTeamMsgs","21_14":"getHistorySuperTeamMsgs","8_2":"sendTeamMsg","21_2":"sendSuperTeamMsg","7_11":"sendMsgReceipt","7_13":"recallMsg","7_24":"deleteSelfMsgs","21_17":"recallSuperTeamMsg","7_2":"onMsg","8_3":"onMsg","21_3":"onMsg","7_101":"onMsg","8_102":"onMsg","21_102":"onMsg","8_4":"nimOnTeamMsgs","4_16":"syncBroadcastMsg","7_17":"onBroadcastMsg","7_123":"onDeleteSelfMsg","7_124":"onDeleteSelfMsgs"},yl=Gn(Gn({scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resendFlag:13,userUpdateTime:14,ext:15,needAntiSpam:21,antiSpamContent:22,antiSpamBIZID:23,clientAntispamHitting:24,antiSpamUsingYidun:25,needACK:26,yidunCallbackURL:27,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,isDeleted:39,callbackExt:40,subType:41,yidunAntiCheating:42,envConfig:43,yidunAntiSpamExtension:44,yidunAntiSpamResult:45,needSaveHistory:100,needRoaming:101,needSelfSync:102,isMuted:104,needRouted:105,isInBlackList:106,needOffline:108,isReplyMsg:111,ackSnapshot:112},{pushContent:17,pushPayload:16,forcePushIDsList:18,forcePushContent:19,needForcePush:20,needPush:107,needPushBadge:109,needPushNick:110}),{function:47,topic:48,customContent:49,account:50}),bl={msg:yl,recallMsgTag:Gn({time:0,type:1,to:2,from:3,ps:4,attach:5,deletedIdClient:10,deletedIdServer:11,opeAccount:16,env:21},Ep),deleteSelfMsgTag:{scene:1,from:2,to:3,idServer:4,idClient:5,deletedMsgCreateTime:6,time:7,ext:8},msgReceiptTag:{to:1,from:2,time:7,idClient:11},broadcastMsg:{id:1,fromAccid:2,time:4,body:5}},ks=zs(bl),IC={sendMsg:{sid:7,cid:1,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:bl.msg}],response:[{type:"Property",name:"msg",reflectMapper:ks.msg}],ignoreErrCodes:[7101]},sendTeamMsg:{sid:8,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:bl.msg}],response:[{type:"Property",name:"msg",reflectMapper:ks.msg}]},sendSuperTeamMsg:{sid:21,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:bl.msg}],response:[{type:"Property",name:"msg",reflectMapper:ks.msg}]},onMsg:{sid:7,cid:2,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:ks.msg}]},nimOnTeamMsgs:{sid:8,cid:4,service:"msg",response:[{type:"PropertyArray",name:"datas",reflectMapper:ks.msg}]},getHistoryTeamMsgs:{sid:8,cid:23,service:"msg",params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:ks.msg}]},getHistorySuperTeamMsgs:{sid:21,cid:14,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:ks.msg}],service:"msg"},recallMsg:{sid:7,cid:13,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:bl.recallMsgTag}]},deleteSelfMsgs:{sid:7,cid:24,service:"msg",params:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:bl.deleteSelfMsgTag}],response:[{type:"Long",name:"timetag"}]},recallSuperTeamMsg:{sid:21,cid:17,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:bl.recallMsgTag}]},sendMsgReceipt:{sid:7,cid:11,service:"msg",params:[{type:"Property",name:"msgReceiptTag",reflectMapper:bl.msgReceiptTag}],response:[{type:"Property",name:"msgReceiptTag",reflectMapper:ks.msgReceiptTag}]},batchMarkRead:{sid:4,cid:5,service:"msg",hasPacketResponse:!1,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},syncMsgReceipts:{sid:4,cid:12,service:"msg",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:ks.msgReceiptTag},{type:"Number",name:"timetag"}]},syncOfflineMsgs:{sid:4,cid:4,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ks.msg}]},syncRoamingMsgs:{sid:4,cid:9,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ks.msg}]},syncBroadcastMsg:{sid:4,cid:16,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:ks.broadcastMsg}]},onBroadcastMsg:{sid:7,cid:17,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:ks.broadcastMsg}]},onDeleteSelfMsg:{sid:7,cid:123,service:"msg",response:[{type:"Property",name:"deletedMsg",reflectMapper:ks.deleteSelfMsgTag}]},onDeleteSelfMsgs:{sid:7,cid:124,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:ks.deleteSelfMsgTag}]},syncDeleteSelfMsgs:{sid:4,cid:21,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:ks.deleteSelfMsgTag}]}},EC=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"msg",$e)||this).service=new H0($e),Ts({cmdMap:sd,cmdConfig:IC}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.sendTextMsg=function(Ce){return Xn({body:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"text"}))},Ue.sendTipMsg=function(Ce){return Xn({body:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"tip"}))},Ue.sendGeoLocationMsg=function(Ce){return Xn({attach:{type:"object",rules:{title:{type:"string",allowEmpty:!1},lat:{type:"number"},lng:{type:"number"}}}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"geo",attach:va(Ce.attach)}))},Ue.sendCustomMsg=function(Ce){return Xn({attach:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"custom"}))},Ue.sendMsg=function(Ce){var Lt,er=this;if(Xn({scene:{type:"enum",values:dc(es)},type:{type:"enum",values:dc(Xl)},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},setting:{type:"object",rules:{resendFlag:{type:"boolean",required:!1},needSaveHistory:{type:"boolean",required:!1},needRoaming:{type:"boolean",required:!1},needOffline:{type:"boolean",required:!1},needSelfSync:{type:"boolean",required:!1},needRouted:{type:"boolean",required:!1},needUpdateSession:{type:"boolean",required:!1}},required:!1},antiSpamInfo:{type:"object",required:!1,rules:{clientAntispamHitting:{type:"boolean",required:!1},antiSpamUsingYidun:{type:"boolean",required:!1}}},pushInfo:{type:"object",required:!1,rules:Em},robotInfo:{type:"object",required:!1,rules:od},teamSpecializationInfo:{type:"object",required:!1,rules:{needACK:{type:"boolean",required:!1}}}},Ce),Ce.scene==="team"&&Ce.robotInfo&&!Ce.robotInfo.account)throw new Uu('When "scene" equals "team", account is required in robotInfo',{key:"account"},"required");var rr,fr=Ce.scene==="p2p"?"sendMsg":Ce.scene==="team"?"sendTeamMsg":"sendSuperTeamMsg",kr=function($r,Hr,Gr,vn){$r.onSendBefore,$r.onUploadStart,$r.onUploadDone;var bn=$r.replyMsg,In=ea($r,["onSendBefore","onUploadStart","onUploadDone","replyMsg"]),Cn=Gn(Gn({},am(ad,In)),{scene:es[$r.scene],type:Xl[$r.type],from:Hr,fromClientType:16,fromDeviceId:Gr,fromNick:vn==null?void 0:vn.nick,userUpdateTime:vn==null?void 0:vn.updateTime,status:za[za.sending]});if(Cn.idClient=Cn.resendFlag?$r.idClient:Qo(),!Cn.idClient)throw new Ph("idClient is required to resend a message","idClient","required");return Cn=_v(Cn,!1),bn&&(Cn.replyMsgFromAccount=bn.from,Cn.replyMsgToAccount=bn.to,Cn.replyMsgTime=+bn.time,Cn.replyMsgIdServer=bn.idServer,Cn.replyMsgIdClient=bn.idClient,Cn.threadMsgFromAccount=bn.from,Cn.threadMsgToAccount=bn.to,Cn.threadMsgTime=+bn.time,Cn.threadMsgIdServer=bn.idServer,Cn.threadMsgIdClient=bn.idClient,bn.threadMessageInfo&&bn.threadMessageInfo.threadMsgIdServer&&(Cn.threadMsgFromAccount=bn.threadMessageInfo.threadMsgFromAccount,Cn.threadMsgToAccount=bn.threadMessageInfo.threadMsgToAccount,Cn.threadMsgTime=bn.threadMessageInfo.threadMsgTime,Cn.threadMsgIdServer=bn.threadMessageInfo.threadMsgIdServer,Cn.threadMsgIdClient=bn.threadMessageInfo.threadMsgIdClient)),Cn}(Ce,this.core.account,this.core.config.deviceId,(Lt=this.core.user)===null||Lt===void 0?void 0:Lt.myInfo),Er=Ii(Gn(Gn({},kr),{time:new Date().getTime()}),{account:this.core.account,featureValue:ki.default,statusValue:za.sending});try{Ce.onSendBefore&&Ce.onSendBefore(Er)}catch(Rr){this.logger.error("sendMsg: options.onSendBefore error",Rr)}return this.core.eventBus.emit("session/updateForNewMsg",Er),this.core.sendCmd(fr,{msg:kr}).then(function(Rr){var $r=Rr.content,Hr=Rr.error;if(rr=$r.msg,Hr)throw Hr;var Gr=Ii(Gn(Gn({},kr),$r.msg),{account:er.core.account,featureValue:ki.default,statusValue:za.sent});return Gr.from===Gr.to&&er.markMsgsAck([Gr]),er.core.eventBus.emit("session/updateForNewMsg",Gr),er.core.reporter.report("msgSend",{msgId:Gr.idServer,clientId:Gr.idClient,msgTime:Gr.time,fromAccid:Ce.scene==="p2p"?er.core.account:"",toAccid:Gr.to,type:es[Gr.scene],roomId:"",tid:Ce.scene==="p2p"?"":Gr.to,result:200,failReason:"",rt:To()-Er.time}),Gr}).catch(function(Rr){var $r=Ii(Gn(Gn(Gn({},kr),{time:new Date().getTime()}),rr),{account:er.core.account,featureValue:ki.default,statusValue:Rr.code===7101?za.refused:za.sendFailed});throw Rr.msg=$r,er.core.eventBus.emit("session/updateForNewMsg",$r),er.core.reporter.report("msgSend",{msgId:$r.idServer,clientId:$r.idClient,msgTime:$r.time,fromAccid:Ce.scene==="p2p"?er.core.account:"",toAccid:$r.to,type:es[$r.scene],roomId:"",tid:Ce.scene==="p2p"?"":$r.to,result:Rr==null?void 0:Rr.code,failReason:(Rr==null?void 0:Rr.message)||"",rt:To()-Er.time}),Rr})},Ue.resendMsg=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}}},Ce),er=Ce.msg,rr=Gn(Gn({},er),{attach:er.attach?va(er.attach):void 0,setting:{resendFlag:!0}}),er.from===this.core.account){kr.next=5;break}throw new Error("You can only resend messages that you sent: "+er.idClient);case 5:return kr.abrupt("return",this.sendMsg(rr));case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.forwardMsg=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}},scene:{type:"enum",values:dc(es)},to:{type:"string",allowEmpty:!1}},Ce),er=Ce.msg,rr=Gn(Gn({},er),{scene:Ce.scene,to:Ce.to,attach:er.attach?va(er.attach):void 0}),kr.abrupt("return",this.sendMsg(rr));case 4:case"end":return kr.stop()}},Lt,this)}))},Ue.sendImageMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"image"}))},Ue.sendFileMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"file"}))},Ue.sendAudioMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"audio"}))},Ue.sendVideoMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"video"}))},Ue.doSendFile=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Xn({scene:{type:"enum",values:dc(es)},to:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},Ce),er=Ce.attach){fr.next=15;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){fr.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return fr.prev=5,fr.next=8,this.core.cloudStorage.uploadFile(Ce);case 8:er=fr.sent,fr.next=15;break;case 11:throw fr.prev=11,fr.t0=fr.catch(5),this.logger.error("sendFile:: upload File error or abort",fr.t0),fr.t0;case 15:return fr.abrupt("return",this.sendMsg(Gn(Gn({},Ce),{attach:va(er),type:Ce.type})));case 16:case"end":return fr.stop()}},Lt,this,[[5,11]])}))},Ue.recallMsg=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},scene:{type:"enum",values:dc(es)},time:{type:"number"}}},pushInfo:{type:"object",required:!1,rules:cu},ps:{type:"string",allowEmpty:!1,required:!1}},Ce),er=Ce.msg,rr={p2p:"recallMsg",team:"recallMsg",superTeam:"recallSuperTeamMsg"},fr={p2p:7,team:8,superTeam:12},Rr.next=6,this.core.sendCmd(rr[er.scene],{recallMsgTag:_v({time:er.time,type:fr[er.scene],to:er.to,from:er.from,ps:Ce.ps,attach:Ce.attach,deletedIdClient:er.idClient,deletedIdServer:er.idServer,opeAccount:er.from,env:Ce.env,pushInfo:Ce.pushInfo})});case 6:return kr=Gn({},er,{deletedMsgCreateTime:er.time}),this.core.eventBus.emit("session/updateForDeletedMsg",Ip([kr])),Rr.abrupt("return",er);case 9:case"end":return Rr.stop()}},Lt,this)}))},Ue.deleteSelfMsgs=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({msgs:{type:"array",rules:{scene:{type:"enum",values:["p2p","team"]},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},time:{type:"number",allowEmpty:!1}}},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),er=Ce.msgs,rr=Lo(er).call(er,function(Hr){return{scene:Hr.scene==="p2p"?1:2,from:Hr.from,to:Hr.to,idServer:Hr.idServer,idClient:Hr.idClient,deletedMsgCreateTime:Hr.time,ext:Ce.ext}}),$r.next=5,this.core.sendCmd("deleteSelfMsgs",{deletedMsgs:rr});case 5:return fr=$r.sent,kr=Lo(rr).call(rr,function(Hr){var Gr;return Gn({},Hr,{time:(Gr=fr==null?void 0:fr.content)===null||Gr===void 0?void 0:Gr.timetag})}),Er=Ip(kr),this.core.eventBus.emit("session/updateForDeletedMsg",er),$r.abrupt("return",Er);case 10:case"end":return $r.stop()}},Lt,this)}))},Ue.sendMsgReceipt=function(Ce){var Lt,er;return Vn(this,void 0,void 0,Kr.mark(function rr(){var fr,kr,Er,Rr;return Kr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},target:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ce),(fr=Ce.msg).scene==="p2p"&&fr.flow==="in"){Hr.next=5;break}return this.logger.warn("Msg scene: "+fr.scene+", flow: "+fr.flow+" is not allowed to send msg receipt"),Hr.abrupt("return",void 0);case 5:return kr={to:fr.target,idClient:fr.idClient,time:fr.time},Hr.next=8,this.core.sendCmd("sendMsgReceipt",{msgReceiptTag:kr});case 8:return Er=Hr.sent,Rr=jo((er=(Lt=Er.content)===null||Lt===void 0?void 0:Lt.msgReceiptTag)===null||er===void 0?void 0:er.time),Hr.abrupt("return",Gn(Gn({},kr),{time:Rr?Math.min(Rr,kr.time):kr.time}));case 11:case"end":return Hr.stop()}},rr,this)}))},Ue.sendTeamMsgReceipt=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}},max:50}},Ce),er=Ce.teamMsgReceipts,this.core.sendCmd("sendTeamMsgReceipt",{teamMsgReceipts:er}),fr.abrupt("return",void 0);case 4:case"end":return fr.stop()}},Lt,this)}))},Ue.getTeamMsgReads=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},Ce),rr=Ce.teamMsgReceipts,Rr.next=4,this.core.sendCmd("getTeamMsgReads",{teamMsgReceipts:rr});case 4:return fr=Rr.sent,kr=(kr=(Lt=fr.content)===null||Lt===void 0?void 0:Lt.teamMsgReceipts)?Lo(kr).call(kr,function($r){return Gn(Gn({},$r),{read:jo($r.read),unread:jo($r.unread)})}):[],Rr.abrupt("return",kr);case 8:case"end":return Rr.stop()}},er,this)}))},Ue.getTeamMsgReadAccounts=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamMsgReceipt:{type:"object",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},Ce),er=Ce.teamMsgReceipt,kr.next=4,this.core.sendCmd("getTeamMsgReadAccounts",{teamMsgReceiptTag:er});case 4:return rr=kr.sent,kr.abrupt("return",rr.content);case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.markMsgsAck=function(Ce){if(Ce&&Ce.length>0){var Lt=[],er=[];So(Ce).call(Ce,function(rr){rr.scene==="p2p"&&rr.flow==="in"?Lt.push(rr):rr.scene==="team"&&rr.flow==="in"&&er.push(rr)}),Lt.length>0&&this.core.sendCmd("batchMarkRead",{sid:7,cid:2,ids:Lo(Lt).call(Lt,function(rr){return rr.idServer})}),er.length>0&&this.core.sendCmd("batchMarkRead",{sid:8,cid:3,ids:Lo(er).call(er,function(rr){return rr.idServer})})}},Ue.onMsgHandler=function(Ce){var Lt;if(Ce.error)this.logger.error("msgHandler::recvError",Ce.error);else{var er=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0,rr=Ce.content.msg;rr.idServer=rr.idServer||er;var fr=To(),kr=Ac(rr,this.core.account),Er=(Lt=this.core.session)===null||Lt===void 0?void 0:Lt.getSessionWithUncomplete({id:kr}),Rr=Ii(rr,Er?{account:this.core.account,sessionAck:Er.ack,msgReceiptTime:Er.msgReceiptTime}:{account:this.core.account});if(this.core.options.debugLevel==="debug"?this.logger.debug("msgHandler::recvMsg",Rr.idClient,Rr.idServer,Rr):this.logger.log("msgHandler::recvMsg",Rr.idClient,Rr.idServer),this.markMsgsAck([Rr]),this.core.eventBus.emit("session/updateForNewMsg",Rr),Rr.scene==="superTeam"?this.core.eventBus.emit("sync/updateTimetag",{superTeamRoamingMsgs:Rr.time}):this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:Rr.time}),this.core.emit("msg",Rr),Rr.type==="notification")this.core.eventBus.emit("team/onNotification",Rr);else if(Rr.flow!=="out"){var $r=Rr.scene==="p2p",Hr={msgId:Rr.idServer,clientId:Rr.idClient,receiveTime:Ce.__receiveTime,serverTime:Rr.time,callbackTime:To(),preHandleTime:fr,fromAccid:Rr.from,toAccid:this.core.account,type:es[Rr.scene],tid:$r?"":Rr.to,result:200,failReason:"",rt:To()-Rr.time};this.core.reporter.report("msgReceive",Hr)}Rr.type!=="notification"&&this.core.user.checkUserUpdate(Rr)}},Ue.nimOnTeamMsgsHandler=function(Ce){var Lt,er=this;So(Lt=Ce.content.datas).call(Lt,function(rr){er.onMsgHandler(Gn({},Ce,{content:{msg:rr}}))})},Ue.syncRoamingMsgsHandler=function(Ce){var Lt,er,rr=Ce.content.msgs||[];if(rr.length!==0){var fr=Ac(rr[0],this.core.account),kr=(Lt=this.core.session)===null||Lt===void 0?void 0:Lt.getSessionWithUncomplete({id:fr}),Er=(rr=Nm(rr,kr?{account:this.core.account,featureValue:ki.roam,sessionAck:kr.ack,msgReceiptTime:kr.msgReceiptTime}:{account:this.core.account,featureValue:ki.roam}))[0].time,Rr={timetag:Er,sessionId:fr,msgs:xC(rr)};!((er=this.core.sync)===null||er===void 0)&&er.getSyncDoneFlag()||this.core.eventBus.emit("session/syncMsgs",Rr),this.core.emit("syncRoamingMsgs",Rr),rr[0].scene==="superTeam"?this.core.eventBus.emit("sync/updateTimetag",{superTeamRoamingMsgs:Er}):this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:Er})}},Ue.syncOfflineMsgsHandler=function(Ce){var Lt,er=this,rr=Ce.content.msgs||[];if(rr.length!==0){var fr={},kr=[];So(rr).call(rr,function(Rr){var $r=Ac(Rr,er.core.account),Hr=er.core.session.getSessionWithUncomplete({id:$r}),Gr=Ii(Rr,Hr?{account:er.core.account,featureValue:ki.leave,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:er.core.account,featureValue:ki.leave});kr.push(Gr),fr[Gr.sessionId]?fr[Gr.sessionId].push(Gr):fr[Gr.sessionId]=[Gr]}),this.markMsgsAck(kr);var Er=0;So(Lt=fa(fr)).call(Lt,function(Rr){var $r,Hr=iu($r=fr[Rr]).call($r,function(vn,bn){return bn.time-vn.time});(Hr=V0(Hr))[0].time>Er&&(Er=Hr[0].time);var Gr={timetag:Hr[0].time,sessionId:Rr,msgs:Hr};er.core.eventBus.emit("session/syncMsgs",Gr),er.core.emit("syncOfflineMsgs",Gr)}),this.core.eventBus.emit("sync/updateTimetag",{offlineMsgs:Er})}},Ue.syncDeleteSelfMsgsHandler=function(Ce){var Lt,er=(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.deletedMsgs;er&&er.length>0||this.logger.warn("syncDeleteSelfMsgs:: no msgs");var rr=er[er.length-1].time;this.core.eventBus.emit("sync/updateTimetag",{deleteSelfMsgs:rr})},Ue.onDeleteSelfMsgHandler=function(Ce){var Lt=Ip([Ce.content.deletedMsg]);this.core.eventBus.emit("session/updateForDeletedMsg",Lt),this.core.emit("deleteSelfMsgs",Lt)},Ue.onDeleteSelfMsgsHandler=function(Ce){var Lt=Ip(Ce.content.deletedMsgs);this.core.eventBus.emit("session/updateForDeletedMsg",Lt),this.core.emit("deleteSelfMsgs",Lt)},Ue.onBroadcastMsgHandler=function(Ce){var Lt=Ce.content.msg,er=this.service.processBroadcastMsg([Lt]);this.core.emit("broadcastMsgs",er)},Ue.syncBroadcastMsgHandler=function(Ce){var Lt=Ce.content.msgs,er=this.service.processBroadcastMsg(Lt);this.core.emit("broadcastMsgs",er)},he}(Ls),Sl={"6_23":"getServerTime","6_31":"notifyDetect","6_32":"uploadDetect"},id={notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105}},Ei={getServerTime:{sid:6,cid:23,service:"misc",response:[{type:"Long",name:"time"}]},notifyDetect:{sid:6,cid:31,service:"misc",response:[{type:"Property",name:"data",reflectMapper:hs(id.notifyDetectTag)}]},uploadDetect:{sid:6,cid:32,service:"misc",hasPacketResponse:!1,params:[{type:"Property",name:"data",reflectMapper:id.notifyDetectTag}]}},Pi={type:{type:"number"},t1:{type:"number"},t2:{type:"number"},t3:{type:"number"},t4:{type:"number"},t5:{type:"number"},t6:{type:"number"}},xv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"misc",$e)||this).core=$e,Ts({cmdMap:Sl,cmdConfig:Ei}),Ce.setListener(),Ce}ra(he,_e);var Ue=he.prototype;return Ue.setListener=function(){},Ue.getServerTime=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.clientSocket.sendCmd("getServerTime");case 2:return Lt=rr.sent,rr.abrupt("return",jo(Lt.content.time));case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.notifyDetectHandler=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return kr=Ce.content.data,(er=oi(Pi,kr)).t3=Ce.__receiveTime,er.t4=To(),fr.prev=3,fr.next=6,this.core.clientSocket.sendCmd("uploadDetect",{data:er});case 6:fr.next=11;break;case 8:fr.prev=8,fr.t0=fr.catch(3),this.core.logger.warn("misc::notifyDetectHandler:upload failed",fr.t0);case 11:case"end":return fr.stop()}var kr},Lt,this,[[3,8]])}))},he}(Ls),Iv=function(he,Ue,$e,Ce){if(!ri(he))return he;for(var Lt=-1,er=(Ue=qf(Ue,he)).length,rr=er-1,fr=he;fr!=null&&++Lt<er;){var kr=ep(Ue[Lt]),Er=$e;if(kr==="__proto__"||kr==="constructor"||kr==="prototype")return he;if(Lt!=rr){var Rr=fr[kr];(Er=Ce?Ce(Rr,kr,fr):void 0)===void 0&&(Er=ri(Rr)?Rr:sm(Ue[Lt+1])?[]:{})}Yh(fr,kr,Er),fr=fr[kr]}return he},z0=function(he,Ue,$e){for(var Ce=-1,Lt=Ue.length,er={};++Ce<Lt;){var rr=Ue[Ce],fr=yh(he,rr);$e(fr,rr)&&Iv(er,qf(rr,he),fr)}return er},lu=function(he,Ue){return he!=null&&Ue in Object(he)},PC=function(he,Ue,$e){for(var Ce=-1,Lt=(Ue=qf(Ue,he)).length,er=!1;++Ce<Lt;){var rr=ep(Ue[Ce]);if(!(er=he!=null&&$e(he,rr)))break;he=he[rr]}return er||++Ce!=Lt?er:!!(Lt=he==null?0:he.length)&&qh(Lt)&&sm(rr,Lt)&&(ei(he)||ip(he))},W0=function(he,Ue){return he!=null&&PC(he,Ue,lu)},AC=function(he,Ue){return z0(he,Ue,function($e,Ce){return W0(he,Ce)})},cd=function(he,Ue){for(var $e=-1,Ce=Ue.length,Lt=he.length;++$e<Ce;)he[Lt+$e]=Ue[$e];return he},Pp=ti?ti.isConcatSpreadable:void 0,Gi=function(he){return ei(he)||ip(he)||!!(Pp&&he&&he[Pp])},Ap=function _e(he,Ue,$e,Ce,Lt){var er=-1,rr=he.length;for($e||($e=Gi),Lt||(Lt=[]);++er<rr;){var fr=he[er];Ue>0&&$e(fr)?Ue>1?_e(fr,Ue-1,$e,Ce,Lt):cd(Lt,fr):Ce||(Lt[Lt.length]=fr)}return Lt},Tl=function(he){return he!=null&&he.length?Ap(he,1):[]},ya=function(he){return mm(ev(he,void 0,Tl),he+"")}(function(_e,he){return _e==null?{}:AC(_e,he)});function Nc(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(lc(_e)||($e=function(er,rr){var fr;if(er){if(typeof er=="string")return ld(er,rr);var kr=Pa(fr=Object.prototype.toString.call(er)).call(fr,8,-1);if(kr==="Object"&&er.constructor&&(kr=er.constructor.name),kr==="Map"||kr==="Set")return Wi(er);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return ld(er,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ld(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var Ev=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"user",$e)||this).userInfoMap=new xc,Ce.myInfo=xi({}),Ts({cmdMap:kC,cmdConfig:wC}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.setBlack=function(Ce){return Xn({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},Ce),this.core.sendCmd("setBlack",Ce).then(function(){})},Ue.setMute=function(Ce){return Xn({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},Ce),this.core.sendCmd("setMute",Ce).then(function(){})},Ue.getRelations=function(){return this.core.sendCmd("syncRelations",{timetag:0})},Ue.getBlackList=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return Lt=rr.sent,rr.abrupt("return",Lt.blackList||[]);case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.getMuteList=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return Lt=rr.sent,rr.abrupt("return",Lt.muteList||[]);case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.updatePushToken=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){return Kr.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return er.stop()}},Ce,this)}))},Ue.updateAppBackground=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){return Kr.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return er.stop()}},Ce,this)}))},Ue.getUsersNameCardFromServer=function(Ce){var Lt=this;return Xn({accounts:{type:"array",max:150,itemType:"string"}},Ce),this.core.sendCmd("getUsersNameCardFromServer",ya(Ce,["accounts"])).then(function(er){var rr,fr=er.content;return Lt.logger.log("user:: getUsers done",Ce.accounts),fr&&fr.users?Lo(rr=fr.users).call(rr,function(kr){return xi(kr)}):[]})},Ue.updateMyNameCard=function(Ce){var Lt=this;if(Xn({nick:{type:"string",required:!1},avatar:{type:"string",required:!1},signature:{type:"string",required:!1},gender:{type:"enum",values:dc(ss),required:!1},email:{type:"string",required:!1},birth:{type:"string",required:!1},tel:{type:"string",required:!1},ext:{type:"string",required:!1}},Ce),fa(Ce).length===0)return ka.resolve(this.myInfo);var er=ya(Ce,["nick","avatar","signature","email","birth","tel","ext"]);return Ce.gender&&(er.gender=ss[Ce.gender]),this.core.sendCmd("updateMyNameCard",{user:er}).then(function(rr){var fr=rr.content;return fr&&fr.timetag&&Lt.core.eventBus.emit("sync/updateTimetag",{myInfo:+fr.timetag}),Ce.gender&&(er.gender=Ce.gender),Lt.myInfo=Gn({},Lt.myInfo,er),Lt.myInfo})},Ue.checkUserUpdate=function(Ce){var Lt=Ce.from;if(this.logger.log("checkUserUpdate",Lt),Lt!==this.core.account){var er=this.userInfoMap.get(Lt);if(er){var rr=er.updateTime,fr=Ce.userUpdateTime;!isNaN(rr)&&!isNaN(fr)&&typeof rr=="number"&&typeof fr=="number"&&rr<fr&&this.refreshUserInfo(Lt)}else this.refreshUserInfo(Lt)}},Ue.refreshUserInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return this.logger.log("refreshUserInfo",Ce),Rr.next=3,this.getUsersNameCardFromServer({accounts:[Ce]});case 3:for(er=Rr.sent,rr=Nc(er);!(fr=rr()).done;)kr=fr.value,this.userInfoMap.set(kr.account,kr),this.core.emit("updateUserInfo",kr);case 5:case"end":return Rr.stop()}},Lt,this)}))},Ue.onUpdateBlackListHandler=function(Ce){var Lt=Ce.content;Lt.account?this.core.emit("updateBlackList",Lt):this.logger.warn("onUpdateBlackListHandler: no account")},Ue.onUpdateMuteListHandler=function(Ce){var Lt=Ce.content;Lt.account?this.core.emit("updateMuteList",Lt):this.logger.warn("onUpdateBlackListHandler: no account")},Ue.syncRelationsHandler=function(Ce){var Lt=Ce.content,er=Lt.list,rr=Lt.timetag,fr={blackList:[],muteList:[]};return rr&&this.core.eventBus.emit("sync/updateTimetag",{relations:rr}),er&&er.length&&So(er).call(er,function(kr){var Er=function($r){var Hr={account:$r.account,updateTime:+$r.updateTime,createTime:+$r.createTime};return $r.isMuted==="1"&&(Hr.isMuted=!0),$r.isBlack==="1"&&(Hr.isBlack=!0),Hr}(kr);Er.isBlack&&fr.blackList.push(Er),Er.isMuted&&fr.muteList.push(Er)}),this.core.emit("relations",fr),ka.resolve(fr)},Ue.syncMyNameCardHandler=function(Ce){Ce.content.user&&(this.myInfo=xi(Ce.content.user),this.core.emit("syncMyNameCard",this.myInfo),this.core.eventBus.emit("sync/updateTimetag",{myInfo:Ce.content.timetag}))},Ue.onUpdateMyNameCardHandler=function(Ce){var Lt=Ce.content.user;Lt?(Gn(this.myInfo,xi(Lt)),this.core.emit("updateMyNameCard",this.myInfo)):this.logger.warn("onUpdateMyNameCardHandler no user info")},he}(Ls),NC=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length;++$e<Ce;)if(Ue(he[$e],$e,he))return!0;return!1},G0=function(he,Ue,$e,Ce,Lt,er){var rr=1&$e,fr=he.length,kr=Ue.length;if(fr!=kr&&!(rr&&kr>fr))return!1;var Er=er.get(he),Rr=er.get(Ue);if(Er&&Rr)return Er==Ue&&Rr==he;var $r=-1,Hr=!0,Gr=2&$e?new zi:void 0;for(er.set(he,Ue),er.set(Ue,he);++$r<fr;){var vn=he[$r],bn=Ue[$r];if(Ce)var In=rr?Ce(bn,vn,$r,Ue,he,er):Ce(vn,bn,$r,he,Ue,er);if(In!==void 0){if(In)continue;Hr=!1;break}if(Gr){if(!NC(Ue,function(Cn,Kn){if(!hm(Gr,Kn)&&(vn===Cn||Lt(vn,Cn,$e,Ce,er)))return Gr.push(Kn)})){Hr=!1;break}}else if(vn!==bn&&!Lt(vn,bn,$e,Ce,er)){Hr=!1;break}}return er.delete(he),er.delete(Ue),Hr},OC=function(he){var Ue=-1,$e=Array(he.size);return he.forEach(function(Ce,Lt){$e[++Ue]=[Lt,Ce]}),$e},K0=ti?ti.prototype:void 0,Pv=K0?K0.valueOf:void 0,RC=function(he,Ue,$e,Ce,Lt,er,rr){switch($e){case"[object DataView]":if(he.byteLength!=Ue.byteLength||he.byteOffset!=Ue.byteOffset)return!1;he=he.buffer,Ue=Ue.buffer;case"[object ArrayBuffer]":return!(he.byteLength!=Ue.byteLength||!er(new up(he),new up(Ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Xd(+he,+Ue);case"[object Error]":return he.name==Ue.name&&he.message==Ue.message;case"[object RegExp]":case"[object String]":return he==Ue+"";case"[object Map]":var fr=OC;case"[object Set]":var kr=1&Ce;if(fr||(fr=ul),he.size!=Ue.size&&!kr)return!1;var Er=rr.get(he);if(Er)return Er==Ue;Ce|=2,rr.set(he,Ue);var Rr=G0(fr(he),fr(Ue),Ce,Lt,er,rr);return rr.delete(he),Rr;case"[object Symbol]":if(Pv)return Pv.call(he)==Pv.call(Ue)}return!1},Q0=function(he,Ue,$e){var Ce=Ue(he);return ei(he)?Ce:cd(Ce,$e(he))},BC=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length,Lt=0,er=[];++$e<Ce;){var rr=he[$e];Ue(rr,$e,he)&&(er[Lt++]=rr)}return er},Om=function(){return[]},LC=Object.prototype.propertyIsEnumerable,J0=Object.getOwnPropertySymbols,FC=J0?function(_e){return _e==null?[]:(_e=Object(_e),BC(J0(_e),function(he){return LC.call(_e,he)}))}:Om,Np=FC,Av=function(he){return Q0(he,Ku,Np)},$C=Object.prototype.hasOwnProperty,jC=function(he,Ue,$e,Ce,Lt,er){var rr=1&$e,fr=Av(he),kr=fr.length;if(kr!=Av(Ue).length&&!rr)return!1;for(var Er=kr;Er--;){var Rr=fr[Er];if(!(rr?Rr in Ue:$C.call(Ue,Rr)))return!1}var $r=er.get(he),Hr=er.get(Ue);if($r&&Hr)return $r==Ue&&Hr==he;var Gr=!0;er.set(he,Ue),er.set(Ue,he);for(var vn=rr;++Er<kr;){var bn=he[Rr=fr[Er]],In=Ue[Rr];if(Ce)var Cn=rr?Ce(In,bn,Rr,Ue,he,er):Ce(bn,In,Rr,he,Ue,er);if(!(Cn===void 0?bn===In||Lt(bn,In,$e,Ce,er):Cn)){Gr=!1;break}vn||(vn=Rr=="constructor")}if(Gr&&!vn){var Kn=he.constructor,Qn=Ue.constructor;Kn==Qn||!("constructor"in he)||!("constructor"in Ue)||typeof Kn=="function"&&Kn instanceof Kn&&typeof Qn=="function"&&Qn instanceof Qn||(Gr=!1)}return er.delete(he),er.delete(Ue),Gr},Nv=Gl(sc,"DataView"),Ov=Gl(sc,"Promise"),Rv=Gl(sc,"WeakMap"),Oc="[object Map]",uu="[object Promise]",Bv="[object Set]",Y0="[object WeakMap]",X0="[object DataView]",DC=Wl(Nv),Z0=Wl(Ru),UC=Wl(Ov),VC=Wl(ll),Qs=Wl(Rv),ba=ma;(Nv&&ba(new Nv(new ArrayBuffer(1)))!=X0||Ru&&ba(new Ru)!=Oc||Ov&&ba(Ov.resolve())!=uu||ll&&ba(new ll)!=Bv||Rv&&ba(new Rv)!=Y0)&&(ba=function(_e){var he=ma(_e),Ue=he=="[object Object]"?_e.constructor:void 0,$e=Ue?Wl(Ue):"";if($e)switch($e){case DC:return X0;case Z0:return Oc;case UC:return uu;case VC:return Bv;case Qs:return Y0}return he});var Op=ba,e1="[object Arguments]",t1="[object Array]",Rm="[object Object]",r1=Object.prototype.hasOwnProperty,Rc=function(he,Ue,$e,Ce,Lt,er){var rr=ei(he),fr=ei(Ue),kr=rr?t1:Op(he),Er=fr?t1:Op(Ue),Rr=(kr=kr==e1?Rm:kr)==Rm,$r=(Er=Er==e1?Rm:Er)==Rm,Hr=kr==Er;if(Hr&&cp(he)){if(!cp(Ue))return!1;rr=!0,Rr=!1}if(Hr&&!Rr)return er||(er=new Ju),rr||im(he)?G0(he,Ue,$e,Ce,Lt,er):RC(he,Ue,kr,$e,Ce,Lt,er);if(!(1&$e)){var Gr=Rr&&r1.call(he,"__wrapped__"),vn=$r&&r1.call(Ue,"__wrapped__");if(Gr||vn){var bn=Gr?he.value():he,In=vn?Ue.value():Ue;return er||(er=new Ju),Lt(bn,In,$e,Ce,er)}}return!!Hr&&(er||(er=new Ju),jC(he,Ue,$e,Ce,Lt,er))},Js=function _e(he,Ue,$e,Ce,Lt){return he===Ue||(he==null||Ue==null||!Vi(he)&&!Vi(Ue)?he!=he&&Ue!=Ue:Rc(he,Ue,$e,Ce,_e,Lt))},Bm=function(he,Ue,$e,Ce){var Lt=$e.length,er=Lt,rr=!Ce;if(he==null)return!er;for(he=Object(he);Lt--;){var fr=$e[Lt];if(rr&&fr[2]?fr[1]!==he[fr[0]]:!(fr[0]in he))return!1}for(;++Lt<er;){var kr=(fr=$e[Lt])[0],Er=he[kr],Rr=fr[1];if(rr&&fr[2]){if(Er===void 0&&!(kr in he))return!1}else{var $r=new Ju;if(Ce)var Hr=Ce(Er,Rr,kr,he,Ue,$r);if(!(Hr===void 0?Js(Rr,Er,3,Ce,$r):Hr))return!1}}return!0},n1=function(he){return he==he&&!ri(he)},Fs=function(he){for(var Ue=Ku(he),$e=Ue.length;$e--;){var Ce=Ue[$e],Lt=he[Ce];Ue[$e]=[Ce,Lt,n1(Lt)]}return Ue},La=function(he,Ue){return function($e){return $e!=null&&$e[he]===Ue&&(Ue!==void 0||he in Object($e))}},qC=function(he){var Ue=Fs(he);return Ue.length==1&&Ue[0][2]?La(Ue[0][0],Ue[0][1]):function($e){return $e===he||Bm($e,he,Ue)}},o1=function(he,Ue){return Ff(he)&&n1(Ue)?La(ep(he),Ue):function($e){var Ce=Bs($e,he);return Ce===void 0&&Ce===Ue?W0($e,he):Js(Ue,Ce,3)}},Lv=function(he){return function(Ue){return Ue==null?void 0:Ue[he]}},Fv=function(he){return function(Ue){return yh(Ue,he)}},HC=function(he){return Ff(he)?Lv(ep(he)):Fv(he)},$v=function(he){return typeof he=="function"?he:he==null?eu:typeof he=="object"?ei(he)?o1(he[0],he[1]):qC(he):HC(he)},Rp=/\s/,a1=function(he){for(var Ue=he.length;Ue--&&Rp.test(he.charAt(Ue)););return Ue},jv=/^\s+/,s1=function(he){return he&&he.slice(0,a1(he)+1).replace(jv,"")},Ys=/^[-+]0x[0-9a-f]+$/i,zC=/^0b[01]+$/i,i1=/^0o[0-7]+$/i,WC=parseInt,GC=function(he){if(typeof he=="number")return he;if(Bf(he))return NaN;if(ri(he)){var Ue=typeof he.valueOf=="function"?he.valueOf():he;he=ri(Ue)?Ue+"":Ue}if(typeof he!="string")return he===0?he:+he;he=s1(he);var $e=zC.test(he);return $e||i1.test(he)?WC(he.slice(2),$e?2:8):Ys.test(he)?NaN:+he},KC=1/0,QC=function(he){return he?(he=GC(he))===KC||he===-1/0?17976931348623157e292*(he<0?-1:1):he==he?he:0:he===0?he:0},c1=function(he){var Ue=QC(he),$e=Ue%1;return Ue==Ue?$e?Ue-$e:Ue:0},l1=Math.max,ai=function(he,Ue,$e){var Ce=he==null?0:he.length;if(!Ce)return-1;var Lt=$e==null?0:c1($e);return Lt<0&&(Lt=l1(Ce+Lt,0)),g0(he,$v(Ue),Lt)},JC={"4_12":"syncMsgReceipts","4_14":"syncSessionAck","4_20":"syncSuperTeamSessionAck","4_22":"nimSyncSessionsWithMoreRoaming","4_25":"syncSessionReliableInfo","7_12":"multiSyncMsgReceipt","7_16":"markSessionAck","7_25":"markMultSessionsAck","7_116":"syncMarkSessionAck","21_25":"markSuperTeamSessionAck","21_32":"markMultSuperTeamSessionsAck","21_125":"syncMarkSuperTeamSessionAck","4_23":"nimSyncStickTopSessions","23_12":"nimAddStickTopSession","23_13":"nimDeleteStickTopSession","23_14":"nimUpdateStickTopSession","23_112":"nimMultiSyncAddStickTopSession","23_113":"nimMultiSyncDeleteStickTopSession","23_114":"nimMultiSyncUpdateStickTopSession"},ud={msgReceiptTag:{to:1,from:2,time:7,idClient:11},stickTopSessionTag:{id:1,ext:2,createTime:3,updateTime:4},sessionAckTag:{scene:1,to:2,timetag:3},sessionReliableSyncTag:{scene:1,sessionId:2,syncStatus:3,syncEndMsgId:4,syncEndMsgidClient:5,syncEndMsgTime:6,syncStartMsgid:7,syncStartMsgidClient:8,syncStartMsgTime:9,nextMsgid:10,nextMsgidClient:11,nextMsgTime:12,roamMsgSync:13,offlineMsgSync:14,netCallOfflineMsgSync:15}},mc=zs(ud),YC={syncMsgReceipts:{sid:4,cid:12,service:"session",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:mc.msgReceiptTag},{type:"Number",name:"timetag"}]},syncSessionAck:{sid:4,cid:14,service:"session",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},syncSuperTeamSessionAck:{sid:4,cid:20,service:"session",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},multiSyncMsgReceipt:{sid:7,cid:12,service:"session",response:[{type:"Property",name:"msgReceiptTag",reflectMapper:mc.msgReceiptTag}]},markSessionAck:{sid:7,cid:16,service:"session",params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSessionAck:{sid:7,cid:116,service:"session",response:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSuperTeamSessionAck:{sid:21,cid:125,service:"session",response:[{type:"String",name:"to"},{type:"long",name:"timetag"}]},markMultSessionsAck:{sid:7,cid:25,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:ud.sessionAckTag}]},markSuperTeamSessionAck:{sid:21,cid:25,service:"session",params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},nimAddStickTopSession:{sid:23,cid:12,service:"session",params:[{type:"Property",name:"tag",reflectMapper:ud.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:mc.stickTopSessionTag}]},nimDeleteStickTopSession:{sid:23,cid:13,service:"session",params:[{type:"Property",name:"tag",reflectMapper:ud.stickTopSessionTag}],response:[{type:"Number",name:"timetag"}]},nimUpdateStickTopSession:{sid:23,cid:14,service:"session",params:[{type:"Property",name:"tag",reflectMapper:ud.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:mc.stickTopSessionTag}]},nimMultiSyncAddStickTopSession:{sid:23,cid:112,service:"session",response:[{type:"Property",name:"data",reflectMapper:mc.stickTopSessionTag}]},nimMultiSyncDeleteStickTopSession:{sid:23,cid:113,service:"session",response:[{type:"Number",name:"timetag"},{type:"Property",name:"data",reflectMapper:mc.stickTopSessionTag}]},nimMultiSyncUpdateStickTopSession:{sid:23,cid:114,service:"session",response:[{type:"Property",name:"data",reflectMapper:mc.stickTopSessionTag}]},nimSyncStickTopSessions:{sid:4,cid:23,service:"session",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"isThereAnyChange"},{type:"PropertyArray",name:"datas",reflectMapper:mc.stickTopSessionTag}]},markMultSuperTeamSessionsAck:{sid:21,cid:32,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:ud.sessionAckTag}]},nimSyncSessionsWithMoreRoaming:{sid:21,cid:22,service:"session",response:[{type:"PropertyArray",name:"datas",reflectMapper:{0:"scene",1:"to",2:"from",7:"time",12:"idServer"}}]},syncSessionReliableInfo:{sid:4,cid:25,service:"session",response:[{type:"Property",name:"context",reflectMapper:{1:"timetag",2:"type"}},{type:"PropertyArray",name:"datas",reflectMapper:mc.sessionReliableSyncTag}]}},XC={id:{type:"string"},ext:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Lm(_e,he,Ue){Ue===void 0&&(Ue=!0);var $e=oi(XC,_e);$e.isStickOnTop=Ue,$e.id=he.id;var Ce=Gn(Gn({},he),{stickTopInfo:he.stickTopInfo?Gn({},he.stickTopInfo,$e):$e});return Ce.lastMsg===void 0&&(Ce.lastMsg=null),Ce}var ZC={scene:{type:"enum",values:es},time:{type:"number"}},eM=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.getSession=function($e){return this.core.session.getSessionWithUncomplete({id:$e})||this.core.session.createSession($e)},he.addStickTopSession=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},$e),Lt=wi($e.id),er=Lt.scene,rr=Lt.accid,$r.next=4,this.core.sendCmd("nimAddStickTopSession",{tag:{id:(er==="superTeam"?"super_team":er)+"|"+rr,ext:$e.ext}});case 4:return fr=$r.sent,kr=this.getSession($e.id),Er=Lm(fr.content.data,kr),$r.abrupt("return",Er);case 8:case"end":return $r.stop()}},Ce,this)}))},he.deleteStickTopSession=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({id:{type:"string",allowEmpty:!1}},$e),Lt=wi($e.id),er=Lt.scene,rr=Lt.accid,$r.next=4,this.core.sendCmd("nimDeleteStickTopSession",{tag:{id:(er==="superTeam"?"super_team":er)+"|"+rr}});case 4:return fr=$r.sent,kr=this.getSession($e.id),Er=Lm({updateTime:fr.content.timetag},kr,!1),$r.abrupt("return",Er);case 8:case"end":return $r.stop()}},Ce,this)}))},he.updateStickTopSession=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},$e),Lt=wi($e.id),er=Lt.scene,rr=Lt.accid,$r.next=4,this.core.sendCmd("nimUpdateStickTopSession",{tag:{id:(er==="superTeam"?"super_team":er)+"|"+rr,ext:$e.ext}});case 4:return fr=$r.sent,kr=this.getSession($e.id),Er=Lm(fr.content.data,kr),$r.abrupt("return",Er);case 8:case"end":return $r.stop()}},Ce,this)}))},he.stickTopSessionHandler=function($e,Ce){Ce===void 0&&(Ce=!0);var Lt=wi($e.id,"|"),er=Lt.scene+"-"+Lt.accid;return Lm($e,this.getSession(er),Ce)},_e}(),tM=function(){function _e(Ue){this.core=Ue,this.logger=Ue.logger}var he=_e.prototype;return he.canSessionResetUnreadCount=function($e){var Ce=$e.id;if($e.lastMsg===void 0)throw new Error("Session::canSessionResetUnreadCount: session "+Ce+" is not completly, lastMsg undefined");return $e.lastMsg!==null||$e.unread>0?!($e.ack&&$e.lastMsg&&$e.ack>=$e.lastMsg.time)||(this.logger.log("Session::canSessionResetUnreadCount: session "+Ce+" reset failed, ack time is greater than last message time"),!1):(this.logger.log("Session::canSessionResetUnreadCount: session "+Ce+" doesn't need to be updated, lastMsg null and unread 0"),!1)},he.filterSessionForResetUnreadCount=function($e){var Ce=this,Lt={cmd:"markMultSuperTeamSessionsAck",params:[]},er={cmd:"markMultSessionsAck",params:[]};return So($e).call($e,function(rr){var fr;try{if(!Ce.canSessionResetUnreadCount(rr))return;var kr=wi(rr.id),Er=kr.accid,Rr=kr.scene,$r={to:Er,sessionId:rr.id,timetag:((fr=rr==null?void 0:rr.lastMsg)===null||fr===void 0?void 0:fr.time)||rr.updateTime||0},Hr=function(vn){return am({scene:{type:"enum",values:es}},vn)}({scene:Rr});Rr==="superTeam"?Lt.params.push($r):er.params.push(Gn(Gn({},$r),Hr))}catch(Gr){Ce.logger.warn(Gr)}}),{superTeam:Lt,p2pOrTeam:er}},_e}(),rM=function(he,Ue,$e){var Ce=-1,Lt=he.length;Ue<0&&(Ue=-Ue>Lt?0:Lt+Ue),($e=$e>Lt?Lt:$e)<0&&($e+=Lt),Lt=Ue>$e?0:$e-Ue>>>0,Ue>>>=0;for(var er=Array(Lt);++Ce<Lt;)er[Ce]=he[Ce+Ue];return er},nM=Math.ceil,Bp=Math.max,Fm=function(he,Ue,$e){Ue=($e?c0(he,Ue,$e):Ue===void 0)?1:Bp(c1(Ue),0);var Ce=he==null?0:he.length;if(!Ce||Ue<1)return[];for(var Lt=0,er=0,rr=Array(nM(Ce/Ue));Lt<Ce;)rr[er++]=rM(he,Lt,Lt+=Ue);return rr};function Lp(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(lc(_e)||($e=function(er,rr){var fr;if(er){if(typeof er=="string")return u1(er,rr);var kr=Pa(fr=Object.prototype.toString.call(er)).call(fr,8,-1);if(kr==="Object"&&er.constructor&&(kr=er.constructor.name),kr==="Map"||kr==="Set")return Wi(er);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return u1(er,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u1(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var oM=function(_e){function he($e,Ce){var Lt;return(Lt=_e.call(this,"session",$e)||this).list=new xc,Lt.unreadCountFilterFn=function(er){return!0},Lt.lastMessageFilterFn=function(er){return!0},Lt.initEventListeners(),Ts({cmdMap:JC,cmdConfig:YC}),Lt.stickTopService=new eM($e),Lt.unreadModule=new tM($e),Ce&&Lt.setOptions(Ce),Lt}ra(he,_e);var Ue=he.prototype;return Ue.setOptions=function(Ce){typeof(Ce==null?void 0:Ce.unreadCountFilterFn)=="function"&&(this.unreadCountFilterFn=Ce.unreadCountFilterFn),typeof(Ce==null?void 0:Ce.lastMessageFilterFn)=="function"&&(this.lastMessageFilterFn=Ce.lastMessageFilterFn)},Ue.destroy=function(){var Ce;So(Ce=this.list).call(Ce,function(Lt){Lt.unreadMsgs=[]}),this.list.clear()},Ue.initEventListeners=function(){var Ce,Lt,er,rr=this;this.core.eventBus.on("session/syncMsgs",oa(Ce=this.onSyncMsgs).call(Ce,this)),this.core.eventBus.on("session/updateForNewMsg",oa(Lt=this.updateSessionWithMsg).call(Lt,this)),this.core.eventBus.on("session/updateForClearMsg",function(fr,kr){kr===void 0&&(kr=!0),fr&&fr.length>0&&So(fr).call(fr,function(Er){rr.updateSession({id:Er.sessionId,lastMsg:null,unread:0,unreadMsgs:[]},kr)})}),this.core.eventBus.on("session/updateForDeletedMsg",oa(er=this.updateSessionForDeletedMsg).call(er,this))},Ue.createSession=function(Ce,Lt){try{var er=wi(Ce);return{id:Ce,scene:er.scene,to:er.accid,lastMsg:Lt,updateTime:Lt?Lt.time:0,unread:0,unreadMsgs:[],ack:0}}catch(rr){throw this.logger.error("Failed to create session with "+Ce,rr),new Error("Failed to create session with "+Ce)}},Ue.getSession=function(Ce){Xn({id:{type:"string",allowEmpty:!1}},Ce);var Lt=this.list.get(Ce.id);if(this.isSessionComplete(Lt))return Lt},Ue.getSessionWithUncomplete=function(Ce){return this.list.get(Ce.id)},Ue.getAllSessions=function(){for(var Ce,Lt=[],er=Lp(this.list);!(Ce=er()).done;){var rr=Ce.value;rr[0];var fr=rr[1];this.isSessionComplete(fr)&&Lt.push(fr)}return Lt},Ue.getSessions=function(Ce){Xn({limit:{type:"number",required:!1},lastSessionId:{type:"string",allowEmpty:!1,required:!1},desc:{type:"boolean",required:!1}},Ce);var Lt=[],er=Ce.limit,rr=er===void 0?100:er,fr=Ce.desc,kr=fr===void 0||fr,Er=Ce.lastSessionId,Rr=0;if(kr){for(var $r,Hr,Gr=Lp(this.list);!(Hr=Gr()).done;){var vn=Hr.value,bn=vn[0],In=vn[1];if(Er===bn)break;this.isSessionComplete(In)&&Lt.push(In)}return Of($r=Pa(Lt).call(Lt,-rr)).call($r)}for(var Cn,Kn=Lp(this.list);!(Cn=Kn()).done;){var Qn=Cn.value,Mo=Qn[0],No=Qn[1];if(Er)Mo===Er&&(Er=void 0);else if(this.isSessionComplete(No)){if(++Rr>rr)break;Lt.push(No)}}return Lt},Ue.resetSessionUnreadCount=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er,Rr,$r,Hr,Gr,vn=this;return Kr.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(Xn({id:{type:"string",allowEmpty:!1}},Ce),Xn({id:{type:"string",allowEmpty:!1}},Ce),rr=Ce.id,fr=this.list.get(rr)){In.next=7;break}throw this.logger.warn("resetSessionUnreadCount: can not find session "+rr),new Error("Session::canSessionResetUnreadCount: can not find session "+rr);case 7:kr=!1;try{kr=this.unreadModule.canSessionResetUnreadCount(fr)}catch(Cn){this.logger.warn(Cn)}if(kr!==!1){In.next=11;break}return In.abrupt("return");case 11:return Er=wi(rr),Rr=Er.accid,$r=Er.scene,Hr={to:Rr,timetag:((Lt=fr==null?void 0:fr.lastMsg)===null||Lt===void 0?void 0:Lt.time)||fr.updateTime||0},Gr="markSuperTeamSessionAck",$r!=="superTeam"&&(Hr.scene=$r==="p2p"?0:1,Gr="markSessionAck"),In.abrupt("return",this.core.sendCmd(Gr,Hr).then(function(){var Cn=vn.storeUnreadByAck(rr,Hr.timetag);Cn&&vn.core.emit("updateSession",Cn)}));case 16:case"end":return In.stop()}},er,this)}))},Ue.resetMultiSessionUnreadCount=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er,Rr,$r,Hr,Gr,vn,bn,In,Cn,Kn,Qn=this;return Kr.wrap(function(No){for(;;)switch(No.prev=No.next){case 0:Xn({ids:{type:"array",itemType:"string",min:1}},Ce),fr=Ss(er=Lo(rr=Ce.ids).call(rr,function(Ko){return Qn.list.get(Ko)})).call(er,function(Ko,Ln){return!!Ko||(Qn.logger.warn("Session::canSessionResetUnreadCount: can not find session "+Ce.ids[Ln]),!1)}),kr=this.unreadModule.filterSessionForResetUnreadCount(fr),Er=kr.superTeam,Rr=kr.p2pOrTeam,$r=Fm(Er.params,50),Hr=Fm(Rr.params,50),Gr=Lp($r);case 6:if((vn=Gr()).done){No.next=13;break}return bn=vn.value,No.next=10,this.core.sendCmd(Er.cmd,{datas:bn});case 10:So(bn).call(bn,function(Ko){var Ln=Qn.storeUnreadByAck(Ko.sessionId,Ko.timetag);Ln&&Qn.core.emit("updateSession",Ln)});case 11:No.next=6;break;case 13:In=Lp(Hr);case 14:if((Cn=In()).done){No.next=21;break}return Kn=Cn.value,No.next=18,this.core.sendCmd(Rr.cmd,{datas:Kn});case 18:So(Kn).call(Kn,function(Ko){var Ln=Qn.storeUnreadByAck(Ko.sessionId,Ko.timetag);Ln&&Qn.core.emit("updateSession",Ln)});case 19:No.next=14;break;case 21:case"end":return No.stop()}},Lt,this)}))},Ue.resetAllSessionsUnreadCount=function(){var Ce,Lt=[];return So(Ce=this.list).call(Ce,function(er){Lt.push(er.id)}),this.resetMultiSessionUnreadCount({ids:Lt})},Ue.deleteSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(Xn({id:{type:"string",allowEmpty:!1},isSyncToServer:{type:"boolean",required:!1}},Ce),this.list.delete(Ce.id),!this.core.msgLog||!Ce.isSyncToServer){rr.next=5;break}return rr.next=5,this.core.msgLog.deleteRoamingMsgs({ids:[Ce.id]});case 5:case"end":return rr.stop()}},Lt,this)}))},Ue.deleteAllSessionsFromLocal=function(){this.list.clear()},Ue.addStickTopSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.stickTopService.addStickTopSession(Ce);case 2:return er=fr.sent,this.list.set(er.id,er),fr.abrupt("return",er);case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.deleteStickTopSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.stickTopService.deleteStickTopSession(Ce);case 2:return er=fr.sent,this.list.set(er.id,er),fr.abrupt("return",er);case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.updateStickTopSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.stickTopService.updateStickTopSession(Ce);case 2:return er=fr.sent,this.list.set(er.id,er),fr.abrupt("return",er);case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.nimMultiSyncAddStickTopSessionHandler=function(Ce){var Lt=this.stickTopService.stickTopSessionHandler(Ce.content.data);this.list.set(Lt.id,Lt),this.core.emit("updateSession",Lt)},Ue.nimMultiSyncDeleteStickTopSessionHandler=function(Ce){var Lt=this.stickTopService.stickTopSessionHandler({id:Ce.content.data.id,updateTime:Ce.content.timetag},!1);this.list.set(Lt.id,Lt),this.core.emit("updateSession",Lt)},Ue.nimMultiSyncUpdateStickTopSessionHandler=function(Ce){var Lt=this.stickTopService.stickTopSessionHandler(Ce.content.data);this.list.set(Lt.id,Lt),this.core.emit("updateSession",Lt)},Ue.nimSyncStickTopSessionsHandler=function(Ce){var Lt=this,er=Ce.content.datas;So(er).call(er,function(rr){var fr=Lt.stickTopService.stickTopSessionHandler(rr);Lt.list.set(fr.id,fr)})},Ue.updateSessionWithMsg=function(Ce){var Lt,er,rr=!0,fr=!0,kr=typeof((Lt=Ce.pushInfo)===null||Lt===void 0?void 0:Lt.needPushBadge)!="boolean"||((er=Ce.pushInfo)===null||er===void 0?void 0:er.needPushBadge);try{rr=!!this.unreadCountFilterFn(Ce)}catch(Hr){this.logger.error("session:updateSessionWithMsg, unreadCountFilterFn error",Hr)}try{fr=!!this.lastMessageFilterFn(Ce)}catch(Hr){this.logger.error("session:updateSessionWithMsg, lastMessageFilterFn error",Hr)}var Er=this.list.get(Ce.sessionId)||this.createSession(Ce.sessionId),Rr=!1;if(this.logger.log("session:updateSessionWithMsg, pending ",Ce.sessionId,Ce.idClient,Ce.idServer,fr,rr),fr&&(!Er.lastMsg||Er.lastMsg.time<Ce.time||Ce.status===za[za.sending]||Er.lastMsg.status===za[za.sending])&&(Er.lastMsg=Ce,Er.updateTime=Ce.time,Rr=!0),rr&&kr&&Ce.status===za[za.unread]&&Ce.time>(Er.ack||0)){Er.unread++;var $r=Er.unreadMsgs||[];$r.unshift(Ce),iu($r).call($r,function(Hr,Gr){return Gr.time-Hr.time}),Rr=!0}Rr&&(this.logger.log("session:updateSessionWithMsg updating ",Er.id,Er.unread,Er.lastMsg&&Er.lastMsg.idClient),this.list.set(Er.id,Er),this.core.emit("updateSession",Er))},Ue.storeUnreadByAck=function(Ce,Lt){var er=this.list.get(Ce)||this.createSession(Ce);if(!(er.ack&&Lt<er.ack)){var rr=er.unreadMsgs||[],fr=[],kr=[],Er=0;return er.unreadMsgs=[],rr.length>0&&(So(rr).call(rr,function(Rr){mi(kr).call(kr,Rr.idClient)||Rr.time>Lt&&(Er++,kr.push(Rr.idClient),fr.push(Rr))}),er.unreadMsgs=iu(fr).call(fr,function(Rr,$r){return $r.time-Rr.time})),er.ack=Lt,er.unread=Er,er.lastMsg&&er.lastMsg.status==="unread"&&Lt>=er.lastMsg.time&&(er.lastMsg.status="read"),this.list.set(Ce,er),er}this.logger.warn("storeUnreadByAck: not need update ack",Ce,Lt,er.ack)},Ue.updateSession=function(Ce,Lt){Lt===void 0&&(Lt=!0);var er=Ce.id,rr=this.list.get(er)||this.createSession(Ce.id),fr=Gn(rr,Ce);return this.list.set(er,fr),this.logger.log("updateSession: update",Lt,ya(Ce,["id","ack","unread"]),fr.lastMsg&&fr.lastMsg.idClient),Lt&&this.core.emit("updateSession",fr),fr},Ue.isSessionComplete=function(Ce){return!!Ce&&!!(Ce.id&&Ce.scene&&Ce.to)&&Ce.lastMsg!==void 0},Ue.syncSessionAckHandler=function(Ce){var Lt,er,rr=this,fr=Ce.content.p2p||{},kr=Ce.content.team.m_map||{};this.logger.log("syncSessionAck::",fr,kr),So(Lt=fa(fr)).call(Lt,function(Er){rr.updateSession({id:"p2p-"+Er,ack:fr[Er]},!1)}),So(er=fa(kr)).call(er,function(Er){rr.updateSession({id:"team-"+Er,ack:kr[Er]},!1)})},Ue.syncSuperTeamSessionAckHandler=function(Ce){var Lt,er=this,rr=Ce.content.superTeam.m_map;this.logger.log("syncSuperTeamSessionAck::",rr),So(Lt=fa(rr)).call(Lt,function(fr){er.updateSession({id:"superTeam-"+fr,ack:rr[fr]},!1)})},Ue.syncMarkSessionAckHandler=function(Ce){var Lt=Ce.content,er=(Lt.scene===0?"p2p":Lt.scene===1?"team":"superTeam")+"-"+Lt.to,rr=this.list.get(er);if(rr&&rr.ack&&Lt.timetag<rr.ack)this.logger.warn("syncMarkSessionAckHandler: "+er+" do not need update ack",rr.ack,Lt.timetag);else{var fr=this.storeUnreadByAck(er,Lt.timetag);fr&&this.core.emit("updateSession",fr)}},Ue.syncMarkSuperTeamSessionAckHandler=function(Ce){Ce.content.scene=5,this.syncMarkSessionAckHandler(Ce)},Ue.onSyncDone=function(){var Ce,Lt,er,rr=this,fr=[];So(Ce=this.list).call(Ce,function(kr,Er){fr.push(rr.storeUnreadByAck(Er,kr.ack||0))}),this.list.clear(),So(Lt=iu(fr).call(fr,function(kr,Er){return kr.updateTime-Er.updateTime})).call(Lt,function(kr){rr.list.set(kr.id,kr)}),(fr=iu(er=Ss(fr).call(fr,function(kr){return rr.isSessionComplete(kr)})).call(er,function(kr,Er){return Er.updateTime-kr.updateTime})).length>0&&this.core.emit("sessions",fr)},Ue.onSyncMsgs=function(Ce){var Lt,er=this,rr=this.list.get(Ce.sessionId),fr=[];try{var kr;fr=Ss(kr=Ce.msgs).call(kr,function(Gr){var vn,bn,In=typeof((vn=Gr.pushInfo)===null||vn===void 0?void 0:vn.needPushBadge)!="boolean"||((bn=Gr.pushInfo)===null||bn===void 0?void 0:bn.needPushBadge);return er.unreadCountFilterFn(JSON.parse(va(Gr)))&&In})}catch(Gr){this.logger.error("session:onSyncMsgs, unreadCountFilterFn error ",Gr)}var Er,Rr=[];try{var $r;Rr=Ss($r=Ce.msgs).call($r,function(Gr){return er.lastMessageFilterFn(JSON.parse(va(Gr)))})}catch(Gr){this.logger.error("session:onSyncMsgs, lastMessageFilterFn error ",Gr)}Rr&&Rr.length>0&&(Er=Rr[Rr.length-1],Er=Rr[0].time>Er.time?Rr[0]:Er);var Hr=Er?Er.time:0;rr||(rr=Er?this.createSession(Ce.sessionId,Er):this.createSession(Ce.sessionId)),rr.unreadMsgs=rr.unreadMsgs?Ss(Lt=Os(fr).call(fr,rr.unreadMsgs)).call(Lt,function(Gr){return Gr.status===za[za.unread]}):Ss(fr).call(fr,function(Gr){return Gr.status===za[za.unread]}),rr.updateTime&&rr.updateTime>=Hr||(rr.updateTime=Hr),rr.lastMsg&&rr.lastMsg.time>=Hr||(rr.lastMsg=Er),this.list.set(rr.id,rr)},Ue.updateSessionForDeletedMsg=function(Ce){var Lt,er=this,rr={};So(Ce).call(Ce,function(fr){var kr,Er=fr.to===er.core.account?fr.from:fr.to,Rr=fr.scene+"-"+Er,$r=er.list.get(Rr);if($r){var Hr=gm(kr=$r.unreadMsgs).call(kr,function(Cn){return Cn.idClient===fr.idClient}),Gr=!0;try{Gr=!!er.unreadCountFilterFn(fr)}catch(Cn){er.logger.error("session:updateSessionForDeletedMsg, unreadCountFilterFn error",Cn)}var vn=$r.ack||0;if(Gr&&Hr&&vn<fr.time&&fr.from!==er.core.account&&$r.unread>0&&($r.unread=$r.unread-1,$r.unreadMsgs&&$r.unreadMsgs.length>0)){var bn,In=ai($r.unreadMsgs,{idClient:fr.idClient});In>=0&&fv(bn=$r.unreadMsgs).call(bn,In,1)}$r.lastMsg&&$r.lastMsg.idClient===fr.idClient&&($r.lastMsg=null),rr[$r.id]=!0}}),So(Lt=fa(rr)).call(Lt,function(fr){var kr=er.list.get(fr);kr&&er.core.emit("updateSession",kr)})},Ue.multiSyncMsgReceiptHandler=function(Ce){var Lt,er=(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.msgReceiptTag;if(er){this.updateSessionMsgReceiptTime([er],!0),er.msgReceiptTime=er.time,er.sessionId="p2p-"+er.from,er.time,er.from;var rr=ea(er,["time","from"]);this.core.emit("msgReceipts",[rr])}},Ue.syncMsgReceiptsHandler=function(Ce){var Lt,er=(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.msgReceipts;er&&this.updateSessionMsgReceiptTime(er,!1)},Ue.updateSessionMsgReceiptTime=function(Ce,Lt){var er=this;Lt===void 0&&(Lt=!0),Ce&&Ce.length>0&&So(Ce).call(Ce,function(rr){var fr=er.list.get("p2p-"+rr.from);fr||(fr=er.createSession("p2p-"+rr.from));var kr=jo(rr.time);fr.msgReceiptTime&&fr.msgReceiptTime>=kr||(fr.msgReceiptTime=kr,fr.lastMsg&&fr.lastMsg.status==="sent"&&kr>=fr.lastMsg.time&&(fr.lastMsg.status="receipt"),er.logger.log("session: update session "+fr.id+" msgReceiptTime: "+fr.msgReceiptTime),er.list.set(fr.id,fr),Lt&&er.core.emit("updateSession",fr))})},Ue.nimSyncSessionsWithMoreRoamingHandler=function(Ce){var Lt=function(rr,fr){return Lo(rr).call(rr,function(kr){var Er=oi(ZC,kr);return Er.sessionId=Ac(kr,fr),Er})}(Ce.content.datas,this.core.account);this.logger.log("session:syncSessionsWithMoreRoaming",Lt)},he}(Ls),aM=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.notifyAddTeamMembers=function($e,Ce){this.core.emit("addTeamMembers",{team:$e,accounts:Ce,members:_i($e,Ce)})},he.notifyUpdateTeamManagers=function($e,Ce,Lt,er){this.core.emit("updateTeamManagers",{team:{teamId:$e,memberUpdateTime:er},accounts:Ce,isManager:Lt,members:Lo(Ce).call(Ce,function(rr){return{id:$e+"-"+rr,account:rr,type:Lt?"manager":"normal",updateTime:er}})})},he.notifyRemoveTeamMembers=function($e,Ce){this.core.emit("removeTeamMembers",{team:$e,accounts:Ce})},he.notifyTransferTeam=function($e,Ce,Lt){this.core.emit("transferTeam",{team:$e,from:{id:$e.teamId+"-"+Ce,type:"normal",account:Ce,updateTime:$e.memberUpdateTime},to:{id:$e.teamId+"-"+Lt,type:"owner",account:Lt,updateTime:$e.memberUpdateTime}})},he.notifyUpdateTeamMembersMute=function($e,Ce,Lt){this.core.emit("updateTeamMembersMute",{team:$e,accounts:Ce,members:Lo(Ce).call(Ce,function(er){return{id:$e.teamId+"-"+er,account:er,teamId:$e.teamId,mute:Lt,updateTime:$e.memberUpdateTime}}),mute:Lt})},_e}(),d1=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length;++$e<Ce&&Ue(he[$e],$e,he)!==!1;);return he},sM=function(he,Ue){return he&&tu(Ue,Ku(Ue),he)},Dv=function(he,Ue){return he&&tu(Ue,Xu(Ue),he)},iM=function(he,Ue){return tu(he,Np(he),Ue)},Fp=Object.getOwnPropertySymbols?function(_e){for(var he=[];_e;)cd(he,Np(_e)),_e=jh(_e);return he}:Om,Cl=function(he,Ue){return tu(he,Fp(he),Ue)},$p=function(he){return Q0(he,Xu,Fp)},p1=Object.prototype.hasOwnProperty,cM=function(he){var Ue=he.length,$e=new he.constructor(Ue);return Ue&&typeof he[0]=="string"&&p1.call(he,"index")&&($e.index=he.index,$e.input=he.input),$e},lM=function(he,Ue){var $e=Ue?dm(he.buffer):he.buffer;return new he.constructor($e,he.byteOffset,he.byteLength)},uM=/\w*$/,dM=function(he){var Ue=new he.constructor(he.source,uM.exec(he));return Ue.lastIndex=he.lastIndex,Ue},f1=ti?ti.prototype:void 0,m1=f1?f1.valueOf:void 0,pM=function(he){return m1?Object(m1.call(he)):{}},Uv=function(he,Ue,$e){var Ce=he.constructor;switch(Ue){case"[object ArrayBuffer]":return dm(he);case"[object Boolean]":case"[object Date]":return new Ce(+he);case"[object DataView]":return lM(he,$e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n0(he,$e);case"[object Map]":case"[object Set]":return new Ce;case"[object Number]":case"[object String]":return new Ce(he);case"[object RegExp]":return dM(he);case"[object Symbol]":return pM(he)}},g1=function(he){return Vi(he)&&Op(he)=="[object Map]"},Vv=cc&&cc.isMap,h1=Vv?cl(Vv):g1,fM=function(he){return Vi(he)&&Op(he)=="[object Set]"},v1=cc&&cc.isSet,y1=v1?cl(v1):fM,b1="[object Arguments]",S1="[object Function]",du="[object Object]",Ga={};Ga[b1]=Ga["[object Array]"]=Ga["[object ArrayBuffer]"]=Ga["[object DataView]"]=Ga["[object Boolean]"]=Ga["[object Date]"]=Ga["[object Float32Array]"]=Ga["[object Float64Array]"]=Ga["[object Int8Array]"]=Ga["[object Int16Array]"]=Ga["[object Int32Array]"]=Ga["[object Map]"]=Ga["[object Number]"]=Ga[du]=Ga["[object RegExp]"]=Ga["[object Set]"]=Ga["[object String]"]=Ga["[object Symbol]"]=Ga["[object Uint8Array]"]=Ga["[object Uint8ClampedArray]"]=Ga["[object Uint16Array]"]=Ga["[object Uint32Array]"]=!0,Ga["[object Error]"]=Ga[S1]=Ga["[object WeakMap]"]=!1;var mM=function _e(he,Ue,$e,Ce,Lt,er){var rr,fr=1&Ue,kr=2&Ue,Er=4&Ue;if($e&&(rr=Lt?$e(he,Ce,Lt,er):$e(he)),rr!==void 0)return rr;if(!ri(he))return he;var Rr=ei(he);if(Rr){if(rr=cM(he),!fr)return o0(he,rr)}else{var $r=Op(he),Hr=$r==S1||$r=="[object GeneratorFunction]";if(cp(he))return r0(he,fr);if($r==du||$r==b1||Hr&&!Lt){if(rr=kr||Hr?{}:Jh(he),!fr)return kr?Cl(he,Dv(rr,he)):iM(he,sM(rr,he))}else{if(!Ga[$r])return Lt?he:{};rr=Uv(he,$r,fr)}}er||(er=new Ju);var Gr=er.get(he);if(Gr)return Gr;er.set(he,rr),y1(he)?he.forEach(function(bn){rr.add(_e(bn,Ue,$e,bn,he,er))}):h1(he)&&he.forEach(function(bn,In){rr.set(In,_e(bn,Ue,$e,In,he,er))});var vn=Rr?void 0:(Er?kr?$p:Av:kr?Xu:Ku)(he);return d1(vn||he,function(bn,In){vn&&(bn=he[In=bn]),Yh(rr,In,_e(bn,Ue,$e,In,he,er))}),rr},Ml,Bc,ts,Lc=function(he){return mM(he,5)},qv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"team",$e)||this).myTeamMembersMap=new xc,Ce.service=new aM($e),Ce.core.eventBus.on("team/onNotification",function(Lt){return Ce.notificationHandler(Lt)}),Ts({cmdMap:CC,cmdConfig:MC}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.destroy=function(){this.myTeamMembersMap.clear()},Ue.mergeMyTeamMembers=function(Ce){var Lt=this;So(Ce).call(Ce,function(er){var rr=er.teamId,fr=Lt.myTeamMembersMap.get(rr),kr=Gn({},fr,er);Lt.myTeamMembersMap.set(rr,kr)})},Ue.getTeamInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),kr.next=3,this.core.sendCmd("getTeamInfo",{teamId:Ce.teamId});case 3:return er=kr.sent,rr=er.content.team,kr.abrupt("return",vl(rr));case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.getTeams=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("getTeams",{timetag:0});case 2:return Lt=fr.sent,er=Lt.content.teams,fr.abrupt("return",fc(er));case 5:case"end":return fr.stop()}},Ce,this)}))},Ue.getTeamsById=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamIds:{type:"array",itemType:"string"}},Ce),kr.next=3,this.core.sendCmd("getTeamsById",{teamIds:Ce.teamIds});case 3:return er=kr.sent,rr=fc(er.content.teams),kr.abrupt("return",{teams:rr,tids:er.content.tids});case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.createTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({type:{type:"enum",values:["advanced","normal"]},name:{type:"string",allowEmpty:!1},level:{type:"number",required:!1},accounts:{type:"array",itemType:"string",required:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!0,required:!1},announcement:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",allowEmpty:!0,required:!1},ext:{type:"string",allowEmpty:!0,required:!1}},Ce),er=D0(Ce),Er.next=4,this.core.sendCmd("createTeam",{team:er,accounts:Ce.accounts||[],ps:Ce.ps||""});case 4:return rr=Er.sent,fr=vl(rr.content.team),Er.abrupt("return",fr);case 7:case"end":return Er.stop()}},Lt,this)}))},Ue.dismissTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("dismissTeam",{teamId:Ce.teamId});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.leaveTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("leaveTeam",{teamId:Ce.teamId});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.transferTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("transferTeam",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.updateTeamInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!0,required:!1},announcement:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",allowEmpty:!0,required:!1},ext:{type:"string",allowEmpty:!0,required:!1}},Ce),er=D0(Ce),fr.next=4,this.core.sendCmd("updateTeamInfo",{team:er});case 4:return fr.abrupt("return",vl(er));case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.getTeamMembers=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",required:!1}},Ce),Er.next=3,this.core.sendCmd("getTeamMembers",{teamId:Ce.teamId,timetag:0});case 3:if(rr=Er.sent,fr=wp((Lt=rr.content)===null||Lt===void 0?void 0:Lt.teamMembers),Ce.accounts&&Ce.accounts.length>0){Er.next=7;break}return Er.abrupt("return",fr);case 7:return Er.abrupt("return",Ss(fr).call(fr,function(Rr){var $r;return($r=Ce.accounts)===null||$r===void 0?void 0:mi($r).call($r,Rr.account)}));case 8:case"end":return Er.stop()}},er,this)}))},Ue.getMutedTeamMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),kr.next=3,this.core.sendCmd("getMutedTeamMembers",{teamId:Ce.teamId});case 3:return er=kr.sent,rr=er.content,kr.abrupt("return",wp(rr.teamMembers));case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.addTeamMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("addTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,ps:Ce.ps||"",attach:Ce.ext||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.removeTeamMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},Ce),rr.next=3,this.core.sendCmd("removeTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.applyTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),fr.next=3,this.core.sendCmd("applyTeam",{teamId:Ce.teamId,ps:Ce.ps||""});case 3:return er=fr.sent,fr.abrupt("return",vl(er.content.team));case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.addTeamManagers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("addTeamManagers",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.removeTeamManagers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("removeTeamManagers",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.updateMyMemberInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},Ce),er=Im({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,bitConfigMask:Ce.bitConfigMask,ext:Ce.ext}),Er.next=4,this.core.sendCmd("updateMyMemberInfo",{teamMember:er});case 4:return rr=nd(Gn({updateTime:new Date().getTime(),account:this.core.account},er)),this.mergeMyTeamMembers([rr]),this.core.emit("updateTeamMember",rr),fr=Lc(this.myTeamMembersMap.get(rr.teamId)),this.core.emit("myTeamMembers",[fr]),Er.abrupt("return",rr);case 10:case"end":return Er.stop()}},Lt,this)}))},Ue.updateMemberNick=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0}},Ce),er=Im({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,account:Ce.account}),kr.next=4,this.core.sendCmd("updateNickInTeam",{teamMember:er});case 4:return rr=nd(Gn({updateTime:new Date().getTime()},er)),kr.abrupt("return",rr);case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.muteTeamMember=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteTeamMember",{teamId:Ce.teamId,account:Ce.account,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.getTeamMemberInvitorAccid=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:200}},Ce),rr={teamId:Ce.teamId},Ce.accounts&&Ce.accounts.length>0&&(rr.accounts=Ce.accounts),Er.next=5,this.core.sendCmd("getTeamMemberInvitorAccid",rr);case 5:return fr=Er.sent,Er.abrupt("return",((Lt=fr.content)===null||Lt===void 0?void 0:Lt.accountsMap)||{});case 7:case"end":return Er.stop()}},er,this)}))},Ue.muteTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteTeam",{teamId:Ce.teamId,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.passTeamApply=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("passTeamApply",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.rejectTeamApply=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectTeamApply",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.acceptTeamInvite=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("acceptTeamInvite",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.rejectTeamInvite=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectTeamInvite",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.notifyTeamMsgReceiptsHandler=function(Ce){var Lt,er=(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.teamMsgReceipts;er&&er.length>0&&(this.core.emit("teamMsgReceipts",er),this.core.emit("msgReceipts",er))},Ue.syncTeamsHandler=function(Ce){var Lt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{teams:jo(Lt.timetag)});var er=Lt==null?void 0:Lt.teams;if(er&&er.length){var rr=fc(er);this.core.emit("teams",rr)}},Ue.syncCreateTeamHandler=function(Ce){var Lt=Ce.content,er=vl(Lt==null?void 0:Lt.team),rr=Na(er,er.owner,"owner");this.core.emit("createTeam",er,rr)},Ue.syncUpdateTeamMemberHandler=function(Ce){var Lt=Ce.content,er=nd(Lt==null?void 0:Lt.teamMember);er.updateTime||(er.updateTime=new Date().getTime()),this.mergeMyTeamMembers([er]),this.core.emit("updateTeamMember",er);var rr=Lc(this.myTeamMembersMap.get(er.teamId));this.core.emit("myTeamMembers",[rr])},Ue.syncMyTeamMembersHandler=function(Ce){var Lt,er=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{myTeamMembers:jo(er.timetag)});var rr=er==null?void 0:Lo(Lt=er.teamMembers).call(Lt,function(fr){return nd(fr)});this.mergeMyTeamMembers(rr),this.core.emit("myTeamMembers",Lc(rr))},Ue.notificationHandler=function(Ce){var Lt=Ce.attach,er=Ce.scene,rr=Ce.from,fr=Ce.to,kr=Ce.time,Er=Ce.idServer,Rr=Ce.idClient,$r=Lt.team,Hr=Lt.account,Gr=Lt.accounts,vn=Lt.type;if(er==="team")switch(this.core.options.debugLevel==="debug"?this.logger.debug("team::recvNotification",Er,Rr,Lt):this.logger.log("team::recvNotification",Er,Rr,fr,vn,Hr,Gr),vn){case"updateTeam":$r.updateTime=kr,this.core.emit("updateTeam",$r);break;case"addTeamMembers":this.service.notifyAddTeamMembers($r,Gr);break;case"acceptTeamInvite":this.service.notifyAddTeamMembers($r,[rr]);break;case"passTeamApply":this.service.notifyAddTeamMembers($r,[Hr]);break;case"addTeamManagers":this.service.notifyUpdateTeamManagers(fr,Gr,!0,kr);break;case"removeTeamManagers":this.service.notifyUpdateTeamManagers(fr,Gr,!1,kr);break;case"removeTeamMembers":this.service.notifyRemoveTeamMembers($r,Gr);break;case"leaveTeam":this.service.notifyRemoveTeamMembers($r,[rr]);break;case"dismissTeam":this.core.emit("dismissTeam",{teamId:fr});break;case"transferTeam":this.service.notifyTransferTeam($r,rr,Hr);break;case"updateTeamMemberMute":this.service.notifyUpdateTeamMembersMute($r,[Hr],Lt.mute)}},he}(Ls);(function(_e){_e[_e.none=0]="none",_e[_e.pass=1]="pass",_e[_e.decline=2]="decline",_e[_e.read=3]="read",_e[_e.deleted=4]="deleted",_e[_e.invalid=5]="invalid"})(Ml||(Ml={})),function(_e){_e[_e.default=0]="default",_e[_e.leave=1]="leave",_e[_e.roam=2]="roam"}(Bc||(Bc={})),function(_e){_e[_e.applyTeam=0]="applyTeam",_e[_e.rejectTeamApply=1]="rejectTeamApply",_e[_e.teamInvite=2]="teamInvite",_e[_e.rejectTeamInvite=3]="rejectTeamInvite",_e[_e.friendRequest=5]="friendRequest",_e[_e.deleteFriend=6]="deleteFriend",_e[_e.recallMsgP2p=7]="recallMsgP2p",_e[_e.recallMsgTeam=8]="recallMsgTeam",_e[_e.recallMsgSuperTeam=12]="recallMsgSuperTeam",_e[_e.deleteMsgP2pOneWay=13]="deleteMsgP2pOneWay",_e[_e.deleteMsgTeamOneWay=14]="deleteMsgTeamOneWay",_e[_e.applySuperTeam=15]="applySuperTeam",_e[_e.rejectSuperTeamApply=16]="rejectSuperTeamApply",_e[_e.superTeamInvite=17]="superTeamInvite",_e[_e.rejectSuperTeamInvite=18]="rejectSuperTeamInvite",_e[_e.customP2p=100]="customP2p",_e[_e.customTeam=101]="customTeam",_e[_e.customSuperTeam=103]="customSuperTeam"}(ts||(ts={}));var Hv={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},zv={setting:{needSaveOffline:{type:"boolean"},isRoutable:{type:"boolean"},envConfig:{type:"string"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"boolean"}},pushInfo:cu,recallMessageInfo:{idClient:{type:"string",rawKey:"deletedIdClient"},idServer:{type:"string",rawKey:"deletedIdServer"},createTime:{type:"number",rawKey:"deletedMsgCreateTime"},fromNick:{type:"string",rawKey:"deletedMsgFromNick"},opeAccount:{type:"string"}}};function jp(_e,he,Ue){var $e=+_e.type,Ce=_0(ts,$e);Ue=Ue||Bc.default;var Lt=Gn(Gn({},oi(zv,_e)),{type:Ce,time:+_e.time,to:_e.to,from:_e.from,idServer:_e.idServer,state:Ml[Ml.none],feature:Bc[Ue]});if(typeof Lt.attach=="string")try{Lt.attach=JSON.parse(Lt.attach)}catch(er){he.error("formatSystemMessage: "+Lt.idServer+" parse attach error",er&&er.message)}return $e===5&&Lt.attach?(Lt.attach.type=Hv[+Lt.attach.vt],Lt.attach.type==="passFriendApply"?Lt.state=Ml[Ml.pass]:Lt.attach.type==="rejectFriendApply"&&(Lt.state=Ml[Ml.decline])):$e<=3&&Lt.attach&&(Lt.attach=function(rr){var fr=rr.attach,kr=rr.tinfo,Er=ea(rr,["attach","tinfo"]);return Er.ext=fr,kr!==void 0&&(Er.team=vl(il(rr.tinfo,Es.team))),Er}(Lt.attach)),Lt}function gM(_e){var he=Gn({},_e);return Gn(Gn({},am(zv,he)),{type:ts[he.type],to:he.to,attach:he.attach})}var hM={"4_6":"syncOfflineSysMsgs","4_18":"syncOfflineSysMsgs","4_19":"syncRecallMsgOfflineAndRoaming","4_101":"syncOfflineSysMsgs","7_3":"onSysMsg","7_7":"sendCustomSysMsg","7_14":"onRecallMsg","21_18":"onRecallMsg","21_117":"onRecallMsg","7_15":"syncRecallMsgOfflineAndRoaming","21_19":"onSysMsg","21_16":"sendSuperTeamCustomSysMsg","101_3":"onSysMsg","101_7":"sendFilterCustomSysMsg"},Dp={sysMsg:Gn({time:0,type:1,to:2,from:3,content:4,attach:5,idServer:6,needSaveOffline:7,deletedIdClient:10,deletedIdServer:11,needcAntiSpam:12,antiSpamContent:13,deletedMsgCreateTime:14,deletedMsgFromNick:15,opeAccount:16,envConfig:21,callbackExt:22,isRoutable:105},Ep)},pu=zs(Dp),vM={onSysMsg:{service:"systemMessage",sid:7,cid:3,response:[{type:"Property",name:"sysMsg",reflectMapper:pu.sysMsg}]},sendCustomSysMsg:{service:"systemMessage",sid:7,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:Dp.sysMsg}]},sendSuperTeamCustomSysMsg:{service:"systemMessage",sid:21,cid:16,params:[{type:"Property",name:"sysMsg",reflectMapper:Dp.sysMsg}]},sendFilterCustomSysMsg:{service:"systemMessage",sid:101,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:Dp.sysMsg}]},batchMarkRead:{service:"systemMessage",sid:4,cid:5,hasPacketResponse:!1,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},onRecallMsg:{sid:7,cid:14,service:"systemMessage",response:[{type:"Property",name:"sysMsg",reflectMapper:pu.sysMsg}]},syncRecallMsgOfflineAndRoaming:{sid:7,cid:15,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:pu.sysMsg},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},syncOfflineSysMsgs:{sid:4,cid:9,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:pu.sysMsg}]}},Wv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"systemMessage",$e)||this).sysMsgUnread={total:0,friend:0,msg:0,team:0,superTeam:0},Ce.core.eventBus.on("logined",function(){Ce.initEventListeners()}),Ts({cmdMap:hM,cmdConfig:vM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.initEventListeners=function(){var Ce=this;this.core.eventBus.on("systemMessage/passFriendApply",function(Lt){Ce.core.emit("updateSystemMessages",[{idServer:Lt.idServer,from:Lt.account,state:"pass",type:"friendRequest"}])}),this.core.eventBus.on("systemMessage/rejectFriendApply",function(Lt){Ce.core.emit("updateSystemMessages",[{idServer:Lt.idServer,from:Lt.account,state:"decline",type:"friendRequest"}])})},Ue.doMarkSysMsgAck=function(Ce){var Lt=[],er=[],rr=["applySuperTeam","rejectSuperTeamApply","superTeamInvite","rejectSuperTeamInvite","customSuperTeam"];So(Ce).call(Ce,function(fr){fr.idServer&&(mi(rr).call(rr,fr.type)?er.push(fr.idServer):Lt.push(fr.idServer))}),Lt.length>0&&this.core.sendCmd("batchMarkRead",{sid:"7",cid:"3",ids:Lt}),er.length>0&&this.core.sendCmd("batchMarkRead",{sid:"21",cid:"19",ids:er})},Ue.sendCustomSysMsg=function(Ce){var Lt=this;Xn({to:{type:"string",allowEmpty:!1},type:{type:"enum",values:["customP2p","customTeam","customSuperTeam"]},attach:{type:"string",allowEmpty:!1},setting:{type:"object",rules:{needSaveOffline:{type:"boolean",required:!1},env:{type:"string",allowEmpty:!1,required:!1}},required:!1},pushInfo:{type:"object",required:!1,rules:cu}},Ce);var er=Ce.type==="customSuperTeam"?"sendSuperTeamCustomSysMsg":"sendCustomSysMsg";return this.core.sendCmd(er,{sysMsg:gM(Ce)}).then(function(){Lt.logger.log("sendCustomSysMsg success")}).catch(function(rr){throw Lt.logger.error("sendCustomSysMsg failed",rr.message),rr})},Ue.onSysMsgHandler=function(Ce){var Lt,er=(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.sysMsg;if(er){var rr=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;er.idServer=er.idServer||rr;var fr=jp(er,this.logger,Bc.default);this.core.emit("sysMsg",fr),this.doMarkSysMsgAck([fr])}else this.logger.warn("onSysMsg no content.sysMsg")},Ue.syncOfflineSysMsgsHandler=function(Ce){var Lt,er=this;if(Ce.content.sysMsgs&&Ce.content.sysMsgs.length>0){var rr=Lo(Lt=Ce.content.sysMsgs).call(Lt,function(fr){return jp(fr,er.logger,Bc.leave)});this.core.emit("syncSysMsgs",rr),this.doMarkSysMsgAck(rr)}},Ue.onRecallMsgHandler=function(Ce){var Lt,er=(Lt=Ce.content)===null||Lt===void 0?void 0:Lt.sysMsg;if(er){var rr=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;er.idServer=er.idServer||rr;var fr=Ip([er],function(Rr){return Rr===ts.recallMsgP2p?"p2p":Rr===ts.recallMsgTeam?"team":Rr===ts.recallMsgSuperTeam?"superTeam":""}(+er.type));this.core.eventBus.emit("session/updateForDeletedMsg",fr);var kr=jp(er,this.logger,Bc.default);this.core.emit("sysMsg",kr),this.doMarkSysMsgAck([kr])}else this.logger.warn("onSysMsg no content.sysMsg")},Ue.syncRecallMsgOfflineAndRoamingHandler=function(Ce){var Lt=this,er=Ce.content,rr=er.timetag,fr=er.type,kr=er.sysMsgs,Er=jo(fr),Rr=Er===1?Bc.leave:Bc.roam,$r=Lo(kr).call(kr,function(Hr){return jp(Hr,Lt.logger,Rr)});Er===1&&this.doMarkSysMsgAck($r),this.core.eventBus.emit("sync/updateTimetag",{recallMsg:rr}),this.core.emit("syncSysMsgs",$r)},he}(Ls);function Gv(_e){var he=["bitsExtension","createTime","updateTime","passRelationShip","relationShip","source"],Ue=Gn({},_e);return So(he).call(he,function($e){Ue[$e]!==void 0&&(Ue[$e]=jo(Ue[$e]))}),Ue.relationShip!==void 0&&(Ue.valid=Ue.relationShip===1),Ue}var yM={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},bM={"12_4":"getFriends","12_1":"friendReuqest","12_2":"deleteFriend","12_3":"updateFriend","12_5":"syncFriends","12_6":"syncFriendUsers","12_101":"syncFriendRequest","12_102":"syncDeleteFriend","12_103":"syncUpdateFriend"},Kv={updateFriendTag:{account:4,alias:8,ext:10},delFriendParams:{delAlias:1},friendTag:{account:4,relationShip:5,passRelationShip:6,source:7,alias:8,bitsExtension:9,ext:10,createTime:11,updateTime:12,serverex:13},userTag:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13}},$m=zs(Kv),jm={getFriends:{sid:12,cid:4,service:"friend",params:[{type:"Long",name:"timetag"}],response:[{type:"PropertyArray",name:"friends",reflectMapper:$m.friendTag},{type:"Number",name:"timetag"}]},friendReuqest:{sid:12,cid:1,service:"friend",params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:12,cid:2,service:"friend",params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams",reflectMapper:Kv.delFriendParams}]},updateFriend:{sid:12,cid:3,service:"friend",params:[{type:"Property",name:"updateFriendTag",reflectMapper:Kv.updateFriendTag}]},syncFriends:{sid:12,cid:5,service:"friend",response:[{type:"PropertyArray",name:"friends",entity:"friendTag",reflectMapper:$m.friendTag},{type:"Number",name:"timetag"}]},syncFriendUsers:{sid:12,cid:6,service:"friend",response:[{type:"PropertyArray",name:"users",entity:"userTag",reflectMapper:$m.userTag},{type:"Number",name:"timetag"}]},syncFriendRequest:{sid:12,cid:101,service:"friend",params:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}],response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},syncDeleteFriend:{sid:12,cid:102,service:"friend",response:[{type:"String",name:"account"}]},syncUpdateFriend:{sid:12,cid:103,service:"friend",response:[{type:"Property",name:"friend",reflectMapper:$m.friendTag}]}},SM=function(_e){function he($e){var Ce;return Ce=_e.call(this,"friend",$e)||this,Ts({cmdMap:bM,cmdConfig:jm}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.getFriends=function(){var Ce;return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return kr.next=2,this.core.sendCmd("getFriends",{timetag:0});case 2:return er=kr.sent,rr=((Ce=er.content)===null||Ce===void 0?void 0:Ce.friends)||[],rr=Lo(rr).call(rr,function(Er){return Gv(Er)}),kr.abrupt("return",rr);case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.addFriend=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1},ps:{type:"string",allowEmpty:!1,required:!1}},Ce),fr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:1,ps:Ce.ps||""});case 3:return er=new Date().getTime(),fr.abrupt("return",{account:Ce.account,createTime:er,updateTime:er,valid:!0,source:0,passRelationShip:1,relationShip:1,bitsExtension:0});case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.applyFriend=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:2,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.passFriendApply=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er=this;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1}},Ce),fr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:3,ps:Ce.ps||""}).then(function(kr){return er.core.eventBus.emit("systemMessage/passFriendApply",Ce),kr});case 3:case"end":return fr.stop()}},Lt,this)}))},Ue.rejectFriendApply=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er=this;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1}},Ce),fr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:4,ps:Ce.ps||""}).then(function(kr){return er.core.eventBus.emit("systemMessage/rejectFriendApply",Ce),kr});case 3:case"end":return fr.stop()}},Lt,this)}))},Ue.deleteFriend=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1},delAlias:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("deleteFriend",{account:Ce.account,delFriendParams:{delAlias:Ce.delAlias===!0?1:0}});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.updateFriend=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1},alias:{type:"string"},ext:{type:"string",required:!1}},Ce),rr.next=3,this.core.sendCmd("updateFriend",{updateFriendTag:Ce});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.syncFriendRequestHandler=function(Ce){var Lt=function(rr){var fr=Gn({},rr);try{fr.ps=fr.ps&&JSON.parse(fr.ps)}catch{}if(fr.type=yM[fr.type],fr.type==="addFriend"||fr.type==="passFriendApply"){var kr=new Date().getTime();fr.friend={account:rr.account,alias:"",createTime:kr,ext:"",updateTime:kr,valid:!0}}return fr}(Ce.content);this.core.emit("syncFriend",Lt)},Ue.syncDeleteFriendHandler=function(Ce){var Lt=Ce.content.account;this.logger.log("friend::emit syncFriendAction: deleteFriend "+Lt),this.core.emit("syncFriend",{type:"deleteFriend",account:Lt})},Ue.syncUpdateFriendHandler=function(Ce){var Lt=Gv(Ce.content.friend);this.logger.log("friend::emit syncFriendAction: updateFriend, ",Lt==null?void 0:Lt.account),this.core.emit("syncFriend",{type:"updateFriend",friend:Lt})},Ue.syncFriendsHandler=function(Ce){var Lt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{friends:jo(Lt.timetag)});var er=Lt==null?void 0:Lt.friends;if(er&&er.length){var rr=Lo(er).call(er,function(fr){return Gv(fr)});this.core.emit("friends",rr)}},Ue.syncFriendUsersHandler=function(Ce){var Lt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{friendUsers:jo(Lt.timetag)});var er=Lt==null?void 0:Lt.users;if(er&&er.length){var rr=Lo(er).call(er,function(fr){return xi(fr)});this.core.emit("users",rr)}},he}(Ls),Qv={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"};function T1(_e){return _e&&_e.length>0?Lo(_e).call(_e,function(he){return function($e){var Ce=Gn({},$e),Lt=["subscribeTime","time"];return So(Lt).call(Lt,function(er){Ce[er]&&(Ce[er]=jo(Ce[er]))}),Ce}(he)}):[]}function Jv(_e){if(!_e)return _e;var he=_e.serverExt,Ue=ea(_e,["serverExt"]),$e=["time","type","value"];if(So($e).call($e,function(Ce){Ue[Ce]&&(Ue[Ce]=jo(Ue[Ce]))}),Ue.clientType&&(Ue.clientType=Qv[Ue.clientType]||""),he)try{Ue.ext=JSON.parse(he),typeof Ue.ext[0]=="string"&&(Ue.ext=Ue.ext[0])}catch{}return Ue}var C1={"14_1":"publishEvent","14_2":"pushEvent","14_3":"subscribeEvent","14_4":"unSubscribeEventsByAccounts","14_5":"unSubscribeEventsByType","14_6":"querySubscribeEventsByAccounts","14_7":"querySubscribeEventsByType","14_9":"pushEvents"},fu={msgEvent:{type:1,value:2,idClient:3,ext:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverExt:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105}},mu=zs(fu),M1={publishEvent:{sid:14,cid:1,service:"event",params:[{type:"Property",name:"msgEvent",reflectMapper:fu.msgEvent}],response:[{type:"Property",name:"msgEvent",reflectMapper:mu.msgEvent}]},pushEvent:{sid:14,cid:2,service:"event",response:[{type:"Property",name:"msgEvent",reflectMapper:mu.msgEvent}]},subscribeEvent:{sid:14,cid:3,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:14,cid:4,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:14,cid:5,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe}]},querySubscribeEventsByAccounts:{sid:14,cid:6,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:mu.msgEventSubscribe}]},querySubscribeEventsByType:{sid:14,cid:7,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:mu.msgEventSubscribe}]},pushEvents:{sid:14,cid:9,service:"event",response:[{type:"PropertyArray",name:"msgEvents",reflectMapper:mu.msgEvent}]}},dd=function(_e){function he($e){var Ce;return Ce=_e.call(this,"event",$e)||this,Ts({cmdMap:C1,cmdConfig:M1}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.publishEvent=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({type:{type:"number"},value:{type:"number"},ext:{type:"string",required:!1},validTime:{type:"number",min:60,max:2592e3,required:!1},broadcastType:{type:"number",required:!1},sync:{type:"boolean",required:!1}},Ce),rr=Gn(Gn({validTime:Ce.validTime||604800,broadcastType:Ce.broadcastType||2},Ce),{idClient:Qo(),sync:Ce.sync===!0?1:0}),Rr.next=4,this.core.sendCmd("publishEvent",{msgEvent:rr});case 4:return fr=Rr.sent,kr=((Lt=fr.content)===null||Lt===void 0?void 0:Lt.msgEvent)||{},Rr.abrupt("return",Jv(kr));case 7:case"end":return Rr.stop()}},er,this)}))},Ue.subscribeEvent=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100},subscribeTime:{type:"number",min:60,max:2592e3,required:!1}},Ce),rr=Gn(Gn({subscribeTime:2592e3},Ce),{sync:Ce.sync===!0?1:0}),Rr.next=4,this.core.sendCmd("subscribeEvent",{msgEventSubscribe:rr,accounts:Ce.accounts});case 4:return fr=Rr.sent,kr=((Lt=fr.content)===null||Lt===void 0?void 0:Lt.accounts)||[],Rr.abrupt("return",{failedAccounts:kr});case 7:case"end":return Rr.stop()}},er,this)}))},Ue.unSubscribeEvents=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(Xn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},Ce),rr={type:Ce.type},!(Ce.accounts&&Ce.accounts.length>0)){Rr.next=9;break}return Rr.next=5,this.core.sendCmd("unSubscribeEventsByAccounts",{msgEventSubscribe:rr,accounts:Ce.accounts});case 5:kr=Rr.sent,fr=((Lt=kr.content)===null||Lt===void 0?void 0:Lt.accounts)||[],Rr.next=12;break;case 9:return Rr.next=11,this.core.sendCmd("unSubscribeEventsByType",{msgEventSubscribe:rr});case 11:fr=[];case 12:return Rr.abrupt("return",{failedAccounts:fr});case 13:case"end":return Rr.stop()}},er,this)}))},Ue.querySubscribeEvents=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Xn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},Ce),!(Ce.accounts&&Ce.accounts.length>0)){kr.next=7;break}return kr.next=4,this.core.sendCmd("querySubscribeEventsByAccounts",{msgEventSubscribe:{type:Ce.type},accounts:Ce.accounts});case 4:rr=kr.sent,kr.next=10;break;case 7:return kr.next=9,this.core.sendCmd("querySubscribeEventsByType",{msgEventSubscribe:{type:Ce.type}});case 9:rr=kr.sent;case 10:return kr.abrupt("return",T1((Lt=rr.content)===null||Lt===void 0?void 0:Lt.msgEventSubscribes));case 11:case"end":return kr.stop()}},er,this)}))},Ue.pushEventHandler=function(Ce){var Lt,er=((Lt=Ce.content)===null||Lt===void 0?void 0:Lt.msgEvent)||{};this.core.emit("pushEvents",[Jv(er)])},Ue.pushEventsHandler=function(Ce){var Lt,er=((Lt=Ce.content)===null||Lt===void 0?void 0:Lt.msgEvents)||{};this.core.emit("pushEvents",function(fr){return lc(fr)&&fr.length>0?Lo(fr).call(fr,function(kr){return Jv(kr)}):[]}(er))},he}(Ls);function k1(_e){var he={scene:Qh[_e.scene],from:_e.threadMsgFromAccount,to:_e.threadMsgToAccount,time:_e.threadMsgTime,idServer:_e.threadMsgIdServer},Ue={limit:_e.limit<100?_e.limit:100,beginTime:typeof _e.beginTime=="number"?_e.beginTime:0,reverse:Of(_e)===!0?1:0};return _e.lastMsgId&&(Ue.lastMsgId=_e.lastMsgId),{msg:he,threadMsgReq:Ue}}var Dm,w1={"23_1":"getThreadMsgs","23_2":"getMsgsByIdServer"},kl={msg:yl,threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2}},wl=zs(kl),TM={getThreadMsgs:{sid:23,cid:1,service:"msgExtend",params:[{type:"Property",name:"msg",reflectMapper:kl.msg},{type:"Property",name:"threadMsgReq",reflectMapper:kl.threadMsgReq}],response:[{type:"Property",name:"threadMsg",reflectMapper:wl.msg},{type:"Property",name:"threadMsgsMeta",reflectMapper:wl.threadMsgsMeta},{type:"PropertyArray",name:"msgs",reflectMapper:wl.msg}]},getMsgsByIdServer:{sid:23,cid:2,service:"msgExtend",params:[{type:"PropertyArray",name:"reqMsgs",reflectMapper:kl.msg}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:wl.msg}]}},pe=function(_e){function he($e){var Ce;return Ce=_e.call(this,"msgExtend",$e)||this,Ts({cmdMap:w1,cmdConfig:TM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.getThreadMsgs=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er,Rr,$r,Hr;return Kr.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return Xn({scene:{type:"enum",values:dc(es)},threadMsgFromAccount:{type:"string",allowEmpty:!1},threadMsgIdServer:{type:"string",allowEmpty:!1},threadMsgTime:{type:"number"},threadMsgToAccount:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},lastMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1}},Ce),vn.next=3,this.core.sendCmd("getThreadMsgs",k1(Ce));case 3:return rr=vn.sent,fr=rr.content,kr=fr.msgs,Er=fr.threadMsg,Rr=rr.content.threadMsgsMeta,$r=Ac(Er,this.core.account),Hr=(Lt=this.core.session)===null||Lt===void 0?void 0:Lt.getSessionWithUncomplete({id:$r}),kr=Nm(kr,Hr?{account:this.core.account,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:this.core.account}),Er=Ii(Er,Hr?{account:this.core.account,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:this.core.account}),vn.abrupt("return",{msgs:kr,threadMsg:Er,total:jo(Rr.total),timetag:jo(Rr.lastMsgTime)});case 11:case"end":return vn.stop()}},er,this)}))},Ue.getMsgsByIdServer=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er=this;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({reqMsgs:{type:"array",rules:{scene:{type:"enum",values:dc(es)},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},time:{type:"number"}},min:1,max:100}},Ce),$r.next=3,this.core.sendCmd("getMsgsByIdServer",{reqMsgs:Lo(er=Ce.reqMsgs).call(er,function(Hr){return Gn(Gn({},Hr),{scene:_0(es,Hr.scene)})})});case 3:return fr=$r.sent,kr=Lo(rr=fr.content.msgs).call(rr,function(Hr){var Gr,vn=Ac(Hr,Er.core.account),bn=(Gr=Er.core.session)===null||Gr===void 0?void 0:Gr.getSessionWithUncomplete({id:vn});return Ii(Hr,bn?{account:Er.core.account,sessionAck:bn.ack,msgReceiptTime:bn.msgReceiptTime}:{account:Er.core.account})}),$r.abrupt("return",kr);case 6:case"end":return $r.stop()}},Lt,this)}))},he}(Ls);(function(_e){_e[_e.ASC=1]="ASC",_e[_e.DESC=2]="DESC"})(Dm||(Dm={}));var xe,qe={"7_6":"getHistoryMsgs","7_9":"deleteRoamingMsgs","4_24":"syncClearServerHistoryMsgs","7_18":"clearHistoryMsgsFromServer","7_118":"multiSyncClearServerHistoryMsgs","7_26":"nimFtsCloudMsgLogsAggWithSession","7_27":"nimFtsCloudMsgLogs"},Oe={msg:yl,clearHistoryMsgsFromServerReqTag:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,ext:7},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},ftsReqTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msglogsLimit:5,orderRule:6,p2pSessionList:7,teamSessionList:8,senderList:9,msgTypeList:10,msgSubTypeList:11}},Ie=zs(Oe),At={deleteRoamingMsgs:{sid:7,cid:9,service:"msgLog",params:[{type:"StrArray",name:"ids"}]},getHistoryMsgs:{sid:7,cid:6,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ie.msg}],service:"msgLog"},clearHistoryMsgsFromServer:{sid:7,cid:18,params:[{type:"Property",name:"clearHistoryMsgsFromServerReqTag",reflectMapper:Oe.clearHistoryMsgsFromServerReqTag}],response:[{type:"Long",name:"timetag"}],service:"msgLog"},multiSyncClearServerHistoryMsgs:{sid:7,cid:118,response:[{type:"Property",name:"data",reflectMapper:Ie.clearMsgsParamsWithSync}],service:"msgLog"},syncClearServerHistoryMsgs:{sid:4,cid:24,service:"msgLog",response:[{type:"PropertyArray",name:"datas",reflectMapper:Ie.clearMsgsParamsWithSync}]},nimFtsCloudMsgLogsAggWithSession:{sid:7,cid:26,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:Oe.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:Ie.msg}]},nimFtsCloudMsgLogs:{sid:7,cid:27,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:Oe.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:Ie.msg}]}};(function(_e){_e[_e.p2p=1]="p2p",_e[_e.team=2]="team"})(xe||(xe={}));var Dt={type:{type:"enum",values:xe},isDeleteRoam:{type:"boolean"},isSyncSelf:{type:"boolean"},time:{type:"number"}};function Pt(_e){var he=oi(Dt,_e);return{sessionId:he.type==="p2p"?"p2p-"+he.otherAccid:"team-"+he.toTid,time:he.time}}var ir={orderRule:{type:"enum",values:Dm}};function hr(_e){var he,Ue=oi(ir,_e);lc(Ue.msgTypeList)&&(Ue.msgTypeList=Lo(he=Ue.msgTypeList).call(he,function(Ce){return Xl[Ce]}).join(","));var $e=["p2pSessionList","teamSessionList","senderList","msgSubTypeList"];return So($e).call($e,function(Ce){lc(Ue[Ce])&&(Ue[Ce]=Ue[Ce].join(","))}),Ue}var xr=function(_e){function he($e){var Ce;return Ce=_e.call(this,"msgLog",$e)||this,Ts({cmdMap:qe,cmdConfig:At}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.deleteRoamingMsgs=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:Xn({ids:{type:"array",itemType:"string"}},Ce),er=[],kr.prev=2,er=Lo(rr=Ce.ids).call(rr,function(Er){var Rr=wi(Er);return Rr.scene+"|"+Rr.accid}),kr.next=10;break;case 6:throw kr.prev=6,kr.t0=kr.catch(2),this.logger.error("Failed to delete roaming msgs with "+Ce.ids,kr.t0),new Error("Failed to create session with "+Ce.ids);case 10:return kr.next=12,this.core.sendCmd("deleteRoamingMsgs",{ids:er});case 12:case"end":return kr.stop()}},Lt,this,[[2,6]])}))},Ue.getHistoryMsgs=function(Ce){var Lt,er;return Vn(this,void 0,void 0,Kr.mark(function rr(){var fr,kr,Er,Rr,$r,Hr,Gr;return Kr.wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return!((Lt=this.core.sync)===null||Lt===void 0)&&Lt.getSyncDoneFlag()||this.logger.warn("Please call getHistoryMsgs after syncdone event"),Xn({scene:{type:"enum",values:fa(Qh)},to:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1},lastMsgId:{type:"string",required:!1,allowEmpty:!1},asc:{type:"boolean",required:!1},msgTypes:{type:"array",itemType:"string",required:!1}},Ce),kr=Ce.scene==="p2p"?"getHistoryMsgs":Ce.scene==="team"?"getHistoryTeamMsgs":"getHistorySuperTeamMsgs",bn.next=5,this.core.sendCmd(kr,Gn(Gn({beginTime:0,endTime:0,lastMsgId:0,limit:100,reverse:!1},Ce),{msgTypes:Ce.msgTypes?Lo(fr=Ce.msgTypes).call(fr,function(In){return Kh[In]}):[]}));case 5:if(Er=bn.sent,(Rr=Er.content).msgs&&Rr.msgs.length>0){bn.next=9;break}return bn.abrupt("return",[]);case 9:if($r=Ac(Rr.msgs[0],this.core.account),Hr=(er=this.core.session)===null||er===void 0?void 0:er.getSessionWithUncomplete({id:$r}),Gr=Nm(Rr.msgs,Hr?{account:this.core.account,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:this.core.account}),Ce.asc!==!0){bn.next=14;break}return bn.abrupt("return",iu(Gr).call(Gr,function(In,Cn){return In.time-Cn.time}));case 14:return bn.abrupt("return",Gr);case 15:case"end":return bn.stop()}},rr,this)}))},Ue.clearHistoryMsgsFromServer=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({scene:{type:"enum",values:["p2p","team"]},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},isSyncSelf:{type:"boolean",required:!1}},Ce),(er=Gn(Gn({isDeleteRoam:1},Ce),{type:Ce.scene==="team"?2:1,isSyncSelf:Ce.isSyncSelf===!0?1:0}))[er.type===2?"toTid":"otherAccid"]=Ce.to,Er.next=5,this.core.sendCmd("clearHistoryMsgsFromServer",{clearHistoryMsgsFromServerReqTag:er});case 5:return rr=Er.sent,fr=rr.content,this.core.eventBus.emit("session/updateForClearMsg",[{sessionId:Ce.scene+"-"+Ce.to}],!0),Er.abrupt("return",fr);case 9:case"end":return Er.stop()}},Lt,this)}))},Ue.multiSyncClearServerHistoryMsgsHandler=function(Ce){var Lt=Pt(Ce.content.data);this.core.eventBus.emit("session/updateForClearMsg",[Lt],!0),this.core.emit("clearServerHistoryMsgs",[Lt])},Ue.ftsCloudMsgLogs=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.abrupt("return",this.baseFtsCloudMsgLogs(Ce,"nimFtsCloudMsgLogs"));case 1:case"end":return rr.stop()}},Lt,this)}))},Ue.ftsCloudMsgLogsAggWithSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.abrupt("return",this.baseFtsCloudMsgLogs(Ce,"nimFtsCloudMsgLogsAggWithSession"));case 1:case"end":return rr.stop()}},Lt,this)}))},Ue.baseFtsCloudMsgLogs=function(Ce,Lt){return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er=this;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(Xn({keyword:{type:"string",allowEmpty:!1},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",required:!1},msglogsLimit:{type:"number",required:!1},orderRule:{type:"enum",values:dc(Dm),required:!1},p2pSessionList:{type:"array",itemType:"string",required:!1},teamSessionList:{type:"array",itemType:"string",required:!1},senderList:{type:"array",itemType:"string",required:!1},msgTypeList:{type:"array",itemType:"enum",values:dc(Xl),required:!1},msgSubTypeList:{type:"array",itemType:"number",required:!1}},Ce),!(Ce.fromTime&&Ce.toTime&&Ce.toTime<Ce.fromTime)){$r.next=3;break}throw new Uu("Request parameter error: toTime should be greater than fromTime",Ce,"");case 3:return fr=hr(Ce),$r.next=6,this.core.sendCmd(Lt,{tag:fr});case 6:return kr=$r.sent,$r.abrupt("return",Lo(rr=kr.content.datas).call(rr,function(Hr){var Gr,vn=Ac(Hr,Er.core.account),bn=(Gr=Er.core.session)===null||Gr===void 0?void 0:Gr.getSessionWithUncomplete({id:vn});return Ii(Hr,bn?{account:Er.core.account,sessionAck:bn.ack,msgReceiptTime:bn.msgReceiptTime}:{account:Er.core.account})}));case 8:case"end":return $r.stop()}},er,this)}))},Ue.syncClearServerHistoryMsgsHandler=function(Ce){var Lt=function(rr){return lc(rr)&&rr.length>0?Lo(rr).call(rr,function(fr){return Pt(fr)}):[]}(Ce.content.datas);this.core.emit("clearServerHistoryMsgs",Lt)},he}(Ls),Or={"22_1":"requestProxy","22_2":"onRequestProxy"},jr={requestProxyTag:{zone:1,path:2,method:3,header:4,body:5},requestProxyMsgTag:{from:1,body:2,time:3}},Ur=zs(jr),Yr={requestProxy:{sid:22,cid:1,service:"passThrough",params:[{type:"Property",name:"requestProxyTag",reflectMapper:jr.requestProxyTag}],response:[{type:"Property",name:"requestProxyTag",reflectMapper:Ur.requestProxyTag}]},onRequestProxy:{sid:22,cid:2,service:"passThrough",response:[{type:"Property",name:"proxyMsg",reflectMapper:Ur.requestProxyMsgTag}]}},_n=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"passThrough",$e)||this).core=$e,Ts({cmdMap:Or,cmdConfig:Yr}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.request=function(Ce){return Xn({path:{type:"string",allowEmpty:!1}},Ce),this.core.sendCmd("requestProxy",{requestProxyTag:Ce}).then(function(Lt){return Lt.content.requestProxyTag})},Ue.onRequestProxyHandler=function(Ce){var Lt=Ce.content.proxyMsg;Lt&&Lt.time&&(Lt.time=+Lt.time),this.core.emit("proxyMsg",Lt)},he}(Ls),Tn=Bh.trim,Dn=Ne("".charAt),zn=$.parseFloat,Jn=$.Symbol,$n=Jn&&Jn.iterator,vo=1/zn(tm+"-0")!=-1/0||$n&&!V(function(){zn(Object($n))})?function(he){var Ue=Tn(Xs(he)),$e=zn(Ue);return $e===0&&Dn(Ue,0)=="-"?-0:$e}:zn;xn({global:!0,forced:parseFloat!=vo},{parseFloat:vo});var Fo=_r.parseFloat,qo,Bn,zr=function(he,Ue){if(he==null)return{};var $e=Vf($p(he),function(Ce){return[Ce]});return Ue=$v(Ue),z0(he,$e,function(Ce,Lt){return Ue(Ce,Lt[0])})},Zn={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},eo={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},qn=zs(eo),Nn={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:qn.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:eo.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:qn.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:eo.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:qn.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:qn.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:qn.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:eo.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:qn.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:eo.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:qn.mixStoreAuthTokenResTag}]}},no={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},fo={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};(function(_e){_e[_e.nos=1]="nos",_e[_e.s3=2]="s3"})(qo||(qo={})),function(_e){_e[_e.dontNeed=-1]="dontNeed",_e[_e.time=2]="time",_e[_e.urls=3]="urls"}(Bn||(Bn={}));var ko={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0};function _o(_e){return _e===void 0&&(_e="file"),va(no[_e]||{}).replace(/"/gi,'\\"')}var la=function(){function _e(Ue,$e){$e===void 0&&($e={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=qo.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=Ue.logger,this.core=Ue,Ts({cmdMap:Zn,cmdConfig:Nn}),this.setOptions($e)}var he=_e.prototype;return he.setOptions=function($e){$e===void 0&&($e={});var Ce=$e.storageKeyPrefix||"NIMClient";this.GRAYKEY=Ce+"-AllGrayscaleConfig",this.MIXSTOREKEY=Ce+"-AllMixStorePolicy";var Lt=$e.s3,er=ea($e,["s3"]),rr=Gn({},ko,this.config);if(er&&Object.prototype.hasOwnProperty.call(er,"cdn")){var fr={cdn:Gn(Gn({},rr.cdn),er.cdn)};this.config=Gn({},rr,er,fr)}else this.config=Gn({},rr,er);Lt&&(this.s3=Lt)},he.init=function(){return Vn(this,void 0,void 0,Kr.mark(function $e(){return Kr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=qo.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){Lt.next=9;break}return Lt.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return Lt.next=9,this.getNosCdnHost();case 9:case"end":return Lt.stop()}},$e,this)}))},he.processCallback=function($e){var Ce=this,Lt=$e.onUploadProgress,er=$e.onUploadDone,rr=$e.onUploadStart;return{onUploadStart:typeof rr=="function"?function(fr){try{rr(fr)}catch(kr){Ce.logger.error("CloudStorage::uploadFile:options.onUploadStart execute error",kr)}}:function(){},onUploadProgress:typeof Lt=="function"?function(fr){try{Lt(fr)}catch(kr){Ce.logger.error("CloudStorage::uploadFile:options.onUploadProgress execute error",kr)}}:function(){},onUploadDone:typeof er=="function"?function(fr){try{er(fr)}catch(kr){Ce.logger.error("CloudStorage::uploadFile:options.onUploadDone execute error",kr)}}:function(){}}},he.uploadFile=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(Xn({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},$e),$e.fileInput||$e.file||$e.filePath){$r.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!$e.type||$e.type==="file"){$r.next=7;break}if(typeof(Lt=Bs($e,"file.type"))!="string"||Ja(Lt).call(Lt,$e.type)!==-1){$r.next=7;break}throw new Error('The meta type "'+Lt+'" does not match "'+$e.type+'"');case 7:return er=this.processCallback($e),rr=er.onUploadStart,fr=er.onUploadProgress,kr=er.onUploadDone,$e.onUploadStart=rr,$e.onUploadProgress=fr,$e.onUploadDone=kr,$r.next=13,this._uploadFile($e);case 13:return(Er=$r.sent).url=decodeURIComponent(Er.url),$e.onUploadDone({size:Er.size,name:Er.name,url:Er.url,ext:Er.name.split(".")[1]||"unknown"}),$r.abrupt("return",Er);case 17:case"end":return $r.stop()}},Ce,this)}))},he._uploadFile=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){fr.next=3;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),fr.abrupt("return",this.nosUpload($e));case 3:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=qo.nos),Lt=fo,fr.prev=6,fr.next=9,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:_o($e.type)}});case 9:er=fr.sent,Lt=er.content.mixStoreTokenResTag,fr.next=17;break;case 13:throw fr.prev=13,fr.t0=fr.catch(6),this.core.logger.error("uploadFile:: getMixStoreToken error",fr.t0),new Vu("getMixStoreToken error",fr.t0,this.curProvider,this.mixStorePolicy);case 17:return fr.abrupt("return",this.curProvider===qo.s3?this.s3Upload($e,Lt):this.nosUpload($e,Lt));case 18:case"end":return fr.stop()}},Ce,this,[[6,13]])}))},he.nosUpload=function($e,Ce){var Lt,er;return Vn(this,void 0,void 0,Kr.mark(function rr(){var fr,kr,Er,Rr,$r,Hr,Gr,vn,bn,In,Cn,Kn,Qn,Mo,No;return Kr.wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:if(fr=Bs(this.core,"config.cdn.bucket"),kr={tag:$e.nosScenes||fr||"nim",expireSec:$e.nosSurvivalTime},Ce){Ln.next=13;break}return Ln.prev=3,Ln.next=6,this.core.sendCmd("getNosToken",{responseBody:_o($e.type),nosToken:kr});case 6:Er=Ln.sent,Ln.next=13;break;case 9:throw Ln.prev=9,Ln.t0=Ln.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Ln.t0),new Vu("getNosToken error",Ln.t0,1);case 13:return Rr=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",Er?Er.content.nosToken.objectName:Ce==null?void 0:Ce.objectName),$r="",Ce&&Ce.shortUrl&&($r=Ce.shortUrl),Hr=$r||Rr,Ln.prev=17,vn=Er?Er.content.nosToken:Ce,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:vn,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:Vo.platform}),Ln.next=22,this.core.adapters.uploadFile(Gn(Gn({},$e),{nosToken:vn,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:$e.maxSize||this.config.chunkMaxSize}));case 22:Gr=Ln.sent,Ln.next=48;break;case 25:if(Ln.prev=25,Ln.t1=Ln.catch(17),this.core.logger.error("uploadFile::nos uploadFile error",Ln.t1),Bs(Ln.t1,"errCode")!==10499){Ln.next=30;break}throw new Vu(Bs(Ln.t1,"message")||"Request abort",Ln.t1,1);case 30:if(!Ce){Ln.next=47;break}if(this.nosErrorCount!==0){Ln.next=43;break}Ln.prev=32,this._addCircuitTimer(),Ln.next=39;break;case 36:throw Ln.prev=36,Ln.t2=Ln.catch(32),new Vu("upload file error",Ln.t2,this.curProvider,this.mixStorePolicy,$e.file||$e.filePath);case 39:return this.nosErrorCount=(Lt=this.mixStorePolicy.nosPolicy)===null||Lt===void 0?void 0:Lt.uploadConfig.retryPolicy.retry,Ln.abrupt("return",this._uploadFile($e));case 43:return this.nosErrorCount--,Ln.abrupt("return",this.nosUpload($e,Ce));case 45:Ln.next=48;break;case 47:throw new Vu("nos uploadFile error",Ln.t1,1);case 48:if(bn=Gr==null?void 0:Gr.type,In=bn&&Ja(bn).call(bn,"/")>-1?Pa(bn).call(bn,0,Ja(bn).call(bn,"/")):"",(Cn={image:"imageInfo",video:"vinfo",audio:"vinfo"})[In]){Ln.next=53;break}return Ln.abrupt("return",Gn({url:Hr},Gr));case 53:return Ln.prev=53,Ln.next=56,this.core.adapters.request(Rr+"?"+Cn[In],{method:"GET",dataType:"json",timeout:5e3},{exception_service:3});case 56:Kn=Ln.sent,Ln.next=63;break;case 59:return Ln.prev=59,Ln.t3=Ln.catch(53),this.core.logger.error("uploadFile:: fetch file info error",Ln.t3),Ln.abrupt("return",Gn({url:Hr},Gr));case 63:if(!Kn){Ln.next=70;break}return Qn=Kn.data,Mo=Cn[In]==="imageInfo"?Qn:(er=Qn==null?void 0:Qn.GetVideoInfo)===null||er===void 0?void 0:er.VideoInfo,No={url:Hr,name:Gr.name,size:Gr.size,ext:Gr.ext,w:Mo.Width,h:Mo.Height,orientation:Mo.Orientation,dur:Mo.Duration,audioCodec:Mo.AudioCodec,videoCodec:Mo.VideoCodec,container:Mo.Container},Ln.abrupt("return",zr(No,function(Wr,ro){return ro!==void 0}));case 70:return Ln.abrupt("return",Gn({url:Hr},Gr));case 71:case"end":return Ln.stop()}},rr,this,[[3,9],[17,25],[32,36],[53,59]])}))},he.getNosCdnHost=function(){var $e;return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr=this;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Er.prev=0,Er.next=3,this.core.sendCmd("getNosCdnHost");case 3:Lt=Er.sent,Er.next=10;break;case 6:return Er.prev=6,Er.t0=Er.catch(0),this.logger.error("getNosCdnHost::error",Er.t0),Er.abrupt("return");case 10:if(Lt){Er.next=12;break}return Er.abrupt("return");case 12:er=($e=Lt==null?void 0:Lt.content)===null||$e===void 0?void 0:$e.nosConfigTag,(rr=jo(er==null?void 0:er.expire))!==0&&er.cdnDomain?rr===-1?(this.config.cdn.bucket=er.bucket,this.config.cdn.cdnDomain=er.cdnDomain,this.config.cdn.objectNamePrefix=er.objectNamePrefix):(this.config.cdn.bucket=er.bucket,this.config.cdn.cdnDomain=er.cdnDomain,this.config.cdn.objectNamePrefix=er.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){fr.getNosCdnHost()},1e3*rr)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return Er.stop()}},Ce,this,[[0,6]])}))},he.getGrayscaleConfig=function($e){var Ce;return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Vo.localStorage)try{Vo.localStorage.getItem&&Vo.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(Vo.localStorage.getItem(this.GRAYKEY))[$e])}catch(Er){Vo.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",Er)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){kr.next=17;break}return kr.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(er=kr.sent).content||!er.content.grayConfigTag){kr.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(er.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(er.content.grayConfigTag.ttl)}catch(Er){this.logger.error("getGrayscaleConfig error",Er)}if(this.grayConfig){kr.next=10;break}return kr.abrupt("return");case 10:rr=Vo.localStorage.getItem(this.GRAYKEY)?JSON.parse(Vo.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),rr[$e]=this.grayConfig,Vo.localStorage.setItem(this.GRAYKEY,va(rr)),kr.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",er.content);case 17:if(!(!((Ce=this.grayConfig)===null||Ce===void 0)&&Ce.mixStoreEnable)){kr.next=20;break}return kr.next=20,this._getMixStorePolicy($e);case 20:case"end":return kr.stop()}},Lt,this)}))},he._getMixStorePolicy=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr,Er,Rr;return Kr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(Lt=new Date().getTime(),Vo.localStorage)try{this.mixStorePolicy=JSON.parse(Vo.localStorage.getItem(this.MIXSTOREKEY))[$e],this.curProvider=jo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>Lt&&(rr=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-Lt,this.core.timerManager.addTimer(oa(er=this._getMixStorePolicy).call(er,this,$e),rr))}catch(Gr){Vo.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(Vo.localStorage.getItem(this.MIXSTOREKEY))[$e]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Gr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=Lt)){Hr.next=30;break}return Hr.prev=3,Hr.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:kr=Hr.sent,Er=kr.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(Er.ttl),this.mixStorePolicy.providers=Er.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=jo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=Er.nosPolicy?JSON.parse(Er.nosPolicy):null,this.mixStorePolicy.s3Policy=Er.s3Policy?JSON.parse(Er.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(oa(fr=this._getMixStorePolicy).call(fr,this,$e),1e3*this.mixStorePolicy.ttl),Rr=Vo.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(Vo.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),Rr[$e]=this.mixStorePolicy,Vo.localStorage.setItem(this.MIXSTOREKEY,va(Rr)),Hr.next=30;break;case 23:if(Hr.prev=23,Hr.t0=Hr.catch(3),this.logger.error("getMixStorePolicy error",Hr.t0),this.mixStoreErrorCount!==0){Hr.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy($e),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Hr.stop()}},Ce,this,[[3,23]])}))},he.s3Upload=function($e,Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er,Rr,$r,Hr,Gr,vn,bn=this;return Kr.wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:if(!$e.file){Cn.next=4;break}er=$e.file,Cn.next=19;break;case 4:if(typeof $e.fileInput!="string"){Cn.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((rr=document.getElementById($e.fileInput))&&rr.files&&rr.files[0])){Cn.next=11;break}er=rr.files[0],Cn.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Cn.next=19;break;case 14:if(!($e.fileInput&&$e.fileInput.files&&$e.fileInput.files[0])){Cn.next=18;break}er=$e.fileInput.files[0],Cn.next=19;break;case 18:throw new Error("Can not get file from fileInput "+$e.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Cn.next=21;break}throw new Error("dont get s3 policy");case 21:return fr={accessKeyId:Ce.accessKeyId,secretAccessKey:Ce.secretAccessKey,sessionToken:Ce.sessionToken,region:Ce.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},kr=this.s3,(Er=new kr).config.update(fr),Rr=decodeURIComponent(Ce.bucket),$r=decodeURIComponent(Ce.objectName),Gr={Bucket:Rr,Key:$r,Body:Hr=er,Metadata:{token:Ce.token},ContentType:Hr.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Gr),(vn=Er.upload(Gr)).on("httpUploadProgress",function(Kn){var Qn=Fo((Kn.loaded/Kn.total).toFixed(2));$e.onUploadProgress&&$e.onUploadProgress({total:Kn.total,loaded:Kn.loaded,percentage:Qn,percentageText:Math.round(100*Qn)+"%"})}),Cn.abrupt("return",new ka(function(Kn,Qn){var Mo=new Date().getTime();vn.send(function(No,Ko){var Ln;if(No&&No.code==="RequestAbortedError")bn.logger.error("uploadFile:","api::s3:upload file abort",No),Qn(new Hi(No.message,No,10499));else if(No){bn.logger.error("uploadFile:","api::s3:upload file failed",No),bn.core.reporter.reportTraceStart("exceptions",{user_id:bn.core.options.account,trace_id:(Ln=bn.core.clientSocket.socket)===null||Ln===void 0?void 0:Ln.sessionId,start_time:Mo,action:1,exception_service:4}),bn.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof No.status=="number"?No.status:typeof No.code=="number"?No.code:0,description:No.message||""+No.code,operation_type:1,target:va({bucket:Rr,object:$r})},{asyncParams:Vo.net.getNetworkStatus()}),bn.core.reporter.reportTraceEnd("exceptions",1);try{bn._addCircuitTimer()}catch(ro){Qn(new Vu("upload file error",ro,bn.curProvider,bn.mixStorePolicy,$e.file||$e.filePath))}Kn(bn._uploadFile($e))}else{var Wr=bn.mixStorePolicy.s3Policy.cdnSchema;Wr=(Wr=Wr.replace("{cdnDomain}",bn.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",Ko.Key),Kn({size:Hr.size,name:Hr.name,url:Ce.shortUrl?Ce.shortUrl:Wr,ext:Hr.name.split(".")[1]||"unknown"})}}),$e.onUploadStart&&$e.onUploadStart(vn)}));case 33:case"end":return Cn.stop()}},Lt,this)}))},he.getPrivateUrl=function($e){var Ce;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test($e))return this.logger.error("illegal file url:"+$e),"";var Lt=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec($e);Lt[0];var er=Lt[1];Lt[2];var rr=Lt[3];Lt[4];var fr=Lt[5];if(Lt[6],Lt[7],(Ce=this.grayConfig)===null||Ce===void 0?void 0:Ce.mixStoreEnable){var kr=this._getUrlType($e);return kr===qo.s3&&this.mixStorePolicy.s3Policy&&($e=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",fr)),kr===qo.nos&&this.mixStorePolicy.nosPolicy&&($e=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",fr)),$e}var Er=this.config,Rr=Er.downloadUrl,$r=Er.downloadHostList,Hr=Er.nosCdnEnable,Gr=this.config.cdn.cdnDomain,vn=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",bn=decodeURIComponent(fr),In=Ja(bn).call(bn,vn);if(Gr&&In>-1&&Hr)return""+er+Gr+"/"+Pa(bn).call(bn,In);if(mi($r).call($r,rr)&&mi(fr).call(fr,"/")){var Cn=Ja(fr).call(fr,"/"),Kn=fr.substring(0,Cn),Qn=fr.substring(Cn+1);return Rr.replace("{bucket}",Kn).replace("{object}",Qn)}var Mo=Ss($r).call($r,function(Ko){return typeof rr=="string"&&mi(rr).call(rr,Ko)})[0],No=Mo?rr.replace(Mo,"").replace(/\W/g,""):null;return No?Rr.replace("{bucket}",No).replace("{object}",fr):$e},he.getOriginUrl=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:$e}});case 2:return Lt=rr.sent,rr.abrupt("return",Lt.content.nosSafeUrlTag.originUrl);case 4:case"end":return rr.stop()}},Ce,this)}))},he.getFileToken=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr,Er=this;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(Xn({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},$e),Lt=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,er=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,Lt!==String(Bn.dontNeed)||er!==String(Bn.dontNeed)){$r.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if($e.type!==Bn.time){$r.next=17;break}if(!(Lt&&Ja(Lt).call(Lt,String(Bn.time))>=0||er&&Ja(er).call(er,String(Bn.time))>0)){$r.next=13;break}return $r.abrupt("return",this.getFileAuthToken($e));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:$r.next=33;break;case 17:if($e.urls&&$e.urls.length){$r.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(fr=[],kr=[],So(rr=$e.urls).call(rr,function(Hr){var Gr=Er._getUrlType(Hr);Gr===qo.nos&&kr.push(Hr),Gr===qo.s3&&fr.push(Hr)}),(!er||fr.length!==0&&Ja(er).call(er,String(Bn.urls))<0)&&(this.logger.warn("s3 url don't support url token"),fr=[]),(!Lt||kr.length!==0&&Ja(Lt).call(Lt,String(Bn.urls))<0)&&(this.logger.warn("nos url don't support url token"),kr=[]),fr.length!==0||kr.length!==0){$r.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(fr.length!==0&&kr.length!==0){$r.next=33;break}return $e.urls=va($e.urls),$r.abrupt("return",this.getFileAuthToken($e));case 33:case"end":return $r.stop()}},Ce,this)}))},he.getFileAuthToken=function($e){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:$e});case 2:return Lt=rr.sent,rr.abrupt("return",Lt.content.mixStoreAuthTokenResTag);case 4:case"end":return rr.stop()}},Ce,this)}))},he._getUrlType=function($e){var Ce,Lt;return this.mixStorePolicy.nosPolicy&&gm(Ce=this.mixStorePolicy.nosPolicy.dlcdns).call(Ce,function(er){return Ja($e).call($e,er)>=0})?qo.nos:this.mixStorePolicy.s3Policy&&gm(Lt=this.mixStorePolicy.s3Policy.dlcdns).call(Lt,function(er){return Ja($e).call($e,er)>=0})?qo.s3:null},he._addCircuitTimer=function(){var $e=this,Ce=this.mixStorePolicy.providers,Lt=Ce[(Ja(Ce).call(Ce,String(this.curProvider))+1)%Ce.length];if(Lt===Ce[0])throw new Error("uploadFile all policy fail");var er=Bs(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(er&&er.retryNext&&Lt&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+Lt),this.curProvider=jo(Lt),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var rr=this.mixStorePolicy[this.curProvider===qo.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!rr||rr===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){$e.logger.log("uploadFile:: upload policy will change,now policy:"+$e.curProvider+" nextProvider:"+jo($e.mixStorePolicy.providers[0])),$e.curProvider=jo($e.mixStorePolicy.providers[0]),$e.core.timerManager.deleteTimer($e.circuitTimer)},1e3*rr)}},he.process=function($e){return $e.error&&!$e.error.ignore?ka.reject($e.error):ka.resolve($e)},_e}(),Go=hs({none:0,normal:1,all:3}),is=hs({normal:0,advanced:1}),Uo=hs({normal:0,owner:1,manager:2}),Wo={noVerify:0,needVerify:1,rejectAll:2},xa=hs(Wo),Ki={needVerify:0,noVerify:1},Jo=hs(Ki),Ai={manager:0,all:1},fs=hs(Ai),Po={manager:0,all:1},Ia=hs(Po),go={manager:0,all:1},sa=hs(go);function ls(_e){var he,Ue=["teamId"],$e=["level","memberNum","memberUpdateTime","createTime","updateTime"],Ce=["valid","validToCurrentUser","mute"],Lt={type:is,muteType:Go,joinMode:xa,beInviteMode:Jo,inviteMode:fs,updateTeamMode:Ia,updateExtMode:sa};_e.bits;var er=ea(_e,["bits"]);return So(Ue).call(Ue,function(rr){er[rr]&&(er[rr]=er[rr].toString())}),So($e).call($e,function(rr){er[rr]!==void 0&&(er[rr]=jo(er[rr]))}),So(Ce).call(Ce,function(rr){er[rr]!==void 0&&(er[rr]=jo(er[rr])===1)}),So(he=fa(Lt)).call(he,function(rr){er[rr]!==void 0&&(er[rr]=Lt[rr][er[rr]]||er[rr])}),er}function yo(_e){return _e&&_e.length>0?Lo(_e).call(_e,function(he){return ls(he)}):[]}function _1(_e){var he,Ue=Gn({},_e),$e=["avatar","name","intro","announcement","ext"],Ce={joinMode:Wo,beInviteMode:Ki,inviteMode:Ai,updateTeamMode:Po,updateExtMode:go};return So($e).call($e,function(Lt){Ue[Lt]!==void 0&&(Ue[Lt]=Ue[Lt].toString())}),So(he=fa(Ce)).call(he,function(Lt){Ue[Lt]!==void 0&&(Ue[Lt]=Ce[Lt][Ue[Lt]])}),Ue}function Yv(_e){var he=["teamId","ext","account","nickInTeam"],Ue={};return _e.bitConfigMask!==void 0&&(Ue.bits=jo(_e.bitConfigMask)),So(he).call(he,function($e){_e[$e]&&(Ue[$e]=_e[$e].toString())}),Object.prototype.hasOwnProperty.call(_e,"nickInTeam")&&(Ue.nickInTeam=_e.nickInTeam),Ue}function ys(_e){var he,Ue=["teamId"],$e=["joinTime","updateTime","bitConfigMask"],Ce=["active","valid","mute"],Lt={type:Uo},er=_e.bits,rr=ea(_e,["bits"]);return er!==void 0&&(rr.muteTeam=jo(er)===1,rr.bitConfigMask=er),rr.id=rr.teamId+"-"+rr.account,So(Ue).call(Ue,function(fr){rr[fr]&&(rr[fr]=rr[fr].toString())}),So($e).call($e,function(fr){rr[fr]!==void 0&&(rr[fr]=jo(rr[fr]))}),So(Ce).call(Ce,function(fr){rr[fr]!==void 0&&(rr[fr]=jo(rr[fr])===1)}),So(he=fa(Lt)).call(he,function(fr){rr[fr]!==void 0&&(rr[fr]=Lt[fr][rr[fr]]||rr[fr])}),rr}function $s(_e){return _e&&_e.length>0?Lo(_e).call(_e,function(he){return ys(he)}):[]}function Xa(_e,he,Ue){return Ue===void 0&&(Ue="normal"),{id:_e.teamId+"-"+he,teamId:_e.teamId,account:he,type:Ue,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:_e.memberUpdateTime,updateTime:_e.memberUpdateTime,active:!0,valid:!0}}function Fa(_e,he,Ue){return Ue===void 0&&(Ue="normal"),he&&he.length>0?Lo(he).call(he,function($e){return Xa(_e,$e,Ue)}):[]}var Ka=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.notifyAddSuperTeamMembers=function($e,Ce){this.core.emit("addSuperTeamMembers",{team:$e,accounts:Ce,members:Fa($e,Ce)})},he.notifyUpdateSuperTeamManagers=function($e,Ce,Lt,er){this.core.emit("updateSuperTeamManagers",{team:{teamId:$e,memberUpdateTime:er},accounts:Ce,isManager:Lt,members:Lo(Ce).call(Ce,function(rr){return{id:$e+"-"+rr,type:Lt?"manager":"normal",account:rr,updateTime:er}})})},he.notifyRemoveSuperTeamMembers=function($e,Ce){this.core.emit("removeSuperTeamMembers",{team:$e,accounts:Ce})},he.notifyTransferSuperTeam=function($e,Ce,Lt){this.core.emit("transferSuperTeam",{team:$e,from:{id:$e.teamId+"-"+Ce,account:Ce,type:"normal",updateTime:$e.memberUpdateTime},to:{id:$e.teamId+"-"+Lt,account:Lt,type:"owner",updateTime:$e.memberUpdateTime}})},he.notifyUpdateSuperTeamMembersMute=function($e,Ce,Lt){this.core.emit("updateSuperTeamMembersMute",{team:$e,accounts:Ce,members:Lo(Ce).call(Ce,function(er){return{id:$e.teamId+"-"+er,account:er,teamId:$e.teamId,mute:Lt,updateTime:$e.memberUpdateTime}}),mute:Lt})},_e}(),Up={"21_5":"addSuperTeamMembers","21_6":"removeSuperTeamMembers","21_7":"leaveSuperTeam","21_8":"updateSuperTeamInfo","21_9":"getSuperTeamInfo","21_12":"getSuperTeams","21_15":"getSuperTeamMembers","21_10":"updateMySuperTeamMemberInfo","21_20":"applySuperTeam","21_21":"passSuperTeamApply","21_22":"rejectSuperTeamApply","21_23":"acceptSuperTeamInvite","21_24":"rejectSuperTeamInvite","21_26":"addSuperTeamManagers","21_27":"removeSuperTeamManagers","21_28":"muteSuperTeam","21_29":"muteSuperTeamMembers","21_30":"updateSuperTeamMemberNick","21_31":"transferSuperTeam","21_33":"getSuperTeamMembersByAccounts","21_34":"queryMuteSuperTeamMembers","21_101":"syncCreateSuperTeam","21_109":"syncSuperTeams","21_110":"syncUpdateSuperTeamMember","21_111":"syncMySuperTeamMembers"},Xv={superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,updateTime:11,ext:12,mute:13,invitorAccid:14,joinTime:15}},ws=zs(Xv),Zv={getSuperTeamInfo:{sid:21,cid:9,service:"superTeam",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"superTeam",reflectMapper:ws.superTeam}]},getSuperTeams:{sid:21,cid:12,service:"superTeam",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"superTeams",reflectMapper:ws.superTeam},{type:"Number",name:"timetag"}]},updateSuperTeamInfo:{sid:21,cid:8,service:"superTeam",params:[{type:"Property",name:"superTeam",reflectMapper:Xv.superTeam}],response:[{type:"Number",name:"time"}]},addSuperTeamMembers:{sid:21,cid:5,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"time"}]},removeSuperTeamMembers:{sid:21,cid:6,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},addSuperTeamManagers:{sid:21,cid:26,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:21,cid:27,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applySuperTeam:{sid:21,cid:20,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"superTeam",reflectMapper:ws.superTeam}]},transferSuperTeam:{sid:21,cid:31,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},muteSuperTeam:{sid:21,cid:28,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},muteSuperTeamMembers:{sid:21,cid:29,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateSuperTeamMemberNick:{sid:21,cid:30,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Xv.superTeamMember}]},updateMySuperTeamMemberInfo:{sid:21,cid:10,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Xv.superTeamMember}]},getSuperTeamMembersByAccounts:{sid:21,cid:33,service:"superTeam",params:[{type:"StrArray",name:"memberIds"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:ws.superTeamMember}]},getSuperTeamMembers:{sid:21,cid:15,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:ws.superTeamMember}]},queryMuteSuperTeamMembers:{sid:21,cid:34,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:ws.superTeamMember}]},leaveSuperTeam:{sid:21,cid:7,service:"superTeam",params:[{type:"Long",name:"teamId"}]},passSuperTeamApply:{sid:21,cid:21,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:21,cid:22,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:21,cid:23,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:21,cid:24,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncSuperTeams:{sid:21,cid:109,service:"superTeam",response:[{type:"PropertyArray",name:"teams",reflectMapper:ws.superTeam},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},syncCreateSuperTeam:{sid:21,cid:101,service:"superTeam",response:[{type:"Property",name:"superTeam",reflectMapper:ws.superTeam}]},syncUpdateSuperTeamMember:{sid:21,cid:110,service:"superTeam",response:[{type:"Property",name:"teamMember",reflectMapper:ws.superTeamMember}]},syncMySuperTeamMembers:{sid:21,cid:111,ext:"sync",service:"superTeam",response:[{type:"PropertyArray",name:"teamMembers",reflectMapper:ws.superTeamMember},{type:"Number",name:"timetag"}]}},ey=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"superTeam",$e)||this).mySuperTeamMembersMap=new xc,Ce.service=new Ka($e),Ts({cmdMap:Up,cmdConfig:Zv}),Ce.core.eventBus.on("team/onNotification",function(Lt){return Ce.notificationHandler(Lt)}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.destroy=function(){this.mySuperTeamMembersMap.clear()},Ue.mergeMySuperTeamMembers=function(Ce){var Lt=this;So(Ce).call(Ce,function(er){var rr=er.teamId,fr=Lt.mySuperTeamMembersMap.get(rr),kr=Gn({},fr,er);Lt.mySuperTeamMembersMap.set(rr,kr)})},Ue.getSuperTeamInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),kr.next=3,this.core.sendCmd("getSuperTeamInfo",{teamId:Ce.teamId});case 3:return er=kr.sent,rr=er.content.superTeam,kr.abrupt("return",ls(rr));case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.getSuperTeams=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("getSuperTeams",{timetag:0});case 2:return Lt=fr.sent,er=Lt.content.superTeams,fr.abrupt("return",yo(er));case 5:case"end":return fr.stop()}},Ce,this)}))},Ue.updateSuperTeamInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!0,required:!1},announcement:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",allowEmpty:!0,required:!1},ext:{type:"string",allowEmpty:!0,required:!1}},Ce),er=_1(Ce),fr.next=4,this.core.sendCmd("updateSuperTeamInfo",{superTeam:er});case 4:return fr.abrupt("return",ls(er));case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.addSuperTeamMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("addSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,ps:Ce.ps||"",attach:Ce.ext||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.removeSuperTeamMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},Ce),rr.next=3,this.core.sendCmd("removeSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.addSuperTeamManagers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("addSuperTeamManagers",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.removeSuperTeamManagers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("removeSuperTeamManagers",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.applySuperTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),fr.next=3,this.core.sendCmd("applySuperTeam",{teamId:Ce.teamId,ps:Ce.ps||""});case 3:return er=fr.sent,fr.abrupt("return",ls(er.content.superTeam));case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.transferSuperTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("transferSuperTeam",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.muteSuperTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteSuperTeam",{teamId:Ce.teamId,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.muteSuperTeamMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string"},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.updateMemberNick=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0}},Ce),er=Yv({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,account:Ce.account}),kr.next=4,this.core.sendCmd("updateSuperTeamMemberNick",{teamMember:er});case 4:return rr=ys(Gn({updateTime:new Date().getTime()},er)),kr.abrupt("return",rr);case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.updateMyMemberInfo=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},Ce),er=Yv({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,bitConfigMask:Ce.bitConfigMask,ext:Ce.ext}),Er.next=4,this.core.sendCmd("updateMySuperTeamMemberInfo",{teamMember:er});case 4:return rr=ys(Gn({updateTime:new Date().getTime(),account:this.core.account},er)),this.mergeMySuperTeamMembers([rr]),this.core.emit("updateSuperTeamMember",rr),fr=Lc(this.mySuperTeamMembersMap.get(rr.teamId)),this.core.emit("mySuperTeamMembers",[fr]),Er.abrupt("return",rr);case 10:case"end":return Er.stop()}},Lt,this)}))},Ue.getSuperTeamMembersByAccounts=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:20,min:1}},Ce),fr=Lo(rr=Ce.accounts).call(rr,function($r){return Ce.teamId+"|"+$r}),Rr.next=4,this.core.sendCmd("getSuperTeamMembersByAccounts",{memberIds:fr});case 4:return kr=Rr.sent,Rr.abrupt("return",$s((Lt=kr.content)===null||Lt===void 0?void 0:Lt.superTeamMembers));case 6:case"end":return Rr.stop()}},er,this)}))},Ue.getSuperTeamMembers=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,max:1e3,required:!1},reverse:{type:"boolean",required:!1}},Ce),kr.next=3,this.core.sendCmd("getSuperTeamMembers",Gn({joinTime:0,limit:100,reverse:!1},Ce));case 3:return rr=kr.sent,kr.abrupt("return",$s((Lt=rr.content)===null||Lt===void 0?void 0:Lt.superTeamMembers));case 5:case"end":return kr.stop()}},er,this)}))},Ue.queryMuteMembers=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},Ce),kr.next=3,this.core.sendCmd("queryMuteSuperTeamMembers",Gn({limit:100,joinTime:0,reverse:!1},Ce));case 3:return er=kr.sent,rr=er.content,kr.abrupt("return",$s(rr.superTeamMembers));case 6:case"end":return kr.stop()}},Lt,this)}))},Ue.leaveSuperTeam=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("leaveSuperTeam",{teamId:Ce.teamId});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.passSuperTeamApply=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("passSuperTeamApply",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.rejectSuperTeamApply=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectSuperTeamApply",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.acceptSuperTeamInvite=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("acceptSuperTeamInvite",Ce);case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.rejectSuperTeamInvite=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectSuperTeamInvite",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.syncSuperTeamsHandler=function(Ce){var Lt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{superTeams:jo(Lt.timetag)});var er=Lt==null?void 0:Lt.superTeams;if(er&&er.length){var rr=yo(er);this.core.emit("superTeams",rr)}},Ue.syncCreateSuperTeamHandler=function(Ce){var Lt=Ce.content,er=ls(Lt==null?void 0:Lt.superTeam),rr=Xa(er,er.owner,"owner");this.core.emit("createSuperTeam",er,rr)},Ue.syncUpdateSuperTeamMemberHandler=function(Ce){var Lt=Ce.content,er=ys(Lt==null?void 0:Lt.teamMember);er.updateTime||(er.updateTime=new Date().getTime()),this.mergeMySuperTeamMembers([er]),this.core.emit("updateSuperTeamMember",er);var rr=Lc(this.mySuperTeamMembersMap.get(er.teamId));this.core.emit("mySuperTeamMembers",[rr])},Ue.syncMySuperTeamMembersHandler=function(Ce){var Lt,er=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{mySuperTeamMembers:jo(er.timetag)});var rr=er==null?void 0:Lo(Lt=er.teamMembers).call(Lt,function(fr){return ys(fr)});this.mergeMySuperTeamMembers(rr),this.core.emit("mySuperTeamMembers",Lc(rr))},Ue.notificationHandler=function(Ce){var Lt=Ce.attach,er=Ce.scene,rr=Ce.from,fr=Ce.to,kr=Ce.time,Er=Ce.idServer,Rr=Ce.idClient,$r=Lt.team,Hr=Lt.account,Gr=Lt.accounts,vn=Lt.type;if(er==="superTeam")switch(this.core.options.debugLevel==="debug"?this.logger.debug("superTeam::recvNotification",Er,Rr,Lt):this.logger.log("superTeam::recvNotification",Er,Rr,fr,vn,Hr,Gr),vn){case"updateSuperTeam":$r.updateTime=kr,this.core.emit("updateSuperTeam",$r);break;case"addSuperTeamMembers":this.service.notifyAddSuperTeamMembers($r,Gr);break;case"acceptSuperTeamInvite":this.service.notifyAddSuperTeamMembers($r,[rr]);break;case"passSuperTeamApply":this.service.notifyAddSuperTeamMembers($r,[Hr]);break;case"addSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(fr,Gr,!0,kr);break;case"removeSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(fr,Gr,!1,kr);break;case"removeSuperTeamMembers":this.service.notifyRemoveSuperTeamMembers($r,Gr);break;case"leaveSuperTeam":this.service.notifyRemoveSuperTeamMembers($r,[rr]);break;case"dismissSuperTeam":this.core.emit("dismissSuperTeam",{teamId:fr});break;case"transferSuperTeam":this.service.notifyTransferSuperTeam($r,rr,Hr);break;case"updateSuperTeamMembersMute":this.service.notifyUpdateSuperTeamMembersMute($r,Gr,Lt.mute)}},he}(Ls),ty={"13_1":"getChatroomAddress","24_1":"getQChatAddress"},PM={getChatroomAddress:{sid:13,cid:1,service:"plugin",params:[{type:"Long",name:"chatroomId"},{type:"Boolean",name:"isWeixinApp"},{type:"Number",name:"ipType"}],response:[{type:"StrArray",name:"address"}]},getQChatAddress:{sid:24,cid:1,service:"plugin",params:[{type:"Property",name:"getQChatAddressTag",reflectMapper:{ipType:1}}],response:[{type:"StrArray",name:"address"}]}},AM=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"plugin",$e)||this).core=$e,Ts({cmdMap:ty,cmdConfig:PM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.getChatroomAddress=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({chatroomId:{type:"string",allowEmpty:!1},ipType:{type:"number",required:!1}},Ce),fr.next=3,this.core.sendCmd("getChatroomAddress",{chatroomId:Ce.chatroomId,isWeixinApp:Vo.platform==="WXAPP",ipType:Ce.ipType||0});case 3:return er=fr.sent,fr.abrupt("return",er.content.address);case 5:case"end":return fr.stop()}},Lt,this)}))},Ue.getQChatAddress=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({ipType:{type:"number",required:!1}},Ce),fr.next=3,this.core.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:(Ce==null?void 0:Ce.ipType)||0}});case 3:return er=fr.sent,fr.abrupt("return",er.content.address);case 5:case"end":return fr.stop()}},Lt,this)}))},he}(Ls),NM={"7_19":"nimQueryCloudSessionList","7_20":"nimQueryCloudSession","7_21":"nimUpdateCloudSession","7_22":"nimDeleteCloudSessionList","7_121":"nimMultiSyncUpdateCloudSession"},ry={sessionReqTag:{minTimestamp:1,maxTimestamp:2,includedLastMsg:3,limit:4,hasMore:5},sessionTag:{sessionId:1,updateTime:2,ext:3,lastMsg:4,lastMsgType:5}},x1=zs(ry),OM={nimQueryCloudSessionList:{sid:7,cid:19,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:ry.sessionReqTag}],response:[{type:"Property",name:"tag",reflectMapper:x1.sessionReqTag},{type:"PropertyArray",name:"sessions",reflectMapper:x1.sessionTag}]},nimQueryCloudSession:{sid:7,cid:20,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:ry.sessionTag}],response:[{type:"Property",name:"session",reflectMapper:x1.sessionTag}]},nimUpdateCloudSession:{sid:7,cid:21,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:ry.sessionTag}]},nimDeleteCloudSessionList:{sid:7,cid:22,service:"cloudSession",params:[{type:"PropertyArray",name:"tags",reflectMapper:ry.sessionTag}]},nimMultiSyncUpdateCloudSession:{sid:7,cid:121,service:"cloudSession",response:[{type:"Property",name:"session",reflectMapper:x1.sessionTag}]}},RM={sessionId:{type:"string"},updateTime:{type:"number"},ext:{type:"string"},lastMsg:{type:"object"},lastMsgType:{type:"number"}};function CM(_e,he,Ue){var $e=oi(RM,_e),Ce=wi($e.sessionId,"|"),Lt=Ce.accid,er=Ce.scene;if($e.sessionId=er+"-"+Lt,$e.lastMsg){var rr=$e.lastMsgType===1;$e.lastMsgInfo=rr?{isLastMsgRecalled:rr,revokedMsg:jp(il($e.lastMsg,pu.sysMsg),Ue)}:{isLastMsgRecalled:rr,lastMsg:Ii(il($e.lastMsg,ks.msg),{account:he})}}return delete $e.lastMsg,delete $e.lastMsgType,$e}function BM(_e,he,Ue){return _e&&_e.length>0?Lo(_e).call(_e,function($e){return CM($e,he,Ue)}):[]}var xM,_l,ny,LM=function(_e){function he($e){var Ce;return Ce=_e.call(this,"cloudSession",$e)||this,Ts({cmdMap:NM,cmdConfig:OM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.queryCloudSessionList=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({minTimestamp:{type:"number",min:0,required:!1},maxTimestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},includedLastMsg:{type:"boolean",required:!1}},Ce),(rr=Gn({limit:100,includedLastMsg:!0},Ce)).includedLastMsg=Jb.boolean(Ce,"includedLastMsg"),$r.next=5,this.core.sendCmd("nimQueryCloudSessionList",{tag:rr});case 5:return fr=$r.sent,kr=((Lt=fr.content)===null||Lt===void 0?void 0:Lt.tag)||{},Er=fr.content.sessions,$r.abrupt("return",{hasMore:+kr.hasMore>0,sessionList:BM(Er,this.core.account,this.logger)});case 9:case"end":return $r.stop()}},er,this)}))},Ue.queryCloudSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({sessionId:{type:"string",allowEmpty:!1}},Ce),er=wi(Ce.sessionId,"-"),rr=er.accid,fr=er.scene,Rr.next=4,this.core.sendCmd("nimQueryCloudSession",{tag:{sessionId:fr==="superTeam"?"super_team|"+rr:fr+"|"+rr}});case 4:return kr=Rr.sent,Rr.abrupt("return",CM(kr.content.session,this.core.account,this.logger));case 6:case"end":return Rr.stop()}},Lt,this)}))},Ue.updateCloudSession=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({sessionId:{type:"string",allowEmpty:!1},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),er=wi(Ce.sessionId,"-"),rr=er.accid,fr=er.scene,Er.next=4,this.core.sendCmd("nimUpdateCloudSession",{tag:{sessionId:fr==="superTeam"?"super_team|"+rr:fr+"|"+rr,ext:Ce.ext}});case 4:case"end":return Er.stop()}},Lt,this)}))},Ue.deleteCloudSessionList=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({sessionIdList:{type:"array",itemType:"string"}},Ce),rr=Lo(er=Ce.sessionIdList).call(er,function(Er){var Rr=wi(Er,"-"),$r=Rr.accid,Hr=Rr.scene;return{sessionId:Hr==="superTeam"?"super_team|"+$r:Hr+"|"+$r}}),kr.next=4,this.core.sendCmd("nimDeleteCloudSessionList",{tags:rr});case 4:case"end":return kr.stop()}},Lt,this)}))},Ue.nimMultiSyncUpdateCloudSessionHandler=function(Ce){var Lt=CM(Ce.content.session,this.core.account,this.logger);this.core.emit("multiSyncUpdateCloudSession",Lt)},he}(Ls);(function(_e){_e[_e.audio=1]="audio",_e[_e.video=2]="video",_e[_e.custom=3]="custom"})(xM||(xM={})),function(_e){_e[_e.kClose=1]="kClose",_e[_e.kJoin=2]="kJoin",_e[_e.kInvite=3]="kInvite",_e[_e.kCancelInvite=4]="kCancelInvite",_e[_e.kReject=5]="kReject",_e[_e.kAccept=6]="kAccept",_e[_e.kLeave=7]="kLeave",_e[_e.kCustom=8]="kCustom"}(_l||(_l={})),function(_e){_e[_e.kDefault=0]="kDefault",_e[_e.kLeave=1]="kLeave",_e[_e.kSelfSync=3]="kSelfSync"}(ny||(ny={}));var MM={needPush:{type:"boolean",required:!1},pushTitle:{type:"string",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needPushBadge:{type:"boolean",required:!1}},FM={"15_1":"signalingCreate","15_2":"signalingDelay","15_3":"signalingClose","15_4":"signalingJoin","15_5":"signalingLeave","15_6":"signalingInvite","15_7":"signalingCancelInvite","15_8":"signalingReject","15_9":"signalingAccept","15_10":"signalingSendCustomCommand","15_11":"signalingRecvNotification","15_12":"signalingMultiSyncNotification","15_13":"signalingSyncNotification","15_14":"singalingSyncChannels","15_15":"signalingQueryInfo","15_16":"signalingCallEx","15_17":"signalingJoinAndAccept"},Ni={avSignalTag:Gn({type:1,name:2,channelId:3,createTime:4,expireTime:5,creatorAccid:6,ext:7,invalid:8,fromAccid:10,toAccid:11,requestId:12,members:18,attach:19,attachExt:20,needOffline:21,msgId:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},{needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needPushBadge:17})},Fc=zs(Ni),$M={signalingCreate:{sid:15,cid:1,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingDelay:{sid:15,cid:2,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingClose:{sid:15,cid:3,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingJoin:{sid:15,cid:4,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingLeave:{sid:15,cid:5,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}]},signalingInvite:{sid:15,cid:6,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}]},signalingCancelInvite:{sid:15,cid:7,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}]},signalingReject:{sid:15,cid:8,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}]},signalingAccept:{sid:15,cid:9,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}]},signalingSendCustomCommand:{sid:15,cid:10,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}]},signalingRecvNotification:{sid:15,cid:11,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingMultiSyncNotification:{sid:15,cid:12,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingSyncNotification:{sid:15,cid:13,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:Fc.avSignalTag}]},singalingSyncChannels:{sid:15,cid:14,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:Fc.avSignalTag}]},signalingQueryInfo:{sid:15,cid:15,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingCallEx:{sid:15,cid:16,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingJoinAndAccept:{sid:15,cid:17,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Ni.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingBatchMarkRead:{sid:4,cid:5,hasPacketResponse:!1,service:"signaling",params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]}},I1={type:{type:"number"},createTime:{type:"number"},expireTime:{type:"number"},invalid:{type:"boolean"},pushInfo:MM,pluginSetting:{nertcInfo:{nertcChannelName:{type:"string"},nertcTokenTtl:{type:"number"},nertcToken:{type:"string"},nertcJoinRoomQueryParamMap:{type:"string"},callStatus:{type:"number"}}},attach:{type:"object"},members:{type:"object"},needOffline:{type:"boolean"},uid:{type:"number"},time:{type:"number"}};function Vp(_e){var he,Ue=oi(I1,_e),$e=[];return Ue.members&&Ue.members.length>0&&($e=Lo(he=Ue.members).call(he,function(Ce){return function(er){return oi(I1,il(er,{1:"accid",2:"uid",3:"createTime",4:"expireTime"}))}(Ce)}),delete Ue.members),$e.length>0?{channelInfo:Ue,memberList:$e}:{channelInfo:Ue}}function $c(_e){return am(I1,_e)}var jM=function(_e){function he($e){var Ce;return(Ce=_e.call(this)||this).timer=0,Ce.pollingInterval=12e4,Ce.name="signaling",Ce.logger=$e.logger,Ce.core=$e,Ce.channels={},Ts({cmdMap:FM,cmdConfig:$M}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.callEx=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({type:{type:"number"},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:MM},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},Ce),$r.next=3,this.core.sendCmd("signalingCallEx",{tag:$c(Ce)});case 3:return rr=$r.sent,fr=((Lt=rr.content)===null||Lt===void 0?void 0:Lt.data)||{},kr=Vp(fr),this.channels[kr.channelInfo.channelId]=Lc(kr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(oa(Er=this.aotoDelay).call(Er,this),this.pollingInterval,-1)),$r.abrupt("return",kr);case 9:case"end":return $r.stop()}},er,this)}))},Ue.joinAndAccept=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er,Rr,$r;return Kr.wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},uid:{type:"number",required:!1},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},Ce),rr=Ce.fromAccid,(fr=ea(Ce,["fromAccid"])).toAccid=rr,Gr.next=5,this.core.sendCmd("signalingJoinAndAccept",{tag:$c(fr)});case 5:return kr=Gr.sent,Er=((Lt=kr.content)===null||Lt===void 0?void 0:Lt.data)||{},Rr=Vp(Er),this.channels[Rr.channelInfo.channelId]=Lc(Rr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(oa($r=this.aotoDelay).call($r,this),this.pollingInterval,-1)),Gr.abrupt("return",Rr);case 11:case"end":return Gr.stop()}},er,this)}))},Ue.create=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({type:{type:"number"},ext:{type:"string",required:!1}},Ce),Er.next=3,this.core.sendCmd("signalingCreate",{tag:$c(Ce)});case 3:return rr=Er.sent,fr=((Lt=rr.content)===null||Lt===void 0?void 0:Lt.data)||{},Er.abrupt("return",Vp(fr));case 6:case"end":return Er.stop()}},er,this)}))},Ue.close=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingClose",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.queryInfo=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr;return Kr.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Xn({name:{type:"string",allowEmpty:!1}},Ce),Er.next=3,this.core.sendCmd("signalingQueryInfo",{tag:Ce});case 3:return rr=Er.sent,fr=((Lt=rr.content)===null||Lt===void 0?void 0:Lt.data)||{},Er.abrupt("return",Vp(fr));case 6:case"end":return Er.stop()}},er,this)}))},Ue.join=function(Ce){var Lt;return Vn(this,void 0,void 0,Kr.mark(function er(){var rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},uid:{type:"number",min:0,required:!1},needOffline:{type:"boolean",required:!1}},Ce),$r.next=3,this.core.sendCmd("signalingJoin",{tag:$c(Ce)});case 3:return rr=$r.sent,fr=((Lt=rr.content)===null||Lt===void 0?void 0:Lt.data)||{},kr=Vp(fr),this.channels[kr.channelInfo.channelId]=Lc(kr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(oa(Er=this.aotoDelay).call(Er,this),this.pollingInterval,-1)),$r.abrupt("return",kr);case 9:case"end":return $r.stop()}},er,this)}))},Ue.aotoDelay=function(){return Vn(this,void 0,void 0,Kr.mark(function Ce(){var Lt,er,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if((Lt=fa(this.channels)).length!==0){Rr.next=4;break}return this.timer&&this.core.timerManager.deleteTimer(this.timer),Rr.abrupt("return");case 4:this.logger.log("signling:autoDelay",Lt),er=0;case 6:if(!(er<Lt.length)){Rr.next=23;break}return rr=Lt[er],Rr.prev=8,Rr.next=11,this.core.sendCmd("signalingDelay",{tag:{channelId:rr}});case 11:fr=Rr.sent,kr=Vp(fr.content.data),this.channels[rr]=kr.channelInfo,Rr.next=20;break;case 16:Rr.prev=16,Rr.t0=Rr.catch(8),this.logger.warn("signling:autoDelay "+rr+" failed",Rr.t0),delete this.channels[rr];case 20:er++,Rr.next=6;break;case 23:case"end":return Rr.stop()}},Ce,this,[[8,16]])}))},Ue.leave=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingLeave",{tag:$c(Ce)});case 3:delete this.channels[Ce.channelId];case 4:case"end":return rr.stop()}},Lt,this)}))},Ue.invite=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:MM}},Ce),rr.next=3,this.core.sendCmd("signalingInvite",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.cancelInvite=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingCancelInvite",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.reject=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),er=Ce.fromAccid,(rr=ea(Ce,["fromAccid"])).toAccid=er,kr.next=5,this.core.sendCmd("signalingReject",{tag:$c(rr)});case 5:case"end":return kr.stop()}},Lt,this)}))},Ue.accept=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){var er,rr,fr,kr,Er;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},autoJoin:{type:"boolean",required:!1},uid:{type:"number",min:0,required:!1},joinAttachExt:{type:"string",required:!1}},Ce),er=Ce.autoJoin,rr=Ce.joinAttachExt,fr=Ce.fromAccid,(kr=ea(Ce,["autoJoin","joinAttachExt","fromAccid"])).toAccid=fr,$r.next=5,this.core.sendCmd("signalingAccept",{tag:$c(kr)});case 5:if(this.logger.log("Signaling:accept, accept success, autoJoin "+Ce.autoJoin),!er){$r.next=10;break}return Er={channelId:Ce.channelId,needOffline:Ce.needOffline,attachExt:rr,uid:Ce.uid},$r.next=10,this.join(Er);case 10:case"end":return $r.stop()}},Lt,this)}))},Ue.sendCustomCommand=function(Ce){return Vn(this,void 0,void 0,Kr.mark(function Lt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},attachExt:{type:"string",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingSendCustomCommand",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},Lt,this)}))},Ue.signalingRecvNotificationHandler=function(Ce){var Lt=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;Ce.content.data.msgId=Lt,this.doNotify(Ce.content.data),Lt&&jo(Lt)&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:[Lt]})},Ue.signalingMultiSyncNotificationHandler=function(Ce){this.doNotify(Ce.content.data,ny.kSelfSync)},Ue.doNotify=function(Ce,Lt){Lt===void 0&&(Lt=ny.kDefault);var er=function(bn,In){In===void 0&&(In=ny.kDefault);var Cn=oi(I1,bn),Kn=Cn.attach,Qn=Cn.attachExt,Mo=Cn.time,No=Cn.msgId;Cn.fromAccid,Cn.toAccid,Cn.members,Cn.requestId,Cn.pushInfo;var Ko=ea(Cn,["attach","attachExt","time","msgId","fromAccid","toAccid","members","requestId","pushInfo"]);if(Kn.type===2)try{Cn.member={accid:Cn.attach.member[1],uid:Number(Cn.attach.member[2]),createTime:Number(Cn.attach.member[3]),expireTime:Number(Cn.attach.member[4])}}catch{delete Cn.member}var Ln=Kn.type;return delete Cn.attach,{metaData:{eventType:Ln,channelInfo:Ko,feature:In,ext:Qn||"",time:Mo,msgId:No},rawData:Cn}}(Ce,Lt),rr=er.metaData,fr=er.rawData,kr=fr.fromAccid,Er=fr.toAccid,Rr=fr.requestId,$r=fr.pushInfo,Hr=fr.msgId,Gr=fr.member;switch(rr.eventType){case _l.kClose:this.emit("signalingClose",{fromAccid:kr,metaData:rr});break;case _l.kJoin:this.emit("signalingJoin",{fromAccid:kr,metaData:rr,member:Gr});break;case _l.kInvite:this.emit("signalingInvite",{fromAccid:kr,toAccid:Er,requestId:Rr,pushInfo:$r,metaData:rr});break;case _l.kCancelInvite:this.emit("signalingCancelInvite",{fromAccid:kr,toAccid:Er,requestId:Rr,metaData:rr});break;case _l.kReject:this.emit("signalingReject",{toAccid:Er,requestId:Rr,metaData:rr});break;case _l.kAccept:this.emit("signalingAccept",{toAccid:Er,requestId:Rr,metaData:rr});break;case _l.kLeave:this.emit("signalingLeave",{fromAccid:kr,metaData:rr});break;case _l.kCustom:this.emit("signalingCustomCommand",{fromAccid:kr,metaData:rr});break;default:this.logger.warn("signaling:notification, no such a type "+rr.eventType,fr)}return Hr},Ue.signalingSyncNotificationHandler=function(Ce){var Lt,er,rr=this;if(Ce.content.datas&&Ce.content.datas.length>0){var fr=Ss(Lt=Lo(er=Ce.content.datas).call(er,function(kr){return rr.doNotify(kr)})).call(Lt,function(kr){return kr});fr.length>0&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:fr})}},Ue.singalingSyncChannelsHandler=function(Ce){var Lt;if(this.timer=0,this.channels={},Ce.content.datas&&Ce.content.datas.length>0){var er=Lo(Lt=Ce.content.datas).call(Lt,function(rr){return Vp(rr)});this.emit("singalingSyncChannels",er)}},Ue.process=function(Ce){var Lt=this[Ce.cmd+"Handler"];return typeof Lt=="function"?(Lt.call(this,Ce),ka.resolve(Ce)):Ce.error&&!Ce.error.ignore?ka.reject(Ce.error):ka.resolve(Ce)},he}(Tf.EventEmitter);return cs.setAdapters(vs),cs.registerService(uv,"auth"),cs.registerService(EC,"msg"),cs.registerService(xv,"misc"),cs.registerService(Ev,"user"),cs.registerService(oM,"session"),cs.registerService(qv,"team"),cs.registerService(Wv,"systemMessage"),cs.registerService(SM,"friend"),cs.registerService(dd,"event"),cs.registerService(pe,"msgExtend"),cs.registerService(xr,"msgLog"),cs.registerService(_n,"passThrough"),cs.registerService(la,"cloudStorage"),cs.registerService(ey,"superTeam"),cs.registerService(Do,"sync"),cs.registerService(AM,"plugin"),cs.registerService(LM,"cloudSession"),cs.registerService(jM,"signaling"),cs})})(NIM_BROWSER_SDK);var NIM_BROWSER_SDKExports=NIM_BROWSER_SDK.exports;const NIMSDK=getDefaultExportFromCjs(NIM_BROWSER_SDKExports),elBadge="",elMessage="",_hoisted_1$9={class:"mt10"},_hoisted_2$4={style:{color:"gray","font-size":"small"}},_hoisted_3$4={class:"mt10"},_hoisted_4$4=createBaseVNode("label",null,"当前时间：",-1),_hoisted_5$3={style:{color:"gray"}},_hoisted_6$2={class:"mt10"},_hoisted_7$1=createBaseVNode("label",null,"上次启动：",-1),_hoisted_8$1={style:{color:"gray"}},_hoisted_9={class:"mt10"},_hoisted_10=createBaseVNode("label",null,"运行时长：",-1),_hoisted_11={style:{color:"gray"}},_hoisted_12=createBaseVNode("span",{title:"每分钟更新一次"},"错误日志",-1),_hoisted_13={style:{"margin-top":"-3px"}},_hoisted_14={style:{cursor:"pointer"}},_hoisted_15=["onClick"],_hoisted_16=createBaseVNode("span",{title:"每分钟更新一次"},"数据总览",-1),_hoisted_17=createBaseVNode("label",null,"日志",-1),_hoisted_18={class:"fs14"},_hoisted_19={key:0,class:"fs14"},_hoisted_20={key:1,class:"fs14"},_hoisted_21={class:"fs14"},_hoisted_22=createBaseVNode("label",null,"图片信息",-1),_hoisted_23={class:"fs14"},_hoisted_24={class:"fs14"},_hoisted_25={class:"fs14"},_hoisted_26={key:0},_hoisted_27=createBaseVNode("label",null,"插件信息",-1),_hoisted_28={class:"fs14"},_hoisted_29={class:"fs14"},_hoisted_30={class:"fs14"},_hoisted_31=createBaseVNode("span",{title:"实时更新"},"口袋消息",-1),_hoisted_32={style:{"margin-top":"-3px","margin-left":"-20px"}},_hoisted_33={style:{color:"gray","font-size":"14px"}},_hoisted_34=["onClick"],_hoisted_35={key:1},_hoisted_36={key:2},_hoisted_37=["href"],_hoisted_38=createBaseVNode("div",null,[createBaseVNode("span",null,"1、QQ机器人部署(2选1)："),createBaseVNode("div",{class:"mt5"},[createBaseVNode("a",{href:"https://llonebot.github.io/zh-CN/",target:"_blank"},"LLOneBot"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}},"：配置简单，可视化配置，占用电脑资源较高(>=300m内存)")]),createBaseVNode("div",{class:"mt5"},[createBaseVNode("a",{href:"https://napneko.github.io/zh-CN/",target:"_blank"},"NapCatBot"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}},"：非可视化配置，配置过程相对LLOneBot复杂，占用资源低( <=100m内存) ")])],-1),_hoisted_39=createBaseVNode("div",{class:"mt10"},[createBaseVNode("span",null,"2、配置项说明："),createBaseVNode("a",{href:"https://gitee.com/jaffoo/ParkerBot#配置教程",target:"_blank"},"参照此文档"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}})],-1),_hoisted_40=createBaseVNode("div",{class:"mt10"},[createBaseVNode("span",null,"3、联系作者QQ："),createBaseVNode("span",{style:{color:"blue"}},"1615842006")],-1),_hoisted_41={style:{"margin-top":"-3px","margin-left":"-20px"}},_hoisted_42={style:{cursor:"pointer"}},_hoisted_43=["onClick"],_sfc_main$e=defineComponent({__name:"index",props:{enable:{type:Object,default:{bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},setup(t,{expose:r}){const e=t,n=ref(),g=ref("点击启动"),y=ref(""),i=ref(),k=ref(),L=ref(!1),$=ref("无记录"),V=ref("0小时0分钟"),z=ref(),re=ref(),oe=ref({pic:{total:0,today:0,old:0},plugin:{total:0,using:0,unusing:0},log:{total:0,idol:0,other:0,system:0}}),le=ref(),ue=ref(),ie=ref(),ae=ref(),Fe=ref(),de=ref("help"),Ne=async()=>{var Mr,mr;if(Object.values(e.enable).every(_r=>_r===!1)){ElMessageBox.alert("没有启用任何功能");return}g.value="启动中！",ae.value||ur(),Fe.value||gr(),ze();let wr=await startBot();if(wr.success)ElMessage.success("启动成功"),L.value=!0,g.value="正在运行",localStorage.setItem("lastStart",y.value),$.value=y.value,e.enable.bd&&((mr=(Mr=n.value)==null?void 0:Mr.bd)!=null&&mr.saveAliyunDisk)&&await startAliYunPan();else{let _r=wr.msg??"启动失败：未知错误";ElMessage.error(_r),logApi().addSystem(_r),cr(),g.value="点击启动"}e.enable.kd&&(await jt(),kt())},Ve=()=>{g.value="关闭中！",ElMessageBox.confirm("确定要关闭机器人吗？","温馨提示！",{type:"warning",confirmButtonText:"关闭",cancelButtonText:"我点错了"}).then(async()=>{await startBot(!1),ElMessage.success("关闭成功"),L.value=!1,g.value="点击启动"}).catch(()=>{L.value=!0,g.value="正在运行"})},ze=()=>{le.value&&le.value.destroy(),ue.value&&ue.value.destroy(),ie.value&&ie.value.disconnect()},jt=async()=>{if(ze(),n.value&&n.value.kd)try{le.value=new NIMSDK({appkey:atob(n.value.kd.appKey),account:n.value.kd.account,token:n.value.kd.token}),await le.value.connect(),ue.value=new QChatSDK({appkey:atob(n.value.kd.appKey),account:n.value.kd.account,token:n.value.kd.token,linkAddresses:await le.value.plugin.getQChatAddress({ipType:2})}),ue.value.on("logined",Et),ue.value.on("message",lr),ue.value.on("disconnect",tr),await ue.value.login()}catch(Sr){throw Sr}},kt=()=>{ie.value=new NimChatroomSocket({liveId:n.value.kd.liveRoomId,onMessage:or}),ie.value.init(n.value.kd.appKey)},Et=async function(){var Sr=`口袋已登录。正在进入小偶像${n.value.kd.idolName}的口袋房间。`;if(logApi().addSystem(Sr),ue.value==null)throw"进入口袋房间失败，聊天室未成功实例化";if((await ue.value.qchatServer.subscribeAllChannel({type:1,serverIds:[n.value.kd.serverId]})).failServerIds.length){Sr=`进入小偶像${n.value.kd.idolName}的口袋房间失败。请检查配置后重试，如仍有问题，请联系开发者。`,logApi().addSystem(Sr);return}Sr=`成功进入小偶像${n.value.kd.idolName}的口袋房间。`,logApi().addSystem(Sr)},lr=async function(Sr){var Mr,mr,_r,Nr,Pr,sr;Sr.fromType=1,Sr.ext=JSON.parse(Sr.ext),Sr.channelName=await dr(Sr.channelId),Sr.time=dayjs(Sr.time).format("YYYY-MM-DD HH:mm:ss"),await postMsg({content:JSON.stringify(Sr)});let wr={type:"text",name:Sr.ext.user.nickName,time:Sr.time,avatar:((mr=(Mr=n.value)==null?void 0:Mr.kd)==null?void 0:mr.imgDomain)+Sr.ext.user.avatar,color:"#409eff",channel:Sr.channelName,idol:(Nr=(_r=n.value)==null?void 0:_r.kd)==null?void 0:Nr.idolName,roleId:Sr.ext.user.roleId};Sr.type=="text"?wr.content=Sr.body:Sr.type=="image"?(wr.type="pic",wr.url=(Pr=Sr==null?void 0:Sr.attach)==null?void 0:Pr.url):Sr.type=="video"||Sr.type=="audio"?(wr.type="link",wr.url=(sr=Sr==null?void 0:Sr.attach)==null?void 0:sr.url):wr.content="暂不支持此类型消息，请前往口袋查看。",logApi().add(wr),wr.roleId==3&&cr()},tr=function(...Sr){logApi().addSystem("口袋登录连接状态已断开。")},or=function(Sr,wr){wr.forEach(Mr=>{postMsg({content:JSON.stringify(Mr)},1)})},dr=async function(Sr){if(ue.value==null)return;const wr=await ue.value.qchatChannel.getChannels({channelIds:[`${Sr}`]});return wr?wr[0].name:""},cr=()=>{var wr;let Sr=logApi().getLogs();!Sr||Sr.length<=0||(re.value=Sr.filter(Mr=>Mr.type=="system").splice(0,10).reverse(),(wr=n.value)!=null&&wr.enableModule.kd&&(Sr=Sr.filter(Mr=>Mr.roleId==3),z.value=Sr.slice(0,10).reverse()))},nr=(Sr,wr="错误")=>{ElMessageBox.alert(Sr,wr+"详情")},ur=()=>{ae.value=setInterval(ar,1e3*60)},ar=async()=>{k.value=(await getLogs()).data.reverse();let Sr=(await getFun()).data,wr=await getCache({pageIndex:1,pageSize:9999});oe.value.plugin.total=Sr.length,oe.value.plugin.unusing=Sr.filter(mr=>!mr.status).length,oe.value.plugin.using=Sr.filter(mr=>mr.status).length,oe.value.pic.total=wr.count,oe.value.pic.today=wr.data.filter(mr=>new Date(mr.createDate).getDate()===new Date().getDate()).length,oe.value.pic.old=oe.value.pic.total-oe.value.pic.today;let Mr=logApi().getLogs();Mr&&(oe.value.log.total=Mr.length??0,oe.value.log.idol=Mr.filter(mr=>mr.roleId==3).length,oe.value.log.system=Mr.filter(mr=>mr.type=="system").length,oe.value.log.other=oe.value.log.total-oe.value.log.idol)},gr=()=>{Fe.value=setInterval(pr,1e3)},pr=()=>{var Sr=new Date,wr=Sr.getHours();y.value=Sr.toLocaleString(),wr>=0&&wr<=6&&(i.value="凌晨好"),wr>=7&&wr<=10&&(i.value="上午好"),wr>=11&&wr<=13&&(i.value="中午好"),wr>=14&&wr<=17&&(i.value="下午好"),wr>=18&&wr<=19&&(i.value="傍晚好"),wr>=20&&wr<=23&&(i.value="晚上好");let Mr=localStorage.getItem("lastStart");if(Mr)$.value=Mr;else if($.value=="无记录")V.value="0小时0分钟";else{let Pr=new Date($.value);var mr=Sr.getTime()-Pr.getTime(),_r=Math.floor(mr/(1e3*60*60)),Nr=Math.floor(mr%(1e3*60*60)/(1e3*60));V.value=`${_r}小时${Nr}分钟`}},yr=async()=>{let Sr=await getConfig();n.value=Sr.data};return onMounted(async()=>{await yr(),ar(),pr(),gr(),cr()}),r({refreshConfig:yr}),(Sr,wr)=>{const Mr=ElCol,mr=ElRow,_r=ElCard,Nr=ElIcon,Pr=ElScrollbar,sr=ElDivider,Ir=ElImage;return openBlock(),createBlock(Pr,{style:{height:"calc(100vh - 30px)"}},{default:withCtx(()=>[createVNode(mr,null,{default:withCtx(()=>[createVNode(Mr,{span:12},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",class:"ch250"},{header:withCtx(()=>[createTextVNode(" StarBot ")]),default:withCtx(()=>[createVNode(mr,null,{default:withCtx(()=>[createVNode(Mr,{span:6},{default:withCtx(()=>[L.value?(openBlock(),createElementBlock("img",{key:0,title:"点击关闭",onClick:Ve,src:_imports_0,style:{width:"100px",height:"100px",cursor:"pointer","margin-left":"-17px"}})):(openBlock(),createElementBlock("img",{key:1,title:"点击启动",onClick:Ne,src:_imports_1,style:{width:"100px",height:"100px",cursor:"pointer","margin-left":"-17px"}})),createBaseVNode("div",{style:normalizeStyle({color:L.value?"green":g.value.includes("启动中")?"red":"blue"})},[createBaseVNode("span",null,toDisplayString(g.value),1)],4)]),_:1}),createVNode(Mr,{span:18},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$9,[createBaseVNode("span",_hoisted_2$4,toDisplayString(i.value)+"！生活变的再糟糕，也不妨碍我变得更好！",1)]),createBaseVNode("div",_hoisted_3$4,[_hoisted_4$4,createBaseVNode("span",_hoisted_5$3,toDisplayString(y.value),1)]),createBaseVNode("div",_hoisted_6$2,[_hoisted_7$1,createBaseVNode("span",_hoisted_8$1,toDisplayString($.value),1)]),createBaseVNode("div",_hoisted_9,[_hoisted_10,createBaseVNode("span",_hoisted_11,toDisplayString(L.value?"已运行"+V.value:"未启动"),1)])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Mr,{span:1}),createVNode(Mr,{span:11},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",class:"ch250"},{header:withCtx(()=>[createVNode(mr,null,{default:withCtx(()=>[createVNode(Mr,null,{default:withCtx(()=>[_hoisted_12,createVNode(Nr,{size:18},{default:withCtx(()=>[createVNode(unref(refresh_default),{class:"et5",onClick:wr[0]||(wr[0]=async()=>k.value=(await unref(getLogs)()).data.reverse())})]),_:1})]),_:1})]),_:1})]),default:withCtx(()=>[createVNode(Pr,{height:"180px",style:{"margin-top":"-10px","margin-left":"-20px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_13,[(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,Ar=>(openBlock(),createElementBlock("li",_hoisted_14,[createBaseVNode("span",{onClick:Cr=>nr(Ar.content),title:"点击查看"},toDisplayString(Ar.content.substring(0,20))+"--"+toDisplayString(Ar.time),9,_hoisted_15)]))),256))])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(mr,{style:{"margin-top":"20px"}},{default:withCtx(()=>[createVNode(Mr,{span:24},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",header:"快速预览",class:"chauto"},{default:withCtx(()=>[createVNode(mr,{gutter:15},{default:withCtx(()=>[createVNode(Mr,{span:8},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[_hoisted_16]),default:withCtx(()=>[createBaseVNode("div",null,[_hoisted_17,createBaseVNode("div",null,[createBaseVNode("span",_hoisted_18,"全部:"+toDisplayString(oe.value.log.total),1),createVNode(sr,{direction:"vertical"}),t.enable.kd?(openBlock(),createElementBlock("span",_hoisted_19,"偶像:"+toDisplayString(oe.value.log.idol),1)):(openBlock(),createElementBlock("span",_hoisted_20,"系统:"+toDisplayString(oe.value.log.system),1)),createVNode(sr,{direction:"vertical"}),createBaseVNode("span",_hoisted_21,"其他:"+toDisplayString(oe.value.log.other),1)])]),createVNode(sr),createBaseVNode("div",null,[_hoisted_22,createBaseVNode("div",null,[createBaseVNode("span",_hoisted_23,"全部:"+toDisplayString(oe.value.pic.total),1),createVNode(sr,{direction:"vertical"}),createBaseVNode("span",_hoisted_24,"今日:"+toDisplayString(oe.value.pic.today),1),createVNode(sr,{direction:"vertical"}),createBaseVNode("span",_hoisted_25,"更早:"+toDisplayString(oe.value.pic.old),1)])]),createVNode(sr),t.enable.bot?(openBlock(),createElementBlock("div",_hoisted_26,[_hoisted_27,createBaseVNode("div",null,[createBaseVNode("span",_hoisted_28,"全部:"+toDisplayString(oe.value.plugin.total),1),createVNode(sr,{direction:"vertical"}),createBaseVNode("span",_hoisted_29,"启用:"+toDisplayString(oe.value.plugin.using),1),createVNode(sr,{direction:"vertical"}),createBaseVNode("span",_hoisted_30,"禁用:"+toDisplayString(oe.value.plugin.unusing),1)])])):createCommentVNode("",!0)]),_:1})]),_:1}),t.enable.kd?(openBlock(),createBlock(Mr,{key:0,span:8},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[_hoisted_31]),default:withCtx(()=>[createVNode(Pr,{height:"250px",style:{"margin-top":"-10px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_32,[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.value,Ar=>{var Cr,br;return openBlock(),createElementBlock("li",null,[createBaseVNode("span",null,toDisplayString(Ar.name),1),createBaseVNode("span",_hoisted_33,toDisplayString(Ar.time),1),Ar.type=="text"?(openBlock(),createElementBlock("div",{key:0,onClick:vr=>nr(Ar.content,"口袋消息"),title:"点击查看",style:{color:"skyblue",cursor:"pointer"}},toDisplayString((Cr=Ar.content)==null?void 0:Cr.substring(0,20))+" "+toDisplayString((((br=Ar.content)==null?void 0:br.length)||0)>20?"...":""),9,_hoisted_34)):createCommentVNode("",!0),Ar.type=="pic"?(openBlock(),createElementBlock("div",_hoisted_35,[createVNode(Ir,{src:Ar.url,"preview-src-list":[Ar.url],style:{width:"120px",height:"auto"}},null,8,["src","preview-src-list"])])):createCommentVNode("",!0),Ar.type=="link"?(openBlock(),createElementBlock("div",_hoisted_36,[createBaseVNode("a",{target:"_blank",href:Ar.url},"此消息带链接，点击查看！",8,_hoisted_37)])):createCommentVNode("",!0)])}),256))])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),withDirectives(createVNode(Mr,{span:8},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[createTextVNode("帮助反馈 "),createVNode(Nr,{size:16},{default:withCtx(()=>[createVNode(unref(switch_default),{class:"et2",circle:"",onClick:wr[1]||(wr[1]=()=>de.value="log")})]),_:1})]),default:withCtx(()=>[_hoisted_38,_hoisted_39,_hoisted_40]),_:1})]),_:1},512),[[vShow,de.value=="help"]]),withDirectives(createVNode(Mr,{span:8},{default:withCtx(()=>[createVNode(_r,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[createTextVNode("本地日志 "),createVNode(Nr,{size:16},{default:withCtx(()=>[createVNode(unref(switch_default),{class:"et2",circle:"",onClick:wr[2]||(wr[2]=()=>de.value="help")})]),_:1})]),default:withCtx(()=>[createVNode(Pr,{height:"250px",style:{"margin-top":"-10px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_41,[(openBlock(!0),createElementBlock(Fragment,null,renderList(re.value,Ar=>{var Cr;return openBlock(),createElementBlock("li",_hoisted_42,[createBaseVNode("span",{onClick:br=>nr(Ar.content??"","日志"),title:"点击查看"},toDisplayString((Cr=Ar.content)==null?void 0:Cr.substring(0,20))+"--"+toDisplayString(Ar.time),9,_hoisted_43)])}),256))])]),_:1})]),_:1})]),_:1},512),[[vShow,de.value=="log"]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),index_vue_vue_type_style_index_0_lang="",elAffix="",elButton="",elForm="",elFormItem="",elCheckbox="",_sfc_main$d=defineComponent({__name:"enable",props:{enable:{type:Object,default:{qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},emits:["enable-change"],setup(t,{emit:r}){var n=toRef(t.enable);const g=r;watch(n.value,()=>{g("enable-change",n.value)});const y=i=>{n.value.qq=i};return(i,k)=>{const L=ElCheckbox,$=ElFormItem,V=ElForm;return openBlock(),createBlock(V,{ref:"bdform","label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"启用模块："},{default:withCtx(()=>[createVNode(L,{modelValue:unref(n).bot,"onUpdate:modelValue":k[0]||(k[0]=z=>unref(n).bot=z),label:"QQ&Bot",onChange:y},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).wb,"onUpdate:modelValue":k[1]||(k[1]=z=>unref(n).wb=z),label:"微博"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).bz,"onUpdate:modelValue":k[2]||(k[2]=z=>unref(n).bz=z),label:"B站"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).kd,"onUpdate:modelValue":k[3]||(k[3]=z=>unref(n).kd=z),label:"口袋48"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).xhs,"onUpdate:modelValue":k[4]||(k[4]=z=>unref(n).xhs=z),label:"小红书"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).bd,"onUpdate:modelValue":k[5]||(k[5]=z=>unref(n).bd=z),label:"百度"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).dy,"onUpdate:modelValue":k[6]||(k[6]=z=>unref(n).dy=z),label:"抖音"},null,8,["modelValue"])]),_:1})]),_:1},512)}}}),elInput="",_hoisted_1$8=createBaseVNode("span",{id:"bot"},"机器人",-1),_sfc_main$c=defineComponent({__name:"Bot",props:{bot:{type:Object,default:{host:"",websocktPort:"",httpPort:"",token:""}}},setup(t,{expose:r}){const e=ref(),n=ref({host:[{required:!0,message:"请输入该值",trigger:"blur"}],websocktPort:[{required:!0,message:"请输入该值",trigger:"blur"}],httpPort:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElForm,V=ElCard;return openBlock(),createBlock(V,{class:"card-bot"},{header:withCtx(()=>[_hoisted_1$8]),default:withCtx(()=>[createVNode($,{ref_key:"botform",ref:e,rules:n.value,model:t.bot,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"IP地址",prop:"host"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.host,"onUpdate:modelValue":i[0]||(i[0]=z=>t.bot.host=z)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"WebScoket端口",prop:"websocktPort"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.websocktPort,"onUpdate:modelValue":i[1]||(i[1]=z=>t.bot.websocktPort=z)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"Http端口",prop:"httpPort"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.httpPort,"onUpdate:modelValue":i[2]||(i[2]=z=>t.bot.httpPort=z)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"token"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.token,"onUpdate:modelValue":i[3]||(i[3]=z=>t.bot.token=z)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})}}}),elSwitch="",_hoisted_1$7=createBaseVNode("span",{id:"qq"},"QQ",-1),_sfc_main$b=defineComponent({__name:"qq",props:{qq:{type:Object,default:{funcAdmin:new Array,group:"",save:!1,admin:"",notice:!1,permission:"",debug:!1}}},setup(t,{expose:r}){const e=ref(),n=ref({admin:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElForm,z=ElCard;return openBlock(),createBlock(z,{class:"card-qq"},{header:withCtx(()=>[_hoisted_1$7]),default:withCtx(()=>[createVNode(V,{ref_key:"qqform",ref:e,model:t.qq,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"超管",prop:"admin"},{default:withCtx(()=>[createVNode(k,{modelValue:t.qq.admin,"onUpdate:modelValue":i[0]||(i[0]=re=>t.qq.admin=re)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"管理员",prop:"permission"},{default:withCtx(()=>[createVNode(k,{modelValue:t.qq.permission,"onUpdate:modelValue":i[1]||(i[1]=re=>t.qq.permission=re)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"群",prop:"group"},{default:withCtx(()=>[createVNode(k,{modelValue:t.qq.group,"onUpdate:modelValue":i[2]||(i[2]=re=>t.qq.group=re)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"程序错误通知"},{default:withCtx(()=>[createVNode($,{modelValue:t.qq.debug,"onUpdate:modelValue":i[3]||(i[3]=re=>t.qq.debug=re),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"普通消息通知"},{default:withCtx(()=>[createVNode($,{modelValue:t.qq.notice,"onUpdate:modelValue":i[4]||(i[4]=re=>t.qq.notice=re),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"保存群消息"},{default:withCtx(()=>[createVNode($,{modelValue:t.qq.save,"onUpdate:modelValue":i[5]||(i[5]=re=>t.qq.save=re),"active-text":"保存","inactive-text":"不保存"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}}),elInputNumber="",_hoisted_1$6=createBaseVNode("span",{id:"wb"},"微博",-1),_hoisted_2$3=createBaseVNode("span",{style:{color:"red"}},"用于转发动态和图片保存，一般是填idol",-1),_hoisted_3$3=createBaseVNode("span",{style:{color:"red"}},"仅用于图片保存，一般是填返图用户",-1),_hoisted_4$3=createBaseVNode("span",{style:{color:"red"}},"监听某些用户是否发送了包含关键词的动态",-1),_sfc_main$a=defineComponent({__name:"wb",props:{wb:{type:Object,default:{userAll:"",userPart:"",chiGuaUser:"",keyword:"",chiGuaQQ:"",chiGuaForwardQQ:!1,chiGuaGroup:"",chiGuaForwardGroup:!1,timeSpan:3,group:"",forwardGroup:!1,forwardQQ:!1,qq:""}}},setup(t,{expose:r}){const e=ref(),n=ref({userAll:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-wb"},{header:withCtx(()=>[_hoisted_1$6]),default:withCtx(()=>[createVNode(z,{ref_key:"wbform",ref:e,model:t.wb,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"微博用户",prop:"userAll"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.userAll,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.wb.userAll=oe)},null,8,["modelValue"]),_hoisted_2$3]),_:1}),createVNode(L,{label:"返图用户"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.userPart,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.wb.userPart=oe)},null,8,["modelValue"]),_hoisted_3$3]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.forwardGroup,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.wb.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.group,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.wb.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.forwardQQ,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.wb.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.qq,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.wb.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"吃瓜用户"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaUser,"onUpdate:modelValue":i[6]||(i[6]=oe=>t.wb.chiGuaUser=oe)},null,8,["modelValue"]),_hoisted_4$3]),_:1}),createVNode(L,{label:"关键词"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.keyword,"onUpdate:modelValue":i[7]||(i[7]=oe=>t.wb.keyword=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.chiGuaForwardGroup,"onUpdate:modelValue":i[8]||(i[8]=oe=>t.wb.chiGuaForwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.chiGuaForwardGroup?(openBlock(),createBlock(L,{key:2,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaGroup,"onUpdate:modelValue":i[9]||(i[9]=oe=>t.wb.chiGuaGroup=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.chiGuaForwardQQ,"onUpdate:modelValue":i[10]||(i[10]=oe=>t.wb.chiGuaForwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.chiGuaForwardQQ?(openBlock(),createBlock(L,{key:3,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaQQ,"onUpdate:modelValue":i[11]||(i[11]=oe=>t.wb.chiGuaQQ=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.wb.forwardQQ||t.wb.forwardGroup||t.wb.chiGuaForwardGroup||t.wb.chiGuaForwardQQ?(openBlock(),createBlock(L,{key:4,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.wb.timeSpan,"onUpdate:modelValue":i[12]||(i[12]=oe=>t.wb.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elCascader="",elTag="",elCascaderPanel="",elRadio="",elDialog="",elOverlay="",elCheckboxGroup="",elRadioGroup="",_hoisted_1$5=createBaseVNode("span",{id:"kd"},"口袋48",-1),_hoisted_2$2=createBaseVNode("span",{style:{color:"red"}},"*以上信息可通过查询获取",-1),_hoisted_3$2=createBaseVNode("span",{style:{color:"red"}},"*IM账号和IMtoken可点此登录口袋后自动获取",-1),_hoisted_4$2={key:0,style:{width:"95%","margin-top":"5px"}},_hoisted_5$2=createBaseVNode("span",null,"未查询到小偶像，检查名称等后重新查询或者点击下方地址自行获取小偶像信息填入：",-1),_sfc_main$9=defineComponent({__name:"kd",props:{kd:{type:Object,default:{group:"",forwardGroup:!1,forwardQQ:!1,qq:"",idolName:"",account:"",token:"",serverId:"",liveRoomId:"",msgTypeAll:new Array,msgType:[],saveMsg:0,saveImg:!1}}},setup(t,{expose:r}){const e=t,n=ref(),g=ref({idolName:[{required:!0,message:"请输入该值",trigger:"blur"}],serverId:[{required:!0,message:"请输入该值",trigger:"blur"}],liveRoomId:[{required:!0,message:"请输入该值",trigger:"blur"}],account:[{required:!0,message:"请输入该值",trigger:"blur"}],token:[{required:!0,message:"请输入该值",trigger:"blur"}],phone:[{required:!0,message:"请输入该值",trigger:"blur"}],code:[{required:!0,message:"请输入该值",trigger:"blur"}],name:[{required:!0,message:"请输入该值",trigger:"blur"}]}),y=ref(!1),i=ref({show:!1,group:[],name:"",loading:!1,url:""}),k=ref({phone:"",area:"86",hasSend:!1,code:"",sec:60}),L=ref([{label:"SNH48",value:"SNH48",children:[{value:"TEAM SII",label:"TEAM SII"},{value:"TEAM HII",label:"TEAM HII"},{value:"TEAM X",label:"TEAM X"}]},{label:"GNZ48",value:"GNZ48",children:[{value:"TEAM G",label:"TEAM G"},{value:"TEAM NIII",label:"TEAM NIII"},{value:"TEAM Z",label:"TEAM Z"},{value:"TEAM CII",label:"TEAM CII"}]},{label:"CGT48",value:"CGT48",children:[{value:"TEAM GII",label:"TEAM GII"}]},{label:"BEJ48",value:"BEJ48",children:[{value:"TEAM B",label:"TEAM B"},{value:"TEAM E",label:"TEAM E"}]},{label:"CKG48",value:"CKG48"}]),$=async()=>{if(!i.value.name){ElMessage({message:"请输入小偶像姓名",type:"error"});return}i.value.loading=!0;var ie=await searchIdol(i.value.group.toString(),i.value.name);if(ie.success){var ae=ie.data;e.kd.idolName=ae.name,e.kd.liveRoomId=ae.liveId,e.kd.serverId=ae.serverId,V()}else i.value.url=ie.msg||"";i.value.loading=!1},V=()=>{i.value.loading=!1,i.value.show=!1,i.value.name="",i.value.url="",i.value.group=[],y.value=!1,k.value.hasSend=!1,k.value.sec=60,k.value.code=""},z=async()=>{if(!k.value.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}var ie=/^1[3456789]\d{9}$/;if(ie.test(k.value.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}k.value.hasSend=!0,oe();var ae=await sendSmsCode(k.value.phone,k.value.area);ae.success?ElMessage({message:"发送成功，请注意查收！",type:"success"}):(ElMessage({message:ae.msg||"发送失败！",type:"error"}),V())},re=async()=>{if(!k.value.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}if(!k.value.code){ElMessage({message:"请输入验证码！",type:"warning"});return}var ie=/^1[3456789]\d{9}$/;if(ie.test(k.value.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}var ae=await pocketLogin(k.value.phone,k.value.code);if(ae.success){var Fe=await kdUserInfo({token:JSON.parse(ae.data).token});if(Fe.success){let de=JSON.parse(Fe.data);e.kd.token=de.pwd,e.kd.account=de.accid,setTimeout(()=>{V()},1e3),ElMessage({message:Fe.msg||"登录成功",type:"success"})}else ElMessage({message:Fe.msg||"登录失败！",type:"error"})}else ElMessage({message:ae.msg||"登录失败！",type:"error"})},oe=()=>{k.value.sec=60;let ie;ie=setInterval(()=>{k.value.sec>0?k.value.sec--:(clearInterval(ie),k.value.sec=60,k.value.hasSend=!1)},1e3)},le=async()=>new Promise(ie=>{var ae;(ae=n.value)==null||ae.validate(Fe=>{ie(Fe)})}),ue=ie=>{openWindow(ie)};return r({validForm:le}),(ie,ae)=>{const Fe=ElInput,de=ElFormItem,Ne=ElButton,Ve=ElRadio,ze=ElRadioGroup,jt=ElCheckbox,kt=ElCheckboxGroup$1,Et=ElSwitch,lr=ElForm,tr=ElDialog,or=ElCascader,dr=ElCard;return openBlock(),createBlock(dr,{class:"card-kd"},{header:withCtx(()=>[_hoisted_1$5]),default:withCtx(()=>[createVNode(lr,{ref_key:"kdform",ref:n,rules:g.value,model:t.kd,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(de,{label:"姓名",prop:"idolName"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.idolName,"onUpdate:modelValue":ae[0]||(ae[0]=cr=>t.kd.idolName=cr)},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"IMServerId",prop:"serverId"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.serverId,"onUpdate:modelValue":ae[1]||(ae[1]=cr=>t.kd.serverId=cr)},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"直播房间Id",prop:"liveRoomId"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.liveRoomId,"onUpdate:modelValue":ae[2]||(ae[2]=cr=>t.kd.liveRoomId=cr)},null,8,["modelValue"])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(Ne,{onClick:ae[3]||(ae[3]=cr=>i.value.show=!0)},{default:withCtx(()=>[createTextVNode("查询小偶像信息")]),_:1}),_hoisted_2$2]),_:1}),createVNode(de,{label:"IM账号",prop:"account"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.account,"onUpdate:modelValue":ae[4]||(ae[4]=cr=>t.kd.account=cr)},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"IMtoken",prop:"token"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.token,"onUpdate:modelValue":ae[5]||(ae[5]=cr=>t.kd.token=cr)},null,8,["modelValue"])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(Ne,{onClick:ae[6]||(ae[6]=cr=>y.value=!0)},{default:withCtx(()=>[createTextVNode("登录口袋48")]),_:1}),_hoisted_3$2]),_:1}),createVNode(de,{label:"保存消息"},{default:withCtx(()=>[createVNode(ze,{modelValue:t.kd.saveMsg,"onUpdate:modelValue":ae[7]||(ae[7]=cr=>t.kd.saveMsg=cr)},{default:withCtx(()=>[createVNode(Ve,{label:0,value:0},{default:withCtx(()=>[createTextVNode("不保存")]),_:1}),createVNode(Ve,{label:1,value:1},{default:withCtx(()=>[createTextVNode("仅小偶像")]),_:1}),createVNode(Ve,{label:2,value:2},{default:withCtx(()=>[createTextVNode("全部")]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:"保存小偶像图片"},{default:withCtx(()=>[createVNode(ze,{modelValue:t.kd.saveImg,"onUpdate:modelValue":ae[8]||(ae[8]=cr=>t.kd.saveImg=cr)},{default:withCtx(()=>[createVNode(Ve,{label:!1,value:!1},{default:withCtx(()=>[createTextVNode("不保存")]),_:1}),createVNode(Ve,{label:!0,value:!0},{default:withCtx(()=>[createTextVNode("保存")]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:"监听消息类型"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.msgType,"onUpdate:modelValue":ae[9]||(ae[9]=cr=>t.kd.msgType=cr)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.kd.msgTypeAll,(cr,nr)=>(openBlock(),createBlock(jt,{label:cr.value,key:nr},{default:withCtx(()=>[createTextVNode(toDisplayString(cr.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:"转发至群"},{default:withCtx(()=>[createVNode(Et,{modelValue:t.kd.forwardGroup,"onUpdate:modelValue":ae[10]||(ae[10]=cr=>t.kd.forwardGroup=cr),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.kd.forwardGroup?(openBlock(),createBlock(de,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.group,"onUpdate:modelValue":ae[11]||(ae[11]=cr=>t.kd.group=cr)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(de,{label:"转发至好友"},{default:withCtx(()=>[createVNode(Et,{modelValue:t.kd.forwardQQ,"onUpdate:modelValue":ae[12]||(ae[12]=cr=>t.kd.forwardQQ=cr),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.kd.forwardQQ?(openBlock(),createBlock(de,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(Fe,{modelValue:t.kd.qq,"onUpdate:modelValue":ae[13]||(ae[13]=cr=>t.kd.qq=cr)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["rules","model"]),createVNode(tr,{title:"登录口袋48",modelValue:y.value,"onUpdate:modelValue":ae[16]||(ae[16]=cr=>y.value=cr),"before-close":V,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(lr,{"label-width":"100px",rules:g.value,model:k.value},{default:withCtx(()=>[createVNode(de,{label:"手机号",class:"mt-4",prop:"phone"},{default:withCtx(()=>[createVNode(Fe,{modelValue:k.value.phone,"onUpdate:modelValue":ae[14]||(ae[14]=cr=>k.value.phone=cr),style:{width:"95%"}},{prepend:withCtx(()=>[createTextVNode("+"+toDisplayString(k.value.area),1)]),_:1},8,["modelValue"])]),_:1}),createVNode(de,{label:"验证码",prop:"code"},{default:withCtx(()=>[createVNode(Fe,{type:"primary",modelValue:k.value.code,"onUpdate:modelValue":ae[15]||(ae[15]=cr=>k.value.code=cr),style:{width:"65%"}},null,8,["modelValue"]),withDirectives(createVNode(Ne,{style:{width:"25%","margin-left":"5%"},onClick:z},{default:withCtx(()=>[createTextVNode("发送验证码")]),_:1},512),[[vShow,!k.value.hasSend]]),withDirectives(createVNode(Ne,{style:{width:"25%","margin-left":"5%"}},{default:withCtx(()=>[createTextVNode(toDisplayString(k.value.sec)+"秒",1)]),_:1},512),[[vShow,k.value.hasSend]])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(Ne,{type:"primary",onClick:re},{default:withCtx(()=>[createTextVNode("登录")]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),createVNode(tr,{title:"查询小偶像 ",modelValue:i.value.show,"onUpdate:modelValue":ae[20]||(ae[20]=cr=>i.value.show=cr),"before-close":V,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(lr,{"label-width":"100px",rules:g.value,model:i.value},{default:withCtx(()=>[createVNode(de,{label:"队伍",class:"mt-4"},{default:withCtx(()=>[createVNode(or,{props:{expandTrigger:"hover",checkStrictly:"true"},placeholder:"请选择",modelValue:i.value.group,"onUpdate:modelValue":ae[17]||(ae[17]=cr=>i.value.group=cr),options:L.value,style:{width:"95%"}},null,8,["modelValue","options"])]),_:1}),createVNode(de,{label:"姓名",prop:"name"},{default:withCtx(()=>[createVNode(Fe,{modelValue:i.value.name,"onUpdate:modelValue":ae[18]||(ae[18]=cr=>i.value.name=cr),style:{width:"95%"}},null,8,["modelValue"])]),_:1}),createVNode(de,null,{default:withCtx(()=>[createVNode(Ne,{type:"primary",loading:i.value.loading,onClick:$},{default:withCtx(()=>[createTextVNode("查询")]),_:1},8,["loading"])]),_:1}),i.value.url?(openBlock(),createElementBlock("div",_hoisted_4$2,[_hoisted_5$2,createBaseVNode("a",{style:{"word-break":"break-all"},onClick:ae[19]||(ae[19]=cr=>ue(i.value.url))},toDisplayString(i.value.url),1)])):createCommentVNode("",!0)]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])]),_:1})}}}),_hoisted_1$4=createBaseVNode("span",{id:"bz"},"b站",-1),_sfc_main$8=defineComponent({__name:"bz",props:{bz:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-bz"},{header:withCtx(()=>[_hoisted_1$4]),default:withCtx(()=>[createVNode(z,{ref_key:"bzform",ref:e,model:t.bz,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"b站用户",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.user,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.bz.user=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.bz.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.bz.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.bz.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.group,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.bz.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.bz.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.bz.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.bz.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.qq,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.bz.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.bz.forwardQQ||t.bz.forwardGroup?(openBlock(),createBlock(L,{key:2,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.bz.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.bz.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),_hoisted_1$3=createBaseVNode("span",{id:"xhs"},"小红书",-1),_sfc_main$7=defineComponent({__name:"xhs",props:{xhs:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-xhs"},{header:withCtx(()=>[_hoisted_1$3]),default:withCtx(()=>[createVNode(z,{ref_key:"xhsform",ref:e,model:t.xhs,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"小红书用户",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.user,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.xhs.user=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.xhs.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.xhs.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.xhs.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.group,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.xhs.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.xhs.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.xhs.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.xhs.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.qq,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.xhs.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.xhs.forwardQQ||t.xhs.forwardGroup?(openBlock(),createBlock(L,{key:2,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.xhs.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.xhs.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elUpload="",elProgress="",_hoisted_1$2=createBaseVNode("span",{id:"bd"},"百度",-1),_hoisted_2$1=createBaseVNode("span",{style:{color:"red"}},"*上传人脸轮廓清晰的图片",-1),_hoisted_3$1=createBaseVNode("span",{style:{color:"red"}},"*直接保存(非双胞胎建议80，双胞胎建议70)",-1),_hoisted_4$1=createBaseVNode("span",{style:{color:"red"}},"*超过该值，但未超过上面的值，将加入审核列表，审核通过才会保存",-1),_hoisted_5$1=createBaseVNode("span",{style:{color:"red"}},"*启用会将图片自动上传到阿里云盘相册",-1),_hoisted_6$1=["src"],_sfc_main$6=defineComponent({__name:"bd",props:{bd:{type:Object,default:{appKey:"",appSeret:"",similarity:0,saveAliyunDisk:!1,audit:0,albumName:"",faceVerify:!1,imageList:new Array}}},setup(t,{expose:r}){const e=t,n=ref([]),g=ref(),y=re=>{n.value.push({name:re.data.name,url:re.data.url}),e.bd.imageList&&e.bd.imageList.push({name:re.data.name,url:re.data.url})};watchEffect(()=>{e.bd.imageList&&(n.value=JSON.parse(JSON.stringify(e.bd.imageList)))});const i=re=>{e.bd.imageList&&(e.bd.imageList=e.bd.imageList.filter(oe=>oe.name!==re.name))},k=ref(""),L=ref(!1),$=re=>{k.value=re.url,L.value=!0},V=ref({appKey:[{required:!0,message:"请输入该值",trigger:"blur"}],appSeret:[{required:!0,message:"请输入该值",trigger:"blur"}],albumName:[{required:!0,message:"请输入该值",trigger:"blur"}],imageList:[{required:!0,message:"请上传人脸",trigger:"change"}]});return r({validForm:async()=>new Promise(re=>{var oe;(oe=g.value)==null||oe.validate(le=>{re(le)})})}),(re,oe)=>{const le=ElInput,ue=ElFormItem,ie=ElSwitch,ae=ElIcon,Fe=ElUpload,de=ElCol,Ne=ElForm,Ve=ElCard,ze=ElDialog;return openBlock(),createElementBlock(Fragment,null,[createVNode(Ve,{class:"card-bd",style:{"margin-top":"10px"}},{header:withCtx(()=>[_hoisted_1$2]),default:withCtx(()=>[createVNode(Ne,{ref_key:"bdform",ref:g,model:t.bd,rules:V.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(ue,{label:"apiKey",prop:"appKey"},{default:withCtx(()=>[createVNode(le,{modelValue:t.bd.appKey,"onUpdate:modelValue":oe[0]||(oe[0]=jt=>t.bd.appKey=jt),placeholder:"百度appKey"},null,8,["modelValue"])]),_:1}),createVNode(ue,{label:"appSeret",prop:"appSeret"},{default:withCtx(()=>[createVNode(le,{modelValue:t.bd.appSeret,"onUpdate:modelValue":oe[1]||(oe[1]=jt=>t.bd.appSeret=jt),placeholder:"百度appSeret"},null,8,["modelValue"])]),_:1}),createVNode(ue,{label:"开启人脸验证"},{default:withCtx(()=>[createVNode(ie,{modelValue:t.bd.faceVerify,"onUpdate:modelValue":oe[2]||(oe[2]=jt=>t.bd.faceVerify=jt),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(ue,{label:"基础人脸",prop:"imageList"},{default:withCtx(()=>[createVNode(Fe,{"file-list":n.value,"onUpdate:fileList":oe[3]||(oe[3]=jt=>n.value=jt),action:unref(ApiPrefix)+"/upload","on-success":y,"on-preview":$,"on-remove":i,"list-type":"picture-card",limit:3,accept:".jpg,.png,.jpeg"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(unref(plus_default))]),_:1})]),_:1},8,["file-list","action"]),_hoisted_2$1,withDirectives(createVNode(le,{modelValue:t.bd.imageList,"onUpdate:modelValue":oe[4]||(oe[4]=jt=>t.bd.imageList=jt)},null,8,["modelValue"]),[[vShow,!1]])]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"人脸相似度"},{default:withCtx(()=>[createVNode(de,{span:8},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:t.bd.similarity,"onUpdate:modelValue":oe[5]||(oe[5]=jt=>t.bd.similarity=jt)},null,8,["modelValue"])]),_:1}),_hoisted_3$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"审核相似度"},{default:withCtx(()=>[createVNode(de,{span:8},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:t.bd.audit,"onUpdate:modelValue":oe[6]||(oe[6]=jt=>t.bd.audit=jt)},null,8,["modelValue"])]),_:1}),_hoisted_4$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"上传云盘"},{default:withCtx(()=>[createVNode(ie,{modelValue:t.bd.saveAliyunDisk,"onUpdate:modelValue":oe[7]||(oe[7]=jt=>t.bd.saveAliyunDisk=jt),"active-value":!0,"inactive-value":!1},null,8,["modelValue"]),_hoisted_5$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"相册名称",prop:"albumName"},{default:withCtx(()=>[createVNode(de,{span:8},{default:withCtx(()=>[createVNode(le,{modelValue:t.bd.albumName,"onUpdate:modelValue":oe[8]||(oe[8]=jt=>t.bd.albumName=jt)},null,8,["modelValue"])]),_:1})]),_:1},512),[[vShow,t.bd.saveAliyunDisk]])]),_:1},8,["model","rules"])]),_:1}),createVNode(ze,{modelValue:L.value,"onUpdate:modelValue":oe[9]||(oe[9]=jt=>L.value=jt)},{default:withCtx(()=>[createBaseVNode("img",{"w-full":"",style:{height:"auto",width:"100%"},src:k.value,alt:"Preview Image"},null,8,_hoisted_6$1)]),_:1},8,["modelValue"])],64)}}}),_hoisted_1$1=createBaseVNode("span",{id:"dy"},"抖音",-1),_sfc_main$5=defineComponent({__name:"dy",props:{dy:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-dy"},{header:withCtx(()=>[_hoisted_1$1]),default:withCtx(()=>[createVNode(z,{ref_key:"dyform",ref:e,model:t.dy,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"抖音用户",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.user,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.dy.user=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.dy.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.dy.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.dy.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.group,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.dy.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.dy.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.dy.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.dy.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.qq,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.dy.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.dy.forwardQQ||t.dy.forwardGroup?(openBlock(),createBlock(L,{key:2,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.dy.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.dy.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elMessageBox="",_sfc_main$4=defineComponent({__name:"config",props:{enable:{type:Object,default:{qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},emits:["top-enable-change","change-menu","config-change"],setup(t,{expose:r,emit:e}){const n=t,g=ref(),y=ref(),i=ref(),k=ref(),L=ref(),$=ref(),V=ref(),z=ref(),re=ref({enableModule:n.enable}),oe=ref(),le=e,ue=de=>{re.value.enableModule=de,le("top-enable-change",de)},ie=async()=>{let de=!0;if(re.value.enableModule.bot&&(de=await g.value.validForm()),!de){le("change-menu","bot"),ElMessage.error("请填入机器人配置中的必填项！");return}if(re.value.enableModule.wb&&(de=await y.value.validForm()),!de){le("change-menu","wb"),ElMessage.error("请填入微博配置中的必填项！");return}if(re.value.enableModule.qq&&(de=await i.value.validForm()),!de){le("change-menu","qq"),ElMessage.error("请填入QQ配置中的必填项！");return}if(re.value.enableModule.bz&&(de=await k.value.validForm()),!de){le("change-menu","bz"),ElMessage.error("请填入B站配置中的必填项！");return}if(re.value.enableModule.bd&&(de=await L.value.validForm()),!de){le("change-menu","bd"),ElMessage.error("请填入百度配置中的必填项！");return}if(re.value.enableModule.kd&&(de=await $.value.validForm()),!de){le("change-menu","kd"),ElMessage.error("请填入口袋配置中的必填项！");return}if(re.value.enableModule.xhs&&(de=await V.value.validForm()),!de){le("change-menu","xhs"),ElMessage.error("请填入小红书配置中的必填项！");return}if(re.value.enableModule.dy&&(de=await z.value.validForm()),!de){le("change-menu","dy"),ElMessage.error("请填入抖音配置中的必填项！");return}var Ne=await saveConfig(re.value);Ne&&Ne.success?(oe.value=re.value,ElMessage.success(Ne.msg),le("config-change")):ElMessage.error(Ne.msg||"保存失败！")},ae=async()=>{var de=await getConfig();de&&de.success&&(re.value.enableModule=de.data.enableModule,re.value.bot=de.data.bot,re.value.qq=de.data.qq,re.value.wb=de.data.wb,re.value.kd=de.data.kd,re.value.bz=de.data.bz,re.value.bd=de.data.bd,re.value.xhs=de.data.xhs,re.value.dy=de.data.dy);let Ne=JSON.stringify(re.value),Ve=JSON.parse(Ne);oe.value=Ve},Fe=()=>{let de=JSON.stringify(oe.value),Ne=JSON.stringify(re.value);return de!==Ne?ElMessageBox.confirm("配置已被修改，但未保存，是否保存","警告",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(async()=>(await ie(),!0)).catch(async()=>!0):new Promise((Ve,ze)=>{Ve(!0)})};return onMounted(async()=>{await ae()}),r({checkData:Fe}),(de,Ne)=>{const Ve=ElButton,ze=ElCard,jt=ElAffix,kt=ElScrollbar;return openBlock(),createElementBlock(Fragment,null,[createVNode(jt,{target:".el-scrollbar__view"},{default:withCtx(()=>[createVNode(ze,{id:"enable"},{header:withCtx(()=>[createVNode(Ve,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:Ne[0]||(Ne[0]=Et=>ie())},{default:withCtx(()=>[createTextVNode("保存")]),_:1},8,["icon"]),createVNode(Ve,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:Ne[1]||(Ne[1]=Et=>ae())},{default:withCtx(()=>[createTextVNode("重置")]),_:1},8,["icon"])]),default:withCtx(()=>[createVNode(_sfc_main$d,{enable:re.value.enableModule,onEnableChange:ue},null,8,["enable"])]),_:1})]),_:1}),createVNode(kt,{style:{height:"calc(100vh - 230px)"},id:"pdom"},{default:withCtx(()=>[re.value.enableModule.bot?(openBlock(),createBlock(_sfc_main$c,{key:0,ref_key:"botRef",ref:g,bot:re.value.bot,class:"mt10"},null,8,["bot"])):createCommentVNode("",!0),re.value.enableModule.qq?(openBlock(),createBlock(_sfc_main$b,{key:1,ref_key:"qqRef",ref:i,qq:re.value.qq,class:"mt10"},null,8,["qq"])):createCommentVNode("",!0),re.value.enableModule.wb?(openBlock(),createBlock(_sfc_main$a,{key:2,ref_key:"wbRef",ref:y,wb:re.value.wb,class:"mt10"},null,8,["wb"])):createCommentVNode("",!0),re.value.enableModule.kd?(openBlock(),createBlock(_sfc_main$9,{key:3,ref_key:"kdRef",ref:$,kd:re.value.kd,class:"mt10"},null,8,["kd"])):createCommentVNode("",!0),re.value.enableModule.bz?(openBlock(),createBlock(_sfc_main$8,{key:4,ref_key:"bzRef",ref:k,bz:re.value.bz,class:"mt10"},null,8,["bz"])):createCommentVNode("",!0),re.value.enableModule.xhs?(openBlock(),createBlock(_sfc_main$7,{key:5,ref_key:"xhsRef",ref:V,xhs:re.value.xhs,class:"mt10"},null,8,["xhs"])):createCommentVNode("",!0),re.value.enableModule.bd?(openBlock(),createBlock(_sfc_main$6,{key:6,ref_key:"bdRef",ref:L,bd:re.value.bd},null,8,["bd"])):createCommentVNode("",!0),re.value.enableModule.dy?(openBlock(),createBlock(_sfc_main$5,{key:7,ref_key:"dyRef",ref:z,dy:re.value.dy,class:"mt10 mb50"},null,8,["dy"])):createCommentVNode("",!0)]),_:1})],64)}}}),config_vue_vue_type_style_index_0_lang="",elAvatar="",elSpace="",elOption="",elOptionGroup="",elSelect="";var FileSaver_min={exports:{}};(function(t,r){(function(e,n){n()})(commonjsGlobal,function(){function e($,V){return typeof V>"u"?V={autoBom:!1}:typeof V!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),V={autoBom:!V}),V.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test($.type)?new Blob(["\uFEFF",$],{type:$.type}):$}function n($,V,z){var re=new XMLHttpRequest;re.open("GET",$),re.responseType="blob",re.onload=function(){L(re.response,V,z)},re.onerror=function(){console.error("could not download file")},re.send()}function g($){var V=new XMLHttpRequest;V.open("HEAD",$,!1);try{V.send()}catch{}return 200<=V.status&&299>=V.status}function y($){try{$.dispatchEvent(new MouseEvent("click"))}catch{var V=document.createEvent("MouseEvents");V.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),$.dispatchEvent(V)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,k=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function($,V,z){var re=i.URL||i.webkitURL,oe=document.createElement("a");V=V||$.name||"download",oe.download=V,oe.rel="noopener",typeof $=="string"?(oe.href=$,oe.origin===location.origin?y(oe):g(oe.href)?n($,V,z):y(oe,oe.target="_blank")):(oe.href=re.createObjectURL($),setTimeout(function(){re.revokeObjectURL(oe.href)},4e4),setTimeout(function(){y(oe)},0))}:"msSaveOrOpenBlob"in navigator?function($,V,z){if(V=V||$.name||"download",typeof $!="string")navigator.msSaveOrOpenBlob(e($,z),V);else if(g($))n($,V,z);else{var re=document.createElement("a");re.href=$,re.target="_blank",setTimeout(function(){y(re)})}}:function($,V,z,re){if(re=re||open("","_blank"),re&&(re.document.title=re.document.body.innerText="downloading..."),typeof $=="string")return n($,V,z);var oe=$.type==="application/octet-stream",le=/constructor/i.test(i.HTMLElement)||i.safari,ue=/CriOS\/[\d]+/.test(navigator.userAgent);if((ue||oe&&le||k)&&typeof FileReader<"u"){var ie=new FileReader;ie.onloadend=function(){var de=ie.result;de=ue?de:de.replace(/^data:[^;]*;/,"data:attachment/file;"),re?re.location.href=de:location=de,re=null},ie.readAsDataURL($)}else{var ae=i.URL||i.webkitURL,Fe=ae.createObjectURL($);re?re.location=Fe:location.href=Fe,re=null,setTimeout(function(){ae.revokeObjectURL(Fe)},4e4)}});i.saveAs=L.saveAs=L,t.exports=L})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const _hoisted_1=createBaseVNode("label",null,"日志显示数量：",-1),_hoisted_2=createBaseVNode("label",null,"日志类型：",-1),_hoisted_3=createBaseVNode("span",null," ",-1),_hoisted_4={key:0},_hoisted_5={style:{"font-size":"12px",color:"gray"}},_hoisted_6={key:1},_hoisted_7={style:{"font-size":"12px",color:"gray"}},_hoisted_8=["onClick"],_sfc_main$3=defineComponent({__name:"log",props:{enable:{type:Object,default:{bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},setup(t){const r=ref("all"),e=ref(30),n=ref(new Array),g=z=>{z&&openWindow(z)},y=async()=>{if(n.value.length<=0){ElMessage.info("无日志");return}ElMessageBox.confirm("此操作将永久清空日志，是否删除","警告",{cancelButtonText:"取消",confirmButtonText:"确定"}).then(()=>{n.value=new Array,logApi().clearLog()})},i=()=>{if(!n.value||n.value.length<=0){ElMessage.info("无日志");return}let z=[""];n.value.forEach(oe=>{oe.type=="link"||oe.type=="pic"?z.push(oe.name+":"+oe.url):z.push(oe.name+":"+oe.content)});const re=new Blob(z,{type:"text/plain;charset=utf-8"});FileSaver_minExports.saveAs(re,"logs.txt")},k=()=>{var z=n.value.filter(re=>re.type=="pic").map(re=>re.url);return z??[]},L=z=>{var re=k().findIndex(oe=>oe==z);return re},$=()=>{setInterval(()=>{V()},3e3)},V=()=>{let z=logApi().getLogs();z&&(z=z.reverse(),r.value=="idol"?z=z.filter(re=>re.idol&&re.roleId==3):r.value&&r.value!="all"&&(z=z.filter(re=>re.type==r.value)),e&&(z=z.slice(0,e.value)),n.value=z)};return onMounted(()=>{V(),$()}),(z,re)=>{const oe=ElInputNumber,le=ElOption,ue=ElSelect,ie=ElButton,ae=ElSpace,Fe=ElAvatar,de=ElCol,Ne=ElRow,Ve=ElImage,ze=ElCard,jt=ElScrollbar;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(ae,{wrap:""},{default:withCtx(()=>[_hoisted_1,createVNode(oe,{modelValue:e.value,"onUpdate:modelValue":re[0]||(re[0]=kt=>e.value=kt),min:1,max:1e3,onChange:V},null,8,["modelValue"]),_hoisted_2,createVNode(ue,{modelValue:r.value,"onUpdate:modelValue":re[1]||(re[1]=kt=>r.value=kt),style:{width:"120px"},onChange:V},{default:withCtx(()=>[(openBlock(),createBlock(le,{key:0,label:"全部",value:"all"})),(openBlock(),createBlock(le,{key:1,label:"系统",value:"system"})),(openBlock(),createBlock(le,{key:2,label:"图片",value:"pic"})),(openBlock(),createBlock(le,{key:3,label:"文本",value:"text"})),(openBlock(),createBlock(le,{key:4,label:"链接",value:"link"})),t.enable.kd?(openBlock(),createBlock(le,{key:5,label:"小偶像",value:"idol"})):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(ie,{type:"primary",onClick:y},{default:withCtx(()=>[createTextVNode("清空")]),_:1}),createVNode(ie,{type:"primary",onClick:i},{default:withCtx(()=>[createTextVNode("导出")]),_:1})]),_:1})]),createVNode(jt,{style:{height:"calc(100vh - 100px)","margin-top":"10px"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,kt=>(openBlock(),createBlock(ze,{style:{"background-color":"rgba(220,220,220,0.1)","margin-bottom":"10px"},shadow:"never"},{default:withCtx(()=>[createVNode(Ne,null,{default:withCtx(()=>[createVNode(de,{span:1.5},{default:withCtx(()=>[kt.type!=="system"?(openBlock(),createBlock(Fe,{key:0,src:kt.avatar},null,8,["src"])):createCommentVNode("",!0)]),_:2},1024),createVNode(de,{span:.5},{default:withCtx(()=>[_hoisted_3]),_:1}),createVNode(de,{span:22},{default:withCtx(()=>[createVNode(Ne,null,{default:withCtx(()=>[kt.type!=="system"?(openBlock(),createElementBlock("span",_hoisted_4,[createTextVNode(toDisplayString(kt.name)+" ",1),createBaseVNode("span",_hoisted_5,toDisplayString((kt.idol||"")+(kt.channel?"【"+kt.channel+"】":"")+kt.time),1)])):(openBlock(),createElementBlock("span",_hoisted_6,[createTextVNode("系统信息："),createBaseVNode("span",_hoisted_7,toDisplayString(kt.time),1)]))]),_:2},1024),createVNode(Ne,null,{default:withCtx(()=>[createVNode(ze,{"body-class":"card-body-diy"},{default:withCtx(()=>[(kt.type=="text",openBlock(),createElementBlock("span",{key:0,style:normalizeStyle({color:kt.color})},toDisplayString(kt.content),5)),kt.type=="link"?(openBlock(),createElementBlock("span",{key:1,style:normalizeStyle({color:kt.color,"text-decoration":"underline",cursor:"pointer"}),onClick:Et=>g(kt.url)},toDisplayString(kt.url),13,_hoisted_8)):createCommentVNode("",!0),kt.type=="pic"?(openBlock(),createBlock(Ve,{key:2,src:kt.url,"initial-index":L(kt.url),"preview-src-list":k(),style:{width:"120px",height:"auto"}},null,8,["src","initial-index","preview-src-list"])):createCommentVNode("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})])}}}),log_vue_vue_type_style_index_0_lang="",elConfigProvider="",elPagination="",elTable="",elTableColumn="";var zhCn={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const _sfc_main$2=defineComponent({__name:"pic",setup(t){const r=ref({pageIndex:1,pageSize:5,total:0}),e=ref(),n=async i=>{let k=await saveImg(i);k.success?ElMessage.success(k.msg):ElMessage.error(k.msg),await y()},g=async i=>{let k=await delImg(i);k.success?ElMessage.success(k.msg):ElMessage.error(k.msg),await y()},y=async()=>{var i=await getCache(r.value);e.value=i.data,r.value.total=i.count};return onMounted(async()=>{await y()}),(i,k)=>{const L=ElButton,$=ElSpace,V=ElRow,z=ElTableColumn,re=ElImage,oe=ElTable,le=ElPagination,ue=ElConfigProvider;return openBlock(),createElementBlock("div",null,[createVNode(V,null,{default:withCtx(()=>[createVNode($,{wrap:""},{default:withCtx(()=>[createVNode(L,{type:"primary",icon:unref(refresh_default),onClick:y},{default:withCtx(()=>[createTextVNode("刷新")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode(V,{style:{"margin-top":"10px"}},{default:withCtx(()=>[createVNode(oe,{data:e.value,stripe:"",style:{width:"100%",height:"calc(100vh - 150px)"}},{default:withCtx(()=>[createVNode(z,{type:"index",width:"50"}),createVNode(z,{prop:"createDate",label:"时间"}),createVNode(z,{prop:"content",label:"图片"},{default:withCtx(ie=>[createVNode(re,{style:{width:"auto",height:"120px"},src:ie.row.content,"preview-teleported":"","preview-src-list":[ie.row.content]},null,8,["src","preview-src-list"])]),_:1}),createVNode(z,{label:"操作"},{default:withCtx(ie=>[createVNode(L,{type:"primary",onClick:ae=>n(ie.row.id)},{default:withCtx(()=>[createTextVNode("保存")]),_:2},1032,["onClick"]),createVNode(L,{type:"primary",onClick:ae=>g(ie.row.id)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),createVNode(ue,{locale:unref(zhCn)},{default:withCtx(()=>[createVNode(le,{onSizeChange:k[0]||(k[0]=ie=>y()),onCurrentChange:k[1]||(k[1]=ie=>y()),background:"",class:"mt15",layout:"total, sizes, prev, pager, next, jumper",total:r.value.total,"page-sizes":[5,10,20,30],"current-page":r.value.pageIndex,"onUpdate:currentPage":k[2]||(k[2]=ie=>r.value.pageIndex=ie),"page-size":r.value.pageSize,"onUpdate:pageSize":k[3]||(k[3]=ie=>r.value.pageSize=ie)},null,8,["total","current-page","page-size"])]),_:1},8,["locale"])]),_:1})])}}}),_sfc_main$1=defineComponent({__name:"plugin",setup(t){const r=ref(),e=async()=>{var k=await getFun();r.value=k.data},n=async k=>{let L=await startPlugin(k.name,k.version);L.success?ElMessage.success(L.msg):ElMessage.error(L.msg),await e()},g=async k=>{let L=await stopPlugin(k);L.success?ElMessage.success(L.msg):ElMessage.error(L.msg),await e()},y=async k=>{let L=await delPlugin(k);L.success?ElMessage.success(L.msg):ElMessage.error(L.msg),await e()},i=async()=>{await e()};return onMounted(async()=>{await e()}),(k,L)=>{const $=ElButton,V=ElUpload,z=ElSpace,re=ElRow,oe=ElTableColumn,le=ElTag,ue=ElTable;return openBlock(),createElementBlock("div",null,[createVNode(re,null,{default:withCtx(()=>[createVNode(z,{wrap:""},{default:withCtx(()=>[createVNode(V,{accept:".dll",action:unref(ApiPrefix)+"/uploaddll",multiple:"","show-file-list":!1,"on-success":i},{default:withCtx(()=>[createVNode($,{type:"info",icon:unref(upload_default)},{default:withCtx(()=>[createTextVNode("上传插件")]),_:1},8,["icon"])]),_:1},8,["action"]),createVNode($,{type:"primary",icon:unref(refresh_default),onClick:e},{default:withCtx(()=>[createTextVNode("刷新")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode(re,{style:{"margin-top":"10px"}},{default:withCtx(()=>[createVNode(ue,{data:r.value,stripe:"",style:{width:"100%",height:"calc(100vh - 100px)"}},{default:withCtx(()=>[createVNode(oe,{type:"index",width:"50"}),createVNode(oe,{label:"插件名",width:"120"},{default:withCtx(ie=>[createTextVNode(toDisplayString(ie.row.pluginInfo.name),1)]),_:1}),createVNode(oe,{label:"版本",width:"120"},{default:withCtx(ie=>[createTextVNode(toDisplayString(ie.row.pluginInfo.version),1)]),_:1}),createVNode(oe,{label:"状态",width:"120"},{default:withCtx(ie=>[ie.row.status?(openBlock(),createBlock(le,{key:0,type:"success"},{default:withCtx(()=>[createTextVNode("启用")]),_:1})):(openBlock(),createBlock(le,{key:1,type:"danger"},{default:withCtx(()=>[createTextVNode("禁用")]),_:1}))]),_:1}),createVNode(oe,{label:"描述"},{default:withCtx(ie=>[createTextVNode(toDisplayString(ie.row.pluginInfo.desc),1)]),_:1}),createVNode(oe,{label:"操作",width:"180"},{default:withCtx(ie=>[ie.row.status?(openBlock(),createBlock($,{key:1,type:"warning",onClick:ae=>g(ie.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("禁用")]),_:2},1032,["onClick"])):(openBlock(),createBlock($,{key:0,type:"primary",onClick:ae=>n(ie.row.pluginInfo)},{default:withCtx(()=>[createTextVNode("启用")]),_:2},1032,["onClick"])),createVNode($,{type:"danger",onClick:ae=>y(ie.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),_sfc_main=defineComponent({__name:"App",setup(t){const r=ref(),e=ref({bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}),n=["index","log","pic","plugin"],g=ref(),y=ref(),i=ref("index"),k=async re=>{n.find(oe=>oe===re)?(g.value&&(await g.value.checkData(),await V()),i.value=re):L("enable")},L=async re=>{var ue;n.find(ie=>ie===i.value)&&(i.value="config",setTimeout(async()=>{await L(re)},100));const oe=document.getElementById(re),le=(ue=document.getElementById("pdom"))==null?void 0:ue.parentElement;if(le&&oe){const ie=le.getBoundingClientRect(),Fe=oe.getBoundingClientRect().top+le.scrollTop-ie.top-28;le.scrollTo({top:Fe,behavior:"smooth"})}},$=re=>{e.value=re},V=async()=>{let re=await getConfig();e.value=re.data.enableModule;let oe=JSON.stringify(re.data.enableModule),le=JSON.parse(oe);r.value=le},z=async()=>{await y.value.refreshConfig()};return onMounted(async()=>{await V()}),(re,oe)=>{const le=ElIcon,ue=ElMenuItem,ie=ElSubMenu,ae=ElMenu,Fe=ElScrollbar,de=ElAside,Ne=ElCard,Ve=ElMain,ze=ElContainer;return openBlock(),createBlock(ze,{class:"layout-container"},{default:withCtx(()=>[createVNode(Ne,null,{default:withCtx(()=>[createVNode(de,{width:"15vw"},{default:withCtx(()=>[createVNode(Fe,{style:{height:"calc(100vh - 30px)"}},{default:withCtx(()=>[createVNode(ae,{"default-openeds":["99"],"default-active":"1"},{default:withCtx(()=>[createVNode(ue,{index:"1",onClick:oe[0]||(oe[0]=jt=>k("index"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(house_default))]),_:1}),createTextVNode(" 开始 ")]),_:1}),createVNode(ue,{index:"2",onClick:oe[1]||(oe[1]=jt=>k("log"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(tickets_default))]),_:1}),createTextVNode(" 日志 ")]),_:1}),createVNode(ue,{index:"3",onClick:oe[2]||(oe[2]=jt=>k("pic"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(picture_default))]),_:1}),createTextVNode(" 图片 ")]),_:1}),withDirectives(createVNode(ue,{index:"4",onClick:oe[3]||(oe[3]=jt=>k("plugin"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(cpu_default))]),_:1}),createTextVNode(" 插件 ")]),_:1},512),[[vShow,e.value.qq]]),createVNode(ie,{index:"99"},{title:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(set_up_default))]),_:1}),createTextVNode("配置 ")]),default:withCtx(()=>[createVNode(ue,{index:"99-0",onClick:oe[4]||(oe[4]=jt=>k("config"))},{default:withCtx(()=>[createTextVNode("启用模块")]),_:1}),withDirectives(createVNode(ue,{index:"99-1",onClick:oe[5]||(oe[5]=jt=>L("bot"))},{default:withCtx(()=>[createTextVNode("机器人")]),_:1},512),[[vShow,e.value.bot]]),withDirectives(createVNode(ue,{index:"99-2",onClick:oe[6]||(oe[6]=jt=>L("qq"))},{default:withCtx(()=>[createTextVNode("QQ")]),_:1},512),[[vShow,e.value.qq]]),withDirectives(createVNode(ue,{index:"99-3",onClick:oe[7]||(oe[7]=jt=>L("wb"))},{default:withCtx(()=>[createTextVNode("微博")]),_:1},512),[[vShow,e.value.wb]]),withDirectives(createVNode(ue,{index:"99-4",onClick:oe[8]||(oe[8]=jt=>L("kd"))},{default:withCtx(()=>[createTextVNode("口袋")]),_:1},512),[[vShow,e.value.kd]]),withDirectives(createVNode(ue,{index:"99-5",onClick:oe[9]||(oe[9]=jt=>L("bz"))},{default:withCtx(()=>[createTextVNode("B站")]),_:1},512),[[vShow,e.value.bz]]),withDirectives(createVNode(ue,{index:"99-6",onClick:oe[10]||(oe[10]=jt=>L("xhs"))},{default:withCtx(()=>[createTextVNode("小红书")]),_:1},512),[[vShow,e.value.xhs]]),withDirectives(createVNode(ue,{index:"99-7",onClick:oe[11]||(oe[11]=jt=>L("bd"))},{default:withCtx(()=>[createTextVNode("百度")]),_:1},512),[[vShow,e.value.bd]]),withDirectives(createVNode(ue,{index:"99-8",onClick:oe[12]||(oe[12]=jt=>L("dy"))},{default:withCtx(()=>[createTextVNode("抖音")]),_:1},512),[[vShow,e.value.dy]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Ne,{style:{width:"90%","margin-left":"10px"}},{default:withCtx(()=>[createVNode(ze,null,{default:withCtx(()=>[createVNode(Ve,{style:{"padding-left":"20px","padding-right":"20px"},id:"parentContainer"},{default:withCtx(()=>[withDirectives(createVNode(_sfc_main$e,{ref_key:"indexRef",ref:y,enable:e.value},null,8,["enable"]),[[vShow,i.value==="index"]]),withDirectives(createVNode(_sfc_main$3,{enable:e.value},null,8,["enable"]),[[vShow,i.value==="log"]]),i.value==="pic"?(openBlock(),createBlock(_sfc_main$2,{key:0})):createCommentVNode("",!0),i.value==="plugin"&&e.value.qq?(openBlock(),createBlock(_sfc_main$1,{key:1})):createCommentVNode("",!0),i.value==="config"?(openBlock(),createBlock(_sfc_main$4,{key:2,ref_key:"configRef",ref:g,enable:e.value,onTopEnableChange:$,onChangeMenu:L,onConfigChange:z},null,8,["enable"])):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),App_vue_vue_type_style_index_0_scoped_391b0c6d_lang="",_export_sfc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,g]of r)e[n]=g;return e},App=_export_sfc(_sfc_main,[["__scopeId","data-v-391b0c6d"]]),app=createApp(App);app.mount("#app");function objectSome(t,r){let e=!1;for(const n in t)if(t.hasOwnProperty(n)&&(e=r(n,t[n]),e))break;return e}var orgSend=WebSocket.prototype.send;WebSocket.prototype.send=function(){var t,r,e;if(/3:::/.test(arguments[0])){const n=arguments[0].replace(/3:::/,"");let g=null;try{g=JSON.parse(n)}catch{}if((g==null?void 0:g.SID)===2&&((t=g==null?void 0:g.Q)!=null&&t.length)){for(const y of g.Q)if(/Property/i.test(y.t)&&y.v&&objectSome(y.v,(i,k)=>/0.17.2/i.test(k))){y.v[3]=2,y.v[42]="PocketFans201807/24020203",arguments[0]=`3:::${JSON.stringify(g)}`;break}}if((g==null?void 0:g.SID)===24&&((r=g==null?void 0:g.Q)!=null&&r.length)){for(const y of g.Q)if(/Property/i.test(y.t)&&y.v&&objectSome(y.v,(i,k)=>/0.17.2/i.test(k))){y.v[6]=2,arguments[0]=`3:::${JSON.stringify(g)}`;break}}if((g==null?void 0:g.SID)===13&&((e=g==null?void 0:g.Q)!=null&&e.length)){for(const y of g.Q)if(/Property/i.test(y.t)&&y.v){y.v[3]=2,y.v[6]=2,y.v[42]="PocketFans201807/24020203",arguments[0]=`3:::${JSON.stringify(g)}`;break}}}return orgSend.apply(this,arguments)};
