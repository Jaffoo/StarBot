var DM=Object.defineProperty;var UM=(t,r,e)=>r in t?DM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var dd=(t,r,e)=>(UM(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))n(g);new MutationObserver(g=>{for(const y of g)if(y.type==="childList")for(const i of y.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(g){const y={};return g.integrity&&(y.integrity=g.integrity),g.referrerPolicy&&(y.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?y.credentials="include":g.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function n(g){if(g.ep)return;g.ep=!0;const y=e(g);fetch(g.href,y)}})();/**
* @vue/shared v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t,r){const e=new Set(t.split(","));return r?n=>e.has(n.toLowerCase()):n=>e.has(n)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},hasOwnProperty$f=Object.prototype.hasOwnProperty,hasOwn=(t,r)=>hasOwnProperty$f.call(t,r),isArray$3=Array.isArray,isMap$2=t=>toTypeString(t)==="[object Map]",isSet$2=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isFunction$3=t=>typeof t=="function",isString$2=t=>typeof t=="string",isSymbol$1=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject$2(t)||isFunction$3(t))&&isFunction$3(t.then)&&isFunction$3(t.catch),objectToString$1=Object.prototype.toString,toTypeString=t=>objectToString$1.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$2=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$2(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(r,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,r)=>!Object.is(t,r),invokeArrayFns=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},def=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},looseToNumber=t=>{const r=parseFloat(t);return isNaN(r)?t:r},toNumber$1=t=>{const r=isString$2(t)?Number(t):NaN;return isNaN(r)?t:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray$3(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],g=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(g)for(const y in g)r[y]=g[y]}return r}else if(isString$2(t)||isObject$2(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const r={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(t){let r="";if(isString$2(t))r=t;else if(isArray$3(t))for(let e=0;e<t.length;e++){const n=normalizeClass(t[e]);n&&(r+=n+" ")}else if(isObject$2(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,r){if(t.length!==r.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=looseEqual(t[n],r[n]);return e}function looseEqual(t,r){if(t===r)return!0;let e=isDate$1(t),n=isDate$1(r);if(e||n)return e&&n?t.getTime()===r.getTime():!1;if(e=isSymbol$1(t),n=isSymbol$1(r),e||n)return t===r;if(e=isArray$3(t),n=isArray$3(r),e||n)return e&&n?looseCompareArrays(t,r):!1;if(e=isObject$2(t),n=isObject$2(r),e||n){if(!e||!n)return!1;const g=Object.keys(t).length,y=Object.keys(r).length;if(g!==y)return!1;for(const i in t){const k=t.hasOwnProperty(i),L=r.hasOwnProperty(i);if(k&&!L||!k&&L||!looseEqual(t[i],r[i]))return!1}}return String(t)===String(r)}function looseIndexOf(t,r){return t.findIndex(e=>looseEqual(e,r))}const toDisplayString=t=>isString$2(t)?t:t==null?"":isArray$3(t)||isObject$2(t)&&(t.toString===objectToString$1||!isFunction$3(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,r)=>r&&r.__v_isRef?replacer(t,r.value):isMap$2(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,g],y)=>(e[stringifySymbol(n,y)+" =>"]=g,e),{})}:isSet$2(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>stringifySymbol(e))}:isSymbol$1(r)?stringifySymbol(r):isObject$2(r)&&!isArray$3(r)&&!isPlainObject$2(r)?String(r):r,stringifySymbol=(t,r="")=>{var e;return isSymbol$1(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=e}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,r=activeEffectScope){r&&r.active&&r.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeEffect;class ReactiveEffect{constructor(r,e,n,g){this.fn=r,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,g)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let r=0;r<this._depsLength;r++){const e=this.deps[r];if(e.computed&&(triggerComputed(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(r){this._dirtyLevel=r?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=shouldTrack,e=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=e,shouldTrack=r}}stop(){var r;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(r=this.onStop)==null||r.call(this),this.active=!1)}}function triggerComputed(t){return t.value}function preCleanupEffect(t){t._trackId++,t._depsLength=0}function postCleanupEffect(t){if(t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)cleanupDepEffect(t.deps[r],t);t.deps.length=t._depsLength}}function cleanupDepEffect(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const n=t.deps[t._depsLength];n!==r?(n&&cleanupDepEffect(n,t),t.deps[t._depsLength++]=r):t._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(t,r,e){pauseScheduling();for(const n of t.keys()){let g;n._dirtyLevel<r&&(g??(g=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=r),n._shouldSchedule&&(g??(g=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&queueEffectSchedulers.push(n.scheduler)))}resetScheduling()}const createDep=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(t,r,e){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let g=n.get(e);g||n.set(e,g=createDep(()=>n.delete(e))),trackEffect(activeEffect,g)}}function trigger(t,r,e,n,g,y){const i=targetMap.get(t);if(!i)return;let k=[];if(r==="clear")k=[...i.values()];else if(e==="length"&&isArray$3(t)){const L=Number(n);i.forEach(($,V)=>{(V==="length"||!isSymbol$1(V)&&V>=L)&&k.push($)})}else switch(e!==void 0&&k.push(i.get(e)),r){case"add":isArray$3(t)?isIntegerKey(e)&&k.push(i.get("length")):(k.push(i.get(ITERATE_KEY)),isMap$2(t)&&k.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(t)||(k.push(i.get(ITERATE_KEY)),isMap$2(t)&&k.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(t)&&k.push(i.get(ITERATE_KEY));break}pauseScheduling();for(const L of k)L&&triggerEffects(L,4);resetScheduling()}function getDepFromReactive(t,r){var e;return(e=targetMap.get(t))==null?void 0:e.get(r)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$1)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=toRaw(this);for(let y=0,i=this.length;y<i;y++)track(n,"get",y+"");const g=n[r](...e);return g===-1||g===!1?n[r](...e.map(toRaw)):g}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){pauseTracking(),pauseScheduling();const n=toRaw(this)[r].apply(this,e);return resetScheduling(),resetTracking(),n}}),t}function hasOwnProperty$e(t){const r=toRaw(this);return track(r,"has",t),r.hasOwnProperty(t)}class BaseReactiveHandler{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const g=this._isReadonly,y=this._isShallow;if(e==="__v_isReactive")return!g;if(e==="__v_isReadonly")return g;if(e==="__v_isShallow")return y;if(e==="__v_raw")return n===(g?y?shallowReadonlyMap:readonlyMap:y?shallowReactiveMap:reactiveMap).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const i=isArray$3(r);if(!g){if(i&&hasOwn(arrayInstrumentations,e))return Reflect.get(arrayInstrumentations,e,n);if(e==="hasOwnProperty")return hasOwnProperty$e}const k=Reflect.get(r,e,n);return(isSymbol$1(e)?builtInSymbols.has(e):isNonTrackableKeys(e))||(g||track(r,"get",e),y)?k:isRef(k)?i&&isIntegerKey(e)?k:k.value:isObject$2(k)?g?readonly(k):reactive(k):k}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,e,n,g){let y=r[e];if(!this._isShallow){const L=isReadonly(y);if(!isShallow(n)&&!isReadonly(n)&&(y=toRaw(y),n=toRaw(n)),!isArray$3(r)&&isRef(y)&&!isRef(n))return L?!1:(y.value=n,!0)}const i=isArray$3(r)&&isIntegerKey(e)?Number(e)<r.length:hasOwn(r,e),k=Reflect.set(r,e,n,g);return r===toRaw(g)&&(i?hasChanged(n,y)&&trigger(r,"set",e,n):trigger(r,"add",e,n)),k}deleteProperty(r,e){const n=hasOwn(r,e);r[e];const g=Reflect.deleteProperty(r,e);return g&&n&&trigger(r,"delete",e,void 0),g}has(r,e){const n=Reflect.has(r,e);return(!isSymbol$1(e)||!builtInSymbols.has(e))&&track(r,"has",e),n}ownKeys(r){return track(r,"iterate",isArray$3(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,r,e=!1,n=!1){t=t.__v_raw;const g=toRaw(t),y=toRaw(r);e||(hasChanged(r,y)&&track(g,"get",r),track(g,"get",y));const{has:i}=getProto(g),k=n?toShallow:e?toReadonly:toReactive;if(i.call(g,r))return k(t.get(r));if(i.call(g,y))return k(t.get(y));t!==g&&t.get(r)}function has(t,r=!1){const e=this.__v_raw,n=toRaw(e),g=toRaw(t);return r||(hasChanged(t,g)&&track(n,"has",t),track(n,"has",g)),t===g?e.has(t):e.has(t)||e.has(g)}function size(t,r=!1){return t=t.__v_raw,!r&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const r=toRaw(this);return getProto(r).has.call(r,t)||(r.add(t),trigger(r,"add",t,t)),this}function set$1(t,r){r=toRaw(r);const e=toRaw(this),{has:n,get:g}=getProto(e);let y=n.call(e,t);y||(t=toRaw(t),y=n.call(e,t));const i=g.call(e,t);return e.set(t,r),y?hasChanged(r,i)&&trigger(e,"set",t,r):trigger(e,"add",t,r),this}function deleteEntry(t){const r=toRaw(this),{has:e,get:n}=getProto(r);let g=e.call(r,t);g||(t=toRaw(t),g=e.call(r,t)),n&&n.call(r,t);const y=r.delete(t);return g&&trigger(r,"delete",t,void 0),y}function clear(){const t=toRaw(this),r=t.size!==0,e=t.clear();return r&&trigger(t,"clear",void 0,void 0),e}function createForEach(t,r){return function(n,g){const y=this,i=y.__v_raw,k=toRaw(i),L=r?toShallow:t?toReadonly:toReactive;return!t&&track(k,"iterate",ITERATE_KEY),i.forEach(($,V)=>n.call(g,L($),L(V),y))}}function createIterableMethod(t,r,e){return function(...n){const g=this.__v_raw,y=toRaw(g),i=isMap$2(y),k=t==="entries"||t===Symbol.iterator&&i,L=t==="keys"&&i,$=g[t](...n),V=e?toShallow:r?toReadonly:toReactive;return!r&&track(y,"iterate",L?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:z,done:re}=$.next();return re?{value:z,done:re}:{value:k?[V(z[0]),V(z[1])]:V(z),done:re}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(){const t={get(y){return get$1(this,y)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(y){return get$1(this,y,!1,!0)},get size(){return size(this)},has,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},e={get(y){return get$1(this,y,!0)},get size(){return size(this,!0)},has(y){return has.call(this,y,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(y){return get$1(this,y,!0,!0)},get size(){return size(this,!0)},has(y){return has.call(this,y,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=createIterableMethod(y,!1,!1),e[y]=createIterableMethod(y,!0,!1),r[y]=createIterableMethod(y,!1,!0),n[y]=createIterableMethod(y,!0,!0)}),[t,e,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,r){const e=r?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,g,y)=>g==="__v_isReactive"?!t:g==="__v_isReadonly"?t:g==="__v_raw"?n:Reflect.get(hasOwn(e,g)&&g in n?e:n,g,y)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,r,e,n,g){if(!isObject$2(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const y=g.get(t);if(y)return y;const i=getTargetType(t);if(i===0)return t;const k=new Proxy(t,i===2?n:e);return g.set(t,k),k}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const r=t&&t.__v_raw;return r?toRaw(r):t}function markRaw(t){return Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;class ComputedRefImpl{constructor(r,e,n,g){this.getter=r,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>r(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!g,this.__v_isReadonly=n}get value(){const r=toRaw(this);return(!r._cacheable||r.effect.dirty)&&hasChanged(r._value,r._value=r.effect.run())&&triggerRefValue(r,4),trackRefValue(r),r.effect._dirtyLevel>=2&&triggerRefValue(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function computed$1(t,r,e=!1){let n,g;const y=isFunction$3(t);return y?(n=t,g=NOOP):(n=t.get,g=t.set),new ComputedRefImpl(n,g,y||!g,e)}function trackRefValue(t){var r;shouldTrack&&activeEffect&&(t=toRaw(t),trackEffect(activeEffect,(r=t.dep)!=null?r:t.dep=createDep(()=>t.dep=void 0,t instanceof ComputedRefImpl?t:void 0)))}function triggerRefValue(t,r=4,e){t=toRaw(t);const n=t.dep;n&&triggerEffects(n,r)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,r){return isRef(t)?t:new RefImpl(t,r)}class RefImpl{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:toRaw(r),this._value=e?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const e=this.__v_isShallow||isShallow(r)||isReadonly(r);r=e?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:toReactive(r),triggerRefValue(this,4))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,r,e)=>unref(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const g=t[r];return isRef(g)&&!isRef(e)?(g.value=e,!0):Reflect.set(t,r,e,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const r=isArray$3(t)?new Array(t.length):{};for(const e in t)r[e]=propertyToRef(t,e);return r}class ObjectRefImpl{constructor(r,e,n){this._object=r,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,r,e){return isRef(t)?t:isFunction$3(t)?new GetterRefImpl(t):isObject$2(t)&&arguments.length>1?propertyToRef(t,r,e):ref(t)}function propertyToRef(t,r,e){const n=t[r];return isRef(n)?n:new ObjectRefImpl(t,r,e)}/**
* @vue/runtime-core v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(t,...r){pauseTracking();const e=stack.length?stack[stack.length-1].component:null,n=e&&e.appContext.config.warnHandler,g=getComponentTrace();if(n)callWithErrorHandling(n,e,11,[t+r.join(""),e&&e.proxy,g.map(({vnode:y})=>`at <${formatComponentName(e,y.type)}>`).join(`
`),g]);else{const y=[`[Vue warn]: ${t}`,...r];g.length&&y.push(`
`,...formatTrace(g)),console.warn(...y)}resetTracking()}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const r=[];for(;t;){const e=r[0];e&&e.vnode===t?e.recurseCount++:r.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return r}function formatTrace(t){const r=[];return t.forEach((e,n)=>{r.push(...n===0?[]:[`
`],...formatTraceEntry(e))}),r}function formatTraceEntry({vnode:t,recurseCount:r}){const e=r>0?`... (${r} recursive calls)`:"",n=t.component?t.component.parent==null:!1,g=` at <${formatComponentName(t.component,t.type,n)}`,y=">"+e;return t.props?[g,...formatProps(t.props),y]:[g+y]}function formatProps(t){const r=[],e=Object.keys(t);return e.slice(0,3).forEach(n=>{r.push(...formatProp(n,t[n]))}),e.length>3&&r.push(" ..."),r}function formatProp(t,r,e){return isString$2(r)?(r=JSON.stringify(r),e?r:[`${t}=${r}`]):typeof r=="number"||typeof r=="boolean"||r==null?e?r:[`${t}=${r}`]:isRef(r)?(r=formatProp(t,toRaw(r.value),!0),e?r:[`${t}=Ref<`,r,">"]):isFunction$3(r)?[`${t}=fn${r.name?`<${r.name}>`:""}`]:(r=toRaw(r),e?r:[`${t}=`,r])}function callWithErrorHandling(t,r,e,n){try{return n?t(...n):t()}catch(g){handleError(g,r,e)}}function callWithAsyncErrorHandling(t,r,e,n){if(isFunction$3(t)){const y=callWithErrorHandling(t,r,e,n);return y&&isPromise(y)&&y.catch(i=>{handleError(i,r,e)}),y}const g=[];for(let y=0;y<t.length;y++)g.push(callWithAsyncErrorHandling(t[y],r,e,n));return g}function handleError(t,r,e,n=!0){const g=r?r.vnode:null;if(r){let y=r.parent;const i=r.proxy,k=`https://vuejs.org/error-reference/#runtime-${e}`;for(;y;){const $=y.ec;if($){for(let V=0;V<$.length;V++)if($[V](t,i,k)===!1)return}y=y.parent}const L=r.appContext.config.errorHandler;if(L){callWithErrorHandling(L,null,10,[t,i,k]);return}}logError(t,e,g,n)}function logError(t,r,e,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const r=currentFlushPromise||resolvedPromise;return t?r.then(this?t.bind(this):t):r}function findInsertionIndex(t){let r=flushIndex+1,e=queue.length;for(;r<e;){const n=r+e>>>1,g=queue[n],y=getId(g);y<t||y===t&&g.pre?r=n+1:e=n}return r}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const r=queue.indexOf(t);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(t){isArray$3(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,r,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const n=queue[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;queue.splice(e,1),e--,n()}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)].sort((e,n)=>getId(e)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,r)=>{const e=getId(t)-getId(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let g=e;const y=r.startsWith("update:"),i=y&&r.slice(7);if(i&&i in n){const V=`${i==="modelValue"?"model":i}Modifiers`,{number:z,trim:re}=n[V]||EMPTY_OBJ;re&&(g=e.map(oe=>isString$2(oe)?oe.trim():oe)),z&&(g=e.map(looseToNumber))}let k,L=n[k=toHandlerKey(r)]||n[k=toHandlerKey(camelize(r))];!L&&y&&(L=n[k=toHandlerKey(hyphenate(r))]),L&&callWithAsyncErrorHandling(L,t,6,g);const $=n[k+"Once"];if($){if(!t.emitted)t.emitted={};else if(t.emitted[k])return;t.emitted[k]=!0,callWithAsyncErrorHandling($,t,6,g)}}function normalizeEmitsOptions(t,r,e=!1){const n=r.emitsCache,g=n.get(t);if(g!==void 0)return g;const y=t.emits;let i={},k=!1;if(!isFunction$3(t)){const L=$=>{const V=normalizeEmitsOptions($,r,!0);V&&(k=!0,extend$1(i,V))};!e&&r.mixins.length&&r.mixins.forEach(L),t.extends&&L(t.extends),t.mixins&&t.mixins.forEach(L)}return!y&&!k?(isObject$2(t)&&n.set(t,null),null):(isArray$3(y)?y.forEach(L=>i[L]=null):extend$1(i,y),isObject$2(t)&&n.set(t,i),i)}function isEmitListener(t,r){return!t||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(t,r[0].toLowerCase()+r.slice(1))||hasOwn(t,hyphenate(r))||hasOwn(t,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const r=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,r}function withCtx(t,r=currentRenderingInstance,e){if(!r||t._n)return t;const n=(...g)=>{n._d&&setBlockTracking(-1);const y=setCurrentRenderingInstance(r);let i;try{i=t(...g)}finally{setCurrentRenderingInstance(y),n._d&&setBlockTracking(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:r,vnode:e,proxy:n,withProxy:g,props:y,propsOptions:[i],slots:k,attrs:L,emit:$,render:V,renderCache:z,data:re,setupState:oe,ctx:le,inheritAttrs:ue}=t;let ie,ae;const Fe=setCurrentRenderingInstance(t);try{if(e.shapeFlag&4){const Ie=g||n,Ve=Ie;ie=normalizeVNode(V.call(Ve,Ie,z,y,oe,re,le)),ae=L}else{const Ie=r;ie=normalizeVNode(Ie.length>1?Ie(y,{attrs:L,slots:k,emit:$}):Ie(y,null)),ae=r.props?L:getFunctionalFallthrough(L)}}catch(Ie){blockStack.length=0,handleError(Ie,t,1),ie=createVNode(Comment)}let de=ie;if(ae&&ue!==!1){const Ie=Object.keys(ae),{shapeFlag:Ve}=de;Ie.length&&Ve&7&&(i&&Ie.some(isModelListener)&&(ae=filterModelListeners(ae,i)),de=cloneVNode(de,ae))}return e.dirs&&(de=cloneVNode(de),de.dirs=de.dirs?de.dirs.concat(e.dirs):e.dirs),e.transition&&(de.transition=e.transition),ie=de,setCurrentRenderingInstance(Fe),ie}const getFunctionalFallthrough=t=>{let r;for(const e in t)(e==="class"||e==="style"||isOn(e))&&((r||(r={}))[e]=t[e]);return r},filterModelListeners=(t,r)=>{const e={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function shouldUpdateComponent(t,r,e){const{props:n,children:g,component:y}=t,{props:i,children:k,patchFlag:L}=r,$=y.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&L>=0){if(L&1024)return!0;if(L&16)return n?hasPropsChanged(n,i,$):!!i;if(L&8){const V=r.dynamicProps;for(let z=0;z<V.length;z++){const re=V[z];if(i[re]!==n[re]&&!isEmitListener($,re))return!0}}}else return(g||k)&&(!k||!k.$stable)?!0:n===i?!1:n?i?hasPropsChanged(n,i,$):!0:!!i;return!1}function hasPropsChanged(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let g=0;g<n.length;g++){const y=n[g];if(r[y]!==t[y]&&!isEmitListener(e,y))return!0}return!1}function updateHOCHostEl({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,r){return resolveAsset(COMPONENTS,t,!0,r)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$2(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,r,e=!0,n=!1){const g=currentRenderingInstance||currentInstance;if(g){const y=g.type;if(t===COMPONENTS){const k=getComponentName(y,!1);if(k&&(k===r||k===camelize(r)||k===capitalize$1(camelize(r))))return y}const i=resolve(g[t]||y[t],r)||resolve(g.appContext[t],r);return!i&&n?y:i}}function resolve(t,r){return t&&(t[r]||t[camelize(r)]||t[capitalize$1(camelize(r))])}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,r){r&&r.pendingBranch?isArray$3(t)?r.effects.push(...t):r.effects.push(t):queuePostFlushCb(t)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,r){return doWatch(t,null,r)}const INITIAL_WATCHER_VALUE={};function watch(t,r,e){return doWatch(t,r,e)}function doWatch(t,r,{immediate:e,deep:n,flush:g,once:y,onTrack:i,onTrigger:k}=EMPTY_OBJ){if(r&&y){const kt=r;r=(...At)=>{kt(...At),Ve()}}const L=currentInstance,$=kt=>n===!0?kt:traverse(kt,n===!1?1:void 0);let V,z=!1,re=!1;if(isRef(t)?(V=()=>t.value,z=isShallow(t)):isReactive(t)?(V=()=>$(t),z=!0):isArray$3(t)?(re=!0,z=t.some(kt=>isReactive(kt)||isShallow(kt)),V=()=>t.map(kt=>{if(isRef(kt))return kt.value;if(isReactive(kt))return $(kt);if(isFunction$3(kt))return callWithErrorHandling(kt,L,2)})):isFunction$3(t)?r?V=()=>callWithErrorHandling(t,L,2):V=()=>(oe&&oe(),callWithAsyncErrorHandling(t,L,3,[le])):V=NOOP,r&&n){const kt=V;V=()=>traverse(kt())}let oe,le=kt=>{oe=de.onStop=()=>{callWithErrorHandling(kt,L,4),oe=de.onStop=void 0}},ue;if(isInSSRComponentSetup)if(le=NOOP,r?e&&callWithAsyncErrorHandling(r,L,3,[V(),re?[]:void 0,le]):V(),g==="sync"){const kt=useSSRContext();ue=kt.__watcherHandles||(kt.__watcherHandles=[])}else return NOOP;let ie=re?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const ae=()=>{if(!(!de.active||!de.dirty))if(r){const kt=de.run();(n||z||(re?kt.some((At,ze)=>hasChanged(At,ie[ze])):hasChanged(kt,ie)))&&(oe&&oe(),callWithAsyncErrorHandling(r,L,3,[kt,ie===INITIAL_WATCHER_VALUE?void 0:re&&ie[0]===INITIAL_WATCHER_VALUE?[]:ie,le]),ie=kt)}else de.run()};ae.allowRecurse=!!r;let Fe;g==="sync"?Fe=ae:g==="post"?Fe=()=>queuePostRenderEffect(ae,L&&L.suspense):(ae.pre=!0,L&&(ae.id=L.uid),Fe=()=>queueJob(ae));const de=new ReactiveEffect(V,NOOP,Fe),Ie=getCurrentScope(),Ve=()=>{de.stop(),Ie&&remove(Ie.effects,de)};return r?e?ae():ie=de.run():g==="post"?queuePostRenderEffect(de.run.bind(de),L&&L.suspense):de.run(),ue&&ue.push(Ve),Ve}function instanceWatch(t,r,e){const n=this.proxy,g=isString$2(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let y;isFunction$3(r)?y=r:(y=r.handler,e=r);const i=setCurrentInstance(this),k=doWatch(g,y.bind(n),e);return i(),k}function createPathGetter(t,r){const e=r.split(".");return()=>{let n=t;for(let g=0;g<e.length&&n;g++)n=n[e[g]];return n}}function traverse(t,r,e=0,n){if(!isObject$2(t)||t.__v_skip)return t;if(r&&r>0){if(e>=r)return t;e++}if(n=n||new Set,n.has(t))return t;if(n.add(t),isRef(t))traverse(t.value,r,e,n);else if(isArray$3(t))for(let g=0;g<t.length;g++)traverse(t[g],r,e,n);else if(isSet$2(t)||isMap$2(t))t.forEach(g=>{traverse(g,r,e,n)});else if(isPlainObject$2(t))for(const g in t)traverse(t[g],r,e,n);return t}function withDirectives(t,r){if(currentRenderingInstance===null)return t;const e=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,n=t.dirs||(t.dirs=[]);for(let g=0;g<r.length;g++){let[y,i,k,L=EMPTY_OBJ]=r[g];y&&(isFunction$3(y)&&(y={mounted:y,updated:y}),y.deep&&traverse(i),n.push({dir:y,instance:e,value:i,oldValue:void 0,arg:k,modifiers:L}))}return t}function invokeDirectiveHook(t,r,e,n){const g=t.dirs,y=r&&r.dirs;for(let i=0;i<g.length;i++){const k=g[i];y&&(k.oldValue=y[i].value);let L=k.dir[n];L&&(pauseTracking(),callWithAsyncErrorHandling(L,e,8,[t.el,k,t,r]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();return()=>{const g=r.default&&getTransitionRawChildren(r.default(),!0);if(!g||!g.length)return;let y=g[0];if(g.length>1){for(const re of g)if(re.type!==Comment){y=re;break}}const i=toRaw(t),{mode:k}=i;if(n.isLeaving)return emptyPlaceholder(y);const L=getKeepAliveChild(y);if(!L)return emptyPlaceholder(y);const $=resolveTransitionHooks(L,i,n,e);setTransitionHooks(L,$);const V=e.subTree,z=V&&getKeepAliveChild(V);if(z&&z.type!==Comment&&!isSameVNodeType(L,z)){const re=resolveTransitionHooks(z,i,n,e);if(setTransitionHooks(z,re),k==="out-in")return n.isLeaving=!0,re.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},emptyPlaceholder(y);k==="in-out"&&L.type!==Comment&&(re.delayLeave=(oe,le,ue)=>{const ie=getLeavingNodesForType(n,z);ie[String(z.key)]=z,oe[leaveCbKey]=()=>{le(),oe[leaveCbKey]=void 0,delete $.delayedLeave},$.delayedLeave=ue})}return y}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function resolveTransitionHooks(t,r,e,n){const{appear:g,mode:y,persisted:i=!1,onBeforeEnter:k,onEnter:L,onAfterEnter:$,onEnterCancelled:V,onBeforeLeave:z,onLeave:re,onAfterLeave:oe,onLeaveCancelled:le,onBeforeAppear:ue,onAppear:ie,onAfterAppear:ae,onAppearCancelled:Fe}=r,de=String(t.key),Ie=getLeavingNodesForType(e,t),Ve=(ze,Et)=>{ze&&callWithAsyncErrorHandling(ze,n,9,Et)},kt=(ze,Et)=>{const cr=Et[1];Ve(ze,Et),isArray$3(ze)?ze.every(er=>er.length<=1)&&cr():ze.length<=1&&cr()},At={mode:y,persisted:i,beforeEnter(ze){let Et=k;if(!e.isMounted)if(g)Et=ue||k;else return;ze[leaveCbKey]&&ze[leaveCbKey](!0);const cr=Ie[de];cr&&isSameVNodeType(t,cr)&&cr.el[leaveCbKey]&&cr.el[leaveCbKey](),Ve(Et,[ze])},enter(ze){let Et=L,cr=$,er=V;if(!e.isMounted)if(g)Et=ie||L,cr=ae||$,er=Fe||V;else return;let or=!1;const dr=ze[enterCbKey$1]=lr=>{or||(or=!0,lr?Ve(er,[ze]):Ve(cr,[ze]),At.delayedLeave&&At.delayedLeave(),ze[enterCbKey$1]=void 0)};Et?kt(Et,[ze,dr]):dr()},leave(ze,Et){const cr=String(t.key);if(ze[enterCbKey$1]&&ze[enterCbKey$1](!0),e.isUnmounting)return Et();Ve(z,[ze]);let er=!1;const or=ze[leaveCbKey]=dr=>{er||(er=!0,Et(),dr?Ve(le,[ze]):Ve(oe,[ze]),ze[leaveCbKey]=void 0,Ie[cr]===t&&delete Ie[cr])};Ie[cr]=t,re?kt(re,[ze,or]):or()},clone(ze){return resolveTransitionHooks(ze,r,e,n)}};return At}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,r){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function getTransitionRawChildren(t,r=!1,e){let n=[],g=0;for(let y=0;y<t.length;y++){let i=t[y];const k=e==null?i.key:String(e)+String(i.key!=null?i.key:y);i.type===Fragment?(i.patchFlag&128&&g++,n=n.concat(getTransitionRawChildren(i.children,r,k))):(r||i.type!==Comment)&&n.push(k!=null?cloneVNode(i,{key:k}):i)}if(g>1)for(let y=0;y<n.length;y++)n[y].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,r){return isFunction$3(t)?(()=>extend$1({name:t.name},r,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,r){registerKeepAliveHook(t,"a",r)}function onDeactivated(t,r){registerKeepAliveHook(t,"da",r)}function registerKeepAliveHook(t,r,e=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let g=e;for(;g;){if(g.isDeactivated)return;g=g.parent}return t()});if(injectHook(r,n,e),e){let g=e.parent;for(;g&&g.parent;)isKeepAlive(g.parent.vnode)&&injectToKeepAliveRoot(n,r,e,g),g=g.parent}}function injectToKeepAliveRoot(t,r,e,n){const g=injectHook(r,t,n,!0);onUnmounted(()=>{remove(n[r],g)},e)}function injectHook(t,r,e=currentInstance,n=!1){if(e){const g=e[t]||(e[t]=[]),y=r.__weh||(r.__weh=(...i)=>{if(e.isUnmounted)return;pauseTracking();const k=setCurrentInstance(e),L=callWithAsyncErrorHandling(r,e,t,i);return k(),resetTracking(),L});return n?g.unshift(y):g.push(y),y}}const createHook=t=>(r,e=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>r(...n),e),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,r=currentInstance){injectHook("ec",t,r)}function renderList(t,r,e,n){let g;const y=e&&e[n];if(isArray$3(t)||isString$2(t)){g=new Array(t.length);for(let i=0,k=t.length;i<k;i++)g[i]=r(t[i],i,void 0,y&&y[i])}else if(typeof t=="number"){g=new Array(t);for(let i=0;i<t;i++)g[i]=r(i+1,i,void 0,y&&y[i])}else if(isObject$2(t))if(t[Symbol.iterator])g=Array.from(t,(i,k)=>r(i,k,void 0,y&&y[k]));else{const i=Object.keys(t);g=new Array(i.length);for(let k=0,L=i.length;k<L;k++){const $=i[k];g[k]=r(t[$],$,k,y&&y[k])}}else g=[];return e&&(e[n]=g),g}function createSlots(t,r){for(let e=0;e<r.length;e++){const n=r[e];if(isArray$3(n))for(let g=0;g<n.length;g++)t[n[g].name]=n[g].fn;else n&&(t[n.name]=n.key?(...g)=>{const y=n.fn(...g);return y&&(y.key=n.key),y}:n.fn)}return t}function renderSlot(t,r,e={},n,g){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return r!=="default"&&(e.name=r),createVNode("slot",e,n&&n());let y=t[r];y&&y._c&&(y._d=!1),openBlock();const i=y&&ensureValidVNode(y(e)),k=createBlock(Fragment,{key:e.key||i&&i.key||`_${r}`},i||(n?n():[]),i&&t._===1?64:-2);return!g&&k.scopeId&&(k.slotScopeIds=[k.scopeId+"-s"]),y&&y._c&&(y._d=!0),k}function ensureValidVNode(t){return t.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?t:null}function toHandlers(t,r){const e={};for(const n in t)e[r&&/[A-Z]/.test(n)?`on:${n}`:toHandlerKey(n)]=t[n];return e}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,r)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,r),PublicInstanceProxyHandlers={get({_:t},r){const{ctx:e,setupState:n,data:g,props:y,accessCache:i,type:k,appContext:L}=t;let $;if(r[0]!=="$"){const oe=i[r];if(oe!==void 0)switch(oe){case 1:return n[r];case 2:return g[r];case 4:return e[r];case 3:return y[r]}else{if(hasSetupBinding(n,r))return i[r]=1,n[r];if(g!==EMPTY_OBJ&&hasOwn(g,r))return i[r]=2,g[r];if(($=t.propsOptions[0])&&hasOwn($,r))return i[r]=3,y[r];if(e!==EMPTY_OBJ&&hasOwn(e,r))return i[r]=4,e[r];shouldCacheAccess&&(i[r]=0)}}const V=publicPropertiesMap[r];let z,re;if(V)return r==="$attrs"&&track(t,"get",r),V(t);if((z=k.__cssModules)&&(z=z[r]))return z;if(e!==EMPTY_OBJ&&hasOwn(e,r))return i[r]=4,e[r];if(re=L.config.globalProperties,hasOwn(re,r))return re[r]},set({_:t},r,e){const{data:n,setupState:g,ctx:y}=t;return hasSetupBinding(g,r)?(g[r]=e,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=e,!0):hasOwn(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(y[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:g,propsOptions:y}},i){let k;return!!e[i]||t!==EMPTY_OBJ&&hasOwn(t,i)||hasSetupBinding(r,i)||(k=y[0])&&hasOwn(k,i)||hasOwn(n,i)||hasOwn(publicPropertiesMap,i)||hasOwn(g.config.globalProperties,i)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:hasOwn(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function normalizePropsOrEmits(t){return isArray$3(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const r=resolveMergedOptions(t),e=t.proxy,n=t.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,t,"bc");const{data:g,computed:y,methods:i,watch:k,provide:L,inject:$,created:V,beforeMount:z,mounted:re,beforeUpdate:oe,updated:le,activated:ue,deactivated:ie,beforeDestroy:ae,beforeUnmount:Fe,destroyed:de,unmounted:Ie,render:Ve,renderTracked:kt,renderTriggered:At,errorCaptured:ze,serverPrefetch:Et,expose:cr,inheritAttrs:er,components:or,directives:dr,filters:lr}=r;if($&&resolveInjections($,n,null),i)for(const ar in i){const gr=i[ar];isFunction$3(gr)&&(n[ar]=gr.bind(e))}if(g){const ar=g.call(e,e);isObject$2(ar)&&(t.data=reactive(ar))}if(shouldCacheAccess=!0,y)for(const ar in y){const gr=y[ar],pr=isFunction$3(gr)?gr.bind(e,e):isFunction$3(gr.get)?gr.get.bind(e,e):NOOP,hr=!isFunction$3(gr)&&isFunction$3(gr.set)?gr.set.bind(e):NOOP,Cr=computed({get:pr,set:hr});Object.defineProperty(n,ar,{enumerable:!0,configurable:!0,get:()=>Cr.value,set:wr=>Cr.value=wr})}if(k)for(const ar in k)createWatcher(k[ar],n,e,ar);if(L){const ar=isFunction$3(L)?L.call(e):L;Reflect.ownKeys(ar).forEach(gr=>{provide(gr,ar[gr])})}V&&callHook$1(V,t,"c");function ur(ar,gr){isArray$3(gr)?gr.forEach(pr=>ar(pr.bind(e))):gr&&ar(gr.bind(e))}if(ur(onBeforeMount,z),ur(onMounted,re),ur(onBeforeUpdate,oe),ur(onUpdated,le),ur(onActivated,ue),ur(onDeactivated,ie),ur(onErrorCaptured,ze),ur(onRenderTracked,kt),ur(onRenderTriggered,At),ur(onBeforeUnmount,Fe),ur(onUnmounted,Ie),ur(onServerPrefetch,Et),isArray$3(cr))if(cr.length){const ar=t.exposed||(t.exposed={});cr.forEach(gr=>{Object.defineProperty(ar,gr,{get:()=>e[gr],set:pr=>e[gr]=pr})})}else t.exposed||(t.exposed={});Ve&&t.render===NOOP&&(t.render=Ve),er!=null&&(t.inheritAttrs=er),or&&(t.components=or),dr&&(t.directives=dr)}function resolveInjections(t,r,e=NOOP){isArray$3(t)&&(t=normalizeInject(t));for(const n in t){const g=t[n];let y;isObject$2(g)?"default"in g?y=inject(g.from||n,g.default,!0):y=inject(g.from||n):y=inject(g),isRef(y)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>y.value,set:i=>y.value=i}):r[n]=y}}function callHook$1(t,r,e){callWithAsyncErrorHandling(isArray$3(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function createWatcher(t,r,e,n){const g=n.includes(".")?createPathGetter(e,n):()=>e[n];if(isString$2(t)){const y=r[t];isFunction$3(y)&&watch(g,y)}else if(isFunction$3(t))watch(g,t.bind(e));else if(isObject$2(t))if(isArray$3(t))t.forEach(y=>createWatcher(y,r,e,n));else{const y=isFunction$3(t.handler)?t.handler.bind(e):r[t.handler];isFunction$3(y)&&watch(g,y,t)}}function resolveMergedOptions(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:g,optionsCache:y,config:{optionMergeStrategies:i}}=t.appContext,k=y.get(r);let L;return k?L=k:!g.length&&!e&&!n?L=r:(L={},g.length&&g.forEach($=>mergeOptions$1(L,$,i,!0)),mergeOptions$1(L,r,i)),isObject$2(r)&&y.set(r,L),L}function mergeOptions$1(t,r,e,n=!1){const{mixins:g,extends:y}=r;y&&mergeOptions$1(t,y,e,!0),g&&g.forEach(i=>mergeOptions$1(t,i,e,!0));for(const i in r)if(!(n&&i==="expose")){const k=internalOptionMergeStrats[i]||e&&e[i];t[i]=k?k(t[i],r[i]):r[i]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,r){return r?t?function(){return extend$1(isFunction$3(t)?t.call(this,this):t,isFunction$3(r)?r.call(this,this):r)}:r:t}function mergeInject(t,r){return mergeObjectOptions(normalizeInject(t),normalizeInject(r))}function normalizeInject(t){if(isArray$3(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function mergeAsArray(t,r){return t?[...new Set([].concat(t,r))]:r}function mergeObjectOptions(t,r){return t?extend$1(Object.create(null),t,r):r}function mergeEmitsOrPropsOptions(t,r){return t?isArray$3(t)&&isArray$3(r)?[...new Set([...t,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(t,r){if(!t)return r;if(!r)return t;const e=extend$1(Object.create(null),t);for(const n in r)e[n]=mergeAsArray(t[n],r[n]);return e}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,r){return function(n,g=null){isFunction$3(n)||(n=extend$1({},n)),g!=null&&!isObject$2(g)&&(g=null);const y=createAppContext(),i=new WeakSet;let k=!1;const L=y.app={_uid:uid$1++,_component:n,_props:g,_container:null,_context:y,_instance:null,version,get config(){return y.config},set config($){},use($,...V){return i.has($)||($&&isFunction$3($.install)?(i.add($),$.install(L,...V)):isFunction$3($)&&(i.add($),$(L,...V))),L},mixin($){return y.mixins.includes($)||y.mixins.push($),L},component($,V){return V?(y.components[$]=V,L):y.components[$]},directive($,V){return V?(y.directives[$]=V,L):y.directives[$]},mount($,V,z){if(!k){const re=createVNode(n,g);return re.appContext=y,z===!0?z="svg":z===!1&&(z=void 0),V&&r?r(re,$):t(re,$,z),k=!0,L._container=$,$.__vue_app__=L,getExposeProxy(re.component)||re.component.proxy}},unmount(){k&&(t(null,L._container),delete L._container.__vue_app__)},provide($,V){return y.provides[$]=V,L},runWithContext($){const V=currentApp;currentApp=L;try{return $()}finally{currentApp=V}}};return L}}let currentApp=null;function provide(t,r){if(currentInstance){let e=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===e&&(e=currentInstance.provides=Object.create(n)),e[t]=r}}function inject(t,r,e=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const g=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(g&&t in g)return g[t];if(arguments.length>1)return e&&isFunction$3(r)?r.call(n&&n.proxy):r}}function initProps(t,r,e,n=!1){const g={},y={};def(y,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,r,g,y);for(const i in t.propsOptions[0])i in g||(g[i]=void 0);e?t.props=n?g:shallowReactive(g):t.type.props?t.props=g:t.props=y,t.attrs=y}function updateProps(t,r,e,n){const{props:g,attrs:y,vnode:{patchFlag:i}}=t,k=toRaw(g),[L]=t.propsOptions;let $=!1;if((n||i>0)&&!(i&16)){if(i&8){const V=t.vnode.dynamicProps;for(let z=0;z<V.length;z++){let re=V[z];if(isEmitListener(t.emitsOptions,re))continue;const oe=r[re];if(L)if(hasOwn(y,re))oe!==y[re]&&(y[re]=oe,$=!0);else{const le=camelize(re);g[le]=resolvePropValue(L,k,le,oe,t,!1)}else oe!==y[re]&&(y[re]=oe,$=!0)}}}else{setFullProps(t,r,g,y)&&($=!0);let V;for(const z in k)(!r||!hasOwn(r,z)&&((V=hyphenate(z))===z||!hasOwn(r,V)))&&(L?e&&(e[z]!==void 0||e[V]!==void 0)&&(g[z]=resolvePropValue(L,k,z,void 0,t,!0)):delete g[z]);if(y!==k)for(const z in y)(!r||!hasOwn(r,z))&&(delete y[z],$=!0)}$&&trigger(t,"set","$attrs")}function setFullProps(t,r,e,n){const[g,y]=t.propsOptions;let i=!1,k;if(r)for(let L in r){if(isReservedProp(L))continue;const $=r[L];let V;g&&hasOwn(g,V=camelize(L))?!y||!y.includes(V)?e[V]=$:(k||(k={}))[V]=$:isEmitListener(t.emitsOptions,L)||(!(L in n)||$!==n[L])&&(n[L]=$,i=!0)}if(y){const L=toRaw(e),$=k||EMPTY_OBJ;for(let V=0;V<y.length;V++){const z=y[V];e[z]=resolvePropValue(g,L,z,$[z],t,!hasOwn($,z))}}return i}function resolvePropValue(t,r,e,n,g,y){const i=t[e];if(i!=null){const k=hasOwn(i,"default");if(k&&n===void 0){const L=i.default;if(i.type!==Function&&!i.skipFactory&&isFunction$3(L)){const{propsDefaults:$}=g;if(e in $)n=$[e];else{const V=setCurrentInstance(g);n=$[e]=L.call(null,r),V()}}else n=L}i[0]&&(y&&!k?n=!1:i[1]&&(n===""||n===hyphenate(e))&&(n=!0))}return n}function normalizePropsOptions(t,r,e=!1){const n=r.propsCache,g=n.get(t);if(g)return g;const y=t.props,i={},k=[];let L=!1;if(!isFunction$3(t)){const V=z=>{L=!0;const[re,oe]=normalizePropsOptions(z,r,!0);extend$1(i,re),oe&&k.push(...oe)};!e&&r.mixins.length&&r.mixins.forEach(V),t.extends&&V(t.extends),t.mixins&&t.mixins.forEach(V)}if(!y&&!L)return isObject$2(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$3(y))for(let V=0;V<y.length;V++){const z=camelize(y[V]);validatePropName(z)&&(i[z]=EMPTY_OBJ)}else if(y)for(const V in y){const z=camelize(V);if(validatePropName(z)){const re=y[V],oe=i[z]=isArray$3(re)||isFunction$3(re)?{type:re}:extend$1({},re);if(oe){const le=getTypeIndex(Boolean,oe.type),ue=getTypeIndex(String,oe.type);oe[0]=le>-1,oe[1]=ue<0||le<ue,(le>-1||hasOwn(oe,"default"))&&k.push(z)}}}const $=[i,k];return isObject$2(t)&&n.set(t,$),$}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}function getType(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function isSameType(t,r){return getType(t)===getType(r)}function getTypeIndex(t,r){return isArray$3(r)?r.findIndex(e=>isSameType(e,t)):isFunction$3(r)&&isSameType(r,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$3(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,r,e)=>{if(r._n)return r;const n=withCtx((...g)=>normalizeSlotValue(r(...g)),e);return n._c=!1,n},normalizeObjectSlots=(t,r,e)=>{const n=t._ctx;for(const g in t){if(isInternalKey(g))continue;const y=t[g];if(isFunction$3(y))r[g]=normalizeSlot(g,y,n);else if(y!=null){const i=normalizeSlotValue(y);r[g]=()=>i}}},normalizeVNodeSlots=(t,r)=>{const e=normalizeSlotValue(r);t.slots.default=()=>e},initSlots=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=toRaw(r),def(r,"_",e)):normalizeObjectSlots(r,t.slots={})}else t.slots={},r&&normalizeVNodeSlots(t,r);def(t.slots,InternalObjectKey,1)},updateSlots=(t,r,e)=>{const{vnode:n,slots:g}=t;let y=!0,i=EMPTY_OBJ;if(n.shapeFlag&32){const k=r._;k?e&&k===1?y=!1:(extend$1(g,r),!e&&k===1&&delete g._):(y=!r.$stable,normalizeObjectSlots(r,g)),i=r}else r&&(normalizeVNodeSlots(t,r),i={default:1});if(y)for(const k in g)!isInternalKey(k)&&i[k]==null&&delete g[k]};function setRef(t,r,e,n,g=!1){if(isArray$3(t)){t.forEach((re,oe)=>setRef(re,r&&(isArray$3(r)?r[oe]:r),e,n,g));return}if(isAsyncWrapper(n)&&!g)return;const y=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,i=g?null:y,{i:k,r:L}=t,$=r&&r.r,V=k.refs===EMPTY_OBJ?k.refs={}:k.refs,z=k.setupState;if($!=null&&$!==L&&(isString$2($)?(V[$]=null,hasOwn(z,$)&&(z[$]=null)):isRef($)&&($.value=null)),isFunction$3(L))callWithErrorHandling(L,k,12,[i,V]);else{const re=isString$2(L),oe=isRef(L);if(re||oe){const le=()=>{if(t.f){const ue=re?hasOwn(z,L)?z[L]:V[L]:L.value;g?isArray$3(ue)&&remove(ue,y):isArray$3(ue)?ue.includes(y)||ue.push(y):re?(V[L]=[y],hasOwn(z,L)&&(z[L]=V[L])):(L.value=[y],t.k&&(V[t.k]=L.value))}else re?(V[L]=i,hasOwn(z,L)&&(z[L]=i)):oe&&(L.value=i,t.k&&(V[t.k]=i))};i?(le.id=-1,queuePostRenderEffect(le,e)):le()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,r){const e=getGlobalThis();e.__VUE__=!0;const{insert:n,remove:g,patchProp:y,createElement:i,createText:k,createComment:L,setText:$,setElementText:V,parentNode:z,nextSibling:re,setScopeId:oe=NOOP,insertStaticContent:le}=t,ue=(yr,Tr,Br,Lr=null,Fr=null,qr=null,Vr=void 0,Qr=null,Tn=!!Tr.dynamicChildren)=>{if(yr===Tr)return;yr&&!isSameVNodeType(yr,Tr)&&(Lr=Er(yr),wr(yr,Fr,qr,!0),yr=null),Tr.patchFlag===-2&&(Tn=!1,Tr.dynamicChildren=null);const{type:xn,ref:Xr,shapeFlag:Vn}=Tr;switch(xn){case Text:ie(yr,Tr,Br,Lr);break;case Comment:ae(yr,Tr,Br,Lr);break;case Static:yr==null&&Fe(Tr,Br,Lr,Vr);break;case Fragment:or(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn);break;default:Vn&1?Ve(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn):Vn&6?dr(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn):(Vn&64||Vn&128)&&xn.process(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn,Nr)}Xr!=null&&Fr&&setRef(Xr,yr&&yr.ref,qr,Tr||yr,!Tr)},ie=(yr,Tr,Br,Lr)=>{if(yr==null)n(Tr.el=k(Tr.children),Br,Lr);else{const Fr=Tr.el=yr.el;Tr.children!==yr.children&&$(Fr,Tr.children)}},ae=(yr,Tr,Br,Lr)=>{yr==null?n(Tr.el=L(Tr.children||""),Br,Lr):Tr.el=yr.el},Fe=(yr,Tr,Br,Lr)=>{[yr.el,yr.anchor]=le(yr.children,Tr,Br,Lr,yr.el,yr.anchor)},de=({el:yr,anchor:Tr},Br,Lr)=>{let Fr;for(;yr&&yr!==Tr;)Fr=re(yr),n(yr,Br,Lr),yr=Fr;n(Tr,Br,Lr)},Ie=({el:yr,anchor:Tr})=>{let Br;for(;yr&&yr!==Tr;)Br=re(yr),g(yr),yr=Br;g(Tr)},Ve=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn)=>{Tr.type==="svg"?Vr="svg":Tr.type==="math"&&(Vr="mathml"),yr==null?kt(Tr,Br,Lr,Fr,qr,Vr,Qr,Tn):Et(yr,Tr,Fr,qr,Vr,Qr,Tn)},kt=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr)=>{let Tn,xn;const{props:Xr,shapeFlag:Vn,transition:Zr,dirs:Nn}=yr;if(Tn=yr.el=i(yr.type,qr,Xr&&Xr.is,Xr),Vn&8?V(Tn,yr.children):Vn&16&&ze(yr.children,Tn,null,Lr,Fr,resolveChildrenNamespace(yr,qr),Vr,Qr),Nn&&invokeDirectiveHook(yr,null,Lr,"created"),At(Tn,yr,yr.scopeId,Vr,Lr),Xr){for(const wn in Xr)wn!=="value"&&!isReservedProp(wn)&&y(Tn,wn,null,Xr[wn],qr,yr.children,Lr,Fr,Ar);"value"in Xr&&y(Tn,"value",null,Xr.value,qr),(xn=Xr.onVnodeBeforeMount)&&invokeVNodeHook(xn,Lr,yr)}Nn&&invokeDirectiveHook(yr,null,Lr,"beforeMount");const Jr=needTransition(Fr,Zr);Jr&&Zr.beforeEnter(Tn),n(Tn,Tr,Br),((xn=Xr&&Xr.onVnodeMounted)||Jr||Nn)&&queuePostRenderEffect(()=>{xn&&invokeVNodeHook(xn,Lr,yr),Jr&&Zr.enter(Tn),Nn&&invokeDirectiveHook(yr,null,Lr,"mounted")},Fr)},At=(yr,Tr,Br,Lr,Fr)=>{if(Br&&oe(yr,Br),Lr)for(let qr=0;qr<Lr.length;qr++)oe(yr,Lr[qr]);if(Fr){let qr=Fr.subTree;if(Tr===qr){const Vr=Fr.vnode;At(yr,Vr,Vr.scopeId,Vr.slotScopeIds,Fr.parent)}}},ze=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn=0)=>{for(let xn=Tn;xn<yr.length;xn++){const Xr=yr[xn]=Qr?cloneIfMounted(yr[xn]):normalizeVNode(yr[xn]);ue(null,Xr,Tr,Br,Lr,Fr,qr,Vr,Qr)}},Et=(yr,Tr,Br,Lr,Fr,qr,Vr)=>{const Qr=Tr.el=yr.el;let{patchFlag:Tn,dynamicChildren:xn,dirs:Xr}=Tr;Tn|=yr.patchFlag&16;const Vn=yr.props||EMPTY_OBJ,Zr=Tr.props||EMPTY_OBJ;let Nn;if(Br&&toggleRecurse(Br,!1),(Nn=Zr.onVnodeBeforeUpdate)&&invokeVNodeHook(Nn,Br,Tr,yr),Xr&&invokeDirectiveHook(Tr,yr,Br,"beforeUpdate"),Br&&toggleRecurse(Br,!0),xn?cr(yr.dynamicChildren,xn,Qr,Br,Lr,resolveChildrenNamespace(Tr,Fr),qr):Vr||gr(yr,Tr,Qr,null,Br,Lr,resolveChildrenNamespace(Tr,Fr),qr,!1),Tn>0){if(Tn&16)er(Qr,Tr,Vn,Zr,Br,Lr,Fr);else if(Tn&2&&Vn.class!==Zr.class&&y(Qr,"class",null,Zr.class,Fr),Tn&4&&y(Qr,"style",Vn.style,Zr.style,Fr),Tn&8){const Jr=Tr.dynamicProps;for(let wn=0;wn<Jr.length;wn++){const Un=Jr[wn],_n=Vn[Un],Pn=Zr[Un];(Pn!==_n||Un==="value")&&y(Qr,Un,_n,Pn,Fr,yr.children,Br,Lr,Ar)}}Tn&1&&yr.children!==Tr.children&&V(Qr,Tr.children)}else!Vr&&xn==null&&er(Qr,Tr,Vn,Zr,Br,Lr,Fr);((Nn=Zr.onVnodeUpdated)||Xr)&&queuePostRenderEffect(()=>{Nn&&invokeVNodeHook(Nn,Br,Tr,yr),Xr&&invokeDirectiveHook(Tr,yr,Br,"updated")},Lr)},cr=(yr,Tr,Br,Lr,Fr,qr,Vr)=>{for(let Qr=0;Qr<Tr.length;Qr++){const Tn=yr[Qr],xn=Tr[Qr],Xr=Tn.el&&(Tn.type===Fragment||!isSameVNodeType(Tn,xn)||Tn.shapeFlag&70)?z(Tn.el):Br;ue(Tn,xn,Xr,null,Lr,Fr,qr,Vr,!0)}},er=(yr,Tr,Br,Lr,Fr,qr,Vr)=>{if(Br!==Lr){if(Br!==EMPTY_OBJ)for(const Qr in Br)!isReservedProp(Qr)&&!(Qr in Lr)&&y(yr,Qr,Br[Qr],null,Vr,Tr.children,Fr,qr,Ar);for(const Qr in Lr){if(isReservedProp(Qr))continue;const Tn=Lr[Qr],xn=Br[Qr];Tn!==xn&&Qr!=="value"&&y(yr,Qr,xn,Tn,Vr,Tr.children,Fr,qr,Ar)}"value"in Lr&&y(yr,"value",Br.value,Lr.value,Vr)}},or=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn)=>{const xn=Tr.el=yr?yr.el:k(""),Xr=Tr.anchor=yr?yr.anchor:k("");let{patchFlag:Vn,dynamicChildren:Zr,slotScopeIds:Nn}=Tr;Nn&&(Qr=Qr?Qr.concat(Nn):Nn),yr==null?(n(xn,Br,Lr),n(Xr,Br,Lr),ze(Tr.children||[],Br,Xr,Fr,qr,Vr,Qr,Tn)):Vn>0&&Vn&64&&Zr&&yr.dynamicChildren?(cr(yr.dynamicChildren,Zr,Br,Fr,qr,Vr,Qr),(Tr.key!=null||Fr&&Tr===Fr.subTree)&&traverseStaticChildren(yr,Tr,!0)):gr(yr,Tr,Br,Xr,Fr,qr,Vr,Qr,Tn)},dr=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn)=>{Tr.slotScopeIds=Qr,yr==null?Tr.shapeFlag&512?Fr.ctx.activate(Tr,Br,Lr,Vr,Tn):lr(Tr,Br,Lr,Fr,qr,Vr,Tn):nr(yr,Tr,Tn)},lr=(yr,Tr,Br,Lr,Fr,qr,Vr)=>{const Qr=yr.component=createComponentInstance(yr,Lr,Fr);if(isKeepAlive(yr)&&(Qr.ctx.renderer=Nr),setupComponent(Qr),Qr.asyncDep){if(Fr&&Fr.registerDep(Qr,ur),!yr.el){const Tn=Qr.subTree=createVNode(Comment);ae(null,Tn,Tr,Br)}}else ur(Qr,yr,Tr,Br,Fr,qr,Vr)},nr=(yr,Tr,Br)=>{const Lr=Tr.component=yr.component;if(shouldUpdateComponent(yr,Tr,Br))if(Lr.asyncDep&&!Lr.asyncResolved){ar(Lr,Tr,Br);return}else Lr.next=Tr,invalidateJob(Lr.update),Lr.effect.dirty=!0,Lr.update();else Tr.el=yr.el,Lr.vnode=Tr},ur=(yr,Tr,Br,Lr,Fr,qr,Vr)=>{const Qr=()=>{if(yr.isMounted){let{next:Xr,bu:Vn,u:Zr,parent:Nn,vnode:Jr}=yr;{const Cn=locateNonHydratedAsyncRoot(yr);if(Cn){Xr&&(Xr.el=Jr.el,ar(yr,Xr,Vr)),Cn.asyncDep.then(()=>{yr.isUnmounted||Qr()});return}}let wn=Xr,Un;toggleRecurse(yr,!1),Xr?(Xr.el=Jr.el,ar(yr,Xr,Vr)):Xr=Jr,Vn&&invokeArrayFns(Vn),(Un=Xr.props&&Xr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Un,Nn,Xr,Jr),toggleRecurse(yr,!0);const _n=renderComponentRoot(yr),Pn=yr.subTree;yr.subTree=_n,ue(Pn,_n,z(Pn.el),Er(Pn),yr,Fr,qr),Xr.el=_n.el,wn===null&&updateHOCHostEl(yr,_n.el),Zr&&queuePostRenderEffect(Zr,Fr),(Un=Xr.props&&Xr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Un,Nn,Xr,Jr),Fr)}else{let Xr;const{el:Vn,props:Zr}=Tr,{bm:Nn,m:Jr,parent:wn}=yr,Un=isAsyncWrapper(Tr);if(toggleRecurse(yr,!1),Nn&&invokeArrayFns(Nn),!Un&&(Xr=Zr&&Zr.onVnodeBeforeMount)&&invokeVNodeHook(Xr,wn,Tr),toggleRecurse(yr,!0),Vn&&br){const _n=()=>{yr.subTree=renderComponentRoot(yr),br(Vn,yr.subTree,yr,Fr,null)};Un?Tr.type.__asyncLoader().then(()=>!yr.isUnmounted&&_n()):_n()}else{const _n=yr.subTree=renderComponentRoot(yr);ue(null,_n,Br,Lr,yr,Fr,qr),Tr.el=_n.el}if(Jr&&queuePostRenderEffect(Jr,Fr),!Un&&(Xr=Zr&&Zr.onVnodeMounted)){const _n=Tr;queuePostRenderEffect(()=>invokeVNodeHook(Xr,wn,_n),Fr)}(Tr.shapeFlag&256||wn&&isAsyncWrapper(wn.vnode)&&wn.vnode.shapeFlag&256)&&yr.a&&queuePostRenderEffect(yr.a,Fr),yr.isMounted=!0,Tr=Br=Lr=null}},Tn=yr.effect=new ReactiveEffect(Qr,NOOP,()=>queueJob(xn),yr.scope),xn=yr.update=()=>{Tn.dirty&&Tn.run()};xn.id=yr.uid,toggleRecurse(yr,!0),xn()},ar=(yr,Tr,Br)=>{Tr.component=yr;const Lr=yr.vnode.props;yr.vnode=Tr,yr.next=null,updateProps(yr,Tr.props,Lr,Br),updateSlots(yr,Tr.children,Br),pauseTracking(),flushPreFlushCbs(yr),resetTracking()},gr=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn=!1)=>{const xn=yr&&yr.children,Xr=yr?yr.shapeFlag:0,Vn=Tr.children,{patchFlag:Zr,shapeFlag:Nn}=Tr;if(Zr>0){if(Zr&128){hr(xn,Vn,Br,Lr,Fr,qr,Vr,Qr,Tn);return}else if(Zr&256){pr(xn,Vn,Br,Lr,Fr,qr,Vr,Qr,Tn);return}}Nn&8?(Xr&16&&Ar(xn,Fr,qr),Vn!==xn&&V(Br,Vn)):Xr&16?Nn&16?hr(xn,Vn,Br,Lr,Fr,qr,Vr,Qr,Tn):Ar(xn,Fr,qr,!0):(Xr&8&&V(Br,""),Nn&16&&ze(Vn,Br,Lr,Fr,qr,Vr,Qr,Tn))},pr=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn)=>{yr=yr||EMPTY_ARR,Tr=Tr||EMPTY_ARR;const xn=yr.length,Xr=Tr.length,Vn=Math.min(xn,Xr);let Zr;for(Zr=0;Zr<Vn;Zr++){const Nn=Tr[Zr]=Tn?cloneIfMounted(Tr[Zr]):normalizeVNode(Tr[Zr]);ue(yr[Zr],Nn,Br,null,Fr,qr,Vr,Qr,Tn)}xn>Xr?Ar(yr,Fr,qr,!0,!1,Vn):ze(Tr,Br,Lr,Fr,qr,Vr,Qr,Tn,Vn)},hr=(yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn)=>{let xn=0;const Xr=Tr.length;let Vn=yr.length-1,Zr=Xr-1;for(;xn<=Vn&&xn<=Zr;){const Nn=yr[xn],Jr=Tr[xn]=Tn?cloneIfMounted(Tr[xn]):normalizeVNode(Tr[xn]);if(isSameVNodeType(Nn,Jr))ue(Nn,Jr,Br,null,Fr,qr,Vr,Qr,Tn);else break;xn++}for(;xn<=Vn&&xn<=Zr;){const Nn=yr[Vn],Jr=Tr[Zr]=Tn?cloneIfMounted(Tr[Zr]):normalizeVNode(Tr[Zr]);if(isSameVNodeType(Nn,Jr))ue(Nn,Jr,Br,null,Fr,qr,Vr,Qr,Tn);else break;Vn--,Zr--}if(xn>Vn){if(xn<=Zr){const Nn=Zr+1,Jr=Nn<Xr?Tr[Nn].el:Lr;for(;xn<=Zr;)ue(null,Tr[xn]=Tn?cloneIfMounted(Tr[xn]):normalizeVNode(Tr[xn]),Br,Jr,Fr,qr,Vr,Qr,Tn),xn++}}else if(xn>Zr)for(;xn<=Vn;)wr(yr[xn],Fr,qr,!0),xn++;else{const Nn=xn,Jr=xn,wn=new Map;for(xn=Jr;xn<=Zr;xn++){const Ho=Tr[xn]=Tn?cloneIfMounted(Tr[xn]):normalizeVNode(Tr[xn]);Ho.key!=null&&wn.set(Ho.key,xn)}let Un,_n=0;const Pn=Zr-Jr+1;let Cn=!1,vn=0;const no=new Array(Pn);for(xn=0;xn<Pn;xn++)no[xn]=0;for(xn=Nn;xn<=Vn;xn++){const Ho=yr[xn];if(_n>=Pn){wr(Ho,Fr,qr,!0);continue}let Vo;if(Ho.key!=null)Vo=wn.get(Ho.key);else for(Un=Jr;Un<=Zr;Un++)if(no[Un-Jr]===0&&isSameVNodeType(Ho,Tr[Un])){Vo=Un;break}Vo===void 0?wr(Ho,Fr,qr,!0):(no[Vo-Jr]=xn+1,Vo>=vn?vn=Vo:Cn=!0,ue(Ho,Tr[Vo],Br,null,Fr,qr,Vr,Qr,Tn),_n++)}const Ro=Cn?getSequence(no):EMPTY_ARR;for(Un=Ro.length-1,xn=Pn-1;xn>=0;xn--){const Ho=Jr+xn,Vo=Tr[Ho],Po=Ho+1<Xr?Tr[Ho+1].el:Lr;no[xn]===0?ue(null,Vo,Br,Po,Fr,qr,Vr,Qr,Tn):Cn&&(Un<0||xn!==Ro[Un]?Cr(Vo,Br,Po,2):Un--)}}},Cr=(yr,Tr,Br,Lr,Fr=null)=>{const{el:qr,type:Vr,transition:Qr,children:Tn,shapeFlag:xn}=yr;if(xn&6){Cr(yr.component.subTree,Tr,Br,Lr);return}if(xn&128){yr.suspense.move(Tr,Br,Lr);return}if(xn&64){Vr.move(yr,Tr,Br,Nr);return}if(Vr===Fragment){n(qr,Tr,Br);for(let Vn=0;Vn<Tn.length;Vn++)Cr(Tn[Vn],Tr,Br,Lr);n(yr.anchor,Tr,Br);return}if(Vr===Static){de(yr,Tr,Br);return}if(Lr!==2&&xn&1&&Qr)if(Lr===0)Qr.beforeEnter(qr),n(qr,Tr,Br),queuePostRenderEffect(()=>Qr.enter(qr),Fr);else{const{leave:Vn,delayLeave:Zr,afterLeave:Nn}=Qr,Jr=()=>n(qr,Tr,Br),wn=()=>{Vn(qr,()=>{Jr(),Nn&&Nn()})};Zr?Zr(qr,Jr,wn):wn()}else n(qr,Tr,Br)},wr=(yr,Tr,Br,Lr=!1,Fr=!1)=>{const{type:qr,props:Vr,ref:Qr,children:Tn,dynamicChildren:xn,shapeFlag:Xr,patchFlag:Vn,dirs:Zr}=yr;if(Qr!=null&&setRef(Qr,null,Br,yr,!0),Xr&256){Tr.ctx.deactivate(yr);return}const Nn=Xr&1&&Zr,Jr=!isAsyncWrapper(yr);let wn;if(Jr&&(wn=Vr&&Vr.onVnodeBeforeUnmount)&&invokeVNodeHook(wn,Tr,yr),Xr&6)_r(yr.component,Br,Lr);else{if(Xr&128){yr.suspense.unmount(Br,Lr);return}Nn&&invokeDirectiveHook(yr,null,Tr,"beforeUnmount"),Xr&64?yr.type.remove(yr,Tr,Br,Fr,Nr,Lr):xn&&(qr!==Fragment||Vn>0&&Vn&64)?Ar(xn,Tr,Br,!1,!0):(qr===Fragment&&Vn&384||!Fr&&Xr&16)&&Ar(Tn,Tr,Br),Lr&&Sr(yr)}(Jr&&(wn=Vr&&Vr.onVnodeUnmounted)||Nn)&&queuePostRenderEffect(()=>{wn&&invokeVNodeHook(wn,Tr,yr),Nn&&invokeDirectiveHook(yr,null,Tr,"unmounted")},Br)},Sr=yr=>{const{type:Tr,el:Br,anchor:Lr,transition:Fr}=yr;if(Tr===Fragment){mr(Br,Lr);return}if(Tr===Static){Ie(yr);return}const qr=()=>{g(Br),Fr&&!Fr.persisted&&Fr.afterLeave&&Fr.afterLeave()};if(yr.shapeFlag&1&&Fr&&!Fr.persisted){const{leave:Vr,delayLeave:Qr}=Fr,Tn=()=>Vr(Br,qr);Qr?Qr(yr.el,qr,Tn):Tn()}else qr()},mr=(yr,Tr)=>{let Br;for(;yr!==Tr;)Br=re(yr),g(yr),yr=Br;g(Tr)},_r=(yr,Tr,Br)=>{const{bum:Lr,scope:Fr,update:qr,subTree:Vr,um:Qr}=yr;Lr&&invokeArrayFns(Lr),Fr.stop(),qr&&(qr.active=!1,wr(Vr,yr,Tr,Br)),Qr&&queuePostRenderEffect(Qr,Tr),queuePostRenderEffect(()=>{yr.isUnmounted=!0},Tr),Tr&&Tr.pendingBranch&&!Tr.isUnmounted&&yr.asyncDep&&!yr.asyncResolved&&yr.suspenseId===Tr.pendingId&&(Tr.deps--,Tr.deps===0&&Tr.resolve())},Ar=(yr,Tr,Br,Lr=!1,Fr=!1,qr=0)=>{for(let Vr=qr;Vr<yr.length;Vr++)wr(yr[Vr],Tr,Br,Lr,Fr)},Er=yr=>yr.shapeFlag&6?Er(yr.component.subTree):yr.shapeFlag&128?yr.suspense.next():re(yr.anchor||yr.el);let sr=!1;const xr=(yr,Tr,Br)=>{yr==null?Tr._vnode&&wr(Tr._vnode,null,null,!0):ue(Tr._vnode||null,yr,Tr,null,null,null,Br),sr||(sr=!0,flushPreFlushCbs(),flushPostFlushCbs(),sr=!1),Tr._vnode=yr},Nr={p:ue,um:wr,m:Cr,r:Sr,mt:lr,mc:ze,pc:gr,pbc:cr,n:Er,o:t};let Mr,br;return r&&([Mr,br]=r(Nr)),{render:xr,hydrate:Mr,createApp:createAppAPI(xr,Mr)}}function resolveChildrenNamespace({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function toggleRecurse({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function needTransition(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(t,r,e=!1){const n=t.children,g=r.children;if(isArray$3(n)&&isArray$3(g))for(let y=0;y<n.length;y++){const i=n[y];let k=g[y];k.shapeFlag&1&&!k.dynamicChildren&&((k.patchFlag<=0||k.patchFlag===32)&&(k=g[y]=cloneIfMounted(g[y]),k.el=i.el),e||traverseStaticChildren(i,k)),k.type===Text&&(k.el=i.el)}}function getSequence(t){const r=t.slice(),e=[0];let n,g,y,i,k;const L=t.length;for(n=0;n<L;n++){const $=t[n];if($!==0){if(g=e[e.length-1],t[g]<$){r[n]=g,e.push(n);continue}for(y=0,i=e.length-1;y<i;)k=y+i>>1,t[e[k]]<$?y=k+1:i=k;$<t[e[y]]&&(y>0&&(r[n]=e[y-1]),e[y]=n)}}for(y=e.length,i=e[y-1];y-- >0;)e[y]=i,i=r[i];return e}function locateNonHydratedAsyncRoot(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:locateNonHydratedAsyncRoot(r)}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,isTargetMathML=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,resolveTarget=(t,r)=>{const e=t&&t.to;return isString$2(e)?r?r(e):null:e},TeleportImpl={name:"Teleport",__isTeleport:!0,process(t,r,e,n,g,y,i,k,L,$){const{mc:V,pc:z,pbc:re,o:{insert:oe,querySelector:le,createText:ue,createComment:ie}}=$,ae=isTeleportDisabled(r.props);let{shapeFlag:Fe,children:de,dynamicChildren:Ie}=r;if(t==null){const Ve=r.el=ue(""),kt=r.anchor=ue("");oe(Ve,e,n),oe(kt,e,n);const At=r.target=resolveTarget(r.props,le),ze=r.targetAnchor=ue("");At&&(oe(ze,At),i==="svg"||isTargetSVG(At)?i="svg":(i==="mathml"||isTargetMathML(At))&&(i="mathml"));const Et=(cr,er)=>{Fe&16&&V(de,cr,er,g,y,i,k,L)};ae?Et(e,kt):At&&Et(At,ze)}else{r.el=t.el;const Ve=r.anchor=t.anchor,kt=r.target=t.target,At=r.targetAnchor=t.targetAnchor,ze=isTeleportDisabled(t.props),Et=ze?e:kt,cr=ze?Ve:At;if(i==="svg"||isTargetSVG(kt)?i="svg":(i==="mathml"||isTargetMathML(kt))&&(i="mathml"),Ie?(re(t.dynamicChildren,Ie,Et,g,y,i,k),traverseStaticChildren(t,r,!0)):L||z(t,r,Et,cr,g,y,i,k,!1),ae)ze?r.props&&t.props&&r.props.to!==t.props.to&&(r.props.to=t.props.to):moveTeleport(r,e,Ve,$,1);else if((r.props&&r.props.to)!==(t.props&&t.props.to)){const er=r.target=resolveTarget(r.props,le);er&&moveTeleport(r,er,null,$,0)}else ze&&moveTeleport(r,kt,At,$,1)}updateCssVars(r)},remove(t,r,e,n,{um:g,o:{remove:y}},i){const{shapeFlag:k,children:L,anchor:$,targetAnchor:V,target:z,props:re}=t;if(z&&y(V),i&&y($),k&16){const oe=i||!isTeleportDisabled(re);for(let le=0;le<L.length;le++){const ue=L[le];g(ue,r,e,oe,!!ue.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,r,e,{o:{insert:n},m:g},y=2){y===0&&n(t.targetAnchor,r,e);const{el:i,anchor:k,shapeFlag:L,children:$,props:V}=t,z=y===2;if(z&&n(i,r,e),(!z||isTeleportDisabled(V))&&L&16)for(let re=0;re<$.length;re++)g($[re],r,e,2);z&&n(k,r,e)}function hydrateTeleport(t,r,e,n,g,y,{o:{nextSibling:i,parentNode:k,querySelector:L}},$){const V=r.target=resolveTarget(r.props,L);if(V){const z=V._lpa||V.firstChild;if(r.shapeFlag&16)if(isTeleportDisabled(r.props))r.anchor=$(i(t),r,k(t),e,n,g,y),r.targetAnchor=z;else{r.anchor=i(t);let re=z;for(;re;)if(re=i(re),re&&re.nodeType===8&&re.data==="teleport anchor"){r.targetAnchor=re,V._lpa=r.targetAnchor&&i(r.targetAnchor);break}$(z,r,V,e,n,g,y)}updateCssVars(r)}return r.anchor&&i(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const r=t.ctx;if(r&&r.ut){let e=t.children[0].el;for(;e&&e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",r.uid),e=e.nextSibling;r.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,r,e,n,g,y){return setupBlock(createBaseVNode(t,r,e,n,g,y,!0))}function createBlock(t,r,e,n,g){return setupBlock(createVNode(t,r,e,n,g,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,r){return t.type===r.type&&t.key===r.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?isString$2(t)||isRef(t)||isFunction$3(t)?{i:currentRenderingInstance,r:t,k:r,f:!!e}:t:null);function createBaseVNode(t,r=null,e=null,n=0,g=null,y=t===Fragment?0:1,i=!1,k=!1){const L={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:n,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return k?(normalizeChildren(L,e),y&128&&t.normalize(L)):e&&(L.shapeFlag|=isString$2(e)?8:16),isBlockTreeEnabled>0&&!i&&currentBlock&&(L.patchFlag>0||y&6)&&L.patchFlag!==32&&currentBlock.push(L),L}const createVNode=_createVNode;function _createVNode(t,r=null,e=null,n=0,g=null,y=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const k=cloneVNode(t,r,!0);return e&&normalizeChildren(k,e),isBlockTreeEnabled>0&&!y&&currentBlock&&(k.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=k:currentBlock.push(k)),k.patchFlag|=-2,k}if(isClassComponent(t)&&(t=t.__vccOpts),r){r=guardReactiveProps(r);let{class:k,style:L}=r;k&&!isString$2(k)&&(r.class=normalizeClass(k)),isObject$2(L)&&(isProxy(L)&&!isArray$3(L)&&(L=extend$1({},L)),r.style=normalizeStyle(L))}const i=isString$2(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction$3(t)?2:0;return createBaseVNode(t,r,e,n,g,i,y,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,r,e=!1){const{props:n,ref:g,patchFlag:y,children:i}=t,k=r?mergeProps(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:k,key:k&&normalizeKey(k),ref:r&&r.ref?e&&g?isArray$3(g)?g.concat(normalizeRef(r)):[g,normalizeRef(r)]:normalizeRef(r):g,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:i,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Fragment?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",r=0){return createVNode(Text,null,t,r)}function createCommentVNode(t="",r=!1){return r?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$3(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(isArray$3(r))e=16;else if(typeof r=="object")if(n&65){const g=r.default;g&&(g._c&&(g._d=!1),normalizeChildren(t,g()),g._c&&(g._d=!0));return}else{e=32;const g=r._;!g&&!(InternalObjectKey in r)?r._ctx=currentRenderingInstance:g===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else isFunction$3(r)?(r={default:r,_ctx:currentRenderingInstance},e=32):(r=String(r),n&64?(e=16,r=[createTextVNode(r)]):e=8);t.children=r,t.shapeFlag|=e}function mergeProps(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const g in n)if(g==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(g==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(g)){const y=r[g],i=n[g];i&&y!==i&&!(isArray$3(y)&&y.includes(i))&&(r[g]=y?[].concat(y,i):i)}else g!==""&&(r[g]=n[g])}return r}function invokeVNodeHook(t,r,e,n=null){callWithAsyncErrorHandling(t,r,7,[e,n])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(t,r,e){const n=t.type,g=(r?r.appContext:t.appContext)||emptyAppContext,y={uid:uid$2++,vnode:t,type:n,parent:r,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,g),emitsOptions:normalizeEmitsOptions(n,g),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=r?r.root:y,y.emit=emit.bind(null,y),t.ce&&t.ce(y),y}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),r=(e,n)=>{let g;return(g=t[e])||(g=t[e]=[]),g.push(n),y=>{g.length>1?g.forEach(i=>i(y)):g[0](y)}};internalSetCurrentInstance=r("__VUE_INSTANCE_SETTERS__",e=>currentInstance=e),setInSSRSetupState=r("__VUE_SSR_SETTERS__",e=>isInSSRComponentSetup=e)}const setCurrentInstance=t=>{const r=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(r)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,r=!1){r&&setInSSRSetupState(r);const{props:e,children:n}=t.vnode,g=isStatefulComponent(t);initProps(t,e,g,r),initSlots(t,n);const y=g?setupStatefulComponent(t,r):void 0;return r&&setInSSRSetupState(!1),y}function setupStatefulComponent(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=e;if(n){const g=t.setupContext=n.length>1?createSetupContext(t):null,y=setCurrentInstance(t);pauseTracking();const i=callWithErrorHandling(n,t,0,[t.props,g]);if(resetTracking(),y(),isPromise(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),r)return i.then(k=>{handleSetupResult(t,k,r)}).catch(k=>{handleError(k,t,0)});t.asyncDep=i}else handleSetupResult(t,i,r)}else finishComponentSetup(t,r)}function handleSetupResult(t,r,e){isFunction$3(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:isObject$2(r)&&(t.setupState=proxyRefs(r)),finishComponentSetup(t,e)}let compile;function finishComponentSetup(t,r,e){const n=t.type;if(!t.render){if(!r&&compile&&!n.render){const g=n.template||resolveMergedOptions(t).template;if(g){const{isCustomElement:y,compilerOptions:i}=t.appContext.config,{delimiters:k,compilerOptions:L}=n,$=extend$1(extend$1({isCustomElement:y,delimiters:k},i),L);n.render=compile(g,$)}}t.render=n.render||NOOP}{const g=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),g()}}}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return track(t,"get","$attrs"),r[e]}}))}function createSetupContext(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:r}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in publicPropertiesMap)return publicPropertiesMap[e](t)},has(r,e){return e in r||e in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,r=>r.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,r=!0){return isFunction$3(t)?t.displayName||t.name:t.name||r&&t.__name}function formatComponentName(t,r,e=!1){let n=getComponentName(r);if(!n&&r.__file){const g=r.__file.match(/([^/\\]+)\.\w+$/);g&&(n=g[1])}if(!n&&t&&t.parent){const g=y=>{for(const i in y)if(y[i]===r)return i};n=g(t.components||t.parent.type.components)||g(t.appContext.components)}return n?classify(n):e?"App":"Anonymous"}function isClassComponent(t){return isFunction$3(t)&&"__vccOpts"in t}const computed=(t,r)=>computed$1(t,r,isInSSRComponentSetup);function h$1(t,r,e){const n=arguments.length;return n===2?isObject$2(r)&&!isArray$3(r)?isVNode(r)?createVNode(t,null,[r]):createVNode(t,r):createVNode(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&isVNode(e)&&(e=[e]),createVNode(t,r,e))}const version="3.4.20",warn=NOOP;/**
* @vue/runtime-dom v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const g=r==="svg"?doc.createElementNS(svgNS,t):r==="mathml"?doc.createElementNS(mathmlNS,t):doc.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&g.setAttribute("multiple",n.multiple),g},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,g,y){const i=e?e.previousSibling:r.lastChild;if(g&&(g===y||g.nextSibling))for(;r.insertBefore(g.cloneNode(!0),e),!(g===y||!(g=g.nextSibling)););else{templateContainer.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const k=templateContainer.content;if(n==="svg"||n==="mathml"){const L=k.firstChild;for(;L.firstChild;)k.appendChild(L.firstChild);k.removeChild(L)}r.insertBefore(k,e)}return[i?i.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(t,{slots:r})=>h$1(BaseTransition,resolveTransitionProps(t),r);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(t,r=[])=>{isArray$3(t)?t.forEach(e=>e(...r)):t&&t(...r)},hasExplicitCallback=t=>t?isArray$3(t)?t.some(r=>r.length>1):t.length>1:!1;function resolveTransitionProps(t){const r={};for(const or in t)or in DOMTransitionPropsValidators||(r[or]=t[or]);if(t.css===!1)return r;const{name:e="v",type:n,duration:g,enterFromClass:y=`${e}-enter-from`,enterActiveClass:i=`${e}-enter-active`,enterToClass:k=`${e}-enter-to`,appearFromClass:L=y,appearActiveClass:$=i,appearToClass:V=k,leaveFromClass:z=`${e}-leave-from`,leaveActiveClass:re=`${e}-leave-active`,leaveToClass:oe=`${e}-leave-to`}=t,le=normalizeDuration(g),ue=le&&le[0],ie=le&&le[1],{onBeforeEnter:ae,onEnter:Fe,onEnterCancelled:de,onLeave:Ie,onLeaveCancelled:Ve,onBeforeAppear:kt=ae,onAppear:At=Fe,onAppearCancelled:ze=de}=r,Et=(or,dr,lr)=>{removeTransitionClass(or,dr?V:k),removeTransitionClass(or,dr?$:i),lr&&lr()},cr=(or,dr)=>{or._isLeaving=!1,removeTransitionClass(or,z),removeTransitionClass(or,oe),removeTransitionClass(or,re),dr&&dr()},er=or=>(dr,lr)=>{const nr=or?At:Fe,ur=()=>Et(dr,or,lr);callHook(nr,[dr,ur]),nextFrame(()=>{removeTransitionClass(dr,or?L:y),addTransitionClass(dr,or?V:k),hasExplicitCallback(nr)||whenTransitionEnds(dr,n,ue,ur)})};return extend$1(r,{onBeforeEnter(or){callHook(ae,[or]),addTransitionClass(or,y),addTransitionClass(or,i)},onBeforeAppear(or){callHook(kt,[or]),addTransitionClass(or,L),addTransitionClass(or,$)},onEnter:er(!1),onAppear:er(!0),onLeave(or,dr){or._isLeaving=!0;const lr=()=>cr(or,dr);addTransitionClass(or,z),forceReflow(),addTransitionClass(or,re),nextFrame(()=>{or._isLeaving&&(removeTransitionClass(or,z),addTransitionClass(or,oe),hasExplicitCallback(Ie)||whenTransitionEnds(or,n,ie,lr))}),callHook(Ie,[or,lr])},onEnterCancelled(or){Et(or,!1),callHook(de,[or])},onAppearCancelled(or){Et(or,!0),callHook(ze,[or])},onLeaveCancelled(or){cr(or),callHook(Ve,[or])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$2(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const r=NumberOf(t);return[r,r]}}function NumberOf(t){return toNumber$1(t)}function addTransitionClass(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[vtcKey]||(t[vtcKey]=new Set)).add(r)}function removeTransitionClass(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[vtcKey];e&&(e.delete(r),e.size||(t[vtcKey]=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,r,e,n){const g=t._endId=++endId,y=()=>{g===t._endId&&n()};if(e)return setTimeout(y,e);const{type:i,timeout:k,propCount:L}=getTransitionInfo(t,r);if(!i)return n();const $=i+"end";let V=0;const z=()=>{t.removeEventListener($,re),y()},re=oe=>{oe.target===t&&++V>=L&&z()};setTimeout(()=>{V<L&&z()},k+1),t.addEventListener($,re)}function getTransitionInfo(t,r){const e=window.getComputedStyle(t),n=le=>(e[le]||"").split(", "),g=n(`${TRANSITION}Delay`),y=n(`${TRANSITION}Duration`),i=getTimeout(g,y),k=n(`${ANIMATION}Delay`),L=n(`${ANIMATION}Duration`),$=getTimeout(k,L);let V=null,z=0,re=0;r===TRANSITION?i>0&&(V=TRANSITION,z=i,re=y.length):r===ANIMATION?$>0&&(V=ANIMATION,z=$,re=L.length):(z=Math.max(i,$),V=z>0?i>$?TRANSITION:ANIMATION:null,re=V?V===TRANSITION?y.length:L.length:0);const oe=V===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:V,timeout:z,propCount:re,hasTransform:oe}}function getTimeout(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>toMs(e)+toMs(t[n])))}function toMs(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(t,r,e){const n=t[vtcKey];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(t,{value:r},{transition:e}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,e&&r?e.beforeEnter(t):setDisplay(t,r)},mounted(t,{value:r},{transition:e}){e&&r&&e.enter(t)},updated(t,{value:r,oldValue:e},{transition:n}){!r!=!e&&(n?r?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,r))},beforeUnmount(t,{value:r}){setDisplay(t,r)}};function setDisplay(t,r){t.style.display=r?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!r}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,r,e){const n=t.style,g=isString$2(e);let y=!1;if(e&&!g){if(r)if(isString$2(r))for(const i of r.split(";")){const k=i.slice(0,i.indexOf(":")).trim();e[k]==null&&setStyle(n,k,"")}else for(const i in r)e[i]==null&&setStyle(n,i,"");for(const i in e)i==="display"&&(y=!0),setStyle(n,i,e[i])}else if(g){if(r!==e){const i=n[CSS_VAR_TEXT];i&&(e+=";"+i),n.cssText=e,y=displayRE.test(e)}}else r&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=y?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,r,e){if(isArray$3(e))e.forEach(n=>setStyle(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=autoPrefix(t,r);importantRE.test(e)?t.setProperty(hyphenate(n),e.replace(importantRE,""),"important"):t[n]=e}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,r){const e=prefixCache[r];if(e)return e;let n=camelize(r);if(n!=="filter"&&n in t)return prefixCache[r]=n;n=capitalize$1(n);for(let g=0;g<prefixes.length;g++){const y=prefixes[g]+n;if(y in t)return prefixCache[r]=y}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,r,e,n,g){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(xlinkNS,r.slice(6,r.length)):t.setAttributeNS(xlinkNS,r,e);else{const y=isSpecialBooleanAttr(r);e==null||y&&!includeBooleanAttr(e)?t.removeAttribute(r):t.setAttribute(r,y?"":e)}}function patchDOMProp(t,r,e,n,g,y,i){if(r==="innerHTML"||r==="textContent"){n&&i(n,g,y),t[r]=e??"";return}const k=t.tagName;if(r==="value"&&k!=="PROGRESS"&&!k.includes("-")){t._value=e;const $=k==="OPTION"?t.getAttribute("value")||"":t.value,V=e??"";$!==V&&(t.value=V),e==null&&t.removeAttribute(r);return}let L=!1;if(e===""||e==null){const $=typeof t[r];$==="boolean"?e=includeBooleanAttr(e):e==null&&$==="string"?(e="",L=!0):$==="number"&&(e=0,L=!0)}try{t[r]=e}catch{}L&&t.removeAttribute(r)}function addEventListener(t,r,e,n){t.addEventListener(r,e,n)}function removeEventListener(t,r,e,n){t.removeEventListener(r,e,n)}const veiKey=Symbol("_vei");function patchEvent(t,r,e,n,g=null){const y=t[veiKey]||(t[veiKey]={}),i=y[r];if(n&&i)i.value=n;else{const[k,L]=parseName(r);if(n){const $=y[r]=createInvoker(n,g);addEventListener(t,k,$,L)}else i&&(removeEventListener(t,k,i,L),y[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let r;if(optionsModifierRE.test(t)){r={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),r]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,e.value),r,5,[n])};return e.value=t,e.attached=getNow(),e}function patchStopImmediatePropagation(t,r){if(isArray$3(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>g=>!g._stopped&&n&&n(g))}else return r}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,r,e,n,g,y,i,k,L)=>{const $=g==="svg";r==="class"?patchClass(t,n,$):r==="style"?patchStyle(t,e,n):isOn(r)?isModelListener(r)||patchEvent(t,r,e,n,i):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(t,r,n,$))?patchDOMProp(t,r,n,y,i,k,L):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),patchAttr(t,r,n,$))};function shouldSetAsProp(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&isNativeOn(r)&&isFunction$3(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const g=t.tagName;if(g==="IMG"||g==="VIDEO"||g==="CANVAS"||g==="SOURCE")return!1}return isNativeOn(r)&&isString$2(e)?!1:r in t}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let g,y;return onUpdated(()=>{if(!g.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(g[0].el,e.vnode.el,i))return;g.forEach(callPendingCbs),g.forEach(recordPosition);const k=g.filter(applyTranslation);forceReflow(),k.forEach(L=>{const $=L.el,V=$.style;addTransitionClass($,i),V.transform=V.webkitTransform=V.transitionDuration="";const z=$[moveCbKey]=re=>{re&&re.target!==$||(!re||/transform$/.test(re.propertyName))&&($.removeEventListener("transitionend",z),$[moveCbKey]=null,removeTransitionClass($,i))};$.addEventListener("transitionend",z)})}),()=>{const i=toRaw(t),k=resolveTransitionProps(i);let L=i.tag||Fragment;g=y,y=r.default?getTransitionRawChildren(r.default()):[];for(let $=0;$<y.length;$++){const V=y[$];V.key!=null&&setTransitionHooks(V,resolveTransitionHooks(V,k,n,e))}if(g)for(let $=0;$<g.length;$++){const V=g[$];setTransitionHooks(V,resolveTransitionHooks(V,k,n,e)),positionMap.set(V,V.el.getBoundingClientRect())}return createVNode(L,null,y)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const r=t.el;r[moveCbKey]&&r[moveCbKey](),r[enterCbKey]&&r[enterCbKey]()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const r=positionMap.get(t),e=newPositionMap.get(t),n=r.left-e.left,g=r.top-e.top;if(n||g){const y=t.el.style;return y.transform=y.webkitTransform=`translate(${n}px,${g}px)`,y.transitionDuration="0s",t}}function hasCSSTransform(t,r,e){const n=t.cloneNode(),g=t[vtcKey];g&&g.forEach(k=>{k.split(/\s+/).forEach(L=>L&&n.classList.remove(L))}),e.split(/\s+/).forEach(k=>k&&n.classList.add(k)),n.style.display="none";const y=r.nodeType===1?r:r.parentNode;y.appendChild(n);const{hasTransform:i}=getTransitionInfo(n);return y.removeChild(n),i}const getModelAssigner=t=>{const r=t.props["onUpdate:modelValue"]||!1;return isArray$3(r)?e=>invokeArrayFns(r,e):r};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const r=t.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:r,trim:e,number:n}},g){t[assignKey]=getModelAssigner(g);const y=n||g.props&&g.props.type==="number";addEventListener(t,r?"change":"input",i=>{if(i.target.composing)return;let k=t.value;e&&(k=k.trim()),y&&(k=looseToNumber(k)),t[assignKey](k)}),e&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),r||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:r}){t.value=r??""},beforeUpdate(t,{value:r,modifiers:{lazy:e,trim:n,number:g}},y){if(t[assignKey]=getModelAssigner(y),t.composing)return;const i=g||t.type==="number"?looseToNumber(t.value):t.value,k=r??"";i!==k&&(document.activeElement===t&&t.type!=="range"&&(e||n&&t.value.trim()===k)||(t.value=k))}},vModelCheckbox={deep:!0,created(t,r,e){t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{const n=t._modelValue,g=getValue$2(t),y=t.checked,i=t[assignKey];if(isArray$3(n)){const k=looseIndexOf(n,g),L=k!==-1;if(y&&!L)i(n.concat(g));else if(!y&&L){const $=[...n];$.splice(k,1),i($)}}else if(isSet$2(n)){const k=new Set(n);y?k.add(g):k.delete(g),i(k)}else i(getCheckboxValue(t,y))})},mounted:setChecked,beforeUpdate(t,r,e){t[assignKey]=getModelAssigner(e),setChecked(t,r,e)}};function setChecked(t,{value:r,oldValue:e},n){t._modelValue=r,isArray$3(r)?t.checked=looseIndexOf(r,n.props.value)>-1:isSet$2(r)?t.checked=r.has(n.props.value):r!==e&&(t.checked=looseEqual(r,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:r},e){t.checked=looseEqual(r,e.props.value),t[assignKey]=getModelAssigner(e),addEventListener(t,"change",()=>{t[assignKey](getValue$2(t))})},beforeUpdate(t,{value:r,oldValue:e},n){t[assignKey]=getModelAssigner(n),r!==e&&(t.checked=looseEqual(r,n.props.value))}};function getValue$2(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,r){const e=r?"_trueValue":"_falseValue";return e in t?t[e]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,r)=>systemModifiers.some(e=>t[`${e}Key`]&&!r.includes(e))},withModifiers=(t,r)=>{const e=t._withMods||(t._withMods={}),n=r.join(".");return e[n]||(e[n]=(g,...y)=>{for(let i=0;i<r.length;i++){const k=modifierGuards[r[i]];if(k&&k(g,r))return}return t(g,...y)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,r)=>{const e=t._withKeys||(t._withKeys={}),n=r.join(".");return e[n]||(e[n]=g=>{if(!("key"in g))return;const y=hyphenate(g.key);if(r.some(i=>i===y||keyNames[i]===y))return t(g)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...t)=>{ensureRenderer().render(...t)},createApp=(...t)=>{const r=ensureRenderer().createApp(...t),{mount:e}=r;return r.mount=n=>{const g=normalizeContainer(n);if(!g)return;const y=r._component;!isFunction$3(y)&&!y.render&&!y.template&&(y.template=g.innerHTML),g.innerHTML="";const i=e(g,!1,resolveRootNamespace(g));return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),i},r};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$2(t)?document.querySelector(t):t}const FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,obtainAllFocusableElements$1=t=>Array.from(t.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(r=>isFocusable(r)&&isVisible(r)),isFocusable=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},triggerEvent=function(t,r,...e){let n;r.includes("mouse")||r.includes("click")?n="MouseEvents":r.includes("key")?n="KeyboardEvent":n="HTMLEvents";const g=document.createEvent(n);return g.initEvent(r,...e),t.dispatchEvent(g),t},isLeaf=t=>!t.getAttribute("aria-owns"),getSibling=(t,r,e)=>{const{parentNode:n}=t;if(!n)return null;const g=n.querySelectorAll(e),y=Array.prototype.indexOf.call(g,t);return g[y+r]||null},focusNode=t=>{t&&(t.focus(),!isLeaf(t)&&t.click())},composeEventHandlers=(t,r,{checkForDefaultPrevented:e=!0}={})=>g=>{const y=t==null?void 0:t(g);if(e===!1||!y)return r==null?void 0:r(g)};var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction$2=t=>typeof t=="function",isString$1=t=>typeof t=="string",noop$1=()=>{},isIOS=isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,r){function e(...n){return new Promise((g,y)=>{Promise.resolve(t(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})).then(g).catch(y)})}return e}function debounceFilter(t,r={}){let e,n,g=noop$1;const y=k=>{clearTimeout(k),g(),g=noop$1};return k=>{const L=resolveUnref(t),$=resolveUnref(r.maxWait);return e&&y(e),L<=0||$!==void 0&&$<=0?(n&&(y(n),n=null),Promise.resolve(k())):new Promise((V,z)=>{g=r.rejectOnCancel?z:V,$&&!n&&(n=setTimeout(()=>{e&&y(e),n=null,V(k())},$)),e=setTimeout(()=>{n&&y(n),n=null,V(k())},L)})}}function throttleFilter(t,r=!0,e=!0,n=!1){let g=0,y,i=!0,k=noop$1,L;const $=()=>{y&&(clearTimeout(y),y=void 0,k(),k=noop$1)};return z=>{const re=resolveUnref(t),oe=Date.now()-g,le=()=>L=z();return $(),re<=0?(g=Date.now(),le()):(oe>re&&(e||!i)?(g=Date.now(),le()):r&&(L=new Promise((ue,ie)=>{k=n?ie:ue,y=setTimeout(()=>{g=Date.now(),i=!0,ue(le()),$()},Math.max(0,re-oe))})),!e&&!y&&(y=setTimeout(()=>i=!0,re)),i=!1,L)}}function identity$1(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function useDebounceFn(t,r=200,e={}){return createFilterWrapper(debounceFilter(r,e),t)}function refDebounced(t,r=200,e={}){const n=ref(t.value),g=useDebounceFn(()=>{n.value=t.value},r,e);return watch(t,()=>g()),n}function useThrottleFn(t,r=200,e=!1,n=!0,g=!1){return createFilterWrapper(throttleFilter(r,e,n,g),t)}function tryOnMounted(t,r=!0){getCurrentInstance()?onMounted(t):r?t():nextTick(t)}function useTimeoutFn(t,r,e={}){const{immediate:n=!0}=e,g=ref(!1);let y=null;function i(){y&&(clearTimeout(y),y=null)}function k(){g.value=!1,i()}function L(...$){i(),g.value=!0,y=setTimeout(()=>{g.value=!1,y=null,t(...$)},resolveUnref(r))}return n&&(g.value=!0,isClient&&L()),tryOnScopeDispose(k),{isPending:readonly(g),start:L,stop:k}}function unrefElement(t){var r;const e=resolveUnref(t);return(r=e==null?void 0:e.$el)!=null?r:e}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let r,e,n,g;if(isString$1(t[0])||Array.isArray(t[0])?([e,n,g]=t,r=defaultWindow):[r,e,n,g]=t,!r)return noop$1;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const y=[],i=()=>{y.forEach(V=>V()),y.length=0},k=(V,z,re,oe)=>(V.addEventListener(z,re,oe),()=>V.removeEventListener(z,re,oe)),L=watch(()=>[unrefElement(r),resolveUnref(g)],([V,z])=>{i(),V&&y.push(...e.flatMap(re=>n.map(oe=>k(V,re,oe,z))))},{immediate:!0,flush:"post"}),$=()=>{L(),i()};return tryOnScopeDispose($),$}let _iOSWorkaround=!1;function onClickOutside(t,r,e={}){const{window:n=defaultWindow,ignore:g=[],capture:y=!0,detectIframe:i=!1}=e;if(!n)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(n.document.body.children).forEach(re=>re.addEventListener("click",noop$1)));let k=!0;const L=re=>g.some(oe=>{if(typeof oe=="string")return Array.from(n.document.querySelectorAll(oe)).some(le=>le===re.target||re.composedPath().includes(le));{const le=unrefElement(oe);return le&&(re.target===le||re.composedPath().includes(le))}}),V=[useEventListener(n,"click",re=>{const oe=unrefElement(t);if(!(!oe||oe===re.target||re.composedPath().includes(oe))){if(re.detail===0&&(k=!L(re)),!k){k=!0;return}r(re)}},{passive:!0,capture:y}),useEventListener(n,"pointerdown",re=>{const oe=unrefElement(t);oe&&(k=!re.composedPath().includes(oe)&&!L(re))},{passive:!0}),i&&useEventListener(n,"blur",re=>{var oe;const le=unrefElement(t);((oe=n.document.activeElement)==null?void 0:oe.tagName)==="IFRAME"&&!(le!=null&&le.contains(n.document.activeElement))&&r(re)})].filter(Boolean);return()=>V.forEach(re=>re())}function useSupported(t,r=!1){const e=ref(),n=()=>e.value=!!t();return n(),tryOnMounted(n,r),e}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global$1[globalKey]=_global$1[globalKey]||{};function useCssVar(t,r,{window:e=defaultWindow,initialValue:n=""}={}){const g=ref(n),y=computed(()=>{var i;return unrefElement(r)||((i=e==null?void 0:e.document)==null?void 0:i.documentElement)});return watch([y,()=>resolveUnref(t)],([i,k])=>{var L;if(i&&e){const $=(L=e.getComputedStyle(i).getPropertyValue(k))==null?void 0:L.trim();g.value=$||n}},{immediate:!0}),watch(g,i=>{var k;(k=y.value)!=null&&k.style&&y.value.style.setProperty(resolveUnref(t),i)}),g}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(t,r)=>{var e={};for(var n in t)__hasOwnProp$g.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$g)for(var n of __getOwnPropSymbols$g(t))r.indexOf(n)<0&&__propIsEnum$g.call(t,n)&&(e[n]=t[n]);return e};function useResizeObserver(t,r,e={}){const n=e,{window:g=defaultWindow}=n,y=__objRest$2(n,["window"]);let i;const k=useSupported(()=>g&&"ResizeObserver"in g),L=()=>{i&&(i.disconnect(),i=void 0)},$=watch(()=>unrefElement(t),z=>{L(),k.value&&g&&z&&(i=new ResizeObserver(r),i.observe(z,y))},{immediate:!0,flush:"post"}),V=()=>{L(),$()};return tryOnScopeDispose(V),{isSupported:k,stop:V}}function useElementBounding(t,r={}){const{reset:e=!0,windowResize:n=!0,windowScroll:g=!0,immediate:y=!0}=r,i=ref(0),k=ref(0),L=ref(0),$=ref(0),V=ref(0),z=ref(0),re=ref(0),oe=ref(0);function le(){const ue=unrefElement(t);if(!ue){e&&(i.value=0,k.value=0,L.value=0,$.value=0,V.value=0,z.value=0,re.value=0,oe.value=0);return}const ie=ue.getBoundingClientRect();i.value=ie.height,k.value=ie.bottom,L.value=ie.left,$.value=ie.right,V.value=ie.top,z.value=ie.width,re.value=ie.x,oe.value=ie.y}return useResizeObserver(t,le),watch(()=>unrefElement(t),ue=>!ue&&le()),g&&useEventListener("scroll",le,{capture:!0,passive:!0}),n&&useEventListener("resize",le,{passive:!0}),tryOnMounted(()=>{y&&le()}),{height:i,bottom:k,left:L,right:$,top:V,width:z,x:re,y:oe,update:le}}var __getOwnPropSymbols$8=Object.getOwnPropertySymbols,__hasOwnProp$8=Object.prototype.hasOwnProperty,__propIsEnum$8=Object.prototype.propertyIsEnumerable,__objRest$1=(t,r)=>{var e={};for(var n in t)__hasOwnProp$8.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols$8)for(var n of __getOwnPropSymbols$8(t))r.indexOf(n)<0&&__propIsEnum$8.call(t,n)&&(e[n]=t[n]);return e};function useMutationObserver(t,r,e={}){const n=e,{window:g=defaultWindow}=n,y=__objRest$1(n,["window"]);let i;const k=useSupported(()=>g&&"MutationObserver"in g),L=()=>{i&&(i.disconnect(),i=void 0)},$=watch(()=>unrefElement(t),z=>{L(),k.value&&g&&z&&(i=new MutationObserver(r),i.observe(z,y))},{immediate:!0}),V=()=>{L(),$()};return tryOnScopeDispose(V),{isSupported:k,stop:V}}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(t,r,e,n={}){var g,y,i;const{clone:k=!1,passive:L=!1,eventName:$,deep:V=!1,defaultValue:z}=n,re=getCurrentInstance(),oe=e||(re==null?void 0:re.emit)||((g=re==null?void 0:re.$emit)==null?void 0:g.bind(re))||((i=(y=re==null?void 0:re.proxy)==null?void 0:y.$emit)==null?void 0:i.bind(re==null?void 0:re.proxy));let le=$;r||(r="modelValue"),le=$||le||`update:${r.toString()}`;const ue=ae=>k?isFunction$2(k)?k(ae):cloneFnJSON(ae):ae,ie=()=>isDef(t[r])?ue(t[r]):z;if(L){const ae=ie(),Fe=ref(ae);return watch(()=>t[r],de=>Fe.value=ue(de)),watch(Fe,de=>{(de!==t[r]||V)&&oe(le,de)},{deep:V}),Fe}else return computed({get(){return ie()},set(ae){oe(le,ae)}})}function useWindowSize(t={}){const{window:r=defaultWindow,initialWidth:e=1/0,initialHeight:n=1/0,listenOrientation:g=!0,includeScrollbar:y=!0}=t,i=ref(e),k=ref(n),L=()=>{r&&(y?(i.value=r.innerWidth,k.value=r.innerHeight):(i.value=r.document.documentElement.clientWidth,k.value=r.document.documentElement.clientHeight))};return L(),tryOnMounted(L),useEventListener("resize",L,{passive:!0}),g&&useEventListener("orientationchange",L,{passive:!0}),{width:i,height:k}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(t,r)=>{if(!isClient||!t||!r)return!1;const e=t.getBoundingClientRect();let n;return r instanceof Element?n=r.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},e.top<n.bottom&&e.bottom>n.top&&e.right>n.left&&e.left<n.right};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var r=hasOwnProperty$d.call(t,symToStringTag$1),e=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var n=!0}catch{}var g=nativeObjectToString$1.call(t);return n&&(r?t[symToStringTag$1]=e:delete t[symToStringTag$1]),g}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag$3="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$3}function arrayMap(t,r){for(var e=-1,n=t==null?0:t.length,g=Array(n);++e<n;)g[e]=r(t[e],e,t);return g}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var r=t+"";return r=="0"&&1/t==-INFINITY$3?"-0":r}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var r=t.length;r--&&reWhitespace.test(t.charAt(r)););return r}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject$1(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$1(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$1(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){if(!t)return t===0?t:0;if(t=toNumber(t),t===INFINITY$2||t===-INFINITY$2){var r=t<0?-1:1;return r*MAX_INTEGER}return t===t?t:0}function toInteger(t){var r=toFinite(t),e=r%1;return r===r?e?r-e:r:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var r=baseGetTag(t);return r==funcTag$2||r==genTag$1||r==asyncTag||r==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(t){if(t!=null){try{return funcToString$2.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var r=isFunction$1(t)?reIsNative:reIsHostCtor;return r.test(toSource(t))}function getValue$1(t,r){return t==null?void 0:t[r]}function getNative(t,r){var e=getValue$1(t,r);return baseIsNative(e)?e:void 0}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function t(){}return function(r){if(!isObject$1(r))return{};if(objectCreate)return objectCreate(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();const baseCreate$1=baseCreate;function apply(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function copyArray(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var r=0,e=0;return function(){var n=nativeNow(),g=HOT_SPAN-(n-e);if(e=n,g>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(t,r){return defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function baseFindIndex(t,r,e,n){for(var g=t.length,y=e+(n?1:-1);n?y--:++y<g;)if(r(t[y],y,t))return y;return-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,r){var e=typeof t;return r=r??MAX_SAFE_INTEGER$1,!!r&&(e=="number"||e!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<r}function baseAssignValue(t,r,e){r=="__proto__"&&defineProperty$1?defineProperty$1(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function eq(t,r){return t===r||t!==t&&r!==r}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(t,r,e){var n=t[r];(!(hasOwnProperty$b.call(t,r)&&eq(n,e))||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function copyObject(t,r,e,n){var g=!e;e||(e={});for(var y=-1,i=r.length;++y<i;){var k=r[y],L=n?n(e[k],t[k],k,e,t):void 0;L===void 0&&(L=t[k]),g?baseAssignValue(e,k,L):assignValue(e,k,L)}return e}var nativeMax$2=Math.max;function overRest(t,r,e){return r=nativeMax$2(r===void 0?t.length-1:r,0),function(){for(var n=arguments,g=-1,y=nativeMax$2(n.length-r,0),i=Array(y);++g<y;)i[g]=n[r+g];g=-1;for(var k=Array(r+1);++g<r;)k[g]=n[g];return k[r]=e(i),apply(t,this,k)}}function baseRest(t,r){return setToString$1(overRest(t,r,identity),t+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}function isIterateeCall(t,r,e){if(!isObject$1(e))return!1;var n=typeof r;return(n=="number"?isArrayLike(e)&&isIndex(r,e.length):n=="string"&&r in e)?eq(e[r],t):!1}function createAssigner(t){return baseRest(function(r,e){var n=-1,g=e.length,y=g>1?e[g-1]:void 0,i=g>2?e[2]:void 0;for(y=t.length>3&&typeof y=="function"?(g--,y):void 0,i&&isIterateeCall(e[0],e[1],i)&&(y=g<3?void 0:y,g=1),r=Object(r);++n<g;){var k=e[n];k&&t(r,k,n,y)}return r})}var objectProto$b=Object.prototype;function isPrototype(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||objectProto$b;return t===e}function baseTimes(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var argsTag$3="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$a.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(r){return t(r)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(t,r){var e=isArray$2(t),n=!e&&isArguments$1(t),g=!e&&!n&&isBuffer$2(t),y=!e&&!n&&!g&&isTypedArray$2(t),i=e||n||g||y,k=i?baseTimes(t.length,String):[],L=k.length;for(var $ in t)(r||hasOwnProperty$9.call(t,$))&&!(i&&($=="length"||g&&($=="offset"||$=="parent")||y&&($=="buffer"||$=="byteLength"||$=="byteOffset")||isIndex($,L)))&&k.push($);return k}function overArg(t,r){return function(e){return t(r(e))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var r=[];for(var e in Object(t))hasOwnProperty$8.call(t,e)&&e!="constructor"&&r.push(e);return r}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function nativeKeysIn(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var r=isPrototype(t),e=[];for(var n in t)n=="constructor"&&(r||!hasOwnProperty$7.call(t,n))||e.push(n);return e}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,r){if(isArray$2(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||r!=null&&t in Object(r)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(t){var r=this.__data__;if(nativeCreate$1){var e=r[t];return e===HASH_UNDEFINED$2?void 0:e}return hasOwnProperty$6.call(r,t)?r[t]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(t){var r=this.__data__;return nativeCreate$1?r[t]!==void 0:hasOwnProperty$5.call(r,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nativeCreate$1&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(t,r){for(var e=t.length;e--;)if(eq(t[e][0],r))return e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var r=this.__data__,e=assocIndexOf(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():splice.call(r,e,1),--this.size,!0}function listCacheGet(t){var r=this.__data__,e=assocIndexOf(r,t);return e<0?void 0:r[e][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,r){var e=this.__data__,n=assocIndexOf(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function ListCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function getMapData(t,r){var e=t.__data__;return isKeyable(r)?e[typeof r=="string"?"string":"hash"]:e.map}function mapCacheDelete(t){var r=getMapData(this,t).delete(t);return this.size-=r?1:0,r}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,r){var e=getMapData(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function MapCache(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var e=function(){var n=arguments,g=r?r.apply(this,n):n[0],y=e.cache;if(y.has(g))return y.get(g);var i=t.apply(this,n);return e.cache=y.set(g,i)||y,i};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var r=memoize(t,function(n){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),n}),e=r.cache;return r}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(rePropName,function(e,n,g,y){r.push(g?y.replace(reEscapeChar,"$1"):n||e)}),r});const stringToPath$1=stringToPath;function toString$1(t){return t==null?"":baseToString(t)}function castPath(t,r){return isArray$2(t)?t:isKey(t,r)?[t]:stringToPath$1(toString$1(t))}var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var r=t+"";return r=="0"&&1/t==-INFINITY$1?"-0":r}function baseGet(t,r){r=castPath(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[toKey(r[e++])];return e&&e==n?t:void 0}function get(t,r,e){var n=t==null?void 0:baseGet(t,r);return n===void 0?e:n}function arrayPush(t,r){for(var e=-1,n=r.length,g=t.length;++e<n;)t[g+e]=r[e];return t}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(t){return isArray$2(t)||isArguments$1(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}function baseFlatten(t,r,e,n,g){var y=-1,i=t.length;for(e||(e=isFlattenable),g||(g=[]);++y<i;){var k=t[y];r>0&&e(k)?r>1?baseFlatten(k,r-1,e,n,g):arrayPush(g,k):n||(g[g.length]=k)}return g}function flatten(t){var r=t==null?0:t.length;return r?baseFlatten(t,1):[]}function flatRest(t){return setToString$1(overRest(t,void 0,flatten),t+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$3)return!1;var r=getPrototype$1(t);if(r===null)return!0;var e=hasOwnProperty$4.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&funcToString.call(e)==objectCtorString}function castArray$1(){if(!arguments.length)return[];var t=arguments[0];return isArray$2(t)?t:[t]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,r){var e=this.__data__;if(e instanceof ListCache){var n=e.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new MapCache(n)}return e.set(t,r),this.size=e.size,this}function Stack(t){var r=this.__data__=new ListCache(t);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(t,r){return t&&copyObject(r,keys(r),t)}function baseAssignIn(t,r){return t&&copyObject(r,keysIn(r),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,r){if(r)return t.slice();var e=t.length,n=allocUnsafe?allocUnsafe(e):new t.constructor(e);return t.copy(n),n}function arrayFilter(t,r){for(var e=-1,n=t==null?0:t.length,g=0,y=[];++e<n;){var i=t[e];r(i,e,t)&&(y[g++]=i)}return y}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(r){return propertyIsEnumerable.call(t,r)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,r){return copyObject(t,getSymbols$1(t),r)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var r=[];t;)arrayPush(r,getSymbols$1(t)),t=getPrototype$1(t);return r}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,r){return copyObject(t,getSymbolsIn$1(t),r)}function baseGetAllKeys(t,r,e){var n=r(t);return isArray$2(t)?n:arrayPush(n,e(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var r=baseGetTag(t),e=r==objectTag$2?t.constructor:void 0,n=e?toSource(e):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return r});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&hasOwnProperty$3.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new Uint8Array$2(r).set(new Uint8Array$2(t)),r}function cloneDataView(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var r=new t.constructor(t.source,reFlags.exec(t));return r.lastIndex=t.lastIndex,r}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf$1?Object(symbolValueOf$1.call(t)):{}}function cloneTypedArray(t,r){var e=r?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,r,e){var n=t.constructor;switch(r){case arrayBufferTag$2:return cloneArrayBuffer(t);case boolTag$2:case dateTag$2:return new n(+t);case dataViewTag$2:return cloneDataView(t,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,e);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(t);case regexpTag$2:return cloneRegExp(t);case setTag$3:return new n;case symbolTag$2:return cloneSymbol(t)}}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$2="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$2="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,r,e,n,g,y){var i,k=r&CLONE_DEEP_FLAG$1,L=r&CLONE_FLAT_FLAG,$=r&CLONE_SYMBOLS_FLAG$2;if(e&&(i=g?e(t,n,g,y):e(t)),i!==void 0)return i;if(!isObject$1(t))return t;var V=isArray$2(t);if(V){if(i=initCloneArray(t),!k)return copyArray(t,i)}else{var z=getTag$1(t),re=z==funcTag||z==genTag;if(isBuffer$2(t))return cloneBuffer(t,k);if(z==objectTag$1||z==argsTag$1||re&&!g){if(i=L||re?{}:initCloneObject(t),!k)return L?copySymbolsIn(t,baseAssignIn(i,t)):copySymbols(t,baseAssign(i,t))}else{if(!cloneableTags[z])return g?t:{};i=initCloneByTag(t,z,k)}}y||(y=new Stack);var oe=y.get(t);if(oe)return oe;y.set(t,i),isSet$1(t)?t.forEach(function(ie){i.add(baseClone(ie,r,e,ie,t,y))}):isMap$1(t)&&t.forEach(function(ie,ae){i.set(ae,baseClone(ie,r,e,ae,t,y))});var le=$?L?getAllKeysIn:getAllKeys:L?keysIn:keys,ue=V?void 0:le(t);return arrayEach(ue||t,function(ie,ae){ue&&(ae=ie,ie=t[ae]),assignValue(i,ae,baseClone(ie,r,e,ae,t,y))}),i}var CLONE_SYMBOLS_FLAG$1=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new MapCache;++r<e;)this.add(t[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function cacheHas(t,r){return t.has(r)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,r,e,n,g,y){var i=e&COMPARE_PARTIAL_FLAG$5,k=t.length,L=r.length;if(k!=L&&!(i&&L>k))return!1;var $=y.get(t),V=y.get(r);if($&&V)return $==r&&V==t;var z=-1,re=!0,oe=e&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(y.set(t,r),y.set(r,t);++z<k;){var le=t[z],ue=r[z];if(n)var ie=i?n(ue,le,z,r,t,y):n(le,ue,z,t,r,y);if(ie!==void 0){if(ie)continue;re=!1;break}if(oe){if(!arraySome(r,function(ae,Fe){if(!cacheHas(oe,Fe)&&(le===ae||g(le,ae,e,n,y)))return oe.push(Fe)})){re=!1;break}}else if(!(le===ue||g(le,ue,e,n,y))){re=!1;break}}return y.delete(t),y.delete(r),re}function mapToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n,g){e[++r]=[g,n]}),e}function setToArray(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(t,r,e,n,g,y,i){switch(e){case dataViewTag:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case arrayBufferTag:return!(t.byteLength!=r.byteLength||!y(new Uint8Array$2(t),new Uint8Array$2(r)));case boolTag:case dateTag:case numberTag:return eq(+t,+r);case errorTag:return t.name==r.name&&t.message==r.message;case regexpTag:case stringTag:return t==r+"";case mapTag:var k=mapToArray;case setTag:var L=n&COMPARE_PARTIAL_FLAG$4;if(k||(k=setToArray),t.size!=r.size&&!L)return!1;var $=i.get(t);if($)return $==r;n|=COMPARE_UNORDERED_FLAG$2,i.set(t,r);var V=equalArrays(k(t),k(r),n,g,y,i);return i.delete(t),V;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(r)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(t,r,e,n,g,y){var i=e&COMPARE_PARTIAL_FLAG$3,k=getAllKeys(t),L=k.length,$=getAllKeys(r),V=$.length;if(L!=V&&!i)return!1;for(var z=L;z--;){var re=k[z];if(!(i?re in r:hasOwnProperty$2.call(r,re)))return!1}var oe=y.get(t),le=y.get(r);if(oe&&le)return oe==r&&le==t;var ue=!0;y.set(t,r),y.set(r,t);for(var ie=i;++z<L;){re=k[z];var ae=t[re],Fe=r[re];if(n)var de=i?n(Fe,ae,re,r,t,y):n(ae,Fe,re,t,r,y);if(!(de===void 0?ae===Fe||g(ae,Fe,e,n,y):de)){ue=!1;break}ie||(ie=re=="constructor")}if(ue&&!ie){var Ie=t.constructor,Ve=r.constructor;Ie!=Ve&&"constructor"in t&&"constructor"in r&&!(typeof Ie=="function"&&Ie instanceof Ie&&typeof Ve=="function"&&Ve instanceof Ve)&&(ue=!1)}return y.delete(t),y.delete(r),ue}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(t,r,e,n,g,y){var i=isArray$2(t),k=isArray$2(r),L=i?arrayTag:getTag$1(t),$=k?arrayTag:getTag$1(r);L=L==argsTag?objectTag:L,$=$==argsTag?objectTag:$;var V=L==objectTag,z=$==objectTag,re=L==$;if(re&&isBuffer$2(t)){if(!isBuffer$2(r))return!1;i=!0,V=!1}if(re&&!V)return y||(y=new Stack),i||isTypedArray$2(t)?equalArrays(t,r,e,n,g,y):equalByTag(t,r,L,e,n,g,y);if(!(e&COMPARE_PARTIAL_FLAG$2)){var oe=V&&hasOwnProperty$1.call(t,"__wrapped__"),le=z&&hasOwnProperty$1.call(r,"__wrapped__");if(oe||le){var ue=oe?t.value():t,ie=le?r.value():r;return y||(y=new Stack),g(ue,ie,e,n,y)}}return re?(y||(y=new Stack),equalObjects(t,r,e,n,g,y)):!1}function baseIsEqual(t,r,e,n,g){return t===r?!0:t==null||r==null||!isObjectLike(t)&&!isObjectLike(r)?t!==t&&r!==r:baseIsEqualDeep(t,r,e,n,baseIsEqual,g)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,r,e,n){var g=e.length,y=g,i=!n;if(t==null)return!y;for(t=Object(t);g--;){var k=e[g];if(i&&k[2]?k[1]!==t[k[0]]:!(k[0]in t))return!1}for(;++g<y;){k=e[g];var L=k[0],$=t[L],V=k[1];if(i&&k[2]){if($===void 0&&!(L in t))return!1}else{var z=new Stack;if(n)var re=n($,V,L,t,r,z);if(!(re===void 0?baseIsEqual(V,$,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,z):re))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var r=keys(t),e=r.length;e--;){var n=r[e],g=t[n];r[e]=[n,g,isStrictComparable(g)]}return r}function matchesStrictComparable(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function baseMatches(t){var r=getMatchData(t);return r.length==1&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(e){return e===t||baseIsMatch(e,t,r)}}function baseHasIn(t,r){return t!=null&&r in Object(t)}function hasPath(t,r,e){r=castPath(r,t);for(var n=-1,g=r.length,y=!1;++n<g;){var i=toKey(r[n]);if(!(y=t!=null&&e(t,i)))break;t=t[i]}return y||++n!=g?y:(g=t==null?0:t.length,!!g&&isLength(g)&&isIndex(i,g)&&(isArray$2(t)||isArguments$1(t)))}function hasIn(t,r){return t!=null&&hasPath(t,r,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,r){return isKey(t)&&isStrictComparable(r)?matchesStrictComparable(toKey(t),r):function(e){var n=get(e,t);return n===void 0&&n===r?hasIn(e,t):baseIsEqual(r,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(r){return r==null?void 0:r[t]}}function basePropertyDeep(t){return function(r){return baseGet(r,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$2(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(t){return function(r,e,n){for(var g=-1,y=Object(r),i=n(r),k=i.length;k--;){var L=i[t?k:++g];if(e(y[L],L,y)===!1)break}return r}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(t,r){return t&&baseFor$1(t,r,keys)}function createBaseEach(t,r){return function(e,n){if(e==null)return e;if(!isArrayLike(e))return t(e,n);for(var g=e.length,y=r?g:-1,i=Object(e);(r?y--:++y<g)&&n(i[y],y,i)!==!1;);return e}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(t,r,e){var n,g,y,i,k,L,$=0,V=!1,z=!1,re=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);r=toNumber(r)||0,isObject$1(e)&&(V=!!e.leading,z="maxWait"in e,y=z?nativeMax$1(toNumber(e.maxWait)||0,r):y,re="trailing"in e?!!e.trailing:re);function oe(kt){var At=n,ze=g;return n=g=void 0,$=kt,i=t.apply(ze,At),i}function le(kt){return $=kt,k=setTimeout(ae,r),V?oe(kt):i}function ue(kt){var At=kt-L,ze=kt-$,Et=r-At;return z?nativeMin$1(Et,y-ze):Et}function ie(kt){var At=kt-L,ze=kt-$;return L===void 0||At>=r||At<0||z&&ze>=y}function ae(){var kt=now$1();if(ie(kt))return Fe(kt);k=setTimeout(ae,ue(kt))}function Fe(kt){return k=void 0,re&&n?oe(kt):(n=g=void 0,i)}function de(){k!==void 0&&clearTimeout(k),$=0,n=L=g=k=void 0}function Ie(){return k===void 0?i:Fe(now$1())}function Ve(){var kt=now$1(),At=ie(kt);if(n=arguments,g=this,L=kt,At){if(k===void 0)return le(L);if(z)return clearTimeout(k),k=setTimeout(ae,r),oe(L)}return k===void 0&&(k=setTimeout(ae,r)),i}return Ve.cancel=de,Ve.flush=Ie,Ve}function assignMergeValue(t,r,e){(e!==void 0&&!eq(t[r],e)||e===void 0&&!(r in t))&&baseAssignValue(t,r,e)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function safeGet(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}function toPlainObject(t){return copyObject(t,keysIn(t))}function baseMergeDeep(t,r,e,n,g,y,i){var k=safeGet(t,e),L=safeGet(r,e),$=i.get(L);if($){assignMergeValue(t,e,$);return}var V=y?y(k,L,e+"",t,r,i):void 0,z=V===void 0;if(z){var re=isArray$2(L),oe=!re&&isBuffer$2(L),le=!re&&!oe&&isTypedArray$2(L);V=L,re||oe||le?isArray$2(k)?V=k:isArrayLikeObject(k)?V=copyArray(k):oe?(z=!1,V=cloneBuffer(L,!0)):le?(z=!1,V=cloneTypedArray(L,!0)):V=[]:isPlainObject$1(L)||isArguments$1(L)?(V=k,isArguments$1(k)?V=toPlainObject(k):(!isObject$1(k)||isFunction$1(k))&&(V=initCloneObject(L))):z=!1}z&&(i.set(L,V),g(V,L,n,y,i),i.delete(L)),assignMergeValue(t,e,V)}function baseMerge(t,r,e,n,g){t!==r&&baseFor$1(r,function(y,i){if(g||(g=new Stack),isObject$1(y))baseMergeDeep(t,r,i,e,baseMerge,n,g);else{var k=n?n(safeGet(t,i),y,i+"",t,r,g):void 0;k===void 0&&(k=y),assignMergeValue(t,i,k)}},keysIn)}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var g=n-1;return e!==void 0&&(g=toInteger(e),g=e<0?nativeMax(n+g,0):nativeMin(g,n-1)),baseFindIndex(t,baseIteratee(r),g,!0)}function baseMap(t,r){var e=-1,n=isArrayLike(t)?Array(t.length):[];return baseEach$1(t,function(g,y,i){n[++e]=r(g,y,i)}),n}function map(t,r){var e=isArray$2(t)?arrayMap:baseMap;return e(t,baseIteratee(r))}function flatMap(t,r){return baseFlatten(map(t,r),1)}var INFINITY=1/0;function flattenDeep(t){var r=t==null?0:t.length;return r?baseFlatten(t,INFINITY):[]}function fromPairs(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var g=t[r];n[g[0]]=g[1]}return n}function isEqual(t,r){return baseIsEqual(t,r)}function isNil(t){return t==null}function isUndefined$2(t){return t===void 0}var merge$1=createAssigner(function(t,r,e){baseMerge(t,r,e)});const merge$2=merge$1;function baseSet(t,r,e,n){if(!isObject$1(t))return t;r=castPath(r,t);for(var g=-1,y=r.length,i=y-1,k=t;k!=null&&++g<y;){var L=toKey(r[g]),$=e;if(L==="__proto__"||L==="constructor"||L==="prototype")return t;if(g!=i){var V=k[L];$=n?n(V,L,k):void 0,$===void 0&&($=isObject$1(V)?V:isIndex(r[g+1])?[]:{})}assignValue(k,L,$),k=k[L]}return t}function basePickBy(t,r,e){for(var n=-1,g=r.length,y={};++n<g;){var i=r[n],k=baseGet(t,i);e(k,i)&&baseSet(y,castPath(i,t),k)}return y}function basePick(t,r){return basePickBy(t,r,function(e,n){return hasIn(t,n)})}var pick=flatRest(function(t,r){return t==null?{}:basePick(t,r)});const pick$1=pick;function set(t,r,e){return t==null?t:baseSet(t,r,e)}var FUNC_ERROR_TEXT="Expected a function";function throttle(t,r,e){var n=!0,g=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(e)&&(n="leading"in e?!!e.leading:n,g="trailing"in e?!!e.trailing:g),debounce(t,r,{leading:n,maxWait:r,trailing:g})}const isUndefined$1=t=>t===void 0,isBoolean$1=t=>typeof t=="boolean",isNumber$1=t=>typeof t=="number",isEmpty=t=>!t&&t!==0||isArray$3(t)&&t.length===0||isObject$2(t)&&!Object.keys(t).length,isElement=t=>typeof Element>"u"?!1:t instanceof Element,isStringNumber=t=>isString$2(t)?!Number.isNaN(Number(t)):!1,escapeStringRegexp=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize=t=>capitalize$1(t),keysOf=t=>Object.keys(t),entriesOf=t=>Object.entries(t),getProp=(t,r,e)=>({get value(){return get(t,r,e)},set value(n){set(t,r,n)}});class ElementPlusError extends Error{constructor(r){super(r),this.name="ElementPlusError"}}function throwError(t,r){throw new ElementPlusError(`[${t}] ${r}`)}function debugWarn(t,r){}const classNameToArray=(t="")=>t.split(" ").filter(r=>!!r.trim()),hasClass=(t,r)=>{if(!t||!r)return!1;if(r.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(r)},addClass=(t,r)=>{!t||!r.trim()||t.classList.add(...classNameToArray(r))},removeClass=(t,r)=>{!t||!r.trim()||t.classList.remove(...classNameToArray(r))},getStyle=(t,r)=>{var e;if(!isClient||!t||!r)return"";let n=camelize(r);n==="float"&&(n="cssFloat");try{const g=t.style[n];if(g)return g;const y=(e=document.defaultView)==null?void 0:e.getComputedStyle(t,"");return y?y[n]:""}catch{return t.style[n]}};function addUnit(t,r="px"){if(!t)return"";if(isNumber$1(t)||isStringNumber(t))return`${t}${r}`;if(isString$2(t))return t}const isScroll=(t,r)=>{if(!isClient)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(r)],n=getStyle(t,e);return["scroll","auto","overlay"].some(g=>n.includes(g))},getScrollContainer=(t,r)=>{if(!isClient)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(isScroll(e,r))return e;e=e.parentNode}return e};let scrollBarWidth;const getScrollBarWidth=t=>{var r;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const g=document.createElement("div");g.style.width="100%",e.appendChild(g);const y=g.offsetWidth;return(r=e.parentNode)==null||r.removeChild(e),scrollBarWidth=n-y,scrollBarWidth};function scrollIntoView(t,r){if(!isClient)return;if(!r){t.scrollTop=0;return}const e=[];let n=r.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const g=r.offsetTop+e.reduce((L,$)=>L+$.offsetTop,0),y=g+r.offsetHeight,i=t.scrollTop,k=i+t.clientHeight;g<i?t.scrollTop=g:y>k&&(t.scrollTop=y-t.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var arrow_down_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowDown",__name:"arrow-down",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),arrow_down_default=arrow_down_vue_vue_type_script_setup_true_lang_default,arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowLeft",__name:"arrow-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_left_default=arrow_left_vue_vue_type_script_setup_true_lang_default,arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowRight",__name:"arrow-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_right_default=arrow_right_vue_vue_type_script_setup_true_lang_default,arrow_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowUp",__name:"arrow-up",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),arrow_up_default=arrow_up_vue_vue_type_script_setup_true_lang_default,check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Check",__name:"check",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),check_default=check_vue_vue_type_script_setup_true_lang_default,circle_check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCheck",__name:"circle-check",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),circle_check_default=circle_check_vue_vue_type_script_setup_true_lang_default,circle_close_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),circle_close_filled_default=circle_close_filled_vue_vue_type_script_setup_true_lang_default,circle_close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleClose",__name:"circle-close",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),circle_close_default=circle_close_vue_vue_type_script_setup_true_lang_default,close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Close",__name:"close",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),close_default=close_vue_vue_type_script_setup_true_lang_default,cpu_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Cpu",__name:"cpu",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M320 256a64 64 0 0 0-64 64v384a64 64 0 0 0 64 64h384a64 64 0 0 0 64-64V320a64 64 0 0 0-64-64zm0-64h384a128 128 0 0 1 128 128v384a128 128 0 0 1-128 128H320a128 128 0 0 1-128-128V320a128 128 0 0 1 128-128"}),createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m-320 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 896a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m160 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m-320 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32M64 512a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0-160a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0 320a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m896-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0 320a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32"})]))}}),cpu_default=cpu_vue_vue_type_script_setup_true_lang_default,d_arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),d_arrow_left_default=d_arrow_left_vue_vue_type_script_setup_true_lang_default,d_arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),d_arrow_right_default=d_arrow_right_vue_vue_type_script_setup_true_lang_default,delete_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Delete",__name:"delete",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),delete_default=delete_vue_vue_type_script_setup_true_lang_default,document_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Document",__name:"document",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),document_default=document_vue_vue_type_script_setup_true_lang_default,edit_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Edit",__name:"edit",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),edit_default=edit_vue_vue_type_script_setup_true_lang_default,full_screen_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"FullScreen",__name:"full-screen",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),full_screen_default=full_screen_vue_vue_type_script_setup_true_lang_default,hide_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Hide",__name:"hide",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),hide_default=hide_vue_vue_type_script_setup_true_lang_default,house_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"House",__name:"house",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),house_default=house_vue_vue_type_script_setup_true_lang_default,info_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"InfoFilled",__name:"info-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),info_filled_default=info_filled_vue_vue_type_script_setup_true_lang_default,loading_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Loading",__name:"loading",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),loading_default=loading_vue_vue_type_script_setup_true_lang_default,minus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Minus",__name:"minus",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),minus_default=minus_vue_vue_type_script_setup_true_lang_default,more_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"MoreFilled",__name:"more-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),more_filled_default=more_filled_vue_vue_type_script_setup_true_lang_default,more_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"More",__name:"more",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),more_default=more_vue_vue_type_script_setup_true_lang_default,picture_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Picture",__name:"picture",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),createBaseVNode("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),picture_default=picture_vue_vue_type_script_setup_true_lang_default,plus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Plus",__name:"plus",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),plus_default=plus_vue_vue_type_script_setup_true_lang_default,refresh_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshLeft",__name:"refresh-left",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),refresh_left_default=refresh_left_vue_vue_type_script_setup_true_lang_default,refresh_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshRight",__name:"refresh-right",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),refresh_right_default=refresh_right_vue_vue_type_script_setup_true_lang_default,refresh_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Refresh",__name:"refresh",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),refresh_default=refresh_vue_vue_type_script_setup_true_lang_default,scale_to_original_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),scale_to_original_default=scale_to_original_vue_vue_type_script_setup_true_lang_default,set_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SetUp",__name:"set-up",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96"}),createBaseVNode("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),createBaseVNode("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32m160 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),createBaseVNode("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32"})]))}}),set_up_default=set_up_vue_vue_type_script_setup_true_lang_default,setting_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Setting",__name:"setting",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384m0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256"})]))}}),setting_default=setting_vue_vue_type_script_setup_true_lang_default,success_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SuccessFilled",__name:"success-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),success_filled_default=success_filled_vue_vue_type_script_setup_true_lang_default,switch_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Switch",__name:"switch",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32"})]))}}),switch_default=switch_vue_vue_type_script_setup_true_lang_default,tickets_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Tickets",__name:"tickets",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h192v64H320zm0 384h384v64H320z"})]))}}),tickets_default=tickets_vue_vue_type_script_setup_true_lang_default,upload_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Upload",__name:"upload",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248z"})]))}}),upload_default=upload_vue_vue_type_script_setup_true_lang_default,view_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"View",__name:"view",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),view_default=view_vue_vue_type_script_setup_true_lang_default,warning_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"WarningFilled",__name:"warning-filled",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),warning_filled_default=warning_filled_vue_vue_type_script_setup_true_lang_default,zoom_in_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomIn",__name:"zoom-in",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),zoom_in_default=zoom_in_vue_vue_type_script_setup_true_lang_default,zoom_out_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomOut",__name:"zoom-out",setup(t){return(r,e)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),zoom_out_default=zoom_out_vue_vue_type_script_setup_true_lang_default;const epPropKey="__epPropKey",definePropType=t=>t,isEpProp=t=>isObject$2(t)&&!!t[epPropKey],buildProp=(t,r)=>{if(!isObject$2(t)||isEpProp(t))return t;const{values:e,required:n,default:g,type:y,validator:i}=t,L={type:y,required:!!n,validator:e||i?$=>{let V=!1,z=[];if(e&&(z=Array.from(e),hasOwn(t,"default")&&z.push(g),V||(V=z.includes($))),i&&(V||(V=i($))),!V&&z.length>0){const re=[...new Set(z)].map(oe=>JSON.stringify(oe)).join(", ");warn(`Invalid prop: validation failed${r?` for prop "${r}"`:""}. Expected one of [${re}], got value ${JSON.stringify($)}.`)}return V}:void 0,[epPropKey]:!0};return hasOwn(t,"default")&&(L.default=g),L},buildProps=t=>fromPairs(Object.entries(t).map(([r,e])=>[r,buildProp(e,r)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(t,r)=>{if(t.install=e=>{for(const n of[t,...Object.values(r??{})])e.component(n.name,n)},r)for(const[e,n]of Object.entries(r))t[e]=n;return t},withInstallFunction=(t,r)=>(t.install=e=>{t._context=e._context,e.config.globalProperties[r]=t},t),withNoopInstall=t=>(t.install=NOOP,t),composeRefs=(...t)=>r=>{t.forEach(e=>{isFunction$3(e)?e(r):e.value=r})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",componentSizes=["","default","small","large"],isValidComponentSize=t=>["",...componentSizes].includes(t);var PatchFlags=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(PatchFlags||{});function isFragment(t){return isVNode(t)&&t.type===Fragment}function isComment(t){return isVNode(t)&&t.type===Comment}function isValidElementNode(t){return isVNode(t)&&!isFragment(t)&&!isComment(t)}const flattedChildren=t=>{const r=isArray$3(t)?t:[t],e=[];return r.forEach(n=>{var g;isArray$3(n)?e.push(...flattedChildren(n)):isVNode(n)&&isArray$3(n.children)?e.push(...flattedChildren(n.children)):(e.push(n),isVNode(n)&&((g=n.component)!=null&&g.subTree)&&e.push(...flattedChildren(n.component.subTree)))}),e},unique=t=>[...new Set(t)],castArray=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],isKorean=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),rAF=t=>isClient?window.requestAnimationFrame(t):setTimeout(t,16),mutable=t=>t,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(t={})=>{const{excludeListeners:r=!1,excludeKeys:e}=t,n=computed(()=>((e==null?void 0:e.value)||[]).concat(DEFAULT_EXCLUDE_KEYS)),g=getCurrentInstance();return computed(g?()=>{var y;return fromPairs(Object.entries((y=g.proxy)==null?void 0:y.$attrs).filter(([i])=>!n.value.includes(i)&&!(r&&LISTENER_PREFIX.test(i))))}:()=>({}))},useDeprecated=({from:t,replacement:r,scope:e,version:n,ref:g,type:y="API"},i)=>{watch(()=>unref(i),k=>{},{immediate:!0})},useDraggable=(t,r,e,n)=>{let g={offsetX:0,offsetY:0};const y=L=>{const $=L.clientX,V=L.clientY,{offsetX:z,offsetY:re}=g,oe=t.value.getBoundingClientRect(),le=oe.left,ue=oe.top,ie=oe.width,ae=oe.height,Fe=document.documentElement.clientWidth,de=document.documentElement.clientHeight,Ie=-le+z,Ve=-ue+re,kt=Fe-le-ie+z,At=de-ue-ae+re,ze=cr=>{let er=z+cr.clientX-$,or=re+cr.clientY-V;n!=null&&n.value||(er=Math.min(Math.max(er,Ie),kt),or=Math.min(Math.max(or,Ve),At)),g={offsetX:er,offsetY:or},t.value&&(t.value.style.transform=`translate(${addUnit(er)}, ${addUnit(or)})`)},Et=()=>{document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",Et)};document.addEventListener("mousemove",ze),document.addEventListener("mouseup",Et)},i=()=>{r.value&&t.value&&r.value.addEventListener("mousedown",y)},k=()=>{r.value&&t.value&&r.value.removeEventListener("mousedown",y)};onMounted(()=>{watchEffect(()=>{e.value?i():k()})}),onBeforeUnmount(()=>{k()})};var English={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const buildTranslator=t=>(r,e)=>translate(r,e,unref(t)),translate=(t,r,e)=>get(e,t,t).replace(/\{(\w+)\}/g,(n,g)=>{var y;return`${(y=r==null?void 0:r[g])!=null?y:`{${g}}`}`}),buildLocaleContext=t=>{const r=computed(()=>unref(t).name),e=isRef(t)?t:ref(t);return{lang:r,locale:e,t:buildTranslator(t)}},localeContextKey=Symbol("localeContextKey"),useLocale=t=>{const r=t||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>r.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(t,r,e,n,g)=>{let y=`${t}-${r}`;return e&&(y+=`-${e}`),n&&(y+=`__${n}`),g&&(y+=`--${g}`),y},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=t=>{const r=t||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(r)||defaultNamespace)},useNamespace=(t,r)=>{const e=useGetDerivedNamespace(r);return{namespace:e,b:(ue="")=>_bem(e.value,t,ue,"",""),e:ue=>ue?_bem(e.value,t,"",ue,""):"",m:ue=>ue?_bem(e.value,t,"","",ue):"",be:(ue,ie)=>ue&&ie?_bem(e.value,t,ue,ie,""):"",em:(ue,ie)=>ue&&ie?_bem(e.value,t,"",ue,ie):"",bm:(ue,ie)=>ue&&ie?_bem(e.value,t,ue,"",ie):"",bem:(ue,ie,ae)=>ue&&ie&&ae?_bem(e.value,t,ue,ie,ae):"",is:(ue,...ie)=>{const ae=ie.length>=1?ie[0]:!0;return ue&&ae?`${statePrefix}${ue}`:""},cssVar:ue=>{const ie={};for(const ae in ue)ue[ae]&&(ie[`--${e.value}-${ae}`]=ue[ae]);return ie},cssVarName:ue=>`--${e.value}-${ue}`,cssVarBlock:ue=>{const ie={};for(const ae in ue)ue[ae]&&(ie[`--${e.value}-${t}-${ae}`]=ue[ae]);return ie},cssVarBlockName:ue=>`--${e.value}-${t}-${ue}`}},useLockscreen=(t,r={})=>{isRef(t)||throwError("[useLockscreen]","You need to pass a ref param to this function");const e=r.ns||useNamespace("popup"),n=computed$1(()=>e.bm("parent","hidden"));if(!isClient||hasClass(document.body,n.value))return;let g=0,y=!1,i="0";const k=()=>{setTimeout(()=>{removeClass(document==null?void 0:document.body,n.value),y&&document&&(document.body.style.width=i)},200)};watch(t,L=>{if(!L){k();return}y=!hasClass(document.body,n.value),y&&(i=document.body.style.width),g=getScrollBarWidth(e.namespace.value);const $=document.documentElement.clientHeight<document.body.scrollHeight,V=getStyle(document.body,"overflowY");g>0&&($||V==="scroll")&&y&&(document.body.style.width=`calc(100% - ${g}px)`),addClass(document.body,n.value)}),onScopeDispose(()=>k())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=t=>{const r=`update:${t}`,e=`onUpdate:${t}`,n=[r],g={[t]:_prop,[e]:_event};return{useModelToggle:({indicator:i,toggleReason:k,shouldHideWhenRouteChanges:L,shouldProceed:$,onShow:V,onHide:z})=>{const re=getCurrentInstance(),{emit:oe}=re,le=re.props,ue=computed(()=>isFunction$3(le[e])),ie=computed(()=>le[t]===null),ae=At=>{i.value!==!0&&(i.value=!0,k&&(k.value=At),isFunction$3(V)&&V(At))},Fe=At=>{i.value!==!1&&(i.value=!1,k&&(k.value=At),isFunction$3(z)&&z(At))},de=At=>{if(le.disabled===!0||isFunction$3($)&&!$())return;const ze=ue.value&&isClient;ze&&oe(r,!0),(ie.value||!ze)&&ae(At)},Ie=At=>{if(le.disabled===!0||!isClient)return;const ze=ue.value&&isClient;ze&&oe(r,!1),(ie.value||!ze)&&Fe(At)},Ve=At=>{isBoolean$1(At)&&(le.disabled&&At?ue.value&&oe(r,!1):i.value!==At&&(At?ae():Fe()))},kt=()=>{i.value?Ie():de()};return watch(()=>le[t],Ve),L&&re.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...re.proxy.$route}),()=>{L.value&&i.value&&Ie()}),onMounted(()=>{Ve(le[t])}),{hide:Ie,show:de,toggle:kt,hasUpdateHandler:ue}},useModelToggleProps:g,useModelToggleEmits:n}};createModelToggleComposable("modelValue");const useProp=t=>{const r=getCurrentInstance();return computed(()=>{var e,n;return(n=(e=r==null?void 0:r.proxy)==null?void 0:e.$props)==null?void 0:n[t]})};var E$1="top",R="bottom",W="right",P$1="left",me="auto",G=[E$1,R,W,P$1],U$1="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(t,r){return t.concat([r+"-"+U$1,r+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(t,r){return t.concat([r,r+"-"+U$1,r+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt$1="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt$1,nt,rt];function C(t){return t?(t.nodeName||"").toLowerCase():null}function H(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function Q(t){var r=H(t).Element;return t instanceof r||t instanceof Element}function B(t){var r=H(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function Pe(t){if(typeof ShadowRoot>"u")return!1;var r=H(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}function Mt(t){var r=t.state;Object.keys(r.elements).forEach(function(e){var n=r.styles[e]||{},g=r.attributes[e]||{},y=r.elements[e];!B(y)||!C(y)||(Object.assign(y.style,n),Object.keys(g).forEach(function(i){var k=g[i];k===!1?y.removeAttribute(i):y.setAttribute(i,k===!0?"":k)}))})}function Rt(t){var r=t.state,e={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,e.popper),r.styles=e,r.elements.arrow&&Object.assign(r.elements.arrow.style,e.arrow),function(){Object.keys(r.elements).forEach(function(n){var g=r.elements[n],y=r.attributes[n]||{},i=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:e[n]),k=i.reduce(function(L,$){return L[$]="",L},{});!B(g)||!C(g)||(Object.assign(g.style,k),Object.keys(y).forEach(function(L){g.removeAttribute(L)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(t){return t.split("-")[0]}var X$1=Math.max,ve=Math.min,Z=Math.round;function ee(t,r){r===void 0&&(r=!1);var e=t.getBoundingClientRect(),n=1,g=1;if(B(t)&&r){var y=t.offsetHeight,i=t.offsetWidth;i>0&&(n=Z(e.width)/i||1),y>0&&(g=Z(e.height)/y||1)}return{width:e.width/n,height:e.height/g,top:e.top/g,right:e.right/n,bottom:e.bottom/g,left:e.left/n,x:e.left/n,y:e.top/g}}function ke(t){var r=ee(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(r.width-e)<=1&&(e=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}function it(t,r){var e=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(e&&Pe(e)){var n=r;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function N$1(t){return H(t).getComputedStyle(t)}function Wt(t){return["table","td","th"].indexOf(C(t))>=0}function I$1(t){return((Q(t)?t.ownerDocument:t.document)||window.document).documentElement}function ge(t){return C(t)==="html"?t:t.assignedSlot||t.parentNode||(Pe(t)?t.host:null)||I$1(t)}function at(t){return!B(t)||N$1(t).position==="fixed"?null:t.offsetParent}function Bt(t){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&B(t)){var n=N$1(t);if(n.position==="fixed")return null}var g=ge(t);for(Pe(g)&&(g=g.host);B(g)&&["html","body"].indexOf(C(g))<0;){var y=N$1(g);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||r&&y.willChange==="filter"||r&&y.filter&&y.filter!=="none")return g;g=g.parentNode}return null}function se(t){for(var r=H(t),e=at(t);e&&Wt(e)&&N$1(e).position==="static";)e=at(e);return e&&(C(e)==="html"||C(e)==="body"&&N$1(e).position==="static")?r:e||Bt(t)||r}function Le(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fe(t,r,e){return X$1(t,ve(r,e))}function St(t,r,e){var n=fe(t,r,e);return n>e?e:n}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(t){return Object.assign({},st(),t)}function ct(t,r){return r.reduce(function(e,n){return e[n]=t,e},{})}var Tt=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ft(typeof t!="number"?t:ct(t,G))};function Ht(t){var r,e=t.state,n=t.name,g=t.options,y=e.elements.arrow,i=e.modifiersData.popperOffsets,k=q(e.placement),L=Le(k),$=[P$1,W].indexOf(k)>=0,V=$?"height":"width";if(!(!y||!i)){var z=Tt(g.padding,e),re=ke(y),oe=L==="y"?E$1:P$1,le=L==="y"?R:W,ue=e.rects.reference[V]+e.rects.reference[L]-i[L]-e.rects.popper[V],ie=i[L]-e.rects.reference[L],ae=se(y),Fe=ae?L==="y"?ae.clientHeight||0:ae.clientWidth||0:0,de=ue/2-ie/2,Ie=z[oe],Ve=Fe-re[V]-z[le],kt=Fe/2-re[V]/2+de,At=fe(Ie,kt,Ve),ze=L;e.modifiersData[n]=(r={},r[ze]=At,r.centerOffset=At-kt,r)}}function Ct(t){var r=t.state,e=t.options,n=e.element,g=n===void 0?"[data-popper-arrow]":n;g!=null&&(typeof g=="string"&&(g=r.elements.popper.querySelector(g),!g)||!it(r.elements.popper,g)||(r.elements.arrow=g))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(t){return t.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(t){var r=t.x,e=t.y,n=window,g=n.devicePixelRatio||1;return{x:Z(r*g)/g||0,y:Z(e*g)/g||0}}function ut(t){var r,e=t.popper,n=t.popperRect,g=t.placement,y=t.variation,i=t.offsets,k=t.position,L=t.gpuAcceleration,$=t.adaptive,V=t.roundOffsets,z=t.isFixed,re=i.x,oe=re===void 0?0:re,le=i.y,ue=le===void 0?0:le,ie=typeof V=="function"?V({x:oe,y:ue}):{x:oe,y:ue};oe=ie.x,ue=ie.y;var ae=i.hasOwnProperty("x"),Fe=i.hasOwnProperty("y"),de=P$1,Ie=E$1,Ve=window;if($){var kt=se(e),At="clientHeight",ze="clientWidth";if(kt===H(e)&&(kt=I$1(e),N$1(kt).position!=="static"&&k==="absolute"&&(At="scrollHeight",ze="scrollWidth")),kt=kt,g===E$1||(g===P$1||g===W)&&y===J){Ie=R;var Et=z&&kt===Ve&&Ve.visualViewport?Ve.visualViewport.height:kt[At];ue-=Et-n.height,ue*=L?1:-1}if(g===P$1||(g===E$1||g===R)&&y===J){de=W;var cr=z&&kt===Ve&&Ve.visualViewport?Ve.visualViewport.width:kt[ze];oe-=cr-n.width,oe*=L?1:-1}}var er=Object.assign({position:k},$&&qt),or=V===!0?Vt({x:oe,y:ue}):{x:oe,y:ue};if(oe=or.x,ue=or.y,L){var dr;return Object.assign({},er,(dr={},dr[Ie]=Fe?"0":"",dr[de]=ae?"0":"",dr.transform=(Ve.devicePixelRatio||1)<=1?"translate("+oe+"px, "+ue+"px)":"translate3d("+oe+"px, "+ue+"px, 0)",dr))}return Object.assign({},er,(r={},r[Ie]=Fe?ue+"px":"",r[de]=ae?oe+"px":"",r.transform="",r))}function Nt(t){var r=t.state,e=t.options,n=e.gpuAcceleration,g=n===void 0?!0:n,y=e.adaptive,i=y===void 0?!0:y,k=e.roundOffsets,L=k===void 0?!0:k,$={placement:q(r.placement),variation:te(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:g,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,ut(Object.assign({},$,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:i,roundOffsets:L})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,ut(Object.assign({},$,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:L})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(t){var r=t.state,e=t.instance,n=t.options,g=n.scroll,y=g===void 0?!0:g,i=n.resize,k=i===void 0?!0:i,L=H(r.elements.popper),$=[].concat(r.scrollParents.reference,r.scrollParents.popper);return y&&$.forEach(function(V){V.addEventListener("scroll",e.update,ye)}),k&&L.addEventListener("resize",e.update,ye),function(){y&&$.forEach(function(V){V.removeEventListener("scroll",e.update,ye)}),k&&L.removeEventListener("resize",e.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(t){return t.replace(/left|right|bottom|top/g,function(r){return _t[r]})}var zt={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,function(r){return zt[r]})}function We(t){var r=H(t),e=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Be(t){return ee(I$1(t)).left+We(t).scrollLeft}function Ft(t){var r=H(t),e=I$1(t),n=r.visualViewport,g=e.clientWidth,y=e.clientHeight,i=0,k=0;return n&&(g=n.width,y=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=n.offsetLeft,k=n.offsetTop)),{width:g,height:y,x:i+Be(t),y:k}}function Ut(t){var r,e=I$1(t),n=We(t),g=(r=t.ownerDocument)==null?void 0:r.body,y=X$1(e.scrollWidth,e.clientWidth,g?g.scrollWidth:0,g?g.clientWidth:0),i=X$1(e.scrollHeight,e.clientHeight,g?g.scrollHeight:0,g?g.clientHeight:0),k=-n.scrollLeft+Be(t),L=-n.scrollTop;return N$1(g||e).direction==="rtl"&&(k+=X$1(e.clientWidth,g?g.clientWidth:0)-y),{width:y,height:i,x:k,y:L}}function Se(t){var r=N$1(t),e=r.overflow,n=r.overflowX,g=r.overflowY;return/auto|scroll|overlay|hidden/.test(e+g+n)}function dt(t){return["html","body","#document"].indexOf(C(t))>=0?t.ownerDocument.body:B(t)&&Se(t)?t:dt(ge(t))}function ce(t,r){var e;r===void 0&&(r=[]);var n=dt(t),g=n===((e=t.ownerDocument)==null?void 0:e.body),y=H(n),i=g?[y].concat(y.visualViewport||[],Se(n)?n:[]):n,k=r.concat(i);return g?k:k.concat(ce(ge(i)))}function Te(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Xt(t){var r=ee(t);return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function ht(t,r){return r===je?Te(Ft(t)):Q(r)?Xt(r):Te(Ut(I$1(t)))}function Yt(t){var r=ce(ge(t)),e=["absolute","fixed"].indexOf(N$1(t).position)>=0,n=e&&B(t)?se(t):t;return Q(n)?r.filter(function(g){return Q(g)&&it(g,n)&&C(g)!=="body"}):[]}function Gt(t,r,e){var n=r==="clippingParents"?Yt(t):[].concat(r),g=[].concat(n,[e]),y=g[0],i=g.reduce(function(k,L){var $=ht(t,L);return k.top=X$1($.top,k.top),k.right=ve($.right,k.right),k.bottom=ve($.bottom,k.bottom),k.left=X$1($.left,k.left),k},ht(t,y));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function mt(t){var r=t.reference,e=t.element,n=t.placement,g=n?q(n):null,y=n?te(n):null,i=r.x+r.width/2-e.width/2,k=r.y+r.height/2-e.height/2,L;switch(g){case E$1:L={x:i,y:r.y-e.height};break;case R:L={x:i,y:r.y+r.height};break;case W:L={x:r.x+r.width,y:k};break;case P$1:L={x:r.x-e.width,y:k};break;default:L={x:r.x,y:r.y}}var $=g?Le(g):null;if($!=null){var V=$==="y"?"height":"width";switch(y){case U$1:L[$]=L[$]-(r[V]/2-e[V]/2);break;case J:L[$]=L[$]+(r[V]/2-e[V]/2);break}}return L}function ne(t,r){r===void 0&&(r={});var e=r,n=e.placement,g=n===void 0?t.placement:n,y=e.boundary,i=y===void 0?Xe:y,k=e.rootBoundary,L=k===void 0?je:k,$=e.elementContext,V=$===void 0?K:$,z=e.altBoundary,re=z===void 0?!1:z,oe=e.padding,le=oe===void 0?0:oe,ue=ft(typeof le!="number"?le:ct(le,G)),ie=V===K?Ye:K,ae=t.rects.popper,Fe=t.elements[re?ie:V],de=Gt(Q(Fe)?Fe:Fe.contextElement||I$1(t.elements.popper),i,L),Ie=ee(t.elements.reference),Ve=mt({reference:Ie,element:ae,strategy:"absolute",placement:g}),kt=Te(Object.assign({},ae,Ve)),At=V===K?kt:Ie,ze={top:de.top-At.top+ue.top,bottom:At.bottom-de.bottom+ue.bottom,left:de.left-At.left+ue.left,right:At.right-de.right+ue.right},Et=t.modifiersData.offset;if(V===K&&Et){var cr=Et[g];Object.keys(ze).forEach(function(er){var or=[W,R].indexOf(er)>=0?1:-1,dr=[E$1,R].indexOf(er)>=0?"y":"x";ze[er]+=cr[dr]*or})}return ze}function Jt(t,r){r===void 0&&(r={});var e=r,n=e.placement,g=e.boundary,y=e.rootBoundary,i=e.padding,k=e.flipVariations,L=e.allowedAutoPlacements,$=L===void 0?Ee:L,V=te(n),z=V?k?De:De.filter(function(le){return te(le)===V}):G,re=z.filter(function(le){return $.indexOf(le)>=0});re.length===0&&(re=z);var oe=re.reduce(function(le,ue){return le[ue]=ne(t,{placement:ue,boundary:g,rootBoundary:y,padding:i})[q(ue)],le},{});return Object.keys(oe).sort(function(le,ue){return oe[le]-oe[ue]})}function Kt(t){if(q(t)===me)return[];var r=be(t);return[lt(t),r,lt(r)]}function Qt(t){var r=t.state,e=t.options,n=t.name;if(!r.modifiersData[n]._skip){for(var g=e.mainAxis,y=g===void 0?!0:g,i=e.altAxis,k=i===void 0?!0:i,L=e.fallbackPlacements,$=e.padding,V=e.boundary,z=e.rootBoundary,re=e.altBoundary,oe=e.flipVariations,le=oe===void 0?!0:oe,ue=e.allowedAutoPlacements,ie=r.options.placement,ae=q(ie),Fe=ae===ie,de=L||(Fe||!le?[be(ie)]:Kt(ie)),Ie=[ie].concat(de).reduce(function(mr,_r){return mr.concat(q(_r)===me?Jt(r,{placement:_r,boundary:V,rootBoundary:z,padding:$,flipVariations:le,allowedAutoPlacements:ue}):_r)},[]),Ve=r.rects.reference,kt=r.rects.popper,At=new Map,ze=!0,Et=Ie[0],cr=0;cr<Ie.length;cr++){var er=Ie[cr],or=q(er),dr=te(er)===U$1,lr=[E$1,R].indexOf(or)>=0,nr=lr?"width":"height",ur=ne(r,{placement:er,boundary:V,rootBoundary:z,altBoundary:re,padding:$}),ar=lr?dr?W:P$1:dr?R:E$1;Ve[nr]>kt[nr]&&(ar=be(ar));var gr=be(ar),pr=[];if(y&&pr.push(ur[or]<=0),k&&pr.push(ur[ar]<=0,ur[gr]<=0),pr.every(function(mr){return mr})){Et=er,ze=!1;break}At.set(er,pr)}if(ze)for(var hr=le?3:1,Cr=function(mr){var _r=Ie.find(function(Ar){var Er=At.get(Ar);if(Er)return Er.slice(0,mr).every(function(sr){return sr})});if(_r)return Et=_r,"break"},wr=hr;wr>0;wr--){var Sr=Cr(wr);if(Sr==="break")break}r.placement!==Et&&(r.modifiersData[n]._skip=!0,r.placement=Et,r.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(t,r,e){return e===void 0&&(e={x:0,y:0}),{top:t.top-r.height-e.y,right:t.right-r.width+e.x,bottom:t.bottom-r.height+e.y,left:t.left-r.width-e.x}}function yt(t){return[E$1,W,R,P$1].some(function(r){return t[r]>=0})}function Zt(t){var r=t.state,e=t.name,n=r.rects.reference,g=r.rects.popper,y=r.modifiersData.preventOverflow,i=ne(r,{elementContext:"reference"}),k=ne(r,{altBoundary:!0}),L=gt(i,n),$=gt(k,g,y),V=yt(L),z=yt($);r.modifiersData[e]={referenceClippingOffsets:L,popperEscapeOffsets:$,isReferenceHidden:V,hasPopperEscaped:z},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":V,"data-popper-escaped":z})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(t,r,e){var n=q(t),g=[P$1,E$1].indexOf(n)>=0?-1:1,y=typeof e=="function"?e(Object.assign({},r,{placement:t})):e,i=y[0],k=y[1];return i=i||0,k=(k||0)*g,[P$1,W].indexOf(n)>=0?{x:k,y:i}:{x:i,y:k}}function tn(t){var r=t.state,e=t.options,n=t.name,g=e.offset,y=g===void 0?[0,0]:g,i=Ee.reduce(function(V,z){return V[z]=en(z,r.rects,y),V},{}),k=i[r.placement],L=k.x,$=k.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=L,r.modifiersData.popperOffsets.y+=$),r.modifiersData[n]=i}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(t){var r=t.state,e=t.name;r.modifiersData[e]=mt({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(t){return t==="x"?"y":"x"}function on(t){var r=t.state,e=t.options,n=t.name,g=e.mainAxis,y=g===void 0?!0:g,i=e.altAxis,k=i===void 0?!1:i,L=e.boundary,$=e.rootBoundary,V=e.altBoundary,z=e.padding,re=e.tether,oe=re===void 0?!0:re,le=e.tetherOffset,ue=le===void 0?0:le,ie=ne(r,{boundary:L,rootBoundary:$,padding:z,altBoundary:V}),ae=q(r.placement),Fe=te(r.placement),de=!Fe,Ie=Le(ae),Ve=rn(Ie),kt=r.modifiersData.popperOffsets,At=r.rects.reference,ze=r.rects.popper,Et=typeof ue=="function"?ue(Object.assign({},r.rects,{placement:r.placement})):ue,cr=typeof Et=="number"?{mainAxis:Et,altAxis:Et}:Object.assign({mainAxis:0,altAxis:0},Et),er=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,or={x:0,y:0};if(kt){if(y){var dr,lr=Ie==="y"?E$1:P$1,nr=Ie==="y"?R:W,ur=Ie==="y"?"height":"width",ar=kt[Ie],gr=ar+ie[lr],pr=ar-ie[nr],hr=oe?-ze[ur]/2:0,Cr=Fe===U$1?At[ur]:ze[ur],wr=Fe===U$1?-ze[ur]:-At[ur],Sr=r.elements.arrow,mr=oe&&Sr?ke(Sr):{width:0,height:0},_r=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:st(),Ar=_r[lr],Er=_r[nr],sr=fe(0,At[ur],mr[ur]),xr=de?At[ur]/2-hr-sr-Ar-cr.mainAxis:Cr-sr-Ar-cr.mainAxis,Nr=de?-At[ur]/2+hr+sr+Er+cr.mainAxis:wr+sr+Er+cr.mainAxis,Mr=r.elements.arrow&&se(r.elements.arrow),br=Mr?Ie==="y"?Mr.clientTop||0:Mr.clientLeft||0:0,yr=(dr=er==null?void 0:er[Ie])!=null?dr:0,Tr=ar+xr-yr-br,Br=ar+Nr-yr,Lr=fe(oe?ve(gr,Tr):gr,ar,oe?X$1(pr,Br):pr);kt[Ie]=Lr,or[Ie]=Lr-ar}if(k){var Fr,qr=Ie==="x"?E$1:P$1,Vr=Ie==="x"?R:W,Qr=kt[Ve],Tn=Ve==="y"?"height":"width",xn=Qr+ie[qr],Xr=Qr-ie[Vr],Vn=[E$1,P$1].indexOf(ae)!==-1,Zr=(Fr=er==null?void 0:er[Ve])!=null?Fr:0,Nn=Vn?xn:Qr-At[Tn]-ze[Tn]-Zr+cr.altAxis,Jr=Vn?Qr+At[Tn]+ze[Tn]-Zr-cr.altAxis:Xr,wn=oe&&Vn?St(Nn,Qr,Jr):fe(oe?Nn:xn,Qr,oe?Jr:Xr);kt[Ve]=wn,or[Ve]=wn-Qr}r.modifiersData[n]=or}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sn(t){return t===H(t)||!B(t)?We(t):an(t)}function fn(t){var r=t.getBoundingClientRect(),e=Z(r.width)/t.offsetWidth||1,n=Z(r.height)/t.offsetHeight||1;return e!==1||n!==1}function cn(t,r,e){e===void 0&&(e=!1);var n=B(r),g=B(r)&&fn(r),y=I$1(r),i=ee(t,g),k={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(n||!n&&!e)&&((C(r)!=="body"||Se(y))&&(k=sn(r)),B(r)?(L=ee(r,!0),L.x+=r.clientLeft,L.y+=r.clientTop):y&&(L.x=Be(y))),{x:i.left+k.scrollLeft-L.x,y:i.top+k.scrollTop-L.y,width:i.width,height:i.height}}function pn(t){var r=new Map,e=new Set,n=[];t.forEach(function(y){r.set(y.name,y)});function g(y){e.add(y.name);var i=[].concat(y.requires||[],y.requiresIfExists||[]);i.forEach(function(k){if(!e.has(k)){var L=r.get(k);L&&g(L)}}),n.push(y)}return t.forEach(function(y){e.has(y.name)||g(y)}),n}function un(t){var r=pn(t);return ot.reduce(function(e,n){return e.concat(r.filter(function(g){return g.phase===n}))},[])}function ln(t){var r;return function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(t())})})),r}}function dn(t){var r=t.reduce(function(e,n){var g=e[n.name];return e[n.name]=g?Object.assign({},g,n,{options:Object.assign({},g.options,n.options),data:Object.assign({},g.data,n.data)}):n,e},{});return Object.keys(r).map(function(e){return r[e]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function we(t){t===void 0&&(t={});var r=t,e=r.defaultModifiers,n=e===void 0?[]:e,g=r.defaultOptions,y=g===void 0?Ot:g;return function(i,k,L){L===void 0&&(L=y);var $={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,y),modifiersData:{},elements:{reference:i,popper:k},attributes:{},styles:{}},V=[],z=!1,re={state:$,setOptions:function(ue){var ie=typeof ue=="function"?ue($.options):ue;le(),$.options=Object.assign({},y,$.options,ie),$.scrollParents={reference:Q(i)?ce(i):i.contextElement?ce(i.contextElement):[],popper:ce(k)};var ae=un(dn([].concat(n,$.options.modifiers)));return $.orderedModifiers=ae.filter(function(Fe){return Fe.enabled}),oe(),re.update()},forceUpdate:function(){if(!z){var ue=$.elements,ie=ue.reference,ae=ue.popper;if($t(ie,ae)){$.rects={reference:cn(ie,se(ae),$.options.strategy==="fixed"),popper:ke(ae)},$.reset=!1,$.placement=$.options.placement,$.orderedModifiers.forEach(function(ze){return $.modifiersData[ze.name]=Object.assign({},ze.data)});for(var Fe=0;Fe<$.orderedModifiers.length;Fe++){if($.reset===!0){$.reset=!1,Fe=-1;continue}var de=$.orderedModifiers[Fe],Ie=de.fn,Ve=de.options,kt=Ve===void 0?{}:Ve,At=de.name;typeof Ie=="function"&&($=Ie({state:$,options:kt,name:At,instance:re})||$)}}}},update:ln(function(){return new Promise(function(ue){re.forceUpdate(),ue($)})}),destroy:function(){le(),z=!0}};if(!$t(i,k))return re;re.setOptions(L).then(function(ue){!z&&L.onFirstUpdate&&L.onFirstUpdate(ue)});function oe(){$.orderedModifiers.forEach(function(ue){var ie=ue.name,ae=ue.options,Fe=ae===void 0?{}:ae,de=ue.effect;if(typeof de=="function"){var Ie=de({state:$,name:ie,instance:re,options:Fe}),Ve=function(){};V.push(Ie||Ve)}})}function le(){V.forEach(function(ue){return ue()}),V=[]}return re}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(t,r,e={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:L})=>{const $=deriveState(L);Object.assign(i.value,$)},requires:["computeStyles"]},g=computed(()=>{const{onFirstUpdate:L,placement:$,strategy:V,modifiers:z}=unref(e);return{onFirstUpdate:L,placement:$||"bottom",strategy:V||"absolute",modifiers:[...z||[],n,{name:"applyStyles",enabled:!1}]}}),y=shallowRef(),i=ref({styles:{popper:{position:unref(g).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),k=()=>{y.value&&(y.value.destroy(),y.value=void 0)};return watch(g,L=>{const $=unref(y);$&&$.setOptions(L)},{deep:!0}),watch([t,r],([L,$])=>{k(),!(!L||!$)&&(y.value=yn(L,$,unref(g)))}),onBeforeUnmount(()=>{k()}),{state:computed(()=>{var L;return{...((L=unref(y))==null?void 0:L.state)||{}}}),styles:computed(()=>unref(i).styles),attributes:computed(()=>unref(i).attributes),update:()=>{var L;return(L=unref(y))==null?void 0:L.update()},forceUpdate:()=>{var L;return(L=unref(y))==null?void 0:L.forceUpdate()},instanceRef:computed(()=>unref(y))}};function deriveState(t){const r=Object.keys(t.elements),e=fromPairs(r.map(g=>[g,t.styles[g]||{}])),n=fromPairs(r.map(g=>[g,t.attributes[g]]));return{styles:e,attributes:n}}const useSameTarget=t=>{if(!t)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let r=!1,e=!1;return{onClick:i=>{r&&e&&t(i),r=e=!1},onMousedown:i=>{r=i.target===i.currentTarget},onMouseup:i=>{e=i.target===i.currentTarget}}};function useTimeout(){let t;const r=(n,g)=>{e(),t=window.setTimeout(n,g)},e=()=>window.clearTimeout(t);return tryOnScopeDispose(()=>e()),{registerTimeout:r,cancelTimeout:e}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=t=>{const r=useIdInjection(),e=useGetDerivedNamespace();return computed(()=>unref(t)||`${e.value}-id-${r.prefix}-${r.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=t=>{const r=t;r.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(e=>e(r))},useEscapeKeydown=t=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(t)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(r=>r!==t),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const t=useGetDerivedNamespace(),r=useIdInjection(),e=computed(()=>`${t.value}-popper-container-${r.prefix}`),n=computed(()=>`#${e.value}`);return{id:e,selector:n}},createContainer=t=>{const r=document.createElement("div");return r.id=t,document.body.appendChild(r),r},usePopperContainer=()=>{const{id:t,selector:r}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(r.value)&&(cachedContainer=createContainer(t.value))}),{id:t,selector:r}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:t,hideAfter:r,autoClose:e,open:n,close:g})=>{const{registerTimeout:y}=useTimeout(),{registerTimeout:i,cancelTimeout:k}=useTimeout();return{onOpen:V=>{y(()=>{n(V);const z=unref(e);isNumber$1(z)&&z>0&&i(()=>{g(V)},z)},unref(t))},onClose:V=>{k(),y(()=>{g(V)},unref(r))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=t=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:e=>{t.value=e}})},useForwardRefDirective=t=>({mounted(r){t(r)},updated(r){t(r)},unmounted(){t(null)}}),zIndex=ref(0),defaultInitialZIndex=2e3,zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=t=>{const r=t||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),e=computed(()=>{const y=unref(r);return isNumber$1(y)?y:defaultInitialZIndex}),n=computed(()=>e.value+zIndex.value);return{initialZIndex:e,currentZIndex:n,nextZIndex:()=>(zIndex.value++,n.value)}};function useCursor(t){const r=ref();function e(){if(t.value==null)return;const{selectionStart:g,selectionEnd:y,value:i}=t.value;if(g==null||y==null)return;const k=i.slice(0,Math.max(0,g)),L=i.slice(Math.max(0,y));r.value={selectionStart:g,selectionEnd:y,value:i,beforeTxt:k,afterTxt:L}}function n(){if(t.value==null||r.value==null)return;const{value:g}=t.value,{beforeTxt:y,afterTxt:i,selectionStart:k}=r.value;if(y==null||i==null||k==null)return;let L=g.length;if(g.endsWith(i))L=g.length-i.length;else if(g.startsWith(y))L=y.length;else{const $=y[k-1],V=g.indexOf($,k-1);V!==-1&&(L=V+1)}t.value.setSelectionRange(L,L)}return[e,n]}const useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const t=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(t.size)||"")};function useFocusController(t,{afterFocus:r,beforeBlur:e,afterBlur:n}={}){const g=getCurrentInstance(),{emit:y}=g,i=shallowRef(),k=ref(!1),L=z=>{k.value||(k.value=!0,y("focus",z),r==null||r())},$=z=>{var re;isFunction$3(e)&&e(z)||z.relatedTarget&&((re=i.value)!=null&&re.contains(z.relatedTarget))||(k.value=!1,y("blur",z),n==null||n())},V=()=>{var z;(z=t.value)==null||z.focus()};return watch(i,z=>{z&&z.setAttribute("tabindex","-1")}),useEventListener(i,"click",V),{wrapperRef:i,isFocused:k,handleFocus:L,handleBlur:$}}const configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(t,r=void 0){const e=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return t?computed(()=>{var n,g;return(g=(n=e.value)==null?void 0:n[t])!=null?g:r}):e}function useGlobalComponentSettings(t,r){const e=useGlobalConfig(),n=useNamespace(t,computed(()=>{var k;return((k=e.value)==null?void 0:k.namespace)||defaultNamespace})),g=useLocale(computed(()=>{var k;return(k=e.value)==null?void 0:k.locale})),y=useZIndex(computed(()=>{var k;return((k=e.value)==null?void 0:k.zIndex)||defaultInitialZIndex})),i=computed(()=>{var k;return unref(r)||((k=e.value)==null?void 0:k.size)||""});return provideGlobalConfig(computed(()=>unref(e)||{})),{ns:n,locale:g,zIndex:y,size:i}}const provideGlobalConfig=(t,r,e=!1)=>{var n;const g=!!getCurrentInstance(),y=g?useGlobalConfig():void 0,i=(n=r==null?void 0:r.provide)!=null?n:g?provide:void 0;if(!i)return;const k=computed(()=>{const L=unref(t);return y!=null&&y.value?mergeConfig$1(y.value,L):L});return i(configProviderContextKey,k),i(localeContextKey,computed(()=>k.value.locale)),i(namespaceContextKey,computed(()=>k.value.namespace)),i(zIndexContextKey,computed(()=>k.value.zIndex)),i(SIZE_INJECTION_KEY,{size:computed(()=>k.value.size||"")}),(e||!globalConfig.value)&&(globalConfig.value=k.value),k},mergeConfig$1=(t,r)=>{var e;const n=[...new Set([...keysOf(t),...keysOf(r)])],g={};for(const y of n)g[y]=(e=r[y])!=null?e:t[y];return g},configProviderProps=buildProps({a11y:{type:Boolean,default:!0},locale:{type:definePropType(Object)},size:useSizeProp,button:{type:definePropType(Object)},experimentalFeatures:{type:definePropType(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:definePropType(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),messageConfig={},ConfigProvider=defineComponent({name:"ElConfigProvider",props:configProviderProps,setup(t,{slots:r}){watch(()=>t.message,n=>{Object.assign(messageConfig,n??{})},{immediate:!0,deep:!0});const e=provideGlobalConfig(t);return()=>renderSlot(r,"default",{config:e==null?void 0:e.value})}}),ElConfigProvider=withInstall(ConfigProvider),affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:t,fixed:r})=>isNumber$1(t)&&isBoolean$1(r),[CHANGE_EVENT]:t=>isBoolean$1(t)};var _export_sfc$1=(t,r)=>{const e=t.__vccOpts||t;for(const[n,g]of r)e[n]=g;return e};const COMPONENT_NAME$b="ElAffix",__default__$Q=defineComponent({name:COMPONENT_NAME$b}),_sfc_main$1j=defineComponent({...__default__$Q,props:affixProps,emits:affixEmits,setup(t,{expose:r,emit:e}){const n=t,g=useNamespace("affix"),y=shallowRef(),i=shallowRef(),k=shallowRef(),{height:L}=useWindowSize(),{height:$,width:V,top:z,bottom:re,update:oe}=useElementBounding(i,{windowScroll:!1}),le=useElementBounding(y),ue=ref(!1),ie=ref(0),ae=ref(0),Fe=computed(()=>({height:ue.value?`${$.value}px`:"",width:ue.value?`${V.value}px`:""})),de=computed(()=>{if(!ue.value)return{};const kt=n.offset?addUnit(n.offset):0;return{height:`${$.value}px`,width:`${V.value}px`,top:n.position==="top"?kt:"",bottom:n.position==="bottom"?kt:"",transform:ae.value?`translateY(${ae.value}px)`:"",zIndex:n.zIndex}}),Ie=()=>{if(k.value)if(ie.value=k.value instanceof Window?document.documentElement.scrollTop:k.value.scrollTop||0,n.position==="top")if(n.target){const kt=le.bottom.value-n.offset-$.value;ue.value=n.offset>z.value&&le.bottom.value>0,ae.value=kt<0?kt:0}else ue.value=n.offset>z.value;else if(n.target){const kt=L.value-le.top.value-n.offset-$.value;ue.value=L.value-n.offset<re.value&&L.value>le.top.value,ae.value=kt<0?-kt:0}else ue.value=L.value-n.offset<re.value},Ve=()=>{oe(),e("scroll",{scrollTop:ie.value,fixed:ue.value})};return watch(ue,kt=>e("change",kt)),onMounted(()=>{var kt;n.target?(y.value=(kt=document.querySelector(n.target))!=null?kt:void 0,y.value||throwError(COMPONENT_NAME$b,`Target is not existed: ${n.target}`)):y.value=document.documentElement,k.value=getScrollContainer(i.value,!0),oe()}),useEventListener(k,"scroll",Ve),watchEffect(Ie),r({update:Ie,updateRoot:oe}),(kt,At)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:i,class:normalizeClass(unref(g).b()),style:normalizeStyle(unref(Fe))},[createBaseVNode("div",{class:normalizeClass({[unref(g).m("fixed")]:ue.value}),style:normalizeStyle(unref(de))},[renderSlot(kt.$slots,"default")],6)],6))}});var Affix=_export_sfc$1(_sfc_main$1j,[["__file","affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$P=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$1i=defineComponent({...__default__$P,props:iconProps,setup(t){const r=t,e=useNamespace("icon"),n=computed(()=>{const{size:g,color:y}=r;return!g&&!y?{}:{fontSize:isUndefined$1(g)?void 0:addUnit(g),"--color":y}});return(g,y)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(e).b(),style:unref(n)},g.$attrs),[renderSlot(g.$slots,"default")],16))}});var Icon=_export_sfc$1(_sfc_main$1i,[["__file","icon.vue"]]);const ElIcon=withInstall(Icon),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(t,r={})=>{const e=ref(void 0),n=r.prop?e:useProp("size"),g=r.global?e:useGlobalSize(),y=r.form?{size:void 0}:inject(formContextKey,void 0),i=r.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>n.value||unref(t)||(i==null?void 0:i.size)||(y==null?void 0:y.size)||g.value||"")},useFormDisabled=t=>{const r=useProp("disabled"),e=inject(formContextKey,void 0);return computed(()=>r.value||unref(t)||(e==null?void 0:e.disabled)||!1)},useFormItem=()=>{const t=inject(formContextKey,void 0),r=inject(formItemContextKey,void 0);return{form:t,formItem:r}},useFormItemInputId=(t,{formItemContext:r,disableIdGeneration:e,disableIdManagement:n})=>{e||(e=ref(!1)),n||(n=ref(!1));const g=ref();let y;const i=computed(()=>{var k;return!!(!t.label&&r&&r.inputIds&&((k=r.inputIds)==null?void 0:k.length)<=1)});return onMounted(()=>{y=watch([toRef(t,"id"),e],([k,L])=>{const $=k??(L?void 0:useId().value);$!==g.value&&(r!=null&&r.removeInputId&&(g.value&&r.removeInputId(g.value),!(n!=null&&n.value)&&!L&&$&&r.addInputId($)),g.value=$)},{immediate:!0})}),onUnmounted(()=>{y&&y(),r!=null&&r.removeInputId&&g.value&&r.removeInputId(g.value)}),{isLabeledByFormItem:i,inputId:g}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(t,r,e)=>(isArray$3(t)||isString$2(t))&&isBoolean$1(r)&&isString$2(e)};function useFormLabelWidth(){const t=ref([]),r=computed(()=>{if(!t.value.length)return"0";const y=Math.max(...t.value);return y?`${y}px`:""});function e(y){const i=t.value.indexOf(y);return i===-1&&r.value,i}function n(y,i){if(y&&i){const k=e(i);t.value.splice(k,1,y)}else y&&t.value.push(y)}function g(y){const i=e(y);i>-1&&t.value.splice(i,1)}return{autoLabelWidth:r,registerLabelWidth:n,deregisterLabelWidth:g}}const filterFields=(t,r)=>{const e=castArray$1(r);return e.length>0?t.filter(n=>n.prop&&e.includes(n.prop)):t},COMPONENT_NAME$a="ElForm",__default__$O=defineComponent({name:COMPONENT_NAME$a}),_sfc_main$1h=defineComponent({...__default__$O,props:formProps,emits:formEmits,setup(t,{expose:r,emit:e}){const n=t,g=[],y=useFormSize(),i=useNamespace("form"),k=computed(()=>{const{labelPosition:de,inline:Ie}=n;return[i.b(),i.m(y.value||"default"),{[i.m(`label-${de}`)]:de,[i.m("inline")]:Ie}]}),L=de=>g.find(Ie=>Ie.prop===de),$=de=>{g.push(de)},V=de=>{de.prop&&g.splice(g.indexOf(de),1)},z=(de=[])=>{n.model&&filterFields(g,de).forEach(Ie=>Ie.resetField())},re=(de=[])=>{filterFields(g,de).forEach(Ie=>Ie.clearValidate())},oe=computed(()=>!!n.model),le=de=>{if(g.length===0)return[];const Ie=filterFields(g,de);return Ie.length?Ie:[]},ue=async de=>ae(void 0,de),ie=async(de=[])=>{if(!oe.value)return!1;const Ie=le(de);if(Ie.length===0)return!0;let Ve={};for(const kt of Ie)try{await kt.validate("")}catch(At){Ve={...Ve,...At}}return Object.keys(Ve).length===0?!0:Promise.reject(Ve)},ae=async(de=[],Ie)=>{const Ve=!isFunction$3(Ie);try{const kt=await ie(de);return kt===!0&&(Ie==null||Ie(kt)),kt}catch(kt){if(kt instanceof Error)throw kt;const At=kt;return n.scrollToError&&Fe(Object.keys(At)[0]),Ie==null||Ie(!1,At),Ve&&Promise.reject(At)}},Fe=de=>{var Ie;const Ve=filterFields(g,de)[0];Ve&&((Ie=Ve.$el)==null||Ie.scrollIntoView(n.scrollIntoViewOptions))};return watch(()=>n.rules,()=>{n.validateOnRuleChange&&ue().catch(de=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(n),emit:e,resetFields:z,clearValidate:re,validateField:ae,getField:L,addField:$,removeField:V,...useFormLabelWidth()})),r({validate:ue,validateField:ae,resetFields:z,clearValidate:re,scrollToField:Fe}),(de,Ie)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(k))},[renderSlot(de.$slots,"default")],2))}});var Form=_export_sfc$1(_sfc_main$1h,[["__file","form.vue"]]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_extends.apply(this,arguments)}function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,g){return n.__proto__=g,n},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(t,r,e){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(g,y,i){var k=[null];k.push.apply(k,y);var L=Function.bind.apply(g,k),$=new L;return i&&_setPrototypeOf($,i.prototype),$},_construct.apply(null,arguments)}function _isNativeFunction(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper(t){var r=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,g)}function g(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return g.prototype=Object.create(n.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(g,n)},_wrapNativeSuper(t)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u"&&process.env;function convertFieldsError(t){if(!t||!t.length)return null;var r={};return t.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function format(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var g=0,y=e.length;if(typeof t=="function")return t.apply(null,e);if(typeof t=="string"){var i=t.replace(formatRegExp,function(k){if(k==="%%")return"%";if(g>=y)return k;switch(k){case"%s":return String(e[g++]);case"%d":return Number(e[g++]);case"%j":try{return JSON.stringify(e[g++])}catch{return"[Circular]"}break;default:return k}});return i}return t}function isNativeStringType(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function isEmptyValue(t,r){return!!(t==null||r==="array"&&Array.isArray(t)&&!t.length||isNativeStringType(r)&&typeof t=="string"&&!t)}function asyncParallelArray(t,r,e){var n=[],g=0,y=t.length;function i(k){n.push.apply(n,k||[]),g++,g===y&&e(n)}t.forEach(function(k){r(k,i)})}function asyncSerialArray(t,r,e){var n=0,g=t.length;function y(i){if(i&&i.length){e(i);return}var k=n;n=n+1,k<g?r(t[k],y):e([])}y([])}function flattenObjArr(t){var r=[];return Object.keys(t).forEach(function(e){r.push.apply(r,t[e]||[])}),r}var AsyncValidationError=function(t){_inheritsLoose(r,t);function r(e,n){var g;return g=t.call(this,"Async Validation Error")||this,g.errors=e,g.fields=n,g}return r}(_wrapNativeSuper(Error));function asyncMap(t,r,e,n,g){if(r.first){var y=new Promise(function(re,oe){var le=function(ae){return n(ae),ae.length?oe(new AsyncValidationError(ae,convertFieldsError(ae))):re(g)},ue=flattenObjArr(t);asyncSerialArray(ue,e,le)});return y.catch(function(re){return re}),y}var i=r.firstFields===!0?Object.keys(t):r.firstFields||[],k=Object.keys(t),L=k.length,$=0,V=[],z=new Promise(function(re,oe){var le=function(ie){if(V.push.apply(V,ie),$++,$===L)return n(V),V.length?oe(new AsyncValidationError(V,convertFieldsError(V))):re(g)};k.length||(n(V),re(g)),k.forEach(function(ue){var ie=t[ue];i.indexOf(ue)!==-1?asyncSerialArray(ie,e,le):asyncParallelArray(ie,e,le)})});return z.catch(function(re){return re}),z}function isErrorObj(t){return!!(t&&t.message!==void 0)}function getValue(t,r){for(var e=t,n=0;n<r.length;n++){if(e==null)return e;e=e[r[n]]}return e}function complementError(t,r){return function(e){var n;return t.fullFields?n=getValue(r,t.fullFields):n=r[e.field||t.fullField],isErrorObj(e)?(e.field=e.field||t.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||t.fullField}}}function deepMerge(t,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];typeof n=="object"&&typeof t[e]=="object"?t[e]=_extends({},t[e],n):t[e]=n}}return t}var required$1=function(r,e,n,g,y,i){r.required&&(!n.hasOwnProperty(r.field)||isEmptyValue(e,i||r.type))&&g.push(format(y.messages.required,r.fullField))},whitespace=function(r,e,n,g,y){(/^\s+$/.test(e)||e==="")&&g.push(format(y.messages.whitespace,r.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var t="[a-fA-F\\d:]",r=function(Ie){return Ie&&Ie.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",g=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+e+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+e+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+e+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+e+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+e+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+e+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+e+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),y=new RegExp("(?:^"+e+"$)|(?:^"+g+"$)"),i=new RegExp("^"+e+"$"),k=new RegExp("^"+g+"$"),L=function(Ie){return Ie&&Ie.exact?y:new RegExp("(?:"+r(Ie)+e+r(Ie)+")|(?:"+r(Ie)+g+r(Ie)+")","g")};L.v4=function(de){return de&&de.exact?i:new RegExp(""+r(de)+e+r(de),"g")},L.v6=function(de){return de&&de.exact?k:new RegExp(""+r(de)+g+r(de),"g")};var $="(?:(?:[a-z]+:)?//)",V="(?:\\S+(?::\\S*)?@)?",z=L.v4().source,re=L.v6().source,oe="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",le="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",ue="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",ie="(?::\\d{2,5})?",ae='(?:[/?#][^\\s"]*)?',Fe="(?:"+$+"|www\\.)"+V+"(?:localhost|"+z+"|"+re+"|"+oe+le+ue+")"+ie+ae;return urlReg=new RegExp("(?:^"+Fe+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(r){return types.number(r)&&parseInt(r,10)===r},float:function(r){return types.number(r)&&!types.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!types.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(pattern$2.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(getUrlRegex())},hex:function(r){return typeof r=="string"&&!!r.match(pattern$2.hex)}},type$1=function(r,e,n,g,y){if(r.required&&e===void 0){required$1(r,e,n,g,y);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],k=r.type;i.indexOf(k)>-1?types[k](e)||g.push(format(y.messages.types[k],r.fullField,r.type)):k&&typeof e!==r.type&&g.push(format(y.messages.types[k],r.fullField,r.type))},range$1=function(r,e,n,g,y){var i=typeof r.len=="number",k=typeof r.min=="number",L=typeof r.max=="number",$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V=e,z=null,re=typeof e=="number",oe=typeof e=="string",le=Array.isArray(e);if(re?z="number":oe?z="string":le&&(z="array"),!z)return!1;le&&(V=e.length),oe&&(V=e.replace($,"_").length),i?V!==r.len&&g.push(format(y.messages[z].len,r.fullField,r.len)):k&&!L&&V<r.min?g.push(format(y.messages[z].min,r.fullField,r.min)):L&&!k&&V>r.max?g.push(format(y.messages[z].max,r.fullField,r.max)):k&&L&&(V<r.min||V>r.max)&&g.push(format(y.messages[z].range,r.fullField,r.min,r.max))},ENUM$1="enum",enumerable$1=function(r,e,n,g,y){r[ENUM$1]=Array.isArray(r[ENUM$1])?r[ENUM$1]:[],r[ENUM$1].indexOf(e)===-1&&g.push(format(y.messages[ENUM$1],r.fullField,r[ENUM$1].join(", ")))},pattern$1=function(r,e,n,g,y){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||g.push(format(y.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var i=new RegExp(r.pattern);i.test(e)||g.push(format(y.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,g,i,y,"string"),isEmptyValue(e,"string")||(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y),rules.pattern(r,e,g,i,y),r.whitespace===!0&&rules.whitespace(r,e,g,i,y))}n(i)},method=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},number=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(e===""&&(e=void 0),isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},_boolean=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},regexp=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),isEmptyValue(e)||rules.type(r,e,g,i,y)}n(i)},integer=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},floatFn=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},array=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(e==null&&!r.required)return n();rules.required(r,e,g,i,y,"array"),e!=null&&(rules.type(r,e,g,i,y),rules.range(r,e,g,i,y))}n(i)},object=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules.type(r,e,g,i,y)}n(i)},ENUM="enum",enumerable=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y),e!==void 0&&rules[ENUM](r,e,g,i,y)}n(i)},pattern=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"string")&&!r.required)return n();rules.required(r,e,g,i,y),isEmptyValue(e,"string")||rules.pattern(r,e,g,i,y)}n(i)},date=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e,"date")&&!r.required)return n();if(rules.required(r,e,g,i,y),!isEmptyValue(e,"date")){var L;e instanceof Date?L=e:L=new Date(e),rules.type(r,L,g,i,y),L&&rules.range(r,L.getTime(),g,i,y)}}n(i)},required=function(r,e,n,g,y){var i=[],k=Array.isArray(e)?"array":typeof e;rules.required(r,e,g,i,y,k),n(i)},type=function(r,e,n,g,y){var i=r.type,k=[],L=r.required||!r.required&&g.hasOwnProperty(r.field);if(L){if(isEmptyValue(e,i)&&!r.required)return n();rules.required(r,e,g,k,y,i),isEmptyValue(e,i)||rules.type(r,e,g,k,y)}n(k)},any=function(r,e,n,g,y){var i=[],k=r.required||!r.required&&g.hasOwnProperty(r.field);if(k){if(isEmptyValue(e)&&!r.required)return n();rules.required(r,e,g,i,y)}n(i)},validators$2={string,method,number,boolean:_boolean,regexp,integer,float:floatFn,array,object,enum:enumerable,pattern,date,url:type,hex:type,email:type,required,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var messages=newMessages(),Schema=function(){function t(e){this.rules=null,this._messages=messages,this.define(e)}var r=t.prototype;return r.define=function(n){var g=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(y){var i=n[y];g.rules[y]=Array.isArray(i)?i:[i]})},r.messages=function(n){return n&&(this._messages=deepMerge(newMessages(),n)),this._messages},r.validate=function(n,g,y){var i=this;g===void 0&&(g={}),y===void 0&&(y=function(){});var k=n,L=g,$=y;if(typeof L=="function"&&($=L,L={}),!this.rules||Object.keys(this.rules).length===0)return $&&$(null,k),Promise.resolve(k);function V(ue){var ie=[],ae={};function Fe(Ie){if(Array.isArray(Ie)){var Ve;ie=(Ve=ie).concat.apply(Ve,Ie)}else ie.push(Ie)}for(var de=0;de<ue.length;de++)Fe(ue[de]);ie.length?(ae=convertFieldsError(ie),$(ie,ae)):$(null,k)}if(L.messages){var z=this.messages();z===messages&&(z=newMessages()),deepMerge(z,L.messages),L.messages=z}else L.messages=this.messages();var re={},oe=L.keys||Object.keys(this.rules);oe.forEach(function(ue){var ie=i.rules[ue],ae=k[ue];ie.forEach(function(Fe){var de=Fe;typeof de.transform=="function"&&(k===n&&(k=_extends({},k)),ae=k[ue]=de.transform(ae)),typeof de=="function"?de={validator:de}:de=_extends({},de),de.validator=i.getValidationMethod(de),de.validator&&(de.field=ue,de.fullField=de.fullField||ue,de.type=i.getType(de),re[ue]=re[ue]||[],re[ue].push({rule:de,value:ae,source:k,field:ue}))})});var le={};return asyncMap(re,L,function(ue,ie){var ae=ue.rule,Fe=(ae.type==="object"||ae.type==="array")&&(typeof ae.fields=="object"||typeof ae.defaultField=="object");Fe=Fe&&(ae.required||!ae.required&&ue.value),ae.field=ue.field;function de(kt,At){return _extends({},At,{fullField:ae.fullField+"."+kt,fullFields:ae.fullFields?[].concat(ae.fullFields,[kt]):[kt]})}function Ie(kt){kt===void 0&&(kt=[]);var At=Array.isArray(kt)?kt:[kt];!L.suppressWarning&&At.length&&t.warning("async-validator:",At),At.length&&ae.message!==void 0&&(At=[].concat(ae.message));var ze=At.map(complementError(ae,k));if(L.first&&ze.length)return le[ae.field]=1,ie(ze);if(!Fe)ie(ze);else{if(ae.required&&!ue.value)return ae.message!==void 0?ze=[].concat(ae.message).map(complementError(ae,k)):L.error&&(ze=[L.error(ae,format(L.messages.required,ae.field))]),ie(ze);var Et={};ae.defaultField&&Object.keys(ue.value).map(function(or){Et[or]=ae.defaultField}),Et=_extends({},Et,ue.rule.fields);var cr={};Object.keys(Et).forEach(function(or){var dr=Et[or],lr=Array.isArray(dr)?dr:[dr];cr[or]=lr.map(de.bind(null,or))});var er=new t(cr);er.messages(L.messages),ue.rule.options&&(ue.rule.options.messages=L.messages,ue.rule.options.error=L.error),er.validate(ue.value,ue.rule.options||L,function(or){var dr=[];ze&&ze.length&&dr.push.apply(dr,ze),or&&or.length&&dr.push.apply(dr,or),ie(dr.length?dr:null)})}}var Ve;if(ae.asyncValidator)Ve=ae.asyncValidator(ae,ue.value,Ie,ue.source,L);else if(ae.validator){try{Ve=ae.validator(ae,ue.value,Ie,ue.source,L)}catch(kt){console.error==null||console.error(kt),L.suppressValidatorError||setTimeout(function(){throw kt},0),Ie(kt.message)}Ve===!0?Ie():Ve===!1?Ie(typeof ae.message=="function"?ae.message(ae.fullField||ae.field):ae.message||(ae.fullField||ae.field)+" fails"):Ve instanceof Array?Ie(Ve):Ve instanceof Error&&Ie(Ve.message)}Ve&&Ve.then&&Ve.then(function(){return Ie()},function(kt){return Ie(kt)})},function(ue){V(ue)},k)},r.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!validators$2.hasOwnProperty(n.type))throw new Error(format("Unknown rule type %s",n.type));return n.type||"string"},r.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var g=Object.keys(n),y=g.indexOf("message");return y!==-1&&g.splice(y,1),g.length===1&&g[0]==="required"?validators$2.required:validators$2[this.getType(n)]||void 0},t}();Schema.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$2[r]=e};Schema.warning=warning;Schema.messages=messages;Schema.validators=validators$2;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$9="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$9,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:r}){const e=inject(formContextKey,void 0),n=inject(formItemContextKey);n||throwError(COMPONENT_NAME$9,"usage: <el-form-item><label-wrap /></el-form-item>");const g=useNamespace("form"),y=ref(),i=ref(0),k=()=>{var V;if((V=y.value)!=null&&V.firstElementChild){const z=window.getComputedStyle(y.value.firstElementChild).width;return Math.ceil(Number.parseFloat(z))}else return 0},L=(V="update")=>{nextTick(()=>{r.default&&t.isAutoWidth&&(V==="update"?i.value=k():V==="remove"&&(e==null||e.deregisterLabelWidth(i.value)))})},$=()=>L("update");return onMounted(()=>{$()}),onBeforeUnmount(()=>{L("remove")}),onUpdated(()=>$()),watch(i,(V,z)=>{t.updateAll&&(e==null||e.registerLabelWidth(V,z))}),useResizeObserver(computed(()=>{var V,z;return(z=(V=y.value)==null?void 0:V.firstElementChild)!=null?z:null}),$),()=>{var V,z;if(!r)return null;const{isAutoWidth:re}=t;if(re){const oe=e==null?void 0:e.autoLabelWidth,le=n==null?void 0:n.hasLabel,ue={};if(le&&oe&&oe!=="auto"){const ie=Math.max(0,Number.parseInt(oe,10)-i.value),ae=e.labelPosition==="left"?"marginRight":"marginLeft";ie&&(ue[ae]=`${ie}px`)}return createVNode("div",{ref:y,class:[g.be("item","label-wrap")],style:ue},[(V=r.default)==null?void 0:V.call(r)])}else return createVNode(Fragment,{ref:y},[(z=r.default)==null?void 0:z.call(r)])}}});const _hoisted_1$G=["role","aria-labelledby"],__default__$N=defineComponent({name:"ElFormItem"}),_sfc_main$1g=defineComponent({...__default__$N,props:formItemProps,setup(t,{expose:r}){const e=t,n=useSlots(),g=inject(formContextKey,void 0),y=inject(formItemContextKey,void 0),i=useFormSize(void 0,{formItem:!1}),k=useNamespace("form-item"),L=useId().value,$=ref([]),V=ref(""),z=refDebounced(V,100),re=ref(""),oe=ref();let le,ue=!1;const ie=computed(()=>{if((g==null?void 0:g.labelPosition)==="top")return{};const Er=addUnit(e.labelWidth||(g==null?void 0:g.labelWidth)||"");return Er?{width:Er}:{}}),ae=computed(()=>{if((g==null?void 0:g.labelPosition)==="top"||g!=null&&g.inline)return{};if(!e.label&&!e.labelWidth&&Et)return{};const Er=addUnit(e.labelWidth||(g==null?void 0:g.labelWidth)||"");return!e.label&&!n.label?{marginLeft:Er}:{}}),Fe=computed(()=>[k.b(),k.m(i.value),k.is("error",V.value==="error"),k.is("validating",V.value==="validating"),k.is("success",V.value==="success"),k.is("required",lr.value||e.required),k.is("no-asterisk",g==null?void 0:g.hideRequiredAsterisk),(g==null?void 0:g.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[k.m("feedback")]:g==null?void 0:g.statusIcon}]),de=computed(()=>isBoolean$1(e.inlineMessage)?e.inlineMessage:(g==null?void 0:g.inlineMessage)||!1),Ie=computed(()=>[k.e("error"),{[k.em("error","inline")]:de.value}]),Ve=computed(()=>e.prop?isString$2(e.prop)?e.prop:e.prop.join("."):""),kt=computed(()=>!!(e.label||n.label)),At=computed(()=>e.for||($.value.length===1?$.value[0]:void 0)),ze=computed(()=>!At.value&&kt.value),Et=!!y,cr=computed(()=>{const Er=g==null?void 0:g.model;if(!(!Er||!e.prop))return getProp(Er,e.prop).value}),er=computed(()=>{const{required:Er}=e,sr=[];e.rules&&sr.push(...castArray$1(e.rules));const xr=g==null?void 0:g.rules;if(xr&&e.prop){const Nr=getProp(xr,e.prop).value;Nr&&sr.push(...castArray$1(Nr))}if(Er!==void 0){const Nr=sr.map((Mr,br)=>[Mr,br]).filter(([Mr])=>Object.keys(Mr).includes("required"));if(Nr.length>0)for(const[Mr,br]of Nr)Mr.required!==Er&&(sr[br]={...Mr,required:Er});else sr.push({required:Er})}return sr}),or=computed(()=>er.value.length>0),dr=Er=>er.value.filter(xr=>!xr.trigger||!Er?!0:Array.isArray(xr.trigger)?xr.trigger.includes(Er):xr.trigger===Er).map(({trigger:xr,...Nr})=>Nr),lr=computed(()=>er.value.some(Er=>Er.required)),nr=computed(()=>{var Er;return z.value==="error"&&e.showMessage&&((Er=g==null?void 0:g.showMessage)!=null?Er:!0)}),ur=computed(()=>`${e.label||""}${(g==null?void 0:g.labelSuffix)||""}`),ar=Er=>{V.value=Er},gr=Er=>{var sr,xr;const{errors:Nr,fields:Mr}=Er;(!Nr||!Mr)&&console.error(Er),ar("error"),re.value=Nr?(xr=(sr=Nr==null?void 0:Nr[0])==null?void 0:sr.message)!=null?xr:`${e.prop} is required`:"",g==null||g.emit("validate",e.prop,!1,re.value)},pr=()=>{ar("success"),g==null||g.emit("validate",e.prop,!0,"")},hr=async Er=>{const sr=Ve.value;return new Schema({[sr]:Er}).validate({[sr]:cr.value},{firstFields:!0}).then(()=>(pr(),!0)).catch(Nr=>(gr(Nr),Promise.reject(Nr)))},Cr=async(Er,sr)=>{if(ue||!e.prop)return!1;const xr=isFunction$3(sr);if(!or.value)return sr==null||sr(!1),!1;const Nr=dr(Er);return Nr.length===0?(sr==null||sr(!0),!0):(ar("validating"),hr(Nr).then(()=>(sr==null||sr(!0),!0)).catch(Mr=>{const{fields:br}=Mr;return sr==null||sr(!1,br),xr?!1:Promise.reject(br)}))},wr=()=>{ar(""),re.value="",ue=!1},Sr=async()=>{const Er=g==null?void 0:g.model;if(!Er||!e.prop)return;const sr=getProp(Er,e.prop);ue=!0,sr.value=clone(le),await nextTick(),wr(),ue=!1},mr=Er=>{$.value.includes(Er)||$.value.push(Er)},_r=Er=>{$.value=$.value.filter(sr=>sr!==Er)};watch(()=>e.error,Er=>{re.value=Er||"",ar(Er?"error":"")},{immediate:!0}),watch(()=>e.validateStatus,Er=>ar(Er||""));const Ar=reactive({...toRefs(e),$el:oe,size:i,validateState:V,labelId:L,inputIds:$,isGroup:ze,hasLabel:kt,fieldValue:cr,addInputId:mr,removeInputId:_r,resetField:Sr,clearValidate:wr,validate:Cr});return provide(formItemContextKey,Ar),onMounted(()=>{e.prop&&(g==null||g.addField(Ar),le=clone(cr.value))}),onBeforeUnmount(()=>{g==null||g.removeField(Ar)}),r({size:i,validateMessage:re,validateState:V,validate:Cr,clearValidate:wr,resetField:Sr}),(Er,sr)=>{var xr;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:oe,class:normalizeClass(unref(Fe)),role:unref(ze)?"group":void 0,"aria-labelledby":unref(ze)?unref(L):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(ie).width==="auto","update-all":((xr=unref(g))==null?void 0:xr.labelWidth)==="auto"},{default:withCtx(()=>[unref(kt)?(openBlock(),createBlock(resolveDynamicComponent(unref(At)?"label":"div"),{key:0,id:unref(L),for:unref(At),class:normalizeClass(unref(k).e("label")),style:normalizeStyle(unref(ie))},{default:withCtx(()=>[renderSlot(Er.$slots,"label",{label:unref(ur)},()=>[createTextVNode(toDisplayString(unref(ur)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(k).e("content")),style:normalizeStyle(unref(ae))},[renderSlot(Er.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(k).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(nr)?renderSlot(Er.$slots,"error",{key:0,error:re.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(Ie))},toDisplayString(re.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$G)}}});var FormItem=_export_sfc$1(_sfc_main$1g,[["__file","form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(t){const r=window.getComputedStyle(t),e=r.getPropertyValue("box-sizing"),n=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),g=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map(i=>`${i}:${r.getPropertyValue(i)}`).join(";"),paddingSize:n,borderSize:g,boxSizing:e}}function calcTextareaHeight(t,r=1,e){var n;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:g,borderSize:y,boxSizing:i,contextStyle:k}=calculateNodeStyling(t);hiddenTextarea.setAttribute("style",`${k};${HIDDEN_STYLE}`),hiddenTextarea.value=t.value||t.placeholder||"";let L=hiddenTextarea.scrollHeight;const $={};i==="border-box"?L=L+y:i==="content-box"&&(L=L-g),hiddenTextarea.value="";const V=hiddenTextarea.scrollHeight-g;if(isNumber$1(r)){let z=V*r;i==="border-box"&&(z=z+g+y),L=Math.max(z,L),$.minHeight=`${z}px`}if(isNumber$1(e)){let z=V*e;i==="border-box"&&(z=z+g+y),L=Math.min(z,L)}return $.height=`${L}px`,(n=hiddenTextarea.parentNode)==null||n.removeChild(hiddenTextarea),hiddenTextarea=void 0,$}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})},autofocus:{type:Boolean,default:!1}}),inputEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t),input:t=>isString$2(t),change:t=>isString$2(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},_hoisted_1$F=["role"],_hoisted_2$p=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],_hoisted_3$d=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],__default__$M=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$1f=defineComponent({...__default__$M,props:inputProps,emits:inputEmits,setup(t,{expose:r,emit:e}){const n=t,g=useAttrs$1(),y=useSlots(),i=computed(()=>{const Zr={};return n.containerRole==="combobox"&&(Zr["aria-haspopup"]=g["aria-haspopup"],Zr["aria-owns"]=g["aria-owns"],Zr["aria-expanded"]=g["aria-expanded"]),Zr}),k=computed(()=>[n.type==="textarea"?ie.b():ue.b(),ue.m(oe.value),ue.is("disabled",le.value),ue.is("exceed",mr.value),{[ue.b("group")]:y.prepend||y.append,[ue.bm("group","append")]:y.append,[ue.bm("group","prepend")]:y.prepend,[ue.m("prefix")]:y.prefix||n.prefixIcon,[ue.m("suffix")]:y.suffix||n.suffixIcon||n.clearable||n.showPassword,[ue.bm("suffix","password-clear")]:hr.value&&Cr.value},g.class]),L=computed(()=>[ue.e("wrapper"),ue.is("focus",cr.value)]),$=useAttrs({excludeKeys:computed(()=>Object.keys(i.value))}),{form:V,formItem:z}=useFormItem(),{inputId:re}=useFormItemInputId(n,{formItemContext:z}),oe=useFormSize(),le=useFormDisabled(),ue=useNamespace("input"),ie=useNamespace("textarea"),ae=shallowRef(),Fe=shallowRef(),de=ref(!1),Ie=ref(!1),Ve=ref(!1),kt=ref(),At=shallowRef(n.inputStyle),ze=computed(()=>ae.value||Fe.value),{wrapperRef:Et,isFocused:cr,handleFocus:er,handleBlur:or}=useFocusController(ze,{afterBlur(){var Zr;n.validateEvent&&((Zr=z==null?void 0:z.validate)==null||Zr.call(z,"blur").catch(Nn=>void 0))}}),dr=computed(()=>{var Zr;return(Zr=V==null?void 0:V.statusIcon)!=null?Zr:!1}),lr=computed(()=>(z==null?void 0:z.validateState)||""),nr=computed(()=>lr.value&&ValidateComponentsMap[lr.value]),ur=computed(()=>Ve.value?view_default:hide_default),ar=computed(()=>[g.style]),gr=computed(()=>[n.inputStyle,At.value,{resize:n.resize}]),pr=computed(()=>isNil(n.modelValue)?"":String(n.modelValue)),hr=computed(()=>n.clearable&&!le.value&&!n.readonly&&!!pr.value&&(cr.value||de.value)),Cr=computed(()=>n.showPassword&&!le.value&&!n.readonly&&!!pr.value&&(!!pr.value||cr.value)),wr=computed(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!le.value&&!n.readonly&&!n.showPassword),Sr=computed(()=>pr.value.length),mr=computed(()=>!!wr.value&&Sr.value>Number(n.maxlength)),_r=computed(()=>!!y.suffix||!!n.suffixIcon||hr.value||n.showPassword||wr.value||!!lr.value&&dr.value),[Ar,Er]=useCursor(ae);useResizeObserver(Fe,Zr=>{if(Nr(),!wr.value||n.resize!=="both")return;const Nn=Zr[0],{width:Jr}=Nn.contentRect;kt.value={right:`calc(100% - ${Jr+15+6}px)`}});const sr=()=>{const{type:Zr,autosize:Nn}=n;if(!(!isClient||Zr!=="textarea"||!Fe.value))if(Nn){const Jr=isObject$2(Nn)?Nn.minRows:void 0,wn=isObject$2(Nn)?Nn.maxRows:void 0,Un=calcTextareaHeight(Fe.value,Jr,wn);At.value={overflowY:"hidden",...Un},nextTick(()=>{Fe.value.offsetHeight,At.value=Un})}else At.value={minHeight:calcTextareaHeight(Fe.value).minHeight}},Nr=(Zr=>{let Nn=!1;return()=>{var Jr;if(Nn||!n.autosize)return;((Jr=Fe.value)==null?void 0:Jr.offsetParent)===null||(Zr(),Nn=!0)}})(sr),Mr=()=>{const Zr=ze.value,Nn=n.formatter?n.formatter(pr.value):pr.value;!Zr||Zr.value===Nn||(Zr.value=Nn)},br=async Zr=>{Ar();let{value:Nn}=Zr.target;if(n.formatter&&(Nn=n.parser?n.parser(Nn):Nn),!Ie.value){if(Nn===pr.value){Mr();return}e(UPDATE_MODEL_EVENT,Nn),e("input",Nn),await nextTick(),Mr(),Er()}},yr=Zr=>{e("change",Zr.target.value)},Tr=Zr=>{e("compositionstart",Zr),Ie.value=!0},Br=Zr=>{var Nn;e("compositionupdate",Zr);const Jr=(Nn=Zr.target)==null?void 0:Nn.value,wn=Jr[Jr.length-1]||"";Ie.value=!isKorean(wn)},Lr=Zr=>{e("compositionend",Zr),Ie.value&&(Ie.value=!1,br(Zr))},Fr=()=>{Ve.value=!Ve.value,qr()},qr=async()=>{var Zr;await nextTick(),(Zr=ze.value)==null||Zr.focus()},Vr=()=>{var Zr;return(Zr=ze.value)==null?void 0:Zr.blur()},Qr=Zr=>{de.value=!1,e("mouseleave",Zr)},Tn=Zr=>{de.value=!0,e("mouseenter",Zr)},xn=Zr=>{e("keydown",Zr)},Xr=()=>{var Zr;(Zr=ze.value)==null||Zr.select()},Vn=()=>{e(UPDATE_MODEL_EVENT,""),e("change",""),e("clear"),e("input","")};return watch(()=>n.modelValue,()=>{var Zr;nextTick(()=>sr()),n.validateEvent&&((Zr=z==null?void 0:z.validate)==null||Zr.call(z,"change").catch(Nn=>void 0))}),watch(pr,()=>Mr()),watch(()=>n.type,async()=>{await nextTick(),Mr(),sr()}),onMounted(()=>{!n.formatter&&n.parser,Mr(),nextTick(sr)}),r({input:ae,textarea:Fe,ref:ze,textareaStyle:gr,autosize:toRef(n,"autosize"),focus:qr,blur:Vr,select:Xr,clear:Vn,resizeTextarea:sr}),(Zr,Nn)=>withDirectives((openBlock(),createElementBlock("div",mergeProps(unref(i),{class:unref(k),style:unref(ar),role:Zr.containerRole,onMouseenter:Tn,onMouseleave:Qr}),[createCommentVNode(" input "),Zr.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),Zr.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).be("group","prepend"))},[renderSlot(Zr.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:Et,class:normalizeClass(unref(L))},[createCommentVNode(" prefix slot "),Zr.$slots.prefix||Zr.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(ue).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(ue).e("prefix-inner"))},[renderSlot(Zr.$slots,"prefix"),Zr.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ue).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Zr.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(re),ref_key:"input",ref:ae,class:unref(ue).e("inner")},unref($),{minlength:Zr.minlength,maxlength:Zr.maxlength,type:Zr.showPassword?Ve.value?"text":"password":Zr.type,disabled:unref(le),readonly:Zr.readonly,autocomplete:Zr.autocomplete,tabindex:Zr.tabindex,"aria-label":Zr.label,placeholder:Zr.placeholder,style:Zr.inputStyle,form:Zr.form,autofocus:Zr.autofocus,onCompositionstart:Tr,onCompositionupdate:Br,onCompositionend:Lr,onInput:br,onFocus:Nn[0]||(Nn[0]=(...Jr)=>unref(er)&&unref(er)(...Jr)),onBlur:Nn[1]||(Nn[1]=(...Jr)=>unref(or)&&unref(or)(...Jr)),onChange:yr,onKeydown:xn}),null,16,_hoisted_2$p),createCommentVNode(" suffix slot "),unref(_r)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(ue).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(ue).e("suffix-inner"))},[!unref(hr)||!unref(Cr)||!unref(wr)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(Zr.$slots,"suffix"),Zr.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ue).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Zr.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(hr)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(ue).e("icon"),unref(ue).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:Vn},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(Cr)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(ue).e("icon"),unref(ue).e("password")]),onClick:Fr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ur))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(wr)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(ue).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(ue).e("count-inner"))},toDisplayString(unref(Sr))+" / "+toDisplayString(Zr.maxlength),3)],2)):createCommentVNode("v-if",!0),unref(lr)&&unref(nr)&&unref(dr)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(ue).e("icon"),unref(ue).e("validateIcon"),unref(ue).is("loading",unref(lr)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(nr))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),Zr.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(ue).be("group","append"))},[renderSlot(Zr.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(re),ref_key:"textarea",ref:Fe,class:unref(ie).e("inner")},unref($),{minlength:Zr.minlength,maxlength:Zr.maxlength,tabindex:Zr.tabindex,disabled:unref(le),readonly:Zr.readonly,autocomplete:Zr.autocomplete,style:unref(gr),"aria-label":Zr.label,placeholder:Zr.placeholder,form:Zr.form,autofocus:Zr.autofocus,onCompositionstart:Tr,onCompositionupdate:Br,onCompositionend:Lr,onInput:br,onFocus:Nn[2]||(Nn[2]=(...Jr)=>unref(er)&&unref(er)(...Jr)),onBlur:Nn[3]||(Nn[3]=(...Jr)=>unref(or)&&unref(or)(...Jr)),onChange:yr,onKeydown:xn}),null,16,_hoisted_3$d),unref(wr)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(kt.value),class:normalizeClass(unref(ue).e("count"))},toDisplayString(unref(Sr))+" / "+toDisplayString(Zr.maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$F)),[[vShow,Zr.type!=="hidden"]])}});var Input=_export_sfc$1(_sfc_main$1f,[["__file","input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle=({move:t,size:r,bar:e})=>({[e.size]:r,transform:`translate${e.axis}(${t}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$8="Thumb",_sfc_main$1e=defineComponent({__name:"thumb",props:thumbProps,setup(t){const r=t,e=inject(scrollbarContextKey),n=useNamespace("scrollbar");e||throwError(COMPONENT_NAME$8,"can not inject scrollbar context");const g=ref(),y=ref(),i=ref({}),k=ref(!1);let L=!1,$=!1,V=isClient?document.onselectstart:null;const z=computed(()=>BAR_MAP[r.vertical?"vertical":"horizontal"]),re=computed(()=>renderThumbStyle({size:r.size,move:r.move,bar:z.value})),oe=computed(()=>g.value[z.value.offset]**2/e.wrapElement[z.value.scrollSize]/r.ratio/y.value[z.value.offset]),le=kt=>{var At;if(kt.stopPropagation(),kt.ctrlKey||[1,2].includes(kt.button))return;(At=window.getSelection())==null||At.removeAllRanges(),ie(kt);const ze=kt.currentTarget;ze&&(i.value[z.value.axis]=ze[z.value.offset]-(kt[z.value.client]-ze.getBoundingClientRect()[z.value.direction]))},ue=kt=>{if(!y.value||!g.value||!e.wrapElement)return;const At=Math.abs(kt.target.getBoundingClientRect()[z.value.direction]-kt[z.value.client]),ze=y.value[z.value.offset]/2,Et=(At-ze)*100*oe.value/g.value[z.value.offset];e.wrapElement[z.value.scroll]=Et*e.wrapElement[z.value.scrollSize]/100},ie=kt=>{kt.stopImmediatePropagation(),L=!0,document.addEventListener("mousemove",ae),document.addEventListener("mouseup",Fe),V=document.onselectstart,document.onselectstart=()=>!1},ae=kt=>{if(!g.value||!y.value||L===!1)return;const At=i.value[z.value.axis];if(!At)return;const ze=(g.value.getBoundingClientRect()[z.value.direction]-kt[z.value.client])*-1,Et=y.value[z.value.offset]-At,cr=(ze-Et)*100*oe.value/g.value[z.value.offset];e.wrapElement[z.value.scroll]=cr*e.wrapElement[z.value.scrollSize]/100},Fe=()=>{L=!1,i.value[z.value.axis]=0,document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",Fe),Ve(),$&&(k.value=!1)},de=()=>{$=!1,k.value=!!r.size},Ie=()=>{$=!0,k.value=L};onBeforeUnmount(()=>{Ve(),document.removeEventListener("mouseup",Fe)});const Ve=()=>{document.onselectstart!==V&&(document.onselectstart=V)};return useEventListener(toRef(e,"scrollbarElement"),"mousemove",de),useEventListener(toRef(e,"scrollbarElement"),"mouseleave",Ie),(kt,At)=>(openBlock(),createBlock(Transition,{name:unref(n).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:g,class:normalizeClass([unref(n).e("bar"),unref(n).is(unref(z).key)]),onMousedown:ue},[createBaseVNode("div",{ref_key:"thumb",ref:y,class:normalizeClass(unref(n).e("thumb")),style:normalizeStyle(unref(re)),onMousedown:le},null,38)],34),[[vShow,kt.always||k.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc$1(_sfc_main$1e,[["__file","thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),_sfc_main$1d=defineComponent({__name:"bar",props:barProps,setup(t,{expose:r}){const e=t,n=inject(scrollbarContextKey),g=ref(0),y=ref(0),i=ref(""),k=ref(""),L=ref(1),$=ref(1);return r({handleScroll:re=>{if(re){const oe=re.offsetHeight-GAP,le=re.offsetWidth-GAP;y.value=re.scrollTop*100/oe*L.value,g.value=re.scrollLeft*100/le*$.value}},update:()=>{const re=n==null?void 0:n.wrapElement;if(!re)return;const oe=re.offsetHeight-GAP,le=re.offsetWidth-GAP,ue=oe**2/re.scrollHeight,ie=le**2/re.scrollWidth,ae=Math.max(ue,e.minSize),Fe=Math.max(ie,e.minSize);L.value=ue/(oe-ue)/(ae/(oe-ae)),$.value=ie/(le-ie)/(Fe/(le-Fe)),k.value=ae+GAP<oe?`${ae}px`:"",i.value=Fe+GAP<le?`${Fe}px`:""}}),(re,oe)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:g.value,ratio:$.value,size:i.value,always:re.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:y.value,ratio:L.value,size:k.value,vertical:"",always:re.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc$1(_sfc_main$1d,[["__file","bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),scrollbarEmits={scroll:({scrollTop:t,scrollLeft:r})=>[t,r].every(isNumber$1)},COMPONENT_NAME$7="ElScrollbar",__default__$L=defineComponent({name:COMPONENT_NAME$7}),_sfc_main$1c=defineComponent({...__default__$L,props:scrollbarProps,emits:scrollbarEmits,setup(t,{expose:r,emit:e}){const n=t,g=useNamespace("scrollbar");let y,i;const k=ref(),L=ref(),$=ref(),V=ref(),z=computed(()=>{const de={};return n.height&&(de.height=addUnit(n.height)),n.maxHeight&&(de.maxHeight=addUnit(n.maxHeight)),[n.wrapStyle,de]}),re=computed(()=>[n.wrapClass,g.e("wrap"),{[g.em("wrap","hidden-default")]:!n.native}]),oe=computed(()=>[g.e("view"),n.viewClass]),le=()=>{var de;L.value&&((de=V.value)==null||de.handleScroll(L.value),e("scroll",{scrollTop:L.value.scrollTop,scrollLeft:L.value.scrollLeft}))};function ue(de,Ie){isObject$2(de)?L.value.scrollTo(de):isNumber$1(de)&&isNumber$1(Ie)&&L.value.scrollTo(de,Ie)}const ie=de=>{isNumber$1(de)&&(L.value.scrollTop=de)},ae=de=>{isNumber$1(de)&&(L.value.scrollLeft=de)},Fe=()=>{var de;(de=V.value)==null||de.update()};return watch(()=>n.noresize,de=>{de?(y==null||y(),i==null||i()):({stop:y}=useResizeObserver($,Fe),i=useEventListener("resize",Fe))},{immediate:!0}),watch(()=>[n.maxHeight,n.height],()=>{n.native||nextTick(()=>{var de;Fe(),L.value&&((de=V.value)==null||de.handleScroll(L.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:k,wrapElement:L})),onMounted(()=>{n.native||nextTick(()=>{Fe()})}),onUpdated(()=>Fe()),r({wrapRef:L,update:Fe,scrollTo:ue,setScrollTop:ie,setScrollLeft:ae,handleScroll:le}),(de,Ie)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:k,class:normalizeClass(unref(g).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:L,class:normalizeClass(unref(re)),style:normalizeStyle(unref(z)),onScroll:le},[(openBlock(),createBlock(resolveDynamicComponent(de.tag),{id:de.id,ref_key:"resizeRef",ref:$,class:normalizeClass(unref(oe)),style:normalizeStyle(de.viewStyle),role:de.role,"aria-label":de.ariaLabel,"aria-orientation":de.ariaOrientation},{default:withCtx(()=>[renderSlot(de.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),de.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:V,always:de.always,"min-size":de.minSize},null,8,["always","min-size"]))],2))}});var Scrollbar=_export_sfc$1(_sfc_main$1c,[["__file","scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$K=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$1b=defineComponent({...__default__$K,props:popperProps,setup(t,{expose:r}){const e=t,n=ref(),g=ref(),y=ref(),i=ref(),k=computed(()=>e.role),L={triggerRef:n,popperInstanceRef:g,contentRef:y,referenceRef:i,role:k};return r(L),provide(POPPER_INJECTION_KEY,L),($,V)=>renderSlot($.$slots,"default")}});var Popper=_export_sfc$1(_sfc_main$1b,[["__file","popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$J=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$1a=defineComponent({...__default__$J,props:popperArrowProps,setup(t,{expose:r}){const e=t,n=useNamespace("popper"),{arrowOffset:g,arrowRef:y,arrowStyle:i}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>e.arrowOffset,k=>{g.value=k}),onBeforeUnmount(()=>{y.value=void 0}),r({arrowRef:y}),(k,L)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:y,class:normalizeClass(unref(n).e("arrow")),style:normalizeStyle(unref(i)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc$1(_sfc_main$1a,[["__file","arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(t,{slots:r,attrs:e}){var n;const g=inject(FORWARD_REF_INJECTION_KEY),y=useForwardRefDirective((n=g==null?void 0:g.setForwardRef)!=null?n:NOOP);return()=>{var i;const k=(i=r.default)==null?void 0:i.call(r,e);if(!k||k.length>1)return null;const L=findFirstLegitChild(k);return L?withDirectives(cloneVNode(L,e),[[y]]):null}}});function findFirstLegitChild(t){if(!t)return null;const r=t;for(const e of r){if(isObject$2(e))switch(e.type){case Comment:continue;case Text:case"svg":return wrapTextContent(e);case Fragment:return findFirstLegitChild(e.children);default:return e}return wrapTextContent(e)}return null}function wrapTextContent(t){const r=useNamespace("only-child");return createVNode("span",{class:r.e("content")},[t])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$I=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$19=defineComponent({...__default__$I,props:popperTriggerProps,setup(t,{expose:r}){const e=t,{role:n,triggerRef:g}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(g);const y=computed(()=>k.value?e.id:void 0),i=computed(()=>{if(n&&n.value==="tooltip")return e.open&&e.id?e.id:void 0}),k=computed(()=>{if(n&&n.value!=="tooltip")return n.value}),L=computed(()=>k.value?`${e.open}`:void 0);let $;return onMounted(()=>{watch(()=>e.virtualRef,V=>{V&&(g.value=unrefElement(V))},{immediate:!0}),watch(g,(V,z)=>{$==null||$(),$=void 0,isElement(V)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(re=>{var oe;const le=e[re];le&&(V.addEventListener(re.slice(2).toLowerCase(),le),(oe=z==null?void 0:z.removeEventListener)==null||oe.call(z,re.slice(2).toLowerCase(),le))}),$=watch([y,i,k,L],re=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((oe,le)=>{isNil(re[le])?V.removeAttribute(oe):V.setAttribute(oe,re[le])})},{immediate:!0})),isElement(z)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(re=>z.removeAttribute(re))},{immediate:!0})}),onBeforeUnmount(()=>{$==null||$(),$=void 0}),r({triggerRef:g}),(V,z)=>V.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},V.$attrs,{"aria-controls":unref(y),"aria-describedby":unref(i),"aria-expanded":unref(L),"aria-haspopup":unref(k)}),{default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc$1(_sfc_main$19,[["__file","trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=t=>{const r=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const g=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||g?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)r.push(e.currentNode);return r},getVisibleElement=(t,r)=>{for(const e of t)if(!isHidden(e,r))return e},isHidden=(t,r)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},getEdges=t=>{const r=obtainAllFocusableElements(t),e=getVisibleElement(r,t),n=getVisibleElement(r.reverse(),t);return[e,n]},isSelectable=t=>t instanceof HTMLInputElement&&"select"in t,tryFocus=(t,r)=>{if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),t!==e&&isSelectable(t)&&r&&t.select()}};function removeFromStack(t,r){const e=[...t],n=t.indexOf(r);return n!==-1&&e.splice(n,1),e}const createFocusableStack=()=>{let t=[];return{push:n=>{const g=t[0];g&&n!==g&&g.pause(),t=removeFromStack(t,n),t.unshift(n)},remove:n=>{var g,y;t=removeFromStack(t,n),(y=(g=t[0])==null?void 0:g.resume)==null||y.call(g)}}},focusFirstDescendant=(t,r=!1)=>{const e=document.activeElement;for(const n of t)if(tryFocus(n,r),document.activeElement!==e)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=t=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:t}),_sfc_main$18=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:r}){const e=ref();let n,g;const{focusReason:y}=useFocusReason();useEscapeKeydown(le=>{t.trapped&&!i.paused&&r("release-requested",le)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},k=le=>{if(!t.loop&&!t.trapped||i.paused)return;const{key:ue,altKey:ie,ctrlKey:ae,metaKey:Fe,currentTarget:de,shiftKey:Ie}=le,{loop:Ve}=t,kt=ue===EVENT_CODE.tab&&!ie&&!ae&&!Fe,At=document.activeElement;if(kt&&At){const ze=de,[Et,cr]=getEdges(ze);if(Et&&cr){if(!Ie&&At===cr){const or=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",or),or.defaultPrevented||(le.preventDefault(),Ve&&tryFocus(Et,!0))}else if(Ie&&[Et,ze].includes(At)){const or=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",or),or.defaultPrevented||(le.preventDefault(),Ve&&tryFocus(cr,!0))}}else if(At===ze){const or=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",or),or.defaultPrevented||le.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:e,onKeydown:k}),watch(()=>t.focusTrapEl,le=>{le&&(e.value=le)},{immediate:!0}),watch([e],([le],[ue])=>{le&&(le.addEventListener("keydown",k),le.addEventListener("focusin",V),le.addEventListener("focusout",z)),ue&&(ue.removeEventListener("keydown",k),ue.removeEventListener("focusin",V),ue.removeEventListener("focusout",z))});const L=le=>{r(ON_TRAP_FOCUS_EVT,le)},$=le=>r(ON_RELEASE_FOCUS_EVT,le),V=le=>{const ue=unref(e);if(!ue)return;const ie=le.target,ae=le.relatedTarget,Fe=ie&&ue.contains(ie);t.trapped||ae&&ue.contains(ae)||(n=ae),Fe&&r("focusin",le),!i.paused&&t.trapped&&(Fe?g=ie:tryFocus(g,!0))},z=le=>{const ue=unref(e);if(!(i.paused||!ue))if(t.trapped){const ie=le.relatedTarget;!isNil(ie)&&!ue.contains(ie)&&setTimeout(()=>{if(!i.paused&&t.trapped){const ae=createFocusOutPreventedEvent({focusReason:y.value});r("focusout-prevented",ae),ae.defaultPrevented||tryFocus(g,!0)}},0)}else{const ie=le.target;ie&&ue.contains(ie)||r("focusout",le)}};async function re(){await nextTick();const le=unref(e);if(le){focusableStack.push(i);const ue=le.contains(document.activeElement)?n:document.activeElement;if(n=ue,!le.contains(ue)){const ae=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);le.addEventListener(FOCUS_AFTER_TRAPPED,L),le.dispatchEvent(ae),ae.defaultPrevented||nextTick(()=>{let Fe=t.focusStartEl;isString$2(Fe)||(tryFocus(Fe),document.activeElement!==Fe&&(Fe="first")),Fe==="first"&&focusFirstDescendant(obtainAllFocusableElements(le),!0),(document.activeElement===ue||Fe==="container")&&tryFocus(le)})}}}function oe(){const le=unref(e);if(le){le.removeEventListener(FOCUS_AFTER_TRAPPED,L);const ue=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:y.value}});le.addEventListener(FOCUS_AFTER_RELEASED,$),le.dispatchEvent(ue),!ue.defaultPrevented&&(y.value=="keyboard"||!isFocusCausedByUserEvent()||le.contains(document.activeElement))&&tryFocus(n??document.body),le.removeEventListener(FOCUS_AFTER_RELEASED,$),focusableStack.remove(i)}}return onMounted(()=>{t.trapped&&re(),watch(()=>t.trapped,le=>{le?re():oe()})}),onBeforeUnmount(()=>{t.trapped&&oe()}),{onKeydown:k}}});function _sfc_render$d(t,r,e,n,g,y){return renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var ElFocusTrap=_export_sfc$1(_sfc_main$18,[["render",_sfc_render$d],["__file","focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),popperContentEmits={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(t,r=[])=>{const{placement:e,strategy:n,popperOptions:g}=t,y={placement:e,strategy:n,...g,modifiers:[...genModifiers(t),...r]};return deriveExtraModifiers(y,g==null?void 0:g.modifiers),y},unwrapMeasurableEl=t=>{if(isClient)return unrefElement(t)};function genModifiers(t){const{offset:r,gpuAcceleration:e,fallbackPlacements:n}=t;return[{name:"offset",options:{offset:[0,r??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function deriveExtraModifiers(t,r){r&&(t.modifiers=[...t.modifiers,...r??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=t=>{const{popperInstanceRef:r,contentRef:e,triggerRef:n,role:g}=inject(POPPER_INJECTION_KEY,void 0),y=ref(),i=ref(),k=computed(()=>({name:"eventListeners",enabled:!!t.visible})),L=computed(()=>{var ae;const Fe=unref(y),de=(ae=unref(i))!=null?ae:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$2(Fe),options:{element:Fe,padding:de}}}),$=computed(()=>({onFirstUpdate:()=>{le()},...buildPopperOptions(t,[unref(L),unref(k)])})),V=computed(()=>unwrapMeasurableEl(t.referenceEl)||unref(n)),{attributes:z,state:re,styles:oe,update:le,forceUpdate:ue,instanceRef:ie}=usePopper(V,e,$);return watch(ie,ae=>r.value=ae),onMounted(()=>{watch(()=>{var ae;return(ae=unref(V))==null?void 0:ae.getBoundingClientRect()},()=>{le()})}),{attributes:z,arrowRef:y,contentRef:e,instanceRef:ie,state:re,styles:oe,role:g,forceUpdate:ue,update:le}},usePopperContentDOM=(t,{attributes:r,styles:e,role:n})=>{const{nextZIndex:g}=useZIndex(),y=useNamespace("popper"),i=computed(()=>unref(r).popper),k=ref(isNumber$1(t.zIndex)?t.zIndex:g()),L=computed(()=>[y.b(),y.is("pure",t.pure),y.is(t.effect),t.popperClass]),$=computed(()=>[{zIndex:unref(k)},unref(e).popper,t.popperStyle||{}]),V=computed(()=>n.value==="dialog"?"false":void 0),z=computed(()=>unref(e).arrow||{});return{ariaModal:V,arrowStyle:z,contentAttrs:i,contentClass:L,contentStyle:$,contentZIndex:k,updateZIndex:()=>{k.value=isNumber$1(t.zIndex)?t.zIndex:g()}}},usePopperContentFocusTrap=(t,r)=>{const e=ref(!1),n=ref();return{focusStartRef:n,trapped:e,onFocusAfterReleased:$=>{var V;((V=$.detail)==null?void 0:V.focusReason)!=="pointer"&&(n.value="first",r("blur"))},onFocusAfterTrapped:()=>{r("focus")},onFocusInTrap:$=>{t.visible&&!e.value&&($.target&&(n.value=$.target),e.value=!0)},onFocusoutPrevented:$=>{t.trapping||($.detail.focusReason==="pointer"&&$.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,r("close")}}},__default__$H=defineComponent({name:"ElPopperContent"}),_sfc_main$17=defineComponent({...__default__$H,props:popperContentProps,emits:popperContentEmits,setup(t,{expose:r,emit:e}){const n=t,{focusStartRef:g,trapped:y,onFocusAfterReleased:i,onFocusAfterTrapped:k,onFocusInTrap:L,onFocusoutPrevented:$,onReleaseRequested:V}=usePopperContentFocusTrap(n,e),{attributes:z,arrowRef:re,contentRef:oe,styles:le,instanceRef:ue,role:ie,update:ae}=usePopperContent(n),{ariaModal:Fe,arrowStyle:de,contentAttrs:Ie,contentClass:Ve,contentStyle:kt,updateZIndex:At}=usePopperContentDOM(n,{styles:le,attributes:z,role:ie}),ze=inject(formItemContextKey,void 0),Et=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:de,arrowRef:re,arrowOffset:Et}),ze&&(ze.addInputId||ze.removeInputId)&&provide(formItemContextKey,{...ze,addInputId:NOOP,removeInputId:NOOP});let cr;const er=(dr=!0)=>{ae(),dr&&At()},or=()=>{er(!1),n.visible&&n.focusOnShow?y.value=!0:n.visible===!1&&(y.value=!1)};return onMounted(()=>{watch(()=>n.triggerTargetEl,(dr,lr)=>{cr==null||cr(),cr=void 0;const nr=unref(dr||oe.value),ur=unref(lr||oe.value);isElement(nr)&&(cr=watch([ie,()=>n.ariaLabel,Fe,()=>n.id],ar=>{["role","aria-label","aria-modal","id"].forEach((gr,pr)=>{isNil(ar[pr])?nr.removeAttribute(gr):nr.setAttribute(gr,ar[pr])})},{immediate:!0})),ur!==nr&&isElement(ur)&&["role","aria-label","aria-modal","id"].forEach(ar=>{ur.removeAttribute(ar)})},{immediate:!0}),watch(()=>n.visible,or,{immediate:!0})}),onBeforeUnmount(()=>{cr==null||cr(),cr=void 0}),r({popperContentRef:oe,popperInstanceRef:ue,updatePopper:er,contentStyle:kt}),(dr,lr)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:oe},unref(Ie),{style:unref(kt),class:unref(Ve),tabindex:"-1",onMouseenter:lr[0]||(lr[0]=nr=>dr.$emit("mouseenter",nr)),onMouseleave:lr[1]||(lr[1]=nr=>dr.$emit("mouseleave",nr))}),[createVNode(unref(ElFocusTrap),{trapped:unref(y),"trap-on-focus-in":!0,"focus-trap-el":unref(oe),"focus-start-el":unref(g),onFocusAfterTrapped:unref(k),onFocusAfterReleased:unref(i),onFocusin:unref(L),onFocusoutPrevented:unref($),onReleaseRequested:unref(V)},{default:withCtx(()=>[renderSlot(dr.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc$1(_sfc_main$17,[["__file","content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(t,r)=>isArray$3(t)?t.includes(r):t===r,whenTrigger=(t,r,e)=>n=>{isTriggerType(unref(t),r)&&e(n)},__default__$G=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$16=defineComponent({...__default__$G,props:useTooltipTriggerProps,setup(t,{expose:r}){const e=t,n=useNamespace("tooltip"),{controlled:g,id:y,open:i,onOpen:k,onClose:L,onToggle:$}=inject(TOOLTIP_INJECTION_KEY,void 0),V=ref(null),z=()=>{if(unref(g)||e.disabled)return!0},re=toRef(e,"trigger"),oe=composeEventHandlers(z,whenTrigger(re,"hover",k)),le=composeEventHandlers(z,whenTrigger(re,"hover",L)),ue=composeEventHandlers(z,whenTrigger(re,"click",Ie=>{Ie.button===0&&$(Ie)})),ie=composeEventHandlers(z,whenTrigger(re,"focus",k)),ae=composeEventHandlers(z,whenTrigger(re,"focus",L)),Fe=composeEventHandlers(z,whenTrigger(re,"contextmenu",Ie=>{Ie.preventDefault(),$(Ie)})),de=composeEventHandlers(z,Ie=>{const{code:Ve}=Ie;e.triggerKeys.includes(Ve)&&(Ie.preventDefault(),$(Ie))});return r({triggerRef:V}),(Ie,Ve)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(y),"virtual-ref":Ie.virtualRef,open:unref(i),"virtual-triggering":Ie.virtualTriggering,class:normalizeClass(unref(n).e("trigger")),onBlur:unref(ae),onClick:unref(ue),onContextmenu:unref(Fe),onFocus:unref(ie),onMouseenter:unref(oe),onMouseleave:unref(le),onKeydown:unref(de)},{default:withCtx(()=>[renderSlot(Ie.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc$1(_sfc_main$16,[["__file","trigger.vue"]]);const __default__$F=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$15=defineComponent({...__default__$F,props:useTooltipContentProps,setup(t,{expose:r}){const e=t,{selector:n}=usePopperContainerId(),g=useNamespace("tooltip"),y=ref(null),i=ref(!1),{controlled:k,id:L,open:$,trigger:V,onClose:z,onOpen:re,onShow:oe,onHide:le,onBeforeShow:ue,onBeforeHide:ie}=inject(TOOLTIP_INJECTION_KEY,void 0),ae=computed(()=>e.transition||`${g.namespace.value}-fade-in-linear`),Fe=computed(()=>e.persistent);onBeforeUnmount(()=>{i.value=!0});const de=computed(()=>unref(Fe)?!0:unref($)),Ie=computed(()=>e.disabled?!1:unref($)),Ve=computed(()=>e.appendTo||n.value),kt=computed(()=>{var ar;return(ar=e.style)!=null?ar:{}}),At=computed(()=>!unref($)),ze=()=>{le()},Et=()=>{if(unref(k))return!0},cr=composeEventHandlers(Et,()=>{e.enterable&&unref(V)==="hover"&&re()}),er=composeEventHandlers(Et,()=>{unref(V)==="hover"&&z()}),or=()=>{var ar,gr;(gr=(ar=y.value)==null?void 0:ar.updatePopper)==null||gr.call(ar),ue==null||ue()},dr=()=>{ie==null||ie()},lr=()=>{oe(),ur=onClickOutside(computed(()=>{var ar;return(ar=y.value)==null?void 0:ar.popperContentRef}),()=>{if(unref(k))return;unref(V)!=="hover"&&z()})},nr=()=>{e.virtualTriggering||z()};let ur;return watch(()=>unref($),ar=>{ar||ur==null||ur()},{flush:"post"}),watch(()=>e.content,()=>{var ar,gr;(gr=(ar=y.value)==null?void 0:ar.updatePopper)==null||gr.call(ar)}),r({contentRef:y}),(ar,gr)=>(openBlock(),createBlock(Teleport,{disabled:!ar.teleported,to:unref(Ve)},[createVNode(Transition,{name:unref(ae),onAfterLeave:ze,onBeforeEnter:or,onAfterEnter:lr,onBeforeLeave:dr},{default:withCtx(()=>[unref(de)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(L),ref_key:"contentRef",ref:y},ar.$attrs,{"aria-label":ar.ariaLabel,"aria-hidden":unref(At),"boundaries-padding":ar.boundariesPadding,"fallback-placements":ar.fallbackPlacements,"gpu-acceleration":ar.gpuAcceleration,offset:ar.offset,placement:ar.placement,"popper-options":ar.popperOptions,strategy:ar.strategy,effect:ar.effect,enterable:ar.enterable,pure:ar.pure,"popper-class":ar.popperClass,"popper-style":[ar.popperStyle,unref(kt)],"reference-el":ar.referenceEl,"trigger-target-el":ar.triggerTargetEl,visible:unref(Ie),"z-index":ar.zIndex,onMouseenter:unref(cr),onMouseleave:unref(er),onBlur:nr,onClose:unref(z)}),{default:withCtx(()=>[i.value?createCommentVNode("v-if",!0):renderSlot(ar.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Ie)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc$1(_sfc_main$15,[["__file","content.vue"]]);const _hoisted_1$E=["innerHTML"],_hoisted_2$o={key:1},__default__$E=defineComponent({name:"ElTooltip"}),_sfc_main$14=defineComponent({...__default__$E,props:useTooltipProps,emits:tooltipEmits,setup(t,{expose:r,emit:e}){const n=t;usePopperContainer();const g=useId(),y=ref(),i=ref(),k=()=>{var ae;const Fe=unref(y);Fe&&((ae=Fe.popperInstanceRef)==null||ae.update())},L=ref(!1),$=ref(),{show:V,hide:z,hasUpdateHandler:re}=useTooltipModelToggle({indicator:L,toggleReason:$}),{onOpen:oe,onClose:le}=useDelayedToggle({showAfter:toRef(n,"showAfter"),hideAfter:toRef(n,"hideAfter"),autoClose:toRef(n,"autoClose"),open:V,close:z}),ue=computed(()=>isBoolean$1(n.visible)&&!re.value);provide(TOOLTIP_INJECTION_KEY,{controlled:ue,id:g,open:readonly(L),trigger:toRef(n,"trigger"),onOpen:ae=>{oe(ae)},onClose:ae=>{le(ae)},onToggle:ae=>{unref(L)?le(ae):oe(ae)},onShow:()=>{e("show",$.value)},onHide:()=>{e("hide",$.value)},onBeforeShow:()=>{e("before-show",$.value)},onBeforeHide:()=>{e("before-hide",$.value)},updatePopper:k}),watch(()=>n.disabled,ae=>{ae&&L.value&&(L.value=!1)});const ie=ae=>{var Fe,de;const Ie=(de=(Fe=i.value)==null?void 0:Fe.contentRef)==null?void 0:de.popperContentRef,Ve=(ae==null?void 0:ae.relatedTarget)||document.activeElement;return Ie&&Ie.contains(Ve)};return onDeactivated(()=>L.value&&z()),r({popperRef:y,contentRef:i,isFocusInsideContent:ie,updatePopper:k,onOpen:oe,onClose:le,hide:z}),(ae,Fe)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:y,role:ae.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:ae.disabled,trigger:ae.trigger,"trigger-keys":ae.triggerKeys,"virtual-ref":ae.virtualRef,"virtual-triggering":ae.virtualTriggering},{default:withCtx(()=>[ae.$slots.default?renderSlot(ae.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:i,"aria-label":ae.ariaLabel,"boundaries-padding":ae.boundariesPadding,content:ae.content,disabled:ae.disabled,effect:ae.effect,enterable:ae.enterable,"fallback-placements":ae.fallbackPlacements,"hide-after":ae.hideAfter,"gpu-acceleration":ae.gpuAcceleration,offset:ae.offset,persistent:ae.persistent,"popper-class":ae.popperClass,"popper-style":ae.popperStyle,placement:ae.placement,"popper-options":ae.popperOptions,pure:ae.pure,"raw-content":ae.rawContent,"reference-el":ae.referenceEl,"trigger-target-el":ae.triggerTargetEl,"show-after":ae.showAfter,strategy:ae.strategy,teleported:ae.teleported,transition:ae.transition,"virtual-triggering":ae.virtualTriggering,"z-index":ae.zIndex,"append-to":ae.appendTo},{default:withCtx(()=>[renderSlot(ae.$slots,"content",{},()=>[ae.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:ae.content},null,8,_hoisted_1$E)):(openBlock(),createElementBlock("span",_hoisted_2$o,toDisplayString(ae.content),1))]),ae.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":ae.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc$1(_sfc_main$14,[["__file","tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),avatarProps=buildProps({size:{type:[Number,String],values:componentSizes,default:"",validator:t=>isNumber$1(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:iconPropType},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:definePropType(String),default:"cover"}}),avatarEmits={error:t=>t instanceof Event},_hoisted_1$D=["src","alt","srcset"],__default__$D=defineComponent({name:"ElAvatar"}),_sfc_main$13=defineComponent({...__default__$D,props:avatarProps,emits:avatarEmits,setup(t,{emit:r}){const e=t,n=useNamespace("avatar"),g=ref(!1),y=computed(()=>{const{size:$,icon:V,shape:z}=e,re=[n.b()];return isString$2($)&&re.push(n.m($)),V&&re.push(n.m("icon")),z&&re.push(n.m(z)),re}),i=computed(()=>{const{size:$}=e;return isNumber$1($)?n.cssVarBlock({size:addUnit($)||""}):void 0}),k=computed(()=>({objectFit:e.fit}));watch(()=>e.src,()=>g.value=!1);function L($){g.value=!0,r("error",$)}return($,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y)),style:normalizeStyle(unref(i))},[($.src||$.srcSet)&&!g.value?(openBlock(),createElementBlock("img",{key:0,src:$.src,alt:$.alt,srcset:$.srcSet,style:normalizeStyle(unref(k)),onError:L},null,44,_hoisted_1$D)):$.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent($.icon)))]),_:1})):renderSlot($.$slots,"default",{key:2})],6))}});var Avatar=_export_sfc$1(_sfc_main$13,[["__file","avatar.vue"]]);const ElAvatar=withInstall(Avatar),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_hoisted_1$C=["textContent"],__default__$C=defineComponent({name:"ElBadge"}),_sfc_main$12=defineComponent({...__default__$C,props:badgeProps,setup(t,{expose:r}){const e=t,n=useNamespace("badge"),g=computed(()=>e.isDot?"":isNumber$1(e.value)&&isNumber$1(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return r({content:g}),(y,i)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(n).b())},[renderSlot(y.$slots,"default"),createVNode(Transition,{name:`${unref(n).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(n).e("content"),unref(n).em("content",y.type),unref(n).is("fixed",!!y.$slots.default),unref(n).is("dot",y.isDot)]),textContent:toDisplayString(unref(g))},null,10,_hoisted_1$C),[[vShow,!y.hidden&&(unref(g)||y.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc$1(_sfc_main$12,[["__file","badge.vue"]]);const ElBadge=withInstall(Badge),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(t,r)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>t.type==="text"));const e=inject(buttonGroupContextKey,void 0),n=useGlobalConfig("button"),{form:g}=useFormItem(),y=useFormSize(computed(()=>e==null?void 0:e.size)),i=useFormDisabled(),k=ref(),L=useSlots(),$=computed(()=>t.type||(e==null?void 0:e.type)||""),V=computed(()=>{var le,ue,ie;return(ie=(ue=t.autoInsertSpace)!=null?ue:(le=n.value)==null?void 0:le.autoInsertSpace)!=null?ie:!1}),z=computed(()=>t.tag==="button"?{ariaDisabled:i.value||t.loading,disabled:i.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),re=computed(()=>{var le;const ue=(le=L.default)==null?void 0:le.call(L);if(V.value&&(ue==null?void 0:ue.length)===1){const ie=ue[0];if((ie==null?void 0:ie.type)===Text){const ae=ie.children;return/^\p{Unified_Ideograph}{2}$/u.test(ae.trim())}}return!1});return{_disabled:i,_size:y,_type:$,_ref:k,_props:z,shouldAddSpace:re,handleClick:le=>{t.nativeType==="reset"&&(g==null||g.resetFields()),r("click",le)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:t=>t instanceof MouseEvent};function bound01(t,r){isOnePointZero(t)&&(t="100%");var e=isPercentage(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),e&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function clamp01(t){return Math.min(1,Math.max(0,t))}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!==-1}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function convertToPercentage(t){return t<=1?"".concat(Number(t)*100,"%"):t}function pad2(t){return t.length===1?"0"+t:String(t)}function rgbToRgb(t,r,e){return{r:bound01(t,255)*255,g:bound01(r,255)*255,b:bound01(e,255)*255}}function rgbToHsl(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),g=Math.min(t,r,e),y=0,i=0,k=(n+g)/2;if(n===g)i=0,y=0;else{var L=n-g;switch(i=k>.5?L/(2-n-g):L/(n+g),n){case t:y=(r-e)/L+(r<e?6:0);break;case r:y=(e-t)/L+2;break;case e:y=(t-r)/L+4;break}y/=6}return{h:y,s:i,l:k}}function hue2rgb(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(r-t)*(6*e):e<1/2?r:e<2/3?t+(r-t)*(2/3-e)*6:t}function hslToRgb(t,r,e){var n,g,y;if(t=bound01(t,360),r=bound01(r,100),e=bound01(e,100),r===0)g=e,y=e,n=e;else{var i=e<.5?e*(1+r):e+r-e*r,k=2*e-i;n=hue2rgb(k,i,t+1/3),g=hue2rgb(k,i,t),y=hue2rgb(k,i,t-1/3)}return{r:n*255,g:g*255,b:y*255}}function rgbToHsv(t,r,e){t=bound01(t,255),r=bound01(r,255),e=bound01(e,255);var n=Math.max(t,r,e),g=Math.min(t,r,e),y=0,i=n,k=n-g,L=n===0?0:k/n;if(n===g)y=0;else{switch(n){case t:y=(r-e)/k+(r<e?6:0);break;case r:y=(e-t)/k+2;break;case e:y=(t-r)/k+4;break}y/=6}return{h:y,s:L,v:i}}function hsvToRgb(t,r,e){t=bound01(t,360)*6,r=bound01(r,100),e=bound01(e,100);var n=Math.floor(t),g=t-n,y=e*(1-r),i=e*(1-g*r),k=e*(1-(1-g)*r),L=n%6,$=[e,i,y,y,k,e][L],V=[k,e,e,i,y,y][L],z=[y,y,k,e,e,i][L];return{r:$*255,g:V*255,b:z*255}}function rgbToHex(t,r,e,n){var g=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16))];return n&&g[0].startsWith(g[0].charAt(1))&&g[1].startsWith(g[1].charAt(1))&&g[2].startsWith(g[2].charAt(1))?g[0].charAt(0)+g[1].charAt(0)+g[2].charAt(0):g.join("")}function rgbaToHex(t,r,e,n,g){var y=[pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(Math.round(e).toString(16)),pad2(convertDecimalToHex(n))];return g&&y[0].startsWith(y[0].charAt(1))&&y[1].startsWith(y[1].charAt(1))&&y[2].startsWith(y[2].charAt(1))&&y[3].startsWith(y[3].charAt(1))?y[0].charAt(0)+y[1].charAt(0)+y[2].charAt(0)+y[3].charAt(0):y.join("")}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}function parseIntFromHex(t){return parseInt(t,16)}function numberInputToObject(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(t){var r={r:0,g:0,b:0},e=1,n=null,g=null,y=null,i=!1,k=!1;return typeof t=="string"&&(t=stringInputToObject(t)),typeof t=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(r=rgbToRgb(t.r,t.g,t.b),i=!0,k=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(n=convertToPercentage(t.s),g=convertToPercentage(t.v),r=hsvToRgb(t.h,n,g),i=!0,k="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(n=convertToPercentage(t.s),y=convertToPercentage(t.l),r=hslToRgb(t.h,n,y),i=!0,k="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(e=t.a)),e=boundAlpha(e),{ok:i,format:t.format||k,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:e}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if(names[t])t=names[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=matchers.rgb.exec(t);return e?{r:e[1],g:e[2],b:e[3]}:(e=matchers.rgba.exec(t),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=matchers.hsl.exec(t),e?{h:e[1],s:e[2],l:e[3]}:(e=matchers.hsla.exec(t),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=matchers.hsv.exec(t),e?{h:e[1],s:e[2],v:e[3]}:(e=matchers.hsva.exec(t),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=matchers.hex8.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),a:convertHexToDecimal(e[4]),format:r?"name":"hex8"}:(e=matchers.hex6.exec(t),e?{r:parseIntFromHex(e[1]),g:parseIntFromHex(e[2]),b:parseIntFromHex(e[3]),format:r?"name":"hex"}:(e=matchers.hex4.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),a:convertHexToDecimal(e[4]+e[4]),format:r?"name":"hex8"}:(e=matchers.hex3.exec(t),e?{r:parseIntFromHex(e[1]+e[1]),g:parseIntFromHex(e[2]+e[2]),b:parseIntFromHex(e[3]+e[3]),format:r?"name":"hex"}:!1)))))))))}function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(String(t))}var TinyColor=function(){function t(r,e){r===void 0&&(r=""),e===void 0&&(e={});var n;if(r instanceof t)return r;typeof r=="number"&&(r=numberInputToObject(r)),this.originalInput=r;var g=inputToRGB(r);this.originalInput=r,this.r=g.r,this.g=g.g,this.b=g.b,this.a=g.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:g.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=g.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),e,n,g,y=r.r/255,i=r.g/255,k=r.b/255;return y<=.03928?e=y/12.92:e=Math.pow((y+.055)/1.055,2.4),i<=.03928?n=i/12.92:n=Math.pow((i+.055)/1.055,2.4),k<=.03928?g=k/12.92:g=Math.pow((k+.055)/1.055,2.4),.2126*e+.7152*n+.0722*g},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=boundAlpha(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=rgbToHsv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=rgbToHsv(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),g=Math.round(r.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(g,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=rgbToHsl(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=rgbToHsl(this.r,this.g,this.b),e=Math.round(r.h*360),n=Math.round(r.s*100),g=Math.round(r.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(g,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),rgbToHex(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),rgbaToHex(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(e,", ").concat(n,")"):"rgba(".concat(r,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(e){return"".concat(Math.round(bound01(e,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(e){return Math.round(bound01(e,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+rgbToHex(this.r,this.g,this.b,!1),e=0,n=Object.entries(names);e<n.length;e++){var g=n[e],y=g[0],i=g[1];if(r===i)return y}return!1},t.prototype.toString=function(r){var e=!!r;r=r??this.format;var n=!1,g=this.a<1&&this.a>=0,y=!e&&g&&(r.startsWith("hex")||r==="name");return y?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l+=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.brighten=function(r){r===void 0&&(r=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(r/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(r/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(r/100)))),new t(e)},t.prototype.darken=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.l-=r/100,e.l=clamp01(e.l),new t(e)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s-=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.saturate=function(r){r===void 0&&(r=10);var e=this.toHsl();return e.s+=r/100,e.s=clamp01(e.s),new t(e)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var e=this.toHsl(),n=(e.h+r)%360;return e.h=n<0?360+n:n,new t(e)},t.prototype.mix=function(r,e){e===void 0&&(e=50);var n=this.toRgb(),g=new t(r).toRgb(),y=e/100,i={r:(g.r-n.r)*y+n.r,g:(g.g-n.g)*y+n.g,b:(g.b-n.b)*y+n.b,a:(g.a-n.a)*y+n.a};return new t(i)},t.prototype.analogous=function(r,e){r===void 0&&(r=6),e===void 0&&(e=30);var n=this.toHsl(),g=360/e,y=[this];for(n.h=(n.h-(g*r>>1)+720)%360;--r;)n.h=(n.h+g)%360,y.push(new t(n));return y},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var e=this.toHsv(),n=e.h,g=e.s,y=e.v,i=[],k=1/r;r--;)i.push(new t({h:n,s:g,v:y})),y=(y+k)%1;return i},t.prototype.splitcomplement=function(){var r=this.toHsl(),e=r.h;return[this,new t({h:(e+72)%360,s:r.s,l:r.l}),new t({h:(e+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var e=this.toRgb(),n=new t(r).toRgb(),g=e.a+n.a*(1-e.a);return new t({r:(e.r*e.a+n.r*n.a*(1-e.a))/g,g:(e.g*e.a+n.g*n.a*(1-e.a))/g,b:(e.b*e.a+n.b*n.a*(1-e.a))/g,a:g})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var e=this.toHsl(),n=e.h,g=[this],y=360/r,i=1;i<r;i++)g.push(new t({h:(n+i*y)%360,s:e.s,l:e.l}));return g},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}();function darken(t,r=20){return t.mix("#141414",r).toString()}function useButtonCustomStyle(t){const r=useFormDisabled(),e=useNamespace("button");return computed(()=>{let n={};const g=t.color;if(g){const y=new TinyColor(g),i=t.dark?y.tint(20).toString():darken(y,20);if(t.plain)n=e.cssVarBlock({"bg-color":t.dark?darken(y,90):y.tint(90).toString(),"text-color":g,"border-color":t.dark?darken(y,50):y.tint(50).toString(),"hover-text-color":`var(${e.cssVarName("color-white")})`,"hover-bg-color":g,"hover-border-color":g,"active-bg-color":i,"active-text-color":`var(${e.cssVarName("color-white")})`,"active-border-color":i}),r.value&&(n[e.cssVarBlockName("disabled-bg-color")]=t.dark?darken(y,90):y.tint(90).toString(),n[e.cssVarBlockName("disabled-text-color")]=t.dark?darken(y,50):y.tint(50).toString(),n[e.cssVarBlockName("disabled-border-color")]=t.dark?darken(y,80):y.tint(80).toString());else{const k=t.dark?darken(y,30):y.tint(30).toString(),L=y.isDark()?`var(${e.cssVarName("color-white")})`:`var(${e.cssVarName("color-black")})`;if(n=e.cssVarBlock({"bg-color":g,"text-color":L,"border-color":g,"hover-bg-color":k,"hover-text-color":L,"hover-border-color":k,"active-bg-color":i,"active-border-color":i}),r.value){const $=t.dark?darken(y,50):y.tint(50).toString();n[e.cssVarBlockName("disabled-bg-color")]=$,n[e.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${e.cssVarName("color-white")})`,n[e.cssVarBlockName("disabled-border-color")]=$}}}return n})}const __default__$B=defineComponent({name:"ElButton"}),_sfc_main$11=defineComponent({...__default__$B,props:buttonProps,emits:buttonEmits,setup(t,{expose:r,emit:e}){const n=t,g=useButtonCustomStyle(n),y=useNamespace("button"),{_ref:i,_size:k,_type:L,_disabled:$,_props:V,shouldAddSpace:z,handleClick:re}=useButton(n,e);return r({ref:i,size:k,type:L,disabled:$,shouldAddSpace:z}),(oe,le)=>(openBlock(),createBlock(resolveDynamicComponent(oe.tag),mergeProps({ref_key:"_ref",ref:i},unref(V),{class:[unref(y).b(),unref(y).m(unref(L)),unref(y).m(unref(k)),unref(y).is("disabled",unref($)),unref(y).is("loading",oe.loading),unref(y).is("plain",oe.plain),unref(y).is("round",oe.round),unref(y).is("circle",oe.circle),unref(y).is("text",oe.text),unref(y).is("link",oe.link),unref(y).is("has-bg",oe.bg)],style:unref(g),onClick:unref(re)}),{default:withCtx(()=>[oe.loading?(openBlock(),createElementBlock(Fragment,{key:0},[oe.$slots.loading?renderSlot(oe.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(y).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(oe.loadingIcon)))]),_:1},8,["class"]))],64)):oe.icon||oe.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[oe.icon?(openBlock(),createBlock(resolveDynamicComponent(oe.icon),{key:0})):renderSlot(oe.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),oe.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(y).em("text","expand")]:unref(z)})},[renderSlot(oe.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc$1(_sfc_main$11,[["__file","button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$A=defineComponent({name:"ElButtonGroup"}),_sfc_main$10=defineComponent({...__default__$A,props:buttonGroupProps,setup(t){const r=t;provide(buttonGroupContextKey,reactive({size:toRef(r,"size"),type:toRef(r,"type")}));const e=useNamespace("button");return(n,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(e).b("group")}`)},[renderSlot(n.$slots,"default")],2))}});var ButtonGroup=_export_sfc$1(_sfc_main$10,[["__file","button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup});withNoopInstall(ButtonGroup);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dayjs_min={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=1e3,n=6e4,g=36e5,y="millisecond",i="second",k="minute",L="hour",$="day",V="week",z="month",re="quarter",oe="year",le="date",ue="Invalid Date",ie=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ae=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(lr){var nr=["th","st","nd","rd"],ur=lr%100;return"["+lr+(nr[(ur-20)%10]||nr[ur]||nr[0])+"]"}},de=function(lr,nr,ur){var ar=String(lr);return!ar||ar.length>=nr?lr:""+Array(nr+1-ar.length).join(ur)+lr},Ie={s:de,z:function(lr){var nr=-lr.utcOffset(),ur=Math.abs(nr),ar=Math.floor(ur/60),gr=ur%60;return(nr<=0?"+":"-")+de(ar,2,"0")+":"+de(gr,2,"0")},m:function lr(nr,ur){if(nr.date()<ur.date())return-lr(ur,nr);var ar=12*(ur.year()-nr.year())+(ur.month()-nr.month()),gr=nr.clone().add(ar,z),pr=ur-gr<0,hr=nr.clone().add(ar+(pr?-1:1),z);return+(-(ar+(ur-gr)/(pr?gr-hr:hr-gr))||0)},a:function(lr){return lr<0?Math.ceil(lr)||0:Math.floor(lr)},p:function(lr){return{M:z,y:oe,w:V,d:$,D:le,h:L,m:k,s:i,ms:y,Q:re}[lr]||String(lr||"").toLowerCase().replace(/s$/,"")},u:function(lr){return lr===void 0}},Ve="en",kt={};kt[Ve]=Fe;var At="$isDayjsObject",ze=function(lr){return lr instanceof or||!(!lr||!lr[At])},Et=function lr(nr,ur,ar){var gr;if(!nr)return Ve;if(typeof nr=="string"){var pr=nr.toLowerCase();kt[pr]&&(gr=pr),ur&&(kt[pr]=ur,gr=pr);var hr=nr.split("-");if(!gr&&hr.length>1)return lr(hr[0])}else{var Cr=nr.name;kt[Cr]=nr,gr=Cr}return!ar&&gr&&(Ve=gr),gr||!ar&&Ve},cr=function(lr,nr){if(ze(lr))return lr.clone();var ur=typeof nr=="object"?nr:{};return ur.date=lr,ur.args=arguments,new or(ur)},er=Ie;er.l=Et,er.i=ze,er.w=function(lr,nr){return cr(lr,{locale:nr.$L,utc:nr.$u,x:nr.$x,$offset:nr.$offset})};var or=function(){function lr(ur){this.$L=Et(ur.locale,null,!0),this.parse(ur),this.$x=this.$x||ur.x||{},this[At]=!0}var nr=lr.prototype;return nr.parse=function(ur){this.$d=function(ar){var gr=ar.date,pr=ar.utc;if(gr===null)return new Date(NaN);if(er.u(gr))return new Date;if(gr instanceof Date)return new Date(gr);if(typeof gr=="string"&&!/Z$/i.test(gr)){var hr=gr.match(ie);if(hr){var Cr=hr[2]-1||0,wr=(hr[7]||"0").substring(0,3);return pr?new Date(Date.UTC(hr[1],Cr,hr[3]||1,hr[4]||0,hr[5]||0,hr[6]||0,wr)):new Date(hr[1],Cr,hr[3]||1,hr[4]||0,hr[5]||0,hr[6]||0,wr)}}return new Date(gr)}(ur),this.init()},nr.init=function(){var ur=this.$d;this.$y=ur.getFullYear(),this.$M=ur.getMonth(),this.$D=ur.getDate(),this.$W=ur.getDay(),this.$H=ur.getHours(),this.$m=ur.getMinutes(),this.$s=ur.getSeconds(),this.$ms=ur.getMilliseconds()},nr.$utils=function(){return er},nr.isValid=function(){return this.$d.toString()!==ue},nr.isSame=function(ur,ar){var gr=cr(ur);return this.startOf(ar)<=gr&&gr<=this.endOf(ar)},nr.isAfter=function(ur,ar){return cr(ur)<this.startOf(ar)},nr.isBefore=function(ur,ar){return this.endOf(ar)<cr(ur)},nr.$g=function(ur,ar,gr){return er.u(ur)?this[ar]:this.set(gr,ur)},nr.unix=function(){return Math.floor(this.valueOf()/1e3)},nr.valueOf=function(){return this.$d.getTime()},nr.startOf=function(ur,ar){var gr=this,pr=!!er.u(ar)||ar,hr=er.p(ur),Cr=function(xr,Nr){var Mr=er.w(gr.$u?Date.UTC(gr.$y,Nr,xr):new Date(gr.$y,Nr,xr),gr);return pr?Mr:Mr.endOf($)},wr=function(xr,Nr){return er.w(gr.toDate()[xr].apply(gr.toDate("s"),(pr?[0,0,0,0]:[23,59,59,999]).slice(Nr)),gr)},Sr=this.$W,mr=this.$M,_r=this.$D,Ar="set"+(this.$u?"UTC":"");switch(hr){case oe:return pr?Cr(1,0):Cr(31,11);case z:return pr?Cr(1,mr):Cr(0,mr+1);case V:var Er=this.$locale().weekStart||0,sr=(Sr<Er?Sr+7:Sr)-Er;return Cr(pr?_r-sr:_r+(6-sr),mr);case $:case le:return wr(Ar+"Hours",0);case L:return wr(Ar+"Minutes",1);case k:return wr(Ar+"Seconds",2);case i:return wr(Ar+"Milliseconds",3);default:return this.clone()}},nr.endOf=function(ur){return this.startOf(ur,!1)},nr.$set=function(ur,ar){var gr,pr=er.p(ur),hr="set"+(this.$u?"UTC":""),Cr=(gr={},gr[$]=hr+"Date",gr[le]=hr+"Date",gr[z]=hr+"Month",gr[oe]=hr+"FullYear",gr[L]=hr+"Hours",gr[k]=hr+"Minutes",gr[i]=hr+"Seconds",gr[y]=hr+"Milliseconds",gr)[pr],wr=pr===$?this.$D+(ar-this.$W):ar;if(pr===z||pr===oe){var Sr=this.clone().set(le,1);Sr.$d[Cr](wr),Sr.init(),this.$d=Sr.set(le,Math.min(this.$D,Sr.daysInMonth())).$d}else Cr&&this.$d[Cr](wr);return this.init(),this},nr.set=function(ur,ar){return this.clone().$set(ur,ar)},nr.get=function(ur){return this[er.p(ur)]()},nr.add=function(ur,ar){var gr,pr=this;ur=Number(ur);var hr=er.p(ar),Cr=function(mr){var _r=cr(pr);return er.w(_r.date(_r.date()+Math.round(mr*ur)),pr)};if(hr===z)return this.set(z,this.$M+ur);if(hr===oe)return this.set(oe,this.$y+ur);if(hr===$)return Cr(1);if(hr===V)return Cr(7);var wr=(gr={},gr[k]=n,gr[L]=g,gr[i]=e,gr)[hr]||1,Sr=this.$d.getTime()+ur*wr;return er.w(Sr,this)},nr.subtract=function(ur,ar){return this.add(-1*ur,ar)},nr.format=function(ur){var ar=this,gr=this.$locale();if(!this.isValid())return gr.invalidDate||ue;var pr=ur||"YYYY-MM-DDTHH:mm:ssZ",hr=er.z(this),Cr=this.$H,wr=this.$m,Sr=this.$M,mr=gr.weekdays,_r=gr.months,Ar=gr.meridiem,Er=function(Nr,Mr,br,yr){return Nr&&(Nr[Mr]||Nr(ar,pr))||br[Mr].slice(0,yr)},sr=function(Nr){return er.s(Cr%12||12,Nr,"0")},xr=Ar||function(Nr,Mr,br){var yr=Nr<12?"AM":"PM";return br?yr.toLowerCase():yr};return pr.replace(ae,function(Nr,Mr){return Mr||function(br){switch(br){case"YY":return String(ar.$y).slice(-2);case"YYYY":return er.s(ar.$y,4,"0");case"M":return Sr+1;case"MM":return er.s(Sr+1,2,"0");case"MMM":return Er(gr.monthsShort,Sr,_r,3);case"MMMM":return Er(_r,Sr);case"D":return ar.$D;case"DD":return er.s(ar.$D,2,"0");case"d":return String(ar.$W);case"dd":return Er(gr.weekdaysMin,ar.$W,mr,2);case"ddd":return Er(gr.weekdaysShort,ar.$W,mr,3);case"dddd":return mr[ar.$W];case"H":return String(Cr);case"HH":return er.s(Cr,2,"0");case"h":return sr(1);case"hh":return sr(2);case"a":return xr(Cr,wr,!0);case"A":return xr(Cr,wr,!1);case"m":return String(wr);case"mm":return er.s(wr,2,"0");case"s":return String(ar.$s);case"ss":return er.s(ar.$s,2,"0");case"SSS":return er.s(ar.$ms,3,"0");case"Z":return hr}return null}(Nr)||hr.replace(":","")})},nr.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},nr.diff=function(ur,ar,gr){var pr,hr=this,Cr=er.p(ar),wr=cr(ur),Sr=(wr.utcOffset()-this.utcOffset())*n,mr=this-wr,_r=function(){return er.m(hr,wr)};switch(Cr){case oe:pr=_r()/12;break;case z:pr=_r();break;case re:pr=_r()/3;break;case V:pr=(mr-Sr)/6048e5;break;case $:pr=(mr-Sr)/864e5;break;case L:pr=mr/g;break;case k:pr=mr/n;break;case i:pr=mr/e;break;default:pr=mr}return gr?pr:er.a(pr)},nr.daysInMonth=function(){return this.endOf(z).$D},nr.$locale=function(){return kt[this.$L]},nr.locale=function(ur,ar){if(!ur)return this.$L;var gr=this.clone(),pr=Et(ur,ar,!0);return pr&&(gr.$L=pr),gr},nr.clone=function(){return er.w(this.$d,this)},nr.toDate=function(){return new Date(this.valueOf())},nr.toJSON=function(){return this.isValid()?this.toISOString():null},nr.toISOString=function(){return this.$d.toISOString()},nr.toString=function(){return this.$d.toUTCString()},lr}(),dr=or.prototype;return cr.prototype=dr,[["$ms",y],["$s",i],["$m",k],["$H",L],["$W",$],["$M",z],["$y",oe],["$D",le]].forEach(function(lr){dr[lr[1]]=function(nr){return this.$g(nr,lr[0],lr[1])}}),cr.extend=function(lr,nr){return lr.$i||(lr(nr,or,cr),lr.$i=!0),cr},cr.locale=Et,cr.isDayjs=ze,cr.unix=function(lr){return cr(1e3*lr)},cr.en=kt[Ve],cr.Ls=kt,cr.p={},cr})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",t=>startClick=t),document.addEventListener("mouseup",t=>{for(const r of nodeList.values())for(const{documentHandler:e}of r)e(t,startClick)}));function createDocumentHandler(t,r){let e=[];return Array.isArray(r.arg)?e=r.arg:isElement(r.arg)&&e.push(r.arg),function(n,g){const y=r.instance.popperRef,i=n.target,k=g==null?void 0:g.target,L=!r||!r.instance,$=!i||!k,V=t.contains(i)||t.contains(k),z=t===i,re=e.length&&e.some(le=>le==null?void 0:le.contains(i))||e.length&&e.includes(k),oe=y&&(y.contains(i)||y.contains(k));L||$||V||z||re||oe||r.value(n,g)}}const ClickOutside={beforeMount(t,r){nodeList.has(t)||nodeList.set(t,[]),nodeList.get(t).push({documentHandler:createDocumentHandler(t,r),bindingFn:r.value})},updated(t,r){nodeList.has(t)||nodeList.set(t,[]);const e=nodeList.get(t),n=e.findIndex(y=>y.bindingFn===r.oldValue),g={documentHandler:createDocumentHandler(t,r),bindingFn:r.value};n>=0?e.splice(n,1,g):e.push(g)},unmounted(t){nodeList.delete(t)}},REPEAT_INTERVAL=100,REPEAT_DELAY=600,vRepeatClick={beforeMount(t,r){const e=r.value,{interval:n=REPEAT_INTERVAL,delay:g=REPEAT_DELAY}=isFunction$3(e)?{}:e;let y,i;const k=()=>isFunction$3(e)?e():e.handler(),L=()=>{i&&(clearTimeout(i),i=void 0),y&&(clearInterval(y),y=void 0)};t.addEventListener("mousedown",$=>{$.button===0&&(L(),k(),document.addEventListener("mouseup",()=>L(),{once:!0}),i=setTimeout(()=>{y=setInterval(()=>{k()},n)},g))})}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=t=>{if(FOCUS_STACK.length===0)return;const r=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(r.length>0&&t.code===EVENT_CODE.tab){if(r.length===1){t.preventDefault(),document.activeElement!==r[0]&&r[0].focus();return}const e=t.shiftKey,n=t.target===r[0],g=t.target===r[r.length-1];n&&e&&(t.preventDefault(),r[r.length-1].focus()),g&&!e&&(t.preventDefault(),r[0].focus())}},TrapFocus={beforeMount(t){t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t),FOCUS_STACK.push(t),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(t){nextTick(()=>{t[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(t)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}};var v=!1,o,f,s,u,d,N,l$1,p,m,w,D,x,E,M,F;function a(){if(!v){v=!0;var t=navigator.userAgent,r=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),e=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(x=/\b(iPhone|iP[ao]d)/.exec(t),E=/\b(iP[ao]d)/.exec(t),w=/Android/i.exec(t),M=/FBAN\/\w+;/i.exec(t),F=/Mobile/i.exec(t),D=!!/Win64/.exec(t),r){o=r[1]?parseFloat(r[1]):r[5]?parseFloat(r[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);N=n?parseFloat(n[1])+4:o,f=r[2]?parseFloat(r[2]):NaN,s=r[3]?parseFloat(r[3]):NaN,u=r[4]?parseFloat(r[4]):NaN,u?(r=/(?:Chrome\/(\d+\.\d+))/.exec(t),d=r&&r[1]?parseFloat(r[1]):NaN):d=NaN}else o=f=s=d=u=NaN;if(e){if(e[1]){var g=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);l$1=g?parseFloat(g[1].replace("_",".")):!0}else l$1=!1;p=!!e[2],m=!!e[3]}else l$1=p=m=!1}}var _={ie:function(){return a()||o},ieCompatibilityMode:function(){return a()||N>o},ie64:function(){return _.ie()&&D},firefox:function(){return a()||f},opera:function(){return a()||s},webkit:function(){return a()||u},safari:function(){return _.webkit()},chrome:function(){return a()||d},windows:function(){return a()||p},osx:function(){return a()||l$1},linux:function(){return a()||m},iphone:function(){return a()||x},mobile:function(){return a()||x||E||w||F},nativeApp:function(){return a()||M},android:function(){return a()||w},ipad:function(){return a()||E}},A=_,c=!!(typeof window<"u"&&window.document&&window.document.createElement),U={canUseDOM:c,canUseWorkers:typeof Worker<"u",canUseEventListeners:c&&!!(window.addEventListener||window.attachEvent),canUseViewport:c&&!!window.screen,isInWorker:!c},h=U,X;h.canUseDOM&&(X=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function S(t,r){if(!h.canUseDOM||r&&!("addEventListener"in document))return!1;var e="on"+t,n=e in document;if(!n){var g=document.createElement("div");g.setAttribute(e,"return;"),n=typeof g[e]=="function"}return!n&&X&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var b=S,O=10,I=40,P=800;function T(t){var r=0,e=0,n=0,g=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/120),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(r=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(r=e,e=0),n=r*O,g=e*O,"deltaY"in t&&(g=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||g)&&t.deltaMode&&(t.deltaMode==1?(n*=I,g*=I):(n*=P,g*=P)),n&&!r&&(r=n<1?-1:1),g&&!e&&(e=g<1?-1:1),{spinX:r,spinY:e,pixelX:n,pixelY:g}}T.getEventType=function(){return A.firefox()?"DOMMouseScroll":b("wheel")?"wheel":"mousewheel"};var Y=T;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mousewheel=function(t,r){if(t&&t.addEventListener){const e=function(n){const g=Y(n);r&&Reflect.apply(r,this,[n,g])};t.addEventListener("wheel",e,{passive:!0})}},Mousewheel={beforeMount(t,r){mousewheel(t,r.value)}},cardProps=buildProps({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:definePropType([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),__default__$z=defineComponent({name:"ElCard"}),_sfc_main$$=defineComponent({...__default__$z,props:cardProps,setup(t){const r=useNamespace("card");return(e,n)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(r).b(),unref(r).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("header"))},[renderSlot(e.$slots,"header",{},()=>[createTextVNode(toDisplayString(e.header),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([unref(r).e("body"),e.bodyClass]),style:normalizeStyle(e.bodyStyle)},[renderSlot(e.$slots,"default")],6),e.$slots.footer||e.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("footer"))},[renderSlot(e.$slots,"footer",{},()=>[createTextVNode(toDisplayString(e.footer),1)])],2)):createCommentVNode("v-if",!0)],2))}});var Card=_export_sfc$1(_sfc_main$$,[["__file","card.vue"]]);const ElCard=withInstall(Card),checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),change:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:t,isChecked:r})=>{const e=inject(checkboxGroupContextKey,void 0),n=computed(()=>{var y,i;const k=(y=e==null?void 0:e.max)==null?void 0:y.value,L=(i=e==null?void 0:e.min)==null?void 0:i.value;return!isUndefined$1(k)&&t.value.length>=k&&!r.value||!isUndefined$1(L)&&t.value.length<=L&&r.value});return{isDisabled:useFormDisabled(computed(()=>(e==null?void 0:e.disabled.value)||n.value)),isLimitDisabled:n}},useCheckboxEvent=(t,{model:r,isLimitExceeded:e,hasOwnLabel:n,isDisabled:g,isLabeledByFormItem:y})=>{const i=inject(checkboxGroupContextKey,void 0),{formItem:k}=useFormItem(),{emit:L}=getCurrentInstance();function $(le){var ue,ie;return le===t.trueLabel||le===!0?(ue=t.trueLabel)!=null?ue:!0:(ie=t.falseLabel)!=null?ie:!1}function V(le,ue){L("change",$(le),ue)}function z(le){if(e.value)return;const ue=le.target;L("change",$(ue.checked),le)}async function re(le){e.value||!n.value&&!g.value&&y.value&&(le.composedPath().some(ae=>ae.tagName==="LABEL")||(r.value=$([!1,t.falseLabel].includes(r.value)),await nextTick(),V(r.value,le)))}const oe=computed(()=>(i==null?void 0:i.validateEvent)||t.validateEvent);return watch(()=>t.modelValue,()=>{oe.value&&(k==null||k.validate("change").catch(le=>void 0))}),{handleChange:z,onClickRoot:re}},useCheckboxModel=t=>{const r=ref(!1),{emit:e}=getCurrentInstance(),n=inject(checkboxGroupContextKey,void 0),g=computed(()=>isUndefined$1(n)===!1),y=ref(!1),i=computed({get(){var k,L;return g.value?(k=n==null?void 0:n.modelValue)==null?void 0:k.value:(L=t.modelValue)!=null?L:r.value},set(k){var L,$;g.value&&isArray$3(k)?(y.value=((L=n==null?void 0:n.max)==null?void 0:L.value)!==void 0&&k.length>(n==null?void 0:n.max.value)&&k.length>i.value.length,y.value===!1&&(($=n==null?void 0:n.changeEvent)==null||$.call(n,k))):(e(UPDATE_MODEL_EVENT,k),r.value=k)}});return{model:i,isGroup:g,isLimitExceeded:y}},useCheckboxStatus=(t,r,{model:e})=>{const n=inject(checkboxGroupContextKey,void 0),g=ref(!1),y=computed(()=>{const $=e.value;return isBoolean$1($)?$:isArray$3($)?isObject$2(t.label)?$.map(toRaw).some(V=>isEqual(V,t.label)):$.map(toRaw).includes(t.label):$!=null?$===t.trueLabel:!!$}),i=useFormSize(computed(()=>{var $;return($=n==null?void 0:n.size)==null?void 0:$.value}),{prop:!0}),k=useFormSize(computed(()=>{var $;return($=n==null?void 0:n.size)==null?void 0:$.value})),L=computed(()=>!!r.default||!isNil(t.label));return{checkboxButtonSize:i,isChecked:y,isFocused:g,checkboxSize:k,hasOwnLabel:L}},setStoreValue=(t,{model:r})=>{function e(){isArray$3(r.value)&&!r.value.includes(t.label)?r.value.push(t.label):r.value=t.trueLabel||!0}t.checked&&e()},useCheckbox=(t,r)=>{const{formItem:e}=useFormItem(),{model:n,isGroup:g,isLimitExceeded:y}=useCheckboxModel(t),{isFocused:i,isChecked:k,checkboxButtonSize:L,checkboxSize:$,hasOwnLabel:V}=useCheckboxStatus(t,r,{model:n}),{isDisabled:z}=useCheckboxDisabled({model:n,isChecked:k}),{inputId:re,isLabeledByFormItem:oe}=useFormItemInputId(t,{formItemContext:e,disableIdGeneration:V,disableIdManagement:g}),{handleChange:le,onClickRoot:ue}=useCheckboxEvent(t,{model:n,isLimitExceeded:y,hasOwnLabel:V,isDisabled:z,isLabeledByFormItem:oe});return setStoreValue(t,{model:n}),{inputId:re,isLabeledByFormItem:oe,isChecked:k,isDisabled:z,isFocused:i,checkboxButtonSize:L,checkboxSize:$,hasOwnLabel:V,model:n,handleChange:le,onClickRoot:ue}},_hoisted_1$B=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],_hoisted_2$n=["id","indeterminate","disabled","value","name","tabindex"],__default__$y=defineComponent({name:"ElCheckbox"}),_sfc_main$_=defineComponent({...__default__$y,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{inputId:n,isLabeledByFormItem:g,isChecked:y,isDisabled:i,isFocused:k,checkboxSize:L,hasOwnLabel:$,model:V,handleChange:z,onClickRoot:re}=useCheckbox(r,e),oe=useNamespace("checkbox"),le=computed(()=>[oe.b(),oe.m(L.value),oe.is("disabled",i.value),oe.is("bordered",r.border),oe.is("checked",y.value)]),ue=computed(()=>[oe.e("input"),oe.is("disabled",i.value),oe.is("checked",y.value),oe.is("indeterminate",r.indeterminate),oe.is("focus",k.value)]);return(ie,ae)=>(openBlock(),createBlock(resolveDynamicComponent(!unref($)&&unref(g)?"span":"label"),{class:normalizeClass(unref(le)),"aria-controls":ie.indeterminate?ie.controls:null,onClick:unref(re)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(ue))},[ie.trueLabel||ie.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(n),"onUpdate:modelValue":ae[0]||(ae[0]=Fe=>isRef(V)?V.value=Fe:null),class:normalizeClass(unref(oe).e("original")),type:"checkbox",indeterminate:ie.indeterminate,name:ie.name,tabindex:ie.tabindex,disabled:unref(i),"true-value":ie.trueLabel,"false-value":ie.falseLabel,onChange:ae[1]||(ae[1]=(...Fe)=>unref(z)&&unref(z)(...Fe)),onFocus:ae[2]||(ae[2]=Fe=>k.value=!0),onBlur:ae[3]||(ae[3]=Fe=>k.value=!1),onClick:ae[4]||(ae[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$B)),[[vModelCheckbox,unref(V)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(n),"onUpdate:modelValue":ae[5]||(ae[5]=Fe=>isRef(V)?V.value=Fe:null),class:normalizeClass(unref(oe).e("original")),type:"checkbox",indeterminate:ie.indeterminate,disabled:unref(i),value:ie.label,name:ie.name,tabindex:ie.tabindex,onChange:ae[6]||(ae[6]=(...Fe)=>unref(z)&&unref(z)(...Fe)),onFocus:ae[7]||(ae[7]=Fe=>k.value=!0),onBlur:ae[8]||(ae[8]=Fe=>k.value=!1),onClick:ae[9]||(ae[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$n)),[[vModelCheckbox,unref(V)]]),createBaseVNode("span",{class:normalizeClass(unref(oe).e("inner"))},null,2)],2),unref($)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(oe).e("label"))},[renderSlot(ie.$slots,"default"),ie.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(ie.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc$1(_sfc_main$_,[["__file","checkbox.vue"]]);const _hoisted_1$A=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$m=["name","tabindex","disabled","value"],__default__$x=defineComponent({name:"ElCheckboxButton"}),_sfc_main$Z=defineComponent({...__default__$x,props:checkboxProps,emits:checkboxEmits,setup(t){const r=t,e=useSlots(),{isFocused:n,isChecked:g,isDisabled:y,checkboxButtonSize:i,model:k,handleChange:L}=useCheckbox(r,e),$=inject(checkboxGroupContextKey,void 0),V=useNamespace("checkbox"),z=computed(()=>{var oe,le,ue,ie;const ae=(le=(oe=$==null?void 0:$.fill)==null?void 0:oe.value)!=null?le:"";return{backgroundColor:ae,borderColor:ae,color:(ie=(ue=$==null?void 0:$.textColor)==null?void 0:ue.value)!=null?ie:"",boxShadow:ae?`-1px 0 0 0 ${ae}`:void 0}}),re=computed(()=>[V.b("button"),V.bm("button",i.value),V.is("disabled",y.value),V.is("checked",g.value),V.is("focus",n.value)]);return(oe,le)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(re))},[oe.trueLabel||oe.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":le[0]||(le[0]=ue=>isRef(k)?k.value=ue:null),class:normalizeClass(unref(V).be("button","original")),type:"checkbox",name:oe.name,tabindex:oe.tabindex,disabled:unref(y),"true-value":oe.trueLabel,"false-value":oe.falseLabel,onChange:le[1]||(le[1]=(...ue)=>unref(L)&&unref(L)(...ue)),onFocus:le[2]||(le[2]=ue=>n.value=!0),onBlur:le[3]||(le[3]=ue=>n.value=!1),onClick:le[4]||(le[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$A)),[[vModelCheckbox,unref(k)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":le[5]||(le[5]=ue=>isRef(k)?k.value=ue:null),class:normalizeClass(unref(V).be("button","original")),type:"checkbox",name:oe.name,tabindex:oe.tabindex,disabled:unref(y),value:oe.label,onChange:le[6]||(le[6]=(...ue)=>unref(L)&&unref(L)(...ue)),onFocus:le[7]||(le[7]=ue=>n.value=!0),onBlur:le[8]||(le[8]=ue=>n.value=!1),onClick:le[9]||(le[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$m)),[[vModelCheckbox,unref(k)]]),oe.$slots.default||oe.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(V).be("button","inner")),style:normalizeStyle(unref(g)?unref(z):void 0)},[renderSlot(oe.$slots,"default",{},()=>[createTextVNode(toDisplayString(oe.label),1)])],6)):createCommentVNode("v-if",!0)],2))}});var CheckboxButton=_export_sfc$1(_sfc_main$Z,[["__file","checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:t=>isArray$3(t),change:t=>isArray$3(t)},__default__$w=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$Y=defineComponent({...__default__$w,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("checkbox"),{formItem:g}=useFormItem(),{inputId:y,isLabeledByFormItem:i}=useFormItemInputId(e,{formItemContext:g}),k=async $=>{r(UPDATE_MODEL_EVENT,$),await nextTick(),r("change",$)},L=computed({get(){return e.modelValue},set($){k($)}});return provide(checkboxGroupContextKey,{...pick$1(toRefs(e),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:L,changeEvent:k}),watch(()=>e.modelValue,()=>{e.validateEvent&&(g==null||g.validate("change").catch($=>void 0))}),($,V)=>{var z;return openBlock(),createBlock(resolveDynamicComponent($.tag),{id:unref(y),class:normalizeClass(unref(n).b("group")),role:"group","aria-label":unref(i)?void 0:$.label||"checkbox-group","aria-labelledby":unref(i)?(z=unref(g))==null?void 0:z.labelId:void 0},{default:withCtx(()=>[renderSlot($.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc$1(_sfc_main$Y,[["__file","checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup});withNoopInstall(CheckboxButton);const ElCheckboxGroup$1=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),radioProps=buildProps({...radioPropsBase,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t),[CHANGE_EVENT]:t=>isString$2(t)||isNumber$1(t)||isBoolean$1(t)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(t,r)=>{const e=ref(),n=inject(radioGroupKey,void 0),g=computed(()=>!!n),y=computed({get(){return g.value?n.modelValue:t.modelValue},set(V){g.value?n.changeEvent(V):r&&r(UPDATE_MODEL_EVENT,V),e.value.checked=t.modelValue===t.label}}),i=useFormSize(computed(()=>n==null?void 0:n.size)),k=useFormDisabled(computed(()=>n==null?void 0:n.disabled)),L=ref(!1),$=computed(()=>k.value||g.value&&y.value!==t.label?-1:0);return{radioRef:e,isGroup:g,radioGroup:n,focus:L,size:i,disabled:k,tabIndex:$,modelValue:y}},_hoisted_1$z=["value","name","disabled"],__default__$v=defineComponent({name:"ElRadio"}),_sfc_main$X=defineComponent({...__default__$v,props:radioProps,emits:radioEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),{radioRef:g,radioGroup:y,focus:i,size:k,disabled:L,modelValue:$}=useRadio(e,r);function V(){nextTick(()=>r("change",$.value))}return(z,re)=>{var oe;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(n).b(),unref(n).is("disabled",unref(L)),unref(n).is("focus",unref(i)),unref(n).is("bordered",z.border),unref(n).is("checked",unref($)===z.label),unref(n).m(unref(k))])},[createBaseVNode("span",{class:normalizeClass([unref(n).e("input"),unref(n).is("disabled",unref(L)),unref(n).is("checked",unref($)===z.label)])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:g,"onUpdate:modelValue":re[0]||(re[0]=le=>isRef($)?$.value=le:null),class:normalizeClass(unref(n).e("original")),value:z.label,name:z.name||((oe=unref(y))==null?void 0:oe.name),disabled:unref(L),type:"radio",onFocus:re[1]||(re[1]=le=>i.value=!0),onBlur:re[2]||(re[2]=le=>i.value=!1),onChange:V,onClick:re[3]||(re[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$z),[[vModelRadio,unref($)]]),createBaseVNode("span",{class:normalizeClass(unref(n).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(n).e("label")),onKeydown:re[4]||(re[4]=withModifiers(()=>{},["stop"]))},[renderSlot(z.$slots,"default",{},()=>[createTextVNode(toDisplayString(z.label),1)])],34)],2)}}});var Radio=_export_sfc$1(_sfc_main$X,[["__file","radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase,name:{type:String,default:""}}),_hoisted_1$y=["value","name","disabled"],__default__$u=defineComponent({name:"ElRadioButton"}),_sfc_main$W=defineComponent({...__default__$u,props:radioButtonProps,setup(t){const r=t,e=useNamespace("radio"),{radioRef:n,focus:g,size:y,disabled:i,modelValue:k,radioGroup:L}=useRadio(r),$=computed(()=>({backgroundColor:(L==null?void 0:L.fill)||"",borderColor:(L==null?void 0:L.fill)||"",boxShadow:L!=null&&L.fill?`-1px 0 0 0 ${L.fill}`:"",color:(L==null?void 0:L.textColor)||""}));return(V,z)=>{var re;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(e).b("button"),unref(e).is("active",unref(k)===V.label),unref(e).is("disabled",unref(i)),unref(e).is("focus",unref(g)),unref(e).bm("button",unref(y))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":z[0]||(z[0]=oe=>isRef(k)?k.value=oe:null),class:normalizeClass(unref(e).be("button","original-radio")),value:V.label,type:"radio",name:V.name||((re=unref(L))==null?void 0:re.name),disabled:unref(i),onFocus:z[1]||(z[1]=oe=>g.value=!0),onBlur:z[2]||(z[2]=oe=>g.value=!1),onClick:z[3]||(z[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$y),[[vModelRadio,unref(k)]]),createBaseVNode("span",{class:normalizeClass(unref(e).be("button","inner")),style:normalizeStyle(unref(k)===V.label?unref($):{}),onKeydown:z[4]||(z[4]=withModifiers(()=>{},["stop"]))},[renderSlot(V.$slots,"default",{},()=>[createTextVNode(toDisplayString(V.label),1)])],38)],2)}}});var RadioButton=_export_sfc$1(_sfc_main$W,[["__file","radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),radioGroupEmits=radioEmits,_hoisted_1$x=["id","aria-label","aria-labelledby"],__default__$t=defineComponent({name:"ElRadioGroup"}),_sfc_main$V=defineComponent({...__default__$t,props:radioGroupProps,emits:radioGroupEmits,setup(t,{emit:r}){const e=t,n=useNamespace("radio"),g=useId(),y=ref(),{formItem:i}=useFormItem(),{inputId:k,isLabeledByFormItem:L}=useFormItemInputId(e,{formItemContext:i}),$=z=>{r(UPDATE_MODEL_EVENT,z),nextTick(()=>r("change",z))};onMounted(()=>{const z=y.value.querySelectorAll("[type=radio]"),re=z[0];!Array.from(z).some(oe=>oe.checked)&&re&&(re.tabIndex=0)});const V=computed(()=>e.name||g.value);return provide(radioGroupKey,reactive({...toRefs(e),changeEvent:$,name:V})),watch(()=>e.modelValue,()=>{e.validateEvent&&(i==null||i.validate("change").catch(z=>void 0))}),(z,re)=>(openBlock(),createElementBlock("div",{id:unref(k),ref_key:"radioGroupRef",ref:y,class:normalizeClass(unref(n).b("group")),role:"radiogroup","aria-label":unref(L)?void 0:z.label||"radio-group","aria-labelledby":unref(L)?unref(i).labelId:void 0},[renderSlot(z.$slots,"default")],10,_hoisted_1$x))}});var RadioGroup=_export_sfc$1(_sfc_main$V,[["__file","radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup}),ElRadioGroup=withNoopInstall(RadioGroup);withNoopInstall(RadioButton);var NodeContent=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:t}=this,{node:r,panel:e}=this.$parent,{data:n,label:g}=r,{renderLabelFn:y}=e;return h$1("span",{class:t.e("label")},y?y({node:r,data:n}):g)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$U=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:r}){const e=inject(CASCADER_PANEL_INJECTION_KEY),n=useNamespace("cascader-node"),g=computed(()=>e.isHoverMenu),y=computed(()=>e.config.multiple),i=computed(()=>e.config.checkStrictly),k=computed(()=>{var kt;return(kt=e.checkedNodes[0])==null?void 0:kt.uid}),L=computed(()=>t.node.isDisabled),$=computed(()=>t.node.isLeaf),V=computed(()=>i.value&&!$.value||!L.value),z=computed(()=>oe(e.expandingNode)),re=computed(()=>i.value&&e.checkedNodes.some(oe)),oe=kt=>{var At;const{level:ze,uid:Et}=t.node;return((At=kt==null?void 0:kt.pathNodes[ze-1])==null?void 0:At.uid)===Et},le=()=>{z.value||e.expandNode(t.node)},ue=kt=>{const{node:At}=t;kt!==At.checked&&e.handleCheckChange(At,kt)},ie=()=>{e.lazyLoad(t.node,()=>{$.value||le()})},ae=kt=>{g.value&&(Fe(),!$.value&&r("expand",kt))},Fe=()=>{const{node:kt}=t;!V.value||kt.loading||(kt.loaded?le():ie())},de=()=>{g.value&&!$.value||($.value&&!L.value&&!i.value&&!y.value?Ve(!0):Fe())},Ie=kt=>{i.value?(ue(kt),t.node.loaded&&le()):Ve(kt)},Ve=kt=>{t.node.loaded?(ue(kt),!i.value&&le()):ie()};return{panel:e,isHoverMenu:g,multiple:y,checkStrictly:i,checkedNodeId:k,isDisabled:L,isLeaf:$,expandable:V,inExpandingPath:z,inCheckedPath:re,ns:n,handleHoverExpand:ae,handleExpand:Fe,handleClick:de,handleCheck:Ve,handleSelectCheck:Ie}}}),_hoisted_1$w=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$l=createBaseVNode("span",null,null,-1);function _sfc_render$c(t,r,e,n,g,y){const i=resolveComponent("el-checkbox"),k=resolveComponent("el-radio"),L=resolveComponent("check"),$=resolveComponent("el-icon"),V=resolveComponent("node-content"),z=resolveComponent("loading"),re=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:normalizeClass([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:r[2]||(r[2]=(...oe)=>t.handleHoverExpand&&t.handleHoverExpand(...oe)),onFocus:r[3]||(r[3]=(...oe)=>t.handleHoverExpand&&t.handleHoverExpand(...oe)),onClick:r[4]||(r[4]=(...oe)=>t.handleClick&&t.handleClick(...oe))},[createCommentVNode(" prefix "),t.multiple?(openBlock(),createBlock(i,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:r[0]||(r[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(openBlock(),createBlock(k,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:r[1]||(r[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$l]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(openBlock(),createBlock($,{key:2,class:normalizeClass(t.ns.e("prefix"))},{default:withCtx(()=>[createVNode(L)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(V),createCommentVNode(" postfix "),t.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[t.node.loading?(openBlock(),createBlock($,{key:0,class:normalizeClass([t.ns.is("loading"),t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(z)]),_:1},8,["class"])):(openBlock(),createBlock($,{key:1,class:normalizeClass(["arrow-right",t.ns.e("postfix")])},{default:withCtx(()=>[createVNode(re)]),_:1},8,["class"]))],64))],42,_hoisted_1$w)}var ElCascaderNode=_export_sfc$1(_sfc_main$U,[["render",_sfc_render$c],["__file","node.vue"]]);const _sfc_main$T=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const r=getCurrentInstance(),e=useNamespace("cascader-menu"),{t:n}=useLocale(),g=useId();let y=null,i=null;const k=inject(CASCADER_PANEL_INJECTION_KEY),L=ref(null),$=computed(()=>!t.nodes.length),V=computed(()=>!k.initialLoaded),z=computed(()=>`${g.value}-${t.index}`),re=ie=>{y=ie.target},oe=ie=>{if(!(!k.isHoverMenu||!y||!L.value))if(y.contains(ie.target)){le();const ae=r.vnode.el,{left:Fe}=ae.getBoundingClientRect(),{offsetWidth:de,offsetHeight:Ie}=ae,Ve=ie.clientX-Fe,kt=y.offsetTop,At=kt+y.offsetHeight;L.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${Ve} ${kt} L${de} 0 V${kt} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${Ve} ${At} L${de} ${Ie} V${At} Z" />
        `}else i||(i=window.setTimeout(ue,k.config.hoverThreshold))},le=()=>{i&&(clearTimeout(i),i=null)},ue=()=>{L.value&&(L.value.innerHTML="",le())};return{ns:e,panel:k,hoverZone:L,isEmpty:$,isLoading:V,menuId:z,t:n,handleExpand:re,handleMouseMove:oe,clearHoverZone:ue}}});function _sfc_render$b(t,r,e,n,g,y){const i=resolveComponent("el-cascader-node"),k=resolveComponent("loading"),L=resolveComponent("el-icon"),$=resolveComponent("el-scrollbar");return openBlock(),createBlock($,{key:t.menuId,tag:"ul",role:"menu",class:normalizeClass(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:withCtx(()=>{var V;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.nodes,z=>(openBlock(),createBlock(i,{key:z.uid,node:z,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.e("empty-text"))},[createVNode(L,{size:"14",class:normalizeClass(t.ns.is("loading"))},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("empty-text"))},toDisplayString(t.t("el.cascader.noData")),3)):(V=t.panel)!=null&&V.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(t.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc$1(_sfc_main$T,[["render",_sfc_render$b],["__file","menu.vue"]]);let uid=0;const calculatePathNodes=t=>{const r=[t];let{parent:e}=t;for(;e;)r.unshift(e),e=e.parent;return r};class Node{constructor(r,e,n,g=!1){this.data=r,this.config=e,this.parent=n,this.root=g,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:y,label:i,children:k}=e,L=r[k],$=calculatePathNodes(this);this.level=g?0:n?n.level+1:1,this.value=r[y],this.label=r[i],this.pathNodes=$,this.pathValues=$.map(V=>V.value),this.pathLabels=$.map(V=>V.label),this.childrenData=L,this.children=(L||[]).map(V=>new Node(V,e,this)),this.loaded=!e.lazy||this.isLeaf||!isEmpty(L)}get isDisabled(){const{data:r,parent:e,config:n}=this,{disabled:g,checkStrictly:y}=n;return(isFunction$3(g)?g(r,this):!!r[g])||!y&&(e==null?void 0:e.isDisabled)}get isLeaf(){const{data:r,config:e,childrenData:n,loaded:g}=this,{lazy:y,leaf:i}=e,k=isFunction$3(i)?i(r,this):r[i];return isUndefined$1(k)?y&&!g?!1:!(Array.isArray(n)&&n.length):!!k}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(r){const{childrenData:e,children:n}=this,g=new Node(r,this.config,this);return Array.isArray(e)?e.push(r):this.childrenData=[r],n.push(g),g}calcText(r,e){const n=r?this.pathLabels.join(e):this.label;return this.text=n,n}broadcast(r,...e){const n=`onParent${capitalize(r)}`;this.children.forEach(g=>{g&&(g.broadcast(r,...e),g[n]&&g[n](...e))})}emit(r,...e){const{parent:n}=this,g=`onChild${capitalize(r)}`;n&&(n[g]&&n[g](...e),n.emit(r,...e))}onParentCheck(r){this.isDisabled||this.setCheckState(r)}onChildCheck(){const{children:r}=this,e=r.filter(g=>!g.isDisabled),n=e.length?e.every(g=>g.checked):!1;this.setCheckState(n)}setCheckState(r){const e=this.children.length,n=this.children.reduce((g,y)=>{const i=y.checked?1:y.indeterminate?.5:0;return g+i},0);this.checked=this.loaded&&this.children.filter(g=>!g.isDisabled).every(g=>g.loaded&&g.checked)&&r,this.indeterminate=this.loaded&&n!==e&&n>0}doCheck(r){if(this.checked===r)return;const{checkStrictly:e,multiple:n}=this.config;e||!n?this.checked=r:(this.broadcast("check",r),this.setCheckState(r),this.emit("check"))}}const flatNodes=(t,r)=>t.reduce((e,n)=>(n.isLeaf?e.push(n):(!r&&e.push(n),e=e.concat(flatNodes(n.children,r))),e),[]);class Store{constructor(r,e){this.config=e;const n=(r||[]).map(g=>new Node(g,this.config));this.nodes=n,this.allNodes=flatNodes(n,!1),this.leafNodes=flatNodes(n,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const n=e?e.appendChild(r):new Node(r,this.config);e||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(r,e){r.forEach(n=>this.appendNode(n,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(g=>isEqual(g.value,r)||isEqual(g.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:n,level:g})=>isEqual(r.value,n)&&r.level===g)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=t=>computed(()=>({...DefaultProps,...t.props})),getMenuIndex=t=>{if(!t)return 0;const r=t.id.split("-");return Number(r[r.length-2])},checkNode=t=>{if(!t)return;const r=t.querySelector("input");r?r.click():isLeaf(t)&&t.click()},sortByOriginalOrder=(t,r)=>{const e=r.slice(0),n=e.map(y=>y.uid),g=t.reduce((y,i)=>{const k=n.indexOf(i.uid);return k>-1&&(y.push(i),e.splice(k,1),n.splice(k,1)),y},[]);return g.push(...e),g},_sfc_main$S=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(t,{emit:r,slots:e}){let n=!1;const g=useNamespace("cascader"),y=useCascaderConfig(t);let i=null;const k=ref(!0),L=ref([]),$=ref(null),V=ref([]),z=ref(null),re=ref([]),oe=computed(()=>y.value.expandTrigger==="hover"),le=computed(()=>t.renderLabel||e.default),ue=()=>{const{options:or}=t,dr=y.value;n=!1,i=new Store(or,dr),V.value=[i.getNodes()],dr.lazy&&isEmpty(t.options)?(k.value=!1,ie(void 0,lr=>{lr&&(i=new Store(lr,dr),V.value=[i.getNodes()]),k.value=!0,ze(!1,!0)})):ze(!1,!0)},ie=(or,dr)=>{const lr=y.value;or=or||new Node({},lr,void 0,!0),or.loading=!0;const nr=ur=>{const ar=or,gr=ar.root?null:ar;ur&&(i==null||i.appendNodes(ur,gr)),ar.loading=!1,ar.loaded=!0,ar.childrenData=ar.childrenData||[],dr&&dr(ur)};lr.lazyLoad(or,nr)},ae=(or,dr)=>{var lr;const{level:nr}=or,ur=V.value.slice(0,nr);let ar;or.isLeaf?ar=or.pathNodes[nr-2]:(ar=or,ur.push(or.children)),((lr=z.value)==null?void 0:lr.uid)!==(ar==null?void 0:ar.uid)&&(z.value=or,V.value=ur,!dr&&r("expand-change",(or==null?void 0:or.pathValues)||[]))},Fe=(or,dr,lr=!0)=>{const{checkStrictly:nr,multiple:ur}=y.value,ar=re.value[0];n=!0,!ur&&(ar==null||ar.doCheck(!1)),or.doCheck(dr),At(),lr&&!ur&&!nr&&r("close"),!lr&&!ur&&!nr&&de(or)},de=or=>{or&&(or=or.parent,de(or),or&&ae(or))},Ie=or=>i==null?void 0:i.getFlattedNodes(or),Ve=or=>{var dr;return(dr=Ie(or))==null?void 0:dr.filter(lr=>lr.checked!==!1)},kt=()=>{re.value.forEach(or=>or.doCheck(!1)),At(),V.value=V.value.slice(0,1),z.value=null,r("expand-change",[])},At=()=>{var or;const{checkStrictly:dr,multiple:lr}=y.value,nr=re.value,ur=Ve(!dr),ar=sortByOriginalOrder(nr,ur),gr=ar.map(pr=>pr.valueByOption);re.value=ar,$.value=lr?gr:(or=gr[0])!=null?or:null},ze=(or=!1,dr=!1)=>{const{modelValue:lr}=t,{lazy:nr,multiple:ur,checkStrictly:ar}=y.value,gr=!ar;if(!(!k.value||n||!dr&&isEqual(lr,$.value)))if(nr&&!or){const hr=unique(flattenDeep(castArray(lr))).map(Cr=>i==null?void 0:i.getNodeByValue(Cr)).filter(Cr=>!!Cr&&!Cr.loaded&&!Cr.loading);hr.length?hr.forEach(Cr=>{ie(Cr,()=>ze(!1,dr))}):ze(!0,dr)}else{const pr=ur?castArray(lr):[lr],hr=unique(pr.map(Cr=>i==null?void 0:i.getNodeByValue(Cr,gr)));Et(hr,dr),$.value=cloneDeep(lr)}},Et=(or,dr=!0)=>{const{checkStrictly:lr}=y.value,nr=re.value,ur=or.filter(pr=>!!pr&&(lr||pr.isLeaf)),ar=i==null?void 0:i.getSameNode(z.value),gr=dr&&ar||ur[0];gr?gr.pathNodes.forEach(pr=>ae(pr,!0)):z.value=null,nr.forEach(pr=>pr.doCheck(!1)),t.props.multiple?reactive(ur).forEach(pr=>pr.doCheck(!0)):ur.forEach(pr=>pr.doCheck(!0)),re.value=ur,nextTick(cr)},cr=()=>{isClient&&L.value.forEach(or=>{const dr=or==null?void 0:or.$el;if(dr){const lr=dr.querySelector(`.${g.namespace.value}-scrollbar__wrap`),nr=dr.querySelector(`.${g.b("node")}.${g.is("active")}`)||dr.querySelector(`.${g.b("node")}.in-active-path`);scrollIntoView(lr,nr)}})},er=or=>{const dr=or.target,{code:lr}=or;switch(lr){case EVENT_CODE.up:case EVENT_CODE.down:{or.preventDefault();const nr=lr===EVENT_CODE.up?-1:1;focusNode(getSibling(dr,nr,`.${g.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{or.preventDefault();const nr=L.value[getMenuIndex(dr)-1],ur=nr==null?void 0:nr.$el.querySelector(`.${g.b("node")}[aria-expanded="true"]`);focusNode(ur);break}case EVENT_CODE.right:{or.preventDefault();const nr=L.value[getMenuIndex(dr)+1],ur=nr==null?void 0:nr.$el.querySelector(`.${g.b("node")}[tabindex="-1"]`);focusNode(ur);break}case EVENT_CODE.enter:checkNode(dr);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:y,expandingNode:z,checkedNodes:re,isHoverMenu:oe,initialLoaded:k,renderLabelFn:le,lazyLoad:ie,expandNode:ae,handleCheckChange:Fe})),watch([y,()=>t.options],ue,{deep:!0,immediate:!0}),watch(()=>t.modelValue,()=>{n=!1,ze()},{deep:!0}),watch(()=>$.value,or=>{isEqual(or,t.modelValue)||(r(UPDATE_MODEL_EVENT,or),r(CHANGE_EVENT,or))}),onBeforeUpdate(()=>L.value=[]),onMounted(()=>!isEmpty(t.modelValue)&&ze()),{ns:g,menuList:L,menus:V,checkedNodes:re,handleKeyDown:er,handleCheckChange:Fe,getFlattedNodes:Ie,getCheckedNodes:Ve,clearCheckedNodes:kt,calculateCheckedValue:At,scrollToExpandingNode:cr}}});function _sfc_render$a(t,r,e,n,g,y){const i=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:r[0]||(r[0]=(...k)=>t.handleKeyDown&&t.handleKeyDown(...k))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.menus,(k,L)=>(openBlock(),createBlock(i,{key:L,ref_for:!0,ref:$=>t.menuList[L]=$,index:L,nodes:[...k]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc$1(_sfc_main$S,[["render",_sfc_render$a],["__file","index.vue"]]);CascaderPanel.install=t=>{t.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,tagProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:componentSizes},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},__default__$s=defineComponent({name:"ElTag"}),_sfc_main$R=defineComponent({...__default__$s,props:tagProps,emits:tagEmits,setup(t,{emit:r}){const e=t,n=useFormSize(),g=useNamespace("tag"),y=computed(()=>{const{type:L,hit:$,effect:V,closable:z,round:re}=e;return[g.b(),g.is("closable",z),g.m(L||"primary"),g.m(n.value),g.m(V),g.is("hit",$),g.is("round",re)]}),i=L=>{r("close",L)},k=L=>{r("click",L)};return(L,$)=>L.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(y)),style:normalizeStyle({backgroundColor:L.color}),onClick:k},[createBaseVNode("span",{class:normalizeClass(unref(g).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("close")),onClick:withModifiers(i,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(g).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(y)),style:normalizeStyle({backgroundColor:L.color}),onClick:k},[createBaseVNode("span",{class:normalizeClass(unref(g).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("close")),onClick:withModifiers(i,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag=_export_sfc$1(_sfc_main$R,[["__file","tag.vue"]]);const ElTag=withInstall(Tag),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(t,r)=>t.text.includes(r)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),cascaderEmits={[UPDATE_MODEL_EVENT]:t=>!!t||t===null,[CHANGE_EVENT]:t=>!!t||t===null,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>isBoolean$1(t),expandChange:t=>!!t,removeTag:t=>!!t},_hoisted_1$v={key:0},_hoisted_2$k=["placeholder","onKeydown"],_hoisted_3$c=["onClick"],COMPONENT_NAME$6="ElCascader",__default__$r=defineComponent({name:COMPONENT_NAME$6}),_sfc_main$Q=defineComponent({...__default__$r,props:cascaderProps,emits:cascaderEmits,setup(t,{expose:r,emit:e}){const n=t,g={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Cn})=>{const{modifiersData:vn,placement:no}=Cn;["right","left","bottom","top"].includes(no)||(vn.arrow.x=35)},requires:["arrow"]}]},y=useAttrs$1();let i=0,k=0;const L=useNamespace("cascader"),$=useNamespace("input"),{t:V}=useLocale(),{form:z,formItem:re}=useFormItem(),oe=ref(null),le=ref(null),ue=ref(null),ie=ref(null),ae=ref(null),Fe=ref(!1),de=ref(!1),Ie=ref(!1),Ve=ref(!1),kt=ref(""),At=ref(""),ze=ref([]),Et=ref([]),cr=ref([]),er=ref(!1),or=computed(()=>y.style),dr=computed(()=>n.disabled||(z==null?void 0:z.disabled)),lr=computed(()=>n.placeholder||V("el.cascader.placeholder")),nr=computed(()=>At.value||ze.value.length>0||er.value?"":lr.value),ur=useFormSize(),ar=computed(()=>["small"].includes(ur.value)?"small":"default"),gr=computed(()=>!!n.props.multiple),pr=computed(()=>!n.filterable||gr.value),hr=computed(()=>gr.value?At.value:kt.value),Cr=computed(()=>{var Cn;return((Cn=ie.value)==null?void 0:Cn.checkedNodes)||[]}),wr=computed(()=>!n.clearable||dr.value||Ie.value||!de.value?!1:!!Cr.value.length),Sr=computed(()=>{const{showAllLevels:Cn,separator:vn}=n,no=Cr.value;return no.length?gr.value?"":no[0].calcText(Cn,vn):""}),mr=computed({get(){return cloneDeep(n.modelValue)},set(Cn){e(UPDATE_MODEL_EVENT,Cn),e(CHANGE_EVENT,Cn),n.validateEvent&&(re==null||re.validate("change").catch(vn=>void 0))}}),_r=computed(()=>[L.b(),L.m(ur.value),L.is("disabled",dr.value),y.class]),Ar=computed(()=>[$.e("icon"),"icon-arrow-down",L.is("reverse",Fe.value)]),Er=computed(()=>L.is("focus",Fe.value||Ve.value)),sr=computed(()=>{var Cn,vn;return(vn=(Cn=oe.value)==null?void 0:Cn.popperRef)==null?void 0:vn.contentRef}),xr=Cn=>{var vn,no,Ro;dr.value||(Cn=Cn??!Fe.value,Cn!==Fe.value&&(Fe.value=Cn,(no=(vn=le.value)==null?void 0:vn.input)==null||no.setAttribute("aria-expanded",`${Cn}`),Cn?(Nr(),nextTick((Ro=ie.value)==null?void 0:Ro.scrollToExpandingNode)):n.filterable&&Xr(),e("visibleChange",Cn)))},Nr=()=>{nextTick(()=>{var Cn;(Cn=oe.value)==null||Cn.updatePopper()})},Mr=()=>{Ie.value=!1},br=Cn=>{const{showAllLevels:vn,separator:no}=n;return{node:Cn,key:Cn.uid,text:Cn.calcText(vn,no),hitState:!1,closable:!dr.value&&!Cn.isDisabled,isCollapseTag:!1}},yr=Cn=>{var vn;const no=Cn.node;no.doCheck(!1),(vn=ie.value)==null||vn.calculateCheckedValue(),e("removeTag",no.valueByOption)},Tr=()=>{if(!gr.value)return;const Cn=Cr.value,vn=[],no=[];if(Cn.forEach(Ro=>no.push(br(Ro))),Et.value=no,Cn.length){Cn.slice(0,n.maxCollapseTags).forEach(Vo=>vn.push(br(Vo)));const Ro=Cn.slice(n.maxCollapseTags),Ho=Ro.length;Ho&&(n.collapseTags?vn.push({key:-1,text:`+ ${Ho}`,closable:!1,isCollapseTag:!0}):Ro.forEach(Vo=>vn.push(br(Vo))))}ze.value=vn},Br=()=>{var Cn,vn;const{filterMethod:no,showAllLevels:Ro,separator:Ho}=n,Vo=(vn=(Cn=ie.value)==null?void 0:Cn.getFlattedNodes(!n.props.checkStrictly))==null?void 0:vn.filter(Po=>Po.isDisabled?!1:(Po.calcText(Ro,Ho),no(Po,hr.value)));gr.value&&(ze.value.forEach(Po=>{Po.hitState=!1}),Et.value.forEach(Po=>{Po.hitState=!1})),Ie.value=!0,cr.value=Vo,Nr()},Lr=()=>{var Cn;let vn;Ie.value&&ae.value?vn=ae.value.$el.querySelector(`.${L.e("suggestion-item")}`):vn=(Cn=ie.value)==null?void 0:Cn.$el.querySelector(`.${L.b("node")}[tabindex="-1"]`),vn&&(vn.focus(),!Ie.value&&vn.click())},Fr=()=>{var Cn,vn;const no=(Cn=le.value)==null?void 0:Cn.input,Ro=ue.value,Ho=(vn=ae.value)==null?void 0:vn.$el;if(!(!isClient||!no)){if(Ho){const Vo=Ho.querySelector(`.${L.e("suggestion-list")}`);Vo.style.minWidth=`${no.offsetWidth}px`}if(Ro){const{offsetHeight:Vo}=Ro,Po=ze.value.length>0?`${Math.max(Vo+6,i)}px`:`${i}px`;no.style.height=Po,Nr()}}},qr=Cn=>{var vn;return(vn=ie.value)==null?void 0:vn.getCheckedNodes(Cn)},Vr=Cn=>{Nr(),e("expandChange",Cn)},Qr=Cn=>{var vn;const no=(vn=Cn.target)==null?void 0:vn.value;if(Cn.type==="compositionend")er.value=!1,nextTick(()=>_n(no));else{const Ro=no[no.length-1]||"";er.value=!isKorean(Ro)}},Tn=Cn=>{if(!er.value)switch(Cn.code){case EVENT_CODE.enter:xr();break;case EVENT_CODE.down:xr(!0),nextTick(Lr),Cn.preventDefault();break;case EVENT_CODE.esc:Fe.value===!0&&(Cn.preventDefault(),Cn.stopPropagation(),xr(!1));break;case EVENT_CODE.tab:xr(!1);break}},xn=()=>{var Cn;(Cn=ie.value)==null||Cn.clearCheckedNodes(),!Fe.value&&n.filterable&&Xr(),xr(!1)},Xr=()=>{const{value:Cn}=Sr;kt.value=Cn,At.value=Cn},Vn=Cn=>{var vn,no;const{checked:Ro}=Cn;gr.value?(vn=ie.value)==null||vn.handleCheckChange(Cn,!Ro,!1):(!Ro&&((no=ie.value)==null||no.handleCheckChange(Cn,!0,!1)),xr(!1))},Zr=Cn=>{const vn=Cn.target,{code:no}=Cn;switch(no){case EVENT_CODE.up:case EVENT_CODE.down:{const Ro=no===EVENT_CODE.up?-1:1;focusNode(getSibling(vn,Ro,`.${L.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:vn.click();break}},Nn=()=>{const Cn=ze.value,vn=Cn[Cn.length-1];k=At.value?0:k+1,!(!vn||!k||n.collapseTags&&Cn.length>1)&&(vn.hitState?yr(vn):vn.hitState=!0)},Jr=Cn=>{const vn=Cn.target,no=L.e("search-input");vn.className===no&&(Ve.value=!0),e("focus",Cn)},wn=Cn=>{Ve.value=!1,e("blur",Cn)},Un=debounce(()=>{const{value:Cn}=hr;if(!Cn)return;const vn=n.beforeFilter(Cn);isPromise(vn)?vn.then(Br).catch(()=>{}):vn!==!1?Br():Mr()},n.debounce),_n=(Cn,vn)=>{!Fe.value&&xr(!0),!(vn!=null&&vn.isComposing)&&(Cn?Un():Mr())},Pn=Cn=>Number.parseFloat(useCssVar($.cssVarName("input-height"),Cn).value)-2;return watch(Ie,Nr),watch([Cr,dr],Tr),watch(ze,()=>{nextTick(()=>Fr())}),watch(ur,async()=>{await nextTick();const Cn=le.value.input;i=Pn(Cn)||i,Fr()}),watch(Sr,Xr,{immediate:!0}),onMounted(()=>{const Cn=le.value.input,vn=Pn(Cn);i=Cn.offsetHeight||vn,useResizeObserver(Cn,Fr)}),r({getCheckedNodes:qr,cascaderPanelRef:ie,togglePopperVisible:xr,contentRef:sr}),(Cn,vn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:oe,visible:Fe.value,teleported:Cn.teleported,"popper-class":[unref(L).e("dropdown"),Cn.popperClass],"popper-options":g,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref(L).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Mr},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(_r)),style:normalizeStyle(unref(or)),onClick:vn[5]||(vn[5]=()=>xr(unref(pr)?void 0:!0)),onKeydown:Tn,onMouseenter:vn[6]||(vn[6]=no=>de.value=!0),onMouseleave:vn[7]||(vn[7]=no=>de.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:le,modelValue:kt.value,"onUpdate:modelValue":vn[1]||(vn[1]=no=>kt.value=no),placeholder:unref(nr),readonly:unref(pr),disabled:unref(dr),"validate-event":!1,size:unref(ur),class:normalizeClass(unref(Er)),tabindex:unref(gr)&&Cn.filterable&&!unref(dr)?-1:void 0,onCompositionstart:Qr,onCompositionupdate:Qr,onCompositionend:Qr,onFocus:Jr,onBlur:wn,onInput:_n},{suffix:withCtx(()=>[unref(wr)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref($).e("icon"),"icon-circle-close"]),onClick:withModifiers(xn,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(Ar)),onClick:vn[0]||(vn[0]=withModifiers(no=>xr(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(gr)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:ue,class:normalizeClass(unref(L).e("tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ze.value,no=>(openBlock(),createBlock(unref(ElTag),{key:no.key,type:Cn.tagType,size:unref(ar),hit:no.hitState,closable:no.closable,"disable-transitions":"",onClose:Ro=>yr(no)},{default:withCtx(()=>[no.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$v,toDisplayString(no.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:Fe.value||!Cn.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(no.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(L).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Et.value.slice(Cn.maxCollapseTags),(Ro,Ho)=>(openBlock(),createElementBlock("div",{key:Ho,class:normalizeClass(unref(L).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:Ro.key,class:"in-tooltip",type:Cn.tagType,size:unref(ar),hit:Ro.hitState,closable:Ro.closable,"disable-transitions":"",onClose:Vo=>yr(Ro)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Ro.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),Cn.filterable&&!unref(dr)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":vn[2]||(vn[2]=no=>At.value=no),type:"text",class:normalizeClass(unref(L).e("search-input")),placeholder:unref(Sr)?"":unref(lr),onInput:vn[3]||(vn[3]=no=>_n(At.value,no)),onClick:vn[4]||(vn[4]=withModifiers(no=>xr(!0),["stop"])),onKeydown:withKeys(Nn,["delete"]),onCompositionstart:Qr,onCompositionupdate:Qr,onCompositionend:Qr,onFocus:Jr,onBlur:wn},null,42,_hoisted_2$k)),[[vModelText,At.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>xr(!1),unref(sr)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:ie,modelValue:unref(mr),"onUpdate:modelValue":vn[8]||(vn[8]=no=>isRef(mr)?mr.value=no:null),options:Cn.options,props:n.props,border:!1,"render-label":Cn.$slots.default,onExpandChange:Vr,onClose:vn[9]||(vn[9]=no=>Cn.$nextTick(()=>xr(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!Ie.value]]),Cn.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:ae,tag:"ul",class:normalizeClass(unref(L).e("suggestion-panel")),"view-class":unref(L).e("suggestion-list"),onKeydown:Zr},{default:withCtx(()=>[cr.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(cr.value,no=>(openBlock(),createElementBlock("li",{key:no.uid,class:normalizeClass([unref(L).e("suggestion-item"),unref(L).is("checked",no.checked)]),tabindex:-1,onClick:Ro=>Vn(no)},[createBaseVNode("span",null,toDisplayString(no.text),1),no.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$c))),128)):renderSlot(Cn.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(L).e("empty-text"))},toDisplayString(unref(V)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Ie.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc$1(_sfc_main$Q,[["__file","cascader.vue"]]);Cascader.install=t=>{t.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$q=defineComponent({name:"ElRow"}),_sfc_main$P=defineComponent({...__default__$q,props:rowProps,setup(t){const r=t,e=useNamespace("row"),n=computed(()=>r.gutter);provide(rowContextKey,{gutter:n});const g=computed(()=>{const i={};return r.gutter&&(i.marginRight=i.marginLeft=`-${r.gutter/2}px`),i}),y=computed(()=>[e.b(),e.is(`justify-${r.justify}`,r.justify!=="start"),e.is(`align-${r.align}`,!!r.align)]);return(i,k)=>(openBlock(),createBlock(resolveDynamicComponent(i.tag),{class:normalizeClass(unref(y)),style:normalizeStyle(unref(g))},{default:withCtx(()=>[renderSlot(i.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc$1(_sfc_main$P,[["__file","row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$p=defineComponent({name:"ElCol"}),_sfc_main$O=defineComponent({...__default__$p,props:colProps,setup(t){const r=t,{gutter:e}=inject(rowContextKey,{gutter:computed(()=>0)}),n=useNamespace("col"),g=computed(()=>{const i={};return e.value&&(i.paddingLeft=i.paddingRight=`${e.value/2}px`),i}),y=computed(()=>{const i=[];return["span","offset","pull","push"].forEach($=>{const V=r[$];isNumber$1(V)&&($==="span"?i.push(n.b(`${r[$]}`)):V>0&&i.push(n.b(`${$}-${r[$]}`)))}),["xs","sm","md","lg","xl"].forEach($=>{isNumber$1(r[$])?i.push(n.b(`${$}-${r[$]}`)):isObject$2(r[$])&&Object.entries(r[$]).forEach(([V,z])=>{i.push(V!=="span"?n.b(`${$}-${V}-${z}`):n.b(`${$}-${z}`))})}),e.value&&i.push(n.is("guttered")),[n.b(),i]});return(i,k)=>(openBlock(),createBlock(resolveDynamicComponent(i.tag),{class:normalizeClass(unref(y)),style:normalizeStyle(unref(g))},{default:withCtx(()=>[renderSlot(i.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc$1(_sfc_main$O,[["__file","col.vue"]]);const ElCol=withInstall(Col),__default__$o=defineComponent({name:"ElCollapseTransition"}),_sfc_main$N=defineComponent({...__default__$o,setup(t){const r=useNamespace("collapse-transition"),e=g=>{g.style.maxHeight="",g.style.overflow=g.dataset.oldOverflow,g.style.paddingTop=g.dataset.oldPaddingTop,g.style.paddingBottom=g.dataset.oldPaddingBottom},n={beforeEnter(g){g.dataset||(g.dataset={}),g.dataset.oldPaddingTop=g.style.paddingTop,g.dataset.oldPaddingBottom=g.style.paddingBottom,g.style.height&&(g.dataset.elExistsHeight=g.style.height),g.style.maxHeight=0,g.style.paddingTop=0,g.style.paddingBottom=0},enter(g){requestAnimationFrame(()=>{g.dataset.oldOverflow=g.style.overflow,g.dataset.elExistsHeight?g.style.maxHeight=g.dataset.elExistsHeight:g.scrollHeight!==0?g.style.maxHeight=`${g.scrollHeight}px`:g.style.maxHeight=0,g.style.paddingTop=g.dataset.oldPaddingTop,g.style.paddingBottom=g.dataset.oldPaddingBottom,g.style.overflow="hidden"})},afterEnter(g){g.style.maxHeight="",g.style.overflow=g.dataset.oldOverflow},enterCancelled(g){e(g)},beforeLeave(g){g.dataset||(g.dataset={}),g.dataset.oldPaddingTop=g.style.paddingTop,g.dataset.oldPaddingBottom=g.style.paddingBottom,g.dataset.oldOverflow=g.style.overflow,g.style.maxHeight=`${g.scrollHeight}px`,g.style.overflow="hidden"},leave(g){g.scrollHeight!==0&&(g.style.maxHeight=0,g.style.paddingTop=0,g.style.paddingBottom=0)},afterLeave(g){e(g)},leaveCancelled(g){e(g)}};return(g,y)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(r).b()},toHandlers(n)),{default:withCtx(()=>[renderSlot(g.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc$1(_sfc_main$N,[["__file","collapse-transition.vue"]]);CollapseTransition.install=t=>{t.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,__default__$n=defineComponent({name:"ElContainer"}),_sfc_main$M=defineComponent({...__default__$n,props:{direction:{type:String}},setup(t){const r=t,e=useSlots(),n=useNamespace("container"),g=computed(()=>r.direction==="vertical"?!0:r.direction==="horizontal"?!1:e&&e.default?e.default().some(i=>{const k=i.type.name;return k==="ElHeader"||k==="ElFooter"}):!1);return(y,i)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(n).b(),unref(n).is("vertical",unref(g))])},[renderSlot(y.$slots,"default")],2))}});var Container=_export_sfc$1(_sfc_main$M,[["__file","container.vue"]]);const __default__$m=defineComponent({name:"ElAside"}),_sfc_main$L=defineComponent({...__default__$m,props:{width:{type:String,default:null}},setup(t){const r=t,e=useNamespace("aside"),n=computed(()=>r.width?e.cssVarBlock({width:r.width}):{});return(g,y)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Aside=_export_sfc$1(_sfc_main$L,[["__file","aside.vue"]]);const __default__$l=defineComponent({name:"ElFooter"}),_sfc_main$K=defineComponent({...__default__$l,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("footer"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(g,y)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Footer=_export_sfc$1(_sfc_main$K,[["__file","footer.vue"]]);const __default__$k=defineComponent({name:"ElHeader"}),_sfc_main$J=defineComponent({...__default__$k,props:{height:{type:String,default:null}},setup(t){const r=t,e=useNamespace("header"),n=computed(()=>r.height?e.cssVarBlock({height:r.height}):{});return(g,y)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(e).b()),style:normalizeStyle(unref(n))},[renderSlot(g.$slots,"default")],6))}});var Header=_export_sfc$1(_sfc_main$J,[["__file","header.vue"]]);const __default__$j=defineComponent({name:"ElMain"}),_sfc_main$I=defineComponent({...__default__$j,setup(t){const r=useNamespace("main");return(e,n)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(r).b())},[renderSlot(e.$slots,"default")],2))}});var Main=_export_sfc$1(_sfc_main$I,[["__file","main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer,Header,Main}),ElAside=withNoopInstall(Aside);withNoopInstall(Footer);withNoopInstall(Header);const ElMain=withNoopInstall(Main),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:t=>t instanceof MouseEvent},BLOCK="overlay";var Overlay=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(t,{slots:r,emit:e}){const n=useNamespace(BLOCK),g=L=>{e("click",L)},{onClick:y,onMousedown:i,onMouseup:k}=useSameTarget(t.customMaskEvent?void 0:g);return()=>t.mask?createVNode("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:y,onMousedown:i,onMouseup:k},[renderSlot(r,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h$1("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(r,"default")])}});const ElOverlay=Overlay,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$u=["aria-level"],_hoisted_2$j=["aria-label"],_hoisted_3$b=["id"],__default__$i=defineComponent({name:"ElDialogContent"}),_sfc_main$H=defineComponent({...__default__$i,props:dialogContentProps,emits:dialogContentEmits,setup(t){const r=t,{t:e}=useLocale(),{Close:n}=CloseComponents,{dialogRef:g,headerRef:y,bodyId:i,ns:k,style:L}=inject(dialogInjectionKey),{focusTrapRef:$}=inject(FOCUS_TRAP_INJECTION_KEY),V=computed(()=>[k.b(),k.is("fullscreen",r.fullscreen),k.is("draggable",r.draggable),k.is("align-center",r.alignCenter),{[k.m("center")]:r.center}]),z=composeRefs($,g),re=computed(()=>r.draggable),oe=computed(()=>r.overflow);return useDraggable(g,y,re,oe),(le,ue)=>(openBlock(),createElementBlock("div",{ref:unref(z),class:normalizeClass(unref(V)),style:normalizeStyle(unref(L)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:y,class:normalizeClass([unref(k).e("header"),{"show-close":le.showClose}])},[renderSlot(le.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":le.ariaLevel,class:normalizeClass(unref(k).e("title"))},toDisplayString(le.title),11,_hoisted_1$u)]),le.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(e)("el.dialog.close"),class:normalizeClass(unref(k).e("headerbtn")),type:"button",onClick:ue[0]||(ue[0]=ie=>le.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(k).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.closeIcon||unref(n))))]),_:1},8,["class"])],10,_hoisted_2$j)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref(i),class:normalizeClass(unref(k).e("body"))},[renderSlot(le.$slots,"default")],10,_hoisted_3$b),le.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(k).e("footer"))},[renderSlot(le.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc$1(_sfc_main$H,[["__file","dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,appendTo:{type:definePropType(String),default:"body"},beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(t,r)=>{var e;const g=getCurrentInstance().emit,{nextZIndex:y}=useZIndex();let i="";const k=useId(),L=useId(),$=ref(!1),V=ref(!1),z=ref(!1),re=ref((e=t.zIndex)!=null?e:y());let oe,le;const ue=useGlobalConfig("namespace",defaultNamespace),ie=computed(()=>{const nr={},ur=`--${ue.value}-dialog`;return t.fullscreen||(t.top&&(nr[`${ur}-margin-top`]=t.top),t.width&&(nr[`${ur}-width`]=addUnit(t.width))),nr}),ae=computed(()=>t.alignCenter?{display:"flex"}:{});function Fe(){g("opened")}function de(){g("closed"),g(UPDATE_MODEL_EVENT,!1),t.destroyOnClose&&(z.value=!1)}function Ie(){g("close")}function Ve(){le==null||le(),oe==null||oe(),t.openDelay&&t.openDelay>0?{stop:oe}=useTimeoutFn(()=>Et(),t.openDelay):Et()}function kt(){oe==null||oe(),le==null||le(),t.closeDelay&&t.closeDelay>0?{stop:le}=useTimeoutFn(()=>cr(),t.closeDelay):cr()}function At(){function nr(ur){ur||(V.value=!0,$.value=!1)}t.beforeClose?t.beforeClose(nr):kt()}function ze(){t.closeOnClickModal&&At()}function Et(){isClient&&($.value=!0)}function cr(){$.value=!1}function er(){g("openAutoFocus")}function or(){g("closeAutoFocus")}function dr(nr){var ur;((ur=nr.detail)==null?void 0:ur.focusReason)==="pointer"&&nr.preventDefault()}t.lockScroll&&useLockscreen($);function lr(){t.closeOnPressEscape&&At()}return watch(()=>t.modelValue,nr=>{nr?(V.value=!1,Ve(),z.value=!0,re.value=isUndefined$2(t.zIndex)?y():re.value++,nextTick(()=>{g("open"),r.value&&(r.value.scrollTop=0)})):$.value&&kt()}),watch(()=>t.fullscreen,nr=>{r.value&&(nr?(i=r.value.style.transform,r.value.style.transform=""):r.value.style.transform=i)}),onMounted(()=>{t.modelValue&&($.value=!0,z.value=!0,Ve())}),{afterEnter:Fe,afterLeave:de,beforeLeave:Ie,handleClose:At,onModalClick:ze,close:kt,doClose:cr,onOpenAutoFocus:er,onCloseAutoFocus:or,onCloseRequested:lr,onFocusoutPrevented:dr,titleId:k,bodyId:L,closed:V,style:ie,overlayDialogStyle:ae,rendered:z,visible:$,zIndex:re}},_hoisted_1$t=["aria-label","aria-labelledby","aria-describedby"],__default__$h=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$G=defineComponent({...__default__$h,props:dialogProps,emits:dialogEmits,setup(t,{expose:r}){const e=t,n=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!n.title));const g=useNamespace("dialog"),y=ref(),i=ref(),k=ref(),{visible:L,titleId:$,bodyId:V,style:z,overlayDialogStyle:re,rendered:oe,zIndex:le,afterEnter:ue,afterLeave:ie,beforeLeave:ae,handleClose:Fe,onModalClick:de,onOpenAutoFocus:Ie,onCloseAutoFocus:Ve,onCloseRequested:kt,onFocusoutPrevented:At}=useDialog(e,y);provide(dialogInjectionKey,{dialogRef:y,headerRef:i,bodyId:V,ns:g,rendered:oe,style:z});const ze=useSameTarget(de),Et=computed(()=>e.draggable&&!e.fullscreen);return r({visible:L,dialogContentRef:k}),(cr,er)=>(openBlock(),createBlock(Teleport,{to:cr.appendTo,disabled:cr.appendTo!=="body"?!1:!cr.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(ue),onAfterLeave:unref(ie),onBeforeLeave:unref(ae),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:cr.modal,"overlay-class":cr.modalClass,"z-index":unref(le)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":cr.title||void 0,"aria-labelledby":cr.title?void 0:unref($),"aria-describedby":unref(V),class:normalizeClass(`${unref(g).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(re)),onClick:er[0]||(er[0]=(...or)=>unref(ze).onClick&&unref(ze).onClick(...or)),onMousedown:er[1]||(er[1]=(...or)=>unref(ze).onMousedown&&unref(ze).onMousedown(...or)),onMouseup:er[2]||(er[2]=(...or)=>unref(ze).onMouseup&&unref(ze).onMouseup(...or))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(L),"focus-start-el":"container",onFocusAfterTrapped:unref(Ie),onFocusAfterReleased:unref(Ve),onFocusoutPrevented:unref(At),onReleaseRequested:unref(kt)},{default:withCtx(()=>[unref(oe)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:k},cr.$attrs,{center:cr.center,"align-center":cr.alignCenter,"close-icon":cr.closeIcon,draggable:unref(Et),overflow:cr.overflow,fullscreen:cr.fullscreen,"show-close":cr.showClose,title:cr.title,"aria-level":cr.headerAriaLevel,onClose:unref(Fe)}),createSlots({header:withCtx(()=>[cr.$slots.title?renderSlot(cr.$slots,"title",{key:1}):renderSlot(cr.$slots,"header",{key:0,close:unref(Fe),titleId:unref($),titleClass:unref(g).e("title")})]),default:withCtx(()=>[renderSlot(cr.$slots,"default")]),_:2},[cr.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(cr.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$t)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(L)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Dialog=_export_sfc$1(_sfc_main$G,[["__file","dialog.vue"]]);const ElDialog=withInstall(Dialog),dividerProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:definePropType(String),default:"solid"}}),__default__$g=defineComponent({name:"ElDivider"}),_sfc_main$F=defineComponent({...__default__$g,props:dividerProps,setup(t){const r=t,e=useNamespace("divider"),n=computed(()=>e.cssVar({"border-style":r.borderStyle}));return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(e).b(),unref(e).m(g.direction)]),style:normalizeStyle(unref(n)),role:"separator"},[g.$slots.default&&g.direction!=="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(e).e("text"),unref(e).is(g.contentPosition)])},[renderSlot(g.$slots,"default")],2)):createCommentVNode("v-if",!0)],6))}});var Divider=_export_sfc$1(_sfc_main$F,[["__file","divider.vue"]]);const ElDivider=withInstall(Divider),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageViewerEmits={close:()=>!0,switch:t=>isNumber$1(t),rotate:t=>isNumber$1(t)},_hoisted_1$s=["src","crossorigin"],__default__$f=defineComponent({name:"ElImageViewer"}),_sfc_main$E=defineComponent({...__default__$f,props:imageViewerProps,emits:imageViewerEmits,setup(t,{expose:r,emit:e}){var n;const g=t,y={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:i}=useLocale(),k=useNamespace("image-viewer"),{nextZIndex:L}=useZIndex(),$=ref(),V=ref([]),z=effectScope(),re=ref(!0),oe=ref(g.initialIndex),le=shallowRef(y.CONTAIN),ue=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ie=ref((n=g.zIndex)!=null?n:L()),ae=computed(()=>{const{urlList:hr}=g;return hr.length<=1}),Fe=computed(()=>oe.value===0),de=computed(()=>oe.value===g.urlList.length-1),Ie=computed(()=>g.urlList[oe.value]),Ve=computed(()=>[k.e("btn"),k.e("prev"),k.is("disabled",!g.infinite&&Fe.value)]),kt=computed(()=>[k.e("btn"),k.e("next"),k.is("disabled",!g.infinite&&de.value)]),At=computed(()=>{const{scale:hr,deg:Cr,offsetX:wr,offsetY:Sr,enableTransition:mr}=ue.value;let _r=wr/hr,Ar=Sr/hr;switch(Cr%360){case 90:case-270:[_r,Ar]=[Ar,-_r];break;case 180:case-180:[_r,Ar]=[-_r,-Ar];break;case 270:case-90:[_r,Ar]=[-Ar,_r];break}const Er={transform:`scale(${hr}) rotate(${Cr}deg) translate(${_r}px, ${Ar}px)`,transition:mr?"transform .3s":""};return le.value.name===y.CONTAIN.name&&(Er.maxWidth=Er.maxHeight="100%"),Er});function ze(){cr(),e("close")}function Et(){const hr=throttle(wr=>{switch(wr.code){case EVENT_CODE.esc:g.closeOnPressEscape&&ze();break;case EVENT_CODE.space:nr();break;case EVENT_CODE.left:ar();break;case EVENT_CODE.up:pr("zoomIn");break;case EVENT_CODE.right:gr();break;case EVENT_CODE.down:pr("zoomOut");break}}),Cr=throttle(wr=>{const Sr=wr.deltaY||wr.deltaX;pr(Sr<0?"zoomIn":"zoomOut",{zoomRate:g.zoomRate,enableTransition:!1})});z.run(()=>{useEventListener(document,"keydown",hr),useEventListener(document,"wheel",Cr)})}function cr(){z.stop()}function er(){re.value=!1}function or(hr){re.value=!1,hr.target.alt=i("el.image.error")}function dr(hr){if(re.value||hr.button!==0||!$.value)return;ue.value.enableTransition=!1;const{offsetX:Cr,offsetY:wr}=ue.value,Sr=hr.pageX,mr=hr.pageY,_r=throttle(Er=>{ue.value={...ue.value,offsetX:Cr+Er.pageX-Sr,offsetY:wr+Er.pageY-mr}}),Ar=useEventListener(document,"mousemove",_r);useEventListener(document,"mouseup",()=>{Ar()}),hr.preventDefault()}function lr(){ue.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function nr(){if(re.value)return;const hr=keysOf(y),Cr=Object.values(y),wr=le.value.name,mr=(Cr.findIndex(_r=>_r.name===wr)+1)%hr.length;le.value=y[hr[mr]],lr()}function ur(hr){const Cr=g.urlList.length;oe.value=(hr+Cr)%Cr}function ar(){Fe.value&&!g.infinite||ur(oe.value-1)}function gr(){de.value&&!g.infinite||ur(oe.value+1)}function pr(hr,Cr={}){if(re.value)return;const{minScale:wr,maxScale:Sr}=g,{zoomRate:mr,rotateDeg:_r,enableTransition:Ar}={zoomRate:g.zoomRate,rotateDeg:90,enableTransition:!0,...Cr};switch(hr){case"zoomOut":ue.value.scale>wr&&(ue.value.scale=Number.parseFloat((ue.value.scale/mr).toFixed(3)));break;case"zoomIn":ue.value.scale<Sr&&(ue.value.scale=Number.parseFloat((ue.value.scale*mr).toFixed(3)));break;case"clockwise":ue.value.deg+=_r,e("rotate",ue.value.deg);break;case"anticlockwise":ue.value.deg-=_r,e("rotate",ue.value.deg);break}ue.value.enableTransition=Ar}return watch(Ie,()=>{nextTick(()=>{const hr=V.value[0];hr!=null&&hr.complete||(re.value=!0)})}),watch(oe,hr=>{lr(),e("switch",hr)}),onMounted(()=>{var hr,Cr;Et(),(Cr=(hr=$.value)==null?void 0:hr.focus)==null||Cr.call(hr)}),r({setActiveItem:ur}),(hr,Cr)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!hr.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:$,tabindex:-1,class:normalizeClass(unref(k).e("wrapper")),style:normalizeStyle({zIndex:ie.value})},[createBaseVNode("div",{class:normalizeClass(unref(k).e("mask")),onClick:Cr[0]||(Cr[0]=withModifiers(wr=>hr.hideOnClickModal&&ze(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(k).e("btn"),unref(k).e("close")]),onClick:ze},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(ae)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(Ve)),onClick:ar},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(kt)),onClick:gr},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(k).e("btn"),unref(k).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(k).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:Cr[1]||(Cr[1]=wr=>pr("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:Cr[2]||(Cr[2]=wr=>pr("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(k).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:nr},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(le).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(k).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:Cr[3]||(Cr[3]=wr=>pr("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:Cr[4]||(Cr[4]=wr=>pr("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(k).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(hr.urlList,(wr,Sr)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:mr=>V.value[Sr]=mr,key:wr,src:wr,style:normalizeStyle(unref(At)),class:normalizeClass(unref(k).e("img")),crossorigin:hr.crossorigin,onLoad:er,onError:or,onMousedown:dr},null,46,_hoisted_1$s)),[[vShow,Sr===oe.value]])),128))],2),renderSlot(hr.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc$1(_sfc_main$E,[["__file","image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageEmits={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>isNumber$1(t),close:()=>!0,show:()=>!0},_hoisted_1$r=["src","loading","crossorigin"],_hoisted_2$i={key:0},__default__$e=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$D=defineComponent({...__default__$e,props:imageProps,emits:imageEmits,setup(t,{emit:r}){const e=t;let n="";const{t:g}=useLocale(),y=useNamespace("image"),i=useAttrs$1(),k=useAttrs(),L=ref(),$=ref(!1),V=ref(!0),z=ref(!1),re=ref(),oe=ref(),le=isClient&&"loading"in HTMLImageElement.prototype;let ue,ie;const ae=computed(()=>[y.e("inner"),Ie.value&&y.e("preview"),V.value&&y.is("loading")]),Fe=computed(()=>i.style),de=computed(()=>{const{fit:gr}=e;return isClient&&gr?{objectFit:gr}:{}}),Ie=computed(()=>{const{previewSrcList:gr}=e;return Array.isArray(gr)&&gr.length>0}),Ve=computed(()=>{const{previewSrcList:gr,initialIndex:pr}=e;let hr=pr;return pr>gr.length-1&&(hr=0),hr}),kt=computed(()=>e.loading==="eager"?!1:!le&&e.loading==="lazy"||e.lazy),At=()=>{isClient&&(V.value=!0,$.value=!1,L.value=e.src)};function ze(gr){V.value=!1,$.value=!1,r("load",gr)}function Et(gr){V.value=!1,$.value=!0,r("error",gr)}function cr(){isInContainer(re.value,oe.value)&&(At(),dr())}const er=useThrottleFn(cr,200,!0);async function or(){var gr;if(!isClient)return;await nextTick();const{scrollContainer:pr}=e;isElement(pr)?oe.value=pr:isString$2(pr)&&pr!==""?oe.value=(gr=document.querySelector(pr))!=null?gr:void 0:re.value&&(oe.value=getScrollContainer(re.value)),oe.value&&(ue=useEventListener(oe,"scroll",er),setTimeout(()=>cr(),100))}function dr(){!isClient||!oe.value||!er||(ue==null||ue(),oe.value=void 0)}function lr(gr){if(gr.ctrlKey){if(gr.deltaY<0)return gr.preventDefault(),!1;if(gr.deltaY>0)return gr.preventDefault(),!1}}function nr(){Ie.value&&(ie=useEventListener("wheel",lr,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",z.value=!0,r("show"))}function ur(){ie==null||ie(),document.body.style.overflow=n,z.value=!1,r("close")}function ar(gr){r("switch",gr)}return watch(()=>e.src,()=>{kt.value?(V.value=!0,$.value=!1,dr(),or()):At()}),onMounted(()=>{kt.value?or():At()}),(gr,pr)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:re,class:normalizeClass([unref(y).b(),gr.$attrs.class]),style:normalizeStyle(unref(Fe))},[$.value?renderSlot(gr.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("error"))},toDisplayString(unref(g)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[L.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(k),{src:L.value,loading:gr.loading,style:unref(de),class:unref(ae),crossorigin:gr.crossorigin,onClick:nr,onLoad:ze,onError:Et}),null,16,_hoisted_1$r)):createCommentVNode("v-if",!0),V.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("wrapper"))},[renderSlot(gr.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Ie)?(openBlock(),createElementBlock(Fragment,{key:2},[z.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":gr.zIndex,"initial-index":unref(Ve),infinite:gr.infinite,"zoom-rate":gr.zoomRate,"min-scale":gr.minScale,"max-scale":gr.maxScale,"url-list":gr.previewSrcList,"hide-on-click-modal":gr.hideOnClickModal,teleported:gr.previewTeleported,"close-on-press-escape":gr.closeOnPressEscape,onClose:ur,onSwitch:ar},{default:withCtx(()=>[gr.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$i,[renderSlot(gr.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$1=_export_sfc$1(_sfc_main$D,[["__file","image.vue"]]);const ElImage=withInstall(Image$1),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||isNumber$1(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),inputNumberEmits={[CHANGE_EVENT]:(t,r)=>r!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[INPUT_EVENT]:t=>isNumber$1(t)||isNil(t),[UPDATE_MODEL_EVENT]:t=>isNumber$1(t)||isNil(t)},_hoisted_1$q=["aria-label","onKeydown"],_hoisted_2$h=["aria-label","onKeydown"],__default__$d=defineComponent({name:"ElInputNumber"}),_sfc_main$C=defineComponent({...__default__$d,props:inputNumberProps,emits:inputNumberEmits,setup(t,{expose:r,emit:e}){const n=t,{t:g}=useLocale(),y=useNamespace("input-number"),i=ref(),k=reactive({currentValue:n.modelValue,userInput:null}),{formItem:L}=useFormItem(),$=computed(()=>isNumber$1(n.modelValue)&&n.modelValue<=n.min),V=computed(()=>isNumber$1(n.modelValue)&&n.modelValue>=n.max),z=computed(()=>{const nr=ae(n.step);return isUndefined$1(n.precision)?Math.max(ae(n.modelValue),nr):(nr>n.precision,n.precision)}),re=computed(()=>n.controls&&n.controlsPosition==="right"),oe=useFormSize(),le=useFormDisabled(),ue=computed(()=>{if(k.userInput!==null)return k.userInput;let nr=k.currentValue;if(isNil(nr))return"";if(isNumber$1(nr)){if(Number.isNaN(nr))return"";isUndefined$1(n.precision)||(nr=nr.toFixed(n.precision))}return nr}),ie=(nr,ur)=>{if(isUndefined$1(ur)&&(ur=z.value),ur===0)return Math.round(nr);let ar=String(nr);const gr=ar.indexOf(".");if(gr===-1||!ar.replace(".","").split("")[gr+ur])return nr;const Cr=ar.length;return ar.charAt(Cr-1)==="5"&&(ar=`${ar.slice(0,Math.max(0,Cr-1))}6`),Number.parseFloat(Number(ar).toFixed(ur))},ae=nr=>{if(isNil(nr))return 0;const ur=nr.toString(),ar=ur.indexOf(".");let gr=0;return ar!==-1&&(gr=ur.length-ar-1),gr},Fe=(nr,ur=1)=>isNumber$1(nr)?ie(nr+n.step*ur):k.currentValue,de=()=>{if(n.readonly||le.value||V.value)return;const nr=Number(ue.value)||0,ur=Fe(nr);kt(ur),e(INPUT_EVENT,k.currentValue),dr()},Ie=()=>{if(n.readonly||le.value||$.value)return;const nr=Number(ue.value)||0,ur=Fe(nr,-1);kt(ur),e(INPUT_EVENT,k.currentValue),dr()},Ve=(nr,ur)=>{const{max:ar,min:gr,step:pr,precision:hr,stepStrictly:Cr,valueOnClear:wr}=n;ar<gr&&throwError("InputNumber","min should not be greater than max.");let Sr=Number(nr);if(isNil(nr)||Number.isNaN(Sr))return null;if(nr===""){if(wr===null)return null;Sr=isString$2(wr)?{min:gr,max:ar}[wr]:wr}return Cr&&(Sr=ie(Math.round(Sr/pr)*pr,hr)),isUndefined$1(hr)||(Sr=ie(Sr,hr)),(Sr>ar||Sr<gr)&&(Sr=Sr>ar?ar:gr,ur&&e(UPDATE_MODEL_EVENT,Sr)),Sr},kt=(nr,ur=!0)=>{var ar;const gr=k.currentValue,pr=Ve(nr);if(!ur){e(UPDATE_MODEL_EVENT,pr);return}gr!==pr&&(k.userInput=null,e(UPDATE_MODEL_EVENT,pr),e(CHANGE_EVENT,pr,gr),n.validateEvent&&((ar=L==null?void 0:L.validate)==null||ar.call(L,"change").catch(hr=>void 0)),k.currentValue=pr)},At=nr=>{k.userInput=nr;const ur=nr===""?null:Number(nr);e(INPUT_EVENT,ur),kt(ur,!1)},ze=nr=>{const ur=nr!==""?Number(nr):"";(isNumber$1(ur)&&!Number.isNaN(ur)||nr==="")&&kt(ur),dr(),k.userInput=null},Et=()=>{var nr,ur;(ur=(nr=i.value)==null?void 0:nr.focus)==null||ur.call(nr)},cr=()=>{var nr,ur;(ur=(nr=i.value)==null?void 0:nr.blur)==null||ur.call(nr)},er=nr=>{e("focus",nr)},or=nr=>{var ur;k.userInput=null,e("blur",nr),n.validateEvent&&((ur=L==null?void 0:L.validate)==null||ur.call(L,"blur").catch(ar=>void 0))},dr=()=>{k.currentValue!==n.modelValue&&(k.currentValue=n.modelValue)},lr=nr=>{document.activeElement===nr.target&&nr.preventDefault()};return watch(()=>n.modelValue,(nr,ur)=>{const ar=Ve(nr,!0);k.userInput===null&&ar!==ur&&(k.currentValue=ar)},{immediate:!0}),onMounted(()=>{var nr;const{min:ur,max:ar,modelValue:gr}=n,pr=(nr=i.value)==null?void 0:nr.input;if(pr.setAttribute("role","spinbutton"),Number.isFinite(ar)?pr.setAttribute("aria-valuemax",String(ar)):pr.removeAttribute("aria-valuemax"),Number.isFinite(ur)?pr.setAttribute("aria-valuemin",String(ur)):pr.removeAttribute("aria-valuemin"),pr.setAttribute("aria-valuenow",k.currentValue||k.currentValue===0?String(k.currentValue):""),pr.setAttribute("aria-disabled",String(le.value)),!isNumber$1(gr)&&gr!=null){let hr=Number(gr);Number.isNaN(hr)&&(hr=null),e(UPDATE_MODEL_EVENT,hr)}}),onUpdated(()=>{var nr,ur;const ar=(nr=i.value)==null?void 0:nr.input;ar==null||ar.setAttribute("aria-valuenow",`${(ur=k.currentValue)!=null?ur:""}`)}),r({focus:Et,blur:cr}),(nr,ur)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(y).b(),unref(y).m(unref(oe)),unref(y).is("disabled",unref(le)),unref(y).is("without-controls",!nr.controls),unref(y).is("controls-right",unref(re))]),onDragstart:ur[0]||(ur[0]=withModifiers(()=>{},["prevent"]))},[nr.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(g)("el.inputNumber.decrease"),class:normalizeClass([unref(y).e("decrease"),unref(y).is("disabled",unref($))]),onKeydown:withKeys(Ie,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})],42,_hoisted_1$q)),[[unref(vRepeatClick),Ie]]):createCommentVNode("v-if",!0),nr.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(g)("el.inputNumber.increase"),class:normalizeClass([unref(y).e("increase"),unref(y).is("disabled",unref(V))]),onKeydown:withKeys(de,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})],42,_hoisted_2$h)),[[unref(vRepeatClick),de]]):createCommentVNode("v-if",!0),createVNode(unref(ElInput),{id:nr.id,ref_key:"input",ref:i,type:"number",step:nr.step,"model-value":unref(ue),placeholder:nr.placeholder,readonly:nr.readonly,disabled:unref(le),size:unref(oe),max:nr.max,min:nr.min,name:nr.name,label:nr.label,"validate-event":!1,onWheel:lr,onKeydown:[withKeys(withModifiers(de,["prevent"]),["up"]),withKeys(withModifiers(Ie,["prevent"]),["down"])],onBlur:or,onFocus:er,onInput:At,onChange:ze},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var InputNumber=_export_sfc$1(_sfc_main$C,[["__file","input-number.vue"]]);const ElInputNumber=withInstall(InputNumber);let SubMenu$1=class{constructor(r,e){this.parent=r,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(r){r===this.subMenuItems.length?r=0:r<0&&(r=this.subMenuItems.length-1),this.subMenuItems[r].focus(),this.subIndex=r}addListeners(){const r=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,e=>{e.addEventListener("keydown",n=>{let g=!1;switch(n.code){case EVENT_CODE.down:{this.gotoSubIndex(this.subIndex+1),g=!0;break}case EVENT_CODE.up:{this.gotoSubIndex(this.subIndex-1),g=!0;break}case EVENT_CODE.tab:{triggerEvent(r,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{g=!0,n.currentTarget.click();break}}return g&&(n.preventDefault(),n.stopPropagation()),!1})})}},MenuItem$1=class{constructor(r,e){this.domNode=r,this.submenu=null,this.submenu=null,this.init(e)}init(r){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(`.${r}-menu`);e&&(this.submenu=new SubMenu$1(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",r=>{let e=!1;switch(r.code){case EVENT_CODE.down:{triggerEvent(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break}case EVENT_CODE.up:{triggerEvent(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break}case EVENT_CODE.tab:{triggerEvent(r.currentTarget,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{e=!0,r.currentTarget.click();break}}e&&r.preventDefault()})}},Menu$1=class{constructor(r,e){this.domNode=r,this.init(e)}init(r){const e=this.domNode.childNodes;Array.from(e).forEach(n=>{n.nodeType===1&&new MenuItem$1(n,r)})}};const _sfc_main$B=defineComponent({name:"ElMenuCollapseTransition",setup(){const t=useNamespace("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,n){addClass(e,`${t.namespace.value}-opacity-transition`),e.style.opacity="1",n()},onAfterEnter(e){removeClass(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),hasClass(e,t.m("collapse"))?(removeClass(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),addClass(e,t.m("collapse"))):(addClass(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),removeClass(e,t.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){addClass(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}});function _sfc_render$9(t,r,e,n,g,y){return openBlock(),createBlock(Transition,mergeProps({mode:"out-in"},t.listeners),{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3},16)}var ElMenuCollapseTransition=_export_sfc$1(_sfc_main$B,[["render",_sfc_render$9],["__file","menu-collapse-transition.vue"]]);function useMenu(t,r){const e=computed(()=>{let g=t.parent;const y=[r.value];for(;g.type.name!=="ElMenu";)g.props.index&&y.unshift(g.props.index),g=g.parent;return y});return{parentMenu:computed(()=>{let g=t.parent;for(;g&&!["ElMenu","ElSubMenu"].includes(g.type.name);)g=g.parent;return g}),indexPath:e}}function useMenuColor(t){return computed(()=>{const e=t.backgroundColor;return e?new TinyColor(e).shade(20).toString():""})}const useMenuCssVar=(t,r)=>{const e=useNamespace("menu");return computed(()=>e.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":useMenuColor(t).value||"","active-color":t.activeTextColor||"",level:`${r}`}))},subMenuProps=buildProps({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:iconPropType},expandOpenIcon:{type:iconPropType},collapseCloseIcon:{type:iconPropType},collapseOpenIcon:{type:iconPropType}}),COMPONENT_NAME$5="ElSubMenu";var SubMenu=defineComponent({name:COMPONENT_NAME$5,props:subMenuProps,setup(t,{slots:r,expose:e}){useDeprecated({from:"popper-append-to-body",replacement:"teleported",scope:COMPONENT_NAME$5,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},computed(()=>t.popperAppendToBody!==void 0));const n=getCurrentInstance(),{indexPath:g,parentMenu:y}=useMenu(n,computed(()=>t.index)),i=useNamespace("menu"),k=useNamespace("sub-menu"),L=inject("rootMenu");L||throwError(COMPONENT_NAME$5,"can not inject root menu");const $=inject(`subMenu:${y.value.uid}`);$||throwError(COMPONENT_NAME$5,"can not inject sub menu");const V=ref({}),z=ref({});let re;const oe=ref(!1),le=ref(),ue=ref(null),ie=computed(()=>ze.value==="horizontal"&&Fe.value?"bottom-start":"right-start"),ae=computed(()=>ze.value==="horizontal"&&Fe.value||ze.value==="vertical"&&!L.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?kt.value?t.expandOpenIcon:t.expandCloseIcon:arrow_down_default:t.collapseCloseIcon&&t.collapseOpenIcon?kt.value?t.collapseOpenIcon:t.collapseCloseIcon:arrow_right_default),Fe=computed(()=>$.level===0),de=computed(()=>{var hr;const Cr=(hr=t.teleported)!=null?hr:t.popperAppendToBody;return Cr===void 0?Fe.value:Cr}),Ie=computed(()=>L.props.collapse?`${i.namespace.value}-zoom-in-left`:`${i.namespace.value}-zoom-in-top`),Ve=computed(()=>ze.value==="horizontal"&&Fe.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),kt=computed(()=>L.openedMenus.includes(t.index)),At=computed(()=>{let hr=!1;return Object.values(V.value).forEach(Cr=>{Cr.active&&(hr=!0)}),Object.values(z.value).forEach(Cr=>{Cr.active&&(hr=!0)}),hr}),ze=computed(()=>L.props.mode),Et=reactive({index:t.index,indexPath:g,active:At}),cr=useMenuCssVar(L.props,$.level+1),er=computed(()=>{var hr;return(hr=t.popperOffset)!=null?hr:L.props.popperOffset}),or=computed(()=>{var hr;return(hr=t.popperClass)!=null?hr:L.props.popperClass}),dr=computed(()=>{var hr;return(hr=t.showTimeout)!=null?hr:L.props.showTimeout}),lr=computed(()=>{var hr;return(hr=t.hideTimeout)!=null?hr:L.props.hideTimeout}),nr=()=>{var hr,Cr,wr;return(wr=(Cr=(hr=ue.value)==null?void 0:hr.popperRef)==null?void 0:Cr.popperInstanceRef)==null?void 0:wr.destroy()},ur=hr=>{hr||nr()},ar=()=>{L.props.menuTrigger==="hover"&&L.props.mode==="horizontal"||L.props.collapse&&L.props.mode==="vertical"||t.disabled||L.handleSubMenuClick({index:t.index,indexPath:g.value,active:At.value})},gr=(hr,Cr=dr.value)=>{var wr;if(hr.type!=="focus"){if(L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"||t.disabled){$.mouseInChild.value=!0;return}$.mouseInChild.value=!0,re==null||re(),{stop:re}=useTimeoutFn(()=>{L.openMenu(t.index,g.value)},Cr),de.value&&((wr=y.value.vnode.el)==null||wr.dispatchEvent(new MouseEvent("mouseenter")))}},pr=(hr=!1)=>{var Cr;if(L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"){$.mouseInChild.value=!1;return}re==null||re(),$.mouseInChild.value=!1,{stop:re}=useTimeoutFn(()=>!oe.value&&L.closeMenu(t.index,g.value),lr.value),de.value&&hr&&((Cr=$.handleMouseleave)==null||Cr.call($,!0))};watch(()=>L.props.collapse,hr=>ur(!!hr));{const hr=wr=>{z.value[wr.index]=wr},Cr=wr=>{delete z.value[wr.index]};provide(`subMenu:${n.uid}`,{addSubMenu:hr,removeSubMenu:Cr,handleMouseleave:pr,mouseInChild:oe,level:$.level+1})}return e({opened:kt}),onMounted(()=>{L.addSubMenu(Et),$.addSubMenu(Et)}),onBeforeUnmount(()=>{$.removeSubMenu(Et),L.removeSubMenu(Et)}),()=>{var hr;const Cr=[(hr=r.title)==null?void 0:hr.call(r),h$1(ElIcon,{class:k.e("icon-arrow"),style:{transform:kt.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&L.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>isString$2(ae.value)?h$1(n.appContext.components[ae.value]):h$1(ae.value)})],wr=L.isMenuPopup?h$1(ElTooltip,{ref:ue,visible:kt.value,effect:"light",pure:!0,offset:er.value,showArrow:!1,persistent:!0,popperClass:or.value,placement:ie.value,teleported:de.value,fallbackPlacements:Ve.value,transition:Ie.value,gpuAcceleration:!1},{content:()=>{var Sr;return h$1("div",{class:[i.m(ze.value),i.m("popup-container"),or.value],onMouseenter:mr=>gr(mr,100),onMouseleave:()=>pr(!0),onFocus:mr=>gr(mr,100)},[h$1("ul",{class:[i.b(),i.m("popup"),i.m(`popup-${ie.value}`)],style:cr.value},[(Sr=r.default)==null?void 0:Sr.call(r)])])},default:()=>h$1("div",{class:k.e("title"),onClick:ar},Cr)}):h$1(Fragment,{},[h$1("div",{class:k.e("title"),ref:le,onClick:ar},Cr),h$1(_CollapseTransition,{},{default:()=>{var Sr;return withDirectives(h$1("ul",{role:"menu",class:[i.b(),i.m("inline")],style:cr.value},[(Sr=r.default)==null?void 0:Sr.call(r)]),[[vShow,kt.value]])}})]);return h$1("li",{class:[k.b(),k.is("active",At.value),k.is("opened",kt.value),k.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:kt.value,onMouseenter:gr,onMouseleave:()=>pr(),onFocus:gr},[wr])}}});const menuProps=buildProps({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:definePropType(Array),default:()=>mutable([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:iconPropType,default:()=>more_default},popperEffect:{type:String,values:["dark","light"],default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),checkIndexPath=t=>Array.isArray(t)&&t.every(r=>isString$2(r)),menuEmits={close:(t,r)=>isString$2(t)&&checkIndexPath(r),open:(t,r)=>isString$2(t)&&checkIndexPath(r),select:(t,r,e,n)=>isString$2(t)&&checkIndexPath(r)&&isObject$2(e)&&(n===void 0||n instanceof Promise)};var Menu=defineComponent({name:"ElMenu",props:menuProps,emits:menuEmits,setup(t,{emit:r,slots:e,expose:n}){const g=getCurrentInstance(),y=g.appContext.config.globalProperties.$router,i=ref(),k=useNamespace("menu"),L=useNamespace("sub-menu"),$=ref(-1),V=ref(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),z=ref(t.defaultActive),re=ref({}),oe=ref({}),le=computed(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),ue=()=>{const lr=z.value&&re.value[z.value];if(!lr||t.mode==="horizontal"||t.collapse)return;lr.indexPath.forEach(ur=>{const ar=oe.value[ur];ar&&ie(ur,ar.indexPath)})},ie=(lr,nr)=>{V.value.includes(lr)||(t.uniqueOpened&&(V.value=V.value.filter(ur=>nr.includes(ur))),V.value.push(lr),r("open",lr,nr))},ae=lr=>{const nr=V.value.indexOf(lr);nr!==-1&&V.value.splice(nr,1)},Fe=(lr,nr)=>{ae(lr),r("close",lr,nr)},de=({index:lr,indexPath:nr})=>{V.value.includes(lr)?Fe(lr,nr):ie(lr,nr)},Ie=lr=>{(t.mode==="horizontal"||t.collapse)&&(V.value=[]);const{index:nr,indexPath:ur}=lr;if(!(isNil(nr)||isNil(ur)))if(t.router&&y){const ar=lr.route||nr,gr=y.push(ar).then(pr=>(pr||(z.value=nr),pr));r("select",nr,ur,{index:nr,indexPath:ur,route:ar},gr)}else z.value=nr,r("select",nr,ur,{index:nr,indexPath:ur})},Ve=lr=>{const nr=re.value,ur=nr[lr]||z.value&&nr[z.value]||nr[t.defaultActive];ur?z.value=ur.index:z.value=lr},kt=lr=>{const nr=getComputedStyle(lr),ur=Number.parseInt(nr.marginLeft,10),ar=Number.parseInt(nr.marginRight,10);return lr.offsetWidth+ur+ar||0},At=()=>{var lr,nr;if(!i.value)return-1;const ur=Array.from((nr=(lr=i.value)==null?void 0:lr.childNodes)!=null?nr:[]).filter(mr=>mr.nodeName!=="#comment"&&(mr.nodeName!=="#text"||mr.nodeValue)),ar=64,gr=getComputedStyle(i.value),pr=Number.parseInt(gr.paddingLeft,10),hr=Number.parseInt(gr.paddingRight,10),Cr=i.value.clientWidth-pr-hr;let wr=0,Sr=0;return ur.forEach((mr,_r)=>{wr+=kt(mr),wr<=Cr-ar&&(Sr=_r+1)}),Sr===ur.length?-1:Sr},ze=lr=>oe.value[lr].indexPath,Et=(lr,nr=33.34)=>{let ur;return()=>{ur&&clearTimeout(ur),ur=setTimeout(()=>{lr()},nr)}};let cr=!0;const er=()=>{const lr=()=>{$.value=-1,nextTick(()=>{$.value=At()})};cr?lr():Et(lr)(),cr=!1};watch(()=>t.defaultActive,lr=>{re.value[lr]||(z.value=""),Ve(lr)}),watch(()=>t.collapse,lr=>{lr&&(V.value=[])}),watch(re.value,ue);let or;watchEffect(()=>{t.mode==="horizontal"&&t.ellipsis?or=useResizeObserver(i,er).stop:or==null||or()});const dr=ref(!1);{const lr=gr=>{oe.value[gr.index]=gr},nr=gr=>{delete oe.value[gr.index]};provide("rootMenu",reactive({props:t,openedMenus:V,items:re,subMenus:oe,activeIndex:z,isMenuPopup:le,addMenuItem:gr=>{re.value[gr.index]=gr},removeMenuItem:gr=>{delete re.value[gr.index]},addSubMenu:lr,removeSubMenu:nr,openMenu:ie,closeMenu:Fe,handleMenuItemClick:Ie,handleSubMenuClick:de})),provide(`subMenu:${g.uid}`,{addSubMenu:lr,removeSubMenu:nr,mouseInChild:dr,level:0})}return onMounted(()=>{t.mode==="horizontal"&&new Menu$1(g.vnode.el,k.namespace.value)}),n({open:nr=>{const{indexPath:ur}=oe.value[nr];ur.forEach(ar=>ie(ar,ur))},close:ae,handleResize:er}),()=>{var lr,nr;let ur=(nr=(lr=e.default)==null?void 0:lr.call(e))!=null?nr:[];const ar=[];if(t.mode==="horizontal"&&i.value){const Cr=flattedChildren(ur),wr=$.value===-1?Cr:Cr.slice(0,$.value),Sr=$.value===-1?[]:Cr.slice($.value);Sr!=null&&Sr.length&&t.ellipsis&&(ur=wr,ar.push(h$1(SubMenu,{index:"sub-menu-more",class:L.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>h$1(ElIcon,{class:L.e("icon-more")},{default:()=>h$1(t.ellipsisIcon)}),default:()=>Sr})))}const gr=useMenuCssVar(t,0),pr=t.closeOnClickOutside?[[ClickOutside,()=>{V.value.length&&(dr.value||(V.value.forEach(Cr=>r("close",Cr,ze(Cr))),V.value=[]))}]]:[],hr=withDirectives(h$1("ul",{key:String(t.collapse),role:"menubar",ref:i,style:gr.value,class:{[k.b()]:!0,[k.m(t.mode)]:!0,[k.m("collapse")]:t.collapse}},[...ur,...ar]),pr);return t.collapseTransition&&t.mode==="vertical"?h$1(ElMenuCollapseTransition,()=>hr):hr}}});const menuItemProps=buildProps({index:{type:definePropType([String,null]),default:null},route:{type:definePropType([String,Object])},disabled:Boolean}),menuItemEmits={click:t=>isString$2(t.index)&&Array.isArray(t.indexPath)},COMPONENT_NAME$4="ElMenuItem",_sfc_main$A=defineComponent({name:COMPONENT_NAME$4,components:{ElTooltip},props:menuItemProps,emits:menuItemEmits,setup(t,{emit:r}){const e=getCurrentInstance(),n=inject("rootMenu"),g=useNamespace("menu"),y=useNamespace("menu-item");n||throwError(COMPONENT_NAME$4,"can not inject root menu");const{parentMenu:i,indexPath:k}=useMenu(e,toRef(t,"index")),L=inject(`subMenu:${i.value.uid}`);L||throwError(COMPONENT_NAME$4,"can not inject sub menu");const $=computed(()=>t.index===n.activeIndex),V=reactive({index:t.index,indexPath:k,active:$}),z=()=>{t.disabled||(n.handleMenuItemClick({index:t.index,indexPath:k.value,route:t.route}),r("click",V))};return onMounted(()=>{L.addSubMenu(V),n.addMenuItem(V)}),onBeforeUnmount(()=>{L.removeSubMenu(V),n.removeMenuItem(V)}),{parentMenu:i,rootMenu:n,active:$,nsMenu:g,nsMenuItem:y,handleClick:z}}});function _sfc_render$8(t,r,e,n,g,y){const i=resolveComponent("el-tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:r[0]||(r[0]=(...k)=>t.handleClick&&t.handleClick(...k))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(openBlock(),createBlock(i,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:withCtx(()=>[renderSlot(t.$slots,"title")]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(t.nsMenu.be("tooltip","trigger"))},[renderSlot(t.$slots,"default")],2)]),_:3},8,["effect"])):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(t.$slots,"default"),renderSlot(t.$slots,"title")],64))],2)}var MenuItem=_export_sfc$1(_sfc_main$A,[["render",_sfc_render$8],["__file","menu-item.vue"]]);const menuItemGroupProps={title:String},COMPONENT_NAME$3="ElMenuItemGroup",_sfc_main$z=defineComponent({name:COMPONENT_NAME$3,props:menuItemGroupProps,setup(){return{ns:useNamespace("menu-item-group")}}});function _sfc_render$7(t,r,e,n,g,y){return openBlock(),createElementBlock("li",{class:normalizeClass(t.ns.b())},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.$slots.title?renderSlot(t.$slots,"title",{key:1}):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(t.title),1)],64))],2),createBaseVNode("ul",null,[renderSlot(t.$slots,"default")])],2)}var MenuItemGroup=_export_sfc$1(_sfc_main$z,[["render",_sfc_render$7],["__file","menu-item-group.vue"]]);const ElMenu=withInstall(Menu,{MenuItem,MenuItemGroup,SubMenu}),ElMenuItem=withNoopInstall(MenuItem);withNoopInstall(MenuItemGroup);const ElSubMenu=withNoopInstall(SubMenu),elPaginationKey=Symbol("elPaginationKey"),paginationPrevProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:iconPropType}}),paginationPrevEmits={click:t=>t instanceof MouseEvent},_hoisted_1$p=["disabled","aria-label","aria-disabled"],_hoisted_2$g={key:0},__default__$c=defineComponent({name:"ElPaginationPrev"}),_sfc_main$y=defineComponent({...__default__$c,props:paginationPrevProps,emits:paginationPrevEmits,setup(t){const r=t,{t:e}=useLocale(),n=computed(()=>r.disabled||r.currentPage<=1);return(g,y)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-prev",disabled:unref(n),"aria-label":g.prevText||unref(e)("el.pagination.prev"),"aria-disabled":unref(n),onClick:y[0]||(y[0]=i=>g.$emit("click",i))},[g.prevText?(openBlock(),createElementBlock("span",_hoisted_2$g,toDisplayString(g.prevText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.prevIcon)))]),_:1}))],8,_hoisted_1$p))}});var Prev=_export_sfc$1(_sfc_main$y,[["__file","prev.vue"]]);const paginationNextProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:iconPropType}}),_hoisted_1$o=["disabled","aria-label","aria-disabled"],_hoisted_2$f={key:0},__default__$b=defineComponent({name:"ElPaginationNext"}),_sfc_main$x=defineComponent({...__default__$b,props:paginationNextProps,emits:["click"],setup(t){const r=t,{t:e}=useLocale(),n=computed(()=>r.disabled||r.currentPage===r.pageCount||r.pageCount===0);return(g,y)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-next",disabled:unref(n),"aria-label":g.nextText||unref(e)("el.pagination.next"),"aria-disabled":unref(n),onClick:y[0]||(y[0]=i=>g.$emit("click",i))},[g.nextText?(openBlock(),createElementBlock("span",_hoisted_2$f,toDisplayString(g.nextText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(g.nextIcon)))]),_:1}))],8,_hoisted_1$o))}});var Next=_export_sfc$1(_sfc_main$x,[["__file","next.vue"]]);const selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption(t,r){const e=inject(selectKey),n=inject(selectGroupKey,{disabled:!1}),g=computed(()=>e.props.multiple?V(e.props.modelValue,t.value):V([e.props.modelValue],t.value)),y=computed(()=>{if(e.props.multiple){const oe=e.props.modelValue||[];return!g.value&&oe.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),i=computed(()=>t.label||(isObject$2(t.value)?"":t.value)),k=computed(()=>t.value||t.label||""),L=computed(()=>t.disabled||r.groupDisabled||y.value),$=getCurrentInstance(),V=(oe=[],le)=>{if(isObject$2(t.value)){const ue=e.props.valueKey;return oe&&oe.some(ie=>toRaw(get(ie,ue))===get(le,ue))}else return oe&&oe.includes(le)},z=()=>{!t.disabled&&!n.disabled&&(e.states.hoveringIndex=e.optionsArray.indexOf($.proxy))},re=oe=>{const le=new RegExp(escapeStringRegexp(oe),"i");r.visible=le.test(i.value)||t.created};return watch(()=>i.value,()=>{!t.created&&!e.props.remote&&e.setSelected()}),watch(()=>t.value,(oe,le)=>{const{remote:ue,valueKey:ie}=e.props;if(isEqual(oe,le)||(e.onOptionDestroy(le,$.proxy),e.onOptionCreate($.proxy)),!t.created&&!ue){if(ie&&isObject$2(oe)&&isObject$2(le)&&oe[ie]===le[ie])return;e.setSelected()}}),watch(()=>n.disabled,()=>{r.groupDisabled=n.disabled},{immediate:!0}),{select:e,currentLabel:i,currentValue:k,itemSelected:g,isDisabled:L,hoverItem:z,updateOption:re}}const _sfc_main$w=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const r=useNamespace("select"),e=useId(),n=computed(()=>[r.be("dropdown","item"),r.is("disabled",unref(k)),r.is("selected",unref(i)),r.is("hovering",unref(re))]),g=reactive({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:y,itemSelected:i,isDisabled:k,select:L,hoverItem:$,updateOption:V}=useOption(t,g),{visible:z,hover:re}=toRefs(g),oe=getCurrentInstance().proxy;L.onOptionCreate(oe),onBeforeUnmount(()=>{const ue=oe.value,{selected:ie}=L.states,Fe=(L.props.multiple?ie:[ie]).some(de=>de.value===oe.value);nextTick(()=>{L.states.cachedOptions.get(ue)===oe&&!Fe&&L.states.cachedOptions.delete(ue)}),L.onOptionDestroy(ue,oe)});function le(){t.disabled!==!0&&g.groupDisabled!==!0&&L.handleOptionSelect(oe)}return{ns:r,id:e,containerKls:n,currentLabel:y,itemSelected:i,isDisabled:k,select:L,hoverItem:$,updateOption:V,visible:z,hover:re,selectOptionClick:le,states:g}}}),_hoisted_1$n=["id","aria-disabled","aria-selected"];function _sfc_render$6(t,r,e,n,g,y){return withDirectives((openBlock(),createElementBlock("li",{id:t.id,class:normalizeClass(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:r[0]||(r[0]=(...i)=>t.hoverItem&&t.hoverItem(...i)),onClick:r[1]||(r[1]=withModifiers((...i)=>t.selectOptionClick&&t.selectOptionClick(...i),["stop"]))},[renderSlot(t.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(t.currentLabel),1)])],42,_hoisted_1$n)),[[vShow,t.visible]])}var Option=_export_sfc$1(_sfc_main$w,[["render",_sfc_render$6],["__file","option.vue"]]);const _sfc_main$v=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=inject(selectKey),r=useNamespace("select"),e=computed(()=>t.props.popperClass),n=computed(()=>t.props.multiple),g=computed(()=>t.props.fitInputWidth),y=ref("");function i(){var k;y.value=`${(k=t.selectRef)==null?void 0:k.offsetWidth}px`}return onMounted(()=>{i(),useResizeObserver(t.selectRef,i)}),{ns:r,minWidth:y,popperClass:e,isMultiple:n,isFitInputWidth:g}}});function _sfc_render$5(t,r,e,n,g,y){return openBlock(),createElementBlock("div",{class:normalizeClass([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:normalizeStyle({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.ns.be("dropdown","header"))},[renderSlot(t.$slots,"header")],2)):createCommentVNode("v-if",!0),renderSlot(t.$slots,"default"),t.$slots.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.be("dropdown","footer"))},[renderSlot(t.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6)}var ElSelectMenu=_export_sfc$1(_sfc_main$v,[["render",_sfc_render$5],["__file","select-dropdown.vue"]]);function useInput(t){const r=ref(!1);return{handleCompositionStart:()=>{r.value=!0},handleCompositionUpdate:y=>{const i=y.target.value,k=i[i.length-1]||"";r.value=!isKorean(k)},handleCompositionEnd:y=>{r.value&&(r.value=!1,isFunction$3(t)&&t(y))}}}const MINIMUM_INPUT_WIDTH=11,useSelect=(t,r)=>{const{t:e}=useLocale(),n=useId(),g=useNamespace("select"),y=useNamespace("input"),i=reactive({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1});useDeprecated({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},computed(()=>t.suffixTransition===!1));const k=ref(null),L=ref(null),$=ref(null),V=ref(null),z=ref(null),re=ref(null),oe=ref(null),le=ref(null),ue=ref(null),ie=ref(null),ae=ref(null),Fe=ref(null),{wrapperRef:de,isFocused:Ie,handleFocus:Ve,handleBlur:kt}=useFocusController(z,{afterFocus(){t.automaticDropdown&&!At.value&&(At.value=!0,i.menuVisibleOnFocus=!0)},beforeBlur($n){var Zn,zo;return((Zn=$.value)==null?void 0:Zn.isFocusInsideContent($n))||((zo=V.value)==null?void 0:zo.isFocusInsideContent($n))},afterBlur(){At.value=!1,i.menuVisibleOnFocus=!1}}),At=ref(!1),ze=ref(),{form:Et,formItem:cr}=useFormItem(),{inputId:er}=useFormItemInputId(t,{formItemContext:cr}),or=computed(()=>t.disabled||(Et==null?void 0:Et.disabled)),dr=computed(()=>t.multiple?isArray$3(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!==""),lr=computed(()=>t.clearable&&!or.value&&i.inputHovering&&dr.value),nr=computed(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),ur=computed(()=>g.is("reverse",nr.value&&At.value&&t.suffixTransition)),ar=computed(()=>(cr==null?void 0:cr.validateState)||""),gr=computed(()=>ValidateComponentsMap[ar.value]),pr=computed(()=>t.remote?300:0),hr=computed(()=>t.loading?t.loadingText||e("el.select.loading"):t.remote&&!i.inputValue&&i.options.size===0?!1:t.filterable&&i.inputValue&&i.options.size>0&&Cr.value===0?t.noMatchText||e("el.select.noMatch"):i.options.size===0?t.noDataText||e("el.select.noData"):null),Cr=computed(()=>wr.value.filter($n=>$n.visible).length),wr=computed(()=>{const $n=Array.from(i.options.values()),Zn=[];return i.optionValues.forEach(zo=>{const Ra=$n.findIndex(ys=>ys.value===zo);Ra>-1&&Zn.push($n[Ra])}),Zn.length>=$n.length?Zn:$n}),Sr=computed(()=>Array.from(i.cachedOptions.values())),mr=computed(()=>{const $n=wr.value.filter(Zn=>!Zn.created).some(Zn=>Zn.currentLabel===i.inputValue);return t.filterable&&t.allowCreate&&i.inputValue!==""&&!$n}),_r=()=>{t.filterable&&isFunction$3(t.filterMethod)||t.filterable&&t.remote&&isFunction$3(t.remoteMethod)||wr.value.forEach($n=>{$n.updateOption(i.inputValue)})},Ar=useFormSize(),Er=computed(()=>["small"].includes(Ar.value)?"small":"default"),sr=computed({get(){return At.value&&hr.value!==!1},set($n){At.value=$n}}),xr=computed(()=>isArray$3(t.modelValue)?t.modelValue.length===0&&!i.inputValue:t.filterable?!i.inputValue:!0),Nr=computed(()=>{var $n;const Zn=($n=t.placeholder)!=null?$n:e("el.select.placeholder");return t.multiple||!dr.value?Zn:i.selectedLabel});watch(()=>t.modelValue,($n,Zn)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(i.inputValue="",Mr("")),yr(),!isEqual($n,Zn)&&t.validateEvent&&(cr==null||cr.validate("change").catch(zo=>void 0))},{flush:"post",deep:!0}),watch(()=>At.value,$n=>{$n?Mr(i.inputValue):(i.inputValue="",i.previousQuery=null,i.isBeforeHide=!0),r("visible-change",$n)}),watch(()=>i.options.entries(),()=>{var $n;if(!isClient)return;const Zn=(($n=k.value)==null?void 0:$n.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!isUndefined$1(t.modelValue)||!Array.from(Zn).includes(document.activeElement))&&yr(),t.defaultFirstOption&&(t.filterable||t.remote)&&Cr.value&&br()},{flush:"post"}),watch(()=>i.hoveringIndex,$n=>{isNumber$1($n)&&$n>-1?ze.value=wr.value[$n]||{}:ze.value={},wr.value.forEach(Zn=>{Zn.hover=ze.value===Zn})}),watchEffect(()=>{i.isBeforeHide||_r()});const Mr=$n=>{i.previousQuery!==$n&&(i.previousQuery=$n,t.filterable&&isFunction$3(t.filterMethod)?t.filterMethod($n):t.filterable&&t.remote&&isFunction$3(t.remoteMethod)&&t.remoteMethod($n),t.defaultFirstOption&&(t.filterable||t.remote)&&Cr.value?nextTick(br):nextTick(Br))},br=()=>{const $n=wr.value.filter(Ra=>Ra.visible&&!Ra.disabled&&!Ra.states.groupDisabled),Zn=$n.find(Ra=>Ra.created),zo=$n[0];i.hoveringIndex=_n(wr.value,Zn||zo)},yr=()=>{if(t.multiple)i.selectedLabel="";else{const Zn=Tr(t.modelValue);i.selectedLabel=Zn.currentLabel,i.selected=Zn;return}const $n=[];isArray$3(t.modelValue)&&t.modelValue.forEach(Zn=>{$n.push(Tr(Zn))}),i.selected=$n},Tr=$n=>{let Zn;const zo=toRawType($n).toLowerCase()==="object",Ra=toRawType($n).toLowerCase()==="null",ys=toRawType($n).toLowerCase()==="undefined";for(let Bi=i.cachedOptions.size-1;Bi>=0;Bi--){const hi=Sr.value[Bi];if(zo?get(hi.value,t.valueKey)===get($n,t.valueKey):hi.value===$n){Zn={value:$n,currentLabel:hi.currentLabel,isDisabled:hi.isDisabled};break}}if(Zn)return Zn;const Ds=zo?$n.label:!Ra&&!ys?$n:"";return{value:$n,currentLabel:Ds}},Br=()=>{t.multiple?i.selected.length>0?i.hoveringIndex=Math.min(...i.selected.map($n=>wr.value.findIndex(Zn=>pa(Zn)===pa($n)))):i.hoveringIndex=-1:i.hoveringIndex=wr.value.findIndex($n=>pa($n)===pa(i.selected))},Lr=()=>{i.selectionWidth=L.value.getBoundingClientRect().width},Fr=()=>{i.calculatorWidth=re.value.getBoundingClientRect().width},qr=()=>{i.collapseItemWidth=ae.value.getBoundingClientRect().width},Vr=()=>{var $n,Zn;(Zn=($n=$.value)==null?void 0:$n.updatePopper)==null||Zn.call($n)},Qr=()=>{var $n,Zn;(Zn=($n=V.value)==null?void 0:$n.updatePopper)==null||Zn.call($n)},Tn=()=>{i.inputValue.length>0&&!At.value&&(At.value=!0),Mr(i.inputValue)},xn=$n=>{if(i.inputValue=$n.target.value,t.remote)Xr();else return Tn()},Xr=debounce(()=>{Tn()},pr.value),Vn=$n=>{isEqual(t.modelValue,$n)||r(CHANGE_EVENT,$n)},Zr=$n=>findLastIndex($n,Zn=>!i.disabledOptions.has(Zn)),Nn=$n=>{if(t.multiple&&$n.code!==EVENT_CODE.delete&&$n.target.value.length<=0){const Zn=t.modelValue.slice(),zo=Zr(Zn);if(zo<0)return;Zn.splice(zo,1),r(UPDATE_MODEL_EVENT,Zn),Vn(Zn)}},Jr=($n,Zn)=>{const zo=i.selected.indexOf(Zn);if(zo>-1&&!or.value){const Ra=t.modelValue.slice();Ra.splice(zo,1),r(UPDATE_MODEL_EVENT,Ra),Vn(Ra),r("remove-tag",Zn.value)}$n.stopPropagation(),Qo()},wn=$n=>{$n.stopPropagation();const Zn=t.multiple?[]:"";if(!isString$2(Zn))for(const zo of i.selected)zo.isDisabled&&Zn.push(zo.value);r(UPDATE_MODEL_EVENT,Zn),Vn(Zn),i.hoveringIndex=-1,At.value=!1,r("clear"),Qo()},Un=$n=>{if(t.multiple){const Zn=(t.modelValue||[]).slice(),zo=_n(Zn,$n.value);zo>-1?Zn.splice(zo,1):(t.multipleLimit<=0||Zn.length<t.multipleLimit)&&Zn.push($n.value),r(UPDATE_MODEL_EVENT,Zn),Vn(Zn),$n.created&&Mr(""),t.filterable&&!t.reserveKeyword&&(i.inputValue="")}else r(UPDATE_MODEL_EVENT,$n.value),Vn($n.value),At.value=!1;Qo(),!At.value&&nextTick(()=>{Pn($n)})},_n=($n=[],Zn)=>{if(!isObject$2(Zn))return $n.indexOf(Zn);const zo=t.valueKey;let Ra=-1;return $n.some((ys,Ds)=>toRaw(get(ys,zo))===get(Zn,zo)?(Ra=Ds,!0):!1),Ra},Pn=$n=>{var Zn,zo,Ra,ys,Ds;const Go=isArray$3($n)?$n[0]:$n;let Bi=null;if(Go!=null&&Go.value){const hi=wr.value.filter(Vp=>Vp.value===Go.value);hi.length>0&&(Bi=hi[0].$el)}if($.value&&Bi){const hi=(ys=(Ra=(zo=(Zn=$.value)==null?void 0:Zn.popperRef)==null?void 0:zo.contentRef)==null?void 0:Ra.querySelector)==null?void 0:ys.call(Ra,`.${g.be("dropdown","wrap")}`);hi&&scrollIntoView(hi,Bi)}(Ds=Fe.value)==null||Ds.handleScroll()},Cn=$n=>{i.options.set($n.value,$n),i.cachedOptions.set($n.value,$n),$n.disabled&&i.disabledOptions.set($n.value,$n)},vn=($n,Zn)=>{i.options.get($n)===Zn&&i.options.delete($n)},{handleCompositionStart:no,handleCompositionUpdate:Ro,handleCompositionEnd:Ho}=useInput($n=>xn($n)),Vo=computed(()=>{var $n,Zn;return(Zn=($n=$.value)==null?void 0:$n.popperRef)==null?void 0:Zn.contentRef}),Po=()=>{nextTick(()=>Pn(i.selected))},Qo=()=>{var $n;($n=z.value)==null||$n.focus()},Ga=()=>{So()},ws=$n=>{wn($n)},So=$n=>{if(At.value=!1,Ie.value){const Zn=new FocusEvent("focus",$n);nextTick(()=>kt(Zn))}},Ps=()=>{i.inputValue.length>0?i.inputValue="":At.value=!1},ao=()=>{or.value||(i.menuVisibleOnFocus?i.menuVisibleOnFocus=!1:At.value=!At.value)},Sa=()=>{At.value?wr.value[i.hoveringIndex]&&Un(wr.value[i.hoveringIndex]):ao()},pa=$n=>isObject$2($n.value)?get($n.value,t.valueKey):$n.value,La=computed(()=>wr.value.filter($n=>$n.visible).every($n=>$n.disabled)),Ya=computed(()=>t.multiple?t.collapseTags?i.selected.slice(0,t.maxCollapseTags):i.selected:[]),ea=computed(()=>t.multiple?t.collapseTags?i.selected.slice(t.maxCollapseTags):[]:[]),wo=$n=>{if(!At.value){At.value=!0;return}if(!(i.options.size===0||Cr.value===0)&&!La.value){$n==="next"?(i.hoveringIndex++,i.hoveringIndex===i.options.size&&(i.hoveringIndex=0)):$n==="prev"&&(i.hoveringIndex--,i.hoveringIndex<0&&(i.hoveringIndex=i.options.size-1));const Zn=wr.value[i.hoveringIndex];(Zn.disabled===!0||Zn.states.groupDisabled===!0||!Zn.visible)&&wo($n),nextTick(()=>Pn(ze.value))}},Fa=()=>{if(!L.value)return 0;const $n=window.getComputedStyle(L.value);return Number.parseFloat($n.gap||"6px")},$a=computed(()=>{const $n=Fa();return{maxWidth:`${ae.value&&t.maxCollapseTags===1?i.selectionWidth-i.collapseItemWidth-$n:i.selectionWidth}px`}}),Dc=computed(()=>({maxWidth:`${i.selectionWidth}px`})),As=computed(()=>({width:`${Math.max(i.calculatorWidth,MINIMUM_INPUT_WIDTH)}px`}));return t.multiple&&!isArray$3(t.modelValue)&&r(UPDATE_MODEL_EVENT,[]),!t.multiple&&isArray$3(t.modelValue)&&r(UPDATE_MODEL_EVENT,""),useResizeObserver(L,Lr),useResizeObserver(re,Fr),useResizeObserver(ue,Vr),useResizeObserver(de,Vr),useResizeObserver(ie,Qr),useResizeObserver(ae,qr),onMounted(()=>{yr()}),{inputId:er,contentId:n,nsSelect:g,nsInput:y,states:i,isFocused:Ie,expanded:At,optionsArray:wr,hoverOption:ze,selectSize:Ar,filteredOptionsCount:Cr,resetCalculatorWidth:Fr,updateTooltip:Vr,updateTagTooltip:Qr,debouncedOnInputChange:Xr,onInput:xn,deletePrevTag:Nn,deleteTag:Jr,deleteSelected:wn,handleOptionSelect:Un,scrollToOption:Pn,hasModelValue:dr,shouldShowPlaceholder:xr,currentPlaceholder:Nr,showClose:lr,iconComponent:nr,iconReverse:ur,validateState:ar,validateIcon:gr,showNewOption:mr,updateOptions:_r,collapseTagSize:Er,setSelected:yr,selectDisabled:or,emptyText:hr,handleCompositionStart:no,handleCompositionUpdate:Ro,handleCompositionEnd:Ho,onOptionCreate:Cn,onOptionDestroy:vn,handleMenuEnter:Po,handleFocus:Ve,focus:Qo,blur:Ga,handleBlur:kt,handleClearClick:ws,handleClickOutside:So,handleEsc:Ps,toggleMenu:ao,selectOption:Sa,getValueKey:pa,navigateOptions:wo,dropdownMenuVisible:sr,showTagList:Ya,collapseTagList:ea,tagStyle:$a,collapseTagStyle:Dc,inputStyle:As,popperRef:Vo,inputRef:z,tooltipRef:$,tagTooltipRef:V,calculatorRef:re,prefixRef:oe,suffixRef:le,selectRef:k,wrapperRef:de,selectionRef:L,scrollbarRef:Fe,menuRef:ue,tagMenuRef:ie,collapseItemRef:ae}};var ElOptions=defineComponent({name:"ElOptions",setup(t,{slots:r}){const e=inject(selectKey);let n=[];return()=>{var g,y;const i=(g=r.default)==null?void 0:g.call(r),k=[];function L($){isArray$3($)&&$.forEach(V=>{var z,re,oe,le;const ue=(z=(V==null?void 0:V.type)||{})==null?void 0:z.name;ue==="ElOptionGroup"?L(!isString$2(V.children)&&!isArray$3(V.children)&&isFunction$3((re=V.children)==null?void 0:re.default)?(oe=V.children)==null?void 0:oe.default():V.children):ue==="ElOption"?k.push((le=V.props)==null?void 0:le.value):isArray$3(V.children)&&L(V.children)})}return i.length&&L((y=i[0])==null?void 0:y.children),isEqual(k,n)||(n=k,e&&(e.states.optionValues=k)),i}}});const SelectProps=buildProps({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:useSizeProp,effect:{type:definePropType(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:definePropType(String),values:Ee,default:"bottom-start"},fallbackPlacements:{type:definePropType(Array),default:["bottom-start","top-start","right","left"]},ariaLabel:{type:String,default:void 0}}),COMPONENT_NAME$2="ElSelect",_sfc_main$u=defineComponent({name:COMPONENT_NAME$2,componentName:COMPONENT_NAME$2,components:{ElInput,ElSelectMenu,ElOption:Option,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:SelectProps,emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:r}){const e=useSelect(t,r);return provide(selectKey,reactive({props:t,states:e.states,optionsArray:e.optionsArray,handleOptionSelect:e.handleOptionSelect,onOptionCreate:e.onOptionCreate,onOptionDestroy:e.onOptionDestroy,selectRef:e.selectRef,setSelected:e.setSelected})),{...e}}}),_hoisted_1$m=["id","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],_hoisted_2$e=["textContent"];function _sfc_render$4(t,r,e,n,g,y){const i=resolveComponent("el-tag"),k=resolveComponent("el-tooltip"),L=resolveComponent("el-icon"),$=resolveComponent("el-option"),V=resolveComponent("el-options"),z=resolveComponent("el-scrollbar"),re=resolveComponent("el-select-menu"),oe=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:r[14]||(r[14]=le=>t.states.inputHovering=!0),onMouseleave:r[15]||(r[15]=le=>t.states.inputHovering=!1),onClick:r[16]||(r[16]=withModifiers((...le)=>t.toggleMenu&&t.toggleMenu(...le),["stop"]))},[createVNode(k,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:r[13]||(r[13]=le=>t.states.isBeforeHide=!1)},{default:withCtx(()=>{var le;return[createBaseVNode("div",{ref:"wrapperRef",class:normalizeClass([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,ref:"prefixRef",class:normalizeClass(t.nsSelect.e("prefix"))},[renderSlot(t.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?renderSlot(t.$slots,"tag",{key:0},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.showTagList,ue=>(openBlock(),createElementBlock("div",{key:t.getValueKey(ue),class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{closable:!t.selectDisabled&&!ue.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:normalizeStyle(t.tagStyle),onClose:ie=>t.deleteTag(ie,ue)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},toDisplayString(ue.currentLabel),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(openBlock(),createBlock(k,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:withCtx(()=>[createBaseVNode("div",{ref:"collapseItemRef",class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:normalizeStyle(t.collapseTagStyle)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))}," + "+toDisplayString(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:withCtx(()=>[createBaseVNode("div",{ref:"tagMenuRef",class:normalizeClass(t.nsSelect.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.collapseTagList,ue=>(openBlock(),createElementBlock("div",{key:t.getValueKey(ue),class:normalizeClass(t.nsSelect.e("selected-item"))},[createVNode(i,{class:"in-tooltip",closable:!t.selectDisabled&&!ue.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:ie=>t.deleteTag(ie,ue)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(t.nsSelect.e("tags-text"))},toDisplayString(ue.currentLabel),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):createCommentVNode("v-if",!0)]):createCommentVNode("v-if",!0),t.selectDisabled?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[withDirectives(createBaseVNode("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":r[0]||(r[0]=ue=>t.states.inputValue=ue),type:"text",class:normalizeClass([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:normalizeStyle(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((le=t.hoverOption)==null?void 0:le.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:r[1]||(r[1]=(...ue)=>t.handleFocus&&t.handleFocus(...ue)),onBlur:r[2]||(r[2]=(...ue)=>t.handleBlur&&t.handleBlur(...ue)),onKeydown:[r[3]||(r[3]=withKeys(withModifiers(ue=>t.navigateOptions("next"),["stop","prevent"]),["down"])),r[4]||(r[4]=withKeys(withModifiers(ue=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),r[5]||(r[5]=withKeys(withModifiers((...ue)=>t.handleEsc&&t.handleEsc(...ue),["stop","prevent"]),["esc"])),r[6]||(r[6]=withKeys(withModifiers((...ue)=>t.selectOption&&t.selectOption(...ue),["stop","prevent"]),["enter"])),r[7]||(r[7]=withKeys(withModifiers((...ue)=>t.deletePrevTag&&t.deletePrevTag(...ue),["stop"]),["delete"]))],onCompositionstart:r[8]||(r[8]=(...ue)=>t.handleCompositionStart&&t.handleCompositionStart(...ue)),onCompositionupdate:r[9]||(r[9]=(...ue)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...ue)),onCompositionend:r[10]||(r[10]=(...ue)=>t.handleCompositionEnd&&t.handleCompositionEnd(...ue)),onInput:r[11]||(r[11]=(...ue)=>t.onInput&&t.onInput(...ue)),onClick:r[12]||(r[12]=withModifiers((...ue)=>t.toggleMenu&&t.toggleMenu(...ue),["stop"]))},null,46,_hoisted_1$m),[[vModelText,t.states.inputValue]]),t.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(t.nsSelect.e("input-calculator")),textContent:toDisplayString(t.states.inputValue)},null,10,_hoisted_2$e)):createCommentVNode("v-if",!0)],2)),t.shouldShowPlaceholder?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[createBaseVNode("span",null,toDisplayString(t.currentPlaceholder),1)],2)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{ref:"suffixRef",class:normalizeClass(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(openBlock(),createBlock(L,{key:0,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.showClose&&t.clearIcon?(openBlock(),createBlock(L,{key:1,class:normalizeClass([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),t.validateState&&t.validateIcon?(openBlock(),createBlock(L,{key:2,class:normalizeClass([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)]}),content:withCtx(()=>[createVNode(re,{ref:"menuRef"},{default:withCtx(()=>[t.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.nsSelect.be("dropdown","header"))},[renderSlot(t.$slots,"header")],2)):createCommentVNode("v-if",!0),withDirectives(createVNode(z,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:normalizeClass([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:withCtx(()=>[t.showNewOption?(openBlock(),createBlock($,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(V,null,{default:withCtx(()=>[renderSlot(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[vShow,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.nsSelect.be("dropdown","loading"))},[renderSlot(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.nsSelect.be("dropdown","empty"))},[renderSlot(t.$slots,"empty",{},()=>[createBaseVNode("span",null,toDisplayString(t.emptyText),1)])],2)):createCommentVNode("v-if",!0),t.$slots.footer?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(t.nsSelect.be("dropdown","footer"))},[renderSlot(t.$slots,"footer")],2)):createCommentVNode("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],34)),[[oe,t.handleClickOutside,t.popperRef]])}var Select=_export_sfc$1(_sfc_main$u,[["render",_sfc_render$4],["__file","select.vue"]]);const _sfc_main$t=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const r=useNamespace("select"),e=ref(null),n=getCurrentInstance(),g=ref([]);provide(selectGroupKey,reactive({...toRefs(t)}));const y=computed(()=>g.value.some(L=>L.visible===!0)),i=L=>{const $=[];return isArray$3(L.children)&&L.children.forEach(V=>{var z,re;V.type&&V.type.name==="ElOption"&&V.component&&V.component.proxy?$.push(V.component.proxy):(z=V.children)!=null&&z.length?$.push(...i(V)):(re=V.component)!=null&&re.subTree&&$.push(...i(V.component.subTree))}),$},k=()=>{g.value=i(n.subTree)};return onMounted(()=>{k()}),useMutationObserver(e,k,{attributes:!0,subtree:!0,childList:!0}),{groupRef:e,visible:y,ns:r}}});function _sfc_render$3(t,r,e,n,g,y){return withDirectives((openBlock(),createElementBlock("ul",{ref:"groupRef",class:normalizeClass(t.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(t.ns.be("group","title"))},toDisplayString(t.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(t.ns.b("group"))},[renderSlot(t.$slots,"default")],2)])],2)),[[vShow,t.visible]])}var OptionGroup=_export_sfc$1(_sfc_main$t,[["render",_sfc_render$3],["__file","option-group.vue"]]);const ElSelect=withInstall(Select,{Option,OptionGroup}),ElOption=withNoopInstall(Option);withNoopInstall(OptionGroup);const usePagination=()=>inject(elPaginationKey,{}),paginationSizesProps=buildProps({pageSize:{type:Number,required:!0},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:componentSizes}}),__default__$a=defineComponent({name:"ElPaginationSizes"}),_sfc_main$s=defineComponent({...__default__$a,props:paginationSizesProps,emits:["page-size-change"],setup(t,{emit:r}){const e=t,{t:n}=useLocale(),g=useNamespace("pagination"),y=usePagination(),i=ref(e.pageSize);watch(()=>e.pageSizes,($,V)=>{if(!isEqual($,V)&&Array.isArray($)){const z=$.includes(e.pageSize)?e.pageSize:e.pageSizes[0];r("page-size-change",z)}}),watch(()=>e.pageSize,$=>{i.value=$});const k=computed(()=>e.pageSizes);function L($){var V;$!==i.value&&(i.value=$,(V=y.handleSizeChange)==null||V.call(y,Number($)))}return($,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(g).e("sizes"))},[createVNode(unref(ElSelect),{"model-value":i.value,disabled:$.disabled,"popper-class":$.popperClass,size:$.size,teleported:$.teleported,"validate-event":!1,onChange:L},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(k),z=>(openBlock(),createBlock(unref(ElOption),{key:z,value:z,label:z+unref(n)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var Sizes=_export_sfc$1(_sfc_main$s,[["__file","sizes.vue"]]);const paginationJumperProps=buildProps({size:{type:String,values:componentSizes}}),_hoisted_1$l=["disabled"],__default__$9=defineComponent({name:"ElPaginationJumper"}),_sfc_main$r=defineComponent({...__default__$9,props:paginationJumperProps,setup(t){const{t:r}=useLocale(),e=useNamespace("pagination"),{pageCount:n,disabled:g,currentPage:y,changeEvent:i}=usePagination(),k=ref(),L=computed(()=>{var z;return(z=k.value)!=null?z:y==null?void 0:y.value});function $(z){k.value=z?+z:""}function V(z){z=Math.trunc(+z),i==null||i(z),k.value=void 0}return(z,re)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(e).e("jump")),disabled:unref(g)},[createBaseVNode("span",{class:normalizeClass([unref(e).e("goto")])},toDisplayString(unref(r)("el.pagination.goto")),3),createVNode(unref(ElInput),{size:z.size,class:normalizeClass([unref(e).e("editor"),unref(e).is("in-pagination")]),min:1,max:unref(n),disabled:unref(g),"model-value":unref(L),"validate-event":!1,label:unref(r)("el.pagination.page"),type:"number","onUpdate:modelValue":$,onChange:V},null,8,["size","class","max","disabled","model-value","label"]),createBaseVNode("span",{class:normalizeClass([unref(e).e("classifier")])},toDisplayString(unref(r)("el.pagination.pageClassifier")),3)],10,_hoisted_1$l))}});var Jumper=_export_sfc$1(_sfc_main$r,[["__file","jumper.vue"]]);const paginationTotalProps=buildProps({total:{type:Number,default:1e3}}),_hoisted_1$k=["disabled"],__default__$8=defineComponent({name:"ElPaginationTotal"}),_sfc_main$q=defineComponent({...__default__$8,props:paginationTotalProps,setup(t){const{t:r}=useLocale(),e=useNamespace("pagination"),{disabled:n}=usePagination();return(g,y)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(e).e("total")),disabled:unref(n)},toDisplayString(unref(r)("el.pagination.total",{total:g.total})),11,_hoisted_1$k))}});var Total=_export_sfc$1(_sfc_main$q,[["__file","total.vue"]]);const paginationPagerProps=buildProps({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),_hoisted_1$j=["onKeyup"],_hoisted_2$d=["aria-current","aria-label","tabindex"],_hoisted_3$a=["tabindex","aria-label"],_hoisted_4$8=["aria-current","aria-label","tabindex"],_hoisted_5$7=["tabindex","aria-label"],_hoisted_6$4=["aria-current","aria-label","tabindex"],__default__$7=defineComponent({name:"ElPaginationPager"}),_sfc_main$p=defineComponent({...__default__$7,props:paginationPagerProps,emits:["change"],setup(t,{emit:r}){const e=t,n=useNamespace("pager"),g=useNamespace("icon"),{t:y}=useLocale(),i=ref(!1),k=ref(!1),L=ref(!1),$=ref(!1),V=ref(!1),z=ref(!1),re=computed(()=>{const Ie=e.pagerCount,Ve=(Ie-1)/2,kt=Number(e.currentPage),At=Number(e.pageCount);let ze=!1,Et=!1;At>Ie&&(kt>Ie-Ve&&(ze=!0),kt<At-Ve&&(Et=!0));const cr=[];if(ze&&!Et){const er=At-(Ie-2);for(let or=er;or<At;or++)cr.push(or)}else if(!ze&&Et)for(let er=2;er<Ie;er++)cr.push(er);else if(ze&&Et){const er=Math.floor(Ie/2)-1;for(let or=kt-er;or<=kt+er;or++)cr.push(or)}else for(let er=2;er<At;er++)cr.push(er);return cr}),oe=computed(()=>["more","btn-quickprev",g.b(),n.is("disabled",e.disabled)]),le=computed(()=>["more","btn-quicknext",g.b(),n.is("disabled",e.disabled)]),ue=computed(()=>e.disabled?-1:0);watchEffect(()=>{const Ie=(e.pagerCount-1)/2;i.value=!1,k.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-Ie&&(i.value=!0),e.currentPage<e.pageCount-Ie&&(k.value=!0))});function ie(Ie=!1){e.disabled||(Ie?L.value=!0:$.value=!0)}function ae(Ie=!1){Ie?V.value=!0:z.value=!0}function Fe(Ie){const Ve=Ie.target;if(Ve.tagName.toLowerCase()==="li"&&Array.from(Ve.classList).includes("number")){const kt=Number(Ve.textContent);kt!==e.currentPage&&r("change",kt)}else Ve.tagName.toLowerCase()==="li"&&Array.from(Ve.classList).includes("more")&&de(Ie)}function de(Ie){const Ve=Ie.target;if(Ve.tagName.toLowerCase()==="ul"||e.disabled)return;let kt=Number(Ve.textContent);const At=e.pageCount,ze=e.currentPage,Et=e.pagerCount-2;Ve.className.includes("more")&&(Ve.className.includes("quickprev")?kt=ze-Et:Ve.className.includes("quicknext")&&(kt=ze+Et)),Number.isNaN(+kt)||(kt<1&&(kt=1),kt>At&&(kt=At)),kt!==ze&&r("change",kt)}return(Ie,Ve)=>(openBlock(),createElementBlock("ul",{class:normalizeClass(unref(n).b()),onClick:de,onKeyup:withKeys(Fe,["enter"])},[Ie.pageCount>0?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass([[unref(n).is("active",Ie.currentPage===1),unref(n).is("disabled",Ie.disabled)],"number"]),"aria-current":Ie.currentPage===1,"aria-label":unref(y)("el.pagination.currentPage",{pager:1}),tabindex:unref(ue)}," 1 ",10,_hoisted_2$d)):createCommentVNode("v-if",!0),i.value?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(unref(oe)),tabindex:unref(ue),"aria-label":unref(y)("el.pagination.prevPages",{pager:Ie.pagerCount-2}),onMouseenter:Ve[0]||(Ve[0]=kt=>ie(!0)),onMouseleave:Ve[1]||(Ve[1]=kt=>L.value=!1),onFocus:Ve[2]||(Ve[2]=kt=>ae(!0)),onBlur:Ve[3]||(Ve[3]=kt=>V.value=!1)},[(L.value||V.value)&&!Ie.disabled?(openBlock(),createBlock(unref(d_arrow_left_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_3$a)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),kt=>(openBlock(),createElementBlock("li",{key:kt,class:normalizeClass([[unref(n).is("active",Ie.currentPage===kt),unref(n).is("disabled",Ie.disabled)],"number"]),"aria-current":Ie.currentPage===kt,"aria-label":unref(y)("el.pagination.currentPage",{pager:kt}),tabindex:unref(ue)},toDisplayString(kt),11,_hoisted_4$8))),128)),k.value?(openBlock(),createElementBlock("li",{key:2,class:normalizeClass(unref(le)),tabindex:unref(ue),"aria-label":unref(y)("el.pagination.nextPages",{pager:Ie.pagerCount-2}),onMouseenter:Ve[4]||(Ve[4]=kt=>ie()),onMouseleave:Ve[5]||(Ve[5]=kt=>$.value=!1),onFocus:Ve[6]||(Ve[6]=kt=>ae()),onBlur:Ve[7]||(Ve[7]=kt=>z.value=!1)},[($.value||z.value)&&!Ie.disabled?(openBlock(),createBlock(unref(d_arrow_right_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_5$7)):createCommentVNode("v-if",!0),Ie.pageCount>1?(openBlock(),createElementBlock("li",{key:3,class:normalizeClass([[unref(n).is("active",Ie.currentPage===Ie.pageCount),unref(n).is("disabled",Ie.disabled)],"number"]),"aria-current":Ie.currentPage===Ie.pageCount,"aria-label":unref(y)("el.pagination.currentPage",{pager:Ie.pageCount}),tabindex:unref(ue)},toDisplayString(Ie.pageCount),11,_hoisted_6$4)):createCommentVNode("v-if",!0)],42,_hoisted_1$j))}});var Pager=_export_sfc$1(_sfc_main$p,[["__file","pager.vue"]]);const isAbsent=t=>typeof t!="number",paginationProps=buildProps({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>isNumber$1(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:iconPropType,default:()=>arrow_left_default},nextText:{type:String,default:""},nextIcon:{type:iconPropType,default:()=>arrow_right_default},teleported:{type:Boolean,default:!0},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),paginationEmits={"update:current-page":t=>isNumber$1(t),"update:page-size":t=>isNumber$1(t),"size-change":t=>isNumber$1(t),change:(t,r)=>isNumber$1(t)&&isNumber$1(r),"current-change":t=>isNumber$1(t),"prev-click":t=>isNumber$1(t),"next-click":t=>isNumber$1(t)},componentName="ElPagination";var Pagination=defineComponent({name:componentName,props:paginationProps,emits:paginationEmits,setup(t,{emit:r,slots:e}){const{t:n}=useLocale(),g=useNamespace("pagination"),y=getCurrentInstance().vnode.props||{},i="onUpdate:currentPage"in y||"onUpdate:current-page"in y||"onCurrentChange"in y,k="onUpdate:pageSize"in y||"onUpdate:page-size"in y||"onSizeChange"in y,L=computed(()=>{if(isAbsent(t.total)&&isAbsent(t.pageCount)||!isAbsent(t.currentPage)&&!i)return!1;if(t.layout.includes("sizes")){if(isAbsent(t.pageCount)){if(!isAbsent(t.total)&&!isAbsent(t.pageSize)&&!k)return!1}else if(!k)return!1}return!0}),$=ref(isAbsent(t.defaultPageSize)?10:t.defaultPageSize),V=ref(isAbsent(t.defaultCurrentPage)?1:t.defaultCurrentPage),z=computed({get(){return isAbsent(t.pageSize)?$.value:t.pageSize},set(de){isAbsent(t.pageSize)&&($.value=de),k&&(r("update:page-size",de),r("size-change",de))}}),re=computed(()=>{let de=0;return isAbsent(t.pageCount)?isAbsent(t.total)||(de=Math.max(1,Math.ceil(t.total/z.value))):de=t.pageCount,de}),oe=computed({get(){return isAbsent(t.currentPage)?V.value:t.currentPage},set(de){let Ie=de;de<1?Ie=1:de>re.value&&(Ie=re.value),isAbsent(t.currentPage)&&(V.value=Ie),i&&(r("update:current-page",Ie),r("current-change",Ie))}});watch(re,de=>{oe.value>de&&(oe.value=de)}),watch([oe,z],de=>{r("change",...de)},{flush:"post"});function le(de){oe.value=de}function ue(de){z.value=de;const Ie=re.value;oe.value>Ie&&(oe.value=Ie)}function ie(){t.disabled||(oe.value-=1,r("prev-click",oe.value))}function ae(){t.disabled||(oe.value+=1,r("next-click",oe.value))}function Fe(de,Ie){de&&(de.props||(de.props={}),de.props.class=[de.props.class,Ie].join(" "))}return provide(elPaginationKey,{pageCount:re,disabled:computed(()=>t.disabled),currentPage:oe,changeEvent:le,handleSizeChange:ue}),()=>{var de,Ie;if(!L.value)return n("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&re.value<=1)return null;const Ve=[],kt=[],At=h$1("div",{class:g.e("rightwrapper")},kt),ze={prev:h$1(Prev,{disabled:t.disabled,currentPage:oe.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:ie}),jumper:h$1(Jumper,{size:t.small?"small":"default"}),pager:h$1(Pager,{currentPage:oe.value,pageCount:re.value,pagerCount:t.pagerCount,onChange:le,disabled:t.disabled}),next:h$1(Next,{disabled:t.disabled,currentPage:oe.value,pageCount:re.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:ae}),sizes:h$1(Sizes,{pageSize:z.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:t.small?"small":"default"}),slot:(Ie=(de=e==null?void 0:e.default)==null?void 0:de.call(e))!=null?Ie:null,total:h$1(Total,{total:isAbsent(t.total)?0:t.total})},Et=t.layout.split(",").map(er=>er.trim());let cr=!1;return Et.forEach(er=>{if(er==="->"){cr=!0;return}cr?kt.push(ze[er]):Ve.push(ze[er])}),Fe(Ve[0],g.is("first")),Fe(Ve[Ve.length-1],g.is("last")),cr&&kt.length>0&&(Fe(kt[0],g.is("first")),Fe(kt[kt.length-1],g.is("last")),Ve.push(At)),h$1("div",{class:[g.b(),g.is("background",t.background),{[g.m("small")]:t.small}]},Ve)}}});const ElPagination=withInstall(Pagination),progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:t=>`${t}%`}}),_hoisted_1$i=["aria-valuenow"],_hoisted_2$c={viewBox:"0 0 100 100"},_hoisted_3$9=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$7=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$6={key:0},__default__$6=defineComponent({name:"ElProgress"}),_sfc_main$o=defineComponent({...__default__$6,props:progressProps,setup(t){const r=t,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=useNamespace("progress"),g=computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:Fe(r.percentage)})),y=computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),i=computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(y.value)/2}`,10):0),k=computed(()=>{const de=i.value,Ie=r.type==="dashboard";return`
          M 50 50
          m 0 ${Ie?"":"-"}${de}
          a ${de} ${de} 0 1 1 0 ${Ie?"-":""}${de*2}
          a ${de} ${de} 0 1 1 0 ${Ie?"":"-"}${de*2}
          `}),L=computed(()=>2*Math.PI*i.value),$=computed(()=>r.type==="dashboard"?.75:1),V=computed(()=>`${-1*L.value*(1-$.value)/2}px`),z=computed(()=>({strokeDasharray:`${L.value*$.value}px, ${L.value}px`,strokeDashoffset:V.value})),re=computed(()=>({strokeDasharray:`${L.value*$.value*(r.percentage/100)}px, ${L.value}px`,strokeDashoffset:V.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),oe=computed(()=>{let de;return r.color?de=Fe(r.percentage):de=e[r.status]||e.default,de}),le=computed(()=>r.status==="warning"?warning_filled_default:r.type==="line"?r.status==="success"?circle_check_default:circle_close_default:r.status==="success"?check_default:close_default),ue=computed(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),ie=computed(()=>r.format(r.percentage));function ae(de){const Ie=100/de.length;return de.map((kt,At)=>isString$2(kt)?{color:kt,percentage:(At+1)*Ie}:kt).sort((kt,At)=>kt.percentage-At.percentage)}const Fe=de=>{var Ie;const{color:Ve}=r;if(isFunction$3(Ve))return Ve(de);if(isString$2(Ve))return Ve;{const kt=ae(Ve);for(const At of kt)if(At.percentage>de)return At.color;return(Ie=kt[kt.length-1])==null?void 0:Ie.color}};return(de,Ie)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(de.type),unref(n).is(de.status),{[unref(n).m("without-text")]:!de.showText,[unref(n).m("text-inside")]:de.textInside}]),role:"progressbar","aria-valuenow":de.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[de.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(n).be("bar","outer")),style:normalizeStyle({height:`${de.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(n).be("bar","inner"),{[unref(n).bem("bar","inner","indeterminate")]:de.indeterminate},{[unref(n).bem("bar","inner","striped")]:de.striped},{[unref(n).bem("bar","inner","striped-flow")]:de.stripedFlow}]),style:normalizeStyle(unref(g))},[(de.showText||de.$slots.default)&&de.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).be("bar","innerText"))},[renderSlot(de.$slots,"default",{percentage:de.percentage},()=>[createBaseVNode("span",null,toDisplayString(unref(ie)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(n).b("circle")),style:normalizeStyle({height:`${de.width}px`,width:`${de.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$c,[createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","track")),d:unref(k),stroke:`var(${unref(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":de.strokeLinecap,"stroke-width":unref(y),fill:"none",style:normalizeStyle(unref(z))},null,14,_hoisted_3$9),createBaseVNode("path",{class:normalizeClass(unref(n).be("circle","path")),d:unref(k),stroke:unref(oe),fill:"none",opacity:de.percentage?1:0,"stroke-linecap":de.strokeLinecap,"stroke-width":unref(y),style:normalizeStyle(unref(re))},null,14,_hoisted_4$7)]))],6)),(de.showText||de.$slots.default)&&!de.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(n).e("text")),style:normalizeStyle({fontSize:`${unref(ue)}px`})},[renderSlot(de.$slots,"default",{percentage:de.percentage},()=>[de.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(le))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$6,toDisplayString(unref(ie)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$i))}});var Progress=_export_sfc$1(_sfc_main$o,[["__file","progress.vue"]]);const ElProgress=withInstall(Progress),spaceItemProps=buildProps({prefixCls:{type:String}}),SpaceItem=defineComponent({name:"ElSpaceItem",props:spaceItemProps,setup(t,{slots:r}){const e=useNamespace("space"),n=computed(()=>`${t.prefixCls||e.b()}__item`);return()=>h$1("div",{class:n.value},renderSlot(r,"default"))}}),SIZE_MAP={small:8,default:12,large:16};function useSpace(t){const r=useNamespace("space"),e=computed(()=>[r.b(),r.m(t.direction),t.class]),n=ref(0),g=ref(0),y=computed(()=>{const k=t.wrap||t.fill?{flexWrap:"wrap"}:{},L={alignItems:t.alignment},$={rowGap:`${g.value}px`,columnGap:`${n.value}px`};return[k,L,$,t.style]}),i=computed(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return watchEffect(()=>{const{size:k="small",wrap:L,direction:$,fill:V}=t;if(isArray$3(k)){const[z=0,re=0]=k;n.value=z,g.value=re}else{let z;isNumber$1(k)?z=k:z=SIZE_MAP[k||"small"]||SIZE_MAP.small,(L||V)&&$==="horizontal"?n.value=g.value=z:$==="horizontal"?(n.value=z,g.value=0):(g.value=z,n.value=0)}}),{classes:e,containerStyle:y,itemStyle:i}}const spaceProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:definePropType([String,Object,Array]),default:""},style:{type:definePropType([String,Array,Object]),default:""},alignment:{type:definePropType(String),default:"center"},prefixCls:{type:String},spacer:{type:definePropType([Object,String,Number,Array]),default:null,validator:t=>isVNode(t)||isNumber$1(t)||isString$2(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:componentSizes,validator:t=>isNumber$1(t)||isArray$3(t)&&t.length===2&&t.every(isNumber$1)}}),Space=defineComponent({name:"ElSpace",props:spaceProps,setup(t,{slots:r}){const{classes:e,containerStyle:n,itemStyle:g}=useSpace(t);function y(i,k="",L=[]){const{prefixCls:$}=t;return i.forEach((V,z)=>{isFragment(V)?isArray$3(V.children)&&V.children.forEach((re,oe)=>{isFragment(re)&&isArray$3(re.children)?y(re.children,`${k+oe}-`,L):L.push(createVNode(SpaceItem,{style:g.value,prefixCls:$,key:`nested-${k+oe}`},{default:()=>[re]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}):isValidElementNode(V)&&L.push(createVNode(SpaceItem,{style:g.value,prefixCls:$,key:`LoopKey${k+z}`},{default:()=>[V]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}),L}return()=>{var i;const{spacer:k,direction:L}=t,$=renderSlot(r,"default",{key:0},()=>[]);if(((i=$.children)!=null?i:[]).length===0)return null;if(isArray$3($.children)){let V=y($.children);if(k){const z=V.length-1;V=V.reduce((re,oe,le)=>{const ue=[...re,oe];return le!==z&&ue.push(createVNode("span",{style:[g.value,L==="vertical"?"width: 100%":null],key:le},[isVNode(k)?k:createTextVNode(k,PatchFlags.TEXT)],PatchFlags.STYLE)),ue},[])}return createVNode("div",{class:e.value,style:n.value},V,PatchFlags.STYLE|PatchFlags.CLASS)}return $.children}}}),ElSpace=withInstall(Space),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1},label:{type:String,default:void 0}}),switchEmits={[UPDATE_MODEL_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[CHANGE_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t),[INPUT_EVENT]:t=>isBoolean$1(t)||isString$2(t)||isNumber$1(t)},_hoisted_1$h=["onClick"],_hoisted_2$b=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$8=["aria-hidden"],_hoisted_4$6=["aria-hidden"],_hoisted_5$5=["aria-hidden"],COMPONENT_NAME$1="ElSwitch",__default__$5=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$n=defineComponent({...__default__$5,props:switchProps,emits:switchEmits,setup(t,{expose:r,emit:e}){const n=t,g=getCurrentInstance(),{formItem:y}=useFormItem(),i=useFormSize(),k=useNamespace("switch");(ze=>{ze.forEach(Et=>{useDeprecated({from:Et[0],replacement:Et[1],scope:COMPONENT_NAME$1,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},computed(()=>{var cr;return!!((cr=g.vnode.props)!=null&&cr[Et[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:$}=useFormItemInputId(n,{formItemContext:y}),V=useFormDisabled(computed(()=>n.loading)),z=ref(n.modelValue!==!1),re=ref(),oe=ref(),le=computed(()=>[k.b(),k.m(i.value),k.is("disabled",V.value),k.is("checked",de.value)]),ue=computed(()=>[k.e("label"),k.em("label","left"),k.is("active",!de.value)]),ie=computed(()=>[k.e("label"),k.em("label","right"),k.is("active",de.value)]),ae=computed(()=>({width:addUnit(n.width)}));watch(()=>n.modelValue,()=>{z.value=!0}),watch(()=>n.value,()=>{z.value=!1});const Fe=computed(()=>z.value?n.modelValue:n.value),de=computed(()=>Fe.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(Fe.value)||(e(UPDATE_MODEL_EVENT,n.inactiveValue),e(CHANGE_EVENT,n.inactiveValue),e(INPUT_EVENT,n.inactiveValue)),watch(de,ze=>{var Et;re.value.checked=ze,n.validateEvent&&((Et=y==null?void 0:y.validate)==null||Et.call(y,"change").catch(cr=>void 0))});const Ie=()=>{const ze=de.value?n.inactiveValue:n.activeValue;e(UPDATE_MODEL_EVENT,ze),e(CHANGE_EVENT,ze),e(INPUT_EVENT,ze),nextTick(()=>{re.value.checked=de.value})},Ve=()=>{if(V.value)return;const{beforeChange:ze}=n;if(!ze){Ie();return}const Et=ze();[isPromise(Et),isBoolean$1(Et)].includes(!0)||throwError(COMPONENT_NAME$1,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(Et)?Et.then(er=>{er&&Ie()}).catch(er=>{}):Et&&Ie()},kt=computed(()=>k.cssVarBlock({...n.activeColor?{"on-color":n.activeColor}:null,...n.inactiveColor?{"off-color":n.inactiveColor}:null,...n.borderColor?{"border-color":n.borderColor}:null})),At=()=>{var ze,Et;(Et=(ze=re.value)==null?void 0:ze.focus)==null||Et.call(ze)};return onMounted(()=>{re.value.checked=de.value}),r({focus:At,checked:de}),(ze,Et)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(le)),style:normalizeStyle(unref(kt)),onClick:withModifiers(Ve,["prevent"])},[createBaseVNode("input",{id:unref($),ref_key:"input",ref:re,class:normalizeClass(unref(k).e("input")),type:"checkbox",role:"switch","aria-checked":unref(de),"aria-disabled":unref(V),"aria-label":ze.label,name:ze.name,"true-value":ze.activeValue,"false-value":ze.inactiveValue,disabled:unref(V),tabindex:ze.tabindex,onChange:Ie,onKeydown:withKeys(Ve,["enter"])},null,42,_hoisted_2$b),!ze.inlinePrompt&&(ze.inactiveIcon||ze.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(ue))},[ze.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!ze.inactiveIcon&&ze.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(de)},toDisplayString(ze.inactiveText),9,_hoisted_3$8)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:oe,class:normalizeClass(unref(k).e("core")),style:normalizeStyle(unref(ae))},[ze.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).e("inner"))},[ze.activeIcon||ze.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(k).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(de)?ze.activeIcon:ze.inactiveIcon)))]),_:1},8,["class"])):ze.activeText||ze.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(k).is("text")),"aria-hidden":!unref(de)},toDisplayString(unref(de)?ze.activeText:ze.inactiveText),11,_hoisted_4$6)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).e("action"))},[ze.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(k).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):unref(de)?renderSlot(ze.$slots,"active-action",{key:1},()=>[ze.activeActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.activeActionIcon)))]),_:1})):createCommentVNode("v-if",!0)]):unref(de)?createCommentVNode("v-if",!0):renderSlot(ze.$slots,"inactive-action",{key:2},()=>[ze.inactiveActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)])],2)],6),!ze.inlinePrompt&&(ze.activeIcon||ze.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(ie))},[ze.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!ze.activeIcon&&ze.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(de)},toDisplayString(ze.activeText),9,_hoisted_5$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$h))}});var Switch=_export_sfc$1(_sfc_main$n,[["__file","switch.vue"]]);const ElSwitch=withInstall(Switch),getCell=function(t){var r;return(r=t.target)==null?void 0:r.closest("td")},orderBy=function(t,r,e,n,g){if(!r&&!n&&(!g||Array.isArray(g)&&!g.length))return t;typeof e=="string"?e=e==="descending"?-1:1:e=e&&e<0?-1:1;const y=n?null:function(k,L){return g?(Array.isArray(g)||(g=[g]),g.map($=>typeof $=="string"?get(k,$):$(k,L,t))):(r!=="$key"&&isObject$2(k)&&"$value"in k&&(k=k.$value),[isObject$2(k)?get(k,r):k])},i=function(k,L){if(n)return n(k.value,L.value);for(let $=0,V=k.key.length;$<V;$++){if(k.key[$]<L.key[$])return-1;if(k.key[$]>L.key[$])return 1}return 0};return t.map((k,L)=>({value:k,index:L,key:y?y(k,L):null})).sort((k,L)=>{let $=i(k,L);return $||($=k.index-L.index),$*+e}).map(k=>k.value)},getColumnById=function(t,r){let e=null;return t.columns.forEach(n=>{n.id===r&&(e=n)}),e},getColumnByKey=function(t,r){let e=null;for(let n=0;n<t.columns.length;n++){const g=t.columns[n];if(g.columnKey===r){e=g;break}}return e||throwError("ElTable",`No column matching with column-key: ${r}`),e},getColumnByCell=function(t,r,e){const n=(r.className||"").match(new RegExp(`${e}-table_[^\\s]+`,"gm"));return n?getColumnById(t,n[0]):null},getRowIdentity=(t,r)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof r=="string"){if(!r.includes("."))return`${t[r]}`;const e=r.split(".");let n=t;for(const g of e)n=n[g];return`${n}`}else if(typeof r=="function")return r.call(null,t)},getKeysMap=function(t,r){const e={};return(t||[]).forEach((n,g)=>{e[getRowIdentity(n,r)]={row:n,index:g}}),e};function mergeOptions(t,r){const e={};let n;for(n in t)e[n]=t[n];for(n in r)if(hasOwn(r,n)){const g=r[n];typeof g<"u"&&(e[n]=g)}return e}function parseWidth(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function parseMinWidth(t){return t===""||t!==void 0&&(t=parseWidth(t),Number.isNaN(t)&&(t=80)),t}function parseHeight(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function compose(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,e)=>(...n)=>r(e(...n)))}function toggleRowStatus(t,r,e){let n=!1;const g=t.indexOf(r),y=g!==-1,i=k=>{k==="add"?t.push(r):t.splice(g,1),n=!0,isArray$3(r.children)&&r.children.forEach(L=>{toggleRowStatus(t,L,e??!y)})};return isBoolean$1(e)?e&&!y?i("add"):!e&&y&&i("remove"):i(y?"remove":"add"),n}function walkTreeNode(t,r,e="children",n="hasChildren"){const g=i=>!(Array.isArray(i)&&i.length);function y(i,k,L){r(i,k,L),k.forEach($=>{if($[n]){r($,null,L+1);return}const V=$[e];g(V)||y($,V,L+1)})}t.forEach(i=>{if(i[n]){r(i,null,0);return}const k=i[e];g(k)||y(i,k,0)})}let removePopper=null;function createTablePopper(t,r,e,n){if((removePopper==null?void 0:removePopper.trigger)===e)return;removePopper==null||removePopper();const g=n==null?void 0:n.refs.tableWrapper,y=g==null?void 0:g.dataset.prefix,i={strategy:"fixed",...t.popperOptions},k=createVNode(ElTooltip,{content:r,virtualTriggering:!0,virtualRef:e,appendTo:g,placement:"top",transition:"none",offset:0,hideAfter:0,...t,popperOptions:i,onHide:()=>{removePopper==null||removePopper()}});k.appContext={...n.appContext,...n};const L=document.createElement("div");render(k,L),k.component.exposed.onOpen();const $=g==null?void 0:g.querySelector(`.${y}-scrollbar__wrap`);removePopper=()=>{render(null,L),$==null||$.removeEventListener("scroll",removePopper),removePopper=null},removePopper.trigger=e,$==null||$.addEventListener("scroll",removePopper)}function getCurrentColumns(t){return t.children?flatMap(t.children,getCurrentColumns):[t]}function getColSpan(t,r){return t+r.colSpan}const isFixedColumn=(t,r,e,n)=>{let g=0,y=t;const i=e.states.columns.value;if(n){const L=getCurrentColumns(n[t]);g=i.slice(0,i.indexOf(L[0])).reduce(getColSpan,0),y=g+L.reduce(getColSpan,0)-1}else g=t;let k;switch(r){case"left":y<e.states.fixedLeafColumnsLength.value&&(k="left");break;case"right":g>=i.length-e.states.rightFixedLeafColumnsLength.value&&(k="right");break;default:y<e.states.fixedLeafColumnsLength.value?k="left":g>=i.length-e.states.rightFixedLeafColumnsLength.value&&(k="right")}return k?{direction:k,start:g,after:y}:{}},getFixedColumnsClass=(t,r,e,n,g,y=0)=>{const i=[],{direction:k,start:L,after:$}=isFixedColumn(r,e,n,g);if(k){const V=k==="left";i.push(`${t}-fixed-column--${k}`),V&&$+y===n.states.fixedLeafColumnsLength.value-1?i.push("is-last-column"):!V&&L-y===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&i.push("is-first-column")}return i};function getOffset(t,r){return t+(r.realWidth===null||Number.isNaN(r.realWidth)?Number(r.width):r.realWidth)}const getFixedColumnOffset=(t,r,e,n)=>{const{direction:g,start:y=0,after:i=0}=isFixedColumn(t,r,e,n);if(!g)return;const k={},L=g==="left",$=e.states.columns.value;return L?k.left=$.slice(0,y).reduce(getOffset,0):k.right=$.slice(i+1).reverse().reduce(getOffset,0),k},ensurePosition=(t,r)=>{t&&(Number.isNaN(t[r])||(t[r]=`${t[r]}px`))};function useExpand(t){const r=getCurrentInstance(),e=ref(!1),n=ref([]);return{updateExpandRows:()=>{const L=t.data.value||[],$=t.rowKey.value;if(e.value)n.value=L.slice();else if($){const V=getKeysMap(n.value,$);n.value=L.reduce((z,re)=>{const oe=getRowIdentity(re,$);return V[oe]&&z.push(re),z},[])}else n.value=[]},toggleRowExpansion:(L,$)=>{toggleRowStatus(n.value,L,$)&&r.emit("expand-change",L,n.value.slice())},setExpandRowKeys:L=>{r.store.assertRowKey();const $=t.data.value||[],V=t.rowKey.value,z=getKeysMap($,V);n.value=L.reduce((re,oe)=>{const le=z[oe];return le&&re.push(le.row),re},[])},isRowExpanded:L=>{const $=t.rowKey.value;return $?!!getKeysMap(n.value,$)[getRowIdentity(L,$)]:n.value.includes(L)},states:{expandRows:n,defaultExpandAll:e}}}function useCurrent(t){const r=getCurrentInstance(),e=ref(null),n=ref(null),g=$=>{r.store.assertRowKey(),e.value=$,i($)},y=()=>{e.value=null},i=$=>{const{data:V,rowKey:z}=t;let re=null;z.value&&(re=(unref(V)||[]).find(oe=>getRowIdentity(oe,z.value)===$)),n.value=re,r.emit("current-change",n.value,null)};return{setCurrentRowKey:g,restoreCurrentRowKey:y,setCurrentRowByKey:i,updateCurrentRow:$=>{const V=n.value;if($&&$!==V){n.value=$,r.emit("current-change",n.value,V);return}!$&&V&&(n.value=null,r.emit("current-change",null,V))},updateCurrentRowData:()=>{const $=t.rowKey.value,V=t.data.value||[],z=n.value;if(!V.includes(z)&&z){if($){const re=getRowIdentity(z,$);i(re)}else n.value=null;n.value===null&&r.emit("current-change",null,z)}else e.value&&(i(e.value),y())},states:{_currentRowKey:e,currentRow:n}}}function useTree(t){const r=ref([]),e=ref({}),n=ref(16),g=ref(!1),y=ref({}),i=ref("hasChildren"),k=ref("children"),L=getCurrentInstance(),$=computed(()=>{if(!t.rowKey.value)return{};const ae=t.data.value||[];return z(ae)}),V=computed(()=>{const ae=t.rowKey.value,Fe=Object.keys(y.value),de={};return Fe.length&&Fe.forEach(Ie=>{if(y.value[Ie].length){const Ve={children:[]};y.value[Ie].forEach(kt=>{const At=getRowIdentity(kt,ae);Ve.children.push(At),kt[i.value]&&!de[At]&&(de[At]={children:[]})}),de[Ie]=Ve}}),de}),z=ae=>{const Fe=t.rowKey.value,de={};return walkTreeNode(ae,(Ie,Ve,kt)=>{const At=getRowIdentity(Ie,Fe);Array.isArray(Ve)?de[At]={children:Ve.map(ze=>getRowIdentity(ze,Fe)),level:kt}:g.value&&(de[At]={children:[],lazy:!0,level:kt})},k.value,i.value),de},re=(ae=!1,Fe=(de=>(de=L.store)==null?void 0:de.states.defaultExpandAll.value)())=>{var de;const Ie=$.value,Ve=V.value,kt=Object.keys(Ie),At={};if(kt.length){const ze=unref(e),Et=[],cr=(or,dr)=>{if(ae)return r.value?Fe||r.value.includes(dr):!!(Fe||or!=null&&or.expanded);{const lr=Fe||r.value&&r.value.includes(dr);return!!(or!=null&&or.expanded||lr)}};kt.forEach(or=>{const dr=ze[or],lr={...Ie[or]};if(lr.expanded=cr(dr,or),lr.lazy){const{loaded:nr=!1,loading:ur=!1}=dr||{};lr.loaded=!!nr,lr.loading=!!ur,Et.push(or)}At[or]=lr});const er=Object.keys(Ve);g.value&&er.length&&Et.length&&er.forEach(or=>{const dr=ze[or],lr=Ve[or].children;if(Et.includes(or)){if(At[or].children.length!==0)throw new Error("[ElTable]children must be an empty array.");At[or].children=lr}else{const{loaded:nr=!1,loading:ur=!1}=dr||{};At[or]={lazy:!0,loaded:!!nr,loading:!!ur,expanded:cr(dr,or),children:lr,level:""}}})}e.value=At,(de=L.store)==null||de.updateTableScrollY()};watch(()=>r.value,()=>{re(!0)}),watch(()=>$.value,()=>{re()}),watch(()=>V.value,()=>{re()});const oe=ae=>{r.value=ae,re()},le=(ae,Fe)=>{L.store.assertRowKey();const de=t.rowKey.value,Ie=getRowIdentity(ae,de),Ve=Ie&&e.value[Ie];if(Ie&&Ve&&"expanded"in Ve){const kt=Ve.expanded;Fe=typeof Fe>"u"?!Ve.expanded:Fe,e.value[Ie].expanded=Fe,kt!==Fe&&L.emit("expand-change",ae,Fe),L.store.updateTableScrollY()}},ue=ae=>{L.store.assertRowKey();const Fe=t.rowKey.value,de=getRowIdentity(ae,Fe),Ie=e.value[de];g.value&&Ie&&"loaded"in Ie&&!Ie.loaded?ie(ae,de,Ie):le(ae,void 0)},ie=(ae,Fe,de)=>{const{load:Ie}=L.props;Ie&&!e.value[Fe].loaded&&(e.value[Fe].loading=!0,Ie(ae,de,Ve=>{if(!Array.isArray(Ve))throw new TypeError("[ElTable] data must be an array");e.value[Fe].loading=!1,e.value[Fe].loaded=!0,e.value[Fe].expanded=!0,Ve.length&&(y.value[Fe]=Ve),L.emit("expand-change",ae,!0)}))};return{loadData:ie,loadOrToggle:ue,toggleTreeExpansion:le,updateTreeExpandKeys:oe,updateTreeData:re,normalize:z,states:{expandRowKeys:r,treeData:e,indent:n,lazy:g,lazyTreeNodeMap:y,lazyColumnIdentifier:i,childrenColumnName:k}}}const sortData=(t,r)=>{const e=r.sortingColumn;return!e||typeof e.sortable=="string"?t:orderBy(t,r.sortProp,r.sortOrder,e.sortMethod,e.sortBy)},doFlattenColumns=t=>{const r=[];return t.forEach(e=>{e.children&&e.children.length>0?r.push.apply(r,doFlattenColumns(e.children)):r.push(e)}),r};function useWatcher$1(){var t;const r=getCurrentInstance(),{size:e}=toRefs((t=r.proxy)==null?void 0:t.$props),n=ref(null),g=ref([]),y=ref([]),i=ref(!1),k=ref([]),L=ref([]),$=ref([]),V=ref([]),z=ref([]),re=ref([]),oe=ref([]),le=ref([]),ue=[],ie=ref(0),ae=ref(0),Fe=ref(0),de=ref(!1),Ie=ref([]),Ve=ref(!1),kt=ref(!1),At=ref(null),ze=ref({}),Et=ref(null),cr=ref(null),er=ref(null),or=ref(null),dr=ref(null);watch(g,()=>r.state&&ar(!1),{deep:!0});const lr=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},nr=_n=>{var Pn;(Pn=_n.children)==null||Pn.forEach(Cn=>{Cn.fixed=_n.fixed,nr(Cn)})},ur=()=>{k.value.forEach(no=>{nr(no)}),V.value=k.value.filter(no=>no.fixed===!0||no.fixed==="left"),z.value=k.value.filter(no=>no.fixed==="right"),V.value.length>0&&k.value[0]&&k.value[0].type==="selection"&&!k.value[0].fixed&&(k.value[0].fixed=!0,V.value.unshift(k.value[0]));const _n=k.value.filter(no=>!no.fixed);L.value=[].concat(V.value).concat(_n).concat(z.value);const Pn=doFlattenColumns(_n),Cn=doFlattenColumns(V.value),vn=doFlattenColumns(z.value);ie.value=Pn.length,ae.value=Cn.length,Fe.value=vn.length,$.value=[].concat(Cn).concat(Pn).concat(vn),i.value=V.value.length>0||z.value.length>0},ar=(_n,Pn=!1)=>{_n&&ur(),Pn?r.state.doLayout():r.state.debouncedUpdateLayout()},gr=_n=>Ie.value.includes(_n),pr=()=>{de.value=!1,Ie.value.length&&(Ie.value=[],r.emit("selection-change",[]))},hr=()=>{let _n;if(n.value){_n=[];const Pn=getKeysMap(Ie.value,n.value),Cn=getKeysMap(g.value,n.value);for(const vn in Pn)hasOwn(Pn,vn)&&!Cn[vn]&&_n.push(Pn[vn].row)}else _n=Ie.value.filter(Pn=>!g.value.includes(Pn));if(_n.length){const Pn=Ie.value.filter(Cn=>!_n.includes(Cn));Ie.value=Pn,r.emit("selection-change",Pn.slice())}},Cr=()=>(Ie.value||[]).slice(),wr=(_n,Pn=void 0,Cn=!0)=>{if(toggleRowStatus(Ie.value,_n,Pn)){const no=(Ie.value||[]).slice();Cn&&r.emit("select",no,_n),r.emit("selection-change",no)}},Sr=()=>{var _n,Pn;const Cn=kt.value?!de.value:!(de.value||Ie.value.length);de.value=Cn;let vn=!1,no=0;const Ro=(Pn=(_n=r==null?void 0:r.store)==null?void 0:_n.states)==null?void 0:Pn.rowKey.value;g.value.forEach((Ho,Vo)=>{const Po=Vo+no;At.value?At.value.call(null,Ho,Po)&&toggleRowStatus(Ie.value,Ho,Cn)&&(vn=!0):toggleRowStatus(Ie.value,Ho,Cn)&&(vn=!0),no+=Ar(getRowIdentity(Ho,Ro))}),vn&&r.emit("selection-change",Ie.value?Ie.value.slice():[]),r.emit("select-all",Ie.value)},mr=()=>{const _n=getKeysMap(Ie.value,n.value);g.value.forEach(Pn=>{const Cn=getRowIdentity(Pn,n.value),vn=_n[Cn];vn&&(Ie.value[vn.index]=Pn)})},_r=()=>{var _n,Pn,Cn;if(((_n=g.value)==null?void 0:_n.length)===0){de.value=!1;return}let vn;n.value&&(vn=getKeysMap(Ie.value,n.value));const no=function(Po){return vn?!!vn[getRowIdentity(Po,n.value)]:Ie.value.includes(Po)};let Ro=!0,Ho=0,Vo=0;for(let Po=0,Qo=(g.value||[]).length;Po<Qo;Po++){const Ga=(Cn=(Pn=r==null?void 0:r.store)==null?void 0:Pn.states)==null?void 0:Cn.rowKey.value,ws=Po+Vo,So=g.value[Po],Ps=At.value&&At.value.call(null,So,ws);if(no(So))Ho++;else if(!At.value||Ps){Ro=!1;break}Vo+=Ar(getRowIdentity(So,Ga))}Ho===0&&(Ro=!1),de.value=Ro},Ar=_n=>{var Pn;if(!r||!r.store)return 0;const{treeData:Cn}=r.store.states;let vn=0;const no=(Pn=Cn.value[_n])==null?void 0:Pn.children;return no&&(vn+=no.length,no.forEach(Ro=>{vn+=Ar(Ro)})),vn},Er=(_n,Pn)=>{Array.isArray(_n)||(_n=[_n]);const Cn={};return _n.forEach(vn=>{ze.value[vn.id]=Pn,Cn[vn.columnKey||vn.id]=Pn}),Cn},sr=(_n,Pn,Cn)=>{cr.value&&cr.value!==_n&&(cr.value.order=null),cr.value=_n,er.value=Pn,or.value=Cn},xr=()=>{let _n=unref(y);Object.keys(ze.value).forEach(Pn=>{const Cn=ze.value[Pn];if(!Cn||Cn.length===0)return;const vn=getColumnById({columns:$.value},Pn);vn&&vn.filterMethod&&(_n=_n.filter(no=>Cn.some(Ro=>vn.filterMethod.call(null,Ro,no,vn))))}),Et.value=_n},Nr=()=>{g.value=sortData(Et.value,{sortingColumn:cr.value,sortProp:er.value,sortOrder:or.value})},Mr=(_n=void 0)=>{_n&&_n.filter||xr(),Nr()},br=_n=>{const{tableHeaderRef:Pn}=r.refs;if(!Pn)return;const Cn=Object.assign({},Pn.filterPanels),vn=Object.keys(Cn);if(vn.length)if(typeof _n=="string"&&(_n=[_n]),Array.isArray(_n)){const no=_n.map(Ro=>getColumnByKey({columns:$.value},Ro));vn.forEach(Ro=>{const Ho=no.find(Vo=>Vo.id===Ro);Ho&&(Ho.filteredValue=[])}),r.store.commit("filterChange",{column:no,values:[],silent:!0,multi:!0})}else vn.forEach(no=>{const Ro=$.value.find(Ho=>Ho.id===no);Ro&&(Ro.filteredValue=[])}),ze.value={},r.store.commit("filterChange",{column:{},values:[],silent:!0})},yr=()=>{cr.value&&(sr(null,null,null),r.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Tr,toggleRowExpansion:Br,updateExpandRows:Lr,states:Fr,isRowExpanded:qr}=useExpand({data:g,rowKey:n}),{updateTreeExpandKeys:Vr,toggleTreeExpansion:Qr,updateTreeData:Tn,loadOrToggle:xn,states:Xr}=useTree({data:g,rowKey:n}),{updateCurrentRowData:Vn,updateCurrentRow:Zr,setCurrentRowKey:Nn,states:Jr}=useCurrent({data:g,rowKey:n});return{assertRowKey:lr,updateColumns:ur,scheduleLayout:ar,isSelected:gr,clearSelection:pr,cleanSelection:hr,getSelectionRows:Cr,toggleRowSelection:wr,_toggleAllSelection:Sr,toggleAllSelection:null,updateSelectionByRowKey:mr,updateAllSelected:_r,updateFilters:Er,updateCurrentRow:Zr,updateSort:sr,execFilter:xr,execSort:Nr,execQuery:Mr,clearFilter:br,clearSort:yr,toggleRowExpansion:Br,setExpandRowKeysAdapter:_n=>{Tr(_n),Vr(_n)},setCurrentRowKey:Nn,toggleRowExpansionAdapter:(_n,Pn)=>{$.value.some(({type:vn})=>vn==="expand")?Br(_n,Pn):Qr(_n,Pn)},isRowExpanded:qr,updateExpandRows:Lr,updateCurrentRowData:Vn,loadOrToggle:xn,updateTreeData:Tn,states:{tableSize:e,rowKey:n,data:g,_data:y,isComplex:i,_columns:k,originColumns:L,columns:$,fixedColumns:V,rightFixedColumns:z,leafColumns:re,fixedLeafColumns:oe,rightFixedLeafColumns:le,updateOrderFns:ue,leafColumnsLength:ie,fixedLeafColumnsLength:ae,rightFixedLeafColumnsLength:Fe,isAllSelected:de,selection:Ie,reserveSelection:Ve,selectOnIndeterminate:kt,selectable:At,filters:ze,filteredData:Et,sortingColumn:cr,sortProp:er,sortOrder:or,hoverRow:dr,...Fr,...Xr,...Jr}}}function replaceColumn(t,r){return t.map(e=>{var n;return e.id===r.id?r:((n=e.children)!=null&&n.length&&(e.children=replaceColumn(e.children,r)),e)})}function sortColumn(t){t.forEach(r=>{var e,n;r.no=(e=r.getColumnIndex)==null?void 0:e.call(r),(n=r.children)!=null&&n.length&&sortColumn(r.children)}),t.sort((r,e)=>r.no-e.no)}function useStore(){const t=getCurrentInstance(),r=useWatcher$1();return{ns:useNamespace("table"),...r,mutations:{setData(i,k){const L=unref(i._data)!==k;i.data.value=k,i._data.value=k,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),unref(i.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):L?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(i,k,L,$){const V=unref(i._columns);let z=[];L?(L&&!L.children&&(L.children=[]),L.children.push(k),z=replaceColumn(V,L)):(V.push(k),z=V),sortColumn(z),i._columns.value=z,i.updateOrderFns.push($),k.type==="selection"&&(i.selectable.value=k.selectable,i.reserveSelection.value=k.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(i,k){var L;((L=k.getColumnIndex)==null?void 0:L.call(k))!==k.no&&(sortColumn(i._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(i,k,L,$){const V=unref(i._columns)||[];if(L)L.children.splice(L.children.findIndex(re=>re.id===k.id),1),nextTick(()=>{var re;((re=L.children)==null?void 0:re.length)===0&&delete L.children}),i._columns.value=replaceColumn(V,L);else{const re=V.indexOf(k);re>-1&&(V.splice(re,1),i._columns.value=V)}const z=i.updateOrderFns.indexOf($);z>-1&&i.updateOrderFns.splice(z,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(i,k){const{prop:L,order:$,init:V}=k;if(L){const z=unref(i.columns).find(re=>re.property===L);z&&(z.order=$,t.store.updateSort(z,L,$),t.store.commit("changeSortCondition",{init:V}))}},changeSortCondition(i,k){const{sortingColumn:L,sortProp:$,sortOrder:V}=i,z=unref(L),re=unref($),oe=unref(V);oe===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const le={filter:!0};t.store.execQuery(le),(!k||!(k.silent||k.init))&&t.emit("sort-change",{column:z,prop:re,order:oe}),t.store.updateTableScrollY()},filterChange(i,k){const{column:L,values:$,silent:V}=k,z=t.store.updateFilters(L,$);t.store.execQuery(),V||t.emit("filter-change",z),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(i,k){t.store.toggleRowSelection(k),t.store.updateAllSelected()},setHoverRow(i,k){i.hoverRow.value=k},setCurrentRow(i,k){t.store.updateCurrentRow(k)}},commit:function(i,...k){const L=t.store.mutations;if(L[i])L[i].apply(t,[t.store.states].concat(k));else throw new Error(`Action not found: ${i}`)},updateTableScrollY:function(){nextTick(()=>t.layout.updateScrollY.apply(t.layout))}}}const InitialStateMap={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function createStore(t,r){if(!t)throw new Error("Table is required.");const e=useStore();return e.toggleAllSelection=debounce(e._toggleAllSelection,10),Object.keys(InitialStateMap).forEach(n=>{handleValue(getArrKeysValue(r,n),n,e)}),proxyTableProps(e,r),e}function proxyTableProps(t,r){Object.keys(InitialStateMap).forEach(e=>{watch(()=>getArrKeysValue(r,e),n=>{handleValue(n,e,t)})})}function handleValue(t,r,e){let n=t,g=InitialStateMap[r];typeof InitialStateMap[r]=="object"&&(g=g.key,n=n||InitialStateMap[r].default),e.states[g].value=n}function getArrKeysValue(t,r){if(r.includes(".")){const e=r.split(".");let n=t;return e.forEach(g=>{n=n[g]}),n}else return t[r]}class TableLayout{constructor(r){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ref(null),this.scrollX=ref(!1),this.scrollY=ref(!1),this.bodyWidth=ref(null),this.fixedWidth=ref(null),this.rightFixedWidth=ref(null),this.gutterWidth=0;for(const e in r)hasOwn(r,e)&&(isRef(this[e])?this[e].value=r[e]:this[e]=r[e]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const e=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(e!=null&&e.wrapRef)){let n=!0;const g=this.scrollY.value;return n=e.wrapRef.scrollHeight>e.wrapRef.clientHeight,this.scrollY.value=n,g!==n}return!1}setHeight(r,e="height"){if(!isClient)return;const n=this.table.vnode.el;if(r=parseHeight(r),this.height.value=Number(r),!n&&(r||r===0))return nextTick(()=>this.setHeight(r,e));typeof r=="number"?(n.style[e]=`${r}px`,this.updateElsHeight()):typeof r=="string"&&(n.style[e]=r,this.updateElsHeight())}setMaxHeight(r){this.setHeight(r,"max-height")}getFlattenColumns(){const r=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?r.push.apply(r,n.columns):r.push(n)}),r}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(r){if(!r)return!0;let e=r;for(;e.tagName!=="DIV";){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}updateColumnsWidth(){if(!isClient)return;const r=this.fit,e=this.table.vnode.el.clientWidth;let n=0;const g=this.getFlattenColumns(),y=g.filter(L=>typeof L.width!="number");if(g.forEach(L=>{typeof L.width=="number"&&L.realWidth&&(L.realWidth=null)}),y.length>0&&r){if(g.forEach(L=>{n+=Number(L.width||L.minWidth||80)}),n<=e){this.scrollX.value=!1;const L=e-n;if(y.length===1)y[0].realWidth=Number(y[0].minWidth||80)+L;else{const $=y.reduce((re,oe)=>re+Number(oe.minWidth||80),0),V=L/$;let z=0;y.forEach((re,oe)=>{if(oe===0)return;const le=Math.floor(Number(re.minWidth||80)*V);z+=le,re.realWidth=Number(re.minWidth||80)+le}),y[0].realWidth=Number(y[0].minWidth||80)+L-z}}else this.scrollX.value=!0,y.forEach(L=>{L.realWidth=Number(L.minWidth)});this.bodyWidth.value=Math.max(n,e),this.table.state.resizeState.value.width=this.bodyWidth.value}else g.forEach(L=>{!L.width&&!L.minWidth?L.realWidth=80:L.realWidth=Number(L.width||L.minWidth),n+=L.realWidth}),this.scrollX.value=n>e,this.bodyWidth.value=n;const i=this.store.states.fixedColumns.value;if(i.length>0){let L=0;i.forEach($=>{L+=Number($.realWidth||$.width)}),this.fixedWidth.value=L}const k=this.store.states.rightFixedColumns.value;if(k.length>0){let L=0;k.forEach($=>{L+=Number($.realWidth||$.width)}),this.rightFixedWidth.value=L}this.notifyObservers("columns")}addObserver(r){this.observers.push(r)}removeObserver(r){const e=this.observers.indexOf(r);e!==-1&&this.observers.splice(e,1)}notifyObservers(r){this.observers.forEach(n=>{var g,y;switch(r){case"columns":(g=n.state)==null||g.onColumnsChange(this);break;case"scrollable":(y=n.state)==null||y.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${r}.`)}})}}const{CheckboxGroup:ElCheckboxGroup}=ElCheckbox,_sfc_main$m=defineComponent({name:"ElTableFilterPanel",components:{ElCheckbox,ElCheckboxGroup,ElScrollbar,ElTooltip,ElIcon,ArrowDown:arrow_down_default,ArrowUp:arrow_up_default},directives:{ClickOutside},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const r=getCurrentInstance(),{t:e}=useLocale(),n=useNamespace("table-filter"),g=r==null?void 0:r.parent;g.filterPanels.value[t.column.id]||(g.filterPanels.value[t.column.id]=r);const y=ref(!1),i=ref(null),k=computed(()=>t.column&&t.column.filters),L=computed(()=>t.column.filterClassName?`${n.b()} ${t.column.filterClassName}`:n.b()),$=computed({get:()=>{var Ve;return(((Ve=t.column)==null?void 0:Ve.filteredValue)||[])[0]},set:Ve=>{V.value&&(typeof Ve<"u"&&Ve!==null?V.value.splice(0,1,Ve):V.value.splice(0,1))}}),V=computed({get(){return t.column?t.column.filteredValue||[]:[]},set(Ve){t.column&&t.upDataColumn("filteredValue",Ve)}}),z=computed(()=>t.column?t.column.filterMultiple:!0),re=Ve=>Ve.value===$.value,oe=()=>{y.value=!1},le=Ve=>{Ve.stopPropagation(),y.value=!y.value},ue=()=>{y.value=!1},ie=()=>{de(V.value),oe()},ae=()=>{V.value=[],de(V.value),oe()},Fe=Ve=>{$.value=Ve,de(typeof Ve<"u"&&Ve!==null?V.value:[]),oe()},de=Ve=>{t.store.commit("filterChange",{column:t.column,values:Ve}),t.store.updateAllSelected()};watch(y,Ve=>{t.column&&t.upDataColumn("filterOpened",Ve)},{immediate:!0});const Ie=computed(()=>{var Ve,kt;return(kt=(Ve=i.value)==null?void 0:Ve.popperRef)==null?void 0:kt.contentRef});return{tooltipVisible:y,multiple:z,filterClassName:L,filteredValue:V,filterValue:$,filters:k,handleConfirm:ie,handleReset:ae,handleSelect:Fe,isActive:re,t:e,ns:n,showFilterPanel:le,hideFilterPanel:ue,popperPaneRef:Ie,tooltip:i}}}),_hoisted_1$g={key:0},_hoisted_2$a=["disabled"],_hoisted_3$7=["label","onClick"];function _sfc_render$2(t,r,e,n,g,y){const i=resolveComponent("el-checkbox"),k=resolveComponent("el-checkbox-group"),L=resolveComponent("el-scrollbar"),$=resolveComponent("arrow-up"),V=resolveComponent("arrow-down"),z=resolveComponent("el-icon"),re=resolveComponent("el-tooltip"),oe=resolveDirective("click-outside");return openBlock(),createBlock(re,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:""},{content:withCtx(()=>[t.multiple?(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",{class:normalizeClass(t.ns.e("content"))},[createVNode(L,{"wrap-class":t.ns.e("wrap")},{default:withCtx(()=>[createVNode(k,{modelValue:t.filteredValue,"onUpdate:modelValue":r[0]||(r[0]=le=>t.filteredValue=le),class:normalizeClass(t.ns.e("checkbox-group"))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.filters,le=>(openBlock(),createBlock(i,{key:le.value,label:le.value},{default:withCtx(()=>[createTextVNode(toDisplayString(le.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),createBaseVNode("div",{class:normalizeClass(t.ns.e("bottom"))},[createBaseVNode("button",{class:normalizeClass({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:r[1]||(r[1]=(...le)=>t.handleConfirm&&t.handleConfirm(...le))},toDisplayString(t.t("el.table.confirmFilter")),11,_hoisted_2$a),createBaseVNode("button",{type:"button",onClick:r[2]||(r[2]=(...le)=>t.handleReset&&t.handleReset(...le))},toDisplayString(t.t("el.table.resetFilter")),1)],2)])):(openBlock(),createElementBlock("ul",{key:1,class:normalizeClass(t.ns.e("list"))},[createBaseVNode("li",{class:normalizeClass([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:r[3]||(r[3]=le=>t.handleSelect(null))},toDisplayString(t.t("el.table.clearFilter")),3),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.filters,le=>(openBlock(),createElementBlock("li",{key:le.value,class:normalizeClass([t.ns.e("list-item"),t.ns.is("active",t.isActive(le))]),label:le.value,onClick:ue=>t.handleSelect(le.value)},toDisplayString(le.text),11,_hoisted_3$7))),128))],2))]),default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:r[4]||(r[4]=(...le)=>t.showFilterPanel&&t.showFilterPanel(...le))},[createVNode(z,null,{default:withCtx(()=>[t.column.filterOpened?(openBlock(),createBlock($,{key:0})):(openBlock(),createBlock(V,{key:1}))]),_:1})],2)),[[oe,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var FilterPanel=_export_sfc$1(_sfc_main$m,[["render",_sfc_render$2],["__file","filter-panel.vue"]]);function useLayoutObserver(t){const r=getCurrentInstance();onBeforeMount(()=>{e.value.addObserver(r)}),onMounted(()=>{n(e.value),g(e.value)}),onUpdated(()=>{n(e.value),g(e.value)}),onUnmounted(()=>{e.value.removeObserver(r)});const e=computed(()=>{const y=t.layout;if(!y)throw new Error("Can not find table layout.");return y}),n=y=>{var i;const k=((i=t.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!k.length)return;const L=y.getFlattenColumns(),$={};L.forEach(V=>{$[V.id]=V});for(let V=0,z=k.length;V<z;V++){const re=k[V],oe=re.getAttribute("name"),le=$[oe];le&&re.setAttribute("width",le.realWidth||le.width)}},g=y=>{var i,k;const L=((i=t.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let V=0,z=L.length;V<z;V++)L[V].setAttribute("width",y.scrollY.value?y.gutterWidth:"0");const $=((k=t.vnode.el)==null?void 0:k.querySelectorAll("th.gutter"))||[];for(let V=0,z=$.length;V<z;V++){const re=$[V];re.style.width=y.scrollY.value?`${y.gutterWidth}px`:"0",re.style.display=y.scrollY.value?"":"none"}};return{tableLayout:e.value,onColumnsChange:n,onScrollableChange:g}}const TABLE_INJECTION_KEY=Symbol("ElTable");function useEvent(t,r){const e=getCurrentInstance(),n=inject(TABLE_INJECTION_KEY),g=ue=>{ue.stopPropagation()},y=(ue,ie)=>{!ie.filters&&ie.sortable?le(ue,ie,!1):ie.filterable&&!ie.sortable&&g(ue),n==null||n.emit("header-click",ie,ue)},i=(ue,ie)=>{n==null||n.emit("header-contextmenu",ie,ue)},k=ref(null),L=ref(!1),$=ref({}),V=(ue,ie)=>{if(isClient&&!(ie.children&&ie.children.length>0)&&k.value&&t.border){L.value=!0;const ae=n;r("set-drag-visible",!0);const de=(ae==null?void 0:ae.vnode.el).getBoundingClientRect().left,Ie=e.vnode.el.querySelector(`th.${ie.id}`),Ve=Ie.getBoundingClientRect(),kt=Ve.left-de+30;addClass(Ie,"noclick"),$.value={startMouseLeft:ue.clientX,startLeft:Ve.right-de,startColumnLeft:Ve.left-de,tableLeft:de};const At=ae==null?void 0:ae.refs.resizeProxy;At.style.left=`${$.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const ze=cr=>{const er=cr.clientX-$.value.startMouseLeft,or=$.value.startLeft+er;At.style.left=`${Math.max(kt,or)}px`},Et=()=>{if(L.value){const{startColumnLeft:cr,startLeft:er}=$.value,dr=Number.parseInt(At.style.left,10)-cr;ie.width=ie.realWidth=dr,ae==null||ae.emit("header-dragend",ie.width,er-cr,ie,ue),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",L.value=!1,k.value=null,$.value={},r("set-drag-visible",!1)}document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",Et),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{removeClass(Ie,"noclick")},0)};document.addEventListener("mousemove",ze),document.addEventListener("mouseup",Et)}},z=(ue,ie)=>{if(ie.children&&ie.children.length>0)return;const ae=ue.target;if(!isElement(ae))return;const Fe=ae==null?void 0:ae.closest("th");if(!(!ie||!ie.resizable)&&!L.value&&t.border){const de=Fe.getBoundingClientRect(),Ie=document.body.style;de.width>12&&de.right-ue.pageX<8?(Ie.cursor="col-resize",hasClass(Fe,"is-sortable")&&(Fe.style.cursor="col-resize"),k.value=ie):L.value||(Ie.cursor="",hasClass(Fe,"is-sortable")&&(Fe.style.cursor="pointer"),k.value=null)}},re=()=>{isClient&&(document.body.style.cursor="")},oe=({order:ue,sortOrders:ie})=>{if(ue==="")return ie[0];const ae=ie.indexOf(ue||null);return ie[ae>ie.length-2?0:ae+1]},le=(ue,ie,ae)=>{var Fe;ue.stopPropagation();const de=ie.order===ae?null:ae||oe(ie),Ie=(Fe=ue.target)==null?void 0:Fe.closest("th");if(Ie&&hasClass(Ie,"noclick")){removeClass(Ie,"noclick");return}if(!ie.sortable)return;const Ve=t.store.states;let kt=Ve.sortProp.value,At;const ze=Ve.sortingColumn.value;(ze!==ie||ze===ie&&ze.order===null)&&(ze&&(ze.order=null),Ve.sortingColumn.value=ie,kt=ie.property),de?At=ie.order=de:At=ie.order=null,Ve.sortProp.value=kt,Ve.sortOrder.value=At,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:y,handleHeaderContextMenu:i,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:le,handleFilterClick:g}}function useStyle$2(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table");return{getHeaderRowStyle:k=>{const L=r==null?void 0:r.props.headerRowStyle;return typeof L=="function"?L.call(null,{rowIndex:k}):L},getHeaderRowClass:k=>{const L=[],$=r==null?void 0:r.props.headerRowClassName;return typeof $=="string"?L.push($):typeof $=="function"&&L.push($.call(null,{rowIndex:k})),L.join(" ")},getHeaderCellStyle:(k,L,$,V)=>{var z;let re=(z=r==null?void 0:r.props.headerCellStyle)!=null?z:{};typeof re=="function"&&(re=re.call(null,{rowIndex:k,columnIndex:L,row:$,column:V}));const oe=getFixedColumnOffset(L,V.fixed,t.store,$);return ensurePosition(oe,"left"),ensurePosition(oe,"right"),Object.assign({},re,oe)},getHeaderCellClass:(k,L,$,V)=>{const z=getFixedColumnsClass(e.b(),L,V.fixed,t.store,$),re=[V.id,V.order,V.headerAlign,V.className,V.labelClassName,...z];V.children||re.push("is-leaf"),V.sortable&&re.push("is-sortable");const oe=r==null?void 0:r.props.headerCellClassName;return typeof oe=="string"?re.push(oe):typeof oe=="function"&&re.push(oe.call(null,{rowIndex:k,columnIndex:L,row:$,column:V})),re.push(e.e("cell")),re.filter(le=>!!le).join(" ")}}}const getAllColumns=t=>{const r=[];return t.forEach(e=>{e.children?(r.push(e),r.push.apply(r,getAllColumns(e.children))):r.push(e)}),r},convertToRows=t=>{let r=1;const e=(y,i)=>{if(i&&(y.level=i.level+1,r<y.level&&(r=y.level)),y.children){let k=0;y.children.forEach(L=>{e(L,y),k+=L.colSpan}),y.colSpan=k}else y.colSpan=1};t.forEach(y=>{y.level=1,e(y,void 0)});const n=[];for(let y=0;y<r;y++)n.push([]);return getAllColumns(t).forEach(y=>{y.children?(y.rowSpan=1,y.children.forEach(i=>i.isSubColumn=!0)):y.rowSpan=r-y.level+1,n[y.level-1].push(y)}),n};function useUtils$1(t){const r=inject(TABLE_INJECTION_KEY),e=computed(()=>convertToRows(t.store.states.originColumns.value));return{isGroup:computed(()=>{const y=e.value.length>1;return y&&r&&(r.state.isGroup.value=!0),y}),toggleAllSelection:y=>{y.stopPropagation(),r==null||r.store.commit("toggleAllSelection")},columnRows:e}}var TableHeader=defineComponent({name:"ElTableHeader",components:{ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:r}){const e=getCurrentInstance(),n=inject(TABLE_INJECTION_KEY),g=useNamespace("table"),y=ref({}),{onColumnsChange:i,onScrollableChange:k}=useLayoutObserver(n);onMounted(async()=>{await nextTick(),await nextTick();const{prop:kt,order:At}=t.defaultSort;n==null||n.store.commit("sort",{prop:kt,order:At,init:!0})});const{handleHeaderClick:L,handleHeaderContextMenu:$,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:oe,handleFilterClick:le}=useEvent(t,r),{getHeaderRowStyle:ue,getHeaderRowClass:ie,getHeaderCellStyle:ae,getHeaderCellClass:Fe}=useStyle$2(t),{isGroup:de,toggleAllSelection:Ie,columnRows:Ve}=useUtils$1(t);return e.state={onColumnsChange:i,onScrollableChange:k},e.filterPanels=y,{ns:g,filterPanels:y,onColumnsChange:i,onScrollableChange:k,columnRows:Ve,getHeaderRowClass:ie,getHeaderRowStyle:ue,getHeaderCellClass:Fe,getHeaderCellStyle:ae,handleHeaderClick:L,handleHeaderContextMenu:$,handleMouseDown:V,handleMouseMove:z,handleMouseOut:re,handleSortClick:oe,handleFilterClick:le,isGroup:de,toggleAllSelection:Ie}},render(){const{ns:t,isGroup:r,columnRows:e,getHeaderCellStyle:n,getHeaderCellClass:g,getHeaderRowClass:y,getHeaderRowStyle:i,handleHeaderClick:k,handleHeaderContextMenu:L,handleMouseDown:$,handleMouseMove:V,handleSortClick:z,handleMouseOut:re,store:oe,$parent:le}=this;let ue=1;return h$1("thead",{class:{[t.is("group")]:r}},e.map((ie,ae)=>h$1("tr",{class:y(ae),key:ae,style:i(ae)},ie.map((Fe,de)=>(Fe.rowSpan>ue&&(ue=Fe.rowSpan),h$1("th",{class:g(ae,de,ie,Fe),colspan:Fe.colSpan,key:`${Fe.id}-thead`,rowspan:Fe.rowSpan,style:n(ae,de,ie,Fe),onClick:Ie=>k(Ie,Fe),onContextmenu:Ie=>L(Ie,Fe),onMousedown:Ie=>$(Ie,Fe),onMousemove:Ie=>V(Ie,Fe),onMouseout:re},[h$1("div",{class:["cell",Fe.filteredValue&&Fe.filteredValue.length>0?"highlight":""]},[Fe.renderHeader?Fe.renderHeader({column:Fe,$index:de,store:oe,_self:le}):Fe.label,Fe.sortable&&h$1("span",{onClick:Ie=>z(Ie,Fe),class:"caret-wrapper"},[h$1("i",{onClick:Ie=>z(Ie,Fe,"ascending"),class:"sort-caret ascending"}),h$1("i",{onClick:Ie=>z(Ie,Fe,"descending"),class:"sort-caret descending"})]),Fe.filterable&&h$1(FilterPanel,{store:oe,placement:Fe.filterPlacement||"bottom-start",column:Fe,upDataColumn:(Ie,Ve)=>{Fe[Ie]=Ve}})])]))))))}});function useEvents(t){const r=inject(TABLE_INJECTION_KEY),e=ref(""),n=ref(h$1("div")),g=(le,ue,ie)=>{var ae;const Fe=r,de=getCell(le);let Ie;const Ve=(ae=Fe==null?void 0:Fe.vnode.el)==null?void 0:ae.dataset.prefix;de&&(Ie=getColumnByCell({columns:t.store.states.columns.value},de,Ve),Ie&&(Fe==null||Fe.emit(`cell-${ie}`,ue,Ie,de,le))),Fe==null||Fe.emit(`row-${ie}`,ue,Ie,le)},y=(le,ue)=>{g(le,ue,"dblclick")},i=(le,ue)=>{t.store.commit("setCurrentRow",ue),g(le,ue,"click")},k=(le,ue)=>{g(le,ue,"contextmenu")},L=debounce(le=>{t.store.commit("setHoverRow",le)},30),$=debounce(()=>{t.store.commit("setHoverRow",null)},30),V=le=>{const ue=window.getComputedStyle(le,null),ie=Number.parseInt(ue.paddingLeft,10)||0,ae=Number.parseInt(ue.paddingRight,10)||0,Fe=Number.parseInt(ue.paddingTop,10)||0,de=Number.parseInt(ue.paddingBottom,10)||0;return{left:ie,right:ae,top:Fe,bottom:de}},z=(le,ue,ie)=>{let ae=ue.target.parentNode;for(;le>1&&(ae=ae==null?void 0:ae.nextSibling,!(!ae||ae.nodeName!=="TR"));)ie(ae,"hover-row hover-fixed-row"),le--};return{handleDoubleClick:y,handleClick:i,handleContextMenu:k,handleMouseEnter:L,handleMouseLeave:$,handleCellMouseEnter:(le,ue,ie)=>{var ae;const Fe=r,de=getCell(le),Ie=(ae=Fe==null?void 0:Fe.vnode.el)==null?void 0:ae.dataset.prefix;if(de){const ar=getColumnByCell({columns:t.store.states.columns.value},de,Ie);de.rowSpan>1&&z(de.rowSpan,le,addClass);const gr=Fe.hoverState={cell:de,column:ar,row:ue};Fe==null||Fe.emit("cell-mouse-enter",gr.row,gr.column,gr.cell,le)}if(!ie)return;const Ve=le.target.querySelector(".cell");if(!(hasClass(Ve,`${Ie}-tooltip`)&&Ve.childNodes.length))return;const kt=document.createRange();kt.setStart(Ve,0),kt.setEnd(Ve,Ve.childNodes.length);let At=kt.getBoundingClientRect().width,ze=kt.getBoundingClientRect().height;At-Math.floor(At)<.001&&(At=Math.floor(At)),ze-Math.floor(ze)<.001&&(ze=Math.floor(ze));const{top:er,left:or,right:dr,bottom:lr}=V(Ve),nr=or+dr,ur=er+lr;(At+nr>Ve.offsetWidth||ze+ur>Ve.offsetHeight||Ve.scrollWidth>Ve.offsetWidth)&&createTablePopper(ie,de.innerText||de.textContent,de,Fe)},handleCellMouseLeave:le=>{const ue=getCell(le);if(!ue)return;ue.rowSpan>1&&z(ue.rowSpan,le,removeClass);const ie=r==null?void 0:r.hoverState;r==null||r.emit("cell-mouse-leave",ie==null?void 0:ie.row,ie==null?void 0:ie.column,ie==null?void 0:ie.cell,le)},tooltipContent:e,tooltipTrigger:n}}function useStyles(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table");return{getRowStyle:($,V)=>{const z=r==null?void 0:r.props.rowStyle;return typeof z=="function"?z.call(null,{row:$,rowIndex:V}):z||null},getRowClass:($,V)=>{const z=[e.e("row")];r!=null&&r.props.highlightCurrentRow&&$===t.store.states.currentRow.value&&z.push("current-row"),t.stripe&&V%2===1&&z.push(e.em("row","striped"));const re=r==null?void 0:r.props.rowClassName;return typeof re=="string"?z.push(re):typeof re=="function"&&z.push(re.call(null,{row:$,rowIndex:V})),z},getCellStyle:($,V,z,re)=>{const oe=r==null?void 0:r.props.cellStyle;let le=oe??{};typeof oe=="function"&&(le=oe.call(null,{rowIndex:$,columnIndex:V,row:z,column:re}));const ue=getFixedColumnOffset(V,t==null?void 0:t.fixed,t.store);return ensurePosition(ue,"left"),ensurePosition(ue,"right"),Object.assign({},le,ue)},getCellClass:($,V,z,re,oe)=>{const le=getFixedColumnsClass(e.b(),V,t==null?void 0:t.fixed,t.store,void 0,oe),ue=[re.id,re.align,re.className,...le],ie=r==null?void 0:r.props.cellClassName;return typeof ie=="string"?ue.push(ie):typeof ie=="function"&&ue.push(ie.call(null,{rowIndex:$,columnIndex:V,row:z,column:re})),ue.push(e.e("cell")),ue.filter(ae=>!!ae).join(" ")},getSpan:($,V,z,re)=>{let oe=1,le=1;const ue=r==null?void 0:r.props.spanMethod;if(typeof ue=="function"){const ie=ue({row:$,column:V,rowIndex:z,columnIndex:re});Array.isArray(ie)?(oe=ie[0],le=ie[1]):typeof ie=="object"&&(oe=ie.rowspan,le=ie.colspan)}return{rowspan:oe,colspan:le}},getColspanRealWidth:($,V,z)=>{if(V<1)return $[z].realWidth;const re=$.map(({realWidth:oe,width:le})=>oe||le).slice(z,z+V);return Number(re.reduce((oe,le)=>Number(oe)+Number(le),-1))}}}function useRender$1(t){const r=inject(TABLE_INJECTION_KEY),e=useNamespace("table"),{handleDoubleClick:n,handleClick:g,handleContextMenu:y,handleMouseEnter:i,handleMouseLeave:k,handleCellMouseEnter:L,handleCellMouseLeave:$,tooltipContent:V,tooltipTrigger:z}=useEvents(t),{getRowStyle:re,getRowClass:oe,getCellStyle:le,getCellClass:ue,getSpan:ie,getColspanRealWidth:ae}=useStyles(t),Fe=computed(()=>t.store.states.columns.value.findIndex(({type:At})=>At==="default")),de=(At,ze)=>{const Et=r.props.rowKey;return Et?getRowIdentity(At,Et):ze},Ie=(At,ze,Et,cr=!1)=>{const{tooltipEffect:er,tooltipOptions:or,store:dr}=t,{indent:lr,columns:nr}=dr.states,ur=oe(At,ze);let ar=!0;return Et&&(ur.push(e.em("row",`level-${Et.level}`)),ar=Et.display),h$1("tr",{style:[ar?null:{display:"none"},re(At,ze)],class:ur,key:de(At,ze),onDblclick:pr=>n(pr,At),onClick:pr=>g(pr,At),onContextmenu:pr=>y(pr,At),onMouseenter:()=>i(ze),onMouseleave:k},nr.value.map((pr,hr)=>{const{rowspan:Cr,colspan:wr}=ie(At,pr,ze,hr);if(!Cr||!wr)return null;const Sr=Object.assign({},pr);Sr.realWidth=ae(nr.value,wr,hr);const mr={store:t.store,_self:t.context||r,column:Sr,row:At,$index:ze,cellIndex:hr,expanded:cr};hr===Fe.value&&Et&&(mr.treeNode={indent:Et.level*lr.value,level:Et.level},typeof Et.expanded=="boolean"&&(mr.treeNode.expanded=Et.expanded,"loading"in Et&&(mr.treeNode.loading=Et.loading),"noLazyChildren"in Et&&(mr.treeNode.noLazyChildren=Et.noLazyChildren)));const _r=`${ze},${hr}`,Ar=Sr.columnKey||Sr.rawColumnKey||"",Er=Ve(hr,pr,mr),sr=pr.showOverflowTooltip&&merge$2({effect:er},or,pr.showOverflowTooltip);return h$1("td",{style:le(ze,hr,At,pr),class:ue(ze,hr,At,pr,wr-1),key:`${Ar}${_r}`,rowspan:Cr,colspan:wr,onMouseenter:xr=>L(xr,At,sr),onMouseleave:$},[Er])}))},Ve=(At,ze,Et)=>ze.renderCell(Et);return{wrappedRowRender:(At,ze)=>{const Et=t.store,{isRowExpanded:cr,assertRowKey:er}=Et,{treeData:or,lazyTreeNodeMap:dr,childrenColumnName:lr,rowKey:nr}=Et.states,ur=Et.states.columns.value;if(ur.some(({type:gr})=>gr==="expand")){const gr=cr(At),pr=Ie(At,ze,void 0,gr),hr=r.renderExpanded;return gr?hr?[[pr,h$1("tr",{key:`expanded-row__${pr.key}`},[h$1("td",{colspan:ur.length,class:`${e.e("cell")} ${e.e("expanded-cell")}`},[hr({row:At,$index:ze,store:Et,expanded:gr})])])]]:(console.error("[Element Error]renderExpanded is required."),pr):[[pr]]}else if(Object.keys(or.value).length){er();const gr=getRowIdentity(At,nr.value);let pr=or.value[gr],hr=null;pr&&(hr={expanded:pr.expanded,level:pr.level,display:!0},typeof pr.lazy=="boolean"&&(typeof pr.loaded=="boolean"&&pr.loaded&&(hr.noLazyChildren=!(pr.children&&pr.children.length)),hr.loading=pr.loading));const Cr=[Ie(At,ze,hr)];if(pr){let wr=0;const Sr=(_r,Ar)=>{_r&&_r.length&&Ar&&_r.forEach(Er=>{const sr={display:Ar.display&&Ar.expanded,level:Ar.level+1,expanded:!1,noLazyChildren:!1,loading:!1},xr=getRowIdentity(Er,nr.value);if(xr==null)throw new Error("For nested data item, row-key is required.");if(pr={...or.value[xr]},pr&&(sr.expanded=pr.expanded,pr.level=pr.level||sr.level,pr.display=!!(pr.expanded&&sr.display),typeof pr.lazy=="boolean"&&(typeof pr.loaded=="boolean"&&pr.loaded&&(sr.noLazyChildren=!(pr.children&&pr.children.length)),sr.loading=pr.loading)),wr++,Cr.push(Ie(Er,ze+wr,sr)),pr){const Nr=dr.value[xr]||Er[lr.value];Sr(Nr,pr)}})};pr.display=!0;const mr=dr.value[gr]||At[lr.value];Sr(mr,pr)}return Cr}else return Ie(At,ze,void 0)},tooltipContent:V,tooltipTrigger:z}}const defaultProps$2={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TableBody=defineComponent({name:"ElTableBody",props:defaultProps$2,setup(t){const r=getCurrentInstance(),e=inject(TABLE_INJECTION_KEY),n=useNamespace("table"),{wrappedRowRender:g,tooltipContent:y,tooltipTrigger:i}=useRender$1(t),{onColumnsChange:k,onScrollableChange:L}=useLayoutObserver(e),$=[];return watch(t.store.states.hoverRow,(V,z)=>{var re;const oe=r==null?void 0:r.vnode.el,le=Array.from((oe==null?void 0:oe.children)||[]).filter(ae=>ae==null?void 0:ae.classList.contains(`${n.e("row")}`));let ue=V;const ie=(re=le[ue])==null?void 0:re.childNodes;ie!=null&&ie.length?Array.from(ie).reduce((Fe,de,Ie)=>{var Ve,kt;const At=((Ve=ie[Ie-1])==null?void 0:Ve.colSpan)>1,ze=((kt=ie[Ie+1])==null?void 0:kt.colSpan)>1;return de.nodeName!=="TD"&&!At&&!ze&&Fe.push(Ie),Fe},[]).forEach(Fe=>{for(var de;ue>0;){const Ie=(de=le[ue-1])==null?void 0:de.childNodes;if(Ie[Fe]&&Ie[Fe].nodeName==="TD"){addClass(Ie[Fe],"hover-cell"),$.push(Ie[Fe]);break}ue--}}):($.forEach(ae=>removeClass(ae,"hover-cell")),$.length=0),!(!t.store.states.isComplex.value||!isClient)&&rAF(()=>{const ae=le[z],Fe=le[V];ae&&!ae.classList.contains("hover-fixed-row")&&removeClass(ae,"hover-row"),Fe&&addClass(Fe,"hover-row")})}),onUnmounted(()=>{var V;(V=removePopper)==null||V()}),{ns:n,onColumnsChange:k,onScrollableChange:L,wrappedRowRender:g,tooltipContent:y,tooltipTrigger:i}},render(){const{wrappedRowRender:t,store:r}=this,e=r.states.data.value||[];return h$1("tbody",{tabIndex:-1},[e.reduce((n,g)=>n.concat(t(g,n.length)),[])])}});function useMapState(){const t=inject(TABLE_INJECTION_KEY),r=t==null?void 0:t.store,e=computed(()=>r.states.fixedLeafColumnsLength.value),n=computed(()=>r.states.rightFixedColumns.value.length),g=computed(()=>r.states.columns.value.length),y=computed(()=>r.states.fixedColumns.value.length),i=computed(()=>r.states.rightFixedColumns.value.length);return{leftFixedLeafCount:e,rightFixedLeafCount:n,columnsCount:g,leftFixedCount:y,rightFixedCount:i,columns:r.states.columns}}function useStyle$1(t){const{columns:r}=useMapState(),e=useNamespace("table");return{getCellClasses:(y,i)=>{const k=y[i],L=[e.e("cell"),k.id,k.align,k.labelClassName,...getFixedColumnsClass(e.b(),i,k.fixed,t.store)];return k.className&&L.push(k.className),k.children||L.push(e.is("leaf")),L},getCellStyles:(y,i)=>{const k=getFixedColumnOffset(i,y.fixed,t.store);return ensurePosition(k,"left"),ensurePosition(k,"right"),k},columns:r}}var TableFooter=defineComponent({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:r,getCellStyles:e,columns:n}=useStyle$1(t);return{ns:useNamespace("table"),getCellClasses:r,getCellStyles:e,columns:n}},render(){const{columns:t,getCellStyles:r,getCellClasses:e,summaryMethod:n,sumText:g}=this,y=this.store.states.data.value;let i=[];return n?i=n({columns:t,data:y}):t.forEach((k,L)=>{if(L===0){i[L]=g;return}const $=y.map(oe=>Number(oe[k.property])),V=[];let z=!0;$.forEach(oe=>{if(!Number.isNaN(+oe)){z=!1;const le=`${oe}`.split(".")[1];V.push(le?le.length:0)}});const re=Math.max.apply(null,V);z?i[L]="":i[L]=$.reduce((oe,le)=>{const ue=Number(le);return Number.isNaN(+ue)?oe:Number.parseFloat((oe+le).toFixed(Math.min(re,20)))},0)}),h$1(h$1("tfoot",[h$1("tr",{},[...t.map((k,L)=>h$1("td",{key:L,colspan:k.colSpan,rowspan:k.rowSpan,class:e(t,L),style:r(k,L)},[h$1("div",{class:["cell",k.labelClassName]},[i[L]])]))])]))}});function useUtils(t){return{setCurrentRow:V=>{t.commit("setCurrentRow",V)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(V,z)=>{t.toggleRowSelection(V,z,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:V=>{t.clearFilter(V)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(V,z)=>{t.toggleRowExpansionAdapter(V,z)},clearSort:()=>{t.clearSort()},sort:(V,z)=>{t.commit("sort",{prop:V,order:z})}}}function useStyle(t,r,e,n){const g=ref(!1),y=ref(null),i=ref(!1),k=pr=>{i.value=pr},L=ref({width:null,height:null,headerHeight:null}),$=ref(!1),V={display:"inline-block",verticalAlign:"middle"},z=ref(),re=ref(0),oe=ref(0),le=ref(0),ue=ref(0),ie=ref(0);watchEffect(()=>{r.setHeight(t.height)}),watchEffect(()=>{r.setMaxHeight(t.maxHeight)}),watch(()=>[t.currentRowKey,e.states.rowKey],([pr,hr])=>{!unref(hr)||!unref(pr)||e.setCurrentRowKey(`${pr}`)},{immediate:!0}),watch(()=>t.data,pr=>{n.store.commit("setData",pr)},{immediate:!0,deep:!0}),watchEffect(()=>{t.expandRowKeys&&e.setExpandRowKeysAdapter(t.expandRowKeys)});const ae=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},Fe=(pr,hr)=>{const{pixelX:Cr,pixelY:wr}=hr;Math.abs(Cr)>=Math.abs(wr)&&(n.refs.bodyWrapper.scrollLeft+=hr.pixelX/5)},de=computed(()=>t.height||t.maxHeight||e.states.fixedColumns.value.length>0||e.states.rightFixedColumns.value.length>0),Ie=computed(()=>({width:r.bodyWidth.value?`${r.bodyWidth.value}px`:""})),Ve=()=>{de.value&&r.updateElsHeight(),r.updateColumnsWidth(),requestAnimationFrame(Et)};onMounted(async()=>{await nextTick(),e.updateColumns(),cr(),requestAnimationFrame(Ve);const pr=n.vnode.el,hr=n.refs.headerWrapper;t.flexible&&pr&&pr.parentElement&&(pr.parentElement.style.minWidth="0"),L.value={width:z.value=pr.offsetWidth,height:pr.offsetHeight,headerHeight:t.showHeader&&hr?hr.offsetHeight:null},e.states.columns.value.forEach(Cr=>{Cr.filteredValue&&Cr.filteredValue.length&&n.store.commit("filterChange",{column:Cr,values:Cr.filteredValue,silent:!0})}),n.$ready=!0});const kt=(pr,hr)=>{if(!pr)return;const Cr=Array.from(pr.classList).filter(wr=>!wr.startsWith("is-scrolling-"));Cr.push(r.scrollX.value?hr:"is-scrolling-none"),pr.className=Cr.join(" ")},At=pr=>{const{tableWrapper:hr}=n.refs;kt(hr,pr)},ze=pr=>{const{tableWrapper:hr}=n.refs;return!!(hr&&hr.classList.contains(pr))},Et=function(){if(!n.refs.scrollBarRef)return;if(!r.scrollX.value){const Ar="is-scrolling-none";ze(Ar)||At(Ar);return}const pr=n.refs.scrollBarRef.wrapRef;if(!pr)return;const{scrollLeft:hr,offsetWidth:Cr,scrollWidth:wr}=pr,{headerWrapper:Sr,footerWrapper:mr}=n.refs;Sr&&(Sr.scrollLeft=hr),mr&&(mr.scrollLeft=hr);const _r=wr-Cr-1;hr>=_r?At("is-scrolling-right"):At(hr===0?"is-scrolling-left":"is-scrolling-middle")},cr=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&useEventListener(n.refs.scrollBarRef.wrapRef,"scroll",Et,{passive:!0}),t.fit?useResizeObserver(n.vnode.el,er):useEventListener(window,"resize",er),useResizeObserver(n.refs.bodyWrapper,()=>{var pr,hr;er(),(hr=(pr=n.refs)==null?void 0:pr.scrollBarRef)==null||hr.update()}))},er=()=>{var pr,hr,Cr,wr;const Sr=n.vnode.el;if(!n.$ready||!Sr)return;let mr=!1;const{width:_r,height:Ar,headerHeight:Er}=L.value,sr=z.value=Sr.offsetWidth;_r!==sr&&(mr=!0);const xr=Sr.offsetHeight;(t.height||de.value)&&Ar!==xr&&(mr=!0);const Nr=t.tableLayout==="fixed"?n.refs.headerWrapper:(pr=n.refs.tableHeaderRef)==null?void 0:pr.$el;t.showHeader&&(Nr==null?void 0:Nr.offsetHeight)!==Er&&(mr=!0),re.value=((hr=n.refs.tableWrapper)==null?void 0:hr.scrollHeight)||0,le.value=(Nr==null?void 0:Nr.scrollHeight)||0,ue.value=((Cr=n.refs.footerWrapper)==null?void 0:Cr.offsetHeight)||0,ie.value=((wr=n.refs.appendWrapper)==null?void 0:wr.offsetHeight)||0,oe.value=re.value-le.value-ue.value-ie.value,mr&&(L.value={width:sr,height:xr,headerHeight:t.showHeader&&(Nr==null?void 0:Nr.offsetHeight)||0},Ve())},or=useFormSize(),dr=computed(()=>{const{bodyWidth:pr,scrollY:hr,gutterWidth:Cr}=r;return pr.value?`${pr.value-(hr.value?Cr:0)}px`:""}),lr=computed(()=>t.maxHeight?"fixed":t.tableLayout),nr=computed(()=>{if(t.data&&t.data.length)return null;let pr="100%";t.height&&oe.value&&(pr=`${oe.value}px`);const hr=z.value;return{width:hr?`${hr}px`:"",height:pr}}),ur=computed(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),ar=computed(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${le.value+ue.value}px)`}:{maxHeight:`${t.maxHeight-le.value-ue.value}px`}:{});return{isHidden:g,renderExpanded:y,setDragVisible:k,isGroup:$,handleMouseLeave:ae,handleHeaderFooterMousewheel:Fe,tableSize:or,emptyBlockStyle:nr,handleFixedMousewheel:(pr,hr)=>{const Cr=n.refs.bodyWrapper;if(Math.abs(hr.spinY)>0){const wr=Cr.scrollTop;hr.pixelY<0&&wr!==0&&pr.preventDefault(),hr.pixelY>0&&Cr.scrollHeight-Cr.clientHeight>wr&&pr.preventDefault(),Cr.scrollTop+=Math.ceil(hr.pixelY/5)}else Cr.scrollLeft+=Math.ceil(hr.pixelX/5)},resizeProxyVisible:i,bodyWidth:dr,resizeState:L,doLayout:Ve,tableBodyStyles:Ie,tableLayout:lr,scrollbarViewStyle:V,tableInnerStyle:ur,scrollbarStyle:ar}}function useKeyRender(t){const r=ref(),e=()=>{const g=t.vnode.el.querySelector(".hidden-columns"),y={childList:!0,subtree:!0},i=t.store.states.updateOrderFns;r.value=new MutationObserver(()=>{i.forEach(k=>k())}),r.value.observe(g,y)};onMounted(()=>{e()}),onUnmounted(()=>{var n;(n=r.value)==null||n.disconnect()})}var defaultProps$1={data:{type:Array,default:()=>[]},size:useSizeProp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function hColgroup(t){const r=t.tableLayout==="auto";let e=t.columns||[];r&&e.every(g=>g.width===void 0)&&(e=[]);const n=g=>{const y={key:`${t.tableLayout}_${g.id}`,style:{},name:void 0};return r?y.style={width:`${g.width}px`}:y.name=g.id,y};return h$1("colgroup",{},e.map(g=>h$1("col",n(g))))}hColgroup.props=["columns","tableLayout"];const useScrollbar=()=>{const t=ref(),r=(y,i)=>{const k=t.value;k&&k.scrollTo(y,i)},e=(y,i)=>{const k=t.value;k&&isNumber$1(i)&&["Top","Left"].includes(y)&&k[`setScroll${y}`](i)};return{scrollBarRef:t,scrollTo:r,setScrollTop:y=>e("Top",y),setScrollLeft:y=>e("Left",y)}};let tableIdSeed=1;const _sfc_main$l=defineComponent({name:"ElTable",directives:{Mousewheel},components:{TableHeader,TableBody,TableFooter,ElScrollbar,hColgroup},props:defaultProps$1,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:r}=useLocale(),e=useNamespace("table"),n=getCurrentInstance();provide(TABLE_INJECTION_KEY,n);const g=createStore(n,t);n.store=g;const y=new TableLayout({store:n.store,table:n,fit:t.fit,showHeader:t.showHeader});n.layout=y;const i=computed(()=>(g.states.data.value||[]).length===0),{setCurrentRow:k,getSelectionRows:L,toggleRowSelection:$,clearSelection:V,clearFilter:z,toggleAllSelection:re,toggleRowExpansion:oe,clearSort:le,sort:ue}=useUtils(g),{isHidden:ie,renderExpanded:ae,setDragVisible:Fe,isGroup:de,handleMouseLeave:Ie,handleHeaderFooterMousewheel:Ve,tableSize:kt,emptyBlockStyle:At,handleFixedMousewheel:ze,resizeProxyVisible:Et,bodyWidth:cr,resizeState:er,doLayout:or,tableBodyStyles:dr,tableLayout:lr,scrollbarViewStyle:nr,tableInnerStyle:ur,scrollbarStyle:ar}=useStyle(t,y,g,n),{scrollBarRef:gr,scrollTo:pr,setScrollLeft:hr,setScrollTop:Cr}=useScrollbar(),wr=debounce(or,50),Sr=`${e.namespace.value}-table_${tableIdSeed++}`;n.tableId=Sr,n.state={isGroup:de,resizeState:er,doLayout:or,debouncedUpdateLayout:wr};const mr=computed(()=>t.sumText||r("el.table.sumText")),_r=computed(()=>t.emptyText||r("el.table.emptyText"));return useKeyRender(n),{ns:e,layout:y,store:g,handleHeaderFooterMousewheel:Ve,handleMouseLeave:Ie,tableId:Sr,tableSize:kt,isHidden:ie,isEmpty:i,renderExpanded:ae,resizeProxyVisible:Et,resizeState:er,isGroup:de,bodyWidth:cr,tableBodyStyles:dr,emptyBlockStyle:At,debouncedUpdateLayout:wr,handleFixedMousewheel:ze,setCurrentRow:k,getSelectionRows:L,toggleRowSelection:$,clearSelection:V,clearFilter:z,toggleAllSelection:re,toggleRowExpansion:oe,clearSort:le,doLayout:or,sort:ue,t:r,setDragVisible:Fe,context:n,computedSumText:mr,computedEmptyText:_r,tableLayout:lr,scrollbarViewStyle:nr,tableInnerStyle:ur,scrollbarStyle:ar,scrollBarRef:gr,scrollTo:pr,setScrollLeft:hr,setScrollTop:Cr}}}),_hoisted_1$f=["data-prefix"],_hoisted_2$9={ref:"hiddenColumns",class:"hidden-columns"};function _sfc_render$1(t,r,e,n,g,y){const i=resolveComponent("hColgroup"),k=resolveComponent("table-header"),L=resolveComponent("table-body"),$=resolveComponent("table-footer"),V=resolveComponent("el-scrollbar"),z=resolveDirective("mousewheel");return openBlock(),createElementBlock("div",{ref:"tableWrapper",class:normalizeClass([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:normalizeStyle(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:r[0]||(r[0]=(...re)=>t.handleMouseLeave&&t.handleMouseLeave(...re))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("inner-wrapper")),style:normalizeStyle(t.tableInnerStyle)},[createBaseVNode("div",_hoisted_2$9,[renderSlot(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"headerWrapper",class:normalizeClass(t.ns.e("header-wrapper"))},[createBaseVNode("table",{ref:"tableHeader",class:normalizeClass(t.ns.e("header")),style:normalizeStyle(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),createVNode(k,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[z,t.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"bodyWrapper",class:normalizeClass(t.ns.e("body-wrapper"))},[createVNode(V,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:withCtx(()=>[createBaseVNode("table",{ref:"tableBody",class:normalizeClass(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle({width:t.bodyWidth,tableLayout:t.tableLayout})},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(openBlock(),createBlock(k,{key:0,ref:"tableHeaderRef",class:normalizeClass(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):createCommentVNode("v-if",!0),createVNode(L,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(openBlock(),createBlock($,{key:1,class:normalizeClass(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):createCommentVNode("v-if",!0)],6),t.isEmpty?(openBlock(),createElementBlock("div",{key:0,ref:"emptyBlock",style:normalizeStyle(t.emptyBlockStyle),class:normalizeClass(t.ns.e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(t.ns.e("empty-text"))},[renderSlot(t.$slots,"empty",{},()=>[createTextVNode(toDisplayString(t.computedEmptyText),1)])],2)],6)):createCommentVNode("v-if",!0),t.$slots.append?(openBlock(),createElementBlock("div",{key:1,ref:"appendWrapper",class:normalizeClass(t.ns.e("append-wrapper"))},[renderSlot(t.$slots,"append")],2)):createCommentVNode("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary&&t.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:1,ref:"footerWrapper",class:normalizeClass(t.ns.e("footer-wrapper"))},[createBaseVNode("table",{class:normalizeClass(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle(t.tableBodyStyles)},[createVNode(i,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),createVNode($,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[vShow,!t.isEmpty],[z,t.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),t.border||t.isGroup?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.ns.e("border-left-patch"))},null,2)):createCommentVNode("v-if",!0)],6),withDirectives(createBaseVNode("div",{ref:"resizeProxy",class:normalizeClass(t.ns.e("column-resize-proxy"))},null,2),[[vShow,t.resizeProxyVisible]])],46,_hoisted_1$f)}var Table=_export_sfc$1(_sfc_main$l,[["render",_sfc_render$1],["__file","table.vue"]]);const defaultClassNames={selection:"table-column--selection",expand:"table__expand-column"},cellStarts={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},getDefaultClassName=t=>defaultClassNames[t]||"",cellForced={selection:{renderHeader({store:t,column:r}){function e(){return t.states.data.value&&t.states.data.value.length===0}return h$1(ElCheckbox,{disabled:e(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:r.label})},renderCell({row:t,column:r,store:e,$index:n}){return h$1(ElCheckbox,{disabled:r.selectable?!r.selectable.call(null,t,n):!1,size:e.states.tableSize.value,onChange:()=>{e.commit("rowSelectedChanged",t)},onClick:g=>g.stopPropagation(),modelValue:e.isSelected(t),ariaLabel:r.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:r}){let e=r+1;const n=t.index;return typeof n=="number"?e=r+n:typeof n=="function"&&(e=n(r)),h$1("div",{},[e])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:r,expanded:e}){const{ns:n}=r,g=[n.e("expand-icon")];return e&&g.push(n.em("expand-icon","expanded")),h$1("div",{class:g,onClick:function(i){i.stopPropagation(),r.toggleRowExpansion(t)}},{default:()=>[h$1(ElIcon,null,{default:()=>[h$1(arrow_right_default)]})]})},sortable:!1,resizable:!1}};function defaultRenderCell({row:t,column:r,$index:e}){var n;const g=r.property,y=g&&getProp(t,g).value;return r&&r.formatter?r.formatter(t,r,y,e):((n=y==null?void 0:y.toString)==null?void 0:n.call(y))||""}function treeCellPrefix({row:t,treeNode:r,store:e},n=!1){const{ns:g}=e;if(!r)return n?[h$1("span",{class:g.e("placeholder")})]:null;const y=[],i=function(k){k.stopPropagation(),!r.loading&&e.loadOrToggle(t)};if(r.indent&&y.push(h$1("span",{class:g.e("indent"),style:{"padding-left":`${r.indent}px`}})),typeof r.expanded=="boolean"&&!r.noLazyChildren){const k=[g.e("expand-icon"),r.expanded?g.em("expand-icon","expanded"):""];let L=arrow_right_default;r.loading&&(L=loading_default),y.push(h$1("div",{class:k,onClick:i},{default:()=>[h$1(ElIcon,{class:{[g.is("loading")]:r.loading}},{default:()=>[h$1(L)]})]}))}else y.push(h$1("span",{class:g.e("placeholder")}));return y}function getAllAliases(t,r){return t.reduce((e,n)=>(e[n]=n,e),r)}function useWatcher(t,r){const e=getCurrentInstance();return{registerComplexWatchers:()=>{const y=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},k=getAllAliases(y,i);Object.keys(k).forEach(L=>{const $=i[L];hasOwn(r,$)&&watch(()=>r[$],V=>{let z=V;$==="width"&&L==="realWidth"&&(z=parseWidth(V)),$==="minWidth"&&L==="realMinWidth"&&(z=parseMinWidth(V)),e.columnConfig.value[$]=z,e.columnConfig.value[L]=z;const re=$==="fixed";t.value.store.scheduleLayout(re)})})},registerNormalWatchers:()=>{const y=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},k=getAllAliases(y,i);Object.keys(k).forEach(L=>{const $=i[L];hasOwn(r,$)&&watch(()=>r[$],V=>{e.columnConfig.value[L]=V})})}}}function useRender(t,r,e){const n=getCurrentInstance(),g=ref(""),y=ref(!1),i=ref(),k=ref(),L=useNamespace("table");watchEffect(()=>{i.value=t.align?`is-${t.align}`:null,i.value}),watchEffect(()=>{k.value=t.headerAlign?`is-${t.headerAlign}`:i.value,k.value});const $=computed(()=>{let Ie=n.vnode.vParent||n.parent;for(;Ie&&!Ie.tableId&&!Ie.columnId;)Ie=Ie.vnode.vParent||Ie.parent;return Ie}),V=computed(()=>{const{store:Ie}=n.parent;if(!Ie)return!1;const{treeData:Ve}=Ie.states,kt=Ve.value;return kt&&Object.keys(kt).length>0}),z=ref(parseWidth(t.width)),re=ref(parseMinWidth(t.minWidth)),oe=Ie=>(z.value&&(Ie.width=z.value),re.value&&(Ie.minWidth=re.value),!z.value&&re.value&&(Ie.width=void 0),Ie.minWidth||(Ie.minWidth=80),Ie.realWidth=Number(Ie.width===void 0?Ie.minWidth:Ie.width),Ie),le=Ie=>{const Ve=Ie.type,kt=cellForced[Ve]||{};Object.keys(kt).forEach(ze=>{const Et=kt[ze];ze!=="className"&&Et!==void 0&&(Ie[ze]=Et)});const At=getDefaultClassName(Ve);if(At){const ze=`${unref(L.namespace)}-${At}`;Ie.className=Ie.className?`${Ie.className} ${ze}`:ze}return Ie},ue=Ie=>{Array.isArray(Ie)?Ie.forEach(kt=>Ve(kt)):Ve(Ie);function Ve(kt){var At;((At=kt==null?void 0:kt.type)==null?void 0:At.name)==="ElTableColumn"&&(kt.vParent=n)}};return{columnId:g,realAlign:i,isSubColumn:y,realHeaderAlign:k,columnOrTableParent:$,setColumnWidth:oe,setColumnForcedProps:le,setColumnRenders:Ie=>{t.renderHeader||Ie.type!=="selection"&&(Ie.renderHeader=kt=>(n.columnConfig.value.label,renderSlot(r,"header",kt,()=>[Ie.label])));let Ve=Ie.renderCell;return Ie.type==="expand"?(Ie.renderCell=kt=>h$1("div",{class:"cell"},[Ve(kt)]),e.value.renderExpanded=kt=>r.default?r.default(kt):r.default):(Ve=Ve||defaultRenderCell,Ie.renderCell=kt=>{let At=null;if(r.default){const dr=r.default(kt);At=dr.some(lr=>lr.type!==Comment)?dr:Ve(kt)}else At=Ve(kt);const{columns:ze}=e.value.store.states,Et=ze.value.findIndex(dr=>dr.type==="default"),cr=V.value&&kt.cellIndex===Et,er=treeCellPrefix(kt,cr),or={class:"cell",style:{}};return Ie.showOverflowTooltip&&(or.class=`${or.class} ${unref(L.namespace)}-tooltip`,or.style={width:`${(kt.column.realWidth||Number(kt.column.width))-1}px`}),ue(At),h$1("div",or,[er,At])}),Ie},getPropsData:(...Ie)=>Ie.reduce((Ve,kt)=>(Array.isArray(kt)&&kt.forEach(At=>{Ve[At]=t[At]}),Ve),{}),getColumnElIndex:(Ie,Ve)=>Array.prototype.indexOf.call(Ie,Ve),updateColumnOrder:()=>{e.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var defaultProps={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(r=>["ascending","descending",null].includes(r))}};let columnIdSeed=1;var ElTableColumn$1=defineComponent({name:"ElTableColumn",components:{ElCheckbox},props:defaultProps,setup(t,{slots:r}){const e=getCurrentInstance(),n=ref({}),g=computed(()=>{let de=e.parent;for(;de&&!de.tableId;)de=de.parent;return de}),{registerNormalWatchers:y,registerComplexWatchers:i}=useWatcher(g,t),{columnId:k,isSubColumn:L,realHeaderAlign:$,columnOrTableParent:V,setColumnWidth:z,setColumnForcedProps:re,setColumnRenders:oe,getPropsData:le,getColumnElIndex:ue,realAlign:ie,updateColumnOrder:ae}=useRender(t,r,g),Fe=V.value;k.value=`${Fe.tableId||Fe.columnId}_column_${columnIdSeed++}`,onBeforeMount(()=>{L.value=g.value!==Fe;const de=t.type||"default",Ie=t.sortable===""?!0:t.sortable,Ve=isUndefined$1(t.showOverflowTooltip)?Fe.props.showOverflowTooltip:t.showOverflowTooltip,kt={...cellStarts[de],id:k.value,type:de,property:t.prop||t.property,align:ie,headerAlign:$,showOverflowTooltip:Ve,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:Ie,index:t.index,rawColumnKey:e.vnode.key};let er=le(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);er=mergeOptions(kt,er),er=compose(oe,z,re)(er),n.value=er,y(),i()}),onMounted(()=>{var de;const Ie=V.value,Ve=L.value?Ie.vnode.el.children:(de=Ie.refs.hiddenColumns)==null?void 0:de.children,kt=()=>ue(Ve||[],e.vnode.el);n.value.getColumnIndex=kt,kt()>-1&&g.value.store.commit("insertColumn",n.value,L.value?Ie.columnConfig.value:null,ae)}),onBeforeUnmount(()=>{g.value.store.commit("removeColumn",n.value,L.value?Fe.columnConfig.value:null,ae)}),e.columnId=k.value,e.columnConfig=n},render(){var t,r,e;try{const n=(r=(t=this.$slots).default)==null?void 0:r.call(t,{row:{},column:{},$index:-1}),g=[];if(Array.isArray(n))for(const i of n)((e=i.type)==null?void 0:e.name)==="ElTableColumn"||i.shapeFlag&2?g.push(i):i.type===Fragment&&Array.isArray(i.children)&&i.children.forEach(k=>{(k==null?void 0:k.patchFlag)!==1024&&!isString$2(k==null?void 0:k.children)&&g.push(k)});return h$1("div",g)}catch{return h$1("div",[])}}});const ElTable=withInstall(Table,{TableColumn:ElTableColumn$1}),ElTableColumn=withNoopInstall(ElTableColumn$1),uploadContextKey=Symbol("uploadContextKey"),SCOPE$1="ElUpload";class UploadAjaxError extends Error{constructor(r,e,n,g){super(r),this.name="UploadAjaxError",this.status=e,this.method=n,this.url=g}}function getError(t,r,e){let n;return e.response?n=`${e.response.error||e.response}`:e.responseText?n=`${e.responseText}`:n=`fail to ${r.method} ${t} ${e.status}`,new UploadAjaxError(n,e.status,r.method,t)}function getBody(t){const r=t.responseText||t.response;if(!r)return r;try{return JSON.parse(r)}catch{return r}}const ajaxUpload=t=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$1,"XMLHttpRequest is undefined");const r=new XMLHttpRequest,e=t.action;r.upload&&r.upload.addEventListener("progress",y=>{const i=y;i.percent=y.total>0?y.loaded/y.total*100:0,t.onProgress(i)});const n=new FormData;if(t.data)for(const[y,i]of Object.entries(t.data))isArray$3(i)&&i.length?n.append(y,...i):n.append(y,i);n.append(t.filename,t.file,t.file.name),r.addEventListener("error",()=>{t.onError(getError(e,t,r))}),r.addEventListener("load",()=>{if(r.status<200||r.status>=300)return t.onError(getError(e,t,r));t.onSuccess(getBody(r))}),r.open(t.method,e,!0),t.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0);const g=t.headers||{};if(g instanceof Headers)g.forEach((y,i)=>r.setRequestHeader(i,y));else for(const[y,i]of Object.entries(g))isNil(i)||r.setRequestHeader(y,String(i));return r.send(n),r},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:definePropType([Object,Function,Promise]),default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP},crossorigin:{type:definePropType(String)}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"},crossorigin:{type:definePropType(String)}}),uploadListEmits={remove:t=>!!t},_hoisted_1$e=["onKeydown"],_hoisted_2$8=["src","crossorigin"],_hoisted_3$6=["onClick"],_hoisted_4$5=["title"],_hoisted_5$4=["onClick"],_hoisted_6$3=["onClick"],__default__$4=defineComponent({name:"ElUploadList"}),_sfc_main$k=defineComponent({...__default__$4,props:uploadListProps,emits:uploadListEmits,setup(t,{emit:r}){const e=t,{t:n}=useLocale(),g=useNamespace("upload"),y=useNamespace("icon"),i=useNamespace("list"),k=useFormDisabled(),L=ref(!1),$=computed(()=>[g.b("list"),g.bm("list",e.listType),g.is("disabled",e.disabled)]),V=z=>{r("remove",z)};return(z,re)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass(unref($)),name:unref(i).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.files,oe=>(openBlock(),createElementBlock("li",{key:oe.uid||oe.name,class:normalizeClass([unref(g).be("list","item"),unref(g).is(oe.status),{focusing:L.value}]),tabindex:"0",onKeydown:withKeys(le=>!unref(k)&&V(oe),["delete"]),onFocus:re[0]||(re[0]=le=>L.value=!0),onBlur:re[1]||(re[1]=le=>L.value=!1),onClick:re[2]||(re[2]=le=>L.value=!1)},[renderSlot(z.$slots,"default",{file:oe},()=>[z.listType==="picture"||oe.status!=="uploading"&&z.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(g).be("list","item-thumbnail")),src:oe.url,crossorigin:z.crossorigin,alt:""},null,10,_hoisted_2$8)):createCommentVNode("v-if",!0),oe.status==="uploading"||z.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(g).be("list","item-name")),onClick:withModifiers(le=>z.handlePreview(oe),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-file-name")),title:oe.name},toDisplayString(oe.name),11,_hoisted_4$5)],10,_hoisted_3$6),oe.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:z.listType==="picture-card"?"circle":"line","stroke-width":z.listType==="picture-card"?6:2,percentage:Number(oe.percentage),style:normalizeStyle(z.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(g).be("list","item-status-label"))},[z.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(z.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).m("close")),onClick:le=>V(oe)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(y).m("close-tip"))},toDisplayString(unref(n)("el.upload.deleteTip")),3)),z.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(g).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-preview")),onClick:le=>z.handlePreview(oe)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$4),unref(k)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).be("list","item-delete")),onClick:le=>V(oe)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$3))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$e))),128)),renderSlot(z.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc$1(_sfc_main$k,[["__file","upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:t=>isArray$3(t)},_hoisted_1$d=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$3=defineComponent({name:COMPONENT_NAME}),_sfc_main$j=defineComponent({...__default__$3,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(t,{emit:r}){const e=inject(uploadContextKey);e||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=useNamespace("upload"),g=ref(!1),y=useFormDisabled(),i=L=>{if(y.value)return;g.value=!1,L.stopPropagation();const $=Array.from(L.dataTransfer.files),V=e.accept.value;if(!V){r("file",$);return}const z=$.filter(re=>{const{type:oe,name:le}=re,ue=le.includes(".")?`.${le.split(".").pop()}`:"",ie=oe.replace(/\/.*$/,"");return V.split(",").map(ae=>ae.trim()).filter(ae=>ae).some(ae=>ae.startsWith(".")?ue===ae:/\/\*$/.test(ae)?ie===ae.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(ae)?oe===ae:!1)});r("file",z)},k=()=>{y.value||(g.value=!0)};return(L,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b("dragger"),unref(n).is("dragover",g.value)]),onDrop:withModifiers(i,["prevent"]),onDragover:withModifiers(k,["prevent"]),onDragleave:$[0]||($[0]=withModifiers(V=>g.value=!1,["prevent"]))},[renderSlot(L.$slots,"default")],42,_hoisted_1$d))}});var UploadDragger=_export_sfc$1(_sfc_main$j,[["__file","upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$c=["onKeydown"],_hoisted_2$7=["name","multiple","accept"],__default__$2=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$i=defineComponent({...__default__$2,props:uploadContentProps,setup(t,{expose:r}){const e=t,n=useNamespace("upload"),g=useFormDisabled(),y=shallowRef({}),i=shallowRef(),k=ue=>{if(ue.length===0)return;const{autoUpload:ie,limit:ae,fileList:Fe,multiple:de,onStart:Ie,onExceed:Ve}=e;if(ae&&Fe.length+ue.length>ae){Ve(ue,Fe);return}de||(ue=ue.slice(0,1));for(const kt of ue){const At=kt;At.uid=genFileId(),Ie(At),ie&&L(At)}},L=async ue=>{if(i.value.value="",!e.beforeUpload)return V(ue);let ie,ae={};try{const de=e.data,Ie=e.beforeUpload(ue);ae=isPlainObject$2(e.data)?cloneDeep(e.data):e.data,ie=await Ie,isPlainObject$2(e.data)&&isEqual(de,ae)&&(ae=cloneDeep(e.data))}catch{ie=!1}if(ie===!1){e.onRemove(ue);return}let Fe=ue;ie instanceof Blob&&(ie instanceof File?Fe=ie:Fe=new File([ie],ue.name,{type:ue.type})),V(Object.assign(Fe,{uid:ue.uid}),ae)},$=async(ue,ie)=>isFunction$3(ue)?ue(ie):ue,V=async(ue,ie)=>{const{headers:ae,data:Fe,method:de,withCredentials:Ie,name:Ve,action:kt,onProgress:At,onSuccess:ze,onError:Et,httpRequest:cr}=e;try{ie=await $(ie??Fe,ue)}catch{e.onRemove(ue);return}const{uid:er}=ue,or={headers:ae||{},withCredentials:Ie,file:ue,data:ie,method:de,filename:Ve,action:kt,onProgress:lr=>{At(lr,ue)},onSuccess:lr=>{ze(lr,ue),delete y.value[er]},onError:lr=>{Et(lr,ue),delete y.value[er]}},dr=cr(or);y.value[er]=dr,dr instanceof Promise&&dr.then(or.onSuccess,or.onError)},z=ue=>{const ie=ue.target.files;ie&&k(Array.from(ie))},re=()=>{g.value||(i.value.value="",i.value.click())},oe=()=>{re()};return r({abort:ue=>{entriesOf(y.value).filter(ue?([ae])=>String(ue.uid)===ae:()=>!0).forEach(([ae,Fe])=>{Fe instanceof XMLHttpRequest&&Fe.abort(),delete y.value[ae]})},upload:L}),(ue,ie)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).m(ue.listType),unref(n).is("drag",ue.drag)]),tabindex:"0",onClick:re,onKeydown:withKeys(withModifiers(oe,["self"]),["enter","space"])},[ue.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(g),onFile:k},{default:withCtx(()=>[renderSlot(ue.$slots,"default")]),_:3},8,["disabled"])):renderSlot(ue.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:i,class:normalizeClass(unref(n).e("input")),name:ue.name,multiple:ue.multiple,accept:ue.accept,type:"file",onChange:z,onClick:ie[0]||(ie[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$7)],42,_hoisted_1$c))}});var UploadContent=_export_sfc$1(_sfc_main$i,[["__file","upload-content.vue"]]);const SCOPE="ElUpload",revokeFileObjectURL=t=>{var r;(r=t.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(t.url)},useHandlers=(t,r)=>{const e=useVModel(t,"fileList",void 0,{passive:!0}),n=re=>e.value.find(oe=>oe.uid===re.uid);function g(re){var oe;(oe=r.value)==null||oe.abort(re)}function y(re=["ready","uploading","success","fail"]){e.value=e.value.filter(oe=>!re.includes(oe.status))}const i=(re,oe)=>{const le=n(oe);le&&(console.error(re),le.status="fail",e.value.splice(e.value.indexOf(le),1),t.onError(re,le,e.value),t.onChange(le,e.value))},k=(re,oe)=>{const le=n(oe);le&&(t.onProgress(re,le,e.value),le.status="uploading",le.percentage=Math.round(re.percent))},L=(re,oe)=>{const le=n(oe);le&&(le.status="success",le.response=re,t.onSuccess(re,le,e.value),t.onChange(le,e.value))},$=re=>{isNil(re.uid)&&(re.uid=genFileId());const oe={name:re.name,percentage:0,status:"ready",size:re.size,raw:re,uid:re.uid};if(t.listType==="picture-card"||t.listType==="picture")try{oe.url=URL.createObjectURL(re)}catch(le){le.message,t.onError(le,oe,e.value)}e.value=[...e.value,oe],t.onChange(oe,e.value)},V=async re=>{const oe=re instanceof File?n(re):re;oe||throwError(SCOPE,"file to be removed not found");const le=ue=>{g(ue);const ie=e.value;ie.splice(ie.indexOf(ue),1),t.onRemove(ue,ie),revokeFileObjectURL(ue)};t.beforeRemove?await t.beforeRemove(oe,e.value)!==!1&&le(oe):le(oe)};function z(){e.value.filter(({status:re})=>re==="ready").forEach(({raw:re})=>{var oe;return re&&((oe=r.value)==null?void 0:oe.upload(re))})}return watch(()=>t.listType,re=>{re!=="picture-card"&&re!=="picture"||(e.value=e.value.map(oe=>{const{raw:le,url:ue}=oe;if(!ue&&le)try{oe.url=URL.createObjectURL(le)}catch(ie){t.onError(ie,oe,e.value)}return oe}))}),watch(e,re=>{for(const oe of re)oe.uid||(oe.uid=genFileId()),oe.status||(oe.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:g,clearFiles:y,handleError:i,handleProgress:k,handleStart:$,handleSuccess:L,handleRemove:V,submit:z,revokeFileObjectURL}},__default__$1=defineComponent({name:"ElUpload"}),_sfc_main$h=defineComponent({...__default__$1,props:uploadProps,setup(t,{expose:r}){const e=t,n=useFormDisabled(),g=shallowRef(),{abort:y,submit:i,clearFiles:k,uploadFiles:L,handleStart:$,handleError:V,handleRemove:z,handleSuccess:re,handleProgress:oe,revokeFileObjectURL:le}=useHandlers(e,g),ue=computed(()=>e.listType==="picture-card"),ie=computed(()=>({...e,fileList:L.value,onStart:$,onProgress:oe,onSuccess:re,onError:V,onRemove:z}));return onBeforeUnmount(()=>{L.value.forEach(le)}),provide(uploadContextKey,{accept:toRef(e,"accept")}),r({abort:y,submit:i,clearFiles:k,handleStart:$,handleRemove:z}),(ae,Fe)=>(openBlock(),createElementBlock("div",null,[unref(ue)&&ae.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(n),"list-type":ae.listType,files:unref(L),crossorigin:ae.crossorigin,"handle-preview":ae.onPreview,onRemove:unref(z)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:g},unref(ie)),{default:withCtx(()=>[ae.$slots.trigger?renderSlot(ae.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!ae.$slots.trigger&&ae.$slots.default?renderSlot(ae.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[ae.$slots.file?{name:"default",fn:withCtx(({file:de})=>[renderSlot(ae.$slots,"file",{file:de})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(ue)||unref(ue)&&!ae.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:g},unref(ie)),{default:withCtx(()=>[ae.$slots.trigger?renderSlot(ae.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!ae.$slots.trigger&&ae.$slots.default?renderSlot(ae.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),ae.$slots.trigger?renderSlot(ae.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(ae.$slots,"tip"),!unref(ue)&&ae.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(n),"list-type":ae.listType,files:unref(L),crossorigin:ae.crossorigin,"handle-preview":ae.onPreview,onRemove:unref(z)},createSlots({_:2},[ae.$slots.file?{name:"default",fn:withCtx(({file:de})=>[renderSlot(ae.$slots,"file",{file:de})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc$1(_sfc_main$h,[["__file","upload.vue"]]);const ElUpload=withInstall(Upload),messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),required:!1},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=t=>{const r=instances.findIndex(g=>g.id===t),e=instances[r];let n;return r>0&&(n=instances[r-1]),{current:e,prev:n}},getLastOffset=t=>{const{prev:r}=getInstance(t);return r?r.vm.exposed.bottom.value:0},getOffsetOrSpace=(t,r)=>instances.findIndex(n=>n.id===t)>0?20:r,_hoisted_1$b=["id"],_hoisted_2$6=["innerHTML"],__default__=defineComponent({name:"ElMessage"}),_sfc_main$g=defineComponent({...__default__,props:messageProps,emits:messageEmits,setup(t,{expose:r}){const e=t,{Close:n}=TypeComponents,{ns:g,zIndex:y}=useGlobalComponentSettings("message"),{currentZIndex:i,nextZIndex:k}=y,L=ref(),$=ref(!1),V=ref(0);let z;const re=computed(()=>e.type?e.type==="error"?"danger":e.type:"info"),oe=computed(()=>{const At=e.type;return{[g.bm("icon",At)]:At&&TypeComponentsMap[At]}}),le=computed(()=>e.icon||TypeComponentsMap[e.type]||""),ue=computed(()=>getLastOffset(e.id)),ie=computed(()=>getOffsetOrSpace(e.id,e.offset)+ue.value),ae=computed(()=>V.value+ie.value),Fe=computed(()=>({top:`${ie.value}px`,zIndex:i.value}));function de(){e.duration!==0&&({stop:z}=useTimeoutFn(()=>{Ve()},e.duration))}function Ie(){z==null||z()}function Ve(){$.value=!1}function kt({code:At}){At===EVENT_CODE.esc&&Ve()}return onMounted(()=>{de(),k(),$.value=!0}),watch(()=>e.repeatNum,()=>{Ie(),de()}),useEventListener(document,"keydown",kt),useResizeObserver(L,()=>{V.value=L.value.getBoundingClientRect().height}),r({visible:$,bottom:ae,close:Ve}),(At,ze)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),onBeforeLeave:At.onClose,onAfterLeave:ze[0]||(ze[0]=Et=>At.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:At.id,ref_key:"messageRef",ref:L,class:normalizeClass([unref(g).b(),{[unref(g).m(At.type)]:At.type},unref(g).is("center",At.center),unref(g).is("closable",At.showClose),At.customClass]),style:normalizeStyle(unref(Fe)),role:"alert",onMouseenter:Ie,onMouseleave:de},[At.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:At.repeatNum,type:unref(re),class:normalizeClass(unref(g).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(le)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(g).e("icon"),unref(oe)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(le))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(At.$slots,"default",{},()=>[At.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(g).e("content")),innerHTML:At.message},null,10,_hoisted_2$6)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(g).e("content"))},toDisplayString(At.message),3))]),At.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(g).e("closeBtn")),onClick:withModifiers(Ve,["stop"])},{default:withCtx(()=>[createVNode(unref(n))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$b),[[vShow,$.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc$1(_sfc_main$g,[["__file","message.vue"]]);let seed=1;const normalizeOptions=t=>{const r=!t||isString$2(t)||isVNode(t)||isFunction$3(t)?{message:t}:t,e={...messageDefaults,...r};if(!e.appendTo)e.appendTo=document.body;else if(isString$2(e.appendTo)){let n=document.querySelector(e.appendTo);isElement(n)||(n=document.body),e.appendTo=n}return e},closeMessage=t=>{const r=instances.indexOf(t);if(r===-1)return;instances.splice(r,1);const{handler:e}=t;e.close()},createMessage=({appendTo:t,...r},e)=>{const n=`message_${seed++}`,g=r.onClose,y=document.createElement("div"),i={...r,id:n,onClose:()=>{g==null||g(),closeMessage(V)},onDestroy:()=>{render(null,y)}},k=createVNode(MessageConstructor,i,isFunction$3(i.message)||isVNode(i.message)?{default:isFunction$3(i.message)?i.message:()=>i.message}:null);k.appContext=e||message._context,render(k,y),t.appendChild(y.firstElementChild);const L=k.component,V={id:n,vnode:k,vm:L,handler:{close:()=>{L.exposed.visible.value=!1}},props:k.component.props};return V},message=(t={},r)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const e=normalizeOptions(t);if(e.grouping&&instances.length){const g=instances.find(({vnode:y})=>{var i;return((i=y.props)==null?void 0:i.message)===e.message});if(g)return g.props.repeatNum+=1,g.props.type=e.type,g.handler}const n=createMessage(e,r);return instances.push(n),n.handler};messageTypes.forEach(t=>{message[t]=(r={},e)=>{const n=normalizeOptions(r);return message({...n,type:t},e)}});function closeAll(t){for(const r of instances)(!t||t===r.props.type)&&r.handler.close()}message.closeAll=closeAll;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$f=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:r}){const{locale:e,zIndex:n,ns:g,size:y}=useGlobalComponentSettings("message-box",computed(()=>t.buttonSize)),{t:i}=e,{nextZIndex:k}=n,L=ref(!1),$=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:k()}),V=computed(()=>{const ur=$.type;return{[g.bm("icon",ur)]:ur&&TypeComponentsMap[ur]}}),z=useId(),re=useId(),oe=computed(()=>$.icon||TypeComponentsMap[$.type]||""),le=computed(()=>!!$.message),ue=ref(),ie=ref(),ae=ref(),Fe=ref(),de=ref(),Ie=computed(()=>$.confirmButtonClass);watch(()=>$.inputValue,async ur=>{await nextTick(),t.boxType==="prompt"&&ur!==null&&or()},{immediate:!0}),watch(()=>L.value,ur=>{var ar,gr;ur&&(t.boxType!=="prompt"&&($.autofocus?ae.value=(gr=(ar=de.value)==null?void 0:ar.$el)!=null?gr:ue.value:ae.value=ue.value),$.zIndex=k()),t.boxType==="prompt"&&(ur?nextTick().then(()=>{var pr;Fe.value&&Fe.value.$el&&($.autofocus?ae.value=(pr=dr())!=null?pr:ue.value:ae.value=ue.value)}):($.editorErrorMessage="",$.validateError=!1))});const Ve=computed(()=>t.draggable),kt=computed(()=>t.overflow);useDraggable(ue,ie,Ve,kt),onMounted(async()=>{await nextTick(),t.closeOnHashChange&&window.addEventListener("hashchange",At)}),onBeforeUnmount(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",At)});function At(){L.value&&(L.value=!1,nextTick(()=>{$.action&&r("action",$.action)}))}const ze=()=>{t.closeOnClickModal&&er($.distinguishCancelAndClose?"close":"cancel")},Et=useSameTarget(ze),cr=ur=>{if($.inputType!=="textarea")return ur.preventDefault(),er("confirm")},er=ur=>{var ar;t.boxType==="prompt"&&ur==="confirm"&&!or()||($.action=ur,$.beforeClose?(ar=$.beforeClose)==null||ar.call($,ur,$,At):At())},or=()=>{if(t.boxType==="prompt"){const ur=$.inputPattern;if(ur&&!ur.test($.inputValue||""))return $.editorErrorMessage=$.inputErrorMessage||i("el.messagebox.error"),$.validateError=!0,!1;const ar=$.inputValidator;if(typeof ar=="function"){const gr=ar($.inputValue);if(gr===!1)return $.editorErrorMessage=$.inputErrorMessage||i("el.messagebox.error"),$.validateError=!0,!1;if(typeof gr=="string")return $.editorErrorMessage=gr,$.validateError=!0,!1}}return $.editorErrorMessage="",$.validateError=!1,!0},dr=()=>{const ur=Fe.value.$refs;return ur.input||ur.textarea},lr=()=>{er("close")},nr=()=>{t.closeOnPressEscape&&lr()};return t.lockScroll&&useLockscreen(L),{...toRefs($),ns:g,overlayEvent:Et,visible:L,hasMessage:le,typeClass:V,contentId:z,inputId:re,btnSize:y,iconComponent:oe,confirmButtonClasses:Ie,rootRef:ue,focusStartRef:ae,headerRef:ie,inputRef:Fe,confirmRef:de,doClose:At,handleClose:lr,onCloseRequested:nr,handleWrapperClick:ze,handleInputEnter:cr,handleAction:er,t:i}}}),_hoisted_1$a=["aria-label","aria-describedby"],_hoisted_2$5=["aria-label"],_hoisted_3$5=["id"];function _sfc_render(t,r,e,n,g,y){const i=resolveComponent("el-icon"),k=resolveComponent("close"),L=resolveComponent("el-input"),$=resolveComponent("el-button"),V=resolveComponent("el-focus-trap"),z=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:r[11]||(r[11]=re=>t.$emit("vanish")),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(z,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:normalizeClass(`${t.ns.namespace.value}-overlay-message-box`),onClick:r[8]||(r[8]=(...re)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...re)),onMousedown:r[9]||(r[9]=(...re)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...re)),onMouseup:r[10]||(r[10]=(...re)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...re))},[createVNode(V,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:normalizeStyle(t.customStyle),tabindex:"-1",onClick:r[7]||(r[7]=withModifiers(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass([t.ns.e("header"),{"show-close":t.showClose}])},[createBaseVNode("div",{class:normalizeClass(t.ns.e("title"))},[t.iconComponent&&t.center?(openBlock(),createBlock(i,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString(t.title),1)],2),t.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:r[0]||(r[0]=re=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:r[1]||(r[1]=withKeys(withModifiers(re=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[createVNode(i,{class:normalizeClass(t.ns.e("close"))},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class"])],42,_hoisted_2$5)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:t.contentId,class:normalizeClass(t.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(openBlock(),createBlock(i,{key:0,class:normalizeClass([t.ns.e("status"),t.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),t.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.ns.e("message"))},[renderSlot(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(t.ns.e("input"))},[createVNode(L,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":r[2]||(r[2]=re=>t.inputValue=re),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:normalizeClass({invalid:t.validateError}),onKeydown:withKeys(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(t.ns.e("errormsg")),style:normalizeStyle({visibility:t.editorErrorMessage?"visible":"hidden"})},toDisplayString(t.editorErrorMessage),7)],2),[[vShow,t.showInput]])],10,_hoisted_3$5),createBaseVNode("div",{class:normalizeClass(t.ns.e("btns"))},[t.showCancelButton?(openBlock(),createBlock($,{key:0,loading:t.cancelButtonLoading,class:normalizeClass([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:r[3]||(r[3]=re=>t.handleAction("cancel")),onKeydown:r[4]||(r[4]=withKeys(withModifiers(re=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):createCommentVNode("v-if",!0),withDirectives(createVNode($,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:normalizeClass([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:r[5]||(r[5]=re=>t.handleAction("confirm")),onKeydown:r[6]||(r[6]=withKeys(withModifiers(re=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vShow,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_hoisted_1$a)]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,t.visible]])]),_:3})}var MessageBoxConstructor=_export_sfc$1(_sfc_main$f,[["render",_sfc_render],["__file","index.vue"]]);const messageInstance=new Map,getAppendToElement=t=>{let r=document.body;return t.appendTo&&(isString$2(t.appendTo)&&(r=document.querySelector(t.appendTo)),isElement(t.appendTo)&&(r=t.appendTo),isElement(r)||(r=document.body)),r},initInstance=(t,r,e=null)=>{const n=createVNode(MessageBoxConstructor,t,isFunction$3(t.message)||isVNode(t.message)?{default:isFunction$3(t.message)?t.message:()=>t.message}:null);return n.appContext=e,render(n,r),getAppendToElement(t).appendChild(r.firstElementChild),n.component},genContainer=()=>document.createElement("div"),showMessage=(t,r)=>{const e=genContainer();t.onVanish=()=>{render(null,e),messageInstance.delete(g)},t.onAction=y=>{const i=messageInstance.get(g);let k;t.showInput?k={value:g.inputValue,action:y}:k=y,t.callback?t.callback(k,n.proxy):y==="cancel"||y==="close"?t.distinguishCancelAndClose&&y!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(k)};const n=initInstance(t,e,r),g=n.proxy;for(const y in t)hasOwn(t,y)&&!hasOwn(g.$props,y)&&(g[y]=t[y]);return g.visible=!0,g};function MessageBox(t,r=null){if(!isClient)return Promise.reject();let e;return isString$2(t)||isVNode(t)?t={message:t}:e=t.callback,new Promise((n,g)=>{const y=showMessage(t,r??MessageBox._context);messageInstance.set(y,{options:t,callback:e,resolve:n,reject:g})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(t=>{MessageBox[t]=messageBoxFactory(t)});function messageBoxFactory(t){return(r,e,n,g)=>{let y="";return isObject$2(e)?(n=e,y=""):isUndefined$1(e)?y="":y=e,MessageBox(Object.assign({title:y,message:r,type:"",...MESSAGE_BOX_DEFAULT_OPTS[t]},n,{boxType:t}),g)}}MessageBox.close=()=>{messageInstance.forEach((t,r)=>{r.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=t=>{_MessageBox._context=t._context,t.config.globalProperties.$msgbox=_MessageBox,t.config.globalProperties.$messageBox=_MessageBox,t.config.globalProperties.$alert=_MessageBox.alert,t.config.globalProperties.$confirm=_MessageBox.confirm,t.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,base="",elContainer="",elAside="",elFooter="",elHeader="",elMain="",elCard="",elScrollbar="",elMenu="",elTooltip="",elPopper="",elSubMenu="",elMenuItem="",elIcon="",elImage="",elImageViewer="",elDivider="",elRow="",elCol="",_imports_0=""+new URL("rocket.gif",import.meta.url).href,_imports_1=""+new URL("rocket.png",import.meta.url).href,logApi=()=>({add:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,y.type=="link"&&(y.color="#409eff"),k.push(y),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},addRange:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,y.forEach(L=>k.push(L)),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},getLogs:()=>{try{var y=localStorage.getItem("localLog"),i;if(y)i=JSON.parse(y);else return;return i}catch{return}},addSystem:y=>{try{var i=localStorage.getItem("localLog"),k;return i?k=JSON.parse(i):k=new Array,k.push({type:"system",time:new Date().toLocaleString(),content:y}),localStorage.setItem("localLog",JSON.stringify(k)),!0}catch{return!1}},clearLog:()=>{localStorage.removeItem("localLog")}});function bind(t,r){return function(){return t.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>r=>{const e=toString.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),r=>kindOf(r)===t),typeOfTest=t=>r=>typeof r===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&isArrayBuffer(t.buffer),r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const r=getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((r=kindOf(t))==="formdata"||r==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,g;if(typeof t!="object"&&(t=[t]),isArray(t))for(n=0,g=t.length;n<g;n++)r.call(null,t[n],n,t);else{const y=e?Object.getOwnPropertyNames(t):Object.keys(t),i=y.length;let k;for(n=0;n<i;n++)k=y[n],r.call(null,t[k],k,t)}}function findKey(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,g;for(;n-- >0;)if(g=e[n],r===g.toLowerCase())return g;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},r={},e=(n,g)=>{const y=t&&findKey(r,g)||g;isPlainObject(r[y])&&isPlainObject(n)?r[y]=merge(r[y],n):isPlainObject(n)?r[y]=merge({},n):isArray(n)?r[y]=n.slice():r[y]=n};for(let n=0,g=arguments.length;n<g;n++)arguments[n]&&forEach(arguments[n],e);return r}const extend=(t,r,e,{allOwnKeys:n}={})=>(forEach(r,(g,y)=>{e&&isFunction(g)?t[y]=bind(g,e):t[y]=g},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},toFlatObject=(t,r,e,n)=>{let g,y,i;const k={};if(r=r||{},t==null)return r;do{for(g=Object.getOwnPropertyNames(t),y=g.length;y-- >0;)i=g[y],(!n||n(i,t,r))&&!k[i]&&(r[i]=t[i],k[i]=!0);t=e!==!1&&getPrototypeOf(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},endsWith=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},toArray=t=>{if(!t)return null;if(isArray(t))return t;let r=t.length;if(!isNumber(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},isTypedArray=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let g;for(;(g=n.next())&&!g.done;){const y=g.value;r.call(t,y[0],y[1])}},matchAll=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,g){return n.toUpperCase()+g}),hasOwnProperty=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};forEach(e,(g,y)=>{let i;(i=r(g,y,t))!==!1&&(n[y]=i||g)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(r,e)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(isFunction(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(t,r)=>{const e={},n=g=>{g.forEach(y=>{e[y]=!0})};return isArray(t)?n(t):n(String(t).split(r)),e},noop=()=>{},toFiniteNumber=(t,r)=>(t=+t,Number.isFinite(t)?t:r),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,r=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const r=new Array(10),e=(n,g)=>{if(isObject(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[g]=n;const y=isArray(n)?[]:{};return forEach(n,(i,k)=>{const L=e(i,g+1);!isUndefined(L)&&(y[k]=L)}),r[g]=void 0,y}}return n};return e(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(t,r,e,n,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),g&&(this.response=g)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,r,e,n,g,y)=>{const i=Object.create(prototype$1);return utils$1.toFlatObject(t,i,function(L){return L!==Error.prototype},k=>k!=="isAxiosError"),AxiosError.call(i,t.message,r,e,n,g),i.cause=t,i.name=t.name,y&&Object.assign(i,y),i};const httpAdapter=null;function isVisitable(t){return utils$1.isPlainObject(t)||utils$1.isArray(t)}function removeBrackets(t){return utils$1.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,r,e){return t?t.concat(r).map(function(g,y){return g=removeBrackets(g),!e&&y?"["+g+"]":g}).join(e?".":""):r}function isFlatArray(t){return utils$1.isArray(t)&&!t.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(t,r,e){if(!utils$1.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=utils$1.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ue,ie){return!utils$1.isUndefined(ie[ue])});const n=e.metaTokens,g=e.visitor||V,y=e.dots,i=e.indexes,L=(e.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(r);if(!utils$1.isFunction(g))throw new TypeError("visitor must be a function");function $(le){if(le===null)return"";if(utils$1.isDate(le))return le.toISOString();if(!L&&utils$1.isBlob(le))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(le)||utils$1.isTypedArray(le)?L&&typeof Blob=="function"?new Blob([le]):Buffer.from(le):le}function V(le,ue,ie){let ae=le;if(le&&!ie&&typeof le=="object"){if(utils$1.endsWith(ue,"{}"))ue=n?ue:ue.slice(0,-2),le=JSON.stringify(le);else if(utils$1.isArray(le)&&isFlatArray(le)||(utils$1.isFileList(le)||utils$1.endsWith(ue,"[]"))&&(ae=utils$1.toArray(le)))return ue=removeBrackets(ue),ae.forEach(function(de,Ie){!(utils$1.isUndefined(de)||de===null)&&r.append(i===!0?renderKey([ue],Ie,y):i===null?ue:ue+"[]",$(de))}),!1}return isVisitable(le)?!0:(r.append(renderKey(ie,ue,y),$(le)),!1)}const z=[],re=Object.assign(predicates,{defaultVisitor:V,convertValue:$,isVisitable});function oe(le,ue){if(!utils$1.isUndefined(le)){if(z.indexOf(le)!==-1)throw Error("Circular reference detected in "+ue.join("."));z.push(le),utils$1.forEach(le,function(ae,Fe){(!(utils$1.isUndefined(ae)||ae===null)&&g.call(r,ae,utils$1.isString(Fe)?Fe.trim():Fe,ue,re))===!0&&oe(ae,ue?ue.concat(Fe):[Fe])}),z.pop()}}if(!utils$1.isObject(t))throw new TypeError("data must be an object");return oe(t),r}function encode$1(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function AxiosURLSearchParams(t,r){this._pairs=[],t&&toFormData(t,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,e){this._pairs.push([r,e])};prototype.toString=function(r){const e=r?function(n){return r.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(g){return e(g[0])+"="+e(g[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,r,e){if(!r)return t;const n=e&&e.encode||encode,g=e&&e.serialize;let y;if(g?y=g(r,e):y=utils$1.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,e).toString(n),y){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+y}return t}class InterceptorManager{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils$1.forEach(this.handlers,function(n){n!==null&&r(n)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(t=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(t,r){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,g,y){return platform.isNode&&utils$1.isBuffer(e)?(this.append(n,e.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(t){return utils$1.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(t){const r={},e=Object.keys(t);let n;const g=e.length;let y;for(n=0;n<g;n++)y=e[n],r[y]=t[y];return r}function formDataToJSON(t){function r(e,n,g,y){let i=e[y++];if(i==="__proto__")return!0;const k=Number.isFinite(+i),L=y>=e.length;return i=!i&&utils$1.isArray(g)?g.length:i,L?(utils$1.hasOwnProp(g,i)?g[i]=[g[i],n]:g[i]=n,!k):((!g[i]||!utils$1.isObject(g[i]))&&(g[i]=[]),r(e,n,g[i],y)&&utils$1.isArray(g[i])&&(g[i]=arrayToObject(g[i])),!k)}if(utils$1.isFormData(t)&&utils$1.isFunction(t.entries)){const e={};return utils$1.forEachEntry(t,(n,g)=>{r(parsePropPath(n),g,e,0)}),e}return null}function stringifySafely(t,r,e){if(utils$1.isString(t))try{return(r||JSON.parse)(t),utils$1.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(r,e){const n=e.getContentType()||"",g=n.indexOf("application/json")>-1,y=utils$1.isObject(r);if(y&&utils$1.isHTMLForm(r)&&(r=new FormData(r)),utils$1.isFormData(r))return g?JSON.stringify(formDataToJSON(r)):r;if(utils$1.isArrayBuffer(r)||utils$1.isBuffer(r)||utils$1.isStream(r)||utils$1.isFile(r)||utils$1.isBlob(r))return r;if(utils$1.isArrayBufferView(r))return r.buffer;if(utils$1.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let k;if(y){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((k=utils$1.isFileList(r))||n.indexOf("multipart/form-data")>-1){const L=this.env&&this.env.FormData;return toFormData(k?{"files[]":r}:r,L&&new L,this.formSerializer)}}return y||g?(e.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,g=this.responseType==="json";if(r&&utils$1.isString(r)&&(n&&!this.responseType||g)){const i=!(e&&e.silentJSONParsing)&&g;try{return JSON.parse(r)}catch(k){if(i)throw k.name==="SyntaxError"?AxiosError.from(k,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):k}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],t=>{defaults.headers[t]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const r={};let e,n,g;return t&&t.split(`
`).forEach(function(i){g=i.indexOf(":"),e=i.substring(0,g).trim().toLowerCase(),n=i.substring(g+1).trim(),!(!e||r[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils$1.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,r,e,n,g){if(utils$1.isFunction(n))return n.call(this,r,e);if(g&&(r=e),!!utils$1.isString(r)){if(utils$1.isString(n))return r.indexOf(n)!==-1;if(utils$1.isRegExp(n))return n.test(r)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function buildAccessors(t,r){const e=utils$1.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(g,y,i){return this[n].call(this,r,g,y,i)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,e,n){const g=this;function y(k,L,$){const V=normalizeHeader(L);if(!V)throw new Error("header name must be a non-empty string");const z=utils$1.findKey(g,V);(!z||g[z]===void 0||$===!0||$===void 0&&g[z]!==!1)&&(g[z||L]=normalizeValue(k))}const i=(k,L)=>utils$1.forEach(k,($,V)=>y($,V,L));return utils$1.isPlainObject(r)||r instanceof this.constructor?i(r,e):utils$1.isString(r)&&(r=r.trim())&&!isValidHeaderName(r)?i(parseHeaders(r),e):r!=null&&y(e,r,n),this}get(r,e){if(r=normalizeHeader(r),r){const n=utils$1.findKey(this,r);if(n){const g=this[n];if(!e)return g;if(e===!0)return parseTokens(g);if(utils$1.isFunction(e))return e.call(this,g,n);if(utils$1.isRegExp(e))return e.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=normalizeHeader(r),r){const n=utils$1.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let g=!1;function y(i){if(i=normalizeHeader(i),i){const k=utils$1.findKey(n,i);k&&(!e||matchHeaderValue(n,n[k],k,e))&&(delete n[k],g=!0)}}return utils$1.isArray(r)?r.forEach(y):y(r),g}clear(r){const e=Object.keys(this);let n=e.length,g=!1;for(;n--;){const y=e[n];(!r||matchHeaderValue(this,this[y],y,r,!0))&&(delete this[y],g=!0)}return g}normalize(r){const e=this,n={};return utils$1.forEach(this,(g,y)=>{const i=utils$1.findKey(n,y);if(i){e[i]=normalizeValue(g),delete e[y];return}const k=r?formatHeader(y):String(y).trim();k!==y&&delete e[y],e[k]=normalizeValue(g),n[k]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return utils$1.forEach(this,(n,g)=>{n!=null&&n!==!1&&(e[g]=r&&utils$1.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(g=>n.set(g)),n}static accessor(r){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,g=this.prototype;function y(i){const k=normalizeHeader(i);n[k]||(buildAccessors(g,i),n[k]=!0)}return utils$1.isArray(r)?r.forEach(y):y(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[e]=n}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,r){const e=this||defaults$1,n=r||e,g=AxiosHeaders$1.from(n.headers);let y=n.data;return utils$1.forEach(t,function(k){y=k.call(e,y,g.normalize(),r?r.status:void 0)}),g.normalize(),y}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,r,e){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,r,e),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const cookies=platform.hasStandardBrowserEnv?{write(t,r,e,n,g,y){const i=[t+"="+encodeURIComponent(r)];utils$1.isNumber(e)&&i.push("expires="+new Date(e).toGMTString()),utils$1.isString(n)&&i.push("path="+n),utils$1.isString(g)&&i.push("domain="+g),y===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function buildFullPath(t,r){return t&&!isAbsoluteURL(r)?combineURLs(t,r):r}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function g(y){let i=y;return r&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=g(window.location.href),function(i){const k=utils$1.isString(i)?g(i):i;return k.protocol===n.protocol&&k.host===n.host}}():function(){return function(){return!0}}();function parseProtocol(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function speedometer(t,r){t=t||10;const e=new Array(t),n=new Array(t);let g=0,y=0,i;return r=r!==void 0?r:1e3,function(L){const $=Date.now(),V=n[y];i||(i=$),e[g]=L,n[g]=$;let z=y,re=0;for(;z!==g;)re+=e[z++],z=z%t;if(g=(g+1)%t,g===y&&(y=(y+1)%t),$-i<r)return;const oe=V&&$-V;return oe?Math.round(re*1e3/oe):void 0}}function progressEventReducer(t,r){let e=0;const n=speedometer(50,250);return g=>{const y=g.loaded,i=g.lengthComputable?g.total:void 0,k=y-e,L=n(k),$=y<=i;e=y;const V={loaded:y,total:i,progress:i?y/i:void 0,bytes:k,rate:L||void 0,estimated:L&&i&&$?(i-y)/L:void 0,event:g};V[r?"download":"upload"]=!0,t(V)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(e,n){let g=t.data;const y=AxiosHeaders$1.from(t.headers).normalize();let{responseType:i,withXSRFToken:k}=t,L;function $(){t.cancelToken&&t.cancelToken.unsubscribe(L),t.signal&&t.signal.removeEventListener("abort",L)}let V;if(utils$1.isFormData(g)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)y.setContentType(!1);else if((V=y.getContentType())!==!1){const[ue,...ie]=V?V.split(";").map(ae=>ae.trim()).filter(Boolean):[];y.setContentType([ue||"multipart/form-data",...ie].join("; "))}}let z=new XMLHttpRequest;if(t.auth){const ue=t.auth.username||"",ie=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.set("Authorization","Basic "+btoa(ue+":"+ie))}const re=buildFullPath(t.baseURL,t.url);z.open(t.method.toUpperCase(),buildURL(re,t.params,t.paramsSerializer),!0),z.timeout=t.timeout;function oe(){if(!z)return;const ue=AxiosHeaders$1.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders()),ae={data:!i||i==="text"||i==="json"?z.responseText:z.response,status:z.status,statusText:z.statusText,headers:ue,config:t,request:z};settle(function(de){e(de),$()},function(de){n(de),$()},ae),z=null}if("onloadend"in z?z.onloadend=oe:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(oe)},z.onabort=function(){z&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,z)),z=null)},z.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,z)),z=null},z.ontimeout=function(){let ie=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const ae=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(ie=t.timeoutErrorMessage),n(new AxiosError(ie,ae.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,z)),z=null},platform.hasStandardBrowserEnv&&(k&&utils$1.isFunction(k)&&(k=k(t)),k||k!==!1&&isURLSameOrigin(re))){const ue=t.xsrfHeaderName&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);ue&&y.set(t.xsrfHeaderName,ue)}g===void 0&&y.setContentType(null),"setRequestHeader"in z&&utils$1.forEach(y.toJSON(),function(ie,ae){z.setRequestHeader(ae,ie)}),utils$1.isUndefined(t.withCredentials)||(z.withCredentials=!!t.withCredentials),i&&i!=="json"&&(z.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&z.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&z.upload&&z.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(L=ue=>{z&&(n(!ue||ue.type?new CanceledError(null,t,z):ue),z.abort(),z=null)},t.cancelToken&&t.cancelToken.subscribe(L),t.signal&&(t.signal.aborted?L():t.signal.addEventListener("abort",L)));const le=parseProtocol(re);if(le&&platform.protocols.indexOf(le)===-1){n(new AxiosError("Unsupported protocol "+le+":",AxiosError.ERR_BAD_REQUEST,t));return}z.send(g||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils$1.isFunction(t)||t===null||t===!1,adapters={getAdapter:t=>{t=utils$1.isArray(t)?t:[t];const{length:r}=t;let e,n;const g={};for(let y=0;y<r;y++){e=t[y];let i;if(n=e,!isResolvedHandle(e)&&(n=knownAdapters[(i=String(e)).toLowerCase()],n===void 0))throw new AxiosError(`Unknown adapter '${i}'`);if(n)break;g[i||"#"+y]=n}if(!n){const y=Object.entries(g).map(([k,L])=>`adapter ${k} `+(L===!1?"is not supported by the environment":"is not available in the build"));let i=r?y.length>1?`since :
`+y.map(renderReason).join(`
`):" "+renderReason(y[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,r){r=r||{};const e={};function n($,V,z){return utils$1.isPlainObject($)&&utils$1.isPlainObject(V)?utils$1.merge.call({caseless:z},$,V):utils$1.isPlainObject(V)?utils$1.merge({},V):utils$1.isArray(V)?V.slice():V}function g($,V,z){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined($))return n(void 0,$,z)}else return n($,V,z)}function y($,V){if(!utils$1.isUndefined(V))return n(void 0,V)}function i($,V){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined($))return n(void 0,$)}else return n(void 0,V)}function k($,V,z){if(z in r)return n($,V);if(z in t)return n(void 0,$)}const L={url:y,method:y,data:y,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:k,headers:($,V)=>g(headersToObject($),headersToObject(V),!0)};return utils$1.forEach(Object.keys(Object.assign({},t,r)),function(V){const z=L[V]||g,re=z(t[V],r[V],V);utils$1.isUndefined(re)&&z!==k||(e[V]=re)}),e}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(r,e,n){function g(y,i){return"[Axios v"+VERSION+"] Transitional option '"+y+"'"+i+(n?". "+n:"")}return(y,i,k)=>{if(r===!1)throw new AxiosError(g(i," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0,console.warn(g(i," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(y,i,k):!0}};function assertOptions(t,r,e){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let g=n.length;for(;g-- >0;){const y=n[g],i=r[y];if(i){const k=t[y],L=k===void 0||i(k,y,t);if(L!==!0)throw new AxiosError("option "+y+" must be "+L,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+y,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(r,e){try{return await this._request(r,e)}catch(n){if(n instanceof Error){let g;Error.captureStackTrace?Error.captureStackTrace(g={}):g=new Error;const y=g.stack?g.stack.replace(/^.+\n/,""):"";n.stack?y&&!String(n.stack).endsWith(y.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+y):n.stack=y}throw n}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=mergeConfig(this.defaults,e);const{transitional:n,paramsSerializer:g,headers:y}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),g!=null&&(utils$1.isFunction(g)?e.paramsSerializer={serialize:g}:validator.assertOptions(g,{encode:validators.function,serialize:validators.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=y&&utils$1.merge(y.common,y[e.method]);y&&utils$1.forEach(["delete","get","head","post","put","patch","common"],le=>{delete y[le]}),e.headers=AxiosHeaders$1.concat(i,y);const k=[];let L=!0;this.interceptors.request.forEach(function(ue){typeof ue.runWhen=="function"&&ue.runWhen(e)===!1||(L=L&&ue.synchronous,k.unshift(ue.fulfilled,ue.rejected))});const $=[];this.interceptors.response.forEach(function(ue){$.push(ue.fulfilled,ue.rejected)});let V,z=0,re;if(!L){const le=[dispatchRequest.bind(this),void 0];for(le.unshift.apply(le,k),le.push.apply(le,$),re=le.length,V=Promise.resolve(e);z<re;)V=V.then(le[z++],le[z++]);return V}re=k.length;let oe=e;for(z=0;z<re;){const le=k[z++],ue=k[z++];try{oe=le(oe)}catch(ie){ue.call(this,ie);break}}try{V=dispatchRequest.call(this,oe)}catch(le){return Promise.reject(le)}for(z=0,re=$.length;z<re;)V=V.then($[z++],$[z++]);return V}getUri(r){r=mergeConfig(this.defaults,r);const e=buildFullPath(r.baseURL,r.url);return buildURL(e,r.params,r.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,n){return this.request(mergeConfig(n||{},{method:r,url:e,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function(r){function e(n){return function(y,i,k){return this.request(mergeConfig(k||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:y,data:i}))}}Axios.prototype[r]=e(),Axios.prototype[r+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(y){e=y});const n=this;this.promise.then(g=>{if(!n._listeners)return;let y=n._listeners.length;for(;y-- >0;)n._listeners[y](g);n._listeners=null}),this.promise.then=g=>{let y;const i=new Promise(k=>{n.subscribe(k),y=k}).then(g);return i.cancel=function(){n.unsubscribe(y)},i},r(function(y,i,k){n.reason||(n.reason=new CanceledError(y,i,k),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new CancelToken(function(g){r=g}),cancel:r}}}const CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(t){return utils$1.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,r])=>{HttpStatusCode[r]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const r=new Axios$1(t),e=bind(Axios$1.prototype.request,r);return utils$1.extend(e,Axios$1.prototype,r,{allOwnKeys:!0}),utils$1.extend(e,r,null,{allOwnKeys:!0}),e.create=function(g){return createInstance(mergeConfig(t,g))},e}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(r){return Promise.all(r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils$1.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,_port=sessionStorage.getItem("HttpPort")||5266,getApiurl=()=>(console.log("environment","production"),`http://localhost:${_port}/api/v1`),_baseUrl=getApiurl(),ApiPrefix=_baseUrl,startBot=async(t=!0)=>(await axios$1.get(`${_baseUrl}/startbot?botReady=${t}`)).data,getConfig=async()=>(await axios$1.get(`${_baseUrl}/getconfig`)).data,saveConfig=async t=>(await axios$1.post(`${_baseUrl}/saveconfig`,t)).data,postMsg=async(t,r=0)=>(await axios$1.post(`${_baseUrl}/postmsg?type=`+r,t)).data,getCache=async t=>(await axios$1.get(`${_baseUrl}/getCache?pageIndex=${t.pageIndex}&pageSize=${t.pageSize}`)).data,saveImg=async t=>(await axios$1.get(`${_baseUrl}/saveimg/${t}`)).data,delImg=async t=>(await axios$1.get(`${_baseUrl}/delimg/${t}`)).data,getFun=async()=>(await axios$1.get(`${_baseUrl}/getfun`)).data,startPlugin=async(t,r)=>(await axios$1.get(`${_baseUrl}/startplugin?name=${t}&version=${r}`)).data,stopPlugin=async t=>(await axios$1.get(`${_baseUrl}/stopplugin?name=${t}`)).data,delPlugin=async t=>(await axios$1.get(`${_baseUrl}/delplugin?name=${t}`)).data,open$1=async t=>(await axios$1.get(`${_baseUrl}/openpluginconf?path=${t}`)).data,startAliYunPan=async()=>(await axios$1.get(`${_baseUrl}/startaliyunpan`)).data,searchIdol=async(t,r)=>(await axios$1.get(`${_baseUrl}/searchidol?group=${t}&name=${r}`)).data,sendSmsCode=async(t,r="86")=>(await axios$1.get(`${_baseUrl}/sendsmscode?mobile=${t}&area=${r}`)).data,pocketLogin=async(t,r)=>(await axios$1.get(`${_baseUrl}/pocketlogin?mobile=${t}&code=${r}`)).data,kdUserInfo=async t=>(await axios$1.post(`${_baseUrl}/kduserinfo`,t)).data,getLogs=async()=>(await axios$1.get(`${_baseUrl}/getlogs`)).data,getSuperAdmin=async(t,r,e,n,g)=>(await axios$1.get(`${_baseUrl}/searchfriend?keywords=${t}&host=${r}&wsPort=${e}&httpPort=${n}&token=${g}`)).data,getGroup=async(t,r,e,n,g)=>(await axios$1.get(`${_baseUrl}/searchgroup?keywords=${t}&host=${r}&wsPort=${e}&httpPort=${n}&token=${g}`)).data,getAdmin=async(t,r,e,n,g,y)=>(await axios$1.get(`${_baseUrl}/searchgroupmember?groups=${t}&keywords=${r}&host=${e}&wsPort=${n}&httpPort=${g}&token=${y}`)).data;var NIM_Web_SDK={exports:{}};/*!
 * 
 * VERSION: 9.16.2
 * Git Hash: 1ddefb74af2685d8546990b4a578f520ed738e86
 * 
 * Create At: 2024/5/22 下午2:28:56
 * 
 * Target: NIM_Web_SDK
 */(function(module,exports){(function(t,r){module.exports=r()})(window,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var g=r[n]={i:n,l:!1,exports:{}};return t[n].call(g.exports,g,g.exports,e),g.l=!0,g.exports}return e.m=t,e.c=r,e.d=function(n,g,y){e.o(n,g)||Object.defineProperty(n,g,{enumerable:!0,get:y})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,g){if(1&g&&(n=e(n)),8&g||4&g&&typeof n=="object"&&n&&n.__esModule)return n;var y=Object.create(null);if(e.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:n}),2&g&&typeof n!="string")for(var i in n)e.d(y,i,(function(k){return n[k]}).bind(null,i));return y},e.n=function(n){var g=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(g,"a",g),g},e.o=function(n,g){return Object.prototype.hasOwnProperty.call(n,g)},e.p="",e(e.s=938)}([function(t,r,e){var n=e(51),g=e(2),y=e(8),i=e(9),k=e(5),L=e(121),$=e(63),V=e(143),z=e(28),re=e(4),oe=e(11),le=e(6),ue=e(125),ie=e(144),ae=e(22),Fe=e(15),de=e(468),Ie=e(472),Ve=e(3),kt=e(68),At=e(78),ze=e(64),Et=e(52),cr=e(53),er=e(54),or=e(55),dr=e(42),lr=e(24);function nr(Mr,br){var yr=k(Mr);if(Et){var Tr=Et(Mr);br&&(Tr=Fe(Tr).call(Tr,function(Br){return cr(Mr,Br).enumerable})),yr.push.apply(yr,Tr)}return yr}function ur(Mr,br){var yr=At!==void 0&&ze(Mr)||Mr["@@iterator"];if(!yr){if(z(Mr)||(yr=function(Vr,Qr){var Tn;if(Vr){if(typeof Vr=="string")return ar(Vr,Qr);var xn=i(Tn=Object.prototype.toString.call(Vr)).call(Tn,8,-1);if(xn==="Object"&&Vr.constructor&&(xn=Vr.constructor.name),xn==="Map"||xn==="Set")return kt(Vr);if(xn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xn))return ar(Vr,Qr)}}(Mr))||br&&Mr&&typeof Mr.length=="number"){yr&&(Mr=yr);var Tr=0,Br=function(){};return{s:Br,n:function(){return Tr>=Mr.length?{done:!0}:{done:!1,value:Mr[Tr++]}},e:function(Vr){throw Vr},f:Br}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lr,Fr=!0,qr=!1;return{s:function(){yr=yr.call(Mr)},n:function(){var Vr=yr.next();return Fr=Vr.done,Vr},e:function(Vr){qr=!0,Lr=Vr},f:function(){try{Fr||yr.return==null||yr.return()}finally{if(qr)throw Lr}}}}function ar(Mr,br){(br==null||br>Mr.length)&&(br=Mr.length);for(var yr=0,Tr=new Array(br);yr<br;yr++)Tr[yr]=Mr[yr];return Tr}var gr=e(263),pr=e(203);function hr(Mr){lr(Mr)==="object"?(this.callFunc=Mr.callFunc||null,this.message=Mr.message||"UNKNOW ERROR"):this.message=Mr,this.time=new Date,this.timetag=+this.time}e(496);var Cr,wr,Sr=e(66),mr=Sr.getGlobal(),_r=/\s+/;Sr.deduplicate=function(Mr){var br=[];return g(Mr).call(Mr,function(yr){y(br).call(br,yr)===-1&&br.push(yr)}),br},Sr.capFirstLetter=function(Mr){return Mr?i(Mr=""+Mr).call(Mr,0,1).toUpperCase()+i(Mr).call(Mr,1):""},Sr.guid=(Cr=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Cr()+Cr()+Cr()+Cr()+Cr()+Cr()+Cr()+Cr()}),Sr.extend=function(Mr,br,yr){for(var Tr in br)Mr[Tr]!==void 0&&yr!==!0||(Mr[Tr]=br[Tr])},Sr.filterObj=function(Mr,br){var yr={};return Sr.isString(br)&&(br=br.split(_r)),g(br).call(br,function(Tr){Mr.hasOwnProperty(Tr)&&(yr[Tr]=Mr[Tr])}),yr},Sr.copy=function(Mr,br){var yr;return br=br||{},Mr&&g(yr=k(Mr)).call(yr,function(Tr){Sr.exist(Mr[Tr])&&(br[Tr]=Mr[Tr])}),br},Sr.copyWithNull=function(Mr,br){var yr;return br=br||{},Mr&&g(yr=k(Mr)).call(yr,function(Tr){(Sr.exist(Mr[Tr])||Sr.isnull(Mr[Tr]))&&(br[Tr]=Mr[Tr])}),br},Sr.findObjIndexInArray=function(Mr,br){Mr=Mr||[];var yr=br.keyPath||"id",Tr=-1;return L(Mr).call(Mr,function(Br,Lr){if(pr(Br,yr)===br.value)return Tr=Lr,!0}),Tr},Sr.findObjInArray=function(Mr,br){var yr=Sr.findObjIndexInArray(Mr,br);return yr===-1?null:Mr[yr]},Sr.mergeObjArray=function(){var Mr=[],br=i([]).call(arguments,0,-1),yr=arguments[arguments.length-1];Sr.isArray(yr)&&(br.push(yr),yr={});var Tr,Br=yr.keyPath=yr.keyPath||"id";for(yr.sortPath=yr.sortPath||Br;!Mr.length&&br.length;)Mr=br.shift()||[],Mr=i(Mr).call(Mr,0);return g(br).call(br,function(Lr){Lr&&g(Lr).call(Lr,function(Fr){(Tr=Sr.findObjIndexInArray(Mr,{keyPath:Br,value:pr(Fr,Br)}))!==-1?Mr[Tr]=Sr.merge({},Mr[Tr],Fr):Mr.push(Fr)})}),yr.notSort||(Mr=Sr.sortObjArray(Mr,yr)),Mr},Sr.cutObjArray=function(Mr){var br=i(Mr).call(Mr,0),yr=arguments.length,Tr=i([]).call(arguments,1,yr-1),Br=arguments[yr-1];Sr.isObject(Br)||(Tr.push(Br),Br={});var Lr,Fr=Br.keyPath=Br.keyPath||"id";return g(Tr).call(Tr,function(qr){Sr.isArray(qr)||(qr=[qr]),g(qr).call(qr,function(Vr){Vr&&(Br.value=pr(Vr,Fr),(Lr=Sr.findObjIndexInArray(br,Br))!==-1&&$(br).call(br,Lr,1))})}),br},Sr.sortObjArray=function(Mr,br){var yr=(br=br||{}).sortPath||"id";gr.insensitive=!!br.insensitive;var Tr,Br,Lr,Fr=!!br.desc;return Lr=Sr.isFunction(br.compare)?br.compare:function(qr,Vr){return Tr=pr(qr,yr),Br=pr(Vr,yr),Fr?gr(Br,Tr):gr(Tr,Br)},V(Mr).call(Mr,Lr)},Sr.emptyFunc=function(){},Sr.isEmptyFunc=function(Mr){return Mr===Sr.emptyFunc},Sr.notEmptyFunc=function(Mr){return Mr!==Sr.emptyFunc},Sr.splice=function(Mr,br,yr){return $([]).call(Mr,br,yr)},Sr.reshape2d=function(Mr,br){if(z(Mr)){Sr.verifyParamType("type",br,"number","util::reshape2d");var yr=Mr.length;if(yr<=br)return[Mr];for(var Tr=Math.ceil(yr/br),Br=[],Lr=0;Lr<Tr;Lr++)Br.push(i(Mr).call(Mr,Lr*br,(Lr+1)*br));return Br}return Mr},Sr.flatten2d=function(Mr){if(z(Mr)){var br=[];return g(Mr).call(Mr,function(yr){br=re(br).call(br,yr)}),br}return Mr},Sr.dropArrayDuplicates=function(Mr){if(z(Mr)){for(var br={},yr=[];Mr.length>0;)br[Mr.shift()]=!0;for(var Tr in br)br[Tr]===!0&&yr.push(Tr);return yr}return Mr},Sr.onError=function(Mr){throw new hr(Mr)},Sr.verifyParamPresent=function(Mr,br,yr,Tr){yr=yr||"";var Br=!1;switch(Sr.typeOf(br)){case"undefined":case"null":Br=!0;break;case"string":br===""&&(Br=!0);break;case"StrStrMap":case"object":k(br).length||(Br=!0);break;case"array":br.length?L(br).call(br,function(Lr){if(Sr.notexist(Lr))return Br=!0,!0}):Br=!0}Br&&Sr.onParamAbsent(yr+Mr,Tr)},Sr.onParamAbsent=function(Mr,br){Sr.onParamError("缺少参数 ".concat(Mr,", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或数组的内容不是 null/undefined"),br)},Sr.verifyParamAbsent=function(Mr,br,yr,Tr){yr=yr||"",br!==void 0&&Sr.onParamPresent(yr+Mr,Tr)},Sr.onParamPresent=function(Mr,br){Sr.onParamError("多余的参数 ".concat(Mr),br)},Sr.verifyParamType=function(Mr,br,yr,Tr){var Br=Sr.typeOf(br).toLowerCase();Sr.isArray(yr)||(yr=[yr]),yr=oe(yr).call(yr,function(Fr){return Fr.toLowerCase()});var Lr=!0;switch(y(yr).call(yr,Br)===-1&&(Lr=!1),Br){case"number":isNaN(br)&&(Lr=!1);break;case"string":yr.join("")==="numeric or numeric string"&&(Lr=!!/^[0-9]+$/.test(br))}Lr||Sr.onParamInvalidType(Mr,yr,"",Tr)},Sr.onParamInvalidType=function(Mr,br,yr,Tr){yr=yr||"",br=Sr.isArray(br)?(br=oe(br).call(br,function(Br){return'"'+Br+'"'})).join(", "):'"'+br+'"',Sr.onParamError('参数"'+yr+Mr+'"类型错误, 合法的类型包括: ['+br+"]",Tr)},Sr.verifyParamValid=function(Mr,br,yr,Tr){Sr.isArray(yr)||(yr=[yr]),y(yr).call(yr,br)===-1&&Sr.onParamInvalidValue(Mr,yr,Tr)},Sr.onParamInvalidValue=function(Mr,br,yr){var Tr;Sr.isArray(br)||(br=[br]),br=oe(br).call(br,function(Br){return'"'+Br+'"'}),Sr.isArray(br)&&(br=br.join(", ")),Sr.onParamError(re(Tr="参数 ".concat(Mr,"值错误, 合法的值包括: [")).call(Tr,le(br),"]"),yr)},Sr.verifyParamMin=function(Mr,br,yr,Tr){br<yr&&Sr.onParamError("参数"+Mr+"的值不能小于"+yr,Tr)},Sr.verifyParamMax=function(Mr,br,yr,Tr){br>yr&&Sr.onParamError("参数"+Mr+"的值不能大于"+yr,Tr)},Sr.verifyArrayMax=function(Mr,br,yr,Tr){br.length>yr&&Sr.onParamError("参数"+Mr+"的长度不能大于"+yr,Tr)},Sr.verifyEmail=(wr=/^\S+@\S+$/,function(Mr,br,yr){wr.test(br)||Sr.onParamError("参数"+Mr+"邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符",yr)}),Sr.verifyTel=function(){var Mr=/^[+\-()\d]+$/;return function(br,yr,Tr){Mr.test(yr)||Sr.onParamError("参数"+br+"电话号码格式错误, 合法字符包括+、-、英文括号和数字",Tr)}}(),Sr.verifyBirth=function(){var Mr=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(br,yr,Tr){Mr.test(yr)||Sr.onParamError("参数"+br+'生日格式错误, 合法为"yyyy-MM-dd"',Tr)}}(),Sr.onParamError=function(Mr,br){Sr.onError({message:Mr,callFunc:br})},Sr.verifyOptions=function(Mr,br,yr,Tr,Br){if(Mr=Mr||{},br&&(Sr.isString(br)&&(br=br.split(_r)),Sr.isArray(br))){typeof yr!="boolean"&&(Br=yr||null,yr=!0,Tr="");var Lr=yr?Sr.verifyParamPresent:Sr.verifyParamAbsent;g(br).call(br,function(Fr){Lr.call(Sr,Fr,Mr[Fr],Tr,Br)})}return Mr},Sr.verifyParamAtLeastPresentOne=function(Mr,br,yr){br&&(Sr.isString(br)&&(br=br.split(_r)),Sr.isArray(br)&&(L(br).call(br,function(Tr){return Sr.exist(Mr[Tr])})||Sr.onParamError("以下参数["+br.join(", ")+"]至少需要传入一个",yr)))},Sr.verifyParamPresentJustOne=function(Mr,br,yr){br&&(Sr.isString(br)&&(br=br.split(_r)),Sr.isArray(br)&&ue(br).call(br,function(Tr,Br){return Sr.exist(Mr[Br])&&Tr++,Tr},0)!==1&&Sr.onParamError("以下参数["+br.join(", ")+"]必须且只能传入一个",yr))},Sr.verifyBooleanWithDefault=function(Mr,br,yr,Tr,Br){Sr.undef(yr)&&(yr=!0),_r.test(br)&&(br=br.split(_r)),Sr.isArray(br)?g(br).call(br,function(Lr){Sr.verifyBooleanWithDefault(Mr,Lr,yr,Tr,Br)}):Mr[br]===void 0?Mr[br]=yr:Sr.isBoolean(Mr[br])||Sr.onParamInvalidType(br,"boolean",Tr,Br)},Sr.verifyFileInput=function(Mr,br){var yr;return Sr.verifyParamPresent("fileInput",Mr,"",br),Sr.isString(Mr)&&((Mr=typeof document>"u"?void 0:document.getElementById(Mr))||Sr.onParamError("找不到要上传的文件对应的input, 请检查fileInput id ".concat(Mr),br)),Mr.tagName&&Mr.tagName.toLowerCase()==="input"&&Mr.type.toLowerCase()==="file"||Sr.onParamError(re(yr="请提供正确的 fileInput, 必须为 file 类型的 input 节点 tagname:".concat(Mr.tagName,", filetype:")).call(yr,Mr.type),br),Mr},Sr.verifyFileType=function(Mr,br){Sr.verifyParamValid("type",Mr,Sr.validFileTypes,br)},Sr.verifyCallback=function(Mr,br,yr){_r.test(br)&&(br=br.split(_r)),Sr.isArray(br)?g(br).call(br,function(Tr){Sr.verifyCallback(Mr,Tr,yr)}):Mr[br]?Sr.isFunction(Mr[br])||Sr.onParamInvalidType(br,"function","",yr):Mr[br]=Sr.emptyFunc},Sr.verifyFileUploadCallback=function(Mr,br){Sr.verifyCallback(Mr,"uploadprogress uploaddone uploaderror uploadcancel",br)},Sr.validFileTypes=["image","audio","video","file"],Sr.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg","mov"]},Sr.filterFiles=function(Mr,br){var yr,Tr,Br=(br=br.toLowerCase())==="file",Lr=[];return g([]).call(Mr,function(Fr){var qr,Vr;if(Br)Lr.push(Fr);else if(yr=i(qr=Fr.name).call(qr,ie(Vr=Fr.name).call(Vr,".")+1),(Tr=Fr.type.split("/"))[0]&&Tr[1]){var Qr,Tn=!1;Tr[0].toLowerCase()===br?Tn=!0:Tn=y(Qr=Sr.validFileExts[br]).call(Qr,yr)!==-1,Tn&&Lr.push(Fr)}}),Lr};var Ar,Er,sr=Sr.supportFormData=Sr.notundef(mr.FormData);Sr.getFileName=function(Mr){return Mr=Sr.verifyFileInput(Mr),sr?Mr.files[0].name:i(br=Mr.value).call(br,ie(yr=Mr.value).call(yr,"\\")+1);var br,yr},Sr.getFileInfo=(Ar={ppt:1,pptx:2,pdf:3,doc:6,docx:7},function(Mr){var br={};if(!(Mr=Sr.verifyFileInput(Mr)).files)return br;var yr=Mr.files[0];return sr&&(br.name=yr.name,br.size=yr.size,br.type=yr.name.match(/\.(\w+)$/),br.type=br.type&&br.type[1].toLowerCase(),br.transcodeType=Ar[br.type]||0),br}),Sr.sizeText=(Er=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(Mr){var br,yr=0;do br=(Mr=Math.floor(100*Mr)/100)+Er[yr],Mr/=1024,yr++;while(Mr>1);return br}),Sr.promises2cmds=function(Mr){return oe(Mr).call(Mr,function(br){return br.cmd})},Sr.objs2accounts=function(Mr){return oe(Mr).call(Mr,function(br){return br.account})},Sr.teams2ids=function(Mr){return oe(Mr).call(Mr,function(br){return br.teamId})},Sr.objs2ids=function(Mr){return oe(Mr).call(Mr,function(br){return br.id})},Sr.getMaxUpdateTime=function(Mr){var br=oe(Mr).call(Mr,function(yr){return+yr.updateTime});return Math.max.apply(Math,br)},Sr.genCheckUniqueFunc=function(Mr){return Mr=Mr||"id",function(br){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[Mr]=this.uniqueSet[Mr]||{};var yr=this.uniqueSet[Mr],Tr=br[Mr];return!yr[Tr]&&(yr[Tr]=!0,!0)}},Sr.fillPropertyWithDefault=function(Mr,br,yr){return!!Sr.undef(Mr[br])&&(Mr[br]=yr,!0)},Sr.throttle=function(Mr,br,yr,Tr){var Br,Lr,Fr=null,qr=0;yr||(yr={});var Vr=function(){qr=yr.leading===!1?0:new Date().getTime(),Fr=null,Mr.apply(Br,Lr),Fr||(Br=Lr=null)};return function(){var Qr=new Date().getTime();qr||yr.leading!==!1||(qr=Qr);var Tn=br-(Qr-qr);return Br=this,Lr=arguments,Tn<=0||Tn>br?(clearTimeout(Fr),Fr=null,qr=Qr,Mr.apply(Br,Lr),Fr||(Br=Lr=null)):Fr||yr.trailing===!1?Fr&&Tr&&Tr.apply(Br,Lr):(Fr=ae(Vr,Tn),Tr&&Tr.apply(Br,Lr)),Fr}},Sr.get=function(Mr,br){var yr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(lr(Mr)!=="object")return yr;var Tr,Br=br.replace(/\[(\d+)\]/g,".$1").split("."),Lr=Mr,Fr=ur(Br);try{for(Fr.s();!(Tr=Fr.n()).done;){var qr=Tr.value;if((Lr=Object(Lr)[qr])===void 0)return yr}}catch(Vr){Fr.e(Vr)}finally{Fr.f()}return Lr},Sr.pickAsString=function(Mr,br){var yr;return Mr?oe(yr=Fe(br).call(br,function(Tr){return Mr[Tr]!==void 0})).call(yr,function(Tr){var Br;return re(Br="".concat(Tr,"=")).call(Br,Mr[Tr])}).join(","):""},Sr.omitAsString=function(Mr,br){var yr,Tr;if(!Mr)return"";var Br={};return g(br).call(br,function(Lr){Br[Lr]=!0}),oe(yr=Fe(Tr=k(Mr)).call(Tr,function(Lr){return!Br[Lr]})).call(yr,function(Lr){var Fr;return re(Fr="".concat(Lr,"=")).call(Fr,Mr[Lr])}).join(",")};var xr={session:function(Mr){var br=function(Tr){for(var Br=1;Br<arguments.length;Br++){var Lr,Fr,qr=arguments[Br]!=null?arguments[Br]:{};Br%2?g(Lr=nr(Object(qr),!0)).call(Lr,function(Vr){n(Tr,Vr,qr[Vr])}):er?or(Tr,er(qr)):g(Fr=nr(Object(qr))).call(Fr,function(Vr){dr(Tr,Vr,cr(qr,Vr))})}return Tr}({},Mr),yr=["topCustom","localCustom","extra"];return g(yr).call(yr,function(Tr){br[Tr]&&(br[Tr]="***")}),br.lastMsg&&(br.lastMsg={idServer:br.lastMsg.idServer,idClient:br.lastMsg.idClient}),br}};Sr.secureOutput=function(Mr,br){z(br)||(br=[br]);var yr=xr[Mr];return(br=oe(br).call(br,function(Tr){return yr(Tr)})).length===1?br[0]:br};var Nr={string:function(Mr,br,yr){var Tr=yr.required,Br=yr.allowEmpty,Lr=Mr[br];return Tr===!1&&Lr===void 0||typeof Lr=="string"&&!(!Br&&Lr==="")},number:function(Mr,br,yr){var Tr=yr.required,Br=yr.min,Lr=Mr[br];return Tr===!1&&Lr===void 0||typeof Lr=="number"&&!(Lr<Br)},enum:function(Mr,br,yr){var Tr=yr.required,Br=de(yr),Lr=Mr[br];return Tr===!1&&Lr===void 0||y(Br).call(Br,Lr)>-1},array:function(Mr,br,yr){var Tr=yr.itemType,Br=yr.min,Lr=yr.max,Fr=yr.required,qr=Mr[br];return Fr===!1&&qr===void 0||!!z(qr)&&!(typeof Lr=="number"&&qr.length>Lr)&&!(typeof Br=="number"&&qr.length<Br)&&!(Tr&&Tr!=="enum"&&!Ie(qr).call(qr,function(Vr){return lr(Vr)===Tr}))}};Sr.validate=function(Mr,br,yr){var Tr,Br={};return g(Tr=k(Mr)).call(Tr,function(Lr){var Fr,qr=Mr[Lr].type,Vr=Nr[qr];Vr&&!Vr(br,Lr,Mr[Lr])?Sr.onError({message:re(Fr="Error in parameter verification, ".concat(Lr," expected value is ")).call(Fr,le(Mr[Lr])),callFunc:yr}):Br[Lr]=br[Lr]}),Br},Sr.asyncPool=function(Mr,br,yr){if(typeof Mr!="number"||typeof yr!="function"||!br||!br.length)return Ve.resolve();var Tr=0,Br=[],Lr=[];return function Fr(){if(Tr===br.length)return Ve.resolve();var qr=br[Tr++],Vr=Ve.resolve().then(function(){return yr(qr,br)});Br.push(Vr);var Qr=Ve.resolve();if(Mr<=br.length){var Tn=Vr.then(function(){return $(Lr).call(Lr,y(Lr).call(Lr,Tn),1)});Lr.push(Tn),Lr.length>=Mr&&(Qr=Ve.race(Lr))}return Qr.then(function(){return Fr()})}().then(function(){return Ve.all(Br)})},Sr.getIdArray=function(Mr){if(!Mr||typeof Mr!="string")throw new Error("id type error");var br=y(Mr).call(Mr,"-");if(br<0||br===Mr.length-1)throw new Error("id format error");return[i(Mr).call(Mr,0,br),i(Mr).call(Mr,br+1)]},t.exports=Sr},function(t,r,e){var n=e(16),g=e(83),y=e(166),i=e(17),k=e(97).f,L=e(215),$=e(14),V=e(36),z=e(65),re=e(31),oe=function(le){var ue=function(ie,ae,Fe){if(this instanceof ue){switch(arguments.length){case 0:return new le;case 1:return new le(ie);case 2:return new le(ie,ae)}return new le(ie,ae,Fe)}return g(le,this,arguments)};return ue.prototype=le.prototype,ue};t.exports=function(le,ue){var ie,ae,Fe,de,Ie,Ve,kt,At,ze,Et=le.target,cr=le.global,er=le.stat,or=le.proto,dr=cr?n:er?n[Et]:(n[Et]||{}).prototype,lr=cr?$:$[Et]||z($,Et,{})[Et],nr=lr.prototype;for(de in ue)ae=!(ie=L(cr?de:Et+(er?".":"#")+de,le.forced))&&dr&&re(dr,de),Ve=lr[de],ae&&(kt=le.dontCallGetSet?(ze=k(dr,de))&&ze.value:dr[de]),Ie=ae&&kt?kt:ue[de],ae&&typeof Ve==typeof Ie||(At=le.bind&&ae?V(Ie,n):le.wrap&&ae?oe(Ie):or&&i(Ie)?y(Ie):Ie,(le.sham||Ie&&Ie.sham||Ve&&Ve.sham)&&z(At,"sham",!0),z(lr,de,At),or&&(re($,Fe=Et+"Prototype")||z($,Fe,{}),z($[Fe],de,Ie),le.real&&nr&&(ie||!nr[de])&&z(nr,de,Ie)))}},function(t,r,e){t.exports=e(236)},function(t,r,e){t.exports=e(238)},function(t,r,e){t.exports=e(330)},function(t,r,e){t.exports=e(237)},function(t,r,e){t.exports=e(390)},function(t,r){t.exports=function(e){try{return!!e()}catch{return!0}}},function(t,r,e){t.exports=e(211)},function(t,r,e){t.exports=e(257)},function(t,r,e){t.exports=e(283)},function(t,r,e){t.exports=e(446)},function(t,r,e){var n=e(8),g=e(4),y=!1;try{typeof localStorage.setItem=="function"&&typeof localStorage.getItem=="function"&&(localStorage.setItem("nim_localstorage_exist_test","1"),y=localStorage.getItem("nim_localstorage_exist_test")==="1",localStorage.removeItem("nim_localstorage_exist_test"))}catch{y=!1}var i={nodeEnv:"production",info:{hash:"1ddefb74af2685d8546990b4a578f520ed738e86",shortHash:"1ddefb7",version:"9.16.2",sdkVersion:"91602",sdkHumanVersion:"9.16.2",protocolVersion:1},lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",needToXHR:!0,connectTimeout:1e4,xhrTimeout:8e3,reconnectionDelay:1600,reconnectionDelayMax:8e3,reconnectionJitter:.01,reconnectiontimer:null,heartbeatInterval:3e4,cmdTimeout:8e3,hbCmdTimeout:5e3,isWeixinApp:!1,isNodejs:!1,isRN:!1,ipVersion:0,PUSHTOKEN:"",PUSHCONFIG:{},CLIENTTYPE:16,PushPermissionAsked:!1,iosPushConfig:null,androidPushConfig:null,optionDefaultLinkUrl:"",defaultLinkUrl:"weblink.netease.im",ipv6DefaultLinkUrl:"weblink.netease.im",optionIpv6DefaultLinkUrl:"",wxDefaultLinkUrl:"wlnimsc0.netease.im",serverNosConfig:y?{cdnDomain:localStorage.getItem("nim_cdn_domain")||"",objectPrefix:localStorage.getItem("nim_object_prefix")||""}:{},hasLocalStorage:y,privateConf:{isABTestEnable:!0,isDataReportEnable:!0,isMixStoreEnable:!0,reportConfigUrl:"https://statistic.live.126.net/dispatcher/req",reportUrl:"https://statistic.live.126.net/statics/report/common/form"},getDefaultLinkUrl:function(k){var L,$;i.ipVersion===1?(L=i.optionIpv6DefaultLinkUrl,$=i.ipv6DefaultLinkUrl):(L=i.optionDefaultLinkUrl,$=i.defaultLinkUrl);var V=L||(i.isWeixinApp?i.wxDefaultLinkUrl:$);if(!V)return!1;var z=k?"https":"http",re=k?"443":"80",oe=V;return n(V).call(V,"http")===-1&&(oe=z+"://"+oe),n(V).call(V,":")===-1&&(oe=oe+":"+re),oe},ipProbeAddr:{ipv4:"https://check-ipv4.netease.im/test/",ipv6:"https://check-ipv6.netease.im/test/"},formatSocketUrl:function(k){var L=k.url,$=k.secure?"https":"http";return n(L).call(L,"http")===-1?$+"://"+L:L},uploadUrl:"https://nos.netease.com",chunkUploadUrl:"https://wanproxy-web.127.net",commonMaxSize:104857600,chunkSize:4194304,chunkMaxSize:4194304e4,replaceUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHost:"nos.netease.com",downloadHostList:["nos.netease.com"],downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",nosCdnEnable:!0,httpsEnabled:!1,threshold:0,nosLbsUrls:[],edgeList:["https://wanproxy-web.127.net","https://nosup-hz1.127.net"],genUploadUrl:function(k){return i.uploadUrl+"/"+k},genChunkUploadUrl:function(k){return i.chunkUploadUrl?i.chunkUploadUrl+"/"+k.bucket+"/"+k.objectName:""},genDownloadUrl:function(k,L,$){var V,z,re,oe,le,ue=k.bucket,ie=k.expireSec,ae=+new Date,Fe=ie?"&survivalTime=".concat(ie):"";if($)return g(re=g(oe=g(le="https://".concat($,"/")).call(le,L,"?createTime=")).call(oe,ae)).call(re,Fe);var de=g(V=g(z="".concat(i.replaceUrl,"?createTime=")).call(z,ae)).call(V,Fe);return(de=i.genNosProtocolUrl(de)).replace("{bucket}",ue).replace("{object}",L)},genFileUrl:function(k){var L=k.bucket,$=k.objectName;return i.genNosProtocolUrl(i.replaceUrl).replace("{bucket}",L).replace("{object}",$)},genNosProtocolUrl:function(k){return/^http/.test(k)?i.httpsEnabled&&n(k).call(k,"https://")!==0&&(k=k.replace("http","https")):k=i.httpsEnabled?"https://".concat(k):"http://".concat(k),k}};i.hostEnv="BROWSER",t.exports=i},function(t,r,e){var n=e(111),g=Function.prototype,y=g.call,i=n&&g.bind.bind(y,y);t.exports=n?i:function(k){return function(){return y.apply(k,arguments)}}},function(t,r){t.exports={}},function(t,r,e){t.exports=e(464)},function(t,r,e){(function(n){var g=function(y){return y&&y.Math==Math&&y};t.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof n=="object"&&n)||function(){return this}()||Function("return this")()}).call(this,e(77))},function(t,r,e){var n=e(212),g=n.all;t.exports=n.IS_HTMLDDA?function(y){return typeof y=="function"||y===g}:function(y){return typeof y=="function"}},function(t,r,e){var n=e(13);t.exports=n({}.isPrototypeOf)},function(t,r,e){t.exports=e(220)},function(t,r,e){var n=e(111),g=Function.prototype.call;t.exports=n?g.bind(g):function(){return g.apply(g,arguments)}},function(t,r,e){var n=e(16),g=e(113),y=e(31),i=e(132),k=e(99),L=e(213),$=g("wks"),V=n.Symbol,z=V&&V.for,re=L?V:V&&V.withoutSetter||i;t.exports=function(oe){if(!y($,oe)||!k&&typeof $[oe]!="string"){var le="Symbol."+oe;k&&y(V,oe)?$[oe]=V[oe]:$[oe]=L&&z?z(le):re(le)}return $[oe]}},function(t,r,e){t.exports=e(460)},function(t,r,e){t.exports=e(280)},function(t,r,e){var n=e(158),g=e(372);function y(i){return t.exports=y=typeof n=="function"&&typeof g=="symbol"?function(k){return typeof k}:function(k){return k&&typeof n=="function"&&k.constructor===n&&k!==n.prototype?"symbol":typeof k},t.exports.__esModule=!0,t.exports.default=t.exports,y(i)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(14),g=e(31),y=e(137),i=e(40).f;t.exports=function(k){var L=n.Symbol||(n.Symbol={});g(L,k)||i(L,k,{value:y.f(k)})}},function(t,r,e){var n=e(51),g=e(56),y=e(4),i=e(22),k=e(6),L=e(28),$=e(5),V=e(52),z=e(15),re=e(53),oe=e(2),le=e(54),ue=e(55),ie=e(42),ae=e(9),Fe=e(68),de=e(78),Ie=e(64);function Ve(dr,lr){var nr=de!==void 0&&Ie(dr)||dr["@@iterator"];if(!nr){if(L(dr)||(nr=function(Cr,wr){var Sr;if(Cr){if(typeof Cr=="string")return kt(Cr,wr);var mr=ae(Sr=Object.prototype.toString.call(Cr)).call(Sr,8,-1);if(mr==="Object"&&Cr.constructor&&(mr=Cr.constructor.name),mr==="Map"||mr==="Set")return Fe(Cr);if(mr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mr))return kt(Cr,wr)}}(dr))||lr&&dr&&typeof dr.length=="number"){nr&&(dr=nr);var ur=0,ar=function(){};return{s:ar,n:function(){return ur>=dr.length?{done:!0}:{done:!1,value:dr[ur++]}},e:function(Cr){throw Cr},f:ar}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gr,pr=!0,hr=!1;return{s:function(){nr=nr.call(dr)},n:function(){var Cr=nr.next();return pr=Cr.done,Cr},e:function(Cr){hr=!0,gr=Cr},f:function(){try{pr||nr.return==null||nr.return()}finally{if(hr)throw gr}}}}function kt(dr,lr){(lr==null||lr>dr.length)&&(lr=dr.length);for(var nr=0,ur=new Array(lr);nr<lr;nr++)ur[nr]=dr[nr];return ur}function At(dr,lr){var nr=$(dr);if(V){var ur=V(dr);lr&&(ur=z(ur).call(ur,function(ar){return re(dr,ar).enumerable})),nr.push.apply(nr,ur)}return nr}function ze(dr){for(var lr=1;lr<arguments.length;lr++){var nr,ur,ar=arguments[lr]!=null?arguments[lr]:{};lr%2?oe(nr=At(Object(ar),!0)).call(nr,function(gr){n(dr,gr,ar[gr])}):le?ue(dr,le(ar)):oe(ur=At(Object(ar))).call(ur,function(gr){ie(dr,gr,re(ar,gr))})}return dr}var Et=e(48),cr=e(0);function er(dr){return cr.get(dr,"code")||cr.get(dr,"msg.code")||cr.get(dr,"statusCode")||cr.get(dr,"event.code")||0}function or(dr){var lr,nr,ur=typeof dr=="string"?dr:cr.get(dr,"msg")||cr.get(dr,"message")||cr.get(dr,"error")||cr.get(dr,"event.msg")||cr.get(dr,"event.message")||cr.get(dr,"event")||"unknown",ar="",gr="";dr&&typeof dr.toString=="function"&&(ar=dr.toString());try{gr=k(dr)}catch{}return y(lr=y(nr=`
errMsg: `.concat(ur,`
errStr: `)).call(nr,ar,`
errJsonStr: `)).call(lr,gr,`
  `)}t.exports={reportAPI:function(dr){var lr=dr.instance,nr=dr.className,ur=dr.funcName,ar=dr.hasCallback,gr=ar===void 0||ar,pr=dr.done;if(!function(wr){if(!wr||!L(wr.experiments))return!1;var Sr,mr=Ve(wr.experiments);try{for(mr.s();!(Sr=mr.n()).done;){var _r=Sr.value;if(_r.experimentKey==="api_trace_collection"&&_r.schemeKey==="open_flow"&&L(_r.variates)){var Ar,Er=Ve(_r.variates);try{for(Er.s();!(Ar=Er.n()).done;){var sr=Ar.value;if(sr.key==="open"&&sr.value===!0)return!0}}catch(xr){Er.e(xr)}finally{Er.f()}}}}catch(xr){mr.e(xr)}finally{mr.f()}return!1}(lr.abtInfo)||!lr.reporter||!lr.reporter.isUploadEnable)return pr;var hr,Cr={user_id:cr.get(lr,"options.account")||"",trace_id:cr.get(lr,"socket.socket.sessionid"),class_name:nr,api_name:ur,action:gr?1:0,active_id:Et.deviceId,start_time:g()};return gr?(hr=i(function(){lr&&lr.logger&&lr.logger.warn("API 数据上报回调函数未调用",Cr),lr&&lr.reporter&&lr.reporter.report("nim_api_trace",ze(ze({},Cr),{},{state:1,error_code:408,error_msg:"API回调函数未被调用",duration:g()-Cr.start_time}))},1e4),function(wr){if(clearTimeout(hr),typeof pr=="function"){for(var Sr,mr=arguments.length,_r=new Array(mr>1?mr-1:0),Ar=1;Ar<mr;Ar++)_r[Ar-1]=arguments[Ar];pr.apply(void 0,y(Sr=[wr]).call(Sr,_r))}try{if(!lr||!lr.reporter)return;wr?lr.reporter.report("nim_api_trace",ze(ze({},Cr),{},{state:1,error_code:er(wr),error_msg:or(wr),duration:g()-Cr.start_time})):lr.reporter.report("nim_api_trace",ze(ze({},Cr),{},{state:0,duration:g()-Cr.start_time}))}catch(Er){lr&&lr.logger&&lr.logger.error("api report error",Er)}}):(lr.reporter.report("nim_api_trace",ze(ze({},Cr),{},{state:0,duration:1})),pr)}}},function(t,r,e){var n=e(14);t.exports=function(g){return n[g+"Prototype"]}},function(t,r,e){t.exports=e(235)},function(t,r,e){var n=e(7);t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(t,r,e){var n=e(17),g=e(212),y=g.all;t.exports=g.IS_HTMLDDA?function(i){return typeof i=="object"?i!==null:n(i)||i===y}:function(i){return typeof i=="object"?i!==null:n(i)}},function(t,r,e){var n=e(13),g=e(46),y=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(i,k){return y(g(i),k)}},function(t,r,e){var n=e(17),g=e(85),y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not a function")}},function(t,r,e){var n=e(14),g=e(16),y=e(17),i=function(k){return y(k)?k:void 0};t.exports=function(k,L){return arguments.length<2?i(n[k])||i(g[k]):n[k]&&n[k][L]||g[k]&&g[k][L]}},function(t,r,e){t.exports=e(309)},function(t,r,e){var n=e(19),g=e(2),y=e(95),i=e(4),k=e(24),L=e(0);function $(re,oe){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=this;ue.message=re||le.message||"",k(oe)==="object"?(ue.event=oe,ue.code="Other_Error"):oe!==void 0&&(ue.code=oe),ue.timetag=+new Date,le!==void 0&&(ue.event=le),ue.event&&(ue.callFunc=ue.event.callFunc||null,delete ue.event.callFunc)}$.prototype=n(Error.prototype),$.prototype.name="NIMError";var V={201:"客户端版本不对, 需升级sdk",302:"用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配",403:"非法操作或没有权限",404:"对象(用户/群/聊天室)不存在",405:"参数长度过长",408:"客户端请求超时",414:"参数错误",415:"服务不可用/没有聊天室服务器可分配",416:"频率控制",417:"重复操作",422:"帐号被禁用",500:"服务器内部错误",501:"数据库操作失败",503:"服务器繁忙",508:"删除有效期过了",509:"已失效",7101:"被拉黑",700:"批量操作部分失败",801:"群人数达到上限",802:"没有权限",803:"群不存在或未发生变化",804:"用户不在群里面",805:"群类型不匹配",806:"创建群数量达到限制",807:"群成员状态不对",809:"已经在群里",811:"强推列表中帐号数量超限",812:"群被禁言",813:"因群数量限制，部分拉人成功",814:"禁止使用群组消息已读服务",815:"群管理员人数上限",816:"批量操作部分失败",997:"协议已失效",998:"解包错误",999:"打包错误",9102:"通道失效",9103:"已经在其他端接听/拒绝过这通电话",11001:"对方离线, 通话不可送达",13002:"聊天室状态异常",13003:"在黑名单中",13004:"在禁言名单中",13006:"聊天室处于整体禁言状态,只有管理员能发言",Connect_Failed:"无法建立连接, 请确保能 ping/telnet 到云信服务器; 如果是IE8/9, 请确保项目部署在 HTTPS 环境下",Error_Internet_Disconnected:"网断了",Error_Connection_is_not_Established:"连接未建立",Error_Connection_Socket_State_not_Match:"socket状态不对",Error_Timeout:"超时",Param_Error:"参数错误",No_File_Selected:"请选择文件",Wrong_File_Type:"文件类型错误",File_Too_Large:"文件过大",Cross_Origin_Iframe:"不能获取跨域Iframe的内容",Not_Support:"不支持",NO_DB:"无数据库。请确保在 onsyncdone 同步结束后再操作数据库",DB:"数据库错误",Still_In_Team:"还在群里",Session_Exist:"会话已存在",Session_Not_Exist:"会话不存在",Error_Unknown:"未知错误",Operation_Canceled:"操作取消",Sync_Error:"同步数据失败"},z=[200,406,808,810];g(z).call(z,function(re){V[re]=null}),$.genError=function(re){var oe=V[re];return oe===void 0&&(oe="操作失败"),oe===null?null:new $(oe,re)},$.multiInstance=function(re){return new $("不允许初始化多个实例","Not_Allow_Multi_Instance",re)},$.newNetworkError=function(re){var oe="Error_Internet_Disconnected";return new $(V[oe],oe,re)},$.newConnectError=function(re){var oe="Connect_Failed";return new $(V[oe]||null,oe,re)},$.newConnectionError=function(re){var oe="Error_Connection_is_not_Established";return new $(V[oe],oe,re)},$.newSocketStateError=function(re){var oe="Error_Connection_Socket_State_not_Match";return new $(V[oe],oe,re)},$.newTimeoutError=function(re){var oe="Error_Timeout";return new $(V[oe],oe,re)},$.newFrequencyControlError=function(re){var oe=new $(V[416],416,re);return oe.from="local",oe},$.newParamError=function(re,oe){return new $(re||V.Param_Error,"Param_Error",oe)},$.newNoFileError=function(re,oe){var le="No_File_Selected";return new $(re||V[le],le,oe)},$.newWrongFileTypeError=function(re,oe){var le="Wrong_File_Type";return new $(re||V[le],le,oe)},$.newFileTooLargeError=function(re,oe){var le="File_Too_Large";return new $(re||V[le],le,oe)},$.newCORSIframeError=function(re){var oe="Cross_Origin_Iframe";return new $(V[oe],oe,re)},$.newSupportError=function(re,oe,le){return new $("不支持"+re,"Not_Support_"+oe,le)},$.newSupportDBError=function(re){return $.newSupportError("数据库","DB",re)},$.noDBError=function(re){return new $(V.NO_DB,"NO_DB",re)},$.newDBError=function(re){return new $(V.DB,"DB",re)},$.newUnknownError=function(re){var oe="Error_Unknown";return new $(V[oe],oe,re)},$.stillInTeamError=function(re){var oe="Still_In_Team";return new $(V[oe],oe,re)},$.sessionExist=function(re){var oe="Session_Exist";return new $(V[oe],oe,re)},$.sessionNotExist=function(re){var oe="Session_Not_Exist";return new $(V[oe],oe,re)},$.cancel=function(re){var oe="Operation_Canceled";return new $(V[oe],oe,re)},$.syncError=function(re){return new $(V.Sync_Error,"Sync_Error",re)},$.customError=function(re,oe){re=re||"Other_Error";var le="";return(oe=oe||{}).message||(le=V[re]||re),k(re)!=="object"?new $(le,re,oe):new $(le,"Other_Error",oe===void 0?re:oe)},t.exports=$,t.exports.formatError=function(re,oe){var le,ue=oe||{},ie=ue.fallbackCode,ae=ue.fallbackMessage,Fe=ue.suffix;if(re instanceof $){var de,Ie;return y(de=re.message).call(de,Fe)||(re.message=i(Ie="".concat(re.message," ")).call(Ie,Fe||"")),re}if(re.code!==void 0&&re.message!==void 0)return re.message=i(le="".concat(re.message," ")).call(le,Fe||""),re;var Ve=re.code||re.errCode||(ie===void 0?"Error_Unknown":ie);return new $((L.get(re,"message")||L.get(re,"Message")||L.get(re,"errMsg")||L.get(re,"status")||L.get(re,"result")||ae||V[Ve]||"未知错误")+" "+(Fe||""),Ve,re)}},function(t,r,e){var n=e(166),g=e(32),y=e(111),i=n(n.bind);t.exports=function(k,L){return g(k),L===void 0?k:y?i(k,L):function(){return k.apply(L,arguments)}}},function(t,r,e){var n=e(19),g=e(23),y=e(3),i=e(79),k=e(82),L=e(12),$=e(0),V=e(297),z=$.undef,re=e(317),oe=e(156),le=e(161),ue=e(811),ie=e(812);function ae(Ie){var Ve,kt,At,ze=this;$.verifyOptions(Ie,"appKey account token","protocol::IMProtocol"),$.verifyCallback(Ie,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onsyncsuperteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],"protocol::IMProtocol"),Ve=typeof $.get(Ie,"privateConf.isDataReportEnable")=="boolean"?Ie.privateConf.isDataReportEnable:L.privateConf.isDataReportEnable,kt=typeof $.get(Ie,"privateConf.reportConfigUrl")=="string"?Ie.privateConf.reportConfigUrl:L.privateConf.reportConfigUrl,At=typeof $.get(Ie,"privateConf.reportUrl")=="string"?Ie.privateConf.reportUrl:L.privateConf.reportUrl,ze.reporter=V.initReporter({isDataReportEnable:Ve,reportConfigUrl:kt,reportUrl:At,appKey:Ie.appKey,logger:ze.logger}),ze.db=Ie.api.db=new i({logger:Ie.logger,reporter:ze.reporter,account:Ie.account,core:ze,notifyError:function(Et){ze.notifyError&&ze.notifyError("DB error",Et)}}),this.processId=$.guid(),k.call(ze,Ie)}var Fe=k.fn,de=ae.fn=ae.prototype=n(Fe);de.init=function(){var Ie,Ve,kt;Fe.init.call(this),oe.IM.setProtocol(this),this.parser=oe.IM,g(Ie=this.sendCmd).call(Ie,this),this.socketUrls=[],this.syncing=!0,this.canHandleDeletedMsgInSyncing=!1,this.hasSynced=!1,this.hasSyncedTeamMembers=!1,this.syncPromiseArray=[],this.syncResult={},this.syncTeamMembersPromiseArray=[],this.syncSuperTeamMembersPromiseArray=[],this.syncTeamMembersResult={},this.syncSuperTeamMembersResult={},this.timetags={},this.superTeamMembersData={},this.saveAck={},this.sysMsgUnread=le.completeUnread({}),this.resetUnsettledMsgs(),this.resetUnsettledSysMsgs(),this.msgPromise=y.resolve(),this.sysMsgPromise=y.resolve(),this.msgDelayArr=[],this.msgDelayTimer=null,this.msgStatEnable=!1,this.nosCdnHostTimer=null,this.relativeServerTime=0,this.sessionSet={},this.msgReceiptTasks={},this.userSet={},this.pushNotificationMultiportConfig=re.getDefaultConfig(),this.msgAckBufferManager=new ue({processFn:g(Ve=this.handleMsgsAck).call(Ve,this),throttleTime:500}),this.roamingMsgSyncDoneBufferManager=new ue({processFn:g(kt=this.onSyncDone).call(kt,this),throttleTime:1500}),this.reporterHookLBS=new ie(this)},de.reset=function(){Fe.reset.call(this);var Ie=this.options;this.db.reset(Ie.db),z(Ie.lbsUrl)&&(Ie.lbsUrl=L.lbsUrl),this.autoconnect=!!Ie.autoconnect,this.resetAutoMarkRead()},de.resetAutoMarkRead=function(){var Ie=this.options;$.verifyBooleanWithDefault(Ie,"autoMarkRead",!0,"","protocol::resetAutoMarkRead")},de.resetUnsettledMsgs=function(){this.unhandledMsgs=[],this.unupdatedMsgs=[]},de.resetUnsettledSysMsgs=function(){this.unhandledSysMsgs=[],this.unhandledSysMsgsForDeletedMsgs=[],this.unupdatedSysMsgs=[]},de.packetFromSync=function(Ie){return!Ie.obj||!!Ie.obj.sync},t.exports=ae,e(813),e(814),e(815),e(833),e(835),e(836),e(837),e(838),e(839),e(840),e(841),e(846),e(847),e(848),e(849),e(850),e(851),e(852),e(853),e(854),e(855)},function(t,r,e){var n=e(30),g=String,y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not an object")}},function(t,r,e){var n=e(85);t.exports=function(g){if(typeof g=="object"&&"size"in g&&"has"in g&&"get"in g&&"set"in g&&"delete"in g&&"entries"in g)return g;throw TypeError(n(g)+" is not a map")}},function(t,r,e){var n=e(29),g=e(214),y=e(216),i=e(38),k=e(130),L=TypeError,$=Object.defineProperty,V=Object.getOwnPropertyDescriptor;r.f=n?y?function(z,re,oe){if(i(z),re=k(re),i(oe),typeof z=="function"&&re==="prototype"&&"value"in oe&&"writable"in oe&&!oe.writable){var le=V(z,re);le&&le.writable&&(z[re]=oe.value,oe={configurable:"configurable"in oe?oe.configurable:le.configurable,enumerable:"enumerable"in oe?oe.enumerable:le.enumerable,writable:!1})}return $(z,re,oe)}:$:function(z,re,oe){if(i(z),re=k(re),i(oe),g)try{return $(z,re,oe)}catch{}if("get"in oe||"set"in oe)throw L("Accessors not supported");return"value"in oe&&(z[re]=oe.value),z}},function(t,r,e){var n=e(19),g=e(81),y=e(37),i=e(12),k=e(856),L=e(156).IM,$=e(164);function V(re){var oe=$(re);return this.subType="im",this.nosScene=oe.nosScene||"im",this.nosSurvivalTime=oe.nosSurvivalTime,oe.Protocol=y,oe.Message=k,oe.constructor=V,this.init(oe)}V.Protocol=y,V.parser=L,V.use=g.use,V.getInstance=g.getInstance,V.rmAllInstances=g.rmAllInstances,V.genInstanceName=function(re){return"NIM-account-"+re.account};var z=V.fn=V.prototype=n(g.prototype);V.info=z.info=i.info,t.exports=V,e(867),e(868),e(869),e(870),e(871),e(872),e(873),e(874),e(875),e(885),e(896),e(897),e(898),e(899),e(900),e(901),e(902),e(903),e(904),e(907),e(908)},function(t,r,e){t.exports=e(255)},function(t,r,e){t.exports=e(569)},function(t,r){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(142),g=e(256);function y(i,k){for(var L=0;L<k.length;L++){var $=k[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),n(i,g($.key),$)}}t.exports=function(i,k,L){return k&&y(i.prototype,k),L&&y(i,L),n(i,"prototype",{writable:!1}),i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(112),g=Object;t.exports=function(y){return g(n(y))}},function(t,r,e){var n=e(129),g=e(112);t.exports=function(y){return n(g(y))}},function(t,r,e){var n=e(0),g={init:function(){g.deviceId=n.guid()}};g.init(),g.clientTypeMap={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac",65:"HarmonyOS"},g.db={open:function(){}},g.rnfs=null,t.exports=g},function(t,r,e){var n=e(329);t.exports=function(g){return n(g.length)}},function(t,r,e){var n=e(36),g=e(20),y=e(38),i=e(85),k=e(241),L=e(49),$=e(18),V=e(242),z=e(140),re=e(243),oe=TypeError,le=function(ie,ae){this.stopped=ie,this.result=ae},ue=le.prototype;t.exports=function(ie,ae,Fe){var de,Ie,Ve,kt,At,ze,Et,cr=Fe&&Fe.that,er=!(!Fe||!Fe.AS_ENTRIES),or=!(!Fe||!Fe.IS_RECORD),dr=!(!Fe||!Fe.IS_ITERATOR),lr=!(!Fe||!Fe.INTERRUPTED),nr=n(ae,cr),ur=function(gr){return de&&re(de,"normal",gr),new le(!0,gr)},ar=function(gr){return er?(y(gr),lr?nr(gr[0],gr[1],ur):nr(gr[0],gr[1])):lr?nr(gr,ur):nr(gr)};if(or)de=ie.iterator;else if(dr)de=ie;else{if(!(Ie=z(ie)))throw oe(i(ie)+" is not iterable");if(k(Ie)){for(Ve=0,kt=L(ie);kt>Ve;Ve++)if((At=ar(ie[Ve]))&&$(ue,At))return At;return new le(!1)}de=V(ie,Ie)}for(ze=or?ie.next:de.next;!(Et=g(ze,de)).done;){try{At=ar(Et.value)}catch(gr){re(de,"throw",gr)}if(typeof At=="object"&&At&&$(ue,At))return At}return new le(!1)}},function(t,r,e){var n=e(142),g=e(256);t.exports=function(y,i,k){return(i=g(i))in y?n(y,i,{value:k,enumerable:!0,configurable:!0,writable:!0}):y[i]=k,y},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(262)},function(t,r,e){t.exports=e(487)},function(t,r,e){t.exports=e(490)},function(t,r,e){t.exports=e(493)},function(t,r,e){t.exports=e(591)},function(t,r){t.exports=!0},function(t,r,e){var n=e(73),g=String;t.exports=function(y){if(n(y)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return g(y)}},function(t,r,e){var n=e(265),g=typeof self=="object"&&self&&self.Object===Object&&self,y=n||g||Function("return this")();t.exports=y},function(t,r,e){var n=e(657)();t.exports=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){var n=e(292);function g(y,i,k,L,$,V,z){try{var re=y[V](z),oe=re.value}catch(le){return void k(le)}re.done?i(oe):n.resolve(oe).then(L,$)}t.exports=function(y){return function(){var i=this,k=arguments;return new n(function(L,$){var V=y.apply(i,k);function z(oe){g(V,L,$,z,re,"next",oe)}function re(oe){g(V,L,$,z,re,"throw",oe)}z(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(752);t.exports=function(g,y,i){return i?n(g.entries(),function(k){return y(k[1],k[0])}):g.forEach(y)}},function(t,r,e){t.exports=e(433)},function(t,r,e){t.exports=e(481)},function(t,r,e){var n=e(29),g=e(40),y=e(84);t.exports=n?function(i,k,L){return g.f(i,k,y(1,L))}:function(i,k,L){return i[k]=L,i}},function(t,r,e){(function(n){var g=e(9),y=e(22),i=e(8),k=e(144),L=e(2),$=e(6),V=e(5),z=e(143),re=e(3),oe=e(68),le=e(78),ue=e(64),ie=e(28);function ae(br,yr){var Tr=le!==void 0&&ue(br)||br["@@iterator"];if(!Tr){if(ie(br)||(Tr=function(Qr,Tn){var xn;if(Qr){if(typeof Qr=="string")return Fe(Qr,Tn);var Xr=g(xn=Object.prototype.toString.call(Qr)).call(xn,8,-1);if(Xr==="Object"&&Qr.constructor&&(Xr=Qr.constructor.name),Xr==="Map"||Xr==="Set")return oe(Qr);if(Xr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xr))return Fe(Qr,Tn)}}(br))||yr&&br&&typeof br.length=="number"){Tr&&(br=Tr);var Br=0,Lr=function(){};return{s:Lr,n:function(){return Br>=br.length?{done:!0}:{done:!1,value:br[Br++]}},e:function(Qr){throw Qr},f:Lr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fr,qr=!0,Vr=!1;return{s:function(){Tr=Tr.call(br)},n:function(){var Qr=Tr.next();return qr=Qr.done,Qr},e:function(Qr){Vr=!0,Fr=Qr},f:function(){try{qr||Tr.return==null||Tr.return()}finally{if(Vr)throw Fr}}}}function Fe(br,yr){(yr==null||yr>br.length)&&(yr=br.length);for(var Tr=0,Br=new Array(yr);Tr<yr;Tr++)Br[Tr]=br[Tr];return Br}var de=e(164);function Ie(){return typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{}}function Ve(br){var yr;return g(yr=Object.prototype.toString.call(br)).call(yr,8,-1)}function kt(br){return Ve(br).toLowerCase()}function At(br){return kt(br)==="string"}function ze(br){return kt(br)==="number"}function Et(br){return kt(br)==="array"}function cr(br){return typeof br=="function"}function er(br){return kt(br)==="date"}function or(br){return br===null}function dr(br){return br!==null}function lr(br){return br===void 0}function nr(br){return br!==void 0}function ur(br){return nr(br)&&dr(br)}function ar(br){return lr(br)||or(br)}function gr(br){return ur(br)&&kt(br)==="object"}var pr=function(br,yr,Tr){br.addEventListener?br.addEventListener(yr,Tr,!1):br.attachEvent&&br.attachEvent("on"+yr,Tr)},hr=pr,Cr=function(br,yr,Tr){br.removeEventListener?br.removeEventListener(yr,Tr,!1):br.detachEvent&&br.detachEvent("on"+yr,Tr)},wr=Cr;function Sr(){var br=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},Tr=arguments.length>2?arguments[2]:void 0;for(var Br in br)br.hasOwnProperty(Br)&&yr.call(Tr,Br,br[Br])}function mr(br,yr){Sr(yr,function(Tr,Br){br[Tr]=Br})}var _r,Ar=(_r=0,function(){return""+_r++});function Er(br){return At(br)&&i(br).call(br,"{")===0&&k(br).call(br,"}")===br.length-1}function sr(br,yr,Tr){if(!br)return"";var Br=[];return Sr(br,function(Lr,Fr){cr(Fr)||(er(Fr)?Fr=Fr.getTime():Et(Fr)?Fr=Fr.join(","):gr(Fr)&&(Fr=$(Fr)),Tr&&(Fr=encodeURIComponent(Fr)),Br.push(encodeURIComponent(Lr)+"="+Fr))}),Br.join(yr||",")}var xr,Nr=(xr=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(br){return xr.test(br||"")?RegExp.$1.toLowerCase():""});function Mr(br){var yr=Ie();return br.tagName&&br.tagName.toUpperCase()==="INPUT"||yr.Blob&&br instanceof yr.Blob}t.exports={o:{},emptyObj:{},f:function(){},emptyFunc:function(){},regBlank:/\s+/gi,regWhiteSpace:/\s+/gi,getGlobal:Ie,getClass:Ve,typeOf:kt,isString:At,isNumber:ze,isInt:function(br){return ze(br)&&br%1==0},isBoolean:function(br){return kt(br)==="boolean"},isArray:Et,isFunction:cr,isDate:er,isRegExp:function(br){return kt(br)==="regexp"},isError:function(br){return kt(br)==="error"},isnull:or,notnull:dr,undef:lr,notundef:nr,exist:ur,notexist:ar,isObject:gr,isEmpty:function(br){return ar(br)||(At(br)||Et(br))&&br.length===0},remove:function(br){br.parentNode&&br.parentNode.removeChild(br)},dataset:function(br,yr,Tr){if(!ur(Tr))return br.getAttribute("data-"+yr);br.setAttribute("data-"+yr,Tr)},addEventListener:pr,on:hr,removeEventListener:Cr,off:wr,target:function(br){return br.target||br.srcElement},createIframe:function(br){if(typeof document<"u"){var yr;if((br=br||{}).name)try{(yr=document.createElement('<iframe name="'+br.name+'"></iframe>')).frameBorder=0}catch{(yr=document.createElement("iframe")).name=br.name}else yr=document.createElement("iframe");br.visible||(yr.style.display="none"),cr(br.onload)&&hr(yr,"load",function Br(Lr){yr.src&&(br.multi||wr(yr,"load",Br),br.onload(Lr))}),(br.parent||document.body).appendChild(yr);var Tr=br.src||"about:blank";return y(function(){yr.src=Tr},0),yr}},html2node:function(br){if(typeof document<"u"){var yr=document.createElement("div");yr.innerHTML=br;var Tr,Br,Lr=[];if(yr.children)for(Tr=0,Br=yr.children.length;Tr<Br;Tr++)Lr.push(yr.children[Tr]);else for(Tr=0,Br=yr.childNodes.length;Tr<Br;Tr++){var Fr=yr.childNodes[Tr];Fr.nodeType===1&&Lr.push(Fr)}return Lr.length>1?yr:Lr[0]}},forOwn:Sr,mixin:mr,uniqueID:Ar,isJSON:Er,parseJSON:function br(yr){try{Er(yr)&&(yr=JSON.parse(yr)),gr(yr)&&Sr(yr,function(Tr,Br){switch(kt(Br)){case"string":case"object":yr[Tr]=br(Br)}})}catch{}return yr},simpleClone:function(br){return de(br)},merge:function(){for(var br=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=arguments.length,Tr=new Array(yr>1?yr-1:0),Br=1;Br<yr;Br++)Tr[Br-1]=arguments[Br];return L(Tr).call(Tr,function(Lr){mr(br,Lr)}),br},fillUndef:function(br,yr){return Sr(yr,function(Tr,Br){lr(br[Tr])&&(br[Tr]=Br)}),br},checkWithDefault:function(br,yr,Tr){var Br=br[yr]||br[yr.toLowerCase()];return ar(Br)&&(Br=Tr,br[yr]=Br),Br},fetch:function(br,yr){return Sr(br,function(Tr){ur(yr[Tr])&&(br[Tr]=yr[Tr])}),br},string2object:function(){var br,yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Tr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",",Br={};return L(br=yr.split(Tr)).call(br,function(Lr){var Fr=Lr.split("="),qr=Fr.shift();qr&&(Br[decodeURIComponent(qr)]=decodeURIComponent(Fr.join("=")))}),Br},object2string:sr,genUrlSep:function(br){return i(br).call(br,"?")<0?"?":"&"},object2query:function(br){return sr(br,"&",!0)},url2origin:Nr,isFileInput:Mr,getKeys:function(br,yr){var Tr=V(br);return yr&&z(Tr).call(Tr,function(Br,Lr){var Fr=Mr(br[Br]);return Fr===Mr(br[Lr])?0:Fr?1:-1}),Tr},_get:function(br,yr){var Tr,Br=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Lr=yr.replace(/\[(\d+)\]/g,".$1").split("."),Fr=br,qr=ae(Lr);try{for(qr.s();!(Tr=qr.n()).done;){var Vr=Tr.value;if((Fr=Object(Fr)[Vr])===void 0)return Br}}catch(Qr){qr.e(Qr)}finally{qr.f()}return Fr},getPromiseWithAbort:function(br){var yr={},Tr=new re(function(Br,Lr){yr.abort=Lr});return yr.promise=re.race([br,Tr]),yr}}}).call(this,e(77))},function(t,r,e){var n=e(33),g=e(749),y=n("Map");t.exports={Map:y,set:g("set",2),get:g("get",1),has:g("has",1),remove:g("delete",1),proto:y.prototype}},function(t,r,e){t.exports=e(261)},function(t,r,e){var n=e(36),g=e(13),y=e(129),i=e(46),k=e(49),L=e(171),$=g([].push),V=function(z){var re=z==1,oe=z==2,le=z==3,ue=z==4,ie=z==6,ae=z==7,Fe=z==5||ie;return function(de,Ie,Ve,kt){for(var At,ze,Et=i(de),cr=y(Et),er=n(Ie,Ve),or=k(cr),dr=0,lr=kt||L,nr=re?lr(de,or):oe||ae?lr(de,0):void 0;or>dr;dr++)if((Fe||dr in cr)&&(ze=er(At=cr[dr],dr,Et),z))if(re)nr[dr]=ze;else if(ze)switch(z){case 3:return!0;case 5:return At;case 6:return dr;case 2:$(nr,At)}else switch(z){case 4:return!1;case 7:$(nr,At)}return ie?-1:le||ue?ue:nr}};t.exports={forEach:V(0),map:V(1),filter:V(2),some:V(3),every:V(4),find:V(5),findIndex:V(6),filterReject:V(7)}},function(t,r,e){(function(n){var g=e(9),y=e(8),i=e(307),k=e(43),L=e(24),$=function(){var V=(n===void 0?"undefined":L(n))==="object"?n:window,z=Math.pow(2,53)-1,re=/\bOpera/,oe=Object.prototype,le=oe.hasOwnProperty,ue=oe.toString;function ie(At){return(At=String(At)).charAt(0).toUpperCase()+g(At).call(At,1)}function ae(At){return At=kt(At),/^(?:webOS|i(?:OS|P))/.test(At)?At:ie(At)}function Fe(At,ze){for(var Et in At)le.call(At,Et)&&ze(At[Et],Et,At)}function de(At){var ze;return At==null?ie(At):g(ze=ue.call(At)).call(ze,8,-1)}function Ie(At){return String(At).replace(/([ -])(?!$)/g,"$1?")}function Ve(At,ze){var Et=null;return function(cr,er){var or=-1,dr=cr?cr.length:0;if(typeof dr=="number"&&dr>-1&&dr<=z)for(;++or<dr;)er(cr[or],or,cr);else Fe(cr,er)}(At,function(cr,er){Et=ze(Et,cr,er,At)}),Et}function kt(At){return String(At).replace(/^ +| +$/g,"")}return function At(ze){var Et=V,cr=ze&&L(ze)==="object"&&de(ze)!="String";cr&&(Et=ze,ze=null);var er=Et.navigator||{},or=er.userAgent||"";ze||(ze=or);var dr,lr,nr,ur,ar,gr=cr?!!er.likeChrome:/\bChrome\b/.test(ze)&&!/internal|\n/i.test(ue.toString()),pr=cr?"Object":"ScriptBridgingProxyObject",hr=cr?"Object":"Environment",Cr=cr&&Et.java?"JavaPackage":de(Et.java),wr=cr?"Object":"RuntimeObject",Sr=/\bJava/.test(Cr)&&Et.java,mr=Sr&&de(Et.environment)==hr,_r=Sr?"a":"α",Ar=Sr?"b":"β",Er=Et.document||{},sr=Et.operamini||Et.opera,xr=re.test(xr=cr&&sr?sr["[[Class]]"]:de(sr))?xr:sr=null,Nr=ze,Mr=[],br=null,yr=ze==or,Tr=yr&&sr&&typeof sr.version=="function"&&sr.version(),Br=Ve([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(Vn,Zr){return Vn||RegExp("\\b"+(Zr.pattern||Ie(Zr))+"\\b","i").exec(ze)&&(Zr.label||Zr)}),Lr=function(Vn){return Ve(Vn,function(Zr,Nn){return Zr||RegExp("\\b"+(Nn.pattern||Ie(Nn))+"\\b","i").exec(ze)&&(Nn.label||Nn)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Fr=Qr([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),qr=function(Vn){return Ve(Vn,function(Zr,Nn,Jr){return Zr||(Nn[Fr]||Nn[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Fr)]||RegExp("\\b"+Ie(Jr)+"(?:\\b|\\w*\\d)","i").exec(ze))&&Jr})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),Vr=function(Vn){return Ve(Vn,function(Zr,Nn){var Jr=Nn.pattern||Ie(Nn);return!Zr&&(Zr=RegExp("\\b"+Jr+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ze))&&(Zr=function(wn,Un,_n){var Pn={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Un&&_n&&/^Win/i.test(wn)&&!/^Windows Phone /i.test(wn)&&(Pn=Pn[/[\d.]+$/.exec(wn)])&&(wn="Windows "+Pn),wn=String(wn),Un&&_n&&(wn=wn.replace(RegExp(Un,"i"),_n)),wn=ae(wn.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Zr,Jr,Nn.label||Nn)),Zr})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Qr(Vn){return Ve(Vn,function(Zr,Nn){var Jr=Nn.pattern||Ie(Nn);return!Zr&&(Zr=RegExp("\\b"+Jr+" *\\d+[.\\w_]*","i").exec(ze)||RegExp("\\b"+Jr+" *\\w+-[\\w]*","i").exec(ze)||RegExp("\\b"+Jr+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ze))&&((Zr=String(Nn.label&&!RegExp(Jr,"i").test(Nn.label)?Nn.label:Zr).split("/"))[1]&&!/[\d.]+/.test(Zr[0])&&(Zr[0]+=" "+Zr[1]),Nn=Nn.label||Nn,Zr=ae(Zr[0].replace(RegExp(Jr,"i"),Nn).replace(RegExp("; *(?:"+Nn+"[_-])?","i")," ").replace(RegExp("("+Nn+")[-_.]?(\\w)","i"),"$1 $2"))),Zr})}if(Br&&(Br=[Br]),qr&&!Fr&&(Fr=Qr([qr])),(dr=/\bGoogle TV\b/.exec(Fr))&&(Fr=dr[0]),/\bSimulator\b/i.test(ze)&&(Fr=(Fr?Fr+" ":"")+"Simulator"),Lr=="Opera Mini"&&/\bOPiOS\b/.test(ze)&&Mr.push("running in Turbo/Uncompressed mode"),Lr=="IE"&&/\blike iPhone OS\b/.test(ze)?(qr=(dr=At(ze.replace(/like iPhone OS/,""))).manufacturer,Fr=dr.product):/^iP/.test(Fr)?(Lr||(Lr="Safari"),Vr="iOS"+((dr=/ OS ([\d_]+)/i.exec(ze))?" "+dr[1].replace(/_/g,"."):"")):Lr!="Konqueror"||/buntu/i.test(Vr)?qr&&qr!="Google"&&(/Chrome/.test(Lr)&&!/\bMobile Safari\b/i.test(ze)||/\bVita\b/.test(Fr))||/\bAndroid\b/.test(Vr)&&/^Chrome/.test(Lr)&&/\bVersion\//i.test(ze)?(Lr="Android Browser",Vr=/\bAndroid\b/.test(Vr)?Vr:"Android"):Lr=="Silk"?(/\bMobi/i.test(ze)||(Vr="Android",Mr.unshift("desktop mode")),/Accelerated *= *true/i.test(ze)&&Mr.unshift("accelerated")):Lr=="PaleMoon"&&(dr=/\bFirefox\/([\d.]+)\b/.exec(ze))?Mr.push("identifying as Firefox "+dr[1]):Lr=="Firefox"&&(dr=/\b(Mobile|Tablet|TV)\b/i.exec(ze))?(Vr||(Vr="Firefox OS"),Fr||(Fr=dr[1])):!Lr||(dr=!/\bMinefield\b/i.test(ze)&&/\b(?:Firefox|Safari)\b/.exec(Lr))?(Lr&&!Fr&&/[\/,]|^[^(]+?\)/.test(g(ze).call(ze,y(ze).call(ze,dr+"/")+8))&&(Lr=null),(dr=Fr||qr||Vr)&&(Fr||qr||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Vr))&&(Lr=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Vr)?Vr:dr)+" Browser")):Lr=="Electron"&&(dr=(/\bChrome\/([\d.]+)\b/.exec(ze)||0)[1])&&Mr.push("Chromium "+dr):Vr="Kubuntu",Tr||(Tr=Ve(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version","HeadlessChrome",Ie(Lr),"(?:Firefox|Minefield|NetFront)"],function(Vn,Zr){return Vn||(RegExp(Zr+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ze)||0)[1]||null})),(dr=(Br=="iCab"&&i(Tr)>3?"WebKit":/\bOpera\b/.test(Lr)&&(/\bOPR\b/.test(ze)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(ze)&&!/^(?:Trident|EdgeHTML)$/.test(Br)&&"WebKit"||!Br&&/\bMSIE\b/i.test(ze)&&(Vr=="Mac OS"?"Tasman":"Trident")||Br=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Lr)&&"NetFront")&&(Br=[dr]),Lr=="IE"&&(dr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ze)||0)[1])?(Lr+=" Mobile",Vr="Windows Phone "+(/\+$/.test(dr)?dr:dr+".x"),Mr.unshift("desktop mode")):/\bWPDesktop\b/i.test(ze)?(Lr="IE Mobile",Vr="Windows Phone 8.x",Mr.unshift("desktop mode"),Tr||(Tr=(/\brv:([\d.]+)/.exec(ze)||0)[1])):Lr!="IE"&&Br=="Trident"&&(dr=/\brv:([\d.]+)/.exec(ze))&&(Lr&&Mr.push("identifying as "+Lr+(Tr?" "+Tr:"")),Lr="IE",Tr=dr[1]),yr){if(ur="global",ar=(nr=Et)!=null?L(nr[ur]):"number",/^(?:boolean|number|string|undefined)$/.test(ar)||ar=="object"&&!nr[ur])de(dr=Et.runtime)==pr?(Lr="Adobe AIR",Vr=dr.flash.system.Capabilities.os):de(dr=Et.phantom)==wr?(Lr="PhantomJS",Tr=(dr=dr.version||null)&&dr.major+"."+dr.minor+"."+dr.patch):typeof Er.documentMode=="number"&&(dr=/\bTrident\/(\d+)/i.exec(ze))?(Tr=[Tr,Er.documentMode],(dr=+dr[1]+4)!=Tr[1]&&(Mr.push("IE "+Tr[1]+" mode"),Br&&(Br[1]=""),Tr[1]=dr),Tr=Lr=="IE"?String(Tr[1].toFixed(1)):Tr[0]):typeof Er.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Lr)&&(Mr.push("masking as "+Lr+" "+Tr),Lr="IE",Tr="11.0",Br=["Trident"],Vr="Windows");else if(Sr&&(Nr=(dr=Sr.lang.System).getProperty("os.arch"),Vr=Vr||dr.getProperty("os.name")+" "+dr.getProperty("os.version")),mr){try{Tr=Et.require("ringo/engine").version.join("."),Lr="RingoJS"}catch{(dr=Et.system)&&dr.global.system==Et.system&&(Lr="Narwhal",Vr||(Vr=dr[0].os||null))}Lr||(Lr="Rhino")}else L(Et.process)==="object"&&!Et.process.browser&&(dr=Et.process)&&(L(dr.versions)==="object"&&(typeof dr.versions.electron=="string"?(Mr.push("Node "+dr.versions.node),Lr="Electron",Tr=dr.versions.electron):typeof dr.versions.nw=="string"&&(Mr.push("Chromium "+Tr,"Node "+dr.versions.node),Lr="NW.js",Tr=dr.versions.nw)),Lr||(Lr="Node.js",Nr=dr.arch,Vr=dr.platform,Tr=(Tr=/[\d.]+/.exec(dr.version))?Tr[0]:null));Vr=Vr&&ae(Vr)}if(Tr&&(dr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Tr)||/(?:alpha|beta)(?: ?\d)?/i.exec(ze+";"+(yr&&er.appMinorVersion))||/\bMinefield\b/i.test(ze)&&"a")&&(br=/b/i.test(dr)?"beta":"alpha",Tr=Tr.replace(RegExp(dr+"\\+?$"),"")+(br=="beta"?Ar:_r)+(/\d+\+?/.exec(dr)||"")),Lr=="Fennec"||Lr=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(Vr))Lr="Firefox Mobile";else if(Lr=="Maxthon"&&Tr)Tr=Tr.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Fr))Fr=="Xbox 360"&&(Vr=null),Fr=="Xbox 360"&&/\bIEMobile\b/.test(ze)&&Mr.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(Lr)&&(!Lr||Fr||/Browser|Mobi/.test(Lr))||Vr!="Windows CE"&&!/Mobi/i.test(ze))if(Lr=="IE"&&yr)try{Et.external===null&&Mr.unshift("platform preview")}catch{Mr.unshift("embedded")}else(/\bBlackBerry\b/.test(Fr)||/\bBB10\b/.test(ze))&&(dr=(RegExp(Fr.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ze)||0)[1]||Tr)?(Vr=((dr=[dr,/BB10/.test(ze)])[1]?(Fr=null,qr="BlackBerry"):"Device Software")+" "+dr[0],Tr=null):this!=Fe&&Fr!="Wii"&&(yr&&sr||/Opera/.test(Lr)&&/\b(?:MSIE|Firefox)\b/i.test(ze)||Lr=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Vr)||Lr=="IE"&&(Vr&&!/^Win/.test(Vr)&&Tr>5.5||/\bWindows XP\b/.test(Vr)&&Tr>8||Tr==8&&!/\bTrident\b/.test(ze)))&&!re.test(dr=At.call(Fe,ze.replace(re,"")+";"))&&dr.name&&(dr="ing as "+dr.name+((dr=dr.version)?" "+dr:""),re.test(Lr)?(/\bIE\b/.test(dr)&&Vr=="Mac OS"&&(Vr=null),dr="identify"+dr):(dr="mask"+dr,Lr=xr?ae(xr.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(dr)&&(Vr=null),yr||(Tr=null)),Br=["Presto"],Mr.push(dr));else Lr+=" Mobile";if(dr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ze)||0)[1]){var Tn,xn;dr=[i(dr.replace(/\.(\d)$/,".0$1")),dr],Lr=="Safari"&&g(Tn=dr[1]).call(Tn,-1)=="+"?(Lr="WebKit Nightly",br="alpha",Tr=g(xn=dr[1]).call(xn,0,-1)):Tr!=dr[1]&&Tr!=(dr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ze)||0)[1])||(Tr=null),dr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(ze)||0)[1],dr[0]==537.36&&dr[2]==537.36&&i(dr[1])>=28&&Br=="WebKit"&&(Br=["Blink"]),yr&&(gr||dr[1])?(Br&&(Br[1]="like Chrome"),dr=dr[1]||((dr=dr[0])<530?1:dr<532?2:dr<532.05?3:dr<533?4:dr<534.03?5:dr<534.07?6:dr<534.1?7:dr<534.13?8:dr<534.16?9:dr<534.24?10:dr<534.3?11:dr<535.01?12:dr<535.02?"13+":dr<535.07?15:dr<535.11?16:dr<535.19?17:dr<536.05?18:dr<536.1?19:dr<537.01?20:dr<537.11?"21+":dr<537.13?23:dr<537.18?24:dr<537.24?25:dr<537.36?26:Br!="Blink"?"27":"28")):(Br&&(Br[1]="like Safari"),dr=(dr=dr[0])<400?1:dr<500?2:dr<526?3:dr<533?4:dr<534?"4+":dr<535?5:dr<537?6:dr<538?7:dr<601?8:"8"),Br&&(Br[1]+=" "+(dr+=typeof dr=="number"?".x":/[.+]/.test(dr)?"":"+")),Lr=="Safari"&&(!Tr||k(Tr)>45)&&(Tr=dr)}Lr=="Opera"&&(dr=/\bzbov|zvav$/.exec(Vr))?(Lr+=" ",Mr.unshift("desktop mode"),dr=="zvav"?(Lr+="Mini",Tr=null):Lr+="Mobile",Vr=Vr.replace(RegExp(" *"+dr+"$"),"")):Lr=="Safari"&&/\bChrome\b/.exec(Br&&Br[1])&&(Mr.unshift("desktop mode"),Lr="Chrome Mobile",Tr=null,/\bOS X\b/.test(Vr)?(qr="Apple",Vr="iOS 4.3+"):Vr=null),Tr&&y(Tr).call(Tr,dr=/[\d.]+$/.exec(Vr))==0&&y(ze).call(ze,"/"+dr+"-")>-1&&(Vr=kt(Vr.replace(dr,""))),Br&&!/\b(?:Avant|Nook)\b/.test(Lr)&&(/Browser|Lunascape|Maxthon/.test(Lr)||Lr!="Safari"&&/^iOS/.test(Vr)&&/\bSafari\b/.test(Br[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(Lr)&&Br[1])&&(dr=Br[Br.length-1])&&Mr.push(dr),Mr.length&&(Mr=["("+Mr.join("; ")+")"]),qr&&Fr&&y(Fr).call(Fr,qr)<0&&Mr.push("on "+qr),Fr&&Mr.push((/^on /.test(Mr[Mr.length-1])?"":"on ")+Fr),Vr&&(dr=/ ([\d.+]+)$/.exec(Vr),lr=dr&&Vr.charAt(Vr.length-dr[0].length-1)=="/",Vr={architecture:32,family:dr&&!lr?Vr.replace(dr[0],""):Vr,version:dr?dr[1]:null,toString:function(){var Vn=this.version;return this.family+(Vn&&!lr?" "+Vn:"")+(this.architecture==64?" 64-bit":"")}}),(dr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Nr))&&!/\bi686\b/i.test(Nr)?(Vr&&(Vr.architecture=64,Vr.family=Vr.family.replace(RegExp(" *"+dr),"")),Lr&&(/\bWOW64\b/i.test(ze)||yr&&/\w(?:86|32)$/.test(er.cpuClass||er.platform)&&!/\bWin64; x64\b/i.test(ze))&&Mr.unshift("32-bit")):Vr&&/^OS X/.test(Vr.family)&&Lr=="Chrome"&&i(Tr)>=39&&(Vr.architecture=64),ze||(ze=null);var Xr={};return Xr.description=ze,Xr.layout=Br&&Br[0],Xr.manufacturer=qr,Xr.name=Lr,Xr.prerelease=br,Xr.product=Fr,Xr.ua=ze,Xr.version=Lr&&Tr,Xr.os=Vr||{architecture:null,family:null,version:null,toString:function(){return"null"}},Xr.parse=At,Xr.toString=function(){return this.description||""},Xr.version&&Mr.unshift(Tr),Xr.name&&Mr.unshift(Lr),Vr&&Lr&&(Vr!=String(Vr).split(" ")[0]||Vr!=Lr.split(" ")[0]&&!Fr)&&Mr.push(Fr?"("+Vr+")":"on "+Vr),Mr.length&&(Xr.description=Mr.join(" ")),Xr}()}();t.exports=$}).call(this,e(77))},function(t,r,e){var n=e(13),g=n({}.toString),y=n("".slice);t.exports=function(i){return y(g(i),8,-1)}},function(t,r,e){var n=e(33);t.exports=n("navigator","userAgent")||""},function(t,r,e){var n=e(172),g=e(17),y=e(71),i=e(21)("toStringTag"),k=Object,L=y(function(){return arguments}())=="Arguments";t.exports=n?y:function($){var V,z,re;return $===void 0?"Undefined":$===null?"Null":typeof(z=function(oe,le){try{return oe[le]}catch{}}(V=k($),i))=="string"?z:L?y(V):(re=y(V))=="Object"&&g(V.callee)?"Arguments":re}},function(t,r,e){var n=e(65);t.exports=function(g,y,i,k){return k&&k.enumerable?g[y]=i:n(g,y,i),g}},function(t,r,e){e(90);var n=e(363),g=e(16),y=e(73),i=e(65),k=e(105),L=e(21)("toStringTag");for(var $ in n){var V=g[$],z=V&&V.prototype;z&&y(z)!==L&&i(z,L,$),k[$]=k.Array}},function(t,r,e){var n=e(32),g=TypeError,y=function(i){var k,L;this.promise=new i(function($,V){if(k!==void 0||L!==void 0)throw g("Bad Promise constructor");k=$,L=V}),this.resolve=n(k),this.reject=n(L)};t.exports.f=function(i){return new y(i)}},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}t.exports=e},function(t,r,e){t.exports=e(223)},function(t,r,e){var n=e(798);n.fn=n.prototype,t.exports=n,e(800),e(801),e(802),e(803),e(804),e(805),e(806),e(807),e(808),e(809),e(810)},function(t,r,e){var n=e(24),g=e(5),y=e(6),i=e(15),k=e(2),L=e(11),$=e(9),V=e(68),z=e(78),re=e(64),oe=e(28);function le(or,dr){var lr=z!==void 0&&re(or)||or["@@iterator"];if(!lr){if(oe(or)||(lr=function(hr,Cr){var wr;if(hr){if(typeof hr=="string")return ue(hr,Cr);var Sr=$(wr=Object.prototype.toString.call(hr)).call(wr,8,-1);if(Sr==="Object"&&hr.constructor&&(Sr=hr.constructor.name),Sr==="Map"||Sr==="Set")return V(hr);if(Sr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Sr))return ue(hr,Cr)}}(or))||dr&&or&&typeof or.length=="number"){lr&&(or=lr);var nr=0,ur=function(){};return{s:ur,n:function(){return nr>=or.length?{done:!0}:{done:!1,value:or[nr++]}},e:function(hr){throw hr},f:ur}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar,gr=!0,pr=!1;return{s:function(){lr=lr.call(or)},n:function(){var hr=lr.next();return gr=hr.done,hr},e:function(hr){pr=!0,ar=hr},f:function(){try{gr||lr.return==null||lr.return()}finally{if(pr)throw ar}}}}function ue(or,dr){(dr==null||dr>or.length)&&(dr=or.length);for(var lr=0,nr=new Array(dr);lr<dr;lr++)nr[lr]=or[lr];return nr}var ie=e(0),ae=ie.undef,Fe=ie.notundef,de=ie.exist,Ie=e(199),Ve=e(303),kt={p2p:0,team:1,superTeam:5},At={0:"p2p",1:"team",5:"superTeam"},ze=g(kt),Et=Ve.typeMap,cr=Ve.validTypes;function er(or){ie.verifyOptions(or,"scene to type","msg::Message"),ie.verifyParamValid("scene",or.scene,ze,"msg::Message"),this.scene=kt[or.scene],this.to=""+or.to,this.type=Et[or.type],this.resend=or.resend?1:0,or.resend?(ie.verifyOptions(or,"idClient","msg::Message"),this.idClient=or.idClient):this.idClient=ie.guid(),Fe(or.subType)&&(ie.isInt(+or.subType)&&+or.subType>0?this.subType=+or.subType:ie.onParamError("subType只能是大于0的整数","msg::Message"));var dr=or.replyMsg;dr&&dr.idServer&&dr.from&&dr.to&&dr.time&&(this.replyMsgFromAccount=dr.from,this.replyMsgToAccount=dr.to,this.replyMsgTime=dr.time,this.replyMsgIdServer=dr.idServer,this.replyMsgIdClient=dr.idClient,dr.threadMsgFromAccount&&dr.threadMsgIdServer&&dr.threadMsgTime&&dr.threadMsgToAccount?(this.threadMsgFromAccount=dr.threadMsgFromAccount,this.threadMsgToAccount=dr.threadMsgToAccount,this.threadMsgTime=dr.threadMsgTime,this.threadMsgIdServer=dr.threadMsgIdServer,this.threadMsgIdClient=dr.threadMsgIdClient):(this.threadMsgFromAccount=dr.from,this.threadMsgToAccount=dr.to,this.threadMsgTime=dr.time,this.threadMsgIdServer=dr.idServer,this.threadMsgIdClient=dr.idClient)),Fe(or.text)&&(this.body=""+or.text),Fe(or.custom)&&(n(or.custom)==="object"?this.custom=y(or.custom):this.custom=""+or.custom),Fe(or.body)&&(this.body=""+or.body),Fe(or.pushContent)&&(this.pushContent=""+or.pushContent),Fe(or.pushPayload)&&(this.pushPayload=""+or.pushPayload);var lr=or.apns;if(Fe(lr)&&or.scene==="team"){var nr=lr.accounts;Fe(nr)&&ie.verifyParamType("apns.accounts",nr,"array","msg::Message"),this.apnsAccounts=nr?y(nr):"#%@all@%#",this.apnsContent=lr.content||or.pushContent||"",ie.verifyBooleanWithDefault(lr,"forcePush",!0,"options.apns","msg::Message"),this.apnsForcePush=lr.forcePush?1:0}var ur=or.robotInfo;Fe(ur)&&(or.scene==="team"&&ie.verifyOptions(or.robotInfo,"account","msg::Message::robotInfo scene === team"),ur.function&&(this.robotInfoFunction=ur.function),ur.topic&&(this.robotInfoTopic=ur.topic),ur.customContent&&(this.robotInfoCustomContent=ur.customContent),ur.account&&(this.robotInfoAccount=ur.account)),Fe(or.isHistoryable)&&(this.isHistoryable=or.isHistoryable?1:0),Fe(or.isRoamingable)&&(this.isRoamingable=or.isRoamingable?1:0),Fe(or.isSyncable)&&(this.isSyncable=or.isSyncable?1:0),Fe(or.cc)&&(this.cc=or.cc?1:0),Fe(or.env)&&(this.env=or.env),Fe(or.isPushable)&&(this.isPushable=or.isPushable?1:0),Fe(or.isOfflinable)&&(this.isOfflinable=or.isOfflinable?1:0),Fe(or.isUnreadable)&&(this.isUnreadable=or.isUnreadable?1:0),Fe(or.needPushNick)&&(this.needPushNick=or.needPushNick?1:0),Fe(or.needMsgReceipt)&&(this.needMsgReceipt=or.needMsgReceipt?1:0),Fe(or.yidunEnable)&&(this.yidunEnable=or.yidunEnable?1:0),this.needUpdateSession=or.needUpdateSession===!1?0:1,Fe(or.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=or.antiSpamUsingYidun?1:0),Fe(or.clientAntiSpam)&&(this.clientAntiSpam=or.clientAntiSpam?1:0),Fe(or.antiSpamContent)&&(n(or.antiSpamContent)==="object"?this.antiSpamContent=y(or.antiSpamContent):this.antiSpamContent=""+or.antiSpamContent),Fe(or.antiSpamBusinessId)&&(n(or.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=y(or.antiSpamBusinessId):this.antiSpamBusinessId=""+or.antiSpamBusinessId),Fe(or.yidunAntiCheating)&&(this.yidunAntiCheating=or.yidunAntiCheating),Fe(or.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=or.yidunAntiSpamExt)}ie.merge(er.prototype,Ve.prototype),er.prototype.getScene=function(){return At[this.scene]},er.getType=Ve.getType,er.setFlow=Ve.setFlow,er.reverse=function(or){var dr,lr=At[or.scene];if(dr=or.delete==="1"?{delete:!0,scene:lr||or.scene,from:or.from,time:+or.time,to:""+or.to}:{scene:lr||or.scene,from:or.from,fromNick:or.fromNick,fromClientType:Ie.reverseType(or.fromClientType),fromDeviceId:or.fromDeviceId,to:""+or.to,time:+or.time,type:er.getType(or),text:de(or.body)?or.body:or.text||"",isHistoryable:ae(or.isHistoryable)||+or.isHistoryable==1,isRoamingable:ae(or.isRoamingable)||+or.isRoamingable==1,isSyncable:ae(or.isSyncable)||+or.isSyncable==1,cc:ae(or.cc)||+or.cc==1,isPushable:ae(or.isPushable)||+or.isPushable==1,isOfflinable:ae(or.isOfflinable)||+or.isOfflinable==1,isUnreadable:ae(or.isUnreadable)||+or.isUnreadable==1,isReplyMsg:ae(or.isReplyMsg)||+or.isReplyMsg==1,needPushNick:ae(or.needPushNick)||+or.needPushNick==1,needMsgReceipt:+or.needMsgReceipt==1,isLocal:!1},or.isInBlackList&&(dr.isInBlackList=+or.isInBlackList==1,dr.isInBlackList&&(or.status="fail")),Fe(or.isMuted)&&(dr.isMuted=+or.isMuted==1),Fe(or.resend)&&(dr.resend=+or.resend==1),Fe(or.idClient)&&(dr.idClient=or.idClient),Fe(or.idServer)&&(dr.idServer=""+or.idServer),Fe(or.userUpdateTime)&&(dr.userUpdateTime=+or.userUpdateTime),Fe(or.custom)&&(dr.custom=or.custom),Fe(or.callbackExt)&&(dr.callbackExt=or.callbackExt),Fe(or.subType)&&(dr.subType=+or.subType),Fe(or.pushContent)&&(dr.pushContent=or.pushContent),Fe(or.pushPayload)&&(dr.pushPayload=or.pushPayload),Fe(or.tempTeamMemberCount)&&(dr.tempTeamMemberCount=+or.tempTeamMemberCount),Fe(or.yidunAntiSpamRes)&&(dr.yidunAntiSpamRes=or.yidunAntiSpamRes),Fe(or.apnsAccounts)){if(dr.apns={},or.apnsAccounts!=="#%@all@%#"){var nr=or.apnsAccounts;try{dr.apns.accounts=JSON.parse(nr)}catch{dr.apns.accounts=[]}}dr.apns.content=or.apnsContent||"",dr.apns.forcePush=+or.apnsForcePush==1}if(Fe(or.robotInfoFunction)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoFunction&&(dr.robotInfo.function=or.robotInfoFunction)),Fe(or.robotInfoCustomContent)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoCustomContent&&(dr.robotInfo.customContent=or.robotInfoCustomContent)),Fe(or.robotInfoTopic)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoTopic&&(dr.robotInfo.topic=or.robotInfoTopic)),Fe(or.robotInfoAccount)&&(dr.robotInfo=dr.robotInfo||{},or.robotInfoAccount&&(dr.robotInfo.account=or.robotInfoAccount)),Fe(or.needUpdateSession)&&(dr.needUpdateSession=+or.needUpdateSession==1),dr.status=or.status||"success",Fe(i(or))&&(dr.filter=i(or)),or.replyMsgIdServer&&or.threadMsgIdServer){var ur=["replyMsgFromAccount","replyMsgToAccount","replyMsgTime","replyMsgIdServer","replyMsgIdClient","threadMsgFromAccount","threadMsgToAccount","threadMsgTime","threadMsgIdServer","threadMsgIdClient"];k(ur).call(ur,function(ar){dr[ar]=or[ar]}),dr.replyMsgTime=+dr.replyMsgTime,dr.threadMsgTime=+dr.threadMsgTime}return dr},er.setExtra=function(or,dr){or.target=er.getMsgTarget(or,dr),or.sessionId=or.scene+"-"+or.target,Ve.setFlow(or,dr)},er.getMsgTarget=function(or,dr){return or.scene==="p2p"?or.to===dr?or.from:or.to:or.scene==="team"||or.scene==="superTeam"?or.to:void 0},er.deduplication=function(or){var dr,lr,nr={},ur=le(or);try{for(ur.s();!(lr=ur.n()).done;){var ar=lr.value,gr=nr[ar.idClient];gr&&gr.time>ar.time||(nr[ar.idClient]=ar)}}catch(pr){ur.e(pr)}finally{ur.f()}return L(dr=g(nr)).call(dr,function(pr){return nr[pr]})},er.sortMsgs=function(or){return or=$(or).call(or,0),ie.sortObjArray(or,{sortPath:"time"}),or},er.getLastMsg=function(or){return(or=er.sortMsgs(or))[or.length-1]},er.getLastNotIgnoredMsg=function(or){for(var dr=null,lr=(or=er.sortMsgs(or)).length-1;lr>=0;lr--)if(!(dr=or[lr]).ignore)return dr;return null},er.getMaxTimetag=function(or){return er.getLastMsg(or).time},er.validScenes=ze,er.validTypes=cr,er.sceneMap=kt,er.sceneReverseMap=At,t.exports=er},function(t,r,e){var n=e(24),g=e(19),y=e(28),i=e(2),k=e(384),L=e(8),$=e(5),V=e(6),z=e(3),re=e(141),oe=e(0),le=oe.notundef,ue=e(564),ie=e(12),ae=(e(192),e(12)),Fe=e(48),de=e(590).wrapSafeCallback,Ie=e(26).reportAPI,Ve=e(164);function kt(){}var At={};kt.getInstance=function(er){er=Et(er),oe.verifyOptions(er,"account","api::Base.getInstance");var or=this.genInstanceName(er),dr=At[or];return dr?kt.updateInstance(dr,er):dr=At[or]=new this(er),dr},kt.updateInstance=function(er,or){er.setOptions(or),or.skipConnectionOnInitialize||er.connect()};var ze=kt.fn=kt.prototype=g(new re),Et=function(er){return er.nosSurvivalTime?(oe.verifyParamType("nosSurvivalTime",er.nosSurvivalTime,"number","api::Base.getInstance"),oe.verifyParamMin("nosSurvivalTime",er.nosSurvivalTime,86400,"api::Base.getInstance")):er.nosSurvivalTime=1/0,er};ze.updatePrivateConf=function(er){if(Ie({instance:this,className:"ApiBaseFn",funcName:"updatePrivateConf",hasCallback:!1}),er&&n(er.privateConf)==="object"){var or=er.privateConf;typeof or.lbs_web=="string"&&(er.lbsUrl=or.lbs_web),typeof or.link_ssl_web=="boolean"&&(er.secure=or.link_ssl_web),typeof or.https_enabled=="boolean"&&(er.httpsEnabled=or.https_enabled),er.uploadUrl=or.nos_uploader_web?or.nos_uploader_web:null,er.chunkUploadUrl=or.nos_uploader_web?or.nos_uploader_web:null,er.replaceUrl=or.nos_downloader?or.nos_downloader:null,er.downloadUrl=or.nos_accelerate?or.nos_accelerate:null,er.downloadHost=or.nos_accelerate_host?or.nos_accelerate_host:null,er.downloadHostList=or.nos_accelerate_host_list||[],er.downloadHost&&er.downloadHostList.push(er.downloadHost),er.nosCdnEnable=or.nos_cdn_enable!==!1,er.ntServerAddress=or.nt_server||null,er.kibanaServer=or.kibana_server,er.statisticServer=or.statistic_server,er.reportGlobalServer=or.report_global_server,er.ipVersion=or.ip_protocol_version||er.ipVersion,er.defaultLink=or.link_web||er.defaultLink,er.ipv6DefaultLink=or.link_ipv6_web||er.ipv6DefaultLink,typeof or.nos_lbs=="string"?er.nosLbsUrls=[or.nos_lbs]:er.nosLbsUrls=[],y(or.nos_edge_list)&&(er.edgeList=or.nos_edge_list)}return er.ntServerAddress===null||er.ntServerAddress===""?ie.ntServerAddress=null:ie.ntServerAddress=er.ntServerAddress,ie.uploadUrl=er.uploadUrl||ie.uploadUrl,ie.chunkUploadUrl=er.chunkUploadUrl||ie.chunkUploadUrl,ie.downloadUrl=er.downloadUrl||ie.downloadUrl,ie.downloadHost=er.downloadHost||ie.downloadHost,ie.downloadHostList=er.downloadHostList&&er.downloadHostList.length>0?er.downloadHostList:ie.downloadHostList,ie.nosCdnEnable=er.nosCdnEnable!==!1,ie.replaceUrl=er.replaceUrl||ie.replaceUrl,ie.httpsEnabled=er.httpsEnabled||ie.httpsEnabled,er.probe_ipv4_url&&(ie.ipProbeAddr.ipv4=er.probe_ipv4_url),er.probe_ipv6_url&&(ie.ipProbeAddr.ipv6=er.probe_ipv6_url),er},ze.init=function(er){oe.verifyOptions(er,"account","api::Base.init"),er=this.updatePrivateConf(er),oe.verifyBooleanWithDefault(er,"exifOrientation",!0,"","api::Base.init"),er.lbsBackup=er.lbsBackup===void 0||er.lbsBackup;var or=this.account=er.account=er.account+"",dr=er.constructor.genInstanceName(er),lr=At[dr];if(er._disableSingleton&&(lr=null),lr)return kt.updateInstance(lr,er),lr;this.logger=er.logger=new ue({debug:er.debug,logFunc:er.logFunc,prefix:this.subType,dbLog:er.dbLog!==!1,account:er.account,expire:er.expire,logLevel:er.logLevel}),this.options=de(er,this),er.api=this;var nr=this.protocol=new er.Protocol(er);return nr.name="Protocol-"+dr,nr.account=or,nr.api=this,nr.message=this.message=new er.Message({account:or}),this.reporter=nr.reporter,this.statusProtector=nr.statusProtector,this.reporterHook=nr.reporterHook,this.abtInfo={},(typeof oe.get(er,"privateConf.isABTestEnable")=="boolean"?er.privateConf.isABTestEnable:ie.privateConf.isABTestEnable)&&this.abTestConfigRequset(),this.name=dr,At[dr]=this,this},ze.destroy=function(er){var or=this;(er=er||{}).done=Ie({instance:this,className:"ApiBaseFn",funcName:"destroy",done:er.done});var dr=this;if(!dr.__beginDestroy){var lr;dr.__beginDestroy=!0,er=er||{};var nr,ur=this.name;if(this.logger.warn("destroy::start"),!ur)return this.logger&&this.logger.warn&&this.logger.warn("destroy::no instanceName"),void(dr.__beginDestroy=void 0);this.protocol&&(lr=this.protocol.connectTimer),this.protocol&&this.protocol.resetPush&&this.protocol.resetPush(),this.eventNames&&typeof this.eventNames=="function"&&i(nr=this.eventNames()).call(nr,function(ar){delete or._events[ar]}),this.disconnect({done:function(ar){var gr,pr,hr;dr.logger.warn(`ApiBase::destroy: instance destroyed ...

`),dr.__beginDestroy=void 0,dr.reporter.destroy(),dr.statusProtector.destroy(),dr.reporterHook.destroy(),i(gr=k(dr.options)).call(gr,function(wr){L(wr).call(wr,"on")===0&&(dr.options[wr]=function(){},dr.protocol.options[wr]=function(){},dr.protocol.api.options[wr]=function(){})}),dr.logger.destroy(),n(dr.protocol.sessionSet)==="object"&&i(pr=$(dr.protocol.sessionSet)).call(pr,function(wr){dr.protocol.sessionSet[wr].unreadMsgs=[],dr.protocol.sessionSet[wr]=void 0}),dr.protocol.syncResult={},dr.db&&dr.db.close();var Cr=dr.protocol;i(hr=k(dr)).call(hr,function(wr){dr[wr]=void 0}),At&&(At[ur]=null,clearTimeout(lr)),Cr&&(Cr.__destroyed=!0),er.done instanceof Function&&er.done(ar)}})}},ze.setOptions=function(er){var or=Ve(er);or=de(or,this),this.protocol.setOptions(or)},ze.abTestConfigRequset=function(){var er=this,or=er.options.abTestUrl||"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",dr={projectKey:"im1_sdk_abtest_web",appKey:er.options.appKey,osType:"Web",sdkVersion:er.info.version,deviceId:Fe.deviceId},lr=V({clientInfo:dr});this.protocol.adaptersRequest(or,{method:"POST",timeout:5e3,headers:{"Content-Type":"application/json"},data:lr,onload:function(nr){var ur=JSON.parse(nr);er.abtInfo=ur.data.abtInfo||{},er.logger&&er.logger.info("abTestConfigRequset::success",er.abtInfo),ae.hasLocalStorage&&localStorage.setItem("nim-abtInfo",V(er.abtInfo))},onerror:function(){er.logger&&er.logger.info("abTestConfigRequset::fail")}},{exception_service:7})},ze.processCallback=function(er,or){cr(er,or)},ze.processCallbackPromise=function(er,or){return new z(function(dr,lr){cr(er,or,!0,dr,lr)})};var cr=function(er,or,dr,lr,nr){var ur="api::processCallback";dr&&(ur="api::processCallbackPromise"),oe.verifyCallback(er,"done",ur),er.callback=function(ar,gr,pr){var hr=er.callback.options;if(gr=gr||hr,or&&(gr=hr),oe.isFunction(er.cbaop)){var Cr=er.cbaop(ar,gr);le(Cr)&&(gr=Cr)}var wr=er.done;oe.isObject(gr)&&(delete gr.done,delete gr.cb,delete gr.callback),dr?ar?nr({message:"生成接口回调错误",callFunc:ur,event:ar}):lr(gr):wr(ar,gr,pr)},er.callback.options=oe.copy(er)};ze.processPs=function(er){oe.notexist(er.ps)&&(er.ps=""),oe.verifyArrayMax("ps",er.ps,5e3)},ze.processCustom=function(er){oe.notexist(er.custom)&&(er.custom="")},ze.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},ze.sendCmdWithResp=function(er,or,dr){this.sendCmd(er,or,function(lr,nr,ur){oe.isFunction(dr)&&(lr?dr(lr,nr):dr(null,ur))})},ze.cbAndSendCmd=function(er,or){var dr=this.processCallbackPromise(or);return this.sendCmd(er,or),dr},ze.sendCmdUsePromise=function(er,or){var dr=this,lr=Ie({instance:this,className:"ApiBaseFn",funcName:er,hasCallback:!0});return new z(function(nr,ur){dr.sendCmd(er,or,function(ar,gr,pr){if(ar)typeof lr=="function"&&lr(ar),ur(ar);else{var hr=oe.merge({},gr,pr);typeof lr=="function"&&lr(void 0),nr(hr)}})})},kt.use=function(er,or){er&&er.install&&oe.isFunction(er.install)&&er.install(this,or)},kt.rmAllInstances=function(){for(var er in At)At[er].destroy();At={}},ze.logout=function(){var er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};er.callback=Ie({instance:this,className:"ApiBaseFn",funcName:"logout",done:er.callback}),er=er||{},this.protocol.shouldReconnect=!1,this.protocol.doLogout=!0,this.processCallback(er),this.protocol.statusProtector.processEvent("auth/loginLifeCycleLogout"),this.sendCmd("logout",er,er.callback)},t.exports=kt,e(594),e(595),e(647),e(648),e(649),e(653)},function(t,r,e){var n=e(93),g=e(28),y=e(5),i=e(15),k=e(95),L=e(8),$=e(63),V=e(4),z=e(2),re=e(6),oe=e(56),le=e(22),ue=e(23),ie=e(9),ae=e(68),Fe=e(78),de=e(64);function Ie(pr,hr){var Cr=Fe!==void 0&&de(pr)||pr["@@iterator"];if(!Cr){if(g(pr)||(Cr=function(Er,sr){var xr;if(Er){if(typeof Er=="string")return Ve(Er,sr);var Nr=ie(xr=Object.prototype.toString.call(Er)).call(xr,8,-1);if(Nr==="Object"&&Er.constructor&&(Nr=Er.constructor.name),Nr==="Map"||Nr==="Set")return ae(Er);if(Nr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nr))return Ve(Er,sr)}}(pr))||hr&&pr&&typeof pr.length=="number"){Cr&&(pr=Cr);var wr=0,Sr=function(){};return{s:Sr,n:function(){return wr>=pr.length?{done:!0}:{done:!1,value:pr[wr++]}},e:function(Er){throw Er},f:Sr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mr,_r=!0,Ar=!1;return{s:function(){Cr=Cr.call(pr)},n:function(){var Er=Cr.next();return _r=Er.done,Er},e:function(Er){Ar=!0,mr=Er},f:function(){try{_r||Cr.return==null||Cr.return()}finally{if(Ar)throw mr}}}}function Ve(pr,hr){(hr==null||hr>pr.length)&&(hr=pr.length);for(var Cr=0,wr=new Array(hr);Cr<hr;Cr++)wr[Cr]=pr[Cr];return wr}var kt=e(0),At=kt.undef,ze=e(12),Et=e(35),cr=e(165).StatusProtector,er=e(109),or=er.ReporterHook,dr=er.EMSyncType,lr=e(654),nr=e(655),ur=e(656);function ar(pr){kt.undef(pr.secure)&&(pr.secure=!0),this.options=pr,this.keepNosSafeUrl=this.options.keepNosSafeUrl||!1;var hr=pr.defaultLink||pr.defaultLinkUrl;kt.notundef(hr)&&kt.isString(hr)&&(ze.optionDefaultLinkUrl=n(hr).call(hr)),kt.notundef(pr.ipv6DefaultLink)&&kt.isString(pr.ipv6DefaultLink)&&(ze.optionIpv6DefaultLinkUrl=pr.ipv6DefaultLink),typeof pr.heartbeatInterval=="number"&&(ze.heartbeatInterval=pr.heartbeatInterval),g(pr.nosLbsUrls)&&(ze.nosLbsUrls=pr.nosLbsUrls);var Cr=this.options.socketConcurrent;Cr=typeof Cr=="number"&&Cr>=1&&Cr<=3?Cr:1,this.options.socketConcurrent=Cr,this.options.rollbackDelMsgUnread!==void 0&&typeof this.options.rollbackDelMsgUnread=="boolean"||(this.options.rollbackDelMsgUnread=!0),this.init(),pr.skipConnectionOnInitialize||this.connect()}var gr=ar.fn=ar.prototype;gr.init=function(){var pr=this;this.logger=this.options.logger,this.getNosOriginUrlReqNum=0,this.checkNosReqNum=0,this.timerMap={},this.cmdCallbackMap={},this.cmdContentMap={},this.initConnect(),this.reset(),this.statusProtector=new cr(this),this.reporterHook=new or(this,this.options.reporterHookConfig),this.reporterHookLinkKeep=new lr(this),this.promiseAbortManager=new nr,this.imsocket=new ur(this,{socketConcurrent:this.options.socketConcurrent,binaryWebsocket:this.useBinaryWebSocket()}),this.statusProtector.on("auth/loginLifeCycleLogout",function(){pr.promiseAbortManager.clear()}),this.statusProtector.on("auth/loginLifeCycleLoginSucc",function(){pr.reporterHook.reset(),pr.reporterHook.setOriginTimetick()})},gr.useBinaryWebSocket=function(){if(!(ze.isBrowser&&typeof TextDecoder<"u"&&typeof Uint8Array<"u"))return!1;if(typeof this.options.binaryWebsocket=="boolean")return this.options.binaryWebsocket;if(ze.hasLocalStorage&&localStorage.getItem("nim-abtInfo"))try{var pr,hr=Ie(JSON.parse(localStorage.getItem("nim-abtInfo")).experiments);try{for(hr.s();!(pr=hr.n()).done;){var Cr=pr.value;if(Cr.experimentKey=Cr.schemeKey==="open_flow")return!0}}catch(wr){hr.e(wr)}finally{hr.f()}}catch{return!1}return!1},gr.reset=function(){At(this.options.thumbnailToStatic)&&(this.options.thumbnailToStatic=!0),this.resetConnect()},gr.setOptions=function(pr){var hr=this.options,Cr=y(hr),wr=y(pr),Sr=["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onsyncsuperteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onMySuperTeamMembers","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onMyTeamMembers","onMsgReceipts","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","reconnectDelayProvider","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],mr=i(wr).call(wr,function(Ar){return k(Sr).call(Sr,Ar)}),_r=L(Cr).call(Cr,"account");kt.verifyCallback(pr,mr,"protocol::IMProtocol"),this.logger.info("setOptions::",kt.omitAsString(pr,["appKey","token","loginExt","customTag"])),_r!==-1&&$(Cr).call(Cr,_r,1),pr=kt.filterObj(pr,Cr),this.options=kt.merge(hr,pr),this.reset()},gr.sendCmd=function(pr){var hr,Cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",wr=arguments.length>2?arguments[2]:void 0,Sr=this;Sr.heartbeat();var mr,_r=pr,Ar=(pr=Sr.parser.createCmd(pr,Cr)).SER;Cr=Cr||{},Sr.cmdContentMap[Ar]=Cr,Cr.single&&(delete Cr.single,(mr=y(Cr)).length===1&&(Sr.cmdContentMap[Ar]=Cr[mr[0]])),Cr.__exceptionInfo={target:V(hr="".concat(pr.SID,"-")).call(hr,pr.CID),context:Ar,startTime:Sr.reporterHook.getSafeClock()},Cr.NOTSTORE&&(mr=Cr.NOTSTORE.split(" "),z(mr).call(mr,function(Er){delete Cr[Er]}),delete Cr.NOTSTORE),(wr=wr||Cr.callback)&&(Sr.cmdCallbackMap[Ar]=wr),Sr.executeCmdTask({cmdName:_r,cmd:re(pr)})},gr.executeCmdTask=function(pr){var hr=pr.cmdName,Cr=pr.cmd,wr=(Cr=JSON.parse(Cr)).SER;this.isFrequencyControlled(hr)?(this.logger.warn("protocol::executeCmdTask: ".concat(hr," hit freq control")),this.markCallbackInvalid(wr,Et.newFrequencyControlError({callFunc:"protocol::executeCmdTask",message:"".concat(hr," hit freq control")}))):this.hasLogin?(hr!=="heartbeat"&&(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(pr.cmd)):this.logger.info("protocol::sendCmd: ".concat(hr))),this.doSendCmd(Cr,hr)):hr==="login"&&this.isConnected()?(this.logger.debugEnable?this.logger.debug("protocol::sendCmd: ".concat(pr.cmd)):this.logger.info("protocol::sendCmd: ".concat(hr)),this.doSendCmd(Cr,hr)):(this.logger.warn("protocol::executeCmdTask: ".concat(hr," not connected or login")),this.markCallbackInvalid(wr,Et.newSocketStateError({callFunc:"protocol::executeCmdTask",message:"".concat(hr," not connected or not login")})))},gr.isFrequencyControlled=function(pr){var hr=this.frequencyControlMap&&this.frequencyControlMap[pr];if(hr){if(oe()<hr.from+hr.duration)return!0;delete this.frequencyControlMap[pr]}},gr.doSendCmd=function(pr,hr){var Cr=this,wr=pr.SER,Sr=wr===0?ze.hbCmdTimeout:ze.cmdTimeout,mr=new Date().getTime(),_r=Cr.cmdContentMap[wr];function Ar(Er){Cr.markCallbackInvalid(wr,Er||Et.newSocketStateError({callFunc:"protocol::doSendCmd",message:"ser ".concat(wr," socketSendJson Error")}))}_r&&_r.__exceptionInfo&&(_r.__exceptionInfo.startTime=Cr.reporterHook.getSafeClock()),pr.isAwaitable&&(Cr.timerMap[wr]=le(function(){var Er;pr.SID!==1&&pr.CID!==2&&Cr.detectHeartbeat(),Cr.markCallbackInvalid(wr,Et.newTimeoutError({callFunc:"protocol::doSendCmd",message:"ser ".concat(wr," Timeout Error")})),Cr.reporter.reportTraceStart("exceptions",{user_id:kt.get(Cr,"options.account")||"",trace_id:kt.get(Cr,"socket.socket.sessionid"),start_time:mr,action:2,exception_service:6}),Cr.reporter.reportTraceUpdateV2("exceptions",{code:408,description:"Packet timeout",operation_type:1,target:V(Er="".concat(pr.SID,"-")).call(Er,pr.CID),context:"".concat(pr.SER),net_connect:Cr.checkNetworkAvailable()}),Cr.reporter.reportTraceEnd("exceptions",1)},Sr));try{Cr.socket&&Cr.socket.send&&Cr.socket.binaryType==="arraybuffer"?Cr.socket.send(pr,hr):Cr.socket&&Cr.socket.send?Cr.socket.send(re(pr)):Ar()}catch(Er){Ar(Er)}},gr.getObjWithSer=function(pr){var hr=this.cmdContentMap[pr];return hr&&!hr.isImSyncDataObj&&delete this.cmdContentMap[pr],hr&&kt.copy(hr)},gr.getCallbackWithSer=function(pr){var hr=this.cmdCallbackMap[pr];return hr&&!hr.isImSyncDataCb&&delete this.cmdCallbackMap[pr],hr},gr.getTimerWithSer=function(pr){var hr=this.timerMap[pr];return delete this.timerMap[pr],hr},gr.clearTimerWithSer=function(pr){var hr=this.getTimerWithSer(pr);hr&&clearTimeout(hr)},gr.markCallbackInvalid=function(pr,hr){this.getObjWithSer(pr),this.clearTimerWithSer(pr);var Cr=this.getCallbackWithSer(pr);if(Cr){var wr=Cr.options;le(function(){Cr(hr||Et.newUnknownError({ser:pr}),wr)},0)}},gr.markAllCallbackInvalid=function(pr){var hr=this;try{var Cr,wr;z(Cr=y(this.cmdContentMap)).call(Cr,function(Sr){var mr=hr.getObjWithSer(Sr);if((!mr||!mr.isImSyncDataObj)&&mr&&mr.__exceptionInfo){var _r=mr.__exceptionInfo.target,Ar=mr.__exceptionInfo.context,Er=kt.get(pr,"event.uploadCode")||pr&&pr.code;Er=typeof Er!="number"?415:Er;var sr=kt.get(pr,"event.disconnectReason"),xr=sr?re({disconnect_reason:sr}):pr&&pr.message||"send cmd failed";hr.reporter.reportTraceStart("exceptions",{user_id:kt.get(hr,"options.account")||"",trace_id:kt.get(hr,"socket.socket.sessionid"),start_time:hr.reporterHook.getNTPTime(mr.__exceptionInfo.startTime),action:2,exception_service:6}),hr.reporter.reportTraceUpdateV2("exceptions",{code:Er,description:xr,operation_type:1,target:_r,context:Ar,net_connect:hr.checkNetworkAvailable()}),hr.reporter.reportTraceEnd("exceptions",1),delete mr.__exceptionInfo}}),z(wr=y(this.cmdCallbackMap)).call(wr,function(Sr){hr.markCallbackInvalid(Sr,pr)})}catch(Sr){hr.logger&&hr.logger.error("protocol::markAllCallbackInvalid error: ",Sr)}},gr.getPacketObj=function(pr){var hr=null;if(pr&&pr.raw){var Cr=pr.raw.ser;kt.notundef(Cr)&&(hr=this.getObjWithSer(Cr))}return hr},gr.callPacketAckCallback=function(pr){var hr=this;if(pr&&pr.raw){var Cr=pr.raw.ser;if(kt.notundef(Cr)){hr.clearTimerWithSer(Cr);var wr=hr.getCallbackWithSer(Cr);if(wr){var Sr;wr.originUrl&&pr.obj&&pr.obj.file&&(pr.obj.file._url_safe=pr.obj.file.url,pr.obj.file.url=wr.originUrl,pr.obj.type==="audio"&&(pr.obj.file.mp3Url=wr.originUrl+(~L(Sr=wr.originUrl).call(Sr,"?")?"&":"?")+"audioTrans&type=mp3")),pr.promise?pr.promise.then(function(){wr(pr.error,pr.obj)},function(mr){var _r,Ar;mr.callFunc="protocol::callPacketAckCallback",mr.message=V(_r=V(Ar="Resp Promoise Error: cmd: ".concat(pr.cmd,", ser: ")).call(Ar,Cr,", reason: ")).call(_r,mr.message);var Er=Et.customError("CALLBACK_ACK_ERR",mr);hr.logger.error(`protocol::callPacketAckCallback error stack: 
`.concat(mr.stack||mr.event&&mr.event.stack)),wr(Er,pr.obj,pr.content)}):wr(pr.error,pr.obj,pr.content)}}}},gr.onMessage=function(pr){var hr=this;hr.heartbeat(),hr.parser.parseResponse(pr).then(function(Cr){var wr;if(Cr.notFound&&hr.logger.warn("protocol::onMessage: packet not found ".concat(re(Cr))),Cr.error){var Sr,mr;Cr.error.message=V(Sr="".concat(Cr.cmd," error: ")).call(Sr,Cr.error.message),hr.logger.error(V(mr="protocol::onMessage: packet error ".concat(re(Cr.error),"，raw cmd ")).call(mr,Cr.rawStr));var _r=Cr.raw||{};_r.code!==408&&_r.code!==415&&_r.code!==500||hr.reporter.report("nimErrEvent",{code:_r.code,module:Cr.cmd,accid:hr.account})}Cr.__receiveTime=hr.reporterHook.getSafeClock();var Ar=dr[V(wr="kSyncType".concat(Cr.raw.sid,"_")).call(wr,Cr.raw.cid)];if(Ar){var Er=kt.get(Cr,"raw.r"),sr=1;if(Er&&Er.length>0){var xr=i(Er).call(Er,function(Lr){return g(Lr)}),Nr=kt.get(xr,"0.length");sr=typeof Nr=="number"?Nr:1}hr.reporterHook.emit("reporter/syncItem",Ar,sr)}Cr.frequencyControlDuration&&(hr.logger.error("protocol::onMessage: server freq control ".concat(re(Cr.cmd))),hr.frequencyControlMap=hr.frequencyControlMap||{},hr.frequencyControlMap[Cr.cmd]={from:+new Date,duration:Cr.frequencyControlDuration}),Cr.obj=hr.getPacketObj(Cr),Cr.obj&&Cr.obj.__exceptionInfo&&delete Cr.obj.__exceptionInfo,Cr.cmd!=="heartbeat"&&(hr.logger.debugEnable?hr.logger.debug("protocol::recvCmd: ".concat(Cr.rawStr)):hr.logger.log("protocol::recvCmd: ".concat(Cr.cmd)));var Mr="process"+kt.capFirstLetter(Cr.service);if(hr[Mr])if(Cr.cmd==="syncDone"){if(hr.cmdCallbackMap[Cr.raw.ser]&&hr.cmdCallbackMap[Cr.raw.ser].isImSyncDataCb){var br;hr.cmdCallbackMap[Cr.raw.ser].isImSyncDataCb=!1;var yr=ue(br=function(Lr,Fr){this.checkNosReqNum++,this.getNosOriginUrlReqNum<=0||this.checkNosReqNum>=20?this[Lr](Fr):le(yr,300)}).call(br,hr,Mr,Cr);le(function(){yr.call(hr,Mr,Cr)},10)}}else{Cr.cmd!=="syncTeamMembersDone"&&Cr.cmd!=="syncSuperTeamMembersDone"||hr.cmdCallbackMap[Cr.raw.ser]&&hr.cmdCallbackMap[Cr.raw.ser].isImSyncDataCb&&(hr.cmdCallbackMap[Cr.raw.ser].isImSyncDataCb=!1);try{hr[Mr](Cr)}catch(Lr){var Tr,Br;hr.logger.warn(V(Tr=V(Br="protocol::onMessage: ".concat(Mr,".")).call(Br,Cr.cmd," excute failed ")).call(Tr,Cr.obj?"":", maybe the packet timed out",": "),Lr.message)}}else hr.logger.warn("protocol::onMessage: ".concat(Mr," not found"));hr.callPacketAckCallback(Cr)})},gr.onMiscError=function(pr,hr,Cr){hr&&this.notifyError(pr,hr,Cr)},gr.onCustomError=function(pr,hr){var Cr=Et.customError(pr,hr),wr=hr.message||"未知错误";this.onMiscError(wr,Cr)},gr.notifyError=function(pr,hr,Cr){var wr;this.isConnected()&&(this.logger.error(V(wr="".concat(pr||""," ")).call(wr,this.name),hr,Cr),this.options.onerror(hr,Cr))},gr.emitAPI=function(pr){var hr=pr.type,Cr=pr.obj;this.api.emit(hr,Cr)},t.exports=ar,e(700),e(716),e(717),e(718),e(719),e(720)},function(t,r,e){var n=e(111),g=Function.prototype,y=g.apply,i=g.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(n?i.bind(y):function(){return i.apply(y,arguments)})},function(t,r){t.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(t,r){var e=String;t.exports=function(n){try{return e(n)}catch{return"Object"}}},function(t,r,e){var n=e(7);t.exports=function(g,y){var i=[][g];return!!i&&n(function(){i.call(null,y||function(){return 1},1)})}},function(t,r,e){var n=e(71);t.exports=Array.isArray||function(g){return n(g)=="Array"}},function(t,r,e){var n,g=e(38),y=e(173),i=e(174),k=e(117),L=e(222),$=e(169),V=e(134),z=V("IE_PROTO"),re=function(){},oe=function(ie){return"<script>"+ie+"<\/script>"},le=function(ie){ie.write(oe("")),ie.close();var ae=ie.parentWindow.Object;return ie=null,ae},ue=function(){try{n=new ActiveXObject("htmlfile")}catch{}var ie,ae;ue=typeof document<"u"?document.domain&&n?le(n):((ae=$("iframe")).style.display="none",L.appendChild(ae),ae.src="javascript:",(ie=ae.contentWindow.document).open(),ie.write(oe("document.F=Object")),ie.close(),ie.F):le(n);for(var Fe=i.length;Fe--;)delete ue.prototype[i[Fe]];return ue()};k[z]=!0,t.exports=Object.create||function(ie,ae){var Fe;return ie!==null?(re.prototype=g(ie),Fe=new re,re.prototype=null,Fe[z]=ie):Fe=ue(),ae===void 0?Fe:y.f(Fe,ae)}},function(t,r,e){var n=e(172),g=e(40).f,y=e(65),i=e(31),k=e(341),L=e(21)("toStringTag");t.exports=function($,V,z,re){if($){var oe=z?$:$.prototype;i(oe,L)||g(oe,L,{configurable:!0,value:V}),re&&!n&&y(oe,"toString",k)}}},function(t,r,e){var n=e(47),g=e(163),y=e(105),i=e(103),k=e(40).f,L=e(176),$=e(177),V=e(57),z=e(29),re=i.set,oe=i.getterFor("Array Iterator");t.exports=L(Array,"Array",function(ue,ie){re(this,{type:"Array Iterator",target:n(ue),index:0,kind:ie})},function(){var ue=oe(this),ie=ue.target,ae=ue.kind,Fe=ue.index++;return!ie||Fe>=ie.length?(ue.target=void 0,$(void 0,!0)):$(ae=="keys"?Fe:ae=="values"?ie[Fe]:[Fe,ie[Fe]],!1)},"values");var le=y.Arguments=y.Array;if(g("keys"),g("values"),g("entries"),!V&&z&&le.name!=="values")try{k(le,"name",{value:"values"})}catch{}},function(t,r,e){var n=e(509),g=e(514);t.exports=function(y,i){var k=g(y,i);return n(k)?k:void 0}},function(t,r,e){var n=e(23),g=e(66),y=e(580),i=e(582),k=e(588),L={},$=g.f;function V(ie){var ae=ie.upload=(ie.headers||g.o)["Content-Type"]==="multipart/form-data",Fe=!1;try{Fe=(location.protocol+"//"+location.host).toLowerCase()!==g.url2origin(ie.url)}catch{}return ie.cors=Fe,ae||Fe||ie.mode?function(de){var Ie=de.mode,Ve=y,kt=g.getGlobal();return!kt.FormData&&kt.document&&(Ie="iframe"),Ie==="iframe"&&(Ve=de.upload?i:k),new Ve(de)}(ie):new y(ie)}function z(ie,ae,Fe){var de=L[ie];if(de){ae==="onload"&&de.result&&(Fe=function(Ve,kt){kt={data:kt};var At=Ve.result.headers;return At&&(kt.headers=Ve.req.header(At)),kt}(de,Fe)),function(Ve){var kt=L[Ve];kt&&(kt.req.destroy(),delete L[Ve])}(ie);var Ie={type:ae,result:Fe};$(Ie),Ie.stopped||de[ae](Ie.result)}}function re(ie,ae){z(ie,"onload",ae)}function oe(ie,ae){z(ie,"onerror",ae)}function le(ie,ae){var Fe=g.genUrlSep(ie);return ae=ae||"",g.isObject(ae)&&(ae=g.object2query(ae)),ae&&(ie+=Fe+ae),ie}function ue(ie,ae){ae=ae||{};var Fe=g.uniqueID(),de={result:ae.result,onload:ae.onload||g.f,onerror:ae.onerror||g.f};L[Fe]=de,ae.onload=n(re).call(re,null,Fe),ae.onerror=n(oe).call(oe,null,Fe),ae.query&&(ie=le(ie,ae.query));var Ie=ae.method||"";return Ie&&!/get/i.test(Ie)||!ae.data||(ie=le(ie,ae.data),ae.data=null),ae.url=ie,de.req=V(ae),Fe}ue.filter=function(ie){g.isFunction(ie)&&($=ie)},ue.abort=function(ie){var ae=L[ie];ae&&ae.req&&ae.req.abort()},t.exports=ue},function(t,r,e){t.exports=e(583)},function(t,r){t.exports=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}},function(t,r,e){t.exports=e(615)},function(t,r,e){(function(n){var g;t.exports=(g=g||function(y,i){var k;if(typeof window<"u"&&window.crypto&&(k=window.crypto),typeof self<"u"&&self.crypto&&(k=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(k=globalThis.crypto),!k&&typeof window<"u"&&window.msCrypto&&(k=window.msCrypto),!k&&n!==void 0&&n.crypto&&(k=n.crypto),!k)try{k=e(914)}catch{}var L=function(){if(k){if(typeof k.getRandomValues=="function")try{return k.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof k.randomBytes=="function")try{return k.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},$=Object.create||function(){function Ie(){}return function(Ve){var kt;return Ie.prototype=Ve,kt=new Ie,Ie.prototype=null,kt}}(),V={},z=V.lib={},re=z.Base={extend:function(Ie){var Ve=$(this);return Ie&&Ve.mixIn(Ie),Ve.hasOwnProperty("init")&&this.init!==Ve.init||(Ve.init=function(){Ve.$super.init.apply(this,arguments)}),Ve.init.prototype=Ve,Ve.$super=this,Ve},create:function(){var Ie=this.extend();return Ie.init.apply(Ie,arguments),Ie},init:function(){},mixIn:function(Ie){for(var Ve in Ie)Ie.hasOwnProperty(Ve)&&(this[Ve]=Ie[Ve]);Ie.hasOwnProperty("toString")&&(this.toString=Ie.toString)},clone:function(){return this.init.prototype.extend(this)}},oe=z.WordArray=re.extend({init:function(Ie,Ve){Ie=this.words=Ie||[],this.sigBytes=Ve??4*Ie.length},toString:function(Ie){return(Ie||ue).stringify(this)},concat:function(Ie){var Ve=this.words,kt=Ie.words,At=this.sigBytes,ze=Ie.sigBytes;if(this.clamp(),At%4)for(var Et=0;Et<ze;Et++){var cr=kt[Et>>>2]>>>24-Et%4*8&255;Ve[At+Et>>>2]|=cr<<24-(At+Et)%4*8}else for(var er=0;er<ze;er+=4)Ve[At+er>>>2]=kt[er>>>2];return this.sigBytes+=ze,this},clamp:function(){var Ie=this.words,Ve=this.sigBytes;Ie[Ve>>>2]&=4294967295<<32-Ve%4*8,Ie.length=y.ceil(Ve/4)},clone:function(){var Ie=re.clone.call(this);return Ie.words=this.words.slice(0),Ie},random:function(Ie){for(var Ve=[],kt=0;kt<Ie;kt+=4)Ve.push(L());return new oe.init(Ve,Ie)}}),le=V.enc={},ue=le.Hex={stringify:function(Ie){for(var Ve=Ie.words,kt=Ie.sigBytes,At=[],ze=0;ze<kt;ze++){var Et=Ve[ze>>>2]>>>24-ze%4*8&255;At.push((Et>>>4).toString(16)),At.push((15&Et).toString(16))}return At.join("")},parse:function(Ie){for(var Ve=Ie.length,kt=[],At=0;At<Ve;At+=2)kt[At>>>3]|=parseInt(Ie.substr(At,2),16)<<24-At%8*4;return new oe.init(kt,Ve/2)}},ie=le.Latin1={stringify:function(Ie){for(var Ve=Ie.words,kt=Ie.sigBytes,At=[],ze=0;ze<kt;ze++){var Et=Ve[ze>>>2]>>>24-ze%4*8&255;At.push(String.fromCharCode(Et))}return At.join("")},parse:function(Ie){for(var Ve=Ie.length,kt=[],At=0;At<Ve;At++)kt[At>>>2]|=(255&Ie.charCodeAt(At))<<24-At%4*8;return new oe.init(kt,Ve)}},ae=le.Utf8={stringify:function(Ie){try{return decodeURIComponent(escape(ie.stringify(Ie)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ie){return ie.parse(unescape(encodeURIComponent(Ie)))}},Fe=z.BufferedBlockAlgorithm=re.extend({reset:function(){this._data=new oe.init,this._nDataBytes=0},_append:function(Ie){typeof Ie=="string"&&(Ie=ae.parse(Ie)),this._data.concat(Ie),this._nDataBytes+=Ie.sigBytes},_process:function(Ie){var Ve,kt=this._data,At=kt.words,ze=kt.sigBytes,Et=this.blockSize,cr=ze/(4*Et),er=(cr=Ie?y.ceil(cr):y.max((0|cr)-this._minBufferSize,0))*Et,or=y.min(4*er,ze);if(er){for(var dr=0;dr<er;dr+=Et)this._doProcessBlock(At,dr);Ve=At.splice(0,er),kt.sigBytes-=or}return new oe.init(Ve,or)},clone:function(){var Ie=re.clone.call(this);return Ie._data=this._data.clone(),Ie},_minBufferSize:0}),de=(z.Hasher=Fe.extend({cfg:re.extend(),init:function(Ie){this.cfg=this.cfg.extend(Ie),this.reset()},reset:function(){Fe.reset.call(this),this._doReset()},update:function(Ie){return this._append(Ie),this._process(),this},finalize:function(Ie){return Ie&&this._append(Ie),this._doFinalize()},blockSize:16,_createHelper:function(Ie){return function(Ve,kt){return new Ie.init(kt).finalize(Ve)}},_createHmacHelper:function(Ie){return function(Ve,kt){return new de.HMAC.init(Ie,kt).finalize(Ve)}}}),V.algo={});return V}(Math),g)}).call(this,e(77))},function(t,r,e){var n=e(29),g=e(20),y=e(157),i=e(84),k=e(47),L=e(130),$=e(31),V=e(214),z=Object.getOwnPropertyDescriptor;r.f=n?z:function(re,oe){if(re=k(re),oe=L(oe),V)try{return z(re,oe)}catch{}if($(re,oe))return i(!g(y.f,re,oe),re[oe])}},function(t,r){t.exports=function(e){return e==null}},function(t,r,e){var n=e(100),g=e(7);t.exports=!!Object.getOwnPropertySymbols&&!g(function(){var y=Symbol();return!String(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(t,r,e){var n,g,y=e(16),i=e(72),k=y.process,L=y.Deno,$=k&&k.versions||L&&L.version,V=$&&$.v8;V&&(g=(n=V.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!g&&i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(g=+n[1]),t.exports=g},function(t,r,e){var n=e(130),g=e(40),y=e(84);t.exports=function(i,k,L){var $=n(k);$ in i?g.f(i,$,y(0,L)):i[$]=L}},function(t,r){},function(t,r,e){var n,g,y,i=e(342),k=e(16),L=e(30),$=e(65),V=e(31),z=e(168),re=e(134),oe=e(117),le=k.TypeError,ue=k.WeakMap;if(i||z.state){var ie=z.state||(z.state=new ue);ie.get=ie.get,ie.has=ie.has,ie.set=ie.set,n=function(Fe,de){if(ie.has(Fe))throw le("Object already initialized");return de.facade=Fe,ie.set(Fe,de),de},g=function(Fe){return ie.get(Fe)||{}},y=function(Fe){return ie.has(Fe)}}else{var ae=re("state");oe[ae]=!0,n=function(Fe,de){if(V(Fe,ae))throw le("Object already initialized");return de.facade=Fe,$(Fe,ae,de),de},g=function(Fe){return V(Fe,ae)?Fe[ae]:{}},y=function(Fe){return V(Fe,ae)}}t.exports={set:n,get:g,has:y,enforce:function(Fe){return y(Fe)?g(Fe):n(Fe,{})},getterFor:function(Fe){return function(de){var Ie;if(!L(de)||(Ie=g(de)).type!==Fe)throw le("Incompatible receiver, "+Fe+" required");return Ie}}}},function(t,r,e){var n=e(13);t.exports=n([].slice)},function(t,r){t.exports={}},function(t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}}},function(t,r,e){var n=e(16);t.exports=n.Promise},function(t,r){t.exports=function(e){return e!=null&&typeof e=="object"}},function(t,r,e){var n=e(152),g=e(56),y=e(3),i=e(22),k=e(23),L=e(4),$=e(43),V=e(15),z=e(2),re=e(5),oe=e(11),le=e(125),ue=e(34),ie=e(44),ae=e(45),Fe=e(153),de=e(154),Ie=e(122);function Ve(lr){var nr=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ur,ar=Ie(lr);if(nr){var gr=Ie(this).constructor;ur=n(ar,arguments,gr)}else ur=ar.apply(this,arguments);return de(this,ur)}}var kt=e(141),At=e(0),ze=e(12).heartbeatInterval,Et=e(165).V2NIMLoginStatus,cr=e(12),er={kSyncAction5_1:0,kSyncAction5_2:1,kSyncAction5_3:2},or={kKnown:-1,kSucceed:0,kFailed:1,kAborted:2,kCanceled:3},dr=function(lr){Fe(ur,lr);var nr=Ve(ur);function ur(ar){var gr,pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ie(this,ur),(gr=nr.call(this)).clientProto=ar,gr.logger=ar.logger,gr.reporter=ar.reporter,gr.timer=null,gr.setClientOrigin(),gr.serverOrigin={timeStamp:null,rtt:null,baseTimeStamp:null},gr.tolerantRTT=pr.tolerantRTT||3e3,gr.bestRTT=pr.bestRTT||100,gr.maxChances=pr.maxChances||10,gr.isSettingNTP=!1,gr.currentChance=0,gr.syncTraceData={},gr.syncTraceMap={},gr.syncTraceLastItem={},gr.uploadTraceData={},gr.setMonitorForSync(),gr.setMonitorForResources(),gr}return ae(ur,[{key:"hasOriginTimetick",value:function(){return!!this.serverOrigin.timeStamp}},{key:"setOriginTimetick",value:function(){var ar=this,gr=this.clientProto.options;if((typeof At.get(gr,"privateConf.isDataReportEnable")=="boolean"?gr.privateConf.isDataReportEnable:cr.privateConf.isDataReportEnable)&&cr.isBrowser&&performance&&performance.now&&!(this.isSettingNTP||this.currentChance>=this.maxChances)){this.isSettingNTP=!0,this.currentChance++,clearTimeout(this.timer),this.timer=null;var pr="ReporterHook::setOriginTimetick:",hr=g();return this.logger.info("".concat(pr," getServerTime start, times ").concat(this.currentChance)),new y(function(Cr){ar.clientProto.sendCmd("getServerTime",{},function(wr,Sr){if(ar.isSettingNTP=!1,wr){var mr;ar.logger.warn("".concat(pr," Calculate Delay time, getServerTime error"),wr),ar.clientProto.statusProtector.getLoginStatus()===Et.V2NIM_LOGIN_STATUS_LOGINED&&(ar.timer=i(k(mr=ar.setOriginTimetick).call(mr,ar),ze)),Cr()}else{if(!Sr)return ar.logger.warn("".concat(pr," Calculate Delay time, getServerTime not correct")),void Cr();var _r,Ar=g()-hr;if(Ar>ar.tolerantRTT)ar.logger.warn("".concat(pr," Denied, cause of exceeding the maximum tolerance range of RTT: ").concat(Ar)),ar.timer=i(k(_r=ar.setOriginTimetick).call(_r,ar),ze);else if(Ar>ar.bestRTT){var Er,sr,xr;ar.serverOrigin.rtt&&Ar>=ar.serverOrigin.rtt?ar.logger.info("".concat(pr," Denied, cause of current.RTT >= serverOrigin.RTT: ").concat(Ar)):(ar.setServerOrigin(Ar,Sr),ar.logger.info(L(sr=L(xr="".concat(pr," Accept within maximum tolerance range of RTT: ").concat(Ar,", ntpTimestamp: ")).call(xr,ar.serverOrigin.timeStamp,", localClock: ")).call(sr,ar.serverOrigin.baseTimeStamp))),ar.timer=i(k(Er=ar.setOriginTimetick).call(Er,ar),ze)}else{var Nr,Mr;ar.setServerOrigin(Ar,Sr),ar.logger.info(L(Nr=L(Mr="".concat(pr," Accept within best RTT: ").concat(Ar,", ntpTimestamp: ")).call(Mr,ar.serverOrigin.timeStamp,", localClock: ")).call(Nr,ar.serverOrigin.baseTimeStamp))}Cr()}})})}}},{key:"getNTPTime",value:function(ar){if(typeof ar!="number"&&(ar=this.getSafeClock()),this.serverOrigin.timeStamp){var gr=$(ar-this.serverOrigin.baseTimeStamp);return this.serverOrigin.timeStamp+gr}var pr=$(ar-this.clientOrigin.baseTimeStamp);return this.clientOrigin.timeStamp+pr}},{key:"getSafeClock",value:function(){return cr.isBrowser&&performance&&performance.now?performance.now():g()}},{key:"setMonitorForSync",value:function(){var ar=this,gr="ReporterHook::setMonitorForSync:";this.on("reporter/syncStart",function(){ar.logger.info("".concat(gr," sync start")),ar.syncTraceData={user_id:ar.clientProto.account,trace_id:At.get(ar.clientProto,"socket.socket.sessionid"),action:er.kSyncAction5_1,sync_begin_time:ar.getSafeClock(),sync_end_time:0,sync_duration:0,overall_duration:0,extension:[]}}),this.on("reporter/syncRecv",function(){ar.syncTraceData.user_id&&(ar.logger.info("".concat(gr," sync receive packet")),ar.syncTraceData.sync_end_time=ar.getSafeClock(),ar.syncTraceData.sync_duration=$(ar.syncTraceData.sync_end_time-ar.syncTraceData.sync_begin_time))}),this.on("reporter/syncItem",function(pr,hr){var Cr;if(typeof pr=="number"&&ar.syncTraceData.user_id){ar.logger.info(L(Cr="".concat(gr," receive sync item: ").concat(pr,", total: ")).call(Cr,hr));var wr=ar.getSafeClock();ar.syncTraceMap[pr]=ar.syncTraceMap[pr]?ar.syncTraceMap[pr]:{sync_type:pr,times:0,total:0,sync_duration:0,proc_duration:0,description:"",items:[]};var Sr={total:hr,pre_item_recv_time:ar.syncTraceLastItem.cur_item_recv_time?ar.syncTraceLastItem.cur_item_recv_time:ar.syncTraceData.sync_begin_time,cur_item_recv_time:wr};ar.syncTraceMap[pr].items.push(Sr),ar.syncTraceLastItem=Sr}}),this.on("reporter/syncItemComplete",function(pr){var hr;if(typeof pr=="number"&&ar.syncTraceData.user_id){var Cr=ar.syncTraceMap[pr];if(Cr){ar.logger.info("".concat(gr," sync item ").concat(pr," callback done"));var wr=V(hr=Cr.items).call(hr,function(Sr){return!Sr.callback_time});wr.length!==0&&(wr[0].callback_time=ar.getSafeClock())}}}),this.on("reporter/syncComplete",function(){var pr;ar.syncTraceData.user_id&&(ar.logger.info("".concat(gr," sync complete")),z(pr=re(ar.syncTraceMap)).call(pr,function(hr){var Cr,wr=oe(Cr=ar.syncTraceMap[hr].items).call(Cr,function(mr){return{total:mr.total,pre_item_recv_time:ar.getNTPTime(mr.pre_item_recv_time),cur_item_recv_time:ar.getNTPTime(mr.cur_item_recv_time),callback_time:ar.getNTPTime(mr.callback_time)}}),Sr=le(wr).call(wr,function(mr,_r){return mr.times+=1,mr.total+=_r.total,mr.sync_duration+=_r.cur_item_recv_time-_r.pre_item_recv_time,mr.proc_duration+=_r.callback_time-_r.cur_item_recv_time,mr},{times:0,total:0,sync_duration:0,proc_duration:0});ar.syncTraceMap[hr].items=wr,ue(ar.syncTraceMap[hr],Sr),ar.syncTraceData.extension.push(ar.syncTraceMap[hr])}),ar.syncTraceData.sync_begin_time=ar.getNTPTime(ar.syncTraceData.sync_begin_time),ar.syncTraceData.sync_end_time=ar.getNTPTime(ar.syncTraceData.sync_end_time),ar.syncTraceData.overall_duration=ar.getNTPTime()-ar.syncTraceData.sync_begin_time,ar.reporter.report("nim_sdk_sync",ar.syncTraceData),ar.syncTraceData={},ar.syncTraceMap={})})}},{key:"setMonitorForResources",value:function(){var ar=this,gr="ReporterHook::setMonitorForResources:";this.on("reporter/uploadStart",function(){ar.logger.info("".concat(gr," upload start")),ar.uploadTraceData={user_id:ar.clientProto.account,trace_id:At.get(ar.clientProto,"socket.socket.sessionid"),action:0,duration:0,start_time:ar.getSafeClock(),offset:0,full_size:0,transferred_size:0}}),this.on("reporter/uploadUpdate",function(){var pr,hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ar.uploadTraceData.user_id&&(ar.logger.info("".concat(gr," upload update"),hr),z(pr=re(hr)).call(pr,function(Cr){ar.uploadTraceData[Cr]=hr[Cr]}))}),this.on("reporter/uploadEnd",function(){var pr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:or.kKnown;ar.uploadTraceData.user_id&&(ar.logger.info("".concat(gr," upload end cause of ").concat(pr)),ar.uploadTraceData.state=pr,ar.uploadTraceData.start_time=ar.getNTPTime(ar.uploadTraceData.start_time),ar.uploadTraceData.duration=ar.getNTPTime(ar.getSafeClock())-ar.uploadTraceData.start_time,ar.reporter.report("nim_sdk_resources",ar.uploadTraceData),ar.uploadTraceData={})})}},{key:"destroy",value:function(){this.reset(),this.removeAllListeners(),this.logger.info("ReporterHook::destroy: complete")}},{key:"reset",value:function(){this.logger.info("ReporterHook::reset"),this.serverOrigin={},this.setClientOrigin(),this.currentChance=0,this.timer&&clearTimeout(this.timer),this.syncTraceData={},this.syncTraceMap={},this.syncTraceLastItem={},this.uploadTraceData={}}},{key:"setClientOrigin",value:function(){this.clientOrigin={timeStamp:g(),baseTimeStamp:this.getSafeClock()}}},{key:"setServerOrigin",value:function(ar,gr){this.serverOrigin={timeStamp:gr+$(ar/2),rtt:ar,baseTimeStamp:this.getSafeClock()}}}]),ur}(kt);t.exports={EMSyncAction:er,EMSyncType:{kSyncType3_8:30008,kSyncType3_109:30109,kSyncType4_4:40004,kSyncType4_6:40006,kSyncType4_9:40009,kSyncType4_12:40012,kSyncType4_13:40013,kSyncType4_14:40014,kSyncType4_16:40016,kSyncType4_17:40017,kSyncType4_18:40018,kSyncType4_19:40019,kSyncType4_20:40020,kSyncType4_21:40021,kSyncType4_23:40023,kSyncType4_24:40024,kSyncType4_100:40100,kSyncType4_101:40101,kSyncType7_15:70015,kSyncType8_109:80109,kSyncType8_126:80126,kSyncType12_5:12005,kSyncType12_6:12006,kSyncType15_13:15013,kSyncType21_109:21109,kSyncType21_111:21111},ReporterHook:dr,EMExceptionState:or,EMResourceUploadWay:{kResourceUploadWayNOS:0,kResourceUploadWayAWSPlugin:1,kResourceUploadWayNOSPlugin:2}}},function(t,r,e){var n=e(8),g=e(9),y=e(2),i=e(4),k=e(95),L=e(15),$=e(68),V=e(78),z=e(64),re=e(28);function oe(ae,Fe){var de=V!==void 0&&z(ae)||ae["@@iterator"];if(!de){if(re(ae)||(de=function(Et,cr){var er;if(Et){if(typeof Et=="string")return le(Et,cr);var or=g(er=Object.prototype.toString.call(Et)).call(er,8,-1);if(or==="Object"&&Et.constructor&&(or=Et.constructor.name),or==="Map"||or==="Set")return $(Et);if(or==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or))return le(Et,cr)}}(ae))||Fe&&ae&&typeof ae.length=="number"){de&&(ae=de);var Ie=0,Ve=function(){};return{s:Ve,n:function(){return Ie>=ae.length?{done:!0}:{done:!1,value:ae[Ie++]}},e:function(Et){throw Et},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kt,At=!0,ze=!1;return{s:function(){de=de.call(ae)},n:function(){var Et=de.next();return At=Et.done,Et},e:function(Et){ze=!0,kt=Et},f:function(){try{At||de.return==null||de.return()}finally{if(ze)throw kt}}}}function le(ae,Fe){(Fe==null||Fe>ae.length)&&(Fe=ae.length);for(var de=0,Ie=new Array(Fe);de<Fe;de++)Ie[de]=ae[de];return Ie}var ue=e(12),ie={genUrlSep:function(ae){return n(ae=""+ae).call(ae,"?")===-1?"?imageView&":"&"},urlQuery2Object:function(ae){if(Object.prototype.toString.call(ae)!=="[object String]"||ae==="")return{};var Fe=n(ae).call(ae,"?");if(Fe!==-1){var de=g(ae).call(ae,Fe+1).split("&"),Ie={};return y(de).call(de,function(Ve){if(~n(Ve).call(Ve,"=")){var kt=Ve.split("=");Ie[kt[0]]=decodeURIComponent(kt[1])}else Ie[Ve]=""}),Ie}},url2object:function(ae){Object.prototype.toString.call(ae)!=="[object String]"&&(ae="");var Fe=n(ae=ae||"").call(ae,"https")>=0?"https://":"http://",de=ae.replace(Fe,"");n(de).call(de,"?")>=0&&(de=de.substring(0,n(de).call(de,"?")));var Ie=de.split("/");de=Ie[0];var Ve="";if(Ie.length>0&&(Ve=g(Ie).call(Ie,1).join("/")),n(ae).call(ae,"?")===-1)return{protocol:Fe,hostname:de,path:Ve,query:{}};var kt=ae.substr(n(ae).call(ae,"?")+1).split("&"),At={};return y(kt).call(kt,function(ze){if(n(ze).call(ze,"=")>0){var Et=ze.split("=");At[Et[0]]=decodeURIComponent(Et[1])}else At[ze]=""}),{protocol:Fe,hostname:de,path:Ve,query:At}},object2url:function(ae){var Fe,de=ae.protocol,Ie=ae.hostname,Ve=ae.path,kt=ae.query;de=de||"http://",Ie=Ie||"",Ve&&(Ie=i(Fe="".concat(Ie,"/")).call(Fe,Ve)),kt=kt||{};var At,ze,Et,cr=[];for(var er in kt){var or;er!=="imageView"&&cr.push(i(or="".concat(er,"=")).call(or,encodeURIComponent(kt[er])))}return cr.length>0?i(At=i(ze="".concat(de)).call(ze,Ie,"?imageView&")).call(At,cr.join("&")):i(Et="".concat(de)).call(Et,Ie)},genPrivateUrl:function(ae,Fe,de){if(Fe&&Fe.length){var Ie,Ve=oe(Fe);try{for(Ve.s();!(Ie=Ve.n()).done;){var kt=Ie.value;if(n(ae).call(ae,kt)>=0)return kt!==de&&(ae=ae.replace(kt,de)),ae;if(n(ae).call(ae,kt)>=0&&kt===de)return ae}}catch(mr){Ve.e(mr)}finally{Ve.f()}}var At,ze,Et=ie.url2object(ae),cr=Et.hostname,er=Et.path,or=ue.downloadUrl,dr=ue.downloadHostList,lr=ue.nosCdnEnable,nr=ue.serverNosConfig.cdnDomain,ur=decodeURIComponent(ue.serverNosConfig.objectPrefix),ar=decodeURIComponent(er),gr=n(ar).call(ar,ur);if(nr&&gr>-1&&lr)return i(At=i(ze="".concat(Et.protocol)).call(ze,nr,"/")).call(At,g(ar).call(ar,gr));if(k(dr).call(dr,cr)&&k(er).call(er,"/")){var pr=n(er).call(er,"/"),hr=er.substring(0,pr),Cr=er.substring(pr+1);return or.replace("{bucket}",hr).replace("{object}",Cr)}var wr=L(dr).call(dr,function(mr){return typeof cr=="string"&&k(cr).call(cr,mr)})[0],Sr=wr?cr.replace(wr,"").replace(/\W/g,""):null;return Sr?or.replace("{bucket}",Sr).replace("{object}",er):ae}};t.exports=ie},function(t,r,e){var n=e(7);t.exports=!n(function(){var g=(function(){}).bind();return typeof g!="function"||g.hasOwnProperty("prototype")})},function(t,r,e){var n=e(98),g=TypeError;t.exports=function(y){if(n(y))throw g("Can't call method on "+y);return y}},function(t,r,e){var n=e(57),g=e(168);(t.exports=function(y,i){return g[y]||(g[y]=i!==void 0?i:{})})("versions",[]).push({version:"3.27.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,r,e){var n=e(115),g=Math.max,y=Math.min;t.exports=function(i,k){var L=n(i);return L<0?g(L+k,0):y(L,k)}},function(t,r,e){var n=e(328);t.exports=function(g){var y=+g;return y!=y||y===0?0:n(y)}},function(t,r,e){var n=e(7),g=e(21),y=e(100),i=g("species");t.exports=function(k){return y>=51||!n(function(){var L=[];return(L.constructor={})[i]=function(){return{foo:1}},L[k](Boolean).foo!==1})}},function(t,r){t.exports={}},function(t,r,e){var n=e(234).charAt,g=e(58),y=e(103),i=e(176),k=e(177),L=y.set,$=y.getterFor("String Iterator");i(String,"String",function(V){L(this,{type:"String Iterator",string:g(V),index:0})},function(){var V,z=$(this),re=z.string,oe=z.index;return oe>=re.length?k(void 0,!0):(V=n(re,oe),z.index+=V.length,k(V,!1))})},function(t,r,e){var n=e(71),g=e(16);t.exports=n(g.process)=="process"},function(t,r,e){var n=e(16),g=e(107),y=e(17),i=e(215),k=e(219),L=e(21),$=e(406),V=e(249),z=e(57),re=e(100),oe=g&&g.prototype,le=L("species"),ue=!1,ie=y(n.PromiseRejectionEvent),ae=i("Promise",function(){var Fe=k(g),de=Fe!==String(g);if(!de&&re===66||z&&(!oe.catch||!oe.finally))return!0;if(!re||re<51||!/native code/.test(Fe)){var Ie=new g(function(kt){kt(1)}),Ve=function(kt){kt(function(){},function(){})};if((Ie.constructor={})[le]=Ve,!(ue=Ie.then(function(){})instanceof Ve))return!0}return!de&&($||V)&&!ie});t.exports={CONSTRUCTOR:ae,REJECTION_EVENT:ie,SUBCLASSING:ue}},function(t,r,e){t.exports=e(429)},function(t,r,e){var n=e(197),g=e(159),y=e(287);function i(k){var L;return t.exports=i=n?g(L=y).call(L):function($){return $.__proto__||y($)},t.exports.__esModule=!0,t.exports.default=t.exports,i(k)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(6),g=e(307),y=e(24),i=e(110).genPrivateUrl,k=e(0),L=k.notundef,$=k.exist,V=e(199),z=e(303),re=z.typeMap;function oe(le){le.resend?(k.verifyOptions(le,"idClient","msg::Message"),this.idClient=le.idClient):this.idClient=k.guid(),this.type=re[le.type],this.resend=le.resend?1:0,L(le.subType)&&(k.isInt(+le.subType)&&+le.subType>0?this.subType=+le.subType:k.onParamError("subType只能是大于0的整数","msg::Message")),L(le.custom)&&(y(le.custom)==="object"?this.custom=n(le.custom):this.custom=""+le.custom),L(le.text)&&(this.body=""+le.text),L(le.body)&&(this.body=""+le.body),L(le.yidunEnable)&&(this.yidunEnable=le.yidunEnable?1:0),L(le.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=le.antiSpamUsingYidun?1:0),L(le.antiSpamContent)&&(y(le.antiSpamContent)==="object"?this.antiSpamContent=n(le.antiSpamContent):this.antiSpamContent=""+le.antiSpamContent),L(le.antiSpamBusinessId)&&(y(le.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=n(le.antiSpamBusinessId):this.antiSpamBusinessId=""+le.antiSpamBusinessId),L(le.yidunAntiCheating)&&(this.yidunAntiCheating=le.yidunAntiCheating+""),L(le.skipHistory)&&(this.skipHistory=le.skipHistory?1:0),L(le.highPriority)&&(this.highPriority=le.highPriority?1:0),L(le.clientAntiSpam)&&(this.clientAntiSpam=le.clientAntiSpam?1:0),L(le.env)&&(this.env=le.env),L(le.notifyTargetTags)&&(this.notifyTargetTags=le.notifyTargetTags),L(le.yidunAntiSpamExt)&&(this.yidunAntiSpamExt=le.yidunAntiSpamExt),(L(le.loc_x)||L(le.loc_y)||L(le.loc_z))&&(this.loc_x=le.loc_x,this.loc_y=le.loc_y,this.loc_z=le.loc_z)}oe.validTypes=z.validTypes,k.merge(oe.prototype,z.prototype),oe.getType=z.getType,oe.setFlow=z.setFlow,oe.reverse=function(le){var ue=k.filterObj(le,"chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");return L(ue.fromAvatar)&&(ue.fromAvatar=i(ue.fromAvatar)),ue=k.merge(ue,{fromClientType:V.reverseType(le.fromClientType),time:+le.time,type:oe.getType(le),text:$(le.body)?le.body:le.text||"",resend:+le.resend==1}),L(ue.userUpdateTime)&&(ue.userUpdateTime=+ue.userUpdateTime),L(le.callbackExt)&&(ue.callbackExt=le.callbackExt),L(le.subType)&&(ue.subType=+le.subType),L(le.yidunAntiSpamRes)&&(ue.yidunAntiSpamRes=le.yidunAntiSpamRes),L(le.loc_x)&&(ue.x=g(le.loc_x),ue.y=g(le.loc_y),ue.z=g(le.loc_z)),L(le.toAccids)&&(ue.toAccids=le.toAccids),ue.status=ue.status||"success",ue},oe.setExtra=function(le,ue){z.setFlow(le,ue)},t.exports=oe},function(t,r,e){var n=e(221),g=e(174);t.exports=Object.keys||function(y){return n(y,g)}},function(t,r,e){t.exports=e(450)},function(t,r,e){var n=e(181),g=e(510),y=e(511),i=n?n.toStringTag:void 0;t.exports=function(k){return k==null?k===void 0?"[object Undefined]":"[object Null]":i&&i in Object(k)?g(k):y(k)}},function(t,r,e){var n=e(602),g=e(194),y=e(609);t.exports=function(i,k){if(i==null)return{};var L,$,V=y(i,k);if(n){var z=n(i);for($=0;$<z.length;$++)L=z[$],g(k).call(k,L)>=0||Object.prototype.propertyIsEnumerable.call(i,L)&&(V[L]=i[L])}return V},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(576)},function(t,r,e){var n=e(13),g=e(7),y=e(71),i=Object,k=n("".split);t.exports=g(function(){return!i("z").propertyIsEnumerable(0)})?function(L){return y(L)=="String"?k(L,""):i(L)}:i},function(t,r,e){var n=e(325),g=e(131);t.exports=function(y){var i=n(y,"string");return g(i)?i:i+""}},function(t,r,e){var n=e(33),g=e(17),y=e(18),i=e(213),k=Object;t.exports=i?function(L){return typeof L=="symbol"}:function(L){var $=n("Symbol");return g($)&&y($.prototype,k(L))}},function(t,r,e){var n=e(13),g=0,y=Math.random(),i=n(1 .toString);t.exports=function(k){return"Symbol("+(k===void 0?"":k)+")_"+i(++g+y,36)}},function(t,r,e){var n=e(13),g=e(7),y=e(17),i=e(73),k=e(33),L=e(219),$=function(){},V=[],z=k("Reflect","construct"),re=/^\s*(?:class|function)\b/,oe=n(re.exec),le=!re.exec($),ue=function(ae){if(!y(ae))return!1;try{return z($,V,ae),!0}catch{return!1}},ie=function(ae){if(!y(ae))return!1;switch(i(ae)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return le||!!oe(re,L(ae))}catch{return!0}};ie.sham=!0,t.exports=!z||g(function(){var ae;return ue(ue.call)||!ue(Object)||!ue(function(){ae=!0})||ae})?ie:ue},function(t,r,e){var n=e(113),g=e(132),y=n("keys");t.exports=function(i){return y[i]||(y[i]=g(i))}},function(t,r,e){var n=e(221),g=e(174).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(y){return n(y,g)}},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,e){var n=e(21);r.f=n},function(t,r,e){var n=e(31),g=e(17),y=e(46),i=e(134),k=e(233),L=i("IE_PROTO"),$=Object,V=$.prototype;t.exports=k?$.getPrototypeOf:function(z){var re=y(z);if(n(re,L))return re[L];var oe=re.constructor;return g(oe)&&re instanceof oe?oe.prototype:re instanceof $?V:null}},function(t,r,e){var n=e(13),g=e(38),y=e(362);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,k=!1,L={};try{(i=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(L,[]),k=L instanceof Array}catch{}return function($,V){return g($),y(V),k?i($,V):$.__proto__=V,$}}():void 0)},function(t,r,e){var n=e(73),g=e(167),y=e(98),i=e(105),k=e(21)("iterator");t.exports=function(L){if(!y(L))return g(L,k)||g(L,"@@iterator")||i[n(L)]}},function(t,r,e){var n=Object.prototype.hasOwnProperty,g="~";function y(){}function i(V,z,re){this.fn=V,this.context=z,this.once=re||!1}function k(V,z,re,oe,le){if(typeof re!="function")throw new TypeError("The listener must be a function");var ue=new i(re,oe||V,le),ie=g?g+z:z;return V._events[ie]?V._events[ie].fn?V._events[ie]=[V._events[ie],ue]:V._events[ie].push(ue):(V._events[ie]=ue,V._eventsCount++),V}function L(V,z){--V._eventsCount==0?V._events=new y:delete V._events[z]}function $(){this._events=new y,this._eventsCount=0}Object.create&&(y.prototype=Object.create(null),new y().__proto__||(g=!1)),$.prototype.eventNames=function(){var V,z,re=[];if(this._eventsCount===0)return re;for(z in V=this._events)n.call(V,z)&&re.push(g?z.slice(1):z);return Object.getOwnPropertySymbols?re.concat(Object.getOwnPropertySymbols(V)):re},$.prototype.listeners=function(V){var z=g?g+V:V,re=this._events[z];if(!re)return[];if(re.fn)return[re.fn];for(var oe=0,le=re.length,ue=new Array(le);oe<le;oe++)ue[oe]=re[oe].fn;return ue},$.prototype.listenerCount=function(V){var z=g?g+V:V,re=this._events[z];return re?re.fn?1:re.length:0},$.prototype.emit=function(V,z,re,oe,le,ue){var ie=g?g+V:V;if(!this._events[ie])return!1;var ae,Fe,de=this._events[ie],Ie=arguments.length;if(de.fn){switch(de.once&&this.removeListener(V,de.fn,void 0,!0),Ie){case 1:return de.fn.call(de.context),!0;case 2:return de.fn.call(de.context,z),!0;case 3:return de.fn.call(de.context,z,re),!0;case 4:return de.fn.call(de.context,z,re,oe),!0;case 5:return de.fn.call(de.context,z,re,oe,le),!0;case 6:return de.fn.call(de.context,z,re,oe,le,ue),!0}for(Fe=1,ae=new Array(Ie-1);Fe<Ie;Fe++)ae[Fe-1]=arguments[Fe];de.fn.apply(de.context,ae)}else{var Ve,kt=de.length;for(Fe=0;Fe<kt;Fe++)switch(de[Fe].once&&this.removeListener(V,de[Fe].fn,void 0,!0),Ie){case 1:de[Fe].fn.call(de[Fe].context);break;case 2:de[Fe].fn.call(de[Fe].context,z);break;case 3:de[Fe].fn.call(de[Fe].context,z,re);break;case 4:de[Fe].fn.call(de[Fe].context,z,re,oe);break;default:if(!ae)for(Ve=1,ae=new Array(Ie-1);Ve<Ie;Ve++)ae[Ve-1]=arguments[Ve];de[Fe].fn.apply(de[Fe].context,ae)}}return!0},$.prototype.on=function(V,z,re){return k(this,V,z,re,!1)},$.prototype.once=function(V,z,re){return k(this,V,z,re,!0)},$.prototype.removeListener=function(V,z,re,oe){var le=g?g+V:V;if(!this._events[le])return this;if(!z)return L(this,le),this;var ue=this._events[le];if(ue.fn)ue.fn!==z||oe&&!ue.once||re&&ue.context!==re||L(this,le);else{for(var ie=0,ae=[],Fe=ue.length;ie<Fe;ie++)(ue[ie].fn!==z||oe&&!ue[ie].once||re&&ue[ie].context!==re)&&ae.push(ue[ie]);ae.length?this._events[le]=ae.length===1?ae[0]:ae:L(this,le)}return this},$.prototype.removeAllListeners=function(V){var z;return V?(z=g?g+V:V,this._events[z]&&L(this,z)):(this._events=new y,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prefixed=g,$.EventEmitter=$,t.exports=$},function(t,r,e){t.exports=e(413)},function(t,r,e){t.exports=e(438)},function(t,r,e){t.exports=e(455)},function(t,r,e){var n=e(499),g=e(500),y=e(501),i=e(502),k=e(503);function L($){var V=-1,z=$==null?0:$.length;for(this.clear();++V<z;){var re=$[V];this.set(re[0],re[1])}}L.prototype.clear=n,L.prototype.delete=g,L.prototype.get=y,L.prototype.has=i,L.prototype.set=k,t.exports=L},function(t,r,e){var n=e(204);t.exports=function(g,y){for(var i=g.length;i--;)if(n(g[i][0],y))return i;return-1}},function(t,r,e){var n=e(91)(Object,"create");t.exports=n},function(t,r,e){var n=e(523);t.exports=function(g,y){var i=g.__data__;return n(y)?i[typeof y=="string"?"string":"hash"]:i.map}},function(t,r,e){var n=e(268),g=e(269);t.exports=function(y,i,k,L){var $=!k;k||(k={});for(var V=-1,z=i.length;++V<z;){var re=i[V],oe=L?L(k[re],y[re],re,k,y):void 0;oe===void 0&&(oe=y[re]),$?g(k,re,oe):n(k,re,oe)}return k}},function(t,r){t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(t,r){t.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(t,r,e){t.exports=e(286)},function(t,r,e){var n=e(195),g=e(142),y=e(196);t.exports=function(i,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=n(k&&k.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),g(i,"prototype",{writable:!1}),k&&y(i,k)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(24).default,g=e(640);t.exports=function(y,i){if(i&&(n(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){var e={link:{id:1,heartbeat:2,negotiateTransport:5,initTransport:6},sync:{id:5,sync:1,syncTeamMembers:2},misc:{id:6,getSimpleNosToken:1,getNosToken:2,notifyUploadLog:3,uploadSdkLogUrl:4,audioToText:5,processImage:6,getNosTokenTrans:7,notifyTransLog:8,fetchFile:9,fetchFileList:10,removeFile:11,getClientAntispam:17,fileQuickTransfer:18,getNosOriginUrl:22,getServerTime:23,getNosAccessToken:24,deleteNosAccessToken:25,getNosCdnHost:26,getGrayscaleConfig:27,getMixStorePolicy:28,getMixStoreToken:29,getBackSourceToken:30,uploadDetect:32},avSignal:{id:15,signalingCreate:1,signalingDelay:2,signalingClose:3,signalingJoin:4,signalingLeave:5,signalingInvite:6,signalingCancel:7,signalingReject:8,signalingAccept:9,signalingControl:10,signalingNotify:11,signalingMutilClientSyncNotify:12,signalingUnreadMessageSyncNotify:13,signalingChannelsSyncNotify:14,signalingGetChannelInfo:15,signalingCallEx:16,signalingJoinAndAccept:17}},n={heartbeat:{sid:e.link.id,cid:e.link.heartbeat},negotiateTransport:{sid:e.link.id,cid:e.link.negotiateTransport,params:[{type:"Int",name:"sdkVersion"},{type:"Property",name:"negotiateTransportTag"}]},initTransport:{sid:e.link.id,cid:e.link.initTransport,params:[{type:"Property",name:"initTransportTag"}]},getGrayscaleConfig:{sid:e.misc.id,cid:e.misc.getGrayscaleConfig,params:[{type:"Property",name:"providers"}]},getMixStorePolicy:{sid:e.misc.id,cid:e.misc.getMixStorePolicy,params:[{type:"LongArray",name:"providers"}]},getMixStoreToken:{sid:e.misc.id,cid:e.misc.getMixStoreToken,params:[{type:"Property",name:"mixTokenReq"}]},getBackSourceToken:{sid:e.misc.id,cid:e.misc.getBackSourceToken,params:[{type:"Property",name:"mixAuthTokenReq"}]},uploadDetect:{sid:e.misc.id,cid:e.misc.uploadDetect,isAwaitable:!1,params:[{type:"Property",name:"notifyDetectTag"}]},getSimpleNosToken:{sid:e.misc.id,cid:e.misc.getSimpleNosToken,params:[{type:"Int",name:"num"}]},getNosToken:{sid:e.misc.id,cid:e.misc.getNosToken,params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken"}]},uploadSdkLogUrl:{sid:e.misc.id,cid:e.misc.uploadSdkLogUrl,params:[{type:"String",name:"url"},{type:"Property",name:"uploadTaskTag"}]},audioToText:{sid:e.misc.id,cid:e.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:e.misc.id,cid:e.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]},getClientAntispam:{sid:e.misc.id,cid:e.misc.getClientAntispam,params:[{type:"Property",name:"clientAntispam"}]},fileQuickTransfer:{sid:e.misc.id,cid:e.misc.fileQuickTransfer,params:[{type:"Property",name:"fileQuickTransfer"}]},getNosOriginUrl:{sid:e.misc.id,cid:e.misc.getNosOriginUrl,params:[{type:"Property",name:"nosFileUrlTag"}]},getServerTime:{sid:e.misc.id,cid:e.misc.getServerTime,params:[]},getNosAccessToken:{sid:e.misc.id,cid:e.misc.getNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},deleteNosAccessToken:{sid:e.misc.id,cid:e.misc.deleteNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},getNosTokenTrans:{sid:e.misc.id,cid:e.misc.getNosTokenTrans,params:[{type:"Property",name:"transToken"}]},fetchFile:{sid:e.misc.id,cid:e.misc.fetchFile,params:[{type:"String",name:"docId"}]},fetchFileList:{sid:e.misc.id,cid:e.misc.fetchFileList,params:[{type:"Property",name:"fileListParam"}]},removeFile:{sid:e.misc.id,cid:e.misc.removeFile,params:[{type:"String",name:"docId"}]},getNosCdnHost:{sid:e.misc.id,cid:e.misc.getNosCdnHost,params:[]},signalingCreate:{sid:e.avSignal.id,cid:e.avSignal.signalingCreate,params:[{type:"Property",name:"avSignalTag"}]},signalingDelay:{sid:e.avSignal.id,cid:e.avSignal.signalingDelay,params:[{type:"Property",name:"avSignalTag"}]},signalingClose:{sid:e.avSignal.id,cid:e.avSignal.signalingClose,params:[{type:"Property",name:"avSignalTag"}]},signalingJoin:{sid:e.avSignal.id,cid:e.avSignal.signalingJoin,params:[{type:"Property",name:"avSignalTag"}]},signalingLeave:{sid:e.avSignal.id,cid:e.avSignal.signalingLeave,params:[{type:"Property",name:"avSignalTag"}]},signalingInvite:{sid:e.avSignal.id,cid:e.avSignal.signalingInvite,params:[{type:"Property",name:"avSignalTag"}]},signalingCancel:{sid:e.avSignal.id,cid:e.avSignal.signalingCancel,params:[{type:"Property",name:"avSignalTag"}]},signalingReject:{sid:e.avSignal.id,cid:e.avSignal.signalingReject,params:[{type:"Property",name:"avSignalTag"}]},signalingAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingAccept,params:[{type:"Property",name:"avSignalTag"}]},signalingControl:{sid:e.avSignal.id,cid:e.avSignal.signalingControl,params:[{type:"Property",name:"avSignalTag"}]},signalingGetChannelInfo:{sid:e.avSignal.id,cid:e.avSignal.signalingGetChannelInfo,params:[{type:"Property",name:"avSignalTag"}]},signalingCallEx:{sid:e.avSignal.id,cid:e.avSignal.signalingCallEx,params:[{type:"Property",name:"avSignalTag"}]},signalingJoinAndAccept:{sid:e.avSignal.id,cid:e.avSignal.signalingJoinAndAccept,params:[{type:"Property",name:"avSignalTag"}]}};t.exports={idMap:e,cmdConfig:n,packetConfig:{"1_2":{service:"link",cmd:"heartbeat",response:[]},"1_5":{service:"link",cmd:"negotiateTransport",response:[{type:"Property",name:"negotiateTransportTag"}]},"1_6":{service:"link",cmd:"initTransport",response:[{type:"Property",name:"initTransportTag"}]},"6_1":{service:"misc",cmd:"getSimpleNosToken",response:[{type:"PropertyArray",name:"nosTokens",entity:"nosToken"}]},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_3":{service:"misc",cmd:"notifyUploadLog"},"6_4":{service:"misc",cmd:"uploadSdkLogUrl"},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]},"6_7":{service:"misc",cmd:"getNosTokenTrans",response:[{type:"Property",name:"nosToken"},{type:"String",name:"docId"}]},"6_8":{service:"misc",cmd:"notifyTransLog",response:[{type:"Property",name:"transInfo"}]},"6_9":{service:"misc",cmd:"fetchFile",response:[{type:"Property",name:"info",entity:"transInfo"}]},"6_10":{service:"misc",cmd:"fetchFileList",response:[{type:"PropertyArray",name:"list",entity:"transInfo"},{type:"Int",name:"totalCount"}]},"6_11":{service:"misc",cmd:"removeFile",response:[{type:"String",name:"res"}]},"6_17":{service:"misc",cmd:"getClientAntispam",response:[{type:"Property",name:"clientAntispam"}]},"6_18":{service:"misc",cmd:"fileQuickTransfer",response:[{type:"Property",name:"fileQuickTransfer"}]},"6_22":{service:"misc",cmd:"getNosOriginUrl",response:[{type:"Property",name:"nosFileUrlTag"}]},"6_23":{service:"misc",cmd:"getServerTime",response:[{type:"Long",name:"time"}]},"6_24":{service:"misc",cmd:"getNosAccessToken",response:[{type:"Property",name:"nosAccessTokenTag"}]},"6_25":{service:"misc",cmd:"deleteNosAccessToken"},"6_26":{service:"misc",cmd:"getNosCdnHost",response:[{type:"Property",name:"nosConfigTag"}]},"6_27":{service:"misc",cmd:"getGrayscaleConfig",response:[{type:"Property",name:"appGrayConfigTag"}]},"6_28":{service:"misc",cmd:"getMixStorePolicy",response:[{type:"Property",name:"mixStorePolicyTag"}]},"6_29":{service:"misc",cmd:"getMixStoreToken",response:[{type:"Property",name:"mixStoreTokenTag"}]},"6_30":{service:"misc",cmd:"getBackSourceToken",response:[{type:"Property",name:"backSourceTokenTag"}]},"6_31":{service:"link",cmd:"notifyDetect",response:[{type:"Property",name:"notifyDetectTag"}]},"6_32":{service:"link",cmd:"uploadDetect",response:[]},"15_1":{service:"avSignal",cmd:"signalingCreate",response:[{type:"Property",name:"avSignalTag"}]},"15_2":{service:"avSignal",cmd:"signalingDelay",response:[{type:"Property",name:"avSignalTag"}]},"15_3":{service:"avSignal",cmd:"signalingClose",response:[{type:"Property",name:"avSignalTag"}]},"15_4":{service:"avSignal",cmd:"signalingJoin",response:[{type:"Property",name:"avSignalTag"}]},"15_5":{service:"avSignal",cmd:"signalingLeave",response:[]},"15_6":{service:"avSignal",cmd:"signalingInvite",response:[]},"15_7":{service:"avSignal",cmd:"signalingCancel",response:[]},"15_8":{service:"avSignal",cmd:"signalingReject",response:[]},"15_9":{service:"avSignal",cmd:"signalingAccept",response:[]},"15_10":{service:"avSignal",cmd:"signalingControl",response:[]},"15_11":{service:"avSignal",cmd:"signalingNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_12":{service:"avSignal",cmd:"signalingMutilClientSyncNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_13":{service:"avSignal",cmd:"signalingUnreadMessageSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_14":{service:"avSignal",cmd:"signalingChannelsSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_15":{service:"avSignal",cmd:"signalingGetChannelInfo",response:[{type:"Property",name:"avSignalTag"}]},"15_16":{service:"avSignal",cmd:"signalingCallEx",response:[{type:"Property",name:"avSignalTag"}]},"15_17":{service:"avSignal",cmd:"signalingJoinAndAccept",response:[{type:"Property",name:"avSignalTag"}]}},CMD_TYPE_PROPERTY:"Property",CMD_TYPE_BYTE:"Byte",CMD_TYPE_INT:"Int",CMD_TYPE_BOOL:"Bool",CMD_TYPE_LONG:"Long",CMD_TYPE_STRING:"String",CMD_TYPE_STR_STR_MAP:"StrStrMap",CMD_TYPE_STR_LONG_MAP:"StrLongMap",CMD_TYPE_LONG_LONG_MAP:"LongLongMap",CMD_TYPE_STR_ARRAY:"StrArray",CMD_TYPE_LONG_ARRAY:"LongArray",CMD_TYPE_PROPERTY_ARRAY:"PropertyArray",CMD_TYPE_KV_ARRAY:"KVArray"}},function(t,r,e){var n,g=e(19),y=e(2),i=e(11),k=e(3),L=e(4),$=e(8),V=e(23),z=e(6),re=e(110).urlQuery2Object,oe=e(0),le=e(35),ue=e(775),ie=e(776),ae=e(777),Fe=e(778),de=e(779),Ie=e(780);function Ve(Et){this.mixin(Et)}Ve.prototype=g((function(){}).prototype,{protocol:{value:null,writable:!0,enumerable:!0,configurable:!0}}),Ve.prototype.setProtocol=function(Et){this.protocol=Et},Ve.prototype.mixin=function(Et){var cr,er,or=this;this.configMap=this.configMap||{},y(cr=["idMap","cmdConfig","packetConfig"]).call(cr,function(dr){or.configMap[dr]=oe.merge({},or.configMap[dr],Et.configMap&&Et.configMap[dr])}),y(er=["serializeMap","unserializeMap"]).call(er,function(dr){or[dr]=oe.merge({},or[dr],Et[dr])})},Ve.prototype.createCmd=(n=1,function(Et,cr){var er,or=this,dr=this.configMap.cmdConfig[Et],lr=this.configMap.packetConfig[dr.sid+"_"+dr.cid],nr=Et==="heartbeat"?0:n++;return nr>32767&&(nr=1,n=2),Et={SID:dr.sid,CID:dr.cid,SER:nr,isAwaitable:typeof dr.isAwaitable=="boolean"?dr.isAwaitable:!(!lr||!lr.response)},dr.params&&(Et.Q=[],y(er=dr.params).call(er,function(ur){var ar=ur.type,gr=ur.name,pr=ur.entity,hr=cr[gr];if(!oe.undef(hr)){switch(ar){case"PropertyArray":ar="ArrayMable",hr=i(hr).call(hr,function(Cr){return{t:"Property",v:or.serialize(Cr,pr)}});break;case"Property":hr=or.serialize(hr,gr);break;case"bool":hr=hr?"true":"false"}Et.Q.push({t:ar,v:hr})}})),Et}),Ve.prototype.parseResponse=function(Et){var cr=this;return new k(function(er){var or=JSON.parse(Et),dr={raw:or,rawStr:Et,error:le.genError(or.code)},lr=cr.configMap.packetConfig[or.sid+"_"+or.cid];if(!lr)return dr.notFound={sid:or.sid,cid:or.cid},void er(dr);var nr=or.r,ur=lr.service==="notify"&&!lr.cmd;if(dr.isNotify=ur,ur){var ar=or.r[1].headerPacket;if(lr=cr.configMap.packetConfig[ar.sid+"_"+ar.cid],nr=or.r[1].body,!lr)return dr.notFound={sid:ar.sid,cid:ar.cid},void er(dr)}if(dr.service=lr.service,dr.cmd=lr.cmd,dr.error){var gr,pr,hr=L(gr="".concat(or.sid,"_")).call(gr,or.cid);if(ur&&(hr=L(pr="".concat(ar.sid,"_")).call(pr,ar.cid)),dr.error.cmd=dr.cmd,dr.error.callFunc="protocol::parseResponse: ".concat(hr),dr.error.code===416){var Cr=nr[0];Cr&&(dr.frequencyControlDuration=1e3*Cr)}}var wr,Sr=!1;dr.error&&lr.trivialErrorCodes&&(Sr=$(wr=lr.trivialErrorCodes).call(wr,dr.error.code)!==-1);var mr=[];if((!dr.error||Sr)&&lr.response){var _r;dr.content={};var Ar=function(Er,sr,xr,Nr){if(Er&&Nr==="msg"||Nr==="sysMsg"){var Mr=xr.content[Nr];oe.isObject(Mr)&&!Mr.idServer&&(Mr.idServer=""+sr.r[0])}};y(_r=lr.response).call(_r,function(Er,sr){var xr,Nr=nr[sr];if(!oe.undef(Nr)){var Mr=Er.type,br=Er.name,yr=Er.entity||br;switch(Mr){case"Property":mr.push(cr.unserialize(Nr,yr).then(V(xr=function(Tr,Br,Lr,Fr,qr){Lr.content[Fr]=qr,Ar(Tr,Br,Lr,Fr)}).call(xr,this,ur,or,dr,br)));break;case"PropertyArray":dr.content[br]=[],y(Nr).call(Nr,function(Tr,Br){var Lr;mr.push(cr.unserialize(Tr,yr).then(V(Lr=function(Fr,qr,Vr){Fr.content[qr][Br]=Vr}).call(Lr,this,dr,br)))});break;case"KVArray":dr.content[br]=Nr,Ar(ur,or,dr,br);break;case"long":case"Long":case"byte":case"Byte":case"Number":dr.content[br]=+Nr;break;default:dr.content[br]=Nr,Ar(ur,or,dr,br)}}})}k.all(mr).then(function(){er(dr)})})},Ve.prototype.serialize=function(Et,cr){var er=this.serializeMap[cr],or={};for(var dr in er)Et.hasOwnProperty(dr)&&(or[er[dr]]=Et[dr]);return or},Ve.prototype.matchNosSafeUrl=function(Et){if(!oe.isString(Et)||!~$(Et).call(Et,"_im_url=1"))return!1;var cr=re(Et);return!(!cr||!cr._im_url||cr._im_url!=1)},Ve.prototype.getOneNosOriginUrl=function(Et,cr,er){var or=this;return new k(function(dr){or.protocol.getNosOriginUrlReqNum++,or.protocol.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:Et}},function(lr,nr,ur){or.protocol.getNosOriginUrlReqNum--,lr?or.protocol.logger.warn("error: get nos originUrl failed",lr):(cr["_"+er+"_safe"]=cr[er],cr[er]=ur.nosFileUrlTag&&ur.nosFileUrlTag.originUrl),dr()})})},Ve.prototype.checkObjSafeUrl=function(Et,cr,er){var or=this;for(var dr in Et)if(Et.hasOwnProperty(dr)){var lr=Et[dr];if(oe.isString(lr)){if(this.matchNosSafeUrl(lr)){var nr=this.getOneNosOriginUrl(lr,Et,dr);cr.push(nr),er.push(nr)}}else oe.isObject(lr)?this.checkObjSafeUrl(lr,cr,er):oe.isArray(lr)&&y(lr).call(lr,function(ur){oe.isObject(ur)&&or.checkObjSafeUrl(ur,cr,er)})}};var kt=["url","avatar","fromAvatar","chatroomAvatar"];Ve.prototype.unserialize=function(Et,cr){var er=this;return new k(function(or){var dr=er.unserializeMap[cr],lr={},nr=[];if(Et)for(var ur in dr){var ar,gr=[];if(Et.hasOwnProperty(ur)&&(lr[dr[ur]]=Et[ur],er.protocol.hasLogin&&!er.protocol.keepNosSafeUrl))if(dr[ur]==="attach"&&Et[ur]&&$(Et[ur])&&~$(ar=Et[ur]).call(ar,"_im_url=1"))try{var pr,hr=JSON.parse(Et[ur]);hr.isS3||er.checkObjSafeUrl(hr,gr,nr),k.all(gr).then(V(pr=function(Cr,wr){Cr.attach=z(wr)}).call(pr,er,lr,hr))}catch(Cr){er.logger.warn("unserialize",Cr&&Cr.message)}else~$(kt).call(kt,dr[ur])&&Et[ur]&&er.matchNosSafeUrl(Et[ur])&&nr.push(er.getOneNosOriginUrl(Et[ur],lr,dr[ur]))}k.all(nr).then(function(){or(lr)})})},Ve.prototype.syncUnserialize=function(Et,cr){var er=this.unserializeMap[cr],or={};if(Et)for(var dr in er)Et.hasOwnProperty(dr)&&(or[er[dr]]=Et[dr]);return or};var At=new Ve({configMap:ue,serializeMap:ie,unserializeMap:ae}),ze=new Ve({configMap:Fe,serializeMap:de,unserializeMap:Ie});t.exports={IM:At,Chatroom:ze}},function(t,r,e){var n={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,y=g&&!n.call({1:2},1);r.f=y?function(i){var k=g(this,i);return!!k&&k.enumerable}:n},function(t,r,e){t.exports=e(336)},function(t,r,e){t.exports=e(637)},function(t,r,e){var n=e(11),g=e(10),y=e(0),i=y.notundef,k=y.fillPropertyWithDefault,L={0:"normal",1:"owner",2:"manager"};function $(V){y.verifyOptions(V,"teamId","team::TeamMember"),y.verifyParamAtLeastPresentOne(V,"nickInTeam muteTeam muteNotiType custom","team::TeamMember"),this.teamId=V.teamId,i(V.account)&&(this.account=V.account),i(V.nickInTeam)&&(this.nickInTeam=V.nickInTeam),i(V.muteNotiType)?this.bits=V.muteNotiType:i(V.muteTeam)&&(this.bits=0,V.muteTeam&&(this.bits+=1)),i(V.mute)&&(this.mute=V.mute?1:0),i(V.custom)&&(this.custom=""+V.custom)}$.reverse=function(V){var z=y.copy(V);if(i(z.teamId)&&(z.teamId=""+z.teamId),i(z.type)&&(z.type=L[z.type]),i(z.active)&&(z.active=+z.active==1),i(z.valid)&&(z.valid=+z.valid==1),i(z.mute)&&(z.mute=+z.mute==1),i(z.joinTime)&&(z.joinTime=+z.joinTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),i(z.bits)){var re=z.bits;delete z.bits,z.muteTeam=!!(1&re),z.muteNotiType=re}return i(z.teamId)&&i(z.account)&&(z.id=$.genId(z.teamId,z.account)),i(z.followAccountIds)&&(z.followAccountIds=JSON.parse(z.followAccountIds)),z},$.reverseMembers=function(V){return n(V).call(V,function(z){return g($).call($,z)})},$.fillProperties=function(V){var z=k(V,"mute",!1),re=k(V,"custom","");return z||re},$.genId=function(V,z){return V+"-"+z},$.accounts2ids=function(V,z){return n(z).call(z,function(re){return $.genId(V,re)})},$.assembleMembers=function(V,z){return y.isArray(z)||(z=[z]),n(z).call(z,function(re){return $.assembleMember(V,re)})},$.assembleMember=function(V,z){return{id:$.genId(V.teamId,z),account:z,teamId:V.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:V.memberUpdateTime,updateTime:V.memberUpdateTime,active:!0,valid:!0,invitorAccid:"",followAccountIds:[]}},$.assembleOwner=function(V){var z=$.assembleMember(V,V.owner);return z.type="owner",z},t.exports=$},function(t,r,e){var n,g=e(24),y=e(8),i=e(6),k=e(4),L=e(5),$=e(10),V=e(15),z=e(11),re=e(2),oe=e(0),le=oe.undef,ue=oe.notundef,ie=e(156).IM,ae=e(198),Fe=e(160),de={customP2p:100,customTeam:101,customSuperTeam:103,deleteMsgP2p:7,deleteMsgTeam:8,deleteMsgSuperTeam:12,deleteOnewayMsgP2p:13,deleteOnewayMsgTeam:14},Ie={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",12:"deleteMsgSuperTeam",13:"deleteMsgP2pOneWay",14:"deleteMsgTeamOneWay",15:"applySuperTeam",16:"rejectSuperTeamApply",17:"superTeamInvite",18:"rejectSuperTeamInvite",100:"customP2p",101:"customTeam",103:"customSuperTeam",102:"customP2p"},Ve={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},kt=["team","superTeam","friend","msg"],At={applyTeam:"team",rejectTeamApply:"team",teamInvite:"team",rejectTeamInvite:"team",applySuperTeam:"superTeam",rejectSuperTeamApply:"superTeam",superTeamInvite:"superTeam",rejectSuperTeamInvite:"superTeam",addFriend:"friend",applyFriend:"friend",passFriendApply:"friend",rejectFriendApply:"friend",deleteFriend:"friend",deleteMsg:"msg"};function ze(Et){var cr,er;oe.verifyOptions(Et,"type to","sysmsg::SystemMessage"),oe.verifyParamValid("type",Et.type,ze.validTypes,"sysmsg::SystemMessage"),y(cr=Et.type).call(cr,"custom")!==-1&&(oe.verifyOptions(Et,"content","sysmsg::SystemMessage"),this.attach=Et.content,ue(Et.apnsText)&&(this.apnsText=""+Et.apnsText),ue(Et.pushPayload)&&(g(Et.pushPayload)==="object"?this.pushPayload=i(Et.pushPayload):this.pushPayload=""+Et.pushPayload),ue(Et.sendToOnlineUsersOnly)&&(this.sendToOnlineUsersOnly=Et.sendToOnlineUsersOnly?0:1),ue(Et.cc)&&(this.cc=Et.cc?1:0),ue(Et.isPushable)&&(this.isPushable=Et.isPushable?1:0),ue(Et.isUnreadable)&&(this.isUnreadable=Et.isUnreadable?1:0),ue(Et.needPushNick)&&(this.needPushNick=Et.needPushNick?1:0)),y(er=Et.type).call(er,"deleteMsg")===0&&(Et.apnsText&&(this.apnsText=Et.apnsText),Et.pushPayload&&(this.pushPayload=Et.pushPayload),Et.attach&&(this.attach=Et.attach)),this.time=Et.time||+new Date,this.type=de[Et.type],this.to=Et.to,ue(Et.from)&&(this.from=Et.from),ue(Et.ps)&&(this.ps=Et.ps),ue(Et.deletedIdClient)&&(this.deletedIdClient=Et.deletedIdClient),ue(Et.deletedIdServer)&&(this.deletedIdServer=Et.deletedIdServer),ue(Et.opeAccount)&&(this.opeAccount=Et.opeAccount),ue(Et.yidunEnable)&&(this.yidunEnable=Et.yidunEnable?1:0),ue(Et.antiSpamContent)&&(g(Et.antiSpamContent)==="object"?this.antiSpamContent=i(Et.antiSpamContent):this.antiSpamContent=""+Et.antiSpamContent),ue(Et.antiSpamBusinessId)&&(g(Et.antiSpamBusinessId)==="object"?this.antiSpamBusinessId=i(Et.antiSpamBusinessId):this.antiSpamBusinessId=""+Et.antiSpamBusinessId),ue(Et.env)&&(this.env=Et.env),this.idClient=Et.idClient||oe.guid()}ze.validTypes=k(n=L(de)).call(n,L(At)),ze.validCategories=["team","friend"],ze.isCustom=function(Et){return Et.type==="custom"},ze.reverse=function(Et){var cr,er={time:+Et.time,to:Et.to,type:Ie[Et.type]};if(ue(Et.from)&&(er.from=Et.from),ue(Et.idClient)&&(er.idClient=Et.idClient),ue(Et.idServer)&&(er.idServer=""+Et.idServer),ue(Et.deletedIdClient)&&(er.deletedIdClient=Et.deletedIdClient),ue(Et.deletedIdServer)&&(er.deletedIdServer=""+Et.deletedIdServer),ue(Et.deletedMsgTime)&&(er.deletedMsgTime=+Et.deletedMsgTime),ue(Et.deletedMsgFromNick)&&(er.deletedMsgFromNick=""+Et.deletedMsgFromNick),ue(Et.opeAccount)&&(er.opeAccount=Et.opeAccount),ue(Et.ps)&&(er.ps=Et.ps),ue(Et.callbackExt)&&(er.callbackExt=Et.callbackExt),Et.attach=Et.attach?""+Et.attach:"",er.type==="customP2p"||er.type==="customTeam"||er.type==="customSuperTeam")er.content=Et.attach,ue(Et.apnsText)&&(er.apnsText=Et.apnsText),ue(Et.pushPayload)&&(er.pushPayload=Et.pushPayload),oe.merge(er,{sendToOnlineUsersOnly:le(Et.sendToOnlineUsersOnly)||+Et.sendToOnlineUsersOnly==0,cc:le(Et.cc)||+Et.cc==1,isPushable:le(Et.isPushable)||+Et.isPushable==1,isUnreadable:le(Et.isUnreadable)||+Et.isUnreadable==1,needPushNick:ue(Et.needPushNick)&&+Et.needPushNick==1}),er.type==="customP2p"?er.scene="p2p":er.type==="customSuperTeam"?er.scene="superTeam":er.type==="customTeam"&&(er.scene="team"),er.type="custom";else if(y(cr=er.type).call(cr,"deleteMsg")===0){Et.apnsText&&(er.apnsText=Et.apnsText),Et.pushPayload&&(er.pushPayload=Et.pushPayload),Et.attach&&(er.attach=Et.attach);var or=er.type.toLowerCase();y(or).call(or,"p2p")>-1?er.scene="p2p":y(or).call(or,"superteam")>-1?er.scene="superTeam":y(or).call(or,"team")>-1&&(er.scene="team"),er.type="deleteMsg"}else{if(Et.attach){er.attach={};var dr=JSON.parse(Et.attach);ue(dr.vt)?(er.type=Ve[dr.vt],dr.serverex&&dr.serverex[0]===1&&(er.serverex=dr.serverex[1]),delete er.attach):(ue(dr.tinfo)&&(er.attach.team=$(ae).call(ae,ie.syncUnserialize(dr.tinfo,"team"))),ue(dr.tlist)&&(er.attach.member=$(Fe).call(Fe,ie.syncUnserialize(dr.tlist,"teamMember"))),ue(dr.attach)&&(er.attach.custom=dr.attach))}er.category=At[er.type],er.read=!1,er.state="init"}return ue(Et.cc)&&(er.cc=+Et.cc==1),er.status=Et.status||"success",ue(V(Et))&&(er.filter=V(Et)),er},ze.reverseSysMsgs=function(Et,cr){var er=(cr=cr||{}).mapper,or=oe.isFunction(er);return z(Et).call(Et,function(dr){return dr=$(ze).call(ze,dr),or&&(dr=er(dr)),dr})},ze.completeUnread=function(Et){var cr,er;return Et=Et||{},re(kt).call(kt,function(or){delete Et[or]}),re(cr=L(At)).call(cr,function(or){Et[or]=Et[or]||0,Et[or]<0&&(Et[or]=0),Et[er=At[or]]=Et[er]||0,Et[er]=Et[er]+Et[or]}),Et.total=0,re(kt).call(kt,function(or){Et.total+=Et[or]}),Et},t.exports=ze},function(t,r,e){var n=e(127),g=["unreadMsgs"],y=e(0);function i(){}i.parse=function(k){var L=k.split("|");return{scene:L[0],to:L[1]}},i.genSessionByMsg=function(k){return{id:k.sessionId,scene:k.scene,to:k.target,updateTime:k.time,lastMsg:k}},i.appendLastMsg=function(k){var L=k.lastMsg;k["last"+y.capFirstLetter(L.type)+"Msg"]=L,k["last"+y.capFirstLetter(L.flow)+"Msg"]=L},i.genSessionByMsgs=function(k,L){var $=k.getLastNotIgnoredMsg(L);return $?i.genSessionByMsg($):null},i.trim=function(k){if(Object.prototype.toString.call(k)!=="[object Object]")return k;var L=k=y.simpleClone(k);return L.unreadMsgs,n(L,g)},i.isComplete=function(k){return k.id&&k.scene&&k.to},t.exports=i},function(t,r){t.exports=function(){}},function(t,r,e){var n=e(497);t.exports=function(g){return n(g,5)}},function(t,r,e){var n=e(152),g=e(44),y=e(45),i=e(153),k=e(154),L=e(122);function $(le){var ue=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ie,ae=L(le);if(ue){var Fe=L(this).constructor;ie=n(ae,arguments,Fe)}else ie=ae.apply(this,arguments);return k(this,ie)}}var V=e(141),z={V2NIM_LOGIN_STATUS_LOGOUT:0,V2NIM_LOGIN_STATUS_LOGINED:1,V2NIM_LOGIN_STATUS_LOGINING:2,V2NIM_LOGIN_STATUS_UNLOGIN:3},re={V2NIM_CONNECT_STATUS_DISCONNECTED:0,V2NIM_CONNECT_STATUS_CONNECTED:1,V2NIM_CONNECT_STATUS_CONNECTING:2,V2NIM_CONNECT_STATUS_WAITING:3},oe=function(le){i(ie,le);var ue=$(ie);function ie(ae){var Fe;return g(this,ie),(Fe=ue.call(this)).loginStatus=z.V2NIM_LOGIN_STATUS_LOGOUT,Fe.connectStatus=re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe.logger=ae.logger,Fe.clientProto=ae,Fe.lastErrorFromLoginCmd=null,Fe}return y(ie,[{key:"processEvent",value:function(ae,Fe,de){this.getConnectStatus();var Ie=this.clientProto.willReconnect();switch(ae){case"auth/loginLifeCycleAddressing":this.logger.log("auth::life cycle addressing"),this.lastErrorFromLoginCmd=null,this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINING),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_CONNECTING);break;case"auth/loginLifeCycleConnect":this.logger.log("auth::life cycle connecting"),this.lastErrorFromLoginCmd=null,this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINING),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_CONNECTING);break;case"auth/loginLifeCycleConnectSucc":this.logger.log("auth::life cycle connect success"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINING),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_CONNECTED);break;case"auth/loginLifeCycleConnectFail":this.logger.log("auth::life cycle connect fail, isWillReconnect ".concat(Ie,", due to:"),Fe&&Fe.message),this.setLoginStatus(Ie?z.V2NIM_LOGIN_STATUS_UNLOGIN:z.V2NIM_LOGIN_STATUS_LOGOUT,Fe),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe);break;case"auth/loginLifeCycleConnectionBroken":this.logger.log("auth::life cycle connection broken. isWillReconnect ".concat(Ie,", due to:"),Fe&&Fe.message),this.setLoginStatus(Ie?z.V2NIM_LOGIN_STATUS_UNLOGIN:z.V2NIM_LOGIN_STATUS_LOGOUT,Fe),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe);break;case"auth/loginLifeCycleLoginSucc":this.logger.log("auth::life cycle login success, verify authentication success"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGINED),this.emit("auth/loginLifeCycleLoginSucc");break;case"auth/loginLifeCycleLoginFail":this.lastErrorFromLoginCmd=Fe,this.logger.log("auth::life cycle login fail. isWillReconnect ".concat(Ie,", due to verify authentication failed:"),Fe&&Fe.message),this.setLoginStatus(Ie?z.V2NIM_LOGIN_STATUS_UNLOGIN:z.V2NIM_LOGIN_STATUS_LOGOUT,Fe),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,Fe);break;case"auth/loginLifeCycleLogout":this.logger.log("auth::life cycle logout"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGOUT),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,new Error("disconnect due to logout"));break;case"auth/loginLifeCycleKicked":this.logger.log("auth::life cycle kicked",de),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_LOGOUT),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_DISCONNECTED,new Error("disconnect due to kicked"));break;case"auth/loginLifeCycleWaiting":this.logger.log("auth::life cycle waiting to reconnect"),this.setLoginStatus(z.V2NIM_LOGIN_STATUS_UNLOGIN),this.setConnectStatus(re.V2NIM_CONNECT_STATUS_WAITING)}}},{key:"getConnectStatus",value:function(){return this.connectStatus}},{key:"getLoginStatus",value:function(){return this.loginStatus}},{key:"getLastErrorFromLoginCmd",value:function(){return this.lastErrorFromLoginCmd}},{key:"setLoginStatus",value:function(ae,Fe){if(ae!==this.loginStatus){var de=this.loginStatus;this.loginStatus=ae,this.emit("loginStatus",ae),this.logger.log("auth::life cycle loginStatus:",ae),this.delegateLoginEvent(de,ae,Fe)}}},{key:"delegateLoginEvent",value:function(ae,Fe,de){ae===z.V2NIM_LOGIN_STATUS_LOGINING&&Fe===z.V2NIM_LOGIN_STATUS_LOGOUT&&this.emit("loginFailed",de)}},{key:"setConnectStatus",value:function(ae,Fe){if(ae!==this.connectStatus){var de=this.connectStatus;this.connectStatus=ae,this.emit("connectStatus",ae),this.delegateConnectEvent(de,ae,Fe)}}},{key:"delegateConnectEvent",value:function(ae,Fe,de){ae===re.V2NIM_CONNECT_STATUS_CONNECTED&&Fe===re.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("disconnected",de),ae===re.V2NIM_CONNECT_STATUS_CONNECTING&&Fe===re.V2NIM_CONNECT_STATUS_DISCONNECTED&&this.emit("connectFailed",de)}},{key:"destroy",value:function(){this.removeAllListeners()}}]),ie}(V);t.exports={V2NIMLoginStatus:z,V2NIMConnectStatus:re,StatusProtector:oe}},function(t,r,e){var n=e(71),g=e(13);t.exports=function(y){if(n(y)==="Function")return g(y)}},function(t,r,e){var n=e(32),g=e(98);t.exports=function(y,i){var k=y[i];return g(k)?void 0:n(k)}},function(t,r,e){var n=e(16),g=e(327),y=n["__core-js_shared__"]||g("__core-js_shared__",{});t.exports=y},function(t,r,e){var n=e(16),g=e(30),y=n.document,i=g(y)&&g(y.createElement);t.exports=function(k){return i?y.createElement(k):{}}},function(t,r,e){var n=e(47),g=e(114),y=e(49),i=function(k){return function(L,$,V){var z,re=n(L),oe=y(re),le=g(V,oe);if(k&&$!=$){for(;oe>le;)if((z=re[le++])!=z)return!0}else for(;oe>le;le++)if((k||le in re)&&re[le]===$)return k||le||0;return!k&&-1}};t.exports={includes:i(!0),indexOf:i(!1)}},function(t,r,e){var n=e(333);t.exports=function(g,y){return new(n(g))(y===0?0:y)}},function(t,r,e){var n={};n[e(21)("toStringTag")]="z",t.exports=String(n)==="[object z]"},function(t,r,e){var n=e(29),g=e(216),y=e(40),i=e(38),k=e(47),L=e(124);r.f=n&&!g?Object.defineProperties:function($,V){i($);for(var z,re=k(V),oe=L(V),le=oe.length,ue=0;le>ue;)y.f($,z=oe[ue++],re[z]);return $}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r,e){var n=e(71),g=e(47),y=e(135).f,i=e(225),k=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(L){return k&&n(L)=="Window"?function($){try{return y($)}catch{return i(k)}}(L):y(g(L))}},function(t,r,e){var n=e(1),g=e(20),y=e(57),i=e(231),k=e(17),L=e(361),$=e(138),V=e(139),z=e(89),re=e(65),oe=e(74),le=e(21),ue=e(105),ie=e(232),ae=i.PROPER,Fe=i.CONFIGURABLE,de=ie.IteratorPrototype,Ie=ie.BUGGY_SAFARI_ITERATORS,Ve=le("iterator"),kt=function(){return this};t.exports=function(At,ze,Et,cr,er,or,dr){L(Et,ze,cr);var lr,nr,ur,ar=function(mr){if(mr===er&&wr)return wr;if(!Ie&&mr in hr)return hr[mr];switch(mr){case"keys":case"values":case"entries":return function(){return new Et(this,mr)}}return function(){return new Et(this)}},gr=ze+" Iterator",pr=!1,hr=At.prototype,Cr=hr[Ve]||hr["@@iterator"]||er&&hr[er],wr=!Ie&&Cr||ar(er),Sr=ze=="Array"&&hr.entries||Cr;if(Sr&&(lr=$(Sr.call(new At)))!==Object.prototype&&lr.next&&(y||$(lr)===de||(V?V(lr,de):k(lr[Ve])||oe(lr,Ve,kt)),z(lr,gr,!0,!0),y&&(ue[gr]=kt)),ae&&er=="values"&&Cr&&Cr.name!=="values"&&(!y&&Fe?re(hr,"name","values"):(pr=!0,wr=function(){return g(Cr,this)})),er)if(nr={values:ar("values"),keys:or?wr:ar("keys"),entries:ar("entries")},dr)for(ur in nr)(Ie||pr||!(ur in hr))&&oe(hr,ur,nr[ur]);else n({target:ze,proto:!0,forced:Ie||pr},nr);return y&&!dr||hr[Ve]===wr||oe(hr,Ve,wr,{name:er}),ue[ze]=wr,nr}},function(t,r){t.exports=function(e,n){return{value:e,done:n}}},function(t,r,e){var n=e(18),g=TypeError;t.exports=function(y,i){if(n(i,y))return y;throw g("Incorrect invocation")}},function(t,r,e){var n=e(133),g=e(85),y=TypeError;t.exports=function(i){if(n(i))return i;throw y(g(i)+" is not a constructor")}},function(t,r,e){var n=e(91)(e(59),"Map");t.exports=n},function(t,r,e){var n=e(59).Symbol;t.exports=n},function(t,r,e){var n=e(270),g=e(536),y=e(205);t.exports=function(i){return y(i)?n(i):g(i)}},function(t,r){var e=Array.isArray;t.exports=e},function(t,r){t.exports=function(e){return function(n){return e(n)}}},function(t,r,e){(function(n){var g=e(265),y=r&&!r.nodeType&&r,i=y&&typeof n=="object"&&n&&!n.nodeType&&n,k=i&&i.exports===y&&g.process,L=function(){try{var $=i&&i.require&&i.require("util").types;return $||k&&k.binding&&k.binding("util")}catch{}}();n.exports=L}).call(this,e(150)(t))},function(t,r){var e=Object.prototype;t.exports=function(n){var g=n&&n.constructor;return n===(typeof g=="function"&&g.prototype||e)}},function(t,r,e){var n=e(270),g=e(539),y=e(205);t.exports=function(i){return y(i)?n(i,!0):g(i)}},function(t,r,e){var n=e(544),g=e(274),y=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,k=i?function(L){return L==null?[]:(L=Object(L),n(i(L),function($){return y.call(L,$)}))}:g;t.exports=k},function(t,r,e){var n=e(548),g=e(180),y=e(549),i=e(279),k=e(550),L=e(126),$=e(266),V=$(n),z=$(g),re=$(y),oe=$(i),le=$(k),ue=L;(n&&ue(new n(new ArrayBuffer(1)))!="[object DataView]"||g&&ue(new g)!="[object Map]"||y&&ue(y.resolve())!="[object Promise]"||i&&ue(new i)!="[object Set]"||k&&ue(new k)!="[object WeakMap]")&&(ue=function(ie){var ae=L(ie),Fe=ae=="[object Object]"?ie.constructor:void 0,de=Fe?$(Fe):"";if(de)switch(de){case V:return"[object DataView]";case z:return"[object Map]";case re:return"[object Promise]";case oe:return"[object Set]";case le:return"[object WeakMap]"}return ae}),t.exports=ue},function(t,r,e){var n=e(553);t.exports=function(g){var y=new g.constructor(g.byteLength);return new n(y).set(new n(g)),y}},function(t,r,e){var n=e(13),g=e(112),y=e(58),i=e(151),k=n("".replace),L="["+i+"]",$=RegExp("^"+L+L+"*"),V=RegExp(L+L+"*$"),z=function(re){return function(oe){var le=y(g(oe));return 1&re&&(le=k(le,$,"")),2&re&&(le=k(le,V,"")),le}};t.exports={start:z(1),end:z(2),trim:z(3)}},function(t,r,e){var n=e(92),g=e(589);n.json=g,t.exports=n},function(t,r,e){var n=e(19),g=e(22),y=e(8),i=e(2),k=e(66),L=k.f,$=e(581);function V(re){re.onload&&this.once("load",re.onload),re.onerror&&this.once("error",re.onerror),re.onbeforesend&&this.once("beforesend",re.onbeforesend),re.onaftersend&&this.once("aftersend",re.onaftersend);var oe=(re=this.options=k.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},re)).headers;k.notexist(oe["Content-Type"])&&(oe["Content-Type"]="application/x-www-form-urlencoded"),this.send()}var z=V.prototype=n($.prototype);z.send=function(){var re=this,oe=re.options;g(function(){try{try{re.emit("beforesend",oe)}catch{}re.doSend()}catch(le){re.onError("serverError","请求失败:"+le.message)}},0)},z.doSend=L,z.afterSend=function(){var re=this;g(function(){re.emit("aftersend",re.options)},0)},z.onLoad=function(re){var oe,le=this.options,ue=re.status,ie=re.result;if(typeof ue!="number"||ue!==0)if(y(oe=""+ue).call(oe,"2")===0){if(le.type==="json")try{ie=JSON.parse(ie)}catch{return void this.onError("parseError",ie)}this.emit("load",ie)}else this.onError("serverError","服务器返回异常状态 status: "+ue,{status:ue,result:ie,date:re.date});else this.onError("netError","网络错误",{status:408})},z.onError=function(re,oe,le){var ue=k.isObject(le)?le:{};ue.code=re||"error",ue.message=oe||"发生错误",this.emit("error",ue)},z.onTimeout=function(){this.onError("timeout","请求超时",{status:408})},z.abort=function(){this.onError("abort","客户端中止",{status:415})},z.header=function(re){var oe=this;if(!k.isArray(re))return oe.getResponseHeader(re||"");var le={};return i(re).call(re,function(ue){le[ue]=oe.header(ue)}),le},z.getResponseHeader=L,z.destroy=L,t.exports=V},function(t,r,e){t.exports=e(606)},function(t,r,e){t.exports=e(628)},function(t,r,e){var n=e(197),g=e(159);function y(i,k){var L;return t.exports=y=n?g(L=n).call(L):function($,V){return $.__proto__=V,$},t.exports.__esModule=!0,t.exports.default=t.exports,y(i,k)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(631)},function(t,r,e){var n=e(5),g=e(2),y=e(23),i=e(0),k=i.notundef,L=i.fillPropertyWithDefault,$=n,V={},z={},re=[],oe={},le={normal:0,advanced:1},ue={0:"normal",1:"advanced"},ie=$(le),ae=V.joinMode={noVerify:0,needVerify:1,rejectAll:2};z.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},re.push("join"),oe.joinMode=$(ae);var Fe=V.beInviteMode={needVerify:0,noVerify:1};z.beInviteMode={0:"needVerify",1:"noVerify"},re.push("beInvite"),oe.beInviteMode=$(Fe);var de=V.inviteMode={manager:0,all:1};z.inviteMode={0:"manager",1:"all"},re.push("invite"),oe.inviteMode=$(de);var Ie=V.updateTeamMode={manager:0,all:1};z.updateTeamMode={0:"manager",1:"all"},re.push("updateTeam"),oe.updateTeamMode=$(Ie);var Ve=V.updateCustomMode={manager:0,all:1};function kt(ze){var Et;switch(i.verifyOptions(ze,"action","team::Team"),ze.action){case"create":i.verifyOptions(ze,"teamId",!1,"team::Team"),i.verifyOptions(ze,"type name","team::Team"),i.verifyParamValid("type",ze.type,ie,"team::Team"),k(ze.level)&&(i.verifyParamType("level",ze.level,"number","team::Team"),this.level=ze.level);break;case"update":i.verifyOptions(ze,"teamId","team::Team"),i.verifyOptions(ze,"type",!1,"team::Team")}k(ze.teamId)&&(this.teamId=ze.teamId),k(ze.type)&&(this.type=le[ze.type]),k(ze.avatar)&&(this.avatar=""+ze.avatar),k(ze.name)&&(this.name=""+ze.name),k(ze.intro)&&(this.intro=""+ze.intro),k(ze.announcement)&&(this.announcement=""+ze.announcement),g(re).call(re,y(Et=this.setMode).call(Et,this,ze)),k(ze.custom)&&(this.custom=""+ze.custom)}function At(ze,Et){k(ze[Et+="Mode"])&&(ze[Et]=z[Et][ze[Et]])}z.updateCustomMode={0:"manager",1:"all"},re.push("updateCustom"),oe.updateCustomMode=$(Ve),kt.prototype.setMode=function(ze,Et){k(ze[Et+="Mode"])&&(i.verifyParamValid(Et,ze[Et],oe[Et],"team::Team"),this[Et]=V[Et][ze[Et]])},kt.reverse=function(ze,Et){var cr=i.copy(ze);if(k(cr.teamId)&&(cr.teamId=""+cr.teamId),k(cr.type)&&(cr.type=ue[cr.type]),k(cr.level)&&(cr.level=+cr.level),k(cr.valid)&&(cr.valid=+cr.valid==1),k(cr.memberNum)&&(cr.memberNum=+cr.memberNum),k(cr.memberUpdateTime)&&(cr.memberUpdateTime=+cr.memberUpdateTime),k(cr.createTime)&&(cr.createTime=+cr.createTime),k(cr.updateTime)&&(cr.updateTime=+cr.updateTime),k(cr.validToCurrentUser)&&(cr.validToCurrentUser=cr.validToCurrentUser==="1"),k(cr.mute)&&(cr.mute=cr.mute==="1"),k(cr.muteType))switch(cr.muteType){case"0":cr.mute=!1,cr.muteType="none";break;case"1":cr.mute=!0,cr.muteType="normal";break;case"3":cr.mute=!0,cr.muteType="all"}else k(cr.mute)&&(cr.mute===1?(cr.mute=!0,cr.muteType="normal"):(cr.mute=!1,cr.muteType="none"));return g(re).call(re,y(At).call(At,null,cr)),delete cr.bits,Et||kt.fillProperties(cr),cr},kt.fillProperties=function(ze){var Et=L(ze,"beInviteMode","needVerify"),cr=L(ze,"inviteMode","manager"),er=L(ze,"updateTeamMode","manager"),or=L(ze,"updateCustomMode","manager"),dr=L(ze,"avatar","");return Et||cr||er||or||dr},t.exports=kt},function(t,r,e){var n=e(48).clientTypeMap;function g(){}g.reverse=function(y){var i=y;return i.type=n[i.type],i},g.reverseType=function(y){return n[y]||y},t.exports=g},function(t,r,e){var n=e(24),g=e(121),y=e(8),i=e(12),k=e(70);function L(){if(!navigator||!navigator.userAgent)return!1;var z=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return g(z).call(z,function(re){return navigator.userAgent.match(re)})}function $(){var z;return!(!navigator||!navigator.userAgent)&&(typeof navigator>"u"?"undefined":n(navigator))==="object"&&typeof navigator.userAgent=="string"&&y(z=navigator.userAgent).call(z,"Electron")>=0}function V(){return navigator&&navigator.userAgent}t.exports={getHostEnv:function(){return i.isBrowser?$()?"Electron":L()?"H5":V()?"BROWSER":"Unset":i.isRN?"RN":i.isWeixinApp?"Weixin":"Unset"},getHostEnvEnum:function(){return i.isBrowser?$()?5:L()?101:V()?100:0:i.isRN?2:i.isWeixinApp?6:0},getHostEnvVer:function(){if(!i.isBrowser)return"";if(!$())return k.version;try{return navigator.userAgent.match(/Electron\/([\d.]+\d+)/)[1]||k.version}catch{return k.version}},getLibEnv:function(){return"BROWSER"}}},function(t,r,e){var n=e(19),g=e(34),y=e(6),i=e(81),k=e(202),L=e(12),$=e(794),V=e(922),z=e(0),re=z.verifyOptions,oe=z.verifyParamType,le=e(26).reportAPI,ue=e(156).Chatroom,ie=e(164);function ae(de){var Ie=ie(de);return this.subType="chatroom",this.nosScene=Ie.nosScene||"chatroom",this.nosSurvivalTime=Ie.nosSurvivalTime,Ie.Protocol=k,Ie.Message=V,Ie.constructor=ae,Ie.isAnonymous&&(Ie.account=Ie.account||"nimanon_".concat(z.guid()),Ie.isAnonymous=1,z.verifyOptions(Ie,"chatroomNick","api::Chatroom"),Ie.chatroomAvatar=Ie.chatroomAvatar||" "),this.init(Ie)}ae.Protocol=k,ae.parser=ue,ae.use=i.use,ae.getInstance=function(de){return de.isAnonymous&&(de.account=de.account||"nimanon_".concat(z.guid()),de.isAnonymous=1,z.verifyOptions(de,"chatroomNick","api::Chatroom.getInstance"),de.chatroomAvatar=de.chatroomAvatar||" "),i.getInstance.call(this,de)},ae.genInstanceName=function(de){return z.verifyOptions(de,"chatroomId","api::Chatroom.genInstanceName"),"Chatroom-account-"+de.account+"-chatroomId-"+de.chatroomId};var Fe=ae.fn=ae.prototype=n(i.prototype);ae.info=Fe.info=L.info,Fe.getChatroom=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"getChatroom",done:de.done}),this.processCallback(de),this.sendCmd("getChatroom",de)},Fe.updateChatroom=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"updateChatroom",done:de.done}),re(de,"chatroom needNotify","api::updateChatroom"),oe("needNotify",de.needNotify,"boolean"),this.processCustom(de),this.processCallback(de),de.chatroom=new $(de.chatroom),de.antispamTag={antiSpamBusinessId:de.antiSpamBusinessId},this.sendCmd("updateChatroom",de)},Fe.closeChatroom=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"closeChatroom",done:de.done}),this.processCustom(de),this.processCallback(de),this.sendCmd("closeChatroom",de)},Fe.updateTags=function(de){(de=de||{}).done=le({instance:this,className:"ChatroomFn",funcName:"updateTags",done:de.done}),z.validate({tags:{type:"array",required:!1},notifyTargetTags:{type:"string",allowEmpty:!0,required:!1},needNotify:{type:"boolean",required:!1}},de,"chatroom::updateTags");var Ie=g({},de);this.processCallback(Ie),Ie.tags&&(Ie.tags=y(Ie.tags)),Ie.needNotify&&(Ie.needNotify=Ie.needNotify?1:0),this.sendCmd("updateChatroomTags",{chatRoomTagsUpdateTag:Ie},Ie.done)},t.exports=ae,e(932),e(933),e(934),e(935)},function(t,r,e){var n=e(19),g=e(23),y=e(11),i=e(10),k=e(82),L=e(0),$=L.undef,V=L.notundef,z=e(297),re=e(12),oe=e(156),le=e(794),ue=e(319);function ie(de){var Ie,Ve,kt;L.verifyOptions(de,"appKey account chatroomId chatroomAddresses","protocol::ChatroomProtocol"),de.isAnonymous||L.verifyOptions(de,"token","protocol::ChatroomProtocol"),L.verifyParamType("chatroomAddresses",de.chatroomAddresses,"array","protocol::ChatroomProtocol"),L.verifyCallback(de,"onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots","protocol::ChatroomProtocol"),Ie=typeof L.get(de,"privateConf.isDataReportEnable")=="boolean"?de.privateConf.isDataReportEnable:re.privateConf.isDataReportEnable,Ve=typeof L.get(de,"privateConf.reportConfigUrl")=="string"?de.privateConf.reportConfigUrl:re.privateConf.reportConfigUrl,kt=typeof L.get(de,"privateConf.reportUrl")=="string"?de.privateConf.reportUrl:re.privateConf.reportUrl,this.reporter=z.initReporter({isDataReportEnable:Ie,reportConfigUrl:Ve,reportUrl:kt,appKey:de.appKey,logger:this.logger}),k.call(this,de)}var ae=k.fn,Fe=ie.fn=ie.prototype=n(ae);Fe.init=function(){var de;ae.init.call(this),oe.Chatroom.setProtocol(this),this.parser=oe.Chatroom,g(de=this.sendCmd).call(de,this),this.syncResult={},this.timetags={},this.msgBuffer=[]},Fe.reset=function(){var de=this;ae.reset.call(de);var Ie,Ve=de.options;de.autoconnect=!!Ve.autoconnect,$(Ve.msgBufferInterval)&&(Ve.msgBufferInterval=300),L.verifyParamType("msgBufferInterval",Ve.msgBufferInterval,"number","protocol::ChatroomProtocol.reset"),$(Ve.msgBufferSize)&&(Ve.msgBufferSize=500),L.verifyParamType("msgBufferSize",Ve.msgBufferSize,"number","protocol::ChatroomProtocol.reset"),V(Ve.chatroomAddresses)&&(de.socketUrlsBackup=y(Ie=Ve.chatroomAddresses).call(Ie,function(kt){return re.formatSocketUrl({url:kt,secure:de.options.secure})}))},Fe.processChatroom=function(de){switch(de.cmd){case"login":de.error||(de.obj={chatroom:i(le).call(le,de.content.chatroom),member:i(ue).call(ue,de.content.chatroomMember)},this.cdnInfo={},this.initCdnData(),clearTimeout(this.queryCdnTimer),this.onCdnMsgInfo(de.content.chatroomCdnInfo));break;case"kicked":this.onKicked(de);break;case"logout":break;case"sendMsg":this.onSendMsg(de);break;case"msg":this.onMsg(de),this.cdnInfo&&this.cdnInfo.enable&&this.correctCdnTime(+de.content.msg.time);break;case"getChatroomMembers":case"getChatroomMembersByTag":this.onChatroomMembers(de);break;case"getChatroomMemberCountByTag":this.onGetChatroomMemberCountByTag(de);break;case"getHistoryMsgs":case"getHistoryMsgsByTags":this.onHistoryMsgs(de);break;case"markChatroomMember":this.onMarkChatroomMember(de);break;case"closeChatroom":break;case"getChatroom":this.onChatroom(de);break;case"updateChatroom":break;case"updateMyChatroomMemberInfo":delete de.obj.chatroomMember;break;case"getChatroomMembersInfo":this.onChatroomMembersInfo(de);break;case"kickChatroomMember":case"updateChatroomMemberTempMute":break;case"queueList":de.error||(de.obj=de.content);break;case"syncRobot":this.onSyncRobot(de);break;case"notifyCdnInfo":this.onCdnMsgInfo(de.content&&de.content.chatroomCdnInfo);break;case"updateChatroomTag":this.onTagsUpdate(de.content)}},Fe.onChatroom=function(de){de.error||(de.obj.chatroom=i(le).call(le,de.content.chatroom))},Fe.onTagsUpdate=function(de){if(this.logger.info("onTagsUpdate:: ",de),this.options.onTagsUpdate&&typeof this.options.onTagsUpdate=="function"){var Ie=de.updateTags&&de.updateTags.currentTags;try{Ie=JSON.parse(Ie)}catch(Ve){this.logger.error("onTagsUpdate:: parse tags failed",Ve)}this.options.onTagsUpdate(Ie)}},t.exports=ie,e(910),e(911),e(912),e(921)},function(t,r){t.exports=function(e,n){for(var g=n.split(".");g.length;){var y=g.shift(),i=!1;if(y[y.length-1]=="?"&&(y=y.slice(0,-1),i=!0),!(e=e[y])&&i)return e}return e}},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(264),g=e(272);t.exports=function(y){return y!=null&&g(y.length)&&!n(y)}},function(t,r,e){var n=e(11),g=e(10),y=e(0),i=y.notundef,k=y.fillPropertyWithDefault,L={0:"normal",1:"owner",2:"manager"};function $(V){y.verifyOptions(V,"teamId","superTeam::TeamMember"),y.verifyParamAtLeastPresentOne(V,"nickInTeam muteTeam custom muteNotiType","superTeam::SuperTeamMember"),this.teamId=V.teamId,i(V.account)&&(this.account=V.account),i(V.nickInTeam)&&(this.nickInTeam=V.nickInTeam),i(V.muteNotiType)?this.bits=V.muteNotiType:i(V.muteTeam)&&(this.bits=0,V.muteTeam&&(this.bits+=1)),i(V.mute)&&(this.mute=V.mute?1:0),i(V.custom)&&(this.custom=""+V.custom)}$.reverse=function(V){var z=y.copy(V);if(i(z.teamId)&&(z.teamId=""+z.teamId),i(z.type)&&(z.type=L[z.type]),i(z.active)&&(z.active=+z.active==1),i(z.valid)&&(z.valid=+z.valid==1),i(z.mute)&&(z.mute=+z.mute==1),i(z.joinTime)&&(z.joinTime=+z.joinTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),i(z.bits)){var re=z.bits;delete z.bits,z.muteTeam=!!(1&re),z.muteNotiType=re}return i(z.teamId)&&i(z.account)&&(z.id=$.genId(z.teamId,z.account)),i(z.followAccountIds)&&(z.followAccountIds=JSON.parse(z.followAccountIds)),z},$.reverseMembers=function(V){return n(V).call(V,function(z){return g($).call($,z)})},$.fillProperties=function(V){var z=k(V,"mute",!1),re=k(V,"custom","");return z||re},$.genId=function(V,z){return V+"-"+z},$.accounts2ids=function(V,z){return n(z).call(z,function(re){return $.genId(V,re)})},$.assembleMembers=function(V,z){return y.isArray(z)||(z=[z]),n(z).call(z,function(re){return $.assembleMember(V,re)})},$.assembleMember=function(V,z){return{id:$.genId(V.teamId,z),account:z,teamId:V.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:V.memberUpdateTime,updateTime:V.memberUpdateTime,active:!0,valid:!0,followAccountIds:[]}},$.assembleOwner=function(V){var z=$.assembleMember(V,V.owner);return z.type="owner",z},t.exports=$},function(t,r,e){var n=e(688),g=e(692),y=e(314),i=e(696);t.exports=function(k,L){return n(k)||g(k,L)||y(k,L)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(11),g=e(10),y=e(5),i=e(110).genPrivateUrl,k=e(0),L={unknown:0,male:1,female:2},$={0:"unknown",1:"male",2:"female"};function V(z){k.merge(this,z),k.notundef(this.gender)&&(k.verifyParamValid("gender",this.gender,V.validGenders,"user::User"),this.gender=L[this.gender]),k.notundef(this.email)&&this.email!==""&&k.verifyEmail("email",this.email,"user::User"),k.notundef(this.birth)&&this.birth!==""&&k.verifyBirth("birth",this.birth,"user::User"),k.notundef(this.tel)&&this.tel!==""&&k.verifyTel("tel",this.tel,"user::User")}V.reverse=function(z,re,oe){var le=k.filterObj(z,"account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");return k.notundef(le.avatar)&&(le.avatar=i(le.avatar,re,oe)),k.notundef(le.gender)&&(le.gender=$[le.gender]),k.notundef(le.createTime)&&(le.createTime=+le.createTime),k.notundef(le.updateTime)&&(le.updateTime=+le.updateTime),le},V.reverseUsers=function(z){return n(z).call(z,function(re){return g(V).call(V,re)})},V.validGenders=y(L),t.exports=V},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(8),k=e(110).genPrivateUrl,L=e(80),$=e(0),V=e(12);function z(ue,ie){switch($.notundef(ue.type)?$.verifyFileType(ue.type,"msg::FileMessage"):ue.type="file",$.verifyOptions(ue,"file","msg::FileMessage"),$.verifyOptions(ue.file,"url ext size",!0,"file.","msg::FileMessage"),ue.type){case"image":re.verifyFile(ue.file,"msg::FileMessage");break;case"audio":oe.verifyFile(ue.file,"msg::FileMessage");break;case"video":le.verifyFile(ue.file,"msg::FileMessage")}L.call(this,ue),ie&&(this.idClient=ie),this.attach=n(ue.file)}z.prototype=g(L.prototype),z.reverse=function(ue){var ie=y(L).call(L,ue);if(ue.attach=ue.attach?""+ue.attach:"",ue.attach&&(ie.file=JSON.parse(ue.attach),!ie.file.isS3)){var ae,Fe;ie.file.url=k(ie.file.url)||"",ie.type==="audio"&&ie.file.url&&!ie.file.mp3Url&&(ie.file.mp3Url=ie.file.url+(~i(Fe=ie.file.url).call(Fe,"?")?"&":"?")+"audioTrans&type=mp3"),V.httpsEnabled&&i(ae=ie.file.url).call(ae,"https://")!==0&&(ie.file.url=ie.file.url.replace("http","https"))}return ie},t.exports=z;var re=e(858),oe=e(859),le=e(860)},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(8),k=e(110).genPrivateUrl,L=e(123),$=e(0),V=e(12);function z(ue,ie){switch($.notundef(ue.type)?$.verifyFileType(ue.type,"msg::FileMessage"):ue.type="file",$.verifyOptions(ue,"file","msg::FileMessage"),$.verifyOptions(ue.file,"url ext size",!0,"file.","msg::FileMessage"),ue.type){case"image":re.verifyFile(ue.file,"msg::FileMessage");break;case"audio":oe.verifyFile(ue.file,"msg::FileMessage");break;case"video":le.verifyFile(ue.file,"msg::FileMessage")}L.call(this,ue),ie&&(this.idClient=ie),this.attach=n(ue.file)}z.prototype=g(L.prototype),z.reverse=function(ue){var ie=y(L).call(L,ue);if(ue.attach=ue.attach?""+ue.attach:"",ue.attach&&(ie.file=JSON.parse(ue.attach),!ie.file.isS3)){var ae,Fe;ie.file.url=k(ie.file.url)||"",ie.type==="audio"&&ie.file.url&&!ie.file.mp3Url&&(ie.file.mp3Url=ie.file.url+(~i(Fe=ie.file.url).call(Fe,"?")?"&":"?")+"audioTrans&type=mp3"),V.httpsEnabled&&i(ae=ie.file.url).call(ae,"https://")!==0&&(ie.file.url=ie.file.url.replace("http","https"))}return ie},t.exports=z;var re=e(924),oe=e(925),le=e(926)},function(t,r,e){var n=e(322);t.exports=n},function(t,r){var e=typeof document=="object"&&document.all,n=e===void 0&&e!==void 0;t.exports={all:e,IS_HTMLDDA:n}},function(t,r,e){var n=e(99);t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(t,r,e){var n=e(29),g=e(7),y=e(169);t.exports=!n&&!g(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},function(t,r,e){var n=e(7),g=e(17),y=/#|\.prototype\./,i=function(z,re){var oe=L[k(z)];return oe==V||oe!=$&&(g(re)?n(re):!!re)},k=i.normalize=function(z){return String(z).replace(y,".").toLowerCase()},L=i.data={},$=i.NATIVE="N",V=i.POLYFILL="P";t.exports=i},function(t,r,e){var n=e(29),g=e(7);t.exports=n&&g(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(t,r,e){var n=e(1),g=e(7),y=e(87),i=e(30),k=e(46),L=e(49),$=e(218),V=e(101),z=e(171),re=e(116),oe=e(21),le=e(100),ue=oe("isConcatSpreadable"),ie=le>=51||!g(function(){var de=[];return de[ue]=!1,de.concat()[0]!==de}),ae=re("concat"),Fe=function(de){if(!i(de))return!1;var Ie=de[ue];return Ie!==void 0?!!Ie:y(de)};n({target:"Array",proto:!0,arity:1,forced:!ie||!ae},{concat:function(de){var Ie,Ve,kt,At,ze,Et=k(this),cr=z(Et,0),er=0;for(Ie=-1,kt=arguments.length;Ie<kt;Ie++)if(Fe(ze=Ie===-1?Et:arguments[Ie]))for(At=L(ze),$(er+At),Ve=0;Ve<At;Ve++,er++)Ve in ze&&V(cr,er,ze[Ve]);else $(er+1),V(cr,er++,ze);return cr.length=er,cr}})},function(t,r){var e=TypeError;t.exports=function(n){if(n>9007199254740991)throw e("Maximum allowed index exceeded");return n}},function(t,r,e){var n=e(13),g=e(17),y=e(168),i=n(Function.toString);g(y.inspectSource)||(y.inspectSource=function(k){return i(k)}),t.exports=y.inspectSource},function(t,r,e){var n=e(334);t.exports=n},function(t,r,e){var n=e(13),g=e(31),y=e(47),i=e(170).indexOf,k=e(117),L=n([].push);t.exports=function($,V){var z,re=y($),oe=0,le=[];for(z in re)!g(k,z)&&g(re,z)&&L(le,z);for(;V.length>oe;)g(re,z=V[oe++])&&(~i(le,z)||L(le,z));return le}},function(t,r,e){var n=e(33);t.exports=n("document","documentElement")},function(t,r,e){var n=e(339);e(75),t.exports=n},function(t,r,e){e(340),e(343),e(344),e(228),e(345)},function(t,r,e){var n=e(114),g=e(49),y=e(101),i=Array,k=Math.max;t.exports=function(L,$,V){for(var z=g(L),re=n($,z),oe=n(V===void 0?z:V,z),le=i(k(oe-re,0)),ue=0;re<oe;re++,ue++)y(le,ue,L[re]);return le.length=ue,le}},function(t,r,e){var n=e(20),g=e(33),y=e(21),i=e(74);t.exports=function(){var k=g("Symbol"),L=k&&k.prototype,$=L&&L.valueOf,V=y("toPrimitive");L&&!L[V]&&i(L,V,function(z){return n($,this)},{arity:1})}},function(t,r,e){var n=e(99);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},function(t,r,e){var n=e(1),g=e(33),y=e(83),i=e(20),k=e(13),L=e(7),$=e(87),V=e(17),z=e(30),re=e(131),oe=e(104),le=e(99),ue=g("JSON","stringify"),ie=k(/./.exec),ae=k("".charAt),Fe=k("".charCodeAt),de=k("".replace),Ie=k(1 .toString),Ve=/[\uD800-\uDFFF]/g,kt=/^[\uD800-\uDBFF]$/,At=/^[\uDC00-\uDFFF]$/,ze=!le||L(function(){var or=g("Symbol")();return ue([or])!="[null]"||ue({a:or})!="{}"||ue(Object(or))!="{}"}),Et=L(function(){return ue("\uDF06\uD834")!=='"\\udf06\\ud834"'||ue("\uDEAD")!=='"\\udead"'}),cr=function(or,dr){var lr=oe(arguments),nr=dr;if((z(dr)||or!==void 0)&&!re(or))return $(dr)||(dr=function(ur,ar){if(V(nr)&&(ar=i(nr,this,ur,ar)),!re(ar))return ar}),lr[1]=dr,y(ue,null,lr)},er=function(or,dr,lr){var nr=ae(lr,dr-1),ur=ae(lr,dr+1);return ie(kt,or)&&!ie(At,ur)||ie(At,or)&&!ie(kt,nr)?"\\u"+Ie(Fe(or,0),16):or};ue&&n({target:"JSON",stat:!0,arity:3,forced:ze||Et},{stringify:function(or,dr,lr){var nr=oe(arguments),ur=y(ze?cr:ue,null,nr);return Et&&typeof ur=="string"?de(ur,Ve,er):ur}})},function(t,r,e){e(25)("iterator")},function(t,r,e){var n=e(25),g=e(226);n("toPrimitive"),g()},function(t,r,e){var n=e(29),g=e(31),y=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,k=g(y,"name"),L=k&&(function(){}).name==="something",$=k&&(!n||n&&i(y,"name").configurable);t.exports={EXISTS:k,PROPER:L,CONFIGURABLE:$}},function(t,r,e){var n,g,y,i=e(7),k=e(17),L=e(30),$=e(88),V=e(138),z=e(74),re=e(21),oe=e(57),le=re("iterator"),ue=!1;[].keys&&("next"in(y=[].keys())?(g=V(V(y)))!==Object.prototype&&(n=g):ue=!0),!L(n)||i(function(){var ie={};return n[le].call(ie)!==ie})?n={}:oe&&(n=$(n)),k(n[le])||z(n,le,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:ue}},function(t,r,e){var n=e(7);t.exports=!n(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},function(t,r,e){var n=e(13),g=e(115),y=e(58),i=e(112),k=n("".charAt),L=n("".charCodeAt),$=n("".slice),V=function(z){return function(re,oe){var le,ue,ie=y(i(re)),ae=g(oe),Fe=ie.length;return ae<0||ae>=Fe?z?"":void 0:(le=L(ie,ae))<55296||le>56319||ae+1===Fe||(ue=L(ie,ae+1))<56320||ue>57343?z?k(ie,ae):le:z?$(ie,ae,ae+2):ue-56320+(le-55296<<10)+65536}};t.exports={codeAt:V(!1),charAt:V(!0)}},function(t,r,e){var n=e(378);t.exports=n},function(t,r,e){e(75);var n=e(73),g=e(31),y=e(18),i=e(380),k=Array.prototype,L={DOMTokenList:!0,NodeList:!0};t.exports=function($){var V=$.forEach;return $===k||y(k,$)&&V===k.forEach||g(L,n($))?i:V}},function(t,r,e){var n=e(388);t.exports=n},function(t,r,e){var n=e(392);e(75),t.exports=n},function(t,r,e){e(393)},function(t,r,e){var n=e(33),g=e(13),y=e(135),i=e(136),k=e(38),L=g([].concat);t.exports=n("Reflect","ownKeys")||function($){var V=y.f(k($)),z=i.f;return z?L(V,z($)):V}},function(t,r,e){var n=e(21),g=e(105),y=n("iterator"),i=Array.prototype;t.exports=function(k){return k!==void 0&&(g.Array===k||i[y]===k)}},function(t,r,e){var n=e(20),g=e(32),y=e(38),i=e(85),k=e(140),L=TypeError;t.exports=function($,V){var z=arguments.length<2?k($):V;if(g(z))return y(n(z,$));throw L(i($)+" is not iterable")}},function(t,r,e){var n=e(20),g=e(38),y=e(167);t.exports=function(i,k,L){var $,V;g(i);try{if(!($=y(i,"return"))){if(k==="throw")throw L;return L}$=n($,i)}catch(z){V=!0,$=z}if(k==="throw")throw L;if(V)throw $;return g($),L}},function(t,r,e){var n=e(33),g=e(40),y=e(21),i=e(29),k=y("species");t.exports=function(L){var $=n(L),V=g.f;i&&$&&!$[k]&&V($,k,{configurable:!0,get:function(){return this}})}},function(t,r,e){var n=e(38),g=e(179),y=e(98),i=e(21)("species");t.exports=function(k,L){var $,V=n(k).constructor;return V===void 0||y($=n(V)[i])?L:g($)}},function(t,r,e){var n,g,y,i,k=e(16),L=e(83),$=e(36),V=e(17),z=e(31),re=e(7),oe=e(222),le=e(104),ue=e(169),ie=e(247),ae=e(248),Fe=e(119),de=k.setImmediate,Ie=k.clearImmediate,Ve=k.process,kt=k.Dispatch,At=k.Function,ze=k.MessageChannel,Et=k.String,cr=0,er={};try{n=k.location}catch{}var or=function(ur){if(z(er,ur)){var ar=er[ur];delete er[ur],ar()}},dr=function(ur){return function(){or(ur)}},lr=function(ur){or(ur.data)},nr=function(ur){k.postMessage(Et(ur),n.protocol+"//"+n.host)};de&&Ie||(de=function(ur){ie(arguments.length,1);var ar=V(ur)?ur:At(ur),gr=le(arguments,1);return er[++cr]=function(){L(ar,void 0,gr)},g(cr),cr},Ie=function(ur){delete er[ur]},Fe?g=function(ur){Ve.nextTick(dr(ur))}:kt&&kt.now?g=function(ur){kt.now(dr(ur))}:ze&&!ae?(i=(y=new ze).port2,y.port1.onmessage=lr,g=$(i.postMessage,i)):k.addEventListener&&V(k.postMessage)&&!k.importScripts&&n&&n.protocol!=="file:"&&!re(nr)?(g=nr,k.addEventListener("message",lr,!1)):g="onreadystatechange"in ue("script")?function(ur){oe.appendChild(ue("script")).onreadystatechange=function(){oe.removeChild(this),or(ur)}}:function(ur){setTimeout(dr(ur),0)}),t.exports={set:de,clear:Ie}},function(t,r){var e=TypeError;t.exports=function(n,g){if(n<g)throw e("Not enough arguments");return n}},function(t,r,e){var n=e(72);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(t,r){t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},function(t,r,e){var n=e(107),g=e(251),y=e(120).CONSTRUCTOR;t.exports=y||!g(function(i){n.all(i).then(void 0,function(){})})},function(t,r,e){var n=e(21)("iterator"),g=!1;try{var y=0,i={next:function(){return{done:!!y++}},return:function(){g=!0}};i[n]=function(){return this},Array.from(i,function(){throw 2})}catch{}t.exports=function(k,L){if(!L&&!g)return!1;var $=!1;try{var V={};V[n]=function(){return{next:function(){return{done:$=!0}}}},k(V)}catch{}return $}},function(t,r,e){var n=e(38),g=e(30),y=e(76);t.exports=function(i,k){if(n(i),g(k)&&k.constructor===i)return k;var L=y.f(i);return(0,L.resolve)(k),L.promise}},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(76),k=e(106),L=e(50);n({target:"Promise",stat:!0},{allSettled:function($){var V=this,z=i.f(V),re=z.resolve,oe=z.reject,le=k(function(){var ue=y(V.resolve),ie=[],ae=0,Fe=1;L($,function(de){var Ie=ae++,Ve=!1;Fe++,g(ue,V,de).then(function(kt){Ve||(Ve=!0,ie[Ie]={status:"fulfilled",value:kt},--Fe||re(ie))},function(kt){Ve||(Ve=!0,ie[Ie]={status:"rejected",reason:kt},--Fe||re(ie))})}),--Fe||re(ie)});return le.error&&oe(le.value),z.promise}})},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(33),k=e(76),L=e(106),$=e(50);n({target:"Promise",stat:!0},{any:function(V){var z=this,re=i("AggregateError"),oe=k.f(z),le=oe.resolve,ue=oe.reject,ie=L(function(){var ae=y(z.resolve),Fe=[],de=0,Ie=1,Ve=!1;$(V,function(kt){var At=de++,ze=!1;Ie++,g(ae,z,kt).then(function(Et){ze||Ve||(Ve=!0,le(Et))},function(Et){ze||Ve||(ze=!0,Fe[At]=Et,--Ie||ue(new re(Fe,"No one promise resolved")))})}),--Ie||ue(new re(Fe,"No one promise resolved"))});return ie.error&&ue(ie.value),oe.promise}})},function(t,r,e){var n=e(416);t.exports=n},function(t,r,e){var n=e(24).default,g=e(418);t.exports=function(y){var i=g(y,"string");return n(i)==="symbol"?i:String(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(426);t.exports=n},function(t,r,e){var n=e(85),g=TypeError;t.exports=function(y,i){if(!delete y[i])throw g("Cannot delete property "+n(i)+" of "+n(y))}},function(t,r,e){e(461),e(463)},function(t,r,e){var n,g=e(16),y=e(83),i=e(17),k=e(462),L=e(72),$=e(104),V=e(247),z=g.Function,re=/MSIE .\./.test(L)||k&&((n=g.Bun.version.split(".")).length<3||n[0]==0&&(n[1]<3||n[1]==3&&n[2]==0));t.exports=function(oe,le){var ue=le?2:1;return re?function(ie,ae){var Fe=V(arguments.length,1)>ue,de=i(ie)?ie:z(ie),Ie=Fe?$(arguments,ue):[],Ve=Fe?function(){y(de,this,Ie)}:de;return le?oe(Ve,ae):oe(Ve)}:oe}},function(t,r,e){var n=e(477);t.exports=n},function(t,r,e){var n=e(486);t.exports=n},function(t,r){t.exports=function e(n,g){var y,i,k=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,L=/(^[ ]*|[ ]*$)/g,$=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,V=/^0x[0-9a-f]+$/i,z=/^0/,re=function(Ve){return e.insensitive&&(""+Ve).toLowerCase()||""+Ve},oe=re(n).replace(L,"")||"",le=re(g).replace(L,"")||"",ue=oe.replace(k,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),ie=le.replace(k,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),ae=parseInt(oe.match(V),16)||ue.length!==1&&oe.match($)&&Date.parse(oe),Fe=parseInt(le.match(V),16)||ae&&le.match($)&&Date.parse(le)||null;if(Fe){if(ae<Fe)return-1;if(ae>Fe)return 1}for(var de=0,Ie=Math.max(ue.length,ie.length);de<Ie;de++){if(y=!(ue[de]||"").match(z)&&parseFloat(ue[de])||ue[de]||0,i=!(ie[de]||"").match(z)&&parseFloat(ie[de])||ie[de]||0,isNaN(y)!==isNaN(i))return isNaN(y)?1:-1;if(typeof y!=typeof i&&(y+="",i+=""),y<i)return-1;if(y>i)return 1}return 0}},function(t,r,e){var n=e(126),g=e(94);t.exports=function(y){if(!g(y))return!1;var i=n(y);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"}},function(t,r,e){(function(n){var g=typeof n=="object"&&n&&n.Object===Object&&n;t.exports=g}).call(this,e(77))},function(t,r){var e=Function.prototype.toString;t.exports=function(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}},function(t,r,e){var n=e(515),g=e(522),y=e(524),i=e(525),k=e(526);function L($){var V=-1,z=$==null?0:$.length;for(this.clear();++V<z;){var re=$[V];this.set(re[0],re[1])}}L.prototype.clear=n,L.prototype.delete=g,L.prototype.get=y,L.prototype.has=i,L.prototype.set=k,t.exports=L},function(t,r,e){var n=e(269),g=e(204),y=Object.prototype.hasOwnProperty;t.exports=function(i,k,L){var $=i[k];y.call(i,k)&&g($,L)&&(L!==void 0||k in i)||n(i,k,L)}},function(t,r,e){var n=e(528);t.exports=function(g,y,i){y=="__proto__"&&n?n(g,y,{configurable:!0,enumerable:!0,value:i,writable:!0}):g[y]=i}},function(t,r,e){var n=e(530),g=e(531),y=e(183),i=e(271),k=e(306),L=e(534),$=Object.prototype.hasOwnProperty;t.exports=function(V,z){var re=y(V),oe=!re&&g(V),le=!re&&!oe&&i(V),ue=!re&&!oe&&!le&&L(V),ie=re||oe||le||ue,ae=ie?n(V.length,String):[],Fe=ae.length;for(var de in V)!z&&!$.call(V,de)||ie&&(de=="length"||le&&(de=="offset"||de=="parent")||ue&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||k(de,Fe))||ae.push(de);return ae}},function(t,r,e){(function(n){var g=e(59),y=e(533),i=r&&!r.nodeType&&r,k=i&&typeof n=="object"&&n&&!n.nodeType&&n,L=k&&k.exports===i?g.Buffer:void 0,$=(L?L.isBuffer:void 0)||y;n.exports=$}).call(this,e(150)(t))},function(t,r){t.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(t,r){t.exports=function(e,n){return function(g){return e(n(g))}}},function(t,r){t.exports=function(){return[]}},function(t,r,e){var n=e(276),g=e(277),y=e(188),i=e(274),k=Object.getOwnPropertySymbols?function(L){for(var $=[];L;)n($,y(L)),L=g(L);return $}:i;t.exports=k},function(t,r){t.exports=function(e,n){for(var g=-1,y=n.length,i=e.length;++g<y;)e[i+g]=n[g];return e}},function(t,r,e){var n=e(273)(Object.getPrototypeOf,Object);t.exports=n},function(t,r,e){var n=e(276),g=e(183);t.exports=function(y,i,k){var L=i(y);return g(y)?L:n(L,k(y))}},function(t,r,e){var n=e(91)(e(59),"Set");t.exports=n},function(t,r,e){var n=e(577);t.exports=n},function(t,r,e){var n=e(13),g=e(32),y=e(30),i=e(31),k=e(104),L=e(111),$=Function,V=n([].concat),z=n([].join),re={},oe=function(le,ue,ie){if(!i(re,ue)){for(var ae=[],Fe=0;Fe<ue;Fe++)ae[Fe]="a["+Fe+"]";re[ue]=$("C,a","return new C("+z(ae,",")+")")}return re[ue](le,ie)};t.exports=L?$.bind:function(le){var ue=g(this),ie=ue.prototype,ae=k(arguments,1),Fe=function(){var de=V(ae,k(arguments));return this instanceof Fe?oe(ue,de.length,de):ue.apply(le,de)};return y(ie)&&(Fe.prototype=ie),Fe}},function(t,r,e){var n=e(93),g=e(8),y=e(63),i=e(128),k=e(6),L=e(66),$=L.getGlobal(),V={},z=$.name||"_parent",re=[],oe=[];V.addMsgListener=function(kt){re.push(kt)};var le,ue,ie,ae,Fe=(le=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(kt){return kt=kt||"",le.test(kt)?RegExp.$1:"*"}),de=function(){var kt,At,ze=n(kt=unescape($.name||"")).call(kt);if(ze&&g(ze).call(ze,"MSG|")===0){$.name="";var Et=L.string2object(ze.replace("MSG|",""),"|"),cr=(Et.origin||"").toLowerCase();cr&&cr!=="*"&&g(At=location.href.toLowerCase()).call(At,cr)!==0||function(er){for(var or=0,dr=re.length;or<dr;or++)try{re[or].call(null,er)}catch{}}({data:JSON.parse(Et.data||"null"),source:$.frames[Et.self]||Et.self,origin:Fe(Et.ref||(typeof document>"u"?"":document.referrer))})}},Ie=(ie=function(kt,At){for(var ze=0,Et=kt.length;ze<Et;ze++)if(kt[ze]===At)return!0;return!1},function(){if(oe.length){ue=[];for(var kt,At=oe.length-1;At>=0;At--)kt=oe[At],ie(ue,kt.w)||(ue.push(kt.w),y(oe).call(oe,At,1),kt.w.name=kt.d);ue=null}}),Ve=V.startTimer=(ae=!1,function(){ae||(ae=!0,$.postMessage||(i(Ie,100),i(de,20)))});V.postMessage=function(kt){var At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L.fillUndef(At,{origin:"*",source:z}),$.postMessage){var ze=At.data;$.FormData||(ze=k(ze)),kt.postMessage(ze,At.origin)}else{if(Ve(),L.isObject(At)){var Et={};Et.origin=At.origin||"",Et.ref=location.href,Et.self=At.source,Et.data=k(At.data),At="MSG|"+L.object2string(Et,"|",!0)}oe.unshift({w:kt,d:escape(At)})}},t.exports=V},function(t,r,e){var n=e(599);t.exports=n},function(t,r,e){var n=e(0),g={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},y={genResponseBody:function(i){return g[i=i||"file"]},parseResponse:function(i,k){n.notundef(i.size)&&(i.size=+i.size),n.notundef(i.w)&&(i.w=+i.w),n.notundef(i.h)&&(i.h=+i.h),n.notundef(i.dur)&&(i.dur=+i.dur);var L=i.orientation;if(n.notundef(L)&&(delete i.orientation,k&&(L==="right, top"||L==="left, bottom"))){var $=i.w;i.w=i.h,i.h=$}return i}};t.exports=y},function(t,r,e){var n=e(127),g=e(9),y=e(8),i=e(28),k=e(56),L=e(43),$=e(22),V=["Code","code","Message","message"],z=e(12),re=e(0),oe=e(35),le=e(624),ue=e(625),ie=e(109),ae=ie.EMResourceUploadWay,Fe=ie.EMExceptionState,de=e(192).abort,Ie=-1,Ve=re.supportFormData;function kt(ze,Et){var cr=this,er=ze.uploadprogress,or=ze.uploaddone,dr=ze.beginupload;return{beginupload:typeof dr=="function"?function(lr){try{dr(lr,Et)}catch(nr){cr.logger.error("Upload::options.beginupload execute error",nr)}}:function(){},uploadprogress:typeof er=="function"?function(lr){cr.reporterHook.emit("reporter/uploadUpdate",{transferred_size:lr.loaded});try{er(lr,Et)}catch(nr){cr.logger.error("Upload::options.uploadprogress execute error",nr)}}:function(lr){cr.reporterHook.emit("reporter/uploadUpdate",{transferred_size:lr.loaded})},uploaddone:function(lr,nr){lr?cr.reporterHook.emit("reporter/uploadEnd",lr.code==="RequestAbortedError"||lr.code==="abort"?Fe.kCanceled:Fe.kFailed):cr.reporterHook.emit("reporter/uploadEnd",Fe.kSucceed);try{or(lr,nr,null,Et)}catch(ur){cr.logger.error("Upload::options.uploaddone execute error",ur)}}}}function At(ze,Et,cr){var er=this;er.options=re.copy(ze),ze=er.options,re.verifyOptions(ze,"url fileName"),re.verifyParamPresentJustOne(ze,"blob fileInput"),re.verifyCallback(ze,"beginupload uploadprogress uploaddone"),er.reporterHook=Et.reporterHook,er.logger=Et.logger,er.protocol=Et,er.message=cr;var or=kt.call(this,ze,cr),dr=or.beginupload,lr=or.uploadprogress,nr=or.uploaddone;er.options.beginupload=dr,er.options.uploadprogress=lr,er.options.uploaddone=nr,ze.fileInput&&(ze.fileInput=re.verifyFileInput(ze.fileInput)),ze.type&&re.verifyFileType(ze.type),ze.timeout?re.verifyParamType("timeout",ze.timeout,"number"):ze.timeout=6e5,re.verifyFileUploadCallback(ze),ze.data={},ze.params&&re.merge(ze.data,ze.params);var ur,ar,gr=ze.fileName,pr=ze.fileInput;if(Ve){if(pr){if(!(ar=ze.type?re.filterFiles(pr.files,ze.type):g([]).call(pr.files,0))||!ar.length)return void ze.uploaddone(oe.newWrongFileTypeError("未读取到"+ze.type+"类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了"+ze.type+"类型的文件"));ze.data[gr]=ar[0],ur=pr.files[0].size}else if(ze.blob){var hr;if(ze.data[gr]=ze.blob,ze.type!=="file"&&ze.blob.type&&y(hr=ze.blob.type).call(hr,ze.type)===-1)return void ze.uploaddone(oe.newWrongFileTypeError("未读取到"+ze.type+"类型的文件, 请确保选择了"+ze.type+"类型的文件"));ur=ze.blob.size}if(er.reporterHook.emit("reporter/uploadUpdate",{full_size:ur}),ze.maxSize&&ur>ze.maxSize)return void ze.uploaddone(oe.newFileTooLargeError("上传文件大小超过".concat(ze.maxSize,"限制")))}function Cr(){if(Ie+=1,er.logger.info("Upload:enter aws upload"),ur){if(ur>z.chunkMaxSize)ze.uploaddone(oe.newFileTooLargeError("直传文件大小超过".concat(z.commonMaxSize,"限制")));else if(ze.s3Policy&&ze.s3Policy.uploadConfig&&ze.s3Policy.uploadConfig.retryPolicy){var mr=ze.s3Policy.uploadConfig.retryPolicy,_r={accessKeyId:ze.mixStoreToken.accessKeyId,secretAccessKey:ze.mixStoreToken.secretAccessKey,sessionToken:ze.mixStoreToken.sessionToken,region:ze.mixStoreToken.region,maxRetries:mr.retry},Ar=ze.s3,Er={};if(ze.s3Policy&&ze.s3Policy.uploadConfig&&i(ze.s3Policy.uploadConfig.uploadUrl)&&ze.s3Policy.uploadConfig.uploadUrl.length>0){var sr=ze.s3Policy.uploadConfig.uploadUrl.length;Ie%=sr,Er.endpoint=ze.s3Policy.uploadConfig.uploadUrl[Ie],Er.s3ForcePathStyle=!0}var xr=new Ar(Er);xr.config.update(_r);var Nr=er.reporterHook.getNTPTime();xr.config.systemClockOffset=Nr-k();var Mr=decodeURIComponent(ze.mixStoreToken.bucket),br=decodeURIComponent(ze.mixStoreToken.objectName),yr=ze.data[gr],Tr=xr.upload({Bucket:Mr,Key:br,Body:yr,Metadata:{token:ze.mixStoreToken.token},ContentType:yr.type||"application/octet-stream"});Tr.on("httpUploadProgress",function(Br){var Lr=Math.floor(1e4*Br.loaded/Br.total)/100,Fr={docId:ze.docId,total:Br.total,loaded:Br.loaded,percentage:Lr,percentageText:Lr+"%"};ze.fileInput&&(Fr.fileInput=ze.fileInput),ze.blob&&(Fr.blob=ze.blob),ze.uploadprogress(Fr)}),Tr.send(function(Br,Lr){if(ze.errorHook({bucket:Mr,object:br},{provider:"s3"}),ze.docId&&(Lr.docId=ze.docId),Br&&Br.code==="RequestAbortedError")er.logger.error("uploadFile:","api::s3:upload file abort",Br),er.onError(Br);else if(Br){var Fr;ze.logger.error("error:","api::s3:upload file failed",Br);var qr=ze.providers[(y(Fr=ze.providers).call(Fr,ze.curProvider)+1)%ze.providers.length];mr.retryNext&&qr?(er.addCircuitTimer(ze,qr),qr===1&&wr()):er.onError(Lr),ze.errorHook(Br,{provider:"s3"})}else{var Vr=er.options.s3Policy.cdnSchema;Vr=(Vr=Vr.replace("{cdnDomain}",er.options.s3Policy.dlcdn)).replace("{objectName}",Lr.Key),ze.uploaddone(null,{size:yr.size,name:yr.name,url:Vr,ext:yr.name&&yr.name.split(".")[1]||"unknown",_url_safe:ze.mixStoreToken.shortUrl,isS3:!0}),ze.logger.info("s3 Upload done: fileObj is",{size:yr.size,name:yr.name,url:Vr,ext:yr.name&&yr.name.split(".")[1]||"unknown",_url_safe:ze.mixStoreToken.shortUrl,isS3:!0})}}),typeof ze.beginupload=="function"&&ze.beginupload(Tr)}}else ze.uploaddone(oe.newFileTooLargeError("Browser version is too low"))}function wr(){if(er.logger.info("Upload:enter nos upload"),ur&&!ze.commonUpload)return er.logger.info("Upload:use chunk upload, url ".concat(ze.url)),ur>z.chunkMaxSize?void ze.uploaddone(oe.newFileTooLargeError("直传文件大小超过".concat(z.chunkMaxSize,"限制"))):void(er.sn=ue(ze,gr,er,-1));if(er.logger.info("Upload:use common upload, url ".concat(ze.url)),ur&&ur>z.commonMaxSize)ze.uploaddone(oe.newFileTooLargeError("普通上传文件大小超过".concat(z.commonMaxSize,"限制")));else{ur||(re.dataset(pr,"name",gr),ze.data.input=pr);var mr=0,_r={data:ze.data,onaftersend:function(){ze.beginupload(er,er.message)},onuploading:function(Ar){if(mr!==100){var Er=Math.floor(1e4*Ar.loaded/Ar.total)/100;L(Er)>=100&&(mr=Er=100);var sr={docId:ze.docId,total:Ar.total,loaded:Ar.loaded,percentage:Er,percentageText:Er+"%"};ze.fileInput&&(sr.fileInput=ze.fileInput),ze.blob&&(sr.blob=ze.blob),ze.uploadprogress(sr)}},onload:function(Ar){var Er;if(ze.docId&&(Ar.docId=ze.docId),!Ar.Error)return ze.uploaddone(null,Ar),void ze.logger.info("nos Upload done: fileObj is",Ar);if(ze.mixEnable&&ze.curProvider===1){var sr=ze.nosPolicy.uploadConfig.retryPolicy,xr=ze.providers[(y(Er=ze.providers).call(Er,ze.curProvider)+1)%ze.providers.length];sr.retryNext&&xr?(er.addCircuitTimer(ze,xr),xr===2&&ze.getMixStoreToken(2,function(Nr){ze.mixStoreToken=Nr,Cr()})):er.onError(Ar)}else er.onError(Ar)},onerror:function(Ar){var Er;if(ze.mixEnable&&ze.curProvider===1){var sr,xr=ze.nosPolicy.uploadConfig.retryPolicy,Nr=ze.providers[(y(sr=ze.providers).call(sr,ze.curProvider)+1)%ze.providers.length];if(xr.retryNext&&Nr)er.addCircuitTimer(ze,Nr),Nr===2&&ze.getMixStoreToken(2,function(Mr){ze.mixStoreToken=Mr,Cr()});else try{Er=Ar.result?JSON.parse(Ar.result):Ar,er.onError(Er)}catch{ze.uploaddone(new oe(Ar.message,Ar.code),er.options)}}else try{Er=Ar.result?JSON.parse(Ar.result):Ar,er.onError(Er)}catch{ze.uploaddone(new oe(Ar.message,Ar.code),er.options)}ze.errorHook(Ar,{provider:"nos"})}};Ve||(_r.mode="iframe"),_r.putFileAtEnd=!0,er.sn=le(ze.url,_r)}}if(ze.mixEnable&&ze.curProvider===2){var Sr=er.options.s3Policy.cdnSchema;Sr=Sr.replace("{cdnDomain}",er.options.s3Policy.dlcdn),er.reporterHook.emit("reporter/uploadUpdate",{remote_addr:Sr,operation_type:ae.kResourceUploadWayAWSPlugin}),Cr()}else ze.mixEnable&&ze.curProvider===1?(er.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ze.url,operation_type:ae.kResourceUploadWayNOSPlugin}),wr()):(er.reporterHook.emit("reporter/uploadUpdate",{remote_addr:ze.url,operation_type:ae.kResourceUploadWayNOS}),wr())}At.prototype.addCircuitTimer=function(ze,Et){var cr=this;if(ze.curProvider=Et,ze.s3Policy&&ze.nosPolicy){var er=ze[ze.curProvider===1?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!er||er===0)return;cr.circuitTimer&&clearTimeout(cr.circuitTimer),cr.circuitTimer=$(function(){ze.curProvider=ze.providers[0],cr.circuitTimer=void 0},1e3*er)}},At.prototype.onError=function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=this,cr=Et.options,er=ze.Error||ze||{},or=er.Code,dr=er.code,lr=er.Message,nr=er.message,ur=n(er,V),ar=or||dr||"unknown",gr=lr||nr||"未知错误";cr.uploaddone(new oe(gr,ar,ur))},At.prototype.abort=function(){de(this.sn)},t.exports=At},function(t,r,e){var n=e(626);t.exports=n},function(t,r,e){t.exports=e(641)},function(t,r,e){var n=e(644);t.exports=n},function(t,r,e){var n=e(8),g=e(0),y={fromDataURL:function(i){var k,L,$=g.getGlobal();L=n(k=i.split(",")[0]).call(k,"base64")>=0?$.atob(i.split(",")[1]):$.decodeURIComponent(i.split(",")[1]);for(var V=i.split(",")[0].split(":")[1].split(";")[0],z=new Uint8Array(L.length),re=0;re<L.length;re++)z[re]=L.charCodeAt(re);return new $.Blob([z],{type:V})}};t.exports=y},function(t,r,e){var n=e(5),g=e(11),y=e(10),i=e(0),k={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},L={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};function $(V){i.verifyOptions(V,"type","image::ImageOp"),i.verifyParamValid("type",V.type,$.validTypes,"image::ImageOp"),i.merge(this,V),this.type=k[V.type]}$.validTypes=n(k),$.reverse=function(V){var z=i.copy(V);return z.type=L[z.type],z},$.reverseImageOps=function(V){return g(V).call(V,function(z){return y($).call($,z)})},t.exports=$},function(t,r,e){var n=e(2),g=e(5),y={1:"ROOM_CLOSE",2:"ROOM_JOIN",3:"INVITE",4:"CANCEL_INVITE",5:"REJECT",6:"ACCEPT",7:"LEAVE",8:"CONTROL"},i={1:"accid",2:"uid",3:"createTime",4:"expireTime",5:"web_uid"},k={10404:"ROOM_NOT_EXISTS",10405:"ROOM_HAS_EXISTS",10406:"ROOM_MEMBER_NOT_EXISTS",10407:"ROOM_MEMBER_HAS_EXISTS",10408:"INVITE_NOT_EXISTS",10409:"INVITE_HAS_REJECT",10410:"INVITE_HAS_ACCEPT",10201:"PEER_NIM_OFFLINE",10202:"PEER_PUSH_OFFLINE",10419:"ROOM_MEMBER_EXCEED",10420:"ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT",10417:"UID_CONFLICT"};t.exports={parseAvSignalType:function(L){return y[L]||L},parseAvSignalMember:function(L){var $,V={};return n($=g(L)).call($,function(z){V[i[z]]=L[z]}),V},parseAvSignalError:function(L){return L.message=k[L.code]||L.message||L,L}}},function(t,r,e){t.exports=e(662)},function(t,r,e){t.exports=e(673)},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */function getGlobal(){return typeof window<"u"?window:typeof self<"u"?self:global!==void 0?global:{}}var root=getGlobal(),io=module.exports;root.location===void 0&&(root.location=null),root.io?module&&(module.exports=io=root.io):root.io=io,function(){(function(t,r){var e=t;e.version="0.9.11",e.protocol=1,e.transports=[],e.j=[],e.sockets={},e.connect=function(n,g){var y,i,k=e.util.parseUri(n);r&&r.location&&(k.protocol=k.protocol||r.location.protocol.slice(0,-1),k.host=k.host||(r.document?r.document.domain:r.location.hostname),k.port=k.port||r.location.port),y=e.util.uniqueUri(k);var L={host:k.ipv6uri?"["+k.host+"]":k.host,secure:k.protocol==="https",port:k.port||(k.protocol==="https"?443:80),query:k.query||""};return e.util.merge(L,g),!L["force new connection"]&&e.sockets[y]||(i=new e.Socket(L)),!L["force new connection"]&&i&&(e.sockets[y]=i),(i=i||e.sockets[y]).of(k.path.length>1?k.path:"")}})(module.exports,root),function(t,r){var e=t.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(i){var k=i,L=i.indexOf("["),$=i.indexOf("]");L!=-1&&$!=-1&&(i=i.substring(0,L)+i.substring(L,$).replace(/:/g,";")+i.substring($,i.length));for(var V=n.exec(i||""),z={},re=14;re--;)z[g[re]]=V[re]||"";return L!=-1&&$!=-1&&(z.source=k,z.host=z.host.substring(1,z.host.length-1).replace(/;/g,":"),z.authority=z.authority.replace("[","").replace("]","").replace(/;/g,":"),z.ipv6uri=!0),z},e.uniqueUri=function(i){var k=i.protocol,L=i.host,$=i.port;return"document"in r&&r.document?(L=L||document.domain,$=$||(k=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(L=L||"localhost",$||k!="https"||($=443)),(k||"http")+"://"+L+":"+($||80)},e.query=function(i,k){var L=e.chunkQuery(i||""),$=[];for(var V in e.merge(L,e.chunkQuery(k||"")),L)L.hasOwnProperty(V)&&$.push(V+"="+L[V]);return $.length?"?"+$.join("&"):""},e.chunkQuery=function(i){for(var k,L={},$=i.split("&"),V=0,z=$.length;V<z;++V)(k=$[V].split("="))[0]&&(L[k[0]]=k[1]);return L};var y=!1;e.load=function(i){if(typeof document<"u"&&document&&document.readyState==="complete"||y)return i();e.on(r,"load",i,!1)},e.on=function(i,k,L,$){i.attachEvent?i.attachEvent("on"+k,L):i.addEventListener&&i.addEventListener(k,L,$)},e.request=function(i){if(i&&typeof XDomainRequest<"u"&&!e.ua.hasCORS)return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!i||e.ua.hasCORS))return new XMLHttpRequest;if(!i)try{return new root[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},root!==void 0&&e.load(function(){y=!0}),e.defer=function(i){if(!e.ua.webkit||typeof importScripts<"u")return i();e.load(function(){setTimeout(i,100)})},e.merge=function(i,k,L,$){var V,z=$||[],re=L===void 0?2:L;for(V in k)k.hasOwnProperty(V)&&e.indexOf(z,V)<0&&(typeof i[V]=="object"&&re?e.merge(i[V],k[V],re-1,z):(i[V]=k[V],z.push(k[V])));return i},e.mixin=function(i,k){e.merge(i.prototype,k.prototype)},e.inherit=function(i,k){function L(){}L.prototype=k.prototype,i.prototype=new L},e.isArray=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},e.intersect=function(i,k){for(var L=[],$=i.length>k.length?i:k,V=i.length>k.length?k:i,z=0,re=V.length;z<re;z++)~e.indexOf($,V[z])&&L.push(V[z]);return L},e.indexOf=function(i,k,L){var $=i.length;for(L=L<0?L+$<0?0:L+$:L||0;L<$&&i[L]!==k;L++);return $<=L?-1:L},e.toArray=function(i){for(var k=[],L=0,$=i.length;L<$;L++)k.push(i[L]);return k},e.ua={},e.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var i=new XMLHttpRequest}catch{return!1}return i.withCredentials!=null}(),e.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent),e.ua.iDevice=typeof navigator<"u"&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(io!==void 0?io:module.exports,root),function(t,r){function e(){}t.EventEmitter=e,e.prototype.on=function(n,g){return this.$events||(this.$events={}),this.$events[n]?r.util.isArray(this.$events[n])?this.$events[n].push(g):this.$events[n]=[this.$events[n],g]:this.$events[n]=g,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(n,g){var y=this;function i(){y.removeListener(n,i),g.apply(this,arguments)}return i.listener=g,this.on(n,i),this},e.prototype.removeListener=function(n,g){if(this.$events&&this.$events[n]){var y=this.$events[n];if(r.util.isArray(y)){for(var i=-1,k=0,L=y.length;k<L;k++)if(y[k]===g||y[k].listener&&y[k].listener===g){i=k;break}if(i<0)return this;y.splice(i,1),y.length||delete this.$events[n]}else(y===g||y.listener&&y.listener===g)&&delete this.$events[n]}return this},e.prototype.removeAllListeners=function(n){return n===void 0?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)},e.prototype.removeAllListenersX=function(n){if(n===void 0)return this.$events={},this;for(let g in this.$events)g!==n&&(this.$events[g]=null);return this},e.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),r.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]},e.prototype.emit=function(n){if(!this.$events)return!1;var g=this.$events[n];if(!g)return!1;var y=Array.prototype.slice.call(arguments,1);if(typeof g=="function")g.apply(this,y);else{if(!r.util.isArray(g))return!1;for(var i=g.slice(),k=0,L=i.length;k<L;k++)i[k].apply(this,y)}return!0}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,r){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(r){var e=meta[r];return typeof e=="string"?e:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,r){var e,n,g,y,i,k=gap,L=r[t];switch(L instanceof Date&&(L=date(t)),typeof rep=="function"&&(L=rep.call(r,t,L)),typeof L){case"string":return quote(L);case"number":return isFinite(L)?String(L):"null";case"boolean":case"null":return String(L);case"object":if(!L)return"null";if(gap+=indent,i=[],Object.prototype.toString.apply(L)==="[object Array]"){for(y=L.length,e=0;e<y;e+=1)i[e]=str(e,L)||"null";return g=i.length===0?"[]":gap?`[
`+gap+i.join(`,
`+gap)+`
`+k+"]":"["+i.join(",")+"]",gap=k,g}if(rep&&typeof rep=="object")for(y=rep.length,e=0;e<y;e+=1)typeof rep[e]=="string"&&(g=str(n=rep[e],L))&&i.push(quote(n)+(gap?": ":":")+g);else for(n in L)Object.prototype.hasOwnProperty.call(L,n)&&(g=str(n,L))&&i.push(quote(n)+(gap?": ":":")+g);return g=i.length===0?"{}":gap?`{
`+gap+i.join(`,
`+gap)+`
`+k+"}":"{"+i.join(",")+"}",gap=k,g}}JSON.stringify=function(t,r,e){var n;if(gap="",indent="",typeof e=="number")for(n=0;n<e;n+=1)indent+=" ";else typeof e=="string"&&(indent=e);if(rep=r,r&&typeof r!="function"&&(typeof r!="object"||typeof r.length!="number"))throw new Error("socket.io:: replacer cannot JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){var j;function walk(t,r){var e,n,g=t[r];if(g&&typeof g=="object")for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&((n=walk(g,e))!==void 0?g[e]=n:delete g[e]);return reviver.call(t,r,g)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("socket.io:: reviver cannot JSON.parse")}}(io!==void 0?io:module.exports,typeof JSON<"u"?JSON:void 0),function(t,r){var e=t.parser={},n=e.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],g=e.reasons=["transport not supported","client not handshaken","unauthorized"],y=e.advice=["reconnect"],i=r.JSON,k=r.util.indexOf;e.encodePacket=function($){var V=k(n,$.type),z=$.id||"",re=$.endpoint||"",oe=$.ack,le=null;switch($.type){case"error":var ue=$.reason?k(g,$.reason):"",ie=$.advice?k(y,$.advice):"";ue===""&&ie===""||(le=ue+(ie!==""?"+"+ie:""));break;case"message":$.data!==""&&(le=$.data);break;case"event":var ae={name:$.name};$.args&&$.args.length&&(ae.args=$.args),le=i.stringify(ae);break;case"json":le=i.stringify($.data);break;case"connect":$.qs&&(le=$.qs);break;case"ack":le=$.ackId+($.args&&$.args.length?"+"+i.stringify($.args):"")}var Fe=[V,z+(oe=="data"?"+":""),re];return le!=null&&Fe.push(le),Fe.join(":")},e.encodePayload=function($){var V="";if($.length==1)return $[0];for(var z=0,re=$.length;z<re;z++)V+="�"+$[z].length+"�"+$[z];return V};var L=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;e.decodePacket=function($){if(!(re=$.match(L)))return{};var V=re[2]||"",z=($=re[5]||"",{type:n[re[1]],endpoint:re[4]||""});switch(V&&(z.id=V,re[3]?z.ack="data":z.ack=!0),z.type){case"error":var re=$.split("+");z.reason=g[re[0]]||"",z.advice=y[re[1]]||"";break;case"message":z.data=$||"";break;case"event":try{var oe=i.parse($);z.name=oe.name,z.args=oe.args}catch{}z.args=z.args||[];break;case"json":try{z.data=i.parse($)}catch{}break;case"connect":z.qs=$||"";break;case"ack":if((re=$.match(/^([0-9]+)(\+)?(.*)/))&&(z.ackId=re[1],z.args=[],re[3]))try{z.args=re[3]?i.parse(re[3]):[]}catch{}}return z},e.decodePayload=function($){var V=function(ie,ae){for(var Fe=0,de=ie;de<ae.length;de++){if(ae.charAt(de)=="�")return Fe;Fe++}return Fe};if($.charAt(0)=="�"){for(var z=[],re=1,oe="";re<$.length;re++)if($.charAt(re)=="�"){var le=$.substr(re+1).substr(0,oe);if($.charAt(re+1+Number(oe))!="�"&&re+1+Number(oe)!=$.length){var ue=Number(oe);l=V(re+ue+1,$),le=$.substr(re+1).substr(0,ue+l),re+=l}z.push(e.decodePacket(le)),re+=Number(oe)+1,oe=""}else oe+=$.charAt(re);return z}return[e.decodePacket($)]}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r){function e(n,g){this.socket=n,this.sessid=g}t.Transport=e,r.util.mixin(e,r.EventEmitter),e.prototype.heartbeats=function(){return!0},e.prototype.onData=function(n){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""){var g=r.parser.decodePayload(n);if(g&&g.length)for(var y=0,i=g.length;y<i;y++)this.onPacket(g[y])}return this},e.prototype.onPacket=function(n){return this.socket.setHeartbeatTimeout(),n.type=="heartbeat"?this.onHeartbeat():(n.type=="connect"&&n.endpoint==""&&this.onConnect(),n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(n),this)},e.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.socket&&n.socket.publish("info","socket disconnected by setCloseTimeout"),n.onDisconnect("disconnected by setCloseTimeout of Transport")},this.socket.closeTimeout)}},e.prototype.onDisconnect=function(n){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket?(this.socket.transport===this?this.socket.onDisconnect(n):this.socket.setBuffer(!1),this):this},e.prototype.onConnect=function(){return this.socket.onConnect(),this},e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},e.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},e.prototype.packet=function(n){this.send(r.parser.encodePacket(n))},e.prototype.onHeartbeat=function(n){this.packet({type:"heartbeat"})},e.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},e.prototype.onClose=function(){this.socket.publish("info","transport onClose"),this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect("disconnected by onClose of Transport"),this.onDisconnectDone instanceof Function&&this.onDisconnectDone(null),this.onConnectionOver instanceof Function&&this.onConnectionOver(null)},e.prototype.onDisconnectDone=function(){},e.prototype.onConnectionOver=function(){},e.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+r.protocol+"/"+this.name+"/"+this.sessid},e.prototype.ready=function(n,g){g.call(this)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(y){if(this.options={port:80,secure:!1,document:"document"in e&&document,resource:"socket.io",transports:y.transports||r.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,needToXHR:!0,manualFlush:!1},r.util.merge(this.options,y),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||r.util.ua.hasCORS)){var i=this;r.util.on(e,"beforeunload",function(){i.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function g(){}t.Socket=n,r.util.mixin(n,r.EventEmitter),n.prototype.of=function(y){return this.namespaces[y]||(this.namespaces[y]=new r.SocketNamespace(this,y),y!==""&&this.namespaces[y].packet({type:"connect"})),this.namespaces[y]},n.prototype.publish=function(){var y;for(var i in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(i)&&(y=this.of(i)).$emit.apply(y,arguments)},n.prototype.guid=function(){var y=root.crypto||root.msCrypto;if(y){var i=new Uint8Array(16);y.getRandomValues(i),i[6]&=15,i[6]|=64,i[8]&=63,i[8]|=128;for(var k="",L=0;L<i.length;L++){var $=i[L].toString(16);$.length===1&&($="0"+$),k+=$}return k.substring(0,8)+"-"+k.substring(8,12)+"-"+k.substring(12,16)+"-"+k.substring(16,20)+"-"+k.substring(20)}},n.prototype.handshake=function(y){var i=this,k=this.options;if(!this.options.needToXHR&&this.options.transports.length===1&&this.options.transports[0]==="websocket"){var L=this.guid();if(L)return void setTimeout(function(){i.publish("info","xhr, skip and get:"+L),y.apply(null,[L,"90","60","websocket"])},0)}function $(le){le instanceof Error?(i.connecting=!1,i.publish("info","xhr, status:200, but got error:",le),i.onError("xhr, status:200, but got error:"+le.message,le)):y.apply(null,le.split(":"))}var V=["http"+(k.secure?"s":"")+":/",k.host+":"+k.port,k.resource,r.protocol,r.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!r.util.ua.hasCORS&&typeof document<"u"&&document){var z=document.getElementsByTagName("script")[0],re=document.createElement("script");re.src=V+"&jsonp="+r.j.length,re.onreadystatechange=function(){this.readyState=="loaded"&&re.parentNode&&(re.parentNode.removeChild(re),i.connecting=!1,i.publish("info","xhr, jsonp:Server down or port not open"),!i.reconnecting&&i.onError("Server down or port not open",new Error("xhr, jsonp:server down or port not open")),i.publish("handshake_failed"))},z.parentNode.insertBefore(re,z),r.j.push(function(le){$(le),re.parentNode.removeChild(re)})}else{var oe=r.util.request();oe.open("GET",V,!0),oe.timeout=8e3,this.isXDomain()&&(oe.withCredentials=!0),oe.onreadystatechange=function(){i.publish("info","xhr, readyState:"+oe.readyState+" status:"+oe.status),oe.readyState==4&&(i.publish("info","xhr, responseText:"+oe.responseText),oe.onreadystatechange=g,oe.status==200?$(oe.responseText):oe.status==403?(i.connecting=!1,i.onError(oe.responseText,new Error("xhr, status:403"+oe.responseText)),i.publish("handshake_failed")):(i.connecting=!1,!i.reconnecting&&i.onError(oe.responseText,new Error("xhr, status:"+oe.status+" "+oe.responseText)),i.publish("handshake_failed")))},oe.ontimeout=function(le){i.publish("info","xhr, timeout"),i.connecting=!1,!i.reconnecting&&i.onError(oe.responseText,new Error("xhr, timeout")),i.publish("handshake_failed")},oe.send(null)}},n.prototype.connect=function(y){if(this.connecting)return this;var i=this;return i.connecting=!0,this.handshake(function(k,L,$,V){i.publish("info","SocketIO handshake parameter: sid: "+k+", transports: "+V+", close: "+$+", heartbeat: "+L),i.sessionid=k,i.closeTimeout=1e3*$,i.heartbeatTimeout=1e3*L,i.transports||(i.transports=i.origTransports=V?r.util.intersect(V.split(","),i.options.transports):i.options.transports),i.setHeartbeatTimeout(),i.once("connect",function(){i.publish("info","tcp, clear connect timeout due to recv connect event"),clearTimeout(i.connectTimeoutTimer),i.connectTimeoutTimer=null,y&&typeof y=="function"&&y()}),i.doConnect()}),this},n.prototype.doConnect=function(){var y=this;if(y.transport&&y.transport.clearTimeouts(),y.transport=y.getTransport(y.transports),!y.transport)return y.publish("connect_failed");y.transport.ready(y,function(){y.connecting=!0,y.publish("info","tcp, connecting, transport ready in "+y.transport.name),y.publish("connecting",y.transport.name),y.transport.open(),y.options["connect timeout"]&&(y.connectTimeoutTimer&&clearTimeout(y.connectTimeoutTimer),y.publish("info","set new connect timeout"),y.connectTimeoutTimer=setTimeout(function(){y.publish("info","trigger connect timeout due to setTimeout"),y.transport.close(),y.tryNextTransport()},y.options["connect timeout"]))})},n.prototype.getTransport=function(y){const i=this;for(var k,L=y||this.transports,$=0;k=L[$];$++)if(i.publish("info","check transport: "+k),r.Transport[k]&&r.Transport[k].check(this)&&(!this.isXDomain()||r.Transport[k].xdomainCheck(this)))return i.publish("info","use transport: "+k),new r.Transport[k](this,this.sessionid);return null},n.prototype.tryNextTransport=function(){if(!this.connected&&(this.connecting=!1,this.options["try multiple transports"])){for(var y=this.transports;y.length>0&&y.splice(0,1)[0]!=this.transport.name;);y.length?this.doConnect():this.publish("connect_failed")}},n.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var y=this;this.heartbeatTimeoutTimer=setTimeout(function(){y.transport&&(y.publish("info","transport closed by setHeartbeatTimeout"),y.transport.onClose())},this.heartbeatTimeout)}},n.prototype.packet=function(y){return this.connected&&!this.doBuffer?this.transport.packet(y):this.buffer.push(y),this},n.prototype.setBuffer=function(y){this.doBuffer=y,!y&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},n.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},n.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.publish("info","socket disconnected by IM SDK"),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var y=r.util.request(),i=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,r.protocol,"",this.sessionid].join("/")+"/?disconnect=1";y.open("GET",i,!1),y.send(null),this.publish("info","socket disconnected by disconnectSync before page unload"),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var y=e&&e.location||{},i=y.port||(y.protocol=="https:"?443:80);return this.options.host!==y.hostname||this.options.port!=i},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.publish("info","tcp, websocket onOpen"),this.open=!0},n.prototype.onClose=function(){this.publish("info","tcp, websocket onClose"),this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},n.prototype.onPacket=function(y){this.of(y.endpoint).onPacket(y)},n.prototype.onError=function(y,i){y&&y.advice&&y.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",y&&y.reason?y.reason:y,i)},n.prototype.onDisconnect=function(y){var i=this.connected,k=this.connecting;this.publish("info",y?"tcp, onDisconnect reason:"+y:"tcp, onDisconnect"),this.connected=!1,this.connecting=!1,this.open=!1,(i||k)&&this.transport&&(this.transport.close(),this.transport.clearTimeouts(),i&&(this.publish("disconnect",y),y!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),k&&(this.connectTimeoutTimer&&(this.publish("info","clear connect timeout due to onDisconnect"),clearTimeout(this.connectTimeoutTimer)),this.tryNextTransport()))},n.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var y=this,i=this.options["max reconnection attempts"],k=this.options["try multiple transports"],L=this.options["reconnection limit"];function $(){if(y.connected){for(var z in y.namespaces)y.namespaces.hasOwnProperty(z)&&z!==""&&y.namespaces[z].packet({type:"connect"});y.publish("reconnect",y.transport.name,y.reconnectionAttempts)}clearTimeout(y.reconnectionTimer),y.removeListener("connect_failed",V),y.removeListener("connect",V),y.reconnecting=!1,delete y.reconnectionAttempts,delete y.reconnectionDelay,delete y.reconnectionTimer,delete y.redoTransports,y.options["try multiple transports"]=k}function V(){if(y.reconnecting)return y.connected?$():y.connecting&&y.reconnecting?y.reconnectionTimer=setTimeout(V,1e3):void(y.reconnectionAttempts++>=i?y.redoTransports?(y.publish("reconnect_failed"),$()):(y.on("connect_failed",V),y.options["try multiple transports"]=!0,y.transports=y.origTransports,y.transport=y.getTransport(),y.redoTransports=!0,y.connect()):(y.reconnectionDelay<L&&(y.reconnectionDelay*=2),y.connect(),y.publish("reconnecting",y.reconnectionDelay,y.reconnectionAttempts),y.reconnectionTimer=setTimeout(V,y.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(V,this.reconnectionDelay),this.on("connect",V)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r){function e(g,y){this.socket=g,this.name=y||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(g,y){this.namespace=g,this.name=y}t.SocketNamespace=e,r.util.mixin(e,r.EventEmitter),e.prototype.$emit=r.EventEmitter.prototype.emit,e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},e.prototype.packet=function(g){return g.endpoint=this.name,this.socket.packet(g),this.flags={},this},e.prototype.send=function(g,y){var i={type:this.flags.json?"json":"message",data:g};return typeof y=="function"&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=y),this.packet(i)},e.prototype.emit=function(g){var y=Array.prototype.slice.call(arguments,1),i=y[y.length-1],k={type:"event",name:g};return typeof i=="function"&&(k.id=++this.ackPackets,k.ack="data",this.acks[k.id]=i,y=y.slice(0,y.length-1)),k.args=y,this.packet(k)},e.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},e.prototype.onPacket=function(g){var y=this;function i(){y.packet({type:"ack",args:r.util.toArray(arguments),ackId:g.id})}switch(g.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?(this.socket.publish("info","socket disconnected by SocketNameSpace.onPacket"),this.socket.onDisconnect(g.reason||"booted")):this.$emit("disconnect",g.reason);break;case"message":case"json":var k=["message",g.data];g.ack=="data"?k.push(i):g.ack&&this.packet({type:"ack",ackId:g.id}),this.$emit.apply(this,k);break;case"event":k=[g.name].concat(g.args),g.ack=="data"&&k.push(i),this.$emit.apply(this,k);break;case"ack":this.acks[g.ackId]&&(this.acks[g.ackId].apply(this,g.args),delete this.acks[g.ackId]);break;case"error":this.socket.publish("info","packet, type:error",g),g.advice?this.socket.onError(g,new Error("packet, type:error and advice is "+g.advice)):g.reason==="unauthorized"?this.$emit("connect_failed",g.reason):this.$emit("error",g.reason,new Error("packet, type:error and reason is "+g.reason))}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(t,r,e){function n(g){r.Transport.apply(this,arguments)}t.websocket=n,r.util.inherit(n,r.Transport),n.prototype.name="websocket",n.prototype.open=function(){var g,y=r.util.query(this.socket.options.query),i=this;return g||(g=e.MozWebSocket||e.WebSocket),this.websocket=new g(this.prepareUrl()+y),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(k){i.onData(k.data)},this.websocket.onclose=function(k){i.socket.setBuffer(!0),i.socket.publish("websocketOnclose",k),i.onClose()},this.websocket.onerror=function(k){var L="";k&&k.message?L=k.message:k.target&&(L=k.target.readyState?"websocket, readyState:"+k.target.readyState:"websocket event"),i.onError(L,k)},this},r.util.ua.iDevice?n.prototype.send=function(g){var y=this;return setTimeout(function(){y.websocket.send(g)},0),this}:n.prototype.send=function(g){return this.websocket.send(g),this},n.prototype.payload=function(g){for(var y=0,i=g.length;y<i;y++)this.packet(g[y]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(g,y){this.socket.publish("info","tcp, onError",g,y),this.socket.onError(g,y)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in e&&!("__addTask"in WebSocket)||"MozWebSocket"in e},n.xdomainCheck=function(){return!0},r.transports.push("websocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(y){y&&(r.Transport.apply(this,arguments),this.sendBuffer=[])}function g(){}t.XHR=n,r.util.inherit(n,r.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(y){for(var i=[],k=0,L=y.length;k<L;k++)i.push(r.parser.encodePacket(y[k]));this.send(r.parser.encodePayload(i))},n.prototype.send=function(y){return this.post(y),this},n.prototype.post=function(y){var i=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),e.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=g,i.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=g,i.posting=!1,this.status==200?i.socket.setBuffer(!1):i.onClose())},this.sendXHR.send(y)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(y){var i=r.util.request(this.socket.isXDomain()),k=r.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(y||"GET",this.prepareUrl()+k,!0),y=="POST")try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch{}return i},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(y,i){try{var k=r.util.request(i),L=e.XDomainRequest&&k instanceof XDomainRequest,$=y&&y.options&&y.options.secure?"https:":"http:",V=e.location&&$!=e.location.protocol;if(k&&(!L||!V))return!0}catch{}return!1},n.xdomainCheck=function(y){return n.check(y,!0)}}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),function(t,r,e){function n(){r.Transport.XHR.apply(this,arguments)}function g(){}t["xhr-polling"]=n,r.util.inherit(n,r.Transport.XHR),r.util.merge(n,r.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){return r.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){if(this.isOpen){var y=this;this.xhr=this.request(),e.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=g,this.onerror=g,y.retryCounter=1,y.onData(this.responseText),y.get()},this.xhr.onerror=function(){y.retryCounter++,!y.retryCounter||y.retryCounter>3?y.onClose():y.get()}):this.xhr.onreadystatechange=function(){this.readyState==4&&(this.onreadystatechange=g,this.status==200?(y.onData(this.responseText),y.get()):y.onClose())},this.xhr.send(null)}},n.prototype.onClose=function(){if(r.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=g;try{this.xhr.abort()}catch{}this.xhr=null}},n.prototype.ready=function(y,i){var k=this;r.util.defer(function(){i.call(k)})},r.transports.push("xhr-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,root),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return io}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__===void 0||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(77),__webpack_require__(150)(module))},function(t,r,e){var n=e(10),g=e(9),y=e(679),i=e(684),k=e(207),L=e(697),$=Math.pow(2,32);function V(re){for(var oe=[],le=re.length,ue=0;ue<le;){var ie=y(re).call(re,ue),ae=0,Fe=0;for(ie<=127?(ae=0,Fe=0):ie<=2047?(ae=6,Fe=192):ie<=65535?(ae=12,Fe=224):ie<=2097151&&(ae=18,Fe=240),oe.push(Fe|ie>>ae),ae-=6;ae>=0;)oe.push(128|ie>>ae&63),ae-=6;ue+=ie>=65536?2:1}return oe}function z(re){for(var oe="",le=0;le<re.length;){var ue=re[le],ie=0,ae=0;if(ue<=127?(ie=0,ae=255&ue):ue<=223?(ie=1,ae=31&ue):ue<=239?(ie=2,ae=15&ue):ue<=244&&(ie=3,ae=7&ue),re.length-le-ie>0)for(var Fe=0;Fe<ie;)ae=ae<<6|63&(ue=re[le+Fe+1]),Fe+=1;else ae=65533,ie=re.length-le;oe+=i(ae),le+=ie+1}return oe}t.exports={setBigUint64:function(re){var oe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],le=new Uint8Array(8),ue=new DataView(le.buffer),ie=Number(re>$-1?re/$:0),ae=Number(4294967295&re),Fe=oe?[4,0]:[0,4],de=k(Fe,2),Ie=de[0],Ve=de[1];return ue.setUint32(Ie,ie,oe),ue.setUint32(Ve,ae,oe),le},getBigUint64:function(re){var oe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],le=new DataView(re.buffer),ue=oe?[4,0]:[0,4],ie=k(ue,2),ae=ie[0],Fe=ie[1],de=le.getUint32(ae,oe),Ie=le.getUint32(Fe,oe);return de>0?de*$+Ie:Ie},varintToBytes:function(re){var oe=new Uint8Array(4),le=new DataView(oe.buffer),ue=0;do{var ie=127&re;(re>>=7)>0&&(ie|=128),le.setUint8(ue++,ie)}while(re>0);return g(oe).call(oe,0,ue)},setBigUint64ForNumberOverflow:function(re){var oe,le,ue=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ie=new Uint8Array(8),ae=new DataView(ie.buffer),Fe=n(oe=L(re).divide($).number).call(oe).join(""),de=n(le=L(re).mod($).number).call(le).join(""),Ie=Number(Fe),Ve=Number(de),kt=ue?[4,0]:[0,4],At=k(kt,2),ze=At[0],Et=At[1];return ae.setUint32(ze,Ie,ue),ae.setUint32(Et,Ve,ue),ie},textDecoder:z,textEncoder:V,encodeText:function(re){if(typeof TextEncoder=="function")return new TextEncoder().encode(re);var oe=V(re);return new Uint8Array(oe)},decodeText:function(re){return typeof TextDecoder=="function"?new TextDecoder("utf-8").decode(re):z(re)}}},function(t,r){t.exports=function(e){var n=-1,g=Array(e.size);return e.forEach(function(y){g[++n]=y}),g}},function(t,r,e){var n,g=e(23),y=e(48),i=e(12),k=e(70),L=e(721),$=e(728),V=e(200),z=V.getLibEnv,re=V.getHostEnv,oe=V.getHostEnvVer,le={initReporter:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie={app_key:ue.appKey,platform:"Web",dev_id:y.deviceId,sdk_ver:i.info.version,env:"online",os_name:k.os?k.os.family:"",os_ver:k.os?k.os.version:"",lib_env:z(),host_env:re(),host_env_ver:oe(),manufactor:k.name,model:oe()};i.isBrowser||(ue.isDataReportEnable=!1);var ae=new L({isDataReportEnable:ue.isDataReportEnable,reportConfigUrl:ue.reportConfigUrl,reportUrl:ue.reportUrl,common:ie,request:$,logger:ue.logger,autoStart:i.isBrowser});return ae}};le.sendBeacon=navigator&&navigator.sendBeacon&&g(n=navigator.sendBeacon).call(n,navigator)||function(ue,ie){var ae=new XMLHttpRequest;ae.open("POST",ue,!0),ae.send(ie)},t.exports=le},function(t,r,e){t.exports=e(722)},function(t,r,e){var n=e(1),g=e(16);n({global:!0,forced:g.globalThis!==g},{globalThis:g})},function(t,r,e){var n=e(1),g=e(13),y=e(117),i=e(30),k=e(31),L=e(40).f,$=e(135),V=e(175),z=e(739),re=e(132),oe=e(741),le=!1,ue=re("meta"),ie=0,ae=function(de){L(de,ue,{value:{objectID:"O"+ie++,weakData:{}}})},Fe=t.exports={enable:function(){Fe.enable=function(){},le=!0;var de=$.f,Ie=g([].splice),Ve={};Ve[ue]=1,de(Ve).length&&($.f=function(kt){for(var At=de(kt),ze=0,Et=At.length;ze<Et;ze++)if(At[ze]===ue){Ie(At,ze,1);break}return At},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:V.f}))},fastKey:function(de,Ie){if(!i(de))return typeof de=="symbol"?de:(typeof de=="string"?"S":"P")+de;if(!k(de,ue)){if(!z(de))return"F";if(!Ie)return"E";ae(de)}return de[ue].objectID},getWeakData:function(de,Ie){if(!k(de,ue)){if(!z(de))return!0;if(!Ie)return!1;ae(de)}return de[ue].weakData},onFreeze:function(de){return oe&&le&&z(de)&&!k(de,ue)&&ae(de),de}};y[ue]=!0},function(t,r,e){var n=e(20),g=e(32),y=e(17),i=e(38),k=TypeError;t.exports=function(L,$){var V,z=i(this),re=g(z.get),oe=g(z.has),le=g(z.set),ue=arguments.length>2?arguments[2]:void 0;if(!y($)&&!y(ue))throw k("At least one callback required");return n(oe,z,L)?(V=n(re,z,L),y($)&&(V=$(V),n(le,z,L,V))):y(ue)&&(V=ue(),n(le,z,L,V)),V}},function(t,r,e){t.exports=e(771)},function(t,r,e){var n=e(5);e(48);function g(){}g.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,g2:12,custom:100};var y=g.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",11:"robot",12:"g2",100:"custom"};g.validTypes=n(g.typeMap),g.setFlow=function(i,k){i.flow=i.from===k?i.to===k?"in":"out":"in",i.type==="robot"&&i.content&&i.content.msgOut&&(i.flow="in")},g.getType=function(i){var k=i.type;return y[k]||k},t.exports=g},function(t,r,e){t.exports=function(n,g,y,i){var k=self||window;try{try{var L;try{L=new k.Blob([n])}catch{(L=new(k.BlobBuilder||k.WebKitBlobBuilder||k.MozBlobBuilder||k.MSBlobBuilder)).append(n),L=L.getBlob()}var $=k.URL||k.webkitURL,V=$.createObjectURL(L),z=new k[g](V,y);return $.revokeObjectURL(V),z}catch{return new k[g]("data:application/javascript,".concat(encodeURIComponent(n)),y)}}catch{if(!i)throw Error("Inline worker is not supported");return new k[g](i,y)}}},function(t,r,e){e(12).isBrowser=!0},function(t,r){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(n,g){var y=typeof n;return!!(g=g??9007199254740991)&&(y=="number"||y!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<g}},function(t,r,e){t.exports=e(565)},function(t,r,e){(function(n){var g,y=e(24),i=e(3),k=e(128),L=e(9),$=e(28),V=e(2),z=e(42),re=e(4),oe=e(5),le=e(15);(function(ue,ie){var ae,Fe=(ue=ue!==void 0?ue:typeof self<"u"?self:n!==void 0?n:{}).IDBKeyRange||ue.webkitIDBKeyRange,de="readonly",Ie="readwrite",Ve=Object.prototype.hasOwnProperty,kt=function(){if(!ae&&!(ae=ue.indexedDB||ue.webkitIndexedDB||ue.mozIndexedDB||ue.oIndexedDB||ue.msIndexedDB||(ue.indexedDB===null&&ue.shimIndexedDB?ue.shimIndexedDB:void 0)))throw"IndexedDB required";return ae},At=!1,ze=navigator&&!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent),Et=function(hr){return hr},cr=function(hr){var Cr;return L(Cr=Object.prototype.toString.call(hr)).call(Cr,8,-1).toLowerCase()},er=function(hr){return typeof hr=="function"},or=function(hr){return cr(hr)==="number"},dr=function(hr){return cr(hr)==="array"},lr=function(hr){return hr===void 0},nr=function(hr,Cr){var wr=this,Sr=!1;this.name=Cr,this.getIndexedDB=function(){return hr},this.add=function(Ar){if(Sr)throw"Database has been closed";for(var Er=[],sr=0,xr=0;xr<arguments.length-1;xr++)if($(arguments[xr+1]))for(var Nr=0;Nr<arguments[xr+1].length;Nr++)Er[sr]=arguments[xr+1][Nr],sr++;else Er[sr]=arguments[xr+1],sr++;var Mr=hr.transaction(Ar,Ie),br=Mr.objectStore(Ar);return new i(function(yr,Tr){V(Er).call(Er,function(Br){var Lr;if(Br.item&&Br.key){var Fr=Br.key;Br=Br.item,Lr=br.add(Br,Fr)}else Lr=br.add(Br);Lr.onsuccess=function(qr){try{var Vr=qr.target,Qr=Vr.source.keyPath;Qr===null&&(Qr="__id__"),z(Br,Qr,{value:Vr.result,enumerable:!0})}catch(Tn){Tr(Tn)}}}),Mr.oncomplete=function(){yr(Er,wr)},Mr.onerror=function(Br){Br.preventDefault(),Tr(Br)},Mr.onabort=function(Br){Tr(Br)}})},this.updateAndDelete=function(Ar,Er,sr){if(Sr)throw"Database has been closed";var xr=hr.transaction(Ar,Ie),Nr=xr.objectStore(Ar),Mr=Nr.keyPath;return new i(function(br,yr){V(Er).call(Er,function(Tr){if(Tr.item&&Tr.key){var Br=Tr.key;Tr=Tr.item,Nr.put(Tr,Br)}else Nr.put(Tr)}),V(sr).call(sr,function(Tr){Nr.delete(Tr[Mr])}),xr.oncomplete=function(){br([Er,sr])},xr.onerror=function(Tr){yr(Tr)}})},this.update=function(Ar){if(Sr)throw"Database has been closed";for(var Er,sr=[],xr=1;xr<arguments.length;xr++)$(Er=arguments[xr])?sr=re(sr).call(sr,Er):sr.push(Er);var Nr=hr.transaction(Ar,Ie),Mr=Nr.objectStore(Ar);return Mr.keyPath,new i(function(br,yr){V(sr).call(sr,function(Tr){var Br;if(Tr.item&&Tr.key){var Lr=Tr.key;Tr=Tr.item,Br=Mr.put(Tr,Lr)}else Br=Mr.put(Tr);Br.onsuccess=function(Fr){},Br.onerror=function(Fr){}}),Nr.oncomplete=function(){br(sr,wr)},Nr.onerror=function(Tr){yr(Tr)},Nr.onabort=function(Tr){yr(Tr)}})},this.remove=function(Ar,Er,sr,xr,Nr,Mr,br){if(Sr)throw"Database has been closed";var yr=hr.transaction(Ar,Ie),Tr=yr.objectStore(Ar);return new i(function(Br,Lr){function Fr(Vr){return Vr==null}var qr;Fr(xr)&&(xr=-1/0),Fr(Nr)&&(Nr=1/0),Er===null||$(Er)||(Er=[Er]),Fr(sr)?Er!==null?V(Er).call(Er,function(Vr){Tr.delete(Vr)}):Tr.delete(range=Fe.bound(xr,Nr,Mr,br)):(qr=Er!==null?Fe.only(Er[0]):Fe.bound(xr,Nr,Mr,br),Tr.index(sr).openCursor(qr).onsuccess=function(Vr){try{var Qr=Vr.target.result;if(!Qr)return;Qr.delete(),Qr.continue()}catch(Tn){Lr(Tn)}}),yr.oncomplete=function(){Br()},yr.onerror=function(Vr){Lr(Vr)},yr.onabort=function(Vr){Lr(Vr)}})},this.clear=function(Ar){if(Sr)throw"Database has been closed";var Er=hr.transaction(Ar,Ie);return Er.objectStore(Ar).clear(),new i(function(sr,xr){Er.oncomplete=function(){sr()},Er.onerror=function(Nr){xr(Nr)}})},this.close=function(){Sr||(hr.close(),Sr=!0,delete gr[Cr])},this.get=function(Ar,Er){if(Sr)throw"Database has been closed";var sr=hr.transaction(Ar),xr=sr.objectStore(Ar).get(Er);return new i(function(Nr,Mr){xr.onsuccess=function(br){Nr(br.target.result)},sr.onerror=function(br){Mr(br)}})},this.query=function(Ar,Er){if(Sr)throw"Database has been closed";return new ur(Ar,hr,Er)},this.count=function(Ar,Er){if(Sr)throw"Database has been closed";hr.transaction(Ar).objectStore(Ar)};for(var mr=0,_r=hr.objectStoreNames.length;mr<_r;mr++)(function(Ar){for(var Er in wr[Ar]={},wr)Ve.call(wr,Er)&&Er!=="close"&&(wr[Ar][Er]=function(sr){return function(){var xr,Nr=re(xr=[Ar]).call(xr,L([]).call(arguments,0));return wr[sr].apply(wr,Nr)}}(Er))})(hr.objectStoreNames[mr])},ur=function(hr,Cr,wr){var Sr,mr=this,_r=!1,Ar=!1,Er=function(xr,Nr,Mr,br,yr,Tr,Br){return new i(function(Lr,Fr){var qr=_r||Ar?Ie:de,Vr=Cr.transaction(hr,qr),Qr=Vr.objectStore(hr),Tn=wr?Qr.index(wr):Qr,xn=xr?Fe[xr].apply(null,Nr):null,Xr=[],Vn=[xn],Zr=0;yr=yr||null,Tr=Tr||[],Mr!=="count"&&Vn.push(br||"next");var Nn=!!_r&&oe(_r);Tn[Mr].apply(Tn,Vn).onsuccess=function(Jr){try{var wn=Jr.target.result;if(y(wn)===y(0))Xr=wn;else if(wn){if(yr!==null&&yr[0]>Zr)Zr=yr[0],wn.advance(yr[0]);else if(!(yr!==null&&Zr>=yr[0]+yr[1])){var Un=!0,_n="value"in wn?wn.value:wn.key;V(Tr).call(Tr,function(Pn){Pn&&Pn.length&&(Pn.length===2?Un=Un&&_n[Pn[0]]===Pn[1]:er(Pn[0])&&(Un=Un&&Pn[0].apply(void 0,[_n])))}),Un&&(Zr++,Xr.push(Br(_n)),Ar?wn.delete():_r&&(_n=function(Pn){for(var Cn=0;Cn<Nn.length;Cn++){var vn=Nn[Cn],no=_r[vn];no instanceof Function&&(no=no(Pn)),Pn[vn]=no}return Pn}(_n),wn.update(_n))),wn.continue()}}}catch(Pn){Fr(Pn)}},Vr.oncomplete=function(){Lr(Xr)},Vr.onerror=function(Jr){Fr(Jr)},Vr.onabort=function(Jr){Fr(Jr)}})},sr=function(xr,Nr){var Mr="next",br="openCursor",yr=[],Tr=null,Br=Et,Lr=!1,Fr=function(){return Er(xr,Nr,br,Lr?Mr+"unique":Mr,Tr,yr,Br)},qr=function(){return Mr=null,br="count",{execute:Fr}},Vr=function wn(){return(Tr=dr(arguments[0])?arguments[0]:L(Array.prototype).call(arguments,0,2)).length==1&&Tr.unshift(0),or(Tr[1])||(Tr=null),{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:Xr,distinct:Vn,modify:Zr,limit:wn,map:Nn,remove:Jr}},Qr=function wn(Un){return(Un=!!lr(Un)||!!Un)&&(br="openKeyCursor"),{execute:Fr,keys:wn,filter:Tn,asc:xn,desc:Xr,distinct:Vn,modify:Zr,limit:Vr,map:Nn,remove:Jr}},Tn=function wn(){return yr.push(L(Array.prototype).call(arguments,0,2)),{execute:Fr,count:qr,keys:Qr,filter:wn,asc:xn,desc:Xr,distinct:Vn,modify:Zr,limit:Vr,map:Nn,remove:Jr}},xn=function wn(Un){return Un=!!lr(Un)||!!Un,Mr=Un?"next":"prev",{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:wn,desc:Xr,distinct:Vn,modify:Zr,limit:Vr,map:Nn,remove:Jr}},Xr=function wn(Un){return Un=!!lr(Un)||!!Un,Mr=Un?"prev":"next",{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:wn,distinct:Vn,modify:Zr,limit:Vr,map:Nn,remove:Jr}},Vn=function wn(Un){return Un=!!lr(Un)||!!Un,Lr=Un,{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:Xr,distinct:wn,modify:Zr,limit:Vr,map:Nn,remove:Jr}},Zr=function wn(Un){return _r=Un,{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:Xr,distinct:Vn,modify:wn,limit:Vr,map:Nn,remove:Jr}},Nn=function wn(Un){return er(Un)&&(Br=Un),{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:Xr,distinct:Vn,modify:Zr,limit:Vr,map:wn,remove:Jr}},Jr=function wn(Un){return Un=!!lr(Un)||!!Un,Ar=Un,{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:Xr,distinct:Vn,modify:Zr,limit:Vr,map:Nn,remove:wn}};return{execute:Fr,count:qr,keys:Qr,filter:Tn,asc:xn,desc:Xr,distinct:Vn,modify:Zr,limit:Vr,map:Nn,remove:Jr}};V(Sr="only bound upperBound lowerBound".split(" ")).call(Sr,function(xr){mr[xr]=function(){return new sr(xr,arguments)}}),this.filter=function(){var xr=new sr(null,null);return le(xr).apply(xr,arguments)},this.all=function(){var xr;return le(xr=this).call(xr)}},ar=function(hr,Cr,wr,Sr){var mr=hr.target.result,_r=new nr(mr,Cr);return gr[Cr]=mr,i.resolve(_r)},gr={},pr={version:"0.10.2",open:function(hr){var Cr;return new i(function(wr,Sr){var mr;gr[hr.server]?ar({target:{result:gr[hr.server]}},hr.server,hr.version,hr.schema).then(wr,Sr):(At?i.resolve():ze&&kt().databases?new i(function(_r){var Ar=function(){return kt().databases().finally(_r)};mr=k(Ar,100),Ar()}).finally(function(){At=!0,clearInterval(mr)}):(At=!0,i.resolve())).then(function(){try{Cr=kt().open(hr.server,hr.version)}catch(_r){Sr(_r)}Cr.onsuccess=function(_r){ar(_r,hr.server,hr.version,hr.schema).then(wr,Sr)},Cr.onupgradeneeded=function(_r){(function(Ar,Er,sr){for(var xr in typeof Er=="function"&&(Er=Er()),Er){var Nr,Mr=Er[xr];for(var br in Nr=!Ve.call(Er,xr)||sr.objectStoreNames.contains(xr)?Ar.currentTarget.transaction.objectStore(xr):sr.createObjectStore(xr,Mr.key),Mr.indexes){var yr=Mr.indexes[br];try{Nr.index(br)}catch{Nr.createIndex(br,yr.key||br,oe(yr).length?yr:{unique:!1})}}}})(_r,hr.schema,_r.target.result)},Cr.onerror=function(_r){Sr(_r)}})})},remove:function(hr){return new i(function(Cr,wr){if(!hr)return Cr();var Sr,mr;y(hr)===nr&&(hr=hr.name),typeof hr=="string"&&(Sr=gr[hr]),Sr&&typeof Sr.close=="function"&&Sr.close();try{mr=kt().deleteDatabase(hr)}catch(_r){wr(_r)}mr.onsuccess=function(_r){delete gr[hr],Cr(hr)},mr.onerror=function(_r){wr(_r)},mr.onblocked=function(_r){wr(_r)}})}};t.exports!==void 0?t.exports=pr:(g=(function(){return pr}).call(r,e,r,t))===void 0||(t.exports=g)})(void 0)}).call(this,e(77))},function(t,r,e){var n=e(596);t.exports=n},function(t,r,e){t.exports=e(650)},function(t,r){var e={set:function(n,g,y){e[n]=g,y&&(y.support=g)}};t.exports=e},function(t,r,e){var n=e(5),g=e(2),y=e(23),i=e(0),k=i.notundef,L=i.fillPropertyWithDefault,$=n,V={},z={},re={},oe=[],le={normal:2,advanced:1},ue={manager:0,all:1};V.inviteMode=V.updateCustomMode=V.updateTeamMode=ue;var ie={2:"normal",1:"advanced"},ae=V.joinMode={noVerify:0,needVerify:1,rejectAll:2};z.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},re.joinMode=$(ae),oe.push("join");var Fe=V.beInviteMode={needVerify:0,noVerify:1};function de(Ve){var kt;i.verifyOptions(Ve,"action","superTeam::SuperTeam"),i.verifyOptions(Ve,"teamId","superTeam::SuperTeam"),k(Ve.teamId)&&(this.teamId=Ve.teamId),k(Ve.type)&&(this.type=le[Ve.type]),k(Ve.avatar)&&(this.avatar=""+Ve.avatar),k(Ve.name)&&(this.name=""+Ve.name),k(Ve.intro)&&(this.intro=""+Ve.intro),k(Ve.announcement)&&(this.announcement=""+Ve.announcement),k(Ve.custom)&&(this.custom=""+Ve.custom),k(Ve.inviteMode)&&(this.inviteMode=ue[Ve.inviteMode]),k(Ve.updateCustomMode)&&(this.updateCustomMode=ue[Ve.updateCustomMode]),k(Ve.updateTeamMode)&&(this.updateTeamMode=ue[Ve.updateTeamMode]),g(oe).call(oe,y(kt=this.setMode).call(kt,this,Ve))}function Ie(Ve,kt){k(Ve[kt+="Mode"])&&(Ve[kt]=z[kt][Ve[kt]])}z.beInviteMode={0:"needVerify",1:"noVerify"},oe.push("beInvite"),z.inviteMode=z.updateCustomMode=z.updateTeamMode={0:"manager",1:"all"},oe.push("invite"),oe.push("updateCustom"),oe.push("updateTeam"),re.inviteMode=re.updateCustomMode=re.updateTeamMode=$(ue),re.beInviteMode=$(Fe),de.prototype.setMode=function(Ve,kt){k(Ve[kt+="Mode"])&&(i.verifyParamValid(kt,Ve[kt],re[kt],"Superteam::Team"),this[kt]=V[kt][Ve[kt]])},de.reverse=function(Ve,kt){var At=i.copy(Ve);if(k(At.teamId)&&(At.teamId=""+At.teamId),k(At.type)&&(At.type=ie[At.type]),k(At.level)&&(At.level=+At.level),k(At.valid)&&(At.valid=+At.valid==1),k(At.memberNum)&&(At.memberNum=+At.memberNum),k(At.memberUpdateTime)&&(At.memberUpdateTime=+At.memberUpdateTime),k(At.createTime)&&(At.createTime=+At.createTime),k(At.updateTime)&&(At.updateTime=+At.updateTime),k(At.validToCurrentUser)&&(At.validToCurrentUser=At.validToCurrentUser==="1"),k(At.mute)&&(At.mute=At.mute==="1"),k(At.muteType))switch(At.muteType){case"0":At.mute=!1,At.muteType="none";break;case"1":At.mute=!0,At.muteType="normal";break;case"3":At.mute=!0,At.muteType="all"}else k(At.mute)&&(At.mute===1?(At.mute=!0,At.muteType="normal"):(At.mute=!1,At.muteType="none"));return g(oe).call(oe,y(Ie).call(Ie,null,At)),delete At.bits,kt||de.fillProperties(At),At},de.fillProperties=function(Ve){return L(Ve,"avatar","")},t.exports=de},function(t,r,e){t.exports=e(689)},function(t,r,e){var n=e(293),g=e(315),y=e(316);t.exports=function(i,k){var L;if(i){if(typeof i=="string")return y(i,k);var $=n(L=Object.prototype.toString.call(i)).call(L,8,-1);return $==="Object"&&i.constructor&&($=i.constructor.name),$==="Map"||$==="Set"?g(i):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?y(i,k):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(693)},function(t,r){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var g=0,y=new Array(n);g<n;g++)y[g]=e[g];return y},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(0).notundef;function g(y){n(y.shouldPushNotificationWhenPCOnline)&&(this.open=y.shouldPushNotificationWhenPCOnline?2:1)}g.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},g.reverse=function(y){return{shouldPushNotificationWhenPCOnline:+y.open!=1}},t.exports=g},function(t,r,e){var n=e(70),g=e(787),y=e(294),i=e(263),k=e(203),L=e(0),$=e(311),V=e(289),z=e(192),re=e(792),oe=e(793);t.exports=function(le){L.merge(le,{platform:n,xhr:g,io:y,naturalSort:i,deepAccess:k,util:L,support:$,blob:V,ajax:z,LoggerPlugin:re,usePlugin:oe})}},function(t,r,e){var n=e(11),g=e(10),y=e(5),i=e(110).genPrivateUrl,k=e(0),L=k.notundef,$={"-2":"unset","-1":"restricted",0:"common",1:"owner",2:"manager",3:"guest",4:"anonymous"};function V(z){L(z.nick)&&(this.nick=""+z.nick),L(z.avatar)&&(this.avatar=""+z.avatar),L(z.custom)&&(this.custom=""+z.custom)}V.reverse=function(z){var re=k.copy(z);return L(re.chatroomId)&&(re.chatroomId=""+re.chatroomId),L(re.avatar)&&(re.avatar=i(re.avatar)),L(re.type)&&(re.type=$[re.type]),L(re.level)&&(re.level=+re.level),L(re.online)&&(re.online=+re.online==1),L(re.enterTime)&&(re.enterTime=+re.enterTime),L(re.guest)&&(re.guest=+re.guest==1),L(re.blacked)&&(re.blacked=+re.blacked==1),L(re.gaged)&&(re.gaged=+re.gaged==1),L(re.valid)&&(re.valid=+re.valid==1),L(re.updateTime)&&(re.updateTime=+re.updateTime),L(re.tempMuted)?re.tempMuted=+re.tempMuted==1:re.tempMuted=!1,L(re.tempMuteDuration)?re.tempMuteDuration=+re.tempMuteDuration:re.tempMuteDuration=0,re.online||delete re.enterTime,re.guest&&(re.type="guest",delete re.valid),re.type!=="common"&&delete re.level,delete re.guest,re},V.reverseMembers=function(z){return n(z).call(z,function(re){return g(V).call(V,re)})},V.validTypes=y($),V.typeReverseMap=$,t.exports=V},function(t,r,e){var n,g,y,i,k,L,$,V,z,re,oe,le,ue,ie,ae,Fe,de,Ie,Ve;t.exports=(n=e(96),e(796),void(n.lib.Cipher||(g=n,y=g.lib,i=y.Base,k=y.WordArray,L=y.BufferedBlockAlgorithm,$=g.enc,$.Utf8,V=$.Base64,z=g.algo.EvpKDF,re=y.Cipher=L.extend({cfg:i.extend(),createEncryptor:function(kt,At){return this.create(this._ENC_XFORM_MODE,kt,At)},createDecryptor:function(kt,At){return this.create(this._DEC_XFORM_MODE,kt,At)},init:function(kt,At,ze){this.cfg=this.cfg.extend(ze),this._xformMode=kt,this._key=At,this.reset()},reset:function(){L.reset.call(this),this._doReset()},process:function(kt){return this._append(kt),this._process()},finalize:function(kt){return kt&&this._append(kt),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function kt(At){return typeof At=="string"?Ve:de}return function(At){return{encrypt:function(ze,Et,cr){return kt(Et).encrypt(At,ze,Et,cr)},decrypt:function(ze,Et,cr){return kt(Et).decrypt(At,ze,Et,cr)}}}}()}),y.StreamCipher=re.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),oe=g.mode={},le=y.BlockCipherMode=i.extend({createEncryptor:function(kt,At){return this.Encryptor.create(kt,At)},createDecryptor:function(kt,At){return this.Decryptor.create(kt,At)},init:function(kt,At){this._cipher=kt,this._iv=At}}),ue=oe.CBC=function(){var kt=le.extend();function At(ze,Et,cr){var er,or=this._iv;or?(er=or,this._iv=void 0):er=this._prevBlock;for(var dr=0;dr<cr;dr++)ze[Et+dr]^=er[dr]}return kt.Encryptor=kt.extend({processBlock:function(ze,Et){var cr=this._cipher,er=cr.blockSize;At.call(this,ze,Et,er),cr.encryptBlock(ze,Et),this._prevBlock=ze.slice(Et,Et+er)}}),kt.Decryptor=kt.extend({processBlock:function(ze,Et){var cr=this._cipher,er=cr.blockSize,or=ze.slice(Et,Et+er);cr.decryptBlock(ze,Et),At.call(this,ze,Et,er),this._prevBlock=or}}),kt}(),ie=(g.pad={}).Pkcs7={pad:function(kt,At){for(var ze=4*At,Et=ze-kt.sigBytes%ze,cr=Et<<24|Et<<16|Et<<8|Et,er=[],or=0;or<Et;or+=4)er.push(cr);var dr=k.create(er,Et);kt.concat(dr)},unpad:function(kt){var At=255&kt.words[kt.sigBytes-1>>>2];kt.sigBytes-=At}},y.BlockCipher=re.extend({cfg:re.cfg.extend({mode:ue,padding:ie}),reset:function(){var kt;re.reset.call(this);var At=this.cfg,ze=At.iv,Et=At.mode;this._xformMode==this._ENC_XFORM_MODE?kt=Et.createEncryptor:(kt=Et.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==kt?this._mode.init(this,ze&&ze.words):(this._mode=kt.call(Et,this,ze&&ze.words),this._mode.__creator=kt)},_doProcessBlock:function(kt,At){this._mode.processBlock(kt,At)},_doFinalize:function(){var kt,At=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(At.pad(this._data,this.blockSize),kt=this._process(!0)):(kt=this._process(!0),At.unpad(kt)),kt},blockSize:4}),ae=y.CipherParams=i.extend({init:function(kt){this.mixIn(kt)},toString:function(kt){return(kt||this.formatter).stringify(this)}}),Fe=(g.format={}).OpenSSL={stringify:function(kt){var At=kt.ciphertext,ze=kt.salt;return(ze?k.create([1398893684,1701076831]).concat(ze).concat(At):At).toString(V)},parse:function(kt){var At,ze=V.parse(kt),Et=ze.words;return Et[0]==1398893684&&Et[1]==1701076831&&(At=k.create(Et.slice(2,4)),Et.splice(0,4),ze.sigBytes-=16),ae.create({ciphertext:ze,salt:At})}},de=y.SerializableCipher=i.extend({cfg:i.extend({format:Fe}),encrypt:function(kt,At,ze,Et){Et=this.cfg.extend(Et);var cr=kt.createEncryptor(ze,Et),er=cr.finalize(At),or=cr.cfg;return ae.create({ciphertext:er,key:ze,iv:or.iv,algorithm:kt,mode:or.mode,padding:or.padding,blockSize:kt.blockSize,formatter:Et.format})},decrypt:function(kt,At,ze,Et){return Et=this.cfg.extend(Et),At=this._parse(At,Et.format),kt.createDecryptor(ze,Et).finalize(At.ciphertext)},_parse:function(kt,At){return typeof kt=="string"?At.parse(kt,this):kt}}),Ie=(g.kdf={}).OpenSSL={execute:function(kt,At,ze,Et){Et||(Et=k.random(8));var cr=z.create({keySize:At+ze}).compute(kt,Et),er=k.create(cr.words.slice(At),4*ze);return cr.sigBytes=4*At,ae.create({key:cr,iv:er,salt:Et})}},Ve=y.PasswordBasedCipher=de.extend({cfg:de.cfg.extend({kdf:Ie}),encrypt:function(kt,At,ze,Et){var cr=(Et=this.cfg.extend(Et)).kdf.execute(ze,kt.keySize,kt.ivSize);Et.iv=cr.iv;var er=de.encrypt.call(this,kt,At,cr.key,Et);return er.mixIn(cr),er},decrypt:function(kt,At,ze,Et){Et=this.cfg.extend(Et),At=this._parse(At,Et.format);var cr=Et.kdf.execute(ze,kt.keySize,kt.ivSize,At.salt);return Et.iv=cr.iv,de.decrypt.call(this,kt,At,cr.key,Et)}}))))},function(t,r,e){t.exports=e(288)},function(t,r,e){var n=e(18),g=e(323),y=Array.prototype;t.exports=function(i){var k=i.indexOf;return i===y||n(y,i)&&k===y.indexOf?g:k}},function(t,r,e){e(324);var n=e(27);t.exports=n("Array").indexOf},function(t,r,e){var n=e(1),g=e(166),y=e(170).indexOf,i=e(86),k=g([].indexOf),L=!!k&&1/k([1],1,-0)<0,$=i("indexOf");n({target:"Array",proto:!0,forced:L||!$},{indexOf:function(V){var z=arguments.length>1?arguments[1]:void 0;return L?k(this,V,z)||0:y(this,V,z)}})},function(t,r,e){var n=e(20),g=e(30),y=e(131),i=e(167),k=e(326),L=e(21),$=TypeError,V=L("toPrimitive");t.exports=function(z,re){if(!g(z)||y(z))return z;var oe,le=i(z,V);if(le){if(re===void 0&&(re="default"),oe=n(le,z,re),!g(oe)||y(oe))return oe;throw $("Can't convert object to primitive value")}return re===void 0&&(re="number"),k(z,re)}},function(t,r,e){var n=e(20),g=e(17),y=e(30),i=TypeError;t.exports=function(k,L){var $,V;if(L==="string"&&g($=k.toString)&&!y(V=n($,k))||g($=k.valueOf)&&!y(V=n($,k))||L!=="string"&&g($=k.toString)&&!y(V=n($,k)))return V;throw i("Can't convert object to primitive value")}},function(t,r,e){var n=e(16),g=Object.defineProperty;t.exports=function(y,i){try{g(n,y,{value:i,configurable:!0,writable:!0})}catch{n[y]=i}return i}},function(t,r){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(g){var y=+g;return(y>0?n:e)(y)}},function(t,r,e){var n=e(115),g=Math.min;t.exports=function(y){return y>0?g(n(y),9007199254740991):0}},function(t,r,e){var n=e(331);t.exports=n},function(t,r,e){var n=e(18),g=e(332),y=Array.prototype;t.exports=function(i){var k=i.concat;return i===y||n(y,i)&&k===y.concat?g:k}},function(t,r,e){e(217);var n=e(27);t.exports=n("Array").concat},function(t,r,e){var n=e(87),g=e(133),y=e(30),i=e(21)("species"),k=Array;t.exports=function(L){var $;return n(L)&&($=L.constructor,(g($)&&($===k||n($.prototype))||y($)&&($=$[i])===null)&&($=void 0)),$===void 0?k:$}},function(t,r,e){e(335);var n=e(14).Object;t.exports=function(g,y){return n.create(g,y)}},function(t,r,e){e(1)({target:"Object",stat:!0,sham:!e(29)},{create:e(88)})},function(t,r,e){t.exports=e(337)},function(t,r,e){var n=e(338);e(365),e(366),e(367),e(368),e(369),e(370),e(371),t.exports=n},function(t,r,e){var n=e(223);e(364),t.exports=n},function(t,r,e){e(217),e(102),e(224),e(346),e(347),e(348),e(349),e(229),e(350),e(351),e(352),e(353),e(354),e(355),e(230),e(356),e(357),e(358),e(359),e(360);var n=e(14);t.exports=n.Symbol},function(t,r,e){var n=e(1),g=e(16),y=e(20),i=e(13),k=e(57),L=e(29),$=e(99),V=e(7),z=e(31),re=e(18),oe=e(38),le=e(47),ue=e(130),ie=e(58),ae=e(84),Fe=e(88),de=e(124),Ie=e(135),Ve=e(175),kt=e(136),At=e(97),ze=e(40),Et=e(173),cr=e(157),er=e(74),or=e(113),dr=e(134),lr=e(117),nr=e(132),ur=e(21),ar=e(137),gr=e(25),pr=e(226),hr=e(89),Cr=e(103),wr=e(69).forEach,Sr=dr("hidden"),mr=Cr.set,_r=Cr.getterFor("Symbol"),Ar=Object.prototype,Er=g.Symbol,sr=Er&&Er.prototype,xr=g.TypeError,Nr=g.QObject,Mr=At.f,br=ze.f,yr=Ve.f,Tr=cr.f,Br=i([].push),Lr=or("symbols"),Fr=or("op-symbols"),qr=or("wks"),Vr=!Nr||!Nr.prototype||!Nr.prototype.findChild,Qr=L&&V(function(){return Fe(br({},"a",{get:function(){return br(this,"a",{value:7}).a}})).a!=7})?function(wn,Un,_n){var Pn=Mr(Ar,Un);Pn&&delete Ar[Un],br(wn,Un,_n),Pn&&wn!==Ar&&br(Ar,Un,Pn)}:br,Tn=function(wn,Un){var _n=Lr[wn]=Fe(sr);return mr(_n,{type:"Symbol",tag:wn,description:Un}),L||(_n.description=Un),_n},xn=function(wn,Un,_n){wn===Ar&&xn(Fr,Un,_n),oe(wn);var Pn=ue(Un);return oe(_n),z(Lr,Pn)?(_n.enumerable?(z(wn,Sr)&&wn[Sr][Pn]&&(wn[Sr][Pn]=!1),_n=Fe(_n,{enumerable:ae(0,!1)})):(z(wn,Sr)||br(wn,Sr,ae(1,{})),wn[Sr][Pn]=!0),Qr(wn,Pn,_n)):br(wn,Pn,_n)},Xr=function(wn,Un){oe(wn);var _n=le(Un),Pn=de(_n).concat(Jr(_n));return wr(Pn,function(Cn){L&&!y(Vn,_n,Cn)||xn(wn,Cn,_n[Cn])}),wn},Vn=function(wn){var Un=ue(wn),_n=y(Tr,this,Un);return!(this===Ar&&z(Lr,Un)&&!z(Fr,Un))&&(!(_n||!z(this,Un)||!z(Lr,Un)||z(this,Sr)&&this[Sr][Un])||_n)},Zr=function(wn,Un){var _n=le(wn),Pn=ue(Un);if(_n!==Ar||!z(Lr,Pn)||z(Fr,Pn)){var Cn=Mr(_n,Pn);return!Cn||!z(Lr,Pn)||z(_n,Sr)&&_n[Sr][Pn]||(Cn.enumerable=!0),Cn}},Nn=function(wn){var Un=yr(le(wn)),_n=[];return wr(Un,function(Pn){z(Lr,Pn)||z(lr,Pn)||Br(_n,Pn)}),_n},Jr=function(wn){var Un=wn===Ar,_n=yr(Un?Fr:le(wn)),Pn=[];return wr(_n,function(Cn){!z(Lr,Cn)||Un&&!z(Ar,Cn)||Br(Pn,Lr[Cn])}),Pn};$||(er(sr=(Er=function(){if(re(sr,this))throw xr("Symbol is not a constructor");var wn=arguments.length&&arguments[0]!==void 0?ie(arguments[0]):void 0,Un=nr(wn),_n=function(Pn){this===Ar&&y(_n,Fr,Pn),z(this,Sr)&&z(this[Sr],Un)&&(this[Sr][Un]=!1),Qr(this,Un,ae(1,Pn))};return L&&Vr&&Qr(Ar,Un,{configurable:!0,set:_n}),Tn(Un,wn)}).prototype,"toString",function(){return _r(this).tag}),er(Er,"withoutSetter",function(wn){return Tn(nr(wn),wn)}),cr.f=Vn,ze.f=xn,Et.f=Xr,At.f=Zr,Ie.f=Ve.f=Nn,kt.f=Jr,ar.f=function(wn){return Tn(ur(wn),wn)},L&&(br(sr,"description",{configurable:!0,get:function(){return _r(this).description}}),k||er(Ar,"propertyIsEnumerable",Vn,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!$,sham:!$},{Symbol:Er}),wr(de(qr),function(wn){gr(wn)}),n({target:"Symbol",stat:!0,forced:!$},{useSetter:function(){Vr=!0},useSimple:function(){Vr=!1}}),n({target:"Object",stat:!0,forced:!$,sham:!L},{create:function(wn,Un){return Un===void 0?Fe(wn):Xr(Fe(wn),Un)},defineProperty:xn,defineProperties:Xr,getOwnPropertyDescriptor:Zr}),n({target:"Object",stat:!0,forced:!$},{getOwnPropertyNames:Nn}),pr(),hr(Er,"Symbol"),lr[Sr]=!0},function(t,r,e){var n=e(172),g=e(73);t.exports=n?{}.toString:function(){return"[object "+g(this)+"]"}},function(t,r,e){var n=e(16),g=e(17),y=n.WeakMap;t.exports=g(y)&&/native code/.test(String(y))},function(t,r,e){var n=e(1),g=e(33),y=e(31),i=e(58),k=e(113),L=e(227),$=k("string-to-symbol-registry"),V=k("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!L},{for:function(z){var re=i(z);if(y($,re))return $[re];var oe=g("Symbol")(re);return $[re]=oe,V[oe]=re,oe}})},function(t,r,e){var n=e(1),g=e(31),y=e(131),i=e(85),k=e(113),L=e(227),$=k("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!L},{keyFor:function(V){if(!y(V))throw TypeError(i(V)+" is not a symbol");if(g($,V))return $[V]}})},function(t,r,e){var n=e(1),g=e(99),y=e(7),i=e(136),k=e(46);n({target:"Object",stat:!0,forced:!g||y(function(){i.f(1)})},{getOwnPropertySymbols:function(L){var $=i.f;return $?$(k(L)):[]}})},function(t,r,e){e(25)("asyncIterator")},function(t,r){},function(t,r,e){e(25)("hasInstance")},function(t,r,e){e(25)("isConcatSpreadable")},function(t,r,e){e(25)("match")},function(t,r,e){e(25)("matchAll")},function(t,r,e){e(25)("replace")},function(t,r,e){e(25)("search")},function(t,r,e){e(25)("species")},function(t,r,e){e(25)("split")},function(t,r,e){var n=e(33),g=e(25),y=e(89);g("toStringTag"),y(n("Symbol"),"Symbol")},function(t,r,e){e(25)("unscopables")},function(t,r,e){var n=e(16);e(89)(n.JSON,"JSON",!0)},function(t,r){},function(t,r){},function(t,r,e){var n=e(232).IteratorPrototype,g=e(88),y=e(84),i=e(89),k=e(105),L=function(){return this};t.exports=function($,V,z,re){var oe=V+" Iterator";return $.prototype=g(n,{next:y(+!re,z)}),i($,oe,!1,!0),k[oe]=L,$}},function(t,r,e){var n=e(17),g=String,y=TypeError;t.exports=function(i){if(typeof i=="object"||n(i))return i;throw y("Can't set "+g(i)+" as a prototype")}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,e){e(25)("dispose")},function(t,r,e){e(25)("asyncDispose")},function(t,r,e){e(25)("matcher")},function(t,r,e){e(25)("metadataKey")},function(t,r,e){e(25)("observable")},function(t,r,e){e(25)("metadata")},function(t,r,e){e(25)("patternMatch")},function(t,r,e){e(25)("replaceAll")},function(t,r,e){t.exports=e(373)},function(t,r,e){t.exports=e(374)},function(t,r,e){var n=e(375);t.exports=n},function(t,r,e){var n=e(376);t.exports=n},function(t,r,e){var n=e(377);e(75),t.exports=n},function(t,r,e){e(90),e(102),e(118),e(229);var n=e(137);t.exports=n.f("iterator")},function(t,r,e){e(379);var n=e(14);t.exports=n.Array.isArray},function(t,r,e){e(1)({target:"Array",stat:!0},{isArray:e(87)})},function(t,r,e){var n=e(381);t.exports=n},function(t,r,e){e(382);var n=e(27);t.exports=n("Array").forEach},function(t,r,e){var n=e(1),g=e(383);n({target:"Array",proto:!0,forced:[].forEach!=g},{forEach:g})},function(t,r,e){var n=e(69).forEach,g=e(86)("forEach");t.exports=g?[].forEach:function(y){return n(this,y,arguments.length>1?arguments[1]:void 0)}},function(t,r,e){t.exports=e(385)},function(t,r,e){var n=e(386);t.exports=n},function(t,r,e){e(387);var n=e(14).Object;t.exports=function(g){return n.getOwnPropertyNames(g)}},function(t,r,e){var n=e(1),g=e(7),y=e(175).f;n({target:"Object",stat:!0,forced:g(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:y})},function(t,r,e){e(389);var n=e(14);t.exports=n.Object.keys},function(t,r,e){var n=e(1),g=e(46),y=e(124);n({target:"Object",stat:!0,forced:e(7)(function(){y(1)})},{keys:function(i){return y(g(i))}})},function(t,r,e){var n=e(391);t.exports=n},function(t,r,e){e(228);var n=e(14),g=e(83);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(y,i,k){return g(n.JSON.stringify,null,arguments)}},function(t,r,e){e(239),e(90),e(102),e(399),e(253),e(254),e(412),e(118);var n=e(14);t.exports=n.Promise},function(t,r,e){var n=e(1),g=e(18),y=e(138),i=e(139),k=e(394),L=e(88),$=e(65),V=e(84),z=e(395),re=e(396),oe=e(50),le=e(397),ue=e(21),ie=e(398),ae=ue("toStringTag"),Fe=Error,de=[].push,Ie=function(kt,At){var ze,Et=arguments.length>2?arguments[2]:void 0,cr=g(Ve,this);i?ze=i(Fe(),cr?y(this):Ve):(ze=cr?this:L(Ve),$(ze,ae,"Error")),At!==void 0&&$(ze,"message",le(At)),ie&&$(ze,"stack",z(ze.stack,1)),re(ze,Et);var er=[];return oe(kt,de,{that:er}),$(ze,"errors",er),ze};i?i(Ie,Fe):k(Ie,Fe,{name:!0});var Ve=Ie.prototype=L(Fe.prototype,{constructor:V(1,Ie),message:V(1,""),name:V(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:Ie})},function(t,r,e){var n=e(31),g=e(240),y=e(97),i=e(40);t.exports=function(k,L,$){for(var V=g(L),z=i.f,re=y.f,oe=0;oe<V.length;oe++){var le=V[oe];n(k,le)||$&&n($,le)||z(k,le,re(L,le))}}},function(t,r,e){var n=e(13),g=Error,y=n("".replace),i=String(g("zxcasd").stack),k=/\n\s*at [^:]*:[^\n]*/,L=k.test(i);t.exports=function($,V){if(L&&typeof $=="string"&&!g.prepareStackTrace)for(;V--;)$=y($,k,"");return $}},function(t,r,e){var n=e(30),g=e(65);t.exports=function(y,i){n(i)&&"cause"in i&&g(y,"cause",i.cause)}},function(t,r,e){var n=e(58);t.exports=function(g,y){return g===void 0?arguments.length<2?"":y:n(g)}},function(t,r,e){var n=e(7),g=e(84);t.exports=!n(function(){var y=Error("a");return!("stack"in y)||(Object.defineProperty(y,"stack",g(1,7)),y.stack!==7)})},function(t,r,e){e(400),e(407),e(408),e(409),e(410),e(411)},function(t,r,e){var n,g,y,i=e(1),k=e(57),L=e(119),$=e(16),V=e(20),z=e(74),re=e(139),oe=e(89),le=e(244),ue=e(32),ie=e(17),ae=e(30),Fe=e(178),de=e(245),Ie=e(246).set,Ve=e(401),kt=e(404),At=e(106),ze=e(405),Et=e(103),cr=e(107),er=e(120),or=e(76),dr=er.CONSTRUCTOR,lr=er.REJECTION_EVENT,nr=er.SUBCLASSING,ur=Et.getterFor("Promise"),ar=Et.set,gr=cr&&cr.prototype,pr=cr,hr=gr,Cr=$.TypeError,wr=$.document,Sr=$.process,mr=or.f,_r=mr,Ar=!!(wr&&wr.createEvent&&$.dispatchEvent),Er=function(Fr){var qr;return!(!ae(Fr)||!ie(qr=Fr.then))&&qr},sr=function(Fr,qr){var Vr,Qr,Tn,xn=qr.value,Xr=qr.state==1,Vn=Xr?Fr.ok:Fr.fail,Zr=Fr.resolve,Nn=Fr.reject,Jr=Fr.domain;try{Vn?(Xr||(qr.rejection===2&&yr(qr),qr.rejection=1),Vn===!0?Vr=xn:(Jr&&Jr.enter(),Vr=Vn(xn),Jr&&(Jr.exit(),Tn=!0)),Vr===Fr.promise?Nn(Cr("Promise-chain cycle")):(Qr=Er(Vr))?V(Qr,Vr,Zr,Nn):Zr(Vr)):Nn(xn)}catch(wn){Jr&&!Tn&&Jr.exit(),Nn(wn)}},xr=function(Fr,qr){Fr.notified||(Fr.notified=!0,Ve(function(){for(var Vr,Qr=Fr.reactions;Vr=Qr.get();)sr(Vr,Fr);Fr.notified=!1,qr&&!Fr.rejection&&Mr(Fr)}))},Nr=function(Fr,qr,Vr){var Qr,Tn;Ar?((Qr=wr.createEvent("Event")).promise=qr,Qr.reason=Vr,Qr.initEvent(Fr,!1,!0),$.dispatchEvent(Qr)):Qr={promise:qr,reason:Vr},!lr&&(Tn=$["on"+Fr])?Tn(Qr):Fr==="unhandledrejection"&&kt("Unhandled promise rejection",Vr)},Mr=function(Fr){V(Ie,$,function(){var qr,Vr=Fr.facade,Qr=Fr.value;if(br(Fr)&&(qr=At(function(){L?Sr.emit("unhandledRejection",Qr,Vr):Nr("unhandledrejection",Vr,Qr)}),Fr.rejection=L||br(Fr)?2:1,qr.error))throw qr.value})},br=function(Fr){return Fr.rejection!==1&&!Fr.parent},yr=function(Fr){V(Ie,$,function(){var qr=Fr.facade;L?Sr.emit("rejectionHandled",qr):Nr("rejectionhandled",qr,Fr.value)})},Tr=function(Fr,qr,Vr){return function(Qr){Fr(qr,Qr,Vr)}},Br=function(Fr,qr,Vr){Fr.done||(Fr.done=!0,Vr&&(Fr=Vr),Fr.value=qr,Fr.state=2,xr(Fr,!0))},Lr=function(Fr,qr,Vr){if(!Fr.done){Fr.done=!0,Vr&&(Fr=Vr);try{if(Fr.facade===qr)throw Cr("Promise can't be resolved itself");var Qr=Er(qr);Qr?Ve(function(){var Tn={done:!1};try{V(Qr,qr,Tr(Lr,Tn,Fr),Tr(Br,Tn,Fr))}catch(xn){Br(Tn,xn,Fr)}}):(Fr.value=qr,Fr.state=1,xr(Fr,!1))}catch(Tn){Br({done:!1},Tn,Fr)}}};if(dr&&(hr=(pr=function(Fr){Fe(this,hr),ue(Fr),V(n,this);var qr=ur(this);try{Fr(Tr(Lr,qr),Tr(Br,qr))}catch(Vr){Br(qr,Vr)}}).prototype,(n=function(Fr){ar(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new ze,rejection:!1,state:0,value:void 0})}).prototype=z(hr,"then",function(Fr,qr){var Vr=ur(this),Qr=mr(de(this,pr));return Vr.parent=!0,Qr.ok=!ie(Fr)||Fr,Qr.fail=ie(qr)&&qr,Qr.domain=L?Sr.domain:void 0,Vr.state==0?Vr.reactions.add(Qr):Ve(function(){sr(Qr,Vr)}),Qr.promise}),g=function(){var Fr=new n,qr=ur(Fr);this.promise=Fr,this.resolve=Tr(Lr,qr),this.reject=Tr(Br,qr)},or.f=mr=function(Fr){return Fr===pr||Fr===void 0?new g(Fr):_r(Fr)},!k&&ie(cr)&&gr!==Object.prototype)){y=gr.then,nr||z(gr,"then",function(Fr,qr){var Vr=this;return new pr(function(Qr,Tn){V(y,Vr,Qr,Tn)}).then(Fr,qr)},{unsafe:!0});try{delete gr.constructor}catch{}re&&re(gr,hr)}i({global:!0,constructor:!0,wrap:!0,forced:dr},{Promise:pr}),oe(pr,"Promise",!1,!0),le("Promise")},function(t,r,e){var n,g,y,i,k,L,$,V,z=e(16),re=e(36),oe=e(97).f,le=e(246).set,ue=e(248),ie=e(402),ae=e(403),Fe=e(119),de=z.MutationObserver||z.WebKitMutationObserver,Ie=z.document,Ve=z.process,kt=z.Promise,At=oe(z,"queueMicrotask"),ze=At&&At.value;ze||(n=function(){var Et,cr;for(Fe&&(Et=Ve.domain)&&Et.exit();g;){cr=g.fn,g=g.next;try{cr()}catch(er){throw g?i():y=void 0,er}}y=void 0,Et&&Et.enter()},ue||Fe||ae||!de||!Ie?!ie&&kt&&kt.resolve?(($=kt.resolve(void 0)).constructor=kt,V=re($.then,$),i=function(){V(n)}):Fe?i=function(){Ve.nextTick(n)}:(le=re(le,z),i=function(){le(n)}):(k=!0,L=Ie.createTextNode(""),new de(n).observe(L,{characterData:!0}),i=function(){L.data=k=!k})),t.exports=ze||function(Et){var cr={fn:Et,next:void 0};y&&(y.next=cr),g||(g=cr,i()),y=cr}},function(t,r,e){var n=e(72),g=e(16);t.exports=/ipad|iphone|ipod/i.test(n)&&g.Pebble!==void 0},function(t,r,e){var n=e(72);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,r,e){var n=e(16);t.exports=function(g,y){var i=n.console;i&&i.error&&(arguments.length==1?i.error(g):i.error(g,y))}},function(t,r){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(n){var g={item:n,next:null};this.head?this.tail.next=g:this.head=g,this.tail=g},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},t.exports=e},function(t,r,e){var n=e(249),g=e(119);t.exports=!n&&!g&&typeof window=="object"&&typeof document=="object"},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(76),k=e(106),L=e(50);n({target:"Promise",stat:!0,forced:e(250)},{all:function($){var V=this,z=i.f(V),re=z.resolve,oe=z.reject,le=k(function(){var ue=y(V.resolve),ie=[],ae=0,Fe=1;L($,function(de){var Ie=ae++,Ve=!1;Fe++,g(ue,V,de).then(function(kt){Ve||(Ve=!0,ie[Ie]=kt,--Fe||re(ie))},oe)}),--Fe||re(ie)});return le.error&&oe(le.value),z.promise}})},function(t,r,e){var n=e(1),g=e(57),y=e(120).CONSTRUCTOR,i=e(107),k=e(33),L=e(17),$=e(74),V=i&&i.prototype;if(n({target:"Promise",proto:!0,forced:y,real:!0},{catch:function(re){return this.then(void 0,re)}}),!g&&L(i)){var z=k("Promise").prototype.catch;V.catch!==z&&$(V,"catch",z,{unsafe:!0})}},function(t,r,e){var n=e(1),g=e(20),y=e(32),i=e(76),k=e(106),L=e(50);n({target:"Promise",stat:!0,forced:e(250)},{race:function($){var V=this,z=i.f(V),re=z.reject,oe=k(function(){var le=y(V.resolve);L($,function(ue){g(le,V,ue).then(z.resolve,re)})});return oe.error&&re(oe.value),z.promise}})},function(t,r,e){var n=e(1),g=e(20),y=e(76);n({target:"Promise",stat:!0,forced:e(120).CONSTRUCTOR},{reject:function(i){var k=y.f(this);return g(k.reject,void 0,i),k.promise}})},function(t,r,e){var n=e(1),g=e(33),y=e(57),i=e(107),k=e(120).CONSTRUCTOR,L=e(252),$=g("Promise"),V=y&&!k;n({target:"Promise",stat:!0,forced:y||k},{resolve:function(z){return L(V&&this===$?i:this,z)}})},function(t,r,e){var n=e(1),g=e(57),y=e(107),i=e(7),k=e(33),L=e(17),$=e(245),V=e(252),z=e(74),re=y&&y.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!y&&i(function(){re.finally.call({then:function(){}},function(){})})},{finally:function(le){var ue=$(this,k("Promise")),ie=L(le);return this.then(ie?function(ae){return V(ue,le()).then(function(){return ae})}:le,ie?function(ae){return V(ue,le()).then(function(){throw ae})}:le)}}),!g&&L(y)){var oe=k("Promise").prototype.finally;re.finally!==oe&&z(re,"finally",oe,{unsafe:!0})}},function(t,r,e){t.exports=e(414)},function(t,r,e){var n=e(415);t.exports=n},function(t,r,e){var n=e(255);t.exports=n},function(t,r,e){e(417);var n=e(14).Object,g=t.exports=function(y,i,k){return n.defineProperty(y,i,k)};n.defineProperty.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(29),y=e(40).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==y,sham:!g},{defineProperty:y})},function(t,r,e){var n=e(419),g=e(24).default;t.exports=function(y,i){if(g(y)!=="object"||y===null)return y;var k=y[n];if(k!==void 0){var L=k.call(y,i||"default");if(g(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(420)},function(t,r,e){t.exports=e(421)},function(t,r,e){var n=e(422);t.exports=n},function(t,r,e){var n=e(423);t.exports=n},function(t,r,e){var n=e(424);t.exports=n},function(t,r,e){e(425),e(230);var n=e(137);t.exports=n.f("toPrimitive")},function(t,r){},function(t,r,e){var n=e(18),g=e(427),y=Array.prototype;t.exports=function(i){var k=i.slice;return i===y||n(y,i)&&k===y.slice?g:k}},function(t,r,e){e(428);var n=e(27);t.exports=n("Array").slice},function(t,r,e){var n=e(1),g=e(87),y=e(133),i=e(30),k=e(114),L=e(49),$=e(47),V=e(101),z=e(21),re=e(116),oe=e(104),le=re("slice"),ue=z("species"),ie=Array,ae=Math.max;n({target:"Array",proto:!0,forced:!le},{slice:function(Fe,de){var Ie,Ve,kt,At=$(this),ze=L(At),Et=k(Fe,ze),cr=k(de===void 0?ze:de,ze);if(g(At)&&(Ie=At.constructor,(y(Ie)&&(Ie===ie||g(Ie.prototype))||i(Ie)&&(Ie=Ie[ue])===null)&&(Ie=void 0),Ie===ie||Ie===void 0))return oe(At,Et,cr);for(Ve=new(Ie===void 0?ie:Ie)(ae(cr-Et,0)),kt=0;Et<cr;Et++,kt++)Et in At&&V(Ve,kt,At[Et]);return Ve.length=kt,Ve}})},function(t,r,e){var n=e(430);t.exports=n},function(t,r,e){var n=e(18),g=e(431),y=Array.prototype;t.exports=function(i){var k=i.some;return i===y||n(y,i)&&k===y.some?g:k}},function(t,r,e){e(432);var n=e(27);t.exports=n("Array").some},function(t,r,e){var n=e(1),g=e(69).some;n({target:"Array",proto:!0,forced:!e(86)("some")},{some:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(434);t.exports=n},function(t,r,e){var n=e(18),g=e(435),y=Array.prototype;t.exports=function(i){var k=i.splice;return i===y||n(y,i)&&k===y.splice?g:k}},function(t,r,e){e(436);var n=e(27);t.exports=n("Array").splice},function(t,r,e){var n=e(1),g=e(46),y=e(114),i=e(115),k=e(49),L=e(437),$=e(218),V=e(171),z=e(101),re=e(258),oe=e(116)("splice"),le=Math.max,ue=Math.min;n({target:"Array",proto:!0,forced:!oe},{splice:function(ie,ae){var Fe,de,Ie,Ve,kt,At,ze=g(this),Et=k(ze),cr=y(ie,Et),er=arguments.length;for(er===0?Fe=de=0:er===1?(Fe=0,de=Et-cr):(Fe=er-2,de=ue(le(i(ae),0),Et-cr)),$(Et+Fe-de),Ie=V(ze,de),Ve=0;Ve<de;Ve++)(kt=cr+Ve)in ze&&z(Ie,Ve,ze[kt]);if(Ie.length=de,Fe<de){for(Ve=cr;Ve<Et-de;Ve++)At=Ve+Fe,(kt=Ve+de)in ze?ze[At]=ze[kt]:re(ze,At);for(Ve=Et;Ve>Et-de+Fe;Ve--)re(ze,Ve-1)}else if(Fe>de)for(Ve=Et-de;Ve>cr;Ve--)At=Ve+Fe-1,(kt=Ve+de-1)in ze?ze[At]=ze[kt]:re(ze,At);for(Ve=0;Ve<Fe;Ve++)ze[Ve+cr]=arguments[Ve+2];return L(ze,Et-de+Fe),Ie}})},function(t,r,e){var n=e(29),g=e(87),y=TypeError,i=Object.getOwnPropertyDescriptor,k=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(L){return L instanceof TypeError}}();t.exports=k?function(L,$){if(g(L)&&!i(L,"length").writable)throw y("Cannot set read only .length");return L.length=$}:function(L,$){return L.length=$}},function(t,r,e){var n=e(439);t.exports=n},function(t,r,e){var n=e(18),g=e(440),y=Array.prototype;t.exports=function(i){var k=i.sort;return i===y||n(y,i)&&k===y.sort?g:k}},function(t,r,e){e(441);var n=e(27);t.exports=n("Array").sort},function(t,r,e){var n=e(1),g=e(13),y=e(32),i=e(46),k=e(49),L=e(258),$=e(58),V=e(7),z=e(442),re=e(86),oe=e(443),le=e(444),ue=e(100),ie=e(445),ae=[],Fe=g(ae.sort),de=g(ae.push),Ie=V(function(){ae.sort(void 0)}),Ve=V(function(){ae.sort(null)}),kt=re("sort"),At=!V(function(){if(ue)return ue<70;if(!(oe&&oe>3)){if(le)return!0;if(ie)return ie<603;var ze,Et,cr,er,or="";for(ze=65;ze<76;ze++){switch(Et=String.fromCharCode(ze),ze){case 66:case 69:case 70:case 72:cr=3;break;case 68:case 71:cr=4;break;default:cr=2}for(er=0;er<47;er++)ae.push({k:Et+er,v:cr})}for(ae.sort(function(dr,lr){return lr.v-dr.v}),er=0;er<ae.length;er++)Et=ae[er].k.charAt(0),or.charAt(or.length-1)!==Et&&(or+=Et);return or!=="DGBEFHACIJK"}});n({target:"Array",proto:!0,forced:Ie||!Ve||!kt||!At},{sort:function(ze){ze!==void 0&&y(ze);var Et=i(this);if(At)return ze===void 0?Fe(Et):Fe(Et,ze);var cr,er,or=[],dr=k(Et);for(er=0;er<dr;er++)er in Et&&de(or,Et[er]);for(z(or,function(lr){return function(nr,ur){return ur===void 0?-1:nr===void 0?1:lr!==void 0?+lr(nr,ur)||0:$(nr)>$(ur)?1:-1}}(ze)),cr=k(or),er=0;er<cr;)Et[er]=or[er++];for(;er<dr;)L(Et,er++);return Et}})},function(t,r,e){var n=e(225),g=Math.floor,y=function(L,$){var V=L.length,z=g(V/2);return V<8?i(L,$):k(L,y(n(L,0,z),$),y(n(L,z),$),$)},i=function(L,$){for(var V,z,re=L.length,oe=1;oe<re;){for(z=oe,V=L[oe];z&&$(L[z-1],V)>0;)L[z]=L[--z];z!==oe++&&(L[z]=V)}return L},k=function(L,$,V,z){for(var re=$.length,oe=V.length,le=0,ue=0;le<re||ue<oe;)L[le+ue]=le<re&&ue<oe?z($[le],V[ue])<=0?$[le++]:V[ue++]:le<re?$[le++]:V[ue++];return L};t.exports=y},function(t,r,e){var n=e(72).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(72);t.exports=/MSIE|Trident/.test(n)},function(t,r,e){var n=e(72).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,r,e){var n=e(447);t.exports=n},function(t,r,e){var n=e(18),g=e(448),y=Array.prototype;t.exports=function(i){var k=i.map;return i===y||n(y,i)&&k===y.map?g:k}},function(t,r,e){e(449);var n=e(27);t.exports=n("Array").map},function(t,r,e){var n=e(1),g=e(69).map;n({target:"Array",proto:!0,forced:!e(116)("map")},{map:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(451);t.exports=n},function(t,r,e){var n=e(18),g=e(452),y=Array.prototype;t.exports=function(i){var k=i.reduce;return i===y||n(y,i)&&k===y.reduce?g:k}},function(t,r,e){e(453);var n=e(27);t.exports=n("Array").reduce},function(t,r,e){var n=e(1),g=e(454).left,y=e(86),i=e(100),k=e(119);n({target:"Array",proto:!0,forced:!y("reduce")||!k&&i>79&&i<83},{reduce:function(L){var $=arguments.length;return g(this,L,$,$>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(32),g=e(46),y=e(129),i=e(49),k=TypeError,L=function($){return function(V,z,re,oe){n(z);var le=g(V),ue=y(le),ie=i(le),ae=$?ie-1:0,Fe=$?-1:1;if(re<2)for(;;){if(ae in ue){oe=ue[ae],ae+=Fe;break}if(ae+=Fe,$?ae<0:ie<=ae)throw k("Reduce of empty array with no initial value")}for(;$?ae>=0:ie>ae;ae+=Fe)ae in ue&&(oe=z(oe,ue[ae],ae,le));return oe}};t.exports={left:L(!1),right:L(!0)}},function(t,r,e){var n=e(456);t.exports=n},function(t,r,e){var n=e(18),g=e(457),y=Array.prototype;t.exports=function(i){var k=i.lastIndexOf;return i===y||n(y,i)&&k===y.lastIndexOf?g:k}},function(t,r,e){e(458);var n=e(27);t.exports=n("Array").lastIndexOf},function(t,r,e){var n=e(1),g=e(459);n({target:"Array",proto:!0,forced:g!==[].lastIndexOf},{lastIndexOf:g})},function(t,r,e){var n=e(83),g=e(47),y=e(115),i=e(49),k=e(86),L=Math.min,$=[].lastIndexOf,V=!!$&&1/[1].lastIndexOf(1,-0)<0,z=k("lastIndexOf"),re=V||!z;t.exports=re?function(oe){if(V)return n($,this,arguments)||0;var le=g(this),ue=i(le),ie=ue-1;for(arguments.length>1&&(ie=L(ie,y(arguments[1]))),ie<0&&(ie=ue+ie);ie>=0;ie--)if(ie in le&&le[ie]===oe)return ie||0;return-1}:$},function(t,r,e){e(259);var n=e(14);t.exports=n.setTimeout},function(t,r,e){var n=e(1),g=e(16),y=e(260)(g.setInterval,!0);n({global:!0,bind:!0,forced:g.setInterval!==y},{setInterval:y})},function(t,r){t.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"},function(t,r,e){var n=e(1),g=e(16),y=e(260)(g.setTimeout,!0);n({global:!0,bind:!0,forced:g.setTimeout!==y},{setTimeout:y})},function(t,r,e){var n=e(465);t.exports=n},function(t,r,e){var n=e(18),g=e(466),y=Array.prototype;t.exports=function(i){var k=i.filter;return i===y||n(y,i)&&k===y.filter?g:k}},function(t,r,e){e(467);var n=e(27);t.exports=n("Array").filter},function(t,r,e){var n=e(1),g=e(69).filter;n({target:"Array",proto:!0,forced:!e(116)("filter")},{filter:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){t.exports=e(469)},function(t,r,e){e(75);var n=e(73),g=e(31),y=e(18),i=e(470),k=Array.prototype,L={DOMTokenList:!0,NodeList:!0};t.exports=function($){var V=$.values;return $===k||y(k,$)&&V===k.values||g(L,n($))?i:V}},function(t,r,e){var n=e(471);t.exports=n},function(t,r,e){e(90),e(102);var n=e(27);t.exports=n("Array").values},function(t,r,e){t.exports=e(473)},function(t,r,e){var n=e(474);t.exports=n},function(t,r,e){var n=e(18),g=e(475),y=Array.prototype;t.exports=function(i){var k=i.every;return i===y||n(y,i)&&k===y.every?g:k}},function(t,r,e){e(476);var n=e(27);t.exports=n("Array").every},function(t,r,e){var n=e(1),g=e(69).every;n({target:"Array",proto:!0,forced:!e(86)("every")},{every:function(y){return g(this,y,arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){e(118),e(478);var n=e(14);t.exports=n.Array.from},function(t,r,e){var n=e(1),g=e(479);n({target:"Array",stat:!0,forced:!e(251)(function(y){Array.from(y)})},{from:g})},function(t,r,e){var n=e(36),g=e(20),y=e(46),i=e(480),k=e(241),L=e(133),$=e(49),V=e(101),z=e(242),re=e(140),oe=Array;t.exports=function(le){var ue=y(le),ie=L(this),ae=arguments.length,Fe=ae>1?arguments[1]:void 0,de=Fe!==void 0;de&&(Fe=n(Fe,ae>2?arguments[2]:void 0));var Ie,Ve,kt,At,ze,Et,cr=re(ue),er=0;if(!cr||this===oe&&k(cr))for(Ie=$(ue),Ve=ie?new this(Ie):oe(Ie);Ie>er;er++)Et=de?Fe(ue[er],er):ue[er],V(Ve,er,Et);else for(ze=(At=z(ue,cr)).next,Ve=ie?new this:[];!(kt=g(ze,At)).done;er++)Et=de?i(At,Fe,[kt.value,er],!0):kt.value,V(Ve,er,Et);return Ve.length=er,Ve}},function(t,r,e){var n=e(38),g=e(243);t.exports=function(y,i,k,L){try{return L?i(n(k)[0],k[1]):i(k)}catch($){g(y,"throw",$)}}},function(t,r,e){t.exports=e(482)},function(t,r,e){var n=e(483);t.exports=n},function(t,r,e){var n=e(484);t.exports=n},function(t,r,e){var n=e(485);e(75),t.exports=n},function(t,r,e){e(90),e(118);var n=e(140);t.exports=n},function(t,r,e){e(224);var n=e(14);t.exports=n.Object.getOwnPropertySymbols},function(t,r,e){var n=e(488);t.exports=n},function(t,r,e){e(489);var n=e(14).Object,g=t.exports=function(y,i){return n.getOwnPropertyDescriptor(y,i)};n.getOwnPropertyDescriptor.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(7),y=e(47),i=e(97).f,k=e(29),L=g(function(){i(1)});n({target:"Object",stat:!0,forced:!k||L,sham:!k},{getOwnPropertyDescriptor:function($,V){return i(y($),V)}})},function(t,r,e){var n=e(491);t.exports=n},function(t,r,e){e(492);var n=e(14);t.exports=n.Object.getOwnPropertyDescriptors},function(t,r,e){var n=e(1),g=e(29),y=e(240),i=e(47),k=e(97),L=e(101);n({target:"Object",stat:!0,sham:!g},{getOwnPropertyDescriptors:function($){for(var V,z,re=i($),oe=k.f,le=y(re),ue={},ie=0;le.length>ie;)(z=oe(re,V=le[ie++]))!==void 0&&L(ue,V,z);return ue}})},function(t,r,e){var n=e(494);t.exports=n},function(t,r,e){e(495);var n=e(14).Object,g=t.exports=function(y,i){return n.defineProperties(y,i)};n.defineProperties.sham&&(g.sham=!0)},function(t,r,e){var n=e(1),g=e(29),y=e(173).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==y,sham:!g},{defineProperties:y})},function(t,r,e){var n=e(12);typeof window<"u"&&(window.console||n.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(t,r,e){var n=e(498),g=e(527),y=e(268),i=e(529),k=e(538),L=e(541),$=e(542),V=e(543),z=e(545),re=e(546),oe=e(547),le=e(189),ue=e(551),ie=e(552),ae=e(558),Fe=e(183),de=e(271),Ie=e(560),Ve=e(94),kt=e(562),At=e(182),ze=e(187),Et={};Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object DataView]"]=Et["[object Boolean]"]=Et["[object Date]"]=Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object Symbol]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Error]"]=Et["[object Function]"]=Et["[object WeakMap]"]=!1,t.exports=function cr(er,or,dr,lr,nr,ur){var ar,gr=1&or,pr=2&or,hr=4&or;if(dr&&(ar=nr?dr(er,lr,nr,ur):dr(er)),ar!==void 0)return ar;if(!Ve(er))return er;var Cr=Fe(er);if(Cr){if(ar=ue(er),!gr)return $(er,ar)}else{var wr=le(er),Sr=wr=="[object Function]"||wr=="[object GeneratorFunction]";if(de(er))return L(er,gr);if(wr=="[object Object]"||wr=="[object Arguments]"||Sr&&!nr){if(ar=pr||Sr?{}:ae(er),!gr)return pr?z(er,k(ar,er)):V(er,i(ar,er))}else{if(!Et[wr])return nr?er:{};ar=ie(er,wr,gr)}}ur||(ur=new n);var mr=ur.get(er);if(mr)return mr;ur.set(er,ar),kt(er)?er.forEach(function(Ar){ar.add(cr(Ar,or,dr,Ar,er,ur))}):Ie(er)&&er.forEach(function(Ar,Er){ar.set(Er,cr(Ar,or,dr,Er,er,ur))});var _r=Cr?void 0:(hr?pr?oe:re:pr?ze:At)(er);return g(_r||er,function(Ar,Er){_r&&(Ar=er[Er=Ar]),y(ar,Er,cr(Ar,or,dr,Er,er,ur))}),ar}},function(t,r,e){var n=e(145),g=e(504),y=e(505),i=e(506),k=e(507),L=e(508);function $(V){var z=this.__data__=new n(V);this.size=z.size}$.prototype.clear=g,$.prototype.delete=y,$.prototype.get=i,$.prototype.has=k,$.prototype.set=L,t.exports=$},function(t,r){t.exports=function(){this.__data__=[],this.size=0}},function(t,r,e){var n=e(146),g=Array.prototype.splice;t.exports=function(y){var i=this.__data__,k=n(i,y);return!(k<0)&&(k==i.length-1?i.pop():g.call(i,k,1),--this.size,!0)}},function(t,r,e){var n=e(146);t.exports=function(g){var y=this.__data__,i=n(y,g);return i<0?void 0:y[i][1]}},function(t,r,e){var n=e(146);t.exports=function(g){return n(this.__data__,g)>-1}},function(t,r,e){var n=e(146);t.exports=function(g,y){var i=this.__data__,k=n(i,g);return k<0?(++this.size,i.push([g,y])):i[k][1]=y,this}},function(t,r,e){var n=e(145);t.exports=function(){this.__data__=new n,this.size=0}},function(t,r){t.exports=function(e){var n=this.__data__,g=n.delete(e);return this.size=n.size,g}},function(t,r){t.exports=function(e){return this.__data__.get(e)}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(145),g=e(180),y=e(267);t.exports=function(i,k){var L=this.__data__;if(L instanceof n){var $=L.__data__;if(!g||$.length<199)return $.push([i,k]),this.size=++L.size,this;L=this.__data__=new y($)}return L.set(i,k),this.size=L.size,this}},function(t,r,e){var n=e(264),g=e(512),y=e(94),i=e(266),k=/^\[object .+?Constructor\]$/,L=Function.prototype,$=Object.prototype,V=L.toString,z=$.hasOwnProperty,re=RegExp("^"+V.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(oe){return!(!y(oe)||g(oe))&&(n(oe)?re:k).test(i(oe))}},function(t,r,e){var n=e(181),g=Object.prototype,y=g.hasOwnProperty,i=g.toString,k=n?n.toStringTag:void 0;t.exports=function(L){var $=y.call(L,k),V=L[k];try{L[k]=void 0;var z=!0}catch{}var re=i.call(L);return z&&($?L[k]=V:delete L[k]),re}},function(t,r){var e=Object.prototype.toString;t.exports=function(n){return e.call(n)}},function(t,r,e){var n,g=e(513),y=(n=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(i){return!!y&&y in i}},function(t,r,e){var n=e(59)["__core-js_shared__"];t.exports=n},function(t,r){t.exports=function(e,n){return e==null?void 0:e[n]}},function(t,r,e){var n=e(516),g=e(145),y=e(180);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(y||g),string:new n}}},function(t,r,e){var n=e(517),g=e(518),y=e(519),i=e(520),k=e(521);function L($){var V=-1,z=$==null?0:$.length;for(this.clear();++V<z;){var re=$[V];this.set(re[0],re[1])}}L.prototype.clear=n,L.prototype.delete=g,L.prototype.get=y,L.prototype.has=i,L.prototype.set=k,t.exports=L},function(t,r,e){var n=e(147);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,r){t.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(t,r,e){var n=e(147),g=Object.prototype.hasOwnProperty;t.exports=function(y){var i=this.__data__;if(n){var k=i[y];return k==="__lodash_hash_undefined__"?void 0:k}return g.call(i,y)?i[y]:void 0}},function(t,r,e){var n=e(147),g=Object.prototype.hasOwnProperty;t.exports=function(y){var i=this.__data__;return n?i[y]!==void 0:g.call(i,y)}},function(t,r,e){var n=e(147);t.exports=function(g,y){var i=this.__data__;return this.size+=this.has(g)?0:1,i[g]=n&&y===void 0?"__lodash_hash_undefined__":y,this}},function(t,r,e){var n=e(148);t.exports=function(g){var y=n(this,g).delete(g);return this.size-=y?1:0,y}},function(t,r){t.exports=function(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}},function(t,r,e){var n=e(148);t.exports=function(g){return n(this,g).get(g)}},function(t,r,e){var n=e(148);t.exports=function(g){return n(this,g).has(g)}},function(t,r,e){var n=e(148);t.exports=function(g,y){var i=n(this,g),k=i.size;return i.set(g,y),this.size+=i.size==k?0:1,this}},function(t,r){t.exports=function(e,n){for(var g=-1,y=e==null?0:e.length;++g<y&&n(e[g],g,e)!==!1;);return e}},function(t,r,e){var n=e(91),g=function(){try{var y=n(Object,"defineProperty");return y({},"",{}),y}catch{}}();t.exports=g},function(t,r,e){var n=e(149),g=e(182);t.exports=function(y,i){return y&&n(i,g(i),y)}},function(t,r){t.exports=function(e,n){for(var g=-1,y=Array(e);++g<e;)y[g]=n(g);return y}},function(t,r,e){var n=e(532),g=e(108),y=Object.prototype,i=y.hasOwnProperty,k=y.propertyIsEnumerable,L=n(function(){return arguments}())?n:function($){return g($)&&i.call($,"callee")&&!k.call($,"callee")};t.exports=L},function(t,r,e){var n=e(126),g=e(108);t.exports=function(y){return g(y)&&n(y)=="[object Arguments]"}},function(t,r){t.exports=function(){return!1}},function(t,r,e){var n=e(535),g=e(184),y=e(185),i=y&&y.isTypedArray,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(126),g=e(272),y=e(108),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(k){return y(k)&&g(k.length)&&!!i[n(k)]}},function(t,r,e){var n=e(186),g=e(537),y=Object.prototype.hasOwnProperty;t.exports=function(i){if(!n(i))return g(i);var k=[];for(var L in Object(i))y.call(i,L)&&L!="constructor"&&k.push(L);return k}},function(t,r,e){var n=e(273)(Object.keys,Object);t.exports=n},function(t,r,e){var n=e(149),g=e(187);t.exports=function(y,i){return y&&n(i,g(i),y)}},function(t,r,e){var n=e(94),g=e(186),y=e(540),i=Object.prototype.hasOwnProperty;t.exports=function(k){if(!n(k))return y(k);var L=g(k),$=[];for(var V in k)(V!="constructor"||!L&&i.call(k,V))&&$.push(V);return $}},function(t,r){t.exports=function(e){var n=[];if(e!=null)for(var g in Object(e))n.push(g);return n}},function(t,r,e){(function(n){var g=e(59),y=r&&!r.nodeType&&r,i=y&&typeof n=="object"&&n&&!n.nodeType&&n,k=i&&i.exports===y?g.Buffer:void 0,L=k?k.allocUnsafe:void 0;n.exports=function($,V){if(V)return $.slice();var z=$.length,re=L?L(z):new $.constructor(z);return $.copy(re),re}}).call(this,e(150)(t))},function(t,r){t.exports=function(e,n){var g=-1,y=e.length;for(n||(n=Array(y));++g<y;)n[g]=e[g];return n}},function(t,r,e){var n=e(149),g=e(188);t.exports=function(y,i){return n(y,g(y),i)}},function(t,r){t.exports=function(e,n){for(var g=-1,y=e==null?0:e.length,i=0,k=[];++g<y;){var L=e[g];n(L,g,e)&&(k[i++]=L)}return k}},function(t,r,e){var n=e(149),g=e(275);t.exports=function(y,i){return n(y,g(y),i)}},function(t,r,e){var n=e(278),g=e(188),y=e(182);t.exports=function(i){return n(i,y,g)}},function(t,r,e){var n=e(278),g=e(275),y=e(187);t.exports=function(i){return n(i,y,g)}},function(t,r,e){var n=e(91)(e(59),"DataView");t.exports=n},function(t,r,e){var n=e(91)(e(59),"Promise");t.exports=n},function(t,r,e){var n=e(91)(e(59),"WeakMap");t.exports=n},function(t,r){var e=Object.prototype.hasOwnProperty;t.exports=function(n){var g=n.length,y=new n.constructor(g);return g&&typeof n[0]=="string"&&e.call(n,"index")&&(y.index=n.index,y.input=n.input),y}},function(t,r,e){var n=e(190),g=e(554),y=e(555),i=e(556),k=e(557);t.exports=function(L,$,V){var z=L.constructor;switch($){case"[object ArrayBuffer]":return n(L);case"[object Boolean]":case"[object Date]":return new z(+L);case"[object DataView]":return g(L,V);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return k(L,V);case"[object Map]":return new z;case"[object Number]":case"[object String]":return new z(L);case"[object RegExp]":return y(L);case"[object Set]":return new z;case"[object Symbol]":return i(L)}}},function(t,r,e){var n=e(59).Uint8Array;t.exports=n},function(t,r,e){var n=e(190);t.exports=function(g,y){var i=y?n(g.buffer):g.buffer;return new g.constructor(i,g.byteOffset,g.byteLength)}},function(t,r){var e=/\w*$/;t.exports=function(n){var g=new n.constructor(n.source,e.exec(n));return g.lastIndex=n.lastIndex,g}},function(t,r,e){var n=e(181),g=n?n.prototype:void 0,y=g?g.valueOf:void 0;t.exports=function(i){return y?Object(y.call(i)):{}}},function(t,r,e){var n=e(190);t.exports=function(g,y){var i=y?n(g.buffer):g.buffer;return new g.constructor(i,g.byteOffset,g.length)}},function(t,r,e){var n=e(559),g=e(277),y=e(186);t.exports=function(i){return typeof i.constructor!="function"||y(i)?{}:n(g(i))}},function(t,r,e){var n=e(94),g=Object.create,y=function(){function i(){}return function(k){if(!n(k))return{};if(g)return g(k);i.prototype=k;var L=new i;return i.prototype=void 0,L}}();t.exports=y},function(t,r,e){var n=e(561),g=e(184),y=e(185),i=y&&y.isMap,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(189),g=e(108);t.exports=function(y){return g(y)&&n(y)=="[object Map]"}},function(t,r,e){var n=e(563),g=e(184),y=e(185),i=y&&y.isSet,k=i?g(i):n;t.exports=k},function(t,r,e){var n=e(189),g=e(108);t.exports=function(y){return g(y)&&n(y)=="[object Set]"}},function(t,r,e){var n=e(2),g=e(5),y=e(8),i=e(63),k=e(6),L=e(9),$=e(4),V=e(3),z=e(70),re=e(0),oe=e(12),le=e(48),ue={};function ie(){var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};!kt.logLevel&&kt.debug&&(kt.logLevel="debug"),re.merge(this,{options:kt,debugEnable:!1,api:"log",style:"color:blue;",logLevel:kt.logLevel&&kt.logLevel.toLowerCase()||"off",debug:re.emptyFunc,log:re.emptyFunc,info:re.emptyFunc,warn:re.emptyFunc,error:re.emptyFunc}),this.prefix=kt.prefix||"",this.localEnable=ue.enable&&kt.dbLog&&kt.account,this.setDebug(kt.debug),this.localEnable&&(this._local=new ue(kt.account,kt.expire),this._local.logError=this.error)}ue=e(573);var ae=ie.prototype,Fe=["Chrome","Safari","Firefox"],de={debug:1e3,log:2e3,info:3e3,warn:4e3,error:5e3,off:6e3};function Ie(kt){var At,ze=[];return n(At=g(de)).call(At,function(Et){de[Et]>=de[kt]&&ze.push(Et)}),ze}ae.setDebug=function(){var kt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],At=this;if(At.debugEnable=kt||At.logLevel==="debug",kt.style&&(At.style=kt.style),re.exist(console)){if(At.logLevel!=="off"){var ze=console,Et=Ie(At.logLevel);n(Et).call(Et,function(er){At[er]=function(){var or=At.formatArgsAndSave(arguments,er);y(Fe).call(Fe,z.name)!==-1&&re.isString(or[0])&&(or[0]="%c"+or[0],i(or).call(or,1,0,At.style)),At._log(er,or)}}),At.options.logFunc?At._log=function(){}:At._log=function(er,or){if(er==="debug"&&(er="log"),ze[er])try{ze[er].apply?At.chrome(er,or):At.ie(er,or)}catch{}},At.chrome=function(er,or){y(Fe).call(Fe,z.name)!==-1?ze[er].apply(ze,or):At.ie(er,or)},At.ie=function(er,or){n(or).call(or,function(dr){ze[er](k(dr,null,4))})}}else if(oe.isRN||this.localEnable||this.options.logFunc){var cr=!oe.isRN&&!this.localEnable;At.log=function(){At.formatArgsAndSave(arguments,"log",cr)},At.info=function(){At.formatArgsAndSave(arguments,"info",cr)},At.warn=function(){At.formatArgsAndSave(arguments,"warn",cr)},At.error=function(){At.formatArgsAndSave(arguments,"error",cr)},At.debug=function(){At.formatArgsAndSave(arguments,"log",cr)}}}},ae.destroy=function(){this.localEnable=!1,this.log=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.debug=function(){},this._local&&this._local.destroy()},ae.formatArgsAndSave=function(kt,At,ze){var Et,cr;kt=L([]).call(kt,0);var er=new Date,or=Ve(er.getMonth()+1)+"-"+Ve(er.getDate())+" "+Ve(er.getHours())+":"+Ve(er.getMinutes())+":"+Ve(er.getSeconds())+":"+Ve(er.getMilliseconds(),3),dr=$(Et=$(cr="[NIM ".concat(At.toUpperCase()," ")).call(cr,or," ")).call(Et,this.prefix.toUpperCase(),"]  "),lr="";re.isString(kt[0])?kt[0]=dr+kt[0]:i(kt).call(kt,0,0,dr),n(kt).call(kt,function(ur,ar){re.isArray(ur)||re.isObject(ur)?(kt[ar]=re.simpleClone(ur),lr+=k(kt[ar])+" "):lr+=ur+" "});var nr=this.options.logFunc;return nr&&re.isFunction(nr[At])&&nr[At].apply(nr,kt),!ze&&this.writeLocalLog(lr,At,+er),kt},ae.writeLocalLog=function(kt,At,ze){return oe.isRN?this.writeLocalLogRN(kt,At,ze):oe.isBrowser?this.writeLocalLogBrowser(kt,At,ze):void 0};var Ve=function(kt,At){At=At||2;for(var ze=""+kt;ze.length<At;)ze="0"+ze;return ze};ae.writeLocalLogBrowser=function(kt,At,ze){this._local&&this._local.saveLog({log:kt,level:At,time:ze})},ae.writeLocalLogRN=function(kt,At){if(le.rnfs&&le.rnfs.writeFile&&le.rnfs.appendFile&&le.rnfs.DocumentDirectoryPath&&/error|warn|info/.test(At)){var ze,Et=le.rnfs,cr=Et.size/2-256;kt+=`\r
`,Et.nimPromise=Et.nimPromise.then(function(){return ze=er(Et.nimIndex),Et.exists(ze)}).then(function(or){return or?Et.appendFile(ze,kt):Et.writeFile(ze,kt)}).then(function(){return Et.stat(ze)}).then(function(or){if(or.size>cr)return Et.nimIndex++,Et.nimIndex>1&&(Et.nimIndex=Et.nimIndex%2),Et.unlink(er(Et.nimIndex)).catch(function(){return V.resolve()})}).catch(function(){})}function er(or){return le.rnfs.DocumentDirectoryPath+"/nimlog_"+or+".log"}},t.exports=ie},function(t,r,e){var n=e(566);t.exports=n},function(t,r,e){e(567);var n=e(14);t.exports=n.parseFloat},function(t,r,e){var n=e(1),g=e(568);n({global:!0,forced:parseFloat!=g},{parseFloat:g})},function(t,r,e){var n=e(16),g=e(7),y=e(13),i=e(58),k=e(191).trim,L=e(151),$=y("".charAt),V=n.parseFloat,z=n.Symbol,re=z&&z.iterator,oe=1/V(L+"-0")!=-1/0||re&&!g(function(){V(Object(re))});t.exports=oe?function(le){var ue=k(i(le)),ie=V(ue);return ie===0&&$(ue,0)=="-"?-0:ie}:V},function(t,r,e){var n=e(570);t.exports=n},function(t,r,e){e(571);var n=e(14);t.exports=n.parseInt},function(t,r,e){var n=e(1),g=e(572);n({global:!0,forced:parseInt!=g},{parseInt:g})},function(t,r,e){var n=e(16),g=e(7),y=e(13),i=e(58),k=e(191).trim,L=e(151),$=n.parseInt,V=n.Symbol,z=V&&V.iterator,re=/^[+-]?0x/i,oe=y(re.exec),le=$(L+"08")!==8||$(L+"0x16")!==22||z&&!g(function(){$(Object(z))});t.exports=le?function(ue,ie){var ae=k(i(ue));return $(ae,ie>>>0||(oe(re,ae)?16:10))}:$},function(t,r,e){var n=e(9),g=e(22),y=e(3),i=e(574),k=e(575),L=e(0).getGlobal(),$=e(70).name,V=typeof i=="function",z=L.indexedDB&&!/^(IE)$/.test($);function re(le,ue){this.logWorker=null,this.db=null,this.tabId=(65536*(1+Math.random())|0).toString(16).substring(1),this.logQueue=[],this.callbackList=[],this.preTime=null,this.lastTime=+new Date,this.saveLogTimer=void 0,this.initLogLocal({name:le,expire:ue})}var oe=re.prototype;re.enable=!0,oe.saveLog=function(le){var ue=this;le.tabId=this.tabId;try{if(!re.enable)return;var ie,ae=this.logQueue.length,Fe=this.logQueue[ae-1];if(le.time===this.preTime&&Fe)return void(Fe.log+=`\r
`+this.tabId+" "+le.log);this.logQueue.length>50||le.time-this.lastTime>3e3&&this.logQueue.length>0?(this.doSaveLog(n(ie=this.logQueue).call(ie,0)),this.lastTime=Fe.time,this.logQueue=[],clearTimeout(this.saveLogTimer)):(clearTimeout(this.saveLogTimer),this.saveLogTimer=g(function(){var de;ue.logQueue.length>0&&(Fe=ue.logQueue[ue.logQueue.length-1],ue.doSaveLog(n(de=ue.logQueue).call(de,0)),ue.lastTime=Fe.time,ue.logQueue=[])},3e3-(le.time-this.lastTime))),this.logQueue.push(le),this.preTime=le.time}catch(de){console.error("saveLog Error",de)}},oe.destroy=function(){if(this.logQueue.length>0){var le,ue=this.logQueue[this.logQueue.length-1];this.doSaveLog(n(le=this.logQueue).call(le,0)),this.lastTime=ue.time,this.logQueue=[]}clearTimeout(this.saveLogTimer)},oe.doSaveLog=function(){},oe.initLogLocal=function(){},oe.fetchLog=function(){},oe.deleteLogs=function(){},oe.logError=function(){},z?V?(oe.doSaveLog=function(le){this.logWorker.postMessage(le)},oe.initLogLocal=function(le){var ue=this;this.logWorker=new i({}),this.logWorker.onmessage=function(ie){var ae=ie.data||{};switch(ae.type){case"fetchDone":ue.fetchLogDone(ae.code,ae.msg);break;case"error":ue.logError(ae.msg)}},this.logWorker.postMessage({type:"init",msg:le})},oe.fetchLog=function(){var le=this;return new y(function(ue,ie){le.callbackList.length===0&&le.logWorker.postMessage({type:"fetch"}),le.callbackList.push(ue),le.callbackList.push(ie)})},oe.fetchLogDone=function(le,ue){for(var ie=le===200?0:1,ae=0;ae<this.callbackList.length/2;ae++)this.callbackList[2*ae+ie](ue);this.callbackList=[]},oe.deleteLogs=function(le){return this.logWorker.postMessage({type:"delete",msg:le}),y.resolve()}):(oe.doSaveLog=function(le){var ue=this;this.db.putLog(le).catch(function(ie){ue.logError({msg:"putLog error",error:ie})})},oe.initLogLocal=function(le){var ue=this;this.db=new k(le),this.db.init().catch(function(ie){ue.logError({msg:"dbLog init error",error:ie})})},oe.fetchLog=function(){return this.db.getAllLogs()},oe.deleteLogs=function(le){return this.db.deleteLogs(le)}):re.enable=!1,t.exports=re},function(t,r,e){e.r(r),e.d(r,"default",function(){return y});var n=e(304),g=e.n(n);function y(){return g()(`/*!
 * 
 * VERSION: 9.16.2
 * Git Hash: 1ddefb74af2685d8546990b4a578f520ed738e86
 * 
 * Create At: 2024/5/22 下午2:28:56
 * 
 * Target: NIM_Web_log.worker
 */!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=109)}([function(t,n,r){"use strict";var e=r(1),o=r(41),i=r(78),c=r(2),u=r(43).f,a=r(84),f=r(13),s=r(34),p=r(19),l=r(8),v=function(t){var n=function(r,e,i){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,e)}return new t(r,e,i)}return o(t,this,arguments)};return n.prototype=t.prototype,n};t.exports=function(t,n){var r,o,d,y,h,m,g,x,b,w=t.target,S=t.global,j=t.stat,O=t.proto,P=S?e:j?e[w]:(e[w]||{}).prototype,T=S?f:f[w]||p(f,w,{})[w],A=T.prototype;for(y in n)o=!(r=a(S?y:w+(j?".":"#")+y,t.forced))&&P&&l(P,y),m=T[y],o&&(g=t.dontCallGetSet?(b=u(P,y))&&b.value:P[y]),h=o&&g?g:n[y],o&&typeof m==typeof h||(x=t.bind&&o?s(h,e):t.wrap&&o?v(h):O&&c(h)?i(h):h,(t.sham||h&&h.sham||m&&m.sham)&&p(x,"sham",!0),p(T,y,x),O&&(l(f,d=w+"Prototype")||p(f,d,{}),p(f[d],y,h),t.real&&A&&(r||!A[y])&&p(A,y,h)))}},function(t,n,r){(function(n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,r(77))},function(t,n,r){var e=r(79),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},function(t,n,r){var e=r(13),o=r(8),i=r(75),c=r(16).f;t.exports=function(t){var n=e.Symbol||(e.Symbol={});o(n,t)||c(n,t,{value:i.f(t)})}},function(t,n,r){var e=r(1),o=r(33),i=r(8),c=r(60),u=r(24),a=r(82),f=o("wks"),s=e.Symbol,p=s&&s.for,l=a?s:s&&s.withoutSetter||c;t.exports=function(t){if(!i(f,t)||!u&&"string"!=typeof f[t]){var n="Symbol."+t;u&&i(s,t)?f[t]=s[t]:f[t]=a&&p?p(n):l(n)}return f[t]}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.call,c=e&&o.bind.bind(i,i);t.exports=e?c:function(t){return function(){return i.apply(t,arguments)}}},function(t,n,r){var e=r(42),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,r){var e=r(6),o=r(25),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,r){var e=r(13),o=r(1),i=r(2),c=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?c(e[t])||c(o[t]):e[t]&&e[t][n]||o[t]&&o[t][n]}},function(t,n,r){var e=r(2),o=r(79),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},function(t,n,r){var e=r(5);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,r){var e=r(10),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},function(t,n){t.exports={}},function(t,n,r){var e=r(6);t.exports=e({}.isPrototypeOf)},function(t,n){t.exports=!0},function(t,n,r){var e=r(11),o=r(83),i=r(85),c=r(12),u=r(45),a=TypeError,f=Object.defineProperty,s=Object.getOwnPropertyDescriptor;n.f=e?i?function(t,n,r){if(c(t),n=u(n),c(r),"function"==typeof t&&"prototype"===n&&"value"in r&&"writable"in r&&!r.writable){var e=s(t,n);e&&e.writable&&(t[n]=r.value,r={configurable:"configurable"in r?r.configurable:e.configurable,enumerable:"enumerable"in r?r.enumerable:e.enumerable,writable:!1})}return f(t,n,r)}:f:function(t,n,r){if(c(t),n=u(n),c(r),o)try{return f(t,n,r)}catch(t){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},function(t,n,r){var e=r(81),o=r(57);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(11),o=r(16),i=r(20);t.exports=e?function(t,n,r){return o.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(19);t.exports=function(t,n,r,o){return o&&o.enumerable?t[n]=r:e(t,n,r),t}},function(t,n,r){"use strict";var e=r(17),o=TypeError,i=function(t){var n,r;this.promise=new t((function(t,e){if(void 0!==n||void 0!==r)throw o("Bad Promise constructor");n=t,r=e})),this.resolve=e(n),this.reject=e(r)};t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(6),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,r){var e=r(47),o=r(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},function(t,n,r){var e=r(57),o=Object;t.exports=function(t){return o(e(t))}},function(t,n,r){var e=r(124);t.exports=function(t){return e(t.length)}},function(t,n){t.exports={}},function(t,n,r){var e=r(70),o=r(2),i=r(23),c=r(4)("toStringTag"),u=Object,a="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=u(t),c))?r:a?i(n):"Object"==(e=i(n))&&o(n.callee)?"Arguments":e}},function(t,n,r){var e=r(70),o=r(16).f,i=r(19),c=r(8),u=r(136),a=r(4)("toStringTag");t.exports=function(t,n,r,f){if(t){var s=r?t:t.prototype;c(s,a)||o(s,a,{configurable:!0,value:n}),f&&!e&&i(s,"toString",u)}}},function(t,n,r){var e=r(1);t.exports=e.Promise},function(t,n,r){var e=r(9);t.exports=e("navigator","userAgent")||""},function(t,n){var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,r){var e=r(15),o=r(59);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.27.1",mode:e?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,r){var e=r(78),o=r(17),i=r(42),c=e(e.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?c(t,n):function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(34),o=r(7),i=r(12),c=r(32),u=r(127),a=r(26),f=r(14),s=r(128),p=r(89),l=r(129),v=TypeError,d=function(t,n){this.stopped=t,this.result=n},y=d.prototype;t.exports=function(t,n,r){var h,m,g,x,b,w,S,j=r&&r.that,O=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=e(n,j),k=function(t){return h&&l(h,"normal",t),new d(!0,t)},I=function(t){return O?(i(t),A?E(t[0],t[1],k):E(t[0],t[1])):A?E(t,k):E(t)};if(P)h=t.iterator;else if(T)h=t;else{if(!(m=p(t)))throw v(c(t)+" is not iterable");if(u(m)){for(g=0,x=a(t);x>g;g++)if((b=I(t[g]))&&f(y,b))return b;return new d(!1)}h=s(t,m)}for(w=P?t.next:h.next;!(S=o(w,h)).done;){try{b=I(S.value)}catch(t){l(h,"throw",t)}if("object"==typeof b&&b&&f(y,b))return b}return new d(!1)}},function(t,n,r){var e=r(28),o=String;t.exports=function(t){if("Symbol"===e(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,r){var e=r(1),o=r(30),i=r(2),c=r(84),u=r(94),a=r(4),f=r(147),s=r(98),p=r(15),l=r(47),v=o&&o.prototype,d=a("species"),y=!1,h=i(e.PromiseRejectionEvent),m=c("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(p&&(!v.catch||!v.finally))return!0;if(!l||l<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),e=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=e,!(y=r.then((function(){}))instanceof e))return!0}return!n&&(f||s)&&!h}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:h,SUBCLASSING:y}},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13);t.exports=function(t){return e[t+"Prototype"]}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?c.bind(i):function(){return c.apply(i,arguments)})},function(t,n,r){var e=r(5);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n,r){var e=r(11),o=r(7),i=r(80),c=r(20),u=r(18),a=r(45),f=r(8),s=r(83),p=Object.getOwnPropertyDescriptor;n.f=e?p:function(t,n){if(t=u(t),n=a(n),s)try{return p(t,n)}catch(t){}if(f(t,n))return c(!o(i.f,t,n),t[n])}},function(t,n){t.exports=function(t){return null==t}},function(t,n,r){var e=r(115),o=r(46);t.exports=function(t){var n=e(t,"string");return o(n)?n:n+""}},function(t,n,r){var e=r(9),o=r(2),i=r(14),c=r(82),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var n=e("Symbol");return o(n)&&i(n.prototype,u(t))}},function(t,n,r){var e,o,i=r(1),c=r(31),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,s=f&&f.v8;s&&(o=(e=s.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&c&&(!(e=c.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=c.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},function(t,n,r){var e=r(33),o=r(60),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n,r){var e,o=r(12),i=r(87),c=r(67),u=r(49),a=r(88),f=r(61),s=r(48),p=s("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\\/script>"},d=function(t){t.write(v("")),t.close();var n=t.parentWindow.Object;return t=null,n},y=function(){try{e=new ActiveXObject("htmlfile")}catch(t){}var t,n;y="undefined"!=typeof document?document.domain&&e?d(e):((n=f("iframe")).style.display="none",a.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):d(e);for(var r=c.length;r--;)delete y.prototype[c[r]];return y()};u[p]=!0,t.exports=Object.create||function(t,n){var r;return null!==t?(l.prototype=o(t),r=new l,l.prototype=null,r[p]=t):r=y(),void 0===n?r:i.f(r,n)}},function(t,n,r){var e,o,i,c=r(133),u=r(1),a=r(10),f=r(19),s=r(8),p=r(59),l=r(48),v=r(49),d=u.TypeError,y=u.WeakMap;if(c||p.state){var h=p.state||(p.state=new y);h.get=h.get,h.has=h.has,h.set=h.set,e=function(t,n){if(h.has(t))throw d("Object already initialized");return n.facade=t,h.set(t,n),n},o=function(t){return h.get(t)||{}},i=function(t){return h.has(t)}}else{var m=l("state");v[m]=!0,e=function(t,n){if(s(t,m))throw d("Object already initialized");return n.facade=t,f(t,m,n),n},o=function(t){return s(t,m)?t[m]:{}},i=function(t){return s(t,m)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=o(n)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}}}},function(t,n,r){var e=r(23),o=r(1);t.exports="process"==e(o.process)},function(t,n,r){var e=r(6);t.exports=e([].slice)},function(t,n,r){r(71);var e=r(158),o=r(1),i=r(28),c=r(19),u=r(27),a=r(4)("toStringTag");for(var f in e){var s=o[f],p=s&&s.prototype;p&&i(p)!==a&&c(p,a,f),u[f]=u.Array}},function(t,n,r){var e=r(5),o=r(4),i=r(47),c=o("species");t.exports=function(t){return i>=51||!e((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,r){var e=r(34),o=r(6),i=r(81),c=r(25),u=r(26),a=r(103),f=o([].push),s=function(t){var n=1==t,r=2==t,o=3==t,s=4==t,p=6==t,l=7==t,v=5==t||p;return function(d,y,h,m){for(var g,x,b=c(d),w=i(b),S=e(y,h),j=u(w),O=0,P=m||a,T=n?P(d,j):r||l?P(d,0):void 0;j>O;O++)if((v||O in w)&&(x=S(g=w[O],O,b),t))if(n)T[O]=x;else if(x)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:f(T,g)}else switch(t){case 4:return!1;case 7:f(T,g)}return p?-1:o||s?s:T}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},function(t,n,r){var e=r(44),o=TypeError;t.exports=function(t){if(e(t))throw o("Can't call method on "+t);return t}},function(t,n,r){var e=r(17),o=r(44);t.exports=function(t,n){var r=t[n];return o(r)?void 0:e(r)}},function(t,n,r){var e=r(1),o=r(117),i=e["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,r){var e=r(6),o=0,i=Math.random(),c=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+i,36)}},function(t,n,r){var e=r(1),o=r(10),i=e.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},function(t,n,r){var e=r(8),o=r(2),i=r(25),c=r(48),u=r(118),a=c("IE_PROTO"),f=Object,s=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=i(t);if(e(n,a))return n[a];var r=n.constructor;return o(r)&&n instanceof r?r.prototype:n instanceof f?s:null}},function(t,n,r){var e=r(6),o=r(12),i=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,r={};try{(t=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),n=r instanceof Array}catch(t){}return function(r,e){return o(r),i(e),n?t(r,e):r.__proto__=e,r}}():void 0)},function(t,n,r){var e=r(86),o=r(67).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(66),o=Math.max,i=Math.min;t.exports=function(t,n){var r=e(t);return r<0?o(r+n,0):i(r,n)}},function(t,n,r){var e=r(123);t.exports=function(t){var n=+t;return n!=n||0===n?0:e(n)}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(86),o=r(67);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n,r){var e={};e[r(4)("toStringTag")]="z",t.exports="[object z]"===String(e)},function(t,n,r){"use strict";var e=r(18),o=r(132),i=r(27),c=r(51),u=r(16).f,a=r(90),f=r(92),s=r(15),p=r(11),l=c.set,v=c.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:e(t),index:0,kind:n})}),(function(){var t=v(this),n=t.target,r=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,f(void 0,!0)):f("keys"==r?e:"values"==r?n[e]:[e,n[e]],!1)}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&p&&"values"!==d.name)try{u(d,"name",{value:"values"})}catch(t){}},function(t,n){},function(t,n,r){var e=r(6),o=r(5),i=r(2),c=r(28),u=r(9),a=r(94),f=function(){},s=[],p=u("Reflect","construct"),l=/^\\s*(?:class|function)\\b/,v=e(l.exec),d=!l.exec(f),y=function(t){if(!i(t))return!1;try{return p(f,s,t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!p||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},function(t,n,r){"use strict";var e=r(45),o=r(16),i=r(20);t.exports=function(t,n,r){var c=e(n);c in t?o.f(t,c,i(0,r)):t[c]=r}},function(t,n,r){var e=r(4);n.f=e},function(t,n,r){t.exports=r(111)},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(23),o=r(6);t.exports=function(t){if("Function"===e(t))return o(t)}},function(t,n){var r="object"==typeof document&&document.all,e=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:e}},function(t,n,r){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!e.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},function(t,n,r){var e=r(6),o=r(5),i=r(23),c=Object,u=e("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):c(t)}:c},function(t,n,r){var e=r(24);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,r){var e=r(11),o=r(5),i=r(61);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,r){var e=r(5),o=r(2),i=/#|\\.prototype\\./,c=function(t,n){var r=a[u(t)];return r==s||r!=f&&(o(n)?e(n):!!n)},u=c.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=c.data={},f=c.NATIVE="N",s=c.POLYFILL="P";t.exports=c},function(t,n,r){var e=r(11),o=r(5);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,r){var e=r(6),o=r(8),i=r(18),c=r(122).indexOf,u=r(49),a=e([].push);t.exports=function(t,n){var r,e=i(t),f=0,s=[];for(r in e)!o(u,r)&&o(e,r)&&a(s,r);for(;n.length>f;)o(e,r=n[f++])&&(~c(s,r)||a(s,r));return s}},function(t,n,r){var e=r(11),o=r(85),i=r(16),c=r(12),u=r(18),a=r(69);n.f=e&&!o?Object.defineProperties:function(t,n){c(t);for(var r,e=u(n),o=a(n),f=o.length,s=0;f>s;)i.f(t,r=o[s++],e[r]);return t}},function(t,n,r){var e=r(9);t.exports=e("document","documentElement")},function(t,n,r){var e=r(28),o=r(58),i=r(44),c=r(27),u=r(4)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||c[e(t)]}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(15),c=r(134),u=r(2),a=r(135),f=r(62),s=r(63),p=r(29),l=r(19),v=r(21),d=r(4),y=r(27),h=r(91),m=c.PROPER,g=c.CONFIGURABLE,x=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,w=d("iterator"),S=function(){return this};t.exports=function(t,n,r,c,d,h,j){a(r,n,c);var O,P,T,A=function(t){if(t===d&&L)return L;if(!b&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},E=n+" Iterator",k=!1,I=t.prototype,D=I[w]||I["@@iterator"]||d&&I[d],L=!b&&D||A(d),_="Array"==n&&I.entries||D;if(_&&(O=f(_.call(new t)))!==Object.prototype&&O.next&&(i||f(O)===x||(s?s(O,x):u(O[w])||v(O,w,S)),p(O,E,!0,!0),i&&(y[E]=S)),m&&"values"==d&&D&&"values"!==D.name&&(!i&&g?l(I,"name","values"):(k=!0,L=function(){return o(D,this)})),d)if(P={values:A("values"),keys:h?L:A("keys"),entries:A("entries")},j)for(T in P)(b||k||!(T in I))&&v(I,T,P[T]);else e({target:n,proto:!0,forced:b||k},P);return i&&!j||I[w]===L||v(I,w,L,{name:d}),y[n]=L,P}},function(t,n,r){"use strict";var e,o,i,c=r(5),u=r(2),a=r(10),f=r(50),s=r(62),p=r(21),l=r(4),v=r(15),d=l("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(e=o):y=!0),!a(e)||c((function(){var t={};return e[d].call(t)!==t}))?e={}:v&&(e=f(e)),u(e[d])||p(e,d,(function(){return this})),t.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:y}},function(t,n){t.exports=function(t,n){return{value:t,done:n}}},function(t,n,r){var e=r(12),o=r(141),i=r(44),c=r(4)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||i(r=e(u)[c])?n:o(r)}},function(t,n,r){var e=r(6),o=r(2),i=r(59),c=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return c(t)}),t.exports=i.inspectSource},function(t,n,r){var e,o,i,c,u=r(1),a=r(41),f=r(34),s=r(2),p=r(8),l=r(5),v=r(88),d=r(53),y=r(61),h=r(96),m=r(97),g=r(52),x=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.Dispatch,j=u.Function,O=u.MessageChannel,P=u.String,T=0,A={};try{e=u.location}catch(t){}var E=function(t){if(p(A,t)){var n=A[t];delete A[t],n()}},k=function(t){return function(){E(t)}},I=function(t){E(t.data)},D=function(t){u.postMessage(P(t),e.protocol+"//"+e.host)};x&&b||(x=function(t){h(arguments.length,1);var n=s(t)?t:j(t),r=d(arguments,1);return A[++T]=function(){a(n,void 0,r)},o(T),T},b=function(t){delete A[t]},g?o=function(t){w.nextTick(k(t))}:S&&S.now?o=function(t){S.now(k(t))}:O&&!m?(c=(i=new O).port2,i.port1.onmessage=I,o=f(c.postMessage,c)):u.addEventListener&&s(u.postMessage)&&!u.importScripts&&e&&"file:"!==e.protocol&&!l(D)?(o=D,u.addEventListener("message",I,!1)):o="onreadystatechange"in y("script")?function(t){v.appendChild(y("script")).onreadystatechange=function(){v.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:x,clear:b}},function(t,n){var r=TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,r){var e=r(31);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)},function(t,n){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,n,r){var e=r(30),o=r(149),i=r(38).CONSTRUCTOR;t.exports=i||!o((function(t){e.all(t).then(void 0,(function(){}))}))},function(t,n,r){var e=r(12),o=r(10),i=r(22);t.exports=function(t,n){if(e(t),o(n)&&n.constructor===t)return n;var r=i.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(157).charAt,o=r(36),i=r(51),c=r(90),u=r(92),a=i.set,f=i.getterFor("String Iterator");c(String,"String",(function(t){a(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=f(this),r=n.string,o=n.index;return o>=r.length?u(void 0,!0):(t=e(r,o),n.index+=t.length,u(t,!1))}))},function(t,n,r){t.exports=r(159)},function(t,n,r){var e=r(168);t.exports=function(t,n){return new(e(t))(0===n?0:n)}},function(t,n,r){"use strict";var e=r(0),o=r(5),i=r(39),c=r(10),u=r(25),a=r(26),f=r(177),s=r(74),p=r(103),l=r(55),v=r(4),d=r(47),y=v("isConcatSpreadable"),h=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!c(t))return!1;var n=t[y];return void 0!==n?!!n:i(t)};e({target:"Array",proto:!0,arity:1,forced:!h||!m},{concat:function(t){var n,r,e,o,i,c=u(this),l=p(c,0),v=0;for(n=-1,e=arguments.length;n<e;n++)if(g(i=-1===n?c:arguments[n]))for(o=a(i),f(v+o),r=0;r<o;r++,v++)r in i&&s(l,v,i[r]);else f(v+1),s(l,v++,i);return l.length=v,l}})},function(t,n,r){var e=r(7),o=r(9),i=r(4),c=r(21);t.exports=function(){var t=o("Symbol"),n=t&&t.prototype,r=n&&n.valueOf,u=i("toPrimitive");n&&!n[u]&&c(n,u,(function(t){return e(r,this)}),{arity:1})}},function(t,n,r){var e=r(24);t.exports=e&&!!Symbol.for&&!!Symbol.keyFor},function(t,n,r){r(3)("iterator")},function(t,n,r){"use strict";var e,o=r(1),i=r(41),c=r(2),u=r(220),a=r(31),f=r(53),s=r(96),p=o.Function,l=/MSIE .\\./.test(a)||u&&((e=o.Bun.version.split(".")).length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2]));t.exports=function(t,n){var r=n?2:1;return l?function(e,o){var u=s(arguments.length,1)>r,a=c(e)?e:p(e),l=u?f(arguments,r):[],v=u?function(){i(a,this,l)}:a;return n?t(v,o):t(v)}:t}},function(t,n,r){var e=r(110),o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":r=t.data.msg,(o=new e(r)).init().catch((function(t){postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})}));break;case"fetch":o.getAllLogs().then((function(t){postMessage({type:"fetchDone",code:200,msg:t})})).catch((function(t){postMessage({type:"fetchDone",code:500,msg:i(t)})}));break;case"delete":o.deleteLogs(n).catch((function(t){postMessage({type:"deleteLogs",code:500,msg:i(t)})}));break;default:!function(t){if(!o)return;o.putLog(t).then((function(){postMessage(200)})).catch((function(t){postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})}))}(t.data)}var n,r}},function(t,n,r){var e=r(76),o=r(102),i=r(163),c=r(169);function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var a=u.prototype;a.init=function(){var t=this;if(!this.server)return c.open({server:"nim-logs-"+this.name,version:1,schema:{log:{key:{keyPath:"id",autoIncrement:!0},indexes:{time:{}}}}}).then((function(n){t.server=n}))},a.putLog=function(t){var n=this;if(!this.server)return e.reject("no db server");var r=o(t).call(t,-1)[0].time-36e5*this.expire;return this.deleteLogs(r).then((function(){return n.server.add("log",t)}))},a.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(t){var n={},r=o(t).call(t,-1)[0];return n.logs=i(t).call(t,(function(t){return t.tabId+" "+t.log})).join("\\r\\n"),n.time=r&&r.time,n})):e.reject("no db server")},a.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):e.reject("no db server")},t.exports=u},function(t,n,r){var e=r(112);r(54),t.exports=e},function(t,n,r){r(113),r(71),r(72),r(137),r(154),r(155),r(156),r(101);var e=r(13);t.exports=e.Promise},function(t,n,r){r(114)},function(t,n,r){"use strict";var e=r(0),o=r(14),i=r(62),c=r(63),u=r(120),a=r(50),f=r(19),s=r(20),p=r(125),l=r(126),v=r(35),d=r(130),y=r(4),h=r(131),m=y("toStringTag"),g=Error,x=[].push,b=function(t,n){var r,e=arguments.length>2?arguments[2]:void 0,u=o(w,this);c?r=c(g(),u?i(this):w):(r=u?this:a(w),f(r,m,"Error")),void 0!==n&&f(r,"message",d(n)),h&&f(r,"stack",p(r.stack,1)),l(r,e);var s=[];return v(t,x,{that:s}),f(r,"errors",s),r};c?c(b,g):u(b,g,{name:!0});var w=b.prototype=a(g.prototype,{constructor:s(1,b),message:s(1,""),name:s(1,"AggregateError")});e({global:!0,constructor:!0,arity:2},{AggregateError:b})},function(t,n,r){var e=r(7),o=r(10),i=r(46),c=r(58),u=r(116),a=r(4),f=TypeError,s=a("toPrimitive");t.exports=function(t,n){if(!o(t)||i(t))return t;var r,a=c(t,s);if(a){if(void 0===n&&(n="default"),r=e(a,t,n),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},function(t,n,r){var e=r(7),o=r(2),i=r(10),c=TypeError;t.exports=function(t,n){var r,u;if("string"===n&&o(r=t.toString)&&!i(u=e(r,t)))return u;if(o(r=t.valueOf)&&!i(u=e(r,t)))return u;if("string"!==n&&o(r=t.toString)&&!i(u=e(r,t)))return u;throw c("Can't convert object to primitive value")}},function(t,n,r){var e=r(1),o=Object.defineProperty;t.exports=function(t,n){try{o(e,t,{value:n,configurable:!0,writable:!0})}catch(r){e[t]=n}return n}},function(t,n,r){var e=r(5);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,r){var e=r(2),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},function(t,n,r){var e=r(8),o=r(121),i=r(43),c=r(16);t.exports=function(t,n,r){for(var u=o(n),a=c.f,f=i.f,s=0;s<u.length;s++){var p=u[s];e(t,p)||r&&e(r,p)||a(t,p,f(n,p))}}},function(t,n,r){var e=r(9),o=r(6),i=r(64),c=r(68),u=r(12),a=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var n=i.f(u(t)),r=c.f;return r?a(n,r(t)):n}},function(t,n,r){var e=r(18),o=r(65),i=r(26),c=function(t){return function(n,r,c){var u,a=e(n),f=i(a),s=o(c,f);if(t&&r!=r){for(;f>s;)if((u=a[s++])!=u)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?e:r)(n)}},function(t,n,r){var e=r(66),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(6),o=Error,i=e("".replace),c=String(o("zxcasd").stack),u=/\\n\\s*at [^:]*:[^\\n]*/,a=u.test(c);t.exports=function(t,n){if(a&&"string"==typeof t&&!o.prepareStackTrace)for(;n--;)t=i(t,u,"");return t}},function(t,n,r){var e=r(10),o=r(19);t.exports=function(t,n){e(n)&&"cause"in n&&o(t,"cause",n.cause)}},function(t,n,r){var e=r(4),o=r(27),i=e("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},function(t,n,r){var e=r(7),o=r(17),i=r(12),c=r(32),u=r(89),a=TypeError;t.exports=function(t,n){var r=arguments.length<2?u(t):n;if(o(r))return i(e(r,t));throw a(c(t)+" is not iterable")}},function(t,n,r){var e=r(7),o=r(12),i=r(58);t.exports=function(t,n,r){var c,u;o(t);try{if(!(c=i(t,"return"))){if("throw"===n)throw r;return r}c=e(c,t)}catch(t){u=!0,c=t}if("throw"===n)throw r;if(u)throw c;return o(c),r}},function(t,n,r){var e=r(36);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)}},function(t,n,r){var e=r(5),o=r(20);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(1),o=r(2),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,n,r){var e=r(11),o=r(8),i=Function.prototype,c=e&&Object.getOwnPropertyDescriptor,u=o(i,"name"),a=u&&"something"===function(){}.name,f=u&&(!e||e&&c(i,"name").configurable);t.exports={EXISTS:u,PROPER:a,CONFIGURABLE:f}},function(t,n,r){"use strict";var e=r(91).IteratorPrototype,o=r(50),i=r(20),c=r(29),u=r(27),a=function(){return this};t.exports=function(t,n,r,f){var s=n+" Iterator";return t.prototype=o(e,{next:i(+!f,r)}),c(t,s,!1,!0),u[s]=a,t}},function(t,n,r){"use strict";var e=r(70),o=r(28);t.exports=e?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,r){r(138),r(148),r(150),r(151),r(152),r(153)},function(t,n,r){"use strict";var e,o,i,c=r(0),u=r(15),a=r(52),f=r(1),s=r(7),p=r(21),l=r(63),v=r(29),d=r(139),y=r(17),h=r(2),m=r(10),g=r(140),x=r(93),b=r(95).set,w=r(142),S=r(145),j=r(37),O=r(146),P=r(51),T=r(30),A=r(38),E=r(22),k=A.CONSTRUCTOR,I=A.REJECTION_EVENT,D=A.SUBCLASSING,L=P.getterFor("Promise"),_=P.set,C=T&&T.prototype,M=T,R=C,N=f.TypeError,F=f.document,B=f.process,G=E.f,U=G,z=!!(F&&F.createEvent&&f.dispatchEvent),V=function(t){var n;return!(!m(t)||!h(n=t.then))&&n},q=function(t,n){var r,e,o,i=n.value,c=1==n.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,p=t.domain;try{u?(c||(2===n.rejection&&Y(n),n.rejection=1),!0===u?r=i:(p&&p.enter(),r=u(i),p&&(p.exit(),o=!0)),r===t.promise?f(N("Promise-chain cycle")):(e=V(r))?s(e,r,a,f):a(r)):f(i)}catch(t){p&&!o&&p.exit(),f(t)}},H=function(t,n){t.notified||(t.notified=!0,w((function(){for(var r,e=t.reactions;r=e.get();)q(r,t);t.notified=!1,n&&!t.rejection&&K(t)})))},J=function(t,n,r){var e,o;z?((e=F.createEvent("Event")).promise=n,e.reason=r,e.initEvent(t,!1,!0),f.dispatchEvent(e)):e={promise:n,reason:r},!I&&(o=f["on"+t])?o(e):"unhandledrejection"===t&&S("Unhandled promise rejection",r)},K=function(t){s(b,f,(function(){var n,r=t.facade,e=t.value;if(W(t)&&(n=j((function(){a?B.emit("unhandledRejection",e,r):J("unhandledrejection",r,e)})),t.rejection=a||W(t)?2:1,n.error))throw n.value}))},W=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){s(b,f,(function(){var n=t.facade;a?B.emit("rejectionHandled",n):J("rejectionhandled",n,t.value)}))},X=function(t,n,r){return function(e){t(n,e,r)}},$=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,H(t,!0))},Q=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw N("Promise can't be resolved itself");var e=V(n);e?w((function(){var r={done:!1};try{s(e,n,X(Q,r,t),X($,r,t))}catch(n){$(r,n,t)}})):(t.value=n,t.state=1,H(t,!1))}catch(n){$({done:!1},n,t)}}};if(k&&(R=(M=function(t){g(this,R),y(t),s(e,this);var n=L(this);try{t(X(Q,n),X($,n))}catch(t){$(n,t)}}).prototype,(e=function(t){_(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(R,"then",(function(t,n){var r=L(this),e=G(x(this,M));return r.parent=!0,e.ok=!h(t)||t,e.fail=h(n)&&n,e.domain=a?B.domain:void 0,0==r.state?r.reactions.add(e):w((function(){q(e,r)})),e.promise})),o=function(){var t=new e,n=L(t);this.promise=t,this.resolve=X(Q,n),this.reject=X($,n)},E.f=G=function(t){return t===M||void 0===t?new o(t):U(t)},!u&&h(T)&&C!==Object.prototype)){i=C.then,D||p(C,"then",(function(t,n){var r=this;return new M((function(t,n){s(i,r,t,n)})).then(t,n)}),{unsafe:!0});try{delete C.constructor}catch(t){}l&&l(C,R)}c({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:M}),v(M,"Promise",!1,!0),d("Promise")},function(t,n,r){"use strict";var e=r(9),o=r(16),i=r(4),c=r(11),u=i("species");t.exports=function(t){var n=e(t),r=o.f;c&&n&&!n[u]&&r(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(14),o=TypeError;t.exports=function(t,n){if(e(n,t))return t;throw o("Incorrect invocation")}},function(t,n,r){var e=r(73),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a constructor")}},function(t,n,r){var e,o,i,c,u,a,f,s,p=r(1),l=r(34),v=r(43).f,d=r(95).set,y=r(97),h=r(143),m=r(144),g=r(52),x=p.MutationObserver||p.WebKitMutationObserver,b=p.document,w=p.process,S=p.Promise,j=v(p,"queueMicrotask"),O=j&&j.value;O||(e=function(){var t,n;for(g&&(t=w.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?c():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!x||!b?!h&&S&&S.resolve?((f=S.resolve(void 0)).constructor=S,s=l(f.then,f),c=function(){s(e)}):g?c=function(){w.nextTick(e)}:(d=l(d,p),c=function(){d(e)}):(u=!0,a=b.createTextNode(""),new x(e).observe(a,{characterData:!0}),c=function(){a.data=u=!u})),t.exports=O||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,c()),i=n}},function(t,n,r){var e=r(31),o=r(1);t.exports=/ipad|iphone|ipod/i.test(e)&&void 0!==o.Pebble},function(t,n,r){var e=r(31);t.exports=/web0s(?!.*chrome)/i.test(e)},function(t,n,r){var e=r(1);t.exports=function(t,n){var r=e.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))}},function(t,n){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,n,r){var e=r(98),o=r(52);t.exports=!e&&!o&&"object"==typeof window&&"object"==typeof document},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{all:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,s=1;a(t,(function(t){var i=u++,a=!1;s++,o(r,n,t).then((function(t){a||(a=!0,c[i]=t,--s||e(c))}),f)})),--s||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){var e=r(4)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[e]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i={};i[e]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(38).CONSTRUCTOR,c=r(30),u=r(9),a=r(2),f=r(21),s=c&&c.prototype;if(e({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(c)){var p=u("Promise").prototype.catch;s.catch!==p&&f(s,"catch",p,{unsafe:!0})}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{race:function(t){var n=this,r=c.f(n),e=r.reject,f=u((function(){var c=i(n.resolve);a(t,(function(t){o(c,n,t).then(r.resolve,e)}))}));return f.error&&e(f.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(22);e({target:"Promise",stat:!0,forced:r(38).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(9),i=r(15),c=r(30),u=r(38).CONSTRUCTOR,a=r(100),f=o("Promise"),s=i&&!u;e({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return a(s&&this===f?c:this,t)}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0},{allSettled:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,f=1;a(t,(function(t){var i=u++,a=!1;f++,o(r,n,t).then((function(t){a||(a=!0,c[i]={status:"fulfilled",value:t},--f||e(c))}),(function(t){a||(a=!0,c[i]={status:"rejected",reason:t},--f||e(c))}))})),--f||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(9),u=r(22),a=r(37),f=r(35);e({target:"Promise",stat:!0},{any:function(t){var n=this,r=c("AggregateError"),e=u.f(n),s=e.resolve,p=e.reject,l=a((function(){var e=i(n.resolve),c=[],u=0,a=1,l=!1;f(t,(function(t){var i=u++,f=!1;a++,o(e,n,t).then((function(t){f||l||(l=!0,s(t))}),(function(t){f||l||(f=!0,c[i]=t,--a||p(new r(c,"No one promise resolved")))}))})),--a||p(new r(c,"No one promise resolved"))}));return l.error&&p(l.value),e.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(30),c=r(5),u=r(9),a=r(2),f=r(93),s=r(100),p=r(21),l=i&&i.prototype;if(e({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=f(this,u("Promise")),r=a(t);return this.then(r?function(r){return s(n,t()).then((function(){return r}))}:t,r?function(r){return s(n,t()).then((function(){throw r}))}:t)}}),!o&&a(i)){var v=u("Promise").prototype.finally;l.finally!==v&&p(l,"finally",v,{unsafe:!0})}},function(t,n,r){var e=r(6),o=r(66),i=r(36),c=r(57),u=e("".charAt),a=e("".charCodeAt),f=e("".slice),s=function(t){return function(n,r){var e,s,p=i(c(n)),l=o(r),v=p.length;return l<0||l>=v?t?"":void 0:(e=a(p,l))<55296||e>56319||l+1===v||(s=a(p,l+1))<56320||s>57343?t?u(p,l):e:t?f(p,l,l+2):s-56320+(e-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,r){var e=r(160);t.exports=e},function(t,n,r){var e=r(14),o=r(161),i=Array.prototype;t.exports=function(t){var n=t.slice;return t===i||e(i,t)&&n===i.slice?o:n}},function(t,n,r){r(162);var e=r(40);t.exports=e("Array").slice},function(t,n,r){"use strict";var e=r(0),o=r(39),i=r(73),c=r(10),u=r(65),a=r(26),f=r(18),s=r(74),p=r(4),l=r(55),v=r(53),d=l("slice"),y=p("species"),h=Array,m=Math.max;e({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var r,e,p,l=f(this),d=a(l),g=u(t,d),x=u(void 0===n?d:n,d);if(o(l)&&(r=l.constructor,(i(r)&&(r===h||o(r.prototype))||c(r)&&null===(r=r[y]))&&(r=void 0),r===h||void 0===r))return v(l,g,x);for(e=new(void 0===r?h:r)(m(x-g,0)),p=0;g<x;g++,p++)g in l&&s(e,p,l[g]);return e.length=p,e}})},function(t,n,r){t.exports=r(164)},function(t,n,r){var e=r(165);t.exports=e},function(t,n,r){var e=r(14),o=r(166),i=Array.prototype;t.exports=function(t){var n=t.map;return t===i||e(i,t)&&n===i.map?o:n}},function(t,n,r){r(167);var e=r(40);t.exports=e("Array").map},function(t,n,r){"use strict";var e=r(0),o=r(56).map;e({target:"Array",proto:!0,forced:!r(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(39),o=r(73),i=r(10),c=r(4)("species"),u=Array;t.exports=function(t){var n;return e(t)&&(n=t.constructor,(o(n)&&(n===u||e(n.prototype))||i(n)&&null===(n=n[c]))&&(n=void 0)),void 0===n?u:n}},function(t,n,r){(function(e){var o,i=r(170),c=r(76),u=r(216),a=r(102),f=r(222),s=r(226),p=r(233),l=r(237),v=r(241),d=r(245);!function(y,h){"use strict";var m,g=(y=void 0!==y?y:"undefined"!=typeof self?self:void 0!==e?e:{}).IDBKeyRange||y.webkitIDBKeyRange,x="readonly",b="readwrite",w=Object.prototype.hasOwnProperty,S=function(){if(!m&&!(m=y.indexedDB||y.webkitIndexedDB||y.mozIndexedDB||y.oIndexedDB||y.msIndexedDB||(null===y.indexedDB&&y.shimIndexedDB?y.shimIndexedDB:void 0)))throw"IndexedDB required";return m},j=!1,O=navigator&&!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent),P=function(t){return t},T=function(t){var n;return a(n=Object.prototype.toString.call(t)).call(n,8,-1).toLowerCase()},A=function(t){return"function"==typeof t},E=function(t){return"number"===T(t)},k=function(t){return"array"===T(t)},I=function(t){return void 0===t},D=function(t,n){var r=this,e=!1;this.name=n,this.getIndexedDB=function(){return t},this.add=function(n){if(e)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(f(arguments[u+1]))for(var a=0;a<arguments[u+1].length;a++)o[i]=arguments[u+1][a],i++;else o[i]=arguments[u+1],i++;var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){s(o).call(o,(function(t){var r;if(t.item&&t.key){var e=t.key;t=t.item,r=v.add(t,e)}else r=v.add(t);r.onsuccess=function(r){try{var e=r.target,o=e.source.keyPath;null===o&&(o="__id__"),p(t,o,{value:e.result,enumerable:!0})}catch(t){n(t)}}})),l.oncomplete=function(){t(o,r)},l.onerror=function(t){t.preventDefault(),n(t)},l.onabort=function(t){n(t)}}))},this.updateAndDelete=function(n,r,o){if(e)throw"Database has been closed";var i=t.transaction(n,b),u=i.objectStore(n),a=u.keyPath;return new c((function(t,n){s(r).call(r,(function(t){if(t.item&&t.key){var n=t.key;t=t.item,u.put(t,n)}else u.put(t)})),s(o).call(o,(function(t){u.delete(t[a])})),i.oncomplete=function(){t([r,o])},i.onerror=function(t){n(t)}}))},this.update=function(n){if(e)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)f(o=arguments[u])?i=l(i).call(i,o):i.push(o);var a=t.transaction(n,b),p=a.objectStore(n);p.keyPath;return new c((function(t,n){s(i).call(i,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=p.put(t,r)}else n=p.put(t);n.onsuccess=function(t){},n.onerror=function(t){}})),a.oncomplete=function(){t(i,r)},a.onerror=function(t){n(t)},a.onabort=function(t){n(t)}}))},this.remove=function(n,r,o,i,u,a,p){if(e)throw"Database has been closed";var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){function e(t){return null==t}var c;(e(i)&&(i=-1/0),e(u)&&(u=1/0),null===r||f(r)||(r=[r]),e(o))?null!==r?s(r).call(r,(function(t){v.delete(t)})):v.delete(range=g.bound(i,u,a,p)):(c=null!==r?g.only(r[0]):g.bound(i,u,a,p),v.index(o).openCursor(c).onsuccess=function(t){try{var r=t.target.result;if(!r)return;r.delete(),r.continue()}catch(t){n(t)}});l.oncomplete=function(){t()},l.onerror=function(t){n(t)},l.onabort=function(t){n(t)}}))},this.clear=function(n){if(e)throw"Database has been closed";var r=t.transaction(n,b);r.objectStore(n).clear();return new c((function(t,n){r.oncomplete=function(){t()},r.onerror=function(t){n(t)}}))},this.close=function(){e||(t.close(),e=!0,delete C[n])},this.get=function(n,r){if(e)throw"Database has been closed";var o=t.transaction(n),i=o.objectStore(n).get(r);return new c((function(t,n){i.onsuccess=function(n){t(n.target.result)},o.onerror=function(t){n(t)}}))},this.query=function(n,r){if(e)throw"Database has been closed";return new L(n,t,r)},this.count=function(n,r){if(e)throw"Database has been closed";t.transaction(n).objectStore(n)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var n in r[t]={},r)w.call(r,n)&&"close"!==n&&(r[t][n]=function(n){return function(){var e,o=l(e=[t]).call(e,a([]).call(arguments,0));return r[n].apply(r,o)}}(n))}(t.objectStoreNames[o])},L=function(t,n,r){var e,o=this,u=!1,f=!1,p=function(e,o,a,p,l,d,y){return new c((function(c,h){var m=u||f?b:x,w=n.transaction(t,m),S=w.objectStore(t),j=r?S.index(r):S,O=e?g[e].apply(null,o):null,P=[],T=[O],E=0;l=l||null,d=d||[],"count"!==a&&T.push(p||"next");var k=!!u&&v(u);j[a].apply(j,T).onsuccess=function(t){try{var n=t.target.result;if(i(n)===i(0))P=n;else if(n)if(null!==l&&l[0]>E)E=l[0],n.advance(l[0]);else if(null!==l&&E>=l[0]+l[1]);else{var r=!0,e="value"in n?n.value:n.key;s(d).call(d,(function(t){t&&t.length&&(2===t.length?r=r&&e[t[0]]===t[1]:A(t[0])&&(r=r&&t[0].apply(void 0,[e])))})),r&&(E++,P.push(y(e)),f?n.delete():u&&(e=function(t){for(var n=0;n<k.length;n++){var r=k[n],e=u[r];e instanceof Function&&(e=e(t)),t[r]=e}return t}(e),n.update(e))),n.continue()}}catch(t){h(t)}},w.oncomplete=function(){c(P)},w.onerror=function(t){h(t)},w.onabort=function(t){h(t)}}))},l=function(t,n){var r="next",e="openCursor",o=[],i=null,c=P,s=!1,l=function(){return p(t,n,e,s?r+"unique":r,i,o,c)},v=function(){return r=null,e="count",{execute:l}},d=function t(){return 1==(i=k(arguments[0])?arguments[0]:a(Array.prototype).call(arguments,0,2)).length&&i.unshift(0),E(i[1])||(i=null),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:t,map:w,remove:S}},y=function t(n){return(n=!!I(n)||!!n)&&(e="openKeyCursor"),{execute:l,keys:t,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},h=function t(){return o.push(a(Array.prototype).call(arguments,0,2)),{execute:l,count:v,keys:y,filter:t,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},m=function t(n){return n=!!I(n)||!!n,r=n?"next":"prev",{execute:l,count:v,keys:y,filter:h,asc:t,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},g=function t(n){return n=!!I(n)||!!n,r=n?"prev":"next",{execute:l,count:v,keys:y,filter:h,asc:m,desc:t,distinct:x,modify:b,limit:d,map:w,remove:S}},x=function t(n){return n=!!I(n)||!!n,s=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:t,modify:b,limit:d,map:w,remove:S}},b=function t(n){return u=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:t,limit:d,map:w,remove:S}},w=function t(n){return A(n)&&(c=n),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:t,remove:S}},S=function t(n){return n=!!I(n)||!!n,f=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:t}};return{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}};s(e="only bound upperBound lowerBound".split(" ")).call(e,(function(t){o[t]=function(){return new l(t,arguments)}})),this.filter=function(){var t=new l(null,null);return d(t).apply(t,arguments)},this.all=function(){var t;return d(t=this).call(t)}},_=function(t,n,r,e){var o=t.target.result,i=new D(o,n);return C[n]=o,c.resolve(i)},C={},M={version:"0.10.2",open:function(t){var n;return new c((function(r,e){var o;C[t.server]?_({target:{result:C[t.server]}},t.server,t.version,t.schema).then(r,e):(j?c.resolve():O&&S().databases?new c((function(t){var n=function(){return S().databases().finally(t)};o=u(n,100),n()})).finally((function(){j=!0,clearInterval(o)})):(j=!0,c.resolve())).then((function(){try{n=S().open(t.server,t.version)}catch(t){e(t)}n.onsuccess=function(n){_(n,t.server,t.version,t.schema).then(r,e)},n.onupgradeneeded=function(n){!function(t,n,r){for(var e in"function"==typeof n&&(n=n()),n){var o,i=n[e];for(var c in o=!w.call(n,e)||r.objectStoreNames.contains(e)?t.currentTarget.transaction.objectStore(e):r.createObjectStore(e,i.key),i.indexes){var u=i.indexes[c];try{o.index(c)}catch(t){o.createIndex(c,u.key||c,v(u).length?u:{unique:!1})}}}}(n,t.schema,n.target.result)},n.onerror=function(t){e(t)}}))}))},remove:function(t){return new c((function(n,r){if(!t)return n();var e,o;i(t)===D&&(t=t.name),"string"==typeof t&&(e=C[t]),e&&"function"==typeof e.close&&e.close();try{o=S().deleteDatabase(t)}catch(t){r(t)}o.onsuccess=function(r){delete C[t],n(t)},o.onerror=function(t){r(t)},o.onblocked=function(t){r(t)}}))}};void 0!==t.exports?t.exports=M:void 0===(o=function(){return M}.call(n,r,n,t))||(t.exports=o)}(void 0)}).call(this,r(77))},function(t,n,r){var e=r(171),o=r(210);function i(n){return t.exports=i="function"==typeof e&&"symbol"==typeof o?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,r){t.exports=r(172)},function(t,n,r){t.exports=r(173)},function(t,n,r){var e=r(174);r(203),r(204),r(205),r(206),r(207),r(208),r(209),t.exports=e},function(t,n,r){var e=r(175);r(202),t.exports=e},function(t,n,r){var e=r(176);r(54),t.exports=e},function(t,n,r){r(104),r(72),r(178),r(186),r(187),r(188),r(189),r(107),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201);var e=r(13);t.exports=e.Symbol},function(t,n){var r=TypeError;t.exports=function(t){if(t>9007199254740991)throw r("Maximum allowed index exceeded");return t}},function(t,n,r){r(179),r(182),r(183),r(184),r(185)},function(t,n,r){"use strict";var e=r(0),o=r(1),i=r(7),c=r(6),u=r(15),a=r(11),f=r(24),s=r(5),p=r(8),l=r(14),v=r(12),d=r(18),y=r(45),h=r(36),m=r(20),g=r(50),x=r(69),b=r(64),w=r(180),S=r(68),j=r(43),O=r(16),P=r(87),T=r(80),A=r(21),E=r(33),k=r(48),I=r(49),D=r(60),L=r(4),_=r(75),C=r(3),M=r(105),R=r(29),N=r(51),F=r(56).forEach,B=k("hidden"),G=N.set,U=N.getterFor("Symbol"),z=Object.prototype,V=o.Symbol,q=V&&V.prototype,H=o.TypeError,J=o.QObject,K=j.f,W=O.f,Y=w.f,X=T.f,$=c([].push),Q=E("symbols"),Z=E("op-symbols"),tt=E("wks"),nt=!J||!J.prototype||!J.prototype.findChild,rt=a&&s((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,n,r){var e=K(z,n);e&&delete z[n],W(t,n,r),e&&t!==z&&W(z,n,e)}:W,et=function(t,n){var r=Q[t]=g(q);return G(r,{type:"Symbol",tag:t,description:n}),a||(r.description=n),r},ot=function(t,n,r){t===z&&ot(Z,n,r),v(t);var e=y(n);return v(r),p(Q,e)?(r.enumerable?(p(t,B)&&t[B][e]&&(t[B][e]=!1),r=g(r,{enumerable:m(0,!1)})):(p(t,B)||W(t,B,m(1,{})),t[B][e]=!0),rt(t,e,r)):W(t,e,r)},it=function(t,n){v(t);var r=d(n),e=x(r).concat(ft(r));return F(e,(function(n){a&&!i(ct,r,n)||ot(t,n,r[n])})),t},ct=function(t){var n=y(t),r=i(X,this,n);return!(this===z&&p(Q,n)&&!p(Z,n))&&(!(r||!p(this,n)||!p(Q,n)||p(this,B)&&this[B][n])||r)},ut=function(t,n){var r=d(t),e=y(n);if(r!==z||!p(Q,e)||p(Z,e)){var o=K(r,e);return!o||!p(Q,e)||p(r,B)&&r[B][e]||(o.enumerable=!0),o}},at=function(t){var n=Y(d(t)),r=[];return F(n,(function(t){p(Q,t)||p(I,t)||$(r,t)})),r},ft=function(t){var n=t===z,r=Y(n?Z:d(t)),e=[];return F(r,(function(t){!p(Q,t)||n&&!p(z,t)||$(e,Q[t])})),e};f||(A(q=(V=function(){if(l(q,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,n=D(t),r=function(t){this===z&&i(r,Z,t),p(this,B)&&p(this[B],n)&&(this[B][n]=!1),rt(this,n,m(1,t))};return a&&nt&&rt(z,n,{configurable:!0,set:r}),et(n,t)}).prototype,"toString",(function(){return U(this).tag})),A(V,"withoutSetter",(function(t){return et(D(t),t)})),T.f=ct,O.f=ot,P.f=it,j.f=ut,b.f=w.f=at,S.f=ft,_.f=function(t){return et(L(t),t)},a&&(W(q,"description",{configurable:!0,get:function(){return U(this).description}}),u||A(z,"propertyIsEnumerable",ct,{unsafe:!0}))),e({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:V}),F(x(tt),(function(t){C(t)})),e({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),e({target:"Object",stat:!0,forced:!f,sham:!a},{create:function(t,n){return void 0===n?g(t):it(g(t),n)},defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:ut}),e({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:at}),M(),R(V,"Symbol"),I[B]=!0},function(t,n,r){var e=r(23),o=r(18),i=r(64).f,c=r(181),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==e(t)?function(t){try{return i(t)}catch(t){return c(u)}}(t):i(o(t))}},function(t,n,r){var e=r(65),o=r(26),i=r(74),c=Array,u=Math.max;t.exports=function(t,n,r){for(var a=o(t),f=e(n,a),s=e(void 0===r?a:r,a),p=c(u(s-f,0)),l=0;f<s;f++,l++)i(p,l,t[f]);return p.length=l,p}},function(t,n,r){var e=r(0),o=r(9),i=r(8),c=r(36),u=r(33),a=r(106),f=u("string-to-symbol-registry"),s=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{for:function(t){var n=c(t);if(i(f,n))return f[n];var r=o("Symbol")(n);return f[n]=r,s[r]=n,r}})},function(t,n,r){var e=r(0),o=r(8),i=r(46),c=r(32),u=r(33),a=r(106),f=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(c(t)+" is not a symbol");if(o(f,t))return f[t]}})},function(t,n,r){var e=r(0),o=r(9),i=r(41),c=r(7),u=r(6),a=r(5),f=r(39),s=r(2),p=r(10),l=r(46),v=r(53),d=r(24),y=o("JSON","stringify"),h=u(/./.exec),m=u("".charAt),g=u("".charCodeAt),x=u("".replace),b=u(1..toString),w=/[\\uD800-\\uDFFF]/g,S=/^[\\uD800-\\uDBFF]$/,j=/^[\\uDC00-\\uDFFF]$/,O=!d||a((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),P=a((function(){return'"\\\\udf06\\\\ud834"'!==y("\\udf06\\ud834")||'"\\\\udead"'!==y("\\udead")})),T=function(t,n){var r=v(arguments),e=n;if((p(n)||void 0!==t)&&!l(t))return f(n)||(n=function(t,n){if(s(e)&&(n=c(e,this,t,n)),!l(n))return n}),r[1]=n,i(y,null,r)},A=function(t,n,r){var e=m(r,n-1),o=m(r,n+1);return h(S,t)&&!h(j,o)||h(j,t)&&!h(S,e)?"\\\\u"+b(g(t,0),16):t};y&&e({target:"JSON",stat:!0,arity:3,forced:O||P},{stringify:function(t,n,r){var e=v(arguments),o=i(O?T:y,null,e);return P&&"string"==typeof o?x(o,w,A):o}})},function(t,n,r){var e=r(0),o=r(24),i=r(5),c=r(68),u=r(25);e({target:"Object",stat:!0,forced:!o||i((function(){c.f(1)}))},{getOwnPropertySymbols:function(t){var n=c.f;return n?n(u(t)):[]}})},function(t,n,r){r(3)("asyncIterator")},function(t,n){},function(t,n,r){r(3)("hasInstance")},function(t,n,r){r(3)("isConcatSpreadable")},function(t,n,r){r(3)("match")},function(t,n,r){r(3)("matchAll")},function(t,n,r){r(3)("replace")},function(t,n,r){r(3)("search")},function(t,n,r){r(3)("species")},function(t,n,r){r(3)("split")},function(t,n,r){var e=r(3),o=r(105);e("toPrimitive"),o()},function(t,n,r){var e=r(9),o=r(3),i=r(29);o("toStringTag"),i(e("Symbol"),"Symbol")},function(t,n,r){r(3)("unscopables")},function(t,n,r){var e=r(1);r(29)(e.JSON,"JSON",!0)},function(t,n){},function(t,n){},function(t,n,r){r(3)("dispose")},function(t,n,r){r(3)("asyncDispose")},function(t,n,r){r(3)("matcher")},function(t,n,r){r(3)("metadataKey")},function(t,n,r){r(3)("observable")},function(t,n,r){r(3)("metadata")},function(t,n,r){r(3)("patternMatch")},function(t,n,r){r(3)("replaceAll")},function(t,n,r){t.exports=r(211)},function(t,n,r){t.exports=r(212)},function(t,n,r){var e=r(213);t.exports=e},function(t,n,r){var e=r(214);t.exports=e},function(t,n,r){var e=r(215);r(54),t.exports=e},function(t,n,r){r(71),r(72),r(101),r(107);var e=r(75);t.exports=e.f("iterator")},function(t,n,r){t.exports=r(217)},function(t,n,r){r(218);var e=r(13);t.exports=e.setInterval},function(t,n,r){r(219),r(221)},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setInterval,!0);e({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,n){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setTimeout,!0);e({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,n,r){t.exports=r(223)},function(t,n,r){var e=r(224);t.exports=e},function(t,n,r){r(225);var e=r(13);t.exports=e.Array.isArray},function(t,n,r){r(0)({target:"Array",stat:!0},{isArray:r(39)})},function(t,n,r){t.exports=r(227)},function(t,n,r){r(54);var e=r(28),o=r(8),i=r(14),c=r(228),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var n=t.forEach;return t===u||i(u,t)&&n===u.forEach||o(a,e(t))?c:n}},function(t,n,r){var e=r(229);t.exports=e},function(t,n,r){r(230);var e=r(40);t.exports=e("Array").forEach},function(t,n,r){"use strict";var e=r(0),o=r(231);e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,n,r){"use strict";var e=r(56).forEach,o=r(232)("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,r){"use strict";var e=r(5);t.exports=function(t,n){var r=[][t];return!!r&&e((function(){r.call(null,n||function(){return 1},1)}))}},function(t,n,r){t.exports=r(234)},function(t,n,r){var e=r(235);t.exports=e},function(t,n,r){r(236);var e=r(13).Object,o=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(o.sham=!0)},function(t,n,r){var e=r(0),o=r(11),i=r(16).f;e({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,n,r){t.exports=r(238)},function(t,n,r){var e=r(239);t.exports=e},function(t,n,r){var e=r(14),o=r(240),i=Array.prototype;t.exports=function(t){var n=t.concat;return t===i||e(i,t)&&n===i.concat?o:n}},function(t,n,r){r(104);var e=r(40);t.exports=e("Array").concat},function(t,n,r){t.exports=r(242)},function(t,n,r){var e=r(243);t.exports=e},function(t,n,r){r(244);var e=r(13);t.exports=e.Object.keys},function(t,n,r){var e=r(0),o=r(25),i=r(69);e({target:"Object",stat:!0,forced:r(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,r){t.exports=r(246)},function(t,n,r){var e=r(247);t.exports=e},function(t,n,r){var e=r(14),o=r(248),i=Array.prototype;t.exports=function(t){var n=t.filter;return t===i||e(i,t)&&n===i.filter?o:n}},function(t,n,r){r(249);var e=r(40);t.exports=e("Array").filter},function(t,n,r){"use strict";var e=r(0),o=r(56).filter;e({target:"Array",proto:!0,forced:!r(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}]);`,"Worker",void 0,void 0)}},function(t,r,e){var n=e(3),g=e(9),y=e(11),i=e(308);function k(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.server=null,this.expire=$.expire||72,this.name=$.name}var L=k.prototype;L.init=function(){var $=this;if(!this.server)return i.open({server:"nim-logs-"+this.name,version:1,schema:{log:{key:{keyPath:"id",autoIncrement:!0},indexes:{time:{}}}}}).then(function(V){$.server=V})},L.putLog=function($){var V=this;if(!this.server)return n.reject("no db server");var z=g($).call($,-1)[0].time-36e5*this.expire;return this.deleteLogs(z).then(function(){return V.server.add("log",$)})},L.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then(function($){var V={},z=g($).call($,-1)[0];return V.logs=y($).call($,function(re){return re.tabId+" "+re.log}).join(`\r
`),V.time=z&&z.time,V}):n.reject("no db server")},L.deleteLogs=function($){return this.server?this.server.remove("log",null,"time",0,$):n.reject("no db server")},t.exports=k},function(t,r,e){e(259);var n=e(14);t.exports=n.setInterval},function(t,r,e){var n=e(18),g=e(578),y=Function.prototype;t.exports=function(i){var k=i.bind;return i===y||n(y,i)&&k===y.bind?g:k}},function(t,r,e){e(579);var n=e(27);t.exports=n("Function").bind},function(t,r,e){var n=e(1),g=e(281);n({target:"Function",proto:!0,forced:Function.bind!==g},{bind:g})},function(t,r,e){var n=e(19),g=e(23),y=e(2),i=e(22),k=e(5),L=e(66),$=e(193);function V(oe){oe.onuploading&&this.on("uploading",oe.onuploading),$.call(this,oe)}var z=$.prototype,re=V.prototype=n(z);re.doSend=function(){var oe,le,ue,ie=this.options,ae=ie.headers,Fe=this.xhr=new XMLHttpRequest;if(ae["Content-Type"]==="multipart/form-data"){var de,Ie;delete ae["Content-Type"],Fe.upload.onprogress=g(de=this.onProgress).call(de,this),Fe.upload.onload=g(Ie=this.onProgress).call(Ie,this);var Ve,kt=ie.data;ie.data=new window.FormData,kt&&y(Ve=L.getKeys(kt,ie.putFileAtEnd)).call(Ve,function(Et){var cr=kt[Et];cr.tagName&&cr.tagName.toUpperCase()==="INPUT"?cr.type==="file"&&y([]).call(cr.files,function(er){ie.data.append(L.dataset(cr,"name")||cr.name||er.name||"file-"+L.uniqueID(),er)}):ie.data.append(Et,cr)})}else if(ae["x-nos-token"]){var At,ze;Fe.upload.onprogress=g(At=this.onProgress).call(At,this),Fe.upload.onload=g(ze=this.onProgress).call(ze,this)}Fe.onreadystatechange=g(oe=this.onStateChange).call(oe,this),ie.timeout!==0&&(this.timer=i(g(ue=this.onTimeout).call(ue,this),ie.timeout)),Fe.open(ie.method,ie.url,!ie.sync),y(le=k(ae)).call(le,function(Et){Fe.setRequestHeader(Et,ae[Et])}),ie.cookie&&"withCredentials"in Fe&&(Fe.withCredentials=!0),Fe.send(ie.data),this.afterSend()},re.onProgress=function(oe){oe.lengthComputable&&oe.loaded<=oe.total&&this.emit("uploading",oe)},re.onStateChange=function(){var oe,le=this.xhr;le.readyState===4&&(oe={status:le.status,result:le.responseText||""},this.onLoad(oe))},re.getResponseHeader=function(oe){var le=this.xhr;return le?le.getResponseHeader(oe):""},re.destroy=function(){clearTimeout(this.timer);try{this.xhr.onreadystatechange=L.f,this.xhr.abort()}catch{}z.destroy.call(this)},t.exports=V},function(t,r,e){var n;/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(g){function y(){}var i=y.prototype,k=g.EventEmitter;function L(V,z){for(var re=V.length;re--;)if(V[re].listener===z)return re;return-1}function $(V){return function(){return this[V].apply(this,arguments)}}i.getListeners=function(V){var z,re,oe=this._getEvents();if(V instanceof RegExp)for(re in z={},oe)oe.hasOwnProperty(re)&&V.test(re)&&(z[re]=oe[re]);else z=oe[V]||(oe[V]=[]);return z},i.flattenListeners=function(V){var z,re=[];for(z=0;z<V.length;z+=1)re.push(V[z].listener);return re},i.getListenersAsObject=function(V){var z,re=this.getListeners(V);return re instanceof Array&&((z={})[V]=re),z||re},i.addListener=function(V,z){if(!function ue(ie){return typeof ie=="function"||ie instanceof RegExp||!(!ie||typeof ie!="object")&&ue(ie.listener)}(z))throw new TypeError("listener must be a function");var re,oe=this.getListenersAsObject(V),le=typeof z=="object";for(re in oe)oe.hasOwnProperty(re)&&L(oe[re],z)===-1&&oe[re].push(le?z:{listener:z,once:!1});return this},i.on=$("addListener"),i.addOnceListener=function(V,z){return this.addListener(V,{listener:z,once:!0})},i.once=$("addOnceListener"),i.defineEvent=function(V){return this.getListeners(V),this},i.defineEvents=function(V){for(var z=0;z<V.length;z+=1)this.defineEvent(V[z]);return this},i.removeListener=function(V,z){var re,oe,le=this.getListenersAsObject(V);for(oe in le)le.hasOwnProperty(oe)&&(re=L(le[oe],z))!==-1&&le[oe].splice(re,1);return this},i.off=$("removeListener"),i.addListeners=function(V,z){return this.manipulateListeners(!1,V,z)},i.removeListeners=function(V,z){return this.manipulateListeners(!0,V,z)},i.manipulateListeners=function(V,z,re){var oe,le,ue=V?this.removeListener:this.addListener,ie=V?this.removeListeners:this.addListeners;if(typeof z!="object"||z instanceof RegExp)for(oe=re.length;oe--;)ue.call(this,z,re[oe]);else for(oe in z)z.hasOwnProperty(oe)&&(le=z[oe])&&(typeof le=="function"?ue.call(this,oe,le):ie.call(this,oe,le));return this},i.removeEvent=function(V){var z,re=typeof V,oe=this._getEvents();if(re==="string")delete oe[V];else if(V instanceof RegExp)for(z in oe)oe.hasOwnProperty(z)&&V.test(z)&&delete oe[z];else delete this._events;return this},i.removeAllListeners=$("removeEvent"),i.emitEvent=function(V,z){var re,oe,le,ue,ie=this.getListenersAsObject(V);for(ue in ie)if(ie.hasOwnProperty(ue))for(re=ie[ue].slice(0),le=0;le<re.length;le++)(oe=re[le]).once===!0&&this.removeListener(V,oe.listener),oe.listener.apply(this,z||[])===this._getOnceReturnValue()&&this.removeListener(V,oe.listener);return this},i.trigger=$("emitEvent"),i.emit=function(V){var z=Array.prototype.slice.call(arguments,1);return this.emitEvent(V,z)},i.setOnceReturnValue=function(V){return this._onceReturnValue=V,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},y.noConflict=function(){return g.EventEmitter=k,y},(n=(function(){return y}).call(g,e,g,t))===void 0||(t.exports=n)})(typeof window<"u"?window:this||{})},function(t,r,e){var n=e(19),g=e(8),y=e(2),i=e(23),k=e(93),L=e(66),$=e(193),V=e(282),z="NEJ-UPLOAD-RESULT:",re={};function oe(ie){this.init(),$.call(this,ie)}var le=$.prototype,ue=oe.prototype=n(le);ue.init=function(){var ie=!1;function ae(Fe){var de=Fe.data;if(g(de).call(de,z)===0){var Ie=(de=JSON.parse(de.replace(z,""))).key,Ve=re[Ie];Ve&&(delete re[Ie],de.result=decodeURIComponent(de.result||""),Ve.onLoad(de.result))}}return function(){(function(){if(!ie){ie=!0;var Fe=L.getGlobal();Fe.postMessage?L.on(Fe,"message",ae):(V.addMsgListener(ae),V.startTimer())}})()}}(),ue.doSend=function(){var ie=this,ae=ie.options,Fe=ie.key="zoro-ajax-upload-iframe-"+L.uniqueID();re[Fe]=ie;var de=ie.form=L.html2node('<form style="display:none;"></form>');typeof document>"u"||document.body.appendChild(de),de.target=Fe,de.method="POST",de.enctype="multipart/form-data",de.encoding="multipart/form-data";var Ie=ae.url,Ve=L.genUrlSep(Ie);de.action=Ie+Ve+"_proxy_=form";var kt,At=ae.data,ze=[],Et=[];At&&y(kt=L.getKeys(At,ae.putFileAtEnd)).call(kt,function(or){var dr=At[or];if(dr.tagName&&dr.tagName.toUpperCase()==="INPUT"){if(dr.type==="file"){var lr=dr,nr=lr.cloneNode(!0);lr.parentNode.insertBefore(nr,lr);var ur=L.dataset(lr,"name");ur&&(lr.name=ur),de.appendChild(lr),L.isFunction(lr.setAttribute)&&(lr.setAttribute("form",""),lr.removeAttribute("form")),ze.push(dr),Et.push(nr)}}else{var ar=L.html2node('<input type="hidden"/>');ar.name=or,ar.value=dr,de.appendChild(ar)}});function cr(){y(ze).call(ze,function(or,dr){var lr=Et[dr];lr.parentNode&&(or.name=lr.name,L.isFunction(or.setAttribute)&&or.setAttribute("form",lr.getAttribute("form")),lr.parentNode.replaceChild(or,lr))})}var er=ie.iframe=L.createIframe({name:Fe,onload:function(){var or;ie.aborted?cr():(L.on(er,"load",i(or=ie.checkResult).call(or,ie)),de.submit(),cr(),ie.afterSend())}})},ue.checkResult=function(){var ie,ae;try{var Fe,de;if(ie=this.iframe.contentWindow.document.body,ae=k(Fe=ie.innerText||ie.textContent||"").call(Fe),g(ae).call(ae,z)>=0||g(de=ie.innerHTML).call(de,z)>=0)return}catch{return}this.onLoad(ae)},ue.onLoad=function(ie){le.onLoad.call(this,{status:200,result:ie}),L.remove(this.form),L.remove(this.iframe),le.destroy.call(this)},ue.destroy=function(){L.remove(this.iframe),L.remove(this.form)},ue.abort=function(){this.aborted=!0,delete re[this.key],le.abort.call(this)},t.exports=oe},function(t,r,e){var n=e(584);t.exports=n},function(t,r,e){var n=e(18),g=e(585),y=String.prototype;t.exports=function(i){var k=i.trim;return typeof i=="string"||i===y||n(y,i)&&k===y.trim?g:k}},function(t,r,e){e(586);var n=e(27);t.exports=n("String").trim},function(t,r,e){var n=e(1),g=e(191).trim;n({target:"String",proto:!0,forced:e(587)("trim")},{trim:function(){return g(this)}})},function(t,r,e){var n=e(231).PROPER,g=e(7),y=e(151);t.exports=function(i){return g(function(){return!!y[i]()||"​᠎"[i]()!=="​᠎"||n&&y[i].name!==i})}},function(t,r,e){var n=e(19),g=e(8),y=e(23),i=e(2),k=e(66),L=e(282),$=e(193),V={};function z(le){this.init(),$.call(this,le)}var re=$.prototype,oe=z.prototype=n(re);oe.init=function(){var le="NEJ-AJAX-DATA:",ue=!1;function ie(ae){var Fe=ae.data;if(g(Fe).call(Fe,le)===0){var de=(Fe=JSON.parse(Fe.replace(le,""))).key,Ie=V[de];Ie&&(delete V[de],Fe.result=decodeURIComponent(Fe.result||""),Ie.onLoad(Fe))}}return function(){(function(){if(!ue){ue=!0;var ae=k.getGlobal();ae.postMessage?k.on(ae,"message",ie):L.addMsgListener(ie)}})()}}(),oe.doSend=function(){var le=this.options,ue=k.url2origin(le.url),ie=le.proxyUrl||ue+"/res/nej_proxy_frame.html",ae=V[ie];if(k.isArray(ae)){var Fe;ae.push(y(Fe=this.doSend).call(Fe,this,le))}else{var de;if(!ae)return V[ie]=[y(de=this.doSend).call(de,this,le)],void k.createIframe({src:ie,onload:function(kt){var At=V[ie];V[ie]=k.target(kt).contentWindow,i(At).call(At,function(ze){try{ze()}catch{}})}});if(!this.aborted){var Ie=this.key=k.uniqueID();V[Ie]=this;var Ve=k.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},le);Ve.key=Ie,L.postMessage(ae,{data:Ve}),this.afterSend()}}},oe.abort=function(){this.aborted=!0,delete V[this.key],re.abort.call(this)},t.exports=z},function(t,r,e){var n,g,y=e(6),i=e(66),k=e(92),L=(n=/json/i,g=/post/i,function($,V){var z=(V=V||{}).data=V.data||{},re=V.headers=V.headers||{},oe=i.checkWithDefault(re,"Accept","application/json"),le=i.checkWithDefault(re,"Content-Type","application/json");return n.test(oe)&&(V.type="json"),g.test(V.method)&&n.test(le)&&(V.data=y(z)),k($,V)});t.exports=L},function(t,r,e){var n=e(5),g=e(15),y=e(8),i=e(2),k=e(4),L=e(9),$=e(22);t.exports={wrapSafeCallback:function(V,z){if(V.__wrapSafeCallback__)return V;V.__wrapSafeCallback__=!0;var re=n(V);return re=g(re).call(re,function(oe){return y(oe).call(oe,"on")===0&&Object.prototype.toString.call(V[oe])==="[object Function]"}),i(re).call(re,function(oe){var le=V[oe];V[oe]=function(){var ue=this;try{var ie;return le.call.apply(le,k(ie=[this]).call(ie,L(Array.prototype).call(arguments)))}catch(Fe){var ae;this.logger.error(k(ae="wrapSafeCallback. CallbackName: ".concat(oe,". Error: ")).call(ae,Fe)),$(function(){var de;throw ue.logger.error(k(de="wrapSafeCallback. throw error in setTimeout. CallbackName: ".concat(oe,". Error: ")).call(de,Fe)),Fe},0),z.logger&&z.logger.error("userOption:".concat(oe," function error"),Fe)}}}),V}}},function(t,r,e){var n=e(592);t.exports=n},function(t,r,e){e(593);var n=e(14);t.exports=n.Date.now},function(t,r,e){var n=e(1),g=e(13),y=Date,i=g(y.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return i(new y)}})},function(t,r,e){var n=e(81).fn,g=e(0),y=e(26).reportAPI;n.isConnected=function(){return y({instance:this,className:"ApiBaseFn",funcName:"isConnected",hasCallback:!1}),!!this.protocol&&this.protocol.isConnected()},n.getLoginStatus=function(){return this.protocol.getLoginStatus()},n.connect=function(){y({instance:this,className:"ApiBaseFn",funcName:"connect",hasCallback:!1}),this.protocol.processId=g.guid(),this.protocol.connect()},n.detectHeartbeat=function(){this.protocol.detectHeartbeat()},n.disconnect=function(){}},function(t,r,e){var n=e(24),g=e(4),y=e(9),i=e(144),k=e(6),L=e(23),$=e(11),V=e(34),z=e(93),re=e(8),oe=e(43),le=e(22),ue=e(10),ie=e(28),ae=e(2),Fe=e(5),de=e(52),Ie=e(15),Ve=e(53),kt=e(54),At=e(55),ze=e(42),Et=e(51),cr=e(127),er=["loc_x","loc_y","loc_z"];function or(sr,xr){var Nr=Fe(sr);if(de){var Mr=de(sr);xr&&(Mr=Ie(Mr).call(Mr,function(br){return Ve(sr,br).enumerable})),Nr.push.apply(Nr,Mr)}return Nr}function dr(sr){for(var xr=1;xr<arguments.length;xr++){var Nr,Mr,br=arguments[xr]!=null?arguments[xr]:{};xr%2?ae(Nr=or(Object(br),!0)).call(Nr,function(yr){Et(sr,yr,br[yr])}):kt?At(sr,kt(br)):ae(Mr=or(Object(br))).call(Mr,function(yr){ze(sr,yr,Ve(br,yr))})}return sr}var lr=e(81).fn,nr=e(0),ur=e(614),ar=e(35),gr=e(12),pr=e(284),hr=e(285),Cr=e(289),wr=e(109),Sr=wr.EMExceptionState,mr=wr.EMResourceUploadWay,_r=e(26).reportAPI,Ar=e(646);function Er(sr,xr,Nr,Mr){sr.protocol.reporterHook.emit("reporter/uploadEnd",xr.code==="RequestAbortedError"||xr.code==="abort"?Sr.kCanceled:Sr.kFailed),sr.reporter.reportTraceStart("exceptions",{user_id:sr.account,trace_id:nr.get(sr,"socket.socket.sessionid"),start_time:Nr,action:1,exception_service:3}),sr.reporter.reportTraceUpdateV2("exceptions",{code:typeof xr.status=="number"?xr.status:typeof xr.code=="number"?xr.code:0,description:xr.message||"".concat(xr.code),operation_type:1,target:Mr,net_connect:sr.protocol.checkNetworkAvailable()}),sr.reporter.reportTraceEnd("exceptions",1)}lr.sendText=function(sr){(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendText",async:!0,done:sr.done});var xr=sr,Nr=xr.loc_x,Mr=xr.loc_y,br=xr.loc_z,yr=cr(xr,er);return Nr===void 0||Mr===void 0||br===void 0?sr=dr({},yr):(typeof sr.loc_x!="number"&&(sr.loc_x=0),typeof sr.loc_y!="number"&&(sr.loc_y=0),typeof sr.loc_z!="number"&&(sr.loc_z=0)),this.processCallback(sr),sr.msg=new this.message.TextMessage(sr),this.sendMsg(sr)},lr.previewFile=function(sr,xr){var Nr=this;(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"previewFile",done:sr.done}),sr.fileInput&&(sr.fileInput=nr.verifyFileInput(sr.fileInput,"msg::previewFile"));var Mr=void 0,br=void 0;if(sr.fileInput&&sr.fileInput.files&&sr.fileInput.files.length>0?Mr=sr.fileInput.files[0]:sr.blob&&sr.blob.name&&(Mr=sr.blob),Mr&&(br=Mr.name+"_"+Mr.lastModified+"_"+Mr.size),!sr.transcode&&br&&this.protocol.cloudStorage&&this.protocol.cloudStorage.uploadCache&&this.protocol.cloudStorage.uploadCache[br]){var yr=nr.copy(sr),Tr=new Date().getTime();sr=nr.merge(sr,this.protocol.cloudStorage.uploadCache[br],{onError:function(Br){var Lr;Nr.logger.error(g(Lr="chunkUploadResume::onError: ".concat(Br&&Br.code," ")).call(Lr,Br&&Br.message)),Er(Nr,Br,Tr,sr.chunkUrl),Br.code==="RequestAbortedError"||Br.code==="abort"||nim.protocol.__destroyed||nim._previewFileNonResume(yr,xr)},uploaddone:function(Br,Lr){if(Br){var Fr;Nr.logger.error(g(Fr="chunkUploadResume::uploaddone error: ".concat(Br&&Br.code," ")).call(Fr,Br&&Br.message)),Er(Nr,Br,Tr,sr.chunkUrl),Br.code==="RequestAbortedError"||Br.code==="abort"||nim.protocol.__destroyed||nim._previewFileNonResume(yr,xr)}else{Nr.protocol.reporterHook.emit("reporter/uploadEnd",Sr.kSucceed),Nr.logger.log("chunkUploadResume::uploaddone:",Br),(Lr=pr.parseResponse(Lr,Nr.options.exifOrientation)).url=gr.genDownloadUrl(sr.nosToken,decodeURIComponent(sr.nosToken.objectName),gr.serverNosConfig.cdnDomain);var qr=Mr.type||"",Vr=Mr.name||"";if(Lr.ext=y(qr).call(qr,i(qr).call(qr,"/")+1),!Lr.ext){var Qr=i(Vr).call(Vr,".");Lr.ext=Qr===-1?"unknown":y(Vr).call(Vr,Qr+1)}sr.nosToken.shortUrl&&(Lr._url_safe=sr.nosToken.shortUrl),sr.done(null,Lr)}},uploadprogress:function(Br){Nr.reporterHook.emit("reporter/uploadUpdate",{transferred_size:Br.loaded}),yr.uploadprogress&&yr.uploadprogress(Br)}}),Nr.protocol.reporterHook.emit("reporter/uploadStart"),Nr.reporterHook.emit("reporter/uploadUpdate",{full_size:Mr.size,remote_addr:gr.chunkUploadUrl,operation_type:mr.kResourceUploadWayNOSPlugin}),Ar(sr,Mr,this.protocol.cloudStorage.uploadCache[br])}else this._previewFileNonResume(sr,xr)},lr._previewFileNonResume=function(sr,xr){var Nr,Mr=this,br=Mr.protocol.appGrayConfig;if(br&&br.grayConfig&&br.grayConfig.mixStoreEnable&&(sr.mixEnable=!0),nr.verifyOptions(sr,"done","msg::previewFile"),sr.type||(sr.type="file"),nr.verifyParamPresentJustOne(sr,"dataURL blob fileInput filePath wxFilePath fileObject","msg::previewFile"),nr.exist(sr.maxSize)&&nr.verifyParamType("maxSize",sr.maxSize,"number","api::previewFile"),nr.exist(sr.commonUpload)&&nr.verifyParamType("commonUpload",sr.commonUpload,"boolean","api::previewFile"),sr.nosSurvivalTime?(nr.verifyParamType("nosSurvivalTime",sr.nosSurvivalTime,"number","api::Base.getInstance"),nr.verifyParamMin("nosSurvivalTime",sr.nosSurvivalTime,86400,"api::Base.getInstance")):sr.nosSurvivalTime=this.nosSurvivalTime,sr.filePath=sr.filePath||sr.wxFilePath,delete sr.wxFilePath,sr.dataURL)sr.blob=Cr.fromDataURL(sr.dataURL);else if(!sr.blob){if(sr.fileInput){if(sr.fileInput.files){if(!sr.fileInput.files.length)return void sr.done(ar.newNoFileError("请选择"+sr.type+"文件",{callFunc:"msg::previewFile",fileInput:sr.fileInput}),sr);sr.fileSize=sr.fileInput.files[0].size}sr.fileInputName=nr.getFileName(sr.fileInput)}}this.processCallback(sr);var yr=k(pr.genResponseBody(sr.type)||{}).replace(/"/gi,'\\"'),Tr=null,Br=sr.transcode?"getNosTokenTrans":"getNosToken";if(sr.transcode){nr.verifyOptions(sr,"fileInput","msg::previewFile");var Lr=nr.getFileInfo(sr.fileInput);Tr={transToken:{name:Lr.name,type:Lr.transcodeType,transType:sr.transcode==="png"?11:10,size:Lr.size,body:yr}}}else Tr=yr;this[Br]({responseBody:Tr,nosToken:{nosScene:sr.nosScene||this.nosScene,nosSurvivalTime:sr.nosSurvivalTime},callback:L(Nr=function(Fr,qr){if(Fr)sr.done(Fr);else if(sr.transcode?(sr.nosToken=qr.nosToken,sr.docId=qr.docId):sr.nosToken=qr,sr.logger=Mr.logger,sr.mixEnable){var Vr,Qr;if(!this.protocol.mixStorePolicy)try{this.protocol.mixStorePolicy=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[this.options.appKey]}catch(Tn){Mr.logger.error("error:","get last mixStorePolicy failed",Tn)}if(!this.protocol.mixStorePolicy)return void Mr.logger.error("error:","get mixStorePolicy failed");sr.providers=$(Vr=this.protocol.mixStorePolicy.providers||[]).call(Vr,function(Tn){return Number(Tn)}),sr.curProvider=sr.providers[0]?Number(sr.providers[0]):1,sr.nosPolicy=this.protocol.mixStorePolicy.nosPolicy,sr.s3Policy=this.protocol.mixStorePolicy.s3Policy,sr.policyVersion=this.protocol.mixStorePolicy.policyVersion,Mr.getMixStoreToken({curProvider:sr.curProvider,policyVersion:sr.policyVersion,responseBody:Tr,callback:L(Qr=function(Tn,xn){Tn?sr.done(Tn):(sr.mixStoreToken=xn,sr.getMixStoreToken=function(Xr,Vn){Mr.getMixStoreToken({curProvider:Xr,policyVersion:sr.policyVersion,responseBody:Tr,callback:function(Zr,Nn){Zr?sr.done(Zr):Vn(Nn)}})},sr.curProvider===1&&(sr.nosToken=xn),Mr._doPreviewFile(sr,xr))}).call(Qr,Mr)})}else this._doPreviewFile(sr,xr)}).call(Nr,this)})},lr._doPreviewFile=function(sr,xr){var Nr=this;sr=nr.merge(sr,Nr.options.providers);var Mr=gr.genUploadUrl(sr.nosToken.bucket);sr.mixEnable&&sr.curProvider===1&&(Mr=gr.genUploadUrl(sr.mixStoreToken.bucket));var br,yr=gr.chunkUploadUrl;Nr.logger.info("_doPreviewFile: start upload"),sr.commonUpload||!yr||gr.isWeixinApp||gr.isNodejs||gr.isRN?(sr.commonUpload=!0,br=Mr):(br=yr,sr.nosLbsUrls=gr.nosLbsUrls,Nr.options.edgeList?sr.edgeList=Nr.options.edgeList:sr.updateNosEdgeList=function(qr){Nr.options.edgeList=qr}),Nr.protocol.reporterHook.emit("reporter/uploadStart");var Tr=this.assembleUploadParams(sr.nosToken);sr.mixEnable&&sr.curProvider===1&&(Tr=this.assembleUploadParams(sr.mixStoreToken));function Br(qr,Vr,Qr,Tn){if(qr){var xn=nr.get(qr,"msg.message")||nr.get(qr,"message")||"Unknown error message",Xr=nr.get(qr,"msg.code")||nr.get(qr,"code")||"Unknown error code";Nr.logger.error("_doPreviewFile: upload done, failed ",Xr,xn),Nr.protocol.reporterHook.emit("reporter/uploadEnd",qr.code==="RequestAbortedError"||qr.code==="abort"?Sr.kCanceled:Sr.kFailed);var Vn=V({},Tn||xr,{status:"fail"}),Zr=dr(dr({},sr.callback.options),{},{msg:Vn});return sr.uploaddone&&sr.uploaddone(qr,Zr,Vn),void sr.done(qr,sr.callback.options)}if(Nr.logger.info("_doPreviewFile: upload done, success"),Nr.protocol.reporterHook.emit("reporter/uploadEnd",Sr.kSucceed),sr.uploaddone&&sr.uploaddone(null,nr.copy(Vr),Tn||xr),Vr=pr.parseResponse(Vr,Nr.options.exifOrientation),Qr||Vr.isS3||(Vr.url=gr.genDownloadUrl(sr.nosToken,Tr.Object,gr.serverNosConfig.cdnDomain),sr.nosToken.shortUrl&&(Vr._url_safe=sr.nosToken.shortUrl)),nr.exist(sr.fileInputName))Vr.name=sr.fileInputName;else if(sr.blob){var Nn=sr.blob.name;if(Vr.name=Nn||"blob-"+Vr.md5,!Nn){var Jr=sr.blob.type;Vr.ext=y(Jr).call(Jr,i(Jr).call(Jr,"/")+1)}}else sr.filePath?Vr.name=sr.filePath:sr.fileObject&&(Vr.name=sr.fileObject.fileName);if(!Vr.ext){var wn,Un,_n=i(wn=Vr.name).call(wn,".");_n===-1?Vr.ext="unknown":Vr.ext=y(Un=Vr.name).call(Un,_n+1)}Vr.size=Vr.size||0,Vr.isS3&&Vr._url_safe?Nr.getNosOriginUrl({safeShortUrl:Vr._url_safe,done:function(Pn,Cn){Pn?Nr.logger.error("error:","getNosOriginUrl failed",Pn):(Vr.url=Cn,sr.done(null,nr.copy(Vr)))}}):sr.done(null,nr.copy(Vr))}if(gr.isWeixinApp)nr.verifyOptions(sr,"filePath","msg::_doPreviewFile"),Nr.fileQuickTransfer(sr,Br,function(){var qr=wx.uploadFile({url:br,filePath:sr.filePath,name:"file",formData:Tr,fail:function(Vr){Br({code:"FAILED",msg:Vr}),Nr.logger.error("error:","api::msg:upload file failed",Vr)},success:function(Vr){if(Vr.statusCode===200)try{Br(null,JSON.parse(Vr.data))}catch(Qr){Nr.logger.error("error:","parse wx upload file res error",Qr),Br({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:Vr.data,msg:Vr.errMsg})}else Br({code:Vr.statusCode,msg:Vr.errMsg})}});typeof sr.uploadprogress=="function"&&qr&&(sr.beginupload(qr,xr),Nr.logger.info("_doPreviewFile::mini uploadprogress"),qr.onProgressUpdate(function(Vr){sr.uploadprogress({total:Vr.totalBytesExpectedToSend,loaded:Vr.totalBytesSent,percentage:Vr.progress,percentageText:Vr.progress+"%"},xr)}))});else if(gr.isNodejs){var Lr={url:br,name:"file",formData:Tr,success:function(qr){if(qr.statusCode===200)try{Br(null,JSON.parse(qr.data))}catch(Vr){Nr.protocol.logger.error("error:","parse nodejs upload file res error",Vr),Br({code:"PARSE_NODEJS_UPLOAD_FILE_RES_ERROR",str:qr.data,msg:qr.errMsg})}else Br({code:qr.statusCode,msg:qr.errMsg})},fail:function(qr){Br({code:"FAILED",msg:qr}),Nr.protocol.logger.error("error:","api::msg:upload file failed",qr)}};if(sr.filePath)Lr.filePath=sr.filePath;else{if(n(sr.fileObject)!=="object")throw new ar("Nodejs上传fileObject参数类型应如 {fileName:..,fileData:..} ");Lr.fileData=sr.fileObject.fileData}Nr.fileQuickTransfer(sr,Br,function(){hr.uploadFile(Lr)})}else if(gr.isRN){var Fr={url:br,name:"file",formData:Tr,filePath:sr.filePath,success:function(qr){if(qr.ok&&qr.status===200)try{var Vr=$(qr.headers)&&$(qr.headers).etag;qr.md5=Vr?typeof Vr=="string"?Vr:Vr[0]:"UNKNOWN",Br(null,qr)}catch(Qr){Nr.protocol.logger.error("error:","parse React Native upload file res error",Qr),Br({code:"PARSE_React_Native_UPLOAD_FILE_RES_ERROR",res:qr})}else Br({code:qr.status,msg:qr.statusText})},fail:function(qr){Br({code:"FAILED",msg:qr}),Nr.protocol.logger.error("error:","api::msg:upload file failed",qr)}};Nr.fileQuickTransfer(sr,Br,function(){hr.uploadFile(Fr)})}else sr.url=br,sr.params=Tr,sr.fileName="file",Nr.fileQuickTransfer(sr,Br,function(){return Nr.protocol.adaptersUploadFile(V({},sr,{uploaddone:Br}),xr)})},lr.fileQuickTransfer=function(sr,xr,Nr){var Mr,br=this;sr=sr||{},xr instanceof Function||(xr=function(){}),Nr instanceof Function||(Nr=function(){});var yr=sr.fastPass;if(yr)try{yr=JSON.parse(yr),sr.fastPass=yr}catch{br.protocol.logger.error("快传参数解析失败")}var Tr=sr.fileInputName||sr.name||sr.blob&&sr.blob.name||"",Br=sr.fileSize||sr.size||sr.blob&&sr.blob.size||0,Lr=yr?z(Mr=(yr.md5||sr.digest||"")+"").call(Mr):"",Fr=sr.type||sr.blob&&sr.blob.type;if(Lr&&Br>=gr.threshold){var qr=!0,Vr={name:Tr,md5:Lr,ext:y(Tr).call(Tr,i(Tr).call(Tr,".")+1),type:Fr};switch(Fr){case"image":yr&&yr.w&&yr.h?(Vr.w=yr.w,Vr.h=yr.h):(qr=!1,br.protocol.logger.error("快传 image 文件缺少参数 w 或 h"));break;case"video":yr&&yr.w&&yr.h&&yr.dur?(Vr.w=yr.w,Vr.h=yr.h,Vr.dur=yr.dur):(qr=!1,br.protocol.logger.error("快传 video 文件缺少参数 w 或 h 或 dur"));break;case"audio":yr&&yr.dur?Vr.dur=yr.dur:(qr=!1,br.protocol.logger.error("快传 audio 文件缺少参数 dur"))}if(!qr)return void Nr();var Qr={fileQuickTransfer:{md5:Lr}};return Br&&(Qr.fileQuickTransfer.size=Br),this.protocol.sendCmd("fileQuickTransfer",Qr,function(Tn,xn,Xr){!Tn&&Xr&&Xr.fileQuickTransfer&&Xr.fileQuickTransfer.url||(br.protocol.logger.error("misc::fileQuickTransfer: not found",Tn,xn),Nr()),Xr&&Xr.fileQuickTransfer&&Xr.fileQuickTransfer.threshold&&(gr.threshold=Xr.fileQuickTransfer.threshold||0),Xr&&Xr.fileQuickTransfer&&Xr.fileQuickTransfer.url&&(Vr.size=Br||Xr.fileQuickTransfer.size,Vr.url=Xr.fileQuickTransfer.url,Xr.fileQuickTransfer._url_safe&&(Vr._url_safe=Xr.fileQuickTransfer._url_safe),xr(Tn,Vr,!0))})}Nr()},lr.sendFile=function(sr){if((sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendFile",done:sr.done}),sr.type||(sr.type="file"),sr=nr.merge(sr,this.options.providers),nr.verifyParamPresentJustOne(sr,"dataURL blob fileInput file filePath wxFilePath fileObject","msg::sendFile"),nr.exist(sr.maxSize)&&nr.verifyParamType("maxSize",sr.maxSize,"number","api::previewFile"),nr.exist(sr.commonUpload)&&nr.verifyParamType("commonUpload",sr.commonUpload,"boolean","api::previewFile"),this.processCallback(sr),sr.filePath=sr.filePath||sr.wxFilePath,delete sr.wxFilePath,sr.dataURL)return this._previewAndSendFile(sr);if(sr.blob)return this._previewAndSendFile(sr);if(sr.fileInput)return sr.fileInput=nr.verifyFileInput(sr.fileInput,"msg::sendFile"),sr.fileInput.files&&!sr.fileInput.files.length?void sr.done(ar.newNoFileError("请选择"+sr.type+"文件",{callFunc:"msg::sendFile",fileInput:sr.fileInput}),sr.callback.options):this._previewAndSendFile(sr);if(sr.filePath||sr.fileObject)return this._previewAndSendFile(sr);if(sr.file){var xr,Nr=sr.file._url_safe;return Nr&&(xr=sr.file.url,sr.file.url=Nr,delete sr.file._url_safe),sr.msg=new this.message.FileMessage(sr),this.sendMsg(sr,xr)}},lr._previewAndSendFile=function(sr){var xr=this;nr.verifyCallback(sr,"uploaddone beforesend","msg::_previewAndSendFile");var Nr=dr({},sr),Mr=new xr.message.Message(Nr);Mr.type=sr.type;var br=xr.formatReturnMsg(Mr),yr=xr.protocol.reporterHook.getSafeClock(),Tr={apiCallingTime:xr.protocol.reporterHook.getNTPTime(yr),attachUploadDuration:0},Br=sr.done;return sr.done=function(Lr,Fr){if(sr.done=Br,Lr){var qr=V({},br,{status:"fail"}),Vr=dr(dr({},sr.callback.options),{},{msg:qr});sr.done(Lr,Vr)}else{if(Tr.attachUploadDuration=xr.protocol.reporterHook.getSafeClock()-yr,/chatroom/.test(sr.scene))return;var Qr,Tn=Fr._url_safe;Tn&&!Fr.isS3&&(Qr=Fr.url,Fr.url=Tn,delete Fr._url_safe),sr.file=Fr,sr.msg=new xr.message.FileMessage(sr,Mr.idClient),sr.beforesend(xr.sendMsg(sr,Qr,Tr))}},xr.previewFile(sr,br),br},lr.assembleUploadParams=function(sr){return sr?{Object:decodeURIComponent(sr.objectName),"x-nos-token":sr.token,"x-nos-entity-type":"json"}:null},lr.deleteFile=function(sr){_r({instance:this,className:"ApiBaseFn",funcName:"deleteFile",hasCallback:!1}),nr.verifyParamPresentJustOne(sr,"docId","msg::deleteFile"),this.removeFile({docId:sr.docId,callback:function(xr,Nr){xr?sr.error&&sr.error(xr,Nr):sr.success&&sr.success(Nr)}})},lr.getFile=function(sr){_r({instance:this,className:"ApiBaseFn",funcName:"getFile",hasCallback:!1}),nr.verifyParamPresentJustOne(sr,"docId","msg::getFile"),this.fetchFile({docId:sr.docId,callback:function(xr,Nr){xr?sr.error&&sr.error(xr,Nr):sr.success&&sr.success(Nr.info)}})},lr.getFileList=function(sr){_r({instance:this,className:"ApiBaseFn",funcName:"getFileList",hasCallback:!1});var xr=sr.fromDocId,Nr=xr===void 0?"":xr,Mr=sr.limit,br=Mr===void 0?10:Mr,yr={limit:br};Nr&&(yr.fromDocId=Nr),this.fetchFileList({fileListParam:yr,callback:function(Tr,Br){Tr?(br>30&&(Tr.message=Tr.message+"::文档条数超过限制:30"),sr.error&&sr.error(Tr,Br)):sr.success&&sr.success(Br)}})},lr.sendGeo=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendGeo",done:sr.done}),this.processCallback(sr),sr.msg=new this.message.GeoMessage(sr),this.sendMsg(sr)},lr.sendTipMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendTipMsg",done:sr.done}),this.processCallback(sr),sr.msg=new this.message.TipMessage(sr),this.sendMsg(sr)},lr.sendCustomMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendCustomMsg",done:sr.done}),this.processCallback(sr),sr.msg=new this.message.CustomMessage(sr),this.sendMsg(sr)},lr.sendRobotMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"sendRobotMsg",done:sr.done}),this.logger.warn("this api will be abandon"),this.processCallback(sr),sr.msg=new this.message.RobotMessage(sr),this.sendMsg(sr)},lr.sendMsg=function(sr,xr,Nr){var Mr=this,br=Mr.protocol,yr=sr.msg,Tr={};Nr=Nr||{apiCallingTime:br.reporterHook.getNTPTime(),attachUploadDuration:0};var Br,Lr=!!sr.isLocal;if(this.logger.warn("sendMsg::start: "+yr.idClient),Lr&&(sr.time&&(yr.time=sr.time),sr.idClient&&(yr.idClient=sr.idClient),sr.localFrom&&(Br=sr.localFrom+"")),sr.resend&&(sr.flow!=="out"||sr.status!=="fail"))return nr.onError("只能重发发送失败的消息");sr.callback.options.idClient=yr.idClient,Mr.beforeSendMsg(sr,Tr);var Fr=sr.rtnMsg=Mr.formatReturnMsg(yr,Br);if(xr&&!Mr.options.keepNosSafeUrl&&Fr.file&&(Fr.file._url_safe=Fr.file.url,Fr.file.url=xr,Fr.type==="audio"&&(Fr.file.mp3Url=xr+(~re(xr).call(xr,"?")?"&":"?")+"audioTrans&type=mp3")),Fr.hasOwnProperty("chatroomId")&&!Fr.chatroomId)return nr.onError("聊天室未连接");if(Lr&&(Fr.status="success",Fr.isLocal=!0),br.storeSendMsg&&(Tr.promise=br.storeSendMsg(Fr)),sr.cbaop=function(Vr,Qr){if(Vr)return Vr.code===7101&&(Fr.isInBlackList=!0,Fr.idServer=Qr.idServer,Fr.time=Qr.time),Vr.from!=="server"?(Fr.status="fail",br.updateSendMsgError&&br.updateSendMsgError(Fr),Fr):void 0},!Lr){xr&&!Mr.options.keepNosSafeUrl&&sr.callback&&(sr.callback.originUrl=xr),sr.toAccids&&sr.toAccids.length&&(yr.toAccids=k(sr.toAccids)),Tr.msg=yr,Nr.sendTime=br.reporterHook.getNTPTime(),br.reporterHook.hasOriginTimetick()&&(Tr.msg.__clientExt=k({statistics:Nr}));var qr=yr;Mr.sendCmd(sr.cmd,Tr,function(){if(gr.isBrowser){var Vr=arguments[0],Qr=arguments[1]||{},Tn=Mr.subType==="chatroom",xn=qr.scene===0,Xr=br.reporterHook.getNTPTime(),Vn={msgId:Qr.idServer,clientId:qr.idClient,msgTime:Qr.time||0,fromAccid:Mr.account,toAccid:xn?qr.to:"",type:Tn?4:qr.scene,roomId:Tn?Mr.options.chatroomId:"",tid:Tn||xn?"":qr.to,result:Vr?Vr.code:200,failReason:Vr?Vr.message:"",rt:oe(Xr-Nr.apiCallingTime),apiCallingTime:Nr.apiCallingTime,sendTime:Nr.sendTime,attachUploadDuration:Nr.attachUploadDuration,apiCallbackTime:Xr};Mr.reporter&&Mr.reporter.report("msgSend",Vn)}sr.callback&&sr.callback.apply(Mr,arguments);var Zr=arguments[0],Nn=arguments[1];!Zr&&Nn&&Nn.from===Nn.to&&Mr.protocol.markMsgRead(Nn)})}return Mr.afterSendMsg(sr),Lr&&le(function(){Fr=nr.simpleClone(Fr),sr.done(null,Fr)},0),nr.copy(Fr)},lr.beforeSendMsg=function(){},lr.afterSendMsg=function(){},lr.formatReturnMsg=function(sr,xr){var Nr;return sr=nr.copy(sr),this.protocol.completeMsg(sr),sr.status="sending",xr&&(sr.from=xr),sr=ue(Nr=this.message).call(Nr,sr),sr=this.protocol.amendMsg(sr)},lr.resendMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"resendMsg",done:sr.done}),nr.verifyOptions(sr,"msg","msg::resendMsg"),this.trimMsgFlag(sr),sr.resend=!0,this._sendMsgByType(sr)},lr.forwardMsg=function(sr){return(sr=sr||{}).done=_r({instance:this,className:"ApiBaseFn",funcName:"forwardMsg",done:sr.done}),nr.verifyOptions(sr,"msg","msg::forwardMsg"),this.trimMsgFlag(sr),this.beforeForwardMsg(sr),sr.forward=!0,sr.msg.idClient=nr.guid(),this._sendMsgByType(sr)},lr.trimMsgFlag=function(sr){sr&&sr.msg&&(sr.msg=nr.copy(sr.msg),delete sr.msg.resend,delete sr.msg.forward)},lr.beforeForwardMsg=function(){},lr._sendMsgByType=function(sr){switch(nr.verifyOptions(sr,"msg","msg::_sendMsgByType"),nr.verifyParamValid("msg.type",sr.msg.type,this.message.validTypes,"msg::_sendMsgByType"),nr.merge(sr,sr.msg),sr.type){case"text":return this.sendText(sr);case"image":case"audio":case"video":case"file":return this.sendFile(sr);case"geo":return this.sendGeo(sr);case"custom":return this.sendCustomMsg(sr);case"tip":return this.sendTipMsg(sr);default:throw new ar("不能发送类型为 "+sr.type+" 的消息")}},lr.parseRobotTemplate=function(sr){if(this.logger.warn("this api will be abandon"),/<template[^>/]+\/>/.test(sr))return{raw:sr,json:[{type:"text",name:"",text:""}]};if(!/<template[^>/]+>/.test(sr))return{raw:sr,json:[{type:"text",name:"",text:sr}]};var xr=new ur({escapeMode:!1});sr=sr.replace(/<template [^>]+>/,"<template>");var Nr=xr.xml2js(sr);Nr=Nr.template.LinearLayout,ie(Nr)||(Nr=[Nr]);var Mr=[];return Nr=ae(Nr).call(Nr,function(Tr){Tr.image&&(Mr=g(Mr).call(Mr,yr(Tr))),Tr.text&&(Mr=g(Mr).call(Mr,br(Tr))),Tr.link&&(Mr=g(Mr).call(Mr,function(Br){if(Br.link){var Lr=Br.link;ie(Lr)||(Lr=[Lr]),Lr=$(Lr).call(Lr,function(Fr){return Fr.image&&(Fr.image=yr(Fr)),Fr.text&&(Fr.text=br(Fr)),Fr._type==="url"?(Fr.type="url",Fr.style=Fr._style||"",Fr.target=Fr._target,delete Fr._target,delete Fr._style):Fr._type==="block"&&(Fr.type="block",Fr.style=Fr._style||"",Fr.params=Fr._params||"",Fr.target=Fr._target,delete Fr._params,delete Fr._target,delete Fr._style),delete Fr._type,Fr}),Br.link=Lr}return Br.link}(Tr)))}),{raw:sr,json:Mr};function br(Tr){var Br;return ie(Tr.text)||(Tr.text=[Tr.text]),Tr.text=$(Br=Tr.text).call(Br,function(Lr){return{type:"text",name:Lr._name,text:Lr.__text}}),Tr.text}function yr(Tr){var Br;return ie(Tr.image)||(Tr.image=[Tr.image]),Tr.image=$(Br=Tr.image).call(Br,function(Lr){return{type:"image",name:Lr._name,url:Lr._url}}),Tr.image}}},function(t,r,e){e(597);var n=e(14);t.exports=n.Object.assign},function(t,r,e){var n=e(1),g=e(598);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==g},{assign:g})},function(t,r,e){var n=e(29),g=e(13),y=e(20),i=e(7),k=e(124),L=e(136),$=e(157),V=e(46),z=e(129),re=Object.assign,oe=Object.defineProperty,le=g([].concat);t.exports=!re||i(function(){if(n&&re({b:1},re(oe({},"a",{enumerable:!0,get:function(){oe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var ue={},ie={},ae=Symbol();return ue[ae]=7,"abcdefghijklmnopqrst".split("").forEach(function(Fe){ie[Fe]=Fe}),re({},ue)[ae]!=7||k(re({},ie)).join("")!="abcdefghijklmnopqrst"})?function(ue,ie){for(var ae=V(ue),Fe=arguments.length,de=1,Ie=L.f,Ve=$.f;Fe>de;)for(var kt,At=z(arguments[de++]),ze=Ie?le(k(At),Ie(At)):k(At),Et=ze.length,cr=0;Et>cr;)kt=ze[cr++],n&&!y(Ve,At,kt)||(ae[kt]=At[kt]);return ae}:re},function(t,r,e){var n=e(18),g=e(600),y=Array.prototype;t.exports=function(i){var k=i.reverse;return i===y||n(y,i)&&k===y.reverse?g:k}},function(t,r,e){e(601);var n=e(27);t.exports=n("Array").reverse},function(t,r,e){var n=e(1),g=e(13),y=e(87),i=g([].reverse),k=[1,2];n({target:"Array",proto:!0,forced:String(k)===String(k.reverse())},{reverse:function(){return y(this)&&(this.length=this.length),i(this)}})},function(t,r,e){t.exports=e(603)},function(t,r,e){t.exports=e(604)},function(t,r,e){var n=e(605);t.exports=n},function(t,r,e){var n=e(262);t.exports=n},function(t,r,e){t.exports=e(607)},function(t,r,e){var n=e(608);t.exports=n},function(t,r,e){var n=e(211);t.exports=n},function(t,r,e){var n=e(610),g=e(194);t.exports=function(y,i){if(y==null)return{};var k,L,$={},V=n(y);for(L=0;L<V.length;L++)k=V[L],g(i).call(i,k)>=0||($[k]=y[k]);return $},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(611)},function(t,r,e){t.exports=e(612)},function(t,r,e){var n=e(613);t.exports=n},function(t,r,e){var n=e(237);t.exports=n},function(t,r,e){var n,g,y;(function(i,k){g=[],(y=typeof(n=function(L){return function($){($=$||{}).arrayAccessForm=$.arrayAccessForm||"none",$.emptyNodeForm=$.emptyNodeForm||"text",$.jsAttributeFilter=$.jsAttributeFilter,$.jsAttributeConverter=$.jsAttributeConverter,$.attributeConverters=$.attributeConverters||[],$.datetimeAccessFormPaths=$.datetimeAccessFormPaths||[],$.arrayAccessFormPaths=$.arrayAccessFormPaths||[],$.xmldomOptions=$.xmldomOptions||{},$.enableToStringFunc===void 0&&($.enableToStringFunc=!0),$.skipEmptyTextNodesForObj===void 0&&($.skipEmptyTextNodesForObj=!0),$.stripWhitespaces===void 0&&($.stripWhitespaces=!0),$.useDoubleQuotes===void 0&&($.useDoubleQuotes=!0),$.ignoreRoot===void 0&&($.ignoreRoot=!1),$.escapeMode===void 0&&($.escapeMode=!0),$.attributePrefix===void 0&&($.attributePrefix="_"),$.selfClosingElements===void 0&&($.selfClosingElements=!0),$.keepCData===void 0&&($.keepCData=!1),$.keepText===void 0&&($.keepText=!1),$.jsDateUTC===void 0&&($.jsDateUTC=!1),function(){function lr(nr){var ur=String(nr);return ur.length===1&&(ur="0"+ur),ur}typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),typeof Date.prototype.toISOString!="function"&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+lr(this.getUTCMonth()+1)+"-"+lr(this.getUTCDate())+"T"+lr(this.getUTCHours())+":"+lr(this.getUTCMinutes())+":"+lr(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var V=1,z=3,re=4,oe=8,le=9;function ue(lr){var nr=lr.localName;return nr==null&&(nr=lr.baseName),nr!=null&&nr!==""||(nr=lr.nodeName),nr}function ie(lr){return typeof lr=="string"?lr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):lr}function ae(lr,nr,ur){switch($.arrayAccessForm){case"property":lr[nr]instanceof Array?lr[nr+"_asArray"]=lr[nr]:lr[nr+"_asArray"]=[lr[nr]]}if(!(lr[nr]instanceof Array)&&$.arrayAccessFormPaths.length>0){for(var ar=!1,gr=0;gr<$.arrayAccessFormPaths.length;gr++){var pr=$.arrayAccessFormPaths[gr];if(typeof pr=="string"){if(pr===ur){ar=!0;break}}else if(pr instanceof RegExp){if(pr.test(ur)){ar=!0;break}}else if(typeof pr=="function"&&pr(nr,ur)){ar=!0;break}}ar&&(lr[nr]=[lr[nr]])}}function Fe(lr){var nr=lr.split(/[-T:+Z]/g),ur=new Date(nr[0],nr[1]-1,nr[2]),ar=nr[5].split(".");if(ur.setHours(nr[3],nr[4],ar[0]),ar.length>1&&ur.setMilliseconds(ar[1]),nr[6]&&nr[7]){var gr=60*nr[6]+Number(nr[7]);gr=0+((/\d\d-\d\d:\d\d$/.test(lr)?"-":"+")=="-"?-1*gr:gr),ur.setMinutes(ur.getMinutes()-gr-ur.getTimezoneOffset())}else lr.indexOf("Z",lr.length-1)!==-1&&(ur=new Date(Date.UTC(ur.getFullYear(),ur.getMonth(),ur.getDate(),ur.getHours(),ur.getMinutes(),ur.getSeconds(),ur.getMilliseconds())));return ur}function de(lr,nr){for(var ur={__cnt:0},ar=lr.childNodes,gr=0;gr<ar.length;gr++){var pr=ar.item(gr),hr=ue(pr);pr.nodeType!==oe&&(ur.__cnt++,ur[hr]==null?(ur[hr]=Ie(pr,nr+"."+hr),ae(ur,hr,nr+"."+hr)):(ur[hr]instanceof Array||(ur[hr]=[ur[hr]],ae(ur,hr,nr+"."+hr)),ur[hr][ur[hr].length]=Ie(pr,nr+"."+hr)))}for(var Cr=0;Cr<lr.attributes.length;Cr++){var wr=lr.attributes.item(Cr);ur.__cnt++;for(var Sr=wr.value,mr=0;mr<$.attributeConverters.length;mr++){var _r=$.attributeConverters[mr];_r.test.call(null,wr.name,wr.value)&&(Sr=_r.convert.call(null,wr.name,wr.value))}ur[$.attributePrefix+wr.name]=Sr}var Ar=lr.prefix;return Ar&&(ur.__cnt++,ur.__prefix=Ar),ur["#text"]&&(ur.__text=ur["#text"],ur.__text instanceof Array&&(ur.__text=ur.__text.join(`
`)),$.escapeMode&&(ur.__text=ur.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),$.stripWhitespaces&&(ur.__text=ur.__text.trim()),delete ur["#text"],$.arrayAccessForm==="property"&&delete ur["#text_asArray"],ur.__text=function(Er,sr,xr){if($.datetimeAccessFormPaths.length>0)for(var Nr=xr.split(".#")[0],Mr=0;Mr<$.datetimeAccessFormPaths.length;Mr++){var br=$.datetimeAccessFormPaths[Mr];if(typeof br=="string"){if(br===Nr)return Fe(Er)}else if(br instanceof RegExp){if(br.test(Nr))return Fe(Er)}else if(typeof br=="function"&&br(Nr))return Fe(Er)}return Er}(ur.__text,0,nr+".#text")),ur.hasOwnProperty("#cdata-section")&&(ur.__cdata=ur["#cdata-section"],delete ur["#cdata-section"],$.arrayAccessForm==="property"&&delete ur["#cdata-section_asArray"]),ur.__cnt===1&&ur.__text&&!$.keepText?ur=ur.__text:ur.__cnt===0&&$.emptyNodeForm==="text"?ur="":ur.__cnt>1&&ur.__text!==void 0&&$.skipEmptyTextNodesForObj&&($.stripWhitespaces&&ur.__text===""||ur.__text.trim()==="")&&delete ur.__text,delete ur.__cnt,$.keepCData||ur.hasOwnProperty("__text")||!ur.hasOwnProperty("__cdata")||Object.keys(ur).length!==1?($.enableToStringFunc&&(ur.__text||ur.__cdata)&&(ur.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),ur):ur.__cdata?ur.__cdata:""}function Ie(lr,nr){return lr.nodeType===le?function(ur){for(var ar={},gr=ur.childNodes,pr=0;pr<gr.length;pr++){var hr=gr.item(pr);if(hr.nodeType===V){var Cr=ue(hr);$.ignoreRoot?ar=Ie(hr,Cr):ar[Cr]=Ie(hr,Cr)}}return ar}(lr):lr.nodeType===V?de(lr,nr):lr.nodeType===z||lr.nodeType===re?lr.nodeValue:null}function Ve(lr,nr,ur,ar){var gr="<"+(lr&&lr.__prefix?lr.__prefix+":":"")+nr;if(ur)for(var pr=0;pr<ur.length;pr++){var hr=ur[pr],Cr=lr[hr];$.escapeMode&&(Cr=ie(Cr)),gr+=" "+hr.substr($.attributePrefix.length)+"=",$.useDoubleQuotes?gr+='"'+Cr+'"':gr+="'"+Cr+"'"}return gr+=ar?" />":">"}function kt(lr,nr){return"</"+(lr&&lr.__prefix?lr.__prefix+":":"")+nr+">"}function At(lr,nr){return $.arrayAccessForm==="property"&&(ur=nr.toString(),ar="_asArray",ur.indexOf(ar,ur.length-ar.length)!==-1)||nr.toString().indexOf($.attributePrefix)===0||nr.toString().indexOf("__")===0||lr[nr]instanceof Function;var ur,ar}function ze(lr){var nr=0;if(lr instanceof Object)for(var ur in lr)At(lr,ur)||nr++;return nr}function Et(lr){var nr=[];if(lr instanceof Object)for(var ur in lr)ur.toString().indexOf("__")===-1&&ur.toString().indexOf($.attributePrefix)===0&&nr.push(ur);return nr}function cr(lr){var nr="";return lr instanceof Object?nr+=function(ur){var ar="";return ur.__cdata&&(ar+="<![CDATA["+ur.__cdata+"]]>"),(ur.__text||typeof ur.__text=="number"||typeof ur.__text=="boolean")&&($.escapeMode?ar+=ie(ur.__text):ar+=ur.__text),ar}(lr):lr!==null&&($.escapeMode?nr+=ie(lr):nr+=lr),nr}function er(lr,nr,ur){var ar="";return $.jsAttributeFilter&&$.jsAttributeFilter.call(null,nr,lr)||($.jsAttributeConverter&&(lr=$.jsAttributeConverter.call(null,nr,lr)),lr!=null&&lr!==""||!$.selfClosingElements?typeof lr=="object"?Object.prototype.toString.call(lr)==="[object Array]"?ar+=function(gr,pr,hr){var Cr="";if(gr.length===0)Cr+=Ve(gr,pr,hr,!0);else for(var wr=0;wr<gr.length;wr++)Cr+=er(gr[wr],pr,Et(gr[wr]));return Cr}(lr,nr,ur):lr instanceof Date?(ar+=Ve(lr,nr,ur,!1),ar+=$.jsDateUTC?lr.toUTCString():lr.toISOString(),ar+=kt(lr,nr)):ze(lr)>0||typeof lr.__text=="number"||typeof lr.__text=="boolean"||lr.__text||lr.__cdata?(ar+=Ve(lr,nr,ur,!1),ar+=or(lr),ar+=kt(lr,nr)):$.selfClosingElements?ar+=Ve(lr,nr,ur,!0):(ar+=Ve(lr,nr,ur,!1),ar+=kt(lr,nr)):(ar+=Ve(lr,nr,ur,!1),ar+=cr(lr),ar+=kt(lr,nr)):ar+=Ve(lr,nr,ur,!0)),ar}function or(lr){var nr="";if(ze(lr)>0){for(var ur in lr)if(!At(lr,ur)){var ar=lr[ur];nr+=er(ar,ur,Et(ar))}}return nr+=cr(lr)}function dr(lr){if(lr===void 0||typeof lr!="string")return null;var nr=null,ur=null;if(L)ur=(nr=new L($.xmldomOptions)).parseFromString(lr,"text/xml");else if(window&&window.DOMParser){nr=new window.DOMParser;var ar=null;if(!(window.ActiveXObject||"ActiveXObject"in window)&&document.all&&!document.addEventListener)try{ar=nr.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch{ar=null}try{ur=nr.parseFromString(lr,"text/xml"),ar!==null&&ur.getElementsByTagNameNS(ar,"parsererror").length>0&&(ur=null)}catch{ur=null}}else lr.indexOf("<?")===0&&(lr=lr.substr(lr.indexOf("?>")+2)),(ur=new ActiveXObject("Microsoft.XMLDOM")).async="false",ur.loadXML(lr);return ur}this.asArray=function(lr){return lr==null?[]:lr instanceof Array?lr:[lr]},this.toXmlDateTime=function(lr){return lr instanceof Date?lr.toISOString():typeof lr=="number"?new Date(lr).toISOString():null},this.asDateTime=function(lr){return typeof lr=="string"?Fe(lr):lr},this.xml2dom=function(lr){return dr(lr)},this.dom2js=function(lr){return Ie(lr,null)},this.js2dom=function(lr){return dr(this.js2xml(lr))},this.xml2js=function(lr){var nr=dr(lr);return nr!=null?this.dom2js(nr):null},this.js2xml=function(lr){return or(lr)},this.getVersion=function(){return"3.4.4"}}})=="function"?n.apply(r,g):n)===void 0||(t.exports=y)})()},function(t,r,e){var n=e(616);t.exports=n},function(t,r,e){var n=e(18),g=e(617),y=e(619),i=Array.prototype,k=String.prototype;t.exports=function(L){var $=L.includes;return L===i||n(i,L)&&$===i.includes?g:typeof L=="string"||L===k||n(k,L)&&$===k.includes?y:$}},function(t,r,e){e(618);var n=e(27);t.exports=n("Array").includes},function(t,r,e){var n=e(1),g=e(170).includes,y=e(7),i=e(163);n({target:"Array",proto:!0,forced:y(function(){return!Array(1).includes()})},{includes:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,r,e){e(620);var n=e(27);t.exports=n("String").includes},function(t,r,e){var n=e(1),g=e(13),y=e(621),i=e(112),k=e(58),L=e(623),$=g("".indexOf);n({target:"String",proto:!0,forced:!L("includes")},{includes:function(V){return!!~$(k(i(this)),k(y(V)),arguments.length>1?arguments[1]:void 0)}})},function(t,r,e){var n=e(622),g=TypeError;t.exports=function(y){if(n(y))throw g("The method doesn't accept regular expressions");return y}},function(t,r,e){var n=e(30),g=e(71),y=e(21)("match");t.exports=function(i){var k;return n(i)&&((k=i[y])!==void 0?!!k:g(i)=="RegExp")}},function(t,r,e){var n=e(21)("match");t.exports=function(g){var y=/./;try{"/./"[g](y)}catch{try{return y[n]=!1,"/./"[g](y)}catch{}}return!1}},function(t,r,e){var n=e(92);t.exports=function(g,y){return y.method="POST",y.headers=y.headers||{},y.headers["Content-Type"]="multipart/form-data",y.timeout=0,y.type=y.type||"json",n(g,y)}},function(t,r,e){var n=e(9),g=e(43),y=e(4),i=e(8),k=e(3),L=e(12),$=L.chunkSize,V=e(92),z=e(35).formatError,re={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};t.exports=function oe(le,ue,ie,ae){ie&&ie.protocol&&(ie.protocol.cloudStorage=ie.protocol.cloudStorage||{},ie.protocol.cloudStorage.uploadCache=ie.protocol.cloudStorage.uploadCache||{});var Fe={file:le.data[ue],fileSize:le.data[ue].size,fileUploadedSize:0,percentage:0},de=Fe.file,Ie="";de&&de.name&&de.lastModified&&de.size&&(Ie=de.name+"_"+de.lastModified+"_"+de.size);var Ve=le.url;function kt(nr){var ur=Fe.fileUploadedSize+nr.loaded,ar=Math.floor(1e4*ur/Fe.fileSize)/100;if(g(ar)>=100&&(ar=100,kt=function(){}),Fe.percentage!==ar){Fe.percentage=ar;var gr={docId:le.docId,total:Fe.fileSize,loaded:ur,percentage:ar,percentageText:ar+"%"};le.fileInput&&(gr.fileInput=le.fileInput),le.blob&&(gr.blob=le.blob),le.uploadprogress(gr)}}function At(nr){try{nr=JSON.parse(nr)}catch{var ur;return void ie.onError({code:"JSON_PARSE_ERROR",message:y(ur="parse chunk upload result error. url: ".concat(Ve,". body: ")).call(ur,nr)})}if(nr&&(nr.errMsg||nr.errCode))ie.onError(z(nr,{fallbackCode:"CHUNK_UPLOAD_FAIL",fallbackMessage:"chunk upload failed.",suffix:"chunk upload onload error. url: ".concat(Ve)}));else if(nr.offset<Fe.fileSize)delete er.onaftersend,Fe.fileUploadedSize=nr.offset,function(pr,hr,Cr,wr){var Sr=pr.offset,mr=pr.offset+$;if(typeof FileReader<"u"){var _r,Ar=new FileReader;Ar.readAsArrayBuffer(n(_r=wr.file).call(_r,Sr,mr)),Ar.addEventListener("load",function(sr){hr.data=sr.target.result,hr.query.offset=pr.offset,hr.query.complete=mr>=wr.fileSize,hr.query.context=pr.context,hr.onuploading=kt,hr.onload=At,hr.onerror=ze,ie.sn=V(Ve,hr),ie.protocol.cloudStorage.uploadCache[Ie]={chunkUrl:Ve,edgeList:le.edgeList,nosToken:le.nosToken,offset:pr.offset,complete:!1,context:pr.context}}),Ar.addEventListener("error",function(sr){hr.onerror(sr.target.error)})}else{var Er;hr.data=n(Er=wr.file).call(Er,Sr,mr),hr.query.offset=pr.offset,hr.query.complete=mr>=wr.fileSize,hr.query.context=pr.context,hr.onuploading=kt,hr.onload=At,hr.onerror=ze,ie.sn=V(Ve,hr)}}(nr,er,0,Fe);else{ie.protocol.cloudStorage.uploadCache[Ie]={chunkUrl:Ve,edgeList:le.edgeList,nosToken:le.nosToken,offset:nr.offset,complete:!0,context:nr.context};var ar=L.genFileUrl(le.nosToken);le.type==="image"?V(ar+"?imageInfo",{onload:function(pr){try{pr=JSON.parse(pr),le.uploaddone(null,{docId:nr.docId,w:pr.Width,h:pr.Height,orientation:pr.Orientation||"",type:pr.Type,size:pr.Size||Fe.fileSize})}catch{var hr;gr({code:"JSON_PARSE_ERROR",message:y(hr="parse image meta failed. url: ".concat(ar+"?imageInfo",". body: ")).call(hr,pr)})}},onerror:function(pr){if(typeof Image<"u"){var hr=new Image;hr.src=ar,hr.onload=function(){le.uploaddone(null,{docId:nr.docId,w:hr.width,h:hr.height,size:Fe.fileSize})},hr.onerror=function(Cr){gr(z(Cr,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get Image meta failed.",suffix:"url: ".concat(ar)}))}}else gr(z(pr,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get imageInfo meta failed.",suffix:"url: ".concat(ar+"?imageInfo")}))}}):le.type==="video"||le.type==="audio"?V(ar+"?vinfo",{onload:function(pr){try{(pr=JSON.parse(pr)).GetVideoInfo&&pr.GetVideoInfo.VideoInfo&&(pr=pr.GetVideoInfo.VideoInfo),le.uploaddone(null,{docId:nr.docId,w:pr.Width,h:pr.Height,dur:pr.Duration,orientation:pr.Rotate,audioCodec:pr.AudioCodec,videoCodec:pr.VideoCodec,container:pr.Container,size:pr.Size||Fe.fileSize})}catch{var hr;gr({code:"JSON_PARSE_ERROR",message:y(hr="parse media meta failed. url: ".concat(ar+"?vinfo",". body: ")).call(hr,pr)})}},onerror:function(pr){gr(z(pr,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get vinfo meta failed.",suffix:"url: ".concat(ar+"?vinfo")}))}}):le.uploaddone(null,{docId:nr.docId,size:Fe.fileSize})}function gr(pr){ie.onError(pr)}}function ze(nr){le.errorHook(nr,{url:Ve,provider:"nos"});var ur=nr&&nr.code;function ar(){try{if(nr.result)var gr=JSON.parse(nr.result);else gr=nr;ie.onError(z(gr,{fallbackCode:"CHUNK_UPLOAD_FAIL",fallbackMessage:"chunk upload failed.",suffix:"url: ".concat(Ve)}))}catch{var pr;ie.onError({code:"JSON_PARSE_ERROR",message:y(pr="parse chunk upload result error. url: ".concat(Ve,". body: ")).call(pr,nr.result)})}}Fe.fileUploadedSize===0&&ur!=="abort"?le.edgeList?ae<le.edgeList.length-1?oe(le,ue,ie,ae+1):ar():le.nosLbsUrls&&le.nosLbsUrls.length>0?function(gr,pr,hr,Cr,wr){return new k(function(Sr){function mr(){wr.adaptersRequest(hr[gr],{query:{version:"1.0",bucketname:pr},method:"GET",onerror:_r,onload:function(Ar){try{(Ar=JSON.parse(Ar))&&Ar.upload&&Ar.upload.length?Sr(Ar.upload):_r()}catch{_r()}}},{exception_service:3})}function _r(){Cr.onLbsUrlFail(hr[gr]),gr<hr.length-1?(gr++,mr()):Sr([])}mr()})}(0,le.nosToken.bucket,le.nosLbsUrls,ie,le).then(function(gr){gr.length>0?(le.edgeList=gr,le.updateNosEdgeList&&le.updateNosEdgeList(gr),oe(le,ue,ie,ae+1)):ar()}):(le.edgeList=L.edgeList,oe(le,ue,ie,ae+1)):ar()}typeof ae!="number"&&(ae=-1),le.edgeList&&le.edgeList.length&&(ae=ae>0?ae:0,Ve=le.edgeList[ae]),Ve+="/"+le.nosToken.bucket+"/"+le.nosToken.objectName;var Et=le.data.file&&le.data.file.type;if(!Et||i(Et).call(Et,"/")<0){var cr=(le.fileInputName||"").split(".").pop();le.type==="image"?Et="image/"+(cr==="jpg"?"jpeg":cr):le.type!=="audio"&&le.type!=="video"||(Et=re[cr])}var er={query:{offset:0,complete:$>=Fe.fileSize,version:"1.0"},headers:{"Content-Type":Et||"application/octet-stream","x-nos-token":le.nosToken.token},method:"POST",timeout:0,onaftersend:function(){le.beginupload(ie)},onuploading:kt,onload:At,onerror:ze};if(typeof FileReader<"u"){var or,dr=new FileReader;dr.addEventListener("load",function(nr){er.data=nr.target.result,ie.sn=V(Ve,er)}),dr.addEventListener("error",function(nr){er.onerror(nr.target.error)}),dr.readAsArrayBuffer(n(or=Fe.file).call(or,0,$))}else{var lr;er.data=n(lr=Fe.file).call(lr,0,$),ie.sn=V(Ve,er)}}},function(t,r,e){e(627);var n=e(14);t.exports=n.Reflect.construct},function(t,r,e){var n=e(1),g=e(33),y=e(83),i=e(281),k=e(179),L=e(38),$=e(30),V=e(88),z=e(7),re=g("Reflect","construct"),oe=Object.prototype,le=[].push,ue=z(function(){function Fe(){}return!(re(function(){},[],Fe)instanceof Fe)}),ie=!z(function(){re(function(){})}),ae=ue||ie;n({target:"Reflect",stat:!0,forced:ae,sham:ae},{construct:function(Fe,de){k(Fe),L(de);var Ie=arguments.length<3?Fe:k(arguments[2]);if(ie&&!ue)return re(Fe,de,Ie);if(Fe==Ie){switch(de.length){case 0:return new Fe;case 1:return new Fe(de[0]);case 2:return new Fe(de[0],de[1]);case 3:return new Fe(de[0],de[1],de[2]);case 4:return new Fe(de[0],de[1],de[2],de[3])}var Ve=[null];return y(le,Ve,de),new(y(i,Fe,Ve))}var kt=Ie.prototype,At=V($(kt)?kt:oe),ze=y(Fe,At,de);return $(ze)?ze:At}})},function(t,r,e){t.exports=e(629)},function(t,r,e){var n=e(630);t.exports=n},function(t,r,e){var n=e(220);t.exports=n},function(t,r,e){t.exports=e(632)},function(t,r,e){var n=e(633);t.exports=n},function(t,r,e){var n=e(634);t.exports=n},function(t,r,e){var n=e(635);t.exports=n},function(t,r,e){e(636);var n=e(14);t.exports=n.Object.setPrototypeOf},function(t,r,e){e(1)({target:"Object",stat:!0},{setPrototypeOf:e(139)})},function(t,r,e){t.exports=e(638)},function(t,r,e){var n=e(639);t.exports=n},function(t,r,e){var n=e(280);t.exports=n},function(t,r){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(642)},function(t,r,e){var n=e(643);t.exports=n},function(t,r,e){var n=e(288);t.exports=n},function(t,r,e){e(645);var n=e(14);t.exports=n.Object.getPrototypeOf},function(t,r,e){var n=e(1),g=e(7),y=e(46),i=e(138),k=e(233);n({target:"Object",stat:!0,forced:g(function(){i(1)}),sham:!k},{getPrototypeOf:function(L){return i(y(L))}})},function(t,r,e){var n=e(8),g=e(9),y=e(43),i=e(4),k=e(12),L=k.chunkSize,$=e(92),V=e(35).formatError,z=e(92).abort,re={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};function oe(ae,Fe,de,Ie){var Ve=de.offset,kt=de.offset+L;if(typeof FileReader<"u"){var At=new FileReader;At.readAsArrayBuffer(g(Fe).call(Fe,Ve,kt)),At.addEventListener("load",function(ze){ae.data=ze.target.result,ae.query.offset=de.offset,ae.query.complete=kt>=Fe.size,ae.query.context=de.context,ae.onload=function(Et){return ue(Et,Fe,ae,de,Ie)},ae.onerror=function(Et){return le(Et,de)},de.sn=$(de.chunkUrl,ae)}),At.addEventListener("error",function(ze){ae.onerror(ze.target.error)})}else ae.data=g(Fe).call(Fe,Ve,kt),ae.query.offset=de.offset,ae.query.complete=kt>=Fe.size,ae.query.context=de.context,ae.onload=function(ze){return ue(ze,Fe,ae,de,Ie)},ae.onerror=function(ze){return le(ze,de)},de.sn=$(de.chunkUrl,ae)}function le(ae,Fe){try{if(ae.result)var de=JSON.parse(ae.result);else de=ae;Fe.onError&&Fe.onError(V(de,{fallbackCode:"CHUNK_UPLOAD_FAIL",fallbackMessage:"chunk upload failed.",suffix:"url: ".concat(Fe&&Fe.chunkUrl)}))}catch{var Ie;Fe.onError&&Fe.onError({code:"JSON_PARSE_ERROR",message:i(Ie="parse chunk upload result error. url: ".concat(Fe&&Fe.chunkUrl,". body: ")).call(Ie,ae.result)})}}function ue(ae,Fe,de,Ie,Ve){try{ae=JSON.parse(ae)}catch{var kt;return void Ie.onError({code:"JSON_PARSE_ERROR",message:i(kt="parse chunk upload result error. url: ".concat(Ie&&Ie.chunkUrl,". body: ")).call(kt,ae)})}ae&&(ae.errMsg||ae.errCode)?Ie.onError(V(ae,{fallbackCode:"UPLOAD_CHUNK_ERROR",fallbackMessage:"upload chunk failed.",suffix:"chunk uploadResume onload error. url: ".concat(Ie&&Ie.chunkUrl)})):ae.offset<Fe.size?(delete de.onaftersend,Ie.fileUploadedSize=ae.offset,Ie.offset=ae.offset,Ie.context=ae.context,Ve.offset=ae.offset,Ve.context=ae.context,oe(de,Fe,Ie,Ve)):(Ve.offset=ae.offset,Ve.complete=!0,ie(Ie,Fe))}function ie(ae,Fe){var de=k.genFileUrl(ae.nosToken);ae.type==="image"?$(de+"?imageInfo",{onload:function(Ie){try{Ie=JSON.parse(Ie),ae.uploaddone(null,{w:Ie.Width,h:Ie.Height,orientation:Ie.Orientation||"",type:Ie.Type,size:Ie.Size||Fe.size})}catch{var Ve;ae.onError({code:"JSON_PARSE_ERROR",message:i(Ve="parse image meta failed. url: ".concat(de+"?imageInfo",". body: ")).call(Ve,Ie)})}},onerror:function(Ie){if(typeof Image<"u"){var Ve=new Image;Ve.src=de,Ve.onload=function(){ae.uploaddone(null,{w:Ve.width,h:Ve.height,size:Fe.size})},Ve.onerror=function(kt){ae.onError(V(kt,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get Image meta failed.",suffix:"url: ".concat(de)}))}}else ae.onError(V(Ie,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get imageInfo meta failed.",suffix:"url: ".concat(de+"?imageInfo")}))}}):ae.type==="video"||ae.type==="audio"?$(de+"?vinfo",{onload:function(Ie){try{(Ie=JSON.parse(Ie)).GetVideoInfo&&Ie.GetVideoInfo.VideoInfo&&(Ie=Ie.GetVideoInfo.VideoInfo),ae.uploaddone(null,{w:Ie.Width,h:Ie.Height,dur:Ie.Duration,orientation:Ie.Rotate,audioCodec:Ie.AudioCodec,videoCodec:Ie.VideoCodec,container:Ie.Container,size:Ie.Size||Fe.size})}catch{var Ve;ae.onError({code:"JSON_PARSE_ERROR",message:i(Ve="parse media meta failed. url: ".concat(de+"?vinfo",". body: ")).call(Ve,Ie)})}},onerror:function(Ie){ae.onError(V(Ie,{fallbackCode:"GET_MEDIA_META_ERROR",fallbackMessage:"get vinfo meta failed.",suffix:"url: ".concat(de+"?vinfo")}))}}):ae.uploaddone(null,{size:Fe.size})}t.exports=function(ae,Fe,de){var Ie=ae.chunkUrl,Ve={offset:ae.offset,context:ae.context,chunkUrl:Ie,nosToken:ae.nosToken,type:ae.type,sn:void 0,fileUploadedSize:ae.offset||0,lastPercentage:0,beginupload:ae.beginupload,uploadprogress:ae.uploadprogress,uploaddone:ae.uploaddone,onError:ae.onError};if(ae.complete)return ie(Ve,Fe);var kt={abort:function(){z(Ve.sn)}},At=Fe.type;if(!At||n(At).call(At,"/")<0){var ze=(ae.fileInputName||"").split(".").pop();Ve.type==="image"?At="image/"+(ze==="jpg"?"jpeg":ze):Ve.type!=="audio"&&Ve.type!=="video"||(At=re[ze])}oe({query:{version:"1.0"},headers:{"Content-Type":At||"application/octet-stream","x-nos-token":Ve.nosToken.token},method:"POST",timeout:0,onaftersend:function(){Ve.beginupload&&Ve.beginupload(kt)},onuploading:function(Et){return function(cr,er,or){var dr=or.fileUploadedSize+cr.loaded,lr=Math.floor(1e4*dr/er.size)/100;if(y(lr)>=100&&(lr=100),or.lastPercentage!==lr){or.lastPercentage=lr;var nr={total:er.size,loaded:dr,percentage:lr,percentageText:lr+"%"};or.uploadprogress&&or.uploadprogress(nr)}}(Et,Fe,Ve)}},Fe,Ve,de)}},function(t,r,e){var n,g=e(144),y=e(8),i=e(6),k=e(23),L=e(11),$=e(9),V=e(5),z=e(0),re=e(81).fn,oe=e(290),le=e(284),ue=e(35),ie=e(26).reportAPI;re.transDoc=function(ae){var Fe;z.verifyOptions(ae,"fileInput done","nos::transDoc");try{var de=ae.fileInput.files[0],Ie=["ppt","pdf","pptx","doc","docx"],Ve=ae.fileInputName=de.name,kt={ppt:1,pptx:2,pdf:3,doc:6,docx:7},At=Ve.substring(g(Ve).call(Ve,".")+1);if(y(Ie).call(Ie,At)<0)return void ae.done(ue.newNoFileError("请上传正确格式的文件【ppt, pptx, pdf, doc, docx】",{callFunc:"nos: transDoc",fileInput:ae.fileInput}),ae)}catch{return void ae.done(ue.newNoFileError("请上传正确的文件节点",{callFunc:"msg::previewFile",fileInput:ae.fileInput}),ae)}var ze=i(le.genResponseBody("file")||{}).replace(/"/gi,'\\"'),Et={transToken:{name:Ve,type:kt[At],transType:ae.transcode==="png"?11:10,size:de.size,body:ze}};this.getNosTokenTrans({responseBody:Et,nosToken:{nosScene:ae.nosScene||this.nosScene,nosSurvivalTime:ae.nosSurvivalTime},callback:k(Fe=function(cr,er){cr?ae.done(cr):(ae.nosToken=er.nosToken,ae.docId=er.docId,this._doPreviewFile(ae))}).call(Fe,this)})},re.getSimpleNosToken=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ae.num=1,z.verifyOptions(ae),this.cbAndSendCmd("getSimpleNosToken",ae)},re.getNosToken=function(ae){var Fe=ae.callback,de=ae.nosToken,Ie=ae.responseBody,Ve={tag:de.nosScene};de.nosSurvivalTime&&de.nosSurvivalTime!==1/0&&(Ve.expireSec=de.nosSurvivalTime),this.sendCmd("getNosToken",{responseBody:Ie,nosToken:Ve},Fe)},re.getNosTokenTrans=function(ae){this.sendCmd("getNosTokenTrans",ae.responseBody,ae.callback)},re.getMixStoreToken=function(ae){this.sendCmd("getMixStoreToken",{mixTokenReq:{provider:ae.curProvider,tokenCount:ae.tokenCount||1,tag:"im",returnBody:ae.responseBody,policyVersion:ae.policyVersion}},ae.callback)},re.packFileDownloadName=function(ae){ie({instance:this,className:"ApiBaseFn",funcName:"packFileDownloadName",hasCallback:!1}),z.verifyOptions(ae,"url name",!0,"","nos::packFileDownloadName");var Fe=ae.url;return Fe+z.genUrlSep(Fe)+"download="+encodeURIComponent(ae.name)},re.audioToMp3=function(ae){ie({instance:this,className:"ApiBaseFn",funcName:"audioToMp3",hasCallback:!1}),z.verifyOptions(ae,"url","nos::audioToMp3");var Fe=ae.url;return Fe+z.genUrlSep(Fe)+"audioTrans&type=mp3"},re.removeFile=function(ae){this.sendCmd("removeFile",ae,ae.callback)},re.fetchFile=function(ae){this.sendCmd("fetchFile",ae,ae.callback)},re.fetchFileList=function(ae){this.sendCmd("fetchFileList",ae,ae.callback)},re.stripImageMeta=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"stripImageMeta",hasCallback:!1}),this.beforeProcessImage(ae,"stripmeta")},re.qualityImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"qualityImage",hasCallback:!1}),this.beforeProcessImage(ae,"quality")},re.interlaceImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"interlaceImage",hasCallback:!1}),this.beforeProcessImage(ae,"interlace")},re.rotateImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"rotateImage",hasCallback:!1}),this.beforeProcessImage(ae,"rotate")},re.blurImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"blurImage",hasCallback:!1}),this.beforeProcessImage(ae,"blur")},re.cropImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"cropImage",hasCallback:!1}),this.beforeProcessImage(ae,"crop")},re.thumbnailImage=function(ae){return ie({instance:this,className:"ApiBaseFn",funcName:"thumbnailImage",hasCallback:!1}),this.beforeProcessImage(ae,"thumbnail")},re.beforeProcessImage=function(ae,Fe){var de=z.copy(ae);return de.type=Fe,ae.ops=[de],this.processImage(ae)},re.processImage=function(ae){var Fe;ae.callback=ie({instance:this,className:"ApiBaseFn",funcName:"processImage",done:ae.callback});var de=this;z.verifyOptions(ae,"url ops",!0,"","nos::processImage"),z.verifyParamType("ops",ae.ops,"array","nos::processImage");var Ie=L(Fe=ae.ops).call(Fe,function(Ve){var kt,At;return z.verifyOptions(Ve,"type",!0,"","nos::processImage"),z.verifyParamValid("type",Ve.type,oe.validTypes,"nos::processImage"),de["gen"+$(kt=Ve.type).call(kt,0,1).toUpperCase()+$(At=Ve.type).call(At,1)+"Op"](Ve)});de.processCallback(ae),de.sendCmd("processImage",{url:ae.url,imageOps:Ie},ae.callback)},re.genStripmetaOp=function(ae){return new oe({type:ae.type,stripmeta:ae.strip?1:0})},re.genQualityOp=function(ae){z.verifyOptions(ae,"quality",!0,"","nos::genQualityOp"),z.verifyParamType("quality",ae.quality,"number","nos::genQualityOp"),z.verifyParamMin("quality",ae.quality,0,"nos::genQualityOp"),z.verifyParamMax("quality",ae.quality,100,"nos::genQualityOp");var Fe=Math.round(ae.quality);return new oe({type:ae.type,qualityQuality:Fe})},re.genInterlaceOp=function(ae){return new oe({type:ae.type})},re.genRotateOp=function(ae){for(z.verifyOptions(ae,"angle",!0,"","nos::genRotateOp"),z.verifyParamType("angle",ae.angle,"number","nos::genRotateOp");ae.angle<0;)ae.angle=ae.angle+360;ae.angle=ae.angle%360;var Fe=Math.round(ae.angle);return new oe({type:ae.type,rotateAngle:Fe})},re.genBlurOp=function(ae){z.verifyOptions(ae,"radius sigma","nos::genBlurOp"),z.verifyParamType("radius",ae.radius,"number","nos::genBlurOp"),z.verifyParamMin("radius",ae.radius,1,"nos::genBlurOp"),z.verifyParamMax("radius",ae.radius,50,"nos::genBlurOp"),z.verifyParamType("sigma",ae.sigma,"number","nos::genBlurOp"),z.verifyParamMin("sigma",ae.sigma,0,"nos::genBlurOp");var Fe=Math.round(ae.radius),de=Math.round(ae.sigma);return new oe({type:ae.type,blurRadius:Fe,blurSigma:de})},re.genCropOp=function(ae){z.verifyOptions(ae,"x y width height","nos::genCropOp"),z.verifyParamType("x",ae.x,"number","nos::genCropOp"),z.verifyParamMin("x",ae.x,0,"nos::genCropOp"),z.verifyParamType("y",ae.y,"number","nos::genCropOp"),z.verifyParamMin("y",ae.y,0,"nos::genCropOp"),z.verifyParamType("width",ae.width,"number","nos::genCropOp"),z.verifyParamMin("width",ae.width,0,"nos::genCropOp"),z.verifyParamType("height",ae.height,"number","nos::genCropOp"),z.verifyParamMin("height",ae.height,0,"nos::genCropOp");var Fe=Math.round(ae.x),de=Math.round(ae.y),Ie=Math.round(ae.width),Ve=Math.round(ae.height);return new oe({type:ae.type,cropX:Fe,cropY:de,cropWidth:Ie,cropHeight:Ve})},re.genThumbnailOp=(n={cover:"z",contain:"x",crop:"y"},function(ae){z.verifyOptions(ae,"mode","nos::genThumbnailOp"),z.verifyParamValid("mode",ae.mode,V(n),"nos::genThumbnailOp"),ae.mode==="contain"?z.verifyParamAtLeastPresentOne(ae,"width height","nos::genThumbnailOp"):z.verifyOptions(ae,"width height","nos::genThumbnailOp"),z.undef(ae.width)&&(ae.width=0),z.undef(ae.height)&&(ae.height=0),z.verifyParamType("width",ae.width,"number","nos::genThumbnailOp"),z.verifyParamMin("width",ae.width,0,"nos::genThumbnailOp"),z.verifyParamType("height",ae.height,"number","nos::genThumbnailOp"),z.verifyParamMin("height",ae.height,0,"nos::genThumbnailOp");var Fe=Math.round(ae.width),de=Math.round(ae.height),Ie=new oe({type:ae.type,thumbnailMode:n[ae.mode],thumbnailWidth:Fe,thumbnailHeight:de});if(ae.mode==="crop"&&z.notundef(ae.axis)){z.undef(ae.axis.x)&&(ae.axis.x=5),z.undef(ae.axis.y)&&(ae.axis.y=5),z.verifyParamMin("axis.x",ae.axis.x,0,"nos::genThumbnailOp"),z.verifyParamMax("axis.x",ae.axis.x,10,"nos::genThumbnailOp"),z.verifyParamMin("axis.y",ae.axis.y,0,"nos::genThumbnailOp"),z.verifyParamMax("axis.y",ae.axis.y,10,"nos::genThumbnailOp");var Ve=Math.round(ae.axis.x),kt=Math.round(ae.axis.y);Ie.thumbnailAxisX=Ve,Ie.thumbnailAxisY=kt}return z.notundef(ae.enlarge)&&(z.verifyParamType("enlarge",ae.enlarge,"boolean","nos::genThumbnailOp"),ae.enlarge&&(Ie.thumbnailEnlarge=1)),Ie.thumbnailToStatic=this.options.thumbnailToStatic?1:0,Ie}),re.getNosOriginUrl=function(ae){var Fe;(ae=ae||{}).done=ie({instance:this,className:"ApiBaseFn",funcName:"getNosOriginUrl",done:ae.done}),z.verifyOptions(ae,"safeShortUrl",!0,"","nos::getNosOriginUrl"),z.verifyParamType("safeShortUrl",ae.safeShortUrl,"string","nos::getNosOriginUrl"),/^http(s)?:/.test(ae.safeShortUrl)&&~y(Fe=ae.safeShortUrl).call(Fe,"im_url=1")?(this.processCallback(ae),this.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:ae.safeShortUrl}},ae.callback)):ae.done(new ue("参数 “safeShortUrl” 内容非文件安全短链",{callFunc:"nos: getNosOriginUrl"}),ae)}},function(t,r,e){var n,g=e(4),y=e(8),i=e(5),k=e(24),L=e(110),$=L.genUrlSep,V=L.url2object,z=L.object2url,re=e(0),oe=e(81).fn,le=e(26).reportAPI;oe.viewImageSync=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageSync",hasCallback:!1});var ie=this.options;re.verifyOptions(ue,"url","nos::viewImageSync");var ae=ue.url,Fe=V(ae),de=Fe.protocol,Ie=Fe.hostname,Ve=Fe.path,kt=Fe.query;if(typeof ue.strip=="boolean"&&(kt.stripmeta=ue.strip?1:0),typeof ue.quality=="number"&&(re.verifyParamMin("quality",ue.quality,0,"nos::viewImageSync"),re.verifyParamMax("quality",ue.quality,100,"nos::viewImageSync"),kt.quality=Math.round(ue.quality)),typeof ue.interlace=="boolean"&&(kt.interlace=ue.interlace?1:0),typeof ue.rotate=="number"&&(kt.rotate=Math.round(ue.rotate)),k(ue.thumbnail)==="object"){var At=ue.thumbnail.mode||"crop",ze=ue.thumbnail.width,Et=ue.thumbnail.height;if(ze>=0&&Et>=0&&ze<4096&&Et<4096&&(ze>0||Et>0)){var cr,er;switch(At){case"crop":At="y";break;case"contain":At="x";break;case"cover":At="z";break;default:At="x"}kt.thumbnail=g(cr=g(er="".concat(ze)).call(er,At)).call(cr,Et)}}if(ie.downloadUrl){var or=V(ue.url),dr=ie.downloadUrl,lr=or.path,nr=y(lr).call(lr,"/");if(nr!==-1){var ur=lr.substring(0,nr),ar=lr.substring(nr+1);dr=dr.replace("{bucket}",ur).replace("{object}",ar)}var gr=V(dr);return z({protocol:gr.protocol,hostname:gr.hostname,path:gr.path,query:re.merge(gr.query,kt)})}return z({protocol:de,hostname:Ie,path:Ve,query:kt})},oe.viewImageStripMeta=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageStripMeta",hasCallback:!1}),re.verifyOptions(ue,"url strip","nos::viewImageStripMeta"),re.verifyParamType("strip",ue.strip,"boolean","nos::viewImageStripMeta");var ie="stripmeta="+(ue.strip?1:0),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageQuality=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageQuality",hasCallback:!1}),re.verifyOptions(ue,"url quality","nos::viewImageQuality"),re.verifyParamType("quality",ue.quality,"number","nos::viewImageQuality"),re.verifyParamMin("quality",ue.quality,0,"nos::viewImageQuality"),re.verifyParamMax("quality",ue.quality,100,"nos::viewImageQuality");var ie="quality="+Math.round(ue.quality),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageInterlace=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageInterlace",hasCallback:!1}),re.verifyOptions(ue,"url","nos::viewImageInterlace");var ie=$(ue.url);return ue.url+ie+"interlace=1"},oe.viewImageRotate=function(ue){for(le({instance:this,className:"ApiBaseFn",funcName:"viewImageRotate",hasCallback:!1}),re.verifyOptions(ue,"url angle","nos::viewImageRotate"),re.verifyParamType("angle",ue.angle,"number","nos::viewImageRotate");ue.angle<0;)ue.angle=ue.angle+360;ue.angle=ue.angle%360;var ie="rotate="+Math.round(ue.angle),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageBlur=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageBlur",hasCallback:!1}),re.verifyOptions(ue,"url radius sigma","nos::viewImageBlur"),re.verifyParamType("radius",ue.radius,"number","nos::viewImageBlur"),re.verifyParamMin("radius",ue.radius,1,"nos::viewImageBlur"),re.verifyParamMax("radius",ue.radius,50,"nos::viewImageBlur"),re.verifyParamType("sigma",ue.sigma,"number","nos::viewImageBlur"),re.verifyParamMin("sigma",ue.sigma,0,"nos::viewImageBlur");var ie="blur="+Math.round(ue.radius)+"x"+Math.round(ue.sigma),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageCrop=function(ue){le({instance:this,className:"ApiBaseFn",funcName:"viewImageCrop",hasCallback:!1}),re.verifyOptions(ue,"url x y width height","nos::viewImageCrop"),re.verifyParamType("x",ue.x,"number","nos::viewImageCrop"),re.verifyParamMin("x",ue.x,0,"nos::viewImageCrop"),re.verifyParamType("y",ue.y,"number","nos::viewImageCrop"),re.verifyParamMin("y",ue.y,0,"nos::viewImageCrop"),re.verifyParamType("width",ue.width,"number","nos::viewImageCrop"),re.verifyParamMin("width",ue.width,0,"nos::viewImageCrop"),re.verifyParamType("height",ue.height,"number","nos::viewImageCrop"),re.verifyParamMin("height",ue.height,0,"nos::viewImageCrop");var ie="crop="+Math.round(ue.x)+"_"+Math.round(ue.y)+"_"+Math.round(ue.width)+"_"+Math.round(ue.height),ae=$(ue.url);return ue.url+ae+ie},oe.viewImageThumbnail=(n={cover:"z",contain:"x",crop:"y"},function(ue){re.verifyOptions(ue,"url mode","nos::viewImageThumbnail"),re.verifyParamValid("mode",ue.mode,i(n),"nos::viewImageThumbnail"),ue.mode==="contain"?re.verifyParamAtLeastPresentOne(ue,"width height","nos::viewImageThumbnail"):re.verifyOptions(ue,"width height","nos::viewImageThumbnail"),re.undef(ue.width)&&(ue.width=0),re.undef(ue.height)&&(ue.height=0),re.verifyParamType("width",ue.width,"number","nos::viewImageThumbnail"),re.verifyParamMin("width",ue.width,0,"nos::viewImageThumbnail"),re.verifyParamType("height",ue.height,"number","nos::viewImageThumbnail"),re.verifyParamMin("height",ue.height,0,"nos::viewImageThumbnail");var ie=Math.round(ue.width),ae=Math.round(ue.height),Fe="thumbnail="+ie+n[ue.mode]+ae;ue.mode==="crop"&&re.notundef(ue.axis)&&(re.undef(ue.axis.x)&&(ue.axis.x=5),re.undef(ue.axis.y)&&(ue.axis.y=5),re.verifyParamMin("axis.x",ue.axis.x,0,"nos::viewImageThumbnail"),re.verifyParamMax("axis.x",ue.axis.x,10,"nos::viewImageThumbnail"),re.verifyParamMin("axis.y",ue.axis.y,0,"nos::viewImageThumbnail"),re.verifyParamMax("axis.y",ue.axis.y,10,"nos::viewImageThumbnail"),Fe=Fe+"&axis="+Math.round(ue.axis.x)+"_"+Math.round(ue.axis.y)),re.notundef(ue.enlarge)&&(re.verifyParamType("enlarge",ue.enlarge,"boolean","nos::viewImageThumbnail"),ue.enlarge&&(Fe+="&enlarge=1"));var de=$(ue.url);return ue.url+de+Fe})},function(t,r,e){var n=e(24),g=e(6),y=e(8),i=e(310),k=e(0),L=e(81).fn,$=e(12),V=e(26).reportAPI;function z(oe,le,ue,ie){var ae=!1,Fe="";if(ue===1?y(oe).call(oe,le)>=0&&(ae=!0,Fe=le):ue===2&&(Fe=new RegExp(le,"g")).test(oe)&&(ae=!0),ae&&Fe!=="")switch(ie){case 1:return oe.replace(Fe,"**");case 2:return{code:2};case 3:return{code:3}}return oe}function re(oe,le){for(var ue=le.match,ie=le.operate,ae=oe,Fe=0;Fe<i(le).length;Fe++){var de=i(le)[Fe],Ie=de.match||ue,Ve=de.operate||ie;try{if(ae=z(ae,de.key,Ie,Ve),n(ae)==="object")return ae}catch(kt){this.logger.warn("misc::filterContent: js cannot parse this regexp ",kt)}}return ae}L.uploadSdkLogUrl=function(oe){return k.verifyOptions(oe,"url","misc::uploadSdkLogUrl"),this.cbAndSendCmd("uploadSdkLogUrl",oe)},L.getClientAntispamLexicon=function(oe){var le=this;(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getClientAntispamLexicon",done:oe.done});var ue=(oe=oe||{}).done;ue instanceof Function||(ue=function(){}),oe={clientAntispam:{version:0}};var ie=this;if($.hasLocalStorage&&localStorage.getItem("antispamLexicon")&&localStorage.getItem("antispamLexicon")!=="{}")try{ie.antispamLexicon=JSON.parse(localStorage.getItem("antispamLexicon"))}catch(ae){this.logger.error("JSON parse antispamLexicon error",ae)}ie.antispamLexicon&&ue.call(this,null,{clientAntispam:ie.antispamLexicon}),this.protocol.sendCmd("getClientAntispam",oe,function(ae,Fe,de){ae?(ie.protocol.logger.error("misc::getClientAntispamLexicon:",ae),ue.call(le,ae,{})):($.hasLocalStorage&&localStorage.setItem("antispamLexicon",g(de.clientAntispam)),ie.antispamLexicon||ue.call(le,null,de),ie.antispamLexicon=de.clientAntispam||{})})},L.filterClientAntispam=function(oe){V({instance:this,className:"ApiBaseFn",funcName:"filterClientAntispam",hasCallback:!1});var le=oe.content;if(!le)return{code:404,errmsg:"待反垃圾文本content不存在"};var ue=this.antispamLexicon&&this.antispamLexicon.thesaurus;if(!ue)return{code:404,errmsg:"没有反垃圾词库或者词库格式不合法"};try{ue=JSON.parse(ue).thesaurus}catch{return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"),{code:500,errmsg:"反垃圾词库格式不合法"}}for(var ie=le,ae=0;ae<ue.length;ae++)if(ie=re.call(this,ie,ue[ae]),n(ie)==="object"){if(ie.code===2)return{code:200,type:2,errmsg:"建议拒绝发送",content:le,result:""};if(ie.code===3)return{code:200,type:3,errmsg:"建议服务器处理反垃圾，发消息带上字段clientAntiSpam",content:le,result:le}}return ie===le?{code:200,type:0,errmsg:"",content:le,result:ie}:{code:200,type:1,errmsg:"已对特殊字符做了过滤",content:le,result:ie}},L.getServerTime=function(oe){(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getServerTime",done:oe.done}),this.processCallback(oe),this.sendCmd("getServerTime",{},oe.callback)},L.getNosAccessToken=function(oe){(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"getNosAccessToken",done:oe.done}),k.verifyOptions(oe,"url","misc::getNosAccessToken"),this.processCallback(oe);var le={url:oe.url};oe.userAgent&&(le.userAgent=oe.userAgent),oe.ext&&(le.ext=oe.ext),this.sendCmd("getNosAccessToken",{nosAccessTokenTag:le},function(ue,ie,ae){var Fe=ae&&ae.nosAccessTokenTag&&ae.nosAccessTokenTag.token,de=oe.url,Ie=Fe?{token:Fe,resUrl:y(de).call(de,"?")!==-1?de+"&token="+Fe:de+"?token="+Fe}:{};oe.done(ue,Ie)})},L.deleteNosAccessToken=function(oe){(oe=oe||{}).done=V({instance:this,className:"ApiBaseFn",funcName:"deleteNosAccessToken",done:oe.done}),k.verifyOptions(oe,"token","misc::deleteNosAccessToken"),this.processCallback(oe),this.sendCmd("deleteNosAccessToken",{nosAccessTokenTag:{token:oe.token}},oe.callback)}},function(t,r,e){e(75);var n=e(73),g=e(31),y=e(18),i=e(651),k=Array.prototype,L={DOMTokenList:!0,NodeList:!0};t.exports=function($){var V=$.keys;return $===k||y(k,$)&&V===k.keys||g(L,n($))?i:V}},function(t,r,e){var n=e(652);t.exports=n},function(t,r,e){e(90),e(102);var n=e(27);t.exports=n("Array").keys},function(t,r,e){var n=e(24),g=e(3),y=e(11),i=e(6),k=e(81).fn,L=e(0),$=e(155),V=e(291),z=e(26).reportAPI;k.signalingCreate=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.type,le=re.channelName,ue=re.ext;return L.verifyOptions(re,"type","api::signalling"),this.sendCmdUsePromise("signalingCreate",{avSignalTag:{type:oe,channelName:le,ext:ue}}).then(function(ie){var ae=ie.avSignalTag;return g.resolve(ae)}).catch(function(ie){return g.reject(V.parseAvSignalError(ie))})},k.signalingDelay=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingDelay",{avSignalTag:re}).then(function(oe){var le=oe.avSignalTag;return g.resolve(le)}).catch(function(oe){return g.reject(V.parseAvSignalError(oe))})},k.signalingClose=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.offlineEnabled;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingClose",{avSignalTag:L.merge(re,{isSave:oe===!0?1:0})}).then(function(le){var ue=le.avSignalTag;return ue.offlineEnabled=ue.isSave===1,delete ue.isSave,g.resolve(ue)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingJoin=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.offlineEnabled;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingJoin",{avSignalTag:L.merge(re,{isSave:oe===!0?1:0})}).then(function(le){var ue,ie=le.avSignalTag,ae=ie.members;return typeof ie.members=="string"&&(ae=y(ue=JSON.parse(ie.members)).call(ue,function(Fe){return V.parseAvSignalMember(Fe)})),ie.members=ae,g.resolve(ie)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingLeave=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.offlineEnabled;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingLeave",{avSignalTag:L.merge(re,{isSave:oe===!0?1:0})}).then(function(le){var ue=le.avSignalTag;return ue.offlineEnabled=ue.isSave===1,delete ue.isSave,g.resolve(ue)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingGetChannelInfo=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.channelName;return L.verifyOptions(re,"channelName","api::signalling"),this.sendCmdUsePromise("signalingGetChannelInfo",{avSignalTag:{channelName:oe}}).then(function(le){var ue,ie=le.avSignalTag,ae=ie.members;return typeof ie.members=="string"&&(ae=y(ue=JSON.parse(ie.members)).call(ue,function(Fe){return V.parseAvSignalMember(Fe)})),ie.members=ae,g.resolve(ie)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingInvite=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.account,le=re.offlineEnabled,ue=re.pushInfo,ie=ue===void 0?{}:ue;L.verifyOptions(re,"channelId requestId account","api::signalling"),n(ie.pushPayload)==="object"&&(ie.pushPayload=i(ie.pushPayload));var ae=L.merge(re,ie,{to:oe,isSave:le===!0?1:0,needPush:ie.needPush===!0?1:0,needBadge:ie.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingInvite",{avSignalTag:ae}).then(function(Fe){var de=Fe.avSignalTag;return de.offlineEnabled=de.isSave===1,de.needBadge=de.needBadge===1,de.needPush=de.needPush===1,delete de.isSave,g.resolve(de)}).catch(function(Fe){return g.reject(V.parseAvSignalError(Fe))})},k.signalingCancel=function(re){var oe=re.account,le=re.offlineEnabled;return L.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingCancel",{avSignalTag:L.merge(re,{to:oe,isSave:le===!0?1:0})}).then(function(ue){var ie=ue.avSignalTag;return ie.offlineEnabled=ie.isSave===1,delete ie.isSave,g.resolve(ie)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingCreateAndJoin=function(re){var oe=this,le=z({instance:this,className:"ApiBaseFn",funcName:"signalingCreateAndJoin",hasCallback:!0}),ue=re.channelName,ie=re.uid,ae=ie===void 0?0:ie,Fe=re.offlineEnabled,de=Fe===void 0||Fe,Ie=re.attachExt,Ve=Ie===void 0?"":Ie;return this.signalingCreate(re).catch(function(kt){return kt.code===10405?(oe.logger.warn("api::avSignal:signalingCall room already exists:",kt),oe.signalingGetChannelInfo({channelName:ue})):g.reject(kt)}).then(function(kt){var At={channelId:kt.channelId,offlineEnabled:de,attachExt:Ve,nertcChannelName:re.nertcChannelName,nertcTokenTtl:re.nertcTokenTtl,nertcJoinRoomQueryParamMap:re.nertcJoinRoomQueryParamMap};return ae&&L.merge(At,{uid:ae}),oe.signalingJoin(At)}).then(function(kt){return typeof le=="function"&&le(void 0),kt}).catch(function(kt){throw typeof le=="function"&&le(kt),kt})},k.signalingCall=function(re){var oe=this,le=z({instance:this,className:"ApiBaseFn",funcName:"signalingCall",hasCallback:!0}),ue=re.account,ie=re.offlineEnabled,ae=re.requestId;L.verifyOptions(re,"type requestId account","api::signalling");var Fe="";return this.signalingCreateAndJoin(re).then(function(de){Fe=de.channelId||Fe,oe.logger.info("api::avSignal:signalingCall join:",Fe);var Ie={channelId:Fe,account:ue,requestId:ae,offlineEnabled:ie,attachExt:re.attachExt||"",pushInfo:re.pushInfo||{},nertcTokenTtl:de.nertcTokenTtl,nertcToken:de.nertcToken};return oe.signalingInvite(Ie)}).then(function(de){return typeof le=="function"&&le(void 0),de}).catch(function(de){throw typeof le=="function"&&le(de),de})},k.signalingReject=function(re){var oe=re.account,le=re.offlineEnabled;return L.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingReject",{avSignalTag:L.merge(re,{to:oe,isSave:le===!0?1:0})}).then(function(ue){var ie=ue.avSignalTag;return ie.offlineEnabled=ie.isSave===1,delete ie.isSave,g.resolve(ie)}).catch(function(ue){return g.reject(V.parseAvSignalError(ue))})},k.signalingAccept=function(re){var oe=this,le=re.account,ue=re.offlineEnabled;return L.verifyOptions(re,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingAccept",{avSignalTag:L.merge(re,{to:le,isSave:ue===!0?1:0})}).then(function(ie){var ae=ie.avSignalTag;return ae.offlineEnabled=ae.isSave===1,delete ae.isSave,g.resolve(ae)}).catch(function(ie){return g.reject(V.parseAvSignalError(ie))}).then(function(ie){if(re.autoJoin){var ae={channelId:re.channelId,offlineEnabled:re.offlineEnabled,attachExt:re.joinAttachExt,uid:re.uid,nertcChannelName:re.nertcChannelName,nertcTokenTtl:re.nertcTokenTtl,nertcJoinRoomQueryParamMap:re.nertcJoinRoomQueryParamMap};return oe.signalingJoin(ae)}return ie})},k.signalingControl=function(re){var oe=re.account;return L.verifyOptions(re,"channelId","api::signalling"),this.sendCmdUsePromise("signalingControl",{avSignalTag:L.merge(re,oe?{to:oe}:{})}).then(function(le){var ue=le.avSignalTag;return g.resolve(ue)}).catch(function(le){return g.reject(V.parseAvSignalError(le))})},k.signalingSync=function(){return this.sendCmdUsePromise("sync",{sync:{avSignal:0}}).then(function(re){var oe=re.avSignalTag;return g.resolve(oe)}).catch(function(re){return g.reject(V.parseAvSignalError(re))})},k.signalingMarkMsgRead=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z({instance:this,className:"ApiBaseFn",funcName:"signalingMarkMsgRead",hasCallback:!1}),L.verifyOptions(re,"msgid","api::signalling");var oe,le=$.idMap.avSignal;return oe=typeof re.msgid=="string"?[re.msgid]:re.msgid,this.sendCmd("batchMarkRead",{sid:le.id,cid:le.signalingNotify,ids:oe})},k.signalingCallEx=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.account,le=re.offlineEnabled,ue=re.pushInfo,ie=ue===void 0?{}:ue;n(ie.pushPayload)==="object"&&(ie.pushPayload=i(ie.pushPayload)),L.verifyOptions(re,"type","api::signalling"),L.verifyOptions(re,"account","api::signalling");var ae=L.merge(re,ie,{to:oe,isSave:le===!0?1:0,needPush:ie.needPush===!0?1:0,needBadge:ie.needBadge===!1?0:1});return this.sendCmdUsePromise("signalingCallEx",{avSignalTag:ae}).then(function(Fe){var de,Ie=Fe.avSignalTag,Ve=Ie.members;return typeof Ie.members=="string"&&(Ve=y(de=JSON.parse(Ie.members)).call(de,function(kt){return V.parseAvSignalMember(kt)})),Ie.members=Ve,g.resolve(Ie)}).catch(function(Fe){return g.reject(V.parseAvSignalError(Fe))})},k.signalingJoinAndAccept=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=re.channelId,le=re.attachExt,ue=re.offlineEnabled,ie=re.uid,ae=re.account,Fe=re.requestId,de=re.nertcChannelName,Ie=re.nertcTokenTtl,Ve=re.nertcJoinRoomQueryParamMap;return L.verifyOptions(re,"channelId","api::signalling"),L.verifyOptions(re,"account","api::signalling"),L.verifyOptions(re,"requestId","api::signalling"),this.sendCmdUsePromise("signalingJoinAndAccept",{avSignalTag:{channelId:oe,attachExt:le,isSave:ue===!0?1:0,uid:ie,to:ae,requestId:Fe,nertcChannelName:de,nertcTokenTtl:Ie,nertcJoinRoomQueryParamMap:Ve}}).then(function(kt){var At,ze=kt.avSignalTag,Et=ze.members;return typeof ze.members=="string"&&(Et=y(At=JSON.parse(ze.members)).call(At,function(cr){return V.parseAvSignalMember(cr)})),ze.members=Et,g.resolve(ze)}).catch(function(kt){return g.reject(V.parseAvSignalError(kt))})}},function(t,r,e){var n=e(51),g=e(34),y=e(5),i=e(52),k=e(15),L=e(53),$=e(2),V=e(54),z=e(55),re=e(42),oe=e(44),le=e(45);function ue(ae,Fe){var de=y(ae);if(i){var Ie=i(ae);Fe&&(Ie=k(Ie).call(Ie,function(Ve){return L(ae,Ve).enumerable})),de.push.apply(de,Ie)}return de}e(0);var ie={user_id:"",trace_id:"",action:7,exception_service:6,duration:0,start_time:0,state:1,extension:[]};t.exports=function(){function ae(Fe){oe(this,ae),this.clientProto=Fe,this.reset()}return le(ae,[{key:"reset",value:function(){this.traceData=g({},ie),this.traceData.extension=[]}},{key:"start",value:function(Fe){this.reset(),g(this.traceData,Fe),this.traceData.user_id=this.clientProto.account,this.traceData.start_time=new Date().getTime()}},{key:"update",value:function(Fe){var de=this.clientProto.checkNetworkAvailable();this.traceData.extension.push(function(Ie){for(var Ve=1;Ve<arguments.length;Ve++){var kt,At,ze=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?$(kt=ue(Object(ze),!0)).call(kt,function(Et){n(Ie,Et,ze[Et])}):V?z(Ie,V(ze)):$(At=ue(Object(ze))).call(At,function(Et){re(Ie,Et,L(ze,Et))})}return Ie}({code:0,description:"",foreground:!0,foreg_backg_switch:!1,net_type:0,net_connect:de},Fe))}},{key:"end",value:function(Fe){var de=this.traceData.extension[0],Ie=this.traceData.extension[1];if(de&&de.operation_type===0&&Ie&&Ie.operation_type===1){var Ve=de.net_type!==Ie.net_type||de.net_connect!==Ie.net_connect;if(Fe||!Ve)return this.traceData.duration=new Date().getTime()-this.traceData.start_time,this.clientProto.reporter.report("exceptions",this.traceData),void this.reset();this.reset()}else this.reset()}}]),ae}()},function(t,r,e){var n=e(2),g=e(44),y=e(45),i=e(66).getPromiseWithAbort,k=function(){function L(){g(this,L),this.abortFns=[]}return y(L,[{key:"add",value:function($){var V=i($);return this.abortFns.push(V.abort),V.promise}},{key:"clear",value:function(){var $;n($=this.abortFns).call($,function(V){return V(new Error("Request aborted"))}),this.abortFns=[]}},{key:"destroy",value:function(){this.clear()}}]),L}();t.exports=k},function(t,r,e){var n=e(60),g=e(61),y=e(34),i=e(2),k=e(63),L=e(3),$=e(11),V=e(56),z=e(9),re=e(4),oe=e(6),le=e(23),ue=e(44),ie=e(45),ae=e(0),Fe=e(12),de=e(70),Ie=e(294),Ve=e(676),kt=e(35);t.exports=function(){function At(Et,cr){ue(this,At),this.clientProto=Et,this.logger=Et.logger,this.urls=[],this.sockets=[],this.config=cr}var ze;return ie(At,[{key:"setConfig",value:function(Et){y(this.config,Et)}},{key:"setUrls",value:function(Et){this.urls=Et}},{key:"resetSockets",value:function(){var Et;i(Et=this.sockets).call(Et,function(cr){cr&&(cr.removeAllListenersX("info"),cr.disconnect())}),this.sockets=[]}},{key:"connect",value:(ze=g(n.mark(function Et(){var cr,er,or,dr=this;return n.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(this.clientProto.statusProtector.processEvent("auth/loginLifeCycleConnect"),(er=k(cr=this.urls).call(cr,0,this.config.socketConcurrent)).length!==0){lr.next=4;break}throw new kt("no_socket_url",408,{});case 4:return lr.prev=4,lr.next=7,L.any($(er).call(er,function(nr,ur){return dr.doConnect(nr,ur)}));case 7:return lr.abrupt("return",lr.sent);case 10:throw lr.prev=10,lr.t0=lr.catch(4),i(or=lr.t0.errors).call(or,function(nr,ur){dr.logger.warn("imsocket::connect failed ".concat(ur),nr)}),lr.t0;case 14:case"end":return lr.stop()}},Et,this,[[4,10]])})),function(){return ze.apply(this,arguments)})},{key:"success",value:function(Et){var cr;return i(cr=this.sockets).call(cr,function(er,or){Et!==or&&er&&(er.removeAllListenersX("info"),er.disconnect())}),this.sockets[Et]}},{key:"failed",value:function(Et){var cr=this.sockets[Et];cr&&(cr.removeAllListenersX("info"),cr.disconnect())}},{key:"getTransport",value:function(Et){var cr=ae.getGlobal();if(typeof window>"u"){var er=Et.split(":");return cr&&!cr.location&&er.length>1&&(cr.location={protocol:er.shift(),port:er.pop(),hostname:er.join("")}),["websocket"]}return this.clientProto.options.transports?this.clientProto.options.transports:de.name!=="IE"||cr.WebSocket?["websocket"]:["xhr-polling"]}},{key:"doConnect",value:function(Et,cr){var er=this;if(this.clientProto&&this.clientProto.__destroyed===!0)return L.reject("instance has been destroyed");var or=this.getTransport(Et),dr=V();return new L(function(lr,nr){var ur,ar,gr,pr;try{er.config.binaryWebsocket?(pr=new Ve(er.clientProto)).connect(Et,{connectTimeout:Fe.connectTimeout}):pr=Ie.connect(Et,{transports:z(or).call(or),reconnect:!1,"force new connection":!0,"connect timeout":Fe.connectTimeout,needToXHR:typeof er.clientProto.options.needToXHR=="boolean"?er.clientProto.options.needToXHR:Fe.needToXHR}),er.sockets[cr]=pr}catch(Cr){var hr;return er.logger.warn(re(hr="link::connectToUrl ".concat(cr,":io.connect caught exception: ")).call(hr,Cr&&Cr.message),Cr),void nr(new kt("socket_error",408,{startTime:dr,url:Et,reason:Cr.message,rawError:Cr}))}er.logger.info(re(ur=re(ar="link::connectToUrl ".concat(cr,": socket url: ")).call(ar,Et,", transports: ")).call(ur,oe(or))),pr.on("connect",function(){er.logger.info("link::connectToUrl ".concat(cr," success")),er.success(cr),er.clientProto.reporterHookLinkKeep.start({trace_id:pr.socket.sessionid}),er.clientProto.reporterHookLinkKeep.update({code:0,description:"",operation_type:0,target:Et}),er.clientProto.url=Et,lr(pr)}),pr.on("handshake_failed",function(){er.failed(cr),nr(new kt("handshake_failed",408,{startTime:dr,url:Et}))}),pr.on("connect_failed",function(Cr){er.failed(cr),nr(new kt("connect_failed",408,{startTime:dr,url:Et,reason:Cr}))}),pr.on("error",function(){var Cr,wr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Sr=arguments.length>1?arguments[1]:void 0,mr=Sr&&Sr.message||wr;er.logger.warn(re(Cr="link::onSocketError ".concat(cr,": reason is ")).call(Cr,mr,", error is "),Sr),nr(new kt("socket_error",408,{startTime:dr,url:Et,reason:mr,rawError:Sr}))}),pr.on("info",function(Cr,wr){var Sr,mr;wr?er.logger.info(re(Sr="link::onSocketInfo ".concat(cr,": ")).call(Sr,Cr,", extraInfo:"),wr):er.logger.info(re(mr="link::onSocketInfo ".concat(cr,": ")).call(mr,Cr,"."))}),pr.on("message",le(gr=er.clientProto.onMessage).call(gr,er.clientProto)),pr.on("disconnect",function(Cr){er.logger.warn("imsocket::onSocketDisconnect: socket url: ".concat(Et,", disconnected"),Cr),er.clientProto.hasLogin=!1,er.clientProto.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to socket ondisconnect")),er.clientProto.doLogout?er.clientProto.logout():er.clientProto.onDisconnect("link::socketDisconnect",Cr)}),pr.on("websocketOnclose",function(Cr){er.clientProto.reporterHookLinkKeep.update({code:Cr&&Cr.code||0,description:Cr&&Cr.reason||"",operation_type:1,target:Et}),er.clientProto.reporterHookLinkKeep.end(!1)})})}},{key:"destroy",value:function(){this.urls=[],this.resetSockets()}}]),At}()},function(t,r,e){var n=e(24).default,g=e(142),y=e(158),i=e(195),k=e(287),L=e(658),$=e(197),V=e(292),z=e(669),re=e(293);function oe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=oe=function(){return le},t.exports.__esModule=!0,t.exports.default=t.exports;var le={},ue=Object.prototype,ie=ue.hasOwnProperty,ae=g||function(_r,Ar,Er){_r[Ar]=Er.value},Fe=typeof y=="function"?y:{},de=Fe.iterator||"@@iterator",Ie=Fe.asyncIterator||"@@asyncIterator",Ve=Fe.toStringTag||"@@toStringTag";function kt(_r,Ar,Er){return g(_r,Ar,{value:Er,enumerable:!0,configurable:!0,writable:!0}),_r[Ar]}try{kt({},"")}catch{kt=function(Ar,Er,sr){return Ar[Er]=sr}}function At(_r,Ar,Er,sr){var xr=Ar&&Ar.prototype instanceof cr?Ar:cr,Nr=i(xr.prototype),Mr=new wr(sr||[]);return ae(Nr,"_invoke",{value:gr(_r,Er,Mr)}),Nr}function ze(_r,Ar,Er){try{return{type:"normal",arg:_r.call(Ar,Er)}}catch(sr){return{type:"throw",arg:sr}}}le.wrap=At;var Et={};function cr(){}function er(){}function or(){}var dr={};kt(dr,de,function(){return this});var lr=k&&k(k(Sr([])));lr&&lr!==ue&&ie.call(lr,de)&&(dr=lr);var nr=or.prototype=cr.prototype=i(dr);function ur(_r){var Ar;L(Ar=["next","throw","return"]).call(Ar,function(Er){kt(_r,Er,function(sr){return this._invoke(Er,sr)})})}function ar(_r,Ar){var Er;ae(this,"_invoke",{value:function(sr,xr){function Nr(){return new Ar(function(Mr,br){(function yr(Tr,Br,Lr,Fr){var qr=ze(_r[Tr],_r,Br);if(qr.type!=="throw"){var Vr=qr.arg,Qr=Vr.value;return Qr&&n(Qr)=="object"&&ie.call(Qr,"__await")?Ar.resolve(Qr.__await).then(function(Tn){yr("next",Tn,Lr,Fr)},function(Tn){yr("throw",Tn,Lr,Fr)}):Ar.resolve(Qr).then(function(Tn){Vr.value=Tn,Lr(Vr)},function(Tn){return yr("throw",Tn,Lr,Fr)})}Fr(qr.arg)})(sr,xr,Mr,br)})}return Er=Er?Er.then(Nr,Nr):Nr()}})}function gr(_r,Ar,Er){var sr="suspendedStart";return function(xr,Nr){if(sr==="executing")throw new Error("Generator is already running");if(sr==="completed"){if(xr==="throw")throw Nr;return mr()}for(Er.method=xr,Er.arg=Nr;;){var Mr=Er.delegate;if(Mr){var br=pr(Mr,Er);if(br){if(br===Et)continue;return br}}if(Er.method==="next")Er.sent=Er._sent=Er.arg;else if(Er.method==="throw"){if(sr==="suspendedStart")throw sr="completed",Er.arg;Er.dispatchException(Er.arg)}else Er.method==="return"&&Er.abrupt("return",Er.arg);sr="executing";var yr=ze(_r,Ar,Er);if(yr.type==="normal"){if(sr=Er.done?"completed":"suspendedYield",yr.arg===Et)continue;return{value:yr.arg,done:Er.done}}yr.type==="throw"&&(sr="completed",Er.method="throw",Er.arg=yr.arg)}}}function pr(_r,Ar){var Er=Ar.method,sr=_r.iterator[Er];if(sr===void 0)return Ar.delegate=null,Er==="throw"&&_r.iterator.return&&(Ar.method="return",Ar.arg=void 0,pr(_r,Ar),Ar.method==="throw")||Er!=="return"&&(Ar.method="throw",Ar.arg=new TypeError("The iterator does not provide a '"+Er+"' method")),Et;var xr=ze(sr,_r.iterator,Ar.arg);if(xr.type==="throw")return Ar.method="throw",Ar.arg=xr.arg,Ar.delegate=null,Et;var Nr=xr.arg;return Nr?Nr.done?(Ar[_r.resultName]=Nr.value,Ar.next=_r.nextLoc,Ar.method!=="return"&&(Ar.method="next",Ar.arg=void 0),Ar.delegate=null,Et):Nr:(Ar.method="throw",Ar.arg=new TypeError("iterator result is not an object"),Ar.delegate=null,Et)}function hr(_r){var Ar={tryLoc:_r[0]};1 in _r&&(Ar.catchLoc=_r[1]),2 in _r&&(Ar.finallyLoc=_r[2],Ar.afterLoc=_r[3]),this.tryEntries.push(Ar)}function Cr(_r){var Ar=_r.completion||{};Ar.type="normal",delete Ar.arg,_r.completion=Ar}function wr(_r){this.tryEntries=[{tryLoc:"root"}],L(_r).call(_r,hr,this),this.reset(!0)}function Sr(_r){if(_r){var Ar=_r[de];if(Ar)return Ar.call(_r);if(typeof _r.next=="function")return _r;if(!isNaN(_r.length)){var Er=-1,sr=function xr(){for(;++Er<_r.length;)if(ie.call(_r,Er))return xr.value=_r[Er],xr.done=!1,xr;return xr.value=void 0,xr.done=!0,xr};return sr.next=sr}}return{next:mr}}function mr(){return{value:void 0,done:!0}}return er.prototype=or,ae(nr,"constructor",{value:or,configurable:!0}),ae(or,"constructor",{value:er,configurable:!0}),er.displayName=kt(or,Ve,"GeneratorFunction"),le.isGeneratorFunction=function(_r){var Ar=typeof _r=="function"&&_r.constructor;return!!Ar&&(Ar===er||(Ar.displayName||Ar.name)==="GeneratorFunction")},le.mark=function(_r){return $?$(_r,or):(_r.__proto__=or,kt(_r,Ve,"GeneratorFunction")),_r.prototype=i(nr),_r},le.awrap=function(_r){return{__await:_r}},ur(ar.prototype),kt(ar.prototype,Ie,function(){return this}),le.AsyncIterator=ar,le.async=function(_r,Ar,Er,sr,xr){xr===void 0&&(xr=V);var Nr=new ar(At(_r,Ar,Er,sr),xr);return le.isGeneratorFunction(Ar)?Nr:Nr.next().then(function(Mr){return Mr.done?Mr.value:Nr.next()})},ur(nr),kt(nr,Ve,"Generator"),kt(nr,de,function(){return this}),kt(nr,"toString",function(){return"[object Generator]"}),le.keys=function(_r){var Ar=Object(_r),Er=[];for(var sr in Ar)Er.push(sr);return z(Er).call(Er),function xr(){for(;Er.length;){var Nr=Er.pop();if(Nr in Ar)return xr.value=Nr,xr.done=!1,xr}return xr.done=!0,xr}},le.values=Sr,wr.prototype={constructor:wr,reset:function(_r){var Ar;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,L(Ar=this.tryEntries).call(Ar,Cr),!_r)for(var Er in this)Er.charAt(0)==="t"&&ie.call(this,Er)&&!isNaN(+re(Er).call(Er,1))&&(this[Er]=void 0)},stop:function(){this.done=!0;var _r=this.tryEntries[0].completion;if(_r.type==="throw")throw _r.arg;return this.rval},dispatchException:function(_r){if(this.done)throw _r;var Ar=this;function Er(yr,Tr){return Nr.type="throw",Nr.arg=_r,Ar.next=yr,Tr&&(Ar.method="next",Ar.arg=void 0),!!Tr}for(var sr=this.tryEntries.length-1;sr>=0;--sr){var xr=this.tryEntries[sr],Nr=xr.completion;if(xr.tryLoc==="root")return Er("end");if(xr.tryLoc<=this.prev){var Mr=ie.call(xr,"catchLoc"),br=ie.call(xr,"finallyLoc");if(Mr&&br){if(this.prev<xr.catchLoc)return Er(xr.catchLoc,!0);if(this.prev<xr.finallyLoc)return Er(xr.finallyLoc)}else if(Mr){if(this.prev<xr.catchLoc)return Er(xr.catchLoc,!0)}else{if(!br)throw new Error("try statement without catch or finally");if(this.prev<xr.finallyLoc)return Er(xr.finallyLoc)}}}},abrupt:function(_r,Ar){for(var Er=this.tryEntries.length-1;Er>=0;--Er){var sr=this.tryEntries[Er];if(sr.tryLoc<=this.prev&&ie.call(sr,"finallyLoc")&&this.prev<sr.finallyLoc){var xr=sr;break}}xr&&(_r==="break"||_r==="continue")&&xr.tryLoc<=Ar&&Ar<=xr.finallyLoc&&(xr=null);var Nr=xr?xr.completion:{};return Nr.type=_r,Nr.arg=Ar,xr?(this.method="next",this.next=xr.finallyLoc,Et):this.complete(Nr)},complete:function(_r,Ar){if(_r.type==="throw")throw _r.arg;return _r.type==="break"||_r.type==="continue"?this.next=_r.arg:_r.type==="return"?(this.rval=this.arg=_r.arg,this.method="return",this.next="end"):_r.type==="normal"&&Ar&&(this.next=Ar),Et},finish:function(_r){for(var Ar=this.tryEntries.length-1;Ar>=0;--Ar){var Er=this.tryEntries[Ar];if(Er.finallyLoc===_r)return this.complete(Er.completion,Er.afterLoc),Cr(Er),Et}},catch:function(_r){for(var Ar=this.tryEntries.length-1;Ar>=0;--Ar){var Er=this.tryEntries[Ar];if(Er.tryLoc===_r){var sr=Er.completion;if(sr.type==="throw"){var xr=sr.arg;Cr(Er)}return xr}}throw new Error("illegal catch attempt")},delegateYield:function(_r,Ar,Er){return this.delegate={iterator:Sr(_r),resultName:Ar,nextLoc:Er},this.method==="next"&&(this.arg=void 0),Et}},le}t.exports=oe,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(659)},function(t,r,e){t.exports=e(660)},function(t,r,e){var n=e(661);t.exports=n},function(t,r,e){var n=e(236);t.exports=n},function(t,r,e){t.exports=e(663)},function(t,r,e){var n=e(664);e(665),e(666),e(667),e(668),t.exports=n},function(t,r,e){var n=e(238);t.exports=n},function(t,r,e){e(239)},function(t,r,e){e(253)},function(t,r,e){var n=e(1),g=e(76),y=e(106);n({target:"Promise",stat:!0,forced:!0},{try:function(i){var k=g.f(this),L=y(i);return(L.error?k.reject:k.resolve)(L.value),k.promise}})},function(t,r,e){e(254)},function(t,r,e){t.exports=e(670)},function(t,r,e){t.exports=e(671)},function(t,r,e){var n=e(672);t.exports=n},function(t,r,e){var n=e(283);t.exports=n},function(t,r,e){t.exports=e(674)},function(t,r,e){var n=e(675);t.exports=n},function(t,r,e){var n=e(257);t.exports=n},function(t,r,e){var n=e(152),g=e(22),y=e(23),i=e(4),k=e(6),L=e(56),$=e(44),V=e(45),z=e(153),re=e(154),oe=e(122);function le(Ve){var kt=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var At,ze=oe(Ve);if(kt){var Et=oe(this).constructor;At=n(ze,arguments,Et)}else At=ze.apply(this,arguments);return re(this,At)}}var ue=e(141),ie=e(677),ae=e(698),Fe=e(35),de=e(0).get,Ie=e(0);t.exports=function(Ve){z(At,Ve);var kt=le(At);function At(ze){var Et,cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $(this,At),(Et=kt.call(this)).binaryType="arraybuffer",Et.clientProto=ze,Et.logger=ze.logger,Et.config=cr,Et.websocket=null,Et.socketUrl="",Et.socketConnectTimer=0,Et.status="disconnected",Et.socket={sessionid:"",connected:!1},Et}return V(At,[{key:"setSessionId",value:function(ze){this.socket.sessionid=ze}},{key:"connect",value:function(ze){this.status="connecting",ze=ze.replace(/http(s)?:\/\//,"");var Et=this.clientProto.options.secure?"wss":"ws";this._createWebsocket(Et+"://"+ze+"/websocket")}},{key:"disconnect",value:function(){if(this.status="disconnected",this.socket.connected=!1,this.websocket){this.logger.log("imwebsocket:: close websocket");try{this.websocket.close()}catch(ze){this.logger.warn("imwebsocket::attempt to close websocket error",ze)}this._clean()}}},{key:"removeAllListenersX",value:function(ze){this.removeListener(ze)}},{key:"_clean",value:function(){this.status="disconnected",this.socket.connected=!1,this.socketConnectTimer&&clearTimeout(this.socketConnectTimer),this.websocket&&(this.socketUrl=void 0,this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null)}},{key:"_onConnect",value:function(){this.status="connected",this.socket.connected=!0,this.emit("connect"),this.socketConnectTimer&&clearTimeout(this.socketConnectTimer)}},{key:"_createWebsocket",value:function(ze){var Et,cr=this,er=this;this.socketConnectTimer=g(function(){cr.logger.error("imwebsocket::Websocket connect timeout. url: ",cr.socketUrl),cr.emit("connect_failed","imwebsocket::Websocket connect timeout")},this.config.connectTimeout||8e3),this.socketUrl=ze,this.websocket=new WebSocket(ze),this.websocket.binaryType=this.binaryType,this.websocket.onmessage=y(Et=this._onMessage).call(Et,this),this.websocket.onclose=function(){er.logger.log("imwebsocket::Websocket onclose done"),er.status==="connected"?(er._clean(),cr.emit("websocketOnclose"),cr.emit("disconnect")):(er._clean(),cr.emit("connect_failed","imwebsocket::Websocket onclose"))},this.websocket.onerror=function(or){er.logger.error("imwebsocket::Websocket onerror",or),er.status==="connected"?(er._clean(),cr.emit("websocketOnclose"),cr.emit("disconnect")):(er._clean(),cr.emit("connect_failed","imwebsocket::Websocket onerror"))},this.websocket.onopen=function(){er._onConnect()}}},{key:"_onMessage",value:function(ze){if(ze.data){var Et,cr=new ae(ze.data),er={sid:-1,cid:-1,ser:-1,packetLength:-1},or=null;try{cr.unmarshalHeader(),er=cr.getHeader(),or=cr.getInnerHeader()}catch(Cr){er=cr.getHeader(),or=cr.getInnerHeader(),this.reportBinaryError({err:Cr,sid:or?or.sid:er.sid,cid:or?or.cid:er.cid,type:"decode"})}var dr=or?or.sid:er.sid,lr=or?or.cid:er.cid,nr=i(Et="".concat(dr,"_")).call(Et,lr),ur=de(this.clientProto,"parser.configMap.packetConfig.".concat(nr));if(ur){var ar;try{ar=cr.unmarshal(ur.response)}catch(Cr){var gr,pr,hr;return this.reportBinaryError({err:Cr,sid:dr,cid:lr,type:"decode"}),cr.reset(),er.code=998,er.sid=dr,er.cid=lr,this.clientProto.logger.error(i(gr=i(pr=i(hr='imwebsocket::onMessage "'.concat(dr,"_")).call(hr,lr,'", ser ')).call(pr,er.ser,", packetLength ")).call(gr,er.packetLength," unmarshal error"),Cr),void this.emit("message",k(er))}this.emit("message",ar)}else this.clientProto.logger.warn("imwebsocket::onMessage cmd not found",nr);cr.reset()}}},{key:"send",value:function(ze,Et){var cr=new ie(ze.SID,ze.CID,ze.SER),er=de(this.clientProto,"parser.configMap.cmdConfig.".concat(Et));if(!er)throw new Fe('imwebsocket::send "'.concat(Et,'" cmdConfig not found'),999);var or,dr=er.params,lr="";try{lr=k(ze.Q),or=cr.marshal(ze.Q,dr)}catch(nr){throw this.reportBinaryError({err:nr,sid:ze.SID,cid:ze.CID,rawStr:lr,type:"encode"}),cr.pack.reset(),new Fe('imwebsocket::send "'.concat(Et,'" marshal error'),999,{rawError:nr})}this.websocket.send(or),cr.pack.reset()}},{key:"reportBinaryError",value:function(ze){var Et,cr=this.clientProto,er=ze.err,or=ze.rawStr,dr=ze.sid,lr=ze.cid,nr=ze.type;cr.reporter.reportTraceStart("exceptions",{user_id:cr.account,trace_id:Ie.get(cr,"socket.socket.sessionid"),start_time:L(),action:2,exception_service:9}),cr.reporter.reportTraceUpdateV2("exceptions",{code:nr==="encode"?999:998,description:er&&(er.message||"".concat(er.code))+" rawObj: ".concat(or),operation_type:nr==="encode"?3:4,target:i(Et="".concat(dr,"-")).call(Et,lr)}),cr.reporter.reportTraceEnd("exceptions",1)}}]),At}(ue)},function(t,r,e){var n=e(5),g=e(15),y=e(2),i=e(28),k=e(6),L=e(44),$=e(45),V=e(678);function z(oe){if(typeof oe!="number"){if(oe==null)return!1;oe=Number(oe)}if(isNaN(oe))throw new Error("Number type conversion error");return!0}function re(oe){return oe==null}t.exports=function(){function oe(le,ue,ie){L(this,oe),this.pack=new V,this.packetLength=0,this.serviceId=le,this.commandId=ue,this.serialId=ie,this.tag=0}return $(oe,[{key:"marshalHeader",value:function(){this.pack.putVarInt(this.packetLength),this.pack.putByte(this.serviceId),this.pack.putByte(this.commandId),this.pack.putShort(this.serialId),this.pack.putByte(this.tag)}},{key:"marshalProperty",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){return!re(Fe)});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){ue.pack.putVarInt(Number(Fe)),i(le[Fe])||Object.prototype.toString.call(le[Fe])==="[object Object]"?ue.pack.putString(k(le[Fe])):ue.pack.putString(String(le[Fe]))})}},{key:"marshalPropertyArray",value:function(le){var ue=this,ie=le.length;this.pack.putVarInt(ie),y(le).call(le,function(ae){ue.marshalProperty(ae&&ae.v)})}},{key:"marshalStrArray",value:function(le){var ue=this,ie=g(le).call(le,function(Fe){return!re(Fe)}),ae=ie.length;this.pack.putVarInt(ae),y(ie).call(ie,function(Fe){ue.pack.putString(String(Fe))})}},{key:"marshalLongArray",value:function(le){var ue=this,ie=g(le).call(le,function(Fe){return z(Fe)}),ae=ie.length;this.pack.putVarInt(ae),y(ie).call(ie,function(Fe){ue.putLong(Fe)})}},{key:"marshalStrStrMap",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){return!re(le[Fe])&&!re(Fe)});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){ue.pack.putString(String(Fe)),ue.pack.putString(String(le[Fe]))})}},{key:"marshalStrLongMap",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){return z(le[Fe])&&!re(Fe)});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){ue.pack.putString(String(Fe)),ue.putLong(le[Fe])})}},{key:"marshalLongLongMap",value:function(le){var ue=this,ie=n(le),ae=g(ie).call(ie,function(Fe){var de=Number(Fe);return z(de)&&z(le[de])});this.pack.putVarInt(ae.length),y(ae).call(ae,function(Fe){var de=Number(Fe);ue.putLong(de),ue.putLong(le[de])})}},{key:"marshalKVArray",value:function(le){var ue=this,ie=le.length;this.pack.putVarInt(ie),y(le).call(le,function(ae){ue.marshalStrStrMap(ae)})}},{key:"putLong",value:function(le){typeof le=="string"&&le.length>15?this.pack.putStringAsLong(le):this.pack.putLong(Number(le))}},{key:"marshal",value:function(le,ue){var ie=this;return this.marshalHeader(),ue&&y(ue).call(ue,function(ae,Fe){var de=ae.type,Ie=le[Fe]&&le[Fe].v;if(!re(Ie))switch(de){case"PropertyArray":ie.marshalPropertyArray(Ie);break;case"Property":ie.marshalProperty(Ie);break;case"Byte":if(!z(Ie))return;ie.pack.putByte(Number(Ie));break;case"Int":if(!z(Ie))return;ie.pack.putInt(Number(Ie));break;case"Bool":Ie==="false"?Ie=!1:Ie==="true"&&(Ie=!0),ie.pack.putBoolean(Ie);break;case"Long":if(!z(Ie))return;ie.putLong(Ie);break;case"LongArray":ie.marshalLongArray(Ie);break;case"String":ie.pack.putString(String(Ie));break;case"StrArray":ie.marshalStrArray(Ie);break;case"StrStrMap":ie.marshalStrStrMap(Ie);break;case"StrLongMap":ie.marshalStrLongMap(Ie);break;case"LongLongMap":ie.marshalLongLongMap(Ie);break;case"KVArray":ie.marshalKVArray(Ie)}}),this.pack.getBuffer()}}]),oe}()},function(t,r,e){var n=e(9),g=e(44),y=e(45),i=e(295),k=i.encodeText,L=i.setBigUint64,$=i.setBigUint64ForNumberOverflow,V=i.varintToBytes;t.exports=function(){function z(){g(this,z),this.buffer=new Uint8Array(this.pageSize),this.view=new DataView(this.buffer.buffer),this.offset=0,this.pageSize=1024,this.capacity=1048576}return y(z,[{key:"reset",value:function(){this.offset=0,this.buffer=null,this.view=null}},{key:"size",value:function(){return this.offset}},{key:"getBuffer",value:function(){var re;return n(re=this.buffer).call(re,0,this.offset).buffer}},{key:"ensureCapacity",value:function(re){var oe=this.offset+re;if(oe>this.capacity)throw new Error("PackException over limit");if(oe>this.buffer.byteLength){var le=Math.ceil(oe/this.pageSize)*this.pageSize,ue=new Uint8Array(le);ue.set(this.buffer),this.buffer=ue,this.view=new DataView(this.buffer.buffer)}}},{key:"putRaw",value:function(re){this.ensureCapacity(re.length);try{this.buffer.set(re,this.offset),this.offset+=re.length}catch{throw new Error("PackException raw")}}},{key:"putByte",value:function(re){this.ensureCapacity(1);try{this.view.setUint8(this.offset++,re)}catch{throw new Error("PackException byte")}}},{key:"putString",value:function(re){try{var oe=k(re);this.putVarbin(oe)}catch{throw new Error("PackException string")}}},{key:"putInt",value:function(re){this.ensureCapacity(4);try{this.view.setInt32(this.offset,re,!0),this.offset+=4}catch{throw new Error("PackException int")}}},{key:"putVarInt",value:function(re){var oe=V(re);this.putRaw(oe)}},{key:"putBoolean",value:function(re){this.ensureCapacity(1);try{this.view.setUint8(this.offset++,re?1:0)}catch{throw new Error("PackException boolean")}}},{key:"putLong",value:function(re){this.ensureCapacity(8);try{var oe=L(re,!0);this.buffer.set(oe,this.offset),this.offset+=8}catch{throw new Error("PackException long")}}},{key:"putStringAsLong",value:function(re){this.ensureCapacity(8);try{var oe=$(re,!0);this.buffer.set(oe,this.offset),this.offset+=8}catch{throw new Error("PackException stringAsLong")}}},{key:"putShort",value:function(re){this.ensureCapacity(2);try{this.view.setInt16(this.offset,re,!0),this.offset+=2}catch{throw new Error("PackException short")}}},{key:"putVarbin",value:function(re){if(!re)return this.ensureCapacity(1),this.putVarInt(0);if(re.byteLength>Math.pow(2,31)-2)throw new Error("PackException varbin");var oe=V(re.length);this.ensureCapacity(oe.length+re.length);try{this.buffer.set(oe,this.offset),this.offset+=oe.length,this.buffer.set(re,this.offset),this.offset+=re.length}catch{throw new Error("PackException varbin")}}}]),z}()},function(t,r,e){t.exports=e(680)},function(t,r,e){var n=e(681);t.exports=n},function(t,r,e){var n=e(18),g=e(682),y=String.prototype;t.exports=function(i){var k=i.codePointAt;return typeof i=="string"||i===y||n(y,i)&&k===y.codePointAt?g:k}},function(t,r,e){e(683);var n=e(27);t.exports=n("String").codePointAt},function(t,r,e){var n=e(1),g=e(234).codeAt;n({target:"String",proto:!0},{codePointAt:function(y){return g(this,y)}})},function(t,r,e){t.exports=e(685)},function(t,r,e){var n=e(686);t.exports=n},function(t,r,e){e(687);var n=e(14);t.exports=n.String.fromCodePoint},function(t,r,e){var n=e(1),g=e(13),y=e(114),i=RangeError,k=String.fromCharCode,L=String.fromCodePoint,$=g([].join);n({target:"String",stat:!0,arity:1,forced:!!L&&L.length!=1},{fromCodePoint:function(V){for(var z,re=[],oe=arguments.length,le=0;oe>le;){if(z=+arguments[le++],y(z,1114111)!==z)throw i(z+" is not a valid code point");re[le]=z<65536?k(z):k(55296+((z-=65536)>>10),z%1024+56320)}return $(re,"")}})},function(t,r,e){var n=e(313);t.exports=function(g){if(n(g))return g},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(690)},function(t,r,e){var n=e(691);t.exports=n},function(t,r,e){var n=e(235);t.exports=n},function(t,r,e){var n=e(158),g=e(64);t.exports=function(y,i){var k=y==null?null:n!==void 0&&g(y)||y["@@iterator"];if(k!=null){var L,$,V,z,re=[],oe=!0,le=!1;try{if(V=(k=k.call(y)).next,i===0){if(Object(k)!==k)return;oe=!1}else for(;!(oe=(L=V.call(k)).done)&&(re.push(L.value),re.length!==i);oe=!0);}catch(ue){le=!0,$=ue}finally{try{if(!oe&&k.return!=null&&(z=k.return(),Object(z)!==z))return}finally{if(le)throw $}}return re}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(694)},function(t,r,e){var n=e(695);t.exports=n},function(t,r,e){var n=e(261);t.exports=n},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(121),g=e(43),y=e(63),i=function(re){var oe;if(re!==void 0)return(oe=z(re)).sign=1,oe},k=function(re){return Object.prototype.toString.call(re)==="[object Array]"},L=function(re){var oe;return n(oe=[typeof re=="number",typeof re=="string"&&re.length>0,k(re)&&re.length>0,re instanceof z]).call(oe,function(le){return le===!0})},$="Invalid Number",V="Invalid Number - Division By Zero";function z(re){var oe;if(!(this instanceof z))return new z(re);if(this.number=[],this.sign=1,this.rest=0,L(re)){if(k(re)){for((re.length&&re[0]==="-"||re[0]==="+")&&(this.sign=re[0]==="+"?1:-1,re.shift(0)),oe=re.length-1;oe>=0;oe--)if(!this.addDigit(re[oe]))return}else for((re=re.toString()).charAt(0)!=="-"&&re.charAt(0)!=="+"||(this.sign=re.charAt(0)==="+"?1:-1,re=re.substring(1)),oe=re.length-1;oe>=0;oe--)if(!this.addDigit(g(re.charAt(oe),10)))return}else this.number=$}z.prototype.addDigit=function(re){return function(oe){return/^\d$/.test(oe)}(re)?(this.number.push(re),this):(this.number=$,!1)},z.prototype._compare=function(re){var oe,le;if(!L(re))return null;if(oe=z(re),this.sign!==oe.sign)return this.sign;if(this.number.length>oe.number.length)return this.sign;if(this.number.length<oe.number.length)return-1*this.sign;for(le=this.number.length-1;le>=0;le--){if(this.number[le]>oe.number[le])return this.sign;if(this.number[le]<oe.number[le])return-1*this.sign}return 0},z.prototype.gt=function(re){return this._compare(re)>0},z.prototype.gte=function(re){return this._compare(re)>=0},z.prototype.equals=function(re){return this._compare(re)===0},z.prototype.lte=function(re){return this._compare(re)<=0},z.prototype.lt=function(re){return this._compare(re)<0},z.prototype.subtract=function(re){var oe;return re===void 0?this:(oe=z(re),this.sign!==oe.sign?(this.number=z._add(this,oe),this):(this.sign=this.lt(oe)?-1:1,this.number=i(this).lt(i(oe))?z._subtract(oe,this):z._subtract(this,oe),this))},z._add=function(re,oe){var le,ue=0,ie=Math.max(re.number.length,oe.number.length);for(le=0;le<ie||ue>0;le++)re.number[le]=(ue+=(re.number[le]||0)+(oe.number[le]||0))%10,ue=Math.floor(ue/10);return re.number},z._subtract=function(re,oe){var le,ue,ie=0,ae=re.number.length;for(le=0;le<ae;le++)re.number[le]-=(oe.number[le]||0)+ie,re.number[le]+=10*(ie=re.number[le]<0?1:0);for(le=0,ae=re.number.length-1;re.number[ae-le]===0&&ae-le>0;)le++;return le>0&&y(ue=re.number).call(ue,-le),re.number},z.prototype.multiply=function(re){if(re===void 0)return this;var oe,le,ue=z(re),ie=0,ae=[];if(this.isZero()||ue.isZero())return z(0);for(this.sign*=ue.sign,oe=0;oe<this.number.length;oe++)for(ie=0,le=0;le<ue.number.length||ie>0;le++)ae[oe+le]=(ie+=(ae[oe+le]||0)+this.number[oe]*(ue.number[le]||0))%10,ie=Math.floor(ie/10);return this.number=ae,this},z.prototype.divide=function(re){if(re===void 0)return this;var oe,le,ue=z(re),ie=[],ae=z(0);if(ue.isZero())return this.number=V,this;if(this.isZero())return this.rest=z(0),this;if(this.sign*=ue.sign,ue.sign=1,ue.number.length===1&&ue.number[0]===1)return this.rest=z(0),this;for(oe=this.number.length-1;oe>=0;oe--)for(ae.multiply(10),ae.number[0]=this.number[oe],ie[oe]=0;ue.lte(ae);)ie[oe]++,ae.subtract(ue);for(oe=0,le=ie.length-1;ie[le-oe]===0&&le-oe>0;)oe++;return oe>0&&y(ie).call(ie,-oe),this.rest=ae,this.number=ie,this},z.prototype.mod=function(re){return this.divide(re).rest},z.prototype.isZero=function(){var re;for(re=0;re<this.number.length;re++)if(this.number[re]!==0)return!1;return!0},z.prototype.toString=function(){var re,oe="";if(typeof this.number=="string")return this.number;for(re=this.number.length-1;re>=0;re--)oe+=this.number[re];return this.sign>0?oe:"-"+oe},t.exports=z},function(t,r,e){var n=e(51),g=e(95),y=e(6),i=e(2),k=e(5),L=e(52),$=e(15),V=e(53),z=e(54),re=e(55),oe=e(42),le=e(44),ue=e(45);function ie(de,Ie){var Ve=k(de);if(L){var kt=L(de);Ie&&(kt=$(kt).call(kt,function(At){return V(de,At).enumerable})),Ve.push.apply(Ve,kt)}return Ve}function ae(de){for(var Ie=1;Ie<arguments.length;Ie++){var Ve,kt,At=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?i(Ve=ie(Object(At),!0)).call(Ve,function(ze){n(de,ze,At[ze])}):z?re(de,z(At)):i(kt=ie(Object(At))).call(kt,function(ze){oe(de,ze,V(At,ze))})}return de}var Fe=e(699);t.exports=function(){function de(Ie){le(this,de),this.unpack=new Fe(Ie),this.packetLength=0,this.serviceId=0,this.commandId=0,this.serialId=0,this.tag=0,this.resCode=200,this.innerHeader=null,this.msgId=0}return ue(de,[{key:"reset",value:function(){this.innerHeader=null,this.unpack.reset()}},{key:"unmarshalHeader",value:function(){var Ie,Ve=this._unmarshalHeader();this.packetLength=Ve.packetLength,this.serviceId=Ve.serviceId,this.commandId=Ve.commandId,this.serialId=Ve.serialId,this.tag=Ve.tag,this.resCode=Ve.resCode,Ve.serviceId===4&&g(Ie=[1,2,10,11]).call(Ie,Ve.commandId)&&(this.msgId=this.unmarshalLong(),this.innerHeader=this._unmarshalHeader())}},{key:"_unmarshalHeader",value:function(){var Ie=this.unpack.popVarInt(),Ve=this.unpack.popByte(),kt=this.unpack.popByte(),At=this.unpack.popShort(),ze=this.unpack.popByte(),Et=200;return this.hasRescode(ze)&&(Et=this.unpack.popShort()),{packetLength:Ie,serviceId:Ve,commandId:kt,serialId:At,tag:ze,resCode:Et}}},{key:"hasRescode",value:function(Ie){return(2&(Ie=Ie||this.tag))!=0}},{key:"getHeader",value:function(){return{packetLength:this.packetLength,sid:this.serviceId,cid:this.commandId,ser:this.serialId,code:this.resCode}}},{key:"getInnerHeader",value:function(){return this.innerHeader?{sid:this.innerHeader.serviceId,cid:this.innerHeader.commandId}:null}},{key:"unmarshalProperty",value:function(){for(var Ie=this.unpack.popVarInt(),Ve={},kt=0;kt<Ie;kt++){var At=this.unpack.popVarInt(),ze=this.unpack.popString();Ve[At]=ze}return Ve}},{key:"unmarshalPropertyArray",value:function(){for(var Ie=this.unpack.popVarInt(),Ve=[],kt=0;kt<Ie;kt++)Ve.push(this.unmarshalProperty());return Ve}},{key:"unmarshalLong",value:function(){return this.unpack.popLong()}},{key:"unmarshalLongArray",value:function(){for(var Ie=this.unpack.popVarInt(),Ve=[],kt=0;kt<Ie;kt++)Ve.push(this.unpack.popLong());return Ve}},{key:"unmarshalStrArray",value:function(){for(var Ie=this.unpack.popVarInt(),Ve=[],kt=0;kt<Ie;kt++)Ve.push(this.unpack.popString());return Ve}},{key:"unmarshalStrLongMap",value:function(){for(var Ie=this.unpack.popVarInt(),Ve={},kt=0;kt<Ie;kt++){var At=this.unpack.popString(),ze=this.unpack.popLong();Ve[At]=ze}return Ve}},{key:"unmarshalStrStrMap",value:function(){for(var Ie=this.unpack.popVarInt(),Ve={},kt=0;kt<Ie;kt++){var At=this.unpack.popString(),ze=this.unpack.popString();Ve[At]=ze}return Ve}},{key:"unmarshalLongLongMap",value:function(){for(var Ie=this.unpack.popVarInt(),Ve={},kt=0;kt<Ie;kt++){var At=this.unpack.popLong(),ze=this.unpack.popLong();Ve[At]=ze}return{m_map:Ve}}},{key:"unmarshalKVArray",value:function(){for(var Ie=this.unpack.popVarInt(),Ve=[],kt=0;kt<Ie;kt++)Ve.push(this.unmarshalStrStrMap());return Ve}},{key:"unmarshal",value:function(Ie){var Ve,kt=this,At=ae(ae({},this.getHeader()),{},{r:[]});if(this.innerHeader&&(At.r[0]=this.msgId,At.r[1]={body:[],headerPacket:this.getInnerHeader()}),!g(Ve=[200,406,808,810,7101]).call(Ve,At.code))return y(At);var ze=[];return Ie&&i(Ie).call(Ie,function(Et){if(!kt.unpack.checkBufferBoundaryAccess())switch(Et.type){case"PropertyArray":ze.push(kt.unmarshalPropertyArray());break;case"Property":ze.push(kt.unmarshalProperty());break;case"Byte":ze.push(kt.unpack.popByte());break;case"Int":ze.push(kt.unpack.popInt());break;case"Bool":ze.push(kt.unpack.popBoolean());break;case"Long":ze.push(kt.unmarshalLong());break;case"LongArray":ze.push(kt.unmarshalLongArray());break;case"String":ze.push(kt.unpack.popString());break;case"StrArray":ze.push(kt.unmarshalStrArray());break;case"StrStrMap":ze.push(kt.unmarshalStrStrMap());break;case"StrLongMap":ze.push(kt.unmarshalStrLongMap());break;case"LongLongMap":ze.push(kt.unmarshalLongLongMap());break;case"KVArray":ze.push(kt.unmarshalKVArray())}}),this.innerHeader?At.r[1].body=ze:At.r=ze,y(At)}}]),de}()},function(t,r,e){var n=e(9),g=e(68),y=e(44),i=e(45),k=e(295),L=k.decodeText,$=k.getBigUint64;t.exports=function(){function V(z){y(this,V),this.buffer=new Uint8Array(z),this.view=new DataView(z),this.offset=0}return i(V,[{key:"checkBufferBoundaryAccess",value:function(){return this.offset>=this.buffer.byteLength}},{key:"length",value:function(){return this.view&&this.view.byteLength||0}},{key:"getBuffer",value:function(){return this.view.buffer}},{key:"popRaw",value:function(z){try{var re,oe=n(re=this.buffer).call(re,this.offset,this.offset+z);return this.offset+=z,oe}catch{throw new Error("UnpackException raw")}}},{key:"popByte",value:function(){try{var z=this.view.getUint8(this.offset);return this.offset+=1,z}catch{throw new Error("UnpackException byte ")}}},{key:"popVarbin",value:function(){return this.popRaw(this.popVarInt())}},{key:"popString",value:function(){try{var z=this.popVarbin();return L(z)}catch{throw new Error("UnpackException string")}}},{key:"popInt",value:function(){try{var z=this.view.getUint32(this.offset,!0);return this.offset+=4,z}catch{throw new Error("UnpackException int")}}},{key:"popVarInt",value:function(){var z=1,re=0,oe=0;do re+=(127&(oe=this.popByte()))*z,z*=128;while(128&oe);return re}},{key:"popLong",value:function(){try{var z,re=$(n(z=this.buffer).call(z,this.offset,this.offset+8),!0);return this.offset+=8,Number(re)}catch{throw new Error("UnpackException long")}}},{key:"popShort",value:function(){try{var z=this.view.getUint16(this.offset,!0);return this.offset+=2,z}catch{throw new Error("UnpackException short")}}},{key:"popBoolean",value:function(){return this.popByte()>0}},{key:"toString",value:function(){return g(new Uint8Array(this.buffer)).toString()}},{key:"reset",value:function(){this.offset=0,this.buffer=null,this.view=null}}]),V}()},function(t,r,e){var n=e(60),g=e(61),y=e(2),i=e(4),k=e(9),L=e(63),$=e(22),V=e(95),z=e(3),re=e(23),oe=e(82).fn,le=e(35),ue=e(701),ie=e(12),ae=e(0),Fe=e(702);function de(){this.logger.log("offlineListener enter"),this.forceDisconnect(),this.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to network offline")),this.options.ondisconnect&&this.options.ondisconnect({code:"offlineListener",callFunc:"link::offlineListener",message:"offlineListener disconnect"}),this.onDisconnect("link::offlineListener","broken")}function Ie(){var Ve=this;this.logger.log("onlineListener start"),this&&this.isConnected()&&!this.connecting?(this.stopHeartbeat(),this.sendCmd("heartbeat",null,function(kt){if(kt){Ve.logger.info("onlineListener heartbeat detect error",kt);try{Ve.forceDisconnect(),Ve.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to heartbeat error")),Ve.onDisconnect("link::onHeartbeat","broken")}catch(At){Ve.logger.info("onlineListener heartbeat websocket.onclose",At)}}else Ve.logger.log("onlineListener heartbeat detect success")})):this.logger.log("onlineListener disconnected or connecting",this&&this.isConnected(),this.connecting)}oe.initConnect=function(){this.socket=null,this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.doLogout=!1},oe.resetConnect=function(){var Ve=this.options;ae.notundef(Ve.needReconnect)?(ae.verifyParamType("needReconnect",Ve.needReconnect,"boolean","link::resetConnect"),this.needReconnect=Ve.needReconnect):this.needReconnect=!0,this.logger.info("link::resetConnect: needReconnect ".concat(this.needReconnect)),ae.notundef(Ve.reconnectionAttempts)&&ae.verifyParamType("reconnectionAttempts",Ve.reconnectionAttempts,"number","link::resetConnect"),ae.notundef(Ve.noCacheLinkUrl)&&ae.verifyParamType("noCacheLinkUrl",Ve.noCacheLinkUrl,"boolean","link::resetConnect"),this.reconnectionAttempts=typeof Ve.reconnectionAttempts=="number"?Ve.reconnectionAttempts:1/0,this.backoff=new ue({min:ie.reconnectionDelay,max:ie.reconnectionDelayMax,jitter:ie.reconnectionJitter})},oe.reportTCPException=function(Ve){var kt=this;y(Ve).call(Ve,function(At,ze){var Et,cr=At.event,er=cr===void 0?{}:cr,or=At.message,dr=er.startTime,lr=er.code,nr=er.reason,ur=er.url,ar="";or==="handshake_failed"?ar="handshake_failed":or==="connect_failed"?ar=nr?"connect_failed:".concat(nr):"connect_failed":or==="socket_error"&&(ar=nr?"socket.io error:".concat(nr):"socket.io error"),kt.logger.warn(i(Et="connect::failed ".concat(ze,", ")).call(Et,ar),At),kt.reporter.reportTraceStart("exceptions",{user_id:kt.options.account,trace_id:ae.get(self,"socket.socket.sessionid"),start_time:dr,action:0,exception_service:6}),kt.reporter.reportTraceUpdateV2("exceptions",{code:lr,description:or,operation_type:0,target:ur,net_connect:kt.checkNetworkAvailable()}),kt.reporter.reportTraceEnd("exceptions",1)})},oe.connect=g(n.mark(function Ve(){var kt,At,ze,Et,cr;return n.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:if(ze=this,clearTimeout(ze.connectTimer),!ze.isConnected()){er.next=5;break}return ze.logger.warn("link::connect: already connected"),er.abrupt("return");case 5:if(!ze.connecting){er.next=8;break}return ze.logger.warn("link::connect: already connecting"),er.abrupt("return");case 8:if(ze.connecting=!0,ze.hasNotifyDisconnected=!1,ze.shouldReconnect=!0,ze.socket&&ze.forceDisconnect(),ze.logger.info("link::connect: connect to new socket, autoconnect is "+ze.autoconnect),typeof ze.options.socketUrl=="string"&&(ze.logger.info("link::connect: try to options.socketUrl ",ze.options.socketUrl),ze.socketUrls=[ze.options.socketUrl]),er.prev=14,ze.socketUrls&&ze.socketUrls.length>0){er.next=20;break}return er.next=18,ze.refreshSocketUrl();case 18:ze.socketUrls=Fe(ze.socketUrls),ze.logger.info("link::connect: refreshSocketUrl success, socketConcurrent ".concat(ze.imsocket.config.socketConcurrent),ze.socketUrls);case 20:er.next=28;break;case 22:return er.prev=22,er.t0=er.catch(14),ze.logger.warn("connect::refreshSocketUrl: catch exception,",er.t0&&er.t0.message),ze.connecting=!1,this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"refresh socket url fail"}),er.abrupt("return");case 28:return ze.imsocket.resetSockets(),ze.imsocket.setUrls(k(kt=ze.socketUrls).call(kt,0)),L(At=ze.socketUrls).call(At,0,ze.imsocket.config.socketConcurrent),er.prev=31,er.next=34,ze.promiseAbortManager.add(ze.imsocket.connect());case 34:ze.socket=er.sent,ze.onConnect(),er.next=47;break;case 38:er.prev=38,er.t1=er.catch(31),Et=er.t1,cr="",er.t1.errors&&(ze.reportTCPException(er.t1.errors),Et=er.t1.errors[0]),Et.message==="handshake_failed"?(ze.onHandshakeFailed(Et.event.startTime,Et.event.url),cr="link::onHandshakeFailed"):Et.message==="connect_failed"?(ze.onConnectFailed(Et.event.reason,Et.event.startTime,Et.event.url),cr="link::onConnectFailed"):Et.message==="socket_error"?(ze.onSocketError(Et.event.reason,Et.event.startTime,Et.event.url),cr="link::onSocketError"):Et.message==="Request aborted"?(ze.imsocket.resetSockets(),cr="link:RequestAborted"):(cr="link::otherFailed",ze.logger.warn("link::otherFailed",Et)),this.statusProtector.processEvent("auth/loginLifeCycleConnectFail",Et),ze.connecting=!1,ze.willReconnect()?ze.onDisconnect(cr,"broken"):this.options.ondisconnect({code:"initConnectFail",callFunc:"ProtocolFn.connect",message:"init connect fail"});case 47:case"end":return er.stop()}},Ve,this,[[14,22],[31,38]])})),oe.isConnected=function(){return!!this.socket&&!!this.socket.socket&&this.socket.socket.connected},oe.getLoginStatus=function(){return this.statusProtector.getLoginStatus()},oe.disconnect=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},kt=this;function At(ze){clearTimeout(kt.disconnectCallbackTimer),kt.msgAckBufferManager&&kt.msgAckBufferManager.clear(),kt.roamingMsgSyncDoneBufferManager&&kt.roamingMsgSyncDoneBufferManager.clear(),$(function(){Ve(ze)},0)}clearTimeout(kt.connectTimer),kt.disconnectCallbackTimer=$(function(){Ve.call(kt,"mark disconnected due to timeout")},1e4),kt.mixStorePolicy=null,kt.appGrayConfig=null,kt.resetReconnectStatus(),clearTimeout(kt.mixStorePolicyClock),this.onlineListener&&typeof window<"u"&&ae.isFunction(window.removeEventListener)&&(window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener),this.onlineListener=null,this.offlineListener=null),kt.statusProtector.processEvent("auth/loginLifeCycleLogout"),kt.isConnected()?(kt.logger.warn("link::disconnect: start disconnecting"),kt.logout()):kt.connecting?(kt.logger.warn("link::disconnect: abort connecting"),kt.disconnectSocket()):(kt.logger.warn("link::disconnect: already disconnected"),kt.connecting=!1,kt.shouldReconnect=!1,kt.socket=null,kt.autoconnect=!1,kt.options.ondisconnect({code:"alreadyDisconnected",callFunc:"link::disconnect",message:"manually disconnect status"})),kt.socket&&kt.socket.socket&&kt.socket.socket.transport?kt.socket.socket.transport.onDisconnectDone=function(ze){kt.logger.warn("link::disconnect: invoke [done] when socket closed",ze),At(ze)}:(kt.logger.warn("link::disconnect: invoke [done]"),At(null))},oe.resetReconnectStatus=function(){this.backoff&&(this.backoff.setMin(ie.reconnectionDelay),this.backoff.setMax(ie.reconnectionDelayMax),this.backoff.reset()),this.retryCount=0,this.logger.info("link::resetReconnectStatus: reset retryCount and backoff")},oe.onConnect=function(){this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.logger.info("link::onConnect success"),this.statusProtector.processEvent("auth/loginLifeCycleConnectSucc"),this.login()},oe.onDisconnect=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,kt=arguments.length>1?arguments[1]:void 0,At=this;this.logger.warn("socket::onDisconnect: "+Ve),At.connecting=!1,At.markAllCallbackInvalid(le.newNetworkError({callFunc:Ve,uploadCode:415,disconnectReason:kt})),At.msgAckBufferManager&&At.msgAckBufferManager.clear(),At.roamingMsgSyncDoneBufferManager&&At.roamingMsgSyncDoneBufferManager.clear(),At.stopHeartbeat(),At.reconnect()},oe.willReconnect=function(){var Ve=this.statusProtector.getLastErrorFromLoginCmd(),kt=function(At){if(At===void 0)return!1;var ze=[201,302,317,403,404,417,422];return V(ze).call(ze,At)}(Ve&&Ve.code);return this.shouldReconnect&&this.needReconnect&&this.retryCount<this.reconnectionAttempts&&!kt},oe.reconnect=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.__destroyed)if(this.willReconnect()){if(this.socket&&(this.logger.info("link::reconnect: try to force disconnect"),this.forceDisconnect()),this.socketUrls.length===0&&!this.options.socketUrl&&typeof Ve.allFailedCB=="function")return this.logger.log("reconnect: All socket links have been polled, trigger hooks"),void Ve.allFailedCB();this.doReconnect()}else this.notifyDisconnect({code:"allAttemptsFailed",message:"All attempts failed"})},oe.doReconnect=function(){var Ve,kt=this;kt.socket=null,kt.retryCount++,kt.hasLogin=!1;var At,ze=kt.backoff.duration();if(typeof kt.options.reconnectDelayProvider=="function")try{var Et=kt.options.reconnectDelayProvider(ze);typeof Et=="number"&&(ze=Et>=1e3?Et:1e3)}catch(cr){kt.logger.error("link::reconnect:reconnectDelayProvider excute failed,",cr&&cr.message?cr.message:cr)}kt.logger.info(i(Ve="link::reconnect: will retry after ".concat(ze,"ms, retryCount ")).call(Ve,kt.retryCount)),kt.statusProtector.processEvent("auth/loginLifeCycleWaiting"),At=kt.options.onwillreconnect({retryCount:kt.retryCount,duration:ze}),clearTimeout(kt.connectTimer),kt.connectTimer=$(function(){+kt.options.authType==1&&At instanceof z?(kt.logger.info("link::reconnect: wait onwillreconnect promise"),At.finally(function(){return kt.connect()})):kt.connect()},ze)},oe.notifyConnectError=function(Ve){var kt=le.newConnectError({message:Ve,callFunc:"link::notifyConnectError"});this.logger.error("link::notifyConnectError:",kt),this.options.onerror(kt)},oe.notifyDisconnect=function(Ve){this.hasNotifyDisconnected?this.logger.warn("notifyDisconnect:: already notified"):(this.hasNotifyDisconnected=!0,this.disconnectSocket(),this.forceDisconnect(),(Ve=Ve||new le).retryCount=this.retryCount,Ve.willReconnect=this.willReconnect(),this.backoff&&this.backoff.reset(),this.retryCount=0,this.autoconnect=!1,this.logger.info("link::notifyDisconnect: ondisconnected",Ve),this.options.ondisconnect(Ve),this.onWbNotifyHangup instanceof Function&&this.onWbNotifyHangup({content:{account:this.account,channelId:null,timetag:+Date()}}))},oe.disconnectSocket=function(){if(this.isConnected()||this.connecting){this.connecting=!1,this.shouldReconnect=!1;try{this.socket&&this.socket.disconnect()}catch(Ve){this.socket&&typeof this.socket.removeAllListenersX=="function"&&this.socket.removeAllListenersX("info"),this.logger.info("link::disconnectSocket: disconnect failed, error ",Ve&&Ve.message)}}},oe.initOnlineListener=function(){this.needReconnect&&this.options&&this.options.quickReconnect?typeof window<"u"&&ae.isFunction(window.addEventListener)?this.onlineListener||(this.onlineListener=re(Ie).call(Ie,this),this.offlineListener=re(de).call(de,this),this.logger.info("initOnlineListener success"),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)):this.logger.warn("initOnlineListener no window.addEventListener"):this.logger.warn("initOnlineListener no quickReconnect")},oe.forceDisconnect=function(){var Ve=this.socket||{};this.socket=null;try{typeof Ve.removeAllListenersX=="function"&&Ve.removeAllListenersX("info"),typeof Ve.disconnect=="function"&&Ve.disconnect()}catch(kt){this.logger.error("forceDisconnect:: oldSocket error",kt||kt.message)}this.hasLogin=!1}},function(t,r){function e(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var g=Math.random(),y=Math.floor(g*this.jitter*n);n=1&Math.floor(10*g)?n+y:n-y}return 0|Math.min(n,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(n){this.ms=n},e.prototype.setMax=function(n){this.max=n},e.prototype.setJitter=function(n){this.jitter=n}},function(t,r,e){var n=e(703);t.exports=function(g){return g&&g.length?n(g):[]}},function(t,r,e){var n=e(704),g=e(707),y=e(712),i=e(713),k=e(714),L=e(296);t.exports=function($,V,z){var re=-1,oe=g,le=$.length,ue=!0,ie=[],ae=ie;if(z)ue=!1,oe=y;else if(le>=200){var Fe=V?null:k($);if(Fe)return L(Fe);ue=!1,oe=i,ae=new n}else ae=V?[]:ie;e:for(;++re<le;){var de=$[re],Ie=V?V(de):de;if(de=z||de!==0?de:0,ue&&Ie==Ie){for(var Ve=ae.length;Ve--;)if(ae[Ve]===Ie)continue e;V&&ae.push(Ie),ie.push(de)}else oe(ae,Ie,z)||(ae!==ie&&ae.push(Ie),ie.push(de))}return ie}},function(t,r,e){var n=e(267),g=e(705),y=e(706);function i(k){var L=-1,$=k==null?0:k.length;for(this.__data__=new n;++L<$;)this.add(k[L])}i.prototype.add=i.prototype.push=g,i.prototype.has=y,t.exports=i},function(t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(t,r){t.exports=function(e){return this.__data__.has(e)}},function(t,r,e){var n=e(708);t.exports=function(g,y){return!!(g!=null&&g.length)&&n(g,y,0)>-1}},function(t,r,e){var n=e(709),g=e(710),y=e(711);t.exports=function(i,k,L){return k==k?y(i,k,L):n(i,g,L)}},function(t,r){t.exports=function(e,n,g,y){for(var i=e.length,k=g+(y?1:-1);y?k--:++k<i;)if(n(e[k],k,e))return k;return-1}},function(t,r){t.exports=function(e){return e!=e}},function(t,r){t.exports=function(e,n,g){for(var y=g-1,i=e.length;++y<i;)if(e[y]===n)return y;return-1}},function(t,r){t.exports=function(e,n,g){for(var y=-1,i=e==null?0:e.length;++y<i;)if(g(n,e[y]))return!0;return!1}},function(t,r){t.exports=function(e,n){return e.has(n)}},function(t,r,e){var n=e(279),g=e(715),y=e(296),i=n&&1/y(new n([,-0]))[1]==1/0?function(k){return new n(k)}:g;t.exports=i},function(t,r){t.exports=function(){}},function(t,r,e){var n,g=e(9),y=e(82).fn,i=e(35),k=e(199),L=e(0),$=e(12),V=e(48),z=e(200).getLibEnv,re=e(70),oe=e(200).getHostEnvEnum,le=L.notundef;y.genSessionKey=(n={},function(){var ue=this.name;return n[ue]=n[ue]||L.guid()}),y.afterLogin=L.emptyFunc,y.assembleIMLogin=function(){var ue,ie=this.options,ae=ie.account;this.sdkSession=this.genSessionKey();var Fe={appLogin:this.autoconnect?0:1,appKey:ie.appKey,account:ae,token:ie.token,sdkVersion:$.info.sdkVersion,sdkHumanVersion:$.info.sdkHumanVersion,protocolVersion:$.info.protocolVersion,os:re.os.toString()==="[object Object]"?re.os.family:re.os.toString(),browser:re.name+" "+re.version,clientType:$.CLIENTTYPE||16,session:this.sdkSession,deviceId:V.deviceId,isReactNative:$.isRN?1:0,customTag:ie.customTag||""};Fe.userAgent=($.isBrowser?navigator&&navigator.userAgent:"")||"";var de=!1;return de=!(!ie||!ie.privateConf||typeof ie.privateConf.loginSDKTypeParamCompat!="boolean")&&ie.privateConf.loginSDKTypeParamCompat,Fe.userAgent=de?"Native/"+$.info.sdkHumanVersion:g(ue=Fe.userAgent).call(ue,0,299),Fe.libEnv=de?void 0:z(),Fe.sdkType=de?0:oe(),ie.customClientType&&(Fe.customClientType=+ie.customClientType),ie.authType&&(Fe.authType=+ie.authType),ie.loginExt&&(Fe.loginExt=ie.loginExt),Fe},y.notifyLogin=function(ue){this.logger.info("link::notifyLogin: on connect",ue),this.options.onconnect(ue)},y.logout=function(){if(this.doLogout)return this.doLogout=!1,void this.onAuthError(new i("done logout","logout",{disconnectReason:"close",uploadCode:415}),"link::logout");this.isConnected()&&this.onAuthError(new i("done disconnect","logout",{disconnectReason:"close",uploadCode:415}),"link::logout")},y.onKicked=function(ue){var ie=ue.content,ae=ie.from,Fe=ie.reason,de=ie.custom,Ie=ie.customClientType,Ve={reason:this.kickedReasons[Fe]||"unknown",message:this.kickedMessages[Fe]||"未知原因"};le(ae)&&(Ve.from=k.reverseType(ae)),le(de)&&(Ve.custom=de),+Ie>0&&(Ve.customClientType=Ie),this.logger.warn("link::onKicked:",Ve);var kt=new i("被踢了","kicked",{disconnectReason:"kicked",uploadCode:415});L.merge(kt,Ve),this.statusProtector.processEvent("auth/loginLifeCycleKicked",null,Ve),this.onAuthError(kt,"link::onKicked")},y.onAuthError=function(ue,ie){var ae=ue&&ue.code;if(this.logger.error("onAuthError ",ie,ae),/^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(ae))return this.forceDisconnect(),void this.onDisconnect("link::onAuthError::"+ae,"broken");(ue=ue||i.newConnectionError({callFunc:ie,uploadCode:415,disconnectReason:"close"})).callFunc=ue.callFunc||ie||null,this.shouldReconnect=!1,this.markAllCallbackInvalid(ue),this.notifyDisconnect(ue)}},function(t,r,e){var n=e(22),g=e(23),y=e(24),i=e(82).fn,k=e(12),L=e(0);i.processLink=function($){switch($.cmd){case"heartbeat":this.startHeartbeat();break;case"notifyDetect":y(L._get($,"content.notifyDetectTag"))==="object"&&($.content.notifyDetectTag.t3=new Date().getTime(),this.startDetect($))}},i.startHeartbeat=function(){var $=this;$.stopHeartbeat(),$.heartbeatTimer=n(function(){var V;$.sendCmd("heartbeat",null,g(V=$.onHeartbeat).call(V,$))},k.heartbeatInterval)},i.detectHeartbeat=function(){var $;this.stopHeartbeat(),this.sendCmd("heartbeat",null,g($=this.onHeartbeat).call($,this))},i.startDetect=function($){var V=$.content.notifyDetectTag;V.t4=new Date().getTime(),this.sendCmd("uploadDetect",{notifyDetectTag:V})},i.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},i.onHeartbeat=function($){if($){if(this.syncing)return this.logger.warn("onHeartbeat::ignore error in connecting"),void this.startHeartbeat();var V;$.callFunc="link::onHeartbeat",this.onCustomError("heartbeat error",$),this.heartbeatFail++,this.logger.warn("onHeartbeat::error ",$.code,$),$.code==="Error_Timeout"&&(this.heartbeatFail>1?(this.reporterHookLinkKeep.update({code:0,description:"Heartbeat-discovered link failure",operation_type:1,target:this.url}),this.reporterHookLinkKeep.end(!0),this.forceDisconnect(),this.statusProtector.processEvent("auth/loginLifeCycleConnectionBroken",new Error("disconnect due to heartbeat error")),this.onDisconnect("link::onHeartbeat","broken")):this.sendCmd("heartbeat",null,g(V=this.onHeartbeat).call(V,this)))}else this.heartbeatFail=0},i.checkNetworkAvailable=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?function(){return navigator.onLine}:function(){},i.heartbeat=function(){}},function(t,r,e){var n=e(3),g=e(8),y=e(28),i=e(22),k=e(43),L=e(82).fn,$=e(290),V=e(12),z=e(48);L.processMisc=function(re){switch(re.cmd){case"getSimpleNosToken":re.error||(re.obj=re.content.nosTokens[0]);break;case"getNosToken":re.error||(re.obj=re.content.nosToken);break;case"getGrayscaleConfig":re.error||(re.obj=re.content.appGrayConfigTag);break;case"getMixStorePolicy":re.error||(re.obj=re.content.mixStorePolicyTag);break;case"getMixStoreToken":re.error||(re.obj=re.content.mixStoreTokenTag);break;case"getBackSourceToken":re.error||(re.obj=re.content.backSourceTokenTag);break;case"uploadSdkLogUrl":re.error?this.logger.error("uploadSdkLogUrl::error",re.error):this.logger.info("uploadSdkLogUrl::success",re.obj&&re.obj.url);break;case"notifyUploadLog":re.error||(V.isRN?this.uploadLocalLogRN():V.isBrowser&&this.uploadLocalLogWeb(),this.emitAPI({type:"notifyUploadLog"}));break;case"audioToText":re.error||(re.obj.text=re.content.text);break;case"processImage":re.obj.imageOps=$.reverseImageOps(re.obj.imageOps),re.error||(re.obj={url:re.content.url});break;case"getNosTokenTrans":re.error||(re.obj={nosToken:re.content.nosToken,docId:re.content.docId});break;case"getNosOriginUrl":re.error||(re.obj=re.content.nosFileUrlTag.originUrl);break;case"notifyTransLog":re.error||this.emitAPI({type:"notifyTransLog",obj:re.content.transInfo});break;case"fetchFile":case"fetchFileList":case"removeFile":re.error||(re.obj=re.content);break;case"getServerTime":re.obj=re.content&&re.content.time;break;case"getNosCdnHost":this.getNosCdnHost(re)}},L.uploadLocalLogRN=function(){if(V.isRN&&z.rnfs){var re=z.rnfs,oe=this,le=re.nimIndex,ue=(re.nimIndex+1)%2;re.nimPromise=re.nimPromise.then(function(){return n.all([re.exists(ie(le)),re.exists(ie(ue))])}).then(function(ae){return ae&&(ae[0]||ae[1])?ae[0]&&ae[1]?re.copyFile(ie(ue),ie(2)).then(function(){return re.readFile(ie(le))}).then(function(Fe){return re.appendFile(ie(2),Fe)}):ae[0]?re.copyFile(ie(le),ie(2)):void(ae[1]&&re.copyFile(ie(ue),ie(2))):n.reject()}).then(function(){return new n(function(ae){oe.api.previewFile({filePath:ie(2),done:function(Fe,de){if(n.all([re.unlink(ie(2)),re.unlink(ie(1)),re.unlink(ie(0))]).finally(function(){ae()}),Fe)oe.logger.error("nim::uploadLocalLogRN:previewFile:error",Fe);else{var Ie=de.url;g(Ie).call(Ie,"?")>0?Ie+="&":Ie+="?",Ie+="download="+new Date().getTime()+"_rn.log",oe.api.uploadSdkLogUrl({url:Ie})}}})})}).catch(function(ae){re.unlink(ie(2)).catch(function(){}),oe.logger.error("nim::protocol::uploadLocalLogRN",ae)})}function ie(ae){return re.DocumentDirectoryPath+"/nimlog_"+ae+".log"}},L.uploadLocalLogWeb=function(){var re=this;this.options.dbLog!==!1&&this.logger._local?this.logger._local.fetchLog().then(function(oe){!oe||!oe.logs||y(oe.logs)&&oe.logs.length===0?re.logger.warn("uploadLocalLogWeb::no logs"):re.api.previewFile({blob:new Blob([oe.logs],{type:"text/plain"}),done:function(le,ue){if(le)re.logger.error("uploadLocalLogWeb::previewFile:error",le);else{re.logger.log("uploadLocalLogWeb::previewFile:success",ue);var ie=ue.url;ie+=(g(ie).call(ie,"?")>0?"&":"?")+"download="+new Date().getTime()+"_web.log",re.api.uploadSdkLogUrl({url:ie}),re.logger._local.deleteLogs(oe.time).then(function(){re.logger.log("uploadLocalLogWeb::deleteLogs success")}).catch(function(ae){return re.logger.error("uploadLocalLogWeb::deleteLogs:error ,",ae)})}}})}).catch(function(oe){re.logger.error("uploadLocalLogWeb::fetchLog:error",oe)}):this.logger.warn("uploadLocalLogWeb::no dbLog")},L.getNosCdnHost=function(re){var oe=this,le=re.error;if(le&&(le.callFunc="events::getNosCdnHost",oe.onCustomError("getNosCdnHost","EVENT_GET_NOS_CDN_HOST_ERROR",le)),re.content&&re.content.nosConfigTag){var ue=re.content.nosConfigTag,ie="",ae="";ue.expire!==0&&ue.cdnDomain?ue.expire===-1?(ie=ue.cdnDomain,ae=ue.objectNamePrefix):(ie=ue.cdnDomain,ae=ue.objectNamePrefix,oe.nosCdnHostTimer&&clearTimeout(oe.nosCdnHostTimer),oe.nosCdnHostTimer=i(function(){oe.sendCmd("getNosCdnHost",{})},800*k(ue.expire))):(ie="",ae=""),V.serverNosConfig.cdnDomain=ie,V.serverNosConfig.objectPrefix=ae,V.hasLocalStorage&&(localStorage.setItem("nim_cdn_domain",ie),localStorage.setItem("nim_object_prefix",ae))}}},function(t,r,e){var n=e(11),g=e(28),y=e(82).fn,i=e(0),k=e(291),L=e(109).EMSyncType;y.processAvSignal=function(V){switch(V.cmd){case"signalingCreate":case"signalingDelay":case"signalingClose":case"signalingJoin":case"signalingLeave":case"signalingInvite":case"signalingCancel":case"signalingReject":case"signalingAccept":case"signalingControl":case"signalingSyncMsgRead":case"signalingGetChannelInfo":case"signalingCallEx":break;case"signalingNotify":this.onSignalingNotify(V);break;case"signalingMutilClientSyncNotify":this.onSignalingMutilClientSyncNotify(V);break;case"signalingUnreadMessageSyncNotify":this.onSignalingUnreadMessageSyncNotify(V);break;case"signalingChannelsSyncNotify":this.onSignalingMembersSyncNotify(V);break;default:this.logger.warn("avSignal::unhandled cmd:",V.cmd)}};var $=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(V.needPush&&(V.needPush=V.needPush==="1"),V.needBadge&&(V.needBadge=V.needBadge==="1"),V.channelInValid&&(V.channelInValid=V.channelInValid==="1"),V.attach){var z=JSON.parse(V.attach);V.eventType=k.parseAvSignalType(z.type)}if(V.members){var re=JSON.parse(V.members);V.members=n(re).call(re,function(oe){return k.parseAvSignalMember(oe)})}return V};y.onSignalingNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{V.raw&&V.raw.r&&V.raw.r.length&&V.content&&V.content.avSignalTag&&(V.content.avSignalTag.msgid="0");var re=V.content.avSignalTag;re=g(re)?n(re).call(re,function(oe){return $(oe)}):$(re),this.emitAPI({type:"signalingNotify",obj:re}),i.isFunction(this.options.onSignalingNotify)&&this.options.onSignalingNotify(re)}},y.onSignalingMutilClientSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;re=g(re)?n(re).call(re,function(oe){return $(oe)}):$(re),this.emitAPI({type:"signalingMutilClientSyncNotify",obj:re}),i.isFunction(this.options.onSignalingMutilClientSyncNotify)&&this.options.onSignalingMutilClientSyncNotify(re)}},y.onSignalingUnreadMessageSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;g(re)&&(re=n(re).call(re,function(oe){return $(oe)})),this.emitAPI({type:"signalingUnreadMessageSyncNotify",obj:re}),this.reporterHook.emit("reporter/syncItemComplete",L.kSyncType15_13),i.isFunction(this.options.onSignalingUnreadMessageSyncNotify)&&this.options.onSignalingUnreadMessageSyncNotify(re)}},y.onSignalingMembersSyncNotify=function(V){if(V.error){var z=V.error;this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error",z),this.emitAPI({type:"error",error:z}),this.options.onerror(z)}else{var re=V.content.avSignalTag;g(re)||(re=[re]),re=n(re).call(re,function(oe){return $(oe)}),this.emitAPI({type:"signalingChannelsSyncNotify",obj:re}),i.isFunction(this.options.onSignalingMembersSyncNotify)&&this.options.onSignalingMembersSyncNotify(re)}}},function(t,r,e){var n=e(6),g=e(23),y=e(0),i=e(82).fn,k=e(92),L=e(285);i.adaptersRequest=function($){var V=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=arguments.length>2?arguments[2]:void 0,oe=z.onerror||function(){},le=new Date().getTime(),ue=y.get(re,"exception_service")||0;return z.onerror=function(){oe.apply(void 0,arguments);var ie=arguments.length<=0?void 0:arguments[0];V.reporter.reportTraceStart("exceptions",{user_id:V.account,trace_id:y.get(self,"socket.socket.sessionid"),start_time:le,action:1,exception_service:ue}),V.reporter.reportTraceUpdateV2("exceptions",{code:typeof ie.status=="number"?ie.status:typeof ie.code=="number"?ie.code:0,description:ie.message||"".concat(ie.code),operation_type:0,target:$,context:z?n(z):"",net_connect:V.checkNetworkAvailable()}),V.reporter.reportTraceEnd("exceptions",1)},k($,z)},i.adaptersUploadFile=function($,V){var z,re=this;$.adaptersRequest=g(z=i.adaptersRequest).call(z,this);var oe=new Date().getTime();return $.errorHook=function(le){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(le){re.reporter.reportTraceStart("exceptions",{user_id:re.account,trace_id:y.get(self,"socket.socket.sessionid"),start_time:oe,action:1,exception_service:ue.provider==="s3"?4:3});var ie=ue.url||$.url;le.bucket&&(ie=n(le)),re.reporter.reportTraceUpdateV2("exceptions",{code:typeof le.status=="number"?le.status:typeof le.code=="number"?le.code:0,description:le.message||"".concat(le.code),operation_type:1,target:ie,net_connect:re.checkNetworkAvailable()}),re.reporter.reportTraceEnd("exceptions",1)}},new L($,this,V)}},function(t,r,e){e(298);var n,g,y,i=e(42),k=e(56),L=e(34),$=e(2),V=e(3),z=e(5),re=e(22),oe=e(15),le=e(9),ue=e(4),ie=e(24);y=function(){function ae(Ie,Ve){for(var kt=0;kt<Ve.length;kt++){var At=Ve[kt];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),i(Ie,At.key,At)}}var Fe={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},de=function(){};return function(){function Ie(At){(function(ze,Et){if(!(ze instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,Ie),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Fe,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=k(),this.timer=null,this.setConfig(At),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}var Ve,kt;return Ve=Ie,(kt=[{key:"setConfig",value:function(At){var ze=L({},this.reportConfig.common,At.common);this.reportConfig=L({},this.reportConfig,At),this.reportConfig.common=ze,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(At,ze){var Et=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(At,L({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},ze)).catch(function(cr){var er,or;(or=(er=Et.reportConfig)===null||er===void 0?void 0:er.logger)===null||or===void 0||or.warn("Reporter immediately upload failed",cr)})}},{key:"report",value:function(At,ze){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Et.priority||(Et.priority=this.getEventPriority(At,ze)),this.reportConfig.isDataReportEnable&&At){var cr=k();Et.priority==="HIGH"?this.highPriorityMsgList.push({module:At,msg:ze,createTime:cr}):Et.priority==="NORMAL"?this.msgList.push({module:At,msg:ze,createTime:cr}):Et.priority==="LOW"&&this.lowPriorityMsgList.push({module:At,msg:ze,createTime:cr}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(At,ze){if(this.reportConfig.isDataReportEnable&&At&&!this.traceMsgCache[At]){var Et=L(L({start_time:k()},ze),{extension:[]});this.traceMsgCache[At]=Et}}},{key:"reportTraceUpdate",value:function(At){}},{key:"reportTraceUpdateV2",value:function(At,ze,Et){var cr,er=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[At]){var or=this.traceMsgCache[At].extension,dr=or.length,lr=new Date().getTime();dr===0?ze.duration=lr-this.traceMsgCache[At].start_time:or[dr-1].end_time?ze.duration=lr-or[dr-1].end_time:ze.duration=lr-this.traceMsgCache[At].start_time,or.push(L({end_time:lr},ze));var nr=or.length-1;Et!=null&&Et.asyncParams&&((cr=this.traceMsgCache[At]).asyncPromiseArray||(cr.asyncPromiseArray=[]),this.traceMsgCache[At].asyncPromiseArray.push(Et.asyncParams.then(function(ur){er.traceMsgCache[At]&&er.traceMsgCache[At].extension[nr]&&L(er.traceMsgCache[At].extension[nr],ur)})))}}},{key:"reportTraceEnd",value:function(At){var ze,Et=this,cr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[At])if(At!=="nos"||cr===!1)if(typeof cr=="boolean"?this.traceMsgCache[At].succeed=!!cr:this.traceMsgCache[At].state=cr,this.traceMsgCache[At].duration=k()-this.traceMsgCache[At].start_time,$(ze=this.traceMsgCache[At].extension).call(ze,function(dr){delete dr.end_time}),this.traceMsgCache[At].asyncPromiseArray){var er=this.traceMsgCache[At],or=function(){er===Et.traceMsgCache[At]&&(delete Et.traceMsgCache[At].asyncPromiseArray,Et.report(At,Et.traceMsgCache[At],{priority:Et.getEventPriority(At,Et.traceMsgCache[At])}),Et.traceMsgCache[At]=null)};V.all(this.traceMsgCache[At].asyncPromiseArray).then(or).catch(or)}else this.report(At,this.traceMsgCache[At],{priority:this.getEventPriority(At,this.traceMsgCache[At])}),this.traceMsgCache[At]=null;else this.traceMsgCache[At]=null}},{key:"getEventPriority",value:function(At,ze){if(At==="exceptions"){if(ze.action===0||ze.action===2||ze.action===1&&ze.exception_service!==0)return"HIGH"}else if(At==="msgReceive"||At==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(At){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[At]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var At,ze=this;this.reportConfig.isDataReportEnable&&($(At=z(this.traceMsgCache)).call(At,function(Et){ze.reportTraceEnd(Et,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=de,this.report=de,this.reportTraceStart=de,this.reportTraceUpdate=de,this.reportTraceEnd=de,this.pause=de,this.restore=de,this.destroy=de,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var At,ze,Et=this;if(!this.loading){this.loading=!0;var cr=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:cr.dev_id,sdkVer:cr.sdk_ver,platform:cr.platform,appkey:cr.app_key},timeout:this.reportConfig.timeout}).then(function(er){var or,dr;if(!Et.isDestroyed){if(er.status===200&&er.data&&er.data.code===200){var lr=er.data.data||{};Et.reportConfig.maxSize=lr.maxSize>1e3?1e3:lr.maxSize,Et.reportConfig.maxInterval=lr.maxInterval>1e4?1e4:lr.maxInterval,Et.reportConfig.maxInterval=lr.maxInterval<10?10:lr.maxInterval,Et.reportConfig.minInterval=lr.minInterval<2?2:lr.minInterval,Et.reportConfig.maxDelay=lr.maxDelay||300,Et.reportConfig.maxInterval=1e3*Et.reportConfig.maxInterval,Et.reportConfig.minInterval=1e3*Et.reportConfig.minInterval,Et.reportConfig.maxDelay=1e3*Et.reportConfig.maxDelay,Et.isUploadEnable=!0,Et.initConfigLoaded=!0,Et.loading=!1,Et.reportHeartBeat()}(dr=(or=Et.reportConfig)===null||or===void 0?void 0:or.logger)===null||dr===void 0||dr.log("Get reporter upload config success")}}).catch(function(er){var or,dr;Et.loading=!1,(dr=(or=Et.reportConfig)===null||or===void 0?void 0:or.logger)===null||dr===void 0||dr.error("Get reporter upload config failed",er)})}catch(er){this.loading=!1,(ze=(At=this.reportConfig)===null||At===void 0?void 0:At.logger)===null||ze===void 0||ze.error("Exec reporter request failed",er)}}}},{key:"reportHeartBeat",value:function(){var At=this;this.isDestroyed||(this.timer=re(function(){At.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var At=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;k()-this.lastReportTime>=At&&this.upload()}}},{key:"getUploadMsg",value:function(){var At,ze,Et,cr,er,or,dr=this,lr={},nr=k();this.highPriorityMsgList=oe(At=this.highPriorityMsgList).call(At,function(Ar){return nr-Ar.createTime<dr.reportConfig.maxDelay}),this.msgList=oe(ze=this.msgList).call(ze,function(Ar){return nr-Ar.createTime<dr.reportConfig.maxDelay}),this.lowPriorityMsgList=oe(Et=this.lowPriorityMsgList).call(Et,function(Ar){return nr-Ar.createTime<dr.reportConfig.maxDelay}),this.cacheMsgList=oe(cr=this.cacheMsgList).call(cr,function(Ar){return nr-Ar.createTime<dr.reportConfig.maxDelay});var ur=le(er=this.highPriorityMsgList).call(er,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=le(or=this.highPriorityMsgList).call(or,ur.length),ur.length<this.reportConfig.maxSize){var ar,gr,pr=this.reportConfig.maxSize-ur.length;ur=ue(ur).call(ur,le(ar=this.msgList).call(ar,0,pr)),this.msgList=le(gr=this.msgList).call(gr,pr)}if(ur.length<this.reportConfig.maxSize){var hr,Cr,wr=this.reportConfig.maxSize-ur.length;ur=ue(ur).call(ur,le(hr=this.lowPriorityMsgList).call(hr,0,wr)),this.lowPriorityMsgList=le(Cr=this.lowPriorityMsgList).call(Cr,wr)}if(ur.length<this.reportConfig.maxSize){var Sr,mr,_r=this.reportConfig.maxSize-ur.length;ur=ue(ur).call(ur,le(Sr=this.cacheMsgList).call(Sr,0,_r)),this.cacheMsgList=le(mr=this.cacheMsgList).call(mr,_r)}return $(ur).call(ur,function(Ar){lr[Ar.module]?lr[Ar.module].push(Ar.msg):lr[Ar.module]=[Ar.msg]}),{uploadMsgArr:ur,uploadMsg:lr}}},{key:"upload",value:function(){var At,ze,Et=this;if(this.isUploadEnable&&!(this.lastReportTime&&k()-this.lastReportTime<this.reportConfig.minInterval)){var cr=this.getUploadMsg(),er=cr.uploadMsgArr,or=cr.uploadMsg;if(er.length){this.lastReportTime=k();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:or},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(dr){var lr,nr,ur,ar;Et.cacheMsgList=le(lr=ue(nr=Et.cacheMsgList).call(nr,er)).call(lr,0,Et.reportConfig.cacheMaxSize),(ar=(ur=Et.reportConfig)===null||ur===void 0?void 0:ur.logger)===null||ar===void 0||ar.warn("Reporter upload failed",dr)})}catch(dr){(ze=(At=this.reportConfig)===null||At===void 0?void 0:At.logger)===null||ze===void 0||ze.warn("Exec reporter request failed",dr)}clearTimeout(this.timer),this.reportHeartBeat()}}}}])&&ae(Ve.prototype,kt),i(Ve,"prototype",{writable:!1}),Ie}()},ie(r)==="object"&&t!==void 0?t.exports=y():(g=typeof(n=y)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=g)},function(t,r,e){t.exports=e(723)},function(t,r,e){e(724);var n=e(725);t.exports=n},function(t,r,e){e(299)},function(t,r,e){var n=e(726);t.exports=n},function(t,r,e){var n=e(727);t.exports=n},function(t,r,e){e(299),t.exports=e(16)},function(t,r,e){var n,g,y,i=e(45),k=e(44),L=e(153),$=e(154),V=e(122),z=e(729),re=(e(298),e(2)),oe=e(5),le=e(4),ue=e(3),ie=e(22),ae=e(6),Fe=e(152),de=e(24);function Ie(Ve){var kt=function(){if(typeof Reflect>"u"||!Fe||Fe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Fe(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var At,ze=V(Ve);if(kt){var Et=V(this).constructor;At=Fe(ze,arguments,Et)}else At=ze.apply(this,arguments);return $(this,At)}}y=function(){function Ve(At){if(At){var ze,Et="";return re(ze=oe(At)).call(ze,function(cr,er){var or;Et+=er===0?"?":"&",Et+=le(or="".concat(cr,"=")).call(or,At[cr])}),Et}return""}var kt=function(At){L(Et,At);var ze=Ie(Et);function Et(cr,er,or,dr){var lr;return k(this,Et),(lr=ze.call(this,or)).source=cr,lr.code=er,lr.desc=or,lr.detail=dr||{},lr}return i(Et)}(z(Error));return function(At){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{dataType:"json",method:"GET",timeout:5e3},Et=ze.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",cr=ze.method==="GET"?Ve(ze.params):"";return new ue(function(er,or){if(window.XMLHttpRequest){var dr,lr,nr=new XMLHttpRequest;if(nr.onreadystatechange=function(){if(nr.readyState===4)if(nr.status===200){try{lr=JSON.parse(nr.response||"{}")}catch{lr=nr.response}er({status:nr.status,data:lr})}else ie(function(){var ar;or(new kt(1,nr.status,le(ar="readyState: ".concat(nr.readyState,"; statusText: ")).call(ar,nr.statusText)))},0)},nr.open(ze.method,le(dr="".concat(At)).call(dr,cr)),nr.timeout=ze.timeout||5e3,nr.setRequestHeader("Content-Type",Et),ze.headers)for(var ur in ze.headers)nr.setRequestHeader(ur,ze.headers[ur]);nr.ontimeout=function(ar){or(new kt(1,408,ar&&ar.message?ar.message:"request timeout"))},nr.send(ae(ze.data))}else or(new kt(2,10400,"request no suppout"))})}},de(r)==="object"&&t!==void 0?t.exports=y():(g=typeof(n=y)=="function"?n.call(r,e,r,t):n)===void 0||(t.exports=g)},function(t,r,e){var n=e(730),g=e(195),y=e(122),i=e(196),k=e(769),L=e(770);function $(V){var z=typeof n=="function"?new n:void 0;return t.exports=$=function(re){if(re===null||!k(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(z!==void 0){if(z.has(re))return z.get(re);z.set(re,oe)}function oe(){return L(re,arguments,y(this).constructor)}return oe.prototype=g(re.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),i(oe,re)},t.exports.__esModule=!0,t.exports.default=t.exports,$(V)}t.exports=$,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(731)},function(t,r,e){t.exports=e(732)},function(t,r,e){var n=e(733);e(744),e(746),e(748),e(750),e(751),e(753),e(754),e(755),e(756),e(757),e(759),e(760),e(761),e(762),e(763),e(764),e(765),e(766),e(767),e(768),t.exports=n},function(t,r,e){var n=e(734);t.exports=n},function(t,r,e){var n=e(735);e(75),t.exports=n},function(t,r,e){e(90),e(736),e(102),e(118);var n=e(14);t.exports=n.Map},function(t,r,e){e(737)},function(t,r,e){e(738)("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},e(742))},function(t,r,e){var n=e(1),g=e(16),y=e(300),i=e(7),k=e(65),L=e(50),$=e(178),V=e(17),z=e(30),re=e(89),oe=e(40).f,le=e(69).forEach,ue=e(29),ie=e(103),ae=ie.set,Fe=ie.getterFor;t.exports=function(de,Ie,Ve){var kt,At=de.indexOf("Map")!==-1,ze=de.indexOf("Weak")!==-1,Et=At?"set":"add",cr=g[de],er=cr&&cr.prototype,or={};if(ue&&V(cr)&&(ze||er.forEach&&!i(function(){new cr().entries().next()}))){var dr=(kt=Ie(function(nr,ur){ae($(nr,dr),{type:de,collection:new cr}),ur!=null&&L(ur,nr[Et],{that:nr,AS_ENTRIES:At})})).prototype,lr=Fe(de);le(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(nr){var ur=nr=="add"||nr=="set";!(nr in er)||ze&&nr=="clear"||k(dr,nr,function(ar,gr){var pr=lr(this).collection;if(!ur&&ze&&!z(ar))return nr=="get"&&void 0;var hr=pr[nr](ar===0?0:ar,gr);return ur?this:hr})}),ze||oe(dr,"size",{configurable:!0,get:function(){return lr(this).collection.size}})}else kt=Ve.getConstructor(Ie,de,At,Et),y.enable();return re(kt,de,!1,!0),or[de]=kt,n({global:!0,forced:!0},or),ze||Ve.setStrong(kt,de,At),kt}},function(t,r,e){var n=e(7),g=e(30),y=e(71),i=e(740),k=Object.isExtensible,L=n(function(){});t.exports=L||i?function($){return!!g($)&&(!i||y($)!="ArrayBuffer")&&(!k||k($))}:k},function(t,r,e){var n=e(7);t.exports=n(function(){if(typeof ArrayBuffer=="function"){var g=new ArrayBuffer(8);Object.isExtensible(g)&&Object.defineProperty(g,"a",{value:8})}})},function(t,r,e){var n=e(7);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,r,e){var n=e(40).f,g=e(88),y=e(743),i=e(36),k=e(178),L=e(98),$=e(50),V=e(176),z=e(177),re=e(244),oe=e(29),le=e(300).fastKey,ue=e(103),ie=ue.set,ae=ue.getterFor;t.exports={getConstructor:function(Fe,de,Ie,Ve){var kt=Fe(function(er,or){k(er,At),ie(er,{type:de,index:g(null),first:void 0,last:void 0,size:0}),oe||(er.size=0),L(or)||$(or,er[Ve],{that:er,AS_ENTRIES:Ie})}),At=kt.prototype,ze=ae(de),Et=function(er,or,dr){var lr,nr,ur=ze(er),ar=cr(er,or);return ar?ar.value=dr:(ur.last=ar={index:nr=le(or,!0),key:or,value:dr,previous:lr=ur.last,next:void 0,removed:!1},ur.first||(ur.first=ar),lr&&(lr.next=ar),oe?ur.size++:er.size++,nr!=="F"&&(ur.index[nr]=ar)),er},cr=function(er,or){var dr,lr=ze(er),nr=le(or);if(nr!=="F")return lr.index[nr];for(dr=lr.first;dr;dr=dr.next)if(dr.key==or)return dr};return y(At,{clear:function(){for(var er=ze(this),or=er.index,dr=er.first;dr;)dr.removed=!0,dr.previous&&(dr.previous=dr.previous.next=void 0),delete or[dr.index],dr=dr.next;er.first=er.last=void 0,oe?er.size=0:this.size=0},delete:function(er){var or=ze(this),dr=cr(this,er);if(dr){var lr=dr.next,nr=dr.previous;delete or.index[dr.index],dr.removed=!0,nr&&(nr.next=lr),lr&&(lr.previous=nr),or.first==dr&&(or.first=lr),or.last==dr&&(or.last=nr),oe?or.size--:this.size--}return!!dr},forEach:function(er){for(var or,dr=ze(this),lr=i(er,arguments.length>1?arguments[1]:void 0);or=or?or.next:dr.first;)for(lr(or.value,or.key,this);or&&or.removed;)or=or.previous},has:function(er){return!!cr(this,er)}}),y(At,Ie?{get:function(er){var or=cr(this,er);return or&&or.value},set:function(er,or){return Et(this,er===0?0:er,or)}}:{add:function(er){return Et(this,er=er===0?0:er,er)}}),oe&&n(At,"size",{get:function(){return ze(this).size}}),kt},setStrong:function(Fe,de,Ie){var Ve=de+" Iterator",kt=ae(de),At=ae(Ve);V(Fe,de,function(ze,Et){ie(this,{type:Ve,target:ze,state:kt(ze),kind:Et,last:void 0})},function(){for(var ze=At(this),Et=ze.kind,cr=ze.last;cr&&cr.removed;)cr=cr.previous;return ze.target&&(ze.last=cr=cr?cr.next:ze.state.first)?z(Et=="keys"?cr.key:Et=="values"?cr.value:[cr.key,cr.value],!1):(ze.target=void 0,z(void 0,!0))},Ie?"entries":"values",!Ie,!0),re(de)}}},function(t,r,e){var n=e(74);t.exports=function(g,y,i){for(var k in y)i&&i.unsafe&&g[k]?g[k]=y[k]:n(g,k,y[k],i);return g}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{from:e(745)})},function(t,r,e){var n=e(36),g=e(20),y=e(32),i=e(179),k=e(98),L=e(50),$=[].push;t.exports=function(V){var z,re,oe,le,ue=arguments.length,ie=ue>1?arguments[1]:void 0;return i(this),(z=ie!==void 0)&&y(ie),k(V)?new this:(re=[],z?(oe=0,le=n(ie,ue>2?arguments[2]:void 0),L(V,function(ae){g($,re,le(ae,oe++))})):L(V,$,{that:re}),new this(re))}},function(t,r,e){e(1)({target:"Map",stat:!0,forced:!0},{of:e(747)})},function(t,r,e){var n=e(104);t.exports=function(){return new this(n(arguments))}},function(t,r,e){var n=e(1),g=e(39),y=e(67).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var i,k=g(this),L=!0,$=0,V=arguments.length;$<V;$++)i=y(k,arguments[$]),L=L&&i;return!!L}})},function(t,r){t.exports=function(e,n){return n==1?function(g,y){return g[e](y)}:function(g,y,i){return g[e](y,i)}}},function(t,r,e){var n=e(1),g=e(39),y=e(67),i=y.get,k=y.has,L=y.set;n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function($,V){var z,re,oe=g(this);return k(oe,$)?(z=i(oe,$),"update"in V&&(z=V.update(z,$,oe),L(oe,$,z)),z):(re=V.insert($,oe),L(oe,$,re),re)}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0);return i(L,function(V,z){if(!$(V,z,L))return!1},!0)!==!1}})},function(t,r,e){var n=e(20);t.exports=function(g,y,i){for(var k,L,$=i||g.next;!(k=n($,g)).done;)if((L=y(k.value))!==void 0)return L}},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(67),k=e(62),L=i.Map,$=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),oe=new L;return k(z,function(le,ue){re(le,ue,z)&&$(oe,ue,le)}),oe}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0),V=i(L,function(z,re){if($(z,re,L))return{value:z}},!0);return V&&V.value}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0),V=i(L,function(z,re){if($(z,re,L))return{key:re}},!0);return V&&V.key}})},function(t,r,e){var n=e(1),g=e(20),y=e(13),i=e(17),k=e(32),L=e(50),$=e(67).Map,V=y([].push);n({target:"Map",stat:!0,forced:!0},{groupBy:function(z,re){var oe=new(i(this)?this:$);k(re);var le=k(oe.has),ue=k(oe.get),ie=k(oe.set);return L(z,function(ae){var Fe=re(ae);g(le,oe,Fe)?V(g(ue,oe,Fe),ae):g(ie,oe,Fe,[ae])}),oe}})},function(t,r,e){var n=e(1),g=e(758),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(k){return i(y(this),function(L){if(g(L,k))return!0},!0)===!0}})},function(t,r){t.exports=function(e,n){return e===n||e!=e&&n!=n}},function(t,r,e){var n=e(1),g=e(20),y=e(50),i=e(17),k=e(32),L=e(67).Map;n({target:"Map",stat:!0,forced:!0},{keyBy:function($,V){var z=new(i(this)?this:L);k(V);var re=k(z.set);return y($,function(oe){g(re,z,V(oe),oe)}),z}})},function(t,r,e){var n=e(1),g=e(39),y=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(i){var k=y(g(this),function(L,$){if(L===i)return{key:$}},!0);return k&&k.key}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(67),k=e(62),L=i.Map,$=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),oe=new L;return k(z,function(le,ue){$(oe,re(le,ue,z),le)}),oe}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(67),k=e(62),L=i.Map,$=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(V){var z=y(this),re=g(V,arguments.length>1?arguments[1]:void 0),oe=new L;return k(z,function(le,ue){$(oe,ue,re(le,ue,z))}),oe}})},function(t,r,e){var n=e(1),g=e(39),y=e(50),i=e(67).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(k){for(var L=g(this),$=arguments.length,V=0;V<$;)y(arguments[V++],function(z,re){i(L,z,re)},{AS_ENTRIES:!0});return L}})},function(t,r,e){var n=e(1),g=e(32),y=e(39),i=e(62),k=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(L){var $=y(this),V=arguments.length<2,z=V?void 0:arguments[1];if(g(L),i($,function(re,oe){V?(V=!1,z=re):z=L(z,re,oe,$)}),V)throw k("Reduce of empty map with no initial value");return z}})},function(t,r,e){var n=e(1),g=e(36),y=e(39),i=e(62);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(k){var L=y(this),$=g(k,arguments.length>1?arguments[1]:void 0);return i(L,function(V,z){if($(V,z,L))return!0},!0)===!0}})},function(t,r,e){var n=e(1),g=e(32),y=e(39),i=e(67),k=TypeError,L=i.get,$=i.has,V=i.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(z,re){var oe=y(this),le=arguments.length;g(re);var ue=$(oe,z);if(!ue&&le<3)throw k("Updating absent value");var ie=ue?L(oe,z):g(le>2?arguments[2]:void 0)(z,oe);return V(oe,z,re(ie,z,oe)),oe}})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,forced:!0},{upsert:e(301)})},function(t,r,e){e(1)({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:e(301)})},function(t,r,e){var n=e(194);t.exports=function(g){var y;return n(y=Function.toString.call(g)).call(y,"[native code]")!==-1},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(159),g=e(302),y=e(196),i=e(774);function k(L,$,V){var z;return i()?(t.exports=k=n(z=g).call(z),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=k=function(re,oe,le){var ue=[null];ue.push.apply(ue,oe);var ie=new(n(Function).apply(re,ue));return le&&y(ie,le.prototype),ie},t.exports.__esModule=!0,t.exports.default=t.exports),k.apply(null,arguments)}t.exports=k,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(772)},function(t,r,e){var n=e(773);t.exports=n},function(t,r,e){var n=e(286);t.exports=n},function(t,r,e){var n=e(302);t.exports=function(){if(typeof Reflect>"u"||!n||n.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(15),g=e(0),y=e(155),i=g.merge({},y.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,updatePushToken:1,appBackground:2,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncOfflineNetcallMsgs:8,syncRoamingMsgs:9,syncMsgReceipts:12,syncRobots:15,syncBroadcastMsgs:16,syncSuperTeamRoamingMsgs:17,syncOfflineSuperTeamSysMsgs:18,syncDeleteSuperTeamMsgOfflineRoaming:19,syncDeleteMsgSelf:21,syncSessionsWithMoreRoaming:22,syncStickTopSessions:23,syncSessionHistoryMsgsDelete:24,syncSessionReliableInfo:25},sync:{id:5,sync:1,syncTeamMembers:2,syncSuperTeamMembers:3},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16,markSessionAckBatch:25,broadcastMsg:17,clearServerHistoryMsgs:18,getServerSessions:19,getServerSession:20,updateServerSession:21,deleteServerSessions:22,deleteMsgSelf:23,deleteMsgSelfBatch:24,msgFtsInServer:26,msgFtsInServerByTiming:27,onClearServerHistoryMsgs:118,syncUpdateServerSession:121,onDeleteMsgSelf:123,onDeleteMsgSelfBatch:124},msgExtend:{id:23,getThreadMsgs:1,getMsgsByIdServer:2,addQuickComment:3,deleteQuickComment:4,onQuickComment:5,onDeleteQuickComment:6,getQuickComments:7,addCollect:8,deleteCollects:9,updateCollect:10,getCollects:11,addStickTopSession:12,deleteStickTopSession:13,updateStickTopSession:14,addMsgPin:15,updateMsgPin:16,deleteMsgPin:17,onAddMsgPin:18,onUpdateMsgPin:19,onDeleteMsgPin:20,getMsgPins:21,syncAddQuickComment:103,syncDeleteQuickComment:104,syncAddStickTopSession:112,syncDeleteStickTopSession:113,syncUpdateStickTopSession:114,syncAddMsgPin:115,syncUpdateMsgPin:116,syncDeleteMsgPin:117},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,sendTeamMsgReceipt:28,getTeamMsgReads:29,getTeamMsgReadAccounts:30,notifyTeamMsgReads:31,muteTeamAll:32,getTeamMemberInvitorAccid:33,getTeamsById:34,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},superTeam:{id:21,sendSuperTeamMsg:2,superTeamMsg:3,addSuperTeamMembers:5,removeSuperTeamMembers:6,leaveSuperTeam:7,updateSuperTeam:8,getSuperTeam:9,getSuperTeams:12,updateInfoInSuperTeam:10,getMySuperTeamMembers:11,getSuperTeamMembers:13,getSuperTeamHistoryMsgs:14,getSuperTeamMembersByJoinTime:15,sendSuperTeamCustomSysMsg:16,deleteSuperTeamMsg:17,superTeamMsgDelete:18,superTeamCustomSysMsg:19,applySuperTeam:20,passSuperTeamApply:21,rejectSuperTeamApply:22,acceptSuperTeamInvite:23,rejectSuperTeamInvite:24,markSuperTeamSessionAck:25,addSuperTeamManagers:26,removeSuperTeamManagers:27,updateSuperTeamMute:28,updateSuperTeamMembersMute:29,updateNickInSuperTeam:30,transferSuperTeam:31,markSuperTeamSessionsAck:32,getSuperTeamMembersByAccounts:33,getMutedSuperTeamMembers:34,syncMySuperTeamMembers:111,syncSuperTeams:109,syncSuperTeamMembers:113,syncCreateSuperTeam:101,syncSendSuperTeamMsg:102,syncUpdateSuperTeamMember:110,syncDeleteSuperTeamMsg:117},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7},eventService:{id:14,publishEvent:1,pushEvent:2,subscribeEvent:3,unSubscribeEventsByAccounts:4,unSubscribeEventsByType:5,querySubscribeEventsByAccounts:6,querySubscribeEventsByType:7,pushEvents:9},proxyService:{id:22,httpProxy:1,onProxyMsg:2},qchat:{id:24,getQChatAddress:1}}),k=g.merge({},y.cmdConfig,{login:{sid:i.auth.id,cid:i.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:i.auth.id,cid:i.auth.logout},kick:{sid:i.auth.id,cid:i.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},updatePushToken:{sid:i.user.id,cid:i.user.updatePushToken,params:[{type:"String",name:"tokenName"},{type:"String",name:"token"},{type:"Int",name:"pushkit"}]},appBackground:{sid:i.user.id,cid:i.user.appBackground,params:[{type:"Bool",name:"isBackground"},{type:"Int",name:"badge"}]},markInBlacklist:{sid:i.user.id,cid:i.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},getBlacklist:{sid:i.user.id,cid:i.user.getBlacklist,params:[]},markInMutelist:{sid:i.user.id,cid:i.user.markInMutelist,params:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},getMutelist:{sid:i.user.id,cid:i.user.getMutelist,params:[]},getRelations:{sid:i.user.id,cid:i.user.getRelations,params:[{type:"Long",name:"timetag"}]},getUsers:{sid:i.user.id,cid:i.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:i.user.id,cid:i.user.updateMyInfo,params:[{type:"Property",name:"user"},{type:"Property",name:"antispamTag"}]},updateDonnop:{sid:i.user.id,cid:i.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:i.notify.id,cid:i.notify.markRead,params:[{type:"Long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:i.notify.id,cid:i.notify.batchMarkRead,params:[{type:"Byte",name:"sid"},{type:"Byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:i.sync.id,cid:i.sync.sync,isAwaitable:!1,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:i.sync.id,cid:i.sync.syncTeamMembers,params:[]},syncSuperTeamMembers:{sid:i.sync.id,cid:i.sync.syncSuperTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:i.msg.id,cid:i.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:i.msg.id,cid:i.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},sendCustomSysMsg:{sid:i.msg.id,cid:i.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:i.msg.id,cid:i.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"String",name:"keyword"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},getSessions:{sid:i.msg.id,cid:i.msg.getSessions,params:[{type:"Long",name:"time"}]},deleteSessions:{sid:i.msg.id,cid:i.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:i.msg.id,cid:i.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:i.msg.id,cid:i.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:i.msg.id,cid:i.msg.markSessionAck,params:[{type:"Byte",name:"scene"},{type:"String",name:"to"},{type:"Long",name:"timetag"}]},markSessionAckBatch:{sid:i.msg.id,cid:i.msg.markSessionAckBatch,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},clearServerHistoryMsgs:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParams"}]},clearServerHistoryMsgsWithSync:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParamsWithSync"}]},msgFtsInServer:{sid:i.msg.id,cid:i.msg.msgFtsInServer,params:[{type:"Property",name:"msgFullSearchRequestTag"}]},msgFtsInServerByTiming:{sid:i.msg.id,cid:i.msg.msgFtsInServerByTiming,params:[{type:"Property",name:"msgTimingFullSearchRequestTag"}]},onClearServerHistoryMsgs:{sid:i.msg.id,cid:i.msg.clearServerHistoryMsgs},getServerSessions:{sid:i.msg.id,cid:i.msg.getServerSessions,params:[{type:"Property",name:"sessionReqTag"}]},getServerSession:{sid:i.msg.id,cid:i.msg.getServerSession,params:[{type:"Property",name:"session"}]},updateServerSession:{sid:i.msg.id,cid:i.msg.updateServerSession,params:[{type:"Property",name:"session"}]},deleteServerSessions:{sid:i.msg.id,cid:i.msg.deleteServerSessions,params:[{type:"PropertyArray",name:"sessions",entity:"session"}]},deleteMsgSelf:{sid:i.msg.id,cid:i.msg.deleteMsgSelf,params:[{type:"Property",name:"deleteMsgSelfTag"}]},deleteMsgSelfBatch:{sid:i.msg.id,cid:i.msg.deleteMsgSelfBatch,params:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},onDeleteMsgSelf:{sid:i.msg.id,cid:i.msg.onDeleteMsgSelf},onDeleteMsgSelfBatch:{sid:i.msg.id,cid:i.msg.onDeleteMsgSelfBatch},sendSuperTeamMsg:{sid:i.superTeam.id,cid:i.superTeam.sendSuperTeamMsg,params:[{type:"Property",name:"msg"}]},addSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.addSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.removeSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},leaveSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.leaveSuperTeam,params:[{type:"Long",name:"teamId"}]},updateSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},getSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeam,params:[{type:"Long",name:"teamId"}]},getSuperTeams:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeams,params:[{type:"Long",name:"timetag"}]},getSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}]},updateInfoInSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateInfoInSuperTeam,params:[{type:"Property",name:"superTeamMember"},{type:"Property",name:"teamSpecialFollowUpdateTag"}]},getSuperTeamHistoryMsgs:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamHistoryMsgs,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},applySuperTeam:{sid:i.superTeam.id,cid:i.superTeam.applySuperTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}]},passSuperTeamApply:{sid:i.superTeam.id,cid:i.superTeam.passSuperTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:i.superTeam.id,cid:i.superTeam.rejectSuperTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:i.superTeam.id,cid:i.superTeam.acceptSuperTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:i.superTeam.id,cid:i.superTeam.rejectSuperTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},markSuperTeamSessionAck:{sid:i.superTeam.id,cid:i.superTeam.markSuperTeamSessionAck,params:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},addSuperTeamManagers:{sid:i.superTeam.id,cid:i.superTeam.addSuperTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:i.superTeam.id,cid:i.superTeam.removeSuperTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateSuperTeamMute:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeamMute,params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},updateSuperTeamMembersMute:{sid:i.superTeam.id,cid:i.superTeam.updateSuperTeamMembersMute,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateNickInSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.updateNickInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},transferSuperTeam:{sid:i.superTeam.id,cid:i.superTeam.transferSuperTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Bool",name:"leave"}]},markSuperTeamSessionsAck:{sid:i.superTeam.id,cid:i.superTeam.markSuperTeamSessionsAck,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},getSuperTeamMembersByJoinTime:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembersByJoinTime,params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},getSuperTeamMembersByAccounts:{sid:i.superTeam.id,cid:i.superTeam.getSuperTeamMembersByAccounts,params:[{type:"StrArray",name:"memberIds"}]},getMutedSuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getMutedSuperTeamMembers,params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},sendSuperTeamCustomSysMsg:{sid:i.superTeam.id,cid:i.superTeam.sendSuperTeamCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},deleteSuperTeamMsg:{sid:i.superTeam.id,cid:i.superTeam.deleteSuperTeamMsg,params:[{type:"Property",name:"sysMsg"}]},getMySuperTeamMembers:{sid:i.superTeam.id,cid:i.superTeam.getMySuperTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},createTeam:{sid:i.team.id,cid:i.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"Property",name:"antispamTag"}]},sendTeamMsg:{sid:i.team.id,cid:i.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:i.team.id,cid:i.team.addTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}]},removeTeamMembers:{sid:i.team.id,cid:i.team.removeTeamMembers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:i.team.id,cid:i.team.updateTeam,params:[{type:"Property",name:"team"},{type:"Property",name:"antispamTag"}]},leaveTeam:{sid:i.team.id,cid:i.team.leaveTeam,params:[{type:"Long",name:"teamId"}]},getTeam:{sid:i.team.id,cid:i.team.getTeam,params:[{type:"Long",name:"teamId"}]},getTeams:{sid:i.team.id,cid:i.team.getTeams,params:[{type:"Long",name:"timetag"}]},getTeamsById:{sid:i.team.id,cid:i.team.getTeamsById,params:[{type:"LongArray",name:"teamIds"}]},getTeamMembers:{sid:i.team.id,cid:i.team.getTeamMembers,params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}]},dismissTeam:{sid:i.team.id,cid:i.team.dismissTeam,params:[{type:"Long",name:"teamId"}]},applyTeam:{sid:i.team.id,cid:i.team.applyTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:i.team.id,cid:i.team.passTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:i.team.id,cid:i.team.rejectTeamApply,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:i.team.id,cid:i.team.addTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:i.team.id,cid:i.team.removeTeamManagers,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:i.team.id,cid:i.team.transferTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Bool",name:"leave"}]},updateInfoInTeam:{sid:i.team.id,cid:i.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"},{type:"Property",name:"teamSpecialFollowUpdateTag"}]},updateNickInTeam:{sid:i.team.id,cid:i.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:i.team.id,cid:i.team.acceptTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:i.team.id,cid:i.team.rejectTeamInvite,params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:i.team.id,cid:i.team.getTeamHistoryMsgs,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},searchTeamHistoryMsgs:{sid:i.team.id,cid:i.team.searchTeamHistoryMsgs,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"String",name:"keyword"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}]},updateMuteStateInTeam:{sid:i.team.id,cid:i.team.updateMuteStateInTeam,params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getMyTeamMembers:{sid:i.team.id,cid:i.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:i.team.id,cid:i.team.getMutedTeamMembers,params:[{type:"Long",name:"teamId"}]},sendTeamMsgReceipt:{sid:i.team.id,cid:i.team.sendTeamMsgReceipt,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReads:{sid:i.team.id,cid:i.team.getTeamMsgReads,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReadAccounts:{sid:i.team.id,cid:i.team.getTeamMsgReadAccounts,params:[{type:"Property",name:"teamMsgReceipt"}]},muteTeamAll:{sid:i.team.id,cid:i.team.muteTeamAll,params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:i.team.id,cid:i.team.getTeamMemberInvitorAccid,params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},friendRequest:{sid:i.friend.id,cid:i.friend.friendRequest,params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:i.friend.id,cid:i.friend.deleteFriend,params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams"}]},updateFriend:{sid:i.friend.id,cid:i.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:i.friend.id,cid:i.friend.getFriends,params:[{type:"Long",name:"timetag"}]},getChatroomAddress:{sid:i.chatroom.id,cid:i.chatroom.getChatroomAddress,params:[{type:"Long",name:"chatroomId"},{type:"Bool",name:"isWeixinApp"},{type:"Int",name:"type"}]},sendFilterMsg:{sid:n(i).id,cid:n(i).sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:n(i).id,cid:n(i).sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},publishEvent:{sid:i.eventService.id,cid:i.eventService.publishEvent,params:[{type:"Property",name:"msgEvent"}]},pushEvent:{sid:i.eventService.id,cid:i.eventService.pushEvent},subscribeEvent:{sid:i.eventService.id,cid:i.eventService.subscribeEvent,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:i.eventService.id,cid:i.eventService.unSubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:i.eventService.id,cid:i.eventService.unSubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},querySubscribeEventsByAccounts:{sid:i.eventService.id,cid:i.eventService.querySubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},querySubscribeEventsByType:{sid:i.eventService.id,cid:i.eventService.querySubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},pushEvents:{sid:i.eventService.id,cid:i.eventService.pushEvents},getThreadMsgs:{sid:i.msgExtend.id,cid:i.msgExtend.getThreadMsgs,params:[{type:"Property",name:"msg"},{type:"Property",name:"threadMsgReq"}]},getMsgsByIdServer:{sid:i.msgExtend.id,cid:i.msgExtend.getMsgsByIdServer,params:[{type:"PropertyArray",name:"reqMsgs",entity:"msg"}]},addQuickComment:{sid:i.msgExtend.id,cid:i.msgExtend.addQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},deleteQuickComment:{sid:i.msgExtend.id,cid:i.msgExtend.deleteQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},getQuickComments:{sid:i.msgExtend.id,cid:i.msgExtend.getQuickComments,params:[{type:"PropertyArray",name:"commentReq",entity:"commentReq"}]},addCollect:{sid:i.msgExtend.id,cid:i.msgExtend.addCollect,params:[{type:"Property",name:"collect"}]},deleteCollects:{sid:i.msgExtend.id,cid:i.msgExtend.deleteCollects,params:[{type:"PropertyArray",name:"collectList",entity:"collect"}]},updateCollect:{sid:i.msgExtend.id,cid:i.msgExtend.updateCollect,params:[{type:"Property",name:"collect"}]},getCollects:{sid:i.msgExtend.id,cid:i.msgExtend.getCollects,params:[{type:"Property",name:"collectQuery"}]},addStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.addStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},updateStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.updateStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},deleteStickTopSession:{sid:i.msgExtend.id,cid:i.msgExtend.deleteStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},addMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.addMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},updateMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.updateMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},deleteMsgPin:{sid:i.msgExtend.id,cid:i.msgExtend.deleteMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},getMsgPins:{sid:i.msgExtend.id,cid:i.msgExtend.getMsgPins,params:[{type:"Property",name:"msgPinReq"}]},httpProxy:{sid:i.proxyService.id,cid:i.proxyService.httpProxy,params:[{type:"Property",name:"proxyTag"}]},getQChatAddress:{sid:i.qchat.id,cid:i.qchat.getQChatAddress,params:[{type:"Property",name:"getQChatAddressTag"}]}}),L=g.merge({},y.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"},{type:"Property",name:"aosPushInfo"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Int",name:"from"},{type:"Int",name:"reason"},{type:"String",name:"custom"},{type:"Int",name:"customClientType"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Byte",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_1":{service:"user",cmd:"updatePushToken"},"3_2":{service:"user",cmd:"appBackground"},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Bool",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Long",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Long",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Long",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Long",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Long",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_8":{service:"notify",cmd:"syncOfflineNetcallMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Long",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Long",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Long",name:"timetag"}]},"4_15":{service:"notify",cmd:"syncRobots",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"4_16":{service:"notify",cmd:"syncBroadcastMsgs",response:[{type:"PropertyArray",name:"broadcastMsgs",entity:"broadcastMsg"}]},"4_17":{service:"notify",cmd:"syncSuperTeamRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_18":{service:"notify",cmd:"syncOfflineSuperTeamSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_19":{service:"notify",cmd:"syncDeleteSuperTeamMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Long",name:"timetag"},{type:"Byte",name:"type"}]},"4_20":{service:"notify",cmd:"syncSuperTeamSessionAck",response:[{type:"LongLongMap",name:"superTeam"},{type:"Long",name:"timetag"}]},"4_21":{service:"notify",cmd:"syncDeleteMsgSelf",response:[{type:"PropertyArray",name:"deletedMsgs",entity:"deleteMsgSelfTag"}]},"4_22":{service:"notify",cmd:"syncSessionsWithMoreRoaming",response:[{type:"PropertyArray",name:"sessions",entity:"msg"}]},"4_23":{service:"notify",cmd:"syncStickTopSessions",response:[{type:"Long",name:"timetag"},{type:"Bool",name:"modify"},{type:"PropertyArray",name:"sessions",entity:"stickTopSession"}]},"4_24":{service:"notify",cmd:"syncSessionHistoryMsgsDelete",response:[{type:"PropertyArray",name:"sessionHistoryMsgsDeleteTags",entity:"clearMsgsParamsWithSync"}]},"4_25":{service:"notify",cmd:"syncSessionReliableInfo",response:[{type:"Property",name:"context",entity:"sessionReliableSyncContextTag"},{type:"PropertyArray",name:"datas",entity:"sessionReliableSyncTag"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Long",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Long",name:"timetag"}]},"5_3":{service:"sync",cmd:"syncSuperTeamMembersDone",response:[{type:"Long",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Long",name:"timetag"},{type:"Byte",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_17":{service:"msg",cmd:"broadcastMsg",response:[{type:"Property",name:"broadcastMsg"}]},"7_18":{service:"msg",cmd:"clearServerHistoryMsgs",response:[{type:"Long",name:"timetag"}]},"7_19":{service:"session",cmd:"getServerSessions",response:[{type:"Property",name:"sessionReqTag"},{type:"PropertyArray",name:"sessionList",entity:"session"}]},"7_20":{service:"session",cmd:"getServerSession",response:[{type:"Property",name:"session"}]},"7_21":{service:"session",cmd:"updateServerSession"},"7_22":{service:"session",cmd:"deleteServerSessions"},"7_23":{service:"msg",cmd:"deleteMsgSelf",response:[{type:"Long",name:"timetag"}]},"7_24":{service:"msg",cmd:"deleteMsgSelfBatch",response:[{type:"Long",name:"timetag"}]},"7_25":{service:"msg",cmd:"onMarkSessionAckBatch"},"7_26":{service:"msg",cmd:"msgFtsInServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_27":{service:"msg",cmd:"msgFtsInServerByTiming",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_118":{service:"msg",cmd:"onClearServerHistoryMsgs",response:[{type:"Property",name:"sessionHistoryMsgsDeleteTag",entity:"clearMsgsParamsWithSync"}]},"7_123":{service:"msg",cmd:"onDeleteMsgSelf",response:[{type:"Property",name:"deleteMsgSelfTag"}]},"7_124":{service:"msg",cmd:"onDeleteMsgSelfBatch",response:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Byte",name:"scene"},{type:"String",name:"to"},{type:"Long",name:"timetag"}]},"7_121":{service:"msg",cmd:"syncUpdateServerSession",response:[{type:"Property",name:"session"}]},"23_1":{service:"msgExtend",cmd:"getThreadMsgs",response:[{type:"Property",name:"threadMsg",entity:"msg"},{type:"Property",name:"threadMsgsMeta"},{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_2":{service:"msgExtend",cmd:"getMsgsByIdServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_3":{service:"msgExtend",cmd:"addQuickComment",response:[{type:"Long",name:"timetag"}]},"23_4":{service:"msgExtend",cmd:"deleteQuickComment",response:[{type:"Long",name:"timetag"}]},"23_5":{service:"msgExtend",cmd:"onQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_6":{service:"msgExtend",cmd:"onDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_7":{service:"msgExtend",cmd:"getQuickComments",response:[{type:"PropertyArray",name:"commentRes",entity:"commentRes"}]},"23_8":{service:"msgExtend",cmd:"addCollect",response:[{type:"Property",name:"collect"}]},"23_9":{service:"msgExtend",cmd:"deleteCollects",response:[{type:"Int",name:"deleteNum"}]},"23_10":{service:"msgExtend",cmd:"updateCollect",response:[{type:"Property",name:"collect"}]},"23_11":{service:"msgExtend",cmd:"getCollects",response:[{type:"Long",name:"total"},{type:"PropertyArray",name:"collectList",entity:"collect"}]},"23_12":{service:"msgExtend",cmd:"addStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_13":{service:"msgExtend",cmd:"deleteStickTopSession",response:[{type:"Long",name:"timetag"}]},"23_14":{service:"msgExtend",cmd:"updateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_15":{service:"msgExtend",cmd:"addMsgPin",response:[{type:"Long",name:"timetag"}]},"23_16":{service:"msgExtend",cmd:"updateMsgPin",response:[{type:"Long",name:"timetag"}]},"23_17":{service:"msgExtend",cmd:"deleteMsgPin",response:[{type:"Long",name:"timetag"}]},"23_18":{service:"msgExtend",cmd:"onAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_19":{service:"msgExtend",cmd:"onUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_20":{service:"msgExtend",cmd:"onDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_21":{service:"msgExtend",cmd:"getMsgPins",response:[{type:"Long",name:"timetag"},{type:"Bool",name:"modify"},{type:"PropertyArray",name:"pins",entity:"msgPinRes"}]},"23_103":{service:"msgExtend",cmd:"syncAddQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_104":{service:"msgExtend",cmd:"syncDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_112":{service:"msgExtend",cmd:"syncAddStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_113":{service:"msgExtend",cmd:"syncDeleteStickTopSession",response:[{type:"Long",name:"timetag"},{type:"Property",name:"stickTopSession"}]},"23_114":{service:"msgExtend",cmd:"syncUpdateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_115":{service:"msgExtend",cmd:"syncAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_116":{service:"msgExtend",cmd:"syncUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"23_117":{service:"msgExtend",cmd:"syncDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Long",name:"timetag"}]},"21_2":{service:"superTeam",cmd:"sendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_3":{service:"superTeam",cmd:"superTeamMsg",response:[{type:"Property",name:"msg"}]},"21_5":{service:"superTeam",cmd:"addSuperTeamMembers",response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"timetag"}]},"21_6":{service:"superTeam",cmd:"removeSuperTeamMembers",response:[{type:"Long",name:"timetag"}]},"21_7":{service:"superTeam",cmd:"leaveSuperTeam",response:[{type:"Long",name:"timetag"}]},"21_8":{service:"superTeam",cmd:"updateSuperTeam",response:[{type:"Long",name:"timetag"}]},"21_9":{service:"superTeam",cmd:"getSuperTeam",response:[{type:"Property",name:"team"}]},"21_12":{service:"superTeam",cmd:"getSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},"21_10":{service:"superTeam",cmd:"updateInfoInSuperTeam",response:[{type:"Property",name:"superTeamMember"}]},"21_13":{service:"superTeam",cmd:"getSuperTeamMembers",response:[{type:"Long",name:"timetag"}]},"21_11":{service:"superTeam",cmd:"getMySuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_14":{service:"superTeam",cmd:"getSuperTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"21_15":{service:"superTeam",cmd:"getSuperTeamMembersByJoinTime",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_16":{service:"superTeam",cmd:"sendSuperTeamCustomSysMsg",trivialErrorCodes:[7101]},"21_17":{service:"superTeam",cmd:"onDeleteSuperTeamMsg"},"21_18":{service:"superTeam",cmd:"onSuperTeamMsgDelete",response:[{type:"Property",name:"sysMsg"}]},"21_19":{service:"superTeam",cmd:"superTeamCustomSysMsg",response:[{type:"Property",name:"sysMsg"}]},"21_20":{service:"superTeam",cmd:"applySuperTeam",response:[{type:"Property",name:"team"}]},"21_21":{service:"superTeam",cmd:"passSuperTeamApply"},"21_22":{service:"superTeam",cmd:"rejectSuperTeamApply"},"21_23":{service:"superTeam",cmd:"acceptSuperTeamInvite",response:[{type:"Property",name:"team"}]},"21_24":{service:"superTeam",cmd:"rejectSuperTeamInvite"},"21_25":{service:"superTeam",cmd:"onMarkSuperTeamSessionAck"},"21_26":{service:"superTeam",cmd:"addSuperTeamManagers"},"21_27":{service:"superTeam",cmd:"removeSuperTeamManagers"},"21_28":{service:"superTeam",cmd:"updateSuperTeamMute"},"21_29":{service:"superTeam",cmd:"updateSuperTeamMembersMute",response:[{type:"Long",name:"timetag"}]},"21_30":{service:"superTeam",cmd:"updateNickInSuperTeam"},"21_31":{service:"superTeam",cmd:"transferSuperTeam"},"21_32":{service:"superTeam",cmd:"onMarkSuperTeamSessionsAck"},"21_33":{service:"superTeam",cmd:"getSuperTeamMembersByAccounts",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_34":{service:"superTeam",cmd:"getMutedSuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_113":{service:"superTeam",cmd:"syncSuperTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"members",entity:"superTeamMember"},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},"21_111":{service:"superTeam",cmd:"syncMySuperTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"superTeamMember"},{type:"Long",name:"timetag"}]},"21_109":{service:"superTeam",cmd:"syncSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},"21_101":{service:"superTeam",cmd:"syncCreateSuperTeam",response:[{type:"Property",name:"team"}]},"21_102":{service:"superTeam",cmd:"syncSendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_110":{service:"superTeam",cmd:"syncUpdateSuperTeamMember",response:[{type:"Property",name:"teamMember",entity:"superTeamMember"}]},"21_117":{service:"superTeam",cmd:"syncDeleteSuperTeamMsg",response:[{type:"Property",name:"sysMsg"}]},"21_125":{service:"superTeam",cmd:"syncMarkSuperTeamSessionAck",response:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"},{type:"StrArray",name:"abortedAccidList"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers",response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Long",name:"id"},{type:"Long",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Long",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Long",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam",response:[{type:"Property",name:"teamMember"}]},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_28":{service:"team",cmd:"sendTeamMsgReceipt",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_29":{service:"team",cmd:"getTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_30":{service:"team",cmd:"getTeamMsgReadAccounts",response:[{type:"Property",name:"teamMsgReceipt"},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},"8_31":{service:"team",cmd:"notifyTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_32":{service:"team",cmd:"muteTeamAll",response:[]},"8_33":{service:"team",cmd:"getTeamMemberInvitorAccid",response:[{type:"StrStrMap",name:"accountsMap"}]},"8_34":{service:"team",cmd:"getTeamsById",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"LongArray",name:"tids"}],trivialErrorCodes:[816]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Long",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Long",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Long",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Long",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Long",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Long",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Long",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"14_1":{service:"eventService",cmd:"publishEvent",response:[{type:"Property",name:"msgEvent"}]},"14_2":{service:"eventService",cmd:"pushEvent",response:[{type:"Property",name:"msgEvent"}]},"14_3":{service:"eventService",cmd:"subscribeEvent",response:[{type:"StrArray",name:"accounts"}]},"14_4":{service:"eventService",cmd:"unSubscribeEventsByAccounts",response:[{type:"StrArray",name:"accounts"}]},"14_5":{service:"eventService",cmd:"unSubscribeEventsByType"},"14_6":{service:"eventService",cmd:"querySubscribeEventsByAccounts",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_7":{service:"eventService",cmd:"querySubscribeEventsByType",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_9":{service:"eventService",cmd:"pushEvents",response:[{type:"PropertyArray",name:"msgEvents",entity:"msgEvent"}]},"22_1":{service:"proxyService",cmd:"httpProxy",response:[{type:"Property",name:"proxyTag"}]},"22_2":{service:"proxyService",cmd:"onProxyMsg",response:[{type:"Property",name:"proxyMsg",entity:"proxyMsgTag"}]},"24_1":{service:"qchat",cmd:"getQChatAddress",response:[{type:"StrArray",name:"address"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});t.exports={idMap:i,cmdConfig:k,packetConfig:L}},function(t,r){t.exports={negotiateTransportTag:{version:-1,serializeList:1,serialize:101},initTransportTag:{},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},uploadTaskTag:{sdklogUploadType:1,sdkLogUploadMsg:2},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,libEnv:44,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,connectionId:102,ip:103,time:109,customTag:38,customClientType:39},aosPushInfo:{pushType:110,hasTokenPreviously:111},sync:{myInfo:1,offlineMsgs:2,teams:3,netcallMsgs:6,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,robots:19,broadcastMsgs:20,avSignal:21,superTeams:22,myInfoInSuperTeams:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteMsgSelf:27,stickTopSessions:28,sessionHistoryMsgsDelete:29,filterMsgs:100},donnop:{open:1},sessionReqTag:{minTimestamp:1,maxTimestamp:2,needLastMsg:3,limit:4,hasMore:5},session:{id:1,updateTime:2,ext:3,lastMsg:4},superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,createTime:10,updateTime:11,custom:12,mute:13,invitoraccid:14,joinTime:15,followAccountIds:17},SpecialFollowUpdateInfoTag:{accids:1,type:2},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13,invitorAccid:14,followAccountIds:16},teamSpecialFollowUpdateTag:{accountIds:1,type:2},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,antiSpamBusinessId:23,clientAntiSpam:24,antiSpamUsingYidun:25,needMsgReceipt:26,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,delete:39,callbackExt:40,subType:41,yidunAntiCheating:42,env:43,yidunAntiSpamExt:44,yidunAntiSpamRes:45,__clientExt:46,robotInfoFunction:47,robotInfoTopic:48,robotInfoCustomContent:49,robotInfoAccount:50,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isInBlackList:106,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110,isReplyMsg:111,tempTeamMemberCount:112},threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2},comment:{from:1,body:2,time:3,custom:4,needPush:5,needBadge:6,pushTitle:7,apnsText:8,pushPayload:9},commentReq:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,timestamp:100},commentRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,detail:7,modify:8,timestamp:100},collect:{id:1,type:2,data:3,custom:4,uniqueId:5,createTime:6,updateTime:7},collectQuery:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5,type:6},stickTopSession:{id:1,topCustom:2,createTime:3,updateTime:4},pinTag:{pinFrom:1,pinCustom:2,createTime:3,updateTime:4},msgPinReq:{sessionId:1,timetag:2},msgPinRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,pinFrom:7,pinCustom:8},msgReceipt:{to:1,from:2,time:7,idClient:11},teamMsgReceipt:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},deleteMsgSelfTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,custom:8},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,env:21,idClient:23,callbackExt:22,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},broadcastMsg:{broadcastId:1,fromAccid:2,fromUid:3,timestamp:4,body:5},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12,serverex:13},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},antispamTag:{antiSpamBusinessId:1},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4},msgType:{text:0,picture:1,audio:2,video:3,location:4,notification:5,file:6,netcall_audio:7,netcall_vedio:8,datatunnel_new:9,tips:10,robot:11,custom:100},msgEvent:{type:1,value:2,idClient:3,custom:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverCustom:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105},clearMsgsParams:{account:1,delRoam:2},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},msgFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},msgTimingFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},delFriendParams:{delAlias:1},proxyTag:{zone:1,path:2,method:3,header:4,body:5},proxyMsgTag:{from:1,body:2,time:3},sessionAckTag:{scene:1,to:2,timetag:3},mixTokenReq:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4,policyVersion:5},mixAuthTokenReq:{type:1,urls:2},notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105},getQChatAddressTag:{ipType:1}}},function(t,r){t.exports={negotiateTransportTag:{"-1":"version",1:"serializeList",101:"serialize"},initTransportTag:{},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},appGrayConfigTag:{0:"grayConfig",1:"ttl"},mixStorePolicyTag:{0:"providers",1:"ttl",2:"mixEnable",3:"nosPolicy",4:"s3Policy",5:"policyVersion"},mixStoreTokenTag:{0:"provider",1:"accessKeyId",2:"secretAccessKey",3:"sessionToken",4:"token",5:"expireAt",6:"bucket",7:"objectName",8:"fileExpireSec",9:"tag",10:"shortUrl",11:"region"},notifyDetectTag:{1:"type",2:"params",3:"result",100:"t1",101:"t2",102:"t3",103:"t4",104:"t5",105:"t6"},backSourceTokenTag:{1:"type",2:"tokens",3:"token",4:"ttl"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",39:"customClientType",40:"sdkHumanVersion",112:"isReactNative",115:"authType",116:"loginExt",1e3:"token"},loginRes:{17:"lastLoginDeviceId",38:"customTag",102:"connectionId",103:"ip",104:"port",106:"country",111:"hasXMPush"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",32:"deviceInfo",38:"customTag",39:"customClientType",102:"connectionId",103:"ip",109:"time"},aosPushInfo:{110:"pushType",111:"hasTokenPreviously"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",6:"netcallMsgs",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",19:"robots",20:"broadcastMsgs",21:"avSignal",22:"superTeams",23:"myInfoInSuperTeams",24:"superTeamRoamingMsgs",25:"deleteSuperTeamMsg",26:"superTeamSessionAck",27:"deleteMsgSelf",28:"stickTopSessions",29:"sessionHistoryMsgsDelete",100:"filterMsgs"},donnop:{1:"open"},sessionReqTag:{1:"minTimestamp",2:"maxTimestamp",3:"needLastMsg",4:"limit",5:"hasMore"},session:{1:"id",2:"updateTime",3:"ext",4:"lastMsg",5:"lastMsgType"},superTeam:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},superTeamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"createTime",11:"updateTime",12:"custom",13:"mute",14:"invitoraccid",15:"joinTime",17:"followAccountIds"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute",14:"invitorAccid",16:"followAccountIds"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",23:"antiSpamBusinessId",24:"clientAntiSpam",25:"antiSpamUsingYidun",26:"needMsgReceipt",28:"needUpdateSession",29:"replyMsgFromAccount",30:"replyMsgToAccount",31:"replyMsgTime",32:"replyMsgIdServer",33:"replyMsgIdClient",34:"threadMsgFromAccount",35:"threadMsgToAccount",36:"threadMsgTime",37:"threadMsgIdServer",38:"threadMsgIdClient",39:"delete",40:"callbackExt",41:"subType",42:"yidunAntiCheating",43:"env",44:"yidunAntiSpamExt",45:"yidunAntiSpamRes",46:"__clientExt",47:"robotInfoFunction",48:"robotInfoTopic",49:"robotInfoCustomContent",50:"robotInfoAccount",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",106:"isInBlackList",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick",111:"isReplyMsg",112:"tempTeamMemberCount"},threadMsgReq:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse"},threadMsgsMeta:{1:"total",2:"lastMsgTime"},comment:{1:"from",2:"body",3:"time",4:"custom",5:"needPush",6:"needBadge",7:"pushTitle",8:"apnsText",9:"pushPayload"},commentReq:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",100:"timestamp"},commentRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"detail",8:"modify",100:"timestamp"},collect:{1:"id",2:"type",3:"data",4:"custom",5:"uniqueId",6:"createTime",7:"updateTime"},collectQuery:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse",6:"type"},stickTopSession:{1:"id",2:"topCustom",3:"createTime",4:"updateTime"},pinTag:{1:"pinFrom",2:"pinCustom",3:"createTime",4:"updateTime"},msgPinReq:{1:"sessionId",2:"timetag"},msgPinRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"pinFrom",8:"pinCustom"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},teamMsgReceipt:{0:"teamId",1:"idServer",100:"read",101:"unread",102:"idClient",103:"account"},deleteMsgSelfTag:{1:"scene",2:"from",3:"to",4:"idServer",5:"idClient",6:"time",7:"deletedTime",8:"custom"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",16:"opeAccount",21:"env",22:"callbackExt",23:"idClient",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},broadcastMsg:{1:"broadcastId",2:"fromAccid",3:"fromUid",4:"timestamp",5:"body"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime",13:"serverex"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime",_4_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"},msgType:{0:"text",1:"picture",2:"audio",3:"video",4:"location",5:"notification",6:"file",7:"netcall_audio",8:"netcall_vedio",9:"datatunnel_new",10:"tips",11:"robot",100:"custom"},msgEvent:{1:"type",2:"value",3:"idClient",4:"custom",5:"validTime",6:"broadcastType",7:"sync",8:"validTimeType",9:"durable",10:"time",11:"idServer",12:"clientType",13:"serverConfig",14:"serverCustom",101:"appid",103:"account",104:"enableMultiClient",106:"consid"},msgEventSubscribe:{1:"type",2:"subscribeTime",3:"sync",102:"to",104:"from",105:"time"},clearMsgsParams:{1:"account",2:"delRoam"},clearMsgsParamsWithSync:{0:"type",1:"otherAccid",2:"delRoam",3:"toTid",4:"isSyncSelf",5:"fromAccid",6:"time",7:"ext"},msgFullSearchRequestTag:{1:"keyword",2:"fromTime",3:"toTime",4:"sessionLimit",5:"msgLimit",6:"order",7:"p2pList",8:"teamList",9:"senderList",10:"msgTypeList",11:"msgSubTypeList"},delFriendParams:{1:"delAlias"},proxyTag:{1:"zone",2:"path",3:"method",4:"header",5:"body"},proxyMsgTag:{1:"from",2:"body",3:"time"},sessionReliableSyncTag:{1:"scene",2:"sessionId",3:"syncStatus",4:"syncEndMsgId",5:"syncEndMsgidClient",6:"syncEndMsgTime",7:"syncStartMsgid",8:"syncStartMsgidClient",9:"syncStartMsgTime",10:"nextMsgid",11:"nextMsgidClient",12:"nextMsgTime",13:"roamMsgSync",14:"offlineMsgSync",15:"netCallOfflineMsgSync"},sessionReliableSyncContextTag:{1:"timetag",2:"type"}}},function(t,r,e){var n=e(34),g=e(0),y=e(155),i=e(155),k=i.CMD_TYPE_PROPERTY,L=i.CMD_TYPE_BYTE,$=i.CMD_TYPE_INT,V=i.CMD_TYPE_BOOL,z=i.CMD_TYPE_LONG,re=i.CMD_TYPE_STRING,oe=i.CMD_TYPE_STR_STR_MAP,le=i.CMD_TYPE_STR_ARRAY,ue=i.CMD_TYPE_LONG_ARRAY,ie=i.CMD_TYPE_PROPERTY_ARRAY,ae=i.CMD_TYPE_KV_ARRAY,Fe=n({},y.idMap,{chatroom:{id:13,login:2,kicked:3,logout:4,sendMsg:6,msg:7,getChatroomMembers:8,getHistoryMsgs:9,markChatroomMember:11,closeChatroom:12,getChatroom:13,updateChatroom:14,updateMyChatroomMemberInfo:15,getChatroomMembersInfo:16,kickChatroomMember:17,updateChatroomMemberTempMute:19,queueOffer:20,queuePoll:21,queueList:22,peak:23,queueDrop:24,queueInit:25,queueChange:26,updateTagMembersTempMute:30,getChatroomMembersByTag:31,getChatroomMemberCountByTag:32,updateCoordinate:33,updateChatroomTags:34,sendChatroomMsgAck:35,getHistoryMsgsByTags:36,notifyCdnInfo:99},user:{id:3,syncRobot:16}}),de=g.merge({},y.cmdConfig,{login:{sid:Fe.chatroom.id,cid:Fe.chatroom.login,params:[{type:L,name:"type"},{type:k,name:"login"},{type:k,name:"imLogin"}]},logout:{sid:Fe.chatroom.id,cid:Fe.chatroom.logout},sendMsg:{sid:Fe.chatroom.id,cid:Fe.chatroom.sendMsg,params:[{type:k,name:"msg"}]},getChatroomMembers:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMembers,params:[{type:L,name:"type"},{type:z,name:"time"},{type:$,name:"limit"}]},getHistoryMsgs:{sid:Fe.chatroom.id,cid:Fe.chatroom.getHistoryMsgs,params:[{type:z,name:"timetag"},{type:$,name:"limit"},{type:V,name:"reverse"},{type:ue,name:"msgTypes"}]},markChatroomMember:{sid:Fe.chatroom.id,cid:Fe.chatroom.markChatroomMember,params:[{type:re,name:"account"},{type:$,name:"type"},{type:V,name:"isAdd"},{type:$,name:"level"},{type:re,name:"custom"}]},closeChatroom:{sid:Fe.chatroom.id,cid:Fe.chatroom.closeChatroom,params:[{type:re,name:"custom"}]},getChatroom:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroom},updateChatroom:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateChatroom,params:[{type:k,name:"chatroom"},{type:V,name:"needNotify"},{type:re,name:"custom"},{type:k,name:"antispamTag"}]},updateMyChatroomMemberInfo:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateMyChatroomMemberInfo,params:[{type:k,name:"chatroomMember"},{type:V,name:"needNotify"},{type:re,name:"custom"},{type:V,name:"needSave"},{type:k,name:"antispamTag"}]},getChatroomMembersInfo:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMembersInfo,params:[{type:le,name:"accounts"}]},kickChatroomMember:{sid:Fe.chatroom.id,cid:Fe.chatroom.kickChatroomMember,params:[{type:re,name:"account"},{type:re,name:"custom"}]},updateChatroomMemberTempMute:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateChatroomMemberTempMute,params:[{type:re,name:"account"},{type:z,name:"duration"},{type:V,name:"needNotify"},{type:re,name:"custom"}]},queueOffer:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueOffer,params:[{type:re,name:"elementKey"},{type:re,name:"elementValue"},{type:V,name:"transient"},{type:re,name:"elementAccount"}]},queuePoll:{sid:Fe.chatroom.id,cid:Fe.chatroom.queuePoll,params:[{type:re,name:"elementKey"}]},queueList:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueList},peak:{sid:Fe.chatroom.id,cid:Fe.chatroom.peak},queueDrop:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueDrop},queueInit:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueInit,params:[{type:$,name:"limit"}]},queueChange:{sid:Fe.chatroom.id,cid:Fe.chatroom.queueChange,params:[{type:oe,name:"elementMap"},{type:V,name:"needNotify"},{type:re,name:"notifyExt"}]},updateTagMembersTempMute:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateTagMembersTempMute,params:[{type:k,name:"tagMuteReq"}]},updateCoordinate:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateCoordinate,params:[{type:k,name:"coordinateReq"}]},getChatroomMemberCountByTag:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMemberCountByTag,params:[{type:re,name:"tag"}]},getChatroomMembersByTag:{sid:Fe.chatroom.id,cid:Fe.chatroom.getChatroomMembersByTag,params:[{type:k,name:"tagMemberReq"}]},updateChatroomTags:{sid:Fe.chatroom.id,cid:Fe.chatroom.updateChatroomTags,params:[{type:k,name:"chatRoomTagsUpdateTag"}]},sendChatroomMsgAck:{sid:Fe.chatroom.id,cid:Fe.chatroom.sendChatroomMsgAck,params:[{type:k,name:"chatRoomMsgAckTag"}]},getHistoryMsgsByTags:{sid:Fe.chatroom.id,cid:Fe.chatroom.getHistoryMsgsByTags,params:[{type:k,name:"chatRoomTagHistoryMsgRequestTag"}]},notifyCdnInfo:{sid:Fe.chatroom.id,cid:Fe.chatroom.notifyCdnInfo},syncRobot:{sid:Fe.user.id,cid:Fe.user.syncRobot,params:[{type:z,name:"timetag"}]}}),Ie=g.merge({},y.packetConfig,{"4_10":{service:"notify"},"4_11":{service:"notify"},"3_16":{service:"chatroom",cmd:"syncRobot",response:[{type:ie,name:"robots",entity:"robot"}]},"13_2":{service:"chatroom",cmd:"login",response:[{type:k,name:"chatroom"},{type:k,name:"chatroomMember"},{type:k,name:"chatroomCdnInfo"}]},"13_3":{service:"chatroom",cmd:"kicked",response:[{type:$,name:"reason"},{type:re,name:"custom"}]},"13_4":{service:"chatroom",cmd:"logout"},"13_6":{service:"chatroom",cmd:"sendMsg",response:[{type:k,name:"msg"}]},"13_7":{service:"chatroom",cmd:"msg",response:[{type:k,name:"msg"}]},"13_8":{service:"chatroom",cmd:"getChatroomMembers",response:[{type:ie,name:"members",entity:"chatroomMember"}]},"13_9":{service:"chatroom",cmd:"getHistoryMsgs",response:[{type:ie,name:"msgs",entity:"msg"}]},"13_11":{service:"chatroom",cmd:"markChatroomMember",response:[{type:k,name:"chatroomMember"}]},"13_12":{service:"chatroom",cmd:"closeChatroom"},"13_13":{service:"chatroom",cmd:"getChatroom",response:[{type:k,name:"chatroom"}]},"13_14":{service:"chatroom",cmd:"updateChatroom"},"13_15":{service:"chatroom",cmd:"updateMyChatroomMemberInfo"},"13_16":{service:"chatroom",cmd:"getChatroomMembersInfo",response:[{type:ie,name:"members",entity:"chatroomMember"}]},"13_17":{service:"chatroom",cmd:"kickChatroomMember"},"13_19":{service:"chatroom",cmd:"updateChatroomMemberTempMute",response:[{type:z,name:"time"}]},"13_20":{service:"chatroom",cmd:"queueOffer"},"13_21":{service:"chatroom",cmd:"queuePoll",response:[{type:re,name:"elementKey"},{type:re,name:"elementValue"}]},"13_22":{service:"chatroom",cmd:"queueList",response:[{type:ae,name:"queueList"}]},"13_23":{service:"chatroom",cmd:"peak",response:[{type:re,name:"elementKey"},{type:re,name:"elementValue"}]},"13_24":{service:"chatroom",cmd:"queueDrop"},"13_25":{service:"chatroom",cmd:"queueInit"},"13_26":{service:"chatroom",cmd:"queueChange",response:[{type:le,name:"elementKeyArray"}]},"13_30":{service:"chatroom",cmd:"updateTagMembersTempMute",response:[{type:z,name:"time"}]},"13_33":{service:"chatroom",cmd:"updateCoordinate"},"13_31":{service:"chatroom",cmd:"getChatroomMembersByTag",response:[{type:ie,name:"members",entity:"chatroomMember"}]},"13_32":{service:"chatroom",cmd:"getChatroomMemberCountByTag",response:[{type:z,name:"count"}]},"13_34":{service:"chatroom",cmd:"updateChatroomTags"},"13_36":{service:"chatroom",cmd:"getHistoryMsgsByTags",response:[{type:ie,name:"msgs",entity:"msg"}]},"13_99":{service:"chatroom",cmd:"notifyCdnInfo",response:[{type:k,name:"chatroomCdnInfo"}]},"13_101":{service:"chatroom",cmd:"updateChatroomTag",response:[{type:k,name:"updateTags"}]}});t.exports={idMap:Fe,cmdConfig:de,packetConfig:Ie}},function(t,r){t.exports={imLogin:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,sdkType:41,userAgent:42,libEnv:44,isReactNative:112,authType:115,loginExt:116,token:1e3,customTag:38},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},login:{appKey:1,account:2,deviceId:3,chatroomId:5,appLogin:8,chatroomNick:20,chatroomAvatar:21,chatroomCustom:22,chatroomEnterCustom:23,session:26,isAnonymous:38,tags:39,notifyTargetTags:40,loginAuthType:41,loginExt:42,loc_x:43,loc_y:44,loc_z:45,distance:46,antiSpamBusinessId:47},chatroom:{id:1,name:3,announcement:4,broadcastUrl:5,custom:12,createTime:14,updateTime:15,queuelevel:16,creator:100,onlineMemberNum:101,mute:102},msg:{idClient:1,type:2,attach:3,custom:4,resend:5,userUpdateTime:6,fromNick:7,fromAvatar:8,fromCustom:9,yidunEnable:10,antiSpamContent:11,skipHistory:12,body:13,antiSpamBusinessId:14,clientAntiSpam:15,antiSpamUsingYidun:16,time:20,from:21,chatroomId:22,fromClientType:23,highPriority:25,callbackExt:27,subType:28,yidunAntiCheating:29,env:30,notifyTargetTags:31,yidunAntiSpamExt:32,yidunAntiSpamRes:33,loc_x:34,loc_y:35,loc_z:36,toAccids:37,needHighPriorityMsgAck:38,__clientExt:39},chatroomMember:{chatroomId:1,account:2,type:3,level:4,nick:5,avatar:6,custom:7,online:8,guest:9,enterTime:10,blacked:12,gaged:13,valid:14,updateTime:15,tempMuted:16,tempMuteDuration:17},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{enable:1,cdnUrls:2,timestamp:3,interval:4,decryptType:5,decryptKey:6,timeout:7},tagMemberReq:{tag:1,time:2,limit:3},tagMuteReq:{tag:1,duration:2,needNotify:3,custom:4,notifyTargetTags:5},coordinateReq:{x:1,y:2,z:3,distance:4},chatRoomTagsUpdateTag:{tags:1,notifyTargetTags:2,needNotify:3,ext:4},chatRoomMsgAckTag:{idClient:1,chatroomId:2},chatRoomTagHistoryMsgRequestTag:{tags:1,types:2,fromTime:3,toTime:4,limit:5,reverse:6}}},function(t,r){t.exports={imLogin:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",41:"sdkType",42:"userAgent",44:"libEnv",112:"isReactNative",1e3:"token"},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time",25:"nertcChannelName",26:"nertcTokenTtl",27:"nertcToken",28:"nertcJoinRoomQueryParamMap",29:"nertcJoinRoomResponse",30:"callStatus"},login:{1:"appKey",2:"account",3:"deviceId",5:"chatroomId",8:"appLogin",20:"chatroomNick",21:"chatroomAvatar",22:"chatroomCustom",23:"chatroomEnterCustom",26:"session",38:"isAnonymous",39:"tags",40:"notifyTargetTags",41:"loginAuthType",42:"loginExt",43:"loc_x",44:"loc_y",45:"loc_z",46:"distance",47:"antiSpamBusinessId",_21_safe:"_chatroomAvatar_safe"},chatroom:{1:"id",3:"name",4:"announcement",5:"broadcastUrl",12:"custom",14:"createTime",15:"updateTime",16:"queuelevel",100:"creator",101:"onlineMemberNum",102:"mute"},msg:{1:"idClient",2:"type",3:"attach",4:"custom",5:"resend",6:"userUpdateTime",7:"fromNick",8:"fromAvatar",9:"fromCustom",10:"yidunEnable",11:"antiSpamContent",12:"skipHistory",13:"body",14:"antiSpamBusinessId",15:"clientAntiSpam",16:"antiSpamUsingYidun",20:"time",21:"from",22:"chatroomId",23:"fromClientType",25:"highPriority",27:"callbackExt",28:"subType",29:"yidunAntiCheating",30:"env",31:"notifyTargetTags",32:"yidunAntiSpamExt",33:"yidunAntiSpamRes",34:"loc_x",35:"loc_y",36:"loc_z",37:"toAccids",38:"needHighPriorityMsgAck",39:"__clientExt",_8_safe:"_fromAvatar_safe"},chatroomMember:{1:"chatroomId",2:"account",3:"type",4:"level",5:"nick",6:"avatar",7:"custom",8:"online",9:"guest",10:"enterTime",11:"connectionId",12:"blacked",13:"gaged",14:"valid",15:"updateTime",16:"tempMuted",17:"tempMuteDuration",_6_safe:"_avatar_safe"},antispamTag:{antiSpamBusinessId:1},chatroomCdnInfo:{1:"enable",2:"cdnUrls",3:"timestamp",4:"interval",5:"decryptType",6:"decryptKey",7:"timeout"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},updateTags:{1:"currentTags"}}},function(t,r,e){t.exports=e(820)},function(t,r,e){t.exports=e(829)},function(t,r,e){var n=e(5),g=e(34),y=e(0),i=y.notundef,k={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},L={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};function $(V){y.verifyOptions(V,"account","friend::Friend"),y.verifyParamAtLeastPresentOne(V,"alias custom","friend::Friend"),this.account=V.account,i(V.alias)&&(this.alias=V.alias),i(V.custom)&&(this.custom=V.custom)}$.reverse=function(V){var z=y.filterObj(V,"account alias custom createTime updateTime serverex");return i(V.flag)&&(z.valid=V.flag==="1"),i(z.createTime)&&(z.createTime=+z.createTime),i(z.updateTime)&&(z.updateTime=+z.updateTime),z},$.validTypes=function(){return n(k)},$.getByteFromType=function(V){return k[V]},$.getTypeFromByte=function(V){return L[V]},$.assembleFriend=function(V){var z=+new Date;return g({},V,{alias:"",createTime:z,custom:"",updateTime:z,valid:!0})},t.exports=$},function(t,r,e){var n=e(785),g=e(34),y=e(0),i=y.notundef;function k(L,$){n(L.body)||y.onParamError("body只能是整数",$),this.body=L.body,this.from=L.from||"",this.custom=L.custom||"",i(L.pushTitle)&&(this.pushTitle=L.pushTitle),i(L.apnsText)&&(this.apnsText=L.apnsText),i(L.pushPayload)&&(this.pushPayload=L.pushPayload),i(L.needPush)&&(this.needPush=L.needPush===!0?1:0),i(L.needBadge)&&(this.needBadge=L.needBadge===!0?1:0)}k.reverse=function(L){var $=g({},L);return i(L.needBadge)&&($.needBadge=+L.needBadge==1),i(L.needPush)&&($.needPush=+L.needPush==1),$.body=+L.body,$.time=+L.time,$},t.exports=k},function(t,r,e){t.exports=e(842)},function(t,r,e){var n=e(785),g=e(34),y=e(0);function i(k,L){n(k.type)||y.onParamError("Collect.type只能是整数",L),y.notundef(k.uniqueId)&&(this.uniqueId=k.uniqueId),this.type=k.type,this.data=k.data||"",this.custom=k.custom||""}i.reverse=function(k){var L=g({},k);return L.type=+L.type,L.createTime=+L.createTime,L.updateTime=+L.updateTime,L},t.exports=i},function(t,r,e){var n=e(788),g=e(789),y=e(790),i=e(791);function k(V,z,re){var oe=V;return g(z)?(re=z,typeof V=="string"&&(oe={uri:V})):oe=i(z,{uri:V}),oe.callback=re,oe}function L(V,z,re){return $(z=k(V,z,re))}function $(V){if(V.callback===void 0)throw new Error("callback argument missing");var z=!1,re=function(er,or,dr){z||(z=!0,V.callback(er,or,dr))};function oe(){var er=void 0;if(er=Fe.response?Fe.response:Fe.responseText||function(or){try{if(or.responseType==="document")return or.responseXML;var dr=or.responseXML&&or.responseXML.documentElement.nodeName==="parsererror";if(or.responseType===""&&!dr)return or.responseXML}catch{}return null}(Fe),Et)try{er=JSON.parse(er)}catch{}return er}function le(er){return clearTimeout(de),er instanceof Error||(er=new Error(""+(er||"Unknown XMLHttpRequest Error"))),er.statusCode=0,re(er,cr)}function ue(){if(!ae){var er;clearTimeout(de),er=V.useXDR&&Fe.status===void 0?200:Fe.status===1223?204:Fe.status;var or=cr,dr=null;return er!==0?(or={body:oe(),statusCode:er,method:Ve,headers:{},url:Ie,rawRequest:Fe},Fe.getAllResponseHeaders&&(or.headers=y(Fe.getAllResponseHeaders()))):dr=new Error("Internal XMLHttpRequest Error"),re(dr,or,or.body)}}var ie,ae,Fe=V.xhr||null;Fe||(Fe=V.cors||V.useXDR?new L.XDomainRequest:new L.XMLHttpRequest);var de,Ie=Fe.url=V.uri||V.url,Ve=Fe.method=V.method||"GET",kt=V.body||V.data,At=Fe.headers=V.headers||{},ze=!!V.sync,Et=!1,cr={body:void 0,headers:{},statusCode:0,method:Ve,url:Ie,rawRequest:Fe};if("json"in V&&V.json!==!1&&(Et=!0,At.accept||At.Accept||(At.Accept="application/json"),Ve!=="GET"&&Ve!=="HEAD"&&(At["content-type"]||At["Content-Type"]||(At["Content-Type"]="application/json"),kt=JSON.stringify(V.json===!0?kt:V.json))),Fe.onreadystatechange=function(){Fe.readyState===4&&setTimeout(ue,0)},Fe.onload=ue,Fe.onerror=le,Fe.onprogress=function(){},Fe.onabort=function(){ae=!0},Fe.ontimeout=le,Fe.open(Ve,Ie,!ze,V.username,V.password),ze||(Fe.withCredentials=!!V.withCredentials),!ze&&V.timeout>0&&(de=setTimeout(function(){if(!ae){ae=!0,Fe.abort("timeout");var er=new Error("XMLHttpRequest timeout");er.code="ETIMEDOUT",le(er)}},V.timeout)),Fe.setRequestHeader)for(ie in At)At.hasOwnProperty(ie)&&Fe.setRequestHeader(ie,At[ie]);else if(V.headers&&!function(er){for(var or in er)if(er.hasOwnProperty(or))return!1;return!0}(V.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in V&&(Fe.responseType=V.responseType),"beforeSend"in V&&typeof V.beforeSend=="function"&&V.beforeSend(Fe),Fe.send(kt||null),Fe}t.exports=L,t.exports.default=L,L.XMLHttpRequest=n.XMLHttpRequest||function(){},L.XDomainRequest="withCredentials"in new L.XMLHttpRequest?L.XMLHttpRequest:n.XDomainRequest,function(V,z){for(var re=0;re<V.length;re++)z(V[re])}(["get","put","post","patch","head","delete"],function(V){L[V==="delete"?"del":V]=function(z,re,oe){return(re=k(z,re,oe)).method=V.toUpperCase(),$(re)}})},function(t,r,e){(function(n){var g;g=typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{},t.exports=g}).call(this,e(77))},function(t,r){t.exports=function(n){if(!n)return!1;var g=e.call(n);return g==="[object Function]"||typeof n=="function"&&g!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)};var e=Object.prototype.toString},function(t,r){var e=function(n){return n.replace(/^\s+|\s+$/g,"")};t.exports=function(n){if(!n)return{};for(var g,y={},i=e(n).split(`
`),k=0;k<i.length;k++){var L=i[k],$=L.indexOf(":"),V=e(L.slice(0,$)).toLowerCase(),z=e(L.slice($+1));y[V]===void 0?y[V]=z:(g=y[V],Object.prototype.toString.call(g)==="[object Array]"?y[V].push(z):y[V]=[y[V],z])}return y}},function(t,r){t.exports=function(){for(var n={},g=0;g<arguments.length;g++){var y=arguments[g];for(var i in y)e.call(y,i)&&(n[i]=y[i])}return n};var e=Object.prototype.hasOwnProperty},function(t,r,e){var n=e(24),g=e(128),y=e(4),i=e(6);function k(L){var $=this,V=L.url||null;$.level={debug:0,log:1,info:2,warn:3,error:4}[L.level]||0,$.logCache=[],$.logNum=1,$.timeInterval=5e3,window.onerror=function(z,re,oe,le,ue){$.error(ue)},g(function(){$.logCache.length>0&&V&&$.postLogs(V,$.logCache)},$.timeInterval)}k.prototype.debug=function(){var L;this.level>0||(console.debug.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[degbug]"]).call(L,arguments)))},k.prototype.log=function(){var L;this.level>1||(console.log.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[log]"]).call(L,arguments)))},k.prototype.info=function(){var L;this.level>2||(console.info.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[info]"]).call(L,arguments)))},k.prototype.warn=function(){var L;this.level>3||(console.warn.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[warn]"]).call(L,arguments)))},k.prototype.error=function(){var L;this.level>4||(console.error.apply(this,arguments),this.cacheLogs.apply(this,y(L=["[error]"]).call(L,arguments)))},k.prototype.cacheLogs=function(L,$){for(var V=[],z=0;z<$.length;z++){var re=$[z];n(re)==="object"?V.push(i(re)):V.push(re)}var oe=this.logNum+++" "+L+" "+V.join("; ");this.logCache.push(oe.replace("%c",""))},k.prototype.postLogs=function(L,$){var V=this,z=new XMLHttpRequest;z.onreadystatechange=function(){z.readyState===4&&(z.status===200?(console.info("LoggerPlugin::日志上报完成"),V.logCache=[],V.timeInterval=5e3):V.timeInterval+=5e3)},z.open("POST",L),z.setRequestHeader("Content-Type","plain/text;charset=utf-8"),z.timeout=360,z.send($.join(`
`))},t.exports=k},function(t,r,e){var n=e(3),g=e(48);t.exports=function(y){var i,k,L,$;y.db&&(g.db=y.db),y.rnfs&&(g.rnfs=y.rnfs,g.rnfs.size||(g.rnfs.size=1048576),g.rnfs.nimPromise=(i=g.rnfs,k=i.size/2-256,$=0,L=g.rnfs.DocumentDirectoryPath+"/nimlog_"+$+".log",i.exists(L).then(function(V){return V?i.stat(L):n.reject(0)}).then(function(V){return V&&V.size>k?n.reject(1):n.reject(0)}).catch(function(V){return typeof V=="number"&&(i.nimIndex=V),n.resolve()})))}},function(t,r,e){var n=e(43),g=e(0),y=g.notundef,i=g.undef;function k(L){y(L.name)&&(this.name=""+L.name),y(L.announcement)&&(this.announcement=""+L.announcement),y(L.broadcastUrl)&&(this.broadcastUrl=""+L.broadcastUrl),y(L.custom)&&(this.custom=""+L.custom),y(L.queuelevel)&&(this.queuelevel=n(L.queuelevel))}k.reverse=function(L){var $=g.copy(L);return i($.announcement)&&($.announcement=""),i($.broadcastUrl)&&($.broadcastUrl=""),i($.custom)&&($.custom=""),y($.createTime)&&($.createTime=+$.createTime),y($.updateTime)&&($.updateTime=+$.updateTime),y($.onlineMemberNum)&&($.onlineMemberNum=+$.onlineMemberNum),y($.mute)&&($.mute=$.mute==="1"),$},t.exports=k},function(t,r,e){var n,g,y;t.exports=(y=e(96),g=(n=y).lib.WordArray,n.enc.Base64={stringify:function(i){var k=i.words,L=i.sigBytes,$=this._map;i.clamp();for(var V=[],z=0;z<L;z+=3)for(var re=(k[z>>>2]>>>24-z%4*8&255)<<16|(k[z+1>>>2]>>>24-(z+1)%4*8&255)<<8|k[z+2>>>2]>>>24-(z+2)%4*8&255,oe=0;oe<4&&z+.75*oe<L;oe++)V.push($.charAt(re>>>6*(3-oe)&63));var le=$.charAt(64);if(le)for(;V.length%4;)V.push(le);return V.join("")},parse:function(i){var k=i.length,L=this._map,$=this._reverseMap;if(!$){$=this._reverseMap=[];for(var V=0;V<L.length;V++)$[L.charCodeAt(V)]=V}var z=L.charAt(64);if(z){var re=i.indexOf(z);re!==-1&&(k=re)}return function(oe,le,ue){for(var ie=[],ae=0,Fe=0;Fe<le;Fe++)if(Fe%4){var de=ue[oe.charCodeAt(Fe-1)]<<Fe%4*2,Ie=ue[oe.charCodeAt(Fe)]>>>6-Fe%4*2,Ve=de|Ie;ie[ae>>>2]|=Ve<<24-ae%4*8,ae++}return g.create(ie,ae)}(i,k,$)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},y.enc.Base64)},function(t,r,e){var n,g,y,i,k,L,$,V;t.exports=(V=e(96),e(916),e(917),g=(n=V).lib,y=g.Base,i=g.WordArray,k=n.algo,L=k.MD5,$=k.EvpKDF=y.extend({cfg:y.extend({keySize:4,hasher:L,iterations:1}),init:function(z){this.cfg=this.cfg.extend(z)},compute:function(z,re){for(var oe,le=this.cfg,ue=le.hasher.create(),ie=i.create(),ae=ie.words,Fe=le.keySize,de=le.iterations;ae.length<Fe;){oe&&ue.update(oe),oe=ue.update(z).finalize(re),ue.reset();for(var Ie=1;Ie<de;Ie++)oe=ue.finalize(oe),ue.reset();ie.concat(oe)}return ie.sigBytes=4*Fe,ie}}),n.EvpKDF=function(z,re,oe){return $.create(oe).compute(z,re)},V.EvpKDF)},function(t,r,e){e(305);var n=e(41);e(318)(n),t.exports=n},function(t,r,e){var n=e(43),g=e(3),y=e(9),i=e(6),k=e(2),L=e(4),$=e(310),V=e(11),z=e(15),re=e(70),oe=e(203),le=e(308),ue=e(799),ie=e(0),ae=e(311),Fe=e(35),de=Fe.newSupportDBError,Ie=Fe.noDBError,Ve=!1;function kt(Et){Ve=Et,ae.set("db",Et,le)}if(kt(!!ie.getGlobal().indexedDB),re.name==="IE"&&kt(!1),re.name==="Microsoft Edge"&&kt(!1),re.name==="Safari")try{n(re.version.split(".")[0],10)<10&&kt(!1)}catch{}function At(Et){this.concurrency=0,this.pendingTasks=[],this.queue=g.resolve(),this.logger=Et.logger,this.reporter=Et.reporter,this.core=Et.core,this.account=Et.account,this.notifyError=Et.notifyError}var ze=At.prototype;ze.reset=ie.emptyFunc,Ve&&(ze.reset=function(Et){this.enable=Et!==!1}),ze.addTask=function(Et){var cr=this;return new g(function(er,or){function dr(lr){cr.concurrency--;var nr=cr.pendingTasks.shift();nr&&cr.addTask(nr),lr()}if(cr.concurrency<100)return cr.concurrency++,Et().then(function(lr){dr(function(){er(lr),Et.resolve&&Et.resolve(lr)})},function(lr){dr(function(){var nr=(lr=lr||{}).event||lr,ur={event:nr,callFunc:lr.callFunc||"db::addTask"};cr.logger.error("db::error event is",nr,ie.get(nr,"target.error")),or(ur),Et.reject&&Et.reject(ur)})});Et.resolve||(Et.resolve=er,Et.reject=or),cr.pendingTasks.push(Et)})},ze.reportError=function(Et){var cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},er=arguments.length>2?arguments[2]:void 0;this.reporter.reportTraceStart("exceptions",{user_id:this.account,trace_id:ie.get(this.core,"socket.socket.sessionid"),action:4,exception_service:0});var or,dr=cr.context||"";if(er)try{var lr;or=y(lr=i(er)).call(lr,0,2e4),dr+=". ".concat(or)}catch{or=""}var nr=ie.get(Et,"code")||ie.get(Et,"target.error.code")||0,ur=ie.get(Et,"message")||ie.get(Et,"target.error.message")||"unknown";ur=ur+" stack: "+ie.get(Et,"stack")||ie.get(Et,"target.error.stack")||"unknown",this.reporter.reportTraceUpdateV2("exceptions",{code:nr,description:ur,operation_type:cr.operation_type,target:cr.target||this.name,context:dr}),this.reporter.reportTraceEnd("exceptions",1)},ze.init=function(Et){var cr=this;return cr.addTask(function(){return cr.enable?cr.server?g.resolve():(cr.name="nim-"+Et,le.open({server:cr.name,version:ue.version,schema:ue.schema}).then(function(er){cr.logger.info("db::init: ".concat(cr.name)),cr.server=er},function(er){throw kt(!1),cr.server=null,cr.name=null,er}).catch(function(er){throw cr.reportError(er,{operation_type:0,context:"version ".concat(ue.version),target:"nim-"+Et}),er})):g.reject(de({callFunc:"db::init"}))})},ze.destroy=function(){var Et=this;return Et.addTask(function(){if(!Et.enable)return g.reject(de({callFunc:"db::destroy"}));if(!Et.server)return g.resolve();try{return le.remove(Et.name).then(function(){Et.logger.info("db::destroy: ".concat(Et.name)),Et.server=null,Et.name=null}).catch(function(cr){throw Et.reportError(cr,{operation_type:1,context:"remove database failed"}),cr})}catch(cr){throw Et.reportError(cr,{operation_type:1,context:"remove database failed"}),cr}})},ze.clear=function(){var Et=this;return Et.addTask(function(){return Et.enable?Et.server?Et.server.clear("timetag").then(function(){var cr=y([]).call(Et.server.getIndexedDB().objectStoreNames),er=[];if(k(cr).call(cr,function(or){er.push(Et.server.clear(or).catch(function(dr){throw Et.reportError(dr,{operation_type:3,context:"tableName: ".concat(or,". clear table failed")}),dr}))}),er.length)return g.all(er).then(function(){Et.logger.info("db::clear: ".concat(Et.name))}).catch(function(or){return Et.logger.error("db::clear: ",or),g.reject(or)})}):g.resolve():g.reject(de({callFunc:"db::clear"}))})},ze.close=function(){this.server&&(this.server.close(),this.server=null,this.name=null)},ze.remove=function(Et,cr,er,or,dr,lr,nr){var ur=this;return ur.addTask(function(){ur.checkDB();try{return ur.server.remove(Et,cr,er,or,dr,lr,nr).then(function(){var ar;ur.logger.info(L(ar="db::delete: ".concat(Et," ")).call(ar,cr||er))}).catch(function(ar){throw ur.reportError(ar,{operation_type:3,context:"tableName: ".concat(Et,", remove failed")},{name:Et,keys:cr,keyName:er,lowerBound:or,upperBound:dr,lowerOpen:lr,upperOpen:nr}),ur.logger.error("db::remove::server.remove error",ar),ar})}catch(ar){throw ur.reportError(ar,{operation_type:3,context:"tableName: ".concat(Et,", remove failed")},{name:Et,keys:cr,keyName:er,lowerBound:or,upperBound:dr,lowerOpen:lr,upperOpen:nr}),ur.logger.error("db::remove::server.remove error",ar),ar}})},ze.put=function(Et,cr){var er=this;return er.addTask(function(){er.checkDB(),ie.isArray(cr)||(cr=[cr]);try{return er.server.update(Et,cr).then(function(or){var dr=[Et],lr=ue.keyPath(Et),nr=[];return lr&&(k(or).call(or,function(ur){nr.push(oe(ur,lr))}),dr.push(nr.length===1?nr[0]:nr)),dr.unshift("db::put:"),Et==="timetag"&&dr.push(or[0]),er.logger.log.apply(er.logger.log,dr),or}).catch(function(or){throw er.reportError(or,{operation_type:3,context:"tableName: ".concat(Et,". put failed")},cr),or})}catch(or){throw er.reportError(or,{operation_type:3,context:"tableName: ".concat(Et,". put failed")},cr),or}})},ze.get=function(Et,cr){var er=this;return er.addTask(function(){er.checkDB();try{return er.server.get(Et,cr).catch(function(dr){var lr;throw er.reportError(dr,{operation_type:3,context:L(lr="tableName: ".concat(Et,". get failed with key ")).call(lr,cr)}),dr})}catch(dr){var or;throw er.reportError(dr,{operation_type:3,context:L(or="tableName: ".concat(Et,". get failed with key ")).call(or,cr)}),dr}})},ze.modifyOrPut=function(Et){var cr=this,er=Et.table,or=ie.copy(Et.obj),dr=Et.key,lr=Et.modifyObjWhenPut,nr=ie.copy(or);return delete nr[dr],cr.getOne(er,null,or[dr],{modifyObj:nr}).then(function(ur){return ur?(nr.idClient?nr={idClient:nr.idClient,server:nr.server,pinFrom:nr.pinFrom}:(nr.lastMsg=nr.lastMsg&&nr.lastMsg.idServer+"_"+nr.lastMsg.idClient,nr.localCustom=nr.localCustom&&"***",nr.topCustom=nr.topCustom&&"***"),cr.logger.log("db::modifyOrPut: update table ".concat(er),nr),ur):(or=ie.merge(or,lr),cr.put(er,or).then(function(ar){return ar[0]}))})},ze.updateAndDelete=function(Et,cr,er){var or=this;return or.addTask(function(){or.checkDB();try{return or.server.updateAndDelete(Et,cr,er).catch(function(dr){throw or.reportError(dr,{operation_type:3,context:"tableName: ".concat(Et,". updateAndDelete failed")},{updates:cr,deletes:er}),dr})}catch(dr){throw or.reportError(dr,{operation_type:3,context:"tableName: ".concat(Et,". updateAndDelete failed")},{updates:cr,deletes:er}),dr}})},ze.getAll=function(Et,cr){var er=this;return er.addTask(function(){er.checkDB(),(cr=cr||{}).keys=$(cr)===!0,cr.desc=cr.desc===!0,cr.distinct=cr.distinct===!0;try{var or,dr,lr;return V(or=$(dr=z(lr=er.server.query(Et,cr.index)).call(lr,z(cr))).call(dr,$(cr)).desc(cr.desc).limit(cr.limit).distinct(cr.distinct)).call(or,cr.mapper).modify(cr.modifyObj).execute().catch(function(nr){throw er.reportError(nr,{operation_type:3,context:"tableName: ".concat(Et,". getAll failed")},cr),nr})}catch(nr){throw er.reportError(nr,{operation_type:3,context:"tableName: ".concat(Et,". getAll failed")},cr),nr}})},ze.getOnly=function(Et,cr,er,or){var dr=this;return dr.addTask(function(){dr.checkDB(),(or=or||{}).keys=$(or)===!0,or.desc=or.desc===!0,or.distinct=or.distinct===!0,or.remove=or.remove===!0;try{var lr,nr,ur;return V(lr=$(nr=z(ur=dr.server.query(Et,cr).only(er)).call(ur,z(or))).call(nr,$(or)).desc(or.desc).limit(or.limit).distinct(or.distinct)).call(lr,or.mapper).modify(or.modifyObj).remove(or.remove).execute().catch(function(pr){var hr,Cr;throw dr.reportError(pr,{operation_type:3,context:L(hr=L(Cr="tableName: ".concat(Et,". getOnly failed with index: ")).call(Cr,cr,", matchValue: ")).call(hr,er)},or),pr})}catch(pr){var ar,gr;throw dr.reportError(pr,{operation_type:3,context:L(ar=L(gr="tableName: ".concat(Et,". getOnly failed with index: ")).call(gr,cr,", matchValue: ")).call(ar,er)},or),pr}})},ze.getOne=function(){var Et=this;return Et.getOnly.apply(Et,arguments).then(function(cr){return cr[0]})},ze.clearTable=function(Et){var cr=this;return cr.addTask(function(){cr.checkDB();try{return cr.server.clear(Et).catch(function(er){throw cr.reportError(er,{operation_type:3,context:"tableName: ".concat(Et,". clearTable failed")},options),er})}catch(er){throw cr.reportError(er,{operation_type:3,context:"tableName: ".concat(Et,". clearTable failed")},options),er}})},ze.checkDB=function(){if(!this.enable)throw de({callFunc:"db::checkDB"});if(!this.server)throw Ie({callFunc:"db::checkDB"})},t.exports=At},function(t,r){var e={version:14},n={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},sessionsWithMoreRoaming:{key:{keyPath:"id"}},msgReadDetail:{key:{keyPath:"idClient"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},superTeam:{key:{keyPath:"teamId"}},superTeamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1},id:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msgPin:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1}}},broadcastMsg:{key:{keyPath:"broadcastId"},indexes:{time:{unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};e.keyPath=function(g){return n[g].key.keyPath},e.schema=function(){return window._nimForceSyncIM=!0,n},t.exports=e},function(t,r,e){var n=e(79).fn;n.setKey=function(g,y){return this.put("kv",{key:g,value:y})},n.getKey=function(g){return this.get("kv",g).then(function(y){return y&&y.value})},n.setDonnop=function(g){return this.setKey("donnop",g)},n.getDonnop=function(){return this.getKey("donnop")}},function(t,r,e){var n=e(8),g=e(43),y=e(79).fn;y.getTimetags=function(i){var k={};return this.getAll("timetag",{filter:i,mapper:function(L){return k[L.name]=L.value,L}}).then(function(){return k})},y.getTeamMemberTimetags=function(){return this.getTimetags(function(i){var k;return n(k=i.name).call(k,"team-")!==-1})},y.getSuperTeamMemberTimetags=function(){return this.getTimetags(function(i){var k;return n(k=i.name).call(k,"superTeam-")!==-1})},y.getTimetag=function(i){return this.getOne("timetag",null,i).then(function(k){return(k=k||{value:0}).value})},y.getTeamMemberTimetag=function(){return 0},y.updateTimetag=function(i,k){var L=this,$={name:i,value:k};return this.put("timetag",$).catch(function(V){L.notifyError&&L.notifyError(V)})},y.updateMyInfoTimetag=function(i){return this.updateTimetag("myInfo",i)},y.updateRelationTimetag=function(i){return this.updateTimetag("relations",i)},y.getRelationsTimetag=function(){return this.getTimetag("relations")},y.updateFriendTimetag=function(i){return this.updateTimetag("friends",i)},y.getFriendsTimetag=function(){return this.getTimetag("friends")},y.updateFriendUserTimetag=function(i){return this.updateTimetag("friendUsers",i)},y.updateTeamTimetag=function(i){return this.updateTimetag("teams",i)},y.getTeamsTimetag=function(){return this.getTimetag("teams")},y.updateSuperTeamTimetag=function(i){return this.updateTimetag("superTeams",i)},y.getSuperTeamsTimetag=function(){return this.getTimetag("superTeams")},y.updateTeamMemberTimetag=function(i,k){return this.updateTimetag("team-"+i,k)},y.getTeamMembersTimetag=function(i){return this.getTimetag("team-"+i)},y.updateSuperTeamMemberTimetag=function(i,k){return this.updateTimetag("superTeam-"+i,k)},y.getSuperTeamMembersTimetag=function(i){return this.getTimetag("superTeam-"+i)},y.updateMyTeamMembersTimetag=function(i){return this.updateTimetag("myTeamMembers",i)},y.updateMySuperTeamMembersTimetag=function(i){return this.updateTimetag("myInfoInSuperTeams",i)},y.getBroadcastMsgTimetag=function(){return this.getTimetag("broadcastMsg")},y.updateBroadcastMsgTimetag=function(i){return this.updateTimetag("broadcastMsg",g(i))},y.updateRoamingMsgTimetag=function(i){return this.updateTimetag("roamingMsgs",i)},y.updateSuperTeamRoamingMsgTimetag=function(i){return this.updateTimetag("superTeamRoamingMsgs",i)},y.updateMsgReceiptsTimetag=function(i){return this.updateTimetag("msgReceipts",i)},y.updateDonnopTimetag=function(i){return this.updateTimetag("donnop",i)},y.updateSessionAck=function(i){return this.updateTimetag("sessionAck",i)},y.updateDeleteMsgSelf=function(i){return this.updateTimetag("deleteMsgSelf",i)},y.updateSuperTeamSessionAck=function(i){return this.updateTimetag("superTeamSessionAck",i)},y.deleteTimetag=function(i){return this.remove("timetag",i)},y.deleteTeamMemberTimetag=function(i){return this.deleteTimetag("team-"+i)},y.deleteSuperTeamMemberTimetag=function(i){return this.deleteTimetag("superTeam-"+i)}},function(t,r,e){var n=e(3),g=e(79).fn,y=e(0);g.mergeRelations=function(i,k,L,$,V){var z=this,re=z.updateAndDelete("blacklist",i,k),oe=z.updateAndDelete("mutelist",L,$);return n.all([re,oe]).then(function(){return z.logger.info("db::mergeRelations: timetag ".concat(V)),z.updateRelationTimetag(V),[i,k,L,$,V]})},g.getRelations=function(){var i=this.getAll("blacklist"),k=this.getAll("mutelist");return n.all([i,k])},g.markInBlacklist=function(i){if((i=y.copy(i)).isAdd){var k=i.record;return this.put("blacklist",k)}var L=i.account;return this.remove("blacklist",L)},g.markInMutelist=function(i){if((i=y.copy(i)).isAdd){var k=i.record;return this.put("mutelist",k)}var L=i.account;return this.remove("mutelist",L)}},function(t,r,e){var n=e(11),g=e(3),y=e(125),i=e(79).fn,k=e(0);i.mergeFriends=function(L,$,V){var z=this;return z.updateAndDelete("friend",L,$).then(function(){return z.logger.log("db::mergeFriends: updateAndDelete done",L&&n(L).call(L,function(re){return re.account}).join(",")),V&&z.updateFriendTimetag(V),[L,$,V]})},i.putFriend=function(L){return this.put("friend",L)},i.updateFriend=function(L){var $=this,V=(L=k.copy(L)).account;return this.getOne("friend",null,V,{modifyObj:L}).then(function(z){return z?$.logger.log("db::updateFriend: ".concat(V)):$.logger.warn("db::updateFriend: no record ".concat(V)),z})},i.deleteFriend=function(L){var $=this.remove("friend",L),V=this.deleteUser(L);return g.all([$,V])},i.getFriends=function(){var L,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={};$.accountIds!==void 0&&(V=y(L=$.accountIds).call(L,function(re,oe){return re[oe]=!0,re},{}));var z=function(re){return!!re.valid&&!($.updateTime!==void 0&&re.updateTime<=$.updateTime)&&!($.accountIds!==void 0&&!V[re.account])};return this.getAll("friend",{filter:z})},i.getFriend=function(L){return this.getOne("friend",null,L)},i.getUserFromBlackList=function(L){return this.getOne("blacklist",null,L)}},function(t,r,e){var n=e(3),g=e(2),y=e(4),i=e(125),k=e(11),L=e(79).fn,$=e(0),V=e(35),z=e(198),re=e(160);function oe(ie){return ie.valid&&ie.validToCurrentUser}function le(ie){return ie&&ie.valid}function ue(ie){return ie&&$.fillUndef(ie,{mute:!1,custom:""}),ie}L.mergeTeams=function(ie,ae,Fe){var de=this,Ie=de.put("team",ie),Ve=de.leaveTeams(ae,Fe);return n.all([Ie,Ve]).then(function(){return de.logger.log("db::mergeTeams:"),de.updateTeamTimetag(Fe),[ie,ae,Fe]})},L.putTeam=function(ie){if(ie)return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(ae){ae.validToCurrentUser=!0}),this.put("team",ie)},L.updateTeam=function(ie){var ae=this,Fe=(ie=$.copy(ie)).teamId;return ae.getOne("team",null,Fe,{modifyObj:ie}).then(function(de){if(de)ae.logger.log("db::updateTeam: ".concat(Fe));else if(ae.logger.warn("db::updateTeam: no record ".concat(Fe)),ie.validToCurrentUser)return ae.putTeam(ie);return de})},L.transferTeam=function(ie,ae,Fe){var de=this,Ie=ie.teamId,Ve=ie.memberUpdateTime,kt={teamId:Ie,account:ae,type:"normal",updateTime:Ve},At={teamId:Ie,account:Fe,type:"owner",updateTime:Ve};return de.updateTeamMembers([kt,At]).then(function(){return de.putTeam(ie).then(function(){var ze,Et;return de.logger.info(y(ze=y(Et="db::transferTeam: ".concat(ie.teamId," ")).call(Et,ae," -> ")).call(ze,Fe)),[ie,ae,Fe]})})},L.leaveTeam=function(ie){var ae=this;return ae.updateTeam({teamId:ie,validToCurrentUser:!1}).then(function(){return ae.removeAllTeamMembers(ie)})},L.dismissTeam=function(ie,ae){var Fe=this,de={teamId:ie,valid:!1,validToCurrentUser:!1,updateTime:ae};return Fe.updateTeam(de).then(function(){return Fe.removeAllTeamMembers(ie)})},L.leaveTeams=function(ie,ae){var Fe,de=this,Ie=[];return g(ie).call(ie,function(Ve){Fe=de.leaveTeam(Ve.teamId,ae),Ie.push(Fe)}),n.all(Ie)},L.getTeamsByTeamIds=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ie){ae=Fe.getTeam(Ie),de.push(ae)}),n.all(de)},L.getTeam=function(ie){ie=""+ie;var ae=this;return ae.getOne("team",null,ie).then(function(Fe){return Fe?(ae.updateTeamProperties([Fe]),Fe):null})},L.getTeams=function(){var ie,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe={};ae.teamIds!==void 0&&(Fe=i(ie=ae.teamIds).call(ie,function(Ie,Ve){return Ie[Ve]=!0,Ie},{}));var de=function(Ie){return!!oe(Ie)&&!(ae.teamIds!==void 0&&!Fe[Ie.teamId])};return this.getAll("team",{filter:de})},L.updateTeamProperties=function(ie){g(ie).call(ie,function(ae){ae&&z.fillProperties(ae)})},L.mergeTeamMembers=function(ie,ae,Fe,de){var Ie=this,Ve=Ie.putTeamMembers(ae),kt=Ie.updateTeamMembers(Fe);return n.all([Ve,kt]).then(function(){return Ie.logger.log("db::mergeTeamMembers: ".concat(ie)),Ie.updateTeamMemberTimetag(ie,de)})},L.putTeamMembers=function(ie){return this.put("teamMember",ie)},L.getTeamMembersByAccount=function(ie){return this.getOnly("teamMember","account",ie,{filter:le,mapper:ue}).then()},L.getTeamMembers=function(){var ie,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe={};ae.accountIds!==void 0&&(Fe=i(ie=ae.accountIds).call(ie,function(kt,At){return kt[At]=!0,kt},{}));var de,Ie={};ae.teamIds!==void 0&&(Ie=i(de=ae.teamIds).call(de,function(kt,At){return kt[At]=!0,kt},{}));var Ve=function(kt){return!!kt.valid&&!(ae.teamIds!==void 0&&!Ie[kt.teamId])&&!(ae.accountIds!==void 0&&!Fe[kt.account])};return this.getAll("teamMember",{filter:Ve})},L.getTeamMembersByTeamId=function(ie){return this.getOnly("teamMember","teamId",ie,{filter:le,mapper:ue})},L.getTeamMembersById=function(ie){return this.getOnly("teamMember",null,ie,{filter:le,mapper:ue})},L.updateTeamMemberProperties=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ie){re.fillProperties(Ie)&&(ae=Fe.updateTeamMember(Ie),de.push(ae))}),n.all(de)},L.getInvalidTeamMembers=function(ie,ae){var Fe=this;ie=""+ie;var de,Ie=[];return g(ae).call(ae,function(Ve){de=Fe.getOne("teamMember",null,re.genId(ie,Ve)).then(function(kt){return ue(kt)}),Ie.push(de)}),n.all(Ie)},L.updateTeamMember=function(ie){var ae=this,Fe=ie.teamId,de=ie.account,Ie=re.genId(Fe,de),Ve=$.filterObj(ie,"nickInTeam muteTeam mute custom updateTime type valid followAccountIds muteNotiType");return this.getOne("teamMember",null,Ie,{modifyObj:Ve,mapper:ue}).then(function(kt){var At,ze;return kt?ae.logger.log(y(At="db::updateTeamMember: ".concat(Fe," ")).call(At,de),$.pickAsString(Ve,["nickInTeam","muteTeam","mute","custom","updateTime","type","valid","followAccountIds","muteNotiType"])):ae.logger.warn(y(ze="db::updateTeam: no record ".concat(Fe," ")).call(ze,de)),kt})},L.updateTeamMembers=function(ie){var ae=this;if(!ie.length)return n.resolve();var Fe,de=[];return g(ie).call(ie,function(Ie){Fe=ae.updateTeamMember(Ie),de.push(Fe)}),n.all(de)},L.updateTeamManagers=function(ie,ae,Fe,de){var Ie=k(ae).call(ae,function(Ve){return{teamId:ie,account:Ve,type:Fe?"manager":"normal",updateTime:de}});return this.updateTeamMembers(Ie)},L.removeTeamMembersByAccounts=function(ie,ae){var Fe=k(ae).call(ae,function(de){return{teamId:ie,account:de,valid:!1}});return this.updateTeamMembers(Fe)},L.removeAllTeamMembers=function(ie){var ae=this;return ae.getOnly("teamMember","teamId",ie,{modifyObj:{valid:!1}}).then(function(){return ae.logger.warn("db::removeAllTeamMembers: ".concat(ie)),ae.deleteTeamMemberTimetag(ie)})},L.deleteTeamMembers=function(ie){var ae=this;return ae.getOnly("teamMember","teamId",ie,{remove:!0}).then(function(){ae.logger.warn("db::deleteTeamMembers: ".concat(ie)),ae.deleteTeamMemberTimetag(ie)})},L.deleteTeam=function(ie){var ae,Fe=this,de=[];return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(Ie){Ie=""+Ie,ae=Fe.get("team",Ie).then(function(Ve){if(Ve&&oe(Ve))throw V.stillInTeamError({callFunc:"team::deleteTeam",team:Ve});var kt=Fe.remove("team",Ie),At=Fe.deleteTeamMembers(Ie);return n.all([kt,At])}),de.push(ae)}),de.length===1?de[0]:n.all(de)}},function(t,r,e){var n=e(3),g=e(2),y=e(10),i=e(4),k=e(11),L=e(79).fn,$=e(0),V=e(35),z=e(312),re=e(206);function oe(ie){return ie.valid&&ie.validToCurrentUser}function le(ie){return ie&&ie.valid}function ue(ie){return ie&&$.fillUndef(ie,{mute:!1,custom:""}),ie}L.mergeSuperTeams=function(ie,ae,Fe){var de=this,Ie=de.put("superTeam",ie),Ve=de.leaveTeams(ae,Fe);return n.all([Ie,Ve]).then(function(){return de.logger.log("db::mergeSuperTeams:"),de.updateSuperTeamTimetag(Fe),[ie,ae,Fe]})},L.putSuperTeam=function(ie){if(ie)return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(ae){ae.validToCurrentUser=!0}),this.put("superTeam",ie)},L.updateSuperTeam=function(ie){var ae=this,Fe=(ie=$.copy(ie)).teamId;return ae.getOne("superTeam",null,Fe,{modifyObj:ie}).then(function(de){return de?(ae.logger.info("db::updateSuperTeam: ".concat(Fe)),de):(ae.logger.warn("db::updateSuperTeam: no record ".concat(Fe)),ae.putSuperTeam(ie))})},L.leaveSuperTeam=function(ie){var ae=this;return ae.updateSuperTeam({teamId:ie,validToCurrentUser:!1}).then(function(){return ae.removeAllSuperTeamMembers(ie)})},L.dismissSuperTeam=function(ie,ae){var Fe=this,de={teamId:ie,valid:!1,validToCurrentUser:!1,updateTime:ae};return Fe.updateSuperTeam(de).then(function(){return Fe.removeAllSuperTeamMembers(ie)})},L.leaveSuperTeams=function(ie,ae){var Fe,de=this,Ie=[];return g(ie).call(ie,function(Ve){Fe=de.leaveSuperTeam(Ve.teamId,ae),Ie.push(Fe)}),n.all(Ie)},L.getSuperTeamsByTeamIds=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ie){ae=Fe.getSuperTeam(Ie),de.push(ae)}),n.all(de)},L.getSuperTeam=function(ie){ie=""+ie;var ae=this;return ae.getOne("superTeam",null,ie).then(function(Fe){return Fe?(ae.updateSuperTeamProperties([Fe]),Fe):null})},L.getSuperTeams=function(){var ie=this;return ie.getAll("superTeam",{filter:oe}).then(function(ae){return ie.updateSuperTeamProperties(ae),ae})},L.updateSuperTeamProperties=function(ie){g(ie).call(ie,function(ae){ae&&z.fillProperties(ae)})},L.mergeSuperTeamMembers=function(ie,ae,Fe,de){var Ie=this,Ve=Ie.putSuperTeamMembers(ae),kt=Ie.updateSuperTeamMembers(Fe);return n.all([Ve,kt]).then(function(){return Ie.logger.log("db::mergeSuperTeamMembers: ".concat(ie)),de!=null?Ie.updateSuperTeamMemberTimetag(ie,de):n.resolve()})},L.getSuperTeamMembersByTeamId=function(ie){return this.getOnly("superTeamMember","teamId",ie,{filter:le,mapper:ue}).then()},L.getSuperTeamMembersById=function(ie){return this.getOnly("superTeamMember",null,ie,{filter:le,mapper:ue}).then()},L.putSuperTeamMembers=function(ie){return this.put("superTeamMember",ie)},L.getSuperTeamMemberById=function(ie){return this.get("superTeamMember",ie)},L.getSuperTeamMembers=function(ie,ae){var Fe=this;ie=""+ie;var de={filter:function(Ie){return Ie.valid},mapper:ue};if(ae){if(typeof ae.joinTime!="number")return void Fe.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ",ae.joinTime);ae.limit&&(de.limit=ae.limit),y(ae)?de.filter=function(Ie){return Ie.valid&&Ie.joinTime<=ae.joinTime}:de.filter=function(Ie){return Ie.valid&&Ie.joinTime>=ae.joinTime}}return Fe.getOnly("superTeamMember","teamId",ie,de).then(function(Ie){return Fe.updateSuperTeamMemberProperties(Ie).then(function(){return Ie})})},L.getSuperTeamMembersByAccount=function(ie){return this.getOnly("superTeamMember","account",ie,{filter:le,mapper:ue}).then()},L.updateSuperTeamMemberProperties=function(ie){var ae,Fe=this,de=[];return g(ie).call(ie,function(Ie){re.fillProperties(Ie)&&(ae=Fe.updateSuperTeamMember(Ie),de.push(ae))}),n.all(de)},L.getInvalidSuperTeamMembers=function(ie,ae){var Fe=this;ie=""+ie;var de,Ie=[];return g(ae).call(ae,function(Ve){de=Fe.getOne("superTeamMember","id",re.genId(ie,Ve)).then(function(kt){return ue(kt)}),Ie.push(de)}),n.all(Ie)},L.updateSuperTeamMember=function(ie){var ae=this,Fe=ie.teamId,de=ie.account,Ie=re.genId(Fe,de),Ve=$.filterObj(ie,"nickInTeam muteTeam mute custom updateTime type valid followAccountIds muteNotiType");return this.getOne("superTeamMember","id",Ie,{modifyObj:Ve,mapper:ue}).then(function(kt){var At,ze;return kt?ae.logger.log(i(At="db::updateSuperTeamMember: ".concat(Fe," ")).call(At,de),$.pickAsString(Ve,["nickInTeam","muteTeam","mute","custom","updateTime","type","valid","followAccountIds","muteNotiType"])):ae.logger.warn(i(ze="db::updateSuperTeam: no record ".concat(Fe," ")).call(ze,de)),kt})},L.updateSuperTeamMembers=function(ie){var ae=this;if(!ie.length)return n.resolve();var Fe,de=[];return g(ie).call(ie,function(Ie){Fe=ae.updateSuperTeamMember(Ie),de.push(Fe)}),n.all(de)},L.removeSuperTeamMembersByAccounts=function(ie,ae){var Fe=k(ae).call(ae,function(de){return{teamId:ie,account:de,valid:!1}});return this.updateSuperTeamMembers(Fe)},L.removeAllSuperTeamMembers=function(ie){var ae=this;return ae.getOnly("superTeamMember","teamId",ie,{modifyObj:{valid:!1}}).then(function(){return ae.logger.warn("db::removeAllSuperTeamMembers: ".concat(ie)),ae.deleteSuperTeamMemberTimetag(ie)})},L.deleteSuperTeamMembers=function(ie){var ae=this;return ae.getOnly("superTeamMember","teamId",ie,{remove:!0}).then(function(){ae.logger.warn("db::deleteSuperTeamMembers: ".concat(ie)),ae.deleteSuperTeamMemberTimetag(ie)})},L.deleteSuperTeam=function(ie){var ae,Fe=this,de=[];return $.isArray(ie)||(ie=[ie]),g(ie).call(ie,function(Ie){Ie=""+Ie,ae=Fe.get("superTeam",Ie).then(function(Ve){if(Ve&&oe(Ve))throw V.stillInTeamError({callFunc:"team::deleteTeam",team:Ve});var kt=Fe.remove("superTeam",Ie),At=Fe.deleteSuperTeamMembers(Ie);return n.all([kt,At])}),de.push(ae)}),de.length===1?de[0]:n.all(de)},L.transferSuperTeam=function(ie,ae,Fe){var de=this;return de.updateSuperTeamMembers([ae,Fe]).then(function(){return de.putSuperTeam(ie).then(function(){var Ie,Ve;return de.logger.info(i(Ie=i(Ve="db::transferSuperTeam: ".concat(ie.teamId," ")).call(Ve,ae.account," -> ")).call(Ie,Fe.account)),[ie,ae,Fe]})})}},function(t,r,e){var n=e(2),g=e(3),y=e(125),i=e(79).fn,k=e(0);i.mergeMyInfo=function(L,$){var V=this;return V.put("user",L).then(function(){return $?V.updateMyInfoTimetag(L.updateTime):L})},i.mergeFriendUsers=function(L,$){var V=this;return V.putUsers(L).then(function(){V.updateFriendUserTimetag($)})},i.putUsers=function(L){return this.put("user",L)},i.putUser=function(L){return this.put("user",L)},i.updateUser=function(L){var $=this,V=(L=k.copy(L)).account;return this.getOne("user",null,V,{modifyObj:L}).then(function(z){return z?$.logger.log("db::updateUser: ".concat(V)):$.logger.warn("db::updateUser: no record ".concat(V)),z})},i.putUsersIfIsFriend=function(L){var $,V=this,z=[],re=[];return n(L).call(L,function(oe){$=V.getFriend(oe.account).then(function(le){return le&&($=V.putUser(oe),re.push($)),le}),z.push($)}),g.all(z).then(function(){return g.all(re).then(function(oe){return oe})})},i.deleteUser=function(L){return this.remove("user",L)},i.getUser=function(L){return this.getOne("user",null,L)},i.getUsers=function(){var L,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={};$.accountIds!==void 0&&(V=y(L=$.accountIds).call(L,function(re,oe){return re[oe]=!0,re},{}));var z=function(re){return!($.accountIds!==void 0&&!V[re.account])};return this.getAll("user",{filter:z})},i.getAllUsers=function(){return this.getAll("user")}},function(t,r,e){var n=e(15),g=e(3),y=e(4),i=e(2),k=e(34),L=e(28),$=e(8),V=e(11),z=e(79).fn,re=e(0),oe=e(12);z.putMsg=function(le){var ue=this;return re.isArray(le)||(le=[le]),!le.length||n(le[0])?g.resolve():(le=n(le).call(le,function(ie){return!ie.ignore}),ue.put("msg1",le).catch(function(ie){return ue.notifyError&&ue.notifyError(ie),g.resolve(le,ie)}))},z.putMsgReadDetail=function(le){var ue=this;if(le.idClient)return this.put("msgReadDetail",le).catch(function(ie){ue.logger.error("putMsgReadDetail error",ie)})},z.getMsgReadDetail=function(le){return this.getOne("msgReadDetail",null,le)},z.updateMsg=function(le){var ue=this;if(!n(le)){var ie=le.idClient,ae=re.filterObj(le,"resend status idServer time localCustom commentTimetag comments hasSendAck callbackExt");return ue.getOne("msg1",null,ie,{modifyObj:ae}).then(function(Fe){var de,Ie,Ve;return Fe?ue.logger.info(y(de=y(Ie=y(Ve="db::updateMsg: ".concat(ie,"，idServer: ")).call(Ve,ae.idServer,"，status: ")).call(Ie,ae.status,"，time: ")).call(de,ae.time)):ue.logger.warn("db::updateMsg: no record ".concat(ie)),Fe}).catch(function(Fe){return ue.notifyError&&ue.notifyError(Fe),g.resolve(le)})}},z.updateMsgBatch=function(le){var ue=this;if(oe.isRN)this.logger.warn("react native can not support updateMsgBatch");else{this.checkDB();var ie=this.server.getIndexedDB().transaction(["msg1"],"readwrite").objectStore("msg1");i(le).call(le,function(ae){if(ae.idClient){var Fe=ie.get(ae.idClient);Fe.onerror=function(de){ue.logger.error("updateMsgBatch::store.get:error",de)},Fe.onsuccess=function(){var de=Fe.result||ae;ie.put(k({},de,ae)).onerror=function(Ie){ue.logger.error("updateMsgBatch::store.put:error",Ie)}}}})}},z.getMsgs=function(le){return oe.isBrowser?this.getMsgsIndexedDB(le):oe.isRN?this.getMsgsRN(le):g.resolve()},z.getMsgsRN=function(le){var ue={};return typeof le.start=="number"&&(ue.lowerBound=["time",le.start]),typeof le.end=="number"&&le.end!==1/0&&(ue.upperBound=["time",le.end]),ue.desc=!1,ue.index="time",typeof le.desc=="boolean"&&(ue.desc=le.desc),typeof le.limit=="number"&&(ue.limit=le.limit),ue.searchIndex=[],le.sessionId&&ue.searchIndex.push(["sessionId",le.sessionId]),typeof le.type=="string"&&ue.searchIndex.push(["type",le.type]),this.getAll("msg1",ue)},z.getMsgsIndexedDB=function(le){var ue,ie=this;ie.checkDB();var ae="time",Fe=!1,de=!1,Ie=(le=le||{}).sessionId||[],Ve=le.sessionIds||[];re.isString(Ie)?Ie=[Ie]:L(Ie)||(Ie=[]),re.isString(Ve)?Ve=[Ve]:L(Ve)||(Ve=[]);var kt=y(Ie).call(Ie,Ve);kt.length===1?(Fe=!0,ae="sessionTime",Ie=kt[0]):kt.length>1&&(Fe=!0,de=!0,Ve=kt);var At=le.start||0,ze=le.end||1/0,Et=At,cr=ze;Fe&&!de&&(Et=[Ie,At],cr=[Ie,ze]);var er=le.desc!==!1,or=le.limit||100,dr=!1,lr=!1,nr=le.type||[],ur=le.types||[];re.isString(nr)?nr=[nr]:L(nr)||(nr=[]),re.isString(ur)?ur=[ur]:L(ur)||(ur=[]);var ar=y(nr).call(nr,ur);ar.length===1?(dr=!0,nr=ar[0]):ar.length>1&&(dr=!0,lr=!0,ur=ar);var gr,pr=le.subTypes&&le.subTypes.length,hr=le.keyword||"",Cr=le.filterFunc;return(de||dr||hr||pr||re.isFunction(Cr))&&(gr=function(wr){var Sr;if(de&&$(Ve).call(Ve,wr.sessionId)===-1)return!1;if(dr){if(lr){if($(ur).call(ur,wr.type)===-1)return!1}else if(nr!==wr.type)return!1}if(pr&&$(Sr=le.subTypes).call(Sr,wr.subType)===-1)return!1;if(hr){var mr=wr.text||wr.tip||"";if($(mr).call(mr,hr)===-1)return!1}return!Cr||Cr(wr)}),n(ue=ie.server.query("msg1",ae).bound(Et,cr,!0,!0).desc(er).limit(or)).call(ue,gr).execute().catch(function(wr){throw ie.reportError(wr,{operation_type:3,context:"tableName: ".concat("msg1",", index ").concat(ae,", getMsgsIndexedDB error")},le),wr})},z.getMsgCountAfterAck=function(le){return oe.isBrowser?this.getMsgCountAfterAckIndexedDB(le):oe.isRN?this.getMsgCountAfterAckRN(le):g.resolve()},z.getMsgCountAfterAckRN=function(le){var ue=this,ie=le=le||{},ae=ie.sessionId,Fe=ie.ack;return ue.checkDB(),ue.getAll("msg1",{searchIndex:["sessionId",ae],lowerBound:["time",Fe]}).then(function(de){var Ie=n(de).call(de,function(Ve){if(Ve.flow==="out"||Ve.isUnreadable===!1)return!1;if(Ve.type==="notification")try{return le.shouldCountNotifyUnread(Ve)}catch(kt){throw ue.logger.error("userOption:shouldCountNotifyUnread function error",kt),kt}return!0});return g.resolve(Ie.length)})},z.getMsgCountAfterAckIndexedDB=function(le){var ue=this,ie=(le=le||{}).sessionId;return ue.checkDB(),ue.server.query("msg1","sessionTime").bound([ie,le.ack],[ie,1/0],!0,!0).execute().then(function(ae){var Fe=n(ae).call(ae,function(de){if(de.flow==="out"||de.isUnreadable===!1)return!1;if(de.type==="notification")try{return le.shouldCountNotifyUnread(de)}catch(Ie){throw ue.logger.error("userOption:shouldCountNotifyUnread function error",Ie),Ie}return!0});return g.resolve(Fe.length)}).catch(function(ae){throw ue.reportError(ae,{operation_type:3,context:"tableName: ".concat("msg1",", IndexSessionTime ").concat("sessionTime",", getMsgCountAfterAckIndexedDB error")},le),ae})},z.amendMsg=function(le){return le?(re.notexist(le.text)&&(le.text=""),le):null},z.getMsgByIdClient=function(le){var ue=this;return ue.getOne("msg1",null,le).then(function(ie){return ue.amendMsg(ie)})},z.getMsgsByIdClients=function(le){var ue,ie=this,ae=[];return i(le).call(le,function(Fe){ue=ie.getMsgByIdClient(Fe),ae.push(ue)}),g.all(ae)},z.clearSendingMsgs=function(){var le=this;return le.getOnly("msg1","status","sending",{modifyObj:{status:"fail"}}).then(function(ue){le.logger.info("db::clearSendingMsgs: msgs send failed",ue&&V(ue).call(ue,function(ie){return ie.idClient}).join(","))})},z.deleteMsg=function(le){var ue,ie=this,ae=[];return re.isArray(le)||(le=[le]),i(le).call(le,function(Fe){ue=ie.getOne("msg1",null,Fe,{remove:!0}).then(function(de){return ie.logger.info("db::deleteMsg done",Fe,de&&de.idClient),de}).catch(function(de){throw ie.logger.error("db::deleteMsg failed",Fe,de),de}),ae.push(ue)}),ae.length===1?ae[0]:g.all(ae)},z.deleteMsgsBySessionId=function(le){var ue=this,ie=null,ae=le.start,Fe=le.end;return ae!==void 0&&Fe!==void 0?ie=function(de){return de>ae&&de<Fe}:ae!==void 0?ie=function(de){return de>ae}:Fe!==void 0&&(ie=function(de){return de<Fe}),ie?ue.getOnly("msg1","sessionId",le.sessionId).then(function(de){var Ie=[];return V(de=de||[]).call(de,function(Ve){ie(Ve.time)&&Ie.push(Ve.idClient)}),ue.logger.info("db::deleteMsgsBySessionId: session results",Ie),ue.deleteMsg(Ie)}):ue.getOnly("msg1","sessionId",le.sessionId,{remove:!0})},z.deleteMsgsByTime=function(le){return this.remove("msg1",null,"time",le.start,le.end,!0,!0)},z.getDeletedMsgsCountByTime=function(le){this.checkDB();var ue=this.server.getIndexedDB().transaction(["msg1"],"readonly").objectStore("msg1").index("time"),ie=IDBKeyRange.bound(le.start,le.end,!0,!0),ae=ue.count(ie);return new g(function(Fe,de){ae.onsuccess=function(Ie){Fe(Ie.target.result)},ae.onerror=function(Ie){this.logger.error("countDeletedMsgsByTime::index.count:error",Ie),de(Ie)}})},z.deleteAllMsgs=function(){var le=this.clearTable("msg1"),ue=this.clearTable("session");return g.all([le,ue])},z.getMsgPins=function(le){return this.getOnly("msgPin","sessionId",le)},z.deleteMsgPins=function(le){return this.getOnly("msgPin","sessionId",le,{remove:!0})},z.putMsgPin=function(le){var ue=this;return this.modifyOrPut({table:"msgPin",obj:le,key:"idClient"}).catch(function(ie){ue.notifyError&&ue.notifyError(ie)})},z.putMsgPins=function(le){return this.put("msgPin",le)},z.deleteMsgPin=function(le){var ue=this;return this.getOne("msgPin",null,le.idClient,{remove:!0}).then(function(ie){return ue.logger.info("db::deleteMsgPin:",ie.idClient),ie})}},function(t,r,e){var n=e(3),g=e(15),y=e(2),i=e(10),k=e(5),L=e(79).fn,$=e(0),V=$.notundef;L.putSysMsg=function(z){var re=this;return new n(function(oe){if($.isArray(z)||(z=[z]),!g(z[0])){var le=[],ue=z.length;y(z).call(z,function(ae){ae=$.copy(ae),re.put("sysMsg",ae).then(function(Fe){le.push(Fe[0]),ie()},ie)})}function ie(){--ue===0&&oe(le)}})},L.getSysMsgs=function(z){var re=!i(z=z||{}),oe=z.limit||100,le=null,ue=null;z.category&&(le="category",ue=z.category),z.type&&(le="type",ue=z.type);var ie,ae=z.lastIdServer,Fe=!1,de=z.read;return(V(ae)||V(de))&&(ie=function(Ie){return V(ae)?(ae=""+ae,Fe?Ve():(Ie.idServer===ae&&(Fe=!0),!1)):Ve();function Ve(){return!V(de)||Ie.read===de}}),z={filter:ie,desc:re,limit:oe},le?this.getOnly("sysMsg",le,ue,z):this.getAll("sysMsg",z)},L.getSysMsgByIdServer=function(z){return this.getOne("sysMsg","idServer",z)},L.updateSysMsg=function(z){var re=this;if(!g(z)){var oe=""+z.idServer,le=$.filterObj(z,"read state error localCustom");return this.getOne("sysMsg","idServer",oe,{modifyObj:le}).then(function(ue){return ue?re.logger.log("db::updateSysMsg: ".concat(oe),$.pickAsString(le,["read","state","error"])):re.logger.warn("db::updateSession: ".concat(oe)),ue})}},L.markSysMsgRead=function(z){var re=this;return new n(function(oe,le){$.isArray(z)||(z=[z]);var ue,ie,ae=[],Fe=[];y(z).call(z,function(de){ue=re.getSysMsgByIdServer(de.idServer).then(function(Ie){Ie&&!Ie.read&&(ie=re.updateSysMsg({idServer:Ie.idServer,read:!0}),Fe.push(ie))},le),ae.push(ue)}),n.all(ae).then(function(){n.all(Fe).then(function(de){oe(de)},le)},le)})},L.deleteSysMsg=function(z){var re,oe=this,le=[];return $.isArray(z)||(z=[z]),y(z).call(z,function(ue){ue=""+ue,re=oe.getOne("sysMsg","idServer",ue,{remove:!0}),le.push(re)}),le.length===1?le[0]:n.all(le)},L.deleteAllSysMsgs=function(){var z=this.clearTable("sysMsg"),re=this.clearTable("sysMsgUnread");return n.all([z,re])},L.getSysMsgUnread=function(){return this.getAll("sysMsgUnread").then(function(z){var re={};return y(z).call(z,function(oe){re[oe.type]=oe.num}),re})},L.updateSysMsgUnread=function(z){var re,oe=this;z=$.copy(z);var le=[];return y(re=k(z)).call(re,function(ue){le.push({type:ue,num:z[ue]})}),this.put("sysMsgUnread",le).then(function(){return oe.logger.info("db::updateSysMsgUnread: ",z),z})}},function(t,r,e){var n=e(3),g=e(2),y=e(79).fn,i=e(0);y.putBroadcastMsg=function(k){var L=this;return new n(function($){i.isArray(k)||(k=[k]);var V=[],z=k.length;function re(){--z===0&&$(V)}g(k).call(k,function(oe){oe=i.copy(oe),L.put("broadcastMsg",oe).then(function(le){V.push(le[0]),re()},re)})})},y.getBroadcastMsgs=function(k){return k=k||{},this.getAll("broadcastMsg",k)}},function(t,r,e){var n=e(3),g=e(10),y=e(4),i=e(28),k=e(2),L=e(79).fn,$=e(0),V=$.notundef;L.putSession=function(z){var re=this,oe=z.unread;return(z=$.merge({},z)).updateTime===void 0&&z.lastMsg&&z.lastMsg.time&&(z.updateTime=z.lastMsg.time),(z.lastMsg||!z.ack&&!z.msgReceiptTime)&&(z.isDeleted=!1),delete z.unread,this.modifyOrPut({table:"session",obj:z,key:"id",modifyObjWhenPut:{unread:0}}).catch(function(le){return re.notifyError&&re.notifyError(le),z.unread=oe,n.resolve(z)})},L.getAllSessions=function(){return this.getAll("session",{index:"updateTime",desc:!0}).catch(function(z){self.notifyError&&self.notifyError(z)})},L.getSessions=function(z){var re=!g(z=z||{}),oe=z.limit||100,le=z.lastSessionId,ue=z.sessionId,ie=!1,ae=this,Fe=function(){return!0},de=function(){return!0};return V(ue)?this.getSession(ue,z.isDeleted):(V(le)&&(Fe=function(Ie){return Ie.id===le&&(ie=!0),ie}),z.includeDeleted||(de=function(Ie){return!Ie.isDeleted}),this.getAll("session",{index:"updateTime",desc:re,limit:oe,filter:function(Ie){return Fe(Ie)&&de(Ie)}}).catch(function(Ie){ae.notifyError&&ae.notifyError(Ie)}))},L.getSession=function(z,re){var oe=this;return this.get("session",z).then(function(le){return n.resolve(!re&&le&&le.isDeleted?void 0:le)}).catch(function(le){throw oe.notifyError&&oe.notifyError(le),le})},L.updateSession=function(z){var re=this,oe=z.id,le=$.filterObj(z,"ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");return z.lastMsg&&(le.lastMsg=z.lastMsg),this.getOne("session",null,oe,{modifyObj:le}).then(function(ue){if(ue){var ie,ae=y(ie="db::updateSession: ".concat(oe," ")).call(ie,$.pickAsString(le,["ack","unread","msgReceiptTime","msgReceiptServerTime","isTop","isDeleted"]));ae+=le.lastMsg?" lastMsg.idClient:".concat($.get(le,"lastMsg.idClient")):"",re.logger.info(ae)}else re.logger.warn("db::updateSession: no record ".concat(oe));return ue}).catch(function(ue){re.notifyError&&re.notifyError(ue)})},L.getStickTopSessions=function(){var z=this;return this.getAll("session",{filter:function(re){return re&&re.isTop}}).catch(function(re){z.notifyError&&z.notifyError(re)})},L.deleteSession=function(z,re){var oe=re&&re.scene||"";return oe==="superTeam"?this.updateSuperTeamSessionAck(0):(oe==="p2p"||oe==="team"||this.updateSuperTeamSessionAck(0),this.updateSessionAck(0)),this.updateMsgReceiptsTimetag(0),this.remove("session",z)},L.deleteSessionLogic=function(z){var re=this;if(!i(z))return this.getOne("session",null,z,{modifyObj:{isDeleted:!0}});var oe=[];return k(z).call(z,function(le){oe.push(re.getOne("session",null,le,{modifyObj:{isDeleted:!0}}))}),n.all(oe)},L.putSessionsWithMoreRoaming=function(z){return this.put("sessionsWithMoreRoaming",z)},L.updateSessionsWithMoreRoaming=function(z){var re=z.id;return delete z.id,this.getOne("sessionsWithMoreRoaming",null,re,{modifyObj:z})},L.deleteSessionsWithMoreRoaming=function(z){return this.remove("sessionsWithMoreRoaming",z)},L.getSessionsWithMoreRoaming=function(z){return z?this.get("sessionsWithMoreRoaming",z):this.getAll("sessionsWithMoreRoaming")}},function(t,r,e){var n=e(4),g=e(44),y=e(45),i=e(0).throttle,k=function(){function L($){g(this,L),this.arr=[],this.timer=null,this.maxLength=$.maxLength||100,this.throttleTime=$.throttleTime||5e3,this.processFn=$.processFn||function(){},this.throttleFn=$.processFn||function(){},$.processFn&&(this.throttleFn=i(function(V){$.processFn(V),V.length=0},this.throttleTime,{leading:!1}))}return y(L,[{key:"add",value:function($){var V;Object.prototype.toString.call($)==="[object Array]"?this.arr=n(V=this.arr).call(V,$):this.arr.push($),this.arr.length>=this.maxLength&&(this.processFn(this.arr),this.arr=[]),this.timer=this.throttleFn(this.arr)}},{key:"destroy",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer),this.processFn=function(){},this.throttleFn=function(){}}},{key:"clear",value:function(){this.arr=[],this.timer&&clearTimeout(this.timer)}}]),L}();t.exports=k},function(t,r,e){var n=e(51),g=e(34),y=e(56),i=e(2),k=e(15),L=e(5),$=e(52),V=e(53),z=e(54),re=e(55),oe=e(42),le=e(44),ue=e(45);function ie(Fe,de){var Ie=L(Fe);if($){var Ve=$(Fe);de&&(Ve=k(Ve).call(Ve,function(kt){return V(Fe,kt).enumerable})),Ie.push.apply(Ie,Ve)}return Ie}var ae={user_id:"",trace_id:"",duration:0,start_time:0,history:[]};t.exports=function(){function Fe(de){le(this,Fe),this.clientProto=de,this.reset()}return ue(Fe,[{key:"reset",value:function(){this.traceData=g({},ae),this.traceData.history=[]}},{key:"start",value:function(){this.reset(),this.traceData.start_time=y()}},{key:"updateBegin",value:function(de){this.traceData.history.push(function(Ie){for(var Ve=1;Ve<arguments.length;Ve++){var kt,At,ze=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?i(kt=ie(Object(ze),!0)).call(kt,function(Et){n(Ie,Et,ze[Et])}):z?re(Ie,z(ze)):i(At=ie(Object(ze))).call(At,function(Et){oe(Ie,Et,V(ze,Et))})}return Ie}({head:"",body:"",start_time:y(),httpdns:!1,index:0},de))}},{key:"updateComplete",value:function(de){var Ie;i(Ie=this.traceData.history).call(Ie,function(Ve){Ve.target===de.target&&(g(Ve,de),Ve.duration=y()-Ve.start_time)})}},{key:"end",value:function(de){var Ie;if(this.traceData.succeed=de,this.traceData.history=k(Ie=this.traceData.history).call(Ie,function(kt){return kt.code!==void 0}),this.traceData.history.length!==0){this.traceData.duration=y()-this.traceData.start_time;var Ve=this.clientProto.checkNetworkAvailable();this.traceData.net_type=0,this.traceData.net_connect=Ve,this.clientProto.reporter.report("nim_sdk_lbs_records",this.traceData),this.reset()}else this.reset()}}]),Fe}()},function(t,r,e){var n=e(24),g=e(51),y=e(56),i=e(6),k=e(321),L=e(4),$=e(3),V=e(22),z=e(15),re=e(8),oe=e(9),le=e(23),ue=e(2),ie=e(128),ae=e(5),Fe=e(52),de=e(53),Ie=e(54),Ve=e(55),kt=e(42);function At(ar,gr){var pr=ae(ar);if(Fe){var hr=Fe(ar);gr&&(hr=z(hr).call(hr,function(Cr){return de(ar,Cr).enumerable})),pr.push.apply(pr,hr)}return pr}function ze(ar){for(var gr=1;gr<arguments.length;gr++){var pr,hr,Cr=arguments[gr]!=null?arguments[gr]:{};gr%2?ue(pr=At(Object(Cr),!0)).call(pr,function(wr){g(ar,wr,Cr[wr])}):Ie?Ve(ar,Ie(Cr)):ue(hr=At(Object(Cr))).call(hr,function(wr){kt(ar,wr,de(Cr,wr))})}return ar}var Et=e(37).fn,cr=e(0),er=e(12),or=e(165).V2NIMConnectStatus;function dr(ar,gr){var pr,hr,Cr,wr,Sr=this,mr=er.getDefaultLinkUrl(Sr.options.secure);Sr.socketUrls=[mr],Sr.reporterHookLBS.updateComplete({target:gr,code:200,body:ar}),Sr.reporterHookLBS.end(!0),Sr.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:gr,code:200,net_connect:Sr.checkNetworkAvailable(),succeed:!0}),Sr.msgStatEnable=!!ar.common["msg.stat.enable"],Sr.msgStatEnable&&(Sr.msgDelayTimer=V(le(hr=Sr.doReportMsgDelay).call(hr,Sr),1e4)),ar.common&&ar.common.link&&ue(Cr=ar.common.link).call(Cr,function(Er){Sr.socketUrls.unshift(er.formatSocketUrl({url:Er,secure:Sr.options.secure}))}),ar.common&&ar.common["link.default"]&&ue(wr=ar.common["link.default"]).call(wr,function(Er){var sr,xr;Er=er.formatSocketUrl({url:Er,secure:Sr.options.secure}),re(sr=Sr.socketUrls).call(sr,Er)===-1&&(Sr.socketUrls=L(xr=Sr.socketUrls).call(xr,Er))}),Sr.socketUrls=z(pr=Sr.socketUrls).call(pr,function(Er,sr,xr){return re(xr).call(xr,Er)===sr});try{er.uploadUrl=ar.nosup[0]}catch{}if(er.chunkUploadUrl=ar["nos-chunk"]||er.chunkUploadUrl||"",Sr.logger.info("link::refreshSocketUrl: ".concat(gr," ajax load , got socket urls "),Sr.socketUrls),er.hasLocalStorage){ar.common["lbs.backup"]&&Sr.options.lbsBackup&&localStorage.setItem("nim_lbs_backup",i(ar.common["lbs.backup"]));var _r=cr.get(ar,"common.report.apierror.on");ar.common.report&&localStorage.setItem("nim_lbs_fail_report_on",_r===!1?"0":"1")}if(ar.common.socketConcurrent){var Ar=ar.common.socketConcurrent;typeof Ar=="number"&&Ar>=1&&Ar<=3&&(Sr.options.socketConcurrent=Ar,Sr.imsocket.setConfig({socketConcurrent:Ar}))}}function lr(ar,gr){if(this.statusProtector.getConnectStatus()===or.V2NIM_CONNECT_STATUS_DISCONNECTED)return $.reject(new Error("already disconnected"));if(ar>=gr){this.logger.warn("doRequestBackupLbsUrls backup lbs all tried");var pr=er.getDefaultLinkUrl(this.options.secure);return this.logger.warn("doRequestBackupLbsUrls: use default socket link",pr),this.socketUrls=[pr],this.reporterHookLBS.end(!1),$.resolve()}return this.logger.warn("doRequestBackupLbsUrls: wait for next lbs request"),$.reject(new Error("lbs request failed"))}function nr(ar,gr){var pr=gr.status||10001,hr=typeof gr=="string"?gr:gr&&gr.message?gr.message:"Unknown error";this.reporterHookLBS.updateComplete({target:ar,code:gr.status||gr.code||0,body:gr&&gr.message||""}),this.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:ar,code:pr,description:hr,net_connect:this.checkNetworkAvailable(),succeed:!1})}function ur(ar){var gr=this;if(!(ar&&ar.length>0))throw new Error("No  lbs url to try");var pr=0,hr=0,Cr=!1,wr=null;gr.logger.log("doRequestBackupLbsUrls: use lbs url in index ",pr,ar),gr.reporterHookLBS.start();var Sr=function(mr){var _r=ar[mr],Ar=new Date().getTime();return gr.reporterHookLBS.updateBegin({target:_r,index:mr}),gr.promiseAbortManager.add(gr.doRequestLbs(_r)).then(function(Er){if(wr&&clearInterval(wr),Cr===!1)return dr.call(gr,Er,_r),Cr=!0,$.resolve()}).catch(function(Er){return hr+=1,gr.logger.warn("doRequestBackupLbsUrls: ".concat(_r," ajax lbs error"),Er),nr.call(gr,_r,Er,Ar),lr.call(gr,hr,ar.length)})};return new $(function(mr,_r){wr=ie(function(){if(!(pr>=ar.length))return gr.statusProtector.getConnectStatus()===or.V2NIM_CONNECT_STATUS_DISCONNECTED?(wr&&clearInterval(wr),void _r(new Error("already disconnected"))):void Sr(pr++).then(function(){wr&&clearInterval(wr),mr()}).catch(function(){});wr&&clearInterval(wr)},2e3),Sr(pr++).then(function(){wr&&clearInterval(wr),mr()}).catch(function(){})})}Et.connect=function(){er.isBrowser&&this.reporter.restore(),this.createConnectTime=y(),this.reporter.reportTraceCancel("login"),this.autoconnect?this.reporter.reportTraceStart("login",{user_id:this.options.account,action:"auto_login",binary_websocket:this.useBinaryWebSocket()}):this.reporter.reportTraceStart("login",{user_id:this.options.account,action:"manual_login",process_id:this.processId,binary_websocket:this.useBinaryWebSocket()}),this.reporter.reportTraceUpdateV2("login",{code:0,description:i(ze(ze({},this.options),{},{account:"***",token:"***"}),function(ar,gr){return ar===""||typeof gr!="function"&&n(gr)!=="object"?gr:void 0}),operation_type:"conf_init",net_connect:this.checkNetworkAvailable(),succeed:!0,target:""}),k(Et).connect.call(this)},Et.onConnect=function(){this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:this.url,code:200,net_connect:this.checkNetworkAvailable(),succeed:!0}),k(Et).onConnect.call(this)},Et.onHandshakeFailed=function(ar,gr){var pr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:gr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_handshake_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(L(pr="link::onHandshakeFailed: shandshake failed, startTime: ".concat(ar,", targetUrl: ")).call(pr,gr))},Et.onConnectFailed=function(ar,gr,pr){var hr,Cr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:pr,code:408,succeed:!1,net_connect:this.checkNetworkAvailable(),description:"ws_connect_failed"}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(L(hr=L(Cr="link::onConnectFailed: connect failed due to ".concat(ar,", startTime: ")).call(Cr,gr,", targetUrl: ")).call(hr,pr))},Et.onSocketError=function(ar,gr,pr){var hr,Cr;this.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:pr,description:"ws_onerror:"+ar,code:0,net_connect:this.checkNetworkAvailable(),succeed:!1}),this.reporter.reportTraceEnd("login",!1),this.logger.warn(L(hr=L(Cr="link::onSocketError: due to ".concat(ar,", startTime: ")).call(Cr,gr,", targetUrl: ")).call(hr,pr))},Et.probeIp=function(){var ar=this,gr=er.ipProbeAddr;return new $(function(pr){var hr=0,Cr=-1;function wr(){++hr===2&&(hr=-1,pr(Cr))}ar.adaptersRequest(gr.ipv4,{timeout:2e3,onerror:wr,onload:function(Sr){Cr++,wr()}}),ar.adaptersRequest(gr.ipv6,{timeout:2e3,onerror:wr,onload:function(Sr){Cr+=2,wr()}}),V(function(){hr||Cr===-1||(hr=-1,pr(Cr))},100)})},Et.refreshSocketUrl=function(){var ar=this;return this.statusProtector.processEvent("auth/loginLifeCycleAddressing"),er.isWeixinApp?this.doRefreshSocketUrl(2):this.options.ipVersion===2?this.probeIp().then(function(gr){return ar.doRefreshSocketUrl(gr)}):this.doRefreshSocketUrl(this.options.ipVersion)},Et.doRefreshSocketUrl=function(ar){var gr,pr,hr=this.options.lbsUrl||er.lbsUrl;ar!==1&&ar!==2&&(ar=0),er.ipVersion=ar;var Cr=this.options.lbsBackupUrlsCustomer||[],wr=[];this.options.lbsBackup&&er.hasLocalStorage&&(wr=(wr=localStorage.getItem("nim_lbs_backup"))?JSON.parse(wr):[]);var Sr=L(gr=L(pr=[hr]).call(pr,wr)).call(gr,Cr);return Sr=z(Sr).call(Sr,function(mr,_r,Ar){return re(Ar).call(Ar,mr)===_r}),ur.call(this,Sr)},Et.doRequestLbs=function(ar){var gr=this,pr=this.options,hr=er.info;ar=ar+cr.genUrlSep(ar)+"id="+pr.account+"&sv="+hr.sdkVersion+"&pv="+hr.protocolVersion+"&networkType="+er.ipVersion+"&hostEnv="+er.hostEnv+"&k="+pr.appKey,this.logger.info("doRequestLbs ".concat(oe(ar).call(ar,0,-32)));var Cr=this;return new $(function(wr,Sr){er.isWeixinApp?wx.request({url:ar,success:function(mr){var _r=mr&&mr.statusCode,Ar=mr&&mr.data;_r===200?wr(Ar):Sr(Ar)},fail:function(mr){Sr(mr)}}):gr.adaptersRequest(ar,{proxyUrl:cr.url2origin(ar)+"/lbs/res/cors/nej_proxy_frame.html",timeout:er.xhrTimeout,onload:function(mr){try{var _r=JSON.parse(mr);wr(_r)}catch(Ar){Cr.logger.warn("doRequestLbs parse JSON Error. request lbs failed"),Sr(Ar)}},onerror:function(mr){Sr(mr)}},{exception_service:1})})},Et.disconnect=function(){var ar=this,gr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void V(function(){k(Et).disconnect.call(ar,gr)},0);this.connecting?this.logger.warn("IMProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==or.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("IMProtocolFn api disconnect:: has tried to disconnect"):this.logger.warn("IMProtocolFn api disconnect:: other logic entered");var pr=k(Et);pr.disconnect.call(this,gr)},Et.notifyDisconnect=function(ar){k(Et).notifyDisconnect.call(this,ar)}},function(t,r,e){var n=e(60),g=e(51),y=e(61),i=e(3),k=e(6),L=e(22),$=e(23),V=e(8),z=e(2),re=e(15),oe=e(5),le=e(52),ue=e(53),ie=e(54),ae=e(55),Fe=e(42);function de(lr,nr){var ur=oe(lr);if(le){var ar=le(lr);nr&&(ar=re(ar).call(ar,function(gr){return ue(lr,gr).enumerable})),ur.push.apply(ur,ar)}return ur}function Ie(lr){for(var nr=1;nr<arguments.length;nr++){var ur,ar,gr=arguments[nr]!=null?arguments[nr]:{};nr%2?z(ur=de(Object(gr),!0)).call(ur,function(pr){g(lr,pr,gr[pr])}):ie?ae(lr,ie(gr)):z(ar=de(Object(gr))).call(ar,function(pr){Fe(lr,pr,ue(gr,pr))})}return lr}var Ve=e(37).fn,kt=e(199),At=e(12),ze="NIM-AllGrayscaleConfig",Et="NIM-AllMixStorePolicy",cr=e(0);function er(){var lr=this;if(At.hasLocalStorage&&localStorage.getItem(ze)){var nr=null;try{nr=JSON.parse(localStorage.getItem(ze))[lr.options.appKey]}catch(ur){lr.logger.error("appGrayConfig error",ur)}nr&&(lr.appGrayConfig=nr.timeStamp+1e3*nr.ttl>new Date().getTime()?nr:null,lr.appGrayConfig&&or.apply(lr))}lr.appGrayConfig||lr.sendCmd("getGrayscaleConfig",{providers:""},function(ur,ar){if(ur)lr.logger.error("Calculate Delay time, getGrayscaleConfig error",ur);else if(ar){var gr=ar;if(gr.grayConfig=JSON.parse(gr.grayConfig),gr.ttl=Number(gr.ttl),gr.timeStamp=new Date().getTime(),lr.appGrayConfig=gr,At.hasLocalStorage){var pr=localStorage.getItem(ze)?JSON.parse(localStorage.getItem(ze)):{};pr[lr.options.appKey]=gr,localStorage.setItem(ze,k(pr))}or.apply(lr)}else lr.logger.error("Calculate Delay time, getGrayscaleConfig error",ar)})}function or(){var lr=this;if(At.hasLocalStorage&&localStorage.getItem(Et)){var nr=null;try{nr=JSON.parse(localStorage.getItem(Et))[lr.options.appKey]}catch(ur){lr.logger.error("mixStorePolicy error",ur)}nr&&(lr.mixStorePolicy=nr.timeStamp+1e3*nr.ttl>new Date().getTime()?nr:null,lr.mixStorePolicy&&nr.ttl&&nr.ttl!==0&&(lr.mixStorePolicyClock=L($(or).call(or,lr),1e3*nr.ttl)))}lr.mixStorePolicy||lr.sendCmd("getMixStorePolicy",{providers:lr.options.providers&&lr.options.providers.s3?[1,2]:[1]},function(ur,ar){if(ur){lr.logger.error("Calculate Delay time, getMixStorePolicy error",ur);try{ar=JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[lr.options.appKey]}catch(hr){lr.logger.error("error:","get last mixStorePolicy failed",hr)}}else if(ar){var gr=ar;if(gr.ttl=Number(gr.ttl),gr.providers=gr.providers.split(","),gr.nosPolicy=gr.nosPolicy?JSON.parse(gr.nosPolicy):null,gr.s3Policy=gr.s3Policy?JSON.parse(gr.s3Policy):null,gr.timeStamp=new Date().getTime(),lr.mixStorePolicy=gr,gr.ttl&&gr.ttl!==0&&(lr.mixStorePolicyClock=L($(or).call(or,lr),1e3*gr.ttl)),At.hasLocalStorage){var pr=localStorage.getItem(Et)?JSON.parse(localStorage.getItem(Et)):{};pr[lr.options.appKey]=gr,localStorage.setItem(Et,k(pr))}}else lr.logger.error("Calculate Delay time, mixStorePolicy error",ar)})}function dr(lr){var nr=this,ur=this;lr.code===399?(this.logger.warn("pendingLoginFailed:399, refresh LBS url and reconnecting"),ur.forceDisconnect(),ur.doRefreshSocketUrl(At.ipVersion).then(function(){ur.reconnect()}).catch(function(){nr.logger.warn("pendingLoginFailed:399, refresh LBS url failed")})):lr.code===398?(this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),ur.backoff.setMin(5e3),ur.reconnect()):(this.logger.error("pendingLoginFailed: ",lr.code,lr),ur.onAuthError(lr,"link::onLogin"))}Ve.assembleLogin=function(){var lr=this.assembleIMLogin();return this.addPushInfo instanceof Function?this.addPushInfo(lr):i.resolve({login:lr})},Ve.login=y(n.mark(function lr(){var nr,ur,ar,gr=this;return n.wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return nr=this,pr.next=3,nr.assembleLogin();case 3:if(ur=pr.sent,!nr.socket||nr.socket.binaryType!=="arraybuffer"){pr.next=8;break}this.logger.log("link::doLogin: appLogin is "+ur.login.appLogin),pr.next=19;break;case 8:if(!(ar=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){pr.next=17;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[ar]){pr.next=14;break}return this.logger.warn("onConnect::repeat login",ar),pr.abrupt("return");case 14:this.socketIds[ar]=!0,pr.next=18;break;case 17:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 18:this.logger.warn("link::doLogin: "+ar+" appLogin is "+ur.login.appLogin);case 19:nr.sendCmd("login",Ie({},ur),function(hr,Cr){if(hr){var wr=cr.get(hr,"event.uploadCode")||hr&&hr.code;wr=typeof wr!="number"?408:wr;var Sr=cr.get(hr,"event.disconnectReason"),mr=Sr?k({disconnect_reason:Sr}):hr&&hr.message||"login failed";nr.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:wr,description:mr,net_connect:nr.checkNetworkAvailable(),succeed:!1}),nr.reporter.reportTraceEnd("login",!1),dr.call(nr,hr),nr.statusProtector.processEvent("auth/loginLifeCycleLoginFail",hr)}else nr.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",succeed:!0,net_connect:nr.checkNetworkAvailable(),code:200}),nr.reporter.reportTraceEnd("login",!0),nr.resetReconnectStatus(),gr.heartbeatFail=0,gr.hasLogin=!0,gr.autoconnect=!0,nr.startHeartbeat(),nr.initOnlineListener(),nr.statusProtector.processEvent("auth/loginLifeCycleLoginSucc"),nr.afterLogin(Cr)});case 20:case"end":return pr.stop()}},lr,this)})),Ve.afterLogin=function(lr){var nr=this,ur=this;ur.socket.setSessionId&&ur.socket.setSessionId(lr.connectionId),ur.sendCmd("getNosCdnHost",{}),(typeof cr.get(ur.options,"privateConf.isMixStoreEnable")=="boolean"?ur.options.privateConf.isMixStoreEnable:At.privateConf.isMixStoreEnable)&&er.apply(this),this.initPush instanceof Function&&this.initPush();var ar=this.db;if(ar.enable){var gr=this.account;this.options.appendAppKeyForDBName&&(gr+="-"+this.options.appKey),this.db.init(gr).then(function(){nr.notifyLogin(lr),nr.syncData()},function(pr){ar.reset(!1);var hr=cr.get(pr,"event.target.error");nr.logger.warn("link::afterLogin: no db",hr||pr),ur.options&&ur.options.onerror&&ur.options.onerror(hr||pr),nr.notifyLogin(lr),nr.syncData()})}else this.logger.info("link::afterLogin: no db"),this.notifyLogin(lr),this.syncData()},Ve.getFileAuthToken=function(lr){var nr=this,ur=nr.mixStorePolicy.nosPolicy.authPolicy.policyType;ur!==-1?V(ur).call(ur,lr.type)<0?nr.logger.error("this type Token error not support"):lr.type!=3||lr.urls&&lr.urls.length?nr.sendCmd("getBackSourceToken",{mixAuthTokenReq:lr},function(ar,gr){if(ar)return nr.logger.error("getBackSourceToken error",ar),ar;lr.done&&lr.done(gr)}):nr.logger.error("urls is Required when type 3"):nr.logger.error("don't need token")},Ve.processAuth=function(lr){switch(lr.cmd){case"login":lr.error||(lr.content=lr.content||{},this.loginAndroidPush&&this.loginAndroidPush(lr.content.aosPushInfo||{}),lr.obj=lr.content.loginRes,this.connectionId=lr.content.loginRes.connectionId,this.onLoginPortsChange(lr,2));break;case"kicked":return void this.onKicked(lr);case"multiPortLogin":this.onLoginPortsChange(lr,lr.content.state);break;case"kick":lr.error||(lr.obj.deviceIds=lr.content.deviceIds)}},Ve.onLoginPortsChange=function(lr,nr){var ur=this,ar=lr.content.loginPorts;if(ar&&ar.length){var gr=!0;switch(nr){case 2:gr=!0;break;case 3:gr=!1}z(ar).call(ar,function(pr){pr.type=kt.reverseType(pr.type),pr.customClientType&&(pr.customClientType=+pr.customClientType),pr.time=+pr.time,pr.online=gr}),(ar=re(ar).call(ar,function(pr){return pr.connectionId!==ur.connectionId})).length&&(ur.logger.info("link::onLoginPortsChange:",ar),ur.options.onloginportschange(ar))}},Ve.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],Ve.kickedMessages=["","不允许同一个帐号在多个地方同时登录","被服务器踢了","被其它端踢了","悄悄被踢"]},function(t,r,e){var n=e(60),g=e(61),y=e(816),i=e(3),k=e(23),L=e(4),$=e(781),V=e(34),z=e(2),re=e(5),oe=e(143),le=e(8),ue=e(63),ie=e(15),ae=e(11),Fe=e(824),de=e(782),Ie=e(22),Ve=e(28),kt=e(93),At=e(37).fn,ze=e(0),Et=e(35),cr=ze.undef,er=ze.objs2ids,or=ze.objs2accounts,dr=ze.teams2ids,lr=e(162),nr=ze.getGlobal(),ur=e(109).EMSyncType;At.beforeSync=function(){var ar=this.db;return ar.enable?ar.clearSendingMsgs():i.resolve()},At.syncData=function(){var ar=this,gr=ar.db,pr=ar.options,hr=gr.enable;function Cr(wr){var Sr;ar.syncPromiseArray=[],ar.syncResult={},ar.syncTeamMembersPromiseArray=[],ar.syncSuperTeamMembersPromiseArray=[],ar.syncTeamMembersResult={},ar.checkNosReqNum=0,ar.getNosOriginUrlReqNum=0,ze.verifyBooleanWithDefault(pr,"syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncExtraSuperTeamInfo syncAvSignal",!0,"","sync::syncData"),ze.verifyBooleanWithDefault(pr,"syncFilter syncTeamMembers syncSuperTeamMembers",!1,"","sync::syncData");var mr={};wr=wr||{},nr._nimForceSyncIM&&(ar.logger.warn("sync::syncData: nimForceSyncIM"),delete wr.teams,nr._nimForceSyncIM=!1),mr.myInfo=wr.myInfo||0,mr.deleteMsgSelf=wr.deleteMsgSelf||0,mr.offlineMsgs=0,pr.syncRelations&&(mr.relations=wr.relations||0),pr.syncFriends&&(mr.friends=wr.friends||0),pr.syncFriendUsers&&(mr.friendUsers=wr.friendUsers||0),pr.syncRobots&&(mr.robots=wr.robots||0),pr.syncTeams&&(mr.teams=wr.teams||0),pr.syncSuperTeams&&(mr.superTeams=wr.superTeams||0),pr.syncStickTopSessions&&(mr.stickTopSessions=wr.stickTopSessions||0),pr.syncSessionUnread&&(mr.sessionAck=hr&&wr.sessionAck||0,mr.superTeamSessionAck=hr&&wr.superTeamSessionAck||0),pr.syncRoamingMsgs&&(mr.roamingMsgs=hr&&wr.roamingMsgs||wr.roamingMsgs||0),pr.syncSuperTeamRoamingMsgs&&(mr.superTeamRoamingMsgs=hr&&wr.superTeamRoamingMsgs||0),pr.syncMsgReceipts&&(mr.msgReceipts=wr.msgReceipts||0),pr.syncExtraTeamInfo&&(mr.myTeamMembers=wr.myTeamMembers||0),pr.syncExtraSuperTeamInfo&&(mr.myInfoInSuperTeams=wr.myInfoInSuperTeams||0),pr.syncBroadcastMsgs&&(mr.broadcastMsgs=wr.broadcastMsg||0),mr.donnop=wr.donnop||0,mr.deleteMsg=wr.deleteMsg||0,mr.deleteSuperTeamMsg=wr.deleteSuperTeamMsg||0,mr.sessionHistoryMsgsDelete=wr.sessionHistoryMsgsDelete||0,mr.netcallMsgs=0,pr.syncFilter&&(mr.filterMsgs=0),pr.syncAvSignal&&(mr.avSignal=0);var _r=k(Sr=ar.onSyncData).call(Sr,ar);_r.isImSyncDataCb=!0,ar.logger.info("syncData:: start sync",mr),ar.reporterHook.emit("reporter/syncStart"),ar.sendCmd("sync",{sync:mr,isImSyncDataObj:!0},_r)}ar.syncing=!0,ar.logger.log("sync::syncData: syncing = true"),hr?ar.beforeSync().then(function(){return ar.db.getTimetags()}).then(function(wr){Cr(wr)},function(){Cr()}):Cr(ar.timetags)},At.onSyncData=function(ar){ar&&(ar.callFunc="sync::onSyncData",this.onCustomError("SYNC_DATA_ERROR",ar))},At.processSync=function(ar){switch(this.logger.log("sync::processSync cmd: ".concat(ar.cmd)),ar.cmd){case"syncDone":if(ar.error){var gr,pr=ze.get(ar.error,"message"),hr=ze.get(ar.error,"code");this.logger.error(L(gr="sync::processSync syncDoneError errMsg: ".concat(pr,", errCode: ")).call(gr,hr)),this.logger.error("sync::processSync disconnect because syncDone failed");var Cr=Et.syncError({errMsg:pr,errCode:hr});this.shouldReconnect=!1,this.markAllCallbackInvalid(Cr),this.notifyDisconnect(Cr)}else this.timetags.sync=ar.content.timetag,this.reporterHook.emit("reporter/syncRecv"),this.onSyncDone();break;case"syncTeamMembersDone":this.onSyncTeamMembersDone();break;case"syncSuperTeamMembersDone":this.onSyncSuperTeamMembersDone()}},At.onSyncDone=function(){var ar,gr,pr,hr,Cr,wr,Sr,mr,_r,Ar,Er,sr,xr,Nr,Mr,br,yr,Tr,Br,Lr,Fr,qr,Vr,Qr,Tn,xn,Xr,Vn,Zr,Nn,Jr=this,wn=Jr.db,Un=wn.enable,_n=Jr.options,Pn=Jr.syncPromiseArray,Cn=Jr.syncResult;function vn(){if(Pn){Jr.logger.info("sync::onSyncDone: after sync",ze.promises2cmds(Pn)),Pn=[],gr=Cn.blacklist||[],pr=Cn.invalidBlacklist||[],hr=Cn.mutelist||[],Cr=Cn.invalidMutelist||[],wr=Cn.friends,_r=Cn.myTeamMembers,Ar=Cn.mySuperTeamMembers,Sr=Cn.invalidFriends||[],mr=Cn.myInfo,Er=Cn.users,xr=Cn.superTeams,Mr=Cn.invalidSuperTeams,sr=Cn.teams,Nr=Cn.invalidTeams||[],br=Cn.sessions||{},yr=$(V({},Jr.sessionSet)),Tr=Cn.ackMap,Cn.msgReceipts,Br=Cn.roamingMsgs,Lr=Cn.offlineMsgs,Fr=Cn.offlineFilterMsgs,Vr=Cn.offlineSysMsgs,Qr=Cn.offlineCustomSysMsgs,Tn=Cn.offlineFilterSysMsgs,xn=Cn.offlineFilterCustomSysMsgs,Xr=Cn.sysMsgUnread,Vn=Cn.sessionsWithMoreRoaming,Nn=Cn.clearServerHistoryMsgs||[];var Po=i.resolve();(function(){if(Un){var Qo,Ga=[no()];br&&z(Qo=re(br)).call(Qo,function(ao){Ga.push(wn.putSession(br[ao]))}),Po=i.all(Ga).then(function(){var ao,Sa=L(ao=[]).call(ao,y(re(Tr||{})),y(re(br||{})));Sa=ie(Sa).call(Sa,function(La,Ya,ea){return le(ea).call(ea,La)===Ya});var pa=[];return z(Sa).call(Sa,function(La){var Ya,ea=br[La];(ea.lastMsg||ea.ack)&&(Ya=(Ya=ea.ack?i.resolve(ea):wn.getSession(ea.id)).then(function(wo){var Fa=wo.ack||0;return wn.getMsgCountAfterAck({shouldCountNotifyUnread:Jr.options.shouldCountNotifyUnread,sessionId:La,ack:Fa}).then(function($a){return wo.unread=$a||0,br[La]=Jr.mergeSession(wo),wn.updateSession(wo)})}),pa.push(Ya))}),i.all(pa)}).then(function(){var ao=[];return Jr.saveAck.p2pTeam&&ao.push(wn.updateSessionAck(Jr.saveAck.p2pTeam).catch(function(Sa){return Jr.logger.error("sessionAck::syncSessionAck::updatetimetag db",Sa),i.reject(Sa)})),Jr.saveAck.superTeam&&ao.push(wn.updateSuperTeamSessionAck(Jr.saveAck.superTeam).catch(function(Sa){return Jr.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db",Sa),i.reject(Sa)})),i.all(ao)})}else if(br){var ws,So,Ps;z(ws=[Br,Lr]).call(ws,function(ao){ao&&z(ao).call(ao,function(Sa){var pa;(So=br[Sa.sessionId]).unread=So.unread||0,So.unreadMsgs=So.unreadMsgs||[],Ps=So.ack||0,z(pa=Sa.msgs).call(pa,function(La){if(!(Ps>=La.time))if(La.type==="notification"){var Ya;try{Ya=Jr.options.shouldCountNotifyUnread(La)}catch(ea){throw Jr.logger.error("userOption:shouldCountNotifyUnread function error",ea),ea}Ya&&So.unread++}else La.flow==="in"&&La.isUnreadable!==!1&&(So.unread++,So.unreadMsgs.push(La))}),Jr.mergeSession(So)})})}})(),Jr.syncDonePromiseArray=Jr.syncDonePromiseArray||[],Po.then(function(){if(Un&&!Jr.hasSynced)(function(){_n.syncRelations&&(ar=wn.getRelations().then(function(ao){gr=ao[0],hr=ao[1],gr.invalid=pr,hr.invalid=Cr}).catch(function(ao){return ao._msg="on relations error",Jr.logger.error("sync::syncRelation: ",ao),i.reject(ao)}),Pn.push(ar)),_n.syncFriends&&(ar=wn.getFriends().then(function(ao){(wr=ao).invalid=Sr}).catch(function(ao){return ao._msg="on friends error",Jr.logger.error("sync::syncFriends: ",ao),i.reject(ao)}),Pn.push(ar)),cr(mr)&&(ar=wn.getUser(Jr.account).then(function(ao){mr=ao}).catch(function(ao){return ao._msg="on myInfo error",Jr.logger.error("sync::syncMyInfo: ",ao),i.reject(ao)}),Pn.push(ar)),_n.syncFriendUsers&&(ar=wn.getFriends().then(function(ao){return ae(ao).call(ao,function(Sa){return Sa.account})}).then(function(ao){return wn.getUsers({accountIds:ao})}).then(function(ao){Er=ao}).catch(function(ao){return ao._msg="on users error",Jr.logger.error("sync::syncFriendUser: ",ao),i.reject(ao)}),Pn.push(ar)),_n.syncTeams&&(ar=wn.getTeams().then(function(ao){(sr=ao).invalid=Nr}).catch(function(ao){return ao._msg="on teams error",Jr.logger.error("sync::syncTeams: ",ao),i.reject(ao)}),Pn.push(ar)),_n.syncSuperTeams&&(ar=wn.getSuperTeams().then(function(ao){(xr=ao).invalid=Mr}).catch(function(ao){return ao._msg="on superteams error",Jr.logger.error("sync::syncSuperTeams: ",ao),i.reject(ao)}),Pn.push(ar)),ar=wn.getTeamMembersByAccount(Jr.account).then(function(ao){_r=ao,Jr.mergeMyTeamMembers(ao)}).catch(function(ao){return Jr.logger.error("sync::getTeamMembersByAccount: ",ao),i.reject(ao)}),Pn.push(ar),ar=wn.getSuperTeamMembersByAccount(Jr.account).then(function(ao){Ar=ao,Jr.mergeMySuperTeamMembers(ao)}).catch(function(ao){return Jr.logger.error("sync::getSuperTeamMembersByAccount: ",ao),i.reject(ao)}),Pn.push(ar),ar=wn.getDonnop().then(function(ao){Jr.mergeDonnop(ao)}).catch(function(ao){return Jr.logger.error("sync::donnop: ",ao),i.reject(ao)}),Pn.push(ar),ar=wn.getAllSessions().then(function(ao){br=ao}).catch(function(ao){return Jr.logger.error("sync::getSession: ",ao),i.reject(ao)}),Pn.push(ar),ar=wn.getSysMsgUnread().then(function(ao){Xr=ao}).catch(function(ao){return ao._msg="on sysMsgUnread error",Jr.logger.error("sync::getSysMsgUnread: ",ao),i.reject(ao)}),Pn.push(ar),Pn.push(wn.getSessionsWithMoreRoaming().then(function(ao){Vn=ao}))})();else{var Qo,Ga,ws=[];z(Qo=re(br)).call(Qo,function(ao){(Ga=br[ao]).lastMsg&&ws.push(Ga)}),br=oe(ws).call(ws,function(ao,Sa){return Sa.updateTime-ao.updateTime})}Jr.hasSynced=!0;var So=i.all(Pn);function Ps(ao){var Sa;ao||(Jr.syncDonePromiseSuccessCount+=1);var pa,La=le(Sa=Jr.syncDonePromiseArray).call(Sa,So);La>-1&&ue(pa=Jr.syncDonePromiseArray).call(pa,La,1),Jr.logger.log("afterSync::syncDonePromiseHandler syncPromiseArray length: ",Jr.syncDonePromiseArray.length,"success count: ",Jr.syncDonePromiseSuccessCount),Jr.syncDonePromiseArray.length===0&&Jr.syncDonePromiseSuccessCount>0?(Jr.logger.log("onSyncDone afterSync last syncDonePromsie. Execute taskAfterSync and notifyData"),function(){Jr.logger.info("sync::onSyncDone: taskAfterSync"),function(){if(Cn.deleteMsgSysMsgs){var ea,wo={};Br&&z(Br).call(Br,function(Zn){wo[Zn.sessionId]=Zn});var Fa={};Lr&&z(Lr).call(Lr,function(Zn){Fa[Zn.sessionId]=Zn});var $a=Jr.api;if(z(ea=Cn.deleteMsgSysMsgs).call(ea,function(Zn){var zo;z(zo=Zn.sysMsgs).call(zo,function(Ra){var ys=Ra.msg,Ds=ys.sessionId;Zn.type==="roaming"&&wo[Ds]?wo[Ds].msgs=$a.cutMsgs(wo[Ds].msgs,ys):Fa[Ds]&&(Fa[Ds].msgs=$a.cutMsgs(Fa[Ds].msgs,ys))})}),!wn.enable){var Dc,As=L(Dc=[]).call(Dc,y(Br||[]),y(Lr||[]));z(As).call(As,function(Zn){if(Zn.msgs.length){var zo=Jr.genSessionByMsgs(Zn.msgs);Jr.cacheSyncedSession(zo),br.unshift(zo)}else{var Ra=de(br).call(br,function(ys){return ys.id===Zn.sessionId});ue(br).call(br,Ra,1)}});var $n={};z(br).call(br,function(Zn){if($n[Zn.id]){var zo=Zn.lastMsg.time>$n[Zn.id].lastMsg.time?Zn.lastMsg:$n[Zn.id].lastMsg;$n[Zn.id]=Zn,$n[Zn.id].lastMsg=zo}else $n[Zn.id]=Zn}),br=$($n),br=oe(br).call(br,function(Zn,zo){return zo.updateTime-Zn.updateTime})}}}(),Zr=Jr.syncResult.stickTopSessions||[],z(Zr).call(Zr,function(ea){ea.isTop===void 0&&(ea.isTop=!0)}),z(br).call(br,function(ea){var wo=Jr.sessionSet[ea.id];wo&&wo.isTop&&(ea.isTop=!0);var Fa=Fe(Zr).call(Zr,function($a){return $a.id===ea.id});Fa&&(ea.isTop=Fa.isTop)});var Ya=[Jr.deleteMsgOfflineRoaming(Cn.deleteMsgSysMsgs,br)];return Nn&&z(Nn).call(Nn,function(ea){Ya.push(function(wo,Fa){var $a;Jr.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete ".concat(wo)),Fa=Fa||new Date().getTime();var Dc=ie(br).call(br,function(zo){return zo.id===wo}),As=Jr.getSessionInCache(wo);$a=As||Dc[0];var $n=_n.rollbackClearMsgsUnread!==!1,Zn=[];return wn.enable&&Zn.push(wn.deleteMsgsBySessionId({sessionId:wo,end:Fa})),$n&&$a&&($a.lastMsg=null,$a.unread=0,$a=Jr.mergeSession($a),wn.enable&&Zn.push(wn.updateSession($a))),i.all(Zn)}(ea.sessionId,ea.time))}),i.all(Ya)}().then(Ro,function(Ya){Jr.logger.error("taskAfterSync syncDBDataPromise error:",Ya),Ya.callFunc="sync::onSyncDone",Ya.message="taskAfterSync+notifyData 出错",Jr.onCustomError("SYNC_SESSION_ACK_ERROR",Ya)})):ao?(Jr.logger.error("onSyncDone afterSync syncDonePromise Error:",ao),ao.callFunc="sync::onSyncDone",ao.message="pullFullData 出错",Jr.onCustomError("SYNC_SESSION_ACK_ERROR",ao)):Jr.logger.log("onSyncDone afterSync syncDonePromise success, wait for next syncDonePromise")}Jr.syncDonePromiseArray.length===0&&(Jr.syncDonePromiseSuccessCount=0),Jr.syncDonePromiseArray.push(So),So.then(function(){return Ps()}).catch(function(ao){return Ps(ao)})})}else Jr.logger.warn("sync::onSyncDone: after sync --no promiseArray")}function no(){var Po=[];return Br&&z(Br).call(Br,function(Qo){var Ga;Po=L(Ga=[]).call(Ga,y(Po),y(Qo.msgs))}),Lr&&z(Lr).call(Lr,function(Qo){var Ga;Po=L(Ga=[]).call(Ga,y(Po),y(Qo.msgs))}),Po.length?wn.putMsg(Po).then(function(){return Po}):i.resolve(Po)}function Ro(){Ie(Ho,0)}function Ho(){var Po,Qo,Ga=[],ws=[];if(gr&&gr.length&&(Jr.logger.info("sync::notifyDataAsync: on blacklist",or(gr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType3_8),_n.onblacklist(gr)),hr&&hr.length&&(Jr.logger.info("sync::notifyDataAsync: on mutelist",or(hr)),_n.onmutelist(hr)),wr&&(Jr.logger.info("sync::notifyDataAsync: on friends",or(wr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType12_5),_n.onfriends(wr)),mr&&(Jr.logger.info("sync::notifyDataAsync: on myInfo"),Jr.myInfo=mr,Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType3_109),_n.onmyinfo(ze.copy(mr))),_r){Jr.logger.info("sync::notifyDataAsync: on myTeamMembers",_r),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType8_126);var So=ze.simpleClone(_r);Ve(So)||(So=[So]),_n.onMyTeamMembers(So)}if(Ar){Jr.logger.info("sync::notifyDataAsync: on mySuperTeamMembers",Ar),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType21_111);var Ps=ze.simpleClone(Ar);Ve(Ps)||(Ps=[Ps]),_n.onMySuperTeamMembers(Ps)}Er&&(z(Er).call(Er,function(wo){Jr.mergeUser(wo)}),Jr.logger.info("sync::notifyDataAsync: on users",or(Er)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType12_6),_n.onusers(Er)),sr&&(Jr.logger.info("sync::notifyDataAsync: on teams",dr(sr)),_n.onteams(sr),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType8_109)),xr&&(Jr.logger.info("sync::notifyDataAsync: onSuperTeams",dr(xr)),_n.onSuperTeams(xr),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType21_109)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_12),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_14),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_20),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_21),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType7_15),br&&br.length?(br=ae(br).call(br,function(wo){return Jr.mergeSession(wo),kt(lr).call(lr,wo)}),br=ie(br).call(br,function(wo){return!wo.isDeleted}),Jr.logger.info("sync::notifyDataAsync: on sessions",er(br),ze.secureOutput("session",br)),!Un&&Jr.timetags&&Jr.timetags.roamingMsgs?_n.onsessions(ie(yr).call(yr,function(wo){return lr.isComplete(wo)})):_n.onsessions(br)):!Un&&yr.length&&(Jr.logger.info("sync::notifyDataAsync: on sessions",er(br),ze.secureOutput("session",br)),_n.onsessions(ie(yr).call(yr,function(wo){return lr.isComplete(wo)}))),Zr&&Zr.length&&(Zr=ae(Zr).call(Zr,function(wo){var Fa=Jr.getSessionInCache(wo.id);return Fa?(Fa.isTop=wo.isTop,wo=Jr.mergeSession(Fa),kt(lr).call(lr,Fa)):(wo=Jr.mergeSession(wo),kt(lr).call(lr,wo))}),Jr.logger.info("sync::notifyDataAsync: onStickTopSessions",er(Zr),ze.secureOutput("session",Zr)),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_23),_n.onStickTopSessions(Zr)),Br&&z(Br).call(Br,function(wo){wo.scene==="superTeam"?ws.push(wo.timetag):Ga.push(wo.timetag),(Qo=wo.msgs).length&&(Jr.logger.info("sync::notifyDataAsync: on roaming msgs",wo.sessionId,Qo.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_9),_n.onroamingmsgs(wo))}),Lr&&(Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_4),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_17),z(Lr).call(Lr,function(wo){wo.scene==="superTeam"?ws.push(wo.timetag):Ga.push(wo.timetag),(Qo=wo.msgs).length&&(Jr.logger.info("sync::notifyDataAsync: on offline msgs",wo.sessionId,Qo.length,ae(Qo).call(Qo,function(Fa){return Fa.idServer})),_n.onofflinemsgs(wo))})),Fr&&(Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_100),z(Fr).call(Fr,function(wo){Ga.push(wo.timetag),(Qo=wo.msgs).length&&(Jr.logger.info("sync::notifyDataAsync: on offline filter msgs",wo.sessionId,Qo.length),_n.onofflinefiltermsgs(Qo))})),Vn&&(Jr.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming",er(Vn),Vn),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_22),_n.onSessionsWithMoreRoaming(Vn));var ao,Sa=[],pa=[];Cn.deleteMsgSysMsgs&&z(ao=Cn.deleteMsgSysMsgs).call(ao,function(wo){wo.type==="roaming"?Sa=L(Sa).call(Sa,wo.sysMsgs):pa=L(pa).call(pa,wo.sysMsgs)}),Sa.length&&(qr=L(qr=qr||[]).call(qr,Sa)),pa.length&&(Vr=L(Vr=Vr||[]).call(Vr,pa)),qr&&(Jr.logger.info("sync::notifyDataAsync: on roaming sys msgs",qr.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_19),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_15),_n.onroamingsysmsgs(qr)),Vr&&(Jr.logger.info("sync::notifyDataAsync: on offline sys msgs",Vr.length),_n.onofflinesysmsgs(Vr)),Tn&&(Jr.logger.info("sync::notifyDataAsync: on offline filter sys msgs",Tn.length),_n.onofflinefiltersysmsgs(Tn)),Qr&&(Jr.logger.info("sync::notifyDataAsync: on offline custom sys msgs",Qr.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_6),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_18),_n.onofflinecustomsysmsgs(Qr)),xn&&(Jr.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs",xn.length),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_101),_n.onofflinefiltercustomsysmsgs(xn)),Xr&&(Xr=ze.merge({},Jr.sysMsgUnread,Xr),Jr.sysMsgUnread=ze.merge({},Xr),Jr.logger.info("sync::notifyDataAsync: on sysMsgUnread",Xr),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_6),_n.onsysmsgunread(Xr));var La=Jr.getPushNotificationMultiportConfig();Jr.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig",La),Jr.reporterHook.emit("reporter/syncItemComplete",ur.kSyncType4_13),_n.onPushNotificationMultiportConfig(La);var Ya=ws.length&&Math.max.apply(Math,ws);if(Po=Ga.length&&Math.max.apply(Math,Ga),wn.enable){var ea=[];Ya&&ea.push(Jr.db.updateSuperTeamRoamingMsgTimetag(Ya)),Po&&ea.push(Jr.db.updateRoamingMsgTimetag(Po)),i.all(ea).then(Vo).catch(Vo)}else Jr.timetags.superTeamRoamingMsgs=Ya,Jr.timetags.roamingMsgs=Po||Jr.timetags.roamingMsgs,Vo();Jr.syncPromiseArray=[],Jr.syncResult={}}function Vo(){Jr.processUnsettledMsgs(),Jr.msgPromise.then(function(){Jr.canHandleDeletedMsgInSyncing=!0,Ie(function(){Jr.processUnsettledSysMsgs()},0)}),Jr.syncing&&_n.onsyncdone(),Jr.syncing=!1,Jr.logger.log("sync::onsyncdone: syncing = false"),Jr.reporterHook.emit("reporter/syncComplete"),wn.enable&&_n.syncTeamMembers&&Jr.syncTeamMembers(sr),wn.enable&&_n.syncSuperTeamMembers&&Jr.syncSuperTeamMembers(xr)}Pn&&Pn.length?i.all(Pn).then(vn).catch(function(Po){vn(),Jr.logger.error(Po),Po.callFunc="sync::onSyncDone",Po.message="afterSync syncNormalPromise 出错",Jr.onCustomError("SYNC_promiseArray_ERROR",Po)}):vn()},At.syncTeamMembers=function(){var ar=g(n.mark(function gr(pr){var hr,Cr,wr,Sr,mr,_r,Ar,Er;return n.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(Cr=(hr=this).db,wr={},!Cr.enable){sr.next=33;break}return sr.prev=4,sr.next=7,Cr.getTeamMemberTimetags();case 7:_r=sr.sent,sr.next=14;break;case 10:sr.prev=10,sr.t0=sr.catch(4),hr.logger.error("sync::syncTeamMembers: getTeamMemberTimetags error",sr.t0),_r={};case 14:if(Ve(pr)){sr.next=25;break}return sr.prev=15,sr.next=18,Cr.getTeams();case 18:pr=sr.sent,sr.next=25;break;case 21:sr.prev=21,sr.t1=sr.catch(15),hr.logger.error("sync::syncTeamMembers: getTeams error",sr.t1),pr=[];case 25:z(pr).call(pr,function(xr){wr[xr.teamId]=0}),Ar={},z(Sr=re(_r)).call(Sr,function(xr){var Nr=xr.split("-")[1];Ar[Nr]=_r[xr]}),re(Ar).length&&(wr=V(wr,Ar)),hr.logger.log("sync::syncTeamMembers: getTeamMemberTimetags",wr),(Er=k(mr=hr.onSyncTeamMembers).call(mr,hr)).isImSyncDataCb=!0,hr.sendCmd("syncTeamMembers",{sync:wr,isImSyncDataObj:!0},Er);case 33:case"end":return sr.stop()}},gr,this,[[4,10],[15,21]])}));return function(gr){return ar.apply(this,arguments)}}(),At.syncSuperTeamMembers=function(){var ar=g(n.mark(function gr(pr){var hr,Cr,wr,Sr,mr,_r,Ar,Er;return n.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(Cr=(hr=this).db,wr={},!Cr.enable){sr.next=33;break}return sr.prev=4,sr.next=7,Cr.getSuperTeamMemberTimetags();case 7:_r=sr.sent,sr.next=14;break;case 10:sr.prev=10,sr.t0=sr.catch(4),hr.logger.error("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags error",sr.t0),_r={};case 14:if(Ve(pr)){sr.next=25;break}return sr.prev=15,sr.next=18,Cr.getSuperTeams();case 18:pr=sr.sent,sr.next=25;break;case 21:sr.prev=21,sr.t1=sr.catch(15),hr.logger.error("sync::syncSuperTeamMembers: getSuperTeams error",sr.t1),pr=[];case 25:z(pr).call(pr,function(xr){wr[xr.teamId]=0}),Ar={},z(Sr=re(_r)).call(Sr,function(xr){var Nr=xr.split("-")[1];Ar[Nr]=_r[xr]}),re(Ar).length&&(wr=V(wr,Ar)),hr.logger.log("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags",wr),(Er=k(mr=hr.syncSuperTeamMembersCallBack).call(mr,hr)).isImSyncDataCb=!0,hr.sendCmd("syncSuperTeamMembers",{sync:wr,isImSyncDataObj:!0},Er);case 33:case"end":return sr.stop()}},gr,this,[[4,10],[15,21]])}));return function(gr){return ar.apply(this,arguments)}}(),At.onSyncTeamMembers=function(ar){ar&&(ar.callFunc="sync::onSyncTeamMembers",ar.message="同步群成员错误",this.onCustomError("SYNC_TEAM_MEMBERS_ERROR",ar))},At.syncSuperTeamMembersCallBack=function(ar){ar&&(ar.callFunc="sync::SyncSuperTeamMembersCallBack",ar.message="同步超级群成员错误",this.onCustomError("SYNC_SUPERTEAM_MEMBERS_ERROR",ar))},At.onSyncTeamMembersDone=function(){var ar=this,gr=ar.options,pr=ar.syncTeamMembersResult,hr=ar.syncTeamMembersPromiseArray;i.all(hr).then(function(){var Cr;hr=[];var wr={};z(Cr=re(pr)).call(Cr,function(Sr){var mr,_r,Ar,Er;le(Sr).call(Sr,"invalid")===-1&&(Sr in wr?(L(mr=wr[Sr].members).call(mr,pr[Sr]),L(_r=wr[Sr].invalid).call(_r,pr[Sr+"-invalid"])):wr[Sr]={members:L(Ar=[]).call(Ar,pr[Sr]||[]),invalid:L(Er=[]).call(Er,pr[Sr+"-invalid"]||[])})}),gr.onsyncteammembersdone(wr),ar.syncTeamMembersResult=[],ar.syncTeamMembersPromiseArray=[]})},At.onSyncSuperTeamMembersDone=function(){var ar=this,gr=ar.options,pr=ar.syncSuperTeamMembersResult,hr=ar.syncSuperTeamMembersPromiseArray;i.all(hr).then(function(){var Cr;hr=[];var wr={};z(Cr=re(pr)).call(Cr,function(Sr){var mr,_r,Ar,Er;le(Sr).call(Sr,"invalid")===-1&&(Sr in wr?(L(mr=wr[Sr].members).call(mr,pr[Sr]),L(_r=wr[Sr].invalid).call(_r,pr[Sr+"-invalid"])):wr[Sr]={members:L(Ar=[]).call(Ar,pr[Sr]||[]),invalid:L(Er=[]).call(Er,pr[Sr+"-invalid"]||[])})}),gr.onsyncsuperteammembersdone(wr),ar.syncSuperTeamMembersResult=[],ar.syncSuperTeamMembersPromiseArray=[]})}},function(t,r,e){var n=e(817),g=e(818),y=e(314),i=e(819);t.exports=function(k){return n(k)||g(k)||y(k)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(313),g=e(316);t.exports=function(y){if(n(y))return g(y)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(158),g=e(64),y=e(315);t.exports=function(i){if(n!==void 0&&g(i)!=null||i["@@iterator"]!=null)return y(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(821);t.exports=n},function(t,r,e){e(822);var n=e(14);t.exports=n.Object.values},function(t,r,e){var n=e(1),g=e(823).values;n({target:"Object",stat:!0},{values:function(y){return g(y)}})},function(t,r,e){var n=e(29),g=e(13),y=e(124),i=e(47),k=g(e(157).f),L=g([].push),$=function(V){return function(z){for(var re,oe=i(z),le=y(oe),ue=le.length,ie=0,ae=[];ue>ie;)re=le[ie++],n&&!k(oe,re)||L(ae,V?[re,oe[re]]:oe[re]);return ae}};t.exports={entries:$(!0),values:$(!1)}},function(t,r,e){t.exports=e(825)},function(t,r,e){var n=e(826);t.exports=n},function(t,r,e){var n=e(18),g=e(827),y=Array.prototype;t.exports=function(i){var k=i.find;return i===y||n(y,i)&&k===y.find?g:k}},function(t,r,e){e(828);var n=e(27);t.exports=n("Array").find},function(t,r,e){var n=e(1),g=e(69).find,y=e(163),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),n({target:"Array",proto:!0,forced:i},{find:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),y("find")},function(t,r,e){var n=e(830);t.exports=n},function(t,r,e){var n=e(18),g=e(831),y=Array.prototype;t.exports=function(i){var k=i.findIndex;return i===y||n(y,i)&&k===y.findIndex?g:k}},function(t,r,e){e(832);var n=e(27);t.exports=n("Array").findIndex},function(t,r,e){var n=e(1),g=e(69).findIndex,y=e(163),i=!0;"findIndex"in[]&&Array(1).findIndex(function(){i=!1}),n({target:"Array",proto:!0,forced:i},{findIndex:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}}),y("findIndex")},function(t,r,e){var n=e(11),g=e(10),y=e(3),i=e(2),k=e(37).fn,L=e(0),$=L.objs2accounts,V=e(834),z=e(208);k.processUser=function(re){var oe,le=this,ue=le.db,ie=re.obj,ae=re.error,Fe=re.content;switch(re.cmd){case"markInBlacklist":ae||le.markInBlacklist(ie);break;case"syncMarkInBlacklist":le.markInBlacklist(Fe,!0);break;case"markInMutelist":ae||le.markInMutelist(ie);break;case"syncMarkInMutelist":le.markInMutelist(Fe,!0);break;case"getRelations":ae||le.onRelations(re);break;case"syncMyInfo":le.onMyInfo(re,!0);break;case"updateMyInfo":ae||(ie.user.updateTime=Fe.timetag,le.onUpdateMyInfo(re,ie.user));break;case"syncUpdateMyInfo":le.onUpdateMyInfo(re,Fe.user,!0);break;case"getUsers":var de;ae||(oe=n(de=Fe.users).call(de,function(Ie){return Ie=g(z).call(z,Ie,le.mixStorePolicy&&le.mixStorePolicy.s3Policy?le.mixStorePolicy.s3Policy.dlcdns:[],le.mixStorePolicy&&le.mixStorePolicy.s3Policy?le.mixStorePolicy.s3Policy.dlcdn:""),le.mergeUser(Ie),Ie}),re.obj=oe,ue.enable&&ue.putUsers(oe));break;case"updateDonnop":le.onUpdateDonnop(re);break;case"syncUpdateDonnop":le.onDonnop(re,!1)}},k.onMyInfo=function(re){var oe,le=this,ue=le.db,ie=re.error,ae=re.content,Fe=new y(function(Ie,Ve){var kt,At;ie?(ie&&(ie.callFunc="user::onMyInfo"),Ie(ie),le.syncData()):(oe=g(z).call(z,ae.user),ue.enable?(kt=Ie,At=Ve,ue.mergeMyInfo(oe,!0).then(function(){de(),kt()}).then(void 0,function(ze){ze.message="db.mergeMyInfo error",ze.callFunc="user::onMyInfo",At(ze)})):(de(),Ie()))}).catch(function(Ie){return le.logger.error("user::onMyInfo: ",Ie),y.reject(Ie)});function de(){le.timetags.myInfo=oe.updateTime,le.syncResult.myInfo=oe}Fe.cmd="myInfo",le.syncPromiseArray.push(Fe)},k.onUpdateMyInfo=function(re,oe,le){var ue=this.db,ie=g(z).call(z,oe),ae=L.merge(this.myInfo,ie);this.myInfo=ae,le?(this.logger.info("user::onUpdateMyInfo:",ae&&ae.account),this.options.onupdatemyinfo(ae)):re.obj=ae,ue.enable&&(ie.account=this.account,ue.updateUser(ie))},k.onRelations=function(re){var oe,le=this,ue=le.db,ie=re.error,ae=le.packetFromSync(re),Fe=re.content.specialRelations,de=!0,Ie=[],Ve=[],kt=[],At=[],ze=new y(function(cr,er){var or,dr;ie?ae&&(cr(ie),le.syncData()):(i(Fe).call(Fe,function(lr){var nr={account:(lr=V.parse(lr)).account,createTime:lr.createTime,updateTime:lr.updateTime};lr.isBlacked?Ie.push(nr):Ve.push(nr),lr.isMuted?kt.push(nr):At.push(nr)}),le.logger.info("user::onRelations: parse blacklist",$(Ie),Ie,"delete",$(Ve),Ve),le.logger.info("user::onRelations: parse mutelist",$(kt),kt,"delete",$(At),At),Fe.length?(de=!0,oe=re.content.timetag):de=!1,ue.enable?(or=cr,dr=er,re.promise=new y(function(lr,nr){function ur(){ae?(Et(),lr(),or()):ue.getRelations().then(function(ar){Ie=ar[0],kt=ar[1],Et(),lr(),or()}).then(void 0,function(ar){ar.message="db.getRelations error",ar.callFunc="user::onRelations",nr(ar),dr(ar)})}de?ue.mergeRelations(Ie,Ve,kt,At,oe).then(function(){ur()}).then(void 0,function(ar){ar.message="db.mergeRelations error",ar.callFunc="user::onRelations",nr(ar),dr(ar)}):(le.logger.warn("user::onRelations: no relations need merge"),ur())}).then(void 0,function(lr){throw lr.message="merge relations data error",lr.callFunc="user::onRelations",dr(lr),lr})):(Et(),cr()))}).catch(function(cr){return le.logger.error("user::onRelations: ",cr),y.reject(cr)});function Et(){le.timetags.relations=oe,Ie.invalid=Ve,kt.invalid=At,ae?(le.syncResult.blacklist=Ie,le.syncResult.mutelist=kt,le.syncResult.invalidBlacklist=Ve,le.syncResult.invalidMutelist=At):(le.logger.info("user::onRelations: get relations",Ie,kt),re.obj.blacklist=Ie,re.obj.mutelist=kt)}ae&&(ze.cmd="relations",le.syncPromiseArray.push(ze))},k.markInBlacklist=function(re,oe){var le=this.db;re.record={account:re.account,updateTime:+new Date},le.enable&&le.markInBlacklist(re),oe&&(this.logger.info("user::markInBlacklist:",re),this.options.onsyncmarkinblacklist(re))},k.markInMutelist=function(re,oe){var le=this.db;re.record={account:re.account,updateTime:+new Date},le.enable&&le.markInMutelist(re),oe&&(this.logger.info("user::markInMutelist:",re),this.options.onsyncmarkinmutelist(re))},k.mergeUser=function(re){this.userSet[re.account]=re}},function(t,r,e){var n=e(0);function g(){}g.parse=function(y){var i=n.copy(y);return i.isBlacked=i.isBlacked==="1",i.isMuted=i.isMuted==="1",i.createTime=+i.createTime,i.updateTime=+i.updateTime,i},t.exports=g},function(t,r,e){var n=e(127),g=e(2),y=e(10),i=e(3),k=e(4),L=e(11),$=["type"],V=e(37).fn,z=e(0),re=z.objs2accounts,oe=e(783),le=e(208);V.processFriend=function(ue){var ie=ue.obj,ae=ue.content,Fe=ue.error;switch(ue.cmd){case"friendRequest":this.updateFriendSysMsg(ue),Fe||this.onFriendRequest(ie);break;case"syncFriendRequest":this.onFriendRequest(ae,!0);break;case"deleteFriend":Fe||this.onDeleteFriend(ie);break;case"syncDeleteFriend":this.onDeleteFriend(ae,!0);break;case"updateFriend":Fe||this.onUpdateFriend(ie);break;case"syncUpdateFriend":this.onUpdateFriend(ae.friend,!0);break;case"getFriends":this.getFriends(ue);break;case"syncFriends":this.onFriends(ue);break;case"syncFriendUsers":this.onFriendUsers(ue)}},V.getFriends=function(ue){var ie=ue.content.friends,ae=[],Fe=[];g(ie).call(ie,function(de){(de=y(oe).call(oe,de)).valid?ae.push(de):Fe.push(de)}),ae.invalid=Fe,ue.obj=ae},V.onFriends=function(ue){var ie,ae=this,Fe=ae.db,de=ue.error,Ie=ue.content.friends,Ve=!0,kt=[],At=[],ze=new i(function(cr,er){var or,dr;de?er(de):(function(){Ve&&g(Ie).call(Ie,function(lr){(lr=y(oe).call(oe,lr)).valid?kt.push(lr):At.push(lr)}),ae.logger.info("friend::onFriends: parse friends",re(kt),"delete",re(At)),Ie.length?(Ve=!0,ie=ue.content.timetag):Ve=!1}(),Fe.enable?(or=cr,dr=er,ue.promise=new i(function(lr,nr){function ur(){Et(),lr(),or()}Ve?Fe.mergeFriends(kt,At,ie).then(function(){ur()}).then(void 0,function(ar){ar._msg="merge friends error",nr(ar),dr(ar)}):(ae.logger.info("friend::onFriends: no merge friends"),ur())}).then(void 0,function(lr){throw lr._msg="merge friends data error",dr(lr),lr})):(Et(),cr()))}).catch(function(cr){return ae.logger.error("friend::onFriends: ",cr),i.reject(cr)});function Et(){var cr,er;ae.timetags.friends=ie,kt.invalid=At,ae.syncResult.friends=k(cr=ae.syncResult.friends||[]).call(cr,kt||[]),ae.syncResult.invalidFriends=k(er=ae.syncResult.invalidFriends||[]).call(er,At||[])}ze.cmd="friends",ae.syncPromiseArray.push(ze)},V.onFriendRequest=function(ue,ie){var ae=i.resolve(),Fe=this.db,de=ue.type,Ie=n(ue,$);if((de=ue.type=oe.getTypeFromByte(de)||de)==="addFriend"||de==="passFriendApply"){var Ve=ue.friend=oe.assembleFriend(Ie);Fe.enable&&(ae=Fe.putFriend(Ve))}return ie&&this.onSyncFriendAction(ue),ae},V.onSyncFriendAction=function(ue){this.logger.info("friend::onSyncFriendActionon: ".concat(ue.type,", "),ue.account),this.options.onsyncfriendaction(ue)},V.onDeleteFriend=function(ue,ie){var ae=i.resolve(),Fe=this.db;return Fe.enable&&(ae=Fe.deleteFriend(ue.account)),ie&&(ue.type="deleteFriend",this.onSyncFriendAction(ue)),ae},V.onUpdateFriend=function(ue,ie){var ae=this.db,Fe=y(oe).call(oe,ue);ae.enable&&ae.updateFriend(Fe),ie&&this.onSyncFriendAction({type:"updateFriend",friend:Fe})},V.onFriendUsers=function(ue){var ie,ae,Fe=this.db,de=ue.content,Ie=L(ie=de.users).call(ie,function(At){return y(le).call(le,At)});this.logger.info("friend::onFriendUsers: parse users",re(Ie));var Ve=de.timetag,kt=i.resolve();Fe.enable&&(kt=Fe.mergeFriendUsers(Ie,Ve)),this.timetags.friendUsers=Ve,kt.cmd="friendUsers",this.syncPromiseArray.push(kt),this.syncResult.users=k(ae=this.syncResult.users||[]).call(ae,Ie||[]),this.syncing||this.onSyncDone()},V.updateFriendSysMsg=function(ue){var ie,ae,Fe=ue.obj,de=ue.error;if(ue.obj.idServer){if(de)ie="error",de=z.filterObj(de,"code message");else{var Ie=Fe.type;switch(Ie=oe.getTypeFromByte(Ie)||Ie){case"passFriendApply":ie="passed";break;case"rejectFriendApply":ie="rejected"}}ae={idServer:Fe.idServer,state:ie,from:Fe.account,type:"applyFriend"},de&&(ae.error=de),this.updateSysMsg(ae)}}},function(t,r,e){var n=e(28),g=e(15),y=e(37).fn,i=e(0);y.onRobots=function(k){var L=k.content;if(i.isFunction(this.options.onrobots)&&n(L.robots)){var $,V=g($=L.robots).call($,function(z){return!!z.botid});V.length>0&&this.options.onrobots(V||[])}}},function(t,r,e){var n=e(60),g=e(61),y=e(10),i=e(2),k=e(22),L=e(121),$=e(3),V=e(11),z=e(4),re=e(15),oe=e(5),le=e(37).fn,ue=e(0),ie=ue.objs2accounts,ae=ue.teams2ids,Fe=e(198),de=e(160);le.processTeam=function(Ie){var Ve,kt,At,ze=Ie.error;switch(Ie.obj===void 0&&(Ie.obj={}),Ie.cmd){case"createTeam":Ve=Ie.obj.team,ze||(Ve=Ie.content.team),Ve=y(Fe).call(Fe,Ve),Ie.obj.team=Ve,At=de.assembleOwner(Ve),Ie.obj.owner=At,ze||(this.logger.info("team::processTeam: create team ",Ve&&Ve.teamId,At&&At.account),this.onCreateTeam(Ve,At));break;case"syncCreateTeam":Ve=y(Fe).call(Fe,Ie.content.team),At=de.assembleOwner(Ve),this.logger.info("team::processTeam: sync createTeam",Ve&&Ve.teamId,At&&At.account),this.options.onsynccreateteam(Ve,At),this.onCreateTeam(Ve,At);break;case"sendSuperTeamMsg":case"sendTeamMsg":this.onSendMsg(Ie);break;case"teamMsg":this.onMsg(Ie);break;case"teamMsgs":this.onMsgs(Ie);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":ze||(Ie.promise=this.onUpdateInfoInTeam(Ie));break;case"updateNickInTeam":Ie.obj=y(de).call(de,Ie.obj);break;case"updateTeam":Ie.obj=y(Fe).call(Fe,Ie.obj,!0);break;case"applyTeam":Ie.error||(Ie.obj=y(Fe).call(Fe,Ie.content.team));break;case"passTeamApply":this.updateTeamSysMsgState(Ie,"passed");break;case"rejectTeamApply":this.updateTeamSysMsgState(Ie,"rejected");break;case"acceptTeamInvite":this.updateTeamSysMsgState(Ie,"passed"),Ie.error||(Ie.obj=y(Fe).call(Fe,Ie.content.team));break;case"rejectTeamInvite":this.updateTeamSysMsgState(Ie,"rejected");break;case"getTeam":Ie.error||(Ie.obj=y(Fe).call(Fe,Ie.content.team));break;case"getTeams":this.onTeams(Ie);break;case"getTeamMembers":this.onTeamMembers(Ie);break;case"syncTeams":this.onTeams(Ie);break;case"syncTeamMembers":this.onTeamMembers(Ie);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":this.onHistoryMsgs(Ie);break;case"syncSendTeamMsg":this.onMsg(Ie);break;case"notifyTeamMsgReads":this.onTeamMsgReceipt(Ie);break;case"syncUpdateTeamMember":(kt=y(de).call(de,Ie.content.teamMember)).account===this.account&&this.mergeMyTeamMembers(kt),this.onUpdateTeamMember(kt);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":Ie.error||(Ie.obj=de.reverseMembers(Ie.content.teamMembers));break;case"getMutedTeamMembers":Ie.error||(Ie.obj={teamId:Ie.obj.teamId,members:de.reverseMembers(Ie.content.teamMembers)});break;case"syncMyTeamMembers":this.onSyncMyTeamMembers(Ie);break;case"sendTeamMsgReceipt":this.sendTeamMsgReceipt(Ie);break;case"getTeamMsgReads":this.getTeamMsgReads(Ie);break;case"getTeamMsgReadAccounts":this.getTeamMsgReadAccounts(Ie);break;case"getTeamsById":this.getTeamsById(Ie)}},le.onUpdateInfoInTeam=function(){var Ie=g(n.mark(function Ve(kt){var At,ze,Et;return n.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(At=this,!(kt.content&&kt.content.teamMember&&kt.content.teamMember.teamId)){cr.next=11;break}if(ze=y(de).call(de,kt.content.teamMember),!At.db.enable){cr.next=7;break}return cr.next=6,At.db.updateTeamMember(ze);case 6:ze=cr.sent;case 7:return At.mergeMyTeamMembers(ze),At.onUpdateTeamMember(ze),kt.obj=ze,cr.abrupt("return");case 11:if((Et=kt.obj.teamMember?kt.obj.teamMember:kt.obj).account=At.account,Et.account){cr.next=15;break}return cr.abrupt("return");case 15:Et.id=de.genId(Et.teamId,Et.account),Et=y(de).call(de,Et),At.mergeMyTeamMembers(Et),kt.obj=At.myTeamMembersMap&&At.myTeamMembersMap[Et.teamId]||Et,At.onUpdateTeamMember(Et);case 20:case"end":return cr.stop()}},Ve,this)}));return function(Ve){return Ie.apply(this,arguments)}}(),le.getTeamMsgReads=function(Ie){var Ve=this;if(Ie.error)this.logger.error("team::sendTeamMsgReceipt: ",Ie.error);else{var kt=ue._get(Ie,"content.teamMsgReceipts")||[];if(this.db.enable){var At=[];i(kt).call(kt,function(ze){ze.idClient&&At.push({idClient:ze.idClient,unread:+ze.unread,read:+ze.read})}),At.length>0&&k(function(){return Ve.db.updateMsgBatch(At)},0)}}},le.getTeamMsgReadAccounts=function(Ie){if(Ie.error)this.logger.error("team::getTeamMsgReadAccounts: ",Ie.error);else{var Ve=ue._get(Ie,"content.readAccounts")||[],kt=ue._get(Ie,"content.unreadAccounts")||[],At=ue._get(Ie,"content.teamMsgReceipt.idClient")||[];this.db.enable&&this.db.putMsgReadDetail({idClient:At,readAccounts:Ve,unreadAccounts:kt})}},le.sendTeamMsgReceipt=function(Ie){var Ve=this;if(Ie.error)this.logger.error("team::sendTeamMsgReceipt: ",Ie.error);else{var kt=ue._get(Ie,"obj.teamMsgReceipts")||[],At=ue._get(Ie,"content.teamMsgReceipts")||[];if(this.db.enable){var ze=[];i(kt).call(kt,function(Et){L(At).call(At,function(cr){return Et.idServer===cr.idServer})||ze.push({idClient:Et.idClient,hasRead:!0})}),ze.length>0&&(this.logger.log("sendTeamMsgReceipt::updateMsgBatch"),k(function(){return Ve.db.updateMsgBatch(ze)},0))}}},le.onCreateTeam=function(Ie,Ve){var kt=this.db;kt.enable&&(kt.putTeam(Ie),kt.putTeamMembers(Ve)),this.options.onCreateTeam(Ie,Ve)},le.onTeams=function(Ie){Ie.content=Ie.content||{};var Ve,kt=this,At=kt.db,ze=kt.packetFromSync(Ie),Et=Ie.content.teams||[],cr=!0,er=[],or=[];if(Ie.error)switch(Ie.error.code){case 803:Ie.error=null,cr=!1}var dr=new $(function(nr,ur){var ar,gr;Ie.error?ze&&ur(Ie.error):(function(){cr&&i(Et).call(Et,function(pr){(pr=y(Fe).call(Fe,pr)).validToCurrentUser?er.push(pr):or.push(pr)}),Et.length?(cr=!0,Ve=Ie.content.timetag):cr=!1}(),At.enable?(ar=nr,gr=ur,Ie.promise=new $(function(pr,hr){function Cr(){ze?(lr(),pr(),ar()):At.getTeams().then(function(wr){er=wr,lr(),pr(),ar()}).catch(function(wr){wr.message="db.getTeams error",wr.callFunc="team::afterMergeData",hr(wr),gr(wr)})}cr?At.mergeTeams(er,or,Ve).then(function(){Cr()}).catch(function(wr){var Sr={callFunc:"team::onTeams:mergeData",message:"db.mergeTeams error",event:wr};hr(Sr),gr(Sr)}):(kt.logger.warn("team::onTeams:mergeData: no teams need merge"),Cr())}).then(void 0,function(pr){throw pr.message="merge teams data error",pr.callFunc="team::mergeData",gr(pr),pr})):(lr(),nr()))}).catch(function(nr){return kt.logger.error("team::onTeams: ",nr),$.reject(nr)});function lr(){kt.timetags.teams=Ve,er.invalid=or,ze?(kt.syncResult.teams=er,kt.syncResult.invalidTeams=or,kt.syncing||kt.onSyncDone()):(kt.logger.info("team::onTeams: not in syncing, get teams",ae(er)),Ie.obj=er)}ze&&(dr.cmd="teams",kt.syncPromiseArray.push(dr))},le.getTeamsById=function(Ie){var Ve;if(Ie.error){if(Ie.error.code!==816)return;this.logger.error("team::getTeamsById: ",Ie.error),Ie.error=null}Ie.content.teams=V(Ve=Ie.content.teams).call(Ve,function(kt){return y(Fe).call(Fe,kt)}),Ie.obj=Ie.content},le.onTeamMembers=function(Ie){Ie.content=Ie.content||{};var Ve,kt=this,At=kt.db,ze=kt.packetFromSync(Ie),Et=Ie.content.members||[],cr=!0,er=[],or=[];if(Ie.obj&&(Ve=Ie.obj.teamId),Ve||(Ve=Ie.content.teamId),Ve=""+Ve,Ie.error)switch(Ie.error.code){case 406:Ie.error=null,cr=!1}var dr=new $(function(lr,nr){Ie.error?(kt.logger.error("team::onTeamMember: team error:",Ve,Ie.error),lr()):(function(){cr&&i(Et).call(Et,function(ur){(ur=y(de).call(de,ur)).valid?er.push(ur):or.push(ur)}),Et.length?(cr=!0,Ie.content.timetag):cr=!1}(),function(ur,ar){if(ze){kt.syncTeamMembersResult[Ve]=er,kt.syncTeamMembersResult[Ve+"-invalid"]=or;var gr=z(er).call(er,or);At.putTeamMembers(gr).catch(function(pr){throw kt.logger.error("team::onTeamMembers: putTeamMembers error: ",pr),pr}).then(function(){return At.updateTeamMemberTimetag(Ve,Ie.content.timetag)}).catch(function(pr){kt.logger.error("team::onTeamMembers error: ",pr,Ve,Ie.content.timetag)}).then(ur)}else kt.logger.info("team::onTeamMembers: not syncing, get members",Ve,ie(er)),Ie.obj={teamId:Ve,members:er},ur()}(lr))});ze&&(dr.cmd=Ve,kt.syncTeamMembersPromiseArray.push(dr))},le.onUpdateTeamMember=function(Ie){if(Ie.updateTime||(Ie.updateTime=+new Date),this.account===Ie.account){var Ve=this.myTeamMembersMap[Ie.teamId];this.logger.info("team::onMyTeamMembers: ",[Ve]),Ie=Ve||Ie,this.options.onMyTeamMembers(ue.simpleClone([Ve]))}this.logger.info("team::onUpdateTeamMember: ",Ie&&Ie.account),this.options.onupdateteammember(ue.simpleClone(Ie));var kt={teamId:Ie.teamId,memberUpdateTime:Ie.updateTime};this.onUpdateTeam(kt);var At=this.db;At.enable&&At.updateTeamMember(Ie)},le.onUpdateTeam=function(Ie){this.logger.info("team::onUpdateTeam:",Ie&&Ie.teamId),this.options.onUpdateTeam(ue.simpleClone(Ie));var Ve=this.db;Ve.enable&&Ve.updateTeam(Ie)},le.onSyncMyTeamMembers=function(Ie){var Ve=this,kt=Ve.db,At=de.reverseMembers(Ie.content.teamMembers);if(kt.enable){var ze=kt.putTeamMembers(At).then(function(){return kt.updateMyTeamMembersTimetag(Ie.content.timetag)}).catch(function(Et){return Ve.logger.error("team::syncMyTeamMember: ",Et),$.reject(Et)});ze.cmd="myTeamMembers",Ve.syncTeamMembersPromiseArray.push(ze),Ve.syncPromiseArray.push(ze)}else Ve.syncResult.myTeamMembers=At;Ve.mergeMyTeamMembers(At)},le.mergeMyTeamMembers=function(Ie){ue.isArray(Ie)||(Ie=[Ie]);var Ve=this.myTeamMembersMap=this.myTeamMembersMap||{};i(Ie).call(Ie,function(kt){var At=kt.teamId;Ve[At]=ue.merge(Ve[At],kt)})},le.notifyForNewTeamMsg=function(Ie){ue.isArray(Ie)||(Ie=[Ie]);var Ve=this,kt=this.myTeamMembersMap||{},At={},ze=[];i(Ie).call(Ie,function(cr){ue.exist(kt[cr])?At[cr]=kt[cr].muteNotiType:ze.push(cr)});var Et=$.resolve({map:At});return ze.length&&(Et=Ve.api.getMyTeamMembers({teamIds:ze,promise:!0}).then(function(cr){Ve.mergeMyTeamMembers(cr),i(cr).call(cr,function(or){At[or.teamId]=or.muteNotiType});var er=re(Ie).call(Ie,function(or){return!At[or]});return $.resolve({map:At,miss:er})}).catch(function(cr){return oe(At).length>0?$.resolve({map:At,miss:ze,error:cr}):$.reject(cr)})),Et},le.updateTeamSysMsgState=function(Ie,Ve){var kt,At=Ie.error;At&&(Ve="error",At=ue.filterObj(At,"code message")),kt={idServer:Ie.obj.idServer,state:Ve,from:Ie.obj.from,type:Ie.obj.type},At&&(kt.error=At),this.updateSysMsg(kt)},le.onTeamMsgReceipt=function(Ie){var Ve=Ie.content,kt=Ie.error;kt&&this.logger.error("team::onTeamMsgReceipt:",kt),Ve&&Ve.teamMsgReceipts&&(this.options.onTeamMsgReceipt(Ve),this.options.onMsgReceipts(Ve.teamMsgReceipts))}},function(t,r,e){var n=e(60),g=e(61),y=e(10),i=e(3),k=e(2),L=e(4),$=e(37).fn,V=e(0),z=V.teams2ids,re=e(312),oe=e(206);$.processSuperTeam=function(le){var ue,ie,ae,Fe=le.error;switch(le.obj===void 0&&(le.obj={}),le.cmd){case"sendSuperTeamMsg":this.onSendMsg(le);break;case"superTeamMsg":this.onMsg(le);break;case"sendSuperTeamCustomSysMsg":this.onSendSysMsg(le);break;case"superTeamCustomSysMsg":this.onSysMsg(le);break;case"syncSuperTeams":this.onSuperTeams(le);break;case"syncCreateSuperTeam":ue=y(re).call(re,le.content.team),ae=oe.assembleOwner(ue),this.logger.info("team::processTeam: sync createTeam",ue&&ue.teamId,ae&&ae.account),this.options.onSyncCreateSuperTeam(ue,ae),this.onCreateSuperTeam(ue,ae);break;case"getSuperTeamHistoryMsgs":case"searchSuperTeamHistoryMsgs":this.onHistoryMsgs(le);break;case"syncSendSuperTeamMsg":this.onMsg(le);break;case"addSuperTeamMembers":case"removeSuperTeamMembers":case"leaveSuperTeam":case"addSuperTeamManagers":case"removeSuperTeamManagers":case"transferSuperTeam":break;case"updateInfoInSuperTeam":Fe||(le.promise=this.onUpdateInfoInSuperTeam(le));break;case"updateNickInTeam":le.obj=y(oe).call(oe,le.obj);break;case"syncUpdateSuperTeamMember":(ie=y(oe).call(oe,le.content.teamMember)).account===this.account&&this.mergeMySuperTeamMembers(ie),this.onUpdateSuperTeamMember(ie);break;case"updateSuperTeam":le.obj=y(re).call(re,le.obj,!0);break;case"getSuperTeam":le.error||(le.obj=y(re).call(re,le.content.team));break;case"getSuperTeams":this.onSuperTeams(le);break;case"syncSuperTeamMembers":this.onSyncSuperTeamMembers(le);break;case"syncMySuperTeamMembers":this.onSyncMySuperTeamMembers(le);break;case"getSuperTeamMembers":le.error||this.onGetAllSuperTeamMembers(le);break;case"getSuperTeamMembersByJoinTime":case"getSuperTeamMembersByAccounts":case"getMutedSuperTeamMembers":le.error||this.onSuperTeamMembers(le);break;case"onDeleteSuperTeamMsg":this.onDeleteMsg(le);break;case"onSuperTeamMsgDelete":case"syncDeleteSuperTeamMsg":this.onMsgDeleted(le,!0);break;case"onMarkSuperTeamSessionAck":this.onMarkSessionAck(le);break;case"syncMarkSuperTeamSessionAck":this.syncMarkSessionAck(le);break;case"passSuperTeamApply":this.updateSuperTeamSysMsgState(le,"passed");break;case"rejectSuperTeamApply":this.updateTeamSysMsgState(le,"rejected");break;case"acceptSuperTeamInvite":this.updateTeamSysMsgState(le,"passed");break;case"rejectSuperTeamInvite":this.updateSuperTeamSysMsgState(le,"rejected");break;case"getMySuperTeamMembers":le.error||(le.obj=oe.reverseMembers(le.content.members))}},$.onUpdateInfoInSuperTeam=function(){var le=g(n.mark(function ue(ie){var ae,Fe,de;return n.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(ae=this,!(ie.content&&ie.content.superTeamMember&&ie.content.superTeamMember.teamId)){Ie.next=11;break}if(Fe=y(oe).call(oe,ie.content.superTeamMember),!ae.db.enable){Ie.next=7;break}return Ie.next=6,ae.db.updateSuperTeamMember(Fe);case 6:Fe=Ie.sent;case 7:return ae.mergeMySuperTeamMembers(Fe),ae.onUpdateSuperTeamMember(Fe),ie.obj=Fe,Ie.abrupt("return");case 11:(de=ie.obj.superTeamMember?ie.obj.superTeamMember:ie.obj).account=ae.account,de.id=oe.genId(de.teamId,de.account),de=y(oe).call(oe,de),ae.mergeMySuperTeamMembers(de),ie.obj=ae.mySuperTeamMembersMap&&ae.mySuperTeamMembersMap[de.teamId]||de,ae.onUpdateSuperTeamMember(de);case 18:case"end":return Ie.stop()}},ue,this)}));return function(ue){return le.apply(this,arguments)}}(),$.onSuperTeams=function(le){le.content=le.content||{};var ue,ie=this,ae=ie.db,Fe=ie.packetFromSync(le),de=le.content.teams||[],Ie=!0,Ve=[],kt=[];if(le.error)switch(le.error.code){case 803:le.error=null,Ie=!1}var At=new i(function(Et,cr){var er,or;le.error?Fe&&cr(le.error):(function(){Ie&&k(de).call(de,function(dr){(dr=y(re).call(re,dr)).validToCurrentUser?Ve.push(dr):kt.push(dr)}),de.length?(Ie=!0,ue=le.content.timetag):Ie=!1}(),ae.enable?(er=Et,or=cr,le.promise=new i(function(dr,lr){function nr(){Fe?(ze(),dr(),er()):ae.getSuperTeams().then(function(ur){Ve=ur,ze(),dr(),er()}).then(void 0,function(ur){ur.message="db.getSuperTeams error",ur.callFunc="superTeam::afterMergeData",lr(ur),or(ur)})}Ie?ae.mergeSuperTeams(Ve,kt,ue).then(function(){nr()}).then(void 0,function(ur){var ar={callFunc:"superTeam::onSuperTeams:mergeData",message:"db.mergeSuperTeams error",event:ur};lr(ar),or(ar)}):(ie.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"),nr())}).then(void 0,function(dr){throw dr.message="merge teams data error",dr.callFunc="superTeam::mergeData",or(dr),dr})):(ze(),Et()))}).catch(function(Et){return ie.logger.error("superTeam::onSuperTeams: ",Et),i.reject(Et)});function ze(){ie.timetags.superTeams=ue,Ve.invalid=kt,Fe?(ie.syncResult.superTeams=Ve,ie.syncResult.invalidSuperTeams=kt):(ie.logger.info("superTeam::onSuperTeams: not in syncing, get teams",z(Ve)),le.obj=Ve)}Fe&&(At.cmd="superteams",ie.syncPromiseArray.push(At))},$.onCreateSuperTeam=function(le,ue){var ie=this.db;ie.enable&&(ie.putSuperTeam(le),ie.putSuperTeamMembers(ue))},$.onGetAllSuperTeamMembers=function(le){var ue=this,ie=this.db,ae=le.raw.ser,Fe=this.superTeamMembersData[ae]||{},de=Fe.teamId||le.obj&&le.obj.teamId;if(ie.enable){var Ie=le.content&&le.content.timetag,Ve=le.raw.code===200?i.all(Fe.pArr):i.resolve();le.promise=Ve.then(function(){return ie.getSuperTeamMembers(de).then(function(kt){Ie&&ie.updateSuperTeamMemberTimetag(de,Ie),le.obj={members:kt,invalid:[],teamId:de}})}).catch(function(kt){return ue.logger.error(kt)})}else le.obj={members:Fe.members,invalid:Fe.invalid,teamId:de};this.superTeamMembersData[ae]=void 0},$.onSyncSuperTeamMembers=function(le){var ue,ie=this,ae=this.db,Fe=[],de=[],Ie=le.content.members||[],Ve=le.raw.ser,kt=ie.packetFromSync(le);if(le.obj&&(ue=le.obj.teamId),ue||(ue=le.content.teamId),k(Ie).call(Ie,function(cr){(cr=y(oe).call(oe,cr)).valid?de.push(cr):Fe.push(cr)}),kt){var At=new i(function(cr,er){if(le.error)ie.logger.error("team::onSuperTeamMember: team error:",ue,le.error),cr();else{ie.syncSuperTeamMembersResult[ue]=de,ie.syncSuperTeamMembersResult[ue+"-invalid"]=Fe;var or=L(de).call(de,Fe);ae.putSuperTeamMembers(or).catch(function(dr){throw ie.logger.error("team::onSuperTeamMembers: putSuperTeamMembers error: ",dr),dr}).then(function(){return ae.updateSuperTeamMemberTimetag(ue,le.content.timetag)}).catch(function(dr){ie.logger.error("team::onSuperTeamMembers error: ",dr,ue,le.content.timetag)}).then(cr)}});ie.syncSuperTeamMembersPromiseArray.push(At)}else{if(ae.enable){ie.superTeamMembersData[Ve]=ie.superTeamMembersData[Ve]||{teamId:ue,pArr:[]};var ze=i.resolve();le.content&&le.content.isAll&&(ze=ae.deleteSuperTeamMembers(ue));var Et=ze.then(function(){return ae.mergeSuperTeamMembers(ue,de,Fe)}).then(function(){return i.resolve()});ie.superTeamMembersData[Ve].pArr.push(Et)}else ie.superTeamMembersData[Ve]=ie.superTeamMembersData[Ve]||{teamId:ue,members:[],invalid:[]},de.length&&(ie.superTeamMembersData[Ve].members=ie.api.mergeTeamMembers(ie.superTeamMembersData[Ve].members,de)),Fe.length&&(ie.superTeamMembersData[Ve].invalid=ie.api.mergeTeamMembers(ie.superTeamMembersData[Ve].invalid,Fe));le.raw=void 0}},$.onSyncMySuperTeamMembers=function(le){var ue=this,ie=ue.db,ae=oe.reverseMembers(le.content.teamMembers);if(ie.enable){var Fe=ie.putSuperTeamMembers(ae).then(function(){return ie.updateMySuperTeamMembersTimetag(le.content.timetag)}).catch(function(de){return ue.logger.error("superTeam::syncMySuperTeamMember: ",de),i.reject(de)});ue.syncPromiseArray.push(Fe)}else ue.syncResult.mySuperTeamMembers=ae;ue.mergeMySuperTeamMembers(ae)},$.onSuperTeamMembers=function(le,ue){var ie,ae=this.db,Fe=[],de=[],Ie=le.content.members||[];k(Ie).call(Ie,function(Ve){(Ve=y(oe).call(oe,Ve)).valid?de.push(Ve):Fe.push(Ve)}),le.obj&&(ie=le.obj.teamId),ie||(ie=le.content.teamId||de[0]&&de[0].teamId),ae.enable&&!ue&&ae.mergeSuperTeamMembers(ie,de,Fe),le.obj={members:de,invalid:Fe,teamId:ie}},$.onUpdateSuperTeamMember=function(le){if(le.updateTime||(le.updateTime=+new Date),this.account===le.account){var ue=this.mySuperTeamMembersMap[le.teamId];this.logger.info("superTeam::onMySuperTeamMembers: ",[ue]),le=ue||le,this.options.onMySuperTeamMembers(V.simpleClone([ue]))}this.logger.info("superTeam::onUpdateSuperTeamMember: ",le&&le.account),this.options.onUpdateSuperTeamMember(V.simpleClone(le));var ie={teamId:le.teamId,memberUpdateTime:le.updateTime};this.onUpdateSuperTeam(ie);var ae=this.db;ae.enable&&ae.updateSuperTeamMember(le)},$.onUpdateSuperTeam=function(le){this.logger.info("superteam::onUpdateSuperTeam:",le&&le.teamId),this.options.onUpdateSuperTeam(V.simpleClone(le));var ue=this.db;ue.enable&&ue.updateSuperTeam(le)},$.mergeMySuperTeamMembers=function(le){V.isArray(le)||(le=[le]);var ue=this.mySuperTeamMembersMap=this.mySuperTeamMembersMap||{};k(le).call(le,function(ie){var ae=ie.teamId;ue[ae]=V.merge(ue[ae],ie)})},$.updateSuperTeamSysMsgState=function(le,ue){var ie,ae=le.error;ae&&(ue="error",ae=V.filterObj(ae,"code message")),ie={idServer:le.obj.idServer,state:ue,from:le.obj.from,type:le.obj.type},ae&&(ie.error=ae),this.updateSysMsg(ie)}},function(t,r,e){var n=e(10),g=e(3),y=e(22),i=e(37).fn,k=e(0),L=e(317);i.processNotify=function($){switch($.cmd){case"syncOfflineNetcallMsgs":case"syncOfflineMsgs":this.onOfflineMsgs($);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":case"syncOfflineSuperTeamSysMsgs":this.onOfflineSysMsgs($);break;case"syncRoamingMsgs":case"syncSuperTeamRoamingMsgs":this.onRoamingMsgs($);break;case"syncOfflineFilterMsgs":this.onOfflineMsgs($,!0);break;case"syncOfflineFilterSysMsgs":this.onOfflineSysMsgs($,!0);break;case"syncMsgReceipts":this.onOfflineMsgReceipts($);break;case"syncDonnop":this.onDonnop($,!0);break;case"syncSessionAck":this.syncSessionAck($);break;case"syncSuperTeamSessionAck":this.syncSuperTeamSessionAck($);break;case"syncRobots":this.onRobots($);break;case"syncBroadcastMsgs":this.onBroadcastMsgs($);break;case"syncDeleteSuperTeamMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming($);break;case"syncDeleteMsgSelf":this.syncDeleteMsgSelf($);break;case"syncSessionsWithMoreRoaming":this.syncSessionsWithMoreRoaming($);break;case"syncStickTopSessions":this.syncStickTopSessions($);break;case"syncSessionHistoryMsgsDelete":this.syncSessionHistoryMsgsDelete($)}},i.onDonnop=function($,V){if(!$.error){var z=this,re=z.db,oe=n(L).call(L,$.content.donnop);z.mergeDonnop(oe);var le=z.dbDonnop();if(V){var ue=$.content.timetag;z.timetags.donnop=ue,re.enable&&(le=le.then(function(){return z.db.updateDonnopTimetag(ue)}).catch(function(ie){return z.logger.error("notify::onDonnop: ",ie),g.reject(ie)})),le.cmd="donnop",z.syncPromiseArray.push(le)}else z.onPushNotificationMultiportConfigUpdate()}},i.onUpdateDonnop=function($){if(!$.error){var V=$.obj;V&&(this.mergeDonnop(k.filterObj(V,["shouldPushNotificationWhenPCOnline"])),this.dbDonnop(),this.onPushNotificationMultiportConfigUpdate())}},i.getPushNotificationMultiportConfig=function(){return k.merge({},this.pushNotificationMultiportConfig)},i.mergeDonnop=function($){this.pushNotificationMultiportConfig=k.merge({},this.pushNotificationMultiportConfig,$)},i.dbDonnop=function(){return this.db.enable?this.db.setDonnop(this.pushNotificationMultiportConfig):g.resolve()},i.onPushNotificationMultiportConfigUpdate=function(){var $=this;y(function(){var V=$.getPushNotificationMultiportConfig();$.logger.info("link::onPushNotificationMultiportConfigUpdate:",V),$.options.onPushNotificationMultiportConfigUpdate(V)})}},function(t,r,e){var n=e(51),g=e(2),y=e(15),i=e(11),k=e(3),L=e(5),$=e(8),V=e(6),z=e(10),re=e(143),oe=e(4),le=e(22),ue=e(23),ie=e(43),ae=e(34),Fe=e(95),de=e(52),Ie=e(53),Ve=e(54),kt=e(55),At=e(42),ze=e(9),Et=e(68),cr=e(78),er=e(64),or=e(28);function dr(sr,xr){var Nr=cr!==void 0&&er(sr)||sr["@@iterator"];if(!Nr){if(or(sr)||(Nr=function(Lr,Fr){var qr;if(Lr){if(typeof Lr=="string")return lr(Lr,Fr);var Vr=ze(qr=Object.prototype.toString.call(Lr)).call(qr,8,-1);if(Vr==="Object"&&Lr.constructor&&(Vr=Lr.constructor.name),Vr==="Map"||Vr==="Set")return Et(Lr);if(Vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vr))return lr(Lr,Fr)}}(sr))||xr&&sr&&typeof sr.length=="number"){Nr&&(sr=Nr);var Mr=0,br=function(){};return{s:br,n:function(){return Mr>=sr.length?{done:!0}:{done:!1,value:sr[Mr++]}},e:function(Lr){throw Lr},f:br}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yr,Tr=!0,Br=!1;return{s:function(){Nr=Nr.call(sr)},n:function(){var Lr=Nr.next();return Tr=Lr.done,Lr},e:function(Lr){Br=!0,yr=Lr},f:function(){try{Tr||Nr.return==null||Nr.return()}finally{if(Br)throw yr}}}}function lr(sr,xr){(xr==null||xr>sr.length)&&(xr=sr.length);for(var Nr=0,Mr=new Array(xr);Nr<xr;Nr++)Mr[Nr]=sr[Nr];return Mr}function nr(sr,xr){var Nr=L(sr);if(de){var Mr=de(sr);xr&&(Mr=y(Mr).call(Mr,function(br){return Ie(sr,br).enumerable})),Nr.push.apply(Nr,Mr)}return Nr}var ur=e(37).fn,ar=e(0),gr=ar.undef,pr=e(48),hr=e(160),Cr=e(206),wr=e(162),Sr=e(297),mr=e(12),_r=e(70),Ar=e(80);function Er(sr,xr,Nr){var Mr=this,br=Mr.message.Message,yr=Nr?"offlineFilterMsgs":"offlineMsgs";if(!(xr&&xr.length>0))return k.resolve();var Tr=br.getMaxTimetag(xr),Br=xr[0].scene,Lr=xr[0].target;Mr.markMsgRead(xr),xr=br.deduplication(xr),xr=br.sortMsgs(xr);var Fr=Mr.genSessionByMsgs(xr);Mr.cacheSyncedSession(Fr);var qr=Mr.putMsg(xr,"offlineMsgs").then(function(Vr){var Qr=Vr;(Qr=Mr.filterIgnore(Qr)).length&&(Mr.logger.info("msg::onOfflineMsgs： toreLastSession",yr,sr,Qr.length),Mr.syncResult[yr]=Mr.syncResult[yr]||[],Mr.syncResult[yr].push({sessionId:sr,scene:Br,to:Lr,msgs:Qr,timetag:Tr}))}).catch(function(Vr){return Mr.logger.error("msg::onOfflineMsgs: ",Vr),k.reject(Vr)});return qr.cmd="offlineMsgs-"+sr,qr}ur.processMsg=function(sr){switch(sr.cmd){case"sendMsg":this.onSendMsg(sr);break;case"msg":this.onMsg(sr);break;case"sysMsg":this.onSysMsg(sr);break;case"broadcastMsg":this.onBroadcastMsg(sr);break;case"sendCustomSysMsg":this.onSendSysMsg(sr);break;case"getHistoryMsgs":case"searchHistoryMsgs":this.onHistoryMsgs(sr);break;case"msgFtsInServer":case"msgFtsInServerByTiming":this.onmsgFtsInServer(sr);break;case"syncSendMsg":this.onMsg(sr);break;case"deleteSessions":this.onDeleteSessions(sr);break;case"sendMsgReceipt":this.onSendMsgReceipt(sr);break;case"msgReceipt":this.onMsgReceipt(sr);break;case"onDeleteMsg":this.onDeleteMsg(sr);break;case"onMsgDeleted":this.onMsgDeleted(sr);break;case"onDeleteMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(sr);break;case"onMarkSessionAck":this.onMarkSessionAck(sr);break;case"syncMarkSessionAck":this.syncMarkSessionAck(sr);break;case"syncUpdateServerSession":this.onSyncUpdateServerSession(sr);break;case"deleteMsgSelf":this.deleteMsgSelf(sr);break;case"deleteMsgSelfBatch":this.deleteMsgSelfBatch(sr);break;case"onDeleteMsgSelf":this.onDeleteMsgSelf(sr);break;case"onDeleteMsgSelfBatch":this.onDeleteMsgSelfBatch(sr);break;case"clearServerHistoryMsgs":this.clearServerHistoryMsgs(sr);break;case"onClearServerHistoryMsgs":this.onClearServerHistoryMsgs(sr)}},ur.checkIgnore=function(sr){var xr=this;g(sr).call(sr,function(Nr){if(!Nr.ignore){try{xr.options.shouldIgnoreMsg(Nr)&&(Nr.ignore=!0)}catch(br){throw xr.logger.error("userOption:shouldIgnoreMsg function error",br),br}var Mr;try{Mr=xr.options.shouldIgnoreNotification(Nr)}catch(br){throw xr.logger.error("userOption:shouldIgnoreNotification function error",br),br}Nr.type==="notification"&&Mr&&(Nr.ignore=!0)}})},ur.filterIgnore=function(sr){return y(sr).call(sr,function(xr){return!xr.ignore})},ur.genSessionByMsgs=function(sr){return this.checkIgnore(sr),wr.genSessionByMsgs(this.message.Message,sr)},ur.onRoamingMsgs=function(sr){var xr=this,Nr=xr.message,Mr=Nr.Message,br=Mr.getMaxTimetag,yr=Nr.reverseMsgs(sr.content.msgs),Tr=br(yr);yr=Mr.deduplication(yr);var Br=(yr=Mr.sortMsgs(yr))[0],Lr=Br.sessionId,Fr=xr.genSessionByMsgs(yr);xr.cacheSyncedSession(Fr);var qr=xr.putMsg(yr,"roamingMsgs").then(function(Vr){var Qr,Tn=(yr=Vr).length,xn=(yr=xr.filterIgnore(yr)).length;Tn!==xn&&xr.logger.info("msg::onRoamingMsgs msg length before filter: "+Tn+" after filter: "+xn),yr.length&&(xr.logger.info("msg::onRoamingMsgs: putRoamingMsgs",Lr,yr.length,i(Qr=yr||[]).call(Qr,function(Xr){return"idServer: "+Xr.idServer+" idClient: "+Xr.idClient+" time:"+Xr.time+" type: "+Xr.type}).join(`
`)),xr.syncResult.roamingMsgs=xr.syncResult.roamingMsgs||[],xr.syncResult.roamingMsgs.push({sessionId:Lr,scene:Br.scene,to:Br.target,msgs:yr,timetag:Tr}),xr.syncing||xr.roamingMsgSyncDoneBufferManager.add())}).catch(function(Vr){return xr.logger.error("msg::onRoamingMsgs: ",Vr),k.reject(Vr)});qr.cmd="roamingMsgs-"+Lr,xr.syncPromiseArray.push(qr)},ur.onOfflineMsgs=function(sr,xr){var Nr,Mr=this,br=this.message,yr=null;xr&&(yr={filter:!0});var Tr=br.reverseMsgs(sr.content.msgs,{modifyObj:yr});Tr=Ar.deduplication(Tr);var Br={};g(Tr).call(Tr,function(qr){Br[qr.sessionId]=Br[qr.sessionId]||[],Br[qr.sessionId].push(qr)});var Lr=i(Nr=L(Br)).call(Nr,function(qr){return{sessionId:qr,msgs:Br[qr]}}),Fr=ar.asyncPool(50,Lr,function(qr){return Er.call(Mr,qr.sessionId,qr.msgs,xr)});this.syncPromiseArray.push(Fr)},ur.completeMsg=function(sr){return sr.from=this.account,sr.fromNick=this.myInfo&&this.myInfo.nick,sr.fromClientType="Web",sr.fromDeviceId=pr.deviceId,sr.time||(sr.time=+new Date),sr},ur.amendMsg=function(sr){if(sr.scene==="team"){var xr=ar.get(this.myTeamMembersMap,sr.to+".nickInTeam");xr&&(sr.fromNick=xr)}else if(sr.scene==="superTeam"){var Nr=ar.get(this.mySuperTeamMembersMap,sr.to+".nickInTeam");Nr&&(sr.fromNick=Nr)}return sr},ur.onMsgs=function(sr){var xr=this,Nr=xr.reporterHook.getSafeClock(),Mr=xr.message.reverseMsgs(sr.content.msgs,{mapper:function(br){var yr=function(Tr){for(var Br=1;Br<arguments.length;Br++){var Lr,Fr,qr=arguments[Br]!=null?arguments[Br]:{};Br%2?g(Lr=nr(Object(qr),!0)).call(Lr,function(Vr){n(Tr,Vr,qr[Vr])}):Ve?kt(Tr,Ve(qr)):g(Fr=nr(Object(qr))).call(Fr,function(Vr){At(Tr,Vr,Ie(qr,Vr))})}return Tr}({},br);if(yr.__receiveTime=sr.__receiveTime,yr.__handleTime=Nr,yr.__clientExt)try{yr.__clientExt=JSON.parse(yr.__clientExt)}catch{xr.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(yr.__clientExt))}return xr.handleMsg(yr),yr}});xr.pushMsgDelay(Mr)},ur.onMsg=function(sr,xr){var Nr;if(sr.content.msg.attach){var Mr=null;try{Mr=JSON.parse(sr.content.msg.attach)}catch{}if(Mr&&Mr.url&&ar.get(this.mixStorePolicy,"s3Policy.dlcdns")){var br,yr=dr(this.mixStorePolicy.s3Policy.dlcdns);try{for(yr.s();!(br=yr.n()).done;){var Tr,Br=br.value;$(Tr=Mr.url).call(Tr,Br)>=0&&(Mr.isS3=!0,Br!==this.mixStorePolicy.s3Policy.dlcdn&&(Mr.url=Mr.url.replace(Br,this.mixStorePolicy.s3Policy.dlcdn)))}}catch(Fr){yr.e(Fr)}finally{yr.f()}}sr.content.msg.attach=V(Mr)}var Lr=z(Nr=this.message).call(Nr,sr.content.msg);if(Lr.__receiveTime=sr.__receiveTime,Lr.__handleTime=this.reporterHook.getSafeClock(),ar.get(sr,"content.msg.__clientExt"))try{Lr.__clientExt=JSON.parse(sr.content.msg.__clientExt)}catch{this.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(sr.content.msg.__clientExt))}xr&&(Lr.filter=!0),sr.cmd!=="syncSendMsg"||Lr.from!==Lr.to?(this.pushMsgDelay([Lr]),this.syncing?(this.logger.info("msg::onMsg:is in syncing ..."),this.unhandledMsgs.push({type:"onMsg",msg:Lr})):this.handleMsg(Lr)):this.logger.warn("onMsg::syncSendMsg to self, so ignore",Lr.idClient,Lr.idServer)},ur.onBroadcastMsgs=function(sr){var xr=sr.content.broadcastMsgs;xr=re(xr).call(xr,function(Nr,Mr){return Nr.broadcastId-Mr.broadcastId}),this.putBroadcastMsgs(xr)},ur.onBroadcastMsg=function(sr){var xr=sr.content.broadcastMsg;xr.time=xr.timestamp,this.syncing?this.unhandledMsgs.push({type:"onBroadcastMsg",msg:xr}):xr&&this.putBroadcastMsg(xr)},ur.pushMsgTask=function(sr){this.msgPromise=this.msgPromise.then(function(){return sr()})},ur.pushMsgDelay=function(sr){if(sr&&sr.length>0){var xr=this;if(xr.msgStatEnable&&!mr.isWeixinApp){var Nr,Mr=i(sr).call(sr,function(br){return{appkey:xr.options.appKey,accid:br.to,fromAccid:br.from,msgId:br.idServer,serverTime:br.time,receiveTime:xr.reporterHook.getNTPTime(),sessionId:xr.sdkSession,platform:"web",sdk_ver:mr.info.version,manufactor:_r.name+" "+_r.version}});xr.msgDelayArr=oe(Nr=xr.msgDelayArr).call(Nr,Mr),xr.msgDelayArr.length>5&&xr.doReportMsgDelay()}}},ur.doReportMsgDelay=function(){var sr,xr=V(this.msgDelayArr);this.msgDelayArr&&this.msgDelayArr.length>0&&(Sr.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived",xr),this.msgDelayArr=[]),this.msgDelayTimer&&clearTimeout(this.msgDelayTimer),this.socket&&(this.msgDelayTimer=le(ue(sr=this.doReportMsgDelay).call(sr,this),1e4))},ur.handleMsg=function(sr){var xr,Nr=this,Mr=Nr.db,br=sr.time;Nr.markMsgRead(sr),Nr.logger.info(oe(xr="msg::handleMsg:msgPromise start ".concat(sr.idServer," ")).call(xr,sr.idClient)),Nr.msgPromise=Nr.msgPromise.then(function(){var yr;return Nr.logger.info(oe(yr="msg::handleMsg:msgPromise, putMsg start ".concat(sr.idServer," ")).call(yr,sr.idClient)),Nr.putMsg(sr,"onMsg")}).then(function(){var yr;return Nr.logger.info(oe(yr="msg::handleMsg:msgPromise, putMsg done and update timetag ".concat(sr.idServer," ")).call(yr,sr.idClient)),Mr.enable?sr.scene==="superTeam"?Mr.updateSuperTeamRoamingMsgTimetag(br):Mr.updateRoamingMsgTimetag(br):(Nr.timetags[sr.scene==="superTeam"?"superTeamRoamingMsgs":"roamingMsgs"]=br,k.resolve())}).then(function(){if(sr)return Nr.checkUserUpdate(sr)}).then(function(){if(sr){var yr=sr.type;switch(Nr.logger.info("msg::handleMsg:msgPromise, checkUserUpdate "+sr.scene+" "+yr+" msg"+(yr==="notification"?" "+sr.attach.type:"")),yr){case"notification":return Nr.onTeamNotificationMsg(sr)}}}).then(function(){var yr,Tr;Nr.logger.info(oe(yr=oe(Tr="msg::handleMsg:msgPromise, onmsg ready: ".concat(sr.idServer," ")).call(Tr,sr.idClient,", ")).call(yr,!!sr.ignore)),sr&&!sr.ignore&&le(function(){var Br,Lr=sr.scene==="p2p";if(mr.isBrowser&&sr.flow!=="out"){var Fr={msgId:sr.idServer,clientId:sr.idClient,receiveTime:Nr.reporterHook.getNTPTime(sr.__receiveTime),serverTime:sr.time,callbackTime:Nr.reporterHook.getNTPTime(),preHandleTime:Nr.reporterHook.getNTPTime(sr.__handleTime),fromAccid:sr.from,toAccid:Nr.options.account,type:Nr.message.sceneMap[sr.scene],tid:Lr?"":sr.to,result:200,failReason:"",rt:ie(Nr.reporterHook.getSafeClock()-sr.__receiveTime)},qr=ar.get(sr,"__clientExt.statistics.apiCallingTime"),Vr=ar.get(sr,"__clientExt.statistics.sendTime");qr&&Vr&&(Fr.apiCallingTime=qr,Fr.sendTime=Vr,Fr.attachUploadDuration=ar.get(sr,"__clientExt.statistics.attachUploadDuration")||0),Nr.reporter&&Nr.reporter.report("msgReceive",Fr)}delete sr.__receiveTime,delete sr.__handleTime,delete sr.__clientExt,Nr.logger.info(oe(Br="msg::handleMsg:msgPromise, tigger onmsg: ".concat(sr.idServer," ")).call(Br,sr.idClient)),Nr.options.onmsg(ar.copy(sr))},0)}).catch(function(yr){var Tr;Nr.logger.error(oe(Tr="msg::handleMsg:msgPromise, catch err ".concat(sr.idServer," ")).call(Tr,sr.idClient),yr),yr.callFunc="msg::handleMsg",Nr.onCustomError("消息处理错误",yr)})},ur.putMsg=function(sr,xr){if(ar.isArray(sr)||(sr=[sr]),y(sr[0]))return k.resolve(sr);var Nr,Mr=this,br=Mr.db,yr=br.enable,Tr=k.resolve(),Br=Mr.message.Message.getLastMsg(sr),Lr=Br.flow,Fr=Mr.genSessionByMsgs(sr);Vr(Fr);var qr=[];function Vr(Qr){xr!=="roamingMsgs"&&xr!=="offlineMsgs"||Mr.cacheSyncedSession(Qr)}return Tr=(Tr=(Tr=Tr.then(function(){var Qr;return yr||Mr.options.autoMarkRead||xr==="roamingMsgs"||!Fr||(Mr.sessionUnreadMsgs=Mr.sessionUnreadMsgs||{},Mr.sessionUnreadMsgs[Fr.id]=Mr.sessionUnreadMsgs[Fr.id]||[],Mr.sessionUnreadMsgs[Fr.id]=oe(Qr=Mr.sessionUnreadMsgs[Fr.id]).call(Qr,y(sr).call(sr,function(Tn){try{return Mr.options.shouldCountNotifyUnread(Tn)}catch(xn){throw Mr.logger.error("userOption:shouldCountNotifyUnread function error",xn),xn}}))),xr==="offlineMsgs"||xr==="roamingMsgs"?k.reject(sr):yr?br.putMsg(sr):sr}).then(function(Qr){return g(sr).call(sr,function(Tn){Mr.checkMsgUnique(Tn)&&Mr.logger.warn("msg::putMsg: msg is not unique",Tn.idClient,Tn.idServer,Tn.time)}),qr=yr?Qr:sr,k.resolve(sr)})).then(function(Qr){return Qr.length&&yr&&Fr?new k(function(Tn){br.getSessions({sessionId:Fr.id}).then(function(xn){if(xn&&xn.lastMsg){var Xr=xn.lastMsg;Fr.lastMsg&&Fr.lastMsg.time<Xr.time&&(Fr.lastMsg=Xr)}qr&&qr.length?Fr?br.putSession(Fr).then(function(Vn){Tn(Vn)}):Tn(xn):(qr=Qr,Tn(xn))})}):k.resolve(Fr)})).then(function(Qr){if(Fr&&qr.length){Nr=Br.sessionId!==Mr.currSessionId;var Tn=xr==="roamingMsgs",xn=Mr.options.syncSessionUnread,Xr=Fr.id,Vn=Mr.getSessionInCache(Xr,!0)||{},Zr=Vn.ack||0;if(xr==="offlineMsgs"||Tn&&xn||xr==="onMsg"&&Lr==="in"&&Nr){var Nn;if(yr&&Qr){var Jr=Vn.unread||0;(Fr=Qr).unread=Jr,Zr=Zr||Fr.ack||0}else(Qr=Vn)&&(Fr.unread=Qr.unread||0);Vr(Fr),Fr.unread=Fr.unread||0;var wn=0;g(qr).call(qr,function(_n){var Pn;try{Pn=Mr.options.shouldCountNotifyUnread(_n)}catch(no){throw Mr.logger.error("userOption:shouldCountNotifyUnread function error",no),no}var Cn=(_n.type!=="notification"||_n.type==="notification"&&Pn)&&(gr(_n.isUnreadable)||_n.isUnreadable);if(Cn&&xn&&(Cn=_n.time>Zr&&_n.flow!=="out"),Cn&&(wn++,xn&&!yr)){var vn=Vn.unreadMsgs||[];vn.push(_n),Fr.unreadMsgs=vn}}),Fr.unread+=wn;var Un=ar.secureOutput("session",Fr);if(Un.unreadMsgs&&(Un.unreadMsgs=i(Nn=Un.unreadMsgs).call(Nn,function(_n){return _n&&_n.idServer})),Mr.logger.info("msg::putMsg:updateSession: ",Un),Vr(Fr),yr)return br.updateSession({id:Fr.id,unread:Fr.unread})}}}),xr==="onMsg"&&(Tr=Tr.then(function(){sr.length&&Fr&&(Mr.onUpdateSession(Fr),Mr.options.syncSessionUnread&&!Nr&&Mr.api.resetSessionUnread(Mr.currSessionId))})),Tr.then(function(){return k.resolve(sr)}).catch(function(Qr){return Qr&&Qr.length?k.resolve(Qr):k.reject(Qr)})},ur.putBroadcastMsgs=function(sr){var xr=this,Nr=xr.db,Mr=sr.length;if(Mr>0){if(xr.doMarkBroadcastMsgsRead(sr),Nr.enable){var br=sr[Mr-1].broadcastId;return Nr.updateBroadcastMsgTimetag(br),Nr.putBroadcastMsg(sr).then(function(){return le(function(){xr.doMarkMsgsRead(),xr.options.onbroadcastmsgs(ar.copy(sr))},0),k.resolve(sr)})}le(function(){xr.options.onbroadcastmsgs(ar.copy(sr))},0)}return sr},ur.putBroadcastMsg=function(sr){var xr=this,Nr=xr.db;return xr.doMarkBroadcastMsgsRead([sr]),Nr.enable?(sr.broadcastId&&Nr.updateBroadcastMsgTimetag(sr.broadcastId),Nr.putBroadcastMsg(sr).then(function(){return le(function(){xr.options.onbroadcastmsg(ar.copy(sr))},0),k.resolve(sr)})):(le(function(){xr.options.onbroadcastmsg(ar.copy(sr))},0),sr)},ur.doMarkBroadcastMsgsRead=function(sr){sr=i(sr).call(sr,function(xr){return xr.broadcastId}),this.sendCmd("batchMarkRead",{sid:7,cid:17,ids:sr})},ur.cacheSyncedSession=function(sr){if(sr&&this.syncResult){sr=ae({},sr),this.syncResult.sessions=this.syncResult.sessions||{};var xr=sr.id,Nr=this.syncResult.sessions[xr]||{};Nr&&Nr.ack>sr.ack&&delete sr.ack,Nr&&Nr.msgReceiptTime>sr.msgReceiptTime&&delete sr.msgReceiptTime;var Mr=ar.get(Nr,"lastMsg.time"),br=ar.get(sr,"lastMsg.time");Mr&&br&&Mr>br&&(sr.lastMsg=Nr.lastMsg),this.syncResult.sessions[xr]=ae(Nr,sr),this.syncResult.sessions[xr]=ae({},this.mergeSession(this.syncResult.sessions[xr]))}},ur.checkMsgUnique=ar.genCheckUniqueFunc("idClient"),ur.revokeMsgUniqueCheck=function(sr){this.uniqueSet&&this.uniqueSet.idClient&&(this.uniqueSet.idClient[sr]=!1)},ur.storeSendMsg=function(sr){if(!this.syncing){var xr=this.putMsg(sr,"sendMsg");return this.msgPromise=this.msgPromise.then(function(){return xr}),xr}this.unhandledMsgs.push({type:"sendMsg",msg:sr})},ur.updateSendMsgError=function(sr){if(!this.syncing){var xr=this.updateMsg(sr);return this.msgPromise=this.msgPromise.then(function(){return xr}),xr}this.unupdatedMsgs.push(sr)},ur.onSendMsg=function(sr,xr){var Nr,Mr,br=this,yr=sr.content&&sr.content.msg,Tr=sr.obj&&sr.obj.msg||yr;if(Tr)if(this.logger.warn(oe(Nr=oe(Mr="sendMsg::end: ".concat(yr&&yr.idServer," ")).call(Mr,Tr.idClient," ")).call(Nr,sr&&sr.raw&&sr.raw.ser)),sr.obj)Lr();else{var Br=br.db;Br&&Br.enable&&Br.getMsgByIdClient(Tr.idClient).then(function(Fr){Fr&&(Tr=Fr,Lr(!1))}).catch(function(){return Lr()})}else this.logger.error("sendMsg::error::get msg failed, msg empty");function Lr(){var Fr,qr=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];br.completeMsg(Tr);var Vr=sr.error&&sr.error.code===7101;sr.error&&!Vr||(Tr.idServer=yr.idServer,Tr.time=+yr.time,yr.yidunAntiSpamRes&&(Tr.yidunAntiSpamRes=yr.yidunAntiSpamRes),yr.callbackExt&&(Tr.callbackExt=yr.callbackExt)),Vr&&(Tr.isInBlackList=!0),sr.error?Tr.status="fail":Tr.status="success",Tr=qr?z(Fr=br.message).call(Fr,Tr):Tr,Tr=br.amendMsg(Tr),xr&&(Tr.filter=!0),sr.obj=Tr,br.syncing?br.unupdatedMsgs.push(Tr):br.msgPromise=k.all([br.msgPromise,sr.obj.promise]).then(function(Qr){return Qr.length||(Tr.resend=!0),br.updateMsg(Tr).then(function(){return br.options.syncSessionUnread&&br.currSessionId===Tr.sessionId&&br.api.resetSessionUnread(br.currSessionId),br.resolveMsgReceiptTask(Tr),Tr})}).catch(function(Qr){br.logger.error("onSendMsg::dealMsg error",Qr)})}},ur.updateLocalMsg=function(sr){var xr=this.updateMsg(sr);return this.msgPromise=this.msgPromise.then(function(){return xr}),xr},ur.updateMsg=function(sr){if(y(sr)||this.options.shouldIgnoreMsg(sr))return k.resolve(sr);var xr=this,Nr=xr.db,Mr=sr.status==="success",br=wr.genSessionByMsg(sr),yr=!!sr.isLocal;return xr.onUpdateSession(br),Nr.enable?Nr.updateMsg(sr).then(function(Tr){var Br=Nr.updateSession(br),Lr=k.resolve();return Mr&&Tr&&!yr&&(Lr=sr.scene==="superTeam"?Nr.updateSuperTeamRoamingMsgTimetag(Tr.time):Nr.updateRoamingMsgTimetag(Tr.time)),k.all([Br,Lr])}).catch(function(Tr){xr.logger.error("updateMsg error",Tr)}):(Mr&&!yr&&(xr.timetags.roamingMsgs=sr.time),k.resolve(sr))},ur.updateRoamingMsgTimetag=function(sr){var xr=this.db;return xr.enable?xr.updateRoamingMsgTimetag(sr):(this.timetags.roamingMsgs=sr,k.resolve(sr))},ur.checkUserUpdate=function(sr){var xr=this,Nr=sr.from;return xr.logger.info("handleMsg::checkUserUpdate: ",Nr,xr.account),Nr===xr.account?k.resolve():new k(function(Mr){var br=xr.userSet[Nr];if(br){var yr=+br.updateTime,Tr=+sr.userUpdateTime;!isNaN(yr)&&!isNaN(Tr)&&ar.isNumber(yr)&&ar.isNumber(Tr)&&yr<Tr?Br():Mr()}else Br();function Br(){xr.api.getUser({account:Nr,sync:!0,done:function(Lr,Fr){Lr||le(function(){xr.logger.log("user::checkUserUpdate: onupdateuser",Fr&&Fr.account),xr.options.onupdateuser(Fr)},0),Mr()}})}})},ur.processUnsettledMsgs=function(){var sr,xr,Nr=this;g(sr=Nr.unhandledMsgs).call(sr,function(Mr){var br=Mr.msg;switch(Mr.type){case"onMsg":Nr.handleMsg(br);break;case"sendMsg":Nr.msgPromise=Nr.msgPromise.then(function(){return Nr.putMsg(br)});break;case"onBroadcastMsg":Nr.msgPromise=Nr.msgPromise.then(function(){return Nr.putBroadcastMsg(br)})}}),g(xr=Nr.unupdatedMsgs).call(xr,function(Mr){Nr.msgPromise=Nr.msgPromise.then(function(){return Nr.updateMsg(Mr)})}),Nr.resetUnsettledMsgs()},ur.onTeamNotificationMsg=function(sr){var xr=sr.attach,Nr=xr.type,Mr=sr.from,br=sr.to,yr=sr.time,Tr=xr.team,Br=xr.account,Lr=xr.accounts;switch(Nr){case"updateTeam":return Tr.updateTime=yr,this.onUpdateTeam(Tr);case"addTeamMembers":return this.onAddTeamMembers(sr,Tr,Lr);case"removeTeamMembers":return this.onRemoveTeamMembers(Tr,br,Lr);case"acceptTeamInvite":return this.onAddTeamMembers(sr,Tr,[Mr]);case"passTeamApply":return this.onAddTeamMembers(sr,Tr,[Br]);case"addTeamManagers":return this.updateTeamManagers(sr,br,Lr,!0,yr);case"removeTeamManagers":return this.updateTeamManagers(sr,br,Lr,!1,yr);case"leaveTeam":return this.onRemoveTeamMembers(Tr,br,[Mr]);case"dismissTeam":return this.onDismissTeam(br,yr);case"transferTeam":return this.transferTeam(sr,Tr,Mr,Br);case"updateTeamMute":return this.onUpdateTeamMembersMute(sr,Tr,[Br],xr.mute);case"updateSuperTeam":return Tr.updateTime=yr,this.onUpdateSuperTeam(Tr);case"acceptSuperTeamInvite":return this.onAddSuperTeamMembers(sr,Tr,[sr.from]);case"addSuperTeamMembers":return this.onAddSuperTeamMembers(sr,Tr,Lr);case"passSuperTeamApply":return this.onAddSuperTeamMembers(sr,Tr,[Br]);case"removeSuperTeamMembers":return this.onRemoveSuperTeamMembers(Tr,br,Lr);case"leaveSuperTeam":return this.onRemoveSuperTeamMembers(Tr,br,[Mr]);case"dismissSuperTeam":return this.onDismissSuperTeam(br,yr);case"transferSuperTeam":return this.transferSuperTeam(sr,Tr,Mr,Br);case"addSuperTeamManagers":return this.updateSuperTeamManagers(sr,br,Lr,!0,yr);case"removeSuperTeamManagers":return this.updateSuperTeamManagers(sr,br,Lr,!1,yr);case"updateSuperTeamMembersMute":return this.onUpdateSuperTeamMembersMute(sr,Tr,Lr,xr.mute)}},ur.onAddSuperTeamMembers=function(sr,xr,Nr){var Mr=this.db,br=Cr.assembleMembers(xr,Nr);sr.attach.members=br;var yr={team:xr,accounts:Nr,members:br};if(this.logger.info("team::onAddSuperTeamMembers: ".concat(yr.team.teamId,", "),yr.accounts),this.options.onAddSuperTeamMembers(ar.simpleClone(yr)),Mr.enable){var Tr=Mr.putSuperTeamMembers(br),Br=Mr.putSuperTeam(xr);return k.all([Tr,Br])}},ur.onRemoveSuperTeamMembers=function(sr,xr,Nr){var Mr=this.db,br={team:sr,teamId:xr,accounts:Nr};if(this.logger.info("team::onRemoveSuperTeamMembers: ".concat(xr,", "),br.accounts),this.options.onRemoveSuperTeamMembers&&this.options.onRemoveSuperTeamMembers(ar.simpleClone(br)),this.mySuperTeamMembersMap&&this.mySuperTeamMembersMap[xr]&&this.mySuperTeamMembersMap[xr].followAccountIds){var yr=this.mySuperTeamMembersMap[xr].followAccountIds;if(y(yr).call(yr,function(Fr){return Fe(Nr).call(Nr,Fr)}).length>0){this.mySuperTeamMembersMap[xr].followAccountIds=y(yr).call(yr,function(Fr){return!Fe(Nr).call(Nr,Fr)});var Tr=this.mySuperTeamMembersMap[xr];this.db.enable&&this.db.updateSuperTeamMember(Tr),this.mergeMySuperTeamMembers(Tr),this.onUpdateSuperTeamMember(Tr)}}if(sr&&Mr.enable){if($(Nr).call(Nr,this.account)===-1){var Br=Mr.removeSuperTeamMembersByAccounts(xr,Nr),Lr=k.resolve();return sr&&(Lr=Mr.putSuperTeam(sr)),k.all([Br,Lr])}return Mr.leaveSuperTeam(xr)}},ur.onDismissSuperTeam=function(sr,xr){var Nr=this.db,Mr={teamId:sr};if(this.logger.info("team::onDismissSuperTeam:",sr),this.options.onDismissSuperTeam(Mr),Nr.enable)return Nr.dismissSuperTeam(sr,xr)},ur.onAddTeamMembers=function(sr,xr,Nr){var Mr=this,br=Mr.db,yr=xr.teamId,Tr=hr.assembleMembers(xr,Nr);sr.attach.members=Tr;var Br={team:xr,accounts:Nr,members:Tr};if(Mr.logger.info("team::onAddTeamMembers: ",yr,Nr),$(Nr).call(Nr,Mr.account)>-1&&Mr.mergeMyTeamMembers(y(Tr).call(Tr,function(qr){return qr.account===Mr.account})),Mr.options.onAddTeamMembers(ar.simpleClone(Br)),br.enable){var Lr,Fr=br.putTeam(xr);return $(Nr).call(Nr,Mr.account)>-1?Lr=br.putTeamMembers(Tr):Mr.logger.log("team::onAddTeamMembers: user join team",yr),k.all([Lr,Fr])}},ur.onRemoveTeamMembers=function(sr,xr,Nr){var Mr=this.db,br={team:sr,teamId:xr,accounts:Nr};if(this.logger.info("team::onRemoveTeamMembers: ".concat(xr),Nr),this.options.onRemoveTeamMembers&&this.options.onRemoveTeamMembers(ar.simpleClone(br)),this.myTeamMembersMap&&this.myTeamMembersMap[xr]&&this.myTeamMembersMap[xr].followAccountIds){var yr=this.myTeamMembersMap[xr].followAccountIds;if(y(yr).call(yr,function(Fr){return Fe(Nr).call(Nr,Fr)}).length>0){this.myTeamMembersMap[xr].followAccountIds=y(yr).call(yr,function(Fr){return!Fe(Nr).call(Nr,Fr)});var Tr=this.myTeamMembersMap[xr];this.db.enable&&this.db.updateTeamMember(Tr),this.mergeMyTeamMembers(Tr),this.onUpdateTeamMember(Tr)}}if(sr&&Mr.enable){if($(Nr).call(Nr,this.account)===-1){var Br=Mr.removeTeamMembersByAccounts(xr,Nr),Lr=k.resolve();return sr&&(Lr=Mr.putTeam(sr)),k.all([Br,Lr])}return Mr.leaveTeam(xr)}},ur.updateTeamManagers=function(sr,xr,Nr,Mr,br){var yr=this.db,Tr=sr.attach.members=i(Nr).call(Nr,function(Vr){return{id:hr.genId(xr,Vr),type:Mr?"manager":"normal",updateTime:br,account:Vr}}),Br={teamId:""+xr,memberUpdateTime:br};sr.attach.team=Br;var Lr={team:Br,accounts:Nr,isManager:Mr,members:Tr};if(this.logger.info("team::updateTeamManagers:",xr,Nr,Mr),this.options.onUpdateTeamManagers(ar.simpleClone(Lr)),yr.enable){var Fr=yr.updateTeam(Br),qr=yr.updateTeamManagers(xr,Nr,Mr,br);return k.all([Fr,qr])}},ur.updateSuperTeamManagers=function(sr,xr,Nr,Mr,br){var yr=this.db,Tr=sr.attach.members=i(Nr).call(Nr,function(Vr){return{id:hr.genId(xr,Vr),teamId:xr,account:Vr,type:Mr?"manager":"normal",updateTime:br}}),Br={teamId:""+xr,memberUpdateTime:br};sr.attach.team=Br;var Lr={team:Br,accounts:Nr,isManager:Mr,members:Tr};if(this.logger.info("team::updateSuperTeamManagers:",xr,Nr,Mr),this.options.onUpdateSuperTeamManagers(ar.simpleClone(Lr)),yr.enable){var Fr=yr.updateSuperTeam(Br),qr=yr.updateSuperTeamMembers(Tr);return k.all([Fr,qr])}},ur.onDismissTeam=function(sr,xr){var Nr=this.db,Mr={teamId:sr};if(this.logger.info("team::onDismissTeam:",sr),this.options.onDismissTeam(Mr),Nr.enable)return Nr.dismissTeam(sr,xr)},ur.transferTeam=function(sr,xr,Nr,Mr){var br=this.db,yr=xr.teamId,Tr=xr.memberUpdateTime,Br={id:hr.genId(yr,Nr),type:"normal",updateTime:Tr},Lr={id:hr.genId(yr,Mr),type:"owner",updateTime:Tr};sr.attach.members=[Br,Lr];var Fr={team:xr,from:Br,to:Lr};if(this.logger.info("team::transferTeam: from to",yr,Nr,Mr),this.options.onTransferTeam(ar.simpleClone(Fr)),br.enable)return br.transferTeam(xr,Nr,Mr)},ur.transferSuperTeam=function(sr,xr,Nr,Mr){var br=this.db,yr=xr.teamId,Tr=xr.memberUpdateTime,Br={teamId:yr,type:"normal",account:Nr,updateTime:Tr},Lr={teamId:yr,type:"owner",account:Mr,updateTime:Tr};sr.attach.members=[Br,Lr];var Fr={team:xr,from:Br,to:Lr};if(this.logger.info("team::transferSuperTeam: from to ",yr,Nr,Mr),this.options.onTransferSuperTeam(ar.simpleClone(Fr)),br.enable)return br.transferSuperTeam(xr,Br,Lr)},ur.onUpdateTeamMembersMute=function(sr,xr,Nr,Mr){var br=this.db,yr=i(Nr).call(Nr,function(Fr){return{id:hr.genId(xr.teamId,Fr),account:Fr,teamId:xr.teamId,mute:Mr,updateTime:xr.memberUpdateTime}});sr.attach.members=yr;var Tr={team:xr,accounts:Nr,members:yr,mute:Mr};if(this.logger.info("team::onUpdateTeamMembersMute:",xr.teamId,Nr,Mr),this.options.onUpdateTeamMembersMute(ar.simpleClone(Tr)),br.enable){var Br=br.updateTeamMembers(yr),Lr=br.putTeam(xr);return k.all([Br,Lr])}},ur.onUpdateSuperTeamMembersMute=function(sr,xr,Nr,Mr){var br=this.db,yr=i(Nr).call(Nr,function(Fr){return{id:Cr.genId(xr.teamId,Fr),account:Fr,teamId:xr.teamId,mute:Mr,updateTime:xr.memberUpdateTime}});sr.attach.members=yr;var Tr={team:xr,accounts:Nr,members:yr,mute:Mr};if(this.logger.info("team::onUpdateSuperTeamMembersMute:",xr.teamId,Nr,Mr),this.options.onUpdateSuperTeamMembersMute(ar.simpleClone(Tr)),br.enable){var Br=br.updateSuperTeamMembers(yr),Lr=br.putSuperTeam(xr);return k.all([Br,Lr])}},ur.onHistoryMsgs=function(sr){sr.error||(sr.obj.msgs=this.message.reverseMsgs(sr.content.msgs))},ur.onmsgFtsInServer=function(sr){if(!sr.error){var xr=this.message.reverseMsgs(sr.content.msgs);sr.obj.msgs=xr,sr.content.msgs=xr}},ur.isFilterMsgs=function(sr){return!!y(sr[0])},ur.splitMsgs=function(sr,xr,Nr,Mr){g(sr).call(sr,function(br){if(y(br))Mr.push(br);else switch(br.scene){case"p2p":xr.push(br);break;case"team":Nr.push(br)}})},ur.markMsgRead=function(sr,xr){if(ar.isArray(sr)||(sr=[sr]),this.db.enable||this.options.autoMarkRead||xr){var Nr=i(sr).call(sr,function(Mr){return{flag:"msg",idServer:Mr.idServer,scene:Mr.scene,filter:y(Mr),type:Mr.type,attachType:Mr.attach&&Mr.attach.type}});this.msgAckBufferManager.add(Nr)}},ur.markSysMsgRead=function(sr,xr){if(ar.isArray(sr)||(sr=[sr]),this.db.enable||this.options.autoMarkRead||xr){var Nr=i(sr).call(sr,function(Mr){return{flag:"systemMsg",idServer:Mr.idServer,scene:Mr.scene,filter:y(Mr),type:Mr.type}});this.msgAckBufferManager.add(Nr)}},ur.handleMsgsAck=function(sr){var xr,Nr=this,Mr={p2pSysMsgs:{sid:7,cid:3,msgs:[]},p2pMsgs:{sid:7,cid:2,msgs:[]},superTeamSysMsgs:{sid:21,cid:19,msgs:[]},teamMsgs:{sid:8,cid:3,msgs:[]},filterSysMsgs:{sid:101,cid:3,msgs:[]},filterMsgs:{sid:101,cid:2,msgs:[]},netcallMsgs:{sid:9,cid:11,msgs:[]}};g(sr).call(sr,function(br){/^(netcallBill|netcallMiss|netcallReject)$/.test(br.attachType)?Mr.netcallMsgs.msgs.push(br):y(br)?br.flag==="systemMsg"?Mr.filterSysMsgs.msgs.push(br):Mr.filterMsgs.msgs.push(br):br.flag!=="systemMsg"?br.scene==="p2p"?Mr.p2pMsgs.msgs.push(br):br.scene==="team"&&Mr.teamMsgs.msgs.push(br):br.scene==="superTeam"?Mr.superTeamSysMsgs.msgs.push(br):Mr.p2pSysMsgs.msgs.push(br)}),g(xr=L(Mr)).call(xr,function(br){return Nr.doMarkMsgsRead(Mr[br].sid,Mr[br].cid,Mr[br].msgs)})},ur.doMarkMsgsRead=function(sr,xr,Nr){var Mr;Nr&&Nr.length&&(this.logger.log("markMsgRead::batchMarkRead",sr,xr,Nr),y(Mr=i(Nr).call(Nr,function(br){return br.idServer})).call(Mr,function(br){var yr=ie(br);return!isNaN(yr)}).length>0?this.sendCmd("batchMarkRead",{sid:sr,cid:xr,ids:i(Nr).call(Nr,function(br){return br.idServer})}):this.logger.log("markMsgRead::batchMarkRead","idServer is not number. ignore"))}},function(t,r,e){var n=e(51),g=e(10),y=e(2),i=e(5),k=e(15),L=e(3),$=e(34),V=e(52),z=e(53),re=e(54),oe=e(55),le=e(42);function ue(kt,At){var ze=i(kt);if(V){var Et=V(kt);At&&(Et=k(Et).call(Et,function(cr){return z(kt,cr).enumerable})),ze.push.apply(ze,Et)}return ze}function ie(kt){for(var At=1;At<arguments.length;At++){var ze,Et,cr=arguments[At]!=null?arguments[At]:{};At%2?y(ze=ue(Object(cr),!0)).call(ze,function(er){n(kt,er,cr[er])}):re?oe(kt,re(cr)):y(Et=ue(Object(cr))).call(Et,function(er){le(kt,er,z(cr,er))})}return kt}var ae=e(37).fn,Fe=e(784),de=e(786);function Ie(kt,At,ze){var Et=this,cr=this.timetags&&this.timetags.sync;this.db.enable&&cr&&At&&this.db.getMsgByIdClient(kt).then(function(er){if(er&&!(er.commentTimetag&&er.commentTimetag<=cr&&er.time<=cr)){if(er.commentTimetag=At.time,er.comments=er.comments||[],ze){var or;er.comments=k(or=er.comments).call(or,function(ur){return ur.body!==At.body||ur.from!==At.from})}else{for(var dr,lr=0;lr<er.comments.length;lr++)if(er.comments[lr].from===At.from&&er.comments[lr].body===At.body){er.comments[lr]=At,dr=!0;break}dr||er.comments.push(At)}var nr={idClient:er.idClient,comments:er.comments,commentTimetag:er.commentTimetag};Et.db.updateMsg(nr)}})}function Ve(kt){kt.scene=this.message.sceneReverseMap[+kt.scene]||kt.scene,kt.time=+kt.time}ae.processMsgExtend=function(kt){switch(kt.cmd){case"getThreadMsgs":this.onGetThreadMsgs(kt);break;case"getMsgsByIdServer":this.onGetMsgsByIdServer(kt);break;case"addQuickComment":this.changeQuickComment(kt);break;case"deleteQuickComment":this.changeQuickComment(kt,!0);break;case"onQuickComment":case"syncAddQuickComment":this.onQuickComment(kt);break;case"onDeleteQuickComment":case"syncDeleteQuickComment":this.onQuickComment(kt,!0);break;case"getQuickComments":this.getQuickComments(kt);break;case"addCollect":case"updateCollect":this.addCollect(kt);break;case"deleteCollects":this.deleteCollects(kt);break;case"getCollects":this.getCollects(kt);break;case"addStickTopSession":case"syncAddStickTopSession":this.onChangeStickTopSession(kt,"add");break;case"updateStickTopSession":case"syncUpdateStickTopSession":this.onChangeStickTopSession(kt,"update");break;case"deleteStickTopSession":case"syncDeleteStickTopSession":this.onChangeStickTopSession(kt,"delete");break;case"addMsgPin":case"onAddMsgPin":case"syncAddMsgPin":this.pinMsgChange(kt,"add");break;case"updateMsgPin":case"onUpdateMsgPin":case"syncUpdateMsgPin":this.pinMsgChange(kt,"update");break;case"deleteMsgPin":case"onDeleteMsgPin":case"syncDeleteMsgPin":this.pinMsgChange(kt,"delete");break;case"getMsgPins":this.getMsgPins(kt)}},ae.onGetThreadMsgs=function(kt){if(!kt.error){var At;kt.obj.msgs=this.message.reverseMsgs(kt.content.msgs),kt.obj.threadMsg=g(At=this.message).call(At,kt.content.threadMsg);var ze=kt.content.threadMsgsMeta||{};kt.obj.total=ze.total,kt.obj.timetag=ze.lastMsgTime}},ae.onGetMsgsByIdServer=function(kt){kt.error||(kt.obj.msgs=this.message.reverseMsgs(kt.content.msgs))},ae.changeQuickComment=function(kt,At){kt.error||(kt.obj.comment.time=kt.content.timetag,kt.obj.comment=g(Fe).call(Fe,kt.obj.comment),Ve.call(this,kt.obj.msg),Ie.call(this,kt.obj.msg.idClient,kt.obj.comment,At))},ae.onQuickComment=function(kt,At){if(kt.content){var ze=kt.content,Et=ze.comment,cr=ze.msg;Et&&cr&&(Ve.call(this,cr),Et=g(Fe).call(Fe,Et),At?this.options.onDeleteQuickComment(kt.content.msg,Et):this.options.onQuickComment(kt.content.msg,Et),Ie.call(this,cr.idClient,Et,At))}},ae.getQuickComments=function(kt){var At,ze=this;if(!kt.error){var Et=kt.obj.idMap,cr=kt.obj.indexMap,er=kt.content&&kt.content.commentRes||[];y(er).call(er,function(or){var dr=[],lr=ze.parser.unserializeMap.comment;if(+or.modify==1)try{dr=JSON.parse(or.detail)}catch(ur){ze.logger.warn("getQuickComments parse detail error",ur)}if(y(dr).call(dr,function(ur,ar){var gr,pr={};y(gr=i(ur)).call(gr,function(hr){pr[lr[hr]]=ur[hr]}),pr=g(Fe).call(Fe,pr),dr[ar]=pr}),or.timestamp=+or.timestamp,Et[or.idClient]){var nr={idClient:or.idClient,commentTimetag:or.timestamp};Et[or.idClient].commentTimetag=or.timestamp,+or.modify==1&&(Et[or.idClient].comments=dr,nr.comments=dr),ze.db.enable&&ze.db.updateMsg(nr)}else Et[or.idClient]={idServer:or.idServer,idClient:or.idClient,comments:dr,commentTimetag:or.timestamp,scene:ze.message.sceneReverseMap[or.scene]||or.scene}}),kt.obj=[],y(At=i(cr)).call(At,function(or){kt.obj[cr[or]]=Et[or]})}},ae.addCollect=function(kt){kt.error||(kt.obj.collect=g(de).call(de,kt.content.collect))},ae.deleteCollects=function(kt){kt.error||(kt.obj.deleteNum=kt.content.deleteNum)},ae.getCollects=function(kt){if(!kt.error){var At=[],ze=kt.content.collectList||[];y(ze).call(ze,function(Et){At.push(g(de).call(de,Et))}),kt.obj.collectList=At,kt.obj.total=kt.content.total}},ae.onChangeStickTopSession=function(kt,At){var ze=this;if(!kt.error){var Et=kt.content.stickTopSession||kt.obj.stickTopSession||{},cr=kt.content.timetag||+Et.updateTime,er=Et.id.split("|");er[0]==="super_team"&&(er[0]="superTeam"),Et={id:er.join("-"),scene:er[0],to:er[1],topCustom:Et.topCustom||""},At==="delete"?Et.isTop=!1:At==="add"&&(Et.isTop=!0),Et=this.onUpdateSession(Et),kt.obj&&(kt.obj.stickTopSession=Et),this.db.enable&&(this.db.updateSession(Et).then(function(or){or||ze.db.putSession(Et)}),this.db.updateTimetag("stickTopSessions",cr))}},ae.pinMsgChange=function(kt,At){var ze=this;if(!kt.error){kt.content=kt.content||{};var Et=this,cr=this.db,er=kt.obj&&kt.obj.msg,or=kt.content.msg||er||{},dr=kt.content.pinTag||kt.obj.pinTag,lr=kt.content.timetag||+dr.updateTime,nr=L.resolve();Ve.call(this,or),cr.enable&&(nr=cr.getMsgByIdClient(or.idClient)),dr.createTime&&(dr.createTime=+dr.createTime),dr.updateTime&&(dr.updateTime=+dr.updateTime),nr.then(function(ur){return or=ur||or,ur?or=ur:or.sessionId=or.scene+"-"+ze.message.Message.getMsgTarget(or,ze.account),er?(kt.obj.msg=or,kt.obj.pinTag=dr):ze.options.onPinMsgChange({msg:or,pinTag:dr},At),function(){cr.enable&&cr[At==="delete"?"deleteMsgPin":"putMsgPin"](ie(ie({},or),{},{pinFrom:dr.pinFrom,pinCustom:dr.pinCustom})).then(function(){var ar="pin-"+or.sessionId,gr=Et.timetags.sync;return cr.getTimetag(ar).then(function(pr){return pr>gr?cr.updateTimetag(ar,lr):L.resolve()})}).catch(function(ar){Et.logger.error("msgExtend::pinMsgChange:error",ar)})}(),L.resolve}).then(function(){}),kt.promise=nr}},ae.getMsgPins=function(kt){var At=this;if(!kt.error){var ze=this.db,Et=kt.content||{};if(Et.pins=Et.pins||[],Et.modify){var cr,er=[];ze.enable&&(ze.updateTimetag("pin-"+kt.obj.id,Et.timetag),y(cr=Et.pins).call(cr,function(or){or.sessionId=kt.obj.id,er.push(ze.getMsgByIdClient(or.idClient))})),kt.promise=L.all(er).then(function(or){var dr;y(dr=Et.pins).call(dr,function(lr,nr){or[nr]?$(lr,or[nr]):(lr.sessionId=kt.obj.id,Ve.call(At,lr))}),kt.obj.pins=Et.pins,ze.enable&&ze.deleteMsgPins(kt.obj.id).then(function(){return ze.putMsgPins(Et.pins)}).catch(function(lr){At.logger.error("msgExtend::getMsgPins:change db error",lr)})})}else ze.enable?(ze.updateTimetag("pin-"+kt.obj.id,Et.timetag),kt.promise=ze.getMsgPins(kt.obj.id).then(function(or){kt.obj.pins=or||[]})):kt.obj.pins=[]}}},function(t,r,e){var n=e(843);t.exports=n},function(t,r,e){e(844);var n=e(14);t.exports=n.Number.isInteger},function(t,r,e){e(1)({target:"Number",stat:!0},{isInteger:e(845)})},function(t,r,e){var n=e(30),g=Math.floor;t.exports=Number.isInteger||function(y){return!n(y)&&isFinite(y)&&g(y)===y}},function(t,r,e){var n=e(127),g=e(3),y=e(2),i=e(4),k=["time","from"],L=e(37).fn,$=e(0);L.onOfflineMsgReceipts=function(V){var z,re=this,oe=re.db,le=V.content.msgReceipts,ue=[],ie=g.resolve();this.logger.info("onOfflineMsgReceipts",le),y(le).call(le,function(ae){z={id:"p2p-"+ae.from,msgReceiptTime:+ae.time},re.cacheSyncedSession(z)}),re.syncResult.msgReceipts=ue,oe.enable&&(ie=oe.updateMsgReceiptsTimetag(V.content.timetag)),ie.cmd=ue,re.syncPromiseArray.push(ie)},L.shouldUpdateSessionFromMsgReceipt=function(V,z){return!V||!V.msgReceiptServerTime||z.time>V.msgReceiptServerTime},L.genSessionFromMsgReceipt=function(V,z){var re=z.time,oe={id:z.sessionId,msgReceiptTime:re,msgReceiptServerTime:re};return V&&V.id===z.sessionId&&(oe=$.merge({},V,oe)),V&&V.updateTime||(oe.updateTime=re),oe},L.onMsgReceipt=function(V){var z=this,re=z.db,oe=V.content.msgReceipt;oe.time=+oe.time;var le=oe.idClient,ue=g.resolve();re.enable&&le&&(ue=re.getMsgByIdClient(le)),this.logger.info("onMsgReceipt::",oe),ue.then(function(ie){if(ie){if(!ie.idServer)return void(z.msgReceiptTasks[le]=oe);ie.time}else oe.time;oe.msgReceiptTime=oe.time,oe.sessionId="p2p-".concat(oe.from),z.updateSessionMsgReceiptTime(oe),oe.time,oe.from;var ae=n(oe,k);z.options.onMsgReceipts([ae])})},L.resolveMsgReceiptTask=function(V){var z=this.msgReceiptTasks[V.idClient];z&&(z.msgReceiptTime=V.time,this.updateSessionMsgReceiptTime(z))},L.updateSessionMsgReceiptTime=function(V){var z=this.db,re={id:"p2p-"+V.from,msgReceiptTime:V.msgReceiptTime,msgReceiptServerTime:V.time};(this.getSessionInCache(re.id)||{}).msgReceiptTime>=re.msgReceiptTime?this.logger.warn("receive old msgReceiptTime",V):(z.enable&&z.putSession(re),this.onUpdateSession(re))},L.onSendMsgReceipt=function(V){var z;if(!V.error)if(V.obj&&V.obj.msgReceipt){var re=V.obj.msgReceipt,oe=+re.time,le=+V.content.msgReceipt.time,ue=this.getSessionInCache("p2p-"+re.to);ue?(this.logger.info(i(z="sendMsgReceipt on:: param time ".concat(oe,", res time ")).call(z,le)),ue.msgReceiptSendTime=Math.min(oe,le)):this.logger.info("sendMsgReceipt on:: session is undefined or logically deleted, failed to send read receipt")}else this.logger.info("sendMsgReceipt on:: origin msg is missing, it maybe timeout")},L.shouldSendMsgReceipt=function(V){if(V&&V.scene==="p2p"&&V.status==="success"){var z=this.getSessionInCache(V.sessionId);if(z){var re=z.msgReceiptSendTime;return!re||re<V.time}}return!1},L.isMsgRemoteRead=function(V){if(V&&V.scene==="p2p"&&V.flow==="out"&&V.status==="success"){var z=this.getSessionInCache(V.sessionId);if(z&&z.msgReceiptTime)return V.time<=z.msgReceiptTime}return!1}},function(t,r,e){var n=e(60),g=e(61),y=e(56),i=e(10),k=e(2),L=e(4),$=e(11),V=e(3),z=e(93),re=e(125),oe=e(5),le=e(15),ue=e(43),ie=e(9),ae=e(23),Fe=e(95),de=e(68),Ie=e(78),Ve=e(64),kt=e(28);function At(ar,gr){var pr=Ie!==void 0&&Ve(ar)||ar["@@iterator"];if(!pr){if(kt(ar)||(pr=function(_r,Ar){var Er;if(_r){if(typeof _r=="string")return ze(_r,Ar);var sr=ie(Er=Object.prototype.toString.call(_r)).call(Er,8,-1);if(sr==="Object"&&_r.constructor&&(sr=_r.constructor.name),sr==="Map"||sr==="Set")return de(_r);if(sr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sr))return ze(_r,Ar)}}(ar))||gr&&ar&&typeof ar.length=="number"){pr&&(ar=pr);var hr=0,Cr=function(){};return{s:Cr,n:function(){return hr>=ar.length?{done:!0}:{done:!1,value:ar[hr++]}},e:function(_r){throw _r},f:Cr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wr,Sr=!0,mr=!1;return{s:function(){pr=pr.call(ar)},n:function(){var _r=pr.next();return Sr=_r.done,_r},e:function(_r){mr=!0,wr=_r},f:function(){try{Sr||pr.return==null||pr.return()}finally{if(mr)throw wr}}}}function ze(ar,gr){(gr==null||gr>ar.length)&&(gr=ar.length);for(var pr=0,hr=new Array(gr);pr<gr;pr++)hr[pr]=ar[pr];return hr}var Et=e(37).fn,cr=e(161),er=e(162),or=e(0),dr=e(109).EMSyncType;function lr(ar,gr){return nr.apply(this,arguments)}function nr(){return(nr=g(n.mark(function ar(gr,pr){var hr,Cr,wr,Sr,mr,_r,Ar,Er,sr,xr,Nr,Mr,br,yr=this;return n.wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(wr=(Cr=this).db,Sr=[],k(gr).call(gr,function(Br){yr.revokeMsgUniqueCheck(Br.idClient),Sr.push(Br.idClient)}),Cr.options.rollbackDelMsgUnread){Tr.next=14;break}return Tr.next=7,wr.deleteMsg(Sr);case 7:if(Tr.t0=Tr.sent,Tr.t0){Tr.next=10;break}Tr.t0=[];case 10:return mr=Tr.t0,mr=Object.prototype.toString.call(mr)==="[object Array]"?mr:[mr],Cr.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: ".concat(mr.length," rows")),Tr.abrupt("return");case 14:return _r=!1,Ar=Cr.options.cbUpdateSession||ae(hr=Cr.updateSessionInDbWithNotify).call(hr,Cr),Er=Cr.getSessionInCache(pr)||{id:pr},sr=Er.lastMsg||{},Fe(Sr).call(Sr,sr.idClient)&&(_r=!0),Cr.logger.info("msg::_deleteMsgSelfBatchInDb session change before:",pr,_r,Er.unread),Tr.next=22,wr.deleteMsg(Sr);case 22:if(Tr.t1=Tr.sent,Tr.t1){Tr.next=25;break}Tr.t1=[];case 25:if(xr=Tr.t1,xr=Object.prototype.toString.call(xr)==="[object Array]"?xr:[xr],Cr.logger.info("msg::_deleteMsgSelfBatchInDb affect:",xr.length," rows"),!_r){Tr.next=34;break}return Tr.next=31,wr.getMsgs({sessionId:pr,limit:1});case 31:Nr=Tr.sent,sr=Nr&&Nr[0]?Nr[0]:null,Er.lastMsg=sr;case 34:if(Mr=!1,Er&&Er.unread&&(br=Er&&Er.ack||0,k(xr).call(xr,function(Br){var Lr=!0;if(Br.type==="notification")try{Lr=Cr.options.shouldCountNotifyUnread(Br)}catch(Fr){throw Cr.logger.error("userOption:shouldCountNotifyUnread function error",Fr),Fr}Lr&&br<Br.time&&Br.flow==="in"&&(Er.unread=Er.unread>0?Er.unread-1:0,Mr=!0)})),!_r&&!Mr){Tr.next=39;break}return Cr.logger.info("msg::_deleteMsgSelfBatchInDb session change after:",pr,Er.unread),Tr.abrupt("return",Ar(Er));case 39:case"end":return Tr.stop()}},ar,this)}))).apply(this,arguments)}function ur(ar,gr){gr=gr||new Date().getTime();var pr=this.db,hr=this.getSessionInCache(ar),Cr=this.options.rollbackClearMsgsUnread!==!1,wr=[];return pr.enable&&wr.push(pr.deleteMsgsBySessionId({sessionId:ar,end:gr})),Cr&&hr&&(hr=this.mergeSession({id:hr.id,unread:0,lastMsg:null,unreadMsgs:[]}),hr=this.onUpdateSession(hr)),pr.enable&&Cr&&hr&&wr.push(pr.updateSession(hr)),V.all(wr)}Et.onDeleteMsg=function(ar){var gr=this.db;if(delete ar.obj.sysMsg,!ar.error){var pr=ar.obj.msg;ar.promise=this.deleteLocalMsg(pr).then(function(){if(gr.enable){var hr=pr.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";gr.getTimetag(hr).then(function(Cr){Cr=Cr||0,y()+1>=Cr&&gr.updateTimetag(hr,y()+1)})}})}},Et.onMsgDeleted=function(ar,gr){var pr=this;if(!pr.canHandleDeletedMsgInSyncing)return pr.logger.info("msg::onMsgDeleted:is in syncing ..."),void pr.unhandledSysMsgsForDeletedMsgs.push({packet:ar,isSuperTeam:gr});if(!ar.error){var hr=pr.db,Cr=i(cr).call(cr,ar.content.sysMsg);Cr=pr.processDeleteMsgSysMsg(Cr),gr||pr.markSysMsgRead(Cr),pr.deleteLocalMsg(Cr.msg).then(function(){if(hr.enable){var wr=gr?"deleteSuperTeamMsg":"deleteMsg";hr.updateTimetag(wr,Cr.time+1)}pr.handleSysMsg(Cr)})}},Et.processDeleteMsgSysMsg=function(ar){var gr;return ar.msg={},k(gr=["scene","from","to"]).call(gr,function(pr){ar.msg[pr]=ar[pr]}),ar.msg.idClient=ar.deletedIdClient,ar.msg.idServer=ar.deletedIdServer,ar.msg.time=ar.deletedMsgTime,ar.msg.fromNick=ar.deletedMsgFromNick,ar.opeAccount=ar.opeAccount||ar.from,ar.msg.opeAccount=ar.opeAccount,this.message.Message.setExtra(ar.msg,this.account),ar},Et.onDeleteMsgOfflineRoaming=function(ar){if(!ar.error){var gr,pr=this,hr=+ar.content.type==1?"offline":"roaming",Cr=cr.reverseSysMsgs(ar.content.sysMsgs,{mapper:function(_r){return pr.processDeleteMsgSysMsg(_r)}}),wr=Cr&&Cr[0]&&Cr[0].scene==="superTeam";pr.logger.info(L(gr="msg::onDeleteMsgOfflineRoaming: on delete ".concat(hr," ")).call(gr,wr?"superTeam":""," idServer deletedIdClient deletedIdClient="),$(Cr).call(Cr,function(_r){var Ar,Er;return L(Ar=L(Er="".concat(_r.idServer,"-")).call(Er,_r.deletedIdServer,"-")).call(Ar,_r.deletedIdClient)})),hr==="offline"&&pr.markSysMsgRead(Cr);var Sr=ar.content.timetag;wr?(pr.timetags.deleteSuperTeamMsg=Sr,pr.syncResult.deleteSuperTeamMsgTimetag=Sr):(pr.timetags.deleteMsg=Sr,pr.syncResult.deleteMsgTimetag=Sr);var mr=pr.putSysMsg(Cr,"offlineSysMsgs").catch(function(_r){return pr.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ",_r),V.reject(_r)});mr.cmd="deleteMsgSysMsgs "+hr,pr.syncPromiseArray.push(mr),pr.syncResult.deleteMsgSysMsgs=pr.syncResult.deleteMsgSysMsgs||[],pr.syncResult.deleteMsgSysMsgs.push({type:hr,sysMsgs:Cr})}},Et.deleteMsgOfflineRoaming=function(ar,gr){if(!ar)return V.resolve();var pr=this;pr.logger.info("msg::deleteMsgOfflineRoaming: ",$(ar).call(ar,function(wr){var Sr;return wr.type+" "+$(Sr=wr.sysMsgs).call(Sr,function(mr){var _r,Ar;return L(_r=L(Ar="".concat(mr.idServer,"-")).call(Ar,mr.deletedIdServer,"-")).call(_r,mr.deletedIdClient)})}),or.secureOutput("session",gr));var hr=pr.db,Cr=[];return k(ar).call(ar,function(wr){var Sr;k(Sr=wr.sysMsgs).call(Sr,function(mr){var _r=pr.deleteLocalMsg(mr.msg,{cbUpdateSession:function(Ar){Ar=pr.mergeSession(Ar),Ar=z(er).call(er,Ar);var Er=or.findObjIndexInArray(gr,{value:Ar.id});if(Er!==-1&&(gr[Er]=or.merge({},gr[Er],Ar)),hr.enable)return hr.updateSession(Ar)}});Cr.push(_r)})}),V.all(Cr).then(function(){hr.enable&&(pr.syncResult.deleteMsgTimetag&&hr.updateTimetag("deleteMsg",pr.syncResult.deleteMsgTimetag),pr.syncResult.deleteSuperTeamMsgTimetag&&hr.updateTimetag("deleteSuperTeamMsg",pr.syncResult.deleteSuperTeamMsgTimetag))})},Et.deleteMsgSelf=function(ar){if(!ar.error){var gr=this.db,pr=ar.obj&&ar.obj.deleteMsgSelfTag;if(pr){var hr=ar.content&&ar.content.timetag;pr.scene=pr.scene+""=="1"?"p2p":"team";var Cr=[this.deleteLocalMsg(pr)];hr<=this.timetags.deleteMsgSelf||(this.timetags.deleteMsgSelf=hr,gr.enable&&Cr.push(gr.updateDeleteMsgSelf(hr))),ar.promise=V.all(Cr)}}},Et.deleteMsgSelfBatch=function(){var ar=g(n.mark(function gr(pr){var hr,Cr,wr,Sr,mr,_r,Ar,Er;return n.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(!pr.error){sr.next=2;break}return sr.abrupt("return");case 2:if(Cr=this,wr=this.db,(Sr=pr.obj&&pr.obj.deleteMsgSelfTags)&&Sr.length>0){sr.next=7;break}return sr.abrupt("return");case 7:if(mr=re(Sr).call(Sr,function(xr,Nr){var Mr=Nr.sessionId;if(xr[Mr]=xr[Mr]||[],xr[Mr].push(Nr),!wr.enable){var br=Cr.getSessionInCache(Mr);br&&br.lastMsg&&Nr&&br.lastMsg.idClient===Nr.idClient&&(br.lastMsg=null,Cr.onUpdateSession(br))}return xr},{}),wr.enable){sr.next=11;break}return k(_r=oe(mr)).call(_r,function(xr){var Nr=mr[xr],Mr=Cr.getSessionInCache(xr);if(Cr.options.rollbackDelMsgUnread&&Mr){var br=Mr.ack||0,yr=le(Nr).call(Nr,function(Tr){var Br=!0;if(Tr.type==="notification")try{Br=Cr.options.shouldCountNotifyUnread(Tr)}catch(Lr){throw Cr.logger.error("userOption:shouldCountNotifyUnread function error",Lr),Lr}return Cr.message.Message.setFlow(Tr,Cr.account),Br&&br<Tr.time&&Tr.flow==="in"});yr.length>0&&Mr.unread&&(Mr.unread=Mr.unread-yr.length>=0?Mr.unread-yr.length:0,Cr.onUpdateSession(Mr))}}),sr.abrupt("return",V.resolve());case 11:Ar=$(hr=oe(mr)).call(hr,function(xr){var Nr=mr[xr];return lr.call(Cr,Nr,xr)}),(Er=pr.content&&pr.content.timetag)<=Cr.timetags.deleteMsgSelf||(Cr.timetags.deleteMsgSelf=Er,Ar.push(wr.updateDeleteMsgSelf(Er))),pr.promise=V.all(Ar);case 15:case"end":return sr.stop()}},gr,this)}));return function(gr){return ar.apply(this,arguments)}}(),Et.onDeleteMsgSelf=function(ar){var gr=this,pr=this.db,hr=ar.content.deleteMsgSelfTag;hr.scene=hr.scene+""=="1"?"p2p":"team",gr.options.onDeleteMsgSelf([hr]),gr.deleteLocalMsg(hr).then(function(){var Cr=hr.deletedTime;return Cr<=gr.timetags.deleteMsgSelf||!pr.enable?V.resolve():(gr.timetags.deleteMsgSelf=Cr,pr.updateDeleteMsgSelf(Cr))}).catch(function(Cr){gr.logger.error("onDeleteMsgSelf error",Cr)})},Et.onDeleteMsgSelfBatch=function(ar){var gr=this;if(!ar.error){var pr={1:"p2p",2:"team"},hr=or.get(ar,"content.deleteMsgSelfTags")||[];k(hr).call(hr,function(wr){var Sr;wr.scene=pr[wr.scene],wr.sessionId=L(Sr="".concat(wr.scene,"-")).call(Sr,gr.message.Message.getMsgTarget(wr,gr.account)),wr.deletedTime=ue(wr.deletedTime),wr.time=ue(wr.time)});var Cr=or.get(ar,"content.deleteMsgSelfTags[0].deletedTime");Cr=ue(Cr)||0,this.options.onDeleteMsgSelf(hr),this.deleteMsgSelfBatch({obj:{deleteMsgSelfTags:hr},content:{timetag:Cr}})}},Et.clearServerHistoryMsgs=function(ar){if(!ar.error){var gr=this.db,pr=ar.obj&&ar.obj.clearMsgsParamsWithSync;if(pr){var hr=(pr.type&&pr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(pr.otherAccid):"team-".concat(pr.toTid),Cr=ar.content&&ue(ar.content.timetag);Cr&&Cr>this.timetags.sessionHistoryMsgsDelete&&(this.timetags.sessionHistoryMsgsDelete=Cr,gr.enable&&gr.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),ur.call(this,hr,Cr)}}},Et.onClearServerHistoryMsgs=function(ar){if(!ar.error){var gr=this.db,pr=ar.content&&ar.content.sessionHistoryMsgsDeleteTag;if(pr){var hr=(pr.type&&pr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(pr.otherAccid):"team-".concat(pr.toTid),Cr=pr.ext,wr=ue(pr.time);this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs([{sessionId:hr,time:wr,ext:Cr}]),wr<=this.timetags.sessionHistoryMsgsDelete||(this.timetags.sessionHistoryMsgsDelete=wr,gr.enable&&gr.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),ur.call(this,hr,wr)}}},Et.syncSessionHistoryMsgsDelete=function(ar){if(!ar.error){var gr=this.db,pr=ar.content&&ar.content.sessionHistoryMsgsDeleteTags;if(pr&&pr.length>0){var hr=$(pr).call(pr,function(wr){return{sessionId:(wr.type&&wr.type.toString()==="2"?"team":"p2p")=="p2p"?"p2p-".concat(wr.otherAccid):"team-".concat(wr.toTid),time:ue(wr.time)}});this.reporterHook.emit("reporter/syncItemComplete",dr.kSyncType4_24),this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs(hr),this.syncResult.clearServerHistoryMsgs=hr;var Cr=0;k(hr).call(hr,function(wr){wr.time>Cr&&(Cr=wr.time)}),gr.enable&&gr.updateTimetag("sessionHistoryMsgsDelete",Cr)}}},Et.syncDeleteMsgSelf=function(ar){var gr=this,pr=this.db,hr=ar.content.deletedMsgs;if(hr&&hr.length!==0){var Cr=[];k(hr).call(hr,function(wr){wr.scene=wr.scene==="1"?"p2p":"team",wr.deletedTime=+wr.deletedTime,wr.time=+wr.time,Cr.push(gr.deleteLocalMsg(wr))}),gr.options.onDeleteMsgSelf(hr),V.all(Cr).then(function(){var wr=ie(hr).call(hr,-1)[0].deletedTime;if(!(gr.timetags.deleteMsgSelf>=wr))return gr.timetags.deleteMsgSelf=wr,pr.enable?pr.updateDeleteMsgSelf(wr):void 0}).catch(function(wr){gr.logger.error("syncDeleteMsgSelf error",wr)})}},Et.deleteLocalMsg=function(){var ar=g(n.mark(function gr(pr,hr){var Cr,wr,Sr,mr,_r,Ar,Er,sr,xr,Nr,Mr,br;return n.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(pr){yr.next=2;break}return yr.abrupt("return");case 2:if(Sr=(wr=this).db,mr=(hr=hr||{}).cbUpdateSession||ae(Cr=wr.updateSessionInDbWithNotify).call(Cr,wr),this.revokeMsgUniqueCheck(pr&&pr.idClient),_r=pr.sessionId||pr.scene+"-"+this.message.Message.getMsgTarget(pr,this.account),Ar=!1,Er=wr.getSessionInCache(_r),sr=!0,pr.type!=="notification"){yr.next=20;break}yr.prev=12,sr=wr.options.shouldCountNotifyUnread(pr),yr.next=20;break;case 16:throw yr.prev=16,yr.t0=yr.catch(12),wr.logger.error("userOption:shouldCountNotifyUnread function error",yr.t0),yr.t0;case 20:if(wr.options.rollbackDelMsgUnread&&Er&&(xr=Er.ack||0,sr&&Er&&xr<pr.time&&pr.from!==wr.account&&Er.unread&&(wr.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: unread",Er.id,Er.unread),Er.unread=Er.unread-1,Ar=!0)),Er&&Er.lastMsg&&Er.lastMsg.idClient==pr.idClient&&(wr.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: lastMsg",Er.id,Er.unread),Er.lastMsg=null,Ar=!0),!Sr.enable){yr.next=49;break}return Nr=null,yr.next=26,Sr.getMsgByIdClient(pr.idClient);case 26:return yr.sent||wr.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg no find in DB",pr),wr.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg ",pr.idClient),yr.next=31,Sr.deleteMsg(pr.idClient);case 31:if(!Er||Er.lastMsg!==null){yr.next=36;break}return yr.next=34,Sr.getMsgs({sessionId:_r,limit:1});case 34:(Mr=yr.sent)&&Mr[0]&&(Nr=Mr[0]);case 36:if(Er||!wr.options.rollbackDelMsgUnread){yr.next=46;break}return wr.logger.info("msgDelete::deleteLocalMsg::Can not find session in cache,will find in DB",_r),yr.next=40,Sr.getSession(_r);case 40:if(br=yr.sent){yr.next=43;break}return yr.abrupt("return");case 43:xr=(Er=br).ack||0,sr&&Er&&xr<pr.time&&pr.flow==="in"&&Er.unread&&(wr.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread",br.id,br.unread),Er.unread=Er.unread-1,Ar=!0);case 46:if(Er&&Er.lastMsg===null&&Nr&&(wr.logger.info("msgDelete::deleteLocalMsg:db.getSessions: lastMsg",_r,Nr),Er.lastMsg=Nr||null,Ar=!0),!Ar){yr.next=49;break}return yr.abrupt("return",mr(Er));case 49:if(Sr.enable||!Ar){yr.next=52;break}return wr.onUpdateSession(Er),yr.abrupt("return");case 52:case"end":return yr.stop()}},gr,this,[[12,16]])}));return function(gr,pr){return ar.apply(this,arguments)}}(),Et.deleteLocalMsgs=function(ar){var gr=this,pr=gr.db;return new V(function(hr,Cr){if(function(wr){var Sr=gr.getSessionInCache(ar.sessionId);if(Sr&&ar.updateSession){var mr=Sr.lastMsg;mr&&(!ar.start&&!ar.end||mr.time>ar.start&&mr.time<ar.end)&&(Sr.lastMsg=null,gr.logger.log("deleteLocalMsgs::delete cacheSession lastMsg done, options is",ar),pr.enable||(gr.onUpdateSession(Sr),wr()))}}(hr),pr.enable)return pr.deleteMsgsBySessionId(ar).then(function(){ar.updateSession&&gr.checkAndUpdateLocalSessionByMsg(ar.sessionId),hr()},function(wr){return Cr(wr)})})},Et.deleteLocalMsgsByTime=function(){var ar=g(n.mark(function gr(pr){var hr,Cr,wr,Sr,mr,_r,Ar,Er,sr,xr,Nr,Mr,br,yr;return n.wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:return Cr=(hr=this).db,Tr.next=4,Cr.getDeletedMsgsCountByTime(pr);case 4:return wr=Tr.sent,Sr=0,mr=[],Tr.next=9,Cr.deleteMsgsByTime(pr);case 9:return pr.deletedone&&pr.deletedone({deletedMsgCount:wr}),Tr.next=12,Cr.getAllSessions();case 12:_r=Tr.sent,Ar=At(_r),Tr.prev=14,Ar.s();case 16:if((Er=Ar.n()).done){Tr.next=47;break}return sr=Er.value,xr=sr.id,Nr=!1,Tr.next=22,Cr.getSession(xr);case 22:if(Mr=Tr.sent){Tr.next=25;break}return Tr.abrupt("continue",45);case 25:return Tr.next=27,Cr.getMsgCountAfterAck({shouldCountNotifyUnread:hr.options.shouldCountNotifyUnread,sessionId:xr,ack:Mr.ack||0});case 27:if(br=Tr.sent,Mr.unread!==br&&(Mr.unread=br,Nr=!0),!(Mr.lastMsg&&Mr.lastMsg.time>pr.start&&Mr.lastMsg.time<pr.end)){Tr.next=39;break}if(pr.start!==0){Tr.next=34;break}Mr.lastMsg=null,Tr.next=38;break;case 34:return Tr.next=36,Cr.getMsgs({sessionId:xr,limit:1});case 36:yr=Tr.sent,Mr.lastMsg=yr&&yr[0]?yr[0]:null;case 38:Nr=!0;case 39:if(!Nr){Tr.next=45;break}return Tr.next=42,Cr.updateSession(Mr);case 42:hr.sessionSet[xr]&&mr.push(Mr),Sr++;case 45:Tr.next=16;break;case 47:Tr.next=52;break;case 49:Tr.prev=49,Tr.t0=Tr.catch(14),Ar.e(Tr.t0);case 52:return Tr.prev=52,Ar.f(),Tr.finish(52);case 55:return hr.onUpdateSessions(mr),Tr.abrupt("return",V.resolve({deletedMsgCount:wr,sessionUpdateCount:Sr}));case 57:case"end":return Tr.stop()}},gr,this,[[14,49,52,55]])}));return function(gr){return ar.apply(this,arguments)}}()},function(t,r,e){var n=e(63),g=e(11),y=e(10),i=e(4),k=e(3),L=e(22),$=e(15),V=e(2),z=e(37).fn,re=e(0),oe=e(161);z.splitSysMsgs=function(le,ue){for(var ie,ae=le.length-1;ae>=0;ae--)ie=le[ae],oe.isCustom(ie)&&(n(le).call(le,ae,1),ue.push(ie))},z.onOfflineSysMsgs=function(le,ue){var ie,ae=this,Fe=g(ie=le.content.sysMsgs).call(ie,function(ze){return ze=y(oe).call(oe,ze),ue&&(ze.filter=!0),ze});Fe=y(Fe).call(Fe),ae.markSysMsgRead(Fe);var de=[];ae.splitSysMsgs(Fe,de);var Ie,Ve=ue?"offlineFilterSysMsgs":"offlineSysMsgs",kt=ue?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(Fe.length){var At=ae.putSysMsg(Fe,"offlineSysMsgs").then(function(ze){var Et;(Fe=ze).length&&(ae.logger.info("sysmsg::onOfflineSysMsgs: ",Ve,Fe.length,Fe&&g(Fe).call(Fe,function(cr){return cr.idServer})),ae.syncResult[Ve]=ae.syncResult[Ve]||[],ae.syncResult[Ve]=i(Et=ae.syncResult[Ve]).call(Et,Fe))}).catch(function(ze){return ae.logger.error("sysMsg::onOfflineSysMsgs: ",ze),k.reject(ze)});At.cmd="sysMsgs",ae.syncPromiseArray.push(At)}de.length&&(ae.logger.info("sysmsg::onOfflineSysMsgs: ",kt,g(de).call(de,function(ze){return ze.idServer})),ae.syncResult[kt]=ae.syncResult[kt]||[],ae.syncResult[kt]=i(Ie=ae.syncResult[kt]).call(Ie,de))},z.onSendSysMsg=function(le,ue){var ie=le.obj||{};ie?(this.completeSysMsg(ie),le.error?ie.status="fail":ie.status="success",ie=y(oe).call(oe,ie),ue&&(le.obj.filter=!0),le.obj=ie):this.logger.warn("onSendSysMsg::no obj")},z.completeSysMsg=function(le){return le.from=this.account,le},z.onSysMsg=function(le,ue){var ie=y(oe).call(oe,le.content.sysMsg);ue&&(ie.filter=!0),this.markSysMsgRead(ie),oe.isCustom(ie)?(this.logger.info("sysmsg::onSysMsg: on customSysMsg"),this.options.oncustomsysmsg(ie)):this.syncing?(this.logger.info("sysmsg::onSysMsg:is in syncing ..."),this.unhandledSysMsgs.push(ie)):this.handleSysMsg(ie)},z.handleSysMsg=function(le){var ue=this,ie=le.type,ae=le.from,Fe=le.serverex;ue.sysMsgPromise=ue.sysMsgPromise.then(function(){return ue.putSysMsg(le,"onSysMsg")}).then(function(de){le=de[0]}).then(function(){if(le){var de,Ie=k.resolve();switch(ie){case"addFriend":de={type:"addFriend",account:ae},Fe&&(de.serverex=Fe),Ie=ue.onFriendRequest(de);break;case"passFriendApply":de={type:"passFriendApply",account:ae},Ie=ue.onFriendRequest(de);break;case"deleteFriend":Ie=ue.onDeleteFriend({account:ae})}return de&&de.friend&&(le.friend=de.friend),Ie}}).then(function(){le&&(ue.logger.info("sysmsg::handleSysMsg: ",ie,re.pickAsString(le,["idServer","deletedIdClient","deletedIdServer"])),L(function(){ue.options.onsysmsg(le)},0))})},z.putSysMsg=function(le,ue){if(re.isArray(le)||(le=[le]),$(le[0]))return k.resolve(le);var ie=this,ae=ie.db,Fe=ae.enable,de=k.resolve(),Ie=[];return(de=(de=de.then(function(){return Fe?ae.putSysMsg(le):le}).then(function(Ve){var kt=[];V(le).call(le,function(At){ie.checkSysMsgUnique(At)&&kt.push(At)}),le=kt,Ie=Fe?Ve:le})).then(function(){return ie.getSysMsgUnread().then(function(Ve){return Ie.length||((Ie=le).backward=!0),ie.updateSysMsgUnread(Ie,Ve,1).then(function(kt){ue==="offlineSysMsgs"&&(ie.syncResult.sysMsgUnread=kt),ue==="onSysMsg"&&ie.onUpdateSysMsgUnread(kt)})})})).then(function(){return le})},z.checkSysMsgUnique=re.genCheckUniqueFunc("idServer"),z.getSysMsgUnread=function(){var le=this,ue=le.db;return new k(function(ie){ue.enable?ue.getSysMsgUnread().then(function(ae){ie(ae)},function(){ie(le.sysMsgUnread)}):ie(le.sysMsgUnread)})},z.updateSysMsgUnread=function(le,ue,ie){if(re.isArray(le)||(le=[le]),!le.length)return k.resolve(ue);ue=ue||{};var ae,Fe=this.db;return V(le).call(le,function(de){(ie>0&&!de.read||ie<0&&de.read)&&(ae=de.type,ue[ae]=(ue[ae]||0)+ie)}),ue=oe.completeUnread(ue),this.sysMsgUnread=ue,Fe.enable&&!le.backward?Fe.updateSysMsgUnread(ue):k.resolve(ue)},z.reduceSysMsgUnread=function(le){var ue=this;return ue.getSysMsgUnread().then(function(ie){return ue.updateSysMsgUnread(le,ie,-1)}).then(function(ie){ue.onUpdateSysMsgUnread(ie)})},z.onUpdateSysMsgUnread=function(le){var ue=this;L(function(){ue.logger.info("sysmsg::onUpdateSysMsgUnread:",le),ue.options.onupdatesysmsgunread(le)},0)},z.updateSysMsg=function(le){var ue=this,ie=ue.db;(ie.enable?ie.updateSysMsg(le):k.resolve(le)).then(function(ae){ue.onUpdateSysMsg(ae)})},z.onUpdateSysMsg=function(le){var ue=this;L(function(){re.isArray(le)||(le=[le]),V(le).call(le,function(ie){ue.logger.info("sysmsg::onUpdateSysMsg:",ie.idServer),ue.options.onupdatesysmsg(ie)})},0)},z.processUnsettledSysMsgs=function(){var le,ue,ie=this;V(le=ie.unhandledSysMsgs).call(le,function(ae){ie.handleSysMsg(ae)}),V(ue=ie.unhandledSysMsgsForDeletedMsgs).call(ue,function(ae){ie.onMsgDeleted(ae.packet,ae.isSuperTeam)}),ie.resetUnsettledSysMsgs()}},function(t,r,e){var n=e(207),g=e(51),y=e(2),i=e(8),k=e(9),L=e(10),$=e(3),V=e(11),z=e(93),re=e(15),oe=e(34),le=e(5),ue=e(4),ie=e(782),ae=e(63),Fe=e(52),de=e(53),Ie=e(54),Ve=e(55),kt=e(42);function At(lr,nr){var ur=le(lr);if(Fe){var ar=Fe(lr);nr&&(ar=re(ar).call(ar,function(gr){return de(lr,gr).enumerable})),ur.push.apply(ur,ar)}return ur}function ze(lr){for(var nr=1;nr<arguments.length;nr++){var ur,ar,gr=arguments[nr]!=null?arguments[nr]:{};nr%2?y(ur=At(Object(gr),!0)).call(ur,function(pr){g(lr,pr,gr[pr])}):Ie?Ve(lr,Ie(gr)):y(ar=At(Object(gr))).call(ar,function(pr){kt(lr,pr,de(gr,pr))})}return lr}var Et=e(37).fn,cr=e(0),er=e(162),or=e(35),dr=e(161);Et.processSession=function(lr){if(!lr.error)switch(lr.cmd){case"getServerSessions":this.onGetServerSessions(lr);break;case"getServerSession":this.onGetServerSession(lr);break;case"updateServerSession":this.onUpdateServerSession(lr)}},Et.onGetServerSessions=function(lr){var nr=this,ur=lr.content&&lr.content.sessionReqTag,ar=lr.content&&lr.content.sessionList,gr=[];y(ar).call(ar,function(pr){var hr,Cr;if(pr.id=pr.id.split("|").join("-"),i(hr=pr.id).call(hr,"super_team")===0&&(pr.id="superTeam"+k(Cr=pr.id).call(Cr,10)),pr.updateTime=+pr.updateTime,pr.lastMsg){var wr=pr.lastMsgType==="1"?"sysMsg":"msg";gr.push(nr.parser.unserialize(JSON.parse(pr.lastMsg),wr).then(function(Sr){var mr;pr.lastMsg=wr==="msg"?L(mr=nr.message).call(mr,Sr):L(dr).call(dr,Sr)}))}}),lr.promise=$.all(gr).then(function(){lr.obj={sessionList:ar,hasMore:ur.hasMore==="1"},ur.minTimestamp&&(lr.obj.minTimestamp=+ur.minTimestamp)})},Et.onGetServerSession=function(lr){var nr,ur=this,ar=lr.content&&lr.content.session;if(ar){var gr;if(ar.id=ar.id.split("|").join("-"),i(nr=ar.id).call(nr,"super_team")===0&&(ar.id="superTeam"+k(gr=ar.id).call(gr,10)),ar.updateTime=+ar.updateTime,ar.lastMsg){var pr=lr.content.session&&lr.content.session.lastMsgType==="1"?"sysMsg":"msg";lr.promise=ur.parser.unserialize(JSON.parse(ar.lastMsg),pr).then(function(hr){var Cr;ar.lastMsg=pr==="msg"?L(Cr=ur.message).call(Cr,hr):L(dr).call(dr,hr),lr.obj=ar})}else lr.obj=ar}},Et.onUpdateServerSession=function(lr){lr.obj={}},Et.onSyncUpdateServerSession=function(lr){var nr,ur=this,ar=this,gr=lr.content&&lr.content.session;if(gr){var pr;gr.id=gr.id.split("|").join("-"),i(nr=gr.id).call(nr,"super_team")===0&&(gr.id="superTeam"+k(pr=gr.id).call(pr,10)),gr.updateTime=+gr.updateTime,gr.lastMsg?ar.parser.unserialize(JSON.parse(gr.lastMsg),"msg").then(function(hr){var Cr;gr.lastMsg=L(Cr=ar.message).call(Cr,hr),ur.options.onSyncUpdateServerSession(cr.simpleClone(gr))}):this.options.onSyncUpdateServerSession(cr.simpleClone(gr))}},Et.mergeSession=function(lr){lr=cr.copyWithNull(lr);var nr=this.sessionSet,ur=lr.id,ar=nr[ur]||{},gr=!1;return er.isComplete(lr)?delete ar.isDeleted:ar.isDeleted&&(gr=!0),nr[ur]=cr.merge(ar,lr),lr=gr?lr:nr[ur],cr.undef(lr.unread)&&(lr.unread=0),lr},Et.mergeSessions=function(lr){var nr=this;return V(lr=lr||[]).call(lr,function(ur){return nr.mergeSession(ur)})},Et.onDeleteSessions=function(lr){var nr;lr.obj=V(nr=lr.obj.sessions).call(nr,function(ur){return er.parse(ur)})},Et.onUpdateSession=function(lr){if(lr){if(lr=this.mergeSession(lr),lr=z(er).call(er,lr),er.isComplete(lr))return this.logger.info("session::onUpdateSession: ".concat(lr.id),lr.id,cr.secureOutput("session",lr)),this.options.onupdatesessions?this.options.onupdatesessions([lr]):this.options.onupdatesession(lr),lr;this.logger.warn("session::onUpdateSession::session is not complete",cr.secureOutput("session",lr))}},Et.onUpdateSessions=function(lr){var nr=this;if(lr){lr=nr.mergeSessions(lr),lr=V(lr).call(lr,function(gr){return z(er).call(er,gr)});var ur=re(lr).call(lr,function(gr){return er.isComplete(gr)}),ar=re(lr).call(lr,function(gr){return!er.isComplete(gr)});if(ar&&ar.length>0&&nr.logger.warn("session::onUpdateSessions::sessions is not complete",V(ar).call(ar,function(gr){return gr.id}),cr.secureOutput("session",ar)),ur.length!==0)return nr.logger.info("session::onUpdateSessions:",cr.secureOutput("session",ur)),nr.options.onupdatesessions?nr.options.onupdatesessions(ur):y(ur).call(ur,function(gr){nr.options.onupdatesession(gr)}),ur;nr.logger.warn("session::onUpdateSessions::completeSessions is empty")}},Et.setCurrSession=function(lr){lr=""+lr,this.currSessionId=lr,this.logger.info("session::setCurrSession:",lr)},Et.resetSessionUnread=function(lr){var nr=lr.id;this.db.enable&&this.db.updateSession({id:nr,unread:0}),!this.options.autoMarkRead&&this.sessionUnreadMsgs&&this.sessionUnreadMsgs[nr]&&(this.markMsgRead(this.sessionUnreadMsgs[nr],!0),this.sessionUnreadMsgs[nr]=[]),this.getSessionInCache(nr)?this.onUpdateSession({id:nr,unread:0}):this.onUpdateSession(ze(ze({},lr),{},{unread:0}))},Et.resetSessionsUnread=function(lr){var nr=this,ur=this.db;ur.enable&&V(lr).call(lr,function(gr){ur.updateSession({id:gr.id,unread:0})});var ar=!this.options.autoMarkRead&&this.sessionUnreadMsgs;lr=V(lr).call(lr,function(gr){return ar&&nr.sessionUnreadMsgs[gr.id]&&(nr.markMsgRead(nr.sessionUnreadMsgs[gr.id],!0),nr.sessionUnreadMsgs[gr.id]=[]),nr.getSessionInCache(gr.id)?{id:gr.id,unread:0}:ze(ze({},gr),{},{unread:0})}),this.onUpdateSessions(lr)},Et.insertLocalSession=function(lr){var nr=this,ur=nr.db,ar=lr.scene+"-"+lr.to,gr=nr.getSessionInCache(ar);return gr&&er.isComplete(gr)?$.reject(or.sessionExist({callFunc:"session::insertLocalSession",session:gr})):(ur.enable?ur.getMsgs({sessionId:ar,limit:1}):$.resolve()).then(function(pr){if(cr.isArray(pr)&&pr.length===1){var hr=pr[0];(gr=er.genSessionByMsg(hr)).updateTime=hr.time}else gr={id:ar,scene:lr.scene,to:lr.to,updateTime:+lr.updateTime||+new Date,lastMsg:null};return nr.onUpdateSession(gr),ur.enable?ur.putSession(gr):$.resolve(gr)})},Et.checkAndUpdateLocalSessionByMsg=function(lr){var nr,ur=this.db,ar=this,gr=this.options.syncSessionUnread&&lr!==this.currSessionId,pr=ur.getMsgs({sessionId:lr,limit:1}),hr=ur.getSession(lr).then(function(Cr){if(Cr)return nr=oe({},Cr),Cr.ack=Cr.ack||0,gr?ur.getMsgs({sessionId:lr,start:Cr.ack}):$.resolve();ar.logger.error("can't find session that sessionId = ".concat(lr))});return $.all([pr,hr]).then(function(Cr){var wr,Sr,mr=n(Cr,2),_r=mr[0],Ar=mr[1],Er={id:lr};if(!nr)return ar.logger.error("checkAndUpdateLocalSessionByMsg:can not find session",lr),$.resolve(200);if(wr=nr&&!nr.lastMsg?null:nr.lastMsg.idClient,_r&&_r[0]?Sr=(_r=_r[0]).idClient:(Sr=null,_r=null),wr!==Sr&&(Er.lastMsg=_r),Ar!==void 0){var sr=0;y(Ar=Ar||[]).call(Ar,function(xr){var Nr;try{Nr=ar.options.shouldCountNotifyUnread(xr)}catch(Mr){throw ar.logger.error("userOption:shouldCountNotifyUnread function error",Mr),Mr}xr.isUnreadable&&xr.flow==="in"&&(xr.type!=="notification"||Nr)&&sr++}),sr!==nr.unread&&(Er.unread=sr)}return le(Er).length>1?(ar.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:",cr.secureOutput("session",Er)),ur.updateSession(Er).then(function(){return ar.onUpdateSession(Er)})):$.resolve(200)})},Et.syncSessionsWithMoreRoaming=function(lr){var nr=this,ur=lr&&lr.content&&lr.content.sessions;if(ur&&ur.length){var ar={0:"p2p",1:"team",5:"superTeam"};if(y(ur).call(ur,function(pr){var hr,Cr=pr.to===nr.options.account?pr.from:pr.to;pr.scene=ar[pr.scene],pr.id=ue(hr="".concat(pr.scene,"-")).call(hr,Cr),pr.time=+pr.time}),this.db.enable){var gr=this.db.putSessionsWithMoreRoaming(ur);gr.cmd="syncSessionsWithMoreRoaming",this.syncPromiseArray.push(gr)}this.syncing&&this.syncResult?this.syncResult.sessionsWithMoreRoaming=ur:this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},Et.syncStickTopSessions=function(lr){var nr=this,ur=this.db,ar=[],gr=$.resolve(),pr=lr.content.sessions||[],hr=this;if(this.syncing&&this.syncResult){y(pr).call(pr,function(Sr){var mr=Sr.id.split("|");mr[0]==="super_team"&&(mr[0]="superTeam"),Sr.id=mr.join("-"),Sr.scene=mr[0],Sr.to=mr[1],Sr.isTop=!0,ar.push(mr.join("-")),delete Sr.createTime,delete Sr.updateTime});var Cr,wr=[];this.hasSynced&&lr.content.modify&&(y(Cr=le(this.sessionSet)).call(Cr,function(Sr){nr.sessionSet[Sr].isTop&&wr.push(nr.sessionSet[Sr])}),y(wr).call(wr,function(Sr){if(i(ar).call(ar,Sr.id)>-1){var mr=ie(pr).call(pr,function(Ar){return Ar.id===Sr.id&&Ar.topCustom===Sr.topCustom});mr>-1&&ae(pr).call(pr,mr,1)}else{var _r={};_r.id=Sr.id,_r.isTop=!1,_r.topCustom="",_r.to=Sr.to,_r.scene=Sr.scene,pr.push(_r)}})),ur.enable&&(gr=ur.updateTimetag("stickTopSessions",lr.content.timetag)),gr=gr.then(function(){return ur.enable?ur.getStickTopSessions():[]}).then(function(Sr){ur.enable&&!nr.hasSynced&&lr.content.modify?y(Sr).call(Sr,function(mr){if(i(ar).call(ar,mr.id)>-1){var _r=ie(pr).call(pr,function(Er){return Er.id===mr.id&&Er.topCustom===mr.topCustom});_r>-1&&ae(pr).call(pr,_r,1)}else{var Ar={};Ar.id=mr.id,Ar.isTop=!1,Ar.topCustom="",Ar.to=mr.to,Ar.scene=mr.scene,pr.push(Ar)}}):!ur.enable||nr.hasSynced||lr.content.modify||y(Sr).call(Sr,function(mr){hr.cacheSyncedSession(mr)}),y(pr).call(pr,function(mr){hr.cacheSyncedSession(mr)})}),this.syncResult.stickTopSessions=pr,gr.cmd="syncStickTopSessions",this.syncPromiseArray.push(gr)}else this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")},Et.getSessionInCache=function(lr,nr){var ur=this.sessionSet[lr];return!ur||ur.isDeleted&&!nr?void 0:ur},Et.deleteSessionInCache=function(lr,nr){var ur=this;cr.isArray(lr)||(lr=[lr]),nr?y(lr).call(lr,function(ar){ur.sessionSet[ar]&&(ur.sessionSet[ar].isDeleted=!0)}):y(lr).call(lr,function(ar){return delete ur.sessionSet[ar]}),this.logger.info("sessions::deleteSessionInCache::delete session done",lr,nr)},Et.updateSessionInCache=function(lr){return this.logger.info("session::updateSessionInCache: ".concat(lr.id),lr.id,lr),this.getSessionInCache(lr.id)?lr=this.mergeSession(lr):(this.logger.info("session::updateSessionInCache: can not find session in cache ".concat(lr.id)),null)},Et.updateSessionInDbWithNotify=function(lr,nr){var ur=this;return new $(function(ar,gr){var pr=ur.db;if(ur.getSessionInCache(lr.id)){var hr=$.resolve(),Cr=cr.filterObj(lr,"id lastMsg localCustom unread");pr.enable&&(hr=pr.updateSession(Cr)),hr.then(function(wr){return ur.onUpdateSession(wr,nr)}).then(ar,function(wr){gr({callFunc:"session::updateLocalSession",event:wr})})}else gr(or.sessionNotExist({sessionId:lr.id,callFunc:"session::updateLocalSession"}))})}},function(t,r,e){var n=e(2),g=e(5),y=e(4),i=e(34),k=e(37).fn,L=e(0);k.syncSessionAck=function($){var V,z=this;if(this.logger.info("syncSessionAck::",$.content),z.syncing&&z.syncResult){z.saveAck.p2pTeam=$.content.timetag;var re={};n(V=[[$.content.p2p,"p2p"],[$.content.team.m_map,"team"]]).call(V,function(oe){var le,ue=oe[0],ie=oe[1];n(le=g(ue)).call(le,function(ae){var Fe,de;re[y(Fe="".concat(ie,"-")).call(Fe,ae)]=ue[ae];var Ie={id:y(de="".concat(ie,"-")).call(de,ae),ack:ue[ae]};z.cacheSyncedSession(Ie)})}),z.syncResult.ackMap?z.syncResult.ackMap=i(z.syncResult.ackMap,re):z.syncResult.ackMap=re}else z.logger.warn("syncSessionAck: not in syncing or no syncResult",z.syncing,!!z.syncResult)},k.syncSuperTeamSessionAck=function($){var V,z=this;if(z.syncResult){z.saveAck.superTeam=$.content.timetag;var re={},oe=$.content.superTeam.m_map;n(V=g(oe)).call(V,function(le){re["superTeam-".concat(le)]=oe[le];var ue={id:"superTeam-".concat(le),ack:oe[le]};z.cacheSyncedSession(ue)}),z.syncResult.ackMap?z.syncResult.ackMap=i(z.syncResult.ackMap,re):z.syncResult.ackMap=re}},k.onMarkSessionAck=function($){$.error||this.storeSessionAck($.obj)},k.syncMarkSessionAck=function($){this.storeSessionAck($.content,!0)},k.storeSessionAck=function($,V){var z;if(this.options.syncSessionUnread&&$){var re;switch($.scene){case 0:re="p2p";break;case 1:re="team";break;case void 0:default:re="superTeam"}var oe=y(z="".concat(re,"-")).call(z,$.to),le=$.timetag;if(le<=((this.getSessionInCache(oe)||{}).ack||0))this.logger.warn("session::storeSessionAck: ack <= ackInMemory",le);else{var ue={id:oe,ack:le};this.mergeSession(ue),this.logger.info("session::storeSessionAck:",L.secureOutput("session",ue)),this.markUnreadBySessionAck({sessionId:oe,ack:ue.ack},V)}}},k.markUnreadBySessionAck=function($,V){var z=$.sessionId,re=$.ack,oe=this,le=oe.db;if(le.enable)oe.pushMsgTask(function(){return le.getMsgCountAfterAck({shouldCountNotifyUnread:oe.options.shouldCountNotifyUnread,sessionId:z,ack:re}).then(function(Ve){var kt={id:z,unread:Ve,ack:re};return oe.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done",kt),oe.syncing?oe.cacheSyncedSession(kt):V&&oe.onUpdateSession(kt),le.updateSession(kt)}).catch(function(Ve){oe.logger.error("markUnreadBySessionAck::error",Ve)})});else{var ue=oe.getSessionInCache(z);if(ue){var ie=ue.unreadMsgs;if(ie&&ie.length){for(var ae=0,Fe=[],de=ie.length-1;de>=0;de--){var Ie=ie[de];if(!(Ie.time>re))break;ae++,Fe.push(Ie)}ue.unreadMsgs=Fe,ue.unread=ae,oe.logger.info("session::markUnreadBySessionAck: unread ".concat(ae)),oe.syncing?oe.cacheSyncedSession(ue):V&&oe.onUpdateSession(ue)}}}}},function(t,r,e){var n=e(37).fn;n.processChatroom=function(g){switch(g.cmd){case"getChatroomAddress":this.onChatroomAddress(g)}},n.onChatroomAddress=function(g){g.error||(g.obj.address=g.content.address)}},function(t,r,e){var n=e(37).fn;n.processQchat=function(g){switch(g.cmd){case"getQChatAddress":this.onQChatAddress(g)}},n.onQChatAddress=function(g){g.error||(g.obj.address=g.content.address)}},function(t,r,e){e(37).fn.processFilter=function(n){switch(n.cmd){case"sendFilterMsg":this.onSendMsg(n,!0);break;case"filterMsg":this.onMsg(n,!0);break;case"filterSysMsg":this.onSysMsg(n,!0);break;case"sendFilterCustomSysMsg":this.onSendSysMsg(n,!0)}}},function(t,r,e){var n=e(11),g=e(48),y=e(37).fn,i=e(0),k=g.clientTypeMap;function L($){$=$||{};var V=i.copy($);return V.clientType&&(V.clientType=k[V.clientType]||""),V.serverCustom&&(V.custom=JSON.parse(V.serverCustom),typeof V.custom[0]=="string"&&(V.custom=V.custom[0]),delete V.serverCustom),V}y.processEventService=function($){var V=$.content,z=$.error,re=this.options||{};switch(z&&(z.callFunc="events::processsEventService",this.onCustomError("事件服务解包失败","EVENT_SERVICE_ERROR",z)),$.cmd){case"pushEvent":if(i.isFunction(re.onpushevents)){var oe={msgEvents:[L(V.msgEvent)]};re.onpushevents(oe)}break;case"pushEvents":if(i.isFunction(re.onpushevents)){var le=V.msgEvents;le={msgEvents:n(le).call(le,function(ue){return L(ue)})},re.onpushevents(le)}}}},function(t,r,e){var n=e(37).fn,g=e(0);n.processProxyService=function(y){var i=y.error;switch(i&&(i.callFunc="events::processProxyService",this.onCustomError("proxyService","EVENT_PROXY_SERVICE_ERROR",i)),y.cmd){case"onProxyMsg":if(g.isFunction(this.options.onProxyMsg)){var k=y.content.proxyMsg||{};k.time&&(k.time=+k.time),this.options.onProxyMsg(k)}break;case"httpProxy":y.obj=y.content&&y.content.proxyTag}}},function(t,r,e){var n=e(10),g=e(11),y=e(0),i=function(ae){this.account=ae.account},k=i.prototype,L=k.Message=e(80),$=k.TextMessage=e(857),V=k.FileMessage=e(209),z=k.GeoMessage=e(861),re=k.NotificationMessage=e(862),oe=k.CustomMessage=e(863),le=k.TipMessage=e(864),ue=k.RobotMessage=e(865),ie=k.G2Message=e(866);k.validScenes=L.validScenes,k.validTypes=L.validTypes,k.sceneMap=L.sceneMap,k.sceneReverseMap=L.sceneReverseMap,k.reverse=function(ae){var Fe;switch(L.getType(ae)){case"text":Fe=n($).call($,ae);break;case"image":case"audio":case"video":case"file":Fe=n(V).call(V,ae);break;case"geo":Fe=n(z).call(z,ae);break;case"notification":Fe=n(re).call(re,ae);break;case"custom":Fe=n(oe).call(oe,ae);break;case"tip":Fe=n(le).call(le,ae);break;case"g2":Fe=n(ie).call(ie,ae);break;case"robot":Fe=n(ue).call(ue,ae);break;default:Fe=n(L).call(L,ae)}return L.setExtra(Fe,this.account),Fe},k.reverseMsgs=function(ae,Fe){var de,Ie,Ve=this;return g(ae).call(ae,function(kt){return kt=n(Ve).call(Ve,kt),Fe&&((de=Fe.modifyObj)&&(kt=y.merge(kt,de)),Ie=Fe.mapper,y.isFunction(Ie)&&(kt=Ie(kt))),kt})},t.exports=i},function(t,r,e){var n=e(19),g=e(10),y=e(80),i=e(0);function k(L){i.verifyOptions(L,"text","msg::TextMessage"),L.type="text",y.call(this,L)}k.prototype=n(y.prototype),k.reverse=function(L){return g(y).call(y,L)},t.exports=k},function(t,r,e){var n=e(19),g=e(209);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(i,k){return!0},t.exports=y},function(t,r,e){var n=e(19),g=e(209);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(){},t.exports=y},function(t,r,e){var n=e(19),g=e(209);function y(){}y.prototype=n(g.prototype),y.verifyFile=function(){},t.exports=y},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(80),k=e(0);function L($){$.type="geo",k.verifyOptions($,"geo","msg::GeoMessage"),k.verifyOptions($.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),k.verifyParamType("geo.lng",$.geo.lng,"number","msg::GeoMessage"),k.verifyParamType("geo.lat",$.geo.lat,"number","msg::GeoMessage"),k.verifyParamType("geo.title",$.geo.title,"string","msg::GeoMessage"),i.call(this,$),this.attach=n($.geo)}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return $.attach=$.attach?""+$.attach:"",V.geo=$.attach?JSON.parse($.attach):{},V},t.exports=L},function(t,r,e){var n=e(19),g=e(10),y=e(11),i=e(121),k=e(0).notundef,L=e(80),$=e(156).IM,V=e(198),z=e(208),re={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function oe(){}oe.prototype=n(L.prototype),oe.reverse=function(le){var ue=g(L).call(L,le);if(le.attach=le.attach?""+le.attach:"",le.attach){var ie=JSON.parse(le.attach);if(ue.attach={type:re[ie.id]||ie.id},k(ie.data)){var ae,Fe,de=ie.data;k(de.tinfo)&&(ue.attach.team=g(V).call(V,$.syncUnserialize(de.tinfo,"team"),!0)),k(de.ids)&&(ue.attach.accounts=de.ids),k(de.id)&&(ue.attach.account=de.id),k(de.uinfos)&&(ue.attach.users=y(ae=de.uinfos).call(ae,function(Ie){return g(z).call(z,$.syncUnserialize(Ie,"user"))})),k(de.mute)&&(ue.attach.mute=+de.mute==1),k(de.attach)&&(ue.attach.custom=de.attach),k(de.channel)&&(ue.attach.channelId=de.channel),k(de.calltype)&&(ue.attach.netcallType=de.calltype),k(de.duration)&&(ue.attach.duration=de.duration),k(de.time)&&(ue.attach.time=de.time),k(de.from)&&(ue.attach.from=de.from),k(de.ext)&&(ue.attach.ext=de.ext),ue.attach.accounts&&ue.attach.accounts.length<=2&&ue.from===ue.to&&i(Fe=ue.attach.accounts).call(Fe,function(Ie){if(Ie!==ue.to)return ue.to=Ie,!0})}}else ue.attach={};return ue},t.exports=oe},function(t,r,e){var n=e(19),g=e(10),y=e(80),i=e(0);function k(L){i.verifyOptions(L,"content","msg::CustomMessage"),L.type="custom",y.call(this,L),this.attach=L.content}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.content=L.attach,$},t.exports=k},function(t,r,e){var n=e(19),g=e(10),y=e(80),i=e(0);function k(L){i.verifyOptions(L,"tip","msg::TipMessage"),L.type="tip",y.call(this,L),this.body=L.tip}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.text="",$.tip=L.body,L.attach&&($.attach=L.attach),$},t.exports=k},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(11),k=e(80),L=e(0),$={welcome:"00",text:"01",link:"03"},V={"01":"text","02":"image","03":"answer",11:"template"};function z(re){L.verifyOptions(re,"content","msg::RobotMessage"),L.undef(re.robotAccid)&&(re.robotAccid=re.to);var oe=re.content;switch(oe.type){case"welcome":L.undef(re.body)&&(this.body="欢迎消息");break;case"text":L.verifyOptions(oe,"content","msg::RobotMessage"),L.undef(re.body)&&(this.body=oe.content);break;case"link":L.verifyOptions(oe,"target","msg::RobotMessage")}oe.type&&(oe.type=$[oe.type]),oe={param:oe,robotAccid:re.robotAccid},this.attach=n(oe),re.type="robot",k.call(this,re)}z.prototype=g(k.prototype),z.reverse=function(re){var oe=y(k).call(k,re);if(oe.type==="robot"){var le=JSON.parse(re.attach);if(le.param&&(le.param.type=V[le.param.type]||"unknown"),le.robotMsg){var ue=(le=L.merge(le,le.robotMsg)).message;le.flag==="bot"?le.message=i(ue).call(ue,function(ie){return ie.type=V[ie.type]||"unknown",ie}):le.flag,delete le.robotMsg}oe.content=le}return oe},t.exports=z},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(80),k=e(0);function L($){k.verifyOptions($,"attach","msg::G2Message"),$.type="g2",i.call(this,$),this.attach=n($.attach)}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return $.attach&&(V.attach=JSON.parse($.attach)),V},t.exports=L},function(t,r,e){var n=e(51),g=e(60),y=e(24),i=e(61),k=e(11),L=e(15),$=e(8),V=e(3),z=e(2),re=e(34),oe=e(5),le=e(52),ue=e(53),ie=e(54),ae=e(55),Fe=e(42);function de(Et,cr){var er=oe(Et);if(le){var or=le(Et);cr&&(or=L(or).call(or,function(dr){return ue(Et,dr).enumerable})),er.push.apply(er,or)}return er}function Ie(Et){for(var cr=1;cr<arguments.length;cr++){var er,or,dr=arguments[cr]!=null?arguments[cr]:{};cr%2?z(er=de(Object(dr),!0)).call(er,function(lr){n(Et,lr,dr[lr])}):ie?ae(Et,ie(dr)):z(or=de(Object(dr))).call(or,function(lr){Fe(Et,lr,ue(dr,lr))})}return Et}var Ve=e(41).fn,kt=e(0),At=kt.isArray,ze=e(160);Ve.mergeObjArray=function(Et,cr,er){return Et||(Et=[]),cr?(At(cr)||(cr=[cr]),cr.length?(er=er||{},kt.mergeObjArray(Et,cr,er)):Et):Et},Ve.cutObjArray=function(Et,cr,er){return Et&&cr?(At(cr)||(cr=[cr]),cr.length?(er=er||{},kt.cutObjArray(Et,cr,er)):Et):Et},Ve.mergeLoginPorts=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"deviceId"})},Ve.cutLoginPorts=function(Et,cr){return this.cutObjArray(Et,cr,{keyPath:"deviceId",sortPath:"type"})},Ve.mergeRelations=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"account"})},Ve.cutRelations=function(Et,cr){return this.cutObjArray(Et,cr,{keyPath:"account"})},Ve.findRelation=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"account",value:cr})},Ve.mergeFriends=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"account"})},Ve.cutFriends=function(Et,cr){return this.cutObjArray(Et,cr,{keyPath:"account"})},Ve.cutFriendsByAccounts=function(Et,cr){At(cr)||(cr=[cr]);var er=k(cr).call(cr,function(or){return{account:or}});return this.cutFriends(Et,er)},Ve.findFriend=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"account",value:cr})},Ve.mergeUsers=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"account"})},Ve.findUser=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"account",value:cr})},Ve.mergeTeams=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"teamId"})},Ve.cutTeams=function(Et,cr){return this.cutObjArray(Et,cr,{keyPath:"teamId"})},Ve.findTeam=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"teamId",value:cr})},Ve.assembleTeamOwner=ze.assembleOwner,Ve.assembleTeamMembers=ze.assembleMembers,Ve.genTeamMemberId=ze.genId,Ve.mergeTeamMembers=function(Et,cr){return this.mergeObjArray(Et,cr)},Ve.cutTeamMembers=function(Et,cr){return this.cutObjArray(Et,cr)},Ve.cutTeamMembersByAccounts=function(Et,cr,er){At(er)||(er=[er]);var or=ze.assembleMembers({teamId:cr},er);return this.cutTeamMembers(Et,or)},Ve.findTeamMember=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"id",value:cr})},Ve.mergeSessions=function(Et,cr){return this.mergeObjArray(Et,cr,{sortPath:"updateTime",desc:!0})},Ve.cutSessions=function(Et,cr){return this.cutObjArray(Et,cr)},Ve.cutSessionsByIds=function(Et,cr){At(cr)||(cr=[cr]);var er=k(cr).call(cr,function(or){return{id:or}});return this.cutSessions(Et,er)},Ve.findSession=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"id",value:cr})},Ve.mergeMsgs=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"idClient",sortPath:"time"})},Ve.cutMsgs=function(Et,cr){return this.cutObjArray(Et,cr,{keyPath:"idClient"})},Ve.cutMsgsByIdClients=function(Et,cr){At(cr)||(cr=[cr]);var er=k(cr).call(cr,function(or){return{idClient:or}});return this.cutMsgs(Et,er)},Ve.findMsg=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"idClient",value:cr})},Ve.mergeSysMsgs=function(Et,cr){return this.mergeObjArray(Et,cr,{keyPath:"idServer",desc:!0})},Ve.cutSysMsgs=function(Et,cr){return this.cutObjArray(Et,cr,{keyPath:"idServer"})},Ve.cutSysMsgsByIdServers=function(Et,cr){At(cr)||(cr=[cr]);var er=k(cr).call(cr,function(or){return{idServer:or}});return this.cutSysMsgs(Et,er)},Ve.findSysMsg=function(Et,cr){return kt.findObjInArray(Et,{keyPath:"idServer",value:cr})},Ve.searchLocal=function(Et){if(kt.verifyOptions(Et,"keyword","searchLocal"),this.db.enable){var cr,er=this,or=this.db,dr=Et.keyword+"",lr=["account","nick","alias"],nr=["id","scene","lastMsg.type","lastMsg.text","localCustom","target.account","target.nick","target.alias","target.name"],ur="",ar=Et.keyPath;switch(ar?(ur=(ar=(ar+"").split(".")).shift(),ar=ar.join(".")):ur="all",ur){case"user":ar&&(lr=L(lr).call(lr,function(Ar){return Ar===ar||$(Ar).call(Ar,ar+".")===0})),hr(lr).then(function(Ar){Et.done(null,{sessions:[],users:Ar})});break;case"session":ar&&(nr=L(nr).call(nr,function(Ar){return Ar===ar||$(Ar).call(Ar,ar+".")===0})),gr(nr,!ar||$(ar).call(ar,"target")>-1).then(function(Ar){Et.done(null,{sessions:Ar,users:[]})});break;case"all":wr().then(function(){V.all([gr(nr,!0),hr(lr)]).then(function(Ar){Et.done(null,{sessions:Ar[0],users:Ar[1]})})});break;default:Et.done(null,{sessions:[],users:[],msg:'keyPath must start with "user" or "session"'})}}else Et.done(null,{sessions:[],users:[],msg:"no db"});function gr(Ar,Er){return pr.apply(this,arguments)}function pr(){return(pr=i(g.mark(function Ar(Er,sr){var xr;return g.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return xr=sr?[or.getSessions(),wr(),or.getTeams(),or.getSuperTeams()]:[or.getSessions()],Nr.abrupt("return",V.all(xr).then(function(Mr){var br,yr=Mr[0]||[],Tr={p2p:Mr[1]||[],team:Mr[2]||[],superTeam:Mr[3]||[]},Br={};return sr&&(z(br=oe(Tr)).call(br,function(Lr){var Fr;z(Fr=Tr[Lr]).call(Fr,function(qr){var Vr=qr.teamId||qr.account;Br[Lr+"-"+Vr]=qr})}),z(yr).call(yr,function(Lr){Lr.target=Br[Lr.id]})),mr(Er,yr)}));case 2:case"end":return Nr.stop()}},Ar)}))).apply(this,arguments)}function hr(Ar){return Cr.apply(this,arguments)}function Cr(){return(Cr=i(g.mark(function Ar(Er){var sr;return g.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return xr.next=2,wr();case 2:return sr=xr.sent,xr.abrupt("return",mr(Er,sr));case 4:case"end":return xr.stop()}},Ar)}))).apply(this,arguments)}function wr(){return Sr.apply(this,arguments)}function Sr(){return(Sr=i(g.mark(function Ar(){var Er,sr;return g.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(!cr){xr.next=2;break}return xr.abrupt("return",cr);case 2:return xr.next=4,er.db.getFriends();case 4:if(xr.t0=xr.sent,xr.t0){xr.next=7;break}xr.t0=[];case 7:return Er=xr.t0,sr=er.protocol.userSet||{},cr=k(Er).call(Er,function(Nr){return Ie(Ie({},Nr),sr[Nr.account])}),xr.abrupt("return",cr);case 11:case"end":return xr.stop()}},Ar)}))).apply(this,arguments)}function mr(Ar,Er){var sr=[];return z(Er).call(Er,function(xr){for(var Nr=0;Nr<Ar.length;Nr++){var Mr=_r(xr,Ar[Nr].split("."));if(Mr&&$(Mr).call(Mr,dr)>-1){sr.push(re({},xr));break}}}),sr}function _r(Ar,Er){if(y(Ar)==="object"&&Ar)return Er.length===1?Ar[Er[0]]:_r(Ar[Er.shift()],Er)}}},function(t,r,e){var n=e(9),g=e(41).fn,y=e(0),i=e(26).reportAPI;g.kick=function(k){var L;(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"kick",done:k.done}),y.verifyOptions(k,"deviceIds","link::kick"),this.processCallback(k),this.sendCmd("kick",{deviceIds:n(L=k.deviceIds).call(L,0)},k.callback)},g.disconnect=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"disconnect",done:k.done}),k=k||{},this.protocol.disconnect(k.done)}},function(t,r,e){var n=e(41).fn,g=e(0),y=e(26).reportAPI;n.markInBlacklist=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"markInBlacklist",done:i.done}),g.verifyOptions(i,"account isAdd","relation::markInBlacklist"),g.verifyParamType("isAdd",i.isAdd,"boolean","relation::markInBlacklist"),this.processCallback(i),this.sendCmd("markInBlacklist",{account:i.account,isAdd:i.isAdd},i.callback)},n.addToBlacklist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"addToBlacklist",done:i.done}),i.isAdd=!0,this.markInBlacklist(i)},n.removeFromBlacklist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"removeFromBlacklist",done:i.done}),i.isAdd=!1,this.markInBlacklist(i)},n.markInMutelist=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"markInMutelist",done:i.done}),g.verifyOptions(i,"account","relation::markInMutelist"),g.verifyParamType("isAdd",i.isAdd,"boolean","relation::markInMutelist"),this.processCallback(i),this.sendCmd("markInMutelist",{account:i.account,isAdd:i.isAdd},i.callback)},n.addToMutelist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"addToMutelist",done:i.done}),i.isAdd=!0,this.markInMutelist(i)},n.removeFromMutelist=function(i){return(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"removeFromMutelist",done:i.done}),i.isAdd=!1,this.markInMutelist(i)},n.getRelations=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"getRelations",done:i.done});var k=this,L=k.db,$=0;function V(){k.sendCmd("getRelations",{timetag:$,NOTSTORE:"timetag"},i.callback)}i=g.verifyOptions(i),k.processCallback(i),L.enable?L.getRelationsTimetag().then(function(z){$=z,V()},V):V()}},function(t,r,e){var n=e(60),g=e(61),y=e(4),i=e(2),k=e(8),L=e(41).fn,$=e(0),V=$.objs2accounts,z=e(208),re=e(26).reportAPI;L.updateMyInfo=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"updateMyInfo",done:oe.done}),$.verifyOptions(oe),this.processCallback(oe),oe.user=new z(oe),delete oe.user.account,this.sendCmd("updateMyInfo",{user:oe.user,antispamTag:{antiSpamBusinessId:oe.antiSpamBusinessId},single:!0},oe.callback)},L.getMyInfo=function(oe){return(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getMyInfo",done:oe.done}),(oe=oe||{}).account=this.account,this.getUser(oe)},L.getUser=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getUser",done:oe.done});var le,ue=this,ie=ue.db;function ae(){ue.sendCmd("getUsers",{accounts:[le],single:!0},oe.callback)}$.verifyOptions(oe,"account","user::getUser"),ue.processCallback(oe),oe.cbaop=function(Fe,de){if(!Fe)return de=de[0]||null,ue.logger.info("api::getUser: cbaop ".concat(le)),de},le=oe.account,oe.sync?ae():ie.enable?ie.getUser(le).then(function(Fe){Fe?oe.done(null,Fe):ae()},ae):ae()},L.getUsers=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getUsers",done:oe.done});var le,ue=this,ie=ue.db,ae=[];function Fe(){ue.sendCmd("getUsers",{accounts:le,single:!0},oe.callback)}$.verifyOptions(oe,"accounts","user::getUsers"),$.verifyParamType("accounts",oe.accounts,"array","user::getUsers"),ue.processCallback(oe),oe.cbaop=function(de,Ie){if(!de)return Ie=y(Ie).call(Ie,ae),ue.logger.info("api::getUsers: cbaop ".concat(le)),Ie},le=$.deduplicate(oe.accounts),$.verifyArrayMax("accounts",oe.accounts,150,"user::getUsers"),oe.sync?Fe():ie.enable?ie.getUsers({accountIds:le}).then(function(de){if(de&&de.length===le.length)oe.done(null,de);else{ae=de;var Ie=V(de),Ve=[];i(le).call(le,function(kt){k(Ie).call(Ie,kt)===-1&&Ve.push(kt)}),le=Ve,Fe()}},Fe):Fe()},L.getUsersFromDB=function(){var oe=g(n.mark(function le(ue){var ie,ae,Fe;return n.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return ae=(ie=this).db,(ue=ue||{}).done=re({instance:this,className:"NIMFn",funcName:"getUsersFromDB",done:ue.done}),$.validate({accountIds:{type:"array",required:!1}},ue,"user::getUsersFromDB"),ie.processCallback(ue),de.next=8,ae.getUsers(ue);case 8:return Fe=de.sent,ue.callback(null,Fe),de.abrupt("return",Fe);case 11:case"end":return de.stop()}},le,this)}));return function(le){return oe.apply(this,arguments)}}()},function(t,r,e){var n=e(60),g=e(61),y=e(143),i=e(41).fn,k=e(0),L=k.notundef,$=e(783),V=e(26).reportAPI;i.friendRequest=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"friendRequest",done:z.done}),k.verifyOptions(z,"type account","friend::friendRequest"),k.verifyParamValid("type",z.type,$.validTypes(),"friend::friendRequest"),this.processPs(z),this.processCallback(z);var re={account:z.account,type:$.getByteFromType(z.type),ps:z.ps};L(z.idServer)&&(re.idServer=z.idServer),this.sendCmd("friendRequest",re,z.callback)},i.addFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"addFriend",done:z.done}),z.type="addFriend",this.friendRequest(z)},i.applyFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"applyFriend",done:z.done}),z.type="applyFriend",this.friendRequest(z)},i.passFriendApply=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"passFriendApply",done:z.done}),z.type="passFriendApply",this.friendRequest(z)},i.rejectFriendApply=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"rejectFriendApply",done:z.done}),z.type="rejectFriendApply",this.friendRequest(z)},i.deleteFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"deleteFriend",done:z.done}),k.verifyOptions(z,"account","friend::deleteFriend");var re=z.delAlias===!0;this.processCallback(z),this.sendCmd("deleteFriend",{account:z.account,delFriendParams:{delAlias:re?1:0}},z.callback)},i.updateFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"updateFriend",done:z.done}),this.processCallback(z);var re=new $(z);this.sendCmd("updateFriend",{friend:re,single:!0},z.callback)},i.getFriends=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"getFriends",done:z.done});var re=this.db;k.validate({timetag:{type:"number",required:!1}},z,"friend::getFriends"),this.processCallback(z),re.enable?re.getFriends({updateTime:z.updateTime||0}).then(function(oe){(oe=y(oe).call(oe,function(le,ue){return le.updateTime-ue.updateTime})).invalid=[],z.done(null,oe)}):this.sendCmd("getFriends",{timetag:z.updateTime||0,NOTSTORE:"timetag"},z.callback)},i.getFriendsFromDB=function(){var z=g(n.mark(function re(oe){var le,ue,ie;return n.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ue=(le=this).db,(oe=oe||{}).done=V({instance:this,className:"NIMFn",funcName:"getFriendsFromDB",done:oe.done}),k.validate({accountIds:{type:"array",required:!1}},oe,"friend::getFriendsFromDB"),le.processCallback(oe),ae.next=8,ue.getFriends(oe);case 8:return ie=ae.sent,oe.callback(null,ie),ae.abrupt("return",ie);case 11:case"end":return ae.stop()}},re,this)}));return function(re){return z.apply(this,arguments)}}(),i.isMyFriend=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"isMyFriend",done:z.done});var re=this.db;k.validate({account:{type:"string",allowEmpty:!1,require:!0}},z),this.processCallback(z),re.enable||z.done(null,!1),re.getFriend(z.account).then(function(oe){oe&&oe.valid===!0?z.done(null,!0):z.done(null,!1)})},i.isUserInBlackList=function(z){(z=z||{}).done=V({instance:this,className:"NIMFn",funcName:"isUserInBlackList",done:z.done});var re=this.db;k.validate({account:{type:"string",allowEmpty:!1,require:!0}},z),this.processCallback(z),re.enable||z.done(null,!1),re.getUserFromBlackList(z.account).then(function(oe){oe&&oe.account?z.done(null,!0):z.done(null,!1)})}},function(t,r,e){var n=e(41).fn,g=e(26).reportAPI;n.getRobots=function(y){(y=y||{}).done=g({instance:this,className:"NIMFn",funcName:"getRobots",done:y.done}),this.logger.warn("this api will be abandon"),(y=y||{}).type="getRobots",this.processCallback(y),this.sendCmd("sync",{sync:{robots:0}},y.callback)}},function(t,r,e){var n=e(60),g=e(61),y=e(9),i=e(11),k=e(15),L=e(3),$=e(6),V=e(41).fn,z=e(0),re=z.undef,oe=e(198),le=e(160),ue=e(26).reportAPI;V.createTeam=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"createTeam",done:ie.done}),z.verifyOptions(ie,"type name","team::createTeam"),re(ie.accounts)?ie.accounts=[]:z.verifyParamType("accounts",ie.accounts,"array","team::createTeam"),ie.action="create",this.processPs(ie),this.processCallback(ie),ie.team=new oe(ie);var Fe={team:ie.team,accounts:y(ae=ie.accounts).call(ae,0),ps:ie.ps,antispamTag:{antiSpamBusinessId:ie.antiSpamBusinessId}};this.sendCmd("createTeam",Fe,ie.callback)},V.updateTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::updateTeam"),ie.action="update",this.processCallback(ie),ie.team=new oe(ie),this.sendCmd("updateTeam",{team:ie.team,antispamTag:{antiSpamBusinessId:ie.antiSpamBusinessId},single:!0},ie.callback)},V.addTeamMembers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"addTeamMembers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::addTeamMembers"),z.verifyParamType("accounts",ie.accounts,"array","team::addTeamMembers"),this.processPs(ie),z.notexist(ie.custom)&&(ie.custom=""),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0),ps:ie.ps,attach:ie.custom};this.sendCmd("addTeamMembers",Fe,ie.callback)},V.removeTeamMembers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"removeTeamMembers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::removeTeamMembers"),z.verifyParamType("accounts",ie.accounts,"array","team::removeTeamMembers"),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0)};this.sendCmd("removeTeamMembers",Fe,ie.callback)},V.acceptTeamInvite=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"acceptTeamInvite",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::acceptTeamInvite"),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,type:"teamInvite"};this.sendCmd("acceptTeamInvite",ae,ie.callback)},V.rejectTeamInvite=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"rejectTeamInvite",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::rejectTeamInvite"),this.processPs(ie),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,ps:ie.ps,type:"teamInvite"};this.sendCmd("rejectTeamInvite",ae,ie.callback)},V.applyTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"applyTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::applyTeam"),this.processPs(ie),this.processCallback(ie);var ae={teamId:ie.teamId,ps:ie.ps};this.sendCmd("applyTeam",ae,ie.callback)},V.passTeamApply=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"passTeamApply",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::passTeamApply"),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,type:"applyTeam"};this.sendCmd("passTeamApply",ae,ie.callback)},V.rejectTeamApply=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"rejectTeamApply",done:ie.done}),z.verifyOptions(ie,"idServer teamId from","team::rejectTeamApply"),this.processPs(ie),this.processCallback(ie);var ae={idServer:ie.idServer,teamId:ie.teamId,from:ie.from,ps:ie.ps,type:"applyTeam"};this.sendCmd("rejectTeamApply",ae,ie.callback)},V.addTeamManagers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"addTeamManagers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::addTeamManagers"),z.verifyParamType("accounts",ie.accounts,"array","team::addTeamManagers"),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0)};this.sendCmd("addTeamManagers",Fe,ie.callback)},V.removeTeamManagers=function(ie){var ae;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"removeTeamManagers",done:ie.done}),z.verifyOptions(ie,"teamId accounts","team::removeTeamManagers"),z.verifyParamType("accounts",ie.accounts,"array","team::removeTeamManagers"),this.processCallback(ie);var Fe={teamId:ie.teamId,accounts:y(ae=ie.accounts).call(ae,0)};this.sendCmd("removeTeamManagers",Fe,ie.callback)},V.updateInfoInTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateInfoInTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::updateInfoInTeam"),this.processCallback(ie),this.sendCmd("updateInfoInTeam",{teamMember:new le(ie),single:!0},ie.callback)},V.updateNickInTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateNickInTeam",done:ie.done}),z.verifyOptions(ie,"teamId account","team::updateNickInTeam"),this.processCallback(ie),this.sendCmd("updateNickInTeam",{teamMember:new le(ie),single:!0},ie.callback)},V.updateMuteStateInTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateMuteStateInTeam",done:ie.done}),z.verifyOptions(ie,"teamId account mute","team::updateMuteStateInTeam"),this.processCallback(ie),ie.mute=ie.mute?1:0,this.sendCmd("updateMuteStateInTeam",ie)},V.getMutedTeamMembers=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getMutedTeamMembers",done:ie.done}),z.verifyOptions(ie,"teamId","team::getMutedTeamMembers"),this.processCallback(ie),this.sendCmd("getMutedTeamMembers",ie)},V.leaveTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"leaveTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::leaveTeam"),this.processCallback(ie);var ae={teamId:ie.teamId};this.sendCmd("leaveTeam",ae,ie.callback)},V.transferTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"transferTeam",done:ie.done}),z.verifyOptions(ie,"teamId account leave","team::transferTeam"),z.verifyParamType("leave",ie.leave,"boolean","team::transferTeam"),this.processCallback(ie);var ae={teamId:ie.teamId,account:ie.account,leave:ie.leave};this.sendCmd("transferTeam",ae,ie.callback)},V.dismissTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"dismissTeam",done:ie.done}),z.verifyOptions(ie,"teamId","team::dismissTeam"),this.processCallback(ie);var ae={teamId:ie.teamId};this.sendCmd("dismissTeam",ae,ie.callback)},V.getTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeam",done:ie.done});var ae,Fe=this,de=Fe.db;function Ie(){Fe.sendCmd("getTeam",{teamId:ie.teamId},ie.callback)}z.verifyOptions(ie,"teamId","team::getTeam"),Fe.processCallback(ie),ie.cbaop=function(Ve){Ve||Fe.logger.info("api::getTeam: cbaop ".concat(ae))},ae=ie.teamId,de.enable&&!ie.sync?de.getTeam(ae).then(function(Ve){Ve&&Ve.validToCurrentUser?(Fe.logger.log("api::getTeam: db.getTeam ".concat(ae)),ie.done(null,Ve)):Ie()},Ie):Ie()},V.getTeams=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeams",done:ie.done});var ae=this,Fe=ae.db,de=0;function Ie(){ae.sendCmd("getTeams",{timetag:de,NOTSTORE:"timetag"},ie.callback)}z.verifyOptions(ie),ae.processCallback(ie),Fe.enable?Fe.getTeamsTimetag().then(function(Ve){de=Ve,Ie()},Ie):Ie()},V.getTeamsById=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamsById",done:ie.done}),z.verifyOptions(ie,"teamIds","teams::getTeamsById"),this.processCallback(ie),this.sendCmd("getTeamsById",{teamIds:ie.teamIds},ie.callback)},V.getTeamMembers=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMembers",done:ie.done});var ae=this;z.verifyOptions(ie,"teamId","team::getTeamMembers"),ae.processCallback(ie),ae.sendCmd("getTeamMembers",{teamId:ie.teamId,timetag:0,NOTSTORE:"timetag"},ie.callback)},V.getTeamMemberByTeamIdAndAccount=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMemberByTeamIdAndAccount",done:ie.done});var ae=this;z.verifyParamType("teamId",ie.teamId,"numeric or numeric string","team::getTeamMemberByTeamIdAndAccount"),z.verifyOptions(ie,"account","team::getTeamMemberByTeamIdAndAccount"),ae.processCallback(ie),ae.sendCmd("getTeamMembers",{teamId:ie.teamId,timetag:0,NOTSTORE:"timetag"},function(Fe,de,Ie){var Ve={};if(de&&de.members&&de.members.length){for(var kt=0;kt<de.members.length;kt++)if(de.members[kt].account===ie.account){Ve[ie.account]=de.members[kt];break}}ie.callback(Fe,Ve,Ie)})},V.getTeamMemberInvitorAccid=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMemberInvitorAccid",done:ie.done}),z.verifyParamType("teamId",ie.teamId,"numeric or numeric string","team::getTeamMemberInvitorAccid"),re(ie.accounts)||(z.verifyParamType("accounts",ie.accounts,"array","team::getTeamMemberInvitorAccid"),ie.accounts.length>200&&z.onParamError("accounts 参数数组长度不能超过200","team::getTeamMemberInvitorAccid"));var ae,Fe={teamId:ie.teamId};ie.accounts.length&&(Fe.accounts=y(ae=ie.accounts).call(ae,0)),this.processCallback(ie),this.sendCmd("getTeamMemberInvitorAccid",Fe,function(de,Ie,Ve){ie.callback(de,Ve&&Ve.accountsMap||{})})},V.notifyForNewTeamMsg=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"notifyForNewTeamMsg",done:ie.done}),z.verifyOptions(ie,"teamIds","team::notifyForNewTeamMsg"),this.protocol.notifyForNewTeamMsg(ie.teamIds).then(function(ae){ie.done(ae.error||null,i(ae),ae.miss)},function(ae){ie.done(ae)})},V.getMyTeamMembers=function(ie){ue({instance:this,className:"NIMFn",funcName:"getMyTeamMembers",done:ie.done,hasCallback:!1});var ae=ie.done;z.verifyOptions(ie,"teamIds","team::getMyTeamMembers");var Fe=this.processCallbackPromise(ie);return this.sendCmd("getMyTeamMembers",ie),Fe.then(function(de){return typeof ae=="function"?ae(null,de):de}).catch(function(de){if(typeof ae=="function")return ae(de);throw de})},V.getLocalTeams=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getLocalTeams",done:ie.done});var ae,Fe=this.db,de=[];function Ie(){ie.teams=de,ie.done(ae,ie)}z.verifyOptions(ie,"teamIds","team::getLocalTeams"),z.verifyParamType("teamIds",ie.teamIds,"array","team::getLocalTeams"),this.processCallback(ie),Fe.enable?Fe.getTeamsByTeamIds(ie.teamIds).then(function(Ve){de=k(Ve).call(Ve,function(kt){return!!kt}),Ie()},function(Ve){ae=Ve,Ie()}):Ie()},V.getTeamsFromDB=function(){var ie=g(n.mark(function ae(Fe){var de,Ie,Ve;return n.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return Ie=(de=this).db,(Fe=Fe||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamsFromDB",done:Fe.done}),z.validate({teamIds:{type:"array",required:!1}},Fe,"team::getTeamsFromDB"),de.processCallback(Fe),kt.next=8,Ie.getTeams(Fe);case 8:return Ve=kt.sent,Fe.callback(null,Ve),kt.abrupt("return",Ve);case 11:case"end":return kt.stop()}},ae,this)}));return function(ae){return ie.apply(this,arguments)}}(),V.getLocalTeamMembers=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getLocalTeamMembers",done:ie.done});var ae,Fe=this.db,de=[];function Ie(){ie.members=de,ie.done(ae,ie)}z.verifyOptions(ie,"teamId accounts","team::getLocalTeamMembers"),z.verifyParamType("accounts",ie.accounts,"array","team::getLocalTeamMembers"),this.processCallback(ie),Fe.enable?Fe.getInvalidTeamMembers(ie.teamId,ie.accounts).then(function(Ve){de=k(Ve).call(Ve,function(kt){return!!kt}),Ie()},function(Ve){ae=Ve,Ie()}):Ie()},V.getTeamMembersFromDB=function(){var ie=g(n.mark(function ae(Fe){var de,Ie,Ve;return n.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return Ie=(de=this).db,(Fe=Fe||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMembersFromDB",done:Fe.done}),z.validate({teamIds:{type:"array",required:!1},accountIds:{type:"array",required:!1}},Fe,"team::getTeamMembersFromDB"),de.processCallback(Fe),kt.next=8,Ie.getTeamMembers(Fe);case 8:return Ve=kt.sent,Fe.callback(null,Ve),kt.abrupt("return",Ve);case 11:case"end":return kt.stop()}},ae,this)}));return function(ae){return ie.apply(this,arguments)}}(),V.deleteLocalTeam=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteLocalTeam",done:ie.done});var ae,Fe=this.db;function de(){ie.done(ae,ie)}z.verifyOptions(ie,"teamId","team::deleteLocalTeam"),this.processCallback(ie),Fe.enable?Fe.deleteTeam(ie.teamId).then(function(){de()},function(Ie){ae=Ie,de()}):de()},V.muteTeamAll=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"muteTeamAll",done:ie.done}),z.verifyOptions(ie,"teamId mute","team::muteTeamAll"),ie.mute=ie.mute?1:0,this.processCallback(ie),this.sendCmd("muteTeamAll",ie)},V.sendTeamMsgReceipt=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"sendTeamMsgReceipt",done:ie.done}),z.verifyOptions(ie,"teamMsgReceipts","team::sendTeamMsgReceipt"),ie.teamMsgReceipts.length>50?this.logger.error("team::sendTeamMsgReceipt：teamMsgReceipts length over 50"):(this.processCallback(ie),this.sendCmd("sendTeamMsgReceipt",ie))},V.getTeamMsgReads=function(ie){(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMsgReads",done:ie.done}),z.verifyOptions(ie,"teamMsgReceipts","team::getTeamMsgReads"),this.processCallback(ie),this.sendCmd("getTeamMsgReads",ie)},V.getTeamMsgReadAccounts=function(ie){var ae=this;(ie=ie||{}).done=ue({instance:this,className:"NIMFn",funcName:"getTeamMsgReadAccounts",done:ie.done});var Fe,de=this;z.verifyOptions(ie,"teamMsgReceipt","team::getTeamMsgReadAccounts"),ie.callback=function(Ie,Ve,kt){Ie&&Fe?(Ve=Ve||{teamMsgReceipt:ie.teamMsgReceipt},ie.done(Ie,Ve,{teamMsgReceipt:ie.teamMsgReceipt,unreadAccounts:Fe.unreadAccounts,readAccounts:Fe.readAccounts})):ie.done(Ie,Ve,kt)},this.db.enable&&ie.teamMsgReceipt.idClient?this.db.getMsgReadDetail(ie.teamMsgReceipt.idClient).then(function(Ie){if(Fe=Ie,!Ie)return L.reject("no record");if(Ie.unreadAccounts&&Ie.unreadAccounts.length>0)return L.reject("unreadAccounts.length > 0");var Ve={teamMsgReceipt:ie.teamMsgReceipt,unreadAccounts:Ie.unreadAccounts,readAccounts:Ie.readAccounts};de.logger.info("getTeamMsgReadAccounts from db"),ie.done(null,{teamMsgReceipt:ie.teamMsgReceipt},Ve)}).catch(function(Ie){ae.logger.warn("db.getMsgReadDetail invalid",Ie),de.sendCmd("getTeamMsgReadAccounts",ie)}):de.sendCmd("getTeamMsgReadAccounts",ie)},V.addTeamMembersFollow=function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},ie),ie.done=ue({instance:this,className:"NIMFn",funcName:"addTeamMembersFollow",done:ie.done}),this.processCallback(ie),this.sendCmd("updateInfoInTeam",{teamMember:{teamId:ie.teamId},teamSpecialFollowUpdateTag:{accountIds:$(ie.accountIds),type:1},single:!0},ie.callback)},V.removeTeamMembersFollow=function(ie){z.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},ie),ie.done=ue({instance:this,className:"NIMFn",funcName:"removeTeamMembersFollow",done:ie.done}),this.processCallback(ie),this.sendCmd("updateInfoInTeam",{teamMember:{teamId:ie.teamId},teamSpecialFollowUpdateTag:{accountIds:$(ie.accountIds),type:0},single:!0},ie.callback)}},function(t,r,e){var n=e(207),g=e(3),y=e(10),i=e(23),k=e(9),L=e(11),$=e(2),V=e(4),z=e(6),re=e(41).fn,oe=e(0),le=oe.undef,ue=e(312),ie=e(206),ae=e(26).reportAPI;function Fe(de){var Ie=this.db;if(!Ie.enable)return g.resolve({valid:!1});var Ve=Ie.getSuperTeam(de),kt=Ie.getSuperTeamMembersTimetag(de);return g.all([Ve,kt]).then(function(At){var ze=n(At,2),Et=ze[0],cr=ze[1],er=Et&&Et.memberUpdateTime,or={timetag:cr=cr||0};return er&&cr>=er&&(or.valid=!0),g.resolve(or)}).catch(function(){return g.resolve({timetag:0})})}re.addSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamMembers",done:de.done}),oe.verifyOptions(de,"teamId accounts","superTeam::addSuperTeamMembers"),oe.verifyParamType("accounts",de.accounts,"array","superTeam::addSuperTeamMembers");var Ie=oe.deduplicate(de.accounts);this.processPs(de),this.processCallback(de);var Ve={teamId:de.teamId,accounts:Ie,ps:de.ps};this.sendCmd("addSuperTeamMembers",Ve,de.callback)},re.removeSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembers",done:de.done}),oe.verifyOptions(de,"teamId accounts","team::removeSuperTeamMembers"),oe.verifyParamType("accounts",de.accounts,"array","team::removeSuperTeamMembers");var Ie=oe.deduplicate(de.accounts);this.processCallback(de);var Ve={teamId:de.teamId,accounts:Ie};this.sendCmd("removeSuperTeamMembers",Ve,de.callback)},re.leaveSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"leaveSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","superTeam::leaveSuperTeam"),this.processCallback(de);var Ie={teamId:de.teamId};this.sendCmd("leaveSuperTeam",Ie,de.callback)},re.getSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeam",done:de.done});var Ie,Ve=this,kt=Ve.db;function At(){Ve.sendCmd("getSuperTeam",{teamId:de.teamId},de.callback)}oe.verifyOptions(de,"teamId","team::getSuperTeam"),Ve.processCallback(de),de.cbaop=function(ze){ze||Ve.logger.info("api::getSuperTeam: cbaop ".concat(Ie))},Ie=de.teamId,kt.enable&&!de.sync?kt.getSuperTeam(Ie).then(function(ze){ze&&ze.validToCurrentUser?(Ve.logger.log("api::getSuperTeam: db.getSuperTeam ".concat(Ie)),de.done(null,ze)):At()}).catch(function(){At()}):At()},re.getSuperTeams=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeams",done:de.done});var Ie=this,Ve=Ie.db,kt=0;function At(){Ie.sendCmd("getSuperTeams",{timetag:kt,NOTSTORE:"timetag"},de.callback)}oe.verifyOptions(de),Ie.processCallback(de),Ve.enable?Ve.getSuperTeamsTimetag().then(function(ze){kt=ze,At()},At):At()},re.updateSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","superTeam::updateSuperTeam"),de.action="update",this.processCallback(de),de.team=new ue(de),this.sendCmd("updateSuperTeam",{team:de.team,antispamTag:{antiSpamBusinessId:de.antiSpamBusinessId},single:!0},de.callback)},re.updateInfoInSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateInfoInSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","superTeam::updateInfoInSuperTeam"),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:new ie(de),single:!0},de.callback)},re.getSuperTeamMembersByJoinTime=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByJoinTime",done:de.done});var Ie=this,Ve=de,kt=Ve.joinTime,At=y(Ve),ze=Ve.limit,Et=Ve.teamId;At=!!At,le(kt)&&(kt=0),le(ze)&&(ze=100),oe.verifyOptions(de,"teamId","superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("joinTime",kt,"number","api::superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("limit",ze,"number","api::superTeam::getSuperTeamMembersByJoinTime"),Ie.processCallback(de),Ie.sendCmd("getSuperTeamMembersByJoinTime",{teamId:Et,limit:ze,joinTime:kt,reverse:At,timetag:0,NOTSTORE:"timetag"},de.callback)},re.getAllSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getAllSuperTeamMembers",done:de.done});var Ie=this,Ve=this.db;function kt(At){At=At||0,Ie.sendCmd("getSuperTeamMembers",{teamId:de.teamId,timetag:At,NOTSTORE:"timetag"},de.callback)}oe.verifyOptions(de,"teamId","superTeam::getAllSuperTeamMembers"),Ie.processCallback(de),i(Fe).call(Fe,this)(de.teamId).then(function(At){var ze=At.valid,Et=At.timetag;ze?(Ie.logger.info("getAllSuperTeamMembers from local db"),Ve.getSuperTeamMembers(de.teamId).then(function(cr){var er={teamId:de.teamId,members:cr};de.done(null,er)},function(){return kt()})):kt(Et)})},re.applySuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"applySuperTeam",done:de.done}),oe.verifyOptions(de,"teamId","team::applySuperTeam"),oe.verifyOptions(de,"teamId","team::applySuperTeam"),this.processPs(de),this.processCallback(de);var Ie={teamId:de.teamId,ps:de.ps};this.sendCmd("applySuperTeam",Ie,de.callback)},re.passSuperTeamApply=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"passSuperTeamApply",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::passSuperTeamApply"),this.processCallback(de);var Ie={idServer:de.idServer,teamId:de.teamId,from:de.from};this.sendCmd("passSuperTeamApply",Ie,de.callback)},re.rejectSuperTeamApply=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"rejectSuperTeamApply",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::rejectSuperTeamApply"),this.processPs(de),this.processCallback(de);var Ie={idServer:de.idServer,teamId:de.teamId,from:de.from,ps:de.ps};this.sendCmd("rejectSuperTeamApply",Ie,de.callback)},re.acceptSuperTeamInvite=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"acceptSuperTeamInvite",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::acceptSuperTeamInvite"),this.processCallback(de);var Ie={idServer:de.idServer,teamId:de.teamId,from:de.from};this.sendCmd("acceptSuperTeamInvite",Ie,de.callback)},re.rejectSuperTeamInvite=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"rejectSuperTeamInvite",done:de.done}),oe.verifyOptions(de,"idServer teamId from","team::rejectSuperTeamInvite"),this.processPs(de),this.processCallback(de);var Ie={idServer:de.idServer,teamId:de.teamId,from:de.from,ps:de.ps};this.sendCmd("rejectSuperTeamInvite",Ie,de.callback)},re.addSuperTeamManagers=function(de){var Ie;(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamManagers",done:de.done}),oe.verifyOptions(de,"teamId accounts","team::addSuperTeamManagers"),oe.verifyParamType("accounts",de.accounts,"array","team::addSuperTeamManagers"),this.processCallback(de);var Ve={teamId:de.teamId,accounts:k(Ie=de.accounts).call(Ie,0)};this.sendCmd("addSuperTeamManagers",Ve,de.callback)},re.removeSuperTeamManagers=function(de){var Ie;(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamManagers",done:de.done}),oe.verifyOptions(de,"teamId accounts","team::removeSuperTeamManagers"),oe.verifyParamType("accounts",de.accounts,"array","team::removeSuperTeamManagers"),this.processCallback(de);var Ve={teamId:de.teamId,accounts:k(Ie=de.accounts).call(Ie,0)};this.sendCmd("removeSuperTeamManagers",Ve,de.callback)},re.updateSuperTeamMembersMute=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeamMembersMute",done:de.done}),oe.verifyOptions(de,"teamId accounts mute","team::updateSuperTeamMembersMute"),oe.verifyParamType("accounts",de.accounts,"array","team::updateSuperTeamMembersMute"),oe.verifyArrayMax("accounts",de.accounts,10),this.processCallback(de),de.mute=de.mute?1:0,this.sendCmd("updateSuperTeamMembersMute",de)},re.updateSuperTeamMute=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateSuperTeamMute",done:de.done}),oe.verifyOptions(de,"teamId mute","team::updateSuperTeamMute"),de.mute=de.mute?1:0,this.processCallback(de),this.sendCmd("updateSuperTeamMute",de)},re.updateNickInSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"updateNickInSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId account","team::updateNickInSuperTeam"),this.processCallback(de),this.sendCmd("updateNickInSuperTeam",{superTeamMember:new ie(de),single:!0},de.callback)},re.transferSuperTeam=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"transferSuperTeam",done:de.done}),oe.verifyOptions(de,"teamId account leave","team::transferSuperTeam"),oe.verifyParamType("leave",de.leave,"boolean","team::transferSuperTeam"),this.processCallback(de);var Ie={teamId:de.teamId,account:de.account,leave:de.leave};this.sendCmd("transferSuperTeam",Ie,de.callback)},re.getSuperTeamMembersByAccounts=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getSuperTeamMembersByAccounts",done:de.done});var Ie=this,Ve=this.db,kt=de,At=kt.teamId,ze=kt.accounts;if(oe.verifyOptions(de,"teamId accounts","superTeam::getSuperTeamMembersByAccounts"),oe.verifyParamType("accounts",ze,"array","superTeam::getSuperTeamMembersByAccounts"),oe.verifyArrayMax("accounts",ze,20),ze.length<=0)return oe.onParamError("参数accounts不能为空数组","superTeam::getSuperTeamMembersByAccounts");function Et(){var cr=L(ze).call(ze,function(er){return At+"|"+er});Ie.processCallback(de),Ie.sendCmd("getSuperTeamMembersByAccounts",{memberIds:cr},function(er,or){de.done(null,{accounts:ze,members:or.members,invaldAccounts:or.invalid})})}Fe.call(this,At).then(function(cr){var er,or,dr;return cr.valid?(er=[],or=[],dr=[],$(ze).call(ze,function(lr){var nr,ur=Ve.getSuperTeamMemberById(V(nr="".concat(At,"-")).call(nr,lr)).then(function(ar){or.push(ar)}).catch(function(){dr.push(lr)});er.push(ur)}),void g.all(er).then(function(){de.done(null,{accounts:ze,members:or,invaldAccounts:dr})})):Et()}).catch(function(){return Et()})},re.getMutedSuperTeamMembers=function(de){(de=de||{}).done=ae({instance:this,className:"NIMFn",funcName:"getMutedSuperTeamMembers",done:de.done});var Ie=this,Ve=de,kt=Ve.joinTime,At=y(Ve),ze=Ve.limit,Et=Ve.teamId;At=!!At,le(kt)&&(kt=0),le(ze)&&(ze=100),oe.verifyOptions(de,"teamId","superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("joinTime",kt,"number","api::superTeam::getSuperTeamMembersByJoinTime"),oe.verifyParamType("limit",ze,"number","api::superTeam::getSuperTeamMembersByJoinTime"),this.processCallback(de),Ie.sendCmd("getMutedSuperTeamMembers",{teamId:Et,limit:ze,joinTime:kt,reverse:At},de.callback)},re.addSuperTeamMembersFollow=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oe.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},de),de.done=ae({instance:this,className:"NIMFn",funcName:"addSuperTeamMembersFollow",done:de.done}),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:{teamId:de.teamId},teamSpecialFollowUpdateTag:{accountIds:z(de.accountIds),type:1},single:!0},de.callback)},re.removeSuperTeamMembersFollow=function(de){oe.validate({teamId:{type:"string",allowEmpty:!1,required:!0},accountIds:{type:"array",min:1,itemType:"string",required:!0}},de),de.done=ae({instance:this,className:"NIMFn",funcName:"removeSuperTeamMembersFollow",done:de.done}),this.processCallback(de),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:{teamId:de.teamId},teamSpecialFollowUpdateTag:{accountIds:z(de.accountIds),type:0},single:!0},de.callback)},re.getMySuperTeamMembers=function(de){ae({instance:this,className:"NIMFn",funcName:"getMySuperTeamMembers",done:de.done,hasCallback:!1}),this.processCallback(de),oe.verifyOptions(de,"teamIds","team::getMySuperTeamMembers"),this.sendCmd("getMySuperTeamMembers",de)}},function(t,r,e){var n=e(60),g=e(11),y=e(3),i=e(2),k=e(4),L=e(10),$=e(781),V=e(34),z=e(9),re=e(93),oe=e(28),le=e(15),ue=e(8),ie=e(68),ae=e(78),Fe=e(64),de=e(61);function Ie(nr,ur){var ar=ae!==void 0&&Fe(nr)||nr["@@iterator"];if(!ar){if(oe(nr)||(ar=function(Sr,mr){var _r;if(Sr){if(typeof Sr=="string")return Ve(Sr,mr);var Ar=z(_r=Object.prototype.toString.call(Sr)).call(_r,8,-1);if(Ar==="Object"&&Sr.constructor&&(Ar=Sr.constructor.name),Ar==="Map"||Ar==="Set")return ie(Sr);if(Ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ar))return Ve(Sr,mr)}}(nr))||ur&&nr&&typeof nr.length=="number"){ar&&(nr=ar);var gr=0,pr=function(){};return{s:pr,n:function(){return gr>=nr.length?{done:!0}:{done:!1,value:nr[gr++]}},e:function(Sr){throw Sr},f:pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hr,Cr=!0,wr=!1;return{s:function(){ar=ar.call(nr)},n:function(){var Sr=ar.next();return Cr=Sr.done,Sr},e:function(Sr){wr=!0,hr=Sr},f:function(){try{Cr||ar.return==null||ar.return()}finally{if(wr)throw hr}}}}function Ve(nr,ur){(ur==null||ur>nr.length)&&(ur=nr.length);for(var ar=0,gr=new Array(ur);ar<ur;ar++)gr[ar]=nr[ar];return gr}var kt=e(41).fn,At=e(0),ze=At.undef,Et=At.notundef,cr=e(303),er=e(162),or=e(26).reportAPI,dr=e(876);function lr(nr,ur){var ar=this,gr=[],pr=[],hr=this.db,Cr=this;return hr.enable?(i(nr).call(nr,function(Sr){var mr=ar.protocol.getSessionInCache(Sr);mr?wr(mr,Sr):pr.push(hr.getSession(Sr).then(function(_r){return wr(_r,Sr)}))}),y.all(pr).then(function(){return gr})):(i(nr).call(nr,function(Sr){return wr(ar.protocol.getSessionInCache(Sr),Sr)}),y.resolve(gr));function wr(Sr,mr){var _r,Ar,Er,sr;Sr?Sr.lastMsg?Sr.scene&&Sr.to?Sr.ack>=Sr.lastMsg.time?Cr.logger.warn(k(_r="".concat(ur," not need ack ")).call(_r,Sr.id)):gr.push(Sr):Cr.logger.warn(k(Ar="".concat(ur," session.scene|to undefined ")).call(Ar,Sr.id)):Cr.logger.warn(k(Er="".concat(ur," session.lastMsg undefined ")).call(Er,Sr.id)):Cr.logger.warn(k(sr="".concat(ur," session undefined ")).call(sr,mr))}}kt.setCurrSession=function(nr){or({instance:this,className:"NIMFn",funcName:"setCurrSession",hasCallback:!1}),this.resetSessionUnread(nr),this.protocol.setCurrSession(nr)},kt.resetAllSessionUnread=function(){or({instance:this,className:"NIMFn",funcName:"resetAllSessionUnread",hasCallback:!1});for(var nr in this.protocol.sessionSet)this.protocol.sessionSet[nr].unread>0&&this.resetSessionUnread(nr)},kt.resetSessionsUnread=function(){var nr=de(n.mark(function ur(ar){var gr,pr,hr,Cr,wr,Sr,mr,_r,Ar=arguments;return n.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return gr=Ar.length>1&&Ar[1]!==void 0?Ar[1]:function(){},gr=or({instance:this,className:"NIMFn",funcName:"resetSessionsUnread",done:gr}),(pr=this).logger.info("resetSessionsUnread::",ar),Er.next=6,lr.call(this,ar,"api::resetSessionsUnread");case 6:if(hr=Er.sent,pr.protocol.resetSessionsUnread(hr),pr.options.syncSessionUnread&&hr.length!==0){Er.next=11;break}return gr(),Er.abrupt("return");case 11:Cr=g(hr).call(hr,function(sr){return{scene:sr.scene==="p2p"?0:1,to:sr.to,timetag:sr.lastMsg.time}}),wr=dr(Cr,50),Sr=Ie(wr),Er.prev=14,_r=n.mark(function sr(){var xr;return n.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return xr=mr.value,Nr.next=3,new y(function(Mr,br){pr.sendCmd("markSessionAckBatch",{sessionAckTags:xr},function(yr){yr?(gr(yr),br(yr)):Mr()})});case 3:case"end":return Nr.stop()}},sr)}),Sr.s();case 17:if((mr=Sr.n()).done){Er.next=21;break}return Er.delegateYield(_r(),"t0",19);case 19:Er.next=17;break;case 21:Er.next=26;break;case 23:Er.prev=23,Er.t1=Er.catch(14),Sr.e(Er.t1);case 26:return Er.prev=26,Sr.f(),Er.finish(26);case 29:gr(null);case 30:case"end":return Er.stop()}},ur,this,[[14,23,26,29]])}));return function(ur){return nr.apply(this,arguments)}}(),kt.resetSuperTeamSessionsUnread=function(){var nr=de(n.mark(function ur(ar){var gr,pr,hr,Cr,wr,Sr,mr,_r,Ar=arguments;return n.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return gr=Ar.length>1&&Ar[1]!==void 0?Ar[1]:function(){},gr=or({instance:this,className:"NIMFn",funcName:"resetSuperTeamSessionsUnread",done:gr}),(pr=this).logger.info("resetSuperTeamSessionsUnread::",ar),Er.next=6,lr.call(this,ar,"api::resetSuperTeamSessionsUnread");case 6:if(hr=Er.sent,pr.protocol.resetSessionsUnread(hr),pr.options.syncSessionUnread&&hr.length!==0){Er.next=11;break}return gr(),Er.abrupt("return");case 11:Cr=g(hr).call(hr,function(sr){return{to:sr.to,timetag:sr.lastMsg.time}}),wr=dr(Cr,50),Sr=Ie(wr),Er.prev=14,_r=n.mark(function sr(){var xr;return n.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return xr=mr.value,Nr.next=3,new y(function(Mr,br){pr.sendCmd("markSuperTeamSessionsAck",{sessionAckTags:xr},function(yr){yr?(gr(yr),br(yr)):Mr()})});case 3:case"end":return Nr.stop()}},sr)}),Sr.s();case 17:if((mr=Sr.n()).done){Er.next=21;break}return Er.delegateYield(_r(),"t0",19);case 19:Er.next=17;break;case 21:Er.next=26;break;case 23:Er.prev=23,Er.t1=Er.catch(14),Sr.e(Er.t1);case 26:return Er.prev=26,Sr.f(),Er.finish(26);case 29:gr(null);case 30:case"end":return Er.stop()}},ur,this,[[14,23,26,29]])}));return function(ur){return nr.apply(this,arguments)}}(),kt.resetSessionUnread=function(nr){var ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};ur=or({instance:this,className:"NIMFn",funcName:"resetSessionUnread",done:ur});var ar=this,gr=ar.options.resetUnreadMode!==!1,pr=function(){var Sr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;Sr?ur(Sr,nr):ur(null)};ar.logger.info("resetSessionUnread::use reset mode",gr);var hr=ar.protocol.getSessionInCache(nr),Cr=!hr&&this.db.enable?ar.db.getSession(nr):y.resolve(hr);function wr(Sr){if(!Sr.lastMsg&&!Sr.updateTime)return ar.logger.warn("api::resetSessionUnread: session.lastMsg undefined ".concat(nr)),pr();if(!Sr.scene||!Sr.to)return ar.logger.warn("api::resetSessionUnread: session.scene|to undefined ".concat(nr)),pr();var mr;if(mr=Sr.lastMsg?Sr.lastMsg.time:Sr.updateTime,Sr&&Sr.ack&&Sr.ack>=mr)return ar.logger.warn("api::resetSessionUnread: session ack not needs ".concat(nr)),pr();var _r={done:function(Er){Er?(ar.logger.error({message:Er||"mark ack failed",callFunc:"resetSessionUnread"}),pr(Er||"mark ack failed")):(gr||ar.protocol.resetSessionUnread(Sr),pr())}};if(ar.processCallback(_r),Sr.scene==="superTeam")ar.sendCmd("markSuperTeamSessionAck",{to:Sr.to,timetag:mr},_r.callback);else{var Ar={scene:Sr.scene==="p2p"?0:1,to:Sr.to,timetag:mr};ar.sendCmd("markSessionAck",Ar,_r.callback)}}Cr.then(function(Sr){return Sr?ar.options.syncSessionUnread?(gr&&ar.protocol.resetSessionUnread(Sr),void wr(Sr)):(ar.protocol.resetSessionUnread(Sr),pr()):(ar.logger.warn("api::resetSessionUnread: session undefined ".concat(nr)),pr())})},kt.resetCurrSession=function(){or({instance:this,className:"NIMFn",funcName:"resetCurrSession",hasCallback:!1}),this.protocol.setCurrSession("")},kt.insertLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"insertLocalSession",done:nr.done});var ur,ar;function gr(){nr.session=ar,nr.done(ur,nr)}At.verifyOptions(nr,"scene to","scene::insertLocalSession"),At.verifyParamValid("scene",nr.scene,this.message.validScenes,"scene::insertLocalSession"),this.protocol.insertLocalSession(nr).then(function(pr){ar=pr,gr()},function(pr){ur=pr,gr()})},kt.getLocalSessions=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getLocalSessions",done:nr.done});var ur=[];At.verifyOptions(nr),ze(nr.limit)&&(nr.limit=100),At.verifyParamType("limit",nr.limit,"number","scene::getLocalSessions"),Et(L(nr))?At.verifyParamType("reverse",L(nr),"boolean","scene::getLocalSessions"):nr.reverse=!1,this.processCallback(nr);var ar=$(this.protocol.sessionSet),gr=0,pr=nr.lastSessionId;if(L(nr)){var hr,Cr=Ie(ar);try{for(Cr.s();!(hr=Cr.n()).done;){var wr=hr.value,Sr=wr.id;if(pr)Sr===pr&&(pr=void 0);else if(wr.lastMsg!==void 0&&!wr.isDeleted){if(++gr>nr.limit)break;ur.push(V({},wr))}}}catch(sr){Cr.e(sr)}finally{Cr.f()}}else{var mr,_r,Ar=Ie(ar);try{for(Ar.s();!(_r=Ar.n()).done;){var Er=_r.value;if(pr===Er.id)break;Er.lastMsg===void 0||Er.isDeleted||ur.push(Er)}}catch(sr){Ar.e(sr)}finally{Ar.f()}ur=L(mr=z(ur).call(ur,-nr.limit)).call(mr)}this.logger.debug("getLocalSessions::sessions is",ur),ur=g(ur).call(ur,function(sr){return re(er).call(er,sr)}),nr.sessions=ur,delete nr.callback,nr.done(void 0,nr)},kt.getLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getLocalSession",done:nr.done});var ur=this,ar=ur.db,gr=null;if(At.verifyOptions(nr,"sessionId","scene::getLocalSession"),At.verifyParamType("sessionId",nr.sessionId,"string","scene::getLocalSession"),gr=ur.protocol.getSessionInCache(nr.sessionId),ur.logger.debug("getLocalSession::cache session is",gr),!gr&&ar.enable)return ur.processCallback(nr),void ar.getSession(nr.sessionId).then(function(pr){pr&&(gr=pr,ur.logger.debug("getLocalSession::db session is",gr)),nr.done(null,gr)}).catch(function(pr){nr.done(pr)});nr.done(null,re(er).call(er,gr))},kt.getLocalSessionsByMsgType=function(nr){var ur;(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getLocalSessionsByMsgType",done:nr.done});var ar=this.db,gr=nr.exclude,pr=[],hr=z(ur=cr.validTypes).call(ur,0);if(Et(gr)){if(typeof gr=="string")gr=[gr];else if(!oe(gr))return void At.onParamInvalidType("exclude",["string","string array"],"","exclude::getLocalSessionsByMsgType");gr=le(gr).call(gr,function(Cr){return ue(hr).call(hr,Cr)>-1}),hr=le(hr).call(hr,function(Cr){return ue(gr).call(gr,Cr)===-1})}this.processCallback(nr),ar.enable?ar.getSessions().then(function(Cr){gr&&gr.length!==0?hr&&hr.length!==0?(i(Cr).call(Cr,function(wr,Sr){var mr,_r,Ar;wr.lastMsg&&ue(gr).call(gr,wr.lastMsg.type)>-1&&(mr=Sr,_r=wr.id,Ar=ar.getMsgs({sessionId:_r,limit:1,types:hr}).then(function(Er){return Er&&Er[0]?Cr[mr].lastMsg=Er[0]:Cr[mr].lastMsg=null,y.resolve()}),pr.push(Ar))}),y.all(pr).then(function(){nr.done(null,{exclude:gr,sessions:Cr})})):nr.done(null,{exclude:gr,sessions:g(Cr).call(Cr,function(wr){wr.lastMsg=null})}):nr.done(null,{exclude:gr,sessions:Cr})}):nr.done(null,{exclude:gr,sessions:[]})},kt.updateLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"updateLocalSession",done:nr.done});var ur,ar=this,gr=ar.db;At.verifyOptions(nr,"id","scene::updateLocalSession"),ar.processCallback(nr);var pr=At.filterObj(nr,"id localCustom");function hr(){nr.needNotify!==!1&&ar.protocol.onUpdateSession(pr),nr.session=pr,nr.done(ur,nr)}pr=ar.protocol.updateSessionInCache(nr),gr.enable&&pr?gr.updateSession(pr).then(function(Cr){pr=Cr,hr()},function(Cr){ur=Cr,hr()}):hr()},kt.deleteLocalSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteLocalSession",done:nr.done});var ur,ar=this,gr=ar.db;At.verifyOptions(nr,"id","session::deleteLocalSession"),ar.processCallback(nr);var pr=ar.protocol.getSessionInCache(nr.id);if(ar.protocol.deleteSessionInCache(nr.id,nr.isLogic),gr.enable?(nr.isLogic?gr.deleteSessionLogic(nr.id):gr.deleteSession(nr.id,pr)).then(function(){ar.logger.info("sessions::deleteSessionInDb::delete session done",nr.id),Cr()},function(wr){ur=wr,Cr()}):Cr(),nr.isDeleteRoaming){var hr=typeof nr.id=="string"?[nr.id]:nr.id;hr=g(hr).call(hr,function(wr){return wr.replace("-","|")}),this.sendCmd("deleteSessions",{sessions:hr},function(){})}function Cr(){nr.done(ur,nr)}},kt.deleteSession=function(nr,ur){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteSession",done:nr.done}),ur||this.logger.warn('this api will be abandon,please use "deleteLocalSession"'),At.verifyOptions(nr,"scene to","session::deleteSession"),this.processCallback(nr),nr.sessions=[{scene:nr.scene,to:nr.to}],this.deleteSessions(nr)},kt.deleteRoamingMsgBySession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteRoamingMsgBySession",done:nr.done}),this.deleteSession(nr,!0)},kt.deleteSessions=function(nr){var ur,ar;(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteSessions",done:nr.done}),At.verifyOptions(nr,"sessions","session::deleteSessions"),At.verifyParamType("sessions",nr.sessions,"array","session::deleteSessions"),i(ur=nr.sessions).call(ur,function(gr,pr){At.verifyOptions(gr,"scene to",!0,"sessions["+pr+"].","session::deleteSessions")}),this.processCallback(nr),this.sendCmd("deleteSessions",{sessions:g(ar=nr.sessions).call(ar,function(gr){return gr.scene+"|"+gr.to})},nr.callback)},kt.getServerSessions=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getServerSessions",done:nr.done}),Et(nr.minTimestamp)&&At.verifyParamType("minTimestamp",nr.minTimestamp,"number","session::deleteSessions"),Et(nr.maxTimestamp)&&At.verifyParamType("maxTimestamp",nr.maxTimestamp,"number","session::deleteSessions"),Et(nr.needLastMsg)&&(nr.needLastMsg=nr.needLastMsg===!1?0:1),Et(nr.limit)&&(At.verifyParamType("limit",nr.limit,"number","session::deleteSessions"),At.verifyParamMax("limit",nr.limit,100,"scene::getLocalSessions")),this.processCallback(nr),this.sendCmd("getServerSessions",{sessionReqTag:nr},nr.callback)},kt.getServerSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getServerSession",done:nr.done}),At.verifyOptions(nr,"scene to","scene::getServerSession"),At.verifyParamValid("scene",nr.scene,this.message.validScenes,"scene::getServerSession"),At.verifyParamType("to",nr.to,"string","to::getServerSession");var ur=nr.scene+"|"+nr.to;nr.scene==="superTeam"&&(ur="super_team|"+nr.to),this.processCallback(nr),this.sendCmd("getServerSession",{session:{id:ur}},nr.callback)},kt.updateServerSession=function(nr){(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"updateServerSession",done:nr.done}),At.verifyOptions(nr,"scene to","scene::updateServerSession"),At.verifyParamValid("scene",nr.scene,this.message.validScenes,"scene::updateServerSession"),At.verifyParamType("to",nr.to,"string","to::updateServerSession"),Et(nr.extra)&&At.verifyParamType("extra",nr.extra,"string","extra::updateServerSession");var ur=nr.scene+"|"+nr.to;nr.scene==="superTeam"&&(ur="super_team|"+nr.to),this.processCallback(nr),this.sendCmd("updateServerSession",{session:{id:ur,ext:nr.extra||""}},nr.callback)},kt.deleteServerSessions=function(nr){var ur,ar=this;(nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteServerSessions",done:nr.done}),At.verifyOptions(nr,"sessions","scene::deleteServerSessions"),At.verifyParamType("sessions",nr.sessions,"array","sessions::deleteServerSessions");var gr=[];i(ur=nr.sessions).call(ur,function(pr){At.verifyParamValid("scene",pr.scene,ar.message.validScenes,"scene::deleteServerSessions"),At.verifyParamType("to",pr.to,"string","to::deleteServerSessions");var hr=pr.scene+"|"+pr.to;pr.scene==="superTeam"&&(hr="super_team|"+pr.to),gr.push({id:hr})}),this.processCallback(nr),this.sendCmd("deleteServerSessions",{sessions:gr},nr.callback)},kt.updateSessionsWithMoreRoaming=function(nr){var ur;if((nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"updateSessionsWithMoreRoaming",done:nr.done}),At.verifyOptions(nr,"msg","session::updateSessionsWithMoreRoaming"),At.verifyCallback(nr,"done","session::updateSessionsWithMoreRoaming"),!this.db.enable)return nr.done(null,"db is disable");var ar={time:nr.msg.time,idServer:nr.msg.idServer,to:nr.msg.to,from:nr.msg.from};At.verifyParamType("msg.time",nr.msg.time,"number","time::updateSessionsWithMoreRoaming"),At.verifyParamType("msg.idServer",nr.msg.idServer,"string","idServer::updateSessionsWithMoreRoaming"),At.verifyParamType("msg.from",nr.msg.from,"string","from::updateSessionsWithMoreRoaming"),At.verifyParamType("msg.to",nr.msg.to,"string","to::updateSessionsWithMoreRoaming"),At.verifyParamValid("scene",nr.msg.scene,this.message.validScenes,"scene::updateSessionsWithMoreRoaming");var gr=ar.to===this.account?ar.from:ar.to;ar.id=k(ur="".concat(nr.msg.scene,"-")).call(ur,gr),this.db.updateSessionsWithMoreRoaming(ar).then(function(pr){nr.done(null,pr)}).catch(function(pr){nr.done(pr)})},kt.deleteSessionsWithMoreRoaming=function(nr){if((nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"deleteSessionsWithMoreRoaming",done:nr.done}),At.verifyOptions(nr,"id","session::deleteSessionsWithMoreRoaming"),At.verifyCallback(nr,"done","session::deleteSessionsWithMoreRoaming"),!this.db.enable)return nr.done(null,"db is disable");this.db.deleteSessionsWithMoreRoaming(nr.id).then(function(ur){nr.done(null,ur)}).catch(function(ur){nr.done(ur)})},kt.getSessionsWithMoreRoaming=function(nr){if((nr=nr||{}).done=or({instance:this,className:"NIMFn",funcName:"getSessionsWithMoreRoaming",done:nr.done}),At.verifyCallback(nr,"done","session::getSessionsWithMoreRoaming"),!this.db.enable)return nr.done(null,"db is disable");this.db.getSessionsWithMoreRoaming(nr.id).then(function(ur){nr.done(null,ur)}).catch(function(ur){nr.done(ur)})}},function(t,r,e){var n=e(877),g=e(878),y=e(879),i=Math.ceil,k=Math.max;t.exports=function(L,$,V){$=(V?g(L,$,V):$===void 0)?1:k(y($),0);var z=L==null?0:L.length;if(!z||$<1)return[];for(var re=0,oe=0,le=Array(i(z/$));re<z;)le[oe++]=n(L,re,re+=$);return le}},function(t,r){t.exports=function(e,n,g){var y=-1,i=e.length;n<0&&(n=-n>i?0:i+n),(g=g>i?i:g)<0&&(g+=i),i=n>g?0:g-n>>>0,n>>>=0;for(var k=Array(i);++y<i;)k[y]=e[y+n];return k}},function(t,r,e){var n=e(204),g=e(205),y=e(306),i=e(94);t.exports=function(k,L,$){if(!i($))return!1;var V=typeof L;return!!(V=="number"?g($)&&y(L,$.length):V=="string"&&L in $)&&n($[L],k)}},function(t,r,e){var n=e(880);t.exports=function(g){var y=n(g),i=y%1;return y==y?i?y-i:y:0}},function(t,r,e){var n=e(881);t.exports=function(g){return g?(g=n(g))===1/0||g===-1/0?17976931348623157e292*(g<0?-1:1):g==g?g:0:g===0?g:0}},function(t,r,e){var n=e(882),g=e(94),y=e(884),i=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,L=/^0o[0-7]+$/i,$=parseInt;t.exports=function(V){if(typeof V=="number")return V;if(y(V))return NaN;if(g(V)){var z=typeof V.valueOf=="function"?V.valueOf():V;V=g(z)?z+"":z}if(typeof V!="string")return V===0?V:+V;V=n(V);var re=k.test(V);return re||L.test(V)?$(V.slice(2),re?2:8):i.test(V)?NaN:+V}},function(t,r,e){var n=e(883),g=/^\s+/;t.exports=function(y){return y&&y.slice(0,n(y)+1).replace(g,"")}},function(t,r){var e=/\s/;t.exports=function(n){for(var g=n.length;g--&&e.test(n.charAt(g)););return g}},function(t,r,e){var n=e(126),g=e(108);t.exports=function(y){return typeof y=="symbol"||g(y)&&n(y)=="[object Symbol]"}},function(t,r,e){var n=e(127),g=e(886),y=e(887),i=e(60),k=e(61),L=e(51),$=e(15),V=e(9),z=e(2),re=e(28),oe=e(121),le=e(11),ue=e(4),ie=e(6),ae=e(10),Fe=e(892),de=e(5),Ie=e(52),Ve=e(53),kt=e(54),At=e(55),ze=e(42),Et=["callback","done"];function cr(mr,_r){var Ar=de(mr);if(Ie){var Er=Ie(mr);_r&&(Er=$(Er).call(Er,function(sr){return Ve(mr,sr).enumerable})),Ar.push.apply(Ar,Er)}return Ar}function er(mr){for(var _r=1;_r<arguments.length;_r++){var Ar,Er,sr=arguments[_r]!=null?arguments[_r]:{};_r%2?z(Ar=cr(Object(sr),!0)).call(Ar,function(xr){L(mr,xr,sr[xr])}):kt?At(mr,kt(sr)):z(Er=cr(Object(sr))).call(Er,function(xr){ze(mr,xr,Ve(sr,xr))})}return mr}var or=e(41).fn,dr=e(0),lr=dr.undef,nr=dr.notundef,ur=e(48),ar=e(162),gr=e(161),pr=e(35),hr=e(80),Cr=e(26).reportAPI,wr=e(12);or.sendG2Msg=function(mr){return(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"sendG2Msg",done:mr.done}),this.processCallback(mr),mr.msg=new this.message.G2Message(mr),this.sendMsg(mr)},or.beforeSendMsg=function(mr){var _r,Ar=this.protocol,Er=mr.msg;switch(Er.to===this.account&&(Er.fromDeviceId=ur.deviceId),Er.userUpdateTime=Ar.myInfo&&Ar.myInfo.updateTime,Er.getScene()){case"p2p":_r="sendMsg";break;case"team":_r="sendTeamMsg";break;case"superTeam":_r="sendSuperTeamMsg"}$(mr)&&(_r="sendFilterMsg",Er.filter=!0),mr.cmd=_r},or.afterSendMsg=function(mr){var _r=mr.rtnMsg;if(!_r||!_r.ignore){var Ar=this.protocol.getSessionInCache(_r.sessionId);mr.isLocal&&Ar&&Ar.lastMsg&&_r.time<Ar.lastMsg.time||this.protocol.onUpdateSession(ar.genSessionByMsg(_r))}},or.beforeForwardMsg=function(mr){dr.verifyOptions(mr,"msg scene to","msg::beforeForwardMsg"),mr.msg.scene=mr.scene,mr.msg.to=mr.to},or.markMsgRead=function(mr){var _r=this.protocol;!mr||this.db.enable||_r.options.autoMarkRead?this.logger.warn("api::markMsgRead: 不需要标记消息为已收到 (没有消息, 或者启用了数据库, 或者启用了自动标记已收到)"):_r.markMsgRead(mr,!0)},or.sendMsgReceipt=function(mr){if((mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"sendMsgReceipt",done:mr.done}),dr.verifyOptions(mr),this.processCallback(mr),mr.msg){dr.verifyOptions(mr,"msg","msg::sendMsgReceipt");var _r=mr.msg;dr.verifyOptions(_r,"target idClient time",!0,"msg.","msg::sendMsgReceipt"),this.protocol.shouldSendMsgReceipt(_r)?this.sendCmd("sendMsgReceipt",{msgReceipt:{to:_r.target,idClient:_r.idClient,time:_r.time}},mr.callback):mr.done()}else mr.done()},or.isMsgRemoteRead=function(mr){return Cr({instance:this,className:"NIMFn",funcName:"isMsgRemoteRead",hasCallback:!1}),this.protocol.isMsgRemoteRead(mr)},or.recallMsg=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"recallMsg",done:mr.done}),this.deleteMsg(mr,!0)},or.deleteMsg=function(mr,_r){var Ar;(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteMsg",done:mr.done}),_r||this.logger.warn("this api will be abandon,please use “recallMsg”"),dr.verifyOptions(mr,"msg","msg::deleteMsg");var Er=mr.msg;if(Er.scene!=="team"&&Er.from!==this.account||Er.status!=="success"||Er.isLocal)return mr.done(pr.newParamError("只能删除自己发的, 并且发送成功的消息，且不能是本地消息",{callFunc:"msg::deleteMsg"}),mr);dr.verifyOptions(Er,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsg"),dr.verifyParamValid("msg.scene",Er.scene,this.message.validScenes,"msg::deleteMsg"),this.processPs(mr),this.processCallback(mr);var sr={deletedIdClient:Er.idClient,deletedIdServer:Er.idServer,time:Er.time,from:Er.from,to:Er.to,opeAccount:Er.from},xr=Er.scene==="superTeam"?"deleteSuperTeamMsg":"deleteMsg";sr.type="deleteMsg"+Er.scene[0].toUpperCase()+V(Ar=Er.scene).call(Ar,1);var Nr=["ps","apnsText","pushPayload","env","opeAccount","attach"];z(Nr).call(Nr,function(Mr){mr[Mr]&&(sr[Mr]=mr[Mr])}),sr=new gr(sr),this.sendCmd(xr,{sysMsg:sr,msg:Er},mr.callback)},or.deleteMsgSelf=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteMsgSelf",done:mr.done}),dr.verifyOptions(mr,"msg","msg::deleteMsgSelf");var _r=mr.msg;if(_r.scene==="superTeam")return mr.done(pr.newParamError("单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelf"}),mr);dr.verifyOptions(_r,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelf"),dr.verifyParamValid("msg.scene",_r.scene,this.message.validScenes,"msg::deleteMsgSelf"),this.processCallback(mr);var Ar={scene:_r.scene==="p2p"?1:2,from:_r.from,to:_r.to,time:_r.time,idClient:_r.idClient,idServer:_r.idServer,custom:mr.custom,type:_r.type};this.sendCmd("deleteMsgSelf",{deleteMsgSelfTag:Ar},mr.callback)},or.deleteMsgSelfBatch=function(mr){var _r,Ar,Er,sr=this;if((mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteMsgSelfBatch",done:mr.done}),dr.verifyOptions(mr,"msgs","msg::deleteMsgSelfBatch"),(!re(mr.msgs)||mr.msgs.length===0||mr.msgs.length>100)&&dr.onParamError("msgs应该是数组且数据长度应大于0小于等于100","msg::deleteMsgSelfBatch"),oe(_r=mr.msgs).call(_r,function(Nr){return Nr.scene==="superTeam"}))return mr.done(pr.newParamError("消息列表中存在超大群消息，单向删除暂不支持超大群场景",{callFunc:"msg::deleteMsgSelfBatch"}),mr);z(Ar=mr.msgs).call(Ar,function(Nr){dr.verifyOptions(Nr,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelfBatch"),dr.verifyParamValid("msg.scene",Nr.scene,sr.message.validScenes,"msg::deleteMsgSelfBatch")}),this.processCallback(mr);var xr=le(Er=mr.msgs).call(Er,function(Nr){var Mr;return{scene:Nr.scene==="p2p"?1:2,from:Nr.from,to:Nr.to,time:Nr.time,idClient:Nr.idClient,idServer:Nr.idServer,sessionId:Nr.sessionId||ue(Mr="".concat(Nr.scene,"-")).call(Mr,Nr.to),custom:mr.custom?typeof mr.custom=="string"?mr.custom:ie(mr.custom):void 0,type:Nr.type}});this.sendCmd("deleteMsgSelfBatch",{deleteMsgSelfTags:xr},mr.callback)};var Sr={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};or.getHistoryMsgs=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"getHistoryMsgs",done:mr.done}),this.protocol.syncing&&this.logger.warn("Please call getHistoryMsgs after onsyncdone callback"),dr.verifyOptions(mr,"scene to","msg::getHistoryMsgs"),dr.verifyParamValid("scene",mr.scene,this.message.validScenes,"msg::getHistoryMsgs"),mr.beginTime===void 0&&(mr.beginTime=0);var _r,Ar=this.protocol.getSessionInCache(mr.scene+"-"+mr.to),Er=Ar&&Ar.lastEmptyTime;if(Er>mr.beginTime&&(mr.beginTime=Er),dr.verifyParamType("beginTime",mr.beginTime,"number","msg::getHistoryMsgs"),mr.endTime===void 0&&(mr.endTime=0),dr.verifyParamType("endTime",mr.endTime,"number","msg::getHistoryMsgs"),mr.lastMsgId=mr.lastMsgId&&+mr.lastMsgId?mr.lastMsgId:"0",mr.limit===void 0&&(mr.limit=100),dr.verifyParamType("limit",mr.limit,"number","msg::getHistoryMsgs"),dr.verifyParamMax("limit",mr.limit,100,"msg::getHistoryMsgs"),nr(ae(mr))?dr.verifyParamType("reverse",ae(mr),"boolean","msg::getHistoryMsgs"):mr.reverse=!1,nr(mr.asc)?dr.verifyParamType("asc",mr.asc,"boolean","msg::getHistoryMsgs"):mr.asc=!1,lr(mr.msgTypes))mr.msgTypes=[];else if(re(mr.msgTypes)){var sr,xr;mr.msgTypes=le(sr=mr.msgTypes).call(sr,function(Mr){return Sr[Mr]}),mr.msgTypes=$(xr=mr.msgTypes).call(xr,function(Mr){return typeof Mr=="number"})}else typeof Sr[mr.msgTypes]=="number"?mr.msgTypes=[Sr[mr.msgTypes]]:mr.msgTypes=[];switch(this.processCallback(mr),mr.cbaop=function(Mr,br){if(!Mr){var yr;mr.asc&&(br.msgs=ae(yr=br.msgs).call(yr)),br.msgs=hr.deduplication(br.msgs)}},mr.scene){case"p2p":_r="getHistoryMsgs";break;case"team":_r="getTeamHistoryMsgs";break;case"superTeam":_r="getSuperTeamHistoryMsgs"}var Nr={scene:mr.scene,to:mr.to,beginTime:mr.beginTime,endTime:mr.endTime,lastMsgId:mr.lastMsgId,limit:mr.limit,reverse:ae(mr),msgTypes:mr.msgTypes};this.sendCmd(_r,Nr,mr.callback)},or.searchHistoryMsgs=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"searchHistoryMsgs",done:mr.done}),dr.verifyOptions(mr,"scene to keyword","msg::searchHistoryMsgs"),dr.verifyParamValid("scene",mr.scene,this.message.validScenes,"msg::searchHistoryMsgs"),mr.beginTime===void 0&&(mr.beginTime=0);var _r,Ar=this.protocol.getSessionInCache(mr.scene+"-"+mr.to),Er=Ar&&Ar.lastEmptyTime;switch(Er>mr.beginTime&&(mr.beginTime=Er),dr.verifyParamType("beginTime",mr.beginTime,"number","msg::searchHistoryMsgs"),mr.endTime===void 0&&(mr.endTime=0),dr.verifyParamType("endTime",mr.endTime,"number","msg::searchHistoryMsgs"),mr.limit===void 0&&(mr.limit=100),dr.verifyParamType("limit",mr.limit,"number","msg::searchHistoryMsgs"),dr.verifyParamMax("limit",mr.limit,100,"msg::searchHistoryMsgs"),nr(ae(mr))?dr.verifyParamType("reverse",ae(mr),"boolean","msg::searchHistoryMsgs"):mr.reverse=!1,nr(mr.asc)?dr.verifyParamType("asc",mr.asc,"boolean","msg::searchHistoryMsgs"):mr.asc=!1,this.processCallback(mr),mr.asc&&(mr.cbaop=function(xr,Nr){var Mr;xr||(Nr.msgs=ae(Mr=Nr.msgs).call(Mr))}),mr.scene){case"p2p":_r="searchHistoryMsgs";break;case"team":_r="searchTeamHistoryMsgs"}var sr=dr.filterObj(mr,"scene to beginTime endTime keyword limit reverse");this.sendCmd(_r,sr,mr.callback)},or.getLocalMsgs=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"getLocalMsgs",done:mr.done});var _r=this,Ar=_r.db,Er=[];dr.verifyOptions(mr);var sr=!1;nr(mr.start)&&(sr=!0,dr.verifyParamType("start",mr.start,"number","msg::getLocalMsgs"));var xr=!1;if(nr(mr.end)&&(xr=!0,dr.verifyParamType("end",mr.end,"number","msg::getLocalMsgs")),sr&&xr&&mr.end<=mr.start&&dr.onParamError("参数 end 必须晚于 start"),nr(mr.subTypes)&&dr.verifyParamType("subTypes",mr.subTypes,"array","msg::getLocalMsgs"),lr(mr.limit)&&(mr.limit=100),dr.verifyParamType("limit",mr.limit,"number","msg::getLocalMsgs"),dr.verifyParamMin("limit",mr.limit,1,"msg::getLocalMsgs"),_r.processCallback(mr),Ar.enable){var Nr=new Date().getTime();Ar.getMsgs(mr).then(function(br){var yr;Er=br,_r.logger.info(ue(yr="api::getLocalMsgs: query db cost ".concat(new Date().getTime()-Nr," ms and the conditions is ")).call(yr,ie(mr))),Mr()},function(br){(br=br||{}).message=br.message||"msg::getLocalMsgs:db error",Mr()})}else Mr();function Mr(){var br=dr.simpleClone(mr);br.msgs=Er,delete br.callback,delete br.done,mr.done(null,br)}},or.getLocalMsgsInUnread=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"getLocalMsgsInUnread",done:mr.done});var _r=this;dr.validate({sessionId:{type:"string",allowEmpty:!1}},mr),this.getLocalSession({sessionId:mr.sessionId,done:function(Ar,Er){Ar?mr.done&&mr.done(Ar):Er?(Er.ack=Er.ack||0,_r.getLocalMsgs(er({sessionId:mr.sessionId,start:Er.ack,limit:Fe,filterFunc:function(sr){return sr.flow==="in"&&sr.isUnreadable===!0},done:function(){}},mr))):mr.done&&mr.done(new Error("session ".concat(mr.sessionId," not exist")))}})},or.getLocalMsgByIdClient=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"getLocalMsgByIdClient",done:mr.done});var _r=this.db,Ar=null,Er=null;function sr(){mr.msg=Er,mr.done(Ar,mr)}dr.verifyOptions(mr,"idClient","msg::getLocalMsgByIdClient"),this.processCallback(mr),_r.enable?_r.getMsgByIdClient(mr.idClient).then(function(xr){xr&&(Er=xr),sr()},function(xr){Ar=xr,sr()}):(this.logger.warn("because db is false,error is null"),sr())},or.getLocalMsgsByIdClients=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"getLocalMsgsByIdClients",done:mr.done});var _r,Ar=this.db,Er=[];function sr(){mr.msgs=Er,mr.done(_r,mr)}dr.verifyOptions(mr,"idClients","msg::getLocalMsgByIdClients"),dr.verifyParamType("idClients",mr.idClients,"array","msg::getLocalMsgByIdClients"),this.processCallback(mr),Ar.enable?Ar.getMsgsByIdClients(mr.idClients).then(function(xr){Er=$(xr).call(xr,function(Nr){return!!Nr}),sr()},function(xr){_r=xr,sr()}):sr()},or.updateLocalMsg=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"updateLocalMsg",done:mr.done});var _r,Ar=this.db,Er=null;if(dr.verifyOptions(mr,"idClient","msg::updateLocalMsg"),this.processCallback(mr),Ar.enable){var sr=dr.filterObj(mr,"idClient localCustom");Ar.updateMsg(sr).then(function(Nr){Er=Nr,xr()},function(Nr){_r=Nr,xr()})}else xr();function xr(){mr.msg=Er,mr.done(_r,mr)}},or.deleteLocalMsg=function(){var mr=k(i.mark(function _r(Ar){var Er,sr,xr,Nr;return i.wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return Nr=function(){Ar.done(sr,Ar)},(Ar=Ar||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteLocalMsg",done:Ar.done}),Er=this,dr.verifyOptions(Ar,"msg","msg::deleteLocalMsg"),xr=Ar.msg,dr.verifyOptions(xr,"idClient sessionId",!0,"msg.","msg::deleteLocalMsg"),Er.processCallback(Ar),Mr.prev=8,Mr.next=11,Er.protocol.deleteLocalMsg(xr);case 11:Nr(),Mr.next=18;break;case 14:Mr.prev=14,Mr.t0=Mr.catch(8),sr=Mr.t0,Nr();case 18:case"end":return Mr.stop()}},_r,this,[[8,14]])}));return function(_r){return mr.apply(this,arguments)}}(),or.deleteLocalMsgsBySession=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgsBySession",done:mr.done});var _r,Ar=this,Er=Ar.db;dr.verifyOptions(mr,"scene to","msg::deleteLocalMsgsBySession"),dr.verifyParamValid("scene",mr.scene,Ar.message.validScenes,"msg::deleteLocalMsgsBySession"),mr.sessionId=mr.scene+"-"+mr.to,mr.delLastMsg=mr.delLastMsg===!0,mr.isTag=mr.isTag===!0;var sr=new Date().getTime();function xr(){mr.done(_r,mr)}Ar.processCallback(mr);var Nr={id:mr.sessionId};mr.delLastMsg&&(Nr.lastMsg=null),mr.isTag&&(Nr.lastEmptyTime=sr),Er.enable?Er.deleteMsgsBySessionId(mr).then(function(){mr.delLastMsg||mr.isTag?Er.updateSession(Nr).then(function(Mr){Ar.protocol.onUpdateSession(Mr),mr.session=Mr,xr()}):xr()}).catch(function(Mr){_r=Mr,xr()}):(this.logger.warn("because db is false,error is null"),xr(),(mr.delLastMsg||mr.isTag)&&Ar.protocol.onUpdateSession(Nr))},or.deleteLocalMsgsByTime=function(mr){var _r=this.db;wr.isBrowser&&_r.enable&&(nr((mr=mr||{}).start)?dr.verifyParamType("start",mr.start,"number","msg::deleteLocalMsgsByTime"):mr.start=0,nr(mr.end)?dr.verifyParamType("end",mr.end,"number","msg::deleteLocalMsgsByTime"):mr.end=1/0,nr(mr.end)&&nr(mr.start)&&mr.end<=mr.start&&dr.onParamError("参数 end 必须大于 start"),this.processCallback(mr),this.protocol.deleteLocalMsgsByTime(mr).then(function(Ar){mr.done(null,Ar)},function(Ar){mr.done(Ar,null)}))},or.deleteLocalMsgs=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteLocalMsgs",done:mr.done});var _r;function Ar(){mr.done(_r,mr)}mr.updateSession=mr.updateSession!==!1,dr.verifyOptions(mr,"sessionId","msg::deleteLocalMsgsBySession"),nr(mr.start)&&dr.verifyParamType("start",mr.start,"number","msg::deleteLocalMsgs"),nr(mr.end)&&dr.verifyParamType("end",mr.end,"number","msg::deleteLocalMsgs"),nr(mr.end)&&nr(mr.start)&&mr.end<=mr.start&&dr.onParamError("参数 end 必须大于 start"),this.processCallback(mr),this.protocol.deleteLocalMsgs(mr).then(function(){Ar()},function(Er){_r=Er,Ar()})},or.deleteAllLocalMsgs=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"deleteAllLocalMsgs",done:mr.done});var _r,Ar=this.db;function Er(){mr.done(_r,mr)}this.processCallback(mr),this.protocol.sessionSet={},Ar.enable?Ar.deleteAllMsgs().then(function(){Er()},function(sr){_r=sr,Er()}):(this.logger.warn("because db is false,error is null"),Er())},or.saveMsgsToLocal=function(mr){var _r;(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"saveMsgsToLocal",done:mr.done}),this.db.enable||(this.logger.warn("because db is false,error is null"),mr.done(null,[])),dr.verifyOptions(mr,"msgs done","msg::saveMsgsToLocal"),dr.verifyParamType("msgs",mr.msgs,"Array","msg::saveMsgsToLocal");var Ar=le(_r=mr.msgs).call(_r,function(Er){var sr=er({},Er);return sr.hasOwnProperty("needUpdateSession")||(sr.needUpdateSession=!0),sr});this.db.putMsg(Ar).then(function(Er,sr){sr?mr.done(sr):mr.done(null,Er)})},or.clearServerHistoryMsgs=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgs",done:mr.done}),dr.verifyOptions(mr,"account","msg::clearServerHistoryMsgs");var _r=mr.delRoam!==!1;this.processCallback(mr),this.sendCmd("clearServerHistoryMsgs",{clearMsgsParams:{account:mr.account,delRoam:_r?1:0}},mr.callback)},or.clearServerHistoryMsgsWithSync=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"clearServerHistoryMsgsWithSync",done:mr.done}),dr.verifyOptions(mr,"scene to","msg::clearServerHistoryMsgsWithSync");var _r=mr.isDeleteRoam===void 0||mr.isDeleteRoam===!0,Ar={type:mr.scene==="team"?2:1,isDeleteRoam:_r?1:0,isSyncSelf:mr.isSyncSelf===!0?1:0};Ar[Ar.type===2?"toTid":"otherAccid"]=mr.to,mr.ext!==void 0&&(Ar.ext=mr.ext),this.processCallback(mr),this.sendCmd("clearServerHistoryMsgsWithSync",{clearMsgsParamsWithSync:Ar},mr.callback)},or.msgFtsInServer=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"msgFtsInServer",done:mr.done}),this.processCallback(mr);var _r=mr,Ar=y({},(g(_r),_r));dr.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",min:0,required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},Ar,"msg::msgFtsInServer"),nr(Ar.toTime)&&nr(Ar.fromTime)&&Ar.toTime<Ar.fromTime&&dr.onParamError("Options error: toTime should be greater than fromTime");var Er,sr={ASC:1,DESC:2};Ar.order&&sr[Ar.order]&&(Ar.order=sr[Ar.order]),Ar.msgTypeList&&(Ar.msgTypeList=le(Er=Ar.msgTypeList).call(Er,function(Nr){return Sr[Nr]}));var xr=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];z(xr).call(xr,function(Nr){re(Ar[Nr])&&(Ar[Nr]=Ar[Nr].join(","))}),this.sendCmd("msgFtsInServer",{msgFullSearchRequestTag:Ar},mr.callback)},or.msgFtsInServerByTiming=function(mr){(mr=mr||{}).done=Cr({instance:this,className:"NIMFn",funcName:"msgFtsInServerByTiming",done:mr.done}),this.processCallback(mr);var _r=mr,Ar=(_r.callback,_r.done,n(_r,Et));dr.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},Ar,"msg::msgFtsInServerByTimeSort"),nr(Ar.toTime)&&nr(Ar.fromTime)&&Ar.toTime<Ar.fromTime&&dr.onParamError("Options error: toTime should be greater than fromTime");var Er,sr={ASC:1,DESC:2};Ar.msgLimit===void 0&&(Ar.msgLimit=20),Ar.order&&sr[Ar.order]&&(Ar.order=sr[Ar.order]),Ar.msgTypeList&&(Ar.msgTypeList=le(Er=Ar.msgTypeList).call(Er,function(Nr){return Sr[Nr]}));var xr=["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"];z(xr).call(xr,function(Nr){re(Ar[Nr])&&(Ar[Nr]=Ar[Nr].join(","))}),this.sendCmd("msgFtsInServerByTiming",{msgTimingFullSearchRequestTag:Ar},mr.callback)}},function(t,r){t.exports=function(e){if(e==null)throw new TypeError("Cannot destructure "+e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){var n=e(888),g=e(159);function y(){var i;return t.exports=y=n?g(i=n).call(i):function(k){for(var L=1;L<arguments.length;L++){var $=arguments[L];for(var V in $)Object.prototype.hasOwnProperty.call($,V)&&(k[V]=$[V])}return k},t.exports.__esModule=!0,t.exports.default=t.exports,y.apply(this,arguments)}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,r,e){t.exports=e(889)},function(t,r,e){t.exports=e(890)},function(t,r,e){var n=e(891);t.exports=n},function(t,r,e){var n=e(309);t.exports=n},function(t,r,e){t.exports=e(893)},function(t,r,e){var n=e(894);t.exports=n},function(t,r,e){e(895),t.exports=9007199254740991},function(t,r,e){e(1)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,r,e){var n=e(10),g=e(28),y=e(9),i=e(2),k=e(6),L=e(5),$=e(15),V=e(41).fn,z=e(0),re=e(784),oe=e(786),le=(e(80),z.notundef),ue=e(26).reportAPI;function ie(ae,Fe,de,Ie){de=de||"",z.verifyParamType(de+"from",ae.from,"string",Fe),z.verifyParamType(de+"to",ae.to,"string",Fe),z.verifyParamType(de+"idServer",ae.idServer,"string",Fe),z.verifyParamType(de+"time",ae.time,"number",Fe),z.verifyParamValid(de+"scene",ae.scene,this.message.validScenes,Fe),Ie||z.verifyParamType(de+"idClient",ae.idClient,"string",Fe)}V.getThreadMsgs=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getThreadMsgs",done:ae.done}),z.verifyCallback(ae,"done","msg::getThreadMsgs"),z.verifyOptions(ae,"scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime","msg::getThreadMsgs"),z.verifyParamType("threadMsgFromAccount",ae.threadMsgFromAccount,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgToAccount",ae.threadMsgToAccount,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgIdServer",ae.threadMsgIdServer,"string","msg::getThreadMsgs"),z.verifyParamType("threadMsgTime",ae.threadMsgTime,"number","msg::getThreadMsgs"),z.verifyParamValid("scene",ae.scene,this.message.validScenes,"msg::getThreadMsgs"),this.processCallback(ae);var Fe={scene:this.message.sceneMap[ae.scene],from:ae.threadMsgFromAccount,to:ae.threadMsgToAccount,time:ae.threadMsgTime,idServer:ae.threadMsgIdServer},de={limit:ae.limit<100?ae.limit:100,beginTime:typeof ae.beginTime=="number"?ae.beginTime:0,reverse:n(ae)===!0?1:0};typeof ae.endTime=="number"&&(de.endTime=ae.endTime,de.endTime<=de.beginTime&&z.onParamError("endTime应该大于beginTime","msg::getThreadMsgs")),ae.lastMsgId&&(de.lastMsgId=ae.lastMsgId),this.sendCmd("getThreadMsgs",{msg:Fe,threadMsgReq:de,NOTSTORE:"msg threadMsgReq"},ae.callback)},V.getMsgsByIdServer=function(ae){var Fe,de,Ie=this;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getMsgsByIdServer",done:ae.done});var Ve=this,kt="msg::getMsgsByIdServer";z.verifyCallback(ae,"done",kt),(!g(ae.reqMsgs)||ae.reqMsgs.length===0||ae.reqMsgs.length>100)&&z.onParamError("reqMsgs应该是数组且数据长度应大于0小于等于100",kt),ae.reqMsgs=y(Fe=ae.reqMsgs).call(Fe,0),i(de=ae.reqMsgs).call(de,function(At,ze){ie.call(Ve,At,kt,"reqMsgs[".concat(ze,"]."),!0),At.scene=Ie.message.sceneMap[At.scene]}),this.processCallback(ae),this.sendCmd("getMsgsByIdServer",{reqMsgs:ae.reqMsgs},ae.callback)},V.addQuickComment=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addQuickComment",done:ae.done}),z.verifyOptions(ae,"msg body","msg::addQuickComment"),ie.call(this,ae.msg,"msg::addQuickComment");var Fe=new re(ae,"msg::addQuickComment");Fe.from=this.account;var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("addQuickComment",{msg:de,comment:Fe},ae.callback)},V.deleteQuickComment=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteQuickComment",done:ae.done}),z.verifyOptions(ae,"msg body","msg::deleteQuickComment"),ie.call(this,ae.msg,"msg::deleteQuickComment");var Fe=new re(ae,"msg::addQuickComment");Fe.from=this.account;var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("deleteQuickComment",{msg:de,comment:Fe},ae.callback)},V.getQuickComments=function(ae){var Fe=this;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getQuickComments",done:ae.done});var de="msg::getQuickComments",Ie=this,Ve={},kt={};z.verifyOptions(ae,"msgs","msg::getQuickComments"),(!g(ae.msgs)||ae.msgs.length===0||ae.msgs.length>20)&&z.onParamError("msgs应该是数组且数据长度应大于0小于等于20",de);var At=[];try{At=JSON.parse(k(ae.msgs))}catch{z.onParamError("msgs 不是合法的对象",de)}i(At).call(At,function(ze,Et){ie.call(Ie,ze,de,"msgs[".concat(Et,"]."),!0),ze.scene=Fe.message.sceneMap[ze.scene],Ve[ze.idClient]=null,kt[ze.idClient]=Et}),this.processCallback(ae),this.getLocalMsgsByIdClients({idClients:L(Ve),done:function(ze,Et){var cr,er=Ie.protocol.timetags.sync;!ze&&Et.msgs&&Et.msgs.length&&er&&(i(cr=Et.msgs).call(cr,function(or){Ve[or.idClient]=or}),At=$(At).call(At,function(or){var dr=Ve[or.idClient];return!dr||(dr.commentTimetag&&(or.timestamp=dr.commentTimetag),!(dr.commentTimetag>er))})),Ie.sendCmd("getQuickComments",{commentReq:At,idMap:Ve,indexMap:kt},ae.callback)}})},V.addCollect=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addCollect",done:ae.done}),z.verifyOptions(ae,"type data","msg::addCollect");var Fe=new oe(ae,"msg::addCollect");this.processCallback(ae),this.sendCmd("addCollect",{collect:Fe},ae.callback)},V.deleteCollects=function(ae){var Fe;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteCollects",done:ae.done}),z.verifyOptions(ae,"collectList","msg::deleteCollects"),(!g(ae.collectList)||ae.collectList.length===0||ae.collectList.length>100)&&z.onParamError("collectList应该是数组且数据长度应大于0小于等于100","msg::deleteCollects"),i(Fe=ae.collectList).call(Fe,function(de,Ie){z.verifyParamType("collectList[".concat(Ie,"].id"),de.id,"string","msg::deleteCollects"),z.verifyParamType("collectList[".concat(Ie,"].createTime"),de.createTime,"number","msg::deleteCollects")}),this.processCallback(ae),this.sendCmd("deleteCollects",{collectList:ae.collectList},ae.callback)},V.updateCollect=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateCollect",done:ae.done}),z.verifyOptions(ae,"collect","msg::updateCollect"),z.verifyParamType("collect.id",ae.collect.id,"string","msg::updateCollect"),z.verifyParamType("collect.createTime",ae.collect.createTime,"number","msg::updateCollect"),this.processCallback(ae),this.sendCmd("updateCollect",{collect:ae.collect},ae.callback)},V.getCollects=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getCollects",done:ae.done}),z.verifyCallback(ae,"done","msg::getCollects");var Fe={},de=["type","beginTime","endTime","limit"];i(de).call(de,function(Ie){le(ae[Ie])&&(z.verifyParamType(Ie,ae[Ie],"number","msg::getCollects"),Fe[Ie]=ae[Ie])}),ae.limit>100&&z.onParamError("limit不能大于100","msg::getCollects"),ae.beginTime>ae.endTime&&z.onParamError("beginTime不能大于endTime","msg::getCollects"),le(ae.lastId)&&(z.verifyParamType("lastId",ae.lastId,"string","msg::getCollects"),Fe.lastMsgId=ae.lastId),le(n(ae))&&(Fe.reverse=n(ae)===!0?1:0),this.processCallback(ae),this.sendCmd("getCollects",{collectQuery:Fe,NOTSTORE:"collectQuery"},ae.callback)},V.addStickTopSession=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::addStickTopSession");var Fe=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Fe[0],this.message.validScenes,"msg::addStickTopSession"),z.verifyParamType("id的后半部分",Fe[1],"string","msg::addStickTopSession"),Fe[0]==="superTeam"&&(Fe[0]="super_team");var de={id:Fe=Fe.join("|")};ae.topCustom?(z.verifyParamType("topCustom",ae.topCustom,"string","msg::addStickTopSession"),de.topCustom=ae.topCustom):de.topCustom="",this.processCallback(ae),this.sendCmd("addStickTopSession",{stickTopSession:de},ae.callback)},V.deleteStickTopSession=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::deleteStickTopSession");var Fe=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Fe[0],this.message.validScenes,"msg::deleteStickTopSession"),z.verifyParamType("id的后半部分",Fe[1],"string","msg::deleteStickTopSession"),Fe[0]==="superTeam"&&(Fe[0]="super_team"),Fe=Fe.join("|"),this.processCallback(ae),this.sendCmd("deleteStickTopSession",{stickTopSession:{id:Fe}},ae.callback)},V.updateStickTopSession=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateStickTopSession",done:ae.done}),z.verifyOptions(ae,"id","msg::updateStickTopSession");var Fe=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Fe[0],this.message.validScenes,"msg::updateStickTopSession"),z.verifyParamType("id的后半部分",Fe[1],"string","msg::updateStickTopSession"),Fe[0]==="superTeam"&&(Fe[0]="super_team");var de={id:Fe=Fe.join("|")};ae.topCustom?(z.verifyParamType("topCustom",ae.topCustom,"string","msg::updateStickTopSession"),de.topCustom=ae.topCustom):de.topCustom="",this.processCallback(ae),this.sendCmd("updateStickTopSession",{stickTopSession:de},ae.callback)},V.getStickTopSessions=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getStickTopSessions",done:ae.done}),z.verifyOptions(ae,"done","msg::getStickTopSessions"),this.processCallback(ae);var Fe,de=this.protocol.sessionSet,Ie=[];for(var Ve in de)(Fe=this.protocol.getSessionInCache(Ve,ae.findDelete))&&Fe.isTop&&Ie.push(de[Ve]);ae.callback(null,Ie)},V.addMsgPin=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"addMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::addMsgPin"),ie.call(this,ae.msg,"msg::addMsgPin");var Fe={pinFrom:this.account};le(ae.pinCustom)&&(z.verifyParamType("pinCustom",ae.pinCustom,"string","msg::addMsgPin"),Fe.pinCustom=ae.pinCustom);var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("addMsgPin",{msg:de,pinTag:Fe},ae.callback)},V.updateMsgPin=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"updateMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::updateMsgPin"),ie.call(this,ae.msg,"msg::updateMsgPin");var Fe={pinFrom:this.account};le(ae.pinCustom)&&(z.verifyParamType("pinCustom",ae.pinCustom,"string","msg::updateMsgPin"),Fe.pinCustom=ae.pinCustom);var de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("updateMsgPin",{msg:de,pinTag:Fe},ae.callback)},V.deleteMsgPin=function(ae){(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"deleteMsgPin",done:ae.done}),z.verifyOptions(ae,"msg","msg::deleteMsgPin"),ie.call(this,ae.msg,"msg::deleteMsgPin");var Fe={pinFrom:this.account},de={scene:this.message.sceneMap[ae.msg.scene],from:ae.msg.from,to:ae.msg.to,time:ae.msg.time,idServer:ae.msg.idServer,idClient:ae.msg.idClient};this.processCallback(ae),this.sendCmd("deleteMsgPin",{msg:de,pinTag:Fe},ae.callback)},V.getMsgPins=function(ae){var Fe=this;(ae=ae||{}).done=ue({instance:this,className:"NIMFn",funcName:"getMsgPins",done:ae.done}),z.verifyOptions(ae,"id","msg::getMsgPins");var de=this.db,Ie=z.getIdArray(ae.id);z.verifyParamValid("id的前半部分",Ie[0],this.message.validScenes,"msg::getMsgPins"),z.verifyParamType("id的后半部分",Ie[1],"string","msg::getMsgPins"),Ie[0]==="superTeam"&&(Ie[0]="super_team");var Ve={sessionId:Ie=Ie.join("|"),timetag:0};if(this.processCallback(ae),de.enable){var kt=this.protocol.timetags.sync;de.getTimetag("pin-"+ae.id).then(function(ze){ze>kt?de.getMsgPins(ae.id).then(function(Et){return ae.callback(null,{pins:Et||[]})}).catch(function(Et){return ae.callback(Et)}):(Ve.timetag=ze,At.call(Fe))})}else At.call(this);function At(){this.sendCmd("getMsgPins",{msgPinReq:Ve,id:ae.id,NOTSTORE:"msgPinReq"},ae.callback)}}},function(t,r,e){var n=e(3),g=e(15),y=e(2),i=e(10),k=e(41).fn,L=e(0),$=L.undef,V=L.notundef,z=e(161),re=e(26).reportAPI;k.markSysMsgRead=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"markSysMsgRead",done:oe.done});var le,ue=this.db,ie=n.resolve(),ae=this.protocol;L.verifyOptions(oe,"sysMsgs","sysmsg::markSysMsgRead");var Fe=oe.sysMsgs;function de(){oe.done(le,oe)}L.isArray(Fe)||(Fe=[Fe]),ue.enable?ie=ue.markSysMsgRead(Fe).then(function(Ie){Fe=Ie,ae.onUpdateSysMsg(Ie)}):(Fe=g(Fe).call(Fe,function(Ie){return!Ie.read})).length&&(ae.options.autoMarkRead||ae.markSysMsgRead(Fe,!0),y(Fe).call(Fe,function(Ie){Ie.read=!0}),ae.onUpdateSysMsg(Fe)),ie.then(function(){return ae.reduceSysMsgUnread(Fe)}).then(de,function(Ie){le=Ie,de()})},k.sendCustomSysMsg=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"sendCustomSysMsg",done:oe.done}),L.verifyOptions(oe,"scene to content","sysmsg::sendCustomSysMsg"),L.verifyParamValid("scene",oe.scene,this.message.validScenes,"sysmsg::sendCustomSysMsg"),this.processCallback(oe);var le="sendCustomSysMsg";return oe.scene==="p2p"?oe.type="customP2p":oe.scene==="superTeam"?(oe.type="customSuperTeam",le="sendSuperTeamCustomSysMsg"):oe.type="customTeam",oe.sysMsg=new z(oe),g(oe)&&(le="sendFilterCustomSysMsg"),this.sendCmd(le,{sysMsg:oe.sysMsg,single:!0},oe.callback),this.formatReturnSysMsg(oe.sysMsg)},k.formatReturnSysMsg=function(oe){return oe=L.copy(oe),this.protocol.completeSysMsg(oe),oe.status="sending",oe=i(z).call(z,oe)},k.getLocalSysMsgs=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"getLocalSysMsgs",done:oe.done});var le,ue=this.db,ie=[];function ae(){oe.sysMsgs=ie,oe.done(le,oe)}L.verifyOptions(oe),oe.category&&L.verifyParamValid("category",oe.category,z.validCategories,"sysmsg::getLocalSysMsgs"),oe.type&&L.verifyParamValid("type",oe.type,z.validTypes,"sysmsg::getLocalSysMsgs"),$(oe.limit)&&(oe.limit=100),L.verifyParamType("limit",oe.limit,"number","sysmsg::getLocalSysMsgs"),L.verifyParamMax("limit",oe.limit,100,"sysmsg::getLocalSysMsgs"),V(i(oe))?L.verifyParamType("reverse",i(oe),"boolean","sysmsg::getLocalSysMsgs"):oe.reverse=!1,this.processCallback(oe),ue.enable?ue.getSysMsgs(oe).then(function(Fe){ie=Fe,ae()},function(Fe){le=Fe,ae()}):ae()},k.updateLocalSysMsg=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"updateLocalSysMsg",done:oe.done});var le,ue=this.db,ie=null;if(L.verifyOptions(oe,"idServer","sysmsg::updateLocalSysMsg"),this.processCallback(oe),ue.enable){var ae=L.filterObj(oe,"idServer state localCustom");ue.updateSysMsg(ae).then(function(de){ie=de,Fe()},function(de){le=de,Fe()})}else Fe();function Fe(){oe.sysMsg=ie,oe.done(le,oe)}},k.deleteLocalSysMsg=function(oe){(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"deleteLocalSysMsg",done:oe.done});var le,ue=this.db;function ie(){oe.done(le,oe)}L.verifyOptions(oe,"idServer","sysmsg::deleteLocalSysMsg"),this.processCallback(oe),ue.enable?ue.deleteSysMsg(oe.idServer).then(function(){ie()},function(ae){le=ae,ie()}):ie()},k.deleteAllLocalSysMsgs=function(oe){var le;(oe=oe||{}).done=re({instance:this,className:"NIMFn",funcName:"deleteAllLocalSysMsgs",done:oe.done});var ue=this,ie=ue.db;function ae(){ue.protocol.onUpdateSysMsgUnread({}),oe.done(le,oe)}ue.processCallback(oe),ie.enable?ie.deleteAllSysMsgs().then(function(){ae()},function(Fe){le=Fe,ae()}):ae()}},function(t,r,e){var n=e(41).fn,g=e(0),y=e(12),i=e(26).reportAPI;n.getChatroomAddress=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"getChatroomAddress",done:k.done}),g.verifyOptions(k,"chatroomId","chatroom::getChatroomAddress"),k.isWeixinApp=y.isWeixinApp,k.type=y.ipVersion,this.processCallback(k),this.sendCmd("getChatroomAddress",k)}},function(t,r){},function(t,r){},function(t,r,e){var n=e(41).fn,g=e(0),y=e(26).reportAPI;n.audioToText=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"audioToText",done:i.done}),g.verifyOptions(i,"url","audio::audioToText"),i.audioToText=g.filterObj(i,"url"),this.processCallback(i),this.sendCmd("audioToText",i)}},function(t,r,e){var n=e(41).fn;n.clearDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.clear().then(i,i):i()},n.removeDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.destroy().then(i,i):i()},n.closeDB=function(g){var y=this.db;this.processCallback(g);var i=g.done;y.enable?y.close().then(i,i):i()}},function(t,r,e){var n=e(41).fn,g=e(317),y=e(0),i=y.undef,k=e(26).reportAPI;n.getPushNotificationMultiportConfig=function(){return k({instance:this,className:"NIMFn",funcName:"getPushNotificationMultiportConfig",hasCallback:!1}),this.protocol.getPushNotificationMultiportConfig()},n.updatePushNotificationMultiportConfig=function(L){(L=L||{}).done=k({instance:this,className:"NIMFn",funcName:"updatePushNotificationMultiportConfig",done:L.done}),y.verifyOptions(L),i(L.shouldPushNotificationWhenPCOnline)&&(L.shouldPushNotificationWhenPCOnline=!0),L.donnop=new g(L),this.processCallback(L),this.sendCmd("updateDonnop",L)}},function(t,r,e){var n=e(2),g=e(3),y=e(4),i=e(24),k=e(41).fn,L=e(0),$=e(905),V=e(906),z=e(26).reportAPI;function re(oe){return i(oe)==="object"&&(oe.msgEventSubscribes?oe=oe.msgEventSubscribes:oe.msgEventSubscribe?oe=oe.msgEventSubscribe:oe.accounts?oe=oe.accounts:oe.msgEvent&&(oe=oe.msgEvent).time&&(oe.time=+oe.time),oe.sync===1?oe.sync=!0:oe.sync===0&&(oe.sync=!1)),oe}k.batchSendEventsCmds=function(oe,le,ue){var ie=this,ae=L.dropArrayDuplicates(le.accounts);ae=L.reshape2d(ae,100);var Fe=[];n(ae).call(ae,function(de){Fe.push(new g(function(Ie,Ve){var kt=L.simpleClone(le);kt.accounts=de,ie.sendCmdWithResp(oe,kt,function(At,ze){At?Ve(At):Ie(re(ze))})}))}),g.all(Fe).then(function(de){var Ie=null;if(de.length>0)if(de[0].msgEventSubscribe){var Ve=de[0].msgEventSubscribe;Ve=re(Ve);var kt=[];n(de).call(de,function(At){kt=y(kt).call(kt,At.accounts)}),Ie={accounts:kt,msgEventSubscribe:Ve}}else Ie=[],n(de).call(de,function(At){Ie=y(Ie).call(Ie,At)});ue(null,Ie)},function(de){ue(de,null)})},k.publishEvent=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"publishEvent",done:oe.done});var le=new $(oe);le=le.assembleEvent(),this.processCallback(oe),this.sendCmdWithResp("publishEvent",{msgEvent:le},function(ue,ie){ue||(ie=re(ie)),oe.callback(ue,ie)})},k.subscribeEvent=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"subscribeEvent",done:oe.done}),L.verifyOptions(oe,"accounts","event::subscribeEvent");var le=new V(oe);L.verifyParamType("accounts",oe.accounts,"array","event::subscribeEvent"),this.processCallback(oe),le=le.assembleEvent(),this.batchSendEventsCmds("subscribeEvent",{msgEventSubscribe:le,accounts:oe.accounts},function(ue,ie){!ue&&ie&&(ie={failedAccounts:ie}),oe.callback(ue,ie)})},k.unSubscribeEventsByAccounts=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByAccounts",done:oe.done}),L.verifyOptions(oe,"accounts","event::unSubscribeEventsByAccounts"),L.verifyParamType("accounts",oe.accounts,"array","event::unSubscribeEventsByAccounts");var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.batchSendEventsCmds("unSubscribeEventsByAccounts",{msgEventSubscribe:le,accounts:oe.accounts},function(ue,ie){!ue&&ie&&(ie={failedAccounts:ie}),oe.callback(ue,ie)})},k.unSubscribeEventsByType=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"unSubscribeEventsByType",done:oe.done});var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.sendCmdWithResp("unSubscribeEventsByType",{msgEventSubscribe:le},function(ue,ie){oe.callback(ue,ie)})},k.querySubscribeEventsByAccounts=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByAccounts",done:oe.done}),L.verifyOptions(oe,"accounts","event::querySubscribeEventsByAccounts"),L.verifyParamType("accounts",oe.accounts,"array","event::querySubscribeEventsByAccounts");var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.batchSendEventsCmds("querySubscribeEventsByAccounts",{msgEventSubscribe:le,accounts:oe.accounts},function(ue,ie){!ue&&ie&&(ie={msgEventSubscribes:ie}),oe.callback(ue,ie)})},k.querySubscribeEventsByType=function(oe){(oe=oe||{}).done=z({instance:this,className:"NIMFn",funcName:"querySubscribeEventsByType",done:oe.done});var le=new V(oe);le=le.assembleEvent(),this.processCallback(oe),this.sendCmdWithResp("querySubscribeEventsByType",{msgEventSubscribe:le},function(ue,ie){ue||(ie={msgEventSubscribes:re(ie)}),oe.callback(ue,ie)})}},function(t,r,e){var n=e(8),g=e(0),y=g.notundef,i=e(35);function k(L){if(g.verifyOptions(L,"type value","event::MsgEvent"),g.verifyParamType("type",L.type,"number","event::MsgEvent"),g.verifyParamType("value",L.value,"number","event::MsgEvent"),this.type=L.type,this.value=L.value,this.idClient=g.guid(),y(L.custom)&&(this.custom=""+L.custom),this.validTime=L.validTime||604800,g.verifyParamType("validTime",this.validTime,"number","event::MsgEvent"),g.verifyParamMin("validTime",this.validTime,60,"event::MsgEvent"),g.verifyParamMax("validTime",this.validTime,604800,"event::MsgEvent"),y(L.broadcastType)){var $;if(g.verifyParamType("broadcastType",L.broadcastType,"number","event::MsgEvent"),n($=[1,2]).call($,L.broadcastType)<0)throw new i('参数错误"broadcastType":只能为1或2');this.broadcastType=L.broadcastType}else this.broadcastType=2;y(L.sync)?(g.verifyParamType("sync",L.sync,"boolean","event::MsgEvent"),this.sync=L.sync):this.sync=!1}k.prototype.assembleEvent=function(){return{type:this.type,value:this.value,idClient:this.idClient,custom:this.custom||"",validTime:this.validTime,broadcastType:this.broadcastType,sync:this.sync===!0?1:0}},t.exports=k},function(t,r,e){var n=e(0),g=n.notundef;function y(i){n.verifyOptions(i,"type","event::MsgEventSubscribe"),n.verifyParamType("type",i.type,"number","event::MsgEventSubscribe"),n.findObjIndexInArray([1,2,3],i.type)<0&&n.verifyParamMin("type",i.type,1e5,"event::MsgEventSubscribe"),this.type=i.type,g(i.subscribeTime)?(n.verifyParamType("subscribeTime",i.subscribeTime,"number","event::MsgEventSubscribe"),n.verifyParamMin("subscribeTime",i.subscribeTime,60,"event::MsgEventSubscribe"),n.verifyParamMax("subscribeTime",i.subscribeTime,2592e3,"event::MsgEventSubscribe"),this.subscribeTime=i.subscribeTime):this.subscribeTime=2592e3,g(i.sync)?(n.verifyParamType("sync",i.sync,"boolean","event::MsgEventSubscribe"),this.sync=i.sync):this.sync=!0}y.prototype.assembleEvent=function(){return{type:this.type,subscribeTime:this.subscribeTime,sync:this.sync===!0?1:0}},t.exports=y},function(t,r,e){var n=e(34),g=e(41).fn,y=e(0),i=e(26).reportAPI;g.httpRequestProxy=function(k){(k=k||{}).done=i({instance:this,className:"NIMFn",funcName:"httpRequestProxy",done:k.done}),y.verifyOptions(k,"path","misc::httpRequestProxy");var L=n({},k);delete L.done,this.processCallback(k),this.sendCmd("httpProxy",{proxyTag:L},k.callback)}},function(t,r,e){var n=e(41).fn,g=e(12),y=e(26).reportAPI;n.getQChatAddress=function(i){(i=i||{}).done=y({instance:this,className:"NIMFn",funcName:"getQChatAddress",done:i.done}),this.processCallback(i),this.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:g.ipVersion}},i.done)}},function(t,r,e){e(305);var n=e(201);e(318)(n),t.exports=n},function(t,r,e){var n=e(321),g=e(9),y=e(3),i=e(56),k=e(4),L=e(22),$=e(202).fn,V=e(12),z=e(165).V2NIMConnectStatus;$.connect=function(){V.isBrowser&&this.reporter.restore(),n($).connect.call(this)},$.refreshSocketUrl=function(){var re;return this.socketUrlsBackup=this.socketUrlsBackup||[],this.socketUrls=g(re=this.socketUrlsBackup).call(re,0),this.logger.info("link::refreshSocketUrl"),this.statusProtector.processEvent("auth/loginLifeCycleAddressing"),y.resolve(this.socketUrls)},$.onHandshakeFailed=function(re,oe){var le;this.reporter.report("chatroomLogin",{binary_websocket:this.useBinaryWebSocket(),accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:oe,rt:i()-re,result:408,failReason:"ws_handshake_failed",time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(le="link::onHandshakeFailed: shandshake failed, startTime: ".concat(re,", targetUrl: ")).call(le,oe))},$.onConnectFailed=function(re,oe,le){var ue,ie,ae=typeof re=="string"?"connect_failed:".concat(re):"connect_failed";this.reporter.report("chatroomLogin",{binary_websocket:this.useBinaryWebSocket(),accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:le,rt:i()-oe,result:408,failReason:"ws_".concat(ae),time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(ue=k(ie="link::onConnectFailed: connect failed due to ".concat(re,", startTime: ")).call(ie,oe,", targetUrl: ")).call(ue,le))},$.onSocketError=function(re,oe,le){var ue,ie,ae=typeof re=="string"?"socket.io error:".concat(re):"socket.io error";this.reporter.report("chatroomLogin",{binary_websocket:this.useBinaryWebSocket(),accid:this.account,roomId:this.options&&this.options.chatroomId,serverIps:this.options&&this.options.chatroomAddresses&&this.options.chatroomAddresses.join(","),currentServerIp:le,rt:i()-oe,result:408,failReason:"ws_".concat(ae),time:i(),net_connect:this.checkNetworkAvailable()}),this.logger.warn(k(ue=k(ie="link::onSocketError: due to ".concat(re,", startTime: ")).call(ie,oe,", targetUrl: ")).call(ue,le))},$.notifyDisconnect=function(re){n($).notifyDisconnect.call(this,re)},$.disconnect=function(){var re=this,oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(this.isConnected())return this.sendCmd("logout"),void L(function(){n($).disconnect.call(re,oe)},0);this.connecting?this.logger.warn("ChatroomProtocolFn api disconnect:: connecting but exiting"):this.statusProtector.getConnectStatus()!==z.V2NIM_CONNECT_STATUS_DISCONNECTED?this.logger.warn("ChatroomProtocolFn api disconnect:: has tried to disconnect actively"):this.logger.warn("ChatroomProtocolFn api disconnect:: other logic entered");var le=n($);le.disconnect.call(this,oe)}},function(t,r,e){var n=e(60),g=e(51),y=e(61),i=e(6),k=e(56),L=e(3),$=e(23),V=e(5),z=e(52),re=e(15),oe=e(53),le=e(2),ue=e(54),ie=e(55),ae=e(42);function Fe(ze,Et){var cr=V(ze);if(z){var er=z(ze);Et&&(er=re(er).call(er,function(or){return oe(ze,or).enumerable})),cr.push.apply(cr,er)}return cr}function de(ze){for(var Et=1;Et<arguments.length;Et++){var cr,er,or=arguments[Et]!=null?arguments[Et]:{};Et%2?le(cr=Fe(Object(or),!0)).call(cr,function(dr){g(ze,dr,or[dr])}):ue?ie(ze,ue(or)):le(er=Fe(Object(or))).call(er,function(dr){ae(ze,dr,oe(or,dr))})}return ze}var Ie=e(202).fn,Ve=e(48),kt=e(0);function At(ze){var Et=this;if(ze.code===398)return this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"),Et.forceDisconnect(),Et.backoff.setMin(5e3),void(Et.retryCount===0?Et.refreshSocketUrl():L.resolve()).then(function(){var cr;Et.reconnect({allFailedCB:$(cr=function(er){this.logger.error("pendingLoginFailed: ",er.code,er),this.onAuthError(er,"link::onLoginReconnectFailed")}).call(cr,Et,ze)})});this.logger.error("pendingLoginFailed: ",ze.code,ze),Et.onAuthError(ze,"link::onLogin")}Ie.assembleLogin=function(){var ze=this.options;this.sdkSession=this.genSessionKey();var Et={appKey:ze.appKey,account:ze.account,deviceId:Ve.deviceId,chatroomId:ze.chatroomId,session:this.sdkSession,appLogin:this.autoconnect?1:0},cr=!0;if(ze.loc_x===void 0||ze.loc_y===void 0||ze.loc_z===void 0?cr=!1:(typeof ze.loc_x!="number"&&(ze.loc_x=0),typeof ze.loc_y!="number"&&(ze.loc_y=0),typeof ze.loc_z!="number"&&(ze.loc_z=0)),ze.authType=ze.loginAuthType,Et=kt.merge(Et,kt.filterObj(ze,cr?"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt loc_x loc_y loc_z distance antiSpamBusinessId":"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt distance antiSpamBusinessId")),ze.tags&&ze.tags.length>0)try{Et.tags=i(ze.tags)}catch(er){this.logger.error("assembleLogin::format tags error",ze.tags,er)}return{type:1,login:Et,imLogin:this.assembleIMLogin()}},Ie.login=y(n.mark(function ze(){var Et,cr,er,or=this;return n.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return Et=this,dr.next=3,Et.assembleLogin();case 3:if(cr=dr.sent,!Et.socket||Et.socket.binaryType!=="arraybuffer"){dr.next=8;break}this.logger.log("link::doLogin: appLogin is "+cr.login.appLogin),dr.next=19;break;case 8:if(!(er=this.socket&&this.socket.socket&&this.socket.socket.sessionid)){dr.next=17;break}if(this.socketIds||(this.socketIds={}),!this.socketIds[er]){dr.next=14;break}return this.logger.warn("onConnect::repeat login",er),dr.abrupt("return");case 14:this.socketIds[er]=!0,dr.next=18;break;case 17:this.logger.warn("onConnect:: no socketId ",this.socket&&this.socket.socket);case 18:this.logger.warn("link::doLogin: "+er+" appLogin is "+cr.login.appLogin);case 19:Et.createLoginTime=k(),Et.sendCmd("login",de({},cr),function(lr,nr){if(lr)Et.reporter.report("chatroomLogin",{binary_websocket:Et.useBinaryWebSocket(),accid:Et.account,roomId:Et.options&&Et.options.chatroomId,serverIps:Et.options&&Et.options.chatroomAddresses&&Et.options.chatroomAddresses.join(","),currentServerIp:Et.url,rt:k()-Et.createLoginTime,result:lr?lr.code:408,failReason:lr?lr.message:"",time:k(),net_connect:Et.checkNetworkAvailable()}),At.call(Et,lr),Et.statusProtector.processEvent("auth/loginLifeCycleLoginFail",lr);else if(Et.reporter.report("chatroomLogin",{binary_websocket:Et.useBinaryWebSocket(),accid:Et.account,roomId:Et.options&&Et.options.chatroomId,serverIps:Et.options&&Et.options.chatroomAddresses&&Et.options.chatroomAddresses.join(","),currentServerIp:Et.url,rt:k()-Et.createLoginTime,result:200,failReason:"",time:k(),net_connect:Et.checkNetworkAvailable()}),Et.resetReconnectStatus(),or.heartbeatFail=0,or.hasLogin=!0,or.autoconnect=!0,Et.startHeartbeat(),Et.initOnlineListener(),Et.statusProtector.processEvent("auth/loginLifeCycleLoginSucc"),Et.keepNosSafeUrl)Et.afterLogin(nr);else{var ur=[];Et.parser.checkObjSafeUrl(nr,ur,[]),L.all(ur).then(function(){Et.afterLogin(nr)}).catch(function(){Et.afterLogin(nr)})}});case 21:case"end":return dr.stop()}},ze,this)})),Ie.afterLogin=function(ze){var Et=ze.chatroom;this.sendCmd("getNosCdnHost",{}),this.chatroom=Et,this.notifyLogin(ze)},Ie.kickedReasons=["","chatroomClosed","managerKick","samePlatformKick","silentlyKick","blacked"],Ie.kickedMessages=["","聊天室关闭了","被房主或者管理员踢出","不允许同一个帐号在多个地方同时登录","悄悄被踢","被拉黑了"]},function(t,r,e){var n=e(10),g=e(22),y=e(63),i=e(2),k=e(43),L=e(34),$=e(9),V=e(28),z=e(128),re=e(5),oe=e(202).fn,le=e(0),ue=e(12),ie=e(913),ae=e(795),Fe=e(918),de=e(919),Ie=e(920);oe.completeMsg=function(Ve){Ve.chatroomId=this.chatroom&&this.chatroom.id,Ve.from=this.options.account,Ve.fromClientType="Web",Ve.time||(Ve.time=+new Date)},oe.amendMsg=function(Ve){return Ve},oe.onMsg=function(Ve){var kt,At=n(kt=this.message).call(kt,Ve.content.msg);if(this.checkMsgUnique(At)){if(At.__handleTime=this.reporterHook.getSafeClock(),At.__receiveTime=Ve.__receiveTime,le.get(Ve,"content.msg.__clientExt"))try{At.__clientExt=JSON.parse(Ve.content.msg.__clientExt)}catch{this.logger.warn("ChatroomProtocolFn:onMsg __clientExt parse failed ".concat(Ve.content.msg.__clientExt))}this.msgBuffer.push(At),this.msgFlushTimer||this.startMsgFlushTimer(),Ve&&Ve.content&&Ve.content.msg&&Ve.content.msg.needHighPriorityMsgAck==="1"&&this.sendCmd("sendChatroomMsgAck",{chatRoomMsgAckTag:{idClient:At.idClient,chatroomId:At.chatroomId}})}else this.logger.warn("onMsg::msg::repeat",At.idClient)},oe.startMsgFlushTimer=function(){var Ve=this,kt=Ve.options;Ve.msgFlushTimer=g(function(){var At,ze=y(At=Ve.msgBuffer).call(At,0,kt.msgBufferSize);if(ue.isBrowser){var Et=Ve.reporterHook.getSafeClock();i(ze).call(ze,function(cr){if(cr.flow!=="out"){var er={msgId:cr.idServer,clientId:cr.idClient,receiveTime:Ve.reporterHook.getNTPTime(cr.__receiveTime),serverTime:cr.time,callbackTime:Ve.reporterHook.getNTPTime(Et),preHandleTime:Ve.reporterHook.getNTPTime(cr.__handleTime),fromAccid:cr.from,toAccid:Ve.options.account,type:4,tid:"",roomId:cr.chatroomId,result:200,failReason:"",rt:k(Et-cr.__receiveTime)},or=le.get(cr,"__clientExt.statistics.apiCallingTime"),dr=le.get(cr,"__clientExt.statistics.sendTime");or&&dr&&(er.apiCallingTime=or,er.sendTime=dr,er.attachUploadDuration=le.get(cr,"__clientExt.statistics.attachUploadDuration")||0),Ve.reporter&&Ve.reporter.report("msgReceive",er)}delete cr.__handleTime,delete cr.__receiveTime,delete cr.__clientExt})}Ve.options.onmsgs(ze),Ve.msgBuffer.length?Ve.startMsgFlushTimer():delete Ve.msgFlushTimer},kt.msgBufferInterval)},oe.checkMsgUnique=le.genCheckUniqueFunc("idClient"),oe.onSendMsg=function(Ve){var kt,At=Ve.obj.msg;Ve.error?At.status="fail":(At=Ve.content.msg).status="success",L(At,Ve.obj.msg),At=n(kt=this.message).call(kt,At),this.checkMsgUnique(At),Ve.obj=At},oe.onHistoryMsgs=function(Ve){Ve.error||(Ve.obj||(Ve.obj={}),Ve.obj.msgs=this.message.reverseMsgs(Ve.content.msgs))},oe.onCdnMsgInfo=function(Ve){if(Ve){Ve.cdnUrls&&(Ve.cdnUrls=Ve.cdnUrls.split("|")),Ve.interval&&(Ve.interval=1e3*k(Ve.interval)),Ve.timeout&&(Ve.timeout=+Ve.timeout),Ve.enable&&(Ve.enable=+Ve.enable),Ve.timestamp&&(Ve.timestamp=+Ve.timestamp,this.correctCdnTime(Ve.timestamp));var kt=!this.cdnInfo.enable&&Ve.enable;L(this.cdnInfo,Ve),kt&&this.queryCdnMsgs()}},oe.correctCdnTime=function(Ve){Ve&&typeof Ve=="number"&&(this.cdnInfo||(this.cdnInfo={}),this.cdnInfo.timestamp=Ve,this.cdnInfo.localTime=+new Date,this.cdnInfo.lastNow=null,this.logger.info("correctCdnTime: timestamp, localTime",Ve,this.cdnInfo.localTime,new Date(Ve),new Date(this.cdnInfo.localTime)))},oe.queryCdnMsgs=function(Ve){var kt,At=this;if(this.cdnInfo&&this.cdnInfo.enable&&this.isConnected()){this.queryCdnTimer=g(function(){return At.queryCdnMsgs()},this.cdnInfo.interval);var ze=+new Date;if(ze=ze-this.cdnInfo.localTime+this.cdnInfo.timestamp,ze-=ze%this.cdnInfo.interval,this.cdnInfo.lastNow!==ze&&this.cdnInfo.cdnUrls&&this.cdnInfo.cdnUrls.length){this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());var Et=this,cr=this.cdnInfo.decryptKey,er=this.cdnInfo.timeout||Math.ceil(this.cdnInfo.interval/2),or=$(kt=this.cdnInfo.cdnUrls).call(kt,0);Ve=Ve||0,function dr(){if(Ve>=3)return void Et.finalFail++;if(or.length){var lr=or.shift().replace("#time",ze),nr=lr.split("/")[2],ur=+new Date;Et.adaptersRequest(lr,{timeout:er,onload:function(ar){if(Et.cdnInfo.lastNow>ze)Et.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ",Et.cdnInfo.lastNow,ze,ar);else{Et.cdnInfo.lastNow=ze,Et.afterQueryCdn(nr,+new Date-ur,!0);try{ar=JSON.parse(ar)}catch(Cr){Et.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ",Cr)}if(ar&&ar.data){ar.ptm&&(Et.cdnInfo.timeout=ar.ptm),ar.pis&&(Et.cdnInfo.interval=1e3*ar.pis);var gr,pr,hr=ar.e===!0?(gr=ar.data,pr=cr,ie.decrypt(gr,ae.parse(pr),{mode:Fe,padding:de}).toString(Ie)):ar.data;Et.onCdnMsgsSmoothly(hr,ze,1e3*ar.c)}}},onerror:function(ar){if(Ve++,Et.afterQueryCdn(nr,+new Date-ur,!1),ar.status===404){var gr;try{var pr=JSON.parse(ar.result);pr.code===404&&pr.timestamp&&(gr=pr.timestamp)}catch(hr){Et.logger.warn("queryCdnMsgs::doQuery::parse 404 result error",hr,ar)}!gr&&ar.date&&(gr=+new Date(ar.date)),gr&&(Et.correctCdnTime(gr),clearTimeout(Et.queryCdnTimer),Et.queryCdnMsgs(Ve))}else dr()}},{exception_service:8})}}()}}},oe.onCdnMsgsSmoothly=function(Ve,kt,At){try{Ve=JSON.parse(Ve)}catch(or){this.logger.warn("onCdnMsgsSmoothly::JSON.parse error",or)}if(this.logger.info("receive cdn msgs "+Ve.length+" and request time is "+new Date(kt)),V(Ve)&&Ve.length){var ze=this,Et=this.options.msgBufferInterval,cr=Math.ceil(Ve.length*Et/At);er(),clearInterval(ze.cdnSmoothTimer),ze.cdnSmoothTimer=z(function(){return er()},Et)}function er(){if(ze.isConnected()){var or=y(Ve).call(Ve,0,cr);i(or).call(or,function(dr){var lr=ze.parser.syncUnserialize(dr,"msg");ze.onMsg({content:{msg:lr}})}),Ve.length||clearInterval(ze.cdnSmoothTimer)}}},oe.resetCdnData=function(){this.cdnData={},this.finalFail=0,this.cdnDataTime=+new Date},oe.initCdnData=function(){this.resetCdnData(),le.isFunction(this.options.onCdnRequestData)?(this.options.cdnRequestDataInterval=this.options.cdnRequestDataInterval||3e4,this.afterQueryCdn=function(Ve,kt,At){var ze,Et=this;this.cdnData[Ve]||(this.cdnData[Ve]={success:0,fail:0,sr:0,fr:0,smr:0,fmr:0}),At?(this.cdnData[Ve].success++,this.cdnData[Ve].sr+=kt,kt>this.cdnData[Ve].smr&&(this.cdnData[Ve].smr=kt)):(this.cdnData[Ve].fail++,this.cdnData[Ve].fr+=kt,kt>this.cdnData[Ve].fmr&&(this.cdnData[Ve].fmr=kt)),+new Date-this.cdnDataTime<this.options.cdnRequestDataInterval||(i(ze=re(this.cdnData)).call(ze,function(cr){Et.cdnData[cr].sr=Et.cdnData[cr].sr/Et.cdnData[cr].success||0,Et.cdnData[cr].fr=Et.cdnData[cr].fr/Et.cdnData[cr].fail||0}),this.options.onCdnRequestData(L({},this.cdnData),this.finalFail),this.resetCdnData())}):this.afterQueryCdn=function(){}}},function(t,r,e){var n;t.exports=(n=e(96),e(795),e(915),e(796),e(320),function(){var g=n,y=g.lib.BlockCipher,i=g.algo,k=[],L=[],$=[],V=[],z=[],re=[],oe=[],le=[],ue=[],ie=[];(function(){for(var de=[],Ie=0;Ie<256;Ie++)de[Ie]=Ie<128?Ie<<1:Ie<<1^283;var Ve=0,kt=0;for(Ie=0;Ie<256;Ie++){var At=kt^kt<<1^kt<<2^kt<<3^kt<<4;At=At>>>8^255&At^99,k[Ve]=At,L[At]=Ve;var ze=de[Ve],Et=de[ze],cr=de[Et],er=257*de[At]^16843008*At;$[Ve]=er<<24|er>>>8,V[Ve]=er<<16|er>>>16,z[Ve]=er<<8|er>>>24,re[Ve]=er,er=16843009*cr^65537*Et^257*ze^16843008*Ve,oe[At]=er<<24|er>>>8,le[At]=er<<16|er>>>16,ue[At]=er<<8|er>>>24,ie[At]=er,Ve?(Ve=ze^de[de[de[cr^ze]]],kt^=de[de[kt]]):Ve=kt=1}})();var ae=[0,1,2,4,8,16,32,64,128,27,54],Fe=i.AES=y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var de=this._keyPriorReset=this._key,Ie=de.words,Ve=de.sigBytes/4,kt=4*((this._nRounds=Ve+6)+1),At=this._keySchedule=[],ze=0;ze<kt;ze++)ze<Ve?At[ze]=Ie[ze]:(er=At[ze-1],ze%Ve?Ve>6&&ze%Ve==4&&(er=k[er>>>24]<<24|k[er>>>16&255]<<16|k[er>>>8&255]<<8|k[255&er]):(er=k[(er=er<<8|er>>>24)>>>24]<<24|k[er>>>16&255]<<16|k[er>>>8&255]<<8|k[255&er],er^=ae[ze/Ve|0]<<24),At[ze]=At[ze-Ve]^er);for(var Et=this._invKeySchedule=[],cr=0;cr<kt;cr++){if(ze=kt-cr,cr%4)var er=At[ze];else er=At[ze-4];Et[cr]=cr<4||ze<=4?er:oe[k[er>>>24]]^le[k[er>>>16&255]]^ue[k[er>>>8&255]]^ie[k[255&er]]}}},encryptBlock:function(de,Ie){this._doCryptBlock(de,Ie,this._keySchedule,$,V,z,re,k)},decryptBlock:function(de,Ie){var Ve=de[Ie+1];de[Ie+1]=de[Ie+3],de[Ie+3]=Ve,this._doCryptBlock(de,Ie,this._invKeySchedule,oe,le,ue,ie,L),Ve=de[Ie+1],de[Ie+1]=de[Ie+3],de[Ie+3]=Ve},_doCryptBlock:function(de,Ie,Ve,kt,At,ze,Et,cr){for(var er=this._nRounds,or=de[Ie]^Ve[0],dr=de[Ie+1]^Ve[1],lr=de[Ie+2]^Ve[2],nr=de[Ie+3]^Ve[3],ur=4,ar=1;ar<er;ar++){var gr=kt[or>>>24]^At[dr>>>16&255]^ze[lr>>>8&255]^Et[255&nr]^Ve[ur++],pr=kt[dr>>>24]^At[lr>>>16&255]^ze[nr>>>8&255]^Et[255&or]^Ve[ur++],hr=kt[lr>>>24]^At[nr>>>16&255]^ze[or>>>8&255]^Et[255&dr]^Ve[ur++],Cr=kt[nr>>>24]^At[or>>>16&255]^ze[dr>>>8&255]^Et[255&lr]^Ve[ur++];or=gr,dr=pr,lr=hr,nr=Cr}gr=(cr[or>>>24]<<24|cr[dr>>>16&255]<<16|cr[lr>>>8&255]<<8|cr[255&nr])^Ve[ur++],pr=(cr[dr>>>24]<<24|cr[lr>>>16&255]<<16|cr[nr>>>8&255]<<8|cr[255&or])^Ve[ur++],hr=(cr[lr>>>24]<<24|cr[nr>>>16&255]<<16|cr[or>>>8&255]<<8|cr[255&dr])^Ve[ur++],Cr=(cr[nr>>>24]<<24|cr[or>>>16&255]<<16|cr[dr>>>8&255]<<8|cr[255&lr])^Ve[ur++],de[Ie]=gr,de[Ie+1]=pr,de[Ie+2]=hr,de[Ie+3]=Cr},keySize:8});g.AES=y._createHelper(Fe)}(),n.AES)},function(t,r){},function(t,r,e){var n;t.exports=(n=e(96),function(g){var y=n,i=y.lib,k=i.WordArray,L=i.Hasher,$=y.algo,V=[];(function(){for(var ie=0;ie<64;ie++)V[ie]=4294967296*g.abs(g.sin(ie+1))|0})();var z=$.MD5=L.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(ie,ae){for(var Fe=0;Fe<16;Fe++){var de=ae+Fe,Ie=ie[de];ie[de]=16711935&(Ie<<8|Ie>>>24)|4278255360&(Ie<<24|Ie>>>8)}var Ve=this._hash.words,kt=ie[ae+0],At=ie[ae+1],ze=ie[ae+2],Et=ie[ae+3],cr=ie[ae+4],er=ie[ae+5],or=ie[ae+6],dr=ie[ae+7],lr=ie[ae+8],nr=ie[ae+9],ur=ie[ae+10],ar=ie[ae+11],gr=ie[ae+12],pr=ie[ae+13],hr=ie[ae+14],Cr=ie[ae+15],wr=Ve[0],Sr=Ve[1],mr=Ve[2],_r=Ve[3];wr=re(wr,Sr,mr,_r,kt,7,V[0]),_r=re(_r,wr,Sr,mr,At,12,V[1]),mr=re(mr,_r,wr,Sr,ze,17,V[2]),Sr=re(Sr,mr,_r,wr,Et,22,V[3]),wr=re(wr,Sr,mr,_r,cr,7,V[4]),_r=re(_r,wr,Sr,mr,er,12,V[5]),mr=re(mr,_r,wr,Sr,or,17,V[6]),Sr=re(Sr,mr,_r,wr,dr,22,V[7]),wr=re(wr,Sr,mr,_r,lr,7,V[8]),_r=re(_r,wr,Sr,mr,nr,12,V[9]),mr=re(mr,_r,wr,Sr,ur,17,V[10]),Sr=re(Sr,mr,_r,wr,ar,22,V[11]),wr=re(wr,Sr,mr,_r,gr,7,V[12]),_r=re(_r,wr,Sr,mr,pr,12,V[13]),mr=re(mr,_r,wr,Sr,hr,17,V[14]),wr=oe(wr,Sr=re(Sr,mr,_r,wr,Cr,22,V[15]),mr,_r,At,5,V[16]),_r=oe(_r,wr,Sr,mr,or,9,V[17]),mr=oe(mr,_r,wr,Sr,ar,14,V[18]),Sr=oe(Sr,mr,_r,wr,kt,20,V[19]),wr=oe(wr,Sr,mr,_r,er,5,V[20]),_r=oe(_r,wr,Sr,mr,ur,9,V[21]),mr=oe(mr,_r,wr,Sr,Cr,14,V[22]),Sr=oe(Sr,mr,_r,wr,cr,20,V[23]),wr=oe(wr,Sr,mr,_r,nr,5,V[24]),_r=oe(_r,wr,Sr,mr,hr,9,V[25]),mr=oe(mr,_r,wr,Sr,Et,14,V[26]),Sr=oe(Sr,mr,_r,wr,lr,20,V[27]),wr=oe(wr,Sr,mr,_r,pr,5,V[28]),_r=oe(_r,wr,Sr,mr,ze,9,V[29]),mr=oe(mr,_r,wr,Sr,dr,14,V[30]),wr=le(wr,Sr=oe(Sr,mr,_r,wr,gr,20,V[31]),mr,_r,er,4,V[32]),_r=le(_r,wr,Sr,mr,lr,11,V[33]),mr=le(mr,_r,wr,Sr,ar,16,V[34]),Sr=le(Sr,mr,_r,wr,hr,23,V[35]),wr=le(wr,Sr,mr,_r,At,4,V[36]),_r=le(_r,wr,Sr,mr,cr,11,V[37]),mr=le(mr,_r,wr,Sr,dr,16,V[38]),Sr=le(Sr,mr,_r,wr,ur,23,V[39]),wr=le(wr,Sr,mr,_r,pr,4,V[40]),_r=le(_r,wr,Sr,mr,kt,11,V[41]),mr=le(mr,_r,wr,Sr,Et,16,V[42]),Sr=le(Sr,mr,_r,wr,or,23,V[43]),wr=le(wr,Sr,mr,_r,nr,4,V[44]),_r=le(_r,wr,Sr,mr,gr,11,V[45]),mr=le(mr,_r,wr,Sr,Cr,16,V[46]),wr=ue(wr,Sr=le(Sr,mr,_r,wr,ze,23,V[47]),mr,_r,kt,6,V[48]),_r=ue(_r,wr,Sr,mr,dr,10,V[49]),mr=ue(mr,_r,wr,Sr,hr,15,V[50]),Sr=ue(Sr,mr,_r,wr,er,21,V[51]),wr=ue(wr,Sr,mr,_r,gr,6,V[52]),_r=ue(_r,wr,Sr,mr,Et,10,V[53]),mr=ue(mr,_r,wr,Sr,ur,15,V[54]),Sr=ue(Sr,mr,_r,wr,At,21,V[55]),wr=ue(wr,Sr,mr,_r,lr,6,V[56]),_r=ue(_r,wr,Sr,mr,Cr,10,V[57]),mr=ue(mr,_r,wr,Sr,or,15,V[58]),Sr=ue(Sr,mr,_r,wr,pr,21,V[59]),wr=ue(wr,Sr,mr,_r,cr,6,V[60]),_r=ue(_r,wr,Sr,mr,ar,10,V[61]),mr=ue(mr,_r,wr,Sr,ze,15,V[62]),Sr=ue(Sr,mr,_r,wr,nr,21,V[63]),Ve[0]=Ve[0]+wr|0,Ve[1]=Ve[1]+Sr|0,Ve[2]=Ve[2]+mr|0,Ve[3]=Ve[3]+_r|0},_doFinalize:function(){var ie=this._data,ae=ie.words,Fe=8*this._nDataBytes,de=8*ie.sigBytes;ae[de>>>5]|=128<<24-de%32;var Ie=g.floor(Fe/4294967296),Ve=Fe;ae[15+(de+64>>>9<<4)]=16711935&(Ie<<8|Ie>>>24)|4278255360&(Ie<<24|Ie>>>8),ae[14+(de+64>>>9<<4)]=16711935&(Ve<<8|Ve>>>24)|4278255360&(Ve<<24|Ve>>>8),ie.sigBytes=4*(ae.length+1),this._process();for(var kt=this._hash,At=kt.words,ze=0;ze<4;ze++){var Et=At[ze];At[ze]=16711935&(Et<<8|Et>>>24)|4278255360&(Et<<24|Et>>>8)}return kt},clone:function(){var ie=L.clone.call(this);return ie._hash=this._hash.clone(),ie}});function re(ie,ae,Fe,de,Ie,Ve,kt){var At=ie+(ae&Fe|~ae&de)+Ie+kt;return(At<<Ve|At>>>32-Ve)+ae}function oe(ie,ae,Fe,de,Ie,Ve,kt){var At=ie+(ae&de|Fe&~de)+Ie+kt;return(At<<Ve|At>>>32-Ve)+ae}function le(ie,ae,Fe,de,Ie,Ve,kt){var At=ie+(ae^Fe^de)+Ie+kt;return(At<<Ve|At>>>32-Ve)+ae}function ue(ie,ae,Fe,de,Ie,Ve,kt){var At=ie+(Fe^(ae|~de))+Ie+kt;return(At<<Ve|At>>>32-Ve)+ae}y.MD5=L._createHelper(z),y.HmacMD5=L._createHmacHelper(z)}(Math),n.MD5)},function(t,r,e){var n,g,y,i,k,L,$,V;t.exports=(V=e(96),g=(n=V).lib,y=g.WordArray,i=g.Hasher,k=n.algo,L=[],$=k.SHA1=i.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,re){for(var oe=this._hash.words,le=oe[0],ue=oe[1],ie=oe[2],ae=oe[3],Fe=oe[4],de=0;de<80;de++){if(de<16)L[de]=0|z[re+de];else{var Ie=L[de-3]^L[de-8]^L[de-14]^L[de-16];L[de]=Ie<<1|Ie>>>31}var Ve=(le<<5|le>>>27)+Fe+L[de];Ve+=de<20?1518500249+(ue&ie|~ue&ae):de<40?1859775393+(ue^ie^ae):de<60?(ue&ie|ue&ae|ie&ae)-1894007588:(ue^ie^ae)-899497514,Fe=ae,ae=ie,ie=ue<<30|ue>>>2,ue=le,le=Ve}oe[0]=oe[0]+le|0,oe[1]=oe[1]+ue|0,oe[2]=oe[2]+ie|0,oe[3]=oe[3]+ae|0,oe[4]=oe[4]+Fe|0},_doFinalize:function(){var z=this._data,re=z.words,oe=8*this._nDataBytes,le=8*z.sigBytes;return re[le>>>5]|=128<<24-le%32,re[14+(le+64>>>9<<4)]=Math.floor(oe/4294967296),re[15+(le+64>>>9<<4)]=oe,z.sigBytes=4*re.length,this._process(),this._hash},clone:function(){var z=i.clone.call(this);return z._hash=this._hash.clone(),z}}),n.SHA1=i._createHelper($),n.HmacSHA1=i._createHmacHelper($),V.SHA1)},function(t,r,e){var n,g,y,i;t.exports=(n=e(96),y=(g=n).lib.Base,i=g.enc.Utf8,void(g.algo.HMAC=y.extend({init:function(k,L){k=this._hasher=new k.init,typeof L=="string"&&(L=i.parse(L));var $=k.blockSize,V=4*$;L.sigBytes>V&&(L=k.finalize(L)),L.clamp();for(var z=this._oKey=L.clone(),re=this._iKey=L.clone(),oe=z.words,le=re.words,ue=0;ue<$;ue++)oe[ue]^=1549556828,le[ue]^=909522486;z.sigBytes=re.sigBytes=V,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var L=this._hasher,$=L.finalize(k);return L.reset(),L.finalize(this._oKey.clone().concat($))}})))},function(t,r,e){var n,g;t.exports=(g=e(96),e(320),g.mode.ECB=((n=g.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(y,i){this._cipher.encryptBlock(y,i)}}),n.Decryptor=n.extend({processBlock:function(y,i){this._cipher.decryptBlock(y,i)}}),n),g.mode.ECB)},function(t,r,e){var n;t.exports=(n=e(96),e(320),n.pad.Pkcs7)},function(t,r,e){var n;t.exports=(n=e(96),n.enc.Utf8)},function(t,r,e){var n=e(10),g=e(202).fn,y=e(319);g.onChatroomMembersInfo=g.onChatroomMembers=function(i){i.error||(i.obj.members=y.reverseMembers(i.content.members))},g.onGetChatroomMemberCountByTag=function(i){i.error||(i.obj=i.content)},g.onMarkChatroomMember=function(i){i.error||(i.obj.member=n(y).call(y,i.content.chatroomMember))},g.onSyncRobot=function(i){!i.error&&this.options.onrobots?this.options.onrobots(null,i.content):this.ontions.onrobots(i.error,{})}},function(t,r,e){var n=e(10),g=e(11),y=e(0),i=function(ie){this.account=ie.account},k=i.prototype,L=k.Message=e(123),$=k.TextMessage=e(923),V=k.FileMessage=e(210),z=k.GeoMessage=e(927),re=k.NotificationMessage=e(928),oe=k.CustomMessage=e(929),le=k.TipMessage=e(930),ue=k.RobotMessage=e(931);k.validTypes=L.validTypes,k.reverse=function(ie){var ae;switch(L.getType(ie)){case"text":ae=n($).call($,ie);break;case"image":case"audio":case"video":case"file":ae=n(V).call(V,ie);break;case"geo":ae=n(z).call(z,ie);break;case"notification":ae=n(re).call(re,ie);break;case"custom":ae=n(oe).call(oe,ie);break;case"tip":ae=n(le).call(le,ie);break;case"robot":ae=n(ue).call(ue,ie);break;default:ae=n(L).call(L,ie)}return L.setExtra(ae,this.account),ae},k.reverseMsgs=function(ie,ae){var Fe,de,Ie=this;return g(ie).call(ie,function(Ve){return Ve=n(Ie).call(Ie,Ve),ae&&((Fe=ae.modifyObj)&&(Ve=y.merge(Ve,Fe)),de=ae.mapper,y.isFunction(de)&&(Ve=de(Ve))),Ve})},t.exports=i},function(t,r,e){var n=e(19),g=e(10),y=e(123),i=e(0);function k(L){i.verifyOptions(L,"text","msg::TextMessage"),L.type="text",y.call(this,L),this.attach=L.text,this.body=""}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.text=L.attach,$},t.exports=k},function(t,r,e){var n=e(19),g=e(0),y=e(210);function i(){}i.prototype=n(y.prototype),i.verifyFile=function(k,L){g.verifyOptions(k,"w h",!0,"file.",L)},t.exports=i},function(t,r,e){var n=e(19),g=e(210),y=e(0);function i(){}i.prototype=n(g.prototype),i.verifyFile=function(k,L){y.verifyOptions(k,"dur",!0,"file.",L)},t.exports=i},function(t,r,e){var n=e(19),g=e(210),y=e(0);function i(){}i.prototype=n(g.prototype),i.verifyFile=function(k,L){y.verifyOptions(k,"dur w h",!0,"file.",L)},t.exports=i},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(123),k=e(0);function L($){$.type="geo",k.verifyOptions($,"geo","msg::GeoMessage"),k.verifyOptions($.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),k.verifyParamType("geo.lng",$.geo.lng,"number","msg::GeoMessage"),k.verifyParamType("geo.lat",$.geo.lat,"number","msg::GeoMessage"),k.verifyParamType("geo.title",$.geo.title,"string","msg::GeoMessage"),i.call(this,$),this.attach=n($.geo)}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return $.attach=$.attach?""+$.attach:"",V.geo=$.attach?JSON.parse($.attach):{},V},t.exports=L},function(t,r,e){var n=e(19),g=e(10),y=e(43),i=e(0).notundef,k=e(123),L={301:"memberEnter",302:"memberExit",303:"blackMember",304:"unblackMember",305:"gagMember",306:"ungagMember",307:"addManager",308:"removeManager",309:"addCommon",310:"removeCommon",311:"closeChatroom",312:"updateChatroom",313:"kickMember",314:"addTempMute",315:"removeTempMute",316:"updateMemberInfo",317:"updateQueue",318:"muteRoom",319:"unmuteRoom",320:"batchUpdateQueue",321:"addTempMuteTag",322:"removeTempMuteTag",324:"batchQueueOffer",323:"deleteChatroomMsg",325:"updateChatroomTags"};function $(){}$.prototype=n(k.prototype),$.reverse=function(V){var z=g(k).call(k,V);if(V.attach=V.attach?""+V.attach:"",V.attach){var re=JSON.parse(V.attach);if(z.attach={type:L[re.id]},i(re.data)){var oe=re.data;if(i(oe.operator)&&(z.attach.from=oe.operator),i(oe.opeNick)&&(z.attach.fromNick=oe.opeNick),i(oe.target)&&(z.attach.to=oe.target),i(oe.tarNick)&&(z.attach.toNick=oe.tarNick),i(oe.muteDuration)&&(z.attach.duration=y(oe.muteDuration,10)),i(oe.tags)&&(z.attach.tags=oe.tags),z.attach.type==="memberEnter"&&(i(oe.muted)?z.attach.gaged=+oe.muted==1:z.attach.gaged=!1,i(oe.tempMuted)?z.attach.tempMuted=+oe.tempMuted==1:z.attach.tempMuted=!1,i(oe.muteTtl)?z.attach.tempMuteDuration=+oe.muteTtl:z.attach.tempMuteDuration=0),z.attach.type==="deleteChatroomMsg"&&(z.attach.msgId=oe.msgId,z.attach.msgTime=oe.msgTime),i(oe.ext)&&(z.attach.custom=oe.ext),i(oe.queueChange)){var le=JSON.parse(oe.queueChange);switch(le._e){case"OFFER":z.attach.queueChange={type:"OFFER",elementKey:le.key,elementValue:le.content};break;case"POLL":z.attach.queueChange={type:"POLL",elementKey:le.key,elementValue:le.content};break;case"DROP":z.attach.queueChange={type:"DROP"};break;case"PARTCLEAR":case"BATCH_UPDATE":z.attach.queueChange={type:le._e,elementKv:le.kvObject};break;case"BATCH_OFFER":z.attach.queueChange={type:le._e,elements:le.elements}}}}}else z.attach={};return z},t.exports=$},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(123),k=e(0);function L($){k.verifyOptions($,"content","msg::CustomMessage"),$.type="custom",i.call(this,$),typeof $.content!="string"&&($.content=n($.content)),this.attach=$.content}L.prototype=g(i.prototype),L.reverse=function($){var V=y(i).call(i,$);return V.content=$.attach,V},t.exports=L},function(t,r,e){var n=e(19),g=e(10),y=e(123),i=e(0);function k(L){i.verifyOptions(L,"tip","msg::TipMessage"),L.type="tip",y.call(this,L),this.attach=L.tip}k.prototype=n(y.prototype),k.reverse=function(L){var $=g(y).call(y,L);return $.tip=L.attach,$},t.exports=k},function(t,r,e){var n=e(6),g=e(19),y=e(10),i=e(11),k=e(123),L=e(0),$={welcome:"00",text:"01",link:"03"},V={"01":"text","02":"image","03":"answer",11:"template"};function z(re){L.verifyOptions(re,"content","msg::RobotMessage");var oe=re.content;switch(oe.type){case"welcome":L.undef(re.body)&&(this.body="欢迎消息");break;case"text":L.verifyOptions(oe,"content","msg::RobotMessage"),L.undef(re.body)&&(this.body=oe.content);break;case"link":L.verifyOptions(oe,"target","msg::RobotMessage")}oe.type&&(oe.type=$[oe.type]),oe={param:oe,robotAccid:re.robotAccid},this.attach=n(oe),re.type="robot",k.call(this,re)}z.prototype=g(k.prototype),z.reverse=function(re){var oe=y(k).call(k,re);if(oe.type==="robot"){var le=JSON.parse(re.attach);if(le.param&&(le.param.type=V[le.param.type]||"unknown"),le.robotMsg){var ue=(le=L.merge(le,le.robotMsg)).message;le.flag==="bot"?le.message=i(ue).call(ue,function(ie){return ie.type=V[ie.type]||"unknown",ie}):le.flag,delete le.robotMsg}oe.content=le}return oe},t.exports=z},function(t,r,e){var n=e(10),g=e(28),y=e(11),i=e(15),k=e(6),L=e(0),$=L.undef,V=e(201).fn,z=e(26).reportAPI;V.beforeSendMsg=function(oe){oe.cmd="sendMsg"};var re={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};V.getHistoryMsgs=function(oe){if((oe=oe||{}).done=z({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgs",done:oe.done}),L.verifyOptions(oe),$(oe.timetag)?oe.timetag=0:L.verifyParamType("timetag",oe.timetag,"number","msg::getHistoryMsgs"),$(oe.limit)?oe.limit=100:L.verifyParamType("limit",oe.limit,"number","msg::getHistoryMsgs"),$(n(oe))?oe.reverse=!1:L.verifyParamType("reverse",n(oe),"boolean","msg::getHistoryMsgs"),$(oe.msgTypes))oe.msgTypes=[];else if(g(oe.msgTypes)){var le,ue;oe.msgTypes=y(le=oe.msgTypes).call(le,function(ie){return re[ie]}),oe.msgTypes=i(ue=oe.msgTypes).call(ue,function(ie){return typeof ie=="number"})}else typeof re[oe.msgTypes]=="number"?oe.msgTypes=[re[oe.msgTypes]]:oe.msgTypes=[];this.processCallback(oe),this.sendCmd("getHistoryMsgs",oe,function(ie,ae,Fe){g(Fe)&&(Fe=y(Fe).call(Fe,function(de){return re[de.type]&&(de.type=re[de.type]),de})),oe.callback(ie,ae,Fe)})},V.getHistoryMsgsByTags=function(oe){if((oe=oe||{}).done=z({instance:this,className:"ChatroomFn",funcName:"getHistoryMsgsByTags",done:oe.done}),L.verifyOptions(oe,"tags","api::msg::getHistoryMsgsByTags"),L.verifyParamType("tags",oe.tags,"array","api::msg::getHistoryMsgsByTags"),$(oe.fromTime)?oe.fromTime=0:L.verifyParamType("fromTime",oe.fromTime,"number","api::msg::getHistoryMsgsByTags"),$(oe.toTime)?oe.toTime=0:L.verifyParamType("toTime",oe.toTime,"number","api::msg::getHistoryMsgsByTags"),$(oe.limit)?oe.limit=100:L.verifyParamType("limit",oe.limit,"number","msg::getHistoryMsgs"),$(n(oe))?oe.reverse=0:L.verifyParamType("reverse",n(oe),"number","msg::getHistoryMsgs"),$(oe.types))oe.types=[];else if(g(oe.types)){var le,ue;oe.types=y(le=oe.types).call(le,function(ie){return re[ie]}),oe.types=i(ue=oe.types).call(ue,function(ie){return typeof ie=="number"})}else typeof re[oe.types]=="number"?oe.types=[re[oe.types]]:oe.types=[];this.processCallback(oe),oe.types=k(oe.types),oe.tags=k(oe.tags),this.sendCmd("getHistoryMsgsByTags",{chatRoomTagHistoryMsgRequestTag:oe},oe.callback)}},function(t,r,e){var n=e(201).fn,g=e(26).reportAPI;n.disconnect=function(y){(y=y||{}).done=g({instance:this,className:"ChatroomFn",funcName:"disconnect",done:y.done}),this.protocol.disconnect(y.done)}},function(t,r,e){var n=e(0),g=n.undef,y=n.verifyOptions,i=n.verifyParamType,k=e(319),L=e(201).fn,$=e(26).reportAPI;L.updateMyChatroomMemberInfo=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateMyChatroomMemberInfo",done:V.done}),y(V,"member needNotify","member::updateMyChatroomMemberInfo"),i("needNotify",V.needNotify,"boolean","member::updateMyChatroomMemberInfo"),V.needSave=V.needSave||!1,i("needSave",V.needSave,"boolean","member::updateMyChatroomMemberInfo"),this.processCustom(V),this.processCallback(V),V.chatroomMember=new k(V.member),V.antispamTag={antiSpamBusinessId:V.antiSpamBusinessId},this.sendCmd("updateMyChatroomMemberInfo",V)},L.getChatroomMembers=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMembers",done:V.done}),y(V,"guest","member::getChatroomMembers"),i("guest",V.guest,"boolean","member::getChatroomMembers"),g(V.time)?V.time=0:i("time",V.time,"number","member::getChatroomMembers"),g(V.limit)?V.limit=100:i("limit",V.limit,"number","member::getChatroomMembers"),this.processCallback(V),V.guest?V.type=V.desc===!1?3:1:V.type=V.onlyOnline?2:0,this.sendCmd("getChatroomMembers",V)},L.getChatroomMembersByTag=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersByTag",done:V.done}),y(V,"tag","getChatroomMembersByTag::rag"),g(V.time)?V.time=0:i("time",V.time,"number","getChatroomMembersByTag::time"),g(V.limit)?V.limit=100:i("limit",V.limit,"number","getChatroomMembersByTag::limit"),this.processCallback(V),this.sendCmd("getChatroomMembersByTag",{tagMemberReq:n.filterObj(V,"tag limit time"),callback:V.callback})},L.getChatroomMemberCountByTag=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMemberCountByTag",done:V.done}),y(V,"tag","getChatroomMemberCountByTag::rag"),this.processCallback(V),this.sendCmd("getChatroomMemberCountByTag",V)},L.getChatroomMembersInfo=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getChatroomMembersInfo",done:V.done}),y(V,"accounts","member::getChatroomMembersInfo"),i("accounts",V.accounts,"array","member::getChatroomMembersInfo"),this.processCallback(V),this.sendCmd("getChatroomMembersInfo",V)},L.markChatroomIdentity=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomIdentity",done:V.done}),y(V,"identity","member::markChatroomIdentity"),V.type={manager:1,common:2,black:-1,mute:-2}[V.identity],delete V.identity,isNaN(V.type)?y(V,"identity",'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".'):this.markChatroomMember(V)},L.markChatroomManager=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomManager",done:V.done}),V.type=1,this.markChatroomMember(V)},L.markChatroomCommonMember=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomCommonMember",done:V.done}),V.type=2,this.markChatroomMember(V)},L.markChatroomBlacklist=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomBlacklist",done:V.done}),V.type=-1,this.markChatroomMember(V)},L.markChatroomGaglist=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomGaglist",done:V.done}),V.type=-2,this.markChatroomMember(V)},L.markChatroomMember=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"markChatroomMember",done:V.done}),y(V,"account type isAdd","member::markChatroomMember"),i("isAdd",V.isAdd,"boolean","member::markChatroomMember"),g(V.level)?V.level=0:i("level",V.level,"number","member::markChatroomMember"),this.processCustom(V),this.processCallback(V),this.sendCmd("markChatroomMember",V)},L.kickChatroomMember=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"kickChatroomMember",done:V.done}),y(V,"account","member::kickChatroomMember"),this.processCustom(V),this.processCallback(V),this.sendCmd("kickChatroomMember",V)},L.updateChatroomMemberTempMute=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateChatroomMemberTempMute",done:V.done}),y(V,"account duration needNotify","member::updateChatroomMemberTempMute"),i("duration",V.duration,"number","member::updateChatroomMemberTempMute"),i("needNotify",V.needNotify,"boolean","member::updateChatroomMemberTempMute"),this.processCustom(V),this.processCallback(V),this.sendCmd("updateChatroomMemberTempMute",V)},L.updateTagMembersTempMute=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateTagMembersTempMute",done:V.done}),y(V,"tag duration needNotify","member::updateTagMembersTempMute"),i("duration",V.duration,"number","member::updateTagMembersTempMute"),i("needNotify",V.needNotify,"boolean","member::updateTagMembersTempMute"),this.processCustom(V),this.processCallback(V);var z=n.filterObj(V,"tag duration custom notifyTargetTags");z.needNotify=V.needNotify?1:0,this.sendCmd("updateTagMembersTempMute",{tagMuteReq:z,callback:V.callback})},L.updateCoordinate=n.throttle(function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"updateCoordinate",done:V.done});var z=!0;V.x===void 0||V.y===void 0||V.z===void 0?z=!1:(typeof V.x!="number"&&(V.x=0),typeof V.y!="number"&&(V.y=0),typeof V.z!="number"&&(V.z=0)),this.processCallback(V);var re=n.filterObj(V,z?"x y z distance":"distance");this.sendCmd("updateCoordinate",{coordinateReq:re,callback:V.callback})},300,{},function(V){V&&V.done&&V.done({code:416,chatroomId:this.options.chatroomId})}),L.getRobotList=function(V){(V=V||{}).done=$({instance:this,className:"ChatroomFn",funcName:"getRobotList",done:V.done}),this.logger.warn("this api will be abandon"),g(V.timetag)&&(V.timetag=0),this.processCallback(V),this.sendCmd("syncRobot",V)}},function(t,r,e){var n=e(201).fn,g=e(0),y=e(26).reportAPI;n.queueOffer=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueOffer",done:i.done}),g.verifyOptions(i,"elementKey elementValue","msg::queueOffer");var k={elementKey:i.elementKey,elementValue:i.elementValue,transient:!!i.transient};i.elementAccount&&(k.elementAccount=i.elementAccount),this.processCallback(i),this.sendCmd("queueOffer",k,i.callback)},n.queuePoll=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queuePoll",done:i.done}),i.elementKey=i.elementKey||"",this.processCallback(i),this.sendCmd("queuePoll",i,i.callback)},n.queueList=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueList",done:i.done}),this.processCallback(i),this.sendCmd("queueList",i,i.callback)},n.peak=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"peak",done:i.done}),this.processCallback(i),this.sendCmd("peak",i,i.callback)},n.queueDrop=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueDrop",done:i.done}),this.processCallback(i),this.sendCmd("queueDrop",i,i.callback)},n.queueChange=function(i){(i=i||{}).done=y({instance:this,className:"ChatroomFn",funcName:"queueChange",done:i.done}),g.verifyOptions(i,"elementMap","msg::queueOffer"),i.needNotify?(i.needNotify=!0,g.verifyOptions(i,"notifyExt","msg::queueOffer")):i.needNotify=!1,this.processCallback(i),this.sendCmd("queueChange",i,i.callback)}},,,function(t,r,e){t.exports=e(939)},function(t,r,e){e(305);var n={NIM:e(797),Chatroom:e(909)};e(318)(n),t.exports=n}])})})(NIM_Web_SDK);var NIM_Web_SDKExports=NIM_Web_SDK.exports;const NIM_SDK=getDefaultExportFromCjs(NIM_Web_SDKExports);class NimChatroomSocket{constructor(r){dd(this,"liveId");dd(this,"nimChatroomSocket");dd(this,"onMessage");dd(this,"handleRoomSocketMessage",r=>{this.onMessage(this,r)});dd(this,"onConnet",r=>{let e="进入小偶像的直播间成功。";console.log(e),logApi().addSystem(e)});dd(this,"handleRoomSocketError",(r,e)=>{console.log("发生错误",r,e),logApi().addSystem("发生错误"+r)});dd(this,"handleRoomSocketDisconnect",r=>{console.log("连接断开",r),logApi().addSystem("直播间连接断开")});this.liveId=r.liveId,this.onMessage=r.onMessage}init(r){this.nimChatroomSocket=NIM_SDK.Chatroom.getInstance({appKey:atob(r),chatroomId:this.liveId,chatroomAddresses:["chatweblink01.netease.im:443"],onconnect:this.onConnet,onmsgs:this.handleRoomSocketMessage,onerror:this.handleRoomSocketError,ondisconnect:this.handleRoomSocketDisconnect,isAnonymous:!0,chatroomNick:this.uuid(),chatroomAvatar:"",db:!1,dbLog:!1})}disconnect(){var r,e;(e=(r=this.nimChatroomSocket)==null?void 0:r.disconnect)==null||e.call(r,{done(){}}),this.nimChatroomSocket=void 0}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,n=r==="x"?e:e&3|8;return n.toString(16)})}}var QCHAT_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(pe){return pe&&pe.__esModule&&Object.prototype.hasOwnProperty.call(pe,"default")?pe.default:pe}function g(pe){var xe={exports:{}};return pe(xe,xe.exports),xe.exports}var y,i,k=n(g(function(pe){pe.exports=function(qe){if(qe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qe},pe.exports.__esModule=!0,pe.exports.default=pe.exports})),L=function(pe){return pe&&pe.Math==Math&&pe},$=L(typeof globalThis=="object"&&globalThis)||L(typeof window=="object"&&window)||L(typeof self=="object"&&self)||L(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),V=function(pe){try{return!!pe()}catch{return!0}},z=!V(function(){var pe=(function(){}).bind();return typeof pe!="function"||pe.hasOwnProperty("prototype")}),re=Function.prototype,oe=re.apply,le=re.call,ue=typeof Reflect=="object"&&Reflect.apply||(z?le.bind(oe):function(){return le.apply(oe,arguments)}),ie=Function.prototype,ae=ie.bind,Fe=ie.call,de=z&&ae.bind(Fe,Fe),Ie=z?function(pe){return pe&&de(pe)}:function(pe){return pe&&function(){return Fe.apply(pe,arguments)}},Ve=function(pe){return typeof pe=="function"},kt=!V(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),At=Function.prototype.call,ze=z?At.bind(At):function(){return At.apply(At,arguments)},Et={}.propertyIsEnumerable,cr=Object.getOwnPropertyDescriptor,er={f:cr&&!Et.call({1:2},1)?function(xe){var qe=cr(this,xe);return!!qe&&qe.enumerable}:Et},or=function(pe,xe){return{enumerable:!(1&pe),configurable:!(2&pe),writable:!(4&pe),value:xe}},dr=Ie({}.toString),lr=Ie("".slice),nr=function(pe){return lr(dr(pe),8,-1)},ur=Object,ar=Ie("".split),gr=V(function(){return!ur("z").propertyIsEnumerable(0)})?function(pe){return nr(pe)=="String"?ar(pe,""):ur(pe)}:ur,pr=function(pe){return pe==null},hr=TypeError,Cr=function(pe){if(pr(pe))throw hr("Can't call method on "+pe);return pe},wr=function(pe){return gr(Cr(pe))},Sr=typeof document=="object"&&document.all,mr=Sr===void 0&&Sr!==void 0?function(pe){return typeof pe=="object"?pe!==null:Ve(pe)||pe===Sr}:function(pe){return typeof pe=="object"?pe!==null:Ve(pe)},_r={},Ar=function(pe){return Ve(pe)?pe:void 0},Er=function(pe,xe){return arguments.length<2?Ar(_r[pe])||Ar($[pe]):_r[pe]&&_r[pe][xe]||$[pe]&&$[pe][xe]},sr=Ie({}.isPrototypeOf),xr=Er("navigator","userAgent")||"",Nr=$.process,Mr=$.Deno,br=Nr&&Nr.versions||Mr&&Mr.version,yr=br&&br.v8;yr&&(i=(y=yr.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!i&&xr&&(!(y=xr.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=xr.match(/Chrome\/(\d+)/))&&(i=+y[1]);var Tr,Br=i,Lr=!!Object.getOwnPropertySymbols&&!V(function(){var pe=Symbol();return!String(pe)||!(Object(pe)instanceof Symbol)||!Symbol.sham&&Br&&Br<41}),Fr=Lr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",qr=Object,Vr=Fr?function(pe){return typeof pe=="symbol"}:function(pe){var xe=Er("Symbol");return Ve(xe)&&sr(xe.prototype,qr(pe))},Qr=String,Tn=function(pe){try{return Qr(pe)}catch{return"Object"}},xn=TypeError,Xr=function(pe){if(Ve(pe))return pe;throw xn(Tn(pe)+" is not a function")},Vn=function(pe,xe){var qe=pe[xe];return pr(qe)?void 0:Xr(qe)},Zr=TypeError,Nn=Object.defineProperty,Jr="__core-js_shared__",wn=$[Jr]||function(pe,xe){try{Nn($,pe,{value:xe,configurable:!0,writable:!0})}catch{$[pe]=xe}return xe}(Jr,{}),Un=g(function(pe){(pe.exports=function(xe,qe){return wn[xe]||(wn[xe]=qe!==void 0?qe:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),_n=Object,Pn=function(pe){return _n(Cr(pe))},Cn=Ie({}.hasOwnProperty),vn=Object.hasOwn||function(xe,qe){return Cn(Pn(xe),qe)},no=0,Ro=Math.random(),Ho=Ie(1 .toString),Vo=function(pe){return"Symbol("+(pe===void 0?"":pe)+")_"+Ho(++no+Ro,36)},Po=Un("wks"),Qo=$.Symbol,Ga=Qo&&Qo.for,ws=Fr?Qo:Qo&&Qo.withoutSetter||Vo,So=function(pe){if(!vn(Po,pe)||!Lr&&typeof Po[pe]!="string"){var xe="Symbol."+pe;Lr&&vn(Qo,pe)?Po[pe]=Qo[pe]:Po[pe]=Fr&&Ga?Ga(xe):ws(xe)}return Po[pe]},Ps=TypeError,ao=So("toPrimitive"),Sa=function(pe,xe){if(!mr(pe)||Vr(pe))return pe;var qe,Oe=Vn(pe,ao);if(Oe){if(xe===void 0&&(xe="default"),qe=ze(Oe,pe,xe),!mr(qe)||Vr(qe))return qe;throw Ps("Can't convert object to primitive value")}return xe===void 0&&(xe="number"),function(Ne,Lt){var Dt,Pt;if(Lt==="string"&&Ve(Dt=Ne.toString)&&!mr(Pt=ze(Dt,Ne))||Ve(Dt=Ne.valueOf)&&!mr(Pt=ze(Dt,Ne))||Lt!=="string"&&Ve(Dt=Ne.toString)&&!mr(Pt=ze(Dt,Ne)))return Pt;throw Zr("Can't convert object to primitive value")}(pe,xe)},pa=function(pe){var xe=Sa(pe,"string");return Vr(xe)?xe:xe+""},La=$.document,Ya=mr(La)&&mr(La.createElement),ea=function(pe){return Ya?La.createElement(pe):{}},wo=!kt&&!V(function(){return Object.defineProperty(ea("div"),"a",{get:function(){return 7}}).a!=7}),Fa=Object.getOwnPropertyDescriptor,$a={f:kt?Fa:function(xe,qe){if(xe=wr(xe),qe=pa(qe),wo)try{return Fa(xe,qe)}catch{}if(vn(xe,qe))return or(!ze(er.f,xe,qe),xe[qe])}},Dc=/#|\.prototype\./,As=function(pe,xe){var qe=Zn[$n(pe)];return qe==Ra||qe!=zo&&(Ve(xe)?V(xe):!!xe)},$n=As.normalize=function(pe){return String(pe).replace(Dc,".").toLowerCase()},Zn=As.data={},zo=As.NATIVE="N",Ra=As.POLYFILL="P",ys=As,Ds=Ie(Ie.bind),Go=function(pe,xe){return Xr(pe),xe===void 0?pe:z?Ds(pe,xe):function(){return pe.apply(xe,arguments)}},Bi=kt&&V(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),hi=String,Vp=TypeError,po=function(pe){if(mr(pe))return pe;throw Vp(hi(pe)+" is not an object")},I1=TypeError,pd=Object.defineProperty,E1=Object.getOwnPropertyDescriptor,P1="enumerable",A1="configurable",N1="writable",Ba={f:kt?Bi?function(xe,qe,Oe){if(po(xe),qe=pa(qe),po(Oe),typeof xe=="function"&&qe==="prototype"&&"value"in Oe&&N1 in Oe&&!Oe.writable){var Ne=E1(xe,qe);Ne&&Ne.writable&&(xe[qe]=Oe.value,Oe={configurable:A1 in Oe?Oe.configurable:Ne.configurable,enumerable:P1 in Oe?Oe.enumerable:Ne.enumerable,writable:!1})}return pd(xe,qe,Oe)}:pd:function(xe,qe,Oe){if(po(xe),qe=pa(qe),po(Oe),wo)try{return pd(xe,qe,Oe)}catch{}if("get"in Oe||"set"in Oe)throw I1("Accessors not supported");return"value"in Oe&&(xe[qe]=Oe.value),xe}},Ta=kt?function(pe,xe,qe){return Ba.f(pe,xe,or(1,qe))}:function(pe,xe,qe){return pe[xe]=qe,pe},O1=$a.f,R1=function(pe){var xe=function(qe,Oe,Ne){if(this instanceof xe){switch(arguments.length){case 0:return new pe;case 1:return new pe(qe);case 2:return new pe(qe,Oe)}return new pe(qe,Oe,Ne)}return ue(pe,this,arguments)};return xe.prototype=pe.prototype,xe},En=function(pe,xe){var qe,Oe,Ne,Lt,Dt,Pt,ir,vr,Ir=pe.target,Or=pe.global,jr=pe.stat,Ur=pe.proto,Yr=Or?$:jr?$[Ir]:($[Ir]||{}).prototype,In=Or?_r:_r[Ir]||Ta(_r,Ir,{})[Ir],Mn=In.prototype;for(Ne in xe)qe=!ys(Or?Ne:Ir+(jr?".":"#")+Ne,pe.forced)&&Yr&&vn(Yr,Ne),Dt=In[Ne],qe&&(Pt=pe.dontCallGetSet?(vr=O1(Yr,Ne))&&vr.value:Yr[Ne]),Lt=qe&&Pt?Pt:xe[Ne],qe&&typeof Dt==typeof Lt||(ir=pe.bind&&qe?Go(Lt,$):pe.wrap&&qe?R1(Lt):Ur&&Ve(Lt)?Ie(Lt):Lt,(pe.sham||Lt&&Lt.sham||Dt&&Dt.sham)&&Ta(ir,"sham",!0),Ta(In,Ne,ir),Ur&&(vn(_r,Oe=Ir+"Prototype")||Ta(_r,Oe,{}),Ta(_r[Oe],Ne,Lt),pe.real&&Mn&&!Mn[Ne]&&Ta(Mn,Ne,Lt)))},B1=Math.ceil,L1=Math.floor,F1=Math.trunc||function(xe){var qe=+xe;return(qe>0?L1:B1)(qe)},hc=function(pe){var xe=+pe;return xe!=xe||xe===0?0:F1(xe)},$1=Math.max,j1=Math.min,Li=function(pe,xe){var qe=hc(pe);return qe<0?$1(qe+xe,0):j1(qe,xe)},D1=Math.min,rs=function(pe){return(xe=pe.length)>0?D1(hc(xe),9007199254740991):0;var xe},Dm=function(pe){return function(xe,qe,Oe){var Ne,Lt=wr(xe),Dt=rs(Lt),Pt=Li(Oe,Dt);if(pe&&qe!=qe){for(;Dt>Pt;)if((Ne=Lt[Pt++])!=Ne)return!0}else for(;Dt>Pt;Pt++)if((pe||Pt in Lt)&&Lt[Pt]===qe)return pe||Pt||0;return!pe&&-1}},fd={includes:Dm(!0),indexOf:Dm(!1)},Fi={},U1=fd.indexOf,Um=Ie([].push),Vm=function(pe,xe){var qe,Oe=wr(pe),Ne=0,Lt=[];for(qe in Oe)!vn(Fi,qe)&&vn(Oe,qe)&&Um(Lt,qe);for(;xe.length>Ne;)vn(Oe,qe=xe[Ne++])&&(~U1(Lt,qe)||Um(Lt,qe));return Lt},Il=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Us=Object.keys||function(xe){return Vm(xe,Il)},V1=kt&&!Bi?Object.defineProperties:function(xe,qe){po(xe);for(var Oe,Ne=wr(qe),Lt=Us(qe),Dt=Lt.length,Pt=0;Dt>Pt;)Ba.f(xe,Oe=Lt[Pt++],Ne[Oe]);return xe},qm={f:V1},md=Er("document","documentElement"),Hm=Un("keys"),El=function(pe){return Hm[pe]||(Hm[pe]=Vo(pe))},zm=El("IE_PROTO"),gd=function(){},Wm=function(pe){return"<script>"+pe+"<\/script>"},Gm=function(pe){pe.write(Wm("")),pe.close();var xe=pe.parentWindow.Object;return pe=null,xe},Pl=function(){try{Tr=new ActiveXObject("htmlfile")}catch{}var pe,xe;Pl=typeof document<"u"?document.domain&&Tr?Gm(Tr):((xe=ea("iframe")).style.display="none",md.appendChild(xe),xe.src="javascript:",(pe=xe.contentWindow.document).open(),pe.write(Wm("document.F=Object")),pe.close(),pe.F):Gm(Tr);for(var qe=Il.length;qe--;)delete Pl.prototype[Il[qe]];return Pl()};Fi[zm]=!0;var ns=Object.create||function(xe,qe){var Oe;return xe!==null?(gd.prototype=po(xe),Oe=new gd,gd.prototype=null,Oe[zm]=xe):Oe=Pl(),qe===void 0?Oe:qm.f(Oe,qe)};En({target:"Object",stat:!0,sham:!kt},{create:ns});var q1=_r.Object,ii=function(xe,qe){return q1.create(xe,qe)},H1=String,z1=TypeError,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var pe,xe=!1,qe={};try{(pe=Ie(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(qe,[]),xe=qe instanceof Array}catch{}return function(Ne,Lt){return po(Ne),function(Dt){if(typeof Dt=="object"||Ve(Dt))return Dt;throw z1("Can't set "+H1(Dt)+" as a prototype")}(Lt),xe?pe(Ne,Lt):Ne.__proto__=Lt,Ne}}():void 0);En({target:"Object",stat:!0},{setPrototypeOf:vc});var ci=_r.Object.setPrototypeOf,Vs=Ie([].slice),Km=Function,W1=Ie([].concat),G1=Ie([].join),hd={},K1=function(pe,xe,qe){if(!vn(hd,xe)){for(var Oe=[],Ne=0;Ne<xe;Ne++)Oe[Ne]="a["+Ne+"]";hd[xe]=Km("C,a","return new C("+G1(Oe,",")+")")}return hd[xe](pe,qe)},vd=z?Km.bind:function(xe){var qe=Xr(this),Oe=qe.prototype,Ne=Vs(arguments,1),Lt=function(){var Pt=W1(Ne,Vs(arguments));return this instanceof Lt?K1(qe,Pt.length,Pt):qe.apply(xe,Pt)};return mr(Oe)&&(Lt.prototype=Oe),Lt};En({target:"Function",proto:!0,forced:Function.bind!==vd},{bind:vd});var ua=function(pe){return _r[pe+"Prototype"]},Q1=ua("Function").bind,yd=Function.prototype,oa=function(pe){var xe=pe.bind;return pe===yd||sr(yd,pe)&&xe===yd.bind?Q1:xe},bd=g(function(pe){function xe(qe,Oe){var Ne;return pe.exports=xe=ci?oa(Ne=ci).call(Ne):function(Dt,Pt){return Dt.__proto__=Pt,Dt},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe,Oe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),ra=n(g(function(pe){pe.exports=function(qe,Oe){qe.prototype=ii(Oe.prototype),qe.prototype.constructor=qe,bd(qe,Oe)},pe.exports.__esModule=!0,pe.exports.default=pe.exports}));En({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var yc={f:Object.getOwnPropertySymbols},$i=Object.assign,Qm=Object.defineProperty,J1=Ie([].concat),Jm=!$i||V(function(){if(kt&&$i({b:1},$i(Qm({},"a",{enumerable:!0,get:function(){Qm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var pe={},xe={},qe=Symbol(),Oe="abcdefghijklmnopqrst";return pe[qe]=7,Oe.split("").forEach(function(Ne){xe[Ne]=Ne}),$i({},pe)[qe]!=7||Us($i({},xe)).join("")!=Oe})?function(xe,qe){for(var Oe=Pn(xe),Ne=arguments.length,Lt=1,Dt=yc.f,Pt=er.f;Ne>Lt;)for(var ir,vr=gr(arguments[Lt++]),Ir=Dt?J1(Us(vr),Dt(vr)):Us(vr),Or=Ir.length,jr=0;Or>jr;)ir=Ir[jr++],kt&&!ze(Pt,vr,ir)||(Oe[ir]=vr[ir]);return Oe}:$i;En({target:"Object",stat:!0,arity:2,forced:Object.assign!==Jm},{assign:Jm});var zn=_r.Object.assign,hu=!V(function(){function pe(){}return pe.prototype.constructor=null,Object.getPrototypeOf(new pe)!==pe.prototype}),Sd=El("IE_PROTO"),Gn=Object,bc=Gn.prototype,Al=hu?Gn.getPrototypeOf:function(pe){var xe=Pn(pe);if(vn(xe,Sd))return xe[Sd];var qe=xe.constructor;return Ve(qe)&&xe instanceof qe?qe.prototype:xe instanceof Gn?bc:null},Y1=Il.concat("length","prototype"),vu={f:Object.getOwnPropertyNames||function(xe){return Vm(xe,Y1)}},Ym=Ie([].concat),X1=Er("Reflect","ownKeys")||function(xe){var qe=vu.f(po(xe)),Oe=yc.f;return Oe?Ym(qe,Oe(xe)):qe},Uc=Error,Z1=Ie("".replace),oy=String(Uc("zxcasd").stack),ay=/\n\s*at [^:]*:[^\n]*/,yu=ay.test(oy),Vc=function(pe,xe){if(yu&&typeof pe=="string"&&!Uc.prepareStackTrace)for(;xe--;)pe=Z1(pe,ay,"");return pe},sy=function(pe,xe){mr(xe)&&"cause"in xe&&Ta(pe,"cause",xe.cause)},Yi={},vi=So("iterator"),iy=Array.prototype,cy=function(pe){return pe!==void 0&&(Yi.Array===pe||iy[vi]===pe)},qp={};qp[So("toStringTag")]="z";var Xm=String(qp)==="[object z]",ly=So("toStringTag"),uy=Object,Zm=nr(function(){return arguments}())=="Arguments",Nl=Xm?nr:function(pe){var xe,qe,Oe;return pe===void 0?"Undefined":pe===null?"Null":typeof(qe=function(Ne,Lt){try{return Ne[Lt]}catch{}}(xe=uy(pe),ly))=="string"?qe:Zm?nr(xe):(Oe=nr(xe))=="Object"&&Ve(xe.callee)?"Arguments":Oe},bu=So("iterator"),ji=function(pe){if(!pr(pe))return Vn(pe,bu)||Vn(pe,"@@iterator")||Yi[Nl(pe)]},eg=TypeError,Ol=function(pe,xe){var qe=arguments.length<2?ji(pe):xe;if(Xr(qe))return po(ze(qe,pe));throw eg(Tn(pe)+" is not iterable")},tg=function(pe,xe,qe){var Oe,Ne;po(pe);try{if(!(Oe=Vn(pe,"return"))){if(xe==="throw")throw qe;return qe}Oe=ze(Oe,pe)}catch(Lt){Ne=!0,Oe=Lt}if(xe==="throw")throw qe;if(Ne)throw Oe;return po(Oe),qe},dy=TypeError,Td=function(pe,xe){this.stopped=pe,this.result=xe},Hp=Td.prototype,ia=function(pe,xe,qe){var Oe,Ne,Lt,Dt,Pt,ir,vr,Ir=qe&&qe.that,Or=!(!qe||!qe.AS_ENTRIES),jr=!(!qe||!qe.IS_RECORD),Ur=!(!qe||!qe.IS_ITERATOR),Yr=!(!qe||!qe.INTERRUPTED),In=Go(xe,Ir),Mn=function(Wn){return Oe&&tg(Oe,"normal",Wn),new Td(!0,Wn)},Dn=function(Wn){return Or?(po(Wn),Yr?In(Wn[0],Wn[1],Mn):In(Wn[0],Wn[1])):Yr?In(Wn,Mn):In(Wn)};if(jr)Oe=pe.iterator;else if(Ur)Oe=pe;else{if(!(Ne=ji(pe)))throw dy(Tn(pe)+" is not iterable");if(cy(Ne)){for(Lt=0,Dt=rs(pe);Dt>Lt;Lt++)if((Pt=Dn(pe[Lt]))&&sr(Hp,Pt))return Pt;return new Td(!1)}Oe=Ol(pe,Ne)}for(ir=jr?pe.next:Oe.next;!(vr=ze(ir,Oe)).done;){try{Pt=Dn(vr.value)}catch(Wn){tg(Oe,"throw",Wn)}if(typeof Pt=="object"&&Pt&&sr(Hp,Pt))return Pt}return new Td(!1)},eS=String,li=function(pe){if(Nl(pe)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return eS(pe)},Rl=function(pe,xe){return pe===void 0?arguments.length<2?"":xe:li(pe)},tS=!V(function(){var pe=Error("a");return!("stack"in pe)||(Object.defineProperty(pe,"stack",or(1,7)),pe.stack!==7)}),rS=So("toStringTag"),Cd=Error,Bl=[].push,Md=function(xe,qe){var Oe,Ne=arguments.length>2?arguments[2]:void 0,Lt=sr(rg,this);vc?Oe=vc(Cd(),Lt?Al(this):rg):(Oe=Lt?this:ns(rg),Ta(Oe,rS,"Error")),qe!==void 0&&Ta(Oe,"message",Rl(qe)),tS&&Ta(Oe,"stack",Vc(Oe.stack,1)),sy(Oe,Ne);var Dt=[];return ia(xe,Bl,{that:Dt}),Ta(Oe,"errors",Dt),Oe};vc?vc(Md,Cd):function(pe,xe,qe){for(var Oe=X1(xe),Ne=Ba.f,Lt=$a.f,Dt=0;Dt<Oe.length;Dt++){var Pt=Oe[Dt];vn(pe,Pt)||qe&&vn(qe,Pt)||Ne(pe,Pt,Lt(xe,Pt))}}(Md,Cd,{name:!0});var rg=Md.prototype=ns(Cd.prototype,{constructor:or(1,Md),message:or(1,""),name:or(1,"AggregateError")});En({global:!0,constructor:!0,arity:2},{AggregateError:Md});var zp,qc,Su,ng=$.WeakMap,Wp=Ve(ng)&&/native code/.test(String(ng)),og="Object already initialized",ag=$.TypeError,sg=$.WeakMap;if(Wp||wn.state){var Hc=wn.state||(wn.state=new sg),nS=Ie(Hc.get),py=Ie(Hc.has),fy=Ie(Hc.set);zp=function(pe,xe){if(py(Hc,pe))throw ag(og);return xe.facade=pe,fy(Hc,pe,xe),xe},qc=function(pe){return nS(Hc,pe)||{}},Su=function(pe){return py(Hc,pe)}}else{var zc=El("state");Fi[zc]=!0,zp=function(pe,xe){if(vn(pe,zc))throw ag(og);return xe.facade=pe,Ta(pe,zc,xe),xe},qc=function(pe){return vn(pe,zc)?pe[zc]:{}},Su=function(pe){return vn(pe,zc)}}var Sc,Gp,Xi,yi={set:zp,get:qc,has:Su,enforce:function(pe){return Su(pe)?qc(pe):zp(pe,{})},getterFor:function(pe){return function(xe){var qe;if(!mr(xe)||(qe=qc(xe)).type!==pe)throw ag("Incompatible receiver, "+pe+" required");return qe}}},ig=Function.prototype,gy=kt&&Object.getOwnPropertyDescriptor,cg=vn(ig,"name"),hy={EXISTS:cg,PROPER:cg&&(function(){}).name==="something",CONFIGURABLE:cg&&(!kt||kt&&gy(ig,"name").configurable)},Zi=function(pe,xe,qe,Oe){return Oe&&Oe.enumerable?pe[xe]=qe:Ta(pe,xe,qe),pe},lg=So("iterator"),vy=!1;[].keys&&("next"in(Xi=[].keys())?(Gp=Al(Al(Xi)))!==Object.prototype&&(Sc=Gp):vy=!0);var kd=!mr(Sc)||V(function(){var pe={};return Sc[lg].call(pe)!==pe});Sc=kd?{}:ns(Sc),Ve(Sc[lg])||Zi(Sc,lg,function(){return this});var ug={IteratorPrototype:Sc,BUGGY_SAFARI_ITERATORS:vy},Kp=Xm?{}.toString:function(){return"[object "+Nl(this)+"]"},oS=Ba.f,dg=So("toStringTag"),Tc=function(pe,xe,qe,Oe){if(pe){var Ne=qe?pe:pe.prototype;vn(Ne,dg)||oS(Ne,dg,{configurable:!0,value:xe}),Oe&&!Xm&&Ta(Ne,"toString",Kp)}},yy=ug.IteratorPrototype,Wc=function(){return this},Gc=hy.PROPER,ec=ug.BUGGY_SAFARI_ITERATORS,pg=So("iterator"),fg="keys",Qp="values",Jp="entries",aS=function(){return this},yo=function(pe,xe,qe,Oe,Ne,Lt,Dt){(function(Dn,Wn,Jn,Fn){var go=Wn+" Iterator";Dn.prototype=ns(yy,{next:or(+!Fn,Jn)}),Tc(Dn,go,!1,!0),Yi[go]=Wc})(qe,xe,Oe);var Pt,ir,vr,Ir=function(Dn){if(Dn===Ne&&In)return In;if(!ec&&Dn in Ur)return Ur[Dn];switch(Dn){case fg:return function(){return new qe(this,Dn)};case Qp:return function(){return new qe(this,Dn)};case Jp:return function(){return new qe(this,Dn)}}return function(){return new qe(this)}},Or=xe+" Iterator",jr=!1,Ur=pe.prototype,Yr=Ur[pg]||Ur["@@iterator"]||Ne&&Ur[Ne],In=!ec&&Yr||Ir(Ne),Mn=xe=="Array"&&Ur.entries||Yr;if(Mn&&(Pt=Al(Mn.call(new pe)))!==Object.prototype&&Pt.next&&(Tc(Pt,Or,!0,!0),Yi[Or]=aS),Gc&&Ne==Qp&&Yr&&Yr.name!==Qp&&(jr=!0,In=function(){return ze(Yr,this)}),Ne)if(ir={values:Ir(Qp),keys:Lt?In:Ir(fg),entries:Ir(Jp)},Dt)for(vr in ir)(ec||jr||!(vr in Ur))&&Zi(Ur,vr,ir[vr]);else En({target:xe,proto:!0,forced:ec||jr},ir);return Dt&&Ur[pg]!==In&&Zi(Ur,pg,In,{name:Ne}),Yi[xe]=In,ir};Ba.f;var by="Array Iterator",wd=yi.set,sS=yi.getterFor(by);yo(Array,"Array",function(pe,xe){wd(this,{type:by,target:wr(pe),index:0,kind:xe})},function(){var pe=sS(this),xe=pe.target,qe=pe.kind,Oe=pe.index++;return!xe||Oe>=xe.length?(pe.target=void 0,{value:void 0,done:!0}):qe=="keys"?{value:Oe,done:!1}:qe=="values"?{value:xe[Oe],done:!1}:{value:[Oe,xe[Oe]],done:!1}},"values"),Yi.Arguments=Yi.Array;var tc=nr($.process)=="process",Sy=So("species"),Yp=function(pe){var xe=Er(pe),qe=Ba.f;kt&&xe&&!xe[Sy]&&qe(xe,Sy,{configurable:!0,get:function(){return this}})},bs=TypeError,mg=function(pe,xe){if(sr(xe,pe))return pe;throw bs("Incorrect invocation")},fa=Ie(Function.toString);Ve(wn.inspectSource)||(wn.inspectSource=function(pe){return fa(pe)});var Ty=wn.inspectSource,Xp=function(){},Cy=[],My=Er("Reflect","construct"),gg=/^\s*(?:class|function)\b/,hg=Ie(gg.exec),Ka=!gg.exec(Xp),Di=function(xe){if(!Ve(xe))return!1;try{return My(Xp,Cy,xe),!0}catch{return!1}},ky=function(xe){if(!Ve(xe))return!1;switch(Nl(xe)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ka||!!hg(gg,Ty(xe))}catch{return!0}};ky.sham=!0;var _d,Kc,wy,vg,Tu=!My||V(function(){var pe;return Di(Di.call)||!Di(Object)||!Di(function(){pe=!0})||pe})?ky:Di,xa=TypeError,Zp=function(pe){if(Tu(pe))return pe;throw xa(Tn(pe)+" is not a constructor")},xd=So("species"),Ui=function(pe,xe){var qe,Oe=po(pe).constructor;return Oe===void 0||pr(qe=po(Oe)[xd])?xe:Zp(qe)},iS=TypeError,yg=function(pe,xe){if(pe<xe)throw iS("Not enough arguments");return pe},_y=/(?:ipad|iphone|ipod).*applewebkit/i.test(xr),bg=$.setImmediate,ef=$.clearImmediate,cS=$.process,Sg=$.Dispatch,lS=$.Function,xy=$.MessageChannel,uS=$.String,tf=0,Id={},rf="onreadystatechange";try{_d=$.location}catch{}var Tg=function(pe){if(vn(Id,pe)){var xe=Id[pe];delete Id[pe],xe()}},Cu=function(pe){return function(){Tg(pe)}},nf=function(pe){Tg(pe.data)},Iy=function(pe){$.postMessage(uS(pe),_d.protocol+"//"+_d.host)};bg&&ef||(bg=function(xe){yg(arguments.length,1);var qe=Ve(xe)?xe:lS(xe),Oe=Vs(arguments,1);return Id[++tf]=function(){ue(qe,void 0,Oe)},Kc(tf),tf},ef=function(xe){delete Id[xe]},tc?Kc=function(pe){cS.nextTick(Cu(pe))}:Sg&&Sg.now?Kc=function(pe){Sg.now(Cu(pe))}:xy&&!_y?(vg=(wy=new xy).port2,wy.port1.onmessage=nf,Kc=Go(vg.postMessage,vg)):$.addEventListener&&Ve($.postMessage)&&!$.importScripts&&_d&&_d.protocol!=="file:"&&!V(Iy)?(Kc=Iy,$.addEventListener("message",nf,!1)):Kc=rf in ea("script")?function(pe){md.appendChild(ea("script")).onreadystatechange=function(){md.removeChild(this),Tg(pe)}}:function(pe){setTimeout(Cu(pe),0)});var Qc,Jc,ja,Mu,Zs,Cg,Mg,Ey,Ed={set:bg,clear:ef},dS=/ipad|iphone|ipod/i.test(xr)&&$.Pebble!==void 0,Pd=/web0s(?!.*chrome)/i.test(xr),kg=$a.f,Ll=Ed.set,Fl=$.MutationObserver||$.WebKitMutationObserver,wg=$.document,of=$.process,ui=$.Promise,_g=kg($,"queueMicrotask"),xg=_g&&_g.value;xg||(Qc=function(){var pe,xe;for(tc&&(pe=of.domain)&&pe.exit();Jc;){xe=Jc.fn,Jc=Jc.next;try{xe()}catch(qe){throw Jc?Mu():ja=void 0,qe}}ja=void 0,pe&&pe.enter()},_y||tc||Pd||!Fl||!wg?!dS&&ui&&ui.resolve?((Mg=ui.resolve(void 0)).constructor=ui,Ey=Go(Mg.then,Mg),Mu=function(){Ey(Qc)}):tc?Mu=function(){of.nextTick(Qc)}:(Ll=Go(Ll,$),Mu=function(){Ll(Qc)}):(Zs=!0,Cg=wg.createTextNode(""),new Fl(Qc).observe(Cg,{characterData:!0}),Mu=function(){Cg.data=Zs=!Zs}));var Ig=xg||function(pe){var xe={fn:pe,next:void 0};ja&&(ja.next=xe),Jc||(Jc=xe,Mu()),ja=xe},Yc=function(pe){try{return{error:!1,value:pe()}}catch(xe){return{error:!0,value:xe}}},Py=function(){this.head=null,this.tail=null};Py.prototype={add:function(pe){var xe={item:pe,next:null};this.head?this.tail.next=xe:this.head=xe,this.tail=xe},get:function(){var pe=this.head;if(pe)return this.head=pe.next,this.tail===pe&&(this.tail=null),pe.item}};var ku,Ay,Ad=Py,qs=$.Promise,Eg=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",Ny=!Eg&&!tc&&typeof window=="object"&&typeof document=="object",af=qs&&qs.prototype,Pg=So("species"),Oy=!1,sf=Ve($.PromiseRejectionEvent),pS=ys("Promise",function(){var pe=Ty(qs),xe=pe!==String(qs);if(!xe&&Br===66||!af.catch||!af.finally)return!0;if(!Br||Br<51||!/native code/.test(pe)){var qe=new qs(function(Ne){Ne(1)}),Oe=function(Ne){Ne(function(){},function(){})};if((qe.constructor={})[Pg]=Oe,!(Oy=qe.then(function(){})instanceof Oe))return!0}return!xe&&(Ny||Eg)&&!sf}),$l={CONSTRUCTOR:pS,REJECTION_EVENT:sf,SUBCLASSING:Oy},fS=TypeError,Ag=function(pe){var xe,qe;this.promise=new pe(function(Oe,Ne){if(xe!==void 0||qe!==void 0)throw fS("Bad Promise constructor");xe=Oe,qe=Ne}),this.resolve=Xr(xe),this.reject=Xr(qe)},di={f:function(pe){return new Ag(pe)}},Ry=Ed.set,wu="Promise",cf=$l.CONSTRUCTOR,By=$l.REJECTION_EVENT,lf=yi.getterFor(wu),Nd=yi.set,jl=qs&&qs.prototype,Cc=qs,Xc=jl,uf=$.TypeError,Od=$.document,Rd=$.process,df=di.f,Ly=df,mS=!!(Od&&Od.createEvent&&$.dispatchEvent),Fy="unhandledrejection",$y=function(pe){var xe;return!(!mr(pe)||!Ve(xe=pe.then))&&xe},pf=function(pe,xe){var qe,Oe,Ne,Lt=xe.value,Dt=xe.state==1,Pt=Dt?pe.ok:pe.fail,ir=pe.resolve,vr=pe.reject,Ir=pe.domain;try{Pt?(Dt||(xe.rejection===2&&Dy(xe),xe.rejection=1),Pt===!0?qe=Lt:(Ir&&Ir.enter(),qe=Pt(Lt),Ir&&(Ir.exit(),Ne=!0)),qe===pe.promise?vr(uf("Promise-chain cycle")):(Oe=$y(qe))?ze(Oe,qe,ir,vr):ir(qe)):vr(Lt)}catch(Or){Ir&&!Ne&&Ir.exit(),vr(Or)}},Ng=function(pe,xe){pe.notified||(pe.notified=!0,Ig(function(){for(var qe,Oe=pe.reactions;qe=Oe.get();)pf(qe,pe);pe.notified=!1,xe&&!pe.rejection&&jy(pe)}))},Og=function(pe,xe,qe){var Oe,Ne;mS?((Oe=Od.createEvent("Event")).promise=xe,Oe.reason=qe,Oe.initEvent(pe,!1,!0),$.dispatchEvent(Oe)):Oe={promise:xe,reason:qe},!By&&(Ne=$["on"+pe])?Ne(Oe):pe===Fy&&function(Lt,Dt){var Pt=$.console;Pt&&Pt.error&&(arguments.length==1?Pt.error(Lt):Pt.error(Lt,Dt))}("Unhandled promise rejection",qe)},jy=function(pe){ze(Ry,$,function(){var xe,qe=pe.facade,Oe=pe.value;if(Bd(pe)&&(xe=Yc(function(){tc?Rd.emit("unhandledRejection",Oe,qe):Og(Fy,qe,Oe)}),pe.rejection=tc||Bd(pe)?2:1,xe.error))throw xe.value})},Bd=function(pe){return pe.rejection!==1&&!pe.parent},Dy=function(pe){ze(Ry,$,function(){var xe=pe.facade;tc?Rd.emit("rejectionHandled",xe):Og("rejectionhandled",xe,pe.value)})},Dl=function(pe,xe,qe){return function(Oe){pe(xe,Oe,qe)}},Zc=function(pe,xe,qe){pe.done||(pe.done=!0,qe&&(pe=qe),pe.value=xe,pe.state=2,Ng(pe,!0))},el=function(pe,xe,qe){if(!pe.done){pe.done=!0,qe&&(pe=qe);try{if(pe.facade===xe)throw uf("Promise can't be resolved itself");var Oe=$y(xe);Oe?Ig(function(){var Ne={done:!1};try{ze(Oe,xe,Dl(el,Ne,pe),Dl(Zc,Ne,pe))}catch(Lt){Zc(Ne,Lt,pe)}}):(pe.value=xe,pe.state=1,Ng(pe,!1))}catch(Ne){Zc({done:!1},Ne,pe)}}};cf&&(Xc=(Cc=function(xe){mg(this,Xc),Xr(xe),ze(ku,this);var qe=lf(this);try{xe(Dl(el,qe),Dl(Zc,qe))}catch(Oe){Zc(qe,Oe)}}).prototype,(ku=function(xe){Nd(this,{type:wu,done:!1,notified:!1,parent:!1,reactions:new Ad,rejection:!1,state:0,value:void 0})}).prototype=Zi(Xc,"then",function(xe,qe){var Oe=lf(this),Ne=df(Ui(this,Cc));return Oe.parent=!0,Ne.ok=!Ve(xe)||xe,Ne.fail=Ve(qe)&&qe,Ne.domain=tc?Rd.domain:void 0,Oe.state==0?Oe.reactions.add(Ne):Ig(function(){pf(Ne,Oe)}),Ne.promise}),Ay=function(){var pe=new ku,xe=lf(pe);this.promise=pe,this.resolve=Dl(el,xe),this.reject=Dl(Zc,xe)},di.f=df=function(pe){return pe===Cc||pe===void 0?new Ay(pe):Ly(pe)}),En({global:!0,constructor:!0,wrap:!0,forced:cf},{Promise:Cc}),Tc(Cc,wu,!1,!0),Yp(wu);var Rg=So("iterator"),ff=!1;try{var Uy=0,Vy={next:function(){return{done:!!Uy++}},return:function(){ff=!0}};Vy[Rg]=function(){return this},Array.from(Vy,function(){throw 2})}catch{}var Ns=function(pe,xe){if(!xe&&!ff)return!1;var qe=!1;try{var Oe={};Oe[Rg]=function(){return{next:function(){return{done:qe=!0}}}},pe(Oe)}catch{}return qe},Bg=$l.CONSTRUCTOR||!Ns(function(pe){qs.all(pe).then(void 0,function(){})});En({target:"Promise",stat:!0,forced:Bg},{all:function(xe){var qe=this,Oe=di.f(qe),Ne=Oe.resolve,Lt=Oe.reject,Dt=Yc(function(){var Pt=Xr(qe.resolve),ir=[],vr=0,Ir=1;ia(xe,function(Or){var jr=vr++,Ur=!1;Ir++,ze(Pt,qe,Or).then(function(Yr){Ur||(Ur=!0,ir[jr]=Yr,--Ir||Ne(ir))},Lt)}),--Ir||Ne(ir)});return Dt.error&&Lt(Dt.value),Oe.promise}});var gS=$l.CONSTRUCTOR;qs&&qs.prototype,En({target:"Promise",proto:!0,forced:gS,real:!0},{catch:function(pe){return this.then(void 0,pe)}}),En({target:"Promise",stat:!0,forced:Bg},{race:function(xe){var qe=this,Oe=di.f(qe),Ne=Oe.reject,Lt=Yc(function(){var Dt=Xr(qe.resolve);ia(xe,function(Pt){ze(Dt,qe,Pt).then(Oe.resolve,Ne)})});return Lt.error&&Ne(Lt.value),Oe.promise}}),En({target:"Promise",stat:!0,forced:$l.CONSTRUCTOR},{reject:function(xe){var qe=di.f(this);return ze(qe.reject,void 0,xe),qe.promise}});var mf=function(pe,xe){if(po(pe),mr(xe)&&xe.constructor===pe)return xe;var qe=di.f(pe);return(0,qe.resolve)(xe),qe.promise},hS=$l.CONSTRUCTOR,qy=Er("Promise"),Hy=!hS;En({target:"Promise",stat:!0,forced:!0},{resolve:function(xe){return mf(Hy&&this===qy?qs:this,xe)}}),En({target:"Promise",stat:!0},{allSettled:function(xe){var qe=this,Oe=di.f(qe),Ne=Oe.resolve,Lt=Oe.reject,Dt=Yc(function(){var Pt=Xr(qe.resolve),ir=[],vr=0,Ir=1;ia(xe,function(Or){var jr=vr++,Ur=!1;Ir++,ze(Pt,qe,Or).then(function(Yr){Ur||(Ur=!0,ir[jr]={status:"fulfilled",value:Yr},--Ir||Ne(ir))},function(Yr){Ur||(Ur=!0,ir[jr]={status:"rejected",reason:Yr},--Ir||Ne(ir))})}),--Ir||Ne(ir)});return Dt.error&&Lt(Dt.value),Oe.promise}});var zy="No one promise resolved";En({target:"Promise",stat:!0},{any:function(xe){var qe=this,Oe=Er("AggregateError"),Ne=di.f(qe),Lt=Ne.resolve,Dt=Ne.reject,Pt=Yc(function(){var ir=Xr(qe.resolve),vr=[],Ir=0,Or=1,jr=!1;ia(xe,function(Ur){var Yr=Ir++,In=!1;Or++,ze(ir,qe,Ur).then(function(Mn){In||jr||(jr=!0,Lt(Mn))},function(Mn){In||jr||(In=!0,vr[Yr]=Mn,--Or||Dt(new Oe(vr,zy)))})}),--Or||Dt(new Oe(vr,zy))});return Pt.error&&Dt(Pt.value),Ne.promise}});var _u=qs&&qs.prototype,vS=!!qs&&V(function(){_u.finally.call({then:function(){}},function(){})});En({target:"Promise",proto:!0,real:!0,forced:vS},{finally:function(pe){var xe=Ui(this,Er("Promise")),qe=Ve(pe);return this.then(qe?function(Oe){return mf(xe,pe()).then(function(){return Oe})}:pe,qe?function(Oe){return mf(xe,pe()).then(function(){throw Oe})}:pe)}});var yS=Ie("".charAt),rc=Ie("".charCodeAt),Wy=Ie("".slice),Ld=function(pe){return function(xe,qe){var Oe,Ne,Lt=li(Cr(xe)),Dt=hc(qe),Pt=Lt.length;return Dt<0||Dt>=Pt?pe?"":void 0:(Oe=rc(Lt,Dt))<55296||Oe>56319||Dt+1===Pt||(Ne=rc(Lt,Dt+1))<56320||Ne>57343?pe?yS(Lt,Dt):Oe:pe?Wy(Lt,Dt,Dt+2):Ne-56320+(Oe-55296<<10)+65536}},Gy={codeAt:Ld(!1),charAt:Ld(!0)}.charAt,Ky="String Iterator",Lg=yi.set,bS=yi.getterFor(Ky);yo(String,"String",function(pe){Lg(this,{type:Ky,string:li(pe),index:0})},function(){var xe,qe=bS(this),Oe=qe.string,Ne=qe.index;return Ne>=Oe.length?{value:void 0,done:!0}:(xe=Gy(Oe,Ne),qe.index+=xe.length,{value:xe,done:!1})});var SS=_r.Promise,xu=So("toStringTag");for(var Fd in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Fg=$[Fd],$d=Fg&&Fg.prototype;$d&&Nl($d)!==xu&&Ta($d,xu,Fd),Yi[Fd]=Yi.Array}var $g=SS;En({target:"Promise",stat:!0,forced:!0},{try:function(pe){var xe=di.f(this),qe=Yc(pe);return(qe.error?xe.reject:xe.resolve)(qe.value),xe.promise}});var ca=$g,Qy=Date,TS=Ie(Qy.prototype.getTime);En({target:"Date",stat:!0},{now:function(){return TS(new Qy)}});var _s=_r.Date.now,nc=Array.isArray||function(xe){return nr(xe)=="Array"},Jy=TypeError,gf=function(pe){if(pe>9007199254740991)throw Jy("Maximum allowed index exceeded");return pe},tl=function(pe,xe,qe){var Oe=pa(xe);Oe in pe?Ba.f(pe,Oe,or(0,qe)):pe[Oe]=qe},CS=So("species"),jg=Array,Dg=function(pe,xe){return new(function(qe){var Oe;return nc(qe)&&(Oe=qe.constructor,(Tu(Oe)&&(Oe===jg||nc(Oe.prototype))||mr(Oe)&&(Oe=Oe[CS])===null)&&(Oe=void 0)),Oe===void 0?jg:Oe}(pe))(xe===0?0:xe)},Iu=So("species"),oc=function(pe){return Br>=51||!V(function(){var xe=[];return(xe.constructor={})[Iu]=function(){return{foo:1}},xe[pe](Boolean).foo!==1})},hf=So("isConcatSpreadable"),Yy=Br>=51||!V(function(){var pe=[];return pe[hf]=!1,pe.concat()[0]!==pe}),Xy=oc("concat"),MS=function(pe){if(!mr(pe))return!1;var xe=pe[hf];return xe!==void 0?!!xe:nc(pe)};En({target:"Array",proto:!0,arity:1,forced:!Yy||!Xy},{concat:function(xe){var qe,Oe,Ne,Lt,Dt,Pt=Pn(this),ir=Dg(Pt,0),vr=0;for(qe=-1,Ne=arguments.length;qe<Ne;qe++)if(MS(Dt=qe===-1?Pt:arguments[qe]))for(Lt=rs(Dt),gf(vr+Lt),Oe=0;Oe<Lt;Oe++,vr++)Oe in Dt&&tl(ir,vr,Dt[Oe]);else gf(vr+1),tl(ir,vr++,Dt);return ir.length=vr,ir}});var Zy=ua("Array").concat,vf=Array.prototype,Hs=function(pe){var xe=pe.concat;return pe===vf||sr(vf,pe)&&xe===vf.concat?Zy:xe},kS=/MSIE .\./.test(xr),Ug=$.Function,eb=function(pe){return kS?function(xe,qe){var Oe=yg(arguments.length,1)>2,Ne=Ve(xe)?xe:Ug(xe),Lt=Oe?Vs(arguments,2):void 0;return pe(Oe?function(){ue(Ne,this,Lt)}:Ne,qe)}:pe},tb={setTimeout:eb($.setTimeout),setInterval:eb($.setInterval)},rb=tb.setInterval;En({global:!0,bind:!0,forced:$.setInterval!==rb},{setInterval:rb});var Vg=tb.setTimeout;En({global:!0,bind:!0,forced:$.setTimeout!==Vg},{setTimeout:Vg});var Vi=_r.setTimeout,qg=g(function(pe){var xe=Object.prototype.hasOwnProperty,qe="~";function Oe(){}function Ne(ir,vr,Ir){this.fn=ir,this.context=vr,this.once=Ir||!1}function Lt(ir,vr,Ir,Or,jr){if(typeof Ir!="function")throw new TypeError("The listener must be a function");var Ur=new Ne(Ir,Or||ir,jr),Yr=qe?qe+vr:vr;return ir._events[Yr]?ir._events[Yr].fn?ir._events[Yr]=[ir._events[Yr],Ur]:ir._events[Yr].push(Ur):(ir._events[Yr]=Ur,ir._eventsCount++),ir}function Dt(ir,vr){--ir._eventsCount==0?ir._events=new Oe:delete ir._events[vr]}function Pt(){this._events=new Oe,this._eventsCount=0}Object.create&&(Oe.prototype=Object.create(null),new Oe().__proto__||(qe=!1)),Pt.prototype.eventNames=function(){var vr,Ir,Or=[];if(this._eventsCount===0)return Or;for(Ir in vr=this._events)xe.call(vr,Ir)&&Or.push(qe?Ir.slice(1):Ir);return Object.getOwnPropertySymbols?Or.concat(Object.getOwnPropertySymbols(vr)):Or},Pt.prototype.listeners=function(vr){var Ir=qe?qe+vr:vr,Or=this._events[Ir];if(!Or)return[];if(Or.fn)return[Or.fn];for(var jr=0,Ur=Or.length,Yr=new Array(Ur);jr<Ur;jr++)Yr[jr]=Or[jr].fn;return Yr},Pt.prototype.listenerCount=function(vr){var Ir=qe?qe+vr:vr,Or=this._events[Ir];return Or?Or.fn?1:Or.length:0},Pt.prototype.emit=function(vr,Ir,Or,jr,Ur,Yr){var In=qe?qe+vr:vr;if(!this._events[In])return!1;var Mn,Dn,Wn=this._events[In],Jn=arguments.length;if(Wn.fn){switch(Wn.once&&this.removeListener(vr,Wn.fn,void 0,!0),Jn){case 1:return Wn.fn.call(Wn.context),!0;case 2:return Wn.fn.call(Wn.context,Ir),!0;case 3:return Wn.fn.call(Wn.context,Ir,Or),!0;case 4:return Wn.fn.call(Wn.context,Ir,Or,jr),!0;case 5:return Wn.fn.call(Wn.context,Ir,Or,jr,Ur),!0;case 6:return Wn.fn.call(Wn.context,Ir,Or,jr,Ur,Yr),!0}for(Dn=1,Mn=new Array(Jn-1);Dn<Jn;Dn++)Mn[Dn-1]=arguments[Dn];Wn.fn.apply(Wn.context,Mn)}else{var Fn,go=Wn.length;for(Dn=0;Dn<go;Dn++)switch(Wn[Dn].once&&this.removeListener(vr,Wn[Dn].fn,void 0,!0),Jn){case 1:Wn[Dn].fn.call(Wn[Dn].context);break;case 2:Wn[Dn].fn.call(Wn[Dn].context,Ir);break;case 3:Wn[Dn].fn.call(Wn[Dn].context,Ir,Or);break;case 4:Wn[Dn].fn.call(Wn[Dn].context,Ir,Or,jr);break;default:if(!Mn)for(Fn=1,Mn=new Array(Jn-1);Fn<Jn;Fn++)Mn[Fn-1]=arguments[Fn];Wn[Dn].fn.apply(Wn[Dn].context,Mn)}}return!0},Pt.prototype.on=function(vr,Ir,Or){return Lt(this,vr,Ir,Or,!1)},Pt.prototype.once=function(vr,Ir,Or){return Lt(this,vr,Ir,Or,!0)},Pt.prototype.removeListener=function(vr,Ir,Or,jr){var Ur=qe?qe+vr:vr;if(!this._events[Ur])return this;if(!Ir)return Dt(this,Ur),this;var Yr=this._events[Ur];if(Yr.fn)Yr.fn!==Ir||jr&&!Yr.once||Or&&Yr.context!==Or||Dt(this,Ur);else{for(var In=0,Mn=[],Dn=Yr.length;In<Dn;In++)(Yr[In].fn!==Ir||jr&&!Yr[In].once||Or&&Yr[In].context!==Or)&&Mn.push(Yr[In]);Mn.length?this._events[Ur]=Mn.length===1?Mn[0]:Mn:Dt(this,Ur)}return this},Pt.prototype.removeAllListeners=function(vr){var Ir;return vr?(Ir=qe?qe+vr:vr,this._events[Ir]&&Dt(this,Ir)):(this._events=new Oe,this._eventsCount=0),this},Pt.prototype.off=Pt.prototype.removeListener,Pt.prototype.addListener=Pt.prototype.on,Pt.prefixed=qe,Pt.EventEmitter=Pt,pe.exports=Pt});En({global:!0},{globalThis:$});var nb=Ba.f;En({target:"Object",stat:!0,forced:Object.defineProperty!==nb,sham:!kt},{defineProperty:nb});var ob=g(function(pe){var xe=_r.Object,qe=pe.exports=function(Ne,Lt,Dt){return xe.defineProperty(Ne,Lt,Dt)};xe.defineProperty.sham&&(qe.sham=!0)}),jd=ob,Hg=Ie([].push),rl=function(pe){var xe=pe==1,qe=pe==2,Oe=pe==3,Ne=pe==4,Lt=pe==6,Dt=pe==7,Pt=pe==5||Lt;return function(ir,vr,Ir,Or){for(var jr,Ur,Yr=Pn(ir),In=gr(Yr),Mn=Go(vr,Ir),Dn=rs(In),Wn=0,Jn=Or||Dg,Fn=xe?Jn(ir,Dn):qe||Dt?Jn(ir,0):void 0;Dn>Wn;Wn++)if((Pt||Wn in In)&&(Ur=Mn(jr=In[Wn],Wn,Yr),pe))if(xe)Fn[Wn]=Ur;else if(Ur)switch(pe){case 3:return!0;case 5:return jr;case 6:return Wn;case 2:Hg(Fn,jr)}else switch(pe){case 4:return!1;case 7:Hg(Fn,jr)}return Lt?-1:Oe||Ne?Ne:Fn}},Mc={forEach:rl(0),map:rl(1),filter:rl(2),some:rl(3),every:rl(4),find:rl(5),findIndex:rl(6),filterReject:rl(7)},Ul=function(pe,xe){var qe=[][pe];return!!qe&&V(function(){qe.call(null,xe||function(){return 1},1)})},wS=Mc.forEach,ab=Ul("forEach")?[].forEach:function(xe){return wS(this,xe,arguments.length>1?arguments[1]:void 0)};En({target:"Array",proto:!0,forced:[].forEach!=ab},{forEach:ab});var Ca=ua("Array").forEach,yf=Array.prototype,_S={DOMTokenList:!0,NodeList:!0},bo=function(pe){var xe=pe.forEach;return pe===yf||sr(yf,pe)&&xe===yf.forEach||vn(_S,Nl(pe))?Ca:xe},xS=V(function(){Us(1)});En({target:"Object",stat:!0,forced:xS},{keys:function(xe){return Us(Pn(xe))}});var ba=_r.Object.keys,sb=Mc.filter,IS=oc("filter");En({target:"Array",proto:!0,forced:!IS},{filter:function(xe){return sb(this,xe,arguments.length>1?arguments[1]:void 0)}});var ES=ua("Array").filter,zg=Array.prototype,pi=function(pe){var xe=pe.filter;return pe===zg||sr(zg,pe)&&xe===zg.filter?ES:xe},Wg=oc("slice"),Os=So("species"),Gg=Array,PS=Math.max;En({target:"Array",proto:!0,forced:!Wg},{slice:function(xe,qe){var Oe,Ne,Lt,Dt=wr(this),Pt=rs(Dt),ir=Li(xe,Pt),vr=Li(qe===void 0?Pt:qe,Pt);if(nc(Dt)&&(Oe=Dt.constructor,(Tu(Oe)&&(Oe===Gg||nc(Oe.prototype))||mr(Oe)&&(Oe=Oe[Os])===null)&&(Oe=void 0),Oe===Gg||Oe===void 0))return Vs(Dt,ir,vr);for(Ne=new(Oe===void 0?Gg:Oe)(PS(vr-ir,0)),Lt=0;ir<vr;ir++,Lt++)ir in Dt&&tl(Ne,Lt,Dt[ir]);return Ne.length=Lt,Ne}});var ib=ua("Array").slice,bf=Array.prototype,Da=function(pe){var xe=pe.slice;return pe===bf||sr(bf,pe)&&xe===bf.slice?ib:xe},cb=g(function(pe,xe){pe.exports=function(){function qe(ir,vr){if(!(ir instanceof vr))throw new TypeError("Cannot call a class as a function")}function Oe(ir,vr){for(var Ir=0;Ir<vr.length;Ir++){var Or=vr[Ir];Or.enumerable=Or.enumerable||!1,Or.configurable=!0,"value"in Or&&(Or.writable=!0),jd(ir,Or.key,Or)}}function Ne(ir,vr,Ir){return vr&&Oe(ir.prototype,vr),Ir&&Oe(ir,Ir),jd(ir,"prototype",{writable:!1}),ir}var Lt={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},Dt=function(){},Pt=function(){function ir(vr){qe(this,ir),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=Lt,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=_s(),this.timer=null,this.setConfig(vr),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}return Ne(ir,[{key:"setConfig",value:function(Ir){var Or=zn({},this.reportConfig.common,Ir.common);this.reportConfig=zn({},this.reportConfig,Ir),this.reportConfig.common=Or,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(Ir,Or){var jr=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(Ir,zn({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Or)).catch(function(Ur){var Yr,In;(In=(Yr=jr.reportConfig)===null||Yr===void 0?void 0:Yr.logger)===null||In===void 0||In.warn("Reporter immediately upload failed",Ur)})}},{key:"report",value:function(Ir,Or){var jr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(jr.priority||(jr.priority=this.getEventPriority(Ir,Or)),this.reportConfig.isDataReportEnable&&Ir){var Ur=_s();jr.priority==="HIGH"?this.highPriorityMsgList.push({module:Ir,msg:Or,createTime:Ur}):jr.priority==="NORMAL"?this.msgList.push({module:Ir,msg:Or,createTime:Ur}):jr.priority==="LOW"&&this.lowPriorityMsgList.push({module:Ir,msg:Or,createTime:Ur}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(Ir,Or){if(this.reportConfig.isDataReportEnable&&Ir&&!this.traceMsgCache[Ir]){var jr=zn(zn({start_time:_s()},Or),{extension:[]});this.traceMsgCache[Ir]=jr}}},{key:"reportTraceUpdate",value:function(Ir){}},{key:"reportTraceUpdateV2",value:function(Ir,Or,jr){var Ur,Yr=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Ir]){var In=this.traceMsgCache[Ir].extension,Mn=In.length,Dn=new Date().getTime();Mn===0?Or.duration=Dn-this.traceMsgCache[Ir].start_time:In[Mn-1].end_time?Or.duration=Dn-In[Mn-1].end_time:Or.duration=Dn-this.traceMsgCache[Ir].start_time,In.push(zn({end_time:Dn},Or));var Wn=In.length-1;jr!=null&&jr.asyncParams&&((Ur=this.traceMsgCache[Ir]).asyncPromiseArray||(Ur.asyncPromiseArray=[]),this.traceMsgCache[Ir].asyncPromiseArray.push(jr.asyncParams.then(function(Jn){Yr.traceMsgCache[Ir]&&Yr.traceMsgCache[Ir].extension[Wn]&&zn(Yr.traceMsgCache[Ir].extension[Wn],Jn)})))}}},{key:"reportTraceEnd",value:function(Ir){var Or,jr=this,Ur=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Ir])if(Ir!=="nos"||Ur===!1)if(typeof Ur=="boolean"?this.traceMsgCache[Ir].succeed=!!Ur:this.traceMsgCache[Ir].state=Ur,this.traceMsgCache[Ir].duration=_s()-this.traceMsgCache[Ir].start_time,bo(Or=this.traceMsgCache[Ir].extension).call(Or,function(Mn){delete Mn.end_time}),this.traceMsgCache[Ir].asyncPromiseArray){var Yr=this.traceMsgCache[Ir],In=function(){Yr===jr.traceMsgCache[Ir]&&(delete jr.traceMsgCache[Ir].asyncPromiseArray,jr.report(Ir,jr.traceMsgCache[Ir],{priority:jr.getEventPriority(Ir,jr.traceMsgCache[Ir])}),jr.traceMsgCache[Ir]=null)};ca.all(this.traceMsgCache[Ir].asyncPromiseArray).then(In).catch(In)}else this.report(Ir,this.traceMsgCache[Ir],{priority:this.getEventPriority(Ir,this.traceMsgCache[Ir])}),this.traceMsgCache[Ir]=null;else this.traceMsgCache[Ir]=null}},{key:"getEventPriority",value:function(Ir,Or){if(Ir==="exceptions"){if(Or.action===0||Or.action===2||Or.action===1&&Or.exception_service!==0)return"HIGH"}else if(Ir==="msgReceive"||Ir==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(Ir){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[Ir]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var Ir,Or=this;this.reportConfig.isDataReportEnable&&(bo(Ir=ba(this.traceMsgCache)).call(Ir,function(jr){Or.reportTraceEnd(jr,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=Dt,this.report=Dt,this.reportTraceStart=Dt,this.reportTraceUpdate=Dt,this.reportTraceEnd=Dt,this.pause=Dt,this.restore=Dt,this.destroy=Dt,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var Ir,Or,jr=this;if(!this.loading){this.loading=!0;var Ur=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:Ur.dev_id,sdkVer:Ur.sdk_ver,platform:Ur.platform,appkey:Ur.app_key},timeout:this.reportConfig.timeout}).then(function(Yr){var In,Mn;if(!jr.isDestroyed){if(Yr.status===200&&Yr.data&&Yr.data.code===200){var Dn=Yr.data.data||{};jr.reportConfig.maxSize=Dn.maxSize>1e3?1e3:Dn.maxSize,jr.reportConfig.maxInterval=Dn.maxInterval>1e4?1e4:Dn.maxInterval,jr.reportConfig.maxInterval=Dn.maxInterval<10?10:Dn.maxInterval,jr.reportConfig.minInterval=Dn.minInterval<2?2:Dn.minInterval,jr.reportConfig.maxDelay=Dn.maxDelay||300,jr.reportConfig.maxInterval=1e3*jr.reportConfig.maxInterval,jr.reportConfig.minInterval=1e3*jr.reportConfig.minInterval,jr.reportConfig.maxDelay=1e3*jr.reportConfig.maxDelay,jr.isUploadEnable=!0,jr.initConfigLoaded=!0,jr.loading=!1,jr.reportHeartBeat()}(Mn=(In=jr.reportConfig)===null||In===void 0?void 0:In.logger)===null||Mn===void 0||Mn.log("Get reporter upload config success")}}).catch(function(Yr){var In,Mn;jr.loading=!1,(Mn=(In=jr.reportConfig)===null||In===void 0?void 0:In.logger)===null||Mn===void 0||Mn.error("Get reporter upload config failed",Yr)})}catch(Yr){this.loading=!1,(Or=(Ir=this.reportConfig)===null||Ir===void 0?void 0:Ir.logger)===null||Or===void 0||Or.error("Exec reporter request failed",Yr)}}}},{key:"reportHeartBeat",value:function(){var Ir=this;this.isDestroyed||(this.timer=Vi(function(){Ir.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var Ir=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;_s()-this.lastReportTime>=Ir&&this.upload()}}},{key:"getUploadMsg",value:function(){var Ir,Or,jr,Ur,Yr,In,Mn=this,Dn={},Wn=_s();this.highPriorityMsgList=pi(Ir=this.highPriorityMsgList).call(Ir,function(On){return Wn-On.createTime<Mn.reportConfig.maxDelay}),this.msgList=pi(Or=this.msgList).call(Or,function(On){return Wn-On.createTime<Mn.reportConfig.maxDelay}),this.lowPriorityMsgList=pi(jr=this.lowPriorityMsgList).call(jr,function(On){return Wn-On.createTime<Mn.reportConfig.maxDelay}),this.cacheMsgList=pi(Ur=this.cacheMsgList).call(Ur,function(On){return Wn-On.createTime<Mn.reportConfig.maxDelay});var Jn=Da(Yr=this.highPriorityMsgList).call(Yr,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=Da(In=this.highPriorityMsgList).call(In,Jn.length),Jn.length<this.reportConfig.maxSize){var Fn,go,Bo=this.reportConfig.maxSize-Jn.length;Jn=Hs(Jn).call(Jn,Da(Fn=this.msgList).call(Fn,0,Bo)),this.msgList=Da(go=this.msgList).call(go,Bo)}if(Jn.length<this.reportConfig.maxSize){var Do,Bn,zr=this.reportConfig.maxSize-Jn.length;Jn=Hs(Jn).call(Jn,Da(Do=this.lowPriorityMsgList).call(Do,0,zr)),this.lowPriorityMsgList=Da(Bn=this.lowPriorityMsgList).call(Bn,zr)}if(Jn.length<this.reportConfig.maxSize){var eo,to,Hn=this.reportConfig.maxSize-Jn.length;Jn=Hs(Jn).call(Jn,Da(eo=this.cacheMsgList).call(eo,0,Hn)),this.cacheMsgList=Da(to=this.cacheMsgList).call(to,Hn)}return bo(Jn).call(Jn,function(On){Dn[On.module]?Dn[On.module].push(On.msg):Dn[On.module]=[On.msg]}),{uploadMsgArr:Jn,uploadMsg:Dn}}},{key:"upload",value:function(){var Ir,Or,jr=this;if(this.isUploadEnable&&!(this.lastReportTime&&_s()-this.lastReportTime<this.reportConfig.minInterval)){var Ur=this.getUploadMsg(),Yr=Ur.uploadMsgArr,In=Ur.uploadMsg;if(Yr.length){this.lastReportTime=_s();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:In},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(Mn){var Dn,Wn,Jn,Fn;jr.cacheMsgList=Da(Dn=Hs(Wn=jr.cacheMsgList).call(Wn,Yr)).call(Dn,0,jr.reportConfig.cacheMaxSize),(Fn=(Jn=jr.reportConfig)===null||Jn===void 0?void 0:Jn.logger)===null||Fn===void 0||Fn.warn("Reporter upload failed",Mn)})}catch(Mn){(Or=(Ir=this.reportConfig)===null||Ir===void 0?void 0:Ir.logger)===null||Or===void 0||Or.warn("Exec reporter request failed",Mn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),ir}();return Pt}()}),bi=Array,Sf=Math.max,Tf=function(pe,xe,qe){for(var Oe=rs(pe),Ne=Li(xe,Oe),Lt=Li(qe===void 0?Oe:qe,Oe),Dt=bi(Sf(Lt-Ne,0)),Pt=0;Ne<Lt;Ne++,Pt++)tl(Dt,Pt,pe[Ne]);return Dt.length=Pt,Dt},lb=vu.f,Eu=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Kg={f:function(xe){return Eu&&nr(xe)=="Window"?function(qe){try{return lb(qe)}catch{return Tf(Eu)}}(xe):lb(wr(xe))}},ac={f:So},Cf=Ba.f,os=function(pe){var xe=_r.Symbol||(_r.Symbol={});vn(xe,pe)||Cf(xe,pe,{value:ac.f(pe)})},ub=function(){var pe=Er("Symbol"),xe=pe&&pe.prototype,qe=xe&&xe.valueOf,Oe=So("toPrimitive");xe&&!xe[Oe]&&Zi(xe,Oe,function(Ne){return ze(qe,this)},{arity:1})},Mf=Mc.forEach,ei=El("hidden"),kf="Symbol",db=yi.set,Qg=yi.getterFor(kf),Si=Object.prototype,nl=$.Symbol,Dd=nl&&nl.prototype,AS=$.TypeError,Jg=$.QObject,ha=$a.f,ol=Ba.f,pb=Kg.f,Yg=er.f,Xg=Ie([].push),sc=Un("symbols"),Vl=Un("op-symbols"),Zg=Un("wks"),eh=!Jg||!Jg.prototype||!Jg.prototype.findChild,Xa=kt&&V(function(){return ns(ol({},"a",{get:function(){return ol(this,"a",{value:7}).a}})).a!=7})?function(pe,xe,qe){var Oe=ha(Si,xe);Oe&&delete Si[xe],ol(pe,xe,qe),Oe&&pe!==Si&&ol(Si,xe,Oe)}:ol,wf=function(pe,xe){var qe=sc[pe]=ns(Dd);return db(qe,{type:kf,tag:pe,description:xe}),kt||(qe.description=xe),qe},ql=function(xe,qe,Oe){xe===Si&&ql(Vl,qe,Oe),po(xe);var Ne=pa(qe);return po(Oe),vn(sc,Ne)?(Oe.enumerable?(vn(xe,ei)&&xe[ei][Ne]&&(xe[ei][Ne]=!1),Oe=ns(Oe,{enumerable:or(0,!1)})):(vn(xe,ei)||ol(xe,ei,or(1,{})),xe[ei][Ne]=!0),Xa(xe,Ne,Oe)):ol(xe,Ne,Oe)},Rs=function(xe,qe){po(xe);var Oe=wr(qe),Ne=Us(Oe).concat(Ti(Oe));return Mf(Ne,function(Lt){kt&&!ze(Ud,Oe,Lt)||ql(xe,Lt,Oe[Lt])}),xe},Ud=function(xe){var qe=pa(xe),Oe=ze(Yg,this,qe);return!(this===Si&&vn(sc,qe)&&!vn(Vl,qe))&&(!(Oe||!vn(this,qe)||!vn(sc,qe)||vn(this,ei)&&this[ei][qe])||Oe)},fb=function(xe,qe){var Oe=wr(xe),Ne=pa(qe);if(Oe!==Si||!vn(sc,Ne)||vn(Vl,Ne)){var Lt=ha(Oe,Ne);return!Lt||!vn(sc,Ne)||vn(Oe,ei)&&Oe[ei][Ne]||(Lt.enumerable=!0),Lt}},th=function(xe){var qe=pb(wr(xe)),Oe=[];return Mf(qe,function(Ne){vn(sc,Ne)||vn(Fi,Ne)||Xg(Oe,Ne)}),Oe},Ti=function(pe){var xe=pe===Si,qe=pb(xe?Vl:wr(pe)),Oe=[];return Mf(qe,function(Ne){!vn(sc,Ne)||xe&&!vn(Si,Ne)||Xg(Oe,sc[Ne])}),Oe};Lr||(nl=function(){if(sr(Dd,this))throw AS("Symbol is not a constructor");var xe=arguments.length&&arguments[0]!==void 0?li(arguments[0]):void 0,qe=Vo(xe),Oe=function(Ne){this===Si&&ze(Oe,Vl,Ne),vn(this,ei)&&vn(this[ei],qe)&&(this[ei][qe]=!1),Xa(this,qe,or(1,Ne))};return kt&&eh&&Xa(Si,qe,{configurable:!0,set:Oe}),wf(qe,xe)},Dd=nl.prototype,Zi(Dd,"toString",function(){return Qg(this).tag}),Zi(nl,"withoutSetter",function(pe){return wf(Vo(pe),pe)}),er.f=Ud,Ba.f=ql,qm.f=Rs,$a.f=fb,vu.f=Kg.f=th,yc.f=Ti,ac.f=function(pe){return wf(So(pe),pe)},kt&&ol(Dd,"description",{configurable:!0,get:function(){return Qg(this).description}})),En({global:!0,constructor:!0,wrap:!0,forced:!Lr,sham:!Lr},{Symbol:nl}),Mf(Us(Zg),function(pe){os(pe)}),En({target:kf,stat:!0,forced:!Lr},{useSetter:function(){eh=!0},useSimple:function(){eh=!1}}),En({target:"Object",stat:!0,forced:!Lr,sham:!kt},{create:function(xe,qe){return qe===void 0?ns(xe):Rs(ns(xe),qe)},defineProperty:ql,defineProperties:Rs,getOwnPropertyDescriptor:fb}),En({target:"Object",stat:!0,forced:!Lr},{getOwnPropertyNames:th}),ub(),Tc(nl,kf),Fi[ei]=!0;var al=Lr&&!!Symbol.for&&!!Symbol.keyFor,Hl=Un("string-to-symbol-registry"),NS=Un("symbol-to-string-registry");En({target:"Symbol",stat:!0,forced:!al},{for:function(pe){var xe=li(pe);if(vn(Hl,xe))return Hl[xe];var qe=Er("Symbol")(xe);return Hl[xe]=qe,NS[qe]=xe,qe}});var _f=Un("symbol-to-string-registry");En({target:"Symbol",stat:!0,forced:!al},{keyFor:function(xe){if(!Vr(xe))throw TypeError(Tn(xe)+" is not a symbol");if(vn(_f,xe))return _f[xe]}});var kc=Er("JSON","stringify"),qi=Ie(/./.exec),rh=Ie("".charAt),OS=Ie("".charCodeAt),mb=Ie("".replace),wc=Ie(1 .toString),Vd=/[\uD800-\uDFFF]/g,gb=/^[\uD800-\uDBFF]$/,xf=/^[\uDC00-\uDFFF]$/,If=!Lr||V(function(){var pe=Er("Symbol")();return kc([pe])!="[null]"||kc({a:pe})!="{}"||kc(Object(pe))!="{}"}),Ef=V(function(){return kc("\uDF06\uD834")!=='"\\udf06\\ud834"'||kc("\uDEAD")!=='"\\udead"'}),Pf=function(pe,xe){var qe=Vs(arguments),Oe=xe;if((mr(xe)||pe!==void 0)&&!Vr(pe))return nc(xe)||(xe=function(Ne,Lt){if(Ve(Oe)&&(Lt=ze(Oe,this,Ne,Lt)),!Vr(Lt))return Lt}),qe[1]=xe,ue(kc,null,qe)},nh=function(pe,xe,qe){var Oe=rh(qe,xe-1),Ne=rh(qe,xe+1);return qi(gb,pe)&&!qi(xf,Ne)||qi(xf,pe)&&!qi(gb,Oe)?"\\u"+wc(OS(pe,0),16):pe};kc&&En({target:"JSON",stat:!0,arity:3,forced:If||Ef},{stringify:function(xe,qe,Oe){var Ne=Vs(arguments),Lt=ue(If?Pf:kc,null,Ne);return Ef&&typeof Lt=="string"?mb(Lt,Vd,nh):Lt}});var hb=!Lr||V(function(){yc.f(1)});En({target:"Object",stat:!0,forced:hb},{getOwnPropertySymbols:function(xe){var qe=yc.f;return qe?qe(Pn(xe)):[]}}),os("asyncIterator"),os("hasInstance"),os("isConcatSpreadable"),os("iterator"),os("match"),os("matchAll"),os("replace"),os("search"),os("species"),os("split"),os("toPrimitive"),ub(),os("toStringTag"),Tc(Er("Symbol"),"Symbol"),os("unscopables"),Tc($.JSON,"JSON",!0);var vb=_r.Symbol;os("asyncDispose"),os("dispose"),os("matcher"),os("metadataKey"),os("observable"),os("metadata"),os("patternMatch"),os("replaceAll");var zs=vb,oh=ac.f("iterator"),yb=g(function(pe){function xe(qe){return pe.exports=xe=typeof zs=="function"&&typeof oh=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof zs=="function"&&Oe.constructor===zs&&Oe!==zs.prototype?"symbol":typeof Oe},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),ah=V(function(){Al(1)});En({target:"Object",stat:!0,forced:ah,sham:!hu},{getPrototypeOf:function(xe){return Al(Pn(xe))}});var zl=_r.Object.getPrototypeOf,bb=Ie([].reverse),Sb=[1,2];En({target:"Array",proto:!0,forced:String(Sb)===String(Sb.reverse())},{reverse:function(){return nc(this)&&(this.length=this.length),bb(this)}});var RS=ua("Array").reverse,xs=Array.prototype,qd=function(pe){var xe=pe.reverse;return pe===xs||sr(xs,pe)&&xe===xs.reverse?RS:xe},BS=g(function(pe){var xe=yb.default;function qe(){pe.exports=qe=function(){return Oe},pe.exports.__esModule=!0,pe.exports.default=pe.exports;var Oe={},Ne=Object.prototype,Lt=Ne.hasOwnProperty,Dt=typeof zs=="function"?zs:{},Pt=Dt.iterator||"@@iterator",ir=Dt.asyncIterator||"@@asyncIterator",vr=Dt.toStringTag||"@@toStringTag";function Ir(Hn,On,oo){return jd(Hn,On,{value:oo,enumerable:!0,configurable:!0,writable:!0}),Hn[On]}try{Ir({},"")}catch{Ir=function(oo,lo,Co){return oo[lo]=Co}}function Or(Hn,On,oo,lo){var Co=On&&On.prototype instanceof Yr?On:Yr,ko=ii(Co.prototype),la=new zr(lo||[]);return ko._invoke=function(Wo,ss,$o){var qo="suspendedStart";return function(ka,Ji){if(qo==="executing")throw new Error("Generator is already running");if(qo==="completed"){if(ka==="throw")throw Ji;return to()}for($o.method=ka,$o.arg=Ji;;){var Yo=$o.delegate;if(Yo){var Ni=Bo(Yo,$o);if(Ni){if(Ni===Ur)continue;return Ni}}if($o.method==="next")$o.sent=$o._sent=$o.arg;else if($o.method==="throw"){if(qo==="suspendedStart")throw qo="completed",$o.arg;$o.dispatchException($o.arg)}else $o.method==="return"&&$o.abrupt("return",$o.arg);qo="executing";var ps=jr(Wo,ss,$o);if(ps.type==="normal"){if(qo=$o.done?"completed":"suspendedYield",ps.arg===Ur)continue;return{value:ps.arg,done:$o.done}}ps.type==="throw"&&(qo="completed",$o.method="throw",$o.arg=ps.arg)}}}(Hn,oo,la),ko}function jr(Hn,On,oo){try{return{type:"normal",arg:Hn.call(On,oo)}}catch(lo){return{type:"throw",arg:lo}}}Oe.wrap=Or;var Ur={};function Yr(){}function In(){}function Mn(){}var Dn={};Ir(Dn,Pt,function(){return this});var Wn=zl&&zl(zl(eo([])));Wn&&Wn!==Ne&&Lt.call(Wn,Pt)&&(Dn=Wn);var Jn=Mn.prototype=Yr.prototype=ii(Dn);function Fn(Hn){var On;bo(On=["next","throw","return"]).call(On,function(oo){Ir(Hn,oo,function(lo){return this._invoke(oo,lo)})})}function go(Hn,On){function oo(Co,ko,la,Wo){var ss=jr(Hn[Co],Hn,ko);if(ss.type!=="throw"){var $o=ss.arg,qo=$o.value;return qo&&xe(qo)=="object"&&Lt.call(qo,"__await")?On.resolve(qo.__await).then(function(ka){oo("next",ka,la,Wo)},function(ka){oo("throw",ka,la,Wo)}):On.resolve(qo).then(function(ka){$o.value=ka,la($o)},function(ka){return oo("throw",ka,la,Wo)})}Wo(ss.arg)}var lo;this._invoke=function(Co,ko){function la(){return new On(function(Wo,ss){oo(Co,ko,Wo,ss)})}return lo=lo?lo.then(la,la):la()}}function Bo(Hn,On){var oo=Hn.iterator[On.method];if(oo===void 0){if(On.delegate=null,On.method==="throw"){if(Hn.iterator.return&&(On.method="return",On.arg=void 0,Bo(Hn,On),On.method==="throw"))return Ur;On.method="throw",On.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ur}var lo=jr(oo,Hn.iterator,On.arg);if(lo.type==="throw")return On.method="throw",On.arg=lo.arg,On.delegate=null,Ur;var Co=lo.arg;return Co?Co.done?(On[Hn.resultName]=Co.value,On.next=Hn.nextLoc,On.method!=="return"&&(On.method="next",On.arg=void 0),On.delegate=null,Ur):Co:(On.method="throw",On.arg=new TypeError("iterator result is not an object"),On.delegate=null,Ur)}function Do(Hn){var On={tryLoc:Hn[0]};1 in Hn&&(On.catchLoc=Hn[1]),2 in Hn&&(On.finallyLoc=Hn[2],On.afterLoc=Hn[3]),this.tryEntries.push(On)}function Bn(Hn){var On=Hn.completion||{};On.type="normal",delete On.arg,Hn.completion=On}function zr(Hn){this.tryEntries=[{tryLoc:"root"}],bo(Hn).call(Hn,Do,this),this.reset(!0)}function eo(Hn){if(Hn){var On=Hn[Pt];if(On)return On.call(Hn);if(typeof Hn.next=="function")return Hn;if(!isNaN(Hn.length)){var oo=-1,lo=function Co(){for(;++oo<Hn.length;)if(Lt.call(Hn,oo))return Co.value=Hn[oo],Co.done=!1,Co;return Co.value=void 0,Co.done=!0,Co};return lo.next=lo}}return{next:to}}function to(){return{value:void 0,done:!0}}return In.prototype=Mn,Ir(Jn,"constructor",Mn),Ir(Mn,"constructor",In),In.displayName=Ir(Mn,vr,"GeneratorFunction"),Oe.isGeneratorFunction=function(Hn){var On=typeof Hn=="function"&&Hn.constructor;return!!On&&(On===In||(On.displayName||On.name)==="GeneratorFunction")},Oe.mark=function(Hn){return ci?ci(Hn,Mn):(Hn.__proto__=Mn,Ir(Hn,vr,"GeneratorFunction")),Hn.prototype=ii(Jn),Hn},Oe.awrap=function(Hn){return{__await:Hn}},Fn(go.prototype),Ir(go.prototype,ir,function(){return this}),Oe.AsyncIterator=go,Oe.async=function(Hn,On,oo,lo,Co){Co===void 0&&(Co=ca);var ko=new go(Or(Hn,On,oo,lo),Co);return Oe.isGeneratorFunction(On)?ko:ko.next().then(function(la){return la.done?la.value:ko.next()})},Fn(Jn),Ir(Jn,vr,"Generator"),Ir(Jn,Pt,function(){return this}),Ir(Jn,"toString",function(){return"[object Generator]"}),Oe.keys=function(Hn){var On=[];for(var oo in Hn)On.push(oo);return qd(On).call(On),function lo(){for(;On.length;){var Co=On.pop();if(Co in Hn)return lo.value=Co,lo.done=!1,lo}return lo.done=!0,lo}},Oe.values=eo,zr.prototype={constructor:zr,reset:function(On){var oo;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,bo(oo=this.tryEntries).call(oo,Bn),!On)for(var lo in this)lo.charAt(0)==="t"&&Lt.call(this,lo)&&!isNaN(+Da(lo).call(lo,1))&&(this[lo]=void 0)},stop:function(){this.done=!0;var On=this.tryEntries[0].completion;if(On.type==="throw")throw On.arg;return this.rval},dispatchException:function(On){if(this.done)throw On;var oo=this;function lo($o,qo){return la.type="throw",la.arg=On,oo.next=$o,qo&&(oo.method="next",oo.arg=void 0),!!qo}for(var Co=this.tryEntries.length-1;Co>=0;--Co){var ko=this.tryEntries[Co],la=ko.completion;if(ko.tryLoc==="root")return lo("end");if(ko.tryLoc<=this.prev){var Wo=Lt.call(ko,"catchLoc"),ss=Lt.call(ko,"finallyLoc");if(Wo&&ss){if(this.prev<ko.catchLoc)return lo(ko.catchLoc,!0);if(this.prev<ko.finallyLoc)return lo(ko.finallyLoc)}else if(Wo){if(this.prev<ko.catchLoc)return lo(ko.catchLoc,!0)}else{if(!ss)throw new Error("try statement without catch or finally");if(this.prev<ko.finallyLoc)return lo(ko.finallyLoc)}}}},abrupt:function(On,oo){for(var lo=this.tryEntries.length-1;lo>=0;--lo){var Co=this.tryEntries[lo];if(Co.tryLoc<=this.prev&&Lt.call(Co,"finallyLoc")&&this.prev<Co.finallyLoc){var ko=Co;break}}ko&&(On==="break"||On==="continue")&&ko.tryLoc<=oo&&oo<=ko.finallyLoc&&(ko=null);var la=ko?ko.completion:{};return la.type=On,la.arg=oo,ko?(this.method="next",this.next=ko.finallyLoc,Ur):this.complete(la)},complete:function(On,oo){if(On.type==="throw")throw On.arg;return On.type==="break"||On.type==="continue"?this.next=On.arg:On.type==="return"?(this.rval=this.arg=On.arg,this.method="return",this.next="end"):On.type==="normal"&&oo&&(this.next=oo),Ur},finish:function(On){for(var oo=this.tryEntries.length-1;oo>=0;--oo){var lo=this.tryEntries[oo];if(lo.finallyLoc===On)return this.complete(lo.completion,lo.afterLoc),Bn(lo),Ur}},catch:function(On){for(var oo=this.tryEntries.length-1;oo>=0;--oo){var lo=this.tryEntries[oo];if(lo.tryLoc===On){var Co=lo.completion;if(Co.type==="throw"){var ko=Co.arg;Bn(lo)}return ko}}throw new Error("illegal catch attempt")},delegateYield:function(On,oo,lo){return this.delegate={iterator:eo(On),resultName:oo,nextLoc:lo},this.method==="next"&&(this.arg=void 0),Ur}},Oe}pe.exports=qe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),Af=BS(),Dr=Af;try{regeneratorRuntime=Af}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Af:Function("r","regeneratorRuntime = r")(Af)}_r.JSON||(_r.JSON={stringify:JSON.stringify});var LS=function(xe,qe,Oe){return ue(_r.JSON.stringify,null,arguments)},Io=LS,FS=fd.indexOf,Hd=Ie([].indexOf),Nf=!!Hd&&1/Hd([1],1,-0)<0,$S=Ul("indexOf");En({target:"Array",proto:!0,forced:Nf||!$S},{indexOf:function(xe){var qe=arguments.length>1?arguments[1]:void 0;return Nf?Hd(this,xe,qe)||0:FS(this,xe,qe)}});var Of=ua("Array").indexOf,Kr=Array.prototype,ta=function(pe){var xe=pe.indexOf;return pe===Kr||sr(Kr,pe)&&xe===Kr.indexOf?Of:xe},qn=`	
\v\f\r                　\u2028\u2029\uFEFF`,ti=Ie("".replace),zd="["+qn+"]",jS=RegExp("^"+zd+zd+"*"),ic=RegExp(zd+zd+"*$"),ri=function(pe){return function(xe){var qe=li(Cr(xe));return 1&pe&&(qe=ti(qe,jS,"")),2&pe&&(qe=ti(qe,ic,"")),qe}},sh={start:ri(1),end:ri(2),trim:ri(3)},DS=sh.trim,Wd=$.parseInt,Pu=$.Symbol,Tb=Pu&&Pu.iterator,Cb=/^[+-]?0x/i,US=Ie(Cb.exec),ih=Wd(qn+"08")!==8||Wd(qn+"0x16")!==22||Tb&&!V(function(){Wd(Object(Tb))})?function(xe,qe){var Oe=DS(li(xe));return Wd(Oe,qe>>>0||(US(Cb,Oe)?16:10))}:Wd;En({global:!0,forced:parseInt!=ih},{parseInt:ih});var ma=_r.parseInt,Hi=sh.trim,Rf=Ie("".charAt),Bf=$.parseFloat,Mb=$.Symbol,Lf=Mb&&Mb.iterator,ni=1/Bf(qn+"-0")!=-1/0||Lf&&!V(function(){Bf(Object(Lf))})?function(xe){var qe=Hi(li(xe)),Oe=Bf(qe);return Oe===0&&Rf(qe,0)=="-"?-0:Oe}:Bf;En({global:!0,forced:parseFloat!=ni},{parseFloat:ni});var ch=_r.parseFloat,lh=fd.includes,kb=V(function(){return!Array(1).includes()});En({target:"Array",proto:!0,forced:kb},{includes:function(xe){return lh(this,xe,arguments.length>1?arguments[1]:void 0)}});var VS=ua("Array").includes,qS=So("match"),Wl=TypeError,HS=function(pe){if(function(xe){var qe;return mr(xe)&&((qe=xe[qS])!==void 0?!!qe:nr(xe)=="RegExp")}(pe))throw Wl("The method doesn't accept regular expressions");return pe},zS=So("match"),WS=Ie("".indexOf);En({target:"String",proto:!0,forced:!function(pe){var xe=/./;try{"/./"[pe](xe)}catch{try{return xe[zS]=!1,"/./"[pe](xe)}catch{}}return!1}("includes")},{includes:function(xe){return!!~WS(li(Cr(this)),li(HS(xe)),arguments.length>1?arguments[1]:void 0)}});var GS=ua("String").includes,uh=Array.prototype,dh=String.prototype,Ci=function(pe){var xe=pe.includes;return pe===uh||sr(uh,pe)&&xe===uh.includes?VS:typeof pe=="string"||pe===dh||sr(dh,pe)&&xe===dh.includes?GS:xe},KS=Mc.some,Gl=Ul("some");En({target:"Array",proto:!0,forced:!Gl},{some:function(xe){return KS(this,xe,arguments.length>1?arguments[1]:void 0)}});var Gd=ua("Array").some,ph=Array.prototype,Kd=function(pe){var xe=pe.some;return pe===ph||sr(ph,pe)&&xe===ph.some?Gd:xe};function Qd(pe,xe){var qe={};for(var Oe in pe)Object.prototype.hasOwnProperty.call(pe,Oe)&&xe.indexOf(Oe)<0&&(qe[Oe]=pe[Oe]);if(pe!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ne=0;for(Oe=Object.getOwnPropertySymbols(pe);Ne<Oe.length;Ne++)xe.indexOf(Oe[Ne])<0&&Object.prototype.propertyIsEnumerable.call(pe,Oe[Ne])&&(qe[Oe[Ne]]=pe[Oe[Ne]])}return qe}function hn(pe,xe,qe,Oe){return new(qe||(qe=Promise))(function(Ne,Lt){function Dt(vr){try{ir(Oe.next(vr))}catch(Ir){Lt(Ir)}}function Pt(vr){try{ir(Oe.throw(vr))}catch(Ir){Lt(Ir)}}function ir(vr){vr.done?Ne(vr.value):function(Or){return Or instanceof qe?Or:new qe(function(jr){jr(Or)})}(vr.value).then(Dt,Pt)}ir((Oe=Oe.apply(pe,xe||[])).next())})}var fh=function(xe,qe){for(var Oe=-1,Ne=xe==null?0:xe.length,Lt=Array(Ne);++Oe<Ne;)Lt[Oe]=qe(xe[Oe],Oe,xe);return Lt},QS=function(){this.__data__=[],this.size=0},Jd=function(xe,qe){return xe===qe||xe!=xe&&qe!=qe},_c=function(xe,qe){for(var Oe=xe.length;Oe--;)if(Jd(xe[Oe][0],qe))return Oe;return-1},wb=Array.prototype.splice,JS=function(xe){var qe=this.__data__,Oe=_c(qe,xe);return!(Oe<0)&&(Oe==qe.length-1?qe.pop():wb.call(qe,Oe,1),--this.size,!0)},Yd=function(xe){var qe=this.__data__,Oe=_c(qe,xe);return Oe<0?void 0:qe[Oe][1]},Ff=function(xe){return _c(this.__data__,xe)>-1},YS=function(xe,qe){var Oe=this.__data__,Ne=_c(Oe,xe);return Ne<0?(++this.size,Oe.push([xe,qe])):Oe[Ne][1]=qe,this};function Au(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.clear();++xe<qe;){var Oe=pe[xe];this.set(Oe[0],Oe[1])}}Au.prototype.clear=QS,Au.prototype.delete=JS,Au.prototype.get=Yd,Au.prototype.has=Ff,Au.prototype.set=YS;var $f=Au,XS=function(){this.__data__=new $f,this.size=0},ZS=function(xe){var qe=this.__data__,Oe=qe.delete(xe);return this.size=qe.size,Oe},Nu=function(xe){return this.__data__.get(xe)},jf=function(xe){return this.__data__.has(xe)},Ou=typeof e=="object"&&e&&e.Object===Object&&e,eT=typeof self=="object"&&self&&self.Object===Object&&self,zi=Ou||eT||Function("return this")(),fi=zi.Symbol,_b=Object.prototype,tT=_b.hasOwnProperty,rT=_b.toString,Xd=fi?fi.toStringTag:void 0,Ru=function(xe){var qe=tT.call(xe,Xd),Oe=xe[Xd];try{xe[Xd]=void 0;var Ne=!0}catch{}var Lt=rT.call(xe);return Ne&&(qe?xe[Xd]=Oe:delete xe[Xd]),Lt},Df=Object.prototype.toString,mh=function(xe){return Df.call(xe)},xb=fi?fi.toStringTag:void 0,sl=function(xe){return xe==null?xe===void 0?"[object Undefined]":"[object Null]":xb&&xb in Object(xe)?Ru(xe):mh(xe)},oi=function(xe){var qe=typeof xe;return xe!=null&&(qe=="object"||qe=="function")},gh=function(xe){if(!oi(xe))return!1;var qe=sl(xe);return qe=="[object Function]"||qe=="[object GeneratorFunction]"||qe=="[object AsyncFunction]"||qe=="[object Proxy]"},hh=zi["__core-js_shared__"],Uf=function(){var pe=/[^.]+$/.exec(hh&&hh.keys&&hh.keys.IE_PROTO||"");return pe?"Symbol(src)_1."+pe:""}(),Ib=function(xe){return!!Uf&&Uf in xe},Eb=Function.prototype.toString,Kl=function(xe){if(xe!=null){try{return Eb.call(xe)}catch{}try{return xe+""}catch{}}return""},nT=/^\[object .+?Constructor\]$/,Vf=Function.prototype,Zd=Object.prototype,vh=Vf.toString,Bs=Zd.hasOwnProperty,Ls=RegExp("^"+vh.call(Bs).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oT=function(xe){return!(!oi(xe)||Ib(xe))&&(gh(xe)?Ls:nT).test(Kl(xe))},aT=function(xe,qe){return xe==null?void 0:xe[qe]},Ql=function(xe,qe){var Oe=aT(xe,qe);return oT(Oe)?Oe:void 0},Jl=Ql(zi,"Map"),Oo=Ql(Object,"create"),sT=function(){this.__data__=Oo?Oo(null):{},this.size=0},iT=function(xe){var qe=this.has(xe)&&delete this.__data__[xe];return this.size-=qe?1:0,qe},cT=Object.prototype.hasOwnProperty,lT=function(xe){var qe=this.__data__;if(Oo){var Oe=qe[xe];return Oe==="__lodash_hash_undefined__"?void 0:Oe}return cT.call(qe,xe)?qe[xe]:void 0},uT=Object.prototype.hasOwnProperty,dT=function(xe){var qe=this.__data__;return Oo?qe[xe]!==void 0:uT.call(qe,xe)},pT=function(xe,qe){var Oe=this.__data__;return this.size+=this.has(xe)?0:1,Oe[xe]=Oo&&qe===void 0?"__lodash_hash_undefined__":qe,this};function Bu(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.clear();++xe<qe;){var Oe=pe[xe];this.set(Oe[0],Oe[1])}}Bu.prototype.clear=sT,Bu.prototype.delete=iT,Bu.prototype.get=lT,Bu.prototype.has=dT,Bu.prototype.set=pT;var Pb=Bu,yh=function(){this.size=0,this.__data__={hash:new Pb,map:new(Jl||$f),string:new Pb}},bh=function(xe){var qe=typeof xe;return qe=="string"||qe=="number"||qe=="symbol"||qe=="boolean"?xe!=="__proto__":xe===null},mi=function(xe,qe){var Oe=xe.__data__;return bh(qe)?Oe[typeof qe=="string"?"string":"hash"]:Oe.map},fT=function(xe){var qe=mi(this,xe).delete(xe);return this.size-=qe?1:0,qe},Ab=function(xe){return mi(this,xe).get(xe)},mT=function(xe){return mi(this,xe).has(xe)},gT=function(xe,qe){var Oe=mi(this,xe),Ne=Oe.size;return Oe.set(xe,qe),this.size+=Oe.size==Ne?0:1,this};function Lu(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.clear();++xe<qe;){var Oe=pe[xe];this.set(Oe[0],Oe[1])}}Lu.prototype.clear=yh,Lu.prototype.delete=fT,Lu.prototype.get=Ab,Lu.prototype.has=mT,Lu.prototype.set=gT;var Fu=Lu,qf=function(xe,qe){var Oe=this.__data__;if(Oe instanceof $f){var Ne=Oe.__data__;if(!Jl||Ne.length<199)return Ne.push([xe,qe]),this.size=++Oe.size,this;Oe=this.__data__=new Fu(Ne)}return Oe.set(xe,qe),this.size=Oe.size,this};function Yl(pe){var xe=this.__data__=new $f(pe);this.size=xe.size}Yl.prototype.clear=XS,Yl.prototype.delete=ZS,Yl.prototype.get=Nu,Yl.prototype.has=jf,Yl.prototype.set=qf;var $u=Yl,Hf=function(xe){return this.__data__.set(xe,"__lodash_hash_undefined__"),this},Sh=function(xe){return this.__data__.has(xe)};function zf(pe){var xe=-1,qe=pe==null?0:pe.length;for(this.__data__=new Fu;++xe<qe;)this.add(pe[xe])}zf.prototype.add=zf.prototype.push=Hf,zf.prototype.has=Sh;var Wf=zf,hT=function(xe,qe){for(var Oe=-1,Ne=xe==null?0:xe.length;++Oe<Ne;)if(qe(xe[Oe],Oe,xe))return!0;return!1},Th=function(xe,qe){return xe.has(qe)},Nb=function(xe,qe,Oe,Ne,Lt,Dt){var Pt=1&Oe,ir=xe.length,vr=qe.length;if(ir!=vr&&!(Pt&&vr>ir))return!1;var Ir=Dt.get(xe),Or=Dt.get(qe);if(Ir&&Or)return Ir==qe&&Or==xe;var jr=-1,Ur=!0,Yr=2&Oe?new Wf:void 0;for(Dt.set(xe,qe),Dt.set(qe,xe);++jr<ir;){var In=xe[jr],Mn=qe[jr];if(Ne)var Dn=Pt?Ne(Mn,In,jr,qe,xe,Dt):Ne(In,Mn,jr,xe,qe,Dt);if(Dn!==void 0){if(Dn)continue;Ur=!1;break}if(Yr){if(!hT(qe,function(Wn,Jn){if(!Th(Yr,Jn)&&(In===Wn||Lt(In,Wn,Oe,Ne,Dt)))return Yr.push(Jn)})){Ur=!1;break}}else if(In!==Mn&&!Lt(In,Mn,Oe,Ne,Dt)){Ur=!1;break}}return Dt.delete(xe),Dt.delete(qe),Ur},Gf=zi.Uint8Array,Ob=function(xe){var qe=-1,Oe=Array(xe.size);return xe.forEach(function(Ne,Lt){Oe[++qe]=[Lt,Ne]}),Oe},Ch=function(xe){var qe=-1,Oe=Array(xe.size);return xe.forEach(function(Ne){Oe[++qe]=Ne}),Oe},Mh=fi?fi.prototype:void 0,Kf=Mh?Mh.valueOf:void 0,kh=function(xe,qe,Oe,Ne,Lt,Dt,Pt){switch(Oe){case"[object DataView]":if(xe.byteLength!=qe.byteLength||xe.byteOffset!=qe.byteOffset)return!1;xe=xe.buffer,qe=qe.buffer;case"[object ArrayBuffer]":return!(xe.byteLength!=qe.byteLength||!Dt(new Gf(xe),new Gf(qe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Jd(+xe,+qe);case"[object Error]":return xe.name==qe.name&&xe.message==qe.message;case"[object RegExp]":case"[object String]":return xe==qe+"";case"[object Map]":var ir=Ob;case"[object Set]":var vr=1&Ne;if(ir||(ir=Ch),xe.size!=qe.size&&!vr)return!1;var Ir=Pt.get(xe);if(Ir)return Ir==qe;Ne|=2,Pt.set(xe,qe);var Or=Nb(ir(xe),ir(qe),Ne,Lt,Dt,Pt);return Pt.delete(xe),Or;case"[object Symbol]":if(Kf)return Kf.call(xe)==Kf.call(qe)}return!1},wh=function(xe,qe){for(var Oe=-1,Ne=qe.length,Lt=xe.length;++Oe<Ne;)xe[Lt+Oe]=qe[Oe];return xe},Mi=Array.isArray,_h=function(xe,qe,Oe){var Ne=qe(xe);return Mi(xe)?Ne:wh(Ne,Oe(xe))},cc=function(xe,qe){for(var Oe=-1,Ne=xe==null?0:xe.length,Lt=0,Dt=[];++Oe<Ne;){var Pt=xe[Oe];qe(Pt,Oe,xe)&&(Dt[Lt++]=Pt)}return Dt},Rb=function(){return[]},vT=Object.prototype.propertyIsEnumerable,Bb=Object.getOwnPropertySymbols,yT=Bb?function(pe){return pe==null?[]:(pe=Object(pe),cc(Bb(pe),function(xe){return vT.call(pe,xe)}))}:Rb,xh=yT,xc=function(xe,qe){for(var Oe=-1,Ne=Array(xe);++Oe<xe;)Ne[Oe]=qe(Oe);return Ne},Ic=function(xe){return xe!=null&&typeof xe=="object"},Lb=function(xe){return Ic(xe)&&sl(xe)=="[object Arguments]"},Qf=Object.prototype,bT=Qf.hasOwnProperty,ST=Qf.propertyIsEnumerable,Fb=Lb(function(){return arguments}())?Lb:function(pe){return Ic(pe)&&bT.call(pe,"callee")&&!ST.call(pe,"callee")},ju=Fb,$b=function(){return!1},ki=g(function(pe,xe){var qe=xe&&!xe.nodeType&&xe,Oe=qe&&pe&&!pe.nodeType&&pe,Ne=Oe&&Oe.exports===qe?zi.Buffer:void 0,Lt=(Ne?Ne.isBuffer:void 0)||$b;pe.exports=Lt}),TT=/^(?:0|[1-9]\d*)$/,Jf=function(xe,qe){var Oe=typeof xe;return!!(qe=qe??9007199254740991)&&(Oe=="number"||Oe!="symbol"&&TT.test(xe))&&xe>-1&&xe%1==0&&xe<qe},Ih=function(xe){return typeof xe=="number"&&xe>-1&&xe%1==0&&xe<=9007199254740991},Ua={};Ua["[object Float32Array]"]=Ua["[object Float64Array]"]=Ua["[object Int8Array]"]=Ua["[object Int16Array]"]=Ua["[object Int32Array]"]=Ua["[object Uint8Array]"]=Ua["[object Uint8ClampedArray]"]=Ua["[object Uint16Array]"]=Ua["[object Uint32Array]"]=!0,Ua["[object Arguments]"]=Ua["[object Array]"]=Ua["[object ArrayBuffer]"]=Ua["[object Boolean]"]=Ua["[object DataView]"]=Ua["[object Date]"]=Ua["[object Error]"]=Ua["[object Function]"]=Ua["[object Map]"]=Ua["[object Number]"]=Ua["[object Object]"]=Ua["[object RegExp]"]=Ua["[object Set]"]=Ua["[object String]"]=Ua["[object WeakMap]"]=!1;var Wi=function(xe){return Ic(xe)&&Ih(xe.length)&&!!Ua[sl(xe)]},Du=function(xe){return function(qe){return xe(qe)}},ep=g(function(pe,xe){var qe=xe&&!xe.nodeType&&xe,Oe=qe&&pe&&!pe.nodeType&&pe,Ne=Oe&&Oe.exports===qe&&Ou.process,Lt=function(){try{var Dt=Oe&&Oe.require&&Oe.require("util").types;return Dt||Ne&&Ne.binding&&Ne.binding("util")}catch{}}();pe.exports=Lt}),Yf=ep&&ep.isTypedArray,Eh=Yf?Du(Yf):Wi,Uu=Object.prototype.hasOwnProperty,tp=function(xe,qe){var Oe=Mi(xe),Ne=!Oe&&ju(xe),Lt=!Oe&&!Ne&&ki(xe),Dt=!Oe&&!Ne&&!Lt&&Eh(xe),Pt=Oe||Ne||Lt||Dt,ir=Pt?xc(xe.length,String):[],vr=ir.length;for(var Ir in xe)!qe&&!Uu.call(xe,Ir)||Pt&&(Ir=="length"||Lt&&(Ir=="offset"||Ir=="parent")||Dt&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Jf(Ir,vr))||ir.push(Ir);return ir},Ph=Object.prototype,Ah=function(xe){var qe=xe&&xe.constructor;return xe===(typeof qe=="function"&&qe.prototype||Ph)},Nh=function(xe,qe){return function(Oe){return xe(qe(Oe))}},il=Nh(Object.keys,Object),Ss=Object.prototype.hasOwnProperty,Ws=function(xe){if(!Ah(xe))return il(xe);var qe=[];for(var Oe in Object(xe))Ss.call(xe,Oe)&&Oe!="constructor"&&qe.push(Oe);return qe},Xf=function(xe){return xe!=null&&Ih(xe.length)&&!gh(xe)},Zf=function(xe){return Xf(xe)?tp(xe):Ws(xe)},rp=function(xe){return _h(xe,Zf,xh)},CT=Object.prototype.hasOwnProperty,em=function(xe,qe,Oe,Ne,Lt,Dt){var Pt=1&Oe,ir=rp(xe),vr=ir.length;if(vr!=rp(qe).length&&!Pt)return!1;for(var Ir=vr;Ir--;){var Or=ir[Ir];if(!(Pt?Or in qe:CT.call(qe,Or)))return!1}var jr=Dt.get(xe),Ur=Dt.get(qe);if(jr&&Ur)return jr==qe&&Ur==xe;var Yr=!0;Dt.set(xe,qe),Dt.set(qe,xe);for(var In=Pt;++Ir<vr;){var Mn=xe[Or=ir[Ir]],Dn=qe[Or];if(Ne)var Wn=Pt?Ne(Dn,Mn,Or,qe,xe,Dt):Ne(Mn,Dn,Or,xe,qe,Dt);if(!(Wn===void 0?Mn===Dn||Lt(Mn,Dn,Oe,Ne,Dt):Wn)){Yr=!1;break}In||(In=Or=="constructor")}if(Yr&&!In){var Jn=xe.constructor,Fn=qe.constructor;Jn==Fn||!("constructor"in xe)||!("constructor"in qe)||typeof Jn=="function"&&Jn instanceof Jn&&typeof Fn=="function"&&Fn instanceof Fn||(Yr=!1)}return Dt.delete(xe),Dt.delete(qe),Yr},tm=Ql(zi,"DataView"),Vu=Ql(zi,"Promise"),qu=Ql(zi,"Set"),Oh=Ql(zi,"WeakMap"),rm="[object Map]",Rh="[object Promise]",jb="[object Set]",Hu="[object WeakMap]",Bh="[object DataView]",Db=Kl(tm),Ub=Kl(Jl),MT=Kl(Vu),Vb=Kl(qu),Xl=Kl(Oh),Za=sl;(tm&&Za(new tm(new ArrayBuffer(1)))!=Bh||Jl&&Za(new Jl)!=rm||Vu&&Za(Vu.resolve())!=Rh||qu&&Za(new qu)!=jb||Oh&&Za(new Oh)!=Hu)&&(Za=function(pe){var xe=sl(pe),qe=xe=="[object Object]"?pe.constructor:void 0,Oe=qe?Kl(qe):"";if(Oe)switch(Oe){case Db:return Bh;case Ub:return rm;case MT:return Rh;case Vb:return jb;case Xl:return Hu}return xe});var np=Za,Va="[object Arguments]",wi="[object Array]",Lo="[object Object]",qb=Object.prototype.hasOwnProperty,Lh=function(xe,qe,Oe,Ne,Lt,Dt){var Pt=Mi(xe),ir=Mi(qe),vr=Pt?wi:np(xe),Ir=ir?wi:np(qe),Or=(vr=vr==Va?Lo:vr)==Lo,jr=(Ir=Ir==Va?Lo:Ir)==Lo,Ur=vr==Ir;if(Ur&&ki(xe)){if(!ki(qe))return!1;Pt=!0,Or=!1}if(Ur&&!Or)return Dt||(Dt=new $u),Pt||Eh(xe)?Nb(xe,qe,Oe,Ne,Lt,Dt):kh(xe,qe,vr,Oe,Ne,Lt,Dt);if(!(1&Oe)){var Yr=Or&&qb.call(xe,"__wrapped__"),In=jr&&qb.call(qe,"__wrapped__");if(Yr||In){var Mn=Yr?xe.value():xe,Dn=In?qe.value():qe;return Dt||(Dt=new $u),Lt(Mn,Dn,Oe,Ne,Dt)}}return!!Ur&&(Dt||(Dt=new $u),em(xe,qe,Oe,Ne,Lt,Dt))},Hb=function pe(xe,qe,Oe,Ne,Lt){return xe===qe||(xe==null||qe==null||!Ic(xe)&&!Ic(qe)?xe!=xe&&qe!=qe:Lh(xe,qe,Oe,Ne,pe,Lt))},nm=function(xe,qe,Oe,Ne){var Lt=Oe.length,Dt=Lt,Pt=!Ne;if(xe==null)return!Dt;for(xe=Object(xe);Lt--;){var ir=Oe[Lt];if(Pt&&ir[2]?ir[1]!==xe[ir[0]]:!(ir[0]in xe))return!1}for(;++Lt<Dt;){var vr=(ir=Oe[Lt])[0],Ir=xe[vr],Or=ir[1];if(Pt&&ir[2]){if(Ir===void 0&&!(vr in xe))return!1}else{var jr=new $u;if(Ne)var Ur=Ne(Ir,Or,vr,xe,qe,jr);if(!(Ur===void 0?Hb(Or,Ir,3,Ne,jr):Ur))return!1}}return!0},Fh=function(xe){return xe==xe&&!oi(xe)},$h=function(xe){for(var qe=Zf(xe),Oe=qe.length;Oe--;){var Ne=qe[Oe],Lt=xe[Ne];qe[Oe]=[Ne,Lt,Fh(Lt)]}return qe},zb=function(xe,qe){return function(Oe){return Oe!=null&&Oe[xe]===qe&&(qe!==void 0||xe in Object(Oe))}},kT=function(xe){var qe=$h(xe);return qe.length==1&&qe[0][2]?zb(qe[0][0],qe[0][1]):function(Oe){return Oe===xe||nm(Oe,xe,qe)}},op=function(xe){return typeof xe=="symbol"||Ic(xe)&&sl(xe)=="[object Symbol]"},wT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_T=/^\w*$/,Zl=function(xe,qe){if(Mi(xe))return!1;var Oe=typeof xe;return!(Oe!="number"&&Oe!="symbol"&&Oe!="boolean"&&xe!=null&&!op(xe))||_T.test(xe)||!wT.test(xe)||qe!=null&&xe in Object(qe)};function ai(pe,xe){if(typeof pe!="function"||xe!=null&&typeof xe!="function")throw new TypeError("Expected a function");var qe=function(){var Oe=arguments,Ne=xe?xe.apply(this,Oe):Oe[0],Lt=qe.cache;if(Lt.has(Ne))return Lt.get(Ne);var Dt=pe.apply(this,Oe);return qe.cache=Lt.set(Ne,Dt)||Lt,Dt};return qe.cache=new(ai.Cache||Fu),qe}ai.Cache=Fu;var Wb=ai,xT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,om=/\\(\\)?/g,Gb=function(xe){var qe=Wb(xe,function(Ne){return Oe.size===500&&Oe.clear(),Ne}),Oe=qe.cache;return qe}(function(pe){var xe=[];return pe.charCodeAt(0)===46&&xe.push(""),pe.replace(xT,function(qe,Oe,Ne,Lt){xe.push(Ne?Lt.replace(om,"$1"):Oe||qe)}),xe}),Kb=Gb,Qb=fi?fi.prototype:void 0,jh=Qb?Qb.toString:void 0,Jb=function pe(xe){if(typeof xe=="string")return xe;if(Mi(xe))return fh(xe,pe)+"";if(op(xe))return jh?jh.call(xe):"";var qe=xe+"";return qe=="0"&&1/xe==-1/0?"-0":qe},IT=function(xe){return xe==null?"":Jb(xe)},ap=function(xe,qe){return Mi(xe)?xe:Zl(xe,qe)?[xe]:Kb(IT(xe))},zu=function(xe){if(typeof xe=="string"||op(xe))return xe;var qe=xe+"";return qe=="0"&&1/xe==-1/0?"-0":qe},Dh=function(xe,qe){for(var Oe=0,Ne=(qe=ap(qe,xe)).length;xe!=null&&Oe<Ne;)xe=xe[zu(qe[Oe++])];return Oe&&Oe==Ne?xe:void 0},us=function(xe,qe,Oe){var Ne=xe==null?void 0:Dh(xe,qe);return Ne===void 0?Oe:Ne},ET=function(xe,qe){return xe!=null&&qe in Object(xe)},sp=function(xe,qe,Oe){for(var Ne=-1,Lt=(qe=ap(qe,xe)).length,Dt=!1;++Ne<Lt;){var Pt=zu(qe[Ne]);if(!(Dt=xe!=null&&Oe(xe,Pt)))break;xe=xe[Pt]}return Dt||++Ne!=Lt?Dt:!!(Lt=xe==null?0:xe.length)&&Ih(Lt)&&Jf(Pt,Lt)&&(Mi(xe)||ju(xe))},Yb=function(xe,qe){return xe!=null&&sp(xe,qe,ET)},ip=function(xe,qe){return Zl(xe)&&Fh(qe)?zb(zu(xe),qe):function(Oe){var Ne=us(Oe,xe);return Ne===void 0&&Ne===qe?Yb(Oe,xe):Hb(qe,Ne,3)}},Uh=function(xe){return xe},am=function(xe){return function(qe){return qe==null?void 0:qe[xe]}},Vh=function(xe){return function(qe){return Dh(qe,xe)}},Qa=function(xe){return Zl(xe)?am(zu(xe)):Vh(xe)},PT=function(xe){return typeof xe=="function"?xe:xe==null?Uh:typeof xe=="object"?Mi(xe)?ip(xe[0],xe[1]):kT(xe):Qa(xe)},cl=function(){try{var pe=Ql(Object,"defineProperty");return pe({},"",{}),pe}catch{}}(),lc=function(xe,qe,Oe){qe=="__proto__"&&cl?cl(xe,qe,{configurable:!0,enumerable:!0,value:Oe,writable:!0}):xe[qe]=Oe},Xb=Object.prototype.hasOwnProperty,sm=function(xe,qe,Oe){var Ne=xe[qe];Xb.call(xe,qe)&&Jd(Ne,Oe)&&(Oe!==void 0||qe in xe)||lc(xe,qe,Oe)},AT=function(xe,qe,Oe,Ne){if(!oi(xe))return xe;for(var Lt=-1,Dt=(qe=ap(qe,xe)).length,Pt=Dt-1,ir=xe;ir!=null&&++Lt<Dt;){var vr=zu(qe[Lt]),Ir=Oe;if(vr==="__proto__"||vr==="constructor"||vr==="prototype")return xe;if(Lt!=Pt){var Or=ir[vr];(Ir=Ne?Ne(Or,vr,ir):void 0)===void 0&&(Ir=oi(Or)?Or:Jf(qe[Lt+1])?[]:{})}sm(ir,vr,Ir),ir=ir[vr]}return xe},qh=function(xe,qe,Oe){for(var Ne=-1,Lt=qe.length,Dt={};++Ne<Lt;){var Pt=qe[Ne],ir=Dh(xe,Pt);Oe(ir,Pt)&&AT(Dt,ap(Pt,xe),ir)}return Dt},Hh=Nh(Object.getPrototypeOf,Object),zh=Object.getOwnPropertySymbols?function(pe){for(var xe=[];pe;)wh(xe,xh(pe)),pe=Hh(pe);return xe}:Rb,NT=function(xe){var qe=[];if(xe!=null)for(var Oe in Object(xe))qe.push(Oe);return qe},OT=Object.prototype.hasOwnProperty,RT=function(xe){if(!oi(xe))return NT(xe);var qe=Ah(xe),Oe=[];for(var Ne in xe)(Ne!="constructor"||!qe&&OT.call(xe,Ne))&&Oe.push(Ne);return Oe},Wu=function(xe){return Xf(xe)?tp(xe,!0):RT(xe)},Gu=function(xe){return _h(xe,Wu,zh)},BT=function(xe,qe){if(xe==null)return{};var Oe=fh(Gu(xe),function(Ne){return[Ne]});return qe=PT(qe),qh(xe,Oe,function(Ne,Lt){return qe(Ne,Lt[0])})},LT=ua("Array").values,Wh=Array.prototype,Gh={DOMTokenList:!0,NodeList:!0},eu=function(pe){var xe=pe.values;return pe===Wh||sr(Wh,pe)&&xe===Wh.values||vn(Gh,Nl(pe))?LT:xe};En({target:"Array",stat:!0},{isArray:nc});var Ts=_r.Array.isArray,ms=Mc.every,FT=Ul("every");En({target:"Array",proto:!0,forced:!FT},{every:function(xe){return ms(this,xe,arguments.length>1?arguments[1]:void 0)}});var Kh=ua("Array").every,im=Array.prototype,Zb=function(pe){var xe=pe.every;return pe===im||sr(im,pe)&&xe===im.every?Kh:xe},$T=function(xe){return Ic(xe)&&sl(xe)=="[object RegExp]"},e0=ep&&ep.isRegExp,jT=e0?Du(e0):$T,DT=function(xe,qe,Oe,Ne){for(var Lt=xe.length,Dt=Oe+(Ne?1:-1);Ne?Dt--:++Dt<Lt;)if(qe(xe[Dt],Dt,xe))return Dt;return-1},UT=function(xe){return xe!=xe},Ku=function(xe,qe,Oe){for(var Ne=Oe-1,Lt=xe.length;++Ne<Lt;)if(xe[Ne]===qe)return Ne;return-1},Qu=function(xe,qe,Oe){return qe==qe?Ku(xe,qe,Oe):DT(xe,UT,Oe)},cp=function(xe,qe){return!!(xe!=null&&xe.length)&&Qu(xe,qe,0)>-1},cm=function(xe,qe,Oe){for(var Ne=-1,Lt=xe==null?0:xe.length;++Ne<Lt;)if(Oe(qe,xe[Ne]))return!0;return!1},lm=function(xe,qe,Oe,Ne){var Lt=-1,Dt=cp,Pt=!0,ir=xe.length,vr=[],Ir=qe.length;if(!ir)return vr;Oe&&(qe=fh(qe,Du(Oe))),Ne?(Dt=cm,Pt=!1):qe.length>=200&&(Dt=Th,Pt=!1,qe=new Wf(qe));e:for(;++Lt<ir;){var Or=xe[Lt],jr=Oe==null?Or:Oe(Or);if(Or=Ne||Or!==0?Or:0,Pt&&jr==jr){for(var Ur=Ir;Ur--;)if(qe[Ur]===jr)continue e;vr.push(Or)}else Dt(qe,jr,Ne)||vr.push(Or)}return vr},t0=function(xe,qe,Oe){switch(Oe.length){case 0:return xe.call(qe);case 1:return xe.call(qe,Oe[0]);case 2:return xe.call(qe,Oe[0],Oe[1]);case 3:return xe.call(qe,Oe[0],Oe[1],Oe[2])}return xe.apply(qe,Oe)},lp=Math.max,um=function(xe,qe,Oe){return qe=lp(qe===void 0?xe.length-1:qe,0),function(){for(var Ne=arguments,Lt=-1,Dt=lp(Ne.length-qe,0),Pt=Array(Dt);++Lt<Dt;)Pt[Lt]=Ne[qe+Lt];Lt=-1;for(var ir=Array(qe+1);++Lt<qe;)ir[Lt]=Ne[Lt];return ir[qe]=Oe(Pt),t0(xe,this,ir)}},r0=function(xe){return function(){return xe}},n0=cl?function(pe,xe){return cl(pe,"toString",{configurable:!0,enumerable:!1,value:r0(xe),writable:!0})}:Uh,o0=Date.now,VT=function(xe){var qe=0,Oe=0;return function(){var Ne=o0(),Lt=16-(Ne-Oe);if(Oe=Ne,Lt>0){if(++qe>=800)return arguments[0]}else qe=0;return xe.apply(void 0,arguments)}},Qh=VT(n0),dm=function(xe,qe){return Qh(um(xe,qe,Uh),xe+"")},Ju=function(xe){return Ic(xe)&&Xf(xe)},qT=dm(function(pe,xe){return Ju(pe)?lm(pe,xe):[]}),Jh=qT,tu=V(function(){if(typeof ArrayBuffer=="function"){var pe=new ArrayBuffer(8);Object.isExtensible(pe)&&Object.defineProperty(pe,"a",{value:8})}}),pm=Object.isExtensible,Yh=V(function(){pm(1)})||tu?function(xe){return!!mr(xe)&&(!tu||nr(xe)!="ArrayBuffer")&&(!pm||pm(xe))}:pm,HT=!V(function(){return Object.isExtensible(Object.preventExtensions({}))}),Yu=g(function(pe){var xe=Ba.f,qe=!1,Oe=Vo("meta"),Ne=0,Lt=function(Pt){xe(Pt,Oe,{value:{objectID:"O"+Ne++,weakData:{}}})},Dt=pe.exports={enable:function(){Dt.enable=function(){},qe=!0;var Pt=vu.f,ir=Ie([].splice),vr={};vr[Oe]=1,Pt(vr).length&&(vu.f=function(Ir){for(var Or=Pt(Ir),jr=0,Ur=Or.length;jr<Ur;jr++)if(Or[jr]===Oe){ir(Or,jr,1);break}return Or},En({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Kg.f}))},fastKey:function(Pt,ir){if(!mr(Pt))return typeof Pt=="symbol"?Pt:(typeof Pt=="string"?"S":"P")+Pt;if(!vn(Pt,Oe)){if(!Yh(Pt))return"F";if(!ir)return"E";Lt(Pt)}return Pt[Oe].objectID},getWeakData:function(Pt,ir){if(!vn(Pt,Oe)){if(!Yh(Pt))return!0;if(!ir)return!1;Lt(Pt)}return Pt[Oe].weakData},onFreeze:function(Pt){return HT&&qe&&Yh(Pt)&&!vn(Pt,Oe)&&Lt(Pt),Pt}};Fi[Oe]=!0}),zT=Ba.f,WT=Mc.forEach,GT=yi.set,KT=yi.getterFor,Xh=function(pe,xe,qe){var Oe,Ne=pe.indexOf("Map")!==-1,Lt=pe.indexOf("Weak")!==-1,Dt=Ne?"set":"add",Pt=$[pe],ir=Pt&&Pt.prototype,vr={};if(kt&&Ve(Pt)&&(Lt||ir.forEach&&!V(function(){new Pt().entries().next()}))){var Ir=(Oe=xe(function(jr,Ur){GT(mg(jr,Ir),{type:pe,collection:new Pt}),Ur!=null&&ia(Ur,jr[Dt],{that:jr,AS_ENTRIES:Ne})})).prototype,Or=KT(pe);WT(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(jr){var Ur=jr=="add"||jr=="set";!(jr in ir)||Lt&&jr=="clear"||Ta(Ir,jr,function(Yr,In){var Mn=Or(this).collection;if(!Ur&&Lt&&!mr(Yr))return jr=="get"&&void 0;var Dn=Mn[jr](Yr===0?0:Yr,In);return Ur?this:Dn})}),Lt||zT(Ir,"size",{configurable:!0,get:function(){return Or(this).collection.size}})}else Oe=qe.getConstructor(xe,pe,Ne,Dt),Yu.enable();return Tc(Oe,pe,!1,!0),vr[pe]=Oe,En({global:!0,forced:!0},vr),Lt||qe.setStrong(Oe,pe,Ne),Oe},Zh=function(pe,xe,qe){for(var Oe in xe)qe&&qe.unsafe&&pe[Oe]?pe[Oe]=xe[Oe]:Zi(pe,Oe,xe[Oe],qe);return pe},QT=Ba.f,a0=Yu.fastKey,s0=yi.set,fm=yi.getterFor,ev={getConstructor:function(pe,xe,qe,Oe){var Ne=pe(function(vr,Ir){mg(vr,Lt),s0(vr,{type:xe,index:ns(null),first:void 0,last:void 0,size:0}),kt||(vr.size=0),pr(Ir)||ia(Ir,vr[Oe],{that:vr,AS_ENTRIES:qe})}),Lt=Ne.prototype,Dt=fm(xe),Pt=function(vr,Ir,Or){var jr,Ur,Yr=Dt(vr),In=ir(vr,Ir);return In?In.value=Or:(Yr.last=In={index:Ur=a0(Ir,!0),key:Ir,value:Or,previous:jr=Yr.last,next:void 0,removed:!1},Yr.first||(Yr.first=In),jr&&(jr.next=In),kt?Yr.size++:vr.size++,Ur!=="F"&&(Yr.index[Ur]=In)),vr},ir=function(vr,Ir){var Or,jr=Dt(vr),Ur=a0(Ir);if(Ur!=="F")return jr.index[Ur];for(Or=jr.first;Or;Or=Or.next)if(Or.key==Ir)return Or};return Zh(Lt,{clear:function(){for(var Ir=Dt(this),Or=Ir.index,jr=Ir.first;jr;)jr.removed=!0,jr.previous&&(jr.previous=jr.previous.next=void 0),delete Or[jr.index],jr=jr.next;Ir.first=Ir.last=void 0,kt?Ir.size=0:this.size=0},delete:function(vr){var Ir=this,Or=Dt(Ir),jr=ir(Ir,vr);if(jr){var Ur=jr.next,Yr=jr.previous;delete Or.index[jr.index],jr.removed=!0,Yr&&(Yr.next=Ur),Ur&&(Ur.previous=Yr),Or.first==jr&&(Or.first=Ur),Or.last==jr&&(Or.last=Yr),kt?Or.size--:Ir.size--}return!!jr},forEach:function(Ir){for(var Or,jr=Dt(this),Ur=Go(Ir,arguments.length>1?arguments[1]:void 0);Or=Or?Or.next:jr.first;)for(Ur(Or.value,Or.key,this);Or&&Or.removed;)Or=Or.previous},has:function(Ir){return!!ir(this,Ir)}}),Zh(Lt,qe?{get:function(Ir){var Or=ir(this,Ir);return Or&&Or.value},set:function(Ir,Or){return Pt(this,Ir===0?0:Ir,Or)}}:{add:function(Ir){return Pt(this,Ir=Ir===0?0:Ir,Ir)}}),kt&&QT(Lt,"size",{get:function(){return Dt(this).size}}),Ne},setStrong:function(pe,xe,qe){var Oe=xe+" Iterator",Ne=fm(xe),Lt=fm(Oe);yo(pe,xe,function(Dt,Pt){s0(this,{type:Oe,target:Dt,state:Ne(Dt),kind:Pt,last:void 0})},function(){for(var Dt=Lt(this),Pt=Dt.kind,ir=Dt.last;ir&&ir.removed;)ir=ir.previous;return Dt.target&&(Dt.last=ir=ir?ir.next:Dt.state.first)?Pt=="keys"?{value:ir.key,done:!1}:Pt=="values"?{value:ir.value,done:!1}:{value:[ir.key,ir.value],done:!1}:(Dt.target=void 0,{value:void 0,done:!0})},qe?"entries":"values",!qe,!0),Yp(xe)}};Xh("Map",function(pe){return function(){return pe(this,arguments.length?arguments[0]:void 0)}},ev);var i0=_r.Map,tv=[].push,c0=function(xe){var qe,Oe,Ne,Lt,Dt=arguments.length,Pt=Dt>1?arguments[1]:void 0;return Zp(this),(qe=Pt!==void 0)&&Xr(Pt),pr(xe)?new this:(Oe=[],qe?(Ne=0,Lt=Go(Pt,Dt>2?arguments[2]:void 0),ia(xe,function(ir){ze(tv,Oe,Lt(ir,Ne++))})):ia(xe,tv,{that:Oe}),new this(Oe))};En({target:"Map",stat:!0,forced:!0},{from:c0});var l0=function(){return new this(Vs(arguments))};En({target:"Map",stat:!0,forced:!0},{of:l0});var u0=function(){for(var xe,qe=po(this),Oe=Xr(qe.delete),Ne=!0,Lt=0,Dt=arguments.length;Lt<Dt;Lt++)xe=ze(Oe,qe,arguments[Lt]),Ne=Ne&&xe;return!!Ne};En({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:u0}),En({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(xe,qe){var Oe,Ne,Lt=po(this),Dt=Xr(Lt.get),Pt=Xr(Lt.has),ir=Xr(Lt.set);return ze(Pt,Lt,xe)?(Oe=ze(Dt,Lt,xe),"update"in qe&&(Oe=qe.update(Oe,xe,Lt),ze(ir,Lt,xe,Oe)),Oe):(Ne=qe.insert(xe,Lt),ze(ir,Lt,xe,Ne),Ne)}});var Gs=Ol;En({target:"Map",proto:!0,real:!0,forced:!0},{every:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return!ia(Oe,function(Lt,Dt,Pt){if(!Ne(Dt,Lt,qe))return Pt()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0),Lt=new(Ui(qe,Er("Map"))),Dt=Xr(Lt.set);return ia(Oe,function(Pt,ir){Ne(ir,Pt,qe)&&ze(Dt,Lt,Pt,ir)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Lt}}),En({target:"Map",proto:!0,real:!0,forced:!0},{find:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(Lt,Dt,Pt){if(Ne(Dt,Lt,qe))return Pt(Dt)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),En({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(Lt,Dt,Pt){if(Ne(Dt,Lt,qe))return Pt(Lt)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var Ks=Ie([].push);En({target:"Map",stat:!0,forced:!0},{groupBy:function(xe,qe){Xr(qe);var Oe=Ol(xe),Ne=new this,Lt=Xr(Ne.has),Dt=Xr(Ne.get),Pt=Xr(Ne.set);return ia(Oe,function(ir){var vr=qe(ir);ze(Lt,Ne,vr)?Ks(ze(Dt,Ne,vr),ir):ze(Pt,Ne,vr,[ir])},{IS_ITERATOR:!0}),Ne}}),En({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(xe){return ia(Gs(po(this)),function(qe,Oe,Ne){if((Lt=Oe)===(Dt=xe)||Lt!=Lt&&Dt!=Dt)return Ne();var Lt,Dt},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Map",stat:!0,forced:!0},{keyBy:function(xe,qe){var Oe=new this;Xr(qe);var Ne=Xr(Oe.set);return ia(xe,function(Lt){ze(Ne,Oe,qe(Lt),Lt)}),Oe}}),En({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(xe){return ia(Gs(po(this)),function(qe,Oe,Ne){if(Oe===xe)return Ne(qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),En({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0),Lt=new(Ui(qe,Er("Map"))),Dt=Xr(Lt.set);return ia(Oe,function(Pt,ir){ze(Dt,Lt,Ne(ir,Pt,qe),ir)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Lt}}),En({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0),Lt=new(Ui(qe,Er("Map"))),Dt=Xr(Lt.set);return ia(Oe,function(Pt,ir){ze(Dt,Lt,Pt,Ne(ir,Pt,qe))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Lt}}),En({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(xe){for(var qe=po(this),Oe=Xr(qe.set),Ne=arguments.length,Lt=0;Lt<Ne;)ia(arguments[Lt++],Oe,{that:qe,AS_ENTRIES:!0});return qe}});var JT=TypeError;En({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(xe){var qe=po(this),Oe=Gs(qe),Ne=arguments.length<2,Lt=Ne?void 0:arguments[1];if(Xr(xe),ia(Oe,function(Dt,Pt){Ne?(Ne=!1,Lt=Pt):Lt=xe(Lt,Pt,Dt,qe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Ne)throw JT("Reduce of empty map with no initial value");return Lt}}),En({target:"Map",proto:!0,real:!0,forced:!0},{some:function(xe){var qe=po(this),Oe=Gs(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(Lt,Dt,Pt){if(Ne(Dt,Lt,qe))return Pt()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var rv=TypeError;En({target:"Map",proto:!0,real:!0,forced:!0},{update:function(xe,qe){var Oe=po(this),Ne=Xr(Oe.get),Lt=Xr(Oe.has),Dt=Xr(Oe.set),Pt=arguments.length;Xr(qe);var ir=ze(Lt,Oe,xe);if(!ir&&Pt<3)throw rv("Updating absent value");var vr=ir?ze(Ne,Oe,xe):Xr(Pt>2?arguments[2]:void 0)(xe,Oe);return ze(Dt,Oe,xe,qe(vr,xe,Oe)),Oe}});var mm=TypeError,nv=function(xe,qe){var Oe,Ne=po(this),Lt=Xr(Ne.get),Dt=Xr(Ne.has),Pt=Xr(Ne.set),ir=arguments.length>2?arguments[2]:void 0;if(!Ve(qe)&&!Ve(ir))throw mm("At least one callback required");return ze(Dt,Ne,xe)?(Oe=ze(Lt,Ne,xe),Ve(qe)&&(Oe=qe(Oe),ze(Pt,Ne,xe,Oe))):Ve(ir)&&(Oe=ir(),ze(Pt,Ne,xe,Oe)),Oe};En({target:"Map",proto:!0,real:!0,forced:!0},{upsert:nv}),En({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:nv});var Xu=i0,ov=g(function(pe){function xe(qe){var Oe;return pe.exports=xe=ci?oa(Oe=zl).call(Oe):function(Lt){return Lt.__proto__||zl(Lt)},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),d0=g(function(pe){pe.exports=function(qe){var Oe;return ta(Oe=Function.toString.call(qe)).call(Oe,"[native code]")!==-1},pe.exports.__esModule=!0,pe.exports.default=pe.exports}),jo=Er("Reflect","construct"),YT=Object.prototype,Zu=[].push,p0=V(function(){function pe(){}return!(jo(function(){},[],pe)instanceof pe)}),f0=!V(function(){jo(function(){})}),up=p0||f0;En({target:"Reflect",stat:!0,forced:up,sham:up},{construct:function(xe,qe){Zp(xe),po(qe);var Oe=arguments.length<3?xe:Zp(arguments[2]);if(f0&&!p0)return jo(xe,qe,Oe);if(xe==Oe){switch(qe.length){case 0:return new xe;case 1:return new xe(qe[0]);case 2:return new xe(qe[0],qe[1]);case 3:return new xe(qe[0],qe[1],qe[2]);case 4:return new xe(qe[0],qe[1],qe[2],qe[3])}var Ne=[null];return ue(Zu,Ne,qe),new(ue(vd,xe,Ne))}var Lt=Oe.prototype,Dt=ns(mr(Lt)?Lt:YT),Pt=ue(xe,Dt,qe);return mr(Pt)?Pt:Dt}});var Gi=_r.Reflect.construct,m0=g(function(pe){pe.exports=function(){if(typeof Reflect>"u"||!Gi||Gi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Gi(Boolean,[],function(){})),!0}catch{return!1}},pe.exports.__esModule=!0,pe.exports.default=pe.exports}),XT=g(function(pe){function xe(qe,Oe,Ne){var Lt;return m0()?(pe.exports=xe=oa(Lt=Gi).call(Lt),pe.exports.__esModule=!0,pe.exports.default=pe.exports):(pe.exports=xe=function(Pt,ir,vr){var Ir=[null];Ir.push.apply(Ir,ir);var Or=new(oa(Function).apply(Pt,Ir));return vr&&bd(Or,vr.prototype),Or},pe.exports.__esModule=!0,pe.exports.default=pe.exports),xe.apply(null,arguments)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),ZT=g(function(pe){function xe(qe){var Oe=typeof Xu=="function"?new Xu:void 0;return pe.exports=xe=function(Lt){if(Lt===null||!d0(Lt))return Lt;if(typeof Lt!="function")throw new TypeError("Super expression must either be null or a function");if(Oe!==void 0){if(Oe.has(Lt))return Oe.get(Lt);Oe.set(Lt,Dt)}function Dt(){return XT(Lt,arguments,ov(this).constructor)}return Dt.prototype=ii(Lt.prototype,{constructor:{value:Dt,enumerable:!1,writable:!0,configurable:!0}}),bd(Dt,Lt)},pe.exports.__esModule=!0,pe.exports.default=pe.exports,xe(qe)}pe.exports=xe,pe.exports.__esModule=!0,pe.exports.default=pe.exports}),g0=n(ZT),Ao=function(pe){function xe(qe,Oe,Ne){var Lt;return Oe===void 0&&(Oe={}),Ne===void 0&&(Ne=400),(Lt=pe.call(this,qe)||this).data=Oe,Lt.code=Ne,Lt.name="customError",Lt}return ra(xe,pe),xe}(g0(Error)),ru=function(pe){function xe(qe,Oe,Ne){var Lt;return Oe===void 0&&(Oe={}),(Lt=pe.call(this,qe,Oe,414)||this).code=414,Lt.name="validateError",Lt.rules=Ne,Lt}return ra(xe,pe),xe}(Ao),gm={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},ll=function(pe){function xe(qe,Oe,Ne,Lt,Dt){var Pt;return Ne===void 0&&(Ne=""),Lt===void 0&&(Lt=new Date().getTime()),Dt===void 0&&(Dt={}),Ne=Ne||gm[qe],(Pt=pe.call(this,Ne,Dt,qe)||this).name="cmdError",Pt.cmd=Oe,Pt.timetag=Lt,Pt}return ra(xe,pe),xe}(Ao),h0=function(pe){function xe(qe,Oe,Ne){var Lt;return(Lt=pe.call(this,qe,{},412)||this).code=412,Lt.name="formatError",Lt.key=Oe,Lt.reason=Ne,Lt}return ra(xe,pe),xe}(Ao),ul=function(pe){function xe(qe,Oe,Ne,Lt,Dt){var Pt;return(Pt=pe.call(this,qe,{file:Dt},400)||this).name="uploadError",Pt.rawError=Oe,Pt.curProvider=Ne||1,Pt.mixStorePolicy=Lt,Pt}return ra(xe,pe),xe}(Ao);function eC(pe,xe){return xe instanceof RegExp?"__REGEXP "+xe.toString():xe}function jn(pe,xe,qe){var Oe;xe===void 0&&(xe={});var Ne={};return bo(Oe=ba(pe)).call(Oe,function(Lt){var Dt=pe[Lt].type,Pt=qe?"In "+qe+", ":"";if(xe[Lt]===void 0){if(pe[Lt].required===!1)return void(Ne[Lt]=xe[Lt]);throw new ru(Pt+'param "'+Lt+'" is required',{key:Lt},"required")}var ir=tC[Dt];if(ir&&!ir(xe,Lt,pe[Lt]))throw new ru(Pt+'param "'+Lt+'" expects '+Io(pe[Lt],eC),{key:Lt,value:xe[Lt]},Io(pe[Lt]));Ne[Lt]=xe[Lt]}),Ne}var tC={string:function(xe,qe,Oe){var Ne=Oe.allowEmpty,Lt=Oe.max,Dt=Oe.min,Pt=Oe.regExp,ir=xe[qe];return typeof ir=="string"&&(Ne!==!1||ir!=="")&&!(typeof Lt=="number"&&ir.length>Lt)&&!(typeof Dt=="number"&&ir.length<Dt)&&!(jT(Pt)&&!Pt.test(ir))},number:function(xe,qe,Oe){var Ne=Oe.min,Lt=Oe.max,Dt=xe[qe];return typeof Dt=="number"&&!(typeof Ne=="number"&&Dt<Ne)&&!(typeof Lt=="number"&&Dt>Lt)},boolean:function(xe,qe){return typeof xe[qe]=="boolean"},enum:function(xe,qe,Oe){var Ne=eu(Oe),Lt=xe[qe];return!Ne||ta(Ne).call(Ne,Lt)>-1},array:function(xe,qe,Oe){var Ne,Lt=Oe.itemType,Dt=Oe.rules,Pt=Oe.min,ir=Oe.max,vr=eu(Oe),Ir=xe[qe];return!!Ts(Ir)&&!(typeof ir=="number"&&Ir.length>ir)&&!(typeof Pt=="number"&&Ir.length<Pt)&&!(Lt&&Lt!=="enum"&&!Zb(Ir).call(Ir,function(Or){return typeof Or===Lt}))&&(Lt!=="enum"||!vr||!Jh.apply(void 0,Hs(Ne=[Ir]).call(Ne,vr)).length)&&(Dt&&bo(Ir).call(Ir,function(Or,jr){return jn(Dt,Or,qe+"["+jr+"]")}),!0)},object:function(xe,qe,Oe){var Ne=Oe.rules,Lt=xe[qe];return Ne&&jn(Ne,Lt,qe),!0}},hm=function(xe,qe,Oe){(Oe!==void 0&&!Jd(xe[qe],Oe)||Oe===void 0&&!(qe in xe))&&lc(xe,qe,Oe)},av=function(xe){return function(qe,Oe,Ne){for(var Lt=-1,Dt=Object(qe),Pt=Ne(qe),ir=Pt.length;ir--;){var vr=Pt[xe?ir:++Lt];if(Oe(Dt[vr],vr,Dt)===!1)break}return qe}}(),sv=g(function(pe,xe){var qe=xe&&!xe.nodeType&&xe,Oe=qe&&pe&&!pe.nodeType&&pe,Ne=Oe&&Oe.exports===qe?zi.Buffer:void 0,Lt=Ne?Ne.allocUnsafe:void 0;pe.exports=function(Pt,ir){if(ir)return Pt.slice();var vr=Pt.length,Ir=Lt?Lt(vr):new Pt.constructor(vr);return Pt.copy(Ir),Ir}}),v0=function(xe){var qe=new xe.constructor(xe.byteLength);return new Gf(qe).set(new Gf(xe)),qe},rC=function(xe,qe){var Oe=qe?v0(xe.buffer):xe.buffer;return new xe.constructor(Oe,xe.byteOffset,xe.length)},uc=function(xe,qe){var Oe=-1,Ne=xe.length;for(qe||(qe=Array(Ne));++Oe<Ne;)qe[Oe]=xe[Oe];return qe},y0=Object.create,nC=function(){function pe(){}return function(xe){if(!oi(xe))return{};if(y0)return y0(xe);pe.prototype=xe;var qe=new pe;return pe.prototype=void 0,qe}}(),oC=function(xe){return typeof xe.constructor!="function"||Ah(xe)?{}:nC(Hh(xe))},iv=Function.prototype,aC=Object.prototype,b0=iv.toString,S0=aC.hasOwnProperty,sC=b0.call(Object),dp=function(xe){if(!Ic(xe)||sl(xe)!="[object Object]")return!1;var qe=Hh(xe);if(qe===null)return!0;var Oe=S0.call(qe,"constructor")&&qe.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&b0.call(Oe)==sC},cv=function(xe,qe){if((qe!=="constructor"||typeof xe[qe]!="function")&&qe!="__proto__")return xe[qe]},T0=function(xe,qe,Oe,Ne){var Lt=!Oe;Oe||(Oe={});for(var Dt=-1,Pt=qe.length;++Dt<Pt;){var ir=qe[Dt],vr=Ne?Ne(Oe[ir],xe[ir],ir,Oe,xe):void 0;vr===void 0&&(vr=xe[ir]),Lt?lc(Oe,ir,vr):sm(Oe,ir,vr)}return Oe},iC=function(xe){return T0(xe,Wu(xe))},Xn=function(xe,qe,Oe,Ne,Lt,Dt,Pt){var ir=cv(xe,Oe),vr=cv(qe,Oe),Ir=Pt.get(vr);if(Ir)hm(xe,Oe,Ir);else{var Or=Dt?Dt(ir,vr,Oe+"",xe,qe,Pt):void 0,jr=Or===void 0;if(jr){var Ur=Mi(vr),Yr=!Ur&&ki(vr),In=!Ur&&!Yr&&Eh(vr);Or=vr,Ur||Yr||In?Mi(ir)?Or=ir:Ju(ir)?Or=uc(ir):Yr?(jr=!1,Or=sv(vr,!0)):In?(jr=!1,Or=rC(vr,!0)):Or=[]:dp(vr)||ju(vr)?(Or=ir,ju(ir)?Or=iC(ir):oi(ir)&&!gh(ir)||(Or=oC(vr))):jr=!1}jr&&(Pt.set(vr,Or),Lt(Or,vr,Ne,Dt,Pt),Pt.delete(vr)),hm(xe,Oe,Or)}},Cs=function pe(xe,qe,Oe,Ne,Lt){xe!==qe&&av(qe,function(Dt,Pt){if(Lt||(Lt=new $u),oi(Dt))Xn(xe,qe,Pt,Oe,pe,Ne,Lt);else{var ir=Ne?Ne(cv(xe,Pt),Dt,Pt+"",xe,qe,Lt):void 0;ir===void 0&&(ir=Dt),hm(xe,Pt,ir)}},Wu)},C0=function(xe,qe,Oe){if(!oi(Oe))return!1;var Ne=typeof qe;return!!(Ne=="number"?Xf(Oe)&&Jf(qe,Oe.length):Ne=="string"&&qe in Oe)&&Jd(Oe[qe],xe)},nu,Qs,M0=function(xe){return dm(function(qe,Oe){var Ne=-1,Lt=Oe.length,Dt=Lt>1?Oe[Lt-1]:void 0,Pt=Lt>2?Oe[2]:void 0;for(Dt=xe.length>3&&typeof Dt=="function"?(Lt--,Dt):void 0,Pt&&C0(Oe[0],Oe[1],Pt)&&(Dt=Lt<3?void 0:Dt,Lt=1),qe=Object(qe);++Ne<Lt;){var ir=Oe[Ne];ir&&xe(qe,ir,Ne,Dt)}return qe})},cC=M0(function(pe,xe,qe){Cs(pe,xe,qe)});(function(pe){pe[pe.Unset=0]="Unset",pe[pe.RN=2]="RN",pe[pe.UNIAPP=3]="UNIAPP",pe[pe.Electron=5]="Electron",pe[pe.WeiXin=6]="WeiXin",pe[pe.BROWSER=100]="BROWSER",pe[pe.H5=101]="H5",pe[pe.Ali=102]="Ali",pe[pe.Baidu=103]="Baidu",pe[pe.Tiktok=104]="Tiktok"})(nu||(nu={})),function(pe){pe[pe.kStatNetTypeUnkonw=0]="kStatNetTypeUnkonw",pe[pe.kStatNetTypeEthernet=1]="kStatNetTypeEthernet",pe[pe.kStatNetTypeWifi=2]="kStatNetTypeWifi",pe[pe.kStatNetType2G=3]="kStatNetType2G",pe[pe.kStatNetType3G=4]="kStatNetType3G",pe[pe.kStatNetType4G=5]="kStatNetType4G",pe[pe.kStatNetType5G=6]="kStatNetType5G"}(Qs||(Qs={}));var lv={wifi:Qs.kStatNetTypeWifi,"2g":Qs.kStatNetType2G,"3g":Qs.kStatNetType3G,"4g":Qs.kStatNetType4G,"5g":Qs.kStatNetType5G,ethernet:Qs.kStatNetTypeEthernet,unknown:Qs.kStatNetTypeUnkonw,none:Qs.kStatNetTypeUnkonw,notreachable:Qs.kStatNetTypeUnkonw,wwan:Qs.kStatNetTypeUnkonw};function k0(){if(!navigator||!navigator.userAgent)return!1;var pe=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return Kd(pe).call(pe,function(xe){return navigator.userAgent.match(xe)})}function uv(){var pe;return!(!navigator||!navigator.userAgent)&&typeof navigator=="object"&&typeof navigator.userAgent=="string"&&ta(pe=navigator.userAgent).call(pe,"Electron")>=0}function dc(){return navigator&&navigator.userAgent}var Jo={setLogger:function(xe){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function pe(qe,Oe){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var xe=pe.prototype;return xe.close=function(Oe,Ne){throw new Error("Method not implemented.")},xe.send=function(Oe){throw new Error("Method not implemented.")},xe.onclose=function(Oe){throw new Error("Method not implemented.")},xe.onerror=function(Oe){throw new Error("Method not implemented.")},xe.onmessage=function(Oe){throw new Error("Method not implemented.")},xe.onopen=function(Oe){throw new Error("Method not implemented.")},pe}(),localStorage:{},request:function(xe,qe){throw new Error("Function not implemented.")},uploadFile:function(xe){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")},net:{__getEnv:function(){return null},__onNetworkStatusChangeFn:null,getNetworkStatus:function(){var xe=this.__getEnv();return new ca(function(qe,Oe){xe.getNetworkType({success:function(Lt){var Dt=!1;Dt=typeof Lt.networkAvailable=="boolean"?Lt.networkAvailable:Lt.networkType.toLowerCase()!=="none",qe({net_type:lv[Lt.networkType.toLowerCase()],net_connect:Dt})},fail:function(){Oe(new Error("getNetworkType failed"))}})})},onNetworkStatusChange:function(xe){var qe=this.__getEnv();this.offNetworkStatusChange(),qe.onNetworkStatusChange&&(this.__onNetworkStatusChangeFn=function(Oe){var Ne=Oe.networkType.toLowerCase();xe({isConnected:Oe.isConnected||Ne!=="none",networkType:lv[Ne]})},qe.onNetworkStatusChange(this.__onNetworkStatusChangeFn))},offNetworkStatusChange:function(){var xe=this.__getEnv();xe.offNetworkStatusChange&&(this.__onNetworkStatusChangeFn&&xe.offNetworkStatusChange(this.__onNetworkStatusChangeFn),this.__onNetworkStatusChangeFn=null)}}},pc=Mc.map,w0=oc("map");En({target:"Array",proto:!0,forced:!w0},{map:function(xe){return pc(this,xe,arguments.length>1?arguments[1]:void 0)}});var _i=ua("Array").map,pp=Array.prototype,Fo=function(pe){var xe=pe.map;return pe===pp||sr(pp,pe)&&xe===pp.map?_i:xe},lC=TypeError,_0=function(pe){return function(xe,qe,Oe,Ne){Xr(qe);var Lt=Pn(xe),Dt=gr(Lt),Pt=rs(Lt),ir=pe?Pt-1:0,vr=pe?-1:1;if(Oe<2)for(;;){if(ir in Dt){Ne=Dt[ir],ir+=vr;break}if(ir+=vr,pe?ir<0:Pt<=ir)throw lC("Reduce of empty array with no initial value")}for(;pe?ir>=0:Pt>ir;ir+=vr)ir in Dt&&(Ne=qe(Ne,Dt[ir],ir,Lt));return Ne}},uC={left:_0(!1),right:_0(!0)}.left,dC=Ul("reduce");En({target:"Array",proto:!0,forced:!dC||!tc&&Br>79&&Br<83},{reduce:function(xe){var qe=arguments.length;return uC(this,xe,qe,qe>1?arguments[1]:void 0)}});var vm=ua("Array").reduce,dv=Array.prototype,ed=function(pe){var xe=pe.reduce;return pe===dv||sr(dv,pe)&&xe===dv.reduce?vm:xe},x0=function(xe){return xe===void 0},ym={},fp={};function pv(pe,xe){var qe,Oe,Ne;try{Ne=JSON.parse(pe)}catch(Ur){throw xe.error("Parse command error: ",pe),Ur}var Lt=Ne.sid+"_"+Ne.cid,Dt=Ne.r;if(Ci(qe=["4_1","4_2","4_10","4_11"]).call(qe,Lt)){var Pt=Ne.r[1].headerPacket;Lt=Pt.sid+"_"+Pt.cid,Dt=Ne.r[1].body}var ir,vr=fp[Lt],Ir=ym[vr],Or=function(Yr,In){var Mn=gm[Yr];return Mn===null?null:new ll(Yr,In,Mn,new Date().getTime())}(Ne.code,vr),jr={cmd:vr,raw:Ne,error:Or,service:Ir==null?void 0:Ir.service,content:{}};if(jr.error){if(jr.error.cmd=vr,jr.error.callFunc="parseCmd",!(!((Oe=Ir==null?void 0:Ir.ignoreErrCodes)===null||Oe===void 0)&&Ci(Oe).call(Oe,Ne.code)))return jr;xe.warn("parseCmd:: ignore error ",jr.error),jr.error.ignore=!0}return!vr||!Ir?(jr.notFound=!0,jr):(Ir.response&&bo(ir=Ir.response).call(ir,function(Ur,Yr){var In=Dt[Yr],Mn=Ur.type,Dn=Ur.name,Wn=Ur.reflectMapper;if(!x0(In))switch(Mn){case"Property":jr.content[Dn]=Wn?ds(In,Wn):In;break;case"PropertyArray":jr.content[Dn]=Fo(In).call(In,function(Jn){return Wn?ds(Jn,Wn):Jn});break;case"long":case"Long":case"byte":case"Byte":case"Number":jr.content[Dn]=+In;break;default:jr.content[Dn]=In}}),jr)}function I0(pe,xe){var qe={};for(var Oe in pe)xe[Oe]!==void 0&&(qe[xe[Oe]]=pe[Oe]);return qe}function ds(pe,xe){var qe={};for(var Oe in pe)xe[Oe]!==void 0&&(qe[xe[Oe]]=pe[Oe]);return qe}function ou(pe){ym=zn(ym,pe.cmdConfig),fp=zn(fp,pe.cmdMap)}function Ki(pe){var xe;return ed(xe=ba(pe)).call(xe,function(qe,Oe){var Ne,Lt=pe[Oe];return qe[Oe]=ed(Ne=ba(Lt)).call(Ne,function(Dt,Pt){return Dt[Lt[Pt]]=Pt,Dt},{}),qe},{})}var Is,fc,E0={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},mp={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},au=Ki(mp),pC={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:au.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:mp.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:au.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:mp.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:au.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:au.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:au.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:mp.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:au.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:mp.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:au.mixStoreAuthTokenResTag}]}},P0={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},fC={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};(function(pe){pe[pe.nos=1]="nos",pe[pe.s3=2]="s3"})(Is||(Is={})),function(pe){pe[pe.dontNeed=-1]="dontNeed",pe[pe.time=2]="time",pe[pe.urls=3]="urls"}(fc||(fc={}));var fv={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0};function A0(pe){return pe===void 0&&(pe="file"),Io(P0[pe]||{}).replace(/"/gi,'\\"')}var bm=function(){function pe(qe,Oe){Oe===void 0&&(Oe={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Is.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=qe.logger,this.core=qe,ou({cmdMap:E0,cmdConfig:pC}),this.setOptions(Oe)}var xe=pe.prototype;return xe.setOptions=function(Oe){Oe===void 0&&(Oe={});var Ne=Oe.storageKeyPrefix||"NIMClient";this.GRAYKEY=Ne+"-AllGrayscaleConfig",this.MIXSTOREKEY=Ne+"-AllMixStorePolicy";var Lt=Oe.s3,Dt=Qd(Oe,["s3"]),Pt=zn({},fv,this.config);if(Dt&&Object.prototype.hasOwnProperty.call(Dt,"cdn")){var ir={cdn:zn(zn({},Pt.cdn),Dt.cdn)};this.config=zn({},Pt,Dt,ir)}else this.config=zn({},Pt,Dt);Lt&&(this.s3=Lt)},xe.init=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){return Dr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Is.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){Lt.next=9;break}return Lt.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return Lt.next=9,this.getNosCdnHost();case 9:case"end":return Lt.stop()}},Oe,this)}))},xe.processCallback=function(Oe){var Ne=this,Lt=Oe.onUploadProgress,Dt=Oe.onUploadDone,Pt=Oe.onUploadStart;return{onUploadStart:typeof Pt=="function"?function(ir){try{Pt(ir)}catch(vr){Ne.logger.error("CloudStorage::uploadFile:options.onUploadStart execute error",vr)}}:function(){},onUploadProgress:typeof Lt=="function"?function(ir){try{Lt(ir)}catch(vr){Ne.logger.error("CloudStorage::uploadFile:options.onUploadProgress execute error",vr)}}:function(){},onUploadDone:typeof Dt=="function"?function(ir){try{Dt(ir)}catch(vr){Ne.logger.error("CloudStorage::uploadFile:options.onUploadDone execute error",vr)}}:function(){}}},xe.uploadFile=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(jn({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},Oe),Oe.fileInput||Oe.file||Oe.filePath){jr.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!Oe.type||Oe.type==="file"){jr.next=7;break}if(typeof(Lt=us(Oe,"file.type"))!="string"||ta(Lt).call(Lt,Oe.type)!==-1){jr.next=7;break}throw new Error('The meta type "'+Lt+'" does not match "'+Oe.type+'"');case 7:return Dt=this.processCallback(Oe),Pt=Dt.onUploadStart,ir=Dt.onUploadProgress,vr=Dt.onUploadDone,Oe.onUploadStart=Pt,Oe.onUploadProgress=ir,Oe.onUploadDone=vr,jr.next=13,this._uploadFile(Oe);case 13:return(Ir=jr.sent).url=decodeURIComponent(Ir.url),Oe.onUploadDone({size:Ir.size,name:Ir.name,url:Ir.url,ext:Ir.name.split(".")[1]||"unknown"}),jr.abrupt("return",Ir);case 17:case"end":return jr.stop()}},Ne,this)}))},xe._uploadFile=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){ir.next=3;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),ir.abrupt("return",this.nosUpload(Oe));case 3:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=Is.nos),Lt=fC,ir.prev=6,ir.next=9,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:A0(Oe.type)}});case 9:Dt=ir.sent,Lt=Dt.content.mixStoreTokenResTag,ir.next=17;break;case 13:throw ir.prev=13,ir.t0=ir.catch(6),this.core.logger.error("uploadFile:: getMixStoreToken error",ir.t0),new ul("getMixStoreToken error",ir.t0,this.curProvider,this.mixStorePolicy);case 17:return ir.abrupt("return",this.curProvider===Is.s3?this.s3Upload(Oe,Lt):this.nosUpload(Oe,Lt));case 18:case"end":return ir.stop()}},Ne,this,[[6,13]])}))},xe.nosUpload=function(Oe,Ne){var Lt,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir,vr,Ir,Or,jr,Ur,Yr,In,Mn,Dn,Wn,Jn,Fn,go,Bo;return Dr.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(ir=us(this.core,"config.cdn.bucket"),vr={tag:Oe.nosScenes||ir||"nim",expireSec:Oe.nosSurvivalTime},Ne){Bn.next=13;break}return Bn.prev=3,Bn.next=6,this.core.sendCmd("getNosToken",{responseBody:A0(Oe.type),nosToken:vr});case 6:Ir=Bn.sent,Bn.next=13;break;case 9:throw Bn.prev=9,Bn.t0=Bn.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Bn.t0),new ul("getNosToken error",Bn.t0,1);case 13:return Or=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",Ir?Ir.content.nosToken.objectName:Ne==null?void 0:Ne.objectName),jr="",Ne&&Ne.shortUrl&&(jr=Ne.shortUrl),Ur=jr||Or,Bn.prev=17,In=Ir?Ir.content.nosToken:Ne,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:In,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:Jo.platform}),Bn.next=22,this.core.adapters.uploadFile(zn(zn({},Oe),{nosToken:In,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:Oe.maxSize||this.config.chunkMaxSize}));case 22:Yr=Bn.sent,Bn.next=48;break;case 25:if(Bn.prev=25,Bn.t1=Bn.catch(17),this.core.logger.error("uploadFile::nos uploadFile error",Bn.t1),us(Bn.t1,"errCode")!==10499){Bn.next=30;break}throw new ul(us(Bn.t1,"message")||"Request abort",Bn.t1,1);case 30:if(!Ne){Bn.next=47;break}if(this.nosErrorCount!==0){Bn.next=43;break}Bn.prev=32,this._addCircuitTimer(),Bn.next=39;break;case 36:throw Bn.prev=36,Bn.t2=Bn.catch(32),new ul("upload file error",Bn.t2,this.curProvider,this.mixStorePolicy,Oe.file||Oe.filePath);case 39:return this.nosErrorCount=(Lt=this.mixStorePolicy.nosPolicy)===null||Lt===void 0?void 0:Lt.uploadConfig.retryPolicy.retry,Bn.abrupt("return",this._uploadFile(Oe));case 43:return this.nosErrorCount--,Bn.abrupt("return",this.nosUpload(Oe,Ne));case 45:Bn.next=48;break;case 47:throw new ul("nos uploadFile error",Bn.t1,1);case 48:if(Mn=Yr==null?void 0:Yr.type,Dn=Mn&&ta(Mn).call(Mn,"/")>-1?Da(Mn).call(Mn,0,ta(Mn).call(Mn,"/")):"",(Wn={image:"imageInfo",video:"vinfo",audio:"vinfo"})[Dn]){Bn.next=53;break}return Bn.abrupt("return",zn({url:Ur},Yr));case 53:return Bn.prev=53,Bn.next=56,this.core.adapters.request(Or+"?"+Wn[Dn],{method:"GET",dataType:"json",timeout:5e3},{exception_service:3});case 56:Jn=Bn.sent,Bn.next=63;break;case 59:return Bn.prev=59,Bn.t3=Bn.catch(53),this.core.logger.error("uploadFile:: fetch file info error",Bn.t3),Bn.abrupt("return",zn({url:Ur},Yr));case 63:if(!Jn){Bn.next=70;break}return Fn=Jn.data,go=Wn[Dn]==="imageInfo"?Fn:(Dt=Fn==null?void 0:Fn.GetVideoInfo)===null||Dt===void 0?void 0:Dt.VideoInfo,Bo={url:Ur,name:Yr.name,size:Yr.size,ext:Yr.ext,w:go.Width,h:go.Height,orientation:go.Orientation,dur:go.Duration,audioCodec:go.AudioCodec,videoCodec:go.VideoCodec,container:go.Container},Bn.abrupt("return",BT(Bo,function(zr,eo){return eo!==void 0}));case 70:return Bn.abrupt("return",zn({url:Ur},Yr));case 71:case"end":return Bn.stop()}},Pt,this,[[3,9],[17,25],[32,36],[53,59]])}))},xe.getNosCdnHost=function(){var Oe;return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir=this;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return Ir.prev=0,Ir.next=3,this.core.sendCmd("getNosCdnHost");case 3:Lt=Ir.sent,Ir.next=10;break;case 6:return Ir.prev=6,Ir.t0=Ir.catch(0),this.logger.error("getNosCdnHost::error",Ir.t0),Ir.abrupt("return");case 10:if(Lt){Ir.next=12;break}return Ir.abrupt("return");case 12:Dt=(Oe=Lt==null?void 0:Lt.content)===null||Oe===void 0?void 0:Oe.nosConfigTag,(Pt=ma(Dt==null?void 0:Dt.expire))!==0&&Dt.cdnDomain?Pt===-1?(this.config.cdn.bucket=Dt.bucket,this.config.cdn.cdnDomain=Dt.cdnDomain,this.config.cdn.objectNamePrefix=Dt.objectNamePrefix):(this.config.cdn.bucket=Dt.bucket,this.config.cdn.cdnDomain=Dt.cdnDomain,this.config.cdn.objectNamePrefix=Dt.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){ir.getNosCdnHost()},1e3*Pt)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return Ir.stop()}},Ne,this,[[0,6]])}))},xe.getGrayscaleConfig=function(Oe){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(Jo.localStorage)try{Jo.localStorage.getItem&&Jo.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(Jo.localStorage.getItem(this.GRAYKEY))[Oe])}catch(Ir){Jo.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",Ir)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){vr.next=17;break}return vr.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(Dt=vr.sent).content||!Dt.content.grayConfigTag){vr.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(Dt.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(Dt.content.grayConfigTag.ttl)}catch(Ir){this.logger.error("getGrayscaleConfig error",Ir)}if(this.grayConfig){vr.next=10;break}return vr.abrupt("return");case 10:Pt=Jo.localStorage.getItem(this.GRAYKEY)?JSON.parse(Jo.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),Pt[Oe]=this.grayConfig,Jo.localStorage.setItem(this.GRAYKEY,Io(Pt)),vr.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",Dt.content);case 17:if(!(!((Ne=this.grayConfig)===null||Ne===void 0)&&Ne.mixStoreEnable)){vr.next=20;break}return vr.next=20,this._getMixStorePolicy(Oe);case 20:case"end":return vr.stop()}},Lt,this)}))},xe._getMixStorePolicy=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(Lt=new Date().getTime(),Jo.localStorage)try{this.mixStorePolicy=JSON.parse(Jo.localStorage.getItem(this.MIXSTOREKEY))[Oe],this.curProvider=ma(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>Lt&&(Pt=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-Lt,this.core.timerManager.addTimer(oa(Dt=this._getMixStorePolicy).call(Dt,this,Oe),Pt))}catch(Yr){Jo.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(Jo.localStorage.getItem(this.MIXSTOREKEY))[Oe]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Yr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=Lt)){Ur.next=30;break}return Ur.prev=3,Ur.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:vr=Ur.sent,Ir=vr.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(Ir.ttl),this.mixStorePolicy.providers=Ir.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=ma(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=Ir.nosPolicy?JSON.parse(Ir.nosPolicy):null,this.mixStorePolicy.s3Policy=Ir.s3Policy?JSON.parse(Ir.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(oa(ir=this._getMixStorePolicy).call(ir,this,Oe),1e3*this.mixStorePolicy.ttl),Or=Jo.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(Jo.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),Or[Oe]=this.mixStorePolicy,Jo.localStorage.setItem(this.MIXSTOREKEY,Io(Or)),Ur.next=30;break;case 23:if(Ur.prev=23,Ur.t0=Ur.catch(3),this.logger.error("getMixStorePolicy error",Ur.t0),this.mixStoreErrorCount!==0){Ur.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy(Oe),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Ur.stop()}},Ne,this,[[3,23]])}))},xe.s3Upload=function(Oe,Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir,Or,jr,Ur,Yr,In,Mn=this;return Dr.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(!Oe.file){Wn.next=4;break}Dt=Oe.file,Wn.next=19;break;case 4:if(typeof Oe.fileInput!="string"){Wn.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((Pt=document.getElementById(Oe.fileInput))&&Pt.files&&Pt.files[0])){Wn.next=11;break}Dt=Pt.files[0],Wn.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:Wn.next=19;break;case 14:if(!(Oe.fileInput&&Oe.fileInput.files&&Oe.fileInput.files[0])){Wn.next=18;break}Dt=Oe.fileInput.files[0],Wn.next=19;break;case 18:throw new Error("Can not get file from fileInput "+Oe.fileInput);case 19:if(this.mixStorePolicy.s3Policy){Wn.next=21;break}throw new Error("dont get s3 policy");case 21:return ir={accessKeyId:Ne.accessKeyId,secretAccessKey:Ne.secretAccessKey,sessionToken:Ne.sessionToken,region:Ne.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},vr=this.s3,(Ir=new vr).config.update(ir),Or=decodeURIComponent(Ne.bucket),jr=decodeURIComponent(Ne.objectName),Yr={Bucket:Or,Key:jr,Body:Ur=Dt,Metadata:{token:Ne.token},ContentType:Ur.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Yr),(In=Ir.upload(Yr)).on("httpUploadProgress",function(Jn){var Fn=ch((Jn.loaded/Jn.total).toFixed(2));Oe.onUploadProgress&&Oe.onUploadProgress({total:Jn.total,loaded:Jn.loaded,percentage:Fn,percentageText:Math.round(100*Fn)+"%"})}),Wn.abrupt("return",new ca(function(Jn,Fn){var go=new Date().getTime();In.send(function(Bo,Do){var Bn;if(Bo&&Bo.code==="RequestAbortedError")Mn.logger.error("uploadFile:","api::s3:upload file abort",Bo),Fn(new Ao(Bo.message,Bo,10499));else if(Bo){Mn.logger.error("uploadFile:","api::s3:upload file failed",Bo),Mn.core.reporter.reportTraceStart("exceptions",{user_id:Mn.core.options.account,trace_id:(Bn=Mn.core.clientSocket.socket)===null||Bn===void 0?void 0:Bn.sessionId,start_time:go,action:1,exception_service:4}),Mn.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Bo.status=="number"?Bo.status:typeof Bo.code=="number"?Bo.code:0,description:Bo.message||""+Bo.code,operation_type:1,target:Io({bucket:Or,object:jr})},{asyncParams:Jo.net.getNetworkStatus()}),Mn.core.reporter.reportTraceEnd("exceptions",1);try{Mn._addCircuitTimer()}catch(eo){Fn(new ul("upload file error",eo,Mn.curProvider,Mn.mixStorePolicy,Oe.file||Oe.filePath))}Jn(Mn._uploadFile(Oe))}else{var zr=Mn.mixStorePolicy.s3Policy.cdnSchema;zr=(zr=zr.replace("{cdnDomain}",Mn.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",Do.Key),Jn({size:Ur.size,name:Ur.name,url:Ne.shortUrl?Ne.shortUrl:zr,ext:Ur.name.split(".")[1]||"unknown"})}}),Oe.onUploadStart&&Oe.onUploadStart(In)}));case 33:case"end":return Wn.stop()}},Lt,this)}))},xe.getPrivateUrl=function(Oe){var Ne;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(Oe))return this.logger.error("illegal file url:"+Oe),"";var Lt=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(Oe);Lt[0];var Dt=Lt[1];Lt[2];var Pt=Lt[3];Lt[4];var ir=Lt[5];if(Lt[6],Lt[7],(Ne=this.grayConfig)===null||Ne===void 0?void 0:Ne.mixStoreEnable){var vr=this._getUrlType(Oe);return vr===Is.s3&&this.mixStorePolicy.s3Policy&&(Oe=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",ir)),vr===Is.nos&&this.mixStorePolicy.nosPolicy&&(Oe=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",ir)),Oe}var Ir=this.config,Or=Ir.downloadUrl,jr=Ir.downloadHostList,Ur=Ir.nosCdnEnable,Yr=this.config.cdn.cdnDomain,In=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",Mn=decodeURIComponent(ir),Dn=ta(Mn).call(Mn,In);if(Yr&&Dn>-1&&Ur)return""+Dt+Yr+"/"+Da(Mn).call(Mn,Dn);if(Ci(jr).call(jr,Pt)&&Ci(ir).call(ir,"/")){var Wn=ta(ir).call(ir,"/"),Jn=ir.substring(0,Wn),Fn=ir.substring(Wn+1);return Or.replace("{bucket}",Jn).replace("{object}",Fn)}var go=pi(jr).call(jr,function(Do){return typeof Pt=="string"&&Ci(Pt).call(Pt,Do)})[0],Bo=go?Pt.replace(go,"").replace(/\W/g,""):null;return Bo?Or.replace("{bucket}",Bo).replace("{object}",ir):Oe},xe.getOriginUrl=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:Oe}});case 2:return Lt=Pt.sent,Pt.abrupt("return",Lt.content.nosSafeUrlTag.originUrl);case 4:case"end":return Pt.stop()}},Ne,this)}))},xe.getFileToken=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(jn({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},Oe),Lt=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,Dt=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,Lt!==String(fc.dontNeed)||Dt!==String(fc.dontNeed)){jr.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if(Oe.type!==fc.time){jr.next=17;break}if(!(Lt&&ta(Lt).call(Lt,String(fc.time))>=0||Dt&&ta(Dt).call(Dt,String(fc.time))>0)){jr.next=13;break}return jr.abrupt("return",this.getFileAuthToken(Oe));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:jr.next=33;break;case 17:if(Oe.urls&&Oe.urls.length){jr.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(ir=[],vr=[],bo(Pt=Oe.urls).call(Pt,function(Ur){var Yr=Ir._getUrlType(Ur);Yr===Is.nos&&vr.push(Ur),Yr===Is.s3&&ir.push(Ur)}),(!Dt||ir.length!==0&&ta(Dt).call(Dt,String(fc.urls))<0)&&(this.logger.warn("s3 url don't support url token"),ir=[]),(!Lt||vr.length!==0&&ta(Lt).call(Lt,String(fc.urls))<0)&&(this.logger.warn("nos url don't support url token"),vr=[]),ir.length!==0||vr.length!==0){jr.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(ir.length!==0&&vr.length!==0){jr.next=33;break}return Oe.urls=Io(Oe.urls),jr.abrupt("return",this.getFileAuthToken(Oe));case 33:case"end":return jr.stop()}},Ne,this)}))},xe.getFileAuthToken=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:Oe});case 2:return Lt=Pt.sent,Pt.abrupt("return",Lt.content.mixStoreAuthTokenResTag);case 4:case"end":return Pt.stop()}},Ne,this)}))},xe._getUrlType=function(Oe){var Ne,Lt;return this.mixStorePolicy.nosPolicy&&Kd(Ne=this.mixStorePolicy.nosPolicy.dlcdns).call(Ne,function(Dt){return ta(Oe).call(Oe,Dt)>=0})?Is.nos:this.mixStorePolicy.s3Policy&&Kd(Lt=this.mixStorePolicy.s3Policy.dlcdns).call(Lt,function(Dt){return ta(Oe).call(Oe,Dt)>=0})?Is.s3:null},xe._addCircuitTimer=function(){var Oe=this,Ne=this.mixStorePolicy.providers,Lt=Ne[(ta(Ne).call(Ne,String(this.curProvider))+1)%Ne.length];if(Lt===Ne[0])throw new Error("uploadFile all policy fail");var Dt=us(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(Dt&&Dt.retryNext&&Lt&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+Lt),this.curProvider=ma(Lt),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var Pt=this.mixStorePolicy[this.curProvider===Is.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!Pt||Pt===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){Oe.logger.log("uploadFile:: upload policy will change,now policy:"+Oe.curProvider+" nextProvider:"+ma(Oe.mixStorePolicy.providers[0])),Oe.curProvider=ma(Oe.mixStorePolicy.providers[0]),Oe.core.timerManager.deleteTimer(Oe.circuitTimer)},1e3*Pt)}},xe.process=function(Oe){return Oe.error&&!Oe.error.ignore?ca.reject(Oe.error):ca.resolve(Oe)},pe}(),dl=function(pe,xe,qe,Oe){try{return Oe?xe(po(qe)[0],qe[1]):xe(qe)}catch(Ne){tg(pe,"throw",Ne)}},mv=Array,N0=!Ns(function(pe){Array.from(pe)});En({target:"Array",stat:!0,forced:N0},{from:function(xe){var qe=Pn(xe),Oe=Tu(this),Ne=arguments.length,Lt=Ne>1?arguments[1]:void 0,Dt=Lt!==void 0;Dt&&(Lt=Go(Lt,Ne>2?arguments[2]:void 0));var Pt,ir,vr,Ir,Or,jr,Ur=ji(qe),Yr=0;if(!Ur||this===mv&&cy(Ur))for(Pt=rs(qe),ir=Oe?new this(Pt):mv(Pt);Pt>Yr;Yr++)jr=Dt?Lt(qe[Yr],Yr):qe[Yr],tl(ir,Yr,jr);else for(Or=(Ir=Ol(qe,Ur)).next,ir=Oe?new this:[];!(vr=ze(Or,Ir)).done;Yr++)jr=Dt?dl(Ir,Lt,[vr.value,Yr],!0):vr.value,tl(ir,Yr,jr);return ir.length=Yr,ir}});var pl=_r.Array.from,Sm=ji,Tm=TypeError,Cm=function(pe,xe){if(!delete pe[xe])throw Tm("Cannot delete property "+Tn(xe)+" of "+Tn(pe))},is=Math.floor,gv=function(pe,xe){var qe=pe.length,Oe=is(qe/2);return qe<8?hv(pe,xe):O0(pe,gv(Tf(pe,0,Oe),xe),gv(Tf(pe,Oe),xe),xe)},hv=function(pe,xe){for(var qe,Oe,Ne=pe.length,Lt=1;Lt<Ne;){for(Oe=Lt,qe=pe[Lt];Oe&&xe(pe[Oe-1],qe)>0;)pe[Oe]=pe[--Oe];Oe!==Lt++&&(pe[Oe]=qe)}return pe},O0=function(pe,xe,qe,Oe){for(var Ne=xe.length,Lt=qe.length,Dt=0,Pt=0;Dt<Ne||Pt<Lt;)pe[Dt+Pt]=Dt<Ne&&Pt<Lt?Oe(xe[Dt],qe[Pt])<=0?xe[Dt++]:qe[Pt++]:Dt<Ne?xe[Dt++]:qe[Pt++];return pe},mC=gv,vv=xr.match(/firefox\/(\d+)/i),R0=!!vv&&+vv[1],yv=/MSIE|Trident/.test(xr),bv=xr.match(/AppleWebKit\/(\d+)\./),su=!!bv&&+bv[1],fl=[],Mm=Ie(fl.sort),gC=Ie(fl.push),hC=V(function(){fl.sort(void 0)}),vC=V(function(){fl.sort(null)}),B0=Ul("sort"),Sv=!V(function(){if(Br)return Br<70;if(!(R0&&R0>3)){if(yv)return!0;if(su)return su<603;var pe,xe,qe,Oe,Ne="";for(pe=65;pe<76;pe++){switch(xe=String.fromCharCode(pe),pe){case 66:case 69:case 70:case 72:qe=3;break;case 68:case 71:qe=4;break;default:qe=2}for(Oe=0;Oe<47;Oe++)fl.push({k:xe+Oe,v:qe})}for(fl.sort(function(Lt,Dt){return Dt.v-Lt.v}),Oe=0;Oe<fl.length;Oe++)xe=fl[Oe].k.charAt(0),Ne.charAt(Ne.length-1)!==xe&&(Ne+=xe);return Ne!=="DGBEFHACIJK"}});En({target:"Array",proto:!0,forced:hC||!vC||!B0||!Sv},{sort:function(xe){xe!==void 0&&Xr(xe);var qe=Pn(this);if(Sv)return xe===void 0?Mm(qe):Mm(qe,xe);var Oe,Ne,Lt=[],Dt=rs(qe);for(Ne=0;Ne<Dt;Ne++)Ne in qe&&gC(Lt,qe[Ne]);for(mC(Lt,function(Pt){return function(ir,vr){return vr===void 0?-1:ir===void 0?1:Pt!==void 0?+Pt(ir,vr)||0:li(ir)>li(vr)?1:-1}}(xe)),Oe=rs(Lt),Ne=0;Ne<Oe;)qe[Ne]=Lt[Ne++];for(;Ne<Dt;)Cm(qe,Ne++);return qe}});var ml,gp,hp,gl=ua("Array").sort,km=Array.prototype,vp=function(pe){var xe=pe.sort;return pe===km||sr(km,pe)&&xe===km.sort?gl:xe};(function(pe){pe[pe.ASC=1]="ASC",pe[pe.DESC=2]="DESC"})(ml||(ml={})),function(pe){pe[pe.reorderWeight=0]="reorderWeight",pe[pe.createTime=1]="createTime",pe[pe.totalMember=2]="totalMember"}(gp||(gp={})),function(pe){pe[pe.square=1]="square",pe[pe.person=2]="person"}(hp||(hp={}));var td=function(){function pe(xe,qe){this.name=xe,this.core=qe,this.name=xe,this.logger=qe.logger,this.core=qe}return pe.prototype.process=function(qe){var Oe=this[qe.cmd+"Handler"];return typeof Oe=="function"?Oe.call(this,qe):qe.error&&!qe.error.ignore?ca.reject(qe.error):ca.resolve(qe)},pe}();M0(function(pe,xe,qe,Oe){T0(xe,Zf(xe),pe,Oe)});var Ec,Tv=(Ec=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return Ec()+Ec()+Ec()+Ec()+Ec()+Ec()+Ec()+Ec()});function Ia(pe){var xe;return pi(xe=ba(pe)).call(xe,function(qe){return!(+qe>=0)})}function L0(pe,xe){var qe,Oe=pi(qe=ba(pe)).call(qe,function(Ne){return pe[Ne]==xe});return Oe.length>0?Oe[0]:void 0}function yp(){return ca.resolve()}var iu={"24_15":"qchatSubscribe","24_27":"qchatGetUnreadInfo","24_48":"qchatCreateChannel","24_49":"qchatDeleteChannel","24_50":"qchatUpdateChannel","24_51":"qchatGetChannels","24_52":"qchatGetChannelsByPage","24_53":"qchatGetMembersByPage","24_54":"qchatUpdateWhiteBlackRole","24_55":"qchatGetWhiteBlackRolesPage","24_56":"qchatUpdateWhiteBlackMembers","24_57":"qchatGetWhiteBlackMembersPage","24_58":"qchatGetExistingWhiteBlackRoles","24_59":"qchatGetExistingWhiteBlackMembers","24_60":"qchatUpdateCategoryInfoOfChannel","24_109":"qchatCreateChannelCategory","24_110":"qchatRemoveChannelCategory","24_111":"qchatUpdateChannelCategory","24_112":"qchatGetChannelCategoriesByID","24_113":"qchatUpdateChannelCategoryWhiteBlackRole","24_114":"qchatGetChannelCategoryWhiteBlackRolesPage","24_115":"qchatUpdateChannelCategoryWhiteBlackMembers","24_116":"qchatGetChannelCategoryWhiteBlackMembersPage","24_117":"qchatGetChannelCategoryWhiteBlackRoles","24_118":"qchatGetChannelCategoryWhiteBlackMembers","24_119":"qchatGetChannelCategoriesPage","24_120":"qchatGetChannelCategoryChannelsPage","24_93":"qchatGetChannelSearchByPage","24_95":"qchatChannelMemberSearch","25_8":"qchatGetRoleIdsByServerId","25_9":"qchatSubscribeAsVisitor","25_12":"qchatAutoSubscribe","25_13":"qchatAutoSubscribeNotification"},wm={serverId:1,channelId:2,ackTimestamp:3,unreadCount:4,mentionedCount:5,maxCount:6,lastMsgTime:7},Ma={channelInfo:{channelId:1,serverId:2,name:4,topic:5,ext:6,type:7,validFlag:8,createTime:9,updateTime:10,owner:11,viewMode:12,categoryId:13,syncMode:14,reorderWeight:15,visitorMode:16},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11},qchatSubReqTag:{type:1,opeType:2},qchatChannelIdInfoTag:{serverId:1,channelId:2},unreadInfo:wm,qchatGetChannelListPageTag:{serverId:1,timetag:2,limit:3},qchatGetMembersByPageTag:{serverId:1,channelId:2,timetag:3,limit:4},qchatUpdateWhiteBlackRoleTag:{serverId:1,channelId:2,type:3,opeType:4,roleId:5},qchatGetWhiteBlackRolesPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatUpdateWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,opeType:4,toAccids:5},qchatGetWhiteBlackMembersPageTag:{serverId:1,channelId:2,type:3,timetag:4,limit:5},qchatGetExistingWhiteBlackRolesTag:{serverId:1,channelId:2,type:3,roleIds:4},qchatGetExistingWhiteBlackMembersTag:{serverId:1,channelId:2,type:3,accids:4},QChatChannelCategoryInfo:{categoryId:1,serverId:2,name:4,ext:5,owner:6,viewMode:7,validFlag:8,createTime:9,updateTime:10,channelNumber:11},qchatUpdateChannelCategoryWhiteBlackRoleTag:{serverId:1,categoryId:2,type:3,opeType:4,roleId:5},qchatGetChannelCategoryWhiteBlackRolesPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatUpdateChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,opeType:4,toAccids:5},qchatGetChannelCategoryWhiteBlackMembersPageTag:{serverId:1,categoryId:2,type:3,timetag:4,limit:5},qchatGetChannelCategoryWhiteBlackRolesTag:{serverId:1,categoryId:2,type:3,roleIds:4},qchatGetChannelCategoryWhiteBlackMembersTag:{serverId:1,categoryId:2,type:3,accids:4},qchatGetChannelCategoriesPageTag:{serverId:1,timetag:2,limit:3},qchatGetChannelCategoryChannelsPageTag:{serverId:1,categoryId:2,timetag:3,limit:4},qchatGetChannelSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverId:6,sort:7,cursor:8},qchatUpdateChannelTag:{channelId:1,name:4,topic:5,ext:6,viewMode:12,visitorMode:16},serverRoles:{serverId:1,roleIds:2,timeTag:3},qchatChannelMemberSearchTag:{serverId:1,channelId:2,keyword:3,limit:4},qchatChannelMemberInfo:{serverId:1,channelId:2,avatar:3,accid:4,nick:5,createTime:6,updateTime:7}},aa=Ki(Ma),bp={qchatCreateChannel:{sid:24,cid:48,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:Ma.channelInfo},{type:"Property",name:"antispamTag",reflectMapper:Ma.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:aa.channelInfo}]},qchatDeleteChannel:{sid:24,cid:49,service:"qchatChannel",params:[{type:"Long",name:"channelId"}]},qchatUpdateChannel:{sid:24,cid:50,service:"qchatChannel",params:[{type:"Property",name:"channelInfo",reflectMapper:Ma.qchatUpdateChannelTag},{type:"Property",name:"antispamTag",reflectMapper:Ma.antispamTag}],response:[{type:"Property",name:"channelInfo",reflectMapper:aa.channelInfo}]},qchatGetChannels:{sid:24,cid:51,service:"qchatChannel",params:[{type:"LongArray",name:"channelIds"}],response:[{type:"PropertyArray",name:"channelList",reflectMapper:aa.channelInfo}]},qchatGetChannelsByPage:{sid:24,cid:52,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelListPageTag",reflectMapper:Ma.qchatGetChannelListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.channelInfo}]},qchatGetMembersByPage:{sid:24,cid:53,service:"qchatChannel",params:[{type:"Property",name:"qchatGetMembersByPageTag",reflectMapper:Ma.qchatGetMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatUpdateWhiteBlackRole:{sid:24,cid:54,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackRoleTag",reflectMapper:Ma.qchatUpdateWhiteBlackRoleTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetWhiteBlackRolesPage:{sid:24,cid:55,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackRolesPageTag",reflectMapper:Ma.qchatGetWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatUpdateWhiteBlackMembers:{sid:24,cid:56,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateWhiteBlackMembersTag",reflectMapper:Ma.qchatUpdateWhiteBlackMembersTag}]},qchatGetWhiteBlackMembersPage:{sid:24,cid:57,service:"qchatChannel",params:[{type:"Property",name:"qchatGetWhiteBlackMembersPageTag",reflectMapper:Ma.qchatGetWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetExistingWhiteBlackRoles:{sid:24,cid:58,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackRolesTag",reflectMapper:Ma.qchatGetExistingWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatGetExistingWhiteBlackMembers:{sid:24,cid:59,service:"qchatChannel",params:[{type:"Property",name:"qchatGetExistingWhiteBlackMembersTag",reflectMapper:Ma.qchatGetExistingWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatUpdateCategoryInfoOfChannel:{sid:24,cid:60,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateCategoryInfoOfChannelTag",reflectMapper:Ma.channelInfo}],response:[{type:"Property",name:"channelInfo",reflectMapper:aa.channelInfo}]},qchatCreateChannelCategory:{sid:24,cid:109,service:"qchatChannel",params:[{type:"Property",name:"qchatCreateChannelCategoryTag",reflectMapper:Ma.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatRemoveChannelCategory:{sid:24,cid:110,service:"qchatChannel",params:[{type:"Long",name:"categoryId"}]},qchatUpdateChannelCategory:{sid:24,cid:111,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryTag",reflectMapper:Ma.QChatChannelCategoryInfo}],response:[{type:"Property",name:"QChatChannelCategoryInfo",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatGetChannelCategoriesByID:{sid:24,cid:112,service:"qchatChannel",params:[{type:"LongArray",name:"categoryIds"}],response:[{type:"PropertyArray",name:"channelCategoryList",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatUpdateChannelCategoryWhiteBlackRole:{sid:24,cid:113,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackRoleTag",reflectMapper:Ma.qchatUpdateChannelCategoryWhiteBlackRoleTag}]},qchatGetChannelCategoryWhiteBlackRolesPage:{sid:24,cid:114,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesPageTag",reflectMapper:Ma.qchatGetChannelCategoryWhiteBlackRolesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatUpdateChannelCategoryWhiteBlackMembers:{sid:24,cid:115,service:"qchatChannel",params:[{type:"Property",name:"qchatUpdateChannelCategoryWhiteBlackMembersTag",reflectMapper:Ma.qchatUpdateChannelCategoryWhiteBlackMembersTag}]},qchatGetChannelCategoryWhiteBlackMembersPage:{sid:24,cid:116,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersPageTag",reflectMapper:Ma.qchatGetChannelCategoryWhiteBlackMembersPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetChannelCategoryWhiteBlackRoles:{sid:24,cid:117,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackRolesTag",reflectMapper:Ma.qchatGetChannelCategoryWhiteBlackRolesTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.serverRole}]},qchatGetChannelCategoryWhiteBlackMembers:{sid:24,cid:118,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryWhiteBlackMembersTag",reflectMapper:Ma.qchatGetChannelCategoryWhiteBlackMembersTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.memberInfo}]},qchatGetChannelCategoriesPage:{sid:24,cid:119,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoriesPageTag",reflectMapper:Ma.qchatGetChannelCategoriesPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.QChatChannelCategoryInfo}]},qchatGetChannelCategoryChannelsPage:{sid:24,cid:120,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelCategoryChannelsPageTag",reflectMapper:Ma.qchatGetChannelCategoryChannelsPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.channelInfo}]},qchatSubscribe:{sid:24,cid:15,service:"qchatChannel",params:[{type:"Property",name:"qchatSubReqTag",reflectMapper:Ma.qchatSubReqTag},{type:"PropertyArray",name:"channels",reflectMapper:Ma.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:aa.unreadInfo},{type:"PropertyArray",name:"failedChannels",reflectMapper:aa.qchatChannelIdInfoTag}]},qchatAutoSubscribe:{sid:25,cid:12,service:"qchatChannel",hasPacketTimer:!1,params:[{type:"Property",name:"qchatAutoSubReqTag"}],response:[{type:"Property",name:"qchatAutoSubInfo",reflectMapper:{1:"time"}}]},qchatAutoSubscribeNotification:{service:"qchatChannel",sid:25,cid:13,response:[{type:"PropertyArray",name:"serverIds",reflectMapper:aa.unreadInfo},{type:"PropertyArray",name:"unreadInfos",reflectMapper:aa.unreadInfo}]},qchatGetUnreadInfo:{sid:24,cid:27,service:"qchatChannel",params:[{type:"PropertyArray",name:"channels",reflectMapper:Ma.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:aa.unreadInfo}]},qchatGetChannelSearchByPage:{sid:24,cid:93,service:"qchatChannel",params:[{type:"Property",name:"qchatGetChannelSearchByPageTag",reflectMapper:Ma.qchatGetChannelSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:aa.channelInfo}]},qchatGetRoleIdsByServerId:{sid:25,cid:8,service:"qchatChannel",params:[{type:"Property",name:"qchatGetRoleIdsByServerIdTag",reflectMapper:{serverIdTimeTags:1}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:aa.serverRoles},{type:"LongArray",name:"failServerIds"}]},qchatChannelMemberSearch:{sid:24,cid:95,service:"qchatChannel",params:[{type:"Property",name:"qchatChannelMemberSearchTag",reflectMapper:Ma.qchatChannelMemberSearchTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:aa.qchatChannelMemberInfo}]},qchatSubscribeAsVisitor:{sid:25,cid:9,service:"qchatChannel",params:[{type:"Property",name:"tag",reflectMapper:Ma.qchatSubReqTag},{type:"PropertyArray",name:"datas",reflectMapper:Ma.qchatChannelIdInfoTag}],response:[{type:"PropertyArray",name:"failedArr",reflectMapper:aa.qchatChannelIdInfoTag}]}},Sp={"24_31":"qchatCreateServer","24_32":"qchatDeleteServer","24_33":"qchatUpdateServer","24_34":"qchatGetServers","24_35":"qchatGetServersByPage","24_36":"qchatInviteServerMembers","24_37":"qchatAcceptServerInvite","24_38":"qchatRejectInviteServer","24_39":"qchatApplyServerJoin","24_40":"qchatAcceptServerApply","24_41":"qchatRejectServerApply","24_42":"qchatKickServerMembers","24_43":"qchatLeaveServer","24_44":"qchatUpdateMyMemberInfo","24_45":"qchatUpdateServerMemberInfo","24_46":"qchatGetServerMembers","24_47":"qchatGetServerMembersByPage","24_104":"qchatUpdateServerMemberBan","24_105":"qchatGetBannedMembersByPage","24_91":"qchatServerSearchByPage","24_92":"qchatServerMemberSearchByPage","24_122":"qchatGenerateInviteCode","24_123":"qchatJoinByInviteCode","24_124":"qchatGetInviteApplyRecordOfServer","24_125":"qchatGetInviteApplyRecordOfSelf","25_5":"qchatClearServersUnread","25_7":"qchatSubscribeChannelsByServers","25_10":"qchatEnterAsVisitor","25_11":"qchatLeaveAsVisitor"},gs={serverInfo:{serverId:1,name:3,icon:4,ext:5,owner:6,memberNumber:7,inviteMode:8,applyMode:9,validFlag:10,createTime:11,updateTime:12,channelNumber:13,categoryNumber:14,searchType:15,searchEnable:16,reorderWeight:17},antispamTag:{antiSpamBusinessId:1},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},otherMemberInfo:{serverId:1,accid:3,nick:4,avatar:5,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},getServerListPageTag:{timestamp:1,limit:2},getServerMemberListPageTag:{serverId:1,timetag:2,limit:3},updateServerMemberBanTag:{serverId:1,opeType:2,accid:3,ext:4},getBannedMembersByPageTag:{serverId:1,timetag:2,limit:3},serverMemberBanInfo:{serverId:1,appid:2,accid:3,ext:4,banTime:5,validFlag:6,createTime:7,updateTime:8},serverSearchByPageTag:{keyword:1,startTime:2,endTime:3,order:4,limit:5,serverType:6,searchType:7,sort:8,cursor:9},serverMemberSearchByPageTag:{serverId:1,keyword:3,limit:4},inviteRespParamTag:{requestId:1},applyRespParamTag:{requestId:1,expireTime:2},inviteApplyRecord:{accid:1,type:2,serverId:3,status:4,requestId:5,createTime:6,updateTime:7,expireTime:8,data:9,recordId:10},clearServersUnreadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},unreadInfo:wm},as=Ki(gs),yC={qchatCreateServer:{sid:24,cid:31,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:gs.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:gs.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:as.serverInfo}]},qchatDeleteServer:{sid:24,cid:32,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateServer:{sid:24,cid:33,service:"qchatServer",params:[{type:"Property",name:"serverInfo",reflectMapper:gs.serverInfo},{type:"Property",name:"antispamTag",reflectMapper:gs.antispamTag}],response:[{type:"Property",name:"serverInfo",reflectMapper:as.serverInfo}]},qchatGetServers:{sid:24,cid:34,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"serverList",reflectMapper:as.serverInfo}]},qchatGetServersByPage:{sid:24,cid:35,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:gs.getServerListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:as.serverInfo}]},qchatInviteServerMembers:{sid:24,cid:36,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"StrArray",name:"failByOverAccids"},{type:"StrArray",name:"failByBanAccids"},{type:"Property",name:"record",reflectMapper:as.applyRespParamTag}]},qchatAcceptServerInvite:{sid:24,cid:37,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:gs.inviteRespParamTag}]},qchatRejectInviteServer:{sid:24,cid:38,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:gs.inviteRespParamTag}]},qchatApplyServerJoin:{sid:24,cid:39,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"ps"},{type:"Property",name:"params",reflectMapper:{ttl:1}}],response:[{type:"Property",name:"data",reflectMapper:as.applyRespParamTag}]},qchatAcceptServerApply:{sid:24,cid:40,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"Property",name:"recordInfo",reflectMapper:gs.applyRespParamTag}]},qchatRejectServerApply:{sid:24,cid:41,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"String",name:"accid"},{type:"String",name:"ps"},{type:"Property",name:"recordInfo",reflectMapper:gs.applyRespParamTag}]},qchatKickServerMembers:{sid:24,cid:42,service:"qchatServer",params:[{type:"Long",name:"serverId"},{type:"StrArray",name:"accids"}]},qchatLeaveServer:{sid:24,cid:43,service:"qchatServer",params:[{type:"Long",name:"serverId"}]},qchatUpdateMyMemberInfo:{sid:24,cid:44,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:gs.memberInfo},{type:"Property",name:"antispamTag",reflectMapper:gs.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:as.memberInfo}]},qchatUpdateServerMemberInfo:{sid:24,cid:45,service:"qchatServer",params:[{type:"Property",name:"memberInfo",reflectMapper:gs.otherMemberInfo},{type:"Property",name:"antispamTag",reflectMapper:gs.antispamTag}],response:[{type:"Property",name:"memberInfo",reflectMapper:as.memberInfo}]},qchatGetServerMembers:{sid:24,cid:46,service:"qchatServer",params:[{type:"StrArray",name:"accids"}],response:[{type:"PropertyArray",name:"accidList",reflectMapper:as.memberInfo}]},qchatGetServerMembersByPage:{sid:24,cid:47,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:gs.getServerMemberListPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:as.memberInfo}]},qchatUpdateServerMemberBan:{sid:24,cid:104,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:gs.updateServerMemberBanTag}]},qchatGetBannedMembersByPage:{sid:24,cid:105,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:gs.getBannedMembersByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag"}},{type:"PropertyArray",name:"datas",reflectMapper:as.serverMemberBanInfo}]},qchatServerSearchByPage:{sid:24,cid:91,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:gs.serverSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:{1:"hasMore",2:"nextTimetag",3:"cursor"}},{type:"PropertyArray",name:"datas",reflectMapper:as.serverInfo}]},qchatServerMemberSearchByPage:{sid:24,cid:92,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:gs.serverMemberSearchByPageTag}],response:[{type:"PropertyArray",name:"members",reflectMapper:as.memberInfo}]},qchatGenerateInviteCode:{sid:24,cid:122,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,ttl:2}}],response:[{type:"Property",name:"data",reflectMapper:{1:"serverId",2:"requestId",3:"inviteCode",4:"expireTime"}}]},qchatJoinByInviteCode:{sid:24,cid:123,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,inviteCode:2,ps:3}}]},qchatGetInviteApplyRecordOfServer:{sid:24,cid:124,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,fromTime:2,toTime:3,reverse:4,limit:5,cursor:6}}],response:[{type:"PropertyArray",name:"data",reflectMapper:as.inviteApplyRecord}]},qchatGetInviteApplyRecordOfSelf:{sid:24,cid:125,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{fromTime:1,toTime:2,reverse:3,limit:4,cursor:5}}],response:[{type:"PropertyArray",name:"data",reflectMapper:as.inviteApplyRecord}]},qchatClearServersUnread:{sid:25,cid:5,service:"qchatServer",params:[{type:"LongArray",name:"serverIds"}],response:[{type:"Property",name:"clearServersUnreadTag",reflectMapper:as.clearServersUnreadTag}]},qchatSubscribeChannelsByServers:{sid:25,cid:7,service:"qchatServer",params:[{type:"int",name:"type"},{type:"LongArray",name:"serverIds"}],response:[{type:"PropertyArray",name:"unreadInfos",reflectMapper:as.unreadInfo},{type:"LongArray",name:"failServerIds"}]},qchatEnterAsVisitor:{sid:25,cid:10,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]},qchatLeaveAsVisitor:{sid:25,cid:11,service:"qchatServer",params:[{type:"Property",name:"tag",reflectMapper:{serverIds:1}}],response:[{type:"LongArray",name:"failServerIds"}]}};function qa(pe,xe){if(!dp(xe))return{};var qe=JSON.parse(Io(xe)),Oe=Cv(pe,qe);return JSON.parse(Io(zn(zn({},qe),Oe)))}function Cv(pe,xe){if(!dp(xe))return{};var qe={},Oe=ba(pe);return bo(Oe).call(Oe,function(Ne){var Lt=pe[Ne].type;if(typeof Lt!="string"){var Dt=Cv(pe[Ne],xe);ba(Dt).length>0&&(qe[Ne]=Dt)}else{var Pt=pe[Ne],ir=Pt.rawKey||Ne,vr=bC[Lt](xe,ir,Pt);vr!==void 0&&(xe[ir]=void 0,qe[Ne]=vr)}}),qe}var bC={number:function(xe,qe){if(xe[qe]!==void 0)return+xe[qe]},string:function(xe,qe){if(xe[qe]!==void 0)return xe[qe]},boolean:function(xe,qe){return+xe[qe]>0||+xe[qe]!=0&&void 0},enum:function(xe,qe,Oe){return eu(Oe)[xe[qe]]},object:function(xe,qe){if(xe[qe]!==void 0)try{return JSON.parse(xe[qe])}catch{return{}}}};function Tp(pe,xe){if(!dp(xe))return{};var qe=JSON.parse(Io(xe)),Oe=Mv(pe,qe);return JSON.parse(Io(zn(zn({},qe),Oe)))}function Mv(pe,xe){var qe;if(!dp(xe))return ed(qe=ba(pe)).call(qe,function(Lt,Dt){return Lt[pe[Dt].rawKey||Dt]=void 0,Lt},{});var Oe={},Ne=ba(pe);return bo(Ne).call(Ne,function(Lt){var Dt=pe[Lt].type;if(typeof Dt!="string"){var Pt=Mv(pe[Lt],xe[Lt]);return zn(Oe,Pt),void(xe[Lt]=void 0)}var ir=pe[Lt],vr=ir.rawKey||Lt,Ir=F0[Dt](xe,Lt,ir);xe[vr]=void 0,Oe[vr]=Ir}),Oe}var F0={number:function(xe,qe){return xe[qe]},string:function(xe,qe){return xe[qe]},boolean:function(xe,qe){return xe[qe]===!0?1:xe[qe]===!1?0:void 0},enum:function(xe,qe,Oe){return eu(Oe)[xe[qe]]},object:function(xe,qe){if(xe[qe]!==void 0)try{return Io(xe[qe])}catch{return""}}},_m=F0,SC={serverId:{type:"string"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"},owner:{type:"string"},memberNumber:{type:"number"},inviteMode:{type:"number"},applyMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"},categoryNumber:{type:"number"},searchType:{type:"number"},searchEnable:{type:"boolean"},reorderWeight:{type:"string"}},$0={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},TC={serverId:{type:"string"},appid:{type:"string"},accid:{type:"string"},ext:{type:"string"},banTime:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}};function Cp(pe){return qa(SC,pe)}function kv(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return Cp(xe)}):[]}function Mp(pe){return qa($0,pe)}function hl(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return Mp(xe)}):[]}function vl(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return function(Oe){return qa(TC,Oe)}(xe)}):[]}function mc(pe){var xe,qe,Oe;if(!pe.antispamTag)return{};var Ne=zn({},pe.antispamTag);return!((xe=pe.antispamTag)===null||xe===void 0)&&xe.antiSpamBusinessId&&typeof((qe=pe.antispamTag)===null||qe===void 0?void 0:qe.antiSpamBusinessId)!="string"&&(Ne.antiSpamBusinessId=Io((Oe=pe.antispamTag)===null||Oe===void 0?void 0:Oe.antiSpamBusinessId)),Ne}var j0={accid:{type:"string"},type:{type:"number"},serverId:{type:"string"},status:{type:"number"},requestId:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"},expireTime:{type:"number"},data:{type:"object"}};function xm(pe){return qa(j0,pe)}function rd(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return xm(xe)}):[]}var kp,Ea,xi,Ii,CC={successServerIds:{type:"object"},failServerIds:{type:"object"},ackTimestamp:{type:"number"}};function Pc(pe){return qa(CC,pe)}(function(pe){pe[pe.reorderWeight=0]="reorderWeight",pe[pe.createTime=1]="createTime"})(kp||(kp={})),function(pe){pe[pe.white=1]="white",pe[pe.black=2]="black"}(Ea||(Ea={})),function(pe){pe[pe.add=1]="add",pe[pe.remove=2]="remove"}(xi||(xi={})),function(pe){pe[pe.message=0]="message",pe[pe.media=1]="media",pe[pe.ext=100]="ext"}(Ii||(Ii={}));var Es={channelId:{type:"string"},serverId:{type:"string"},name:{type:"string"},topic:{type:"string"},ext:{type:"string"},type:{type:"enum",values:Ii},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},viewMode:{type:"number"},categoryId:{type:"string"},syncMode:{type:"number"},visitorMode:{type:"number"},reorderWeight:{type:"string"}},MC={serverId:{type:"string"},channelId:{type:"string"},ackTimestamp:{type:"number"},unreadCount:{type:"number"},mentionedCount:{type:"number"},maxCount:{type:"number"},lastMsgTime:{type:"number"}},kC={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:Ea},opeType:{type:"enum",values:xi},toAccids:{type:"object"}},D0={serverId:{type:"string"},channelId:{type:"string"},type:{type:"enum",values:Ea},opeType:{type:"enum",values:xi},roleId:{type:"string"}},wp={categoryId:{type:"string"},serverId:{type:"string"},name:{type:"string"},ext:{type:"string"},owner:{type:"string"},viewMode:{type:"number"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},channelNumber:{type:"number"}},wC={serverId:{type:"string"},channelId:{type:"string"},accid:{type:"string"},avatar:{type:"string"},nick:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Im(pe){return qa(D0,pe)}function nd(pe){return qa(Es,pe)}function Em(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return nd(xe)}):[]}function Pm(pe){return qa(MC,pe)}function od(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return Pm(xe)}):[]}function _p(pe){return qa(wp,pe)}function Ac(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return _p(xe)}):[]}function _C(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return function(Oe){return qa(wC,Oe)}(xe)}):[]}function Ei(pe){try{return JSON.parse(pe)}catch{return[]}}var Am=fi?fi.isConcatSpreadable:void 0,U0=function(xe){return Mi(xe)||ju(xe)||!!(Am&&xe&&xe[Am])},wv=function pe(xe,qe,Oe,Ne,Lt){var Dt=-1,Pt=xe.length;for(Oe||(Oe=U0),Lt||(Lt=[]);++Dt<Pt;){var ir=xe[Dt];qe>0&&Oe(ir)?qe>1?pe(ir,qe-1,Oe,Ne,Lt):wh(Lt,ir):Ne||(Lt[Lt.length]=ir)}return Lt},xp=dm(function(pe,xe){return Ju(pe)?lm(pe,wv(xe,1,Ju,!0)):[]}),V0=xp;function xC(pe,xe){var qe,Oe=zs!==void 0&&Sm(pe)||pe["@@iterator"];if(Oe)return oa(qe=(Oe=Oe.call(pe)).next).call(qe,Oe);if(Ts(pe)||(Oe=function(Dt,Pt){var ir;if(Dt){if(typeof Dt=="string")return q0(Dt,Pt);var vr=Da(ir=Object.prototype.toString.call(Dt)).call(ir,8,-1);if(vr==="Object"&&Dt.constructor&&(vr=Dt.constructor.name),vr==="Map"||vr==="Set")return pl(Dt);if(vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vr))return q0(Dt,Pt)}}(pe))||xe&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ne=0;return function(){return Ne>=pe.length?{done:!0}:{done:!1,value:pe[Ne++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(pe,xe){(xe==null||xe>pe.length)&&(xe=pe.length);for(var qe=0,Oe=new Array(xe);qe<xe;qe++)Oe[qe]=pe[qe];return Oe}var cu,Ip,ad,yl,bl=function(pe){function xe(Oe){var Ne;return(Ne=pe.call(this,"qchatServer",Oe)||this).core=Oe,ou({cmdMap:Sp,cmdConfig:yC}),Ne}ra(xe,pe);var qe=xe.prototype;return qe.createServer=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatCreateServer",{serverInfo:zn(zn({},Ne),{searchEnable:Ne.searchEnable===!1?0:1}),antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Cp(Dt.content.serverInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.deleteServer=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1}},Ne),Pt.next=3,this.core.sendCmd("qchatDeleteServer",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateServer=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},icon:{type:"string",required:!1},name:{type:"string",required:!1},ext:{type:"string",required:!1},searchType:{type:"number",required:!1,min:0},searchEnable:{type:"boolean",required:!1},inviteMode:{type:"number",min:0,max:1,required:!1},applyMode:{type:"number",min:0,max:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateServer",{serverInfo:zn(zn({},Ne),{searchEnable:Ne.searchEnable===!1?0:1}),antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Cp(Dt.content.serverInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getServers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverIds:{type:"array",itemType:"string",min:1}},Ne),ir.next=3,this.core.sendCmd("qchatGetServers",Ne);case 3:return Dt=ir.sent,ir.abrupt("return",kv(Dt.content.serverList));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getServersByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({timestamp:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetServersByPage",{tag:Ne});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:kv(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.inviteServerMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},Ne),vr.next=3,this.core.sendCmd("qchatInviteServerMembers",Ne);case 3:return Dt=vr.sent,Pt=Dt.content.record||{},vr.abrupt("return",{failByOverAccids:Dt.content.failByOverAccids,failByBanAccids:Dt.content.failByBanAccids,recordInfo:xm(Pt)});case 6:case"end":return vr.stop()}},Lt,this)}))},qe.acceptServerInvite=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),Pt.next=3,this.core.sendCmd("qchatAcceptServerInvite",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.rejectInviteServer=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),Pt.next=3,this.core.sendCmd("qchatRejectInviteServer",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.applyServerJoin=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},ps:{type:"string"},params:{type:"object",rules:{ttl:{type:"number"}},required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatApplyServerJoin",Ne);case 3:return Dt=ir.sent,ir.abrupt("return",xm(Dt.content.data));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.acceptServerApply=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),Pt.next=3,this.core.sendCmd("qchatAcceptServerApply",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.rejectServerApply=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},ps:{type:"string"},recordInfo:{type:"object",rules:{requestId:{type:"string",allowEmpty:!1}}}},Ne),Pt.next=3,this.core.sendCmd("qchatRejectServerApply",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.kickServerMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},accids:{type:"array",itemType:"string",min:1}},Ne),Pt.next=3,this.core.sendCmd("qchatKickServerMembers",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.leaveServer=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1}},Ne),Pt.next=3,this.core.sendCmd("qchatLeaveServer",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateMyMemberInfo=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",required:!1},nick:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",required:!1},ext:{type:"string",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateMyMemberInfo",{memberInfo:Ne,antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Mp(Dt.content.memberInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.updateServerMemberInfo=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},accid:{type:"string",min:1},nick:{type:"string",required:!1},avatar:{type:"string",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateServerMemberInfo",{memberInfo:Ne,antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Mp(Dt.content.memberInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getServerMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(jn({accids:{type:"array"}},Ne),Dt=[],Ne.accids.length)for(Pt=xC(Ne.accids);!(ir=Pt()).done;)vr=ir.value,Dt.push(vr.serverId+"|"+vr.accid);return jr.next=5,this.core.sendCmd("qchatGetServerMembers",{accids:Dt});case 5:return Ir=jr.sent,jr.abrupt("return",hl(Ir.content.accidList));case 7:case"end":return jr.stop()}},Lt,this)}))},qe.getServerMembersByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetServerMembersByPage",{tag:Ne});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.subscribeServer=function(Ne){var Lt,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(jn({type:{type:"number",min:4,max:4,required:!1},opeType:{type:"number",min:1,max:2}},Ne),!(!((Lt=this.core.otherOptions.qchatChannelConfig)===null||Lt===void 0)&&Lt.autoSubscribe)||Ne.isInternalTrigger){Ur.next=3;break}throw new Ao("subscribe server failed, manual subscribe is not allowed in auto subscribe mode",{},403);case 3:if(Ne.type||(Ne.type=4),!Ne.servers.length){Ur.next=12;break}return vr=zn(zn({},Ne),{channels:Fo(ir=Ne.servers).call(ir,function(Yr){return{serverId:Yr.serverId,channelId:""}})}),Ur.next=8,this.core.qchatChannel.subscribeModuleService.subscribe(vr);case 8:return Ir=Ur.sent,Or=Ir.failedChannels,!((Dt=this.core.otherOptions.qchatChannelConfig)===null||Dt===void 0)&&Dt.autoSubscribe?this.core.qchatChannel.subscribeModuleService.cacheAutoSubscribe(vr):this.core.qchatChannel.subscribeModuleService.cacheSubscribe(vr),Ur.abrupt("return",{failedServers:Or});case 12:case"end":return Ur.stop()}},Pt,this)}))},qe.banServerMember=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:zn(zn({},Ne),{opeType:1})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.unbanServerMember=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateServerMemberBan",{tag:zn(zn({},Ne),{opeType:2})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getBannedMembersByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetBannedMembersByPage",{tag:Ne});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:vl(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.serverSearchByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},serverType:{type:"array",itemType:"number",min:0,required:!1},order:{type:"enum",values:Ia(ml),required:!1},searchType:{type:"enum",values:Ia(hp)},sort:{type:"enum",values:Ia(gp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),!(Ne.startTime&&Ne.endTime&&Ne.startTime>=Ne.endTime)){Or.next=3;break}throw new ru("startTime more than endTime",Ne,"timeRule");case 3:return Or.next=5,this.core.sendCmd("qchatServerSearchByPage",{tag:zn(zn({},Ne),{order:Ne.order&&ml[Ne.order],searchType:hp[Ne.searchType],sort:vp(Ne)&&gp[vp(Ne)],serverType:Io(Ne.serverType)})});case 5:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag),cursor:vr.cursor},datas:kv(ir)});case 8:case"end":return Or.stop()}},Lt,this)}))},qe.serverMemberSearchByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatServerMemberSearchByPage",{tag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",hl(Dt.content.members));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.generateInviteCode=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},ttl:{type:"number",min:0,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGenerateInviteCode",{tag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",qa({expireTime:{type:"number"}},Dt.content.data));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.joinByInviteCode=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},inviteCode:{type:"string",allowEmpty:!1},ps:{type:"string",required:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatJoinByInviteCode",{tag:Ne});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getInviteApplyRecordOfServer=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfServer",{tag:zn(zn({},Ne),{reverse:qd(Ne)?1:0})});case 3:return Dt=ir.sent,ir.abrupt("return",rd(Dt.content.data));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getInviteApplyRecordOfSelf=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({fromTime:{type:"number",min:0},toTime:{type:"number",min:0},reverse:{type:"boolean",required:!1},limit:{type:"number",min:1,required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetInviteApplyRecordOfSelf",{tag:zn(zn({},Ne),{reverse:qd(Ne)?1:0})});case 3:return Dt=ir.sent,ir.abrupt("return",rd(Dt.content.data));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.markRead=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverIds:{type:"array",itemType:"string",required:!0}},Ne),Or.next=3,this.core.sendCmd("qchatClearServersUnread",Ne);case 3:return Dt=Or.sent,Pt=Pc(Dt.content.clearServersUnreadTag),ir=Pt.successServerIds,vr=Pt.ackTimestamp,this.logger.log("qchatServer::clearServersUnread:: begin auto clear servers unreadInfo"),this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",ir,vr),Or.abrupt("return",Pt);case 9:case"end":return Or.stop()}},Lt,this)}))},qe.subscribeAllChannel=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({type:{type:"number",required:!0},serverIds:{type:"array",itemType:"string",required:!0,max:10}},Ne),!(!((Lt=this.core.otherOptions.qchatChannelConfig)===null||Lt===void 0)&&Lt.autoSubscribe)){Or.next=3;break}throw new Ao("subscribe channel failed, manual subscribe is not allowed in auto subscribe mode.",{},403);case 3:return Or.next=5,this.core.sendCmd("qchatSubscribeChannelsByServers",Ne,{timeout:3e4});case 5:return(ir=Or.sent).content.unreadInfos=od(ir.content.unreadInfos),ir.content.failServerIds=Ei(ir.content.failServerIds),vr={type:Ne.type,opeType:1,channels:Fo(Pt=ir.content.unreadInfos).call(Pt,function(jr){return{serverId:jr.serverId,channelId:jr.channelId}})},this.core.eventBus.emit("qchatChannel/cacheSubscribe",vr),this.core.eventBus.emit("qchatChannel/getRoleIdsByServerId",Ne.serverIds),this.core.eventBus.emit("qchatChannel/updateUnreads",ir.content.unreadInfos),Or.abrupt("return",ir.content);case 13:case"end":return Or.stop()}},Dt,this)}))},qe.enterAsVisitor=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return jn({serverIds:{type:"array",itemType:"string",min:1}},Ne),Ir.next=3,this.core.sendCmd("qchatEnterAsVisitor",{tag:{serverIds:Io(Ne.serverIds)}});case 3:return Dt=Ir.sent,Pt=Ei(Dt.content.failServerIds),ir=V0(Ne.serverIds,Pt),this.core.qchatChannel.subscribeForVisitorService.cacheServer(ir),Ir.abrupt("return",{failedServers:Pt});case 8:case"end":return Ir.stop()}},Lt,this)}))},qe.leaveAsVisitor=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverIds:{type:"array",itemType:"string",min:1}},Ne),Or.next=3,this.core.sendCmd("qchatLeaveAsVisitor",{tag:{serverIds:Io(Ne.serverIds)}});case 3:return Dt=Or.sent,Pt=Ei(Dt.content.failServerIds),ir=V0(Ne.serverIds,Pt),bo(ir).call(ir,function(jr){vr.core.qchatChannel.subscribeForVisitorService.deleteServer(jr)}),Or.abrupt("return",{failedServers:Pt});case 8:case"end":return Or.stop()}},Lt,this)}))},qe.subscribeAsVisitor=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(jn({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},serverIds:{type:"array",itemType:"string",min:1}},Ne),!Ne.serverIds.length){Pt.next=5;break}return Pt.next=4,this.core.qchatChannel.subscribeForVisitorService.subscribeServerAsVisitor(Ne);case 4:return Pt.abrupt("return",Pt.sent);case 5:return Pt.abrupt("return",{failedServers:[]});case 6:case"end":return Pt.stop()}},Lt,this)}))},xe}(td);(function(pe){pe[pe.everyone=1]="everyone",pe[pe.custom=2]="custom"})(cu||(cu={})),function(pe){pe[pe.normal=0]="normal",pe[pe.owner=1]="owner"}(Ip||(Ip={})),function(pe){pe[pe.ignore=0]="ignore",pe[pe.deny=-1]="deny",pe[pe.allow=1]="allow"}(ad||(ad={})),function(pe){pe[pe.manageServer=1]="manageServer",pe[pe.manageChannel=2]="manageChannel",pe[pe.manageRole=3]="manageRole",pe[pe.sendMsg=4]="sendMsg",pe[pe.accountInfoSelf=5]="accountInfoSelf",pe[pe.inviteServer=6]="inviteServer",pe[pe.kickServer=7]="kickServer",pe[pe.accountInfoOther=8]="accountInfoOther",pe[pe.recallMsg=9]="recallMsg",pe[pe.deleteMsg=10]="deleteMsg",pe[pe.remindOther=11]="remindOther",pe[pe.remindEveryone=12]="remindEveryone",pe[pe.manageBlackWhiteList=13]="manageBlackWhiteList",pe[pe.banServerMember=14]="banServerMember",pe[pe.RTCChannelConnect=15]="RTCChannelConnect",pe[pe.RTCChannelDisconnectOther=16]="RTCChannelDisconnectOther",pe[pe.RTCChannelOpenMicrophone=17]="RTCChannelOpenMicrophone",pe[pe.RTCChannelOpenCamera=18]="RTCChannelOpenCamera",pe[pe.RTCChannelOpenCloseOtherMicrophone=19]="RTCChannelOpenCloseOtherMicrophone",pe[pe.RTCChannelOpenCloseOtherCamera=20]="RTCChannelOpenCloseOtherCamera",pe[pe.RTCChannelOpenCloseEveryoneMicrophone=21]="RTCChannelOpenCloseEveryoneMicrophone",pe[pe.RTCChannelOpenCloseEveryoneCamera=22]="RTCChannelOpenCloseEveryoneCamera",pe[pe.RTCChannelOpenShareScreen=23]="RTCChannelOpenShareScreen",pe[pe.RTCChannelCloseOtherShareScreen=24]="RTCChannelCloseOtherShareScreen",pe[pe.manageInviteApply=25]="manageInviteApply",pe[pe.manageInviteApplyHistory=26]="manageInviteApplyHistory",pe[pe.mentionedRole=27]="mentionedRole"}(yl||(yl={}));var Ms={type:{type:"enum",values:cu},memberType:{type:"enum",values:Ip},createTime:{type:"number"},updateTime:{type:"number"},priority:{type:"number"},memberCount:{type:"number"},joinTime:{type:"number"}},IC={roleId:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},type:{type:"enum",values:cu},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},name:{type:"string"},icon:{type:"string"},ext:{type:"string"}},EC={id:{type:"string"},accid:{type:"string"},categoryId:{type:"string"},serverId:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},memberType:{type:"enum",values:Ip},joinTime:{type:"number"},inviter:{type:"string"}};function Sl(pe){var xe=zn({},pe),qe=Tp(Ms,xe);return qe.auths&&(qe.auths=function(Ne){var Lt,Dt=ed(Lt=ba(Ne)).call(Lt,function(Pt,ir){var vr=yl[ir];return vr?Pt[vr]=ad[Ne[ir]]:Pt[ir]=ad[Ne[ir]],Pt},{});return Io(Dt)}(qe.auths)),qe}function sd(pe){var xe;return ed(xe=ba(pe)).call(xe,function(qe,Oe){var Ne=L0(yl,Oe);return Ne?qe[Ne]=ad[pe[Oe]]:qe[ma(Oe)]=ad[pe[Oe]],qe},{})}function Pi(pe){var xe=qa(Ms,pe);return pe.auths&&(xe.auths=sd(JSON.parse(xe.auths))),xe.isMember&&delete xe.isMember,xe}function Ai(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return Pi(xe)}):[]}function _v(pe){return pe.auths&&(pe.auths=sd(JSON.parse(pe.auths))),qa(IC,pe)}function xv(pe){return pe.auths&&(pe.auths=sd(JSON.parse(pe.auths))),qa(EC,pe)}Xh("Set",function(pe){return function(){return pe(this,arguments.length?arguments[0]:void 0)}},ev);var H0=_r.Set;En({target:"Set",stat:!0,forced:!0},{from:c0}),En({target:"Set",stat:!0,forced:!0},{of:l0}),En({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var xe=po(this),qe=Xr(xe.add),Oe=0,Ne=arguments.length;Oe<Ne;Oe++)ze(qe,xe,arguments[Oe]);return xe}}),En({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:u0});var lu=Ol;En({target:"Set",proto:!0,real:!0,forced:!0},{every:function(xe){var qe=po(this),Oe=lu(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return!ia(Oe,function(Lt,Dt){if(!Ne(Lt,Lt,qe))return Dt()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(xe){var qe=po(this),Oe=new(Ui(qe,Er("Set")))(qe),Ne=Xr(Oe.delete);return ia(xe,function(Lt){ze(Ne,Oe,Lt)}),Oe}}),En({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(xe){var qe=po(this),Oe=lu(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0),Lt=new(Ui(qe,Er("Set"))),Dt=Xr(Lt.add);return ia(Oe,function(Pt){Ne(Pt,Pt,qe)&&ze(Dt,Lt,Pt)},{IS_ITERATOR:!0}),Lt}}),En({target:"Set",proto:!0,real:!0,forced:!0},{find:function(xe){var qe=po(this),Oe=lu(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(Lt,Dt){if(Ne(Lt,Lt,qe))return Dt(Lt)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),En({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(xe){var qe=po(this),Oe=new(Ui(qe,Er("Set"))),Ne=Xr(qe.has),Lt=Xr(Oe.add);return ia(xe,function(Dt){ze(Ne,qe,Dt)&&ze(Lt,Oe,Dt)}),Oe}}),En({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(xe){var qe=po(this),Oe=Xr(qe.has);return!ia(xe,function(Ne,Lt){if(ze(Oe,qe,Ne)===!0)return Lt()},{INTERRUPTED:!0}).stopped}}),En({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(xe){var qe=Ol(this),Oe=po(xe),Ne=Oe.has;return Ve(Ne)||(Oe=new(Er("Set"))(xe),Ne=Xr(Oe.has)),!ia(qe,function(Lt,Dt){if(ze(Ne,Oe,Lt)===!1)return Dt()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(xe){var qe=po(this),Oe=Xr(qe.has);return!ia(xe,function(Ne,Lt){if(ze(Oe,qe,Ne)===!1)return Lt()},{INTERRUPTED:!0}).stopped}});var PC=Ie([].join),z0=[].push;En({target:"Set",proto:!0,real:!0,forced:!0},{join:function(xe){var qe=po(this),Oe=lu(qe),Ne=xe===void 0?",":li(xe),Lt=[];return ia(Oe,z0,{that:Lt,IS_ITERATOR:!0}),PC(Lt,Ne)}}),En({target:"Set",proto:!0,real:!0,forced:!0},{map:function(xe){var qe=po(this),Oe=lu(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0),Lt=new(Ui(qe,Er("Set"))),Dt=Xr(Lt.add);return ia(Oe,function(Pt){ze(Dt,Lt,Ne(Pt,Pt,qe))},{IS_ITERATOR:!0}),Lt}});var AC=TypeError;En({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(xe){var qe=po(this),Oe=lu(qe),Ne=arguments.length<2,Lt=Ne?void 0:arguments[1];if(Xr(xe),ia(Oe,function(Dt){Ne?(Ne=!1,Lt=Dt):Lt=xe(Lt,Dt,Dt,qe)},{IS_ITERATOR:!0}),Ne)throw AC("Reduce of empty set with no initial value");return Lt}}),En({target:"Set",proto:!0,real:!0,forced:!0},{some:function(xe){var qe=po(this),Oe=lu(qe),Ne=Go(xe,arguments.length>1?arguments[1]:void 0);return ia(Oe,function(Lt,Dt){if(Ne(Lt,Lt,qe))return Dt()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(xe){var qe=po(this),Oe=new(Ui(qe,Er("Set")))(qe),Ne=Xr(Oe.delete),Lt=Xr(Oe.add);return ia(xe,function(Dt){ze(Ne,Oe,Dt)||ze(Lt,Oe,Dt)}),Oe}}),En({target:"Set",proto:!0,real:!0,forced:!0},{union:function(xe){var qe=po(this),Oe=new(Ui(qe,Er("Set")))(qe);return ia(xe,Xr(Oe.add),{that:Oe}),Oe}});var id,Ep,Qi,Pp,Tl,va,Nc,cd=H0;(function(pe){pe[pe.sendTime=1]="sendTime"})(id||(id={})),function(pe){pe[pe.text=0]="text",pe[pe.image=1]="image",pe[pe.audio=2]="audio",pe[pe.video=3]="video",pe[pe.geo=4]="geo",pe[pe.notification=5]="notification",pe[pe.file=6]="file",pe[pe.tip=10]="tip",pe[pe.robot=11]="robot",pe[pe.g2=12]="g2",pe[pe.custom=100]="custom"}(Ep||(Ep={})),function(pe){pe[pe.sending=1]="sending",pe[pe.success=2]="success",pe[pe.failed=3]="failed"}(Qi||(Qi={})),function(pe){pe[pe.notifyAll=1]="notifyAll",pe[pe.notifySubscribe=2]="notifySubscribe"}(Pp||(Pp={})),function(pe){pe[pe.unknown=0]="unknown",pe[pe.server=1]="server",pe[pe.channel=2]="channel",pe[pe.serverAccids=3]="serverAccids",pe[pe.channelAccids=4]="channelAccids",pe[pe.accids=5]="accids"}(Tl||(Tl={})),function(pe){pe[pe.serverMemberInvite=1]="serverMemberInvite",pe[pe.serverMemberInviteReject=2]="serverMemberInviteReject",pe[pe.serverMemberApply=3]="serverMemberApply",pe[pe.serverMemberApplyReject=4]="serverMemberApplyReject",pe[pe.serverCreate=5]="serverCreate",pe[pe.serverRemove=6]="serverRemove",pe[pe.serverUpdate=7]="serverUpdate",pe[pe.serverMemberInviteDone=8]="serverMemberInviteDone",pe[pe.serverMemberInviteAccept=9]="serverMemberInviteAccept",pe[pe.serverMemberApplyDone=10]="serverMemberApplyDone",pe[pe.serverMemberApplyAccept=11]="serverMemberApplyAccept",pe[pe.serverMemberKick=12]="serverMemberKick",pe[pe.serverMemberLeave=13]="serverMemberLeave",pe[pe.serverMemberUpdate=14]="serverMemberUpdate",pe[pe.channelCreate=15]="channelCreate",pe[pe.channelRemove=16]="channelRemove",pe[pe.channelUpdate=17]="channelUpdate",pe[pe.channelUpdateWhiteBlackIdentify=18]="channelUpdateWhiteBlackIdentify",pe[pe.channelUpdateWhiteBlackIdentifyUser=19]="channelUpdateWhiteBlackIdentifyUser",pe[pe.updateQuickComment=20]="updateQuickComment",pe[pe.channelCategoryCreate=21]="channelCategoryCreate",pe[pe.channelCategoryRemove=22]="channelCategoryRemove",pe[pe.channelCategoryUpdate=23]="channelCategoryUpdate",pe[pe.channelCategoryUpdateWhiteBlackIdentify=24]="channelCategoryUpdateWhiteBlackIdentify",pe[pe.channelCategoryUpdateWhiteBlackIdentifyUser=25]="channelCategoryUpdateWhiteBlackIdentifyUser",pe[pe.serverIdentifyAdd=26]="serverIdentifyAdd",pe[pe.serverIdentifyRemove=27]="serverIdentifyRemove",pe[pe.serverIdentifyUpdate=28]="serverIdentifyUpdate",pe[pe.channelIdentifyUpdate=29]="channelIdentifyUpdate",pe[pe.userIdentifyUpdate=30]="userIdentifyUpdate",pe[pe.channelVisibilityUpdate=31]="channelVisibilityUpdate",pe[pe.serverEnterLeave=32]="serverEnterLeave",pe[pe.serverMemberJoinByInviteCode=33]="serverMemberJoinByInviteCode",pe[pe.channelVisibilityToVisitorUpdate=34]="channelVisibilityToVisitorUpdate",pe[pe.myMemberInfoUpdated=35]="myMemberInfoUpdated",pe[pe.custom=100]="custom",pe[pe.msgTyping=101]="msgTyping"}(va||(va={})),function(pe){pe[pe.reply=1]="reply",pe[pe.thread=2]="thread",pe[pe.all=3]="all"}(Nc||(Nc={}));var Iv=function(){return zi.Date.now()},NC=/\s/,W0=function(xe){for(var qe=xe.length;qe--&&NC.test(xe.charAt(qe)););return qe},OC=/^\s+/,G0=function(xe){return xe&&xe.slice(0,W0(xe)+1).replace(OC,"")},Ev=/^[-+]0x[0-9a-f]+$/i,RC=/^0b[01]+$/i,K0=/^0o[0-7]+$/i,BC=parseInt,Nm=function(xe){if(typeof xe=="number")return xe;if(op(xe))return NaN;if(oi(xe)){var qe=typeof xe.valueOf=="function"?xe.valueOf():xe;xe=oi(qe)?qe+"":qe}if(typeof xe!="string")return xe===0?xe:+xe;xe=G0(xe);var Oe=RC.test(xe);return Oe||K0.test(xe)?BC(xe.slice(2),Oe?2:8):Ev.test(xe)?NaN:+xe},LC=Math.max,Q0=Math.min,FC=function(xe,qe,Oe){var Ne,Lt,Dt,Pt,ir,vr,Ir=0,Or=!1,jr=!1,Ur=!0;if(typeof xe!="function")throw new TypeError("Expected a function");function Yr(Fn){var go=Ne,Bo=Lt;return Ne=Lt=void 0,Ir=Fn,Pt=xe.apply(Bo,go)}function In(Fn){return Ir=Fn,ir=setTimeout(Dn,qe),Or?Yr(Fn):Pt}function Mn(Fn){var go=Fn-vr;return vr===void 0||go>=qe||go<0||jr&&Fn-Ir>=Dt}function Dn(){var Fn=Iv();if(Mn(Fn))return Wn(Fn);ir=setTimeout(Dn,function(Bo){var Do=qe-(Bo-vr);return jr?Q0(Do,Dt-(Bo-Ir)):Do}(Fn))}function Wn(Fn){return ir=void 0,Ur&&Ne?Yr(Fn):(Ne=Lt=void 0,Pt)}function Jn(){var Fn=Iv(),go=Mn(Fn);if(Ne=arguments,Lt=this,vr=Fn,go){if(ir===void 0)return In(vr);if(jr)return clearTimeout(ir),ir=setTimeout(Dn,qe),Yr(vr)}return ir===void 0&&(ir=setTimeout(Dn,qe)),Pt}return qe=Nm(qe)||0,oi(Oe)&&(Or=!!Oe.leading,Dt=(jr="maxWait"in Oe)?LC(Nm(Oe.maxWait)||0,qe):Dt,Ur="trailing"in Oe?!!Oe.trailing:Ur),Jn.cancel=function(){ir!==void 0&&clearTimeout(ir),Ir=0,Ne=vr=Lt=ir=void 0},Jn.flush=function(){return ir===void 0?Pt:Wn(Iv())},Jn},Ap=function(xe,qe,Oe){var Ne=!0,Lt=!0;if(typeof xe!="function")throw new TypeError("Expected a function");return oi(Oe)&&(Ne="leading"in Oe?!!Oe.leading:Ne,Lt="trailing"in Oe?!!Oe.trailing:Lt),FC(xe,qe,{leading:Ne,maxWait:qe,trailing:Lt})},Pv=function(xe,qe,Oe){var Ne=-1,Lt=xe.length;qe<0&&(qe=-qe>Lt?0:Lt+qe),(Oe=Oe>Lt?Lt:Oe)<0&&(Oe+=Lt),Lt=qe>Oe?0:Oe-qe>>>0,qe>>>=0;for(var Dt=Array(Lt);++Ne<Lt;)Dt[Ne]=xe[Ne+qe];return Dt},$C=1/0,jC=function(xe){return xe?(xe=Nm(xe))===$C||xe===-1/0?17976931348623157e292*(xe<0?-1:1):xe==xe?xe:0:xe===0?xe:0},Av=function(xe){var qe=jC(xe),Oe=qe%1;return qe==qe?Oe?qe-Oe:qe:0},Nv=Math.ceil,Ov=Math.max,Oc,uu=function(xe,qe,Oe){qe=(Oe?C0(xe,qe,Oe):qe===void 0)?1:Ov(Av(qe),0);var Ne=xe==null?0:xe.length;if(!Ne||qe<1)return[];for(var Lt=0,Dt=0,Pt=Array(Nv(Ne/qe));Lt<Ne;)Pt[Dt++]=Pv(xe,Lt,Lt+=qe);return Pt};(function(pe){pe[pe.sub=1]="sub",pe[pe.unSub=2]="unSub"})(Oc||(Oc={}));var Rv,J0=function(){function pe(qe){var Oe=this;this.unreadCount={},this.manualSubscribeUnreadMap={},this.manualSubscribeServerMap={},this.manualSubscribeTypingMap={},this.unreadServerCount={},this.serverRoleIdsMap={},this.autoSubscribeUnreadMap={},this.autoSubscribeServerMap={},this._serverUnreadInfo=Ap(function(Ne){Oe.core.emit("serverUnreadInfo",Oe.getServerUnreadInfo(Ne))},100),this.core=qe}var xe=pe.prototype;return xe.changeCacheServerRoleIds=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir,Or,jr=this;return Dr.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(Dt=Oe.attach.serverIdentifyInfo,Pt=Dt.serverId,ir=Dt.roleId,this.serverRoleIdsMap[Pt]){Yr.next=4;break}return Yr.next=4,this.getRoleIdsByServerId([Pt]);case 4:if(vr=this.serverRoleIdsMap[Pt],!(Oe.time<vr.timeTag)){Yr.next=7;break}return Yr.abrupt("return");case 7:if(Oe.type===va[va.serverIdentifyAdd]?vr.roleIds.add(ir):vr.roleIds.delete(ir),this.core.logger.debug("QChatChannel::qchatChannel/serverIdentifyChange::now "+Pt+" roleIds is",Hs(Lt=[]).call(Lt,vr.roleIds)),Ir=this.unreadServerCount[Pt]){Yr.next=12;break}return Yr.abrupt("return");case 12:Or=uu(ba(Ir),100),bo(Or).call(Or,function(In){jr.core.qchatChannel.getChannelUnreadInfos({channels:Fo(In).call(In,function(Mn){return{serverId:Pt,channelId:Mn}})})});case 14:case"end":return Yr.stop()}},Ne,this)}))},xe.getRoleIdsByServerId=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if((Dt=pi(Oe).call(Oe,function(jr){return!vr.serverRoleIdsMap[jr]})).length){Or.next=3;break}return Or.abrupt("return");case 3:return Pt={serverIdTimeTags:Dt},Or.next=6,this.core.sendCmd("qchatGetRoleIdsByServerId",{qchatGetRoleIdsByServerIdTag:Pt});case 6:ir=Or.sent,this.core.logger.debug("QChatChannel:: getRoleIdsByServerId, params is ",Pt,"result is",ir),bo(Lt=ir.content.serverRoles).call(Lt,function(jr){try{jr.roleIds=JSON.parse(jr.roleIds)}catch(Ur){vr.core.logger.error("QChatChannel:: getRoleIdsByServerId JSON parse roleIds error",Ur)}vr.serverRoleIdsMap[jr.serverId]={roleIds:new cd(jr.roleIds),timeTag:jr.timeTag}});case 9:case"end":return Or.stop()}},Ne,this)}))},xe._unSubscribeChannel=function(Oe,Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Dt=Oe+"_"+Ne,Pt=[],this.manualSubscribeUnreadMap[Dt]?Pt.push(this.manualSubscribeUnreadMap[Dt]):this.autoSubscribeUnreadMap[Dt]&&Pt.push(this.autoSubscribeUnreadMap[Dt]),this.manualSubscribeTypingMap[Dt]&&Pt.push(this.manualSubscribeTypingMap[Dt]),Pt.length!==0){jr.next=6;break}return jr.abrupt("return");case 6:for(ir=0,vr=Pt;ir<vr.length;ir++)Ir=vr[ir],this.subscribe({opeType:Oc.unSub,type:Ir,channels:[{serverId:Oe,channelId:Ne}]});this.manualSubscribeUnreadMap[Dt]?this.manualSubscribeUnreadMap[Dt]=void 0:this.autoSubscribeUnreadMap[Dt]&&(this.autoSubscribeUnreadMap[Dt]=void 0),this.manualSubscribeTypingMap[Dt]&&(this.manualSubscribeTypingMap[Dt]=void 0);case 9:case"end":return jr.stop()}},Lt,this)}))},xe._unSubscribeServer=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(Lt=Oe,Dt=this.manualSubscribeServerMap[Lt]||this.autoSubscribeServerMap[Lt]){ir.next=4;break}return ir.abrupt("return");case 4:this.subscribe({opeType:Oc.unSub,type:Dt,channels:[{serverId:Oe,channelId:""}]}),this.manualSubscribeServerMap[Lt]?this.manualSubscribeServerMap[Lt]=void 0:this.autoSubscribeServerMap[Lt]&&(this.autoSubscribeServerMap[Lt]=void 0);case 6:case"end":return ir.stop()}},Ne,this)}))},xe.subscribe=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},Oe),Or.next=3,this.core.sendCmd("qchatSubscribe",{qchatSubReqTag:{type:Oe.type,opeType:Oe.opeType},channels:Oe.channels});case 3:return Dt=Or.sent,Pt=new cd,bo(Lt=Oe.channels).call(Lt,function(jr){return hn(vr,void 0,void 0,Dr.mark(function Ur(){return Dr.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:this.serverRoleIdsMap[jr.serverId]||Pt.add(jr.serverId);case 1:case"end":return In.stop()}},Ur,this)}))}),ir=uu(pl(Pt),10),bo(ir).call(ir,function(jr){vr.getRoleIdsByServerId(jr)}),Or.abrupt("return",Dt.content);case 9:case"end":return Or.stop()}},Ne,this)}))},xe.autoSubscribe=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){return Dr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.core.sendCmd("qchatAutoSubscribe",{qchatAutoSubReqTag:{}});case 2:case"end":return Lt.stop()}},Oe,this)}))},xe.resumeSubscribe=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir,Or,jr=this;return Dr.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(this.serverRoleIdsMap={},vr=100,Oe.isAutoReconnect){Yr.next=6;break}return this.unreadServerCount={},this.unreadCount={},Yr.abrupt("return");case 6:return Ir={},bo(Lt=ba(this.manualSubscribeUnreadMap)).call(Lt,function(In){var Mn=jr.manualSubscribeUnreadMap[In];if(Mn){var Dn=In.split("_"),Wn={serverId:Dn[0],channelId:Dn[1]};Ir[Mn]=Ir[Mn]||[],Ir[Mn].push(Wn)}}),Ir[5]=[],bo(Dt=ba(this.manualSubscribeTypingMap)).call(Dt,function(In){return hn(jr,void 0,void 0,Dr.mark(function Mn(){var Dn,Wn,Jn,Fn;return Dr.wrap(function(Bo){for(;;)switch(Bo.prev=Bo.next){case 0:this.manualSubscribeTypingMap[In]&&(Dn=In.split("_"),Wn=Dn[0],Jn=Dn[1],Fn={serverId:Wn,channelId:Jn},Ir[5].push(Fn));case 2:case"end":return Bo.stop()}},Mn,this)}))}),Ir[4]=[],bo(Pt=ba(this.manualSubscribeServerMap)).call(Pt,function(In){return hn(jr,void 0,void 0,Dr.mark(function Mn(){var Dn;return Dr.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:this.manualSubscribeServerMap[In]&&(Dn={serverId:In},Ir[4].push(Dn));case 2:case"end":return Jn.stop()}},Mn,this)}))}),Or=[],bo(ir=ba(Ir)).call(ir,function(In){var Mn=Ir[In];if(Mn&&Mn.length===0)return ca.resolve();if(Mn.length>vr){var Dn=uu(Mn,100);return bo(Dn).call(Dn,function(Wn){Or.push(jr.createSubscribePromise(Wn,In))})}Or.push(jr.createSubscribePromise(Mn,In))}),Yr.next=16,ca.all(Or);case 16:case"end":return Yr.stop()}},Ne,this)}))},xe.createSubscribePromise=function(Oe,Ne){var Lt=this,Dt={type:ma(Ne),opeType:1,channels:Oe};return this.core.logger.debug("qchatChannel:: autoSubscribeUnread params",Dt),this.subscribe(Dt).then(function(Pt){var ir=Pt.unreadInfos;ir&&ir.length>0&&(ir=od(ir),Lt.updateUnreads(ir))}).catch(function(Pt){Lt.core.logger.error("qchatChannel:: autoSubscribeUnread error ",Pt)})},xe.cacheSubscribe=function(Oe){var Ne,Lt=this;bo(Ne=Oe.channels).call(Ne,function(Dt){var Pt=Dt.channelId?Dt.serverId+"_"+Dt.channelId:""+Dt.serverId,ir=Oe.type===5?Lt.manualSubscribeTypingMap:Oe.type===4?Lt.manualSubscribeServerMap:Lt.manualSubscribeUnreadMap;Oe.opeType===Oc.sub?ir[Pt]=Oe.type:Oe.opeType===Oc.unSub&&(ir[Pt]=void 0)})},xe.cacheAutoSubscribe=function(Oe){var Ne,Lt=this;bo(Ne=Oe.channels).call(Ne,function(Dt){var Pt=Dt.channelId?Dt.serverId+"_"+Dt.channelId:""+Dt.serverId,ir=Oe.type===4?Lt.autoSubscribeServerMap:Lt.autoSubscribeUnreadMap;Oe.opeType===Oc.sub?ir[Pt]=Oe.type:Oe.opeType===Oc.unSub&&(ir[Pt]=void 0)})},xe.cacheUnreadCount=function(Oe){var Ne=this;bo(Oe).call(Oe,function(Lt){var Dt=Lt.serverId+"_"+Lt.channelId;Ne.unreadCount[Dt]=zn({},Lt),Ne.unreadServerCount[Lt.serverId]||(Ne.unreadServerCount[Lt.serverId]={}),Ne.unreadServerCount[Lt.serverId][Lt.channelId]=!0})},xe.getServerUnreadInfo=function(Oe){var Ne,Lt=this,Dt={serverId:Oe,unreadCount:0,mentionedCount:0,maxCount:0},Pt=this.unreadServerCount[Oe];return Pt&&(bo(Ne=ba(Pt)).call(Ne,function(ir){var vr=Oe+"_"+ir,Ir=Lt.unreadCount[vr];Dt.unreadCount+=Ir.unreadCount,Dt.mentionedCount+=Ir.mentionedCount,Ir.maxCount!==void 0&&(Dt.maxCount=Ir.maxCount)}),Dt.unreadCount=Dt.unreadCount>Dt.maxCount?Dt.maxCount:Dt.unreadCount,Dt.mentionedCount=Dt.mentionedCount>Dt.maxCount?Dt.maxCount:Dt.mentionedCount),Dt},xe.getUnreadInfo=function(Oe){jn({serverId:{type:"string"},channelId:{type:"string"}},Oe);var Ne=Oe.serverId+"_"+Oe.channelId;return this.unreadCount[Ne]?this.unreadCount[Ne]:null},xe.shouldChangeUnread=function(Oe,Ne){if(!Oe.serverId||!Oe.channelId||this.core.qchatChannel.subscribeForVisitorService.isInSubscribeChannels(Oe.serverId,Oe.channelId)||Oe.historyEnable===!1||Oe.needBadge===!1||Oe.fromAccount===this.core.account||Ne&&(Oe==null?void 0:Oe.status)!==2)return!1;if(Oe.notifyReason&&Oe.notifyReason===L0(Pp,Pp.notifySubscribe)){if(!Oe.serverId||!Oe.channelId)return!1;var Lt=this.getUnreadInfo({serverId:Oe.serverId,channelId:Oe.channelId}),Dt=Ne?"ackTimestamp":"lastMsgTime";if(!Lt||Oe.time&&Lt[Dt]&&Lt[Dt]>Oe.time)return!1}return!0},xe.shouldChangeMentionedUnread=function(Oe,Ne){return Ne===void 0&&(Ne=!1),hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(!Oe.accidsOfMentionedRoles||!Ci(Dt=Oe.accidsOfMentionedRoles).call(Dt,this.core.account)){vr.next=2;break}return vr.abrupt("return",!0);case 2:if(!Oe.mentionRoleIds||!Oe.serverId){vr.next=16;break}if(this.serverRoleIdsMap[Oe.serverId]){vr.next=9;break}if(Ne){vr.next=7;break}return this.handledRoleMsg(Oe),vr.abrupt("return",!1);case 7:return vr.next=9,this.getRoleIdsByServerId([Oe.serverId]);case 9:Pt=0;case 10:if(!(Pt<Oe.mentionRoleIds.length)){vr.next=16;break}if(!this.serverRoleIdsMap[Oe.serverId].roleIds.has(Oe.mentionRoleIds[Pt])){vr.next=13;break}return vr.abrupt("return",!0);case 13:Pt++,vr.next=10;break;case 16:return vr.abrupt("return",!1);case 17:case"end":return vr.stop()}},Lt,this)}))},xe.handledRoleMsg=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Oe.mentionRoleIds){jr.next=2;break}return jr.abrupt("return");case 2:if(this.serverRoleIdsMap[Oe.serverId]){jr.next=5;break}return jr.next=5,this.getRoleIdsByServerId([Oe.serverId]);case 5:if(this.serverRoleIdsMap[Oe.serverId]){jr.next=8;break}return this.core.logger.warn("QChatChannel::handledRoleMsg::can not get serverRoleIds,server id",Oe.serverId),jr.abrupt("return");case 8:if(Dt=!1,bo(Lt=Oe.mentionRoleIds).call(Lt,function(Ur){Ir.serverRoleIdsMap[Oe.serverId].roleIds.has(Ur)&&(Dt=!0,Ir.core.logger.debug("QChatChannel::handledRoleMsg::will update message mentionedCount，message is ",Oe))}),Dt){jr.next=12;break}return jr.abrupt("return");case 12:if(Pt=this.unreadCount[Oe.serverId+"_"+Oe.channelId],ir=(Oe==null?void 0:Oe.status)===2,Pt.mentionedCount=ir?Pt.mentionedCount?Pt.mentionedCount-1:0:Pt.mentionedCount?Pt.mentionedCount+1:1,typeof Pt.maxCount!="number"){jr.next=24;break}if(!((vr=(vr=Pt.mentionedCount)>Pt.maxCount?Pt.maxCount:vr)>Pt.maxCount)){jr.next=21;break}return this.core.logger.debug("QChatChannel::handledRoleMsg::tempUnreadCount more than maxCount"),jr.abrupt("return");case 21:this.core.emit("unreadInfo",zn(zn({},Pt),{mentionedCount:vr})),this.core.emit("unreadInfos",[zn(zn({},Pt),{mentionedCount:vr})]),this._serverUnreadInfo(Oe.serverId);case 24:case"end":return jr.stop()}},Ne,this)}))},xe.getMentionedFlag=function(Oe,Ne){return Ne===void 0&&(Ne=!1),hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!Oe.mentionAll){ir.next=4;break}return ir.abrupt("return",!0);case 4:if(!Oe.mentionRoleIds&&!Oe.accidsOfMentionedRoles){ir.next=10;break}return ir.next=7,this.shouldChangeMentionedUnread(Oe,Ne);case 7:return ir.abrupt("return",ir.sent);case 10:if(!Oe.mentionAccids||!Ci(Dt=Oe.mentionAccids).call(Dt,this.core.account)){ir.next=12;break}return ir.abrupt("return",!0);case 12:return ir.abrupt("return",!1);case 13:case"end":return ir.stop()}},Lt,this)}))},xe.changeUnread=function(Oe,Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir,Or,jr;return Dr.wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(Dt=Oe.serverId,Pt=Oe.channelId,ir=Dt+"_"+Pt,this.shouldChangeUnread(Oe,Ne)){Yr.next=6;break}return this.core.logger.debug("changeUnread: "+ir+" does not need to update unreadInfo"),Yr.abrupt("return");case 6:if(this.unreadCount[ir]){Yr.next=11;break}return Yr.next=9,this.core.qchatChannel.getChannelUnreadInfos({channels:[{serverId:Dt,channelId:Pt}]});case 9:return!this.serverRoleIdsMap[Dt]&&Oe.mentionRoleIds&&this.getRoleIdsByServerId([Dt]),Yr.abrupt("return");case 11:return vr=this.unreadCount[ir],Ir=(Oe==null?void 0:Oe.status)===2,Yr.next=15,this.getMentionedFlag(Oe);case 15:if(Or=Yr.sent,Ir?(vr.unreadCount=vr.unreadCount?vr.unreadCount-1:0,Or&&(vr.mentionedCount=vr.mentionedCount?vr.mentionedCount-1:0),delete vr.lastMsgTime,this.core.logger.debug("changeUnread: "+ir+" unread reduce ",vr)):(vr.unreadCount=vr.unreadCount?vr.unreadCount+1:1,Or&&(vr.mentionedCount=vr.mentionedCount?vr.mentionedCount+1:1),Oe.time&&(vr.lastMsgTime=Oe.time),this.core.logger.debug("changeUnread: "+ir+" unread add ",vr)),jr=typeof vr.maxCount=="number"?vr.maxCount:100,!(vr.unreadCount>jr)){Yr.next=21;break}return this.core.logger.debug("QChatChannel::subscribe::tempUnreadCount more than maxCount"),Yr.abrupt("return");case 21:this.core.logger.warn("unreadInfo event will abandon,please use unreadInfos"),this.core.emit("unreadInfo",zn(zn({},vr),{mentionedCount:vr.mentionedCount>jr?jr:vr.mentionedCount,unreadCount:vr.unreadCount>jr?jr:vr.unreadCount})),this.core.emit("unreadInfos",[zn(zn({},vr),{mentionedCount:vr.mentionedCount>jr?jr:vr.mentionedCount,unreadCount:vr.unreadCount>jr?jr:vr.unreadCount})]),this._serverUnreadInfo(Dt);case 25:case"end":return Yr.stop()}},Lt,this)}))},xe.updateUnreads=function(Oe){var Ne,Lt,Dt=this;if(Oe&&Oe.length>0){var Pt=[],ir=[],vr=Fo(Ne=pi(Oe).call(Oe,function(Or){var jr=Or.serverId+"_"+Or.channelId,Ur=Dt.unreadCount[jr],Yr=us(Ur,"ackTimestamp"),In=us(Or,"ackTimestamp");return!(Yr&&In&&In<Yr)&&(us(Ur,"unreadCount")!==us(Or,"unreadCount")||us(Ur,"mentionedCount")!==us(Or,"mentionedCount"))})).call(Ne,function(Or){Pt.push(Dt.getServerUnreadInfo(Or.serverId)),ir.push(Dt.unreadServerCount[Or.serverId]);var jr=Or.serverId,Ur=Or.channelId,Yr=jr+"_"+Ur;return Dt.core.logger.debug("qchat channel updateUnread: ",Or),Dt.unreadCount[Yr]=zn({},Or),Dt.unreadServerCount[jr]||(Dt.unreadServerCount[jr]={}),Dt.unreadServerCount[jr][Ur]=!0,Or});if(vr.length!==0){this.core.emit("unreadInfos",vr);var Ir={};bo(vr).call(vr,function(Or,jr){Dt.core.emit("unreadInfo",Or);var Ur=Pt[jr],Yr=ir[jr],In=Dt.getServerUnreadInfo(Or.serverId),Mn=Dt.unreadServerCount[Or.serverId],Dn=Ur.unreadCount!==In.unreadCount,Wn=!Yr||ba(Yr).length===0,Jn=Mn&&ba(Mn).length>0,Fn=Ur.mentionedCount!==In.mentionedCount;(Dn||Fn||Wn&&Jn)&&(Ir[Or.serverId]=!0)}),bo(Lt=ba(Ir)).call(Lt,function(Or){return Dt.core.emit("serverUnreadInfo",Dt.getServerUnreadInfo(Or))})}}},xe.clearUnreadCountByServers=function(Oe,Ne){var Lt=this,Dt=[];bo(Oe).call(Oe,function(ir){var vr;Lt.unreadServerCount[ir]&&bo(vr=ba(Lt.unreadServerCount[ir])).call(vr,function(Ir){Dt.push(ir+"_"+Ir)})});var Pt=[];bo(Dt).call(Dt,function(ir){Pt.push(zn(zn({},Lt.unreadCount[ir]),{unreadCount:0,mentionedCount:0,ackTimestamp:Ne}))}),this.updateUnreads(Pt)},pe}(),Y0=function(){function pe(qe){this.limitForBatchEnter=10,this.limitForBatchSubscribe=100,this.autoServers=new cd,this.autoVisitorSubscribeServer=new cd,this.autoVisitorSubscribeChannel=new cd,this.core=qe}var xe=pe.prototype;return xe.subscribeChannelAsVisitor=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr=this;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Or.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:Oe.type||6,opeType:Oe.opeType},datas:Oe.channels});case 2:return Dt=Or.sent,Pt=Dt.content.failedArr,ir=pi(Lt=Oe.channels).call(Lt,function(jr){return!Kd(Pt).call(Pt,function(Ur){return Ur.channelId===jr.channelId&&Ur.serverId===jr.serverId})}),bo(ir).call(ir,function(jr){Oe.opeType===1?vr.autoVisitorSubscribeChannel.add(jr.serverId+"&"+jr.channelId):vr.autoVisitorSubscribeChannel.delete(jr.serverId+"&"+jr.channelId)}),Or.abrupt("return",{failedChannels:Pt});case 7:case"end":return Or.stop()}},Ne,this)}))},xe.subscribeServerAsVisitor=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir,Or=this;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Ur.next=2,this.core.sendCmd("qchatSubscribeAsVisitor",{tag:{type:Oe.type||7,opeType:Oe.opeType},datas:Fo(Lt=Oe.serverIds).call(Lt,function(Yr){return{serverId:Yr}})});case 2:return ir=Ur.sent,vr=ir.content.failedArr,Ir=pi(Dt=Oe.serverIds).call(Dt,function(Yr){return!Kd(vr).call(vr,function(In){return In.serverId===Yr})}),bo(Ir).call(Ir,function(Yr){Oe.opeType===1?Or.autoVisitorSubscribeServer.add(Yr):Or.autoVisitorSubscribeServer.delete(Yr)}),Ur.abrupt("return",{failedServers:Fo(Pt=ir.content.failedArr).call(Pt,function(Yr){return Yr.serverId})});case 7:case"end":return Ur.stop()}},Ne,this)}))},xe.deleteServer=function(Oe){var Ne;this.autoServers.delete(Oe),this.autoVisitorSubscribeServer.has(Oe)&&this.subscribeServerAsVisitor({opeType:2,serverIds:[Oe]});var Lt=[];bo(Ne=this.autoVisitorSubscribeChannel).call(Ne,function(Dt){if(ta(Dt).call(Dt,Oe)===0){var Pt=Dt.replace(Oe+"&","");Lt.push({serverId:Oe,channelId:Pt})}}),Lt.length>0&&this.subscribeChannelAsVisitor({opeType:2,channels:Lt})},xe.deleteAutoSetInServerId=function(Oe){var Ne,Lt=this;this.autoServers.delete(Oe),this.autoVisitorSubscribeServer.delete(Oe),bo(Ne=this.autoVisitorSubscribeChannel).call(Ne,function(Dt){ta(Dt).call(Dt,Oe)===0&&Lt.autoVisitorSubscribeChannel.delete(Dt)})},xe.deleteAutoSetInChannel=function(Oe,Ne){this.autoVisitorSubscribeChannel.delete(Oe+"&"+Ne)},xe.unSubscribeChannel=function(Oe,Ne){this.subscribeChannelAsVisitor({opeType:2,channels:[{serverId:Oe,channelId:Ne}]})},xe.isInSubscribeChannels=function(Oe,Ne){return this.autoVisitorSubscribeChannel.has(Oe+"&"+Ne)},xe.isInAutoServers=function(Oe){return this.autoServers.has(Oe)},xe.doAutoSubscribe=function(){var Oe=this,Ne=[],Lt=uu(pl(this.autoVisitorSubscribeServer),this.limitForBatchSubscribe);bo(Lt).call(Lt,function(Pt){Ne.push(Oe.subscribeServerAsVisitor({opeType:1,serverIds:Pt}))});var Dt=uu(pl(this.autoVisitorSubscribeChannel),this.limitForBatchSubscribe);return bo(Dt).call(Dt,function(Pt){Ne.push(Oe.subscribeChannelAsVisitor({opeType:1,channels:Fo(Pt).call(Pt,function(ir){var vr=ta(ir).call(ir,"&");return{serverId:Da(ir).call(ir,0,vr),channelId:Da(ir).call(ir,vr+1)}})}))}),ca.all(Ne)},xe.doAutoEnterServer=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){var Ne,Lt,Dt,Pt=this;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return Ne=uu(pl(this.autoServers),this.limitForBatchEnter),Lt=[],bo(Ne).call(Ne,function(Ir){Lt.push(Pt.core.qchatServer.enterAsVisitor({serverIds:Ir}))}),vr.next=5,ca.all(Lt);case 5:Dt=vr.sent,bo(Dt).call(Dt,function(Ir){var Or;bo(Or=Ir.failedServers).call(Or,function(jr){Pt.deleteAutoSetInServerId(jr)})});case 7:case"end":return vr.stop()}},Oe,this)}))},xe.resumeSubscribe=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(!Oe.isAutoReconnect){Dt.next=7;break}return Dt.next=3,this.doAutoEnterServer();case 3:return Dt.next=5,this.doAutoSubscribe();case 5:Dt.next=10;break;case 7:this.autoServers.clear(),this.autoVisitorSubscribeChannel.clear(),this.autoVisitorSubscribeServer.clear();case 10:case"end":return Dt.stop()}},Ne,this)}))},xe.cacheServer=function(Oe){var Ne=this;bo(Oe).call(Oe,function(Lt){return Ne.autoServers.add(Lt)})},pe}();function DC(pe,xe){var qe,Oe=zs!==void 0&&Sm(pe)||pe["@@iterator"];if(Oe)return oa(qe=(Oe=Oe.call(pe)).next).call(qe,Oe);if(Ts(pe)||(Oe=function(Dt,Pt){var ir;if(Dt){if(typeof Dt=="string")return X0(Dt,Pt);var vr=Da(ir=Object.prototype.toString.call(Dt)).call(ir,8,-1);if(vr==="Object"&&Dt.constructor&&(vr=Dt.constructor.name),vr==="Map"||vr==="Set")return pl(Dt);if(vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vr))return X0(Dt,Pt)}}(pe))||xe&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ne=0;return function(){return Ne>=pe.length?{done:!0}:{done:!1,value:pe[Ne++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0(pe,xe){(xe==null||xe>pe.length)&&(xe=pe.length);for(var qe=0,Oe=new Array(xe);qe<xe;qe++)Oe[qe]=pe[qe];return Oe}(function(pe){pe[pe.sub=1]="sub",pe[pe.unSub=2]="unSub"})(Rv||(Rv={}));var UC=function(pe){function xe(Oe){var Ne,Lt,Dt,Pt,ir,vr;return(vr=pe.call(this,"qchatChannel",Oe)||this).core=Oe,ou({cmdMap:iu,cmdConfig:bp}),vr.subscribeModuleService=new J0(Oe),vr.subscribeForVisitorService=new Y0(Oe),vr.core.eventBus.on("qchatChannel/changeUnread",oa(Ne=vr.subscribeModuleService.changeUnread).call(Ne,vr.subscribeModuleService)),vr.core.eventBus.on("qchatChannel/updateUnreads",oa(Lt=vr.subscribeModuleService.updateUnreads).call(Lt,vr.subscribeModuleService)),vr.core.eventBus.on("qchatChannel/cacheSubscribe",oa(Dt=vr.subscribeModuleService.cacheSubscribe).call(Dt,vr.subscribeModuleService)),vr.core.eventBus.on("qchatChannel/clearUnreadCountByServers",oa(Pt=vr.subscribeModuleService.clearUnreadCountByServers).call(Pt,vr.subscribeModuleService)),vr.core.eventBus.on("qchatChannel/getRoleIdsByServerId",oa(ir=vr.subscribeModuleService.getRoleIdsByServerId).call(ir,vr.subscribeModuleService)),vr.core.eventBus.on("logined",function(Ir){var Or;vr.subscribeModuleService.resumeSubscribe(Ir),vr.subscribeForVisitorService.resumeSubscribe(Ir),!((Or=vr.core.otherOptions.qchatChannelConfig)===null||Or===void 0)&&Or.autoSubscribe&&(vr.subscribeModuleService.autoSubscribeServerMap={},vr.subscribeModuleService.autoSubscribeUnreadMap={},vr.subscribeModuleService.autoSubscribe())}),vr.core.eventBus.on("qchatChannel/autoUnSubscribe",function(Ir){if(vr.logger.log("QChatChannel::enter autoUnSubscribe sysMsg is",Ir),Ir.type===va[va.channelVisibilityUpdate])vr.logger.log("QChatChannel::begin autoUnSubscribe channel key is",Ir.serverId+"_"+Ir.channelId),vr.subscribeModuleService._unSubscribeChannel(Ir.serverId,Ir.channelId),vr.logger.log("QChatChannel::autoUnSubscribe channel done key is",Ir.serverId+"_"+Ir.channelId);else if(Ir.type===va[va.serverEnterLeave]){var Or;(vr.subscribeModuleService.manualSubscribeServerMap[Ir.serverId]||vr.subscribeModuleService.autoSubscribeServerMap[Ir.serverId])&&(vr.logger.log("QChatChannel::begin autoUnSubscribe server key is",Ir.serverId),vr.subscribeModuleService._unSubscribeServer(Ir.serverId),vr.logger.log("QChatChannel::autoUnSubscribe server done key is",Ir.serverId));var jr=vr.subscribeModuleService.unreadServerCount[Ir.serverId];if(!jr)return;vr.logger.log("QChatChannel::begin autoUnSubscribe channels key is",ba(jr)),bo(Or=ba(jr)).call(Or,function(Ur){vr.subscribeModuleService._unSubscribeChannel(Ir.serverId,Ur)}),vr.logger.log("QChatChannel::autoUnSubscribe channels done key is",ba(jr))}}),vr.core.eventBus.on("qchatChannel/serverIdentifyChange",function(Ir){vr.subscribeModuleService.changeCacheServerRoleIds(Ir)}),vr}ra(xe,pe);var qe=xe.prototype;return qe.createChannel=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",min:1},type:{type:"enum",values:Ia(Ii)},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatCreateChannel",{channelInfo:zn(zn({},Ne),{type:Ii[Ne.type]}),antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",nd(Dt.content.channelInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.deleteChannel=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({channelId:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatDeleteChannel",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateChannel=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({channelId:{type:"string",min:1},serverId:{type:"string",required:!1},type:{type:"enum",values:Ia(Ii),required:!1},name:{type:"string",required:!1},topic:{type:"string",required:!1},ext:{type:"string",required:!1},visitorMode:{type:"number",required:!1}},Ne),Dt=Ne,Ne.type&&(Dt.type=Ii[Ne.type]),vr.next=5,this.core.sendCmd("qchatUpdateChannel",{channelInfo:Dt,antispamTag:mc(Ne)});case 5:return Pt=vr.sent,vr.abrupt("return",nd(Pt.content.channelInfo));case 7:case"end":return vr.stop()}},Lt,this)}))},qe.getChannels=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({channelIds:{type:"array",itemType:"string",min:1}},Ne),ir.next=3,this.core.sendCmd("qchatGetChannels",Ne);case 3:return Dt=ir.sent,ir.abrupt("return",Em(Dt.content.channelList));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getChannelsByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetChannelsByPage",{qchatGetChannelListPageTag:zn({limit:100},Ne)});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:Em(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.getMembersByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetMembersByPage",{qchatGetMembersByPageTag:Ne});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.updateWhiteBlackRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},roleId:{type:"string",min:1},type:{type:"enum",values:Ia(Ea)},opeType:{type:"enum",values:Ia(xi)}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateWhiteBlackRole",{qchatUpdateWhiteBlackRoleTag:zn(zn({},Ne),{type:Ea[Ne.type],opeType:xi[Ne.opeType]})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getWhiteBlackRolesPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ia(Ea)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetWhiteBlackRolesPage",{qchatGetWhiteBlackRolesPageTag:zn(zn({},Ne),{type:Ea[Ne.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:Ai(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.updateWhiteBlackMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ia(Ea)},opeType:{type:"enum",values:Ia(xi)},toAccids:{type:"array",itemType:"string",min:1}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateWhiteBlackMembers",{qchatUpdateWhiteBlackMembersTag:zn(zn({},Ne),{type:Ea[Ne.type],opeType:xi[Ne.opeType],toAccids:Io(Ne.toAccids)})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getWhiteBlackMembersPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ia(Ea)},timetag:{type:"number"},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetWhiteBlackMembersPage",{qchatGetWhiteBlackMembersPageTag:zn(zn({limit:100},Ne),{type:Ea[Ne.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.getExistingWhiteBlackRoles=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ia(Ea)},roleIds:{type:"array",itemType:"string",min:1}},Ne),vr.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackRoles",{qchatGetExistingWhiteBlackRolesTag:zn(zn({},Ne),{type:Ea[Ne.type],roleIds:Io(Ne.roleIds)})});case 3:return Dt=vr.sent,Pt=Dt.content.datas,vr.abrupt("return",{datas:Ai(Pt)});case 6:case"end":return vr.stop()}},Lt,this)}))},qe.getExistingWhiteBlackMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({serverId:{type:"string",min:1},channelId:{type:"string",min:1},type:{type:"enum",values:Ia(Ea)},accids:{type:"array",itemType:"string",min:1}},Ne),vr.next=3,this.core.sendCmd("qchatGetExistingWhiteBlackMembers",{qchatGetExistingWhiteBlackMembersTag:zn(zn({},Ne),{type:Ea[Ne.type],accids:Io(Ne.accids)})});case 3:return Dt=vr.sent,Pt=Dt.content.datas,vr.abrupt("return",{datas:hl(Pt)});case 6:case"end":return vr.stop()}},Lt,this)}))},qe.updateCategoryInfoOfChannel=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({channelId:{type:"string",min:1},categoryId:{type:"string",allowEmpty:!1,required:!1},syncMode:{type:"number",min:0,max:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateCategoryInfoOfChannel",{qchatUpdateCategoryInfoOfChannelTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",nd(Dt.content.channelInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.createChannelCategory=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatCreateChannelCategory",{qchatCreateChannelCategoryTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",_p(Dt.content.QChatChannelCategoryInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.removeChannelCategory=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatRemoveChannelCategory",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateChannelCategory=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},ext:{type:"string",required:!1},viewMode:{type:"number",min:0,max:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateChannelCategory",{qchatUpdateChannelCategoryTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",_p(Dt.content.QChatChannelCategoryInfo));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getChannelCategoriesByID=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({categoryIds:{type:"array",itemType:"string",min:1}},Ne),ir.next=3,this.core.sendCmd("qchatGetChannelCategoriesByID",Ne);case 3:return Dt=ir.sent,ir.abrupt("return",Ac(Dt.content.channelCategoryList));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.updateChannelCategoryWhiteBlackRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ea)},opeType:{type:"enum",values:Ia(xi)},roleId:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackRole",{qchatUpdateChannelCategoryWhiteBlackRoleTag:zn(zn({},Ne),{type:Ea[Ne.type],opeType:xi[Ne.opeType]})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getChannelCategoryWhiteBlackRolesPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ea)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRolesPage",{qchatGetChannelCategoryWhiteBlackRolesPageTag:zn(zn({},Ne),{type:Ea[Ne.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:Ai(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.updateChannelCategoryWhiteBlackMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ea)},opeType:{type:"enum",values:Ia(xi)},toAccids:{type:"array",itemType:"string",min:1}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryWhiteBlackMembers",{qchatUpdateChannelCategoryWhiteBlackMembersTag:zn(zn({},Ne),{type:Ea[Ne.type],opeType:xi[Ne.opeType],toAccids:Io(Ne.toAccids)})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getChannelCategoryWhiteBlackMembersPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ea)},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembersPage",{qchatGetChannelCategoryWhiteBlackMembersPageTag:zn(zn({},Ne),{type:Ea[Ne.type]})});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:hl(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.getChannelCategoryWhiteBlackRoles=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ea)},roleIds:{type:"array",itemType:"string",min:1}},Ne),vr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackRoles",{qchatGetChannelCategoryWhiteBlackRolesTag:zn(zn({},Ne),{type:Ea[Ne.type],roleIds:Io(Ne.roleIds)})});case 3:return Dt=vr.sent,Pt=Dt.content.datas,vr.abrupt("return",Ai(Pt));case 6:case"end":return vr.stop()}},Lt,this)}))},qe.getChannelCategoryWhiteBlackMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({categoryId:{type:"string",allowEmpty:!1},serverId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ea)},accids:{type:"array",itemType:"string",min:1}},Ne),vr.next=3,this.core.sendCmd("qchatGetChannelCategoryWhiteBlackMembers",{qchatGetChannelCategoryWhiteBlackMembersTag:zn(zn({},Ne),{type:Ea[Ne.type],accids:Io(Ne.accids)})});case 3:return Dt=vr.sent,Pt=Dt.content.datas,vr.abrupt("return",hl(Pt));case 6:case"end":return vr.stop()}},Lt,this)}))},qe.getChannelCategoriesPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetChannelCategoriesPage",{qchatGetChannelCategoriesPageTag:Ne});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:Ac(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.getChannelCategoryChannelsPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0},limit:{type:"number",min:1,required:!1}},Ne),Or.next=3,this.core.sendCmd("qchatGetChannelCategoryChannelsPage",{qchatGetChannelCategoryChannelsPageTag:Ne});case 3:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag)},datas:Em(ir)});case 6:case"end":return Or.stop()}},Lt,this)}))},qe.subscribeChannel=function(Ne){var Lt,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({type:{type:"number",min:1,max:5},opeType:{type:"number",min:1,max:2}},Ne),!(!((Lt=this.core.otherOptions.qchatChannelConfig)===null||Lt===void 0)&&Lt.autoSubscribe)||Ne.isInternalTrigger||Ne.type===5){Or.next=3;break}throw new Ao("subscribe server failed, manual subscribe is not allowed in auto subscribe mode",{},403);case 3:return Or.next=5,this.subscribeModuleService.subscribe(Ne);case 5:if((ir=Or.sent).unreadInfos=od(ir.unreadInfos),Ne.type!==5){Or.next=10;break}return this.subscribeModuleService.cacheSubscribe(Ne),Or.abrupt("return");case 10:return Ne.opeType===1&&(Ne.channels=Fo(vr=ir.unreadInfos).call(vr,function(jr){return{serverId:jr.serverId,channelId:jr.channelId}})),this.logger.debug("QChatChannel::subscribeChannel:: cacheSubscribe ",Ne),!((Dt=this.core.otherOptions.qchatChannelConfig)===null||Dt===void 0)&&Dt.autoSubscribe?this.subscribeModuleService.cacheAutoSubscribe(Ne):this.subscribeModuleService.cacheSubscribe(Ne),this.subscribeModuleService.updateUnreads(ir.unreadInfos),Or.abrupt("return",ir);case 15:case"end":return Or.stop()}},Pt,this)}))},qe.getChannelUnreadInfos=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.next=2,this.core.sendCmd("qchatGetUnreadInfo",Ne);case 2:return Dt=vr.sent,Pt=od(Dt.content.unreadInfos),this.subscribeModuleService.updateUnreads(Pt),vr.abrupt("return",Pt);case 6:case"end":return vr.stop()}},Lt,this)}))},qe.getChannelSearchByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(jn({keyword:{type:"string",allowEmpty:!1},startTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:1,required:!1},order:{type:"enum",values:Ia(ml),required:!1},limit:{type:"number",min:1,required:!1},serverId:{type:"string",required:!1},sort:{type:"enum",values:Ia(kp),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),!(Ne.startTime&&Ne.endTime&&Ne.startTime>=Ne.endTime)){Or.next=3;break}throw new ru("startTime more than endTime",Ne,"timeRule");case 3:return Or.next=5,this.core.sendCmd("qchatGetChannelSearchByPage",{qchatGetChannelSearchByPageTag:zn(zn({},Ne),{order:Ne.order&&ml[Ne.order],sort:vp(Ne)&&kp[vp(Ne)]})});case 5:return Dt=Or.sent,Pt=Dt.content,ir=Pt.datas,vr=Pt.listQueryTag,Or.abrupt("return",{listQueryTag:{hasMore:+vr.hasMore==1,nextTimetag:ma(vr.nextTimetag),cursor:vr.cursor},datas:Em(ir)});case 8:case"end":return Or.stop()}},Lt,this)}))},qe.channelMemberSearch=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},keyword:{type:"string",allowEmpty:!1},limit:{type:"number",min:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatChannelMemberSearch",{qchatChannelMemberSearchTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",_C(Dt.content.datas));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.subscribeAsVisitor=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({opeType:{type:"number",min:1,max:2},type:{type:"number",required:!1},channels:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},min:1}},Ne),Pt.next=3,this.subscribeForVisitorService.subscribeChannelAsVisitor(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.qchatAutoSubscribeNotificationHandler=function(Ne){var Lt=od(Ne.content.unreadInfos),Dt=Ne.content.serverIds;this.subscribeModuleService.updateUnreads(Lt);var Pt=[];if(Dt.length){var ir={opeType:1};ir.channels=Fo(Dt).call(Dt,function(Ur){return{serverId:Ur.serverId,channelId:""}}),ir.type=4,Pt.push(ir)}if(Lt.length){var vr={opeType:1};vr.channels=Fo(Lt).call(Lt,function(Ur){return{serverId:Ur.serverId,channelId:Ur.channelId}}),vr.type=1,Pt.push(vr)}if(Pt.length)for(var Ir,Or=DC(Pt);!(Ir=Or()).done;){var jr=Ir.value;this.subscribeModuleService.cacheAutoSubscribe(jr)}},xe}(td),VC={"24_61":"qchatCreateServerRole","24_62":"qchatDeleteServerRole","24_63":"qchatUpdateServerRole","24_64":"qchatGetServerRoles","24_65":"qchatAddChannelRole","24_66":"qchatRemoveChannelRole","24_67":"qchatUpdateChannelRole","24_68":"qchatGetChannelRoles","24_69":"qchatAddMemberRole","24_70":"qchatRemoveMemberRole","24_71":"qchatUpdateMemberRole","24_72":"qchatGetMemberRoles","24_73":"qchatAddMembersToServerRole","24_74":"qchatRemoveMembersFromServerRole","24_75":"qchatGetMembersFromServerRole","24_76":"qchatGetServerRolesByAccid","24_77":"qchatGetExistingServerRolesByAccids","24_78":"qchatGetExistingChannelRolesByServerRoleIds","24_79":"qchatGetExistingAccidsOfMemberRoles","24_80":"qchatUpdateServerRolePriorities","24_81":"qchatGetExistingAccidsInServerRole","24_82":"qchatCheckPermission","24_83":"qchatAddChannelCategoryRole","24_84":"qchatRemoveChannelCategoryRole","24_85":"qchatUpdateChannelCategoryRole","24_86":"qchatGetChannelCategoryRole","24_87":"qchatAddChannelCategoryMemberRole","24_88":"qchatRemoveChannelCategoryMemberRole","24_89":"qchatUpdateChannelCategoryMemberRole","24_90":"qchatGetChannelCategoryMemberRole","24_126":"qchatCheckPermissions"},Js={channelRole:{serverId:1,roleId:2,parentRoleId:3,channelId:4,name:5,icon:6,ext:7,auths:8,type:9,createTime:10,updateTime:11},memberRole:{serverId:1,id:2,accid:3,channelId:4,auths:5,createTime:6,updateTime:7,nick:8,avatar:9,ext:10,memberType:11,joinTime:12,inviter:13},antispamTag:{antiSpamBusinessId:1},serverRole:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,type:7,memberCount:8,priority:9,createTime:10,updateTime:11,isMember:12},getRoleByPagesTag:{serverId:1,channelId:2,time:3,limit:4},checkPermissionTag:{serverId:1,channelId:2,auth:3},member:{serverId:1,roleId:2,accid:3,createTime:4,updateTime:5,nick:6,avatar:7,ext:8,type:9,joinTime:10,inviter:11},qchatAddChannelCategoryRoleTag:{categoryId:3,serverId:4,parentRoleId:5},channelCategoryRole:{roleId:1,categoryId:3,serverId:4,parentRoleId:5,type:6,validFlag:7,createTime:8,updateTime:9,auths:10,name:11,icon:12,ext:13},qchatGetChannelCategoryRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},channelCategoryMemberRole:{id:1,accid:3,categoryId:4,serverId:5,validFlag:6,createTime:7,updateTime:8,auths:9,nick:10,avatar:11,ext:12,memberType:13,joinTime:14,inviter:15},qchatGetChannelCategoryMemberRoleTag:{serverId:1,categoryId:2,timetag:3,limit:4},checkPermissionsTag:{serverId:1,channelId:2,auths:3}},ya=Ki(Js),Np={qchatCreateServerRole:{service:"qchatRole",sid:24,cid:61,params:[{type:"Property",name:"serverRole",reflectMapper:Js.serverRole},{type:"Property",name:"antispamTag",reflectMapper:Js.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:ya.serverRole}]},qchatDeleteServerRole:{service:"qchatRole",sid:24,cid:62,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"}]},qchatUpdateServerRole:{service:"qchatRole",sid:24,cid:63,params:[{type:"Property",name:"updateServerRoleTag",reflectMapper:{serverId:1,roleId:2,name:3,icon:4,ext:5,auths:6,priority:7}},{type:"Property",name:"antispamTag",reflectMapper:Js.antispamTag}],response:[{type:"Property",name:"serverRole",reflectMapper:ya.serverRole}]},qchatGetServerRoles:{service:"qchatRole",sid:24,cid:64,params:[{type:"Property",name:"getServerRolesTag",reflectMapper:{serverId:1,timetag:2,limit:3,priority:4,channelId:5,categoryId:6}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:ya.serverRole}]},qchatAddChannelRole:{service:"qchatRole",sid:24,cid:65,params:[{type:"Property",name:"channelRole",reflectMapper:Js.channelRole}],response:[{type:"Property",name:"channelRole",reflectMapper:ya.channelRole}]},qchatRemoveChannelRole:{service:"qchatRole",sid:24,cid:66,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelRole:{service:"qchatRole",sid:24,cid:67,params:[{type:"Property",name:"updateChannelRoleTag",reflectMapper:{serverId:1,roleId:2,channelId:3,auths:4}}],response:[{type:"Property",name:"channelRole",reflectMapper:ya.channelRole}]},qchatGetChannelRoles:{service:"qchatRole",sid:24,cid:68,params:[{type:"Property",name:"getChannelRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:ya.channelRole}]},qchatAddMemberRole:{service:"qchatRole",sid:24,cid:69,params:[{type:"Property",name:"memberRole",reflectMapper:Js.memberRole}],response:[{type:"Property",name:"memberRole",reflectMapper:ya.memberRole}]},qchatRemoveMemberRole:{service:"qchatRole",sid:24,cid:70,params:[{type:"Property",name:"memberRole",reflectMapper:Js.memberRole}]},qchatUpdateMemberRole:{service:"qchatRole",sid:24,cid:71,params:[{type:"Property",name:"updateMemberRoleTag",reflectMapper:{serverId:1,accid:2,channelId:3,auths:4}}],response:[{type:"Property",name:"memberRole",reflectMapper:ya.memberRole}]},qchatGetMemberRoles:{service:"qchatRole",sid:24,cid:72,params:[{type:"Property",name:"getMemberRolesTag",reflectMapper:{serverId:1,channelId:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:ya.memberRole}]},qchatAddMembersToServerRole:{service:"qchatRole",sid:24,cid:73,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatRemoveMembersFromServerRole:{service:"qchatRole",sid:24,cid:74,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"Property",name:"accids",reflectMapper:{1:"successAccids",2:"failedAccids"}}]},qchatGetMembersFromServerRole:{service:"qchatRole",sid:24,cid:75,params:[{type:"Property",name:"getMembersFromServerRoleTag",reflectMapper:{serverId:1,roleId:2,timetag:3,accid:4,limit:5}}],response:[{type:"PropertyArray",name:"members",reflectMapper:ya.member}]},qchatGetServerRolesByAccid:{service:"qchatRole",sid:24,cid:76,params:[{type:"Property",name:"getServerRolesByAccidTag",reflectMapper:{serverId:1,accid:2,timetag:3,limit:4}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:ya.serverRole}]},qchatGetExistingServerRolesByAccids:{service:"qchatRole",sid:24,cid:77,params:[{type:"Long",name:"serverId"},{type:"String",name:"accids"}],response:[{type:"String",name:"serverRoles"}]},qchatGetExistingChannelRolesByServerRoleIds:{service:"qchatRole",sid:24,cid:78,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"roleIds"}],response:[{type:"PropertyArray",name:"channelRoles",reflectMapper:ya.channelRole}]},qchatGetExistingAccidsOfMemberRoles:{service:"qchatRole",sid:24,cid:79,params:[{type:"Long",name:"serverId"},{type:"Long",name:"channelId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"memberRoles",reflectMapper:ya.memberRole}]},qchatUpdateServerRolePriorities:{service:"qchatRole",sid:24,cid:80,params:[{type:"Long",name:"serverId"},{type:"PropertyArray",name:"serverRoles",reflectMapper:{serverId:1,roleId:2,priority:7}}],response:[{type:"PropertyArray",name:"serverRoles",reflectMapper:ya.serverRole}]},qchatGetExistingAccidsInServerRole:{service:"qchatRole",sid:24,cid:81,params:[{type:"Long",name:"serverId"},{type:"Long",name:"roleId"},{type:"String",name:"accids"}],response:[{type:"PropertyArray",name:"members",reflectMapper:ya.member}]},qchatCheckPermission:{service:"qchatRole",sid:24,cid:82,params:[{type:"Property",name:"checkPermissionTag",reflectMapper:Js.checkPermissionTag}],response:[{type:"Boolean",name:"checked"}]},qchatAddChannelCategoryRole:{service:"qchatRole",sid:24,cid:83,params:[{type:"Property",name:"qchatAddChannelCategoryRoleTag",reflectMapper:Js.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:ya.channelCategoryRole}]},qchatRemoveChannelCategoryRole:{service:"qchatRole",sid:24,cid:84,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"Long",name:"roleId"}]},qchatUpdateChannelCategoryRole:{service:"qchatRole",sid:24,cid:85,params:[{type:"Property",name:"qchatUpdateChannelCategoryRoleTag",reflectMapper:Js.channelCategoryRole}],response:[{type:"Property",name:"channelCategoryRole",reflectMapper:ya.channelCategoryRole}]},qchatGetChannelCategoryRole:{service:"qchatRole",sid:24,cid:86,params:[{type:"Property",name:"qchatGetChannelCategoryRoleTag",reflectMapper:Js.qchatGetChannelCategoryRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:ya.channelCategoryRole}]},qchatAddChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:87,params:[{type:"Property",name:"qchatAddChannelCategoryMemberRoleTag",reflectMapper:Js.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:ya.channelCategoryMemberRole}]},qchatRemoveChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:88,params:[{type:"Long",name:"serverId"},{type:"Long",name:"categoryId"},{type:"String",name:"accid"}]},qchatUpdateChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:89,params:[{type:"Property",name:"qchatUpdateChannelCategoryMemberRoleTag",reflectMapper:Js.channelCategoryMemberRole}],response:[{type:"Property",name:"channelCategoryMemberRole",reflectMapper:ya.channelCategoryMemberRole}]},qchatGetChannelCategoryMemberRole:{service:"qchatRole",sid:24,cid:90,params:[{type:"Property",name:"qchatGetChannelCategoryMemberRoleTag",reflectMapper:Js.qchatGetChannelCategoryMemberRoleTag}],response:[{type:"PropertyArray",name:"list",reflectMapper:ya.channelCategoryMemberRole}]},qchatCheckPermissions:{service:"qchatRole",sid:24,cid:126,params:[{type:"Property",name:"checkPermissionsTag",reflectMapper:Js.checkPermissionsTag}],response:[{type:"PropertyArray",name:"checkPermissionsResult",reflectMapper:{1:"auth",2:"isAllow"}}]}},Z0=function(){function pe(qe){this.core=qe}var xe=pe.prototype;return xe.addChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatAddChannelCategoryRole",{qchatAddChannelCategoryRoleTag:Oe});case 3:return Lt=Pt.sent,Pt.abrupt("return",_v(Lt.content.channelCategoryRole));case 5:case"end":return Pt.stop()}},Ne,this)}))},xe.removeChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Oe),Dt.next=3,this.core.sendCmd("qchatRemoveChannelCategoryRole",Oe);case 3:case"end":return Dt.stop()}},Ne,this)}))},xe.updateChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object"}},Oe),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryRole",{qchatUpdateChannelCategoryRoleTag:Sl(Oe)});case 3:if((Lt=Pt.sent).raw.code!==406){Pt.next=6;break}throw new Ao("No update required",{},406);case 6:return Pt.abrupt("return",_v(Lt.content.channelCategoryRole));case 7:case"end":return Pt.stop()}},Ne,this)}))},xe.getChannelCategoryRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatGetChannelCategoryRole",{qchatGetChannelCategoryRoleTag:Oe});case 3:return Lt=Pt.sent,Pt.abrupt("return",(ir=Lt.content.list,Ts(ir)&&ir.length>0?Fo(ir).call(ir,function(vr){return _v(vr)}):[]));case 5:case"end":return Pt.stop()}var ir},Ne,this)}))},xe.addChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatAddChannelCategoryMemberRole",{qchatAddChannelCategoryMemberRoleTag:Oe});case 3:return Lt=Pt.sent,Pt.abrupt("return",xv(Lt.content.channelCategoryMemberRole));case 5:case"end":return Pt.stop()}},Ne,this)}))},xe.removeChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Oe),Dt.next=3,this.core.sendCmd("qchatRemoveChannelCategoryMemberRole",Oe);case 3:case"end":return Dt.stop()}},Ne,this)}))},xe.updateChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object"}},Oe),Pt.next=3,this.core.sendCmd("qchatUpdateChannelCategoryMemberRole",{qchatUpdateChannelCategoryMemberRoleTag:Sl(Oe)});case 3:if((Lt=Pt.sent).raw.code!==406){Pt.next=6;break}throw new Ao("No update required",{},406);case 6:return Pt.abrupt("return",xv(Lt.content.channelCategoryMemberRole));case 7:case"end":return Pt.stop()}},Ne,this)}))},xe.getChannelCategoryMemberRole=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},categoryId:{type:"string",allowEmpty:!1},timetag:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Oe),Pt.next=3,this.core.sendCmd("qchatGetChannelCategoryMemberRole",{qchatGetChannelCategoryMemberRoleTag:Oe});case 3:return Lt=Pt.sent,Pt.abrupt("return",(ir=Lt.content.list,Ts(ir)&&ir.length>0?Fo(ir).call(ir,function(vr){return xv(vr)}):[]));case 5:case"end":return Pt.stop()}var ir},Ne,this)}))},pe}(),e1=function(pe){function xe(Oe){var Ne;return(Ne=pe.call(this,"qchatRole",Oe)||this).core=Oe,ou({cmdMap:VC,cmdConfig:Np}),Ne.category=new Z0(Oe),Ne}ra(xe,pe);var qe=xe.prototype;return qe.createServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},name:{type:"string",allowEmpty:!1},priority:{type:"number",min:1},icon:{type:"string",required:!1},ext:{type:"string",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatCreateServerRole",{serverRole:zn(zn({},Sl(Ne)),{type:cu.custom}),antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.serverRole));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.updateServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},name:{type:"string",required:!1},icon:{type:"string",required:!1},ext:{type:"string",required:!1},priority:{type:"number",required:!1},auths:{type:"object",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateServerRole",{updateServerRoleTag:Sl(Ne),antispamTag:mc(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.serverRole));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.deleteServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatDeleteServerRole",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getServerRoles=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},categoryId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},priority:{type:"number",required:!1}},Ne),Ir.next=3,this.core.sendCmd("qchatGetServerRoles",{getServerRolesTag:Sl(Ne)});case 3:return Pt=Ir.sent,ir=pi(Dt=Pt.content.serverRoles).call(Dt,function(Or){return ma(Or.isMember)===1}),ir=Fo(ir).call(ir,function(Or){return Or.roleId}),Ir.abrupt("return",{roles:Ai(Pt.content.serverRoles),isMemberRoles:ir});case 7:case"end":return Ir.stop()}},Lt,this)}))},qe.addChannelRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},parentRoleId:{type:"string",allowEmpty:!1}},Ne),ir.next=3,this.core.sendCmd("qchatAddChannelRole",{channelRole:Sl(Ne)});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.channelRole));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getChannelRoles=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetChannelRoles",{getChannelRolesTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",Ai(Dt.content.channelRoles));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.removeChannelRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatRemoveChannelRole",Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateChannelRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateChannelRole",{updateChannelRoleTag:Sl(Ne)});case 3:if((Dt=ir.sent).raw.code!==406){ir.next=6;break}throw new Ao("No update required",{},406);case 6:return ir.abrupt("return",Pi(Dt.content.channelRole));case 7:case"end":return ir.stop()}},Lt,this)}))},qe.addMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Ne),ir.next=3,this.core.sendCmd("qchatAddMemberRole",{memberRole:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",Pi(Dt.content.memberRole));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getMemberRoles=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetMemberRoles",{getMemberRolesTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",Ai(Dt.content.memberRoles));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.removeMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatRemoveMemberRole",{memberRole:Ne});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},auths:{type:"object",required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatUpdateMemberRole",{updateMemberRoleTag:Sl(Ne)});case 3:if((Dt=ir.sent).raw.code!==406){ir.next=6;break}throw new Ao("No update required",{},406);case 6:return ir.abrupt("return",Pi(Dt.content.memberRole));case 7:case"end":return ir.stop()}},Lt,this)}))},qe.addMembersToServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},Ne),Ir.next=3,this.core.sendCmd("qchatAddMembersToServerRole",zn(zn({},Ne),{accids:Io(Ne.accids)}));case 3:return Dt=Ir.sent,Pt=us(Dt,"content.accids.successAccids"),ir=us(Dt,"content.accids.failedAccids"),Ir.abrupt("return",{successAccids:Pt?JSON.parse(Pt):[],failedAccids:ir?JSON.parse(ir):[]});case 7:case"end":return Ir.stop()}},Lt,this)}))},qe.removeMembersFromServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string",min:1}},Ne),Ir.next=3,this.core.sendCmd("qchatRemoveMembersFromServerRole",zn(zn({},Ne),{accids:Io(Ne.accids)}));case 3:return Dt=Ir.sent,Pt=us(Dt,"content.accids.successAccids"),ir=us(Dt,"content.accids.failedAccids"),Ir.abrupt("return",{successAccids:Pt?JSON.parse(Pt):[],failedAccids:ir?JSON.parse(ir):[]});case 7:case"end":return Ir.stop()}},Lt,this)}))},qe.getMembersFromServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},accid:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetMembersFromServerRole",{getMembersFromServerRoleTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",Ai(Dt.content.members));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getServerRolesByAccid=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accid:{type:"string",allowEmpty:!1},timetag:{type:"number",required:!1},limit:{type:"number",min:1,required:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetServerRolesByAccid",{getServerRolesByAccidTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",Ai(Dt.content.serverRoles));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getExistingServerRolesByAccids=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ne),Ir.next=3,this.core.sendCmd("qchatGetExistingServerRolesByAccids",{serverId:Ne.serverId,accids:Io(Ne.accids)});case 3:return Dt=Ir.sent,Ir.prev=4,ir=JSON.parse(Dt.content.serverRoles),bo(Pt=ba(ir)).call(Pt,function(Or){var jr;bo(jr=ir[Or]).call(jr,function(Ur,Yr){ir[Or][Yr]=ds(Ur,ya.serverRole)}),ir[Or]=Ai(ir[Or])}),Ir.abrupt("return",ir);case 10:throw Ir.prev=10,Ir.t0=Ir.catch(4),this.logger.error("can not parse serverRolesGroupByAccid from "+Ne.serverId+" and "+Ne.accids,Dt.content.serverRoles),Ir.t0;case 14:case"end":return Ir.stop()}},Lt,this,[[4,10]])}))},qe.getExistingChannelRolesByServerRoleIds=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},roleIds:{type:"array",itemType:"string"}},Ne),ir.next=3,this.core.sendCmd("qchatGetExistingChannelRolesByServerRoleIds",{serverId:Ne.serverId,channelId:Ne.channelId,roleIds:Io(Ne.roleIds)});case 3:return Dt=ir.sent,ir.abrupt("return",Ai(Dt.content.channelRoles));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getExistingAccidsOfMemberRoles=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ne),vr.next=3,this.core.sendCmd("qchatGetExistingAccidsOfMemberRoles",{serverId:Ne.serverId,channelId:Ne.channelId,accids:Io(Ne.accids)});case 3:return Dt=vr.sent,Pt=Dt.content.memberRoles,vr.abrupt("return",Pt&&Pt.length>0?Fo(Pt).call(Pt,function(Ir){return Ir.accid}):[]);case 6:case"end":return vr.stop()}},Lt,this)}))},qe.getExistingAccidsInServerRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},roleId:{type:"string",allowEmpty:!1},accids:{type:"array",itemType:"string"}},Ne),vr.next=3,this.core.sendCmd("qchatGetExistingAccidsInServerRole",{serverId:Ne.serverId,roleId:Ne.roleId,accids:Io(Ne.accids)});case 3:return Dt=vr.sent,Pt=Dt.content.members,vr.abrupt("return",Pt&&Pt.length>0?Fo(Pt).call(Pt,function(Ir){return Ir.accid}):[]);case 6:case"end":return vr.stop()}},Lt,this)}))},qe.updateServerRolePriorities=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},serverRoles:{type:"array"}},Ne),vr.next=3,this.core.sendCmd("qchatUpdateServerRolePriorities",{serverId:Ne.serverId,serverRoles:Fo(Dt=Ne.serverRoles).call(Dt,function(Ir){return{serverId:Ir.serverId,roleId:Ir.roleId,priority:Ir.priority}})});case 3:return Pt=vr.sent,vr.abrupt("return",Ai(Pt.content.serverRoles));case 5:case"end":return vr.stop()}},Lt,this)}))},qe.checkPermission=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auth:{type:"string"}},Ne),ir.next=3,this.core.sendCmd("qchatCheckPermission",{checkPermissionTag:zn(zn({},Ne),{auth:yl[Ne.auth]||Ne.auth})});case 3:return Dt=ir.sent,ir.abrupt("return",Dt.content.checked);case 5:case"end":return ir.stop()}},Lt,this)}))},qe.addChannelCategoryRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.addChannelCategoryRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.removeChannelCategoryRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.removeChannelCategoryRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateChannelCategoryRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.updateChannelCategoryRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getChannelCategoryRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.getChannelCategoryRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.addChannelCategoryMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.addChannelCategoryMemberRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.removeChannelCategoryMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.removeChannelCategoryMemberRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.updateChannelCategoryMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.updateChannelCategoryMemberRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getChannelCategoryMemberRole=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.category.getChannelCategoryMemberRole(Ne);case 2:return Pt.abrupt("return",Pt.sent);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.checkPermissions=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},auths:{type:"array",itemType:"string"}},Ne),this.core.logger.log("qchatRole::checkPermission options is",Ne),Or.next=4,this.core.sendCmd("qchatCheckPermissions",{checkPermissionsTag:zn(zn({},Ne),{auths:Io(Fo(Dt=Ne.auths).call(Dt,function(jr){return yl[jr]||jr}))})});case 4:return ir=Or.sent,this.core.logger.log("qchatRole::checkPermission result is",ir.content),vr={},bo(Pt=ir.content.checkPermissionsResult).call(Pt,function(jr){vr[jr.auth]=jr.isAllow}),this.core.logger.log("qchatRole::checkPermission auths is",vr),Or.abrupt("return",sd(vr));case 10:case"end":return Or.stop()}},Lt,this)}))},xe}(td),Om=function(xe,qe){return qh(xe,qe,function(Oe,Ne){return Yb(xe,Ne)})},t1=function(xe){return xe!=null&&xe.length?wv(xe,1):[]},Rc,Ys,Rm=function(xe){return Qh(um(xe,void 0,t1),xe+"")}(function(pe,xe){return pe==null?{}:Om(pe,xe)}),r1={"24_10":"qchatSendMsg","24_11":"qchatOnMsg","24_12":"qchatOnRecvUnreadInfo","24_13":"qchatSendCustomSysMsg","24_14":"qchatOnSysMsg","24_16":"qchatGetHistoryMsg","24_17":"qchatMarkMessageRead","24_18":"qchatMultiSyncMessageRead","24_22":"qchatUpdateSystemNotification","24_23":"qchatMultiSyncSystemNotificationUpdate","24_24":"qchatSyncSystemNotification","24_25":"qchatUpdateMessage","24_26":"qchatRecvMessageUpdate","24_28":"qchatMarkSysMsgRead","24_94":"qchatMessageSearchByPage","24_100":"qchatGetMessageHistoryByIds","24_101":"qchatGetThreadMessages","24_102":"qchatUpdateQuickComment","24_103":"qchatGetQuickComments","24_108":"qchatGetThreadRootMessagesMeta","24_121":"qchatGetLastMessageOfChannels","24_127":"qchatGetMentionedMeMessages","25_6":"qchatMultiSyncServersMessageRead"},Fs={getHistoryMsgTag:{serverId:1,channelId:2,beginTime:3,endTime:4,excludeMsgId:5,limit:6,reverse:7},getThreadHistoryMsgTag:{beginTime:1,endTime:2,excludeMsgId:3,limit:4,reverse:5},qchatMsgTag:{serverId:1,channelId:2,fromAccount:3,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,updateTime:8,type:9,body:10,attach:11,ext:12,msgIdClient:13,msgIdServer:14,resendFlag:15,status:16,pushPayload:17,pushContent:18,mentionAccids:19,mentionAll:20,env:21,callbackExt:22,replyMsgFromAccount:23,replyMsgTime:24,replyMsgIdServer:25,replyMsgIdClient:26,threadMsgFromAccount:27,threadMsgTime:28,threadMsgIdServer:29,threadMsgIdClient:30,useCustomContent:31,antiSpamContent:32,antiSpamBusinessId:33,antiSpamUsingYidun:34,yidunCallback:35,yidunAntiCheating:36,yidunAntiSpamExt:37,yidunAntiSpamRes:38,mentionRoleIds:41,accidsOfMentionedRoles:42,updateContent:39,updateOperatorInfo:40,subType:61,historyEnable:100,pushEnable:101,needBadge:102,needPushNick:103,notifyReason:104,routeEnable:105,isAntispam:106},sysMsg:{toType:1,serverId:2,channelId:3,toAccids:4,fromAccount:5,fromClientType:6,fromDeviceId:7,fromNick:8,time:9,updateTime:10,type:11,msgIdClient:12,msgIdServer:13,body:14,attach:15,ext:16,resendFlag:17,status:18,pushPayload:19,pushContent:20,env:21,callbackExt:22,persistEnable:100,pushEnable:101,needBadge:102,needPushNick:103,routeEnable:104},qchatMsgUpdateTag:{operatorAccount:1,operatorClientType:2,ps:3,ext:4,pushContent:5,pushPayload:6,env:7,routeEnable:100},markMsgReadTag:{serverId:1,channelId:2,time:3},qchatQuickCommentRequestTag:{serverId:1,channelId:2,fromAccount:3,msgIdServer:4,time:5,type:6,opeType:7,opeAccid:8},qchatQuickCommentQueryTag:{serverId:1,channelId:2,msgIdServerList:3},qchatGetLastMessageOfChannelsTag:{serverId:1,channelIdList:2},qchatMultiSyncServersMessageReadTag:{successServerIds:1,failServerIds:2,ackTimestamp:3},qchatMessageSearchByPageTag:{keyword:1,serverId:2,channelId:3,fromAccid:4,fromTime:5,toTime:6,msgTypes:7,subTypes:8,includeSelf:9,order:10,limit:11,sort:12,cursor:13},qchatPageQueryTag:{hasMore:1,nextTimetag:2,cursor:3},unreadInfo:wm},Na=Ki(Fs),qC={qchatSendMsg:{service:"qchatMsg",sid:24,cid:10,params:[{type:"Property",name:"qchatMsg",reflectMapper:Fs.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:Na.qchatMsgTag}]},qchatOnMsg:{service:"qchatMsg",sid:24,cid:11,response:[{type:"Property",name:"qchatMsg",reflectMapper:Na.qchatMsgTag}]},qchatOnRecvUnreadInfo:{service:"qchatMsg",sid:24,cid:12,response:[{type:"Property",name:"qchatMsg",reflectMapper:Na.qchatMsgTag}]},qchatSendCustomSysMsg:{service:"qchatMsg",sid:24,cid:13,params:[{type:"Property",name:"sysMsg",reflectMapper:Fs.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:Na.sysMsg}]},qchatOnSysMsg:{service:"qchatMsg",sid:24,cid:14,response:[{type:"Property",name:"sysMsg",reflectMapper:Na.sysMsg}]},qchatGetHistoryMsg:{service:"qchatMsg",sid:24,cid:16,params:[{type:"Property",name:"getHistoryMsgTag",reflectMapper:Fs.getHistoryMsgTag}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:Na.qchatMsgTag}]},qchatUpdateMessage:{service:"qchatMsg",sid:24,cid:25,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:Fs.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:Fs.qchatMsgTag}],response:[{type:"Property",name:"qchatMsg",reflectMapper:Na.qchatMsgTag}]},qchatRecvMessageUpdate:{service:"qchatMsg",sid:24,cid:26,response:[{type:"Property",name:"qchatMsgUpdateInfo",reflectMapper:Na.qchatMsgUpdateTag},{type:"Property",name:"qchatMsg",reflectMapper:Na.qchatMsgTag}]},qchatMarkMessageRead:{sid:24,cid:17,service:"qchatMsg",params:[{type:"Property",name:"markMsgReadTag",reflectMapper:Fs.markMsgReadTag}],response:[{type:"Property",name:"unreadInfo",reflectMapper:Na.unreadInfo}]},qchatMultiSyncMessageRead:{sid:24,cid:18,service:"qchatMsg",response:[{type:"Property",name:"unreadInfo",reflectMapper:Na.unreadInfo}]},qchatUpdateSystemNotification:{service:"qchatMsg",sid:24,cid:22,params:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:Fs.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:Fs.sysMsg}],response:[{type:"Property",name:"sysMsg",reflectMapper:Na.sysMsg}]},qchatMultiSyncSystemNotificationUpdate:{service:"qchatMsg",sid:24,cid:23,response:[{type:"Property",name:"qchatMsgUpdateTag",reflectMapper:Na.qchatMsgUpdateTag},{type:"Property",name:"sysMsg",reflectMapper:Na.sysMsg}]},qchatSyncSystemNotification:{service:"qchatMsg",sid:24,cid:24,response:[{type:"PropertyArray",name:"systemNotifications",reflectMapper:Na.sysMsg}]},qchatMarkSysMsgRead:{service:"qchatMsg",sid:24,cid:28,params:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:Fs.sysMsg}]},qchatMessageSearchByPage:{service:"qchatMsg",sid:24,cid:94,params:[{type:"Property",name:"qchatMessageSearchByPageTag",reflectMapper:Fs.qchatMessageSearchByPageTag}],response:[{type:"Property",name:"listQueryTag",reflectMapper:Na.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:Na.qchatMsgTag}]},qchatGetMessageHistoryByIds:{service:"qchatMsg",sid:24,cid:100,params:[{type:"Property",name:"channelInfo",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"messageReferList",reflectMapper:{msgIdServer:1,time:2}}],response:[{type:"PropertyArray",name:"qchatMsgs",reflectMapper:Na.qchatMsgTag}]},qchatGetThreadMessages:{service:"qchatMsg",sid:24,cid:101,params:[{type:"Property",name:"qchatMsg",reflectMapper:Fs.qchatMsgTag},{type:"Property",name:"getThreadHistoryMsgTag",reflectMapper:Fs.getThreadHistoryMsgTag}],response:[{type:"Property",name:"thread",reflectMapper:Na.qchatMsgTag},{type:"Property",name:"threadInfo",reflectMapper:{1:"messageCount",2:"lastMessageTimestamp"}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:Na.qchatMsgTag}]},qchatUpdateQuickComment:{service:"qchatMsg",sid:24,cid:102,params:[{type:"Property",name:"tag",reflectMapper:Fs.qchatQuickCommentRequestTag}]},qchatGetQuickComments:{service:"qchatMsg",sid:24,cid:103,params:[{type:"Property",name:"tag",reflectMapper:Fs.qchatQuickCommentQueryTag}],response:[{type:"PropertyArray",name:"quickCommentResponse",reflectMapper:{1:"serverId",2:"channelId",3:"msgIdServer",4:"totalCount",5:"lastUpdateTime",6:"details"}}]},qchatGetThreadRootMessagesMeta:{service:"qchatMsg",sid:24,cid:108,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2}},{type:"PropertyArray",name:"qchatMsgs",reflectMapper:{time:7,msgIdServer:14}}],response:[{type:"PropertyArray",name:"metas",reflectMapper:{1:"total",2:"timestamp",3:"msgIdServer",4:"msgTime"}}]},qchatGetLastMessageOfChannels:{service:"qchatMsg",sid:24,cid:121,params:[{type:"Property",name:"tag",reflectMapper:Fs.qchatGetLastMessageOfChannelsTag}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Na.qchatMsgTag}]},qchatMultiSyncServersMessageRead:{service:"qchatMsg",sid:25,cid:6,response:[{type:"Property",name:"qchatMultiSyncServersMessageReadTag",reflectMapper:Na.qchatMultiSyncServersMessageReadTag}]},qchatGetMentionedMeMessages:{service:"qchatMsg",sid:24,cid:127,params:[{type:"Property",name:"tag",reflectMapper:{serverId:1,channelId:2,timestamp:3,limit:4}}],response:[{type:"Property",name:"page",reflectMapper:Na.qchatPageQueryTag},{type:"PropertyArray",name:"datas",reflectMapper:Na.qchatMsgTag}]}};(function(pe){pe[pe.Android=1]="Android",pe[pe.iOS=2]="iOS",pe[pe.PC=4]="PC",pe[pe.WindowsPhone=8]="WindowsPhone",pe[pe.Web=16]="Web",pe[pe.Server=32]="Server",pe[pe.Mac=64]="Mac"})(Rc||(Rc={}));var n1=["image","audio","video","file"],Bv={time:{type:"number"},updateTime:{type:"number"},resendFlag:{type:"boolean"},persistEnable:{type:"boolean"},routeEnable:{type:"boolean"},pushEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},type:{type:"enum",values:va},fromClientType:{type:"enum",values:Rc},status:{type:"number"},toAccids:{type:"object"},toType:{type:"number"},attach:{type:"object"},pushPayload:{type:"object"}};function Lv(pe,xe){var qe=zn({},pe),Oe=zn({type:xe||va.custom},Tp(Bv,qe));return Oe.serverId&&Oe.channelId&&Oe.toAccids?Oe.toType=Tl.channelAccids:Oe.serverId&&Oe.toAccids?Oe.toType=Tl.serverAccids:Oe.serverId&&Oe.channelId?Oe.toType=Tl.channel:Oe.serverId?Oe.toType=Tl.server:Oe.toAccids?Oe.toType=Tl.accids:Oe.toType=Tl.unknown,Oe}function HC(pe){var xe=Rm(pe,["msgIdServer","type"]);return Tp(Bv,xe)}var Fv=((Ys={})[va.channelUpdateWhiteBlackIdentify]=function(pe){return pe.notify=Im(ds(pe.notify,aa.qchatUpdateWhiteBlackRoleTag)),pe},Ys[va.channelUpdateWhiteBlackIdentifyUser]=function(pe){return pe.notify=function(qe){return qa(kC,qe)}(ds(pe.notify,aa.qchatUpdateWhiteBlackMembersTag)),pe},Ys[va.updateQuickComment]=function(pe){return pe.notify=function(qe){return qa(KC,qe)}(ds(pe.notify,Na.qchatQuickCommentRequestTag)),pe},Ys[va.channelCategoryCreate]=function(pe){return pe.categoryInfo=_p(ds(pe.categoryInfo,aa.QChatChannelCategoryInfo)),pe},Ys[va.channelCategoryUpdate]=function(pe){return pe.categoryInfo=_p(ds(pe.categoryInfo,aa.QChatChannelCategoryInfo)),pe},Ys[va.channelCategoryUpdateWhiteBlackIdentify]=function(pe){return pe.notify=Im(ds(pe.notify,aa.qchatUpdateChannelCategoryWhiteBlackRoleTag)),pe},Ys[va.channelCategoryUpdateWhiteBlackIdentifyUser]=function(pe){return pe.notify=Im(ds(pe.notify,aa.qchatUpdateChannelCategoryWhiteBlackMembersTag)),pe},Ys[va.serverIdentifyAdd]=function(pe){return pe.serverIdentifyInfo=Pi(ds(pe.serverIdentifyInfo,ya.serverRole)),pe},Ys[va.serverIdentifyRemove]=function(pe){return pe.serverIdentifyInfo=Pi(ds(pe.serverIdentifyInfo,ya.serverRole)),pe},Ys[va.serverIdentifyUpdate]=function(pe){return pe.serverIdentifyInfo=Pi(ds(pe.serverIdentifyInfo,ya.serverRole)),pe},Ys[va.channelIdentifyUpdate]=function(pe){return pe.channelIdentifyInfo=Pi(ds(pe.channelIdentifyInfo,ya.channelRole)),pe},Ys[va.userIdentifyUpdate]=function(pe){return pe.userIdentifyInfo=Pi(ds(pe.userIdentifyInfo,ya.memberRole)),pe},Ys[va.myMemberInfoUpdated]=function(pe){var xe,qe=us(pe,"userInfo.name"),Oe=us(pe,"userInfo.icon");return pe.updatedInfos=Fo(xe=pe.reuseServers).call(xe,function(Ne){var Lt={serverId:Ne.serverId};return(1&Ne.bits)==1&&typeof qe=="string"&&zn(Lt,{nickChanged:!0,nick:qe}),(2&Ne.bits)==2&&typeof Oe=="string"&&zn(Lt,{avatarChanged:!0,avatar:Oe}),Lt}),delete pe.userInfo,delete pe.reuseServers,pe},Ys);function Op(pe,xe){var qe=qa(Bv,pe);if(!qe.attach)return qe;if(qe.attach.serverInfo&&(qe.attach.serverInfo=Cp(ds(qe.attach.serverInfo,as.serverInfo))),qe.attach.channelInfo&&(qe.attach.channelInfo=nd(ds(qe.attach.channelInfo,aa.channelInfo))),qe.attach.serverMember&&(qe.attach.serverMember=Mp(ds(qe.attach.serverMember,as.memberInfo))),Fv[qe.attach.type]&&(qe.attach=Fv[qe.attach.type](qe.attach)),qe.attach.updateAuths)try{qe.attach.updateAuths=sd(JSON.parse(qe.attach.updateAuths))}catch(Oe){xe.error("formatSystemNotification:JSON parse updateAuths error: ",Oe)}return qe.attach.type&&(qe.attach.rawType=qe.attach.type,qe.attach.type=va[qe.attach.type]),qe}var o1={type:{type:"enum",values:Ep},fromClientType:{type:"enum",values:Rc},status:{type:"number"},resendFlag:{type:"boolean"},mentionAll:{type:"boolean"},notifyReason:{type:"enum",values:Pp},pushEnable:{type:"boolean"},historyEnable:{type:"boolean"},needBadge:{type:"boolean"},needPushNick:{type:"boolean"},routeEnable:{type:"boolean"},time:{type:"number"},updateTime:{type:"number"},mentionAccids:{type:"object"},mentionRoleIds:{type:"object"},accidsOfMentionedRoles:{type:"object"},attach:{type:"object"},pushPayload:{type:"object"},isAntispam:{type:"boolean"},antiSpamInfo:{useCustomContent:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBusinessId:{type:"string"},antiSpamUsingYidun:{type:"boolean"},yidunCallback:{type:"string"},yidunAntiCheating:{type:"object"},yidunAntiSpamExt:{type:"object"},yidunAntiSpamRes:{type:"string"}},replyRefer:{fromAccount:{type:"string",rawKey:"replyMsgFromAccount"},time:{type:"number",rawKey:"replyMsgTime"},msgIdServer:{type:"string",rawKey:"replyMsgIdServer"},msgIdClient:{type:"string",rawKey:"replyMsgIdClient"}},threadRefer:{fromAccount:{type:"string",rawKey:"threadMsgFromAccount"},time:{type:"number",rawKey:"threadMsgTime"},msgIdServer:{type:"string",rawKey:"threadMsgIdServer"},msgIdClient:{type:"string",rawKey:"threadMsgIdClient"}}};function $v(pe){pe.onSendBefore,pe.onUploadStart,pe.onUploadDone,pe.onUploadProgress;var xe=Qd(pe,["onSendBefore","onUploadStart","onUploadDone","onUploadProgress"]),qe=Tp(o1,xe);if(qe.msgIdClient=pe.resendFlag?pe.msgIdClient:Tv(),!qe.msgIdClient)throw new h0("msgIdClient is required for resend a message","msgIdClient","required");return pe.replyMessage&&pe.replyMessage.msgIdServer&&(qe.replyMsgFromAccount=pe.replyMessage.fromAccount,qe.replyMsgTime=+pe.replyMessage.time,qe.replyMsgIdServer=pe.replyMessage.msgIdServer,qe.replyMsgIdClient=pe.replyMessage.msgIdClient,pe.replyMessage.threadRefer&&pe.replyMessage.threadRefer.msgIdServer?(qe.threadMsgFromAccount=pe.replyMessage.threadRefer.fromAccount,qe.threadMsgTime=+pe.replyMessage.threadRefer.time,qe.threadMsgIdServer=pe.replyMessage.threadRefer.msgIdServer,qe.threadMsgIdClient=pe.replyMessage.threadRefer.msgIdClient):(qe.threadMsgFromAccount=pe.replyMessage.fromAccount,qe.threadMsgTime=+pe.replyMessage.time,qe.threadMsgIdServer=pe.replyMessage.msgIdServer,qe.threadMsgIdClient=pe.replyMessage.msgIdClient),delete qe.replyMessage),qe}function a1(pe){return qa({operatorClientType:{type:"enum",values:Rc},pushPayload:{type:"object"}},pe)}function Xs(pe,xe,qe){var Oe,Ne;return xe===void 0&&(xe={}),hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return(Dt=qa(o1,pe)).deliveryStatus=xe.deliveryStatus?Qi[xe.deliveryStatus]:Qi[Qi.success],xe.time&&(Dt.time=xe.time),Dt.updateContent&&(Pt=qa({status:{type:"number"}},Pt=ds(Pt=JSON.parse(Dt.updateContent),Na.qchatMsgTag)),Dt.updateContent=Pt),Dt.updateOperatorInfo&&(ir=a1(ds(ir=JSON.parse(Dt.updateOperatorInfo),Na.qchatMsgUpdateTag)),Dt.updateOperatorInfo=ir),((Oe=Dt==null?void 0:Dt.threadRefer)===null||Oe===void 0?void 0:Oe.fromAccount)===""&&delete Dt.threadRefer,((Ne=Dt==null?void 0:Dt.replyRefer)===null||Ne===void 0?void 0:Ne.fromAccount)===""&&delete Dt.replyRefer,Dt.attach&&xe.attachUrl&&(Dt.attach.url=xe.attachUrl),Ir.next=10,zC(Dt,qe);case 10:return Ir.abrupt("return",Ir.sent);case 11:case"end":return Ir.stop()}},Lt)}))}function zC(pe,xe){return hn(this,void 0,void 0,Dr.mark(function qe(){var Oe;return Dr.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(Ci(n1).call(n1,pe.type)&&pe.attach&&pe.attach.url){Lt.next=2;break}return Lt.abrupt("return",pe);case 2:if(xe&&xe.cloudStorage&&typeof xe.cloudStorage.getPrivateUrl=="function"&&typeof xe.cloudStorage.getOriginUrl=="function"){Lt.next=4;break}return Lt.abrupt("return",pe);case 4:if(!(ta(Oe=pe.attach.url).call(Oe,"_im_url=1")<0)){Lt.next=7;break}return pe.attach.url=xe.cloudStorage.getPrivateUrl(pe.attach.url),Lt.abrupt("return",pe);case 7:return Lt.prev=7,Lt.next=10,xe.cloudStorage.getOriginUrl(pe.attach.url);case 10:pe.attach.url=Lt.sent,Lt.next=16;break;case 13:throw Lt.prev=13,Lt.t0=Lt.catch(7),new h0('url "'+pe.attach.url+'" parse error',"message.attach.url","parse error");case 16:return Lt.abrupt("return",pe);case 17:case"end":return Lt.stop()}},qe,null,[[7,13]])}))}function s1(pe,xe,qe){return xe===void 0&&(xe={}),hn(this,void 0,void 0,Dr.mark(function Oe(){var Ne;return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Ts(pe)&&pe.length>0){Dt.next=2;break}return Dt.abrupt("return",[]);case 2:return Ne=Fo(pe).call(pe,function(Pt){return Xs(Pt,xe,qe)}),Dt.next=5,ca.all(Ne);case 5:return Dt.abrupt("return",Dt.sent);case 6:case"end":return Dt.stop()}},Oe)}))}var WC={totalCount:{type:"number"},lastUpdateTime:{type:"number"},details:{type:"object"}};function GC(pe){var xe=Fo(pe).call(pe,function(Oe){var Ne,Lt=qa(WC,Oe);return Lt.details=Fo(Ne=Lt.details).call(Ne,function(Dt){var Pt=Dt.createTime?ma(Dt.createTime):0;return Pt=isNaN(Pt)?0:Pt,{count:Dt.count,hasSelf:Dt.self,severalAccids:Dt.topN,type:Dt.type,createTime:Pt}}),Lt}),qe={};return bo(xe).call(xe,function(Oe){return qe[Oe.msgIdServer]=Oe}),qe}var KC={type:{type:"number"},time:{type:"number"},opeType:{type:"number"}},QC={includeSelf:{type:"number"},order:{type:"enum",values:ml},sort:{type:"enum",values:id},msgTypes:{type:"object"},subTypes:{type:"object"}},i1={hasMore:{type:"boolean"},nextTimetag:{type:"number"},cursor:{type:"string"}},c1,si,JC={6:function(xe){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInServerId(xe.serverId),!0},16:function(xe){return this.core.qchatChannel.subscribeForVisitorService.deleteAutoSetInChannel(xe.serverId,xe.channelId),!0},26:function(xe){var qe=us(xe,"attach.addAccids");return qe&&Ci(qe).call(qe,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",xe),!0},27:function(xe){var qe=us(xe,"attach.deleteAccids");return qe&&Ci(qe).call(qe,this.core.account)&&this.core.eventBus.emit("qchatChannel/serverIdentifyChange",xe),!0},31:function(xe){var qe;return xe.attach.event===1?!((qe=this.core.otherOptions.qchatChannelConfig)===null||qe===void 0)&&qe.autoSubscribe&&this.core.qchatChannel.subscribeChannel({type:1,opeType:1,channels:[{serverId:xe.serverId,channelId:xe.channelId}],isInternalTrigger:!0}):xe.attach.event===2&&(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",xe),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",xe)),!0},32:function(xe){var qe;return xe.attach.event===2?(this.core.eventBus.emit("qchatChannel/autoUnSubscribe",xe),this.core.eventBus.emit("qchatMedia/serverOrChannelLeave",xe)):xe.attach.event===1&&(this.core.qchatChannel.subscribeForVisitorService.deleteServer(xe.serverId),!((qe=this.core.otherOptions.qchatChannelConfig)===null||qe===void 0)&&qe.autoSubscribe&&this.core.qchatServer.subscribeServer({type:4,opeType:1,servers:[{serverId:xe.serverId}],isInternalTrigger:!0})),!0},34:function(xe){return xe.attach.event===2&&this.core.qchatChannel.subscribeForVisitorService.unSubscribeChannel(xe.serverId,xe.channelId),!0},101:function(xe){var qe=Rm(xe,["serverId","channelId","ext","fromAccount","fromNick","time"]);return this.logger.log("qchat on recvTypingEvent: ",qe),this.core.emit("recvTypingEvent",qe),!1}},ld=function(){function pe(qe){this.core=qe,this.logger=qe.logger}var xe=pe.prototype;return xe.sendSystemNotification=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Lv(Oe)});case 2:return Lt=ir.sent,Dt=Op(Lt.content.sysMsg,this.logger),this.core.options.debugLevel==="debug"?this.logger.debug("sendCustomSysMsg success",Dt):this.logger.log("sendCustomSysMsg success",Dt.serverId,Dt.channelId,Dt.msgIdServer),ir.abrupt("return",Dt);case 6:case"end":return ir.stop()}},Ne,this)}))},xe.updateSystemNotification=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Lt=Oe.systemNotification,Dt=Qd(Oe,["systemNotification"]),Pt=Rm(Lt,["msgIdServer","type","body","ext","status"]),ir=Lv(Pt),Or.next=5,this.core.sendCmd("qchatUpdateSystemNotification",{sysMsg:ir,qchatMsgUpdateTag:zn(zn({},Dt),{operatorAccount:this.core.account,operatorClientType:Rc.Web,pushPayload:Io(Oe.pushPayload),routeEnable:_m.boolean(Oe,"routeEnable")})});case 5:return vr=Or.sent,Or.abrupt("return",Op(vr.content.sysMsg,this.logger));case 7:case"end":return Or.stop()}},Ne,this)}))},xe.markSystemNotificationsRead=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("qchatMarkSysMsgRead",{sysMsgs:Fo(Lt=Oe.systemNotifications).call(Lt,function(ir){return HC(ir)})});case 2:case"end":return Pt.stop()}},Ne,this)}))},xe.onSysMsg=function(Oe){var Ne=Oe.content.sysMsg;if(Ne){var Lt=Op(Ne,this.core.logger),Dt=JC[va[Lt.type]];if(Dt&&Dt.call(this,Lt)===!1)return;var Pt={feature:"default",systemNotifications:[Lt]};this.logger.log("qchat on systemNotification: ",Pt),this.core.emit("systemNotification",Pt)}else this.core.logger.warn("No sysMsg in onSysMsg packet")},xe.onMultiSysMsg=function(Oe){var Ne=Oe.content.sysMsg;if(Ne){var Lt=Op(Ne,this.logger);this.core.emit("systemNotificationUpdate",Lt)}},xe.onSyncSysMsg=function(Oe){var Ne=this,Lt=Oe.content.systemNotifications;if(Lt&&Lt.length>0){var Dt=Fo(Lt).call(Lt,function(Pt){return Op(Pt,Ne.logger)});this.core.emit("systemNotification",{feature:"sync",systemNotifications:Dt})}else this.logger.warn("sync system notification not exist")},pe}(),gc=["image","audio","video","file"],YC=function(){function pe(qe){var Oe=this;this.markMessageRead=Ap(function(Ne){return hn(Oe,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.next=2,this.core.sendCmd("qchatMarkMessageRead",{markMsgReadTag:Ne});case 2:Dt=vr.sent,Pt=Pm(Dt.content.unreadInfo),this.core.eventBus.emit("qchatChannel/updateUnreads",[Pt]);case 5:case"end":return vr.stop()}},Lt,this)}))},200),this.core=qe,this.logger=qe.logger}var xe=pe.prototype;return xe.sendMessage=function(Oe){var Ne,Lt,Dt,Pt;return hn(this,void 0,void 0,Dr.mark(function ir(){var vr,Ir,Or,jr,Ur,Yr;return Dr.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if(!(ta(gc).call(gc,Oe.type)>-1)){Mn.next=4;break}return Mn.next=3,this.doSendFile(Oe);case 3:Oe.attach=Mn.sent;case 4:return vr=$v(zn({fromAccount:this.core.account},Oe)),Mn.next=7,Xs(vr,{time:new Date().getTime(),deliveryStatus:Qi.sending},this.core);case 7:Ir=Mn.sent;try{Oe.onSendBefore&&Oe.onSendBefore(Ir)}catch(Dn){this.logger.error("sendMsg: options.onSendBefore error",Dn)}return Mn.prev=9,Mn.next=12,this.core.sendCmd("qchatSendMsg",{qchatMsg:vr});case 12:Or=Mn.sent,Mn.next=22;break;case 15:return Mn.prev=15,Mn.t0=Mn.catch(9),Mn.next=19,Xs(vr,{time:new Date().getTime(),deliveryStatus:Qi.failed,attachUrl:(Ne=Ir.attach)===null||Ne===void 0?void 0:Ne.url},this.core);case 19:throw jr=Mn.sent,Mn.t0.msg=jr,Mn.t0;case 22:return Ur=Or.content,Mn.next=25,Xs(zn({},Ur.qchatMsg),{deliveryStatus:Qi.success,attachUrl:(Lt=Ir.attach)===null||Lt===void 0?void 0:Lt.url},this.core);case 25:if(!(Yr=Mn.sent).isAntispam){Mn.next=29;break}throw{code:10403,msg:Yr,message:((Dt=Yr==null?void 0:Yr.antiSpamInfo)===null||Dt===void 0?void 0:Dt.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((Pt=Yr==null?void 0:Yr.antiSpamInfo)===null||Pt===void 0?void 0:Pt.yidunAntiSpamRes)||""};case 29:return Mn.abrupt("return",Yr);case 30:case"end":return Mn.stop()}},ir,this,[[9,15]])}))},xe.doSendFile=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(jn({type:{type:"enum",values:["image","audio","video","file"]},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},Oe),Lt=Oe.attach){Pt.next=15;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){Pt.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return Pt.prev=5,Pt.next=8,this.core.cloudStorage.uploadFile(Oe);case 8:Lt=Pt.sent,Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(5),this.logger.error("sendFile:: upload File error or abort",Pt.t0),Pt.t0;case 15:return Pt.abrupt("return",Lt);case 16:case"end":return Pt.stop()}},Ne,this,[[5,11]])}))},xe.resendMessage=function(Oe){var Ne,Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt,ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return(Pt=$v(zn(zn({},Oe),{resendFlag:!0}))).deliveryStatus=Qi.sending,Ur.prev=2,Ur.next=5,this.core.sendCmd("qchatSendMsg",{qchatMsg:Pt});case 5:ir=Ur.sent,Ur.next=15;break;case 8:return Ur.prev=8,Ur.t0=Ur.catch(2),Ur.next=12,Xs(Pt,{time:new Date().getTime(),deliveryStatus:Qi.failed},this.core);case 12:throw vr=Ur.sent,Ur.t0.msg=vr,Ur.t0;case 15:return Ir=ir.content,Ur.next=18,Xs(zn({},Ir.qchatMsg),{deliveryStatus:Qi.success},this.core);case 18:if(!(Or=Ur.sent).isAntispam){Ur.next=22;break}throw{code:10403,msg:Or,message:((Ne=Or==null?void 0:Or.antiSpamInfo)===null||Ne===void 0?void 0:Ne.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((Lt=Or==null?void 0:Or.antiSpamInfo)===null||Lt===void 0?void 0:Lt.yidunAntiSpamRes)||""};case 22:return Ur.abrupt("return",Or);case 23:case"end":return Ur.stop()}},Dt,this,[[2,8]])}))},xe.doUpdateMessage=function(Oe){var Ne,Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt,ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Pt=Oe.message,ir=Qd(Oe,["message"]),(vr=$v(Pt)).msgIdClient=void 0,vr.time=Pt.time,Ur.next=6,this.core.sendCmd("qchatUpdateMessage",{qchatMsg:vr,qchatMsgUpdateTag:zn(zn({},ir),{operatorAccount:this.core.account,operatorClientType:Rc.Web,pushPayload:Io(Oe.pushPayload),routeEnable:_m.boolean(Oe,"routeEnable")})});case 6:return Ir=Ur.sent,Ur.next=9,Xs(Ir.content.qchatMsg,{},this.core);case 9:if(Or=Ur.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Or,!0),!Ir.content.qchatMsg.isAntispam){Ur.next=14;break}throw{code:10403,msg:vr,message:((Ne=Ir.content.qchatMsg)===null||Ne===void 0?void 0:Ne.yidunAntiSpamRes)||"message has be antispam",isAntispam:!0,yidunAntiSpamRes:((Lt=Ir.content.qchatMsg)===null||Lt===void 0?void 0:Lt.yidunAntiSpamRes)||""};case 14:return Ur.abrupt("return",Or);case 15:case"end":return Ur.stop()}},Dt,this)}))},xe.getHistoryMessage=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir=this;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return Ir.next=2,this.core.sendCmd("qchatGetHistoryMsg",{getHistoryMsgTag:zn(zn({},Oe),{reverse:qd(Oe)?1:0})});case 2:return Dt=Ir.sent,Pt=Dt.content,Ir.next=6,ca.all(Fo(Lt=Pt.qchatMsgs).call(Lt,function(Or){return Xs(Or,{},ir.core)}));case 6:return Ir.abrupt("return",Ir.sent);case 7:case"end":return Ir.stop()}},Ne,this)}))},xe.getMentionedMeMessages=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return jr.next=2,this.core.sendCmd("qchatGetMentionedMeMessages",{tag:Oe});case 2:return Dt=jr.sent,Pt=Dt.content,Ur=Pt.page,ir=qa(i1,Ur),jr.next=7,ca.all(Fo(Lt=Pt.datas).call(Lt,function(Yr){return Xs(Yr,{},Ir.core)}));case 7:return vr=jr.sent,jr.abrupt("return",{pageInfo:ir,messages:vr});case 9:case"end":return jr.stop()}var Ur},Ne,this)}))},xe.areMentionedMeMessages=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:Lt={},Dt=0;case 2:if(!(Dt<Oe.length)){vr.next=13;break}if((Pt=Oe[Dt]).fromAccount!==this.core.account){vr.next=7;break}return Lt[Pt.msgIdClient]=!1,vr.abrupt("continue",10);case 7:return vr.next=9,this.core.qchatChannel.subscribeModuleService.getMentionedFlag(Pt,!0);case 9:Lt[Pt.msgIdClient]=vr.sent;case 10:Dt++,vr.next=2;break;case 13:return vr.abrupt("return",Lt);case 14:case"end":return vr.stop()}},Ne,this)}))},xe.getLastMessageOfChannels=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.next=2,this.core.sendCmd("qchatGetLastMessageOfChannels",{tag:Oe});case 2:return Lt=vr.sent,Dt=Lt.content.msgs,vr.next=6,s1(Dt,{},this.core);case 6:return Pt=vr.sent,vr.abrupt("return",ed(Pt).call(Pt,function(Ir,Or){return Ir[Or.channelId]=Or,Ir},{}));case 8:case"end":return vr.stop()}},Ne,this)}))},xe.messageSearchByPage=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr;return Dr.wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Or.next=2,this.core.sendCmd("qchatMessageSearchByPage",{qchatMessageSearchByPageTag:zn(zn({},(jr=Oe,Tp(QC,jr))),{includeSelf:Oe.includeSelf?1:""})});case 2:return Lt=Or.sent,Dt=Lt.content,Pt=Dt.datas,ir=Dt.listQueryTag,Or.next=6,s1(Pt,{},this.core);case 6:return vr=Or.sent,Or.abrupt("return",{listQueryTag:{hasMore:+ir.hasMore==1,nextTimetag:ir.nextTimetag?ma(ir.nextTimetag):0,cursor:ir.cursor},datas:vr});case 8:case"end":return Or.stop()}var jr},Ne,this)}))},xe.onMsg=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(Lt=Oe.content.qchatMsg){ir.next=4;break}return this.logger.warn("No qchatMsg in qchatMsg packet"),ir.abrupt("return");case 4:return ir.next=6,Xs(Lt,{},this.core);case 6:Dt=ir.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Dt,!1),this.core.emit("message",Dt);case 9:case"end":return ir.stop()}},Ne,this)}))},xe.onRecvUnreadInfo=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(Lt=Oe.content.qchatMsg){ir.next=3;break}return ir.abrupt("return");case 3:return ir.next=5,Xs(Lt);case 5:Dt=ir.sent,this.core.eventBus.emit("qchatChannel/changeUnread",Dt,!1);case 7:case"end":return ir.stop()}},Ne,this)}))},xe.onMultiSyncRead=function(Oe){var Ne=Oe.content.unreadInfo;if(Ne){var Lt=Pm(Ne);this.core.eventBus.emit("qchatChannel/updateUnreads",[Lt])}},xe.onMultiSyncServersRead=function(Oe){var Ne=Oe.content.qchatMultiSyncServersMessageReadTag;if(Ne){var Lt=Pc(Ne),Dt=Lt.successServerIds,Pt=Lt.ackTimestamp;this.core.eventBus.emit("qchatChannel/clearUnreadCountByServers",Dt,Pt)}},xe.onRecvMsgUpdate=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(Lt=Oe.content.qchatMsg,Dt=Oe.content.qchatMsgUpdateInfo,Lt){Ir.next=4;break}return Ir.abrupt("return");case 4:return Ir.next=6,Xs(Lt,{},this.core);case 6:Pt=Ir.sent,ir=a1(Dt),this.core.eventBus.emit("qchatChannel/changeUnread",Pt,!0),this.core.emit("messageUpdate",Pt,ir);case 10:case"end":return Ir.stop()}},Ne,this)}))},pe}(),XC=function(){function pe(qe){var Oe=this;this._sendTypingEvent=Ap(function(Ne){return hn(Oe,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.core.sendCmd("qchatSendCustomSysMsg",{sysMsg:Lv(zn(zn({},Ne),{resendFlag:!1,persistEnable:!1,routeEnable:!1,pushEnable:!1,needBadge:!1,needPushNick:!1}),va.msgTyping)});case 2:case"end":return Pt.stop()}},Lt,this)}))},3e3),this.core=qe,this.logger=qe.logger,this.lastChannelIdInTyping=""}var xe=pe.prototype;return xe.getMessageHistoryByIds=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.core.sendCmd("qchatGetMessageHistoryByIds",{channelInfo:{serverId:Oe.serverId,channelId:Oe.channelId},messageReferList:Oe.messageReferList});case 2:return Dt=ir.sent,ir.abrupt("return",ca.all(Fo(Lt=Dt.content.qchatMsgs).call(Lt,function(vr){return Xs(vr)})));case 4:case"end":return ir.stop()}},Ne,this)}))},xe.getReferMessages=function(Oe){var Ne,Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(!((Ne=Oe.message.replyRefer)===null||Ne===void 0)&&Ne.msgIdServer&&(!((Lt=Oe.message.threadRefer)===null||Lt===void 0)&&Lt.msgIdServer)){vr.next=2;break}throw new Error("Message has no reply");case 2:return vr.next=4,this.getMessageHistoryByIds({serverId:Oe.message.serverId,channelId:Oe.message.channelId,messageReferList:[Oe.message.replyRefer,Oe.message.threadRefer]});case 4:if(Pt=vr.sent,Oe.referType!==Nc[Nc.all]){vr.next=9;break}return vr.abrupt("return",{replyMessage:Pt[0],threadMessage:Pt[1]});case 9:if(Oe.referType!==Nc[Nc.reply]){vr.next=13;break}return vr.abrupt("return",{replyMessage:Pt[0]});case 13:if(Oe.referType!==Nc[Nc.thread]){vr.next=15;break}return vr.abrupt("return",{threadMessage:Pt[1]});case 15:return vr.abrupt("return",{replyMessage:Pt[0],threadMessage:Pt[1]});case 16:case"end":return vr.stop()}},Dt,this)}))},xe.getThreadMessages=function(Oe){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return Pt=!((Ne=Oe.message.threadRefer)===null||Ne===void 0)&&Ne.msgIdServer?zn({serverId:Oe.message.serverId,channelId:Oe.message.channelId},Oe.message.threadRefer):Oe.message,jr.next=3,this.core.sendCmd("qchatGetThreadMessages",{qchatMsg:Pt,getThreadHistoryMsgTag:zn(zn({},Oe.messageQueryOption),{reverse:_m.boolean(Oe.messageQueryOption,"reverse")})});case 3:return ir=jr.sent,jr.next=6,Xs(ir.content.thread);case 6:return vr=jr.sent,jr.next=9,ca.all(Fo(Dt=ir.content.qchatMsgs).call(Dt,function(Ur){return Xs(Ur)}));case 9:return Ir=jr.sent,jr.abrupt("return",{thread:vr,threadInfo:{messageCount:+ir.content.threadInfo.messageCount,lastMessageTimestamp:+ir.content.threadInfo.lastMessageTimestamp},messages:Ir});case 11:case"end":return jr.stop()}},Lt,this)}))},xe.getThreadRootMessagesMeta=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return Lt=Oe.threadRootMessages,Dt=Qd(Oe,["threadRootMessages"]),Ir.next=3,this.core.sendCmd("qchatGetThreadRootMessagesMeta",{qchatMsgs:Lt,tag:Dt});case 3:if(Pt=Ir.sent,!((ir=Pt.content.metas)&&ir.length>0)){Ir.next=7;break}return Ir.abrupt("return",Fo(ir).call(ir,function(Or){return zn(zn({},Or),{total:ma(Or.total),timestamp:ma(Or.timestamp),msgTime:ma(Or.msgTime)})}));case 7:return Ir.abrupt("return",[]);case 8:case"end":return Ir.stop()}},Ne,this)}))},xe.getQuickComments=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.next=2,this.core.sendCmd("qchatGetQuickComments",{tag:{serverId:Oe.serverId,channelId:Oe.channelId,msgIdServerList:Io(Fo(Lt=Oe.msgList).call(Lt,function(Ir){return Ir.msgIdServer}))}});case 2:return Dt=vr.sent,Pt=Dt.content.quickCommentResponse,vr.abrupt("return",GC(Pt));case 5:case"end":return vr.stop()}},Ne,this)}))},xe.updateQuickComment=function(Oe,Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return jn({type:{type:"number"},commentMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},Oe),Dt=Oe.commentMessage,Pt=Dt.serverId,ir=Dt.channelId,vr=Dt.fromAccount,Ir=Dt.msgIdServer,Or=Dt.time,Ur.next=4,this.core.sendCmd("qchatUpdateQuickComment",{tag:{serverId:Pt,channelId:ir,fromAccount:vr,msgIdServer:Ir,time:Or,type:Oe.type,opeType:Ne,opeAccid:this.core.account}});case 4:case"end":return Ur.stop()}},Lt,this)}))},xe.sendTypingEvent=function(Oe){return hn(this,void 0,void 0,Dr.mark(function Ne(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Oe.channelId!==this.lastChannelIdInTyping){Dt.next=4;break}return this.logger.log("qchatMsg sendTypingEvent throttle"),this._sendTypingEvent(Oe),Dt.abrupt("return");case 4:this.lastChannelIdInTyping=Oe.channelId,this._sendTypingEvent.flush(),this._sendTypingEvent(Oe);case 7:case"end":return Dt.stop()}},Ne,this)}))},pe}(),Bm=function(pe){function xe(Oe){var Ne;return(Ne=pe.call(this,"qchatMsg",Oe)||this).core=Oe,Ne.lastChannelIdInMark="",ou({cmdMap:r1,cmdConfig:qC}),Ne.notificationModuleService=new ld(Oe),Ne.messageModuleService=new YC(Oe),Ne.extendModuleService=new XC(Oe),Ne}ra(xe,pe);var qe=xe.prototype;return qe.sendMessage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(Ep)},ext:{type:"string",required:!1},mentionAll:{type:"boolean",required:!1},mentionAccids:{type:"array",itemType:"string",required:!1},mentionRoleIds:{type:"array",itemType:"string",required:!1,min:1},historyEnable:{type:"boolean",required:!1},pushEnable:{type:"boolean",required:!1}},Ne),Pt.next=3,this.messageModuleService.sendMessage(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.updateMessage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(jn({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0},body:{type:"string",required:!1},ext:{type:"string",required:!1}}}},Ne),!(typeof Ne.message.status=="number"&&Ne.message.status<1e4)){Pt.next=3;break}throw new Ao("Status should be greater than or equal to 10000");case 3:return Pt.next=5,this.messageModuleService.doUpdateMessage(Ne);case 5:return Pt.abrupt("return",Pt.sent);case 6:case"end":return Pt.stop()}},Lt,this)}))},qe.resendMessage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdClient:{type:"string",allowEmpty:!1}},Ne),Pt.next=3,this.messageModuleService.resendMessage(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.deleteMessage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},Ne),(Dt=JSON.parse(Io(Ne))).message.status=2,ir.next=5,this.messageModuleService.doUpdateMessage(Dt);case 5:return ir.abrupt("return",ir.sent);case 6:case"end":return ir.stop()}},Lt,this)}))},qe.revokeMessage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({message:{type:"object",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number",min:0}}}},Ne),(Dt=JSON.parse(Io(Ne))).message=Rm(Dt.message,["serverId","channelId","msgIdServer","time"]),Dt.message.status=1,ir.next=6,this.messageModuleService.doUpdateMessage(Dt);case 6:return ir.abrupt("return",ir.sent);case 7:case"end":return ir.stop()}},Lt,this)}))},qe.markMessageRead=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:jn({serverId:{type:"string"},channelId:{type:"string"},time:{type:"number",min:0}},Ne),Ne.channelId!==this.lastChannelIdInMark&&this.messageModuleService.markMessageRead.flush(),this.lastChannelIdInMark=Ne.channelId,this.messageModuleService.markMessageRead(Ne);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.replyMessage=function(Ne){jn({replyMessage:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1}}}},Ne);var Lt=Ne.replyMessage;if(Ne.serverId!==Lt.serverId||Ne.channelId!==Lt.channelId)throw new Ao("Forbid replying to message from other server, channel");return this.sendMessage(Ne)},qe.getMessageHistoryByIds=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},messageReferList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ne),Pt.next=3,this.extendModuleService.getMessageHistoryByIds(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.getReferMessages=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},referType:{type:"enum",values:Ia(Nc),required:!1}},Ne),Pt.next=3,this.extendModuleService.getReferMessages(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.getThreadMessages=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({message:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}},messageQueryOption:{type:"object",rules:{beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},excludeMsgId:{type:"string",required:!1},limit:{type:"number",required:!1},reverse:{type:"boolean",required:!1}}}},Ne),Pt.next=3,this.extendModuleService.getThreadMessages(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.getThreadRootMessagesMeta=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},threadRootMessages:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ne),Pt.next=3,this.extendModuleService.getThreadRootMessagesMeta(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.sendSystemNotification=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1,required:!1},attach:{type:"object",required:!1}},Ne),Pt.next=3,this.notificationModuleService.sendSystemNotification(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.updateSystemNotification=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({systemNotification:{type:"object",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"enum",values:Ia(va)},body:{type:"string",required:!1},ext:{type:"string",required:!1},status:{type:"number",required:!1}}}},Ne),Pt.next=3,this.notificationModuleService.updateSystemNotification(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.markSystemNotificationsRead=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({systemNotifications:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1}},min:1}},Ne),Pt.next=3,this.notificationModuleService.markSystemNotificationsRead(Ne);case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getHistoryMessage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},beginTime:{type:"number",min:0,required:!1},endTime:{type:"number",min:0,required:!1},excludeMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},Ne),Pt.next=3,this.messageModuleService.getHistoryMessage(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.getMentionedMeMessages=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},timestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1}},Ne),Pt.next=3,this.messageModuleService.getMentionedMeMessages(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.areMentionedMeMessages=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(jn({messages:{type:"array",rules:{serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgIdServer:{type:"string",allowEmpty:!1}},min:1}},Ne),Zb(Dt=Ne.messages).call(Dt,function(vr){return Ne.messages[0].serverId===vr.serverId})){ir.next=4;break}throw new Ao("Different serverId",Ne,10414);case 4:if(!this.core.qchatChannel.subscribeForVisitorService.isInAutoServers(Ne.messages[0].serverId)){ir.next=7;break}throw new Ao("Not allowed for visitor",Ne,10403);case 7:return ir.next=9,this.messageModuleService.areMentionedMeMessages(Ne.messages);case 9:return ir.abrupt("return",ir.sent);case 10:case"end":return ir.stop()}},Lt,this)}))},qe.addQuickComment=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.extendModuleService.updateQuickComment(Ne,1);case 2:case"end":return Pt.stop()}},Lt,this)}))},qe.removeQuickComment=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.extendModuleService.updateQuickComment(Ne,2);case 2:case"end":return Pt.stop()}},Lt,this)}))},qe.getQuickComments=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},msgList:{type:"array",rules:{msgIdServer:{type:"string",allowEmpty:!1}},min:1}},Ne),Pt.next=3,this.extendModuleService.getQuickComments(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.sendTypingEvent=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},Ne),Pt.next=3,this.extendModuleService.sendTypingEvent(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.getLastMessageOfChannels=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelIdList:{type:"array",itemType:"string"}},Ne),Pt.next=3,this.messageModuleService.getLastMessageOfChannels(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.qchatOnMsgHandler=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this.messageModuleService.onMsg(Ne);case 1:case"end":return Pt.stop()}},Lt,this)}))},qe.qchatOnRecvUnreadInfoHandler=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this.messageModuleService.onRecvUnreadInfo(Ne);case 1:case"end":return Pt.stop()}},Lt,this)}))},qe.qchatOnSysMsgHandler=function(Ne){this.notificationModuleService.onSysMsg(Ne)},qe.qchatMultiSyncMessageReadHandler=function(Ne){this.messageModuleService.onMultiSyncRead(Ne)},qe.qchatMultiSyncSystemNotificationUpdateHandler=function(Ne){this.notificationModuleService.onMultiSysMsg(Ne)},qe.qchatSyncSystemNotificationHandler=function(Ne){this.notificationModuleService.onSyncSysMsg(Ne)},qe.qchatRecvMessageUpdateHandler=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this.messageModuleService.onRecvMsgUpdate(Ne);case 1:case"end":return Pt.stop()}},Lt,this)}))},qe.searchMsgByPage=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({keyword:{type:"string",allowEmpty:!1,required:!1},serverId:{type:"string",allowEmpty:!1,required:!0},channelId:{type:"string",allowEmpty:!1,required:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},fromTime:{type:"number",allowEmpty:!1,required:!1},toTime:{type:"number",allowEmpty:!1,required:!1},msgTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!0},subTypes:{type:"array",itemType:"string",allowEmpty:!1,required:!1},includeSelf:{type:"boolean",allowEmpty:!1,required:!1},order:{type:"enum",values:Ia(ml),required:!1},limit:{type:"number",min:0,required:!1},sort:{type:"enum",values:Ia(id),required:!1},cursor:{type:"string",allowEmpty:!1,required:!1}},Ne),Pt.next=3,this.messageModuleService.messageSearchByPage(Ne);case 3:return Pt.abrupt("return",Pt.sent);case 4:case"end":return Pt.stop()}},Lt,this)}))},qe.qchatMultiSyncServersMessageReadHandler=function(Ne){this.messageModuleService.onMultiSyncServersRead(Ne)},xe}(td);(function(pe){pe.UNKNOWN="UNKNOWN",pe.LOGIN_STATE_ERROR="LOGIN_STATE_ERROR",pe.CLOSE_BY_BACKEND="CLOSE_BY_BACKEND",pe.ALL_MEMBERS_OUT="ALL_MEMBERS_OUT",pe.END_OF_LIFE="END_OF_LIFE",pe.CLOSE_BY_MEMBER="CLOSE_BY_MEMBER",pe.KICK_OUT="KICK_OUT",pe.SYNC_DATA_ERROR="SYNC_DATA_ERROR",pe.LEAVE_BY_SELF="LEAVE_BY_SELF",pe.kICK_BY_SELF="kICK_BY_SELF"})(c1||(c1={})),function(pe){pe.offNotAllowSelfOn="offNotAllowSelfOn",pe.offAllowSelfOn="offAllowSelfOn",pe.disable="disable"}(si||(si={}));var ZC={serverId:{type:"string"},uid:{type:"string"},accid:{type:"string"},nick:{type:"string"},avatar:{type:"string"},ext:{type:"string"},type:{type:"number"},joinTime:{type:"number"},inviter:{type:"string"},validFlag:{type:"boolean"},createTime:{type:"number"},updateTime:{type:"number"}},eM={limit:{type:"number"}};function tM(pe){return Ts(pe)&&pe.length>0?Fo(pe).call(pe,function(xe){return function(Oe){return qa(ZC,Oe)}(xe)}):[]}function rM(pe){try{pe.audio&&(pe.audio=JSON.parse(pe.audio))}catch{throw new ru('result "audio" JSON parse error',{key:"audio"},"JSON parse error")}try{pe.video&&(pe.video=JSON.parse(pe.video))}catch{throw new ru('result "video" JSON parse error',{key:"video"},"JSON parse error")}return qa(eM,pe)}var nM={"25_1":"qchatGetNeroomToken","25_2":"qchatUpdateRTCChannelConfig","25_3":"qchatGetRTCChannelConfig","25_4":"qchatGetRTCChannelMembers"},Rp={QChatRTCChannelConfigTag:{serverId:1,channelId:2,limit:3,audio:4,video:5},QChatRTCChannelConfigResultTag:{limit:1,audio:2,video:3},QChatGetRTCParams:{serverId:1,channelId:2},qchatGetRTCChannelMembersTag:{serverId:1,channelId:2},memberInfo:{serverId:1,accid:3,nick:4,avatar:5,ext:6,type:7,joinTime:8,inviter:9,validFlag:10,createTime:11,updateTime:12},QChatGetNeroomTokenResultTag:{token:1,expire:2},QChatGetNeroomTokenParams:{neroomDeviceId:1}},Lm=Ki(Rp),Bp={qchatGetNeroomToken:{sid:25,cid:1,service:"qchatMedia",params:[{type:"Property",name:"qchatGetNeroomTokenTag",reflectMapper:Rp.QChatGetNeroomTokenParams}],response:[{type:"Property",name:"neroomToken",reflectMapper:Lm.QChatGetNeroomTokenResultTag}]},qchatUpdateRTCChannelConfig:{sid:25,cid:2,service:"qchatMedia",params:[{type:"Property",name:"RTCChannelConfig",reflectMapper:Rp.QChatRTCChannelConfigTag}]},qchatGetRTCChannelConfig:{sid:25,cid:3,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelConfigTag",reflectMapper:Rp.QChatGetRTCParams}],response:[{type:"Property",name:"RTCChannelConfig",reflectMapper:Lm.QChatRTCChannelConfigResultTag}]},qchatGetRTCChannelMembers:{sid:25,cid:4,service:"qchatMedia",params:[{type:"Property",name:"qchatGetRTCChannelMembersTag",reflectMapper:Rp.QChatGetRTCParams}],response:[{type:"PropertyArray",name:"memberList",reflectMapper:Lm.memberInfo}]}},l1=function(pe){function xe(Oe){var Ne;return(Ne=pe.call(this,"qchatMedia",Oe)||this).tokenExpireTime=24e4,Ne.getTokenState=!1,Ne.core=Oe,ou({cmdMap:nM,cmdConfig:Bp}),Ne.core.on("disconnect",function(){return hn(k(Ne),void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(!this.roomContext){Pt.next=3;break}return Pt.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return Pt.stop()}},Lt,this)}))}),Ne.core.on("kicked",function(){return hn(k(Ne),void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(!this.roomContext){Pt.next=3;break}return Pt.next=3,this.disconnectChannel();case 3:this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0);case 4:case"end":return Pt.stop()}},Lt,this)}))}),Ne.core.eventBus.on("qchatMedia/serverOrChannelLeave",function(Lt){return hn(k(Ne),void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!(Lt.type===va[va.channelVisibilityUpdate]&&Lt.channelId===this.channelId||Lt.type===va[va.serverEnterLeave]&&Lt.serverId===this.serverId)){ir.next=4;break}if(!this.roomContext||!this.roomContext.roomUuid){ir.next=4;break}return ir.next=4,this.disconnectChannel();case 4:case"end":return ir.stop()}},Dt,this)}))}),Ne.tokenExpireTime=24e4,Ne.channelId="",Ne.serverId="",Ne}ra(xe,pe);var qe=xe.prototype;return qe.setNeroom=function(Ne){this.neroom=new Ne},qe._checkPermission=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.core.qchatRole.checkPermission(Ne);case 2:return Dt=ir.sent,ir.abrupt("return",Dt);case 4:case"end":return ir.stop()}},Lt,this)}))},qe._checkConnectState=function(){if(this.state!=="connect")throw new Ao("QChatMedia::you should connect first")},qe.kickMemberOut=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),ir.prev=2,ir.next=5,(Lt=this.roomContext)===null||Lt===void 0?void 0:Lt.kickMemberOut(Ne.accid);case 5:ir.next=11;break;case 7:throw ir.prev=7,ir.t0=ir.catch(2),this.logger.error("QChatMedia::kickMemberOut error params is "+Io(Ne),ir.t0),new Ao("QChatMedia::kickMemberOut error",ir.t0);case 11:case"end":return ir.stop()}},Dt,this,[[2,7]])}))},qe.disconnectChannel=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),this.logger.debug("QChatMedia::disconnect begin disconnect"),Pt.prev=2,Pt.next=5,(Ne=this.roomContext)===null||Ne===void 0?void 0:Ne.leaveRoom();case 5:Pt.next=10;break;case 7:Pt.prev=7,Pt.t0=Pt.catch(2),this.logger.error("QChatMedia::disconnect error",Pt.t0);case 10:if(!this.authService){Pt.next=13;break}return Pt.next=13,this.authService.logout();case 13:this._setStateInit(),this.core.emit("qchatMediaDisconnect");case 15:case"end":return Pt.stop()}},Lt,this,[[2,7]])}))},qe._setStateInit=function(){this.logger.debug("QChatMedia::disconnect end"),this.roomContext=void 0,this.rtcController=void 0,this.state="init",this.tokenTimer&&(this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0),this.channelId="",this.serverId=""},qe.muteAudio=function(Ne){var Lt,Dt,Pt,ir,vr;return hn(this,void 0,void 0,Dr.mark(function Ir(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),((Lt=this.roomContext)===null||Lt===void 0?void 0:Lt.localMember.uuid)!==Ne.accid){Ur.next=14;break}return Ur.prev=3,Ur.next=6,(Dt=this.rtcController)===null||Dt===void 0?void 0:Dt.muteMyAudio();case 6:Ur.next=12;break;case 8:throw Ur.prev=8,Ur.t0=Ur.catch(3),this.logger.error("QChatMedia::muteAudio error",Ur.t0),new Ao("QChatMedia::muteAudio error",Ur.t0);case 12:case 25:Ur.next=31;break;case 14:if(Ur.prev=14,!(Or=(Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.roomProperties.audioOff)||((ir=Or.value)===null||ir===void 0?void 0:ir.split("_")[0])!==si.offNotAllowSelfOn){Ur.next=23;break}return Ur.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 19:if(Ur.sent){Ur.next=23;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),Ur.abrupt("return");case 23:return Ur.next=25,(vr=this.rtcController)===null||vr===void 0?void 0:vr.muteMemberAudio(Ne.accid);case 27:throw Ur.prev=27,Ur.t1=Ur.catch(14),this.logger.error("QChatMedia::muteAudio error params is "+Io(Ne),Ur.t1),new Ao("QChatMedia::muteAudio error",Ur.t1);case 31:case"end":return Ur.stop()}},Ir,this,[[3,8],[14,27]])}))},qe.unMuteAudio=function(Ne){var Lt,Dt,Pt,ir,vr;return hn(this,void 0,void 0,Dr.mark(function Ir(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),!(Or=(Lt=this.roomContext)===null||Lt===void 0?void 0:Lt.roomProperties.audioOff)||((Dt=Or.value)===null||Dt===void 0?void 0:Dt.split("_")[0])!==si.offNotAllowSelfOn){Ur.next=10;break}return Ur.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 6:if(Ur.sent){Ur.next=10;break}return this.logger.error("QChatMedia::unMuteAudio not allow open auido"),Ur.abrupt("return");case 10:if(((Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.localMember.uuid)!==Ne.accid){Ur.next=22;break}return Ur.prev=11,Ur.next=14,(ir=this.rtcController)===null||ir===void 0?void 0:ir.unmuteMyAudio();case 14:Ur.next=20;break;case 16:throw Ur.prev=16,Ur.t0=Ur.catch(11),this.logger.error("QChatMedia::unMuteAudio error",Ur.t0),new Ao("QChatMedia::unMuteAudio error",Ur.t0);case 20:case 25:Ur.next=31;break;case 22:return Ur.prev=22,Ur.next=25,(vr=this.rtcController)===null||vr===void 0?void 0:vr.unmuteMemberAudio(Ne.accid);case 27:throw Ur.prev=27,Ur.t1=Ur.catch(22),this.logger.error("QChatMedia::unMuteAudio error params is "+Io(Ne),Ur.t1),new Ao("QChatMedia::unMuteAudio error",Ur.t1);case 31:case"end":return Ur.stop()}},Ir,this,[[11,16],[22,27]])}))},qe.muteVideo=function(Ne){var Lt,Dt,Pt,ir,vr;return hn(this,void 0,void 0,Dr.mark(function Ir(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),((Lt=this.roomContext)===null||Lt===void 0?void 0:Lt.localMember.uuid)!==Ne.accid){Ur.next=14;break}return Ur.prev=3,Ur.next=6,(Dt=this.rtcController)===null||Dt===void 0?void 0:Dt.muteMyVideo();case 6:Ur.next=12;break;case 8:throw Ur.prev=8,Ur.t0=Ur.catch(3),this.logger.error("QChatMedia::muteVideo error",Ur.t0),new Ao("QChatMedia::muteVideo error",Ur.t0);case 12:case 25:Ur.next=31;break;case 14:if(Ur.prev=14,!(Or=(Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.roomProperties.videoOff)||((ir=Or.value)===null||ir===void 0?void 0:ir.split("_")[0])!==si.offNotAllowSelfOn){Ur.next=23;break}return Ur.next=19,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 19:if(Ur.sent){Ur.next=23;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),Ur.abrupt("return");case 23:return Ur.next=25,(vr=this.rtcController)===null||vr===void 0?void 0:vr.muteMemberVideo(Ne.accid);case 27:throw Ur.prev=27,Ur.t1=Ur.catch(14),this.logger.error("QChatMedia::muteVideo error params is "+Io(Ne),Ur.t1),new Ao("QChatMedia::muteVideo error",Ur.t1);case 31:case"end":return Ur.stop()}},Ir,this,[[3,8],[14,27]])}))},qe.unMuteVideo=function(Ne){var Lt,Dt,Pt,ir,vr;return hn(this,void 0,void 0,Dr.mark(function Ir(){var Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),!(Or=(Lt=this.roomContext)===null||Lt===void 0?void 0:Lt.roomProperties.videoOff)||((Dt=Or.value)===null||Dt===void 0?void 0:Dt.split("_")[0])!==si.offNotAllowSelfOn){Ur.next=10;break}return Ur.next=6,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 6:if(Ur.sent){Ur.next=10;break}return this.logger.error("QChatMedia::unMuteVideo not allow open video"),Ur.abrupt("return");case 10:if(((Pt=this.roomContext)===null||Pt===void 0?void 0:Pt.localMember.uuid)!==Ne.accid){Ur.next=22;break}return Ur.prev=11,Ur.next=14,(ir=this.rtcController)===null||ir===void 0?void 0:ir.unmuteMyVideo();case 14:Ur.next=20;break;case 16:throw Ur.prev=16,Ur.t0=Ur.catch(11),this.logger.error("QChatMedia::unMuteVideo error",Ur.t0),new Ao("QChatMedia::unMuteVideo error",Ur.t0);case 20:Ur.next=30;break;case 22:Ur.prev=22,(vr=this.rtcController)===null||vr===void 0||vr.unmuteMemberVideo(Ne.accid),Ur.next=30;break;case 26:throw Ur.prev=26,Ur.t1=Ur.catch(22),this.logger.error("QChatMedia::unMuteVideo error",Ur.t1),new Ao("QChatMedia::unMuteVideo error",Ur.t1);case 30:case"end":return Ur.stop()}},Ir,this,[[11,16],[22,26]])}))},qe.startScreenShare=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this._checkConnectState(),Pt.prev=1,(Ne=this.rtcController)===null||Ne===void 0||Ne.startScreenShare(),Pt.next=9;break;case 5:throw Pt.prev=5,Pt.t0=Pt.catch(1),this.logger.error("QChatMedia::startScreenShare error",Pt.t0),new Ao("QChatMedia::startScreenShare error",Pt.t0);case 9:case"end":return Pt.stop()}},Lt,this,[[1,5]])}))},qe.stopScreenShare=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:this._checkConnectState(),Pt.prev=1,(Ne=this.rtcController)===null||Ne===void 0||Ne.stopScreenShare(),Pt.next=9;break;case 5:throw Pt.prev=5,Pt.t0=Pt.catch(1),this.logger.error("QChatMedia::stopScreenShare error",Pt.t0),new Ao("QChatMedia::stopScreenShare error",Pt.t0);case 9:case"end":return Pt.stop()}},Lt,this,[[1,5]])}))},qe.stopMemberScreenShare=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),ir.prev=2,(Lt=this.rtcController)===null||Lt===void 0||Lt.stopMemberScreenShare(Ne.accid),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::stopMemberScreenShare error",ir.t0),new Ao("QChatMedia::stopMemberScreenShare error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.subscribeRemoteVideoStream=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},Ne),ir.prev=2,(Lt=this.rtcController)===null||Lt===void 0||Lt.subscribeRemoteVideoStream(Ne.accid,Ne.streamType),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoStream error",ir.t0),new Ao("QChatMedia::subscribeRemoteVideoStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.unSubscribeRemoteVideoStream=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1},streamType:{type:"number",allowEmpty:!1,min:0,max:1}},Ne),ir.prev=2,(Lt=this.rtcController)===null||Lt===void 0||Lt.unsubscribeRemoteVideoStream(Ne.accid,Ne.streamType),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::unSubscribeRemoteVideoStream error",ir.t0),new Ao("QChatMedia::unSubscribeRemoteVideoStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.setupVideoCanvas=function(Ne){var Lt;if(this._checkConnectState(),((Lt=this.roomContext)===null||Lt===void 0?void 0:Lt.localMember.uuid)===Ne.accid)try{return this.rtcController.setupLocalVideoCanvas(Ne.videoView)}catch(Dt){throw this.logger.error("QChatMedia::setupVideoCanvas error",Dt),new Ao("QChatMedia::setupVideoCanvas error",Dt)}else try{return this.rtcController.setupRemoteVideoCanvas(Ne.videoView,Ne.accid)}catch(Dt){throw this.logger.error("QChatMedia::setupVideoCanvas error",Dt),new Ao("QChatMedia::setupVideoCanvas error",Dt)}},qe.setupRemoteVideoSubStreamCanvas=function(Ne){this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne);try{return this.rtcController.setupRemoteVideoSubStreamCanvas(Ne.videoView,Ne.accid)}catch(Lt){throw this.logger.error("QChatMedia::setupRemoteVideoSubStreamCanvas error",Lt),new Ao("QChatMedia::setupRemoteVideoSubStreamCanvas error",Lt)}},qe.getScreenSharingUserUuid=function(){this._checkConnectState();try{return this.rtcController.getScreenSharingUserUuid()}catch(Ne){throw this.logger.error("QChatMedia::getScreenSharingUserUuid error",Ne),new Ao("QChatMedia::getScreenSharingUserUuid error",Ne)}},qe.initQChatMedia=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(this.neroom){Pt.next=3;break}return this.logger.warn("QChatMedia::init::you should import neroom SDK"),Pt.abrupt("return");case 3:if(this.state===void 0){Pt.next=6;break}return this.logger.error("QChatMedia::init::you already init QChatMedia"),Pt.abrupt("return");case 6:Pt.prev=6,this.neroom.initialize({appKey:this.core.options.appkey,serverConfig:Ne.serverConfig}),Pt.next=14;break;case 10:throw Pt.prev=10,Pt.t0=Pt.catch(6),this.logger.error("QChatMedia::initQChatMedia error",Pt.t0),new Ao("QChatMedia::initQChatMedia error",Pt.t0);case 14:this.authService=this.neroom.authService,this.roomService=this.neroom.roomService,this.messageChannelService=this.neroom.messageChannelService,this.state="init";case 18:case"end":return Pt.stop()}},Lt,this,[[6,10]])}))},qe.loginByIM=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(this.state==="init"){vr.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),vr.abrupt("return");case 3:return Dt=this.core.options,vr.next=6,this._getToken();case 6:return Pt=vr.sent,vr.prev=7,vr.next=10,(Ne=this.authService)===null||Ne===void 0?void 0:Ne.loginByIM(Dt.account,Pt,Dt.token);case 10:vr.next=16;break;case 12:throw vr.prev=12,vr.t0=vr.catch(7),this.logger.error("QChatMedia::loginByIM error",vr.t0),new Ao("QChatMedia::loginByIM error",vr.t0);case 16:this.state="login";case 17:case"end":return vr.stop()}},Lt,this,[[7,12]])}))},qe._getToken=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir=this;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return this.logger.log("QChatMedia::getToken begin getToken"),jr.next=3,this.core.sendCmd("qchatGetNeroomToken",{qchatGetNeroomTokenTag:{neroomDeviceId:(Ne=this.neroom)===null||Ne===void 0?void 0:Ne.deviceId}});case 3:return Dt=jr.sent,Pt=Dt.content.neroomToken,ir=Pt.token,vr=Pt.expire,this.logger.log("QChatMedia::getToken success token is "+ir+",expire is "+vr+" "),this.tokenTimer||(this.logger.debug("QChatMedia::getToken set token timer,expire is "+(1e3*vr-this.tokenExpireTime)+" "),this.tokenTimer=this.core.timerManager.addTimer(function(){return hn(Ir,void 0,void 0,Dr.mark(function Ur(){var Yr;return Dr.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return this.tokenTimer&&this.core.timerManager.deleteTimer(this.tokenTimer),this.tokenTimer=void 0,Mn.next=4,this._getToken();case 4:Yr=Mn.sent,this.authService&&this.authService.renewToken(Yr);case 6:case"end":return Mn.stop()}},Ur,this)}))},1e3*vr-this.tokenExpireTime)),jr.abrupt("return",ir);case 8:case"end":return jr.stop()}},Lt,this)}))},qe.connectChannel=function(Ne){var Lt,Dt;return hn(this,void 0,void 0,Dr.mark(function Pt(){var ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(this.state!==void 0){Ir.next=3;break}return this.logger.error("QChatMedia::connect::you should init before login"),Ir.abrupt("return");case 3:if(this.state!=="init"){Ir.next=6;break}return Ir.next=6,this.loginByIM();case 6:return this.serverId=Ne.serverId,this.channelId=Ne.channelId,Ir.prev=8,Ir.next=11,(Lt=this.roomService)===null||Lt===void 0?void 0:Lt.joinRoom({roomUuid:Ne.channelId,role:"qchatAudience",userName:this.core.options.account,initialProperties:{}},{});case 11:Ir.next=17;break;case 13:throw Ir.prev=13,Ir.t0=Ir.catch(8),this.logger.error("QChatMedia::connectChannel error",Ir.t0),new Ao("QChatMedia::connectChannel error",Ir.t0);case 17:if(!(ir=(Dt=this.roomService)===null||Dt===void 0?void 0:Dt.getRoomContext(Ne.channelId))){Ir.next=27;break}return this.roomContext=ir,this.rtcController=this.roomContext.rtcController,this.state="connect",Ir.next=24,this.rtcController.joinRtcChannel();case 24:this.core.emit("connectChannel"),Ir.next=28;break;case 27:this.logger.error("QChatMedia::connect room not exited");case 28:case"end":return Ir.stop()}},Pt,this,[[8,13]])}))},qe.updateRTCChannelInfo=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1},limit:{type:"number",allowEmpty:!1}},Ne),Pt.next=3,this.core.sendCmd("qchatUpdateRTCChannelConfig",{RTCChannelConfig:zn(zn({},Ne),{audio:Io(Ne.audio),video:Io(Ne.video)})});case 3:case"end":return Pt.stop()}},Lt,this)}))},qe.getRTCChannelInfo=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetRTCChannelConfig",{qchatGetRTCChannelConfigTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",rM(Dt.content.RTCChannelConfig));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.getRTCChannelOnlineMembers=function(Ne){return hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return jn({serverId:{type:"string",allowEmpty:!1},channelId:{type:"string",allowEmpty:!1}},Ne),ir.next=3,this.core.sendCmd("qchatGetRTCChannelMembers",{qchatGetRTCChannelMembersTag:Ne});case 3:return Dt=ir.sent,ir.abrupt("return",tM(Dt.content.memberList));case 5:case"end":return ir.stop()}},Lt,this)}))},qe.addRTCChannelListener=function(){var Ne,Lt,Dt=this;this._checkConnectState();try{(Ne=this.authService)===null||Ne===void 0||Ne.addAuthListener({onAuthEvent:function(ir){return hn(Dt,void 0,void 0,Dr.mark(function vr(){var Ir;return Dr.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(ir!==1026||this.getTokenState){jr.next=10;break}return this.logger.log("QChatMedia::loginByIM token expire,begin get new token "),this.getTokenState=!0,jr.next=5,this._getToken();case 5:if(Ir=jr.sent,!this.authService){jr.next=9;break}return jr.next=9,this.authService.renewToken(Ir);case 9:this.getTokenState=!1;case 10:case"end":return jr.stop()}},vr,this)}))}})}catch(Pt){throw this.getTokenState=!1,this.logger.error("QChatMedia::loginByIM addAuthListener error",Pt),new Ao("QChatMedia::loginByIM addAuthListener error",Pt)}(Lt=this.roomContext)===null||Lt===void 0||Lt.addRoomListener({onRoomPropertiesChanged:function(ir){var vr,Ir,Or,jr,Ur,Yr;if(Dt.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesChanged",ir),ir.audioOff){var In=(vr=ir.audioOff.value)===null||vr===void 0?void 0:vr.split("_")[0];In!==si.offNotAllowSelfOn&&In!==si.offAllowSelfOn||!((Ir=Dt.roomContext)===null||Ir===void 0)&&Ir.localMember.isAudioOn&&((Or=Dt.rtcController)===null||Or===void 0||Or.muteMyAudio())}else if(ir.videoOff){var Mn=(jr=ir.videoOff.value)===null||jr===void 0?void 0:jr.split("_")[0];Mn!==si.offNotAllowSelfOn&&Mn!==si.offAllowSelfOn||!((Ur=Dt.roomContext)===null||Ur===void 0)&&Ur.localMember.isVideoOn&&((Yr=Dt.rtcController)===null||Yr===void 0||Yr.muteMyVideo())}},onRoomPropertiesDeleted:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onRoomPropertiesDeleted",ir)},onMemberJoinRtcChannel:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberJoinRTCChannel",ir);var vr=Fo(ir).call(ir,function(Ir){return Ir.uuid});Dt.core.emit("memberJoinRTCChannel",vr)},onMemberLeaveRoom:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberLeaveRoom",ir);var vr=Fo(ir).call(ir,function(Ir){return Ir.uuid});Dt.core.emit("memberLeaveRTCChannel",vr)},onRoomEnded:function(ir){Dt.authService&&Dt.authService.logout(),Dt._setStateInit(),Dt.logger.log("QChatMedia::addRTCChannelListener::onRoomEnded",ir),Dt.core.emit("RTCChannelEnded",ir)},onRtcChannelError:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onRtcChannelError",ir),ir==="SOCKET_ERROR"&&Dt.disconnectChannel(),Dt.core.emit("RTCChannelError",ir)},onRtcAudioVolumeIndication:function(ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onRtcAudioVolumeIndication",ir),Dt.core.emit("onRtcAudioVolumeIndication",ir)},onMemberAudioMuteChanged:function(ir,vr,Ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberAudioMuteChanged",ir,vr),Dt.core.emit("memberAudioMuteChanged",{memberAccId:ir.uuid,mute:vr,operateByAccId:Ir.uuid})},onMemberScreenShareStateChanged:function(ir,vr,Ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberScreenShareStateChanged",ir,vr),Dt.core.emit("memberScreenShareStateChanged",{memberAccId:ir.uuid,isSharing:vr,operateByAccId:Ir.uuid})},onMemberVideoMuteChanged:function(ir,vr,Ir){Dt.logger.log("QChatMedia::addRTCChannelListener::onMemberVideoMuteChanged",ir,vr),Dt.core.emit("memberVideoMuteChanged",{memberAccId:ir.uuid,mute:vr,operateByAccId:Ir.uuid})}})},qe.enumCameraDevices=function(){var Ne=this;return this._checkConnectState(),this.rtcController.enumCameraDevices().then(function(Lt){return Lt.data},function(Lt){throw Ne.logger.error("QChatMedia::enumCameraDevices error",Lt),new Ao("QChatMedia::enumCameraDevices error",Lt)})},qe.enumPlayoutDevices=function(){var Ne=this;return this._checkConnectState(),this.rtcController.enumPlayoutDevices().then(function(Lt){return Lt.data},function(Lt){throw Ne.logger.error("QChatMedia::enumPlayoutDevices error",Lt),new Ao("QChatMedia::enumPlayoutDevices error",Lt)})},qe.enumRecordDevices=function(){var Ne=this;return this._checkConnectState(),this.rtcController.enumRecordDevices().then(function(Lt){return Lt.data},function(Lt){throw Ne.logger.error("QChatMedia::enumRecordDevices error",Lt),new Ao("QChatMedia::enumRecordDevices error",Lt)})},qe.removeRTCChannelListener=function(){var Ne,Lt;this._checkConnectState(),(Ne=this.roomContext)===null||Ne===void 0||Ne.removeRoomListener({}),(Lt=this.authService)===null||Lt===void 0||Lt.removeAuthListener({})},qe.setSelectedCameraDevice=function(Ne){var Lt=this;return this._checkConnectState(),jn({deviceId:{type:"string",allowEmpty:!1}},Ne),this.rtcController.setSelectedCameraDevice(Ne.deviceId).then(function(Dt){return Dt.data},function(Dt){throw Lt.logger.error("QChatMedia::setSelectedCameraDevice error",Dt),new Ao("QChatMedia::setSelectedCameraDevice error",Dt)})},qe.setSelectedPlayoutDevice=function(Ne){var Lt=this;return this._checkConnectState(),jn({deviceId:{type:"string",allowEmpty:!1}},Ne),this.rtcController.setSelectedPlayoutDevice(Ne.deviceId).then(function(Dt){return Dt.data},function(Dt){throw Lt.logger.error("QChatMedia::setSelectedPlayoutDevice error",Dt),new Ao("QChatMedia::setSelectedPlayoutDevice error",Dt)})},qe.setSelectedRecordDevice=function(Ne){var Lt=this;return this._checkConnectState(),jn({deviceId:{type:"string",allowEmpty:!1}},Ne),this.rtcController.setSelectedRecordDevice(Ne.deviceId).then(function(Dt){return Dt.data},function(Dt){throw Lt.logger.error("QChatMedia::setSelectedRecordDevice error",Dt),new Ao("QChatMedia::setSelectedRecordDevice error",Dt)})},qe.getRTCMembers=function(){var Ne,Lt;return this._checkConnectState(),Fo(Ne=pi(Lt=this.roomContext.remoteMembers).call(Lt,function(Dt){return Dt.isInRtcChannel})).call(Ne,function(Dt){return{accid:Dt.uuid,isAudioOn:!!Dt.isAudioOn,isVideoOn:!!Dt.isVideoOn,isSharingScreen:!!Dt.isSharingScreen,properties:Dt.properties}})},qe.subscribeRemoteVideoSubStream=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),ir.prev=2,(Lt=this.rtcController)===null||Lt===void 0||Lt.subscribeRemoteVideoSubStream(Ne.accid),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::subscribeRemoteVideoSubStream error",ir.t0),new Ao("QChatMedia::subscribeRemoteVideoSubStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.unsubscribeRemoteVideoSubStream=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:this._checkConnectState(),jn({accid:{type:"string",allowEmpty:!1}},Ne),ir.prev=2,(Lt=this.rtcController)===null||Lt===void 0||Lt.unsubscribeRemoteVideoSubStream(Ne.accid),ir.next=10;break;case 6:throw ir.prev=6,ir.t0=ir.catch(2),this.logger.error("QChatMedia::unsubscribeRemoteVideoSubStream error",ir.t0),new Ao("QChatMedia::unsubscribeRemoteVideoSubStream error",ir.t0);case 10:case"end":return ir.stop()}},Dt,this,[[2,6]])}))},qe.muteAllAudio=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("audioOff",Io({value:si.offNotAllowSelfOn+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::muteAllAudio error",Pt.t0),new Ao("QChatMedia::muteAllAudio error",Pt.t0);case 15:case"end":return Pt.stop()}},Lt,this,[[7,11]])}))},qe.muteAllVideo=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("videoOff",Io({value:si.offNotAllowSelfOn+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::muteAllVideo error",Pt.t0),new Ao("QChatMedia::muteAllVideo error",Pt.t0);case 15:case"end":return Pt.stop()}},Lt,this,[[7,11]])}))},qe.unMuteAllAudio=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneMicrophone"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneMicrophone auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("audioOff",Io({value:si.disable+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::unMuteAllAudio error",Pt.t0),new Ao("QChatMedia::unMuteAllAudio error",Pt.t0);case 15:case"end":return Pt.stop()}},Lt,this,[[7,11]])}))},qe.unMuteAllVideo=function(){var Ne;return hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return this._checkConnectState(),Pt.next=3,this._checkPermission({serverId:this.serverId,channelId:this.channelId,auth:"RTCChannelOpenCloseEveryoneCamera"});case 3:if(Pt.sent){Pt.next=7;break}return this.logger.error("QChatMedia::connect::auth your have not RTCChannelOpenCloseEveryoneCamera auth"),Pt.abrupt("return");case 7:Pt.prev=7,(Ne=this.roomContext)===null||Ne===void 0||Ne.updateRoomProperty("videoOff",Io({value:si.disable+"_"+new Date().getTime()})),Pt.next=15;break;case 11:throw Pt.prev=11,Pt.t0=Pt.catch(7),this.logger.error("QChatMedia::unMuteAllVideo error",Pt.t0),new Ao("QChatMedia::unMuteAllVideo error",Pt.t0);case 15:case"end":return Pt.stop()}},Lt,this,[[7,11]])}))},xe}(td),oM=Mc.findIndex,aM="findIndex",u1=!0;aM in[]&&Array(1).findIndex(function(){u1=!1}),En({target:"Array",proto:!0,forced:u1},{findIndex:function(xe){return oM(this,xe,arguments.length>1?arguments[1]:void 0)}});var sM=ua("Array").findIndex,jv=Array.prototype,iM=function(pe){var xe=pe.findIndex;return pe===jv||sr(jv,pe)&&xe===jv.findIndex?sM:xe},Lp=["error","warn","log","debug"],Cl=function(){},Fp=["off","error","warn","log","debug"],d1=function(){function pe(qe,Oe){this.name=Oe,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=Cl,this.log=Cl,this.warn=Cl,this.error=Cl,this.name=Oe,pe.instancesName.push(Oe),Ci(Fp).call(Fp,qe)||(qe="off"),this.setLogFunc(qe)}var xe=pe.prototype;return xe.setLogFunc=function(Oe){var Ne=this,Lt=iM(Lp).call(Lp,function(Dt){return Dt===Oe});bo(Lp).call(Lp,function(Dt,Pt){Pt<=Lt&&(Ne[Dt]=function(){var ir=Da(Array.prototype).call(arguments),vr=this.formatArgs(ir,Dt);this.strategies[Dt](vr)})})},xe.formatArgs=function(Oe,Ne){var Lt=new Date,Dt=Lt.getMonth()+1+"-"+Lt.getDate()+" "+Lt.getHours()+":"+Lt.getMinutes()+":"+Lt.getSeconds()+":"+Lt.getMilliseconds();return"[NIM "+Ne+" "+this.name+" "+Dt+"] "+Fo(Oe).call(Oe,function(Pt){return Pt instanceof Ao?Pt.name+", "+Pt.code+", "+Pt.message:Pt instanceof Error?Pt&&Pt.message?Pt.message:Pt:typeof Pt=="object"?Io(Pt):Pt}).join(" ")},xe.destroy=function(){this.debug=Cl,this.log=Cl,this.warn=Cl,this.error=Cl},pe}();d1.instancesName=[];var cM=TypeError,lM=Object.getOwnPropertyDescriptor,uM=kt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(pe){return pe instanceof TypeError}}()?function(pe,xe){if(nc(pe)&&!lM(pe,"length").writable)throw cM("Cannot set read only .length");return pe.length=xe}:function(pe,xe){return pe.length=xe},dM=oc("splice"),p1=Math.max,f1=Math.min;En({target:"Array",proto:!0,forced:!dM},{splice:function(xe,qe){var Oe,Ne,Lt,Dt,Pt,ir,vr=Pn(this),Ir=rs(vr),Or=Li(xe,Ir),jr=arguments.length;for(jr===0?Oe=Ne=0:jr===1?(Oe=0,Ne=Ir-Or):(Oe=jr-2,Ne=f1(p1(hc(qe),0),Ir-Or)),gf(Ir+Oe-Ne),Lt=Dg(vr,Ne),Dt=0;Dt<Ne;Dt++)(Pt=Or+Dt)in vr&&tl(Lt,Dt,vr[Pt]);if(Lt.length=Ne,Oe<Ne){for(Dt=Or;Dt<Ir-Ne;Dt++)ir=Dt+Oe,(Pt=Dt+Ne)in vr?vr[ir]=vr[Pt]:Cm(vr,ir);for(Dt=Ir;Dt>Ir-Ne+Oe;Dt--)Cm(vr,Dt-1)}else if(Oe>Ne)for(Dt=Ir-Ne;Dt>Or;Dt--)ir=Dt+Oe-1,(Pt=Dt+Ne-1)in vr?vr[ir]=vr[Pt]:Cm(vr,ir);for(Dt=0;Dt<Oe;Dt++)vr[Dt+Or]=arguments[Dt+2];return uM(vr,Ir-Ne+Oe),Lt}});var pM=ua("Array").splice,Dv=Array.prototype,m1=function(pe){var xe=pe.splice;return pe===Dv||sr(Dv,pe)&&xe===Dv.splice?pM:xe};function Uv(pe,xe){var qe,Oe=zs!==void 0&&Sm(pe)||pe["@@iterator"];if(Oe)return oa(qe=(Oe=Oe.call(pe)).next).call(qe,Oe);if(Ts(pe)||(Oe=function(Dt,Pt){var ir;if(Dt){if(typeof Dt=="string")return g1(Dt,Pt);var vr=Da(ir=Object.prototype.toString.call(Dt)).call(ir,8,-1);if(vr==="Object"&&Dt.constructor&&(vr=Dt.constructor.name),vr==="Map"||vr==="Set")return pl(Dt);if(vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vr))return g1(Dt,Pt)}}(pe))||xe&&pe&&typeof pe.length=="number"){Oe&&(pe=Oe);var Ne=0;return function(){return Ne>=pe.length?{done:!0}:{done:!1,value:pe[Ne++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g1(pe,xe){(xe==null||xe>pe.length)&&(xe=pe.length);for(var qe=0,Oe=new Array(xe);qe<xe;qe++)Oe[qe]=pe[qe];return Oe}var fM=function(){function pe(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var xe=pe.prototype;return xe.addTimer=function(Oe,Ne,Lt){Ne===void 0&&(Ne=0),Lt===void 0&&(Lt=1);var Dt=new Date().getTime(),Pt=this.id;return this.timerList.push({id:Pt,loop:Lt,count:0,timeout:Dt+Ne,interval:Ne,callback:Oe}),this.id++,this.checkTimer(Dt),Pt},xe.checkTimer=function(Oe){if(Oe===void 0&&(Oe=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var Ne,Lt,Dt=0,Pt=Uv(this.timerList);!(Ne=Pt()).done;){var ir=Ne.value;(Dt===0||Dt>ir.timeout)&&(Dt=ir.timeout)}this.timerList.length!==0&&(this.timer===null||Dt<this.timeout||this.timeout<Oe)&&(this.timer=Vi(oa(Lt=this.nowTime).call(Lt,this),Dt-Oe),this.timeout=Dt)}},xe.nowTime=function(){for(var Oe,Ne=new Date().getTime(),Lt=Uv(this.timerList);!(Oe=Lt()).done;){var Dt=Oe.value;Ne>=Dt.timeout&&(Dt.callback(),Dt.count++,Dt.timeout=Ne+Dt.interval)}this.clerTime(),this.checkTimer(Ne)},xe.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},xe.deleteTimer=function(Oe){for(var Ne=this.timerList.length-1;Ne>=0;Ne--){var Lt;this.timerList[Ne].id===Oe&&m1(Lt=this.timerList).call(Lt,Ne,1)}},xe.removeFinished=function(){for(var Oe=this.timerList.length-1;Oe>=0;Oe--){var Ne,Lt=this.timerList[Oe];Lt.loop>=0&&Lt.count>=Lt.loop&&m1(Ne=this.timerList).call(Ne,Oe,1)}},xe.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},pe}(),h1=function(){function pe(qe){this.core=qe}var xe=pe.prototype;return xe.request=function(Oe,Ne,Lt){var Dt=this,Pt=new Date().getTime(),ir=(Lt==null?void 0:Lt.exception_service)||0;return Jo.request(Oe,Ne).catch(function(vr){var Ir,Or,jr=vr;throw Dt.core.reporter.reportTraceStart("exceptions",{user_id:Dt.core.options.account,trace_id:(Or=(Ir=Dt.core.clientSocket)===null||Ir===void 0?void 0:Ir.socket)===null||Or===void 0?void 0:Or.sessionId,start_time:Pt,action:1,exception_service:ir}),Dt.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof jr.code=="number"?jr.code:0,description:jr.message||""+jr.code,operation_type:0,target:Oe,context:Ne?Io(Ne):""},{asyncParams:Jo.net.getNetworkStatus()}),Dt.core.reporter.reportTraceEnd("exceptions",1),vr})},xe.uploadFile=function(Oe){var Ne=this,Lt=new Date().getTime();return Jo.uploadFile(Oe).catch(function(Dt){var Pt,ir,vr=Dt;Ne.core.reporter.reportTraceStart("exceptions",{user_id:Ne.core.options.account,trace_id:(ir=(Pt=Ne.core.clientSocket)===null||Pt===void 0?void 0:Pt.socket)===null||ir===void 0?void 0:ir.sessionId,start_time:Lt,action:1,exception_service:3});var Ir=Jo.platform==="BROWSER"?Oe.chunkUploadHost:Oe.commonUploadHost?Oe.commonUploadHost+"/"+(Oe.nosToken&&Oe.nosToken.bucket):"https://nos.netease.com/nim";throw Ne.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof vr.code=="number"?vr.code:0,description:vr.message||""+vr.code,operation_type:1,target:Ir},{asyncParams:Jo.net.getNetworkStatus()}),Ne.core.reporter.reportTraceEnd("exceptions",1),Dt})},pe}(),v1="imElite_sdk_abtest_web",y1=function(){function pe(xe,qe){this.abtInfo={},this.core=xe,this.config=qe}return pe.prototype.abtRequest=function(){var qe,Oe;return hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt;return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(this.core.options.isAbtestEnable){Pt.next=2;break}return Pt.abrupt("return");case 2:if(!this.abtInfo.experiments){Pt.next=4;break}return Pt.abrupt("return");case 4:if(this.config.abtestUrl){Pt.next=6;break}return Pt.abrupt("return");case 6:return Pt.prev=6,Pt.next=9,this.core.adapters.request(this.config.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.config.abtestProjectKey,appKey:this.core.options.appkey,osType:"Web",sdkVersion:"0.17.2",deviceId:this.core.config.deviceId},useLocalCache:!0}},{exception_service:7});case 9:Lt=Pt.sent,Pt.next=15;break;case 12:Pt.prev=12,Pt.t0=Pt.catch(6),this.core.logger.warn("ABTest request failed");case 15:this.abtInfo=((Oe=(qe=Lt==null?void 0:Lt.data)===null||qe===void 0?void 0:qe.data)===null||Oe===void 0?void 0:Oe.abtInfo)||{};case 16:case"end":return Pt.stop()}},Ne,this,[[6,12]])}))},pe}(),b1=du;function du(pe){pe=pe||{},this.ms=pe.min||100,this.max=pe.max||1e4,this.factor=pe.factor||2,this.jitter=pe.jitter>0&&pe.jitter<=1?pe.jitter:0,this.attempts=0}du.prototype.duration=function(){var pe=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var xe=Math.random(),qe=Math.floor(xe*this.jitter*pe);pe=1&Math.floor(10*xe)?pe+qe:pe-qe}return 0|Math.min(pe,this.max)},du.prototype.reset=function(){this.attempts=0},du.prototype.setMin=function(pe){this.ms=pe},du.prototype.setMax=function(pe){this.max=pe},du.prototype.setJitter=function(pe){this.jitter=pe};var Ha=function(){},mM=qu&&1/Ch(new qu([,-0]))[1]==1/0?function(pe){return new qu(pe)}:Ha,Ml=mM,Bc=function(xe,qe,Oe){var Ne=-1,Lt=cp,Dt=xe.length,Pt=!0,ir=[],vr=ir;if(Oe)Pt=!1,Lt=cm;else if(Dt>=200){var Ir=qe?null:Ml(xe);if(Ir)return Ch(Ir);Pt=!1,Lt=Th,vr=new Wf}else vr=qe?[]:ir;e:for(;++Ne<Dt;){var Or=xe[Ne],jr=qe?qe(Or):Or;if(Or=Oe||Or!==0?Or:0,Pt&&jr==jr){for(var Ur=vr.length;Ur--;)if(vr[Ur]===jr)continue e;qe&&vr.push(jr),ir.push(Or)}else Lt(vr,jr,Oe)||(vr!==ir&&vr.push(jr),ir.push(Or))}return ir},es,Lc=function(xe){return xe&&xe.length?Bc(xe):[]},Vv=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],qv=["transport not supported","client not handshaken","unauthorized"],Hv=["reconnect"],$p=function(pe){function xe(Oe,Ne){var Lt;return(Lt=pe.call(this)||this).url=Ne,Lt.websocket=null,Lt.socketConnectTimer=0,Lt.core=Oe,Lt.url=Ne,Lt.status="disconnected",Lt.logger=Oe.logger,Lt.connect(),Lt}ra(xe,pe);var qe=xe.prototype;return qe.connect=function(){var Ne=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+_s(),{method:"GET",dataType:"text",timeout:this.core.options.xhrConnectTimeout||8e3},{exception_service:6}).then(function(Lt){var Dt=Lt.data.split(":"),Pt=Dt[0],ir=Dt[1];return Ne.sessionId=Pt,Ne.closeTimeout=1e3*ir,Ne._createWebsocket("wss://"+Ne.url+"/socket.io/1/websocket/"+Pt)}).catch(function(Lt){Lt=Lt||{},Ne.logger.error("imsocket::handshake fail. message: ",Lt&&Lt.message," err code: ",Lt&&Lt.code),Lt.code=Lt.code===408?408:415,Ne.status="disconnected",Ne.emit("handshakeFailed",Lt)})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},qe.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"}))}catch(Ne){this.logger.warn("attempt to send encodePacket error",Ne)}try{this.websocket.close()}catch(Ne){this.logger.warn("attempt to close websocket error",Ne)}this.clean()}},qe.clean=function(){this.status="disconnected",this.websocket&&(this.socketUrl=void 0,this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},qe.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect"),clearTimeout(this.socketConnectTimer)},qe._createWebsocket=function(Ne){var Lt,Dt=this;this.socketConnectTimer=Vi(function(){Dt.logger.error("core:: socket connect timeout. url: ",Dt.socketUrl),Dt.emit("handshakeFailed",new Ao("BaseWebsocket::_createWebSocket socket connect timeout. url: "+Dt.socketUrl,{},408))},this.core.options.socketConnectTimeout||8e3),this.socketUrl=Ne,this.websocket=new Jo.WebSocket(Ne),this.websocket.onmessage=oa(Lt=this.onMessage).call(Lt,this),this.websocket.onclose=function(){Dt.logger.log("imsocket:: websocket onclose done"),Dt.clean()},this.websocket.onerror=function(Pt){Dt.logger.error("imsocket:: onerror",Pt),Dt.core.status==="logined"&&Dt.core.clientSocket.ping()}},qe.onMessage=function(Ne){var Lt;this.resetCloseTimer();var Dt=this.decodePacket(Ne.data);if(Dt)switch(Dt.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",Dt.data);break;case"event":Dt.name&&this.emit(Dt.name,Dt.args);break;case"error":Dt.reason==="unauthorized"?this.emit("connect_failed",Dt.reason):this.emit("error",Dt.reason),this.logger.error("core:: socket onmessage type error. url: ",this.socketUrl),clearTimeout(this.socketConnectTimer),this.emit("handshakeFailed",new Ao("BaseWebsocket::onMessage socket error. url: "+this.socketUrl,{},415));break;case"heartbeat":(Lt=this.websocket)===null||Lt===void 0||Lt.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",Dt.type)}},qe.encodePacket=function(Ne){var Lt,Dt,Pt=Ne.type,ir=Ne.id,vr=ir===void 0?"":ir,Ir=Ne.endpoint,Or=Ir===void 0?"":Ir,jr=Ne.ack,Ur=null;if(!Pt)return"";switch(Pt){case"error":Lt=Ne.reason?ta(qv).call(qv,Ne.reason):"",Dt=Ne.advice?ta(Hv).call(Hv,Ne.advice):"",Lt===""&&Dt===""||(Ur=Lt+(Dt!==""?"+"+Dt:""));break;case"message":Ne.data!==""&&(Ur=Ne.data);break;case"event":Lt={name:Ne.name},Lt=Ne.args&&Ne.args.length?{name:Ne.name,args:Ne.args}:{name:Ne.name},Ur=Io(Lt);break;case"json":Ur=Io(Ne.data);break;case"connect":Ne.qs&&(Ur=Ne.qs);break;case"ack":Ur=Ne.ackId+(Ne.args&&Ne.args.length?"+"+Io(Ne.args):"")}var Yr=[ta(Vv).call(Vv,Pt),vr+(jr==="data"?"+":""),Or];return Ur!=null&&Yr.push(Ur),Yr.join(":")},qe.decodePacket=function(Ne){if(Ne)if(Ne.charAt(0)!="�"){var Lt=Ne.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(Lt){var Dt,Pt=Lt[1],ir=Lt[2],vr=Lt[3],Ir=Lt[4],Or=Lt[5],jr={type:Vv[+Pt],endpoint:Ir};switch(ir&&(jr.id=ir,jr.ack=!vr||"data"),jr.type){case"error":Dt=Or.split("+"),jr.reason=qv[+Dt[0]]||"";break;case"message":jr.data=Or||"";break;case"connect":jr.qs=Or||"";break;case"event":try{var Ur=JSON.parse(Or);jr.name=Ur.name,jr.args=Ur.args}catch(Yr){this.logger.error("imsocket::parseData::type::event error",Yr)}jr.args=jr.args||[];break;case"json":try{jr.data=JSON.parse(Or)}catch(Yr){this.logger.error("imsocket::parseData::type::json error",Yr)}break;case"ack":if((Dt=Or.match(/^([0-9]+)(\+)?(.*)/))&&(jr.ackId=Dt[1],jr.args=[],Dt[3]))try{jr.args=Dt[3]?JSON.parse(Dt[3]):[]}catch(Yr){this.logger.error("imsocket::parseData::type::ack error",Yr)}}return jr}}else this.logger.error("imsocket::unrecognize dataStr",Da(Ne).call(Ne,0,20))},qe.send=function(Ne){var Lt,Dt={data:Ne,type:"message",endpoint:""};(Lt=this.websocket)===null||Lt===void 0||Lt.send(this.encodePacket(Dt))},qe.resetCloseTimer=function(){var Ne=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=Vi(function(){Ne.close()},this.closeTimeout))},xe}(qg);(function(pe){pe[pe.ACTIVE=1]="ACTIVE",pe[pe.KICKED=2]="KICKED",pe[pe.OFFLINE=3]="OFFLINE"})(es||(es={}));var gM=function(){function pe(qe){this.linkUrls=[],this.isAutoReconnect=!1,this.packetTimeout=3e4,this.packetSer=1,this.retryCount=0,this.reconnectTimer=0,this.backoff=new b1({max:8e3,min:1600,jitter:.01}),this.sendingCmdMap=new Xu,this.pingTimer=0,this.hasNetworkListener=!1,this.core=qe,this.logger=qe.logger,this.reporter=qe.reporter,this.timerManager=qe.timerManager}var xe=pe.prototype;return xe.connect=function(Oe,Ne){return Oe===void 0&&(Oe={}),hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt,ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(jn({linkUrls:{type:"array",itemType:"string",required:!1}},Oe),/^(unconnected|waitReconnect)$/.test(this.core.status)){Ur.next=5;break}return Dt="Core socket status is "+this.core.status+", and would not connect",this.logger.warn(Dt),Ur.abrupt("return",ca.reject(Dt));case 5:this.core.status="connecting",Oe.linkUrls&&Oe.linkUrls.length>0&&(this.linkUrls=Hs(Pt=Oe.linkUrls).call(Pt,this.linkUrls),this.linkUrls=Lc(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push("weblink.netease.im:443"),ir=0;case 9:if(!(ir<this.linkUrls.length)){Ur.next=31;break}return vr=this.linkUrls[ir],Ir=new Date().getTime(),Ur.prev=12,Ur.next=15,this.doConnect(vr);case 15:return this.core.status="connected",this.logger.log("core:: connect success with url: "+vr),Ur.abrupt("return",vr);case 20:Ur.prev=20,Ur.t0=Ur.catch(12),Or=Ur.t0,Ne&&Ne(Or,vr),this.reporter.reportTraceStart("exceptions",{user_id:this.core.options.account,start_time:Ir,action:0,exception_service:6}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Or.code=="number"?Or.code:0,description:Or.message||""+Or.code,operation_type:0,target:vr},{asyncParams:Jo.net.getNetworkStatus()}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+vr,Ur.t0);case 28:ir++,Ur.next=9;break;case 31:throw this.retryCount===0?this.doDisconnect(es.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(es.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket xhr or socket connect failed");case 33:case"end":return Ur.stop()}},Lt,this,[[12,20]])}))},xe.doConnect=function(Oe){var Ne=this,Lt=!1;return new ca(function(Dt,Pt){var ir;Ne.socket=new $p(Ne.core,Oe),Ne.socket.on("connect",function(){Ne.logger.log("socket on connect",Oe),Lt=!0,Dt()}),Ne.socket.on("message",oa(ir=Ne.onMessage).call(ir,Ne)),Ne.socket.on("disconnect",function(vr){Ne.logger.log("core:: socket on disconnect",vr),Lt=!0,Ne.doDisconnect(es.OFFLINE,"SocketOnDisconnect")}),Ne.socket.on("handshakeFailed",function(vr){Lt?Ne.ping():(Ne.logger.error("core:: handshake failed. ",vr&&vr.message),Ne.cleanSocket()),Lt=!0,Pt(vr)})})},xe.cleanSocket=function(){this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0)},xe.beforeConnect=function(){this.reconnectTimer&&clearTimeout(this.reconnectTimer)},xe.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},xe.doDisconnect=function(Oe,Ne){if(this.logger.log("doDisconnect: type "+Oe+", description "+Ne),this.core.status!=="unconnected"){var Lt={1:"close",2:"kicked",3:"broken"}[Oe]||"";this.markAllCmdInvaild(new Ao("Packet timeout due to instance disconnect",{disconnect_reason:Lt},415)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.cleanSocket();var Dt=!this.core.options.needReconnect||this.retryCount>=this.core.options.reconnectionAttempts;if(Oe===es.ACTIVE||Dt)this.logger.log("doDisconnect: emit disconnect, type "+Oe,Dt),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"),this.destroyOnlineListener();else if(Oe===es.KICKED){this.logger.log("doDisconnect: kicked"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var Pt=typeof Ne=="string"?{reason:"unknow",message:Ne}:Ne;this.core.eventBus.emit("kicked",Pt),this.core.emit("kicked",Pt),this.destroyOnlineListener()}else Oe===es.OFFLINE&&this.core.auth.isManualLoginAttempt?(this.logger.log("doDisconnect: offline in manual login phase. no reconnect"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.destroyOnlineListener()):Oe===es.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},xe.attempToReconnect=function(){var Oe=this;if(this.core.status!=="waitReconnect"){this.retryCount===0&&(this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"));var Ne=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+Ne),this.core.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:Ne}),this.core.emit("willReconnect",{retryCount:this.retryCount,duration:Ne}),this.core.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=Vi(function(){return hn(Oe,void 0,void 0,Dr.mark(function Lt(){var Dt=this;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(this.core.status==="waitReconnect"){ir.next=3;break}return this.logger.warn("doDisconnect: reconnectTimer status is "+this.core.status+", would not go on reconnecting"),ir.abrupt("return");case 3:return ir.next=5,Jo.net.getNetworkStatus();case 5:ir.sent.net_connect===!1?(this.logger.log("doDisconnect: skip this reconnection attempt because network is offline"),this.core.status="connecting",this.retryCount>=this.core.options.reconnectionAttempts?this.doDisconnect(es.OFFLINE,"MaxReconnectionAttemptExceed"):this.attempToReconnect()):this.core.auth.login({isAutoReconnect:!0}).catch(function(){Dt.logger.error("core::attempToReconnect failed "+Dt.retryCount)});case 7:case"end":return ir.stop()}},Lt,this)}))},Ne)}else this.logger.warn("doDisconnect: already is waiting reconnect")},xe.sendCmd=function(Oe,Ne,Lt){var Dt=this;if(this.core.status!=="logined"&&Oe!=="login"&&Oe!=="chatroomLogin"&&Oe!=="qchatLogin")return this.logger.warn("instance status is "+this.core.status+", so can not sendCmd "+Oe),ca.reject({cmd:Oe,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return ca.reject("No_socket");var Pt=Oe!=="heartbeat",ir=Pt?this.packetSer++:0,vr=function(Dn,Wn,Jn,Fn){var go=ym[Dn];if(!go)return Jn.error("createCmd:: can not find cmd config: ",Dn),null;var Bo,Do={SER:Wn,SID:go.sid,CID:go.cid,Q:[]};return go.params&&Fn&&bo(Bo=go.params).call(Bo,function(Bn){var zr=Fn[Bn.name];if(!x0(zr)){var eo=Bn.type,to=Bn.reflectMapper;switch(Bn.type){case"PropertyArray":eo="ArrayMable",zr=Fo(zr).call(zr,function(Hn){return{t:"Property",v:to?I0(Hn,to):Hn}});break;case"Property":zr=to?I0(zr,to):zr;break;case"Bool":case"bool":zr=zr?"true":"false"}Do.Q.push({t:eo,v:zr})}}),{packet:Do,hasPacketResponse:typeof go.hasPacketResponse!="boolean"||go.hasPacketResponse,hasPacketTimer:typeof go.hasPacketTimer!="boolean"||go.hasPacketTimer}}(Oe,ir,this.logger,Ne);if(!vr){var Ir="SendCmd "+ir+" "+Oe+" error";return this.logger.error(Ir),ca.reject(Ir)}var Or=vr.packet,jr=vr.hasPacketResponse,Ur=vr.hasPacketTimer,Yr=Io(Or);Pt&&(this.core.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",Oe,"ser:"+ir,Yr):this.logger.log("core::sendCmd",Oe,"ser:"+ir));var In=new Date().getTime();return new ca(function(Mn,Dn){jr&&Dt.sendingCmdMap.set(ir,{cmd:Oe,params:Ne,callback:[Mn,Dn],timer:Ur?Vi(function(){var Jn=new ll(408,Oe,"Packet Timeout",new Date().getTime(),{message:"ser "+ir+" cmd "+Oe+" timeout"});Jn.callFunc="sendCmd",Dt.markCmdInvalid(ir,Jn,Oe)},Lt&&Lt.timeout?Lt.timeout:Dt.core.config.timeout):null});try{Dt.socket.send(Yr),jr||Mn(Or)}catch(Jn){var Wn=new ll(415,Oe,Jn&&Jn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Jn});Wn.callFunc="sendCmd",Dt.markCmdInvalid(ir,Wn,Oe),Dn(Jn)}}).catch(function(Mn){var Dn,Wn=[408,415];if(!Ci(Wn).call(Wn,Mn.code))return ca.reject(Mn);Dt.reporter.reportTraceStart("exceptions",{user_id:Dt.core.options.account,trace_id:(Dn=Dt.socket)===null||Dn===void 0?void 0:Dn.sessionId,start_time:In,action:2,exception_service:6});var Jn=us(Mn,"data.disconnect_reason")||"",Fn=Mn.code===408?"Send failed due to timeout":"Send failed. Reason unknown";return Fn=Mn.code===415?Io({disconnect_reason:Jn}):Fn,Dt.reporter.reportTraceUpdateV2("exceptions",{code:Mn.code||415,description:Fn,operation_type:1,target:Or.SID+"-"+Or.CID,context:""+Or.SER},{asyncParams:Jo.net.getNetworkStatus()}),Dt.reporter.reportTraceEnd("exceptions",1),ca.reject(Mn)})},xe.onMessage=function(Oe){var Ne=pv(Oe,this.logger);if(Ne){var Lt=Ne.raw.ser;Ne.error&&this.logger.error("core:onMessage packet error",Ne.raw.sid+"_"+Ne.raw.cid+", ser:"+Lt+",",Ne.error),Ne.notFound?this.logger.warn("core::onMessage packet not found",Ne.raw.sid+"_"+Ne.raw.cid+", ser:"+Lt):(Ne.cmd!=="heartbeat"&&(this.core.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+Lt,Ne.cmd,Ne.content):this.logger.log("imsocket::recvCmd ser:"+Lt,Ne.cmd)),Ne.__receiveTime=_s(),this.packetHandler(Ne))}},xe.packetHandler=function(Oe){var Ne,Lt;if(Oe){var Dt=Oe.raw.ser,Pt=this.sendingCmdMap.get(Dt);if(Pt&&Pt.cmd===Oe.cmd){var ir=Pt.callback,vr=Pt.timer,Ir=Pt.params;if(clearTimeout(vr),Oe.params=Ir,this.sendingCmdMap.delete(Dt),Oe.cmd==="heartbeat")return void ir[0]();var Or=(Ne=this.core[Oe.service])===null||Ne===void 0?void 0:Ne.process(Oe);Or&&typeof Or.then=="function"?Or.then(function(jr){ir[0](jr)}).catch(function(jr){ir[1](jr)}):(this.logger.log("imsocket:: handlerFn without promise",Oe.service,Oe.cmd),ir[0]())}else(Lt=this.core[Oe.service])===null||Lt===void 0||Lt.process(Oe)}},xe.markCmdInvalid=function(Oe,Ne,Lt){var Dt=this.sendingCmdMap.get(Oe);if(Dt){var Pt=Dt.callback,ir=Dt.timer;ir&&clearTimeout(ir),this.sendingCmdMap.delete(Oe),this.logger.warn("packet "+Oe+", "+Lt+" is invalid:",Ne),Pt[1](Ne)}},xe.markAllCmdInvaild=function(Oe){var Ne,Lt=this;this.logger.log("markAllCmdInvaild",Oe),bo(Ne=this.sendingCmdMap).call(Ne,function(Dt){var Pt=Dt.callback,ir=Dt.timer,vr=Dt.cmd;Lt.logger.debug('markAllCmdInvaild:: cmd "'+vr+'"'),ir&&clearTimeout(ir),Pt[1](Oe)}),this.sendingCmdMap.clear()},xe.ping=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){var Ne=this;return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return clearTimeout(this.pingTimer),Dt.prev=1,Dt.next=4,this.sendCmd("heartbeat");case 4:Dt.next=14;break;case 6:return Dt.prev=6,Dt.t0=Dt.catch(1),Dt.next=10,this.testHeartBeat5Timeout();case 10:if(!Dt.sent){Dt.next=14;break}return this.doDisconnect(es.OFFLINE,"PingError"),Dt.abrupt("return");case 14:this.pingTimer=Vi(function(){Ne.ping()},3e4);case 15:case"end":return Dt.stop()}},Oe,this,[[1,6]])}))},xe.testHeartBeat5Timeout=function(){return hn(this,void 0,void 0,Dr.mark(function Oe(){var Ne;return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:clearTimeout(this.pingTimer),Ne=0;case 2:if(!(Ne<5)){Dt.next=15;break}return Dt.prev=3,Dt.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return Dt.abrupt("return",!1);case 9:Dt.prev=9,Dt.t0=Dt.catch(3),this.logger.debug("core:: test heartbeat "+Ne+" Timeout");case 12:Ne++,Dt.next=2;break;case 15:return Dt.abrupt("return",!0);case 16:case"end":return Dt.stop()}},Oe,this,[[3,9]])}))},xe.initOnlineListener=function(){var Oe=this;this.hasNetworkListener||(this.logger.log("core::onlineListener:init"),this.hasNetworkListener=!0,Jo.net.onNetworkStatusChange(function(Ne){Oe.logger.log("core::onlineListener:network change",Ne),Ne.isConnected&&Oe.core.status==="logined"?Oe.ping():Ne.isConnected&&Oe.core.status==="waitReconnect"?(Oe.reconnectTimer&&clearTimeout(Oe.reconnectTimer),Oe.core.auth.login({isAutoReconnect:!0}).catch(function(){Oe.logger.error("core::attempToReconnect failed "+Oe.retryCount)})):Ne.isConnected||Oe.doDisconnect(es.OFFLINE,"OfflineListener")}))},xe.destroyOnlineListener=function(){this.logger.log("core::onlineListener:destroy"),Jo.net.offNetworkStatusChange(),this.hasNetworkListener=!1},xe.disconnect=function(){switch(this.core.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(es.ACTIVE,"UserActiveDisconnect"),ca.resolve();case"unconnected":case"destroyed":return ca.resolve()}},pe}(),hM={"1_2":"heartbeat","24_2":"qchatLogin","24_4":"qchatExit","24_5":"qchatBeKicked","24_8":"qchatMultiSpotLogin","24_9":"qchatKick","24_19":"qchatSync"},jp={qchatLoginTag:{appkey:1,account:2,authType:3,token:4,loginExt:5,clientType:6,clientSession:7,deviceId:8,sdkVersion:9,sdkType:10,userAgent:11,customTag:12,customClientType:13,sdkHumanVersion:14,pushTokenName:20,pushToken:21,pushkitTokenName:22,pushkitToken:23,deviceInfo:24,customPushContentType:25,os:30,mac:31,bundleId:32,simCarrierCode:33,simCountryCode:34,networkCode:35,browser:36,deviceModel:37,androidid:38,imei:39,idfv:40,openuuid:41,pushType:100,hasTokenPreviously:101,consid:102,clientIP:103,clientPort:104,loginTime:105}},pu=Ki(jp),vM={heartbeat:{sid:1,cid:2,service:"qchatAuth"},qchatLogin:{sid:24,cid:2,service:"qchatAuth",params:[{type:"Property",name:"qchatLoginReqTag",reflectMapper:jp.qchatLoginTag}],response:[{type:"Property",name:"qchatLoginResTag",reflectMapper:pu.qchatLoginTag},{type:"PropertyArray",name:"qchatMultiLoginResult",reflectMapper:pu.qchatLoginTag}]},qchatExit:{sid:24,cid:4,service:"qchatAuth"},qchatBeKicked:{sid:24,cid:5,service:"qchatAuth",response:[{type:"Property",name:"beKickedTag",reflectMapper:{1:"clientType",2:"reason",3:"ext",4:"customClientType"}}]},qchatMultiSpotLogin:{sid:24,cid:8,service:"qchatAuth",response:[{type:"Number",name:"state"},{type:"Property",name:"qchatLoginResTag",reflectMapper:pu.qchatLoginTag}]},qchatKick:{sid:24,cid:9,service:"qchatAuth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]},qchatSync:{sid:24,cid:19,service:"qchatAuth",hasPacketTimer:!1,params:[{type:"Property",name:"qchatSyncTag",reflectMapper:{systemNotification:1,pushConfig:2}}],response:[{type:"Number",name:"timetag"}]}};function zv(pe,xe){xe===void 0&&(xe=1);var qe=qa({clientPort:{type:"number"},clientType:{type:"enum",values:Rc},customClientType:{type:"number"},loginTime:{type:"number"},hasTokenPreviously:{type:"boolean"},pushType:{type:"number"}},pe);return zn(zn({},qe),{account:qe.account,connectionId:qe.connectionId,deviceId:qe.deviceId,ip:qe.ip,mac:qe.ip,os:qe.os,clientType:qe.clientType,time:qe.time,online:xe!==2})}var Wv={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},yM={BROWSER:0,RN:2,UNIAPP:3,WECHAT:6},bM=function(){function pe(xe){this.core=xe}return pe.prototype.verifyAuthentication=function(qe){var Oe;return qe===void 0&&(qe=!1),hn(this,void 0,void 0,Dr.mark(function Ne(){var Lt,Dt,Pt,ir,vr,Ir,Or;return Dr.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Lt=this.core.options,Dt=Jo.getSystemInfo(),Pt=zn(zn({},Lt),{appLogin:qe?0:1,clientType:16,clientSession:(Oe=this.core.clientSocket.socket)===null||Oe===void 0?void 0:Oe.sessionId,deviceId:this.core.config.deviceId,sdkVersion:91402,sdkType:yM[Jo.platform]||0,userAgent:"Native/0.17.2",sdkHumanVersion:"0.17.2",os:Dt.os,browser:Dt.browser}),Ur.next=5,this.core.sendCmd("qchatLogin",{qchatLoginReqTag:Pt});case 5:if(!(ir=Ur.sent).error){Ur.next=8;break}throw ir.error;case 8:return vr=ir.content,Ir=vr.qchatLoginResTag,Or=vr.qchatMultiLoginResult,Ir.isAutoReconnect=qe,Ur.abrupt("return",{loginResult:zv(Ir),multiLoginResults:Fo(Or).call(Or,function(Yr){return zv(Yr)})});case 11:case"end":return Ur.stop()}},Ne,this)}))},pe}(),Gv=function(pe){function xe(Oe){var Ne;return(Ne=pe.call(this,"qchatAuth",Oe)||this).account="",Ne.token="",Ne.deviceId="",Ne.isManualLoginAttempt=!1,ou({cmdMap:hM,cmdConfig:vM}),Ne.authenticatorService=new bM(Oe),Ne}ra(xe,pe);var qe=xe.prototype;return qe.login=function(Ne){return Ne===void 0&&(Ne={}),hn(this,void 0,void 0,Dr.mark(function Lt(){return Dr.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Ne.isAutoReconnect||(this.isManualLoginAttempt=!0),Pt.next=3,this._connect(Ne);case 3:return this.core.abtest.abtRequest(),Pt.prev=4,Pt.next=7,this.doLogin(Ne.isAutoReconnect);case 7:this.isManualLoginAttempt=!1,Pt.next=14;break;case 10:throw Pt.prev=10,Pt.t0=Pt.catch(4),this.isManualLoginAttempt=!1,Pt.t0;case 14:case"end":return Pt.stop()}},Lt,this,[[4,10]])}))},qe._connect=function(Ne){return Ne===void 0&&(Ne={}),hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt,Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.core.status)){vr.next=4;break}return Dt="Instance status is "+this.core.status+", and would not connect",this.logger.warn(Dt),vr.abrupt("return",ca.reject(Dt));case 4:return this.core.clientSocket.beforeConnect(),Pt=Ne.isAutoReconnect||!1,vr.next=8,this.core.clientSocket.connect({linkUrls:this.core.options.linkAddresses,isAutoReconnect:Pt});case 8:case"end":return vr.stop()}},Lt,this)}))},qe.doLogin=function(Ne){return Ne===void 0&&(Ne=!1),hn(this,void 0,void 0,Dr.mark(function Lt(){var Dt;return Dr.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.prev=0,ir.next=3,this.authenticatorService.verifyAuthentication(Ne);case 3:Dt=ir.sent,this.core.status="logined",ir.next=14;break;case 7:if(ir.prev=7,ir.t0=ir.catch(0),this.core.logger.warn("doLogin:: login failed",ir.t0),this.core.clientSocket.doDisconnect(es.OFFLINE,this.isManualLoginAttempt?"FailedToInitializeLogin":"ReconnectLoginFailed"),!this.isManualLoginAttempt){ir.next=13;break}throw ir.t0;case 13:return ir.abrupt("return");case 14:return ir.prev=14,ir.next=17,this.core.cloudStorage.init();case 17:ir.next=22;break;case 19:ir.prev=19,ir.t1=ir.catch(14),this.core.logger.error("doLogin:: cloudStorage init failed ",ir.t1);case 22:return this.core.eventBus.emit("logined",Dt.loginResult),this.core.emit("logined",Dt.loginResult),Dt.multiLoginResults&&Dt.multiLoginResults.length>0&&this.core.emit("multiSpotLogin",Dt.multiLoginResults),this.core.logger.log("login done"),this.core.clientSocket.resetConnectStatus(),ir.next=29,this.sync();case 29:this.core.clientSocket.ping();case 30:case"end":return ir.stop()}},Lt,this,[[0,7],[14,19]])}))},qe.sync=function(){return hn(this,void 0,void 0,Dr.mark(function Ne(){return Dr.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,this.core.sendCmd("qchatSync",{qchatSyncTag:{systemNotification:this.syncTimeTag||0}});case 2:case"end":return Dt.stop()}},Ne,this)}))},qe.kick=function(Ne){var Lt;return hn(this,void 0,void 0,Dr.mark(function Dt(){var Pt;return Dr.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.next=2,this.core.sendCmd("qchatKick",Ne);case 2:return Pt=vr.sent,vr.abrupt("return",(Lt=Pt.content)===null||Lt===void 0?void 0:Lt.deviceIds);case 4:case"end":return vr.stop()}},Dt,this)}))},qe.qchatSyncHandler=function(Ne){var Lt,Dt;this.logger.log("sync: emit syncdone",(Lt=Ne.content)===null||Lt===void 0?void 0:Lt.timetag),this.core.emit("syncdone"),this.syncTimeTag=((Dt=Ne.content)===null||Dt===void 0?void 0:Dt.timetag)||0},qe.qchatMultiSpotLoginHandler=function(Ne){if(Ne.error)this.logger.error("qchatMultiPortLoginHandler:: error, ",Ne.error);else{var Lt=Ne.content,Dt=zv(Lt.qchatLoginResTag,Lt.state);this.core.emit("multiSpotLogin",[Dt])}},qe.qchatBeKickedHandler=function(Ne){if(Ne.error)this.logger.error("qchatBeKickedHandler error, ",Ne.error);else{var Lt=function(Pt){var ir=qa({clientType:{type:"enum",values:Rc},customClientType:{type:"number"}},Pt),vr=Wv[ir.reason];return zn(ir,vr=vr||{reason:"unknow",message:"Unknown reason"})}(Ne.content.beKickedTag);this.logger.warn("bekicked::",Lt),this.core.clientSocket.doDisconnect(es.KICKED,Lt)}},xe}(td),Fm={debugLevel:"off",needReconnect:!0,reconnectionAttempts:9007199254740991,isAbtestEnable:!0,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",abtestProjectKey:v1},$m=function(pe){function xe(Oe,Ne){var Lt,Dt,Pt,ir;Ne===void 0&&(Ne={cloudStorageConfig:{}}),(Lt=pe.call(this)||this).instanceName="QChat",Lt.status="unconnected",Lt.account="",Lt.eventBus=new qg,Lt.options={},Lt.qchatServer={},Lt.qchatChannel={},Lt.qchatMsg={},Lt.qchatRole={},Lt.qchatMedia={},Lt.cloudStorage={},Lt.logger=new d1(Oe.debugLevel,Oe.account),Lt.setInitOptions(Oe),Lt.otherOptions=Ne,Lt.timerManager=new fM,Lt.adapters=new h1(k(Lt)),Lt.abtest=new y1(k(Lt),{isAbtestEnable:Lt.options.isAbtestEnable,abtestUrl:Lt.options.abtestUrl,abtestProjectKey:v1});var vr=Jo.localStorage.getItem("__NIM_DEVC_ID__");Lt.options.isFixedDeviceId?(vr=Jo.localStorage.getItem("__NIM_DEVC_ID__")||Tv(),Jo.localStorage.setItem("__NIM_DEVC_ID__",vr)):vr=Tv(),Lt.config={timeout:8e3,deviceId:vr};var Ir=Jo.getSystemInfo(),Or=(Dt=Ne==null?void 0:Ne.reportConfig)===null||Dt===void 0?void 0:Dt.isDataReportEnable;return typeof Or!="boolean"&&(Or=!0),Lt.reporter=new cb({reportConfigUrl:((Pt=Ne==null?void 0:Ne.reportConfig)===null||Pt===void 0?void 0:Pt.reportConfigUrl)||"https://statistic.live.126.net/dispatcher/req",reportUrl:((ir=Ne==null?void 0:Ne.reportConfig)===null||ir===void 0?void 0:ir.reportUrl)||"https://statistic.live.126.net/statics/report/common/form",isDataReportEnable:Or,common:{app_key:Oe.appkey,dev_id:"",platform:"Web",sdk_ver:"0.17.2",env:"online",os_name:Ir.os,os_ver:Ir.osVer,model:Ir.hostEnvVer,manufactor:Ir.hostEnv,host_env:Ir.hostEnv,host_env_ver:Ir.hostEnvVer},request:Jo.request,logger:Lt.logger,autoStart:!0}),Jo.setLogger(Lt.logger),Lt.qchatAuth=new Gv(k(Lt)),Lt.auth=Lt.qchatAuth,Lt.clientSocket=new gM(k(Lt)),Lt.qchatServer=new bl(k(Lt)),Lt.qchatChannel=new UC(k(Lt)),Lt.qchatMsg=new Bm(k(Lt)),Lt.qchatRole=new e1(k(Lt)),Lt.qchatMedia=new l1(k(Lt)),Lt.cloudStorage=new bm(k(Lt),zn({storageKeyPrefix:Lt.instanceName},Ne.cloudStorageConfig)),Ne&&Lt.setOtherOptions(Ne),xe.instance=k(Lt),Lt.logger.log("QChat init, version ","0.17.2"," sdk version ",91402," appkey ",Oe.appkey),Lt}ra(xe,pe),xe.getInstance=function(Ne,Lt){if(!xe.instance){if(Ne)return new xe(Ne,Lt);throw new Error("Instance not exist, please input options")}if(Ne){if(xe.instance.options.account===Ne.account&&xe.instance.options.appkey===Ne.appkey)return xe.instance.setOptions(Ne),Lt&&xe.instance.setOtherOptions(Lt),xe.instance;throw new Error("Unexpected login")}return xe.instance};var qe=xe.prototype;return qe.connect=function(Ne){return Ne===void 0&&(Ne={}),this.auth.login(Ne)},qe.login=function(Ne){return Ne===void 0&&(Ne={}),this.auth.login(Ne)},qe.setInitOptions=function(Ne){jn({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},linkAddresses:{type:"array",itemType:"string",min:1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:Fp,required:!1}},Ne),this.logger.log("QChat::setInitOptions options is",Ne),this.account=Ne.account,this.options=zn(zn({},Fm),Ne)},qe.setOptions=function(Ne){if(typeof Ne=="object"&&Ne!==null&&(Object.prototype.hasOwnProperty.call(Ne,"account")&&Ne.account!==this.options.account||Object.prototype.hasOwnProperty.call(Ne,"appkey")&&Ne.appkey!==this.options.appkey))throw new Error("QChat::setOptions account and appkey is not allowed to reset");jn({token:{type:"string",required:!1},linkAddresses:{type:"array",itemType:"string",min:1,required:!1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},debugLevel:{type:"enum",values:Fp,required:!1}},Ne),this.logger.log("QChat::setOptions options is",Ne),this.options=zn(zn({},this.options),Ne)},qe.setOtherOptions=function(Ne){var Lt;!((Lt=Ne==null?void 0:Ne.QChatMedia)===null||Lt===void 0)&&Lt.neroom&&this.qchatMedia.setNeroom(Ne.QChatMedia.neroom)},qe.disconnect=function(){var Ne=this;switch(this.status){case"logined":return this.sendCmd("qchatExit",void 0,{timeout:1e3}).then(function(){Ne.clientSocket.doDisconnect(es.ACTIVE,"UserActiveDisconnect")}).catch(function(Lt){Ne.logger.error("Instance::disconnect sendCmd:logout error",Lt),Ne.clientSocket.doDisconnect(es.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return this.clientSocket.doDisconnect(es.ACTIVE,"UserActiveDisconnect"),ca.resolve();case"unconnected":case"destroyed":return ca.resolve()}},qe.logout=function(){return this.disconnect()},qe.destroy=function(){var Ne=this;return xe.instance=null,this.disconnect().then(function(){Ne.status="destroyed",Ne.removeAllListeners(),Ne.eventBus.removeAllListeners(),Ne.logger.destroy(),Ne.reporter.destroy(),Ne.timerManager.destroy(),Ne.connect=yp,Ne.disconnect=yp,Ne.destroy=yp})},qe.kickOtherClients=function(Ne){return jn({deviceIds:{type:"array",itemType:"string"}},Ne),this.auth.kick(Ne)},qe.sendCmd=function(Ne,Lt,Dt){return this.clientSocket.sendCmd(Ne,Lt,Dt)},qe.emit=function(Ne){var Lt=this;try{for(var Dt,Pt,ir=_s(),vr=arguments.length,Ir=new Array(vr>1?vr-1:0),Or=1;Or<vr;Or++)Ir[Or-1]=arguments[Or];var jr=(Dt=pe.prototype.emit).call.apply(Dt,Hs(Pt=[this,Ne]).call(Pt,Ir)),Ur=_s()-ir;return Ur>=10&&this.logger.warn("Core::emit event: "+Ne+" process takes: "+Ur+"ms"),jr}catch(Yr){return this.logger.error("Core::emit event: "+Ne+". Error: "+Yr),Vi(function(){throw Lt.logger.error("Core::emit throw error in setTimeout. event: "+Ne+". Error: "+Yr),Yr},0),!1}},xe}(qg);$m.instance=null,$m.setAdapters=function(xe){cC(Jo,xe)};var SM=Math.min,Kv=[].lastIndexOf,S1=!!Kv&&1/[1].lastIndexOf(1,-0)<0,Qv=Ul("lastIndexOf"),T1=S1||!Qv?function(xe){if(S1)return ue(Kv,this,arguments)||0;var qe=wr(this),Oe=rs(qe),Ne=Oe-1;for(arguments.length>1&&(Ne=SM(Ne,hc(arguments[1]))),Ne<0&&(Ne=Oe+Ne);Ne>=0;Ne--)if(Ne in qe&&qe[Ne]===xe)return Ne||0;return-1}:Kv;En({target:"Array",proto:!0,forced:T1!==[].lastIndexOf},{lastIndexOf:T1});var fu=ua("Array").lastIndexOf,mu=Array.prototype,C1=function(pe){var xe=pe.lastIndexOf;return pe===mu||sr(mu,pe)&&xe===mu.lastIndexOf?fu:xe},ud=g(function(pe,xe){(function(){var qe={function:!0,object:!0}[typeof window]&&window||this,Oe=xe,Ne=pe&&!pe.nodeType&&pe,Lt=Oe&&Ne&&typeof e=="object"&&e;!Lt||Lt.global!==Lt&&Lt.window!==Lt&&Lt.self!==Lt||(qe=Lt);var Dt=Math.pow(2,53)-1,Pt=/\bOpera/,ir=Object.prototype,vr=ir.hasOwnProperty,Ir=ir.toString;function Or(Jn){return(Jn=String(Jn)).charAt(0).toUpperCase()+Jn.slice(1)}function jr(Jn){return Jn=Dn(Jn),/^(?:webOS|i(?:OS|P))/.test(Jn)?Jn:Or(Jn)}function Ur(Jn,Fn){for(var go in Jn)vr.call(Jn,go)&&Fn(Jn[go],go,Jn)}function Yr(Jn){return Jn==null?Or(Jn):Ir.call(Jn).slice(8,-1)}function In(Jn){return String(Jn).replace(/([ -])(?!$)/g,"$1?")}function Mn(Jn,Fn){var go=null;return function(Do,Bn){var zr=-1,eo=Do?Do.length:0;if(typeof eo=="number"&&eo>-1&&eo<=Dt)for(;++zr<eo;)Bn(Do[zr],zr,Do);else Ur(Do,Bn)}(Jn,function(Bo,Do){go=Fn(go,Bo,Do,Jn)}),go}function Dn(Jn){return String(Jn).replace(/^ +| +$/g,"")}var Wn=function Jn(Fn){var go=qe,Bo=Fn&&typeof Fn=="object"&&Yr(Fn)!="String";Bo&&(go=Fn,Fn=null);var Do=go.navigator||{},Bn=Do.userAgent||"";Fn||(Fn=Bn);var zr,eo,to=Bo?!!Do.likeChrome:/\bChrome\b/.test(Fn)&&!/internal|\n/i.test(Ir.toString()),Hn="Object",On=Bo?Hn:"ScriptBridgingProxyObject",oo=Bo?Hn:"Environment",lo=Bo&&go.java?"JavaPackage":Yr(go.java),Co=Bo?Hn:"RuntimeObject",ko=/\bJava/.test(lo)&&go.java,la=ko&&Yr(go.environment)==oo,Wo=ko?"a":"α",ss=ko?"b":"β",$o=go.document||{},qo=go.operamini||go.opera,ka=Pt.test(ka=Bo&&qo?qo["[[Class]]"]:Yr(qo))?ka:qo=null,Ji=Fn,Yo=[],Ni=null,ps=Fn==Bn,xo=ps&&qo&&typeof qo.version=="function"&&qo.version(),wa=function(Ja){return Mn(Ja,function(Oa,za){return Oa||RegExp("\\b"+(za.pattern||In(za))+"\\b","i").exec(Fn)&&(za.label||za)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),fo=function(Ja){return Mn(Ja,function(Oa,za){return Oa||RegExp("\\b"+(za.pattern||In(za))+"\\b","i").exec(Fn)&&(za.label||za)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),sa=w1([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),cs=function(Ja){return Mn(Ja,function(Oa,za,Dp){return Oa||(za[sa]||za[/^[a-z]+(?: +[a-z]+\b)*/i.exec(sa)]||RegExp("\\b"+In(Dp)+"(?:\\b|\\w*\\d)","i").exec(Fn))&&Dp})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),ho=function(Ja){return Mn(Ja,function(Oa,za){var Dp=za.pattern||In(za);return!Oa&&(Oa=RegExp("\\b"+Dp+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Fn))&&(Oa=function(ks,Xv,Zv){var ey={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Xv&&Zv&&/^Win/i.test(ks)&&!/^Windows Phone /i.test(ks)&&(ey=ey[/[\d.]+$/.exec(ks)])&&(ks="Windows "+ey),ks=String(ks),Xv&&Zv&&(ks=ks.replace(RegExp(Xv,"i"),Zv)),jr(ks.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Oa,Dp,za.label||za)),Oa})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function w1($s){return Mn($s,function(Ja,Oa){var za=Oa.pattern||In(Oa);return!Ja&&(Ja=RegExp("\\b"+za+" *\\d+[.\\w_]*","i").exec(Fn)||RegExp("\\b"+za+" *\\w+-[\\w]*","i").exec(Fn)||RegExp("\\b"+za+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Fn))&&((Ja=String(Oa.label&&!RegExp(za,"i").test(Oa.label)?Oa.label:Ja).split("/"))[1]&&!/[\d.]+/.test(Ja[0])&&(Ja[0]+=" "+Ja[1]),Oa=Oa.label||Oa,Ja=jr(Ja[0].replace(RegExp(za,"i"),Oa).replace(RegExp("; *(?:"+Oa+"[_-])?","i")," ").replace(RegExp("("+Oa+")[-_.]?(\\w)","i"),"$1 $2"))),Ja})}function Jv($s){return Mn($s,function(Ja,Oa){return Ja||(RegExp(Oa+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Fn)||0)[1]||null})}if(wa&&(wa=[wa]),/\bAndroid\b/.test(ho)&&!sa&&(zr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(Fn))&&(sa=Dn(zr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),cs&&!sa?sa=w1([cs]):cs&&sa&&(sa=sa.replace(RegExp("^("+In(cs)+")[-_.\\s]","i"),cs+" ").replace(RegExp("^("+In(cs)+")[-_.]?(\\w)","i"),cs+" $2")),(zr=/\bGoogle TV\b/.exec(sa))&&(sa=zr[0]),/\bSimulator\b/i.test(Fn)&&(sa=(sa?sa+" ":"")+"Simulator"),fo=="Opera Mini"&&/\bOPiOS\b/.test(Fn)&&Yo.push("running in Turbo/Uncompressed mode"),fo=="IE"&&/\blike iPhone OS\b/.test(Fn)?(cs=(zr=Jn(Fn.replace(/like iPhone OS/,""))).manufacturer,sa=zr.product):/^iP/.test(sa)?(fo||(fo="Safari"),ho="iOS"+((zr=/ OS ([\d_]+)/i.exec(Fn))?" "+zr[1].replace(/_/g,"."):"")):fo=="Konqueror"&&/^Linux\b/i.test(ho)?ho="Kubuntu":cs&&cs!="Google"&&(/Chrome/.test(fo)&&!/\bMobile Safari\b/i.test(Fn)||/\bVita\b/.test(sa))||/\bAndroid\b/.test(ho)&&/^Chrome/.test(fo)&&/\bVersion\//i.test(Fn)?(fo="Android Browser",ho=/\bAndroid\b/.test(ho)?ho:"Android"):fo=="Silk"?(/\bMobi/i.test(Fn)||(ho="Android",Yo.unshift("desktop mode")),/Accelerated *= *true/i.test(Fn)&&Yo.unshift("accelerated")):fo=="UC Browser"&&/\bUCWEB\b/.test(Fn)?Yo.push("speed mode"):fo=="PaleMoon"&&(zr=/\bFirefox\/([\d.]+)\b/.exec(Fn))?Yo.push("identifying as Firefox "+zr[1]):fo=="Firefox"&&(zr=/\b(Mobile|Tablet|TV)\b/i.exec(Fn))?(ho||(ho="Firefox OS"),sa||(sa=zr[1])):!fo||(zr=!/\bMinefield\b/i.test(Fn)&&/\b(?:Firefox|Safari)\b/.exec(fo))?(fo&&!sa&&/[\/,]|^[^(]+?\)/.test(Fn.slice(Fn.indexOf(zr+"/")+8))&&(fo=null),(zr=sa||cs||ho)&&(sa||cs||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ho))&&(fo=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ho)?ho:zr)+" Browser")):fo=="Electron"&&(zr=(/\bChrome\/([\d.]+)\b/.exec(Fn)||0)[1])&&Yo.push("Chromium "+zr),xo||(xo=Jv(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",In(fo),"(?:Firefox|Minefield|NetFront)"])),(zr=(wa=="iCab"&&parseFloat(xo)>3?"WebKit":/\bOpera\b/.test(fo)&&(/\bOPR\b/.test(Fn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(Fn)&&!/^(?:Trident|EdgeHTML)$/.test(wa)&&"WebKit"||!wa&&/\bMSIE\b/i.test(Fn)&&(ho=="Mac OS"?"Tasman":"Trident")||wa=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(fo)&&"NetFront")&&(wa=[zr]),fo=="IE"&&(zr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Fn)||0)[1])?(fo+=" Mobile",ho="Windows Phone "+(/\+$/.test(zr)?zr:zr+".x"),Yo.unshift("desktop mode")):/\bWPDesktop\b/i.test(Fn)?(fo="IE Mobile",ho="Windows Phone 8.x",Yo.unshift("desktop mode"),xo||(xo=(/\brv:([\d.]+)/.exec(Fn)||0)[1])):fo!="IE"&&wa=="Trident"&&(zr=/\brv:([\d.]+)/.exec(Fn))&&(fo&&Yo.push("identifying as "+fo+(xo?" "+xo:"")),fo="IE",xo=zr[1]),ps){if(function(Ja,Oa){var za=Ja!=null?typeof Ja[Oa]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(za)||za=="object"&&!Ja[Oa])}(go,"global"))if(ko&&(Ji=(zr=ko.lang.System).getProperty("os.arch"),ho=ho||zr.getProperty("os.name")+" "+zr.getProperty("os.version")),la){try{xo=go.require("ringo/engine").version.join("."),fo="RingoJS"}catch{(zr=go.system)&&zr.global.system==go.system&&(fo="Narwhal",ho||(ho=zr[0].os||null))}fo||(fo="Rhino")}else typeof go.process=="object"&&!go.process.browser&&(zr=go.process)&&(typeof zr.versions=="object"&&(typeof zr.versions.electron=="string"?(Yo.push("Node "+zr.versions.node),fo="Electron",xo=zr.versions.electron):typeof zr.versions.nw=="string"&&(Yo.push("Chromium "+xo,"Node "+zr.versions.node),fo="NW.js",xo=zr.versions.nw)),fo||(fo="Node.js",Ji=zr.arch,ho=zr.platform,xo=(xo=/[\d.]+/.exec(zr.version))?xo[0]:null));else Yr(zr=go.runtime)==On?(fo="Adobe AIR",ho=zr.flash.system.Capabilities.os):Yr(zr=go.phantom)==Co?(fo="PhantomJS",xo=(zr=zr.version||null)&&zr.major+"."+zr.minor+"."+zr.patch):typeof $o.documentMode=="number"&&(zr=/\bTrident\/(\d+)/i.exec(Fn))?(xo=[xo,$o.documentMode],(zr=+zr[1]+4)!=xo[1]&&(Yo.push("IE "+xo[1]+" mode"),wa&&(wa[1]=""),xo[1]=zr),xo=fo=="IE"?String(xo[1].toFixed(1)):xo[0]):typeof $o.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(fo)&&(Yo.push("masking as "+fo+" "+xo),fo="IE",xo="11.0",wa=["Trident"],ho="Windows");ho=ho&&jr(ho)}if(xo&&(zr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(xo)||/(?:alpha|beta)(?: ?\d)?/i.exec(Fn+";"+(ps&&Do.appMinorVersion))||/\bMinefield\b/i.test(Fn)&&"a")&&(Ni=/b/i.test(zr)?"beta":"alpha",xo=xo.replace(RegExp(zr+"\\+?$"),"")+(Ni=="beta"?ss:Wo)+(/\d+\+?/.exec(zr)||"")),fo=="Fennec"||fo=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(ho))fo="Firefox Mobile";else if(fo=="Maxthon"&&xo)xo=xo.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(sa))sa=="Xbox 360"&&(ho=null),sa=="Xbox 360"&&/\bIEMobile\b/.test(Fn)&&Yo.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(fo)&&(!fo||sa||/Browser|Mobi/.test(fo))||ho!="Windows CE"&&!/Mobi/i.test(Fn))if(fo=="IE"&&ps)try{go.external===null&&Yo.unshift("platform preview")}catch{Yo.unshift("embedded")}else(/\bBlackBerry\b/.test(sa)||/\bBB10\b/.test(Fn))&&(zr=(RegExp(sa.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Fn)||0)[1]||xo)?(ho=((zr=[zr,/BB10/.test(Fn)])[1]?(sa=null,cs="BlackBerry"):"Device Software")+" "+zr[0],xo=null):this!=Ur&&sa!="Wii"&&(ps&&qo||/Opera/.test(fo)&&/\b(?:MSIE|Firefox)\b/i.test(Fn)||fo=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(ho)||fo=="IE"&&(ho&&!/^Win/.test(ho)&&xo>5.5||/\bWindows XP\b/.test(ho)&&xo>8||xo==8&&!/\bTrident\b/.test(Fn)))&&!Pt.test(zr=Jn.call(Ur,Fn.replace(Pt,"")+";"))&&zr.name&&(zr="ing as "+zr.name+((zr=zr.version)?" "+zr:""),Pt.test(fo)?(/\bIE\b/.test(zr)&&ho=="Mac OS"&&(ho=null),zr="identify"+zr):(zr="mask"+zr,fo=ka?jr(ka.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(zr)&&(ho=null),ps||(xo=null)),wa=["Presto"],Yo.push(zr));else fo+=" Mobile";(zr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Fn)||0)[1])&&(zr=[parseFloat(zr.replace(/\.(\d)$/,".0$1")),zr],fo=="Safari"&&zr[1].slice(-1)=="+"?(fo="WebKit Nightly",Ni="alpha",xo=zr[1].slice(0,-1)):xo!=zr[1]&&xo!=(zr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Fn)||0)[1])||(xo=null),zr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Fn)||0)[1],zr[0]==537.36&&zr[2]==537.36&&parseFloat(zr[1])>=28&&wa=="WebKit"&&(wa=["Blink"]),ps&&(to||zr[1])?(wa&&(wa[1]="like Chrome"),zr=zr[1]||((zr=zr[0])<530?1:zr<532?2:zr<532.05?3:zr<533?4:zr<534.03?5:zr<534.07?6:zr<534.1?7:zr<534.13?8:zr<534.16?9:zr<534.24?10:zr<534.3?11:zr<535.01?12:zr<535.02?"13+":zr<535.07?15:zr<535.11?16:zr<535.19?17:zr<536.05?18:zr<536.1?19:zr<537.01?20:zr<537.11?"21+":zr<537.13?23:zr<537.18?24:zr<537.24?25:zr<537.36?26:wa!="Blink"?"27":"28")):(wa&&(wa[1]="like Safari"),zr=(zr=zr[0])<400?1:zr<500?2:zr<526?3:zr<533?4:zr<534?"4+":zr<535?5:zr<537?6:zr<538?7:zr<601?8:zr<602?9:zr<604?10:zr<606?11:zr<608?12:"12"),wa&&(wa[1]+=" "+(zr+=typeof zr=="number"?".x":/[.+]/.test(zr)?"":"+")),fo=="Safari"&&(!xo||parseInt(xo)>45)?xo=zr:fo=="Chrome"&&/\bHeadlessChrome/i.test(Fn)&&Yo.unshift("headless")),fo=="Opera"&&(zr=/\bzbov|zvav$/.exec(ho))?(fo+=" ",Yo.unshift("desktop mode"),zr=="zvav"?(fo+="Mini",xo=null):fo+="Mobile",ho=ho.replace(RegExp(" *"+zr+"$"),"")):fo=="Safari"&&/\bChrome\b/.exec(wa&&wa[1])?(Yo.unshift("desktop mode"),fo="Chrome Mobile",xo=null,/\bOS X\b/.test(ho)?(cs="Apple",ho="iOS 4.3+"):ho=null):/\bSRWare Iron\b/.test(fo)&&!xo&&(xo=Jv("Chrome")),xo&&xo.indexOf(zr=/[\d.]+$/.exec(ho))==0&&Fn.indexOf("/"+zr+"-")>-1&&(ho=Dn(ho.replace(zr,""))),ho&&ho.indexOf(fo)!=-1&&!RegExp(fo+" OS").test(ho)&&(ho=ho.replace(RegExp(" *"+In(fo)+" *"),"")),wa&&!/\b(?:Avant|Nook)\b/.test(fo)&&(/Browser|Lunascape|Maxthon/.test(fo)||fo!="Safari"&&/^iOS/.test(ho)&&/\bSafari\b/.test(wa[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(fo)&&wa[1])&&(zr=wa[wa.length-1])&&Yo.push(zr),Yo.length&&(Yo=["("+Yo.join("; ")+")"]),cs&&sa&&sa.indexOf(cs)<0&&Yo.push("on "+cs),sa&&Yo.push((/^on /.test(Yo[Yo.length-1])?"":"on ")+sa),ho&&(zr=/ ([\d.+]+)$/.exec(ho),eo=zr&&ho.charAt(ho.length-zr[0].length-1)=="/",ho={architecture:32,family:zr&&!eo?ho.replace(zr[0],""):ho,version:zr?zr[1]:null,toString:function(){var $s=this.version;return this.family+($s&&!eo?" "+$s:"")+(this.architecture==64?" 64-bit":"")}}),(zr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Ji))&&!/\bi686\b/i.test(Ji)?(ho&&(ho.architecture=64,ho.family=ho.family.replace(RegExp(" *"+zr),"")),fo&&(/\bWOW64\b/i.test(Fn)||ps&&/\w(?:86|32)$/.test(Do.cpuClass||Do.platform)&&!/\bWin64; x64\b/i.test(Fn))&&Yo.unshift("32-bit")):ho&&/^OS X/.test(ho.family)&&fo=="Chrome"&&parseFloat(xo)>=39&&(ho.architecture=64),Fn||(Fn=null);var hs={};return hs.description=Fn,hs.layout=wa&&wa[0],hs.manufacturer=cs,hs.name=fo,hs.prerelease=Ni,hs.product=sa,hs.ua=Fn,hs.version=fo&&xo,hs.os=ho||{architecture:null,family:null,version:null,toString:function(){return"null"}},hs.parse=Jn,hs.toString=function(){return this.description||""},hs.version&&Yo.unshift(xo),hs.name&&Yo.unshift(fo),ho&&fo&&(ho!=String(ho).split(" ")[0]||ho!=fo.split(" ")[0]&&!sa)&&Yo.push(sa?"("+ho+")":"on "+ho),Yo.length&&(hs.description=Yo.join(" ")),hs}();Oe&&Ne?Ur(Wn,function(Jn,Fn){Oe[Fn]=Jn}):qe.platform=Wn}).call(e)}),M1=g(function(pe,xe){pe.exports=function(){var qe={d:function(zr,eo){for(var to in eo)qe.o(eo,to)&&!qe.o(zr,to)&&jd(zr,to,{enumerable:!0,get:eo[to]})},o:function(zr,eo){return Object.prototype.hasOwnProperty.call(zr,eo)}},Oe={};qe.d(Oe,{default:function(){return Do}});var Ne=function Bn(zr){for(var eo in function(to,Hn){if(!(to instanceof Hn))throw new TypeError("Cannot call a class as a function")}(this,Bn),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(to){},this.onProgress=function(to){},this.onUploadProgress=function(to){},this.onComplete=function(to){},zr)this[eo]=zr[eo]};function Lt(Bn,zr){var eo=zs!==void 0&&Sm(Bn)||Bn["@@iterator"];if(!eo){if(Ts(Bn)||(eo=function(Co,ko){if(Co){var la;if(typeof Co=="string")return Dt(Co,ko);var Wo=Da(la=Object.prototype.toString.call(Co)).call(la,8,-1);return Wo==="Object"&&Co.constructor&&(Wo=Co.constructor.name),Wo==="Map"||Wo==="Set"?pl(Co):Wo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Wo)?Dt(Co,ko):void 0}}(Bn))||zr&&Bn&&typeof Bn.length=="number"){eo&&(Bn=eo);var to=0,Hn=function(){};return{s:Hn,n:function(){return to>=Bn.length?{done:!0}:{done:!1,value:Bn[to++]}},e:function(ko){throw ko},f:Hn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var On,oo=!0,lo=!1;return{s:function(){eo=eo.call(Bn)},n:function(){var ko=eo.next();return oo=ko.done,ko},e:function(ko){lo=!0,On=ko},f:function(){try{oo||eo.return==null||eo.return()}finally{if(lo)throw On}}}}function Dt(Bn,zr){(zr==null||zr>Bn.length)&&(zr=Bn.length);for(var eo=0,to=new Array(zr);eo<zr;eo++)to[eo]=Bn[eo];return to}var Pt=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(Pt={privateObj:{},setItem:function(zr,eo){Pt.privateObj[zr]=eo},getItem:function(zr){return Pt.privateObj[zr]},removeItem:function(zr){delete Pt.privateObj[zr]},getKeys:function(){return ba(Pt.privateObj)}});var ir={getFileKey:function(zr){var eo=zr.size.toString(),to=zr.lastModified.toString();return"_NosUploader_"+zr.name+Da(eo).call(eo,eo.length-5)+Da(to).call(to,to.length-5)},getFileInfo:function(zr){var eo=Pt.getItem(zr);if(!eo)return null;try{return JSON.parse(eo)}catch{return null}},initFile:function(zr,eo,to){ir.clearExpiredInfo();var Hn=this.getFileKey(eo),On={ctx:zr.ctx!==void 0?zr.ctx:"",bucket:zr.bucketName,obj:zr.objectName,token:zr.token,modifyAt:_s(),end:!1};return zr.payload&&(On.payload=zr.payload),to&&Pt.setItem(Hn,Io(On)),Hn},setUploadContext:function(zr,eo,to){var Hn=this.getFileInfo(zr);Hn&&(Hn.ctx=eo,to&&Pt.setItem(zr,Io(Hn)))},setComplete:function(zr,eo){var to=this.getFileInfo(zr);to&&(to.modifyAt=_s(),to.end=!0,eo&&Pt.setItem(zr,Io(to)))},getUploadContext:function(zr){var eo=this.getFileInfo(zr);return eo?eo.ctx:""},removeFileInfo:function(zr){ta(zr).call(zr,"_NosUploader_")===0&&Pt.removeItem(zr)},clearExpiredInfo:function(){var zr,eo=typeof Pt.getKeys=="function"?Pt.getKeys():ba(Pt),to=_s(),Hn=[],On=Lt(eo);try{for(On.s();!(zr=On.n()).done;){var oo=zr.value;if(ta(oo).call(oo,"_NosUploader_")===0){var lo=ir.getFileInfo(oo);lo===null||to-lo.modifyAt>Do.expireTime?Pt.removeItem(oo):Hn.push({fileInfo:lo,key:oo})}}}catch($o){On.e($o)}finally{On.f()}if(Hn.length>Do.maxFileCache){var Co,ko,la=Lt(Da(Co=vp(Hn).call(Hn,function($o,qo){return qo.fileInfo.modifyAt-$o.fileInfo.modifyAt})).call(Co,Do.maxFileCache));try{for(la.s();!(ko=la.n()).done;){var Wo,ss=ko.value;ta(Wo=ss.key).call(Wo,"_NosUploader_")===0&&Pt.removeItem(ss.key)}}catch($o){la.e($o)}finally{la.f()}}}},vr=ir;function Ir(Bn){return(Ir=typeof zs=="function"&&typeof oh=="symbol"?function(zr){return typeof zr}:function(zr){return zr&&typeof zs=="function"&&zr.constructor===zs&&zr!==zs.prototype?"symbol":typeof zr})(Bn)}function Or(Bn,zr){return!zr||Ir(zr)!=="object"&&typeof zr!="function"?function(eo){if(eo===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return eo}(Bn):zr}function jr(Bn){var zr=typeof Xu=="function"?new Xu:void 0;return(jr=function(to){var Hn,On;if(to===null||(On=to,ta(Hn=Function.toString.call(On)).call(Hn,"[native code]")===-1))return to;if(typeof to!="function")throw new TypeError("Super expression must either be null or a function");if(zr!==void 0){if(zr.has(to))return zr.get(to);zr.set(to,oo)}function oo(){return Ur(to,arguments,Mn(this).constructor)}return oo.prototype=ii(to.prototype,{constructor:{value:oo,enumerable:!1,writable:!0,configurable:!0}}),In(oo,to)})(Bn)}function Ur(Bn,zr,eo){return(Ur=Yr()?Gi:function(to,Hn,On){var oo=[null];oo.push.apply(oo,Hn);var lo=new(oa(Function).apply(to,oo));return On&&In(lo,On.prototype),lo}).apply(null,arguments)}function Yr(){if(typeof Reflect>"u"||!Gi||Gi.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Gi(Boolean,[],function(){})),!0}catch{return!1}}function In(Bn,zr){return(In=ci||function(eo,to){return eo.__proto__=to,eo})(Bn,zr)}function Mn(Bn){return(Mn=ci?zl:function(zr){return zr.__proto__||zl(zr)})(Bn)}var Dn=function(Bn){(function(On,oo){if(typeof oo!="function"&&oo!==null)throw new TypeError("Super expression must either be null or a function");On.prototype=ii(oo&&oo.prototype,{constructor:{value:On,writable:!0,configurable:!0}}),oo&&In(On,oo)})(Hn,Bn);var zr,eo,to=(zr=Hn,eo=Yr(),function(){var On,oo=Mn(zr);if(eo){var lo=Mn(this).constructor;On=Gi(oo,arguments,lo)}else On=oo.apply(this,arguments);return Or(this,On)});function Hn(On,oo){var lo;return function(Co,ko){if(!(Co instanceof ko))throw new TypeError("Cannot call a class as a function")}(this,Hn),(lo=to.call(this,"NosUploadError:"+On)).errCode=oo,lo.errMsg=On,lo}return Hn}(jr(Error)),Wn=function Bn(zr,eo,to){if(zr.uploadState==="uploading"){var Hn=zr.config,On=zr.param,oo=vr.getUploadContext(zr.fileKey);if(!oo)return to(0);var lo=new XMLHttpRequest,Co=Hn.directUploadAddr+"/".concat(On.bucketName)+"/".concat(encodeURIComponent(On.objectName))+"?uploadContext"+"&context=".concat(oo)+"&version=".concat(Hn.version);lo.onreadystatechange=function(){var ko;if(zr.uploadState!=="abort"&&lo.readyState===4){var la,Wo,ss,$o;try{$o=JSON.parse(lo.responseText)}catch{$o={errMsg:"JsonParseError in getOffset",errCode:500}}lo.status===200?$o.errCode?zr.config.onError(new Dn($o.errMsg,$o.errCode)):to($o.offset):lo.status.toString().match(/^5/)?Bn(zr,eo-1,to):eo>0?(typeof((ko=Hn.logger)===null||ko===void 0?void 0:ko.error)=="function"&&Hn.logger.error(Hs(la="getOffset(".concat(Co,") error. retry after 3 seconds. ")).call(la,new Date().toTimeString())),Vi(function(){Bn(zr,eo-1,to)},3500)):(vr.removeFileInfo(zr.fileKey),lo.status?Hn.onError(new Dn(Hs(Wo=Hs(ss="getOffset(".concat(Co,") error: ")).call(ss,lo.status," ")).call(Wo,lo.statusText))):Hn.onError(new Dn("getOffset(".concat(Co,") error. no Error Code"))))}},lo.open("get",Co),lo.setRequestHeader("x-nos-token",On.token),lo.timeout=Hn.getOffsetTimeout,lo.send()}},Jn=function Bn(zr,eo,to,Hn){if(zr.uploadState==="uploading"){var On=zr.param,oo=zr.config,lo=Da(File.prototype),Co=On.ctx!==void 0?On.ctx:"",ko=eo+oo.trunkSize>zr.file.size,la=ko?zr.file.size:eo+oo.trunkSize,Wo=new XMLHttpRequest,ss=oo.directUploadAddr+"/".concat(On.bucketName)+"/".concat(encodeURIComponent(On.objectName));if(Wo.upload.onprogress=function(qo){if(zr.uploadState!=="abort"){var ka=0;qo.lengthComputable?(ka=(eo+qo.loaded)/zr.file.size,oo.onProgress(ka),oo.onUploadProgress({loaded:qo.loaded,total:zr.file.size,percentage:ka,percentageText:(100*ka).toFixed(2)+"%"})):oo.onError(new Dn("browser does not support query upload progress"))}},Wo.onreadystatechange=function(){var qo,ka;if(zr.uploadState!=="abort"&&Wo.readyState===4){var Ji,Yo,Ni,ps;try{ps=JSON.parse(Wo.responseText)}catch(xo){typeof((qo=oo.logger)===null||qo===void 0?void 0:qo.error)=="function"&&oo.logger.error("JsonParseError in uploadTrunk",xo),ps={errMsg:"JsonParseError in uploadTrunk"}}Wo.status===200?(zr.setContext(ps.context),ko?(Hn(),zr.setComplete()):Bn(zr,ps.offset,oo.retryCount,Hn)):Wo.status.toString().match(/^5/)?to>0?Bn(zr,eo,to-1,Hn):(vr.removeFileInfo(zr.fileKey),oo.onError(new Dn(ps.errMsg,ps.errCode))):to>0?(typeof((ka=oo.logger)===null||ka===void 0?void 0:ka.error)=="function"&&oo.logger.error(Hs(Ji="uploadTrunk(".concat(ss,") error. retry after 3 seconds. ")).call(Ji,new Date().toTimeString())),Vi(function(){Bn(zr,eo,to-1,Hn)},3500)):(vr.removeFileInfo(zr.fileKey),Wo.status?oo.onError(new Dn(Hs(Yo=Hs(Ni="uploadTrunk(".concat(ss,") error: ")).call(Ni,Wo.status," ")).call(Yo,Wo.statusText))):oo.onError(new Dn("uploadTrunk(".concat(ss,") error. no Error Code. Please check your network"))))}},Wo.open("post",ss+"?offset=".concat(eo)+"&complete=".concat(ko)+"&context=".concat(Co)+"&version=".concat(oo.version)),Wo.setRequestHeader("x-nos-token",On.token),zr.file.type&&Wo.setRequestHeader("content-type",zr.file.type),Wo.timeout=oo.trunkUploadTimeout,typeof FileReader<"u"){var $o=new FileReader;$o.addEventListener("load",function(qo){var ka;!((ka=qo==null?void 0:qo.target)===null||ka===void 0)&&ka.result?Wo.send(qo.target.result):oo.onError(new Dn("Read ArrayBuffer failed"))}),$o.addEventListener("error",function(qo){var ka=qo.target.error;oo.onError(new Dn("Read ArrayBuffer error. ".concat(ka.toString()),ka.code))}),$o.readAsArrayBuffer(lo.call(zr.file,eo,la))}else Wo.send(lo.call(zr.file,eo,la))}};function Fn(Bn,zr){for(var eo=0;eo<zr.length;eo++){var to=zr[eo];to.enumerable=to.enumerable||!1,to.configurable=!0,"value"in to&&(to.writable=!0),jd(Bn,to.key,to)}}var go=function(){function Bn(eo,to,Hn){(function(On,oo){if(!(On instanceof oo))throw new TypeError("Cannot call a class as a function")})(this,Bn),this.uploadState="paused",this.config=Hn,this.file=eo,this.param=to,this.fileKey=vr.initFile(to,eo,this.config.enableCache),this.resume()}var zr;return(zr=[{key:"resume",value:function(){var to=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Hn=this.config;Wn(this,Hn.retryCount,function(On){Jn(to,On,Hn.retryCount,function(){to.setUploadState("ended"),typeof Hn.onComplete=="function"&&Hn.onComplete(to.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),vr.removeFileInfo(this.fileKey),this.config.onError(new Dn("Upload Aborted",10499))}},{key:"setUploadState",value:function(to){to!==this.uploadState&&(this.uploadState=to)}},{key:"setContext",value:function(to){vr.setUploadContext(this.fileKey,to,this.config.enableCache),this.param.ctx=to}},{key:"setComplete",value:function(){vr.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&Fn(Bn.prototype,zr),Bn}(),Bo={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(zr){var eo=vr.getFileKey(zr),to=vr.getFileInfo(eo);return to===null?null:_s()-to.modifyAt>Bo.expireTime?(vr.removeFileInfo(eo),null):{uploadInfo:zn({bucketName:to.bucket,objectName:to.obj,token:to.token,ctx:to.ctx},to.payload?{payload:to.payload}:{}),complete:to.end}},setMaxFileCache:function(zr){Bo.maxFileCache=zr},setExpireTime:function(zr){Bo.expireTime=zr},printCaches:function(){for(var zr=0,eo=ba(localStorage);zr<eo.length;zr++){var to=eo[zr],Hn=vr.getFileInfo(to);Hn&&console.log(Hn,"modifiedAt",new Date(Hn.modifyAt).toTimeString())}},createConfig:function(zr){return new Ne(zr)},createTask:function(zr,eo,to){return new go(zr,eo,to)}},Do=Bo;return Oe.default}()}),jm=g(function(pe,xe){pe.exports=function(){function qe(Lt){if(Lt){var Dt,Pt="";return bo(Dt=ba(Lt)).call(Dt,function(ir,vr){Pt+=vr===0?"?":"&",Pt+=ir+"="+Lt[ir]}),Pt}return""}var Oe=function(Lt){function Dt(Pt,ir,vr,Ir){var Or;return(Or=Lt.call(this,vr)||this).source=Pt,Or.code=ir,Or.desc=vr,Or.detail=Ir||{},Or}return ra(Dt,Lt),Dt}(g0(Error));function Ne(Lt,Dt){Dt===void 0&&(Dt={dataType:"json",method:"GET",timeout:5e3});var Pt=Dt.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",ir=Dt.method==="GET"?qe(Dt.params):"";return new ca(function(vr,Ir){if(window.XMLHttpRequest){var Or,jr=new XMLHttpRequest;if(jr.onreadystatechange=function(){if(jr.readyState===4)if(jr.status===200){try{Or=JSON.parse(jr.response||"{}")}catch{Or=jr.response}vr({status:jr.status,data:Or})}else Vi(function(){Ir(new Oe(1,jr.status,"readyState: "+jr.readyState+"; statusText: "+jr.statusText))},0)},jr.open(Dt.method,""+Lt+ir),jr.timeout=Dt.timeout||5e3,jr.setRequestHeader("Content-Type",Pt),Dt.headers)for(var Ur in Dt.headers)jr.setRequestHeader(Ur,Dt.headers[Ur]);jr.ontimeout=function(Yr){Ir(new Oe(1,408,Yr&&Yr.message?Yr.message:"request timeout"))},jr.send(Io(Dt.data))}else Ir(new Oe(2,10400,"request no suppout"))})}return Ne}()}),k1=console,kl=null,wl=null,TM={setLogger:function(xe){k1=xe},platform:"BROWSER",localStorage:window.localStorage,request:jm,WebSocket:window.WebSocket,uploadFile:function(xe){return hn(this,void 0,void 0,Dr.mark(function qe(){var Oe,Ne,Lt,Dt,Pt,ir;return Dr.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(xe.fileInput||xe.file){Ir.next=2;break}throw new Error("File not exist");case 2:if(!xe.file){Ir.next=6;break}Dt=xe.file,Ir.next=20;break;case 6:if(typeof xe.fileInput!="string"){Ir.next=15;break}if(!((Pt=document.getElementById(xe.fileInput))&&Pt.files&&Pt.files[0])){Ir.next=12;break}Dt=Pt.files[0],Ir.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:Ir.next=20;break;case 15:if(!(xe.fileInput&&xe.fileInput.files&&xe.fileInput.files[0])){Ir.next=19;break}Dt=xe.fileInput.files[0],Ir.next=20;break;case 19:throw new Error("Can not get file from fileInput "+xe.fileInput);case 20:if(!(xe.maxSize&&Dt.size>xe.maxSize)){Ir.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+xe.maxSize+", get "+Dt.size);case 22:return Ir.next=24,new ca(function(Or,jr){var Ur=M1.createConfig({enableCache:!1,directUploadAddr:xe.chunkUploadHost,onError:function(Mn){jr(Mn)},onUploadProgress:xe.onUploadProgress||function(){},onComplete:function(Mn){Or(Mn)}}),Yr=M1.createTask(Dt,{bucketName:xe.nosToken.bucket,objectName:decodeURIComponent(xe.nosToken.objectName),token:xe.nosToken.token},Ur);try{xe.onUploadStart&&xe.onUploadStart(Yr)}catch(In){k1.error("Adapter uploadFile: options.onUploadStart error",In&&In.message),Yr.abort(),jr(In)}});case 24:return(ir=Ir.sent).name=Dt.name,ir.size=Dt.size,ir.type=Dt.type,ir.ext=C1(Oe=ir.name).call(Oe,".")>-1?Da(Ne=ir.name).call(Ne,C1(Lt=ir.name).call(Lt,".")+1).toLowerCase():"",Ir.abrupt("return",ir);case 30:case"end":return Ir.stop()}},qe)}))},getSystemInfo:function(){var xe,qe,Oe=ud.version||"";if(uv())try{var Ne=navigator.userAgent.match(/Electron\/([\d.]+\d+)/);Ne&&Ne[1]&&typeof Ne[1]=="string"&&(Oe=Ne[1])}catch{}return{os:((xe=ud.os)===null||xe===void 0?void 0:xe.family)||"",osVer:((qe=ud.os)===null||qe===void 0?void 0:qe.version)||"",browser:ud.name||"",browserVer:ud.version||"",libEnv:"BROWSER",hostEnv:uv()?"Electron":k0()?"H5":dc()?"BROWSER":"Unset",hostEnvEnum:uv()?nu.Electron:k0()?nu.H5:dc()?nu.BROWSER:nu.Unset,hostEnvVer:Oe,userAgent:navigator&&navigator.userAgent,model:Oe,manufactor:ud.name||""}},net:{getNetworkStatus:function(){return ca.resolve({net_type:Qs.kStatNetTypeUnkonw,net_connect:typeof navigator>"u"||typeof navigator.onLine!="boolean"||navigator.onLine})},onNetworkStatusChange:function(xe){kl=function(){xe({isConnected:!0,networkType:Qs.kStatNetTypeUnkonw})},wl=function(){xe({isConnected:!1,networkType:Qs.kStatNetTypeUnkonw})},window.addEventListener("online",kl),window.addEventListener("offline",wl)},offNetworkStatusChange:function(){kl&&window.removeEventListener("online",kl),wl&&window.removeEventListener("offline",wl),kl=null,wl=null}}};return $m.setAdapters(TM),$m})})(QCHAT_BROWSER_SDK);var QCHAT_BROWSER_SDKExports=QCHAT_BROWSER_SDK.exports;const QChatSDK=getDefaultExportFromCjs(QCHAT_BROWSER_SDKExports);var NIM_BROWSER_SDK={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(commonjsGlobal,function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function n(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function g(_e){var he={exports:{}};return _e(he,he.exports),he.exports}var y,i,k=n(g(function(_e){_e.exports=function(Ue){if(Ue===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ue},_e.exports.__esModule=!0,_e.exports.default=_e.exports})),L=function(_e){return _e&&_e.Math==Math&&_e},$=L(typeof globalThis=="object"&&globalThis)||L(typeof window=="object"&&window)||L(typeof self=="object"&&self)||L(typeof e=="object"&&e)||function(){return this}()||Function("return this")(),V=function(_e){try{return!!_e()}catch{return!0}},z=!V(function(){var _e=(function(){}).bind();return typeof _e!="function"||_e.hasOwnProperty("prototype")}),re=Function.prototype,oe=re.apply,le=re.call,ue=typeof Reflect=="object"&&Reflect.apply||(z?le.bind(oe):function(){return le.apply(oe,arguments)}),ie=Function.prototype,ae=ie.bind,Fe=ie.call,de=z&&ae.bind(Fe,Fe),Ie=z?function(_e){return _e&&de(_e)}:function(_e){return _e&&function(){return Fe.apply(_e,arguments)}},Ve=function(_e){return typeof _e=="function"},kt=!V(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),At=Function.prototype.call,ze=z?At.bind(At):function(){return At.apply(At,arguments)},Et={}.propertyIsEnumerable,cr=Object.getOwnPropertyDescriptor,er={f:cr&&!Et.call({1:2},1)?function(he){var Ue=cr(this,he);return!!Ue&&Ue.enumerable}:Et},or=function(_e,he){return{enumerable:!(1&_e),configurable:!(2&_e),writable:!(4&_e),value:he}},dr=Ie({}.toString),lr=Ie("".slice),nr=function(_e){return lr(dr(_e),8,-1)},ur=Object,ar=Ie("".split),gr=V(function(){return!ur("z").propertyIsEnumerable(0)})?function(_e){return nr(_e)=="String"?ar(_e,""):ur(_e)}:ur,pr=function(_e){return _e==null},hr=TypeError,Cr=function(_e){if(pr(_e))throw hr("Can't call method on "+_e);return _e},wr=function(_e){return gr(Cr(_e))},Sr=typeof document=="object"&&document.all,mr=Sr===void 0&&Sr!==void 0?function(_e){return typeof _e=="object"?_e!==null:Ve(_e)||_e===Sr}:function(_e){return typeof _e=="object"?_e!==null:Ve(_e)},_r={},Ar=function(_e){return Ve(_e)?_e:void 0},Er=function(_e,he){return arguments.length<2?Ar(_r[_e])||Ar($[_e]):_r[_e]&&_r[_e][he]||$[_e]&&$[_e][he]},sr=Ie({}.isPrototypeOf),xr=Er("navigator","userAgent")||"",Nr=$.process,Mr=$.Deno,br=Nr&&Nr.versions||Mr&&Mr.version,yr=br&&br.v8;yr&&(i=(y=yr.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!i&&xr&&(!(y=xr.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=xr.match(/Chrome\/(\d+)/))&&(i=+y[1]);var Tr,Br=i,Lr=!!Object.getOwnPropertySymbols&&!V(function(){var _e=Symbol();return!String(_e)||!(Object(_e)instanceof Symbol)||!Symbol.sham&&Br&&Br<41}),Fr=Lr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",qr=Object,Vr=Fr?function(_e){return typeof _e=="symbol"}:function(_e){var he=Er("Symbol");return Ve(he)&&sr(he.prototype,qr(_e))},Qr=String,Tn=function(_e){try{return Qr(_e)}catch{return"Object"}},xn=TypeError,Xr=function(_e){if(Ve(_e))return _e;throw xn(Tn(_e)+" is not a function")},Vn=function(_e,he){var Ue=_e[he];return pr(Ue)?void 0:Xr(Ue)},Zr=TypeError,Nn=Object.defineProperty,Jr="__core-js_shared__",wn=$[Jr]||function(_e,he){try{Nn($,_e,{value:he,configurable:!0,writable:!0})}catch{$[_e]=he}return he}(Jr,{}),Un=g(function(_e){(_e.exports=function(he,Ue){return wn[he]||(wn[he]=Ue!==void 0?Ue:{})})("versions",[]).push({version:"3.25.0",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),_n=Object,Pn=function(_e){return _n(Cr(_e))},Cn=Ie({}.hasOwnProperty),vn=Object.hasOwn||function(he,Ue){return Cn(Pn(he),Ue)},no=0,Ro=Math.random(),Ho=Ie(1 .toString),Vo=function(_e){return"Symbol("+(_e===void 0?"":_e)+")_"+Ho(++no+Ro,36)},Po=Un("wks"),Qo=$.Symbol,Ga=Qo&&Qo.for,ws=Fr?Qo:Qo&&Qo.withoutSetter||Vo,So=function(_e){if(!vn(Po,_e)||!Lr&&typeof Po[_e]!="string"){var he="Symbol."+_e;Lr&&vn(Qo,_e)?Po[_e]=Qo[_e]:Po[_e]=Fr&&Ga?Ga(he):ws(he)}return Po[_e]},Ps=TypeError,ao=So("toPrimitive"),Sa=function(_e,he){if(!mr(_e)||Vr(_e))return _e;var Ue,$e=Vn(_e,ao);if($e){if(he===void 0&&(he="default"),Ue=ze($e,_e,he),!mr(Ue)||Vr(Ue))return Ue;throw Ps("Can't convert object to primitive value")}return he===void 0&&(he="number"),function(Ce,jt){var tr,rr;if(jt==="string"&&Ve(tr=Ce.toString)&&!mr(rr=ze(tr,Ce))||Ve(tr=Ce.valueOf)&&!mr(rr=ze(tr,Ce))||jt!=="string"&&Ve(tr=Ce.toString)&&!mr(rr=ze(tr,Ce)))return rr;throw Zr("Can't convert object to primitive value")}(_e,he)},pa=function(_e){var he=Sa(_e,"string");return Vr(he)?he:he+""},La=$.document,Ya=mr(La)&&mr(La.createElement),ea=function(_e){return Ya?La.createElement(_e):{}},wo=!kt&&!V(function(){return Object.defineProperty(ea("div"),"a",{get:function(){return 7}}).a!=7}),Fa=Object.getOwnPropertyDescriptor,$a={f:kt?Fa:function(he,Ue){if(he=wr(he),Ue=pa(Ue),wo)try{return Fa(he,Ue)}catch{}if(vn(he,Ue))return or(!ze(er.f,he,Ue),he[Ue])}},Dc=/#|\.prototype\./,As=function(_e,he){var Ue=Zn[$n(_e)];return Ue==Ra||Ue!=zo&&(Ve(he)?V(he):!!he)},$n=As.normalize=function(_e){return String(_e).replace(Dc,".").toLowerCase()},Zn=As.data={},zo=As.NATIVE="N",Ra=As.POLYFILL="P",ys=As,Ds=Ie(Ie.bind),Go=function(_e,he){return Xr(_e),he===void 0?_e:z?Ds(_e,he):function(){return _e.apply(he,arguments)}},Bi=kt&&V(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),hi=String,Vp=TypeError,po=function(_e){if(mr(_e))return _e;throw Vp(hi(_e)+" is not an object")},I1=TypeError,pd=Object.defineProperty,E1=Object.getOwnPropertyDescriptor,P1="enumerable",A1="configurable",N1="writable",Ba={f:kt?Bi?function(he,Ue,$e){if(po(he),Ue=pa(Ue),po($e),typeof he=="function"&&Ue==="prototype"&&"value"in $e&&N1 in $e&&!$e.writable){var Ce=E1(he,Ue);Ce&&Ce.writable&&(he[Ue]=$e.value,$e={configurable:A1 in $e?$e.configurable:Ce.configurable,enumerable:P1 in $e?$e.enumerable:Ce.enumerable,writable:!1})}return pd(he,Ue,$e)}:pd:function(he,Ue,$e){if(po(he),Ue=pa(Ue),po($e),wo)try{return pd(he,Ue,$e)}catch{}if("get"in $e||"set"in $e)throw I1("Accessors not supported");return"value"in $e&&(he[Ue]=$e.value),he}},Ta=kt?function(_e,he,Ue){return Ba.f(_e,he,or(1,Ue))}:function(_e,he,Ue){return _e[he]=Ue,_e},O1=$a.f,R1=function(_e){var he=function(Ue,$e,Ce){if(this instanceof he){switch(arguments.length){case 0:return new _e;case 1:return new _e(Ue);case 2:return new _e(Ue,$e)}return new _e(Ue,$e,Ce)}return ue(_e,this,arguments)};return he.prototype=_e.prototype,he},En=function(_e,he){var Ue,$e,Ce,jt,tr,rr,fr,kr,Pr=_e.target,Rr=_e.global,$r=_e.stat,Hr=_e.proto,Gr=Rr?$:$r?$[Pr]:($[Pr]||{}).prototype,bn=Rr?_r:_r[Pr]||Ta(_r,Pr,{})[Pr],Sn=bn.prototype;for(Ce in he)Ue=!ys(Rr?Ce:Pr+($r?".":"#")+Ce,_e.forced)&&Gr&&vn(Gr,Ce),tr=bn[Ce],Ue&&(rr=_e.dontCallGetSet?(kr=O1(Gr,Ce))&&kr.value:Gr[Ce]),jt=Ue&&rr?rr:he[Ce],Ue&&typeof tr==typeof jt||(fr=_e.bind&&Ue?Go(jt,$):_e.wrap&&Ue?R1(jt):Hr&&Ve(jt)?Ie(jt):jt,(_e.sham||jt&&jt.sham||tr&&tr.sham)&&Ta(fr,"sham",!0),Ta(bn,Ce,fr),Hr&&(vn(_r,$e=Pr+"Prototype")||Ta(_r,$e,{}),Ta(_r[$e],Ce,jt),_e.real&&Sn&&!Sn[Ce]&&Ta(Sn,Ce,jt)))},B1=Math.ceil,L1=Math.floor,F1=Math.trunc||function(he){var Ue=+he;return(Ue>0?L1:B1)(Ue)},hc=function(_e){var he=+_e;return he!=he||he===0?0:F1(he)},$1=Math.max,j1=Math.min,Li=function(_e,he){var Ue=hc(_e);return Ue<0?$1(Ue+he,0):j1(Ue,he)},D1=Math.min,rs=function(_e){return(he=_e.length)>0?D1(hc(he),9007199254740991):0;var he},Dm=function(_e){return function(he,Ue,$e){var Ce,jt=wr(he),tr=rs(jt),rr=Li($e,tr);if(_e&&Ue!=Ue){for(;tr>rr;)if((Ce=jt[rr++])!=Ce)return!0}else for(;tr>rr;rr++)if((_e||rr in jt)&&jt[rr]===Ue)return _e||rr||0;return!_e&&-1}},fd={includes:Dm(!0),indexOf:Dm(!1)},Fi={},U1=fd.indexOf,Um=Ie([].push),Vm=function(_e,he){var Ue,$e=wr(_e),Ce=0,jt=[];for(Ue in $e)!vn(Fi,Ue)&&vn($e,Ue)&&Um(jt,Ue);for(;he.length>Ce;)vn($e,Ue=he[Ce++])&&(~U1(jt,Ue)||Um(jt,Ue));return jt},Il=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Us=Object.keys||function(he){return Vm(he,Il)},V1=kt&&!Bi?Object.defineProperties:function(he,Ue){po(he);for(var $e,Ce=wr(Ue),jt=Us(Ue),tr=jt.length,rr=0;tr>rr;)Ba.f(he,$e=jt[rr++],Ce[$e]);return he},qm={f:V1},md=Er("document","documentElement"),Hm=Un("keys"),El=function(_e){return Hm[_e]||(Hm[_e]=Vo(_e))},zm=El("IE_PROTO"),gd=function(){},Wm=function(_e){return"<script>"+_e+"<\/script>"},Gm=function(_e){_e.write(Wm("")),_e.close();var he=_e.parentWindow.Object;return _e=null,he},Pl=function(){try{Tr=new ActiveXObject("htmlfile")}catch{}var _e,he;Pl=typeof document<"u"?document.domain&&Tr?Gm(Tr):((he=ea("iframe")).style.display="none",md.appendChild(he),he.src="javascript:",(_e=he.contentWindow.document).open(),_e.write(Wm("document.F=Object")),_e.close(),_e.F):Gm(Tr);for(var Ue=Il.length;Ue--;)delete Pl.prototype[Il[Ue]];return Pl()};Fi[zm]=!0;var ns=Object.create||function(he,Ue){var $e;return he!==null?(gd.prototype=po(he),$e=new gd,gd.prototype=null,$e[zm]=he):$e=Pl(),Ue===void 0?$e:qm.f($e,Ue)};En({target:"Object",stat:!0,sham:!kt},{create:ns});var q1=_r.Object,ii=function(he,Ue){return q1.create(he,Ue)},H1=String,z1=TypeError,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var _e,he=!1,Ue={};try{(_e=Ie(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(Ue,[]),he=Ue instanceof Array}catch{}return function(Ce,jt){return po(Ce),function(tr){if(typeof tr=="object"||Ve(tr))return tr;throw z1("Can't set "+H1(tr)+" as a prototype")}(jt),he?_e(Ce,jt):Ce.__proto__=jt,Ce}}():void 0);En({target:"Object",stat:!0},{setPrototypeOf:vc});var ci=_r.Object.setPrototypeOf,Vs=Ie([].slice),Km=Function,W1=Ie([].concat),G1=Ie([].join),hd={},K1=function(_e,he,Ue){if(!vn(hd,he)){for(var $e=[],Ce=0;Ce<he;Ce++)$e[Ce]="a["+Ce+"]";hd[he]=Km("C,a","return new C("+G1($e,",")+")")}return hd[he](_e,Ue)},vd=z?Km.bind:function(he){var Ue=Xr(this),$e=Ue.prototype,Ce=Vs(arguments,1),jt=function(){var rr=W1(Ce,Vs(arguments));return this instanceof jt?K1(Ue,rr.length,rr):Ue.apply(he,rr)};return mr($e)&&(jt.prototype=$e),jt};En({target:"Function",proto:!0,forced:Function.bind!==vd},{bind:vd});var ua=function(_e){return _r[_e+"Prototype"]},Q1=ua("Function").bind,yd=Function.prototype,oa=function(_e){var he=_e.bind;return _e===yd||sr(yd,_e)&&he===yd.bind?Q1:he},bd=g(function(_e){function he(Ue,$e){var Ce;return _e.exports=he=ci?oa(Ce=ci).call(Ce):function(tr,rr){return tr.__proto__=rr,tr},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue,$e)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),ra=n(g(function(_e){_e.exports=function(Ue,$e){Ue.prototype=ii($e.prototype),Ue.prototype.constructor=Ue,bd(Ue,$e)},_e.exports.__esModule=!0,_e.exports.default=_e.exports}));En({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var yc={f:Object.getOwnPropertySymbols},$i=Object.assign,Qm=Object.defineProperty,J1=Ie([].concat),Jm=!$i||V(function(){if(kt&&$i({b:1},$i(Qm({},"a",{enumerable:!0,get:function(){Qm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var _e={},he={},Ue=Symbol(),$e="abcdefghijklmnopqrst";return _e[Ue]=7,$e.split("").forEach(function(Ce){he[Ce]=Ce}),$i({},_e)[Ue]!=7||Us($i({},he)).join("")!=$e})?function(he,Ue){for(var $e=Pn(he),Ce=arguments.length,jt=1,tr=yc.f,rr=er.f;Ce>jt;)for(var fr,kr=gr(arguments[jt++]),Pr=tr?J1(Us(kr),tr(kr)):Us(kr),Rr=Pr.length,$r=0;Rr>$r;)fr=Pr[$r++],kt&&!ze(rr,kr,fr)||($e[fr]=kr[fr]);return $e}:$i;En({target:"Object",stat:!0,arity:2,forced:Object.assign!==Jm},{assign:Jm});var zn,hu,Sd,Gn=_r.Object.assign,bc={},Al=$.WeakMap,Y1=Ve(Al)&&/native code/.test(String(Al)),vu="Object already initialized",Ym=$.TypeError,X1=$.WeakMap;if(Y1||wn.state){var Uc=wn.state||(wn.state=new X1),Z1=Ie(Uc.get),oy=Ie(Uc.has),ay=Ie(Uc.set);zn=function(_e,he){if(oy(Uc,_e))throw Ym(vu);return he.facade=_e,ay(Uc,_e,he),he},hu=function(_e){return Z1(Uc,_e)||{}},Sd=function(_e){return oy(Uc,_e)}}else{var yu=El("state");Fi[yu]=!0,zn=function(_e,he){if(vn(_e,yu))throw Ym(vu);return he.facade=_e,Ta(_e,yu,he),he},hu=function(_e){return vn(_e,yu)?_e[yu]:{}},Sd=function(_e){return vn(_e,yu)}}var Vc,sy,Yi,vi={set:zn,get:hu,has:Sd,enforce:function(_e){return Sd(_e)?hu(_e):zn(_e,{})},getterFor:function(_e){return function(he){var Ue;if(!mr(he)||(Ue=hu(he)).type!==_e)throw Ym("Incompatible receiver, "+_e+" required");return Ue}}},iy=Function.prototype,cy=kt&&Object.getOwnPropertyDescriptor,qp=vn(iy,"name"),Xm={EXISTS:qp,PROPER:qp&&(function(){}).name==="something",CONFIGURABLE:qp&&(!kt||kt&&cy(iy,"name").configurable)},ly=!V(function(){function _e(){}return _e.prototype.constructor=null,Object.getPrototypeOf(new _e)!==_e.prototype}),uy=El("IE_PROTO"),Zm=Object,Nl=Zm.prototype,bu=ly?Zm.getPrototypeOf:function(_e){var he=Pn(_e);if(vn(he,uy))return he[uy];var Ue=he.constructor;return Ve(Ue)&&he instanceof Ue?Ue.prototype:he instanceof Zm?Nl:null},ji=function(_e,he,Ue,$e){return $e&&$e.enumerable?_e[he]=Ue:Ta(_e,he,Ue),_e},eg=So("iterator"),Ol=!1;[].keys&&("next"in(Yi=[].keys())?(sy=bu(bu(Yi)))!==Object.prototype&&(Vc=sy):Ol=!0);var tg=!mr(Vc)||V(function(){var _e={};return Vc[eg].call(_e)!==_e});Vc=tg?{}:ns(Vc),Ve(Vc[eg])||ji(Vc,eg,function(){return this});var dy={IteratorPrototype:Vc,BUGGY_SAFARI_ITERATORS:Ol},Td={};Td[So("toStringTag")]="z";var Hp=String(Td)==="[object z]",ia=So("toStringTag"),eS=Object,li=nr(function(){return arguments}())=="Arguments",Rl=Hp?nr:function(_e){var he,Ue,$e;return _e===void 0?"Undefined":_e===null?"Null":typeof(Ue=function(Ce,jt){try{return Ce[jt]}catch{}}(he=eS(_e),ia))=="string"?Ue:li?nr(he):($e=nr(he))=="Object"&&Ve(he.callee)?"Arguments":$e},tS=Hp?{}.toString:function(){return"[object "+Rl(this)+"]"},rS=Ba.f,Cd=So("toStringTag"),Bl=function(_e,he,Ue,$e){if(_e){var Ce=Ue?_e:_e.prototype;vn(Ce,Cd)||rS(Ce,Cd,{configurable:!0,value:he}),$e&&!Hp&&Ta(Ce,"toString",tS)}},Md=dy.IteratorPrototype,rg=function(){return this},zp=Xm.PROPER,qc=dy.BUGGY_SAFARI_ITERATORS,Su=So("iterator"),ng="keys",Wp="values",og="entries",ag=function(){return this},sg=function(_e,he,Ue,$e,Ce,jt,tr){(function(An,kn,Kn,Qn){var To=kn+" Iterator";An.prototype=ns(Md,{next:or(+!Qn,Kn)}),Bl(An,To,!1,!0),bc[To]=rg})(Ue,he,$e);var rr,fr,kr,Pr=function(An){if(An===Ce&&bn)return bn;if(!qc&&An in Hr)return Hr[An];switch(An){case ng:return function(){return new Ue(this,An)};case Wp:return function(){return new Ue(this,An)};case og:return function(){return new Ue(this,An)}}return function(){return new Ue(this)}},Rr=he+" Iterator",$r=!1,Hr=_e.prototype,Gr=Hr[Su]||Hr["@@iterator"]||Ce&&Hr[Ce],bn=!qc&&Gr||Pr(Ce),Sn=he=="Array"&&Hr.entries||Gr;if(Sn&&(rr=bu(Sn.call(new _e)))!==Object.prototype&&rr.next&&(Bl(rr,Rr,!0,!0),bc[Rr]=ag),zp&&Ce==Wp&&Gr&&Gr.name!==Wp&&($r=!0,bn=function(){return ze(Gr,this)}),Ce)if(fr={values:Pr(Wp),keys:jt?bn:Pr(ng),entries:Pr(og)},tr)for(kr in fr)(qc||$r||!(kr in Hr))&&ji(Hr,kr,fr[kr]);else En({target:he,proto:!0,forced:qc||$r},fr);return tr&&Hr[Su]!==bn&&ji(Hr,Su,bn,{name:Ce}),bc[he]=bn,fr};Ba.f;var Hc="Array Iterator",nS=vi.set,py=vi.getterFor(Hc);sg(Array,"Array",function(_e,he){nS(this,{type:Hc,target:wr(_e),index:0,kind:he})},function(){var _e=py(this),he=_e.target,Ue=_e.kind,$e=_e.index++;return!he||$e>=he.length?(_e.target=void 0,{value:void 0,done:!0}):Ue=="keys"?{value:$e,done:!1}:Ue=="values"?{value:he[$e],done:!1}:{value:[$e,he[$e]],done:!1}},"values"),bc.Arguments=bc.Array;var fy=So("toStringTag");for(var zc in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Sc=$[zc],Gp=Sc&&Sc.prototype;Gp&&Rl(Gp)!==fy&&Ta(Gp,fy,zc),bc[zc]=bc.Array}var Xi=Array.isArray||function(he){return nr(he)=="Array"},yi=Ie(Function.toString);Ve(wn.inspectSource)||(wn.inspectSource=function(_e){return yi(_e)});var ig=wn.inspectSource,gy=function(){},cg=[],hy=Er("Reflect","construct"),Zi=/^\s*(?:class|function)\b/,lg=Ie(Zi.exec),vy=!Zi.exec(gy),kd=function(he){if(!Ve(he))return!1;try{return hy(gy,cg,he),!0}catch{return!1}},ug=function(he){if(!Ve(he))return!1;switch(Rl(he)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return vy||!!lg(Zi,ig(he))}catch{return!0}};ug.sham=!0;var Kp=!hy||V(function(){var _e;return kd(kd.call)||!kd(Object)||!kd(function(){_e=!0})||_e})?ug:kd,oS=So("species"),dg=Array,Tc=function(_e,he){return new(function(Ue){var $e;return Xi(Ue)&&($e=Ue.constructor,(Kp($e)&&($e===dg||Xi($e.prototype))||mr($e)&&($e=$e[oS])===null)&&($e=void 0)),$e===void 0?dg:$e}(_e))(he===0?0:he)},yy=Ie([].push),Wc=function(_e){var he=_e==1,Ue=_e==2,$e=_e==3,Ce=_e==4,jt=_e==6,tr=_e==7,rr=_e==5||jt;return function(fr,kr,Pr,Rr){for(var $r,Hr,Gr=Pn(fr),bn=gr(Gr),Sn=Go(kr,Pr),An=rs(bn),kn=0,Kn=Rr||Tc,Qn=he?Kn(fr,An):Ue||tr?Kn(fr,0):void 0;An>kn;kn++)if((rr||kn in bn)&&(Hr=Sn($r=bn[kn],kn,Gr),_e))if(he)Qn[kn]=Hr;else if(Hr)switch(_e){case 3:return!0;case 5:return $r;case 6:return kn;case 2:yy(Qn,$r)}else switch(_e){case 4:return!1;case 7:yy(Qn,$r)}return jt?-1:$e||Ce?Ce:Qn}},Gc={forEach:Wc(0),map:Wc(1),filter:Wc(2),some:Wc(3),every:Wc(4),find:Wc(5),findIndex:Wc(6),filterReject:Wc(7)},ec=function(_e,he){var Ue=[][_e];return!!Ue&&V(function(){Ue.call(null,he||function(){return 1},1)})},pg=Gc.forEach,fg=ec("forEach")?[].forEach:function(he){return pg(this,he,arguments.length>1?arguments[1]:void 0)};En({target:"Array",proto:!0,forced:[].forEach!=fg},{forEach:fg});var Qp=ua("Array").forEach,Jp=Array.prototype,aS={DOMTokenList:!0,NodeList:!0},yo=function(_e){var he=_e.forEach;return _e===Jp||sr(Jp,_e)&&he===Jp.forEach||vn(aS,Rl(_e))?Qp:he},by=So("species"),wd=function(_e){return Br>=51||!V(function(){var he=[];return(he.constructor={})[by]=function(){return{foo:1}},he[_e](Boolean).foo!==1})},sS=Gc.filter,tc=wd("filter");En({target:"Array",proto:!0,forced:!tc},{filter:function(he){return sS(this,he,arguments.length>1?arguments[1]:void 0)}});var Sy=ua("Array").filter,Yp=Array.prototype,bs=function(_e){var he=_e.filter;return _e===Yp||sr(Yp,_e)&&he===Yp.filter?Sy:he},mg=V(function(){Us(1)});En({target:"Object",stat:!0,forced:mg},{keys:function(he){return Us(Pn(he))}});var fa=_r.Object.keys,Ty=fd.indexOf,Xp=Ie([].indexOf),Cy=!!Xp&&1/Xp([1],1,-0)<0,My=ec("indexOf");En({target:"Array",proto:!0,forced:Cy||!My},{indexOf:function(he){var Ue=arguments.length>1?arguments[1]:void 0;return Cy?Xp(this,he,Ue)||0:Ty(this,he,Ue)}});var gg=ua("Array").indexOf,hg=Array.prototype,Ka=function(_e){var he=_e.indexOf;return _e===hg||sr(hg,_e)&&he===hg.indexOf?gg:he},Di=function(_e,he,Ue){var $e=pa(he);$e in _e?Ba.f(_e,$e,or(0,Ue)):_e[$e]=Ue},ky=wd("slice"),_d=So("species"),Kc=Array,wy=Math.max;En({target:"Array",proto:!0,forced:!ky},{slice:function(he,Ue){var $e,Ce,jt,tr=wr(this),rr=rs(tr),fr=Li(he,rr),kr=Li(Ue===void 0?rr:Ue,rr);if(Xi(tr)&&($e=tr.constructor,(Kp($e)&&($e===Kc||Xi($e.prototype))||mr($e)&&($e=$e[_d])===null)&&($e=void 0),$e===Kc||$e===void 0))return Vs(tr,fr,kr);for(Ce=new($e===void 0?Kc:$e)(wy(kr-fr,0)),jt=0;fr<kr;fr++,jt++)fr in tr&&Di(Ce,jt,tr[fr]);return Ce.length=jt,Ce}});var vg=ua("Array").slice,Tu=Array.prototype,xa=function(_e){var he=_e.slice;return _e===Tu||sr(Tu,_e)&&he===Tu.slice?vg:he},Zp=Il.concat("length","prototype"),xd={f:Object.getOwnPropertyNames||function(he){return Vm(he,Zp)}},Ui=Ie([].concat),iS=Er("Reflect","ownKeys")||function(he){var Ue=xd.f(po(he)),$e=yc.f;return $e?Ui(Ue,$e(he)):Ue},yg=Error,_y=Ie("".replace),bg=String(yg("zxcasd").stack),ef=/\n\s*at [^:]*:[^\n]*/,cS=ef.test(bg),Sg=function(_e,he){if(cS&&typeof _e=="string"&&!yg.prepareStackTrace)for(;he--;)_e=_y(_e,ef,"");return _e},lS=function(_e,he){mr(he)&&"cause"in he&&Ta(_e,"cause",he.cause)},xy=So("iterator"),uS=Array.prototype,tf=function(_e){return _e!==void 0&&(bc.Array===_e||uS[xy]===_e)},Id=So("iterator"),rf=function(_e){if(!pr(_e))return Vn(_e,Id)||Vn(_e,"@@iterator")||bc[Rl(_e)]},Tg=TypeError,Cu=function(_e,he){var Ue=arguments.length<2?rf(_e):he;if(Xr(Ue))return po(ze(Ue,_e));throw Tg(Tn(_e)+" is not iterable")},nf=function(_e,he,Ue){var $e,Ce;po(_e);try{if(!($e=Vn(_e,"return"))){if(he==="throw")throw Ue;return Ue}$e=ze($e,_e)}catch(jt){Ce=!0,$e=jt}if(he==="throw")throw Ue;if(Ce)throw $e;return po($e),Ue},Iy=TypeError,Qc=function(_e,he){this.stopped=_e,this.result=he},Jc=Qc.prototype,ja=function(_e,he,Ue){var $e,Ce,jt,tr,rr,fr,kr,Pr=Ue&&Ue.that,Rr=!(!Ue||!Ue.AS_ENTRIES),$r=!(!Ue||!Ue.IS_RECORD),Hr=!(!Ue||!Ue.IS_ITERATOR),Gr=!(!Ue||!Ue.INTERRUPTED),bn=Go(he,Pr),Sn=function(kn){return $e&&nf($e,"normal",kn),new Qc(!0,kn)},An=function(kn){return Rr?(po(kn),Gr?bn(kn[0],kn[1],Sn):bn(kn[0],kn[1])):Gr?bn(kn,Sn):bn(kn)};if($r)$e=_e.iterator;else if(Hr)$e=_e;else{if(!(Ce=rf(_e)))throw Iy(Tn(_e)+" is not iterable");if(tf(Ce)){for(jt=0,tr=rs(_e);tr>jt;jt++)if((rr=An(_e[jt]))&&sr(Jc,rr))return rr;return new Qc(!1)}$e=Cu(_e,Ce)}for(fr=$r?_e.next:$e.next;!(kr=ze(fr,$e)).done;){try{rr=An(kr.value)}catch(kn){nf($e,"throw",kn)}if(typeof rr=="object"&&rr&&sr(Jc,rr))return rr}return new Qc(!1)},Mu=String,Zs=function(_e){if(Rl(_e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Mu(_e)},Cg=function(_e,he){return _e===void 0?arguments.length<2?"":he:Zs(_e)},Mg=!V(function(){var _e=Error("a");return!("stack"in _e)||(Object.defineProperty(_e,"stack",or(1,7)),_e.stack!==7)}),Ey=So("toStringTag"),Ed=Error,dS=[].push,Pd=function(he,Ue){var $e,Ce=arguments.length>2?arguments[2]:void 0,jt=sr(kg,this);vc?$e=vc(Ed(),jt?bu(this):kg):($e=jt?this:ns(kg),Ta($e,Ey,"Error")),Ue!==void 0&&Ta($e,"message",Cg(Ue)),Mg&&Ta($e,"stack",Sg($e.stack,1)),lS($e,Ce);var tr=[];return ja(he,dS,{that:tr}),Ta($e,"errors",tr),$e};vc?vc(Pd,Ed):function(_e,he,Ue){for(var $e=iS(he),Ce=Ba.f,jt=$a.f,tr=0;tr<$e.length;tr++){var rr=$e[tr];vn(_e,rr)||Ue&&vn(Ue,rr)||Ce(_e,rr,jt(he,rr))}}(Pd,Ed,{name:!0});var kg=Pd.prototype=ns(Ed.prototype,{constructor:or(1,Pd),message:or(1,""),name:or(1,"AggregateError")});En({global:!0,constructor:!0,arity:2},{AggregateError:Pd});var Ll,Fl,wg,of,ui=nr($.process)=="process",_g=So("species"),xg=function(_e){var he=Er(_e),Ue=Ba.f;kt&&he&&!he[_g]&&Ue(he,_g,{configurable:!0,get:function(){return this}})},Ig=TypeError,Yc=function(_e,he){if(sr(he,_e))return _e;throw Ig("Incorrect invocation")},Py=TypeError,ku=function(_e){if(Kp(_e))return _e;throw Py(Tn(_e)+" is not a constructor")},Ay=So("species"),Ad=function(_e,he){var Ue,$e=po(_e).constructor;return $e===void 0||pr(Ue=po($e)[Ay])?he:ku(Ue)},qs=TypeError,Eg=function(_e,he){if(_e<he)throw qs("Not enough arguments");return _e},Ny=/(?:ipad|iphone|ipod).*applewebkit/i.test(xr),af=$.setImmediate,Pg=$.clearImmediate,Oy=$.process,sf=$.Dispatch,pS=$.Function,$l=$.MessageChannel,fS=$.String,Ag=0,di={},Ry="onreadystatechange";try{Ll=$.location}catch{}var wu=function(_e){if(vn(di,_e)){var he=di[_e];delete di[_e],he()}},cf=function(_e){return function(){wu(_e)}},By=function(_e){wu(_e.data)},lf=function(_e){$.postMessage(fS(_e),Ll.protocol+"//"+Ll.host)};af&&Pg||(af=function(he){Eg(arguments.length,1);var Ue=Ve(he)?he:pS(he),$e=Vs(arguments,1);return di[++Ag]=function(){ue(Ue,void 0,$e)},Fl(Ag),Ag},Pg=function(he){delete di[he]},ui?Fl=function(_e){Oy.nextTick(cf(_e))}:sf&&sf.now?Fl=function(_e){sf.now(cf(_e))}:$l&&!Ny?(of=(wg=new $l).port2,wg.port1.onmessage=By,Fl=Go(of.postMessage,of)):$.addEventListener&&Ve($.postMessage)&&!$.importScripts&&Ll&&Ll.protocol!=="file:"&&!V(lf)?(Fl=lf,$.addEventListener("message",By,!1)):Fl=Ry in ea("script")?function(_e){md.appendChild(ea("script")).onreadystatechange=function(){md.removeChild(this),wu(_e)}}:function(_e){setTimeout(cf(_e),0)});var Nd,jl,Cc,Xc,uf,Od,Rd,df,Ly={set:af,clear:Pg},mS=/ipad|iphone|ipod/i.test(xr)&&$.Pebble!==void 0,Fy=/web0s(?!.*chrome)/i.test(xr),$y=$a.f,pf=Ly.set,Ng=$.MutationObserver||$.WebKitMutationObserver,Og=$.document,jy=$.process,Bd=$.Promise,Dy=$y($,"queueMicrotask"),Dl=Dy&&Dy.value;Dl||(Nd=function(){var _e,he;for(ui&&(_e=jy.domain)&&_e.exit();jl;){he=jl.fn,jl=jl.next;try{he()}catch(Ue){throw jl?Xc():Cc=void 0,Ue}}Cc=void 0,_e&&_e.enter()},Ny||ui||Fy||!Ng||!Og?!mS&&Bd&&Bd.resolve?((Rd=Bd.resolve(void 0)).constructor=Bd,df=Go(Rd.then,Rd),Xc=function(){df(Nd)}):ui?Xc=function(){jy.nextTick(Nd)}:(pf=Go(pf,$),Xc=function(){pf(Nd)}):(uf=!0,Od=Og.createTextNode(""),new Ng(Nd).observe(Od,{characterData:!0}),Xc=function(){Od.data=uf=!uf}));var Zc=Dl||function(_e){var he={fn:_e,next:void 0};Cc&&(Cc.next=he),jl||(jl=he,Xc()),Cc=he},el=function(_e){try{return{error:!1,value:_e()}}catch(he){return{error:!0,value:he}}},Rg=function(){this.head=null,this.tail=null};Rg.prototype={add:function(_e){var he={item:_e,next:null};this.head?this.tail.next=he:this.head=he,this.tail=he},get:function(){var _e=this.head;if(_e)return this.head=_e.next,this.tail===_e&&(this.tail=null),_e.item}};var ff,Uy,Vy=Rg,Ns=$.Promise,Bg=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",gS=!Bg&&!ui&&typeof window=="object"&&typeof document=="object",mf=Ns&&Ns.prototype,hS=So("species"),qy=!1,Hy=Ve($.PromiseRejectionEvent),zy=ys("Promise",function(){var _e=ig(Ns),he=_e!==String(Ns);if(!he&&Br===66||!mf.catch||!mf.finally)return!0;if(!Br||Br<51||!/native code/.test(_e)){var Ue=new Ns(function(Ce){Ce(1)}),$e=function(Ce){Ce(function(){},function(){})};if((Ue.constructor={})[hS]=$e,!(qy=Ue.then(function(){})instanceof $e))return!0}return!he&&(gS||Bg)&&!Hy}),_u={CONSTRUCTOR:zy,REJECTION_EVENT:Hy,SUBCLASSING:qy},vS=TypeError,yS=function(_e){var he,Ue;this.promise=new _e(function($e,Ce){if(he!==void 0||Ue!==void 0)throw vS("Bad Promise constructor");he=$e,Ue=Ce}),this.resolve=Xr(he),this.reject=Xr(Ue)},rc={f:function(_e){return new yS(_e)}},Wy=Ly.set,Ld="Promise",Gy=_u.CONSTRUCTOR,Ky=_u.REJECTION_EVENT,Lg=vi.getterFor(Ld),bS=vi.set,SS=Ns&&Ns.prototype,xu=Ns,Fd=SS,Fg=$.TypeError,$d=$.document,$g=$.process,ca=rc.f,Qy=ca,TS=!!($d&&$d.createEvent&&$.dispatchEvent),_s="unhandledrejection",nc=function(_e){var he;return!(!mr(_e)||!Ve(he=_e.then))&&he},Jy=function(_e,he){var Ue,$e,Ce,jt=he.value,tr=he.state==1,rr=tr?_e.ok:_e.fail,fr=_e.resolve,kr=_e.reject,Pr=_e.domain;try{rr?(tr||(he.rejection===2&&Dg(he),he.rejection=1),rr===!0?Ue=jt:(Pr&&Pr.enter(),Ue=rr(jt),Pr&&(Pr.exit(),Ce=!0)),Ue===_e.promise?kr(Fg("Promise-chain cycle")):($e=nc(Ue))?ze($e,Ue,fr,kr):fr(Ue)):kr(jt)}catch(Rr){Pr&&!Ce&&Pr.exit(),kr(Rr)}},gf=function(_e,he){_e.notified||(_e.notified=!0,Zc(function(){for(var Ue,$e=_e.reactions;Ue=$e.get();)Jy(Ue,_e);_e.notified=!1,he&&!_e.rejection&&CS(_e)}))},tl=function(_e,he,Ue){var $e,Ce;TS?(($e=$d.createEvent("Event")).promise=he,$e.reason=Ue,$e.initEvent(_e,!1,!0),$.dispatchEvent($e)):$e={promise:he,reason:Ue},!Ky&&(Ce=$["on"+_e])?Ce($e):_e===_s&&function(jt,tr){var rr=$.console;rr&&rr.error&&(arguments.length==1?rr.error(jt):rr.error(jt,tr))}("Unhandled promise rejection",Ue)},CS=function(_e){ze(Wy,$,function(){var he,Ue=_e.facade,$e=_e.value;if(jg(_e)&&(he=el(function(){ui?$g.emit("unhandledRejection",$e,Ue):tl(_s,Ue,$e)}),_e.rejection=ui||jg(_e)?2:1,he.error))throw he.value})},jg=function(_e){return _e.rejection!==1&&!_e.parent},Dg=function(_e){ze(Wy,$,function(){var he=_e.facade;ui?$g.emit("rejectionHandled",he):tl("rejectionhandled",he,_e.value)})},Iu=function(_e,he,Ue){return function($e){_e(he,$e,Ue)}},oc=function(_e,he,Ue){_e.done||(_e.done=!0,Ue&&(_e=Ue),_e.value=he,_e.state=2,gf(_e,!0))},hf=function(_e,he,Ue){if(!_e.done){_e.done=!0,Ue&&(_e=Ue);try{if(_e.facade===he)throw Fg("Promise can't be resolved itself");var $e=nc(he);$e?Zc(function(){var Ce={done:!1};try{ze($e,he,Iu(hf,Ce,_e),Iu(oc,Ce,_e))}catch(jt){oc(Ce,jt,_e)}}):(_e.value=he,_e.state=1,gf(_e,!1))}catch(Ce){oc({done:!1},Ce,_e)}}};Gy&&(Fd=(xu=function(he){Yc(this,Fd),Xr(he),ze(ff,this);var Ue=Lg(this);try{he(Iu(hf,Ue),Iu(oc,Ue))}catch($e){oc(Ue,$e)}}).prototype,(ff=function(he){bS(this,{type:Ld,done:!1,notified:!1,parent:!1,reactions:new Vy,rejection:!1,state:0,value:void 0})}).prototype=ji(Fd,"then",function(he,Ue){var $e=Lg(this),Ce=ca(Ad(this,xu));return $e.parent=!0,Ce.ok=!Ve(he)||he,Ce.fail=Ve(Ue)&&Ue,Ce.domain=ui?$g.domain:void 0,$e.state==0?$e.reactions.add(Ce):Zc(function(){Jy(Ce,$e)}),Ce.promise}),Uy=function(){var _e=new ff,he=Lg(_e);this.promise=_e,this.resolve=Iu(hf,he),this.reject=Iu(oc,he)},rc.f=ca=function(_e){return _e===xu||_e===void 0?new Uy(_e):Qy(_e)}),En({global:!0,constructor:!0,wrap:!0,forced:Gy},{Promise:xu}),Bl(xu,Ld,!1,!0),xg(Ld);var Yy=So("iterator"),Xy=!1;try{var MS=0,Zy={next:function(){return{done:!!MS++}},return:function(){Xy=!0}};Zy[Yy]=function(){return this},Array.from(Zy,function(){throw 2})}catch{}var vf=function(_e,he){if(!he&&!Xy)return!1;var Ue=!1;try{var $e={};$e[Yy]=function(){return{next:function(){return{done:Ue=!0}}}},_e($e)}catch{}return Ue},Hs=_u.CONSTRUCTOR||!vf(function(_e){Ns.all(_e).then(void 0,function(){})});En({target:"Promise",stat:!0,forced:Hs},{all:function(he){var Ue=this,$e=rc.f(Ue),Ce=$e.resolve,jt=$e.reject,tr=el(function(){var rr=Xr(Ue.resolve),fr=[],kr=0,Pr=1;ja(he,function(Rr){var $r=kr++,Hr=!1;Pr++,ze(rr,Ue,Rr).then(function(Gr){Hr||(Hr=!0,fr[$r]=Gr,--Pr||Ce(fr))},jt)}),--Pr||Ce(fr)});return tr.error&&jt(tr.value),$e.promise}});var kS=_u.CONSTRUCTOR;Ns&&Ns.prototype,En({target:"Promise",proto:!0,forced:kS,real:!0},{catch:function(_e){return this.then(void 0,_e)}}),En({target:"Promise",stat:!0,forced:Hs},{race:function(he){var Ue=this,$e=rc.f(Ue),Ce=$e.reject,jt=el(function(){var tr=Xr(Ue.resolve);ja(he,function(rr){ze(tr,Ue,rr).then($e.resolve,Ce)})});return jt.error&&Ce(jt.value),$e.promise}}),En({target:"Promise",stat:!0,forced:_u.CONSTRUCTOR},{reject:function(he){var Ue=rc.f(this);return ze(Ue.reject,void 0,he),Ue.promise}});var Ug=function(_e,he){if(po(_e),mr(he)&&he.constructor===_e)return he;var Ue=rc.f(_e);return(0,Ue.resolve)(he),Ue.promise},eb=_u.CONSTRUCTOR,tb=Er("Promise"),rb=!eb;En({target:"Promise",stat:!0,forced:!0},{resolve:function(he){return Ug(rb&&this===tb?Ns:this,he)}}),En({target:"Promise",stat:!0},{allSettled:function(he){var Ue=this,$e=rc.f(Ue),Ce=$e.resolve,jt=$e.reject,tr=el(function(){var rr=Xr(Ue.resolve),fr=[],kr=0,Pr=1;ja(he,function(Rr){var $r=kr++,Hr=!1;Pr++,ze(rr,Ue,Rr).then(function(Gr){Hr||(Hr=!0,fr[$r]={status:"fulfilled",value:Gr},--Pr||Ce(fr))},function(Gr){Hr||(Hr=!0,fr[$r]={status:"rejected",reason:Gr},--Pr||Ce(fr))})}),--Pr||Ce(fr)});return tr.error&&jt(tr.value),$e.promise}});var Vg="No one promise resolved";En({target:"Promise",stat:!0},{any:function(he){var Ue=this,$e=Er("AggregateError"),Ce=rc.f(Ue),jt=Ce.resolve,tr=Ce.reject,rr=el(function(){var fr=Xr(Ue.resolve),kr=[],Pr=0,Rr=1,$r=!1;ja(he,function(Hr){var Gr=Pr++,bn=!1;Rr++,ze(fr,Ue,Hr).then(function(Sn){bn||$r||($r=!0,jt(Sn))},function(Sn){bn||$r||(bn=!0,kr[Gr]=Sn,--Rr||tr(new $e(kr,Vg)))})}),--Rr||tr(new $e(kr,Vg))});return rr.error&&tr(rr.value),Ce.promise}});var Vi=Ns&&Ns.prototype,qg=!!Ns&&V(function(){Vi.finally.call({then:function(){}},function(){})});En({target:"Promise",proto:!0,real:!0,forced:qg},{finally:function(_e){var he=Ad(this,Er("Promise")),Ue=Ve(_e);return this.then(Ue?function($e){return Ug(he,_e()).then(function(){return $e})}:_e,Ue?function($e){return Ug(he,_e()).then(function(){throw $e})}:_e)}});var nb=Ie("".charAt),ob=Ie("".charCodeAt),jd=Ie("".slice),Hg=function(_e){return function(he,Ue){var $e,Ce,jt=Zs(Cr(he)),tr=hc(Ue),rr=jt.length;return tr<0||tr>=rr?_e?"":void 0:($e=ob(jt,tr))<55296||$e>56319||tr+1===rr||(Ce=ob(jt,tr+1))<56320||Ce>57343?_e?nb(jt,tr):$e:_e?jd(jt,tr,tr+2):Ce-56320+($e-55296<<10)+65536}},rl={codeAt:Hg(!1),charAt:Hg(!0)}.charAt,Mc="String Iterator",Ul=vi.set,wS=vi.getterFor(Mc);sg(String,"String",function(_e){Ul(this,{type:Mc,string:Zs(_e),index:0})},function(){var he,Ue=wS(this),$e=Ue.string,Ce=Ue.index;return Ce>=$e.length?{value:void 0,done:!0}:(he=rl($e,Ce),Ue.index+=he.length,{value:he,done:!1})});var ab=_r.Promise;En({target:"Promise",stat:!0,forced:!0},{try:function(_e){var he=rc.f(this),Ue=el(_e);return(Ue.error?he.reject:he.resolve)(Ue.value),he.promise}});var Ca=ab,yf=Date,_S=Ie(yf.prototype.getTime);En({target:"Date",stat:!0},{now:function(){return _S(new yf)}});var bo=_r.Date.now,xS=TypeError,ba=function(_e){if(_e>9007199254740991)throw xS("Maximum allowed index exceeded");return _e},sb=So("isConcatSpreadable"),IS=Br>=51||!V(function(){var _e=[];return _e[sb]=!1,_e.concat()[0]!==_e}),ES=wd("concat"),zg=function(_e){if(!mr(_e))return!1;var he=_e[sb];return he!==void 0?!!he:Xi(_e)};En({target:"Array",proto:!0,arity:1,forced:!IS||!ES},{concat:function(he){var Ue,$e,Ce,jt,tr,rr=Pn(this),fr=Tc(rr,0),kr=0;for(Ue=-1,Ce=arguments.length;Ue<Ce;Ue++)if(zg(tr=Ue===-1?rr:arguments[Ue]))for(jt=rs(tr),ba(kr+jt),$e=0;$e<jt;$e++,kr++)$e in tr&&Di(fr,kr,tr[$e]);else ba(kr+1),Di(fr,kr++,tr);return fr.length=kr,fr}});var pi=ua("Array").concat,Wg=Array.prototype,Os=function(_e){var he=_e.concat;return _e===Wg||sr(Wg,_e)&&he===Wg.concat?pi:he},Gg=/MSIE .\./.test(xr),PS=$.Function,ib=function(_e){return Gg?function(he,Ue){var $e=Eg(arguments.length,1)>2,Ce=Ve(he)?he:PS(he),jt=$e?Vs(arguments,2):void 0;return _e($e?function(){ue(Ce,this,jt)}:Ce,Ue)}:_e},bf={setTimeout:ib($.setTimeout),setInterval:ib($.setInterval)},Da=bf.setInterval;En({global:!0,bind:!0,forced:$.setInterval!==Da},{setInterval:Da});var cb=bf.setTimeout;En({global:!0,bind:!0,forced:$.setTimeout!==cb},{setTimeout:cb});var bi=_r.setTimeout,Sf=g(function(_e){var he=Object.prototype.hasOwnProperty,Ue="~";function $e(){}function Ce(fr,kr,Pr){this.fn=fr,this.context=kr,this.once=Pr||!1}function jt(fr,kr,Pr,Rr,$r){if(typeof Pr!="function")throw new TypeError("The listener must be a function");var Hr=new Ce(Pr,Rr||fr,$r),Gr=Ue?Ue+kr:kr;return fr._events[Gr]?fr._events[Gr].fn?fr._events[Gr]=[fr._events[Gr],Hr]:fr._events[Gr].push(Hr):(fr._events[Gr]=Hr,fr._eventsCount++),fr}function tr(fr,kr){--fr._eventsCount==0?fr._events=new $e:delete fr._events[kr]}function rr(){this._events=new $e,this._eventsCount=0}Object.create&&($e.prototype=Object.create(null),new $e().__proto__||(Ue=!1)),rr.prototype.eventNames=function(){var kr,Pr,Rr=[];if(this._eventsCount===0)return Rr;for(Pr in kr=this._events)he.call(kr,Pr)&&Rr.push(Ue?Pr.slice(1):Pr);return Object.getOwnPropertySymbols?Rr.concat(Object.getOwnPropertySymbols(kr)):Rr},rr.prototype.listeners=function(kr){var Pr=Ue?Ue+kr:kr,Rr=this._events[Pr];if(!Rr)return[];if(Rr.fn)return[Rr.fn];for(var $r=0,Hr=Rr.length,Gr=new Array(Hr);$r<Hr;$r++)Gr[$r]=Rr[$r].fn;return Gr},rr.prototype.listenerCount=function(kr){var Pr=Ue?Ue+kr:kr,Rr=this._events[Pr];return Rr?Rr.fn?1:Rr.length:0},rr.prototype.emit=function(kr,Pr,Rr,$r,Hr,Gr){var bn=Ue?Ue+kr:kr;if(!this._events[bn])return!1;var Sn,An,kn=this._events[bn],Kn=arguments.length;if(kn.fn){switch(kn.once&&this.removeListener(kr,kn.fn,void 0,!0),Kn){case 1:return kn.fn.call(kn.context),!0;case 2:return kn.fn.call(kn.context,Pr),!0;case 3:return kn.fn.call(kn.context,Pr,Rr),!0;case 4:return kn.fn.call(kn.context,Pr,Rr,$r),!0;case 5:return kn.fn.call(kn.context,Pr,Rr,$r,Hr),!0;case 6:return kn.fn.call(kn.context,Pr,Rr,$r,Hr,Gr),!0}for(An=1,Sn=new Array(Kn-1);An<Kn;An++)Sn[An-1]=arguments[An];kn.fn.apply(kn.context,Sn)}else{var Qn,To=kn.length;for(An=0;An<To;An++)switch(kn[An].once&&this.removeListener(kr,kn[An].fn,void 0,!0),Kn){case 1:kn[An].fn.call(kn[An].context);break;case 2:kn[An].fn.call(kn[An].context,Pr);break;case 3:kn[An].fn.call(kn[An].context,Pr,Rr);break;case 4:kn[An].fn.call(kn[An].context,Pr,Rr,$r);break;default:if(!Sn)for(Qn=1,Sn=new Array(Kn-1);Qn<Kn;Qn++)Sn[Qn-1]=arguments[Qn];kn[An].fn.apply(kn[An].context,Sn)}}return!0},rr.prototype.on=function(kr,Pr,Rr){return jt(this,kr,Pr,Rr,!1)},rr.prototype.once=function(kr,Pr,Rr){return jt(this,kr,Pr,Rr,!0)},rr.prototype.removeListener=function(kr,Pr,Rr,$r){var Hr=Ue?Ue+kr:kr;if(!this._events[Hr])return this;if(!Pr)return tr(this,Hr),this;var Gr=this._events[Hr];if(Gr.fn)Gr.fn!==Pr||$r&&!Gr.once||Rr&&Gr.context!==Rr||tr(this,Hr);else{for(var bn=0,Sn=[],An=Gr.length;bn<An;bn++)(Gr[bn].fn!==Pr||$r&&!Gr[bn].once||Rr&&Gr[bn].context!==Rr)&&Sn.push(Gr[bn]);Sn.length?this._events[Hr]=Sn.length===1?Sn[0]:Sn:tr(this,Hr)}return this},rr.prototype.removeAllListeners=function(kr){var Pr;return kr?(Pr=Ue?Ue+kr:kr,this._events[Pr]&&tr(this,Pr)):(this._events=new $e,this._eventsCount=0),this},rr.prototype.off=rr.prototype.removeListener,rr.prototype.addListener=rr.prototype.on,rr.prefixed=Ue,rr.EventEmitter=rr,_e.exports=rr});En({global:!0},{globalThis:$});var Tf=Ba.f;En({target:"Object",stat:!0,forced:Object.defineProperty!==Tf,sham:!kt},{defineProperty:Tf});var lb=g(function(_e){var he=_r.Object,Ue=_e.exports=function(Ce,jt,tr){return he.defineProperty(Ce,jt,tr)};he.defineProperty.sham&&(Ue.sham=!0)}),Eu=lb,Kg=g(function(_e,he){_e.exports=function(){function Ue(fr,kr){if(!(fr instanceof kr))throw new TypeError("Cannot call a class as a function")}function $e(fr,kr){for(var Pr=0;Pr<kr.length;Pr++){var Rr=kr[Pr];Rr.enumerable=Rr.enumerable||!1,Rr.configurable=!0,"value"in Rr&&(Rr.writable=!0),Eu(fr,Rr.key,Rr)}}function Ce(fr,kr,Pr){return kr&&$e(fr.prototype,kr),Pr&&$e(fr,Pr),Eu(fr,"prototype",{writable:!1}),fr}var jt={isDataReportEnable:!0,maxSize:100,msgListMaxSize:1e3,cacheMaxSize:1e3,maxDelay:3e5,maxInterval:3e4,minInterval:1e4,timeout:5e3,autoStart:!0},tr=function(){},rr=function(){function fr(kr){Ue(this,fr),this.isUploadEnable=!1,this.initConfigLoaded=!1,this.loading=!1,this.isDestroyed=!1,this.reportConfig=jt,this.traceMsgCache={},this.highPriorityMsgList=[],this.msgList=[],this.lowPriorityMsgList=[],this.cacheMsgList=[],this.lastReportTime=bo(),this.timer=null,this.setConfig(kr),this.reportConfig.isDataReportEnable&&this.reportConfig.autoStart&&this.initUploadConfig()}return Ce(fr,[{key:"setConfig",value:function(Pr){var Rr=Gn({},this.reportConfig.common,Pr.common);this.reportConfig=Gn({},this.reportConfig,Pr),this.reportConfig.common=Rr,this.reportConfig.common.sdk_type||(this.reportConfig.common.sdk_type="im")}},{key:"reportImmediately",value:function(Pr,Rr){var $r=this;this.reportConfig.isDataReportEnable&&this.reportConfig.request(Pr,Gn({dataType:"json",method:"POST",timeout:this.reportConfig.timeout},Rr)).catch(function(Hr){var Gr,bn;(bn=(Gr=$r.reportConfig)===null||Gr===void 0?void 0:Gr.logger)===null||bn===void 0||bn.warn("Reporter immediately upload failed",Hr)})}},{key:"report",value:function(Pr,Rr){var $r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if($r.priority||($r.priority=this.getEventPriority(Pr,Rr)),this.reportConfig.isDataReportEnable&&Pr){var Hr=bo();$r.priority==="HIGH"?this.highPriorityMsgList.push({module:Pr,msg:Rr,createTime:Hr}):$r.priority==="NORMAL"?this.msgList.push({module:Pr,msg:Rr,createTime:Hr}):$r.priority==="LOW"&&this.lowPriorityMsgList.push({module:Pr,msg:Rr,createTime:Hr}),this.highPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.highPriorityMsgList.shift(),this.msgList.length>this.reportConfig.msgListMaxSize&&this.msgList.shift(),this.lowPriorityMsgList.length>this.reportConfig.msgListMaxSize&&this.lowPriorityMsgList.shift(),this.doReport()}}},{key:"reportTraceStart",value:function(Pr,Rr){if(this.reportConfig.isDataReportEnable&&Pr&&!this.traceMsgCache[Pr]){var $r=Gn(Gn({start_time:bo()},Rr),{extension:[]});this.traceMsgCache[Pr]=$r}}},{key:"reportTraceUpdate",value:function(Pr){}},{key:"reportTraceUpdateV2",value:function(Pr,Rr,$r){var Hr,Gr=this;if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Pr]){var bn=this.traceMsgCache[Pr].extension,Sn=bn.length,An=new Date().getTime();Sn===0?Rr.duration=An-this.traceMsgCache[Pr].start_time:bn[Sn-1].end_time?Rr.duration=An-bn[Sn-1].end_time:Rr.duration=An-this.traceMsgCache[Pr].start_time,bn.push(Gn({end_time:An},Rr));var kn=bn.length-1;$r!=null&&$r.asyncParams&&((Hr=this.traceMsgCache[Pr]).asyncPromiseArray||(Hr.asyncPromiseArray=[]),this.traceMsgCache[Pr].asyncPromiseArray.push($r.asyncParams.then(function(Kn){Gr.traceMsgCache[Pr]&&Gr.traceMsgCache[Pr].extension[kn]&&Gn(Gr.traceMsgCache[Pr].extension[kn],Kn)})))}}},{key:"reportTraceEnd",value:function(Pr){var Rr,$r=this,Hr=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reportConfig.isDataReportEnable&&this.traceMsgCache[Pr])if(Pr!=="nos"||Hr===!1)if(typeof Hr=="boolean"?this.traceMsgCache[Pr].succeed=!!Hr:this.traceMsgCache[Pr].state=Hr,this.traceMsgCache[Pr].duration=bo()-this.traceMsgCache[Pr].start_time,yo(Rr=this.traceMsgCache[Pr].extension).call(Rr,function(Sn){delete Sn.end_time}),this.traceMsgCache[Pr].asyncPromiseArray){var Gr=this.traceMsgCache[Pr],bn=function(){Gr===$r.traceMsgCache[Pr]&&(delete $r.traceMsgCache[Pr].asyncPromiseArray,$r.report(Pr,$r.traceMsgCache[Pr],{priority:$r.getEventPriority(Pr,$r.traceMsgCache[Pr])}),$r.traceMsgCache[Pr]=null)};Ca.all(this.traceMsgCache[Pr].asyncPromiseArray).then(bn).catch(bn)}else this.report(Pr,this.traceMsgCache[Pr],{priority:this.getEventPriority(Pr,this.traceMsgCache[Pr])}),this.traceMsgCache[Pr]=null;else this.traceMsgCache[Pr]=null}},{key:"getEventPriority",value:function(Pr,Rr){if(Pr==="exceptions"){if(Rr.action===0||Rr.action===2||Rr.action===1&&Rr.exception_service!==0)return"HIGH"}else if(Pr==="msgReceive"||Pr==="nim_api_trace")return"LOW";return"NORMAL"}},{key:"reportTraceCancel",value:function(Pr){this.reportConfig.isDataReportEnable&&(this.traceMsgCache[Pr]=null)}},{key:"pause",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!1)}},{key:"restore",value:function(){this.reportConfig.isDataReportEnable&&(this.isUploadEnable=!0,this.initConfigLoaded||this.initUploadConfig())}},{key:"destroy",value:function(){var Pr,Rr=this;this.reportConfig.isDataReportEnable&&(yo(Pr=fa(this.traceMsgCache)).call(Pr,function($r){Rr.reportTraceEnd($r,1)}),this.timer!==null&&clearTimeout(this.timer),this.setConfig=tr,this.report=tr,this.reportTraceStart=tr,this.reportTraceUpdate=tr,this.reportTraceEnd=tr,this.pause=tr,this.restore=tr,this.destroy=tr,this.cacheMsgList=[],this.traceMsgCache={},this.lowPriorityMsgList=[],this.msgList=[],this.highPriorityMsgList=[],this.reportConfig={},this.isDestroyed=!0)}},{key:"initUploadConfig",value:function(){var Pr,Rr,$r=this;if(!this.loading){this.loading=!0;var Hr=this.reportConfig.common||{};try{this.reportConfig.request(this.reportConfig.reportConfigUrl,{method:"GET",dataType:"json",params:{deviceId:Hr.dev_id,sdkVer:Hr.sdk_ver,platform:Hr.platform,appkey:Hr.app_key},timeout:this.reportConfig.timeout}).then(function(Gr){var bn,Sn;if(!$r.isDestroyed){if(Gr.status===200&&Gr.data&&Gr.data.code===200){var An=Gr.data.data||{};$r.reportConfig.maxSize=An.maxSize>1e3?1e3:An.maxSize,$r.reportConfig.maxInterval=An.maxInterval>1e4?1e4:An.maxInterval,$r.reportConfig.maxInterval=An.maxInterval<10?10:An.maxInterval,$r.reportConfig.minInterval=An.minInterval<2?2:An.minInterval,$r.reportConfig.maxDelay=An.maxDelay||300,$r.reportConfig.maxInterval=1e3*$r.reportConfig.maxInterval,$r.reportConfig.minInterval=1e3*$r.reportConfig.minInterval,$r.reportConfig.maxDelay=1e3*$r.reportConfig.maxDelay,$r.isUploadEnable=!0,$r.initConfigLoaded=!0,$r.loading=!1,$r.reportHeartBeat()}(Sn=(bn=$r.reportConfig)===null||bn===void 0?void 0:bn.logger)===null||Sn===void 0||Sn.log("Get reporter upload config success")}}).catch(function(Gr){var bn,Sn;$r.loading=!1,(Sn=(bn=$r.reportConfig)===null||bn===void 0?void 0:bn.logger)===null||Sn===void 0||Sn.error("Get reporter upload config failed",Gr)})}catch(Gr){this.loading=!1,(Rr=(Pr=this.reportConfig)===null||Pr===void 0?void 0:Pr.logger)===null||Rr===void 0||Rr.error("Exec reporter request failed",Gr)}}}},{key:"reportHeartBeat",value:function(){var Pr=this;this.isDestroyed||(this.timer=bi(function(){Pr.reportHeartBeat()},this.reportConfig.minInterval),this.doReport())}},{key:"doReport",value:function(){if(!this.isDestroyed){var Pr=this.highPriorityMsgList.length+this.msgList.length+this.lowPriorityMsgList.length+this.cacheMsgList.length>2*this.reportConfig.maxSize?this.reportConfig.minInterval:this.reportConfig.maxInterval;bo()-this.lastReportTime>=Pr&&this.upload()}}},{key:"getUploadMsg",value:function(){var Pr,Rr,$r,Hr,Gr,bn,Sn=this,An={},kn=bo();this.highPriorityMsgList=bs(Pr=this.highPriorityMsgList).call(Pr,function(Rn){return kn-Rn.createTime<Sn.reportConfig.maxDelay}),this.msgList=bs(Rr=this.msgList).call(Rr,function(Rn){return kn-Rn.createTime<Sn.reportConfig.maxDelay}),this.lowPriorityMsgList=bs($r=this.lowPriorityMsgList).call($r,function(Rn){return kn-Rn.createTime<Sn.reportConfig.maxDelay}),this.cacheMsgList=bs(Hr=this.cacheMsgList).call(Hr,function(Rn){return kn-Rn.createTime<Sn.reportConfig.maxDelay});var Kn=xa(Gr=this.highPriorityMsgList).call(Gr,0,this.reportConfig.maxSize);if(this.highPriorityMsgList=xa(bn=this.highPriorityMsgList).call(bn,Kn.length),Kn.length<this.reportConfig.maxSize){var Qn,To,Eo=this.reportConfig.maxSize-Kn.length;Kn=Os(Kn).call(Kn,xa(Qn=this.msgList).call(Qn,0,Eo)),this.msgList=xa(To=this.msgList).call(To,Eo)}if(Kn.length<this.reportConfig.maxSize){var Ko,Ln,Wr=this.reportConfig.maxSize-Kn.length;Kn=Os(Kn).call(Kn,xa(Ko=this.lowPriorityMsgList).call(Ko,0,Wr)),this.lowPriorityMsgList=xa(Ln=this.lowPriorityMsgList).call(Ln,Wr)}if(Kn.length<this.reportConfig.maxSize){var ro,so,Yn=this.reportConfig.maxSize-Kn.length;Kn=Os(Kn).call(Kn,xa(ro=this.cacheMsgList).call(ro,0,Yn)),this.cacheMsgList=xa(so=this.cacheMsgList).call(so,Yn)}return yo(Kn).call(Kn,function(Rn){An[Rn.module]?An[Rn.module].push(Rn.msg):An[Rn.module]=[Rn.msg]}),{uploadMsgArr:Kn,uploadMsg:An}}},{key:"upload",value:function(){var Pr,Rr,$r=this;if(this.isUploadEnable&&!(this.lastReportTime&&bo()-this.lastReportTime<this.reportConfig.minInterval)){var Hr=this.getUploadMsg(),Gr=Hr.uploadMsgArr,bn=Hr.uploadMsg;if(Gr.length){this.lastReportTime=bo();try{this.reportConfig.request(this.reportConfig.reportUrl,{dataType:"json",method:"POST",data:{common:this.reportConfig.common,event:bn},headers:{sdktype:"im"},timeout:this.reportConfig.timeout}).catch(function(Sn){var An,kn,Kn,Qn;$r.cacheMsgList=xa(An=Os(kn=$r.cacheMsgList).call(kn,Gr)).call(An,0,$r.reportConfig.cacheMaxSize),(Qn=(Kn=$r.reportConfig)===null||Kn===void 0?void 0:Kn.logger)===null||Qn===void 0||Qn.warn("Reporter upload failed",Sn)})}catch(Sn){(Rr=(Pr=this.reportConfig)===null||Pr===void 0?void 0:Pr.logger)===null||Rr===void 0||Rr.warn("Exec reporter request failed",Sn)}clearTimeout(this.timer),this.reportHeartBeat()}}}}]),fr}();return rr}()}),ac=Er("JSON","stringify"),Cf=Ie(/./.exec),os=Ie("".charAt),ub=Ie("".charCodeAt),Mf=Ie("".replace),ei=Ie(1 .toString),kf=/[\uD800-\uDFFF]/g,db=/^[\uD800-\uDBFF]$/,Qg=/^[\uDC00-\uDFFF]$/,Si=!Lr||V(function(){var _e=Er("Symbol")();return ac([_e])!="[null]"||ac({a:_e})!="{}"||ac(Object(_e))!="{}"}),nl=V(function(){return ac("\uDF06\uD834")!=='"\\udf06\\ud834"'||ac("\uDEAD")!=='"\\udead"'}),Dd=function(_e,he){var Ue=Vs(arguments),$e=he;if((mr(he)||_e!==void 0)&&!Vr(_e))return Xi(he)||(he=function(Ce,jt){if(Ve($e)&&(jt=ze($e,this,Ce,jt)),!Vr(jt))return jt}),Ue[1]=he,ue(ac,null,Ue)},AS=function(_e,he,Ue){var $e=os(Ue,he-1),Ce=os(Ue,he+1);return Cf(db,_e)&&!Cf(Qg,Ce)||Cf(Qg,_e)&&!Cf(db,$e)?"\\u"+ei(ub(_e,0),16):_e};ac&&En({target:"JSON",stat:!0,arity:3,forced:Si||nl},{stringify:function(he,Ue,$e){var Ce=Vs(arguments),jt=ue(Si?Dd:ac,null,Ce);return nl&&typeof jt=="string"?Mf(jt,kf,AS):jt}}),_r.JSON||(_r.JSON={stringify:JSON.stringify});var Jg=function(he,Ue,$e){return ue(_r.JSON.stringify,null,arguments)},ha=Jg,ol=Array,pb=Math.max,Yg=function(_e,he,Ue){for(var $e=rs(_e),Ce=Li(he,$e),jt=Li(Ue===void 0?$e:Ue,$e),tr=ol(pb(jt-Ce,0)),rr=0;Ce<jt;Ce++,rr++)Di(tr,rr,_e[Ce]);return tr.length=rr,tr},Xg=xd.f,sc=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Vl={f:function(he){return sc&&nr(he)=="Window"?function(Ue){try{return Xg(Ue)}catch{return Yg(sc)}}(he):Xg(wr(he))}},Zg={f:So},eh=Ba.f,Xa=function(_e){var he=_r.Symbol||(_r.Symbol={});vn(he,_e)||eh(he,_e,{value:Zg.f(_e)})},wf=function(){var _e=Er("Symbol"),he=_e&&_e.prototype,Ue=he&&he.valueOf,$e=So("toPrimitive");he&&!he[$e]&&ji(he,$e,function(Ce){return ze(Ue,this)},{arity:1})},ql=Gc.forEach,Rs=El("hidden"),Ud="Symbol",fb=vi.set,th=vi.getterFor(Ud),Ti=Object.prototype,al=$.Symbol,Hl=al&&al.prototype,NS=$.TypeError,_f=$.QObject,kc=$a.f,qi=Ba.f,rh=Vl.f,OS=er.f,mb=Ie([].push),wc=Un("symbols"),Vd=Un("op-symbols"),gb=Un("wks"),xf=!_f||!_f.prototype||!_f.prototype.findChild,If=kt&&V(function(){return ns(qi({},"a",{get:function(){return qi(this,"a",{value:7}).a}})).a!=7})?function(_e,he,Ue){var $e=kc(Ti,he);$e&&delete Ti[he],qi(_e,he,Ue),$e&&_e!==Ti&&qi(Ti,he,$e)}:qi,Ef=function(_e,he){var Ue=wc[_e]=ns(Hl);return fb(Ue,{type:Ud,tag:_e,description:he}),kt||(Ue.description=he),Ue},Pf=function(he,Ue,$e){he===Ti&&Pf(Vd,Ue,$e),po(he);var Ce=pa(Ue);return po($e),vn(wc,Ce)?($e.enumerable?(vn(he,Rs)&&he[Rs][Ce]&&(he[Rs][Ce]=!1),$e=ns($e,{enumerable:or(0,!1)})):(vn(he,Rs)||qi(he,Rs,or(1,{})),he[Rs][Ce]=!0),If(he,Ce,$e)):qi(he,Ce,$e)},nh=function(he,Ue){po(he);var $e=wr(Ue),Ce=Us($e).concat(oh($e));return ql(Ce,function(jt){kt&&!ze(hb,$e,jt)||Pf(he,jt,$e[jt])}),he},hb=function(he){var Ue=pa(he),$e=ze(OS,this,Ue);return!(this===Ti&&vn(wc,Ue)&&!vn(Vd,Ue))&&(!($e||!vn(this,Ue)||!vn(wc,Ue)||vn(this,Rs)&&this[Rs][Ue])||$e)},vb=function(he,Ue){var $e=wr(he),Ce=pa(Ue);if($e!==Ti||!vn(wc,Ce)||vn(Vd,Ce)){var jt=kc($e,Ce);return!jt||!vn(wc,Ce)||vn($e,Rs)&&$e[Rs][Ce]||(jt.enumerable=!0),jt}},zs=function(he){var Ue=rh(wr(he)),$e=[];return ql(Ue,function(Ce){vn(wc,Ce)||vn(Fi,Ce)||mb($e,Ce)}),$e},oh=function(_e){var he=_e===Ti,Ue=rh(he?Vd:wr(_e)),$e=[];return ql(Ue,function(Ce){!vn(wc,Ce)||he&&!vn(Ti,Ce)||mb($e,wc[Ce])}),$e};Lr||(al=function(){if(sr(Hl,this))throw NS("Symbol is not a constructor");var he=arguments.length&&arguments[0]!==void 0?Zs(arguments[0]):void 0,Ue=Vo(he),$e=function(Ce){this===Ti&&ze($e,Vd,Ce),vn(this,Rs)&&vn(this[Rs],Ue)&&(this[Rs][Ue]=!1),If(this,Ue,or(1,Ce))};return kt&&xf&&If(Ti,Ue,{configurable:!0,set:$e}),Ef(Ue,he)},Hl=al.prototype,ji(Hl,"toString",function(){return th(this).tag}),ji(al,"withoutSetter",function(_e){return Ef(Vo(_e),_e)}),er.f=hb,Ba.f=Pf,qm.f=nh,$a.f=vb,xd.f=Vl.f=zs,yc.f=oh,Zg.f=function(_e){return Ef(So(_e),_e)},kt&&qi(Hl,"description",{configurable:!0,get:function(){return th(this).description}})),En({global:!0,constructor:!0,wrap:!0,forced:!Lr,sham:!Lr},{Symbol:al}),ql(Us(gb),function(_e){Xa(_e)}),En({target:Ud,stat:!0,forced:!Lr},{useSetter:function(){xf=!0},useSimple:function(){xf=!1}}),En({target:"Object",stat:!0,forced:!Lr,sham:!kt},{create:function(he,Ue){return Ue===void 0?ns(he):nh(ns(he),Ue)},defineProperty:Pf,defineProperties:nh,getOwnPropertyDescriptor:vb}),En({target:"Object",stat:!0,forced:!Lr},{getOwnPropertyNames:zs}),wf(),Bl(al,Ud),Fi[Rs]=!0;var yb=Lr&&!!Symbol.for&&!!Symbol.keyFor,ah=Un("string-to-symbol-registry"),zl=Un("symbol-to-string-registry");En({target:"Symbol",stat:!0,forced:!yb},{for:function(_e){var he=Zs(_e);if(vn(ah,he))return ah[he];var Ue=Er("Symbol")(he);return ah[he]=Ue,zl[Ue]=he,Ue}});var bb=Un("symbol-to-string-registry");En({target:"Symbol",stat:!0,forced:!yb},{keyFor:function(he){if(!Vr(he))throw TypeError(Tn(he)+" is not a symbol");if(vn(bb,he))return bb[he]}});var Sb=!Lr||V(function(){yc.f(1)});En({target:"Object",stat:!0,forced:Sb},{getOwnPropertySymbols:function(he){var Ue=yc.f;return Ue?Ue(Pn(he)):[]}}),Xa("asyncIterator"),Xa("hasInstance"),Xa("isConcatSpreadable"),Xa("iterator"),Xa("match"),Xa("matchAll"),Xa("replace"),Xa("search"),Xa("species"),Xa("split"),Xa("toPrimitive"),wf(),Xa("toStringTag"),Bl(Er("Symbol"),"Symbol"),Xa("unscopables"),Bl($.JSON,"JSON",!0);var RS=_r.Symbol;Xa("asyncDispose"),Xa("dispose"),Xa("matcher"),Xa("metadataKey"),Xa("observable"),Xa("metadata"),Xa("patternMatch"),Xa("replaceAll");var xs=RS,qd=Zg.f("iterator"),BS=g(function(_e){function he(Ue){return _e.exports=he=typeof xs=="function"&&typeof qd=="symbol"?function($e){return typeof $e}:function($e){return $e&&typeof xs=="function"&&$e.constructor===xs&&$e!==xs.prototype?"symbol":typeof $e},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Af=V(function(){bu(1)});En({target:"Object",stat:!0,forced:Af,sham:!ly},{getPrototypeOf:function(he){return bu(Pn(he))}});var Dr=_r.Object.getPrototypeOf,LS=Ie([].reverse),Io=[1,2];En({target:"Array",proto:!0,forced:String(Io)===String(Io.reverse())},{reverse:function(){return Xi(this)&&(this.length=this.length),LS(this)}});var FS=ua("Array").reverse,Hd=Array.prototype,Nf=function(_e){var he=_e.reverse;return _e===Hd||sr(Hd,_e)&&he===Hd.reverse?FS:he},$S=g(function(_e){var he=BS.default;function Ue(){_e.exports=Ue=function(){return $e},_e.exports.__esModule=!0,_e.exports.default=_e.exports;var $e={},Ce=Object.prototype,jt=Ce.hasOwnProperty,tr=typeof xs=="function"?xs:{},rr=tr.iterator||"@@iterator",fr=tr.asyncIterator||"@@asyncIterator",kr=tr.toStringTag||"@@toStringTag";function Pr(Yn,Rn,co){return Eu(Yn,Rn,{value:co,enumerable:!0,configurable:!0,writable:!0}),Yn[Rn]}try{Pr({},"")}catch{Pr=function(co,uo,Mo){return co[uo]=Mo}}function Rr(Yn,Rn,co,uo){var Mo=Rn&&Rn.prototype instanceof Gr?Rn:Gr,_o=ii(Mo.prototype),ga=new Wr(uo||[]);return _o._invoke=function(Xo,fs,Uo){var Zo="suspendedStart";return function(Pa,xl){if(Zo==="executing")throw new Error("Generator is already running");if(Zo==="completed"){if(Pa==="throw")throw xl;return so()}for(Uo.method=Pa,Uo.arg=xl;;){var na=Uo.delegate;if(na){var jc=Eo(na,Uo);if(jc){if(jc===Hr)continue;return jc}}if(Uo.method==="next")Uo.sent=Uo._sent=Uo.arg;else if(Uo.method==="throw"){if(Zo==="suspendedStart")throw Zo="completed",Uo.arg;Uo.dispatchException(Uo.arg)}else Uo.method==="return"&&Uo.abrupt("return",Uo.arg);Zo="executing";var vs=$r(Xo,fs,Uo);if(vs.type==="normal"){if(Zo=Uo.done?"completed":"suspendedYield",vs.arg===Hr)continue;return{value:vs.arg,done:Uo.done}}vs.type==="throw"&&(Zo="completed",Uo.method="throw",Uo.arg=vs.arg)}}}(Yn,co,ga),_o}function $r(Yn,Rn,co){try{return{type:"normal",arg:Yn.call(Rn,co)}}catch(uo){return{type:"throw",arg:uo}}}$e.wrap=Rr;var Hr={};function Gr(){}function bn(){}function Sn(){}var An={};Pr(An,rr,function(){return this});var kn=Dr&&Dr(Dr(ro([])));kn&&kn!==Ce&&jt.call(kn,rr)&&(An=kn);var Kn=Sn.prototype=Gr.prototype=ii(An);function Qn(Yn){var Rn;yo(Rn=["next","throw","return"]).call(Rn,function(co){Pr(Yn,co,function(uo){return this._invoke(co,uo)})})}function To(Yn,Rn){function co(Mo,_o,ga,Xo){var fs=$r(Yn[Mo],Yn,_o);if(fs.type!=="throw"){var Uo=fs.arg,Zo=Uo.value;return Zo&&he(Zo)=="object"&&jt.call(Zo,"__await")?Rn.resolve(Zo.__await).then(function(Pa){co("next",Pa,ga,Xo)},function(Pa){co("throw",Pa,ga,Xo)}):Rn.resolve(Zo).then(function(Pa){Uo.value=Pa,ga(Uo)},function(Pa){return co("throw",Pa,ga,Xo)})}Xo(fs.arg)}var uo;this._invoke=function(Mo,_o){function ga(){return new Rn(function(Xo,fs){co(Mo,_o,Xo,fs)})}return uo=uo?uo.then(ga,ga):ga()}}function Eo(Yn,Rn){var co=Yn.iterator[Rn.method];if(co===void 0){if(Rn.delegate=null,Rn.method==="throw"){if(Yn.iterator.return&&(Rn.method="return",Rn.arg=void 0,Eo(Yn,Rn),Rn.method==="throw"))return Hr;Rn.method="throw",Rn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Hr}var uo=$r(co,Yn.iterator,Rn.arg);if(uo.type==="throw")return Rn.method="throw",Rn.arg=uo.arg,Rn.delegate=null,Hr;var Mo=uo.arg;return Mo?Mo.done?(Rn[Yn.resultName]=Mo.value,Rn.next=Yn.nextLoc,Rn.method!=="return"&&(Rn.method="next",Rn.arg=void 0),Rn.delegate=null,Hr):Mo:(Rn.method="throw",Rn.arg=new TypeError("iterator result is not an object"),Rn.delegate=null,Hr)}function Ko(Yn){var Rn={tryLoc:Yn[0]};1 in Yn&&(Rn.catchLoc=Yn[1]),2 in Yn&&(Rn.finallyLoc=Yn[2],Rn.afterLoc=Yn[3]),this.tryEntries.push(Rn)}function Ln(Yn){var Rn=Yn.completion||{};Rn.type="normal",delete Rn.arg,Yn.completion=Rn}function Wr(Yn){this.tryEntries=[{tryLoc:"root"}],yo(Yn).call(Yn,Ko,this),this.reset(!0)}function ro(Yn){if(Yn){var Rn=Yn[rr];if(Rn)return Rn.call(Yn);if(typeof Yn.next=="function")return Yn;if(!isNaN(Yn.length)){var co=-1,uo=function Mo(){for(;++co<Yn.length;)if(jt.call(Yn,co))return Mo.value=Yn[co],Mo.done=!1,Mo;return Mo.value=void 0,Mo.done=!0,Mo};return uo.next=uo}}return{next:so}}function so(){return{value:void 0,done:!0}}return bn.prototype=Sn,Pr(Kn,"constructor",Sn),Pr(Sn,"constructor",bn),bn.displayName=Pr(Sn,kr,"GeneratorFunction"),$e.isGeneratorFunction=function(Yn){var Rn=typeof Yn=="function"&&Yn.constructor;return!!Rn&&(Rn===bn||(Rn.displayName||Rn.name)==="GeneratorFunction")},$e.mark=function(Yn){return ci?ci(Yn,Sn):(Yn.__proto__=Sn,Pr(Yn,kr,"GeneratorFunction")),Yn.prototype=ii(Kn),Yn},$e.awrap=function(Yn){return{__await:Yn}},Qn(To.prototype),Pr(To.prototype,fr,function(){return this}),$e.AsyncIterator=To,$e.async=function(Yn,Rn,co,uo,Mo){Mo===void 0&&(Mo=Ca);var _o=new To(Rr(Yn,Rn,co,uo),Mo);return $e.isGeneratorFunction(Rn)?_o:_o.next().then(function(ga){return ga.done?ga.value:_o.next()})},Qn(Kn),Pr(Kn,kr,"Generator"),Pr(Kn,rr,function(){return this}),Pr(Kn,"toString",function(){return"[object Generator]"}),$e.keys=function(Yn){var Rn=[];for(var co in Yn)Rn.push(co);return Nf(Rn).call(Rn),function uo(){for(;Rn.length;){var Mo=Rn.pop();if(Mo in Yn)return uo.value=Mo,uo.done=!1,uo}return uo.done=!0,uo}},$e.values=ro,Wr.prototype={constructor:Wr,reset:function(Rn){var co;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,yo(co=this.tryEntries).call(co,Ln),!Rn)for(var uo in this)uo.charAt(0)==="t"&&jt.call(this,uo)&&!isNaN(+xa(uo).call(uo,1))&&(this[uo]=void 0)},stop:function(){this.done=!0;var Rn=this.tryEntries[0].completion;if(Rn.type==="throw")throw Rn.arg;return this.rval},dispatchException:function(Rn){if(this.done)throw Rn;var co=this;function uo(Uo,Zo){return ga.type="throw",ga.arg=Rn,co.next=Uo,Zo&&(co.method="next",co.arg=void 0),!!Zo}for(var Mo=this.tryEntries.length-1;Mo>=0;--Mo){var _o=this.tryEntries[Mo],ga=_o.completion;if(_o.tryLoc==="root")return uo("end");if(_o.tryLoc<=this.prev){var Xo=jt.call(_o,"catchLoc"),fs=jt.call(_o,"finallyLoc");if(Xo&&fs){if(this.prev<_o.catchLoc)return uo(_o.catchLoc,!0);if(this.prev<_o.finallyLoc)return uo(_o.finallyLoc)}else if(Xo){if(this.prev<_o.catchLoc)return uo(_o.catchLoc,!0)}else{if(!fs)throw new Error("try statement without catch or finally");if(this.prev<_o.finallyLoc)return uo(_o.finallyLoc)}}}},abrupt:function(Rn,co){for(var uo=this.tryEntries.length-1;uo>=0;--uo){var Mo=this.tryEntries[uo];if(Mo.tryLoc<=this.prev&&jt.call(Mo,"finallyLoc")&&this.prev<Mo.finallyLoc){var _o=Mo;break}}_o&&(Rn==="break"||Rn==="continue")&&_o.tryLoc<=co&&co<=_o.finallyLoc&&(_o=null);var ga=_o?_o.completion:{};return ga.type=Rn,ga.arg=co,_o?(this.method="next",this.next=_o.finallyLoc,Hr):this.complete(ga)},complete:function(Rn,co){if(Rn.type==="throw")throw Rn.arg;return Rn.type==="break"||Rn.type==="continue"?this.next=Rn.arg:Rn.type==="return"?(this.rval=this.arg=Rn.arg,this.method="return",this.next="end"):Rn.type==="normal"&&co&&(this.next=co),Hr},finish:function(Rn){for(var co=this.tryEntries.length-1;co>=0;--co){var uo=this.tryEntries[co];if(uo.finallyLoc===Rn)return this.complete(uo.completion,uo.afterLoc),Ln(uo),Hr}},catch:function(Rn){for(var co=this.tryEntries.length-1;co>=0;--co){var uo=this.tryEntries[co];if(uo.tryLoc===Rn){var Mo=uo.completion;if(Mo.type==="throw"){var _o=Mo.arg;Ln(uo)}return _o}}throw new Error("illegal catch attempt")},delegateYield:function(Rn,co,uo){return this.delegate={iterator:ro(Rn),resultName:co,nextLoc:uo},this.method==="next"&&(this.arg=void 0),Hr}},$e}_e.exports=Ue,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Of=$S(),Kr=Of;try{regeneratorRuntime=Of}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Of:Function("r","regeneratorRuntime = r")(Of)}function ta(_e,he){var Ue={};for(var $e in _e)Object.prototype.hasOwnProperty.call(_e,$e)&&he.indexOf($e)<0&&(Ue[$e]=_e[$e]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ce=0;for($e=Object.getOwnPropertySymbols(_e);Ce<$e.length;Ce++)he.indexOf($e[Ce])<0&&Object.prototype.propertyIsEnumerable.call(_e,$e[Ce])&&(Ue[$e[Ce]]=_e[$e[Ce]])}return Ue}function qn(_e,he,Ue,$e){return new(Ue||(Ue=Promise))(function(Ce,jt){function tr(kr){try{fr($e.next(kr))}catch(Pr){jt(Pr)}}function rr(kr){try{fr($e.throw(kr))}catch(Pr){jt(Pr)}}function fr(kr){kr.done?Ce(kr.value):function(Rr){return Rr instanceof Ue?Rr:new Ue(function($r){$r(Rr)})}(kr.value).then(tr,rr)}fr(($e=$e.apply(_e,he||[])).next())})}var ti=Array.isArray,zd=typeof e=="object"&&e&&e.Object===Object&&e,jS=typeof self=="object"&&self&&self.Object===Object&&self,ic=zd||jS||Function("return this")(),ri=ic.Symbol,sh=Object.prototype,DS=sh.hasOwnProperty,Wd=sh.toString,Pu=ri?ri.toStringTag:void 0,Tb=function(he){var Ue=DS.call(he,Pu),$e=he[Pu];try{he[Pu]=void 0;var Ce=!0}catch{}var jt=Wd.call(he);return Ce&&(Ue?he[Pu]=$e:delete he[Pu]),jt},Cb=Object.prototype.toString,US=function(he){return Cb.call(he)},ih=ri?ri.toStringTag:void 0,ma=function(he){return he==null?he===void 0?"[object Undefined]":"[object Null]":ih&&ih in Object(he)?Tb(he):US(he)},Hi=function(he){return he!=null&&typeof he=="object"},Rf=function(he){return typeof he=="symbol"||Hi(he)&&ma(he)=="[object Symbol]"},Bf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mb=/^\w*$/,Lf=function(he,Ue){if(ti(he))return!1;var $e=typeof he;return!($e!="number"&&$e!="symbol"&&$e!="boolean"&&he!=null&&!Rf(he))||Mb.test(he)||!Bf.test(he)||Ue!=null&&he in Object(Ue)},ni=function(he){var Ue=typeof he;return he!=null&&(Ue=="object"||Ue=="function")},ch=function(he){if(!ni(he))return!1;var Ue=ma(he);return Ue=="[object Function]"||Ue=="[object GeneratorFunction]"||Ue=="[object AsyncFunction]"||Ue=="[object Proxy]"},lh=ic["__core-js_shared__"],kb=function(){var _e=/[^.]+$/.exec(lh&&lh.keys&&lh.keys.IE_PROTO||"");return _e?"Symbol(src)_1."+_e:""}(),VS=function(he){return!!kb&&kb in he},qS=Function.prototype.toString,Wl=function(he){if(he!=null){try{return qS.call(he)}catch{}try{return he+""}catch{}}return""},HS=/^\[object .+?Constructor\]$/,zS=Function.prototype,WS=Object.prototype,GS=zS.toString,uh=WS.hasOwnProperty,dh=RegExp("^"+GS.call(uh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ci=function(he){return!(!ni(he)||VS(he))&&(ch(he)?dh:HS).test(Wl(he))},KS=function(he,Ue){return he==null?void 0:he[Ue]},Gl=function(he,Ue){var $e=KS(he,Ue);return Ci($e)?$e:void 0},Gd=Gl(Object,"create"),ph=function(){this.__data__=Gd?Gd(null):{},this.size=0},Kd=function(he){var Ue=this.has(he)&&delete this.__data__[he];return this.size-=Ue?1:0,Ue},Qd=Object.prototype.hasOwnProperty,hn=function(he){var Ue=this.__data__;if(Gd){var $e=Ue[he];return $e==="__lodash_hash_undefined__"?void 0:$e}return Qd.call(Ue,he)?Ue[he]:void 0},fh=Object.prototype.hasOwnProperty,QS=function(he){var Ue=this.__data__;return Gd?Ue[he]!==void 0:fh.call(Ue,he)},Jd=function(he,Ue){var $e=this.__data__;return this.size+=this.has(he)?0:1,$e[he]=Gd&&Ue===void 0?"__lodash_hash_undefined__":Ue,this};function _c(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.clear();++he<Ue;){var $e=_e[he];this.set($e[0],$e[1])}}_c.prototype.clear=ph,_c.prototype.delete=Kd,_c.prototype.get=hn,_c.prototype.has=QS,_c.prototype.set=Jd;var wb=_c,JS=function(){this.__data__=[],this.size=0},Yd=function(he,Ue){return he===Ue||he!=he&&Ue!=Ue},Ff=function(he,Ue){for(var $e=he.length;$e--;)if(Yd(he[$e][0],Ue))return $e;return-1},YS=Array.prototype.splice,Au=function(he){var Ue=this.__data__,$e=Ff(Ue,he);return!($e<0)&&($e==Ue.length-1?Ue.pop():YS.call(Ue,$e,1),--this.size,!0)},$f=function(he){var Ue=this.__data__,$e=Ff(Ue,he);return $e<0?void 0:Ue[$e][1]},XS=function(he){return Ff(this.__data__,he)>-1},ZS=function(he,Ue){var $e=this.__data__,Ce=Ff($e,he);return Ce<0?(++this.size,$e.push([he,Ue])):$e[Ce][1]=Ue,this};function Nu(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.clear();++he<Ue;){var $e=_e[he];this.set($e[0],$e[1])}}Nu.prototype.clear=JS,Nu.prototype.delete=Au,Nu.prototype.get=$f,Nu.prototype.has=XS,Nu.prototype.set=ZS;var jf=Nu,Ou=Gl(ic,"Map"),eT=function(){this.size=0,this.__data__={hash:new wb,map:new(Ou||jf),string:new wb}},zi=function(he){var Ue=typeof he;return Ue=="string"||Ue=="number"||Ue=="symbol"||Ue=="boolean"?he!=="__proto__":he===null},fi=function(he,Ue){var $e=he.__data__;return zi(Ue)?$e[typeof Ue=="string"?"string":"hash"]:$e.map},_b=function(he){var Ue=fi(this,he).delete(he);return this.size-=Ue?1:0,Ue},tT=function(he){return fi(this,he).get(he)},rT=function(he){return fi(this,he).has(he)},Xd=function(he,Ue){var $e=fi(this,he),Ce=$e.size;return $e.set(he,Ue),this.size+=$e.size==Ce?0:1,this};function Ru(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.clear();++he<Ue;){var $e=_e[he];this.set($e[0],$e[1])}}Ru.prototype.clear=eT,Ru.prototype.delete=_b,Ru.prototype.get=tT,Ru.prototype.has=rT,Ru.prototype.set=Xd;var Df=Ru;function mh(_e,he){if(typeof _e!="function"||he!=null&&typeof he!="function")throw new TypeError("Expected a function");var Ue=function(){var $e=arguments,Ce=he?he.apply(this,$e):$e[0],jt=Ue.cache;if(jt.has(Ce))return jt.get(Ce);var tr=_e.apply(this,$e);return Ue.cache=jt.set(Ce,tr)||jt,tr};return Ue.cache=new(mh.Cache||Df),Ue}mh.Cache=Df;var xb=mh,sl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oi=/\\(\\)?/g,gh=function(he){var Ue=xb(he,function(Ce){return $e.size===500&&$e.clear(),Ce}),$e=Ue.cache;return Ue}(function(_e){var he=[];return _e.charCodeAt(0)===46&&he.push(""),_e.replace(sl,function(Ue,$e,Ce,jt){he.push(Ce?jt.replace(oi,"$1"):$e||Ue)}),he}),hh=gh,Uf=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length,jt=Array(Ce);++$e<Ce;)jt[$e]=Ue(he[$e],$e,he);return jt},Ib=ri?ri.prototype:void 0,Eb=Ib?Ib.toString:void 0,Kl=function _e(he){if(typeof he=="string")return he;if(ti(he))return Uf(he,_e)+"";if(Rf(he))return Eb?Eb.call(he):"";var Ue=he+"";return Ue=="0"&&1/he==-1/0?"-0":Ue},nT=function(he){return he==null?"":Kl(he)},Vf=function(he,Ue){return ti(he)?he:Lf(he,Ue)?[he]:hh(nT(he))},Zd=function(he){if(typeof he=="string"||Rf(he))return he;var Ue=he+"";return Ue=="0"&&1/he==-1/0?"-0":Ue},vh=function(he,Ue){for(var $e=0,Ce=(Ue=Vf(Ue,he)).length;he!=null&&$e<Ce;)he=he[Zd(Ue[$e++])];return $e&&$e==Ce?he:void 0},Bs=function(he,Ue,$e){var Ce=he==null?void 0:vh(he,Ue);return Ce===void 0?$e:Ce},Ls=function(){function _e(he,Ue){this.name=he,this.core=Ue,this.name=he,this.logger=Ue.logger,this.core=Ue}return _e.prototype.process=function(Ue){var $e=this[Ue.cmd+"Handler"];return typeof $e=="function"?$e.call(this,Ue):Ue.error&&!Ue.error.ignore?Ca.reject(Ue.error):Ca.resolve(Ue)},_e}(),oT=Gc.map,aT=wd("map");En({target:"Array",proto:!0,forced:!aT},{map:function(he){return oT(this,he,arguments.length>1?arguments[1]:void 0)}});var Ql=ua("Array").map,Jl=Array.prototype,Oo=function(_e){var he=_e.map;return _e===Jl||sr(Jl,_e)&&he===Jl.map?Ql:he},sT=fd.includes,iT=V(function(){return!Array(1).includes()});En({target:"Array",proto:!0,forced:iT},{includes:function(he){return sT(this,he,arguments.length>1?arguments[1]:void 0)}});var cT=ua("Array").includes,lT=So("match"),uT=TypeError,dT=function(_e){if(function(he){var Ue;return mr(he)&&((Ue=he[lT])!==void 0?!!Ue:nr(he)=="RegExp")}(_e))throw uT("The method doesn't accept regular expressions");return _e},pT=So("match"),Bu=Ie("".indexOf);En({target:"String",proto:!0,forced:!function(_e){var he=/./;try{"/./"[_e](he)}catch{try{return he[pT]=!1,"/./"[_e](he)}catch{}}return!1}("includes")},{includes:function(he){return!!~Bu(Zs(Cr(this)),Zs(dT(he)),arguments.length>1?arguments[1]:void 0)}});var Pb=ua("String").includes,yh=Array.prototype,bh=String.prototype,mi=function(_e){var he=_e.includes;return _e===yh||sr(yh,_e)&&he===yh.includes?cT:typeof _e=="string"||_e===bh||sr(bh,_e)&&he===bh.includes?Pb:he},fT=TypeError,Ab=function(_e){return function(he,Ue,$e,Ce){Xr(Ue);var jt=Pn(he),tr=gr(jt),rr=rs(jt),fr=_e?rr-1:0,kr=_e?-1:1;if($e<2)for(;;){if(fr in tr){Ce=tr[fr],fr+=kr;break}if(fr+=kr,_e?fr<0:rr<=fr)throw fT("Reduce of empty array with no initial value")}for(;_e?fr>=0:rr>fr;fr+=kr)fr in tr&&(Ce=Ue(Ce,tr[fr],fr,jt));return Ce}},mT={left:Ab(!1),right:Ab(!0)}.left,gT=ec("reduce");En({target:"Array",proto:!0,forced:!gT||!ui&&Br>79&&Br<83},{reduce:function(he){var Ue=arguments.length;return mT(this,he,Ue,Ue>1?arguments[1]:void 0)}});var Lu=ua("Array").reduce,Fu=Array.prototype,qf=function(_e){var he=_e.reduce;return _e===Fu||sr(Fu,_e)&&he===Fu.reduce?Lu:he},Yl=function(he){return he===void 0},$u=V(function(){if(typeof ArrayBuffer=="function"){var _e=new ArrayBuffer(8);Object.isExtensible(_e)&&Object.defineProperty(_e,"a",{value:8})}}),Hf=Object.isExtensible,Sh=V(function(){Hf(1)})||$u?function(he){return!!mr(he)&&(!$u||nr(he)!="ArrayBuffer")&&(!Hf||Hf(he))}:Hf,zf=!V(function(){return Object.isExtensible(Object.preventExtensions({}))}),Wf=g(function(_e){var he=Ba.f,Ue=!1,$e=Vo("meta"),Ce=0,jt=function(rr){he(rr,$e,{value:{objectID:"O"+Ce++,weakData:{}}})},tr=_e.exports={enable:function(){tr.enable=function(){},Ue=!0;var rr=xd.f,fr=Ie([].splice),kr={};kr[$e]=1,rr(kr).length&&(xd.f=function(Pr){for(var Rr=rr(Pr),$r=0,Hr=Rr.length;$r<Hr;$r++)if(Rr[$r]===$e){fr(Rr,$r,1);break}return Rr},En({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Vl.f}))},fastKey:function(rr,fr){if(!mr(rr))return typeof rr=="symbol"?rr:(typeof rr=="string"?"S":"P")+rr;if(!vn(rr,$e)){if(!Sh(rr))return"F";if(!fr)return"E";jt(rr)}return rr[$e].objectID},getWeakData:function(rr,fr){if(!vn(rr,$e)){if(!Sh(rr))return!0;if(!fr)return!1;jt(rr)}return rr[$e].weakData},onFreeze:function(rr){return zf&&Ue&&Sh(rr)&&!vn(rr,$e)&&jt(rr),rr}};Fi[$e]=!0}),hT=Ba.f,Th=Gc.forEach,Nb=vi.set,Gf=vi.getterFor,Ob=function(_e,he,Ue){for(var $e in he)Ue&&Ue.unsafe&&_e[$e]?_e[$e]=he[$e]:ji(_e,$e,he[$e],Ue);return _e},Ch=Ba.f,Mh=Wf.fastKey,Kf=vi.set,kh=vi.getterFor,wh={getConstructor:function(_e,he,Ue,$e){var Ce=_e(function(kr,Pr){Yc(kr,jt),Kf(kr,{type:he,index:ns(null),first:void 0,last:void 0,size:0}),kt||(kr.size=0),pr(Pr)||ja(Pr,kr[$e],{that:kr,AS_ENTRIES:Ue})}),jt=Ce.prototype,tr=kh(he),rr=function(kr,Pr,Rr){var $r,Hr,Gr=tr(kr),bn=fr(kr,Pr);return bn?bn.value=Rr:(Gr.last=bn={index:Hr=Mh(Pr,!0),key:Pr,value:Rr,previous:$r=Gr.last,next:void 0,removed:!1},Gr.first||(Gr.first=bn),$r&&($r.next=bn),kt?Gr.size++:kr.size++,Hr!=="F"&&(Gr.index[Hr]=bn)),kr},fr=function(kr,Pr){var Rr,$r=tr(kr),Hr=Mh(Pr);if(Hr!=="F")return $r.index[Hr];for(Rr=$r.first;Rr;Rr=Rr.next)if(Rr.key==Pr)return Rr};return Ob(jt,{clear:function(){for(var Pr=tr(this),Rr=Pr.index,$r=Pr.first;$r;)$r.removed=!0,$r.previous&&($r.previous=$r.previous.next=void 0),delete Rr[$r.index],$r=$r.next;Pr.first=Pr.last=void 0,kt?Pr.size=0:this.size=0},delete:function(kr){var Pr=this,Rr=tr(Pr),$r=fr(Pr,kr);if($r){var Hr=$r.next,Gr=$r.previous;delete Rr.index[$r.index],$r.removed=!0,Gr&&(Gr.next=Hr),Hr&&(Hr.previous=Gr),Rr.first==$r&&(Rr.first=Hr),Rr.last==$r&&(Rr.last=Gr),kt?Rr.size--:Pr.size--}return!!$r},forEach:function(Pr){for(var Rr,$r=tr(this),Hr=Go(Pr,arguments.length>1?arguments[1]:void 0);Rr=Rr?Rr.next:$r.first;)for(Hr(Rr.value,Rr.key,this);Rr&&Rr.removed;)Rr=Rr.previous},has:function(Pr){return!!fr(this,Pr)}}),Ob(jt,Ue?{get:function(Pr){var Rr=fr(this,Pr);return Rr&&Rr.value},set:function(Pr,Rr){return rr(this,Pr===0?0:Pr,Rr)}}:{add:function(Pr){return rr(this,Pr=Pr===0?0:Pr,Pr)}}),kt&&Ch(jt,"size",{get:function(){return tr(this).size}}),Ce},setStrong:function(_e,he,Ue){var $e=he+" Iterator",Ce=kh(he),jt=kh($e);sg(_e,he,function(tr,rr){Kf(this,{type:$e,target:tr,state:Ce(tr),kind:rr,last:void 0})},function(){for(var tr=jt(this),rr=tr.kind,fr=tr.last;fr&&fr.removed;)fr=fr.previous;return tr.target&&(tr.last=fr=fr?fr.next:tr.state.first)?rr=="keys"?{value:fr.key,done:!1}:rr=="values"?{value:fr.value,done:!1}:{value:[fr.key,fr.value],done:!1}:(tr.target=void 0,{value:void 0,done:!0})},Ue?"entries":"values",!Ue,!0),xg(he)}};(function(_e,he,Ue){var $e,Ce=_e.indexOf("Map")!==-1,jt=_e.indexOf("Weak")!==-1,tr=Ce?"set":"add",rr=$[_e],fr=rr&&rr.prototype,kr={};if(kt&&Ve(rr)&&(jt||fr.forEach&&!V(function(){new rr().entries().next()}))){var Pr=($e=he(function($r,Hr){Nb(Yc($r,Pr),{type:_e,collection:new rr}),Hr!=null&&ja(Hr,$r[tr],{that:$r,AS_ENTRIES:Ce})})).prototype,Rr=Gf(_e);Th(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function($r){var Hr=$r=="add"||$r=="set";!($r in fr)||jt&&$r=="clear"||Ta(Pr,$r,function(Gr,bn){var Sn=Rr(this).collection;if(!Hr&&jt&&!mr(Gr))return $r=="get"&&void 0;var An=Sn[$r](Gr===0?0:Gr,bn);return Hr?this:An})}),jt||hT(Pr,"size",{configurable:!0,get:function(){return Rr(this).collection.size}})}else $e=Ue.getConstructor(he,_e,Ce,tr),Wf.enable();Bl($e,_e,!1,!0),kr[_e]=$e,En({global:!0,forced:!0},kr),jt||Ue.setStrong($e,_e,Ce)})("Map",function(_e){return function(){return _e(this,arguments.length?arguments[0]:void 0)}},wh);var Mi=_r.Map,_h=[].push;En({target:"Map",stat:!0,forced:!0},{from:function(he){var Ue,$e,Ce,jt,tr=arguments.length,rr=tr>1?arguments[1]:void 0;return ku(this),(Ue=rr!==void 0)&&Xr(rr),pr(he)?new this:($e=[],Ue?(Ce=0,jt=Go(rr,tr>2?arguments[2]:void 0),ja(he,function(fr){ze(_h,$e,jt(fr,Ce++))})):ja(he,_h,{that:$e}),new this($e))}}),En({target:"Map",stat:!0,forced:!0},{of:function(){return new this(Vs(arguments))}}),En({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var he,Ue=po(this),$e=Xr(Ue.delete),Ce=!0,jt=0,tr=arguments.length;jt<tr;jt++)he=ze($e,Ue,arguments[jt]),Ce=Ce&&he;return!!Ce}}),En({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(he,Ue){var $e,Ce,jt=po(this),tr=Xr(jt.get),rr=Xr(jt.has),fr=Xr(jt.set);return ze(rr,jt,he)?($e=ze(tr,jt,he),"update"in Ue&&($e=Ue.update($e,he,jt),ze(fr,jt,he,$e)),$e):(Ce=Ue.insert(he,jt),ze(fr,jt,he,Ce),Ce)}});var cc=Cu;En({target:"Map",proto:!0,real:!0,forced:!0},{every:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return!ja($e,function(jt,tr,rr){if(!Ce(tr,jt,Ue))return rr()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0),jt=new(Ad(Ue,Er("Map"))),tr=Xr(jt.set);return ja($e,function(rr,fr){Ce(fr,rr,Ue)&&ze(tr,jt,rr,fr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),jt}}),En({target:"Map",proto:!0,real:!0,forced:!0},{find:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return ja($e,function(jt,tr,rr){if(Ce(tr,jt,Ue))return rr(tr)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),En({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return ja($e,function(jt,tr,rr){if(Ce(tr,jt,Ue))return rr(jt)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var Rb=Ie([].push);En({target:"Map",stat:!0,forced:!0},{groupBy:function(he,Ue){Xr(Ue);var $e=Cu(he),Ce=new this,jt=Xr(Ce.has),tr=Xr(Ce.get),rr=Xr(Ce.set);return ja($e,function(fr){var kr=Ue(fr);ze(jt,Ce,kr)?Rb(ze(tr,Ce,kr),fr):ze(rr,Ce,kr,[fr])},{IS_ITERATOR:!0}),Ce}}),En({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(he){return ja(cc(po(this)),function(Ue,$e,Ce){if((jt=$e)===(tr=he)||jt!=jt&&tr!=tr)return Ce();var jt,tr},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),En({target:"Map",stat:!0,forced:!0},{keyBy:function(he,Ue){var $e=new this;Xr(Ue);var Ce=Xr($e.set);return ja(he,function(jt){ze(Ce,$e,Ue(jt),jt)}),$e}}),En({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(he){return ja(cc(po(this)),function(Ue,$e,Ce){if($e===he)return Ce(Ue)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),En({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0),jt=new(Ad(Ue,Er("Map"))),tr=Xr(jt.set);return ja($e,function(rr,fr){ze(tr,jt,Ce(fr,rr,Ue),fr)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),jt}}),En({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0),jt=new(Ad(Ue,Er("Map"))),tr=Xr(jt.set);return ja($e,function(rr,fr){ze(tr,jt,rr,Ce(fr,rr,Ue))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),jt}}),En({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(he){for(var Ue=po(this),$e=Xr(Ue.set),Ce=arguments.length,jt=0;jt<Ce;)ja(arguments[jt++],$e,{that:Ue,AS_ENTRIES:!0});return Ue}});var vT=TypeError;En({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(he){var Ue=po(this),$e=cc(Ue),Ce=arguments.length<2,jt=Ce?void 0:arguments[1];if(Xr(he),ja($e,function(tr,rr){Ce?(Ce=!1,jt=rr):jt=he(jt,rr,tr,Ue)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Ce)throw vT("Reduce of empty map with no initial value");return jt}}),En({target:"Map",proto:!0,real:!0,forced:!0},{some:function(he){var Ue=po(this),$e=cc(Ue),Ce=Go(he,arguments.length>1?arguments[1]:void 0);return ja($e,function(jt,tr,rr){if(Ce(tr,jt,Ue))return rr()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var Bb=TypeError;En({target:"Map",proto:!0,real:!0,forced:!0},{update:function(he,Ue){var $e=po(this),Ce=Xr($e.get),jt=Xr($e.has),tr=Xr($e.set),rr=arguments.length;Xr(Ue);var fr=ze(jt,$e,he);if(!fr&&rr<3)throw Bb("Updating absent value");var kr=fr?ze(Ce,$e,he):Xr(rr>2?arguments[2]:void 0)(he,$e);return ze(tr,$e,he,Ue(kr,he,$e)),$e}});var yT=TypeError,xh=function(he,Ue){var $e,Ce=po(this),jt=Xr(Ce.get),tr=Xr(Ce.has),rr=Xr(Ce.set),fr=arguments.length>2?arguments[2]:void 0;if(!Ve(Ue)&&!Ve(fr))throw yT("At least one callback required");return ze(tr,Ce,he)?($e=ze(jt,Ce,he),Ve(Ue)&&($e=Ue($e),ze(rr,Ce,he,$e))):Ve(fr)&&($e=fr(),ze(rr,Ce,he,$e)),$e};En({target:"Map",proto:!0,real:!0,forced:!0},{upsert:xh}),En({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:xh});var xc=Mi,Ic=g(function(_e){function he(Ue){var $e;return _e.exports=he=ci?oa($e=Dr).call($e):function(jt){return jt.__proto__||Dr(jt)},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Lb=g(function(_e){_e.exports=function(Ue){var $e;return Ka($e=Function.toString.call(Ue)).call($e,"[native code]")!==-1},_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Qf=Er("Reflect","construct"),bT=Object.prototype,ST=[].push,Fb=V(function(){function _e(){}return!(Qf(function(){},[],_e)instanceof _e)}),ju=!V(function(){Qf(function(){})}),$b=Fb||ju;En({target:"Reflect",stat:!0,forced:$b,sham:$b},{construct:function(he,Ue){ku(he),po(Ue);var $e=arguments.length<3?he:ku(arguments[2]);if(ju&&!Fb)return Qf(he,Ue,$e);if(he==$e){switch(Ue.length){case 0:return new he;case 1:return new he(Ue[0]);case 2:return new he(Ue[0],Ue[1]);case 3:return new he(Ue[0],Ue[1],Ue[2]);case 4:return new he(Ue[0],Ue[1],Ue[2],Ue[3])}var Ce=[null];return ue(ST,Ce,Ue),new(ue(vd,he,Ce))}var jt=$e.prototype,tr=ns(mr(jt)?jt:bT),rr=ue(he,tr,Ue);return mr(rr)?rr:tr}});var ki=_r.Reflect.construct,TT=g(function(_e){_e.exports=function(){if(typeof Reflect>"u"||!ki||ki.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ki(Boolean,[],function(){})),!0}catch{return!1}},_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Jf=g(function(_e){function he(Ue,$e,Ce){var jt;return TT()?(_e.exports=he=oa(jt=ki).call(jt),_e.exports.__esModule=!0,_e.exports.default=_e.exports):(_e.exports=he=function(rr,fr,kr){var Pr=[null];Pr.push.apply(Pr,fr);var Rr=new(oa(Function).apply(rr,Pr));return kr&&bd(Rr,kr.prototype),Rr},_e.exports.__esModule=!0,_e.exports.default=_e.exports),he.apply(null,arguments)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Ih=g(function(_e){function he(Ue){var $e=typeof xc=="function"?new xc:void 0;return _e.exports=he=function(jt){if(jt===null||!Lb(jt))return jt;if(typeof jt!="function")throw new TypeError("Super expression must either be null or a function");if($e!==void 0){if($e.has(jt))return $e.get(jt);$e.set(jt,tr)}function tr(){return Jf(jt,arguments,Ic(this).constructor)}return tr.prototype=ii(jt.prototype,{constructor:{value:tr,enumerable:!1,writable:!0,configurable:!0}}),bd(tr,jt)},_e.exports.__esModule=!0,_e.exports.default=_e.exports,he(Ue)}_e.exports=he,_e.exports.__esModule=!0,_e.exports.default=_e.exports}),Ua=n(Ih),Wi=function(_e){function he(Ue,$e,Ce){var jt;return $e===void 0&&($e={}),Ce===void 0&&(Ce=400),(jt=_e.call(this,Ue)||this).data=$e,jt.code=Ce,jt.name="customError",jt}return ra(he,_e),he}(Ua(Error)),Du=function(_e){function he(Ue,$e,Ce){var jt;return $e===void 0&&($e={}),(jt=_e.call(this,Ue,$e,414)||this).code=414,jt.name="validateError",jt.rules=Ce,jt}return ra(he,_e),he}(Wi),ep={200:null,406:null,808:null,810:null,201:"The client version is incorrect. You need to upgrade the SDK",302:"The user name or password is incorrect. Please check whether the appkey and token are valid and whether the account and token match",403:"Illegal operation or no permission",404:"Target object does not exist",405:"Parameter length too long",408:"Client request timed out",414:"Request parameter error",415:"Service unavailable",416:"Frequency control",417:"Repeat operation",422:"Account disabled",500:"Server internal error",503:"Server busy",508:"Expiration date",509:"Invalid",7101:"Be pulled black",700:"Partial failure of batch operation",801:"The number of people in the team has reached the upper limit",802:"No permission",803:"The team does not exist or has not changed",804:"The user is not in the team",805:"Team type mismatch",806:"The number of teams created has reached the limit",807:"Team member not valid",809:"Already in the team",811:"The number of accounts in the forced push list exceeds the limit",812:"The team is muted",813:"Due to the limited number of team, some pull people successfully",814:"Disable team message read service",815:"Maximum number of team administrators",816:"Batch operation partial failure",997:"The packet has expired",998:"Deserialize packet error",999:"Serialize packet error",9102:"Channel failure",9103:"This call has been answered / rejected at another end",10201:"Signaling: target NIM client is offline",10202:"Signaling: push is unreachable",10404:"Signaling: channel not exists",10405:"Signaling: channel already exists",10406:"Signaling: member of channel not exists",10407:"Signaling: member of channel already exists",10408:"Signaling: the invitation request does not exist or has expired",10409:"Signaling: the invitation request has been rejected",10410:"Signaling: the invitation request has been accepted",10414:"Signaling: request parameter error",10417:"Signaling: uid conflict",10419:"Signaling: the number of members of channel exceed the limit",10420:"Signaling: member is already in the channel on other client",10700:"Signaling: phased success",13002:"Abnormal chatroom status",13003:"In the blacklist",13004:"In the mute list",13006:"All members are muted, and only the administrator can speak"},Yf=function(_e){function he(Ue,$e,Ce,jt,tr){var rr;return Ce===void 0&&(Ce=""),jt===void 0&&(jt=new Date().getTime()),tr===void 0&&(tr={}),Ce=Ce||ep[Ue],(rr=_e.call(this,Ce,tr,Ue)||this).name="cmdError",rr.cmd=$e,rr.timetag=jt,rr}return ra(he,_e),he}(Wi),Eh=function(_e){function he(Ue,$e,Ce){var jt;return(jt=_e.call(this,Ue,{},412)||this).code=412,jt.name="formatError",jt.key=$e,jt.reason=Ce,jt}return ra(he,_e),he}(Wi),Uu=function(_e){function he(Ue,$e,Ce,jt,tr){var rr;return(rr=_e.call(this,Ue,{file:tr},400)||this).name="uploadError",rr.rawError=$e,rr.curProvider=Ce||1,rr.mixStorePolicy=jt,rr}return ra(he,_e),he}(Wi),tp={},Ph={};function Ah(_e,he){var Ue,$e,Ce;try{Ce=JSON.parse(_e)}catch(Hr){throw he.error("Parse command error: ",_e),Hr}var jt=Ce.sid+"_"+Ce.cid,tr=Ce.r;if(mi(Ue=["4_1","4_2","4_10","4_11"]).call(Ue,jt)){var rr=Ce.r[1].headerPacket;jt=rr.sid+"_"+rr.cid,tr=Ce.r[1].body}var fr,kr=Ph[jt],Pr=tp[kr],Rr=function(Gr,bn){var Sn=ep[Gr];return Sn===null?null:new Yf(Gr,bn,Sn,new Date().getTime())}(Ce.code,kr),$r={cmd:kr,raw:Ce,error:Rr,service:Pr==null?void 0:Pr.service,content:{}};if($r.error){if($r.error.cmd=kr,$r.error.callFunc="parseCmd",!(!(($e=Pr==null?void 0:Pr.ignoreErrCodes)===null||$e===void 0)&&mi($e).call($e,Ce.code)))return $r;he.warn("parseCmd:: ignore error ",$r.error),$r.error.ignore=!0}return!kr||!Pr?($r.notFound=!0,$r):(Pr.response&&yo(fr=Pr.response).call(fr,function(Hr,Gr){var bn=tr[Gr],Sn=Hr.type,An=Hr.name,kn=Hr.reflectMapper;if(!Yl(bn))switch(Sn){case"Property":$r.content[An]=kn?il(bn,kn):bn;break;case"PropertyArray":$r.content[An]=Oo(bn).call(bn,function(Kn){return kn?il(Kn,kn):Kn});break;case"long":case"Long":case"byte":case"Byte":case"Number":$r.content[An]=+bn;break;default:$r.content[An]=bn}}),$r)}function Nh(_e,he){var Ue={};for(var $e in _e)he[$e]!==void 0&&(Ue[he[$e]]=_e[$e]);return Ue}function il(_e,he){var Ue={};for(var $e in _e)he[$e]!==void 0&&(Ue[he[$e]]=_e[$e]);return Ue}function Ss(_e){tp=Gn(tp,_e.cmdConfig),Ph=Gn(Ph,_e.cmdMap)}function Ws(_e){var he;return qf(he=fa(_e)).call(he,function(Ue,$e){var Ce,jt=_e[$e];return Ue[$e]=qf(Ce=fa(jt)).call(Ce,function(tr,rr){return tr[jt[rr]]=rr,tr},{}),Ue},{})}var Xf={"1_2":"heartbeat","2_3":"login","2_5":"kicked","2_6":"logout","2_7":"multiPortLogin","2_8":"kick"},Zf={login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appkey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,hostEnv:41,userAgent:42,libEnv:44,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,customTag:38,connectionId:102,ip:103,time:109},aosPushInfo:{pushType:110,hasTokenPreviously:111}},rp=Ws(Zf),CT={login:{sid:2,cid:3,service:"auth",params:[{type:"Property",name:"login",reflectMapper:Zf.login}],response:[{type:"Property",name:"loginRes",reflectMapper:rp.loginRes},{type:"PropertyArray",name:"loginPorts",reflectMapper:rp.loginPort},{type:"Property",name:"aosPushInfo",reflectMapper:rp.aosPushInfo}]},logout:{sid:2,cid:6,service:"auth"},heartbeat:{sid:1,cid:2,service:"auth"},kicked:{sid:2,cid:5,service:"auth",response:[{type:"Number",name:"clientType"},{type:"Number",name:"reason"},{type:"String",name:"ext"},{type:"Number",name:"customClientType"}]},multiPortLogin:{sid:2,cid:7,service:"auth",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",reflectMapper:rp.loginPort}]},kick:{sid:2,cid:8,service:"auth",params:[{type:"StrArray",name:"deviceIds"}],response:[{type:"StrArray",name:"deviceIds"}]}},em=`	
\v\f\r                　\u2028\u2029\uFEFF`,tm=Ie("".replace),Vu="["+em+"]",qu=RegExp("^"+Vu+Vu+"*"),Oh=RegExp(Vu+Vu+"*$"),rm=function(_e){return function(he){var Ue=Zs(Cr(he));return 1&_e&&(Ue=tm(Ue,qu,"")),2&_e&&(Ue=tm(Ue,Oh,"")),Ue}},Rh={start:rm(1),end:rm(2),trim:rm(3)},jb=Rh.trim,Hu=$.parseInt,Bh=$.Symbol,Db=Bh&&Bh.iterator,Ub=/^[+-]?0x/i,MT=Ie(Ub.exec),Vb=Hu(em+"08")!==8||Hu(em+"0x16")!==22||Db&&!V(function(){Hu(Object(Db))})?function(he,Ue){var $e=jb(Zs(he));return Hu($e,Ue>>>0||(MT(Ub,$e)?16:10))}:Hu;En({global:!0,forced:parseInt!=Vb},{parseInt:Vb});var Xl,Za,np,Va,wi,Lo=_r.parseInt;(function(_e){_e[_e.text=0]="text",_e[_e.image=1]="image",_e[_e.audio=2]="audio",_e[_e.video=3]="video",_e[_e.geo=4]="geo",_e[_e.notification=5]="notification",_e[_e.file=6]="file",_e[_e.tip=10]="tip",_e[_e.robot=11]="robot",_e[_e.g2=12]="g2",_e[_e.custom=100]="custom"})(Xl||(Xl={})),function(_e){_e[_e.p2p=0]="p2p",_e[_e.team=1]="team",_e[_e.superTeam=5]="superTeam"}(Za||(Za={})),function(_e){_e[_e.Android=1]="Android",_e[_e.iOS=2]="iOS",_e[_e.PC=4]="PC",_e[_e.WindowsPhone=8]="WindowsPhone",_e[_e.Web=16]="Web",_e[_e.Server=32]="Server",_e[_e.Mac=64]="Mac"}(np||(np={})),function(_e){_e[_e.unread=1]="unread",_e[_e.read=2]="read",_e[_e.deleted=3]="deleted",_e[_e.sending=4]="sending",_e[_e.sendFailed=5]="sendFailed",_e[_e.sent=6]="sent",_e[_e.receipt=7]="receipt",_e[_e.refused=10]="refused"}(Va||(Va={})),function(_e){_e[_e.default=0]="default",_e[_e.leave=1]="leave",_e[_e.roam=2]="roam"}(wi||(wi={}));var qb=ua("Array").values,Lh=Array.prototype,Hb={DOMTokenList:!0,NodeList:!0},nm=function(_e){var he=_e.values;return _e===Lh||sr(Lh,_e)&&he===Lh.values||vn(Hb,Rl(_e))?qb:he},Fh=function(he,Ue){return function($e){return he(Ue($e))}},$h=Fh(Object.getPrototypeOf,Object),zb=Function.prototype,kT=Object.prototype,op=zb.toString,wT=kT.hasOwnProperty,_T=op.call(Object),Zl=function(he){if(!Hi(he)||ma(he)!="[object Object]")return!1;var Ue=$h(he);if(Ue===null)return!0;var $e=wT.call(Ue,"constructor")&&Ue.constructor;return typeof $e=="function"&&$e instanceof $e&&op.call($e)==_T};function ai(_e,he){if(!Zl(he))return{};var Ue=JSON.parse(ha(he)),$e=Wb(_e,Ue);return JSON.parse(ha(Gn(Gn({},Ue),$e)))}function Wb(_e,he){if(!Zl(he))return{};var Ue={},$e=fa(_e);return yo($e).call($e,function(Ce){var jt=_e[Ce].type;if(typeof jt!="string"){var tr=Wb(_e[Ce],he);fa(tr).length>0&&(Ue[Ce]=tr)}else{var rr=_e[Ce],fr=rr.rawKey||Ce,kr=xT[jt](he,fr,rr);kr!==void 0&&(he[fr]=void 0,Ue[Ce]=kr)}}),Ue}var xT={number:function(he,Ue){if(he[Ue]!==void 0)return+he[Ue]},string:function(he,Ue){if(he[Ue]!==void 0)return he[Ue]},boolean:function(he,Ue){return+he[Ue]>0||+he[Ue]!=0&&void 0},enum:function(he,Ue,$e){return nm($e)[he[Ue]]},object:function(he,Ue){if(he[Ue]!==void 0)try{return JSON.parse(he[Ue])}catch{return{}}}};function om(_e,he){if(!Zl(he))return{};var Ue=JSON.parse(ha(he)),$e=Gb(_e,Ue);return JSON.parse(ha(Gn(Gn({},Ue),$e)))}function Gb(_e,he){var Ue;if(!Zl(he))return qf(Ue=fa(_e)).call(Ue,function(jt,tr){return jt[_e[tr].rawKey||tr]=void 0,jt},{});var $e={},Ce=fa(_e);return yo(Ce).call(Ce,function(jt){var tr=_e[jt].type;if(typeof tr!="string"){var rr=Gb(_e[jt],he[jt]);return Gn($e,rr),void(he[jt]=void 0)}var fr=_e[jt],kr=fr.rawKey||jt,Pr=Kb[tr](he,jt,fr);he[kr]=void 0,$e[kr]=Pr}),$e}var Kb={number:function(he,Ue){return he[Ue]},string:function(he,Ue){return he[Ue]},boolean:function(he,Ue){return he[Ue]===!0?1:he[Ue]===!1?0:void 0},enum:function(he,Ue,$e){return nm($e)[he[Ue]]},object:function(he,Ue){if(he[Ue]!==void 0)try{return ha(he[Ue])}catch{return""}}},Qb=Kb,jh=function(he){return function(){return he}},Jb=function(he){return function(Ue,$e,Ce){for(var jt=-1,tr=Object(Ue),rr=Ce(Ue),fr=rr.length;fr--;){var kr=rr[he?fr:++jt];if($e(tr[kr],kr,tr)===!1)break}return Ue}}(),IT=function(he,Ue){for(var $e=-1,Ce=Array(he);++$e<he;)Ce[$e]=Ue($e);return Ce},ap=function(he){return Hi(he)&&ma(he)=="[object Arguments]"},zu=Object.prototype,Dh=zu.hasOwnProperty,us=zu.propertyIsEnumerable,ET=ap(function(){return arguments}())?ap:function(_e){return Hi(_e)&&Dh.call(_e,"callee")&&!us.call(_e,"callee")},sp=ET,Yb=function(){return!1},ip=g(function(_e,he){var Ue=he&&!he.nodeType&&he,$e=Ue&&_e&&!_e.nodeType&&_e,Ce=$e&&$e.exports===Ue?ic.Buffer:void 0,jt=(Ce?Ce.isBuffer:void 0)||Yb;_e.exports=jt}),Uh=/^(?:0|[1-9]\d*)$/,am=function(he,Ue){var $e=typeof he;return!!(Ue=Ue??9007199254740991)&&($e=="number"||$e!="symbol"&&Uh.test(he))&&he>-1&&he%1==0&&he<Ue},Vh=function(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991},Qa={};Qa["[object Float32Array]"]=Qa["[object Float64Array]"]=Qa["[object Int8Array]"]=Qa["[object Int16Array]"]=Qa["[object Int32Array]"]=Qa["[object Uint8Array]"]=Qa["[object Uint8ClampedArray]"]=Qa["[object Uint16Array]"]=Qa["[object Uint32Array]"]=!0,Qa["[object Arguments]"]=Qa["[object Array]"]=Qa["[object ArrayBuffer]"]=Qa["[object Boolean]"]=Qa["[object DataView]"]=Qa["[object Date]"]=Qa["[object Error]"]=Qa["[object Function]"]=Qa["[object Map]"]=Qa["[object Number]"]=Qa["[object Object]"]=Qa["[object RegExp]"]=Qa["[object Set]"]=Qa["[object String]"]=Qa["[object WeakMap]"]=!1;var PT=function(he){return Hi(he)&&Vh(he.length)&&!!Qa[ma(he)]},cl=function(he){return function(Ue){return he(Ue)}},lc=g(function(_e,he){var Ue=he&&!he.nodeType&&he,$e=Ue&&_e&&!_e.nodeType&&_e,Ce=$e&&$e.exports===Ue&&zd.process,jt=function(){try{var tr=$e&&$e.require&&$e.require("util").types;return tr||Ce&&Ce.binding&&Ce.binding("util")}catch{}}();_e.exports=jt}),Xb=lc&&lc.isTypedArray,sm=Xb?cl(Xb):PT,AT=Object.prototype.hasOwnProperty,qh=function(he,Ue){var $e=ti(he),Ce=!$e&&sp(he),jt=!$e&&!Ce&&ip(he),tr=!$e&&!Ce&&!jt&&sm(he),rr=$e||Ce||jt||tr,fr=rr?IT(he.length,String):[],kr=fr.length;for(var Pr in he)!Ue&&!AT.call(he,Pr)||rr&&(Pr=="length"||jt&&(Pr=="offset"||Pr=="parent")||tr&&(Pr=="buffer"||Pr=="byteLength"||Pr=="byteOffset")||am(Pr,kr))||fr.push(Pr);return fr},Hh=Object.prototype,zh=function(he){var Ue=he&&he.constructor;return he===(typeof Ue=="function"&&Ue.prototype||Hh)},NT=Fh(Object.keys,Object),OT=Object.prototype.hasOwnProperty,RT=function(he){if(!zh(he))return NT(he);var Ue=[];for(var $e in Object(he))OT.call(he,$e)&&$e!="constructor"&&Ue.push($e);return Ue},Wu=function(he){return he!=null&&Vh(he.length)&&!ch(he)},Gu=function(he){return Wu(he)?qh(he):RT(he)},BT=function(he,Ue){return he&&Jb(he,Ue,Gu)},LT=function(he,Ue,$e,Ce){return BT(he,function(jt,tr,rr){Ue(Ce,$e(jt),tr,rr)}),Ce},Wh=function(he,Ue){return function($e,Ce){return LT($e,he,Ue(Ce),{})}},Gh,eu=function(he){return he},Ts=Object.prototype.toString,ms=Wh(function(_e,he,Ue){he!=null&&typeof he.toString!="function"&&(he=Ts.call(he)),_e[he]=Ue},jh(eu)),FT=ms({Android:1,iOS:2,PC:4,WindowsPhone:8,Web:16,Server:32,Mac:64}),Kh={p2p:0,team:1,superTeam:5};function im(_e,he){return _e&&_e.length>0?Oo(_e).call(_e,function(Ue){return Gn(Gn({},Ue),{account:Ue.account,connectionId:Ue.connectionId,deviceId:Ue.deviceId,ip:Ue.ip,mac:Ue.mac,os:Ue.os,type:FT[Ue.type]||Ue.type,time:Lo(Ue.time),online:he!==3})}):[]}ms(Kh),function(_e){_e[_e.text=0]="text",_e[_e.image=1]="image",_e[_e.audio=2]="audio",_e[_e.video=3]="video",_e[_e.geo=4]="geo",_e[_e.notification=5]="notification",_e[_e.file=6]="file",_e[_e.tip=10]="tip",_e[_e.robot=11]="robot",_e[_e.g2=12]="g2",_e[_e.custom=100]="custom"}(Gh||(Gh={}));var Zb={1:{reason:"samePlatformKick",message:"The same account is not allowed to multiple login at the same time"},2:{reason:"serverKick",message:"Kicked out by IM server"},3:{reason:"otherPlatformKick",message:"Kicked out by other client of your account"},4:{reason:"silentlyKick",message:"Quietly kicked"}},$T=function(){this.__data__=new jf,this.size=0},e0=function(he){var Ue=this.__data__,$e=Ue.delete(he);return this.size=Ue.size,$e},jT=function(he){return this.__data__.get(he)},DT=function(he){return this.__data__.has(he)},UT=function(he,Ue){var $e=this.__data__;if($e instanceof jf){var Ce=$e.__data__;if(!Ou||Ce.length<199)return Ce.push([he,Ue]),this.size=++$e.size,this;$e=this.__data__=new Df(Ce)}return $e.set(he,Ue),this.size=$e.size,this};function Ku(_e){var he=this.__data__=new jf(_e);this.size=he.size}Ku.prototype.clear=$T,Ku.prototype.delete=e0,Ku.prototype.get=jT,Ku.prototype.has=DT,Ku.prototype.set=UT;var Qu=Ku,cp=function(){try{var _e=Gl(Object,"defineProperty");return _e({},"",{}),_e}catch{}}(),cm=function(he,Ue,$e){Ue=="__proto__"&&cp?cp(he,Ue,{configurable:!0,enumerable:!0,value:$e,writable:!0}):he[Ue]=$e},lm=function(he,Ue,$e){($e!==void 0&&!Yd(he[Ue],$e)||$e===void 0&&!(Ue in he))&&cm(he,Ue,$e)},t0=g(function(_e,he){var Ue=he&&!he.nodeType&&he,$e=Ue&&_e&&!_e.nodeType&&_e,Ce=$e&&$e.exports===Ue?ic.Buffer:void 0,jt=Ce?Ce.allocUnsafe:void 0;_e.exports=function(rr,fr){if(fr)return rr.slice();var kr=rr.length,Pr=jt?jt(kr):new rr.constructor(kr);return rr.copy(Pr),Pr}}),lp=ic.Uint8Array,um=function(he){var Ue=new he.constructor(he.byteLength);return new lp(Ue).set(new lp(he)),Ue},r0=function(he,Ue){var $e=Ue?um(he.buffer):he.buffer;return new he.constructor($e,he.byteOffset,he.length)},n0=function(he,Ue){var $e=-1,Ce=he.length;for(Ue||(Ue=Array(Ce));++$e<Ce;)Ue[$e]=he[$e];return Ue},o0=Object.create,VT=function(){function _e(){}return function(he){if(!ni(he))return{};if(o0)return o0(he);_e.prototype=he;var Ue=new _e;return _e.prototype=void 0,Ue}}(),Qh=function(he){return typeof he.constructor!="function"||zh(he)?{}:VT($h(he))},dm=function(he){return Hi(he)&&Wu(he)},Ju=function(he,Ue){if((Ue!=="constructor"||typeof he[Ue]!="function")&&Ue!="__proto__")return he[Ue]},qT=Object.prototype.hasOwnProperty,Jh=function(he,Ue,$e){var Ce=he[Ue];qT.call(he,Ue)&&Yd(Ce,$e)&&($e!==void 0||Ue in he)||cm(he,Ue,$e)},tu=function(he,Ue,$e,Ce){var jt=!$e;$e||($e={});for(var tr=-1,rr=Ue.length;++tr<rr;){var fr=Ue[tr],kr=Ce?Ce($e[fr],he[fr],fr,$e,he):void 0;kr===void 0&&(kr=he[fr]),jt?cm($e,fr,kr):Jh($e,fr,kr)}return $e},pm=function(he){var Ue=[];if(he!=null)for(var $e in Object(he))Ue.push($e);return Ue},Yh=Object.prototype.hasOwnProperty,HT=function(he){if(!ni(he))return pm(he);var Ue=zh(he),$e=[];for(var Ce in he)(Ce!="constructor"||!Ue&&Yh.call(he,Ce))&&$e.push(Ce);return $e},Yu=function(he){return Wu(he)?qh(he,!0):HT(he)},zT=function(he){return tu(he,Yu(he))},WT=function(he,Ue,$e,Ce,jt,tr,rr){var fr=Ju(he,$e),kr=Ju(Ue,$e),Pr=rr.get(kr);if(Pr)lm(he,$e,Pr);else{var Rr=tr?tr(fr,kr,$e+"",he,Ue,rr):void 0,$r=Rr===void 0;if($r){var Hr=ti(kr),Gr=!Hr&&ip(kr),bn=!Hr&&!Gr&&sm(kr);Rr=kr,Hr||Gr||bn?ti(fr)?Rr=fr:dm(fr)?Rr=n0(fr):Gr?($r=!1,Rr=t0(kr,!0)):bn?($r=!1,Rr=r0(kr,!0)):Rr=[]:Zl(kr)||sp(kr)?(Rr=fr,sp(fr)?Rr=zT(fr):ni(fr)&&!ch(fr)||(Rr=Qh(kr))):$r=!1}$r&&(rr.set(kr,Rr),jt(Rr,kr,Ce,tr,rr),rr.delete(kr)),lm(he,$e,Rr)}},GT=function _e(he,Ue,$e,Ce,jt){he!==Ue&&Jb(Ue,function(tr,rr){if(jt||(jt=new Qu),ni(tr))WT(he,Ue,rr,$e,_e,Ce,jt);else{var fr=Ce?Ce(Ju(he,rr),tr,rr+"",he,Ue,jt):void 0;fr===void 0&&(fr=tr),lm(he,rr,fr)}},Yu)},KT=function(he,Ue,$e){switch($e.length){case 0:return he.call(Ue);case 1:return he.call(Ue,$e[0]);case 2:return he.call(Ue,$e[0],$e[1]);case 3:return he.call(Ue,$e[0],$e[1],$e[2])}return he.apply(Ue,$e)},Xh=Math.max,Zh=function(he,Ue,$e){return Ue=Xh(Ue===void 0?he.length-1:Ue,0),function(){for(var Ce=arguments,jt=-1,tr=Xh(Ce.length-Ue,0),rr=Array(tr);++jt<tr;)rr[jt]=Ce[Ue+jt];jt=-1;for(var fr=Array(Ue+1);++jt<Ue;)fr[jt]=Ce[jt];return fr[Ue]=$e(rr),KT(he,this,fr)}},QT=cp?function(_e,he){return cp(_e,"toString",{configurable:!0,enumerable:!1,value:jh(he),writable:!0})}:eu,a0=Date.now,s0=function(he){var Ue=0,$e=0;return function(){var Ce=a0(),jt=16-(Ce-$e);if($e=Ce,jt>0){if(++Ue>=800)return arguments[0]}else Ue=0;return he.apply(void 0,arguments)}},fm=s0(QT),ev=function(he,Ue){return fm(Zh(he,Ue,eu),he+"")},i0=function(he,Ue,$e){if(!ni($e))return!1;var Ce=typeof Ue;return!!(Ce=="number"?Wu($e)&&am(Ue,$e.length):Ce=="string"&&Ue in $e)&&Yd($e[Ue],he)},tv=function(he){return ev(function(Ue,$e){var Ce=-1,jt=$e.length,tr=jt>1?$e[jt-1]:void 0,rr=jt>2?$e[2]:void 0;for(tr=he.length>3&&typeof tr=="function"?(jt--,tr):void 0,rr&&i0($e[0],$e[1],rr)&&(tr=jt<3?void 0:tr,jt=1),Ue=Object(Ue);++Ce<jt;){var fr=$e[Ce];fr&&he(Ue,fr,Ce,tr)}return Ue})},c0=tv(function(_e,he,Ue){GT(_e,he,Ue)}),l0=Gc.some,u0=ec("some");En({target:"Array",proto:!0,forced:!u0},{some:function(he){return l0(this,he,arguments.length>1?arguments[1]:void 0)}});var Gs,Ks,JT=ua("Array").some,rv=Array.prototype,mm=function(_e){var he=_e.some;return _e===rv||sr(rv,_e)&&he===rv.some?JT:he};(function(_e){_e[_e.Unset=0]="Unset",_e[_e.RN=2]="RN",_e[_e.UNIAPP=3]="UNIAPP",_e[_e.Electron=5]="Electron",_e[_e.WeiXin=6]="WeiXin",_e[_e.BROWSER=100]="BROWSER",_e[_e.H5=101]="H5",_e[_e.Ali=102]="Ali",_e[_e.Baidu=103]="Baidu",_e[_e.Tiktok=104]="Tiktok"})(Gs||(Gs={})),function(_e){_e[_e.kStatNetTypeUnkonw=0]="kStatNetTypeUnkonw",_e[_e.kStatNetTypeEthernet=1]="kStatNetTypeEthernet",_e[_e.kStatNetTypeWifi=2]="kStatNetTypeWifi",_e[_e.kStatNetType2G=3]="kStatNetType2G",_e[_e.kStatNetType3G=4]="kStatNetType3G",_e[_e.kStatNetType4G=5]="kStatNetType4G",_e[_e.kStatNetType5G=6]="kStatNetType5G"}(Ks||(Ks={}));var nv={wifi:Ks.kStatNetTypeWifi,"2g":Ks.kStatNetType2G,"3g":Ks.kStatNetType3G,"4g":Ks.kStatNetType4G,"5g":Ks.kStatNetType5G,ethernet:Ks.kStatNetTypeEthernet,unknown:Ks.kStatNetTypeUnkonw,none:Ks.kStatNetTypeUnkonw,notreachable:Ks.kStatNetTypeUnkonw,wwan:Ks.kStatNetTypeUnkonw};function Xu(){if(!navigator||!navigator.userAgent)return!1;var _e=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return mm(_e).call(_e,function(he){return navigator.userAgent.match(he)})}function ov(){var _e;return!(!navigator||!navigator.userAgent)&&typeof navigator=="object"&&typeof navigator.userAgent=="string"&&Ka(_e=navigator.userAgent).call(_e,"Electron")>=0}function d0(){return navigator&&navigator.userAgent}var jo={setLogger:function(he){throw new Error("Function not implemented.")},platform:"",WebSocket:function(){function _e(Ue,$e){throw this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,new Error("Method not implemented.")}var he=_e.prototype;return he.close=function($e,Ce){throw new Error("Method not implemented.")},he.send=function($e){throw new Error("Method not implemented.")},he.onclose=function($e){throw new Error("Method not implemented.")},he.onerror=function($e){throw new Error("Method not implemented.")},he.onmessage=function($e){throw new Error("Method not implemented.")},he.onopen=function($e){throw new Error("Method not implemented.")},_e}(),localStorage:{},request:function(he,Ue){throw new Error("Function not implemented.")},uploadFile:function(he){throw new Error("Function not implemented.")},getSystemInfo:function(){throw new Error("Function not implemented.")},net:{__getEnv:function(){return null},__onNetworkStatusChangeFn:null,getNetworkStatus:function(){var he=this.__getEnv();return new Ca(function(Ue,$e){he.getNetworkType({success:function(jt){var tr=!1;tr=typeof jt.networkAvailable=="boolean"?jt.networkAvailable:jt.networkType.toLowerCase()!=="none",Ue({net_type:nv[jt.networkType.toLowerCase()],net_connect:tr})},fail:function(){$e(new Error("getNetworkType failed"))}})})},onNetworkStatusChange:function(he){var Ue=this.__getEnv();this.offNetworkStatusChange(),Ue.onNetworkStatusChange&&(this.__onNetworkStatusChangeFn=function($e){var Ce=$e.networkType.toLowerCase();he({isConnected:$e.isConnected||Ce!=="none",networkType:nv[Ce]})},Ue.onNetworkStatusChange(this.__onNetworkStatusChangeFn))},offNetworkStatusChange:function(){var he=this.__getEnv();he.offNetworkStatusChange&&(this.__onNetworkStatusChangeFn&&he.offNetworkStatusChange(this.__onNetworkStatusChangeFn),this.__onNetworkStatusChangeFn=null)}}},YT=Zu;function Zu(_e){_e=_e||{},this.ms=_e.min||100,this.max=_e.max||1e4,this.factor=_e.factor||2,this.jitter=_e.jitter>0&&_e.jitter<=1?_e.jitter:0,this.attempts=0}Zu.prototype.duration=function(){var _e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var he=Math.random(),Ue=Math.floor(he*this.jitter*_e);_e=1&Math.floor(10*he)?_e+Ue:_e-Ue}return 0|Math.min(_e,this.max)},Zu.prototype.reset=function(){this.attempts=0},Zu.prototype.setMin=function(_e){this.ms=_e},Zu.prototype.setMax=function(_e){this.max=_e},Zu.prototype.setJitter=function(_e){this.jitter=_e};var p0=function(he){return this.__data__.set(he,"__lodash_hash_undefined__"),this},f0=function(he){return this.__data__.has(he)};function up(_e){var he=-1,Ue=_e==null?0:_e.length;for(this.__data__=new Df;++he<Ue;)this.add(_e[he])}up.prototype.add=up.prototype.push=p0,up.prototype.has=f0;var Gi=up,m0=function(he,Ue,$e,Ce){for(var jt=he.length,tr=$e+(Ce?1:-1);Ce?tr--:++tr<jt;)if(Ue(he[tr],tr,he))return tr;return-1},XT=function(he){return he!=he},ZT=function(he,Ue,$e){for(var Ce=$e-1,jt=he.length;++Ce<jt;)if(he[Ce]===Ue)return Ce;return-1},g0=function(he,Ue,$e){return Ue==Ue?ZT(he,Ue,$e):m0(he,XT,$e)},Ao=function(he,Ue){return!!(he!=null&&he.length)&&g0(he,Ue,0)>-1},ru=function(he,Ue,$e){for(var Ce=-1,jt=he==null?0:he.length;++Ce<jt;)if($e(Ue,he[Ce]))return!0;return!1},gm=function(he,Ue){return he.has(Ue)},ll=Gl(ic,"Set"),h0=function(){},ul=function(he){var Ue=-1,$e=Array(he.size);return he.forEach(function(Ce){$e[++Ue]=Ce}),$e},eC=ll&&1/ul(new ll([,-0]))[1]==1/0?function(_e){return new ll(_e)}:h0,jn=eC,tC=function(he,Ue,$e){var Ce=-1,jt=Ao,tr=he.length,rr=!0,fr=[],kr=fr;if($e)rr=!1,jt=ru;else if(tr>=200){var Pr=Ue?null:jn(he);if(Pr)return ul(Pr);rr=!1,jt=gm,kr=new Gi}else kr=Ue?[]:fr;e:for(;++Ce<tr;){var Rr=he[Ce],$r=Ue?Ue(Rr):Rr;if(Rr=$e||Rr!==0?Rr:0,rr&&$r==$r){for(var Hr=kr.length;Hr--;)if(kr[Hr]===$r)continue e;Ue&&kr.push($r),fr.push(Rr)}else jt(kr,$r,$e)||(kr!==fr&&kr.push($r),fr.push(Rr))}return fr},hm=function(he){return he&&he.length?tC(he):[]},av=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],sv=["transport not supported","client not handshaken","unauthorized"],v0=["reconnect"],rC=function(_e){function he($e,Ce){var jt;return(jt=_e.call(this)||this).url=Ce,jt.websocket=null,jt.socketConnectTimer=0,jt.core=$e,jt.url=Ce,jt.status="disconnected",jt.logger=$e.logger,jt.connect(),jt}ra(he,_e);var Ue=he.prototype;return Ue.connect=function(){var Ce=this;this.status!=="connecting"&&this.status!=="connected"?(this.status="connecting",this.core.adapters.request("https://"+this.url+"/socket.io/1/?t="+bo(),{method:"GET",dataType:"text",timeout:this.core.options.xhrConnectTimeout||8e3},{exception_service:6}).then(function(jt){var tr=jt.data.split(":"),rr=tr[0],fr=tr[1];return Ce.sessionId=rr,Ce.closeTimeout=1e3*fr,Ce._createWebsocket("wss://"+Ce.url+"/socket.io/1/websocket/"+rr)}).catch(function(jt){jt=jt||{},Ce.logger.error("imsocket::handshake fail. message: ",jt&&jt.message," err code: ",jt&&jt.code),jt.code=jt.code===408?408:415,Ce.status="disconnected",Ce.emit("handshakeFailed",jt)})):this.logger.warn("imsocket::socket is connecting or connected",this.status)},Ue.close=function(){if(this.websocket){this.logger.log("imsocket:: close websocket");try{this.websocket.send(this.encodePacket({type:"disconnect"}))}catch(Ce){this.logger.warn("attempt to send encodePacket error",Ce)}try{this.websocket.close()}catch(Ce){this.logger.warn("attempt to close websocket error",Ce)}this.clean()}},Ue.clean=function(){this.status="disconnected",this.websocket&&(this.socketUrl=void 0,this.websocket.onmessage=null,this.websocket.onopen=null,this.websocket.onerror=null,this.websocket.onclose=null,this.websocket=null,this.emit("disconnect"))},Ue.onConnect=function(){this.status="connected",this.resetCloseTimer(),this.emit("connect"),clearTimeout(this.socketConnectTimer)},Ue._createWebsocket=function(Ce){var jt,tr=this;this.socketConnectTimer=bi(function(){tr.logger.error("core:: socket connect timeout. url: ",tr.socketUrl),tr.emit("handshakeFailed",new Wi("BaseWebsocket::_createWebSocket socket connect timeout. url: "+tr.socketUrl,{},408))},this.core.options.socketConnectTimeout||8e3),this.socketUrl=Ce,this.websocket=new jo.WebSocket(Ce),this.websocket.onmessage=oa(jt=this.onMessage).call(jt,this),this.websocket.onclose=function(){tr.logger.log("imsocket:: websocket onclose done"),tr.clean()},this.websocket.onerror=function(rr){tr.logger.error("imsocket:: onerror",rr),tr.core.status==="logined"&&tr.core.clientSocket.ping()}},Ue.onMessage=function(Ce){var jt;this.resetCloseTimer();var tr=this.decodePacket(Ce.data);if(tr)switch(tr.type){case"connect":this.onConnect();break;case"disconnect":this.close();break;case"message":case"json":this.emit("message",tr.data);break;case"event":tr.name&&this.emit(tr.name,tr.args);break;case"error":tr.reason==="unauthorized"?this.emit("connect_failed",tr.reason):this.emit("error",tr.reason),this.logger.error("core:: socket onmessage type error. url: ",this.socketUrl),clearTimeout(this.socketConnectTimer),this.emit("handshakeFailed",new Wi("BaseWebsocket::onMessage socket error. url: "+this.socketUrl,{},415));break;case"heartbeat":(jt=this.websocket)===null||jt===void 0||jt.send(this.encodePacket({type:"heartbeat"}));break;default:this.logger.warn("imsocket::no handler type",tr.type)}},Ue.encodePacket=function(Ce){var jt,tr,rr=Ce.type,fr=Ce.id,kr=fr===void 0?"":fr,Pr=Ce.endpoint,Rr=Pr===void 0?"":Pr,$r=Ce.ack,Hr=null;if(!rr)return"";switch(rr){case"error":jt=Ce.reason?Ka(sv).call(sv,Ce.reason):"",tr=Ce.advice?Ka(v0).call(v0,Ce.advice):"",jt===""&&tr===""||(Hr=jt+(tr!==""?"+"+tr:""));break;case"message":Ce.data!==""&&(Hr=Ce.data);break;case"event":jt={name:Ce.name},jt=Ce.args&&Ce.args.length?{name:Ce.name,args:Ce.args}:{name:Ce.name},Hr=ha(jt);break;case"json":Hr=ha(Ce.data);break;case"connect":Ce.qs&&(Hr=Ce.qs);break;case"ack":Hr=Ce.ackId+(Ce.args&&Ce.args.length?"+"+ha(Ce.args):"")}var Gr=[Ka(av).call(av,rr),kr+($r==="data"?"+":""),Rr];return Hr!=null&&Gr.push(Hr),Gr.join(":")},Ue.decodePacket=function(Ce){if(Ce)if(Ce.charAt(0)!="�"){var jt=Ce.match(/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);if(jt){var tr,rr=jt[1],fr=jt[2],kr=jt[3],Pr=jt[4],Rr=jt[5],$r={type:av[+rr],endpoint:Pr};switch(fr&&($r.id=fr,$r.ack=!kr||"data"),$r.type){case"error":tr=Rr.split("+"),$r.reason=sv[+tr[0]]||"";break;case"message":$r.data=Rr||"";break;case"connect":$r.qs=Rr||"";break;case"event":try{var Hr=JSON.parse(Rr);$r.name=Hr.name,$r.args=Hr.args}catch(Gr){this.logger.error("imsocket::parseData::type::event error",Gr)}$r.args=$r.args||[];break;case"json":try{$r.data=JSON.parse(Rr)}catch(Gr){this.logger.error("imsocket::parseData::type::json error",Gr)}break;case"ack":if((tr=Rr.match(/^([0-9]+)(\+)?(.*)/))&&($r.ackId=tr[1],$r.args=[],tr[3]))try{$r.args=tr[3]?JSON.parse(tr[3]):[]}catch(Gr){this.logger.error("imsocket::parseData::type::ack error",Gr)}}return $r}}else this.logger.error("imsocket::unrecognize dataStr",xa(Ce).call(Ce,0,20))},Ue.send=function(Ce){var jt,tr={data:Ce,type:"message",endpoint:""};(jt=this.websocket)===null||jt===void 0||jt.send(this.encodePacket(tr))},Ue.resetCloseTimer=function(){var Ce=this;this.closeTimeout&&(clearTimeout(this.closeTimer),this.closeTimer=bi(function(){Ce.close()},this.closeTimeout))},he}(Sf);En({target:"Array",stat:!0},{isArray:Xi});var uc=_r.Array.isArray,y0=Gc.every,nC=ec("every");En({target:"Array",proto:!0,forced:!nC},{every:function(he){return y0(this,he,arguments.length>1?arguments[1]:void 0)}});var oC=ua("Array").every,iv=Array.prototype,aC=function(_e){var he=_e.every;return _e===iv||sr(iv,_e)&&he===iv.every?oC:he},b0=function(he){return Hi(he)&&ma(he)=="[object RegExp]"},S0=lc&&lc.isRegExp,sC=S0?cl(S0):b0,dp=function(he,Ue,$e,Ce){var jt=-1,tr=Ao,rr=!0,fr=he.length,kr=[],Pr=Ue.length;if(!fr)return kr;$e&&(Ue=Uf(Ue,cl($e))),Ce?(tr=ru,rr=!1):Ue.length>=200&&(tr=gm,rr=!1,Ue=new Gi(Ue));e:for(;++jt<fr;){var Rr=he[jt],$r=$e==null?Rr:$e(Rr);if(Rr=Ce||Rr!==0?Rr:0,rr&&$r==$r){for(var Hr=Pr;Hr--;)if(Ue[Hr]===$r)continue e;kr.push(Rr)}else tr(Ue,$r,Ce)||kr.push(Rr)}return kr},cv=ev(function(_e,he){return dm(_e)?dp(_e,he):[]}),T0=cv;function iC(_e,he){return he instanceof RegExp?"__REGEXP "+he.toString():he}function Xn(_e,he,Ue){var $e;he===void 0&&(he={});var Ce={};return yo($e=fa(_e)).call($e,function(jt){var tr=_e[jt].type,rr=Ue?"In "+Ue+", ":"";if(he[jt]===void 0){if(_e[jt].required===!1)return void(Ce[jt]=he[jt]);throw new Du(rr+'param "'+jt+'" is required',{key:jt},"required")}var fr=C0[tr];if(fr&&!fr(he,jt,_e[jt]))throw new Du(rr+'param "'+jt+'" expects '+ha(_e[jt],iC),{key:jt,value:he[jt]},ha(_e[jt]));Ce[jt]=he[jt]}),Ce}var Cs,C0={string:function(he,Ue,$e){var Ce=$e.allowEmpty,jt=$e.max,tr=$e.min,rr=$e.regExp,fr=he[Ue];return typeof fr=="string"&&(Ce!==!1||fr!=="")&&!(typeof jt=="number"&&fr.length>jt)&&!(typeof tr=="number"&&fr.length<tr)&&!(sC(rr)&&!rr.test(fr))},number:function(he,Ue,$e){var Ce=$e.min,jt=$e.max,tr=he[Ue];return typeof tr=="number"&&!(typeof Ce=="number"&&tr<Ce)&&!(typeof jt=="number"&&tr>jt)},boolean:function(he,Ue){return typeof he[Ue]=="boolean"},enum:function(he,Ue,$e){var Ce=nm($e),jt=he[Ue];return!Ce||Ka(Ce).call(Ce,jt)>-1},array:function(he,Ue,$e){var Ce,jt=$e.itemType,tr=$e.rules,rr=$e.min,fr=$e.max,kr=nm($e),Pr=he[Ue];return!!uc(Pr)&&!(typeof fr=="number"&&Pr.length>fr)&&!(typeof rr=="number"&&Pr.length<rr)&&!(jt&&jt!=="enum"&&!aC(Pr).call(Pr,function(Rr){return typeof Rr===jt}))&&(jt!=="enum"||!kr||!T0.apply(void 0,Os(Ce=[Pr]).call(Ce,kr)).length)&&(tr&&yo(Pr).call(Pr,function(Rr,$r){return Xn(tr,Rr,Ue+"["+$r+"]")}),!0)},object:function(he,Ue,$e){var Ce=$e.rules,jt=he[Ue];return Ce&&Xn(Ce,jt,Ue),!0}},nu="weblink.netease.im:443";(function(_e){_e[_e.ACTIVE=1]="ACTIVE",_e[_e.KICKED=2]="KICKED",_e[_e.OFFLINE=3]="OFFLINE"})(Cs||(Cs={}));var Qs=function(){function _e(Ue){this.linkUrls=[],this.isAutoReconnect=!1,this.packetTimeout=3e4,this.packetSer=1,this.retryCount=0,this.reconnectTimer=0,this.backoff=new YT({max:8e3,min:1600,jitter:.01}),this.sendingCmdMap=new xc,this.pingTimer=0,this.hasNetworkListener=!1,this.core=Ue,this.logger=Ue.logger,this.reporter=Ue.reporter,this.timerManager=Ue.timerManager}var he=_e.prototype;return he.connect=function($e,Ce){return $e===void 0&&($e={}),qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr,Rr;return Kr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(Xn({linkUrls:{type:"array",itemType:"string",required:!1}},$e),/^(unconnected|waitReconnect)$/.test(this.core.status)){Hr.next=5;break}return tr="Core socket status is "+this.core.status+", and would not connect",this.logger.warn(tr),Hr.abrupt("return",Ca.reject(tr));case 5:this.core.status="connecting",$e.linkUrls&&$e.linkUrls.length>0&&(this.linkUrls=Os(rr=$e.linkUrls).call(rr,this.linkUrls),this.linkUrls=hm(this.linkUrls)),this.linkUrls.length===0&&this.linkUrls.push(nu),fr=0;case 9:if(!(fr<this.linkUrls.length)){Hr.next=31;break}return kr=this.linkUrls[fr],Pr=new Date().getTime(),Hr.prev=12,Hr.next=15,this.doConnect(kr);case 15:return this.core.status="connected",this.logger.log("core:: connect success with url: "+kr),Hr.abrupt("return",kr);case 20:Hr.prev=20,Hr.t0=Hr.catch(12),Rr=Hr.t0,Ce&&Ce(Rr,kr),this.reporter.reportTraceStart("exceptions",{user_id:this.core.options.account,start_time:Pr,action:0,exception_service:6}),this.reporter.reportTraceUpdateV2("exceptions",{code:typeof Rr.code=="number"?Rr.code:0,description:Rr.message||""+Rr.code,operation_type:0,target:kr},{asyncParams:jo.net.getNetworkStatus()}),this.reporter.reportTraceEnd("exceptions",1),this.logger.warn("core:: connect failed with url: "+kr,Hr.t0);case 28:fr++,Hr.next=9;break;case 31:throw this.retryCount===0?this.doDisconnect(Cs.ACTIVE,"SocketHandshakeFailed"):this.doDisconnect(Cs.OFFLINE,"ReconnectHadRetryAllLinks"),new Error("core: socket xhr or socket connect failed");case 33:case"end":return Hr.stop()}},jt,this,[[12,20]])}))},he.doConnect=function($e){var Ce=this,jt=!1;return new Ca(function(tr,rr){var fr;Ce.socket=new rC(Ce.core,$e),Ce.socket.on("connect",function(){Ce.logger.log("socket on connect",$e),jt=!0,tr()}),Ce.socket.on("message",oa(fr=Ce.onMessage).call(fr,Ce)),Ce.socket.on("disconnect",function(kr){Ce.logger.log("core:: socket on disconnect",kr),jt=!0,Ce.doDisconnect(Cs.OFFLINE,"SocketOnDisconnect")}),Ce.socket.on("handshakeFailed",function(kr){jt?Ce.ping():(Ce.logger.error("core:: handshake failed. ",kr&&kr.message),Ce.cleanSocket()),jt=!0,rr(kr)})})},he.cleanSocket=function(){this.socket&&(typeof this.socket.removeAllListeners=="function"&&this.socket.removeAllListeners(),typeof this.socket.close=="function"&&this.socket.close(),this.socket=void 0)},he.beforeConnect=function(){this.reconnectTimer&&clearTimeout(this.reconnectTimer)},he.resetConnectStatus=function(){clearTimeout(this.reconnectTimer),this.backoff.reset(),this.retryCount=0,this.initOnlineListener()},he.doDisconnect=function($e,Ce){if(this.logger.log("doDisconnect: type "+$e+", description "+Ce),this.core.status!=="unconnected"){var jt={1:"close",2:"kicked",3:"broken"}[$e]||"";this.markAllCmdInvaild(new Wi("Packet timeout due to instance disconnect",{disconnect_reason:jt},415)),this.timerManager.destroy(),clearTimeout(this.pingTimer),this.cleanSocket();var tr=!this.core.options.needReconnect||this.retryCount>=this.core.options.reconnectionAttempts;if($e===Cs.ACTIVE||tr)this.logger.log("doDisconnect: emit disconnect, type "+$e,tr),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"),this.destroyOnlineListener();else if($e===Cs.KICKED){this.logger.log("doDisconnect: kicked"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer);var rr=typeof Ce=="string"?{reason:"unknow",message:Ce}:Ce;this.core.eventBus.emit("kicked",rr),this.core.emit("kicked",rr),this.destroyOnlineListener()}else $e===Cs.OFFLINE&&this.core.auth.isManualLoginAttempt?(this.logger.log("doDisconnect: offline in manual login phase. no reconnect"),this.core.status="unconnected",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.destroyOnlineListener()):$e===Cs.OFFLINE?(this.logger.log("doDisconnect: start to reconnect"),this.attempToReconnect()):this.logger.log("doDisconnect: nothing to do")}else this.logger.warn("doDisconnect: already unconnected")},he.attempToReconnect=function(){var $e=this;if(this.core.status!=="waitReconnect"){this.retryCount===0&&(this.core.eventBus.emit("disconnect"),this.core.emit("disconnect"));var Ce=this.backoff.duration();this.retryCount++,this.logger.log("willReconnect "+this.retryCount+" "+Ce),this.core.eventBus.emit("willReconnect",{retryCount:this.retryCount,duration:Ce}),this.core.emit("willReconnect",{retryCount:this.retryCount,duration:Ce}),this.core.status="waitReconnect",this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=bi(function(){return qn($e,void 0,void 0,Kr.mark(function jt(){var tr=this;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(this.core.status==="waitReconnect"){fr.next=3;break}return this.logger.warn("doDisconnect: reconnectTimer status is "+this.core.status+", would not go on reconnecting"),fr.abrupt("return");case 3:return fr.next=5,jo.net.getNetworkStatus();case 5:fr.sent.net_connect===!1?(this.logger.log("doDisconnect: skip this reconnection attempt because network is offline"),this.core.status="connecting",this.retryCount>=this.core.options.reconnectionAttempts?this.doDisconnect(Cs.OFFLINE,"MaxReconnectionAttemptExceed"):this.attempToReconnect()):this.core.auth.login({isAutoReconnect:!0}).catch(function(){tr.logger.error("core::attempToReconnect failed "+tr.retryCount)});case 7:case"end":return fr.stop()}},jt,this)}))},Ce)}else this.logger.warn("doDisconnect: already is waiting reconnect")},he.sendCmd=function($e,Ce,jt){var tr=this;if(this.core.status!=="logined"&&$e!=="login"&&$e!=="chatroomLogin"&&$e!=="qchatLogin")return this.logger.warn("instance status is "+this.core.status+", so can not sendCmd "+$e),Ca.reject({cmd:$e,error:{code:"No_connected",message:"Connection not established",timetag:new Date().getTime()}});if(!this.socket||!this.socket.send)return Ca.reject("No_socket");var rr=$e!=="heartbeat",fr=rr?this.packetSer++:0,kr=function(An,kn,Kn,Qn){var To=tp[An];if(!To)return Kn.error("createCmd:: can not find cmd config: ",An),null;var Eo,Ko={SER:kn,SID:To.sid,CID:To.cid,Q:[]};return To.params&&Qn&&yo(Eo=To.params).call(Eo,function(Ln){var Wr=Qn[Ln.name];if(!Yl(Wr)){var ro=Ln.type,so=Ln.reflectMapper;switch(Ln.type){case"PropertyArray":ro="ArrayMable",Wr=Oo(Wr).call(Wr,function(Yn){return{t:"Property",v:so?Nh(Yn,so):Yn}});break;case"Property":Wr=so?Nh(Wr,so):Wr;break;case"Bool":case"bool":Wr=Wr?"true":"false"}Ko.Q.push({t:ro,v:Wr})}}),{packet:Ko,hasPacketResponse:typeof To.hasPacketResponse!="boolean"||To.hasPacketResponse,hasPacketTimer:typeof To.hasPacketTimer!="boolean"||To.hasPacketTimer}}($e,fr,this.logger,Ce);if(!kr){var Pr="SendCmd "+fr+" "+$e+" error";return this.logger.error(Pr),Ca.reject(Pr)}var Rr=kr.packet,$r=kr.hasPacketResponse,Hr=kr.hasPacketTimer,Gr=ha(Rr);rr&&(this.core.options.debugLevel==="debug"?this.logger.debug("core::sendCmd",$e,"ser:"+fr,Gr):this.logger.log("core::sendCmd",$e,"ser:"+fr));var bn=new Date().getTime();return new Ca(function(Sn,An){$r&&tr.sendingCmdMap.set(fr,{cmd:$e,params:Ce,callback:[Sn,An],timer:Hr?bi(function(){var Kn=new Yf(408,$e,"Packet Timeout",new Date().getTime(),{message:"ser "+fr+" cmd "+$e+" timeout"});Kn.callFunc="sendCmd",tr.markCmdInvalid(fr,Kn,$e)},jt&&jt.timeout?jt.timeout:tr.core.config.timeout):null});try{tr.socket.send(Gr),$r||Sn(Rr)}catch(Kn){var kn=new Yf(415,$e,Kn&&Kn.message||"Unable to send packet",new Date().getTime(),{message:"send json error",rawError:Kn});kn.callFunc="sendCmd",tr.markCmdInvalid(fr,kn,$e),An(Kn)}}).catch(function(Sn){var An,kn=[408,415];if(!mi(kn).call(kn,Sn.code))return Ca.reject(Sn);tr.reporter.reportTraceStart("exceptions",{user_id:tr.core.options.account,trace_id:(An=tr.socket)===null||An===void 0?void 0:An.sessionId,start_time:bn,action:2,exception_service:6});var Kn=Bs(Sn,"data.disconnect_reason")||"",Qn=Sn.code===408?"Send failed due to timeout":"Send failed. Reason unknown";return Qn=Sn.code===415?ha({disconnect_reason:Kn}):Qn,tr.reporter.reportTraceUpdateV2("exceptions",{code:Sn.code||415,description:Qn,operation_type:1,target:Rr.SID+"-"+Rr.CID,context:""+Rr.SER},{asyncParams:jo.net.getNetworkStatus()}),tr.reporter.reportTraceEnd("exceptions",1),Ca.reject(Sn)})},he.onMessage=function($e){var Ce=Ah($e,this.logger);if(Ce){var jt=Ce.raw.ser;Ce.error&&this.logger.error("core:onMessage packet error",Ce.raw.sid+"_"+Ce.raw.cid+", ser:"+jt+",",Ce.error),Ce.notFound?this.logger.warn("core::onMessage packet not found",Ce.raw.sid+"_"+Ce.raw.cid+", ser:"+jt):(Ce.cmd!=="heartbeat"&&(this.core.options.debugLevel==="debug"?this.logger.debug("imsocket::recvCmd ser:"+jt,Ce.cmd,Ce.content):this.logger.log("imsocket::recvCmd ser:"+jt,Ce.cmd)),Ce.__receiveTime=bo(),this.packetHandler(Ce))}},he.packetHandler=function($e){var Ce,jt;if($e){var tr=$e.raw.ser,rr=this.sendingCmdMap.get(tr);if(rr&&rr.cmd===$e.cmd){var fr=rr.callback,kr=rr.timer,Pr=rr.params;if(clearTimeout(kr),$e.params=Pr,this.sendingCmdMap.delete(tr),$e.cmd==="heartbeat")return void fr[0]();var Rr=(Ce=this.core[$e.service])===null||Ce===void 0?void 0:Ce.process($e);Rr&&typeof Rr.then=="function"?Rr.then(function($r){fr[0]($r)}).catch(function($r){fr[1]($r)}):(this.logger.log("imsocket:: handlerFn without promise",$e.service,$e.cmd),fr[0]())}else(jt=this.core[$e.service])===null||jt===void 0||jt.process($e)}},he.markCmdInvalid=function($e,Ce,jt){var tr=this.sendingCmdMap.get($e);if(tr){var rr=tr.callback,fr=tr.timer;fr&&clearTimeout(fr),this.sendingCmdMap.delete($e),this.logger.warn("packet "+$e+", "+jt+" is invalid:",Ce),rr[1](Ce)}},he.markAllCmdInvaild=function($e){var Ce,jt=this;this.logger.log("markAllCmdInvaild",$e),yo(Ce=this.sendingCmdMap).call(Ce,function(tr){var rr=tr.callback,fr=tr.timer,kr=tr.cmd;jt.logger.debug('markAllCmdInvaild:: cmd "'+kr+'"'),fr&&clearTimeout(fr),rr[1]($e)}),this.sendingCmdMap.clear()},he.ping=function(){return qn(this,void 0,void 0,Kr.mark(function $e(){var Ce=this;return Kr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return clearTimeout(this.pingTimer),tr.prev=1,tr.next=4,this.sendCmd("heartbeat");case 4:tr.next=14;break;case 6:return tr.prev=6,tr.t0=tr.catch(1),tr.next=10,this.testHeartBeat5Timeout();case 10:if(!tr.sent){tr.next=14;break}return this.doDisconnect(Cs.OFFLINE,"PingError"),tr.abrupt("return");case 14:this.pingTimer=bi(function(){Ce.ping()},3e4);case 15:case"end":return tr.stop()}},$e,this,[[1,6]])}))},he.testHeartBeat5Timeout=function(){return qn(this,void 0,void 0,Kr.mark(function $e(){var Ce;return Kr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:clearTimeout(this.pingTimer),Ce=0;case 2:if(!(Ce<5)){tr.next=15;break}return tr.prev=3,tr.next=6,this.sendCmd("heartbeat",{},{timeout:3e3});case 6:return tr.abrupt("return",!1);case 9:tr.prev=9,tr.t0=tr.catch(3),this.logger.debug("core:: test heartbeat "+Ce+" Timeout");case 12:Ce++,tr.next=2;break;case 15:return tr.abrupt("return",!0);case 16:case"end":return tr.stop()}},$e,this,[[3,9]])}))},he.initOnlineListener=function(){var $e=this;this.hasNetworkListener||(this.logger.log("core::onlineListener:init"),this.hasNetworkListener=!0,jo.net.onNetworkStatusChange(function(Ce){$e.logger.log("core::onlineListener:network change",Ce),Ce.isConnected&&$e.core.status==="logined"?$e.ping():Ce.isConnected&&$e.core.status==="waitReconnect"?($e.reconnectTimer&&clearTimeout($e.reconnectTimer),$e.core.auth.login({isAutoReconnect:!0}).catch(function(){$e.logger.error("core::attempToReconnect failed "+$e.retryCount)})):Ce.isConnected||$e.doDisconnect(Cs.OFFLINE,"OfflineListener")}))},he.destroyOnlineListener=function(){this.logger.log("core::onlineListener:destroy"),jo.net.offNetworkStatusChange(),this.hasNetworkListener=!1},he.disconnect=function(){switch(this.core.status){case"connected":case"logined":case"connecting":case"waitReconnect":return this.doDisconnect(Cs.ACTIVE,"UserActiveDisconnect"),Ca.resolve();case"unconnected":case"destroyed":return Ca.resolve()}},_e}(),M0=function(){function _e(he){this.socketLinkUrls=[],this.core=he,this.options=this.core.options,this.logger=this.core.logger}return _e.prototype.getLbsInfos=function(){var Ue;return qn(this,void 0,void 0,Kr.mark(function $e(){var Ce,jt,tr,rr,fr,kr,Pr,Rr,$r,Hr;return Kr.wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(!(this.socketLinkUrls.length>0)){bn.next=4;break}return Ce=this.socketLinkUrls,this.core.logger.log("auth::getLbsInfos:use cache link",Ce),bn.abrupt("return",Ca.resolve(Ce));case 4:return jt=this.options.lbsUrls[0],tr=Ka(jt).call(jt,"?")>-1?"&":"?",rr=jt+tr+"k="+this.options.appkey+"&id="+this.options.account+"&sv=180&pv=1&networkType=0",bn.prev=7,this.logger.log("getLbsInfos ",rr),bn.next=11,this.core.adapters.request(rr,{method:"GET",dataType:"json",timeout:1e4},{exception_service:1});case 11:if((kr=bn.sent).status===200&&kr.data){bn.next=15;break}throw this.logger.error("getLbsInfos::error status",kr.status,kr),new Error("getLbsInfos failed, status "+kr.status);case 15:this.core.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:rr,code:200,succeed:!0},{asyncParams:jo.net.getNetworkStatus()}),Pr=kr.data,Rr=[this.options.linkUrl],Bs(Pr,"common.link")&&(Rr=Os($r=Bs(Pr,"common.link")).call($r,Rr)),Bs(Pr,'common["link.default"]')&&(Rr=Os(Rr).call(Rr,Bs(Pr,'common["link.default"]'))),this.socketLinkUrls=hm(Rr),kr.data["nos-chunk"]&&((Ue=this.core.cloudStorage)===null||Ue===void 0||Ue.setOptions({chunkUploadHost:kr.data["nos-chunk"]})),this.logger.log("getLbsInfos success, socket link:",xa(fr=this.socketLinkUrls).call(fr,0),"chunkUploadHost: ",kr.data["nos-chunk"]),bn.next=31;break;case 25:bn.prev=25,bn.t0=bn.catch(7),Hr=bn.t0,this.logger.error("getLbsInfos::error",Hr),this.socketLinkUrls=[this.options.linkUrl],this.core.reporter.reportTraceUpdateV2("login",{operation_type:"HTTP",target:rr,description:Hr.message,code:Hr.code||0,succeed:!1},{asyncParams:jo.net.getNetworkStatus()});case 31:return bn.abrupt("return",this.socketLinkUrls);case 32:case"end":return bn.stop()}},$e,this,[[7,25]])}))},_e}(),cC=function(){function _e(he){this.core=he}return _e.prototype.verifyAuthentication=function(Ue){var $e,Ce;return Ue===void 0&&(Ue=!1),qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr,Rr,$r,Hr,Gr,bn,Sn;return Kr.wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:return rr=this.core.options,fr=jo.getSystemInfo(),kr=Gn(Gn({},rr),{appLogin:Ue?0:1,appkey:rr.appkey,account:rr.account,token:rr.token,deviceId:this.core.config.deviceId,clientType:16,protocolVersion:1,sdkVersion:91402,sdkHumanVersion:"0.17.2",os:fr.os,browser:fr.browser,session:($e=this.core.clientSocket.socket)===null||$e===void 0?void 0:$e.sessionId,userAgent:this.core.options.loginSDKTypeParamCompat?"Native/0.17.2":xa(tr=fr.userAgent).call(tr,0,299),libEnv:this.core.options.loginSDKTypeParamCompat?void 0:fr.libEnv,hostEnv:this.core.options.loginSDKTypeParamCompat?0:fr.hostEnvEnum}),Pr=fr.os.toLowerCase(),jo.platform!=="UNIAPP"||Pr!=="ios"&&Pr!=="android"||(kr.isReactNative=1,kr.clientType=Pr==="ios"?2:1,fr.pushDeviceInfo&&fr.pushDeviceInfo.MANUFACTURER&&(kr.deviceInfo=ha(fr.pushDeviceInfo))),this.core.logger.log("auth::do login ",rr.account,(Ce=this.core.clientSocket.socket)===null||Ce===void 0?void 0:Ce.sessionId),kn.next=8,this.core.clientSocket.sendCmd("login",{login:kr});case 8:if(!(Rr=kn.sent).error){kn.next=11;break}throw Rr.error;case 11:return $r=Rr.content,Hr=$r.loginRes,Gr=$r.loginPorts,bn=$r.aosPushInfo,Sn=im(Gr,2),(Sn=bs(Sn).call(Sn,function(Kn){return Kn.connectionId!==Hr.connectionId})).length>0&&this.core.emit("multiPortLogin",Sn),kn.abrupt("return",Gn(Gn({},Hr),{aosPushInfo:bn}));case 16:case"end":return kn.stop()}},jt,this)}))},_e}(),lv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"auth",$e)||this).account="",Ce.token="",Ce.deviceId="",Ce.isManualLoginAttempt=!1,Ss({cmdMap:Xf,cmdConfig:CT}),Ce.lbsService=new M0($e),Ce.authenticatorService=new cC($e),Ce}ra(he,_e);var Ue=he.prototype;return Ue.login=function(Ce){return Ce===void 0&&(Ce={}),qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Ce.isAutoReconnect||(this.isManualLoginAttempt=!0),rr.next=3,this._connect(Ce);case 3:return this.core.abtest.abtRequest(),rr.prev=4,rr.next=7,this.doLogin(Ce.isAutoReconnect);case 7:this.isManualLoginAttempt=!1,rr.next=14;break;case 10:throw rr.prev=10,rr.t0=rr.catch(4),this.isManualLoginAttempt=!1,rr.t0;case 14:case"end":return rr.stop()}},jt,this,[[4,10]])}))},Ue._connect=function(Ce){return Ce===void 0&&(Ce={}),qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr=this;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(/^(unconnected|waitReconnect)$/.test(this.core.status)){Rr.next=4;break}return tr="NIM status is "+this.core.status+", and would not connect",this.logger.warn(tr),Rr.abrupt("return",Ca.reject(tr));case 4:return this.core.clientSocket.beforeConnect(),this.core.reporter.reportTraceCancel("login"),this.core.reporter.reportTraceStart("login",{user_id:this.core.options.account,action:Ce.isAutoReconnect?"auto_login":"manual_login"}),this.core.reporter.reportTraceUpdateV2("login",{code:0,description:ha(Gn(Gn({},this.core.options),{account:"***",token:"***"})),operation_type:"conf_init",succeed:!0,duration:0,target:""}),Rr.next=10,this.lbsService.getLbsInfos();case 10:return rr=Rr.sent,Rr.prev=11,Rr.next=14,this.core.clientSocket.connect({linkUrls:rr,isAutoReconnect:Ce.isAutoReconnect},function($r,Hr){kr.core.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:Hr,code:$r.code||408,description:"ws_handshake_failed:"+$r.message,succeed:!1},{asyncParams:jo.net.getNetworkStatus()})});case 14:(fr=Rr.sent)&&this.core.reporter.reportTraceUpdateV2("login",{operation_type:"TCP",target:fr,code:200,succeed:!0},{asyncParams:jo.net.getNetworkStatus()}),Rr.next=22;break;case 18:throw Rr.prev=18,Rr.t0=Rr.catch(11),this.core.reporter.reportTraceEnd("login",!1),Rr.t0;case 22:case"end":return Rr.stop()}},jt,this,[[11,18]])}))},Ue.doLogin=function(Ce){return Ce===void 0&&(Ce=!1),qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Rr.prev=0,Rr.next=3,this.authenticatorService.verifyAuthentication(Ce);case 3:tr=Rr.sent,this.core.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:200,succeed:!0},{asyncParams:jo.net.getNetworkStatus()}),this.core.reporter.reportTraceEnd("login",!0),this.core.status="logined",Rr.next=21;break;case 9:if(Rr.prev=9,Rr.t0=Rr.catch(0),rr=Rr.t0,fr=Bs(rr,"data.disconnect_reason")||"",kr=rr.code===415?ha({disconnect_reason:fr}):rr.message,this.core.logger.warn("nim login:: login failed",Rr.t0),this.core.reporter.reportTraceUpdateV2("login",{operation_type:"protocol",target:"2-3",code:rr.code||0,succeed:!1,description:kr},{asyncParams:jo.net.getNetworkStatus()}),this.core.reporter.reportTraceEnd("login",!1),this.core.clientSocket.doDisconnect(Cs.OFFLINE,this.isManualLoginAttempt?"FailedToInitializeLogin":"ReconnectLoginFailed"),!this.isManualLoginAttempt){Rr.next=20;break}throw Rr.t0;case 20:return Rr.abrupt("return");case 21:return Rr.prev=21,Rr.next=24,this.core.cloudStorage.init();case 24:Rr.next=29;break;case 26:Rr.prev=26,Rr.t1=Rr.catch(21),this.core.logger.error("NIM:login cloudStorage init failed ",Rr.t1);case 29:if(this.core.eventBus.emit("logined",tr),this.core.emit("logined",tr),this.core.logger.log("login done"),this.core.clientSocket.resetConnectStatus(),!this.core.sync||!this.core.sync.doSync){Rr.next=36;break}return Rr.next=36,this.core.sync.doSync();case 36:this.core.clientSocket.ping();case 37:case"end":return Rr.stop()}},jt,this,[[0,9],[21,26]])}))},Ue.kick=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return kr.next=2,this.core.clientSocket.sendCmd("kick",Ce);case 2:return rr=kr.sent,kr.abrupt("return",(jt=rr.content)===null||jt===void 0?void 0:jt.deviceIds);case 4:case"end":return kr.stop()}},tr,this)}))},Ue.multiPortLoginHandler=function(Ce){if(Ce.error)this.logger.error("multiPortLoginHandler:: error, ",Ce.error);else{var jt=Ce.content,tr=im(jt.loginPorts,jt.state);tr.length>0&&this.core.emit("multiPortLogin",tr)}},Ue.kickedHandler=function(Ce){if(Ce.error)this.logger.error("kickedHandler:: error, ",Ce.error);else{var jt=function(rr){var fr=ai({clientType:{type:"enum",values:np},customClientType:{type:"number"}},rr),kr=Zb[fr.reason];return Gn(fr,kr=kr||{reason:"unknow",message:"Unknown reason"})}(Ce.content);this.logger.warn("kicked::",jt),this.core.clientSocket.doDisconnect(Cs.KICKED,jt)}},he}(Ls),k0={"5_1":"sync"},uv={sync:{sid:5,cid:1,service:"sync",hasPacketTimer:!1,params:[{type:"Property",name:"sync",reflectMapper:{myInfo:1,offlineMsgs:2,teams:3,roamingMsgs:7,relations:9,friends:11,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,recallMsg:17,sessionAck:18,broadcastMsgs:20,avSignal:21,superTeams:22,mySuperTeamMembers:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteSelfMsgs:27,stickTopSessions:28,sessionHistoryMsgsDelete:29}}],response:[{type:"Number",name:"timetag"}]}};tv(function(_e,he,Ue,$e){tu(he,Gu(he),_e,$e)});var dc,Jo=(dc=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return dc()+dc()+dc()+dc()+dc()+dc()+dc()+dc()});function pc(_e){var he;return bs(he=fa(_e)).call(he,function(Ue){return!(+Ue>=0)})}function w0(_e,he){var Ue,$e=bs(Ue=fa(_e)).call(Ue,function(Ce){return _e[Ce]==he});return $e.length>0?$e[0]:void 0}function _i(_e,he){if(he===void 0&&(he="-"),!_e)throw new Wi("No sessionId",{},400);var Ue=Ka(_e).call(_e,he);if(Ue===-1)throw new Wi("Can not find conjunctions",{},400);var $e=xa(_e).call(_e,0,Ue);return{accid:xa(_e).call(_e,Ue+1),scene:$e==="super_team"?"superTeam":$e}}function pp(){return Ca.resolve()}var Fo=function(_e){function he($e,Ce){var jt;return Ce===void 0&&(Ce={}),(jt=_e.call(this,"sync",$e)||this).options=Ce,jt.syncDoneFlag=!1,jt.options=Gn({myInfo:!!$e.user.name,offlineMsgs:!!$e.msg.name,teams:!!$e.team.name,myTeamMembers:!!$e.team.name,roamingMsgs:!!$e.msg.name,relations:!!$e.user.name,friends:!!$e.friend.name,friendUsers:!!$e.user.name,msgReceipts:!!$e.msg.name,recallMsg:!!$e.msg.name,sessionAck:!!$e.session.name,superTeamSessionAck:!!$e.session.name,superTeams:!!$e.superTeam.name,mySuperTeamMembers:!!$e.superTeam.name,superTeamRoamingMsgs:!!$e.superTeam.name,deleteSuperTeamMsg:!!$e.superTeam.name,deleteSelfMsgs:!!$e.msg.name,sessionHistoryMsgsDelete:!!$e.msgLog.name,avSignal:!!$e.signaling.name},Ce),jt.timetags={},jt.pArray=[],jt.initEventListeners(),Ss({cmdMap:k0,cmdConfig:uv}),jt}ra(he,_e);var Ue=he.prototype;return Ue.setOptions=function(Ce){Ce===void 0&&(Ce={}),this.options=Gn(this.options,Ce)},Ue.getSyncDoneFlag=function(){return this.syncDoneFlag},Ue.doSync=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return jt=this.genSyncParams(),this.logger.log("doSync: ",jt),rr.next=4,this.core.sendCmd("sync",{sync:jt});case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.initEventListeners=function(){var Ce=this;this.core.eventBus.on("sync/updateTimetag",function(jt){var tr;yo(tr=fa(jt)).call(tr,function(rr){jt[rr]>(Ce.timetags[rr]||0)&&(Ce.timetags[rr]=jt[rr])})}),this.core.eventBus.on("logined",function(){Ce.syncDoneFlag=!1})},Ue.genSyncParams=function(){var Ce,jt,tr=this;return qf(Ce=bs(jt=fa(this.options)).call(jt,function(rr){var fr=rr;return tr.options[fr]})).call(Ce,function(rr,fr){var kr=fr;return rr[kr]=tr.timetags[kr]||0,rr},{})},Ue.handleImmediate=function(Ce){var jt;this.core.session&&this.core.session.onSyncDone&&this.core.session.onSyncDone(),this.logger.log("sync: emit syncdone",(jt=Ce.content)===null||jt===void 0?void 0:jt.timetag),this.syncDoneFlag=!0,this.core.emit("syncdone")},Ue.syncHandler=function(Ce){var jt=this;(function(){return typeof tt<"u"&&tt.getSystemInfo?"TT":typeof swan<"u"&&swan.getSystemInfo?"BAIDU":typeof my<"u"&&my.getSystemInfo?"ALI":typeof wx<"u"&&wx.getSystemInfo?"WX":"unknow environment"})()==="ALI"?(this.logger.log("sync: emit ALIAPP sycnHandler, handle later"),bi(function(){jt.handleImmediate(Ce)},100)):this.handleImmediate(Ce)},he}(Ls),lC=TypeError,_0=Object.getOwnPropertyDescriptor,uC=kt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(_e){return _e instanceof TypeError}}()?function(_e,he){if(Xi(_e)&&!_0(_e,"length").writable)throw lC("Cannot set read only .length");return _e.length=he}:function(_e,he){return _e.length=he},dC=TypeError,vm=function(_e,he){if(!delete _e[he])throw dC("Cannot delete property "+Tn(he)+" of "+Tn(_e))},dv=wd("splice"),ed=Math.max,x0=Math.min;En({target:"Array",proto:!0,forced:!dv},{splice:function(he,Ue){var $e,Ce,jt,tr,rr,fr,kr=Pn(this),Pr=rs(kr),Rr=Li(he,Pr),$r=arguments.length;for($r===0?$e=Ce=0:$r===1?($e=0,Ce=Pr-Rr):($e=$r-2,Ce=x0(ed(hc(Ue),0),Pr-Rr)),ba(Pr+$e-Ce),jt=Tc(kr,Ce),tr=0;tr<Ce;tr++)(rr=Rr+tr)in kr&&Di(jt,tr,kr[rr]);if(jt.length=Ce,$e<Ce){for(tr=Rr;tr<Pr-Ce;tr++)fr=tr+$e,(rr=tr+Ce)in kr?kr[fr]=kr[rr]:vm(kr,fr);for(tr=Pr;tr>Pr-Ce+$e;tr--)vm(kr,tr-1)}else if($e>Ce)for(tr=Pr-Ce;tr>Rr;tr--)fr=tr+$e-1,(rr=tr+Ce-1)in kr?kr[fr]=kr[rr]:vm(kr,fr);for(tr=0;tr<$e;tr++)kr[tr+Rr]=arguments[tr+2];return uC(kr,Pr-Ce+$e),jt}});var ym=ua("Array").splice,fp=Array.prototype,pv=function(_e){var he=_e.splice;return _e===fp||sr(fp,_e)&&he===fp.splice?ym:he},I0=function(_e,he,Ue,$e){try{return $e?he(po(Ue)[0],Ue[1]):he(Ue)}catch(Ce){nf(_e,"throw",Ce)}},ds=Array,ou=!vf(function(_e){Array.from(_e)});En({target:"Array",stat:!0,forced:ou},{from:function(he){var Ue=Pn(he),$e=Kp(this),Ce=arguments.length,jt=Ce>1?arguments[1]:void 0,tr=jt!==void 0;tr&&(jt=Go(jt,Ce>2?arguments[2]:void 0));var rr,fr,kr,Pr,Rr,$r,Hr=rf(Ue),Gr=0;if(!Hr||this===ds&&tf(Hr))for(rr=rs(Ue),fr=$e?new this(rr):ds(rr);rr>Gr;Gr++)$r=tr?jt(Ue[Gr],Gr):Ue[Gr],Di(fr,Gr,$r);else for(Rr=(Pr=Cu(Ue,Hr)).next,fr=$e?new this:[];!(kr=ze(Rr,Pr)).done;Gr++)$r=tr?I0(Pr,jt,[kr.value,Gr],!0):kr.value,Di(fr,Gr,$r);return fr.length=Gr,fr}});var Ki=_r.Array.from,Is=rf;function fc(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(uc(_e)||($e=function(tr,rr){var fr;if(tr){if(typeof tr=="string")return E0(tr,rr);var kr=xa(fr=Object.prototype.toString.call(tr)).call(fr,8,-1);if(kr==="Object"&&tr.constructor&&(kr=tr.constructor.name),kr==="Map"||kr==="Set")return Ki(tr);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return E0(tr,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E0(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var mp=function(){function _e(){this.timerList=[],this.id=0,this.timer=null,this.timeout=0}var he=_e.prototype;return he.addTimer=function($e,Ce,jt){Ce===void 0&&(Ce=0),jt===void 0&&(jt=1);var tr=new Date().getTime(),rr=this.id;return this.timerList.push({id:rr,loop:jt,count:0,timeout:tr+Ce,interval:Ce,callback:$e}),this.id++,this.checkTimer(tr),rr},he.checkTimer=function($e){if($e===void 0&&($e=new Date().getTime()),this.removeFinished(),this.timerList.length!==0||this.timer==null){for(var Ce,jt,tr=0,rr=fc(this.timerList);!(Ce=rr()).done;){var fr=Ce.value;(tr===0||tr>fr.timeout)&&(tr=fr.timeout)}this.timerList.length!==0&&(this.timer===null||tr<this.timeout||this.timeout<$e)&&(this.timer=bi(oa(jt=this.nowTime).call(jt,this),tr-$e),this.timeout=tr)}},he.nowTime=function(){for(var $e,Ce=new Date().getTime(),jt=fc(this.timerList);!($e=jt()).done;){var tr=$e.value;Ce>=tr.timeout&&(tr.callback(),tr.count++,tr.timeout=Ce+tr.interval)}this.clerTime(),this.checkTimer(Ce)},he.clerTime=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},he.deleteTimer=function($e){for(var Ce=this.timerList.length-1;Ce>=0;Ce--){var jt;this.timerList[Ce].id===$e&&pv(jt=this.timerList).call(jt,Ce,1)}},he.removeFinished=function(){for(var $e=this.timerList.length-1;$e>=0;$e--){var Ce,jt=this.timerList[$e];jt.loop>=0&&jt.count>=jt.loop&&pv(Ce=this.timerList).call(Ce,$e,1)}},he.destroy=function(){this.clerTime(),this.timerList=[],this.id=0,this.timer=null},_e}(),au=Gc.findIndex,pC="findIndex",P0=!0;pC in[]&&Array(1).findIndex(function(){P0=!1}),En({target:"Array",proto:!0,forced:P0},{findIndex:function(he){return au(this,he,arguments.length>1?arguments[1]:void 0)}});var fC=ua("Array").findIndex,fv=Array.prototype,A0=function(_e){var he=_e.findIndex;return _e===fv||sr(fv,_e)&&he===fv.findIndex?fC:he},bm=["error","warn","log","debug"],dl=function(){},mv=["off","error","warn","log","debug"],N0=function(){function _e(Ue,$e){this.name=$e,this.strategies={debug:console.log,log:console.log,warn:console.warn,error:console.error},this.debug=dl,this.log=dl,this.warn=dl,this.error=dl,this.name=$e,_e.instancesName.push($e),mi(mv).call(mv,Ue)||(Ue="off"),this.setLogFunc(Ue)}var he=_e.prototype;return he.setLogFunc=function($e){var Ce=this,jt=A0(bm).call(bm,function(tr){return tr===$e});yo(bm).call(bm,function(tr,rr){rr<=jt&&(Ce[tr]=function(){var fr=xa(Array.prototype).call(arguments),kr=this.formatArgs(fr,tr);this.strategies[tr](kr)})})},he.formatArgs=function($e,Ce){var jt=new Date,tr=jt.getMonth()+1+"-"+jt.getDate()+" "+jt.getHours()+":"+jt.getMinutes()+":"+jt.getSeconds()+":"+jt.getMilliseconds();return"[NIM "+Ce+" "+this.name+" "+tr+"] "+Oo($e).call($e,function(rr){return rr instanceof Wi?rr.name+", "+rr.code+", "+rr.message:rr instanceof Error?rr&&rr.message?rr.message:rr:typeof rr=="object"?ha(rr):rr}).join(" ")},he.destroy=function(){this.debug=dl,this.log=dl,this.warn=dl,this.error=dl},_e}();N0.instancesName=[];var pl=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.request=function($e,Ce,jt){var tr=this,rr=new Date().getTime(),fr=(jt==null?void 0:jt.exception_service)||0;return jo.request($e,Ce).catch(function(kr){var Pr,Rr,$r=kr;throw tr.core.reporter.reportTraceStart("exceptions",{user_id:tr.core.options.account,trace_id:(Rr=(Pr=tr.core.clientSocket)===null||Pr===void 0?void 0:Pr.socket)===null||Rr===void 0?void 0:Rr.sessionId,start_time:rr,action:1,exception_service:fr}),tr.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof $r.code=="number"?$r.code:0,description:$r.message||""+$r.code,operation_type:0,target:$e,context:Ce?ha(Ce):""},{asyncParams:jo.net.getNetworkStatus()}),tr.core.reporter.reportTraceEnd("exceptions",1),kr})},he.uploadFile=function($e){var Ce=this,jt=new Date().getTime();return jo.uploadFile($e).catch(function(tr){var rr,fr,kr=tr;Ce.core.reporter.reportTraceStart("exceptions",{user_id:Ce.core.options.account,trace_id:(fr=(rr=Ce.core.clientSocket)===null||rr===void 0?void 0:rr.socket)===null||fr===void 0?void 0:fr.sessionId,start_time:jt,action:1,exception_service:3});var Pr=jo.platform==="BROWSER"?$e.chunkUploadHost:$e.commonUploadHost?$e.commonUploadHost+"/"+($e.nosToken&&$e.nosToken.bucket):"https://nos.netease.com/nim";throw Ce.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof kr.code=="number"?kr.code:0,description:kr.message||""+kr.code,operation_type:1,target:Pr},{asyncParams:jo.net.getNetworkStatus()}),Ce.core.reporter.reportTraceEnd("exceptions",1),tr})},_e}(),Sm=function(){function _e(he,Ue){this.abtInfo={},this.core=he,this.config=Ue}return _e.prototype.abtRequest=function(){var Ue,$e;return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(this.core.options.isAbtestEnable){rr.next=2;break}return rr.abrupt("return");case 2:if(!this.abtInfo.experiments){rr.next=4;break}return rr.abrupt("return");case 4:if(this.config.abtestUrl){rr.next=6;break}return rr.abrupt("return");case 6:return rr.prev=6,rr.next=9,this.core.adapters.request(this.config.abtestUrl,{method:"POST",dataType:"json",headers:{sdktype:"ABTest"},data:{clientInfo:{projectKey:this.config.abtestProjectKey,appKey:this.core.options.appkey,osType:"Web",sdkVersion:"0.17.2",deviceId:this.core.config.deviceId},useLocalCache:!0}},{exception_service:7});case 9:jt=rr.sent,rr.next=15;break;case 12:rr.prev=12,rr.t0=rr.catch(6),this.core.logger.warn("ABTest request failed");case 15:this.abtInfo=(($e=(Ue=jt==null?void 0:jt.data)===null||Ue===void 0?void 0:Ue.data)===null||$e===void 0?void 0:$e.abtInfo)||{};case 16:case"end":return rr.stop()}},Ce,this,[[6,12]])}))},_e}(),Tm={},Cm={debugLevel:"off",needReconnect:!0,reconnectionAttempts:9007199254740991,lbsUrls:["https://lbs.netease.im/lbs/webconf.jsp"],linkUrl:nu,abtestUrl:"https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo",isAbtestEnable:!0},is=function(_e){function he($e,Ce){var jt,tr,rr,fr,kr,Pr,Rr;Ce===void 0&&(Ce={}),(fr=_e.call(this)||this).instanceName="NIM",fr.status="unconnected",fr.account="",fr.eventBus=new Sf,fr.options={},fr.offlinePush={},fr.sync={},fr.msg={},fr.msgLog={},fr.session={},fr.cloudSession={},fr.misc={},fr.user={},fr.friend={},fr.systemMessage={},fr.team={},fr.event={},fr.msgExtend={},fr.cloudStorage={},fr.passThrough={},fr.superTeam={},fr.plugin={},fr.signaling={},fr.logger=new N0($e.debugLevel,$e.account),fr.setInitOptions($e),fr.otherOptions=Gn(Gn({},Ce),{cloudStorageConfig:Gn({storageKeyPrefix:"NIM"},Ce.cloudStorageConfig)}),fr.timerManager=new mp,fr.adapters=new pl(k(fr)),fr.abtest=new Sm(k(fr),{isAbtestEnable:fr.options.isAbtestEnable,abtestUrl:fr.options.abtestUrl,abtestProjectKey:"imElite_sdk_abtest_web"});var $r=jo.localStorage.getItem("__NIM_DEVC_ID__");fr.options.deviceId?$r=fr.options.deviceId:fr.options.isFixedDeviceId?($r=jo.localStorage.getItem("__NIM_DEVC_ID__")||Jo(),jo.localStorage.setItem("__NIM_DEVC_ID__",$r)):$r=Jo(),fr.config={timeout:8e3,deviceId:$r};var Hr=jo.getSystemInfo(),Gr=(kr=Ce==null?void 0:Ce.reportConfig)===null||kr===void 0?void 0:kr.isDataReportEnable;return typeof Gr!="boolean"&&(Gr=!0),fr.reporter=new Kg({reportConfigUrl:((Pr=Ce==null?void 0:Ce.reportConfig)===null||Pr===void 0?void 0:Pr.reportConfigUrl)||"https://statistic.live.126.net/dispatcher/req",reportUrl:((Rr=Ce==null?void 0:Ce.reportConfig)===null||Rr===void 0?void 0:Rr.reportUrl)||"https://statistic.live.126.net/statics/report/common/form",isDataReportEnable:Gr,common:{app_key:$e.appkey,dev_id:$r,platform:"Web",sdk_ver:"0.17.2",env:"online",os_name:Hr.os,os_ver:Hr.osVer,lib_env:Hr.libEnv,model:Hr.model,manufactor:Hr.manufactor,host_env:Hr.hostEnv,host_env_ver:Hr.hostEnvVer},request:jo.request,logger:fr.logger,autoStart:!0}),jo.setLogger(fr.logger),fr.auth=new lv(k(fr)),fr.clientSocket=new Qs(k(fr)),yo(jt=bs(tr=fa(Tm)).call(tr,function(bn){return bn!=="sync"})).call(jt,function(bn){var Sn=Tm[bn];fr[bn]=new Sn(k(fr))}),Tm.sync&&(fr.sync=new Fo(k(fr),fr.otherOptions.syncOptions)),yo(rr=fa(fr.otherOptions)).call(rr,function(bn){var Sn=Ka(bn).call(bn,"Config");if(bn==="serverConfig")fr.cloudStorage.setOptions(fr.otherOptions.serverConfig);else if(Sn>-1){var An=xa(bn).call(bn,0,Sn);fr[An]&&fr[An].setOptions&&fr[An].setOptions(fr.otherOptions[bn])}}),he.instance=k(fr),fr.logger.log("NIM init, version ","0.17.2"," sdk version ",91402," appkey ",$e.appkey),fr}ra(he,_e),he.getInstance=function(Ce,jt){if(!he.instance){if(Ce)return new he(Ce,jt);throw new Error("Instance not exist, please input options")}if(Ce){if(he.instance.options.account===Ce.account&&he.instance.options.appkey===Ce.appkey)return he.instance.setOptions(Ce),he.instance;throw new Error("Unexpected login")}return he.instance};var Ue=he.prototype;return Ue.setInitOptions=function(Ce){Xn({account:{type:"string"},appkey:{type:"string"},token:{type:"string"},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},Ce),this.logger.log("NIM::setInitOptions options is",Ce),this.account=Ce.account,this.options=Gn(Gn({},Cm),Ce)},Ue.connect=function(Ce){return Ce===void 0&&(Ce={}),this.auth.login(Ce)},Ue.setOptions=function(Ce){if(typeof Ce=="object"&&Ce!==null&&(Object.prototype.hasOwnProperty.call(Ce,"account")&&Ce.account!==this.options.account||Object.prototype.hasOwnProperty.call(Ce,"appkey")&&Ce.appkey!==this.options.appkey))throw new Error("NIM::setOptions account and appkey is not allowed to reset");Xn({token:{type:"string",required:!1},needReconnect:{type:"boolean",required:!1},reconnectionAttempts:{type:"number",required:!1},customClientType:{type:"number",min:1,required:!1},authType:{type:"number",min:0,max:2,required:!1},lbsUrls:{type:"array",itemType:"string",min:1,required:!1},linkUrl:{type:"string",allowEmpty:!1,required:!1}},Ce),this.logger.log("NIM::setOptions options is",Ce),this.options=Gn(Gn({},this.options),Ce)},Ue.disconnect=function(){var Ce=this;switch(this.status){case"logined":return this.sendCmd("logout",void 0,{timeout:1e3}).then(function(){Ce.clientSocket.doDisconnect(Cs.ACTIVE,"UserActiveDisconnect")}).catch(function(jt){Ce.logger.error("Instance::disconnect sendCmd:logout error",jt),Ce.clientSocket.doDisconnect(Cs.ACTIVE,"UserActiveDisconnect")});case"connected":case"connecting":case"waitReconnect":return this.clientSocket.doDisconnect(Cs.ACTIVE,"UserActiveDisconnect"),Ca.resolve();case"unconnected":case"destroyed":return Ca.resolve()}},Ue.destroy=function(){var Ce=this;return he.instance=null,this.disconnect().then(function(){var jt,tr,rr;Ce.status="destroyed",Ce.removeAllListeners(),Ce.eventBus.removeAllListeners(),Ce.logger.destroy(),Ce.reporter.destroy(),Ce.timerManager.destroy(),(jt=Ce.session)===null||jt===void 0||jt.destroy(),(tr=Ce.team)===null||tr===void 0||tr.destroy(),(rr=Ce.superTeam)===null||rr===void 0||rr.destroy(),Ce.connect=pp,Ce.disconnect=pp,Ce.destroy=pp})},Ue.kick=function(Ce){return this.auth.kick(Ce)},Ue.sendCmd=function(Ce,jt,tr){return this.clientSocket.sendCmd(Ce,jt,tr)},Ue.emit=function(Ce){var jt=this;try{for(var tr,rr,fr=bo(),kr=arguments.length,Pr=new Array(kr>1?kr-1:0),Rr=1;Rr<kr;Rr++)Pr[Rr-1]=arguments[Rr];var $r=(tr=_e.prototype.emit).call.apply(tr,Os(rr=[this,Ce]).call(rr,Pr)),Hr=bo()-fr;return Hr>=10&&this.logger.warn("Core::emit event: "+Ce+" process takes: "+Hr+"ms"),$r}catch(Gr){return this.logger.error("Core::emit event: "+Ce+". Error: "+Gr),bi(function(){throw jt.logger.error("Core::emit throw error in setTimeout. event: "+Ce+". Error: "+Gr),Gr},0),!1}},he.registerService=function(Ce,jt){Tm[jt]=Ce},he}(Sf);is.instance=null,is.setAdapters=function(he){c0(jo,he)};var gv=Math.min,hv=[].lastIndexOf,O0=!!hv&&1/[1].lastIndexOf(1,-0)<0,mC=ec("lastIndexOf"),vv=O0||!mC?function(he){if(O0)return ue(hv,this,arguments)||0;var Ue=wr(this),$e=rs(Ue),Ce=$e-1;for(arguments.length>1&&(Ce=gv(Ce,hc(arguments[1]))),Ce<0&&(Ce=$e+Ce);Ce>=0;Ce--)if(Ce in Ue&&Ue[Ce]===he)return Ce||0;return-1}:hv;En({target:"Array",proto:!0,forced:vv!==[].lastIndexOf},{lastIndexOf:vv});var R0=ua("Array").lastIndexOf,yv=Array.prototype,bv=function(_e){var he=_e.lastIndexOf;return _e===yv||sr(yv,_e)&&he===yv.lastIndexOf?R0:he},su=g(function(_e,he){(function(){var Ue={function:!0,object:!0}[typeof window]&&window||this,$e=he,Ce=_e&&!_e.nodeType&&_e,jt=$e&&Ce&&typeof e=="object"&&e;!jt||jt.global!==jt&&jt.window!==jt&&jt.self!==jt||(Ue=jt);var tr=Math.pow(2,53)-1,rr=/\bOpera/,fr=Object.prototype,kr=fr.hasOwnProperty,Pr=fr.toString;function Rr(Kn){return(Kn=String(Kn)).charAt(0).toUpperCase()+Kn.slice(1)}function $r(Kn){return Kn=An(Kn),/^(?:webOS|i(?:OS|P))/.test(Kn)?Kn:Rr(Kn)}function Hr(Kn,Qn){for(var To in Kn)kr.call(Kn,To)&&Qn(Kn[To],To,Kn)}function Gr(Kn){return Kn==null?Rr(Kn):Pr.call(Kn).slice(8,-1)}function bn(Kn){return String(Kn).replace(/([ -])(?!$)/g,"$1?")}function Sn(Kn,Qn){var To=null;return function(Ko,Ln){var Wr=-1,ro=Ko?Ko.length:0;if(typeof ro=="number"&&ro>-1&&ro<=tr)for(;++Wr<ro;)Ln(Ko[Wr],Wr,Ko);else Hr(Ko,Ln)}(Kn,function(Eo,Ko){To=Qn(To,Eo,Ko,Kn)}),To}function An(Kn){return String(Kn).replace(/^ +| +$/g,"")}var kn=function Kn(Qn){var To=Ue,Eo=Qn&&typeof Qn=="object"&&Gr(Qn)!="String";Eo&&(To=Qn,Qn=null);var Ko=To.navigator||{},Ln=Ko.userAgent||"";Qn||(Qn=Ln);var Wr,ro,so=Eo?!!Ko.likeChrome:/\bChrome\b/.test(Qn)&&!/internal|\n/i.test(Pr.toString()),Yn="Object",Rn=Eo?Yn:"ScriptBridgingProxyObject",co=Eo?Yn:"Environment",uo=Eo&&To.java?"JavaPackage":Gr(To.java),Mo=Eo?Yn:"RuntimeObject",_o=/\bJava/.test(uo)&&To.java,ga=_o&&Gr(To.environment)==co,Xo=_o?"a":"α",fs=_o?"b":"β",Uo=To.document||{},Zo=To.operamini||To.opera,Pa=rr.test(Pa=Eo&&Zo?Zo["[[Class]]"]:Gr(Zo))?Pa:Zo=null,xl=Qn,na=[],jc=null,vs=Qn==Ln,No=vs&&Zo&&typeof Zo.version=="function"&&Zo.version(),Aa=function(ls){return Sn(ls,function(Wa,ts){return Wa||RegExp("\\b"+(ts.pattern||bn(ts))+"\\b","i").exec(Qn)&&(ts.label||ts)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),mo=function(ls){return Sn(ls,function(Wa,ts){return Wa||RegExp("\\b"+(ts.pattern||bn(ts))+"\\b","i").exec(Qn)&&(ts.label||ts)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),da=IM([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),js=function(ls){return Sn(ls,function(Wa,ts,ny){return Wa||(ts[da]||ts[/^[a-z]+(?: +[a-z]+\b)*/i.exec(da)]||RegExp("\\b"+bn(ny)+"(?:\\b|\\w*\\d)","i").exec(Qn))&&ny})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),vo=function(ls){return Sn(ls,function(Wa,ts){var ny=ts.pattern||bn(ts);return!Wa&&(Wa=RegExp("\\b"+ny+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Qn))&&(Wa=function(gu,kM,wM){var _M={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return kM&&wM&&/^Win/i.test(gu)&&!/^Windows Phone /i.test(gu)&&(_M=_M[/[\d.]+$/.exec(gu)])&&(gu="Windows "+_M),gu=String(gu),kM&&wM&&(gu=gu.replace(RegExp(kM,"i"),wM)),$r(gu.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Wa,ny,ts.label||ts)),Wa})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function IM(Ri){return Sn(Ri,function(ls,Wa){var ts=Wa.pattern||bn(Wa);return!ls&&(ls=RegExp("\\b"+ts+" *\\d+[.\\w_]*","i").exec(Qn)||RegExp("\\b"+ts+" *\\w+-[\\w]*","i").exec(Qn)||RegExp("\\b"+ts+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Qn))&&((ls=String(Wa.label&&!RegExp(ts,"i").test(Wa.label)?Wa.label:ls).split("/"))[1]&&!/[\d.]+/.test(ls[0])&&(ls[0]+=" "+ls[1]),Wa=Wa.label||Wa,ls=$r(ls[0].replace(RegExp(ts,"i"),Wa).replace(RegExp("; *(?:"+Wa+"[_-])?","i")," ").replace(RegExp("("+Wa+")[-_.]?(\\w)","i"),"$1 $2"))),ls})}function EM(Ri){return Sn(Ri,function(ls,Wa){return ls||(RegExp(Wa+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Qn)||0)[1]||null})}if(Aa&&(Aa=[Aa]),/\bAndroid\b/.test(vo)&&!da&&(Wr=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(Qn))&&(da=An(Wr[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),js&&!da?da=IM([js]):js&&da&&(da=da.replace(RegExp("^("+bn(js)+")[-_.\\s]","i"),js+" ").replace(RegExp("^("+bn(js)+")[-_.]?(\\w)","i"),js+" $2")),(Wr=/\bGoogle TV\b/.exec(da))&&(da=Wr[0]),/\bSimulator\b/i.test(Qn)&&(da=(da?da+" ":"")+"Simulator"),mo=="Opera Mini"&&/\bOPiOS\b/.test(Qn)&&na.push("running in Turbo/Uncompressed mode"),mo=="IE"&&/\blike iPhone OS\b/.test(Qn)?(js=(Wr=Kn(Qn.replace(/like iPhone OS/,""))).manufacturer,da=Wr.product):/^iP/.test(da)?(mo||(mo="Safari"),vo="iOS"+((Wr=/ OS ([\d_]+)/i.exec(Qn))?" "+Wr[1].replace(/_/g,"."):"")):mo=="Konqueror"&&/^Linux\b/i.test(vo)?vo="Kubuntu":js&&js!="Google"&&(/Chrome/.test(mo)&&!/\bMobile Safari\b/i.test(Qn)||/\bVita\b/.test(da))||/\bAndroid\b/.test(vo)&&/^Chrome/.test(mo)&&/\bVersion\//i.test(Qn)?(mo="Android Browser",vo=/\bAndroid\b/.test(vo)?vo:"Android"):mo=="Silk"?(/\bMobi/i.test(Qn)||(vo="Android",na.unshift("desktop mode")),/Accelerated *= *true/i.test(Qn)&&na.unshift("accelerated")):mo=="UC Browser"&&/\bUCWEB\b/.test(Qn)?na.push("speed mode"):mo=="PaleMoon"&&(Wr=/\bFirefox\/([\d.]+)\b/.exec(Qn))?na.push("identifying as Firefox "+Wr[1]):mo=="Firefox"&&(Wr=/\b(Mobile|Tablet|TV)\b/i.exec(Qn))?(vo||(vo="Firefox OS"),da||(da=Wr[1])):!mo||(Wr=!/\bMinefield\b/i.test(Qn)&&/\b(?:Firefox|Safari)\b/.exec(mo))?(mo&&!da&&/[\/,]|^[^(]+?\)/.test(Qn.slice(Qn.indexOf(Wr+"/")+8))&&(mo=null),(Wr=da||js||vo)&&(da||js||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(vo))&&(mo=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(vo)?vo:Wr)+" Browser")):mo=="Electron"&&(Wr=(/\bChrome\/([\d.]+)\b/.exec(Qn)||0)[1])&&na.push("Chromium "+Wr),No||(No=EM(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",bn(mo),"(?:Firefox|Minefield|NetFront)"])),(Wr=(Aa=="iCab"&&parseFloat(No)>3?"WebKit":/\bOpera\b/.test(mo)&&(/\bOPR\b/.test(Qn)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(Qn)&&!/^(?:Trident|EdgeHTML)$/.test(Aa)&&"WebKit"||!Aa&&/\bMSIE\b/i.test(Qn)&&(vo=="Mac OS"?"Tasman":"Trident")||Aa=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(mo)&&"NetFront")&&(Aa=[Wr]),mo=="IE"&&(Wr=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Qn)||0)[1])?(mo+=" Mobile",vo="Windows Phone "+(/\+$/.test(Wr)?Wr:Wr+".x"),na.unshift("desktop mode")):/\bWPDesktop\b/i.test(Qn)?(mo="IE Mobile",vo="Windows Phone 8.x",na.unshift("desktop mode"),No||(No=(/\brv:([\d.]+)/.exec(Qn)||0)[1])):mo!="IE"&&Aa=="Trident"&&(Wr=/\brv:([\d.]+)/.exec(Qn))&&(mo&&na.push("identifying as "+mo+(No?" "+No:"")),mo="IE",No=Wr[1]),vs){if(function(ls,Wa){var ts=ls!=null?typeof ls[Wa]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(ts)||ts=="object"&&!ls[Wa])}(To,"global"))if(_o&&(xl=(Wr=_o.lang.System).getProperty("os.arch"),vo=vo||Wr.getProperty("os.name")+" "+Wr.getProperty("os.version")),ga){try{No=To.require("ringo/engine").version.join("."),mo="RingoJS"}catch{(Wr=To.system)&&Wr.global.system==To.system&&(mo="Narwhal",vo||(vo=Wr[0].os||null))}mo||(mo="Rhino")}else typeof To.process=="object"&&!To.process.browser&&(Wr=To.process)&&(typeof Wr.versions=="object"&&(typeof Wr.versions.electron=="string"?(na.push("Node "+Wr.versions.node),mo="Electron",No=Wr.versions.electron):typeof Wr.versions.nw=="string"&&(na.push("Chromium "+No,"Node "+Wr.versions.node),mo="NW.js",No=Wr.versions.nw)),mo||(mo="Node.js",xl=Wr.arch,vo=Wr.platform,No=(No=/[\d.]+/.exec(Wr.version))?No[0]:null));else Gr(Wr=To.runtime)==Rn?(mo="Adobe AIR",vo=Wr.flash.system.Capabilities.os):Gr(Wr=To.phantom)==Mo?(mo="PhantomJS",No=(Wr=Wr.version||null)&&Wr.major+"."+Wr.minor+"."+Wr.patch):typeof Uo.documentMode=="number"&&(Wr=/\bTrident\/(\d+)/i.exec(Qn))?(No=[No,Uo.documentMode],(Wr=+Wr[1]+4)!=No[1]&&(na.push("IE "+No[1]+" mode"),Aa&&(Aa[1]=""),No[1]=Wr),No=mo=="IE"?String(No[1].toFixed(1)):No[0]):typeof Uo.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(mo)&&(na.push("masking as "+mo+" "+No),mo="IE",No="11.0",Aa=["Trident"],vo="Windows");vo=vo&&$r(vo)}if(No&&(Wr=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(No)||/(?:alpha|beta)(?: ?\d)?/i.exec(Qn+";"+(vs&&Ko.appMinorVersion))||/\bMinefield\b/i.test(Qn)&&"a")&&(jc=/b/i.test(Wr)?"beta":"alpha",No=No.replace(RegExp(Wr+"\\+?$"),"")+(jc=="beta"?fs:Xo)+(/\d+\+?/.exec(Wr)||"")),mo=="Fennec"||mo=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(vo))mo="Firefox Mobile";else if(mo=="Maxthon"&&No)No=No.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(da))da=="Xbox 360"&&(vo=null),da=="Xbox 360"&&/\bIEMobile\b/.test(Qn)&&na.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(mo)&&(!mo||da||/Browser|Mobi/.test(mo))||vo!="Windows CE"&&!/Mobi/i.test(Qn))if(mo=="IE"&&vs)try{To.external===null&&na.unshift("platform preview")}catch{na.unshift("embedded")}else(/\bBlackBerry\b/.test(da)||/\bBB10\b/.test(Qn))&&(Wr=(RegExp(da.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Qn)||0)[1]||No)?(vo=((Wr=[Wr,/BB10/.test(Qn)])[1]?(da=null,js="BlackBerry"):"Device Software")+" "+Wr[0],No=null):this!=Hr&&da!="Wii"&&(vs&&Zo||/Opera/.test(mo)&&/\b(?:MSIE|Firefox)\b/i.test(Qn)||mo=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(vo)||mo=="IE"&&(vo&&!/^Win/.test(vo)&&No>5.5||/\bWindows XP\b/.test(vo)&&No>8||No==8&&!/\bTrident\b/.test(Qn)))&&!rr.test(Wr=Kn.call(Hr,Qn.replace(rr,"")+";"))&&Wr.name&&(Wr="ing as "+Wr.name+((Wr=Wr.version)?" "+Wr:""),rr.test(mo)?(/\bIE\b/.test(Wr)&&vo=="Mac OS"&&(vo=null),Wr="identify"+Wr):(Wr="mask"+Wr,mo=Pa?$r(Pa.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(Wr)&&(vo=null),vs||(No=null)),Aa=["Presto"],na.push(Wr));else mo+=" Mobile";(Wr=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Qn)||0)[1])&&(Wr=[parseFloat(Wr.replace(/\.(\d)$/,".0$1")),Wr],mo=="Safari"&&Wr[1].slice(-1)=="+"?(mo="WebKit Nightly",jc="alpha",No=Wr[1].slice(0,-1)):No!=Wr[1]&&No!=(Wr[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Qn)||0)[1])||(No=null),Wr[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Qn)||0)[1],Wr[0]==537.36&&Wr[2]==537.36&&parseFloat(Wr[1])>=28&&Aa=="WebKit"&&(Aa=["Blink"]),vs&&(so||Wr[1])?(Aa&&(Aa[1]="like Chrome"),Wr=Wr[1]||((Wr=Wr[0])<530?1:Wr<532?2:Wr<532.05?3:Wr<533?4:Wr<534.03?5:Wr<534.07?6:Wr<534.1?7:Wr<534.13?8:Wr<534.16?9:Wr<534.24?10:Wr<534.3?11:Wr<535.01?12:Wr<535.02?"13+":Wr<535.07?15:Wr<535.11?16:Wr<535.19?17:Wr<536.05?18:Wr<536.1?19:Wr<537.01?20:Wr<537.11?"21+":Wr<537.13?23:Wr<537.18?24:Wr<537.24?25:Wr<537.36?26:Aa!="Blink"?"27":"28")):(Aa&&(Aa[1]="like Safari"),Wr=(Wr=Wr[0])<400?1:Wr<500?2:Wr<526?3:Wr<533?4:Wr<534?"4+":Wr<535?5:Wr<537?6:Wr<538?7:Wr<601?8:Wr<602?9:Wr<604?10:Wr<606?11:Wr<608?12:"12"),Aa&&(Aa[1]+=" "+(Wr+=typeof Wr=="number"?".x":/[.+]/.test(Wr)?"":"+")),mo=="Safari"&&(!No||parseInt(No)>45)?No=Wr:mo=="Chrome"&&/\bHeadlessChrome/i.test(Qn)&&na.unshift("headless")),mo=="Opera"&&(Wr=/\bzbov|zvav$/.exec(vo))?(mo+=" ",na.unshift("desktop mode"),Wr=="zvav"?(mo+="Mini",No=null):mo+="Mobile",vo=vo.replace(RegExp(" *"+Wr+"$"),"")):mo=="Safari"&&/\bChrome\b/.exec(Aa&&Aa[1])?(na.unshift("desktop mode"),mo="Chrome Mobile",No=null,/\bOS X\b/.test(vo)?(js="Apple",vo="iOS 4.3+"):vo=null):/\bSRWare Iron\b/.test(mo)&&!No&&(No=EM("Chrome")),No&&No.indexOf(Wr=/[\d.]+$/.exec(vo))==0&&Qn.indexOf("/"+Wr+"-")>-1&&(vo=An(vo.replace(Wr,""))),vo&&vo.indexOf(mo)!=-1&&!RegExp(mo+" OS").test(vo)&&(vo=vo.replace(RegExp(" *"+bn(mo)+" *"),"")),Aa&&!/\b(?:Avant|Nook)\b/.test(mo)&&(/Browser|Lunascape|Maxthon/.test(mo)||mo!="Safari"&&/^iOS/.test(vo)&&/\bSafari\b/.test(Aa[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(mo)&&Aa[1])&&(Wr=Aa[Aa.length-1])&&na.push(Wr),na.length&&(na=["("+na.join("; ")+")"]),js&&da&&da.indexOf(js)<0&&na.push("on "+js),da&&na.push((/^on /.test(na[na.length-1])?"":"on ")+da),vo&&(Wr=/ ([\d.+]+)$/.exec(vo),ro=Wr&&vo.charAt(vo.length-Wr[0].length-1)=="/",vo={architecture:32,family:Wr&&!ro?vo.replace(Wr[0],""):vo,version:Wr?Wr[1]:null,toString:function(){var Ri=this.version;return this.family+(Ri&&!ro?" "+Ri:"")+(this.architecture==64?" 64-bit":"")}}),(Wr=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(xl))&&!/\bi686\b/i.test(xl)?(vo&&(vo.architecture=64,vo.family=vo.family.replace(RegExp(" *"+Wr),"")),mo&&(/\bWOW64\b/i.test(Qn)||vs&&/\w(?:86|32)$/.test(Ko.cpuClass||Ko.platform)&&!/\bWin64; x64\b/i.test(Qn))&&na.unshift("32-bit")):vo&&/^OS X/.test(vo.family)&&mo=="Chrome"&&parseFloat(No)>=39&&(vo.architecture=64),Qn||(Qn=null);var gi={};return gi.description=Qn,gi.layout=Aa&&Aa[0],gi.manufacturer=js,gi.name=mo,gi.prerelease=jc,gi.product=da,gi.ua=Qn,gi.version=mo&&No,gi.os=vo||{architecture:null,family:null,version:null,toString:function(){return"null"}},gi.parse=Kn,gi.toString=function(){return this.description||""},gi.version&&na.unshift(No),gi.name&&na.unshift(mo),vo&&mo&&(vo!=String(vo).split(" ")[0]||vo!=mo.split(" ")[0]&&!da)&&na.push(da?"("+vo+")":"on "+vo),na.length&&(gi.description=na.join(" ")),gi}();$e&&Ce?Hr(kn,function(Kn,Qn){$e[Qn]=Kn}):Ue.platform=kn}).call(e)}),fl=Math.floor,Mm=function(_e,he){var Ue=_e.length,$e=fl(Ue/2);return Ue<8?gC(_e,he):hC(_e,Mm(Yg(_e,0,$e),he),Mm(Yg(_e,$e),he),he)},gC=function(_e,he){for(var Ue,$e,Ce=_e.length,jt=1;jt<Ce;){for($e=jt,Ue=_e[jt];$e&&he(_e[$e-1],Ue)>0;)_e[$e]=_e[--$e];$e!==jt++&&(_e[$e]=Ue)}return _e},hC=function(_e,he,Ue,$e){for(var Ce=he.length,jt=Ue.length,tr=0,rr=0;tr<Ce||rr<jt;)_e[tr+rr]=tr<Ce&&rr<jt?$e(he[tr],Ue[rr])<=0?he[tr++]:Ue[rr++]:tr<Ce?he[tr++]:Ue[rr++];return _e},vC=Mm,B0=xr.match(/firefox\/(\d+)/i),Sv=!!B0&&+B0[1],ml=/MSIE|Trident/.test(xr),gp=xr.match(/AppleWebKit\/(\d+)\./),hp=!!gp&&+gp[1],gl=[],km=Ie(gl.sort),vp=Ie(gl.push),td=V(function(){gl.sort(void 0)}),Ec=V(function(){gl.sort(null)}),Tv=ec("sort"),Ia=!V(function(){if(Br)return Br<70;if(!(Sv&&Sv>3)){if(ml)return!0;if(hp)return hp<603;var _e,he,Ue,$e,Ce="";for(_e=65;_e<76;_e++){switch(he=String.fromCharCode(_e),_e){case 66:case 69:case 70:case 72:Ue=3;break;case 68:case 71:Ue=4;break;default:Ue=2}for($e=0;$e<47;$e++)gl.push({k:he+$e,v:Ue})}for(gl.sort(function(jt,tr){return tr.v-jt.v}),$e=0;$e<gl.length;$e++)he=gl[$e].k.charAt(0),Ce.charAt(Ce.length-1)!==he&&(Ce+=he);return Ce!=="DGBEFHACIJK"}});En({target:"Array",proto:!0,forced:td||!Ec||!Tv||!Ia},{sort:function(he){he!==void 0&&Xr(he);var Ue=Pn(this);if(Ia)return he===void 0?km(Ue):km(Ue,he);var $e,Ce,jt=[],tr=rs(Ue);for(Ce=0;Ce<tr;Ce++)Ce in Ue&&vp(jt,Ue[Ce]);for(vC(jt,function(rr){return function(fr,kr){return kr===void 0?-1:fr===void 0?1:rr!==void 0?+rr(fr,kr)||0:Zs(fr)>Zs(kr)?1:-1}}(he)),$e=rs(jt),Ce=0;Ce<$e;)Ue[Ce]=jt[Ce++];for(;Ce<tr;)vm(Ue,Ce++);return Ue}});var L0=ua("Array").sort,yp=Array.prototype,iu=function(_e){var he=_e.sort;return _e===yp||sr(yp,_e)&&he===yp.sort?L0:he},wm=g(function(_e,he){_e.exports=function(){var Ue={d:function(Wr,ro){for(var so in ro)Ue.o(ro,so)&&!Ue.o(Wr,so)&&Eu(Wr,so,{enumerable:!0,get:ro[so]})},o:function(Wr,ro){return Object.prototype.hasOwnProperty.call(Wr,ro)}},$e={};Ue.d($e,{default:function(){return Ko}});var Ce=function Ln(Wr){for(var ro in function(so,Yn){if(!(so instanceof Yn))throw new TypeError("Cannot call a class as a function")}(this,Ln),this.directUploadAddr="https://wanproxy-web.127.net",this.retryCount=4,this.trunkSize=4194304,this.trunkUploadTimeout=5e4,this.getOffsetTimeout=1e4,this.version="1.0",this.enableCache=!0,this.logger=console,this.onError=function(so){},this.onProgress=function(so){},this.onUploadProgress=function(so){},this.onComplete=function(so){},Wr)this[ro]=Wr[ro]};function jt(Ln,Wr){var ro=xs!==void 0&&Is(Ln)||Ln["@@iterator"];if(!ro){if(uc(Ln)||(ro=function(Mo,_o){if(Mo){var ga;if(typeof Mo=="string")return tr(Mo,_o);var Xo=xa(ga=Object.prototype.toString.call(Mo)).call(ga,8,-1);return Xo==="Object"&&Mo.constructor&&(Xo=Mo.constructor.name),Xo==="Map"||Xo==="Set"?Ki(Mo):Xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xo)?tr(Mo,_o):void 0}}(Ln))||Wr&&Ln&&typeof Ln.length=="number"){ro&&(Ln=ro);var so=0,Yn=function(){};return{s:Yn,n:function(){return so>=Ln.length?{done:!0}:{done:!1,value:Ln[so++]}},e:function(_o){throw _o},f:Yn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rn,co=!0,uo=!1;return{s:function(){ro=ro.call(Ln)},n:function(){var _o=ro.next();return co=_o.done,_o},e:function(_o){uo=!0,Rn=_o},f:function(){try{co||ro.return==null||ro.return()}finally{if(uo)throw Rn}}}}function tr(Ln,Wr){(Wr==null||Wr>Ln.length)&&(Wr=Ln.length);for(var ro=0,so=new Array(Wr);ro<Wr;ro++)so[ro]=Ln[ro];return so}var rr=window.localStorage;window.localStorage&&typeof window.localStorage.getItem=="function"&&typeof window.localStorage.setItem=="function"&&typeof window.localStorage.removeItem=="function"||(rr={privateObj:{},setItem:function(Wr,ro){rr.privateObj[Wr]=ro},getItem:function(Wr){return rr.privateObj[Wr]},removeItem:function(Wr){delete rr.privateObj[Wr]},getKeys:function(){return fa(rr.privateObj)}});var fr={getFileKey:function(Wr){var ro=Wr.size.toString(),so=Wr.lastModified.toString();return"_NosUploader_"+Wr.name+xa(ro).call(ro,ro.length-5)+xa(so).call(so,so.length-5)},getFileInfo:function(Wr){var ro=rr.getItem(Wr);if(!ro)return null;try{return JSON.parse(ro)}catch{return null}},initFile:function(Wr,ro,so){fr.clearExpiredInfo();var Yn=this.getFileKey(ro),Rn={ctx:Wr.ctx!==void 0?Wr.ctx:"",bucket:Wr.bucketName,obj:Wr.objectName,token:Wr.token,modifyAt:bo(),end:!1};return Wr.payload&&(Rn.payload=Wr.payload),so&&rr.setItem(Yn,ha(Rn)),Yn},setUploadContext:function(Wr,ro,so){var Yn=this.getFileInfo(Wr);Yn&&(Yn.ctx=ro,so&&rr.setItem(Wr,ha(Yn)))},setComplete:function(Wr,ro){var so=this.getFileInfo(Wr);so&&(so.modifyAt=bo(),so.end=!0,ro&&rr.setItem(Wr,ha(so)))},getUploadContext:function(Wr){var ro=this.getFileInfo(Wr);return ro?ro.ctx:""},removeFileInfo:function(Wr){Ka(Wr).call(Wr,"_NosUploader_")===0&&rr.removeItem(Wr)},clearExpiredInfo:function(){var Wr,ro=typeof rr.getKeys=="function"?rr.getKeys():fa(rr),so=bo(),Yn=[],Rn=jt(ro);try{for(Rn.s();!(Wr=Rn.n()).done;){var co=Wr.value;if(Ka(co).call(co,"_NosUploader_")===0){var uo=fr.getFileInfo(co);uo===null||so-uo.modifyAt>Ko.expireTime?rr.removeItem(co):Yn.push({fileInfo:uo,key:co})}}}catch(Uo){Rn.e(Uo)}finally{Rn.f()}if(Yn.length>Ko.maxFileCache){var Mo,_o,ga=jt(xa(Mo=iu(Yn).call(Yn,function(Uo,Zo){return Zo.fileInfo.modifyAt-Uo.fileInfo.modifyAt})).call(Mo,Ko.maxFileCache));try{for(ga.s();!(_o=ga.n()).done;){var Xo,fs=_o.value;Ka(Xo=fs.key).call(Xo,"_NosUploader_")===0&&rr.removeItem(fs.key)}}catch(Uo){ga.e(Uo)}finally{ga.f()}}}},kr=fr;function Pr(Ln){return(Pr=typeof xs=="function"&&typeof qd=="symbol"?function(Wr){return typeof Wr}:function(Wr){return Wr&&typeof xs=="function"&&Wr.constructor===xs&&Wr!==xs.prototype?"symbol":typeof Wr})(Ln)}function Rr(Ln,Wr){return!Wr||Pr(Wr)!=="object"&&typeof Wr!="function"?function(ro){if(ro===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ro}(Ln):Wr}function $r(Ln){var Wr=typeof xc=="function"?new xc:void 0;return($r=function(so){var Yn,Rn;if(so===null||(Rn=so,Ka(Yn=Function.toString.call(Rn)).call(Yn,"[native code]")===-1))return so;if(typeof so!="function")throw new TypeError("Super expression must either be null or a function");if(Wr!==void 0){if(Wr.has(so))return Wr.get(so);Wr.set(so,co)}function co(){return Hr(so,arguments,Sn(this).constructor)}return co.prototype=ii(so.prototype,{constructor:{value:co,enumerable:!1,writable:!0,configurable:!0}}),bn(co,so)})(Ln)}function Hr(Ln,Wr,ro){return(Hr=Gr()?ki:function(so,Yn,Rn){var co=[null];co.push.apply(co,Yn);var uo=new(oa(Function).apply(so,co));return Rn&&bn(uo,Rn.prototype),uo}).apply(null,arguments)}function Gr(){if(typeof Reflect>"u"||!ki||ki.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ki(Boolean,[],function(){})),!0}catch{return!1}}function bn(Ln,Wr){return(bn=ci||function(ro,so){return ro.__proto__=so,ro})(Ln,Wr)}function Sn(Ln){return(Sn=ci?Dr:function(Wr){return Wr.__proto__||Dr(Wr)})(Ln)}var An=function(Ln){(function(Rn,co){if(typeof co!="function"&&co!==null)throw new TypeError("Super expression must either be null or a function");Rn.prototype=ii(co&&co.prototype,{constructor:{value:Rn,writable:!0,configurable:!0}}),co&&bn(Rn,co)})(Yn,Ln);var Wr,ro,so=(Wr=Yn,ro=Gr(),function(){var Rn,co=Sn(Wr);if(ro){var uo=Sn(this).constructor;Rn=ki(co,arguments,uo)}else Rn=co.apply(this,arguments);return Rr(this,Rn)});function Yn(Rn,co){var uo;return function(Mo,_o){if(!(Mo instanceof _o))throw new TypeError("Cannot call a class as a function")}(this,Yn),(uo=so.call(this,"NosUploadError:"+Rn)).errCode=co,uo.errMsg=Rn,uo}return Yn}($r(Error)),kn=function Ln(Wr,ro,so){if(Wr.uploadState==="uploading"){var Yn=Wr.config,Rn=Wr.param,co=kr.getUploadContext(Wr.fileKey);if(!co)return so(0);var uo=new XMLHttpRequest,Mo=Yn.directUploadAddr+"/".concat(Rn.bucketName)+"/".concat(encodeURIComponent(Rn.objectName))+"?uploadContext"+"&context=".concat(co)+"&version=".concat(Yn.version);uo.onreadystatechange=function(){var _o;if(Wr.uploadState!=="abort"&&uo.readyState===4){var ga,Xo,fs,Uo;try{Uo=JSON.parse(uo.responseText)}catch{Uo={errMsg:"JsonParseError in getOffset",errCode:500}}uo.status===200?Uo.errCode?Wr.config.onError(new An(Uo.errMsg,Uo.errCode)):so(Uo.offset):uo.status.toString().match(/^5/)?Ln(Wr,ro-1,so):ro>0?(typeof((_o=Yn.logger)===null||_o===void 0?void 0:_o.error)=="function"&&Yn.logger.error(Os(ga="getOffset(".concat(Mo,") error. retry after 3 seconds. ")).call(ga,new Date().toTimeString())),bi(function(){Ln(Wr,ro-1,so)},3500)):(kr.removeFileInfo(Wr.fileKey),uo.status?Yn.onError(new An(Os(Xo=Os(fs="getOffset(".concat(Mo,") error: ")).call(fs,uo.status," ")).call(Xo,uo.statusText))):Yn.onError(new An("getOffset(".concat(Mo,") error. no Error Code"))))}},uo.open("get",Mo),uo.setRequestHeader("x-nos-token",Rn.token),uo.timeout=Yn.getOffsetTimeout,uo.send()}},Kn=function Ln(Wr,ro,so,Yn){if(Wr.uploadState==="uploading"){var Rn=Wr.param,co=Wr.config,uo=xa(File.prototype),Mo=Rn.ctx!==void 0?Rn.ctx:"",_o=ro+co.trunkSize>Wr.file.size,ga=_o?Wr.file.size:ro+co.trunkSize,Xo=new XMLHttpRequest,fs=co.directUploadAddr+"/".concat(Rn.bucketName)+"/".concat(encodeURIComponent(Rn.objectName));if(Xo.upload.onprogress=function(Zo){if(Wr.uploadState!=="abort"){var Pa=0;Zo.lengthComputable?(Pa=(ro+Zo.loaded)/Wr.file.size,co.onProgress(Pa),co.onUploadProgress({loaded:Zo.loaded,total:Wr.file.size,percentage:Pa,percentageText:(100*Pa).toFixed(2)+"%"})):co.onError(new An("browser does not support query upload progress"))}},Xo.onreadystatechange=function(){var Zo,Pa;if(Wr.uploadState!=="abort"&&Xo.readyState===4){var xl,na,jc,vs;try{vs=JSON.parse(Xo.responseText)}catch(No){typeof((Zo=co.logger)===null||Zo===void 0?void 0:Zo.error)=="function"&&co.logger.error("JsonParseError in uploadTrunk",No),vs={errMsg:"JsonParseError in uploadTrunk"}}Xo.status===200?(Wr.setContext(vs.context),_o?(Yn(),Wr.setComplete()):Ln(Wr,vs.offset,co.retryCount,Yn)):Xo.status.toString().match(/^5/)?so>0?Ln(Wr,ro,so-1,Yn):(kr.removeFileInfo(Wr.fileKey),co.onError(new An(vs.errMsg,vs.errCode))):so>0?(typeof((Pa=co.logger)===null||Pa===void 0?void 0:Pa.error)=="function"&&co.logger.error(Os(xl="uploadTrunk(".concat(fs,") error. retry after 3 seconds. ")).call(xl,new Date().toTimeString())),bi(function(){Ln(Wr,ro,so-1,Yn)},3500)):(kr.removeFileInfo(Wr.fileKey),Xo.status?co.onError(new An(Os(na=Os(jc="uploadTrunk(".concat(fs,") error: ")).call(jc,Xo.status," ")).call(na,Xo.statusText))):co.onError(new An("uploadTrunk(".concat(fs,") error. no Error Code. Please check your network"))))}},Xo.open("post",fs+"?offset=".concat(ro)+"&complete=".concat(_o)+"&context=".concat(Mo)+"&version=".concat(co.version)),Xo.setRequestHeader("x-nos-token",Rn.token),Wr.file.type&&Xo.setRequestHeader("content-type",Wr.file.type),Xo.timeout=co.trunkUploadTimeout,typeof FileReader<"u"){var Uo=new FileReader;Uo.addEventListener("load",function(Zo){var Pa;!((Pa=Zo==null?void 0:Zo.target)===null||Pa===void 0)&&Pa.result?Xo.send(Zo.target.result):co.onError(new An("Read ArrayBuffer failed"))}),Uo.addEventListener("error",function(Zo){var Pa=Zo.target.error;co.onError(new An("Read ArrayBuffer error. ".concat(Pa.toString()),Pa.code))}),Uo.readAsArrayBuffer(uo.call(Wr.file,ro,ga))}else Xo.send(uo.call(Wr.file,ro,ga))}};function Qn(Ln,Wr){for(var ro=0;ro<Wr.length;ro++){var so=Wr[ro];so.enumerable=so.enumerable||!1,so.configurable=!0,"value"in so&&(so.writable=!0),Eu(Ln,so.key,so)}}var To=function(){function Ln(ro,so,Yn){(function(Rn,co){if(!(Rn instanceof co))throw new TypeError("Cannot call a class as a function")})(this,Ln),this.uploadState="paused",this.config=Yn,this.file=ro,this.param=so,this.fileKey=kr.initFile(so,ro,this.config.enableCache),this.resume()}var Wr;return(Wr=[{key:"resume",value:function(){var so=this;if(this.uploadState!=="uploading"){this.setUploadState("uploading");var Yn=this.config;kn(this,Yn.retryCount,function(Rn){Kn(so,Rn,Yn.retryCount,function(){so.setUploadState("ended"),typeof Yn.onComplete=="function"&&Yn.onComplete(so.param)})})}}},{key:"pause",value:function(){this.setUploadState("paused")}},{key:"abort",value:function(){this.setUploadState("abort"),kr.removeFileInfo(this.fileKey),this.config.onError(new An("Upload Aborted",10499))}},{key:"setUploadState",value:function(so){so!==this.uploadState&&(this.uploadState=so)}},{key:"setContext",value:function(so){kr.setUploadContext(this.fileKey,so,this.config.enableCache),this.param.ctx=so}},{key:"setComplete",value:function(){kr.setComplete(this.fileKey,this.config.enableCache),this.setUploadState("ended")}}])&&Qn(Ln.prototype,Wr),Ln}(),Eo={maxFileCache:6,expireTime:864e5,getFileUploadInformation:function(Wr){var ro=kr.getFileKey(Wr),so=kr.getFileInfo(ro);return so===null?null:bo()-so.modifyAt>Eo.expireTime?(kr.removeFileInfo(ro),null):{uploadInfo:Gn({bucketName:so.bucket,objectName:so.obj,token:so.token,ctx:so.ctx},so.payload?{payload:so.payload}:{}),complete:so.end}},setMaxFileCache:function(Wr){Eo.maxFileCache=Wr},setExpireTime:function(Wr){Eo.expireTime=Wr},printCaches:function(){for(var Wr=0,ro=fa(localStorage);Wr<ro.length;Wr++){var so=ro[Wr],Yn=kr.getFileInfo(so);Yn&&console.log(Yn,"modifiedAt",new Date(Yn.modifyAt).toTimeString())}},createConfig:function(Wr){return new Ce(Wr)},createTask:function(Wr,ro,so){return new To(Wr,ro,so)}},Ko=Eo;return $e.default}()}),Ma=g(function(_e,he){_e.exports=function(){function Ue(jt){if(jt){var tr,rr="";return yo(tr=fa(jt)).call(tr,function(fr,kr){rr+=kr===0?"?":"&",rr+=fr+"="+jt[fr]}),rr}return""}var $e=function(jt){function tr(rr,fr,kr,Pr){var Rr;return(Rr=jt.call(this,kr)||this).source=rr,Rr.code=fr,Rr.desc=kr,Rr.detail=Pr||{},Rr}return ra(tr,jt),tr}(Ua(Error));function Ce(jt,tr){tr===void 0&&(tr={dataType:"json",method:"GET",timeout:5e3});var rr=tr.dataType==="text"?"text/plain; charset=UTF-8":"application/json; charset=UTF-8",fr=tr.method==="GET"?Ue(tr.params):"";return new Ca(function(kr,Pr){if(window.XMLHttpRequest){var Rr,$r=new XMLHttpRequest;if($r.onreadystatechange=function(){if($r.readyState===4)if($r.status===200){try{Rr=JSON.parse($r.response||"{}")}catch{Rr=$r.response}kr({status:$r.status,data:Rr})}else bi(function(){Pr(new $e(1,$r.status,"readyState: "+$r.readyState+"; statusText: "+$r.statusText))},0)},$r.open(tr.method,""+jt+fr),$r.timeout=tr.timeout||5e3,$r.setRequestHeader("Content-Type",rr),tr.headers)for(var Hr in tr.headers)$r.setRequestHeader(Hr,tr.headers[Hr]);$r.ontimeout=function(Gr){Pr(new $e(1,408,Gr&&Gr.message?Gr.message:"request timeout"))},$r.send(ha(tr.data))}else Pr(new $e(2,10400,"request no suppout"))})}return Ce}()}),aa=console,bp=null,Sp=null,gs={setLogger:function(he){aa=he},platform:"BROWSER",localStorage:window.localStorage,request:Ma,WebSocket:window.WebSocket,uploadFile:function(he){return qn(this,void 0,void 0,Kr.mark(function Ue(){var $e,Ce,jt,tr,rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:if(he.fileInput||he.file){Pr.next=2;break}throw new Error("File not exist");case 2:if(!he.file){Pr.next=6;break}tr=he.file,Pr.next=20;break;case 6:if(typeof he.fileInput!="string"){Pr.next=15;break}if(!((rr=document.getElementById(he.fileInput))&&rr.files&&rr.files[0])){Pr.next=12;break}tr=rr.files[0],Pr.next=13;break;case 12:throw new Error("Can not get file from fileInput");case 13:Pr.next=20;break;case 15:if(!(he.fileInput&&he.fileInput.files&&he.fileInput.files[0])){Pr.next=19;break}tr=he.fileInput.files[0],Pr.next=20;break;case 19:throw new Error("Can not get file from fileInput "+he.fileInput);case 20:if(!(he.maxSize&&tr.size>he.maxSize)){Pr.next=22;break}throw new Error("The file exceeds maxSize limit. maxSize: "+he.maxSize+", get "+tr.size);case 22:return Pr.next=24,new Ca(function(Rr,$r){var Hr=wm.createConfig({enableCache:!1,directUploadAddr:he.chunkUploadHost,onError:function(Sn){$r(Sn)},onUploadProgress:he.onUploadProgress||function(){},onComplete:function(Sn){Rr(Sn)}}),Gr=wm.createTask(tr,{bucketName:he.nosToken.bucket,objectName:decodeURIComponent(he.nosToken.objectName),token:he.nosToken.token},Hr);try{he.onUploadStart&&he.onUploadStart(Gr)}catch(bn){aa.error("Adapter uploadFile: options.onUploadStart error",bn&&bn.message),Gr.abort(),$r(bn)}});case 24:return(fr=Pr.sent).name=tr.name,fr.size=tr.size,fr.type=tr.type,fr.ext=bv($e=fr.name).call($e,".")>-1?xa(Ce=fr.name).call(Ce,bv(jt=fr.name).call(jt,".")+1).toLowerCase():"",Pr.abrupt("return",fr);case 30:case"end":return Pr.stop()}},Ue)}))},getSystemInfo:function(){var he,Ue,$e=su.version||"";if(ov())try{var Ce=navigator.userAgent.match(/Electron\/([\d.]+\d+)/);Ce&&Ce[1]&&typeof Ce[1]=="string"&&($e=Ce[1])}catch{}return{os:((he=su.os)===null||he===void 0?void 0:he.family)||"",osVer:((Ue=su.os)===null||Ue===void 0?void 0:Ue.version)||"",browser:su.name||"",browserVer:su.version||"",libEnv:"BROWSER",hostEnv:ov()?"Electron":Xu()?"H5":d0()?"BROWSER":"Unset",hostEnvEnum:ov()?Gs.Electron:Xu()?Gs.H5:d0()?Gs.BROWSER:Gs.Unset,hostEnvVer:$e,userAgent:navigator&&navigator.userAgent,model:$e,manufactor:su.name||""}},net:{getNetworkStatus:function(){return Ca.resolve({net_type:Ks.kStatNetTypeUnkonw,net_connect:typeof navigator>"u"||typeof navigator.onLine!="boolean"||navigator.onLine})},onNetworkStatusChange:function(he){bp=function(){he({isConnected:!0,networkType:Ks.kStatNetTypeUnkonw})},Sp=function(){he({isConnected:!1,networkType:Ks.kStatNetTypeUnkonw})},window.addEventListener("online",bp),window.addEventListener("offline",Sp)},offNetworkStatusChange:function(){bp&&window.removeEventListener("online",bp),Sp&&window.removeEventListener("offline",Sp),bp=null,Sp=null}}};En({target:"Number",stat:!0},{isNaN:function(he){return he!=he}});var as,yC=_r.Number.isNaN,qa=ms({none:0,normal:1,all:3}),Cv={normal:0,advanced:1},bC=ms(Cv),Tp=ms({normal:0,owner:1,manager:2}),Mv={noVerify:0,needVerify:1,rejectAll:2},F0=ms(Mv),_m={needVerify:0,noVerify:1},SC=ms(_m),$0={manager:0,all:1},TC=ms($0),Cp={manager:0,all:1},kv=ms(Cp),Mp={manager:0,all:1},hl=ms(Mp);function vl(_e){var he,Ue=["teamId"],$e=["level","memberNum","memberUpdateTime","createTime","updateTime"],Ce=["valid","validToCurrentUser","mute"],jt={type:bC,muteType:qa,joinMode:F0,beInviteMode:SC,inviteMode:TC,updateTeamMode:kv,updateExtMode:hl};_e.bits;var tr=ta(_e,["bits"]);return yo(Ue).call(Ue,function(rr){tr[rr]&&(tr[rr]=tr[rr].toString())}),yo($e).call($e,function(rr){tr[rr]!==void 0&&(tr[rr]=Lo(tr[rr]))}),yo(Ce).call(Ce,function(rr){tr[rr]!==void 0&&(tr[rr]=Lo(tr[rr])===1)}),yo(he=fa(jt)).call(he,function(rr){tr[rr]!==void 0&&(tr[rr]=jt[rr][tr[rr]]||tr[rr])}),tr}function mc(_e){return _e&&_e.length>0?Oo(_e).call(_e,function(he){return vl(he)}):[]}function j0(_e){var he,Ue=Gn({},_e),$e=["avatar","name","intro","announcement","ext"],Ce={type:Cv,joinMode:Mv,beInviteMode:_m,inviteMode:$0,updateTeamMode:Cp,updateExtMode:Mp};return yo($e).call($e,function(jt){Ue[jt]!==void 0&&(Ue[jt]=Ue[jt].toString())}),yo(he=fa(Ce)).call(he,function(jt){Ue[jt]!==void 0&&(Ue[jt]=Ce[jt][Ue[jt]])}),Ue}function xm(_e){var he=["teamId","ext","account","nickInTeam"],Ue={};return _e.bitConfigMask!==void 0&&(Ue.bits=Lo(_e.bitConfigMask)),yo(he).call(he,function($e){_e[$e]&&(Ue[$e]=_e[$e].toString())}),Object.prototype.hasOwnProperty.call(_e,"nickInTeam")&&(Ue.nickInTeam=_e.nickInTeam),Ue}function rd(_e){var he,Ue=["teamId"],$e=["joinTime","updateTime","bitConfigMask"],Ce=["active","valid","mute"],jt={type:Tp},tr=_e.bits,rr=ta(_e,["bits"]);return tr!==void 0&&(rr.muteTeam=Lo(tr)===1,rr.bitConfigMask=tr),rr.id=rr.teamId+"-"+rr.account,yo(Ue).call(Ue,function(fr){rr[fr]&&(rr[fr]=rr[fr].toString())}),yo($e).call($e,function(fr){rr[fr]!==void 0&&(rr[fr]=Lo(rr[fr]))}),yo(Ce).call(Ce,function(fr){rr[fr]!==void 0&&(rr[fr]=Lo(rr[fr])===1)}),yo(he=fa(jt)).call(he,function(fr){rr[fr]!==void 0&&(rr[fr]=jt[fr][rr[fr]]||rr[fr])}),rr}function kp(_e){return _e&&_e.length>0?Oo(_e).call(_e,function(he){return rd(he)}):[]}function Ea(_e,he,Ue){return Ue===void 0&&(Ue="normal"),{id:_e.teamId+"-"+he,teamId:_e.teamId,account:he,type:Ue,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:_e.memberUpdateTime,updateTime:_e.memberUpdateTime,active:!0,valid:!0}}function xi(_e,he,Ue){return Ue===void 0&&(Ue="normal"),he&&he.length>0?Oo(he).call(he,function($e){return Ea(_e,$e,Ue)}):[]}function Ii(_e){var he=Gn({},_e);return he.createTime&&(he.createTime=+he.createTime),he.updateTime&&(he.updateTime=+he.updateTime),he.gender&&(he.gender=as[+he.gender]),he}(function(_e){_e[_e.unknown=0]="unknown",_e[_e.male=1]="male",_e[_e.female=2]="female"})(as||(as={}));var CC={"8_1":"createTeam","8_5":"addTeamMembers","8_6":"removeTeamMembers","8_7":"updateTeamInfo","8_8":"leaveTeam","8_9":"getTeamInfo","8_10":"getTeams","8_11":"getTeamMembers","8_12":"dismissTeam","8_13":"applyTeam","8_14":"passTeamApply","8_15":"rejectTeamApply","8_16":"addTeamManagers","8_17":"removeTeamManagers","8_18":"transferTeam","8_19":"updateMyMemberInfo","8_20":"updateNickInTeam","8_21":"acceptTeamInvite","8_22":"rejectTeamInvite","8_25":"muteTeamMember","8_27":"getMutedTeamMembers","8_28":"sendTeamMsgReceipt","8_29":"getTeamMsgReads","8_30":"getTeamMsgReadAccounts","8_31":"notifyTeamMsgReceipts","8_32":"muteTeam","8_33":"getTeamMemberInvitorAccid","8_34":"getTeamsById","8_101":"syncCreateTeam","8_109":"syncTeams","8_119":"syncUpdateTeamMember","8_126":"syncMyTeamMembers"},Pc={team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},teamMsgReceiptTag:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,ext:12,mute:13,invitorAccid:14}},Es=Ws(Pc),MC={getTeamInfo:{sid:8,cid:9,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"team",reflectMapper:Es.team}]},getTeams:{sid:8,cid:10,service:"team",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:Es.team},{type:"Number",name:"timetag"}],ignoreErrCodes:[803]},createTeam:{sid:8,cid:1,service:"team",params:[{type:"Property",name:"team",reflectMapper:Pc.team},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:Es.team},{type:"StrArray",name:"abortedAccidList"}]},sendTeamMsgReceipt:{sid:8,cid:28,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Pc.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Es.teamMsgReceiptTag}]},getTeamMsgReads:{sid:8,cid:29,service:"team",params:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Pc.teamMsgReceiptTag}],response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Es.teamMsgReceiptTag}]},getTeamMsgReadAccounts:{sid:8,cid:30,service:"team",params:[{type:"Property",name:"teamMsgReceiptTag",reflectMapper:Pc.teamMsgReceiptTag}],response:[{type:"Property",name:"teamMsgReceipt",reflectMapper:Es.teamMsgReceiptTag},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},notifyTeamMsgReceipts:{sid:8,cid:31,service:"team",response:[{type:"PropertyArray",name:"teamMsgReceipts",reflectMapper:Es.teamMsgReceiptTag}]},dismissTeam:{sid:8,cid:12,service:"team",params:[{type:"Long",name:"teamId"}]},leaveTeam:{sid:8,cid:8,service:"team",params:[{type:"Long",name:"teamId"}]},transferTeam:{sid:8,cid:18,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateTeamInfo:{sid:8,cid:7,service:"team",params:[{type:"Property",name:"team",reflectMapper:Pc.team}],response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},getTeamsById:{sid:8,cid:34,service:"team",params:[{type:"LongArray",name:"teamIds"}],response:[{type:"PropertyArray",name:"teams",reflectMapper:Es.team},{type:"StrArray",name:"tids"}],ignoreErrCodes:[816]},getTeamMembers:{sid:8,cid:11,service:"team",params:[{type:"Long",name:"teamId"},{type:"Long",name:"timetag"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:Es.teamMember},{type:"Number",name:"timetag"}]},getMutedTeamMembers:{sid:8,cid:27,service:"team",params:[{type:"Long",name:"teamId"}],response:[{type:"String",name:"teamId"},{type:"PropertyArray",name:"teamMembers",reflectMapper:Es.teamMember}]},addTeamMembers:{sid:8,cid:5,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}],response:[{type:"Long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},removeTeamMembers:{sid:8,cid:6,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applyTeam:{sid:8,cid:13,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"team",reflectMapper:Es.team}]},addTeamManagers:{sid:8,cid:16,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:8,cid:17,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateMyMemberInfo:{sid:8,cid:19,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:Pc.teamMember}]},updateNickInTeam:{sid:8,cid:20,service:"team",params:[{type:"Property",name:"teamMember",reflectMapper:Pc.teamMember}]},muteTeamMember:{sid:8,cid:25,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"Int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:8,cid:33,service:"team",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}],response:[{type:"Object",name:"accountsMap"}]},muteTeam:{sid:8,cid:32,service:"team",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},passTeamApply:{sid:8,cid:14,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:8,cid:15,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptTeamInvite:{sid:8,cid:21,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:8,cid:22,service:"team",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncTeams:{sid:8,cid:109,service:"team",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",reflectMapper:Es.team}]},syncCreateTeam:{sid:8,cid:101,service:"team",response:[{type:"Property",name:"team",reflectMapper:Es.team}]},syncUpdateTeamMember:{sid:8,cid:119,service:"team",response:[{type:"Property",name:"teamMember",reflectMapper:Es.teamMember}]},syncMyTeamMembers:{sid:8,cid:126,ext:"sync",service:"team",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember",reflectMapper:Es.teamMember},{type:"Number",name:"timetag"}]}},kC={"3_7":"getUsersNameCardFromServer","3_10":"updateMyNameCard","3_109":"syncMyNameCard","3_110":"onUpdateMyNameCard","3_3":"setBlack","3_103":"onUpdateBlackList","3_5":"setMute","3_105":"onUpdateMuteList","3_8":"syncRelations"},D0={user:{account:1,nick:3,avatar:4,signature:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13},relationMember:{account:0,isMuted:1,isBlack:2,createTime:3,updateTime:4}},wp=Ws(D0),wC={syncMyNameCard:{sid:3,cid:109,service:"user",response:[{type:"Property",name:"user",reflectMapper:wp.user},{type:"Number",name:"timetag"}]},setBlack:{service:"user",sid:3,cid:3,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateBlackList:{service:"user",sid:3,cid:103,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},setMute:{service:"user",sid:3,cid:5,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},onUpdateMuteList:{service:"user",sid:3,cid:105,response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},syncRelations:{service:"user",sid:3,cid:8,params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"list",reflectMapper:wp.relationMember},{type:"Number",name:"timetag"}]},getUsersNameCardFromServer:{service:"user",sid:3,cid:7,params:[{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"users",reflectMapper:wp.user}]},updateMyNameCard:{service:"user",sid:3,cid:10,params:[{type:"Property",name:"user",reflectMapper:D0.user}],response:[{type:"Number",name:"timetag"}]},onUpdateMyNameCard:{service:"user",sid:3,cid:110,response:[{type:"Property",name:"user",reflectMapper:wp.user}]}},Im={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needForcePush:{type:"boolean",required:!1},forcePushIDsList:{type:"string",allowEmpty:!1,required:!1},forcePushContent:{type:"string",allowEmpty:!1,required:!1}},nd={function:{type:"string",required:!1},topic:{type:"string",required:!1},customContent:{type:"string",required:!1},account:{type:"string",required:!1}};function Em(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(uc(_e)||($e=function(tr,rr){var fr;if(tr){if(typeof tr=="string")return Pm(tr,rr);var kr=xa(fr=Object.prototype.toString.call(tr)).call(fr,8,-1);if(kr==="Object"&&tr.constructor&&(kr=tr.constructor.name),kr==="Map"||kr==="Set")return Ki(tr);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return Pm(tr,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pm(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var od={subType:{type:"string"},setting:{resendFlag:{type:"boolean"},envConfig:{type:"string"},needSaveHistory:{type:"boolean"},needRoaming:{type:"boolean"},needOffline:{type:"boolean"},needSelfSync:{type:"boolean"},needRouted:{type:"boolean"},needUpdateSession:{type:"boolean"},isMuted:{type:"boolean"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"string"},antiSpamBIZID:{type:"string"},clientAntispamHitting:{type:"boolean"},antiSpamUsingYidun:{type:"boolean"},yidunCallbackURL:{type:"string"},yidunAntiCheating:{type:"string"},yidunAntiSpamExtension:{type:"string"},yidunAntiSpamResult:{type:"string"}},pushInfo:Im,robotInfo:nd,teamSpecializationInfo:{needACK:{type:"boolean"},isACKSent:{type:"boolean"},ackSnapshot:{type:"number"}},threadMessageInfo:{replyMsgFromAccount:{type:"string"},replyMsgToAccount:{type:"string"},replyMsgTime:{type:"number"},replyMsgIdServer:{type:"string"},replyMsgIdClient:{type:"string"},threadMsgFromAccount:{type:"string"},threadMsgToAccount:{type:"string"},threadMsgTime:{type:"number"},threadMsgIdServer:{type:"string"},threadMsgIdClient:{type:"string"}}},_p={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMemberMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function Ac(_e,he){return Za[_e.scene]+"-"+(_e.to===he?_e.from:_e.to)}function _C(_e,he){return _e.from===he?_e.to===he?"in":"out":"in"}function Ei(_e,he){var Ue=he.account,$e=he.featureValue,Ce=he.statusValue,jt=he.sessionAck,tr=he.msgReceiptTime,rr=Za[_e.scene],fr=_e.to===Ue?_e.from:_e.to,kr=wi.default,Pr=Va.unread;Lo(_e.isInBlackList)>0?(Pr=Va.refused,delete _e.isInBlackList):Pr=_e.from===Ue?tr&&tr>=+_e.time?Va.receipt:Va.sent:jt&&jt>=+_e.time?Va.read:Va.unread;var Rr=Gn(Gn({},ai(od,_e)),{scene:rr,type:Xl[_e.type],fromClientType:np[_e.fromClientType],flow:_C(_e,Ue),target:fr,to:_e.to,from:_e.from,time:_e.time?+_e.time:void 0,userUpdateTime:_e.userUpdateTime?+_e.userUpdateTime:void 0,idClient:_e.idClient,sessionId:rr+"-"+fr,status:Va[Ce||Pr],feature:wi[$e||kr]});if(typeof Rr.attach=="string")try{Rr.attach=JSON.parse(Rr.attach)}catch{}return Rr.type==="notification"&&(Rr.attach=Rr.attach?function(Hr){var Gr,bn={};if(bn.type=_p[Hr.id]||Hr.id,!Hr.data)return bn;var Sn,An={ids:"accounts",id:"account",attach:"custom",channel:"channelId",calltype:"netcallType",mute:"mute",duration:"duration",time:"time",from:"from",ext:"ext"},kn=Hr.data;return yo(Gr=fa(An)).call(Gr,function(Kn){kn[Kn]!==void 0&&(bn[An[Kn]]=kn[Kn])}),kn.tinfo&&(bn.team=vl(il(kn.tinfo,Es.team))),kn.uinfos&&(bn.users=Oo(Sn=kn.uinfos).call(Sn,function(Kn){return Ii(il(Kn,wp.user))})),kn.mute!==void 0&&(bn.mute=Lo(kn.mute)===1),bn}(Rr.attach):{}),Rr}function Am(_e,he){return _e&&_e.length>0?U0(Oo(_e).call(_e,function(Ue){return Ei(Ue,he)})):[]}function U0(_e){for(var he,Ue,$e={},Ce=Em(_e);!(Ue=Ce()).done;){var jt=Ue.value,tr=$e[jt.idClient];tr&&tr.time>jt.time||($e[jt.idClient]=jt)}return Oo(he=fa($e)).call(he,function(rr){return $e[rr]})}function wv(_e,he){he===void 0&&(he=!0);var Ue=Gn({},_e);if(Ue.pushInfo&&he){for(var $e in Ue.pushInfo)typeof Ue.pushInfo[$e]=="boolean"?Ue[$e]=Ue.pushInfo[$e]?1:0:Ue[$e]=Ue.pushInfo[$e];delete Ue.pushInfo}return Ue.scene===Za.team&&Ue.needForcePush&&(Ue.forcePushContent=Ue.forcePushContent||Ue.pushContent,Ue.forcePushIDsList=Ue.forcePushIDsList?Ue.forcePushIDsList:"#%@all@%#"),Ue}function xp(_e,he){return Oo(_e).call(_e,function(Ue){var $e;return $e=he||(yC(Lo(Ue.scene))?Ue.scene:Lo(Ue.scene)===1?"p2p":"team"),{deletedTime:Lo(Ue.time),from:Ue.from,idClient:Ue.deletedIdClient||Ue.idClient,idServer:Ue.deletedIdServer||Ue.idServer,scene:$e,time:Lo(Ue.deletedMsgCreateTime),to:Ue.to,ext:typeof Ue.ext=="string"?Ue.ext:null}})}var V0=Array.prototype.reverse,xC=function(he){return he==null?he:V0.call(he)},q0=function(){function _e(he){this.core=he}return _e.prototype.processBroadcastMsg=function(Ue){var $e=Oo(Ue).call(Ue,function(Ce){return Gn(Gn({},Ce),{time:Lo(Ce.time)})});return this.core.sendCmd("batchMarkRead",{sid:7,cid:17,ids:Oo($e).call($e,function(Ce){return Ce.id})}),$e},_e}(),cu={needPush:{type:"boolean",required:!1},needPushBadge:{type:"boolean",required:!1},needPushNick:{type:"boolean",required:!1},pushContent:{type:"string",allowEmpty:!1,required:!1},pushPayload:{type:"string",allowEmpty:!1,required:!1}},Ip={pushContent:8,pushPayload:9,needPush:107,needPushBadge:109,needPushNick:110},ad={"4_4":"syncOfflineMsgs","4_9":"syncRoamingMsgs","4_17":"syncRoamingMsgs","4_21":"syncDeleteSelfMsgs","7_1":"sendMsg","8_23":"getHistoryTeamMsgs","21_14":"getHistorySuperTeamMsgs","8_2":"sendTeamMsg","21_2":"sendSuperTeamMsg","7_11":"sendMsgReceipt","7_13":"recallMsg","7_24":"deleteSelfMsgs","21_17":"recallSuperTeamMsg","7_2":"onMsg","8_3":"onMsg","21_3":"onMsg","7_101":"onMsg","8_102":"onMsg","21_102":"onMsg","8_4":"nimOnTeamMsgs","4_16":"syncBroadcastMsg","7_17":"onBroadcastMsg","7_123":"onDeleteSelfMsg","7_124":"onDeleteSelfMsgs"},yl=Gn(Gn({scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resendFlag:13,userUpdateTime:14,ext:15,needAntiSpam:21,antiSpamContent:22,antiSpamBIZID:23,clientAntispamHitting:24,antiSpamUsingYidun:25,needACK:26,yidunCallbackURL:27,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,isDeleted:39,callbackExt:40,subType:41,yidunAntiCheating:42,envConfig:43,yidunAntiSpamExtension:44,yidunAntiSpamResult:45,needSaveHistory:100,needRoaming:101,needSelfSync:102,isMuted:104,needRouted:105,isInBlackList:106,needOffline:108,isReplyMsg:111,ackSnapshot:112},{pushContent:17,pushPayload:16,forcePushIDsList:18,forcePushContent:19,needForcePush:20,needPush:107,needPushBadge:109,needPushNick:110}),{function:47,topic:48,customContent:49,account:50}),bl={msg:yl,recallMsgTag:Gn({time:0,type:1,to:2,from:3,ps:4,attach:5,deletedIdClient:10,deletedIdServer:11,opeAccount:16,env:21},Ip),deleteSelfMsgTag:{scene:1,from:2,to:3,idServer:4,idClient:5,deletedMsgCreateTime:6,time:7,ext:8},msgReceiptTag:{to:1,from:2,time:7,idClient:11},broadcastMsg:{id:1,fromAccid:2,time:4,body:5}},Ms=Ws(bl),IC={sendMsg:{sid:7,cid:1,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:bl.msg}],response:[{type:"Property",name:"msg",reflectMapper:Ms.msg}],ignoreErrCodes:[7101]},sendTeamMsg:{sid:8,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:bl.msg}],response:[{type:"Property",name:"msg",reflectMapper:Ms.msg}]},sendSuperTeamMsg:{sid:21,cid:2,service:"msg",params:[{type:"Property",name:"msg",reflectMapper:bl.msg}],response:[{type:"Property",name:"msg",reflectMapper:Ms.msg}]},onMsg:{sid:7,cid:2,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:Ms.msg}]},nimOnTeamMsgs:{sid:8,cid:4,service:"msg",response:[{type:"PropertyArray",name:"datas",reflectMapper:Ms.msg}]},getHistoryTeamMsgs:{sid:8,cid:23,service:"msg",params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ms.msg}]},getHistorySuperTeamMsgs:{sid:21,cid:14,params:[{type:"Long",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ms.msg}],service:"msg"},recallMsg:{sid:7,cid:13,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:bl.recallMsgTag}]},deleteSelfMsgs:{sid:7,cid:24,service:"msg",params:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:bl.deleteSelfMsgTag}],response:[{type:"Long",name:"timetag"}]},recallSuperTeamMsg:{sid:21,cid:17,service:"msg",params:[{type:"Property",name:"recallMsgTag",reflectMapper:bl.recallMsgTag}]},sendMsgReceipt:{sid:7,cid:11,service:"msg",params:[{type:"Property",name:"msgReceiptTag",reflectMapper:bl.msgReceiptTag}],response:[{type:"Property",name:"msgReceiptTag",reflectMapper:Ms.msgReceiptTag}]},batchMarkRead:{sid:4,cid:5,service:"msg",hasPacketResponse:!1,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},syncMsgReceipts:{sid:4,cid:12,service:"msg",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:Ms.msgReceiptTag},{type:"Number",name:"timetag"}]},syncOfflineMsgs:{sid:4,cid:4,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ms.msg}]},syncRoamingMsgs:{sid:4,cid:9,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ms.msg}]},syncBroadcastMsg:{sid:4,cid:16,service:"msg",response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ms.broadcastMsg}]},onBroadcastMsg:{sid:7,cid:17,service:"msg",response:[{type:"Property",name:"msg",reflectMapper:Ms.broadcastMsg}]},onDeleteSelfMsg:{sid:7,cid:123,service:"msg",response:[{type:"Property",name:"deletedMsg",reflectMapper:Ms.deleteSelfMsgTag}]},onDeleteSelfMsgs:{sid:7,cid:124,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:Ms.deleteSelfMsgTag}]},syncDeleteSelfMsgs:{sid:4,cid:21,service:"msg",response:[{type:"PropertyArray",name:"deletedMsgs",reflectMapper:Ms.deleteSelfMsgTag}]}},EC=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"msg",$e)||this).service=new q0($e),Ss({cmdMap:ad,cmdConfig:IC}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.sendTextMsg=function(Ce){return Xn({body:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"text"}))},Ue.sendTipMsg=function(Ce){return Xn({body:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"tip"}))},Ue.sendGeoLocationMsg=function(Ce){return Xn({attach:{type:"object",rules:{title:{type:"string",allowEmpty:!1},lat:{type:"number"},lng:{type:"number"}}}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"geo",attach:ha(Ce.attach)}))},Ue.sendCustomMsg=function(Ce){return Xn({attach:{type:"string",allowEmpty:!1}},Ce),this.sendMsg(Gn(Gn({},Ce),{type:"custom"}))},Ue.sendMsg=function(Ce){var jt,tr=this;if(Xn({scene:{type:"enum",values:pc(Za)},type:{type:"enum",values:pc(Xl)},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},setting:{type:"object",rules:{resendFlag:{type:"boolean",required:!1},needSaveHistory:{type:"boolean",required:!1},needRoaming:{type:"boolean",required:!1},needOffline:{type:"boolean",required:!1},needSelfSync:{type:"boolean",required:!1},needRouted:{type:"boolean",required:!1},needUpdateSession:{type:"boolean",required:!1}},required:!1},antiSpamInfo:{type:"object",required:!1,rules:{clientAntispamHitting:{type:"boolean",required:!1},antiSpamUsingYidun:{type:"boolean",required:!1}}},pushInfo:{type:"object",required:!1,rules:Im},robotInfo:{type:"object",required:!1,rules:nd},teamSpecializationInfo:{type:"object",required:!1,rules:{needACK:{type:"boolean",required:!1}}}},Ce),Ce.scene==="team"&&Ce.robotInfo&&!Ce.robotInfo.account)throw new Du('When "scene" equals "team", account is required in robotInfo',{key:"account"},"required");var rr,fr=Ce.scene==="p2p"?"sendMsg":Ce.scene==="team"?"sendTeamMsg":"sendSuperTeamMsg",kr=function($r,Hr,Gr,bn){$r.onSendBefore,$r.onUploadStart,$r.onUploadDone;var Sn=$r.replyMsg,An=ta($r,["onSendBefore","onUploadStart","onUploadDone","replyMsg"]),kn=Gn(Gn({},om(od,An)),{scene:Za[$r.scene],type:Xl[$r.type],from:Hr,fromClientType:16,fromDeviceId:Gr,fromNick:bn==null?void 0:bn.nick,userUpdateTime:bn==null?void 0:bn.updateTime,status:Va[Va.sending]});if(kn.idClient=kn.resendFlag?$r.idClient:Jo(),!kn.idClient)throw new Eh("idClient is required to resend a message","idClient","required");return kn=wv(kn,!1),Sn&&(kn.replyMsgFromAccount=Sn.from,kn.replyMsgToAccount=Sn.to,kn.replyMsgTime=+Sn.time,kn.replyMsgIdServer=Sn.idServer,kn.replyMsgIdClient=Sn.idClient,kn.threadMsgFromAccount=Sn.from,kn.threadMsgToAccount=Sn.to,kn.threadMsgTime=+Sn.time,kn.threadMsgIdServer=Sn.idServer,kn.threadMsgIdClient=Sn.idClient,Sn.threadMessageInfo&&Sn.threadMessageInfo.threadMsgIdServer&&(kn.threadMsgFromAccount=Sn.threadMessageInfo.threadMsgFromAccount,kn.threadMsgToAccount=Sn.threadMessageInfo.threadMsgToAccount,kn.threadMsgTime=Sn.threadMessageInfo.threadMsgTime,kn.threadMsgIdServer=Sn.threadMessageInfo.threadMsgIdServer,kn.threadMsgIdClient=Sn.threadMessageInfo.threadMsgIdClient)),kn}(Ce,this.core.account,this.core.config.deviceId,(jt=this.core.user)===null||jt===void 0?void 0:jt.myInfo),Pr=Ei(Gn(Gn({},kr),{time:new Date().getTime()}),{account:this.core.account,featureValue:wi.default,statusValue:Va.sending});try{Ce.onSendBefore&&Ce.onSendBefore(Pr)}catch(Rr){this.logger.error("sendMsg: options.onSendBefore error",Rr)}return this.core.eventBus.emit("session/updateForNewMsg",Pr),this.core.sendCmd(fr,{msg:kr}).then(function(Rr){var $r=Rr.content,Hr=Rr.error;if(rr=$r.msg,Hr)throw Hr;var Gr=Ei(Gn(Gn({},kr),$r.msg),{account:tr.core.account,featureValue:wi.default,statusValue:Va.sent});return Gr.from===Gr.to&&tr.markMsgsAck([Gr]),tr.core.eventBus.emit("session/updateForNewMsg",Gr),tr.core.reporter.report("msgSend",{msgId:Gr.idServer,clientId:Gr.idClient,msgTime:Gr.time,fromAccid:Ce.scene==="p2p"?tr.core.account:"",toAccid:Gr.to,type:Za[Gr.scene],roomId:"",tid:Ce.scene==="p2p"?"":Gr.to,result:200,failReason:"",rt:bo()-Pr.time}),Gr}).catch(function(Rr){var $r=Ei(Gn(Gn(Gn({},kr),{time:new Date().getTime()}),rr),{account:tr.core.account,featureValue:wi.default,statusValue:Rr.code===7101?Va.refused:Va.sendFailed});throw Rr.msg=$r,tr.core.eventBus.emit("session/updateForNewMsg",$r),tr.core.reporter.report("msgSend",{msgId:$r.idServer,clientId:$r.idClient,msgTime:$r.time,fromAccid:Ce.scene==="p2p"?tr.core.account:"",toAccid:$r.to,type:Za[$r.scene],roomId:"",tid:Ce.scene==="p2p"?"":$r.to,result:Rr==null?void 0:Rr.code,failReason:(Rr==null?void 0:Rr.message)||"",rt:bo()-Pr.time}),Rr})},Ue.resendMsg=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}}},Ce),tr=Ce.msg,rr=Gn(Gn({},tr),{attach:tr.attach?ha(tr.attach):void 0,setting:{resendFlag:!0}}),tr.from===this.core.account){kr.next=5;break}throw new Error("You can only resend messages that you sent: "+tr.idClient);case 5:return kr.abrupt("return",this.sendMsg(rr));case 6:case"end":return kr.stop()}},jt,this)}))},Ue.forwardMsg=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1}}},scene:{type:"enum",values:pc(Za)},to:{type:"string",allowEmpty:!1}},Ce),tr=Ce.msg,rr=Gn(Gn({},tr),{scene:Ce.scene,to:Ce.to,attach:tr.attach?ha(tr.attach):void 0}),kr.abrupt("return",this.sendMsg(rr));case 4:case"end":return kr.stop()}},jt,this)}))},Ue.sendImageMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"image"}))},Ue.sendFileMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"file"}))},Ue.sendAudioMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"audio"}))},Ue.sendVideoMsg=function(Ce){return this.doSendFile(Gn(Gn({},Ce),{type:"video"}))},Ue.doSendFile=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Xn({scene:{type:"enum",values:pc(Za)},to:{type:"string",allowEmpty:!1},type:{type:"string",allowEmpty:!1},attach:{type:"object",rules:{url:{type:"string",allowEmpty:!1}},required:!1},maxSize:{type:"number",min:1,required:!1}},Ce),tr=Ce.attach){fr.next=15;break}if(this.core.cloudStorage&&this.core.cloudStorage.uploadFile){fr.next=5;break}throw new Error('Service "cloudStorage" does not exist');case 5:return fr.prev=5,fr.next=8,this.core.cloudStorage.uploadFile(Ce);case 8:tr=fr.sent,fr.next=15;break;case 11:throw fr.prev=11,fr.t0=fr.catch(5),this.logger.error("sendFile:: upload File error or abort",fr.t0),fr.t0;case 15:return fr.abrupt("return",this.sendMsg(Gn(Gn({},Ce),{attach:ha(tr),type:Ce.type})));case 16:case"end":return fr.stop()}},jt,this,[[5,11]])}))},Ue.recallMsg=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},scene:{type:"enum",values:pc(Za)},time:{type:"number"}}},pushInfo:{type:"object",required:!1,rules:cu},ps:{type:"string",allowEmpty:!1,required:!1}},Ce),tr=Ce.msg,rr={p2p:"recallMsg",team:"recallMsg",superTeam:"recallSuperTeamMsg"},fr={p2p:7,team:8,superTeam:12},Rr.next=6,this.core.sendCmd(rr[tr.scene],{recallMsgTag:wv({time:tr.time,type:fr[tr.scene],to:tr.to,from:tr.from,ps:Ce.ps,attach:Ce.attach,deletedIdClient:tr.idClient,deletedIdServer:tr.idServer,opeAccount:tr.from,env:Ce.env,pushInfo:Ce.pushInfo})});case 6:return kr=Gn({},tr,{deletedMsgCreateTime:tr.time}),this.core.eventBus.emit("session/updateForDeletedMsg",xp([kr])),Rr.abrupt("return",tr);case 9:case"end":return Rr.stop()}},jt,this)}))},Ue.deleteSelfMsgs=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({msgs:{type:"array",rules:{scene:{type:"enum",values:["p2p","team"]},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},time:{type:"number",allowEmpty:!1}}},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),tr=Ce.msgs,rr=Oo(tr).call(tr,function(Hr){return{scene:Hr.scene==="p2p"?1:2,from:Hr.from,to:Hr.to,idServer:Hr.idServer,idClient:Hr.idClient,deletedMsgCreateTime:Hr.time,ext:Ce.ext}}),$r.next=5,this.core.sendCmd("deleteSelfMsgs",{deletedMsgs:rr});case 5:return fr=$r.sent,kr=Oo(rr).call(rr,function(Hr){var Gr;return Gn({},Hr,{time:(Gr=fr==null?void 0:fr.content)===null||Gr===void 0?void 0:Gr.timetag})}),Pr=xp(kr),this.core.eventBus.emit("session/updateForDeletedMsg",tr),$r.abrupt("return",Pr);case 10:case"end":return $r.stop()}},jt,this)}))},Ue.sendMsgReceipt=function(Ce){var jt,tr;return qn(this,void 0,void 0,Kr.mark(function rr(){var fr,kr,Pr,Rr;return Kr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(Xn({msg:{type:"object",rules:{idClient:{type:"string",allowEmpty:!1},target:{type:"string",allowEmpty:!1},time:{type:"number"}}}},Ce),(fr=Ce.msg).scene==="p2p"&&fr.flow==="in"){Hr.next=5;break}return this.logger.warn("Msg scene: "+fr.scene+", flow: "+fr.flow+" is not allowed to send msg receipt"),Hr.abrupt("return",void 0);case 5:return kr={to:fr.target,idClient:fr.idClient,time:fr.time},Hr.next=8,this.core.sendCmd("sendMsgReceipt",{msgReceiptTag:kr});case 8:return Pr=Hr.sent,Rr=Lo((tr=(jt=Pr.content)===null||jt===void 0?void 0:jt.msgReceiptTag)===null||tr===void 0?void 0:tr.time),Hr.abrupt("return",Gn(Gn({},kr),{time:Rr?Math.min(Rr,kr.time):kr.time}));case 11:case"end":return Hr.stop()}},rr,this)}))},Ue.sendTeamMsgReceipt=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}},max:50}},Ce),tr=Ce.teamMsgReceipts,this.core.sendCmd("sendTeamMsgReceipt",{teamMsgReceipts:tr}),fr.abrupt("return",void 0);case 4:case"end":return fr.stop()}},jt,this)}))},Ue.getTeamMsgReads=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({teamMsgReceipts:{type:"array",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},Ce),rr=Ce.teamMsgReceipts,Rr.next=4,this.core.sendCmd("getTeamMsgReads",{teamMsgReceipts:rr});case 4:return fr=Rr.sent,kr=(kr=(jt=fr.content)===null||jt===void 0?void 0:jt.teamMsgReceipts)?Oo(kr).call(kr,function($r){return Gn(Gn({},$r),{read:Lo($r.read),unread:Lo($r.unread)})}):[],Rr.abrupt("return",kr);case 8:case"end":return Rr.stop()}},tr,this)}))},Ue.getTeamMsgReadAccounts=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamMsgReceipt:{type:"object",rules:{teamId:{type:"string",allowEmpty:!1},idClient:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1}}}},Ce),tr=Ce.teamMsgReceipt,kr.next=4,this.core.sendCmd("getTeamMsgReadAccounts",{teamMsgReceiptTag:tr});case 4:return rr=kr.sent,kr.abrupt("return",rr.content);case 6:case"end":return kr.stop()}},jt,this)}))},Ue.markMsgsAck=function(Ce){if(Ce&&Ce.length>0){var jt=[],tr=[];yo(Ce).call(Ce,function(rr){rr.scene==="p2p"&&rr.flow==="in"?jt.push(rr):rr.scene==="team"&&rr.flow==="in"&&tr.push(rr)}),jt.length>0&&this.core.sendCmd("batchMarkRead",{sid:7,cid:2,ids:Oo(jt).call(jt,function(rr){return rr.idServer})}),tr.length>0&&this.core.sendCmd("batchMarkRead",{sid:8,cid:3,ids:Oo(tr).call(tr,function(rr){return rr.idServer})})}},Ue.onMsgHandler=function(Ce){var jt;if(Ce.error)this.logger.error("msgHandler::recvError",Ce.error);else{var tr=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0,rr=Ce.content.msg;rr.idServer=rr.idServer||tr;var fr=bo(),kr=Ac(rr,this.core.account),Pr=(jt=this.core.session)===null||jt===void 0?void 0:jt.getSessionWithUncomplete({id:kr}),Rr=Ei(rr,Pr?{account:this.core.account,sessionAck:Pr.ack,msgReceiptTime:Pr.msgReceiptTime}:{account:this.core.account});if(this.core.options.debugLevel==="debug"?this.logger.debug("msgHandler::recvMsg",Rr.idClient,Rr.idServer,Rr):this.logger.log("msgHandler::recvMsg",Rr.idClient,Rr.idServer),this.markMsgsAck([Rr]),this.core.eventBus.emit("session/updateForNewMsg",Rr),Rr.scene==="superTeam"?this.core.eventBus.emit("sync/updateTimetag",{superTeamRoamingMsgs:Rr.time}):this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:Rr.time}),this.core.emit("msg",Rr),Rr.type==="notification")this.core.eventBus.emit("team/onNotification",Rr);else if(Rr.flow!=="out"){var $r=Rr.scene==="p2p",Hr={msgId:Rr.idServer,clientId:Rr.idClient,receiveTime:Ce.__receiveTime,serverTime:Rr.time,callbackTime:bo(),preHandleTime:fr,fromAccid:Rr.from,toAccid:this.core.account,type:Za[Rr.scene],tid:$r?"":Rr.to,result:200,failReason:"",rt:bo()-Rr.time};this.core.reporter.report("msgReceive",Hr)}Rr.type!=="notification"&&this.core.user.checkUserUpdate(Rr)}},Ue.nimOnTeamMsgsHandler=function(Ce){var jt,tr=this;yo(jt=Ce.content.datas).call(jt,function(rr){tr.onMsgHandler(Gn({},Ce,{content:{msg:rr}}))})},Ue.syncRoamingMsgsHandler=function(Ce){var jt,tr,rr=Ce.content.msgs||[];if(rr.length!==0){var fr=Ac(rr[0],this.core.account),kr=(jt=this.core.session)===null||jt===void 0?void 0:jt.getSessionWithUncomplete({id:fr}),Pr=(rr=Am(rr,kr?{account:this.core.account,featureValue:wi.roam,sessionAck:kr.ack,msgReceiptTime:kr.msgReceiptTime}:{account:this.core.account,featureValue:wi.roam}))[0].time,Rr={timetag:Pr,sessionId:fr,msgs:xC(rr)};!((tr=this.core.sync)===null||tr===void 0)&&tr.getSyncDoneFlag()||this.core.eventBus.emit("session/syncMsgs",Rr),this.core.emit("syncRoamingMsgs",Rr),rr[0].scene==="superTeam"?this.core.eventBus.emit("sync/updateTimetag",{superTeamRoamingMsgs:Pr}):this.core.eventBus.emit("sync/updateTimetag",{roamingMsgs:Pr})}},Ue.syncOfflineMsgsHandler=function(Ce){var jt,tr=this,rr=Ce.content.msgs||[];if(rr.length!==0){var fr={},kr=[];yo(rr).call(rr,function(Rr){var $r=Ac(Rr,tr.core.account),Hr=tr.core.session.getSessionWithUncomplete({id:$r}),Gr=Ei(Rr,Hr?{account:tr.core.account,featureValue:wi.leave,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:tr.core.account,featureValue:wi.leave});kr.push(Gr),fr[Gr.sessionId]?fr[Gr.sessionId].push(Gr):fr[Gr.sessionId]=[Gr]}),this.markMsgsAck(kr);var Pr=0;yo(jt=fa(fr)).call(jt,function(Rr){var $r,Hr=iu($r=fr[Rr]).call($r,function(bn,Sn){return Sn.time-bn.time});(Hr=U0(Hr))[0].time>Pr&&(Pr=Hr[0].time);var Gr={timetag:Hr[0].time,sessionId:Rr,msgs:Hr};tr.core.eventBus.emit("session/syncMsgs",Gr),tr.core.emit("syncOfflineMsgs",Gr)}),this.core.eventBus.emit("sync/updateTimetag",{offlineMsgs:Pr})}},Ue.syncDeleteSelfMsgsHandler=function(Ce){var jt,tr=(jt=Ce.content)===null||jt===void 0?void 0:jt.deletedMsgs;tr&&tr.length>0||this.logger.warn("syncDeleteSelfMsgs:: no msgs");var rr=tr[tr.length-1].time;this.core.eventBus.emit("sync/updateTimetag",{deleteSelfMsgs:rr})},Ue.onDeleteSelfMsgHandler=function(Ce){var jt=xp([Ce.content.deletedMsg]);this.core.eventBus.emit("session/updateForDeletedMsg",jt),this.core.emit("deleteSelfMsgs",jt)},Ue.onDeleteSelfMsgsHandler=function(Ce){var jt=xp(Ce.content.deletedMsgs);this.core.eventBus.emit("session/updateForDeletedMsg",jt),this.core.emit("deleteSelfMsgs",jt)},Ue.onBroadcastMsgHandler=function(Ce){var jt=Ce.content.msg,tr=this.service.processBroadcastMsg([jt]);this.core.emit("broadcastMsgs",tr)},Ue.syncBroadcastMsgHandler=function(Ce){var jt=Ce.content.msgs,tr=this.service.processBroadcastMsg(jt);this.core.emit("broadcastMsgs",tr)},he}(Ls),Sl={"6_23":"getServerTime","6_31":"notifyDetect","6_32":"uploadDetect"},sd={notifyDetectTag:{type:1,params:2,result:3,t1:100,t2:101,t3:102,t4:103,t5:104,t6:105}},Pi={getServerTime:{sid:6,cid:23,service:"misc",response:[{type:"Long",name:"time"}]},notifyDetect:{sid:6,cid:31,service:"misc",response:[{type:"Property",name:"data",reflectMapper:ms(sd.notifyDetectTag)}]},uploadDetect:{sid:6,cid:32,service:"misc",hasPacketResponse:!1,params:[{type:"Property",name:"data",reflectMapper:sd.notifyDetectTag}]}},Ai={type:{type:"number"},t1:{type:"number"},t2:{type:"number"},t3:{type:"number"},t4:{type:"number"},t5:{type:"number"},t6:{type:"number"}},_v=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"misc",$e)||this).core=$e,Ss({cmdMap:Sl,cmdConfig:Pi}),Ce.setListener(),Ce}ra(he,_e);var Ue=he.prototype;return Ue.setListener=function(){},Ue.getServerTime=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.clientSocket.sendCmd("getServerTime");case 2:return jt=rr.sent,rr.abrupt("return",Lo(jt.content.time));case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.notifyDetectHandler=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return kr=Ce.content.data,(tr=ai(Ai,kr)).t3=Ce.__receiveTime,tr.t4=bo(),fr.prev=3,fr.next=6,this.core.clientSocket.sendCmd("uploadDetect",{data:tr});case 6:fr.next=11;break;case 8:fr.prev=8,fr.t0=fr.catch(3),this.core.logger.warn("misc::notifyDetectHandler:upload failed",fr.t0);case 11:case"end":return fr.stop()}var kr},jt,this,[[3,8]])}))},he}(Ls),xv=function(he,Ue,$e,Ce){if(!ni(he))return he;for(var jt=-1,tr=(Ue=Vf(Ue,he)).length,rr=tr-1,fr=he;fr!=null&&++jt<tr;){var kr=Zd(Ue[jt]),Pr=$e;if(kr==="__proto__"||kr==="constructor"||kr==="prototype")return he;if(jt!=rr){var Rr=fr[kr];(Pr=Ce?Ce(Rr,kr,fr):void 0)===void 0&&(Pr=ni(Rr)?Rr:am(Ue[jt+1])?[]:{})}Jh(fr,kr,Pr),fr=fr[kr]}return he},H0=function(he,Ue,$e){for(var Ce=-1,jt=Ue.length,tr={};++Ce<jt;){var rr=Ue[Ce],fr=vh(he,rr);$e(fr,rr)&&xv(tr,Vf(rr,he),fr)}return tr},lu=function(he,Ue){return he!=null&&Ue in Object(he)},PC=function(he,Ue,$e){for(var Ce=-1,jt=(Ue=Vf(Ue,he)).length,tr=!1;++Ce<jt;){var rr=Zd(Ue[Ce]);if(!(tr=he!=null&&$e(he,rr)))break;he=he[rr]}return tr||++Ce!=jt?tr:!!(jt=he==null?0:he.length)&&Vh(jt)&&am(rr,jt)&&(ti(he)||sp(he))},z0=function(he,Ue){return he!=null&&PC(he,Ue,lu)},AC=function(he,Ue){return H0(he,Ue,function($e,Ce){return z0(he,Ce)})},id=function(he,Ue){for(var $e=-1,Ce=Ue.length,jt=he.length;++$e<Ce;)he[jt+$e]=Ue[$e];return he},Ep=ri?ri.isConcatSpreadable:void 0,Qi=function(he){return ti(he)||sp(he)||!!(Ep&&he&&he[Ep])},Pp=function _e(he,Ue,$e,Ce,jt){var tr=-1,rr=he.length;for($e||($e=Qi),jt||(jt=[]);++tr<rr;){var fr=he[tr];Ue>0&&$e(fr)?Ue>1?_e(fr,Ue-1,$e,Ce,jt):id(jt,fr):Ce||(jt[jt.length]=fr)}return jt},Tl=function(he){return he!=null&&he.length?Pp(he,1):[]},va=function(he){return fm(Zh(he,void 0,Tl),he+"")}(function(_e,he){return _e==null?{}:AC(_e,he)});function Nc(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(uc(_e)||($e=function(tr,rr){var fr;if(tr){if(typeof tr=="string")return cd(tr,rr);var kr=xa(fr=Object.prototype.toString.call(tr)).call(fr,8,-1);if(kr==="Object"&&tr.constructor&&(kr=tr.constructor.name),kr==="Map"||kr==="Set")return Ki(tr);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return cd(tr,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cd(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var Iv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"user",$e)||this).userInfoMap=new xc,Ce.myInfo=Ii({}),Ss({cmdMap:kC,cmdConfig:wC}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.setBlack=function(Ce){return Xn({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},Ce),this.core.sendCmd("setBlack",Ce).then(function(){})},Ue.setMute=function(Ce){return Xn({account:{type:"string",allowEmpty:!1},isAdd:{type:"boolean"}},Ce),this.core.sendCmd("setMute",Ce).then(function(){})},Ue.getRelations=function(){return this.core.sendCmd("syncRelations",{timetag:0})},Ue.getBlackList=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return jt=rr.sent,rr.abrupt("return",jt.blackList||[]);case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.getMuteList=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("syncRelations",{timetag:0});case 2:return jt=rr.sent,rr.abrupt("return",jt.muteList||[]);case 4:case"end":return rr.stop()}},Ce,this)}))},Ue.updatePushToken=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){return Kr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return tr.stop()}},Ce,this)}))},Ue.updateAppBackground=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){return Kr.wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:this.logger.error("This function is deprecated, please use nim.offlinePush.setOfflinePushConfig instead");case 1:case"end":return tr.stop()}},Ce,this)}))},Ue.getUsersNameCardFromServer=function(Ce){var jt=this;return Xn({accounts:{type:"array",max:150,itemType:"string"}},Ce),this.core.sendCmd("getUsersNameCardFromServer",va(Ce,["accounts"])).then(function(tr){var rr,fr=tr.content;return jt.logger.log("user:: getUsers done",Ce.accounts),fr&&fr.users?Oo(rr=fr.users).call(rr,function(kr){return Ii(kr)}):[]})},Ue.updateMyNameCard=function(Ce){var jt=this;if(Xn({nick:{type:"string",required:!1},avatar:{type:"string",required:!1},signature:{type:"string",required:!1},gender:{type:"enum",values:pc(as),required:!1},email:{type:"string",required:!1},birth:{type:"string",required:!1},tel:{type:"string",required:!1},ext:{type:"string",required:!1}},Ce),fa(Ce).length===0)return Ca.resolve(this.myInfo);var tr=va(Ce,["nick","avatar","signature","email","birth","tel","ext"]);return Ce.gender&&(tr.gender=as[Ce.gender]),this.core.sendCmd("updateMyNameCard",{user:tr}).then(function(rr){var fr=rr.content;return fr&&fr.timetag&&jt.core.eventBus.emit("sync/updateTimetag",{myInfo:+fr.timetag}),Ce.gender&&(tr.gender=Ce.gender),jt.myInfo=Gn({},jt.myInfo,tr),jt.myInfo})},Ue.checkUserUpdate=function(Ce){var jt=Ce.from;if(this.logger.log("checkUserUpdate",jt),jt!==this.core.account){var tr=this.userInfoMap.get(jt);if(tr){var rr=tr.updateTime,fr=Ce.userUpdateTime;!isNaN(rr)&&!isNaN(fr)&&typeof rr=="number"&&typeof fr=="number"&&rr<fr&&this.refreshUserInfo(jt)}else this.refreshUserInfo(jt)}},Ue.refreshUserInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return this.logger.log("refreshUserInfo",Ce),Rr.next=3,this.getUsersNameCardFromServer({accounts:[Ce]});case 3:for(tr=Rr.sent,rr=Nc(tr);!(fr=rr()).done;)kr=fr.value,this.userInfoMap.set(kr.account,kr),this.core.emit("updateUserInfo",kr);case 5:case"end":return Rr.stop()}},jt,this)}))},Ue.onUpdateBlackListHandler=function(Ce){var jt=Ce.content;jt.account?this.core.emit("updateBlackList",jt):this.logger.warn("onUpdateBlackListHandler: no account")},Ue.onUpdateMuteListHandler=function(Ce){var jt=Ce.content;jt.account?this.core.emit("updateMuteList",jt):this.logger.warn("onUpdateBlackListHandler: no account")},Ue.syncRelationsHandler=function(Ce){var jt=Ce.content,tr=jt.list,rr=jt.timetag,fr={blackList:[],muteList:[]};return rr&&this.core.eventBus.emit("sync/updateTimetag",{relations:rr}),tr&&tr.length&&yo(tr).call(tr,function(kr){var Pr=function($r){var Hr={account:$r.account,updateTime:+$r.updateTime,createTime:+$r.createTime};return $r.isMuted==="1"&&(Hr.isMuted=!0),$r.isBlack==="1"&&(Hr.isBlack=!0),Hr}(kr);Pr.isBlack&&fr.blackList.push(Pr),Pr.isMuted&&fr.muteList.push(Pr)}),this.core.emit("relations",fr),Ca.resolve(fr)},Ue.syncMyNameCardHandler=function(Ce){Ce.content.user&&(this.myInfo=Ii(Ce.content.user),this.core.emit("syncMyNameCard",this.myInfo),this.core.eventBus.emit("sync/updateTimetag",{myInfo:Ce.content.timetag}))},Ue.onUpdateMyNameCardHandler=function(Ce){var jt=Ce.content.user;jt?(Gn(this.myInfo,Ii(jt)),this.core.emit("updateMyNameCard",this.myInfo)):this.logger.warn("onUpdateMyNameCardHandler no user info")},he}(Ls),NC=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length;++$e<Ce;)if(Ue(he[$e],$e,he))return!0;return!1},W0=function(he,Ue,$e,Ce,jt,tr){var rr=1&$e,fr=he.length,kr=Ue.length;if(fr!=kr&&!(rr&&kr>fr))return!1;var Pr=tr.get(he),Rr=tr.get(Ue);if(Pr&&Rr)return Pr==Ue&&Rr==he;var $r=-1,Hr=!0,Gr=2&$e?new Gi:void 0;for(tr.set(he,Ue),tr.set(Ue,he);++$r<fr;){var bn=he[$r],Sn=Ue[$r];if(Ce)var An=rr?Ce(Sn,bn,$r,Ue,he,tr):Ce(bn,Sn,$r,he,Ue,tr);if(An!==void 0){if(An)continue;Hr=!1;break}if(Gr){if(!NC(Ue,function(kn,Kn){if(!gm(Gr,Kn)&&(bn===kn||jt(bn,kn,$e,Ce,tr)))return Gr.push(Kn)})){Hr=!1;break}}else if(bn!==Sn&&!jt(bn,Sn,$e,Ce,tr)){Hr=!1;break}}return tr.delete(he),tr.delete(Ue),Hr},OC=function(he){var Ue=-1,$e=Array(he.size);return he.forEach(function(Ce,jt){$e[++Ue]=[jt,Ce]}),$e},G0=ri?ri.prototype:void 0,Ev=G0?G0.valueOf:void 0,RC=function(he,Ue,$e,Ce,jt,tr,rr){switch($e){case"[object DataView]":if(he.byteLength!=Ue.byteLength||he.byteOffset!=Ue.byteOffset)return!1;he=he.buffer,Ue=Ue.buffer;case"[object ArrayBuffer]":return!(he.byteLength!=Ue.byteLength||!tr(new lp(he),new lp(Ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Yd(+he,+Ue);case"[object Error]":return he.name==Ue.name&&he.message==Ue.message;case"[object RegExp]":case"[object String]":return he==Ue+"";case"[object Map]":var fr=OC;case"[object Set]":var kr=1&Ce;if(fr||(fr=ul),he.size!=Ue.size&&!kr)return!1;var Pr=rr.get(he);if(Pr)return Pr==Ue;Ce|=2,rr.set(he,Ue);var Rr=W0(fr(he),fr(Ue),Ce,jt,tr,rr);return rr.delete(he),Rr;case"[object Symbol]":if(Ev)return Ev.call(he)==Ev.call(Ue)}return!1},K0=function(he,Ue,$e){var Ce=Ue(he);return ti(he)?Ce:id(Ce,$e(he))},BC=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length,jt=0,tr=[];++$e<Ce;){var rr=he[$e];Ue(rr,$e,he)&&(tr[jt++]=rr)}return tr},Nm=function(){return[]},LC=Object.prototype.propertyIsEnumerable,Q0=Object.getOwnPropertySymbols,FC=Q0?function(_e){return _e==null?[]:(_e=Object(_e),BC(Q0(_e),function(he){return LC.call(_e,he)}))}:Nm,Ap=FC,Pv=function(he){return K0(he,Gu,Ap)},$C=Object.prototype.hasOwnProperty,jC=function(he,Ue,$e,Ce,jt,tr){var rr=1&$e,fr=Pv(he),kr=fr.length;if(kr!=Pv(Ue).length&&!rr)return!1;for(var Pr=kr;Pr--;){var Rr=fr[Pr];if(!(rr?Rr in Ue:$C.call(Ue,Rr)))return!1}var $r=tr.get(he),Hr=tr.get(Ue);if($r&&Hr)return $r==Ue&&Hr==he;var Gr=!0;tr.set(he,Ue),tr.set(Ue,he);for(var bn=rr;++Pr<kr;){var Sn=he[Rr=fr[Pr]],An=Ue[Rr];if(Ce)var kn=rr?Ce(An,Sn,Rr,Ue,he,tr):Ce(Sn,An,Rr,he,Ue,tr);if(!(kn===void 0?Sn===An||jt(Sn,An,$e,Ce,tr):kn)){Gr=!1;break}bn||(bn=Rr=="constructor")}if(Gr&&!bn){var Kn=he.constructor,Qn=Ue.constructor;Kn==Qn||!("constructor"in he)||!("constructor"in Ue)||typeof Kn=="function"&&Kn instanceof Kn&&typeof Qn=="function"&&Qn instanceof Qn||(Gr=!1)}return tr.delete(he),tr.delete(Ue),Gr},Av=Gl(ic,"DataView"),Nv=Gl(ic,"Promise"),Ov=Gl(ic,"WeakMap"),Oc="[object Map]",uu="[object Promise]",Rv="[object Set]",J0="[object WeakMap]",Y0="[object DataView]",DC=Wl(Av),X0=Wl(Ou),UC=Wl(Nv),VC=Wl(ll),Js=Wl(Ov),ya=ma;(Av&&ya(new Av(new ArrayBuffer(1)))!=Y0||Ou&&ya(new Ou)!=Oc||Nv&&ya(Nv.resolve())!=uu||ll&&ya(new ll)!=Rv||Ov&&ya(new Ov)!=J0)&&(ya=function(_e){var he=ma(_e),Ue=he=="[object Object]"?_e.constructor:void 0,$e=Ue?Wl(Ue):"";if($e)switch($e){case DC:return Y0;case X0:return Oc;case UC:return uu;case VC:return Rv;case Js:return J0}return he});var Np=ya,Z0="[object Arguments]",e1="[object Array]",Om="[object Object]",t1=Object.prototype.hasOwnProperty,Rc=function(he,Ue,$e,Ce,jt,tr){var rr=ti(he),fr=ti(Ue),kr=rr?e1:Np(he),Pr=fr?e1:Np(Ue),Rr=(kr=kr==Z0?Om:kr)==Om,$r=(Pr=Pr==Z0?Om:Pr)==Om,Hr=kr==Pr;if(Hr&&ip(he)){if(!ip(Ue))return!1;rr=!0,Rr=!1}if(Hr&&!Rr)return tr||(tr=new Qu),rr||sm(he)?W0(he,Ue,$e,Ce,jt,tr):RC(he,Ue,kr,$e,Ce,jt,tr);if(!(1&$e)){var Gr=Rr&&t1.call(he,"__wrapped__"),bn=$r&&t1.call(Ue,"__wrapped__");if(Gr||bn){var Sn=Gr?he.value():he,An=bn?Ue.value():Ue;return tr||(tr=new Qu),jt(Sn,An,$e,Ce,tr)}}return!!Hr&&(tr||(tr=new Qu),jC(he,Ue,$e,Ce,jt,tr))},Ys=function _e(he,Ue,$e,Ce,jt){return he===Ue||(he==null||Ue==null||!Hi(he)&&!Hi(Ue)?he!=he&&Ue!=Ue:Rc(he,Ue,$e,Ce,_e,jt))},Rm=function(he,Ue,$e,Ce){var jt=$e.length,tr=jt,rr=!Ce;if(he==null)return!tr;for(he=Object(he);jt--;){var fr=$e[jt];if(rr&&fr[2]?fr[1]!==he[fr[0]]:!(fr[0]in he))return!1}for(;++jt<tr;){var kr=(fr=$e[jt])[0],Pr=he[kr],Rr=fr[1];if(rr&&fr[2]){if(Pr===void 0&&!(kr in he))return!1}else{var $r=new Qu;if(Ce)var Hr=Ce(Pr,Rr,kr,he,Ue,$r);if(!(Hr===void 0?Ys(Rr,Pr,3,Ce,$r):Hr))return!1}}return!0},r1=function(he){return he==he&&!ni(he)},Fs=function(he){for(var Ue=Gu(he),$e=Ue.length;$e--;){var Ce=Ue[$e],jt=he[Ce];Ue[$e]=[Ce,jt,r1(jt)]}return Ue},Na=function(he,Ue){return function($e){return $e!=null&&$e[he]===Ue&&(Ue!==void 0||he in Object($e))}},qC=function(he){var Ue=Fs(he);return Ue.length==1&&Ue[0][2]?Na(Ue[0][0],Ue[0][1]):function($e){return $e===he||Rm($e,he,Ue)}},n1=function(he,Ue){return Lf(he)&&r1(Ue)?Na(Zd(he),Ue):function($e){var Ce=Bs($e,he);return Ce===void 0&&Ce===Ue?z0($e,he):Ys(Ue,Ce,3)}},Bv=function(he){return function(Ue){return Ue==null?void 0:Ue[he]}},Lv=function(he){return function(Ue){return vh(Ue,he)}},HC=function(he){return Lf(he)?Bv(Zd(he)):Lv(he)},Fv=function(he){return typeof he=="function"?he:he==null?eu:typeof he=="object"?ti(he)?n1(he[0],he[1]):qC(he):HC(he)},Op=/\s/,o1=function(he){for(var Ue=he.length;Ue--&&Op.test(he.charAt(Ue)););return Ue},$v=/^\s+/,a1=function(he){return he&&he.slice(0,o1(he)+1).replace($v,"")},Xs=/^[-+]0x[0-9a-f]+$/i,zC=/^0b[01]+$/i,s1=/^0o[0-7]+$/i,WC=parseInt,GC=function(he){if(typeof he=="number")return he;if(Rf(he))return NaN;if(ni(he)){var Ue=typeof he.valueOf=="function"?he.valueOf():he;he=ni(Ue)?Ue+"":Ue}if(typeof he!="string")return he===0?he:+he;he=a1(he);var $e=zC.test(he);return $e||s1.test(he)?WC(he.slice(2),$e?2:8):Xs.test(he)?NaN:+he},KC=1/0,QC=function(he){return he?(he=GC(he))===KC||he===-1/0?17976931348623157e292*(he<0?-1:1):he==he?he:0:he===0?he:0},i1=function(he){var Ue=QC(he),$e=Ue%1;return Ue==Ue?$e?Ue-$e:Ue:0},c1=Math.max,si=function(he,Ue,$e){var Ce=he==null?0:he.length;if(!Ce)return-1;var jt=$e==null?0:i1($e);return jt<0&&(jt=c1(Ce+jt,0)),m0(he,Fv(Ue),jt)},JC={"4_12":"syncMsgReceipts","4_14":"syncSessionAck","4_20":"syncSuperTeamSessionAck","4_22":"nimSyncSessionsWithMoreRoaming","4_25":"syncSessionReliableInfo","7_12":"multiSyncMsgReceipt","7_16":"markSessionAck","7_25":"markMultSessionsAck","7_116":"syncMarkSessionAck","21_25":"markSuperTeamSessionAck","21_32":"markMultSuperTeamSessionsAck","21_125":"syncMarkSuperTeamSessionAck","4_23":"nimSyncStickTopSessions","23_12":"nimAddStickTopSession","23_13":"nimDeleteStickTopSession","23_14":"nimUpdateStickTopSession","23_112":"nimMultiSyncAddStickTopSession","23_113":"nimMultiSyncDeleteStickTopSession","23_114":"nimMultiSyncUpdateStickTopSession"},ld={msgReceiptTag:{to:1,from:2,time:7,idClient:11},stickTopSessionTag:{id:1,ext:2,createTime:3,updateTime:4},sessionAckTag:{scene:1,to:2,timetag:3},sessionReliableSyncTag:{scene:1,sessionId:2,syncStatus:3,syncEndMsgId:4,syncEndMsgidClient:5,syncEndMsgTime:6,syncStartMsgid:7,syncStartMsgidClient:8,syncStartMsgTime:9,nextMsgid:10,nextMsgidClient:11,nextMsgTime:12,roamMsgSync:13,offlineMsgSync:14,netCallOfflineMsgSync:15}},gc=Ws(ld),YC={syncMsgReceipts:{sid:4,cid:12,service:"session",response:[{type:"PropertyArray",name:"msgReceipts",reflectMapper:gc.msgReceiptTag},{type:"Number",name:"timetag"}]},syncSessionAck:{sid:4,cid:14,service:"session",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},syncSuperTeamSessionAck:{sid:4,cid:20,service:"session",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},multiSyncMsgReceipt:{sid:7,cid:12,service:"session",response:[{type:"Property",name:"msgReceiptTag",reflectMapper:gc.msgReceiptTag}]},markSessionAck:{sid:7,cid:16,service:"session",params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSessionAck:{sid:7,cid:116,service:"session",response:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},syncMarkSuperTeamSessionAck:{sid:21,cid:125,service:"session",response:[{type:"String",name:"to"},{type:"long",name:"timetag"}]},markMultSessionsAck:{sid:7,cid:25,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:ld.sessionAckTag}]},markSuperTeamSessionAck:{sid:21,cid:25,service:"session",params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},nimAddStickTopSession:{sid:23,cid:12,service:"session",params:[{type:"Property",name:"tag",reflectMapper:ld.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:gc.stickTopSessionTag}]},nimDeleteStickTopSession:{sid:23,cid:13,service:"session",params:[{type:"Property",name:"tag",reflectMapper:ld.stickTopSessionTag}],response:[{type:"Number",name:"timetag"}]},nimUpdateStickTopSession:{sid:23,cid:14,service:"session",params:[{type:"Property",name:"tag",reflectMapper:ld.stickTopSessionTag}],response:[{type:"Property",name:"data",reflectMapper:gc.stickTopSessionTag}]},nimMultiSyncAddStickTopSession:{sid:23,cid:112,service:"session",response:[{type:"Property",name:"data",reflectMapper:gc.stickTopSessionTag}]},nimMultiSyncDeleteStickTopSession:{sid:23,cid:113,service:"session",response:[{type:"Number",name:"timetag"},{type:"Property",name:"data",reflectMapper:gc.stickTopSessionTag}]},nimMultiSyncUpdateStickTopSession:{sid:23,cid:114,service:"session",response:[{type:"Property",name:"data",reflectMapper:gc.stickTopSessionTag}]},nimSyncStickTopSessions:{sid:4,cid:23,service:"session",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"isThereAnyChange"},{type:"PropertyArray",name:"datas",reflectMapper:gc.stickTopSessionTag}]},markMultSuperTeamSessionsAck:{sid:21,cid:32,service:"session",ignoreErrCodes:[700],params:[{type:"PropertyArray",name:"datas",reflectMapper:ld.sessionAckTag}]},nimSyncSessionsWithMoreRoaming:{sid:21,cid:22,service:"session",response:[{type:"PropertyArray",name:"datas",reflectMapper:{0:"scene",1:"to",2:"from",7:"time",12:"idServer"}}]},syncSessionReliableInfo:{sid:4,cid:25,service:"session",response:[{type:"Property",name:"context",reflectMapper:{1:"timetag",2:"type"}},{type:"PropertyArray",name:"datas",reflectMapper:gc.sessionReliableSyncTag}]}},XC={id:{type:"string"},ext:{type:"string"},createTime:{type:"number"},updateTime:{type:"number"}};function Bm(_e,he,Ue){Ue===void 0&&(Ue=!0);var $e=ai(XC,_e);$e.isStickOnTop=Ue,$e.id=he.id;var Ce=Gn(Gn({},he),{stickTopInfo:he.stickTopInfo?Gn({},he.stickTopInfo,$e):$e});return Ce.lastMsg===void 0&&(Ce.lastMsg=null),Ce}var ZC={scene:{type:"enum",values:Za},time:{type:"number"}},eM=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.getSession=function($e){return this.core.session.getSessionWithUncomplete({id:$e})||this.core.session.createSession($e)},he.addStickTopSession=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},$e),jt=_i($e.id),tr=jt.scene,rr=jt.accid,$r.next=4,this.core.sendCmd("nimAddStickTopSession",{tag:{id:(tr==="superTeam"?"super_team":tr)+"|"+rr,ext:$e.ext}});case 4:return fr=$r.sent,kr=this.getSession($e.id),Pr=Bm(fr.content.data,kr),$r.abrupt("return",Pr);case 8:case"end":return $r.stop()}},Ce,this)}))},he.deleteStickTopSession=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({id:{type:"string",allowEmpty:!1}},$e),jt=_i($e.id),tr=jt.scene,rr=jt.accid,$r.next=4,this.core.sendCmd("nimDeleteStickTopSession",{tag:{id:(tr==="superTeam"?"super_team":tr)+"|"+rr}});case 4:return fr=$r.sent,kr=this.getSession($e.id),Pr=Bm({updateTime:fr.content.timetag},kr,!1),$r.abrupt("return",Pr);case 8:case"end":return $r.stop()}},Ce,this)}))},he.updateStickTopSession=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({id:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1}},$e),jt=_i($e.id),tr=jt.scene,rr=jt.accid,$r.next=4,this.core.sendCmd("nimUpdateStickTopSession",{tag:{id:(tr==="superTeam"?"super_team":tr)+"|"+rr,ext:$e.ext}});case 4:return fr=$r.sent,kr=this.getSession($e.id),Pr=Bm(fr.content.data,kr),$r.abrupt("return",Pr);case 8:case"end":return $r.stop()}},Ce,this)}))},he.stickTopSessionHandler=function($e,Ce){Ce===void 0&&(Ce=!0);var jt=_i($e.id,"|"),tr=jt.scene+"-"+jt.accid;return Bm($e,this.getSession(tr),Ce)},_e}(),tM=function(){function _e(Ue){this.core=Ue,this.logger=Ue.logger}var he=_e.prototype;return he.canSessionResetUnreadCount=function($e){var Ce=$e.id;if($e.lastMsg===void 0)throw new Error("Session::canSessionResetUnreadCount: session "+Ce+" is not completly, lastMsg undefined");return $e.lastMsg!==null||$e.unread>0?!($e.ack&&$e.lastMsg&&$e.ack>=$e.lastMsg.time)||(this.logger.log("Session::canSessionResetUnreadCount: session "+Ce+" reset failed, ack time is greater than last message time"),!1):(this.logger.log("Session::canSessionResetUnreadCount: session "+Ce+" doesn't need to be updated, lastMsg null and unread 0"),!1)},he.filterSessionForResetUnreadCount=function($e){var Ce=this,jt={cmd:"markMultSuperTeamSessionsAck",params:[]},tr={cmd:"markMultSessionsAck",params:[]};return yo($e).call($e,function(rr){var fr;try{if(!Ce.canSessionResetUnreadCount(rr))return;var kr=_i(rr.id),Pr=kr.accid,Rr=kr.scene,$r={to:Pr,sessionId:rr.id,timetag:((fr=rr==null?void 0:rr.lastMsg)===null||fr===void 0?void 0:fr.time)||rr.updateTime||0},Hr=function(bn){return om({scene:{type:"enum",values:Za}},bn)}({scene:Rr});Rr==="superTeam"?jt.params.push($r):tr.params.push(Gn(Gn({},$r),Hr))}catch(Gr){Ce.logger.warn(Gr)}}),{superTeam:jt,p2pOrTeam:tr}},_e}(),rM=function(he,Ue,$e){var Ce=-1,jt=he.length;Ue<0&&(Ue=-Ue>jt?0:jt+Ue),($e=$e>jt?jt:$e)<0&&($e+=jt),jt=Ue>$e?0:$e-Ue>>>0,Ue>>>=0;for(var tr=Array(jt);++Ce<jt;)tr[Ce]=he[Ce+Ue];return tr},nM=Math.ceil,Rp=Math.max,Lm=function(he,Ue,$e){Ue=($e?i0(he,Ue,$e):Ue===void 0)?1:Rp(i1(Ue),0);var Ce=he==null?0:he.length;if(!Ce||Ue<1)return[];for(var jt=0,tr=0,rr=Array(nM(Ce/Ue));jt<Ce;)rr[tr++]=rM(he,jt,jt+=Ue);return rr};function Bp(_e,he){var Ue,$e=xs!==void 0&&Is(_e)||_e["@@iterator"];if($e)return oa(Ue=($e=$e.call(_e)).next).call(Ue,$e);if(uc(_e)||($e=function(tr,rr){var fr;if(tr){if(typeof tr=="string")return l1(tr,rr);var kr=xa(fr=Object.prototype.toString.call(tr)).call(fr,8,-1);if(kr==="Object"&&tr.constructor&&(kr=tr.constructor.name),kr==="Map"||kr==="Set")return Ki(tr);if(kr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kr))return l1(tr,rr)}}(_e))||he&&_e&&typeof _e.length=="number"){$e&&(_e=$e);var Ce=0;return function(){return Ce>=_e.length?{done:!0}:{done:!1,value:_e[Ce++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1(_e,he){(he==null||he>_e.length)&&(he=_e.length);for(var Ue=0,$e=new Array(he);Ue<he;Ue++)$e[Ue]=_e[Ue];return $e}var oM=function(_e){function he($e,Ce){var jt;return(jt=_e.call(this,"session",$e)||this).list=new xc,jt.unreadCountFilterFn=function(tr){return!0},jt.lastMessageFilterFn=function(tr){return!0},jt.initEventListeners(),Ss({cmdMap:JC,cmdConfig:YC}),jt.stickTopService=new eM($e),jt.unreadModule=new tM($e),Ce&&jt.setOptions(Ce),jt}ra(he,_e);var Ue=he.prototype;return Ue.setOptions=function(Ce){typeof(Ce==null?void 0:Ce.unreadCountFilterFn)=="function"&&(this.unreadCountFilterFn=Ce.unreadCountFilterFn),typeof(Ce==null?void 0:Ce.lastMessageFilterFn)=="function"&&(this.lastMessageFilterFn=Ce.lastMessageFilterFn)},Ue.destroy=function(){var Ce;yo(Ce=this.list).call(Ce,function(jt){jt.unreadMsgs=[]}),this.list.clear()},Ue.initEventListeners=function(){var Ce,jt,tr,rr=this;this.core.eventBus.on("session/syncMsgs",oa(Ce=this.onSyncMsgs).call(Ce,this)),this.core.eventBus.on("session/updateForNewMsg",oa(jt=this.updateSessionWithMsg).call(jt,this)),this.core.eventBus.on("session/updateForClearMsg",function(fr,kr){kr===void 0&&(kr=!0),fr&&fr.length>0&&yo(fr).call(fr,function(Pr){rr.updateSession({id:Pr.sessionId,lastMsg:null,unread:0,unreadMsgs:[]},kr)})}),this.core.eventBus.on("session/updateForDeletedMsg",oa(tr=this.updateSessionForDeletedMsg).call(tr,this))},Ue.createSession=function(Ce,jt){try{var tr=_i(Ce);return{id:Ce,scene:tr.scene,to:tr.accid,lastMsg:jt,updateTime:jt?jt.time:0,unread:0,unreadMsgs:[],ack:0}}catch(rr){throw this.logger.error("Failed to create session with "+Ce,rr),new Error("Failed to create session with "+Ce)}},Ue.getSession=function(Ce){Xn({id:{type:"string",allowEmpty:!1}},Ce);var jt=this.list.get(Ce.id);if(this.isSessionComplete(jt))return jt},Ue.getSessionWithUncomplete=function(Ce){return this.list.get(Ce.id)},Ue.getAllSessions=function(){for(var Ce,jt=[],tr=Bp(this.list);!(Ce=tr()).done;){var rr=Ce.value;rr[0];var fr=rr[1];this.isSessionComplete(fr)&&jt.push(fr)}return jt},Ue.getSessions=function(Ce){Xn({limit:{type:"number",required:!1},lastSessionId:{type:"string",allowEmpty:!1,required:!1},desc:{type:"boolean",required:!1}},Ce);var jt=[],tr=Ce.limit,rr=tr===void 0?100:tr,fr=Ce.desc,kr=fr===void 0||fr,Pr=Ce.lastSessionId,Rr=0;if(kr){for(var $r,Hr,Gr=Bp(this.list);!(Hr=Gr()).done;){var bn=Hr.value,Sn=bn[0],An=bn[1];if(Pr===Sn)break;this.isSessionComplete(An)&&jt.push(An)}return Nf($r=xa(jt).call(jt,-rr)).call($r)}for(var kn,Kn=Bp(this.list);!(kn=Kn()).done;){var Qn=kn.value,To=Qn[0],Eo=Qn[1];if(Pr)To===Pr&&(Pr=void 0);else if(this.isSessionComplete(Eo)){if(++Rr>rr)break;jt.push(Eo)}}return jt},Ue.resetSessionUnreadCount=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr,Rr,$r,Hr,Gr,bn=this;return Kr.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:if(Xn({id:{type:"string",allowEmpty:!1}},Ce),Xn({id:{type:"string",allowEmpty:!1}},Ce),rr=Ce.id,fr=this.list.get(rr)){An.next=7;break}throw this.logger.warn("resetSessionUnreadCount: can not find session "+rr),new Error("Session::canSessionResetUnreadCount: can not find session "+rr);case 7:kr=!1;try{kr=this.unreadModule.canSessionResetUnreadCount(fr)}catch(kn){this.logger.warn(kn)}if(kr!==!1){An.next=11;break}return An.abrupt("return");case 11:return Pr=_i(rr),Rr=Pr.accid,$r=Pr.scene,Hr={to:Rr,timetag:((jt=fr==null?void 0:fr.lastMsg)===null||jt===void 0?void 0:jt.time)||fr.updateTime||0},Gr="markSuperTeamSessionAck",$r!=="superTeam"&&(Hr.scene=$r==="p2p"?0:1,Gr="markSessionAck"),An.abrupt("return",this.core.sendCmd(Gr,Hr).then(function(){var kn=bn.storeUnreadByAck(rr,Hr.timetag);kn&&bn.core.emit("updateSession",kn)}));case 16:case"end":return An.stop()}},tr,this)}))},Ue.resetMultiSessionUnreadCount=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr,Rr,$r,Hr,Gr,bn,Sn,An,kn,Kn,Qn=this;return Kr.wrap(function(Eo){for(;;)switch(Eo.prev=Eo.next){case 0:Xn({ids:{type:"array",itemType:"string",min:1}},Ce),fr=bs(tr=Oo(rr=Ce.ids).call(rr,function(Ko){return Qn.list.get(Ko)})).call(tr,function(Ko,Ln){return!!Ko||(Qn.logger.warn("Session::canSessionResetUnreadCount: can not find session "+Ce.ids[Ln]),!1)}),kr=this.unreadModule.filterSessionForResetUnreadCount(fr),Pr=kr.superTeam,Rr=kr.p2pOrTeam,$r=Lm(Pr.params,50),Hr=Lm(Rr.params,50),Gr=Bp($r);case 6:if((bn=Gr()).done){Eo.next=13;break}return Sn=bn.value,Eo.next=10,this.core.sendCmd(Pr.cmd,{datas:Sn});case 10:yo(Sn).call(Sn,function(Ko){var Ln=Qn.storeUnreadByAck(Ko.sessionId,Ko.timetag);Ln&&Qn.core.emit("updateSession",Ln)});case 11:Eo.next=6;break;case 13:An=Bp(Hr);case 14:if((kn=An()).done){Eo.next=21;break}return Kn=kn.value,Eo.next=18,this.core.sendCmd(Rr.cmd,{datas:Kn});case 18:yo(Kn).call(Kn,function(Ko){var Ln=Qn.storeUnreadByAck(Ko.sessionId,Ko.timetag);Ln&&Qn.core.emit("updateSession",Ln)});case 19:Eo.next=14;break;case 21:case"end":return Eo.stop()}},jt,this)}))},Ue.resetAllSessionsUnreadCount=function(){var Ce,jt=[];return yo(Ce=this.list).call(Ce,function(tr){jt.push(tr.id)}),this.resetMultiSessionUnreadCount({ids:jt})},Ue.deleteSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(Xn({id:{type:"string",allowEmpty:!1},isSyncToServer:{type:"boolean",required:!1}},Ce),this.list.delete(Ce.id),!this.core.msgLog||!Ce.isSyncToServer){rr.next=5;break}return rr.next=5,this.core.msgLog.deleteRoamingMsgs({ids:[Ce.id]});case 5:case"end":return rr.stop()}},jt,this)}))},Ue.deleteAllSessionsFromLocal=function(){this.list.clear()},Ue.addStickTopSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.stickTopService.addStickTopSession(Ce);case 2:return tr=fr.sent,this.list.set(tr.id,tr),fr.abrupt("return",tr);case 5:case"end":return fr.stop()}},jt,this)}))},Ue.deleteStickTopSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.stickTopService.deleteStickTopSession(Ce);case 2:return tr=fr.sent,this.list.set(tr.id,tr),fr.abrupt("return",tr);case 5:case"end":return fr.stop()}},jt,this)}))},Ue.updateStickTopSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.stickTopService.updateStickTopSession(Ce);case 2:return tr=fr.sent,this.list.set(tr.id,tr),fr.abrupt("return",tr);case 5:case"end":return fr.stop()}},jt,this)}))},Ue.nimMultiSyncAddStickTopSessionHandler=function(Ce){var jt=this.stickTopService.stickTopSessionHandler(Ce.content.data);this.list.set(jt.id,jt),this.core.emit("updateSession",jt)},Ue.nimMultiSyncDeleteStickTopSessionHandler=function(Ce){var jt=this.stickTopService.stickTopSessionHandler({id:Ce.content.data.id,updateTime:Ce.content.timetag},!1);this.list.set(jt.id,jt),this.core.emit("updateSession",jt)},Ue.nimMultiSyncUpdateStickTopSessionHandler=function(Ce){var jt=this.stickTopService.stickTopSessionHandler(Ce.content.data);this.list.set(jt.id,jt),this.core.emit("updateSession",jt)},Ue.nimSyncStickTopSessionsHandler=function(Ce){var jt=this,tr=Ce.content.datas;yo(tr).call(tr,function(rr){var fr=jt.stickTopService.stickTopSessionHandler(rr);jt.list.set(fr.id,fr)})},Ue.updateSessionWithMsg=function(Ce){var jt,tr,rr=!0,fr=!0,kr=typeof((jt=Ce.pushInfo)===null||jt===void 0?void 0:jt.needPushBadge)!="boolean"||((tr=Ce.pushInfo)===null||tr===void 0?void 0:tr.needPushBadge);try{rr=!!this.unreadCountFilterFn(Ce)}catch(Hr){this.logger.error("session:updateSessionWithMsg, unreadCountFilterFn error",Hr)}try{fr=!!this.lastMessageFilterFn(Ce)}catch(Hr){this.logger.error("session:updateSessionWithMsg, lastMessageFilterFn error",Hr)}var Pr=this.list.get(Ce.sessionId)||this.createSession(Ce.sessionId),Rr=!1;if(this.logger.log("session:updateSessionWithMsg, pending ",Ce.sessionId,Ce.idClient,Ce.idServer,fr,rr),fr&&(!Pr.lastMsg||Pr.lastMsg.time<Ce.time||Ce.status===Va[Va.sending]||Pr.lastMsg.status===Va[Va.sending])&&(Pr.lastMsg=Ce,Pr.updateTime=Ce.time,Rr=!0),rr&&kr&&Ce.status===Va[Va.unread]&&Ce.time>(Pr.ack||0)){Pr.unread++;var $r=Pr.unreadMsgs||[];$r.unshift(Ce),iu($r).call($r,function(Hr,Gr){return Gr.time-Hr.time}),Rr=!0}Rr&&(this.logger.log("session:updateSessionWithMsg updating ",Pr.id,Pr.unread,Pr.lastMsg&&Pr.lastMsg.idClient),this.list.set(Pr.id,Pr),this.core.emit("updateSession",Pr))},Ue.storeUnreadByAck=function(Ce,jt){var tr=this.list.get(Ce)||this.createSession(Ce);if(!(tr.ack&&jt<tr.ack)){var rr=tr.unreadMsgs||[],fr=[],kr=[],Pr=0;return tr.unreadMsgs=[],rr.length>0&&(yo(rr).call(rr,function(Rr){mi(kr).call(kr,Rr.idClient)||Rr.time>jt&&(Pr++,kr.push(Rr.idClient),fr.push(Rr))}),tr.unreadMsgs=iu(fr).call(fr,function(Rr,$r){return $r.time-Rr.time})),tr.ack=jt,tr.unread=Pr,tr.lastMsg&&tr.lastMsg.status==="unread"&&jt>=tr.lastMsg.time&&(tr.lastMsg.status="read"),this.list.set(Ce,tr),tr}this.logger.warn("storeUnreadByAck: not need update ack",Ce,jt,tr.ack)},Ue.updateSession=function(Ce,jt){jt===void 0&&(jt=!0);var tr=Ce.id,rr=this.list.get(tr)||this.createSession(Ce.id),fr=Gn(rr,Ce);return this.list.set(tr,fr),this.logger.log("updateSession: update",jt,va(Ce,["id","ack","unread"]),fr.lastMsg&&fr.lastMsg.idClient),jt&&this.core.emit("updateSession",fr),fr},Ue.isSessionComplete=function(Ce){return!!Ce&&!!(Ce.id&&Ce.scene&&Ce.to)&&Ce.lastMsg!==void 0},Ue.syncSessionAckHandler=function(Ce){var jt,tr,rr=this,fr=Ce.content.p2p||{},kr=Ce.content.team.m_map||{};this.logger.log("syncSessionAck::",fr,kr),yo(jt=fa(fr)).call(jt,function(Pr){rr.updateSession({id:"p2p-"+Pr,ack:fr[Pr]},!1)}),yo(tr=fa(kr)).call(tr,function(Pr){rr.updateSession({id:"team-"+Pr,ack:kr[Pr]},!1)})},Ue.syncSuperTeamSessionAckHandler=function(Ce){var jt,tr=this,rr=Ce.content.superTeam.m_map;this.logger.log("syncSuperTeamSessionAck::",rr),yo(jt=fa(rr)).call(jt,function(fr){tr.updateSession({id:"superTeam-"+fr,ack:rr[fr]},!1)})},Ue.syncMarkSessionAckHandler=function(Ce){var jt=Ce.content,tr=(jt.scene===0?"p2p":jt.scene===1?"team":"superTeam")+"-"+jt.to,rr=this.list.get(tr);if(rr&&rr.ack&&jt.timetag<rr.ack)this.logger.warn("syncMarkSessionAckHandler: "+tr+" do not need update ack",rr.ack,jt.timetag);else{var fr=this.storeUnreadByAck(tr,jt.timetag);fr&&this.core.emit("updateSession",fr)}},Ue.syncMarkSuperTeamSessionAckHandler=function(Ce){Ce.content.scene=5,this.syncMarkSessionAckHandler(Ce)},Ue.onSyncDone=function(){var Ce,jt,tr,rr=this,fr=[];yo(Ce=this.list).call(Ce,function(kr,Pr){fr.push(rr.storeUnreadByAck(Pr,kr.ack||0))}),this.list.clear(),yo(jt=iu(fr).call(fr,function(kr,Pr){return kr.updateTime-Pr.updateTime})).call(jt,function(kr){rr.list.set(kr.id,kr)}),(fr=iu(tr=bs(fr).call(fr,function(kr){return rr.isSessionComplete(kr)})).call(tr,function(kr,Pr){return Pr.updateTime-kr.updateTime})).length>0&&this.core.emit("sessions",fr)},Ue.onSyncMsgs=function(Ce){var jt,tr=this,rr=this.list.get(Ce.sessionId),fr=[];try{var kr;fr=bs(kr=Ce.msgs).call(kr,function(Gr){var bn,Sn,An=typeof((bn=Gr.pushInfo)===null||bn===void 0?void 0:bn.needPushBadge)!="boolean"||((Sn=Gr.pushInfo)===null||Sn===void 0?void 0:Sn.needPushBadge);return tr.unreadCountFilterFn(JSON.parse(ha(Gr)))&&An})}catch(Gr){this.logger.error("session:onSyncMsgs, unreadCountFilterFn error ",Gr)}var Pr,Rr=[];try{var $r;Rr=bs($r=Ce.msgs).call($r,function(Gr){return tr.lastMessageFilterFn(JSON.parse(ha(Gr)))})}catch(Gr){this.logger.error("session:onSyncMsgs, lastMessageFilterFn error ",Gr)}Rr&&Rr.length>0&&(Pr=Rr[Rr.length-1],Pr=Rr[0].time>Pr.time?Rr[0]:Pr);var Hr=Pr?Pr.time:0;rr||(rr=Pr?this.createSession(Ce.sessionId,Pr):this.createSession(Ce.sessionId)),rr.unreadMsgs=rr.unreadMsgs?bs(jt=Os(fr).call(fr,rr.unreadMsgs)).call(jt,function(Gr){return Gr.status===Va[Va.unread]}):bs(fr).call(fr,function(Gr){return Gr.status===Va[Va.unread]}),rr.updateTime&&rr.updateTime>=Hr||(rr.updateTime=Hr),rr.lastMsg&&rr.lastMsg.time>=Hr||(rr.lastMsg=Pr),this.list.set(rr.id,rr)},Ue.updateSessionForDeletedMsg=function(Ce){var jt,tr=this,rr={};yo(Ce).call(Ce,function(fr){var kr,Pr=fr.to===tr.core.account?fr.from:fr.to,Rr=fr.scene+"-"+Pr,$r=tr.list.get(Rr);if($r){var Hr=mm(kr=$r.unreadMsgs).call(kr,function(kn){return kn.idClient===fr.idClient}),Gr=!0;try{Gr=!!tr.unreadCountFilterFn(fr)}catch(kn){tr.logger.error("session:updateSessionForDeletedMsg, unreadCountFilterFn error",kn)}var bn=$r.ack||0;if(Gr&&Hr&&bn<fr.time&&fr.from!==tr.core.account&&$r.unread>0&&($r.unread=$r.unread-1,$r.unreadMsgs&&$r.unreadMsgs.length>0)){var Sn,An=si($r.unreadMsgs,{idClient:fr.idClient});An>=0&&pv(Sn=$r.unreadMsgs).call(Sn,An,1)}$r.lastMsg&&$r.lastMsg.idClient===fr.idClient&&($r.lastMsg=null),rr[$r.id]=!0}}),yo(jt=fa(rr)).call(jt,function(fr){var kr=tr.list.get(fr);kr&&tr.core.emit("updateSession",kr)})},Ue.multiSyncMsgReceiptHandler=function(Ce){var jt,tr=(jt=Ce.content)===null||jt===void 0?void 0:jt.msgReceiptTag;if(tr){this.updateSessionMsgReceiptTime([tr],!0),tr.msgReceiptTime=tr.time,tr.sessionId="p2p-"+tr.from,tr.time,tr.from;var rr=ta(tr,["time","from"]);this.core.emit("msgReceipts",[rr])}},Ue.syncMsgReceiptsHandler=function(Ce){var jt,tr=(jt=Ce.content)===null||jt===void 0?void 0:jt.msgReceipts;tr&&this.updateSessionMsgReceiptTime(tr,!1)},Ue.updateSessionMsgReceiptTime=function(Ce,jt){var tr=this;jt===void 0&&(jt=!0),Ce&&Ce.length>0&&yo(Ce).call(Ce,function(rr){var fr=tr.list.get("p2p-"+rr.from);fr||(fr=tr.createSession("p2p-"+rr.from));var kr=Lo(rr.time);fr.msgReceiptTime&&fr.msgReceiptTime>=kr||(fr.msgReceiptTime=kr,fr.lastMsg&&fr.lastMsg.status==="sent"&&kr>=fr.lastMsg.time&&(fr.lastMsg.status="receipt"),tr.logger.log("session: update session "+fr.id+" msgReceiptTime: "+fr.msgReceiptTime),tr.list.set(fr.id,fr),jt&&tr.core.emit("updateSession",fr))})},Ue.nimSyncSessionsWithMoreRoamingHandler=function(Ce){var jt=function(rr,fr){return Oo(rr).call(rr,function(kr){var Pr=ai(ZC,kr);return Pr.sessionId=Ac(kr,fr),Pr})}(Ce.content.datas,this.core.account);this.logger.log("session:syncSessionsWithMoreRoaming",jt)},he}(Ls),aM=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.notifyAddTeamMembers=function($e,Ce){this.core.emit("addTeamMembers",{team:$e,accounts:Ce,members:xi($e,Ce)})},he.notifyUpdateTeamManagers=function($e,Ce,jt,tr){this.core.emit("updateTeamManagers",{team:{teamId:$e,memberUpdateTime:tr},accounts:Ce,isManager:jt,members:Oo(Ce).call(Ce,function(rr){return{id:$e+"-"+rr,account:rr,type:jt?"manager":"normal",updateTime:tr}})})},he.notifyRemoveTeamMembers=function($e,Ce){this.core.emit("removeTeamMembers",{team:$e,accounts:Ce})},he.notifyTransferTeam=function($e,Ce,jt){this.core.emit("transferTeam",{team:$e,from:{id:$e.teamId+"-"+Ce,type:"normal",account:Ce,updateTime:$e.memberUpdateTime},to:{id:$e.teamId+"-"+jt,type:"owner",account:jt,updateTime:$e.memberUpdateTime}})},he.notifyUpdateTeamMembersMute=function($e,Ce,jt){this.core.emit("updateTeamMembersMute",{team:$e,accounts:Ce,members:Oo(Ce).call(Ce,function(tr){return{id:$e.teamId+"-"+tr,account:tr,teamId:$e.teamId,mute:jt,updateTime:$e.memberUpdateTime}}),mute:jt})},_e}(),u1=function(he,Ue){for(var $e=-1,Ce=he==null?0:he.length;++$e<Ce&&Ue(he[$e],$e,he)!==!1;);return he},sM=function(he,Ue){return he&&tu(Ue,Gu(Ue),he)},jv=function(he,Ue){return he&&tu(Ue,Yu(Ue),he)},iM=function(he,Ue){return tu(he,Ap(he),Ue)},Lp=Object.getOwnPropertySymbols?function(_e){for(var he=[];_e;)id(he,Ap(_e)),_e=$h(_e);return he}:Nm,Cl=function(he,Ue){return tu(he,Lp(he),Ue)},Fp=function(he){return K0(he,Yu,Lp)},d1=Object.prototype.hasOwnProperty,cM=function(he){var Ue=he.length,$e=new he.constructor(Ue);return Ue&&typeof he[0]=="string"&&d1.call(he,"index")&&($e.index=he.index,$e.input=he.input),$e},lM=function(he,Ue){var $e=Ue?um(he.buffer):he.buffer;return new he.constructor($e,he.byteOffset,he.byteLength)},uM=/\w*$/,dM=function(he){var Ue=new he.constructor(he.source,uM.exec(he));return Ue.lastIndex=he.lastIndex,Ue},p1=ri?ri.prototype:void 0,f1=p1?p1.valueOf:void 0,pM=function(he){return f1?Object(f1.call(he)):{}},Dv=function(he,Ue,$e){var Ce=he.constructor;switch(Ue){case"[object ArrayBuffer]":return um(he);case"[object Boolean]":case"[object Date]":return new Ce(+he);case"[object DataView]":return lM(he,$e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r0(he,$e);case"[object Map]":case"[object Set]":return new Ce;case"[object Number]":case"[object String]":return new Ce(he);case"[object RegExp]":return dM(he);case"[object Symbol]":return pM(he)}},m1=function(he){return Hi(he)&&Np(he)=="[object Map]"},Uv=lc&&lc.isMap,g1=Uv?cl(Uv):m1,fM=function(he){return Hi(he)&&Np(he)=="[object Set]"},h1=lc&&lc.isSet,v1=h1?cl(h1):fM,y1="[object Arguments]",b1="[object Function]",du="[object Object]",Ha={};Ha[y1]=Ha["[object Array]"]=Ha["[object ArrayBuffer]"]=Ha["[object DataView]"]=Ha["[object Boolean]"]=Ha["[object Date]"]=Ha["[object Float32Array]"]=Ha["[object Float64Array]"]=Ha["[object Int8Array]"]=Ha["[object Int16Array]"]=Ha["[object Int32Array]"]=Ha["[object Map]"]=Ha["[object Number]"]=Ha[du]=Ha["[object RegExp]"]=Ha["[object Set]"]=Ha["[object String]"]=Ha["[object Symbol]"]=Ha["[object Uint8Array]"]=Ha["[object Uint8ClampedArray]"]=Ha["[object Uint16Array]"]=Ha["[object Uint32Array]"]=!0,Ha["[object Error]"]=Ha[b1]=Ha["[object WeakMap]"]=!1;var mM=function _e(he,Ue,$e,Ce,jt,tr){var rr,fr=1&Ue,kr=2&Ue,Pr=4&Ue;if($e&&(rr=jt?$e(he,Ce,jt,tr):$e(he)),rr!==void 0)return rr;if(!ni(he))return he;var Rr=ti(he);if(Rr){if(rr=cM(he),!fr)return n0(he,rr)}else{var $r=Np(he),Hr=$r==b1||$r=="[object GeneratorFunction]";if(ip(he))return t0(he,fr);if($r==du||$r==y1||Hr&&!jt){if(rr=kr||Hr?{}:Qh(he),!fr)return kr?Cl(he,jv(rr,he)):iM(he,sM(rr,he))}else{if(!Ha[$r])return jt?he:{};rr=Dv(he,$r,fr)}}tr||(tr=new Qu);var Gr=tr.get(he);if(Gr)return Gr;tr.set(he,rr),v1(he)?he.forEach(function(Sn){rr.add(_e(Sn,Ue,$e,Sn,he,tr))}):g1(he)&&he.forEach(function(Sn,An){rr.set(An,_e(Sn,Ue,$e,An,he,tr))});var bn=Rr?void 0:(Pr?kr?Fp:Pv:kr?Yu:Gu)(he);return u1(bn||he,function(Sn,An){bn&&(Sn=he[An=Sn]),Jh(rr,An,_e(Sn,Ue,$e,An,he,tr))}),rr},Ml,Bc,es,Lc=function(he){return mM(he,5)},Vv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"team",$e)||this).myTeamMembersMap=new xc,Ce.service=new aM($e),Ce.core.eventBus.on("team/onNotification",function(jt){return Ce.notificationHandler(jt)}),Ss({cmdMap:CC,cmdConfig:MC}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.destroy=function(){this.myTeamMembersMap.clear()},Ue.mergeMyTeamMembers=function(Ce){var jt=this;yo(Ce).call(Ce,function(tr){var rr=tr.teamId,fr=jt.myTeamMembersMap.get(rr),kr=Gn({},fr,tr);jt.myTeamMembersMap.set(rr,kr)})},Ue.getTeamInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),kr.next=3,this.core.sendCmd("getTeamInfo",{teamId:Ce.teamId});case 3:return tr=kr.sent,rr=tr.content.team,kr.abrupt("return",vl(rr));case 6:case"end":return kr.stop()}},jt,this)}))},Ue.getTeams=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("getTeams",{timetag:0});case 2:return jt=fr.sent,tr=jt.content.teams,fr.abrupt("return",mc(tr));case 5:case"end":return fr.stop()}},Ce,this)}))},Ue.getTeamsById=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamIds:{type:"array",itemType:"string"}},Ce),kr.next=3,this.core.sendCmd("getTeamsById",{teamIds:Ce.teamIds});case 3:return tr=kr.sent,rr=mc(tr.content.teams),kr.abrupt("return",{teams:rr,tids:tr.content.tids});case 6:case"end":return kr.stop()}},jt,this)}))},Ue.createTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({type:{type:"enum",values:["advanced","normal"]},name:{type:"string",allowEmpty:!1},level:{type:"number",required:!1},accounts:{type:"array",itemType:"string",required:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!0,required:!1},announcement:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",allowEmpty:!0,required:!1},ext:{type:"string",allowEmpty:!0,required:!1}},Ce),tr=j0(Ce),Pr.next=4,this.core.sendCmd("createTeam",{team:tr,accounts:Ce.accounts||[],ps:Ce.ps||""});case 4:return rr=Pr.sent,fr=vl(rr.content.team),Pr.abrupt("return",fr);case 7:case"end":return Pr.stop()}},jt,this)}))},Ue.dismissTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("dismissTeam",{teamId:Ce.teamId});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.leaveTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("leaveTeam",{teamId:Ce.teamId});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.transferTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("transferTeam",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.updateTeamInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!0,required:!1},announcement:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",allowEmpty:!0,required:!1},ext:{type:"string",allowEmpty:!0,required:!1}},Ce),tr=j0(Ce),fr.next=4,this.core.sendCmd("updateTeamInfo",{team:tr});case 4:return fr.abrupt("return",vl(tr));case 5:case"end":return fr.stop()}},jt,this)}))},Ue.getTeamMembers=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",required:!1}},Ce),Pr.next=3,this.core.sendCmd("getTeamMembers",{teamId:Ce.teamId,timetag:0});case 3:if(rr=Pr.sent,fr=kp((jt=rr.content)===null||jt===void 0?void 0:jt.teamMembers),Ce.accounts&&Ce.accounts.length>0){Pr.next=7;break}return Pr.abrupt("return",fr);case 7:return Pr.abrupt("return",bs(fr).call(fr,function(Rr){var $r;return($r=Ce.accounts)===null||$r===void 0?void 0:mi($r).call($r,Rr.account)}));case 8:case"end":return Pr.stop()}},tr,this)}))},Ue.getMutedTeamMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),kr.next=3,this.core.sendCmd("getMutedTeamMembers",{teamId:Ce.teamId});case 3:return tr=kr.sent,rr=tr.content,kr.abrupt("return",kp(rr.teamMembers));case 6:case"end":return kr.stop()}},jt,this)}))},Ue.addTeamMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("addTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,ps:Ce.ps||"",attach:Ce.ext||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.removeTeamMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},Ce),rr.next=3,this.core.sendCmd("removeTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.applyTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),fr.next=3,this.core.sendCmd("applyTeam",{teamId:Ce.teamId,ps:Ce.ps||""});case 3:return tr=fr.sent,fr.abrupt("return",vl(tr.content.team));case 5:case"end":return fr.stop()}},jt,this)}))},Ue.addTeamManagers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("addTeamManagers",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.removeTeamManagers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("removeTeamManagers",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.updateMyMemberInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},Ce),tr=xm({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,bitConfigMask:Ce.bitConfigMask,ext:Ce.ext}),Pr.next=4,this.core.sendCmd("updateMyMemberInfo",{teamMember:tr});case 4:return rr=rd(Gn({updateTime:new Date().getTime(),account:this.core.account},tr)),this.mergeMyTeamMembers([rr]),this.core.emit("updateTeamMember",rr),fr=Lc(this.myTeamMembersMap.get(rr.teamId)),this.core.emit("myTeamMembers",[fr]),Pr.abrupt("return",rr);case 10:case"end":return Pr.stop()}},jt,this)}))},Ue.updateMemberNick=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0}},Ce),tr=xm({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,account:Ce.account}),kr.next=4,this.core.sendCmd("updateNickInTeam",{teamMember:tr});case 4:return rr=rd(Gn({updateTime:new Date().getTime()},tr)),kr.abrupt("return",rr);case 6:case"end":return kr.stop()}},jt,this)}))},Ue.muteTeamMember=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteTeamMember",{teamId:Ce.teamId,account:Ce.account,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.getTeamMemberInvitorAccid=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:200}},Ce),rr={teamId:Ce.teamId},Ce.accounts&&Ce.accounts.length>0&&(rr.accounts=Ce.accounts),Pr.next=5,this.core.sendCmd("getTeamMemberInvitorAccid",rr);case 5:return fr=Pr.sent,Pr.abrupt("return",((jt=fr.content)===null||jt===void 0?void 0:jt.accountsMap)||{});case 7:case"end":return Pr.stop()}},tr,this)}))},Ue.muteTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteTeam",{teamId:Ce.teamId,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.passTeamApply=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("passTeamApply",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.rejectTeamApply=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectTeamApply",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.acceptTeamInvite=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("acceptTeamInvite",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.rejectTeamInvite=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectTeamInvite",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.notifyTeamMsgReceiptsHandler=function(Ce){var jt,tr=(jt=Ce.content)===null||jt===void 0?void 0:jt.teamMsgReceipts;tr&&tr.length>0&&(this.core.emit("teamMsgReceipts",tr),this.core.emit("msgReceipts",tr))},Ue.syncTeamsHandler=function(Ce){var jt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{teams:Lo(jt.timetag)});var tr=jt==null?void 0:jt.teams;if(tr&&tr.length){var rr=mc(tr);this.core.emit("teams",rr)}},Ue.syncCreateTeamHandler=function(Ce){var jt=Ce.content,tr=vl(jt==null?void 0:jt.team),rr=Ea(tr,tr.owner,"owner");this.core.emit("createTeam",tr,rr)},Ue.syncUpdateTeamMemberHandler=function(Ce){var jt=Ce.content,tr=rd(jt==null?void 0:jt.teamMember);tr.updateTime||(tr.updateTime=new Date().getTime()),this.mergeMyTeamMembers([tr]),this.core.emit("updateTeamMember",tr);var rr=Lc(this.myTeamMembersMap.get(tr.teamId));this.core.emit("myTeamMembers",[rr])},Ue.syncMyTeamMembersHandler=function(Ce){var jt,tr=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{myTeamMembers:Lo(tr.timetag)});var rr=tr==null?void 0:Oo(jt=tr.teamMembers).call(jt,function(fr){return rd(fr)});this.mergeMyTeamMembers(rr),this.core.emit("myTeamMembers",Lc(rr))},Ue.notificationHandler=function(Ce){var jt=Ce.attach,tr=Ce.scene,rr=Ce.from,fr=Ce.to,kr=Ce.time,Pr=Ce.idServer,Rr=Ce.idClient,$r=jt.team,Hr=jt.account,Gr=jt.accounts,bn=jt.type;if(tr==="team")switch(this.core.options.debugLevel==="debug"?this.logger.debug("team::recvNotification",Pr,Rr,jt):this.logger.log("team::recvNotification",Pr,Rr,fr,bn,Hr,Gr),bn){case"updateTeam":$r.updateTime=kr,this.core.emit("updateTeam",$r);break;case"addTeamMembers":this.service.notifyAddTeamMembers($r,Gr);break;case"acceptTeamInvite":this.service.notifyAddTeamMembers($r,[rr]);break;case"passTeamApply":this.service.notifyAddTeamMembers($r,[Hr]);break;case"addTeamManagers":this.service.notifyUpdateTeamManagers(fr,Gr,!0,kr);break;case"removeTeamManagers":this.service.notifyUpdateTeamManagers(fr,Gr,!1,kr);break;case"removeTeamMembers":this.service.notifyRemoveTeamMembers($r,Gr);break;case"leaveTeam":this.service.notifyRemoveTeamMembers($r,[rr]);break;case"dismissTeam":this.core.emit("dismissTeam",{teamId:fr});break;case"transferTeam":this.service.notifyTransferTeam($r,rr,Hr);break;case"updateTeamMemberMute":this.service.notifyUpdateTeamMembersMute($r,[Hr],jt.mute)}},he}(Ls);(function(_e){_e[_e.none=0]="none",_e[_e.pass=1]="pass",_e[_e.decline=2]="decline",_e[_e.read=3]="read",_e[_e.deleted=4]="deleted",_e[_e.invalid=5]="invalid"})(Ml||(Ml={})),function(_e){_e[_e.default=0]="default",_e[_e.leave=1]="leave",_e[_e.roam=2]="roam"}(Bc||(Bc={})),function(_e){_e[_e.applyTeam=0]="applyTeam",_e[_e.rejectTeamApply=1]="rejectTeamApply",_e[_e.teamInvite=2]="teamInvite",_e[_e.rejectTeamInvite=3]="rejectTeamInvite",_e[_e.friendRequest=5]="friendRequest",_e[_e.deleteFriend=6]="deleteFriend",_e[_e.recallMsgP2p=7]="recallMsgP2p",_e[_e.recallMsgTeam=8]="recallMsgTeam",_e[_e.recallMsgSuperTeam=12]="recallMsgSuperTeam",_e[_e.deleteMsgP2pOneWay=13]="deleteMsgP2pOneWay",_e[_e.deleteMsgTeamOneWay=14]="deleteMsgTeamOneWay",_e[_e.applySuperTeam=15]="applySuperTeam",_e[_e.rejectSuperTeamApply=16]="rejectSuperTeamApply",_e[_e.superTeamInvite=17]="superTeamInvite",_e[_e.rejectSuperTeamInvite=18]="rejectSuperTeamInvite",_e[_e.customP2p=100]="customP2p",_e[_e.customTeam=101]="customTeam",_e[_e.customSuperTeam=103]="customSuperTeam"}(es||(es={}));var qv={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},Hv={setting:{needSaveOffline:{type:"boolean"},isRoutable:{type:"boolean"},envConfig:{type:"string"}},antiSpamInfo:{needAntiSpam:{type:"boolean"},antiSpamContent:{type:"boolean"}},pushInfo:cu,recallMessageInfo:{idClient:{type:"string",rawKey:"deletedIdClient"},idServer:{type:"string",rawKey:"deletedIdServer"},createTime:{type:"number",rawKey:"deletedMsgCreateTime"},fromNick:{type:"string",rawKey:"deletedMsgFromNick"},opeAccount:{type:"string"}}};function $p(_e,he,Ue){var $e=+_e.type,Ce=w0(es,$e);Ue=Ue||Bc.default;var jt=Gn(Gn({},ai(Hv,_e)),{type:Ce,time:+_e.time,to:_e.to,from:_e.from,idServer:_e.idServer,state:Ml[Ml.none],feature:Bc[Ue]});if(typeof jt.attach=="string")try{jt.attach=JSON.parse(jt.attach)}catch(tr){he.error("formatSystemMessage: "+jt.idServer+" parse attach error",tr&&tr.message)}return $e===5&&jt.attach?(jt.attach.type=qv[+jt.attach.vt],jt.attach.type==="passFriendApply"?jt.state=Ml[Ml.pass]:jt.attach.type==="rejectFriendApply"&&(jt.state=Ml[Ml.decline])):$e<=3&&jt.attach&&(jt.attach=function(rr){var fr=rr.attach,kr=rr.tinfo,Pr=ta(rr,["attach","tinfo"]);return Pr.ext=fr,kr!==void 0&&(Pr.team=vl(il(rr.tinfo,Es.team))),Pr}(jt.attach)),jt}function gM(_e){var he=Gn({},_e);return Gn(Gn({},om(Hv,he)),{type:es[he.type],to:he.to,attach:he.attach})}var hM={"4_6":"syncOfflineSysMsgs","4_18":"syncOfflineSysMsgs","4_19":"syncRecallMsgOfflineAndRoaming","4_101":"syncOfflineSysMsgs","7_3":"onSysMsg","7_7":"sendCustomSysMsg","7_14":"onRecallMsg","21_18":"onRecallMsg","21_117":"onRecallMsg","7_15":"syncRecallMsgOfflineAndRoaming","21_19":"onSysMsg","21_16":"sendSuperTeamCustomSysMsg","101_3":"onSysMsg","101_7":"sendFilterCustomSysMsg"},jp={sysMsg:Gn({time:0,type:1,to:2,from:3,content:4,attach:5,idServer:6,needSaveOffline:7,deletedIdClient:10,deletedIdServer:11,needcAntiSpam:12,antiSpamContent:13,deletedMsgCreateTime:14,deletedMsgFromNick:15,opeAccount:16,envConfig:21,callbackExt:22,isRoutable:105},Ip)},pu=Ws(jp),vM={onSysMsg:{service:"systemMessage",sid:7,cid:3,response:[{type:"Property",name:"sysMsg",reflectMapper:pu.sysMsg}]},sendCustomSysMsg:{service:"systemMessage",sid:7,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:jp.sysMsg}]},sendSuperTeamCustomSysMsg:{service:"systemMessage",sid:21,cid:16,params:[{type:"Property",name:"sysMsg",reflectMapper:jp.sysMsg}]},sendFilterCustomSysMsg:{service:"systemMessage",sid:101,cid:7,params:[{type:"Property",name:"sysMsg",reflectMapper:jp.sysMsg}]},batchMarkRead:{service:"systemMessage",sid:4,cid:5,hasPacketResponse:!1,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},onRecallMsg:{sid:7,cid:14,service:"systemMessage",response:[{type:"Property",name:"sysMsg",reflectMapper:pu.sysMsg}]},syncRecallMsgOfflineAndRoaming:{sid:7,cid:15,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:pu.sysMsg},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},syncOfflineSysMsgs:{sid:4,cid:9,service:"systemMessage",response:[{type:"PropertyArray",name:"sysMsgs",reflectMapper:pu.sysMsg}]}},zv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"systemMessage",$e)||this).sysMsgUnread={total:0,friend:0,msg:0,team:0,superTeam:0},Ce.core.eventBus.on("logined",function(){Ce.initEventListeners()}),Ss({cmdMap:hM,cmdConfig:vM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.initEventListeners=function(){var Ce=this;this.core.eventBus.on("systemMessage/passFriendApply",function(jt){Ce.core.emit("updateSystemMessages",[{idServer:jt.idServer,from:jt.account,state:"pass",type:"friendRequest"}])}),this.core.eventBus.on("systemMessage/rejectFriendApply",function(jt){Ce.core.emit("updateSystemMessages",[{idServer:jt.idServer,from:jt.account,state:"decline",type:"friendRequest"}])})},Ue.doMarkSysMsgAck=function(Ce){var jt=[],tr=[],rr=["applySuperTeam","rejectSuperTeamApply","superTeamInvite","rejectSuperTeamInvite","customSuperTeam"];yo(Ce).call(Ce,function(fr){fr.idServer&&(mi(rr).call(rr,fr.type)?tr.push(fr.idServer):jt.push(fr.idServer))}),jt.length>0&&this.core.sendCmd("batchMarkRead",{sid:"7",cid:"3",ids:jt}),tr.length>0&&this.core.sendCmd("batchMarkRead",{sid:"21",cid:"19",ids:tr})},Ue.sendCustomSysMsg=function(Ce){var jt=this;Xn({to:{type:"string",allowEmpty:!1},type:{type:"enum",values:["customP2p","customTeam","customSuperTeam"]},attach:{type:"string",allowEmpty:!1},setting:{type:"object",rules:{needSaveOffline:{type:"boolean",required:!1},env:{type:"string",allowEmpty:!1,required:!1}},required:!1},pushInfo:{type:"object",required:!1,rules:cu}},Ce);var tr=Ce.type==="customSuperTeam"?"sendSuperTeamCustomSysMsg":"sendCustomSysMsg";return this.core.sendCmd(tr,{sysMsg:gM(Ce)}).then(function(){jt.logger.log("sendCustomSysMsg success")}).catch(function(rr){throw jt.logger.error("sendCustomSysMsg failed",rr.message),rr})},Ue.onSysMsgHandler=function(Ce){var jt,tr=(jt=Ce.content)===null||jt===void 0?void 0:jt.sysMsg;if(tr){var rr=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;tr.idServer=tr.idServer||rr;var fr=$p(tr,this.logger,Bc.default);this.core.emit("sysMsg",fr),this.doMarkSysMsgAck([fr])}else this.logger.warn("onSysMsg no content.sysMsg")},Ue.syncOfflineSysMsgsHandler=function(Ce){var jt,tr=this;if(Ce.content.sysMsgs&&Ce.content.sysMsgs.length>0){var rr=Oo(jt=Ce.content.sysMsgs).call(jt,function(fr){return $p(fr,tr.logger,Bc.leave)});this.core.emit("syncSysMsgs",rr),this.doMarkSysMsgAck(rr)}},Ue.onRecallMsgHandler=function(Ce){var jt,tr=(jt=Ce.content)===null||jt===void 0?void 0:jt.sysMsg;if(tr){var rr=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;tr.idServer=tr.idServer||rr;var fr=xp([tr],function(Rr){return Rr===es.recallMsgP2p?"p2p":Rr===es.recallMsgTeam?"team":Rr===es.recallMsgSuperTeam?"superTeam":""}(+tr.type));this.core.eventBus.emit("session/updateForDeletedMsg",fr);var kr=$p(tr,this.logger,Bc.default);this.core.emit("sysMsg",kr),this.doMarkSysMsgAck([kr])}else this.logger.warn("onSysMsg no content.sysMsg")},Ue.syncRecallMsgOfflineAndRoamingHandler=function(Ce){var jt=this,tr=Ce.content,rr=tr.timetag,fr=tr.type,kr=tr.sysMsgs,Pr=Lo(fr),Rr=Pr===1?Bc.leave:Bc.roam,$r=Oo(kr).call(kr,function(Hr){return $p(Hr,jt.logger,Rr)});Pr===1&&this.doMarkSysMsgAck($r),this.core.eventBus.emit("sync/updateTimetag",{recallMsg:rr}),this.core.emit("syncSysMsgs",$r)},he}(Ls);function Wv(_e){var he=["bitsExtension","createTime","updateTime","passRelationShip","relationShip","source"],Ue=Gn({},_e);return yo(he).call(he,function($e){Ue[$e]!==void 0&&(Ue[$e]=Lo(Ue[$e]))}),Ue.relationShip!==void 0&&(Ue.valid=Ue.relationShip===1),Ue}var yM={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},bM={"12_4":"getFriends","12_1":"friendReuqest","12_2":"deleteFriend","12_3":"updateFriend","12_5":"syncFriends","12_6":"syncFriendUsers","12_101":"syncFriendRequest","12_102":"syncDeleteFriend","12_103":"syncUpdateFriend"},Gv={updateFriendTag:{account:4,alias:8,ext:10},delFriendParams:{delAlias:1},friendTag:{account:4,relationShip:5,passRelationShip:6,source:7,alias:8,bitsExtension:9,ext:10,createTime:11,updateTime:12,serverex:13},userTag:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,ext:10,createTime:12,updateTime:13}},Fm=Ws(Gv),$m={getFriends:{sid:12,cid:4,service:"friend",params:[{type:"Long",name:"timetag"}],response:[{type:"PropertyArray",name:"friends",reflectMapper:Fm.friendTag},{type:"Number",name:"timetag"}]},friendReuqest:{sid:12,cid:1,service:"friend",params:[{type:"String",name:"account"},{type:"Byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:12,cid:2,service:"friend",params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams",reflectMapper:Gv.delFriendParams}]},updateFriend:{sid:12,cid:3,service:"friend",params:[{type:"Property",name:"updateFriendTag",reflectMapper:Gv.updateFriendTag}]},syncFriends:{sid:12,cid:5,service:"friend",response:[{type:"PropertyArray",name:"friends",entity:"friendTag",reflectMapper:Fm.friendTag},{type:"Number",name:"timetag"}]},syncFriendUsers:{sid:12,cid:6,service:"friend",response:[{type:"PropertyArray",name:"users",entity:"userTag",reflectMapper:Fm.userTag},{type:"Number",name:"timetag"}]},syncFriendRequest:{sid:12,cid:101,service:"friend",params:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}],response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},syncDeleteFriend:{sid:12,cid:102,service:"friend",response:[{type:"String",name:"account"}]},syncUpdateFriend:{sid:12,cid:103,service:"friend",response:[{type:"Property",name:"friend",reflectMapper:Fm.friendTag}]}},SM=function(_e){function he($e){var Ce;return Ce=_e.call(this,"friend",$e)||this,Ss({cmdMap:bM,cmdConfig:$m}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.getFriends=function(){var Ce;return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return kr.next=2,this.core.sendCmd("getFriends",{timetag:0});case 2:return tr=kr.sent,rr=((Ce=tr.content)===null||Ce===void 0?void 0:Ce.friends)||[],rr=Oo(rr).call(rr,function(Pr){return Wv(Pr)}),kr.abrupt("return",rr);case 6:case"end":return kr.stop()}},jt,this)}))},Ue.addFriend=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1},ps:{type:"string",allowEmpty:!1,required:!1}},Ce),fr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:1,ps:Ce.ps||""});case 3:return tr=new Date().getTime(),fr.abrupt("return",{account:Ce.account,createTime:tr,updateTime:tr,valid:!0,source:0,passRelationShip:1,relationShip:1,bitsExtension:0});case 5:case"end":return fr.stop()}},jt,this)}))},Ue.applyFriend=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:2,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.passFriendApply=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr=this;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1}},Ce),fr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:3,ps:Ce.ps||""}).then(function(kr){return tr.core.eventBus.emit("systemMessage/passFriendApply",Ce),kr});case 3:case"end":return fr.stop()}},jt,this)}))},Ue.rejectFriendApply=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr=this;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1}},Ce),fr.next=3,this.core.sendCmd("friendReuqest",{account:Ce.account,type:4,ps:Ce.ps||""}).then(function(kr){return tr.core.eventBus.emit("systemMessage/rejectFriendApply",Ce),kr});case 3:case"end":return fr.stop()}},jt,this)}))},Ue.deleteFriend=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1},delAlias:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("deleteFriend",{account:Ce.account,delFriendParams:{delAlias:Ce.delAlias===!0?1:0}});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.updateFriend=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({account:{type:"string",allowEmpty:!1},alias:{type:"string"},ext:{type:"string",required:!1}},Ce),rr.next=3,this.core.sendCmd("updateFriend",{updateFriendTag:Ce});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.syncFriendRequestHandler=function(Ce){var jt=function(rr){var fr=Gn({},rr);try{fr.ps=fr.ps&&JSON.parse(fr.ps)}catch{}if(fr.type=yM[fr.type],fr.type==="addFriend"||fr.type==="passFriendApply"){var kr=new Date().getTime();fr.friend={account:rr.account,alias:"",createTime:kr,ext:"",updateTime:kr,valid:!0}}return fr}(Ce.content);this.core.emit("syncFriend",jt)},Ue.syncDeleteFriendHandler=function(Ce){var jt=Ce.content.account;this.logger.log("friend::emit syncFriendAction: deleteFriend "+jt),this.core.emit("syncFriend",{type:"deleteFriend",account:jt})},Ue.syncUpdateFriendHandler=function(Ce){var jt=Wv(Ce.content.friend);this.logger.log("friend::emit syncFriendAction: updateFriend, ",jt==null?void 0:jt.account),this.core.emit("syncFriend",{type:"updateFriend",friend:jt})},Ue.syncFriendsHandler=function(Ce){var jt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{friends:Lo(jt.timetag)});var tr=jt==null?void 0:jt.friends;if(tr&&tr.length){var rr=Oo(tr).call(tr,function(fr){return Wv(fr)});this.core.emit("friends",rr)}},Ue.syncFriendUsersHandler=function(Ce){var jt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{friendUsers:Lo(jt.timetag)});var tr=jt==null?void 0:jt.users;if(tr&&tr.length){var rr=Oo(tr).call(tr,function(fr){return Ii(fr)});this.core.emit("users",rr)}},he}(Ls),Kv={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"};function S1(_e){return _e&&_e.length>0?Oo(_e).call(_e,function(he){return function($e){var Ce=Gn({},$e),jt=["subscribeTime","time"];return yo(jt).call(jt,function(tr){Ce[tr]&&(Ce[tr]=Lo(Ce[tr]))}),Ce}(he)}):[]}function Qv(_e){if(!_e)return _e;var he=_e.serverExt,Ue=ta(_e,["serverExt"]),$e=["time","type","value"];if(yo($e).call($e,function(Ce){Ue[Ce]&&(Ue[Ce]=Lo(Ue[Ce]))}),Ue.clientType&&(Ue.clientType=Kv[Ue.clientType]||""),he)try{Ue.ext=JSON.parse(he),typeof Ue.ext[0]=="string"&&(Ue.ext=Ue.ext[0])}catch{}return Ue}var T1={"14_1":"publishEvent","14_2":"pushEvent","14_3":"subscribeEvent","14_4":"unSubscribeEventsByAccounts","14_5":"unSubscribeEventsByType","14_6":"querySubscribeEventsByAccounts","14_7":"querySubscribeEventsByType","14_9":"pushEvents"},fu={msgEvent:{type:1,value:2,idClient:3,ext:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverExt:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105}},mu=Ws(fu),C1={publishEvent:{sid:14,cid:1,service:"event",params:[{type:"Property",name:"msgEvent",reflectMapper:fu.msgEvent}],response:[{type:"Property",name:"msgEvent",reflectMapper:mu.msgEvent}]},pushEvent:{sid:14,cid:2,service:"event",response:[{type:"Property",name:"msgEvent",reflectMapper:mu.msgEvent}]},subscribeEvent:{sid:14,cid:3,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:14,cid:4,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:14,cid:5,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe}]},querySubscribeEventsByAccounts:{sid:14,cid:6,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe},{type:"StrArray",name:"accounts"}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:mu.msgEventSubscribe}]},querySubscribeEventsByType:{sid:14,cid:7,service:"event",params:[{type:"Property",name:"msgEventSubscribe",reflectMapper:fu.msgEventSubscribe}],response:[{type:"PropertyArray",name:"msgEventSubscribes",reflectMapper:mu.msgEventSubscribe}]},pushEvents:{sid:14,cid:9,service:"event",response:[{type:"PropertyArray",name:"msgEvents",reflectMapper:mu.msgEvent}]}},ud=function(_e){function he($e){var Ce;return Ce=_e.call(this,"event",$e)||this,Ss({cmdMap:T1,cmdConfig:C1}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.publishEvent=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({type:{type:"number"},value:{type:"number"},ext:{type:"string",required:!1},validTime:{type:"number",min:60,max:2592e3,required:!1},broadcastType:{type:"number",required:!1},sync:{type:"boolean",required:!1}},Ce),rr=Gn(Gn({validTime:Ce.validTime||604800,broadcastType:Ce.broadcastType||2},Ce),{idClient:Jo(),sync:Ce.sync===!0?1:0}),Rr.next=4,this.core.sendCmd("publishEvent",{msgEvent:rr});case 4:return fr=Rr.sent,kr=((jt=fr.content)===null||jt===void 0?void 0:jt.msgEvent)||{},Rr.abrupt("return",Qv(kr));case 7:case"end":return Rr.stop()}},tr,this)}))},Ue.subscribeEvent=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100},subscribeTime:{type:"number",min:60,max:2592e3,required:!1}},Ce),rr=Gn(Gn({subscribeTime:2592e3},Ce),{sync:Ce.sync===!0?1:0}),Rr.next=4,this.core.sendCmd("subscribeEvent",{msgEventSubscribe:rr,accounts:Ce.accounts});case 4:return fr=Rr.sent,kr=((jt=fr.content)===null||jt===void 0?void 0:jt.accounts)||[],Rr.abrupt("return",{failedAccounts:kr});case 7:case"end":return Rr.stop()}},tr,this)}))},Ue.unSubscribeEvents=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(Xn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},Ce),rr={type:Ce.type},!(Ce.accounts&&Ce.accounts.length>0)){Rr.next=9;break}return Rr.next=5,this.core.sendCmd("unSubscribeEventsByAccounts",{msgEventSubscribe:rr,accounts:Ce.accounts});case 5:kr=Rr.sent,fr=((jt=kr.content)===null||jt===void 0?void 0:jt.accounts)||[],Rr.next=12;break;case 9:return Rr.next=11,this.core.sendCmd("unSubscribeEventsByType",{msgEventSubscribe:rr});case 11:fr=[];case 12:return Rr.abrupt("return",{failedAccounts:fr});case 13:case"end":return Rr.stop()}},tr,this)}))},Ue.querySubscribeEvents=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Xn({type:{type:"number"},accounts:{type:"array",itemType:"string",max:100,required:!1}},Ce),!(Ce.accounts&&Ce.accounts.length>0)){kr.next=7;break}return kr.next=4,this.core.sendCmd("querySubscribeEventsByAccounts",{msgEventSubscribe:{type:Ce.type},accounts:Ce.accounts});case 4:rr=kr.sent,kr.next=10;break;case 7:return kr.next=9,this.core.sendCmd("querySubscribeEventsByType",{msgEventSubscribe:{type:Ce.type}});case 9:rr=kr.sent;case 10:return kr.abrupt("return",S1((jt=rr.content)===null||jt===void 0?void 0:jt.msgEventSubscribes));case 11:case"end":return kr.stop()}},tr,this)}))},Ue.pushEventHandler=function(Ce){var jt,tr=((jt=Ce.content)===null||jt===void 0?void 0:jt.msgEvent)||{};this.core.emit("pushEvents",[Qv(tr)])},Ue.pushEventsHandler=function(Ce){var jt,tr=((jt=Ce.content)===null||jt===void 0?void 0:jt.msgEvents)||{};this.core.emit("pushEvents",function(fr){return uc(fr)&&fr.length>0?Oo(fr).call(fr,function(kr){return Qv(kr)}):[]}(tr))},he}(Ls);function M1(_e){var he={scene:Kh[_e.scene],from:_e.threadMsgFromAccount,to:_e.threadMsgToAccount,time:_e.threadMsgTime,idServer:_e.threadMsgIdServer},Ue={limit:_e.limit<100?_e.limit:100,beginTime:typeof _e.beginTime=="number"?_e.beginTime:0,reverse:Nf(_e)===!0?1:0};return _e.lastMsgId&&(Ue.lastMsgId=_e.lastMsgId),{msg:he,threadMsgReq:Ue}}var jm,k1={"23_1":"getThreadMsgs","23_2":"getMsgsByIdServer"},kl={msg:yl,threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2}},wl=Ws(kl),TM={getThreadMsgs:{sid:23,cid:1,service:"msgExtend",params:[{type:"Property",name:"msg",reflectMapper:kl.msg},{type:"Property",name:"threadMsgReq",reflectMapper:kl.threadMsgReq}],response:[{type:"Property",name:"threadMsg",reflectMapper:wl.msg},{type:"Property",name:"threadMsgsMeta",reflectMapper:wl.threadMsgsMeta},{type:"PropertyArray",name:"msgs",reflectMapper:wl.msg}]},getMsgsByIdServer:{sid:23,cid:2,service:"msgExtend",params:[{type:"PropertyArray",name:"reqMsgs",reflectMapper:kl.msg}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:wl.msg}]}},pe=function(_e){function he($e){var Ce;return Ce=_e.call(this,"msgExtend",$e)||this,Ss({cmdMap:k1,cmdConfig:TM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.getThreadMsgs=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr,Rr,$r,Hr;return Kr.wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return Xn({scene:{type:"enum",values:pc(Za)},threadMsgFromAccount:{type:"string",allowEmpty:!1},threadMsgIdServer:{type:"string",allowEmpty:!1},threadMsgTime:{type:"number"},threadMsgToAccount:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},lastMsgId:{type:"string",allowEmpty:!1,required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1}},Ce),bn.next=3,this.core.sendCmd("getThreadMsgs",M1(Ce));case 3:return rr=bn.sent,fr=rr.content,kr=fr.msgs,Pr=fr.threadMsg,Rr=rr.content.threadMsgsMeta,$r=Ac(Pr,this.core.account),Hr=(jt=this.core.session)===null||jt===void 0?void 0:jt.getSessionWithUncomplete({id:$r}),kr=Am(kr,Hr?{account:this.core.account,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:this.core.account}),Pr=Ei(Pr,Hr?{account:this.core.account,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:this.core.account}),bn.abrupt("return",{msgs:kr,threadMsg:Pr,total:Lo(Rr.total),timetag:Lo(Rr.lastMsgTime)});case 11:case"end":return bn.stop()}},tr,this)}))},Ue.getMsgsByIdServer=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr=this;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({reqMsgs:{type:"array",rules:{scene:{type:"enum",values:pc(Za)},from:{type:"string",allowEmpty:!1},to:{type:"string",allowEmpty:!1},idServer:{type:"string",allowEmpty:!1},time:{type:"number"}},min:1,max:100}},Ce),$r.next=3,this.core.sendCmd("getMsgsByIdServer",{reqMsgs:Oo(tr=Ce.reqMsgs).call(tr,function(Hr){return Gn(Gn({},Hr),{scene:w0(Za,Hr.scene)})})});case 3:return fr=$r.sent,kr=Oo(rr=fr.content.msgs).call(rr,function(Hr){var Gr,bn=Ac(Hr,Pr.core.account),Sn=(Gr=Pr.core.session)===null||Gr===void 0?void 0:Gr.getSessionWithUncomplete({id:bn});return Ei(Hr,Sn?{account:Pr.core.account,sessionAck:Sn.ack,msgReceiptTime:Sn.msgReceiptTime}:{account:Pr.core.account})}),$r.abrupt("return",kr);case 6:case"end":return $r.stop()}},jt,this)}))},he}(Ls);(function(_e){_e[_e.ASC=1]="ASC",_e[_e.DESC=2]="DESC"})(jm||(jm={}));var xe,qe={"7_6":"getHistoryMsgs","7_9":"deleteRoamingMsgs","4_24":"syncClearServerHistoryMsgs","7_18":"clearHistoryMsgsFromServer","7_118":"multiSyncClearServerHistoryMsgs","7_26":"nimFtsCloudMsgLogsAggWithSession","7_27":"nimFtsCloudMsgLogs"},Oe={msg:yl,clearHistoryMsgsFromServerReqTag:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,ext:7},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},ftsReqTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msglogsLimit:5,orderRule:6,p2pSessionList:7,teamSessionList:8,senderList:9,msgTypeList:10,msgSubTypeList:11}},Ne=Ws(Oe),Lt={deleteRoamingMsgs:{sid:7,cid:9,service:"msgLog",params:[{type:"StrArray",name:"ids"}]},getHistoryMsgs:{sid:7,cid:6,params:[{type:"String",name:"to"},{type:"Long",name:"beginTime"},{type:"Long",name:"endTime"},{type:"Long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}],response:[{type:"PropertyArray",name:"msgs",reflectMapper:Ne.msg}],service:"msgLog"},clearHistoryMsgsFromServer:{sid:7,cid:18,params:[{type:"Property",name:"clearHistoryMsgsFromServerReqTag",reflectMapper:Oe.clearHistoryMsgsFromServerReqTag}],response:[{type:"Long",name:"timetag"}],service:"msgLog"},multiSyncClearServerHistoryMsgs:{sid:7,cid:118,response:[{type:"Property",name:"data",reflectMapper:Ne.clearMsgsParamsWithSync}],service:"msgLog"},syncClearServerHistoryMsgs:{sid:4,cid:24,service:"msgLog",response:[{type:"PropertyArray",name:"datas",reflectMapper:Ne.clearMsgsParamsWithSync}]},nimFtsCloudMsgLogsAggWithSession:{sid:7,cid:26,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:Oe.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:Ne.msg}]},nimFtsCloudMsgLogs:{sid:7,cid:27,service:"msgLog",params:[{type:"Property",name:"tag",reflectMapper:Oe.ftsReqTag}],response:[{type:"PropertyArray",name:"datas",reflectMapper:Ne.msg}]}};(function(_e){_e[_e.p2p=1]="p2p",_e[_e.team=2]="team"})(xe||(xe={}));var Dt={type:{type:"enum",values:xe},isDeleteRoam:{type:"boolean"},isSyncSelf:{type:"boolean"},time:{type:"number"}};function Pt(_e){var he=ai(Dt,_e);return{sessionId:he.type==="p2p"?"p2p-"+he.otherAccid:"team-"+he.toTid,time:he.time}}var ir={orderRule:{type:"enum",values:jm}};function vr(_e){var he,Ue=ai(ir,_e);uc(Ue.msgTypeList)&&(Ue.msgTypeList=Oo(he=Ue.msgTypeList).call(he,function(Ce){return Xl[Ce]}).join(","));var $e=["p2pSessionList","teamSessionList","senderList","msgSubTypeList"];return yo($e).call($e,function(Ce){uc(Ue[Ce])&&(Ue[Ce]=Ue[Ce].join(","))}),Ue}var Ir=function(_e){function he($e){var Ce;return Ce=_e.call(this,"msgLog",$e)||this,Ss({cmdMap:qe,cmdConfig:Lt}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.deleteRoamingMsgs=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:Xn({ids:{type:"array",itemType:"string"}},Ce),tr=[],kr.prev=2,tr=Oo(rr=Ce.ids).call(rr,function(Pr){var Rr=_i(Pr);return Rr.scene+"|"+Rr.accid}),kr.next=10;break;case 6:throw kr.prev=6,kr.t0=kr.catch(2),this.logger.error("Failed to delete roaming msgs with "+Ce.ids,kr.t0),new Error("Failed to create session with "+Ce.ids);case 10:return kr.next=12,this.core.sendCmd("deleteRoamingMsgs",{ids:tr});case 12:case"end":return kr.stop()}},jt,this,[[2,6]])}))},Ue.getHistoryMsgs=function(Ce){var jt,tr;return qn(this,void 0,void 0,Kr.mark(function rr(){var fr,kr,Pr,Rr,$r,Hr,Gr;return Kr.wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:return!((jt=this.core.sync)===null||jt===void 0)&&jt.getSyncDoneFlag()||this.logger.warn("Please call getHistoryMsgs after syncdone event"),Xn({scene:{type:"enum",values:fa(Kh)},to:{type:"string",allowEmpty:!1},beginTime:{type:"number",required:!1},endTime:{type:"number",required:!1},limit:{type:"number",min:1,max:100,required:!1},reverse:{type:"boolean",required:!1},lastMsgId:{type:"string",required:!1,allowEmpty:!1},asc:{type:"boolean",required:!1},msgTypes:{type:"array",itemType:"string",required:!1}},Ce),kr=Ce.scene==="p2p"?"getHistoryMsgs":Ce.scene==="team"?"getHistoryTeamMsgs":"getHistorySuperTeamMsgs",Sn.next=5,this.core.sendCmd(kr,Gn(Gn({beginTime:0,endTime:0,lastMsgId:0,limit:100,reverse:!1},Ce),{msgTypes:Ce.msgTypes?Oo(fr=Ce.msgTypes).call(fr,function(An){return Gh[An]}):[]}));case 5:if(Pr=Sn.sent,(Rr=Pr.content).msgs&&Rr.msgs.length>0){Sn.next=9;break}return Sn.abrupt("return",[]);case 9:if($r=Ac(Rr.msgs[0],this.core.account),Hr=(tr=this.core.session)===null||tr===void 0?void 0:tr.getSessionWithUncomplete({id:$r}),Gr=Am(Rr.msgs,Hr?{account:this.core.account,sessionAck:Hr.ack,msgReceiptTime:Hr.msgReceiptTime}:{account:this.core.account}),Ce.asc!==!0){Sn.next=14;break}return Sn.abrupt("return",iu(Gr).call(Gr,function(An,kn){return An.time-kn.time}));case 14:return Sn.abrupt("return",Gr);case 15:case"end":return Sn.stop()}},rr,this)}))},Ue.clearHistoryMsgsFromServer=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({scene:{type:"enum",values:["p2p","team"]},to:{type:"string",allowEmpty:!1},ext:{type:"string",required:!1},isSyncSelf:{type:"boolean",required:!1}},Ce),(tr=Gn(Gn({isDeleteRoam:1},Ce),{type:Ce.scene==="team"?2:1,isSyncSelf:Ce.isSyncSelf===!0?1:0}))[tr.type===2?"toTid":"otherAccid"]=Ce.to,Pr.next=5,this.core.sendCmd("clearHistoryMsgsFromServer",{clearHistoryMsgsFromServerReqTag:tr});case 5:return rr=Pr.sent,fr=rr.content,this.core.eventBus.emit("session/updateForClearMsg",[{sessionId:Ce.scene+"-"+Ce.to}],!0),Pr.abrupt("return",fr);case 9:case"end":return Pr.stop()}},jt,this)}))},Ue.multiSyncClearServerHistoryMsgsHandler=function(Ce){var jt=Pt(Ce.content.data);this.core.eventBus.emit("session/updateForClearMsg",[jt],!0),this.core.emit("clearServerHistoryMsgs",[jt])},Ue.ftsCloudMsgLogs=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.abrupt("return",this.baseFtsCloudMsgLogs(Ce,"nimFtsCloudMsgLogs"));case 1:case"end":return rr.stop()}},jt,this)}))},Ue.ftsCloudMsgLogsAggWithSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.abrupt("return",this.baseFtsCloudMsgLogs(Ce,"nimFtsCloudMsgLogsAggWithSession"));case 1:case"end":return rr.stop()}},jt,this)}))},Ue.baseFtsCloudMsgLogs=function(Ce,jt){return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr=this;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(Xn({keyword:{type:"string",allowEmpty:!1},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",required:!1},msglogsLimit:{type:"number",required:!1},orderRule:{type:"enum",values:pc(jm),required:!1},p2pSessionList:{type:"array",itemType:"string",required:!1},teamSessionList:{type:"array",itemType:"string",required:!1},senderList:{type:"array",itemType:"string",required:!1},msgTypeList:{type:"array",itemType:"enum",values:pc(Xl),required:!1},msgSubTypeList:{type:"array",itemType:"number",required:!1}},Ce),!(Ce.fromTime&&Ce.toTime&&Ce.toTime<Ce.fromTime)){$r.next=3;break}throw new Du("Request parameter error: toTime should be greater than fromTime",Ce,"");case 3:return fr=vr(Ce),$r.next=6,this.core.sendCmd(jt,{tag:fr});case 6:return kr=$r.sent,$r.abrupt("return",Oo(rr=kr.content.datas).call(rr,function(Hr){var Gr,bn=Ac(Hr,Pr.core.account),Sn=(Gr=Pr.core.session)===null||Gr===void 0?void 0:Gr.getSessionWithUncomplete({id:bn});return Ei(Hr,Sn?{account:Pr.core.account,sessionAck:Sn.ack,msgReceiptTime:Sn.msgReceiptTime}:{account:Pr.core.account})}));case 8:case"end":return $r.stop()}},tr,this)}))},Ue.syncClearServerHistoryMsgsHandler=function(Ce){var jt=function(rr){return uc(rr)&&rr.length>0?Oo(rr).call(rr,function(fr){return Pt(fr)}):[]}(Ce.content.datas);this.core.emit("clearServerHistoryMsgs",jt)},he}(Ls),Or={"22_1":"requestProxy","22_2":"onRequestProxy"},jr={requestProxyTag:{zone:1,path:2,method:3,header:4,body:5},requestProxyMsgTag:{from:1,body:2,time:3}},Ur=Ws(jr),Yr={requestProxy:{sid:22,cid:1,service:"passThrough",params:[{type:"Property",name:"requestProxyTag",reflectMapper:jr.requestProxyTag}],response:[{type:"Property",name:"requestProxyTag",reflectMapper:Ur.requestProxyTag}]},onRequestProxy:{sid:22,cid:2,service:"passThrough",response:[{type:"Property",name:"proxyMsg",reflectMapper:Ur.requestProxyMsgTag}]}},In=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"passThrough",$e)||this).core=$e,Ss({cmdMap:Or,cmdConfig:Yr}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.request=function(Ce){return Xn({path:{type:"string",allowEmpty:!1}},Ce),this.core.sendCmd("requestProxy",{requestProxyTag:Ce}).then(function(jt){return jt.content.requestProxyTag})},Ue.onRequestProxyHandler=function(Ce){var jt=Ce.content.proxyMsg;jt&&jt.time&&(jt.time=+jt.time),this.core.emit("proxyMsg",jt)},he}(Ls),Mn=Rh.trim,Dn=Ie("".charAt),Wn=$.parseFloat,Jn=$.Symbol,Fn=Jn&&Jn.iterator,go=1/Wn(em+"-0")!=-1/0||Fn&&!V(function(){Wn(Object(Fn))})?function(he){var Ue=Mn(Zs(he)),$e=Wn(Ue);return $e===0&&Dn(Ue,0)=="-"?-0:$e}:Wn;En({global:!0,forced:parseFloat!=go},{parseFloat:go});var Bo=_r.parseFloat,Do,Bn,zr=function(he,Ue){if(he==null)return{};var $e=Uf(Fp(he),function(Ce){return[Ce]});return Ue=Fv(Ue),H0(he,$e,function(Ce,jt){return Ue(Ce,jt[0])})},eo={"6_2":"getNosToken","6_22":"getOriginUrl","6_26":"getNosCdnHost","6_27":"getGrayscaleConfig","6_28":"getMixStorePolicy","6_29":"getMixStoreToken","6_30":"getFileAuthToken"},to={nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},mixStoreTokenReqTag:{provider:0,tokenCount:1,fileExpireSec:2,tag:3,returnBody:4},nosConfigTag:{bucket:1,cdnDomain:2,expire:3,objectNamePrefix:4},grayConfigTag:{config:0,ttl:1},mixStorePolicyTag:{providers:0,ttl:1,mixEnable:2,nosPolicy:3,s3Policy:4},mixStoreTokenResTag:{provider:0,accessKeyId:1,secretAccessKey:2,sessionToken:3,token:4,expireTime:5,bucket:6,objectName:7,fileExpireSec:8,tag:9,shortUrl:10,region:11},nosSafeUrlTag:{safeUrl:0,originUrl:1},mixStoreAuthTokenReqTag:{type:1,urls:2},mixStoreAuthTokenResTag:{type:1,tokens:2,token:3,ttl:4}},Hn=Ws(to),On={getNosToken:{sid:6,cid:2,service:"cloudStorage",response:[{type:"Property",name:"nosToken",reflectMapper:Hn.nosToken}],params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken",reflectMapper:to.nosToken}]},getOriginUrl:{sid:6,cid:22,service:"cloudStorage",response:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:Hn.nosSafeUrlTag}],params:[{type:"Property",name:"nosSafeUrlTag",reflectMapper:to.nosSafeUrlTag}]},getNosCdnHost:{sid:6,cid:26,service:"misc",response:[{type:"Property",name:"nosConfigTag",reflectMapper:Hn.nosConfigTag}]},getGrayscaleConfig:{sid:6,cid:27,service:"cloudStorage",response:[{type:"Property",name:"grayConfigTag",reflectMapper:Hn.grayConfigTag}],params:[{type:"Property",name:"config"}]},getMixStorePolicy:{sid:6,cid:28,service:"cloudStorage",params:[{type:"LongArray",name:"supportType"}],response:[{type:"Property",name:"mixStorePolicyTag",reflectMapper:Hn.mixStorePolicyTag}]},getMixStoreToken:{sid:6,cid:29,service:"cloudStorage",params:[{type:"Property",name:"mixStoreTokenReqTag",reflectMapper:to.mixStoreTokenReqTag}],response:[{type:"Property",name:"mixStoreTokenResTag",reflectMapper:Hn.mixStoreTokenResTag}]},getFileAuthToken:{sid:6,cid:30,service:"cloudStorage",params:[{type:"Property",name:"mixStoreAuthTokenReqTag",reflectMapper:to.mixStoreAuthTokenReqTag}],response:[{type:"Property",name:"mixStoreAuthTokenResTag",reflectMapper:Hn.mixStoreAuthTokenResTag}]}},oo={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},lo={accessKeyId:"",secretAccessKey:"",sessionToken:"",region:"",maxRetries:0,bucket:"",objectName:"",token:"",shortUrl:""};(function(_e){_e[_e.nos=1]="nos",_e[_e.s3=2]="s3"})(Do||(Do={})),function(_e){_e[_e.dontNeed=-1]="dontNeed",_e[_e.time=2]="time",_e[_e.urls=3]="urls"}(Bn||(Bn={}));var Co={chunkUploadHost:"https://wanproxy-web.127.net",commonUploadHost:"https://nos.netease.com",chunkMaxSize:4194304e4,commonMaxSize:104857600,uploadReplaceFormat:"https://{host}/{object}",cdn:{defaultCdnDomain:"nim.nosdn.127.net",cdnDomain:"",bucket:"",objectNamePrefix:""},downloadUrl:"https://{bucket}-nosdn.netease.im/{object}",downloadHostList:["nos.netease.com"],nosCdnEnable:!0,isNeedToGetUploadPolicyFromServer:!0};function ko(_e){return _e===void 0&&(_e="file"),ha(oo[_e]||{}).replace(/"/gi,'\\"')}var la=function(){function _e(Ue,$e){$e===void 0&&($e={}),this.GRAYKEY="AllGrayscaleConfig",this.MIXSTOREKEY="AllMixStorePolicy",this.config={},this.nosCdnHostTimer=0,this.grayConfig={mixStoreEnable:!1,timeStamp:0,ttl:0},this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Do.nos,this.s3=null,this.mixStoreErrorCount=10,this.nosErrorCount=0,this.circuitTimer=0,this.name="cloudStorage",this.logger=Ue.logger,this.core=Ue,Ss({cmdMap:eo,cmdConfig:On}),this.setOptions($e)}var he=_e.prototype;return he.setOptions=function($e){$e===void 0&&($e={});var Ce=$e.storageKeyPrefix||"NIMClient";this.GRAYKEY=Ce+"-AllGrayscaleConfig",this.MIXSTOREKEY=Ce+"-AllMixStorePolicy";var jt=$e.s3,tr=ta($e,["s3"]),rr=Gn({},Co,this.config);if(tr&&Object.prototype.hasOwnProperty.call(tr,"cdn")){var fr={cdn:Gn(Gn({},rr.cdn),tr.cdn)};this.config=Gn({},rr,tr,fr)}else this.config=Gn({},rr,tr);jt&&(this.s3=jt)},he.init=function(){return qn(this,void 0,void 0,Kr.mark(function $e(){return Kr.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(this.grayConfig=null,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.curProvider=Do.nos,this.mixStoreErrorCount=10,!this.config.isNeedToGetUploadPolicyFromServer){jt.next=9;break}return jt.next=7,this.getGrayscaleConfig(this.core.options.appkey);case 7:return jt.next=9,this.getNosCdnHost();case 9:case"end":return jt.stop()}},$e,this)}))},he.processCallback=function($e){var Ce=this,jt=$e.onUploadProgress,tr=$e.onUploadDone,rr=$e.onUploadStart;return{onUploadStart:typeof rr=="function"?function(fr){try{rr(fr)}catch(kr){Ce.logger.error("CloudStorage::uploadFile:options.onUploadStart execute error",kr)}}:function(){},onUploadProgress:typeof jt=="function"?function(fr){try{jt(fr)}catch(kr){Ce.logger.error("CloudStorage::uploadFile:options.onUploadProgress execute error",kr)}}:function(){},onUploadDone:typeof tr=="function"?function(fr){try{tr(fr)}catch(kr){Ce.logger.error("CloudStorage::uploadFile:options.onUploadDone execute error",kr)}}:function(){}}},he.uploadFile=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(Xn({maxSize:{type:"number",required:!1},type:{type:"enum",values:["file","image","audio","video"]}},$e),$e.fileInput||$e.file||$e.filePath){$r.next=3;break}throw new Error("uploadFile needs target file object or a filePath");case 3:if(!$e.type||$e.type==="file"){$r.next=7;break}if(typeof(jt=Bs($e,"file.type"))!="string"||Ka(jt).call(jt,$e.type)!==-1){$r.next=7;break}throw new Error('The meta type "'+jt+'" does not match "'+$e.type+'"');case 7:return tr=this.processCallback($e),rr=tr.onUploadStart,fr=tr.onUploadProgress,kr=tr.onUploadDone,$e.onUploadStart=rr,$e.onUploadProgress=fr,$e.onUploadDone=kr,$r.next=13,this._uploadFile($e);case 13:return(Pr=$r.sent).url=decodeURIComponent(Pr.url),$e.onUploadDone({size:Pr.size,name:Pr.name,url:Pr.url,ext:Pr.name.split(".")[1]||"unknown"}),$r.abrupt("return",Pr);case 17:case"end":return $r.stop()}},Ce,this)}))},he._uploadFile=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(this.grayConfig&&this.grayConfig.mixStoreEnable&&this.mixStorePolicy.providers.length){fr.next=3;break}return this.logger.log("uploadFile:: uploadFile begin, use old nos"),fr.abrupt("return",this.nosUpload($e));case 3:return this.logger.log("uploadFile:: uploadFile begin,Current settings grayConfig mixStoreEnable:"+this.grayConfig.mixStoreEnable+" curProvider:"+this.curProvider),this.s3||(this.curProvider=Do.nos),jt=lo,fr.prev=6,fr.next=9,this.core.sendCmd("getMixStoreToken",{mixStoreTokenReqTag:{provider:this.curProvider,tokenCount:1,tag:"qchat",returnBody:ko($e.type)}});case 9:tr=fr.sent,jt=tr.content.mixStoreTokenResTag,fr.next=17;break;case 13:throw fr.prev=13,fr.t0=fr.catch(6),this.core.logger.error("uploadFile:: getMixStoreToken error",fr.t0),new Uu("getMixStoreToken error",fr.t0,this.curProvider,this.mixStorePolicy);case 17:return fr.abrupt("return",this.curProvider===Do.s3?this.s3Upload($e,jt):this.nosUpload($e,jt));case 18:case"end":return fr.stop()}},Ce,this,[[6,13]])}))},he.nosUpload=function($e,Ce){var jt,tr;return qn(this,void 0,void 0,Kr.mark(function rr(){var fr,kr,Pr,Rr,$r,Hr,Gr,bn,Sn,An,kn,Kn,Qn,To,Eo;return Kr.wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:if(fr=Bs(this.core,"config.cdn.bucket"),kr={tag:$e.nosScenes||fr||"nim",expireSec:$e.nosSurvivalTime},Ce){Ln.next=13;break}return Ln.prev=3,Ln.next=6,this.core.sendCmd("getNosToken",{responseBody:ko($e.type),nosToken:kr});case 6:Pr=Ln.sent,Ln.next=13;break;case 9:throw Ln.prev=9,Ln.t0=Ln.catch(3),this.core.logger.error("uploadFile:: getNosToken error",Ln.t0),new Uu("getNosToken error",Ln.t0,1);case 13:return Rr=this.config.uploadReplaceFormat.replace("{host}",this.config.cdn.cdnDomain||this.config.cdn.defaultCdnDomain).replace("{object}",Pr?Pr.content.nosToken.objectName:Ce==null?void 0:Ce.objectName),$r="",Ce&&Ce.shortUrl&&($r=Ce.shortUrl),Hr=$r||Rr,Ln.prev=17,bn=Pr?Pr.content.nosToken:Ce,this.core.logger.debug("uploadFile:: uploadFile params",{nosToken:bn,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,platform:jo.platform}),Ln.next=22,this.core.adapters.uploadFile(Gn(Gn({},$e),{nosToken:bn,chunkUploadHost:this.config.chunkUploadHost,commonUploadHost:this.config.commonUploadHost,maxSize:$e.maxSize||this.config.chunkMaxSize}));case 22:Gr=Ln.sent,Ln.next=48;break;case 25:if(Ln.prev=25,Ln.t1=Ln.catch(17),this.core.logger.error("uploadFile::nos uploadFile error",Ln.t1),Bs(Ln.t1,"errCode")!==10499){Ln.next=30;break}throw new Uu(Bs(Ln.t1,"message")||"Request abort",Ln.t1,1);case 30:if(!Ce){Ln.next=47;break}if(this.nosErrorCount!==0){Ln.next=43;break}Ln.prev=32,this._addCircuitTimer(),Ln.next=39;break;case 36:throw Ln.prev=36,Ln.t2=Ln.catch(32),new Uu("upload file error",Ln.t2,this.curProvider,this.mixStorePolicy,$e.file||$e.filePath);case 39:return this.nosErrorCount=(jt=this.mixStorePolicy.nosPolicy)===null||jt===void 0?void 0:jt.uploadConfig.retryPolicy.retry,Ln.abrupt("return",this._uploadFile($e));case 43:return this.nosErrorCount--,Ln.abrupt("return",this.nosUpload($e,Ce));case 45:Ln.next=48;break;case 47:throw new Uu("nos uploadFile error",Ln.t1,1);case 48:if(Sn=Gr==null?void 0:Gr.type,An=Sn&&Ka(Sn).call(Sn,"/")>-1?xa(Sn).call(Sn,0,Ka(Sn).call(Sn,"/")):"",(kn={image:"imageInfo",video:"vinfo",audio:"vinfo"})[An]){Ln.next=53;break}return Ln.abrupt("return",Gn({url:Hr},Gr));case 53:return Ln.prev=53,Ln.next=56,this.core.adapters.request(Rr+"?"+kn[An],{method:"GET",dataType:"json",timeout:5e3},{exception_service:3});case 56:Kn=Ln.sent,Ln.next=63;break;case 59:return Ln.prev=59,Ln.t3=Ln.catch(53),this.core.logger.error("uploadFile:: fetch file info error",Ln.t3),Ln.abrupt("return",Gn({url:Hr},Gr));case 63:if(!Kn){Ln.next=70;break}return Qn=Kn.data,To=kn[An]==="imageInfo"?Qn:(tr=Qn==null?void 0:Qn.GetVideoInfo)===null||tr===void 0?void 0:tr.VideoInfo,Eo={url:Hr,name:Gr.name,size:Gr.size,ext:Gr.ext,w:To.Width,h:To.Height,orientation:To.Orientation,dur:To.Duration,audioCodec:To.AudioCodec,videoCodec:To.VideoCodec,container:To.Container},Ln.abrupt("return",zr(Eo,function(Wr,ro){return ro!==void 0}));case 70:return Ln.abrupt("return",Gn({url:Hr},Gr));case 71:case"end":return Ln.stop()}},rr,this,[[3,9],[17,25],[32,36],[53,59]])}))},he.getNosCdnHost=function(){var $e;return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr=this;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Pr.prev=0,Pr.next=3,this.core.sendCmd("getNosCdnHost");case 3:jt=Pr.sent,Pr.next=10;break;case 6:return Pr.prev=6,Pr.t0=Pr.catch(0),this.logger.error("getNosCdnHost::error",Pr.t0),Pr.abrupt("return");case 10:if(jt){Pr.next=12;break}return Pr.abrupt("return");case 12:tr=($e=jt==null?void 0:jt.content)===null||$e===void 0?void 0:$e.nosConfigTag,(rr=Lo(tr==null?void 0:tr.expire))!==0&&tr.cdnDomain?rr===-1?(this.config.cdn.bucket=tr.bucket,this.config.cdn.cdnDomain=tr.cdnDomain,this.config.cdn.objectNamePrefix=tr.objectNamePrefix):(this.config.cdn.bucket=tr.bucket,this.config.cdn.cdnDomain=tr.cdnDomain,this.config.cdn.objectNamePrefix=tr.objectNamePrefix,this.nosCdnHostTimer=this.core.timerManager.addTimer(function(){fr.getNosCdnHost()},1e3*rr)):(this.config.cdn.bucket="",this.config.cdn.cdnDomain="",this.config.cdn.objectNamePrefix="");case 15:case"end":return Pr.stop()}},Ce,this,[[0,6]])}))},he.getGrayscaleConfig=function($e){var Ce;return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(jo.localStorage)try{jo.localStorage.getItem&&jo.localStorage.getItem(this.GRAYKEY)&&(this.grayConfig=JSON.parse(jo.localStorage.getItem(this.GRAYKEY))[$e])}catch(Pr){jo.localStorage.getItem(this.GRAYKEY)&&this.core.logger.error("uploadFile:: JSON.parse grayscaleConfig error ",Pr)}if(this.grayConfig&&!(this.grayConfig.timeStamp+1e3*this.grayConfig.ttl<new Date().getTime())){kr.next=17;break}return kr.next=4,this.core.sendCmd("getGrayscaleConfig",{config:{}});case 4:if(!(tr=kr.sent).content||!tr.content.grayConfigTag){kr.next=16;break}this.logger.log("uploadFile::getAppGrayConfigRequest success ");try{this.grayConfig=JSON.parse(tr.content.grayConfigTag.config),this.grayConfig.ttl=JSON.parse(tr.content.grayConfigTag.ttl)}catch(Pr){this.logger.error("getGrayscaleConfig error",Pr)}if(this.grayConfig){kr.next=10;break}return kr.abrupt("return");case 10:rr=jo.localStorage.getItem(this.GRAYKEY)?JSON.parse(jo.localStorage.getItem(this.GRAYKEY)):{},this.grayConfig.timeStamp=new Date().getTime(),rr[$e]=this.grayConfig,jo.localStorage.setItem(this.GRAYKEY,ha(rr)),kr.next=17;break;case 16:this.logger.debug("uploadFile:: result grayConfig:",tr.content);case 17:if(!(!((Ce=this.grayConfig)===null||Ce===void 0)&&Ce.mixStoreEnable)){kr.next=20;break}return kr.next=20,this._getMixStorePolicy($e);case 20:case"end":return kr.stop()}},jt,this)}))},he._getMixStorePolicy=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr,Pr,Rr;return Kr.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:if(jt=new Date().getTime(),jo.localStorage)try{this.mixStorePolicy=JSON.parse(jo.localStorage.getItem(this.MIXSTOREKEY))[$e],this.curProvider=Lo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.timeStamp&&this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl>jt&&(rr=this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl-jt,this.core.timerManager.addTimer(oa(tr=this._getMixStorePolicy).call(tr,this,$e),rr))}catch(Gr){jo.localStorage.getItem(this.MIXSTOREKEY)&&JSON.parse(jo.localStorage.getItem(this.MIXSTOREKEY))[$e]&&this.core.logger.error("uploadFile:: JSON.parse mixStorePolicy error ",Gr)}if(this.mixStorePolicy&&!(this.mixStorePolicy.timeStamp+1e3*this.mixStorePolicy.ttl<=jt)){Hr.next=30;break}return Hr.prev=3,Hr.next=6,this.core.sendCmd("getMixStorePolicy",{supportType:this.s3?[1,2]:[1]});case 6:kr=Hr.sent,Pr=kr.content.mixStorePolicyTag,this.mixStorePolicy={providers:[],timeStamp:0,ttl:0,s3Policy:null,nosPolicy:null},this.mixStorePolicy.ttl=Number(Pr.ttl),this.mixStorePolicy.providers=Pr.providers.split(","),this.circuitTimer&&this.core.timerManager.deleteTimer(this.circuitTimer),this.curProvider=Lo(this.mixStorePolicy.providers[0]),this.mixStorePolicy.nosPolicy=Pr.nosPolicy?JSON.parse(Pr.nosPolicy):null,this.mixStorePolicy.s3Policy=Pr.s3Policy?JSON.parse(Pr.s3Policy):null,this.mixStorePolicy.s3Policy===null?this.mixStorePolicy.providers=["1"]:this.mixStorePolicy.nosPolicy===null?this.mixStorePolicy.providers=["2"]:this.mixStorePolicy.providers=this.mixStorePolicy.s3Policy.priority<this.mixStorePolicy.nosPolicy.priority?["2","1"]:["1","2"],this.core.timerManager.addTimer(oa(fr=this._getMixStorePolicy).call(fr,this,$e),1e3*this.mixStorePolicy.ttl),Rr=jo.localStorage.getItem(this.MIXSTOREKEY)?JSON.parse(jo.localStorage.getItem(this.MIXSTOREKEY)):{},this.mixStorePolicy.timeStamp=new Date().getTime(),Rr[$e]=this.mixStorePolicy,jo.localStorage.setItem(this.MIXSTOREKEY,ha(Rr)),Hr.next=30;break;case 23:if(Hr.prev=23,Hr.t0=Hr.catch(3),this.logger.error("getMixStorePolicy error",Hr.t0),this.mixStoreErrorCount!==0){Hr.next=28;break}throw new Error("getMixStorePolicy all count error");case 28:this._getMixStorePolicy($e),this.mixStoreErrorCount--;case 30:this.mixStorePolicy.nosPolicy&&(this.nosErrorCount=this.mixStorePolicy.nosPolicy.uploadConfig.retryPolicy.retry);case 31:case"end":return Hr.stop()}},Ce,this,[[3,23]])}))},he.s3Upload=function($e,Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr,Rr,$r,Hr,Gr,bn,Sn=this;return Kr.wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:if(!$e.file){kn.next=4;break}tr=$e.file,kn.next=19;break;case 4:if(typeof $e.fileInput!="string"){kn.next=14;break}if(this.logger.warn("fileInput will abandon,Please use file or filepath"),!((rr=document.getElementById($e.fileInput))&&rr.files&&rr.files[0])){kn.next=11;break}tr=rr.files[0],kn.next=12;break;case 11:throw new Error("Can not get file from fileInput");case 12:kn.next=19;break;case 14:if(!($e.fileInput&&$e.fileInput.files&&$e.fileInput.files[0])){kn.next=18;break}tr=$e.fileInput.files[0],kn.next=19;break;case 18:throw new Error("Can not get file from fileInput "+$e.fileInput);case 19:if(this.mixStorePolicy.s3Policy){kn.next=21;break}throw new Error("dont get s3 policy");case 21:return fr={accessKeyId:Ce.accessKeyId,secretAccessKey:Ce.secretAccessKey,sessionToken:Ce.sessionToken,region:Ce.region,maxRetries:this.mixStorePolicy.s3Policy.uploadConfig.retryPolicy.retry},kr=this.s3,(Pr=new kr).config.update(fr),Rr=decodeURIComponent(Ce.bucket),$r=decodeURIComponent(Ce.objectName),Gr={Bucket:Rr,Key:$r,Body:Hr=tr,Metadata:{token:Ce.token},ContentType:Hr.type||"application/octet-stream"},this.core.logger.debug("uploadFile:: s3 upload params:",Gr),(bn=Pr.upload(Gr)).on("httpUploadProgress",function(Kn){var Qn=Bo((Kn.loaded/Kn.total).toFixed(2));$e.onUploadProgress&&$e.onUploadProgress({total:Kn.total,loaded:Kn.loaded,percentage:Qn,percentageText:Math.round(100*Qn)+"%"})}),kn.abrupt("return",new Ca(function(Kn,Qn){var To=new Date().getTime();bn.send(function(Eo,Ko){var Ln;if(Eo&&Eo.code==="RequestAbortedError")Sn.logger.error("uploadFile:","api::s3:upload file abort",Eo),Qn(new Wi(Eo.message,Eo,10499));else if(Eo){Sn.logger.error("uploadFile:","api::s3:upload file failed",Eo),Sn.core.reporter.reportTraceStart("exceptions",{user_id:Sn.core.options.account,trace_id:(Ln=Sn.core.clientSocket.socket)===null||Ln===void 0?void 0:Ln.sessionId,start_time:To,action:1,exception_service:4}),Sn.core.reporter.reportTraceUpdateV2("exceptions",{code:typeof Eo.status=="number"?Eo.status:typeof Eo.code=="number"?Eo.code:0,description:Eo.message||""+Eo.code,operation_type:1,target:ha({bucket:Rr,object:$r})},{asyncParams:jo.net.getNetworkStatus()}),Sn.core.reporter.reportTraceEnd("exceptions",1);try{Sn._addCircuitTimer()}catch(ro){Qn(new Uu("upload file error",ro,Sn.curProvider,Sn.mixStorePolicy,$e.file||$e.filePath))}Kn(Sn._uploadFile($e))}else{var Wr=Sn.mixStorePolicy.s3Policy.cdnSchema;Wr=(Wr=Wr.replace("{cdnDomain}",Sn.mixStorePolicy.s3Policy.dlcdn)).replace("{objectName}",Ko.Key),Kn({size:Hr.size,name:Hr.name,url:Ce.shortUrl?Ce.shortUrl:Wr,ext:Hr.name.split(".")[1]||"unknown"})}}),$e.onUploadStart&&$e.onUploadStart(bn)}));case 33:case"end":return kn.stop()}},jt,this)}))},he.getPrivateUrl=function($e){var Ce;if(!new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test($e))return this.logger.error("illegal file url:"+$e),"";var jt=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec($e);jt[0];var tr=jt[1];jt[2];var rr=jt[3];jt[4];var fr=jt[5];if(jt[6],jt[7],(Ce=this.grayConfig)===null||Ce===void 0?void 0:Ce.mixStoreEnable){var kr=this._getUrlType($e);return kr===Do.s3&&this.mixStorePolicy.s3Policy&&($e=this.mixStorePolicy.s3Policy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.s3Policy.dlcdn).replace("{objectName}",fr)),kr===Do.nos&&this.mixStorePolicy.nosPolicy&&($e=this.mixStorePolicy.nosPolicy.cdnSchema.replace("{cdnDomain}",this.mixStorePolicy.nosPolicy.dlcdn).replace("{objectName}",fr)),$e}var Pr=this.config,Rr=Pr.downloadUrl,$r=Pr.downloadHostList,Hr=Pr.nosCdnEnable,Gr=this.config.cdn.cdnDomain,bn=this.config.cdn.objectNamePrefix?decodeURIComponent(this.config.cdn.objectNamePrefix):"",Sn=decodeURIComponent(fr),An=Ka(Sn).call(Sn,bn);if(Gr&&An>-1&&Hr)return""+tr+Gr+"/"+xa(Sn).call(Sn,An);if(mi($r).call($r,rr)&&mi(fr).call(fr,"/")){var kn=Ka(fr).call(fr,"/"),Kn=fr.substring(0,kn),Qn=fr.substring(kn+1);return Rr.replace("{bucket}",Kn).replace("{object}",Qn)}var To=bs($r).call($r,function(Ko){return typeof rr=="string"&&mi(rr).call(rr,Ko)})[0],Eo=To?rr.replace(To,"").replace(/\W/g,""):null;return Eo?Rr.replace("{bucket}",Eo).replace("{object}",fr):$e},he.getOriginUrl=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("getOriginUrl",{nosSafeUrlTag:{safeUrl:$e}});case 2:return jt=rr.sent,rr.abrupt("return",jt.content.nosSafeUrlTag.originUrl);case 4:case"end":return rr.stop()}},Ce,this)}))},he.getFileToken=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr,Pr=this;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(Xn({type:{type:"number",min:2,max:3},urls:{type:"array",required:!1,itemType:"string"}},$e),jt=this.mixStorePolicy.nosPolicy?this.mixStorePolicy.nosPolicy.authPolicy.policyType:null,tr=this.mixStorePolicy.s3Policy?this.mixStorePolicy.s3Policy.authPolicy.policyType:null,jt!==String(Bn.dontNeed)||tr!==String(Bn.dontNeed)){$r.next=8;break}throw this.logger.error("don't need token"),new Error("don't need token");case 8:if($e.type!==Bn.time){$r.next=17;break}if(!(jt&&Ka(jt).call(jt,String(Bn.time))>=0||tr&&Ka(tr).call(tr,String(Bn.time))>0)){$r.next=13;break}return $r.abrupt("return",this.getFileAuthToken($e));case 13:throw this.logger.error("don't support time token "),new Error("don't support type time token ");case 15:$r.next=33;break;case 17:if($e.urls&&$e.urls.length){$r.next=20;break}throw this.logger.error("urls is required when urls token"),new Error("urls is required when urls token");case 20:if(fr=[],kr=[],yo(rr=$e.urls).call(rr,function(Hr){var Gr=Pr._getUrlType(Hr);Gr===Do.nos&&kr.push(Hr),Gr===Do.s3&&fr.push(Hr)}),(!tr||fr.length!==0&&Ka(tr).call(tr,String(Bn.urls))<0)&&(this.logger.warn("s3 url don't support url token"),fr=[]),(!jt||kr.length!==0&&Ka(jt).call(jt,String(Bn.urls))<0)&&(this.logger.warn("nos url don't support url token"),kr=[]),fr.length!==0||kr.length!==0){$r.next=30;break}throw this.logger.error("not support urls"),new Error("not support urls");case 30:if(fr.length!==0&&kr.length!==0){$r.next=33;break}return $e.urls=ha($e.urls),$r.abrupt("return",this.getFileAuthToken($e));case 33:case"end":return $r.stop()}},Ce,this)}))},he.getFileAuthToken=function($e){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt;return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,this.core.sendCmd("getFileAuthToken",{mixStoreAuthTokenReqTag:$e});case 2:return jt=rr.sent,rr.abrupt("return",jt.content.mixStoreAuthTokenResTag);case 4:case"end":return rr.stop()}},Ce,this)}))},he._getUrlType=function($e){var Ce,jt;return this.mixStorePolicy.nosPolicy&&mm(Ce=this.mixStorePolicy.nosPolicy.dlcdns).call(Ce,function(tr){return Ka($e).call($e,tr)>=0})?Do.nos:this.mixStorePolicy.s3Policy&&mm(jt=this.mixStorePolicy.s3Policy.dlcdns).call(jt,function(tr){return Ka($e).call($e,tr)>=0})?Do.s3:null},he._addCircuitTimer=function(){var $e=this,Ce=this.mixStorePolicy.providers,jt=Ce[(Ka(Ce).call(Ce,String(this.curProvider))+1)%Ce.length];if(jt===Ce[0])throw new Error("uploadFile all policy fail");var tr=Bs(this.mixStorePolicy,"s3Policy.uploadConfig.retryPolicy");if(tr&&tr.retryNext&&jt&&(this.logger.log("uploadFile:: upload policy will change,now policy:"+this.curProvider+" nextProvider:"+jt),this.curProvider=Lo(jt),this.mixStorePolicy.nosPolicy&&this.mixStorePolicy.s3Policy)){var rr=this.mixStorePolicy[this.curProvider===Do.nos?"nosPolicy":"s3Policy"].uploadConfig.retryPolicy.circuit;if(!rr||rr===0)return;this.circuitTimer=this.core.timerManager.addTimer(function(){$e.logger.log("uploadFile:: upload policy will change,now policy:"+$e.curProvider+" nextProvider:"+Lo($e.mixStorePolicy.providers[0])),$e.curProvider=Lo($e.mixStorePolicy.providers[0]),$e.core.timerManager.deleteTimer($e.circuitTimer)},1e3*rr)}},he.process=function($e){return $e.error&&!$e.error.ignore?Ca.reject($e.error):Ca.resolve($e)},_e}(),Wo=ms({none:0,normal:1,all:3}),ss=ms({normal:0,advanced:1}),$o=ms({normal:0,owner:1,manager:2}),qo={noVerify:0,needVerify:1,rejectAll:2},ka=ms(qo),Ji={needVerify:0,noVerify:1},Yo=ms(Ji),Ni={manager:0,all:1},ps=ms(Ni),xo={manager:0,all:1},wa=ms(xo),fo={manager:0,all:1},sa=ms(fo);function cs(_e){var he,Ue=["teamId"],$e=["level","memberNum","memberUpdateTime","createTime","updateTime"],Ce=["valid","validToCurrentUser","mute"],jt={type:ss,muteType:Wo,joinMode:ka,beInviteMode:Yo,inviteMode:ps,updateTeamMode:wa,updateExtMode:sa};_e.bits;var tr=ta(_e,["bits"]);return yo(Ue).call(Ue,function(rr){tr[rr]&&(tr[rr]=tr[rr].toString())}),yo($e).call($e,function(rr){tr[rr]!==void 0&&(tr[rr]=Lo(tr[rr]))}),yo(Ce).call(Ce,function(rr){tr[rr]!==void 0&&(tr[rr]=Lo(tr[rr])===1)}),yo(he=fa(jt)).call(he,function(rr){tr[rr]!==void 0&&(tr[rr]=jt[rr][tr[rr]]||tr[rr])}),tr}function ho(_e){return _e&&_e.length>0?Oo(_e).call(_e,function(he){return cs(he)}):[]}function w1(_e){var he,Ue=Gn({},_e),$e=["avatar","name","intro","announcement","ext"],Ce={joinMode:qo,beInviteMode:Ji,inviteMode:Ni,updateTeamMode:xo,updateExtMode:fo};return yo($e).call($e,function(jt){Ue[jt]!==void 0&&(Ue[jt]=Ue[jt].toString())}),yo(he=fa(Ce)).call(he,function(jt){Ue[jt]!==void 0&&(Ue[jt]=Ce[jt][Ue[jt]])}),Ue}function Jv(_e){var he=["teamId","ext","account","nickInTeam"],Ue={};return _e.bitConfigMask!==void 0&&(Ue.bits=Lo(_e.bitConfigMask)),yo(he).call(he,function($e){_e[$e]&&(Ue[$e]=_e[$e].toString())}),Object.prototype.hasOwnProperty.call(_e,"nickInTeam")&&(Ue.nickInTeam=_e.nickInTeam),Ue}function hs(_e){var he,Ue=["teamId"],$e=["joinTime","updateTime","bitConfigMask"],Ce=["active","valid","mute"],jt={type:$o},tr=_e.bits,rr=ta(_e,["bits"]);return tr!==void 0&&(rr.muteTeam=Lo(tr)===1,rr.bitConfigMask=tr),rr.id=rr.teamId+"-"+rr.account,yo(Ue).call(Ue,function(fr){rr[fr]&&(rr[fr]=rr[fr].toString())}),yo($e).call($e,function(fr){rr[fr]!==void 0&&(rr[fr]=Lo(rr[fr]))}),yo(Ce).call(Ce,function(fr){rr[fr]!==void 0&&(rr[fr]=Lo(rr[fr])===1)}),yo(he=fa(jt)).call(he,function(fr){rr[fr]!==void 0&&(rr[fr]=jt[fr][rr[fr]]||rr[fr])}),rr}function $s(_e){return _e&&_e.length>0?Oo(_e).call(_e,function(he){return hs(he)}):[]}function Ja(_e,he,Ue){return Ue===void 0&&(Ue="normal"),{id:_e.teamId+"-"+he,teamId:_e.teamId,account:he,type:Ue,nickInTeam:"",muteTeam:!1,mute:!1,joinTime:_e.memberUpdateTime,updateTime:_e.memberUpdateTime,active:!0,valid:!0}}function Oa(_e,he,Ue){return Ue===void 0&&(Ue="normal"),he&&he.length>0?Oo(he).call(he,function($e){return Ja(_e,$e,Ue)}):[]}var za=function(){function _e(Ue){this.core=Ue}var he=_e.prototype;return he.notifyAddSuperTeamMembers=function($e,Ce){this.core.emit("addSuperTeamMembers",{team:$e,accounts:Ce,members:Oa($e,Ce)})},he.notifyUpdateSuperTeamManagers=function($e,Ce,jt,tr){this.core.emit("updateSuperTeamManagers",{team:{teamId:$e,memberUpdateTime:tr},accounts:Ce,isManager:jt,members:Oo(Ce).call(Ce,function(rr){return{id:$e+"-"+rr,type:jt?"manager":"normal",account:rr,updateTime:tr}})})},he.notifyRemoveSuperTeamMembers=function($e,Ce){this.core.emit("removeSuperTeamMembers",{team:$e,accounts:Ce})},he.notifyTransferSuperTeam=function($e,Ce,jt){this.core.emit("transferSuperTeam",{team:$e,from:{id:$e.teamId+"-"+Ce,account:Ce,type:"normal",updateTime:$e.memberUpdateTime},to:{id:$e.teamId+"-"+jt,account:jt,type:"owner",updateTime:$e.memberUpdateTime}})},he.notifyUpdateSuperTeamMembersMute=function($e,Ce,jt){this.core.emit("updateSuperTeamMembersMute",{team:$e,accounts:Ce,members:Oo(Ce).call(Ce,function(tr){return{id:$e.teamId+"-"+tr,account:tr,teamId:$e.teamId,mute:jt,updateTime:$e.memberUpdateTime}}),mute:jt})},_e}(),Dp={"21_5":"addSuperTeamMembers","21_6":"removeSuperTeamMembers","21_7":"leaveSuperTeam","21_8":"updateSuperTeamInfo","21_9":"getSuperTeamInfo","21_12":"getSuperTeams","21_15":"getSuperTeamMembers","21_10":"updateMySuperTeamMemberInfo","21_20":"applySuperTeam","21_21":"passSuperTeamApply","21_22":"rejectSuperTeamApply","21_23":"acceptSuperTeamInvite","21_24":"rejectSuperTeamInvite","21_26":"addSuperTeamManagers","21_27":"removeSuperTeamManagers","21_28":"muteSuperTeam","21_29":"muteSuperTeamMembers","21_30":"updateSuperTeamMemberNick","21_31":"transferSuperTeam","21_33":"getSuperTeamMembersByAccounts","21_34":"queryMuteSuperTeamMembers","21_101":"syncCreateSuperTeam","21_109":"syncSuperTeams","21_110":"syncUpdateSuperTeamMember","21_111":"syncMySuperTeamMembers"},Yv={superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,ext:18,serverExt:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateExtMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,updateTime:11,ext:12,mute:13,invitorAccid:14,joinTime:15}},ks=Ws(Yv),Xv={getSuperTeamInfo:{sid:21,cid:9,service:"superTeam",params:[{type:"Long",name:"teamId"}],response:[{type:"Property",name:"superTeam",reflectMapper:ks.superTeam}]},getSuperTeams:{sid:21,cid:12,service:"superTeam",params:[{type:"long",name:"timetag"}],response:[{type:"PropertyArray",name:"superTeams",reflectMapper:ks.superTeam},{type:"Number",name:"timetag"}]},updateSuperTeamInfo:{sid:21,cid:8,service:"superTeam",params:[{type:"Property",name:"superTeam",reflectMapper:Yv.superTeam}],response:[{type:"Number",name:"time"}]},addSuperTeamMembers:{sid:21,cid:5,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}],response:[{type:"StrArray",name:"abortedAccidList"},{type:"Long",name:"time"}]},removeSuperTeamMembers:{sid:21,cid:6,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},addSuperTeamManagers:{sid:21,cid:26,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:21,cid:27,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"}]},applySuperTeam:{sid:21,cid:20,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"ps"}],response:[{type:"Property",name:"superTeam",reflectMapper:ks.superTeam}]},transferSuperTeam:{sid:21,cid:31,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},muteSuperTeam:{sid:21,cid:28,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Int",name:"mute"}]},muteSuperTeamMembers:{sid:21,cid:29,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"Int",name:"mute"}]},updateSuperTeamMemberNick:{sid:21,cid:30,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Yv.superTeamMember}]},updateMySuperTeamMemberInfo:{sid:21,cid:10,service:"superTeam",params:[{type:"Property",name:"teamMember",reflectMapper:Yv.superTeamMember}]},getSuperTeamMembersByAccounts:{sid:21,cid:33,service:"superTeam",params:[{type:"StrArray",name:"memberIds"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:ks.superTeamMember}]},getSuperTeamMembers:{sid:21,cid:15,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:ks.superTeamMember}]},queryMuteSuperTeamMembers:{sid:21,cid:34,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"Long",name:"joinTime"},{type:"Int",name:"limit"},{type:"Bool",name:"reverse"}],response:[{type:"PropertyArray",name:"superTeamMembers",reflectMapper:ks.superTeamMember}]},leaveSuperTeam:{sid:21,cid:7,service:"superTeam",params:[{type:"Long",name:"teamId"}]},passSuperTeamApply:{sid:21,cid:21,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:21,cid:22,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:21,cid:23,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:21,cid:24,service:"superTeam",params:[{type:"Long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},syncSuperTeams:{sid:21,cid:109,service:"superTeam",response:[{type:"PropertyArray",name:"teams",reflectMapper:ks.superTeam},{type:"Bool",name:"isAll"},{type:"Long",name:"timetag"}]},syncCreateSuperTeam:{sid:21,cid:101,service:"superTeam",response:[{type:"Property",name:"superTeam",reflectMapper:ks.superTeam}]},syncUpdateSuperTeamMember:{sid:21,cid:110,service:"superTeam",response:[{type:"Property",name:"teamMember",reflectMapper:ks.superTeamMember}]},syncMySuperTeamMembers:{sid:21,cid:111,ext:"sync",service:"superTeam",response:[{type:"PropertyArray",name:"teamMembers",reflectMapper:ks.superTeamMember},{type:"Number",name:"timetag"}]}},Zv=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"superTeam",$e)||this).mySuperTeamMembersMap=new xc,Ce.service=new za($e),Ss({cmdMap:Dp,cmdConfig:Xv}),Ce.core.eventBus.on("team/onNotification",function(jt){return Ce.notificationHandler(jt)}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.destroy=function(){this.mySuperTeamMembersMap.clear()},Ue.mergeMySuperTeamMembers=function(Ce){var jt=this;yo(Ce).call(Ce,function(tr){var rr=tr.teamId,fr=jt.mySuperTeamMembersMap.get(rr),kr=Gn({},fr,tr);jt.mySuperTeamMembersMap.set(rr,kr)})},Ue.getSuperTeamInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),kr.next=3,this.core.sendCmd("getSuperTeamInfo",{teamId:Ce.teamId});case 3:return tr=kr.sent,rr=tr.content.superTeam,kr.abrupt("return",cs(rr));case 6:case"end":return kr.stop()}},jt,this)}))},Ue.getSuperTeams=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,this.core.sendCmd("getSuperTeams",{timetag:0});case 2:return jt=fr.sent,tr=jt.content.superTeams,fr.abrupt("return",ho(tr));case 5:case"end":return fr.stop()}},Ce,this)}))},Ue.updateSuperTeamInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},name:{type:"string",allowEmpty:!1,required:!1},joinMode:{type:"enum",values:["noVerify","needVerify","rejectAll"],required:!1},beInviteMode:{type:"enum",values:["noVerify","needVerify"],required:!1},inviteMode:{type:"enum",values:["manager","all"],required:!1},updateTeamMode:{type:"enum",values:["manager","all"],required:!1},updateExtMode:{type:"enum",values:["manager","all"],required:!1},intro:{type:"string",allowEmpty:!0,required:!1},announcement:{type:"string",allowEmpty:!0,required:!1},avatar:{type:"string",allowEmpty:!0,required:!1},ext:{type:"string",allowEmpty:!0,required:!1}},Ce),tr=w1(Ce),fr.next=4,this.core.sendCmd("updateSuperTeamInfo",{superTeam:tr});case 4:return fr.abrupt("return",cs(tr));case 5:case"end":return fr.stop()}},jt,this)}))},Ue.addSuperTeamMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("addSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,ps:Ce.ps||"",attach:Ce.ext||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.removeSuperTeamMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",min:1}},Ce),rr.next=3,this.core.sendCmd("removeSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.addSuperTeamManagers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("addSuperTeamManagers",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.removeSuperTeamManagers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",min:1,itemType:"string"}},Ce),rr.next=3,this.core.sendCmd("removeSuperTeamManagers",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.applySuperTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},ps:{type:"string",allowEmpty:!0,max:5e3,required:!1}},Ce),fr.next=3,this.core.sendCmd("applySuperTeam",{teamId:Ce.teamId,ps:Ce.ps||""});case 3:return tr=fr.sent,fr.abrupt("return",cs(tr.content.superTeam));case 5:case"end":return fr.stop()}},jt,this)}))},Ue.transferSuperTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},leave:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("transferSuperTeam",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.muteSuperTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteSuperTeam",{teamId:Ce.teamId,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.muteSuperTeamMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string"},mute:{type:"boolean"}},Ce),rr.next=3,this.core.sendCmd("muteSuperTeamMembers",{teamId:Ce.teamId,accounts:Ce.accounts,mute:Ce.mute?1:0});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.updateMemberNick=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},account:{type:"string",allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0}},Ce),tr=Jv({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,account:Ce.account}),kr.next=4,this.core.sendCmd("updateSuperTeamMemberNick",{teamMember:tr});case 4:return rr=hs(Gn({updateTime:new Date().getTime()},tr)),kr.abrupt("return",rr);case 6:case"end":return kr.stop()}},jt,this)}))},Ue.updateMyMemberInfo=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},nickInTeam:{type:"string",allowEmpty:!0,required:!1},bitConfigMask:{type:"number",min:0,max:2,required:!1},ext:{type:"string",required:!1}},Ce),tr=Jv({teamId:Ce.teamId,nickInTeam:Ce.nickInTeam,bitConfigMask:Ce.bitConfigMask,ext:Ce.ext}),Pr.next=4,this.core.sendCmd("updateMySuperTeamMemberInfo",{teamMember:tr});case 4:return rr=hs(Gn({updateTime:new Date().getTime(),account:this.core.account},tr)),this.mergeMySuperTeamMembers([rr]),this.core.emit("updateSuperTeamMember",rr),fr=Lc(this.mySuperTeamMembersMap.get(rr.teamId)),this.core.emit("mySuperTeamMembers",[fr]),Pr.abrupt("return",rr);case 10:case"end":return Pr.stop()}},jt,this)}))},Ue.getSuperTeamMembersByAccounts=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},accounts:{type:"array",itemType:"string",max:20,min:1}},Ce),fr=Oo(rr=Ce.accounts).call(rr,function($r){return Ce.teamId+"|"+$r}),Rr.next=4,this.core.sendCmd("getSuperTeamMembersByAccounts",{memberIds:fr});case 4:return kr=Rr.sent,Rr.abrupt("return",$s((jt=kr.content)===null||jt===void 0?void 0:jt.superTeamMembers));case 6:case"end":return Rr.stop()}},tr,this)}))},Ue.getSuperTeamMembers=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,max:1e3,required:!1},reverse:{type:"boolean",required:!1}},Ce),kr.next=3,this.core.sendCmd("getSuperTeamMembers",Gn({joinTime:0,limit:100,reverse:!1},Ce));case 3:return rr=kr.sent,kr.abrupt("return",$s((jt=rr.content)===null||jt===void 0?void 0:jt.superTeamMembers));case 5:case"end":return kr.stop()}},tr,this)}))},Ue.queryMuteMembers=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},joinTime:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},reverse:{type:"boolean",required:!1}},Ce),kr.next=3,this.core.sendCmd("queryMuteSuperTeamMembers",Gn({limit:100,joinTime:0,reverse:!1},Ce));case 3:return tr=kr.sent,rr=tr.content,kr.abrupt("return",$s(rr.superTeamMembers));case 6:case"end":return kr.stop()}},jt,this)}))},Ue.leaveSuperTeam=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("leaveSuperTeam",{teamId:Ce.teamId});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.passSuperTeamApply=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("passSuperTeamApply",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.rejectSuperTeamApply=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectSuperTeamApply",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.acceptSuperTeamInvite=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1}},Ce),rr.next=3,this.core.sendCmd("acceptSuperTeamInvite",Ce);case 3:case"end":return rr.stop()}},jt,this)}))},Ue.rejectSuperTeamInvite=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({teamId:{type:"string",regExp:/\d+/,allowEmpty:!1},from:{type:"string",allowEmpty:!1},ps:{type:"string",max:5e3,required:!1}},Ce),rr.next=3,this.core.sendCmd("rejectSuperTeamInvite",{teamId:Ce.teamId,from:Ce.from,ps:Ce.ps||""});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.syncSuperTeamsHandler=function(Ce){var jt=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{superTeams:Lo(jt.timetag)});var tr=jt==null?void 0:jt.superTeams;if(tr&&tr.length){var rr=ho(tr);this.core.emit("superTeams",rr)}},Ue.syncCreateSuperTeamHandler=function(Ce){var jt=Ce.content,tr=cs(jt==null?void 0:jt.superTeam),rr=Ja(tr,tr.owner,"owner");this.core.emit("createSuperTeam",tr,rr)},Ue.syncUpdateSuperTeamMemberHandler=function(Ce){var jt=Ce.content,tr=hs(jt==null?void 0:jt.teamMember);tr.updateTime||(tr.updateTime=new Date().getTime()),this.mergeMySuperTeamMembers([tr]),this.core.emit("updateSuperTeamMember",tr);var rr=Lc(this.mySuperTeamMembersMap.get(tr.teamId));this.core.emit("mySuperTeamMembers",[rr])},Ue.syncMySuperTeamMembersHandler=function(Ce){var jt,tr=Ce.content;this.core.eventBus.emit("sync/updateTimetag",{mySuperTeamMembers:Lo(tr.timetag)});var rr=tr==null?void 0:Oo(jt=tr.teamMembers).call(jt,function(fr){return hs(fr)});this.mergeMySuperTeamMembers(rr),this.core.emit("mySuperTeamMembers",Lc(rr))},Ue.notificationHandler=function(Ce){var jt=Ce.attach,tr=Ce.scene,rr=Ce.from,fr=Ce.to,kr=Ce.time,Pr=Ce.idServer,Rr=Ce.idClient,$r=jt.team,Hr=jt.account,Gr=jt.accounts,bn=jt.type;if(tr==="superTeam")switch(this.core.options.debugLevel==="debug"?this.logger.debug("superTeam::recvNotification",Pr,Rr,jt):this.logger.log("superTeam::recvNotification",Pr,Rr,fr,bn,Hr,Gr),bn){case"updateSuperTeam":$r.updateTime=kr,this.core.emit("updateSuperTeam",$r);break;case"addSuperTeamMembers":this.service.notifyAddSuperTeamMembers($r,Gr);break;case"acceptSuperTeamInvite":this.service.notifyAddSuperTeamMembers($r,[rr]);break;case"passSuperTeamApply":this.service.notifyAddSuperTeamMembers($r,[Hr]);break;case"addSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(fr,Gr,!0,kr);break;case"removeSuperTeamManagers":this.service.notifyUpdateSuperTeamManagers(fr,Gr,!1,kr);break;case"removeSuperTeamMembers":this.service.notifyRemoveSuperTeamMembers($r,Gr);break;case"leaveSuperTeam":this.service.notifyRemoveSuperTeamMembers($r,[rr]);break;case"dismissSuperTeam":this.core.emit("dismissSuperTeam",{teamId:fr});break;case"transferSuperTeam":this.service.notifyTransferSuperTeam($r,rr,Hr);break;case"updateSuperTeamMembersMute":this.service.notifyUpdateSuperTeamMembersMute($r,Gr,jt.mute)}},he}(Ls),ey={"13_1":"getChatroomAddress","24_1":"getQChatAddress"},PM={getChatroomAddress:{sid:13,cid:1,service:"plugin",params:[{type:"Long",name:"chatroomId"},{type:"Boolean",name:"isWeixinApp"},{type:"Number",name:"ipType"}],response:[{type:"StrArray",name:"address"}]},getQChatAddress:{sid:24,cid:1,service:"plugin",params:[{type:"Property",name:"getQChatAddressTag",reflectMapper:{ipType:1}}],response:[{type:"StrArray",name:"address"}]}},AM=function(_e){function he($e){var Ce;return(Ce=_e.call(this,"plugin",$e)||this).core=$e,Ss({cmdMap:ey,cmdConfig:PM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.getChatroomAddress=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({chatroomId:{type:"string",allowEmpty:!1},ipType:{type:"number",required:!1}},Ce),fr.next=3,this.core.sendCmd("getChatroomAddress",{chatroomId:Ce.chatroomId,isWeixinApp:jo.platform==="WXAPP",ipType:Ce.ipType||0});case 3:return tr=fr.sent,fr.abrupt("return",tr.content.address);case 5:case"end":return fr.stop()}},jt,this)}))},Ue.getQChatAddress=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr;return Kr.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return Xn({ipType:{type:"number",required:!1}},Ce),fr.next=3,this.core.sendCmd("getQChatAddress",{getQChatAddressTag:{ipType:(Ce==null?void 0:Ce.ipType)||0}});case 3:return tr=fr.sent,fr.abrupt("return",tr.content.address);case 5:case"end":return fr.stop()}},jt,this)}))},he}(Ls),NM={"7_19":"nimQueryCloudSessionList","7_20":"nimQueryCloudSession","7_21":"nimUpdateCloudSession","7_22":"nimDeleteCloudSessionList","7_121":"nimMultiSyncUpdateCloudSession"},ty={sessionReqTag:{minTimestamp:1,maxTimestamp:2,includedLastMsg:3,limit:4,hasMore:5},sessionTag:{sessionId:1,updateTime:2,ext:3,lastMsg:4,lastMsgType:5}},_1=Ws(ty),OM={nimQueryCloudSessionList:{sid:7,cid:19,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:ty.sessionReqTag}],response:[{type:"Property",name:"tag",reflectMapper:_1.sessionReqTag},{type:"PropertyArray",name:"sessions",reflectMapper:_1.sessionTag}]},nimQueryCloudSession:{sid:7,cid:20,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:ty.sessionTag}],response:[{type:"Property",name:"session",reflectMapper:_1.sessionTag}]},nimUpdateCloudSession:{sid:7,cid:21,service:"cloudSession",params:[{type:"Property",name:"tag",reflectMapper:ty.sessionTag}]},nimDeleteCloudSessionList:{sid:7,cid:22,service:"cloudSession",params:[{type:"PropertyArray",name:"tags",reflectMapper:ty.sessionTag}]},nimMultiSyncUpdateCloudSession:{sid:7,cid:121,service:"cloudSession",response:[{type:"Property",name:"session",reflectMapper:_1.sessionTag}]}},RM={sessionId:{type:"string"},updateTime:{type:"number"},ext:{type:"string"},lastMsg:{type:"object"},lastMsgType:{type:"number"}};function CM(_e,he,Ue){var $e=ai(RM,_e),Ce=_i($e.sessionId,"|"),jt=Ce.accid,tr=Ce.scene;if($e.sessionId=tr+"-"+jt,$e.lastMsg){var rr=$e.lastMsgType===1;$e.lastMsgInfo=rr?{isLastMsgRecalled:rr,revokedMsg:$p(il($e.lastMsg,pu.sysMsg),Ue)}:{isLastMsgRecalled:rr,lastMsg:Ei(il($e.lastMsg,Ms.msg),{account:he})}}return delete $e.lastMsg,delete $e.lastMsgType,$e}function BM(_e,he,Ue){return _e&&_e.length>0?Oo(_e).call(_e,function($e){return CM($e,he,Ue)}):[]}var xM,_l,ry,LM=function(_e){function he($e){var Ce;return Ce=_e.call(this,"cloudSession",$e)||this,Ss({cmdMap:NM,cmdConfig:OM}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.queryCloudSessionList=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({minTimestamp:{type:"number",min:0,required:!1},maxTimestamp:{type:"number",min:0,required:!1},limit:{type:"number",min:1,required:!1},includedLastMsg:{type:"boolean",required:!1}},Ce),(rr=Gn({limit:100,includedLastMsg:!0},Ce)).includedLastMsg=Qb.boolean(Ce,"includedLastMsg"),$r.next=5,this.core.sendCmd("nimQueryCloudSessionList",{tag:rr});case 5:return fr=$r.sent,kr=((jt=fr.content)===null||jt===void 0?void 0:jt.tag)||{},Pr=fr.content.sessions,$r.abrupt("return",{hasMore:+kr.hasMore>0,sessionList:BM(Pr,this.core.account,this.logger)});case 9:case"end":return $r.stop()}},tr,this)}))},Ue.queryCloudSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Xn({sessionId:{type:"string",allowEmpty:!1}},Ce),tr=_i(Ce.sessionId,"-"),rr=tr.accid,fr=tr.scene,Rr.next=4,this.core.sendCmd("nimQueryCloudSession",{tag:{sessionId:fr==="superTeam"?"super_team|"+rr:fr+"|"+rr}});case 4:return kr=Rr.sent,Rr.abrupt("return",CM(kr.content.session,this.core.account,this.logger));case 6:case"end":return Rr.stop()}},jt,this)}))},Ue.updateCloudSession=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({sessionId:{type:"string",allowEmpty:!1},ext:{type:"string",allowEmpty:!1,required:!1}},Ce),tr=_i(Ce.sessionId,"-"),rr=tr.accid,fr=tr.scene,Pr.next=4,this.core.sendCmd("nimUpdateCloudSession",{tag:{sessionId:fr==="superTeam"?"super_team|"+rr:fr+"|"+rr,ext:Ce.ext}});case 4:case"end":return Pr.stop()}},jt,this)}))},Ue.deleteCloudSessionList=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({sessionIdList:{type:"array",itemType:"string"}},Ce),rr=Oo(tr=Ce.sessionIdList).call(tr,function(Pr){var Rr=_i(Pr,"-"),$r=Rr.accid,Hr=Rr.scene;return{sessionId:Hr==="superTeam"?"super_team|"+$r:Hr+"|"+$r}}),kr.next=4,this.core.sendCmd("nimDeleteCloudSessionList",{tags:rr});case 4:case"end":return kr.stop()}},jt,this)}))},Ue.nimMultiSyncUpdateCloudSessionHandler=function(Ce){var jt=CM(Ce.content.session,this.core.account,this.logger);this.core.emit("multiSyncUpdateCloudSession",jt)},he}(Ls);(function(_e){_e[_e.audio=1]="audio",_e[_e.video=2]="video",_e[_e.custom=3]="custom"})(xM||(xM={})),function(_e){_e[_e.kClose=1]="kClose",_e[_e.kJoin=2]="kJoin",_e[_e.kInvite=3]="kInvite",_e[_e.kCancelInvite=4]="kCancelInvite",_e[_e.kReject=5]="kReject",_e[_e.kAccept=6]="kAccept",_e[_e.kLeave=7]="kLeave",_e[_e.kCustom=8]="kCustom"}(_l||(_l={})),function(_e){_e[_e.kDefault=0]="kDefault",_e[_e.kLeave=1]="kLeave",_e[_e.kSelfSync=3]="kSelfSync"}(ry||(ry={}));var MM={needPush:{type:"boolean",required:!1},pushTitle:{type:"string",required:!1},pushContent:{type:"string",required:!1},pushPayload:{type:"string",required:!1},needPushBadge:{type:"boolean",required:!1}},FM={"15_1":"signalingCreate","15_2":"signalingDelay","15_3":"signalingClose","15_4":"signalingJoin","15_5":"signalingLeave","15_6":"signalingInvite","15_7":"signalingCancelInvite","15_8":"signalingReject","15_9":"signalingAccept","15_10":"signalingSendCustomCommand","15_11":"signalingRecvNotification","15_12":"signalingMultiSyncNotification","15_13":"signalingSyncNotification","15_14":"singalingSyncChannels","15_15":"signalingQueryInfo","15_16":"signalingCallEx","15_17":"signalingJoinAndAccept"},Oi={avSignalTag:Gn({type:1,name:2,channelId:3,createTime:4,expireTime:5,creatorAccid:6,ext:7,invalid:8,fromAccid:10,toAccid:11,requestId:12,members:18,attach:19,attachExt:20,needOffline:21,msgId:22,uid:23,time:24,nertcChannelName:25,nertcTokenTtl:26,nertcToken:27,nertcJoinRoomQueryParamMap:28,nertcJoinRoomResponse:29,callStatus:30},{needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needPushBadge:17})},Fc=Ws(Oi),$M={signalingCreate:{sid:15,cid:1,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingDelay:{sid:15,cid:2,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingClose:{sid:15,cid:3,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingJoin:{sid:15,cid:4,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingLeave:{sid:15,cid:5,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}]},signalingInvite:{sid:15,cid:6,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}]},signalingCancelInvite:{sid:15,cid:7,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}]},signalingReject:{sid:15,cid:8,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}]},signalingAccept:{sid:15,cid:9,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}]},signalingSendCustomCommand:{sid:15,cid:10,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}]},signalingRecvNotification:{sid:15,cid:11,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingMultiSyncNotification:{sid:15,cid:12,service:"signaling",response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingSyncNotification:{sid:15,cid:13,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:Fc.avSignalTag}]},singalingSyncChannels:{sid:15,cid:14,service:"signaling",response:[{type:"PropertyArray",name:"datas",reflectMapper:Fc.avSignalTag}]},signalingQueryInfo:{sid:15,cid:15,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingCallEx:{sid:15,cid:16,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingJoinAndAccept:{sid:15,cid:17,service:"signaling",params:[{type:"Property",name:"tag",reflectMapper:Oi.avSignalTag}],response:[{type:"Property",name:"data",reflectMapper:Fc.avSignalTag}]},signalingBatchMarkRead:{sid:4,cid:5,hasPacketResponse:!1,service:"signaling",params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]}},x1={type:{type:"number"},createTime:{type:"number"},expireTime:{type:"number"},invalid:{type:"boolean"},pushInfo:MM,pluginSetting:{nertcInfo:{nertcChannelName:{type:"string"},nertcTokenTtl:{type:"number"},nertcToken:{type:"string"},nertcJoinRoomQueryParamMap:{type:"string"},callStatus:{type:"number"}}},attach:{type:"object"},members:{type:"object"},needOffline:{type:"boolean"},uid:{type:"number"},time:{type:"number"}};function Up(_e){var he,Ue=ai(x1,_e),$e=[];return Ue.members&&Ue.members.length>0&&($e=Oo(he=Ue.members).call(he,function(Ce){return function(tr){return ai(x1,il(tr,{1:"accid",2:"uid",3:"createTime",4:"expireTime"}))}(Ce)}),delete Ue.members),$e.length>0?{channelInfo:Ue,memberList:$e}:{channelInfo:Ue}}function $c(_e){return om(x1,_e)}var jM=function(_e){function he($e){var Ce;return(Ce=_e.call(this)||this).timer=0,Ce.pollingInterval=12e4,Ce.name="signaling",Ce.logger=$e.logger,Ce.core=$e,Ce.channels={},Ss({cmdMap:FM,cmdConfig:$M}),Ce}ra(he,_e);var Ue=he.prototype;return Ue.callEx=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({type:{type:"number"},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:MM},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},Ce),$r.next=3,this.core.sendCmd("signalingCallEx",{tag:$c(Ce)});case 3:return rr=$r.sent,fr=((jt=rr.content)===null||jt===void 0?void 0:jt.data)||{},kr=Up(fr),this.channels[kr.channelInfo.channelId]=Lc(kr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(oa(Pr=this.aotoDelay).call(Pr,this),this.pollingInterval,-1)),$r.abrupt("return",kr);case 9:case"end":return $r.stop()}},tr,this)}))},Ue.joinAndAccept=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr,Rr,$r;return Kr.wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},uid:{type:"number",required:!1},pluginSetting:{type:"object",required:!1,rules:{nertcInfo:{type:"object",required:!1}}}},Ce),rr=Ce.fromAccid,(fr=ta(Ce,["fromAccid"])).toAccid=rr,Gr.next=5,this.core.sendCmd("signalingJoinAndAccept",{tag:$c(fr)});case 5:return kr=Gr.sent,Pr=((jt=kr.content)===null||jt===void 0?void 0:jt.data)||{},Rr=Up(Pr),this.channels[Rr.channelInfo.channelId]=Lc(Rr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(oa($r=this.aotoDelay).call($r,this),this.pollingInterval,-1)),Gr.abrupt("return",Rr);case 11:case"end":return Gr.stop()}},tr,this)}))},Ue.create=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({type:{type:"number"},ext:{type:"string",required:!1}},Ce),Pr.next=3,this.core.sendCmd("signalingCreate",{tag:$c(Ce)});case 3:return rr=Pr.sent,fr=((jt=rr.content)===null||jt===void 0?void 0:jt.data)||{},Pr.abrupt("return",Up(fr));case 6:case"end":return Pr.stop()}},tr,this)}))},Ue.close=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingClose",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.queryInfo=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr;return Kr.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Xn({name:{type:"string",allowEmpty:!1}},Ce),Pr.next=3,this.core.sendCmd("signalingQueryInfo",{tag:Ce});case 3:return rr=Pr.sent,fr=((jt=rr.content)===null||jt===void 0?void 0:jt.data)||{},Pr.abrupt("return",Up(fr));case 6:case"end":return Pr.stop()}},tr,this)}))},Ue.join=function(Ce){var jt;return qn(this,void 0,void 0,Kr.mark(function tr(){var rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},uid:{type:"number",min:0,required:!1},needOffline:{type:"boolean",required:!1}},Ce),$r.next=3,this.core.sendCmd("signalingJoin",{tag:$c(Ce)});case 3:return rr=$r.sent,fr=((jt=rr.content)===null||jt===void 0?void 0:jt.data)||{},kr=Up(fr),this.channels[kr.channelInfo.channelId]=Lc(kr.channelInfo),this.timer||(this.timer=this.core.timerManager.addTimer(oa(Pr=this.aotoDelay).call(Pr,this),this.pollingInterval,-1)),$r.abrupt("return",kr);case 9:case"end":return $r.stop()}},tr,this)}))},Ue.aotoDelay=function(){return qn(this,void 0,void 0,Kr.mark(function Ce(){var jt,tr,rr,fr,kr;return Kr.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if((jt=fa(this.channels)).length!==0){Rr.next=4;break}return this.timer&&this.core.timerManager.deleteTimer(this.timer),Rr.abrupt("return");case 4:this.logger.log("signling:autoDelay",jt),tr=0;case 6:if(!(tr<jt.length)){Rr.next=23;break}return rr=jt[tr],Rr.prev=8,Rr.next=11,this.core.sendCmd("signalingDelay",{tag:{channelId:rr}});case 11:fr=Rr.sent,kr=Up(fr.content.data),this.channels[rr]=kr.channelInfo,Rr.next=20;break;case 16:Rr.prev=16,Rr.t0=Rr.catch(8),this.logger.warn("signling:autoDelay "+rr+" failed",Rr.t0),delete this.channels[rr];case 20:tr++,Rr.next=6;break;case 23:case"end":return Rr.stop()}},Ce,this,[[8,16]])}))},Ue.leave=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingLeave",{tag:$c(Ce)});case 3:delete this.channels[Ce.channelId];case 4:case"end":return rr.stop()}},jt,this)}))},Ue.invite=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},pushInfo:{type:"object",required:!1,rules:MM}},Ce),rr.next=3,this.core.sendCmd("signalingInvite",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.cancelInvite=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},toAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingCancelInvite",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.reject=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr;return Kr.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1}},Ce),tr=Ce.fromAccid,(rr=ta(Ce,["fromAccid"])).toAccid=tr,kr.next=5,this.core.sendCmd("signalingReject",{tag:$c(rr)});case 5:case"end":return kr.stop()}},jt,this)}))},Ue.accept=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){var tr,rr,fr,kr,Pr;return Kr.wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1},requestId:{type:"string",allowEmpty:!1},attachExt:{type:"string",required:!1},needOffline:{type:"boolean",required:!1},autoJoin:{type:"boolean",required:!1},uid:{type:"number",min:0,required:!1},joinAttachExt:{type:"string",required:!1}},Ce),tr=Ce.autoJoin,rr=Ce.joinAttachExt,fr=Ce.fromAccid,(kr=ta(Ce,["autoJoin","joinAttachExt","fromAccid"])).toAccid=fr,$r.next=5,this.core.sendCmd("signalingAccept",{tag:$c(kr)});case 5:if(this.logger.log("Signaling:accept, accept success, autoJoin "+Ce.autoJoin),!tr){$r.next=10;break}return Pr={channelId:Ce.channelId,needOffline:Ce.needOffline,attachExt:rr,uid:Ce.uid},$r.next=10,this.join(Pr);case 10:case"end":return $r.stop()}},jt,this)}))},Ue.sendCustomCommand=function(Ce){return qn(this,void 0,void 0,Kr.mark(function jt(){return Kr.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return Xn({channelId:{type:"string",allowEmpty:!1},fromAccid:{type:"string",allowEmpty:!1,required:!1},attachExt:{type:"string",required:!1}},Ce),rr.next=3,this.core.sendCmd("signalingSendCustomCommand",{tag:$c(Ce)});case 3:case"end":return rr.stop()}},jt,this)}))},Ue.signalingRecvNotificationHandler=function(Ce){var jt=typeof Bs(Ce,"raw.r[0]")=="number"?""+Ce.raw.r[0]:void 0;Ce.content.data.msgId=jt,this.doNotify(Ce.content.data),jt&&Lo(jt)&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:[jt]})},Ue.signalingMultiSyncNotificationHandler=function(Ce){this.doNotify(Ce.content.data,ry.kSelfSync)},Ue.doNotify=function(Ce,jt){jt===void 0&&(jt=ry.kDefault);var tr=function(Sn,An){An===void 0&&(An=ry.kDefault);var kn=ai(x1,Sn),Kn=kn.attach,Qn=kn.attachExt,To=kn.time,Eo=kn.msgId;kn.fromAccid,kn.toAccid,kn.members,kn.requestId,kn.pushInfo;var Ko=ta(kn,["attach","attachExt","time","msgId","fromAccid","toAccid","members","requestId","pushInfo"]);if(Kn.type===2)try{kn.member={accid:kn.attach.member[1],uid:Number(kn.attach.member[2]),createTime:Number(kn.attach.member[3]),expireTime:Number(kn.attach.member[4])}}catch{delete kn.member}var Ln=Kn.type;return delete kn.attach,{metaData:{eventType:Ln,channelInfo:Ko,feature:An,ext:Qn||"",time:To,msgId:Eo},rawData:kn}}(Ce,jt),rr=tr.metaData,fr=tr.rawData,kr=fr.fromAccid,Pr=fr.toAccid,Rr=fr.requestId,$r=fr.pushInfo,Hr=fr.msgId,Gr=fr.member;switch(rr.eventType){case _l.kClose:this.emit("signalingClose",{fromAccid:kr,metaData:rr});break;case _l.kJoin:this.emit("signalingJoin",{fromAccid:kr,metaData:rr,member:Gr});break;case _l.kInvite:this.emit("signalingInvite",{fromAccid:kr,toAccid:Pr,requestId:Rr,pushInfo:$r,metaData:rr});break;case _l.kCancelInvite:this.emit("signalingCancelInvite",{fromAccid:kr,toAccid:Pr,requestId:Rr,metaData:rr});break;case _l.kReject:this.emit("signalingReject",{toAccid:Pr,requestId:Rr,metaData:rr});break;case _l.kAccept:this.emit("signalingAccept",{toAccid:Pr,requestId:Rr,metaData:rr});break;case _l.kLeave:this.emit("signalingLeave",{fromAccid:kr,metaData:rr});break;case _l.kCustom:this.emit("signalingCustomCommand",{fromAccid:kr,metaData:rr});break;default:this.logger.warn("signaling:notification, no such a type "+rr.eventType,fr)}return Hr},Ue.signalingSyncNotificationHandler=function(Ce){var jt,tr,rr=this;if(Ce.content.datas&&Ce.content.datas.length>0){var fr=bs(jt=Oo(tr=Ce.content.datas).call(tr,function(kr){return rr.doNotify(kr)})).call(jt,function(kr){return kr});fr.length>0&&this.core.sendCmd("signalingBatchMarkRead",{sid:15,cid:11,ids:fr})}},Ue.singalingSyncChannelsHandler=function(Ce){var jt;if(this.timer=0,this.channels={},Ce.content.datas&&Ce.content.datas.length>0){var tr=Oo(jt=Ce.content.datas).call(jt,function(rr){return Up(rr)});this.emit("singalingSyncChannels",tr)}},Ue.process=function(Ce){var jt=this[Ce.cmd+"Handler"];return typeof jt=="function"?(jt.call(this,Ce),Ca.resolve(Ce)):Ce.error&&!Ce.error.ignore?Ca.reject(Ce.error):Ca.resolve(Ce)},he}(Sf.EventEmitter);return is.setAdapters(gs),is.registerService(lv,"auth"),is.registerService(EC,"msg"),is.registerService(_v,"misc"),is.registerService(Iv,"user"),is.registerService(oM,"session"),is.registerService(Vv,"team"),is.registerService(zv,"systemMessage"),is.registerService(SM,"friend"),is.registerService(ud,"event"),is.registerService(pe,"msgExtend"),is.registerService(Ir,"msgLog"),is.registerService(In,"passThrough"),is.registerService(la,"cloudStorage"),is.registerService(Zv,"superTeam"),is.registerService(Fo,"sync"),is.registerService(AM,"plugin"),is.registerService(LM,"cloudSession"),is.registerService(jM,"signaling"),is})})(NIM_BROWSER_SDK);var NIM_BROWSER_SDKExports=NIM_BROWSER_SDK.exports;const NIMSDK=getDefaultExportFromCjs(NIM_BROWSER_SDKExports),elBadge="",elMessage="",_hoisted_1$9=createBaseVNode("svg",{t:"1716695388000",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2741",width:"200",height:"200"},[createBaseVNode("path",{d:"M128 128h768a42.666667 42.666667 0 0 1 42.666667 42.666667v682.666666a42.666667 42.666667 0 0 1-42.666667 42.666667H128a42.666667 42.666667 0 0 1-42.666667-42.666667V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667z m42.666667 85.333333v597.333334h682.666666V213.333333z m341.333333 426.666667h256v85.333333h-256z m-142.208-128L249.088 391.338667l60.373333-60.373334L490.453333 512l-180.992 181.034667-60.373333-60.373334z","p-id":"2742",fill:"#d81e06"})],-1),_hoisted_2$4={class:"mt10"},_hoisted_3$4={style:{color:"gray","font-size":"small"}},_hoisted_4$4={class:"mt10"},_hoisted_5$3=createBaseVNode("label",null,"当前时间：",-1),_hoisted_6$2={style:{color:"gray"}},_hoisted_7$1={class:"mt10"},_hoisted_8$1=createBaseVNode("label",null,"上次启动：",-1),_hoisted_9$1={style:{color:"gray"}},_hoisted_10$1={class:"mt10"},_hoisted_11$1=createBaseVNode("label",null,"运行时长：",-1),_hoisted_12={style:{color:"gray"}},_hoisted_13=createBaseVNode("span",{title:"每分钟更新一次"},"错误日志",-1),_hoisted_14={style:{"margin-top":"-3px"}},_hoisted_15={style:{cursor:"pointer"}},_hoisted_16=["onClick"],_hoisted_17=createBaseVNode("span",{title:"每分钟更新一次"},"数据总览",-1),_hoisted_18=createBaseVNode("label",null,"日志",-1),_hoisted_19={class:"fs14"},_hoisted_20={key:0,class:"fs14"},_hoisted_21={key:1,class:"fs14"},_hoisted_22={class:"fs14"},_hoisted_23=createBaseVNode("label",null,"图片信息",-1),_hoisted_24={class:"fs14"},_hoisted_25={class:"fs14"},_hoisted_26={class:"fs14"},_hoisted_27={key:0},_hoisted_28=createBaseVNode("label",null,"插件信息",-1),_hoisted_29={class:"fs14"},_hoisted_30={class:"fs14"},_hoisted_31={class:"fs14"},_hoisted_32=createBaseVNode("span",{title:"实时更新"},"口袋消息",-1),_hoisted_33={style:{"margin-top":"-3px","margin-left":"-20px"}},_hoisted_34={style:{color:"gray","font-size":"14px"}},_hoisted_35=["onClick"],_hoisted_36={key:1},_hoisted_37={key:2},_hoisted_38=["href"],_hoisted_39=createBaseVNode("div",null,[createBaseVNode("span",null,"1、QQ机器人部署(2选1)："),createBaseVNode("div",{class:"mt5"},[createBaseVNode("a",{href:"https://llonebot.github.io/zh-CN/",target:"_blank"},"LLOneBot"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}},"：配置简单，可视化配置，占用电脑资源较高(>=300m内存)")]),createBaseVNode("div",{class:"mt5"},[createBaseVNode("a",{href:"https://napneko.github.io/zh-CN/",target:"_blank"},"NapCatBot"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}},"：非可视化配置，配置过程相对LLOneBot复杂，占用资源低( <=100m内存) ")])],-1),_hoisted_40=createBaseVNode("div",{class:"mt10"},[createBaseVNode("span",null,"2、配置项说明："),createBaseVNode("a",{href:"https://gitee.com/jaffoo/ParkerBot#配置教程",target:"_blank"},"参照此文档"),createBaseVNode("span",{style:{"font-size":"14px",color:"gray"}})],-1),_hoisted_41=createBaseVNode("div",{class:"mt10"},[createBaseVNode("span",null,"3、联系作者QQ："),createBaseVNode("span",{style:{color:"blue"}},"1615842006")],-1),_hoisted_42={style:{"margin-top":"-3px","margin-left":"-20px"}},_hoisted_43={style:{cursor:"pointer"}},_hoisted_44=["onClick"],_sfc_main$e=defineComponent({__name:"index",props:{enable:{type:Object,default:{bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},setup(t,{expose:r}){const e=t,n=ref(),g=ref("点击启动"),y=ref(""),i=ref(),k=ref(),L=ref(!1),$=ref("无记录"),V=ref("0小时0分钟"),z=ref(),re=ref(),oe=ref({pic:{total:0,today:0,old:0},plugin:{total:0,using:0,unusing:0},log:{total:0,idol:0,other:0,system:0}}),le=ref(),ue=ref(),ie=ref(),ae=ref(),Fe=ref(),de=ref("help"),Ie=async()=>{var _r,Ar;if(Object.values(e.enable).every(Er=>Er===!1)){ElMessageBox.alert("没有启用任何功能");return}g.value="启动中！",ae.value||ar(),Fe.value||pr(),kt();let mr=await startBot();if(mr.success)ElMessage.success("启动成功"),L.value=!0,g.value="正在运行",localStorage.setItem("lastStart",y.value),V.value="0小时0分钟",$.value=y.value,e.enable.bd&&((Ar=(_r=n.value)==null?void 0:_r.bd)!=null&&Ar.saveAliyunDisk)&&(ElMessage.info("正在启动阿里云盘服务"),await startAliYunPan());else{let Er=mr.msg??"启动失败：未知错误";ElMessage.error(Er),logApi().addSystem(Er),nr(),g.value="点击启动"}e.enable.kd&&(await At(),ze())},Ve=()=>{g.value="关闭中！",ElMessageBox.confirm("确定要关闭机器人吗？","温馨提示！",{type:"warning",confirmButtonText:"关闭",cancelButtonText:"我点错了"}).then(async()=>{await startBot(!1),ElMessage.success("关闭成功"),L.value=!1,g.value="点击启动"}).catch(()=>{L.value=!0,g.value="正在运行"})},kt=()=>{le.value&&le.value.destroy(),ue.value&&ue.value.destroy(),ie.value&&ie.value.disconnect()},At=async()=>{if(kt(),n.value&&n.value.kd)try{le.value=new NIMSDK({appkey:atob(n.value.kd.appKey),account:n.value.kd.account,token:n.value.kd.token}),await le.value.connect(),ue.value=new QChatSDK({appkey:atob(n.value.kd.appKey),account:n.value.kd.account,token:n.value.kd.token,linkAddresses:await le.value.plugin.getQChatAddress({ipType:2})}),ue.value.on("logined",Et),ue.value.on("message",cr),ue.value.on("disconnect",er),await ue.value.login()}catch(Sr){throw Sr}},ze=()=>{ie.value=new NimChatroomSocket({liveId:n.value.kd.liveRoomId,onMessage:or}),ie.value.init(n.value.kd.appKey)},Et=async function(){var Sr=`口袋已登录。正在进入小偶像${n.value.kd.idolName}的口袋房间。`;if(logApi().addSystem(Sr),ue.value==null)throw"进入口袋房间失败，聊天室未成功实例化";if((await ue.value.qchatServer.subscribeAllChannel({type:1,serverIds:n.value.kd.serverId.split(",").map(String)})).failServerIds.length){Sr=`进入小偶像${n.value.kd.idolName}的口袋房间失败。请检查配置后重试，如仍有问题，请联系开发者。`,logApi().addSystem(Sr);return}Sr=`成功进入小偶像${n.value.kd.idolName}的口袋房间。`,logApi().addSystem(Sr)},cr=async function(Sr){var _r,Ar,Er,sr,xr,Nr,Mr,br,yr,Tr,Br,Lr;Sr.fromType=1,Sr.ext=JSON.parse(Sr.ext),Sr.channelName=await dr(Sr.channelId),Sr.time=dayjs(Sr.time).format("YYYY-MM-DD HH:mm:ss"),await postMsg({content:JSON.stringify(Sr)});let mr={type:"text",name:Sr.ext.user.nickName,time:Sr.time,avatar:((Ar=(_r=n.value)==null?void 0:_r.kd)==null?void 0:Ar.imgDomain)+Sr.ext.user.avatar,color:"#409eff",channel:Sr.channelName,idol:lr(Sr.serverId),roleId:Sr.ext.user.roleId};Sr.type=="text"?mr.content=Sr.body:Sr.type=="image"?(mr.type="pic",mr.url=(Er=Sr==null?void 0:Sr.attach)==null?void 0:Er.url):Sr.type=="video"?(mr.type="video",mr.url=(sr=Sr==null?void 0:Sr.attach)==null?void 0:sr.url):Sr.type=="audio"?(mr.type="audio",mr.url=(xr=Sr==null?void 0:Sr.attach)==null?void 0:xr.url):Sr.type=="custom"?((Nr=Sr==null?void 0:Sr.attach)==null?void 0:Nr.messageType)=="REPLY"&&(mr.content=(br=(Mr=Sr==null?void 0:Sr.attach)==null?void 0:Mr.replyInfo)==null?void 0:br.text,mr.reply=((Tr=(yr=Sr==null?void 0:Sr.attach)==null?void 0:yr.replyInfo)==null?void 0:Tr.replyName)+":"+((Lr=(Br=Sr==null?void 0:Sr.attach)==null?void 0:Br.replyInfo)==null?void 0:Lr.replyText)):mr.content="暂不支持此类型消息，请前往口袋查看。",logApi().add(mr),mr.roleId==3&&nr()},er=function(...Sr){logApi().addSystem("口袋登录连接状态已断开。")},or=function(Sr,mr){mr.forEach(_r=>{postMsg({content:JSON.stringify(_r)},1)})},dr=async function(Sr){if(ue.value==null)return;const mr=await ue.value.qchatChannel.getChannels({channelIds:[`${Sr}`]});return mr?mr[0].name:""},lr=Sr=>{var mr=n.value.kd.idolName.split(","),_r=n.value.kd.serverId.split(","),Ar=_r.indexOf(Sr);return Ar==-1?"未匹配":mr[Ar]},nr=()=>{var mr;let Sr=logApi().getLogs();!Sr||Sr.length<=0||(re.value=Sr.filter(_r=>_r.type=="system").reverse().splice(0,10),(mr=n.value)!=null&&mr.enableModule.kd&&(Sr=Sr.filter(_r=>_r.roleId==3),z.value=Sr.reverse().slice(0,10)))},ur=(Sr,mr="错误")=>{ElMessageBox.alert(Sr,mr+"详情")},ar=()=>{ae.value=setInterval(gr,1e4)},gr=async()=>{k.value=(await getLogs()).data.reverse();let Sr=(await getFun()).data,mr=await getCache({pageIndex:1,pageSize:9999});oe.value.plugin.total=Sr.length,oe.value.plugin.unusing=Sr.filter(Ar=>!Ar.status).length,oe.value.plugin.using=Sr.filter(Ar=>Ar.status).length,oe.value.pic.total=mr.count,oe.value.pic.today=mr.data.filter(Ar=>new Date(Ar.createDate).getDate()===new Date().getDate()).length,oe.value.pic.old=oe.value.pic.total-oe.value.pic.today;let _r=logApi().getLogs();_r&&(oe.value.log.total=_r.length??0,oe.value.log.idol=_r.filter(Ar=>Ar.roleId==3).length,oe.value.log.system=_r.filter(Ar=>Ar.type=="system").length,oe.value.log.other=oe.value.log.total-oe.value.log.idol)},pr=()=>{Fe.value=setInterval(hr,1e3)},hr=()=>{var Sr=new Date,mr=Sr.getHours();y.value=Sr.toLocaleString(),mr>=0&&mr<=6&&(i.value="凌晨好"),mr>=7&&mr<=10&&(i.value="上午好"),mr>=11&&mr<=13&&(i.value="中午好"),mr>=14&&mr<=17&&(i.value="下午好"),mr>=18&&mr<=19&&(i.value="傍晚好"),mr>=20&&mr<=23&&(i.value="晚上好");let _r=localStorage.getItem("lastStart");if(_r?$.value=_r:$.value="无记录",$.value=="无记录")V.value="0小时0分钟";else{let xr=new Date($.value);var Ar=Sr.getTime()-xr.getTime(),Er=Math.floor(Ar/(1e3*60*60)),sr=Math.floor(Ar%(1e3*60*60)/(1e3*60));V.value=`${Er}小时${sr}分钟`}},Cr=async()=>{let Sr=await getConfig();n.value=Sr.data},wr=()=>{window.external.devTool.openDevTool()};return onMounted(async()=>{await Cr(),gr(),hr(),pr(),nr()}),r({refreshConfig:Cr}),(Sr,mr)=>{const _r=ElIcon,Ar=ElCol,Er=ElRow,sr=ElCard,xr=ElScrollbar,Nr=ElDivider,Mr=ElImage;return openBlock(),createBlock(xr,{style:{height:"calc(100vh - 30px)"}},{default:withCtx(()=>[createVNode(Er,null,{default:withCtx(()=>[createVNode(Ar,{span:12},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",class:"ch250"},{header:withCtx(()=>[createTextVNode(" StarBot "),createVNode(_r,{title:"开发者工具",size:"20",class:"et4",onClick:wr},{default:withCtx(()=>[_hoisted_1$9]),_:1})]),default:withCtx(()=>[createVNode(Er,null,{default:withCtx(()=>[createVNode(Ar,{span:6},{default:withCtx(()=>[L.value?(openBlock(),createElementBlock("img",{key:0,title:"点击关闭",onClick:Ve,src:_imports_0,style:{width:"100px",height:"100px",cursor:"pointer","margin-left":"-17px"}})):(openBlock(),createElementBlock("img",{key:1,title:"点击启动",onClick:Ie,src:_imports_1,style:{width:"100px",height:"100px",cursor:"pointer","margin-left":"-17px"}})),createBaseVNode("div",{style:normalizeStyle({color:L.value?"green":g.value.includes("启动中")?"red":"blue"})},[createBaseVNode("span",null,toDisplayString(g.value),1)],4)]),_:1}),createVNode(Ar,{span:18},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("span",_hoisted_3$4,toDisplayString(i.value)+"！生活变的再糟糕，也不妨碍我变得更好！",1)]),createBaseVNode("div",_hoisted_4$4,[_hoisted_5$3,createBaseVNode("span",_hoisted_6$2,toDisplayString(y.value),1)]),createBaseVNode("div",_hoisted_7$1,[_hoisted_8$1,createBaseVNode("span",_hoisted_9$1,toDisplayString($.value),1)]),createBaseVNode("div",_hoisted_10$1,[_hoisted_11$1,createBaseVNode("span",_hoisted_12,toDisplayString(L.value?"已运行"+V.value:"未启动"),1)])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Ar,{span:1}),createVNode(Ar,{span:11},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",class:"ch250"},{header:withCtx(()=>[createVNode(Er,null,{default:withCtx(()=>[createVNode(Ar,null,{default:withCtx(()=>[_hoisted_13,createVNode(_r,{size:18,title:"每分钟更新一次"},{default:withCtx(()=>[createVNode(unref(refresh_default),{class:"et3",onClick:mr[0]||(mr[0]=async()=>k.value=(await unref(getLogs)()).data.reverse())})]),_:1})]),_:1})]),_:1})]),default:withCtx(()=>[createVNode(xr,{height:"180px",style:{"margin-top":"-10px","margin-left":"-20px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_14,[(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,br=>(openBlock(),createElementBlock("li",_hoisted_15,[createBaseVNode("span",{onClick:yr=>ur(br.content),title:"点击查看"},toDisplayString(br.content.substring(0,20))+"--"+toDisplayString(br.time),9,_hoisted_16)]))),256))])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Er,{style:{"margin-top":"20px"}},{default:withCtx(()=>[createVNode(Ar,{span:24},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",header:"快速预览",class:"chauto"},{default:withCtx(()=>[createVNode(Er,{gutter:15},{default:withCtx(()=>[createVNode(Ar,{span:8},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[_hoisted_17]),default:withCtx(()=>[createBaseVNode("div",null,[_hoisted_18,createBaseVNode("div",null,[createBaseVNode("span",_hoisted_19,"全部:"+toDisplayString(oe.value.log.total),1),createVNode(Nr,{direction:"vertical"}),t.enable.kd?(openBlock(),createElementBlock("span",_hoisted_20,"偶像:"+toDisplayString(oe.value.log.idol),1)):(openBlock(),createElementBlock("span",_hoisted_21,"系统:"+toDisplayString(oe.value.log.system),1)),createVNode(Nr,{direction:"vertical"}),createBaseVNode("span",_hoisted_22,"其他:"+toDisplayString(oe.value.log.other),1)])]),createVNode(Nr),createBaseVNode("div",null,[_hoisted_23,createBaseVNode("div",null,[createBaseVNode("span",_hoisted_24,"全部:"+toDisplayString(oe.value.pic.total),1),createVNode(Nr,{direction:"vertical"}),createBaseVNode("span",_hoisted_25,"今日:"+toDisplayString(oe.value.pic.today),1),createVNode(Nr,{direction:"vertical"}),createBaseVNode("span",_hoisted_26,"更早:"+toDisplayString(oe.value.pic.old),1)])]),createVNode(Nr),t.enable.bot?(openBlock(),createElementBlock("div",_hoisted_27,[_hoisted_28,createBaseVNode("div",null,[createBaseVNode("span",_hoisted_29,"全部:"+toDisplayString(oe.value.plugin.total),1),createVNode(Nr,{direction:"vertical"}),createBaseVNode("span",_hoisted_30,"启用:"+toDisplayString(oe.value.plugin.using),1),createVNode(Nr,{direction:"vertical"}),createBaseVNode("span",_hoisted_31,"禁用:"+toDisplayString(oe.value.plugin.unusing),1)])])):createCommentVNode("",!0)]),_:1})]),_:1}),t.enable.kd?(openBlock(),createBlock(Ar,{key:0,span:8},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[_hoisted_32]),default:withCtx(()=>[createVNode(xr,{height:"250px",style:{"margin-top":"-10px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_33,[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.value,br=>{var yr,Tr;return openBlock(),createElementBlock("li",null,[createBaseVNode("span",null,toDisplayString(br.name),1),createBaseVNode("span",_hoisted_34,toDisplayString(br.time),1),br.type=="text"?(openBlock(),createElementBlock("div",{key:0,onClick:Br=>ur(br.content,"口袋消息"),title:"点击查看",style:{color:"skyblue",cursor:"pointer"}},toDisplayString((yr=br.content)==null?void 0:yr.substring(0,20))+" "+toDisplayString((((Tr=br.content)==null?void 0:Tr.length)||0)>20?"...":""),9,_hoisted_35)):createCommentVNode("",!0),br.type=="pic"?(openBlock(),createElementBlock("div",_hoisted_36,[createVNode(Mr,{src:br.url,"preview-src-list":[br.url],style:{width:"120px",height:"auto"}},null,8,["src","preview-src-list"])])):createCommentVNode("",!0),br.type=="link"?(openBlock(),createElementBlock("div",_hoisted_37,[createBaseVNode("a",{target:"_blank",href:br.url},"此消息带链接，点击查看！",8,_hoisted_38)])):createCommentVNode("",!0)])}),256))])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),withDirectives(createVNode(Ar,{span:8},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[createTextVNode("帮助反馈 "),createVNode(_r,{size:16},{default:withCtx(()=>[createVNode(unref(switch_default),{class:"et2",circle:"",onClick:mr[1]||(mr[1]=()=>de.value="log")})]),_:1})]),default:withCtx(()=>[_hoisted_39,_hoisted_40,_hoisted_41]),_:1})]),_:1},512),[[vShow,de.value=="help"]]),withDirectives(createVNode(Ar,{span:8},{default:withCtx(()=>[createVNode(sr,{shadow:"hover",class:"ch320"},{header:withCtx(()=>[createTextVNode("本地日志 "),createVNode(_r,{size:16},{default:withCtx(()=>[createVNode(unref(switch_default),{class:"et2",circle:"",onClick:mr[2]||(mr[2]=()=>de.value="help")})]),_:1})]),default:withCtx(()=>[createVNode(xr,{height:"250px",style:{"margin-top":"-10px"}},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_42,[(openBlock(!0),createElementBlock(Fragment,null,renderList(re.value,br=>{var yr;return openBlock(),createElementBlock("li",_hoisted_43,[createBaseVNode("span",{onClick:Tr=>ur(br.content??"","日志"),title:"点击查看"},toDisplayString((yr=br.content)==null?void 0:yr.substring(0,20))+"--"+toDisplayString(br.time),9,_hoisted_44)])}),256))])]),_:1})]),_:1})]),_:1},512),[[vShow,de.value=="log"]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),index_vue_vue_type_style_index_0_lang="",elAffix="",elButton="",elForm="",elFormItem="",elCheckbox="",_sfc_main$d=defineComponent({__name:"enable",props:{enable:{type:Object,default:{qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},emits:["enable-change"],setup(t,{emit:r}){var n=toRef(t.enable);const g=r;watch(n.value,()=>{g("enable-change",n.value)});const y=i=>{n.value.qq=i};return(i,k)=>{const L=ElCheckbox,$=ElFormItem,V=ElForm;return openBlock(),createBlock(V,{ref:"bdform","label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode($,{label:"启用模块："},{default:withCtx(()=>[createVNode(L,{modelValue:unref(n).bot,"onUpdate:modelValue":k[0]||(k[0]=z=>unref(n).bot=z),label:"QQ&Bot",onChange:y},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).wb,"onUpdate:modelValue":k[1]||(k[1]=z=>unref(n).wb=z),label:"微博"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).bz,"onUpdate:modelValue":k[2]||(k[2]=z=>unref(n).bz=z),label:"B站"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).kd,"onUpdate:modelValue":k[3]||(k[3]=z=>unref(n).kd=z),label:"口袋48"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).xhs,"onUpdate:modelValue":k[4]||(k[4]=z=>unref(n).xhs=z),label:"小红书"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).bd,"onUpdate:modelValue":k[5]||(k[5]=z=>unref(n).bd=z),label:"百度"},null,8,["modelValue"]),createVNode(L,{modelValue:unref(n).dy,"onUpdate:modelValue":k[6]||(k[6]=z=>unref(n).dy=z),label:"抖音"},null,8,["modelValue"])]),_:1})]),_:1},512)}}}),elInput="",_hoisted_1$8=createBaseVNode("span",{id:"bot"},"机器人",-1),_sfc_main$c=defineComponent({__name:"bot",props:{bot:{type:Object,default:{host:"",websocktPort:"",httpPort:"",token:""}}},setup(t,{expose:r}){const e=ref(),n=ref({host:[{required:!0,message:"请输入该值",trigger:"blur"}],websocktPort:[{required:!0,message:"请输入该值",trigger:"blur"}],httpPort:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElForm,V=ElCard;return openBlock(),createBlock(V,{class:"card-bot"},{header:withCtx(()=>[_hoisted_1$8]),default:withCtx(()=>[createVNode($,{ref_key:"botform",ref:e,rules:n.value,model:t.bot,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"IP地址",prop:"host"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.host,"onUpdate:modelValue":i[0]||(i[0]=z=>t.bot.host=z)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"WebScoket端口",prop:"websocktPort"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.websocktPort,"onUpdate:modelValue":i[1]||(i[1]=z=>t.bot.websocktPort=z)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"Http端口",prop:"httpPort"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.httpPort,"onUpdate:modelValue":i[2]||(i[2]=z=>t.bot.httpPort=z)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"token"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bot.token,"onUpdate:modelValue":i[3]||(i[3]=z=>t.bot.token=z)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})}}}),elSwitch="",elTag="",elOption="",elOptionGroup="",elSelect="",_hoisted_1$7=createBaseVNode("span",{id:"qq"},"QQ",-1),_sfc_main$b=defineComponent({__name:"qq",props:{qq:{type:Object,default:{funcAdmin:new Array,group:"",save:!1,admin:"",notice:!1,permission:"",debug:!1}},bot:{type:Object,default:{host:"",websocktPort:"",httpPort:"",token:""}}},setup(t,{expose:r}){const e=t,n=ref({value:"",loading:!1,options:[]}),g=ref({value:[],loading:!1,options:[]}),y=ref({value:[],loading:!1,options:[]}),i=ref(),k=ref({admin:[{required:!0,message:"请输入该值",trigger:"blur"}]}),L=async()=>new Promise(ue=>{var ie;(ie=i.value)==null||ie.validate(ae=>{ue(ae)})}),$=async(ue,ie=!1)=>{var Fe;if(!e.bot.host&&!e.bot.websocktPort&&!e.bot.httpPort){ElMessage.warning("请先完填入bot信息");return}n.value.loading=!0;var ae=await getSuperAdmin(ue,e.bot.host,e.bot.websocktPort,e.bot.httpPort,e.bot.token);ae.success?(n.value.options=ae.data,n.value.loading=!1,ie&&(n.value.value=(Fe=n.value.options.find(de=>de.user_id==e.qq.admin))==null?void 0:Fe.nickname)):(ElMessage.error(ae.msg),n.value.loading=!1)},V=async(ue,ie=!1)=>{if(!e.bot.host&&!e.bot.websocktPort&&!e.bot.httpPort){ElMessage.warning("请先完填入bot信息");return}if(e.qq.group){y.value.loading=!0;var ae=await getGroup(ue,e.bot.host,e.bot.websocktPort,e.bot.httpPort,e.bot.token);ae.success?(y.value.options=ae.data,y.value.loading=!1,ie&&(y.value.value=y.value.options.filter(Fe=>e.qq.group.includes(Fe.group_id)).map(Fe=>Fe.group_name))):(ElMessage.error(ae.msg),y.value.loading=!1)}},z=async(ue,ie=!1)=>{if(!e.bot.host&&!e.bot.websocktPort&&!e.bot.httpPort){ElMessage.warning("请先完填入bot信息");return}if(e.qq.group){g.value.loading=!0;var ae=await getAdmin(e.qq.group,ue,e.bot.host,e.bot.websocktPort,e.bot.httpPort,e.bot.token);ae.success?(g.value.options=ae.data,g.value.loading=!1,ie&&(g.value.value=g.value.options.filter(Fe=>e.qq.permission.includes(Fe.user_id)).map(Fe=>Fe.nickname))):(ElMessage.error(ae.msg),g.value.loading=!1)}},re=()=>{var ue;e.qq.admin=(ue=n.value.value)==null?void 0:ue.toString()},oe=()=>{var ue;e.qq.group=(ue=y.value.value)==null?void 0:ue.toString()},le=()=>{e.qq.permission=g.value.value.toString()};return r({validForm:L}),onMounted(()=>{setTimeout(async()=>{await z("",!0),await V("",!0),await $("",!0)},100)}),(ue,ie)=>{const ae=ElOption,Fe=ElSelect,de=ElFormItem,Ie=ElSwitch,Ve=ElForm,kt=ElCard;return openBlock(),createBlock(kt,{class:"card-qq"},{header:withCtx(()=>[_hoisted_1$7]),default:withCtx(()=>[createVNode(Ve,{ref_key:"qqform",ref:i,model:t.qq,rules:k.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(de,{label:"超管",prop:"admin"},{default:withCtx(()=>[createVNode(Fe,{modelValue:n.value.value,"onUpdate:modelValue":ie[0]||(ie[0]=At=>n.value.value=At),filterable:"",remote:"","remote-method":$,loading:n.value.loading,placeholder:"请选择好友",onChange:re},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value.options,At=>(openBlock(),createBlock(ae,{key:At.user_id,label:At.nickname,value:At.user_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),createVNode(de,{label:"群",prop:"group"},{default:withCtx(()=>[createVNode(Fe,{modelValue:y.value.value,"onUpdate:modelValue":ie[1]||(ie[1]=At=>y.value.value=At),filterable:"",remote:"",multiple:"","remote-method":V,loading:y.value.loading,placeholder:"请选择群",onChange:oe},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value.options,At=>(openBlock(),createBlock(ae,{key:At.group_id,label:At.group_name,value:At.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),createVNode(de,{label:"管理员",prop:"permission"},{default:withCtx(()=>[createVNode(Fe,{modelValue:g.value.value,"onUpdate:modelValue":ie[2]||(ie[2]=At=>g.value.value=At),filterable:"",remote:"",multiple:"","remote-method":z,loading:g.value.loading,placeholder:"请选择群成员",onChange:le},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value.options,At=>(openBlock(),createBlock(ae,{key:At.user_id,label:At.nickname,value:At.user_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),createVNode(de,{label:"程序错误通知"},{default:withCtx(()=>[createVNode(Ie,{modelValue:t.qq.debug,"onUpdate:modelValue":ie[3]||(ie[3]=At=>t.qq.debug=At),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"普通消息通知"},{default:withCtx(()=>[createVNode(Ie,{modelValue:t.qq.notice,"onUpdate:modelValue":ie[4]||(ie[4]=At=>t.qq.notice=At),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),createVNode(de,{label:"保存群消息"},{default:withCtx(()=>[createVNode(Ie,{modelValue:t.qq.save,"onUpdate:modelValue":ie[5]||(ie[5]=At=>t.qq.save=At),"active-text":"保存","inactive-text":"不保存"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}}),elInputNumber="",_hoisted_1$6=createBaseVNode("span",{id:"wb"},"微博",-1),_hoisted_2$3=createBaseVNode("span",{style:{color:"red"}},"用于转发动态和图片保存，一般是填idol",-1),_hoisted_3$3=createBaseVNode("span",{style:{color:"red"}},"仅用于图片保存，一般是填返图用户",-1),_hoisted_4$3=createBaseVNode("span",{style:{color:"red"}},"监听某些用户是否发送了包含关键词的动态",-1),_sfc_main$a=defineComponent({__name:"wb",props:{wb:{type:Object,default:{userAll:"",userPart:"",chiGuaUser:"",keyword:"",chiGuaQQ:"",chiGuaForwardQQ:!1,chiGuaGroup:"",chiGuaForwardGroup:!1,timeSpan:3,group:"",forwardGroup:!1,forwardQQ:!1,qq:""}}},setup(t,{expose:r}){const e=ref(),n=ref({userAll:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-wb"},{header:withCtx(()=>[_hoisted_1$6]),default:withCtx(()=>[createVNode(z,{ref_key:"wbform",ref:e,model:t.wb,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"微博用户",prop:"userAll"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.userAll,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.wb.userAll=oe)},null,8,["modelValue"]),_hoisted_2$3]),_:1}),createVNode(L,{label:"返图用户"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.userPart,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.wb.userPart=oe)},null,8,["modelValue"]),_hoisted_3$3]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.forwardGroup,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.wb.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.group,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.wb.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.forwardQQ,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.wb.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.qq,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.wb.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"吃瓜用户"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaUser,"onUpdate:modelValue":i[6]||(i[6]=oe=>t.wb.chiGuaUser=oe)},null,8,["modelValue"]),_hoisted_4$3]),_:1}),createVNode(L,{label:"关键词"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.keyword,"onUpdate:modelValue":i[7]||(i[7]=oe=>t.wb.keyword=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.chiGuaForwardGroup,"onUpdate:modelValue":i[8]||(i[8]=oe=>t.wb.chiGuaForwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.chiGuaForwardGroup?(openBlock(),createBlock(L,{key:2,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaGroup,"onUpdate:modelValue":i[9]||(i[9]=oe=>t.wb.chiGuaGroup=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.wb.chiGuaForwardQQ,"onUpdate:modelValue":i[10]||(i[10]=oe=>t.wb.chiGuaForwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.wb.chiGuaForwardQQ?(openBlock(),createBlock(L,{key:3,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.wb.chiGuaQQ,"onUpdate:modelValue":i[11]||(i[11]=oe=>t.wb.chiGuaQQ=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.wb.forwardQQ||t.wb.forwardGroup||t.wb.chiGuaForwardGroup||t.wb.chiGuaForwardQQ?(openBlock(),createBlock(L,{key:4,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.wb.timeSpan,"onUpdate:modelValue":i[12]||(i[12]=oe=>t.wb.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elCascader="",elCascaderPanel="",elRadio="",elDialog="",elOverlay="",elCheckboxGroup="",elRadioGroup="",_hoisted_1$5=createBaseVNode("span",{id:"kd"},"口袋48",-1),_hoisted_2$2=createBaseVNode("span",{style:{color:"red","font-size":"12px"}},"*直播间监听功能已失效",-1),_hoisted_3$2=createBaseVNode("span",{style:{color:"red"}},"*以上信息可通过查询获取",-1),_hoisted_4$2=createBaseVNode("span",{style:{color:"red"}},"*IM账号和IMtoken可点此登录口袋后自动获取",-1),_hoisted_5$2=createBaseVNode("span",{style:{"font-size":"14px",color:"red","margin-left":"10px"}},"注：支持监听最多10位小偶像",-1),_sfc_main$9=defineComponent({__name:"kd",props:{kd:{type:Object,default:{group:"",forwardGroup:!1,forwardQQ:!1,qq:"",idolName:"",account:"",token:"",serverId:"",liveRoomId:"",msgTypeAll:new Array,msgType:[],saveMsg:0,saveImg:!1}}},setup(t,{expose:r}){const e=t,n=ref(),g=ref({idolName:[{required:!0,message:"请输入该值",trigger:"blur"}],serverId:[{required:!0,message:"请输入该值",trigger:"blur"}],liveRoomId:[{required:!0,message:"请输入该值",trigger:"blur"}],account:[{required:!0,message:"请输入该值",trigger:"blur"}],token:[{required:!0,message:"请输入该值",trigger:"blur"}],phone:[{required:!0,message:"请输入该值",trigger:"blur"}],code:[{required:!0,message:"请输入该值",trigger:"blur"}],name:[{required:!0,message:"请输入该值",trigger:"blur"}]}),y=ref(!1),i=ref({show:!1,group:[],name:"",url:""}),k=ref({phone:"",area:"86",hasSend:!1,code:"",sec:60}),L=ref([{label:"SNH48",value:"SNH48",children:[{value:"TEAM SII",label:"TEAM SII"},{value:"TEAM HII",label:"TEAM HII"},{value:"TEAM X",label:"TEAM X"}]},{label:"GNZ48",value:"GNZ48",children:[{value:"TEAM G",label:"TEAM G"},{value:"TEAM NIII",label:"TEAM NIII"},{value:"TEAM Z",label:"TEAM Z"},{value:"TEAM CII",label:"TEAM CII"}]},{label:"CGT48",value:"CGT48",children:[{value:"TEAM GII",label:"TEAM GII"}]},{label:"BEJ48",value:"BEJ48",children:[{value:"TEAM B",label:"TEAM B"},{value:"TEAM E",label:"TEAM E"}]},{label:"CKG48",value:"CKG48"}]),$=ref(),V=ref(),z=()=>{$.value=[]},re=()=>{if(e.kd.idolName&&e.kd.liveRoomId&&e.kd.serverId){let Ie=e.kd.idolName.split(",").length,Ve=e.kd.liveRoomId.split(",").length,kt=e.kd.serverId.split(",").length;if(Ie!=Ve||Ie!=kt||Ve!=kt){ElMessage({message:"小偶像姓名，IMServerId，直播间Id数量不匹配，请确认后重试！",type:"error"});return}if(Ie>=10){ElMessage({message:"最多支持10位小偶像",type:"error"});return}i.value.show=!0}},oe=async Ie=>{if(Ie){var Ve=await searchIdol(i.value.group.toString(),Ie);Ve.success?$.value=Ve.data:ElMessage.error(Ve.msg)}},le=(Ie=!0)=>{if(V.value){let Ve=V.value;!e.kd.idolName&&!e.kd.liveRoomId&&!e.kd.serverId?(e.kd.idolName=Ve.name,e.kd.liveRoomId=Ve.liveId,e.kd.serverId=Ve.serverId):e.kd.serverId.includes(Ve.serverId)||(e.kd.idolName+=","+Ve.name,e.kd.liveRoomId+=","+Ve.liveId,e.kd.serverId+=","+Ve.serverId),Ie&&ElMessage.success("小偶像已关注")}else Ie&&ElMessage.warning("未选中小偶像！")},ue=()=>{le(!1),i.value.show=!1,i.value.name="",i.value.url="",i.value.group=[],$.value=[],V.value="",y.value=!1,k.value.hasSend=!1,k.value.sec=60,k.value.code=""},ie=async()=>{if(!k.value.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}var Ie=/^1[3456789]\d{9}$/;if(Ie.test(k.value.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}k.value.hasSend=!0,Fe();var Ve=await sendSmsCode(k.value.phone,k.value.area);Ve.success?ElMessage({message:"发送成功，请注意查收！",type:"success"}):(ElMessage({message:Ve.msg||"发送失败！",type:"error"}),ue())},ae=async()=>{if(!k.value.phone){ElMessage({message:"请输入手机号码！",type:"warning"});return}if(!k.value.code){ElMessage({message:"请输入验证码！",type:"warning"});return}var Ie=/^1[3456789]\d{9}$/;if(Ie.test(k.value.phone)==!1){ElMessage({message:"手机号码格式有误，请重新输入！",type:"warning"});return}var Ve=await pocketLogin(k.value.phone,k.value.code);if(Ve.success){var kt=await kdUserInfo({token:JSON.parse(Ve.data).token});if(kt.success){let At=JSON.parse(kt.data);e.kd.token=At.pwd,e.kd.account=At.accid,setTimeout(()=>{ue()},1e3),ElMessage({message:kt.msg||"登录成功",type:"success"})}else ElMessage({message:kt.msg||"登录失败！",type:"error"})}else ElMessage({message:Ve.msg||"登录失败！",type:"error"})},Fe=()=>{k.value.sec=60;let Ie;Ie=setInterval(()=>{k.value.sec>0?k.value.sec--:(clearInterval(Ie),k.value.sec=60,k.value.hasSend=!1)},1e3)};return r({validForm:async()=>new Promise(Ie=>{var Ve;(Ve=n.value)==null||Ve.validate(kt=>{Ie(kt)})})}),(Ie,Ve)=>{const kt=ElInput,At=ElFormItem,ze=ElButton,Et=ElRadio,cr=ElRadioGroup,er=ElCheckbox,or=ElCheckboxGroup$1,dr=ElSwitch,lr=ElForm,nr=ElDialog,ur=ElCascader,ar=ElOption,gr=ElSelect,pr=ElCard;return openBlock(),createBlock(pr,{class:"card-kd"},{header:withCtx(()=>[_hoisted_1$5]),default:withCtx(()=>[createVNode(lr,{ref_key:"kdform",ref:n,rules:g.value,model:t.kd,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(At,{label:"姓名",prop:"idolName"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.idolName,"onUpdate:modelValue":Ve[0]||(Ve[0]=hr=>t.kd.idolName=hr)},null,8,["modelValue"])]),_:1}),createVNode(At,{label:"IMServerId",prop:"serverId"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.serverId,"onUpdate:modelValue":Ve[1]||(Ve[1]=hr=>t.kd.serverId=hr)},null,8,["modelValue"])]),_:1}),createVNode(At,{label:"直播房间Id",prop:"liveRoomId"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.liveRoomId,"onUpdate:modelValue":Ve[2]||(Ve[2]=hr=>t.kd.liveRoomId=hr)},null,8,["modelValue"]),_hoisted_2$2]),_:1}),createVNode(At,null,{default:withCtx(()=>[createVNode(ze,{onClick:re},{default:withCtx(()=>[createTextVNode("查询小偶像信息")]),_:1}),_hoisted_3$2]),_:1}),createVNode(At,{label:"IM账号",prop:"account"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.account,"onUpdate:modelValue":Ve[3]||(Ve[3]=hr=>t.kd.account=hr)},null,8,["modelValue"])]),_:1}),createVNode(At,{label:"IMtoken",prop:"token"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.token,"onUpdate:modelValue":Ve[4]||(Ve[4]=hr=>t.kd.token=hr)},null,8,["modelValue"])]),_:1}),createVNode(At,null,{default:withCtx(()=>[createVNode(ze,{onClick:Ve[5]||(Ve[5]=hr=>y.value=!0)},{default:withCtx(()=>[createTextVNode("登录口袋48")]),_:1}),_hoisted_4$2]),_:1}),createVNode(At,{label:"保存消息"},{default:withCtx(()=>[createVNode(cr,{modelValue:t.kd.saveMsg,"onUpdate:modelValue":Ve[6]||(Ve[6]=hr=>t.kd.saveMsg=hr)},{default:withCtx(()=>[createVNode(Et,{label:0,value:0},{default:withCtx(()=>[createTextVNode("不保存")]),_:1}),createVNode(Et,{label:1,value:1},{default:withCtx(()=>[createTextVNode("仅小偶像")]),_:1}),createVNode(Et,{label:2,value:2},{default:withCtx(()=>[createTextVNode("全部")]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(At,{label:"保存小偶像图片"},{default:withCtx(()=>[createVNode(cr,{modelValue:t.kd.saveImg,"onUpdate:modelValue":Ve[7]||(Ve[7]=hr=>t.kd.saveImg=hr)},{default:withCtx(()=>[createVNode(Et,{label:!1,value:!1},{default:withCtx(()=>[createTextVNode("不保存")]),_:1}),createVNode(Et,{label:!0,value:!0},{default:withCtx(()=>[createTextVNode("保存")]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(At,{label:"监听消息类型"},{default:withCtx(()=>[createVNode(or,{modelValue:t.kd.msgType,"onUpdate:modelValue":Ve[8]||(Ve[8]=hr=>t.kd.msgType=hr)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.kd.msgTypeAll,(hr,Cr)=>(openBlock(),createBlock(er,{label:hr.value,key:Cr},{default:withCtx(()=>[createTextVNode(toDisplayString(hr.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(At,{label:"转发至群"},{default:withCtx(()=>[createVNode(dr,{modelValue:t.kd.forwardGroup,"onUpdate:modelValue":Ve[9]||(Ve[9]=hr=>t.kd.forwardGroup=hr),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.kd.forwardGroup?(openBlock(),createBlock(At,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.group,"onUpdate:modelValue":Ve[10]||(Ve[10]=hr=>t.kd.group=hr)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(At,{label:"转发至好友"},{default:withCtx(()=>[createVNode(dr,{modelValue:t.kd.forwardQQ,"onUpdate:modelValue":Ve[11]||(Ve[11]=hr=>t.kd.forwardQQ=hr),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.kd.forwardQQ?(openBlock(),createBlock(At,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(kt,{modelValue:t.kd.qq,"onUpdate:modelValue":Ve[12]||(Ve[12]=hr=>t.kd.qq=hr)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["rules","model"]),createVNode(nr,{draggable:"",title:"登录口袋48",modelValue:y.value,"onUpdate:modelValue":Ve[15]||(Ve[15]=hr=>y.value=hr),"before-close":ue,"close-on-click-modal":!1},{default:withCtx(()=>[createVNode(lr,{"label-width":"100px",rules:g.value,model:k.value},{default:withCtx(()=>[createVNode(At,{label:"手机号",class:"mt-4",prop:"phone"},{default:withCtx(()=>[createVNode(kt,{modelValue:k.value.phone,"onUpdate:modelValue":Ve[13]||(Ve[13]=hr=>k.value.phone=hr),style:{width:"95%"}},{prepend:withCtx(()=>[createTextVNode("+"+toDisplayString(k.value.area),1)]),_:1},8,["modelValue"])]),_:1}),createVNode(At,{label:"验证码",prop:"code"},{default:withCtx(()=>[createVNode(kt,{type:"primary",modelValue:k.value.code,"onUpdate:modelValue":Ve[14]||(Ve[14]=hr=>k.value.code=hr),style:{width:"65%"}},null,8,["modelValue"]),withDirectives(createVNode(ze,{style:{width:"25%","margin-left":"5%"},onClick:ie},{default:withCtx(()=>[createTextVNode("发送验证码")]),_:1},512),[[vShow,!k.value.hasSend]]),withDirectives(createVNode(ze,{style:{width:"25%","margin-left":"5%"}},{default:withCtx(()=>[createTextVNode(toDisplayString(k.value.sec)+"秒",1)]),_:1},512),[[vShow,k.value.hasSend]])]),_:1}),createVNode(At,null,{default:withCtx(()=>[createVNode(ze,{type:"primary",onClick:ae},{default:withCtx(()=>[createTextVNode("登录")]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),createVNode(nr,{draggable:"",title:"查询小偶像","destroy-on-close":!0,modelValue:i.value.show,"onUpdate:modelValue":Ve[18]||(Ve[18]=hr=>i.value.show=hr),"before-close":ue,"close-on-click-modal":!1,width:"40%"},{default:withCtx(()=>[createVNode(lr,{"label-width":"100px",rules:g.value,model:i.value},{default:withCtx(()=>[createVNode(At,{label:"队伍",class:"mt-4"},{default:withCtx(()=>[createVNode(ur,{props:{expandTrigger:"hover",checkStrictly:"true"},placeholder:"请选择",modelValue:i.value.group,"onUpdate:modelValue":Ve[16]||(Ve[16]=hr=>i.value.group=hr),options:L.value,style:{width:"95%"},onChange:z},null,8,["modelValue","options"])]),_:1}),createVNode(At,{label:"姓名",prop:"name"},{default:withCtx(()=>[createVNode(gr,{filterable:"",remote:"",placeholder:"小偶像搜索",modelValue:i.value.name,"onUpdate:modelValue":Ve[17]||(Ve[17]=hr=>i.value.name=hr),"remote-method":oe,style:{width:"95%"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList($.value,hr=>(openBlock(),createBlock(ar,{key:hr.id,label:hr.Name,value:hr.name,onClick:()=>V.value=hr},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(At,null,{default:withCtx(()=>[createVNode(ze,{type:"primary",onClick:le},{default:withCtx(()=>[createTextVNode("添加")]),_:1}),createVNode(ze,{type:"success",onClick:ue},{default:withCtx(()=>[createTextVNode("确定")]),_:1}),_hoisted_5$2]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])]),_:1})}}}),_hoisted_1$4=createBaseVNode("span",{id:"bz"},"b站",-1),_sfc_main$8=defineComponent({__name:"bz",props:{bz:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-bz"},{header:withCtx(()=>[_hoisted_1$4]),default:withCtx(()=>[createVNode(z,{ref_key:"bzform",ref:e,model:t.bz,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"b站用户",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.user,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.bz.user=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.bz.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.bz.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.bz.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.group,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.bz.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.bz.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.bz.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.bz.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.bz.qq,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.bz.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.bz.forwardQQ||t.bz.forwardGroup?(openBlock(),createBlock(L,{key:2,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.bz.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.bz.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),_hoisted_1$3=createBaseVNode("span",{id:"xhs"},"小红书",-1),_sfc_main$7=defineComponent({__name:"xhs",props:{xhs:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-xhs"},{header:withCtx(()=>[_hoisted_1$3]),default:withCtx(()=>[createVNode(z,{ref_key:"xhsform",ref:e,model:t.xhs,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"小红书用户",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.user,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.xhs.user=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.xhs.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.xhs.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.xhs.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.group,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.xhs.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.xhs.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.xhs.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.xhs.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.xhs.qq,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.xhs.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.xhs.forwardQQ||t.xhs.forwardGroup?(openBlock(),createBlock(L,{key:2,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.xhs.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.xhs.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elUpload="",elProgress="",_hoisted_1$2=createBaseVNode("span",{id:"bd"},"百度",-1),_hoisted_2$1=createBaseVNode("span",{style:{color:"red"}},"*上传人脸轮廓清晰的图片",-1),_hoisted_3$1=createBaseVNode("span",{style:{color:"red"}},"*直接保存(非双胞胎建议80，双胞胎建议70)",-1),_hoisted_4$1=createBaseVNode("span",{style:{color:"red"}},"*超过该值，但未超过上面的值，将加入审核列表，审核通过才会保存",-1),_hoisted_5$1=createBaseVNode("span",{style:{color:"red"}},"*启用会将图片自动上传到阿里云盘相册",-1),_hoisted_6$1=["src"],_sfc_main$6=defineComponent({__name:"bd",props:{bd:{type:Object,default:{appKey:"",appSeret:"",similarity:0,saveAliyunDisk:!1,audit:0,albumName:"",faceVerify:!1,imageList:new Array}}},setup(t,{expose:r}){const e=t,n=ref([]),g=ref(),y=re=>{n.value.push({name:re.data.name,url:re.data.url}),e.bd.imageList&&e.bd.imageList.push({name:re.data.name,url:re.data.url})};watchEffect(()=>{e.bd.imageList&&(n.value=JSON.parse(JSON.stringify(e.bd.imageList)))});const i=re=>{e.bd.imageList&&(e.bd.imageList=e.bd.imageList.filter(oe=>oe.name!==re.name))},k=ref(""),L=ref(!1),$=re=>{k.value=re.url,L.value=!0},V=ref({appKey:[{required:!0,message:"请输入该值",trigger:"blur"}],appSeret:[{required:!0,message:"请输入该值",trigger:"blur"}],albumName:[{required:!0,message:"请输入该值",trigger:"blur"}],imageList:[{required:!0,message:"请上传人脸",trigger:"change"}]});return r({validForm:async()=>new Promise(re=>{var oe;(oe=g.value)==null||oe.validate(le=>{re(le)})})}),(re,oe)=>{const le=ElInput,ue=ElFormItem,ie=ElSwitch,ae=ElIcon,Fe=ElUpload,de=ElCol,Ie=ElForm,Ve=ElCard,kt=ElDialog;return openBlock(),createElementBlock(Fragment,null,[createVNode(Ve,{class:"card-bd",style:{"margin-top":"10px"}},{header:withCtx(()=>[_hoisted_1$2]),default:withCtx(()=>[createVNode(Ie,{ref_key:"bdform",ref:g,model:t.bd,rules:V.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(ue,{label:"apiKey",prop:"appKey"},{default:withCtx(()=>[createVNode(le,{modelValue:t.bd.appKey,"onUpdate:modelValue":oe[0]||(oe[0]=At=>t.bd.appKey=At),placeholder:"百度appKey"},null,8,["modelValue"])]),_:1}),createVNode(ue,{label:"appSeret",prop:"appSeret"},{default:withCtx(()=>[createVNode(le,{modelValue:t.bd.appSeret,"onUpdate:modelValue":oe[1]||(oe[1]=At=>t.bd.appSeret=At),placeholder:"百度appSeret"},null,8,["modelValue"])]),_:1}),createVNode(ue,{label:"开启人脸验证"},{default:withCtx(()=>[createVNode(ie,{modelValue:t.bd.faceVerify,"onUpdate:modelValue":oe[2]||(oe[2]=At=>t.bd.faceVerify=At),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),withDirectives(createVNode(ue,{label:"基础人脸",prop:"imageList"},{default:withCtx(()=>[createVNode(Fe,{"file-list":n.value,"onUpdate:fileList":oe[3]||(oe[3]=At=>n.value=At),action:unref(ApiPrefix)+"/upload","on-success":y,"on-preview":$,"on-remove":i,"list-type":"picture-card",limit:3,accept:".jpg,.png,.jpeg"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(unref(plus_default))]),_:1})]),_:1},8,["file-list","action"]),_hoisted_2$1,withDirectives(createVNode(le,{modelValue:t.bd.imageList,"onUpdate:modelValue":oe[4]||(oe[4]=At=>t.bd.imageList=At)},null,8,["modelValue"]),[[vShow,!1]])]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"人脸相似度"},{default:withCtx(()=>[createVNode(de,{span:8},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:t.bd.similarity,"onUpdate:modelValue":oe[5]||(oe[5]=At=>t.bd.similarity=At)},null,8,["modelValue"])]),_:1}),_hoisted_3$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"审核相似度"},{default:withCtx(()=>[createVNode(de,{span:8},{default:withCtx(()=>[createVNode(le,{type:"number",modelValue:t.bd.audit,"onUpdate:modelValue":oe[6]||(oe[6]=At=>t.bd.audit=At)},null,8,["modelValue"])]),_:1}),_hoisted_4$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"上传云盘"},{default:withCtx(()=>[createVNode(ie,{modelValue:t.bd.saveAliyunDisk,"onUpdate:modelValue":oe[7]||(oe[7]=At=>t.bd.saveAliyunDisk=At),"active-value":!0,"inactive-value":!1},null,8,["modelValue"]),_hoisted_5$1]),_:1},512),[[vShow,t.bd.faceVerify]]),withDirectives(createVNode(ue,{label:"相册名称",prop:"albumName"},{default:withCtx(()=>[createVNode(de,{span:8},{default:withCtx(()=>[createVNode(le,{modelValue:t.bd.albumName,"onUpdate:modelValue":oe[8]||(oe[8]=At=>t.bd.albumName=At)},null,8,["modelValue"])]),_:1})]),_:1},512),[[vShow,t.bd.saveAliyunDisk&&t.bd.faceVerify]])]),_:1},8,["model","rules"])]),_:1}),createVNode(kt,{modelValue:L.value,"onUpdate:modelValue":oe[9]||(oe[9]=At=>L.value=At)},{default:withCtx(()=>[createBaseVNode("img",{"w-full":"",style:{height:"auto",width:"100%"},src:k.value,alt:"Preview Image"},null,8,_hoisted_6$1)]),_:1},8,["modelValue"])],64)}}}),_hoisted_1$1=createBaseVNode("span",{id:"dy"},"抖音",-1),_sfc_main$5=defineComponent({__name:"dy",props:{dy:{type:Object,default:{user:"",group:"",forwardGroup:!1,forwardQQ:!1,qq:"",timeSpan:3}}},setup(t,{expose:r}){const e=ref(),n=ref({user:[{required:!0,message:"请输入该值",trigger:"blur"}]});return r({validForm:async()=>new Promise(y=>{var i;(i=e.value)==null||i.validate(k=>{y(k)})})}),(y,i)=>{const k=ElInput,L=ElFormItem,$=ElSwitch,V=ElInputNumber,z=ElForm,re=ElCard;return openBlock(),createBlock(re,{class:"card-dy"},{header:withCtx(()=>[_hoisted_1$1]),default:withCtx(()=>[createVNode(z,{ref_key:"dyform",ref:e,model:t.dy,rules:n.value,"label-width":"150px","label-position":"left"},{default:withCtx(()=>[createVNode(L,{label:"抖音用户",prop:"user"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.user,"onUpdate:modelValue":i[0]||(i[0]=oe=>t.dy.user=oe)},null,8,["modelValue"])]),_:1}),createVNode(L,{label:"转发至群"},{default:withCtx(()=>[createVNode($,{modelValue:t.dy.forwardGroup,"onUpdate:modelValue":i[1]||(i[1]=oe=>t.dy.forwardGroup=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.dy.forwardGroup?(openBlock(),createBlock(L,{key:0,label:"群qq号"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.group,"onUpdate:modelValue":i[2]||(i[2]=oe=>t.dy.group=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),createVNode(L,{label:"转发至好友"},{default:withCtx(()=>[createVNode($,{modelValue:t.dy.forwardQQ,"onUpdate:modelValue":i[3]||(i[3]=oe=>t.dy.forwardQQ=oe),"active-text":"转发","inactive-text":"不转发"},null,8,["modelValue"])]),_:1}),t.dy.forwardQQ?(openBlock(),createBlock(L,{key:1,label:"好友qq"},{default:withCtx(()=>[createVNode(k,{modelValue:t.dy.qq,"onUpdate:modelValue":i[4]||(i[4]=oe=>t.dy.qq=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0),t.dy.forwardQQ||t.dy.forwardGroup?(openBlock(),createBlock(L,{key:2,label:"监听间隔"},{default:withCtx(()=>[createVNode(V,{modelValue:t.dy.timeSpan,"onUpdate:modelValue":i[5]||(i[5]=oe=>t.dy.timeSpan=oe)},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1},8,["model","rules"])]),_:1})}}}),elMessageBox="",_sfc_main$4=defineComponent({__name:"config",props:{enable:{type:Object,default:{qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},emits:["top-enable-change","change-menu","config-change"],setup(t,{expose:r,emit:e}){const n=t,g=ref(),y=ref(),i=ref(),k=ref(),L=ref(),$=ref(),V=ref(),z=ref(),re=ref({enableModule:n.enable}),oe=ref(),le=e,ue=de=>{re.value.enableModule=de,le("top-enable-change",de)},ie=async()=>{let de=!0;if(re.value.enableModule.bot&&(de=await g.value.validForm()),!de){le("change-menu","bot"),ElMessage.error("请填入机器人配置中的必填项！");return}if(re.value.enableModule.wb&&(de=await y.value.validForm()),!de){le("change-menu","wb"),ElMessage.error("请填入微博配置中的必填项！");return}if(re.value.enableModule.qq&&(de=await i.value.validForm()),!de){le("change-menu","qq"),ElMessage.error("请填入QQ配置中的必填项！");return}if(re.value.enableModule.bz&&(de=await k.value.validForm()),!de){le("change-menu","bz"),ElMessage.error("请填入B站配置中的必填项！");return}if(re.value.enableModule.bd&&(de=await L.value.validForm()),!de){le("change-menu","bd"),ElMessage.error("请填入百度配置中的必填项！");return}if(re.value.enableModule.kd&&(de=await $.value.validForm()),!de){le("change-menu","kd"),ElMessage.error("请填入口袋配置中的必填项！");return}if(re.value.enableModule.xhs&&(de=await V.value.validForm()),!de){le("change-menu","xhs"),ElMessage.error("请填入小红书配置中的必填项！");return}if(re.value.enableModule.dy&&(de=await z.value.validForm()),!de){le("change-menu","dy"),ElMessage.error("请填入抖音配置中的必填项！");return}var Ie=await saveConfig(re.value);Ie&&Ie.success?(oe.value=re.value,ElMessage.success(Ie.msg),le("config-change")):ElMessage.error(Ie.msg||"保存失败！")},ae=async()=>{var de=await getConfig();de&&de.success&&(re.value.enableModule=de.data.enableModule,re.value.bot=de.data.bot,re.value.qq=de.data.qq,re.value.wb=de.data.wb,re.value.kd=de.data.kd,re.value.bz=de.data.bz,re.value.bd=de.data.bd,re.value.xhs=de.data.xhs,re.value.dy=de.data.dy);let Ie=JSON.stringify(re.value),Ve=JSON.parse(Ie);oe.value=Ve},Fe=()=>{let de=JSON.stringify(oe.value),Ie=JSON.stringify(re.value);return de!==Ie?ElMessageBox.confirm("配置已被修改，但未保存，是否保存","警告",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(async()=>(await ie(),!0)).catch(async()=>!0):new Promise((Ve,kt)=>{Ve(!0)})};return onMounted(async()=>{await ae()}),r({checkData:Fe}),(de,Ie)=>{const Ve=ElButton,kt=ElCard,At=ElAffix,ze=ElScrollbar;return openBlock(),createElementBlock(Fragment,null,[createVNode(At,{target:".el-scrollbar__view"},{default:withCtx(()=>[createVNode(kt,{id:"enable"},{header:withCtx(()=>[createVNode(Ve,{type:"primary","native-type":"button",icon:unref(edit_default),onClick:Ie[0]||(Ie[0]=Et=>ie())},{default:withCtx(()=>[createTextVNode("保存")]),_:1},8,["icon"]),createVNode(Ve,{type:"primary","native-type":"button",icon:unref(setting_default),onClick:Ie[1]||(Ie[1]=Et=>ae())},{default:withCtx(()=>[createTextVNode("重置")]),_:1},8,["icon"])]),default:withCtx(()=>[createVNode(_sfc_main$d,{enable:re.value.enableModule,onEnableChange:ue},null,8,["enable"])]),_:1})]),_:1}),createVNode(ze,{style:{height:"calc(100vh - 230px)"},id:"pdom"},{default:withCtx(()=>[re.value.enableModule.bot?(openBlock(),createBlock(_sfc_main$c,{key:0,ref_key:"botRef",ref:g,bot:re.value.bot,class:"mt10"},null,8,["bot"])):createCommentVNode("",!0),re.value.enableModule.qq?(openBlock(),createBlock(_sfc_main$b,{key:1,ref_key:"qqRef",ref:i,qq:re.value.qq,bot:re.value.bot,class:"mt10"},null,8,["qq","bot"])):createCommentVNode("",!0),re.value.enableModule.wb?(openBlock(),createBlock(_sfc_main$a,{key:2,ref_key:"wbRef",ref:y,wb:re.value.wb,class:"mt10"},null,8,["wb"])):createCommentVNode("",!0),re.value.enableModule.kd?(openBlock(),createBlock(_sfc_main$9,{key:3,ref_key:"kdRef",ref:$,kd:re.value.kd,class:"mt10"},null,8,["kd"])):createCommentVNode("",!0),re.value.enableModule.bz?(openBlock(),createBlock(_sfc_main$8,{key:4,ref_key:"bzRef",ref:k,bz:re.value.bz,class:"mt10"},null,8,["bz"])):createCommentVNode("",!0),re.value.enableModule.xhs?(openBlock(),createBlock(_sfc_main$7,{key:5,ref_key:"xhsRef",ref:V,xhs:re.value.xhs,class:"mt10"},null,8,["xhs"])):createCommentVNode("",!0),re.value.enableModule.bd?(openBlock(),createBlock(_sfc_main$6,{key:6,ref_key:"bdRef",ref:L,bd:re.value.bd},null,8,["bd"])):createCommentVNode("",!0),re.value.enableModule.dy?(openBlock(),createBlock(_sfc_main$5,{key:7,ref_key:"dyRef",ref:z,dy:re.value.dy,class:"mt10 mb50"},null,8,["dy"])):createCommentVNode("",!0)]),_:1})],64)}}}),config_vue_vue_type_style_index_0_lang="",elAvatar="",elSpace="";var FileSaver_min={exports:{}};(function(t,r){(function(e,n){n()})(commonjsGlobal,function(){function e($,V){return typeof V>"u"?V={autoBom:!1}:typeof V!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),V={autoBom:!V}),V.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test($.type)?new Blob(["\uFEFF",$],{type:$.type}):$}function n($,V,z){var re=new XMLHttpRequest;re.open("GET",$),re.responseType="blob",re.onload=function(){L(re.response,V,z)},re.onerror=function(){console.error("could not download file")},re.send()}function g($){var V=new XMLHttpRequest;V.open("HEAD",$,!1);try{V.send()}catch{}return 200<=V.status&&299>=V.status}function y($){try{$.dispatchEvent(new MouseEvent("click"))}catch{var V=document.createEvent("MouseEvents");V.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),$.dispatchEvent(V)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,k=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function($,V,z){var re=i.URL||i.webkitURL,oe=document.createElement("a");V=V||$.name||"download",oe.download=V,oe.rel="noopener",typeof $=="string"?(oe.href=$,oe.origin===location.origin?y(oe):g(oe.href)?n($,V,z):y(oe,oe.target="_blank")):(oe.href=re.createObjectURL($),setTimeout(function(){re.revokeObjectURL(oe.href)},4e4),setTimeout(function(){y(oe)},0))}:"msSaveOrOpenBlob"in navigator?function($,V,z){if(V=V||$.name||"download",typeof $!="string")navigator.msSaveOrOpenBlob(e($,z),V);else if(g($))n($,V,z);else{var re=document.createElement("a");re.href=$,re.target="_blank",setTimeout(function(){y(re)})}}:function($,V,z,re){if(re=re||open("","_blank"),re&&(re.document.title=re.document.body.innerText="downloading..."),typeof $=="string")return n($,V,z);var oe=$.type==="application/octet-stream",le=/constructor/i.test(i.HTMLElement)||i.safari,ue=/CriOS\/[\d]+/.test(navigator.userAgent);if((ue||oe&&le||k)&&typeof FileReader<"u"){var ie=new FileReader;ie.onloadend=function(){var de=ie.result;de=ue?de:de.replace(/^data:[^;]*;/,"data:attachment/file;"),re?re.location.href=de:location=de,re=null},ie.readAsDataURL($)}else{var ae=i.URL||i.webkitURL,Fe=ae.createObjectURL($);re?re.location=Fe:location.href=Fe,re=null,setTimeout(function(){ae.revokeObjectURL(Fe)},4e4)}});i.saveAs=L.saveAs=L,t.exports=L})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const _hoisted_1=createBaseVNode("label",null,"日志显示数量：",-1),_hoisted_2=createBaseVNode("label",null,"日志类型：",-1),_hoisted_3=createBaseVNode("span",null," ",-1),_hoisted_4={key:0},_hoisted_5={style:{"font-size":"12px",color:"gray"}},_hoisted_6={key:1},_hoisted_7={style:{"font-size":"12px",color:"gray"}},_hoisted_8={key:0,style:{"font-size":"12px",color:"grey"}},_hoisted_9=["href"],_hoisted_10=["src"],_hoisted_11=["src"],_sfc_main$3=defineComponent({__name:"log",props:{enable:{type:Object,default:{bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}}},setup(t){const r=ref("all"),e=ref(30),n=ref(new Array),g=async()=>{if(n.value.length<=0){ElMessage.info("无日志");return}ElMessageBox.confirm("此操作将永久清空日志，是否删除","警告",{cancelButtonText:"取消",confirmButtonText:"确定"}).then(()=>{n.value=new Array,logApi().clearLog()})},y=()=>{if(!n.value||n.value.length<=0){ElMessage.info("无日志");return}let V=[""];n.value.forEach(re=>{re.type=="link"||re.type=="pic"?V.push(re.name+":"+re.url):V.push(re.name+":"+re.content)});const z=new Blob(V,{type:"text/plain;charset=utf-8"});FileSaver_minExports.saveAs(z,"logs.txt")},i=()=>{var V=n.value.filter(z=>z.type=="pic").map(z=>z.url);return V??[]},k=V=>{var z=i().findIndex(re=>re==V);return z},L=()=>{setInterval(()=>{$()},3e3)},$=()=>{let V=logApi().getLogs();V&&(V=V.reverse(),r.value=="idol"?V=V.filter(z=>z.idol&&z.roleId==3):r.value&&r.value!="all"&&(V=V.filter(z=>z.type==r.value)),e&&(V=V.slice(0,e.value)),n.value=V)};return onMounted(()=>{$(),L()}),(V,z)=>{const re=ElInputNumber,oe=ElOption,le=ElSelect,ue=ElButton,ie=ElSpace,ae=ElAvatar,Fe=ElCol,de=ElRow,Ie=ElImage,Ve=ElCard,kt=ElScrollbar;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(ie,{wrap:""},{default:withCtx(()=>[_hoisted_1,createVNode(re,{modelValue:e.value,"onUpdate:modelValue":z[0]||(z[0]=At=>e.value=At),min:1,max:1e3,onChange:$},null,8,["modelValue"]),_hoisted_2,createVNode(le,{modelValue:r.value,"onUpdate:modelValue":z[1]||(z[1]=At=>r.value=At),style:{width:"120px"},onChange:$},{default:withCtx(()=>[(openBlock(),createBlock(oe,{key:0,label:"全部",value:"all"})),(openBlock(),createBlock(oe,{key:1,label:"系统",value:"system"})),(openBlock(),createBlock(oe,{key:2,label:"图片",value:"pic"})),(openBlock(),createBlock(oe,{key:3,label:"文本",value:"text"})),(openBlock(),createBlock(oe,{key:4,label:"链接",value:"link"})),t.enable.kd?(openBlock(),createBlock(oe,{key:5,label:"小偶像",value:"idol"})):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(ue,{type:"primary",onClick:g},{default:withCtx(()=>[createTextVNode("清空")]),_:1}),createVNode(ue,{type:"primary",onClick:y},{default:withCtx(()=>[createTextVNode("导出")]),_:1})]),_:1})]),createVNode(kt,{style:{height:"calc(100vh - 100px)","margin-top":"10px"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,At=>(openBlock(),createBlock(Ve,{style:{"background-color":"rgba(220,220,220,0.1)","margin-bottom":"10px"},shadow:"never"},{default:withCtx(()=>[createVNode(de,null,{default:withCtx(()=>[createVNode(Fe,{span:1.5},{default:withCtx(()=>[At.type!=="system"?(openBlock(),createBlock(ae,{key:0,src:At.avatar},null,8,["src"])):createCommentVNode("",!0)]),_:2},1024),createVNode(Fe,{span:.5},{default:withCtx(()=>[_hoisted_3]),_:1}),createVNode(Fe,{span:22},{default:withCtx(()=>[createVNode(de,null,{default:withCtx(()=>[At.type!=="system"?(openBlock(),createElementBlock("span",_hoisted_4,[createTextVNode(toDisplayString(At.name)+" ",1),createBaseVNode("span",_hoisted_5,toDisplayString((At.idol||"")+(At.channel?"【"+At.channel+"】":"")+At.time),1)])):(openBlock(),createElementBlock("span",_hoisted_6,[createTextVNode("系统信息："),createBaseVNode("span",_hoisted_7,toDisplayString(At.time),1)]))]),_:2},1024),createVNode(de,null,{default:withCtx(()=>[createVNode(Ve,{"body-class":"card-body-diy"},{default:withCtx(()=>[(At.type=="text",openBlock(),createElementBlock("span",{key:0,style:normalizeStyle({color:At.color})},[At.reply?(openBlock(),createElementBlock("div",_hoisted_8,"引用--"+toDisplayString(At.reply),1)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(At.content),1)],4)),At.type=="link"?(openBlock(),createElementBlock("a",{key:1,href:At.url,target:"_blank"},toDisplayString(At.url),9,_hoisted_9)):createCommentVNode("",!0),At.type=="audio"?(openBlock(),createElementBlock("audio",{key:2,src:At.url,controls:""},null,8,_hoisted_10)):createCommentVNode("",!0),At.type=="video"?(openBlock(),createElementBlock("video",{key:3,src:At.url,controls:"",height:"200px"},null,8,_hoisted_11)):createCommentVNode("",!0),At.type=="pic"?(openBlock(),createBlock(Ie,{key:4,src:At.url,"initial-index":k(At.url),"preview-src-list":i(),style:{width:"120px",height:"auto"}},null,8,["src","initial-index","preview-src-list"])):createCommentVNode("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})])}}}),log_vue_vue_type_style_index_0_lang="",elConfigProvider="",elPagination="",elTable="",elTableColumn="";var zhCn={name:"zh-cn",el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const _sfc_main$2=defineComponent({__name:"pic",setup(t){const r=ref({pageIndex:1,pageSize:5,total:0}),e=ref(),n=async i=>{let k=await saveImg(i);k.success?ElMessage.success(k.msg):ElMessage.error(k.msg),await y()},g=async i=>{let k=await delImg(i);k.success?ElMessage.success(k.msg):ElMessage.error(k.msg),await y()},y=async()=>{var i=await getCache(r.value);e.value=i.data,r.value.total=i.count};return onMounted(async()=>{await y()}),(i,k)=>{const L=ElButton,$=ElSpace,V=ElRow,z=ElTableColumn,re=ElImage,oe=ElTable,le=ElPagination,ue=ElConfigProvider;return openBlock(),createElementBlock("div",null,[createVNode(V,null,{default:withCtx(()=>[createVNode($,{wrap:""},{default:withCtx(()=>[createVNode(L,{type:"primary",icon:unref(refresh_default),onClick:y},{default:withCtx(()=>[createTextVNode("刷新")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode(V,{style:{"margin-top":"10px"}},{default:withCtx(()=>[createVNode(oe,{data:e.value,stripe:"",style:{width:"100%",height:"calc(100vh - 150px)"}},{default:withCtx(()=>[createVNode(z,{type:"index",width:"50"}),createVNode(z,{prop:"createDate",label:"时间"}),createVNode(z,{prop:"content",label:"图片"},{default:withCtx(ie=>[createVNode(re,{style:{width:"auto",height:"120px"},src:ie.row.content,"preview-teleported":"","preview-src-list":[ie.row.content]},null,8,["src","preview-src-list"])]),_:1}),createVNode(z,{label:"操作"},{default:withCtx(ie=>[createVNode(L,{type:"primary",onClick:ae=>n(ie.row.id)},{default:withCtx(()=>[createTextVNode("保存")]),_:2},1032,["onClick"]),createVNode(L,{type:"primary",onClick:ae=>g(ie.row.id)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),createVNode(ue,{locale:unref(zhCn)},{default:withCtx(()=>[createVNode(le,{onSizeChange:k[0]||(k[0]=ie=>y()),onCurrentChange:k[1]||(k[1]=ie=>y()),background:"",class:"mt15",layout:"total, sizes, prev, pager, next, jumper",total:r.value.total,"page-sizes":[5,10,20,30],"current-page":r.value.pageIndex,"onUpdate:currentPage":k[2]||(k[2]=ie=>r.value.pageIndex=ie),"page-size":r.value.pageSize,"onUpdate:pageSize":k[3]||(k[3]=ie=>r.value.pageSize=ie)},null,8,["total","current-page","page-size"])]),_:1},8,["locale"])]),_:1})])}}}),_sfc_main$1=defineComponent({__name:"plugin",setup(t){const r=ref(),e=async()=>{var L=await getFun();r.value=L.data},n=async L=>{let $=await startPlugin(L.name,L.version);$.success?ElMessage.success($.msg):ElMessage.error($.msg),await e()},g=async L=>{let $=await stopPlugin(L);$.success?ElMessage.success($.msg):ElMessage.error($.msg),await e()},y=async L=>{let $=await delPlugin(L);$.success?ElMessage.success($.msg):ElMessage.error($.msg),await e()},i=async()=>{await e()},k=async L=>{var $=await open$1(L);$.success?ElMessage.success($.msg):ElMessage.error($.msg)};return onMounted(async()=>{await e()}),(L,$)=>{const V=ElButton,z=ElUpload,re=ElSpace,oe=ElRow,le=ElTableColumn,ue=ElTag,ie=ElTable;return openBlock(),createElementBlock("div",null,[createVNode(oe,null,{default:withCtx(()=>[createVNode(re,{wrap:""},{default:withCtx(()=>[createVNode(z,{accept:".dll",action:unref(ApiPrefix)+"/uploaddll",multiple:"","show-file-list":!1,"on-success":i},{default:withCtx(()=>[createVNode(V,{type:"success",icon:unref(upload_default)},{default:withCtx(()=>[createTextVNode("上传插件")]),_:1},8,["icon"])]),_:1},8,["action"]),createVNode(V,{type:"primary",icon:unref(refresh_default),onClick:e},{default:withCtx(()=>[createTextVNode("刷新")]),_:1},8,["icon"])]),_:1})]),_:1}),createVNode(oe,{style:{"margin-top":"10px"}},{default:withCtx(()=>[createVNode(ie,{data:r.value,stripe:"",style:{width:"100%",height:"calc(100vh - 100px)"}},{default:withCtx(()=>[createVNode(le,{type:"index",width:"50"}),createVNode(le,{label:"插件名",width:"120"},{default:withCtx(ae=>[createTextVNode(toDisplayString(ae.row.pluginInfo.name),1)]),_:1}),createVNode(le,{label:"版本",width:"120"},{default:withCtx(ae=>[createTextVNode(toDisplayString(ae.row.pluginInfo.version),1)]),_:1}),createVNode(le,{label:"状态",width:"120"},{default:withCtx(ae=>[ae.row.status?(openBlock(),createBlock(ue,{key:0,type:"success"},{default:withCtx(()=>[createTextVNode("启用")]),_:1})):(openBlock(),createBlock(ue,{key:1,type:"danger"},{default:withCtx(()=>[createTextVNode("禁用")]),_:1}))]),_:1}),createVNode(le,{label:"描述"},{default:withCtx(ae=>[createTextVNode(toDisplayString(ae.row.pluginInfo.desc),1)]),_:1}),createVNode(le,{label:"操作",width:"250"},{default:withCtx(ae=>[ae.row.status?(openBlock(),createBlock(V,{key:1,size:"small",type:"warning",onClick:Fe=>g(ae.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("禁用")]),_:2},1032,["onClick"])):(openBlock(),createBlock(V,{key:0,size:"small",type:"primary",onClick:Fe=>n(ae.row.pluginInfo)},{default:withCtx(()=>[createTextVNode("启用")]),_:2},1032,["onClick"])),createVNode(V,{size:"small",type:"danger",onClick:Fe=>y(ae.row.pluginInfo.name)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"]),ae.row.pluginInfo.confPath?(openBlock(),createBlock(V,{key:2,size:"small",type:"info",onClick:Fe=>k(ae.row.pluginInfo.confPath)},{default:withCtx(()=>[createTextVNode("配置")]),_:2},1032,["onClick"])):createCommentVNode("",!0),ae.row.pluginInfo.logPath?(openBlock(),createBlock(V,{key:3,size:"small",type:"info",onClick:Fe=>k(ae.row.pluginInfo.logPath)},{default:withCtx(()=>[createTextVNode("日志")]),_:2},1032,["onClick"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["data"])]),_:1})])}}}),_sfc_main=defineComponent({__name:"App",setup(t){const r=ref(),e=ref({bot:!1,qq:!1,wb:!1,bz:!1,kd:!1,xhs:!1,dy:!1,bd:!1}),n=["index","log","pic","plugin"],g=ref(),y=ref(),i=ref("index"),k=async re=>{n.find(oe=>oe===re)?(g.value&&(await g.value.checkData(),await V()),i.value=re):L("enable")},L=async re=>{var ue;n.find(ie=>ie===i.value)&&(i.value="config",setTimeout(async()=>{await L(re)},100));const oe=document.getElementById(re),le=(ue=document.getElementById("pdom"))==null?void 0:ue.parentElement;if(le&&oe){const ie=le.getBoundingClientRect(),Fe=oe.getBoundingClientRect().top+le.scrollTop-ie.top-28;le.scrollTo({top:Fe,behavior:"smooth"})}},$=re=>{e.value=re},V=async()=>{let re=await getConfig();e.value=re.data.enableModule;let oe=JSON.stringify(re.data.enableModule),le=JSON.parse(oe);r.value=le},z=async()=>{await y.value.refreshConfig()};return onMounted(async()=>{await V()}),(re,oe)=>{const le=ElIcon,ue=ElMenuItem,ie=ElSubMenu,ae=ElMenu,Fe=ElScrollbar,de=ElAside,Ie=ElCard,Ve=ElMain,kt=ElContainer;return openBlock(),createBlock(kt,{class:"layout-container"},{default:withCtx(()=>[createVNode(Ie,null,{default:withCtx(()=>[createVNode(de,{width:"15vw"},{default:withCtx(()=>[createVNode(Fe,{style:{height:"calc(100vh - 30px)"}},{default:withCtx(()=>[createVNode(ae,{"default-openeds":["99"],"default-active":"1"},{default:withCtx(()=>[createVNode(ue,{index:"1",onClick:oe[0]||(oe[0]=At=>k("index"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(house_default))]),_:1}),createTextVNode(" 开始 ")]),_:1}),createVNode(ue,{index:"2",onClick:oe[1]||(oe[1]=At=>k("log"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(tickets_default))]),_:1}),createTextVNode(" 日志 ")]),_:1}),createVNode(ue,{index:"3",onClick:oe[2]||(oe[2]=At=>k("pic"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(picture_default))]),_:1}),createTextVNode(" 图片 ")]),_:1}),withDirectives(createVNode(ue,{index:"4",onClick:oe[3]||(oe[3]=At=>k("plugin"))},{default:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(cpu_default))]),_:1}),createTextVNode(" 插件 ")]),_:1},512),[[vShow,e.value.qq]]),createVNode(ie,{index:"99"},{title:withCtx(()=>[createVNode(le,null,{default:withCtx(()=>[createVNode(unref(set_up_default))]),_:1}),createTextVNode("配置 ")]),default:withCtx(()=>[createVNode(ue,{index:"99-0",onClick:oe[4]||(oe[4]=At=>k("config"))},{default:withCtx(()=>[createTextVNode("启用模块")]),_:1}),withDirectives(createVNode(ue,{index:"99-1",onClick:oe[5]||(oe[5]=At=>L("bot"))},{default:withCtx(()=>[createTextVNode("机器人")]),_:1},512),[[vShow,e.value.bot]]),withDirectives(createVNode(ue,{index:"99-2",onClick:oe[6]||(oe[6]=At=>L("qq"))},{default:withCtx(()=>[createTextVNode("QQ")]),_:1},512),[[vShow,e.value.qq]]),withDirectives(createVNode(ue,{index:"99-3",onClick:oe[7]||(oe[7]=At=>L("wb"))},{default:withCtx(()=>[createTextVNode("微博")]),_:1},512),[[vShow,e.value.wb]]),withDirectives(createVNode(ue,{index:"99-4",onClick:oe[8]||(oe[8]=At=>L("kd"))},{default:withCtx(()=>[createTextVNode("口袋")]),_:1},512),[[vShow,e.value.kd]]),withDirectives(createVNode(ue,{index:"99-5",onClick:oe[9]||(oe[9]=At=>L("bz"))},{default:withCtx(()=>[createTextVNode("B站")]),_:1},512),[[vShow,e.value.bz]]),withDirectives(createVNode(ue,{index:"99-6",onClick:oe[10]||(oe[10]=At=>L("xhs"))},{default:withCtx(()=>[createTextVNode("小红书")]),_:1},512),[[vShow,e.value.xhs]]),withDirectives(createVNode(ue,{index:"99-7",onClick:oe[11]||(oe[11]=At=>L("bd"))},{default:withCtx(()=>[createTextVNode("百度")]),_:1},512),[[vShow,e.value.bd]]),withDirectives(createVNode(ue,{index:"99-8",onClick:oe[12]||(oe[12]=At=>L("dy"))},{default:withCtx(()=>[createTextVNode("抖音")]),_:1},512),[[vShow,e.value.dy]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(Ie,{style:{width:"90%","margin-left":"10px"}},{default:withCtx(()=>[createVNode(kt,null,{default:withCtx(()=>[createVNode(Ve,{style:{"padding-left":"20px","padding-right":"20px"},id:"parentContainer"},{default:withCtx(()=>[withDirectives(createVNode(_sfc_main$e,{ref_key:"indexRef",ref:y,enable:e.value},null,8,["enable"]),[[vShow,i.value==="index"]]),withDirectives(createVNode(_sfc_main$3,{enable:e.value},null,8,["enable"]),[[vShow,i.value==="log"]]),i.value==="pic"?(openBlock(),createBlock(_sfc_main$2,{key:0})):createCommentVNode("",!0),i.value==="plugin"&&e.value.qq?(openBlock(),createBlock(_sfc_main$1,{key:1})):createCommentVNode("",!0),i.value==="config"?(openBlock(),createBlock(_sfc_main$4,{key:2,ref_key:"configRef",ref:g,enable:e.value,onTopEnableChange:$,onChangeMenu:L,onConfigChange:z},null,8,["enable"])):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),App_vue_vue_type_style_index_0_scoped_391b0c6d_lang="",_export_sfc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,g]of r)e[n]=g;return e},App=_export_sfc(_sfc_main,[["__scopeId","data-v-391b0c6d"]]),app=createApp(App);app.mount("#app");function objectSome(t,r){let e=!1;for(const n in t)if(t.hasOwnProperty(n)&&(e=r(n,t[n]),e))break;return e}var orgSend=WebSocket.prototype.send;WebSocket.prototype.send=function(){var t,r,e;if(/3:::/.test(arguments[0])){const n=arguments[0].replace(/3:::/,"");let g=null;try{g=JSON.parse(n)}catch{}if((g==null?void 0:g.SID)===2&&((t=g==null?void 0:g.Q)!=null&&t.length)){console.log("NIM_BROWSER_SDK.js拦截处理");for(const y of g.Q)if(/Property/i.test(y.t)&&y.v&&objectSome(y.v,(i,k)=>/0.17.2/i.test(k))){y.v[3]=2,y.v[42]="PocketFans201807/24020203",arguments[0]=`3:::${JSON.stringify(g)}`;break}}if((g==null?void 0:g.SID)===24&&((r=g==null?void 0:g.Q)!=null&&r.length)){for(const y of g.Q)if(/Property/i.test(y.t)&&y.v&&objectSome(y.v,(i,k)=>/0.17.2/i.test(k))){y.v[6]=2,arguments[0]=`3:::${JSON.stringify(g)}`;break}}if((g==null?void 0:g.SID)===13&&((e=g==null?void 0:g.Q)!=null&&e.length))for(const y of g.Q)/Property/i.test(y.t)&&y.v&&(y.v[3]=2,y.v[6]=2,y.v[42]="PocketFans201807/24020203",arguments[0]=`3:::${JSON.stringify(g)}`)}return orgSend.apply(this,arguments)};
